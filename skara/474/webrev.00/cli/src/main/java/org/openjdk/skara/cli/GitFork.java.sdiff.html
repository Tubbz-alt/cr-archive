<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/GitFork.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="GitJCheck.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>cli/src/main/java/org/openjdk/skara/cli/GitFork.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
136             Option.shortcut(&quot;u&quot;)
137                   .fullname(&quot;username&quot;)
138                   .describe(&quot;NAME&quot;)
139                   .helptext(&quot;Username on host&quot;)
140                   .optional(),
141             Option.shortcut(&quot;&quot;)
142                   .fullname(&quot;reference&quot;)
143                   .describe(&quot;DIR&quot;)
144                   .helptext(&quot;Same as git clone&#39;s flag &#39;reference-if-able&#39;&quot;)
145                   .optional(),
146             Option.shortcut(&quot;&quot;)
147                   .fullname(&quot;depth&quot;)
148                   .describe(&quot;N&quot;)
149                   .helptext(&quot;Same as git clones flag &#39;depth&#39;&quot;)
150                   .optional(),
151             Option.shortcut(&quot;&quot;)
152                   .fullname(&quot;shallow-since&quot;)
153                   .describe(&quot;DATE&quot;)
154                   .helptext(&quot;Same as git clones flag &#39;shallow-since&#39;&quot;)
155                   .optional(),





156             Option.shortcut(&quot;&quot;)
157                   .fullname(&quot;host&quot;)
158                   .describe(&quot;HOSTNAME&quot;)
159                   .helptext(&quot;Hostname for the forge&quot;)
160                   .optional(),
161             Switch.shortcut(&quot;&quot;)
162                   .fullname(&quot;no-clone&quot;)
163                   .helptext(&quot;Just fork the repository, do not clone it&quot;)
164                   .optional(),
165             Switch.shortcut(&quot;&quot;)
166                   .fullname(&quot;no-remote&quot;)
167                   .helptext(&quot;Do not add an additional git remote&quot;)
168                   .optional(),
169             Switch.shortcut(&quot;&quot;)
170                   .fullname(&quot;ssh&quot;)
171                   .helptext(&quot;Use the ssh:// protocol when cloning&quot;)
172                   .optional(),
173             Switch.shortcut(&quot;&quot;)
174                   .fullname(&quot;https&quot;)
175                   .helptext(&quot;Use the https:// protocol when cloning&quot;)
</pre>
<hr />
<pre>
352             }
353             String to = arguments.at(1).isPresent() ?
354                 arguments.at(1).asString() :
355                 defaultTo;
356             var repo = clone(cloneArgs, to, isMercurial);
357 
358             if (!noRemote) {
359                 var remoteWord = isMercurial ? &quot;path&quot; : &quot;remote&quot;;
360                 System.out.print(&quot;Adding &quot; + remoteWord + &quot; &#39;upstream&#39; for &quot; + webURI.toString() + &quot;...&quot;);
361                 var upstreamUrl = webURI.toString();
362                 if (isMercurial) {
363                     upstreamUrl = &quot;git+&quot; + upstreamUrl;
364                 }
365                 repo.addRemote(&quot;upstream&quot;, upstreamUrl);
366 
367                 System.out.println(&quot;done&quot;);
368 
369                 if (shouldSync) {
370                     GitSync.sync(repo, new String[]{&quot;--from&quot;, &quot;upstream&quot;, &quot;--to&quot;, &quot;origin&quot;, &quot;--pull&quot;});
371                 }








372             }
373         }
374     }
375 }
</pre>
</td>
<td>
<hr />
<pre>
136             Option.shortcut(&quot;u&quot;)
137                   .fullname(&quot;username&quot;)
138                   .describe(&quot;NAME&quot;)
139                   .helptext(&quot;Username on host&quot;)
140                   .optional(),
141             Option.shortcut(&quot;&quot;)
142                   .fullname(&quot;reference&quot;)
143                   .describe(&quot;DIR&quot;)
144                   .helptext(&quot;Same as git clone&#39;s flag &#39;reference-if-able&#39;&quot;)
145                   .optional(),
146             Option.shortcut(&quot;&quot;)
147                   .fullname(&quot;depth&quot;)
148                   .describe(&quot;N&quot;)
149                   .helptext(&quot;Same as git clones flag &#39;depth&#39;&quot;)
150                   .optional(),
151             Option.shortcut(&quot;&quot;)
152                   .fullname(&quot;shallow-since&quot;)
153                   .describe(&quot;DATE&quot;)
154                   .helptext(&quot;Same as git clones flag &#39;shallow-since&#39;&quot;)
155                   .optional(),
<span class="line-added">156             Option.shortcut(&quot;&quot;)</span>
<span class="line-added">157                   .fullname(&quot;setup-pre-push-hooks&quot;)</span>
<span class="line-added">158                   .describe(&quot;CHECKS&quot;)</span>
<span class="line-added">159                   .helptext(&quot;Setups pre-push hooks for [branches,commits]&quot;)</span>
<span class="line-added">160                   .optional(),</span>
161             Option.shortcut(&quot;&quot;)
162                   .fullname(&quot;host&quot;)
163                   .describe(&quot;HOSTNAME&quot;)
164                   .helptext(&quot;Hostname for the forge&quot;)
165                   .optional(),
166             Switch.shortcut(&quot;&quot;)
167                   .fullname(&quot;no-clone&quot;)
168                   .helptext(&quot;Just fork the repository, do not clone it&quot;)
169                   .optional(),
170             Switch.shortcut(&quot;&quot;)
171                   .fullname(&quot;no-remote&quot;)
172                   .helptext(&quot;Do not add an additional git remote&quot;)
173                   .optional(),
174             Switch.shortcut(&quot;&quot;)
175                   .fullname(&quot;ssh&quot;)
176                   .helptext(&quot;Use the ssh:// protocol when cloning&quot;)
177                   .optional(),
178             Switch.shortcut(&quot;&quot;)
179                   .fullname(&quot;https&quot;)
180                   .helptext(&quot;Use the https:// protocol when cloning&quot;)
</pre>
<hr />
<pre>
357             }
358             String to = arguments.at(1).isPresent() ?
359                 arguments.at(1).asString() :
360                 defaultTo;
361             var repo = clone(cloneArgs, to, isMercurial);
362 
363             if (!noRemote) {
364                 var remoteWord = isMercurial ? &quot;path&quot; : &quot;remote&quot;;
365                 System.out.print(&quot;Adding &quot; + remoteWord + &quot; &#39;upstream&#39; for &quot; + webURI.toString() + &quot;...&quot;);
366                 var upstreamUrl = webURI.toString();
367                 if (isMercurial) {
368                     upstreamUrl = &quot;git+&quot; + upstreamUrl;
369                 }
370                 repo.addRemote(&quot;upstream&quot;, upstreamUrl);
371 
372                 System.out.println(&quot;done&quot;);
373 
374                 if (shouldSync) {
375                     GitSync.sync(repo, new String[]{&quot;--from&quot;, &quot;upstream&quot;, &quot;--to&quot;, &quot;origin&quot;, &quot;--pull&quot;});
376                 }
<span class="line-added">377 </span>
<span class="line-added">378                 var setupPrePushHooksOption = getOption(&quot;setup-pre-push-hooks&quot;, subsection, arguments);</span>
<span class="line-added">379                 if (setupPrePushHooksOption != null) {</span>
<span class="line-added">380                     var res = GitJCheck.run(repo, new String[]{&quot;--setup-pre-push-hooks&quot;, setupPrePushHooksOption });</span>
<span class="line-added">381                     if (res != 0) {</span>
<span class="line-added">382                         System.exit(res);</span>
<span class="line-added">383                     }</span>
<span class="line-added">384                 }</span>
385             }
386         }
387     }
388 }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="GitJCheck.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>