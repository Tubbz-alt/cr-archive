<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff forge/src/main/java/org/openjdk/skara/forge/gitlab/GitLabMergeRequest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>forge/src/main/java/org/openjdk/skara/forge/gitlab/GitLabMergeRequest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 71 
 72     @Override
 73     public List&lt;Review&gt; reviews() {
 74 
 75         class CommitDate {
 76             private Hash hash;
 77             private ZonedDateTime date;
 78         }
 79 
 80         var commits = request.get(&quot;commits&quot;).execute().stream()
 81                              .map(JSONValue::asObject)
 82                              .map(obj -&gt; {
 83                                  var ret = new CommitDate();
 84                                  ret.hash = new Hash(obj.get(&quot;id&quot;).asString());
 85                                  ret.date = ZonedDateTime.parse(obj.get(&quot;created_at&quot;).asString());
 86                                  return ret;
 87                              })
 88                              .sorted(Comparator.comparing(cd -&gt; cd.date))
 89                              .collect(Collectors.toList());
 90 

 91         if (commits.size() == 0) {
<span class="line-modified"> 92             throw new RuntimeException(&quot;Reviews on a PR without any commits?&quot;);</span>
 93         }
 94 
 95         return request.get(&quot;award_emoji&quot;).execute().stream()
 96                       .map(JSONValue::asObject)
 97                       .filter(obj -&gt; obj.get(&quot;name&quot;).asString().equals(&quot;thumbsup&quot;) ||
 98                               obj.get(&quot;name&quot;).asString().equals(&quot;thumbsdown&quot;) ||
 99                               obj.get(&quot;name&quot;).asString().equals(&quot;question&quot;))
100                       .map(obj -&gt; {
101                           var reviewer = repository.forge().user(obj.get(&quot;user&quot;).get(&quot;username&quot;).asString());
102                           Review.Verdict verdict;
103                           switch (obj.get(&quot;name&quot;).asString()) {
104                               case &quot;thumbsup&quot;:
105                                   verdict = Review.Verdict.APPROVED;
106                                   break;
107                               case &quot;thumbsdown&quot;:
108                                   verdict = Review.Verdict.DISAPPROVED;
109                                   break;
110                               default:
111                                   verdict = Review.Verdict.NONE;
112                                   break;
</pre>
</td>
<td>
<hr />
<pre>
 71 
 72     @Override
 73     public List&lt;Review&gt; reviews() {
 74 
 75         class CommitDate {
 76             private Hash hash;
 77             private ZonedDateTime date;
 78         }
 79 
 80         var commits = request.get(&quot;commits&quot;).execute().stream()
 81                              .map(JSONValue::asObject)
 82                              .map(obj -&gt; {
 83                                  var ret = new CommitDate();
 84                                  ret.hash = new Hash(obj.get(&quot;id&quot;).asString());
 85                                  ret.date = ZonedDateTime.parse(obj.get(&quot;created_at&quot;).asString());
 86                                  return ret;
 87                              })
 88                              .sorted(Comparator.comparing(cd -&gt; cd.date))
 89                              .collect(Collectors.toList());
 90 
<span class="line-added"> 91         // It&#39;s possible to create a merge request without any commits</span>
 92         if (commits.size() == 0) {
<span class="line-modified"> 93             return List.of();</span>
 94         }
 95 
 96         return request.get(&quot;award_emoji&quot;).execute().stream()
 97                       .map(JSONValue::asObject)
 98                       .filter(obj -&gt; obj.get(&quot;name&quot;).asString().equals(&quot;thumbsup&quot;) ||
 99                               obj.get(&quot;name&quot;).asString().equals(&quot;thumbsdown&quot;) ||
100                               obj.get(&quot;name&quot;).asString().equals(&quot;question&quot;))
101                       .map(obj -&gt; {
102                           var reviewer = repository.forge().user(obj.get(&quot;user&quot;).get(&quot;username&quot;).asString());
103                           Review.Verdict verdict;
104                           switch (obj.get(&quot;name&quot;).asString()) {
105                               case &quot;thumbsup&quot;:
106                                   verdict = Review.Verdict.APPROVED;
107                                   break;
108                               case &quot;thumbsdown&quot;:
109                                   verdict = Review.Verdict.DISAPPROVED;
110                                   break;
111                               default:
112                                   verdict = Review.Verdict.NONE;
113                                   break;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>