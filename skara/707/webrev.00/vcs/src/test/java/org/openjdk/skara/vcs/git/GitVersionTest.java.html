<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New vcs/src/test/java/org/openjdk/skara/vcs/git/GitVersionTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2020 Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package org.openjdk.skara.vcs.git;
 24 
 25 import org.junit.jupiter.params.ParameterizedTest;
 26 import org.junit.jupiter.params.provider.Arguments;
 27 import org.junit.jupiter.params.provider.MethodSource;
 28 
 29 import java.util.stream.Stream;
 30 
 31 import static org.junit.jupiter.api.Assertions.assertEquals;
 32 import static org.junit.jupiter.api.Assertions.assertFalse;
 33 import static org.junit.jupiter.api.Assertions.assertTrue;
 34 import static org.junit.jupiter.params.provider.Arguments.arguments;
 35 
 36 public class GitVersionTest {
 37 
 38     static Stream&lt;Arguments&gt; supportedVersions() {
 39         return Stream.of(
 40             arguments(&quot;git version 2.22.3&quot;, 2, 22, 3),
 41             arguments(&quot;git version 2.23.2&quot;, 2, 23, 2),
 42             arguments(&quot;git version 2.24.2&quot;, 2, 24, 2),
 43             arguments(&quot;git version 2.25.3&quot;, 2, 25, 3),
 44             arguments(&quot;git version 2.26.1&quot;, 2, 26, 1),
 45 
 46             arguments(&quot;git version 2.27.0.windows.1&quot;, 2, 27, 0)
 47         );
 48     }
 49 
 50     @ParameterizedTest
 51     @MethodSource(&quot;supportedVersions&quot;)
 52     void testSupportedVersions(String versionsString, int major, int minor, int security) {
 53         GitVersion version = GitVersion.parse(versionsString);
 54 
 55         assertEquals(version.major(), major);
 56         assertEquals(version.minor(), minor);
 57         assertEquals(version.security(), security);
 58 
 59         assertFalse(version.isUnknown());
 60         assertTrue(version.isKnownSupported());
 61     }
 62 
 63     static Stream&lt;Arguments&gt; unsupportedVersions() {
 64         return Stream.of(
 65             arguments(&quot;git version 2.17.4&quot;, 2, 17, 4),
 66             arguments(&quot;git version 2.18.3&quot;, 2, 18, 3),
 67             arguments(&quot;git version 2.19.4&quot;, 2, 19, 4),
 68             arguments(&quot;git version 2.20.3&quot;, 2, 20, 3),
 69             arguments(&quot;git version 2.21.2&quot;, 2, 21, 2),
 70             arguments(&quot;git version 2.21.1 (Apple Git-122.3) &quot;, 2, 21, 1) // doesn&#39;t contain security fix
 71         );
 72     }
 73 
 74     @ParameterizedTest
 75     @MethodSource(&quot;unsupportedVersions&quot;)
 76     void testUnsupportedVersions(String versionsString, int major, int minor, int security) {
 77         GitVersion version = GitVersion.parse(versionsString);
 78 
 79         assertEquals(version.major(), major);
 80         assertEquals(version.minor(), minor);
 81         assertEquals(version.security(), security);
 82 
 83         assertFalse(version.isUnknown());
 84         assertFalse(version.isKnownSupported());
 85     }
 86 
 87     static Stream&lt;Arguments&gt; unknownVersions() {
 88         return Stream.of(
 89             arguments(&quot;asdfxzxcv&quot;)
 90         );
 91     }
 92 
 93     @ParameterizedTest
 94     @MethodSource(&quot;unknownVersions&quot;)
 95     void testUnsupportedVersions(String versionsString) {
 96         GitVersion version = GitVersion.parse(versionsString);
 97 
 98         assertTrue(version.isUnknown());
 99         assertFalse(version.isKnownSupported());
100     }
101 
102 }
    </pre>
  </body>
</html>