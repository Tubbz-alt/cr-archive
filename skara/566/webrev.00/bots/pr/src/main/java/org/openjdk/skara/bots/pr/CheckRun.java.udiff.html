<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff bots/pr/src/main/java/org/openjdk/skara/bots/pr/CheckRun.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/bots/pr/CheckTests.java.udiff.html" target="_top">next &gt;</a></center>    <h2>bots/pr/src/main/java/org/openjdk/skara/bots/pr/CheckRun.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -296,10 +296,17 @@</span>
          return visitor.getChecks().entrySet().stream()
                        .map(entry -&gt; &quot;- [&quot; + (entry.getValue() ? &quot;x&quot; : &quot; &quot;) + &quot;] &quot; + entry.getKey())
                        .collect(Collectors.joining(&quot;\n&quot;));
      }
  
<span class="udiff-line-added">+     private String getAdditionalErrorsList(List&lt;String&gt; additionalErrors) {</span>
<span class="udiff-line-added">+         return additionalErrors.stream()</span>
<span class="udiff-line-added">+                                .sorted()</span>
<span class="udiff-line-added">+                                .map(err -&gt; &quot; * &quot; + err)</span>
<span class="udiff-line-added">+                                .collect(Collectors.joining(&quot;\n&quot;));</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      private Optional&lt;String&gt; getReviewersList(List&lt;Review&gt; reviews) {
          var reviewers = reviews.stream()
                                 .filter(review -&gt; review.verdict() == Review.Verdict.APPROVED)
                                 .map(review -&gt; {
                                     var entry = &quot; * &quot; + formatReviewer(review.reviewer());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -335,16 +342,21 @@</span>
          } else {
              return Optional.empty();
          }
      }
  
<span class="udiff-line-modified-removed">-     private String getStatusMessage(List&lt;Comment&gt; comments, List&lt;Review&gt; reviews, PullRequestCheckIssueVisitor visitor) {</span>
<span class="udiff-line-modified-added">+     private String getStatusMessage(List&lt;Comment&gt; comments, List&lt;Review&gt; reviews, PullRequestCheckIssueVisitor visitor, List&lt;String&gt; additionalErrors) {</span>
          var progressBody = new StringBuilder();
          progressBody.append(&quot;---------\n&quot;);
          progressBody.append(&quot;### Progress\n&quot;);
          progressBody.append(getChecksList(visitor));
  
<span class="udiff-line-added">+         if (!additionalErrors.isEmpty()) {</span>
<span class="udiff-line-added">+             progressBody.append(&quot;\n\n### Problems\n&quot;);</span>
<span class="udiff-line-added">+             progressBody.append(getAdditionalErrorsList(additionalErrors));</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
          var issue = Issue.fromString(pr.title());
          var issueProject = workItem.bot.issueProject();
          if (issueProject != null &amp;&amp; issue.isPresent()) {
              var allIssues = new ArrayList&lt;Issue&gt;();
              allIssues.add(issue.get());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -669,11 +681,11 @@</span>
              }
              updateCheckBuilder(checkBuilder, visitor, additionalErrors);
              updateReadyForReview(visitor, additionalErrors);
  
              // Calculate and update the status message if needed
<span class="udiff-line-modified-removed">-             var statusMessage = getStatusMessage(comments, activeReviews, visitor);</span>
<span class="udiff-line-modified-added">+             var statusMessage = getStatusMessage(comments, activeReviews, visitor, additionalErrors);</span>
              var updatedBody = updateStatusMessage(statusMessage);
  
              // Post / update approval messages (only needed if the review itself can&#39;t contain a body)
              if (!pr.repository().forge().supportsReviewBody()) {
                  updateReviewedMessages(comments, allReviews);
</pre>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/bots/pr/CheckTests.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>