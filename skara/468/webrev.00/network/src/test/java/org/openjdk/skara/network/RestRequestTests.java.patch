diff a/network/src/test/java/org/openjdk/skara/network/RestRequestTests.java b/network/src/test/java/org/openjdk/skara/network/RestRequestTests.java
--- a/network/src/test/java/org/openjdk/skara/network/RestRequestTests.java
+++ b/network/src/test/java/org/openjdk/skara/network/RestRequestTests.java
@@ -22,11 +22,10 @@
  */
 package org.openjdk.skara.network;
 
 import com.sun.net.httpserver.*;
 import org.openjdk.skara.json.*;
-import org.openjdk.skara.network.*;
 
 import org.junit.jupiter.api.Test;
 
 import java.io.*;
 import java.net.*;
@@ -130,11 +129,11 @@
     @Test
     void transformError() throws IOException {
         try (var receiver = new RestReceiver("{}", 400)) {
             var request = new RestRequest(receiver.getEndpoint());
             var response = request.post("/test")
-                   .onError(r -> JSON.object().put("transformed", true))
+                   .onError(r -> Optional.of(JSON.object().put("transformed", true)))
                    .execute();
             assertTrue(response.contains("transformed"));
         }
     }
 
