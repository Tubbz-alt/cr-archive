<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff bots.dockerfile</title>
    <link rel="stylesheet" href="style.css" />
  </head>
<body>
<center>&lt; prev <a href="index.html" target="_top">index</a> next &gt;</center>    <h2>bots.dockerfile</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 43     make configure &amp;&amp; \
 44     ./configure --prefix=/bots/git &amp;&amp; \
 45     make all &amp;&amp; \
 46     make install
 47 
 48 
 49 FROM oraclelinux:7.5 as prerequisites-compiletime
 50 
 51 WORKDIR /bots-build
 52 
 53 ARG JAVA_OPTIONS
 54 ARG GRADLE_OPTIONS
 55 
 56 ENV LANG en_US.UTF-8
 57 ENV LANGUAGE en_US:en
 58 ENV LC_ALL en_US.UTF-8
 59 
 60 RUN yum -y install unzip
 61 
 62 COPY gradlew ./

 63 
 64 ENV JAVA_TOOL_OPTIONS=$JAVA_OPTIONS
 65 RUN sh gradlew --no-daemon --version $GRADLE_OPTIONS
 66 
 67 
 68 FROM oraclelinux:7.5 as builder
 69 
 70 WORKDIR /bots-build
 71 
 72 ARG JAVA_OPTIONS
 73 ARG GRADLE_OPTIONS
 74 
 75 ENV LANG en_US.UTF-8
 76 ENV LANGUAGE en_US:en
 77 ENV LC_ALL en_US.UTF-8
 78 
 79 RUN yum -y install rsync
 80 
 81 COPY --from=prerequisites-compiletime /bots-build ./
 82 COPY --from=prerequisites-runtime /bots/git/ /bots/git/
</pre>
<hr />
<pre>
 87 ENV PATH=/bots/git/bin:/bots/hg/bin:${PATH}
 88 RUN sh gradlew --no-daemon $GRADLE_OPTIONS :bots:cli:images
 89 
 90 
 91 FROM oraclelinux:7.5
 92 
 93 WORKDIR /bots
 94 
 95 LABEL org.openjdk.bots=true
 96 
 97 ARG JAVA_OPTIONS
 98 
 99 ENV LANG en_US.UTF-8
100 ENV LANGUAGE en_US:en
101 ENV LC_ALL en_US.UTF-8
102 
103 RUN yum -y install rsync unzip &amp;&amp; yum clean all
104 
105 COPY --from=prerequisites-runtime /bots/git/ /bots/git/
106 COPY --from=prerequisites-runtime /bots/hg/ /bots/hg/
<span class="line-modified">107 COPY --from=builder /bots-build/bots/cli/build/distributions/cli-unknown-linux.tar.gz /bots/tar/</span>
108 
109 ENV JAVA_TOOL_OPTIONS=$JAVA_OPTIONS
110 ENV PATH=/bots/git/bin:/bots/hg/bin:${PATH}
111 
<span class="line-modified">112 RUN tar xvf /bots/tar/cli-unknown-linux.tar.gz</span>
113 
114 ENTRYPOINT [&quot;/bots/bin/skara-bots&quot;]
115 CMD [&quot;--help&quot;]
</pre>
</td>
<td>
<hr />
<pre>
 43     make configure &amp;&amp; \
 44     ./configure --prefix=/bots/git &amp;&amp; \
 45     make all &amp;&amp; \
 46     make install
 47 
 48 
 49 FROM oraclelinux:7.5 as prerequisites-compiletime
 50 
 51 WORKDIR /bots-build
 52 
 53 ARG JAVA_OPTIONS
 54 ARG GRADLE_OPTIONS
 55 
 56 ENV LANG en_US.UTF-8
 57 ENV LANGUAGE en_US:en
 58 ENV LC_ALL en_US.UTF-8
 59 
 60 RUN yum -y install unzip
 61 
 62 COPY gradlew ./
<span class="line-added"> 63 COPY deps.env ./</span>
 64 
 65 ENV JAVA_TOOL_OPTIONS=$JAVA_OPTIONS
 66 RUN sh gradlew --no-daemon --version $GRADLE_OPTIONS
 67 
 68 
 69 FROM oraclelinux:7.5 as builder
 70 
 71 WORKDIR /bots-build
 72 
 73 ARG JAVA_OPTIONS
 74 ARG GRADLE_OPTIONS
 75 
 76 ENV LANG en_US.UTF-8
 77 ENV LANGUAGE en_US:en
 78 ENV LC_ALL en_US.UTF-8
 79 
 80 RUN yum -y install rsync
 81 
 82 COPY --from=prerequisites-compiletime /bots-build ./
 83 COPY --from=prerequisites-runtime /bots/git/ /bots/git/
</pre>
<hr />
<pre>
 88 ENV PATH=/bots/git/bin:/bots/hg/bin:${PATH}
 89 RUN sh gradlew --no-daemon $GRADLE_OPTIONS :bots:cli:images
 90 
 91 
 92 FROM oraclelinux:7.5
 93 
 94 WORKDIR /bots
 95 
 96 LABEL org.openjdk.bots=true
 97 
 98 ARG JAVA_OPTIONS
 99 
100 ENV LANG en_US.UTF-8
101 ENV LANGUAGE en_US:en
102 ENV LC_ALL en_US.UTF-8
103 
104 RUN yum -y install rsync unzip &amp;&amp; yum clean all
105 
106 COPY --from=prerequisites-runtime /bots/git/ /bots/git/
107 COPY --from=prerequisites-runtime /bots/hg/ /bots/hg/
<span class="line-modified">108 COPY --from=builder /bots-build/bots/cli/build/distributions/cli-unknown-linux-x64.tar.gz /bots/tar/</span>
109 
110 ENV JAVA_TOOL_OPTIONS=$JAVA_OPTIONS
111 ENV PATH=/bots/git/bin:/bots/hg/bin:${PATH}
112 
<span class="line-modified">113 RUN tar xvf /bots/tar/cli-unknown-linux-x64.tar.gz</span>
114 
115 ENTRYPOINT [&quot;/bots/bin/skara-bots&quot;]
116 CMD [&quot;--help&quot;]
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="index.html" target="_top">index</a> next &gt;</center>  </body>
</html>