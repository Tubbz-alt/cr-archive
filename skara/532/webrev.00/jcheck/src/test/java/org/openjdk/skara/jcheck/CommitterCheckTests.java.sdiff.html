<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff jcheck/src/test/java/org/openjdk/skara/jcheck/CommitterCheckTests.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../main/java/org/openjdk/skara/jcheck/CommitterCheck.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>jcheck/src/test/java/org/openjdk/skara/jcheck/CommitterCheckTests.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
193         assertEquals(1, issues.size());
194         var issue = issues.get(0);
195         assertTrue(issue instanceof CommitterIssue);
196         var committerIssue = (CommitterIssue) issue;
197         assertEquals(&quot;test&quot;, committerIssue.project().name());
198         assertEquals(commit, committerIssue.commit());
199         assertEquals(CommitterCheck.class, committerIssue.check().getClass());
200         assertEquals(message, committerIssue.message());
201         assertEquals(Severity.ERROR, committerIssue.severity());
202     }
203 
204     @Test
205     void missingCommitterNameShouldFail() throws IOException {
206         var author = new Author(&quot;Foo&quot;, &quot;foo@host.org&quot;);
207         var committer = new Author(&quot;&quot;, &quot;baz@localhost&quot;);
208         var commit = commit(author, committer);
209         var message = message(commit);
210         var check = new CommitterCheck(census());
211         var issues = toList(check.check(commit, message, conf()));
212 
<span class="line-modified">213         assertEquals(1, issues.size());</span>
214         assertTrue(issues.get(0) instanceof CommitterNameIssue);
215         var issue = (CommitterNameIssue) issues.get(0);
216         assertEquals(commit, issue.commit());
217         assertEquals(check, issue.check());
218         assertEquals(message, issue.message());
219         assertEquals(Severity.ERROR, issue.severity());
220     }
221 
222     @Test
223     void missingCommitterEmailShouldFail() throws IOException {
224         var author = new Author(&quot;Foo&quot;, &quot;foo@host.org&quot;);
225         var committer = new Author(&quot;Baz&quot;, &quot;&quot;);
226         var commit = commit(author, committer);
227         var message = message(commit);
228         var check = new CommitterCheck(census());
229         var issues = toList(check.check(commit, message, conf()));
230 
<span class="line-modified">231         assertEquals(1, issues.size());</span>
232         assertTrue(issues.get(0) instanceof CommitterEmailIssue);
233         var issue = (CommitterEmailIssue) issues.get(0);
234         assertEquals(commit, issue.commit());
235         assertEquals(check, issue.check());
236         assertEquals(message, issue.message());
237         assertEquals(Severity.ERROR, issue.severity());
238     }
239 
240     @Test
241     void allowedToMerge() throws IOException {
242         var author = new Author(&quot;baz&quot;, &quot;baz@localhost&quot;);
243         var committer = new Author(&quot;baz&quot;, &quot;baz@localhost&quot;);
244         var commit = mergeCommit(author, committer);
245         var message = message(commit);
246         var check = new CommitterCheck(census());
247         var issues = toList(check.check(commit, message, conf()));
248 
249         assertEquals(1, issues.size());
250         assertTrue(issues.get(0) instanceof CommitterIssue);
251 
</pre>
</td>
<td>
<hr />
<pre>
193         assertEquals(1, issues.size());
194         var issue = issues.get(0);
195         assertTrue(issue instanceof CommitterIssue);
196         var committerIssue = (CommitterIssue) issue;
197         assertEquals(&quot;test&quot;, committerIssue.project().name());
198         assertEquals(commit, committerIssue.commit());
199         assertEquals(CommitterCheck.class, committerIssue.check().getClass());
200         assertEquals(message, committerIssue.message());
201         assertEquals(Severity.ERROR, committerIssue.severity());
202     }
203 
204     @Test
205     void missingCommitterNameShouldFail() throws IOException {
206         var author = new Author(&quot;Foo&quot;, &quot;foo@host.org&quot;);
207         var committer = new Author(&quot;&quot;, &quot;baz@localhost&quot;);
208         var commit = commit(author, committer);
209         var message = message(commit);
210         var check = new CommitterCheck(census());
211         var issues = toList(check.check(commit, message, conf()));
212 
<span class="line-modified">213         assertEquals(2, issues.size());</span>
214         assertTrue(issues.get(0) instanceof CommitterNameIssue);
215         var issue = (CommitterNameIssue) issues.get(0);
216         assertEquals(commit, issue.commit());
217         assertEquals(check, issue.check());
218         assertEquals(message, issue.message());
219         assertEquals(Severity.ERROR, issue.severity());
220     }
221 
222     @Test
223     void missingCommitterEmailShouldFail() throws IOException {
224         var author = new Author(&quot;Foo&quot;, &quot;foo@host.org&quot;);
225         var committer = new Author(&quot;Baz&quot;, &quot;&quot;);
226         var commit = commit(author, committer);
227         var message = message(commit);
228         var check = new CommitterCheck(census());
229         var issues = toList(check.check(commit, message, conf()));
230 
<span class="line-modified">231         assertEquals(2, issues.size());</span>
232         assertTrue(issues.get(0) instanceof CommitterEmailIssue);
233         var issue = (CommitterEmailIssue) issues.get(0);
234         assertEquals(commit, issue.commit());
235         assertEquals(check, issue.check());
236         assertEquals(message, issue.message());
237         assertEquals(Severity.ERROR, issue.severity());
238     }
239 
240     @Test
241     void allowedToMerge() throws IOException {
242         var author = new Author(&quot;baz&quot;, &quot;baz@localhost&quot;);
243         var committer = new Author(&quot;baz&quot;, &quot;baz@localhost&quot;);
244         var commit = mergeCommit(author, committer);
245         var message = message(commit);
246         var check = new CommitterCheck(census());
247         var issues = toList(check.check(commit, message, conf()));
248 
249         assertEquals(1, issues.size());
250         assertTrue(issues.get(0) instanceof CommitterIssue);
251 
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../main/java/org/openjdk/skara/jcheck/CommitterCheck.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>