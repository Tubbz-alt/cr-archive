<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/pr/GitPrHelp.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>cli/src/main/java/org/openjdk/skara/cli/pr/GitPrHelp.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 63         commands.put(&quot;checkout&quot;, Pair.of(GitPrCheckout.inputs, GitPrCheckout.flags));
 64         commands.put(&quot;apply&quot;, Pair.of(GitPrApply.inputs, GitPrApply.flags));
 65         commands.put(&quot;integrate&quot;, Pair.of(GitPrIntegrate.inputs, GitPrIntegrate.flags));
 66         commands.put(&quot;approve&quot;, Pair.of(GitPrApprove.inputs, GitPrApprove.flags));
 67         commands.put(&quot;create&quot;, Pair.of(GitPrCreate.inputs, GitPrCreate.flags));
 68         commands.put(&quot;close&quot;, Pair.of(GitPrClose.inputs, GitPrClose.flags));
 69         commands.put(&quot;set&quot;, Pair.of(GitPrSet.inputs, GitPrSet.flags));
 70         commands.put(&quot;sponsor&quot;, Pair.of(GitPrSponsor.inputs, GitPrSponsor.flags));
 71         commands.put(&quot;test&quot;, Pair.of(GitPrTest.inputs, GitPrTest.flags));
 72         commands.put(&quot;info&quot;, Pair.of(GitPrInfo.inputs, GitPrInfo.flags));
 73     }
 74 
 75     private static String describe(List&lt;Input&gt; inputs) {
 76         return inputs.stream().map(Input::toString).collect(Collectors.joining(&quot; &quot;));
 77     }
 78 
 79     private static&lt;T&gt; TreeSet&lt;T&gt; sorted(Set&lt;T&gt; s) {
 80         return new TreeSet&lt;T&gt;(s);
 81     }
 82 
<span class="line-modified"> 83     private static void showHelpFor(String command) {</span>
 84         var inputs = commands.get(command).first();
 85         var flags = commands.get(command).second();
 86 
<span class="line-modified"> 87         System.out.println(&quot;- &quot; + command);</span>
<span class="line-modified"> 88         System.out.println(&quot;  Usage: git pr &quot; + command + &quot; &quot; + describe(inputs));</span>
<span class="line-modified"> 89         System.out.println(&quot;  Flags:&quot;);</span>
<span class="line-removed"> 90         ArgumentParser.showFlags(System.out, flags, &quot; &quot;.repeat(4));</span>
 91     }
 92 
 93     public static void main(String[] args) {
 94         var flags = List.of(
 95             Switch.shortcut(&quot;h&quot;)
 96                   .fullname(&quot;help&quot;)
 97                   .helptext(&quot;Show help&quot;)
 98                   .optional(),
 99             Switch.shortcut(&quot;&quot;)
100                   .fullname(&quot;verbose&quot;)
101                   .helptext(&quot;Turn on verbose output&quot;)
102                   .optional(),
103             Switch.shortcut(&quot;&quot;)
104                   .fullname(&quot;debug&quot;)
105                   .helptext(&quot;Turn on debugging output&quot;)
106                   .optional(),
107             Switch.shortcut(&quot;&quot;)
108                   .fullname(&quot;version&quot;)
109                   .helptext(&quot;Print the version of this tool&quot;)
110                   .optional()
</pre>
<hr />
<pre>
114             Input.position(0)
115                  .describe(&quot;COMMAND&quot;)
116                  .singular()
117                  .optional()
118         );
119 
120         var parser = new ArgumentParser(&quot;git-pr&quot;, flags, inputs);
121         var arguments = parser.parse(args);
122         if (arguments.contains(&quot;version&quot;)) {
123             System.out.println(&quot;git-pr version: &quot; + Version.fromManifest().orElse(&quot;unknown&quot;));
124             System.exit(0);
125         }
126         if (arguments.contains(&quot;verbose&quot;) || arguments.contains(&quot;debug&quot;)) {
127             var level = arguments.contains(&quot;debug&quot;) ? Level.FINER : Level.FINE;
128             Logging.setup(level);
129         }
130 
131         if (arguments.at(0).isPresent()) {
132             var command = arguments.at(0).asString();
133             if (commands.keySet().contains(command)) {
<span class="line-modified">134                showHelpFor(command);</span>
135                System.exit(0);
136             } else {
137                 System.err.println(&quot;error: unknown sub-command: &quot; + command);
138                 System.err.println(&quot;&quot;);
139                 System.err.println(&quot;Available sub-commands are:&quot;);
140                 for (var subcommand : sorted(commands.keySet())) {
141                     System.err.println(&quot;- &quot; + subcommand);
142                 }
143                 System.exit(1);
144             }
145         }
146 
147         System.out.println(&quot;git-pr is used for interacting with pull requeqsts from a command line.&quot;);
148         System.out.println(&quot;The following commands are available:&quot;);
149         for (var command : sorted(commands.keySet())) {
<span class="line-modified">150             showHelpFor(command);</span>

151         }
152     }
153 }
</pre>
</td>
<td>
<hr />
<pre>
 63         commands.put(&quot;checkout&quot;, Pair.of(GitPrCheckout.inputs, GitPrCheckout.flags));
 64         commands.put(&quot;apply&quot;, Pair.of(GitPrApply.inputs, GitPrApply.flags));
 65         commands.put(&quot;integrate&quot;, Pair.of(GitPrIntegrate.inputs, GitPrIntegrate.flags));
 66         commands.put(&quot;approve&quot;, Pair.of(GitPrApprove.inputs, GitPrApprove.flags));
 67         commands.put(&quot;create&quot;, Pair.of(GitPrCreate.inputs, GitPrCreate.flags));
 68         commands.put(&quot;close&quot;, Pair.of(GitPrClose.inputs, GitPrClose.flags));
 69         commands.put(&quot;set&quot;, Pair.of(GitPrSet.inputs, GitPrSet.flags));
 70         commands.put(&quot;sponsor&quot;, Pair.of(GitPrSponsor.inputs, GitPrSponsor.flags));
 71         commands.put(&quot;test&quot;, Pair.of(GitPrTest.inputs, GitPrTest.flags));
 72         commands.put(&quot;info&quot;, Pair.of(GitPrInfo.inputs, GitPrInfo.flags));
 73     }
 74 
 75     private static String describe(List&lt;Input&gt; inputs) {
 76         return inputs.stream().map(Input::toString).collect(Collectors.joining(&quot; &quot;));
 77     }
 78 
 79     private static&lt;T&gt; TreeSet&lt;T&gt; sorted(Set&lt;T&gt; s) {
 80         return new TreeSet&lt;T&gt;(s);
 81     }
 82 
<span class="line-modified"> 83     private static void showHelpFor(String command, int indentation) {</span>
 84         var inputs = commands.get(command).first();
 85         var flags = commands.get(command).second();
 86 
<span class="line-modified"> 87         System.out.println(&quot; &quot;.repeat(indentation) + &quot;Usage: git pr &quot; + command + &quot; &quot; + describe(inputs));</span>
<span class="line-modified"> 88         System.out.println(&quot; &quot;.repeat(indentation) + &quot;Flags:&quot;);</span>
<span class="line-modified"> 89         ArgumentParser.showFlags(System.out, flags, &quot; &quot;.repeat(indentation + 2));</span>

 90     }
 91 
 92     public static void main(String[] args) {
 93         var flags = List.of(
 94             Switch.shortcut(&quot;h&quot;)
 95                   .fullname(&quot;help&quot;)
 96                   .helptext(&quot;Show help&quot;)
 97                   .optional(),
 98             Switch.shortcut(&quot;&quot;)
 99                   .fullname(&quot;verbose&quot;)
100                   .helptext(&quot;Turn on verbose output&quot;)
101                   .optional(),
102             Switch.shortcut(&quot;&quot;)
103                   .fullname(&quot;debug&quot;)
104                   .helptext(&quot;Turn on debugging output&quot;)
105                   .optional(),
106             Switch.shortcut(&quot;&quot;)
107                   .fullname(&quot;version&quot;)
108                   .helptext(&quot;Print the version of this tool&quot;)
109                   .optional()
</pre>
<hr />
<pre>
113             Input.position(0)
114                  .describe(&quot;COMMAND&quot;)
115                  .singular()
116                  .optional()
117         );
118 
119         var parser = new ArgumentParser(&quot;git-pr&quot;, flags, inputs);
120         var arguments = parser.parse(args);
121         if (arguments.contains(&quot;version&quot;)) {
122             System.out.println(&quot;git-pr version: &quot; + Version.fromManifest().orElse(&quot;unknown&quot;));
123             System.exit(0);
124         }
125         if (arguments.contains(&quot;verbose&quot;) || arguments.contains(&quot;debug&quot;)) {
126             var level = arguments.contains(&quot;debug&quot;) ? Level.FINER : Level.FINE;
127             Logging.setup(level);
128         }
129 
130         if (arguments.at(0).isPresent()) {
131             var command = arguments.at(0).asString();
132             if (commands.keySet().contains(command)) {
<span class="line-modified">133                showHelpFor(command, 0);</span>
134                System.exit(0);
135             } else {
136                 System.err.println(&quot;error: unknown sub-command: &quot; + command);
137                 System.err.println(&quot;&quot;);
138                 System.err.println(&quot;Available sub-commands are:&quot;);
139                 for (var subcommand : sorted(commands.keySet())) {
140                     System.err.println(&quot;- &quot; + subcommand);
141                 }
142                 System.exit(1);
143             }
144         }
145 
146         System.out.println(&quot;git-pr is used for interacting with pull requeqsts from a command line.&quot;);
147         System.out.println(&quot;The following commands are available:&quot;);
148         for (var command : sorted(commands.keySet())) {
<span class="line-modified">149             System.out.println(&quot;- &quot; + command);</span>
<span class="line-added">150             showHelpFor(command, 2);</span>
151         }
152     }
153 }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>