<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff bots/pr/src/main/java/org/openjdk/skara/bots/pr/PullRequestInstance.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="IntegrateCommand.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/bots/pr/MergeTests.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>bots/pr/src/main/java/org/openjdk/skara/bots/pr/PullRequestInstance.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
206             reply.println(&quot; since your change was applied:&quot;);
207             divergingCommits.forEach(c -&gt; reply.println(&quot; * &quot; + c.hash().hex() + &quot;: &quot; + c.message().get(0)));
208 
209             try {
210                 var commit = localRepo.lookup(commitHash).orElseThrow();
211                 localRepo.rebase(targetHash, commit.committer().name(), commit.committer().email());
212                 reply.println();
213                 reply.println(&quot;Your commit was automatically rebased without conflicts.&quot;);
214                 var hash = localRepo.head();
215                 return Optional.of(hash);
216             } catch (IOException e) {
217                 reply.println();
218                 reply.print(&quot;It was not possible to rebase your changes automatically. Please merge `&quot;);
219                 reply.print(pr.targetRef());
220                 reply.println(&quot;` into your branch and try again.&quot;);
221                 try {
222                     localRepo.checkout(commitHash, true);
223                 } catch (IOException e2) {
224                     throw new UncheckedIOException(e2);
225                 }

226                 return Optional.empty();
227             }
228         } else {
229             // No rebase needed
230             return Optional.of(commitHash);
231         }
232     }
233 
234     Repository localRepo() {
235         return localRepo;
236     }
237 
238     Hash baseHash() {
239         return baseHash;
240     }
241 
242     Hash targetHash() {
243         return targetHash;
244     }
245 
</pre>
</td>
<td>
<hr />
<pre>
206             reply.println(&quot; since your change was applied:&quot;);
207             divergingCommits.forEach(c -&gt; reply.println(&quot; * &quot; + c.hash().hex() + &quot;: &quot; + c.message().get(0)));
208 
209             try {
210                 var commit = localRepo.lookup(commitHash).orElseThrow();
211                 localRepo.rebase(targetHash, commit.committer().name(), commit.committer().email());
212                 reply.println();
213                 reply.println(&quot;Your commit was automatically rebased without conflicts.&quot;);
214                 var hash = localRepo.head();
215                 return Optional.of(hash);
216             } catch (IOException e) {
217                 reply.println();
218                 reply.print(&quot;It was not possible to rebase your changes automatically. Please merge `&quot;);
219                 reply.print(pr.targetRef());
220                 reply.println(&quot;` into your branch and try again.&quot;);
221                 try {
222                     localRepo.checkout(commitHash, true);
223                 } catch (IOException e2) {
224                     throw new UncheckedIOException(e2);
225                 }
<span class="line-added">226                 pr.addLabel(&quot;merge-conflict&quot;);</span>
227                 return Optional.empty();
228             }
229         } else {
230             // No rebase needed
231             return Optional.of(commitHash);
232         }
233     }
234 
235     Repository localRepo() {
236         return localRepo;
237     }
238 
239     Hash baseHash() {
240         return baseHash;
241     }
242 
243     Hash targetHash() {
244         return targetHash;
245     }
246 
</pre>
</td>
</tr>
</table>
<center><a href="IntegrateCommand.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/bots/pr/MergeTests.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>