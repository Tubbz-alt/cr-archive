<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff issuetracker/src/main/java/org/openjdk/skara/issuetracker/jira/JiraProject.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../bots/pr/src/test/java/org/openjdk/skara/bots/pr/IssueTests.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>issuetracker/src/main/java/org/openjdk/skara/issuetracker/jira/JiraProject.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
228                 if (value.asObject().contains(&quot;id&quot;)) {
229                     return value.get(&quot;id&quot;);
230                 } else {
231                     return value;
232                 }
233             } else {
234                 return value;
235             }
236         }
237 
238         var createMeta = createMeta();
239         var fields = createMeta.get(&quot;projects&quot;).stream()
240                                .filter(p -&gt; p.contains(&quot;name&quot;))
241                                .filter(p -&gt; p.get(&quot;name&quot;).asString().equalsIgnoreCase(projectName))
242                                .findAny().orElseThrow()
243                                .get(&quot;issuetypes&quot;).stream()
244                                .filter(i -&gt; i.get(&quot;id&quot;).asString().equals(allProperties.get(&quot;issuetype&quot;).get(&quot;id&quot;).asString()))
245                                .findAny().orElseThrow()
246                                .get(&quot;fields&quot;)
247                                .asObject();
<span class="line-removed">248         System.out.println(&quot;Allowed fields &quot; + fields);</span>
249 
250         var field = fields.get(name);
251         var componentIds = allProperties.get(&quot;components&quot;).stream()
252                                         .map(c -&gt; c.get(&quot;id&quot;).asString())
253                                         .map(Integer::parseInt)
254                                         .collect(Collectors.toSet());
255         var allowed = field.get(&quot;allowedValues&quot;).stream()
256                            .filter(c -&gt; componentIds.contains(c.get(&quot;id&quot;).asInt()))
257                            .flatMap(c -&gt; c.get(&quot;subComponents&quot;).stream())
258                            .collect(Collectors.toMap(s -&gt; s.get(&quot;name&quot;).asString(),
259                                                      s -&gt; s.get(&quot;id&quot;).asInt()));
260         if (!allowed.containsKey(value.asString())) {
261             var allowedList = allowed.keySet().stream()
262                                      .map(s -&gt; &quot;`&quot; + s + &quot;`&quot;)
263                                      .collect(Collectors.joining(&quot;, &quot;));
264             throw new RuntimeException(&quot;Unknown subcomponent `&quot; + value.asString() + &quot;`. Known subcomponents are &quot; +
265                                                allowedList + &quot;.&quot;);
266         }
267 
268         return JSON.of(allowed.get(value.asString()));
</pre>
</td>
<td>
<hr />
<pre>
228                 if (value.asObject().contains(&quot;id&quot;)) {
229                     return value.get(&quot;id&quot;);
230                 } else {
231                     return value;
232                 }
233             } else {
234                 return value;
235             }
236         }
237 
238         var createMeta = createMeta();
239         var fields = createMeta.get(&quot;projects&quot;).stream()
240                                .filter(p -&gt; p.contains(&quot;name&quot;))
241                                .filter(p -&gt; p.get(&quot;name&quot;).asString().equalsIgnoreCase(projectName))
242                                .findAny().orElseThrow()
243                                .get(&quot;issuetypes&quot;).stream()
244                                .filter(i -&gt; i.get(&quot;id&quot;).asString().equals(allProperties.get(&quot;issuetype&quot;).get(&quot;id&quot;).asString()))
245                                .findAny().orElseThrow()
246                                .get(&quot;fields&quot;)
247                                .asObject();

248 
249         var field = fields.get(name);
250         var componentIds = allProperties.get(&quot;components&quot;).stream()
251                                         .map(c -&gt; c.get(&quot;id&quot;).asString())
252                                         .map(Integer::parseInt)
253                                         .collect(Collectors.toSet());
254         var allowed = field.get(&quot;allowedValues&quot;).stream()
255                            .filter(c -&gt; componentIds.contains(c.get(&quot;id&quot;).asInt()))
256                            .flatMap(c -&gt; c.get(&quot;subComponents&quot;).stream())
257                            .collect(Collectors.toMap(s -&gt; s.get(&quot;name&quot;).asString(),
258                                                      s -&gt; s.get(&quot;id&quot;).asInt()));
259         if (!allowed.containsKey(value.asString())) {
260             var allowedList = allowed.keySet().stream()
261                                      .map(s -&gt; &quot;`&quot; + s + &quot;`&quot;)
262                                      .collect(Collectors.joining(&quot;, &quot;));
263             throw new RuntimeException(&quot;Unknown subcomponent `&quot; + value.asString() + &quot;`. Known subcomponents are &quot; +
264                                                allowedList + &quot;.&quot;);
265         }
266 
267         return JSON.of(allowed.get(value.asString()));
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../bots/pr/src/test/java/org/openjdk/skara/bots/pr/IssueTests.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>