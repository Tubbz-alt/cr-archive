<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff bots/pr/src/main/java/org/openjdk/skara/bots/pr/IssueCommand.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>bots/pr/src/main/java/org/openjdk/skara/bots/pr/IssueCommand.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 42         this.identifier = identifier;
 43         this.reason = reason;
 44     }
 45 
 46     String identifier() {
 47         return identifier;
 48     }
 49 
 50     String reason() {
 51         return reason;
 52     }
 53 }
 54 
 55 public class IssueCommand implements CommandHandler {
 56     private final String name;
 57 
 58     private void showHelp(PrintWriter reply) {
 59         reply.println(&quot;Command syntax:&quot;);
 60         reply.println(&quot; * `/&quot; + name + &quot; [add|remove] &lt;id&gt;[,&lt;id&gt;,...]`&quot;);
 61         reply.println(&quot; * `/&quot; + name + &quot; [add] &lt;id&gt;: &lt;description&gt;`&quot;);
<span class="line-modified"> 62         reply.println(&quot; * `/&quot; + name + &quot; create [pX] &lt;component&gt; [subcomponent]&quot;);</span>
 63         reply.println();
 64         reply.println(&quot;Some examples:&quot;);
 65         reply.println();
 66         reply.println(&quot; * `/&quot; + name + &quot; add JDK-1234567,4567890`&quot;);
 67         reply.println(&quot; * `/&quot; + name + &quot; remove JDK-4567890`&quot;);
 68         reply.println(&quot; * `/&quot; + name + &quot; 1234567: Use this exact title`&quot;);
<span class="line-modified"> 69         reply.println(&quot; * `/&quot; + name + &quot; create hotspot jfr&quot;);</span>
<span class="line-modified"> 70         reply.println(&quot; * `/&quot; + name + &quot; create P4 core-libs java.nio&quot;);</span>
 71         reply.println();
 72         reply.print(&quot;If issues are specified only by their ID, the title will be automatically retrieved from JBS. &quot;);
 73         reply.print(&quot;The project prefix (`JDK-` in the above examples) is optional. &quot;);
 74         reply.println(&quot;Separate multiple issue IDs using either spaces or commas.&quot;);
 75     }
 76 
 77     private static final Pattern shortIssuePattern = Pattern.compile(&quot;((?:[A-Za-z]+-)?[0-9]+)(?:,| |$)&quot;);
 78     private final static Pattern subCommandPattern = Pattern.compile(&quot;^(add|remove|delete|create|(?:[A-Za-z]+-)?[0-9]+:?)[ ,]?.*$&quot;);
 79 
 80     private List&lt;Issue&gt; parseIssueList(String allowedPrefix, String issueList) throws InvalidIssue {
 81         List&lt;Issue&gt; ret;
 82         // Is this a single fully described issue?
 83         var singleIssue = Issue.fromString(issueList);
 84         if (singleIssue.isPresent()) {
 85             ret = List.of(singleIssue.get());
 86         } else {
 87             var shortIssueMatcher = shortIssuePattern.matcher(issueList);
 88             ret = shortIssueMatcher.results()
 89                                    .map(matchResult -&gt; matchResult.group(1))
 90                                    .map(identifier -&gt; new Issue(identifier, null))
</pre>
</td>
<td>
<hr />
<pre>
 42         this.identifier = identifier;
 43         this.reason = reason;
 44     }
 45 
 46     String identifier() {
 47         return identifier;
 48     }
 49 
 50     String reason() {
 51         return reason;
 52     }
 53 }
 54 
 55 public class IssueCommand implements CommandHandler {
 56     private final String name;
 57 
 58     private void showHelp(PrintWriter reply) {
 59         reply.println(&quot;Command syntax:&quot;);
 60         reply.println(&quot; * `/&quot; + name + &quot; [add|remove] &lt;id&gt;[,&lt;id&gt;,...]`&quot;);
 61         reply.println(&quot; * `/&quot; + name + &quot; [add] &lt;id&gt;: &lt;description&gt;`&quot;);
<span class="line-modified"> 62         reply.println(&quot; * `/&quot; + name + &quot; create [PX] &lt;component&gt;/[subcomponent]&quot;);</span>
 63         reply.println();
 64         reply.println(&quot;Some examples:&quot;);
 65         reply.println();
 66         reply.println(&quot; * `/&quot; + name + &quot; add JDK-1234567,4567890`&quot;);
 67         reply.println(&quot; * `/&quot; + name + &quot; remove JDK-4567890`&quot;);
 68         reply.println(&quot; * `/&quot; + name + &quot; 1234567: Use this exact title`&quot;);
<span class="line-modified"> 69         reply.println(&quot; * `/&quot; + name + &quot; create hotspot/jfr&quot;);</span>
<span class="line-modified"> 70         reply.println(&quot; * `/&quot; + name + &quot; create P4 core-libs/java.nio&quot;);</span>
 71         reply.println();
 72         reply.print(&quot;If issues are specified only by their ID, the title will be automatically retrieved from JBS. &quot;);
 73         reply.print(&quot;The project prefix (`JDK-` in the above examples) is optional. &quot;);
 74         reply.println(&quot;Separate multiple issue IDs using either spaces or commas.&quot;);
 75     }
 76 
 77     private static final Pattern shortIssuePattern = Pattern.compile(&quot;((?:[A-Za-z]+-)?[0-9]+)(?:,| |$)&quot;);
 78     private final static Pattern subCommandPattern = Pattern.compile(&quot;^(add|remove|delete|create|(?:[A-Za-z]+-)?[0-9]+:?)[ ,]?.*$&quot;);
 79 
 80     private List&lt;Issue&gt; parseIssueList(String allowedPrefix, String issueList) throws InvalidIssue {
 81         List&lt;Issue&gt; ret;
 82         // Is this a single fully described issue?
 83         var singleIssue = Issue.fromString(issueList);
 84         if (singleIssue.isPresent()) {
 85             ret = List.of(singleIssue.get());
 86         } else {
 87             var shortIssueMatcher = shortIssuePattern.matcher(issueList);
 88             ret = shortIssueMatcher.results()
 89                                    .map(matchResult -&gt; matchResult.group(1))
 90                                    .map(identifier -&gt; new Issue(identifier, null))
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>