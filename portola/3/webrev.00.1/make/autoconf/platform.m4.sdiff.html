<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/platform.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/platform.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
193     *cygwin*)
194       VAR_OS=windows
195       VAR_OS_ENV=windows.cygwin
196       ;;
197     *wsl*)
198       VAR_OS=windows
199       VAR_OS_ENV=windows.wsl
200       ;;
201     *mingw*)
202       VAR_OS=windows
203       VAR_OS_ENV=windows.msys
204       ;;
205     *aix*)
206       VAR_OS=aix
207       VAR_OS_TYPE=unix
208       ;;
209     *)
210       AC_MSG_ERROR([unsupported operating system $1])
211       ;;
212   esac












213 ])
214 
215 # Expects $host_os $host_cpu $build_os and $build_cpu
216 # and $with_target_bits to have been setup!
217 #
218 # Translate the standard triplet(quadruplet) definition
219 # of the target/build system into OPENJDK_TARGET_OS, OPENJDK_TARGET_CPU,
220 # OPENJDK_BUILD_OS, etc.
221 AC_DEFUN([PLATFORM_EXTRACT_TARGET_AND_BUILD],
222 [
223   # Copy the autoconf trip/quadruplet verbatim to OPENJDK_TARGET_AUTOCONF_NAME
224   # (from the autoconf &quot;host&quot;) and OPENJDK_BUILD_AUTOCONF_NAME
225   # Note that we might later on rewrite e.g. OPENJDK_TARGET_CPU due to reduced build,
226   # but this will not change the value of OPENJDK_TARGET_AUTOCONF_NAME.
227   OPENJDK_TARGET_AUTOCONF_NAME=&quot;$host&quot;
228   OPENJDK_BUILD_AUTOCONF_NAME=&quot;$build&quot;
229   AC_SUBST(OPENJDK_TARGET_AUTOCONF_NAME)
230   AC_SUBST(OPENJDK_BUILD_AUTOCONF_NAME)
231 
232   # Convert the autoconf OS/CPU value to our own data, into the VAR_OS/CPU variables.
233   PLATFORM_EXTRACT_VARS_FROM_OS($build_os)
234   PLATFORM_EXTRACT_VARS_FROM_CPU($build_cpu)
235   # ..and setup our own variables. (Do this explicitly to facilitate searching)
236   OPENJDK_BUILD_OS=&quot;$VAR_OS&quot;
237   if test &quot;x$VAR_OS_TYPE&quot; != x; then
238     OPENJDK_BUILD_OS_TYPE=&quot;$VAR_OS_TYPE&quot;
239   else
240     OPENJDK_BUILD_OS_TYPE=&quot;$VAR_OS&quot;
241   fi
242   if test &quot;x$VAR_OS_ENV&quot; != x; then
243     OPENJDK_BUILD_OS_ENV=&quot;$VAR_OS_ENV&quot;
244   else
245     OPENJDK_BUILD_OS_ENV=&quot;$VAR_OS&quot;
246   fi
247   OPENJDK_BUILD_CPU=&quot;$VAR_CPU&quot;
248   OPENJDK_BUILD_CPU_ARCH=&quot;$VAR_CPU_ARCH&quot;
249   OPENJDK_BUILD_CPU_BITS=&quot;$VAR_CPU_BITS&quot;
250   OPENJDK_BUILD_CPU_ENDIAN=&quot;$VAR_CPU_ENDIAN&quot;

251   AC_SUBST(OPENJDK_BUILD_OS)
252   AC_SUBST(OPENJDK_BUILD_OS_TYPE)
253   AC_SUBST(OPENJDK_BUILD_OS_ENV)
254   AC_SUBST(OPENJDK_BUILD_CPU)
255   AC_SUBST(OPENJDK_BUILD_CPU_ARCH)
256   AC_SUBST(OPENJDK_BUILD_CPU_BITS)
257   AC_SUBST(OPENJDK_BUILD_CPU_ENDIAN)

258 
259   AC_MSG_CHECKING([openjdk-build os-cpu])
260   AC_MSG_RESULT([$OPENJDK_BUILD_OS-$OPENJDK_BUILD_CPU])
261 





262   # Convert the autoconf OS/CPU value to our own data, into the VAR_OS/CPU variables.
263   PLATFORM_EXTRACT_VARS_FROM_OS($host_os)
264   PLATFORM_EXTRACT_VARS_FROM_CPU($host_cpu)
265   # ... and setup our own variables. (Do this explicitly to facilitate searching)
266   OPENJDK_TARGET_OS=&quot;$VAR_OS&quot;
267   if test &quot;x$VAR_OS_TYPE&quot; != x; then
268     OPENJDK_TARGET_OS_TYPE=&quot;$VAR_OS_TYPE&quot;
269   else
270     OPENJDK_TARGET_OS_TYPE=&quot;$VAR_OS&quot;
271   fi
272   if test &quot;x$VAR_OS_ENV&quot; != x; then
273     OPENJDK_TARGET_OS_ENV=&quot;$VAR_OS_ENV&quot;
274   else
275     OPENJDK_TARGET_OS_ENV=&quot;$VAR_OS&quot;
276   fi
277   OPENJDK_TARGET_CPU=&quot;$VAR_CPU&quot;
278   OPENJDK_TARGET_CPU_ARCH=&quot;$VAR_CPU_ARCH&quot;
279   OPENJDK_TARGET_CPU_BITS=&quot;$VAR_CPU_BITS&quot;
280   OPENJDK_TARGET_CPU_ENDIAN=&quot;$VAR_CPU_ENDIAN&quot;
281   OPENJDK_TARGET_OS_UPPERCASE=`$ECHO $OPENJDK_TARGET_OS | $TR &#39;abcdefghijklmnopqrstuvwxyz&#39; &#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;`

282 
283   AC_SUBST(OPENJDK_TARGET_OS)
284   AC_SUBST(OPENJDK_TARGET_OS_TYPE)
285   AC_SUBST(OPENJDK_TARGET_OS_ENV)
286   AC_SUBST(OPENJDK_TARGET_OS_UPPERCASE)
287   AC_SUBST(OPENJDK_TARGET_CPU)
288   AC_SUBST(OPENJDK_TARGET_CPU_ARCH)
289   AC_SUBST(OPENJDK_TARGET_CPU_BITS)
290   AC_SUBST(OPENJDK_TARGET_CPU_ENDIAN)

291 
292   AC_MSG_CHECKING([openjdk-target os-cpu])
293   AC_MSG_RESULT([$OPENJDK_TARGET_OS-$OPENJDK_TARGET_CPU])





294 ])
295 
296 # Check if a reduced build (32-bit on 64-bit platforms) is requested, and modify behaviour
297 # accordingly. Must be done after setting up build and target system, but before
298 # doing anything else with these values.
299 AC_DEFUN([PLATFORM_SETUP_TARGET_CPU_BITS],
300 [
301   AC_ARG_WITH(target-bits, [AS_HELP_STRING([--with-target-bits],
302        [build 32-bit or 64-bit binaries (for platforms that support it), e.g. --with-target-bits=32 @&lt;:@guessed@:&gt;@])])
303 
304   # We have three types of compiles:
305   # native  == normal compilation, target system == build system
306   # cross   == traditional cross compilation, target system != build system; special toolchain needed
307   # reduced == using native compilers, but with special flags (e.g. -m32) to produce 32-bit builds on 64-bit machines
308   #
309   if test &quot;x$OPENJDK_BUILD_AUTOCONF_NAME&quot; != &quot;x$OPENJDK_TARGET_AUTOCONF_NAME&quot;; then
310     # We&#39;re doing a proper cross-compilation
311     COMPILE_TYPE=&quot;cross&quot;
312   else
313     COMPILE_TYPE=&quot;native&quot;
</pre>
<hr />
<pre>
408   OPENJDK_$1_CPU_JLI=&quot;$OPENJDK_$1_CPU&quot;
409   if test &quot;x$OPENJDK_$1_CPU&quot; = xx86; then
410     OPENJDK_$1_CPU_JLI=&quot;i386&quot;
411   elif test &quot;x$OPENJDK_$1_OS&quot; != xmacosx &amp;&amp; test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then
412     # On all platforms except macosx, we replace x86_64 with amd64.
413     OPENJDK_$1_CPU_JLI=&quot;amd64&quot;
414   fi
415 
416   # The new version string in JDK 9 also defined new naming of OS and ARCH for bundles
417   # Macosx is osx and x86_64 is x64
418   if test &quot;x$OPENJDK_$1_OS&quot; = xmacosx; then
419     OPENJDK_$1_OS_BUNDLE=&quot;osx&quot;
420   else
421     OPENJDK_$1_OS_BUNDLE=&quot;$OPENJDK_TARGET_OS&quot;
422   fi
423   if test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then
424     OPENJDK_$1_CPU_BUNDLE=&quot;x64&quot;
425   else
426     OPENJDK_$1_CPU_BUNDLE=&quot;$OPENJDK_$1_CPU&quot;
427   fi
<span class="line-modified">428   OPENJDK_$1_BUNDLE_PLATFORM=&quot;${OPENJDK_$1_OS_BUNDLE}-${OPENJDK_$1_CPU_BUNDLE}&quot;</span>






429   AC_SUBST(OPENJDK_$1_BUNDLE_PLATFORM)
430 
431   if test &quot;x$COMPILE_TYPE&quot; = &quot;xcross&quot;; then
432     # FIXME: ... or should this include reduced builds..?
433     DEFINE_CROSS_COMPILE_ARCH=&quot;CROSS_COMPILE_ARCH:=$OPENJDK_$1_CPU_LEGACY&quot;
434   else
435     DEFINE_CROSS_COMPILE_ARCH=&quot;&quot;
436   fi
437   AC_SUBST(DEFINE_CROSS_COMPILE_ARCH)
438 
439   # Convert openjdk platform names to hotspot names
440 
441   HOTSPOT_$1_OS=${OPENJDK_$1_OS}
442   if test &quot;x$OPENJDK_$1_OS&quot; = xmacosx; then
443     HOTSPOT_$1_OS=bsd
444   fi
445   AC_SUBST(HOTSPOT_$1_OS)
446 
447   HOTSPOT_$1_OS_TYPE=${OPENJDK_$1_OS_TYPE}
448   if test &quot;x$OPENJDK_$1_OS_TYPE&quot; = xunix; then
</pre>
<hr />
<pre>
481     HOTSPOT_$1_CPU_DEFINE=PPC64
482   elif test &quot;x$OPENJDK_$1_CPU&quot; = xppc64le; then
483     HOTSPOT_$1_CPU_DEFINE=PPC64
484 
485   # The cpu defines below are for zero, we don&#39;t support them directly.
486   elif test &quot;x$OPENJDK_$1_CPU&quot; = xsparc; then
487     HOTSPOT_$1_CPU_DEFINE=SPARC
488   elif test &quot;x$OPENJDK_$1_CPU&quot; = xppc; then
489     HOTSPOT_$1_CPU_DEFINE=PPC32
490   elif test &quot;x$OPENJDK_$1_CPU&quot; = xs390; then
491     HOTSPOT_$1_CPU_DEFINE=S390
492   elif test &quot;x$OPENJDK_$1_CPU&quot; = xs390x; then
493     HOTSPOT_$1_CPU_DEFINE=S390
494   elif test &quot;x$OPENJDK_$1_CPU&quot; = xriscv64; then
495     HOTSPOT_$1_CPU_DEFINE=RISCV
496   elif test &quot;x$OPENJDK_$1_CPU&quot; != x; then
497     HOTSPOT_$1_CPU_DEFINE=$(echo $OPENJDK_$1_CPU | tr a-z A-Z)
498   fi
499   AC_SUBST(HOTSPOT_$1_CPU_DEFINE)
500 







501   # For historical reasons, the OS include directories have odd names.
502   OPENJDK_$1_OS_INCLUDE_SUBDIR=&quot;$OPENJDK_TARGET_OS&quot;
503   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xwindows&quot;; then
504     OPENJDK_$1_OS_INCLUDE_SUBDIR=&quot;win32&quot;
505   elif test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xmacosx&quot;; then
506     OPENJDK_$1_OS_INCLUDE_SUBDIR=&quot;darwin&quot;
507   fi
508   AC_SUBST(OPENJDK_$1_OS_INCLUDE_SUBDIR)
509 ])
510 
511 AC_DEFUN([PLATFORM_SET_RELEASE_FILE_OS_VALUES],
512 [
513   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xsolaris&quot;; then
514     RELEASE_FILE_OS_NAME=SunOS
515   fi
516   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot;; then
517     RELEASE_FILE_OS_NAME=Linux
518   fi
519   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xwindows&quot;; then
520     RELEASE_FILE_OS_NAME=Windows
</pre>
</td>
<td>
<hr />
<pre>
193     *cygwin*)
194       VAR_OS=windows
195       VAR_OS_ENV=windows.cygwin
196       ;;
197     *wsl*)
198       VAR_OS=windows
199       VAR_OS_ENV=windows.wsl
200       ;;
201     *mingw*)
202       VAR_OS=windows
203       VAR_OS_ENV=windows.msys
204       ;;
205     *aix*)
206       VAR_OS=aix
207       VAR_OS_TYPE=unix
208       ;;
209     *)
210       AC_MSG_ERROR([unsupported operating system $1])
211       ;;
212   esac
<span class="line-added">213 </span>
<span class="line-added">214   case &quot;$1&quot; in</span>
<span class="line-added">215     *linux*-musl)</span>
<span class="line-added">216       VAR_LIBC=musl</span>
<span class="line-added">217       ;;</span>
<span class="line-added">218     *linux*-gnu)</span>
<span class="line-added">219       VAR_LIBC=gnu</span>
<span class="line-added">220       ;;</span>
<span class="line-added">221     *)</span>
<span class="line-added">222       VAR_LIBC=default</span>
<span class="line-added">223       ;;</span>
<span class="line-added">224   esac</span>
225 ])
226 
227 # Expects $host_os $host_cpu $build_os and $build_cpu
228 # and $with_target_bits to have been setup!
229 #
230 # Translate the standard triplet(quadruplet) definition
231 # of the target/build system into OPENJDK_TARGET_OS, OPENJDK_TARGET_CPU,
232 # OPENJDK_BUILD_OS, etc.
233 AC_DEFUN([PLATFORM_EXTRACT_TARGET_AND_BUILD],
234 [
235   # Copy the autoconf trip/quadruplet verbatim to OPENJDK_TARGET_AUTOCONF_NAME
236   # (from the autoconf &quot;host&quot;) and OPENJDK_BUILD_AUTOCONF_NAME
237   # Note that we might later on rewrite e.g. OPENJDK_TARGET_CPU due to reduced build,
238   # but this will not change the value of OPENJDK_TARGET_AUTOCONF_NAME.
239   OPENJDK_TARGET_AUTOCONF_NAME=&quot;$host&quot;
240   OPENJDK_BUILD_AUTOCONF_NAME=&quot;$build&quot;
241   AC_SUBST(OPENJDK_TARGET_AUTOCONF_NAME)
242   AC_SUBST(OPENJDK_BUILD_AUTOCONF_NAME)
243 
244   # Convert the autoconf OS/CPU value to our own data, into the VAR_OS/CPU variables.
245   PLATFORM_EXTRACT_VARS_FROM_OS($build_os)
246   PLATFORM_EXTRACT_VARS_FROM_CPU($build_cpu)
247   # ..and setup our own variables. (Do this explicitly to facilitate searching)
248   OPENJDK_BUILD_OS=&quot;$VAR_OS&quot;
249   if test &quot;x$VAR_OS_TYPE&quot; != x; then
250     OPENJDK_BUILD_OS_TYPE=&quot;$VAR_OS_TYPE&quot;
251   else
252     OPENJDK_BUILD_OS_TYPE=&quot;$VAR_OS&quot;
253   fi
254   if test &quot;x$VAR_OS_ENV&quot; != x; then
255     OPENJDK_BUILD_OS_ENV=&quot;$VAR_OS_ENV&quot;
256   else
257     OPENJDK_BUILD_OS_ENV=&quot;$VAR_OS&quot;
258   fi
259   OPENJDK_BUILD_CPU=&quot;$VAR_CPU&quot;
260   OPENJDK_BUILD_CPU_ARCH=&quot;$VAR_CPU_ARCH&quot;
261   OPENJDK_BUILD_CPU_BITS=&quot;$VAR_CPU_BITS&quot;
262   OPENJDK_BUILD_CPU_ENDIAN=&quot;$VAR_CPU_ENDIAN&quot;
<span class="line-added">263   OPENJDK_BUILD_LIBC=&quot;$VAR_LIBC&quot;</span>
264   AC_SUBST(OPENJDK_BUILD_OS)
265   AC_SUBST(OPENJDK_BUILD_OS_TYPE)
266   AC_SUBST(OPENJDK_BUILD_OS_ENV)
267   AC_SUBST(OPENJDK_BUILD_CPU)
268   AC_SUBST(OPENJDK_BUILD_CPU_ARCH)
269   AC_SUBST(OPENJDK_BUILD_CPU_BITS)
270   AC_SUBST(OPENJDK_BUILD_CPU_ENDIAN)
<span class="line-added">271   AC_SUBST(OPENJDK_BUILD_LIBC)</span>
272 
273   AC_MSG_CHECKING([openjdk-build os-cpu])
274   AC_MSG_RESULT([$OPENJDK_BUILD_OS-$OPENJDK_BUILD_CPU])
275 
<span class="line-added">276   if test &quot;x$OPENJDK_BUILD_OS&quot; = &quot;xlinux&quot;; then</span>
<span class="line-added">277     AC_MSG_CHECKING([openjdk-build C library])</span>
<span class="line-added">278     AC_MSG_RESULT([$OPENJDK_BUILD_LIBC])</span>
<span class="line-added">279   fi</span>
<span class="line-added">280 </span>
281   # Convert the autoconf OS/CPU value to our own data, into the VAR_OS/CPU variables.
282   PLATFORM_EXTRACT_VARS_FROM_OS($host_os)
283   PLATFORM_EXTRACT_VARS_FROM_CPU($host_cpu)
284   # ... and setup our own variables. (Do this explicitly to facilitate searching)
285   OPENJDK_TARGET_OS=&quot;$VAR_OS&quot;
286   if test &quot;x$VAR_OS_TYPE&quot; != x; then
287     OPENJDK_TARGET_OS_TYPE=&quot;$VAR_OS_TYPE&quot;
288   else
289     OPENJDK_TARGET_OS_TYPE=&quot;$VAR_OS&quot;
290   fi
291   if test &quot;x$VAR_OS_ENV&quot; != x; then
292     OPENJDK_TARGET_OS_ENV=&quot;$VAR_OS_ENV&quot;
293   else
294     OPENJDK_TARGET_OS_ENV=&quot;$VAR_OS&quot;
295   fi
296   OPENJDK_TARGET_CPU=&quot;$VAR_CPU&quot;
297   OPENJDK_TARGET_CPU_ARCH=&quot;$VAR_CPU_ARCH&quot;
298   OPENJDK_TARGET_CPU_BITS=&quot;$VAR_CPU_BITS&quot;
299   OPENJDK_TARGET_CPU_ENDIAN=&quot;$VAR_CPU_ENDIAN&quot;
300   OPENJDK_TARGET_OS_UPPERCASE=`$ECHO $OPENJDK_TARGET_OS | $TR &#39;abcdefghijklmnopqrstuvwxyz&#39; &#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;`
<span class="line-added">301   OPENJDK_TARGET_LIBC=&quot;$VAR_LIBC&quot;</span>
302 
303   AC_SUBST(OPENJDK_TARGET_OS)
304   AC_SUBST(OPENJDK_TARGET_OS_TYPE)
305   AC_SUBST(OPENJDK_TARGET_OS_ENV)
306   AC_SUBST(OPENJDK_TARGET_OS_UPPERCASE)
307   AC_SUBST(OPENJDK_TARGET_CPU)
308   AC_SUBST(OPENJDK_TARGET_CPU_ARCH)
309   AC_SUBST(OPENJDK_TARGET_CPU_BITS)
310   AC_SUBST(OPENJDK_TARGET_CPU_ENDIAN)
<span class="line-added">311   AC_SUBST(OPENJDK_TARGET_LIBC)</span>
312 
313   AC_MSG_CHECKING([openjdk-target os-cpu])
314   AC_MSG_RESULT([$OPENJDK_TARGET_OS-$OPENJDK_TARGET_CPU])
<span class="line-added">315 </span>
<span class="line-added">316   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot;; then</span>
<span class="line-added">317     AC_MSG_CHECKING([openjdk-target C library])</span>
<span class="line-added">318     AC_MSG_RESULT([$OPENJDK_TARGET_LIBC])</span>
<span class="line-added">319   fi</span>
320 ])
321 
322 # Check if a reduced build (32-bit on 64-bit platforms) is requested, and modify behaviour
323 # accordingly. Must be done after setting up build and target system, but before
324 # doing anything else with these values.
325 AC_DEFUN([PLATFORM_SETUP_TARGET_CPU_BITS],
326 [
327   AC_ARG_WITH(target-bits, [AS_HELP_STRING([--with-target-bits],
328        [build 32-bit or 64-bit binaries (for platforms that support it), e.g. --with-target-bits=32 @&lt;:@guessed@:&gt;@])])
329 
330   # We have three types of compiles:
331   # native  == normal compilation, target system == build system
332   # cross   == traditional cross compilation, target system != build system; special toolchain needed
333   # reduced == using native compilers, but with special flags (e.g. -m32) to produce 32-bit builds on 64-bit machines
334   #
335   if test &quot;x$OPENJDK_BUILD_AUTOCONF_NAME&quot; != &quot;x$OPENJDK_TARGET_AUTOCONF_NAME&quot;; then
336     # We&#39;re doing a proper cross-compilation
337     COMPILE_TYPE=&quot;cross&quot;
338   else
339     COMPILE_TYPE=&quot;native&quot;
</pre>
<hr />
<pre>
434   OPENJDK_$1_CPU_JLI=&quot;$OPENJDK_$1_CPU&quot;
435   if test &quot;x$OPENJDK_$1_CPU&quot; = xx86; then
436     OPENJDK_$1_CPU_JLI=&quot;i386&quot;
437   elif test &quot;x$OPENJDK_$1_OS&quot; != xmacosx &amp;&amp; test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then
438     # On all platforms except macosx, we replace x86_64 with amd64.
439     OPENJDK_$1_CPU_JLI=&quot;amd64&quot;
440   fi
441 
442   # The new version string in JDK 9 also defined new naming of OS and ARCH for bundles
443   # Macosx is osx and x86_64 is x64
444   if test &quot;x$OPENJDK_$1_OS&quot; = xmacosx; then
445     OPENJDK_$1_OS_BUNDLE=&quot;osx&quot;
446   else
447     OPENJDK_$1_OS_BUNDLE=&quot;$OPENJDK_TARGET_OS&quot;
448   fi
449   if test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then
450     OPENJDK_$1_CPU_BUNDLE=&quot;x64&quot;
451   else
452     OPENJDK_$1_CPU_BUNDLE=&quot;$OPENJDK_$1_CPU&quot;
453   fi
<span class="line-modified">454 </span>
<span class="line-added">455   OPENJDK_$1_LIBC_BUNDLE=&quot;&quot;</span>
<span class="line-added">456   if test &quot;x$OPENJDK_$1_LIBC&quot; = &quot;xmusl&quot;; then  </span>
<span class="line-added">457     OPENJDK_$1_LIBC_BUNDLE=&quot;-$OPENJDK_$1_LIBC&quot;</span>
<span class="line-added">458   fi</span>
<span class="line-added">459 </span>
<span class="line-added">460   OPENJDK_$1_BUNDLE_PLATFORM=&quot;${OPENJDK_$1_OS_BUNDLE}-${OPENJDK_$1_CPU_BUNDLE}${OPENJDK_$1_LIBC_BUNDLE}&quot;</span>
461   AC_SUBST(OPENJDK_$1_BUNDLE_PLATFORM)
462 
463   if test &quot;x$COMPILE_TYPE&quot; = &quot;xcross&quot;; then
464     # FIXME: ... or should this include reduced builds..?
465     DEFINE_CROSS_COMPILE_ARCH=&quot;CROSS_COMPILE_ARCH:=$OPENJDK_$1_CPU_LEGACY&quot;
466   else
467     DEFINE_CROSS_COMPILE_ARCH=&quot;&quot;
468   fi
469   AC_SUBST(DEFINE_CROSS_COMPILE_ARCH)
470 
471   # Convert openjdk platform names to hotspot names
472 
473   HOTSPOT_$1_OS=${OPENJDK_$1_OS}
474   if test &quot;x$OPENJDK_$1_OS&quot; = xmacosx; then
475     HOTSPOT_$1_OS=bsd
476   fi
477   AC_SUBST(HOTSPOT_$1_OS)
478 
479   HOTSPOT_$1_OS_TYPE=${OPENJDK_$1_OS_TYPE}
480   if test &quot;x$OPENJDK_$1_OS_TYPE&quot; = xunix; then
</pre>
<hr />
<pre>
513     HOTSPOT_$1_CPU_DEFINE=PPC64
514   elif test &quot;x$OPENJDK_$1_CPU&quot; = xppc64le; then
515     HOTSPOT_$1_CPU_DEFINE=PPC64
516 
517   # The cpu defines below are for zero, we don&#39;t support them directly.
518   elif test &quot;x$OPENJDK_$1_CPU&quot; = xsparc; then
519     HOTSPOT_$1_CPU_DEFINE=SPARC
520   elif test &quot;x$OPENJDK_$1_CPU&quot; = xppc; then
521     HOTSPOT_$1_CPU_DEFINE=PPC32
522   elif test &quot;x$OPENJDK_$1_CPU&quot; = xs390; then
523     HOTSPOT_$1_CPU_DEFINE=S390
524   elif test &quot;x$OPENJDK_$1_CPU&quot; = xs390x; then
525     HOTSPOT_$1_CPU_DEFINE=S390
526   elif test &quot;x$OPENJDK_$1_CPU&quot; = xriscv64; then
527     HOTSPOT_$1_CPU_DEFINE=RISCV
528   elif test &quot;x$OPENJDK_$1_CPU&quot; != x; then
529     HOTSPOT_$1_CPU_DEFINE=$(echo $OPENJDK_$1_CPU | tr a-z A-Z)
530   fi
531   AC_SUBST(HOTSPOT_$1_CPU_DEFINE)
532 
<span class="line-added">533   if test &quot;x$OPENJDK_$1_LIBC&quot; = &quot;xmusl&quot;; then</span>
<span class="line-added">534     HOTSPOT_$1_LIBC=$OPENJDK_$1_LIBC</span>
<span class="line-added">535   else</span>
<span class="line-added">536     HOTSPOT_$1_LIBC=&quot;&quot;</span>
<span class="line-added">537   fi</span>
<span class="line-added">538   AC_SUBST(HOTSPOT_$1_LIBC)</span>
<span class="line-added">539 </span>
540   # For historical reasons, the OS include directories have odd names.
541   OPENJDK_$1_OS_INCLUDE_SUBDIR=&quot;$OPENJDK_TARGET_OS&quot;
542   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xwindows&quot;; then
543     OPENJDK_$1_OS_INCLUDE_SUBDIR=&quot;win32&quot;
544   elif test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xmacosx&quot;; then
545     OPENJDK_$1_OS_INCLUDE_SUBDIR=&quot;darwin&quot;
546   fi
547   AC_SUBST(OPENJDK_$1_OS_INCLUDE_SUBDIR)
548 ])
549 
550 AC_DEFUN([PLATFORM_SET_RELEASE_FILE_OS_VALUES],
551 [
552   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xsolaris&quot;; then
553     RELEASE_FILE_OS_NAME=SunOS
554   fi
555   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot;; then
556     RELEASE_FILE_OS_NAME=Linux
557   fi
558   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xwindows&quot;; then
559     RELEASE_FILE_OS_NAME=Windows
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>