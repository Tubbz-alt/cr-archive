<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/conf/jib-profiles.js</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../autoconf/spec.gmk.in.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../hotspot/lib/CompileJvm.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/conf/jib-profiles.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  41  * file, minus the extension and the &#39;-&#39;, camel cased and prefixed with
  42  * &#39;get&#39;.
  43  *
  44  *
  45  * The parameter &#39;input&#39; is an object that optionally contains  some data.
  46  * Optionally because a tool may read the configuration for different purposes.
  47  * To initially get a list of available profiles, the active profile may not
  48  * yet be known for instance.
  49  *
  50  * Data that may be set on the input object:
  51  *
  52  * input.profile = &lt;name of active profile&gt;
  53  *
  54  * If the active profile is set, the following data from it must also
  55  * be provided:
  56  *
  57  * input.profile
  58  * input.build_id
  59  * input.target_os
  60  * input.target_cpu

  61  * input.build_os
  62  * input.build_cpu

  63  * input.target_platform
  64  * input.build_platform
  65  * // The build_osenv_* variables describe the unix layer on Windows systems,
  66  * // i.e. Cygwin, which may also be 32 or 64 bit.
  67  * input.build_osenv
  68  * input.build_osenv_cpu
  69  * input.build_osenv_platform
  70  *
  71  * For more complex nested attributes, there is a method &quot;get&quot;:
  72  *
  73  * input.get(&quot;&lt;dependency&gt;&quot;, &quot;&lt;attribute&gt;&quot;)
  74  *
  75  * Valid attributes are:
  76  * install_path
  77  * download_path
  78  * download_dir
  79  * home_path
  80  *
  81  *
  82  * The output data generated by this configuration file has the following
  83  * format:
  84  *
  85  * data: {
  86  *   // Identifies the version of this format to the tool reading it
  87  *   format_version: &quot;1.0&quot;,
  88  *
  89  *   // Name of base outputdir. JIB assumes the actual output dir is formed
  90  *   // by adding the configuration name: &lt;output_basedir&gt;/&lt;config-name&gt;
  91  *   output_basedir: &quot;build&quot;,
  92  *   // Configure argument to use to specify configuration name
  93  *   configuration_configure_arg:
  94  *   // Make argument to use to specify configuration name
  95  *   configuration_make_arg:
  96  *
  97  *   profiles: {
  98  *     &lt;profile-name&gt;: {
  99  *       // Name of os the profile is built to run on
 100  *       target_os; &lt;string&gt;
 101  *       // Name of cpu the profile is built to run on
 102  *       target_cpu; &lt;string&gt;
<span class="line-modified"> 103  *       // Combination of target_os and target_cpu for convenience</span>


 104  *       target_platform; &lt;string&gt;
 105  *       // Name of os the profile is built on
 106  *       build_os; &lt;string&gt;
 107  *       // Name of cpu the profile is built on
 108  *       build_cpu; &lt;string&gt;
<span class="line-modified"> 109  *       // Combination of build_os and build_cpu for convenience</span>


 110  *       build_platform; &lt;string&gt;
 111  *
 112  *       // List of dependencies needed to build this profile
 113  *       dependencies: &lt;Array of strings&gt;
 114  *
 115  *       // List of configure args to use for this profile
 116  *       configure_args: &lt;Array of strings&gt;
 117  *
 118  *       // List of free form labels describing aspects of this profile
 119  *       labels: &lt;Array of strings&gt;
 120  *     }
 121  *   }
 122  *
 123  *   // Dependencies use a Maven like deployment structure
 124  *   dependencies: {
 125  *     &lt;dependency-name&gt;: {
 126  *       // Organization part of path defining this dependency
 127  *       organization: &lt;string&gt;
 128  *       // File extension for this dependency
 129  *       ext: &lt;string&gt;
</pre>
<hr />
<pre>
 175 
 176 /**
 177  * Main entry to generate the profile configuration
 178  *
 179  * @param input External data to use for generating the configuration
 180  * @returns {{}} Profile configuration
 181  */
 182 var getJibProfiles = function (input) {
 183 
 184     var data = {};
 185 
 186     // Identifies the version of this format to the tool reading it.
 187     // 1.1 signifies that the publish, publish-src and get-src features are usable.
 188     // 1.2 signifies that artifact uploads should fail on missing artifacts by default.
 189     // 1.3 input.get(&lt;dep&gt;, &quot;home_path&quot;) automatically goes down into a single top
 190     //     dir just like default configure_args and environment_path variables.
 191     data.format_version = &quot;1.3&quot;;
 192 
 193     // Organization, product and version are used when uploading/publishing build results
 194     data.organization = &quot;&quot;;
<span class="line-modified"> 195     data.product = &quot;jdk&quot;;</span>
 196     data.version = getVersion();
 197 
 198     // The base directory for the build output. JIB will assume that the
 199     // actual build directory will be &lt;output_basedir&gt;/&lt;configuration&gt;
 200     data.output_basedir = &quot;build&quot;;
 201     // The configure argument to use to specify the name of the configuration
 202     data.configuration_configure_arg = &quot;--with-conf-name=&quot;;
 203     // The make argument to use to specify the name of the configuration
 204     data.configuration_make_arg = &quot;CONF_NAME=&quot;;
 205 
 206     // Exclude list to use when Jib creates a source bundle
 207     data.src_bundle_excludes = [
 208         &quot;build&quot;, &quot;{,**/}webrev*&quot;, &quot;{,**/}.hg&quot;, &quot;{,**/}JTwork&quot;, &quot;{,**/}JTreport&quot;,
 209         &quot;{,**/}.git&quot;
 210     ];
 211     // Include list to use when creating a minimal jib source bundle which
 212     // contains just the jib configuration files.
 213     data.conf_bundle_includes = [
 214         &quot;make/autoconf/version-numbers&quot;,
 215     ];
</pre>
<hr />
<pre>
 222     data.dependencies = getJibProfilesDependencies(input, common, data);
 223 
 224     return data;
 225 };
 226 
 227 /**
 228  * Generates some common values
 229  *
 230  * @param input External data to use for generating the configuration
 231  * @returns Common values
 232  */
 233 var getJibProfilesCommon = function (input, data) {
 234     var common = {};
 235 
 236     common.organization = &quot;jpg.infra.builddeps&quot;;
 237     common.build_id = getBuildId(input);
 238     common.build_number = input.build_number != null ? input.build_number : &quot;0&quot;;
 239 
 240     // List of the main profile names used for iteration
 241     common.main_profile_names = [
<span class="line-modified"> 242         &quot;linux-x64&quot;, &quot;linux-x86&quot;, &quot;macosx-x64&quot;, &quot;solaris-x64&quot;,</span>
 243         &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;, &quot;windows-x86&quot;,
 244         &quot;linux-aarch64&quot;, &quot;linux-arm32&quot;, &quot;linux-ppc64le&quot;, &quot;linux-s390x&quot;
 245     ];
 246 
 247     // These are the base setttings for all the main build profiles.
 248     common.main_profile_base = {
 249         dependencies: [&quot;boot_jdk&quot;, &quot;gnumake&quot;, &quot;jtreg&quot;, &quot;jib&quot;, &quot;autoconf&quot;, &quot;jmh&quot;, &quot;jcov&quot;],
 250         default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;, &quot;static-libs-bundles&quot;],
 251         configure_args: concat(&quot;--enable-jtreg-failure-handler&quot;,
 252             &quot;--with-exclude-translations=de,es,fr,it,ko,pt_BR,sv,ca,tr,cs,sk,ja_JP_A,ja_JP_HA,ja_JP_HI,ja_JP_I,zh_TW,zh_HK&quot;,
 253             &quot;--disable-manpages&quot;,
 254             &quot;--disable-jvm-feature-shenandoahgc&quot;,
 255             versionArgs(input, common))
 256     };
 257     // Extra settings for debug profiles
 258     common.debug_suffix = &quot;-debug&quot;;
 259     common.debug_profile_base = {
 260         configure_args: [&quot;--enable-debug&quot;],
 261         labels: &quot;debug&quot;
 262     };
</pre>
<hr />
<pre>
 395  *
 396  * @param input External data to use for generating the configuration
 397  * @param common The common values
 398  * @returns {{}} Profiles part of the configuration
 399  */
 400 var getJibProfilesProfiles = function (input, common, data) {
 401     // Main SE profiles
 402     var profiles = {
 403 
 404         &quot;linux-x64&quot;: {
 405             target_os: &quot;linux&quot;,
 406             target_cpu: &quot;x64&quot;,
 407             dependencies: [&quot;devkit&quot;, &quot;graphviz&quot;, &quot;pandoc&quot;, &quot;graalunit_lib&quot;],
 408             configure_args: concat(common.configure_args_64bit,
 409                 &quot;--enable-full-docs&quot;, &quot;--with-zlib=system&quot;,
 410                 (isWsl(input) ? [ &quot;--host=x86_64-unknown-linux-gnu&quot;,
 411                     &quot;--build=x86_64-unknown-linux-gnu&quot; ] : [])),
 412             default_make_targets: [&quot;docs-bundles&quot;],
 413         },
 414 








 415         &quot;linux-x86&quot;: {
 416             target_os: &quot;linux&quot;,
 417             target_cpu: &quot;x86&quot;,
 418             build_cpu: &quot;x64&quot;,
 419             dependencies: [&quot;devkit&quot;],
 420             configure_args: concat(common.configure_args_32bit,
 421                 &quot;--with-jvm-variants=minimal,server&quot;, &quot;--with-zlib=system&quot;),
 422         },
 423 
 424         &quot;macosx-x64&quot;: {
 425             target_os: &quot;macosx&quot;,
 426             target_cpu: &quot;x64&quot;,
 427             dependencies: [&quot;devkit&quot;, &quot;pandoc&quot;, &quot;graalunit_lib&quot;],
 428             configure_args: concat(common.configure_args_64bit, &quot;--with-zlib=system&quot;,
 429                 &quot;--with-macosx-version-max=10.9.0&quot;),
 430         },
 431 
 432         &quot;solaris-x64&quot;: {
 433             target_os: &quot;solaris&quot;,
 434             target_cpu: &quot;x64&quot;,
</pre>
<hr />
<pre>
 639             var jcovName = name + &quot;-jcov&quot;;
 640             profiles[jcovName] = clone(common.main_profile_base);
 641             profiles[jcovName].target_os = profiles[name].target_os
 642             profiles[jcovName].target_cpu = profiles[name].target_cpu
 643             profiles[jcovName].default_make_targets = [ &quot;jcov-bundles&quot; ];
 644             profiles[jcovName].dependencies = concat(profiles[jcovName].dependencies,
 645                 [ name + &quot;.jdk&quot;, &quot;devkit&quot; ]);
 646             profiles[jcovName].configure_args = concat(profiles[jcovName].configure_args,
 647                 [&quot;--with-jcov-input-jdk=&quot; + input.get(name + &quot;.jdk&quot;, &quot;home_path&quot;)]);
 648         });
 649 
 650     //
 651     // Define artifacts for profiles
 652     //
 653     // Macosx bundles are named osx
 654     // tar.gz.
 655     var artifactData = {
 656         &quot;linux-x64&quot;: {
 657             platform: &quot;linux-x64&quot;,
 658         },




 659         &quot;linux-x86&quot;: {
 660             platform: &quot;linux-x86&quot;,
 661         },
 662         &quot;macosx-x64&quot;: {
 663             platform: &quot;osx-x64&quot;,
 664             jdk_subdir: &quot;jdk-&quot; + data.version +  &quot;.jdk/Contents/Home&quot;,
 665         },
 666         &quot;solaris-x64&quot;: {
 667             platform: &quot;solaris-x64&quot;,
 668         },
 669         &quot;solaris-sparcv9&quot;: {
 670             platform: &quot;solaris-sparcv9&quot;,
 671         },
 672         &quot;windows-x64&quot;: {
 673             platform: &quot;windows-x64&quot;,
 674             jdk_suffix: &quot;zip&quot;,
 675         },
 676         &quot;windows-x86&quot;: {
 677             platform: &quot;windows-x86&quot;,
 678             jdk_suffix: &quot;zip&quot;,
</pre>
<hr />
<pre>
 987         solaris_x64: &quot;SS12u4-Solaris11u1+1.0&quot;,
 988         solaris_sparcv9: &quot;SS12u6-Solaris11u3+1.0&quot;,
 989         windows_x64: &quot;VS2019-16.5.3+1.0&quot;,
 990         linux_aarch64: &quot;gcc9.2.0-OL7.6+1.0&quot;,
 991         linux_arm: &quot;gcc8.2.0-Fedora27+1.0&quot;,
 992         linux_ppc64le: &quot;gcc8.2.0-Fedora27+1.0&quot;,
 993         linux_s390x: &quot;gcc8.2.0-Fedora27+1.0&quot;
 994     };
 995 
 996     var devkit_platform = (input.target_cpu == &quot;x86&quot;
 997         ? input.target_os + &quot;_x64&quot;
 998         : input.target_platform);
 999 
1000     var devkit_cross_prefix = &quot;&quot;;
1001     if (input.build_platform != input.target_platform
1002        &amp;&amp; input.build_platform != devkit_platform) {
1003         devkit_cross_prefix = input.build_platform + &quot;-to-&quot;;
1004     }
1005 
1006     var boot_jdk_platform = (input.build_os == &quot;macosx&quot; ? &quot;osx&quot; : input.build_os)
<span class="line-modified">1007         + &quot;-&quot; + input.build_cpu;</span>

1008     var boot_jdk_ext = (input.build_os == &quot;windows&quot; ? &quot;.zip&quot; : &quot;.tar.gz&quot;)
1009     // If running in WSL and building for Windows, it will look like Linux,
1010     // but we need a Windows boot JDK.
1011     if (isWsl(input) &amp;&amp; input.target_os == &quot;windows&quot;) {
1012         boot_jdk_platform = &quot;windows-&quot; + input.build_cpu;
1013         boot_jdk_ext = &quot;.zip&quot;;
1014     }
1015 
1016     var makeBinDir = (input.build_os == &quot;windows&quot;
1017         ? input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/cygwin/bin&quot;
1018         : input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/bin&quot;);
1019 
1020     if (input.build_cpu == &#39;aarch64&#39;) {
1021         boot_jdk = {
1022             organization: common.organization,
1023             ext: &quot;tar.gz&quot;,
1024             module: &quot;jdk-linux_aarch64&quot;,
1025             revision: &quot;14+1.0&quot;,
1026             configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,
1027             environment_path: common.boot_jdk_home + &quot;/bin&quot;
1028         }
1029     } else {
1030         boot_jdk = {
1031             server: &quot;jpg&quot;,
<span class="line-modified">1032             product: &quot;jdk&quot;,</span>
1033             version: common.boot_jdk_version,
1034             build_number: common.boot_jdk_build_number,
1035             file: &quot;bundles/&quot; + boot_jdk_platform + &quot;/jdk-&quot; + common.boot_jdk_version + &quot;_&quot;
1036                 + boot_jdk_platform + &quot;_bin&quot; + boot_jdk_ext,
1037             configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,
1038             environment_path: common.boot_jdk_home + &quot;/bin&quot;
1039         }
1040     }
1041     if (input.build_cpu == &#39;sparcv9&#39;) {
1042         boot_jdk.file = &quot;bundles/openjdk/GPL/&quot; + boot_jdk_platform
1043             + &quot;/openjdk-&quot; + common.boot_jdk_version + &quot;_&quot;
1044             + boot_jdk_platform + &quot;_bin&quot; + boot_jdk_ext;
1045     }
1046 
1047     var dependencies = {
1048         boot_jdk: boot_jdk,
1049 
1050         devkit: {
1051             organization: common.organization,
1052             ext: &quot;tar.gz&quot;,
</pre>
</td>
<td>
<hr />
<pre>
  41  * file, minus the extension and the &#39;-&#39;, camel cased and prefixed with
  42  * &#39;get&#39;.
  43  *
  44  *
  45  * The parameter &#39;input&#39; is an object that optionally contains  some data.
  46  * Optionally because a tool may read the configuration for different purposes.
  47  * To initially get a list of available profiles, the active profile may not
  48  * yet be known for instance.
  49  *
  50  * Data that may be set on the input object:
  51  *
  52  * input.profile = &lt;name of active profile&gt;
  53  *
  54  * If the active profile is set, the following data from it must also
  55  * be provided:
  56  *
  57  * input.profile
  58  * input.build_id
  59  * input.target_os
  60  * input.target_cpu
<span class="line-added">  61  * input.target_libc</span>
  62  * input.build_os
  63  * input.build_cpu
<span class="line-added">  64  * input.build_libc</span>
  65  * input.target_platform
  66  * input.build_platform
  67  * // The build_osenv_* variables describe the unix layer on Windows systems,
  68  * // i.e. Cygwin, which may also be 32 or 64 bit.
  69  * input.build_osenv
  70  * input.build_osenv_cpu
  71  * input.build_osenv_platform
  72  *
  73  * For more complex nested attributes, there is a method &quot;get&quot;:
  74  *
  75  * input.get(&quot;&lt;dependency&gt;&quot;, &quot;&lt;attribute&gt;&quot;)
  76  *
  77  * Valid attributes are:
  78  * install_path
  79  * download_path
  80  * download_dir
  81  * home_path
  82  *
  83  *
  84  * The output data generated by this configuration file has the following
  85  * format:
  86  *
  87  * data: {
  88  *   // Identifies the version of this format to the tool reading it
  89  *   format_version: &quot;1.0&quot;,
  90  *
  91  *   // Name of base outputdir. JIB assumes the actual output dir is formed
  92  *   // by adding the configuration name: &lt;output_basedir&gt;/&lt;config-name&gt;
  93  *   output_basedir: &quot;build&quot;,
  94  *   // Configure argument to use to specify configuration name
  95  *   configuration_configure_arg:
  96  *   // Make argument to use to specify configuration name
  97  *   configuration_make_arg:
  98  *
  99  *   profiles: {
 100  *     &lt;profile-name&gt;: {
 101  *       // Name of os the profile is built to run on
 102  *       target_os; &lt;string&gt;
 103  *       // Name of cpu the profile is built to run on
 104  *       target_cpu; &lt;string&gt;
<span class="line-modified"> 105  *       // Optional libc string if non standard</span>
<span class="line-added"> 106  *       target_libc; &lt;string&gt;</span>
<span class="line-added"> 107  *       // Optional combination of target_os and target_cpu for convenience</span>
 108  *       target_platform; &lt;string&gt;
 109  *       // Name of os the profile is built on
 110  *       build_os; &lt;string&gt;
 111  *       // Name of cpu the profile is built on
 112  *       build_cpu; &lt;string&gt;
<span class="line-modified"> 113  *       // Optional libc string if non standard</span>
<span class="line-added"> 114  *       build_libc; &lt;string&gt;</span>
<span class="line-added"> 115  *       // Optional combination of build_os and build_cpu for convenience</span>
 116  *       build_platform; &lt;string&gt;
 117  *
 118  *       // List of dependencies needed to build this profile
 119  *       dependencies: &lt;Array of strings&gt;
 120  *
 121  *       // List of configure args to use for this profile
 122  *       configure_args: &lt;Array of strings&gt;
 123  *
 124  *       // List of free form labels describing aspects of this profile
 125  *       labels: &lt;Array of strings&gt;
 126  *     }
 127  *   }
 128  *
 129  *   // Dependencies use a Maven like deployment structure
 130  *   dependencies: {
 131  *     &lt;dependency-name&gt;: {
 132  *       // Organization part of path defining this dependency
 133  *       organization: &lt;string&gt;
 134  *       // File extension for this dependency
 135  *       ext: &lt;string&gt;
</pre>
<hr />
<pre>
 181 
 182 /**
 183  * Main entry to generate the profile configuration
 184  *
 185  * @param input External data to use for generating the configuration
 186  * @returns {{}} Profile configuration
 187  */
 188 var getJibProfiles = function (input) {
 189 
 190     var data = {};
 191 
 192     // Identifies the version of this format to the tool reading it.
 193     // 1.1 signifies that the publish, publish-src and get-src features are usable.
 194     // 1.2 signifies that artifact uploads should fail on missing artifacts by default.
 195     // 1.3 input.get(&lt;dep&gt;, &quot;home_path&quot;) automatically goes down into a single top
 196     //     dir just like default configure_args and environment_path variables.
 197     data.format_version = &quot;1.3&quot;;
 198 
 199     // Organization, product and version are used when uploading/publishing build results
 200     data.organization = &quot;&quot;;
<span class="line-modified"> 201     data.product = &quot;jdk-portola&quot;;</span>
 202     data.version = getVersion();
 203 
 204     // The base directory for the build output. JIB will assume that the
 205     // actual build directory will be &lt;output_basedir&gt;/&lt;configuration&gt;
 206     data.output_basedir = &quot;build&quot;;
 207     // The configure argument to use to specify the name of the configuration
 208     data.configuration_configure_arg = &quot;--with-conf-name=&quot;;
 209     // The make argument to use to specify the name of the configuration
 210     data.configuration_make_arg = &quot;CONF_NAME=&quot;;
 211 
 212     // Exclude list to use when Jib creates a source bundle
 213     data.src_bundle_excludes = [
 214         &quot;build&quot;, &quot;{,**/}webrev*&quot;, &quot;{,**/}.hg&quot;, &quot;{,**/}JTwork&quot;, &quot;{,**/}JTreport&quot;,
 215         &quot;{,**/}.git&quot;
 216     ];
 217     // Include list to use when creating a minimal jib source bundle which
 218     // contains just the jib configuration files.
 219     data.conf_bundle_includes = [
 220         &quot;make/autoconf/version-numbers&quot;,
 221     ];
</pre>
<hr />
<pre>
 228     data.dependencies = getJibProfilesDependencies(input, common, data);
 229 
 230     return data;
 231 };
 232 
 233 /**
 234  * Generates some common values
 235  *
 236  * @param input External data to use for generating the configuration
 237  * @returns Common values
 238  */
 239 var getJibProfilesCommon = function (input, data) {
 240     var common = {};
 241 
 242     common.organization = &quot;jpg.infra.builddeps&quot;;
 243     common.build_id = getBuildId(input);
 244     common.build_number = input.build_number != null ? input.build_number : &quot;0&quot;;
 245 
 246     // List of the main profile names used for iteration
 247     common.main_profile_names = [
<span class="line-modified"> 248         &quot;linux-x64&quot;, &quot;linux-x64-musl&quot;, &quot;linux-x86&quot;, &quot;macosx-x64&quot;, &quot;solaris-x64&quot;,</span>
 249         &quot;solaris-sparcv9&quot;, &quot;windows-x64&quot;, &quot;windows-x86&quot;,
 250         &quot;linux-aarch64&quot;, &quot;linux-arm32&quot;, &quot;linux-ppc64le&quot;, &quot;linux-s390x&quot;
 251     ];
 252 
 253     // These are the base setttings for all the main build profiles.
 254     common.main_profile_base = {
 255         dependencies: [&quot;boot_jdk&quot;, &quot;gnumake&quot;, &quot;jtreg&quot;, &quot;jib&quot;, &quot;autoconf&quot;, &quot;jmh&quot;, &quot;jcov&quot;],
 256         default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;, &quot;static-libs-bundles&quot;],
 257         configure_args: concat(&quot;--enable-jtreg-failure-handler&quot;,
 258             &quot;--with-exclude-translations=de,es,fr,it,ko,pt_BR,sv,ca,tr,cs,sk,ja_JP_A,ja_JP_HA,ja_JP_HI,ja_JP_I,zh_TW,zh_HK&quot;,
 259             &quot;--disable-manpages&quot;,
 260             &quot;--disable-jvm-feature-shenandoahgc&quot;,
 261             versionArgs(input, common))
 262     };
 263     // Extra settings for debug profiles
 264     common.debug_suffix = &quot;-debug&quot;;
 265     common.debug_profile_base = {
 266         configure_args: [&quot;--enable-debug&quot;],
 267         labels: &quot;debug&quot;
 268     };
</pre>
<hr />
<pre>
 401  *
 402  * @param input External data to use for generating the configuration
 403  * @param common The common values
 404  * @returns {{}} Profiles part of the configuration
 405  */
 406 var getJibProfilesProfiles = function (input, common, data) {
 407     // Main SE profiles
 408     var profiles = {
 409 
 410         &quot;linux-x64&quot;: {
 411             target_os: &quot;linux&quot;,
 412             target_cpu: &quot;x64&quot;,
 413             dependencies: [&quot;devkit&quot;, &quot;graphviz&quot;, &quot;pandoc&quot;, &quot;graalunit_lib&quot;],
 414             configure_args: concat(common.configure_args_64bit,
 415                 &quot;--enable-full-docs&quot;, &quot;--with-zlib=system&quot;,
 416                 (isWsl(input) ? [ &quot;--host=x86_64-unknown-linux-gnu&quot;,
 417                     &quot;--build=x86_64-unknown-linux-gnu&quot; ] : [])),
 418             default_make_targets: [&quot;docs-bundles&quot;],
 419         },
 420 
<span class="line-added"> 421         &quot;linux-x64-musl&quot;: {</span>
<span class="line-added"> 422             target_os: &quot;linux&quot;,</span>
<span class="line-added"> 423             target_cpu: &quot;x64&quot;,</span>
<span class="line-added"> 424             target_libc: &quot;musl&quot;,</span>
<span class="line-added"> 425             configure_args: concat(common.configure_args_64bit,</span>
<span class="line-added"> 426                 &quot;--with-zlib=system&quot;),</span>
<span class="line-added"> 427         },</span>
<span class="line-added"> 428 </span>
 429         &quot;linux-x86&quot;: {
 430             target_os: &quot;linux&quot;,
 431             target_cpu: &quot;x86&quot;,
 432             build_cpu: &quot;x64&quot;,
 433             dependencies: [&quot;devkit&quot;],
 434             configure_args: concat(common.configure_args_32bit,
 435                 &quot;--with-jvm-variants=minimal,server&quot;, &quot;--with-zlib=system&quot;),
 436         },
 437 
 438         &quot;macosx-x64&quot;: {
 439             target_os: &quot;macosx&quot;,
 440             target_cpu: &quot;x64&quot;,
 441             dependencies: [&quot;devkit&quot;, &quot;pandoc&quot;, &quot;graalunit_lib&quot;],
 442             configure_args: concat(common.configure_args_64bit, &quot;--with-zlib=system&quot;,
 443                 &quot;--with-macosx-version-max=10.9.0&quot;),
 444         },
 445 
 446         &quot;solaris-x64&quot;: {
 447             target_os: &quot;solaris&quot;,
 448             target_cpu: &quot;x64&quot;,
</pre>
<hr />
<pre>
 653             var jcovName = name + &quot;-jcov&quot;;
 654             profiles[jcovName] = clone(common.main_profile_base);
 655             profiles[jcovName].target_os = profiles[name].target_os
 656             profiles[jcovName].target_cpu = profiles[name].target_cpu
 657             profiles[jcovName].default_make_targets = [ &quot;jcov-bundles&quot; ];
 658             profiles[jcovName].dependencies = concat(profiles[jcovName].dependencies,
 659                 [ name + &quot;.jdk&quot;, &quot;devkit&quot; ]);
 660             profiles[jcovName].configure_args = concat(profiles[jcovName].configure_args,
 661                 [&quot;--with-jcov-input-jdk=&quot; + input.get(name + &quot;.jdk&quot;, &quot;home_path&quot;)]);
 662         });
 663 
 664     //
 665     // Define artifacts for profiles
 666     //
 667     // Macosx bundles are named osx
 668     // tar.gz.
 669     var artifactData = {
 670         &quot;linux-x64&quot;: {
 671             platform: &quot;linux-x64&quot;,
 672         },
<span class="line-added"> 673         &quot;linux-x64-musl&quot;: {</span>
<span class="line-added"> 674             platform: &quot;linux-x64-musl&quot;,</span>
<span class="line-added"> 675             demo_ext: &quot;tar.gz&quot;</span>
<span class="line-added"> 676         },</span>
 677         &quot;linux-x86&quot;: {
 678             platform: &quot;linux-x86&quot;,
 679         },
 680         &quot;macosx-x64&quot;: {
 681             platform: &quot;osx-x64&quot;,
 682             jdk_subdir: &quot;jdk-&quot; + data.version +  &quot;.jdk/Contents/Home&quot;,
 683         },
 684         &quot;solaris-x64&quot;: {
 685             platform: &quot;solaris-x64&quot;,
 686         },
 687         &quot;solaris-sparcv9&quot;: {
 688             platform: &quot;solaris-sparcv9&quot;,
 689         },
 690         &quot;windows-x64&quot;: {
 691             platform: &quot;windows-x64&quot;,
 692             jdk_suffix: &quot;zip&quot;,
 693         },
 694         &quot;windows-x86&quot;: {
 695             platform: &quot;windows-x86&quot;,
 696             jdk_suffix: &quot;zip&quot;,
</pre>
<hr />
<pre>
1005         solaris_x64: &quot;SS12u4-Solaris11u1+1.0&quot;,
1006         solaris_sparcv9: &quot;SS12u6-Solaris11u3+1.0&quot;,
1007         windows_x64: &quot;VS2019-16.5.3+1.0&quot;,
1008         linux_aarch64: &quot;gcc9.2.0-OL7.6+1.0&quot;,
1009         linux_arm: &quot;gcc8.2.0-Fedora27+1.0&quot;,
1010         linux_ppc64le: &quot;gcc8.2.0-Fedora27+1.0&quot;,
1011         linux_s390x: &quot;gcc8.2.0-Fedora27+1.0&quot;
1012     };
1013 
1014     var devkit_platform = (input.target_cpu == &quot;x86&quot;
1015         ? input.target_os + &quot;_x64&quot;
1016         : input.target_platform);
1017 
1018     var devkit_cross_prefix = &quot;&quot;;
1019     if (input.build_platform != input.target_platform
1020        &amp;&amp; input.build_platform != devkit_platform) {
1021         devkit_cross_prefix = input.build_platform + &quot;-to-&quot;;
1022     }
1023 
1024     var boot_jdk_platform = (input.build_os == &quot;macosx&quot; ? &quot;osx&quot; : input.build_os)
<span class="line-modified">1025         + &quot;-&quot; + input.build_cpu +</span>
<span class="line-added">1026         (input.build_libc ? &quot;-&quot; + input.build_libc : &quot;&quot;);</span>
1027     var boot_jdk_ext = (input.build_os == &quot;windows&quot; ? &quot;.zip&quot; : &quot;.tar.gz&quot;)
1028     // If running in WSL and building for Windows, it will look like Linux,
1029     // but we need a Windows boot JDK.
1030     if (isWsl(input) &amp;&amp; input.target_os == &quot;windows&quot;) {
1031         boot_jdk_platform = &quot;windows-&quot; + input.build_cpu;
1032         boot_jdk_ext = &quot;.zip&quot;;
1033     }
1034 
1035     var makeBinDir = (input.build_os == &quot;windows&quot;
1036         ? input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/cygwin/bin&quot;
1037         : input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/bin&quot;);
1038 
1039     if (input.build_cpu == &#39;aarch64&#39;) {
1040         boot_jdk = {
1041             organization: common.organization,
1042             ext: &quot;tar.gz&quot;,
1043             module: &quot;jdk-linux_aarch64&quot;,
1044             revision: &quot;14+1.0&quot;,
1045             configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,
1046             environment_path: common.boot_jdk_home + &quot;/bin&quot;
1047         }
1048     } else {
1049         boot_jdk = {
1050             server: &quot;jpg&quot;,
<span class="line-modified">1051             product: input.build_libc == &quot;musl&quot; ? &quot;jdk-portola&quot; : &quot;jdk&quot;,</span>
1052             version: common.boot_jdk_version,
1053             build_number: common.boot_jdk_build_number,
1054             file: &quot;bundles/&quot; + boot_jdk_platform + &quot;/jdk-&quot; + common.boot_jdk_version + &quot;_&quot;
1055                 + boot_jdk_platform + &quot;_bin&quot; + boot_jdk_ext,
1056             configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,
1057             environment_path: common.boot_jdk_home + &quot;/bin&quot;
1058         }
1059     }
1060     if (input.build_cpu == &#39;sparcv9&#39;) {
1061         boot_jdk.file = &quot;bundles/openjdk/GPL/&quot; + boot_jdk_platform
1062             + &quot;/openjdk-&quot; + common.boot_jdk_version + &quot;_&quot;
1063             + boot_jdk_platform + &quot;_bin&quot; + boot_jdk_ext;
1064     }
1065 
1066     var dependencies = {
1067         boot_jdk: boot_jdk,
1068 
1069         devkit: {
1070             organization: common.organization,
1071             ext: &quot;tar.gz&quot;,
</pre>
</td>
</tr>
</table>
<center><a href="../autoconf/spec.gmk.in.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../hotspot/lib/CompileJvm.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>