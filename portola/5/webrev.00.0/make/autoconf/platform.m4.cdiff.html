<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/platform.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="buildjdk-spec.gmk.in.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/platform.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 160,10 ***</span>
<span class="line-new-header">--- 160,22 ---</span>
        VAR_CPU=sparcv9
        VAR_CPU_ARCH=sparc
        VAR_CPU_BITS=64
        VAR_CPU_ENDIAN=big
        ;;
<span class="line-added">+     sparc)</span>
<span class="line-added">+       VAR_CPU=sparc</span>
<span class="line-added">+       VAR_CPU_ARCH=sparc</span>
<span class="line-added">+       VAR_CPU_BITS=32</span>
<span class="line-added">+       VAR_CPU_ENDIAN=big</span>
<span class="line-added">+       ;;</span>
<span class="line-added">+     sparcv9|sparc64)</span>
<span class="line-added">+       VAR_CPU=sparcv9</span>
<span class="line-added">+       VAR_CPU_ARCH=sparc</span>
<span class="line-added">+       VAR_CPU_BITS=64</span>
<span class="line-added">+       VAR_CPU_ENDIAN=big</span>
<span class="line-added">+       ;;</span>
      *)
        AC_MSG_ERROR([unsupported cpu $1])
        ;;
    esac
  ])
</pre>
<hr />
<pre>
<span class="line-old-header">*** 176,14 ***</span>
    case &quot;$1&quot; in
      *linux*)
        VAR_OS=linux
        VAR_OS_TYPE=unix
        ;;
<span class="line-removed">-     *solaris*)</span>
<span class="line-removed">-       VAR_OS=solaris</span>
<span class="line-removed">-       VAR_OS_TYPE=unix</span>
<span class="line-removed">-       ;;</span>
      *darwin*)
        VAR_OS=macosx
        VAR_OS_TYPE=unix
        ;;
      *bsd*)
<span class="line-new-header">--- 188,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 405,23 ***</span>
    elif test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then
      OPENJDK_$1_CPU_LEGACY_LIB=&quot;amd64&quot;
    fi
    AC_SUBST(OPENJDK_$1_CPU_LEGACY_LIB)
  
<span class="line-removed">-   # OPENJDK_$1_CPU_ISADIR is normally empty. On 64-bit Solaris systems, it is set to</span>
<span class="line-removed">-   # /amd64 or /sparcv9. This string is appended to some library paths, like this:</span>
<span class="line-removed">-   # /usr/lib${OPENJDK_$1_CPU_ISADIR}/libexample.so</span>
<span class="line-removed">-   OPENJDK_$1_CPU_ISADIR=&quot;&quot;</span>
<span class="line-removed">-   if test &quot;x$OPENJDK_$1_OS&quot; = xsolaris; then</span>
<span class="line-removed">-     if test &quot;x$OPENJDK_$1_CPU&quot; = xx86_64; then</span>
<span class="line-removed">-       OPENJDK_$1_CPU_ISADIR=&quot;/amd64&quot;</span>
<span class="line-removed">-     elif test &quot;x$OPENJDK_$1_CPU&quot; = xsparcv9; then</span>
<span class="line-removed">-       OPENJDK_$1_CPU_ISADIR=&quot;/sparcv9&quot;</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-   fi</span>
<span class="line-removed">-   AC_SUBST(OPENJDK_$1_CPU_ISADIR)</span>
<span class="line-removed">- </span>
    # Setup OPENJDK_$1_CPU_OSARCH, which is used to set the os.arch Java system property
    OPENJDK_$1_CPU_OSARCH=&quot;$OPENJDK_$1_CPU&quot;
    if test &quot;x$OPENJDK_$1_OS&quot; = xlinux &amp;&amp; test &quot;x$OPENJDK_$1_CPU&quot; = xx86; then
      # On linux only, we replace x86 with i386.
      OPENJDK_$1_CPU_OSARCH=&quot;i386&quot;
<span class="line-new-header">--- 413,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 547,13 ***</span>
    AC_SUBST(OPENJDK_$1_OS_INCLUDE_SUBDIR)
  ])
  
  AC_DEFUN([PLATFORM_SET_RELEASE_FILE_OS_VALUES],
  [
<span class="line-removed">-   if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xsolaris&quot;; then</span>
<span class="line-removed">-     RELEASE_FILE_OS_NAME=SunOS</span>
<span class="line-removed">-   fi</span>
    if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xlinux&quot;; then
      RELEASE_FILE_OS_NAME=Linux
    fi
    if test &quot;x$OPENJDK_TARGET_OS&quot; = &quot;xwindows&quot;; then
      RELEASE_FILE_OS_NAME=Windows
<span class="line-new-header">--- 542,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 603,28 ***</span>
    PLATFORM_EXTRACT_TARGET_AND_BUILD
    PLATFORM_SETUP_TARGET_CPU_BITS
    PLATFORM_SET_MODULE_TARGET_OS_VALUES
    PLATFORM_SET_RELEASE_FILE_OS_VALUES
    PLATFORM_SETUP_LEGACY_VARS
<span class="line-modified">!   PLATFORM_CHECK_DEPRECATION</span>
<span class="line-modified">! ])</span>
<span class="line-removed">- </span>
<span class="line-removed">- AC_DEFUN([PLATFORM_CHECK_DEPRECATION],</span>
<span class="line-removed">- [</span>
<span class="line-removed">-   UTIL_ARG_ENABLE(NAME: deprecated-ports, DEFAULT: false,</span>
<span class="line-removed">-       RESULT: ENABLE_DEPRECATED_PORTS,</span>
<span class="line-removed">-       DESC: [suppress the error when configuring for a deprecated port])</span>
<span class="line-removed">- </span>
<span class="line-removed">-   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || \</span>
<span class="line-removed">-       (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; \</span>
<span class="line-removed">-       test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="line-removed">-     if test &quot;x$ENABLE_DEPRECATED_PORTS&quot; = &quot;xtrue&quot;; then</span>
<span class="line-removed">-       AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])</span>
<span class="line-removed">-     else</span>
<span class="line-removed">-       AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a</span>
<span class="line-removed">-         future release. Use --enable-deprecated-ports=yes to suppress this error.]))</span>
<span class="line-removed">-     fi</span>
    UTIL_DEPRECATED_ARG_ENABLE(deprecated-ports)
  ])
  
  AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
  [
<span class="line-new-header">--- 595,12 ---</span>
    PLATFORM_EXTRACT_TARGET_AND_BUILD
    PLATFORM_SETUP_TARGET_CPU_BITS
    PLATFORM_SET_MODULE_TARGET_OS_VALUES
    PLATFORM_SET_RELEASE_FILE_OS_VALUES
    PLATFORM_SETUP_LEGACY_VARS
<span class="line-modified">! </span>
<span class="line-modified">!   # Deprecated in JDK 15</span>
    UTIL_DEPRECATED_ARG_ENABLE(deprecated-ports)
  ])
  
  AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
  [
</pre>
<center><a href="buildjdk-spec.gmk.in.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>