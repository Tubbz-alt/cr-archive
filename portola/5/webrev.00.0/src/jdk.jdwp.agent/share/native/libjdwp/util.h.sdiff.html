<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jdwp.agent/share/native/libjdwp/util.h</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../jdk.hotspot.agent/linux/native/libsaproc/ps_proc.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../../../test/hotspot/jtreg/runtime/8176717/TestInheritFD.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdwp.agent/share/native/libjdwp/util.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2016, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
234             jvalue      return_value;
235         } method_exit;
236 
237         /* For monitor wait events */
238         union {
239             /* ei = EI_MONITOR_WAIT */
240             jlong timeout;
241             /* ei = EI_MONITOR_WAITED */
242             jboolean timed_out;
243         } monitor;
244     } u;
245 
246 } EventInfo;
247 
248 /* Structure to hold dynamic array of objects */
249 typedef struct ObjectBatch {
250     jobject *objects;
251     jint     count;
252 } ObjectBatch;
253 
<span class="line-removed">254 /*</span>
<span class="line-removed">255  * JNI signature constants, beyond those defined in JDWP_TAG(*)</span>
<span class="line-removed">256  */</span>
<span class="line-removed">257 #define SIGNATURE_BEGIN_ARGS    &#39;(&#39;</span>
<span class="line-removed">258 #define SIGNATURE_END_ARGS      &#39;)&#39;</span>
<span class="line-removed">259 #define SIGNATURE_END_CLASS     &#39;;&#39;</span>
<span class="line-removed">260 </span>
261 /*
262  * Modifier flags for classes, fields, methods
263  */
264 #define MOD_PUBLIC       0x0001     /* visible to everyone */
265 #define MOD_PRIVATE      0x0002     /* visible only to the defining class */
266 #define MOD_PROTECTED    0x0004     /* visible to subclasses */
267 #define MOD_STATIC       0x0008     /* instance variable is static */
268 #define MOD_FINAL        0x0010     /* no further subclassing, overriding */
269 #define MOD_SYNCHRONIZED 0x0020     /* wrap method call in monitor lock */
270 #define MOD_VOLATILE     0x0040     /* can cache in registers */
271 #define MOD_TRANSIENT    0x0080     /* not persistant */
272 #define MOD_NATIVE       0x0100     /* implemented in C */
273 #define MOD_INTERFACE    0x0200     /* class is an interface */
274 #define MOD_ABSTRACT     0x0400     /* no definition provided */
275 /*
276  * Additional modifiers not defined as such in the JVM spec
277  */
278 #define MOD_SYNTHETIC    0xf0000000  /* not in source code */
279 
280 /*
281  * util funcs
282  */
283 void util_initialize(JNIEnv *env);
284 void util_reset(void);
285 
286 struct PacketInputStream;
287 struct PacketOutputStream;
288 
289 jint uniqueID(void);
290 jbyte referenceTypeTag(jclass clazz);
291 jbyte specificTypeKey(JNIEnv *env, jobject object);
292 jboolean isObjectTag(jbyte tag);
293 jvmtiError spawnNewThread(jvmtiStartFunction func, void *arg, char *name);
<span class="line-removed">294 void convertSignatureToClassname(char *convert);</span>
295 void writeCodeLocation(struct PacketOutputStream *out, jclass clazz,
296                        jmethodID method, jlocation location);
297 
298 jvmtiError classInstances(jclass klass, ObjectBatch *instances, int maxInstances);
299 jvmtiError classInstanceCounts(jint classCount, jclass *classes, jlong *counts);
300 jvmtiError objectReferrers(jobject obj, ObjectBatch *referrers, int maxObjects);
301 
302 /*
303  * Command handling helpers shared among multiple command sets
304  */
305 int filterDebugThreads(jthread *threads, int count);
306 
307 
308 void sharedGetFieldValues(struct PacketInputStream *in,
309                           struct PacketOutputStream *out,
310                           jboolean isStatic);
311 jboolean sharedInvoke(struct PacketInputStream *in,
312                       struct PacketOutputStream *out);
313 
314 jvmtiError fieldSignature(jclass, jfieldID, char **, char **, char **);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
234             jvalue      return_value;
235         } method_exit;
236 
237         /* For monitor wait events */
238         union {
239             /* ei = EI_MONITOR_WAIT */
240             jlong timeout;
241             /* ei = EI_MONITOR_WAITED */
242             jboolean timed_out;
243         } monitor;
244     } u;
245 
246 } EventInfo;
247 
248 /* Structure to hold dynamic array of objects */
249 typedef struct ObjectBatch {
250     jobject *objects;
251     jint     count;
252 } ObjectBatch;
253 







254 /*
255  * Modifier flags for classes, fields, methods
256  */
257 #define MOD_PUBLIC       0x0001     /* visible to everyone */
258 #define MOD_PRIVATE      0x0002     /* visible only to the defining class */
259 #define MOD_PROTECTED    0x0004     /* visible to subclasses */
260 #define MOD_STATIC       0x0008     /* instance variable is static */
261 #define MOD_FINAL        0x0010     /* no further subclassing, overriding */
262 #define MOD_SYNCHRONIZED 0x0020     /* wrap method call in monitor lock */
263 #define MOD_VOLATILE     0x0040     /* can cache in registers */
264 #define MOD_TRANSIENT    0x0080     /* not persistant */
265 #define MOD_NATIVE       0x0100     /* implemented in C */
266 #define MOD_INTERFACE    0x0200     /* class is an interface */
267 #define MOD_ABSTRACT     0x0400     /* no definition provided */
268 /*
269  * Additional modifiers not defined as such in the JVM spec
270  */
271 #define MOD_SYNTHETIC    0xf0000000  /* not in source code */
272 
273 /*
274  * util funcs
275  */
276 void util_initialize(JNIEnv *env);
277 void util_reset(void);
278 
279 struct PacketInputStream;
280 struct PacketOutputStream;
281 
282 jint uniqueID(void);
283 jbyte referenceTypeTag(jclass clazz);
284 jbyte specificTypeKey(JNIEnv *env, jobject object);
285 jboolean isObjectTag(jbyte tag);
286 jvmtiError spawnNewThread(jvmtiStartFunction func, void *arg, char *name);

287 void writeCodeLocation(struct PacketOutputStream *out, jclass clazz,
288                        jmethodID method, jlocation location);
289 
290 jvmtiError classInstances(jclass klass, ObjectBatch *instances, int maxInstances);
291 jvmtiError classInstanceCounts(jint classCount, jclass *classes, jlong *counts);
292 jvmtiError objectReferrers(jobject obj, ObjectBatch *referrers, int maxObjects);
293 
294 /*
295  * Command handling helpers shared among multiple command sets
296  */
297 int filterDebugThreads(jthread *threads, int count);
298 
299 
300 void sharedGetFieldValues(struct PacketInputStream *in,
301                           struct PacketOutputStream *out,
302                           jboolean isStatic);
303 jboolean sharedInvoke(struct PacketInputStream *in,
304                       struct PacketOutputStream *out);
305 
306 jvmtiError fieldSignature(jclass, jfieldID, char **, char **, char **);
</pre>
</td>
</tr>
</table>
<center><a href="../../../../jdk.hotspot.agent/linux/native/libsaproc/ps_proc.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../../../test/hotspot/jtreg/runtime/8176717/TestInheritFD.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>