<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff doc/testing.md</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="testing.html.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="../make/Bundles.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>doc/testing.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 % Testing the JDK
  2 
  3 ## Using &quot;make test&quot; (the run-test framework)
  4 
  5 This new way of running tests is developer-centric. It assumes that you have
  6 built a JDK locally and want to test it. Running common test targets is simple,
  7 and more complex ad-hoc combination of tests is possible. The user interface is
  8 forgiving, and clearly report errors it cannot resolve.
  9 
 10 The main target `test` uses the jdk-image as the tested product. There is
 11 also an alternate target `exploded-test` that uses the exploded image
 12 instead. Not all tests will run successfully on the exploded image, but using
 13 this target can greatly improve rebuild times for certain workflows.
 14 
<span class="line-modified"> 15 Previously, `make test` was used invoke an old system for running test, and</span>
 16 `make run-test` was used for the new test framework. For backward compatibility
 17 with scripts and muscle memory, `run-test` (and variants like
<span class="line-modified"> 18 `exploded-run-test` or `run-test-tier1`) are kept as aliases. The old system</span>
<span class="line-removed"> 19 can still be accessed for some time using `cd test &amp;&amp; make`.</span>
 20 
 21 Some example command-lines:
 22 
 23     $ make test-tier1
 24     $ make test-jdk_lang JTREG=&quot;JOBS=8&quot;
 25     $ make test TEST=jdk_lang
 26     $ make test-only TEST=&quot;gtest:LogTagSet gtest:LogTagSetDescriptions&quot; GTEST=&quot;REPEAT=-1&quot;
<span class="line-modified"> 27     $ make test TEST=&quot;hotspot:hotspot_gc&quot; JTREG=&quot;JOBS=1;TIMEOUT=8;VM_OPTIONS=-XshowSettings -Xlog:gc+ref=debug&quot;</span>
 28     $ make test TEST=&quot;jtreg:test/hotspot:hotspot_gc test/hotspot/jtreg/native_sanity/JniVersion.java&quot;
 29     $ make test TEST=&quot;micro:java.lang.reflect&quot; MICRO=&quot;FORK=1;WARMUP_ITER=2&quot;
 30     $ make exploded-test TEST=tier2
 31 
 32 ### Configuration
 33 
 34 To be able to run JTReg tests, `configure` needs to know where to find the
 35 JTReg test framework. If it is not picked up automatically by configure, use
 36 the `--with-jtreg=&lt;path to jtreg home&gt;` option to point to the JTReg framework.
 37 Note that this option should point to the JTReg home, i.e. the top directory,
 38 containing `lib/jtreg.jar` etc. (An alternative is to set the `JT_HOME`
 39 environment variable to point to the JTReg home before running `configure`.)
 40 
 41 To be able to run microbenchmarks, `configure` needs to know where to find
 42 the JMH dependency. Use `--with-jmh=&lt;path to JMH jars&gt;` to point to a directory
 43 containing the core JMH and transitive dependencies. The recommended dependencies
 44 can be retrieved by running `sh make/devkit/createJMHBundle.sh`, after which
 45 `--with-jmh=build/jmh/jars` should work.
 46 
 47 ## Test selection
</pre>
<hr />
<pre>
164 error, timeout or other problems.
165 
166 In case of test failures, `make test` will exit with a non-zero exit value.
167 
168 All tests have their result stored in `build/$BUILD/test-results/$TEST_ID`,
169 where TEST_ID is a path-safe conversion from the fully qualified test
170 descriptor, e.g. for `jtreg:jdk/test:tier1` the TEST_ID is
171 `jtreg_jdk_test_tier1`. This path is also printed in the log at the end of the
172 test run.
173 
174 Additional work data is stored in `build/$BUILD/test-support/$TEST_ID`. For
175 some frameworks, this directory might contain information that is useful in
176 determining the cause of a failed test.
177 
178 ## Test suite control
179 
180 It is possible to control various aspects of the test suites using make control
181 variables.
182 
183 These variables use a keyword=value approach to allow multiple values to be
<span class="line-modified">184 set. So, for instance, `JTREG=&quot;JOBS=1;TIMEOUT=8&quot;` will set the JTReg</span>
185 concurrency level to 1 and the timeout factor to 8. This is equivalent to
<span class="line-modified">186 setting `JTREG_JOBS=1 JTREG_TIMEOUT=8`, but using the keyword format means that</span>
187 the `JTREG` variable is parsed and verified for correctness, so
<span class="line-modified">188 `JTREG=&quot;TMIEOUT=8&quot;` would give an error, while `JTREG_TMIEOUT=8` would just</span>
189 pass unnoticed.
190 
191 To separate multiple keyword=value pairs, use `;` (semicolon). Since the shell
192 normally eats `;`, the recommended usage is to write the assignment inside
193 qoutes, e.g. `JTREG=&quot;...;...&quot;`. This will also make sure spaces are preserved,
194 as in `JTREG=&quot;VM_OPTIONS=-XshowSettings -Xlog:gc+ref=debug&quot;`.
195 
<span class="line-modified">196 (Other ways are possible, e.g. using backslash: `JTREG=JOBS=1\;TIMEOUT=8`.</span>
197 Also, as a special technique, the string `%20` will be replaced with space for
198 certain options, e.g. `JTREG=VM_OPTIONS=-XshowSettings%20-Xlog:gc+ref=debug`.
199 This can be useful if you have layers of scripts and have trouble getting
200 proper quoting of command line arguments through.)
201 
202 As far as possible, the names of the keywords have been standardized between
203 test suites.
204 
205 ### General keywords (TEST_OPTS)
206 
207 Some keywords are valid across different test suites. If you want to run
208 tests from multiple test suites, or just don&#39;t want to care which test suite specific
209 control variable to use, then you can use the general TEST_OPTS control variable.
210 
211 There are also some keywords that applies globally to the test runner system,
212 not to any specific test suites. These are also available as TEST_OPTS keywords.
213 
214 #### JOBS
215 
216 Currently only applies to JTReg.
</pre>
<hr />
<pre>
245 The JCov report is stored in `build/$BUILD/test-results/jcov-output`.
246 
247 Please note that running with JCov reporting can be very memory intensive.
248 
249 ### JTReg keywords
250 
251 #### JOBS
252 The test concurrency (`-concurrency`).
253 
254 Defaults to TEST_JOBS (if set by `--with-test-jobs=`), otherwise it defaults to
255 JOBS, except for Hotspot, where the default is *number of CPU cores/2* (for
256 sparc, if more than 16 cpus, then *number of CPU cores/5*, otherwise *number of
257 CPU cores/4*), but never more than *memory size in GB/2*.
258 
259 #### TIMEOUT_FACTOR
260 The timeout factor (`-timeoutFactor`).
261 
262 Defaults to 4.
263 
264 #### TEST_MODE
<span class="line-modified">265 The test mode (`-agentvm`, `-samevm` or `-othervm`).</span>
266 
<span class="line-modified">267 Defaults to `-agentvm`.</span>
268 
269 #### ASSERT
270 Enable asserts (`-ea -esa`, or none).
271 
272 Set to `true` or `false`. If true, adds `-ea -esa`. Defaults to true, except
273 for hotspot.
274 
275 #### VERBOSE
276 The verbosity level (`-verbose`).
277 
278 Defaults to `fail,error,summary`.
279 
280 #### RETAIN
281 What test data to retain (`-retain`).
282 
283 Defaults to `fail,error`.
284 
285 #### MAX_MEM
286 Limit memory consumption (`-Xmx` and `-vmoption:-Xmx`, or none).
287 
</pre>
<hr />
<pre>
290 
291 Defaults to 512m, except for hotspot, where it defaults to 0 (no limit).
292 
293 #### KEYWORDS
294 
295 JTReg kewords sent to JTReg using `-k`. Please be careful in making sure that
296 spaces and special characters (like `!`) are properly quoted. To avoid some
297 issues, the special value `%20` can be used instead of space.
298 
299 #### EXTRA_PROBLEM_LISTS
300 
301 Use additional problem lists file or files, in addition to the default
302 ProblemList.txt located at the JTReg test roots.
303 
304 If multiple file names are specified, they should be separated by space (or, to
305 help avoid quoting issues, the special value `%20`).
306 
307 The file names should be either absolute, or relative to the JTReg test root of
308 the tests to be run.
309 








310 
311 #### OPTIONS
312 Additional options to the JTReg test framework.
313 
314 Use `JTREG=&quot;OPTIONS=--help all&quot;` to see all available JTReg options.
315 
316 #### JAVA_OPTIONS
317 Additional Java options to JTReg (`-javaoption`).
318 
319 #### VM_OPTIONS
320 Additional VM options to JTReg (`-vmoption`).
321 
322 #### AOT_MODULES
323 
324 Generate AOT modules before testing for the specified module, or set of
325 modules. If multiple modules are specified, they should be separated by space
326 (or, to help avoid quoting issues, the special value `%20`).
327 




328 ### Gtest keywords
329 
330 #### REPEAT
331 The number of times to repeat the tests (`--gtest_repeat`).
332 
333 Default is 1. Set to -1 to repeat indefinitely. This can be especially useful
334 combined with `OPTIONS=--gtest_break_on_failure` to reproduce an intermittent
335 problem.
336 
337 #### OPTIONS
338 Additional options to the Gtest test framework.
339 
340 Use `GTEST=&quot;OPTIONS=--help&quot;` to see all available Gtest options.
341 
342 #### AOT_MODULES
343 
344 Generate AOT modules before testing for the specified module, or set of
345 modules. If multiple modules are specified, they should be separated by space
346 (or, to help avoid quoting issues, the special value `%20`).
347 
</pre>
<hr />
<pre>
357 Amount of time to spend in each measurement iteration, in seconds. Same as
358 specifying `-r &lt;num&gt;`
359 
360 #### WARMUP_ITER
361 Number of warmup iterations to run before the measurement phase in each fork.
362 Same as specifying `-wi &lt;num&gt;`.
363 
364 #### WARMUP_TIME
365 Amount of time to spend in each warmup iteration. Same as specifying `-w &lt;num&gt;`.
366 
367 #### RESULTS_FORMAT
368 Specify to have the test run save a log of the values. Accepts the same values
369 as `-rff`, i.e., `text`, `csv`, `scsv`, `json`, or `latex`.
370 
371 #### VM_OPTIONS
372 Additional VM arguments to provide to forked off VMs. Same as `-jvmArgs &lt;args&gt;`
373 
374 #### OPTIONS
375 Additional arguments to send to JMH.
376 





































































377 ---
378 # Override some definitions in the global css file that are not optimal for
379 # this document.
380 header-includes:
381  - &#39;&lt;style type=&quot;text/css&quot;&gt;pre, code, tt { color: #1d6ae5; }&lt;/style&gt;&#39;
382 ---
</pre>
</td>
<td>
<hr />
<pre>
  1 % Testing the JDK
  2 
  3 ## Using &quot;make test&quot; (the run-test framework)
  4 
  5 This new way of running tests is developer-centric. It assumes that you have
  6 built a JDK locally and want to test it. Running common test targets is simple,
  7 and more complex ad-hoc combination of tests is possible. The user interface is
  8 forgiving, and clearly report errors it cannot resolve.
  9 
 10 The main target `test` uses the jdk-image as the tested product. There is
 11 also an alternate target `exploded-test` that uses the exploded image
 12 instead. Not all tests will run successfully on the exploded image, but using
 13 this target can greatly improve rebuild times for certain workflows.
 14 
<span class="line-modified"> 15 Previously, `make test` was used to invoke an old system for running tests, and</span>
 16 `make run-test` was used for the new test framework. For backward compatibility
 17 with scripts and muscle memory, `run-test` (and variants like
<span class="line-modified"> 18 `exploded-run-test` or `run-test-tier1`) are kept as aliases.</span>

 19 
 20 Some example command-lines:
 21 
 22     $ make test-tier1
 23     $ make test-jdk_lang JTREG=&quot;JOBS=8&quot;
 24     $ make test TEST=jdk_lang
 25     $ make test-only TEST=&quot;gtest:LogTagSet gtest:LogTagSetDescriptions&quot; GTEST=&quot;REPEAT=-1&quot;
<span class="line-modified"> 26     $ make test TEST=&quot;hotspot:hotspot_gc&quot; JTREG=&quot;JOBS=1;TIMEOUT_FACTOR=8;VM_OPTIONS=-XshowSettings -Xlog:gc+ref=debug&quot;</span>
 27     $ make test TEST=&quot;jtreg:test/hotspot:hotspot_gc test/hotspot/jtreg/native_sanity/JniVersion.java&quot;
 28     $ make test TEST=&quot;micro:java.lang.reflect&quot; MICRO=&quot;FORK=1;WARMUP_ITER=2&quot;
 29     $ make exploded-test TEST=tier2
 30 
 31 ### Configuration
 32 
 33 To be able to run JTReg tests, `configure` needs to know where to find the
 34 JTReg test framework. If it is not picked up automatically by configure, use
 35 the `--with-jtreg=&lt;path to jtreg home&gt;` option to point to the JTReg framework.
 36 Note that this option should point to the JTReg home, i.e. the top directory,
 37 containing `lib/jtreg.jar` etc. (An alternative is to set the `JT_HOME`
 38 environment variable to point to the JTReg home before running `configure`.)
 39 
 40 To be able to run microbenchmarks, `configure` needs to know where to find
 41 the JMH dependency. Use `--with-jmh=&lt;path to JMH jars&gt;` to point to a directory
 42 containing the core JMH and transitive dependencies. The recommended dependencies
 43 can be retrieved by running `sh make/devkit/createJMHBundle.sh`, after which
 44 `--with-jmh=build/jmh/jars` should work.
 45 
 46 ## Test selection
</pre>
<hr />
<pre>
163 error, timeout or other problems.
164 
165 In case of test failures, `make test` will exit with a non-zero exit value.
166 
167 All tests have their result stored in `build/$BUILD/test-results/$TEST_ID`,
168 where TEST_ID is a path-safe conversion from the fully qualified test
169 descriptor, e.g. for `jtreg:jdk/test:tier1` the TEST_ID is
170 `jtreg_jdk_test_tier1`. This path is also printed in the log at the end of the
171 test run.
172 
173 Additional work data is stored in `build/$BUILD/test-support/$TEST_ID`. For
174 some frameworks, this directory might contain information that is useful in
175 determining the cause of a failed test.
176 
177 ## Test suite control
178 
179 It is possible to control various aspects of the test suites using make control
180 variables.
181 
182 These variables use a keyword=value approach to allow multiple values to be
<span class="line-modified">183 set. So, for instance, `JTREG=&quot;JOBS=1;TIMEOUT_FACTOR=8&quot;` will set the JTReg</span>
184 concurrency level to 1 and the timeout factor to 8. This is equivalent to
<span class="line-modified">185 setting `JTREG_JOBS=1 JTREG_TIMEOUT_FACTOR=8`, but using the keyword format means that</span>
186 the `JTREG` variable is parsed and verified for correctness, so
<span class="line-modified">187 `JTREG=&quot;TMIEOUT_FACTOR=8&quot;` would give an error, while `JTREG_TMIEOUT_FACTOR=8` would just</span>
188 pass unnoticed.
189 
190 To separate multiple keyword=value pairs, use `;` (semicolon). Since the shell
191 normally eats `;`, the recommended usage is to write the assignment inside
192 qoutes, e.g. `JTREG=&quot;...;...&quot;`. This will also make sure spaces are preserved,
193 as in `JTREG=&quot;VM_OPTIONS=-XshowSettings -Xlog:gc+ref=debug&quot;`.
194 
<span class="line-modified">195 (Other ways are possible, e.g. using backslash: `JTREG=JOBS=1\;TIMEOUT_FACTOR=8`.</span>
196 Also, as a special technique, the string `%20` will be replaced with space for
197 certain options, e.g. `JTREG=VM_OPTIONS=-XshowSettings%20-Xlog:gc+ref=debug`.
198 This can be useful if you have layers of scripts and have trouble getting
199 proper quoting of command line arguments through.)
200 
201 As far as possible, the names of the keywords have been standardized between
202 test suites.
203 
204 ### General keywords (TEST_OPTS)
205 
206 Some keywords are valid across different test suites. If you want to run
207 tests from multiple test suites, or just don&#39;t want to care which test suite specific
208 control variable to use, then you can use the general TEST_OPTS control variable.
209 
210 There are also some keywords that applies globally to the test runner system,
211 not to any specific test suites. These are also available as TEST_OPTS keywords.
212 
213 #### JOBS
214 
215 Currently only applies to JTReg.
</pre>
<hr />
<pre>
244 The JCov report is stored in `build/$BUILD/test-results/jcov-output`.
245 
246 Please note that running with JCov reporting can be very memory intensive.
247 
248 ### JTReg keywords
249 
250 #### JOBS
251 The test concurrency (`-concurrency`).
252 
253 Defaults to TEST_JOBS (if set by `--with-test-jobs=`), otherwise it defaults to
254 JOBS, except for Hotspot, where the default is *number of CPU cores/2* (for
255 sparc, if more than 16 cpus, then *number of CPU cores/5*, otherwise *number of
256 CPU cores/4*), but never more than *memory size in GB/2*.
257 
258 #### TIMEOUT_FACTOR
259 The timeout factor (`-timeoutFactor`).
260 
261 Defaults to 4.
262 
263 #### TEST_MODE
<span class="line-modified">264 The test mode (`agentvm` or `othervm`).</span>
265 
<span class="line-modified">266 Defaults to `agentvm`.</span>
267 
268 #### ASSERT
269 Enable asserts (`-ea -esa`, or none).
270 
271 Set to `true` or `false`. If true, adds `-ea -esa`. Defaults to true, except
272 for hotspot.
273 
274 #### VERBOSE
275 The verbosity level (`-verbose`).
276 
277 Defaults to `fail,error,summary`.
278 
279 #### RETAIN
280 What test data to retain (`-retain`).
281 
282 Defaults to `fail,error`.
283 
284 #### MAX_MEM
285 Limit memory consumption (`-Xmx` and `-vmoption:-Xmx`, or none).
286 
</pre>
<hr />
<pre>
289 
290 Defaults to 512m, except for hotspot, where it defaults to 0 (no limit).
291 
292 #### KEYWORDS
293 
294 JTReg kewords sent to JTReg using `-k`. Please be careful in making sure that
295 spaces and special characters (like `!`) are properly quoted. To avoid some
296 issues, the special value `%20` can be used instead of space.
297 
298 #### EXTRA_PROBLEM_LISTS
299 
300 Use additional problem lists file or files, in addition to the default
301 ProblemList.txt located at the JTReg test roots.
302 
303 If multiple file names are specified, they should be separated by space (or, to
304 help avoid quoting issues, the special value `%20`).
305 
306 The file names should be either absolute, or relative to the JTReg test root of
307 the tests to be run.
308 
<span class="line-added">309 #### RUN_PROBLEM_LISTS</span>
<span class="line-added">310 </span>
<span class="line-added">311 Use the problem lists to select tests instead of excluding them.</span>
<span class="line-added">312 </span>
<span class="line-added">313 Set to `true` or `false`.</span>
<span class="line-added">314 If `true`, JTReg will use `-match:` option, otherwise `-exclude:` will be used.</span>
<span class="line-added">315 Default is `false`.</span>
<span class="line-added">316 </span>
317 
318 #### OPTIONS
319 Additional options to the JTReg test framework.
320 
321 Use `JTREG=&quot;OPTIONS=--help all&quot;` to see all available JTReg options.
322 
323 #### JAVA_OPTIONS
324 Additional Java options to JTReg (`-javaoption`).
325 
326 #### VM_OPTIONS
327 Additional VM options to JTReg (`-vmoption`).
328 
329 #### AOT_MODULES
330 
331 Generate AOT modules before testing for the specified module, or set of
332 modules. If multiple modules are specified, they should be separated by space
333 (or, to help avoid quoting issues, the special value `%20`).
334 
<span class="line-added">335 #### RETRY_COUNT</span>
<span class="line-added">336 </span>
<span class="line-added">337 Retry failed tests up to a set number of times. Defaults to 0.</span>
<span class="line-added">338 </span>
339 ### Gtest keywords
340 
341 #### REPEAT
342 The number of times to repeat the tests (`--gtest_repeat`).
343 
344 Default is 1. Set to -1 to repeat indefinitely. This can be especially useful
345 combined with `OPTIONS=--gtest_break_on_failure` to reproduce an intermittent
346 problem.
347 
348 #### OPTIONS
349 Additional options to the Gtest test framework.
350 
351 Use `GTEST=&quot;OPTIONS=--help&quot;` to see all available Gtest options.
352 
353 #### AOT_MODULES
354 
355 Generate AOT modules before testing for the specified module, or set of
356 modules. If multiple modules are specified, they should be separated by space
357 (or, to help avoid quoting issues, the special value `%20`).
358 
</pre>
<hr />
<pre>
368 Amount of time to spend in each measurement iteration, in seconds. Same as
369 specifying `-r &lt;num&gt;`
370 
371 #### WARMUP_ITER
372 Number of warmup iterations to run before the measurement phase in each fork.
373 Same as specifying `-wi &lt;num&gt;`.
374 
375 #### WARMUP_TIME
376 Amount of time to spend in each warmup iteration. Same as specifying `-w &lt;num&gt;`.
377 
378 #### RESULTS_FORMAT
379 Specify to have the test run save a log of the values. Accepts the same values
380 as `-rff`, i.e., `text`, `csv`, `scsv`, `json`, or `latex`.
381 
382 #### VM_OPTIONS
383 Additional VM arguments to provide to forked off VMs. Same as `-jvmArgs &lt;args&gt;`
384 
385 #### OPTIONS
386 Additional arguments to send to JMH.
387 
<span class="line-added">388 ## Notes for Specific Tests</span>
<span class="line-added">389 </span>
<span class="line-added">390 ### Docker Tests</span>
<span class="line-added">391 </span>
<span class="line-added">392 Docker tests with default parameters may fail on systems with glibc versions not</span>
<span class="line-added">393 compatible with the one used in the default docker image (e.g., Oracle Linux 7.6 for x86).</span>
<span class="line-added">394 For example, they pass on Ubuntu 16.04 but fail on Ubuntu 18.04 if run like this on x86:</span>
<span class="line-added">395 </span>
<span class="line-added">396     $ make test TEST=&quot;jtreg:test/hotspot/jtreg/containers/docker&quot;</span>
<span class="line-added">397 </span>
<span class="line-added">398 To run these tests correctly, additional parameters for the correct docker image are</span>
<span class="line-added">399 required on Ubuntu 18.04 by using `JAVA_OPTIONS`.</span>
<span class="line-added">400 </span>
<span class="line-added">401     $ make test TEST=&quot;jtreg:test/hotspot/jtreg/containers/docker&quot; JTREG=&quot;JAVA_OPTIONS=-Djdk.test.docker.image.name=ubuntu -Djdk.test.docker.image.version=latest&quot;</span>
<span class="line-added">402 </span>
<span class="line-added">403 ### Non-US locale</span>
<span class="line-added">404 </span>
<span class="line-added">405 If your locale is non-US, some tests are likely to fail. To work around this you can</span>
<span class="line-added">406 set the locale to US. On Unix platforms simply setting `LANG=&quot;en_US&quot;` in the</span>
<span class="line-added">407 environment before running tests should work. On Windows, setting</span>
<span class="line-added">408 `JTREG=&quot;VM_OPTIONS=-Duser.language=en -Duser.country=US&quot;` helps for most, but not all test cases.</span>
<span class="line-added">409 For example:</span>
<span class="line-added">410 </span>
<span class="line-added">411     $ export LANG=&quot;en_US&quot; &amp;&amp; make test TEST=...</span>
<span class="line-added">412     $ make test JTREG=&quot;VM_OPTIONS=-Duser.language=en -Duser.country=US&quot; TEST=...</span>
<span class="line-added">413 </span>
<span class="line-added">414 ### PKCS11 Tests</span>
<span class="line-added">415 </span>
<span class="line-added">416 It is highly recommended to use the latest NSS version when running PKCS11 tests.</span>
<span class="line-added">417 Improper NSS version may lead to unexpected failures which are hard to diagnose.</span>
<span class="line-added">418 For example, sun/security/pkcs11/Secmod/AddTrustedCert.java may fail on Ubuntu</span>
<span class="line-added">419 18.04 with the default NSS version in the system.</span>
<span class="line-added">420 To run these tests correctly, the system property `test.nss.lib.paths` is required</span>
<span class="line-added">421 on Ubuntu 18.04 to specify the alternative NSS lib directories.</span>
<span class="line-added">422 For example:</span>
<span class="line-added">423 </span>
<span class="line-added">424     $ make test TEST=&quot;jtreg:sun/security/pkcs11/Secmod/AddTrustedCert.java&quot; JTREG=&quot;JAVA_OPTIONS=-Dtest.nss.lib.paths=/path/to/your/latest/NSS-libs&quot;</span>
<span class="line-added">425 </span>
<span class="line-added">426 For more notes about the PKCS11 tests, please refer to test/jdk/sun/security/pkcs11/README.</span>
<span class="line-added">427 </span>
<span class="line-added">428 ### Client UI Tests</span>
<span class="line-added">429 </span>
<span class="line-added">430 Some Client UI tests use key sequences which may be reserved by the operating</span>
<span class="line-added">431 system. Usually that causes the test failure. So it is highly recommended to disable</span>
<span class="line-added">432 system key shortcuts prior testing. The steps to access and disable system key shortcuts</span>
<span class="line-added">433 for various platforms are provided below.</span>
<span class="line-added">434 </span>
<span class="line-added">435 #### MacOS</span>
<span class="line-added">436 Choose Apple menu; System Preferences, click Keyboard, then click Shortcuts;</span>
<span class="line-added">437 select or deselect desired shortcut.</span>
<span class="line-added">438 </span>
<span class="line-added">439 For example, test/jdk/javax/swing/TooltipManager/JMenuItemToolTipKeyBindingsTest/JMenuItemToolTipKeyBindingsTest.java fails</span>
<span class="line-added">440 on MacOS because it uses `CTRL + F1` key sequence to show or hide tooltip message</span>
<span class="line-added">441 but the key combination is reserved by the operating system. To run the test correctly</span>
<span class="line-added">442 the default global key shortcut should be disabled using the steps described above, and then deselect</span>
<span class="line-added">443 &quot;Turn keyboard access on or off&quot; option which is responsible for `CTRL + F1` combination.</span>
<span class="line-added">444 </span>
<span class="line-added">445 #### Linux</span>
<span class="line-added">446 Open the Activities overview and start typing Settings; Choose Settings, click Devices,</span>
<span class="line-added">447 then click Keyboard; set or override desired shortcut.</span>
<span class="line-added">448 </span>
<span class="line-added">449 #### Windows</span>
<span class="line-added">450 Type `gpedit` in the Search and then click Edit group policy; navigate to</span>
<span class="line-added">451 User Configuration -&gt; Administrative Templates -&gt; Windows Components -&gt; File Explorer;</span>
<span class="line-added">452 in the right-side pane look for &quot;Turn off Windows key hotkeys&quot; and double click on it;</span>
<span class="line-added">453 enable or disable hotkeys.</span>
<span class="line-added">454 </span>
<span class="line-added">455 Note: restart is required to make the settings take effect.</span>
<span class="line-added">456 </span>
457 ---
458 # Override some definitions in the global css file that are not optimal for
459 # this document.
460 header-includes:
461  - &#39;&lt;style type=&quot;text/css&quot;&gt;pre, code, tt { color: #1d6ae5; }&lt;/style&gt;&#39;
462 ---
</pre>
</td>
</tr>
</table>
<center><a href="testing.html.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="../make/Bundles.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>