<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Lint.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Kinds.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Preview.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Lint.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2005, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.tools.javac.code;
 27 
 28 import java.util.Arrays;
 29 import java.util.EnumSet;
 30 import java.util.Map;
 31 import java.util.concurrent.ConcurrentHashMap;
 32 
 33 import com.sun.tools.javac.code.Symbol.*;
 34 import com.sun.tools.javac.main.Option;
 35 import com.sun.tools.javac.util.Context;
 36 import com.sun.tools.javac.util.List;
 37 import com.sun.tools.javac.util.Options;
 38 import com.sun.tools.javac.util.Pair;
 39 
 40 /**
<span class="line-modified"> 41  * A class for handling -Xlint suboptions and @SuppresssWarnings.</span>
 42  *
 43  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 44  *  If you write code that depends on this, you do so at your own risk.
 45  *  This code and its internal interfaces are subject to change or
 46  *  deletion without notice.&lt;/b&gt;
 47  */
 48 public class Lint
 49 {
 50     /** The context key for the root Lint object. */
 51     protected static final Context.Key&lt;Lint&gt; lintKey = new Context.Key&lt;&gt;();
 52 
 53     /** Get the root Lint instance. */
 54     public static Lint instance(Context context) {
 55         Lint instance = context.get(lintKey);
 56         if (instance == null)
 57             instance = new Lint(context);
 58         return instance;
 59     }
 60 
 61     /**
</pre>
<hr />
<pre>
105         Options options = Options.instance(context);
106 
107         if (options.isSet(Option.XLINT) || options.isSet(Option.XLINT_CUSTOM, &quot;all&quot;)) {
108             // If -Xlint or -Xlint:all is given, enable all categories by default
109             values = EnumSet.allOf(LintCategory.class);
110         } else if (options.isSet(Option.XLINT_CUSTOM, &quot;none&quot;)) {
111             // if -Xlint:none is given, disable all categories by default
112             values = EnumSet.noneOf(LintCategory.class);
113         } else {
114             // otherwise, enable on-by-default categories
115             values = EnumSet.noneOf(LintCategory.class);
116 
117             Source source = Source.instance(context);
118             if (source.compareTo(Source.JDK9) &gt;= 0) {
119                 values.add(LintCategory.DEP_ANN);
120             }
121             values.add(LintCategory.REQUIRES_TRANSITIVE_AUTOMATIC);
122             values.add(LintCategory.OPENS);
123             values.add(LintCategory.MODULE);
124             values.add(LintCategory.REMOVAL);



125         }
126 
127         // Look for specific overrides
128         for (LintCategory lc : LintCategory.values()) {
129             if (options.isSet(Option.XLINT_CUSTOM, lc.option)) {
130                 values.add(lc);
131             } else if (options.isSet(Option.XLINT_CUSTOM, &quot;-&quot; + lc.option)) {
132                 values.remove(lc);
133             }
134         }
135 
136         suppressedValues = EnumSet.noneOf(LintCategory.class);
137 
138         context.put(lintKey, this);
139         augmentor = new AugmentVisitor(context);
140     }
141 
142     protected Lint(Lint other) {
143         this.augmentor = other.augmentor;
144         this.values = other.values.clone();
</pre>
<hr />
<pre>
257         /**
258          * Warn about use of automatic modules in the requires clauses.
259          */
260         REQUIRES_AUTOMATIC(&quot;requires-automatic&quot;),
261 
262         /**
263          * Warn about automatic modules in requires transitive.
264          */
265         REQUIRES_TRANSITIVE_AUTOMATIC(&quot;requires-transitive-automatic&quot;),
266 
267         /**
268          * Warn about Serializable classes that do not provide a serial version ID.
269          */
270         SERIAL(&quot;serial&quot;),
271 
272         /**
273          * Warn about issues relating to use of statics
274          */
275         STATIC(&quot;static&quot;),
276 





277         /**
278          * Warn about issues relating to use of try blocks (i.e. try-with-resources)
279          */
280         TRY(&quot;try&quot;),
281 
282         /**
283          * Warn about unchecked operations on raw types.
284          */
285         UNCHECKED(&quot;unchecked&quot;),
286 
287         /**
288          * Warn about potentially unsafe vararg methods
289          */
290         VARARGS(&quot;varargs&quot;),
291 
292         /**
293          * Warn about use of preview features.
294          */
295         PREVIEW(&quot;preview&quot;);
296 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.tools.javac.code;
 27 
 28 import java.util.Arrays;
 29 import java.util.EnumSet;
 30 import java.util.Map;
 31 import java.util.concurrent.ConcurrentHashMap;
 32 
 33 import com.sun.tools.javac.code.Symbol.*;
 34 import com.sun.tools.javac.main.Option;
 35 import com.sun.tools.javac.util.Context;
 36 import com.sun.tools.javac.util.List;
 37 import com.sun.tools.javac.util.Options;
 38 import com.sun.tools.javac.util.Pair;
 39 
 40 /**
<span class="line-modified"> 41  * A class for handling -Xlint suboptions and @SuppressWarnings.</span>
 42  *
 43  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 44  *  If you write code that depends on this, you do so at your own risk.
 45  *  This code and its internal interfaces are subject to change or
 46  *  deletion without notice.&lt;/b&gt;
 47  */
 48 public class Lint
 49 {
 50     /** The context key for the root Lint object. */
 51     protected static final Context.Key&lt;Lint&gt; lintKey = new Context.Key&lt;&gt;();
 52 
 53     /** Get the root Lint instance. */
 54     public static Lint instance(Context context) {
 55         Lint instance = context.get(lintKey);
 56         if (instance == null)
 57             instance = new Lint(context);
 58         return instance;
 59     }
 60 
 61     /**
</pre>
<hr />
<pre>
105         Options options = Options.instance(context);
106 
107         if (options.isSet(Option.XLINT) || options.isSet(Option.XLINT_CUSTOM, &quot;all&quot;)) {
108             // If -Xlint or -Xlint:all is given, enable all categories by default
109             values = EnumSet.allOf(LintCategory.class);
110         } else if (options.isSet(Option.XLINT_CUSTOM, &quot;none&quot;)) {
111             // if -Xlint:none is given, disable all categories by default
112             values = EnumSet.noneOf(LintCategory.class);
113         } else {
114             // otherwise, enable on-by-default categories
115             values = EnumSet.noneOf(LintCategory.class);
116 
117             Source source = Source.instance(context);
118             if (source.compareTo(Source.JDK9) &gt;= 0) {
119                 values.add(LintCategory.DEP_ANN);
120             }
121             values.add(LintCategory.REQUIRES_TRANSITIVE_AUTOMATIC);
122             values.add(LintCategory.OPENS);
123             values.add(LintCategory.MODULE);
124             values.add(LintCategory.REMOVAL);
<span class="line-added">125             if (!options.isSet(Option.PREVIEW)) {</span>
<span class="line-added">126                 values.add(LintCategory.PREVIEW);</span>
<span class="line-added">127             }</span>
128         }
129 
130         // Look for specific overrides
131         for (LintCategory lc : LintCategory.values()) {
132             if (options.isSet(Option.XLINT_CUSTOM, lc.option)) {
133                 values.add(lc);
134             } else if (options.isSet(Option.XLINT_CUSTOM, &quot;-&quot; + lc.option)) {
135                 values.remove(lc);
136             }
137         }
138 
139         suppressedValues = EnumSet.noneOf(LintCategory.class);
140 
141         context.put(lintKey, this);
142         augmentor = new AugmentVisitor(context);
143     }
144 
145     protected Lint(Lint other) {
146         this.augmentor = other.augmentor;
147         this.values = other.values.clone();
</pre>
<hr />
<pre>
260         /**
261          * Warn about use of automatic modules in the requires clauses.
262          */
263         REQUIRES_AUTOMATIC(&quot;requires-automatic&quot;),
264 
265         /**
266          * Warn about automatic modules in requires transitive.
267          */
268         REQUIRES_TRANSITIVE_AUTOMATIC(&quot;requires-transitive-automatic&quot;),
269 
270         /**
271          * Warn about Serializable classes that do not provide a serial version ID.
272          */
273         SERIAL(&quot;serial&quot;),
274 
275         /**
276          * Warn about issues relating to use of statics
277          */
278         STATIC(&quot;static&quot;),
279 
<span class="line-added">280         /**</span>
<span class="line-added">281          * Warn about issues relating to use of text blocks</span>
<span class="line-added">282          */</span>
<span class="line-added">283         TEXT_BLOCKS(&quot;text-blocks&quot;),</span>
<span class="line-added">284 </span>
285         /**
286          * Warn about issues relating to use of try blocks (i.e. try-with-resources)
287          */
288         TRY(&quot;try&quot;),
289 
290         /**
291          * Warn about unchecked operations on raw types.
292          */
293         UNCHECKED(&quot;unchecked&quot;),
294 
295         /**
296          * Warn about potentially unsafe vararg methods
297          */
298         VARARGS(&quot;varargs&quot;),
299 
300         /**
301          * Warn about use of preview features.
302          */
303         PREVIEW(&quot;preview&quot;);
304 
</pre>
</td>
</tr>
</table>
<center><a href="Kinds.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Preview.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>