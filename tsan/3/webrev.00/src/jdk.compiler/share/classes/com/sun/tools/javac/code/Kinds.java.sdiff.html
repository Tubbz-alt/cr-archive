<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Kinds.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Flags.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Lint.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Kinds.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1999, 2015, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 54     /**
 55      * Kind of symbols.
 56      *
 57      * IMPORTANT: This is an ordered type.  The ordering of
 58      * declarations in this enum matters.  Be careful when changing
 59      * it.
 60      */
 61     public enum Kind {
 62         NIL(Category.BASIC, KindSelector.NIL),
 63         PCK(Category.BASIC, KindName.PACKAGE, KindSelector.PCK),
 64         TYP(Category.BASIC, KindName.CLASS, KindSelector.TYP),
 65         VAR(Category.BASIC, KindName.VAR, KindSelector.VAR),
 66         MTH(Category.BASIC, KindName.METHOD, KindSelector.MTH),
 67         POLY(Category.BASIC, KindSelector.POLY),
 68         MDL(Category.BASIC, KindSelector.MDL),
 69         ERR(Category.ERROR, KindSelector.ERR),
 70         AMBIGUOUS(Category.RESOLUTION_TARGET),                         // overloaded       target
 71         HIDDEN(Category.RESOLUTION_TARGET),                            // not overloaded   non-target
 72         STATICERR(Category.RESOLUTION_TARGET),                         // overloaded?      target
 73         MISSING_ENCL(Category.RESOLUTION),                             // not overloaded   non-target
<span class="line-modified"> 74         BAD_VAR(Category.RESOLUTION),                                  // not overloaded   non-target</span>
 75         ABSENT_VAR(Category.RESOLUTION_TARGET, KindName.VAR),          // not overloaded   non-target
 76         WRONG_MTHS(Category.RESOLUTION_TARGET, KindName.METHOD),       // overloaded       target
 77         WRONG_MTH(Category.RESOLUTION_TARGET, KindName.METHOD),        // not overloaded   target
 78         ABSENT_MTH(Category.RESOLUTION_TARGET, KindName.METHOD),       // not overloaded   non-target
 79         ABSENT_TYP(Category.RESOLUTION_TARGET, KindName.CLASS);        // not overloaded   non-target
 80 
 81         // There are essentially two &quot;levels&quot; to the Kind datatype.
 82         // The first is a totally-ordered set of categories of
 83         // solutions.  Within each category, we have more
 84         // possibilities.
 85         private enum Category {
 86             BASIC, ERROR, RESOLUTION, RESOLUTION_TARGET;
 87         }
 88 
 89         private final KindName kindName;
 90         private final KindName absentKind;
 91         private final KindSelector selector;
 92         private final Category category;
 93 
 94         private Kind(Category category) {
</pre>
<hr />
<pre>
218             if ((data &amp; MDL.data) != 0) kinds.add(KindName.MODULE);
219             return kinds;
220         }
221     }
222 
223     public enum KindName implements Formattable {
224         ANNOTATION(&quot;kindname.annotation&quot;),
225         CONSTRUCTOR(&quot;kindname.constructor&quot;),
226         INTERFACE(&quot;kindname.interface&quot;),
227         ENUM(&quot;kindname.enum&quot;),
228         STATIC(&quot;kindname.static&quot;),
229         TYPEVAR(&quot;kindname.type.variable&quot;),
230         BOUND(&quot;kindname.type.variable.bound&quot;),
231         VAR(&quot;kindname.variable&quot;),
232         VAL(&quot;kindname.value&quot;),
233         METHOD(&quot;kindname.method&quot;),
234         CLASS(&quot;kindname.class&quot;),
235         STATIC_INIT(&quot;kindname.static.init&quot;),
236         INSTANCE_INIT(&quot;kindname.instance.init&quot;),
237         PACKAGE(&quot;kindname.package&quot;),
<span class="line-modified">238         MODULE(&quot;kindname.module&quot;);</span>


239 
240         private final String name;
241 
242         KindName(String name) {
243             this.name = name;
244         }
245 
246         public String toString() {
247             return name;
248         }
249 
250         public String getKind() {
251             return &quot;Kindname&quot;;
252         }
253 
254         public String toString(Locale locale, Messages messages) {
255             String s = toString();
256             return messages.getLocalizedString(locale, &quot;compiler.misc.&quot; + s);
257         }
258     }
</pre>
<hr />
<pre>
262             case INVOKE: return KindName.METHOD;
263             case NEW: return KindName.CONSTRUCTOR;
264             default : throw new AssertionError(&quot;Unexpected mode: &quot;+ mode);
265         }
266     }
267 
268     /** A KindName representing a given symbol
269      */
270     public static KindName kindName(Symbol sym) {
271         switch (sym.getKind()) {
272         case PACKAGE:
273             return KindName.PACKAGE;
274 
275         case ENUM:
276             return KindName.ENUM;
277 
278         case ANNOTATION_TYPE:
279         case CLASS:
280             return KindName.CLASS;
281 



282         case INTERFACE:
283             return KindName.INTERFACE;
284 
285         case TYPE_PARAMETER:
286             return KindName.TYPEVAR;
287 

288         case ENUM_CONSTANT:
<span class="line-removed">289         case FIELD:</span>
290         case PARAMETER:
291         case LOCAL_VARIABLE:
292         case EXCEPTION_PARAMETER:
293         case RESOURCE_VARIABLE:
294             return KindName.VAR;
295 



296         case CONSTRUCTOR:
297             return KindName.CONSTRUCTOR;
298 
299         case METHOD:
300             return KindName.METHOD;
301         case STATIC_INIT:
302             return KindName.STATIC_INIT;
303         case INSTANCE_INIT:
304             return KindName.INSTANCE_INIT;
305 
306         default:
307                 throw new AssertionError(&quot;Unexpected kind: &quot;+sym.getKind());
308         }
309     }
310 
311     /** A KindName representing the kind of a given class/interface type.
312      */
313     public static KindName typeKindName(Type t) {
314         if (t.hasTag(TYPEVAR) ||
315             t.hasTag(CLASS) &amp;&amp; (t.tsym.flags() &amp; COMPOUND) != 0)
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1999, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 54     /**
 55      * Kind of symbols.
 56      *
 57      * IMPORTANT: This is an ordered type.  The ordering of
 58      * declarations in this enum matters.  Be careful when changing
 59      * it.
 60      */
 61     public enum Kind {
 62         NIL(Category.BASIC, KindSelector.NIL),
 63         PCK(Category.BASIC, KindName.PACKAGE, KindSelector.PCK),
 64         TYP(Category.BASIC, KindName.CLASS, KindSelector.TYP),
 65         VAR(Category.BASIC, KindName.VAR, KindSelector.VAR),
 66         MTH(Category.BASIC, KindName.METHOD, KindSelector.MTH),
 67         POLY(Category.BASIC, KindSelector.POLY),
 68         MDL(Category.BASIC, KindSelector.MDL),
 69         ERR(Category.ERROR, KindSelector.ERR),
 70         AMBIGUOUS(Category.RESOLUTION_TARGET),                         // overloaded       target
 71         HIDDEN(Category.RESOLUTION_TARGET),                            // not overloaded   non-target
 72         STATICERR(Category.RESOLUTION_TARGET),                         // overloaded?      target
 73         MISSING_ENCL(Category.RESOLUTION),                             // not overloaded   non-target
<span class="line-modified"> 74         BAD_RESTRICTED_TYPE(Category.RESOLUTION),                      // not overloaded   non-target</span>
 75         ABSENT_VAR(Category.RESOLUTION_TARGET, KindName.VAR),          // not overloaded   non-target
 76         WRONG_MTHS(Category.RESOLUTION_TARGET, KindName.METHOD),       // overloaded       target
 77         WRONG_MTH(Category.RESOLUTION_TARGET, KindName.METHOD),        // not overloaded   target
 78         ABSENT_MTH(Category.RESOLUTION_TARGET, KindName.METHOD),       // not overloaded   non-target
 79         ABSENT_TYP(Category.RESOLUTION_TARGET, KindName.CLASS);        // not overloaded   non-target
 80 
 81         // There are essentially two &quot;levels&quot; to the Kind datatype.
 82         // The first is a totally-ordered set of categories of
 83         // solutions.  Within each category, we have more
 84         // possibilities.
 85         private enum Category {
 86             BASIC, ERROR, RESOLUTION, RESOLUTION_TARGET;
 87         }
 88 
 89         private final KindName kindName;
 90         private final KindName absentKind;
 91         private final KindSelector selector;
 92         private final Category category;
 93 
 94         private Kind(Category category) {
</pre>
<hr />
<pre>
218             if ((data &amp; MDL.data) != 0) kinds.add(KindName.MODULE);
219             return kinds;
220         }
221     }
222 
223     public enum KindName implements Formattable {
224         ANNOTATION(&quot;kindname.annotation&quot;),
225         CONSTRUCTOR(&quot;kindname.constructor&quot;),
226         INTERFACE(&quot;kindname.interface&quot;),
227         ENUM(&quot;kindname.enum&quot;),
228         STATIC(&quot;kindname.static&quot;),
229         TYPEVAR(&quot;kindname.type.variable&quot;),
230         BOUND(&quot;kindname.type.variable.bound&quot;),
231         VAR(&quot;kindname.variable&quot;),
232         VAL(&quot;kindname.value&quot;),
233         METHOD(&quot;kindname.method&quot;),
234         CLASS(&quot;kindname.class&quot;),
235         STATIC_INIT(&quot;kindname.static.init&quot;),
236         INSTANCE_INIT(&quot;kindname.instance.init&quot;),
237         PACKAGE(&quot;kindname.package&quot;),
<span class="line-modified">238         MODULE(&quot;kindname.module&quot;),</span>
<span class="line-added">239         RECORD_COMPONENT(&quot;kindname.record.component&quot;),</span>
<span class="line-added">240         RECORD(&quot;kindname.record&quot;);</span>
241 
242         private final String name;
243 
244         KindName(String name) {
245             this.name = name;
246         }
247 
248         public String toString() {
249             return name;
250         }
251 
252         public String getKind() {
253             return &quot;Kindname&quot;;
254         }
255 
256         public String toString(Locale locale, Messages messages) {
257             String s = toString();
258             return messages.getLocalizedString(locale, &quot;compiler.misc.&quot; + s);
259         }
260     }
</pre>
<hr />
<pre>
264             case INVOKE: return KindName.METHOD;
265             case NEW: return KindName.CONSTRUCTOR;
266             default : throw new AssertionError(&quot;Unexpected mode: &quot;+ mode);
267         }
268     }
269 
270     /** A KindName representing a given symbol
271      */
272     public static KindName kindName(Symbol sym) {
273         switch (sym.getKind()) {
274         case PACKAGE:
275             return KindName.PACKAGE;
276 
277         case ENUM:
278             return KindName.ENUM;
279 
280         case ANNOTATION_TYPE:
281         case CLASS:
282             return KindName.CLASS;
283 
<span class="line-added">284         case RECORD:</span>
<span class="line-added">285             return KindName.RECORD;</span>
<span class="line-added">286 </span>
287         case INTERFACE:
288             return KindName.INTERFACE;
289 
290         case TYPE_PARAMETER:
291             return KindName.TYPEVAR;
292 
<span class="line-added">293         case BINDING_VARIABLE:</span>
294         case ENUM_CONSTANT:

295         case PARAMETER:
296         case LOCAL_VARIABLE:
297         case EXCEPTION_PARAMETER:
298         case RESOURCE_VARIABLE:
299             return KindName.VAR;
300 
<span class="line-added">301         case FIELD:</span>
<span class="line-added">302             return ((sym.flags_field &amp; RECORD) != 0) ? KindName.RECORD_COMPONENT : KindName.VAR;</span>
<span class="line-added">303 </span>
304         case CONSTRUCTOR:
305             return KindName.CONSTRUCTOR;
306 
307         case METHOD:
308             return KindName.METHOD;
309         case STATIC_INIT:
310             return KindName.STATIC_INIT;
311         case INSTANCE_INIT:
312             return KindName.INSTANCE_INIT;
313 
314         default:
315                 throw new AssertionError(&quot;Unexpected kind: &quot;+sym.getKind());
316         }
317     }
318 
319     /** A KindName representing the kind of a given class/interface type.
320      */
321     public static KindName typeKindName(Type t) {
322         if (t.hasTag(TYPEVAR) ||
323             t.hasTag(CLASS) &amp;&amp; (t.tsym.flags() &amp; COMPOUND) != 0)
</pre>
</td>
</tr>
</table>
<center><a href="Flags.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Lint.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>