<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/DeferredCompletionFailureHandler.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ClassFinder.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Directive.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/DeferredCompletionFailureHandler.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 69         }
 70         public void handleAPICompletionFailure(CompletionFailure cf) {
 71             //ignore
 72         }
 73         public void classSymbolCompleteFailed(ClassSymbol sym, Completer origCompleter) {
 74             class2Flip.put(sym, new FlipSymbolDescription(sym, new DeferredCompleter(origCompleter) {
 75                 @Override public void complete(Symbol sym) throws CompletionFailure {
 76                     class2Flip.remove(sym);
 77                     super.complete(sym);
 78                 }
 79             }));
 80         }
 81         public void classSymbolRemoved(ClassSymbol sym) {
 82             class2Flip.remove(sym);
 83         }
 84         public void uninstall() {
 85             class2Flip.values().forEach(f -&gt; f.flip());
 86         }
 87     };
 88 




















 89     public final Handler javacCodeHandler = new Handler() {
 90         public void install() {
 91         }
 92         public void handleAPICompletionFailure(CompletionFailure cf) {
 93             throw cf;
 94         }
 95         public void classSymbolCompleteFailed(ClassSymbol sym, Completer origCompleter) {}
 96         public void classSymbolRemoved(ClassSymbol sym) {}
 97         public void uninstall() {
 98         }
 99     };
100 
101     private Handler handler = javacCodeHandler;
102 
103     protected DeferredCompletionFailureHandler(Context context) {
104         context.put(deferredCompletionFailureHandlerKey, this);
105     }
106 
107     public Handler setHandler(Handler h) {
108         if (h == handler) return handler;
</pre>
</td>
<td>
<hr />
<pre>
 69         }
 70         public void handleAPICompletionFailure(CompletionFailure cf) {
 71             //ignore
 72         }
 73         public void classSymbolCompleteFailed(ClassSymbol sym, Completer origCompleter) {
 74             class2Flip.put(sym, new FlipSymbolDescription(sym, new DeferredCompleter(origCompleter) {
 75                 @Override public void complete(Symbol sym) throws CompletionFailure {
 76                     class2Flip.remove(sym);
 77                     super.complete(sym);
 78                 }
 79             }));
 80         }
 81         public void classSymbolRemoved(ClassSymbol sym) {
 82             class2Flip.remove(sym);
 83         }
 84         public void uninstall() {
 85             class2Flip.values().forEach(f -&gt; f.flip());
 86         }
 87     };
 88 
<span class="line-added"> 89     public final Handler speculativeCodeHandler = new Handler() {</span>
<span class="line-added"> 90         private final Map&lt;ClassSymbol, FlipSymbolDescription&gt; class2Flip = new HashMap&lt;&gt;();</span>
<span class="line-added"> 91 </span>
<span class="line-added"> 92         public void install() {</span>
<span class="line-added"> 93         }</span>
<span class="line-added"> 94         public void handleAPICompletionFailure(CompletionFailure cf) {</span>
<span class="line-added"> 95             throw cf;</span>
<span class="line-added"> 96         }</span>
<span class="line-added"> 97         public void classSymbolCompleteFailed(ClassSymbol sym, Completer origCompleter) {</span>
<span class="line-added"> 98             class2Flip.put(sym, new FlipSymbolDescription(sym, new DeferredCompleter(origCompleter)));</span>
<span class="line-added"> 99         }</span>
<span class="line-added">100         public void classSymbolRemoved(ClassSymbol sym) {</span>
<span class="line-added">101             class2Flip.remove(sym);</span>
<span class="line-added">102         }</span>
<span class="line-added">103         public void uninstall() {</span>
<span class="line-added">104             class2Flip.values().forEach(f -&gt; f.flip());</span>
<span class="line-added">105             class2Flip.clear();</span>
<span class="line-added">106         }</span>
<span class="line-added">107     };</span>
<span class="line-added">108 </span>
109     public final Handler javacCodeHandler = new Handler() {
110         public void install() {
111         }
112         public void handleAPICompletionFailure(CompletionFailure cf) {
113             throw cf;
114         }
115         public void classSymbolCompleteFailed(ClassSymbol sym, Completer origCompleter) {}
116         public void classSymbolRemoved(ClassSymbol sym) {}
117         public void uninstall() {
118         }
119     };
120 
121     private Handler handler = javacCodeHandler;
122 
123     protected DeferredCompletionFailureHandler(Context context) {
124         context.put(deferredCompletionFailureHandlerKey, this);
125     }
126 
127     public Handler setHandler(Handler h) {
128         if (h == handler) return handler;
</pre>
</td>
</tr>
</table>
<center><a href="ClassFinder.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Directive.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>