<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Symtab.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SymbolMetadata.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Type.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Symtab.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1999, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1999, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 40,10 ***</span>
<span class="line-new-header">--- 40,11 ---</span>
  import com.sun.tools.javac.code.Symbol.Completer;
  import com.sun.tools.javac.code.Symbol.CompletionFailure;
  import com.sun.tools.javac.code.Symbol.MethodSymbol;
  import com.sun.tools.javac.code.Symbol.ModuleSymbol;
  import com.sun.tools.javac.code.Symbol.PackageSymbol;
<span class="line-added">+ import com.sun.tools.javac.code.Symbol.RootPackageSymbol;</span>
  import com.sun.tools.javac.code.Symbol.TypeSymbol;
  import com.sun.tools.javac.code.Symbol.VarSymbol;
  import com.sun.tools.javac.code.Type.BottomType;
  import com.sun.tools.javac.code.Type.ClassType;
  import com.sun.tools.javac.code.Type.ErrorType;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 158,10 ***</span>
<span class="line-new-header">--- 159,11 ---</span>
      public final ModuleSymbol java_base;
  
      /** Predefined types.
       */
      public final Type objectType;
<span class="line-added">+     public final Type objectMethodsType;</span>
      public final Type objectsType;
      public final Type classType;
      public final Type classLoaderType;
      public final Type stringType;
      public final Type stringBufferType;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 211,10 ***</span>
<span class="line-new-header">--- 213,13 ---</span>
      public final Type stringConcatFactory;
      public final Type repeatableType;
      public final Type documentedType;
      public final Type elementTypeType;
      public final Type functionalInterfaceType;
<span class="line-added">+     public final Type previewFeatureType;</span>
<span class="line-added">+     public final Type typeDescriptorType;</span>
<span class="line-added">+     public final Type recordType;</span>
  
      /** The symbol representing the length field of an array.
       */
      public final VarSymbol lengthVar;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 380,11 ***</span>
          // Create the unknown type
          unknownType = new UnknownType();
  
          messages = JavacMessages.instance(context);
  
<span class="line-modified">!         rootPackage = new PackageSymbol(names.empty, null);</span>
  
          // create the basic builtin symbols
          unnamedModule = new ModuleSymbol(names.empty, null) {
                  {
                      directives = List.nil();
<span class="line-new-header">--- 385,13 ---</span>
          // Create the unknown type
          unknownType = new UnknownType();
  
          messages = JavacMessages.instance(context);
  
<span class="line-modified">!         MissingInfoHandler missingInfoHandler = MissingInfoHandler.instance(context);</span>
<span class="line-added">+ </span>
<span class="line-added">+         rootPackage = new RootPackageSymbol(names.empty, null, missingInfoHandler);</span>
  
          // create the basic builtin symbols
          unnamedModule = new ModuleSymbol(names.empty, null) {
                  {
                      directives = List.nil();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 503,10 ***</span>
<span class="line-new-header">--- 510,11 ---</span>
          // Get the initial completer for ModuleSymbols from Modules
          moduleCompleter = Modules.instance(context).getCompleter();
  
          // Enter predefined classes. All are assumed to be in the java.base module.
          objectType = enterClass(&quot;java.lang.Object&quot;);
<span class="line-added">+         objectMethodsType = enterClass(&quot;java.lang.runtime.ObjectMethods&quot;);</span>
          objectsType = enterClass(&quot;java.util.Objects&quot;);
          classType = enterClass(&quot;java.lang.Class&quot;);
          stringType = enterClass(&quot;java.lang.String&quot;);
          stringBufferType = enterClass(&quot;java.lang.StringBuffer&quot;);
          stringBuilderType = enterClass(&quot;java.lang.StringBuilder&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 565,10 ***</span>
<span class="line-new-header">--- 573,13 ---</span>
          trustMeType = enterClass(&quot;java.lang.SafeVarargs&quot;);
          nativeHeaderType = enterClass(&quot;java.lang.annotation.Native&quot;);
          lambdaMetafactory = enterClass(&quot;java.lang.invoke.LambdaMetafactory&quot;);
          stringConcatFactory = enterClass(&quot;java.lang.invoke.StringConcatFactory&quot;);
          functionalInterfaceType = enterClass(&quot;java.lang.FunctionalInterface&quot;);
<span class="line-added">+         previewFeatureType = enterClass(&quot;jdk.internal.PreviewFeature&quot;);</span>
<span class="line-added">+         typeDescriptorType = enterClass(&quot;java.lang.invoke.TypeDescriptor&quot;);</span>
<span class="line-added">+         recordType = enterClass(&quot;java.lang.Record&quot;);</span>
  
          synthesizeEmptyInterfaceIfMissing(autoCloseableType);
          synthesizeEmptyInterfaceIfMissing(cloneableType);
          synthesizeEmptyInterfaceIfMissing(serializableType);
          synthesizeEmptyInterfaceIfMissing(lambdaMetafactory);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 778,10 ***</span>
<span class="line-new-header">--- 789,11 ---</span>
                  }
              };
          unnamedPackage.modle = module;
          //we cannot use a method reference below, as initialCompleter might be null now
          unnamedPackage.completer = s -&gt; initialCompleter.complete(s);
<span class="line-added">+         unnamedPackage.flags_field |= EXISTS;</span>
          module.unnamedPackage = unnamedPackage;
      }
  
      public PackageSymbol getPackage(ModuleSymbol module, Name fullname) {
          return packages.getOrDefault(fullname, Collections.emptyMap()).get(module);
</pre>
<center><a href="SymbolMetadata.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Type.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>