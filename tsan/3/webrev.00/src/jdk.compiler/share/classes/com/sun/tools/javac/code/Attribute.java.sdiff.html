<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Attribute.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../api/JavacTrees.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ClassFinder.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Attribute.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2013, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
230         /**
231          * Returns a string representation of this annotation.
232          * String is of one of the forms:
233          * &lt;pre&gt;
234          *     {@code @com.example.foo(name1=val1, name2=val2)}
235          *     {@code @com.example.foo(val)}
236          *     {@code @com.example.foo}
237          * &lt;/pre&gt;
238          * Omit parens for marker annotations, and omit &quot;value=&quot; when allowed.
239          */
240         @DefinedBy(Api.LANGUAGE_MODEL)
241         public String toString() {
242             StringBuilder buf = new StringBuilder();
243             buf.append(&quot;@&quot;);
244             buf.append(type);
245             int len = values.length();
246             if (len &gt; 0) {
247                 buf.append(&#39;(&#39;);
248                 boolean first = true;
249                 for (Pair&lt;MethodSymbol, Attribute&gt; value : values) {
<span class="line-modified">250                     if (!first) buf.append(&quot;, &quot;);</span>

251                     first = false;
252 
253                     Name name = value.fst.name;
254                     if (len &gt; 1 || name != name.table.names.value) {
255                         buf.append(name);
256                         buf.append(&#39;=&#39;);
257                     }
258                     buf.append(value.snd);
259                 }
260                 buf.append(&#39;)&#39;);
261             }
262             return buf.toString();
263         }
264 
265         public Attribute member(Name member) {
266             Pair&lt;MethodSymbol,Attribute&gt; res = getElemPair(member);
267             return res == null ? null : res.snd;
268         }
269 
270         private Pair&lt;MethodSymbol, Attribute&gt; getElemPair(Name member) {
</pre>
<hr />
<pre>
351         @Override
352         public TypeAnnotationPosition getPosition() {
353             if (values.length != 0)
354                 return values[0].getPosition();
355             else
356                 return null;
357         }
358     }
359 
360     /** The value for an annotation element of an enum type.
361      */
362     public static class Enum extends Attribute {
363         public VarSymbol value;
364         public Enum(Type type, VarSymbol value) {
365             super(type);
366             this.value = Assert.checkNonNull(value);
367         }
368         public void accept(Visitor v) { v.visitEnum(this); }
369         @DefinedBy(Api.LANGUAGE_MODEL)
370         public String toString() {
<span class="line-modified">371             return value.enclClass() + &quot;.&quot; + value;     // qualified name</span>
372         }
373         @DefinedBy(Api.LANGUAGE_MODEL)
374         public VarSymbol getValue() {
375             return value;
376         }
377         @DefinedBy(Api.LANGUAGE_MODEL)
378         public &lt;R, P&gt; R accept(AnnotationValueVisitor&lt;R, P&gt; v, P p) {
379             return v.visitEnumConstant(value, p);
380         }
381     }
382 
383     public static class Error extends Attribute {
384         public Error(Type type) {
385             super(type);
386         }
387         public void accept(Visitor v) { v.visitError(this); }
388         @DefinedBy(Api.LANGUAGE_MODEL)
389         public String toString() {
390             return &quot;&lt;error&gt;&quot;;
391         }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
230         /**
231          * Returns a string representation of this annotation.
232          * String is of one of the forms:
233          * &lt;pre&gt;
234          *     {@code @com.example.foo(name1=val1, name2=val2)}
235          *     {@code @com.example.foo(val)}
236          *     {@code @com.example.foo}
237          * &lt;/pre&gt;
238          * Omit parens for marker annotations, and omit &quot;value=&quot; when allowed.
239          */
240         @DefinedBy(Api.LANGUAGE_MODEL)
241         public String toString() {
242             StringBuilder buf = new StringBuilder();
243             buf.append(&quot;@&quot;);
244             buf.append(type);
245             int len = values.length();
246             if (len &gt; 0) {
247                 buf.append(&#39;(&#39;);
248                 boolean first = true;
249                 for (Pair&lt;MethodSymbol, Attribute&gt; value : values) {
<span class="line-modified">250                     if (!first)</span>
<span class="line-added">251                         buf.append(&quot;, &quot;);</span>
252                     first = false;
253 
254                     Name name = value.fst.name;
255                     if (len &gt; 1 || name != name.table.names.value) {
256                         buf.append(name);
257                         buf.append(&#39;=&#39;);
258                     }
259                     buf.append(value.snd);
260                 }
261                 buf.append(&#39;)&#39;);
262             }
263             return buf.toString();
264         }
265 
266         public Attribute member(Name member) {
267             Pair&lt;MethodSymbol,Attribute&gt; res = getElemPair(member);
268             return res == null ? null : res.snd;
269         }
270 
271         private Pair&lt;MethodSymbol, Attribute&gt; getElemPair(Name member) {
</pre>
<hr />
<pre>
352         @Override
353         public TypeAnnotationPosition getPosition() {
354             if (values.length != 0)
355                 return values[0].getPosition();
356             else
357                 return null;
358         }
359     }
360 
361     /** The value for an annotation element of an enum type.
362      */
363     public static class Enum extends Attribute {
364         public VarSymbol value;
365         public Enum(Type type, VarSymbol value) {
366             super(type);
367             this.value = Assert.checkNonNull(value);
368         }
369         public void accept(Visitor v) { v.visitEnum(this); }
370         @DefinedBy(Api.LANGUAGE_MODEL)
371         public String toString() {
<span class="line-modified">372             return value.toString();</span>
373         }
374         @DefinedBy(Api.LANGUAGE_MODEL)
375         public VarSymbol getValue() {
376             return value;
377         }
378         @DefinedBy(Api.LANGUAGE_MODEL)
379         public &lt;R, P&gt; R accept(AnnotationValueVisitor&lt;R, P&gt; v, P p) {
380             return v.visitEnumConstant(value, p);
381         }
382     }
383 
384     public static class Error extends Attribute {
385         public Error(Type type) {
386             super(type);
387         }
388         public void accept(Visitor v) { v.visitError(this); }
389         @DefinedBy(Api.LANGUAGE_MODEL)
390         public String toString() {
391             return &quot;&lt;error&gt;&quot;;
392         }
</pre>
</td>
</tr>
</table>
<center><a href="../api/JavacTrees.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ClassFinder.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>