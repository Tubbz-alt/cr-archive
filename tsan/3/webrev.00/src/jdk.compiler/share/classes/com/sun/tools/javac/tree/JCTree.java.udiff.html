<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.compiler/share/classes/com/sun/tools/javac/tree/JCTree.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DocTreeMaker.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Pretty.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/tree/JCTree.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1999, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1999, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -45,16 +45,14 @@</span>
  
  import static com.sun.tools.javac.tree.JCTree.Tag.*;
  
  import javax.tools.JavaFileManager.Location;
  
<span class="udiff-line-removed">- import com.sun.source.tree.CaseTree.CaseKind;</span>
  import com.sun.source.tree.ModuleTree.ModuleKind;
  import com.sun.tools.javac.code.Directive.ExportsDirective;
  import com.sun.tools.javac.code.Directive.OpensDirective;
  import com.sun.tools.javac.code.Type.ModuleType;
<span class="udiff-line-removed">- import com.sun.tools.javac.tree.JCTree.JCPolyExpression.PolyKind;</span>
  
  /**
   * Root class for abstract syntax tree nodes. It provides definitions
   * for specific tree nodes as subclasses nested inside.
   *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -157,11 +155,11 @@</span>
  
          /** Switch expression statements, of type Switch.
           */
          SWITCH_EXPRESSION,
  
<span class="udiff-line-modified-removed">-         /** Synchronized statements, of type Synchonized.</span>
<span class="udiff-line-modified-added">+         /** Synchronized statements, of type Synchronized.</span>
           */
          SYNCHRONIZED,
  
          /** Try statements, of type Try.
           */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -185,10 +183,14 @@</span>
  
          /** Break statements, of type Break.
           */
          BREAK,
  
<span class="udiff-line-added">+         /** Yield statements, of type Yield.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         YIELD,</span>
<span class="udiff-line-added">+ </span>
          /** Continue statements, of type Continue.
           */
          CONTINUE,
  
          /** Return statements, of type Return.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -233,10 +235,14 @@</span>
  
          /** Type test expressions, of type TypeTest.
           */
          TYPETEST,
  
<span class="udiff-line-added">+         /** Patterns.</span>
<span class="udiff-line-added">+          */</span>
<span class="udiff-line-added">+         BINDINGPATTERN,</span>
<span class="udiff-line-added">+ </span>
          /** Indexed array expressions, of type Indexed.
           */
          INDEXED,
  
          /** Selections, of type Select.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -777,18 +783,21 @@</span>
              this.sym = sym;
          }
          @Override
          public void accept(Visitor v) { v.visitClassDef(this); }
  
<span class="udiff-line-added">+         @SuppressWarnings(&quot;preview&quot;)</span>
          @DefinedBy(Api.COMPILER_TREE)
          public Kind getKind() {
              if ((mods.flags &amp; Flags.ANNOTATION) != 0)
                  return Kind.ANNOTATION_TYPE;
              else if ((mods.flags &amp; Flags.INTERFACE) != 0)
                  return Kind.INTERFACE;
              else if ((mods.flags &amp; Flags.ENUM) != 0)
                  return Kind.ENUM;
<span class="udiff-line-added">+             else if ((mods.flags &amp; Flags.RECORD) != 0)</span>
<span class="udiff-line-added">+                 return Kind.RECORD;</span>
              else
                  return Kind.CLASS;
          }
  
          @DefinedBy(Api.COMPILER_TREE)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -842,10 +851,13 @@</span>
          public JCBlock body;
          /** default value, for annotation types */
          public JCExpression defaultValue;
          /** method symbol */
          public MethodSymbol sym;
<span class="udiff-line-added">+         /** does this method completes normally */</span>
<span class="udiff-line-added">+         public boolean completesNormally;</span>
<span class="udiff-line-added">+ </span>
          protected JCMethodDecl(JCModifiers mods,
                              Name name,
                              JCExpression restype,
                              List&lt;JCTypeParameter&gt; typarams,
                              JCVariableDecl recvparam,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1244,21 +1256,18 @@</span>
       * A &quot;case  :&quot; of a switch.
       */
      public static class JCCase extends JCStatement implements CaseTree {
          //as CaseKind is deprecated for removal (as it is part of a preview feature),
          //using indirection through these fields to avoid unnecessary @SuppressWarnings:
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public static final CaseKind STATEMENT = CaseKind.STATEMENT;
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public static final CaseKind RULE = CaseKind.RULE;
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public final CaseKind caseKind;
          public List&lt;JCExpression&gt; pats;
          public List&lt;JCStatement&gt; stats;
          public JCTree body;
          public boolean completesNormally;
<span class="udiff-line-modified-removed">-         protected JCCase(@SuppressWarnings(&quot;removal&quot;) CaseKind caseKind, List&lt;JCExpression&gt; pats,</span>
<span class="udiff-line-modified-added">+         protected JCCase(CaseKind caseKind, List&lt;JCExpression&gt; pats,</span>
                           List&lt;JCStatement&gt; stats, JCTree body) {
              Assert.checkNonNull(pats);
              Assert.check(pats.isEmpty() || pats.head != null);
              this.caseKind = caseKind;
              this.pats = pats;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1268,25 +1277,21 @@</span>
          @Override
          public void accept(Visitor v) { v.visitCase(this); }
  
          @Override @DefinedBy(Api.COMPILER_TREE)
          public Kind getKind() { return Kind.CASE; }
<span class="udiff-line-modified-removed">-         @Override @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-modified-added">+         @Override @Deprecated @DefinedBy(Api.COMPILER_TREE)</span>
          public JCExpression getExpression() { return pats.head; }
          @Override @DefinedBy(Api.COMPILER_TREE)
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public List&lt;JCExpression&gt; getExpressions() { return pats; }
          @Override @DefinedBy(Api.COMPILER_TREE)
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public List&lt;JCStatement&gt; getStatements() {
              return caseKind == CaseKind.STATEMENT ? stats : null;
          }
          @Override @DefinedBy(Api.COMPILER_TREE)
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public JCTree getBody() { return body; }
          @Override @DefinedBy(Api.COMPILER_TREE)
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
          public CaseKind getCaseKind() {
              return caseKind;
          }
          @Override @DefinedBy(Api.COMPILER_TREE)
          public &lt;R,D&gt; R accept(TreeVisitor&lt;R,D&gt; v, D d) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1299,11 +1304,10 @@</span>
      }
  
      /**
       * A &quot;switch ( ) { }&quot; construction.
       */
<span class="udiff-line-removed">-     @SuppressWarnings(&quot;removal&quot;)</span>
      public static class JCSwitchExpression extends JCPolyExpression implements SwitchExpressionTree {
          public JCExpression selector;
          public List&lt;JCCase&gt; cases;
          /** Position of closing brace, optional. */
          public int endpos = Position.NOPOS;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1549,14 +1553,14 @@</span>
  
      /**
       * A break from a loop or switch.
       */
      public static class JCBreak extends JCStatement implements BreakTree {
<span class="udiff-line-modified-removed">-         public JCExpression value;</span>
<span class="udiff-line-modified-added">+         public Name label;</span>
          public JCTree target;
<span class="udiff-line-modified-removed">-         protected JCBreak(JCExpression value, JCTree target) {</span>
<span class="udiff-line-modified-removed">-             this.value = value;</span>
<span class="udiff-line-modified-added">+         protected JCBreak(Name label, JCTree target) {</span>
<span class="udiff-line-modified-added">+             this.label = label;</span>
              this.target = target;
          }
          @Override
          public void accept(Visitor v) { v.visitBreak(this); }
          public boolean isValueBreak() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1565,25 +1569,48 @@</span>
  
          @DefinedBy(Api.COMPILER_TREE)
          public Kind getKind() { return Kind.BREAK; }
          @DefinedBy(Api.COMPILER_TREE)
          public Name getLabel() {
<span class="udiff-line-modified-removed">-             return value != null &amp;&amp; value.getKind() == Kind.IDENTIFIER ? ((JCIdent) value).getName() : null;</span>
<span class="udiff-line-modified-added">+             return label;</span>
          }
<span class="udiff-line-removed">-         @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-removed">-         @SuppressWarnings(&quot;removal&quot;)</span>
<span class="udiff-line-removed">-         public JCExpression getValue() { return value; }</span>
          @Override @DefinedBy(Api.COMPILER_TREE)
          public &lt;R,D&gt; R accept(TreeVisitor&lt;R,D&gt; v, D d) {
              return v.visitBreak(this, d);
          }
          @Override
          public Tag getTag() {
              return BREAK;
          }
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * A break-with from a switch expression.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static class JCYield extends JCStatement implements YieldTree {</span>
<span class="udiff-line-added">+         public JCExpression value;</span>
<span class="udiff-line-added">+         public JCTree target;</span>
<span class="udiff-line-added">+         protected JCYield(JCExpression value, JCTree target) {</span>
<span class="udiff-line-added">+             this.value = value;</span>
<span class="udiff-line-added">+             this.target = target;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         public void accept(Visitor v) { v.visitYield(this); }</span>
<span class="udiff-line-added">+         @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public Kind getKind() { return Kind.YIELD; }</span>
<span class="udiff-line-added">+         @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public JCExpression getValue() { return value; }</span>
<span class="udiff-line-added">+         @Override @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public &lt;R,D&gt; R accept(TreeVisitor&lt;R,D&gt; v, D d) {</span>
<span class="udiff-line-added">+             return v.visitYield(this, d);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         public Tag getTag() {</span>
<span class="udiff-line-added">+             return YIELD;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * A continue of a loop.
       */
      public static class JCContinue extends JCStatement implements ContinueTree {
          public Name label;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2115,22 +2142,28 @@</span>
      /**
       * A type test.
       */
      public static class JCInstanceOf extends JCExpression implements InstanceOfTree {
          public JCExpression expr;
<span class="udiff-line-modified-removed">-         public JCTree clazz;</span>
<span class="udiff-line-modified-removed">-         protected JCInstanceOf(JCExpression expr, JCTree clazz) {</span>
<span class="udiff-line-modified-added">+         public JCTree pattern;</span>
<span class="udiff-line-modified-added">+         protected JCInstanceOf(JCExpression expr, JCTree pattern) {</span>
              this.expr = expr;
<span class="udiff-line-modified-removed">-             this.clazz = clazz;</span>
<span class="udiff-line-modified-added">+             this.pattern = pattern;</span>
          }
          @Override
          public void accept(Visitor v) { v.visitTypeTest(this); }
  
          @DefinedBy(Api.COMPILER_TREE)
          public Kind getKind() { return Kind.INSTANCE_OF; }
          @DefinedBy(Api.COMPILER_TREE)
<span class="udiff-line-modified-removed">-         public JCTree getType() { return clazz; }</span>
<span class="udiff-line-modified-added">+         public JCTree getType() { return pattern instanceof JCPattern ? pattern.hasTag(BINDINGPATTERN) ? ((JCBindingPattern) pattern).vartype : null : pattern; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @Override @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public JCPattern getPattern() {</span>
<span class="udiff-line-added">+             return pattern instanceof JCPattern ? (JCPattern) pattern : null;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
          @DefinedBy(Api.COMPILER_TREE)
          public JCExpression getExpression() { return expr; }
          @Override @DefinedBy(Api.COMPILER_TREE)
          public &lt;R,D&gt; R accept(TreeVisitor&lt;R,D&gt; v, D d) {
              return v.visitInstanceOf(this, d);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2139,10 +2172,64 @@</span>
          public Tag getTag() {
              return TYPETEST;
          }
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Pattern matching forms.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static abstract class JCPattern extends JCTree</span>
<span class="udiff-line-added">+             implements PatternTree {</span>
<span class="udiff-line-added">+         public JCExpression constExpression() {</span>
<span class="udiff-line-added">+             return null;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     public static class JCBindingPattern extends JCPattern</span>
<span class="udiff-line-added">+             implements BindingPatternTree {</span>
<span class="udiff-line-added">+         public Name name;</span>
<span class="udiff-line-added">+         public BindingSymbol symbol;</span>
<span class="udiff-line-added">+         public JCTree vartype;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         protected JCBindingPattern(Name name, BindingSymbol symbol, JCTree vartype) {</span>
<span class="udiff-line-added">+             this.name = name;</span>
<span class="udiff-line-added">+             this.symbol = symbol;</span>
<span class="udiff-line-added">+             this.vartype = vartype;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public Name getBinding() {</span>
<span class="udiff-line-added">+             return name;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @Override @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public Tree getType() {</span>
<span class="udiff-line-added">+             return vartype;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         public void accept(Visitor v) {</span>
<span class="udiff-line-added">+             v.visitBindingPattern(this);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public Kind getKind() {</span>
<span class="udiff-line-added">+             return Kind.BINDING_PATTERN;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         @DefinedBy(Api.COMPILER_TREE)</span>
<span class="udiff-line-added">+         public &lt;R, D&gt; R accept(TreeVisitor&lt;R, D&gt; v, D d) {</span>
<span class="udiff-line-added">+             return v.visitBindingPattern(this, d);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         @Override</span>
<span class="udiff-line-added">+         public Tag getTag() {</span>
<span class="udiff-line-added">+             return BINDINGPATTERN;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * An array selection
       */
      public static class JCArrayAccess extends JCExpression implements ArrayAccessTree {
          public JCExpression indexed;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3075,11 +3162,11 @@</span>
                          JCStatement body);
          JCEnhancedForLoop ForeachLoop(JCVariableDecl var, JCExpression expr, JCStatement body);
          JCLabeledStatement Labelled(Name label, JCStatement body);
          JCSwitch Switch(JCExpression selector, List&lt;JCCase&gt; cases);
          JCSwitchExpression SwitchExpression(JCExpression selector, List&lt;JCCase&gt; cases);
<span class="udiff-line-modified-removed">-         JCCase Case(@SuppressWarnings(&quot;removal&quot;) CaseKind caseKind, List&lt;JCExpression&gt; pat,</span>
<span class="udiff-line-modified-added">+         JCCase Case(CaseTree.CaseKind caseKind, List&lt;JCExpression&gt; pat,</span>
                      List&lt;JCStatement&gt; stats, JCTree body);
          JCSynchronized Synchronized(JCExpression lock, JCBlock body);
          JCTry Try(JCBlock body, List&lt;JCCatch&gt; catchers, JCBlock finalizer);
          JCTry Try(List&lt;JCTree&gt; resources,
                    JCBlock body,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3089,11 +3176,12 @@</span>
          JCConditional Conditional(JCExpression cond,
                                  JCExpression thenpart,
                                  JCExpression elsepart);
          JCIf If(JCExpression cond, JCStatement thenpart, JCStatement elsepart);
          JCExpressionStatement Exec(JCExpression expr);
<span class="udiff-line-modified-removed">-         JCBreak Break(JCExpression value);</span>
<span class="udiff-line-modified-added">+         JCBreak Break(Name label);</span>
<span class="udiff-line-added">+         JCYield Yield(JCExpression value);</span>
          JCContinue Continue(Name label);
          JCReturn Return(JCExpression expr);
          JCThrow Throw(JCExpression expr);
          JCAssert Assert(JCExpression cond, JCExpression detail);
          JCMethodInvocation Apply(List&lt;JCExpression&gt; typeargs,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3112,10 +3200,11 @@</span>
          JCAssignOp Assignop(Tag opcode, JCTree lhs, JCTree rhs);
          JCUnary Unary(Tag opcode, JCExpression arg);
          JCBinary Binary(Tag opcode, JCExpression lhs, JCExpression rhs);
          JCTypeCast TypeCast(JCTree expr, JCExpression type);
          JCInstanceOf TypeTest(JCExpression expr, JCTree clazz);
<span class="udiff-line-added">+         JCBindingPattern BindingPattern(Name name, JCTree vartype);</span>
          JCArrayAccess Indexed(JCExpression indexed, JCExpression index);
          JCFieldAccess Select(JCExpression selected, Name selector);
          JCIdent Ident(Name idname);
          JCLiteral Literal(TypeTag tag, Object value);
          JCPrimitiveTypeTree TypeIdent(TypeTag typetag);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3160,10 +3249,11 @@</span>
          public void visitCatch(JCCatch that)                 { visitTree(that); }
          public void visitConditional(JCConditional that)     { visitTree(that); }
          public void visitIf(JCIf that)                       { visitTree(that); }
          public void visitExec(JCExpressionStatement that)    { visitTree(that); }
          public void visitBreak(JCBreak that)                 { visitTree(that); }
<span class="udiff-line-added">+         public void visitYield(JCYield that)                 { visitTree(that); }</span>
          public void visitContinue(JCContinue that)           { visitTree(that); }
          public void visitReturn(JCReturn that)               { visitTree(that); }
          public void visitThrow(JCThrow that)                 { visitTree(that); }
          public void visitAssert(JCAssert that)               { visitTree(that); }
          public void visitApply(JCMethodInvocation that)      { visitTree(that); }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3175,10 +3265,11 @@</span>
          public void visitAssignop(JCAssignOp that)           { visitTree(that); }
          public void visitUnary(JCUnary that)                 { visitTree(that); }
          public void visitBinary(JCBinary that)               { visitTree(that); }
          public void visitTypeCast(JCTypeCast that)           { visitTree(that); }
          public void visitTypeTest(JCInstanceOf that)         { visitTree(that); }
<span class="udiff-line-added">+         public void visitBindingPattern(JCBindingPattern that) { visitTree(that); }</span>
          public void visitIndexed(JCArrayAccess that)         { visitTree(that); }
          public void visitSelect(JCFieldAccess that)          { visitTree(that); }
          public void visitReference(JCMemberReference that)   { visitTree(that); }
          public void visitIdent(JCIdent that)                 { visitTree(that); }
          public void visitLiteral(JCLiteral that)             { visitTree(that); }
</pre>
<center><a href="DocTreeMaker.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Pretty.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>