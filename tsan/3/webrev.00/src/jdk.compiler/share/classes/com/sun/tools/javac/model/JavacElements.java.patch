diff a/src/jdk.compiler/share/classes/com/sun/tools/javac/model/JavacElements.java b/src/jdk.compiler/share/classes/com/sun/tools/javac/model/JavacElements.java
--- a/src/jdk.compiler/share/classes/com/sun/tools/javac/model/JavacElements.java
+++ b/src/jdk.compiler/share/classes/com/sun/tools/javac/model/JavacElements.java
@@ -275,10 +275,13 @@
     private JCTree matchAnnoToTree(AnnotationMirror findme,
                                    Element e, JCTree tree) {
         Symbol sym = cast(Symbol.class, e);
         class Vis extends JCTree.Visitor {
             List<JCAnnotation> result = null;
+            public void visitModuleDef(JCModuleDecl tree) {
+                result = tree.mods.annotations;
+            }
             public void visitPackageDef(JCPackageDecl tree) {
                 result = tree.annotations;
             }
             public void visitClassDef(JCClassDecl tree) {
                 result = tree.mods.annotations;
@@ -460,10 +463,12 @@
     @Override @DefinedBy(Api.LANGUAGE_MODEL)
     public Origin getOrigin(Element e) {
         Symbol sym = cast(Symbol.class, e);
         if ((sym.flags() & Flags.GENERATEDCONSTR) != 0)
             return Origin.MANDATED;
+        if ((sym.flags() & Flags.MANDATED) != 0)
+            return Origin.MANDATED;
         //TypeElement.getEnclosedElements does not return synthetic elements,
         //and most synthetic elements are not read from the classfile anyway:
         return Origin.EXPLICIT;
     }
 
