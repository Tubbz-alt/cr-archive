<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Scope.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Printer.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Source.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Scope.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 387,11 ***</span>
              while (elems != null) {
                  int hash = getIndex(elems.sym.name);
                  Entry e = table[hash];
                  Assert.check(e == elems, elems.sym);
                  table[hash] = elems.shadowed;
<span class="line-modified">!                 elems = elems.sibling;</span>
              }
              Assert.check(next.shared &gt; 0);
              next.shared--;
              next.nelems = nelems;
              // System.out.println(&quot;====&gt; leaving scope &quot; + this.hashCode() + &quot; owned by &quot; + this.owner + &quot; to &quot; + next.hashCode());
<span class="line-new-header">--- 387,11 ---</span>
              while (elems != null) {
                  int hash = getIndex(elems.sym.name);
                  Entry e = table[hash];
                  Assert.check(e == elems, elems.sym);
                  table[hash] = elems.shadowed;
<span class="line-modified">!                 elems = elems.nextSibling;</span>
              }
              Assert.check(next.shared &gt; 0);
              next.shared--;
              next.nelems = nelems;
              // System.out.println(&quot;====&gt; leaving scope &quot; + this.hashCode() + &quot; owned by &quot; + this.owner + &quot; to &quot; + next.hashCode());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 464,19 ***</span>
                  }
                  te = te.shadowed;
              }
  
              // remove e from elems and sibling list
<span class="line-modified">!             te = elems;</span>
<span class="line-modified">!             if (te == e)</span>
<span class="line-modified">!                 elems = e.sibling;</span>
<span class="line-modified">!             else while (true) {</span>
<span class="line-modified">!                 if (te.sibling == e) {</span>
<span class="line-modified">!                     te.sibling = e.sibling;</span>
<span class="line-modified">!                     break;</span>
<span class="line-modified">!                 }</span>
<span class="line-modified">!                 te = te.sibling;</span>
              }
  
              removeCount++;
  
              //notify listeners
<span class="line-new-header">--- 464,19 ---</span>
                  }
                  te = te.shadowed;
              }
  
              // remove e from elems and sibling list
<span class="line-modified">!             if (elems == e) {</span>
<span class="line-modified">!                 elems = e.nextSibling;</span>
<span class="line-modified">!                 if (elems != null)</span>
<span class="line-modified">!                     elems.prevSibling = null;</span>
<span class="line-modified">!             } else {</span>
<span class="line-modified">!                 Assert.check(e.prevSibling != null, e.sym);</span>
<span class="line-modified">!                 e.prevSibling.nextSibling = e.nextSibling;</span>
<span class="line-modified">!                 if (e.nextSibling != null)</span>
<span class="line-modified">!                     e.nextSibling.prevSibling = e.prevSibling;</span>
              }
  
              removeCount++;
  
              //notify listeners
</pre>
<hr />
<pre>
<span class="line-old-header">*** 595,11 ***</span>
                      return doNext();
                  }
                  private Symbol doNext() {
                      Symbol sym = (currEntry == null ? null : currEntry.sym);
                      if (currEntry != null) {
<span class="line-modified">!                         currEntry = currEntry.sibling;</span>
                      }
                      update();
                      return sym;
                  }
  
<span class="line-new-header">--- 595,11 ---</span>
                      return doNext();
                  }
                  private Symbol doNext() {
                      Symbol sym = (currEntry == null ? null : currEntry.sym);
                      if (currEntry != null) {
<span class="line-modified">!                         currEntry = currEntry.nextSibling;</span>
                      }
                      update();
                      return sym;
                  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 615,11 ***</span>
                      }
                  }
  
                  void skipToNextMatchingEntry() {
                      while (currEntry != null &amp;&amp; sf != null &amp;&amp; !sf.accepts(currEntry.sym)) {
<span class="line-modified">!                         currEntry = currEntry.sibling;</span>
                      }
                  }
              };
          }
  
<span class="line-new-header">--- 615,11 ---</span>
                      }
                  }
  
                  void skipToNextMatchingEntry() {
                      while (currEntry != null &amp;&amp; sf != null &amp;&amp; !sf.accepts(currEntry.sym)) {
<span class="line-modified">!                         currEntry = currEntry.nextSibling;</span>
                      }
                  }
              };
          }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 675,11 ***</span>
          public String toString() {
              StringBuilder result = new StringBuilder();
              result.append(&quot;Scope[&quot;);
              for (ScopeImpl s = this; s != null ; s = s.next) {
                  if (s != this) result.append(&quot; | &quot;);
<span class="line-modified">!                 for (Entry e = s.elems; e != null; e = e.sibling) {</span>
                      if (e != s.elems) result.append(&quot;, &quot;);
                      result.append(e.sym);
                  }
              }
              result.append(&quot;]&quot;);
<span class="line-new-header">--- 675,11 ---</span>
          public String toString() {
              StringBuilder result = new StringBuilder();
              result.append(&quot;Scope[&quot;);
              for (ScopeImpl s = this; s != null ; s = s.next) {
                  if (s != this) result.append(&quot; | &quot;);
<span class="line-modified">!                 for (Entry e = s.elems; e != null; e = e.nextSibling) {</span>
                      if (e != s.elems) result.append(&quot;, &quot;);
                      result.append(e.sym);
                  }
              }
              result.append(&quot;]&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 700,22 ***</span>
           */
          private Entry shadowed;
  
          /** Next entry in same scope.
           */
<span class="line-modified">!         public Entry sibling;</span>
  
          /** The entry&#39;s scope.
           *  scope == null   iff   this == sentinel
           */
          public ScopeImpl scope;
  
<span class="line-modified">!         public Entry(Symbol sym, Entry shadowed, Entry sibling, ScopeImpl scope) {</span>
              this.sym = sym;
              this.shadowed = shadowed;
<span class="line-modified">!             this.sibling = sibling;</span>
              this.scope = scope;
          }
  
          /** Return next entry with the same name as this entry, proceeding
           *  outwards if not found in this scope.
           */
<span class="line-new-header">--- 700,28 ---</span>
           */
          private Entry shadowed;
  
          /** Next entry in same scope.
           */
<span class="line-modified">!         public Entry nextSibling;</span>
<span class="line-added">+ </span>
<span class="line-added">+         /** Prev entry in same scope.</span>
<span class="line-added">+          */</span>
<span class="line-added">+         public Entry prevSibling;</span>
  
          /** The entry&#39;s scope.
           *  scope == null   iff   this == sentinel
           */
          public ScopeImpl scope;
  
<span class="line-modified">!         public Entry(Symbol sym, Entry shadowed, Entry nextSibling, ScopeImpl scope) {</span>
              this.sym = sym;
              this.shadowed = shadowed;
<span class="line-modified">!             this.nextSibling = nextSibling;</span>
              this.scope = scope;
<span class="line-added">+             if (nextSibling != null)</span>
<span class="line-added">+                 nextSibling.prevSibling = this;</span>
          }
  
          /** Return next entry with the same name as this entry, proceeding
           *  outwards if not found in this scope.
           */
</pre>
<center><a href="Printer.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Source.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>