<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/jdk/internal/shellsupport/doc/JavadocFormatter.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../com/sun/tools/sjavac/server/PortFile.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../module-info.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/jdk/internal/shellsupport/doc/JavadocFormatter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
496                         result.append(&quot;-&quot;);
497                     }
498 
499                     result.append(&quot;\n&quot;);
500 
501                     reflownTo = result.length();
502                     break;
503                 case TD:
504                 case TH:
505                     break;
506                 default:
507                     addSpaceIfNeeded(result);
508                     break;
509             }
510         }
511 
512         @Override @DefinedBy(Api.COMPILER_TREE)
513         public Object visitEntity(EntityTree node, Object p) {
514             String name = node.getName().toString();
515             int code = -1;

516             if (name.startsWith(&quot;#&quot;)) {
517                 try {
518                     int v = StringUtils.toLowerCase(name).startsWith(&quot;#x&quot;)
519                             ? Integer.parseInt(name.substring(2), 16)
520                             : Integer.parseInt(name.substring(1), 10);
521                     if (Entity.isValid(v)) {
522                         code = v;
523                     }
524                 } catch (NumberFormatException ex) {
525                     //ignore
526                 }
527             } else {
<span class="line-modified">528                 Entity entity = Entity.get(name);</span>
<span class="line-removed">529                 if (entity != null) {</span>
<span class="line-removed">530                     code = entity.code;</span>
<span class="line-removed">531                 }</span>
532             }
533             if (code != (-1)) {
534                 result.appendCodePoint(code);


535             } else {
536                 result.append(node.toString());
537             }
538             return super.visitEntity(node, p);
539         }
540 
541         private DocTree lastNode;
542 
543         @Override @DefinedBy(Api.COMPILER_TREE)
544         public Object scan(DocTree node, Object p) {
545             if (node instanceof InlineTagTree) {
546                 addSpaceIfNeeded(result);
547             }
548             try {
549                 return super.scan(node, p);
550             } finally {
551                 if (node instanceof InlineTagTree) {
552                     addSpaceIfNeeded(result);
553                 }
554                 lastNode = node;
</pre>
</td>
<td>
<hr />
<pre>
496                         result.append(&quot;-&quot;);
497                     }
498 
499                     result.append(&quot;\n&quot;);
500 
501                     reflownTo = result.length();
502                     break;
503                 case TD:
504                 case TH:
505                     break;
506                 default:
507                     addSpaceIfNeeded(result);
508                     break;
509             }
510         }
511 
512         @Override @DefinedBy(Api.COMPILER_TREE)
513         public Object visitEntity(EntityTree node, Object p) {
514             String name = node.getName().toString();
515             int code = -1;
<span class="line-added">516             String value = null;</span>
517             if (name.startsWith(&quot;#&quot;)) {
518                 try {
519                     int v = StringUtils.toLowerCase(name).startsWith(&quot;#x&quot;)
520                             ? Integer.parseInt(name.substring(2), 16)
521                             : Integer.parseInt(name.substring(1), 10);
522                     if (Entity.isValid(v)) {
523                         code = v;
524                     }
525                 } catch (NumberFormatException ex) {
526                     //ignore
527                 }
528             } else {
<span class="line-modified">529                 value = Entity.getValue(name);</span>



530             }
531             if (code != (-1)) {
532                 result.appendCodePoint(code);
<span class="line-added">533             } else if (value != null) {</span>
<span class="line-added">534                 result.append(value);</span>
535             } else {
536                 result.append(node.toString());
537             }
538             return super.visitEntity(node, p);
539         }
540 
541         private DocTree lastNode;
542 
543         @Override @DefinedBy(Api.COMPILER_TREE)
544         public Object scan(DocTree node, Object p) {
545             if (node instanceof InlineTagTree) {
546                 addSpaceIfNeeded(result);
547             }
548             try {
549                 return super.scan(node, p);
550             } finally {
551                 if (node instanceof InlineTagTree) {
552                     addSpaceIfNeeded(result);
553                 }
554                 lastNode = node;
</pre>
</td>
</tr>
</table>
<center><a href="../../../../com/sun/tools/sjavac/server/PortFile.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../module-info.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>