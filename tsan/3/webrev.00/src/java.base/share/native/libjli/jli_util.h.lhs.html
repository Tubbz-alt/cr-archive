<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.base/share/native/libjli/jli_util.h</title>
    <link rel="stylesheet" href="../../../../../style.css" />
    <script type="text/javascript" src="../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 #ifndef _JLI_UTIL_H
 27 #define _JLI_UTIL_H
 28 
 29 #include &lt;stdlib.h&gt;
 30 #include &lt;string.h&gt;
 31 #include &lt;stdio.h&gt;
 32 
 33 #ifndef NO_JNI
 34   #include &lt;jni.h&gt;
 35 #else
 36   #define jboolean int
 37   #define JNI_TRUE  1
 38   #define JNI_FALSE 0
 39 #endif
 40 
 41 #define JLDEBUG_ENV_ENTRY &quot;_JAVA_LAUNCHER_DEBUG&quot;
 42 
 43 JNIEXPORT void * JNICALL
 44 JLI_MemAlloc(size_t size);
 45 
 46 void *JLI_MemRealloc(void *ptr, size_t size);
 47 
 48 JNIEXPORT char * JNICALL
 49 JLI_StringDup(const char *s1);
 50 
 51 JNIEXPORT void JNICALL
 52 JLI_MemFree(void *ptr);
 53 
 54 int   JLI_StrCCmp(const char *s1, const char *s2);
 55 jboolean   JLI_HasSuffix(const char *s1, const char *s2);
 56 
 57 typedef struct {
 58     char *arg;
 59     jboolean has_wildcard;
 60 } StdArg;
 61 
 62 JNIEXPORT StdArg * JNICALL
 63 JLI_GetStdArgs();
 64 
 65 JNIEXPORT int JNICALL
 66 JLI_GetStdArgc();
 67 
 68 JNIEXPORT int JNICALL
 69 JLI_GetAppArgIndex();
 70 
 71 #define JLI_StrLen(p1)          strlen((p1))
 72 #define JLI_StrChr(p1, p2)      strchr((p1), (p2))
 73 #define JLI_StrRChr(p1, p2)     strrchr((p1), (p2))
 74 #define JLI_StrCmp(p1, p2)      strcmp((p1), (p2))
 75 #define JLI_StrNCmp(p1, p2, p3) strncmp((p1), (p2), (p3))
 76 #define JLI_StrCat(p1, p2)      strcat((p1), (p2))
 77 #define JLI_StrCpy(p1, p2)      strcpy((p1), (p2))
 78 #define JLI_StrNCpy(p1, p2, p3) strncpy((p1), (p2), (p3))
 79 #define JLI_StrStr(p1, p2)      strstr((p1), (p2))
 80 #define JLI_StrSpn(p1, p2)      strspn((p1), (p2))
 81 #define JLI_StrCSpn(p1, p2)     strcspn((p1), (p2))
 82 #define JLI_StrPBrk(p1, p2)     strpbrk((p1), (p2))
<a name="1" id="anc1"></a><span class="line-removed"> 83 #define JLI_StrTok(p1, p2)      strtok((p1), (p2))</span>
 84 
 85 /* On Windows lseek() is in io.h rather than the location dictated by POSIX. */
 86 #ifdef _WIN32
 87 #include &lt;windows.h&gt;
 88 #include &lt;io.h&gt;
 89 #include &lt;process.h&gt;
 90 #define JLI_StrCaseCmp(p1, p2)          stricmp((p1), (p2))
 91 #define JLI_StrNCaseCmp(p1, p2, p3)     strnicmp((p1), (p2), (p3))
 92 int JLI_Snprintf(char *buffer, size_t size, const char *format, ...);
 93 int JLI_Open(const char* name, int flags);
 94 JNIEXPORT void JNICALL
 95 JLI_CmdToArgs(char *cmdline);
 96 #define JLI_Lseek                       _lseeki64
 97 #define JLI_PutEnv                      _putenv
 98 #define JLI_GetPid                      _getpid
 99 #else  /* NIXES */
100 #include &lt;unistd.h&gt;
101 #include &lt;strings.h&gt;
102 #define JLI_StrCaseCmp(p1, p2)          strcasecmp((p1), (p2))
103 #define JLI_StrNCaseCmp(p1, p2, p3)     strncasecmp((p1), (p2), (p3))
104 #define JLI_Snprintf                    snprintf
105 #define JLI_Open                        open
106 #define JLI_PutEnv                      putenv
107 #define JLI_GetPid                      getpid
108 #ifdef __solaris__
109 #define JLI_Lseek                       llseek
110 #endif
111 #ifdef __linux__
112 #define _LARGFILE64_SOURCE
113 #define JLI_Lseek                       lseek64
114 #endif
115 #ifdef MACOSX
116 #define JLI_Lseek                       lseek
117 #endif
118 #ifdef _AIX
119 #define JLI_Lseek                       lseek
120 #endif
121 #endif /* _WIN32 */
122 
123 /*
124  * Make launcher spit debug output.
125  */
126 void     JLI_TraceLauncher(const char* fmt, ...);
127 
128 JNIEXPORT void JNICALL
129 JLI_SetTraceLauncher();
130 
131 jboolean JLI_IsTraceLauncher();
132 
133 /*
134  * JLI_List - a dynamic list of char*
135  */
136 struct JLI_List_
137 {
138     char **elements;
139     size_t size;
140     size_t capacity;
141 };
142 typedef struct JLI_List_ *JLI_List;
143 
144 JNIEXPORT JLI_List JNICALL
145 JLI_List_new(size_t capacity);
146 
147 void JLI_List_free(JLI_List l);
148 void JLI_List_ensureCapacity(JLI_List l, size_t capacity);
149 
150 /* e must be JLI_MemFree-able */
151 JNIEXPORT void JNICALL
152 JLI_List_add(JLI_List l, char *e);
153 
154 /* a copy is made out of beg */
155 void JLI_List_addSubstring(JLI_List l, const char *beg, size_t len);
156 char *JLI_List_combine(JLI_List sl);
157 char *JLI_List_join(JLI_List l, char sep);
158 JLI_List JLI_List_split(const char *str, char sep);
159 
160 JNIEXPORT void JNICALL
161 JLI_InitArgProcessing(jboolean hasJavaArgs, jboolean disableArgFile);
162 
163 JNIEXPORT JLI_List JNICALL
164 JLI_PreprocessArg(const char *arg, jboolean expandSourceOpt);
165 
166 JNIEXPORT jboolean JNICALL
167 JLI_AddArgsFromEnvVar(JLI_List args, const char *var_name);
168 
169 #endif  /* _JLI_UTIL_H */
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>