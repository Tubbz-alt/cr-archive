<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/native/libjava/Thread.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="System.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="VM.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/native/libjava/Thread.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 1 /*
<span class="line-modified"> 2  * Copyright (c) 1994, 2012, Oracle and/or its affiliates. All rights reserved.</span>
 3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4  *
 5  * This code is free software; you can redistribute it and/or modify it
 6  * under the terms of the GNU General Public License version 2 only, as
 7  * published by the Free Software Foundation.  Oracle designates this
 8  * particular file as subject to the &quot;Classpath&quot; exception as provided
 9  * by Oracle in the LICENSE file that accompanied this code.
10  *
11  * This code is distributed in the hope that it will be useful, but WITHOUT
12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
14  * version 2 for more details (a copy is included in the LICENSE file that
15  * accompanied this code).
16  *
17  * You should have received a copy of the GNU General Public License version
18  * 2 along with this work; if not, write to the Free Software Foundation,
19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
20  *
21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
33 
34 #include &quot;java_lang_Thread.h&quot;
35 
36 #define THD &quot;Ljava/lang/Thread;&quot;
37 #define OBJ &quot;Ljava/lang/Object;&quot;
38 #define STE &quot;Ljava/lang/StackTraceElement;&quot;
39 #define STR &quot;Ljava/lang/String;&quot;
40 
41 #define ARRAY_LENGTH(a) (sizeof(a)/sizeof(a[0]))
42 
43 static JNINativeMethod methods[] = {
44     {&quot;start0&quot;,           &quot;()V&quot;,        (void *)&amp;JVM_StartThread},
45     {&quot;stop0&quot;,            &quot;(&quot; OBJ &quot;)V&quot;, (void *)&amp;JVM_StopThread},
46     {&quot;isAlive&quot;,          &quot;()Z&quot;,        (void *)&amp;JVM_IsThreadAlive},
47     {&quot;suspend0&quot;,         &quot;()V&quot;,        (void *)&amp;JVM_SuspendThread},
48     {&quot;resume0&quot;,          &quot;()V&quot;,        (void *)&amp;JVM_ResumeThread},
49     {&quot;setPriority0&quot;,     &quot;(I)V&quot;,       (void *)&amp;JVM_SetThreadPriority},
50     {&quot;yield&quot;,            &quot;()V&quot;,        (void *)&amp;JVM_Yield},
51     {&quot;sleep&quot;,            &quot;(J)V&quot;,       (void *)&amp;JVM_Sleep},
52     {&quot;currentThread&quot;,    &quot;()&quot; THD,     (void *)&amp;JVM_CurrentThread},
<span class="line-removed">53     {&quot;countStackFrames&quot;, &quot;()I&quot;,        (void *)&amp;JVM_CountStackFrames},</span>
54     {&quot;interrupt0&quot;,       &quot;()V&quot;,        (void *)&amp;JVM_Interrupt},
<span class="line-removed">55     {&quot;isInterrupted&quot;,    &quot;(Z)Z&quot;,       (void *)&amp;JVM_IsInterrupted},</span>
56     {&quot;holdsLock&quot;,        &quot;(&quot; OBJ &quot;)Z&quot;, (void *)&amp;JVM_HoldsLock},
57     {&quot;getThreads&quot;,        &quot;()[&quot; THD,   (void *)&amp;JVM_GetAllThreads},
58     {&quot;dumpThreads&quot;,      &quot;([&quot; THD &quot;)[[&quot; STE, (void *)&amp;JVM_DumpThreads},
59     {&quot;setNativeName&quot;,    &quot;(&quot; STR &quot;)V&quot;, (void *)&amp;JVM_SetNativeThreadName},
60 };
61 
62 #undef THD
63 #undef OBJ
64 #undef STE
65 #undef STR
66 
67 JNIEXPORT void JNICALL
68 Java_java_lang_Thread_registerNatives(JNIEnv *env, jclass cls)
69 {
70     (*env)-&gt;RegisterNatives(env, cls, methods, ARRAY_LENGTH(methods));
71 }









</pre>
</td>
<td>
<hr />
<pre>
 1 /*
<span class="line-modified"> 2  * Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
 3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4  *
 5  * This code is free software; you can redistribute it and/or modify it
 6  * under the terms of the GNU General Public License version 2 only, as
 7  * published by the Free Software Foundation.  Oracle designates this
 8  * particular file as subject to the &quot;Classpath&quot; exception as provided
 9  * by Oracle in the LICENSE file that accompanied this code.
10  *
11  * This code is distributed in the hope that it will be useful, but WITHOUT
12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
14  * version 2 for more details (a copy is included in the LICENSE file that
15  * accompanied this code).
16  *
17  * You should have received a copy of the GNU General Public License version
18  * 2 along with this work; if not, write to the Free Software Foundation,
19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
20  *
21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
33 
34 #include &quot;java_lang_Thread.h&quot;
35 
36 #define THD &quot;Ljava/lang/Thread;&quot;
37 #define OBJ &quot;Ljava/lang/Object;&quot;
38 #define STE &quot;Ljava/lang/StackTraceElement;&quot;
39 #define STR &quot;Ljava/lang/String;&quot;
40 
41 #define ARRAY_LENGTH(a) (sizeof(a)/sizeof(a[0]))
42 
43 static JNINativeMethod methods[] = {
44     {&quot;start0&quot;,           &quot;()V&quot;,        (void *)&amp;JVM_StartThread},
45     {&quot;stop0&quot;,            &quot;(&quot; OBJ &quot;)V&quot;, (void *)&amp;JVM_StopThread},
46     {&quot;isAlive&quot;,          &quot;()Z&quot;,        (void *)&amp;JVM_IsThreadAlive},
47     {&quot;suspend0&quot;,         &quot;()V&quot;,        (void *)&amp;JVM_SuspendThread},
48     {&quot;resume0&quot;,          &quot;()V&quot;,        (void *)&amp;JVM_ResumeThread},
49     {&quot;setPriority0&quot;,     &quot;(I)V&quot;,       (void *)&amp;JVM_SetThreadPriority},
50     {&quot;yield&quot;,            &quot;()V&quot;,        (void *)&amp;JVM_Yield},
51     {&quot;sleep&quot;,            &quot;(J)V&quot;,       (void *)&amp;JVM_Sleep},
52     {&quot;currentThread&quot;,    &quot;()&quot; THD,     (void *)&amp;JVM_CurrentThread},

53     {&quot;interrupt0&quot;,       &quot;()V&quot;,        (void *)&amp;JVM_Interrupt},

54     {&quot;holdsLock&quot;,        &quot;(&quot; OBJ &quot;)Z&quot;, (void *)&amp;JVM_HoldsLock},
55     {&quot;getThreads&quot;,        &quot;()[&quot; THD,   (void *)&amp;JVM_GetAllThreads},
56     {&quot;dumpThreads&quot;,      &quot;([&quot; THD &quot;)[[&quot; STE, (void *)&amp;JVM_DumpThreads},
57     {&quot;setNativeName&quot;,    &quot;(&quot; STR &quot;)V&quot;, (void *)&amp;JVM_SetNativeThreadName},
58 };
59 
60 #undef THD
61 #undef OBJ
62 #undef STE
63 #undef STR
64 
65 JNIEXPORT void JNICALL
66 Java_java_lang_Thread_registerNatives(JNIEnv *env, jclass cls)
67 {
68     (*env)-&gt;RegisterNatives(env, cls, methods, ARRAY_LENGTH(methods));
69 }
<span class="line-added">70 </span>
<span class="line-added">71 JNIEXPORT void JNICALL</span>
<span class="line-added">72 Java_java_lang_Thread_clearInterruptEvent(JNIEnv *env, jclass cls)</span>
<span class="line-added">73 {</span>
<span class="line-added">74 #if defined(_WIN32)</span>
<span class="line-added">75     // Need to reset the interrupt event used by Process.waitFor</span>
<span class="line-added">76     ResetEvent((HANDLE) JVM_GetThreadInterruptEvent());</span>
<span class="line-added">77 #endif</span>
<span class="line-added">78 }</span>
</pre>
</td>
</tr>
</table>
<center><a href="System.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="VM.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>