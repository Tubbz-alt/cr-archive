<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/native/libjava/Class.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../libfdlibm/fdlibm.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ClassLoader.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/native/libjava/Class.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -33,10 +33,11 @@</span>
  #include &lt;stdlib.h&gt;
  
  #include &quot;jni.h&quot;
  #include &quot;jni_util.h&quot;
  #include &quot;jvm.h&quot;
<span class="udiff-line-added">+ #include &quot;check_classname.h&quot;</span>
  #include &quot;java_lang_Class.h&quot;
  
  /* defined in libverify.so/verify.dll (src file common/check_format.c) */
  extern jboolean VerifyClassname(char *utf_name, jboolean arrayAllowed);
  extern jboolean VerifyFixClassname(char *utf_name);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -48,10 +49,11 @@</span>
  #define FLD &quot;Ljava/lang/reflect/Field;&quot;
  #define MHD &quot;Ljava/lang/reflect/Method;&quot;
  #define CTR &quot;Ljava/lang/reflect/Constructor;&quot;
  #define PD  &quot;Ljava/security/ProtectionDomain;&quot;
  #define BA  &quot;[B&quot;
<span class="udiff-line-added">+ #define RC  &quot;Ljava/lang/reflect/RecordComponent;&quot;</span>
  
  static JNINativeMethod methods[] = {
      {&quot;initClassName&quot;,    &quot;()&quot; STR,          (void *)&amp;JVM_InitClassName},
      {&quot;getSuperclass&quot;,    &quot;()&quot; CLS,          NULL},
      {&quot;getInterfaces0&quot;,   &quot;()[&quot; CLS,         (void *)&amp;JVM_GetClassInterfaces},
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -74,10 +76,12 @@</span>
      {&quot;desiredAssertionStatus0&quot;,&quot;(&quot;CLS&quot;)Z&quot;,  (void *)&amp;JVM_DesiredAssertionStatus},
      {&quot;getEnclosingMethod0&quot;, &quot;()[&quot; OBJ,      (void *)&amp;JVM_GetEnclosingMethodInfo},
      {&quot;getRawTypeAnnotations&quot;, &quot;()&quot; BA,      (void *)&amp;JVM_GetClassTypeAnnotations},
      {&quot;getNestHost0&quot;,         &quot;()&quot; CLS,      (void *)&amp;JVM_GetNestHost},
      {&quot;getNestMembers0&quot;,      &quot;()[&quot; CLS,     (void *)&amp;JVM_GetNestMembers},
<span class="udiff-line-added">+     {&quot;getRecordComponents0&quot;, &quot;()[&quot; RC,      (void *)&amp;JVM_GetRecordComponents},</span>
<span class="udiff-line-added">+     {&quot;isRecord0&quot;,            &quot;()Z&quot;,         (void *)&amp;JVM_IsRecord},</span>
  };
  
  #undef OBJ
  #undef CLS
  #undef STR
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -120,18 +124,18 @@</span>
      } else {
          clname = buf;
      }
      (*env)-&gt;GetStringUTFRegion(env, classname, 0, unicode_len, clname);
  
<span class="udiff-line-modified-removed">-     if (VerifyFixClassname(clname) == JNI_TRUE) {</span>
<span class="udiff-line-modified-added">+     if (verifyFixClassname(clname) == JNI_TRUE) {</span>
          /* slashes present in clname, use name b4 translation for exception */
          (*env)-&gt;GetStringUTFRegion(env, classname, 0, unicode_len, clname);
          JNU_ThrowClassNotFoundException(env, clname);
          goto done;
      }
  
<span class="udiff-line-modified-removed">-     if (!VerifyClassname(clname, JNI_TRUE)) {  /* expects slashed name */</span>
<span class="udiff-line-modified-added">+     if (!verifyClassname(clname, JNI_TRUE)) {  /* expects slashed name */</span>
          JNU_ThrowClassNotFoundException(env, clname);
          goto done;
      }
  
      cls = JVM_FindClassFromCaller(env, clname, initialize, loader, caller);
</pre>
<center><a href="../libfdlibm/fdlibm.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ClassLoader.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>