<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/native/libjava/jni_util.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jdk_util.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jni_util.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/native/libjava/jni_util.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 74,82 ***</span>
  JNU_ThrowIllegalArgumentException(JNIEnv *env, const char *msg)
  {
      JNU_ThrowByName(env, &quot;java/lang/IllegalArgumentException&quot;, msg);
  }
  
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowIllegalAccessError(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/IllegalAccessError&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowIllegalAccessException(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/IllegalAccessException&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT void JNICALL
  JNU_ThrowInternalError(JNIEnv *env, const char *msg)
  {
      JNU_ThrowByName(env, &quot;java/lang/InternalError&quot;, msg);
  }
  
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowNoSuchFieldException(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/NoSuchFieldException&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowNoSuchMethodException(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/NoSuchMethodException&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT void JNICALL
  JNU_ThrowClassNotFoundException(JNIEnv *env, const char *msg)
  {
      JNU_ThrowByName(env, &quot;java/lang/ClassNotFoundException&quot;, msg);
  }
  
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowNumberFormatException(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/NumberFormatException&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT void JNICALL
  JNU_ThrowIOException(JNIEnv *env, const char *msg)
  {
      JNU_ThrowByName(env, &quot;java/io/IOException&quot;, msg);
  }
  
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowNoSuchFieldError(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/NoSuchFieldError&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowNoSuchMethodError(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/NoSuchMethodError&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowStringIndexOutOfBoundsException(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/StringIndexOutOfBoundsException&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_ThrowInstantiationException(JNIEnv *env, const char *msg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     JNU_ThrowByName(env, &quot;java/lang/InstantiationException&quot;, msg);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  /*
   * Throw an exception by name, using the string returned by
   * getLastErrorString for the detail string. If the last-error
   * string is NULL, use the given default detail string.
   */
<span class="line-new-header">--- 74,28 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 843,16 ***</span>
      CHECK_NULL(String_coder_ID);
      String_value_ID = (*env)-&gt;GetFieldID(env, strClazz, &quot;value&quot;, &quot;[B&quot;);
      CHECK_NULL(String_value_ID);
  }
  
<span class="line-removed">- JNIEXPORT jstring</span>
<span class="line-removed">- NewStringPlatform(JNIEnv *env, const char *str)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     return JNU_NewStringPlatform(env, str);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT jstring JNICALL
  JNU_NewStringPlatform(JNIEnv *env, const char *str)
  {
      if (fastEncoding == FAST_UTF_8)
          return newStringUTF8(env, str);
<span class="line-new-header">--- 789,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 992,24 ***</span>
  JNU_ReleaseStringPlatformChars(JNIEnv *env, jstring jstr, const char *str)
  {
      free((void *)str);
  }
  
<span class="line-removed">- /*</span>
<span class="line-removed">-  * Export the platform dependent path canonicalization so that</span>
<span class="line-removed">-  * VM can find it when loading system classes.</span>
<span class="line-removed">-  * This function is also used by the instrumentation agent.</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- extern int canonicalize(char *path, const char *out, int len);</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT int</span>
<span class="line-removed">- Canonicalize(JNIEnv *unused, char *orig, char *out, int len)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     /* canonicalize an already natived path */</span>
<span class="line-removed">-     return canonicalize(orig, out, len);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT jclass JNICALL
  JNU_ClassString(JNIEnv *env)
  {
      static jclass cls = 0;
      if (cls == 0) {
<span class="line-new-header">--- 932,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1022,58 ***</span>
          (*env)-&gt;DeleteLocalRef(env, c);
      }
      return cls;
  }
  
<span class="line-removed">- JNIEXPORT jclass JNICALL</span>
<span class="line-removed">- JNU_ClassClass(JNIEnv *env)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     static jclass cls = 0;</span>
<span class="line-removed">-     if (cls == 0) {</span>
<span class="line-removed">-         jclass c;</span>
<span class="line-removed">-         if ((*env)-&gt;EnsureLocalCapacity(env, 1) &lt; 0)</span>
<span class="line-removed">-             return 0;</span>
<span class="line-removed">-         c = (*env)-&gt;FindClass(env, &quot;java/lang/Class&quot;);</span>
<span class="line-removed">-         CHECK_NULL_RETURN(c, NULL);</span>
<span class="line-removed">-         cls = (*env)-&gt;NewGlobalRef(env, c);</span>
<span class="line-removed">-         (*env)-&gt;DeleteLocalRef(env, c);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     return cls;</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT jclass JNICALL</span>
<span class="line-removed">- JNU_ClassObject(JNIEnv *env)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     static jclass cls = 0;</span>
<span class="line-removed">-     if (cls == 0) {</span>
<span class="line-removed">-         jclass c;</span>
<span class="line-removed">-         if ((*env)-&gt;EnsureLocalCapacity(env, 1) &lt; 0)</span>
<span class="line-removed">-             return 0;</span>
<span class="line-removed">-         c = (*env)-&gt;FindClass(env, &quot;java/lang/Object&quot;);</span>
<span class="line-removed">-         CHECK_NULL_RETURN(c, NULL);</span>
<span class="line-removed">-         cls = (*env)-&gt;NewGlobalRef(env, c);</span>
<span class="line-removed">-         (*env)-&gt;DeleteLocalRef(env, c);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     return cls;</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT jclass JNICALL</span>
<span class="line-removed">- JNU_ClassThrowable(JNIEnv *env)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     static jclass cls = 0;</span>
<span class="line-removed">-     if (cls == 0) {</span>
<span class="line-removed">-         jclass c;</span>
<span class="line-removed">-         if ((*env)-&gt;EnsureLocalCapacity(env, 1) &lt; 0)</span>
<span class="line-removed">-             return 0;</span>
<span class="line-removed">-         c = (*env)-&gt;FindClass(env, &quot;java/lang/Throwable&quot;);</span>
<span class="line-removed">-         CHECK_NULL_RETURN(c, NULL);</span>
<span class="line-removed">-         cls = (*env)-&gt;NewGlobalRef(env, c);</span>
<span class="line-removed">-         (*env)-&gt;DeleteLocalRef(env, c);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     return cls;</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT jint JNICALL
  JNU_CopyObjectArray(JNIEnv *env, jobjectArray dst, jobjectArray src,
                           jint count)
  {
      int i;
<span class="line-new-header">--- 948,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1094,11 ***</span>
      (*vm)-&gt;GetEnv(vm, &amp;env, version);
      return env;
  }
  
  JNIEXPORT jint JNICALL
<span class="line-modified">! JNU_IsInstanceOfByName(JNIEnv *env, jobject object, char* classname)</span>
  {
      jclass cls;
      if ((*env)-&gt;EnsureLocalCapacity(env, 1) &lt; 0)
          return JNI_ERR;
      cls = (*env)-&gt;FindClass(env, classname);
<span class="line-new-header">--- 972,11 ---</span>
      (*vm)-&gt;GetEnv(vm, &amp;env, version);
      return env;
  }
  
  JNIEXPORT jint JNICALL
<span class="line-modified">! JNU_IsInstanceOfByName(JNIEnv *env, jobject object, const char* classname)</span>
  {
      jclass cls;
      if ((*env)-&gt;EnsureLocalCapacity(env, 1) &lt; 0)
          return JNI_ERR;
      cls = (*env)-&gt;FindClass(env, classname);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1108,129 ***</span>
          return result;
      }
      return JNI_ERR;
  }
  
<span class="line-removed">- JNIEXPORT jboolean JNICALL</span>
<span class="line-removed">- JNU_Equals(JNIEnv *env, jobject object1, jobject object2)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     static jmethodID mid = NULL;</span>
<span class="line-removed">-     if (mid == NULL) {</span>
<span class="line-removed">-         jclass objClazz = JNU_ClassObject(env);</span>
<span class="line-removed">-         CHECK_NULL_RETURN(objClazz, JNI_FALSE);</span>
<span class="line-removed">-         mid = (*env)-&gt;GetMethodID(env, objClazz, &quot;equals&quot;,</span>
<span class="line-removed">-                                   &quot;(Ljava/lang/Object;)Z&quot;);</span>
<span class="line-removed">-         CHECK_NULL_RETURN(mid, JNI_FALSE);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     return (*env)-&gt;CallBooleanMethod(env, object1, mid, object2);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- </span>
<span class="line-removed">- /************************************************************************</span>
<span class="line-removed">-  * Thread calls</span>
<span class="line-removed">-  */</span>
<span class="line-removed">- </span>
<span class="line-removed">- static jmethodID Object_waitMID;</span>
<span class="line-removed">- static jmethodID Object_notifyMID;</span>
<span class="line-removed">- static jmethodID Object_notifyAllMID;</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_MonitorWait(JNIEnv *env, jobject object, jlong timeout)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     if (object == NULL) {</span>
<span class="line-removed">-         JNU_ThrowNullPointerException(env, &quot;JNU_MonitorWait argument&quot;);</span>
<span class="line-removed">-         return;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     if (Object_waitMID == NULL) {</span>
<span class="line-removed">-         jclass cls = JNU_ClassObject(env);</span>
<span class="line-removed">-         if (cls == NULL) {</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         Object_waitMID = (*env)-&gt;GetMethodID(env, cls, &quot;wait&quot;, &quot;(J)V&quot;);</span>
<span class="line-removed">-         if (Object_waitMID == NULL) {</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     (*env)-&gt;CallVoidMethod(env, object, Object_waitMID, timeout);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_Notify(JNIEnv *env, jobject object)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     if (object == NULL) {</span>
<span class="line-removed">-         JNU_ThrowNullPointerException(env, &quot;JNU_Notify argument&quot;);</span>
<span class="line-removed">-         return;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     if (Object_notifyMID == NULL) {</span>
<span class="line-removed">-         jclass cls = JNU_ClassObject(env);</span>
<span class="line-removed">-         if (cls == NULL) {</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         Object_notifyMID = (*env)-&gt;GetMethodID(env, cls, &quot;notify&quot;, &quot;()V&quot;);</span>
<span class="line-removed">-         if (Object_notifyMID == NULL) {</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     (*env)-&gt;CallVoidMethod(env, object, Object_notifyMID);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_NotifyAll(JNIEnv *env, jobject object)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     if (object == NULL) {</span>
<span class="line-removed">-         JNU_ThrowNullPointerException(env, &quot;JNU_NotifyAll argument&quot;);</span>
<span class="line-removed">-         return;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     if (Object_notifyAllMID == NULL) {</span>
<span class="line-removed">-         jclass cls = JNU_ClassObject(env);</span>
<span class="line-removed">-         if (cls == NULL) {</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         Object_notifyAllMID = (*env)-&gt;GetMethodID(env, cls,&quot;notifyAll&quot;, &quot;()V&quot;);</span>
<span class="line-removed">-         if (Object_notifyAllMID == NULL) {</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     (*env)-&gt;CallVoidMethod(env, object, Object_notifyAllMID);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- </span>
  /************************************************************************
   * Debugging utilities
   */
  
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_PrintString(JNIEnv *env, char *hdr, jstring string)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     if (string == NULL) {</span>
<span class="line-removed">-         fprintf(stderr, &quot;%s: is NULL\n&quot;, hdr);</span>
<span class="line-removed">-     } else {</span>
<span class="line-removed">-         const char *stringPtr = JNU_GetStringPlatformChars(env, string, 0);</span>
<span class="line-removed">-         if (stringPtr == 0)</span>
<span class="line-removed">-             return;</span>
<span class="line-removed">-         fprintf(stderr, &quot;%s: %s\n&quot;, hdr, stringPtr);</span>
<span class="line-removed">-         JNU_ReleaseStringPlatformChars(env, string, stringPtr);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_PrintClass(JNIEnv *env, char* hdr, jobject object)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     if (object == NULL) {</span>
<span class="line-removed">-         fprintf(stderr, &quot;%s: object is NULL\n&quot;, hdr);</span>
<span class="line-removed">-         return;</span>
<span class="line-removed">-     } else {</span>
<span class="line-removed">-         jclass cls = (*env)-&gt;GetObjectClass(env, object);</span>
<span class="line-removed">-         jstring clsName = JNU_ToString(env, cls);</span>
<span class="line-removed">-         if (clsName == NULL) {</span>
<span class="line-removed">-             JNU_PrintString(env, hdr, clsName);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         (*env)-&gt;DeleteLocalRef(env, cls);</span>
<span class="line-removed">-         (*env)-&gt;DeleteLocalRef(env, clsName);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  JNIEXPORT jstring JNICALL
  JNU_ToString(JNIEnv *env, jobject object)
  {
      if (object == NULL) {
          return (*env)-&gt;NewStringUTF(env, &quot;NULL&quot;);
<span class="line-new-header">--- 986,14 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1435,72 ***</span>
      if (hasException) {
          *hasException = (*env)-&gt;ExceptionCheck(env);
      }
      return result;
  }
<span class="line-removed">- </span>
<span class="line-removed">- JNIEXPORT void JNICALL</span>
<span class="line-removed">- JNU_SetStaticFieldByName(JNIEnv *env,</span>
<span class="line-removed">-                          jboolean *hasException,</span>
<span class="line-removed">-                          const char *classname,</span>
<span class="line-removed">-                          const char *name,</span>
<span class="line-removed">-                          const char *signature,</span>
<span class="line-removed">-                          ...)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-     jclass cls;</span>
<span class="line-removed">-     jfieldID fid;</span>
<span class="line-removed">-     va_list args;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     if ((*env)-&gt;EnsureLocalCapacity(env, 3) &lt; 0)</span>
<span class="line-removed">-         goto done2;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     cls = (*env)-&gt;FindClass(env, classname);</span>
<span class="line-removed">-     if (cls == 0)</span>
<span class="line-removed">-         goto done2;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     fid = (*env)-&gt;GetStaticFieldID(env, cls, name, signature);</span>
<span class="line-removed">-     if (fid == 0)</span>
<span class="line-removed">-         goto done1;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     va_start(args, signature);</span>
<span class="line-removed">-     switch (*signature) {</span>
<span class="line-removed">-     case &#39;[&#39;:</span>
<span class="line-removed">-     case &#39;L&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticObjectField(env, cls, fid, va_arg(args, jobject));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;Z&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticBooleanField(env, cls, fid, (jboolean)va_arg(args, int));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;B&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticByteField(env, cls, fid, (jbyte)va_arg(args, int));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;C&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticCharField(env, cls, fid, (jchar)va_arg(args, int));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;S&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticShortField(env, cls, fid, (jshort)va_arg(args, int));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;I&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticIntField(env, cls, fid, va_arg(args, jint));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;J&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticLongField(env, cls, fid, va_arg(args, jlong));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;F&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticFloatField(env, cls, fid, (jfloat)va_arg(args, jdouble));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">-     case &#39;D&#39;:</span>
<span class="line-removed">-         (*env)-&gt;SetStaticDoubleField(env, cls, fid, va_arg(args, jdouble));</span>
<span class="line-removed">-         break;</span>
<span class="line-removed">- </span>
<span class="line-removed">-     default:</span>
<span class="line-removed">-         (*env)-&gt;FatalError(env, &quot;JNU_SetStaticFieldByName: illegal signature&quot;);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">-     va_end(args);</span>
<span class="line-removed">- </span>
<span class="line-removed">-  done1:</span>
<span class="line-removed">-     (*env)-&gt;DeleteLocalRef(env, cls);</span>
<span class="line-removed">-  done2:</span>
<span class="line-removed">-     if (hasException) {</span>
<span class="line-removed">-         *hasException = (*env)-&gt;ExceptionCheck(env);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- }</span>
<span class="line-new-header">--- 1198,5 ---</span>
</pre>
<center><a href="jdk_util.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jni_util.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>