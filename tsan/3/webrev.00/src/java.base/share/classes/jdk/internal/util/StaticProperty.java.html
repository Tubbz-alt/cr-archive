<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/java.base/share/classes/jdk/internal/util/StaticProperty.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.internal.util;
 27 
 28 import java.util.Properties;
 29 
 30 /**
 31  * System Property access for internal use only.
 32  * Read-only access to System property values initialized during Phase 1
 33  * are cached.  Setting, clearing, or modifying the value using
 34  * {@link System#setProperty) or {@link System#getProperties()} is ignored.
 35  * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
 36  * in these access methods. The caller of these methods should take care to ensure
 37  * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
 38  */
 39 public final class StaticProperty {
 40 
 41     // The class static initialization is triggered to initialize these final
 42     // fields during init Phase 1 and before a security manager is set.
 43     private static final String JAVA_HOME;
 44     private static final String USER_HOME;
 45     private static final String USER_DIR;
 46     private static final String USER_NAME;
 47     private static final String JAVA_LIBRARY_PATH;
 48     private static final String SUN_BOOT_LIBRARY_PATH;
 49     private static final String JDK_SERIAL_FILTER;
 50 
 51     private StaticProperty() {}
 52 
 53     static {
 54         Properties props = System.getProperties();
 55         JAVA_HOME = getProperty(props, &quot;java.home&quot;);
 56         USER_HOME = getProperty(props, &quot;user.home&quot;);
 57         USER_DIR  = getProperty(props, &quot;user.dir&quot;);
 58         USER_NAME = getProperty(props, &quot;user.name&quot;);
 59         JAVA_LIBRARY_PATH = getProperty(props, &quot;java.library.path&quot;, &quot;&quot;);
 60         SUN_BOOT_LIBRARY_PATH = getProperty(props, &quot;sun.boot.library.path&quot;, &quot;&quot;);
 61         JDK_SERIAL_FILTER = getProperty(props, &quot;jdk.serialFilter&quot;, null);
 62     }
 63 
 64     private static String getProperty(Properties props, String key) {
 65         String v = props.getProperty(key);
 66         if (v == null) {
 67             throw new InternalError(&quot;null property: &quot; + key);
 68         }
 69         return v;
 70     }
 71 
 72     private static String getProperty(Properties props, String key,
 73                                       String defaultVal) {
 74         String v = props.getProperty(key);
 75         return (v == null) ? defaultVal : v;
 76     }
 77 
 78     /**
 79      * Return the {@code java.home} system property.
 80      *
 81      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
 82      * in this method. The caller of this method should take care to ensure
 83      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
 84      *
 85      * @return the {@code java.home} system property
 86      */
 87     public static String javaHome() {
 88         return JAVA_HOME;
 89     }
 90 
 91     /**
 92      * Return the {@code user.home} system property.
 93      *
 94      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
 95      * in this method. The caller of this method should take care to ensure
 96      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
 97      *
 98      * @return the {@code user.home} system property
 99      */
100     public static String userHome() {
101         return USER_HOME;
102     }
103 
104     /**
105      * Return the {@code user.dir} system property.
106      *
107      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
108      * in this method. The caller of this method should take care to ensure
109      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
110      *
111      * @return the {@code user.dir} system property
112      */
113     public static String userDir() {
114         return USER_DIR;
115     }
116 
117     /**
118      * Return the {@code user.name} system property.
119      *
120      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
121      * in this method. The caller of this method should take care to ensure
122      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
123      *
124      * @return the {@code user.name} system property
125      */
126     public static String userName() {
127         return USER_NAME;
128     }
129 
130     /**
131      * Return the {@code java.library.path} system property.
132      *
133      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
134      * in this method. The caller of this method should take care to ensure
135      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
136      *
137      * @return the {@code java.library.path} system property
138      */
139     public static String javaLibraryPath() {
140         return JAVA_LIBRARY_PATH;
141     }
142 
143     /**
144      * Return the {@code sun.boot.library.path} system property.
145      *
146      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
147      * in this method. The caller of this method should take care to ensure
148      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
149      *
150      * @return the {@code sun.boot.library.path} system property
151      */
152     public static String sunBootLibraryPath() {
153         return SUN_BOOT_LIBRARY_PATH;
154     }
155 
156 
157     /**
158      * Return the {@code jdk.serialFilter} system property.
159      *
160      * &lt;strong&gt;{@link SecurityManager#checkPropertyAccess} is NOT checked
161      * in this method. The caller of this method should take care to ensure
162      * that the returned property is not made accessible to untrusted code.&lt;/strong&gt;
163      *
164      * @return the {@code user.name} system property
165      */
166     public static String jdkSerialFilter() {
167         return JDK_SERIAL_FILTER;
168     }
169 }
    </pre>
  </body>
</html>