<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/jdk/internal/jrtfs/JrtFileSystemProvider.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../event/EventHelper.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JrtPath.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/jdk/internal/jrtfs/JrtFileSystemProvider.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
173                 }
174         );
175     }
176 
177     @Override
178     public Path getPath(URI uri) {
179         checkPermission();
180         if (!uri.getScheme().equalsIgnoreCase(getScheme())) {
181             throw new IllegalArgumentException(&quot;URI does not match this provider&quot;);
182         }
183         if (uri.getAuthority() != null) {
184             throw new IllegalArgumentException(&quot;Authority component present&quot;);
185         }
186         if (uri.getQuery() != null) {
187             throw new IllegalArgumentException(&quot;Query component present&quot;);
188         }
189         if (uri.getFragment() != null) {
190             throw new IllegalArgumentException(&quot;Fragment component present&quot;);
191         }
192         String path = uri.getPath();
<span class="line-modified">193         if (path == null || path.charAt(0) != &#39;/&#39;) {</span>
194             throw new IllegalArgumentException(&quot;Invalid path component&quot;);
195         }
<span class="line-modified">196         return getTheFileSystem().getPath(path);</span>

197     }
198 
199     private FileSystem getTheFileSystem() {
200         checkPermission();
201         FileSystem fs = this.theFileSystem;
202         if (fs == null) {
203             synchronized (this) {
204                 fs = this.theFileSystem;
205                 if (fs == null) {
206                     try {
207                         this.theFileSystem = fs = new JrtFileSystem(this, null);
208                     } catch (IOException ioe) {
209                         throw new InternalError(ioe);
210                     }
211                 }
212             }
213         }
214         return fs;
215     }
216 
</pre>
</td>
<td>
<hr />
<pre>
173                 }
174         );
175     }
176 
177     @Override
178     public Path getPath(URI uri) {
179         checkPermission();
180         if (!uri.getScheme().equalsIgnoreCase(getScheme())) {
181             throw new IllegalArgumentException(&quot;URI does not match this provider&quot;);
182         }
183         if (uri.getAuthority() != null) {
184             throw new IllegalArgumentException(&quot;Authority component present&quot;);
185         }
186         if (uri.getQuery() != null) {
187             throw new IllegalArgumentException(&quot;Query component present&quot;);
188         }
189         if (uri.getFragment() != null) {
190             throw new IllegalArgumentException(&quot;Fragment component present&quot;);
191         }
192         String path = uri.getPath();
<span class="line-modified">193         if (path == null || path.charAt(0) != &#39;/&#39; || path.contains(&quot;..&quot;)) {</span>
194             throw new IllegalArgumentException(&quot;Invalid path component&quot;);
195         }
<span class="line-modified">196 </span>
<span class="line-added">197         return getTheFileSystem().getPath(&quot;/modules&quot; + path);</span>
198     }
199 
200     private FileSystem getTheFileSystem() {
201         checkPermission();
202         FileSystem fs = this.theFileSystem;
203         if (fs == null) {
204             synchronized (this) {
205                 fs = this.theFileSystem;
206                 if (fs == null) {
207                     try {
208                         this.theFileSystem = fs = new JrtFileSystem(this, null);
209                     } catch (IOException ioe) {
210                         throw new InternalError(ioe);
211                     }
212                 }
213             }
214         }
215         return fs;
216     }
217 
</pre>
</td>
</tr>
</table>
<center><a href="../event/EventHelper.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JrtPath.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>