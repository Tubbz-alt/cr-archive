<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/javax/security/auth/Subject.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="RefreshFailedException.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="callback/ChoiceCallback.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/javax/security/auth/Subject.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1998, 2015, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 98,20 ***</span>
<span class="line-new-header">--- 98,22 ---</span>
   * @see java.security.Principal
   * @see java.security.DomainCombiner
   */
  public final class Subject implements java.io.Serializable {
  
<span class="line-added">+     @java.io.Serial</span>
      private static final long serialVersionUID = -8308522755600156056L;
  
      /**
       * A {@code Set} that provides a view of all of this
       * Subject&#39;s Principals
       *
       * @serial Each element in this set is a
       *          {@code java.security.Principal}.
       *          The set is a {@code Subject.SecureSet}.
       */
<span class="line-added">+     @SuppressWarnings(&quot;serial&quot;) // Not statically typed as Serializable</span>
      Set&lt;Principal&gt; principals;
  
      /**
       * Sets that provide a view of all of this
       * Subject&#39;s Credentials
</pre>
<hr />
<pre>
<span class="line-old-header">*** 944,10 ***</span>
<span class="line-new-header">--- 946,11 ---</span>
      }
  
      /**
       * Writes this object out to a stream (i.e., serializes it).
       */
<span class="line-added">+     @java.io.Serial</span>
      private void writeObject(java.io.ObjectOutputStream oos)
                  throws java.io.IOException {
          synchronized(principals) {
              oos.defaultWriteObject();
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 955,10 ***</span>
<span class="line-new-header">--- 958,11 ---</span>
  
      /**
       * Reads this object from a stream (i.e., deserializes it)
       */
      @SuppressWarnings(&quot;unchecked&quot;)
<span class="line-added">+     @java.io.Serial</span>
      private void readObject(java.io.ObjectInputStream s)
                  throws java.io.IOException, ClassNotFoundException {
  
          ObjectInputStream.GetField gf = s.readFields();
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1025,16 ***</span>
<span class="line-new-header">--- 1029,18 ---</span>
       * @serial include
       */
      private static class SecureSet&lt;E&gt;
          implements Set&lt;E&gt;, java.io.Serializable {
  
<span class="line-added">+         @java.io.Serial</span>
          private static final long serialVersionUID = 7911754171111800359L;
  
          /**
           * @serialField this$0 Subject The outer Subject instance.
           * @serialField elements LinkedList The elements in this set.
           */
<span class="line-added">+         @java.io.Serial</span>
          private static final ObjectStreamField[] serialPersistentFields = {
              new ObjectStreamField(&quot;this$0&quot;, Subject.class),
              new ObjectStreamField(&quot;elements&quot;, LinkedList.class),
              new ObjectStreamField(&quot;which&quot;, int.class)
          };
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1406,10 ***</span>
<span class="line-new-header">--- 1412,11 ---</span>
           *      a security check is performed to ensure that
           *      the caller has permission to access each credential
           *      in the set.  If the security check passes,
           *      the set is serialized.
           */
<span class="line-added">+         @java.io.Serial</span>
          private void writeObject(java.io.ObjectOutputStream oos)
                  throws java.io.IOException {
  
              if (which == Subject.PRIV_CREDENTIAL_SET) {
                  // check permissions before serializing
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1424,10 ***</span>
<span class="line-new-header">--- 1431,11 ---</span>
              fields.put(&quot;which&quot;, which);
              oos.writeFields();
          }
  
          @SuppressWarnings(&quot;unchecked&quot;)
<span class="line-added">+         @java.io.Serial</span>
          private void readObject(ObjectInputStream ois)
              throws IOException, ClassNotFoundException
          {
              ObjectInputStream.GetField fields = ois.readFields();
              subject = (Subject) fields.get(&quot;this$0&quot;, null);
</pre>
<center><a href="RefreshFailedException.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="callback/ChoiceCallback.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>