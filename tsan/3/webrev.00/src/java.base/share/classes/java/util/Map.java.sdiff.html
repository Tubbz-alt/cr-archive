<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/util/Map.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="LongSummaryStatistics.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="MissingFormatArgumentException.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/Map.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
1269         V newValue = (oldValue == null) ? value :
1270                    remappingFunction.apply(oldValue, value);
1271         if (newValue == null) {
1272             remove(key);
1273         } else {
1274             put(key, newValue);
1275         }
1276         return newValue;
1277     }
1278 
1279     /**
1280      * Returns an unmodifiable map containing zero mappings.
1281      * See &lt;a href=&quot;#unmodifiable&quot;&gt;Unmodifiable Maps&lt;/a&gt; for details.
1282      *
1283      * @param &lt;K&gt; the {@code Map}&#39;s key type
1284      * @param &lt;V&gt; the {@code Map}&#39;s value type
1285      * @return an empty {@code Map}
1286      *
1287      * @since 9
1288      */

1289     static &lt;K, V&gt; Map&lt;K, V&gt; of() {
<span class="line-modified">1290         return ImmutableCollections.emptyMap();</span>
1291     }
1292 
1293     /**
1294      * Returns an unmodifiable map containing a single mapping.
1295      * See &lt;a href=&quot;#unmodifiable&quot;&gt;Unmodifiable Maps&lt;/a&gt; for details.
1296      *
1297      * @param &lt;K&gt; the {@code Map}&#39;s key type
1298      * @param &lt;V&gt; the {@code Map}&#39;s value type
1299      * @param k1 the mapping&#39;s key
1300      * @param v1 the mapping&#39;s value
1301      * @return a {@code Map} containing the specified mapping
1302      * @throws NullPointerException if the key or the value is {@code null}
1303      *
1304      * @since 9
1305      */
1306     static &lt;K, V&gt; Map&lt;K, V&gt; of(K k1, V v1) {
1307         return new ImmutableCollections.Map1&lt;&gt;(k1, v1);
1308     }
1309 
1310     /**
</pre>
<hr />
<pre>
1587      *         entry(3, &quot;c&quot;),
1588      *         ...
1589      *         entry(26, &quot;z&quot;));
1590      * }&lt;/pre&gt;
1591      *
1592      * @param &lt;K&gt; the {@code Map}&#39;s key type
1593      * @param &lt;V&gt; the {@code Map}&#39;s value type
1594      * @param entries {@code Map.Entry}s containing the keys and values from which the map is populated
1595      * @return a {@code Map} containing the specified mappings
1596      * @throws IllegalArgumentException if there are any duplicate keys
1597      * @throws NullPointerException if any entry, key, or value is {@code null}, or if
1598      *         the {@code entries} array is {@code null}
1599      *
1600      * @see Map#entry Map.entry()
1601      * @since 9
1602      */
1603     @SafeVarargs
1604     @SuppressWarnings(&quot;varargs&quot;)
1605     static &lt;K, V&gt; Map&lt;K, V&gt; ofEntries(Entry&lt;? extends K, ? extends V&gt;... entries) {
1606         if (entries.length == 0) { // implicit null check of entries array
<span class="line-modified">1607             return ImmutableCollections.emptyMap();</span>


1608         } else if (entries.length == 1) {
1609             // implicit null check of the array slot
1610             return new ImmutableCollections.Map1&lt;&gt;(entries[0].getKey(),
1611                     entries[0].getValue());
1612         } else {
1613             Object[] kva = new Object[entries.length &lt;&lt; 1];
1614             int a = 0;
1615             for (Entry&lt;? extends K, ? extends V&gt; entry : entries) {
1616                 // implicit null checks of each array slot
1617                 kva[a++] = entry.getKey();
1618                 kva[a++] = entry.getValue();
1619             }
1620             return new ImmutableCollections.MapN&lt;&gt;(kva);
1621         }
1622     }
1623 
1624     /**
1625      * Returns an unmodifiable {@link Entry} containing the given key and value.
1626      * These entries are suitable for populating {@code Map} instances using the
1627      * {@link Map#ofEntries Map.ofEntries()} method.
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
1269         V newValue = (oldValue == null) ? value :
1270                    remappingFunction.apply(oldValue, value);
1271         if (newValue == null) {
1272             remove(key);
1273         } else {
1274             put(key, newValue);
1275         }
1276         return newValue;
1277     }
1278 
1279     /**
1280      * Returns an unmodifiable map containing zero mappings.
1281      * See &lt;a href=&quot;#unmodifiable&quot;&gt;Unmodifiable Maps&lt;/a&gt; for details.
1282      *
1283      * @param &lt;K&gt; the {@code Map}&#39;s key type
1284      * @param &lt;V&gt; the {@code Map}&#39;s value type
1285      * @return an empty {@code Map}
1286      *
1287      * @since 9
1288      */
<span class="line-added">1289     @SuppressWarnings(&quot;unchecked&quot;)</span>
1290     static &lt;K, V&gt; Map&lt;K, V&gt; of() {
<span class="line-modified">1291         return (Map&lt;K,V&gt;) ImmutableCollections.EMPTY_MAP;</span>
1292     }
1293 
1294     /**
1295      * Returns an unmodifiable map containing a single mapping.
1296      * See &lt;a href=&quot;#unmodifiable&quot;&gt;Unmodifiable Maps&lt;/a&gt; for details.
1297      *
1298      * @param &lt;K&gt; the {@code Map}&#39;s key type
1299      * @param &lt;V&gt; the {@code Map}&#39;s value type
1300      * @param k1 the mapping&#39;s key
1301      * @param v1 the mapping&#39;s value
1302      * @return a {@code Map} containing the specified mapping
1303      * @throws NullPointerException if the key or the value is {@code null}
1304      *
1305      * @since 9
1306      */
1307     static &lt;K, V&gt; Map&lt;K, V&gt; of(K k1, V v1) {
1308         return new ImmutableCollections.Map1&lt;&gt;(k1, v1);
1309     }
1310 
1311     /**
</pre>
<hr />
<pre>
1588      *         entry(3, &quot;c&quot;),
1589      *         ...
1590      *         entry(26, &quot;z&quot;));
1591      * }&lt;/pre&gt;
1592      *
1593      * @param &lt;K&gt; the {@code Map}&#39;s key type
1594      * @param &lt;V&gt; the {@code Map}&#39;s value type
1595      * @param entries {@code Map.Entry}s containing the keys and values from which the map is populated
1596      * @return a {@code Map} containing the specified mappings
1597      * @throws IllegalArgumentException if there are any duplicate keys
1598      * @throws NullPointerException if any entry, key, or value is {@code null}, or if
1599      *         the {@code entries} array is {@code null}
1600      *
1601      * @see Map#entry Map.entry()
1602      * @since 9
1603      */
1604     @SafeVarargs
1605     @SuppressWarnings(&quot;varargs&quot;)
1606     static &lt;K, V&gt; Map&lt;K, V&gt; ofEntries(Entry&lt;? extends K, ? extends V&gt;... entries) {
1607         if (entries.length == 0) { // implicit null check of entries array
<span class="line-modified">1608             @SuppressWarnings(&quot;unchecked&quot;)</span>
<span class="line-added">1609             var map = (Map&lt;K,V&gt;) ImmutableCollections.EMPTY_MAP;</span>
<span class="line-added">1610             return map;</span>
1611         } else if (entries.length == 1) {
1612             // implicit null check of the array slot
1613             return new ImmutableCollections.Map1&lt;&gt;(entries[0].getKey(),
1614                     entries[0].getValue());
1615         } else {
1616             Object[] kva = new Object[entries.length &lt;&lt; 1];
1617             int a = 0;
1618             for (Entry&lt;? extends K, ? extends V&gt; entry : entries) {
1619                 // implicit null checks of each array slot
1620                 kva[a++] = entry.getKey();
1621                 kva[a++] = entry.getValue();
1622             }
1623             return new ImmutableCollections.MapN&lt;&gt;(kva);
1624         }
1625     }
1626 
1627     /**
1628      * Returns an unmodifiable {@link Entry} containing the given key and value.
1629      * These entries are suitable for populating {@code Map} instances using the
1630      * {@link Map#ofEntries Map.ofEntries()} method.
</pre>
</td>
</tr>
</table>
<center><a href="LongSummaryStatistics.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="MissingFormatArgumentException.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>