<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/util/Currency.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="ConcurrentModificationException.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Date.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/Currency.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 53,13 ***</span>
   * Represents a currency. Currencies are identified by their ISO 4217 currency
   * codes. Visit the &lt;a href=&quot;http://www.iso.org/iso/home/standards/currency_codes.htm&quot;&gt;
   * ISO web site&lt;/a&gt; for more information.
   * &lt;p&gt;
   * The class is designed so that there&#39;s never more than one
<span class="line-modified">!  * &lt;code&gt;Currency&lt;/code&gt; instance for any given currency. Therefore, there&#39;s</span>
<span class="line-modified">!  * no public constructor. You obtain a &lt;code&gt;Currency&lt;/code&gt; instance using</span>
<span class="line-modified">!  * the &lt;code&gt;getInstance&lt;/code&gt; methods.</span>
   * &lt;p&gt;
   * Users can supersede the Java runtime currency data by means of the system
   * property {@systemProperty java.util.currency.data}. If this system property is
   * defined then its value is the location of a properties file, the contents of
   * which are key/value pairs of the ISO 3166 country codes and the ISO 4217
<span class="line-new-header">--- 53,13 ---</span>
   * Represents a currency. Currencies are identified by their ISO 4217 currency
   * codes. Visit the &lt;a href=&quot;http://www.iso.org/iso/home/standards/currency_codes.htm&quot;&gt;
   * ISO web site&lt;/a&gt; for more information.
   * &lt;p&gt;
   * The class is designed so that there&#39;s never more than one
<span class="line-modified">!  * {@code Currency} instance for any given currency. Therefore, there&#39;s</span>
<span class="line-modified">!  * no public constructor. You obtain a {@code Currency} instance using</span>
<span class="line-modified">!  * the {@code getInstance} methods.</span>
   * &lt;p&gt;
   * Users can supersede the Java runtime currency data by means of the system
   * property {@systemProperty java.util.currency.data}. If this system property is
   * defined then its value is the location of a properties file, the contents of
   * which are key/value pairs of the ISO 3166 country codes and the ISO 4217
</pre>
<hr />
<pre>
<span class="line-old-header">*** 111,10 ***</span>
<span class="line-new-header">--- 111,11 ---</span>
   * @see java.math.BigDecimal
   * @since 1.4
   */
  public final class Currency implements Serializable {
  
<span class="line-added">+     @java.io.Serial</span>
      private static final long serialVersionUID = -158308464356906721L;
  
      /**
       * ISO 4217 currency code for this currency.
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 271,27 ***</span>
      private static final int SYMBOL = 0;
      private static final int DISPLAYNAME = 1;
  
  
      /**
<span class="line-modified">!      * Constructs a &lt;code&gt;Currency&lt;/code&gt; instance. The constructor is private</span>
       * so that we can insure that there&#39;s never more than one instance for a
       * given currency.
       */
      private Currency(String currencyCode, int defaultFractionDigits, int numericCode) {
          this.currencyCode = currencyCode;
          this.defaultFractionDigits = defaultFractionDigits;
          this.numericCode = numericCode;
      }
  
      /**
<span class="line-modified">!      * Returns the &lt;code&gt;Currency&lt;/code&gt; instance for the given currency code.</span>
       *
       * @param currencyCode the ISO 4217 code of the currency
<span class="line-modified">!      * @return the &lt;code&gt;Currency&lt;/code&gt; instance for the given currency code</span>
<span class="line-modified">!      * @exception NullPointerException if &lt;code&gt;currencyCode&lt;/code&gt; is null</span>
<span class="line-modified">!      * @exception IllegalArgumentException if &lt;code&gt;currencyCode&lt;/code&gt; is not</span>
       * a supported ISO 4217 code.
       */
      public static Currency getInstance(String currencyCode) {
          return getInstance(currencyCode, Integer.MIN_VALUE, 0);
      }
<span class="line-new-header">--- 272,27 ---</span>
      private static final int SYMBOL = 0;
      private static final int DISPLAYNAME = 1;
  
  
      /**
<span class="line-modified">!      * Constructs a {@code Currency} instance. The constructor is private</span>
       * so that we can insure that there&#39;s never more than one instance for a
       * given currency.
       */
      private Currency(String currencyCode, int defaultFractionDigits, int numericCode) {
          this.currencyCode = currencyCode;
          this.defaultFractionDigits = defaultFractionDigits;
          this.numericCode = numericCode;
      }
  
      /**
<span class="line-modified">!      * Returns the {@code Currency} instance for the given currency code.</span>
       *
       * @param currencyCode the ISO 4217 code of the currency
<span class="line-modified">!      * @return the {@code Currency} instance for the given currency code</span>
<span class="line-modified">!      * @throws    NullPointerException if {@code currencyCode} is null</span>
<span class="line-modified">!      * @throws    IllegalArgumentException if {@code currencyCode} is not</span>
       * a supported ISO 4217 code.
       */
      public static Currency getInstance(String currencyCode) {
          return getInstance(currencyCode, Integer.MIN_VALUE, 0);
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 347,11 ***</span>
          instance = instances.putIfAbsent(currencyCode, currencyVal);
          return (instance != null ? instance : currencyVal);
      }
  
      /**
<span class="line-modified">!      * Returns the &lt;code&gt;Currency&lt;/code&gt; instance for the country of the</span>
       * given locale. The language and variant components of the locale
       * are ignored. The result may vary over time, as countries change their
       * currencies. For example, for the original member countries of the
       * European Monetary Union, the method returns the old national currencies
       * until December 31, 2001, and the Euro from January 1, 2002, local time
<span class="line-new-header">--- 348,11 ---</span>
          instance = instances.putIfAbsent(currencyCode, currencyVal);
          return (instance != null ? instance : currencyVal);
      }
  
      /**
<span class="line-modified">!      * Returns the {@code Currency} instance for the country of the</span>
       * given locale. The language and variant components of the locale
       * are ignored. The result may vary over time, as countries change their
       * currencies. For example, for the original member countries of the
       * European Monetary Union, the method returns the old national currencies
       * until December 31, 2001, and the Euro from January 1, 2002, local time
</pre>
<hr />
<pre>
<span class="line-old-header">*** 362,20 ***</span>
       * the instance returned from this method reflects
       * the values specified with those extensions. If both &quot;cu&quot; and &quot;rg&quot; are
       * specified, the currency from the &quot;cu&quot; extension supersedes the implicit one
       * from the &quot;rg&quot; extension.
       * &lt;p&gt;
<span class="line-modified">!      * The method returns &lt;code&gt;null&lt;/code&gt; for territories that don&#39;t</span>
       * have a currency, such as Antarctica.
       *
<span class="line-modified">!      * @param locale the locale for whose country a &lt;code&gt;Currency&lt;/code&gt;</span>
       * instance is needed
<span class="line-modified">!      * @return the &lt;code&gt;Currency&lt;/code&gt; instance for the country of the given</span>
       * locale, or {@code null}
<span class="line-modified">!      * @exception NullPointerException if &lt;code&gt;locale&lt;/code&gt;</span>
       * is {@code null}
<span class="line-modified">!      * @exception IllegalArgumentException if the country of the given {@code locale}</span>
       * is not a supported ISO 3166 country code.
       */
      public static Currency getInstance(Locale locale) {
          // check for locale overrides
          String override = locale.getUnicodeLocaleType(&quot;cu&quot;);
<span class="line-new-header">--- 363,20 ---</span>
       * the instance returned from this method reflects
       * the values specified with those extensions. If both &quot;cu&quot; and &quot;rg&quot; are
       * specified, the currency from the &quot;cu&quot; extension supersedes the implicit one
       * from the &quot;rg&quot; extension.
       * &lt;p&gt;
<span class="line-modified">!      * The method returns {@code null} for territories that don&#39;t</span>
       * have a currency, such as Antarctica.
       *
<span class="line-modified">!      * @param locale the locale for whose country a {@code Currency}</span>
       * instance is needed
<span class="line-modified">!      * @return the {@code Currency} instance for the country of the given</span>
       * locale, or {@code null}
<span class="line-modified">!      * @throws    NullPointerException if {@code locale}</span>
       * is {@code null}
<span class="line-modified">!      * @throws    IllegalArgumentException if the country of the given {@code locale}</span>
       * is not a supported ISO 3166 country code.
       */
      public static Currency getInstance(Locale locale) {
          // check for locale overrides
          String override = locale.getUnicodeLocaleType(&quot;cu&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 534,11 ***</span>
       * the value specified with that extension.
       *
       * @param locale the locale for which a display name for this currency is
       * needed
       * @return the symbol of this currency for the specified locale
<span class="line-modified">!      * @exception NullPointerException if &lt;code&gt;locale&lt;/code&gt; is null</span>
       */
      public String getSymbol(Locale locale) {
          LocaleServiceProviderPool pool =
              LocaleServiceProviderPool.getPool(CurrencyNameProvider.class);
          locale = CalendarDataUtility.findRegionOverride(locale);
<span class="line-new-header">--- 535,11 ---</span>
       * the value specified with that extension.
       *
       * @param locale the locale for which a display name for this currency is
       * needed
       * @return the symbol of this currency for the specified locale
<span class="line-modified">!      * @throws    NullPointerException if {@code locale} is null</span>
       */
      public String getSymbol(Locale locale) {
          LocaleServiceProviderPool pool =
              LocaleServiceProviderPool.getPool(CurrencyNameProvider.class);
          locale = CalendarDataUtility.findRegionOverride(locale);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 629,11 ***</span>
       * for the specified locale, the ISO 4217 currency code is returned.
       *
       * @param locale the locale for which a display name for this currency is
       * needed
       * @return the display name of this currency for the specified locale
<span class="line-modified">!      * @exception NullPointerException if &lt;code&gt;locale&lt;/code&gt; is null</span>
       * @since 1.7
       */
      public String getDisplayName(Locale locale) {
          LocaleServiceProviderPool pool =
              LocaleServiceProviderPool.getPool(CurrencyNameProvider.class);
<span class="line-new-header">--- 630,11 ---</span>
       * for the specified locale, the ISO 4217 currency code is returned.
       *
       * @param locale the locale for which a display name for this currency is
       * needed
       * @return the display name of this currency for the specified locale
<span class="line-modified">!      * @throws    NullPointerException if {@code locale} is null</span>
       * @since 1.7
       */
      public String getDisplayName(Locale locale) {
          LocaleServiceProviderPool pool =
              LocaleServiceProviderPool.getPool(CurrencyNameProvider.class);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 659,10 ***</span>
<span class="line-new-header">--- 660,11 ---</span>
      }
  
      /**
       * Resolves instances being deserialized to a single instance per currency.
       */
<span class="line-added">+     @java.io.Serial</span>
      private Object readResolve() {
          return getInstance(currencyCode);
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1193,7 ***</span>
          }
  
      }
  
  }
<span class="line-removed">- </span>
<span class="line-removed">- </span>
<span class="line-new-header">--- 1195,5 ---</span>
</pre>
<center><a href="ConcurrentModificationException.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Date.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>