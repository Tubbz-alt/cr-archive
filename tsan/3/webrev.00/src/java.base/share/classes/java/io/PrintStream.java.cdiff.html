<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/io/PrintStream.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="PipedWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PrintWriter.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/io/PrintStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1996, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1996, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 43,14 ***</span>
   * automatically invoked after a byte array is written, one of the
   * {@code println} methods is invoked, or a newline character or byte
   * ({@code &#39;\n&#39;}) is written.
   *
   * &lt;p&gt; All characters printed by a {@code PrintStream} are converted into
<span class="line-modified">!  * bytes using the given encoding or charset, or platform&#39;s default character</span>
<span class="line-modified">!  * encoding if not specified.</span>
   * The {@link PrintWriter} class should be used in situations that require
<span class="line-modified">!  *  writing characters rather than bytes.</span>
   *
   * &lt;p&gt; This class always replaces malformed and unmappable character sequences with
   * the charset&#39;s default replacement string.
   * The {@linkplain java.nio.charset.CharsetEncoder} class should be used when more
   * control over the encoding process is required.
<span class="line-new-header">--- 43,14 ---</span>
   * automatically invoked after a byte array is written, one of the
   * {@code println} methods is invoked, or a newline character or byte
   * ({@code &#39;\n&#39;}) is written.
   *
   * &lt;p&gt; All characters printed by a {@code PrintStream} are converted into
<span class="line-modified">!  * bytes using the given encoding or charset, or the platform&#39;s default</span>
<span class="line-modified">!  * character encoding if not specified.</span>
   * The {@link PrintWriter} class should be used in situations that require
<span class="line-modified">!  * writing characters rather than bytes.</span>
   *
   * &lt;p&gt; This class always replaces malformed and unmappable character sequences with
   * the charset&#39;s default replacement string.
   * The {@linkplain java.nio.charset.CharsetEncoder} class should be used when more
   * control over the encoding process is required.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 119,11 ***</span>
      private PrintStream(boolean autoFlush, Charset charset, OutputStream out) {
          this(out, autoFlush, charset);
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream.  This stream will not flush automatically.</span>
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
       *
       * @see java.io.PrintWriter#PrintWriter(java.io.OutputStream)
<span class="line-new-header">--- 119,13 ---</span>
      private PrintStream(boolean autoFlush, Charset charset, OutputStream out) {
          this(out, autoFlush, charset);
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream, without automatic line flushing, with the</span>
<span class="line-added">+      * specified OutputStream. Characters written to the stream are converted</span>
<span class="line-added">+      * to bytes using the platform&#39;s default character encoding.</span>
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
       *
       * @see java.io.PrintWriter#PrintWriter(java.io.OutputStream)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 131,15 ***</span>
      public PrintStream(OutputStream out) {
          this(out, false);
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream.</span>
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
<span class="line-modified">!      * @param  autoFlush  A boolean; if true, the output buffer will be flushed</span>
       *                    whenever a byte array is written, one of the
       *                    {@code println} methods is invoked, or a newline
       *                    character or byte ({@code &#39;\n&#39;}) is written
       *
       * @see java.io.PrintWriter#PrintWriter(java.io.OutputStream, boolean)
<span class="line-new-header">--- 133,17 ---</span>
      public PrintStream(OutputStream out) {
          this(out, false);
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream, with the specified OutputStream and line</span>
<span class="line-added">+      * flushing. Characters written to the stream are converted to bytes using</span>
<span class="line-added">+      * the platform&#39;s default character encoding.</span>
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
<span class="line-modified">!      * @param  autoFlush  Whether the output buffer will be flushed</span>
       *                    whenever a byte array is written, one of the
       *                    {@code println} methods is invoked, or a newline
       *                    character or byte ({@code &#39;\n&#39;}) is written
       *
       * @see java.io.PrintWriter#PrintWriter(java.io.OutputStream, boolean)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 147,15 ***</span>
      public PrintStream(OutputStream out, boolean autoFlush) {
          this(autoFlush, requireNonNull(out, &quot;Null output stream&quot;));
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream.</span>
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
<span class="line-modified">!      * @param  autoFlush  A boolean; if true, the output buffer will be flushed</span>
       *                    whenever a byte array is written, one of the
       *                    {@code println} methods is invoked, or a newline
       *                    character or byte ({@code &#39;\n&#39;}) is written
       * @param  encoding   The name of a supported
       *                    &lt;a href=&quot;../lang/package-summary.html#charenc&quot;&gt;
<span class="line-new-header">--- 151,16 ---</span>
      public PrintStream(OutputStream out, boolean autoFlush) {
          this(autoFlush, requireNonNull(out, &quot;Null output stream&quot;));
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream, with the specified OutputStream, line</span>
<span class="line-added">+      * flushing, and character encoding.</span>
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
<span class="line-modified">!      * @param  autoFlush  Whether the output buffer will be flushed</span>
       *                    whenever a byte array is written, one of the
       *                    {@code println} methods is invoked, or a newline
       *                    character or byte ({@code &#39;\n&#39;}) is written
       * @param  encoding   The name of a supported
       *                    &lt;a href=&quot;../lang/package-summary.html#charenc&quot;&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 171,18 ***</span>
      {
          this(requireNonNull(out, &quot;Null output stream&quot;), autoFlush, toCharset(encoding));
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream, with the specified OutputStream, automatic line</span>
       * flushing and charset.  This convenience constructor creates the necessary
       * intermediate {@link java.io.OutputStreamWriter OutputStreamWriter},
       * which will encode characters using the provided charset.
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
<span class="line-modified">!      * @param  autoFlush  A boolean; if true, the output buffer will be flushed</span>
       *                    whenever a byte array is written, one of the
       *                    {@code println} methods is invoked, or a newline
       *                    character or byte ({@code &#39;\n&#39;}) is written
       * @param  charset    A {@linkplain java.nio.charset.Charset charset}
       *
<span class="line-new-header">--- 176,18 ---</span>
      {
          this(requireNonNull(out, &quot;Null output stream&quot;), autoFlush, toCharset(encoding));
      }
  
      /**
<span class="line-modified">!      * Creates a new print stream, with the specified OutputStream, line</span>
       * flushing and charset.  This convenience constructor creates the necessary
       * intermediate {@link java.io.OutputStreamWriter OutputStreamWriter},
       * which will encode characters using the provided charset.
       *
       * @param  out        The output stream to which values and objects will be
       *                    printed
<span class="line-modified">!      * @param  autoFlush  Whether the output buffer will be flushed</span>
       *                    whenever a byte array is written, one of the
       *                    {@code println} methods is invoked, or a newline
       *                    character or byte ({@code &#39;\n&#39;}) is written
       * @param  charset    A {@linkplain java.nio.charset.Charset charset}
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 408,10 ***</span>
<span class="line-new-header">--- 413,11 ---</span>
       * Flushes the stream.  This is done by writing any buffered output bytes to
       * the underlying output stream and then flushing that stream.
       *
       * @see        java.io.OutputStream#flush()
       */
<span class="line-added">+     @Override</span>
      public void flush() {
          synchronized (this) {
              try {
                  ensureOpen();
                  out.flush();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 428,10 ***</span>
<span class="line-new-header">--- 434,11 ---</span>
       * Closes the stream.  This is done by flushing the stream and then closing
       * the underlying output stream.
       *
       * @see        java.io.OutputStream#close()
       */
<span class="line-added">+     @Override</span>
      public void close() {
          synchronized (this) {
              if (! closing) {
                  closing = true;
                  try {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 519,10 ***</span>
<span class="line-new-header">--- 526,11 ---</span>
       *
       * @param  b  The byte to be written
       * @see #print(char)
       * @see #println(char)
       */
<span class="line-added">+     @Override</span>
      public void write(int b) {
          try {
              synchronized (this) {
                  ensureOpen();
                  out.write(b);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 550,10 ***</span>
<span class="line-new-header">--- 558,11 ---</span>
       *
       * @param  buf   A byte array
       * @param  off   Offset from which to start taking bytes
       * @param  len   Number of bytes to write
       */
<span class="line-added">+     @Override</span>
      public void write(byte buf[], int off, int len) {
          try {
              synchronized (this) {
                  ensureOpen();
                  out.write(buf, off, len);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 567,10 ***</span>
<span class="line-new-header">--- 576,70 ---</span>
          catch (IOException x) {
              trouble = true;
          }
      }
  
<span class="line-added">+     /**</span>
<span class="line-added">+      * Writes all bytes from the specified byte array to this stream. If</span>
<span class="line-added">+      * automatic flushing is enabled then the {@code flush} method will be</span>
<span class="line-added">+      * invoked.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * &lt;p&gt; Note that the bytes will be written as given; to write characters</span>
<span class="line-added">+      * that will be translated according to the platform&#39;s default character</span>
<span class="line-added">+      * encoding, use the {@code print(char[])} or {@code println(char[])}</span>
<span class="line-added">+      * methods.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @apiNote</span>
<span class="line-added">+      * Although declared to throw {@code IOException}, this method never</span>
<span class="line-added">+      * actually does so. Instead, like other methods that this class</span>
<span class="line-added">+      * overrides, it sets an internal flag which may be tested via the</span>
<span class="line-added">+      * {@link #checkError()} method. To write an array of bytes without having</span>
<span class="line-added">+      * to write a {@code catch} block for the {@code IOException}, use either</span>
<span class="line-added">+      * {@link #writeBytes(byte[] buf) writeBytes(buf)} or</span>
<span class="line-added">+      * {@link #write(byte[], int, int) write(buf, 0, buf.length)}.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @implSpec</span>
<span class="line-added">+      * This method is equivalent to</span>
<span class="line-added">+      * {@link java.io.PrintStream#write(byte[],int,int)</span>
<span class="line-added">+      * this.write(buf, 0, buf.length)}.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @param  buf   A byte array</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @throws IOException If an I/O error occurs.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @see #writeBytes(byte[])</span>
<span class="line-added">+      * @see #write(byte[],int,int)</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @since 14</span>
<span class="line-added">+      */</span>
<span class="line-added">+     @Override</span>
<span class="line-added">+     public void write(byte buf[]) throws IOException {</span>
<span class="line-added">+         this.write(buf, 0, buf.length);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Writes all bytes from the specified byte array to this stream.</span>
<span class="line-added">+      * If automatic flushing is enabled then the {@code flush} method</span>
<span class="line-added">+      * will be invoked.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * &lt;p&gt; Note that the bytes will be written as given; to write characters</span>
<span class="line-added">+      * that will be translated according to the platform&#39;s default character</span>
<span class="line-added">+      * encoding, use the {@code print(char[])} or {@code println(char[])}</span>
<span class="line-added">+      * methods.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @implSpec</span>
<span class="line-added">+      * This method is equivalent to</span>
<span class="line-added">+      * {@link #write(byte[], int, int) this.write(buf, 0, buf.length)}.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @param  buf   A byte array</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @since 14</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public void writeBytes(byte buf[]) {</span>
<span class="line-added">+         this.write(buf, 0, buf.length);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      /*
       * The following private methods on the text- and character-output streams
       * always flush the stream buffers, so that writes to the underlying byte
       * stream occur as promptly as with the original PrintStream.
       */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 698,13 ***</span>
          write(String.valueOf(b));
      }
  
      /**
       * Prints a character.  The character is translated into one or more bytes
<span class="line-modified">!      * according to the platform&#39;s default character encoding, and these bytes</span>
<span class="line-modified">!      * are written in exactly the manner of the</span>
<span class="line-modified">!      * {@link #write(int)} method.</span>
       *
       * @param      c   The {@code char} to be printed
       */
      public void print(char c) {
          write(String.valueOf(c));
<span class="line-new-header">--- 767,13 ---</span>
          write(String.valueOf(b));
      }
  
      /**
       * Prints a character.  The character is translated into one or more bytes
<span class="line-modified">!      * according to the character encoding given to the constructor, or the</span>
<span class="line-modified">!      * platform&#39;s default character encoding if none specified. These bytes</span>
<span class="line-modified">!      * are written in exactly the manner of the {@link #write(int)} method.</span>
       *
       * @param      c   The {@code char} to be printed
       */
      public void print(char c) {
          write(String.valueOf(c));
</pre>
<hr />
<pre>
<span class="line-old-header">*** 766,13 ***</span>
          write(String.valueOf(d));
      }
  
      /**
       * Prints an array of characters.  The characters are converted into bytes
<span class="line-modified">!      * according to the platform&#39;s default character encoding, and these bytes</span>
<span class="line-modified">!      * are written in exactly the manner of the</span>
<span class="line-modified">!      * {@link #write(int)} method.</span>
       *
       * @param      s   The array of chars to be printed
       *
       * @throws  NullPointerException  If {@code s} is {@code null}
       */
<span class="line-new-header">--- 835,13 ---</span>
          write(String.valueOf(d));
      }
  
      /**
       * Prints an array of characters.  The characters are converted into bytes
<span class="line-modified">!      * according to the character encoding given to the constructor, or the</span>
<span class="line-modified">!      * platform&#39;s default character encoding if none specified. These bytes</span>
<span class="line-modified">!      * are written in exactly the manner of the {@link #write(int)} method.</span>
       *
       * @param      s   The array of chars to be printed
       *
       * @throws  NullPointerException  If {@code s} is {@code null}
       */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 781,12 ***</span>
      }
  
      /**
       * Prints a string.  If the argument is {@code null} then the string
       * {@code &quot;null&quot;} is printed.  Otherwise, the string&#39;s characters are
<span class="line-modified">!      * converted into bytes according to the platform&#39;s default character</span>
<span class="line-modified">!      * encoding, and these bytes are written in exactly the manner of the</span>
       * {@link #write(int)} method.
       *
       * @param      s   The {@code String} to be printed
       */
      public void print(String s) {
<span class="line-new-header">--- 850,13 ---</span>
      }
  
      /**
       * Prints a string.  If the argument is {@code null} then the string
       * {@code &quot;null&quot;} is printed.  Otherwise, the string&#39;s characters are
<span class="line-modified">!      * converted into bytes according to the character encoding given to the</span>
<span class="line-modified">!      * constructor, or the platform&#39;s default character encoding if none</span>
<span class="line-added">+      * specified. These bytes are written in exactly the manner of the</span>
       * {@link #write(int)} method.
       *
       * @param      s   The {@code String} to be printed
       */
      public void print(String s) {
</pre>
<center><a href="PipedWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PrintWriter.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>