<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MethodHandleDesc.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MethodTypeDescImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 32 
 33 /**
 34  * A &lt;a href=&quot;package-summary.html#nominal&quot;&gt;nominal descriptor&lt;/a&gt; for a
 35  * {@linkplain MethodType} constant.
 36  *
 37  * @apiNote In the future, if the Java language permits, {@linkplain MethodTypeDesc}
 38  * may become a {@code sealed} interface, which would prohibit subclassing except
 39  * by explicitly permitted types.  Non-platform classes should not implement
 40  * {@linkplain MethodTypeDesc} directly.
 41  *
 42  * @since 12
 43  */
 44 public interface MethodTypeDesc
 45         extends ConstantDesc,
 46                 TypeDescriptor.OfMethod&lt;ClassDesc, MethodTypeDesc&gt; {
 47     /**
 48      * Creates a {@linkplain MethodTypeDesc} given a method descriptor string.
 49      *
 50      * @param descriptor a method descriptor string
 51      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified"> 52      * @throws NullPointerException if any argument is {@code null}</span>
 53      * @throws IllegalArgumentException if the descriptor string is not a valid
 54      * method descriptor
 55      * @jvms 4.3.3 Method Descriptors
 56      */
 57     static MethodTypeDesc ofDescriptor(String descriptor) {
 58         return MethodTypeDescImpl.ofDescriptor(descriptor);
 59     }
 60 
 61     /**
 62      * Returns a {@linkplain MethodTypeDesc} given the return type and parameter
 63      * types.
 64      *
 65      * @param returnDesc a {@linkplain ClassDesc} describing the return type
 66      * @param paramDescs {@linkplain ClassDesc}s describing the argument types
 67      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified"> 68      * @throws NullPointerException if any argument is {@code null}</span>


 69      */
 70     static MethodTypeDesc of(ClassDesc returnDesc, ClassDesc... paramDescs) {
 71         return new MethodTypeDescImpl(returnDesc, paramDescs);
 72     }
 73 
 74     /**
 75      * Gets the return type of the method type described by this {@linkplain MethodTypeDesc}.
 76      *
 77      * @return a {@link ClassDesc} describing the return type of the method type
 78      */
 79     ClassDesc returnType();
 80 
 81     /**
 82      * Returns the number of parameters of the method type described by
 83      * this {@linkplain MethodTypeDesc}.
 84      * @return the number of parameters
 85      */
 86     int parameterCount();
 87 
 88     /**
</pre>
<hr />
<pre>
 99     /**
100      * Returns the parameter types as an immutable {@link List}.
101      *
102      * @return a {@link List} of {@link ClassDesc} describing the parameter types
103      */
104     List&lt;ClassDesc&gt; parameterList();
105 
106     /**
107      * Returns the parameter types as an array.
108      *
109      * @return an array of {@link ClassDesc} describing the parameter types
110      */
111     ClassDesc[] parameterArray();
112 
113     /**
114      * Returns a {@linkplain MethodTypeDesc} that is identical to
115      * this one, except with the specified return type.
116      *
117      * @param returnType a {@link ClassDesc} describing the new return type
118      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified">119      * @throws NullPointerException if any argument is {@code null}</span>
120      */
121     MethodTypeDesc changeReturnType(ClassDesc returnType);
122 
123     /**
124      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
125      * except that a single parameter type has been changed to the specified type.
126      *
127      * @param index the index of the parameter to change
128      * @param paramType a {@link ClassDesc} describing the new parameter type
129      * @return a {@linkplain MethodTypeDesc} describing the desired method type
130      * @throws NullPointerException if any argument is {@code null}
131      * @throws IndexOutOfBoundsException if the index is outside the half-open
132      * range {[0, parameterCount)}
133      */
134     MethodTypeDesc changeParameterType(int index, ClassDesc paramType);
135 
136     /**
137      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
138      * except that a range of parameter types have been removed.
139      *
140      * @param start the index of the first parameter to remove
141      * @param end the index after the last parameter to remove
142      * @return a {@linkplain MethodTypeDesc} describing the desired method type
143      * @throws IndexOutOfBoundsException if {@code start} is outside the half-open
<span class="line-modified">144      * range {[0, parameterCount)}, or {@code end} is outside the closed range</span>
<span class="line-modified">145      * {@code [0, parameterCount]}</span>
146      */
147     MethodTypeDesc dropParameterTypes(int start, int end);
148 
149     /**
150      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
151      * except that a range of additional parameter types have been inserted.
152      *
153      * @param pos the index at which to insert the first inserted parameter
154      * @param paramTypes {@link ClassDesc}s describing the new parameter types
155      *                   to insert
156      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified">157      * @throws NullPointerException if any argument is {@code null}</span>
158      * @throws IndexOutOfBoundsException if {@code pos} is outside the closed
159      * range {[0, parameterCount]}


160      */
161     MethodTypeDesc insertParameterTypes(int pos, ClassDesc... paramTypes);
162 
163     /**
164      * Returns the method type descriptor string.
165      *
166      * @return the method type descriptor string
167      * @jvms 4.3.3 Method Descriptors
168      */
169     default String descriptorString() {
170         return String.format(&quot;(%s)%s&quot;,
171                              Stream.of(parameterArray())
172                                    .map(ClassDesc::descriptorString)
173                                    .collect(Collectors.joining()),
174                              returnType().descriptorString());
175     }
176 
177     /**
178      * Returns a human-readable descriptor for this method type, using the
179      * canonical names for parameter and return types.
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 32 
 33 /**
 34  * A &lt;a href=&quot;package-summary.html#nominal&quot;&gt;nominal descriptor&lt;/a&gt; for a
 35  * {@linkplain MethodType} constant.
 36  *
 37  * @apiNote In the future, if the Java language permits, {@linkplain MethodTypeDesc}
 38  * may become a {@code sealed} interface, which would prohibit subclassing except
 39  * by explicitly permitted types.  Non-platform classes should not implement
 40  * {@linkplain MethodTypeDesc} directly.
 41  *
 42  * @since 12
 43  */
 44 public interface MethodTypeDesc
 45         extends ConstantDesc,
 46                 TypeDescriptor.OfMethod&lt;ClassDesc, MethodTypeDesc&gt; {
 47     /**
 48      * Creates a {@linkplain MethodTypeDesc} given a method descriptor string.
 49      *
 50      * @param descriptor a method descriptor string
 51      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified"> 52      * @throws NullPointerException if the argument is {@code null}</span>
 53      * @throws IllegalArgumentException if the descriptor string is not a valid
 54      * method descriptor
 55      * @jvms 4.3.3 Method Descriptors
 56      */
 57     static MethodTypeDesc ofDescriptor(String descriptor) {
 58         return MethodTypeDescImpl.ofDescriptor(descriptor);
 59     }
 60 
 61     /**
 62      * Returns a {@linkplain MethodTypeDesc} given the return type and parameter
 63      * types.
 64      *
 65      * @param returnDesc a {@linkplain ClassDesc} describing the return type
 66      * @param paramDescs {@linkplain ClassDesc}s describing the argument types
 67      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified"> 68      * @throws NullPointerException if any argument or its contents are {@code null}</span>
<span class="line-added"> 69      * @throws IllegalArgumentException if any element of {@code paramDescs} is a</span>
<span class="line-added"> 70      * {@link ClassDesc} for {@code void}</span>
 71      */
 72     static MethodTypeDesc of(ClassDesc returnDesc, ClassDesc... paramDescs) {
 73         return new MethodTypeDescImpl(returnDesc, paramDescs);
 74     }
 75 
 76     /**
 77      * Gets the return type of the method type described by this {@linkplain MethodTypeDesc}.
 78      *
 79      * @return a {@link ClassDesc} describing the return type of the method type
 80      */
 81     ClassDesc returnType();
 82 
 83     /**
 84      * Returns the number of parameters of the method type described by
 85      * this {@linkplain MethodTypeDesc}.
 86      * @return the number of parameters
 87      */
 88     int parameterCount();
 89 
 90     /**
</pre>
<hr />
<pre>
101     /**
102      * Returns the parameter types as an immutable {@link List}.
103      *
104      * @return a {@link List} of {@link ClassDesc} describing the parameter types
105      */
106     List&lt;ClassDesc&gt; parameterList();
107 
108     /**
109      * Returns the parameter types as an array.
110      *
111      * @return an array of {@link ClassDesc} describing the parameter types
112      */
113     ClassDesc[] parameterArray();
114 
115     /**
116      * Returns a {@linkplain MethodTypeDesc} that is identical to
117      * this one, except with the specified return type.
118      *
119      * @param returnType a {@link ClassDesc} describing the new return type
120      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified">121      * @throws NullPointerException if the argument is {@code null}</span>
122      */
123     MethodTypeDesc changeReturnType(ClassDesc returnType);
124 
125     /**
126      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
127      * except that a single parameter type has been changed to the specified type.
128      *
129      * @param index the index of the parameter to change
130      * @param paramType a {@link ClassDesc} describing the new parameter type
131      * @return a {@linkplain MethodTypeDesc} describing the desired method type
132      * @throws NullPointerException if any argument is {@code null}
133      * @throws IndexOutOfBoundsException if the index is outside the half-open
134      * range {[0, parameterCount)}
135      */
136     MethodTypeDesc changeParameterType(int index, ClassDesc paramType);
137 
138     /**
139      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
140      * except that a range of parameter types have been removed.
141      *
142      * @param start the index of the first parameter to remove
143      * @param end the index after the last parameter to remove
144      * @return a {@linkplain MethodTypeDesc} describing the desired method type
145      * @throws IndexOutOfBoundsException if {@code start} is outside the half-open
<span class="line-modified">146      * range {@code [0, parameterCount)}, or {@code end} is outside the closed range</span>
<span class="line-modified">147      * {@code [0, parameterCount]}, or if {@code start &gt; end}</span>
148      */
149     MethodTypeDesc dropParameterTypes(int start, int end);
150 
151     /**
152      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
153      * except that a range of additional parameter types have been inserted.
154      *
155      * @param pos the index at which to insert the first inserted parameter
156      * @param paramTypes {@link ClassDesc}s describing the new parameter types
157      *                   to insert
158      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<span class="line-modified">159      * @throws NullPointerException if any argument or its contents are {@code null}</span>
160      * @throws IndexOutOfBoundsException if {@code pos} is outside the closed
161      * range {[0, parameterCount]}
<span class="line-added">162      * @throws IllegalArgumentException if any element of {@code paramTypes}</span>
<span class="line-added">163      * is a {@link ClassDesc} for {@code void}</span>
164      */
165     MethodTypeDesc insertParameterTypes(int pos, ClassDesc... paramTypes);
166 
167     /**
168      * Returns the method type descriptor string.
169      *
170      * @return the method type descriptor string
171      * @jvms 4.3.3 Method Descriptors
172      */
173     default String descriptorString() {
174         return String.format(&quot;(%s)%s&quot;,
175                              Stream.of(parameterArray())
176                                    .map(ClassDesc::descriptorString)
177                                    .collect(Collectors.joining()),
178                              returnType().descriptorString());
179     }
180 
181     /**
182      * Returns a human-readable descriptor for this method type, using the
183      * canonical names for parameter and return types.
</pre>
</td>
</tr>
</table>
<center><a href="MethodHandleDesc.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MethodTypeDescImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>