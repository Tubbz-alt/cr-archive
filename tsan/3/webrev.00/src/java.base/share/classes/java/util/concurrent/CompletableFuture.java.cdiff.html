<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/util/concurrent/CompletableFuture.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ArrayBlockingQueue.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ConcurrentHashMap.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/concurrent/CompletableFuture.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 621,12 ***</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Throwable x; Function&lt;? super T,? extends V&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  if (r instanceof AltResult) {
                      if ((x = ((AltResult)r).ex) != null) {
                          d.completeThrowable(x, r);
<span class="line-new-header">--- 621,12 ---</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Throwable x; Function&lt;? super T,? extends V&gt; f;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  if (r instanceof AltResult) {
                      if ((x = ((AltResult)r).ex) != null) {
                          d.completeThrowable(x, r);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 643,11 ***</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private &lt;V&gt; CompletableFuture&lt;V&gt; uniApplyStage(
<span class="line-new-header">--- 643,11 ---</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private &lt;V&gt; CompletableFuture&lt;V&gt; uniApplyStage(
</pre>
<hr />
<pre>
<span class="line-old-header">*** 693,12 ***</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Throwable x; Consumer&lt;? super T&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  if (r instanceof AltResult) {
                      if ((x = ((AltResult)r).ex) != null) {
                          d.completeThrowable(x, r);
<span class="line-new-header">--- 693,12 ---</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Throwable x; Consumer&lt;? super T&gt; f;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  if (r instanceof AltResult) {
                      if ((x = ((AltResult)r).ex) != null) {
                          d.completeThrowable(x, r);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 716,11 ***</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private CompletableFuture&lt;Void&gt; uniAcceptStage(Executor e,
<span class="line-new-header">--- 716,11 ---</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private CompletableFuture&lt;Void&gt; uniAcceptStage(Executor e,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 767,12 ***</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Throwable x; Runnable f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null)</span>
                  return null;
              if (d.result == null) {
                  if (r instanceof AltResult &amp;&amp; (x = ((AltResult)r).ex) != null)
                      d.completeThrowable(x, r);
                  else
<span class="line-new-header">--- 767,12 ---</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Throwable x; Runnable f;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              if (d.result == null) {
                  if (r instanceof AltResult &amp;&amp; (x = ((AltResult)r).ex) != null)
                      d.completeThrowable(x, r);
                  else
</pre>
<hr />
<pre>
<span class="line-old-header">*** 785,11 ***</span>
                          }
                      } catch (Throwable ex) {
                          d.completeThrowable(ex);
                      }
              }
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private CompletableFuture&lt;Void&gt; uniRunStage(Executor e, Runnable f) {
<span class="line-new-header">--- 785,11 ---</span>
                          }
                      } catch (Throwable ex) {
                          d.completeThrowable(ex);
                      }
              }
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private CompletableFuture&lt;Void&gt; uniRunStage(Executor e, Runnable f) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 830,15 ***</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;T&gt; tryFire(int mode) {
              CompletableFuture&lt;T&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; BiConsumer&lt;? super T, ? super Throwable&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null</span>
                  || !d.uniWhenComplete(r, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      final boolean uniWhenComplete(Object r,
<span class="line-new-header">--- 830,15 ---</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;T&gt; tryFire(int mode) {
              CompletableFuture&lt;T&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; BiConsumer&lt;? super T, ? super Throwable&gt; f;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null</span>
                  || !d.uniWhenComplete(r, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      final boolean uniWhenComplete(Object r,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 900,15 ***</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; BiFunction&lt;? super T, Throwable, ? extends V&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null</span>
                  || !d.uniHandle(r, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      final &lt;S&gt; boolean uniHandle(Object r,
<span class="line-new-header">--- 900,15 ---</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; BiFunction&lt;? super T, Throwable, ? extends V&gt; f;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null</span>
                  || !d.uniHandle(r, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      final &lt;S&gt; boolean uniHandle(Object r,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 963,15 ***</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;T&gt; tryFire(int mode) {
              CompletableFuture&lt;T&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Function&lt;? super Throwable, ? extends T&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null</span>
                  || !d.uniExceptionally(r, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      final boolean uniExceptionally(Object r,
<span class="line-new-header">--- 963,15 ---</span>
              super(executor, dep, src); this.fn = fn;
          }
          final CompletableFuture&lt;T&gt; tryFire(int mode) {
              CompletableFuture&lt;T&gt; d; CompletableFuture&lt;T&gt; a;
              Object r; Function&lt;? super Throwable, ? extends T&gt; f;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null</span>
                  || !d.uniExceptionally(r, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      final boolean uniExceptionally(Object r,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1022,12 ***</span>
          }
          final CompletableFuture&lt;T&gt; tryFire(int mode) {
              CompletableFuture&lt;T&gt; d; CompletableFuture&lt;T&gt; a;
              Function&lt;Throwable, ? extends CompletionStage&lt;T&gt;&gt; f;
              Object r; Throwable x;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null)</span>
                  return null;
              if (d.result == null) {
                  if ((r instanceof AltResult) &amp;&amp;
                      (x = ((AltResult)r).ex) != null) {
                      try {
<span class="line-new-header">--- 1022,12 ---</span>
          }
          final CompletableFuture&lt;T&gt; tryFire(int mode) {
              CompletableFuture&lt;T&gt; d; CompletableFuture&lt;T&gt; a;
              Function&lt;Throwable, ? extends CompletionStage&lt;T&gt;&gt; f;
              Object r; Throwable x;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              if (d.result == null) {
                  if ((r instanceof AltResult) &amp;&amp;
                      (x = ((AltResult)r).ex) != null) {
                      try {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1046,11 ***</span>
                      }
                  }
                  else
                      d.internalComplete(r);
              }
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private CompletableFuture&lt;T&gt; uniComposeExceptionallyStage(
<span class="line-new-header">--- 1046,11 ---</span>
                      }
                  }
                  else
                      d.internalComplete(r);
              }
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private CompletableFuture&lt;T&gt; uniComposeExceptionallyStage(
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1084,12 ***</span>
          UniRelay(CompletableFuture&lt;U&gt; dep, CompletableFuture&lt;T&gt; src) {
              super(null, dep, src);
          }
          final CompletableFuture&lt;U&gt; tryFire(int mode) {
              CompletableFuture&lt;U&gt; d; CompletableFuture&lt;T&gt; a; Object r;
<span class="line-modified">!             if ((d = dep) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null)</span>
                  return null;
              if (d.result == null)
                  d.completeRelay(r);
              src = null; dep = null;
              return d.postFire(a, mode);
<span class="line-new-header">--- 1084,12 ---</span>
          UniRelay(CompletableFuture&lt;U&gt; dep, CompletableFuture&lt;T&gt; src) {
              super(null, dep, src);
          }
          final CompletableFuture&lt;U&gt; tryFire(int mode) {
              CompletableFuture&lt;U&gt; d; CompletableFuture&lt;T&gt; a; Object r;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null)</span>
                  return null;
              if (d.result == null)
                  d.completeRelay(r);
              src = null; dep = null;
              return d.postFire(a, mode);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1126,12 ***</span>
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d; CompletableFuture&lt;T&gt; a;
              Function&lt;? super T, ? extends CompletionStage&lt;V&gt;&gt; f;
              Object r; Throwable x;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  if (r instanceof AltResult) {
                      if ((x = ((AltResult)r).ex) != null) {
                          d.completeThrowable(x, r);
<span class="line-new-header">--- 1126,12 ---</span>
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d; CompletableFuture&lt;T&gt; a;
              Function&lt;? super T, ? extends CompletionStage&lt;V&gt;&gt; f;
              Object r; Throwable x;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  if (r instanceof AltResult) {
                      if ((x = ((AltResult)r).ex) != null) {
                          d.completeThrowable(x, r);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1153,11 ***</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             dep = null; src = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private &lt;V&gt; CompletableFuture&lt;V&gt; uniComposeStage(
<span class="line-new-header">--- 1153,11 ---</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             src = null; dep = null; fn = null;</span>
              return d.postFire(a, mode);
          }
      }
  
      private &lt;V&gt; CompletableFuture&lt;V&gt; uniComposeStage(
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1268,16 ***</span>
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s; BiFunction&lt;? super T,? super U,? extends V&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-removed">-                 || (a = src) == null || (r = a.result) == null</span>
                  || (b = snd) == null || (s = b.result) == null
                  || !d.biApply(r, s, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             dep = null; src = null; snd = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      final &lt;R,S&gt; boolean biApply(Object r, Object s,
<span class="line-new-header">--- 1268,16 ---</span>
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
              CompletableFuture&lt;V&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s; BiFunction&lt;? super T,? super U,? extends V&gt; f;
<span class="line-modified">!             if (   (a = src) == null || (r = a.result) == null</span>
                  || (b = snd) == null || (s = b.result) == null
<span class="line-added">+                 || (d = dep) == null || (f = fn) == null</span>
                  || !d.biApply(r, s, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             src = null; snd = null; dep = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      final &lt;R,S&gt; boolean biApply(Object r, Object s,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1343,16 ***</span>
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s; BiConsumer&lt;? super T,? super U&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-removed">-                 || (a = src) == null || (r = a.result) == null</span>
                  || (b = snd) == null || (s = b.result) == null
                  || !d.biAccept(r, s, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             dep = null; src = null; snd = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      final &lt;R,S&gt; boolean biAccept(Object r, Object s,
<span class="line-new-header">--- 1343,16 ---</span>
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s; BiConsumer&lt;? super T,? super U&gt; f;
<span class="line-modified">!             if (   (a = src) == null || (r = a.result) == null</span>
                  || (b = snd) == null || (s = b.result) == null
<span class="line-added">+                 || (d = dep) == null || (f = fn) == null</span>
                  || !d.biAccept(r, s, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             src = null; snd = null; dep = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      final &lt;R,S&gt; boolean biAccept(Object r, Object s,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1419,16 ***</span>
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s; Runnable f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-removed">-                 || (a = src) == null || (r = a.result) == null</span>
                  || (b = snd) == null || (s = b.result) == null
                  || !d.biRun(r, s, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             dep = null; src = null; snd = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      final boolean biRun(Object r, Object s, Runnable f, BiRun&lt;?,?&gt; c) {
<span class="line-new-header">--- 1419,16 ---</span>
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s; Runnable f;
<span class="line-modified">!             if (   (a = src) == null || (r = a.result) == null</span>
                  || (b = snd) == null || (s = b.result) == null
<span class="line-added">+                 || (d = dep) == null || (f = fn) == null</span>
                  || !d.biRun(r, s, f, mode &gt; 0 ? null : this))
                  return null;
<span class="line-modified">!             src = null; snd = null; dep = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      final boolean biRun(Object r, Object s, Runnable f, BiRun&lt;?,?&gt; c) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1480,13 ***</span>
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s, z; Throwable x;
<span class="line-modified">!             if ((d = dep) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (b = snd) == null || (s = b.result) == null)</span>
                  return null;
              if (d.result == null) {
                  if ((r instanceof AltResult
                       &amp;&amp; (x = ((AltResult)(z = r)).ex) != null) ||
                      (s instanceof AltResult
<span class="line-new-header">--- 1480,13 ---</span>
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
              CompletableFuture&lt;Void&gt; d;
              CompletableFuture&lt;T&gt; a;
              CompletableFuture&lt;U&gt; b;
              Object r, s, z; Throwable x;
<span class="line-modified">!             if (   (a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (b = snd) == null || (s = b.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null)</span>
                  return null;
              if (d.result == null) {
                  if ((r instanceof AltResult
                       &amp;&amp; (x = ((AltResult)(z = r)).ex) != null) ||
                      (s instanceof AltResult
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1555,17 ***</span>
                  CompletableFuture&lt;T&gt; src, CompletableFuture&lt;U&gt; snd,
                  Function&lt;? super T,? extends V&gt; fn) {
              super(executor, dep, src, snd); this.fn = fn;
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
<span class="line-modified">!             CompletableFuture&lt;V&gt; d;</span>
<span class="line-removed">-             CompletableFuture&lt;T&gt; a;</span>
<span class="line-removed">-             CompletableFuture&lt;U&gt; b;</span>
              Object r; Throwable x; Function&lt;? super T,? extends V&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (b = snd) == null</span>
<span class="line-modified">!                 || ((r = a.result) == null &amp;&amp; (r = b.result) == null))</span>
                  return null;
              tryComplete: if (d.result == null) {
                  try {
                      if (mode &lt;= 0 &amp;&amp; !claim())
                          return null;
<span class="line-new-header">--- 1555,15 ---</span>
                  CompletableFuture&lt;T&gt; src, CompletableFuture&lt;U&gt; snd,
                  Function&lt;? super T,? extends V&gt; fn) {
              super(executor, dep, src, snd); this.fn = fn;
          }
          final CompletableFuture&lt;V&gt; tryFire(int mode) {
<span class="line-modified">!             CompletableFuture&lt;V&gt; d; CompletableFuture&lt;? extends T&gt; a, b;</span>
              Object r; Throwable x; Function&lt;? super T,? extends V&gt; f;
<span class="line-modified">!             if ((a = src) == null || (b = snd) == null</span>
<span class="line-modified">!                 || ((r = a.result) == null &amp;&amp; (r = b.result) == null)</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  try {
                      if (mode &lt;= 0 &amp;&amp; !claim())
                          return null;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1580,11 ***</span>
                      d.completeValue(f.apply(t));
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             dep = null; src = null; snd = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      private &lt;U extends T,V&gt; CompletableFuture&lt;V&gt; orApplyStage(
<span class="line-new-header">--- 1578,11 ---</span>
                      d.completeValue(f.apply(t));
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             src = null; snd = null; dep = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      private &lt;U extends T,V&gt; CompletableFuture&lt;V&gt; orApplyStage(
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1610,17 ***</span>
                   CompletableFuture&lt;T&gt; src, CompletableFuture&lt;U&gt; snd,
                   Consumer&lt;? super T&gt; fn) {
              super(executor, dep, src, snd); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
<span class="line-modified">!             CompletableFuture&lt;Void&gt; d;</span>
<span class="line-removed">-             CompletableFuture&lt;T&gt; a;</span>
<span class="line-removed">-             CompletableFuture&lt;U&gt; b;</span>
              Object r; Throwable x; Consumer&lt;? super T&gt; f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (b = snd) == null</span>
<span class="line-modified">!                 || ((r = a.result) == null &amp;&amp; (r = b.result) == null))</span>
                  return null;
              tryComplete: if (d.result == null) {
                  try {
                      if (mode &lt;= 0 &amp;&amp; !claim())
                          return null;
<span class="line-new-header">--- 1608,15 ---</span>
                   CompletableFuture&lt;T&gt; src, CompletableFuture&lt;U&gt; snd,
                   Consumer&lt;? super T&gt; fn) {
              super(executor, dep, src, snd); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
<span class="line-modified">!             CompletableFuture&lt;Void&gt; d; CompletableFuture&lt;? extends T&gt; a, b;</span>
              Object r; Throwable x; Consumer&lt;? super T&gt; f;
<span class="line-modified">!             if ((a = src) == null || (b = snd) == null</span>
<span class="line-modified">!                 || ((r = a.result) == null &amp;&amp; (r = b.result) == null)</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              tryComplete: if (d.result == null) {
                  try {
                      if (mode &lt;= 0 &amp;&amp; !claim())
                          return null;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1636,11 ***</span>
                      d.completeNull();
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             dep = null; src = null; snd = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      private &lt;U extends T&gt; CompletableFuture&lt;Void&gt; orAcceptStage(
<span class="line-new-header">--- 1632,11 ---</span>
                      d.completeNull();
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             src = null; snd = null; dep = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      private &lt;U extends T&gt; CompletableFuture&lt;Void&gt; orAcceptStage(
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1666,17 ***</span>
                CompletableFuture&lt;T&gt; src, CompletableFuture&lt;U&gt; snd,
                Runnable fn) {
              super(executor, dep, src, snd); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
<span class="line-modified">!             CompletableFuture&lt;Void&gt; d;</span>
<span class="line-removed">-             CompletableFuture&lt;T&gt; a;</span>
<span class="line-removed">-             CompletableFuture&lt;U&gt; b;</span>
              Object r; Throwable x; Runnable f;
<span class="line-modified">!             if ((d = dep) == null || (f = fn) == null</span>
<span class="line-modified">!                 || (a = src) == null || (b = snd) == null</span>
<span class="line-modified">!                 || ((r = a.result) == null &amp;&amp; (r = b.result) == null))</span>
                  return null;
              if (d.result == null) {
                  try {
                      if (mode &lt;= 0 &amp;&amp; !claim())
                          return null;
<span class="line-new-header">--- 1662,15 ---</span>
                CompletableFuture&lt;T&gt; src, CompletableFuture&lt;U&gt; snd,
                Runnable fn) {
              super(executor, dep, src, snd); this.fn = fn;
          }
          final CompletableFuture&lt;Void&gt; tryFire(int mode) {
<span class="line-modified">!             CompletableFuture&lt;Void&gt; d; CompletableFuture&lt;?&gt; a, b;</span>
              Object r; Throwable x; Runnable f;
<span class="line-modified">!             if ((a = src) == null || (b = snd) == null</span>
<span class="line-modified">!                 || ((r = a.result) == null &amp;&amp; (r = b.result) == null)</span>
<span class="line-modified">!                 || (d = dep) == null || (f = fn) == null)</span>
                  return null;
              if (d.result == null) {
                  try {
                      if (mode &lt;= 0 &amp;&amp; !claim())
                          return null;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1689,11 ***</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             dep = null; src = null; snd = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      private CompletableFuture&lt;Void&gt; orRunStage(Executor e, CompletionStage&lt;?&gt; o,
<span class="line-new-header">--- 1683,11 ---</span>
                      }
                  } catch (Throwable ex) {
                      d.completeThrowable(ex);
                  }
              }
<span class="line-modified">!             src = null; snd = null; dep = null; fn = null;</span>
              return d.postFire(a, b, mode);
          }
      }
  
      private CompletableFuture&lt;Void&gt; orRunStage(Executor e, CompletionStage&lt;?&gt; o,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1724,15 ***</span>
          final CompletableFuture&lt;Object&gt; tryFire(int mode) {
              // assert mode != ASYNC;
              CompletableFuture&lt;Object&gt; d; CompletableFuture&lt;?&gt; a;
              CompletableFuture&lt;?&gt;[] as;
              Object r;
<span class="line-modified">!             if ((d = dep) == null</span>
<span class="line-modified">!                 || (a = src) == null || (r = a.result) == null</span>
<span class="line-removed">-                 || (as = srcs) == null)</span>
                  return null;
<span class="line-modified">!             dep = null; src = null; srcs = null;</span>
              if (d.completeRelay(r)) {
                  for (CompletableFuture&lt;?&gt; b : as)
                      if (b != a)
                          b.cleanStack();
                  if (mode &lt; 0)
<span class="line-new-header">--- 1718,14 ---</span>
          final CompletableFuture&lt;Object&gt; tryFire(int mode) {
              // assert mode != ASYNC;
              CompletableFuture&lt;Object&gt; d; CompletableFuture&lt;?&gt; a;
              CompletableFuture&lt;?&gt;[] as;
              Object r;
<span class="line-modified">!             if ((a = src) == null || (r = a.result) == null</span>
<span class="line-modified">!                 || (d = dep) == null || (as = srcs) == null)</span>
                  return null;
<span class="line-modified">!             src = null; dep = null; srcs = null;</span>
              if (d.completeRelay(r)) {
                  for (CompletableFuture&lt;?&gt; b : as)
                      if (b != a)
                          b.cleanStack();
                  if (mode &lt; 0)
</pre>
<center><a href="ArrayBlockingQueue.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ConcurrentHashMap.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>