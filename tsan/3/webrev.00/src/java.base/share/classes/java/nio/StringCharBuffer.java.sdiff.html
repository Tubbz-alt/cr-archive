<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/nio/StringCharBuffer.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="MappedByteBuffer.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="X-Buffer.java.template.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/nio/StringCharBuffer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package java.nio;
 27 
 28 import java.util.Objects;
 29 
 30 // ## If the sequence is a string, use reflection to share its array
 31 
 32 class StringCharBuffer                                  // package-private
 33     extends CharBuffer
 34 {
 35     CharSequence str;
 36 
 37     StringCharBuffer(CharSequence s, int start, int end) { // package-private
<span class="line-modified"> 38         super(-1, start, end, s.length());</span>
 39         int n = s.length();
<span class="line-modified"> 40         if ((start &lt; 0) || (start &gt; n) || (end &lt; start) || (end &gt; n))</span>
<span class="line-removed"> 41             throw new IndexOutOfBoundsException();</span>
 42         str = s;
 43         this.isReadOnly = true;
 44     }
 45 
 46     public CharBuffer slice() {
 47         return new StringCharBuffer(str,
 48                                     -1,
 49                                     0,
 50                                     this.remaining(),
 51                                     this.remaining(),
 52                                     offset + this.position());
 53     }
 54 
 55     @Override
 56     public CharBuffer slice(int index, int length) {
 57         Objects.checkFromIndexSize(index, length, limit());
 58         return new StringCharBuffer(str,
 59                                     -1,
 60                                     0,
 61                                     length,
 62                                     length,
 63                                     offset + index);
 64     }
 65 
 66     private StringCharBuffer(CharSequence s,
 67                              int mark,
 68                              int pos,
 69                              int limit,
 70                              int cap,
 71                              int offset) {
<span class="line-modified"> 72         super(mark, pos, limit, cap, null, offset);</span>
 73         str = s;
 74         this.isReadOnly = true;
 75     }
 76 
 77     public CharBuffer duplicate() {
 78         return new StringCharBuffer(str, markValue(),
 79                                     position(), limit(), capacity(), offset);
 80     }
 81 
 82     public CharBuffer asReadOnlyBuffer() {
 83         return duplicate();
 84     }
 85 
 86     public final char get() {
 87         return str.charAt(nextGetIndex() + offset);
 88     }
 89 
 90     public final char get(int index) {
 91         return str.charAt(checkIndex(index) + offset);
 92     }
</pre>
</td>
<td>
<hr />
<pre>
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package java.nio;
 27 
 28 import java.util.Objects;
 29 
 30 // ## If the sequence is a string, use reflection to share its array
 31 
 32 class StringCharBuffer                                  // package-private
 33     extends CharBuffer
 34 {
 35     CharSequence str;
 36 
 37     StringCharBuffer(CharSequence s, int start, int end) { // package-private
<span class="line-modified"> 38         super(-1, start, end, s.length(), null);</span>
 39         int n = s.length();
<span class="line-modified"> 40         Objects.checkFromToIndex(start, end, n);</span>

 41         str = s;
 42         this.isReadOnly = true;
 43     }
 44 
 45     public CharBuffer slice() {
 46         return new StringCharBuffer(str,
 47                                     -1,
 48                                     0,
 49                                     this.remaining(),
 50                                     this.remaining(),
 51                                     offset + this.position());
 52     }
 53 
 54     @Override
 55     public CharBuffer slice(int index, int length) {
 56         Objects.checkFromIndexSize(index, length, limit());
 57         return new StringCharBuffer(str,
 58                                     -1,
 59                                     0,
 60                                     length,
 61                                     length,
 62                                     offset + index);
 63     }
 64 
 65     private StringCharBuffer(CharSequence s,
 66                              int mark,
 67                              int pos,
 68                              int limit,
 69                              int cap,
 70                              int offset) {
<span class="line-modified"> 71         super(mark, pos, limit, cap, null, offset, null);</span>
 72         str = s;
 73         this.isReadOnly = true;
 74     }
 75 
 76     public CharBuffer duplicate() {
 77         return new StringCharBuffer(str, markValue(),
 78                                     position(), limit(), capacity(), offset);
 79     }
 80 
 81     public CharBuffer asReadOnlyBuffer() {
 82         return duplicate();
 83     }
 84 
 85     public final char get() {
 86         return str.charAt(nextGetIndex() + offset);
 87     }
 88 
 89     public final char get(int index) {
 90         return str.charAt(checkIndex(index) + offset);
 91     }
</pre>
</td>
</tr>
</table>
<center><a href="MappedByteBuffer.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="X-Buffer.java.template.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>