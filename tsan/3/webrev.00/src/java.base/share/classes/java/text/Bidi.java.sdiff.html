<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/text/Bidi.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="AttributedString.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="BreakIterator.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/text/Bidi.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /*
 27  * (C) Copyright IBM Corp. 1999-2003 - All Rights Reserved
 28  *
 29  * The original version of this source code and documentation is
 30  * copyrighted and owned by IBM. These materials are provided
 31  * under terms of a License Agreement between IBM and Sun.
 32  * This technology is protected by multiple US and International
 33  * patents. This notice and attribution to IBM may not be removed.
 34  */
 35 
 36 package java.text;
 37 
<span class="line-modified"> 38 import sun.text.bidi.BidiBase;</span>
 39 
 40 /**
 41  * This class implements the Unicode Bidirectional Algorithm.
 42  * &lt;p&gt;
 43  * A Bidi object provides information on the bidirectional reordering of the text
 44  * used to create it.  This is required, for example, to properly display Arabic
 45  * or Hebrew text.  These languages are inherently mixed directional, as they order
 46  * numbers from left-to-right while ordering most other text from right-to-left.
 47  * &lt;p&gt;
 48  * Once created, a Bidi object can be queried to see if the text it represents is
 49  * all left-to-right or all right-to-left.  Such objects are very lightweight and
 50  * this text is relatively easy to process.
 51  * &lt;p&gt;
 52  * If there are multiple runs of text, information about the runs can be accessed
 53  * by indexing to get the start, limit, and level of a run.  The level represents
 54  * both the direction and the &#39;nesting level&#39; of a directional run.  Odd levels
 55  * are right-to-left, while even levels are left-to-right.  So for example level
 56  * 0 represents left-to-right text, while level 1 represents right-to-left text, and
 57  * level 2 represents left-to-right text embedded in a right-to-left run.
 58  *
</pre>
<hr />
<pre>
244      * {@literal &lt;} 0 or &amp;ge; the length of the line, return the base direction
245      * level.
246      *
247      * @param offset the index of the character for which to return the level
248      * @return the resolved level of the character at offset
249      */
250     public int getLevelAt(int offset) {
251         return bidiBase.getLevelAt(offset);
252     }
253 
254     /**
255      * Return the number of level runs.
256      * @return the number of level runs
257      */
258     public int getRunCount() {
259         return bidiBase.countRuns();
260     }
261 
262     /**
263      * Return the level of the nth logical run in this line.
<span class="line-modified">264      * @param run the index of the run, between 0 and &lt;code&gt;getRunCount()&lt;/code&gt;</span>
265      * @return the level of the run
266      */
267     public int getRunLevel(int run) {
268         return bidiBase.getRunLevel(run);
269     }
270 
271     /**
272      * Return the index of the character at the start of the nth logical run in this line, as
273      * an offset from the start of the line.
<span class="line-modified">274      * @param run the index of the run, between 0 and &lt;code&gt;getRunCount()&lt;/code&gt;</span>
275      * @return the start of the run
276      */
277     public int getRunStart(int run) {
278         return bidiBase.getRunStart(run);
279     }
280 
281     /**
282      * Return the index of the character past the end of the nth logical run in this line, as
283      * an offset from the start of the line.  For example, this will return the length
284      * of the line for the last run on the line.
<span class="line-modified">285      * @param run the index of the run, between 0 and &lt;code&gt;getRunCount()&lt;/code&gt;</span>
286      * @return limit the limit of the run
287      */
288     public int getRunLimit(int run) {
289         return bidiBase.getRunLimit(run);
290     }
291 
292     /**
293      * Return true if the specified text requires bidi analysis.  If this returns false,
294      * the text will display left-to-right.  Clients can then avoid constructing a Bidi object.
295      * Text in the Arabic Presentation Forms area of Unicode is presumed to already be shaped
296      * and ordered for display, and so will not cause this function to return true.
297      *
298      * @param text the text containing the characters to test
299      * @param start the start of the range of characters to test
300      * @param limit the limit of the range of characters to test
301      * @return true if the range of characters requires bidi analysis
302      */
303     public static boolean requiresBidi(char[] text, int start, int limit) {
304         return BidiBase.requiresBidi(text, start, limit);
305     }
306 
307     /**
308      * Reorder the objects in the array into visual order based on their levels.
309      * This is a utility function to use when you have a collection of objects
310      * representing runs of text in logical order, each run containing text
<span class="line-modified">311      * at a single level.  The elements at &lt;code&gt;index&lt;/code&gt; from</span>
<span class="line-modified">312      * &lt;code&gt;objectStart&lt;/code&gt; up to &lt;code&gt;objectStart + count&lt;/code&gt;</span>
313      * in the objects array will be reordered into visual order assuming
314      * each run of text has the level indicated by the corresponding element
<span class="line-modified">315      * in the levels array (at &lt;code&gt;index - objectStart + levelStart&lt;/code&gt;).</span>
316      *
317      * @param levels an array representing the bidi level of each object
318      * @param levelStart the start position in the levels array
319      * @param objects the array of objects to be reordered into visual order
320      * @param objectStart the start position in the objects array
321      * @param count the number of objects to reorder
322      */
323     public static void reorderVisually(byte[] levels, int levelStart, Object[] objects, int objectStart, int count) {
324         BidiBase.reorderVisually(levels, levelStart, objects, objectStart, count);
325     }
326 
327     /**
328      * Display the bidi internal state, used in debugging.
329      */
330     public String toString() {
331         return bidiBase.toString();
332     }
333 
334 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /*
 27  * (C) Copyright IBM Corp. 1999-2003 - All Rights Reserved
 28  *
 29  * The original version of this source code and documentation is
 30  * copyrighted and owned by IBM. These materials are provided
 31  * under terms of a License Agreement between IBM and Sun.
 32  * This technology is protected by multiple US and International
 33  * patents. This notice and attribution to IBM may not be removed.
 34  */
 35 
 36 package java.text;
 37 
<span class="line-modified"> 38 import jdk.internal.icu.text.BidiBase;</span>
 39 
 40 /**
 41  * This class implements the Unicode Bidirectional Algorithm.
 42  * &lt;p&gt;
 43  * A Bidi object provides information on the bidirectional reordering of the text
 44  * used to create it.  This is required, for example, to properly display Arabic
 45  * or Hebrew text.  These languages are inherently mixed directional, as they order
 46  * numbers from left-to-right while ordering most other text from right-to-left.
 47  * &lt;p&gt;
 48  * Once created, a Bidi object can be queried to see if the text it represents is
 49  * all left-to-right or all right-to-left.  Such objects are very lightweight and
 50  * this text is relatively easy to process.
 51  * &lt;p&gt;
 52  * If there are multiple runs of text, information about the runs can be accessed
 53  * by indexing to get the start, limit, and level of a run.  The level represents
 54  * both the direction and the &#39;nesting level&#39; of a directional run.  Odd levels
 55  * are right-to-left, while even levels are left-to-right.  So for example level
 56  * 0 represents left-to-right text, while level 1 represents right-to-left text, and
 57  * level 2 represents left-to-right text embedded in a right-to-left run.
 58  *
</pre>
<hr />
<pre>
244      * {@literal &lt;} 0 or &amp;ge; the length of the line, return the base direction
245      * level.
246      *
247      * @param offset the index of the character for which to return the level
248      * @return the resolved level of the character at offset
249      */
250     public int getLevelAt(int offset) {
251         return bidiBase.getLevelAt(offset);
252     }
253 
254     /**
255      * Return the number of level runs.
256      * @return the number of level runs
257      */
258     public int getRunCount() {
259         return bidiBase.countRuns();
260     }
261 
262     /**
263      * Return the level of the nth logical run in this line.
<span class="line-modified">264      * @param run the index of the run, between 0 and {@code getRunCount()}</span>
265      * @return the level of the run
266      */
267     public int getRunLevel(int run) {
268         return bidiBase.getRunLevel(run);
269     }
270 
271     /**
272      * Return the index of the character at the start of the nth logical run in this line, as
273      * an offset from the start of the line.
<span class="line-modified">274      * @param run the index of the run, between 0 and {@code getRunCount()}</span>
275      * @return the start of the run
276      */
277     public int getRunStart(int run) {
278         return bidiBase.getRunStart(run);
279     }
280 
281     /**
282      * Return the index of the character past the end of the nth logical run in this line, as
283      * an offset from the start of the line.  For example, this will return the length
284      * of the line for the last run on the line.
<span class="line-modified">285      * @param run the index of the run, between 0 and {@code getRunCount()}</span>
286      * @return limit the limit of the run
287      */
288     public int getRunLimit(int run) {
289         return bidiBase.getRunLimit(run);
290     }
291 
292     /**
293      * Return true if the specified text requires bidi analysis.  If this returns false,
294      * the text will display left-to-right.  Clients can then avoid constructing a Bidi object.
295      * Text in the Arabic Presentation Forms area of Unicode is presumed to already be shaped
296      * and ordered for display, and so will not cause this function to return true.
297      *
298      * @param text the text containing the characters to test
299      * @param start the start of the range of characters to test
300      * @param limit the limit of the range of characters to test
301      * @return true if the range of characters requires bidi analysis
302      */
303     public static boolean requiresBidi(char[] text, int start, int limit) {
304         return BidiBase.requiresBidi(text, start, limit);
305     }
306 
307     /**
308      * Reorder the objects in the array into visual order based on their levels.
309      * This is a utility function to use when you have a collection of objects
310      * representing runs of text in logical order, each run containing text
<span class="line-modified">311      * at a single level.  The elements at {@code index} from</span>
<span class="line-modified">312      * {@code objectStart} up to {@code objectStart + count}</span>
313      * in the objects array will be reordered into visual order assuming
314      * each run of text has the level indicated by the corresponding element
<span class="line-modified">315      * in the levels array (at {@code index - objectStart + levelStart}).</span>
316      *
317      * @param levels an array representing the bidi level of each object
318      * @param levelStart the start position in the levels array
319      * @param objects the array of objects to be reordered into visual order
320      * @param objectStart the start position in the objects array
321      * @param count the number of objects to reorder
322      */
323     public static void reorderVisually(byte[] levels, int levelStart, Object[] objects, int objectStart, int count) {
324         BidiBase.reorderVisually(levels, levelStart, objects, objectStart, count);
325     }
326 
327     /**
328      * Display the bidi internal state, used in debugging.
329      */
330     public String toString() {
331         return bidiBase.toString();
332     }
333 
334 }
</pre>
</td>
</tr>
</table>
<center><a href="AttributedString.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="BreakIterator.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>