<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/util/zip/CheckedInputStream.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CRC32.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="CheckedOutputStream.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/zip/CheckedInputStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1996, 2006, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1996, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 35,12 ***</span>
   *
   * @see         Checksum
   * @author      David Connelly
   * @since 1.1
   */
<span class="line-modified">! public</span>
<span class="line-removed">- class CheckedInputStream extends FilterInputStream {</span>
      private Checksum cksum;
  
      /**
       * Creates an input stream using the specified Checksum.
       * @param in the input stream
<span class="line-new-header">--- 35,11 ---</span>
   *
   * @see         Checksum
   * @author      David Connelly
   * @since 1.1
   */
<span class="line-modified">! public class CheckedInputStream extends FilterInputStream {</span>
      private Checksum cksum;
  
      /**
       * Creates an input stream using the specified Checksum.
       * @param in the input stream
</pre>
<hr />
<pre>
<span class="line-old-header">*** 52,34 ***</span>
      }
  
      /**
       * Reads a byte. Will block if no input is available.
       * @return the byte read, or -1 if the end of the stream is reached.
<span class="line-modified">!      * @exception IOException if an I/O error has occurred</span>
       */
      public int read() throws IOException {
          int b = in.read();
          if (b != -1) {
              cksum.update(b);
          }
          return b;
      }
  
      /**
<span class="line-modified">!      * Reads into an array of bytes. If &lt;code&gt;len&lt;/code&gt; is not zero, the method</span>
       * blocks until some input is available; otherwise, no
<span class="line-modified">!      * bytes are read and &lt;code&gt;0&lt;/code&gt; is returned.</span>
       * @param buf the buffer into which the data is read
<span class="line-modified">!      * @param off the start offset in the destination array &lt;code&gt;b&lt;/code&gt;</span>
       * @param len the maximum number of bytes read
       * @return    the actual number of bytes read, or -1 if the end
       *            of the stream is reached.
<span class="line-modified">!      * @exception  NullPointerException If &lt;code&gt;buf&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.</span>
<span class="line-modified">!      * @exception  IndexOutOfBoundsException If &lt;code&gt;off&lt;/code&gt; is negative,</span>
<span class="line-modified">!      * &lt;code&gt;len&lt;/code&gt; is negative, or &lt;code&gt;len&lt;/code&gt; is greater than</span>
<span class="line-modified">!      * &lt;code&gt;buf.length - off&lt;/code&gt;</span>
<span class="line-modified">!      * @exception IOException if an I/O error has occurred</span>
       */
      public int read(byte[] buf, int off, int len) throws IOException {
          len = in.read(buf, off, len);
          if (len != -1) {
              cksum.update(buf, off, len);
<span class="line-new-header">--- 51,34 ---</span>
      }
  
      /**
       * Reads a byte. Will block if no input is available.
       * @return the byte read, or -1 if the end of the stream is reached.
<span class="line-modified">!      * @throws    IOException if an I/O error has occurred</span>
       */
      public int read() throws IOException {
          int b = in.read();
          if (b != -1) {
              cksum.update(b);
          }
          return b;
      }
  
      /**
<span class="line-modified">!      * Reads into an array of bytes. If {@code len} is not zero, the method</span>
       * blocks until some input is available; otherwise, no
<span class="line-modified">!      * bytes are read and {@code 0} is returned.</span>
       * @param buf the buffer into which the data is read
<span class="line-modified">!      * @param off the start offset in the destination array {@code b}</span>
       * @param len the maximum number of bytes read
       * @return    the actual number of bytes read, or -1 if the end
       *            of the stream is reached.
<span class="line-modified">!      * @throws     NullPointerException If {@code buf} is {@code null}.</span>
<span class="line-modified">!      * @throws     IndexOutOfBoundsException If {@code off} is negative,</span>
<span class="line-modified">!      * {@code len} is negative, or {@code len} is greater than</span>
<span class="line-modified">!      * {@code buf.length - off}</span>
<span class="line-modified">!      * @throws    IOException if an I/O error has occurred</span>
       */
      public int read(byte[] buf, int off, int len) throws IOException {
          len = in.read(buf, off, len);
          if (len != -1) {
              cksum.update(buf, off, len);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 89,11 ***</span>
  
      /**
       * Skips specified number of bytes of input.
       * @param n the number of bytes to skip
       * @return the actual number of bytes skipped
<span class="line-modified">!      * @exception IOException if an I/O error has occurred</span>
       */
      public long skip(long n) throws IOException {
          byte[] buf = new byte[512];
          long total = 0;
          while (total &lt; n) {
<span class="line-new-header">--- 88,11 ---</span>
  
      /**
       * Skips specified number of bytes of input.
       * @param n the number of bytes to skip
       * @return the actual number of bytes skipped
<span class="line-modified">!      * @throws    IOException if an I/O error has occurred</span>
       */
      public long skip(long n) throws IOException {
          byte[] buf = new byte[512];
          long total = 0;
          while (total &lt; n) {
</pre>
<center><a href="CRC32.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="CheckedOutputStream.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>