<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/VersionProps.java.template</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="VerifyError.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="VirtualMachineError.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/VersionProps.java.template</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1999, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 25 
 26 package java.lang;
 27 
 28 import java.io.PrintStream;
 29 import java.util.Arrays;
 30 import java.util.List;
 31 import java.util.Map;
 32 import java.util.Optional;
 33 
 34 class VersionProps {
 35 
 36     private static final String launcher_name =
 37         &quot;@@LAUNCHER_NAME@@&quot;;
 38 
 39     private static final String java_version =
 40         &quot;@@VERSION_SHORT@@&quot;;
 41 
 42     private static final String java_version_date =
 43         &quot;@@VERSION_DATE@@&quot;;
 44 

 45     private static final String java_runtime_name =
 46         &quot;@@RUNTIME_NAME@@&quot;;
 47 

 48     private static final String java_runtime_version =
 49         &quot;@@VERSION_STRING@@&quot;;
 50 
 51     private static final String VERSION_NUMBER =
 52         &quot;@@VERSION_NUMBER@@&quot;;
 53 
 54     private static final String VERSION_SPECIFICATION =
 55         &quot;@@VERSION_SPECIFICATION@@&quot;;
 56 
 57     private static final String VERSION_BUILD =
 58         &quot;@@VERSION_BUILD@@&quot;;
 59 
 60     private static final String VERSION_PRE =
 61         &quot;@@VERSION_PRE@@&quot;;
 62 
 63     private static final String VERSION_OPT =
 64         &quot;@@VERSION_OPT@@&quot;;
 65 
 66     private static final boolean isLTS =
 67         &quot;@@VERSION_OPT@@&quot;.startsWith(&quot;LTS&quot;);
 68 
 69     private static final String CLASSFILE_MAJOR_MINOR =
 70         &quot;@@VERSION_CLASSFILE_MAJOR@@.@@VERSION_CLASSFILE_MINOR@@&quot;;
 71 
<span class="line-removed"> 72     private static final String VENDOR_VERSION_STRING =</span>
<span class="line-removed"> 73         &quot;@@VENDOR_VERSION_STRING@@&quot;;</span>
<span class="line-removed"> 74 </span>
<span class="line-removed"> 75     private static final String vendor_version =</span>
<span class="line-removed"> 76         (!VENDOR_VERSION_STRING.isEmpty()</span>
<span class="line-removed"> 77          ? &quot; &quot; + VENDOR_VERSION_STRING : &quot;&quot;);</span>
<span class="line-removed"> 78 </span>
 79     private static final String VENDOR =
 80         &quot;@@VENDOR@@&quot;;
 81 
 82     private static final String VENDOR_URL =
 83         &quot;@@VENDOR_URL@@&quot;;
 84 
<span class="line-modified"> 85     private static final String VENDOR_URL_BUG =</span>







 86         &quot;@@VENDOR_URL_BUG@@&quot;;
 87 




 88     /**
 89      * Initialize system properties using build provided values.
 90      *
 91      * @param props Map instance in which to insert the properties
 92      */
 93     public static void init(Map&lt;String, String&gt; props) {
 94         props.put(&quot;java.version&quot;, java_version);
 95         props.put(&quot;java.version.date&quot;, java_version_date);
 96         props.put(&quot;java.runtime.version&quot;, java_runtime_version);
 97         props.put(&quot;java.runtime.name&quot;, java_runtime_name);
<span class="line-modified"> 98         if (!VENDOR_VERSION_STRING.isEmpty())</span>
<span class="line-modified"> 99             props.put(&quot;java.vendor.version&quot;, VENDOR_VERSION_STRING);</span>
100 
101         props.put(&quot;java.class.version&quot;, CLASSFILE_MAJOR_MINOR);
102 
103         props.put(&quot;java.specification.version&quot;, VERSION_SPECIFICATION);
104         props.put(&quot;java.specification.name&quot;, &quot;Java Platform API Specification&quot;);
105         props.put(&quot;java.specification.vendor&quot;, &quot;Oracle Corporation&quot;);
106 
107         props.put(&quot;java.vendor&quot;, VENDOR);
108         props.put(&quot;java.vendor.url&quot;, VENDOR_URL);
109         props.put(&quot;java.vendor.url.bug&quot;, VENDOR_URL_BUG);
110     }
111 
112     private static int parseVersionNumber(String version, int prevIndex, int index) {
113         if (index - prevIndex &gt; 1 &amp;&amp;
114             Character.digit(version.charAt(prevIndex), 10) &lt;= 0)
115             throw new IllegalArgumentException(&quot;Leading zeros not supported (&quot; +
116                     version.substring(prevIndex, index) + &quot;)&quot;);
117         return Integer.parseInt(version, prevIndex, index, 10);
118     }
119 
</pre>
<hr />
<pre>
199         if (err) {
200             ps.println(launcher_name + &quot; version \&quot;&quot; + java_version + &quot;\&quot;&quot;
201                        + &quot; &quot; + java_version_date
202                        + (isLTS ? &quot; LTS&quot; : &quot;&quot;));
203         } else {
204             /* Use a format more in line with GNU conventions */
205             ps.println(launcher_name + &quot; &quot; + java_version
206                        + &quot; &quot; + java_version_date
207                        + (isLTS ? &quot; LTS&quot; : &quot;&quot;));
208         }
209 
210         /* Second line: runtime version (ie, libraries). */
211         String jdk_debug_level = System.getProperty(&quot;jdk.debug&quot;, &quot;release&quot;);
212         if (&quot;release&quot;.equals(jdk_debug_level)) {
213            /* Do not show debug level &quot;release&quot; builds */
214             jdk_debug_level = &quot;&quot;;
215         } else {
216             jdk_debug_level = jdk_debug_level + &quot; &quot;;
217         }
218 



219         ps.println(java_runtime_name + vendor_version
220                    + &quot; (&quot; + jdk_debug_level + &quot;build &quot; + java_runtime_version + &quot;)&quot;);
221 
222         /* Third line: JVM information. */
223         String java_vm_name    = System.getProperty(&quot;java.vm.name&quot;);
224         String java_vm_version = System.getProperty(&quot;java.vm.version&quot;);
225         String java_vm_info    = System.getProperty(&quot;java.vm.info&quot;);
226         ps.println(java_vm_name + vendor_version
227                    + &quot; (&quot; + jdk_debug_level + &quot;build &quot; + java_vm_version + &quot;, &quot;
228                             + java_vm_info + &quot;)&quot;);
229 
230     }
231 
232 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1999, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 25 
 26 package java.lang;
 27 
 28 import java.io.PrintStream;
 29 import java.util.Arrays;
 30 import java.util.List;
 31 import java.util.Map;
 32 import java.util.Optional;
 33 
 34 class VersionProps {
 35 
 36     private static final String launcher_name =
 37         &quot;@@LAUNCHER_NAME@@&quot;;
 38 
 39     private static final String java_version =
 40         &quot;@@VERSION_SHORT@@&quot;;
 41 
 42     private static final String java_version_date =
 43         &quot;@@VERSION_DATE@@&quot;;
 44 
<span class="line-added"> 45     // This field is read by HotSpot</span>
 46     private static final String java_runtime_name =
 47         &quot;@@RUNTIME_NAME@@&quot;;
 48 
<span class="line-added"> 49     // This field is read by HotSpot</span>
 50     private static final String java_runtime_version =
 51         &quot;@@VERSION_STRING@@&quot;;
 52 
 53     private static final String VERSION_NUMBER =
 54         &quot;@@VERSION_NUMBER@@&quot;;
 55 
 56     private static final String VERSION_SPECIFICATION =
 57         &quot;@@VERSION_SPECIFICATION@@&quot;;
 58 
 59     private static final String VERSION_BUILD =
 60         &quot;@@VERSION_BUILD@@&quot;;
 61 
 62     private static final String VERSION_PRE =
 63         &quot;@@VERSION_PRE@@&quot;;
 64 
 65     private static final String VERSION_OPT =
 66         &quot;@@VERSION_OPT@@&quot;;
 67 
 68     private static final boolean isLTS =
 69         &quot;@@VERSION_OPT@@&quot;.startsWith(&quot;LTS&quot;);
 70 
 71     private static final String CLASSFILE_MAJOR_MINOR =
 72         &quot;@@VERSION_CLASSFILE_MAJOR@@.@@VERSION_CLASSFILE_MINOR@@&quot;;
 73 







 74     private static final String VENDOR =
 75         &quot;@@VENDOR@@&quot;;
 76 
 77     private static final String VENDOR_URL =
 78         &quot;@@VENDOR_URL@@&quot;;
 79 
<span class="line-modified"> 80     // The remaining VENDOR_* fields must not be final,</span>
<span class="line-added"> 81     // so that they can be redefined by jlink plugins</span>
<span class="line-added"> 82 </span>
<span class="line-added"> 83     // This field is read by HotSpot</span>
<span class="line-added"> 84     private static String VENDOR_VERSION =</span>
<span class="line-added"> 85         &quot;@@VENDOR_VERSION_STRING@@&quot;;</span>
<span class="line-added"> 86 </span>
<span class="line-added"> 87     private static String VENDOR_URL_BUG =</span>
 88         &quot;@@VENDOR_URL_BUG@@&quot;;
 89 
<span class="line-added"> 90     // This field is read by HotSpot</span>
<span class="line-added"> 91     private static String VENDOR_URL_VM_BUG =</span>
<span class="line-added"> 92         &quot;@@VENDOR_URL_VM_BUG@@&quot;;</span>
<span class="line-added"> 93 </span>
 94     /**
 95      * Initialize system properties using build provided values.
 96      *
 97      * @param props Map instance in which to insert the properties
 98      */
 99     public static void init(Map&lt;String, String&gt; props) {
100         props.put(&quot;java.version&quot;, java_version);
101         props.put(&quot;java.version.date&quot;, java_version_date);
102         props.put(&quot;java.runtime.version&quot;, java_runtime_version);
103         props.put(&quot;java.runtime.name&quot;, java_runtime_name);
<span class="line-modified">104         if (!VENDOR_VERSION.isEmpty())</span>
<span class="line-modified">105             props.put(&quot;java.vendor.version&quot;, VENDOR_VERSION);</span>
106 
107         props.put(&quot;java.class.version&quot;, CLASSFILE_MAJOR_MINOR);
108 
109         props.put(&quot;java.specification.version&quot;, VERSION_SPECIFICATION);
110         props.put(&quot;java.specification.name&quot;, &quot;Java Platform API Specification&quot;);
111         props.put(&quot;java.specification.vendor&quot;, &quot;Oracle Corporation&quot;);
112 
113         props.put(&quot;java.vendor&quot;, VENDOR);
114         props.put(&quot;java.vendor.url&quot;, VENDOR_URL);
115         props.put(&quot;java.vendor.url.bug&quot;, VENDOR_URL_BUG);
116     }
117 
118     private static int parseVersionNumber(String version, int prevIndex, int index) {
119         if (index - prevIndex &gt; 1 &amp;&amp;
120             Character.digit(version.charAt(prevIndex), 10) &lt;= 0)
121             throw new IllegalArgumentException(&quot;Leading zeros not supported (&quot; +
122                     version.substring(prevIndex, index) + &quot;)&quot;);
123         return Integer.parseInt(version, prevIndex, index, 10);
124     }
125 
</pre>
<hr />
<pre>
205         if (err) {
206             ps.println(launcher_name + &quot; version \&quot;&quot; + java_version + &quot;\&quot;&quot;
207                        + &quot; &quot; + java_version_date
208                        + (isLTS ? &quot; LTS&quot; : &quot;&quot;));
209         } else {
210             /* Use a format more in line with GNU conventions */
211             ps.println(launcher_name + &quot; &quot; + java_version
212                        + &quot; &quot; + java_version_date
213                        + (isLTS ? &quot; LTS&quot; : &quot;&quot;));
214         }
215 
216         /* Second line: runtime version (ie, libraries). */
217         String jdk_debug_level = System.getProperty(&quot;jdk.debug&quot;, &quot;release&quot;);
218         if (&quot;release&quot;.equals(jdk_debug_level)) {
219            /* Do not show debug level &quot;release&quot; builds */
220             jdk_debug_level = &quot;&quot;;
221         } else {
222             jdk_debug_level = jdk_debug_level + &quot; &quot;;
223         }
224 
<span class="line-added">225         String vendor_version = (VENDOR_VERSION.isEmpty()</span>
<span class="line-added">226                                  ? &quot;&quot; : &quot; &quot; + VENDOR_VERSION);</span>
<span class="line-added">227 </span>
228         ps.println(java_runtime_name + vendor_version
229                    + &quot; (&quot; + jdk_debug_level + &quot;build &quot; + java_runtime_version + &quot;)&quot;);
230 
231         /* Third line: JVM information. */
232         String java_vm_name    = System.getProperty(&quot;java.vm.name&quot;);
233         String java_vm_version = System.getProperty(&quot;java.vm.version&quot;);
234         String java_vm_info    = System.getProperty(&quot;java.vm.info&quot;);
235         ps.println(java_vm_name + vendor_version
236                    + &quot; (&quot; + jdk_debug_level + &quot;build &quot; + java_vm_version + &quot;, &quot;
237                             + java_vm_info + &quot;)&quot;);
238 
239     }
240 
241 }
</pre>
</td>
</tr>
</table>
<center><a href="VerifyError.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="VirtualMachineError.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>