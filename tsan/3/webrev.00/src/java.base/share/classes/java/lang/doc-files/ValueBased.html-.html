<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.base/share/classes/java/lang/doc-files/ValueBased.html</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 &lt;!doctype html&gt;
 2 &lt;html lang=&quot;en&quot;&gt;
 3 &lt;head&gt;
 4   &lt;title&gt;Value-based Classes&lt;/title&gt;
 5   &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../../../../stylesheet.css&quot; title=&quot;Style&quot;&gt;
 6 &lt;/head&gt;
 7 &lt;body&gt;
 8 &lt;h2 id=&quot;ValueBased&quot;&gt;Value-based Classes&lt;/h2&gt;
 9 
10 Some classes, such as &lt;code&gt;java.util.Optional&lt;/code&gt; and
11 &lt;code&gt;java.time.LocalDateTime&lt;/code&gt;, are &lt;em&gt;value-based&lt;/em&gt;.  Instances of a
12 value-based class:
13 &lt;ul&gt;
14     &lt;li&gt;are final and immutable (though may contain references to mutable
15         objects);&lt;/li&gt;
16     &lt;li&gt;have implementations of &lt;code&gt;equals&lt;/code&gt;,
17         &lt;code&gt;hashCode&lt;/code&gt;, and &lt;code&gt;toString&lt;/code&gt; which are computed
18         solely from the instance&#39;s state and not from its identity or the state
19         of any other object or variable;&lt;/li&gt;
20     &lt;li&gt;make no use of identity-sensitive operations such as reference
21         equality (&lt;code&gt;==&lt;/code&gt;) between instances, identity hash code of
22         instances, or synchronization on an instances&#39;s intrinsic lock;&lt;/li&gt;
23     &lt;li&gt;are considered equal solely based on &lt;code&gt;equals()&lt;/code&gt;, not
24         based on reference equality (&lt;code&gt;==&lt;/code&gt;);&lt;/li&gt;
25     &lt;li&gt;do not have accessible constructors, but are instead instantiated
26         through factory methods which make no committment as to the identity
27         of returned instances;&lt;/li&gt;
28     &lt;li&gt;are &lt;em&gt;freely substitutable&lt;/em&gt; when equal, meaning that interchanging
29         any two instances &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; that are equal
30         according to &lt;code&gt;equals()&lt;/code&gt; in any computation or method
31         invocation should produce no visible change in behavior.
32     &lt;/li&gt;
33 &lt;/ul&gt;
34 
35 &lt;p&gt;A program may produce unpredictable results if it attempts to distinguish two
36     references to equal values of a value-based class, whether directly via reference
37     equality or indirectly via an appeal to synchronization, identity hashing,
38     serialization, or any other identity-sensitive mechanism.  Use of such
39     identity-sensitive operations on instances of value-based classes may have
40     unpredictable effects and should be avoided.&lt;/p&gt;
41 &lt;/body&gt;
42 &lt;/html&gt;
    </pre>
  </body>
</html>