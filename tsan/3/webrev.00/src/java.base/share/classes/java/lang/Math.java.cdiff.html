<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/lang/Math.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="Long.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Module.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/Math.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1994, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 90,16 ***</span>
   * produce correct results, which in some cases means the operations
   * will not overflow the range of values of the computation.
   * The best practice is to choose the primitive type and algorithm to avoid
   * overflow. In cases where the size is {@code int} or {@code long} and
   * overflow errors need to be detected, the methods {@code addExact},
<span class="line-modified">!  * {@code subtractExact}, {@code multiplyExact}, and {@code toIntExact}</span>
   * throw an {@code ArithmeticException} when the results overflow.
<span class="line-modified">!  * For other arithmetic operations such as divide, absolute value,</span>
<span class="line-modified">!  * increment by one, decrement by one, and negation, overflow occurs only with</span>
<span class="line-modified">!  * a specific minimum or maximum value and should be checked against</span>
<span class="line-removed">-  * the minimum or maximum as appropriate.</span>
   *
   * @author  unascribed
   * @author  Joseph D. Darcy
   * @since   1.0
   */
<span class="line-new-header">--- 90,16 ---</span>
   * produce correct results, which in some cases means the operations
   * will not overflow the range of values of the computation.
   * The best practice is to choose the primitive type and algorithm to avoid
   * overflow. In cases where the size is {@code int} or {@code long} and
   * overflow errors need to be detected, the methods {@code addExact},
<span class="line-modified">!  * {@code subtractExact}, {@code multiplyExact}, {@code toIntExact},</span>
<span class="line-added">+  * {@code incrementExact}, {@code decrementExact} and {@code negateExact}</span>
   * throw an {@code ArithmeticException} when the results overflow.
<span class="line-modified">!  * For the arithmetic operations divide and absolute value, overflow</span>
<span class="line-modified">!  * occurs only with a specific minimum or maximum value and</span>
<span class="line-modified">!  * should be checked against the minimum or maximum as appropriate.</span>
   *
   * @author  unascribed
   * @author  Joseph D. Darcy
   * @since   1.0
   */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 438,10 ***</span>
<span class="line-new-header">--- 438,11 ---</span>
       * @param   a   a value.
       * @return  the smallest (closest to negative infinity)
       *          floating-point value that is greater than or equal to
       *          the argument and is equal to a mathematical integer.
       */
<span class="line-added">+     @HotSpotIntrinsicCandidate</span>
      public static double ceil(double a) {
          return StrictMath.ceil(a); // default impl. delegates to StrictMath
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 457,10 ***</span>
<span class="line-new-header">--- 458,11 ---</span>
       * @param   a   a value.
       * @return  the largest (closest to positive infinity)
       *          floating-point value that less than or equal to the argument
       *          and is equal to a mathematical integer.
       */
<span class="line-added">+     @HotSpotIntrinsicCandidate</span>
      public static double floor(double a) {
          return StrictMath.floor(a); // default impl. delegates to StrictMath
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 476,10 ***</span>
<span class="line-new-header">--- 478,11 ---</span>
       *
       * @param   a   a {@code double} value.
       * @return  the closest floating-point value to {@code a} that is
       *          equal to a mathematical integer.
       */
<span class="line-added">+     @HotSpotIntrinsicCandidate</span>
      public static double rint(double a) {
          return StrictMath.rint(a); // default impl. delegates to StrictMath
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 950,10 ***</span>
<span class="line-new-header">--- 953,11 ---</span>
      }
  
      /**
       * Returns the argument incremented by one, throwing an exception if the
       * result overflows an {@code int}.
<span class="line-added">+      * The overflow only occurs for {@linkplain Integer#MAX_VALUE the maximum value}.</span>
       *
       * @param a the value to increment
       * @return the result
       * @throws ArithmeticException if the result overflows an int
       * @since 1.8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 968,10 ***</span>
<span class="line-new-header">--- 972,11 ---</span>
      }
  
      /**
       * Returns the argument incremented by one, throwing an exception if the
       * result overflows a {@code long}.
<span class="line-added">+      * The overflow only occurs for {@linkplain Long#MAX_VALUE the maximum value}.</span>
       *
       * @param a the value to increment
       * @return the result
       * @throws ArithmeticException if the result overflows a long
       * @since 1.8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 986,10 ***</span>
<span class="line-new-header">--- 991,11 ---</span>
      }
  
      /**
       * Returns the argument decremented by one, throwing an exception if the
       * result overflows an {@code int}.
<span class="line-added">+      * The overflow only occurs for {@linkplain Integer#MIN_VALUE the minimum value}.</span>
       *
       * @param a the value to decrement
       * @return the result
       * @throws ArithmeticException if the result overflows an int
       * @since 1.8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1004,10 ***</span>
<span class="line-new-header">--- 1010,11 ---</span>
      }
  
      /**
       * Returns the argument decremented by one, throwing an exception if the
       * result overflows a {@code long}.
<span class="line-added">+      * The overflow only occurs for {@linkplain Long#MIN_VALUE the minimum value}.</span>
       *
       * @param a the value to decrement
       * @return the result
       * @throws ArithmeticException if the result overflows a long
       * @since 1.8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1022,10 ***</span>
<span class="line-new-header">--- 1029,11 ---</span>
      }
  
      /**
       * Returns the negation of the argument, throwing an exception if the
       * result overflows an {@code int}.
<span class="line-added">+      * The overflow only occurs for {@linkplain Integer#MIN_VALUE the minimum value}.</span>
       *
       * @param a the value to negate
       * @return the result
       * @throws ArithmeticException if the result overflows an int
       * @since 1.8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1040,10 ***</span>
<span class="line-new-header">--- 1048,11 ---</span>
      }
  
      /**
       * Returns the negation of the argument, throwing an exception if the
       * result overflows a {@code long}.
<span class="line-added">+      * The overflow only occurs for {@linkplain Long#MIN_VALUE the minimum value}.</span>
       *
       * @param a the value to negate
       * @return the result
       * @throws ArithmeticException if the result overflows a long
       * @since 1.8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1056,11 ***</span>
  
          return -a;
      }
  
      /**
<span class="line-modified">!      * Returns the value of the {@code long} argument;</span>
       * throwing an exception if the value overflows an {@code int}.
       *
       * @param value the long value
       * @return the argument as an int
       * @throws ArithmeticException if the {@code argument} overflows an int
<span class="line-new-header">--- 1065,11 ---</span>
  
          return -a;
      }
  
      /**
<span class="line-modified">!      * Returns the value of the {@code long} argument,</span>
       * throwing an exception if the value overflows an {@code int}.
       *
       * @param value the long value
       * @return the argument as an int
       * @throws ArithmeticException if the {@code argument} overflows an int
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1248,20 ***</span>
       * and the {@code /} operator that returns the integer closest to zero.
       * &lt;p&gt;
       * Examples:
       * &lt;ul&gt;
       *   &lt;li&gt;If the signs of the arguments are the same, the results
<span class="line-modified">!      *       of {@code floorMod} and the {@code %} operator are the same.  &lt;br&gt;</span>
       *       &lt;ul&gt;
<span class="line-modified">!      *       &lt;li&gt;{@code floorMod(4, 3) == 1}; &amp;nbsp; and {@code (4 % 3) == 1}&lt;/li&gt;</span>
       *       &lt;/ul&gt;
<span class="line-removed">-      *   &lt;li&gt;If the signs of the arguments are different, the results differ from the {@code %} operator.&lt;br&gt;</span>
<span class="line-removed">-      *      &lt;ul&gt;</span>
<span class="line-removed">-      *      &lt;li&gt;{@code floorMod(+4, -3) == -2}; &amp;nbsp; and {@code (+4 % -3) == +1} &lt;/li&gt;</span>
<span class="line-removed">-      *      &lt;li&gt;{@code floorMod(-4, +3) == +2}; &amp;nbsp; and {@code (-4 % +3) == -1} &lt;/li&gt;</span>
<span class="line-removed">-      *      &lt;li&gt;{@code floorMod(-4, -3) == -1}; &amp;nbsp; and {@code (-4 % -3) == -1 } &lt;/li&gt;</span>
<span class="line-removed">-      *      &lt;/ul&gt;</span>
       *   &lt;/li&gt;
       * &lt;/ul&gt;
       * &lt;p&gt;
       * If the signs of arguments are unknown and a positive modulus
       * is needed it can be computed as {@code (floorMod(x, y) + abs(y)) % abs(y)}.
<span class="line-new-header">--- 1257,21 ---</span>
       * and the {@code /} operator that returns the integer closest to zero.
       * &lt;p&gt;
       * Examples:
       * &lt;ul&gt;
       *   &lt;li&gt;If the signs of the arguments are the same, the results
<span class="line-modified">!      *       of {@code floorMod} and the {@code %} operator are the same.&lt;br&gt;</span>
<span class="line-added">+      *       &lt;ul&gt;</span>
<span class="line-added">+      *       &lt;li&gt;{@code floorMod(+4, +3) == +1}; &amp;nbsp; and {@code (+4 % +3) == +1}&lt;/li&gt;</span>
<span class="line-added">+      *       &lt;li&gt;{@code floorMod(-4, -3) == -1}; &amp;nbsp; and {@code (-4 % -3) == -1}&lt;/li&gt;</span>
<span class="line-added">+      *       &lt;/ul&gt;</span>
<span class="line-added">+      *   &lt;li&gt;If the signs of the arguments are different, the results</span>
<span class="line-added">+      *       differ from the {@code %} operator.&lt;br&gt;</span>
       *       &lt;ul&gt;
<span class="line-modified">!      *       &lt;li&gt;{@code floorMod(+4, -3) == -2}; &amp;nbsp; and {@code (+4 % -3) == +1}&lt;/li&gt;</span>
<span class="line-added">+      *       &lt;li&gt;{@code floorMod(-4, +3) == +2}; &amp;nbsp; and {@code (-4 % +3) == -1}&lt;/li&gt;</span>
       *       &lt;/ul&gt;
       *   &lt;/li&gt;
       * &lt;/ul&gt;
       * &lt;p&gt;
       * If the signs of arguments are unknown and a positive modulus
       * is needed it can be computed as {@code (floorMod(x, y) + abs(y)) % abs(y)}.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1272,11 ***</span>
       * @throws ArithmeticException if the divisor {@code y} is zero
       * @see #floorDiv(int, int)
       * @since 1.8
       */
      public static int floorMod(int x, int y) {
<span class="line-modified">!         return x - floorDiv(x, y) * y;</span>
      }
  
      /**
       * Returns the floor modulus of the {@code long} and {@code int} arguments.
       * &lt;p&gt;
<span class="line-new-header">--- 1282,16 ---</span>
       * @throws ArithmeticException if the divisor {@code y} is zero
       * @see #floorDiv(int, int)
       * @since 1.8
       */
      public static int floorMod(int x, int y) {
<span class="line-modified">!         int mod = x % y;</span>
<span class="line-added">+         // if the signs are different and modulo not zero, adjust result</span>
<span class="line-added">+         if ((mod ^ y) &lt; 0 &amp;&amp; mod != 0) {</span>
<span class="line-added">+             mod += y;</span>
<span class="line-added">+         }</span>
<span class="line-added">+         return mod;</span>
      }
  
      /**
       * Returns the floor modulus of the {@code long} and {@code int} arguments.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1299,11 ***</span>
       * @see #floorDiv(long, int)
       * @since 9
       */
      public static int floorMod(long x, int y) {
          // Result cannot overflow the range of int.
<span class="line-modified">!         return (int)(x - floorDiv(x, y) * y);</span>
      }
  
      /**
       * Returns the floor modulus of the {@code long} arguments.
       * &lt;p&gt;
<span class="line-new-header">--- 1314,11 ---</span>
       * @see #floorDiv(long, int)
       * @since 9
       */
      public static int floorMod(long x, int y) {
          // Result cannot overflow the range of int.
<span class="line-modified">!         return (int)floorMod(x, (long)y);</span>
      }
  
      /**
       * Returns the floor modulus of the {@code long} arguments.
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1325,11 ***</span>
       * @throws ArithmeticException if the divisor {@code y} is zero
       * @see #floorDiv(long, long)
       * @since 1.8
       */
      public static long floorMod(long x, long y) {
<span class="line-modified">!         return x - floorDiv(x, y) * y;</span>
      }
  
      /**
       * Returns the absolute value of an {@code int} value.
       * If the argument is not negative, the argument is returned.
<span class="line-new-header">--- 1340,16 ---</span>
       * @throws ArithmeticException if the divisor {@code y} is zero
       * @see #floorDiv(long, long)
       * @since 1.8
       */
      public static long floorMod(long x, long y) {
<span class="line-modified">!         long mod = x % y;</span>
<span class="line-added">+         // if the signs are different and modulo not zero, adjust result</span>
<span class="line-added">+         if ((x ^ y) &lt; 0 &amp;&amp; mod != 0) {</span>
<span class="line-added">+             mod += y;</span>
<span class="line-added">+         }</span>
<span class="line-added">+         return mod;</span>
      }
  
      /**
       * Returns the absolute value of an {@code int} value.
       * If the argument is not negative, the argument is returned.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1341,10 ***</span>
<span class="line-new-header">--- 1361,11 ---</span>
       * negative.
       *
       * @param   a   the argument whose absolute value is to be determined
       * @return  the absolute value of the argument.
       */
<span class="line-added">+     @HotSpotIntrinsicCandidate</span>
      public static int abs(int a) {
          return (a &lt; 0) ? -a : a;
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1358,10 ***</span>
<span class="line-new-header">--- 1379,11 ---</span>
       * is negative.
       *
       * @param   a   the argument whose absolute value is to be determined
       * @return  the absolute value of the argument.
       */
<span class="line-added">+     @HotSpotIntrinsicCandidate</span>
      public static long abs(long a) {
          return (a &lt; 0) ? -a : a;
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1382,10 ***</span>
<span class="line-new-header">--- 1404,11 ---</span>
       * {@code Float.intBitsToFloat(0x7fffffff &amp; Float.floatToRawIntBits(a))}
       *
       * @param   a   the argument whose absolute value is to be determined
       * @return  the absolute value of the argument.
       */
<span class="line-added">+     @HotSpotIntrinsicCandidate</span>
      public static float abs(float a) {
          return (a &lt;= 0.0F) ? 0.0F - a : a;
      }
  
      /**
</pre>
<center><a href="Long.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Module.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>