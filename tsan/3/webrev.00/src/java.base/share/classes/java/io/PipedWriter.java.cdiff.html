<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/io/PipedWriter.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="PipedReader.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PrintStream.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/io/PipedWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1996, 2016, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1996, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 48,14 ***</span>
      private boolean closed = false;
  
      /**
       * Creates a piped writer connected to the specified piped
       * reader. Data characters written to this stream will then be
<span class="line-modified">!      * available as input from &lt;code&gt;snk&lt;/code&gt;.</span>
       *
       * @param      snk   The piped reader to connect to.
<span class="line-modified">!      * @exception  IOException  if an I/O error occurs.</span>
       */
      public PipedWriter(PipedReader snk)  throws IOException {
          connect(snk);
      }
  
<span class="line-new-header">--- 48,14 ---</span>
      private boolean closed = false;
  
      /**
       * Creates a piped writer connected to the specified piped
       * reader. Data characters written to this stream will then be
<span class="line-modified">!      * available as input from {@code snk}.</span>
       *
       * @param      snk   The piped reader to connect to.
<span class="line-modified">!      * @throws     IOException  if an I/O error occurs.</span>
       */
      public PipedWriter(PipedReader snk)  throws IOException {
          connect(snk);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 71,24 ***</span>
      }
  
      /**
       * Connects this piped writer to a receiver. If this object
       * is already connected to some other piped reader, an
<span class="line-modified">!      * &lt;code&gt;IOException&lt;/code&gt; is thrown.</span>
       * &lt;p&gt;
<span class="line-modified">!      * If &lt;code&gt;snk&lt;/code&gt; is an unconnected piped reader and</span>
<span class="line-modified">!      * &lt;code&gt;src&lt;/code&gt; is an unconnected piped writer, they may</span>
       * be connected by either the call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * src.connect(snk)&lt;/pre&gt;&lt;/blockquote&gt;
       * or the call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * snk.connect(src)&lt;/pre&gt;&lt;/blockquote&gt;
       * The two calls have the same effect.
       *
       * @param      snk   the piped reader to connect to.
<span class="line-modified">!      * @exception  IOException  if an I/O error occurs.</span>
       */
      public synchronized void connect(PipedReader snk) throws IOException {
          if (snk == null) {
              throw new NullPointerException();
          } else if (sink != null || snk.connected) {
<span class="line-new-header">--- 71,24 ---</span>
      }
  
      /**
       * Connects this piped writer to a receiver. If this object
       * is already connected to some other piped reader, an
<span class="line-modified">!      * {@code IOException} is thrown.</span>
       * &lt;p&gt;
<span class="line-modified">!      * If {@code snk} is an unconnected piped reader and</span>
<span class="line-modified">!      * {@code src} is an unconnected piped writer, they may</span>
       * be connected by either the call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * src.connect(snk)&lt;/pre&gt;&lt;/blockquote&gt;
       * or the call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * snk.connect(src)&lt;/pre&gt;&lt;/blockquote&gt;
       * The two calls have the same effect.
       *
       * @param      snk   the piped reader to connect to.
<span class="line-modified">!      * @throws     IOException  if an I/O error occurs.</span>
       */
      public synchronized void connect(PipedReader snk) throws IOException {
          if (snk == null) {
              throw new NullPointerException();
          } else if (sink != null || snk.connected) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 102,20 ***</span>
          snk.out = 0;
          snk.connected = true;
      }
  
      /**
<span class="line-modified">!      * Writes the specified &lt;code&gt;char&lt;/code&gt; to the piped output stream.</span>
       * If a thread was reading data characters from the connected piped input
       * stream, but the thread is no longer alive, then an
<span class="line-modified">!      * &lt;code&gt;IOException&lt;/code&gt; is thrown.</span>
       * &lt;p&gt;
<span class="line-modified">!      * Implements the &lt;code&gt;write&lt;/code&gt; method of &lt;code&gt;Writer&lt;/code&gt;.</span>
       *
<span class="line-modified">!      * @param      c   the &lt;code&gt;char&lt;/code&gt; to be written.</span>
<span class="line-modified">!      * @exception  IOException  if the pipe is</span>
<span class="line-modified">!      *          &lt;a href=PipedOutputStream.html#BROKEN&gt; &lt;code&gt;broken&lt;/code&gt;&lt;/a&gt;,</span>
       *          {@link #connect(java.io.PipedReader) unconnected}, closed
       *          or an I/O error occurs.
       */
      public void write(int c)  throws IOException {
          if (sink == null) {
<span class="line-new-header">--- 102,20 ---</span>
          snk.out = 0;
          snk.connected = true;
      }
  
      /**
<span class="line-modified">!      * Writes the specified {@code char} to the piped output stream.</span>
       * If a thread was reading data characters from the connected piped input
       * stream, but the thread is no longer alive, then an
<span class="line-modified">!      * {@code IOException} is thrown.</span>
       * &lt;p&gt;
<span class="line-modified">!      * Implements the {@code write} method of {@code Writer}.</span>
       *
<span class="line-modified">!      * @param   c   the {@code char} to be written.</span>
<span class="line-modified">!      * @throw   IOException  if the pipe is</span>
<span class="line-modified">!      *          &lt;a href=PipedOutputStream.html#BROKEN&gt; {@code broken}&lt;/a&gt;,</span>
       *          {@link #connect(java.io.PipedReader) unconnected}, closed
       *          or an I/O error occurs.
       */
      public void write(int c)  throws IOException {
          if (sink == null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 131,21 ***</span>
       * stream.
       * If a thread was reading data characters from the connected piped input
       * stream, but the thread is no longer alive, then an
       * {@code IOException} is thrown.
       *
<span class="line-modified">!      * @param      cbuf  the data.</span>
<span class="line-modified">!      * @param      off   the start offset in the data.</span>
<span class="line-modified">!      * @param      len   the number of characters to write.</span>
       *
       * @throws  IndexOutOfBoundsException
       *          If {@code off} is negative, or {@code len} is negative,
       *          or {@code off + len} is negative or greater than the length
       *          of the given array
       *
       * @throws  IOException  if the pipe is
<span class="line-modified">!      *          &lt;a href=PipedOutputStream.html#BROKEN&gt;&lt;code&gt;broken&lt;/code&gt;&lt;/a&gt;,</span>
       *          {@link #connect(java.io.PipedReader) unconnected}, closed
       *          or an I/O error occurs.
       */
      public void write(char cbuf[], int off, int len) throws IOException {
          if (sink == null) {
<span class="line-new-header">--- 131,21 ---</span>
       * stream.
       * If a thread was reading data characters from the connected piped input
       * stream, but the thread is no longer alive, then an
       * {@code IOException} is thrown.
       *
<span class="line-modified">!      * @param   cbuf  the data.</span>
<span class="line-modified">!      * @param   off   the start offset in the data.</span>
<span class="line-modified">!      * @param   len   the number of characters to write.</span>
       *
       * @throws  IndexOutOfBoundsException
       *          If {@code off} is negative, or {@code len} is negative,
       *          or {@code off + len} is negative or greater than the length
       *          of the given array
       *
       * @throws  IOException  if the pipe is
<span class="line-modified">!      *          &lt;a href=PipedOutputStream.html#BROKEN&gt;{@code broken}&lt;/a&gt;,</span>
       *          {@link #connect(java.io.PipedReader) unconnected}, closed
       *          or an I/O error occurs.
       */
      public void write(char cbuf[], int off, int len) throws IOException {
          if (sink == null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 159,11 ***</span>
      /**
       * Flushes this output stream and forces any buffered output characters
       * to be written out.
       * This will notify any readers that characters are waiting in the pipe.
       *
<span class="line-modified">!      * @exception  IOException  if the pipe is closed, or an I/O error occurs.</span>
       */
      public synchronized void flush() throws IOException {
          if (sink != null) {
              if (sink.closedByReader || closed) {
                  throw new IOException(&quot;Pipe closed&quot;);
<span class="line-new-header">--- 159,11 ---</span>
      /**
       * Flushes this output stream and forces any buffered output characters
       * to be written out.
       * This will notify any readers that characters are waiting in the pipe.
       *
<span class="line-modified">!      * @throws     IOException  if the pipe is closed, or an I/O error occurs.</span>
       */
      public synchronized void flush() throws IOException {
          if (sink != null) {
              if (sink.closedByReader || closed) {
                  throw new IOException(&quot;Pipe closed&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 177,11 ***</span>
      /**
       * Closes this piped output stream and releases any system resources
       * associated with this stream. This stream may no longer be used for
       * writing characters.
       *
<span class="line-modified">!      * @exception  IOException  if an I/O error occurs.</span>
       */
      public void close()  throws IOException {
          closed = true;
          if (sink != null) {
              sink.receivedLast();
<span class="line-new-header">--- 177,11 ---</span>
      /**
       * Closes this piped output stream and releases any system resources
       * associated with this stream. This stream may no longer be used for
       * writing characters.
       *
<span class="line-modified">!      * @throws     IOException  if an I/O error occurs.</span>
       */
      public void close()  throws IOException {
          closed = true;
          if (sink != null) {
              sink.receivedLast();
</pre>
<center><a href="PipedReader.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PrintStream.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>