<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/reflect/Constructor.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="Array.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="Executable.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/reflect/Constructor.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1996, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 94         return genericInfo; //return cached repository
 95     }
 96 
 97     private volatile ConstructorAccessor constructorAccessor;
 98     // For sharing of ConstructorAccessors. This branching structure
 99     // is currently only two levels deep (i.e., one root Constructor
100     // and potentially many Constructor objects pointing to it.)
101     //
102     // If this branching structure would ever contain cycles, deadlocks can
103     // occur in annotation code.
104     private Constructor&lt;T&gt;      root;
105 
106     @Override
107     Constructor&lt;T&gt; getRoot() {
108         return root;
109     }
110 
111     /**
112      * Package-private constructor used by ReflectAccess to enable
113      * instantiation of these objects in Java code from the java.lang
<span class="line-modified">114      * package via sun.reflect.LangReflectAccess.</span>
115      */
116     Constructor(Class&lt;T&gt; declaringClass,
117                 Class&lt;?&gt;[] parameterTypes,
118                 Class&lt;?&gt;[] checkedExceptions,
119                 int modifiers,
120                 int slot,
121                 String signature,
122                 byte[] annotations,
123                 byte[] parameterAnnotations) {
124         this.clazz = declaringClass;
125         this.parameterTypes = parameterTypes;
126         this.exceptionTypes = checkedExceptions;
127         this.modifiers = modifiers;
128         this.slot = slot;
129         this.signature = signature;
130         this.annotations = annotations;
131         this.parameterAnnotations = parameterAnnotations;
132     }
133 
134     /**
</pre>
<hr />
<pre>
437      * &lt;p&gt;If the constructor&#39;s declaring class is an inner class in a
438      * non-static context, the first argument to the constructor needs
439      * to be the enclosing instance; see section 15.9.3 of
440      * &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;.
441      *
442      * &lt;p&gt;If the required access and argument checks succeed and the
443      * instantiation will proceed, the constructor&#39;s declaring class
444      * is initialized if it has not already been initialized.
445      *
446      * &lt;p&gt;If the constructor completes normally, returns the newly
447      * created and initialized instance.
448      *
449      * @param initargs array of objects to be passed as arguments to
450      * the constructor call; values of primitive types are wrapped in
451      * a wrapper object of the appropriate type (e.g. a {@code float}
452      * in a {@link java.lang.Float Float})
453      *
454      * @return a new object created by calling the constructor
455      * this object represents
456      *
<span class="line-modified">457      * @exception IllegalAccessException    if this {@code Constructor} object</span>
458      *              is enforcing Java language access control and the underlying
459      *              constructor is inaccessible.
<span class="line-modified">460      * @exception IllegalArgumentException  if the number of actual</span>
461      *              and formal parameters differ; if an unwrapping
462      *              conversion for primitive arguments fails; or if,
463      *              after possible unwrapping, a parameter value
464      *              cannot be converted to the corresponding formal
465      *              parameter type by a method invocation conversion; if
466      *              this constructor pertains to an enum type.
<span class="line-modified">467      * @exception InstantiationException    if the class that declares the</span>
468      *              underlying constructor represents an abstract class.
<span class="line-modified">469      * @exception InvocationTargetException if the underlying constructor</span>
470      *              throws an exception.
<span class="line-modified">471      * @exception ExceptionInInitializerError if the initialization provoked</span>
472      *              by this method fails.
473      */
474     @CallerSensitive
475     @ForceInline // to ensure Reflection.getCallerClass optimization
476     public T newInstance(Object ... initargs)
477         throws InstantiationException, IllegalAccessException,
478                IllegalArgumentException, InvocationTargetException
479     {
480         Class&lt;?&gt; caller = override ? null : Reflection.getCallerClass();
481         return newInstanceWithCaller(initargs, !override, caller);
482     }
483 
484     /* package-private */
485     T newInstanceWithCaller(Object[] args, boolean checkAccess, Class&lt;?&gt; caller)
486         throws InstantiationException, IllegalAccessException,
487                InvocationTargetException
488     {
489         if (checkAccess)
490             checkAccess(caller, clazz, clazz, modifiers);
491 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1996, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 94         return genericInfo; //return cached repository
 95     }
 96 
 97     private volatile ConstructorAccessor constructorAccessor;
 98     // For sharing of ConstructorAccessors. This branching structure
 99     // is currently only two levels deep (i.e., one root Constructor
100     // and potentially many Constructor objects pointing to it.)
101     //
102     // If this branching structure would ever contain cycles, deadlocks can
103     // occur in annotation code.
104     private Constructor&lt;T&gt;      root;
105 
106     @Override
107     Constructor&lt;T&gt; getRoot() {
108         return root;
109     }
110 
111     /**
112      * Package-private constructor used by ReflectAccess to enable
113      * instantiation of these objects in Java code from the java.lang
<span class="line-modified">114      * package via jdk.internal.access.JavaLangReflectAccess.</span>
115      */
116     Constructor(Class&lt;T&gt; declaringClass,
117                 Class&lt;?&gt;[] parameterTypes,
118                 Class&lt;?&gt;[] checkedExceptions,
119                 int modifiers,
120                 int slot,
121                 String signature,
122                 byte[] annotations,
123                 byte[] parameterAnnotations) {
124         this.clazz = declaringClass;
125         this.parameterTypes = parameterTypes;
126         this.exceptionTypes = checkedExceptions;
127         this.modifiers = modifiers;
128         this.slot = slot;
129         this.signature = signature;
130         this.annotations = annotations;
131         this.parameterAnnotations = parameterAnnotations;
132     }
133 
134     /**
</pre>
<hr />
<pre>
437      * &lt;p&gt;If the constructor&#39;s declaring class is an inner class in a
438      * non-static context, the first argument to the constructor needs
439      * to be the enclosing instance; see section 15.9.3 of
440      * &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;.
441      *
442      * &lt;p&gt;If the required access and argument checks succeed and the
443      * instantiation will proceed, the constructor&#39;s declaring class
444      * is initialized if it has not already been initialized.
445      *
446      * &lt;p&gt;If the constructor completes normally, returns the newly
447      * created and initialized instance.
448      *
449      * @param initargs array of objects to be passed as arguments to
450      * the constructor call; values of primitive types are wrapped in
451      * a wrapper object of the appropriate type (e.g. a {@code float}
452      * in a {@link java.lang.Float Float})
453      *
454      * @return a new object created by calling the constructor
455      * this object represents
456      *
<span class="line-modified">457      * @throws    IllegalAccessException    if this {@code Constructor} object</span>
458      *              is enforcing Java language access control and the underlying
459      *              constructor is inaccessible.
<span class="line-modified">460      * @throws    IllegalArgumentException  if the number of actual</span>
461      *              and formal parameters differ; if an unwrapping
462      *              conversion for primitive arguments fails; or if,
463      *              after possible unwrapping, a parameter value
464      *              cannot be converted to the corresponding formal
465      *              parameter type by a method invocation conversion; if
466      *              this constructor pertains to an enum type.
<span class="line-modified">467      * @throws    InstantiationException    if the class that declares the</span>
468      *              underlying constructor represents an abstract class.
<span class="line-modified">469      * @throws    InvocationTargetException if the underlying constructor</span>
470      *              throws an exception.
<span class="line-modified">471      * @throws    ExceptionInInitializerError if the initialization provoked</span>
472      *              by this method fails.
473      */
474     @CallerSensitive
475     @ForceInline // to ensure Reflection.getCallerClass optimization
476     public T newInstance(Object ... initargs)
477         throws InstantiationException, IllegalAccessException,
478                IllegalArgumentException, InvocationTargetException
479     {
480         Class&lt;?&gt; caller = override ? null : Reflection.getCallerClass();
481         return newInstanceWithCaller(initargs, !override, caller);
482     }
483 
484     /* package-private */
485     T newInstanceWithCaller(Object[] args, boolean checkAccess, Class&lt;?&gt; caller)
486         throws InstantiationException, IllegalAccessException,
487                InvocationTargetException
488     {
489         if (checkAccess)
490             checkAccess(caller, clazz, clazz, modifiers);
491 
</pre>
</td>
</tr>
</table>
<center><a href="Array.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="Executable.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>