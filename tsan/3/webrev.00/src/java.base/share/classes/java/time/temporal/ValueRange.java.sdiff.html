<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/time/temporal/ValueRange.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="UnsupportedTemporalTypeException.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="WeekFields.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/time/temporal/ValueRange.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 75  * This class captures that valid range.
 76  * &lt;p&gt;
 77  * It is important to be aware of the limitations of this class.
 78  * Only the minimum and maximum values are provided.
 79  * It is possible for there to be invalid values within the outer range.
 80  * For example, a weird field may have valid values of 1, 2, 4, 6, 7, thus
 81  * have a range of &#39;1 - 7&#39;, despite that fact that values 3 and 5 are invalid.
 82  * &lt;p&gt;
 83  * Instances of this class are not tied to a specific field.
 84  *
 85  * @implSpec
 86  * This class is immutable and thread-safe.
 87  *
 88  * @since 1.8
 89  */
 90 public final class ValueRange implements Serializable {
 91 
 92     /**
 93      * Serialization version.
 94      */

 95     private static final long serialVersionUID = -7317881728594519368L;
 96 
 97     /**
 98      * The smallest minimum value.
 99      */
100     private final long minSmallest;
101     /**
102      * The largest minimum value.
103      */
104     private final long minLargest;
105     /**
106      * The smallest maximum value.
107      */
108     private final long maxSmallest;
109     /**
110      * The largest maximum value.
111      */
112     private final long maxLargest;
113 
114     /**
</pre>
<hr />
<pre>
335     private String genInvalidFieldMessage(TemporalField field, long value) {
336         if (field != null) {
337             return &quot;Invalid value for &quot; + field + &quot; (valid values &quot; + this + &quot;): &quot; + value;
338         } else {
339             return &quot;Invalid value (valid values &quot; + this + &quot;): &quot; + value;
340         }
341     }
342 
343     //-----------------------------------------------------------------------
344     /**
345      * Restore the state of an ValueRange from the stream.
346      * Check that the values are valid.
347      *
348      * @param s the stream to read
349      * @throws InvalidObjectException if
350      *     the smallest minimum is greater than the smallest maximum,
351      *  or the smallest maximum is greater than the largest maximum
352      *  or the largest minimum is greater than the largest maximum
353      * @throws ClassNotFoundException if a class cannot be resolved
354      */

355     private void readObject(ObjectInputStream s)
356          throws IOException, ClassNotFoundException, InvalidObjectException
357     {
358         s.defaultReadObject();
359         if (minSmallest &gt; minLargest) {
360             throw new InvalidObjectException(&quot;Smallest minimum value must be less than largest minimum value&quot;);
361         }
362         if (maxSmallest &gt; maxLargest) {
363             throw new InvalidObjectException(&quot;Smallest maximum value must be less than largest maximum value&quot;);
364         }
365         if (minLargest &gt; maxLargest) {
366             throw new InvalidObjectException(&quot;Minimum value must be less than maximum value&quot;);
367         }
368     }
369 
370     //-----------------------------------------------------------------------
371     /**
372      * Checks if this range is equal to another range.
373      * &lt;p&gt;
374      * The comparison is based on the four values, minimum, largest minimum,
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 75  * This class captures that valid range.
 76  * &lt;p&gt;
 77  * It is important to be aware of the limitations of this class.
 78  * Only the minimum and maximum values are provided.
 79  * It is possible for there to be invalid values within the outer range.
 80  * For example, a weird field may have valid values of 1, 2, 4, 6, 7, thus
 81  * have a range of &#39;1 - 7&#39;, despite that fact that values 3 and 5 are invalid.
 82  * &lt;p&gt;
 83  * Instances of this class are not tied to a specific field.
 84  *
 85  * @implSpec
 86  * This class is immutable and thread-safe.
 87  *
 88  * @since 1.8
 89  */
 90 public final class ValueRange implements Serializable {
 91 
 92     /**
 93      * Serialization version.
 94      */
<span class="line-added"> 95     @java.io.Serial</span>
 96     private static final long serialVersionUID = -7317881728594519368L;
 97 
 98     /**
 99      * The smallest minimum value.
100      */
101     private final long minSmallest;
102     /**
103      * The largest minimum value.
104      */
105     private final long minLargest;
106     /**
107      * The smallest maximum value.
108      */
109     private final long maxSmallest;
110     /**
111      * The largest maximum value.
112      */
113     private final long maxLargest;
114 
115     /**
</pre>
<hr />
<pre>
336     private String genInvalidFieldMessage(TemporalField field, long value) {
337         if (field != null) {
338             return &quot;Invalid value for &quot; + field + &quot; (valid values &quot; + this + &quot;): &quot; + value;
339         } else {
340             return &quot;Invalid value (valid values &quot; + this + &quot;): &quot; + value;
341         }
342     }
343 
344     //-----------------------------------------------------------------------
345     /**
346      * Restore the state of an ValueRange from the stream.
347      * Check that the values are valid.
348      *
349      * @param s the stream to read
350      * @throws InvalidObjectException if
351      *     the smallest minimum is greater than the smallest maximum,
352      *  or the smallest maximum is greater than the largest maximum
353      *  or the largest minimum is greater than the largest maximum
354      * @throws ClassNotFoundException if a class cannot be resolved
355      */
<span class="line-added">356     @java.io.Serial</span>
357     private void readObject(ObjectInputStream s)
358          throws IOException, ClassNotFoundException, InvalidObjectException
359     {
360         s.defaultReadObject();
361         if (minSmallest &gt; minLargest) {
362             throw new InvalidObjectException(&quot;Smallest minimum value must be less than largest minimum value&quot;);
363         }
364         if (maxSmallest &gt; maxLargest) {
365             throw new InvalidObjectException(&quot;Smallest maximum value must be less than largest maximum value&quot;);
366         }
367         if (minLargest &gt; maxLargest) {
368             throw new InvalidObjectException(&quot;Minimum value must be less than maximum value&quot;);
369         }
370     }
371 
372     //-----------------------------------------------------------------------
373     /**
374      * Checks if this range is equal to another range.
375      * &lt;p&gt;
376      * The comparison is based on the four values, minimum, largest minimum,
</pre>
</td>
</tr>
</table>
<center><a href="UnsupportedTemporalTypeException.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="WeekFields.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>