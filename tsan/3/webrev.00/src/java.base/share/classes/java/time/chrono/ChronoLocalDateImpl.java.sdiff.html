<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/time/chrono/ChronoLocalDateImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ChronoLocalDate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ChronoLocalDateTime.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/time/chrono/ChronoLocalDateImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
104  *
105  *        // Print the Hijrah date and calendar
106  *        ChronoLocalDate date = Chronology.of(&quot;Hijrah&quot;).dateNow();
107  *        int day = date.get(ChronoField.DAY_OF_MONTH);
108  *        int dow = date.get(ChronoField.DAY_OF_WEEK);
109  *        int month = date.get(ChronoField.MONTH_OF_YEAR);
110  *        int year = date.get(ChronoField.YEAR);
111  *        System.out.printf(&quot;  Today is %s %s %d-%s-%d%n&quot;, date.getChronology().getID(),
112  *                dow, day, month, year);
113  *
114  *        // Print today&#39;s date and the last day of the year
115  *        ChronoLocalDate now1 = Chronology.of(&quot;Hijrah&quot;).dateNow();
116  *        ChronoLocalDate first = now1.with(ChronoField.DAY_OF_MONTH, 1)
117  *                .with(ChronoField.MONTH_OF_YEAR, 1);
118  *        ChronoLocalDate last = first.plus(1, ChronoUnit.YEARS)
119  *                .minus(1, ChronoUnit.DAYS);
120  *        System.out.printf(&quot;  Today is %s: start: %s; end: %s%n&quot;, last.getChronology().getID(),
121  *                first, last);
122  * &lt;/pre&gt;
123  *
<span class="line-modified">124  * &lt;h3&gt;Adding Calendars&lt;/h3&gt;</span>
125  * &lt;p&gt; The set of calendars is extensible by defining a subclass of {@link ChronoLocalDate}
126  * to represent a date instance and an implementation of {@code Chronology}
127  * to be the factory for the ChronoLocalDate subclass.
128  * &lt;/p&gt;
129  * &lt;p&gt; To permit the discovery of the additional calendar types the implementation of
130  * {@code Chronology} must be registered as a Service implementing the {@code Chronology} interface
131  * in the {@code META-INF/Services} file as per the specification of {@link java.util.ServiceLoader}.
132  * The subclass must function according to the {@code Chronology} class description and must provide its
133  * {@link java.time.chrono.Chronology#getId() chronlogy ID} and {@link Chronology#getCalendarType() calendar type}. &lt;/p&gt;
134  *
135  * @implSpec
136  * This abstract class must be implemented with care to ensure other classes operate correctly.
137  * All implementations that can be instantiated must be final, immutable and thread-safe.
138  * Subclasses should be Serializable wherever possible.
139  *
140  * @param &lt;D&gt; the ChronoLocalDate of this date-time
141  * @since 1.8
142  */
143 abstract class ChronoLocalDateImpl&lt;D extends ChronoLocalDate&gt;
144         implements ChronoLocalDate, Temporal, TemporalAdjuster, Serializable {
145 
146     /**
147      * Serialization version.
148      */

149     private static final long serialVersionUID = 6282433883239719096L;
150 
151     /**
152      * Casts the {@code Temporal} to {@code ChronoLocalDate} ensuring it bas the specified chronology.
153      *
154      * @param chrono  the chronology to check for, not null
155      * @param temporal  a date-time to cast, not null
156      * @return the date-time checked and cast to {@code ChronoLocalDate}, not null
157      * @throws ClassCastException if the date-time cannot be cast to ChronoLocalDate
158      *  or the chronology is not equal this Chronology
159      */
160     static &lt;D extends ChronoLocalDate&gt; D ensureValid(Chronology chrono, Temporal temporal) {
161         @SuppressWarnings(&quot;unchecked&quot;)
162         D other = (D) temporal;
163         if (chrono.equals(other.getChronology()) == false) {
164             throw new ClassCastException(&quot;Chronology mismatch, expected: &quot; + chrono.getId() + &quot;, actual: &quot; + other.getChronology().getId());
165         }
166         return other;
167     }
168 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
104  *
105  *        // Print the Hijrah date and calendar
106  *        ChronoLocalDate date = Chronology.of(&quot;Hijrah&quot;).dateNow();
107  *        int day = date.get(ChronoField.DAY_OF_MONTH);
108  *        int dow = date.get(ChronoField.DAY_OF_WEEK);
109  *        int month = date.get(ChronoField.MONTH_OF_YEAR);
110  *        int year = date.get(ChronoField.YEAR);
111  *        System.out.printf(&quot;  Today is %s %s %d-%s-%d%n&quot;, date.getChronology().getID(),
112  *                dow, day, month, year);
113  *
114  *        // Print today&#39;s date and the last day of the year
115  *        ChronoLocalDate now1 = Chronology.of(&quot;Hijrah&quot;).dateNow();
116  *        ChronoLocalDate first = now1.with(ChronoField.DAY_OF_MONTH, 1)
117  *                .with(ChronoField.MONTH_OF_YEAR, 1);
118  *        ChronoLocalDate last = first.plus(1, ChronoUnit.YEARS)
119  *                .minus(1, ChronoUnit.DAYS);
120  *        System.out.printf(&quot;  Today is %s: start: %s; end: %s%n&quot;, last.getChronology().getID(),
121  *                first, last);
122  * &lt;/pre&gt;
123  *
<span class="line-modified">124  * &lt;h2&gt;Adding Calendars&lt;/h2&gt;</span>
125  * &lt;p&gt; The set of calendars is extensible by defining a subclass of {@link ChronoLocalDate}
126  * to represent a date instance and an implementation of {@code Chronology}
127  * to be the factory for the ChronoLocalDate subclass.
128  * &lt;/p&gt;
129  * &lt;p&gt; To permit the discovery of the additional calendar types the implementation of
130  * {@code Chronology} must be registered as a Service implementing the {@code Chronology} interface
131  * in the {@code META-INF/Services} file as per the specification of {@link java.util.ServiceLoader}.
132  * The subclass must function according to the {@code Chronology} class description and must provide its
133  * {@link java.time.chrono.Chronology#getId() chronlogy ID} and {@link Chronology#getCalendarType() calendar type}. &lt;/p&gt;
134  *
135  * @implSpec
136  * This abstract class must be implemented with care to ensure other classes operate correctly.
137  * All implementations that can be instantiated must be final, immutable and thread-safe.
138  * Subclasses should be Serializable wherever possible.
139  *
140  * @param &lt;D&gt; the ChronoLocalDate of this date-time
141  * @since 1.8
142  */
143 abstract class ChronoLocalDateImpl&lt;D extends ChronoLocalDate&gt;
144         implements ChronoLocalDate, Temporal, TemporalAdjuster, Serializable {
145 
146     /**
147      * Serialization version.
148      */
<span class="line-added">149     @java.io.Serial</span>
150     private static final long serialVersionUID = 6282433883239719096L;
151 
152     /**
153      * Casts the {@code Temporal} to {@code ChronoLocalDate} ensuring it bas the specified chronology.
154      *
155      * @param chrono  the chronology to check for, not null
156      * @param temporal  a date-time to cast, not null
157      * @return the date-time checked and cast to {@code ChronoLocalDate}, not null
158      * @throws ClassCastException if the date-time cannot be cast to ChronoLocalDate
159      *  or the chronology is not equal this Chronology
160      */
161     static &lt;D extends ChronoLocalDate&gt; D ensureValid(Chronology chrono, Temporal temporal) {
162         @SuppressWarnings(&quot;unchecked&quot;)
163         D other = (D) temporal;
164         if (chrono.equals(other.getChronology()) == false) {
165             throw new ClassCastException(&quot;Chronology mismatch, expected: &quot; + chrono.getId() + &quot;, actual: &quot; + other.getChronology().getId());
166         }
167         return other;
168     }
169 
</pre>
</td>
</tr>
</table>
<center><a href="ChronoLocalDate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ChronoLocalDateTime.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>