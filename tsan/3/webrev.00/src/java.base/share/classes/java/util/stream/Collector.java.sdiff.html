<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/util/stream/Collector.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../spi/TimeZoneNameProvider.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MatchOps.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/stream/Collector.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2013, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 package java.util.stream;
 26 
 27 import java.util.Collections;
 28 import java.util.EnumSet;
 29 import java.util.Objects;
 30 import java.util.Set;
 31 import java.util.function.BiConsumer;
 32 import java.util.function.BinaryOperator;
 33 import java.util.function.Function;
 34 import java.util.function.Supplier;
 35 




 36 /**
 37  * A &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;mutable reduction operation&lt;/a&gt; that
 38  * accumulates input elements into a mutable result container, optionally transforming
 39  * the accumulated result into a final representation after all input elements
 40  * have been processed.  Reduction operations can be performed either sequentially
 41  * or in parallel.
 42  *
 43  * &lt;p&gt;Examples of mutable reduction operations include:
 44  * accumulating elements into a {@code Collection}; concatenating
 45  * strings using a {@code StringBuilder}; computing summary information about
 46  * elements such as sum, min, max, or average; computing &quot;pivot table&quot; summaries
 47  * such as &quot;maximum valued transaction by seller&quot;, etc.  The class {@link Collectors}
 48  * provides implementations of many common mutable reductions.
 49  *
 50  * &lt;p&gt;A {@code Collector} is specified by four functions that work together to
 51  * accumulate entries into a mutable result container, and optionally perform
 52  * a final transform on the result.  They are: &lt;ul&gt;
 53  *     &lt;li&gt;creation of a new result container ({@link #supplier()})&lt;/li&gt;
 54  *     &lt;li&gt;incorporating a new data element into a result container ({@link #accumulator()})&lt;/li&gt;
 55  *     &lt;li&gt;combining two result containers into one ({@link #combiner()})&lt;/li&gt;
</pre>
<hr />
<pre>
137  * &lt;/ul&gt;
138  *
139  * &lt;p&gt;In addition to the predefined implementations in {@link Collectors}, the
140  * static factory methods {@link #of(Supplier, BiConsumer, BinaryOperator, Characteristics...)}
141  * can be used to construct collectors.  For example, you could create a collector
142  * that accumulates widgets into a {@code TreeSet} with:
143  *
144  * &lt;pre&gt;{@code
145  *     Collector&lt;Widget, ?, TreeSet&lt;Widget&gt;&gt; intoSet =
146  *         Collector.of(TreeSet::new, TreeSet::add,
147  *                      (left, right) -&gt; { left.addAll(right); return left; });
148  * }&lt;/pre&gt;
149  *
150  * (This behavior is also implemented by the predefined collector
151  * {@link Collectors#toCollection(Supplier)}).
152  *
153  * @apiNote
154  * Performing a reduction operation with a {@code Collector} should produce a
155  * result equivalent to:
156  * &lt;pre&gt;{@code
<span class="line-modified">157  *     R container = collector.supplier().get();</span>
158  *     for (T t : data)
159  *         collector.accumulator().accept(container, t);
160  *     return collector.finisher().apply(container);
161  * }&lt;/pre&gt;
162  *
163  * &lt;p&gt;However, the library is free to partition the input, perform the reduction
164  * on the partitions, and then use the combiner function to combine the partial
165  * results to achieve a parallel reduction.  (Depending on the specific reduction
166  * operation, this may perform better or worse, depending on the relative cost
167  * of the accumulator and combiner functions.)
168  *
169  * &lt;p&gt;Collectors are designed to be &lt;em&gt;composed&lt;/em&gt;; many of the methods
170  * in {@link Collectors} are functions that take a collector and produce
171  * a new collector.  For example, given the following collector that computes
172  * the sum of the salaries of a stream of employees:
173  *
174  * &lt;pre&gt;{@code
175  *     Collector&lt;Employee, ?, Integer&gt; summingSalaries
176  *         = Collectors.summingInt(Employee::getSalary))
177  * }&lt;/pre&gt;
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 package java.util.stream;
 26 
 27 import java.util.Collections;
 28 import java.util.EnumSet;
 29 import java.util.Objects;
 30 import java.util.Set;
 31 import java.util.function.BiConsumer;
 32 import java.util.function.BinaryOperator;
 33 import java.util.function.Function;
 34 import java.util.function.Supplier;
 35 
<span class="line-added"> 36 // A compilation test for the code snippets in this class-level javadoc can be found at:</span>
<span class="line-added"> 37 // test/jdk/java/util/stream/test/org/openjdk/tests/java/util/stream/CollectorExample.java</span>
<span class="line-added"> 38 // The test needs to be updated if the examples in this javadoc change or new examples are added.</span>
<span class="line-added"> 39 </span>
 40 /**
 41  * A &lt;a href=&quot;package-summary.html#Reduction&quot;&gt;mutable reduction operation&lt;/a&gt; that
 42  * accumulates input elements into a mutable result container, optionally transforming
 43  * the accumulated result into a final representation after all input elements
 44  * have been processed.  Reduction operations can be performed either sequentially
 45  * or in parallel.
 46  *
 47  * &lt;p&gt;Examples of mutable reduction operations include:
 48  * accumulating elements into a {@code Collection}; concatenating
 49  * strings using a {@code StringBuilder}; computing summary information about
 50  * elements such as sum, min, max, or average; computing &quot;pivot table&quot; summaries
 51  * such as &quot;maximum valued transaction by seller&quot;, etc.  The class {@link Collectors}
 52  * provides implementations of many common mutable reductions.
 53  *
 54  * &lt;p&gt;A {@code Collector} is specified by four functions that work together to
 55  * accumulate entries into a mutable result container, and optionally perform
 56  * a final transform on the result.  They are: &lt;ul&gt;
 57  *     &lt;li&gt;creation of a new result container ({@link #supplier()})&lt;/li&gt;
 58  *     &lt;li&gt;incorporating a new data element into a result container ({@link #accumulator()})&lt;/li&gt;
 59  *     &lt;li&gt;combining two result containers into one ({@link #combiner()})&lt;/li&gt;
</pre>
<hr />
<pre>
141  * &lt;/ul&gt;
142  *
143  * &lt;p&gt;In addition to the predefined implementations in {@link Collectors}, the
144  * static factory methods {@link #of(Supplier, BiConsumer, BinaryOperator, Characteristics...)}
145  * can be used to construct collectors.  For example, you could create a collector
146  * that accumulates widgets into a {@code TreeSet} with:
147  *
148  * &lt;pre&gt;{@code
149  *     Collector&lt;Widget, ?, TreeSet&lt;Widget&gt;&gt; intoSet =
150  *         Collector.of(TreeSet::new, TreeSet::add,
151  *                      (left, right) -&gt; { left.addAll(right); return left; });
152  * }&lt;/pre&gt;
153  *
154  * (This behavior is also implemented by the predefined collector
155  * {@link Collectors#toCollection(Supplier)}).
156  *
157  * @apiNote
158  * Performing a reduction operation with a {@code Collector} should produce a
159  * result equivalent to:
160  * &lt;pre&gt;{@code
<span class="line-modified">161  *     A container = collector.supplier().get();</span>
162  *     for (T t : data)
163  *         collector.accumulator().accept(container, t);
164  *     return collector.finisher().apply(container);
165  * }&lt;/pre&gt;
166  *
167  * &lt;p&gt;However, the library is free to partition the input, perform the reduction
168  * on the partitions, and then use the combiner function to combine the partial
169  * results to achieve a parallel reduction.  (Depending on the specific reduction
170  * operation, this may perform better or worse, depending on the relative cost
171  * of the accumulator and combiner functions.)
172  *
173  * &lt;p&gt;Collectors are designed to be &lt;em&gt;composed&lt;/em&gt;; many of the methods
174  * in {@link Collectors} are functions that take a collector and produce
175  * a new collector.  For example, given the following collector that computes
176  * the sum of the salaries of a stream of employees:
177  *
178  * &lt;pre&gt;{@code
179  *     Collector&lt;Employee, ?, Integer&gt; summingSalaries
180  *         = Collectors.summingInt(Employee::getSalary))
181  * }&lt;/pre&gt;
</pre>
</td>
</tr>
</table>
<center><a href="../spi/TimeZoneNameProvider.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MatchOps.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>