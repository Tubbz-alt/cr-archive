<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/net/URLStreamHandler.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="URLPermission.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="UnknownHostException.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/net/URLStreamHandler.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1995, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1995, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 28,10 ***</span>
<span class="line-new-header">--- 28,11 ---</span>
  import java.io.IOException;
  import java.io.InputStream;
  import java.io.File;
  import java.io.OutputStream;
  import java.util.Hashtable;
<span class="line-added">+ import java.util.Objects;</span>
  import sun.net.util.IPAddressUtil;
  import sun.net.www.ParseUtil;
  
  /**
   * The abstract class {@code URLStreamHandler} is the common
</pre>
<hr />
<pre>
<span class="line-old-header">*** 63,38 ***</span>
       * HttpURLConnection will be returned, and for JAR a
       * JarURLConnection will be returned.
       *
       * @param      u   the URL that this connects to.
       * @return     a {@code URLConnection} object for the {@code URL}.
<span class="line-modified">!      * @exception  IOException  if an I/O error occurs while opening the</span>
       *               connection.
       */
      protected abstract URLConnection openConnection(URL u) throws IOException;
  
      /**
       * Same as openConnection(URL), except that the connection will be
       * made through the specified proxy; Protocol handlers that do not
       * support proxying will ignore the proxy parameter and make a
       * normal connection.
       *
<span class="line-modified">!      * Calling this method preempts the system&#39;s default</span>
       * {@link java.net.ProxySelector ProxySelector} settings.
       *
       * @param      u   the URL that this connects to.
       * @param      p   the proxy through which the connection will be made.
       *                 If direct connection is desired, Proxy.NO_PROXY
       *                 should be specified.
       * @return     a {@code URLConnection} object for the {@code URL}.
<span class="line-modified">!      * @exception  IOException  if an I/O error occurs while opening the</span>
       *               connection.
<span class="line-modified">!      * @exception  IllegalArgumentException if either u or p is null,</span>
       *               or p has the wrong type.
<span class="line-modified">!      * @exception  UnsupportedOperationException if the subclass that</span>
       *               implements the protocol doesn&#39;t support this method.
       * @since      1.5
       */
      protected URLConnection openConnection(URL u, Proxy p) throws IOException {
          throw new UnsupportedOperationException(&quot;Method not implemented.&quot;);
      }
  
      /**
       * Parses the string representation of a {@code URL} into a
<span class="line-new-header">--- 64,46 ---</span>
       * HttpURLConnection will be returned, and for JAR a
       * JarURLConnection will be returned.
       *
       * @param      u   the URL that this connects to.
       * @return     a {@code URLConnection} object for the {@code URL}.
<span class="line-modified">!      * @throws     IOException  if an I/O error occurs while opening the</span>
       *               connection.
       */
      protected abstract URLConnection openConnection(URL u) throws IOException;
  
      /**
       * Same as openConnection(URL), except that the connection will be
       * made through the specified proxy; Protocol handlers that do not
       * support proxying will ignore the proxy parameter and make a
       * normal connection.
       *
<span class="line-modified">!      * &lt;p&gt; Calling this method preempts the system&#39;s default</span>
       * {@link java.net.ProxySelector ProxySelector} settings.
       *
<span class="line-added">+      * @implSpec</span>
<span class="line-added">+      * The default implementation of this method first checks that the given</span>
<span class="line-added">+      * {@code URL} and {@code Proxy} are not null, then throws {@code</span>
<span class="line-added">+      * UnsupportedOperationException}. Subclasses should override this method</span>
<span class="line-added">+      * with an appropriate implementation.</span>
<span class="line-added">+      *</span>
       * @param      u   the URL that this connects to.
       * @param      p   the proxy through which the connection will be made.
       *                 If direct connection is desired, Proxy.NO_PROXY
       *                 should be specified.
       * @return     a {@code URLConnection} object for the {@code URL}.
<span class="line-modified">!      * @throws     IOException  if an I/O error occurs while opening the</span>
       *               connection.
<span class="line-modified">!      * @throws     IllegalArgumentException if either u or p is null,</span>
       *               or p has the wrong type.
<span class="line-modified">!      * @throws     UnsupportedOperationException if the subclass that</span>
       *               implements the protocol doesn&#39;t support this method.
       * @since      1.5
       */
      protected URLConnection openConnection(URL u, Proxy p) throws IOException {
<span class="line-added">+         if (u == null || p == null)</span>
<span class="line-added">+             throw new IllegalArgumentException(&quot;null &quot; + (u == null ? &quot;url&quot; : &quot;proxy&quot;));</span>
          throw new UnsupportedOperationException(&quot;Method not implemented.&quot;);
      }
  
      /**
       * Parses the string representation of a {@code URL} into a
</pre>
<hr />
<pre>
<span class="line-old-header">*** 333,14 ***</span>
       * considered equal, i.e. they refer to the same
       * fragment in the same file.
       * @since 1.3
       */
      protected boolean equals(URL u1, URL u2) {
<span class="line-modified">!         String ref1 = u1.getRef();</span>
<span class="line-removed">-         String ref2 = u2.getRef();</span>
<span class="line-removed">-         return (ref1 == ref2 || (ref1 != null &amp;&amp; ref1.equals(ref2))) &amp;&amp;</span>
<span class="line-removed">-                sameFile(u1, u2);</span>
      }
  
      /**
       * Provides the default hash calculation. May be overridden by handlers for
       * other protocols that have different requirements for hashCode
<span class="line-new-header">--- 342,11 ---</span>
       * considered equal, i.e. they refer to the same
       * fragment in the same file.
       * @since 1.3
       */
      protected boolean equals(URL u1, URL u2) {
<span class="line-modified">!         return Objects.equals(u1.getRef(), u2.getRef()) &amp;&amp; sameFile(u1, u2);</span>
      }
  
      /**
       * Provides the default hash calculation. May be overridden by handlers for
       * other protocols that have different requirements for hashCode
</pre>
<hr />
<pre>
<span class="line-old-header">*** 502,20 ***</span>
       * @param   authority the authority part for the URL.
       * @param   userInfo the userInfo part of the URL.
       * @param   path      the path component of the URL.
       * @param   query     the query part for the URL.
       * @param   ref       the reference.
<span class="line-modified">!      * @exception       SecurityException       if the protocol handler of the URL is</span>
       *                                  different from this one
       * @since 1.3
       */
<span class="line-modified">!        protected void setURL(URL u, String protocol, String host, int port,</span>
                               String authority, String userInfo, String path,
                               String query, String ref) {
          if (this != u.handler) {
              throw new SecurityException(&quot;handler for url different from &quot; +
                                          &quot;this handler&quot;);
          }
          // ensure that no one can reset the protocol on a given URL.
          u.set(u.getProtocol(), host, port, authority, userInfo, path, query, ref);
      }
  
<span class="line-new-header">--- 508,23 ---</span>
       * @param   authority the authority part for the URL.
       * @param   userInfo the userInfo part of the URL.
       * @param   path      the path component of the URL.
       * @param   query     the query part for the URL.
       * @param   ref       the reference.
<span class="line-modified">!      * @throws          SecurityException       if the protocol handler of the URL is</span>
       *                                  different from this one
       * @since 1.3
       */
<span class="line-modified">!     protected void setURL(URL u, String protocol, String host, int port,</span>
                               String authority, String userInfo, String path,
                               String query, String ref) {
          if (this != u.handler) {
              throw new SecurityException(&quot;handler for url different from &quot; +
                                          &quot;this handler&quot;);
<span class="line-added">+         } else if (host != null &amp;&amp; u.isBuiltinStreamHandler(this)) {</span>
<span class="line-added">+             String s = IPAddressUtil.checkHostString(host);</span>
<span class="line-added">+             if (s != null) throw new IllegalArgumentException(s);</span>
          }
          // ensure that no one can reset the protocol on a given URL.
          u.set(u.getProtocol(), host, port, authority, userInfo, path, query, ref);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 528,11 ***</span>
       * @param   protocol  the protocol name. This value is ignored since 1.2.
       * @param   host      the remote host value for the URL.
       * @param   port      the port on the remote machine.
       * @param   file      the file.
       * @param   ref       the reference.
<span class="line-modified">!      * @exception       SecurityException       if the protocol handler of the URL is</span>
       *                                  different from this one
       * @deprecated Use setURL(URL, String, String, int, String, String, String,
       *             String);
       */
      @Deprecated
<span class="line-new-header">--- 537,11 ---</span>
       * @param   protocol  the protocol name. This value is ignored since 1.2.
       * @param   host      the remote host value for the URL.
       * @param   port      the port on the remote machine.
       * @param   file      the file.
       * @param   ref       the reference.
<span class="line-modified">!      * @throws          SecurityException       if the protocol handler of the URL is</span>
       *                                  different from this one
       * @deprecated Use setURL(URL, String, String, int, String, String, String,
       *             String);
       */
      @Deprecated
</pre>
<center><a href="URLPermission.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="UnknownHostException.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>