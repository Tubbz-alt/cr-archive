<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/io/PushbackInputStream.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="PrintWriter.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PushbackReader.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/io/PushbackInputStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1994, 2016, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -24,11 +24,11 @@</span>
   */
  
  package java.io;
  
  /**
<span class="udiff-line-modified-removed">-  * A &lt;code&gt;PushbackInputStream&lt;/code&gt; adds</span>
<span class="udiff-line-modified-added">+  * A {@code PushbackInputStream} adds</span>
   * functionality to another input stream, namely
   * the  ability to &quot;push back&quot; or &quot;unread&quot; bytes,
   * by storing pushed-back bytes in an internal buffer.
   * This is useful in situations where
   * it is convenient for a fragment of code
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -47,22 +47,21 @@</span>
   *
   * @author  David Connelly
   * @author  Jonathan Payne
   * @since   1.0
   */
<span class="udiff-line-modified-removed">- public</span>
<span class="udiff-line-removed">- class PushbackInputStream extends FilterInputStream {</span>
<span class="udiff-line-modified-added">+ public class PushbackInputStream extends FilterInputStream {</span>
      /**
       * The pushback buffer.
       * @since   1.1
       */
      protected byte[] buf;
  
      /**
       * The position within the pushback buffer from which the next byte will
<span class="udiff-line-modified-removed">-      * be read.  When the buffer is empty, &lt;code&gt;pos&lt;/code&gt; is equal to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;buf.length&lt;/code&gt;; when the buffer is full, &lt;code&gt;pos&lt;/code&gt; is</span>
<span class="udiff-line-modified-added">+      * be read.  When the buffer is empty, {@code pos} is equal to</span>
<span class="udiff-line-modified-added">+      * {@code buf.length}; when the buffer is full, {@code pos} is</span>
       * equal to zero.
       *
       * @since   1.1
       */
      protected int pos;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -74,19 +73,19 @@</span>
          if (in == null)
              throw new IOException(&quot;Stream closed&quot;);
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Creates a &lt;code&gt;PushbackInputStream&lt;/code&gt;</span>
<span class="udiff-line-modified-removed">-      * with a pushback buffer of the specified &lt;code&gt;size&lt;/code&gt;,</span>
<span class="udiff-line-modified-added">+      * Creates a {@code PushbackInputStream}</span>
<span class="udiff-line-modified-added">+      * with a pushback buffer of the specified {@code size},</span>
       * and saves its argument, the input stream
<span class="udiff-line-modified-removed">-      * &lt;code&gt;in&lt;/code&gt;, for later use. Initially,</span>
<span class="udiff-line-modified-added">+      * {@code in}, for later use. Initially,</span>
       * the pushback buffer is empty.
       *
       * @param  in    the input stream from which bytes will be read.
       * @param  size  the size of the pushback buffer.
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if {@code size &lt;= 0}</span>
<span class="udiff-line-modified-added">+      * @throws IllegalArgumentException if {@code size &lt;= 0}</span>
       * @since  1.1
       */
      public PushbackInputStream(InputStream in, int size) {
          super(in);
          if (size &lt;= 0) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -95,37 +94,37 @@</span>
          this.buf = new byte[size];
          this.pos = size;
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Creates a &lt;code&gt;PushbackInputStream&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * Creates a {@code PushbackInputStream}</span>
       * with a 1-byte pushback buffer, and saves its argument, the input stream
<span class="udiff-line-modified-removed">-      * &lt;code&gt;in&lt;/code&gt;, for later use. Initially,</span>
<span class="udiff-line-modified-added">+      * {@code in}, for later use. Initially,</span>
       * the pushback buffer is empty.
       *
       * @param   in   the input stream from which bytes will be read.
       */
      public PushbackInputStream(InputStream in) {
          this(in, 1);
      }
  
      /**
       * Reads the next byte of data from this input stream. The value
<span class="udiff-line-modified-removed">-      * byte is returned as an &lt;code&gt;int&lt;/code&gt; in the range</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;0&lt;/code&gt; to &lt;code&gt;255&lt;/code&gt;. If no byte is available</span>
<span class="udiff-line-modified-added">+      * byte is returned as an {@code int} in the range</span>
<span class="udiff-line-modified-added">+      * {@code 0} to {@code 255}. If no byte is available</span>
       * because the end of the stream has been reached, the value
<span class="udiff-line-modified-removed">-      * &lt;code&gt;-1&lt;/code&gt; is returned. This method blocks until input data</span>
<span class="udiff-line-modified-added">+      * {@code -1} is returned. This method blocks until input data</span>
       * is available, the end of the stream is detected, or an exception
       * is thrown.
       *
       * &lt;p&gt; This method returns the most recently pushed-back byte, if there is
<span class="udiff-line-modified-removed">-      * one, and otherwise calls the &lt;code&gt;read&lt;/code&gt; method of its underlying</span>
<span class="udiff-line-modified-added">+      * one, and otherwise calls the {@code read} method of its underlying</span>
       * input stream and returns whatever value that method returns.
       *
<span class="udiff-line-modified-removed">-      * @return     the next byte of data, or &lt;code&gt;-1&lt;/code&gt; if the end of the</span>
<span class="udiff-line-modified-added">+      * @return     the next byte of data, or {@code -1} if the end of the</span>
       *             stream has been reached.
<span class="udiff-line-modified-removed">-      * @exception  IOException  if this input stream has been closed by</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if this input stream has been closed by</span>
       *             invoking its {@link #close()} method,
       *             or an I/O error occurs.
       * @see        java.io.InputStream#read()
       */
      public int read() throws IOException {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -135,28 +134,28 @@</span>
          }
          return super.read();
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Reads up to &lt;code&gt;len&lt;/code&gt; bytes of data from this input stream into</span>
<span class="udiff-line-modified-added">+      * Reads up to {@code len} bytes of data from this input stream into</span>
       * an array of bytes.  This method first reads any pushed-back bytes; after
<span class="udiff-line-modified-removed">-      * that, if fewer than &lt;code&gt;len&lt;/code&gt; bytes have been read then it</span>
<span class="udiff-line-modified-removed">-      * reads from the underlying input stream. If &lt;code&gt;len&lt;/code&gt; is not zero, the method</span>
<span class="udiff-line-modified-added">+      * that, if fewer than {@code len} bytes have been read then it</span>
<span class="udiff-line-modified-added">+      * reads from the underlying input stream. If {@code len} is not zero, the method</span>
       * blocks until at least 1 byte of input is available; otherwise, no
<span class="udiff-line-modified-removed">-      * bytes are read and &lt;code&gt;0&lt;/code&gt; is returned.</span>
<span class="udiff-line-modified-added">+      * bytes are read and {@code 0} is returned.</span>
       *
       * @param      b     the buffer into which the data is read.
<span class="udiff-line-modified-removed">-      * @param      off   the start offset in the destination array &lt;code&gt;b&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * @param      off   the start offset in the destination array {@code b}</span>
       * @param      len   the maximum number of bytes read.
       * @return     the total number of bytes read into the buffer, or
<span class="udiff-line-modified-removed">-      *             &lt;code&gt;-1&lt;/code&gt; if there is no more data because the end of</span>
<span class="udiff-line-modified-added">+      *             {@code -1} if there is no more data because the end of</span>
       *             the stream has been reached.
<span class="udiff-line-modified-removed">-      * @exception  NullPointerException If &lt;code&gt;b&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      * @exception  IndexOutOfBoundsException If &lt;code&gt;off&lt;/code&gt; is negative,</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;len&lt;/code&gt; is negative, or &lt;code&gt;len&lt;/code&gt; is greater than</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;b.length - off&lt;/code&gt;</span>
<span class="udiff-line-modified-removed">-      * @exception  IOException  if this input stream has been closed by</span>
<span class="udiff-line-modified-added">+      * @throws     NullPointerException If {@code b} is {@code null}.</span>
<span class="udiff-line-modified-added">+      * @throws     IndexOutOfBoundsException If {@code off} is negative,</span>
<span class="udiff-line-modified-added">+      *             {@code len} is negative, or {@code len} is greater than</span>
<span class="udiff-line-modified-added">+      *             {@code b.length - off}</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if this input stream has been closed by</span>
       *             invoking its {@link #close()} method,
       *             or an I/O error occurs.
       * @see        java.io.InputStream#read(byte[], int, int)
       */
      public int read(byte[] b, int off, int len) throws IOException {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -190,15 +189,15 @@</span>
      }
  
      /**
       * Pushes back a byte by copying it to the front of the pushback buffer.
       * After this method returns, the next byte to be read will have the value
<span class="udiff-line-modified-removed">-      * &lt;code&gt;(byte)b&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * {@code (byte)b}.</span>
       *
<span class="udiff-line-modified-removed">-      * @param      b   the &lt;code&gt;int&lt;/code&gt; value whose low-order</span>
<span class="udiff-line-modified-added">+      * @param      b   the {@code int} value whose low-order</span>
       *                  byte is to be pushed back.
<span class="udiff-line-modified-removed">-      * @exception IOException If there is not enough room in the pushback</span>
<span class="udiff-line-modified-added">+      * @throws    IOException If there is not enough room in the pushback</span>
       *            buffer for the byte, or this input stream has been closed by
       *            invoking its {@link #close()} method.
       */
      public void unread(int b) throws IOException {
          ensureOpen();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -209,17 +208,18 @@</span>
      }
  
      /**
       * Pushes back a portion of an array of bytes by copying it to the front
       * of the pushback buffer.  After this method returns, the next byte to be
<span class="udiff-line-modified-removed">-      * read will have the value &lt;code&gt;b[off]&lt;/code&gt;, the byte after that will</span>
<span class="udiff-line-modified-removed">-      * have the value &lt;code&gt;b[off+1]&lt;/code&gt;, and so forth.</span>
<span class="udiff-line-modified-added">+      * read will have the value {@code b[off]}, the byte after that will</span>
<span class="udiff-line-modified-added">+      * have the value {@code b[off+1]}, and so forth.</span>
       *
<span class="udiff-line-modified-removed">-      * @param b the byte array to push back.</span>
<span class="udiff-line-modified-removed">-      * @param off the start offset of the data.</span>
<span class="udiff-line-modified-removed">-      * @param len the number of bytes to push back.</span>
<span class="udiff-line-modified-removed">-      * @exception IOException If there is not enough room in the pushback</span>
<span class="udiff-line-modified-added">+      * @param     b the byte array to push back.</span>
<span class="udiff-line-modified-added">+      * @param     off the start offset of the data.</span>
<span class="udiff-line-modified-added">+      * @param     len the number of bytes to push back.</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException If {@code b} is {@code null}.</span>
<span class="udiff-line-added">+      * @throws    IOException If there is not enough room in the pushback</span>
       *            buffer for the specified number of bytes,
       *            or this input stream has been closed by
       *            invoking its {@link #close()} method.
       * @since     1.1
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -233,15 +233,16 @@</span>
      }
  
      /**
       * Pushes back an array of bytes by copying it to the front of the
       * pushback buffer.  After this method returns, the next byte to be read
<span class="udiff-line-modified-removed">-      * will have the value &lt;code&gt;b[0]&lt;/code&gt;, the byte after that will have the</span>
<span class="udiff-line-modified-removed">-      * value &lt;code&gt;b[1]&lt;/code&gt;, and so forth.</span>
<span class="udiff-line-modified-added">+      * will have the value {@code b[0]}, the byte after that will have the</span>
<span class="udiff-line-modified-added">+      * value {@code b[1]}, and so forth.</span>
       *
<span class="udiff-line-modified-removed">-      * @param b the byte array to push back</span>
<span class="udiff-line-modified-removed">-      * @exception IOException If there is not enough room in the pushback</span>
<span class="udiff-line-modified-added">+      * @param     b the byte array to push back</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException If {@code b} is {@code null}.</span>
<span class="udiff-line-added">+      * @throws    IOException If there is not enough room in the pushback</span>
       *            buffer for the specified number of bytes,
       *            or this input stream has been closed by
       *            invoking its {@link #close()} method.
       * @since     1.1
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -260,11 +261,11 @@</span>
       * pushed back and the value returned by {@link
       * java.io.FilterInputStream#available available}.
       *
       * @return     the number of bytes that can be read (or skipped over) from
       *             the input stream without blocking.
<span class="udiff-line-modified-removed">-      * @exception  IOException  if this input stream has been closed by</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if this input stream has been closed by</span>
       *             invoking its {@link #close()} method,
       *             or an I/O error occurs.
       * @see        java.io.FilterInputStream#in
       * @see        java.io.InputStream#available()
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -276,18 +277,18 @@</span>
                      ? Integer.MAX_VALUE
                      : n + avail;
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Skips over and discards &lt;code&gt;n&lt;/code&gt; bytes of data from this</span>
<span class="udiff-line-modified-removed">-      * input stream. The &lt;code&gt;skip&lt;/code&gt; method may, for a variety of</span>
<span class="udiff-line-modified-added">+      * Skips over and discards {@code n} bytes of data from this</span>
<span class="udiff-line-modified-added">+      * input stream. The {@code skip} method may, for a variety of</span>
       * reasons, end up skipping over some smaller number of bytes,
<span class="udiff-line-modified-removed">-      * possibly zero.  If &lt;code&gt;n&lt;/code&gt; is negative, no bytes are skipped.</span>
<span class="udiff-line-modified-added">+      * possibly zero.  If {@code n} is negative, no bytes are skipped.</span>
       *
<span class="udiff-line-modified-removed">-      * &lt;p&gt; The &lt;code&gt;skip&lt;/code&gt; method of &lt;code&gt;PushbackInputStream&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt; The {@code skip} method of {@code PushbackInputStream}</span>
       * first skips over the bytes in the pushback buffer, if any.  It then
<span class="udiff-line-modified-removed">-      * calls the &lt;code&gt;skip&lt;/code&gt; method of the underlying input stream if</span>
<span class="udiff-line-modified-added">+      * calls the {@code skip} method of the underlying input stream if</span>
       * more bytes need to be skipped.  The actual number of bytes skipped
       * is returned.
       *
       * @param      n  {@inheritDoc}
       * @return     {@inheritDoc}
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -318,26 +319,26 @@</span>
          }
          return pskip;
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Tests if this input stream supports the &lt;code&gt;mark&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;reset&lt;/code&gt; methods, which it does not.</span>
<span class="udiff-line-modified-added">+      * Tests if this input stream supports the {@code mark} and</span>
<span class="udiff-line-modified-added">+      * {@code reset} methods, which it does not.</span>
       *
<span class="udiff-line-modified-removed">-      * @return   &lt;code&gt;false&lt;/code&gt;, since this class does not support the</span>
<span class="udiff-line-modified-removed">-      *           &lt;code&gt;mark&lt;/code&gt; and &lt;code&gt;reset&lt;/code&gt; methods.</span>
<span class="udiff-line-modified-removed">-      * @see     java.io.InputStream#mark(int)</span>
<span class="udiff-line-modified-removed">-      * @see     java.io.InputStream#reset()</span>
<span class="udiff-line-modified-added">+      * @return   {@code false}, since this class does not support the</span>
<span class="udiff-line-modified-added">+      *           {@code mark} and {@code reset} methods.</span>
<span class="udiff-line-modified-added">+      * @see      java.io.InputStream#mark(int)</span>
<span class="udiff-line-modified-added">+      * @see      java.io.InputStream#reset()</span>
       */
      public boolean markSupported() {
          return false;
      }
  
      /**
       * Marks the current position in this input stream.
       *
<span class="udiff-line-modified-removed">-      * &lt;p&gt; The &lt;code&gt;mark&lt;/code&gt; method of &lt;code&gt;PushbackInputStream&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt; The {@code mark} method of {@code PushbackInputStream}</span>
       * does nothing.
       *
       * @param   readlimit   the maximum limit of bytes that can be read before
       *                      the mark position becomes invalid.
       * @see     java.io.InputStream#reset()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -345,17 +346,17 @@</span>
      public synchronized void mark(int readlimit) {
      }
  
      /**
       * Repositions this stream to the position at the time the
<span class="udiff-line-modified-removed">-      * &lt;code&gt;mark&lt;/code&gt; method was last called on this input stream.</span>
<span class="udiff-line-modified-added">+      * {@code mark} method was last called on this input stream.</span>
       *
<span class="udiff-line-modified-removed">-      * &lt;p&gt; The method &lt;code&gt;reset&lt;/code&gt; for class</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;PushbackInputStream&lt;/code&gt; does nothing except throw an</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;IOException&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt; The method {@code reset} for class</span>
<span class="udiff-line-modified-added">+      * {@code PushbackInputStream} does nothing except throw an</span>
<span class="udiff-line-modified-added">+      * {@code IOException}.</span>
       *
<span class="udiff-line-modified-removed">-      * @exception  IOException  if this method is invoked.</span>
<span class="udiff-line-modified-added">+      * @throws  IOException  if this method is invoked.</span>
       * @see     java.io.InputStream#mark(int)
       * @see     java.io.IOException
       */
      public synchronized void reset() throws IOException {
          throw new IOException(&quot;mark/reset not supported&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -366,11 +367,11 @@</span>
       * associated with the stream.
       * Once the stream has been closed, further read(), unread(),
       * available(), reset(), or skip() invocations will throw an IOException.
       * Closing a previously closed stream has no effect.
       *
<span class="udiff-line-modified-removed">-      * @exception  IOException  if an I/O error occurs.</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if an I/O error occurs.</span>
       */
      public synchronized void close() throws IOException {
          if (in == null)
              return;
          in.close();
</pre>
<center><a href="PrintWriter.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PushbackReader.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>