<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.base/share/classes/java/lang/constant/MethodTypeDesc.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 package java.lang.constant;
 26 
 27 import java.lang.invoke.MethodType;
 28 import java.lang.invoke.TypeDescriptor;
 29 import java.util.List;
 30 import java.util.stream.Collectors;
 31 import java.util.stream.Stream;
 32 
 33 /**
 34  * A &lt;a href=&quot;package-summary.html#nominal&quot;&gt;nominal descriptor&lt;/a&gt; for a
 35  * {@linkplain MethodType} constant.
 36  *
 37  * @apiNote In the future, if the Java language permits, {@linkplain MethodTypeDesc}
 38  * may become a {@code sealed} interface, which would prohibit subclassing except
 39  * by explicitly permitted types.  Non-platform classes should not implement
 40  * {@linkplain MethodTypeDesc} directly.
 41  *
 42  * @since 12
 43  */
 44 public interface MethodTypeDesc
 45         extends ConstantDesc,
 46                 TypeDescriptor.OfMethod&lt;ClassDesc, MethodTypeDesc&gt; {
 47     /**
 48      * Creates a {@linkplain MethodTypeDesc} given a method descriptor string.
 49      *
 50      * @param descriptor a method descriptor string
 51      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<a name="2" id="anc2"></a><span class="line-modified"> 52      * @throws NullPointerException if the argument is {@code null}</span>
 53      * @throws IllegalArgumentException if the descriptor string is not a valid
 54      * method descriptor
 55      * @jvms 4.3.3 Method Descriptors
 56      */
 57     static MethodTypeDesc ofDescriptor(String descriptor) {
 58         return MethodTypeDescImpl.ofDescriptor(descriptor);
 59     }
 60 
 61     /**
 62      * Returns a {@linkplain MethodTypeDesc} given the return type and parameter
 63      * types.
 64      *
 65      * @param returnDesc a {@linkplain ClassDesc} describing the return type
 66      * @param paramDescs {@linkplain ClassDesc}s describing the argument types
 67      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<a name="3" id="anc3"></a><span class="line-modified"> 68      * @throws NullPointerException if any argument or its contents are {@code null}</span>
<span class="line-added"> 69      * @throws IllegalArgumentException if any element of {@code paramDescs} is a</span>
<span class="line-added"> 70      * {@link ClassDesc} for {@code void}</span>
 71      */
 72     static MethodTypeDesc of(ClassDesc returnDesc, ClassDesc... paramDescs) {
 73         return new MethodTypeDescImpl(returnDesc, paramDescs);
 74     }
 75 
 76     /**
 77      * Gets the return type of the method type described by this {@linkplain MethodTypeDesc}.
 78      *
 79      * @return a {@link ClassDesc} describing the return type of the method type
 80      */
 81     ClassDesc returnType();
 82 
 83     /**
 84      * Returns the number of parameters of the method type described by
 85      * this {@linkplain MethodTypeDesc}.
 86      * @return the number of parameters
 87      */
 88     int parameterCount();
 89 
 90     /**
 91      * Returns the parameter type of the {@code index}&#39;th parameter of the method type
 92      * described by this {@linkplain MethodTypeDesc}.
 93      *
 94      * @param index the index of the parameter to retrieve
 95      * @return a {@link ClassDesc} describing the desired parameter type
 96      * @throws IndexOutOfBoundsException if the index is outside the half-open
 97      * range {[0, parameterCount())}
 98      */
 99     ClassDesc parameterType(int index);
100 
101     /**
102      * Returns the parameter types as an immutable {@link List}.
103      *
104      * @return a {@link List} of {@link ClassDesc} describing the parameter types
105      */
106     List&lt;ClassDesc&gt; parameterList();
107 
108     /**
109      * Returns the parameter types as an array.
110      *
111      * @return an array of {@link ClassDesc} describing the parameter types
112      */
113     ClassDesc[] parameterArray();
114 
115     /**
116      * Returns a {@linkplain MethodTypeDesc} that is identical to
117      * this one, except with the specified return type.
118      *
119      * @param returnType a {@link ClassDesc} describing the new return type
120      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<a name="4" id="anc4"></a><span class="line-modified">121      * @throws NullPointerException if the argument is {@code null}</span>
122      */
123     MethodTypeDesc changeReturnType(ClassDesc returnType);
124 
125     /**
126      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
127      * except that a single parameter type has been changed to the specified type.
128      *
129      * @param index the index of the parameter to change
130      * @param paramType a {@link ClassDesc} describing the new parameter type
131      * @return a {@linkplain MethodTypeDesc} describing the desired method type
132      * @throws NullPointerException if any argument is {@code null}
133      * @throws IndexOutOfBoundsException if the index is outside the half-open
134      * range {[0, parameterCount)}
135      */
136     MethodTypeDesc changeParameterType(int index, ClassDesc paramType);
137 
138     /**
139      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
140      * except that a range of parameter types have been removed.
141      *
142      * @param start the index of the first parameter to remove
143      * @param end the index after the last parameter to remove
144      * @return a {@linkplain MethodTypeDesc} describing the desired method type
145      * @throws IndexOutOfBoundsException if {@code start} is outside the half-open
<a name="5" id="anc5"></a><span class="line-modified">146      * range {@code [0, parameterCount)}, or {@code end} is outside the closed range</span>
<span class="line-modified">147      * {@code [0, parameterCount]}, or if {@code start &gt; end}</span>
148      */
149     MethodTypeDesc dropParameterTypes(int start, int end);
150 
151     /**
152      * Returns a {@linkplain MethodTypeDesc} that is identical to this one,
153      * except that a range of additional parameter types have been inserted.
154      *
155      * @param pos the index at which to insert the first inserted parameter
156      * @param paramTypes {@link ClassDesc}s describing the new parameter types
157      *                   to insert
158      * @return a {@linkplain MethodTypeDesc} describing the desired method type
<a name="6" id="anc6"></a><span class="line-modified">159      * @throws NullPointerException if any argument or its contents are {@code null}</span>
160      * @throws IndexOutOfBoundsException if {@code pos} is outside the closed
161      * range {[0, parameterCount]}
<a name="7" id="anc7"></a><span class="line-added">162      * @throws IllegalArgumentException if any element of {@code paramTypes}</span>
<span class="line-added">163      * is a {@link ClassDesc} for {@code void}</span>
164      */
165     MethodTypeDesc insertParameterTypes(int pos, ClassDesc... paramTypes);
166 
167     /**
168      * Returns the method type descriptor string.
169      *
170      * @return the method type descriptor string
171      * @jvms 4.3.3 Method Descriptors
172      */
173     default String descriptorString() {
174         return String.format(&quot;(%s)%s&quot;,
175                              Stream.of(parameterArray())
176                                    .map(ClassDesc::descriptorString)
177                                    .collect(Collectors.joining()),
178                              returnType().descriptorString());
179     }
180 
181     /**
182      * Returns a human-readable descriptor for this method type, using the
183      * canonical names for parameter and return types.
184      *
185      * @return the human-readable descriptor for this method type
186      */
187     default String displayDescriptor() {
188         return String.format(&quot;(%s)%s&quot;,
189                              Stream.of(parameterArray())
190                                    .map(ClassDesc::displayName)
191                                    .collect(Collectors.joining(&quot;,&quot;)),
192                              returnType().displayName());
193     }
194 
195     /**
196      * Compares the specified object with this descriptor for equality.  Returns
197      * {@code true} if and only if the specified object is also a
198      * {@linkplain MethodTypeDesc} both have the same arity, their return types
199      * are equal, and each pair of corresponding parameter types are equal.
200      *
201      * @param o the other object
202      * @return whether this descriptor is equal to the other object
203      */
204     boolean equals(Object o);
205 }
<a name="8" id="anc8"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="8" type="hidden" />
</body>
</html>