<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/time/chrono/JapaneseEra.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="JapaneseDate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MinguoChronology.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/time/chrono/JapaneseEra.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
134      * The singleton instance for the &#39;Meiji&#39; era (1868-01-01 - 1912-07-29)
135      * which has the value -1.
136      */
137     public static final JapaneseEra MEIJI = new JapaneseEra(-1, LocalDate.of(1868, 1, 1));
138     /**
139      * The singleton instance for the &#39;Taisho&#39; era (1912-07-30 - 1926-12-24)
140      * which has the value 0.
141      */
142     public static final JapaneseEra TAISHO = new JapaneseEra(0, LocalDate.of(1912, 7, 30));
143     /**
144      * The singleton instance for the &#39;Showa&#39; era (1926-12-25 - 1989-01-07)
145      * which has the value 1.
146      */
147     public static final JapaneseEra SHOWA = new JapaneseEra(1, LocalDate.of(1926, 12, 25));
148     /**
149      * The singleton instance for the &#39;Heisei&#39; era (1989-01-08 - 2019-04-30)
150      * which has the value 2.
151      */
152     public static final JapaneseEra HEISEI = new JapaneseEra(2, LocalDate.of(1989, 1, 8));
153     /**
<span class="line-modified">154      * The singleton instance for the &#39;NewEra&#39; era (2019-05-01 - current)</span>
<span class="line-modified">155      * which has the value 3.</span>



156      */
<span class="line-modified">157     private static final JapaneseEra NEWERA = new JapaneseEra(3, LocalDate.of(2019, 5, 1));</span>
158 
159     // The number of predefined JapaneseEra constants.
160     // There may be a supplemental era defined by the property.
<span class="line-modified">161     private static final int N_ERA_CONSTANTS = NEWERA.getValue() + ERA_OFFSET;</span>
162 
163     /**
164      * Serialization version.
165      */

166     private static final long serialVersionUID = 1466499369062886794L;
167 
168     // array for the singleton JapaneseEra instances
169     private static final JapaneseEra[] KNOWN_ERAS;
170 
171     static {
172         ERA_CONFIG = JapaneseChronology.JCAL.getEras();
173 
174         KNOWN_ERAS = new JapaneseEra[ERA_CONFIG.length];
175         KNOWN_ERAS[0] = MEIJI;
176         KNOWN_ERAS[1] = TAISHO;
177         KNOWN_ERAS[2] = SHOWA;
178         KNOWN_ERAS[3] = HEISEI;
<span class="line-modified">179         KNOWN_ERAS[4] = NEWERA;</span>
180         for (int i = N_ERA_CONSTANTS; i &lt; ERA_CONFIG.length; i++) {
181             CalendarDate date = ERA_CONFIG[i].getSinceDate();
182             LocalDate isoDate = LocalDate.of(date.getYear(), date.getMonth(), date.getDayOfMonth());
183             KNOWN_ERAS[i] = new JapaneseEra(i - ERA_OFFSET + 1, isoDate);
184         }
185     };
186 
187     /**
188      * The era value.
189      * @serial
190      */
191     private final transient int eraValue;
192 
193     // the first day of the era
194     private final transient LocalDate since;
195 
196     /**
197      * Creates an instance.
198      *
199      * @param eraValue  the era value, validated
</pre>
<hr />
<pre>
406     String getAbbreviation() {
407         return ERA_CONFIG[ordinal(getValue())].getAbbreviation();
408     }
409 
410     String getName() {
411         return ERA_CONFIG[ordinal(getValue())].getName();
412     }
413 
414     @Override
415     public String toString() {
416         return getName();
417     }
418 
419     //-----------------------------------------------------------------------
420     /**
421      * Defend against malicious streams.
422      *
423      * @param s the stream to read
424      * @throws InvalidObjectException always
425      */

426     private void readObject(ObjectInputStream s) throws InvalidObjectException {
427         throw new InvalidObjectException(&quot;Deserialization via serialization delegate&quot;);
428     }
429 
430     //-----------------------------------------------------------------------
431     /**
432      * Writes the object using a
433      * &lt;a href=&quot;{@docRoot}/serialized-form.html#java.time.chrono.Ser&quot;&gt;dedicated serialized form&lt;/a&gt;.
434      * @serialData
435      * &lt;pre&gt;
436      *  out.writeByte(5);        // identifies a JapaneseEra
437      *  out.writeInt(getValue());
438      * &lt;/pre&gt;
439      *
440      * @return the instance of {@code Ser}, not null
441      */

442     private Object writeReplace() {
443         return new Ser(Ser.JAPANESE_ERA_TYPE, this);
444     }
445 
446     void writeExternal(DataOutput out) throws IOException {
447         out.writeByte(this.getValue());
448     }
449 
450     static JapaneseEra readExternal(DataInput in) throws IOException {
451         byte eraValue = in.readByte();
452         return JapaneseEra.of(eraValue);
453     }
454 
455 }
</pre>
</td>
<td>
<hr />
<pre>
134      * The singleton instance for the &#39;Meiji&#39; era (1868-01-01 - 1912-07-29)
135      * which has the value -1.
136      */
137     public static final JapaneseEra MEIJI = new JapaneseEra(-1, LocalDate.of(1868, 1, 1));
138     /**
139      * The singleton instance for the &#39;Taisho&#39; era (1912-07-30 - 1926-12-24)
140      * which has the value 0.
141      */
142     public static final JapaneseEra TAISHO = new JapaneseEra(0, LocalDate.of(1912, 7, 30));
143     /**
144      * The singleton instance for the &#39;Showa&#39; era (1926-12-25 - 1989-01-07)
145      * which has the value 1.
146      */
147     public static final JapaneseEra SHOWA = new JapaneseEra(1, LocalDate.of(1926, 12, 25));
148     /**
149      * The singleton instance for the &#39;Heisei&#39; era (1989-01-08 - 2019-04-30)
150      * which has the value 2.
151      */
152     public static final JapaneseEra HEISEI = new JapaneseEra(2, LocalDate.of(1989, 1, 8));
153     /**
<span class="line-modified">154      * The singleton instance for the &#39;Reiwa&#39; era (2019-05-01 - )</span>
<span class="line-modified">155      * which has the value 3. The end date of this era is not specified, unless</span>
<span class="line-added">156      * the Japanese Government defines it.</span>
<span class="line-added">157      *</span>
<span class="line-added">158      * @since 13</span>
159      */
<span class="line-modified">160     public static final JapaneseEra REIWA = new JapaneseEra(3, LocalDate.of(2019, 5, 1));</span>
161 
162     // The number of predefined JapaneseEra constants.
163     // There may be a supplemental era defined by the property.
<span class="line-modified">164     private static final int N_ERA_CONSTANTS = REIWA.getValue() + ERA_OFFSET;</span>
165 
166     /**
167      * Serialization version.
168      */
<span class="line-added">169     @java.io.Serial</span>
170     private static final long serialVersionUID = 1466499369062886794L;
171 
172     // array for the singleton JapaneseEra instances
173     private static final JapaneseEra[] KNOWN_ERAS;
174 
175     static {
176         ERA_CONFIG = JapaneseChronology.JCAL.getEras();
177 
178         KNOWN_ERAS = new JapaneseEra[ERA_CONFIG.length];
179         KNOWN_ERAS[0] = MEIJI;
180         KNOWN_ERAS[1] = TAISHO;
181         KNOWN_ERAS[2] = SHOWA;
182         KNOWN_ERAS[3] = HEISEI;
<span class="line-modified">183         KNOWN_ERAS[4] = REIWA;</span>
184         for (int i = N_ERA_CONSTANTS; i &lt; ERA_CONFIG.length; i++) {
185             CalendarDate date = ERA_CONFIG[i].getSinceDate();
186             LocalDate isoDate = LocalDate.of(date.getYear(), date.getMonth(), date.getDayOfMonth());
187             KNOWN_ERAS[i] = new JapaneseEra(i - ERA_OFFSET + 1, isoDate);
188         }
189     };
190 
191     /**
192      * The era value.
193      * @serial
194      */
195     private final transient int eraValue;
196 
197     // the first day of the era
198     private final transient LocalDate since;
199 
200     /**
201      * Creates an instance.
202      *
203      * @param eraValue  the era value, validated
</pre>
<hr />
<pre>
410     String getAbbreviation() {
411         return ERA_CONFIG[ordinal(getValue())].getAbbreviation();
412     }
413 
414     String getName() {
415         return ERA_CONFIG[ordinal(getValue())].getName();
416     }
417 
418     @Override
419     public String toString() {
420         return getName();
421     }
422 
423     //-----------------------------------------------------------------------
424     /**
425      * Defend against malicious streams.
426      *
427      * @param s the stream to read
428      * @throws InvalidObjectException always
429      */
<span class="line-added">430     @java.io.Serial</span>
431     private void readObject(ObjectInputStream s) throws InvalidObjectException {
432         throw new InvalidObjectException(&quot;Deserialization via serialization delegate&quot;);
433     }
434 
435     //-----------------------------------------------------------------------
436     /**
437      * Writes the object using a
438      * &lt;a href=&quot;{@docRoot}/serialized-form.html#java.time.chrono.Ser&quot;&gt;dedicated serialized form&lt;/a&gt;.
439      * @serialData
440      * &lt;pre&gt;
441      *  out.writeByte(5);        // identifies a JapaneseEra
442      *  out.writeInt(getValue());
443      * &lt;/pre&gt;
444      *
445      * @return the instance of {@code Ser}, not null
446      */
<span class="line-added">447     @java.io.Serial</span>
448     private Object writeReplace() {
449         return new Ser(Ser.JAPANESE_ERA_TYPE, this);
450     }
451 
452     void writeExternal(DataOutput out) throws IOException {
453         out.writeByte(this.getValue());
454     }
455 
456     static JapaneseEra readExternal(DataInput in) throws IOException {
457         byte eraValue = in.readByte();
458         return JapaneseEra.of(eraValue);
459     }
460 
461 }
</pre>
</td>
</tr>
</table>
<center><a href="JapaneseDate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="MinguoChronology.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>