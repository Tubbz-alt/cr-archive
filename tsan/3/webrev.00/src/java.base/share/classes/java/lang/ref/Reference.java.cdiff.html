<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/lang/ref/Reference.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../module/package-info.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../reflect/AccessibleObject.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/ref/Reference.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 321,14 ***</span>
      /* -- Referent accessor and setters -- */
  
      /**
       * Returns this reference object&#39;s referent.  If this reference object has
       * been cleared, either by the program or by the garbage collector, then
<span class="line-modified">!      * this method returns &lt;code&gt;null&lt;/code&gt;.</span>
       *
       * @return   The object to which this reference refers, or
<span class="line-modified">!      *           &lt;code&gt;null&lt;/code&gt; if this reference object has been cleared</span>
       */
      @HotSpotIntrinsicCandidate
      public T get() {
          return this.referent;
      }
<span class="line-new-header">--- 321,14 ---</span>
      /* -- Referent accessor and setters -- */
  
      /**
       * Returns this reference object&#39;s referent.  If this reference object has
       * been cleared, either by the program or by the garbage collector, then
<span class="line-modified">!      * this method returns {@code null}.</span>
       *
       * @return   The object to which this reference refers, or
<span class="line-modified">!      *           {@code null} if this reference object has been cleared</span>
       */
      @HotSpotIntrinsicCandidate
      public T get() {
          return this.referent;
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 348,13 ***</span>
  
      /**
       * Tells whether or not this reference object has been enqueued, either by
       * the program or by the garbage collector.  If this reference object was
       * not registered with a queue when it was created, then this method will
<span class="line-modified">!      * always return &lt;code&gt;false&lt;/code&gt;.</span>
       *
<span class="line-modified">!      * @return   &lt;code&gt;true&lt;/code&gt; if and only if this reference object has</span>
       *           been enqueued
       */
      public boolean isEnqueued() {
          return (this.queue == ReferenceQueue.ENQUEUED);
      }
<span class="line-new-header">--- 348,13 ---</span>
  
      /**
       * Tells whether or not this reference object has been enqueued, either by
       * the program or by the garbage collector.  If this reference object was
       * not registered with a queue when it was created, then this method will
<span class="line-modified">!      * always return {@code false}.</span>
       *
<span class="line-modified">!      * @return   {@code true} if and only if this reference object has</span>
       *           been enqueued
       */
      public boolean isEnqueued() {
          return (this.queue == ReferenceQueue.ENQUEUED);
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 364,12 ***</span>
       * it is registered, if any.
       *
       * &lt;p&gt; This method is invoked only by Java code; when the garbage collector
       * enqueues references it does so directly, without invoking this method.
       *
<span class="line-modified">!      * @return   &lt;code&gt;true&lt;/code&gt; if this reference object was successfully</span>
<span class="line-modified">!      *           enqueued; &lt;code&gt;false&lt;/code&gt; if it was already enqueued or if</span>
       *           it was not registered with a queue when it was created
       */
      public boolean enqueue() {
          this.referent = null;
          return this.queue.enqueue(this);
<span class="line-new-header">--- 364,12 ---</span>
       * it is registered, if any.
       *
       * &lt;p&gt; This method is invoked only by Java code; when the garbage collector
       * enqueues references it does so directly, without invoking this method.
       *
<span class="line-modified">!      * @return   {@code true} if this reference object was successfully</span>
<span class="line-modified">!      *           enqueued; {@code false} if it was already enqueued or if</span>
       *           it was not registered with a queue when it was created
       */
      public boolean enqueue() {
          this.referent = null;
          return this.queue.enqueue(this);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 416,14 ***</span>
       * triggering garbage collection.  This method is designed for use in
       * uncommon situations of premature finalization where using
       * {@code synchronized} blocks or methods, or using other synchronization
       * facilities are not possible or do not provide the desired control.  This
       * method is applicable only when reclamation may have visible effects,
<span class="line-modified">!      * which is possible for objects with finalizers (See</span>
<span class="line-modified">!      * &lt;a href=&quot;https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.6&quot;&gt;</span>
<span class="line-modified">!      * Section 12.6 17 of &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;&lt;/a&gt;)</span>
<span class="line-modified">!      * that are implemented in ways that rely on ordering control for correctness.</span>
       *
       * @apiNote
       * Finalization may occur whenever the virtual machine detects that no
       * reference to an object will ever be stored in the heap: The garbage
       * collector may reclaim an object even if the fields of that object are
<span class="line-new-header">--- 416,14 ---</span>
       * triggering garbage collection.  This method is designed for use in
       * uncommon situations of premature finalization where using
       * {@code synchronized} blocks or methods, or using other synchronization
       * facilities are not possible or do not provide the desired control.  This
       * method is applicable only when reclamation may have visible effects,
<span class="line-modified">!      * which is possible for objects with finalizers (See Section 12.6</span>
<span class="line-modified">!      * of &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;) that</span>
<span class="line-modified">!      * are implemented in ways that rely on ordering control for</span>
<span class="line-modified">!      * correctness.</span>
       *
       * @apiNote
       * Finalization may occur whenever the virtual machine detects that no
       * reference to an object will ever be stored in the heap: The garbage
       * collector may reclaim an object even if the fields of that object are
</pre>
<hr />
<pre>
<span class="line-old-header">*** 506,10 ***</span>
<span class="line-new-header">--- 506,11 ---</span>
       * remains a better option in cases where this approach is not as efficient,
       * desirable, or possible; for example because it would encounter deadlock.
       *
       * @param ref the reference. If {@code null}, this method has no effect.
       * @since 9
<span class="line-added">+      * @jls 12.6 Finalization of Class Instances</span>
       */
      @ForceInline
      public static void reachabilityFence(Object ref) {
          // Does nothing. This method is annotated with @ForceInline to eliminate
          // most of the overhead that using @DontInline would cause with the
</pre>
<center><a href="../module/package-info.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../reflect/AccessibleObject.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>