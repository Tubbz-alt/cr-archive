<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/text/DecimalFormat.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="DateFormatSymbols.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="DecimalFormatSymbols.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/text/DecimalFormat.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1996, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1996, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -52,43 +52,43 @@</span>
  import java.util.concurrent.atomic.AtomicLong;
  import sun.util.locale.provider.LocaleProviderAdapter;
  import sun.util.locale.provider.ResourceBundleBasedAdapter;
  
  /**
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt; is a concrete subclass of</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;NumberFormat&lt;/code&gt; that formats decimal numbers. It has a variety of</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat} is a concrete subclass of</span>
<span class="udiff-line-modified-added">+  * {@code NumberFormat} that formats decimal numbers. It has a variety of</span>
   * features designed to make it possible to parse and format numbers in any
   * locale, including support for Western, Arabic, and Indic digits.  It also
   * supports different kinds of numbers, including integers (123), fixed-point
   * numbers (123.4), scientific notation (1.23E4), percentages (12%), and
   * currency amounts ($123).  All of these can be localized.
   *
<span class="udiff-line-modified-removed">-  * &lt;p&gt;To obtain a &lt;code&gt;NumberFormat&lt;/code&gt; for a specific locale, including the</span>
<span class="udiff-line-modified-removed">-  * default locale, call one of &lt;code&gt;NumberFormat&lt;/code&gt;&#39;s factory methods, such</span>
<span class="udiff-line-modified-removed">-  * as &lt;code&gt;getInstance()&lt;/code&gt;.  In general, do not call the</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt; constructors directly, since the</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;NumberFormat&lt;/code&gt; factory methods may return subclasses other than</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt;. If you need to customize the format object, do</span>
<span class="udiff-line-modified-added">+  * &lt;p&gt;To obtain a {@code NumberFormat} for a specific locale, including the</span>
<span class="udiff-line-modified-added">+  * default locale, call one of {@code NumberFormat}&#39;s factory methods, such</span>
<span class="udiff-line-modified-added">+  * as {@code getInstance()}.  In general, do not call the</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat} constructors directly, since the</span>
<span class="udiff-line-modified-added">+  * {@code NumberFormat} factory methods may return subclasses other than</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat}. If you need to customize the format object, do</span>
   * something like this:
   *
   * &lt;blockquote&gt;&lt;pre&gt;
   * NumberFormat f = NumberFormat.getInstance(loc);
   * if (f instanceof DecimalFormat) {
   *     ((DecimalFormat) f).setDecimalSeparatorAlwaysShown(true);
   * }
   * &lt;/pre&gt;&lt;/blockquote&gt;
   *
<span class="udiff-line-modified-removed">-  * &lt;p&gt;A &lt;code&gt;DecimalFormat&lt;/code&gt; comprises a &lt;em&gt;pattern&lt;/em&gt; and a set of</span>
<span class="udiff-line-modified-added">+  * &lt;p&gt;A {@code DecimalFormat} comprises a &lt;em&gt;pattern&lt;/em&gt; and a set of</span>
   * &lt;em&gt;symbols&lt;/em&gt;.  The pattern may be set directly using
<span class="udiff-line-modified-removed">-  * &lt;code&gt;applyPattern()&lt;/code&gt;, or indirectly using the API methods.  The</span>
<span class="udiff-line-modified-removed">-  * symbols are stored in a &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object.  When using</span>
<span class="udiff-line-modified-removed">-  * the &lt;code&gt;NumberFormat&lt;/code&gt; factory methods, the pattern and symbols are</span>
<span class="udiff-line-modified-removed">-  * read from localized &lt;code&gt;ResourceBundle&lt;/code&gt;s.</span>
<span class="udiff-line-modified-added">+  * {@code applyPattern()}, or indirectly using the API methods.  The</span>
<span class="udiff-line-modified-added">+  * symbols are stored in a {@code DecimalFormatSymbols} object.  When using</span>
<span class="udiff-line-modified-added">+  * the {@code NumberFormat} factory methods, the pattern and symbols are</span>
<span class="udiff-line-modified-added">+  * read from localized {@code ResourceBundle}s.</span>
   *
<span class="udiff-line-modified-removed">-  * &lt;h3&gt;Patterns&lt;/h3&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h2&gt;Patterns&lt;/h2&gt;</span>
   *
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt; patterns have the following syntax:</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat} patterns have the following syntax:</span>
   * &lt;blockquote&gt;&lt;pre&gt;
   * &lt;i&gt;Pattern:&lt;/i&gt;
   *         &lt;i&gt;PositivePattern&lt;/i&gt;
   *         &lt;i&gt;PositivePattern&lt;/i&gt; ; &lt;i&gt;NegativePattern&lt;/i&gt;
   * &lt;i&gt;PositivePattern:&lt;/i&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -121,52 +121,52 @@</span>
   *         E &lt;i&gt;MinimumExponent&lt;/i&gt;
   * &lt;i&gt;MinimumExponent:&lt;/i&gt;
   *         0 &lt;i&gt;MinimumExponent&lt;sub&gt;opt&lt;/sub&gt;&lt;/i&gt;
   * &lt;/pre&gt;&lt;/blockquote&gt;
   *
<span class="udiff-line-modified-removed">-  * &lt;p&gt;A &lt;code&gt;DecimalFormat&lt;/code&gt; pattern contains a positive and negative</span>
<span class="udiff-line-modified-removed">-  * subpattern, for example, &lt;code&gt;&quot;#,##0.00;(#,##0.00)&quot;&lt;/code&gt;.  Each</span>
<span class="udiff-line-modified-added">+  * &lt;p&gt;A {@code DecimalFormat} pattern contains a positive and negative</span>
<span class="udiff-line-modified-added">+  * subpattern, for example, {@code &quot;#,##0.00;(#,##0.00)&quot;}.  Each</span>
   * subpattern has a prefix, numeric part, and suffix. The negative subpattern
   * is optional; if absent, then the positive subpattern prefixed with the
<span class="udiff-line-modified-removed">-  * localized minus sign (&lt;code&gt;&#39;-&#39;&lt;/code&gt; in most locales) is used as the</span>
<span class="udiff-line-modified-removed">-  * negative subpattern. That is, &lt;code&gt;&quot;0.00&quot;&lt;/code&gt; alone is equivalent to</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&quot;0.00;-0.00&quot;&lt;/code&gt;.  If there is an explicit negative subpattern, it</span>
<span class="udiff-line-modified-added">+  * localized minus sign ({@code &#39;-&#39;} in most locales) is used as the</span>
<span class="udiff-line-modified-added">+  * negative subpattern. That is, {@code &quot;0.00&quot;} alone is equivalent to</span>
<span class="udiff-line-modified-added">+  * {@code &quot;0.00;-0.00&quot;}.  If there is an explicit negative subpattern, it</span>
   * serves only to specify the negative prefix and suffix; the number of digits,
   * minimal digits, and other characteristics are all the same as the positive
<span class="udiff-line-modified-removed">-  * pattern. That means that &lt;code&gt;&quot;#,##0.0#;(#)&quot;&lt;/code&gt; produces precisely</span>
<span class="udiff-line-modified-removed">-  * the same behavior as &lt;code&gt;&quot;#,##0.0#;(#,##0.0#)&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  * pattern. That means that {@code &quot;#,##0.0#;(#)&quot;} produces precisely</span>
<span class="udiff-line-modified-added">+  * the same behavior as {@code &quot;#,##0.0#;(#,##0.0#)&quot;}.</span>
   *
   * &lt;p&gt;The prefixes, suffixes, and various symbols used for infinity, digits,
<span class="udiff-line-modified-removed">-  * thousands separators, decimal separators, etc. may be set to arbitrary</span>
<span class="udiff-line-modified-added">+  * grouping separators, decimal separators, etc. may be set to arbitrary</span>
   * values, and they will appear properly during formatting.  However, care must
   * be taken that the symbols and strings do not conflict, or parsing will be
   * unreliable.  For example, either the positive and negative prefixes or the
<span class="udiff-line-modified-removed">-  * suffixes must be distinct for &lt;code&gt;DecimalFormat.parse()&lt;/code&gt; to be able</span>
<span class="udiff-line-modified-added">+  * suffixes must be distinct for {@code DecimalFormat.parse()} to be able</span>
   * to distinguish positive from negative values.  (If they are identical, then
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt; will behave as if no negative subpattern was</span>
<span class="udiff-line-modified-removed">-  * specified.)  Another example is that the decimal separator and thousands</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat} will behave as if no negative subpattern was</span>
<span class="udiff-line-modified-added">+  * specified.)  Another example is that the decimal separator and grouping</span>
   * separator should be distinct characters, or parsing will be impossible.
   *
   * &lt;p&gt;The grouping separator is commonly used for thousands, but in some
   * countries it separates ten-thousands. The grouping size is a constant number
   * of digits between the grouping characters, such as 3 for 100,000,000 or 4 for
   * 1,0000,0000.  If you supply a pattern with multiple grouping characters, the
   * interval between the last one and the end of the integer is the one that is
<span class="udiff-line-modified-removed">-  * used. So &lt;code&gt;&quot;#,##,###,####&quot;&lt;/code&gt; == &lt;code&gt;&quot;######,####&quot;&lt;/code&gt; ==</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&quot;##,####,####&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  * used. So {@code &quot;#,##,###,####&quot;} == {@code &quot;######,####&quot;} ==</span>
<span class="udiff-line-modified-added">+  * {@code &quot;##,####,####&quot;}.</span>
   *
<span class="udiff-line-modified-removed">-  * &lt;h4&gt;&lt;a id=&quot;special_pattern_character&quot;&gt;Special Pattern Characters&lt;/a&gt;&lt;/h4&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h3&gt;&lt;a id=&quot;special_pattern_character&quot;&gt;Special Pattern Characters&lt;/a&gt;&lt;/h3&gt;</span>
   *
   * &lt;p&gt;Many characters in a pattern are taken literally; they are matched during
   * parsing and output unchanged during formatting.  Special characters, on the
   * other hand, stand for other characters, strings, or classes of characters.
   * They must be quoted, unless noted otherwise, if they are to appear in the
   * prefix or suffix as literals.
   *
   * &lt;p&gt;The characters listed here are used in non-localized patterns.  Localized
   * patterns use the corresponding characters taken from this formatter&#39;s
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object instead, and these characters lose</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormatSymbols} object instead, and these characters lose</span>
   * their special status.  Two exceptions are the currency sign and quote, which
   * are not localized.
   *
   * &lt;blockquote&gt;
   * &lt;table class=&quot;striped&quot;&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -178,167 +178,167 @@</span>
   *          &lt;th scope=&quot;col&quot; style=&quot;text-align:left&quot;&gt;Localized?
   *          &lt;th scope=&quot;col&quot; style=&quot;text-align:left&quot;&gt;Meaning
   * &lt;/thead&gt;
   * &lt;tbody&gt;
   *     &lt;tr style=&quot;vertical-align:top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;0&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code 0}</span>
   *          &lt;td&gt;Number
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Digit
   *     &lt;tr style=&quot;vertical-align: top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;#&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code #}</span>
   *          &lt;td&gt;Number
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Digit, zero shows as absent
   *     &lt;tr style=&quot;vertical-align:top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;.&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code .}</span>
   *          &lt;td&gt;Number
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Decimal separator or monetary decimal separator
   *     &lt;tr style=&quot;vertical-align: top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;-&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code -}</span>
   *          &lt;td&gt;Number
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Minus sign
   *     &lt;tr style=&quot;vertical-align:top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;,&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code ,}</span>
   *          &lt;td&gt;Number
   *          &lt;td&gt;Yes
<span class="udiff-line-modified-removed">-  *          &lt;td&gt;Grouping separator</span>
<span class="udiff-line-modified-added">+  *          &lt;td&gt;Grouping separator or monetary grouping separator</span>
   *     &lt;tr style=&quot;vertical-align: top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;E&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code E}</span>
   *          &lt;td&gt;Number
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Separates mantissa and exponent in scientific notation.
   *              &lt;em&gt;Need not be quoted in prefix or suffix.&lt;/em&gt;
   *     &lt;tr style=&quot;vertical-align:top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;;&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code ;}</span>
   *          &lt;td&gt;Subpattern boundary
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Separates positive and negative subpatterns
   *     &lt;tr style=&quot;vertical-align: top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;%&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code %}</span>
   *          &lt;td&gt;Prefix or suffix
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Multiply by 100 and show as percentage
   *     &lt;tr style=&quot;vertical-align:top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;&amp;#92;u2030&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code &amp;#92;u2030}</span>
   *          &lt;td&gt;Prefix or suffix
   *          &lt;td&gt;Yes
   *          &lt;td&gt;Multiply by 1000 and show as per mille value
   *     &lt;tr style=&quot;vertical-align: top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;&amp;#164;&lt;/code&gt; (&lt;code&gt;&amp;#92;u00A4&lt;/code&gt;)</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code &amp;#164;} ({@code &amp;#92;u00A4})</span>
   *          &lt;td&gt;Prefix or suffix
   *          &lt;td&gt;No
   *          &lt;td&gt;Currency sign, replaced by currency symbol.  If
   *              doubled, replaced by international currency symbol.
<span class="udiff-line-modified-removed">-  *              If present in a pattern, the monetary decimal separator</span>
<span class="udiff-line-modified-removed">-  *              is used instead of the decimal separator.</span>
<span class="udiff-line-modified-added">+  *              If present in a pattern, the monetary decimal/grouping separators</span>
<span class="udiff-line-modified-added">+  *              are used instead of the decimal/grouping separators.</span>
   *     &lt;tr style=&quot;vertical-align:top&quot;&gt;
<span class="udiff-line-modified-removed">-  *          &lt;th scope=&quot;row&quot;&gt;&lt;code&gt;&#39;&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+  *          &lt;th scope=&quot;row&quot;&gt;{@code &#39;}</span>
   *          &lt;td&gt;Prefix or suffix
   *          &lt;td&gt;No
   *          &lt;td&gt;Used to quote special characters in a prefix or suffix,
<span class="udiff-line-modified-removed">-  *              for example, &lt;code&gt;&quot;&#39;#&#39;#&quot;&lt;/code&gt; formats 123 to</span>
<span class="udiff-line-modified-removed">-  *              &lt;code&gt;&quot;#123&quot;&lt;/code&gt;.  To create a single quote</span>
<span class="udiff-line-modified-removed">-  *              itself, use two in a row: &lt;code&gt;&quot;# o&#39;&#39;clock&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  *              for example, {@code &quot;&#39;#&#39;#&quot;} formats 123 to</span>
<span class="udiff-line-modified-added">+  *              {@code &quot;#123&quot;}.  To create a single quote</span>
<span class="udiff-line-modified-added">+  *              itself, use two in a row: {@code &quot;# o&#39;&#39;clock&quot;}.</span>
   * &lt;/tbody&gt;
   * &lt;/table&gt;
   * &lt;/blockquote&gt;
   *
<span class="udiff-line-modified-removed">-  * &lt;h4&gt;Scientific Notation&lt;/h4&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h3&gt;Scientific Notation&lt;/h3&gt;</span>
   *
   * &lt;p&gt;Numbers in scientific notation are expressed as the product of a mantissa
   * and a power of ten, for example, 1234 can be expressed as 1.234 x 10^3.  The
   * mantissa is often in the range 1.0 &amp;le; x {@literal &lt;} 10.0, but it need not
   * be.
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt; can be instructed to format and parse scientific</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat} can be instructed to format and parse scientific</span>
   * notation &lt;em&gt;only via a pattern&lt;/em&gt;; there is currently no factory method
   * that creates a scientific notation format.  In a pattern, the exponent
   * character immediately followed by one or more digit characters indicates
<span class="udiff-line-modified-removed">-  * scientific notation.  Example: &lt;code&gt;&quot;0.###E0&quot;&lt;/code&gt; formats the number</span>
<span class="udiff-line-modified-removed">-  * 1234 as &lt;code&gt;&quot;1.234E3&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  * scientific notation.  Example: {@code &quot;0.###E0&quot;} formats the number</span>
<span class="udiff-line-modified-added">+  * 1234 as {@code &quot;1.234E3&quot;}.</span>
   *
   * &lt;ul&gt;
   * &lt;li&gt;The number of digit characters after the exponent character gives the
   * minimum exponent digit count.  There is no maximum.  Negative exponents are
   * formatted using the localized minus sign, &lt;em&gt;not&lt;/em&gt; the prefix and suffix
<span class="udiff-line-modified-removed">-  * from the pattern.  This allows patterns such as &lt;code&gt;&quot;0.###E0 m/s&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  * from the pattern.  This allows patterns such as {@code &quot;0.###E0 m/s&quot;}.</span>
   *
   * &lt;li&gt;The minimum and maximum number of integer digits are interpreted
   * together:
   *
   * &lt;ul&gt;
   * &lt;li&gt;If the maximum number of integer digits is greater than their minimum number
   * and greater than 1, it forces the exponent to be a multiple of the maximum
   * number of integer digits, and the minimum number of integer digits to be
   * interpreted as 1.  The most common use of this is to generate
   * &lt;em&gt;engineering notation&lt;/em&gt;, in which the exponent is a multiple of three,
<span class="udiff-line-modified-removed">-  * e.g., &lt;code&gt;&quot;##0.#####E0&quot;&lt;/code&gt;. Using this pattern, the number 12345</span>
<span class="udiff-line-modified-removed">-  * formats to &lt;code&gt;&quot;12.345E3&quot;&lt;/code&gt;, and 123456 formats to</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&quot;123.456E3&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  * e.g., {@code &quot;##0.#####E0&quot;}. Using this pattern, the number 12345</span>
<span class="udiff-line-modified-added">+  * formats to {@code &quot;12.345E3&quot;}, and 123456 formats to</span>
<span class="udiff-line-modified-added">+  * {@code &quot;123.456E3&quot;}.</span>
   *
   * &lt;li&gt;Otherwise, the minimum number of integer digits is achieved by adjusting the
<span class="udiff-line-modified-removed">-  * exponent.  Example: 0.00123 formatted with &lt;code&gt;&quot;00.###E0&quot;&lt;/code&gt; yields</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&quot;12.3E-4&quot;&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+  * exponent.  Example: 0.00123 formatted with {@code &quot;00.###E0&quot;} yields</span>
<span class="udiff-line-modified-added">+  * {@code &quot;12.3E-4&quot;}.</span>
   * &lt;/ul&gt;
   *
   * &lt;li&gt;The number of significant digits in the mantissa is the sum of the
   * &lt;em&gt;minimum integer&lt;/em&gt; and &lt;em&gt;maximum fraction&lt;/em&gt; digits, and is
   * unaffected by the maximum integer digits.  For example, 12345 formatted with
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&quot;##0.##E0&quot;&lt;/code&gt; is &lt;code&gt;&quot;12.3E3&quot;&lt;/code&gt;. To show all digits, set</span>
<span class="udiff-line-modified-added">+  * {@code &quot;##0.##E0&quot;} is {@code &quot;12.3E3&quot;}. To show all digits, set</span>
   * the significant digits count to zero.  The number of significant digits
   * does not affect parsing.
   *
   * &lt;li&gt;Exponential patterns may not contain grouping separators.
   * &lt;/ul&gt;
   *
<span class="udiff-line-modified-removed">-  * &lt;h4&gt;Rounding&lt;/h4&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h3&gt;Rounding&lt;/h3&gt;</span>
   *
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormat&lt;/code&gt; provides rounding modes defined in</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormat} provides rounding modes defined in</span>
   * {@link java.math.RoundingMode} for formatting.  By default, it uses
   * {@link java.math.RoundingMode#HALF_EVEN RoundingMode.HALF_EVEN}.
   *
<span class="udiff-line-modified-removed">-  * &lt;h4&gt;Digits&lt;/h4&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h3&gt;Digits&lt;/h3&gt;</span>
   *
<span class="udiff-line-modified-removed">-  * For formatting, &lt;code&gt;DecimalFormat&lt;/code&gt; uses the ten consecutive</span>
<span class="udiff-line-modified-added">+  * For formatting, {@code DecimalFormat} uses the ten consecutive</span>
   * characters starting with the localized zero digit defined in the
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object as digits. For parsing, these</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormatSymbols} object as digits. For parsing, these</span>
   * digits as well as all Unicode decimal digits, as defined by
   * {@link Character#digit Character.digit}, are recognized.
   *
   * &lt;h4&gt;Special Values&lt;/h4&gt;
   *
<span class="udiff-line-modified-removed">-  * &lt;p&gt;&lt;code&gt;NaN&lt;/code&gt; is formatted as a string, which typically has a single character</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&amp;#92;uFFFD&lt;/code&gt;.  This string is determined by the</span>
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object.  This is the only value for which</span>
<span class="udiff-line-modified-added">+  * &lt;p&gt;{@code NaN} is formatted as a string, which typically has a single character</span>
<span class="udiff-line-modified-added">+  * {@code &amp;#92;uFFFD}.  This string is determined by the</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormatSymbols} object.  This is the only value for which</span>
   * the prefixes and suffixes are not used.
   *
   * &lt;p&gt;Infinity is formatted as a string, which typically has a single character
<span class="udiff-line-modified-removed">-  * &lt;code&gt;&amp;#92;u221E&lt;/code&gt;, with the positive or negative prefixes and suffixes</span>
<span class="udiff-line-modified-added">+  * {@code &amp;#92;u221E}, with the positive or negative prefixes and suffixes</span>
   * applied.  The infinity string is determined by the
<span class="udiff-line-modified-removed">-  * &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object.</span>
<span class="udiff-line-modified-added">+  * {@code DecimalFormatSymbols} object.</span>
   *
<span class="udiff-line-modified-removed">-  * &lt;p&gt;Negative zero (&lt;code&gt;&quot;-0&quot;&lt;/code&gt;) parses to</span>
<span class="udiff-line-modified-added">+  * &lt;p&gt;Negative zero ({@code &quot;-0&quot;}) parses to</span>
   * &lt;ul&gt;
<span class="udiff-line-modified-removed">-  * &lt;li&gt;&lt;code&gt;BigDecimal(0)&lt;/code&gt; if &lt;code&gt;isParseBigDecimal()&lt;/code&gt; is</span>
<span class="udiff-line-modified-added">+  * &lt;li&gt;{@code BigDecimal(0)} if {@code isParseBigDecimal()} is</span>
   * true,
<span class="udiff-line-modified-removed">-  * &lt;li&gt;&lt;code&gt;Long(0)&lt;/code&gt; if &lt;code&gt;isParseBigDecimal()&lt;/code&gt; is false</span>
<span class="udiff-line-modified-removed">-  *     and &lt;code&gt;isParseIntegerOnly()&lt;/code&gt; is true,</span>
<span class="udiff-line-modified-removed">-  * &lt;li&gt;&lt;code&gt;Double(-0.0)&lt;/code&gt; if both &lt;code&gt;isParseBigDecimal()&lt;/code&gt;</span>
<span class="udiff-line-modified-removed">-  * and &lt;code&gt;isParseIntegerOnly()&lt;/code&gt; are false.</span>
<span class="udiff-line-modified-added">+  * &lt;li&gt;{@code Long(0)} if {@code isParseBigDecimal()} is false</span>
<span class="udiff-line-modified-added">+  *     and {@code isParseIntegerOnly()} is true,</span>
<span class="udiff-line-modified-added">+  * &lt;li&gt;{@code Double(-0.0)} if both {@code isParseBigDecimal()}</span>
<span class="udiff-line-modified-added">+  * and {@code isParseIntegerOnly()} are false.</span>
   * &lt;/ul&gt;
   *
<span class="udiff-line-modified-removed">-  * &lt;h4&gt;&lt;a id=&quot;synchronization&quot;&gt;Synchronization&lt;/a&gt;&lt;/h4&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h3&gt;&lt;a id=&quot;synchronization&quot;&gt;Synchronization&lt;/a&gt;&lt;/h3&gt;</span>
   *
   * &lt;p&gt;
   * Decimal formats are generally not synchronized.
   * It is recommended to create separate format instances for each thread.
   * If multiple threads access a format concurrently, it must be synchronized
   * externally.
   *
<span class="udiff-line-modified-removed">-  * &lt;h4&gt;Example&lt;/h4&gt;</span>
<span class="udiff-line-modified-added">+  * &lt;h3&gt;Example&lt;/h3&gt;</span>
   *
   * &lt;blockquote&gt;&lt;pre&gt;{@code
   * &lt;strong&gt;// Print out a number using the localized number, integer, currency,
   * // and percent format for each locale&lt;/strong&gt;
   * Locale[] locales = NumberFormat.getAvailableLocales();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -423,12 +423,12 @@</span>
       * on NumberFormat such as getNumberInstance. These factories will
       * return the most appropriate sub-class of NumberFormat for a given
       * locale.
       *
       * @param pattern a non-localized pattern string.
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if &lt;code&gt;pattern&lt;/code&gt; is null</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the given pattern is invalid.</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if {@code pattern} is null</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the given pattern is invalid.</span>
       * @see java.text.NumberFormat#getInstance
       * @see java.text.NumberFormat#getNumberInstance
       * @see java.text.NumberFormat#getCurrencyInstance
       * @see java.text.NumberFormat#getPercentInstance
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -450,12 +450,12 @@</span>
       * to a standard format, you can modify the format returned by
       * a NumberFormat factory method.
       *
       * @param pattern a non-localized pattern string
       * @param symbols the set of symbols to be used
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if any of the given arguments is null</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the given pattern is invalid</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if any of the given arguments is null</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the given pattern is invalid</span>
       * @see java.text.NumberFormat#getInstance
       * @see java.text.NumberFormat#getNumberInstance
       * @see java.text.NumberFormat#getCurrencyInstance
       * @see java.text.NumberFormat#getPercentInstance
       * @see java.text.DecimalFormatSymbols
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -473,26 +473,26 @@</span>
       * buffer.
       * The number can be of any subclass of {@link java.lang.Number}.
       * &lt;p&gt;
       * This implementation uses the maximum precision permitted.
       * @param number     the number to format
<span class="udiff-line-modified-removed">-      * @param toAppendTo the &lt;code&gt;StringBuffer&lt;/code&gt; to which the formatted</span>
<span class="udiff-line-modified-added">+      * @param toAppendTo the {@code StringBuffer} to which the formatted</span>
       *                   text is to be appended
       * @param pos        keeps track on the position of the field within the
       *                   returned string. For example, for formatting a number
       *                   {@code 1234567.89} in {@code Locale.US} locale,
       *                   if the given {@code fieldPosition} is
       *                   {@link NumberFormat#INTEGER_FIELD}, the begin index
       *                   and end index of {@code fieldPosition} will be set
       *                   to 0 and 9, respectively for the output string
       *                   {@code 1,234,567.89}.
<span class="udiff-line-modified-removed">-      * @return           the value passed in as &lt;code&gt;toAppendTo&lt;/code&gt;</span>
<span class="udiff-line-modified-removed">-      * @exception        IllegalArgumentException if &lt;code&gt;number&lt;/code&gt; is</span>
<span class="udiff-line-modified-removed">-      *                   null or not an instance of &lt;code&gt;Number&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      * @exception        NullPointerException if &lt;code&gt;toAppendTo&lt;/code&gt; or</span>
<span class="udiff-line-modified-removed">-      *                   &lt;code&gt;pos&lt;/code&gt; is null</span>
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @return           the value passed in as {@code toAppendTo}</span>
<span class="udiff-line-modified-added">+      * @throws           IllegalArgumentException if {@code number} is</span>
<span class="udiff-line-modified-added">+      *                   null or not an instance of {@code Number}.</span>
<span class="udiff-line-modified-added">+      * @throws           NullPointerException if {@code toAppendTo} or</span>
<span class="udiff-line-modified-added">+      *                   {@code pos} is null</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @see              java.text.FieldPosition
       */
      @Override
      public final StringBuffer format(Object number,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -526,13 +526,13 @@</span>
       *                         locale, if the given {@code fieldPosition} is
       *                         {@link NumberFormat#INTEGER_FIELD}, the begin index
       *                         and end index of {@code fieldPosition} will be set
       *                         to 0 and 9, respectively for the output string
       *                         {@code 1,234,567.89}.
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if {@code result} or</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if {@code result} or</span>
       *            {@code fieldPosition} is {@code null}
<span class="udiff-line-modified-removed">-      * @exception ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws    ArithmeticException if rounding is needed with rounding</span>
       *            mode being set to RoundingMode.UNNECESSARY
       * @return The formatted number string
       * @see java.text.FieldPosition
       */
      @Override
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -563,11 +563,11 @@</span>
      /**
       * Formats a double to produce a string.
       * @param number    The double to format
       * @param result    where the text is to be appended
       * @param delegate notified of locations of sub fields
<span class="udiff-line-modified-removed">-      * @exception       ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws          ArithmeticException if rounding is needed with rounding</span>
       *                  mode being set to RoundingMode.UNNECESSARY
       * @return The formatted number string
       */
      StringBuffer format(double number, StringBuffer result,
                                  FieldDelegate delegate) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -696,13 +696,13 @@</span>
       *                         locale, if the given {@code fieldPosition} is
       *                         {@link NumberFormat#INTEGER_FIELD}, the begin index
       *                         and end index of {@code fieldPosition} will be set
       *                         to 0 and 11, respectively for the output string
       *                         {@code 123,456,789}.
<span class="udiff-line-modified-removed">-      * @exception       NullPointerException if {@code result} or</span>
<span class="udiff-line-modified-added">+      * @throws          NullPointerException if {@code result} or</span>
       *                  {@code fieldPosition} is {@code null}
<span class="udiff-line-modified-removed">-      * @exception       ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws          ArithmeticException if rounding is needed with rounding</span>
       *                  mode being set to RoundingMode.UNNECESSARY
       * @return The formatted number string
       * @see java.text.FieldPosition
       */
      @Override
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -718,11 +718,11 @@</span>
       * Format a long to produce a string.
       * @param number    The long to format
       * @param result    where the text is to be appended
       * @param delegate notified of locations of sub fields
       * @return The formatted number string
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @see java.text.FieldPosition
       */
      StringBuffer format(long number, StringBuffer result,
                                 FieldDelegate delegate) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -793,11 +793,11 @@</span>
       *                         {@link NumberFormat#INTEGER_FIELD}, the begin index
       *                         and end index of {@code fieldPosition} will be set
       *                         to 0 and 9, respectively for the output string
       *                         {@code 1,234,567.89}.
       * @return The formatted number string
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @see java.text.FieldPosition
       */
      private StringBuffer format(BigDecimal number, StringBuffer result,
                                  FieldPosition fieldPosition) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -809,11 +809,11 @@</span>
      /**
       * Formats a BigDecimal to produce a string.
       * @param number    The BigDecimal to format
       * @param result    where the text is to be appended
       * @param delegate notified of locations of sub fields
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @return The formatted number string
       */
      StringBuffer format(BigDecimal number, StringBuffer result,
                                  FieldDelegate delegate) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -852,11 +852,11 @@</span>
       *                         {@link NumberFormat#INTEGER_FIELD}, the begin index
       *                         and end index of {@code fieldPosition} will be set
       *                         to 0 and 11, respectively for the output string
       *                         {@code 123,456,789}.
       * @return The formatted number string
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @see java.text.FieldPosition
       */
      private StringBuffer format(BigInteger number, StringBuffer result,
                                 FieldPosition fieldPosition) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -870,11 +870,11 @@</span>
       * Format a BigInteger to produce a string.
       * @param number    The BigInteger to format
       * @param result    where the text is to be appended
       * @param delegate notified of locations of sub fields
       * @return The formatted number string
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @see java.text.FieldPosition
       */
      StringBuffer format(BigInteger number, StringBuffer result,
                                 FieldDelegate delegate, boolean formatLong) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -912,23 +912,23 @@</span>
                  maxIntDigits, minIntDigits, maxFraDigits, minFraDigits);
          }
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Formats an Object producing an &lt;code&gt;AttributedCharacterIterator&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      * You can use the returned &lt;code&gt;AttributedCharacterIterator&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * Formats an Object producing an {@code AttributedCharacterIterator}.</span>
<span class="udiff-line-modified-added">+      * You can use the returned {@code AttributedCharacterIterator}</span>
       * to build the resulting String, as well as to determine information
       * about the resulting String.
       * &lt;p&gt;
       * Each attribute key of the AttributedCharacterIterator will be of type
<span class="udiff-line-modified-removed">-      * &lt;code&gt;NumberFormat.Field&lt;/code&gt;, with the attribute value being the</span>
<span class="udiff-line-modified-added">+      * {@code NumberFormat.Field}, with the attribute value being the</span>
       * same as the attribute key.
       *
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if obj is null.</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException when the Format cannot format the</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if obj is null.</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException when the Format cannot format the</span>
       *            given object.
<span class="udiff-line-modified-removed">-      * @exception        ArithmeticException if rounding is needed with rounding</span>
<span class="udiff-line-modified-added">+      * @throws           ArithmeticException if rounding is needed with rounding</span>
       *                   mode being set to RoundingMode.UNNECESSARY
       * @param obj The object to format
       * @return AttributedCharacterIterator describing the formatted value.
       * @since 1.4
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1101,11 +1101,13 @@</span>
              }
  
              // Sets up the locale specific constants used when formatting.
              // &#39;0&#39; is our default representation of zero.
              fastPathData.zeroDelta = symbols.getZeroDigit() - &#39;0&#39;;
<span class="udiff-line-modified-removed">-             fastPathData.groupingChar = symbols.getGroupingSeparator();</span>
<span class="udiff-line-modified-added">+             fastPathData.groupingChar = isCurrencyFormat ?</span>
<span class="udiff-line-added">+                     symbols.getMonetaryGroupingSeparator() :</span>
<span class="udiff-line-added">+                     symbols.getGroupingSeparator();</span>
  
              // Sets up fractional constants related to currency/decimal pattern.
              fastPathData.fractionalMaxIntBound = (isCurrencyFormat)
                      ? 99 : 999;
              fastPathData.fractionalScaleFactor = (isCurrencyFormat)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1772,11 +1774,13 @@</span>
      void subformatNumber(StringBuffer result, FieldDelegate delegate,
              boolean isNegative, boolean isInteger,
              int maxIntDigits, int minIntDigits,
              int maxFraDigits, int minFraDigits) {
  
<span class="udiff-line-modified-removed">-         char grouping = symbols.getGroupingSeparator();</span>
<span class="udiff-line-modified-added">+         char grouping = isCurrencyFormat ?</span>
<span class="udiff-line-added">+                 symbols.getMonetaryGroupingSeparator() :</span>
<span class="udiff-line-added">+                 symbols.getGroupingSeparator();</span>
          char zero = symbols.getZeroDigit();
          int zeroDelta = zero - &#39;0&#39;; // &#39;0&#39; is the DigitList representation of zero
  
          char decimal = isCurrencyFormat ?
                  symbols.getMonetaryDecimalSeparator() :
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1914,11 +1918,11 @@</span>
  
              boolean negativeExponent = exponent &lt; 0;
              if (negativeExponent) {
                  exponent = -exponent;
                  fieldStart = result.length();
<span class="udiff-line-modified-removed">-                 result.append(symbols.getMinusSign());</span>
<span class="udiff-line-modified-added">+                 result.append(symbols.getMinusSignText());</span>
                  delegate.formatted(Field.EXPONENT_SIGN, Field.EXPONENT_SIGN,
                          fieldStart, result.length(), result);
              }
              digitList.set(negativeExponent, exponent);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2040,21 +2044,21 @@</span>
                      fFieldStart, result.length(), result);
          }
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Appends the String &lt;code&gt;string&lt;/code&gt; to &lt;code&gt;result&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;delegate&lt;/code&gt; is notified of all  the</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;FieldPosition&lt;/code&gt;s in &lt;code&gt;positions&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * Appends the String {@code string} to {@code result}.</span>
<span class="udiff-line-modified-added">+      * {@code delegate} is notified of all  the</span>
<span class="udiff-line-modified-added">+      * {@code FieldPosition}s in {@code positions}.</span>
       * &lt;p&gt;
<span class="udiff-line-modified-removed">-      * If one of the &lt;code&gt;FieldPosition&lt;/code&gt;s in &lt;code&gt;positions&lt;/code&gt;</span>
<span class="udiff-line-modified-removed">-      * identifies a &lt;code&gt;SIGN&lt;/code&gt; attribute, it is mapped to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;signAttribute&lt;/code&gt;. This is used</span>
<span class="udiff-line-modified-removed">-      * to map the &lt;code&gt;SIGN&lt;/code&gt; attribute to the &lt;code&gt;EXPONENT&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * If one of the {@code FieldPosition}s in {@code positions}</span>
<span class="udiff-line-modified-added">+      * identifies a {@code SIGN} attribute, it is mapped to</span>
<span class="udiff-line-modified-added">+      * {@code signAttribute}. This is used</span>
<span class="udiff-line-modified-added">+      * to map the {@code SIGN} attribute to the {@code EXPONENT}</span>
       * attribute as necessary.
       * &lt;p&gt;
<span class="udiff-line-modified-removed">-      * This is used by &lt;code&gt;subformat&lt;/code&gt; to add the prefix/suffix.</span>
<span class="udiff-line-modified-added">+      * This is used by {@code subformat} to add the prefix/suffix.</span>
       */
      private void append(StringBuffer result, String string,
                          FieldDelegate delegate,
                          FieldPosition[] positions,
                          Format.Field signAttribute) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2076,64 +2080,64 @@</span>
              }
          }
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Parses text from a string to produce a &lt;code&gt;Number&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * Parses text from a string to produce a {@code Number}.</span>
       * &lt;p&gt;
       * The method attempts to parse text starting at the index given by
<span class="udiff-line-modified-removed">-      * &lt;code&gt;pos&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      * If parsing succeeds, then the index of &lt;code&gt;pos&lt;/code&gt; is updated</span>
<span class="udiff-line-modified-added">+      * {@code pos}.</span>
<span class="udiff-line-modified-added">+      * If parsing succeeds, then the index of {@code pos} is updated</span>
       * to the index after the last character used (parsing does not necessarily
       * use all characters up to the end of the string), and the parsed
<span class="udiff-line-modified-removed">-      * number is returned. The updated &lt;code&gt;pos&lt;/code&gt; can be used to</span>
<span class="udiff-line-modified-added">+      * number is returned. The updated {@code pos} can be used to</span>
       * indicate the starting point for the next call to this method.
<span class="udiff-line-modified-removed">-      * If an error occurs, then the index of &lt;code&gt;pos&lt;/code&gt; is not</span>
<span class="udiff-line-modified-removed">-      * changed, the error index of &lt;code&gt;pos&lt;/code&gt; is set to the index of</span>
<span class="udiff-line-modified-added">+      * If an error occurs, then the index of {@code pos} is not</span>
<span class="udiff-line-modified-added">+      * changed, the error index of {@code pos} is set to the index of</span>
       * the character where the error occurred, and null is returned.
       * &lt;p&gt;
       * The subclass returned depends on the value of {@link #isParseBigDecimal}
       * as well as on the string being parsed.
       * &lt;ul&gt;
<span class="udiff-line-modified-removed">-      *   &lt;li&gt;If &lt;code&gt;isParseBigDecimal()&lt;/code&gt; is false (the default),</span>
<span class="udiff-line-modified-removed">-      *       most integer values are returned as &lt;code&gt;Long&lt;/code&gt;</span>
<span class="udiff-line-modified-removed">-      *       objects, no matter how they are written: &lt;code&gt;&quot;17&quot;&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      *       &lt;code&gt;&quot;17.000&quot;&lt;/code&gt; both parse to &lt;code&gt;Long(17)&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      *       Values that cannot fit into a &lt;code&gt;Long&lt;/code&gt; are returned as</span>
<span class="udiff-line-modified-removed">-      *       &lt;code&gt;Double&lt;/code&gt;s. This includes values with a fractional part,</span>
<span class="udiff-line-modified-removed">-      *       infinite values, &lt;code&gt;NaN&lt;/code&gt;, and the value -0.0.</span>
<span class="udiff-line-modified-removed">-      *       &lt;code&gt;DecimalFormat&lt;/code&gt; does &lt;em&gt;not&lt;/em&gt; decide whether to</span>
<span class="udiff-line-modified-removed">-      *       return a &lt;code&gt;Double&lt;/code&gt; or a &lt;code&gt;Long&lt;/code&gt; based on the</span>
<span class="udiff-line-modified-added">+      *   &lt;li&gt;If {@code isParseBigDecimal()} is false (the default),</span>
<span class="udiff-line-modified-added">+      *       most integer values are returned as {@code Long}</span>
<span class="udiff-line-modified-added">+      *       objects, no matter how they are written: {@code &quot;17&quot;} and</span>
<span class="udiff-line-modified-added">+      *       {@code &quot;17.000&quot;} both parse to {@code Long(17)}.</span>
<span class="udiff-line-modified-added">+      *       Values that cannot fit into a {@code Long} are returned as</span>
<span class="udiff-line-modified-added">+      *       {@code Double}s. This includes values with a fractional part,</span>
<span class="udiff-line-modified-added">+      *       infinite values, {@code NaN}, and the value -0.0.</span>
<span class="udiff-line-modified-added">+      *       {@code DecimalFormat} does &lt;em&gt;not&lt;/em&gt; decide whether to</span>
<span class="udiff-line-modified-added">+      *       return a {@code Double} or a {@code Long} based on the</span>
       *       presence of a decimal separator in the source string. Doing so
       *       would prevent integers that overflow the mantissa of a double,
<span class="udiff-line-modified-removed">-      *       such as &lt;code&gt;&quot;-9,223,372,036,854,775,808.00&quot;&lt;/code&gt;, from being</span>
<span class="udiff-line-modified-added">+      *       such as {@code &quot;-9,223,372,036,854,775,808.00&quot;}, from being</span>
       *       parsed accurately.
       *       &lt;p&gt;
<span class="udiff-line-modified-removed">-      *       Callers may use the &lt;code&gt;Number&lt;/code&gt; methods</span>
<span class="udiff-line-modified-removed">-      *       &lt;code&gt;doubleValue&lt;/code&gt;, &lt;code&gt;longValue&lt;/code&gt;, etc., to obtain</span>
<span class="udiff-line-modified-added">+      *       Callers may use the {@code Number} methods</span>
<span class="udiff-line-modified-added">+      *       {@code doubleValue}, {@code longValue}, etc., to obtain</span>
       *       the type they want.
<span class="udiff-line-modified-removed">-      *   &lt;li&gt;If &lt;code&gt;isParseBigDecimal()&lt;/code&gt; is true, values are returned</span>
<span class="udiff-line-modified-removed">-      *       as &lt;code&gt;BigDecimal&lt;/code&gt; objects. The values are the ones</span>
<span class="udiff-line-modified-added">+      *   &lt;li&gt;If {@code isParseBigDecimal()} is true, values are returned</span>
<span class="udiff-line-modified-added">+      *       as {@code BigDecimal} objects. The values are the ones</span>
       *       constructed by {@link java.math.BigDecimal#BigDecimal(String)}
       *       for corresponding strings in locale-independent format. The
       *       special cases negative and positive infinity and NaN are returned
<span class="udiff-line-modified-removed">-      *       as &lt;code&gt;Double&lt;/code&gt; instances holding the values of the</span>
<span class="udiff-line-modified-removed">-      *       corresponding &lt;code&gt;Double&lt;/code&gt; constants.</span>
<span class="udiff-line-modified-added">+      *       as {@code Double} instances holding the values of the</span>
<span class="udiff-line-modified-added">+      *       corresponding {@code Double} constants.</span>
       * &lt;/ul&gt;
       * &lt;p&gt;
<span class="udiff-line-modified-removed">-      * &lt;code&gt;DecimalFormat&lt;/code&gt; parses all Unicode characters that represent</span>
<span class="udiff-line-modified-removed">-      * decimal digits, as defined by &lt;code&gt;Character.digit()&lt;/code&gt;. In</span>
<span class="udiff-line-modified-removed">-      * addition, &lt;code&gt;DecimalFormat&lt;/code&gt; also recognizes as digits the ten</span>
<span class="udiff-line-modified-added">+      * {@code DecimalFormat} parses all Unicode characters that represent</span>
<span class="udiff-line-modified-added">+      * decimal digits, as defined by {@code Character.digit()}. In</span>
<span class="udiff-line-modified-added">+      * addition, {@code DecimalFormat} also recognizes as digits the ten</span>
       * consecutive characters starting with the localized zero digit defined in
<span class="udiff-line-modified-removed">-      * the &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object.</span>
<span class="udiff-line-modified-added">+      * the {@code DecimalFormatSymbols} object.</span>
       *
       * @param text the string to be parsed
<span class="udiff-line-modified-removed">-      * @param pos  A &lt;code&gt;ParsePosition&lt;/code&gt; object with index and error</span>
<span class="udiff-line-modified-added">+      * @param pos  A {@code ParsePosition} object with index and error</span>
       *             index information as described above.
<span class="udiff-line-modified-removed">-      * @return     the parsed value, or &lt;code&gt;null&lt;/code&gt; if the parse fails</span>
<span class="udiff-line-modified-removed">-      * @exception  NullPointerException if &lt;code&gt;text&lt;/code&gt; or</span>
<span class="udiff-line-modified-removed">-      *             &lt;code&gt;pos&lt;/code&gt; is null.</span>
<span class="udiff-line-modified-added">+      * @return     the parsed value, or {@code null} if the parse fails</span>
<span class="udiff-line-modified-added">+      * @throws     NullPointerException if {@code text} or</span>
<span class="udiff-line-modified-added">+      *             {@code pos} is null.</span>
       */
      @Override
      public Number parse(String text, ParsePosition pos) {
          // special case NaN
          if (text.regionMatches(pos.index, symbols.getNaN(), 0, symbols.getNaN().length())) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2391,11 +2395,13 @@</span>
              digits.decimalAt = digits.count = 0;
              char zero = symbols.getZeroDigit();
              char decimal = isCurrencyFormat ?
                      symbols.getMonetaryDecimalSeparator() :
                      symbols.getDecimalSeparator();
<span class="udiff-line-modified-removed">-             char grouping = symbols.getGroupingSeparator();</span>
<span class="udiff-line-modified-added">+             char grouping = isCurrencyFormat ?</span>
<span class="udiff-line-added">+                     symbols.getMonetaryGroupingSeparator() :</span>
<span class="udiff-line-added">+                     symbols.getGroupingSeparator();</span>
              String exponentString = symbols.getExponentSeparator();
              boolean sawDecimal = false;
              boolean sawExponent = false;
              boolean sawDigit = false;
              int exponent = 0; // Set to the exponent value, if any
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2473,11 +2479,11 @@</span>
                      // Process the exponent by recursively calling this method.
                      ParsePosition pos = new ParsePosition(position + exponentString.length());
                      boolean[] stat = new boolean[STATUS_LENGTH];
                      DigitList exponentDigits = new DigitList();
  
<span class="udiff-line-modified-removed">-                     if (subparse(text, pos, &quot;&quot;, Character.toString(symbols.getMinusSign()), exponentDigits, true, stat) &amp;&amp;</span>
<span class="udiff-line-modified-added">+                     if (subparse(text, pos, &quot;&quot;, symbols.getMinusSignText(), exponentDigits, true, stat) &amp;&amp;</span>
                              exponentDigits.fitsIntoLong(stat[STATUS_POSITIVE], true)) {
                          position = pos.index; // Advance past the exponent
                          exponent = (int)exponentDigits.getLong();
                          if (!stat[STATUS_POSITIVE]) {
                              exponent = -exponent;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2571,11 +2577,11 @@</span>
      }
  
      /**
       * Returns the FieldPositions of the fields in the prefix used for
       * positive numbers. This is not used if the user has explicitly set
<span class="udiff-line-modified-removed">-      * a positive prefix via &lt;code&gt;setPositivePrefix&lt;/code&gt;. This is</span>
<span class="udiff-line-modified-added">+      * a positive prefix via {@code setPositivePrefix}. This is</span>
       * lazily created.
       *
       * @return FieldPositions in positive prefix
       */
      private FieldPosition[] getPositivePrefixFieldPositions() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2612,11 +2618,11 @@</span>
      }
  
      /**
       * Returns the FieldPositions of the fields in the prefix used for
       * negative numbers. This is not used if the user has explicitly set
<span class="udiff-line-modified-removed">-      * a negative prefix via &lt;code&gt;setNegativePrefix&lt;/code&gt;. This is</span>
<span class="udiff-line-modified-added">+      * a negative prefix via {@code setNegativePrefix}. This is</span>
       * lazily created.
       *
       * @return FieldPositions in positive prefix
       */
      private FieldPosition[] getNegativePrefixFieldPositions() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2653,11 +2659,11 @@</span>
      }
  
      /**
       * Returns the FieldPositions of the fields in the suffix used for
       * positive numbers. This is not used if the user has explicitly set
<span class="udiff-line-modified-removed">-      * a positive suffix via &lt;code&gt;setPositiveSuffix&lt;/code&gt;. This is</span>
<span class="udiff-line-modified-added">+      * a positive suffix via {@code setPositiveSuffix}. This is</span>
       * lazily created.
       *
       * @return FieldPositions in positive prefix
       */
      private FieldPosition[] getPositiveSuffixFieldPositions() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2694,11 +2700,11 @@</span>
      }
  
      /**
       * Returns the FieldPositions of the fields in the suffix used for
       * negative numbers. This is not used if the user has explicitly set
<span class="udiff-line-modified-removed">-      * a negative suffix via &lt;code&gt;setNegativeSuffix&lt;/code&gt;. This is</span>
<span class="udiff-line-modified-added">+      * a negative suffix via {@code setNegativeSuffix}. This is</span>
       * lazily created.
       *
       * @return FieldPositions in positive prefix
       */
      private FieldPosition[] getNegativeSuffixFieldPositions() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2754,11 +2760,14 @@</span>
      }
  
      /**
       * Return the grouping size. Grouping size is the number of digits between
       * grouping separators in the integer portion of a number.  For example,
<span class="udiff-line-modified-removed">-      * in the number &quot;123,456.78&quot;, the grouping size is 3.</span>
<span class="udiff-line-modified-added">+      * in the number &quot;123,456.78&quot;, the grouping size is 3. Grouping size of</span>
<span class="udiff-line-added">+      * zero designates that grouping is not used, which provides the same</span>
<span class="udiff-line-added">+      * formatting as if calling {@link #setGroupingUsed(boolean)</span>
<span class="udiff-line-added">+      * setGroupingUsed(false)}.</span>
       *
       * @return the grouping size
       * @see #setGroupingSize
       * @see java.text.NumberFormat#isGroupingUsed
       * @see java.text.DecimalFormatSymbols#getGroupingSeparator
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2768,20 +2777,32 @@</span>
      }
  
      /**
       * Set the grouping size. Grouping size is the number of digits between
       * grouping separators in the integer portion of a number.  For example,
<span class="udiff-line-modified-removed">-      * in the number &quot;123,456.78&quot;, the grouping size is 3.</span>
<span class="udiff-line-modified-removed">-      * &lt;br&gt;</span>
<span class="udiff-line-modified-added">+      * in the number &quot;123,456.78&quot;, the grouping size is 3. Grouping size of</span>
<span class="udiff-line-modified-added">+      * zero designates that grouping is not used, which provides the same</span>
<span class="udiff-line-added">+      * formatting as if calling {@link #setGroupingUsed(boolean)</span>
<span class="udiff-line-added">+      * setGroupingUsed(false)}.</span>
<span class="udiff-line-added">+      * &lt;p&gt;</span>
       * The value passed in is converted to a byte, which may lose information.
<span class="udiff-line-added">+      * Values that are negative or greater than</span>
<span class="udiff-line-added">+      * {@link java.lang.Byte#MAX_VALUE Byte.MAX_VALUE}, will throw an</span>
<span class="udiff-line-added">+      * {@code IllegalArgumentException}.</span>
       *
       * @param newValue the new grouping size
       * @see #getGroupingSize
       * @see java.text.NumberFormat#setGroupingUsed
       * @see java.text.DecimalFormatSymbols#setGroupingSeparator
<span class="udiff-line-added">+      * @throws IllegalArgumentException if {@code newValue} is negative or</span>
<span class="udiff-line-added">+      *          greater than {@link java.lang.Byte#MAX_VALUE Byte.MAX_VALUE}</span>
       */
      public void setGroupingSize (int newValue) {
<span class="udiff-line-added">+         if (newValue &lt; 0 || newValue &gt; Byte.MAX_VALUE) {</span>
<span class="udiff-line-added">+             throw new IllegalArgumentException(</span>
<span class="udiff-line-added">+                 &quot;newValue is out of valid range. value: &quot; + newValue);</span>
<span class="udiff-line-added">+         }</span>
          groupingSize = (byte)newValue;
          fastPathCheckNeeded = true;
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2809,11 +2830,11 @@</span>
          fastPathCheckNeeded = true;
      }
  
      /**
       * Returns whether the {@link #parse(java.lang.String, java.text.ParsePosition)}
<span class="udiff-line-modified-removed">-      * method returns &lt;code&gt;BigDecimal&lt;/code&gt;. The default value is false.</span>
<span class="udiff-line-modified-added">+      * method returns {@code BigDecimal}. The default value is false.</span>
       *
       * @return {@code true} if the parse method returns BigDecimal;
       *         {@code false} otherwise
       * @see #setParseBigDecimal
       * @since 1.5
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2822,11 +2843,11 @@</span>
          return parseBigDecimal;
      }
  
      /**
       * Sets whether the {@link #parse(java.lang.String, java.text.ParsePosition)}
<span class="udiff-line-modified-removed">-      * method returns &lt;code&gt;BigDecimal&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * method returns {@code BigDecimal}.</span>
       *
       * @param newValue {@code true} if the parse method returns BigDecimal;
       *                 {@code false} otherwise
       * @see #isParseBigDecimal
       * @since 1.5
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2989,18 +3010,18 @@</span>
                      } else {
                          buffer.append(symbols.getCurrencySymbol());
                      }
                      continue;
                  case PATTERN_PERCENT:
<span class="udiff-line-modified-removed">-                     c = symbols.getPercent();</span>
<span class="udiff-line-modified-removed">-                     break;</span>
<span class="udiff-line-modified-added">+                     buffer.append(symbols.getPercentText());</span>
<span class="udiff-line-modified-added">+                     continue;</span>
                  case PATTERN_PER_MILLE:
<span class="udiff-line-modified-removed">-                     c = symbols.getPerMill();</span>
<span class="udiff-line-modified-removed">-                     break;</span>
<span class="udiff-line-modified-added">+                     buffer.append(symbols.getPerMillText());</span>
<span class="udiff-line-modified-added">+                     continue;</span>
                  case PATTERN_MINUS:
<span class="udiff-line-modified-removed">-                     c = symbols.getMinusSign();</span>
<span class="udiff-line-modified-removed">-                     break;</span>
<span class="udiff-line-modified-added">+                     buffer.append(symbols.getMinusSignText());</span>
<span class="udiff-line-modified-added">+                     continue;</span>
                  }
              }
              buffer.append(c);
          }
          return buffer.toString();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3025,58 +3046,48 @@</span>
          ArrayList&lt;FieldPosition&gt; positions = null;
          int stringIndex = 0;
          for (int i=0; i&lt;pattern.length(); ) {
              char c = pattern.charAt(i++);
              if (c == QUOTE) {
<span class="udiff-line-removed">-                 int field = -1;</span>
                  Format.Field fieldID = null;
<span class="udiff-line-added">+                 String string = null;</span>
                  c = pattern.charAt(i++);
                  switch (c) {
                  case CURRENCY_SIGN:
<span class="udiff-line-removed">-                     String string;</span>
                      if (i&lt;pattern.length() &amp;&amp;
                          pattern.charAt(i) == CURRENCY_SIGN) {
                          ++i;
                          string = symbols.getInternationalCurrencySymbol();
                      } else {
                          string = symbols.getCurrencySymbol();
                      }
<span class="udiff-line-modified-removed">-                     if (!string.isEmpty()) {</span>
<span class="udiff-line-modified-removed">-                         if (positions == null) {</span>
<span class="udiff-line-removed">-                             positions = new ArrayList&lt;&gt;(2);</span>
<span class="udiff-line-removed">-                         }</span>
<span class="udiff-line-removed">-                         FieldPosition fp = new FieldPosition(Field.CURRENCY);</span>
<span class="udiff-line-removed">-                         fp.setBeginIndex(stringIndex);</span>
<span class="udiff-line-removed">-                         fp.setEndIndex(stringIndex + string.length());</span>
<span class="udiff-line-removed">-                         positions.add(fp);</span>
<span class="udiff-line-removed">-                         stringIndex += string.length();</span>
<span class="udiff-line-removed">-                     }</span>
<span class="udiff-line-removed">-                     continue;</span>
<span class="udiff-line-modified-added">+                     fieldID = Field.CURRENCY;</span>
<span class="udiff-line-modified-added">+                     break;</span>
                  case PATTERN_PERCENT:
<span class="udiff-line-modified-removed">-                     c = symbols.getPercent();</span>
<span class="udiff-line-removed">-                     field = -1;</span>
<span class="udiff-line-modified-added">+                     string = symbols.getPercentText();</span>
                      fieldID = Field.PERCENT;
                      break;
                  case PATTERN_PER_MILLE:
<span class="udiff-line-modified-removed">-                     c = symbols.getPerMill();</span>
<span class="udiff-line-removed">-                     field = -1;</span>
<span class="udiff-line-modified-added">+                     string = symbols.getPerMillText();</span>
                      fieldID = Field.PERMILLE;
                      break;
                  case PATTERN_MINUS:
<span class="udiff-line-modified-removed">-                     c = symbols.getMinusSign();</span>
<span class="udiff-line-removed">-                     field = -1;</span>
<span class="udiff-line-modified-added">+                     string = symbols.getMinusSignText();</span>
                      fieldID = Field.SIGN;
                      break;
                  }
<span class="udiff-line-modified-removed">-                 if (fieldID != null) {</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+                 if (fieldID != null &amp;&amp; !string.isEmpty()) {</span>
                      if (positions == null) {
                          positions = new ArrayList&lt;&gt;(2);
                      }
<span class="udiff-line-modified-removed">-                     FieldPosition fp = new FieldPosition(fieldID, field);</span>
<span class="udiff-line-modified-added">+                     FieldPosition fp = new FieldPosition(fieldID);</span>
                      fp.setBeginIndex(stringIndex);
<span class="udiff-line-modified-removed">-                     fp.setEndIndex(stringIndex + 1);</span>
<span class="udiff-line-modified-added">+                     fp.setEndIndex(stringIndex + string.length());</span>
                      positions.add(fp);
<span class="udiff-line-added">+                     stringIndex += string.length();</span>
<span class="udiff-line-added">+                     continue;</span>
                  }
              }
              stringIndex++;
          }
          if (positions != null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3127,18 +3138,18 @@</span>
                      buffer.append(c);
                      // Fall through and append another CURRENCY_SIGN below
                  } else if (localized) {
                      switch (c) {
                      case PATTERN_PERCENT:
<span class="udiff-line-modified-removed">-                         c = symbols.getPercent();</span>
<span class="udiff-line-modified-removed">-                         break;</span>
<span class="udiff-line-modified-added">+                         buffer.append(symbols.getPercentText());</span>
<span class="udiff-line-modified-added">+                         continue;</span>
                      case PATTERN_PER_MILLE:
<span class="udiff-line-modified-removed">-                         c = symbols.getPerMill();</span>
<span class="udiff-line-modified-removed">-                         break;</span>
<span class="udiff-line-modified-added">+                         buffer.append(symbols.getPerMillText());</span>
<span class="udiff-line-modified-added">+                         continue;</span>
                      case PATTERN_MINUS:
<span class="udiff-line-modified-removed">-                         c = symbols.getMinusSign();</span>
<span class="udiff-line-modified-removed">-                         break;</span>
<span class="udiff-line-modified-added">+                         buffer.append(symbols.getMinusSignText());</span>
<span class="udiff-line-modified-added">+                         continue;</span>
                      }
                  }
                  buffer.append(c);
              }
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3153,15 +3164,15 @@</span>
          boolean needQuote;
          if (localized) {
              needQuote = affix.indexOf(symbols.getZeroDigit()) &gt;= 0
                  || affix.indexOf(symbols.getGroupingSeparator()) &gt;= 0
                  || affix.indexOf(symbols.getDecimalSeparator()) &gt;= 0
<span class="udiff-line-modified-removed">-                 || affix.indexOf(symbols.getPercent()) &gt;= 0</span>
<span class="udiff-line-modified-removed">-                 || affix.indexOf(symbols.getPerMill()) &gt;= 0</span>
<span class="udiff-line-modified-added">+                 || affix.indexOf(symbols.getPercentText()) &gt;= 0</span>
<span class="udiff-line-modified-added">+                 || affix.indexOf(symbols.getPerMillText()) &gt;= 0</span>
                  || affix.indexOf(symbols.getDigit()) &gt;= 0
                  || affix.indexOf(symbols.getPatternSeparator()) &gt;= 0
<span class="udiff-line-modified-removed">-                 || affix.indexOf(symbols.getMinusSign()) &gt;= 0</span>
<span class="udiff-line-modified-added">+                 || affix.indexOf(symbols.getMinusSignText()) &gt;= 0</span>
                  || affix.indexOf(CURRENCY_SIGN) &gt;= 0;
          } else {
              needQuote = affix.indexOf(PATTERN_ZERO_DIGIT) &gt;= 0
                  || affix.indexOf(PATTERN_GROUPING_SEPARATOR) &gt;= 0
                  || affix.indexOf(PATTERN_DECIMAL_SEPARATOR) &gt;= 0
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3233,11 +3244,11 @@</span>
                      || (negSuffixPattern != null &amp;&amp;
                          negSuffixPattern.equals(posSuffixPattern))) {
                      if ((negPrefixPattern != null &amp;&amp; posPrefixPattern != null &amp;&amp;
                           negPrefixPattern.equals(&quot;&#39;-&quot; + posPrefixPattern)) ||
                          (negPrefixPattern == posPrefixPattern &amp;&amp; // n == p == null
<span class="udiff-line-modified-removed">-                          negativePrefix.equals(symbols.getMinusSign() + positivePrefix)))</span>
<span class="udiff-line-modified-added">+                          negativePrefix.equals(symbols.getMinusSignText() + positivePrefix)))</span>
                          break;
                  }
                  result.append(localized ? symbols.getPatternSeparator() :
                                PATTERN_SEPARATOR);
              } else appendAffix(result, negSuffixPattern, negativeSuffix, localized);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3253,21 +3264,21 @@</span>
       * &lt;p&gt;
       * There is no limit to integer digits set
       * by this routine, since that is the typical end-user desire;
       * use setMaximumInteger if you want to set a real value.
       * For negative numbers, use a second pattern, separated by a semicolon
<span class="udiff-line-modified-removed">-      * &lt;P&gt;Example &lt;code&gt;&quot;#,#00.0#&quot;&lt;/code&gt; &amp;rarr; 1,234.56</span>
<span class="udiff-line-modified-added">+      * &lt;P&gt;Example {@code &quot;#,#00.0#&quot;} &amp;rarr; 1,234.56</span>
       * &lt;P&gt;This means a minimum of 2 integer digits, 1 fraction digit, and
       * a maximum of 2 fraction digits.
<span class="udiff-line-modified-removed">-      * &lt;p&gt;Example: &lt;code&gt;&quot;#,#00.0#;(#,#00.0#)&quot;&lt;/code&gt; for negatives in</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt;Example: {@code &quot;#,#00.0#;(#,#00.0#)&quot;} for negatives in</span>
       * parentheses.
       * &lt;p&gt;In negative patterns, the minimum and maximum counts are ignored;
       * these are presumed to be set in the positive pattern.
       *
       * @param pattern a new pattern
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if &lt;code&gt;pattern&lt;/code&gt; is null</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the given pattern is invalid.</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if {@code pattern} is null</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the given pattern is invalid.</span>
       */
      public void applyPattern(String pattern) {
          applyPattern(pattern, false);
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3280,21 +3291,21 @@</span>
       * &lt;p&gt;
       * There is no limit to integer digits set
       * by this routine, since that is the typical end-user desire;
       * use setMaximumInteger if you want to set a real value.
       * For negative numbers, use a second pattern, separated by a semicolon
<span class="udiff-line-modified-removed">-      * &lt;P&gt;Example &lt;code&gt;&quot;#,#00.0#&quot;&lt;/code&gt; &amp;rarr; 1,234.56</span>
<span class="udiff-line-modified-added">+      * &lt;P&gt;Example {@code &quot;#,#00.0#&quot;} &amp;rarr; 1,234.56</span>
       * &lt;P&gt;This means a minimum of 2 integer digits, 1 fraction digit, and
       * a maximum of 2 fraction digits.
<span class="udiff-line-modified-removed">-      * &lt;p&gt;Example: &lt;code&gt;&quot;#,#00.0#;(#,#00.0#)&quot;&lt;/code&gt; for negatives in</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt;Example: {@code &quot;#,#00.0#;(#,#00.0#)&quot;} for negatives in</span>
       * parentheses.
       * &lt;p&gt;In negative patterns, the minimum and maximum counts are ignored;
       * these are presumed to be set in the positive pattern.
       *
       * @param pattern a new pattern
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if &lt;code&gt;pattern&lt;/code&gt; is null</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the given pattern is invalid.</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if {@code pattern} is null</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the given pattern is invalid.</span>
       */
      public void applyLocalizedPattern(String pattern) {
          applyPattern(pattern, true);
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3307,11 +3318,11 @@</span>
          char decimalSeparator  = PATTERN_DECIMAL_SEPARATOR;
          char percent           = PATTERN_PERCENT;
          char perMill           = PATTERN_PER_MILLE;
          char digit             = PATTERN_DIGIT;
          char separator         = PATTERN_SEPARATOR;
<span class="udiff-line-modified-removed">-         String exponent          = PATTERN_EXPONENT;</span>
<span class="udiff-line-modified-added">+         String exponent        = PATTERN_EXPONENT;</span>
          char minus             = PATTERN_MINUS;
          if (localized) {
              zeroDigit         = symbols.getZeroDigit();
              groupingSeparator = symbols.getGroupingSeparator();
              decimalSeparator  = symbols.getDecimalSeparator();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3633,12 +3644,12 @@</span>
      }
  
      /**
       * Sets the maximum number of digits allowed in the integer portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of &lt;code&gt;newValue&lt;/code&gt; and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of {@code newValue} and</span>
       * 309 is used. Negative input values are replaced with 0.
       * @see NumberFormat#setMaximumIntegerDigits
       */
      @Override
      public void setMaximumIntegerDigits(int newValue) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3654,12 +3665,12 @@</span>
      }
  
      /**
       * Sets the minimum number of digits allowed in the integer portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of &lt;code&gt;newValue&lt;/code&gt; and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of {@code newValue} and</span>
       * 309 is used. Negative input values are replaced with 0.
       * @see NumberFormat#setMinimumIntegerDigits
       */
      @Override
      public void setMinimumIntegerDigits(int newValue) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3675,12 +3686,12 @@</span>
      }
  
      /**
       * Sets the maximum number of digits allowed in the fraction portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of &lt;code&gt;newValue&lt;/code&gt; and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of {@code newValue} and</span>
       * 340 is used. Negative input values are replaced with 0.
       * @see NumberFormat#setMaximumFractionDigits
       */
      @Override
      public void setMaximumFractionDigits(int newValue) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3696,12 +3707,12 @@</span>
      }
  
      /**
       * Sets the minimum number of digits allowed in the fraction portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of &lt;code&gt;newValue&lt;/code&gt; and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of {@code newValue} and</span>
       * 340 is used. Negative input values are replaced with 0.
       * @see NumberFormat#setMinimumFractionDigits
       */
      @Override
      public void setMinimumFractionDigits(int newValue) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3717,12 +3728,12 @@</span>
      }
  
      /**
       * Gets the maximum number of digits allowed in the integer portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of the return value and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of the return value and</span>
       * 309 is used.
       * @see #setMaximumIntegerDigits
       */
      @Override
      public int getMaximumIntegerDigits() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3730,12 +3741,12 @@</span>
      }
  
      /**
       * Gets the minimum number of digits allowed in the integer portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of the return value and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of the return value and</span>
       * 309 is used.
       * @see #setMinimumIntegerDigits
       */
      @Override
      public int getMinimumIntegerDigits() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3743,12 +3754,12 @@</span>
      }
  
      /**
       * Gets the maximum number of digits allowed in the fraction portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of the return value and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of the return value and</span>
       * 340 is used.
       * @see #setMaximumFractionDigits
       */
      @Override
      public int getMaximumFractionDigits() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3756,12 +3767,12 @@</span>
      }
  
      /**
       * Gets the minimum number of digits allowed in the fraction portion of a
       * number.
<span class="udiff-line-modified-removed">-      * For formatting numbers other than &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects, the lower of the return value and</span>
<span class="udiff-line-modified-added">+      * For formatting numbers other than {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects, the lower of the return value and</span>
       * 340 is used.
       * @see #setMinimumFractionDigits
       */
      @Override
      public int getMinimumFractionDigits() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3773,11 +3784,11 @@</span>
       * currency values.
       * The currency is obtained by calling
       * {@link DecimalFormatSymbols#getCurrency DecimalFormatSymbols.getCurrency}
       * on this number format&#39;s symbols.
       *
<span class="udiff-line-modified-removed">-      * @return the currency used by this decimal format, or &lt;code&gt;null&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * @return the currency used by this decimal format, or {@code null}</span>
       * @since 1.4
       */
      @Override
      public Currency getCurrency() {
          return symbols.getCurrency();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3790,11 +3801,11 @@</span>
       * The currency is set by calling
       * {@link DecimalFormatSymbols#setCurrency DecimalFormatSymbols.setCurrency}
       * on this number format&#39;s symbols.
       *
       * @param currency the new currency to be used by this decimal format
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if &lt;code&gt;currency&lt;/code&gt; is null</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if {@code currency} is null</span>
       * @since 1.4
       */
      @Override
      public void setCurrency(Currency currency) {
          if (currency != symbols.getCurrency()) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3807,11 +3818,11 @@</span>
      }
  
      /**
       * Gets the {@link java.math.RoundingMode} used in this DecimalFormat.
       *
<span class="udiff-line-modified-removed">-      * @return The &lt;code&gt;RoundingMode&lt;/code&gt; used for this DecimalFormat.</span>
<span class="udiff-line-modified-added">+      * @return The {@code RoundingMode} used for this DecimalFormat.</span>
       * @see #setRoundingMode(RoundingMode)
       * @since 1.6
       */
      @Override
      public RoundingMode getRoundingMode() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3819,13 +3830,13 @@</span>
      }
  
      /**
       * Sets the {@link java.math.RoundingMode} used in this DecimalFormat.
       *
<span class="udiff-line-modified-removed">-      * @param roundingMode The &lt;code&gt;RoundingMode&lt;/code&gt; to be used</span>
<span class="udiff-line-modified-added">+      * @param roundingMode The {@code RoundingMode} to be used</span>
       * @see #getRoundingMode()
<span class="udiff-line-modified-removed">-      * @exception NullPointerException if &lt;code&gt;roundingMode&lt;/code&gt; is null.</span>
<span class="udiff-line-modified-added">+      * @throws    NullPointerException if {@code roundingMode} is null.</span>
       * @since 1.6
       */
      @Override
      public void setRoundingMode(RoundingMode roundingMode) {
          if (roundingMode == null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3843,45 +3854,46 @@</span>
       * validations and adjustments are:
       * &lt;ol&gt;
       * &lt;li&gt;
       * Verify that the superclass&#39;s digit count fields correctly reflect
       * the limits imposed on formatting numbers other than
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigInteger&lt;/code&gt; and &lt;code&gt;BigDecimal&lt;/code&gt; objects. These</span>
<span class="udiff-line-modified-added">+      * {@code BigInteger} and {@code BigDecimal} objects. These</span>
       * limits are stored in the superclass for serialization compatibility
<span class="udiff-line-modified-removed">-      * with older versions, while the limits for &lt;code&gt;BigInteger&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigDecimal&lt;/code&gt; objects are kept in this class.</span>
<span class="udiff-line-modified-added">+      * with older versions, while the limits for {@code BigInteger} and</span>
<span class="udiff-line-modified-added">+      * {@code BigDecimal} objects are kept in this class.</span>
       * If, in the superclass, the minimum or maximum integer digit count is
<span class="udiff-line-modified-removed">-      * larger than &lt;code&gt;DOUBLE_INTEGER_DIGITS&lt;/code&gt; or if the minimum or</span>
<span class="udiff-line-modified-added">+      * larger than {@code DOUBLE_INTEGER_DIGITS} or if the minimum or</span>
       * maximum fraction digit count is larger than
<span class="udiff-line-modified-removed">-      * &lt;code&gt;DOUBLE_FRACTION_DIGITS&lt;/code&gt;, then the stream data is invalid</span>
<span class="udiff-line-modified-removed">-      * and this method throws an &lt;code&gt;InvalidObjectException&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * {@code DOUBLE_FRACTION_DIGITS}, then the stream data is invalid</span>
<span class="udiff-line-modified-added">+      * and this method throws an {@code InvalidObjectException}.</span>
       * &lt;li&gt;
<span class="udiff-line-modified-removed">-      * If &lt;code&gt;serialVersionOnStream&lt;/code&gt; is less than 4, initialize</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;roundingMode&lt;/code&gt; to {@link java.math.RoundingMode#HALF_EVEN</span>
<span class="udiff-line-modified-added">+      * If {@code serialVersionOnStream} is less than 4, initialize</span>
<span class="udiff-line-modified-added">+      * {@code roundingMode} to {@link java.math.RoundingMode#HALF_EVEN</span>
       * RoundingMode.HALF_EVEN}.  This field is new with version 4.
       * &lt;li&gt;
<span class="udiff-line-modified-removed">-      * If &lt;code&gt;serialVersionOnStream&lt;/code&gt; is less than 3, then call</span>
<span class="udiff-line-modified-added">+      * If {@code serialVersionOnStream} is less than 3, then call</span>
       * the setters for the minimum and maximum integer and fraction digits with
       * the values of the corresponding superclass getters to initialize the
       * fields in this class. The fields in this class are new with version 3.
       * &lt;li&gt;
<span class="udiff-line-modified-removed">-      * If &lt;code&gt;serialVersionOnStream&lt;/code&gt; is less than 1, indicating that</span>
<span class="udiff-line-modified-added">+      * If {@code serialVersionOnStream} is less than 1, indicating that</span>
       * the stream was written by JDK 1.1, initialize
<span class="udiff-line-modified-removed">-      * &lt;code&gt;useExponentialNotation&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * {@code useExponentialNotation}</span>
       * to false, since it was not present in JDK 1.1.
       * &lt;li&gt;
<span class="udiff-line-modified-removed">-      * Set &lt;code&gt;serialVersionOnStream&lt;/code&gt; to the maximum allowed value so</span>
<span class="udiff-line-modified-added">+      * Set {@code serialVersionOnStream} to the maximum allowed value so</span>
       * that default serialization will work properly if this object is streamed
       * out again.
       * &lt;/ol&gt;
       *
       * &lt;p&gt;Stream versions older than 2 will not have the affix pattern variables
<span class="udiff-line-modified-removed">-      * &lt;code&gt;posPrefixPattern&lt;/code&gt; etc.  As a result, they will be initialized</span>
<span class="udiff-line-modified-removed">-      * to &lt;code&gt;null&lt;/code&gt;, which means the affix strings will be taken as</span>
<span class="udiff-line-modified-added">+      * {@code posPrefixPattern} etc.  As a result, they will be initialized</span>
<span class="udiff-line-modified-added">+      * to {@code null}, which means the affix strings will be taken as</span>
       * literal values.  This is exactly what we want, since that corresponds to
       * the pre-version-2 behavior.
       */
<span class="udiff-line-added">+     @java.io.Serial</span>
      private void readObject(ObjectInputStream stream)
           throws IOException, ClassNotFoundException
      {
          stream.defaultReadObject();
          digitList = new DigitList();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3913,10 +3925,16 @@</span>
          }
          if (serialVersionOnStream &lt; 1) {
              // Didn&#39;t have exponential fields
              useExponentialNotation = false;
          }
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         // Restore the invariant value if groupingSize is invalid.</span>
<span class="udiff-line-added">+         if (groupingSize &lt; 0) {</span>
<span class="udiff-line-added">+             groupingSize = 3;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
          serialVersionOnStream = currentSerialVersion;
      }
  
      //----------------------------------------------------------------------
      // INSTANCE VARIABLES
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3958,51 +3976,51 @@</span>
       */
      private String  negativeSuffix = &quot;&quot;;
  
      /**
       * The prefix pattern for non-negative numbers.  This variable corresponds
<span class="udiff-line-modified-removed">-      * to &lt;code&gt;positivePrefix&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * to {@code positivePrefix}.</span>
       *
<span class="udiff-line-modified-removed">-      * &lt;p&gt;This pattern is expanded by the method &lt;code&gt;expandAffix()&lt;/code&gt; to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;positivePrefix&lt;/code&gt; to update the latter to reflect changes in</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;symbols&lt;/code&gt;.  If this variable is &lt;code&gt;null&lt;/code&gt; then</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;positivePrefix&lt;/code&gt; is taken as a literal value that does not</span>
<span class="udiff-line-modified-removed">-      * change when &lt;code&gt;symbols&lt;/code&gt; changes.  This variable is always</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;null&lt;/code&gt; for &lt;code&gt;DecimalFormat&lt;/code&gt; objects older than</span>
<span class="udiff-line-modified-added">+      * &lt;p&gt;This pattern is expanded by the method {@code expandAffix()} to</span>
<span class="udiff-line-modified-added">+      * {@code positivePrefix} to update the latter to reflect changes in</span>
<span class="udiff-line-modified-added">+      * {@code symbols}.  If this variable is {@code null} then</span>
<span class="udiff-line-modified-added">+      * {@code positivePrefix} is taken as a literal value that does not</span>
<span class="udiff-line-modified-added">+      * change when {@code symbols} changes.  This variable is always</span>
<span class="udiff-line-modified-added">+      * {@code null} for {@code DecimalFormat} objects older than</span>
       * stream version 2 restored from stream.
       *
       * @serial
       * @since 1.3
       */
      private String posPrefixPattern;
  
      /**
       * The suffix pattern for non-negative numbers.  This variable corresponds
<span class="udiff-line-modified-removed">-      * to &lt;code&gt;positiveSuffix&lt;/code&gt;.  This variable is analogous to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;posPrefixPattern&lt;/code&gt;; see that variable for further</span>
<span class="udiff-line-modified-added">+      * to {@code positiveSuffix}.  This variable is analogous to</span>
<span class="udiff-line-modified-added">+      * {@code posPrefixPattern}; see that variable for further</span>
       * documentation.
       *
       * @serial
       * @since 1.3
       */
      private String posSuffixPattern;
  
      /**
       * The prefix pattern for negative numbers.  This variable corresponds
<span class="udiff-line-modified-removed">-      * to &lt;code&gt;negativePrefix&lt;/code&gt;.  This variable is analogous to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;posPrefixPattern&lt;/code&gt;; see that variable for further</span>
<span class="udiff-line-modified-added">+      * to {@code negativePrefix}.  This variable is analogous to</span>
<span class="udiff-line-modified-added">+      * {@code posPrefixPattern}; see that variable for further</span>
       * documentation.
       *
       * @serial
       * @since 1.3
       */
      private String negPrefixPattern;
  
      /**
       * The suffix pattern for negative numbers.  This variable corresponds
<span class="udiff-line-modified-removed">-      * to &lt;code&gt;negativeSuffix&lt;/code&gt;.  This variable is analogous to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;posPrefixPattern&lt;/code&gt;; see that variable for further</span>
<span class="udiff-line-modified-added">+      * to {@code negativeSuffix}.  This variable is analogous to</span>
<span class="udiff-line-modified-added">+      * {@code posPrefixPattern}; see that variable for further</span>
       * documentation.
       *
       * @serial
       * @since 1.3
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4016,18 +4034,19 @@</span>
       */
      private int     multiplier = 1;
  
      /**
       * The number of digits between grouping separators in the integer
<span class="udiff-line-modified-removed">-      * portion of a number.  Must be greater than 0 if</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;NumberFormat.groupingUsed&lt;/code&gt; is true.</span>
<span class="udiff-line-modified-added">+      * portion of a number.  Must be non-negative and less than or equal to</span>
<span class="udiff-line-modified-added">+      * {@link java.lang.Byte#MAX_VALUE Byte.MAX_VALUE} if</span>
<span class="udiff-line-added">+      * {@code NumberFormat.groupingUsed} is true.</span>
       *
       * @serial
       * @see #getGroupingSize
       * @see java.text.NumberFormat#isGroupingUsed
       */
<span class="udiff-line-modified-removed">-     private byte    groupingSize = 3;  // invariant, &gt; 0 if useThousands</span>
<span class="udiff-line-modified-added">+     private byte    groupingSize = 3;  // invariant, 0 - 127, if groupingUsed</span>
  
      /**
       * If true, forces the decimal separator to always appear in a formatted
       * number, even if the fractional part of the number is zero.
       *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4046,16 +4065,16 @@</span>
      private boolean parseBigDecimal = false;
  
  
      /**
       * True if this object represents a currency format.  This determines
<span class="udiff-line-modified-removed">-      * whether the monetary decimal separator is used instead of the normal one.</span>
<span class="udiff-line-modified-added">+      * whether the monetary decimal/grouping separators are used instead of the normal ones.</span>
       */
      private transient boolean isCurrencyFormat = false;
  
      /**
<span class="udiff-line-modified-removed">-      * The &lt;code&gt;DecimalFormatSymbols&lt;/code&gt; object used by this format.</span>
<span class="udiff-line-modified-added">+      * The {@code DecimalFormatSymbols} object used by this format.</span>
       * It contains the symbols used to format numbers, e.g. the grouping separator,
       * decimal separator, and so on.
       *
       * @serial
       * @see #setDecimalFormatSymbols
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4072,87 +4091,87 @@</span>
       */
      private boolean useExponentialNotation;  // Newly persistent in the Java 2 platform v.1.2
  
      /**
       * FieldPositions describing the positive prefix String. This is
<span class="udiff-line-modified-removed">-      * lazily created. Use &lt;code&gt;getPositivePrefixFieldPositions&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * lazily created. Use {@code getPositivePrefixFieldPositions}</span>
       * when needed.
       */
      private transient FieldPosition[] positivePrefixFieldPositions;
  
      /**
       * FieldPositions describing the positive suffix String. This is
<span class="udiff-line-modified-removed">-      * lazily created. Use &lt;code&gt;getPositiveSuffixFieldPositions&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * lazily created. Use {@code getPositiveSuffixFieldPositions}</span>
       * when needed.
       */
      private transient FieldPosition[] positiveSuffixFieldPositions;
  
      /**
       * FieldPositions describing the negative prefix String. This is
<span class="udiff-line-modified-removed">-      * lazily created. Use &lt;code&gt;getNegativePrefixFieldPositions&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * lazily created. Use {@code getNegativePrefixFieldPositions}</span>
       * when needed.
       */
      private transient FieldPosition[] negativePrefixFieldPositions;
  
      /**
       * FieldPositions describing the negative suffix String. This is
<span class="udiff-line-modified-removed">-      * lazily created. Use &lt;code&gt;getNegativeSuffixFieldPositions&lt;/code&gt;</span>
<span class="udiff-line-modified-added">+      * lazily created. Use {@code getNegativeSuffixFieldPositions}</span>
       * when needed.
       */
      private transient FieldPosition[] negativeSuffixFieldPositions;
  
      /**
       * The minimum number of digits used to display the exponent when a number is
       * formatted in exponential notation.  This field is ignored if
<span class="udiff-line-modified-removed">-      * &lt;code&gt;useExponentialNotation&lt;/code&gt; is not true.</span>
<span class="udiff-line-modified-added">+      * {@code useExponentialNotation} is not true.</span>
       *
       * @serial
       * @since 1.2
       */
      private byte    minExponentDigits;       // Newly persistent in the Java 2 platform v.1.2
  
      /**
       * The maximum number of digits allowed in the integer portion of a
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigInteger&lt;/code&gt; or &lt;code&gt;BigDecimal&lt;/code&gt; number.</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;maximumIntegerDigits&lt;/code&gt; must be greater than or equal to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;minimumIntegerDigits&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * {@code BigInteger} or {@code BigDecimal} number.</span>
<span class="udiff-line-modified-added">+      * {@code maximumIntegerDigits} must be greater than or equal to</span>
<span class="udiff-line-modified-added">+      * {@code minimumIntegerDigits}.</span>
       *
       * @serial
       * @see #getMaximumIntegerDigits
       * @since 1.5
       */
      private int    maximumIntegerDigits = super.getMaximumIntegerDigits();
  
      /**
       * The minimum number of digits allowed in the integer portion of a
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigInteger&lt;/code&gt; or &lt;code&gt;BigDecimal&lt;/code&gt; number.</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;minimumIntegerDigits&lt;/code&gt; must be less than or equal to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;maximumIntegerDigits&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * {@code BigInteger} or {@code BigDecimal} number.</span>
<span class="udiff-line-modified-added">+      * {@code minimumIntegerDigits} must be less than or equal to</span>
<span class="udiff-line-modified-added">+      * {@code maximumIntegerDigits}.</span>
       *
       * @serial
       * @see #getMinimumIntegerDigits
       * @since 1.5
       */
      private int    minimumIntegerDigits = super.getMinimumIntegerDigits();
  
      /**
       * The maximum number of digits allowed in the fractional portion of a
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigInteger&lt;/code&gt; or &lt;code&gt;BigDecimal&lt;/code&gt; number.</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;maximumFractionDigits&lt;/code&gt; must be greater than or equal to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;minimumFractionDigits&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * {@code BigInteger} or {@code BigDecimal} number.</span>
<span class="udiff-line-modified-added">+      * {@code maximumFractionDigits} must be greater than or equal to</span>
<span class="udiff-line-modified-added">+      * {@code minimumFractionDigits}.</span>
       *
       * @serial
       * @see #getMaximumFractionDigits
       * @since 1.5
       */
      private int    maximumFractionDigits = super.getMaximumFractionDigits();
  
      /**
       * The minimum number of digits allowed in the fractional portion of a
<span class="udiff-line-modified-removed">-      * &lt;code&gt;BigInteger&lt;/code&gt; or &lt;code&gt;BigDecimal&lt;/code&gt; number.</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;minimumFractionDigits&lt;/code&gt; must be less than or equal to</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;maximumFractionDigits&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * {@code BigInteger} or {@code BigDecimal} number.</span>
<span class="udiff-line-modified-added">+      * {@code minimumFractionDigits} must be less than or equal to</span>
<span class="udiff-line-modified-added">+      * {@code maximumFractionDigits}.</span>
       *
       * @serial
       * @see #getMinimumFractionDigits
       * @since 1.5
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4245,23 +4264,23 @@</span>
       * The internal serial version which says which version was written.
       * Possible values are:
       * &lt;ul&gt;
       * &lt;li&gt;&lt;b&gt;0&lt;/b&gt; (default): versions before the Java 2 platform v1.2
       * &lt;li&gt;&lt;b&gt;1&lt;/b&gt;: version for 1.2, which includes the two new fields
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;useExponentialNotation&lt;/code&gt; and</span>
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;minExponentDigits&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      *      {@code useExponentialNotation} and</span>
<span class="udiff-line-modified-added">+      *      {@code minExponentDigits}.</span>
       * &lt;li&gt;&lt;b&gt;2&lt;/b&gt;: version for 1.3 and later, which adds four new fields:
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;posPrefixPattern&lt;/code&gt;, &lt;code&gt;posSuffixPattern&lt;/code&gt;,</span>
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;negPrefixPattern&lt;/code&gt;, and &lt;code&gt;negSuffixPattern&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      *      {@code posPrefixPattern}, {@code posSuffixPattern},</span>
<span class="udiff-line-modified-added">+      *      {@code negPrefixPattern}, and {@code negSuffixPattern}.</span>
       * &lt;li&gt;&lt;b&gt;3&lt;/b&gt;: version for 1.5 and later, which adds five new fields:
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;maximumIntegerDigits&lt;/code&gt;,</span>
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;minimumIntegerDigits&lt;/code&gt;,</span>
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;maximumFractionDigits&lt;/code&gt;,</span>
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;minimumFractionDigits&lt;/code&gt;, and</span>
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;parseBigDecimal&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      *      {@code maximumIntegerDigits},</span>
<span class="udiff-line-modified-added">+      *      {@code minimumIntegerDigits},</span>
<span class="udiff-line-modified-added">+      *      {@code maximumFractionDigits},</span>
<span class="udiff-line-modified-added">+      *      {@code minimumFractionDigits}, and</span>
<span class="udiff-line-modified-added">+      *      {@code parseBigDecimal}.</span>
       * &lt;li&gt;&lt;b&gt;4&lt;/b&gt;: version for 1.6 and later, which adds one new field:
<span class="udiff-line-modified-removed">-      *      &lt;code&gt;roundingMode&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      *      {@code roundingMode}.</span>
       * &lt;/ul&gt;
       * @since 1.2
       * @serial
       */
      private int serialVersionOnStream = currentSerialVersion;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4331,12 +4350,12 @@</span>
  
      /**
       * The CURRENCY_SIGN is the standard Unicode symbol for currency.  It
       * is used in patterns and substituted with either the currency symbol,
       * or if it is doubled, with the international currency symbol.  If the
<span class="udiff-line-modified-removed">-      * CURRENCY_SIGN is seen in a pattern, then the decimal separator is</span>
<span class="udiff-line-modified-removed">-      * replaced with the monetary decimal separator.</span>
<span class="udiff-line-modified-added">+      * CURRENCY_SIGN is seen in a pattern, then the decimal/grouping separators</span>
<span class="udiff-line-modified-added">+      * are replaced with the monetary decimal/grouping separators.</span>
       *
       * The CURRENCY_SIGN is not localized.
       */
      private static final char       CURRENCY_SIGN = &#39;\u00A4&#39;;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -4351,7 +4370,8 @@</span>
      // Upper limit on integer and fraction digits for BigDecimal and BigInteger
      static final int MAXIMUM_INTEGER_DIGITS  = Integer.MAX_VALUE;
      static final int MAXIMUM_FRACTION_DIGITS = Integer.MAX_VALUE;
  
      // Proclaim JDK 1.1 serial compatibility.
<span class="udiff-line-added">+     @java.io.Serial</span>
      static final long serialVersionUID = 864413376551465018L;
  }
</pre>
<center><a href="DateFormatSymbols.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="DecimalFormatSymbols.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>