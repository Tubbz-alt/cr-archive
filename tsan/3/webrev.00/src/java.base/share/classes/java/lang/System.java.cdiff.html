<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/lang/System.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="SuppressWarnings.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Thread.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/System.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1994, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 54,10 ***</span>
<span class="line-new-header">--- 54,11 ---</span>
  import java.util.Map;
  import java.util.Objects;
  import java.util.Properties;
  import java.util.PropertyPermission;
  import java.util.ResourceBundle;
<span class="line-added">+ import java.util.Set;</span>
  import java.util.function.Supplier;
  import java.util.concurrent.ConcurrentHashMap;
  import java.util.stream.Stream;
  
  import jdk.internal.util.StaticProperty;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 72,10 ***</span>
<span class="line-new-header">--- 73,11 ---</span>
  import jdk.internal.logger.LoggerFinderLoader;
  import jdk.internal.logger.LazyLoggers;
  import jdk.internal.logger.LocalizedLoggerWrapper;
  import jdk.internal.util.SystemProps;
  import jdk.internal.vm.annotation.Stable;
<span class="line-added">+ import sun.nio.fs.DefaultFileSystemProvider;</span>
  import sun.reflect.annotation.AnnotationType;
  import sun.nio.ch.Interruptible;
  import sun.security.util.SecurityConstants;
  
  /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 91,14 ***</span>
   * @since   1.0
   */
  public final class System {
      /* Register the natives via the static initializer.
       *
<span class="line-modified">!      * VM will invoke the initializeSystemClass method to complete</span>
<span class="line-modified">!      * the initialization for this class separated from clinit.</span>
<span class="line-removed">-      * Note that to use properties set by the VM, see the constraints</span>
<span class="line-removed">-      * described in the initializeSystemClass method.</span>
       */
      private static native void registerNatives();
      static {
          registerNatives();
      }
<span class="line-new-header">--- 93,12 ---</span>
   * @since   1.0
   */
  public final class System {
      /* Register the natives via the static initializer.
       *
<span class="line-modified">!      * The VM will invoke the initPhase1 method to complete the initialization</span>
<span class="line-modified">!      * of this class separate from &lt;clinit&gt;.</span>
       */
      private static native void registerNatives();
      static {
          registerNatives();
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 337,10 ***</span>
<span class="line-new-header">--- 337,12 ---</span>
      public static void setSecurityManager(SecurityManager sm) {
          if (allowSecurityManager()) {
              if (security == null) {
                  // ensure image reader is initialized
                  Object.class.getResource(&quot;java/lang/ANY&quot;);
<span class="line-added">+                 // ensure the default file system is initialized</span>
<span class="line-added">+                 DefaultFileSystemProvider.theFileSystem();</span>
              }
              if (sm != null) {
                  try {
                      // pre-populates the SecurityManager.packageAccess cache
                      // to avoid recursive permission checking issues with custom
</pre>
<hr />
<pre>
<span class="line-old-header">*** 616,12 ***</span>
       * &lt;p&gt;
       * The current set of system properties for use by the
       * {@link #getProperty(String)} method is returned as a
       * {@code Properties} object. If there is no current set of
       * system properties, a set of system properties is first created and
<span class="line-modified">!      * initialized. This set of system properties always includes values</span>
<span class="line-modified">!      * for the following keys:</span>
       * &lt;table class=&quot;striped&quot; style=&quot;text-align:left&quot;&gt;
       * &lt;caption style=&quot;display:none&quot;&gt;Shows property keys and associated values&lt;/caption&gt;
       * &lt;thead&gt;
       * &lt;tr&gt;&lt;th scope=&quot;col&quot;&gt;Key&lt;/th&gt;
       *     &lt;th scope=&quot;col&quot;&gt;Description of Associated Value&lt;/th&gt;&lt;/tr&gt;
<span class="line-new-header">--- 618,13 ---</span>
       * &lt;p&gt;
       * The current set of system properties for use by the
       * {@link #getProperty(String)} method is returned as a
       * {@code Properties} object. If there is no current set of
       * system properties, a set of system properties is first created and
<span class="line-modified">!      * initialized. This set of system properties includes a value</span>
<span class="line-modified">!      * for each of the following keys unless the description of the associated</span>
<span class="line-added">+      * value indicates that the value is optional.</span>
       * &lt;table class=&quot;striped&quot; style=&quot;text-align:left&quot;&gt;
       * &lt;caption style=&quot;display:none&quot;&gt;Shows property keys and associated values&lt;/caption&gt;
       * &lt;thead&gt;
       * &lt;tr&gt;&lt;th scope=&quot;col&quot;&gt;Key&lt;/th&gt;
       *     &lt;th scope=&quot;col&quot;&gt;Description of Associated Value&lt;/th&gt;&lt;/tr&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 637,11 ***</span>
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vendor}&lt;/th&gt;
       *     &lt;td&gt;Java Runtime Environment vendor&lt;/td&gt;&lt;/tr&gt;
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vendor.url}&lt;/th&gt;
       *     &lt;td&gt;Java vendor URL&lt;/td&gt;&lt;/tr&gt;
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vendor.version}&lt;/th&gt;
<span class="line-modified">!      *     &lt;td&gt;Java vendor version&lt;/td&gt;&lt;/tr&gt;</span>
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.home}&lt;/th&gt;
       *     &lt;td&gt;Java installation directory&lt;/td&gt;&lt;/tr&gt;
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vm.specification.version}&lt;/th&gt;
       *     &lt;td&gt;Java Virtual Machine specification version, whose value is the
       *     {@linkplain Runtime.Version#feature feature} element of the
<span class="line-new-header">--- 640,11 ---</span>
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vendor}&lt;/th&gt;
       *     &lt;td&gt;Java Runtime Environment vendor&lt;/td&gt;&lt;/tr&gt;
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vendor.url}&lt;/th&gt;
       *     &lt;td&gt;Java vendor URL&lt;/td&gt;&lt;/tr&gt;
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vendor.version}&lt;/th&gt;
<span class="line-modified">!      *     &lt;td&gt;Java vendor version &lt;em&gt;(optional)&lt;/em&gt; &lt;/td&gt;&lt;/tr&gt;</span>
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.home}&lt;/th&gt;
       *     &lt;td&gt;Java installation directory&lt;/td&gt;&lt;/tr&gt;
       * &lt;tr&gt;&lt;th scope=&quot;row&quot;&gt;{@systemProperty java.vm.specification.version}&lt;/th&gt;
       *     &lt;td&gt;Java Virtual Machine specification version, whose value is the
       *     {@linkplain Runtime.Version#feature feature} element of the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1780,18 ***</span>
      public static void exit(int status) {
          Runtime.getRuntime().exit(status);
      }
  
      /**
<span class="line-modified">!      * Runs the garbage collector.</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * Calling the {@code gc} method suggests that the Java Virtual</span>
<span class="line-modified">!      * Machine expend effort toward recycling unused objects in order to</span>
<span class="line-modified">!      * make the memory they currently occupy available for quick reuse.</span>
<span class="line-modified">!      * When control returns from the method call, the Java Virtual</span>
<span class="line-modified">!      * Machine has made a best effort to reclaim space from all discarded</span>
<span class="line-modified">!      * objects.</span>
       * &lt;p&gt;
       * The call {@code System.gc()} is effectively equivalent to the
       * call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * Runtime.getRuntime().gc()
<span class="line-new-header">--- 1783,21 ---</span>
      public static void exit(int status) {
          Runtime.getRuntime().exit(status);
      }
  
      /**
<span class="line-modified">!      * Runs the garbage collector in the Java Virtual Machine.</span>
<span class="line-modified">!      * &lt;p&gt;</span>
<span class="line-modified">!      * Calling the {@code gc} method suggests that the Java Virtual Machine</span>
<span class="line-modified">!      * expend effort toward recycling unused objects in order to</span>
<span class="line-modified">!      * make the memory they currently occupy available for reuse</span>
<span class="line-modified">!      * by the Java Virtual Machine.</span>
<span class="line-modified">!      * When control returns from the method call, the Java Virtual Machine</span>
<span class="line-modified">!      * has made a best effort to reclaim space from all unused objects.</span>
<span class="line-added">+      * There is no guarantee that this effort will recycle any particular</span>
<span class="line-added">+      * number of unused objects, reclaim any particular amount of space, or</span>
<span class="line-added">+      * complete at any particular time, if at all, before the method returns or ever.</span>
       * &lt;p&gt;
       * The call {@code System.gc()} is effectively equivalent to the
       * call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * Runtime.getRuntime().gc()
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2227,12 ***</span>
                  m.implAddOpens(pn, other);
              }
              public void addOpensToAllUnnamed(Module m, String pn) {
                  m.implAddOpensToAllUnnamed(pn);
              }
<span class="line-modified">!             public void addOpensToAllUnnamed(Module m, Iterator&lt;String&gt; packages) {</span>
<span class="line-modified">!                 m.implAddOpensToAllUnnamed(packages);</span>
              }
              public void addUses(Module m, Class&lt;?&gt; service) {
                  m.implAddUses(service);
              }
              public boolean isReflectivelyExported(Module m, String pn, Module other) {
<span class="line-new-header">--- 2233,12 ---</span>
                  m.implAddOpens(pn, other);
              }
              public void addOpensToAllUnnamed(Module m, String pn) {
                  m.implAddOpensToAllUnnamed(pn);
              }
<span class="line-modified">!             public void addOpensToAllUnnamed(Module m, Set&lt;String&gt; concealedPackages, Set&lt;String&gt; exportedPackages) {</span>
<span class="line-modified">!                 m.implAddOpensToAllUnnamed(concealedPackages, exportedPackages);</span>
              }
              public void addUses(Module m, Class&lt;?&gt; service) {
                  m.implAddUses(service);
              }
              public boolean isReflectivelyExported(Module m, String pn, Module other) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2268,8 ***</span>
<span class="line-new-header">--- 2274,13 ---</span>
              }
  
              public void setCause(Throwable t, Throwable cause) {
                  t.setCause(cause);
              }
<span class="line-added">+ </span>
<span class="line-added">+             public void loadLibrary(Class&lt;?&gt; caller, String library) {</span>
<span class="line-added">+                 assert library.indexOf(java.io.File.separatorChar) &lt; 0;</span>
<span class="line-added">+                 ClassLoader.loadLibrary(caller, library, false);</span>
<span class="line-added">+             }</span>
          });
      }
  }
</pre>
<center><a href="SuppressWarnings.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Thread.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>