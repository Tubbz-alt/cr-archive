<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/doc-files/ValueBased.html</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../constant/MethodTypeDescImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="threadPrimitiveDeprecation.html.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/doc-files/ValueBased.html</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 1 &lt;!doctype html&gt;
























 2 &lt;html lang=&quot;en&quot;&gt;
 3 &lt;head&gt;
 4   &lt;title&gt;Value-based Classes&lt;/title&gt;
 5   &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../../../../stylesheet.css&quot; title=&quot;Style&quot;&gt;
 6 &lt;/head&gt;
 7 &lt;body&gt;
<span class="line-modified"> 8 &lt;h2 id=&quot;ValueBased&quot;&gt;Value-based Classes&lt;/h2&gt;</span>
 9 
10 Some classes, such as &lt;code&gt;java.util.Optional&lt;/code&gt; and
11 &lt;code&gt;java.time.LocalDateTime&lt;/code&gt;, are &lt;em&gt;value-based&lt;/em&gt;.  Instances of a
12 value-based class:
13 &lt;ul&gt;
14     &lt;li&gt;are final and immutable (though may contain references to mutable
15         objects);&lt;/li&gt;
16     &lt;li&gt;have implementations of &lt;code&gt;equals&lt;/code&gt;,
17         &lt;code&gt;hashCode&lt;/code&gt;, and &lt;code&gt;toString&lt;/code&gt; which are computed
18         solely from the instance&#39;s state and not from its identity or the state
19         of any other object or variable;&lt;/li&gt;
20     &lt;li&gt;make no use of identity-sensitive operations such as reference
21         equality (&lt;code&gt;==&lt;/code&gt;) between instances, identity hash code of
22         instances, or synchronization on an instances&#39;s intrinsic lock;&lt;/li&gt;
23     &lt;li&gt;are considered equal solely based on &lt;code&gt;equals()&lt;/code&gt;, not
24         based on reference equality (&lt;code&gt;==&lt;/code&gt;);&lt;/li&gt;
25     &lt;li&gt;do not have accessible constructors, but are instead instantiated
<span class="line-modified">26         through factory methods which make no committment as to the identity</span>
27         of returned instances;&lt;/li&gt;
28     &lt;li&gt;are &lt;em&gt;freely substitutable&lt;/em&gt; when equal, meaning that interchanging
29         any two instances &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; that are equal
30         according to &lt;code&gt;equals()&lt;/code&gt; in any computation or method
31         invocation should produce no visible change in behavior.
32     &lt;/li&gt;
33 &lt;/ul&gt;
34 
35 &lt;p&gt;A program may produce unpredictable results if it attempts to distinguish two
36     references to equal values of a value-based class, whether directly via reference
37     equality or indirectly via an appeal to synchronization, identity hashing,
38     serialization, or any other identity-sensitive mechanism.  Use of such
39     identity-sensitive operations on instances of value-based classes may have
40     unpredictable effects and should be avoided.&lt;/p&gt;
41 &lt;/body&gt;
42 &lt;/html&gt;
</pre>
</td>
<td>
<hr />
<pre>
 1 &lt;!doctype html&gt;
<span class="line-added"> 2 &lt;!--</span>
<span class="line-added"> 3  Copyright (c) 2013, 2020, Oracle and/or its affiliates. All rights reserved.</span>
<span class="line-added"> 4  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span>
<span class="line-added"> 5 </span>
<span class="line-added"> 6  This code is free software; you can redistribute it and/or modify it</span>
<span class="line-added"> 7  under the terms of the GNU General Public License version 2 only, as</span>
<span class="line-added"> 8  published by the Free Software Foundation.  Oracle designates this</span>
<span class="line-added"> 9  particular file as subject to the &quot;Classpath&quot; exception as provided</span>
<span class="line-added">10  by Oracle in the LICENSE file that accompanied this code.</span>
<span class="line-added">11 </span>
<span class="line-added">12  This code is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="line-added">13  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="line-added">14  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
<span class="line-added">15  version 2 for more details (a copy is included in the LICENSE file that</span>
<span class="line-added">16  accompanied this code).</span>
<span class="line-added">17 </span>
<span class="line-added">18  You should have received a copy of the GNU General Public License version</span>
<span class="line-added">19  2 along with this work; if not, write to the Free Software Foundation,</span>
<span class="line-added">20  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="line-added">21 </span>
<span class="line-added">22  Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA</span>
<span class="line-added">23  or visit www.oracle.com if you need additional information or have any</span>
<span class="line-added">24  questions.</span>
<span class="line-added">25 --&gt;</span>
26 &lt;html lang=&quot;en&quot;&gt;
27 &lt;head&gt;
28   &lt;title&gt;Value-based Classes&lt;/title&gt;
29   &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../../../../stylesheet.css&quot; title=&quot;Style&quot;&gt;
30 &lt;/head&gt;
31 &lt;body&gt;
<span class="line-modified">32 &lt;h1 id=&quot;ValueBased&quot;&gt;{@index &quot;Value-based Classes&quot;}&lt;/h1&gt;</span>
33 
34 Some classes, such as &lt;code&gt;java.util.Optional&lt;/code&gt; and
35 &lt;code&gt;java.time.LocalDateTime&lt;/code&gt;, are &lt;em&gt;value-based&lt;/em&gt;.  Instances of a
36 value-based class:
37 &lt;ul&gt;
38     &lt;li&gt;are final and immutable (though may contain references to mutable
39         objects);&lt;/li&gt;
40     &lt;li&gt;have implementations of &lt;code&gt;equals&lt;/code&gt;,
41         &lt;code&gt;hashCode&lt;/code&gt;, and &lt;code&gt;toString&lt;/code&gt; which are computed
42         solely from the instance&#39;s state and not from its identity or the state
43         of any other object or variable;&lt;/li&gt;
44     &lt;li&gt;make no use of identity-sensitive operations such as reference
45         equality (&lt;code&gt;==&lt;/code&gt;) between instances, identity hash code of
46         instances, or synchronization on an instances&#39;s intrinsic lock;&lt;/li&gt;
47     &lt;li&gt;are considered equal solely based on &lt;code&gt;equals()&lt;/code&gt;, not
48         based on reference equality (&lt;code&gt;==&lt;/code&gt;);&lt;/li&gt;
49     &lt;li&gt;do not have accessible constructors, but are instead instantiated
<span class="line-modified">50         through factory methods which make no commitment as to the identity</span>
51         of returned instances;&lt;/li&gt;
52     &lt;li&gt;are &lt;em&gt;freely substitutable&lt;/em&gt; when equal, meaning that interchanging
53         any two instances &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; that are equal
54         according to &lt;code&gt;equals()&lt;/code&gt; in any computation or method
55         invocation should produce no visible change in behavior.
56     &lt;/li&gt;
57 &lt;/ul&gt;
58 
59 &lt;p&gt;A program may produce unpredictable results if it attempts to distinguish two
60     references to equal values of a value-based class, whether directly via reference
61     equality or indirectly via an appeal to synchronization, identity hashing,
62     serialization, or any other identity-sensitive mechanism.  Use of such
63     identity-sensitive operations on instances of value-based classes may have
64     unpredictable effects and should be avoided.&lt;/p&gt;
65 &lt;/body&gt;
66 &lt;/html&gt;
</pre>
</td>
</tr>
</table>
<center><a href="../constant/MethodTypeDescImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="threadPrimitiveDeprecation.html.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>