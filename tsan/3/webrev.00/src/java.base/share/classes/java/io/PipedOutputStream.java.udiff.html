<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/io/PipedOutputStream.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="PipedInputStream.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PipedReader.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/io/PipedOutputStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1995, 2006, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1995, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -29,38 +29,37 @@</span>
  
  /**
   * A piped output stream can be connected to a piped input stream
   * to create a communications pipe. The piped output stream is the
   * sending end of the pipe. Typically, data is written to a
<span class="udiff-line-modified-removed">-  * &lt;code&gt;PipedOutputStream&lt;/code&gt; object by one thread and data is</span>
<span class="udiff-line-modified-removed">-  * read from the connected &lt;code&gt;PipedInputStream&lt;/code&gt; by some</span>
<span class="udiff-line-modified-added">+  * {@code PipedOutputStream} object by one thread and data is</span>
<span class="udiff-line-modified-added">+  * read from the connected {@code PipedInputStream} by some</span>
   * other thread. Attempting to use both objects from a single thread
   * is not recommended as it may deadlock the thread.
   * The pipe is said to be &lt;a id=BROKEN&gt; &lt;i&gt;broken&lt;/i&gt; &lt;/a&gt; if a
   * thread that was reading data bytes from the connected piped input
   * stream is no longer alive.
   *
   * @author  James Gosling
   * @see     java.io.PipedInputStream
   * @since   1.0
   */
<span class="udiff-line-modified-removed">- public</span>
<span class="udiff-line-removed">- class PipedOutputStream extends OutputStream {</span>
<span class="udiff-line-modified-added">+ public class PipedOutputStream extends OutputStream {</span>
  
          /* REMIND: identification of the read and write sides needs to be
             more sophisticated.  Either using thread groups (but what about
             pipes within a thread?) or using finalization (but it may be a
             long time until the next GC). */
      private PipedInputStream sink;
  
      /**
       * Creates a piped output stream connected to the specified piped
       * input stream. Data bytes written to this stream will then be
<span class="udiff-line-modified-removed">-      * available as input from &lt;code&gt;snk&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * available as input from {@code snk}.</span>
       *
       * @param      snk   The piped input stream to connect to.
<span class="udiff-line-modified-removed">-      * @exception  IOException  if an I/O error occurs.</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if an I/O error occurs.</span>
       */
      public PipedOutputStream(PipedInputStream snk)  throws IOException {
          connect(snk);
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -76,24 +75,24 @@</span>
      }
  
      /**
       * Connects this piped output stream to a receiver. If this object
       * is already connected to some other piped input stream, an
<span class="udiff-line-modified-removed">-      * &lt;code&gt;IOException&lt;/code&gt; is thrown.</span>
<span class="udiff-line-modified-added">+      * {@code IOException} is thrown.</span>
       * &lt;p&gt;
<span class="udiff-line-modified-removed">-      * If &lt;code&gt;snk&lt;/code&gt; is an unconnected piped input stream and</span>
<span class="udiff-line-modified-removed">-      * &lt;code&gt;src&lt;/code&gt; is an unconnected piped output stream, they may</span>
<span class="udiff-line-modified-added">+      * If {@code snk} is an unconnected piped input stream and</span>
<span class="udiff-line-modified-added">+      * {@code src} is an unconnected piped output stream, they may</span>
       * be connected by either the call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * src.connect(snk)&lt;/pre&gt;&lt;/blockquote&gt;
       * or the call:
       * &lt;blockquote&gt;&lt;pre&gt;
       * snk.connect(src)&lt;/pre&gt;&lt;/blockquote&gt;
       * The two calls have the same effect.
       *
       * @param      snk   the piped input stream to connect to.
<span class="udiff-line-modified-removed">-      * @exception  IOException  if an I/O error occurs.</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if an I/O error occurs.</span>
       */
      public synchronized void connect(PipedInputStream snk) throws IOException {
          if (snk == null) {
              throw new NullPointerException();
          } else if (sink != null || snk.connected) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -104,16 +103,16 @@</span>
          snk.out = 0;
          snk.connected = true;
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Writes the specified &lt;code&gt;byte&lt;/code&gt; to the piped output stream.</span>
<span class="udiff-line-modified-added">+      * Writes the specified {@code byte} to the piped output stream.</span>
       * &lt;p&gt;
<span class="udiff-line-modified-removed">-      * Implements the &lt;code&gt;write&lt;/code&gt; method of &lt;code&gt;OutputStream&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+      * Implements the {@code write} method of {@code OutputStream}.</span>
       *
<span class="udiff-line-modified-removed">-      * @param      b   the &lt;code&gt;byte&lt;/code&gt; to be written.</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if the pipe is &lt;a href=#BROKEN&gt; broken&lt;/a&gt;,</span>
<span class="udiff-line-modified-added">+      * @param   b   the {@code byte} to be written.</span>
<span class="udiff-line-modified-added">+      * @throws  IOException if the pipe is &lt;a href=#BROKEN&gt; broken&lt;/a&gt;,</span>
       *          {@link #connect(java.io.PipedInputStream) unconnected},
       *          closed, or if an I/O error occurs.
       */
      public void write(int b)  throws IOException {
          if (sink == null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -121,19 +120,19 @@</span>
          }
          sink.receive(b);
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Writes &lt;code&gt;len&lt;/code&gt; bytes from the specified byte array</span>
<span class="udiff-line-modified-removed">-      * starting at offset &lt;code&gt;off&lt;/code&gt; to this piped output stream.</span>
<span class="udiff-line-modified-added">+      * Writes {@code len} bytes from the specified byte array</span>
<span class="udiff-line-modified-added">+      * starting at offset {@code off} to this piped output stream.</span>
       * This method blocks until all the bytes are written to the output
       * stream.
       *
<span class="udiff-line-modified-removed">-      * @param      b     the data.</span>
<span class="udiff-line-modified-removed">-      * @param      off   the start offset in the data.</span>
<span class="udiff-line-modified-removed">-      * @param      len   the number of bytes to write.</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if the pipe is &lt;a href=#BROKEN&gt; broken&lt;/a&gt;,</span>
<span class="udiff-line-modified-added">+      * @param   b     the data.</span>
<span class="udiff-line-modified-added">+      * @param   off   the start offset in the data.</span>
<span class="udiff-line-modified-added">+      * @param   len   the number of bytes to write.</span>
<span class="udiff-line-modified-added">+      * @throws  IOException if the pipe is &lt;a href=#BROKEN&gt; broken&lt;/a&gt;,</span>
       *          {@link #connect(java.io.PipedInputStream) unconnected},
       *          closed, or if an I/O error occurs.
       */
      public void write(byte b[], int off, int len) throws IOException {
          if (sink == null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -152,11 +151,11 @@</span>
      /**
       * Flushes this output stream and forces any buffered output bytes
       * to be written out.
       * This will notify any readers that bytes are waiting in the pipe.
       *
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error occurs.</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error occurs.</span>
       */
      public synchronized void flush() throws IOException {
          if (sink != null) {
              synchronized (sink) {
                  sink.notifyAll();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -167,11 +166,11 @@</span>
      /**
       * Closes this piped output stream and releases any system resources
       * associated with this stream. This stream may no longer be used for
       * writing bytes.
       *
<span class="udiff-line-modified-removed">-      * @exception  IOException  if an I/O error occurs.</span>
<span class="udiff-line-modified-added">+      * @throws     IOException  if an I/O error occurs.</span>
       */
      public void close()  throws IOException {
          if (sink != null) {
              sink.receivedLast();
          }
</pre>
<center><a href="PipedInputStream.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="PipedReader.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>