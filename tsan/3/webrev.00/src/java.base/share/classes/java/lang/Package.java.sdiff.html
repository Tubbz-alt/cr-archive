<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/Package.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="OutOfMemoryError.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Process.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/Package.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 91  * &lt;li&gt;The specification and implementation titles, versions, and vendors
 92  *     are unspecified.&lt;/li&gt;
 93  * &lt;li&gt;Any annotations on the package are read from {@code package-info.class}
 94  *     as specified above.&lt;/li&gt;
 95  * &lt;/ul&gt;
 96  *
 97  * &lt;p&gt;
 98  * A {@code Package} can be obtained with the {@link Package#getPackage
 99  * Package.getPackage(String)} and {@link ClassLoader#getDefinedPackage
100  * ClassLoader.getDefinedPackage(String)} methods.
101  * Every {@code Package} defined by a class loader can be obtained
102  * with the {@link Package#getPackages Package.getPackages()} and
103  * {@link ClassLoader#getDefinedPackages} methods.
104  *
105  * @implNote
106  * The &lt;a href=&quot;ClassLoader.html#builtinLoaders&quot;&gt;builtin class loaders&lt;/a&gt;
107  * do not explicitly define {@code Package} objects for packages in
108  * &lt;em&gt;named modules&lt;/em&gt;.  Instead those packages are automatically defined
109  * and have no specification and implementation versioning information.
110  *
<span class="line-modified">111  * @jvms 5.3 Run-time package</span>
112  * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#package-sealing&quot;&gt;
113  * The JAR File Specification: Package Sealing&lt;/a&gt;
114  * @see ClassLoader#definePackage(String, String, String, String, String, String, String, URL)
115  *
116  * @since 1.2
117  * @revised 9
118  * @spec JPMS
119  */
120 public class Package extends NamedPackage implements java.lang.reflect.AnnotatedElement {
121     /**
122      * Return the name of this package.
123      *
124      * @return  The fully-qualified name of this package as defined in section 6.5.3 of
125      *          &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;,
126      *          for example, {@code java.lang}
127      */
128     public String getName() {
129         return packageName();
130     }
131 
</pre>
<hr />
<pre>
216      * @revised 9
217      * @spec JPMS
218      */
219     public String getImplementationVendor() {
220         return versionInfo.implVendor;
221     }
222 
223     /**
224      * Returns true if this package is sealed.
225      *
226      * @return true if the package is sealed, false otherwise
227      */
228     public boolean isSealed() {
229         return module().isNamed() || versionInfo.sealBase != null;
230     }
231 
232     /**
233      * Returns true if this package is sealed with respect to the specified
234      * code source {@code url}.
235      *
<span class="line-modified">236      * @param url the code source URL</span>
237      * @return true if this package is sealed with respect to the given {@code url}
238      */
239     public boolean isSealed(URL url) {
240         Objects.requireNonNull(url);
241 
242         URL sealBase = null;
243         if (versionInfo != VersionInfo.NULL_VERSION_INFO) {
244             sealBase = versionInfo.sealBase;
245         } else {
246             try {
247                 URI uri = location();
248                 sealBase = uri != null ? uri.toURL() : null;
249             } catch (MalformedURLException e) {
250             }
251         }
252         return url.equals(sealBase);
253     }
254 
255     /**
256      * Compare this package&#39;s specification version with a
257      * desired version. It returns true if
258      * this packages specification version number is greater than or equal
259      * to the desired version number. &lt;p&gt;
260      *
261      * Version numbers are compared by sequentially comparing corresponding
262      * components of the desired and specification strings.
263      * Each component is converted as a decimal integer and the values
264      * compared.
265      * If the specification value is greater than the desired
266      * value true is returned. If the value is less false is returned.
267      * If the values are equal the period is skipped and the next pair of
268      * components is compared.
269      *
<span class="line-modified">270      * @param desired the version string of the desired version.</span>
271      * @return true if this package&#39;s version number is greater
<span class="line-modified">272      *          than or equal to the desired version number</span>
273      *
<span class="line-modified">274      * @exception NumberFormatException if the current version is not known or</span>
<span class="line-modified">275      *          the desired or current version is not of the correct dotted form.</span>
276      */
277     public boolean isCompatibleWith(String desired)
278         throws NumberFormatException
279     {
280         if (versionInfo.specVersion == null || versionInfo.specVersion.length() &lt; 1) {
281             throw new NumberFormatException(&quot;Empty version string&quot;);
282         }
283 
284         String [] sa = versionInfo.specVersion.split(&quot;\\.&quot;, -1);
285         int [] si = new int[sa.length];
286         for (int i = 0; i &lt; sa.length; i++) {
287             si[i] = Integer.parseInt(sa[i]);
288             if (si[i] &lt; 0)
289                 throw NumberFormatException.forInputString(&quot;&quot; + si[i], 10);
290         }
291 
292         String [] da = desired.split(&quot;\\.&quot;, -1);
293         int [] di = new int[da.length];
294         for (int i = 0; i &lt; da.length; i++) {
295             di[i] = Integer.parseInt(da[i]);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 91  * &lt;li&gt;The specification and implementation titles, versions, and vendors
 92  *     are unspecified.&lt;/li&gt;
 93  * &lt;li&gt;Any annotations on the package are read from {@code package-info.class}
 94  *     as specified above.&lt;/li&gt;
 95  * &lt;/ul&gt;
 96  *
 97  * &lt;p&gt;
 98  * A {@code Package} can be obtained with the {@link Package#getPackage
 99  * Package.getPackage(String)} and {@link ClassLoader#getDefinedPackage
100  * ClassLoader.getDefinedPackage(String)} methods.
101  * Every {@code Package} defined by a class loader can be obtained
102  * with the {@link Package#getPackages Package.getPackages()} and
103  * {@link ClassLoader#getDefinedPackages} methods.
104  *
105  * @implNote
106  * The &lt;a href=&quot;ClassLoader.html#builtinLoaders&quot;&gt;builtin class loaders&lt;/a&gt;
107  * do not explicitly define {@code Package} objects for packages in
108  * &lt;em&gt;named modules&lt;/em&gt;.  Instead those packages are automatically defined
109  * and have no specification and implementation versioning information.
110  *
<span class="line-modified">111  * @jvms 5.3 Creation and Loading</span>
112  * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#package-sealing&quot;&gt;
113  * The JAR File Specification: Package Sealing&lt;/a&gt;
114  * @see ClassLoader#definePackage(String, String, String, String, String, String, String, URL)
115  *
116  * @since 1.2
117  * @revised 9
118  * @spec JPMS
119  */
120 public class Package extends NamedPackage implements java.lang.reflect.AnnotatedElement {
121     /**
122      * Return the name of this package.
123      *
124      * @return  The fully-qualified name of this package as defined in section 6.5.3 of
125      *          &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;,
126      *          for example, {@code java.lang}
127      */
128     public String getName() {
129         return packageName();
130     }
131 
</pre>
<hr />
<pre>
216      * @revised 9
217      * @spec JPMS
218      */
219     public String getImplementationVendor() {
220         return versionInfo.implVendor;
221     }
222 
223     /**
224      * Returns true if this package is sealed.
225      *
226      * @return true if the package is sealed, false otherwise
227      */
228     public boolean isSealed() {
229         return module().isNamed() || versionInfo.sealBase != null;
230     }
231 
232     /**
233      * Returns true if this package is sealed with respect to the specified
234      * code source {@code url}.
235      *
<span class="line-modified">236      * @param  url the code source URL</span>
237      * @return true if this package is sealed with respect to the given {@code url}
238      */
239     public boolean isSealed(URL url) {
240         Objects.requireNonNull(url);
241 
242         URL sealBase = null;
243         if (versionInfo != VersionInfo.NULL_VERSION_INFO) {
244             sealBase = versionInfo.sealBase;
245         } else {
246             try {
247                 URI uri = location();
248                 sealBase = uri != null ? uri.toURL() : null;
249             } catch (MalformedURLException e) {
250             }
251         }
252         return url.equals(sealBase);
253     }
254 
255     /**
256      * Compare this package&#39;s specification version with a
257      * desired version. It returns true if
258      * this packages specification version number is greater than or equal
259      * to the desired version number. &lt;p&gt;
260      *
261      * Version numbers are compared by sequentially comparing corresponding
262      * components of the desired and specification strings.
263      * Each component is converted as a decimal integer and the values
264      * compared.
265      * If the specification value is greater than the desired
266      * value true is returned. If the value is less false is returned.
267      * If the values are equal the period is skipped and the next pair of
268      * components is compared.
269      *
<span class="line-modified">270      * @param  desired the version string of the desired version.</span>
271      * @return true if this package&#39;s version number is greater
<span class="line-modified">272      *         than or equal to the desired version number</span>
273      *
<span class="line-modified">274      * @throws NumberFormatException if the current version is not known or</span>
<span class="line-modified">275      *         the desired or current version is not of the correct dotted form.</span>
276      */
277     public boolean isCompatibleWith(String desired)
278         throws NumberFormatException
279     {
280         if (versionInfo.specVersion == null || versionInfo.specVersion.length() &lt; 1) {
281             throw new NumberFormatException(&quot;Empty version string&quot;);
282         }
283 
284         String [] sa = versionInfo.specVersion.split(&quot;\\.&quot;, -1);
285         int [] si = new int[sa.length];
286         for (int i = 0; i &lt; sa.length; i++) {
287             si[i] = Integer.parseInt(sa[i]);
288             if (si[i] &lt; 0)
289                 throw NumberFormatException.forInputString(&quot;&quot; + si[i], 10);
290         }
291 
292         String [] da = desired.split(&quot;\\.&quot;, -1);
293         int [] di = new int[da.length];
294         for (int i = 0; i &lt; da.length; i++) {
295             di[i] = Integer.parseInt(da[i]);
</pre>
</td>
</tr>
</table>
<center><a href="OutOfMemoryError.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Process.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>