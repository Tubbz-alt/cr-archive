<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/java.base/share/classes/java/lang/doc-files/ValueBased.html</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 &lt;!doctype html&gt;
 2 &lt;!--
 3  Copyright (c) 2013, 2020, Oracle and/or its affiliates. All rights reserved.
 4  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 5 
 6  This code is free software; you can redistribute it and/or modify it
 7  under the terms of the GNU General Public License version 2 only, as
 8  published by the Free Software Foundation.  Oracle designates this
 9  particular file as subject to the &quot;Classpath&quot; exception as provided
10  by Oracle in the LICENSE file that accompanied this code.
11 
12  This code is distributed in the hope that it will be useful, but WITHOUT
13  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
14  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
15  version 2 for more details (a copy is included in the LICENSE file that
16  accompanied this code).
17 
18  You should have received a copy of the GNU General Public License version
19  2 along with this work; if not, write to the Free Software Foundation,
20  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
21 
22  Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
23  or visit www.oracle.com if you need additional information or have any
24  questions.
25 --&gt;
26 &lt;html lang=&quot;en&quot;&gt;
27 &lt;head&gt;
28   &lt;title&gt;Value-based Classes&lt;/title&gt;
29   &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../../../../stylesheet.css&quot; title=&quot;Style&quot;&gt;
30 &lt;/head&gt;
31 &lt;body&gt;
32 &lt;h1 id=&quot;ValueBased&quot;&gt;{@index &quot;Value-based Classes&quot;}&lt;/h1&gt;
33 
34 Some classes, such as &lt;code&gt;java.util.Optional&lt;/code&gt; and
35 &lt;code&gt;java.time.LocalDateTime&lt;/code&gt;, are &lt;em&gt;value-based&lt;/em&gt;.  Instances of a
36 value-based class:
37 &lt;ul&gt;
38     &lt;li&gt;are final and immutable (though may contain references to mutable
39         objects);&lt;/li&gt;
40     &lt;li&gt;have implementations of &lt;code&gt;equals&lt;/code&gt;,
41         &lt;code&gt;hashCode&lt;/code&gt;, and &lt;code&gt;toString&lt;/code&gt; which are computed
42         solely from the instance&#39;s state and not from its identity or the state
43         of any other object or variable;&lt;/li&gt;
44     &lt;li&gt;make no use of identity-sensitive operations such as reference
45         equality (&lt;code&gt;==&lt;/code&gt;) between instances, identity hash code of
46         instances, or synchronization on an instances&#39;s intrinsic lock;&lt;/li&gt;
47     &lt;li&gt;are considered equal solely based on &lt;code&gt;equals()&lt;/code&gt;, not
48         based on reference equality (&lt;code&gt;==&lt;/code&gt;);&lt;/li&gt;
49     &lt;li&gt;do not have accessible constructors, but are instead instantiated
50         through factory methods which make no commitment as to the identity
51         of returned instances;&lt;/li&gt;
52     &lt;li&gt;are &lt;em&gt;freely substitutable&lt;/em&gt; when equal, meaning that interchanging
53         any two instances &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; that are equal
54         according to &lt;code&gt;equals()&lt;/code&gt; in any computation or method
55         invocation should produce no visible change in behavior.
56     &lt;/li&gt;
57 &lt;/ul&gt;
58 
59 &lt;p&gt;A program may produce unpredictable results if it attempts to distinguish two
60     references to equal values of a value-based class, whether directly via reference
61     equality or indirectly via an appeal to synchronization, identity hashing,
62     serialization, or any other identity-sensitive mechanism.  Use of such
63     identity-sensitive operations on instances of value-based classes may have
64     unpredictable effects and should be avoided.&lt;/p&gt;
65 &lt;/body&gt;
66 &lt;/html&gt;
    </pre>
  </body>
</html>