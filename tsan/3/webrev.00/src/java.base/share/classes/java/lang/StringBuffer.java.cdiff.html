<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/lang/StringBuffer.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="String.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="StringBuilder.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/StringBuffer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 113,10 ***</span>
<span class="line-new-header">--- 113,11 ---</span>
       * whenever the StringBuffer is modified.
       */
      private transient String toStringCache;
  
      /** use serialVersionUID from JDK 1.0.2 for interoperability */
<span class="line-added">+     @java.io.Serial</span>
      static final long serialVersionUID = 3388685877147921107L;
  
      /**
       * Constructs a string buffer with no characters in it and an
       * initial capacity of 16 characters.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,12 ***</span>
       *
       * @param   str   the initial contents of the buffer.
       */
      @HotSpotIntrinsicCandidate
      public StringBuffer(String str) {
<span class="line-modified">!         super(str.coder(), str.length(), 16);</span>
<span class="line-removed">-         append(str);</span>
      }
  
      /**
       * Constructs a string buffer that contains the same characters
       * as the specified {@code CharSequence}. The initial capacity of
<span class="line-new-header">--- 147,11 ---</span>
       *
       * @param   str   the initial contents of the buffer.
       */
      @HotSpotIntrinsicCandidate
      public StringBuffer(String str) {
<span class="line-modified">!         super(str);</span>
      }
  
      /**
       * Constructs a string buffer that contains the same characters
       * as the specified {@code CharSequence}. The initial capacity of
</pre>
<hr />
<pre>
<span class="line-old-header">*** 160,12 ***</span>
       *
       * @param      seq   the sequence to copy.
       * @since 1.5
       */
      public StringBuffer(CharSequence seq) {
<span class="line-modified">!         super(String.LATIN1, seq.length(), 16);</span>
<span class="line-removed">-         append(seq);</span>
      }
  
      /**
       * Compares two {@code StringBuffer} instances lexicographically. This method
       * follows the same rules for lexicographical comparison as defined in the
<span class="line-new-header">--- 160,11 ---</span>
       *
       * @param      seq   the sequence to copy.
       * @since 1.5
       */
      public StringBuffer(CharSequence seq) {
<span class="line-modified">!         super(seq);</span>
      }
  
      /**
       * Compares two {@code StringBuffer} instances lexicographically. This method
       * follows the same rules for lexicographical comparison as defined in the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 723,10 ***</span>
<span class="line-new-header">--- 722,11 ---</span>
       *              The number of characters in this StringBuffer.
       * @serialField shared  boolean
       *              A flag indicating whether the backing array is shared.
       *              The value is ignored upon deserialization.
       */
<span class="line-added">+     @java.io.Serial</span>
      private static final java.io.ObjectStreamField[] serialPersistentFields =
      {
          new java.io.ObjectStreamField(&quot;value&quot;, char[].class),
          new java.io.ObjectStreamField(&quot;count&quot;, Integer.TYPE),
          new java.io.ObjectStreamField(&quot;shared&quot;, Boolean.TYPE),
</pre>
<hr />
<pre>
<span class="line-old-header">*** 734,10 ***</span>
<span class="line-new-header">--- 734,11 ---</span>
  
      /**
       * readObject is called to restore the state of the StringBuffer from
       * a stream.
       */
<span class="line-added">+     @java.io.Serial</span>
      private synchronized void writeObject(java.io.ObjectOutputStream s)
          throws java.io.IOException {
          java.io.ObjectOutputStream.PutField fields = s.putFields();
          char[] val = new char[capacity()];
          if (isLatin1()) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 753,10 ***</span>
<span class="line-new-header">--- 754,11 ---</span>
  
      /**
       * readObject is called to restore the state of the StringBuffer from
       * a stream.
       */
<span class="line-added">+     @java.io.Serial</span>
      private void readObject(java.io.ObjectInputStream s)
          throws java.io.IOException, ClassNotFoundException {
          java.io.ObjectInputStream.GetField fields = s.readFields();
          char[] val = (char[])fields.get(&quot;value&quot;, null);
          initBytes(val, 0, val.length);
</pre>
<center><a href="String.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="StringBuilder.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>