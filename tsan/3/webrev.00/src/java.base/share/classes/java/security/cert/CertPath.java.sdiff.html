<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/security/cert/CertPath.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CRLException.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="CertPathBuilderException.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/security/cert/CertPath.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
102  * All {@code CertPath} objects must be thread-safe. That is, multiple
103  * threads may concurrently invoke the methods defined in this class on a
104  * single {@code CertPath} object (or more than one) with no
105  * ill effects. This is also true for the {@code List} returned by
106  * {@code CertPath.getCertificates}.
107  * &lt;p&gt;
108  * Requiring {@code CertPath} objects to be immutable and thread-safe
109  * allows them to be passed around to various pieces of code without worrying
110  * about coordinating access.  Providing this thread-safety is
111  * generally not difficult, since the {@code CertPath} and
112  * {@code List} objects in question are immutable.
113  *
114  * @see CertificateFactory
115  * @see CertPathBuilder
116  *
117  * @author      Yassir Elley
118  * @since       1.4
119  */
120 public abstract class CertPath implements Serializable {
121 

122     private static final long serialVersionUID = 6068470306649138683L;
123 
124     private String type;        // the type of certificates in this chain
125 
126     /**
127      * Creates a {@code CertPath} of the specified type.
128      * &lt;p&gt;
129      * This constructor is protected because most users should use a
130      * {@code CertificateFactory} to create {@code CertPath}s.
131      *
132      * @param type the standard name of the type of
133      * {@code Certificate}s in this path
134      */
135     protected CertPath(String type) {
136         this.type = type;
137     }
138 
139     /**
140      * Returns the type of {@code Certificate}s in this certification
141      * path. This is the same string that would be returned by
</pre>
<hr />
<pre>
230         int i = 1;
231         while (stringIterator.hasNext()) {
232             sb.append(&quot;==========================================&quot;
233                 + &quot;===============Certificate &quot; + i + &quot; start.\n&quot;);
234             Certificate stringCert = stringIterator.next();
235             sb.append(stringCert.toString());
236             sb.append(&quot;\n========================================&quot;
237                 + &quot;=================Certificate &quot; + i + &quot; end.\n\n\n&quot;);
238             i++;
239         }
240 
241         sb.append(&quot;\n]&quot;);
242         return sb.toString();
243     }
244 
245     /**
246      * Returns the encoded form of this certification path, using the default
247      * encoding.
248      *
249      * @return the encoded bytes
<span class="line-modified">250      * @exception CertificateEncodingException if an encoding error occurs</span>
251      */
252     public abstract byte[] getEncoded()
253         throws CertificateEncodingException;
254 
255     /**
256      * Returns the encoded form of this certification path, using the
257      * specified encoding.
258      *
259      * @param encoding the name of the encoding to use
260      * @return the encoded bytes
<span class="line-modified">261      * @exception CertificateEncodingException if an encoding error occurs or</span>
262      *   the encoding requested is not supported
263      */
264     public abstract byte[] getEncoded(String encoding)
265         throws CertificateEncodingException;
266 
267     /**
268      * Returns the list of certificates in this certification path.
269      * The {@code List} returned must be immutable and thread-safe.
270      *
271      * @return an immutable {@code List} of {@code Certificate}s
272      *         (may be empty, but not null)
273      */
274     public abstract List&lt;? extends Certificate&gt; getCertificates();
275 
276     /**
277      * Replaces the {@code CertPath} to be serialized with a
278      * {@code CertPathRep} object.
279      *
280      * @return the {@code CertPathRep} to be serialized
281      *
282      * @throws ObjectStreamException if a {@code CertPathRep} object
283      * representing this certification path could not be created
284      */

285     protected Object writeReplace() throws ObjectStreamException {
286         try {
287             return new CertPathRep(type, getEncoded());
288         } catch (CertificateException ce) {
289             NotSerializableException nse =
290                 new NotSerializableException
291                     (&quot;java.security.cert.CertPath: &quot; + type);
292             nse.initCause(ce);
293             throw nse;
294         }
295     }
296 
297     /**
298      * Alternate {@code CertPath} class for serialization.
299      * @since 1.4
300      */
301     protected static class CertPathRep implements Serializable {
302 

303         private static final long serialVersionUID = 3015633072427920915L;
304 
305         /** The Certificate type */
306         private String type;
307         /** The encoded form of the cert path */
308         private byte[] data;
309 
310         /**
311          * Creates a {@code CertPathRep} with the specified
312          * type and encoded form of a certification path.
313          *
314          * @param type the standard name of a {@code CertPath} type
315          * @param data the encoded form of the certification path
316          */
317         protected CertPathRep(String type, byte[] data) {
318             this.type = type;
319             this.data = data;
320         }
321 
322         /**
323          * Returns a {@code CertPath} constructed from the type and data.
324          *
325          * @return the resolved {@code CertPath} object
326          *
327          * @throws ObjectStreamException if a {@code CertPath} could not
328          * be constructed
329          */

330         protected Object readResolve() throws ObjectStreamException {
331             try {
332                 CertificateFactory cf = CertificateFactory.getInstance(type);
333                 return cf.generateCertPath(new ByteArrayInputStream(data));
334             } catch (CertificateException ce) {
335                 NotSerializableException nse =
336                     new NotSerializableException
337                         (&quot;java.security.cert.CertPath: &quot; + type);
338                 nse.initCause(ce);
339                 throw nse;
340             }
341         }
342     }
343 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
102  * All {@code CertPath} objects must be thread-safe. That is, multiple
103  * threads may concurrently invoke the methods defined in this class on a
104  * single {@code CertPath} object (or more than one) with no
105  * ill effects. This is also true for the {@code List} returned by
106  * {@code CertPath.getCertificates}.
107  * &lt;p&gt;
108  * Requiring {@code CertPath} objects to be immutable and thread-safe
109  * allows them to be passed around to various pieces of code without worrying
110  * about coordinating access.  Providing this thread-safety is
111  * generally not difficult, since the {@code CertPath} and
112  * {@code List} objects in question are immutable.
113  *
114  * @see CertificateFactory
115  * @see CertPathBuilder
116  *
117  * @author      Yassir Elley
118  * @since       1.4
119  */
120 public abstract class CertPath implements Serializable {
121 
<span class="line-added">122     @java.io.Serial</span>
123     private static final long serialVersionUID = 6068470306649138683L;
124 
125     private String type;        // the type of certificates in this chain
126 
127     /**
128      * Creates a {@code CertPath} of the specified type.
129      * &lt;p&gt;
130      * This constructor is protected because most users should use a
131      * {@code CertificateFactory} to create {@code CertPath}s.
132      *
133      * @param type the standard name of the type of
134      * {@code Certificate}s in this path
135      */
136     protected CertPath(String type) {
137         this.type = type;
138     }
139 
140     /**
141      * Returns the type of {@code Certificate}s in this certification
142      * path. This is the same string that would be returned by
</pre>
<hr />
<pre>
231         int i = 1;
232         while (stringIterator.hasNext()) {
233             sb.append(&quot;==========================================&quot;
234                 + &quot;===============Certificate &quot; + i + &quot; start.\n&quot;);
235             Certificate stringCert = stringIterator.next();
236             sb.append(stringCert.toString());
237             sb.append(&quot;\n========================================&quot;
238                 + &quot;=================Certificate &quot; + i + &quot; end.\n\n\n&quot;);
239             i++;
240         }
241 
242         sb.append(&quot;\n]&quot;);
243         return sb.toString();
244     }
245 
246     /**
247      * Returns the encoded form of this certification path, using the default
248      * encoding.
249      *
250      * @return the encoded bytes
<span class="line-modified">251      * @throws    CertificateEncodingException if an encoding error occurs</span>
252      */
253     public abstract byte[] getEncoded()
254         throws CertificateEncodingException;
255 
256     /**
257      * Returns the encoded form of this certification path, using the
258      * specified encoding.
259      *
260      * @param encoding the name of the encoding to use
261      * @return the encoded bytes
<span class="line-modified">262      * @throws    CertificateEncodingException if an encoding error occurs or</span>
263      *   the encoding requested is not supported
264      */
265     public abstract byte[] getEncoded(String encoding)
266         throws CertificateEncodingException;
267 
268     /**
269      * Returns the list of certificates in this certification path.
270      * The {@code List} returned must be immutable and thread-safe.
271      *
272      * @return an immutable {@code List} of {@code Certificate}s
273      *         (may be empty, but not null)
274      */
275     public abstract List&lt;? extends Certificate&gt; getCertificates();
276 
277     /**
278      * Replaces the {@code CertPath} to be serialized with a
279      * {@code CertPathRep} object.
280      *
281      * @return the {@code CertPathRep} to be serialized
282      *
283      * @throws ObjectStreamException if a {@code CertPathRep} object
284      * representing this certification path could not be created
285      */
<span class="line-added">286     @java.io.Serial</span>
287     protected Object writeReplace() throws ObjectStreamException {
288         try {
289             return new CertPathRep(type, getEncoded());
290         } catch (CertificateException ce) {
291             NotSerializableException nse =
292                 new NotSerializableException
293                     (&quot;java.security.cert.CertPath: &quot; + type);
294             nse.initCause(ce);
295             throw nse;
296         }
297     }
298 
299     /**
300      * Alternate {@code CertPath} class for serialization.
301      * @since 1.4
302      */
303     protected static class CertPathRep implements Serializable {
304 
<span class="line-added">305         @java.io.Serial</span>
306         private static final long serialVersionUID = 3015633072427920915L;
307 
308         /** The Certificate type */
309         private String type;
310         /** The encoded form of the cert path */
311         private byte[] data;
312 
313         /**
314          * Creates a {@code CertPathRep} with the specified
315          * type and encoded form of a certification path.
316          *
317          * @param type the standard name of a {@code CertPath} type
318          * @param data the encoded form of the certification path
319          */
320         protected CertPathRep(String type, byte[] data) {
321             this.type = type;
322             this.data = data;
323         }
324 
325         /**
326          * Returns a {@code CertPath} constructed from the type and data.
327          *
328          * @return the resolved {@code CertPath} object
329          *
330          * @throws ObjectStreamException if a {@code CertPath} could not
331          * be constructed
332          */
<span class="line-added">333         @java.io.Serial</span>
334         protected Object readResolve() throws ObjectStreamException {
335             try {
336                 CertificateFactory cf = CertificateFactory.getInstance(type);
337                 return cf.generateCertPath(new ByteArrayInputStream(data));
338             } catch (CertificateException ce) {
339                 NotSerializableException nse =
340                     new NotSerializableException
341                         (&quot;java.security.cert.CertPath: &quot; + type);
342                 nse.initCause(ce);
343                 throw nse;
344             }
345         }
346     }
347 }
</pre>
</td>
</tr>
</table>
<center><a href="CRLException.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="CertPathBuilderException.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>