<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/net/Inet6Address.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="Inet4Address.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Inet6AddressImpl.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/net/Inet6Address.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 36,11 ***</span>
  /**
   * This class represents an Internet Protocol version 6 (IPv6) address.
   * Defined by &lt;a href=&quot;http://www.ietf.org/rfc/rfc2373.txt&quot;&gt;
   * &lt;i&gt;RFC&amp;nbsp;2373: IP Version 6 Addressing Architecture&lt;/i&gt;&lt;/a&gt;.
   *
<span class="line-modified">!  * &lt;h3&gt; &lt;a id=&quot;format&quot;&gt;Textual representation of IP addresses&lt;/a&gt; &lt;/h3&gt;</span>
   *
   * Textual representation of IPv6 address used as input to methods
   * takes one of the following forms:
   *
   * &lt;ol&gt;
<span class="line-new-header">--- 36,11 ---</span>
  /**
   * This class represents an Internet Protocol version 6 (IPv6) address.
   * Defined by &lt;a href=&quot;http://www.ietf.org/rfc/rfc2373.txt&quot;&gt;
   * &lt;i&gt;RFC&amp;nbsp;2373: IP Version 6 Addressing Architecture&lt;/i&gt;&lt;/a&gt;.
   *
<span class="line-modified">!  * &lt;h2&gt; &lt;a id=&quot;format&quot;&gt;Textual representation of IP addresses&lt;/a&gt; &lt;/h2&gt;</span>
   *
   * Textual representation of IPv6 address used as input to methods
   * takes one of the following forms:
   *
   * &lt;ol&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 114,11 ***</span>
   * &lt;p&gt; For methods that return a textual representation as output
   * value, the full form is used. Inet6Address will return the full
   * form because it is unambiguous when used in combination with other
   * textual data.
   *
<span class="line-modified">!  * &lt;h4&gt; Special IPv6 address &lt;/h4&gt;</span>
   *
   * &lt;blockquote&gt;
   * &lt;table class=&quot;borderless&quot;&gt;
   * &lt;caption style=&quot;display:none&quot;&gt;Description of IPv4-mapped address&lt;/caption&gt;
   * &lt;tr&gt;&lt;th style=&quot;vertical-align:top; padding-right:2px&quot;&gt;&lt;i&gt;IPv4-mapped address&lt;/i&gt;&lt;/th&gt;
<span class="line-new-header">--- 114,11 ---</span>
   * &lt;p&gt; For methods that return a textual representation as output
   * value, the full form is used. Inet6Address will return the full
   * form because it is unambiguous when used in combination with other
   * textual data.
   *
<span class="line-modified">!  * &lt;h3&gt; Special IPv6 address &lt;/h3&gt;</span>
   *
   * &lt;blockquote&gt;
   * &lt;table class=&quot;borderless&quot;&gt;
   * &lt;caption style=&quot;display:none&quot;&gt;Description of IPv4-mapped address&lt;/caption&gt;
   * &lt;tr&gt;&lt;th style=&quot;vertical-align:top; padding-right:2px&quot;&gt;&lt;i&gt;IPv4-mapped address&lt;/i&gt;&lt;/th&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 133,11 ***</span>
   *         IPv4-mapped address as input, both in byte array and text
   *         representation. However, it will be converted into an IPv4
   *         address.&lt;/td&gt;&lt;/tr&gt;
   * &lt;/table&gt;&lt;/blockquote&gt;
   *
<span class="line-modified">!  * &lt;h4&gt;&lt;a id=&quot;scoped&quot;&gt;Textual representation of IPv6 scoped addresses&lt;/a&gt;&lt;/h4&gt;</span>
   *
   * &lt;p&gt; The textual representation of IPv6 addresses as described above can be
   * extended to specify IPv6 scoped addresses. This extension to the basic
   * addressing architecture is described in [draft-ietf-ipngwg-scoping-arch-04.txt].
   *
<span class="line-new-header">--- 133,11 ---</span>
   *         IPv4-mapped address as input, both in byte array and text
   *         representation. However, it will be converted into an IPv4
   *         address.&lt;/td&gt;&lt;/tr&gt;
   * &lt;/table&gt;&lt;/blockquote&gt;
   *
<span class="line-modified">!  * &lt;h3&gt;&lt;a id=&quot;scoped&quot;&gt;Textual representation of IPv6 scoped addresses&lt;/a&gt;&lt;/h3&gt;</span>
   *
   * &lt;p&gt; The textual representation of IPv6 addresses as described above can be
   * extended to specify IPv6 scoped addresses. This extension to the basic
   * addressing architecture is described in [draft-ietf-ipngwg-scoping-arch-04.txt].
   *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 174,15 ***</span>
  
  public final
  class Inet6Address extends InetAddress {
      static final int INADDRSZ = 16;
  
<span class="line-removed">-     /*</span>
<span class="line-removed">-      * cached scope_id - for link-local address use only.</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     private transient int cached_scope_id;  // 0</span>
<span class="line-removed">- </span>
      private class Inet6AddressHolder {
  
          private Inet6AddressHolder() {
              ipaddress = new byte[INADDRSZ];
          }
<span class="line-new-header">--- 174,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 366,10 ***</span>
<span class="line-new-header">--- 361,11 ---</span>
          }
      }
  
      private final transient Inet6AddressHolder holder6;
  
<span class="line-added">+     @java.io.Serial</span>
      private static final long serialVersionUID = 6880410070516793377L;
  
      // Perform native initialization
      static { init(); }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 565,11 ***</span>
       * @serialField scope_id int
       * @serialField scope_id_set boolean
       * @serialField scope_ifname_set boolean
       * @serialField ifname String
       */
<span class="line-modified">! </span>
      private static final ObjectStreamField[] serialPersistentFields = {
           new ObjectStreamField(&quot;ipaddress&quot;, byte[].class),
           new ObjectStreamField(&quot;scope_id&quot;, int.class),
           new ObjectStreamField(&quot;scope_id_set&quot;, boolean.class),
           new ObjectStreamField(&quot;scope_ifname_set&quot;, boolean.class),
<span class="line-new-header">--- 561,11 ---</span>
       * @serialField scope_id int
       * @serialField scope_id_set boolean
       * @serialField scope_ifname_set boolean
       * @serialField ifname String
       */
<span class="line-modified">!     @java.io.Serial</span>
      private static final ObjectStreamField[] serialPersistentFields = {
           new ObjectStreamField(&quot;ipaddress&quot;, byte[].class),
           new ObjectStreamField(&quot;scope_id&quot;, int.class),
           new ObjectStreamField(&quot;scope_id_set&quot;, boolean.class),
           new ObjectStreamField(&quot;scope_ifname_set&quot;, boolean.class),
</pre>
<hr />
<pre>
<span class="line-old-header">*** 584,10 ***</span>
<span class="line-new-header">--- 580,11 ---</span>
      /**
       * restore the state of this object from stream
       * including the scope information, only if the
       * scoped interface name is valid on this system
       */
<span class="line-added">+     @java.io.Serial</span>
      private void readObject(ObjectInputStream s)
          throws IOException, ClassNotFoundException {
          NetworkInterface scope_ifname = null;
  
          if (getClass().getClassLoader() != null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 647,10 ***</span>
<span class="line-new-header">--- 644,11 ---</span>
      /**
       * default behavior is overridden in order to write the
       * scope_ifname field as a String, rather than a NetworkInterface
       * which is not serializable
       */
<span class="line-added">+     @java.io.Serial</span>
      private synchronized void writeObject(ObjectOutputStream s)
          throws IOException
      {
              String ifname = null;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 793,10 ***</span>
<span class="line-new-header">--- 791,11 ---</span>
       */
      @Override
      public boolean isMCOrgLocal() {
          return holder6.isMCOrgLocal();
      }
<span class="line-added">+ </span>
      /**
       * Returns the raw IP address of this {@code InetAddress} object. The result
       * is in network byte order: the highest order byte of the address is in
       * {@code getAddress()[0]}.
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 805,31 ***</span>
      @Override
      public byte[] getAddress() {
          return holder6.ipaddress.clone();
      }
  
      /**
       * Returns the numeric scopeId, if this instance is associated with
       * an interface. If no scoped_id is set, the returned value is zero.
       *
       * @return the scopeId, or zero if not set.
       *
       * @since 1.5
       */
       public int getScopeId() {
<span class="line-modified">!         return holder6.scope_id;</span>
       }
  
      /**
       * Returns the scoped interface, if this instance was created with
       * a scoped interface.
       *
       * @return the scoped interface, or null if not set.
       * @since 1.5
       */
       public NetworkInterface getScopedInterface() {
<span class="line-modified">!         return holder6.scope_ifname;</span>
       }
  
      /**
       * Returns the IP address string in textual presentation. If the instance
       * was created specifying a scope identifier then the scope id is appended
<span class="line-new-header">--- 804,38 ---</span>
      @Override
      public byte[] getAddress() {
          return holder6.ipaddress.clone();
      }
  
<span class="line-added">+     /**</span>
<span class="line-added">+      * Returns a reference to the byte[] with the IPv6 address.</span>
<span class="line-added">+      */</span>
<span class="line-added">+     byte[] addressBytes() {</span>
<span class="line-added">+         return holder6.ipaddress;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      /**
       * Returns the numeric scopeId, if this instance is associated with
       * an interface. If no scoped_id is set, the returned value is zero.
       *
       * @return the scopeId, or zero if not set.
       *
       * @since 1.5
       */
       public int getScopeId() {
<span class="line-modified">!          return holder6.scope_id;</span>
       }
  
      /**
       * Returns the scoped interface, if this instance was created with
       * a scoped interface.
       *
       * @return the scoped interface, or null if not set.
       * @since 1.5
       */
       public NetworkInterface getScopedInterface() {
<span class="line-modified">!          return holder6.scope_ifname;</span>
       }
  
      /**
       * Returns the IP address string in textual presentation. If the instance
       * was created specifying a scope identifier then the scope id is appended
</pre>
<center><a href="Inet4Address.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="Inet6AddressImpl.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>