<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/net/DatagramPacket.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="ContentHandler.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="DatagramSocket.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/net/DatagramPacket.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1995, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1995, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 33,10 ***</span>
<span class="line-new-header">--- 33,20 ---</span>
   * another based solely on information contained within that packet.
   * Multiple packets sent from one machine to another might be routed
   * differently, and might arrive in any order. Packet delivery is
   * not guaranteed.
   *
<span class="line-added">+  * &lt;p&gt;</span>
<span class="line-added">+  * Unless otherwise specified, passing a {@code null} argument causes</span>
<span class="line-added">+  * a {@link NullPointerException NullPointerException} to be thrown.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * &lt;p&gt;</span>
<span class="line-added">+  * Methods and constructors of {@code DatagramPacket} accept parameters</span>
<span class="line-added">+  * of type {@link SocketAddress}. {@code DatagramPacket} supports</span>
<span class="line-added">+  * {@link InetSocketAddress}, and may support additional {@code SocketAddress}</span>
<span class="line-added">+  * sub-types.</span>
<span class="line-added">+  *</span>
   * @author  Pavani Diwanji
   * @author  Benjamin Renaud
   * @since   1.0
   */
  public final
</pre>
<hr />
<pre>
<span class="line-old-header">*** 44,17 ***</span>
  
      /**
       * Perform class initialization
       */
      static {
<span class="line-modified">!         java.security.AccessController.doPrivileged(</span>
<span class="line-removed">-             new java.security.PrivilegedAction&lt;&gt;() {</span>
<span class="line-removed">-                 public Void run() {</span>
<span class="line-removed">-                     System.loadLibrary(&quot;net&quot;);</span>
<span class="line-removed">-                     return null;</span>
<span class="line-removed">-                 }</span>
<span class="line-removed">-             });</span>
          init();
      }
  
      /*
       * The fields of this class are package-private since DatagramSocketImpl
<span class="line-new-header">--- 54,11 ---</span>
  
      /**
       * Perform class initialization
       */
      static {
<span class="line-modified">!         jdk.internal.loader.BootLoader.loadLibrary(&quot;net&quot;);</span>
          init();
      }
  
      /*
       * The fields of this class are package-private since DatagramSocketImpl
</pre>
<hr />
<pre>
<span class="line-old-header">*** 72,15 ***</span>
       * length {@code length}, specifying an offset into the buffer.
       * &lt;p&gt;
       * The {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf      buffer for holding the incoming datagram.</span>
<span class="line-modified">!      * @param   offset   the offset for the buffer</span>
<span class="line-modified">!      * @param   length   the number of bytes to read.</span>
       *
<span class="line-modified">!      * @since 1.2</span>
       */
      public DatagramPacket(byte buf[], int offset, int length) {
          setData(buf, offset, length);
          this.address = null;
          this.port = -1;
<span class="line-new-header">--- 76,19 ---</span>
       * length {@code length}, specifying an offset into the buffer.
       * &lt;p&gt;
       * The {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf     buffer for holding the incoming datagram.</span>
<span class="line-modified">!      * @param   offset  the offset for the buffer</span>
<span class="line-modified">!      * @param   length  the number of bytes to read.</span>
       *
<span class="line-modified">!      * @throws  IllegalArgumentException    if the length or offset</span>
<span class="line-added">+      *          is negative, or if the length plus the offset is</span>
<span class="line-added">+      *          greater than the length of the packet&#39;s given buffer.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @since   1.2</span>
       */
      public DatagramPacket(byte buf[], int offset, int length) {
          setData(buf, offset, length);
          this.address = null;
          this.port = -1;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 91,12 ***</span>
       * length {@code length}.
       * &lt;p&gt;
       * The {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf      buffer for holding the incoming datagram.</span>
<span class="line-modified">!      * @param   length   the number of bytes to read.</span>
       */
      public DatagramPacket(byte buf[], int length) {
          this (buf, 0, length);
      }
  
<span class="line-new-header">--- 99,16 ---</span>
       * length {@code length}.
       * &lt;p&gt;
       * The {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf     buffer for holding the incoming datagram.</span>
<span class="line-modified">!      * @param   length  the number of bytes to read.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @throws  IllegalArgumentException    if the length is negative</span>
<span class="line-added">+      *          or if the length is greater than the length of the</span>
<span class="line-added">+      *          packet&#39;s given buffer.</span>
       */
      public DatagramPacket(byte buf[], int length) {
          this (buf, 0, length);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 105,18 ***</span>
       * {@code length} with offset {@code offset} to the
       * specified port number on the specified host. The
       * {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf      the packet data.</span>
<span class="line-modified">!      * @param   offset   the packet data offset.</span>
<span class="line-modified">!      * @param   length   the packet data length.</span>
<span class="line-modified">!      * @param   address  the destination address.</span>
<span class="line-modified">!      * @param   port     the destination port number.</span>
<span class="line-removed">-      * @see java.net.InetAddress</span>
       *
<span class="line-modified">!      * @since 1.2</span>
       */
      public DatagramPacket(byte buf[], int offset, int length,
                            InetAddress address, int port) {
          setData(buf, offset, length);
          setAddress(address);
<span class="line-new-header">--- 117,24 ---</span>
       * {@code length} with offset {@code offset} to the
       * specified port number on the specified host. The
       * {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf     the packet data.</span>
<span class="line-modified">!      * @param   offset  the packet data offset.</span>
<span class="line-modified">!      * @param   length  the packet data length.</span>
<span class="line-modified">!      * @param   address the destination address, or {@code null}.</span>
<span class="line-modified">!      * @param   port    the destination port number.</span>
       *
<span class="line-modified">!      * @throws  IllegalArgumentException    if the length or offset</span>
<span class="line-added">+      *          is negative, or if the length plus the offset is</span>
<span class="line-added">+      *          greater than the length of the packet&#39;s given buffer,</span>
<span class="line-added">+      *          or if the port is out of range.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @see     java.net.InetAddress</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @since   1.2</span>
       */
      public DatagramPacket(byte buf[], int offset, int length,
                            InetAddress address, int port) {
          setData(buf, offset, length);
          setAddress(address);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 128,18 ***</span>
       * {@code length} with offset {@code offset} to the
       * specified port number on the specified host. The
       * {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf      the packet data.</span>
<span class="line-modified">!      * @param   offset   the packet data offset.</span>
<span class="line-modified">!      * @param   length   the packet data length.</span>
<span class="line-modified">!      * @param   address  the destination socket address.</span>
<span class="line-modified">!      * @throws  IllegalArgumentException if address type is not supported</span>
<span class="line-modified">!      * @see java.net.InetAddress</span>
       *
<span class="line-modified">!      * @since 1.4</span>
       */
      public DatagramPacket(byte buf[], int offset, int length, SocketAddress address) {
          setData(buf, offset, length);
          setSocketAddress(address);
      }
<span class="line-new-header">--- 146,23 ---</span>
       * {@code length} with offset {@code offset} to the
       * specified port number on the specified host. The
       * {@code length} argument must be less than or equal to
       * {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf     the packet data.</span>
<span class="line-modified">!      * @param   offset  the packet data offset.</span>
<span class="line-modified">!      * @param   length  the packet data length.</span>
<span class="line-modified">!      * @param   address the destination socket address.</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @throws  IllegalArgumentException    if address is null or its</span>
<span class="line-added">+      *          type is not supported, or if the length or offset is</span>
<span class="line-added">+      *          negative, or if the length plus the offset is greater</span>
<span class="line-added">+      *          than the length of the packet&#39;s given buffer.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @see     java.net.InetAddress</span>
       *
<span class="line-modified">!      * @since   1.4</span>
       */
      public DatagramPacket(byte buf[], int offset, int length, SocketAddress address) {
          setData(buf, offset, length);
          setSocketAddress(address);
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 148,14 ***</span>
       * Constructs a datagram packet for sending packets of length
       * {@code length} to the specified port number on the specified
       * host. The {@code length} argument must be less than or equal
       * to {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf      the packet data.</span>
<span class="line-modified">!      * @param   length   the packet length.</span>
<span class="line-modified">!      * @param   address  the destination address.</span>
<span class="line-modified">!      * @param   port     the destination port number.</span>
       * @see     java.net.InetAddress
       */
      public DatagramPacket(byte buf[], int length,
                            InetAddress address, int port) {
          this(buf, 0, length, address, port);
<span class="line-new-header">--- 171,19 ---</span>
       * Constructs a datagram packet for sending packets of length
       * {@code length} to the specified port number on the specified
       * host. The {@code length} argument must be less than or equal
       * to {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf     the packet data.</span>
<span class="line-modified">!      * @param   length  the packet length.</span>
<span class="line-modified">!      * @param   address the destination address, or {@code null}.</span>
<span class="line-modified">!      * @param   port    the destination port number.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @throws  IllegalArgumentException    if the length is negative,</span>
<span class="line-added">+      *          or if the length is greater than the length of the</span>
<span class="line-added">+      *          packet&#39;s given buffer, or if the port is out of range.</span>
<span class="line-added">+      *</span>
       * @see     java.net.InetAddress
       */
      public DatagramPacket(byte buf[], int length,
                            InetAddress address, int port) {
          this(buf, 0, length, address, port);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 165,16 ***</span>
       * Constructs a datagram packet for sending packets of length
       * {@code length} to the specified port number on the specified
       * host. The {@code length} argument must be less than or equal
       * to {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf      the packet data.</span>
<span class="line-modified">!      * @param   length   the packet length.</span>
<span class="line-modified">!      * @param   address  the destination address.</span>
<span class="line-modified">!      * @throws  IllegalArgumentException if address type is not supported</span>
<span class="line-modified">!      * @since 1.4</span>
       * @see     java.net.InetAddress
       */
      public DatagramPacket(byte buf[], int length, SocketAddress address) {
          this(buf, 0, length, address);
      }
  
<span class="line-new-header">--- 193,22 ---</span>
       * Constructs a datagram packet for sending packets of length
       * {@code length} to the specified port number on the specified
       * host. The {@code length} argument must be less than or equal
       * to {@code buf.length}.
       *
<span class="line-modified">!      * @param   buf     the packet data.</span>
<span class="line-modified">!      * @param   length  the packet length.</span>
<span class="line-modified">!      * @param   address the destination address.</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @throws  IllegalArgumentException    if address is null or its type is</span>
<span class="line-added">+      *          not supported, or if the length is negative, or if the length</span>
<span class="line-added">+      *          is greater than the length of the packet&#39;s given buffer, or</span>
<span class="line-added">+      *          if the port is out of range.</span>
<span class="line-added">+      *</span>
       * @see     java.net.InetAddress
<span class="line-added">+      *</span>
<span class="line-added">+      * @since   1.4</span>
       */
      public DatagramPacket(byte buf[], int length, SocketAddress address) {
          this(buf, 0, length, address);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 242,24 ***</span>
  
      /**
       * Set the data buffer for this packet. This sets the
       * data, length and offset of the packet.
       *
<span class="line-modified">!      * @param buf the buffer to set for this packet</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @param offset the offset into the data</span>
<span class="line-modified">!      *</span>
<span class="line-removed">-      * @param length the length of the data</span>
<span class="line-removed">-      *       and/or the length of the buffer used to receive data</span>
       *
<span class="line-modified">!      * @exception NullPointerException if the argument is null</span>
       *
<span class="line-modified">!      * @see #getData</span>
<span class="line-modified">!      * @see #getOffset</span>
<span class="line-modified">!      * @see #getLength</span>
       *
<span class="line-modified">!      * @since 1.2</span>
       */
      public synchronized void setData(byte[] buf, int offset, int length) {
          /* this will check to see if buf is null */
          if (length &lt; 0 || offset &lt; 0 ||
              (length + offset) &lt; 0 ||
<span class="line-new-header">--- 276,24 ---</span>
  
      /**
       * Set the data buffer for this packet. This sets the
       * data, length and offset of the packet.
       *
<span class="line-modified">!      * @param   buf     the buffer to set for this packet</span>
<span class="line-modified">!      * @param   offset  the offset into the data</span>
<span class="line-modified">!      * @param   length  the length of the data</span>
<span class="line-modified">!      *          and/or the length of the buffer used to receive data</span>
       *
<span class="line-modified">!      * @throws  IllegalArgumentException    if the length or offset</span>
<span class="line-added">+      *          is negative, or if the length plus the offset is</span>
<span class="line-added">+      *          greater than the length of the packet&#39;s given buffer.</span>
       *
<span class="line-modified">!      * @see     #getData</span>
<span class="line-modified">!      * @see     #getOffset</span>
<span class="line-modified">!      * @see     #getLength</span>
       *
<span class="line-modified">!      * @since   1.2</span>
       */
      public synchronized void setData(byte[] buf, int offset, int length) {
          /* this will check to see if buf is null */
          if (length &lt; 0 || offset &lt; 0 ||
              (length + offset) &lt; 0 ||
</pre>
<hr />
<pre>
<span class="line-old-header">*** 273,24 ***</span>
      }
  
      /**
       * Sets the IP address of the machine to which this datagram
       * is being sent.
<span class="line-modified">!      * @param iaddr the {@code InetAddress}</span>
       * @since   1.1
<span class="line-removed">-      * @see #getAddress()</span>
       */
      public synchronized void setAddress(InetAddress iaddr) {
          address = iaddr;
      }
  
      /**
       * Sets the port number on the remote host to which this datagram
       * is being sent.
<span class="line-modified">!      * @param iport the port number</span>
       * @since   1.1
<span class="line-removed">-      * @see #getPort()</span>
       */
      public synchronized void setPort(int iport) {
          if (iport &lt; 0 || iport &gt; 0xFFFF) {
              throw new IllegalArgumentException(&quot;Port out of range:&quot;+ iport);
          }
<span class="line-new-header">--- 307,32 ---</span>
      }
  
      /**
       * Sets the IP address of the machine to which this datagram
       * is being sent.
<span class="line-modified">!      *</span>
<span class="line-added">+      * @param   iaddr   the {@code InetAddress}, or {@code null}.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @see     #getAddress()</span>
<span class="line-added">+      *</span>
       * @since   1.1
       */
      public synchronized void setAddress(InetAddress iaddr) {
          address = iaddr;
      }
  
      /**
       * Sets the port number on the remote host to which this datagram
       * is being sent.
<span class="line-modified">!      *</span>
<span class="line-added">+      * @param   iport   the port number</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @throws  IllegalArgumentException    if the port is out of range</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @see     #getPort()</span>
<span class="line-added">+      *</span>
       * @since   1.1
       */
      public synchronized void setPort(int iport) {
          if (iport &lt; 0 || iport &gt; 0xFFFF) {
              throw new IllegalArgumentException(&quot;Port out of range:&quot;+ iport);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 299,16 ***</span>
  
      /**
       * Sets the SocketAddress (usually IP address + port number) of the remote
       * host to which this datagram is being sent.
       *
<span class="line-modified">!      * @param address the {@code SocketAddress}</span>
<span class="line-modified">!      * @throws  IllegalArgumentException if address is null or is a</span>
<span class="line-modified">!      *          SocketAddress subclass not supported by this socket</span>
       *
<span class="line-modified">!      * @since 1.4</span>
<span class="line-modified">!      * @see #getSocketAddress</span>
       */
      public synchronized void setSocketAddress(SocketAddress address) {
          if (address == null || !(address instanceof InetSocketAddress))
              throw new IllegalArgumentException(&quot;unsupported address type&quot;);
          InetSocketAddress addr = (InetSocketAddress) address;
<span class="line-new-header">--- 341,18 ---</span>
  
      /**
       * Sets the SocketAddress (usually IP address + port number) of the remote
       * host to which this datagram is being sent.
       *
<span class="line-modified">!      * @param   address the {@code SocketAddress}</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @throws  IllegalArgumentException    if address is null or is a</span>
<span class="line-added">+      *          SocketAddress subclass not supported.</span>
       *
<span class="line-modified">!      * @see     #getSocketAddress</span>
<span class="line-modified">!      *</span>
<span class="line-added">+      * @since   1.4</span>
       */
      public synchronized void setSocketAddress(SocketAddress address) {
          if (address == null || !(address instanceof InetSocketAddress))
              throw new IllegalArgumentException(&quot;unsupported address type&quot;);
          InetSocketAddress addr = (InetSocketAddress) address;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 320,31 ***</span>
  
      /**
       * Gets the SocketAddress (usually IP address + port number) of the remote
       * host that this packet is being sent to or is coming from.
       *
<span class="line-modified">!      * @return the {@code SocketAddress}</span>
<span class="line-modified">!      * @since 1.4</span>
<span class="line-modified">!      * @see #setSocketAddress</span>
       */
      public synchronized SocketAddress getSocketAddress() {
          return new InetSocketAddress(getAddress(), getPort());
      }
  
      /**
       * Set the data buffer for this packet. With the offset of
       * this DatagramPacket set to 0, and the length set to
       * the length of {@code buf}.
       *
<span class="line-modified">!      * @param buf the buffer to set for this packet.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @exception NullPointerException if the argument is null.</span>
       *
<span class="line-modified">!      * @see #getLength</span>
<span class="line-modified">!      * @see #getData</span>
       *
<span class="line-modified">!      * @since 1.1</span>
       */
      public synchronized void setData(byte[] buf) {
          if (buf == null) {
              throw new NullPointerException(&quot;null packet buffer&quot;);
          }
<span class="line-new-header">--- 364,31 ---</span>
  
      /**
       * Gets the SocketAddress (usually IP address + port number) of the remote
       * host that this packet is being sent to or is coming from.
       *
<span class="line-modified">!      * @return  the {@code SocketAddress}</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @see     #setSocketAddress</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @since   1.4</span>
       */
      public synchronized SocketAddress getSocketAddress() {
          return new InetSocketAddress(getAddress(), getPort());
      }
  
      /**
       * Set the data buffer for this packet. With the offset of
       * this DatagramPacket set to 0, and the length set to
       * the length of {@code buf}.
       *
<span class="line-modified">!      * @param   buf     the buffer to set for this packet.</span>
       *
<span class="line-modified">!      * @see     #getLength</span>
<span class="line-modified">!      * @see     #getData</span>
       *
<span class="line-modified">!      * @since   1.1</span>
       */
      public synchronized void setData(byte[] buf) {
          if (buf == null) {
              throw new NullPointerException(&quot;null packet buffer&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 359,20 ***</span>
       * the number of bytes from the packet&#39;s data buffer that will be
       * sent, or the number of bytes of the packet&#39;s data buffer that
       * will be used for receiving data. The length must be lesser or
       * equal to the offset plus the length of the packet&#39;s buffer.
       *
<span class="line-modified">!      * @param length the length to set for this packet.</span>
       *
<span class="line-modified">!      * @exception IllegalArgumentException if the length is negative</span>
<span class="line-modified">!      * of if the length is greater than the packet&#39;s data buffer</span>
<span class="line-modified">!      * length.</span>
       *
<span class="line-modified">!      * @see #getLength</span>
<span class="line-modified">!      * @see #setData</span>
       *
<span class="line-modified">!      * @since 1.1</span>
       */
      public synchronized void setLength(int length) {
          if ((length + offset) &gt; buf.length || length &lt; 0 ||
              (length + offset) &lt; 0) {
              throw new IllegalArgumentException(&quot;illegal length&quot;);
<span class="line-new-header">--- 403,20 ---</span>
       * the number of bytes from the packet&#39;s data buffer that will be
       * sent, or the number of bytes of the packet&#39;s data buffer that
       * will be used for receiving data. The length must be lesser or
       * equal to the offset plus the length of the packet&#39;s buffer.
       *
<span class="line-modified">!      * @param   length      the length to set for this packet.</span>
       *
<span class="line-modified">!      * @throws  IllegalArgumentException    if the length is negative,</span>
<span class="line-modified">!      *          or if the length plus the offset is greater than the</span>
<span class="line-modified">!      *          length of the packet&#39;s data buffer.</span>
       *
<span class="line-modified">!      * @see     #getLength</span>
<span class="line-modified">!      * @see     #setData</span>
       *
<span class="line-modified">!      * @since   1.1</span>
       */
      public synchronized void setLength(int length) {
          if ((length + offset) &gt; buf.length || length &lt; 0 ||
              (length + offset) &lt; 0) {
              throw new IllegalArgumentException(&quot;illegal length&quot;);
</pre>
<center><a href="ContentHandler.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="DatagramSocket.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>