<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/util/zip/ZipOutputStream.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ZipInputStream.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ZipUtils.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/zip/ZipOutputStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1996, 2016, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1996, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -26,27 +26,26 @@</span>
  package java.util.zip;
  
  import java.io.OutputStream;
  import java.io.IOException;
  import java.nio.charset.Charset;
<span class="udiff-line-removed">- import java.nio.charset.StandardCharsets;</span>
  import java.util.Vector;
  import java.util.HashSet;
  import static java.util.zip.ZipConstants64.*;
  import static java.util.zip.ZipUtils.*;
<span class="udiff-line-added">+ import sun.nio.cs.UTF_8;</span>
  import sun.security.action.GetPropertyAction;
  
  /**
   * This class implements an output stream filter for writing files in the
   * ZIP file format. Includes support for both compressed and uncompressed
   * entries.
   *
   * @author      David Connelly
   * @since 1.1
   */
<span class="udiff-line-modified-removed">- public</span>
<span class="udiff-line-removed">- class ZipOutputStream extends DeflaterOutputStream implements ZipConstants {</span>
<span class="udiff-line-modified-added">+ public class ZipOutputStream extends DeflaterOutputStream implements ZipConstants {</span>
  
      /**
       * Whether to use ZIP64 for zip files with more than 64k entries.
       * Until ZIP64 support in zip implementations is ubiquitous, this
       * system property allows the creation of zip files which can be
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -115,11 +114,11 @@</span>
       * to encode the entry names and comments.
       *
       * @param out the actual output stream
       */
      public ZipOutputStream(OutputStream out) {
<span class="udiff-line-modified-removed">-         this(out, StandardCharsets.UTF_8);</span>
<span class="udiff-line-modified-added">+         this(out, UTF_8.INSTANCE);</span>
      }
  
      /**
       * Creates a new ZIP output stream.
       *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -138,12 +137,12 @@</span>
          usesDefaultDeflater = true;
      }
  
      /**
       * Sets the ZIP file comment.
<span class="udiff-line-modified-removed">-      * @param comment the comment string</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the length of the specified</span>
<span class="udiff-line-modified-added">+      * @param     comment the comment string</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the length of the specified</span>
       *            ZIP file comment is greater than 0xFFFF bytes
       */
      public void setComment(String comment) {
          if (comment != null) {
              this.comment = zc.getBytes(comment);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -154,12 +153,12 @@</span>
  
      /**
       * Sets the default compression method for subsequent entries. This
       * default will be used whenever the compression method is not specified
       * for an individual ZIP file entry, and is initially set to DEFLATED.
<span class="udiff-line-modified-removed">-      * @param method the default compression method</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the specified compression method</span>
<span class="udiff-line-modified-added">+      * @param     method the default compression method</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the specified compression method</span>
       *            is invalid
       */
      public void setMethod(int method) {
          if (method != DEFLATED &amp;&amp; method != STORED) {
              throw new IllegalArgumentException(&quot;invalid compression method&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -168,12 +167,12 @@</span>
      }
  
      /**
       * Sets the compression level for subsequent entries which are DEFLATED.
       * The default setting is DEFAULT_COMPRESSION.
<span class="udiff-line-modified-removed">-      * @param level the compression level (0-9)</span>
<span class="udiff-line-modified-removed">-      * @exception IllegalArgumentException if the compression level is invalid</span>
<span class="udiff-line-modified-added">+      * @param     level the compression level (0-9)</span>
<span class="udiff-line-modified-added">+      * @throws    IllegalArgumentException if the compression level is invalid</span>
       */
      public void setLevel(int level) {
          def.setLevel(level);
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -181,13 +180,13 @@</span>
       * Begins writing a new ZIP file entry and positions the stream to the
       * start of the entry data. Closes the current entry if still active.
       * The default compression method will be used if no compression method
       * was specified for the entry, and the current time will be used if
       * the entry has no set modification time.
<span class="udiff-line-modified-removed">-      * @param e the ZIP entry to be written</span>
<span class="udiff-line-modified-removed">-      * @exception ZipException if a ZIP format error has occurred</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error has occurred</span>
<span class="udiff-line-modified-added">+      * @param     e the ZIP entry to be written</span>
<span class="udiff-line-modified-added">+      * @throws    ZipException if a ZIP format error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error has occurred</span>
       */
      public void putNextEntry(ZipEntry e) throws IOException {
          ensureOpen();
          if (current != null) {
              closeEntry();       // close previous entry
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -240,12 +239,12 @@</span>
      }
  
      /**
       * Closes the current ZIP entry and positions the stream for writing
       * the next entry.
<span class="udiff-line-modified-removed">-      * @exception ZipException if a ZIP format error has occurred</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    ZipException if a ZIP format error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error has occurred</span>
       */
      public void closeEntry() throws IOException {
          ensureOpen();
          if (current != null) {
              ZipEntry e = current.entry;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -305,15 +304,15 @@</span>
      }
  
      /**
       * Writes an array of bytes to the current ZIP entry data. This method
       * will block until all the bytes are written.
<span class="udiff-line-modified-removed">-      * @param b the data to be written</span>
<span class="udiff-line-modified-removed">-      * @param off the start offset in the data</span>
<span class="udiff-line-modified-removed">-      * @param len the number of bytes that are written</span>
<span class="udiff-line-modified-removed">-      * @exception ZipException if a ZIP file error has occurred</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error has occurred</span>
<span class="udiff-line-modified-added">+      * @param     b the data to be written</span>
<span class="udiff-line-modified-added">+      * @param     off the start offset in the data</span>
<span class="udiff-line-modified-added">+      * @param     len the number of bytes that are written</span>
<span class="udiff-line-modified-added">+      * @throws    ZipException if a ZIP file error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error has occurred</span>
       */
      public synchronized void write(byte[] b, int off, int len)
          throws IOException
      {
          ensureOpen();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -347,12 +346,12 @@</span>
  
      /**
       * Finishes writing the contents of the ZIP output stream without closing
       * the underlying stream. Use this method when applying multiple filters
       * in succession to the same output stream.
<span class="udiff-line-modified-removed">-      * @exception ZipException if a ZIP file error has occurred</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O exception has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    ZipException if a ZIP file error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O exception has occurred</span>
       */
      public void finish() throws IOException {
          ensureOpen();
          if (finished) {
              return;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -368,12 +367,12 @@</span>
          finished = true;
      }
  
      /**
       * Closes the ZIP output stream as well as the stream being filtered.
<span class="udiff-line-modified-removed">-      * @exception ZipException if a ZIP file error has occurred</span>
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    ZipException if a ZIP file error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error has occurred</span>
       */
      public void close() throws IOException {
          if (!closed) {
              super.close();
              closed = true;
</pre>
<center><a href="ZipInputStream.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ZipUtils.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>