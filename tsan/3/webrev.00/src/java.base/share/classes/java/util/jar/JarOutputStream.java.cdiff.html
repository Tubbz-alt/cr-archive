<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/util/jar/JarOutputStream.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="JarInputStream.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JarVerifier.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/jar/JarOutputStream.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2012, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 27,34 ***</span>
  
  import java.util.zip.*;
  import java.io.*;
  
  /**
<span class="line-modified">!  * The &lt;code&gt;JarOutputStream&lt;/code&gt; class is used to write the contents</span>
   * of a JAR file to any output stream. It extends the class
<span class="line-modified">!  * &lt;code&gt;java.util.zip.ZipOutputStream&lt;/code&gt; with support</span>
<span class="line-modified">!  * for writing an optional &lt;code&gt;Manifest&lt;/code&gt; entry. The</span>
<span class="line-modified">!  * &lt;code&gt;Manifest&lt;/code&gt; can be used to specify meta-information about</span>
   * the JAR file and its entries.
   *
   * @author  David Connelly
   * @see     Manifest
   * @see     java.util.zip.ZipOutputStream
   * @since   1.2
   */
<span class="line-modified">! public</span>
<span class="line-removed">- class JarOutputStream extends ZipOutputStream {</span>
      private static final int JAR_MAGIC = 0xCAFE;
  
      /**
<span class="line-modified">!      * Creates a new &lt;code&gt;JarOutputStream&lt;/code&gt; with the specified</span>
<span class="line-modified">!      * &lt;code&gt;Manifest&lt;/code&gt;. The manifest is written as the first</span>
       * entry to the output stream.
       *
       * @param out the actual output stream
<span class="line-modified">!      * @param man the optional &lt;code&gt;Manifest&lt;/code&gt;</span>
<span class="line-modified">!      * @exception IOException if an I/O error has occurred</span>
       */
      public JarOutputStream(OutputStream out, Manifest man) throws IOException {
          super(out);
          if (man == null) {
              throw new NullPointerException(&quot;man&quot;);
<span class="line-new-header">--- 27,33 ---</span>
  
  import java.util.zip.*;
  import java.io.*;
  
  /**
<span class="line-modified">!  * The {@code JarOutputStream} class is used to write the contents</span>
   * of a JAR file to any output stream. It extends the class
<span class="line-modified">!  * {@code java.util.zip.ZipOutputStream} with support</span>
<span class="line-modified">!  * for writing an optional {@code Manifest} entry. The</span>
<span class="line-modified">!  * {@code Manifest} can be used to specify meta-information about</span>
   * the JAR file and its entries.
   *
   * @author  David Connelly
   * @see     Manifest
   * @see     java.util.zip.ZipOutputStream
   * @since   1.2
   */
<span class="line-modified">! public class JarOutputStream extends ZipOutputStream {</span>
      private static final int JAR_MAGIC = 0xCAFE;
  
      /**
<span class="line-modified">!      * Creates a new {@code JarOutputStream} with the specified</span>
<span class="line-modified">!      * {@code Manifest}. The manifest is written as the first</span>
       * entry to the output stream.
       *
       * @param out the actual output stream
<span class="line-modified">!      * @param man the optional {@code Manifest}</span>
<span class="line-modified">!      * @throws    IOException if an I/O error has occurred</span>
       */
      public JarOutputStream(OutputStream out, Manifest man) throws IOException {
          super(out);
          if (man == null) {
              throw new NullPointerException(&quot;man&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 64,13 ***</span>
          man.write(new BufferedOutputStream(this));
          closeEntry();
      }
  
      /**
<span class="line-modified">!      * Creates a new &lt;code&gt;JarOutputStream&lt;/code&gt; with no manifest.</span>
       * @param out the actual output stream
<span class="line-modified">!      * @exception IOException if an I/O error has occurred</span>
       */
      public JarOutputStream(OutputStream out) throws IOException {
          super(out);
      }
  
<span class="line-new-header">--- 63,13 ---</span>
          man.write(new BufferedOutputStream(this));
          closeEntry();
      }
  
      /**
<span class="line-modified">!      * Creates a new {@code JarOutputStream} with no manifest.</span>
       * @param out the actual output stream
<span class="line-modified">!      * @throws    IOException if an I/O error has occurred</span>
       */
      public JarOutputStream(OutputStream out) throws IOException {
          super(out);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 81,12 ***</span>
       * used if no compression method was specified for the entry.
       * The current time will be used if the entry has no set modification
       * time.
       *
       * @param ze the ZIP/JAR entry to be written
<span class="line-modified">!      * @exception ZipException if a ZIP error has occurred</span>
<span class="line-modified">!      * @exception IOException if an I/O error has occurred</span>
       */
      public void putNextEntry(ZipEntry ze) throws IOException {
          if (firstEntry) {
              // Make sure that extra field data for first JAR
              // entry includes JAR magic number id.
<span class="line-new-header">--- 80,12 ---</span>
       * used if no compression method was specified for the entry.
       * The current time will be used if the entry has no set modification
       * time.
       *
       * @param ze the ZIP/JAR entry to be written
<span class="line-modified">!      * @throws    ZipException if a ZIP error has occurred</span>
<span class="line-modified">!      * @throws    IOException if an I/O error has occurred</span>
       */
      public void putNextEntry(ZipEntry ze) throws IOException {
          if (firstEntry) {
              // Make sure that extra field data for first JAR
              // entry includes JAR magic number id.
</pre>
<center><a href="JarInputStream.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JarVerifier.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>