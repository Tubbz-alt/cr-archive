<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/nio/channels/FileChannel.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="DatagramChannel.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ReadableByteChannel.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/nio/channels/FileChannel.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 717,11 ***</span>
       * @return  The number of bytes read, possibly zero, or {@code -1} if the
       *          given position is greater than or equal to the file&#39;s current
       *          size
       *
       * @throws  IllegalArgumentException
<span class="line-modified">!      *          If the position is negative</span>
       *
       * @throws  NonReadableChannelException
       *          If this channel was not opened for reading
       *
       * @throws  ClosedChannelException
<span class="line-new-header">--- 717,11 ---</span>
       * @return  The number of bytes read, possibly zero, or {@code -1} if the
       *          given position is greater than or equal to the file&#39;s current
       *          size
       *
       * @throws  IllegalArgumentException
<span class="line-modified">!      *          If the position is negative or the buffer is read-only</span>
       *
       * @throws  NonReadableChannelException
       *          If this channel was not opened for reading
       *
       * @throws  ClosedChannelException
</pre>
<hr />
<pre>
<span class="line-old-header">*** 789,11 ***</span>
  
  
      // -- Memory-mapped buffers --
  
      /**
<span class="line-modified">!      * A typesafe enumeration for file-mapping modes.</span>
       *
       * @since 1.4
       *
       * @see java.nio.channels.FileChannel#map
       */
<span class="line-new-header">--- 789,11 ---</span>
  
  
      // -- Memory-mapped buffers --
  
      /**
<span class="line-modified">!      * A file-mapping mode.</span>
       *
       * @since 1.4
       *
       * @see java.nio.channels.FileChannel#map
       */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 817,10 ***</span>
<span class="line-new-header">--- 817,16 ---</span>
          public static final MapMode PRIVATE
              = new MapMode(&quot;PRIVATE&quot;);
  
          private final String name;
  
<span class="line-added">+         /**</span>
<span class="line-added">+          * Constructs an instance of this class. This constructor may be used</span>
<span class="line-added">+          * by code in java.base to create file mapping modes beyond the file</span>
<span class="line-added">+          * mapping modes defined here.</span>
<span class="line-added">+          * @param name the name of the map mode</span>
<span class="line-added">+          */</span>
          private MapMode(String name) {
              this.name = name;
          }
  
          /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 835,12 ***</span>
      }
  
      /**
       * Maps a region of this channel&#39;s file directly into memory.
       *
<span class="line-modified">!      * &lt;p&gt; A region of a file may be mapped into memory in one of three modes:</span>
<span class="line-modified">!      * &lt;/p&gt;</span>
       *
       * &lt;ul&gt;
       *
       *   &lt;li&gt;&lt;p&gt; &lt;i&gt;Read-only:&lt;/i&gt; Any attempt to modify the resulting buffer
       *   will cause a {@link java.nio.ReadOnlyBufferException} to be thrown.
<span class="line-new-header">--- 841,12 ---</span>
      }
  
      /**
       * Maps a region of this channel&#39;s file directly into memory.
       *
<span class="line-modified">!      * &lt;p&gt; The {@code mode} parameter specifies how the region of the file is</span>
<span class="line-modified">!      * mapped and may be one of the following modes:</span>
       *
       * &lt;ul&gt;
       *
       *   &lt;li&gt;&lt;p&gt; &lt;i&gt;Read-only:&lt;/i&gt; Any attempt to modify the resulting buffer
       *   will cause a {@link java.nio.ReadOnlyBufferException} to be thrown.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 857,10 ***</span>
<span class="line-new-header">--- 863,12 ---</span>
       *   copies of the modified portions of the buffer to be created.  ({@link
       *   MapMode#PRIVATE MapMode.PRIVATE}) &lt;/p&gt;&lt;/li&gt;
       *
       * &lt;/ul&gt;
       *
<span class="line-added">+      * &lt;p&gt; An implementation may support additional map modes.</span>
<span class="line-added">+      *</span>
       * &lt;p&gt; For a read-only mapping, this channel must have been opened for
       * reading; for a read/write or private mapping, this channel must have
       * been opened for both reading and writing.
       *
       * &lt;p&gt; The {@link MappedByteBuffer &lt;i&gt;mapped byte buffer&lt;/i&gt;}
</pre>
<hr />
<pre>
<span class="line-old-header">*** 890,11 ***</span>
       * @param  mode
       *         One of the constants {@link MapMode#READ_ONLY READ_ONLY}, {@link
       *         MapMode#READ_WRITE READ_WRITE}, or {@link MapMode#PRIVATE
       *         PRIVATE} defined in the {@link MapMode} class, according to
       *         whether the file is to be mapped read-only, read/write, or
<span class="line-modified">!      *         privately (copy-on-write), respectively</span>
       *
       * @param  position
       *         The position within the file at which the mapped region
       *         is to start; must be non-negative
       *
<span class="line-new-header">--- 898,12 ---</span>
       * @param  mode
       *         One of the constants {@link MapMode#READ_ONLY READ_ONLY}, {@link
       *         MapMode#READ_WRITE READ_WRITE}, or {@link MapMode#PRIVATE
       *         PRIVATE} defined in the {@link MapMode} class, according to
       *         whether the file is to be mapped read-only, read/write, or
<span class="line-modified">!      *         privately (copy-on-write), respectively, or an implementation</span>
<span class="line-added">+      *         specific map mode</span>
       *
       * @param  position
       *         The position within the file at which the mapped region
       *         is to start; must be non-negative
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 903,29 ***</span>
       *         no greater than {@link java.lang.Integer#MAX_VALUE}
       *
       * @return  The mapped byte buffer
       *
       * @throws NonReadableChannelException
<span class="line-modified">!      *         If the {@code mode} is {@link MapMode#READ_ONLY READ_ONLY} but</span>
<span class="line-modified">!      *         this channel was not opened for reading</span>
       *
       * @throws NonWritableChannelException
<span class="line-modified">!      *         If the {@code mode} is {@link MapMode#READ_WRITE READ_WRITE} or</span>
<span class="line-modified">!      *         {@link MapMode#PRIVATE PRIVATE} but this channel was not opened</span>
<span class="line-modified">!      *         for both reading and writing</span>
       *
       * @throws IllegalArgumentException
       *         If the preconditions on the parameters do not hold
       *
       * @throws IOException
       *         If some other I/O error occurs
       *
       * @see java.nio.channels.FileChannel.MapMode
       * @see java.nio.MappedByteBuffer
       */
<span class="line-modified">!     public abstract MappedByteBuffer map(MapMode mode,</span>
<span class="line-removed">-                                          long position, long size)</span>
          throws IOException;
  
  
      // -- Locks --
  
<span class="line-new-header">--- 912,33 ---</span>
       *         no greater than {@link java.lang.Integer#MAX_VALUE}
       *
       * @return  The mapped byte buffer
       *
       * @throws NonReadableChannelException
<span class="line-modified">!      *         If the {@code mode} is {@link MapMode#READ_ONLY READ_ONLY} or</span>
<span class="line-modified">!      *         an implementation specific map mode requiring read access</span>
<span class="line-added">+      *         but this channel was not opened for reading</span>
       *
       * @throws NonWritableChannelException
<span class="line-modified">!      *         If the {@code mode} is {@link MapMode#READ_WRITE READ_WRITE}.</span>
<span class="line-modified">!      *         {@link MapMode#PRIVATE PRIVATE} or an implementation specific</span>
<span class="line-modified">!      *         map mode requiring write access but this channel was not</span>
<span class="line-added">+      *         opened for both reading and writing</span>
       *
       * @throws IllegalArgumentException
       *         If the preconditions on the parameters do not hold
       *
<span class="line-added">+      * @throws UnsupportedOperationException</span>
<span class="line-added">+      *         If an unsupported map mode is specified</span>
<span class="line-added">+      *</span>
       * @throws IOException
       *         If some other I/O error occurs
       *
       * @see java.nio.channels.FileChannel.MapMode
       * @see java.nio.MappedByteBuffer
       */
<span class="line-modified">!     public abstract MappedByteBuffer map(MapMode mode, long position, long size)</span>
          throws IOException;
  
  
      // -- Locks --
  
</pre>
<center><a href="DatagramChannel.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ReadableByteChannel.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>