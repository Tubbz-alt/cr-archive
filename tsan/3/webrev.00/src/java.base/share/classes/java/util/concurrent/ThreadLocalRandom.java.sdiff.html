<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/util/concurrent/ThreadLocalRandom.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ScheduledExecutorService.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ThreadPoolExecutor.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/concurrent/ThreadLocalRandom.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1036 
1037     /**
1038      * The increment of seeder per new instance.
1039      */
1040     private static final long SEEDER_INCREMENT = 0xbb67ae8584caa73bL;
1041 
1042     /**
1043      * The least non-zero value returned by nextDouble(). This value
1044      * is scaled by a random value of 53 bits to produce a result.
1045      */
1046     private static final double DOUBLE_UNIT = 0x1.0p-53;  // 1.0  / (1L &lt;&lt; 53)
1047     private static final float  FLOAT_UNIT  = 0x1.0p-24f; // 1.0f / (1 &lt;&lt; 24)
1048 
1049     // IllegalArgumentException messages
1050     static final String BAD_BOUND = &quot;bound must be positive&quot;;
1051     static final String BAD_RANGE = &quot;bound must be greater than origin&quot;;
1052     static final String BAD_SIZE  = &quot;size must be non-negative&quot;;
1053 
1054     // Unsafe mechanics
1055     private static final Unsafe U = Unsafe.getUnsafe();
<span class="line-modified">1056     private static final long SEED = U.objectFieldOffset</span>
<span class="line-modified">1057             (Thread.class, &quot;threadLocalRandomSeed&quot;);</span>
<span class="line-modified">1058     private static final long PROBE = U.objectFieldOffset</span>
<span class="line-modified">1059             (Thread.class, &quot;threadLocalRandomProbe&quot;);</span>
<span class="line-modified">1060     private static final long SECONDARY = U.objectFieldOffset</span>
<span class="line-modified">1061             (Thread.class, &quot;threadLocalRandomSecondarySeed&quot;);</span>
<span class="line-modified">1062     private static final long THREADLOCALS = U.objectFieldOffset</span>
<span class="line-modified">1063             (Thread.class, &quot;threadLocals&quot;);</span>
<span class="line-modified">1064     private static final long INHERITABLETHREADLOCALS = U.objectFieldOffset</span>
<span class="line-modified">1065             (Thread.class, &quot;inheritableThreadLocals&quot;);</span>
<span class="line-modified">1066     private static final long INHERITEDACCESSCONTROLCONTEXT = U.objectFieldOffset</span>
<span class="line-modified">1067             (Thread.class, &quot;inheritedAccessControlContext&quot;);</span>
1068 
1069     /** Rarely-used holder for the second of a pair of Gaussians */
1070     private static final ThreadLocal&lt;Double&gt; nextLocalGaussian =
1071         new ThreadLocal&lt;&gt;();
1072 
1073     /** Generates per-thread initialization/probe field */
1074     private static final AtomicInteger probeGenerator = new AtomicInteger();
1075 
1076     /** The common ThreadLocalRandom */
1077     static final ThreadLocalRandom instance = new ThreadLocalRandom();
1078 
1079     /**
1080      * The next seed for default constructors.
1081      */
1082     private static final AtomicLong seeder
1083         = new AtomicLong(mix64(System.currentTimeMillis()) ^
1084                          mix64(System.nanoTime()));
1085 
1086     // at end of &lt;clinit&gt; to survive static initialization circularity
1087     static {
</pre>
</td>
<td>
<hr />
<pre>
1036 
1037     /**
1038      * The increment of seeder per new instance.
1039      */
1040     private static final long SEEDER_INCREMENT = 0xbb67ae8584caa73bL;
1041 
1042     /**
1043      * The least non-zero value returned by nextDouble(). This value
1044      * is scaled by a random value of 53 bits to produce a result.
1045      */
1046     private static final double DOUBLE_UNIT = 0x1.0p-53;  // 1.0  / (1L &lt;&lt; 53)
1047     private static final float  FLOAT_UNIT  = 0x1.0p-24f; // 1.0f / (1 &lt;&lt; 24)
1048 
1049     // IllegalArgumentException messages
1050     static final String BAD_BOUND = &quot;bound must be positive&quot;;
1051     static final String BAD_RANGE = &quot;bound must be greater than origin&quot;;
1052     static final String BAD_SIZE  = &quot;size must be non-negative&quot;;
1053 
1054     // Unsafe mechanics
1055     private static final Unsafe U = Unsafe.getUnsafe();
<span class="line-modified">1056     private static final long SEED</span>
<span class="line-modified">1057         = U.objectFieldOffset(Thread.class, &quot;threadLocalRandomSeed&quot;);</span>
<span class="line-modified">1058     private static final long PROBE</span>
<span class="line-modified">1059         = U.objectFieldOffset(Thread.class, &quot;threadLocalRandomProbe&quot;);</span>
<span class="line-modified">1060     private static final long SECONDARY</span>
<span class="line-modified">1061         = U.objectFieldOffset(Thread.class, &quot;threadLocalRandomSecondarySeed&quot;);</span>
<span class="line-modified">1062     private static final long THREADLOCALS</span>
<span class="line-modified">1063         = U.objectFieldOffset(Thread.class, &quot;threadLocals&quot;);</span>
<span class="line-modified">1064     private static final long INHERITABLETHREADLOCALS</span>
<span class="line-modified">1065         = U.objectFieldOffset(Thread.class, &quot;inheritableThreadLocals&quot;);</span>
<span class="line-modified">1066     private static final long INHERITEDACCESSCONTROLCONTEXT</span>
<span class="line-modified">1067         = U.objectFieldOffset(Thread.class, &quot;inheritedAccessControlContext&quot;);</span>
1068 
1069     /** Rarely-used holder for the second of a pair of Gaussians */
1070     private static final ThreadLocal&lt;Double&gt; nextLocalGaussian =
1071         new ThreadLocal&lt;&gt;();
1072 
1073     /** Generates per-thread initialization/probe field */
1074     private static final AtomicInteger probeGenerator = new AtomicInteger();
1075 
1076     /** The common ThreadLocalRandom */
1077     static final ThreadLocalRandom instance = new ThreadLocalRandom();
1078 
1079     /**
1080      * The next seed for default constructors.
1081      */
1082     private static final AtomicLong seeder
1083         = new AtomicLong(mix64(System.currentTimeMillis()) ^
1084                          mix64(System.nanoTime()));
1085 
1086     // at end of &lt;clinit&gt; to survive static initialization circularity
1087     static {
</pre>
</td>
</tr>
</table>
<center><a href="ScheduledExecutorService.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ThreadPoolExecutor.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>