<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/util/concurrent/atomic/DoubleAccumulator.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AtomicReferenceArray.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LongAccumulator.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/concurrent/atomic/DoubleAccumulator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 67  * class may not be applicable if numerical stability is required,
 68  * especially when combining values of substantially different orders
 69  * of magnitude.
 70  *
 71  * &lt;p&gt;Class {@link DoubleAdder} provides analogs of the functionality
 72  * of this class for the common special case of maintaining sums.  The
 73  * call {@code new DoubleAdder()} is equivalent to {@code new
 74  * DoubleAccumulator((x, y) -&gt; x + y, 0.0)}.
 75  *
 76  * &lt;p&gt;This class extends {@link Number}, but does &lt;em&gt;not&lt;/em&gt; define
 77  * methods such as {@code equals}, {@code hashCode} and {@code
 78  * compareTo} because instances are expected to be mutated, and so are
 79  * not useful as collection keys.
 80  *
 81  * @since 1.8
 82  * @author Doug Lea
 83  */
 84 public class DoubleAccumulator extends Striped64 implements Serializable {
 85     private static final long serialVersionUID = 7249069246863182397L;
 86 

 87     private final DoubleBinaryOperator function;
 88     private final long identity; // use long representation
 89 
 90     /**
 91      * Creates a new instance using the given accumulator function
 92      * and identity element.
 93      * @param accumulatorFunction a side-effect-free function of two arguments
 94      * @param identity identity (initial value) for the accumulator function
 95      */
 96     public DoubleAccumulator(DoubleBinaryOperator accumulatorFunction,
 97                              double identity) {
 98         this.function = accumulatorFunction;
 99         base = this.identity = doubleToRawLongBits(identity);
100     }
101 
102     /**
103      * Updates with the given value.
104      *
105      * @param x the value
106      */
</pre>
<hr />
<pre>
228     }
229 
230     /**
231      * Serialization proxy, used to avoid reference to the non-public
232      * Striped64 superclass in serialized forms.
233      * @serial include
234      */
235     private static class SerializationProxy implements Serializable {
236         private static final long serialVersionUID = 7249069246863182397L;
237 
238         /**
239          * The current value returned by get().
240          * @serial
241          */
242         private final double value;
243 
244         /**
245          * The function used for updates.
246          * @serial
247          */

248         private final DoubleBinaryOperator function;
249 
250         /**
251          * The identity value, represented as a long, as converted by
252          * {@link Double#doubleToRawLongBits}.  The original identity
253          * can be recovered using {@link Double#longBitsToDouble}.
254          * @serial
255          */
256         private final long identity;
257 
258         SerializationProxy(double value,
259                            DoubleBinaryOperator function,
260                            long identity) {
261             this.value = value;
262             this.function = function;
263             this.identity = identity;
264         }
265 
266         /**
267          * Returns a {@code DoubleAccumulator} object with initial state
</pre>
</td>
<td>
<hr />
<pre>
 67  * class may not be applicable if numerical stability is required,
 68  * especially when combining values of substantially different orders
 69  * of magnitude.
 70  *
 71  * &lt;p&gt;Class {@link DoubleAdder} provides analogs of the functionality
 72  * of this class for the common special case of maintaining sums.  The
 73  * call {@code new DoubleAdder()} is equivalent to {@code new
 74  * DoubleAccumulator((x, y) -&gt; x + y, 0.0)}.
 75  *
 76  * &lt;p&gt;This class extends {@link Number}, but does &lt;em&gt;not&lt;/em&gt; define
 77  * methods such as {@code equals}, {@code hashCode} and {@code
 78  * compareTo} because instances are expected to be mutated, and so are
 79  * not useful as collection keys.
 80  *
 81  * @since 1.8
 82  * @author Doug Lea
 83  */
 84 public class DoubleAccumulator extends Striped64 implements Serializable {
 85     private static final long serialVersionUID = 7249069246863182397L;
 86 
<span class="line-added"> 87     @SuppressWarnings(&quot;serial&quot;) // Not statically typed as Serializable</span>
 88     private final DoubleBinaryOperator function;
 89     private final long identity; // use long representation
 90 
 91     /**
 92      * Creates a new instance using the given accumulator function
 93      * and identity element.
 94      * @param accumulatorFunction a side-effect-free function of two arguments
 95      * @param identity identity (initial value) for the accumulator function
 96      */
 97     public DoubleAccumulator(DoubleBinaryOperator accumulatorFunction,
 98                              double identity) {
 99         this.function = accumulatorFunction;
100         base = this.identity = doubleToRawLongBits(identity);
101     }
102 
103     /**
104      * Updates with the given value.
105      *
106      * @param x the value
107      */
</pre>
<hr />
<pre>
229     }
230 
231     /**
232      * Serialization proxy, used to avoid reference to the non-public
233      * Striped64 superclass in serialized forms.
234      * @serial include
235      */
236     private static class SerializationProxy implements Serializable {
237         private static final long serialVersionUID = 7249069246863182397L;
238 
239         /**
240          * The current value returned by get().
241          * @serial
242          */
243         private final double value;
244 
245         /**
246          * The function used for updates.
247          * @serial
248          */
<span class="line-added">249         @SuppressWarnings(&quot;serial&quot;) // Not statically typed as Serializable</span>
250         private final DoubleBinaryOperator function;
251 
252         /**
253          * The identity value, represented as a long, as converted by
254          * {@link Double#doubleToRawLongBits}.  The original identity
255          * can be recovered using {@link Double#longBitsToDouble}.
256          * @serial
257          */
258         private final long identity;
259 
260         SerializationProxy(double value,
261                            DoubleBinaryOperator function,
262                            long identity) {
263             this.value = value;
264             this.function = function;
265             this.identity = identity;
266         }
267 
268         /**
269          * Returns a {@code DoubleAccumulator} object with initial state
</pre>
</td>
</tr>
</table>
<center><a href="AtomicReferenceArray.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="LongAccumulator.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>