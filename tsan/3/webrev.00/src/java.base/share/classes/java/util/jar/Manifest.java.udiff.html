<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.base/share/classes/java/util/jar/Manifest.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="JavaUtilJarAccessImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="package-info.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/jar/Manifest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -31,14 +31,13 @@</span>
  import java.io.InputStream;
  import java.io.OutputStream;
  import java.util.HashMap;
  import java.util.Map;
  
<span class="udiff-line-added">+ import sun.nio.cs.UTF_8;</span>
  import sun.security.util.SecurityProperties;
  
<span class="udiff-line-removed">- import static java.nio.charset.StandardCharsets.UTF_8;</span>
<span class="udiff-line-removed">- </span>
  /**
   * The Manifest class is used to maintain Manifest entry names and their
   * associated Attributes. There are main Manifest Attributes as well as
   * per-entry Attributes. For information on the Manifest format, please
   * see the
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -193,11 +192,11 @@</span>
       * Writes the Manifest to the specified OutputStream.
       * Attributes.Name.MANIFEST_VERSION must be set in
       * MainAttributes prior to invoking this method.
       *
       * @param out the output stream
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error has occurred</span>
       * @see #getMainAttributes
       */
      public void write(OutputStream out) throws IOException {
          DataOutputStream dos = new DataOutputStream(out);
          // Write out the main attributes for the manifest
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -235,11 +234,11 @@</span>
       * spaces within the limits of 72 bytes of contents per line followed
       * by a line break.
       */
      static void println72(OutputStream out, String line) throws IOException {
          if (!line.isEmpty()) {
<span class="udiff-line-modified-removed">-             byte[] lineBytes = line.getBytes(UTF_8);</span>
<span class="udiff-line-modified-added">+             byte[] lineBytes = line.getBytes(UTF_8.INSTANCE);</span>
              int length = lineBytes.length;
              // first line can hold one byte more than subsequent lines which
              // start with a continuation line break space
              out.write(lineBytes[0]);
              int pos = 1;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -274,11 +273,11 @@</span>
       * Reads the Manifest from the specified InputStream. The entry
       * names and attributes read will be merged in with the current
       * manifest entries.
       *
       * @param is the input stream
<span class="udiff-line-modified-removed">-      * @exception IOException if an I/O error has occurred</span>
<span class="udiff-line-modified-added">+      * @throws    IOException if an I/O error has occurred</span>
       */
      public void read(InputStream is) throws IOException {
          read(is, null);
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -335,11 +334,11 @@</span>
                  if (fis.peek() == &#39; &#39;) {
                      // name is wrapped
                      lastline = buf;
                      continue;
                  }
<span class="udiff-line-modified-removed">-                 name = new String(buf, 0, buf.length, UTF_8);</span>
<span class="udiff-line-modified-added">+                 name = new String(buf, 0, buf.length, UTF_8.INSTANCE);</span>
                  lastline = null;
              }
              Attributes attr = getAttributes(name);
              if (attr == null) {
                  attr = new Attributes(asize);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -360,15 +359,11 @@</span>
  
      private String parseName(byte[] lbuf, int len) {
          if (toLower(lbuf[0]) == &#39;n&#39; &amp;&amp; toLower(lbuf[1]) == &#39;a&#39; &amp;&amp;
              toLower(lbuf[2]) == &#39;m&#39; &amp;&amp; toLower(lbuf[3]) == &#39;e&#39; &amp;&amp;
              lbuf[4] == &#39;:&#39; &amp;&amp; lbuf[5] == &#39; &#39;) {
<span class="udiff-line-modified-removed">-             try {</span>
<span class="udiff-line-removed">-                 return new String(lbuf, 6, len - 6, UTF_8);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">-             catch (Exception e) {</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-modified-added">+             return new String(lbuf, 6, len - 6, UTF_8.INSTANCE);</span>
          }
          return null;
      }
  
      private int toLower(int c) {
</pre>
<center><a href="JavaUtilJarAccessImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="package-info.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>