<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/java/util/jar/Attributes.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../doc-files/coll-designfaq.html.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JarEntry.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/util/jar/Attributes.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 32,13 ***</span>
  import java.util.LinkedHashMap;
  import java.util.Map;
  import java.util.Objects;
  import java.util.Set;
  
<span class="line-modified">! import sun.util.logging.PlatformLogger;</span>
  
<span class="line-modified">! import static java.nio.charset.StandardCharsets.UTF_8;</span>
  
  /**
   * The Attributes class maps Manifest attribute names to associated string
   * values. Valid attribute names are case-insensitive, are restricted to
   * the ASCII characters in the set [0-9a-zA-Z_-], and cannot exceed 70
<span class="line-new-header">--- 32,15 ---</span>
  import java.util.LinkedHashMap;
  import java.util.Map;
  import java.util.Objects;
  import java.util.Set;
  
<span class="line-modified">! import jdk.internal.misc.VM;</span>
<span class="line-added">+ import jdk.internal.vm.annotation.Stable;</span>
  
<span class="line-modified">! import sun.nio.cs.UTF_8;</span>
<span class="line-added">+ import sun.util.logging.PlatformLogger;</span>
  
  /**
   * The Attributes class maps Manifest attribute names to associated string
   * values. Valid attribute names are case-insensitive, are restricted to
   * the ASCII characters in the set [0-9a-zA-Z_-], and cannot exceed 70
</pre>
<hr />
<pre>
<span class="line-old-header">*** 144,11 ***</span>
       * the attribute name, the old value is replaced.
       *
       * @param name the attribute name
       * @param value the attribute value
       * @return the previous value of the attribute, or null if none
<span class="line-modified">!      * @exception ClassCastException if the name is not a Attributes.Name</span>
       *            or the value is not a String
       */
      public Object put(Object name, Object value) {
          return map.put((Attributes.Name)name, (String)value);
      }
<span class="line-new-header">--- 146,11 ---</span>
       * the attribute name, the old value is replaced.
       *
       * @param name the attribute name
       * @param value the attribute value
       * @return the previous value of the attribute, or null if none
<span class="line-modified">!      * @throws    ClassCastException if the name is not a Attributes.Name</span>
       *            or the value is not a String
       */
      public Object put(Object name, Object value) {
          return map.put((Attributes.Name)name, (String)value);
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 165,11 ***</span>
       * &lt;/pre&gt;
       *
       * @param name the attribute name as a string
       * @param value the attribute value
       * @return the previous value of the attribute, or null if none
<span class="line-modified">!      * @exception IllegalArgumentException if the attribute name is invalid</span>
       */
      public String putValue(String name, String value) {
          return (String)put(Name.of(name), value);
      }
  
<span class="line-new-header">--- 167,11 ---</span>
       * &lt;/pre&gt;
       *
       * @param name the attribute name as a string
       * @param value the attribute value
       * @return the previous value of the attribute, or null if none
<span class="line-modified">!      * @throws    IllegalArgumentException if the attribute name is invalid</span>
       */
      public String putValue(String name, String value) {
          return (String)put(Name.of(name), value);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 209,11 ***</span>
      /**
       * Copies all of the attribute name-value mappings from the specified
       * Attributes to this Map. Duplicate mappings will be replaced.
       *
       * @param attr the Attributes to be stored in this map
<span class="line-modified">!      * @exception ClassCastException if attr is not an Attributes</span>
       */
      public void putAll(Map&lt;?,?&gt; attr) {
          // ## javac bug?
          if (!Attributes.class.isInstance(attr))
              throw new ClassCastException();
<span class="line-new-header">--- 211,11 ---</span>
      /**
       * Copies all of the attribute name-value mappings from the specified
       * Attributes to this Map. Duplicate mappings will be replaced.
       *
       * @param attr the Attributes to be stored in this map
<span class="line-modified">!      * @throws    ClassCastException if attr is not an Attributes</span>
       */
      public void putAll(Map&lt;?,?&gt; attr) {
          // ## javac bug?
          if (!Attributes.class.isInstance(attr))
              throw new ClassCastException();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 333,11 ***</span>
  
          if (version != null) {
              buffer.append(vername);
              buffer.append(&quot;: &quot;);
              buffer.append(version);
<span class="line-modified">!             out.write(buffer.toString().getBytes(UTF_8));</span>
              Manifest.println(out);
          }
  
          // write out all attributes except for the version
          // we wrote out earlier
<span class="line-new-header">--- 335,11 ---</span>
  
          if (version != null) {
              buffer.append(vername);
              buffer.append(&quot;: &quot;);
              buffer.append(version);
<span class="line-modified">!             out.write(buffer.toString().getBytes(UTF_8.INSTANCE));</span>
              Manifest.println(out);
          }
  
          // write out all attributes except for the version
          // we wrote out earlier
</pre>
<hr />
<pre>
<span class="line-old-header">*** 395,11 ***</span>
                  System.arraycopy(lbuf, 1, buf, lastline.length, len - 1);
                  if (is.peek() == &#39; &#39;) {
                      lastline = buf;
                      continue;
                  }
<span class="line-modified">!                 value = new String(buf, 0, buf.length, UTF_8);</span>
                  lastline = null;
              } else {
                  while (lbuf[i++] != &#39;:&#39;) {
                      if (i &gt;= len) {
                          throw new IOException(&quot;invalid header field (&quot;
<span class="line-new-header">--- 397,11 ---</span>
                  System.arraycopy(lbuf, 1, buf, lastline.length, len - 1);
                  if (is.peek() == &#39; &#39;) {
                      lastline = buf;
                      continue;
                  }
<span class="line-modified">!                 value = new String(buf, 0, buf.length, UTF_8.INSTANCE);</span>
                  lastline = null;
              } else {
                  while (lbuf[i++] != &#39;:&#39;) {
                      if (i &gt;= len) {
                          throw new IOException(&quot;invalid header field (&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 408,17 ***</span>
                  }
                  if (lbuf[i++] != &#39; &#39;) {
                      throw new IOException(&quot;invalid header field (&quot;
                                  + Manifest.getErrorPosition(filename, lineNumber) + &quot;)&quot;);
                  }
<span class="line-modified">!                 name = new String(lbuf, 0, i - 2, UTF_8);</span>
                  if (is.peek() == &#39; &#39;) {
                      lastline = new byte[len - i];
                      System.arraycopy(lbuf, i, lastline, 0, len - i);
                      continue;
                  }
<span class="line-modified">!                 value = new String(lbuf, i, len - i, UTF_8);</span>
              }
              try {
                  if ((putValue(name, value) != null) &amp;&amp; (!lineContinued)) {
                      PlatformLogger.getLogger(&quot;java.util.jar&quot;).warning(
                                       &quot;Duplicate name in Manifest: &quot; + name
<span class="line-new-header">--- 410,17 ---</span>
                  }
                  if (lbuf[i++] != &#39; &#39;) {
                      throw new IOException(&quot;invalid header field (&quot;
                                  + Manifest.getErrorPosition(filename, lineNumber) + &quot;)&quot;);
                  }
<span class="line-modified">!                 name = new String(lbuf, 0, i - 2, UTF_8.INSTANCE);</span>
                  if (is.peek() == &#39; &#39;) {
                      lastline = new byte[len - i];
                      System.arraycopy(lbuf, i, lastline, 0, len - i);
                      continue;
                  }
<span class="line-modified">!                 value = new String(lbuf, i, len - i, UTF_8.INSTANCE);</span>
              }
              try {
                  if ((putValue(name, value) != null) &amp;&amp; (!lineContinued)) {
                      PlatformLogger.getLogger(&quot;java.util.jar&quot;).warning(
                                       &quot;Duplicate name in Manifest: &quot; + name
</pre>
<hr />
<pre>
<span class="line-old-header">*** 452,11 ***</span>
          private final int hashCode;
  
          /**
           * Avoid allocation for common Names
           */
<span class="line-modified">!         private static final Map&lt;String, Name&gt; KNOWN_NAMES;</span>
  
          static final Name of(String name) {
              Name n = KNOWN_NAMES.get(name);
              if (n != null) {
                  return n;
<span class="line-new-header">--- 454,11 ---</span>
          private final int hashCode;
  
          /**
           * Avoid allocation for common Names
           */
<span class="line-modified">!         private static @Stable Map&lt;String, Name&gt; KNOWN_NAMES;</span>
  
          static final Name of(String name) {
              Name n = KNOWN_NAMES.get(name);
              if (n != null) {
                  return n;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 466,13 ***</span>
  
          /**
           * Constructs a new attribute name using the given string name.
           *
           * @param name the attribute string name
<span class="line-modified">!          * @exception IllegalArgumentException if the attribute name was</span>
           *            invalid
<span class="line-modified">!          * @exception NullPointerException if the attribute name was null</span>
           */
          public Name(String name) {
              this.hashCode = hash(name);
              this.name = name.intern();
          }
<span class="line-new-header">--- 468,13 ---</span>
  
          /**
           * Constructs a new attribute name using the given string name.
           *
           * @param name the attribute string name
<span class="line-modified">!          * @throws    IllegalArgumentException if the attribute name was</span>
           *            invalid
<span class="line-modified">!          * @throws    NullPointerException if the attribute name was null</span>
           */
          public Name(String name) {
              this.hashCode = hash(name);
              this.name = name.intern();
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 539,179 ***</span>
           * manifest attribute. This attribute indicates the version number
           * of the manifest standard to which a JAR file&#39;s manifest conforms.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#jar-manifest&quot;&gt;
           *      Manifest and Signature Specification&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name MANIFEST_VERSION = new Name(&quot;Manifest-Version&quot;);</span>
  
          /**
           * {@code Name} object for {@code Signature-Version}
           * manifest attribute used when signing JAR files.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#jar-manifest&quot;&gt;
           *      Manifest and Signature Specification&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name SIGNATURE_VERSION = new Name(&quot;Signature-Version&quot;);</span>
  
          /**
           * {@code Name} object for {@code Content-Type}
           * manifest attribute.
           */
<span class="line-modified">!         public static final Name CONTENT_TYPE = new Name(&quot;Content-Type&quot;);</span>
  
          /**
           * {@code Name} object for {@code Class-Path}
           * manifest attribute.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#class-path-attribute&quot;&gt;
           *      JAR file specification&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name CLASS_PATH = new Name(&quot;Class-Path&quot;);</span>
  
          /**
           * {@code Name} object for {@code Main-Class} manifest
           * attribute used for launching applications packaged in JAR files.
           * The {@code Main-Class} attribute is used in conjunction
           * with the {@code -jar} command-line option of the
           * {@code java} application launcher.
           */
<span class="line-modified">!         public static final Name MAIN_CLASS = new Name(&quot;Main-Class&quot;);</span>
  
          /**
           * {@code Name} object for {@code Sealed} manifest attribute
           * used for sealing.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#package-sealing&quot;&gt;
           *      Package Sealing&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name SEALED = new Name(&quot;Sealed&quot;);</span>
  
          /**
           * {@code Name} object for {@code Extension-List} manifest attribute
           * used for the extension mechanism that is no longer supported.
           */
<span class="line-modified">!         public static final Name EXTENSION_LIST = new Name(&quot;Extension-List&quot;);</span>
  
          /**
           * {@code Name} object for {@code Extension-Name} manifest attribute.
           * used for the extension mechanism that is no longer supported.
           */
<span class="line-modified">!         public static final Name EXTENSION_NAME = new Name(&quot;Extension-Name&quot;);</span>
  
          /**
           * {@code Name} object for {@code Extension-Installation} manifest attribute.
           *
           * @deprecated Extension mechanism is no longer supported.
           */
          @Deprecated
<span class="line-modified">!         public static final Name EXTENSION_INSTALLATION = new Name(&quot;Extension-Installation&quot;);</span>
  
          /**
           * {@code Name} object for {@code Implementation-Title}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name IMPLEMENTATION_TITLE = new Name(&quot;Implementation-Title&quot;);</span>
  
          /**
           * {@code Name} object for {@code Implementation-Version}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name IMPLEMENTATION_VERSION = new Name(&quot;Implementation-Version&quot;);</span>
  
          /**
           * {@code Name} object for {@code Implementation-Vendor}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name IMPLEMENTATION_VENDOR = new Name(&quot;Implementation-Vendor&quot;);</span>
  
          /**
           * {@code Name} object for {@code Implementation-Vendor-Id}
           * manifest attribute.
           *
           * @deprecated Extension mechanism is no longer supported.
           */
          @Deprecated
<span class="line-modified">!         public static final Name IMPLEMENTATION_VENDOR_ID = new Name(&quot;Implementation-Vendor-Id&quot;);</span>
  
          /**
           * {@code Name} object for {@code Implementation-URL}
           * manifest attribute.
           *
           * @deprecated Extension mechanism is no longer supported.
           */
          @Deprecated
<span class="line-modified">!         public static final Name IMPLEMENTATION_URL = new Name(&quot;Implementation-URL&quot;);</span>
  
          /**
           * {@code Name} object for {@code Specification-Title}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name SPECIFICATION_TITLE = new Name(&quot;Specification-Title&quot;);</span>
  
          /**
           * {@code Name} object for {@code Specification-Version}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name SPECIFICATION_VERSION = new Name(&quot;Specification-Version&quot;);</span>
  
          /**
           * {@code Name} object for {@code Specification-Vendor}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name SPECIFICATION_VENDOR = new Name(&quot;Specification-Vendor&quot;);</span>
  
          /**
           * {@code Name} object for {@code Multi-Release}
           * manifest attribute that indicates this is a multi-release JAR file.
           *
           * @since   9
           */
<span class="line-modified">!         public static final Name MULTI_RELEASE = new Name(&quot;Multi-Release&quot;);</span>
  
          private static void addName(Map&lt;String, Name&gt; names, Name name) {
              names.put(name.name, name);
          }
  
          static {
<span class="line-modified">!             var names = new HashMap&lt;String, Name&gt;(64);</span>
<span class="line-modified">!             addName(names, MANIFEST_VERSION);</span>
<span class="line-modified">!             addName(names, SIGNATURE_VERSION);</span>
<span class="line-modified">!             addName(names, CONTENT_TYPE);</span>
<span class="line-modified">!             addName(names, CLASS_PATH);</span>
<span class="line-modified">!             addName(names, MAIN_CLASS);</span>
<span class="line-modified">!             addName(names, SEALED);</span>
<span class="line-modified">!             addName(names, EXTENSION_LIST);</span>
<span class="line-modified">!             addName(names, EXTENSION_NAME);</span>
<span class="line-modified">!             addName(names, IMPLEMENTATION_TITLE);</span>
<span class="line-modified">!             addName(names, IMPLEMENTATION_VERSION);</span>
<span class="line-modified">!             addName(names, IMPLEMENTATION_VENDOR);</span>
<span class="line-modified">!             addName(names, SPECIFICATION_TITLE);</span>
<span class="line-modified">!             addName(names, SPECIFICATION_VERSION);</span>
<span class="line-modified">!             addName(names, SPECIFICATION_VENDOR);</span>
<span class="line-modified">!             addName(names, MULTI_RELEASE);</span>
<span class="line-modified">! </span>
<span class="line-modified">!             // Common attributes used in MANIFEST.MF et.al; adding these has a</span>
<span class="line-modified">!             // small footprint cost, but is likely to be quickly paid for by</span>
<span class="line-modified">!             // reducing allocation when reading and parsing typical manifests</span>
<span class="line-modified">!             addName(names, new Name(&quot;Add-Exports&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Add-Opens&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Ant-Version&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Archiver-Version&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Build-Jdk&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Built-By&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bnd-LastModified&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-Description&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-DocURL&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-License&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-ManifestVersion&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-Name&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-Vendor&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-Version&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Bundle-SymbolicName&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Created-By&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Export-Package&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Import-Package&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;Name&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;SHA1-Digest&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;X-Compile-Source-JDK&quot;));</span>
<span class="line-modified">!             addName(names, new Name(&quot;X-Compile-Target-JDK&quot;));</span>
<span class="line-modified">!             KNOWN_NAMES = names;</span>
          }
      }
  }
<span class="line-new-header">--- 541,217 ---</span>
           * manifest attribute. This attribute indicates the version number
           * of the manifest standard to which a JAR file&#39;s manifest conforms.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#jar-manifest&quot;&gt;
           *      Manifest and Signature Specification&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name MANIFEST_VERSION;</span>
  
          /**
           * {@code Name} object for {@code Signature-Version}
           * manifest attribute used when signing JAR files.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#jar-manifest&quot;&gt;
           *      Manifest and Signature Specification&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name SIGNATURE_VERSION;</span>
  
          /**
           * {@code Name} object for {@code Content-Type}
           * manifest attribute.
           */
<span class="line-modified">!         public static final Name CONTENT_TYPE;</span>
  
          /**
           * {@code Name} object for {@code Class-Path}
           * manifest attribute.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#class-path-attribute&quot;&gt;
           *      JAR file specification&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name CLASS_PATH;</span>
  
          /**
           * {@code Name} object for {@code Main-Class} manifest
           * attribute used for launching applications packaged in JAR files.
           * The {@code Main-Class} attribute is used in conjunction
           * with the {@code -jar} command-line option of the
           * {@code java} application launcher.
           */
<span class="line-modified">!         public static final Name MAIN_CLASS;</span>
  
          /**
           * {@code Name} object for {@code Sealed} manifest attribute
           * used for sealing.
           * @see &lt;a href=&quot;{@docRoot}/../specs/jar/jar.html#package-sealing&quot;&gt;
           *      Package Sealing&lt;/a&gt;
           */
<span class="line-modified">!         public static final Name SEALED;</span>
  
          /**
           * {@code Name} object for {@code Extension-List} manifest attribute
           * used for the extension mechanism that is no longer supported.
           */
<span class="line-modified">!         public static final Name EXTENSION_LIST;</span>
  
          /**
           * {@code Name} object for {@code Extension-Name} manifest attribute.
           * used for the extension mechanism that is no longer supported.
           */
<span class="line-modified">!         public static final Name EXTENSION_NAME;</span>
  
          /**
           * {@code Name} object for {@code Extension-Installation} manifest attribute.
           *
           * @deprecated Extension mechanism is no longer supported.
           */
          @Deprecated
<span class="line-modified">!         public static final Name EXTENSION_INSTALLATION;</span>
  
          /**
           * {@code Name} object for {@code Implementation-Title}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name IMPLEMENTATION_TITLE;</span>
  
          /**
           * {@code Name} object for {@code Implementation-Version}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name IMPLEMENTATION_VERSION;</span>
  
          /**
           * {@code Name} object for {@code Implementation-Vendor}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name IMPLEMENTATION_VENDOR;</span>
  
          /**
           * {@code Name} object for {@code Implementation-Vendor-Id}
           * manifest attribute.
           *
           * @deprecated Extension mechanism is no longer supported.
           */
          @Deprecated
<span class="line-modified">!         public static final Name IMPLEMENTATION_VENDOR_ID;</span>
  
          /**
           * {@code Name} object for {@code Implementation-URL}
           * manifest attribute.
           *
           * @deprecated Extension mechanism is no longer supported.
           */
          @Deprecated
<span class="line-modified">!         public static final Name IMPLEMENTATION_URL;</span>
  
          /**
           * {@code Name} object for {@code Specification-Title}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name SPECIFICATION_TITLE;</span>
  
          /**
           * {@code Name} object for {@code Specification-Version}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name SPECIFICATION_VERSION;</span>
  
          /**
           * {@code Name} object for {@code Specification-Vendor}
           * manifest attribute used for package versioning.
           */
<span class="line-modified">!         public static final Name SPECIFICATION_VENDOR;</span>
  
          /**
           * {@code Name} object for {@code Multi-Release}
           * manifest attribute that indicates this is a multi-release JAR file.
           *
           * @since   9
           */
<span class="line-modified">!         public static final Name MULTI_RELEASE;</span>
  
          private static void addName(Map&lt;String, Name&gt; names, Name name) {
              names.put(name.name, name);
          }
  
          static {
<span class="line-modified">! </span>
<span class="line-modified">!             VM.initializeFromArchive(Attributes.Name.class);</span>
<span class="line-modified">! </span>
<span class="line-modified">!             if (KNOWN_NAMES == null) {</span>
<span class="line-modified">!                 MANIFEST_VERSION = new Name(&quot;Manifest-Version&quot;);</span>
<span class="line-modified">!                 SIGNATURE_VERSION = new Name(&quot;Signature-Version&quot;);</span>
<span class="line-modified">!                 CONTENT_TYPE = new Name(&quot;Content-Type&quot;);</span>
<span class="line-modified">!                 CLASS_PATH = new Name(&quot;Class-Path&quot;);</span>
<span class="line-modified">!                 MAIN_CLASS = new Name(&quot;Main-Class&quot;);</span>
<span class="line-modified">!                 SEALED = new Name(&quot;Sealed&quot;);</span>
<span class="line-modified">!                 EXTENSION_LIST = new Name(&quot;Extension-List&quot;);</span>
<span class="line-modified">!                 EXTENSION_NAME = new Name(&quot;Extension-Name&quot;);</span>
<span class="line-modified">!                 EXTENSION_INSTALLATION = new Name(&quot;Extension-Installation&quot;);</span>
<span class="line-modified">!                 IMPLEMENTATION_TITLE = new Name(&quot;Implementation-Title&quot;);</span>
<span class="line-modified">!                 IMPLEMENTATION_VERSION = new Name(&quot;Implementation-Version&quot;);</span>
<span class="line-modified">!                 IMPLEMENTATION_VENDOR = new Name(&quot;Implementation-Vendor&quot;);</span>
<span class="line-modified">!                 IMPLEMENTATION_VENDOR_ID = new Name(&quot;Implementation-Vendor-Id&quot;);</span>
<span class="line-modified">!                 IMPLEMENTATION_URL = new Name(&quot;Implementation-URL&quot;);</span>
<span class="line-modified">!                 SPECIFICATION_TITLE = new Name(&quot;Specification-Title&quot;);</span>
<span class="line-modified">!                 SPECIFICATION_VERSION = new Name(&quot;Specification-Version&quot;);</span>
<span class="line-modified">!                 SPECIFICATION_VENDOR = new Name(&quot;Specification-Vendor&quot;);</span>
<span class="line-modified">!                 MULTI_RELEASE = new Name(&quot;Multi-Release&quot;);</span>
<span class="line-modified">! </span>
<span class="line-modified">!                 var names = new HashMap&lt;String, Name&gt;(64);</span>
<span class="line-modified">!                 addName(names, MANIFEST_VERSION);</span>
<span class="line-modified">!                 addName(names, SIGNATURE_VERSION);</span>
<span class="line-modified">!                 addName(names, CONTENT_TYPE);</span>
<span class="line-modified">!                 addName(names, CLASS_PATH);</span>
<span class="line-modified">!                 addName(names, MAIN_CLASS);</span>
<span class="line-modified">!                 addName(names, SEALED);</span>
<span class="line-modified">!                 addName(names, EXTENSION_LIST);</span>
<span class="line-modified">!                 addName(names, EXTENSION_NAME);</span>
<span class="line-modified">!                 addName(names, EXTENSION_INSTALLATION);</span>
<span class="line-modified">!                 addName(names, IMPLEMENTATION_TITLE);</span>
<span class="line-modified">!                 addName(names, IMPLEMENTATION_VERSION);</span>
<span class="line-modified">!                 addName(names, IMPLEMENTATION_VENDOR);</span>
<span class="line-modified">!                 addName(names, IMPLEMENTATION_VENDOR_ID);</span>
<span class="line-modified">!                 addName(names, IMPLEMENTATION_URL);</span>
<span class="line-modified">!                 addName(names, SPECIFICATION_TITLE);</span>
<span class="line-modified">!                 addName(names, SPECIFICATION_VERSION);</span>
<span class="line-modified">!                 addName(names, SPECIFICATION_VENDOR);</span>
<span class="line-modified">!                 addName(names, MULTI_RELEASE);</span>
<span class="line-modified">! </span>
<span class="line-added">+                 // Common attributes used in MANIFEST.MF et.al; adding these has a</span>
<span class="line-added">+                 // small footprint cost, but is likely to be quickly paid for by</span>
<span class="line-added">+                 // reducing allocation when reading and parsing typical manifests</span>
<span class="line-added">+ </span>
<span class="line-added">+                 // JDK internal attributes</span>
<span class="line-added">+                 addName(names, new Name(&quot;Add-Exports&quot;));</span>
<span class="line-added">+                 addName(names, new Name(&quot;Add-Opens&quot;));</span>
<span class="line-added">+                 // LauncherHelper attributes</span>
<span class="line-added">+                 addName(names, new Name(&quot;Launcher-Agent-Class&quot;));</span>
<span class="line-added">+                 addName(names, new Name(&quot;JavaFX-Application-Class&quot;));</span>
<span class="line-added">+                 // jarsigner attributes</span>
<span class="line-added">+                 addName(names, new Name(&quot;Name&quot;));</span>
<span class="line-added">+                 addName(names, new Name(&quot;Created-By&quot;));</span>
<span class="line-added">+                 addName(names, new Name(&quot;SHA1-Digest&quot;));</span>
<span class="line-added">+                 addName(names, new Name(&quot;SHA-256-Digest&quot;));</span>
<span class="line-added">+                 KNOWN_NAMES = Map.copyOf(names);</span>
<span class="line-added">+             } else {</span>
<span class="line-added">+                 // Even if KNOWN_NAMES was read from archive, we still need</span>
<span class="line-added">+                 // to initialize the public constants</span>
<span class="line-added">+                 MANIFEST_VERSION = KNOWN_NAMES.get(&quot;Manifest-Version&quot;);</span>
<span class="line-added">+                 SIGNATURE_VERSION = KNOWN_NAMES.get(&quot;Signature-Version&quot;);</span>
<span class="line-added">+                 CONTENT_TYPE = KNOWN_NAMES.get(&quot;Content-Type&quot;);</span>
<span class="line-added">+                 CLASS_PATH = KNOWN_NAMES.get(&quot;Class-Path&quot;);</span>
<span class="line-added">+                 MAIN_CLASS = KNOWN_NAMES.get(&quot;Main-Class&quot;);</span>
<span class="line-added">+                 SEALED = KNOWN_NAMES.get(&quot;Sealed&quot;);</span>
<span class="line-added">+                 EXTENSION_LIST = KNOWN_NAMES.get(&quot;Extension-List&quot;);</span>
<span class="line-added">+                 EXTENSION_NAME = KNOWN_NAMES.get(&quot;Extension-Name&quot;);</span>
<span class="line-added">+                 EXTENSION_INSTALLATION = KNOWN_NAMES.get(&quot;Extension-Installation&quot;);</span>
<span class="line-added">+                 IMPLEMENTATION_TITLE = KNOWN_NAMES.get(&quot;Implementation-Title&quot;);</span>
<span class="line-added">+                 IMPLEMENTATION_VERSION = KNOWN_NAMES.get(&quot;Implementation-Version&quot;);</span>
<span class="line-added">+                 IMPLEMENTATION_VENDOR = KNOWN_NAMES.get(&quot;Implementation-Vendor&quot;);</span>
<span class="line-added">+                 IMPLEMENTATION_VENDOR_ID = KNOWN_NAMES.get(&quot;Implementation-Vendor-Id&quot;);</span>
<span class="line-added">+                 IMPLEMENTATION_URL = KNOWN_NAMES.get(&quot;Implementation-URL&quot;);</span>
<span class="line-added">+                 SPECIFICATION_TITLE = KNOWN_NAMES.get(&quot;Specification-Title&quot;);</span>
<span class="line-added">+                 SPECIFICATION_VERSION = KNOWN_NAMES.get(&quot;Specification-Version&quot;);</span>
<span class="line-added">+                 SPECIFICATION_VENDOR = KNOWN_NAMES.get(&quot;Specification-Vendor&quot;);</span>
<span class="line-added">+                 MULTI_RELEASE = KNOWN_NAMES.get(&quot;Multi-Release&quot;);</span>
<span class="line-added">+             }</span>
          }
      }
  }
</pre>
<center><a href="../doc-files/coll-designfaq.html.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JarEntry.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>