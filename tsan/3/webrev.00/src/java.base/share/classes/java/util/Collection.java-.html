<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.base/share/classes/java/util/Collection.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package java.util;
 27 
 28 import java.util.function.IntFunction;
 29 import java.util.function.Predicate;
 30 import java.util.stream.Stream;
 31 import java.util.stream.StreamSupport;
 32 
 33 /**
 34  * The root interface in the &lt;i&gt;collection hierarchy&lt;/i&gt;.  A collection
 35  * represents a group of objects, known as its &lt;i&gt;elements&lt;/i&gt;.  Some
 36  * collections allow duplicate elements and others do not.  Some are ordered
 37  * and others unordered.  The JDK does not provide any &lt;i&gt;direct&lt;/i&gt;
 38  * implementations of this interface: it provides implementations of more
 39  * specific subinterfaces like {@code Set} and {@code List}.  This interface
 40  * is typically used to pass collections around and manipulate them where
 41  * maximum generality is desired.
 42  *
 43  * &lt;p&gt;&lt;i&gt;Bags&lt;/i&gt; or &lt;i&gt;multisets&lt;/i&gt; (unordered collections that may contain
 44  * duplicate elements) should implement this interface directly.
 45  *
 46  * &lt;p&gt;All general-purpose {@code Collection} implementation classes (which
 47  * typically implement {@code Collection} indirectly through one of its
 48  * subinterfaces) should provide two &quot;standard&quot; constructors: a void (no
 49  * arguments) constructor, which creates an empty collection, and a
 50  * constructor with a single argument of type {@code Collection}, which
 51  * creates a new collection with the same elements as its argument.  In
 52  * effect, the latter constructor allows the user to copy any collection,
 53  * producing an equivalent collection of the desired implementation type.
 54  * There is no way to enforce this convention (as interfaces cannot contain
 55  * constructors) but all of the general-purpose {@code Collection}
 56  * implementations in the Java platform libraries comply.
 57  *
 58  * &lt;p&gt;Certain methods are specified to be
 59  * &lt;i&gt;optional&lt;/i&gt;. If a collection implementation doesn&#39;t implement a
 60  * particular operation, it should define the corresponding method to throw
 61  * {@code UnsupportedOperationException}. Such methods are marked &quot;optional
 62  * operation&quot; in method specifications of the collections interfaces.
 63  *
 64  * &lt;p&gt;&lt;a id=&quot;optional-restrictions&quot;&gt;&lt;/a&gt;Some collection implementations
 65  * have restrictions on the elements that they may contain.
 66  * For example, some implementations prohibit null elements,
 67  * and some have restrictions on the types of their elements.  Attempting to
 68  * add an ineligible element throws an unchecked exception, typically
 69  * {@code NullPointerException} or {@code ClassCastException}.  Attempting
 70  * to query the presence of an ineligible element may throw an exception,
 71  * or it may simply return false; some implementations will exhibit the former
 72  * behavior and some will exhibit the latter.  More generally, attempting an
 73  * operation on an ineligible element whose completion would not result in
 74  * the insertion of an ineligible element into the collection may throw an
 75  * exception or it may succeed, at the option of the implementation.
 76  * Such exceptions are marked as &quot;optional&quot; in the specification for this
 77  * interface.
 78  *
 79  * &lt;p&gt;It is up to each collection to determine its own synchronization
 80  * policy.  In the absence of a stronger guarantee by the
 81  * implementation, undefined behavior may result from the invocation
 82  * of any method on a collection that is being mutated by another
 83  * thread; this includes direct invocations, passing the collection to
 84  * a method that might perform invocations, and using an existing
 85  * iterator to examine the collection.
 86  *
 87  * &lt;p&gt;Many methods in Collections Framework interfaces are defined in
 88  * terms of the {@link Object#equals(Object) equals} method.  For example,
 89  * the specification for the {@link #contains(Object) contains(Object o)}
 90  * method says: &quot;returns {@code true} if and only if this collection
 91  * contains at least one element {@code e} such that
 92  * {@code (o==null ? e==null : o.equals(e))}.&quot;  This specification should
 93  * &lt;i&gt;not&lt;/i&gt; be construed to imply that invoking {@code Collection.contains}
 94  * with a non-null argument {@code o} will cause {@code o.equals(e)} to be
 95  * invoked for any element {@code e}.  Implementations are free to implement
 96  * optimizations whereby the {@code equals} invocation is avoided, for
 97  * example, by first comparing the hash codes of the two elements.  (The
 98  * {@link Object#hashCode()} specification guarantees that two objects with
 99  * unequal hash codes cannot be equal.)  More generally, implementations of
100  * the various Collections Framework interfaces are free to take advantage of
101  * the specified behavior of underlying {@link Object} methods wherever the
102  * implementor deems it appropriate.
103  *
104  * &lt;p&gt;Some collection operations which perform recursive traversal of the
105  * collection may fail with an exception for self-referential instances where
106  * the collection directly or indirectly contains itself. This includes the
107  * {@code clone()}, {@code equals()}, {@code hashCode()} and {@code toString()}
108  * methods. Implementations may optionally handle the self-referential scenario,
109  * however most current implementations do not do so.
110  *
111  * &lt;h2&gt;&lt;a id=&quot;view&quot;&gt;View Collections&lt;/a&gt;&lt;/h2&gt;
112  *
113  * &lt;p&gt;Most collections manage storage for elements they contain. By contrast, &lt;i&gt;view
114  * collections&lt;/i&gt; themselves do not store elements, but instead they rely on a
115  * backing collection to store the actual elements. Operations that are not handled
116  * by the view collection itself are delegated to the backing collection. Examples of
117  * view collections include the wrapper collections returned by methods such as
118  * {@link Collections#checkedCollection Collections.checkedCollection},
119  * {@link Collections#synchronizedCollection Collections.synchronizedCollection}, and
120  * {@link Collections#unmodifiableCollection Collections.unmodifiableCollection}.
121  * Other examples of view collections include collections that provide a
122  * different representation of the same elements, for example, as
123  * provided by {@link List#subList List.subList},
124  * {@link NavigableSet#subSet NavigableSet.subSet}, or
125  * {@link Map#entrySet Map.entrySet}.
126  * Any changes made to the backing collection are visible in the view collection.
127  * Correspondingly, any changes made to the view collection &amp;mdash; if changes
128  * are permitted &amp;mdash; are written through to the backing collection.
129  * Although they technically aren&#39;t collections, instances of
130  * {@link Iterator} and {@link ListIterator} can also allow modifications
131  * to be written through to the backing collection, and in some cases,
132  * modifications to the backing collection will be visible to the Iterator
133  * during iteration.
134  *
135  * &lt;h2&gt;&lt;a id=&quot;unmodifiable&quot;&gt;Unmodifiable Collections&lt;/a&gt;&lt;/h2&gt;
136  *
137  * &lt;p&gt;Certain methods of this interface are considered &quot;destructive&quot; and are called
138  * &quot;mutator&quot; methods in that they modify the group of objects contained within
139  * the collection on which they operate. They can be specified to throw
140  * {@code UnsupportedOperationException} if this collection implementation
141  * does not support the operation. Such methods should (but are not required
142  * to) throw an {@code UnsupportedOperationException} if the invocation would
143  * have no effect on the collection. For example, consider a collection that
144  * does not support the {@link #add add} operation. What will happen if the
145  * {@link #addAll addAll} method is invoked on this collection, with an empty
146  * collection as the argument? The addition of zero elements has no effect,
147  * so it is permissible for this collection simply to do nothing and not to throw
148  * an exception. However, it is recommended that such cases throw an exception
149  * unconditionally, as throwing only in certain cases can lead to
150  * programming errors.
151  *
152  * &lt;p&gt;An &lt;i&gt;unmodifiable collection&lt;/i&gt; is a collection, all of whose
153  * mutator methods (as defined above) are specified to throw
154  * {@code UnsupportedOperationException}. Such a collection thus cannot be
155  * modified by calling any methods on it. For a collection to be properly
156  * unmodifiable, any view collections derived from it must also be unmodifiable.
157  * For example, if a List is unmodifiable, the List returned by
158  * {@link List#subList List.subList} is also unmodifiable.
159  *
160  * &lt;p&gt;An unmodifiable collection is not necessarily immutable. If the
161  * contained elements are mutable, the entire collection is clearly
162  * mutable, even though it might be unmodifiable. For example, consider
163  * two unmodifiable lists containing mutable elements. The result of calling
164  * {@code list1.equals(list2)} might differ from one call to the next if
165  * the elements had been mutated, even though both lists are unmodifiable.
166  * However, if an unmodifiable collection contains all immutable elements,
167  * it can be considered effectively immutable.
168  *
169  * &lt;h2&gt;&lt;a id=&quot;unmodview&quot;&gt;Unmodifiable View Collections&lt;/a&gt;&lt;/h2&gt;
170  *
171  * &lt;p&gt;An &lt;i&gt;unmodifiable view collection&lt;/i&gt; is a collection that is unmodifiable
172  * and that is also a view onto a backing collection. Its mutator methods throw
173  * {@code UnsupportedOperationException}, as described above, while
174  * reading and querying methods are delegated to the backing collection.
175  * The effect is to provide read-only access to the backing collection.
176  * This is useful for a component to provide users with read access to
177  * an internal collection, while preventing them from modifying such
178  * collections unexpectedly. Examples of unmodifiable view collections
179  * are those returned by the
180  * {@link Collections#unmodifiableCollection Collections.unmodifiableCollection},
181  * {@link Collections#unmodifiableList Collections.unmodifiableList}, and
182  * related methods.
183  *
184  * &lt;p&gt;Note that changes to the backing collection might still be possible,
185  * and if they occur, they are visible through the unmodifiable view. Thus,
186  * an unmodifiable view collection is not necessarily immutable. However,
187  * if the backing collection of an unmodifiable view is effectively immutable,
188  * or if the only reference to the backing collection is through an
189  * unmodifiable view, the view can be considered effectively immutable.
190  *
191  * &lt;p&gt;This interface is a member of the
192  * &lt;a href=&quot;{@docRoot}/java.base/java/util/package-summary.html#CollectionsFramework&quot;&gt;
193  * Java Collections Framework&lt;/a&gt;.
194  *
195  * @implSpec
196  * The default method implementations (inherited or otherwise) do not apply any
197  * synchronization protocol.  If a {@code Collection} implementation has a
198  * specific synchronization protocol, then it must override default
199  * implementations to apply that protocol.
200  *
201  * @param &lt;E&gt; the type of elements in this collection
202  *
203  * @author  Josh Bloch
204  * @author  Neal Gafter
205  * @see     Set
206  * @see     List
207  * @see     Map
208  * @see     SortedSet
209  * @see     SortedMap
210  * @see     HashSet
211  * @see     TreeSet
212  * @see     ArrayList
213  * @see     LinkedList
214  * @see     Vector
215  * @see     Collections
216  * @see     Arrays
217  * @see     AbstractCollection
218  * @since 1.2
219  */
220 
221 public interface Collection&lt;E&gt; extends Iterable&lt;E&gt; {
222     // Query Operations
223 
224     /**
225      * Returns the number of elements in this collection.  If this collection
226      * contains more than {@code Integer.MAX_VALUE} elements, returns
227      * {@code Integer.MAX_VALUE}.
228      *
229      * @return the number of elements in this collection
230      */
231     int size();
232 
233     /**
234      * Returns {@code true} if this collection contains no elements.
235      *
236      * @return {@code true} if this collection contains no elements
237      */
238     boolean isEmpty();
239 
240     /**
241      * Returns {@code true} if this collection contains the specified element.
242      * More formally, returns {@code true} if and only if this collection
243      * contains at least one element {@code e} such that
244      * {@code Objects.equals(o, e)}.
245      *
246      * @param o element whose presence in this collection is to be tested
247      * @return {@code true} if this collection contains the specified
248      *         element
249      * @throws ClassCastException if the type of the specified element
250      *         is incompatible with this collection
251      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
252      * @throws NullPointerException if the specified element is null and this
253      *         collection does not permit null elements
254      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
255      */
256     boolean contains(Object o);
257 
258     /**
259      * Returns an iterator over the elements in this collection.  There are no
260      * guarantees concerning the order in which the elements are returned
261      * (unless this collection is an instance of some class that provides a
262      * guarantee).
263      *
264      * @return an {@code Iterator} over the elements in this collection
265      */
266     Iterator&lt;E&gt; iterator();
267 
268     /**
269      * Returns an array containing all of the elements in this collection.
270      * If this collection makes any guarantees as to what order its elements
271      * are returned by its iterator, this method must return the elements in
272      * the same order. The returned array&#39;s {@linkplain Class#getComponentType
273      * runtime component type} is {@code Object}.
274      *
275      * &lt;p&gt;The returned array will be &quot;safe&quot; in that no references to it are
276      * maintained by this collection.  (In other words, this method must
277      * allocate a new array even if this collection is backed by an array).
278      * The caller is thus free to modify the returned array.
279      *
280      * @apiNote
281      * This method acts as a bridge between array-based and collection-based APIs.
282      * It returns an array whose runtime type is {@code Object[]}.
283      * Use {@link #toArray(Object[]) toArray(T[])} to reuse an existing
284      * array, or use {@link #toArray(IntFunction)} to control the runtime type
285      * of the array.
286      *
287      * @return an array, whose {@linkplain Class#getComponentType runtime component
288      * type} is {@code Object}, containing all of the elements in this collection
289      */
290     Object[] toArray();
291 
292     /**
293      * Returns an array containing all of the elements in this collection;
294      * the runtime type of the returned array is that of the specified array.
295      * If the collection fits in the specified array, it is returned therein.
296      * Otherwise, a new array is allocated with the runtime type of the
297      * specified array and the size of this collection.
298      *
299      * &lt;p&gt;If this collection fits in the specified array with room to spare
300      * (i.e., the array has more elements than this collection), the element
301      * in the array immediately following the end of the collection is set to
302      * {@code null}.  (This is useful in determining the length of this
303      * collection &lt;i&gt;only&lt;/i&gt; if the caller knows that this collection does
304      * not contain any {@code null} elements.)
305      *
306      * &lt;p&gt;If this collection makes any guarantees as to what order its elements
307      * are returned by its iterator, this method must return the elements in
308      * the same order.
309      *
310      * @apiNote
311      * This method acts as a bridge between array-based and collection-based APIs.
312      * It allows an existing array to be reused under certain circumstances.
313      * Use {@link #toArray()} to create an array whose runtime type is {@code Object[]},
314      * or use {@link #toArray(IntFunction)} to control the runtime type of
315      * the array.
316      *
317      * &lt;p&gt;Suppose {@code x} is a collection known to contain only strings.
318      * The following code can be used to dump the collection into a previously
319      * allocated {@code String} array:
320      *
321      * &lt;pre&gt;
322      *     String[] y = new String[SIZE];
323      *     ...
324      *     y = x.toArray(y);&lt;/pre&gt;
325      *
326      * &lt;p&gt;The return value is reassigned to the variable {@code y}, because a
327      * new array will be allocated and returned if the collection {@code x} has
328      * too many elements to fit into the existing array {@code y}.
329      *
330      * &lt;p&gt;Note that {@code toArray(new Object[0])} is identical in function to
331      * {@code toArray()}.
332      *
333      * @param &lt;T&gt; the component type of the array to contain the collection
334      * @param a the array into which the elements of this collection are to be
335      *        stored, if it is big enough; otherwise, a new array of the same
336      *        runtime type is allocated for this purpose.
337      * @return an array containing all of the elements in this collection
338      * @throws ArrayStoreException if the runtime type of any element in this
339      *         collection is not assignable to the {@linkplain Class#getComponentType
340      *         runtime component type} of the specified array
341      * @throws NullPointerException if the specified array is null
342      */
343     &lt;T&gt; T[] toArray(T[] a);
344 
345     /**
346      * Returns an array containing all of the elements in this collection,
347      * using the provided {@code generator} function to allocate the returned array.
348      *
349      * &lt;p&gt;If this collection makes any guarantees as to what order its elements
350      * are returned by its iterator, this method must return the elements in
351      * the same order.
352      *
353      * @apiNote
354      * This method acts as a bridge between array-based and collection-based APIs.
355      * It allows creation of an array of a particular runtime type. Use
356      * {@link #toArray()} to create an array whose runtime type is {@code Object[]},
357      * or use {@link #toArray(Object[]) toArray(T[])} to reuse an existing array.
358      *
359      * &lt;p&gt;Suppose {@code x} is a collection known to contain only strings.
360      * The following code can be used to dump the collection into a newly
361      * allocated array of {@code String}:
362      *
363      * &lt;pre&gt;
364      *     String[] y = x.toArray(String[]::new);&lt;/pre&gt;
365      *
366      * @implSpec
367      * The default implementation calls the generator function with zero
368      * and then passes the resulting array to {@link #toArray(Object[]) toArray(T[])}.
369      *
370      * @param &lt;T&gt; the component type of the array to contain the collection
371      * @param generator a function which produces a new array of the desired
372      *                  type and the provided length
373      * @return an array containing all of the elements in this collection
374      * @throws ArrayStoreException if the runtime type of any element in this
375      *         collection is not assignable to the {@linkplain Class#getComponentType
376      *         runtime component type} of the generated array
377      * @throws NullPointerException if the generator function is null
378      * @since 11
379      */
380     default &lt;T&gt; T[] toArray(IntFunction&lt;T[]&gt; generator) {
381         return toArray(generator.apply(0));
382     }
383 
384     // Modification Operations
385 
386     /**
387      * Ensures that this collection contains the specified element (optional
388      * operation).  Returns {@code true} if this collection changed as a
389      * result of the call.  (Returns {@code false} if this collection does
390      * not permit duplicates and already contains the specified element.)&lt;p&gt;
391      *
392      * Collections that support this operation may place limitations on what
393      * elements may be added to this collection.  In particular, some
394      * collections will refuse to add {@code null} elements, and others will
395      * impose restrictions on the type of elements that may be added.
396      * Collection classes should clearly specify in their documentation any
397      * restrictions on what elements may be added.&lt;p&gt;
398      *
399      * If a collection refuses to add a particular element for any reason
400      * other than that it already contains the element, it &lt;i&gt;must&lt;/i&gt; throw
401      * an exception (rather than returning {@code false}).  This preserves
402      * the invariant that a collection always contains the specified element
403      * after this call returns.
404      *
405      * @param e element whose presence in this collection is to be ensured
406      * @return {@code true} if this collection changed as a result of the
407      *         call
408      * @throws UnsupportedOperationException if the {@code add} operation
409      *         is not supported by this collection
410      * @throws ClassCastException if the class of the specified element
411      *         prevents it from being added to this collection
412      * @throws NullPointerException if the specified element is null and this
413      *         collection does not permit null elements
414      * @throws IllegalArgumentException if some property of the element
415      *         prevents it from being added to this collection
416      * @throws IllegalStateException if the element cannot be added at this
417      *         time due to insertion restrictions
418      */
419     boolean add(E e);
420 
421     /**
422      * Removes a single instance of the specified element from this
423      * collection, if it is present (optional operation).  More formally,
424      * removes an element {@code e} such that
425      * {@code Objects.equals(o, e)}, if
426      * this collection contains one or more such elements.  Returns
427      * {@code true} if this collection contained the specified element (or
428      * equivalently, if this collection changed as a result of the call).
429      *
430      * @param o element to be removed from this collection, if present
431      * @return {@code true} if an element was removed as a result of this call
432      * @throws ClassCastException if the type of the specified element
433      *         is incompatible with this collection
434      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
435      * @throws NullPointerException if the specified element is null and this
436      *         collection does not permit null elements
437      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
438      * @throws UnsupportedOperationException if the {@code remove} operation
439      *         is not supported by this collection
440      */
441     boolean remove(Object o);
442 
443 
444     // Bulk Operations
445 
446     /**
447      * Returns {@code true} if this collection contains all of the elements
448      * in the specified collection.
449      *
450      * @param  c collection to be checked for containment in this collection
451      * @return {@code true} if this collection contains all of the elements
452      *         in the specified collection
453      * @throws ClassCastException if the types of one or more elements
454      *         in the specified collection are incompatible with this
455      *         collection
456      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
457      * @throws NullPointerException if the specified collection contains one
458      *         or more null elements and this collection does not permit null
459      *         elements
460      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;),
461      *         or if the specified collection is null.
462      * @see    #contains(Object)
463      */
464     boolean containsAll(Collection&lt;?&gt; c);
465 
466     /**
467      * Adds all of the elements in the specified collection to this collection
468      * (optional operation).  The behavior of this operation is undefined if
469      * the specified collection is modified while the operation is in progress.
470      * (This implies that the behavior of this call is undefined if the
471      * specified collection is this collection, and this collection is
472      * nonempty.)
473      *
474      * @param c collection containing elements to be added to this collection
475      * @return {@code true} if this collection changed as a result of the call
476      * @throws UnsupportedOperationException if the {@code addAll} operation
477      *         is not supported by this collection
478      * @throws ClassCastException if the class of an element of the specified
479      *         collection prevents it from being added to this collection
480      * @throws NullPointerException if the specified collection contains a
481      *         null element and this collection does not permit null elements,
482      *         or if the specified collection is null
483      * @throws IllegalArgumentException if some property of an element of the
484      *         specified collection prevents it from being added to this
485      *         collection
486      * @throws IllegalStateException if not all the elements can be added at
487      *         this time due to insertion restrictions
488      * @see #add(Object)
489      */
490     boolean addAll(Collection&lt;? extends E&gt; c);
491 
492     /**
493      * Removes all of this collection&#39;s elements that are also contained in the
494      * specified collection (optional operation).  After this call returns,
495      * this collection will contain no elements in common with the specified
496      * collection.
497      *
498      * @param c collection containing elements to be removed from this collection
499      * @return {@code true} if this collection changed as a result of the
500      *         call
501      * @throws UnsupportedOperationException if the {@code removeAll} method
502      *         is not supported by this collection
503      * @throws ClassCastException if the types of one or more elements
504      *         in this collection are incompatible with the specified
505      *         collection
506      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
507      * @throws NullPointerException if this collection contains one or more
508      *         null elements and the specified collection does not support
509      *         null elements
510      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;),
511      *         or if the specified collection is null
512      * @see #remove(Object)
513      * @see #contains(Object)
514      */
515     boolean removeAll(Collection&lt;?&gt; c);
516 
517     /**
518      * Removes all of the elements of this collection that satisfy the given
519      * predicate.  Errors or runtime exceptions thrown during iteration or by
520      * the predicate are relayed to the caller.
521      *
522      * @implSpec
523      * The default implementation traverses all elements of the collection using
524      * its {@link #iterator}.  Each matching element is removed using
525      * {@link Iterator#remove()}.  If the collection&#39;s iterator does not
526      * support removal then an {@code UnsupportedOperationException} will be
527      * thrown on the first matching element.
528      *
529      * @param filter a predicate which returns {@code true} for elements to be
530      *        removed
531      * @return {@code true} if any elements were removed
532      * @throws NullPointerException if the specified filter is null
533      * @throws UnsupportedOperationException if elements cannot be removed
534      *         from this collection.  Implementations may throw this exception if a
535      *         matching element cannot be removed or if, in general, removal is not
536      *         supported.
537      * @since 1.8
538      */
539     default boolean removeIf(Predicate&lt;? super E&gt; filter) {
540         Objects.requireNonNull(filter);
541         boolean removed = false;
542         final Iterator&lt;E&gt; each = iterator();
543         while (each.hasNext()) {
544             if (filter.test(each.next())) {
545                 each.remove();
546                 removed = true;
547             }
548         }
549         return removed;
550     }
551 
552     /**
553      * Retains only the elements in this collection that are contained in the
554      * specified collection (optional operation).  In other words, removes from
555      * this collection all of its elements that are not contained in the
556      * specified collection.
557      *
558      * @param c collection containing elements to be retained in this collection
559      * @return {@code true} if this collection changed as a result of the call
560      * @throws UnsupportedOperationException if the {@code retainAll} operation
561      *         is not supported by this collection
562      * @throws ClassCastException if the types of one or more elements
563      *         in this collection are incompatible with the specified
564      *         collection
565      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;)
566      * @throws NullPointerException if this collection contains one or more
567      *         null elements and the specified collection does not permit null
568      *         elements
569      *         (&lt;a href=&quot;{@docRoot}/java.base/java/util/Collection.html#optional-restrictions&quot;&gt;optional&lt;/a&gt;),
570      *         or if the specified collection is null
571      * @see #remove(Object)
572      * @see #contains(Object)
573      */
574     boolean retainAll(Collection&lt;?&gt; c);
575 
576     /**
577      * Removes all of the elements from this collection (optional operation).
578      * The collection will be empty after this method returns.
579      *
580      * @throws UnsupportedOperationException if the {@code clear} operation
581      *         is not supported by this collection
582      */
583     void clear();
584 
585 
586     // Comparison and hashing
587 
588     /**
589      * Compares the specified object with this collection for equality. &lt;p&gt;
590      *
591      * While the {@code Collection} interface adds no stipulations to the
592      * general contract for the {@code Object.equals}, programmers who
593      * implement the {@code Collection} interface &quot;directly&quot; (in other words,
594      * create a class that is a {@code Collection} but is not a {@code Set}
595      * or a {@code List}) must exercise care if they choose to override the
596      * {@code Object.equals}.  It is not necessary to do so, and the simplest
597      * course of action is to rely on {@code Object}&#39;s implementation, but
598      * the implementor may wish to implement a &quot;value comparison&quot; in place of
599      * the default &quot;reference comparison.&quot;  (The {@code List} and
600      * {@code Set} interfaces mandate such value comparisons.)&lt;p&gt;
601      *
602      * The general contract for the {@code Object.equals} method states that
603      * equals must be symmetric (in other words, {@code a.equals(b)} if and
604      * only if {@code b.equals(a)}).  The contracts for {@code List.equals}
605      * and {@code Set.equals} state that lists are only equal to other lists,
606      * and sets to other sets.  Thus, a custom {@code equals} method for a
607      * collection class that implements neither the {@code List} nor
608      * {@code Set} interface must return {@code false} when this collection
609      * is compared to any list or set.  (By the same logic, it is not possible
610      * to write a class that correctly implements both the {@code Set} and
611      * {@code List} interfaces.)
612      *
613      * @param o object to be compared for equality with this collection
614      * @return {@code true} if the specified object is equal to this
615      * collection
616      *
617      * @see Object#equals(Object)
618      * @see Set#equals(Object)
619      * @see List#equals(Object)
620      */
621     boolean equals(Object o);
622 
623     /**
624      * Returns the hash code value for this collection.  While the
625      * {@code Collection} interface adds no stipulations to the general
626      * contract for the {@code Object.hashCode} method, programmers should
627      * take note that any class that overrides the {@code Object.equals}
628      * method must also override the {@code Object.hashCode} method in order
629      * to satisfy the general contract for the {@code Object.hashCode} method.
630      * In particular, {@code c1.equals(c2)} implies that
631      * {@code c1.hashCode()==c2.hashCode()}.
632      *
633      * @return the hash code value for this collection
634      *
635      * @see Object#hashCode()
636      * @see Object#equals(Object)
637      */
638     int hashCode();
639 
640     /**
641      * Creates a {@link Spliterator} over the elements in this collection.
642      *
643      * Implementations should document characteristic values reported by the
644      * spliterator.  Such characteristic values are not required to be reported
645      * if the spliterator reports {@link Spliterator#SIZED} and this collection
646      * contains no elements.
647      *
648      * &lt;p&gt;The default implementation should be overridden by subclasses that
649      * can return a more efficient spliterator.  In order to
650      * preserve expected laziness behavior for the {@link #stream()} and
651      * {@link #parallelStream()} methods, spliterators should either have the
652      * characteristic of {@code IMMUTABLE} or {@code CONCURRENT}, or be
653      * &lt;em&gt;&lt;a href=&quot;Spliterator.html#binding&quot;&gt;late-binding&lt;/a&gt;&lt;/em&gt;.
654      * If none of these is practical, the overriding class should describe the
655      * spliterator&#39;s documented policy of binding and structural interference,
656      * and should override the {@link #stream()} and {@link #parallelStream()}
657      * methods to create streams using a {@code Supplier} of the spliterator,
658      * as in:
659      * &lt;pre&gt;{@code
660      *     Stream&lt;E&gt; s = StreamSupport.stream(() -&gt; spliterator(), spliteratorCharacteristics)
661      * }&lt;/pre&gt;
662      * &lt;p&gt;These requirements ensure that streams produced by the
663      * {@link #stream()} and {@link #parallelStream()} methods will reflect the
664      * contents of the collection as of initiation of the terminal stream
665      * operation.
666      *
667      * @implSpec
668      * The default implementation creates a
669      * &lt;em&gt;&lt;a href=&quot;Spliterator.html#binding&quot;&gt;late-binding&lt;/a&gt;&lt;/em&gt; spliterator
670      * from the collection&#39;s {@code Iterator}.  The spliterator inherits the
671      * &lt;em&gt;fail-fast&lt;/em&gt; properties of the collection&#39;s iterator.
672      * &lt;p&gt;
673      * The created {@code Spliterator} reports {@link Spliterator#SIZED}.
674      *
675      * @implNote
676      * The created {@code Spliterator} additionally reports
677      * {@link Spliterator#SUBSIZED}.
678      *
679      * &lt;p&gt;If a spliterator covers no elements then the reporting of additional
680      * characteristic values, beyond that of {@code SIZED} and {@code SUBSIZED},
681      * does not aid clients to control, specialize or simplify computation.
682      * However, this does enable shared use of an immutable and empty
683      * spliterator instance (see {@link Spliterators#emptySpliterator()}) for
684      * empty collections, and enables clients to determine if such a spliterator
685      * covers no elements.
686      *
687      * @return a {@code Spliterator} over the elements in this collection
688      * @since 1.8
689      */
690     @Override
691     default Spliterator&lt;E&gt; spliterator() {
692         return Spliterators.spliterator(this, 0);
693     }
694 
695     /**
696      * Returns a sequential {@code Stream} with this collection as its source.
697      *
698      * &lt;p&gt;This method should be overridden when the {@link #spliterator()}
699      * method cannot return a spliterator that is {@code IMMUTABLE},
700      * {@code CONCURRENT}, or &lt;em&gt;late-binding&lt;/em&gt;. (See {@link #spliterator()}
701      * for details.)
702      *
703      * @implSpec
704      * The default implementation creates a sequential {@code Stream} from the
705      * collection&#39;s {@code Spliterator}.
706      *
707      * @return a sequential {@code Stream} over the elements in this collection
708      * @since 1.8
709      */
710     default Stream&lt;E&gt; stream() {
711         return StreamSupport.stream(spliterator(), false);
712     }
713 
714     /**
715      * Returns a possibly parallel {@code Stream} with this collection as its
716      * source.  It is allowable for this method to return a sequential stream.
717      *
718      * &lt;p&gt;This method should be overridden when the {@link #spliterator()}
719      * method cannot return a spliterator that is {@code IMMUTABLE},
720      * {@code CONCURRENT}, or &lt;em&gt;late-binding&lt;/em&gt;. (See {@link #spliterator()}
721      * for details.)
722      *
723      * @implSpec
724      * The default implementation creates a parallel {@code Stream} from the
725      * collection&#39;s {@code Spliterator}.
726      *
727      * @return a possibly parallel {@code Stream} over the elements in this
728      * collection
729      * @since 1.8
730      */
731     default Stream&lt;E&gt; parallelStream() {
732         return StreamSupport.stream(spliterator(), true);
733     }
734 }
    </pre>
  </body>
</html>