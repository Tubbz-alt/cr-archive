<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/sun/security/ssl/SSLExtensions.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="SSLExtension.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SSLHandshake.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/ssl/SSLExtensions.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 84,15 ***</span>
                      if (SSLLogger.isOn &amp;&amp; SSLLogger.isOn(&quot;ssl,handshake&quot;)) {
                          SSLLogger.warning(
                                  &quot;Received buggy supported_groups extension &quot; +
                                  &quot;in the ServerHello handshake message&quot;);
                      }
<span class="line-modified">!                 } else {</span>
                      throw hm.handshakeContext.conContext.fatal(
<span class="line-modified">!                         Alert.UNSUPPORTED_EXTENSION,</span>
<span class="line-modified">!                         &quot;extension (&quot; + extId +</span>
<span class="line-modified">!                         &quot;) should not be presented in &quot; + handshakeType.name);</span>
                  }
              }
  
              if (isSupported) {
                  isSupported = false;
<span class="line-new-header">--- 84,18 ---</span>
                      if (SSLLogger.isOn &amp;&amp; SSLLogger.isOn(&quot;ssl,handshake&quot;)) {
                          SSLLogger.warning(
                                  &quot;Received buggy supported_groups extension &quot; +
                                  &quot;in the ServerHello handshake message&quot;);
                      }
<span class="line-modified">!                 } else if (handshakeType == SSLHandshake.SERVER_HELLO) {</span>
                      throw hm.handshakeContext.conContext.fatal(
<span class="line-modified">!                             Alert.UNSUPPORTED_EXTENSION, &quot;extension (&quot; +</span>
<span class="line-modified">!                                     extId + &quot;) should not be presented in &quot; +</span>
<span class="line-modified">!                                     handshakeType.name);</span>
<span class="line-added">+                 } else {</span>
<span class="line-added">+                     isSupported = false;</span>
<span class="line-added">+                     // debug log to ignore unknown extension for handshakeType</span>
                  }
              }
  
              if (isSupported) {
                  isSupported = false;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 363,20 ***</span>
              }
          }
      }
  
      private static String toString(int extId, byte[] extData) {
          MessageFormat messageFormat = new MessageFormat(
<span class="line-modified">!             &quot;\&quot;unknown extension ({0})\&quot;: &#39;{&#39;\n&quot; +</span>
<span class="line-modified">!             &quot;{1}\n&quot; +</span>
              &quot;&#39;}&#39;&quot;,
              Locale.ENGLISH);
  
          HexDumpEncoder hexEncoder = new HexDumpEncoder();
          String encoded = hexEncoder.encodeBuffer(extData);
  
          Object[] messageFields = {
              extId,
              Utilities.indent(encoded)
          };
  
          return messageFormat.format(messageFields);
<span class="line-new-header">--- 366,22 ---</span>
              }
          }
      }
  
      private static String toString(int extId, byte[] extData) {
<span class="line-added">+         String extName = SSLExtension.nameOf(extId);</span>
          MessageFormat messageFormat = new MessageFormat(
<span class="line-modified">!             &quot;\&quot;{0} ({1})\&quot;: &#39;{&#39;\n&quot; +</span>
<span class="line-modified">!             &quot;{2}\n&quot; +</span>
              &quot;&#39;}&#39;&quot;,
              Locale.ENGLISH);
  
          HexDumpEncoder hexEncoder = new HexDumpEncoder();
          String encoded = hexEncoder.encodeBuffer(extData);
  
          Object[] messageFields = {
<span class="line-added">+             extName,</span>
              extId,
              Utilities.indent(encoded)
          };
  
          return messageFormat.format(messageFields);
</pre>
<center><a href="SSLExtension.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="SSLHandshake.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>