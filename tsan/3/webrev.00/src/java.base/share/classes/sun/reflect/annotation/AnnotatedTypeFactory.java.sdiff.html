<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/reflect/annotation/AnnotatedTypeFactory.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../nio/cs/ThreadLocalCoders.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AnnotationInvocationHandler.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/reflect/annotation/AnnotatedTypeFactory.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2013, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
376         AnnotatedTypeVariableImpl(TypeVariable&lt;?&gt; type, LocationInfo location,
377                 TypeAnnotation[] actualTypeAnnotations, TypeAnnotation[] allOnSameTargetTypeAnnotations,
378                 AnnotatedElement decl) {
379             super(type, location, actualTypeAnnotations, allOnSameTargetTypeAnnotations, decl);
380         }
381 
382         @Override
383         public AnnotatedType[] getAnnotatedBounds() {
384             return getTypeVariable().getAnnotatedBounds();
385         }
386 
387         @Override
388         public AnnotatedType getAnnotatedOwnerType() {
389             return null;
390         }
391 
392         private TypeVariable&lt;?&gt; getTypeVariable() {
393             return (TypeVariable)getType();
394         }
395 
<span class="line-modified">396         // For toString, the declaration of a type variable should</span>
<span class="line-modified">397         // including information about its bounds, etc. However, the</span>
398         // use of a type variable should not. For that reason, it is
<span class="line-modified">399         // acceptable for the toString implementation of</span>
400         // AnnotatedTypeVariableImpl to use the inherited
<span class="line-modified">401         // implementation from AnnotatedTypeBaseImpl.</span>
402 
403         @Override
404         public boolean equals(Object o) {
405             if (o instanceof AnnotatedTypeVariable) {
406                 AnnotatedTypeVariable that = (AnnotatedTypeVariable) o;
<span class="line-modified">407                 return equalsTypeAndAnnotations(that) &amp;&amp;</span>
<span class="line-removed">408                     Arrays.equals(getAnnotatedBounds(), that.getAnnotatedBounds());</span>
409             } else {
410                 return false;
411             }
412         }
<span class="line-removed">413 </span>
<span class="line-removed">414         @Override</span>
<span class="line-removed">415         public int hashCode() {</span>
<span class="line-removed">416             return baseHashCode() ^</span>
<span class="line-removed">417                 Objects.hash((Object[])getAnnotatedBounds());</span>
<span class="line-removed">418         }</span>
419     }
420 
421     private static final class AnnotatedParameterizedTypeImpl extends AnnotatedTypeBaseImpl
422             implements AnnotatedParameterizedType {
423         AnnotatedParameterizedTypeImpl(ParameterizedType type, LocationInfo location,
424                 TypeAnnotation[] actualTypeAnnotations, TypeAnnotation[] allOnSameTargetTypeAnnotations,
425                 AnnotatedElement decl) {
426             super(type, location, actualTypeAnnotations, allOnSameTargetTypeAnnotations, decl);
427         }
428 
429         @Override
430         public AnnotatedType[] getAnnotatedActualTypeArguments() {
431             Type[] arguments = getParameterizedType().getActualTypeArguments();
432             AnnotatedType[] res = new AnnotatedType[arguments.length];
433             Arrays.fill(res, EMPTY_ANNOTATED_TYPE);
434             int initialCapacity = getTypeAnnotations().length;
435             for (int i = 0; i &lt; res.length; i++) {
436                 List&lt;TypeAnnotation&gt; l = new ArrayList&lt;&gt;(initialCapacity);
437                 LocationInfo newLoc = nestingForType(arguments[i], getLocation().pushTypeArg((byte)i));
438                 for (TypeAnnotation t : getTypeAnnotations())
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2013, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
376         AnnotatedTypeVariableImpl(TypeVariable&lt;?&gt; type, LocationInfo location,
377                 TypeAnnotation[] actualTypeAnnotations, TypeAnnotation[] allOnSameTargetTypeAnnotations,
378                 AnnotatedElement decl) {
379             super(type, location, actualTypeAnnotations, allOnSameTargetTypeAnnotations, decl);
380         }
381 
382         @Override
383         public AnnotatedType[] getAnnotatedBounds() {
384             return getTypeVariable().getAnnotatedBounds();
385         }
386 
387         @Override
388         public AnnotatedType getAnnotatedOwnerType() {
389             return null;
390         }
391 
392         private TypeVariable&lt;?&gt; getTypeVariable() {
393             return (TypeVariable)getType();
394         }
395 
<span class="line-modified">396         // The declaration of a type variable should</span>
<span class="line-modified">397         // include information about its bounds, etc. However, the</span>
398         // use of a type variable should not. For that reason, it is
<span class="line-modified">399         // acceptable for the toString and hashCode implementations of</span>
400         // AnnotatedTypeVariableImpl to use the inherited
<span class="line-modified">401         // implementations from AnnotatedTypeBaseImpl.</span>
402 
403         @Override
404         public boolean equals(Object o) {
405             if (o instanceof AnnotatedTypeVariable) {
406                 AnnotatedTypeVariable that = (AnnotatedTypeVariable) o;
<span class="line-modified">407                 return equalsTypeAndAnnotations(that);</span>

408             } else {
409                 return false;
410             }
411         }






412     }
413 
414     private static final class AnnotatedParameterizedTypeImpl extends AnnotatedTypeBaseImpl
415             implements AnnotatedParameterizedType {
416         AnnotatedParameterizedTypeImpl(ParameterizedType type, LocationInfo location,
417                 TypeAnnotation[] actualTypeAnnotations, TypeAnnotation[] allOnSameTargetTypeAnnotations,
418                 AnnotatedElement decl) {
419             super(type, location, actualTypeAnnotations, allOnSameTargetTypeAnnotations, decl);
420         }
421 
422         @Override
423         public AnnotatedType[] getAnnotatedActualTypeArguments() {
424             Type[] arguments = getParameterizedType().getActualTypeArguments();
425             AnnotatedType[] res = new AnnotatedType[arguments.length];
426             Arrays.fill(res, EMPTY_ANNOTATED_TYPE);
427             int initialCapacity = getTypeAnnotations().length;
428             for (int i = 0; i &lt; res.length; i++) {
429                 List&lt;TypeAnnotation&gt; l = new ArrayList&lt;&gt;(initialCapacity);
430                 LocationInfo newLoc = nestingForType(arguments[i], getLocation().pushTypeArg((byte)i));
431                 for (TypeAnnotation t : getTypeAnnotations())
</pre>
</td>
</tr>
</table>
<center><a href="../../nio/cs/ThreadLocalCoders.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AnnotationInvocationHandler.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>