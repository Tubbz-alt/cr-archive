<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/sun/security/util/KeyStoreDelegator.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="IOUtils.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="LegacyAlgorithmConstraints.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/util/KeyStoreDelegator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 215,13 ***</span>
              bufferedStream.mark(Integer.MAX_VALUE);
  
              try {
                  @SuppressWarnings(&quot;deprecation&quot;)
                  KeyStoreSpi tmp = primaryKeyStore.newInstance();
                  keystore = tmp;
                  type = primaryType;
<span class="line-removed">-                 keystore.engineLoad(bufferedStream, password);</span>
  
              } catch (Exception e) {
  
                  // incorrect password
                  if (e instanceof IOException &amp;&amp;
<span class="line-new-header">--- 215,13 ---</span>
              bufferedStream.mark(Integer.MAX_VALUE);
  
              try {
                  @SuppressWarnings(&quot;deprecation&quot;)
                  KeyStoreSpi tmp = primaryKeyStore.newInstance();
<span class="line-added">+                 tmp.engineLoad(bufferedStream, password);</span>
                  keystore = tmp;
                  type = primaryType;
  
              } catch (Exception e) {
  
                  // incorrect password
                  if (e instanceof IOException &amp;&amp;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 234,15 ***</span>
                      if (!compatModeEnabled) {
                          throw e;
                      }
  
                      @SuppressWarnings(&quot;deprecation&quot;)
<span class="line-modified">!                     KeyStoreSpi tmp= secondaryKeyStore.newInstance();</span>
                      keystore = tmp;
                      type = secondaryType;
<span class="line-removed">-                     bufferedStream.reset();</span>
<span class="line-removed">-                     keystore.engineLoad(bufferedStream, password);</span>
  
                      if (debug != null) {
                          debug.println(&quot;WARNING: switching from &quot; +
                            primaryType + &quot; to &quot; + secondaryType +
                            &quot; keystore file format has altered the &quot; +
<span class="line-new-header">--- 234,15 ---</span>
                      if (!compatModeEnabled) {
                          throw e;
                      }
  
                      @SuppressWarnings(&quot;deprecation&quot;)
<span class="line-modified">!                     KeyStoreSpi tmp = secondaryKeyStore.newInstance();</span>
<span class="line-added">+                     bufferedStream.reset();</span>
<span class="line-added">+                     tmp.engineLoad(bufferedStream, password);</span>
                      keystore = tmp;
                      type = secondaryType;
  
                      if (debug != null) {
                          debug.println(&quot;WARNING: switching from &quot; +
                            primaryType + &quot; to &quot; + secondaryType +
                            &quot; keystore file format has altered the &quot; +
</pre>
<hr />
<pre>
<span class="line-old-header">*** 267,10 ***</span>
<span class="line-new-header">--- 267,12 ---</span>
                          throw (IOException)e;
                      } else if (e instanceof CertificateException) {
                          throw (CertificateException)e;
                      } else if (e instanceof NoSuchAlgorithmException) {
                          throw (NoSuchAlgorithmException)e;
<span class="line-added">+                     } else if (e instanceof RuntimeException){</span>
<span class="line-added">+                         throw (RuntimeException)e;</span>
                      }
                  }
              }
  
              if (debug != null) {
</pre>
<center><a href="IOUtils.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="LegacyAlgorithmConstraints.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>