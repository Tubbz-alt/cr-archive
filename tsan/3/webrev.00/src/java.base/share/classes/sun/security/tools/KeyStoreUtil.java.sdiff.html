<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/sun/security/tools/KeyStoreUtil.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../timestamp/TSResponse.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="keytool/CertAndKeyGen.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/sun/security/tools/KeyStoreUtil.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2005, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
287                 }
288                 Security.addProvider(p);
289                 return;
290             }
291         }
292         throw new IllegalArgumentException(&quot;No provider found&quot;);
293     }
294 
295     /**
296      * Loads a security provider by a fully-qualified class name.
297      *
298      * @param provClass the class name
299      * @param arg optional arg
300      * @param cl optional class loader
301      * @throws IllegalArgumentException if no provider matches the class name
302      * @throws ClassCastException if the class has not extended Provider
303      */
304     public static void loadProviderByClass(
305             String provClass, String arg, ClassLoader cl) {
306 
<span class="line-modified">307         // For compatibility, SunPKCS11 and OracleUcrypto can still be</span>
<span class="line-modified">308         // loadable with -providerClass.</span>
309         if (provClass.equals(&quot;sun.security.pkcs11.SunPKCS11&quot;)) {
310             loadProviderByName(&quot;SunPKCS11&quot;, arg);
311             return;
312         } else if (provClass.equals(&quot;com.oracle.security.crypto.UcryptoProvider&quot;)) {
313             loadProviderByName(&quot;OracleUcrypto&quot;, arg);
314             return;



315         }
316 
317         Provider prov;
318         try {
319             Class&lt;?&gt; clazz = Class.forName(provClass, false, cl);
320             prov = (Provider) clazz.getConstructor().newInstance();
321         } catch (ReflectiveOperationException e) {
322             throw new IllegalArgumentException(e);
323         }
324         if (arg != null) {
325             prov = prov.configure(arg);
326         }
327         Security.addProvider(prov);
328     }
329 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
287                 }
288                 Security.addProvider(p);
289                 return;
290             }
291         }
292         throw new IllegalArgumentException(&quot;No provider found&quot;);
293     }
294 
295     /**
296      * Loads a security provider by a fully-qualified class name.
297      *
298      * @param provClass the class name
299      * @param arg optional arg
300      * @param cl optional class loader
301      * @throws IllegalArgumentException if no provider matches the class name
302      * @throws ClassCastException if the class has not extended Provider
303      */
304     public static void loadProviderByClass(
305             String provClass, String arg, ClassLoader cl) {
306 
<span class="line-modified">307         // For compatibility, SunPKCS11, OracleUcrypto, and SunMSCAPI</span>
<span class="line-modified">308         // can still be loadable with -providerClass.</span>
309         if (provClass.equals(&quot;sun.security.pkcs11.SunPKCS11&quot;)) {
310             loadProviderByName(&quot;SunPKCS11&quot;, arg);
311             return;
312         } else if (provClass.equals(&quot;com.oracle.security.crypto.UcryptoProvider&quot;)) {
313             loadProviderByName(&quot;OracleUcrypto&quot;, arg);
314             return;
<span class="line-added">315         } else if (provClass.equals(&quot;sun.security.mscapi.SunMSCAPI&quot;)) {</span>
<span class="line-added">316             loadProviderByName(&quot;SunMSCAPI&quot;, arg);</span>
<span class="line-added">317             return;</span>
318         }
319 
320         Provider prov;
321         try {
322             Class&lt;?&gt; clazz = Class.forName(provClass, false, cl);
323             prov = (Provider) clazz.getConstructor().newInstance();
324         } catch (ReflectiveOperationException e) {
325             throw new IllegalArgumentException(e);
326         }
327         if (arg != null) {
328             prov = prov.configure(arg);
329         }
330         Security.addProvider(prov);
331     }
332 }
</pre>
</td>
</tr>
</table>
<center><a href="../timestamp/TSResponse.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="keytool/CertAndKeyGen.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>