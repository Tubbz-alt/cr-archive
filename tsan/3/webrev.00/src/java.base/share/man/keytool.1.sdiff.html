<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/man/keytool.1</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="java.1.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../native/include/classfile_constants.h.template.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/man/keytool.1</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">   1 &#39;\&quot; t</span>
<span class="line-modified">   2 .\&quot; Copyright (c) 1998, 2015, Oracle and/or its affiliates. All rights reserved.</span>
   3 .\&quot; DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4 .\&quot;
   5 .\&quot; This code is free software; you can redistribute it and/or modify it
   6 .\&quot; under the terms of the GNU General Public License version 2 only, as
   7 .\&quot; published by the Free Software Foundation.
   8 .\&quot;
   9 .\&quot; This code is distributed in the hope that it will be useful, but WITHOUT
  10 .\&quot; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
<span class="line-modified">  11 .\&quot; FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span>
  12 .\&quot; version 2 for more details (a copy is included in the LICENSE file that
  13 .\&quot; accompanied this code).
  14 .\&quot;
  15 .\&quot; You should have received a copy of the GNU General Public License version
  16 .\&quot; 2 along with this work; if not, write to the Free Software Foundation,
  17 .\&quot; Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18 .\&quot;
  19 .\&quot; Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20 .\&quot; or visit www.oracle.com if you need additional information or have any
  21 .\&quot; questions.
  22 .\&quot;
<span class="line-modified">  23 .\&quot;     Arch: generic</span>
<span class="line-removed">  24 .\&quot;     Software: JDK 8</span>
<span class="line-removed">  25 .\&quot;     Date: 03 March 2015</span>
<span class="line-removed">  26 .\&quot;     SectDesc: Security Tools</span>
<span class="line-removed">  27 .\&quot;     Title: keytool.1</span>
  28 .\&quot;
<span class="line-modified">  29 .if n .pl 99999</span>
<span class="line-modified">  30 .TH keytool 1 &quot;03 March 2015&quot; &quot;JDK 8&quot; &quot;Security Tools&quot;</span>
<span class="line-modified">  31 .\&quot; -----------------------------------------------------------------</span>
<span class="line-modified">  32 .\&quot; * Define some portability stuff</span>
<span class="line-modified">  33 .\&quot; -----------------------------------------------------------------</span>
<span class="line-modified">  34 .\&quot; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="line-modified">  35 .\&quot; http://bugs.debian.org/507673</span>
<span class="line-modified">  36 .\&quot; http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html</span>
<span class="line-modified">  37 .\&quot; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="line-modified">  38 .ie \n(.g .ds Aq \(aq</span>
<span class="line-modified">  39 .el       .ds Aq &#39;</span>
<span class="line-modified">  40 .\&quot; -----------------------------------------------------------------</span>
<span class="line-modified">  41 .\&quot; * set default formatting</span>
<span class="line-modified">  42 .\&quot; -----------------------------------------------------------------</span>
<span class="line-modified">  43 .\&quot; disable hyphenation</span>
<span class="line-modified">  44 .nh</span>
<span class="line-modified">  45 .\&quot; disable justification (adjust text to left margin only)</span>
<span class="line-modified">  46 .ad l</span>
<span class="line-modified">  47 .\&quot; -----------------------------------------------------------------</span>
<span class="line-modified">  48 .\&quot; * MAIN CONTENT STARTS HERE *</span>
<span class="line-modified">  49 .\&quot; -----------------------------------------------------------------</span>
<span class="line-modified">  50 </span>
<span class="line-modified">  51 .SH NAME    </span>
<span class="line-modified">  52 keytool \- Manages a keystore (database) of cryptographic keys, X\&amp;.509 certificate chains, and trusted certificates\&amp;.</span>
<span class="line-modified">  53 .SH SYNOPSIS    </span>
<span class="line-modified">  54 .sp     </span>
<span class="line-modified">  55 .nf     </span>
<span class="line-modified">  56 </span>
<span class="line-modified">  57 \fBkeytool\fR [\fIcommands\fR]</span>
<span class="line-modified">  58 .fi     </span>
<span class="line-modified">  59 .sp     </span>
<span class="line-modified">  60 .TP     </span>
<span class="line-modified">  61 \fIcommands\fR</span>
<span class="line-modified">  62 See Commands\&amp;. These commands are categorized by task as follows:</span>
<span class="line-modified">  63 .RS     </span>
<span class="line-modified">  64 .TP 0.2i    </span>
<span class="line-modified">  65 \(bu</span>
<span class="line-modified">  66 Create or Add Data to the Keystore</span>
<span class="line-modified">  67 .RS     </span>
<span class="line-modified">  68 .TP 0.2i    </span>
<span class="line-modified">  69 \(bu</span>
<span class="line-modified">  70 -gencert</span>
<span class="line-modified">  71 .TP 0.2i    </span>
<span class="line-modified">  72 \(bu</span>
<span class="line-modified">  73 -genkeypair</span>
<span class="line-modified">  74 .TP 0.2i    </span>
<span class="line-modified">  75 \(bu</span>
<span class="line-modified">  76 -genseckey</span>
<span class="line-modified">  77 .TP 0.2i    </span>
<span class="line-modified">  78 \(bu</span>
<span class="line-modified">  79 -importcert</span>
<span class="line-modified">  80 .TP 0.2i    </span>
<span class="line-modified">  81 \(bu</span>
<span class="line-modified">  82 -importpassword</span>
<span class="line-modified">  83 .RE     </span>
<span class="line-modified">  84 </span>
<span class="line-modified">  85 .TP 0.2i    </span>
<span class="line-modified">  86 \(bu</span>
<span class="line-modified">  87 Import Contents From Another Keystore</span>
<span class="line-modified">  88 .RS     </span>
<span class="line-modified">  89 .TP 0.2i    </span>
<span class="line-modified">  90 \(bu</span>
<span class="line-modified">  91 -importkeystore</span>
<span class="line-modified">  92 .RE     </span>
<span class="line-modified">  93 </span>
<span class="line-modified">  94 .TP 0.2i    </span>
<span class="line-modified">  95 \(bu</span>
<span class="line-modified">  96 Generate Certificate Request</span>
<span class="line-modified">  97 .RS     </span>
<span class="line-modified">  98 .TP 0.2i    </span>
<span class="line-modified">  99 \(bu</span>
<span class="line-modified"> 100 -certreq</span>
<span class="line-modified"> 101 .RE     </span>
<span class="line-modified"> 102 </span>
<span class="line-modified"> 103 .TP 0.2i    </span>
<span class="line-modified"> 104 \(bu</span>
<span class="line-modified"> 105 Export Data</span>
<span class="line-modified"> 106 .RS     </span>
<span class="line-modified"> 107 .TP 0.2i    </span>
<span class="line-modified"> 108 \(bu</span>
<span class="line-modified"> 109 -exportcert</span>
<span class="line-modified"> 110 .RE     </span>
<span class="line-modified"> 111 </span>
<span class="line-modified"> 112 .TP 0.2i    </span>
<span class="line-modified"> 113 \(bu</span>
<span class="line-modified"> 114 Display Data</span>
<span class="line-modified"> 115 .RS     </span>
<span class="line-modified"> 116 .TP 0.2i    </span>
<span class="line-modified"> 117 \(bu</span>
<span class="line-modified"> 118 -list</span>
<span class="line-modified"> 119 .TP 0.2i    </span>
<span class="line-modified"> 120 \(bu</span>
<span class="line-modified"> 121 -printcert</span>
<span class="line-modified"> 122 .TP 0.2i    </span>
<span class="line-modified"> 123 \(bu</span>
<span class="line-modified"> 124 -printcertreq</span>
<span class="line-modified"> 125 .TP 0.2i    </span>
<span class="line-modified"> 126 \(bu</span>
<span class="line-modified"> 127 -printcrl</span>
<span class="line-modified"> 128 .RE     </span>
<span class="line-modified"> 129 </span>
<span class="line-modified"> 130 .TP 0.2i    </span>
<span class="line-modified"> 131 \(bu</span>
<span class="line-modified"> 132 Manage the Keystore</span>
<span class="line-modified"> 133 .RS     </span>
<span class="line-modified"> 134 .TP 0.2i    </span>
<span class="line-modified"> 135 \(bu</span>
<span class="line-modified"> 136 -storepasswd</span>
<span class="line-modified"> 137 .TP 0.2i    </span>
<span class="line-modified"> 138 \(bu</span>
<span class="line-modified"> 139 -keypasswd</span>
<span class="line-modified"> 140 .TP 0.2i    </span>
<span class="line-modified"> 141 \(bu</span>
<span class="line-modified"> 142 -delete</span>
<span class="line-modified"> 143 .TP 0.2i    </span>
<span class="line-modified"> 144 \(bu</span>
<span class="line-modified"> 145 -changealias</span>
<span class="line-modified"> 146 .RE     </span>
<span class="line-modified"> 147 </span>
<span class="line-modified"> 148 .TP 0.2i    </span>
<span class="line-modified"> 149 \(bu</span>
<span class="line-modified"> 150 Get Help</span>
<span class="line-modified"> 151 .RS     </span>
<span class="line-modified"> 152 .TP 0.2i    </span>
<span class="line-modified"> 153 \(bu</span>
<span class="line-modified"> 154 -help</span>
<span class="line-modified"> 155 .RE     </span>
<span class="line-modified"> 156 </span>
<span class="line-modified"> 157 .RE     </span>
<span class="line-modified"> 158 </span>
<span class="line-modified"> 159 .SH DESCRIPTION    </span>
<span class="line-modified"> 160 The \f3keytool\fR command is a key and certificate management utility\&amp;. It enables users to administer their own public/private key pairs and associated certificates for use in self-authentication (where the user authenticates himself or herself to other users and services) or data integrity and authentication services, using digital signatures\&amp;. The \f3keytool\fR command also enables users to cache the public keys (in the form of certificates) of their communicating peers\&amp;.</span>
<span class="line-modified"> 161 .PP</span>
<span class="line-modified"> 162 A certificate is a digitally signed statement from one entity (person, company, and so on\&amp;.), that says that the public key (and some other information) of some other entity has a particular value\&amp;. (See Certificate\&amp;.) When data is digitally signed, the signature can be verified to check the data integrity and authenticity\&amp;. Integrity means that the data has not been modified or tampered with, and authenticity means the data comes from whoever claims to have created and signed it\&amp;.</span>
<span class="line-modified"> 163 .PP</span>
<span class="line-modified"> 164 The \f3keytool\fR command also enables users to administer secret keys and passphrases used in symmetric encryption and decryption (DES)\&amp;.</span>
<span class="line-modified"> 165 .PP</span>
<span class="line-modified"> 166 The \f3keytool\fR command stores the keys and certificates in a keystore\&amp;. See KeyStore aliases\&amp;.</span>
<span class="line-modified"> 167 .SH COMMAND\ AND\ OPTION\ NOTES    </span>
<span class="line-modified"> 168 See Commands for a listing and description of the various commands\&amp;.</span>
<span class="line-modified"> 169 .TP 0.2i    </span>
<span class="line-modified"> 170 \(bu</span>
<span class="line-modified"> 171 All command and option names are preceded by a minus sign (-)\&amp;.</span>
<span class="line-modified"> 172 .TP 0.2i    </span>
<span class="line-modified"> 173 \(bu</span>
<span class="line-modified"> 174 The options for each command can be provided in any order\&amp;.</span>
<span class="line-modified"> 175 .TP 0.2i    </span>
<span class="line-modified"> 176 \(bu</span>
<span class="line-modified"> 177 All items not italicized or in braces or brackets are required to appear as is\&amp;.</span>
<span class="line-modified"> 178 .TP 0.2i    </span>
<span class="line-modified"> 179 \(bu</span>
<span class="line-modified"> 180 Braces surrounding an option signify that a default value will be used when the option is not specified on the command line\&amp;. See Option Defaults\&amp;. Braces are also used around the \f3-v\fR, \f3-rfc\fR, and \f3-J\fR options, which only have meaning when they appear on the command line\&amp;. They do not have any default values other than not existing\&amp;.</span>
<span class="line-modified"> 181 .TP 0.2i    </span>
<span class="line-modified"> 182 \(bu</span>
<span class="line-modified"> 183 Brackets surrounding an option signify that the user is prompted for the values when the option is not specified on the command line\&amp;. For the \f3-keypass\fR option, if you do not specify the option on the command line, then the \f3keytool\fR command first attempts to use the keystore password to recover the private/secret key\&amp;. If this attempt fails, then the \f3keytool\fR command prompts you for the private/secret key password\&amp;.</span>
<span class="line-modified"> 184 .TP 0.2i    </span>
<span class="line-modified"> 185 \(bu</span>
<span class="line-modified"> 186 Items in italics (option values) represent the actual values that must be supplied\&amp;. For example, here is the format of the \f3-printcert\fR command:</span>
<span class="line-modified"> 187 .sp     </span>
<span class="line-modified"> 188 .nf     </span>
<span class="line-modified"> 189 \f3keytool \-printcert {\-file \fIcert_file\fR} {\-v}\fP</span>
<span class="line-modified"> 190 .fi     </span>
<span class="line-modified"> 191 .sp     </span>
<span class="line-modified"> 192 </span>
<span class="line-modified"> 193 </span>
<span class="line-modified"> 194 </span>
<span class="line-modified"> 195 </span>
<span class="line-modified"> 196 When you specify a \f3-printcert\fR command, replace \fIcert_file\fR with the actual file name, as follows: \f3keytool -printcert -file VScert\&amp;.cer\fR</span>
<span class="line-modified"> 197 .TP 0.2i    </span>
<span class="line-modified"> 198 \(bu</span>
<span class="line-modified"> 199 Option values must be put in quotation marks when they contain a blank (space)\&amp;.</span>
<span class="line-modified"> 200 .TP 0.2i    </span>
<span class="line-modified"> 201 \(bu</span>
<span class="line-modified"> 202 The \f3-help\fR option is the default\&amp;. The \f3keytool\fR command is the same as \f3keytool -help\fR\&amp;.</span>
<span class="line-modified"> 203 .SH OPTION\ DEFAULTS    </span>
<span class="line-modified"> 204 The following examples show the defaults for various option values\&amp;.</span>
<span class="line-modified"> 205 .sp     </span>
<span class="line-modified"> 206 .nf     </span>
<span class="line-modified"> 207 \f3\-alias &quot;mykey&quot;\fP</span>
<span class="line-modified"> 208 .fi     </span>
<span class="line-modified"> 209 .nf     </span>
<span class="line-modified"> 210 \f3\fP</span>
<span class="line-modified"> 211 .fi     </span>
<span class="line-modified"> 212 .nf     </span>
<span class="line-modified"> 213 \f3\-keyalg\fP</span>
<span class="line-modified"> 214 .fi     </span>
<span class="line-modified"> 215 .nf     </span>
<span class="line-modified"> 216 \f3    &quot;DSA&quot; (when using \-genkeypair)\fP</span>
<span class="line-modified"> 217 .fi     </span>
<span class="line-modified"> 218 .nf     </span>
<span class="line-modified"> 219 \f3    &quot;DES&quot; (when using \-genseckey)\fP</span>
<span class="line-modified"> 220 .fi     </span>
<span class="line-modified"> 221 .nf     </span>
<span class="line-modified"> 222 \f3\fP</span>
<span class="line-modified"> 223 .fi     </span>
<span class="line-modified"> 224 .nf     </span>
<span class="line-modified"> 225 \f3\-keysize\fP</span>
<span class="line-modified"> 226 .fi     </span>
<span class="line-modified"> 227 .nf     </span>
<span class="line-modified"> 228 \f3    2048 (when using \-genkeypair and \-keyalg is &quot;RSA&quot;)\fP</span>
<span class="line-modified"> 229 .fi     </span>
<span class="line-modified"> 230 .nf     </span>
<span class="line-modified"> 231 \f3    1024 (when using \-genkeypair and \-keyalg is &quot;DSA&quot;)\fP</span>
<span class="line-modified"> 232 .fi     </span>
<span class="line-modified"> 233 .nf     </span>
<span class="line-modified"> 234 \f3    256 (when using \-genkeypair and \-keyalg is &quot;EC&quot;)\fP</span>
<span class="line-modified"> 235 .fi     </span>
<span class="line-modified"> 236 .nf     </span>
<span class="line-modified"> 237 \f3    56 (when using \-genseckey and \-keyalg is &quot;DES&quot;)\fP</span>
<span class="line-modified"> 238 .fi     </span>
<span class="line-modified"> 239 .nf     </span>
<span class="line-modified"> 240 \f3    168 (when using \-genseckey and \-keyalg is &quot;DESede&quot;)\fP</span>
<span class="line-modified"> 241 .fi     </span>
<span class="line-modified"> 242 .nf     </span>
<span class="line-modified"> 243 \f3\fP</span>
<span class="line-modified"> 244 .fi     </span>
<span class="line-modified"> 245 .nf     </span>
<span class="line-modified"> 246 \f3\-validity 90\fP</span>
<span class="line-modified"> 247 .fi     </span>
<span class="line-modified"> 248 .nf     </span>
<span class="line-modified"> 249 \f3\fP</span>
<span class="line-modified"> 250 .fi     </span>
<span class="line-modified"> 251 .nf     </span>
<span class="line-modified"> 252 \f3\-keystore &lt;the file named \&amp;.keystore in the user\&amp;&#39;s home directory&gt;\fP</span>
<span class="line-modified"> 253 .fi     </span>
<span class="line-modified"> 254 .nf     </span>
<span class="line-modified"> 255 \f3\fP</span>
<span class="line-modified"> 256 .fi     </span>
<span class="line-modified"> 257 .nf     </span>
<span class="line-modified"> 258 \f3\-storetype &lt;the value of the &quot;keystore\&amp;.type&quot; property in the\fP</span>
<span class="line-modified"> 259 .fi     </span>
<span class="line-modified"> 260 .nf     </span>
<span class="line-modified"> 261 \f3    security properties file, which is returned by the static\fP</span>
<span class="line-modified"> 262 .fi     </span>
<span class="line-modified"> 263 .nf     </span>
<span class="line-modified"> 264 \f3    getDefaultType method in java\&amp;.security\&amp;.KeyStore&gt;\fP</span>
<span class="line-modified"> 265 .fi     </span>
<span class="line-modified"> 266 .nf     </span>
<span class="line-modified"> 267 \f3\fP</span>
<span class="line-modified"> 268 .fi     </span>
<span class="line-modified"> 269 .nf     </span>
<span class="line-modified"> 270 \f3\-file\fP</span>
<span class="line-modified"> 271 .fi     </span>
<span class="line-modified"> 272 .nf     </span>
<span class="line-modified"> 273 \f3    stdin (if reading)\fP</span>
<span class="line-modified"> 274 .fi     </span>
<span class="line-modified"> 275 .nf     </span>
<span class="line-modified"> 276 \f3    stdout (if writing)\fP</span>
<span class="line-modified"> 277 .fi     </span>
<span class="line-modified"> 278 .nf     </span>
<span class="line-modified"> 279 \f3\fP</span>
<span class="line-modified"> 280 .fi     </span>
<span class="line-modified"> 281 .nf     </span>
<span class="line-modified"> 282 \f3\-protected false\fP</span>
<span class="line-modified"> 283 .fi     </span>
<span class="line-modified"> 284 .nf     </span>
<span class="line-modified"> 285 \f3\fP</span>
<span class="line-modified"> 286 .fi     </span>
<span class="line-modified"> 287 .sp     </span>
<span class="line-modified"> 288 In generating a public/private key pair, the signature algorithm (\f3-sigalg\fR option) is derived from the algorithm of the underlying private key:</span>
<span class="line-modified"> 289 .TP 0.2i    </span>
<span class="line-modified"> 290 \(bu</span>
<span class="line-modified"> 291 If the underlying private key is of type DSA, then the \f3-sigalg\fR option defaults to SHA1withDSA\&amp;.</span>
<span class="line-modified"> 292 .TP 0.2i    </span>
<span class="line-modified"> 293 \(bu</span>
<span class="line-modified"> 294 If the underlying private key is of type RSA, then the \f3-sigalg\fR option defaults to SHA256withRSA\&amp;.</span>
<span class="line-modified"> 295 .TP 0.2i    </span>
<span class="line-modified"> 296 \(bu</span>
<span class="line-modified"> 297 If the underlying private key is of type EC, then the \f3-sigalg\fR option defaults to SHA256withECDSA\&amp;.</span>
<span class="line-modified"> 298 .PP</span>
<span class="line-modified"> 299 For a full list of \f3-keyalg\fR and \f3-sigalg\fR arguments, see Java Cryptography Architecture (JCA) Reference Guide at http://docs\&amp;.oracle\&amp;.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec\&amp;.html#AppA</span>
<span class="line-modified"> 300 .SH COMMON\ OPTIONS    </span>
<span class="line-modified"> 301 The \f3-v\fR option can appear for all commands except \f3-help\fR\&amp;. When the \f3-v\fR option appears, it signifies verbose mode, which means that more information is provided in the output\&amp;.</span>
<span class="line-modified"> 302 .PP</span>
<span class="line-modified"> 303 There is also a \f3-Jjavaoption\fR argument that can appear for any command\&amp;. When the \f3-Jjavaoption\fR appears, the specified \f3javaoption\fR string is passed directly to the Java interpreter\&amp;. This option does not contain any spaces\&amp;. It is useful for adjusting the execution environment or memory usage\&amp;. For a list of possible interpreter options, type \f3java -h\fR or \f3java -X\fR at the command line\&amp;.</span>



































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 304 .PP
 305 These options can appear for all commands operating on a keystore:
 306 .TP
<span class="line-modified"> 307 -storetype \fIstoretype\fR</span>
<span class="line-modified"> 308 .br</span>
<span class="line-modified"> 309 This qualifier specifies the type of keystore to be instantiated\&amp;.</span>

 310 .TP
<span class="line-modified"> 311 -keystore \fIkeystore\fR</span>
<span class="line-modified"> 312 .br</span>
<span class="line-modified"> 313 The keystore location\&amp;.</span>
<span class="line-modified"> 314 </span>
<span class="line-modified"> 315 If the JKS \f3storetype\fR is used and a keystore file does not yet exist, then certain \f3keytool\fR commands can result in a new keystore file being created\&amp;. For example, if \f3keytool -genkeypair\fR is called and the \f3-keystore\fR option is not specified, the default keystore file named \f3\&amp;.keystore\fR in the user\&amp;&#39;s home directory is created when it does not already exist\&amp;. Similarly, if the \f3-keystore ks_file\fR option is specified but ks_file does not exist, then it is created\&amp;. For more information on the JKS \f3storetype\fR, see the \fIKeyStore Implementation\fR section in KeyStore aliases\&amp;.</span>
<span class="line-modified"> 316 </span>
<span class="line-modified"> 317 Note that the input stream from the \f3-keystore\fR option is passed to the \f3KeyStore\&amp;.load\fR method\&amp;. If \f3NONE\fR is specified as the URL, then a null stream is passed to the \f3KeyStore\&amp;.load\fR method\&amp;. \f3NONE\fR should be specified if the keystore is not file-based\&amp;. For example, when it resides on a hardware token device\&amp;.</span>
















 318 .TP
<span class="line-modified"> 319 -storepass[:\fIenv\fR| :\fIfile\fR] argument</span>
<span class="line-modified"> 320 .br</span>
<span class="line-modified"> 321 The password that is used to protect the integrity of the keystore\&amp;.</span>
<span class="line-modified"> 322 </span>
<span class="line-modified"> 323 If the modifier \f3env\fR or \f3file\fR is not specified, then the password has the \f3value\fR argument, which must be at least 6 characters long\&amp;. Otherwise, the password is retrieved as follows:</span>
<span class="line-modified"> 324 .RS     </span>
<span class="line-modified"> 325 .TP 0.2i    </span>
<span class="line-modified"> 326 \(bu</span>
<span class="line-removed"> 327 \f3env\fR: Retrieve the password from the environment variable named \f3argument\fR\&amp;.</span>
<span class="line-removed"> 328 .TP 0.2i    </span>
<span class="line-removed"> 329 \(bu</span>
<span class="line-removed"> 330 \f3file\fR: Retrieve the password from the file named argument\&amp;.</span>
<span class="line-removed"> 331 .RE     </span>
<span class="line-removed"> 332 </span>
<span class="line-removed"> 333 </span>
<span class="line-removed"> 334 \fINote:\fR All other options that require passwords, such as \f3-keypass\fR, \f3-srckeypass\fR, -\f3destkeypass\fR, \f3-srcstorepass\fR, and \f3-deststorepass\fR, accept the \fIenv\fR and \fIfile\fR modifiers\&amp;. Remember to separate the password option and the modifier with a colon (:)\&amp;.</span>
<span class="line-removed"> 335 </span>
<span class="line-removed"> 336 The password must be provided to all commands that access the keystore contents\&amp;. For such commands, when the \f3-storepass\fR option is not provided at the command line, the user is prompted for it\&amp;.</span>
<span class="line-removed"> 337 </span>
<span class="line-removed"> 338 When retrieving information from the keystore, the password is optional\&amp;. If no password is specified, then the integrity of the retrieved information cannot be verified and a warning is displayed\&amp;.</span>
 339 .TP
<span class="line-modified"> 340 -providerName \fIprovider_name\fR</span>
<span class="line-modified"> 341 .br</span>
<span class="line-modified"> 342 Used to identify a cryptographic service provider\&amp;&#39;s name when listed in the security properties file\&amp;.</span>




























 343 .TP
<span class="line-modified"> 344 -providerClass \fIprovider_class_name\fR</span>
<span class="line-modified"> 345 .br</span>
<span class="line-modified"> 346 Used to specify the name of a cryptographic service provider\&amp;&#39;s master class file when the service provider is not listed in the security properties file\&amp;.</span>


 347 .TP
<span class="line-modified"> 348 -providerArg \fIprovider_arg\fR</span>
<span class="line-modified"> 349 .br</span>
<span class="line-modified"> 350 Used with the \f3-providerClass\fR option to represent an optional string input argument for the constructor of \f3provider_class_name\fR\&amp;.</span>

 351 .TP
<span class="line-modified"> 352 -protected</span>
<span class="line-modified"> 353 .br</span>
<span class="line-modified"> 354 Either \f3true\fR or \f3false\fR\&amp;. This value should be specified as \f3true\fR when a password must be specified by way of a protected authentication path such as a dedicated PIN reader\&amp;.Because there are two keystores involved in the \f3-importkeystore\fR command, the following two options \f3-srcprotected\fR and -\f3destprotected\fR are provided for the source keystore and the destination keystore respectively\&amp;.</span>



 355 .TP
<span class="line-modified"> 356 -ext \fI{name{:critical} {=value}}\fR</span>
<span class="line-modified"> 357 .br</span>
<span class="line-modified"> 358 Denotes an X\&amp;.509 certificate extension\&amp;. The option can be used in \f3-genkeypair\fR and \f3-gencert\fR to embed extensions into the certificate generated, or in \f3-certreq\fR to show what extensions are requested in the certificate request\&amp;. The option can appear multiple times\&amp;. The \f3name\fR argument can be a supported extension name (see Named Extensions) or an arbitrary OID number\&amp;. The \f3value\fR argument, when provided, denotes the argument for the extension\&amp;. When \fIvalue\fR is omitted, that means that the default value of the extension or the extension requires no argument\&amp;. The \f3:critical\fR modifier, when provided, means the extension\&amp;&#39;s \f3isCritical\fR attribute is \f3true\fR; otherwise, it is \f3false\fR\&amp;. You can use \f3:c\fR in place of \f3:critical\fR\&amp;.</span>
<span class="line-modified"> 359 .SH NAMED\ EXTENSIONS    </span>
<span class="line-modified"> 360 The \f3keytool\fR command supports these named extensions\&amp;. The names are not case-sensitive)\&amp;.</span>
<span class="line-modified"> 361 .TP     </span>
<span class="line-modified"> 362 BC or BasicContraints</span>
<span class="line-modified"> 363 \fIValues\fR: The full form is: \f3ca:{true|false}[,pathlen:&lt;len&gt;]\fR or \f3&lt;len&gt;\fR, which is short for \f3ca:true,pathlen:&lt;len&gt;\fR\&amp;. When &lt;\f3len\fR&gt; is omitted, you have \f3ca:true\fR\&amp;.</span>
<span class="line-modified"> 364 .TP     </span>
<span class="line-modified"> 365 KU or KeyUsage</span>
<span class="line-modified"> 366 \fIValues\fR: \f3usage\fR(,\f3usage\fR)*, where \fIusage\fR can be one of \f3digitalSignature\fR, \f3nonRepudiation\fR (contentCommitment), \f3keyEncipherment\fR, \f3dataEncipherment\fR, \f3keyAgreement\fR, \f3keyCertSign\fR, \f3cRLSign\fR, \f3encipherOnly\fR, \f3decipherOnly\fR\&amp;. The \fIusage\fR argument can be abbreviated with the first few letters (\f3dig\fR for \f3digitalSignature\fR) or in camel-case style (\f3dS\fR for \f3digitalSignature\fR or \f3cRLS\fR for \f3cRLSign\fR), as long as no ambiguity is found\&amp;. The \f3usage\fR values are case-sensitive\&amp;.</span>
<span class="line-modified"> 367 .TP     </span>
<span class="line-modified"> 368 EKU or ExtendedKeyUsage</span>
<span class="line-modified"> 369 \fIValues\fR: \f3usage\fR(,\f3usage\fR)*, where \fIusage\fR can be one of \f3anyExtendedKeyUsage\fR, \f3serverAuth\fR, \f3clientAuth\fR, \f3codeSigning\fR, \f3emailProtection\fR, \f3timeStamping\fR, \f3OCSPSigning\fR, or any \fIOID string\fR\&amp;. The \fIusage\fR argument can be abbreviated with the first few letters or in camel-case style, as long as no ambiguity is found\&amp;. The \f3usage\fR values are case-sensitive\&amp;.</span>
<span class="line-modified"> 370 .TP     </span>
<span class="line-modified"> 371 SAN or SubjectAlternativeName</span>
<span class="line-modified"> 372 \fIValues\fR: \f3type\fR:\f3value\fR(,t\f3ype:value\fR)*, where \f3type\fR can be \f3EMAIL\fR, \f3URI\fR, \f3DNS\fR, \f3IP\fR, or \f3OID\fR\&amp;. The \f3value\fR argument is the string format value for the \f3type\fR\&amp;.</span>
<span class="line-modified"> 373 .TP     </span>
<span class="line-modified"> 374 IAN or IssuerAlternativeName</span>
<span class="line-modified"> 375 \fIValues\fR: Same as \f3SubjectAlternativeName\fR\&amp;.</span>
<span class="line-modified"> 376 .TP     </span>
<span class="line-modified"> 377 SIA or SubjectInfoAccess</span>
<span class="line-modified"> 378 \fIValues\fR: \f3method\fR:\f3location-type\fR:\f3location-value\fR (,\f3method:location-type\fR:\f3location-value\fR)*, where \f3method\fR can be \f3timeStamping\fR, \f3caRepository\fR or any OID\&amp;. The \f3location-type\fR and \f3location-value\fR arguments can be any \f3type\fR:\f3value\fR supported by the \f3SubjectAlternativeName\fR extension\&amp;.</span>
<span class="line-modified"> 379 .TP     </span>
<span class="line-modified"> 380 AIA or AuthorityInfoAccess</span>
<span class="line-modified"> 381 \fIValues\fR: Same as \f3SubjectInfoAccess\fR\&amp;. The \f3method\fR argument can be \f3ocsp\fR,\f3caIssuers\fR, or any OID\&amp;.</span>
<span class="line-modified"> 382 .PP</span>
<span class="line-modified"> 383 When \f3name\fR is OID, the value is the hexadecimal dumped DER encoding of the \f3extnValue\fR for the extension excluding the OCTET STRING type and length bytes\&amp;. Any extra character other than standard hexadecimal numbers (0-9, a-f, A-F) are ignored in the HEX string\&amp;. Therefore, both 01:02:03:04 and 01020304 are accepted as identical values\&amp;. When there is no value, the extension has an empty value field\&amp;.</span>
<span class="line-modified"> 384 .PP</span>
<span class="line-modified"> 385 A special name \f3honored\fR, used in \f3-gencert\fR only, denotes how the extensions included in the certificate request should be honored\&amp;. The value for this name is a comma separated list of \f3all\fR (all requested extensions are honored), \f3name{:[critical|non-critical]}\fR (the named extension is honored, but using a different \f3isCritical\fR attribute) and \f3-name\fR (used with \f3all\fR, denotes an exception)\&amp;. Requested extensions are not honored by default\&amp;.</span>
<span class="line-modified"> 386 .PP</span>
<span class="line-modified"> 387 If, besides the\f3-ext honored\fR option, another named or OID \f3-ext\fR option is provided, this extension is added to those already honored\&amp;. However, if this name (or OID) also appears in the honored value, then its value and criticality overrides the one in the request\&amp;.</span>
<span class="line-modified"> 388 .PP</span>
<span class="line-modified"> 389 The \f3subjectKeyIdentifier\fR extension is always created\&amp;. For non-self-signed certificates, the \f3authorityKeyIdentifier\fR is created\&amp;.</span>
<span class="line-modified"> 390 .PP</span>
<span class="line-modified"> 391 \fINote:\fR Users should be aware that some combinations of extensions (and other certificate fields) may not conform to the Internet standard\&amp;. See Certificate Conformance Warning\&amp;.</span>
<span class="line-modified"> 392 .SH COMMANDS    </span>
<span class="line-modified"> 393 .TP     </span>
<span class="line-modified"> 394 -gencert</span>
<span class="line-modified"> 395 .sp     </span>
<span class="line-modified"> 396 .nf     </span>
<span class="line-modified"> 397 \f3{\-rfc} {\-infile \fIinfile\fR} {\-outfile \fIoutfile\fR} {\-alias \fIalias\fR} {\-sigalg \fIsigalg\fR}\fP</span>
<span class="line-modified"> 398 .fi     </span>
<span class="line-modified"> 399 .sp     </span>
<span class="line-modified"> 400 .sp     </span>
<span class="line-modified"> 401 .nf     </span>
<span class="line-modified"> 402 \f3{\-dname \fIdname\fR} {\-startdate \fIstartdate\fR {\-ext \fIext\fR}* {\-validity \fIvalDays\fR}\fP</span>
<span class="line-modified"> 403 .fi     </span>
<span class="line-modified"> 404 .sp     </span>
<span class="line-modified"> 405 .sp     </span>
<span class="line-modified"> 406 .nf     </span>
<span class="line-modified"> 407 \f3[\-keypass \fIkeypass\fR] {\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR]\fP</span>
<span class="line-modified"> 408 .fi     </span>
<span class="line-modified"> 409 .sp     </span>
<span class="line-modified"> 410 .sp     </span>
<span class="line-modified"> 411 .nf     </span>
<span class="line-modified"> 412 \f3{\-storetype \fIstoretype\fR} {\-providername \fIprovider_name\fR}\fP</span>
<span class="line-modified"> 413 .fi     </span>
<span class="line-modified"> 414 .sp     </span>
<span class="line-modified"> 415 .sp     </span>
<span class="line-modified"> 416 .nf     </span>
<span class="line-modified"> 417 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-modified"> 418 .fi     </span>
<span class="line-modified"> 419 .sp     </span>
<span class="line-modified"> 420 .sp     </span>
<span class="line-modified"> 421 .nf     </span>
<span class="line-modified"> 422 \f3{\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-modified"> 423 .fi     </span>
<span class="line-modified"> 424 .sp     </span>
<span class="line-modified"> 425 </span>
<span class="line-modified"> 426 </span>
<span class="line-modified"> 427 Generates a certificate as a response to a certificate request file (which can be created by the \f3keytool\fR\f3-certreq\fR command)\&amp;. The command reads the request from \fIinfile\fR (if omitted, from the standard input), signs it using alias\&amp;&#39;s private key, and outputs the X\&amp;.509 certificate into \fIoutfile\fR (if omitted, to the standard output)\&amp;. When\f3-rfc\fR is specified, the output format is Base64-encoded PEM; otherwise, a binary DER is created\&amp;.</span>
<span class="line-modified"> 428 </span>
<span class="line-modified"> 429 The \f3sigalg\fR value specifies the algorithm that should be used to sign the certificate\&amp;. The \f3startdate\fR argument is the start time and date that the certificate is valid\&amp;. The \f3valDays\fR argument tells the number of days for which the certificate should be considered valid\&amp;.</span>
<span class="line-modified"> 430 </span>
<span class="line-modified"> 431 When \f3dname\fR is provided, it is used as the subject of the generated certificate\&amp;. Otherwise, the one from the certificate request is used\&amp;.</span>
<span class="line-modified"> 432 </span>
<span class="line-modified"> 433 The \f3ext\fR value shows what X\&amp;.509 extensions will be embedded in the certificate\&amp;. Read Common Options for the grammar of \f3-ext\fR\&amp;.</span>
<span class="line-modified"> 434 </span>
<span class="line-modified"> 435 The \f3-gencert\fR option enables you to create certificate chains\&amp;. The following example creates a certificate, \f3e1\fR, that contains three certificates in its certificate chain\&amp;.</span>
<span class="line-modified"> 436 </span>
<span class="line-modified"> 437 The following commands creates four key pairs named \f3ca\fR, \f3ca1\fR, \f3ca2\fR, and \f3e1\fR:</span>
<span class="line-modified"> 438 .sp     </span>
<span class="line-modified"> 439 .nf     </span>
<span class="line-modified"> 440 \f3keytool \-alias ca \-dname CN=CA \-genkeypair\fP</span>
<span class="line-modified"> 441 .fi     </span>
<span class="line-modified"> 442 .nf     </span>
<span class="line-modified"> 443 \f3keytool \-alias ca1 \-dname CN=CA \-genkeypair\fP</span>
<span class="line-modified"> 444 .fi     </span>
<span class="line-modified"> 445 .nf     </span>
<span class="line-modified"> 446 \f3keytool \-alias ca2 \-dname CN=CA \-genkeypair\fP</span>
<span class="line-modified"> 447 .fi     </span>
<span class="line-modified"> 448 .nf     </span>
<span class="line-modified"> 449 \f3keytool \-alias e1 \-dname CN=E1 \-genkeypair\fP</span>
<span class="line-modified"> 450 .fi     </span>
<span class="line-modified"> 451 .nf     </span>
<span class="line-modified"> 452 \f3\fP</span>
<span class="line-modified"> 453 .fi     </span>
<span class="line-modified"> 454 .sp     </span>
<span class="line-modified"> 455 </span>
<span class="line-modified"> 456 </span>
<span class="line-modified"> 457 The following two commands create a chain of signed certificates; \f3ca\fR signs \f3ca1\fR and \f3ca1\fR signs \f3ca2\fR, all of which are self-issued:</span>
<span class="line-modified"> 458 .sp     </span>
<span class="line-modified"> 459 .nf     </span>
<span class="line-modified"> 460 \f3keytool \-alias ca1 \-certreq |\fP</span>
<span class="line-modified"> 461 .fi     </span>
<span class="line-modified"> 462 .nf     </span>
<span class="line-modified"> 463 \f3    keytool \-alias ca \-gencert \-ext san=dns:ca1 |\fP</span>
<span class="line-modified"> 464 .fi     </span>
<span class="line-modified"> 465 .nf     </span>
<span class="line-modified"> 466 \f3    keytool \-alias ca1 \-importcert\fP</span>
<span class="line-modified"> 467 .fi     </span>
<span class="line-modified"> 468 .nf     </span>
<span class="line-modified"> 469 \f3\fP</span>
<span class="line-modified"> 470 .fi     </span>
<span class="line-modified"> 471 .nf     </span>
<span class="line-modified"> 472 \f3keytool \-alias ca2 \-certreq |\fP</span>
<span class="line-modified"> 473 .fi     </span>
<span class="line-removed"> 474 .nf     </span>
<span class="line-removed"> 475 \f3    $KT \-alias ca1 \-gencert \-ext san=dns:ca2 |\fP</span>
<span class="line-removed"> 476 .fi     </span>
<span class="line-removed"> 477 .nf     </span>
<span class="line-removed"> 478 \f3    $KT \-alias ca2 \-importcert\fP</span>
<span class="line-removed"> 479 .fi     </span>
<span class="line-removed"> 480 .nf     </span>
<span class="line-removed"> 481 \f3\fP</span>
<span class="line-removed"> 482 .fi     </span>
<span class="line-removed"> 483 .sp     </span>
<span class="line-removed"> 484 </span>
<span class="line-removed"> 485 </span>
<span class="line-removed"> 486 The following command creates the certificate \f3e1\fR and stores it in the file \f3e1\&amp;.cert\fR, which is signed by \f3ca2\fR\&amp;. As a result, \f3e1\fR should contain \f3ca\fR, \f3ca1\fR, and \f3ca2\fR in its certificate chain:</span>
<span class="line-removed"> 487 .sp     </span>
<span class="line-removed"> 488 .nf     </span>
<span class="line-removed"> 489 \f3keytool \-alias e1 \-certreq | keytool \-alias ca2 \-gencert &gt; e1\&amp;.cert\fP</span>
<span class="line-removed"> 490 .fi     </span>
<span class="line-removed"> 491 .nf     </span>
<span class="line-removed"> 492 \f3\fP</span>
<span class="line-removed"> 493 .fi     </span>
<span class="line-removed"> 494 .sp     </span>
<span class="line-removed"> 495 </span>
<span class="line-removed"> 496 .TP     </span>
<span class="line-removed"> 497 -genkeypair</span>
<span class="line-removed"> 498 .sp     </span>
<span class="line-removed"> 499 .nf     </span>
<span class="line-removed"> 500 \f3{\-alias \fIalias\fR} {\-keyalg \fIkeyalg\fR} {\-keysize \fIkeysize\fR} {\-sigalg \fIsigalg\fR}\fP</span>
<span class="line-removed"> 501 .fi     </span>
<span class="line-removed"> 502 .sp     </span>
<span class="line-removed"> 503 .sp     </span>
<span class="line-removed"> 504 .nf     </span>
<span class="line-removed"> 505 \f3[\-dname \fIdname\fR] [\-keypass \fIkeypass\fR] {\-startdate \fIvalue\fR} {\-ext \fIext\fR}*\fP</span>
<span class="line-removed"> 506 .fi     </span>
<span class="line-removed"> 507 .sp     </span>
<span class="line-removed"> 508 .sp     </span>
<span class="line-removed"> 509 .nf     </span>
<span class="line-removed"> 510 \f3{\-validity \fIvalDays\fR} {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR}\fP</span>
<span class="line-removed"> 511 .fi     </span>
<span class="line-removed"> 512 .sp     </span>
<span class="line-removed"> 513 .sp     </span>
<span class="line-removed"> 514 .nf     </span>
<span class="line-removed"> 515 \f3[\-storepass \fIstorepass\fR]\fP</span>
<span class="line-removed"> 516 .fi     </span>
<span class="line-removed"> 517 .sp     </span>
<span class="line-removed"> 518 .sp     </span>
<span class="line-removed"> 519 .nf     </span>
<span class="line-removed"> 520 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 521 .fi     </span>
<span class="line-removed"> 522 .sp     </span>
<span class="line-removed"> 523 .sp     </span>
<span class="line-removed"> 524 .nf     </span>
<span class="line-removed"> 525 \f3{\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 526 .fi     </span>
<span class="line-removed"> 527 .sp     </span>
<span class="line-removed"> 528 </span>
<span class="line-removed"> 529 </span>
<span class="line-removed"> 530 Generates a key pair (a public key and associated private key)\&amp;. Wraps the public key into an X\&amp;.509 v3 self-signed certificate, which is stored as a single-element certificate chain\&amp;. This certificate chain and the private key are stored in a new keystore entry identified by alias\&amp;.</span>
<span class="line-removed"> 531 </span>
<span class="line-removed"> 532 The \f3keyalg\fR value specifies the algorithm to be used to generate the key pair, and the \f3keysize\fR value specifies the size of each key to be generated\&amp;. The \f3sigalg\fR value specifies the algorithm that should be used to sign the self-signed certificate\&amp;. This algorithm must be compatible with the \f3keyalg\fR value\&amp;.</span>
<span class="line-removed"> 533 </span>
<span class="line-removed"> 534 The \f3dname\fR value specifies the X\&amp;.500 Distinguished Name to be associated with the value of \f3alias\fR, and is used as the issuer and subject fields in the self-signed certificate\&amp;. If no distinguished name is provided at the command line, then the user is prompted for one\&amp;.</span>
<span class="line-removed"> 535 </span>
<span class="line-removed"> 536 The value of \f3keypass\fR is a password used to protect the private key of the generated key pair\&amp;. If no password is provided, then the user is prompted for it\&amp;. If you press \fIthe Return key\fR at the prompt, then the key password is set to the same password as the keystore password\&amp;. The \f3keypass\fR value must be at least 6 characters\&amp;.</span>
<span class="line-removed"> 537 </span>
<span class="line-removed"> 538 The value of \f3startdate\fR specifies the issue time of the certificate, also known as the &quot;Not Before&quot; value of the X\&amp;.509 certificate\&amp;&#39;s Validity field\&amp;.</span>
<span class="line-removed"> 539 </span>
<span class="line-removed"> 540 The option value can be set in one of these two forms:</span>
<span class="line-removed"> 541 </span>
<span class="line-removed"> 542 \f3([+-]nnn[ymdHMS])+\fR</span>
<span class="line-removed"> 543 </span>
<span class="line-removed"> 544 \f3[yyyy/mm/dd] [HH:MM:SS]\fR</span>
<span class="line-removed"> 545 </span>
<span class="line-removed"> 546 With the first form, the issue time is shifted by the specified value from the current time\&amp;. The value is a concatenation of a sequence of subvalues\&amp;. Inside each subvalue, the plus sign (+) means shift forward, and the minus sign (-) means shift backward\&amp;. The time to be shifted is \f3nnn\fR units of years, months, days, hours, minutes, or seconds (denoted by a single character of \f3y\fR, \f3m\fR, \f3d\fR, \f3H\fR, \f3M\fR, or \f3S\fR respectively)\&amp;. The exact value of the issue time is calculated using the \f3java\&amp;.util\&amp;.GregorianCalendar\&amp;.add(int field, int amount)\fR method on each subvalue, from left to right\&amp;. For example, by specifying, the issue time will be:</span>
<span class="line-removed"> 547 .sp     </span>
<span class="line-removed"> 548 .nf     </span>
<span class="line-removed"> 549 \f3Calendar c = new GregorianCalendar();\fP</span>
<span class="line-removed"> 550 .fi     </span>
<span class="line-removed"> 551 .nf     </span>
<span class="line-removed"> 552 \f3c\&amp;.add(Calendar\&amp;.YEAR, \-1);\fP</span>
<span class="line-removed"> 553 .fi     </span>
<span class="line-removed"> 554 .nf     </span>
<span class="line-removed"> 555 \f3c\&amp;.add(Calendar\&amp;.MONTH, 1);\fP</span>
<span class="line-removed"> 556 .fi     </span>
<span class="line-removed"> 557 .nf     </span>
<span class="line-removed"> 558 \f3c\&amp;.add(Calendar\&amp;.DATE, \-1);\fP</span>
<span class="line-removed"> 559 .fi     </span>
<span class="line-removed"> 560 .nf     </span>
<span class="line-removed"> 561 \f3return c\&amp;.getTime()\fP</span>
<span class="line-removed"> 562 .fi     </span>
<span class="line-removed"> 563 .nf     </span>
<span class="line-removed"> 564 \f3\fP</span>
<span class="line-removed"> 565 .fi     </span>
<span class="line-removed"> 566 .sp     </span>
<span class="line-removed"> 567 </span>
<span class="line-removed"> 568 </span>
<span class="line-removed"> 569 With the second form, the user sets the exact issue time in two parts, year/month/day and hour:minute:second (using the local time zone)\&amp;. The user can provide only one part, which means the other part is the same as the current date (or time)\&amp;. The user must provide the exact number of digits as shown in the format definition (padding with 0 when shorter)\&amp;. When both the date and time are provided, there is one (and only one) space character between the two parts\&amp;. The hour should always be provided in 24 hour format\&amp;.</span>
<span class="line-removed"> 570 </span>
<span class="line-removed"> 571 When the option is not provided, the start date is the current time\&amp;. The option can be provided at most once\&amp;.</span>
<span class="line-removed"> 572 </span>
<span class="line-removed"> 573 The value of \f3valDays\fR specifies the number of days (starting at the date specified by \f3-startdate\fR, or the current date when \f3-startdate\fR is not specified) for which the certificate should be considered valid\&amp;.</span>
<span class="line-removed"> 574 </span>
<span class="line-removed"> 575 This command was named \f3-genkey\fR in earlier releases\&amp;. The old name is still supported in this release\&amp;. The new name, \f3-genkeypair\fR, is preferred going forward\&amp;.</span>
<span class="line-removed"> 576 .TP     </span>
<span class="line-removed"> 577 -genseckey</span>
<span class="line-removed"> 578 .sp     </span>
<span class="line-removed"> 579 .nf     </span>
<span class="line-removed"> 580 \f3{\-alias \fIalias\fR} {\-keyalg \fIkeyalg\fR} {\-keysize \fIkeysize\fR} [\-keypass \fIkeypass\fR]\fP</span>
<span class="line-removed"> 581 .fi     </span>
<span class="line-removed"> 582 .sp     </span>
<span class="line-removed"> 583 .sp     </span>
<span class="line-removed"> 584 .nf     </span>
<span class="line-removed"> 585 \f3{\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR]\fP</span>
<span class="line-removed"> 586 .fi     </span>
<span class="line-removed"> 587 .sp     </span>
<span class="line-removed"> 588 .sp     </span>
<span class="line-removed"> 589 .nf     </span>
<span class="line-removed"> 590 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}} {\-v}\fP</span>
<span class="line-removed"> 591 .fi     </span>
<span class="line-removed"> 592 .sp     </span>
<span class="line-removed"> 593 .sp     </span>
<span class="line-removed"> 594 .nf     </span>
<span class="line-removed"> 595 \f3{\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 596 .fi     </span>
<span class="line-removed"> 597 .sp     </span>
<span class="line-removed"> 598 </span>
<span class="line-removed"> 599 </span>
<span class="line-removed"> 600 Generates a secret key and stores it in a new \f3KeyStore\&amp;.SecretKeyEntry\fR identified by \f3alias\fR\&amp;.</span>
<span class="line-removed"> 601 </span>
<span class="line-removed"> 602 The value of \f3keyalg\fR specifies the algorithm to be used to generate the secret key, and the value of \f3keysize\fR specifies the size of the key to be generated\&amp;. The \f3keypass\fR value is a password that protects the secret key\&amp;. If no password is provided, then the user is prompted for it\&amp;. If you press the Return key at the prompt, then the key password is set to the same password that is used for the \f3keystore\fR\&amp;. The \f3keypass\fR value must be at least 6 characters\&amp;.</span>
<span class="line-removed"> 603 .TP     </span>
<span class="line-removed"> 604 -importcert</span>
<span class="line-removed"> 605 .sp     </span>
<span class="line-removed"> 606 .nf     </span>
<span class="line-removed"> 607 \f3{\-alias \fIalias\fR} {\-file \fIcert_file\fR} [\-keypass \fIkeypass\fR] {\-noprompt} {\-trustcacerts}\fP</span>
<span class="line-removed"> 608 .fi     </span>
<span class="line-removed"> 609 .sp     </span>
<span class="line-removed"> 610 .sp     </span>
<span class="line-removed"> 611 .nf     </span>
<span class="line-removed"> 612 \f3{\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR]\fP</span>
<span class="line-removed"> 613 .fi     </span>
<span class="line-removed"> 614 .sp     </span>
<span class="line-removed"> 615 .sp     </span>
<span class="line-removed"> 616 .nf     </span>
<span class="line-removed"> 617 \f3{\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-removed"> 618 .fi     </span>
<span class="line-removed"> 619 .sp     </span>
<span class="line-removed"> 620 .sp     </span>
<span class="line-removed"> 621 .nf     </span>
<span class="line-removed"> 622 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 623 .fi     </span>
<span class="line-removed"> 624 .sp     </span>
<span class="line-removed"> 625 .sp     </span>
<span class="line-removed"> 626 .nf     </span>
<span class="line-removed"> 627 \f3{\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 628 .fi     </span>
<span class="line-removed"> 629 .sp     </span>
<span class="line-removed"> 630 </span>
<span class="line-removed"> 631 </span>
<span class="line-removed"> 632 Reads the certificate or certificate chain (where the latter is supplied in a PKCS#7 formatted reply or a sequence of X\&amp;.509 certificates) from the file \f3cert_file\fR, and stores it in the \f3keystore\fR entry identified by \f3alias\fR\&amp;. If no file is specified, then the certificate or certificate chain is read from \f3stdin\fR\&amp;.</span>
<span class="line-removed"> 633 </span>
<span class="line-removed"> 634 The \f3keytool\fR command can import X\&amp;.509 v1, v2, and v3 certificates, and PKCS#7 formatted certificate chains consisting of certificates of that type\&amp;. The data to be imported must be provided either in binary encoding format or in printable encoding format (also known as Base64 encoding) as defined by the Internet RFC 1421 standard\&amp;. In the latter case, the encoding must be bounded at the beginning by a string that starts with \f3-\fR\f3----BEGIN\fR, and bounded at the end by a string that starts with \f3-----END\fR\&amp;.</span>
<span class="line-removed"> 635 </span>
<span class="line-removed"> 636 You import a certificate for two reasons: To add it to the list of trusted certificates, and to import a certificate reply received from a certificate authority (CA) as the result of submitting a Certificate Signing Request to that CA (see the \f3-certreq\fR option in Commands)\&amp;.</span>
<span class="line-removed"> 637 </span>
<span class="line-removed"> 638 Which type of import is intended is indicated by the value of the \f3-alias\fR option\&amp;. If the alias does not point to a key entry, then the \f3keytool\fR command assumes you are adding a trusted certificate entry\&amp;. In this case, the alias should not already exist in the keystore\&amp;. If the alias does already exist, then the \f3keytool\fR command outputs an error because there is already a trusted certificate for that alias, and does not import the certificate\&amp;. If the alias points to a key entry, then the \f3keytool\fR command assumes you are importing a certificate reply\&amp;.</span>
<span class="line-removed"> 639 .TP     </span>
<span class="line-removed"> 640 -importpassword</span>
<span class="line-removed"> 641 .sp     </span>
<span class="line-removed"> 642 .nf     </span>
<span class="line-removed"> 643 \f3{\-alias \fIalias\fR} [\-keypass \fIkeypass\fR] {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR}\fP</span>
<span class="line-removed"> 644 .fi     </span>
<span class="line-removed"> 645 .sp     </span>
<span class="line-removed"> 646 .sp     </span>
<span class="line-removed"> 647 .nf     </span>
<span class="line-removed"> 648 \f3[\-storepass \fIstorepass\fR]\fP</span>
<span class="line-removed"> 649 .fi     </span>
<span class="line-removed"> 650 .sp     </span>
<span class="line-removed"> 651 .sp     </span>
<span class="line-removed"> 652 .nf     </span>
<span class="line-removed"> 653 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 654 .fi     </span>
<span class="line-removed"> 655 .sp     </span>
<span class="line-removed"> 656 .sp     </span>
<span class="line-removed"> 657 .nf     </span>
<span class="line-removed"> 658 \f3{\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 659 .fi     </span>
<span class="line-removed"> 660 .sp     </span>
<span class="line-removed"> 661 </span>
<span class="line-removed"> 662 </span>
<span class="line-removed"> 663 Imports a passphrase and stores it in a new \f3KeyStore\&amp;.SecretKeyEntry\fR identified by \f3alias\fR\&amp;. The passphrase may be supplied via the standard input stream; otherwise the user is prompted for it\&amp;. \f3keypass\fR is a password used to protect the imported passphrase\&amp;. If no password is provided, the user is prompted for it\&amp;. If you press the Return key at the prompt, the key password is set to the same password as that used for the \f3keystore\fR\&amp;. \f3keypass\fR must be at least 6 characters long\&amp;.</span>
<span class="line-removed"> 664 .TP     </span>
<span class="line-removed"> 665 -importkeystore</span>
<span class="line-removed"> 666 .sp     </span>
<span class="line-removed"> 667 .nf     </span>
<span class="line-removed"> 668 \f3{\-srcstoretype \fIsrcstoretype\fR} {\-deststoretype \fIdeststoretype\fR}\fP</span>
<span class="line-removed"> 669 .fi     </span>
<span class="line-removed"> 670 .sp     </span>
<span class="line-removed"> 671 .sp     </span>
<span class="line-removed"> 672 .nf     </span>
<span class="line-removed"> 673 \f3[\-srcstorepass \fIsrcstorepass\fR] [\-deststorepass \fIdeststorepass\fR] {\-srcprotected}\fP</span>
<span class="line-removed"> 674 .fi     </span>
<span class="line-removed"> 675 .sp     </span>
<span class="line-removed"> 676 .sp     </span>
<span class="line-removed"> 677 .nf     </span>
<span class="line-removed"> 678 \f3{\-destprotected} \fP</span>
<span class="line-removed"> 679 .fi     </span>
<span class="line-removed"> 680 .sp     </span>
<span class="line-removed"> 681 .sp     </span>
<span class="line-removed"> 682 .nf     </span>
<span class="line-removed"> 683 \f3{\-srcalias \fIsrcalias\fR {\-destalias \fIdestalias\fR} [\-srckeypass \fIsrckeypass\fR]} \fP</span>
<span class="line-removed"> 684 .fi     </span>
<span class="line-removed"> 685 .sp     </span>
<span class="line-removed"> 686 .sp     </span>
<span class="line-removed"> 687 .nf     </span>
<span class="line-removed"> 688 \f3[\-destkeypass \fIdestkeypass\fR] {\-noprompt}\fP</span>
<span class="line-removed"> 689 .fi     </span>
<span class="line-removed"> 690 .sp     </span>
<span class="line-removed"> 691 .sp     </span>
<span class="line-removed"> 692 .nf     </span>
<span class="line-removed"> 693 \f3{\-srcProviderName \fIsrc_provider_name\fR} {\-destProviderName \fIdest_provider_name\fR}\fP</span>
<span class="line-removed"> 694 .fi     </span>
<span class="line-removed"> 695 .sp     </span>
<span class="line-removed"> 696 .sp     </span>
<span class="line-removed"> 697 .nf     </span>
<span class="line-removed"> 698 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}} {\-v}\fP</span>
<span class="line-removed"> 699 .fi     </span>
<span class="line-removed"> 700 .sp     </span>
<span class="line-removed"> 701 .sp     </span>
<span class="line-removed"> 702 .nf     </span>
<span class="line-removed"> 703 \f3{\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 704 .fi     </span>
<span class="line-removed"> 705 .sp     </span>
<span class="line-removed"> 706 </span>
<span class="line-removed"> 707 </span>
<span class="line-removed"> 708 Imports a single entry or all entries from a source keystore to a destination keystore\&amp;.</span>
<span class="line-removed"> 709 </span>
<span class="line-removed"> 710 When the \f3-srcalias\fR option is provided, the command imports the single entry identified by the alias to the destination keystore\&amp;. If a destination alias is not provided with \f3destalias\fR, then \f3srcalias\fR is used as the destination alias\&amp;. If the source entry is protected by a password, then \f3srckeypass\fR is used to recover the entry\&amp;. If \fIsrckeypass\fR is not provided, then the \f3keytool\fR command attempts to use \f3srcstorepass\fR to recover the entry\&amp;. If \f3srcstorepass\fR is either not provided or is incorrect, then the user is prompted for a password\&amp;. The destination entry is protected with \f3destkeypass\fR\&amp;. If \f3destkeypass\fR is not provided, then the destination entry is protected with the source entry password\&amp;. For example, most third-party tools require \f3storepass\fR and \f3keypass\fR in a PKCS #12 keystore to be the same\&amp;. In order to create a PKCS #12 keystore for these tools, always specify a \f3-destkeypass\fR to be the same as \f3-deststorepass\fR\&amp;.</span>
<span class="line-removed"> 711 </span>
<span class="line-removed"> 712 If the \f3-srcalias\fR option is not provided, then all entries in the source keystore are imported into the destination keystore\&amp;. Each destination entry is stored under the alias from the source entry\&amp;. If the source entry is protected by a password, then \f3srcstorepass\fR is used to recover the entry\&amp;. If \f3srcstorepass\fR is either not provided or is incorrect, then the user is prompted for a password\&amp;. If a source keystore entry type is not supported in the destination keystore, or if an error occurs while storing an entry into the destination keystore, then the user is prompted whether to skip the entry and continue or to quit\&amp;. The destination entry is protected with the source entry password\&amp;.</span>
<span class="line-removed"> 713 </span>
<span class="line-removed"> 714 If the destination alias already exists in the destination keystore, then the user is prompted to either overwrite the entry or to create a new entry under a different alias name\&amp;.</span>
<span class="line-removed"> 715 </span>
<span class="line-removed"> 716 If the \f3-noprompt\fR option is provided, then the user is not prompted for a new destination alias\&amp;. Existing entries are overwritten with the destination alias name\&amp;. Entries that cannot be imported are skipped and a warning is displayed\&amp;.</span>
<span class="line-removed"> 717 .TP     </span>
<span class="line-removed"> 718 -printcertreq</span>
<span class="line-removed"> 719 .sp     </span>
<span class="line-removed"> 720 .nf     </span>
<span class="line-removed"> 721 \f3{\-file \fIfile\fR}\fP</span>
<span class="line-removed"> 722 .fi     </span>
<span class="line-removed"> 723 .sp     </span>
<span class="line-removed"> 724 </span>
<span class="line-removed"> 725 </span>
<span class="line-removed"> 726 Prints the content of a PKCS #10 format certificate request, which can be generated by the \f3keytool\fR\f3-certreq\fR command\&amp;. The command reads the request from file\&amp;. If there is no file, then the request is read from the standard input\&amp;.</span>
<span class="line-removed"> 727 .TP     </span>
<span class="line-removed"> 728 -certreq</span>
<span class="line-removed"> 729 .sp     </span>
<span class="line-removed"> 730 .nf     </span>
<span class="line-removed"> 731 \f3{\-alias \fIalias\fR} {\-dname \fIdname\fR} {\-sigalg \fIsigalg\fR} {\-file \fIcertreq_file\fR}\fP</span>
<span class="line-removed"> 732 .fi     </span>
<span class="line-removed"> 733 .sp     </span>
<span class="line-removed"> 734 .sp     </span>
<span class="line-removed"> 735 .nf     </span>
<span class="line-removed"> 736 \f3[\-keypass \fIkeypass\fR] {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR}\fP</span>
<span class="line-removed"> 737 .fi     </span>
<span class="line-removed"> 738 .sp     </span>
<span class="line-removed"> 739 .sp     </span>
<span class="line-removed"> 740 .nf     </span>
<span class="line-removed"> 741 \f3[\-storepass \fIstorepass\fR] {\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-removed"> 742 .fi     </span>
<span class="line-removed"> 743 .sp     </span>
<span class="line-removed"> 744 .sp     </span>
<span class="line-removed"> 745 .nf     </span>
<span class="line-removed"> 746 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 747 .fi     </span>
<span class="line-removed"> 748 .sp     </span>
<span class="line-removed"> 749 .sp     </span>
<span class="line-removed"> 750 .nf     </span>
<span class="line-removed"> 751 \f3{\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 752 .fi     </span>
<span class="line-removed"> 753 .sp     </span>
<span class="line-removed"> 754 </span>
 755 
<span class="line-modified"> 756 Generates a Certificate Signing Request (CSR) using the PKCS #10 format\&amp;.</span>





 757 
<span class="line-modified"> 758 A CSR is intended to be sent to a certificate authority (CA)\&amp;. The CA authenticates the certificate requestor (usually off-line) and will return a certificate or certificate chain, used to replace the existing certificate chain (which initially consists of a self-signed certificate) in the keystore\&amp;.</span>
 759 
<span class="line-modified"> 760 The private key associated with alias is used to create the PKCS #10 certificate request\&amp;. To access the private key, the correct password must be provided\&amp;. If \f3keypass\fR is not provided at the command line and is different from the password used to protect the integrity of the keystore, then the user is prompted for it\&amp;. If \f3dname\fR is provided, then it is used as the subject in the CSR\&amp;. Otherwise, the X\&amp;.500 Distinguished Name associated with alias is used\&amp;.</span>
 761 
<span class="line-modified"> 762 The \f3sigalg\fR value specifies the algorithm that should be used to sign the CSR\&amp;.</span>
 763 
<span class="line-modified"> 764 The CSR is stored in the file certreq_file\&amp;. If no file is specified, then the CSR is output to \f3stdout\fR\&amp;.</span>


 765 
<span class="line-modified"> 766 Use the \f3importcert\fR command to import the response from the CA\&amp;.</span>
<span class="line-modified"> 767 .TP     </span>
<span class="line-modified"> 768 -exportcert</span>
<span class="line-removed"> 769 .sp     </span>
<span class="line-removed"> 770 .nf     </span>
<span class="line-removed"> 771 \f3{\-alias \fIalias\fR} {\-file \fIcert_file\fR} {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR}\fP</span>
<span class="line-removed"> 772 .fi     </span>
<span class="line-removed"> 773 .sp     </span>
<span class="line-removed"> 774 .sp     </span>
<span class="line-removed"> 775 .nf     </span>
<span class="line-removed"> 776 \f3[\-storepass \fIstorepass\fR] {\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-removed"> 777 .fi     </span>
<span class="line-removed"> 778 .sp     </span>
<span class="line-removed"> 779 .sp     </span>
<span class="line-removed"> 780 .nf     </span>
<span class="line-removed"> 781 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 782 .fi     </span>
<span class="line-removed"> 783 .sp     </span>
<span class="line-removed"> 784 .sp     </span>
<span class="line-removed"> 785 .nf     </span>
<span class="line-removed"> 786 \f3{\-rfc} {\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 787 .fi     </span>
<span class="line-removed"> 788 .sp     </span>
 789 
<span class="line-modified"> 790 </span>
<span class="line-modified"> 791 Reads from the keystore the certificate associated with \fIalias\fR and stores it in the cert_file file\&amp;. When no file is specified, the certificate is output to \f3stdout\fR\&amp;.</span>
<span class="line-modified"> 792 </span>
<span class="line-modified"> 793 The certificate is by default output in binary encoding\&amp;. If the \f3-rfc\fR option is specified, then the output in the printable encoding format defined by the Internet RFC 1421 Certificate Encoding Standard\&amp;.</span>
<span class="line-modified"> 794 </span>
<span class="line-modified"> 795 If \f3alias\fR refers to a trusted certificate, then that certificate is output\&amp;. Otherwise, \f3alias\fR refers to a key entry with an associated certificate chain\&amp;. In that case, the first certificate in the chain is returned\&amp;. This certificate authenticates the public key of the entity addressed by \f3alias\fR\&amp;.</span>
<span class="line-modified"> 796 </span>
<span class="line-modified"> 797 This command was named \f3-export\fR in earlier releases\&amp;. The old name is still supported in this release\&amp;. The new name, \f3-exportcert\fR, is preferred going forward\&amp;.</span>
<span class="line-modified"> 798 .TP     </span>
<span class="line-modified"> 799 -list</span>
<span class="line-modified"> 800 .sp     </span>
<span class="line-modified"> 801 .nf     </span>
<span class="line-modified"> 802 \f3{\-alias \fIalias\fR} {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR]\fP</span>
<span class="line-modified"> 803 .fi     </span>
<span class="line-modified"> 804 .sp     </span>
<span class="line-modified"> 805 .sp     </span>
<span class="line-modified"> 806 .nf     </span>
<span class="line-modified"> 807 \f3{\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-modified"> 808 .fi     </span>
<span class="line-modified"> 809 .sp     </span>
<span class="line-modified"> 810 .sp     </span>
<span class="line-modified"> 811 .nf     </span>
<span class="line-modified"> 812 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-modified"> 813 .fi     </span>
<span class="line-modified"> 814 .sp     </span>
<span class="line-modified"> 815 .sp     </span>
<span class="line-modified"> 816 .nf     </span>
<span class="line-modified"> 817 \f3{\-v | \-rfc} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-modified"> 818 .fi     </span>
<span class="line-modified"> 819 .sp     </span>
<span class="line-modified"> 820 </span>
<span class="line-modified"> 821 </span>
<span class="line-modified"> 822 Prints to \f3stdout\fR the contents of the keystore entry identified by \f3alias\fR\&amp;. If no \f3alias\fR is specified, then the contents of the entire keystore are printed\&amp;.</span>
<span class="line-modified"> 823 </span>
<span class="line-modified"> 824 This command by default prints the SHA1 fingerprint of a certificate\&amp;. If the \f3-v\fR option is specified, then the certificate is printed in human-readable format, with additional information such as the owner, issuer, serial number, and any extensions\&amp;. If the \f3-rfc\fR option is specified, then the certificate contents are printed using the printable encoding format, as defined by the Internet RFC 1421 Certificate Encoding Standard\&amp;.</span>
<span class="line-modified"> 825 </span>
<span class="line-modified"> 826 You cannot specify both \f3-v\fR and \f3-rfc\fR\&amp;.</span>
<span class="line-modified"> 827 .TP     </span>
<span class="line-modified"> 828 -printcert</span>
<span class="line-modified"> 829 .sp     </span>
<span class="line-modified"> 830 .nf     </span>
<span class="line-modified"> 831 \f3{\-file \fIcert_file\fR | \-sslserver \fIhost\fR[:\fIport\fR]} {\-jarfile \fIJAR_file\fR {\-rfc} {\-v}\fP</span>
<span class="line-modified"> 832 .fi     </span>
<span class="line-modified"> 833 .sp     </span>
<span class="line-modified"> 834 .sp     </span>
<span class="line-modified"> 835 .nf     </span>
<span class="line-modified"> 836 \f3{\-Jjavaoption}\fP</span>
<span class="line-modified"> 837 .fi     </span>
<span class="line-modified"> 838 .sp     </span>
<span class="line-modified"> 839 </span>
<span class="line-modified"> 840 </span>
<span class="line-modified"> 841 Reads the certificate from the file cert_file, the SSL server located at host:port, or the signed JAR file \f3JAR_file\fR (with the \f3-jarfile\fR option and prints its contents in a human-readable format\&amp;. When no port is specified, the standard HTTPS port 443 is assumed\&amp;. Note that \f3-sslserver\fR and -file options cannot be provided at the same time\&amp;. Otherwise, an error is reported\&amp;. If neither option is specified, then the certificate is read from \f3stdin\fR\&amp;.</span>
<span class="line-modified"> 842 </span>
<span class="line-modified"> 843 When\f3-rfc\fR is specified, the \f3keytool\fR command prints the certificate in PEM mode as defined by the Internet RFC 1421 Certificate Encoding standard\&amp;. See Internet RFC 1421 Certificate Encoding Standard\&amp;.</span>
<span class="line-modified"> 844 </span>
<span class="line-modified"> 845 If the certificate is read from a file or \f3stdin\fR, then it might be either binary encoded or in printable encoding format, as defined by the RFC 1421 Certificate Encoding standard\&amp;.</span>
<span class="line-modified"> 846 </span>
<span class="line-modified"> 847 If the SSL server is behind a firewall, then the \f3-J-Dhttps\&amp;.proxyHost=proxyhost\fR and \f3-J-Dhttps\&amp;.proxyPort=proxyport\fR options can be specified on the command line for proxy tunneling\&amp;. See Java Secure Socket Extension (JSSE) Reference Guide at http://docs\&amp;.oracle\&amp;.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide\&amp;.html</span>
<span class="line-modified"> 848 </span>
<span class="line-modified"> 849 \fINote:\fR This option can be used independently of a keystore\&amp;.</span>
<span class="line-modified"> 850 .TP     </span>
<span class="line-modified"> 851 -printcrl</span>
<span class="line-modified"> 852 .sp     </span>
<span class="line-modified"> 853 .nf     </span>
<span class="line-modified"> 854 \f3\-file \fIcrl_\fR {\-v}\fP</span>
<span class="line-modified"> 855 .fi     </span>
<span class="line-modified"> 856 .sp     </span>
<span class="line-modified"> 857 </span>
<span class="line-modified"> 858 </span>
<span class="line-modified"> 859 Reads the Certificate Revocation List (CRL) from the file \f3crl_\fR\&amp;. A CRL is a list of digital certificates that were revoked by the CA that issued them\&amp;. The CA generates the \f3crl_\fR file\&amp;.</span>
<span class="line-modified"> 860 </span>
<span class="line-modified"> 861 \fINote:\fR This option can be used independently of a keystore\&amp;.</span>
<span class="line-modified"> 862 .TP     </span>
<span class="line-modified"> 863 -storepasswd</span>
<span class="line-modified"> 864 .sp     </span>
<span class="line-modified"> 865 .nf     </span>
<span class="line-modified"> 866 \f3[\-new \fInew_storepass\fR] {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR}\fP</span>
<span class="line-modified"> 867 .fi     </span>
<span class="line-modified"> 868 .sp     </span>
<span class="line-modified"> 869 .sp     </span>
<span class="line-removed"> 870 .nf     </span>
<span class="line-removed"> 871 \f3[\-storepass \fIstorepass\fR] {\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-removed"> 872 .fi     </span>
<span class="line-removed"> 873 .sp     </span>
<span class="line-removed"> 874 .sp     </span>
<span class="line-removed"> 875 .nf     </span>
<span class="line-removed"> 876 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 877 .fi     </span>
<span class="line-removed"> 878 .sp     </span>
<span class="line-removed"> 879 .sp     </span>
<span class="line-removed"> 880 .nf     </span>
<span class="line-removed"> 881 \f3{\-v} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 882 .fi     </span>
<span class="line-removed"> 883 .sp     </span>
<span class="line-removed"> 884 </span>
<span class="line-removed"> 885 </span>
<span class="line-removed"> 886 Changes the password used to protect the integrity of the keystore contents\&amp;. The new password is \f3new_storepass\fR, which must be at least 6 characters\&amp;.</span>
<span class="line-removed"> 887 .TP     </span>
<span class="line-removed"> 888 -keypasswd</span>
<span class="line-removed"> 889 .sp     </span>
<span class="line-removed"> 890 .nf     </span>
<span class="line-removed"> 891 \f3{\-alias \fIalias\fR} [\-keypass \fIold_keypass\fR] [\-new \fInew_keypass\fR] {\-storetype \fIstoretype\fR}\fP</span>
<span class="line-removed"> 892 .fi     </span>
<span class="line-removed"> 893 .sp     </span>
<span class="line-removed"> 894 .sp     </span>
<span class="line-removed"> 895 .nf     </span>
<span class="line-removed"> 896 \f3{\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR] {\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-removed"> 897 .fi     </span>
<span class="line-removed"> 898 .sp     </span>
<span class="line-removed"> 899 .sp     </span>
<span class="line-removed"> 900 .nf     </span>
<span class="line-removed"> 901 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}} {\-v}\fP</span>
<span class="line-removed"> 902 .fi     </span>
<span class="line-removed"> 903 .sp     </span>
<span class="line-removed"> 904 .sp     </span>
<span class="line-removed"> 905 .nf     </span>
<span class="line-removed"> 906 \f3{\-Jjavaoption}\fP</span>
<span class="line-removed"> 907 .fi     </span>
<span class="line-removed"> 908 .sp     </span>
<span class="line-removed"> 909 </span>
<span class="line-removed"> 910 </span>
<span class="line-removed"> 911 Changes the password under which the private/secret key identified by \f3alias\fR is protected, from \f3old_keypass\fR to \f3new_keypass\fR, which must be at least 6 characters\&amp;.</span>
<span class="line-removed"> 912 </span>
<span class="line-removed"> 913 If the \f3-keypass\fR option is not provided at the command line, and the key password is different from the keystore password, then the user is prompted for it\&amp;.</span>
<span class="line-removed"> 914 </span>
<span class="line-removed"> 915 If the \f3-new\fR option is not provided at the command line, then the user is prompted for it</span>
<span class="line-removed"> 916 .TP     </span>
<span class="line-removed"> 917 -delete</span>
<span class="line-removed"> 918 .sp     </span>
<span class="line-removed"> 919 .nf     </span>
<span class="line-removed"> 920 \f3[\-alias \fIalias\fR] {\-storetype \fIstoretype\fR} {\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR]\fP</span>
<span class="line-removed"> 921 .fi     </span>
<span class="line-removed"> 922 .sp     </span>
<span class="line-removed"> 923 .sp     </span>
<span class="line-removed"> 924 .nf     </span>
<span class="line-removed"> 925 \f3{\-providerName \fIprovider_name\fR}  \fP</span>
<span class="line-removed"> 926 .fi     </span>
<span class="line-removed"> 927 .sp     </span>
<span class="line-removed"> 928 .sp     </span>
<span class="line-removed"> 929 .nf     </span>
<span class="line-removed"> 930 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}}\fP</span>
<span class="line-removed"> 931 .fi     </span>
<span class="line-removed"> 932 .sp     </span>
<span class="line-removed"> 933 .sp     </span>
<span class="line-removed"> 934 .nf     </span>
<span class="line-removed"> 935 \f3{\-v} {\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 936 .fi     </span>
<span class="line-removed"> 937 .sp     </span>
<span class="line-removed"> 938 </span>
<span class="line-removed"> 939 </span>
<span class="line-removed"> 940 Deletes from the keystore the entry identified by \f3alias\fR\&amp;. The user is prompted for the alias, when no alias is provided at the command line\&amp;.</span>
<span class="line-removed"> 941 .TP     </span>
<span class="line-removed"> 942 -changealias</span>
<span class="line-removed"> 943 .sp     </span>
<span class="line-removed"> 944 .nf     </span>
<span class="line-removed"> 945 \f3{\-alias \fIalias\fR} [\-destalias \fIdestalias\fR] [\-keypass \fIkeypass\fR] {\-storetype \fIstoretype\fR}\fP</span>
<span class="line-removed"> 946 .fi     </span>
<span class="line-removed"> 947 .sp     </span>
<span class="line-removed"> 948 .sp     </span>
<span class="line-removed"> 949 .nf     </span>
<span class="line-removed"> 950 \f3{\-keystore \fIkeystore\fR} [\-storepass \fIstorepass\fR] {\-providerName \fIprovider_name\fR}\fP</span>
<span class="line-removed"> 951 .fi     </span>
<span class="line-removed"> 952 .sp     </span>
<span class="line-removed"> 953 .sp     </span>
<span class="line-removed"> 954 .nf     </span>
<span class="line-removed"> 955 \f3{\-providerClass \fIprovider_class_name\fR {\-providerArg \fIprovider_arg\fR}} {\-v}\fP</span>
<span class="line-removed"> 956 .fi     </span>
<span class="line-removed"> 957 .sp     </span>
<span class="line-removed"> 958 .sp     </span>
<span class="line-removed"> 959 .nf     </span>
<span class="line-removed"> 960 \f3{\-protected} {\-Jjavaoption}\fP</span>
<span class="line-removed"> 961 .fi     </span>
<span class="line-removed"> 962 .sp     </span>
<span class="line-removed"> 963 </span>
<span class="line-removed"> 964 </span>
<span class="line-removed"> 965 Move an existing keystore entry from the specified \f3alias\fR to a new alias, \f3destalias\fR\&amp;. If no destination alias is provided, then the command prompts for one\&amp;. If the original entry is protected with an entry password, then the password can be supplied with the \f3-keypass\fR option\&amp;. If no key password is provided, then the \f3storepass\fR (if provided) is attempted first\&amp;. If the attempt fails, then the user is prompted for a password\&amp;.</span>
 966 .TP
<span class="line-modified"> 967 -help</span>
<span class="line-modified"> 968 .br</span>
<span class="line-modified"> 969 Lists the basic commands and their options\&amp;.</span>
<span class="line-modified"> 970 </span>
<span class="line-modified"> 971 For more information about a specific command, enter the following, where \f3command_name\fR is the name of the command: \f3keytool -command_name -help\fR\&amp;.</span>
<span class="line-modified"> 972 .SH EXAMPLES    </span>
<span class="line-modified"> 973 This example walks through the sequence of steps to create a keystore for managing public/private key pair and certificates from trusted entities\&amp;.</span>
<span class="line-modified"> 974 .SS GENERATE\ THE\ KEY\ PAIR    </span>
<span class="line-modified"> 975 First, create a keystore and generate the key pair\&amp;. You can use a command such as the following typed as a single line:</span>
<span class="line-modified"> 976 .sp     </span>
<span class="line-modified"> 977 .nf     </span>
<span class="line-modified"> 978 \f3keytool \-genkeypair \-dname &quot;cn=Mark Jones, ou=Java, o=Oracle, c=US&quot;\fP</span>
<span class="line-modified"> 979 .fi     </span>
<span class="line-modified"> 980 .nf     </span>
<span class="line-modified"> 981 \f3    \-alias business \-keypass &lt;new password for private key&gt;\fP</span>
<span class="line-modified"> 982 .fi     </span>
<span class="line-modified"> 983 .nf     </span>
<span class="line-modified"> 984 \f3    \-keystore /working/mykeystore\fP</span>
<span class="line-modified"> 985 .fi     </span>
<span class="line-modified"> 986 .nf     </span>
<span class="line-modified"> 987 \f3    \-storepass &lt;new password for keystore&gt; \-validity 180\fP</span>
<span class="line-modified"> 988 .fi     </span>
<span class="line-modified"> 989 .nf     </span>
<span class="line-modified"> 990 \f3\fP</span>
<span class="line-modified"> 991 .fi     </span>
<span class="line-modified"> 992 .sp     </span>
<span class="line-modified"> 993 The command creates the keystore named \f3mykeystore\fR in the working directory (assuming it does not already exist), and assigns it the password specified by \f3&lt;new password for keystore&gt;\fR\&amp;. It generates a public/private key pair for the entity whose distinguished name has a common name of Mark Jones, organizational unit of Java, organization of Oracle and two-letter country code of US\&amp;. It uses the default DSA key generation algorithm to create the keys; both are 1024 bits\&amp;.</span>
<span class="line-modified"> 994 .PP</span>
<span class="line-modified"> 995 The command uses the default SHA1withDSA signature algorithm to create a self-signed certificate that includes the public key and the distinguished name information\&amp;. The certificate is valid for 180 days, and is associated with the private key in a keystore entry referred to by the alias \f3business\fR\&amp;. The private key is assigned the password specified by \f3&lt;new password for private key&gt;\fR\&amp;.</span>
<span class="line-modified"> 996 .PP</span>
<span class="line-modified"> 997 The command is significantly shorter when the option defaults are accepted\&amp;. In this case, no options are required, and the defaults are used for unspecified options that have default values\&amp;. You are prompted for any required values\&amp;. You could have the following:</span>
<span class="line-modified"> 998 .sp     </span>
<span class="line-modified"> 999 .nf     </span>
<span class="line-modified">1000 \f3keytool \-genkeypair\fP</span>
<span class="line-modified">1001 .fi     </span>
<span class="line-modified">1002 .nf     </span>
<span class="line-modified">1003 \f3\fP</span>
<span class="line-modified">1004 .fi     </span>
<span class="line-modified">1005 .sp     </span>
<span class="line-modified">1006 In this case, a keystore entry with the alias \f3mykey\fR is created, with a newly generated key pair and a certificate that is valid for 90 days\&amp;. This entry is placed in the keystore named \f3\&amp;.keystore\fR in your home directory\&amp;. The keystore is created when it does not already exist\&amp;. You are prompted for the distinguished name information, the keystore password, and the private key password\&amp;.</span>
<span class="line-modified">1007 .PP</span>
<span class="line-modified">1008 The rest of the examples assume you executed the \f3-genkeypair\fR command without options specified, and that you responded to the prompts with values equal to those specified in the first \f3-genkeypair\fR command\&amp;. For example, a distinguished name of \f3cn=Mark Jones\fR, \f3ou=Java\fR, \f3o=Oracle\fR, \f3c=US\fR)\&amp;.</span>
<span class="line-modified">1009 .SS REQUEST\ A\ SIGNED\ CERTIFICATE\ FROM\ A\ CA    </span>
<span class="line-modified">1010 Generating the key pair created a self-signed certificate\&amp;. A certificate is more likely to be trusted by others when it is signed by a Certification Authority (CA)\&amp;. To get a CA signature, first generate a Certificate Signing Request (CSR), as follows:</span>
<span class="line-modified">1011 .sp     </span>
<span class="line-modified">1012 .nf     </span>
<span class="line-modified">1013 \f3keytool \-certreq \-file MarkJ\&amp;.csr\fP</span>
<span class="line-modified">1014 .fi     </span>
<span class="line-modified">1015 .nf     </span>
<span class="line-modified">1016 \f3\fP</span>
<span class="line-modified">1017 .fi     </span>
<span class="line-modified">1018 .sp     </span>
<span class="line-modified">1019 This creates a CSR for the entity identified by the default alias \f3mykey\fR and puts the request in the file named MarkJ\&amp;.csr\&amp;. Submit this file to a CA, such as VeriSign\&amp;. The CA authenticates you, the requestor (usually off-line), and returns a certificate, signed by them, authenticating your public key\&amp;. In some cases, the CA returns a chain of certificates, each one authenticating the public key of the signer of the previous certificate in the chain\&amp;.</span>
<span class="line-modified">1020 .SS IMPORT\ A\ CERTIFICATE\ FOR\ THE\ CA    </span>
<span class="line-modified">1021 You now need to replace the self-signed certificate with a certificate chain, where each certificate in the chain authenticates the public key of the signer of the previous certificate in the chain, up to a root CA\&amp;.</span>
<span class="line-modified">1022 .PP</span>
<span class="line-modified">1023 Before you import the certificate reply from a CA, you need one or more trusted certificates in your keystore or in the \f3cacerts\fR keystore file\&amp;. See \f3-importcert\fR in Commands\&amp;.</span>
<span class="line-modified">1024 .TP 0.2i    </span>
<span class="line-modified">1025 \(bu</span>
<span class="line-modified">1026 If the certificate reply is a certificate chain, then you need the top certificate of the chain\&amp;. The root CA certificate that authenticates the public key of the CA\&amp;.</span>
<span class="line-modified">1027 .TP 0.2i    </span>
<span class="line-modified">1028 \(bu</span>
<span class="line-modified">1029 If the certificate reply is a single certificate, then you need a certificate for the issuing CA (the one that signed it)\&amp;. If that certificate is not self-signed, then you need a certificate for its signer, and so on, up to a self-signed root CA certificate\&amp;.</span>
<span class="line-modified">1030 .PP</span>
<span class="line-modified">1031 The \f3cacerts\fR keystore file ships with several VeriSign root CA certificates, so you probably will not need to import a VeriSign certificate as a trusted certificate in your keystore\&amp;. But if you request a signed certificate from a different CA, and a certificate authenticating that CA\&amp;&#39;s public key was not added to \f3cacerts\fR, then you must import a certificate from the CA as a trusted certificate\&amp;.</span>
<span class="line-modified">1032 .PP</span>
<span class="line-modified">1033 A certificate from a CA is usually either self-signed or signed by another CA, in which case you need a certificate that authenticates that CA\&amp;&#39;s public key\&amp;. Suppose company ABC, Inc\&amp;., is a CA, and you obtain a file named A\f3BCCA\&amp;.cer\fR that is supposed to be a self-signed certificate from ABC, that authenticates that CA\&amp;&#39;s public key\&amp;. Be careful to ensure the certificate is valid before you import it as a trusted certificate\&amp;. View it first with the \f3keytool -printcert\fR command or the \f3keytool -importcert\fR command without the \f3-noprompt\fR option, and make sure that the displayed certificate fingerprints match the expected ones\&amp;. You can call the person who sent the certificate, and compare the fingerprints that you see with the ones that they show or that a secure public key repository shows\&amp;. Only when the fingerprints are equal is it guaranteed that the certificate was not replaced in transit with somebody else\&amp;&#39;s (for example, an attacker\&amp;&#39;s) certificate\&amp;. If such an attack takes place, and you did not check the certificate before you imported it, then you would be trusting anything the attacker has signed\&amp;.</span>
<span class="line-modified">1034 .PP</span>
<span class="line-modified">1035 If you trust that the certificate is valid, then you can add it to your keystore with the following command:</span>
<span class="line-modified">1036 .sp     </span>
<span class="line-modified">1037 .nf     </span>
<span class="line-modified">1038 \f3keytool \-importcert \-alias abc \-file ABCCA\&amp;.cer\fP</span>
<span class="line-modified">1039 .fi     </span>
<span class="line-modified">1040 .nf     </span>
<span class="line-modified">1041 \f3\fP</span>
<span class="line-modified">1042 .fi     </span>
<span class="line-modified">1043 .sp     </span>
<span class="line-modified">1044 This command creates a trusted certificate entry in the keystore, with the data from the file ABCCA\&amp;.cer, and assigns the alias \f3abc\fR to the entry\&amp;.</span>
<span class="line-modified">1045 .SS IMPORT\ THE\ CERTIFICATE\ REPLY\ FROM\ THE\ CA    </span>
<span class="line-modified">1046 After you import a certificate that authenticates the public key of the CA you submitted your certificate signing request to (or there is already such a certificate in the cacerts file), you can import the certificate reply and replace your self-signed certificate with a certificate chain\&amp;. This chain is the one returned by the CA in response to your request (when the CA reply is a chain), or one constructed (when the CA reply is a single certificate) using the certificate reply and trusted certificates that are already available in the keystore where you import the reply or in the \f3cacerts\fR keystore file\&amp;.</span>
<span class="line-modified">1047 .PP</span>
<span class="line-modified">1048 For example, if you sent your certificate signing request to VeriSign, then you can import the reply with the following, which assumes the returned certificate is named VSMarkJ\&amp;.cer:</span>
<span class="line-modified">1049 .sp     </span>
<span class="line-modified">1050 .nf     </span>
<span class="line-modified">1051 \f3keytool \-importcert \-trustcacerts \-file VSMarkJ\&amp;.cer\fP</span>
<span class="line-modified">1052 .fi     </span>
<span class="line-modified">1053 .nf     </span>
<span class="line-modified">1054 \f3\fP</span>
<span class="line-modified">1055 .fi     </span>
<span class="line-modified">1056 .sp     </span>
<span class="line-modified">1057 .SS EXPORT\ A\ CERTIFICATE\ THAT\ AUTHENTICATES\ THE\ PUBLIC\ KEY    </span>
<span class="line-modified">1058 If you used the \f3jarsigner\fR command to sign a Java Archive (JAR) file, then clients that want to use the file will want to authenticate your signature\&amp;. One way the clients can authenticate you is by first importing your public key certificate into their keystore as a trusted entry\&amp;.</span>
<span class="line-modified">1059 .PP</span>
<span class="line-modified">1060 You can export the certificate and supply it to your clients\&amp;. As an example, you can copy your certificate to a file named MJ\&amp;.cer with the following command that assumes the entry has an alias of \f3mykey\fR:</span>
<span class="line-modified">1061 .sp     </span>
<span class="line-modified">1062 .nf     </span>
<span class="line-modified">1063 \f3keytool \-exportcert \-alias mykey \-file MJ\&amp;.cer\fP</span>
<span class="line-modified">1064 .fi     </span>
<span class="line-modified">1065 .nf     </span>
<span class="line-modified">1066 \f3\fP</span>
<span class="line-modified">1067 .fi     </span>
<span class="line-modified">1068 .sp     </span>
<span class="line-modified">1069 With the certificate and the signed JAR file, a client can use the \f3jarsigner\fR command to authenticate your signature\&amp;.</span>
<span class="line-modified">1070 .SS IMPORT\ KEYSTORE    </span>
<span class="line-modified">1071 The command \f3importkeystore\fR is used to import an entire keystore into another keystore, which means all entries from the source keystore, including keys and certificates, are all imported to the destination keystore within a single command\&amp;. You can use this command to import entries from a different type of keystore\&amp;. During the import, all new entries in the destination keystore will have the same alias names and protection passwords (for secret keys and private keys)\&amp;. If the \f3keytool\fR command cannot recover the private keys or secret keys from the source keystore, then it prompts you for a password\&amp;. If it detects alias duplication, then it asks you for a new alias, and you can specify a new alias or simply allow the \f3keytool\fR command to overwrite the existing one\&amp;.</span>
<span class="line-modified">1072 .PP</span>
<span class="line-modified">1073 For example, to import entries from a typical JKS type keystore key\&amp;.jks into a PKCS #11 type hardware-based keystore, use the command:</span>
<span class="line-modified">1074 .sp     </span>
<span class="line-modified">1075 .nf     </span>
<span class="line-modified">1076 \f3keytool \-importkeystore\fP</span>
<span class="line-modified">1077 .fi     </span>
<span class="line-modified">1078 .nf     </span>
<span class="line-modified">1079 \f3    \-srckeystore key\&amp;.jks \-destkeystore NONE\fP</span>
<span class="line-modified">1080 .fi     </span>
<span class="line-modified">1081 .nf     </span>
<span class="line-modified">1082 \f3    \-srcstoretype JKS \-deststoretype PKCS11\fP</span>
<span class="line-modified">1083 .fi     </span>
<span class="line-modified">1084 .nf     </span>
<span class="line-modified">1085 \f3    \-srcstorepass &lt;src keystore password&gt;\fP</span>
<span class="line-modified">1086 .fi     </span>
<span class="line-modified">1087 .nf     </span>
<span class="line-modified">1088 \f3    \-deststorepass &lt;destination keystore pwd&gt;\fP</span>
<span class="line-modified">1089 .fi     </span>
<span class="line-modified">1090 .nf     </span>
<span class="line-modified">1091 \f3\fP</span>
<span class="line-modified">1092 .fi     </span>
<span class="line-modified">1093 .sp     </span>
<span class="line-modified">1094 The \f3importkeystore\fR command can also be used to import a single entry from a source keystore to a destination keystore\&amp;. In this case, besides the options you see in the previous example, you need to specify the alias you want to import\&amp;. With the \f3-srcalias\fR option specified, you can also specify the destination alias name in the command line, as well as protection password for a secret/private key and the destination protection password you want\&amp;. The following command demonstrates this:</span>
<span class="line-modified">1095 .sp     </span>
<span class="line-modified">1096 .nf     </span>
<span class="line-modified">1097 \f3keytool \-importkeystore\fP</span>
<span class="line-modified">1098 .fi     </span>
<span class="line-modified">1099 .nf     </span>
<span class="line-modified">1100 \f3    \-srckeystore key\&amp;.jks \-destkeystore NONE\fP</span>
<span class="line-modified">1101 .fi     </span>
<span class="line-modified">1102 .nf     </span>
<span class="line-modified">1103 \f3    \-srcstoretype JKS \-deststoretype PKCS11\fP</span>
<span class="line-modified">1104 .fi     </span>
<span class="line-modified">1105 .nf     </span>
<span class="line-modified">1106 \f3    \-srcstorepass &lt;src keystore password&gt;\fP</span>
<span class="line-modified">1107 .fi     </span>
<span class="line-modified">1108 .nf     </span>
<span class="line-modified">1109 \f3    \-deststorepass &lt;destination keystore pwd&gt;\fP</span>
<span class="line-modified">1110 .fi     </span>
<span class="line-modified">1111 .nf     </span>
<span class="line-modified">1112 \f3    \-srcalias myprivatekey \-destalias myoldprivatekey\fP</span>
<span class="line-modified">1113 .fi     </span>
<span class="line-modified">1114 .nf     </span>
<span class="line-modified">1115 \f3    \-srckeypass &lt;source entry password&gt;\fP</span>
<span class="line-modified">1116 .fi     </span>
<span class="line-modified">1117 .nf     </span>
<span class="line-modified">1118 \f3    \-destkeypass &lt;destination entry password&gt;\fP</span>
<span class="line-modified">1119 .fi     </span>
<span class="line-modified">1120 .nf     </span>
<span class="line-modified">1121 \f3    \-noprompt\fP</span>
<span class="line-modified">1122 .fi     </span>
<span class="line-modified">1123 .nf     </span>
<span class="line-modified">1124 \f3\fP</span>
<span class="line-modified">1125 .fi     </span>
<span class="line-modified">1126 .sp     </span>
<span class="line-modified">1127 .SS GENERATE\ CERTIFICATES\ FOR\ AN\ SSL\ SERVER    </span>
<span class="line-modified">1128 The following are \f3keytool\fR commands to generate key pairs and certificates for three entities: Root CA (\f3root\fR), Intermediate CA (\f3ca\fR), and SSL server (\f3server\fR)\&amp;. Ensure that you store all the certificates in the same keystore\&amp;. In these examples, RSA is the recommended the key algorithm\&amp;.</span>
<span class="line-modified">1129 .sp     </span>
<span class="line-modified">1130 .nf     </span>
<span class="line-modified">1131 \f3keytool \-genkeypair \-keystore root\&amp;.jks \-alias root \-ext bc:c\fP</span>
<span class="line-modified">1132 .fi     </span>
<span class="line-modified">1133 .nf     </span>
<span class="line-modified">1134 \f3keytool \-genkeypair \-keystore ca\&amp;.jks \-alias ca \-ext bc:c\fP</span>
<span class="line-modified">1135 .fi     </span>
<span class="line-modified">1136 .nf     </span>
<span class="line-modified">1137 \f3keytool \-genkeypair \-keystore server\&amp;.jks \-alias server\fP</span>
<span class="line-modified">1138 .fi     </span>
<span class="line-modified">1139 .nf     </span>
<span class="line-modified">1140 \f3\fP</span>
<span class="line-modified">1141 .fi     </span>
<span class="line-modified">1142 .nf     </span>
<span class="line-modified">1143 \f3keytool \-keystore root\&amp;.jks \-alias root \-exportcert \-rfc &gt; root\&amp;.pem\fP</span>
<span class="line-modified">1144 .fi     </span>
<span class="line-modified">1145 .nf     </span>
<span class="line-modified">1146 \f3\fP</span>
<span class="line-modified">1147 .fi     </span>
<span class="line-modified">1148 .nf     </span>
<span class="line-modified">1149 \f3keytool \-storepass &lt;storepass&gt; \-keystore ca\&amp;.jks \-certreq \-alias ca |\fP</span>
<span class="line-modified">1150 .fi     </span>
<span class="line-modified">1151 .nf     </span>
<span class="line-modified">1152 \f3    keytool \-storepass &lt;storepass&gt; \-keystore root\&amp;.jks\fP</span>
<span class="line-modified">1153 .fi     </span>
<span class="line-modified">1154 .nf     </span>
<span class="line-modified">1155 \f3    \-gencert \-alias root \-ext BC=0 \-rfc &gt; ca\&amp;.pem\fP</span>
<span class="line-modified">1156 .fi     </span>
<span class="line-modified">1157 .nf     </span>
<span class="line-modified">1158 \f3keytool \-keystore ca\&amp;.jks \-importcert \-alias ca \-file ca\&amp;.pem\fP</span>
<span class="line-modified">1159 .fi     </span>
<span class="line-modified">1160 .nf     </span>
<span class="line-modified">1161 \f3\fP</span>
<span class="line-modified">1162 .fi     </span>
<span class="line-modified">1163 .nf     </span>
<span class="line-modified">1164 \f3keytool \-storepass &lt;storepass&gt; \-keystore server\&amp;.jks \-certreq \-alias server |\fP</span>
<span class="line-modified">1165 .fi     </span>
<span class="line-modified">1166 .nf     </span>
<span class="line-modified">1167 \f3    keytool \-storepass &lt;storepass&gt; \-keystore ca\&amp;.jks \-gencert \-alias ca\fP</span>
<span class="line-modified">1168 .fi     </span>
<span class="line-modified">1169 .nf     </span>
<span class="line-modified">1170 \f3    \-ext ku:c=dig,kE \-rfc &gt; server\&amp;.pem\fP</span>
<span class="line-modified">1171 .fi     </span>
<span class="line-modified">1172 .nf     </span>
<span class="line-modified">1173 \f3cat root\&amp;.pem ca\&amp;.pem server\&amp;.pem |\fP</span>
<span class="line-modified">1174 .fi     </span>
<span class="line-modified">1175 .nf     </span>
<span class="line-modified">1176 \f3    keytool \-keystore server\&amp;.jks \-importcert \-alias server\fP</span>
<span class="line-modified">1177 .fi     </span>
<span class="line-modified">1178 .nf     </span>
<span class="line-modified">1179 \f3\fP</span>
<span class="line-modified">1180 .fi     </span>
<span class="line-modified">1181 .sp     </span>
<span class="line-modified">1182 .SH TERMS    </span>
<span class="line-modified">1183 .TP     </span>
<span class="line-modified">1184 Keystore</span>
<span class="line-modified">1185 A keystore is a storage facility for cryptographic keys and certificates\&amp;.</span>
<span class="line-modified">1186 .TP     </span>
<span class="line-modified">1187 Keystore entries</span>
<span class="line-modified">1188 Keystores can have different types of entries\&amp;. The two most applicable entry types for the \f3keytool\fR command include the following:</span>
<span class="line-modified">1189 </span>
<span class="line-modified">1190 \fIKey entries\fR: Each entry holds very sensitive cryptographic key information, which is stored in a protected format to prevent unauthorized access\&amp;. Typically, a key stored in this type of entry is a secret key, or a private key accompanied by the certificate chain for the corresponding public key\&amp;. See Certificate Chains\&amp;. The \f3keytool\fR command can handle both types of entries, while the \f3jarsigner\fR tool only handles the latter type of entry, that is private keys and their associated certificate chains\&amp;.</span>
<span class="line-modified">1191 </span>
<span class="line-modified">1192 \fITrusted certificate entries\fR: Each entry contains a single public key certificate that belongs to another party\&amp;. The entry is called a trusted certificate because the keystore owner trusts that the public key in the certificate belongs to the identity identified by the subject (owner) of the certificate\&amp;. The issuer of the certificate vouches for this, by signing the certificate\&amp;.</span>
<span class="line-modified">1193 .TP     </span>
<span class="line-modified">1194 KeyStore aliases</span>
<span class="line-modified">1195 All keystore entries (key and trusted certificate entries) are accessed by way of unique aliases\&amp;.</span>
<span class="line-modified">1196 </span>
<span class="line-modified">1197 An alias is specified when you add an entity to the keystore with the \f3-genseckey\fR command to generate a secret key, the \f3-genkeypair\fR command to generate a key pair (public and private key), or the \f3-importcert\fR command to add a certificate or certificate chain to the list of trusted certificates\&amp;. Subsequent \f3keytool\fR commands must use this same alias to refer to the entity\&amp;.</span>
<span class="line-modified">1198 </span>
<span class="line-modified">1199 For example, you can use the alias \f3duke\fR to generate a new public/private key pair and wrap the public key into a self-signed certificate with the following command\&amp;. See Certificate Chains\&amp;.</span>
<span class="line-modified">1200 .sp     </span>
<span class="line-modified">1201 .nf     </span>
<span class="line-modified">1202 \f3keytool \-genkeypair \-alias duke \-keypass dukekeypasswd\fP</span>
<span class="line-modified">1203 .fi     </span>
<span class="line-modified">1204 .nf     </span>
<span class="line-modified">1205 \f3\fP</span>
<span class="line-modified">1206 .fi     </span>
<span class="line-modified">1207 .sp     </span>
<span class="line-modified">1208 </span>
<span class="line-modified">1209 </span>
<span class="line-modified">1210 This example specifies an initial password of \f3dukekeypasswd\fR required by subsequent commands to access the private key associated with the alias \f3duke\fR\&amp;. If you later want to change Duke\&amp;&#39;s private key password, use a command such as the following:</span>
<span class="line-modified">1211 .sp     </span>
<span class="line-modified">1212 .nf     </span>
<span class="line-modified">1213 \f3keytool \-keypasswd \-alias duke \-keypass dukekeypasswd \-new newpass\fP</span>
<span class="line-modified">1214 .fi     </span>
<span class="line-modified">1215 .nf     </span>
<span class="line-modified">1216 \f3\fP</span>
<span class="line-modified">1217 .fi     </span>
<span class="line-modified">1218 .sp     </span>
<span class="line-modified">1219 </span>
<span class="line-modified">1220 </span>
<span class="line-modified">1221 This changes the password from \f3dukekeypasswd\fR to \f3newpass\fR\&amp;. A password should not be specified on a command line or in a script unless it is for testing purposes, or you are on a secure system\&amp;. If you do not specify a required password option on a command line, then you are prompted for it\&amp;.</span>
<span class="line-modified">1222 .TP     </span>
<span class="line-modified">1223 KeyStore implementation</span>
<span class="line-modified">1224 The \f3KeyStore\fR class provided in the \f3java\&amp;.security\fR package supplies well-defined interfaces to access and modify the information in a keystore\&amp;. It is possible for there to be multiple different concrete implementations, where each implementation is that for a particular type of keystore\&amp;.</span>
<span class="line-modified">1225 </span>
<span class="line-modified">1226 Currently, two command-line tools (\f3keytool\fR and \f3jarsigner\fR) and a GUI-based tool named Policy Tool make use of keystore implementations\&amp;. Because the \f3KeyStore\fR class is \f3public\fR, users can write additional security applications that use it\&amp;.</span>
<span class="line-modified">1227 </span>
<span class="line-modified">1228 There is a built-in default implementation, provided by Oracle\&amp;. It implements the keystore as a file with a proprietary keystore type (format) named JKS\&amp;. It protects each private key with its individual password, and also protects the integrity of the entire keystore with a (possibly different) password\&amp;.</span>
<span class="line-modified">1229 </span>
<span class="line-modified">1230 Keystore implementations are provider-based\&amp;. More specifically, the application interfaces supplied by \f3KeyStore\fR are implemented in terms of a Service Provider Interface (SPI)\&amp;. That is, there is a corresponding abstract \f3KeystoreSpi\fR class, also in the \f3java\&amp;.security package\fR, which defines the Service Provider Interface methods that providers must implement\&amp;. The term \fIprovider\fR refers to a package or a set of packages that supply a concrete implementation of a subset of services that can be accessed by the Java Security API\&amp;. To provide a keystore implementation, clients must implement a provider and supply a \f3KeystoreSpi\fR subclass implementation, as described in How to Implement a Provider in the Java Cryptography Architecture at http://docs\&amp;.oracle\&amp;.com/javase/8/docs/technotes/guides/security/crypto/HowToImplAProvider\&amp;.html</span>
<span class="line-modified">1231 </span>
<span class="line-modified">1232 Applications can choose different types of keystore implementations from different providers, using the \f3getInstance\fR factory method supplied in the \f3KeyStore\fR class\&amp;. A keystore type defines the storage and data format of the keystore information, and the algorithms used to protect private/secret keys in the keystore and the integrity of the keystore\&amp;. Keystore implementations of different types are not compatible\&amp;.</span>
<span class="line-modified">1233 </span>
<span class="line-modified">1234 The \f3keytool\fR command works on any file-based keystore implementation\&amp;. It treats the keystore location that is passed to it at the command line as a file name and converts it to a \f3FileInputStream\fR, from which it loads the keystore information\&amp;.)The \f3jarsigner\fR command can read a keystore from any location that can be specified with a URL\&amp;.</span>
<span class="line-modified">1235 </span>
<span class="line-modified">1236 For \f3keytool\fR and \f3jarsigner\fR, you can specify a keystore type at the command line, with the \f3-storetype\fR option\&amp;. For Policy Tool, you can specify a keystore type with the \fIKeystore\fR menu\&amp;.</span>
<span class="line-modified">1237 </span>
<span class="line-modified">1238 If you do not explicitly specify a keystore type, then the tools choose a keystore implementation based on the value of the \f3keystore\&amp;.type\fR property specified in the security properties file\&amp;. The security properties file is called \f3java\&amp;.security\fR, and resides in the security properties directory, \f3java\&amp;.home\elib\esecurity\fR on Windows and \f3java\&amp;.home/lib/security\fR on Oracle Solaris, where \f3java\&amp;.home\fR is the runtime environment directory\&amp;. The \f3jre\fR directory in the SDK or the top-level directory of the Java Runtime Environment (JRE)\&amp;.</span>
<span class="line-modified">1239 </span>
<span class="line-modified">1240 Each tool gets the \f3keystore\&amp;.type\fR value and then examines all the currently installed providers until it finds one that implements a keystores of that type\&amp;. It then uses the keystore implementation from that provider\&amp;.The \f3KeyStore\fR class defines a static method named \f3getDefaultType\fR that lets applications and applets retrieve the value of the \f3keystore\&amp;.type\fR property\&amp;. The following line of code creates an instance of the default keystore type as specified in the \f3keystore\&amp;.type\fR property:</span>
<span class="line-modified">1241 .sp     </span>
<span class="line-modified">1242 .nf     </span>
<span class="line-modified">1243 \f3KeyStore keyStore = KeyStore\&amp;.getInstance(KeyStore\&amp;.getDefaultType());\fP</span>
<span class="line-modified">1244 .fi     </span>
<span class="line-modified">1245 .nf     </span>
<span class="line-modified">1246 \f3\fP</span>
<span class="line-modified">1247 .fi     </span>
<span class="line-modified">1248 .sp     </span>
<span class="line-modified">1249 </span>
<span class="line-modified">1250 </span>
<span class="line-modified">1251 The default keystore type is \f3jks\fR, which is the proprietary type of the keystore implementation provided by Oracle\&amp;. This is specified by the following line in the security properties file:</span>
<span class="line-modified">1252 .sp     </span>
<span class="line-modified">1253 .nf     </span>
<span class="line-modified">1254 \f3keystore\&amp;.type=jks\fP</span>
<span class="line-modified">1255 .fi     </span>
<span class="line-modified">1256 .nf     </span>
<span class="line-modified">1257 \f3\fP</span>
<span class="line-modified">1258 .fi     </span>
<span class="line-modified">1259 .sp     </span>
<span class="line-modified">1260 </span>
<span class="line-modified">1261 </span>
<span class="line-modified">1262 To have the tools utilize a keystore implementation other than the default, you can change that line to specify a different keystore type\&amp;. For example, if you have a provider package that supplies a keystore implementation for a keystore type called \f3pkcs12\fR, then change the line to the following:</span>
<span class="line-modified">1263 .sp     </span>
<span class="line-modified">1264 .nf     </span>
<span class="line-modified">1265 \f3keystore\&amp;.type=pkcs12\fP</span>
<span class="line-modified">1266 .fi     </span>
<span class="line-modified">1267 .nf     </span>
<span class="line-modified">1268 \f3\fP</span>
<span class="line-modified">1269 .fi     </span>
<span class="line-modified">1270 .sp     </span>
<span class="line-modified">1271 </span>
<span class="line-modified">1272 </span>
<span class="line-modified">1273 \fINote:\fR Case does not matter in keystore type designations\&amp;. For example, JKS would be considered the same as jks\&amp;.</span>
<span class="line-modified">1274 .TP     </span>
<span class="line-modified">1275 Certificate</span>
<span class="line-modified">1276 A certificate (or public-key certificate) is a digitally signed statement from one entity (the issuer), saying that the public key and some other information of another entity (the subject) has some specific value\&amp;. The following terms are related to certificates:</span>
<span class="line-modified">1277 </span>
<span class="line-modified">1278 \fIPublic Keys\fR: These are numbers associated with a particular entity, and are intended to be known to everyone who needs to have trusted interactions with that entity\&amp;. Public keys are used to verify signatures\&amp;.</span>
<span class="line-modified">1279 </span>
<span class="line-modified">1280 \fIDigitally Signed\fR: If some data is digitally signed, then it is stored with the identity of an entity and a signature that proves that entity knows about the data\&amp;. The data is rendered unforgeable by signing with the entity\&amp;&#39;s private key\&amp;.</span>
<span class="line-modified">1281 </span>
<span class="line-modified">1282 \fIIdentity\fR: A known way of addressing an entity\&amp;. In some systems, the identity is the public key, and in others it can be anything from an Oracle Solaris UID to an email address to an X\&amp;.509 distinguished name\&amp;.</span>
<span class="line-modified">1283 </span>
<span class="line-modified">1284 \fISignature\fR: A signature is computed over some data using the private key of an entity\&amp;. The signer, which in the case of a certificate is also known as the issuer\&amp;.</span>
<span class="line-modified">1285 </span>
<span class="line-modified">1286 \fIPrivate Keys\fR: These are numbers, each of which is supposed to be known only to the particular entity whose private key it is (that is, it is supposed to be kept secret)\&amp;. Private and public keys exist in pairs in all public key cryptography systems (also referred to as public key crypto systems)\&amp;. In a typical public key crypto system, such as DSA, a private key corresponds to exactly one public key\&amp;. Private keys are used to compute signatures\&amp;.</span>
<span class="line-modified">1287 </span>
<span class="line-modified">1288 \fIEntity\fR: An entity is a person, organization, program, computer, business, bank, or something else you are trusting to some degree\&amp;.</span>
<span class="line-modified">1289 </span>
<span class="line-modified">1290 Public key cryptography requires access to users\&amp;&#39; public keys\&amp;. In a large-scale networked environment, it is impossible to guarantee that prior relationships between communicating entities were established or that a trusted repository exists with all used public keys\&amp;. Certificates were invented as a solution to this public key distribution problem\&amp;. Now a Certification Authority (CA) can act as a trusted third party\&amp;. CAs are entities such as businesses that are trusted to sign (issue) certificates for other entities\&amp;. It is assumed that CAs only create valid and reliable certificates because they are bound by legal agreements\&amp;. There are many public Certification Authorities, such as VeriSign, Thawte, Entrust, and so on\&amp;.</span>
<span class="line-modified">1291 </span>
<span class="line-modified">1292 You can also run your own Certification Authority using products such as Microsoft Certificate Server or the Entrust CA product for your organization\&amp;. With the \f3keytool\fR command, it is possible to display, import, and export certificates\&amp;. It is also possible to generate self-signed certificates\&amp;.</span>
<span class="line-modified">1293 </span>
<span class="line-modified">1294 The \f3keytool\fR command currently handles X\&amp;.509 certificates\&amp;.</span>
<span class="line-modified">1295 .TP     </span>
<span class="line-modified">1296 X\&amp;.509 Certificates</span>
<span class="line-modified">1297 The X\&amp;.509 standard defines what information can go into a certificate and describes how to write it down (the data format)\&amp;. All the data in a certificate is encoded with two related standards called ASN\&amp;.1/DER\&amp;. Abstract Syntax Notation 1 describes data\&amp;. The Definite Encoding Rules describe a single way to store and transfer that data\&amp;.</span>
<span class="line-modified">1298 </span>
<span class="line-modified">1299 All X\&amp;.509 certificates have the following data, in addition to the signature:</span>
<span class="line-modified">1300 </span>
<span class="line-modified">1301 \fIVersion\fR: This identifies which version of the X\&amp;.509 standard applies to this certificate, which affects what information can be specified in it\&amp;. Thus far, three versions are defined\&amp;. The \f3keytool\fR command can import and export v1, v2, and v3 certificates\&amp;. It generates v3 certificates\&amp;.</span>
<span class="line-modified">1302 </span>
<span class="line-modified">1303 X\&amp;.509 Version 1 has been available since 1988, is widely deployed, and is the most generic\&amp;.</span>
<span class="line-modified">1304 </span>
<span class="line-modified">1305 X\&amp;.509 Version 2 introduced the concept of subject and issuer unique identifiers to handle the possibility of reuse of subject or issuer names over time\&amp;. Most certificate profile documents strongly recommend that names not be reused and that certificates should not make use of unique identifiers\&amp;. Version 2 certificates are not widely used\&amp;.</span>
<span class="line-modified">1306 </span>
<span class="line-modified">1307 X\&amp;.509 Version 3 is the most recent (1996) and supports the notion of extensions where anyone can define an extension and include it in the certificate\&amp;. Some common extensions are: KeyUsage (limits the use of the keys to particular purposes such as \f3signing-only\fR) and AlternativeNames (allows other identities to also be associated with this public key, for example\&amp;. DNS names, email addresses, IP addresses)\&amp;. Extensions can be marked critical to indicate that the extension should be checked and enforced or used\&amp;. For example, if a certificate has the KeyUsage extension marked critical and set to \f3keyCertSign\fR, then when this certificate is presented during SSL communication, it should be rejected because the certificate extension indicates that the associated private key should only be used for signing certificates and not for SSL use\&amp;.</span>
<span class="line-modified">1308 </span>
<span class="line-modified">1309 \fISerial number\fR: The entity that created the certificate is responsible for assigning it a serial number to distinguish it from other certificates it issues\&amp;. This information is used in numerous ways\&amp;. For example, when a certificate is revoked its serial number is placed in a Certificate Revocation List (CRL)\&amp;.</span>
<span class="line-modified">1310 </span>
<span class="line-modified">1311 \fISignature algorithm identifier\fR: This identifies the algorithm used by the CA to sign the certificate\&amp;.</span>
<span class="line-modified">1312 </span>
<span class="line-modified">1313 \fIIssuer name\fR: The X\&amp;.500 Distinguished Name of the entity that signed the certificate\&amp;. See X\&amp;.500 Distinguished Names\&amp;. This is typically a CA\&amp;. Using this certificate implies trusting the entity that signed this certificate\&amp;. In some cases, such as root or top-level CA certificates, the issuer signs its own certificate\&amp;.</span>
<span class="line-modified">1314 </span>
<span class="line-modified">1315 \fIValidity period\fR: Each certificate is valid only for a limited amount of time\&amp;. This period is described by a start date and time and an end date and time, and can be as short as a few seconds or almost as long as a century\&amp;. The validity period chosen depends on a number of factors, such as the strength of the private key used to sign the certificate, or the amount one is willing to pay for a certificate\&amp;. This is the expected period that entities can rely on the public value, when the associated private key has not been compromised\&amp;.</span>
<span class="line-modified">1316 </span>
<span class="line-modified">1317 \fISubject name\fR: The name of the entity whose public key the certificate identifies\&amp;. This name uses the X\&amp;.500 standard, so it is intended to be unique across the Internet\&amp;. This is the X\&amp;.500 Distinguished Name (DN) of the entity\&amp;. See X\&amp;.500 Distinguished Names\&amp;. For example,</span>
<span class="line-modified">1318 .sp     </span>
<span class="line-modified">1319 .nf     </span>
<span class="line-modified">1320 \f3CN=Java Duke, OU=Java Software Division, O=Oracle Corporation, C=US\fP</span>
<span class="line-modified">1321 .fi     </span>
<span class="line-modified">1322 .nf     </span>
<span class="line-modified">1323 \f3\fP</span>
<span class="line-modified">1324 .fi     </span>
<span class="line-modified">1325 .sp     </span>
<span class="line-modified">1326 </span>
<span class="line-modified">1327 </span>
<span class="line-modified">1328 These refer to the subject\&amp;&#39;s common name (CN), organizational unit (OU), organization (O), and country (C)\&amp;.</span>
<span class="line-modified">1329 </span>
<span class="line-modified">1330 \fISubject public key information\fR: This is the public key of the entity being named with an algorithm identifier that specifies which public key crypto system this key belongs to and any associated key parameters\&amp;.</span>
<span class="line-modified">1331 .TP     </span>
<span class="line-modified">1332 Certificate Chains</span>
<span class="line-modified">1333 The \f3keytool\fR command can create and manage keystore key entries that each contain a private key and an associated certificate chain\&amp;. The first certificate in the chain contains the public key that corresponds to the private key\&amp;.</span>
<span class="line-modified">1334 </span>
<span class="line-modified">1335 When keys are first generated, the chain starts off containing a single element, a self-signed certificate\&amp;. See \f3-genkeypair\fR in Commands\&amp;. A self-signed certificate is one for which the issuer (signer) is the same as the subject\&amp;. The subject is the entity whose public key is being authenticated by the certificate\&amp;. Whenever the \f3-genkeypair\fR command is called to generate a new public/private key pair, it also wraps the public key into a self-signed certificate\&amp;.</span>
<span class="line-modified">1336 </span>
<span class="line-modified">1337 Later, after a Certificate Signing Request (CSR) was generated with the \f3-certreq\fR command and sent to a Certification Authority (CA), the response from the CA is imported with \f3-importcert\fR, and the self-signed certificate is replaced by a chain of certificates\&amp;. See the \f3-certreq\fR and \f3-importcert\fR options in Commands\&amp;. At the bottom of the chain is the certificate (reply) issued by the CA authenticating the subject\&amp;&#39;s public key\&amp;. The next certificate in the chain is one that authenticates the CA\&amp;&#39;s public key\&amp;.</span>
<span class="line-modified">1338 </span>
<span class="line-modified">1339 In many cases, this is a self-signed certificate, which is a certificate from the CA authenticating its own public key, and the last certificate in the chain\&amp;. In other cases, the CA might return a chain of certificates\&amp;. In this case, the bottom certificate in the chain is the same (a certificate signed by the CA, authenticating the public key of the key entry), but the second certificate in the chain is a certificate signed by a different CA that authenticates the public key of the CA you sent the CSR to\&amp;. The next certificate in the chain is a certificate that authenticates the second CA\&amp;&#39;s key, and so on, until a self-signed root certificate is reached\&amp;. Each certificate in the chain (after the first) authenticates the public key of the signer of the previous certificate in the chain\&amp;.</span>
<span class="line-modified">1340 </span>
<span class="line-modified">1341 Many CAs only return the issued certificate, with no supporting chain, especially when there is a flat hierarchy (no intermediates CAs)\&amp;. In this case, the certificate chain must be established from trusted certificate information already stored in the keystore\&amp;.</span>
<span class="line-modified">1342 </span>
<span class="line-modified">1343 A different reply format (defined by the PKCS #7 standard) includes the supporting certificate chain in addition to the issued certificate\&amp;. Both reply formats can be handled by the \f3keytool\fR command\&amp;.</span>
<span class="line-modified">1344 </span>
<span class="line-modified">1345 The top-level (root) CA certificate is self-signed\&amp;. However, the trust into the root\&amp;&#39;s public key does not come from the root certificate itself, but from other sources such as a newspaper\&amp;. This is because anybody could generate a self-signed certificate with the distinguished name of, for example, the VeriSign root CA\&amp;. The root CA public key is widely known\&amp;. The only reason it is stored in a certificate is because this is the format understood by most tools, so the certificate in this case is only used as a vehicle to transport the root CA\&amp;&#39;s public key\&amp;. Before you add the root CA certificate to your keystore, you should view it with the \f3-printcert\fR option and compare the displayed fingerprint with the well-known fingerprint obtained from a newspaper, the root CA\&amp;&#39;s Web page, and so on\&amp;.</span>
<span class="line-modified">1346 .TP     </span>
<span class="line-modified">1347 The cacerts Certificates File</span>
<span class="line-modified">1348 A certificates file named \f3cacerts\fR resides in the security properties directory, \f3java\&amp;.home\elib\esecurity\fR on Windows and \f3java\&amp;.home/lib/security\fR on Oracle Solaris, where \f3java\&amp;.home\fR is the runtime environment\&amp;&#39;s directory, which would be the \f3jre\fR directory in the SDK or the top-level directory of the JRE\&amp;.</span>
<span class="line-modified">1349 </span>
<span class="line-modified">1350 The \f3cacerts\fR file represents a system-wide keystore with CA certificates\&amp;. System administrators can configure and manage that file with the \f3keytool\fR command by specifying \f3jks\fR as the keystore type\&amp;. The \f3cacerts\fR keystore file ships with a default set of root CA certificates\&amp;. You can list the default certificates with the following command:</span>
<span class="line-modified">1351 .sp     </span>
<span class="line-modified">1352 .nf     </span>
<span class="line-modified">1353 \f3keytool \-list \-keystore java\&amp;.home/lib/security/cacerts\fP</span>
<span class="line-modified">1354 .fi     </span>
<span class="line-modified">1355 .nf     </span>
<span class="line-modified">1356 \f3\fP</span>
<span class="line-modified">1357 .fi     </span>
<span class="line-modified">1358 .sp     </span>
<span class="line-modified">1359 </span>
<span class="line-modified">1360 </span>
<span class="line-modified">1361 The initial password of the \f3cacerts\fR keystore file is \f3changeit\fR\&amp;. System administrators should change that password and the default access permission of that file upon installing the SDK\&amp;.</span>
<span class="line-modified">1362 </span>
<span class="line-modified">1363 \fINote:\fR It is important to verify your \f3cacerts\fR file\&amp;. Because you trust the CAs in the \f3cacerts\fR file as entities for signing and issuing certificates to other entities, you must manage the \f3cacerts\fR file carefully\&amp;. The \f3cacerts\fR file should contain only certificates of the CAs you trust\&amp;. It is your responsibility to verify the trusted root CA certificates bundled in the \f3cacerts\fR file and make your own trust decisions\&amp;.</span>
<span class="line-modified">1364 </span>
<span class="line-modified">1365 To remove an untrusted CA certificate from the \f3cacerts\fR file, use the \f3delete\fR option of the \f3keytool\fR command\&amp;. You can find the \f3cacerts\fR file in the JRE installation directory\&amp;. Contact your system administrator if you do not have permission to edit this file</span>
<span class="line-modified">1366 .TP     </span>
<span class="line-modified">1367 Internet RFC 1421 Certificate Encoding Standard</span>
<span class="line-modified">1368 Certificates are often stored using the printable encoding format defined by the Internet RFC 1421 standard, instead of their binary encoding\&amp;. This certificate format, also known as Base64 encoding, makes it easy to export certificates to other applications by email or through some other mechanism\&amp;.</span>
<span class="line-modified">1369 </span>
<span class="line-modified">1370 Certificates read by the \f3-importcert\fR and \f3-printcert\fR commands can be in either this format or binary encoded\&amp;. The \f3-exportcert\fR command by default outputs a certificate in binary encoding, but will instead output a certificate in the printable encoding format, when the \f3-rfc\fR option is specified\&amp;.</span>
<span class="line-modified">1371 </span>
<span class="line-modified">1372 The \f3-list\fR command by default prints the SHA1 fingerprint of a certificate\&amp;. If the \f3-v\fR option is specified, then the certificate is printed in human-readable format\&amp;. If the \f3-rfc\fR option is specified, then the certificate is output in the printable encoding format\&amp;.</span>
<span class="line-modified">1373 </span>
<span class="line-modified">1374 In its printable encoding format, the encoded certificate is bounded at the beginning and end by the following text:</span>
<span class="line-modified">1375 .sp     </span>
<span class="line-modified">1376 .nf     </span>
<span class="line-modified">1377 \f3\-\-\-\-\-BEGIN CERTIFICATE\-\-\-\-\-\fP</span>
<span class="line-modified">1378 .fi     </span>
<span class="line-modified">1379 .nf     </span>
<span class="line-modified">1380 \f3\fP</span>
<span class="line-modified">1381 .fi     </span>
<span class="line-modified">1382 .nf     </span>
<span class="line-modified">1383 \f3encoded certificate goes here\&amp;. \fP</span>
<span class="line-modified">1384 .fi     </span>
<span class="line-modified">1385 .nf     </span>
<span class="line-modified">1386 \f3\fP</span>
<span class="line-modified">1387 .fi     </span>
<span class="line-modified">1388 .nf     </span>
<span class="line-modified">1389 \f3\-\-\-\-\-END CERTIFICATE\-\-\-\-\-\fP</span>
<span class="line-modified">1390 .fi     </span>
<span class="line-modified">1391 .nf     </span>
<span class="line-modified">1392 \f3\fP</span>
<span class="line-modified">1393 .fi     </span>
<span class="line-modified">1394 .sp     </span>
<span class="line-modified">1395 </span>
<span class="line-modified">1396 .TP     </span>
<span class="line-modified">1397 X\&amp;.500 Distinguished Names</span>
<span class="line-modified">1398 X\&amp;.500 Distinguished Names are used to identify entities, such as those that are named by the \f3subject\fR and \f3issuer\fR (signer) fields of X\&amp;.509 certificates\&amp;. The \f3keytool\fR command supports the following subparts:</span>
<span class="line-modified">1399 </span>
<span class="line-modified">1400 \fIcommonName\fR: The common name of a person such as Susan Jones\&amp;.</span>
<span class="line-modified">1401 </span>
<span class="line-modified">1402 \fIorganizationUnit\fR: The small organization (such as department or division) name\&amp;. For example, Purchasing\&amp;.</span>
<span class="line-modified">1403 </span>
<span class="line-modified">1404 \fIlocalityName\fR: The locality (city) name, for example, Palo Alto\&amp;.</span>
<span class="line-modified">1405 </span>
<span class="line-modified">1406 \fIstateName\fR: State or province name, for example, California\&amp;.</span>
<span class="line-modified">1407 </span>
<span class="line-modified">1408 \fIcountry\fR: Two-letter country code, for example, CH\&amp;.</span>
<span class="line-modified">1409 </span>
<span class="line-modified">1410 When you supply a distinguished name string as the value of a \f3-dname\fR option, such as for the \f3-genkeypair\fR command, the string must be in the following format:</span>
<span class="line-modified">1411 .sp     </span>
<span class="line-modified">1412 .nf     </span>
<span class="line-modified">1413 \f3CN=cName, OU=orgUnit, O=org, L=city, S=state, C=countryCode\fP</span>
<span class="line-modified">1414 .fi     </span>
<span class="line-modified">1415 .nf     </span>
<span class="line-modified">1416 \f3\fP</span>
<span class="line-modified">1417 .fi     </span>
<span class="line-modified">1418 .sp     </span>
<span class="line-modified">1419 </span>
<span class="line-modified">1420 </span>
<span class="line-modified">1421 All the italicized items represent actual values and the previous keywords are abbreviations for the following:</span>
<span class="line-modified">1422 .sp     </span>
<span class="line-modified">1423 .nf     </span>
<span class="line-modified">1424 \f3CN=commonName\fP</span>
<span class="line-modified">1425 .fi     </span>
<span class="line-modified">1426 .nf     </span>
<span class="line-modified">1427 \f3OU=organizationUnit\fP</span>
<span class="line-modified">1428 .fi     </span>
<span class="line-modified">1429 .nf     </span>
<span class="line-modified">1430 \f3O=organizationName\fP</span>
<span class="line-modified">1431 .fi     </span>
<span class="line-modified">1432 .nf     </span>
<span class="line-modified">1433 \f3L=localityName\fP</span>
<span class="line-modified">1434 .fi     </span>
<span class="line-modified">1435 .nf     </span>
<span class="line-modified">1436 \f3S=stateName\fP</span>
<span class="line-modified">1437 .fi     </span>
<span class="line-modified">1438 .nf     </span>
<span class="line-modified">1439 \f3C=country\fP</span>
<span class="line-modified">1440 .fi     </span>
<span class="line-modified">1441 .nf     </span>
<span class="line-modified">1442 \f3\fP</span>
<span class="line-modified">1443 .fi     </span>
<span class="line-modified">1444 .sp     </span>
<span class="line-modified">1445 </span>
<span class="line-modified">1446 </span>





































































































































































































































































































































































































































































































































































1447 A sample distinguished name string is:
<span class="line-modified">1448 .sp     </span>
<span class="line-modified">1449 .nf     </span>
<span class="line-modified">1450 \f3CN=Mark Smith, OU=Java, O=Oracle, L=Cupertino, S=California, C=US\fP</span>
<span class="line-modified">1451 .fi     </span>
<span class="line-modified">1452 .nf     </span>
<span class="line-removed">1453 \f3\fP</span>
<span class="line-removed">1454 .fi     </span>
<span class="line-removed">1455 .sp     </span>
<span class="line-removed">1456 </span>
<span class="line-removed">1457 </span>
1458 A sample command using such a string is:
<span class="line-modified">1459 .sp     </span>
<span class="line-removed">1460 .nf     </span>
<span class="line-removed">1461 \f3keytool \-genkeypair \-dname &quot;CN=Mark Smith, OU=Java, O=Oracle, L=Cupertino,\fP</span>
<span class="line-removed">1462 .fi     </span>
<span class="line-removed">1463 .nf     </span>
<span class="line-removed">1464 \f3S=California, C=US&quot; \-alias mark\fP</span>
<span class="line-removed">1465 .fi     </span>
<span class="line-removed">1466 .nf     </span>
<span class="line-removed">1467 \f3\fP</span>
<span class="line-removed">1468 .fi     </span>
<span class="line-removed">1469 .sp     </span>
<span class="line-removed">1470 </span>
<span class="line-removed">1471 </span>
<span class="line-removed">1472 Case does not matter for the keyword abbreviations\&amp;. For example, CN, cn, and Cn are all treated the same\&amp;.</span>
<span class="line-removed">1473 </span>
<span class="line-removed">1474 Order matters; each subcomponent must appear in the designated order\&amp;. However, it is not necessary to have all the subcomponents\&amp;. You can use a subset, for example:</span>
<span class="line-removed">1475 .sp     </span>
<span class="line-removed">1476 .nf     </span>
<span class="line-removed">1477 \f3CN=Steve Meier, OU=Java, O=Oracle, C=US\fP</span>
<span class="line-removed">1478 .fi     </span>
<span class="line-removed">1479 .nf     </span>
<span class="line-removed">1480 \f3\fP</span>
<span class="line-removed">1481 .fi     </span>
<span class="line-removed">1482 .sp     </span>
<span class="line-removed">1483 </span>
<span class="line-removed">1484 </span>
<span class="line-removed">1485 If a distinguished name string value contains a comma, then the comma must be escaped by a backslash (\e) character when you specify the string on a command line, as in:</span>
<span class="line-removed">1486 .sp     </span>
<span class="line-removed">1487 .nf     </span>
<span class="line-removed">1488 \f3cn=Peter Schuster, ou=Java\e, Product Development, o=Oracle, c=US\fP</span>
<span class="line-removed">1489 .fi     </span>
<span class="line-removed">1490 .nf     </span>
<span class="line-removed">1491 \f3\fP</span>
<span class="line-removed">1492 .fi     </span>
<span class="line-removed">1493 .sp     </span>
<span class="line-removed">1494 </span>
<span class="line-removed">1495 </span>
<span class="line-removed">1496 It is never necessary to specify a distinguished name string on a command line\&amp;. When the distinguished name is needed for a command, but not supplied on the command line, the user is prompted for each of the subcomponents\&amp;. In this case, a comma does not need to be escaped by a backslash (\e)\&amp;.</span>
<span class="line-removed">1497 .SH WARNINGS    </span>
<span class="line-removed">1498 .SS IMPORTING\ TRUSTED\ CERTIFICATES\ WARNING    </span>
<span class="line-removed">1499 \fIImportant\fR: Be sure to check a certificate very carefully before importing it as a trusted certificate\&amp;.</span>
1500 .PP
<span class="line-modified">1501 Windows Example:</span>
<span class="line-modified">1502 </span>
<span class="line-removed">1503 View the certificate first with the \f3-printcert\fR command or the \f3-importcert\fR command without the \f3-noprompt\fR option\&amp;. Ensure that the displayed certificate fingerprints match the expected ones\&amp;. For example, suppose sends or emails you a certificate that you put it in a file named \f3\etmp\ecert\fR\&amp;. Before you consider adding the certificate to your list of trusted certificates, you can execute a \f3-printcert\fR command to view its fingerprints, as follows:</span>
<span class="line-removed">1504 .sp     </span>
<span class="line-removed">1505 .nf     </span>
<span class="line-removed">1506 \f3  keytool \-printcert \-file \etmp\ecert\fP</span>
<span class="line-removed">1507 .fi     </span>
<span class="line-removed">1508 .nf     </span>
<span class="line-removed">1509 \f3    Owner: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP</span>
<span class="line-removed">1510 .fi     </span>
<span class="line-removed">1511 .nf     </span>
<span class="line-removed">1512 \f3    Issuer: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP</span>
<span class="line-removed">1513 .fi     </span>
<span class="line-removed">1514 .nf     </span>
<span class="line-removed">1515 \f3    Serial Number: 59092b34\fP</span>
<span class="line-removed">1516 .fi     </span>
<span class="line-removed">1517 .nf     </span>
<span class="line-removed">1518 \f3    Valid from: Thu Sep 25 18:01:13 PDT 1997 until: Wed Dec 24 17:01:13 PST 1997\fP</span>
<span class="line-removed">1519 .fi     </span>
<span class="line-removed">1520 .nf     </span>
<span class="line-removed">1521 \f3    Certificate Fingerprints:\fP</span>
<span class="line-removed">1522 .fi     </span>
<span class="line-removed">1523 .nf     </span>
<span class="line-removed">1524 \f3         MD5:  11:81:AD:92:C8:E5:0E:A2:01:2E:D4:7A:D7:5F:07:6F\fP</span>
<span class="line-removed">1525 .fi     </span>
<span class="line-removed">1526 .nf     </span>
<span class="line-removed">1527 \f3         SHA1: 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE\fP</span>
<span class="line-removed">1528 .fi     </span>
<span class="line-removed">1529 .nf     </span>
<span class="line-removed">1530 \f3         SHA256: 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:\fP</span>
<span class="line-removed">1531 .fi     </span>
<span class="line-removed">1532 .nf     </span>
<span class="line-removed">1533 \f3                 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4\fP</span>
<span class="line-removed">1534 .fi     </span>
<span class="line-removed">1535 .sp     </span>
<span class="line-removed">1536 </span>
1537 .PP
<span class="line-modified">1538 Oracle Solaris Example:</span>
<span class="line-modified">1539 </span>
<span class="line-modified">1540 View the certificate first with the \f3-printcert\fR command or the \f3-importcert\fR command without the \f3-noprompt\fR option\&amp;. Ensure that the displayed certificate fingerprints match the expected ones\&amp;. For example, suppose someone sends or emails you a certificate that you put it in a file named \f3/tmp/cert\fR\&amp;. Before you consider adding the certificate to your list of trusted certificates, you can execute a \f3-printcert\fR command to view its fingerprints, as follows:</span>
<span class="line-modified">1541 .sp     </span>
<span class="line-modified">1542 .nf     </span>
<span class="line-modified">1543 \f3  keytool \-printcert \-file /tmp/cert\fP</span>
<span class="line-modified">1544 .fi     </span>
<span class="line-modified">1545 .nf     </span>
<span class="line-modified">1546 \f3    Owner: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP</span>
<span class="line-modified">1547 .fi     </span>
<span class="line-modified">1548 .nf     </span>
<span class="line-modified">1549 \f3    Issuer: CN=ll, OU=ll, O=ll, L=ll, S=ll, C=ll\fP</span>
<span class="line-modified">1550 .fi     </span>
<span class="line-modified">1551 .nf     </span>
<span class="line-modified">1552 \f3    Serial Number: 59092b34\fP</span>
<span class="line-modified">1553 .fi     </span>
<span class="line-modified">1554 .nf     </span>
<span class="line-modified">1555 \f3    Valid from: Thu Sep 25 18:01:13 PDT 1997 until: Wed Dec 24 17:01:13 PST 1997\fP</span>
<span class="line-modified">1556 .fi     </span>
<span class="line-modified">1557 .nf     </span>
<span class="line-modified">1558 \f3    Certificate Fingerprints:\fP</span>
<span class="line-modified">1559 .fi     </span>
<span class="line-modified">1560 .nf     </span>
<span class="line-modified">1561 \f3         MD5:  11:81:AD:92:C8:E5:0E:A2:01:2E:D4:7A:D7:5F:07:6F\fP</span>
<span class="line-modified">1562 .fi     </span>
<span class="line-modified">1563 .nf     </span>
<span class="line-modified">1564 \f3         SHA1: 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE\fP</span>
<span class="line-modified">1565 .fi     </span>
<span class="line-modified">1566 .nf     </span>
<span class="line-modified">1567 \f3         SHA256: 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:\fP</span>
<span class="line-modified">1568 .fi     </span>
<span class="line-modified">1569 .nf     </span>
<span class="line-modified">1570 \f3                 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4\fP</span>
<span class="line-modified">1571 .fi     </span>
<span class="line-modified">1572 .nf     </span>
<span class="line-modified">1573 \f3\fP</span>
<span class="line-modified">1574 .fi     </span>
<span class="line-modified">1575 .sp     </span>
<span class="line-modified">1576 Then call or otherwise contact the person who sent the certificate and compare the fingerprints that you see with the ones that they show\&amp;. Only when the fingerprints are equal is it guaranteed that the certificate was not replaced in transit with somebody else\&amp;&#39;s certificate such as an attacker\&amp;&#39;s certificate\&amp;. If such an attack took place, and you did not check the certificate before you imported it, then you would be trusting anything the attacker signed, for example, a JAR file with malicious class files inside\&amp;.</span>
<span class="line-modified">1577 .PP</span>
<span class="line-modified">1578 \fINote:\fR It is not required that you execute a \f3-printcert\fR command before importing a certificate\&amp;. This is because before you add a certificate to the list of trusted certificates in the keystore, the \f3-importcert\fR command prints out the certificate information and prompts you to verify it\&amp;. You can then stop the import operation\&amp;. However, you can do this only when you call the \f3-importcert\fR command without the \f3-noprompt\fR option\&amp;. If the \f3-noprompt\fR option is specified, then there is no interaction with the user\&amp;.</span>
<span class="line-modified">1579 .SS PASSWORDS\ WARNING    </span>
<span class="line-modified">1580 Most commands that operate on a keystore require the store password\&amp;. Some commands require a private/secret key password\&amp;. Passwords can be specified on the command line in the \f3-storepass\fR and \f3-keypass\fR options\&amp;. However, a password should not be specified on a command line or in a script unless it is for testing, or you are on a secure system\&amp;. When you do not specify a required password option on a command line, you are prompted for it\&amp;.</span>
<span class="line-modified">1581 .SS CERTIFICATE\ CONFORMANCE\ WARNING    </span>
<span class="line-modified">1582 The Internet standard RFC 5280 has defined a profile on conforming X\&amp;.509 certificates, which includes what values and value combinations are valid for certificate fields and extensions\&amp;. See the standard at http://tools\&amp;.ietf\&amp;.org/rfc/rfc5280\&amp;.txt</span>
<span class="line-modified">1583 .PP</span>
<span class="line-modified">1584 The \f3keytool\fR command does not enforce all of these rules so it can generate certificates that do not conform to the standard\&amp;. Certificates that do not conform to the standard might be rejected by JRE or other applications\&amp;. Users should ensure that they provide the correct options for \f3-dname\fR, \f3-ext\fR, and so on\&amp;.</span>
<span class="line-modified">1585 .SH NOTES    </span>
<span class="line-modified">1586 .SS IMPORT\ A\ NEW\ TRUSTED\ CERTIFICATE    </span>
<span class="line-modified">1587 Before you add the certificate to the keystore, the \f3keytool\fR command verifies it by attempting to construct a chain of trust from that certificate to a self-signed certificate (belonging to a root CA), using trusted certificates that are already available in the keystore\&amp;.</span>
<span class="line-modified">1588 .PP</span>
<span class="line-modified">1589 If the \f3-trustcacerts\fR option was specified, then additional certificates are considered for the chain of trust, namely the certificates in a file named \f3cacerts\fR\&amp;.</span>
<span class="line-modified">1590 .PP</span>
<span class="line-modified">1591 If the \f3keytool\fR command fails to establish a trust path from the certificate to be imported up to a self-signed certificate (either from the keystore or the \f3cacerts\fR file), then the certificate information is printed, and the user is prompted to verify it by comparing the displayed certificate fingerprints with the fingerprints obtained from some other (trusted) source of information, which might be the certificate owner\&amp;. Be very careful to ensure the certificate is valid before importing it as a trusted certificate\&amp;. See Importing Trusted Certificates Warning\&amp;. The user then has the option of stopping the import operation\&amp;. If the \f3-noprompt\fR option is specified, then there is no interaction with the user\&amp;.</span>
<span class="line-modified">1592 .SS IMPORT\ A\ CERTIFICATE\ REPLY    </span>
<span class="line-modified">1593 When you import a certificate reply, the certificate reply is validated with trusted certificates from the keystore, and optionally, the certificates configured in the \f3cacerts\fR keystore file when the \f3-trustcacert\fR\f3s\fR option is specified\&amp;. See The cacerts Certificates File\&amp;.</span>
<span class="line-modified">1594 .PP</span>
<span class="line-modified">1595 The methods of determining whether the certificate reply is trusted are as follows:</span>
<span class="line-modified">1596 .TP 0.2i    </span>
<span class="line-modified">1597 \(bu</span>
<span class="line-modified">1598 If the reply is a single X\&amp;.509 certificate, then the \f3keytool\fR command attempts to establish a trust chain, starting at the certificate reply and ending at a self-signed certificate (belonging to a root CA)\&amp;. The certificate reply and the hierarchy of certificates is used to authenticate the certificate reply from the new certificate chain of aliases\&amp;. If a trust chain cannot be established, then the certificate reply is not imported\&amp;. In this case, the \f3keytool\fR command does not print the certificate and prompt the user to verify it, because it is very difficult for a user to determine the authenticity of the certificate reply\&amp;.</span>
<span class="line-modified">1599 .TP 0.2i    </span>
<span class="line-modified">1600 \(bu</span>
<span class="line-modified">1601 If the reply is a PKCS #7 formatted certificate chain or a sequence of X\&amp;.509 certificates, then the chain is ordered with the user certificate first followed by zero or more CA certificates\&amp;. If the chain ends with a self-signed root CA certificate and the\f3-trustcacerts\fR option was specified, the \f3keytool\fR command attempts to match it with any of the trusted certificates in the keystore or the \f3cacerts\fR keystore file\&amp;. If the chain does not end with a self-signed root CA certificate and the \f3-trustcacerts\fR option was specified, the \f3keytool\fR command tries to find one from the trusted certificates in the keystore or the \f3cacerts\fR keystore file and add it to the end of the chain\&amp;. If the certificate is not found and the \f3-noprompt\fR option is not specified, the information of the last certificate in the chain is printed, and the user is prompted to verify it\&amp;.</span>
<span class="line-modified">1602 .PP</span>
<span class="line-modified">1603 If the public key in the certificate reply matches the user\&amp;&#39;s public key already stored with \f3alias\fR, then the old certificate chain is replaced with the new certificate chain in the reply\&amp;. The old chain can only be replaced with a valid \f3keypass\fR, and so the password used to protect the private key of the entry is supplied\&amp;. If no password is provided, and the private key password is different from the keystore password, the user is prompted for it\&amp;.</span>
<span class="line-modified">1604 .PP</span>
<span class="line-modified">1605 This command was named \f3-import\fR in earlier releases\&amp;. This old name is still supported in this release\&amp;. The new name, \f3-importcert\fR, is preferred going forward\&amp;.</span>
<span class="line-modified">1606 .SH SEE\ ALSO    </span>
<span class="line-modified">1607 .TP 0.2i    </span>
<span class="line-modified">1608 \(bu</span>
<span class="line-modified">1609 jar(1)</span>
<span class="line-modified">1610 .TP 0.2i    </span>
<span class="line-modified">1611 \(bu</span>
<span class="line-modified">1612 jarsigner(1)</span>
<span class="line-modified">1613 .TP 0.2i    </span>
<span class="line-modified">1614 \(bu</span>
<span class="line-modified">1615 Trail: Security Features in Java SE at http://docs\&amp;.oracle\&amp;.com/javase/tutorial/security/index\&amp;.html</span>
<span class="line-modified">1616 .RE</span>
<span class="line-modified">1617 .br</span>
<span class="line-modified">1618 &#39;pl 8.5i</span>
<span class="line-modified">1619 &#39;bp</span>




























































































































</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">   1 .\&quot;t</span>
<span class="line-modified">   2 .\&quot; Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3 .\&quot; DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4 .\&quot;
   5 .\&quot; This code is free software; you can redistribute it and/or modify it
   6 .\&quot; under the terms of the GNU General Public License version 2 only, as
   7 .\&quot; published by the Free Software Foundation.
   8 .\&quot;
   9 .\&quot; This code is distributed in the hope that it will be useful, but WITHOUT
  10 .\&quot; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
<span class="line-modified">  11 .\&quot; FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License</span>
  12 .\&quot; version 2 for more details (a copy is included in the LICENSE file that
  13 .\&quot; accompanied this code).
  14 .\&quot;
  15 .\&quot; You should have received a copy of the GNU General Public License version
  16 .\&quot; 2 along with this work; if not, write to the Free Software Foundation,
  17 .\&quot; Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18 .\&quot;
  19 .\&quot; Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20 .\&quot; or visit www.oracle.com if you need additional information or have any
  21 .\&quot; questions.
  22 .\&quot;
<span class="line-modified">  23 .\&quot; Automatically generated by Pandoc 2.3.1</span>




  24 .\&quot;
<span class="line-modified">  25 .TH &quot;KEYTOOL&quot; &quot;1&quot; &quot;2020&quot; &quot;JDK 14&quot; &quot;JDK Commands&quot;</span>
<span class="line-modified">  26 .hy</span>
<span class="line-modified">  27 .SH NAME</span>
<span class="line-modified">  28 .PP</span>
<span class="line-modified">  29 keytool \- a key and certificate management utility</span>
<span class="line-modified">  30 .SH SYNOPSIS</span>
<span class="line-modified">  31 .PP</span>
<span class="line-modified">  32 \f[CB]keytool\f[R] [\f[I]commands\f[R]]</span>
<span class="line-modified">  33 .TP</span>
<span class="line-modified">  34 .B \f[I]commands\f[R]</span>
<span class="line-modified">  35 Commands for \f[CB]keytool\f[R] include the following:</span>
<span class="line-modified">  36 .RS</span>
<span class="line-modified">  37 .IP \[bu] 2</span>
<span class="line-modified">  38 \f[CB]\-certreq\f[R]: Generates a certificate request</span>
<span class="line-modified">  39 .IP \[bu] 2</span>
<span class="line-modified">  40 \f[CB]\-changealias\f[R]: Changes an entry\[aq]s alias</span>
<span class="line-modified">  41 .IP \[bu] 2</span>
<span class="line-modified">  42 \f[CB]\-delete\f[R]: Deletes an entry</span>
<span class="line-modified">  43 .IP \[bu] 2</span>
<span class="line-modified">  44 \f[CB]\-exportcert\f[R]: Exports certificate</span>
<span class="line-modified">  45 .IP \[bu] 2</span>
<span class="line-modified">  46 \f[CB]\-genkeypair\f[R]: Generates a key pair</span>
<span class="line-modified">  47 .IP \[bu] 2</span>
<span class="line-modified">  48 \f[CB]\-genseckey\f[R]: Generates a secret key</span>
<span class="line-modified">  49 .IP \[bu] 2</span>
<span class="line-modified">  50 \f[CB]\-gencert\f[R]: Generates a certificate from a certificate request</span>
<span class="line-modified">  51 .IP \[bu] 2</span>
<span class="line-modified">  52 \f[CB]\-importcert\f[R]: Imports a certificate or a certificate chain</span>
<span class="line-modified">  53 .IP \[bu] 2</span>
<span class="line-modified">  54 \f[CB]\-importpass\f[R]: Imports a password</span>
<span class="line-modified">  55 .IP \[bu] 2</span>
<span class="line-modified">  56 \f[CB]\-importkeystore\f[R]: Imports one or all entries from another</span>
<span class="line-modified">  57 keystore</span>
<span class="line-modified">  58 .IP \[bu] 2</span>
<span class="line-modified">  59 \f[CB]\-keypasswd\f[R]: Changes the key password of an entry</span>
<span class="line-modified">  60 .IP \[bu] 2</span>
<span class="line-modified">  61 \f[CB]\-list\f[R]: Lists entries in a keystore</span>
<span class="line-modified">  62 .IP \[bu] 2</span>
<span class="line-modified">  63 \f[CB]\-printcert\f[R]: Prints the content of a certificate</span>
<span class="line-modified">  64 .IP \[bu] 2</span>
<span class="line-modified">  65 \f[CB]\-printcertreq\f[R]: Prints the content of a certificate request</span>
<span class="line-modified">  66 .IP \[bu] 2</span>
<span class="line-modified">  67 \f[CB]\-printcrl\f[R]: Prints the content of a Certificate Revocation List</span>
<span class="line-modified">  68 (CRL) file</span>
<span class="line-modified">  69 .IP \[bu] 2</span>
<span class="line-modified">  70 \f[CB]\-storepasswd\f[R]: Changes the store password of a keystore</span>
<span class="line-modified">  71 .IP \[bu] 2</span>
<span class="line-modified">  72 \f[CB]\-showinfo\f[R]: Displays security\-related information</span>
<span class="line-modified">  73 .PP</span>
<span class="line-modified">  74 See \f[B]Commands and Options\f[R] for a description of these commands</span>
<span class="line-modified">  75 with their options.</span>
<span class="line-modified">  76 .RE</span>
<span class="line-modified">  77 .SH DESCRIPTION</span>
<span class="line-modified">  78 .PP</span>
<span class="line-modified">  79 The \f[CB]keytool\f[R] command is a key and certificate management</span>
<span class="line-modified">  80 utility.</span>
<span class="line-modified">  81 It enables users to administer their own public/private key pairs and</span>
<span class="line-modified">  82 associated certificates for use in self\-authentication (where a user</span>
<span class="line-modified">  83 authenticates themselves to other users and services) or data integrity</span>
<span class="line-modified">  84 and authentication services, by using digital signatures.</span>
<span class="line-modified">  85 The \f[CB]keytool\f[R] command also enables users to cache the public keys</span>
<span class="line-modified">  86 (in the form of certificates) of their communicating peers.</span>
<span class="line-modified">  87 .PP</span>
<span class="line-modified">  88 A certificate is a digitally signed statement from one entity (person,</span>
<span class="line-modified">  89 company, and so on), which says that the public key (and some other</span>
<span class="line-modified">  90 information) of some other entity has a particular value.</span>
<span class="line-modified">  91 When data is digitally signed, the signature can be verified to check</span>
<span class="line-modified">  92 the data integrity and authenticity.</span>
<span class="line-modified">  93 Integrity means that the data hasn\[aq]t been modified or tampered with,</span>
<span class="line-modified">  94 and authenticity means that the data comes from the individual who</span>
<span class="line-modified">  95 claims to have created and signed it.</span>
<span class="line-modified">  96 .PP</span>
<span class="line-modified">  97 The \f[CB]keytool\f[R] command also enables users to administer secret</span>
<span class="line-modified">  98 keys and passphrases used in symmetric encryption and decryption (Data</span>
<span class="line-modified">  99 Encryption Standard).</span>
<span class="line-modified"> 100 It can also display other security\-related information.</span>
<span class="line-modified"> 101 .PP</span>
<span class="line-modified"> 102 The \f[CB]keytool\f[R] command stores the keys and certificates in a</span>
<span class="line-modified"> 103 keystore.</span>
<span class="line-modified"> 104 .SH COMMAND AND OPTION NOTES</span>
<span class="line-modified"> 105 .PP</span>
<span class="line-modified"> 106 The following notes apply to the descriptions in \f[B]Commands and</span>
<span class="line-modified"> 107 Options\f[R]:</span>
<span class="line-modified"> 108 .IP \[bu] 2</span>
<span class="line-modified"> 109 All command and option names are preceded by a hyphen sign</span>
<span class="line-modified"> 110 (\f[CB]\-\f[R]).</span>
<span class="line-modified"> 111 .IP \[bu] 2</span>
<span class="line-modified"> 112 Only one command can be provided.</span>
<span class="line-modified"> 113 .IP \[bu] 2</span>
<span class="line-modified"> 114 Options for each command can be provided in any order.</span>
<span class="line-modified"> 115 .IP \[bu] 2</span>
<span class="line-modified"> 116 There are two kinds of options, one is single\-valued which should be</span>
<span class="line-modified"> 117 only provided once.</span>
<span class="line-modified"> 118 If a single\-valued option is provided multiple times, the value of the</span>
<span class="line-modified"> 119 last one is used.</span>
<span class="line-modified"> 120 The other type is multi\-valued, which can be provided multiple times</span>
<span class="line-modified"> 121 and all values are used.</span>
<span class="line-modified"> 122 The only multi\-valued option currently supported is the \f[CB]\-ext\f[R]</span>
<span class="line-modified"> 123 option used to generate X.509v3 certificate extensions.</span>
<span class="line-modified"> 124 .IP \[bu] 2</span>
<span class="line-modified"> 125 All items not italicized or in braces ({ }) or brackets ([ ]) are</span>
<span class="line-modified"> 126 required to appear as is.</span>
<span class="line-modified"> 127 .IP \[bu] 2</span>
<span class="line-modified"> 128 Braces surrounding an option signify that a default value is used when</span>
<span class="line-modified"> 129 the option isn\[aq]t specified on the command line.</span>
<span class="line-modified"> 130 Braces are also used around the \f[CB]\-v\f[R], \f[CB]\-rfc\f[R], and</span>
<span class="line-modified"> 131 \f[CB]\-J\f[R] options, which have meaning only when they appear on the</span>
<span class="line-modified"> 132 command line.</span>
<span class="line-modified"> 133 They don\[aq]t have any default values.</span>
<span class="line-modified"> 134 .IP \[bu] 2</span>
<span class="line-modified"> 135 Brackets surrounding an option signify that the user is prompted for the</span>
<span class="line-modified"> 136 values when the option isn\[aq]t specified on the command line.</span>
<span class="line-modified"> 137 For the \f[CB]\-keypass\f[R] option, if you don\[aq]t specify the option</span>
<span class="line-modified"> 138 on the command line, then the \f[CB]keytool\f[R] command first attempts to</span>
<span class="line-modified"> 139 use the keystore password to recover the private/secret key.</span>
<span class="line-modified"> 140 If this attempt fails, then the \f[CB]keytool\f[R] command prompts you for</span>
<span class="line-modified"> 141 the private/secret key password.</span>
<span class="line-modified"> 142 .IP \[bu] 2</span>
<span class="line-modified"> 143 Items in italics (option values) represent the actual values that must</span>
<span class="line-modified"> 144 be supplied.</span>
<span class="line-modified"> 145 For example, here is the format of the \f[CB]\-printcert\f[R] command:</span>
<span class="line-modified"> 146 .RS 2</span>
<span class="line-modified"> 147 .RS</span>
<span class="line-modified"> 148 .PP</span>
<span class="line-modified"> 149 \f[CB]keytool\ \-printcert\f[R] {\f[CB]\-file\f[R] \f[I]cert_file\f[R]}</span>
<span class="line-modified"> 150 {\f[CB]\-v\f[R]}</span>
<span class="line-modified"> 151 .RE</span>
<span class="line-modified"> 152 .PP</span>
<span class="line-modified"> 153 When you specify a \f[CB]\-printcert\f[R] command, replace</span>
<span class="line-modified"> 154 \f[I]cert_file\f[R] with the actual file name, as follows:</span>
<span class="line-modified"> 155 \f[CB]keytool\ \-printcert\ \-file\ VScert.cer\f[R]</span>
<span class="line-modified"> 156 .RE</span>
<span class="line-modified"> 157 .IP \[bu] 2</span>
<span class="line-modified"> 158 Option values must be enclosed in quotation marks when they contain a</span>
<span class="line-modified"> 159 blank (space).</span>
<span class="line-modified"> 160 .SH COMMANDS AND OPTIONS</span>
<span class="line-modified"> 161 .PP</span>
<span class="line-modified"> 162 The keytool commands and their options can be grouped by the tasks that</span>
<span class="line-modified"> 163 they perform.</span>
<span class="line-modified"> 164 .PP</span>
<span class="line-modified"> 165 \f[B]Commands for Creating or Adding Data to the Keystore\f[R]:</span>
<span class="line-modified"> 166 .IP \[bu] 2</span>
<span class="line-modified"> 167 \f[CB]\-gencert\f[R]</span>
<span class="line-modified"> 168 .IP \[bu] 2</span>
<span class="line-modified"> 169 \f[CB]\-genkeypair\f[R]</span>
<span class="line-modified"> 170 .IP \[bu] 2</span>
<span class="line-modified"> 171 \f[CB]\-genseckey\f[R]</span>
<span class="line-modified"> 172 .IP \[bu] 2</span>
<span class="line-modified"> 173 \f[CB]\-importcert\f[R]</span>
<span class="line-modified"> 174 .IP \[bu] 2</span>
<span class="line-modified"> 175 \f[CB]\-importpass\f[R]</span>
<span class="line-modified"> 176 .PP</span>
<span class="line-modified"> 177 \f[B]Commands for Importing Contents from Another Keystore\f[R]:</span>
<span class="line-modified"> 178 .IP \[bu] 2</span>
<span class="line-modified"> 179 \f[CB]\-importkeystore\f[R]</span>
<span class="line-modified"> 180 .PP</span>
<span class="line-modified"> 181 \f[B]Commands for Generating a Certificate Request\f[R]:</span>
<span class="line-modified"> 182 .IP \[bu] 2</span>
<span class="line-modified"> 183 \f[CB]\-certreq\f[R]</span>
<span class="line-modified"> 184 .PP</span>
<span class="line-modified"> 185 \f[B]Commands for Exporting Data\f[R]:</span>
<span class="line-modified"> 186 .IP \[bu] 2</span>
<span class="line-modified"> 187 \f[CB]\-exportcert\f[R]</span>
<span class="line-modified"> 188 .PP</span>
<span class="line-modified"> 189 \f[B]Commands for Displaying Data\f[R]:</span>
<span class="line-modified"> 190 .IP \[bu] 2</span>
<span class="line-modified"> 191 \f[CB]\-list\f[R]</span>
<span class="line-modified"> 192 .IP \[bu] 2</span>
<span class="line-modified"> 193 \f[CB]\-printcert\f[R]</span>
<span class="line-modified"> 194 .IP \[bu] 2</span>
<span class="line-modified"> 195 \f[CB]\-printcertreq\f[R]</span>
<span class="line-modified"> 196 .IP \[bu] 2</span>
<span class="line-modified"> 197 \f[CB]\-printcrl\f[R]</span>
<span class="line-modified"> 198 .PP</span>
<span class="line-modified"> 199 \f[B]Commands for Managing the Keystore\f[R]:</span>
<span class="line-modified"> 200 .IP \[bu] 2</span>
<span class="line-modified"> 201 \f[CB]\-storepasswd\f[R]</span>
<span class="line-modified"> 202 .IP \[bu] 2</span>
<span class="line-modified"> 203 \f[CB]\-keypasswd\f[R]</span>
<span class="line-modified"> 204 .IP \[bu] 2</span>
<span class="line-modified"> 205 \f[CB]\-delete\f[R]</span>
<span class="line-modified"> 206 .IP \[bu] 2</span>
<span class="line-modified"> 207 \f[CB]\-changealias\f[R]</span>
<span class="line-modified"> 208 .PP</span>
<span class="line-modified"> 209 \f[B]Commands for Displaying Security\-related Information\f[R]:</span>
<span class="line-modified"> 210 .IP \[bu] 2</span>
<span class="line-modified"> 211 \f[CB]\-showinfo\f[R]</span>
<span class="line-modified"> 212 .SH COMMANDS FOR CREATING OR ADDING DATA TO THE KEYSTORE</span>
<span class="line-modified"> 213 .TP</span>
<span class="line-modified"> 214 .B \f[CB]\-gencert\f[R]</span>
<span class="line-modified"> 215 The following are the available options for the \f[CB]\-gencert\f[R]</span>
<span class="line-modified"> 216 command:</span>
<span class="line-modified"> 217 .RS</span>
<span class="line-modified"> 218 .IP \[bu] 2</span>
<span class="line-modified"> 219 {\f[CB]\-rfc\f[R]}: Output in RFC (Request For Comment) style</span>
<span class="line-modified"> 220 .IP \[bu] 2</span>
<span class="line-modified"> 221 {\f[CB]\-infile\f[R] \f[I]infile\f[R]}: Input file name</span>
<span class="line-modified"> 222 .IP \[bu] 2</span>
<span class="line-modified"> 223 {\f[CB]\-outfile\f[R] \f[I]outfile\f[R]}: Output file name</span>
<span class="line-modified"> 224 .IP \[bu] 2</span>
<span class="line-modified"> 225 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-modified"> 226 .IP \[bu] 2</span>
<span class="line-modified"> 227 {\f[CB]\-sigalg\f[R] \f[I]sigalg\f[R]}: Signature algorithm name</span>
<span class="line-modified"> 228 .IP \[bu] 2</span>
<span class="line-modified"> 229 {\f[CB]\-dname\f[R] \f[I]dname\f[R]}: Distinguished name</span>
<span class="line-modified"> 230 .IP \[bu] 2</span>
<span class="line-modified"> 231 {\f[CB]\-startdate\f[R] \f[I]startdate\f[R]}: Certificate validity start</span>
<span class="line-modified"> 232 date and time</span>
<span class="line-modified"> 233 .IP \[bu] 2</span>
<span class="line-modified"> 234 {\f[CB]\-ext\f[R] \f[I]ext\f[R]}*: X.509 extension</span>
<span class="line-modified"> 235 .IP \[bu] 2</span>
<span class="line-modified"> 236 {\f[CB]\-validity\f[R] \f[I]days\f[R]}: Validity number of days</span>
<span class="line-modified"> 237 .IP \[bu] 2</span>
<span class="line-modified"> 238 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-modified"> 239 .IP \[bu] 2</span>
<span class="line-modified"> 240 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-modified"> 241 .IP \[bu] 2</span>
<span class="line-modified"> 242 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-modified"> 243 .IP \[bu] 2</span>
<span class="line-modified"> 244 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-modified"> 245 .IP \[bu] 2</span>
<span class="line-modified"> 246 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-modified"> 247 .IP \[bu] 2</span>
<span class="line-modified"> 248 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-modified"> 249 \f[I]arg\f[R]]}: Adds a security provider by name (such as SunPKCS11)</span>
<span class="line-modified"> 250 with an optional configure argument.</span>
<span class="line-modified"> 251 The value of the security provider is the name of a security provider</span>
<span class="line-modified"> 252 that is defined in a module.</span>
<span class="line-modified"> 253 .RS 2</span>
<span class="line-modified"> 254 .PP</span>
<span class="line-modified"> 255 For example,</span>
<span class="line-modified"> 256 .RS</span>
<span class="line-modified"> 257 .PP</span>
<span class="line-modified"> 258 \f[CB]keytool\ \-addprovider\ SunPKCS11\ \-providerarg\ some.cfg\ ...\f[R]</span>
<span class="line-modified"> 259 .RE</span>
<span class="line-modified"> 260 .PP</span>
<span class="line-modified"> 261 \f[B]Note:\f[R]</span>
<span class="line-modified"> 262 .PP</span>
<span class="line-modified"> 263 For compatibility reasons, the SunPKCS11 and OracleUcrypto providers can</span>
<span class="line-modified"> 264 still be loaded with</span>
<span class="line-modified"> 265 \f[CB]\-providerclass\ sun.security.pkcs11.SunPKCS11\f[R] and</span>
<span class="line-modified"> 266 \f[CB]\-providerclass\ com.oracle.security.crypto.UcryptoProvider\f[R]</span>
<span class="line-modified"> 267 even if they are now defined in modules.</span>
<span class="line-modified"> 268 These are the only modules included in JDK that need a configuration,</span>
<span class="line-modified"> 269 and therefore the most widely used with the \f[CB]\-providerclass\f[R]</span>
<span class="line-modified"> 270 option.</span>
<span class="line-modified"> 271 For legacy security providers located on classpath and loaded by</span>
<span class="line-modified"> 272 reflection, \f[CB]\-providerclass\f[R] should still be used.</span>
<span class="line-modified"> 273 .RE</span>
<span class="line-modified"> 274 .IP \[bu] 2</span>
<span class="line-modified"> 275 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-modified"> 276 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-modified"> 277 an optional configure argument.</span>
<span class="line-modified"> 278 .RS 2</span>
<span class="line-modified"> 279 .PP</span>
<span class="line-modified"> 280 For example, if \f[CB]MyProvider\f[R] is a legacy provider loaded via</span>
<span class="line-modified"> 281 reflection,</span>
<span class="line-modified"> 282 .RS</span>
<span class="line-modified"> 283 .PP</span>
<span class="line-modified"> 284 \f[CB]keytool\ \-providerclass\ com.example.MyProvider\ ...\f[R]</span>
<span class="line-modified"> 285 .RE</span>
<span class="line-modified"> 286 .RE</span>
<span class="line-modified"> 287 .IP \[bu] 2</span>
<span class="line-modified"> 288 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-modified"> 289 .IP \[bu] 2</span>
<span class="line-modified"> 290 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-modified"> 291 .IP \[bu] 2</span>
<span class="line-modified"> 292 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-modified"> 293 .PP</span>
<span class="line-modified"> 294 Use the \f[CB]\-gencert\f[R] command to generate a certificate as a</span>
<span class="line-modified"> 295 response to a certificate request file (which can be created by the</span>
<span class="line-modified"> 296 \f[CB]keytool\ \-certreq\f[R] command).</span>
<span class="line-modified"> 297 The command reads the request either from \f[I]infile\f[R] or, if</span>
<span class="line-modified"> 298 omitted, from the standard input, signs it by using the alias\[aq]s</span>
<span class="line-modified"> 299 private key, and outputs the X.509 certificate into either</span>
<span class="line-added"> 300 \f[I]outfile\f[R] or, if omitted, to the standard output.</span>
<span class="line-added"> 301 When \f[CB]\-rfc\f[R] is specified, the output format is Base64\-encoded</span>
<span class="line-added"> 302 PEM; otherwise, a binary DER is created.</span>
<span class="line-added"> 303 .PP</span>
<span class="line-added"> 304 The \f[CB]\-sigalg\f[R] value specifies the algorithm that should be used</span>
<span class="line-added"> 305 to sign the certificate.</span>
<span class="line-added"> 306 The \f[I]startdate\f[R] argument is the start time and date that the</span>
<span class="line-added"> 307 certificate is valid.</span>
<span class="line-added"> 308 The \f[I]days\f[R] argument tells the number of days for which the</span>
<span class="line-added"> 309 certificate should be considered valid.</span>
<span class="line-added"> 310 .PP</span>
<span class="line-added"> 311 When \f[I]dname\f[R] is provided, it is used as the subject of the</span>
<span class="line-added"> 312 generated certificate.</span>
<span class="line-added"> 313 Otherwise, the one from the certificate request is used.</span>
<span class="line-added"> 314 .PP</span>
<span class="line-added"> 315 The \f[CB]\-ext\f[R] value shows what X.509 extensions will be embedded in</span>
<span class="line-added"> 316 the certificate.</span>
<span class="line-added"> 317 Read \f[B]Common Command Options\f[R] for the grammar of \f[CB]\-ext\f[R].</span>
<span class="line-added"> 318 .PP</span>
<span class="line-added"> 319 The \f[CB]\-gencert\f[R] option enables you to create certificate chains.</span>
<span class="line-added"> 320 The following example creates a certificate, \f[CB]e1\f[R], that contains</span>
<span class="line-added"> 321 three certificates in its certificate chain.</span>
<span class="line-added"> 322 .PP</span>
<span class="line-added"> 323 The following commands creates four key pairs named \f[CB]ca\f[R],</span>
<span class="line-added"> 324 \f[CB]ca1\f[R], \f[CB]ca2\f[R], and \f[CB]e1\f[R]:</span>
<span class="line-added"> 325 .IP</span>
<span class="line-added"> 326 .nf</span>
<span class="line-added"> 327 \f[CB]</span>
<span class="line-added"> 328 keytool\ \-alias\ ca\ \-dname\ CN=CA\ \-genkeypair\ \-keyalg\ rsa</span>
<span class="line-added"> 329 keytool\ \-alias\ ca1\ \-dname\ CN=CA\ \-genkeypair\ \-keyalg\ rsa</span>
<span class="line-added"> 330 keytool\ \-alias\ ca2\ \-dname\ CN=CA\ \-genkeypair\ \-keyalg\ rsa</span>
<span class="line-added"> 331 keytool\ \-alias\ e1\ \-dname\ CN=E1\ \-genkeypair\ \-keyalg\ rsa</span>
<span class="line-added"> 332 \f[R]</span>
<span class="line-added"> 333 .fi</span>
<span class="line-added"> 334 .PP</span>
<span class="line-added"> 335 The following two commands create a chain of signed certificates;</span>
<span class="line-added"> 336 \f[CB]ca\f[R] signs \f[CB]ca1\f[R] and \f[CB]ca1\f[R] signs \f[CB]ca2\f[R], all</span>
<span class="line-added"> 337 of which are self\-issued:</span>
<span class="line-added"> 338 .IP</span>
<span class="line-added"> 339 .nf</span>
<span class="line-added"> 340 \f[CB]</span>
<span class="line-added"> 341 keytool\ \-alias\ ca1\ \-certreq\ |</span>
<span class="line-added"> 342 \ \ \ \ keytool\ \-alias\ ca\ \-gencert\ \-ext\ san=dns:ca1\ |</span>
<span class="line-added"> 343 \ \ \ \ keytool\ \-alias\ ca1\ \-importcert</span>
<span class="line-added"> 344 </span>
<span class="line-added"> 345 keytool\ \-alias\ ca2\ \-certreq\ |</span>
<span class="line-added"> 346 \ \ \ \ keytool\ \-alias\ ca1\ \-gencert\ \-ext\ san=dns:ca2\ |</span>
<span class="line-added"> 347 \ \ \ \ keytool\ \-alias\ ca2\ \-importcert</span>
<span class="line-added"> 348 \f[R]</span>
<span class="line-added"> 349 .fi</span>
<span class="line-added"> 350 .PP</span>
<span class="line-added"> 351 The following command creates the certificate \f[CB]e1\f[R] and stores it</span>
<span class="line-added"> 352 in the \f[CB]e1.cert\f[R] file, which is signed by \f[CB]ca2\f[R].</span>
<span class="line-added"> 353 As a result, \f[CB]e1\f[R] should contain \f[CB]ca\f[R], \f[CB]ca1\f[R], and</span>
<span class="line-added"> 354 \f[CB]ca2\f[R] in its certificate chain:</span>
<span class="line-added"> 355 .RS</span>
<span class="line-added"> 356 .PP</span>
<span class="line-added"> 357 \f[CB]keytool\ \-alias\ e1\ \-certreq\ |\ keytool\ \-alias\ ca2\ \-gencert\ &gt;\ e1.cert\f[R]</span>
<span class="line-added"> 358 .RE</span>
<span class="line-added"> 359 .RE</span>
<span class="line-added"> 360 .TP</span>
<span class="line-added"> 361 .B \f[CB]\-genkeypair\f[R]</span>
<span class="line-added"> 362 The following are the available options for the \f[CB]\-genkeypair\f[R]</span>
<span class="line-added"> 363 command:</span>
<span class="line-added"> 364 .RS</span>
<span class="line-added"> 365 .IP \[bu] 2</span>
<span class="line-added"> 366 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 367 .IP \[bu] 2</span>
<span class="line-added"> 368 \f[CB]\-keyalg\f[R] \f[I]alg\f[R]: Key algorithm name</span>
<span class="line-added"> 369 .IP \[bu] 2</span>
<span class="line-added"> 370 {\f[CB]\-keysize\f[R] \f[I]size\f[R]}: Key bit size</span>
<span class="line-added"> 371 .IP \[bu] 2</span>
<span class="line-added"> 372 {\f[CB]\-groupname\f[R] \f[I]name\f[R]}: Group name.</span>
<span class="line-added"> 373 For example, an Elliptic Curve name.</span>
<span class="line-added"> 374 .IP \[bu] 2</span>
<span class="line-added"> 375 {\f[CB]\-sigalg\f[R] \f[I]alg\f[R]}: Signature algorithm name</span>
<span class="line-added"> 376 .IP \[bu] 2</span>
<span class="line-added"> 377 [\f[CB]\-dname\f[R] \f[I]name\f[R]]: Distinguished name</span>
<span class="line-added"> 378 .IP \[bu] 2</span>
<span class="line-added"> 379 {\f[CB]\-startdate\f[R] \f[I]date\f[R]}: Certificate validity start date</span>
<span class="line-added"> 380 and time</span>
<span class="line-added"> 381 .IP \[bu] 2</span>
<span class="line-added"> 382 {\f[CB]\-ext\f[R] \f[I]value\f[R]}*: X.509 extension</span>
<span class="line-added"> 383 .IP \[bu] 2</span>
<span class="line-added"> 384 {\f[CB]\-validity\f[R] \f[I]days\f[R]}: Validity number of days</span>
<span class="line-added"> 385 .IP \[bu] 2</span>
<span class="line-added"> 386 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-added"> 387 .IP \[bu] 2</span>
<span class="line-added"> 388 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 389 .IP \[bu] 2</span>
<span class="line-added"> 390 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 391 .IP \[bu] 2</span>
<span class="line-added"> 392 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 393 .IP \[bu] 2</span>
<span class="line-added"> 394 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 395 .IP \[bu] 2</span>
<span class="line-added"> 396 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 397 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 398 an optional configure argument.</span>
<span class="line-added"> 399 .IP \[bu] 2</span>
<span class="line-added"> 400 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 401 \f[I]arg\f[R]] }: Add security provider by fully qualified class name</span>
<span class="line-added"> 402 with an optional configure argument.</span>
<span class="line-added"> 403 .IP \[bu] 2</span>
<span class="line-added"> 404 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 405 .IP \[bu] 2</span>
<span class="line-added"> 406 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 407 .IP \[bu] 2</span>
<span class="line-added"> 408 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added"> 409 .PP</span>
<span class="line-added"> 410 Use the \f[CB]\-genkeypair\f[R] command to generate a key pair (a public</span>
<span class="line-added"> 411 key and associated private key).</span>
<span class="line-added"> 412 Wraps the public key in an X.509 v3 self\-signed certificate, which is</span>
<span class="line-added"> 413 stored as a single\-element certificate chain.</span>
<span class="line-added"> 414 This certificate chain and the private key are stored in a new keystore</span>
<span class="line-added"> 415 entry that is identified by its alias.</span>
<span class="line-added"> 416 .PP</span>
<span class="line-added"> 417 The \f[CB]\-keyalg\f[R] value specifies the algorithm to be used to</span>
<span class="line-added"> 418 generate the key pair, and the \f[CB]\-keysize\f[R] value specifies the</span>
<span class="line-added"> 419 size of each key to be generated.</span>
<span class="line-added"> 420 The \f[CB]\-sigalg\f[R] value specifies the algorithm that should be used</span>
<span class="line-added"> 421 to sign the self\-signed certificate.</span>
<span class="line-added"> 422 This algorithm must be compatible with the \f[CB]\-keyalg\f[R] value.</span>
<span class="line-added"> 423 .PP</span>
<span class="line-added"> 424 The \f[CB]\-groupname\f[R] value specifies the named group (for example,</span>
<span class="line-added"> 425 the standard or predefined name of an Elliptic Curve) of the key to be</span>
<span class="line-added"> 426 generated.</span>
<span class="line-added"> 427 Only one of \f[CB]\-groupname\f[R] and \f[CB]\-keysize\f[R] can be</span>
<span class="line-added"> 428 specified.</span>
<span class="line-added"> 429 .PP</span>
<span class="line-added"> 430 The \f[CB]\-dname\f[R] value specifies the X.500 Distinguished Name to be</span>
<span class="line-added"> 431 associated with the value of \f[CB]\-alias\f[R], and is used as the issuer</span>
<span class="line-added"> 432 and subject fields in the self\-signed certificate.</span>
<span class="line-added"> 433 If a distinguished name is not provided at the command line, then the</span>
<span class="line-added"> 434 user is prompted for one.</span>
<span class="line-added"> 435 .PP</span>
<span class="line-added"> 436 The value of \f[CB]\-keypass\f[R] is a password used to protect the</span>
<span class="line-added"> 437 private key of the generated key pair.</span>
<span class="line-added"> 438 If a password is not provided, then the user is prompted for it.</span>
<span class="line-added"> 439 If you press the \f[B]Return\f[R] key at the prompt, then the key</span>
<span class="line-added"> 440 password is set to the same password as the keystore password.</span>
<span class="line-added"> 441 The \f[CB]\-keypass\f[R] value must have at least six characters.</span>
<span class="line-added"> 442 .PP</span>
<span class="line-added"> 443 The value of \f[CB]\-startdate\f[R] specifies the issue time of the</span>
<span class="line-added"> 444 certificate, also known as the &quot;Not Before&quot; value of the X.509</span>
<span class="line-added"> 445 certificate\[aq]s Validity field.</span>
<span class="line-added"> 446 .PP</span>
<span class="line-added"> 447 The option value can be set in one of these two forms:</span>
<span class="line-added"> 448 .PP</span>
<span class="line-added"> 449 ([\f[CB]+\-\f[R]]\f[I]nnn\f[R][\f[CB]ymdHMS\f[R]])+</span>
<span class="line-added"> 450 .PP</span>
<span class="line-added"> 451 [\f[I]yyyy\f[R]\f[CB]/\f[R]\f[I]mm\f[R]\f[CB]/\f[R]\f[I]dd\f[R]]</span>
<span class="line-added"> 452 [\f[I]HH\f[R]\f[CB]:\f[R]\f[I]MM\f[R]\f[CB]:\f[R]\f[I]SS\f[R]]</span>
<span class="line-added"> 453 .PP</span>
<span class="line-added"> 454 With the first form, the issue time is shifted by the specified value</span>
<span class="line-added"> 455 from the current time.</span>
<span class="line-added"> 456 The value is a concatenation of a sequence of subvalues.</span>
<span class="line-added"> 457 Inside each subvalue, the plus sign (+) means shift forward, and the</span>
<span class="line-added"> 458 minus sign (\-) means shift backward.</span>
<span class="line-added"> 459 The time to be shifted is \f[I]nnn\f[R] units of years, months, days,</span>
<span class="line-added"> 460 hours, minutes, or seconds (denoted by a single character of \f[CB]y\f[R],</span>
<span class="line-added"> 461 \f[CB]m\f[R], \f[CB]d\f[R], \f[CB]H\f[R], \f[CB]M\f[R], or \f[CB]S\f[R]</span>
<span class="line-added"> 462 respectively).</span>
<span class="line-added"> 463 The exact value of the issue time is calculated by using the</span>
<span class="line-added"> 464 \f[CB]java.util.GregorianCalendar.add(int\ field,\ int\ amount)\f[R]</span>
<span class="line-added"> 465 method on each subvalue, from left to right.</span>
<span class="line-added"> 466 For example, the issue time can be specified by:</span>
<span class="line-added"> 467 .IP</span>
<span class="line-added"> 468 .nf</span>
<span class="line-added"> 469 \f[CB]</span>
<span class="line-added"> 470 Calendar\ c\ =\ new\ GregorianCalendar();</span>
<span class="line-added"> 471 c.add(Calendar.YEAR,\ \-1);</span>
<span class="line-added"> 472 c.add(Calendar.MONTH,\ 1);</span>
<span class="line-added"> 473 c.add(Calendar.DATE,\ \-1);</span>
<span class="line-added"> 474 return\ c.getTime()</span>
<span class="line-added"> 475 \f[R]</span>
<span class="line-added"> 476 .fi</span>
<span class="line-added"> 477 .PP</span>
<span class="line-added"> 478 With the second form, the user sets the exact issue time in two parts,</span>
<span class="line-added"> 479 year/month/day and hour:minute:second (using the local time zone).</span>
<span class="line-added"> 480 The user can provide only one part, which means the other part is the</span>
<span class="line-added"> 481 same as the current date (or time).</span>
<span class="line-added"> 482 The user must provide the exact number of digits shown in the format</span>
<span class="line-added"> 483 definition (padding with 0 when shorter).</span>
<span class="line-added"> 484 When both date and time are provided, there is one (and only one) space</span>
<span class="line-added"> 485 character between the two parts.</span>
<span class="line-added"> 486 The hour should always be provided in 24\-hour format.</span>
<span class="line-added"> 487 .PP</span>
<span class="line-added"> 488 When the option isn\[aq]t provided, the start date is the current time.</span>
<span class="line-added"> 489 The option can only be provided one time.</span>
<span class="line-added"> 490 .PP</span>
<span class="line-added"> 491 The value of \f[I]date\f[R] specifies the number of days (starting at the</span>
<span class="line-added"> 492 date specified by \f[CB]\-startdate\f[R], or the current date when</span>
<span class="line-added"> 493 \f[CB]\-startdate\f[R] isn\[aq]t specified) for which the certificate</span>
<span class="line-added"> 494 should be considered valid.</span>
<span class="line-added"> 495 .RE</span>
<span class="line-added"> 496 .TP</span>
<span class="line-added"> 497 .B \f[CB]\-genseckey\f[R]</span>
<span class="line-added"> 498 The following are the available options for the \f[CB]\-genseckey\f[R]</span>
<span class="line-added"> 499 command:</span>
<span class="line-added"> 500 .RS</span>
<span class="line-added"> 501 .IP \[bu] 2</span>
<span class="line-added"> 502 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 503 .IP \[bu] 2</span>
<span class="line-added"> 504 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-added"> 505 .IP \[bu] 2</span>
<span class="line-added"> 506 \f[CB]\-keyalg\f[R] \f[I]alg\f[R]: Key algorithm name</span>
<span class="line-added"> 507 .IP \[bu] 2</span>
<span class="line-added"> 508 {\f[CB]\-keysize\f[R] \f[I]size\f[R]}: Key bit size</span>
<span class="line-added"> 509 .IP \[bu] 2</span>
<span class="line-added"> 510 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 511 .IP \[bu] 2</span>
<span class="line-added"> 512 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 513 .IP \[bu] 2</span>
<span class="line-added"> 514 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 515 .IP \[bu] 2</span>
<span class="line-added"> 516 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 517 .IP \[bu] 2</span>
<span class="line-added"> 518 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 519 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 520 an optional configure argument.</span>
<span class="line-added"> 521 .IP \[bu] 2</span>
<span class="line-added"> 522 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 523 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added"> 524 an optional configure argument.</span>
<span class="line-added"> 525 .IP \[bu] 2</span>
<span class="line-added"> 526 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 527 .IP \[bu] 2</span>
<span class="line-added"> 528 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 529 .IP \[bu] 2</span>
<span class="line-added"> 530 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added"> 531 .PP</span>
<span class="line-added"> 532 Use the \f[CB]\-genseckey\f[R] command to generate a secret key and store</span>
<span class="line-added"> 533 it in a new \f[CB]KeyStore.SecretKeyEntry\f[R] identified by</span>
<span class="line-added"> 534 \f[CB]alias\f[R].</span>
<span class="line-added"> 535 .PP</span>
<span class="line-added"> 536 The value of \f[CB]\-keyalg\f[R] specifies the algorithm to be used to</span>
<span class="line-added"> 537 generate the secret key, and the value of \f[CB]\-keysize\f[R] specifies</span>
<span class="line-added"> 538 the size of the key that is generated.</span>
<span class="line-added"> 539 The \f[CB]\-keypass\f[R] value is a password that protects the secret key.</span>
<span class="line-added"> 540 If a password is not provided, then the user is prompted for it.</span>
<span class="line-added"> 541 If you press the \f[B]Return\f[R] key at the prompt, then the key</span>
<span class="line-added"> 542 password is set to the same password that is used for the</span>
<span class="line-added"> 543 \f[CB]\-keystore\f[R].</span>
<span class="line-added"> 544 The \f[CB]\-keypass\f[R] value must contain at least six characters.</span>
<span class="line-added"> 545 .RE</span>
<span class="line-added"> 546 .TP</span>
<span class="line-added"> 547 .B \f[CB]\-importcert\f[R]</span>
<span class="line-added"> 548 The following are the available options for the \f[CB]\-importcert\f[R]</span>
<span class="line-added"> 549 command:</span>
<span class="line-added"> 550 .RS</span>
<span class="line-added"> 551 .IP \[bu] 2</span>
<span class="line-added"> 552 {\f[CB]\-noprompt\f[R]}: Do not prompt</span>
<span class="line-added"> 553 .IP \[bu] 2</span>
<span class="line-added"> 554 {\f[CB]\-trustcacerts\f[R]}: Trust certificates from cacerts</span>
<span class="line-added"> 555 .IP \[bu] 2</span>
<span class="line-added"> 556 {\f[CB]\-protected\f[R]}: Password is provided through protected mechanism</span>
<span class="line-added"> 557 .IP \[bu] 2</span>
<span class="line-added"> 558 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 559 .IP \[bu] 2</span>
<span class="line-added"> 560 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Input file name</span>
<span class="line-added"> 561 .IP \[bu] 2</span>
<span class="line-added"> 562 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-added"> 563 .IP \[bu] 2</span>
<span class="line-added"> 564 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 565 .IP \[bu] 2</span>
<span class="line-added"> 566 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore</span>
<span class="line-added"> 567 .IP \[bu] 2</span>
<span class="line-added"> 568 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 569 .IP \[bu] 2</span>
<span class="line-added"> 570 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 571 .IP \[bu] 2</span>
<span class="line-added"> 572 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 573 .IP \[bu] 2</span>
<span class="line-added"> 574 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 575 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 576 an optional configure argument.</span>
<span class="line-added"> 577 .IP \[bu] 2</span>
<span class="line-added"> 578 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 579 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added"> 580 an optional configure argument.</span>
<span class="line-added"> 581 .IP \[bu] 2</span>
<span class="line-added"> 582 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 583 .IP \[bu] 2</span>
<span class="line-added"> 584 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 585 .PP</span>
<span class="line-added"> 586 Use the \f[CB]\-importcert\f[R] command to read the certificate or</span>
<span class="line-added"> 587 certificate chain (where the latter is supplied in a PKCS#7 formatted</span>
<span class="line-added"> 588 reply or in a sequence of X.509 certificates) from \f[CB]\-file\f[R]</span>
<span class="line-added"> 589 \f[I]file\f[R], and store it in the \f[CB]keystore\f[R] entry identified by</span>
<span class="line-added"> 590 \f[CB]\-alias\f[R].</span>
<span class="line-added"> 591 If \f[CB]\-file\f[R] \f[I]file\f[R] is not specified, then the certificate</span>
<span class="line-added"> 592 or certificate chain is read from \f[CB]stdin\f[R].</span>
<span class="line-added"> 593 .PP</span>
<span class="line-added"> 594 The \f[CB]keytool\f[R] command can import X.509 v1, v2, and v3</span>
<span class="line-added"> 595 certificates, and PKCS#7 formatted certificate chains consisting of</span>
<span class="line-added"> 596 certificates of that type.</span>
<span class="line-added"> 597 The data to be imported must be provided either in binary encoding</span>
<span class="line-added"> 598 format or in printable encoding format (also known as Base64 encoding)</span>
<span class="line-added"> 599 as defined by the Internet RFC 1421 standard.</span>
<span class="line-added"> 600 In the latter case, the encoding must be bounded at the beginning by a</span>
<span class="line-added"> 601 string that starts with \f[CB]\-\-\-\-\-BEGIN\f[R], and bounded at the end</span>
<span class="line-added"> 602 by a string that starts with \f[CB]\-\-\-\-\-END\f[R].</span>
<span class="line-added"> 603 .PP</span>
<span class="line-added"> 604 You import a certificate for two reasons: To add it to the list of</span>
<span class="line-added"> 605 trusted certificates, and to import a certificate reply received from a</span>
<span class="line-added"> 606 certificate authority (CA) as the result of submitting a Certificate</span>
<span class="line-added"> 607 Signing Request (CSR) to that CA.</span>
<span class="line-added"> 608 See the \f[CB]\-certreq\f[R] command in \f[B]Commands for Generating a</span>
<span class="line-added"> 609 Certificate Request\f[R].</span>
<span class="line-added"> 610 .PP</span>
<span class="line-added"> 611 The type of import is indicated by the value of the \f[CB]\-alias\f[R]</span>
<span class="line-added"> 612 option.</span>
<span class="line-added"> 613 If the alias doesn\[aq]t point to a key entry, then the \f[CB]keytool\f[R]</span>
<span class="line-added"> 614 command assumes you are adding a trusted certificate entry.</span>
<span class="line-added"> 615 In this case, the alias shouldn\[aq]t already exist in the keystore.</span>
<span class="line-added"> 616 If the alias does exist, then the \f[CB]keytool\f[R] command outputs an</span>
<span class="line-added"> 617 error because a trusted certificate already exists for that alias, and</span>
<span class="line-added"> 618 doesn\[aq]t import the certificate.</span>
<span class="line-added"> 619 If \f[CB]\-alias\f[R] points to a key entry, then the \f[CB]keytool\f[R]</span>
<span class="line-added"> 620 command assumes that you\[aq]re importing a certificate reply.</span>
<span class="line-added"> 621 .RE</span>
<span class="line-added"> 622 .TP</span>
<span class="line-added"> 623 .B \f[CB]\-importpass\f[R]</span>
<span class="line-added"> 624 The following are the available options for the \f[CB]\-importpass\f[R]</span>
<span class="line-added"> 625 command:</span>
<span class="line-added"> 626 .RS</span>
<span class="line-added"> 627 .IP \[bu] 2</span>
<span class="line-added"> 628 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 629 .IP \[bu] 2</span>
<span class="line-added"> 630 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-added"> 631 .IP \[bu] 2</span>
<span class="line-added"> 632 {\f[CB]\-keyalg\f[R] \f[I]alg\f[R]}: Key algorithm name</span>
<span class="line-added"> 633 .IP \[bu] 2</span>
<span class="line-added"> 634 {\f[CB]\-keysize\f[R] \f[I]size\f[R]}: Key bit size</span>
<span class="line-added"> 635 .IP \[bu] 2</span>
<span class="line-added"> 636 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 637 .IP \[bu] 2</span>
<span class="line-added"> 638 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 639 .IP \[bu] 2</span>
<span class="line-added"> 640 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 641 .IP \[bu] 2</span>
<span class="line-added"> 642 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 643 .IP \[bu] 2</span>
<span class="line-added"> 644 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 645 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 646 an optional configure argument.</span>
<span class="line-added"> 647 .IP \[bu] 2</span>
<span class="line-added"> 648 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 649 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added"> 650 an optional configure argument.</span>
<span class="line-added"> 651 .IP \[bu] 2</span>
<span class="line-added"> 652 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 653 .IP \[bu] 2</span>
<span class="line-added"> 654 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 655 .IP \[bu] 2</span>
<span class="line-added"> 656 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added"> 657 .PP</span>
<span class="line-added"> 658 Use the \f[CB]\-importpass\f[R] command to imports a passphrase and store</span>
<span class="line-added"> 659 it in a new \f[CB]KeyStore.SecretKeyEntry\f[R] identified by</span>
<span class="line-added"> 660 \f[CB]\-alias\f[R].</span>
<span class="line-added"> 661 The passphrase may be supplied via the standard input stream; otherwise</span>
<span class="line-added"> 662 the user is prompted for it.</span>
<span class="line-added"> 663 The \f[CB]\-keypass\f[R] option provides a password to protect the</span>
<span class="line-added"> 664 imported passphrase.</span>
<span class="line-added"> 665 If a password is not provided, then the user is prompted for it.</span>
<span class="line-added"> 666 If you press the \f[B]Return\f[R] key at the prompt, then the key</span>
<span class="line-added"> 667 password is set to the same password as that used for the</span>
<span class="line-added"> 668 \f[CB]keystore\f[R].</span>
<span class="line-added"> 669 The \f[CB]\-keypass\f[R] value must contain at least six characters.</span>
<span class="line-added"> 670 .RE</span>
<span class="line-added"> 671 .SH COMMANDS FOR IMPORTING CONTENTS FROM ANOTHER KEYSTORE</span>
<span class="line-added"> 672 .TP</span>
<span class="line-added"> 673 .B \f[CB]\-importkeystore\f[R]</span>
<span class="line-added"> 674 The following are the available options for the</span>
<span class="line-added"> 675 \f[CB]\-importkeystore\f[R] command:</span>
<span class="line-added"> 676 .RS</span>
<span class="line-added"> 677 .IP \[bu] 2</span>
<span class="line-added"> 678 \f[CB]\-srckeystore\f[R] \f[I]keystore\f[R]: Source keystore name</span>
<span class="line-added"> 679 .IP \[bu] 2</span>
<span class="line-added"> 680 {\f[CB]\-destkeystore\f[R] \f[I]keystore\f[R]}: Destination keystore name</span>
<span class="line-added"> 681 .IP \[bu] 2</span>
<span class="line-added"> 682 {\f[CB]\-srcstoretype\f[R] \f[I]type\f[R]}: Source keystore type</span>
<span class="line-added"> 683 .IP \[bu] 2</span>
<span class="line-added"> 684 {\f[CB]\-deststoretype\f[R] \f[I]type\f[R]}: Destination keystore type</span>
<span class="line-added"> 685 .IP \[bu] 2</span>
<span class="line-added"> 686 [\f[CB]\-srcstorepass\f[R] \f[I]arg\f[R]]: Source keystore password</span>
<span class="line-added"> 687 .IP \[bu] 2</span>
<span class="line-added"> 688 [\f[CB]\-deststorepass\f[R] \f[I]arg\f[R]]: Destination keystore password</span>
<span class="line-added"> 689 .IP \[bu] 2</span>
<span class="line-added"> 690 {\f[CB]\-srcprotected\f[R]}: Source keystore password protected</span>
<span class="line-added"> 691 .IP \[bu] 2</span>
<span class="line-added"> 692 {\f[CB]\-destprotected\f[R]}: Destination keystore password protected</span>
<span class="line-added"> 693 .IP \[bu] 2</span>
<span class="line-added"> 694 {\f[CB]\-srcprovidername\f[R] \f[I]name\f[R]}: Source keystore provider</span>
<span class="line-added"> 695 name</span>
<span class="line-added"> 696 .IP \[bu] 2</span>
<span class="line-added"> 697 {\f[CB]\-destprovidername\f[R] \f[I]name\f[R]}: Destination keystore</span>
<span class="line-added"> 698 provider name</span>
<span class="line-added"> 699 .IP \[bu] 2</span>
<span class="line-added"> 700 {\f[CB]\-srcalias\f[R] \f[I]alias\f[R]}: Source alias</span>
<span class="line-added"> 701 .IP \[bu] 2</span>
<span class="line-added"> 702 {\f[CB]\-destalias\f[R] \f[I]alias\f[R]}: Destination alias</span>
<span class="line-added"> 703 .IP \[bu] 2</span>
<span class="line-added"> 704 [\f[CB]\-srckeypass\f[R] \f[I]arg\f[R]]: Source key password</span>
<span class="line-added"> 705 .IP \[bu] 2</span>
<span class="line-added"> 706 [\f[CB]\-destkeypass\f[R] \f[I]arg\f[R]]: Destination key password</span>
<span class="line-added"> 707 .IP \[bu] 2</span>
<span class="line-added"> 708 {\f[CB]\-noprompt\f[R]}: Do not prompt</span>
<span class="line-added"> 709 .IP \[bu] 2</span>
<span class="line-added"> 710 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 711 \f[I]arg\f[R]]: Add security provider by name (such as SunPKCS11) with an</span>
<span class="line-added"> 712 optional configure argument.</span>
<span class="line-added"> 713 .IP \[bu] 2</span>
<span class="line-added"> 714 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 715 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added"> 716 an optional configure argument</span>
<span class="line-added"> 717 .IP \[bu] 2</span>
<span class="line-added"> 718 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 719 .IP \[bu] 2</span>
<span class="line-added"> 720 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 721 .PP</span>
<span class="line-added"> 722 \f[B]Note:\f[R]</span>
<span class="line-added"> 723 .PP</span>
<span class="line-added"> 724 This is the first line of all options:</span>
<span class="line-added"> 725 .RS</span>
<span class="line-added"> 726 .PP</span>
<span class="line-added"> 727 \f[CB]\-srckeystore\f[R] \f[I]keystore\f[R] \f[CB]\-destkeystore\f[R]</span>
<span class="line-added"> 728 \f[I]keystore\f[R]</span>
<span class="line-added"> 729 .RE</span>
<span class="line-added"> 730 .PP</span>
<span class="line-added"> 731 Use the \f[CB]\-importkeystore\f[R] command to import a single entry or</span>
<span class="line-added"> 732 all entries from a source keystore to a destination keystore.</span>
<span class="line-added"> 733 .PP</span>
<span class="line-added"> 734 \f[B]Note:\f[R]</span>
<span class="line-added"> 735 .PP</span>
<span class="line-added"> 736 If you do not specify \f[CB]\-destkeystore\f[R] when using the</span>
<span class="line-added"> 737 \f[CB]keytool\ \-importkeystore\f[R] command, then the default keystore</span>
<span class="line-added"> 738 used is \f[CB]$HOME/.keystore\f[R].</span>
<span class="line-added"> 739 .PP</span>
<span class="line-added"> 740 When the \f[CB]\-srcalias\f[R] option is provided, the command imports the</span>
<span class="line-added"> 741 single entry identified by the alias to the destination keystore.</span>
<span class="line-added"> 742 If a destination alias isn\[aq]t provided with \f[CB]\-destalias\f[R],</span>
<span class="line-added"> 743 then \f[CB]\-srcalias\f[R] is used as the destination alias.</span>
<span class="line-added"> 744 If the source entry is protected by a password, then</span>
<span class="line-added"> 745 \f[CB]\-srckeypass\f[R] is used to recover the entry.</span>
<span class="line-added"> 746 If \f[CB]\-srckeypass\f[R] isn\[aq]t provided, then the \f[CB]keytool\f[R]</span>
<span class="line-added"> 747 command attempts to use \f[CB]\-srcstorepass\f[R] to recover the entry.</span>
<span class="line-added"> 748 If \f[CB]\-srcstorepass\f[R] is not provided or is incorrect, then the</span>
<span class="line-added"> 749 user is prompted for a password.</span>
<span class="line-added"> 750 The destination entry is protected with \f[CB]\-destkeypass\f[R].</span>
<span class="line-added"> 751 If \f[CB]\-destkeypass\f[R] isn\[aq]t provided, then the destination entry</span>
<span class="line-added"> 752 is protected with the source entry password.</span>
<span class="line-added"> 753 For example, most third\-party tools require \f[CB]storepass\f[R] and</span>
<span class="line-added"> 754 \f[CB]keypass\f[R] in a PKCS #12 keystore to be the same.</span>
<span class="line-added"> 755 To create a PKCS#12 keystore for these tools, always specify a</span>
<span class="line-added"> 756 \f[CB]\-destkeypass\f[R] that is the same as \f[CB]\-deststorepass\f[R].</span>
<span class="line-added"> 757 .PP</span>
<span class="line-added"> 758 If the \f[CB]\-srcalias\f[R] option isn\[aq]t provided, then all entries</span>
<span class="line-added"> 759 in the source keystore are imported into the destination keystore.</span>
<span class="line-added"> 760 Each destination entry is stored under the alias from the source entry.</span>
<span class="line-added"> 761 If the source entry is protected by a password, then</span>
<span class="line-added"> 762 \f[CB]\-srcstorepass\f[R] is used to recover the entry.</span>
<span class="line-added"> 763 If \f[CB]\-srcstorepass\f[R] is not provided or is incorrect, then the</span>
<span class="line-added"> 764 user is prompted for a password.</span>
<span class="line-added"> 765 If a source keystore entry type isn\[aq]t supported in the destination</span>
<span class="line-added"> 766 keystore, or if an error occurs while storing an entry into the</span>
<span class="line-added"> 767 destination keystore, then the user is prompted either to skip the entry</span>
<span class="line-added"> 768 and continue or to quit.</span>
<span class="line-added"> 769 The destination entry is protected with the source entry password.</span>
<span class="line-added"> 770 .PP</span>
<span class="line-added"> 771 If the destination alias already exists in the destination keystore,</span>
<span class="line-added"> 772 then the user is prompted either to overwrite the entry or to create a</span>
<span class="line-added"> 773 new entry under a different alias name.</span>
<span class="line-added"> 774 .PP</span>
<span class="line-added"> 775 If the \f[CB]\-noprompt\f[R] option is provided, then the user isn\[aq]t</span>
<span class="line-added"> 776 prompted for a new destination alias.</span>
<span class="line-added"> 777 Existing entries are overwritten with the destination alias name.</span>
<span class="line-added"> 778 Entries that can\[aq]t be imported are skipped and a warning is</span>
<span class="line-added"> 779 displayed.</span>
<span class="line-added"> 780 .RE</span>
<span class="line-added"> 781 .SH COMMANDS FOR GENERATING A CERTIFICATE REQUEST</span>
<span class="line-added"> 782 .TP</span>
<span class="line-added"> 783 .B \f[CB]\-certreq\f[R]</span>
<span class="line-added"> 784 The following are the available options for the \f[CB]\-certreq\f[R]</span>
<span class="line-added"> 785 command:</span>
<span class="line-added"> 786 .RS</span>
<span class="line-added"> 787 .IP \[bu] 2</span>
<span class="line-added"> 788 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 789 .IP \[bu] 2</span>
<span class="line-added"> 790 {\f[CB]\-sigalg\f[R] \f[I]alg\f[R]}: Signature algorithm name</span>
<span class="line-added"> 791 .IP \[bu] 2</span>
<span class="line-added"> 792 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Output file name</span>
<span class="line-added"> 793 .IP \[bu] 2</span>
<span class="line-added"> 794 [ \f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-added"> 795 .IP \[bu] 2</span>
<span class="line-added"> 796 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 797 .IP \[bu] 2</span>
<span class="line-added"> 798 {\f[CB]\-dname\f[R] \f[I]name\f[R]}: Distinguished name</span>
<span class="line-added"> 799 .IP \[bu] 2</span>
<span class="line-added"> 800 {\f[CB]\-ext\f[R] \f[I]value\f[R]}: X.509 extension</span>
<span class="line-added"> 801 .IP \[bu] 2</span>
<span class="line-added"> 802 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 803 .IP \[bu] 2</span>
<span class="line-added"> 804 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 805 .IP \[bu] 2</span>
<span class="line-added"> 806 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 807 .IP \[bu] 2</span>
<span class="line-added"> 808 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 809 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 810 an optional configure argument.</span>
<span class="line-added"> 811 .IP \[bu] 2</span>
<span class="line-added"> 812 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 813 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added"> 814 an optional configure argument.</span>
<span class="line-added"> 815 .IP \[bu] 2</span>
<span class="line-added"> 816 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 817 .IP \[bu] 2</span>
<span class="line-added"> 818 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 819 .IP \[bu] 2</span>
<span class="line-added"> 820 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added"> 821 .PP</span>
<span class="line-added"> 822 Use the \f[CB]\-certreq\f[R] command to generate a Certificate Signing</span>
<span class="line-added"> 823 Request (CSR) using the PKCS #10 format.</span>
<span class="line-added"> 824 .PP</span>
<span class="line-added"> 825 A CSR is intended to be sent to a CA.</span>
<span class="line-added"> 826 The CA authenticates the certificate requestor (usually offline) and</span>
<span class="line-added"> 827 returns a certificate or certificate chain to replace the existing</span>
<span class="line-added"> 828 certificate chain (initially a self\-signed certificate) in the</span>
<span class="line-added"> 829 keystore.</span>
<span class="line-added"> 830 .PP</span>
<span class="line-added"> 831 The private key associated with \f[I]alias\f[R] is used to create the</span>
<span class="line-added"> 832 PKCS #10 certificate request.</span>
<span class="line-added"> 833 To access the private key, the correct password must be provided.</span>
<span class="line-added"> 834 If \f[CB]\-keypass\f[R] isn\[aq]t provided at the command line and is</span>
<span class="line-added"> 835 different from the password used to protect the integrity of the</span>
<span class="line-added"> 836 keystore, then the user is prompted for it.</span>
<span class="line-added"> 837 If \f[CB]\-dname\f[R] is provided, then it is used as the subject in the</span>
<span class="line-added"> 838 CSR.</span>
<span class="line-added"> 839 Otherwise, the X.500 Distinguished Name associated with alias is used.</span>
<span class="line-added"> 840 .PP</span>
<span class="line-added"> 841 The \f[CB]\-sigalg\f[R] value specifies the algorithm that should be used</span>
<span class="line-added"> 842 to sign the CSR.</span>
<span class="line-added"> 843 .PP</span>
<span class="line-added"> 844 The CSR is stored in the \f[CB]\-file\f[R] \f[I]file\f[R].</span>
<span class="line-added"> 845 If a file is not specified, then the CSR is output to \f[CB]\-stdout\f[R].</span>
<span class="line-added"> 846 .PP</span>
<span class="line-added"> 847 Use the \f[CB]\-importcert\f[R] command to import the response from the</span>
<span class="line-added"> 848 CA.</span>
<span class="line-added"> 849 .RE</span>
<span class="line-added"> 850 .SH COMMANDS FOR EXPORTING DATA</span>
<span class="line-added"> 851 .TP</span>
<span class="line-added"> 852 .B \f[CB]\-exportcert\f[R]</span>
<span class="line-added"> 853 The following are the available options for the \f[CB]\-exportcert\f[R]</span>
<span class="line-added"> 854 command:</span>
<span class="line-added"> 855 .RS</span>
<span class="line-added"> 856 .IP \[bu] 2</span>
<span class="line-added"> 857 {\f[CB]\-rfc\f[R]}: Output in RFC style</span>
<span class="line-added"> 858 .IP \[bu] 2</span>
<span class="line-added"> 859 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 860 .IP \[bu] 2</span>
<span class="line-added"> 861 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Output file name</span>
<span class="line-added"> 862 .IP \[bu] 2</span>
<span class="line-added"> 863 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 864 .IP \[bu] 2</span>
<span class="line-added"> 865 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore</span>
<span class="line-added"> 866 .IP \[bu] 2</span>
<span class="line-added"> 867 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 868 .IP \[bu] 2</span>
<span class="line-added"> 869 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 870 .IP \[bu] 2</span>
<span class="line-added"> 871 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 872 .IP \[bu] 2</span>
<span class="line-added"> 873 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 874 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 875 an optional configure argument.</span>
<span class="line-added"> 876 .IP \[bu] 2</span>
<span class="line-added"> 877 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 878 \f[I]arg\f[R]] }: Add security provider by fully qualified class name</span>
<span class="line-added"> 879 with an optional configure argument.</span>
<span class="line-added"> 880 .IP \[bu] 2</span>
<span class="line-added"> 881 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 882 .IP \[bu] 2</span>
<span class="line-added"> 883 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 884 .IP \[bu] 2</span>
<span class="line-added"> 885 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added"> 886 .PP</span>
<span class="line-added"> 887 Use the \f[CB]\-exportcert\f[R] command to read a certificate from the</span>
<span class="line-added"> 888 keystore that is associated with \f[CB]\-alias\f[R] \f[I]alias\f[R] and</span>
<span class="line-added"> 889 store it in the \f[CB]\-file\f[R] \f[I]file\f[R].</span>
<span class="line-added"> 890 When a file is not specified, the certificate is output to</span>
<span class="line-added"> 891 \f[CB]stdout\f[R].</span>
<span class="line-added"> 892 .PP</span>
<span class="line-added"> 893 By default, the certificate is output in binary encoding.</span>
<span class="line-added"> 894 If the \f[CB]\-rfc\f[R] option is specified, then the output in the</span>
<span class="line-added"> 895 printable encoding format defined by the Internet RFC 1421 Certificate</span>
<span class="line-added"> 896 Encoding Standard.</span>
<span class="line-added"> 897 .PP</span>
<span class="line-added"> 898 If \f[CB]\-alias\f[R] refers to a trusted certificate, then that</span>
<span class="line-added"> 899 certificate is output.</span>
<span class="line-added"> 900 Otherwise, \f[CB]\-alias\f[R] refers to a key entry with an associated</span>
<span class="line-added"> 901 certificate chain.</span>
<span class="line-added"> 902 In that case, the first certificate in the chain is returned.</span>
<span class="line-added"> 903 This certificate authenticates the public key of the entity addressed by</span>
<span class="line-added"> 904 \f[CB]\-alias\f[R].</span>
<span class="line-added"> 905 .RE</span>
<span class="line-added"> 906 .SH COMMANDS FOR DISPLAYING DATA</span>
<span class="line-added"> 907 .TP</span>
<span class="line-added"> 908 .B \f[CB]\-list\f[R]</span>
<span class="line-added"> 909 The following are the available options for the \f[CB]\-list\f[R] command:</span>
<span class="line-added"> 910 .RS</span>
<span class="line-added"> 911 .IP \[bu] 2</span>
<span class="line-added"> 912 {\f[CB]\-rfc\f[R]}: Output in RFC style</span>
<span class="line-added"> 913 .IP \[bu] 2</span>
<span class="line-added"> 914 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added"> 915 .IP \[bu] 2</span>
<span class="line-added"> 916 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added"> 917 .IP \[bu] 2</span>
<span class="line-added"> 918 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore</span>
<span class="line-added"> 919 .IP \[bu] 2</span>
<span class="line-added"> 920 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added"> 921 .IP \[bu] 2</span>
<span class="line-added"> 922 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added"> 923 .IP \[bu] 2</span>
<span class="line-added"> 924 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added"> 925 .IP \[bu] 2</span>
<span class="line-added"> 926 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 927 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added"> 928 an optional configure argument.</span>
<span class="line-added"> 929 .IP \[bu] 2</span>
<span class="line-added"> 930 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added"> 931 \f[I]arg\f[R]] }: Add security provider by fully qualified class name</span>
<span class="line-added"> 932 with an optional configure argument.</span>
<span class="line-added"> 933 .IP \[bu] 2</span>
<span class="line-added"> 934 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added"> 935 .IP \[bu] 2</span>
<span class="line-added"> 936 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 937 .IP \[bu] 2</span>
<span class="line-added"> 938 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added"> 939 .PP</span>
<span class="line-added"> 940 Use the \f[CB]\-list\f[R] command to print the contents of the keystore</span>
<span class="line-added"> 941 entry identified by \f[CB]\-alias\f[R] to \f[CB]stdout\f[R].</span>
<span class="line-added"> 942 If \f[CB]\-alias\f[R] \f[I]alias\f[R] is not specified, then the contents</span>
<span class="line-added"> 943 of the entire keystore are printed.</span>
<span class="line-added"> 944 .PP</span>
<span class="line-added"> 945 By default, this command prints the SHA\-256 fingerprint of a</span>
<span class="line-added"> 946 certificate.</span>
<span class="line-added"> 947 If the \f[CB]\-v\f[R] option is specified, then the certificate is printed</span>
<span class="line-added"> 948 in human\-readable format, with additional information such as the</span>
<span class="line-added"> 949 owner, issuer, serial number, and any extensions.</span>
<span class="line-added"> 950 If the \f[CB]\-rfc\f[R] option is specified, then the certificate contents</span>
<span class="line-added"> 951 are printed by using the printable encoding format, as defined by the</span>
<span class="line-added"> 952 Internet RFC 1421 Certificate Encoding Standard.</span>
<span class="line-added"> 953 .PP</span>
<span class="line-added"> 954 \f[B]Note:\f[R]</span>
<span class="line-added"> 955 .PP</span>
<span class="line-added"> 956 You can\[aq]t specify both \f[CB]\-v\f[R] and \f[CB]\-rfc\f[R] in the same</span>
<span class="line-added"> 957 command.</span>
<span class="line-added"> 958 Otherwise, an error is reported.</span>
<span class="line-added"> 959 .RE</span>
<span class="line-added"> 960 .TP</span>
<span class="line-added"> 961 .B \f[CB]\-printcert\f[R]</span>
<span class="line-added"> 962 The following are the available options for the \f[CB]\-printcert\f[R]</span>
<span class="line-added"> 963 command:</span>
<span class="line-added"> 964 .RS</span>
<span class="line-added"> 965 .IP \[bu] 2</span>
<span class="line-added"> 966 {\f[CB]\-rfc\f[R]}: Output in RFC style</span>
<span class="line-added"> 967 .IP \[bu] 2</span>
<span class="line-added"> 968 {\f[CB]\-file\f[R] \f[I]cert_file\f[R]}: Input file name</span>
<span class="line-added"> 969 .IP \[bu] 2</span>
<span class="line-added"> 970 {\f[CB]\-sslserver\f[R] \f[I]server\f[R][\f[CB]:\f[R]\f[I]port\f[R]]}:: Secure</span>
<span class="line-added"> 971 Sockets Layer (SSL) server host and port</span>
<span class="line-added"> 972 .IP \[bu] 2</span>
<span class="line-added"> 973 {\f[CB]\-jarfile\f[R] \f[I]JAR_file\f[R]}: Signed \f[CB]\&amp;.jar\f[R] file</span>
<span class="line-added"> 974 .IP \[bu] 2</span>
<span class="line-added"> 975 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added"> 976 .PP</span>
<span class="line-added"> 977 Use the \f[CB]\-printcert\f[R] command to read and print the certificate</span>
<span class="line-added"> 978 from \f[CB]\-file\f[R] \f[I]cert_file\f[R], the SSL server located at</span>
<span class="line-added"> 979 \f[CB]\-sslserver\f[R] \f[I]server\f[R][\f[CB]:\f[R]\f[I]port\f[R]], or the</span>
<span class="line-added"> 980 signed JAR file specified by \f[CB]\-jarfile\f[R] \f[I]JAR_file\f[R].</span>
<span class="line-added"> 981 It prints its contents in a human\-readable format.</span>
<span class="line-added"> 982 When a port is not specified, the standard HTTPS port 443 is assumed.</span>
<span class="line-added"> 983 .PP</span>
<span class="line-added"> 984 \f[B]Note:\f[R]</span>
<span class="line-added"> 985 .PP</span>
<span class="line-added"> 986 The \f[CB]\-sslserver\f[R] and \f[CB]\-file\f[R] options can\[aq]t be</span>
<span class="line-added"> 987 provided in the same command.</span>
<span class="line-added"> 988 Otherwise, an error is reported.</span>
<span class="line-added"> 989 If you don\[aq]t specify either option, then the certificate is read</span>
<span class="line-added"> 990 from \f[CB]stdin\f[R].</span>
<span class="line-added"> 991 .PP</span>
<span class="line-added"> 992 When\f[CB]\-rfc\f[R] is specified, the \f[CB]keytool\f[R] command prints the</span>
<span class="line-added"> 993 certificate in PEM mode as defined by the Internet RFC 1421 Certificate</span>
<span class="line-added"> 994 Encoding standard.</span>
<span class="line-added"> 995 .PP</span>
<span class="line-added"> 996 If the certificate is read from a file or \f[CB]stdin\f[R], then it might</span>
<span class="line-added"> 997 be either binary encoded or in printable encoding format, as defined by</span>
<span class="line-added"> 998 the RFC 1421 Certificate Encoding standard.</span>
<span class="line-added"> 999 .PP</span>
<span class="line-added">1000 If the SSL server is behind a firewall, then the</span>
<span class="line-added">1001 \f[CB]\-J\-Dhttps.proxyHost=proxyhost\f[R] and</span>
<span class="line-added">1002 \f[CB]\-J\-Dhttps.proxyPort=proxyport\f[R] options can be specified on the</span>
<span class="line-added">1003 command line for proxy tunneling.</span>
<span class="line-added">1004 .PP</span>
<span class="line-added">1005 \f[B]Note:\f[R]</span>
<span class="line-added">1006 .PP</span>
<span class="line-added">1007 This option can be used independently of a keystore.</span>
<span class="line-added">1008 .RE</span>
<span class="line-added">1009 .TP</span>
<span class="line-added">1010 .B \f[CB]\-printcertreq\f[R]</span>
<span class="line-added">1011 The following are the available options for the \f[CB]\-printcertreq\f[R]</span>
<span class="line-added">1012 command:</span>
<span class="line-added">1013 .RS</span>
<span class="line-added">1014 .IP \[bu] 2</span>
<span class="line-added">1015 {\f[CB]\-file\f[R] \f[I]file\f[R]}: Input file name</span>
<span class="line-added">1016 .IP \[bu] 2</span>
<span class="line-added">1017 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1018 .PP</span>
<span class="line-added">1019 Use the \f[CB]\-printcertreq\f[R] command to print the contents of a PKCS</span>
<span class="line-added">1020 #10 format certificate request, which can be generated by the</span>
<span class="line-added">1021 \f[CB]keytool\ \-certreq\f[R] command.</span>
<span class="line-added">1022 The command reads the request from file.</span>
<span class="line-added">1023 If there is no file, then the request is read from the standard input.</span>
<span class="line-added">1024 .RE</span>
<span class="line-added">1025 .TP</span>
<span class="line-added">1026 .B \f[CB]\-printcrl\f[R]</span>
<span class="line-added">1027 The following are the available options for the \f[CB]\-printcrl\f[R]</span>
<span class="line-added">1028 command:</span>
<span class="line-added">1029 .RS</span>
<span class="line-added">1030 .IP \[bu] 2</span>
<span class="line-added">1031 {\f[CB]\-file\ crl\f[R]}: Input file name</span>
<span class="line-added">1032 .IP \[bu] 2</span>
<span class="line-added">1033 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1034 .PP</span>
<span class="line-added">1035 Use the \f[CB]\-printcrl\f[R] command to read the Certificate Revocation</span>
<span class="line-added">1036 List (CRL) from \f[CB]\-file\ crl\f[R] .</span>
<span class="line-added">1037 A CRL is a list of the digital certificates that were revoked by the CA</span>
<span class="line-added">1038 that issued them.</span>
<span class="line-added">1039 The CA generates the \f[CB]crl\f[R] file.</span>
<span class="line-added">1040 .PP</span>
<span class="line-added">1041 \f[B]Note:\f[R]</span>
<span class="line-added">1042 .PP</span>
<span class="line-added">1043 This option can be used independently of a keystore.</span>
<span class="line-added">1044 .RE</span>
<span class="line-added">1045 .SH COMMANDS FOR MANAGING THE KEYSTORE</span>
<span class="line-added">1046 .TP</span>
<span class="line-added">1047 .B \f[CB]\-storepasswd\f[R]</span>
<span class="line-added">1048 The following are the available options for the \f[CB]\-storepasswd\f[R]</span>
<span class="line-added">1049 command:</span>
<span class="line-added">1050 .RS</span>
<span class="line-added">1051 .IP \[bu] 2</span>
<span class="line-added">1052 [\f[CB]\-new\f[R] \f[I]arg\f[R]]: New password</span>
<span class="line-added">1053 .IP \[bu] 2</span>
<span class="line-added">1054 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added">1055 .IP \[bu] 2</span>
<span class="line-added">1056 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore</span>
<span class="line-added">1057 .IP \[bu] 2</span>
<span class="line-added">1058 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added">1059 .IP \[bu] 2</span>
<span class="line-added">1060 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added">1061 .IP \[bu] 2</span>
<span class="line-added">1062 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added">1063 .IP \[bu] 2</span>
<span class="line-added">1064 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1065 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added">1066 an optional configure argument.</span>
<span class="line-added">1067 .IP \[bu] 2</span>
<span class="line-added">1068 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1069 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added">1070 an optional configure argument.</span>
<span class="line-added">1071 .IP \[bu] 2</span>
<span class="line-added">1072 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added">1073 .IP \[bu] 2</span>
<span class="line-added">1074 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1075 .PP</span>
<span class="line-added">1076 Use the \f[CB]\-storepasswd\f[R] command to change the password used to</span>
<span class="line-added">1077 protect the integrity of the keystore contents.</span>
<span class="line-added">1078 The new password is set by \f[CB]\-new\f[R] \f[I]arg\f[R] and must contain</span>
<span class="line-added">1079 at least six characters.</span>
<span class="line-added">1080 .RE</span>
<span class="line-added">1081 .TP</span>
<span class="line-added">1082 .B \f[CB]\-keypasswd\f[R]</span>
<span class="line-added">1083 The following are the available options for the \f[CB]\-keypasswd\f[R]</span>
<span class="line-added">1084 command:</span>
<span class="line-added">1085 .RS</span>
<span class="line-added">1086 .IP \[bu] 2</span>
<span class="line-added">1087 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added">1088 .IP \[bu] 2</span>
<span class="line-added">1089 [\f[CB]\-keypass\f[R] \f[I]old_keypass\f[R]]: Key password</span>
<span class="line-added">1090 .IP \[bu] 2</span>
<span class="line-added">1091 [\f[CB]\-new\f[R] \f[I]new_keypass\f[R]]: New password</span>
<span class="line-added">1092 .IP \[bu] 2</span>
<span class="line-added">1093 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added">1094 .IP \[bu] 2</span>
<span class="line-added">1095 {\f[CB]\-storepass\f[R] \f[I]arg\f[R]}: Keystore password</span>
<span class="line-added">1096 .IP \[bu] 2</span>
<span class="line-added">1097 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added">1098 .IP \[bu] 2</span>
<span class="line-added">1099 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added">1100 .IP \[bu] 2</span>
<span class="line-added">1101 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1102 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added">1103 an optional configure argument.</span>
<span class="line-added">1104 .IP \[bu] 2</span>
<span class="line-added">1105 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1106 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added">1107 an optional configure argument.</span>
<span class="line-added">1108 .IP \[bu] 2</span>
<span class="line-added">1109 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added">1110 .IP \[bu] 2</span>
<span class="line-added">1111 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1112 .PP</span>
<span class="line-added">1113 Use the \f[CB]\-keypasswd\f[R] command to change the password (under which</span>
<span class="line-added">1114 private/secret keys identified by \f[CB]\-alias\f[R] are protected) from</span>
<span class="line-added">1115 \f[CB]\-keypass\f[R] \f[I]old_keypass\f[R] to \f[CB]\-new\f[R]</span>
<span class="line-added">1116 \f[I]new_keypass\f[R].</span>
<span class="line-added">1117 The password value must contain at least six characters.</span>
<span class="line-added">1118 .PP</span>
<span class="line-added">1119 If the \f[CB]\-keypass\f[R] option isn\[aq]t provided at the command line</span>
<span class="line-added">1120 and the \f[CB]\-keypass\f[R] password is different from the keystore</span>
<span class="line-added">1121 password (\f[CB]\-storepass\f[R] \f[I]arg\f[R]), then the user is prompted</span>
<span class="line-added">1122 for it.</span>
<span class="line-added">1123 .PP</span>
<span class="line-added">1124 If the \f[CB]\-new\f[R] option isn\[aq]t provided at the command line,</span>
<span class="line-added">1125 then the user is prompted for it.</span>
<span class="line-added">1126 .RE</span>
<span class="line-added">1127 .TP</span>
<span class="line-added">1128 .B \f[CB]\-delete\f[R]</span>
<span class="line-added">1129 The following are the available options for the \f[CB]\-delete\f[R]</span>
<span class="line-added">1130 command:</span>
<span class="line-added">1131 .RS</span>
<span class="line-added">1132 .IP \[bu] 2</span>
<span class="line-added">1133 [\f[CB]\-alias\f[R] \f[I]alias\f[R]]: Alias name of the entry to process</span>
<span class="line-added">1134 .IP \[bu] 2</span>
<span class="line-added">1135 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added">1136 .IP \[bu] 2</span>
<span class="line-added">1137 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore</span>
<span class="line-added">1138 .IP \[bu] 2</span>
<span class="line-added">1139 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added">1140 .IP \[bu] 2</span>
<span class="line-added">1141 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added">1142 .IP \[bu] 2</span>
<span class="line-added">1143 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added">1144 .IP \[bu] 2</span>
<span class="line-added">1145 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1146 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added">1147 an optional configure argument.</span>
<span class="line-added">1148 .IP \[bu] 2</span>
<span class="line-added">1149 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1150 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added">1151 an optional configure argument.</span>
<span class="line-added">1152 .IP \[bu] 2</span>
<span class="line-added">1153 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added">1154 .IP \[bu] 2</span>
<span class="line-added">1155 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1156 .IP \[bu] 2</span>
<span class="line-added">1157 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added">1158 .PP</span>
<span class="line-added">1159 Use the \f[CB]\-delete\f[R] command to delete the \f[CB]\-alias\f[R]</span>
<span class="line-added">1160 \f[I]alias\f[R] entry from the keystore.</span>
<span class="line-added">1161 When not provided at the command line, the user is prompted for the</span>
<span class="line-added">1162 \f[CB]alias\f[R].</span>
<span class="line-added">1163 .RE</span>
<span class="line-added">1164 .TP</span>
<span class="line-added">1165 .B \f[CB]\-changealias\f[R]</span>
<span class="line-added">1166 The following are the available options for the \f[CB]\-changealias\f[R]</span>
<span class="line-added">1167 command:</span>
<span class="line-added">1168 .RS</span>
<span class="line-added">1169 .IP \[bu] 2</span>
<span class="line-added">1170 {\f[CB]\-alias\f[R] \f[I]alias\f[R]}: Alias name of the entry to process</span>
<span class="line-added">1171 .IP \[bu] 2</span>
<span class="line-added">1172 [\f[CB]\-destalias\f[R] \f[I]alias\f[R]]: Destination alias</span>
<span class="line-added">1173 .IP \[bu] 2</span>
<span class="line-added">1174 [\f[CB]\-keypass\f[R] \f[I]arg\f[R]]: Key password</span>
<span class="line-added">1175 .IP \[bu] 2</span>
<span class="line-added">1176 {\f[CB]\-keystore\f[R] \f[I]keystore\f[R]}: Keystore name</span>
<span class="line-added">1177 .IP \[bu] 2</span>
<span class="line-added">1178 {\f[CB]\-cacerts\f[R]}: Access the cacerts keystore</span>
<span class="line-added">1179 .IP \[bu] 2</span>
<span class="line-added">1180 [\f[CB]\-storepass\f[R] \f[I]arg\f[R]]: Keystore password</span>
<span class="line-added">1181 .IP \[bu] 2</span>
<span class="line-added">1182 {\f[CB]\-storetype\f[R] \f[I]type\f[R]}: Keystore type</span>
<span class="line-added">1183 .IP \[bu] 2</span>
<span class="line-added">1184 {\f[CB]\-providername\f[R] \f[I]name\f[R]}: Provider name</span>
<span class="line-added">1185 .IP \[bu] 2</span>
<span class="line-added">1186 {\f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1187 \f[I]arg\f[R]]}: Add security provider by name (such as SunPKCS11) with</span>
<span class="line-added">1188 an optional configure argument.</span>
<span class="line-added">1189 .IP \[bu] 2</span>
<span class="line-added">1190 {\f[CB]\-providerclass\f[R] \f[I]class\f[R] [\f[CB]\-providerarg\f[R]</span>
<span class="line-added">1191 \f[I]arg\f[R]]}: Add security provider by fully qualified class name with</span>
<span class="line-added">1192 an optional configure argument.</span>
<span class="line-added">1193 .IP \[bu] 2</span>
<span class="line-added">1194 {\f[CB]\-providerpath\f[R] \f[I]list\f[R]}: Provider classpath</span>
<span class="line-added">1195 .IP \[bu] 2</span>
<span class="line-added">1196 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1197 .IP \[bu] 2</span>
<span class="line-added">1198 {\f[CB]\-protected\f[R]}: Password provided through a protected mechanism</span>
<span class="line-added">1199 .PP</span>
<span class="line-added">1200 Use the \f[CB]\-changealias\f[R] command to move an existing keystore</span>
<span class="line-added">1201 entry from \f[CB]\-alias\f[R] \f[I]alias\f[R] to a new \f[CB]\-destalias\f[R]</span>
<span class="line-added">1202 \f[I]alias\f[R].</span>
<span class="line-added">1203 If a destination alias is not provided, then the command prompts you for</span>
<span class="line-added">1204 one.</span>
<span class="line-added">1205 If the original entry is protected with an entry password, then the</span>
<span class="line-added">1206 password can be supplied with the \f[CB]\-keypass\f[R] option.</span>
<span class="line-added">1207 If a key password is not provided, then the \f[CB]\-storepass\f[R] (if</span>
<span class="line-added">1208 provided) is attempted first.</span>
<span class="line-added">1209 If the attempt fails, then the user is prompted for a password.</span>
<span class="line-added">1210 .RE</span>
<span class="line-added">1211 .SH COMMANDS FOR DISPLAYING SECURITY\-RELATED INFORMATION</span>
<span class="line-added">1212 .TP</span>
<span class="line-added">1213 .B \f[CB]\-showinfo\f[R]</span>
<span class="line-added">1214 The following are the available options for the \f[CB]\-showinfo\f[R]</span>
<span class="line-added">1215 command:</span>
<span class="line-added">1216 .RS</span>
<span class="line-added">1217 .IP \[bu] 2</span>
<span class="line-added">1218 {\f[CB]\-tls\f[R]}: Displays TLS configuration information</span>
<span class="line-added">1219 .IP \[bu] 2</span>
<span class="line-added">1220 {\f[CB]\-v\f[R]}: Verbose output</span>
<span class="line-added">1221 .PP</span>
<span class="line-added">1222 Use the \f[CB]\-showinfo\f[R] command to display various security\-related</span>
<span class="line-added">1223 information.</span>
<span class="line-added">1224 The \f[CB]\-tls\f[R] option displays TLS configurations, such as the list</span>
<span class="line-added">1225 of enabled protocols and cipher suites.</span>
<span class="line-added">1226 .RE</span>
<span class="line-added">1227 .SH COMMANDS FOR DISPLAYING HELP INFORMATION</span>
<span class="line-added">1228 .PP</span>
<span class="line-added">1229 You can use \f[CB]\-\-help\f[R] to display a list of \f[CB]keytool\f[R]</span>
<span class="line-added">1230 commands or to display help information about a specific</span>
<span class="line-added">1231 \f[CB]keytool\f[R] command.</span>
<span class="line-added">1232 .IP \[bu] 2</span>
<span class="line-added">1233 To display a list of \f[CB]keytool\f[R] commands, enter:</span>
<span class="line-added">1234 .RS 2</span>
<span class="line-added">1235 .RS</span>
<span class="line-added">1236 .PP</span>
<span class="line-added">1237 \f[CB]keytool\ \-\-help\f[R]</span>
<span class="line-added">1238 .RE</span>
<span class="line-added">1239 .RE</span>
<span class="line-added">1240 .IP \[bu] 2</span>
<span class="line-added">1241 To display help information about a specific \f[CB]keytool\f[R] command,</span>
<span class="line-added">1242 enter:</span>
<span class="line-added">1243 .RS 2</span>
<span class="line-added">1244 .RS</span>
<span class="line-added">1245 .PP</span>
<span class="line-added">1246 \f[CB]keytool\ \-&lt;command&gt;\ \-\-help\f[R]</span>
<span class="line-added">1247 .RE</span>
<span class="line-added">1248 .RE</span>
<span class="line-added">1249 .SH COMMON COMMAND OPTIONS</span>
<span class="line-added">1250 .PP</span>
<span class="line-added">1251 The \f[CB]\-v\f[R] option can appear for all commands except</span>
<span class="line-added">1252 \f[CB]\-\-help\f[R].</span>
<span class="line-added">1253 When the \f[CB]\-v\f[R] option appears, it signifies verbose mode, which</span>
<span class="line-added">1254 means that more information is provided in the output.</span>
<span class="line-added">1255 .PP</span>
<span class="line-added">1256 The \f[CB]\-J\f[R]\f[I]option\f[R] argument can appear for any command.</span>
<span class="line-added">1257 When the \f[CB]\-J\f[R]\f[I]option\f[R] is used, the specified</span>
<span class="line-added">1258 \f[I]option\f[R] string is passed directly to the Java interpreter.</span>
<span class="line-added">1259 This option doesn\[aq]t contain any spaces.</span>
<span class="line-added">1260 It\[aq]s useful for adjusting the execution environment or memory usage.</span>
<span class="line-added">1261 For a list of possible interpreter options, enter \f[CB]java\ \-h\f[R] or</span>
<span class="line-added">1262 \f[CB]java\ \-X\f[R] at the command line.</span>
1263 .PP
1264 These options can appear for all commands operating on a keystore:
1265 .TP
<span class="line-modified">1266 .B \f[CB]\-storetype\f[R] \f[I]storetype\f[R]</span>
<span class="line-modified">1267 This qualifier specifies the type of keystore to be instantiated.</span>
<span class="line-modified">1268 .RS</span>
<span class="line-added">1269 .RE</span>
1270 .TP
<span class="line-modified">1271 .B \f[CB]\-keystore\f[R] \f[I]keystore\f[R]</span>
<span class="line-modified">1272 The keystore location.</span>
<span class="line-modified">1273 .RS</span>
<span class="line-modified">1274 .PP</span>
<span class="line-modified">1275 If the JKS \f[CB]storetype\f[R] is used and a keystore file doesn\[aq]t</span>
<span class="line-modified">1276 yet exist, then certain \f[CB]keytool\f[R] commands can result in a new</span>
<span class="line-modified">1277 keystore file being created.</span>
<span class="line-added">1278 For example, if \f[CB]keytool\ \-genkeypair\f[R] is called and the</span>
<span class="line-added">1279 \f[CB]\-keystore\f[R] option isn\[aq]t specified, the default keystore</span>
<span class="line-added">1280 file named \f[CB]\&amp;.keystore\f[R] is created in the user\[aq]s home</span>
<span class="line-added">1281 directory if it doesn\[aq]t already exist.</span>
<span class="line-added">1282 Similarly, if the \f[CB]\-keystore\ ks_file\f[R] option is specified but</span>
<span class="line-added">1283 \f[CB]ks_file\f[R] doesn\[aq]t exist, then it is created.</span>
<span class="line-added">1284 For more information on the JKS \f[CB]storetype\f[R], see the</span>
<span class="line-added">1285 \f[B]KeyStore Implementation\f[R] section in \f[B]KeyStore aliases\f[R].</span>
<span class="line-added">1286 .PP</span>
<span class="line-added">1287 Note that the input stream from the \f[CB]\-keystore\f[R] option is passed</span>
<span class="line-added">1288 to the \f[CB]KeyStore.load\f[R] method.</span>
<span class="line-added">1289 If \f[CB]NONE\f[R] is specified as the URL, then a null stream is passed</span>
<span class="line-added">1290 to the \f[CB]KeyStore.load\f[R] method.</span>
<span class="line-added">1291 \f[CB]NONE\f[R] should be specified if the keystore isn\[aq]t file\-based.</span>
<span class="line-added">1292 For example, when the keystore resides on a hardware token device.</span>
<span class="line-added">1293 .RE</span>
1294 .TP
<span class="line-modified">1295 .B \f[CB]\-cacerts\f[R] \f[I]cacerts\f[R]</span>
<span class="line-modified">1296 Operates on the \f[I]cacerts\f[R] keystore .</span>
<span class="line-modified">1297 This option is equivalent to \f[CB]\-keystore\f[R]</span>
<span class="line-modified">1298 \f[I]path_to_cacerts\f[R] \f[CB]\-storetype\f[R] \f[I]type_of_cacerts\f[R].</span>
<span class="line-modified">1299 An error is reported if the \f[CB]\-keystore\f[R] or \f[CB]\-storetype\f[R]</span>
<span class="line-modified">1300 option is used with the \f[CB]\-cacerts\f[R] option.</span>
<span class="line-modified">1301 .RS</span>
<span class="line-modified">1302 .RE</span>












1303 .TP
<span class="line-modified">1304 .B \f[CB]\-storepass\f[R] [\f[CB]:env\f[R] | \f[CB]:file\f[R] ] \f[I]argument\f[R]</span>
<span class="line-modified">1305 The password that is used to protect the integrity of the keystore.</span>
<span class="line-modified">1306 .RS</span>
<span class="line-added">1307 .PP</span>
<span class="line-added">1308 If the modifier \f[CB]env\f[R] or \f[CB]file\f[R] isn\[aq]t specified, then</span>
<span class="line-added">1309 the password has the value \f[I]argument\f[R], which must contain at</span>
<span class="line-added">1310 least six characters.</span>
<span class="line-added">1311 Otherwise, the password is retrieved as follows:</span>
<span class="line-added">1312 .IP \[bu] 2</span>
<span class="line-added">1313 \f[CB]env\f[R]: Retrieve the password from the environment variable named</span>
<span class="line-added">1314 \f[I]argument\f[R].</span>
<span class="line-added">1315 .IP \[bu] 2</span>
<span class="line-added">1316 \f[CB]file\f[R]: Retrieve the password from the file named</span>
<span class="line-added">1317 \f[I]argument\f[R].</span>
<span class="line-added">1318 .PP</span>
<span class="line-added">1319 \f[B]Note:\f[R] All other options that require passwords, such as</span>
<span class="line-added">1320 \f[CB]\-keypass\f[R], \f[CB]\-srckeypass\f[R], \f[CB]\-destkeypass\f[R],</span>
<span class="line-added">1321 \f[CB]\-srcstorepass\f[R], and \f[CB]\-deststorepass\f[R], accept the</span>
<span class="line-added">1322 \f[CB]env\f[R] and \f[CB]file\f[R] modifiers.</span>
<span class="line-added">1323 Remember to separate the password option and the modifier with a colon</span>
<span class="line-added">1324 (:).</span>
<span class="line-added">1325 .PP</span>
<span class="line-added">1326 The password must be provided to all commands that access the keystore</span>
<span class="line-added">1327 contents.</span>
<span class="line-added">1328 For such commands, when the \f[CB]\-storepass\f[R] option isn\[aq]t</span>
<span class="line-added">1329 provided at the command line, the user is prompted for it.</span>
<span class="line-added">1330 .PP</span>
<span class="line-added">1331 When retrieving information from the keystore, the password is optional.</span>
<span class="line-added">1332 If a password is not specified, then the integrity of the retrieved</span>
<span class="line-added">1333 information can\[aq]t be verified and a warning is displayed.</span>
<span class="line-added">1334 .RE</span>
1335 .TP
<span class="line-modified">1336 .B \f[CB]\-providername\f[R] \f[I]name\f[R]</span>
<span class="line-modified">1337 Used to identify a cryptographic service provider\[aq]s name when listed</span>
<span class="line-modified">1338 in the security properties file.</span>
<span class="line-added">1339 .RS</span>
<span class="line-added">1340 .RE</span>
1341 .TP
<span class="line-modified">1342 .B \f[CB]\-addprovider\f[R] \f[I]name\f[R]</span>
<span class="line-modified">1343 Used to add a security provider by name (such as SunPKCS11) .</span>
<span class="line-modified">1344 .RS</span>
<span class="line-added">1345 .RE</span>
1346 .TP
<span class="line-modified">1347 .B \f[CB]\-providerclass\f[R] \f[I]class\f[R]</span>
<span class="line-modified">1348 Used to specify the name of a cryptographic service provider\[aq]s</span>
<span class="line-modified">1349 master class file when the service provider isn\[aq]t listed in the</span>
<span class="line-added">1350 security properties file.</span>
<span class="line-added">1351 .RS</span>
<span class="line-added">1352 .RE</span>
1353 .TP
<span class="line-modified">1354 .B \f[CB]\-providerpath\f[R] \f[I]list\f[R]</span>
<span class="line-modified">1355 Used to specify the provider classpath.</span>
<span class="line-modified">1356 .RS</span>
<span class="line-modified">1357 .RE</span>
<span class="line-modified">1358 .TP</span>
<span class="line-modified">1359 .B \f[CB]\-providerarg\f[R] \f[I]arg\f[R]</span>
<span class="line-modified">1360 Used with the \f[CB]\-addprovider\f[R] or \f[CB]\-providerclass\f[R] option</span>
<span class="line-modified">1361 to represent an optional string input argument for the constructor of</span>
<span class="line-modified">1362 \f[I]class\f[R] name.</span>
<span class="line-modified">1363 .RS</span>
<span class="line-modified">1364 .RE</span>
<span class="line-modified">1365 .TP</span>
<span class="line-modified">1366 .B \f[CB]\-protected=true\f[R]|\f[CB]false\f[R]</span>
<span class="line-modified">1367 Specify this value as \f[CB]true\f[R] when a password must be specified by</span>
<span class="line-modified">1368 way of a protected authentication path, such as a dedicated PIN reader.</span>
<span class="line-modified">1369 Because there are two keystores involved in the</span>
<span class="line-modified">1370 \f[CB]\-importkeystore\f[R] command, the following two options,</span>
<span class="line-modified">1371 \f[CB]\-srcprotected\f[R] and \f[CB]\-destprotected\f[R], are provided for</span>
<span class="line-modified">1372 the source keystore and the destination keystore respectively.</span>
<span class="line-modified">1373 .RS</span>
<span class="line-modified">1374 .RE</span>
<span class="line-modified">1375 .TP</span>
<span class="line-modified">1376 .B \f[CB]\-ext\f[R] {\f[I]name\f[R]{\f[CB]:critical\f[R]} {\f[CB]=\f[R]\f[I]value\f[R]}}</span>
<span class="line-modified">1377 Denotes an X.509 certificate extension.</span>
<span class="line-modified">1378 The option can be used in \f[CB]\-genkeypair\f[R] and \f[CB]\-gencert\f[R]</span>
<span class="line-modified">1379 to embed extensions into the generated certificate, or in</span>
<span class="line-modified">1380 \f[CB]\-certreq\f[R] to show what extensions are requested in the</span>
<span class="line-modified">1381 certificate request.</span>
<span class="line-modified">1382 The option can appear multiple times.</span>
<span class="line-modified">1383 The \f[I]name\f[R] argument can be a supported extension name (see</span>
<span class="line-modified">1384 \f[B]Supported Named Extensions\f[R]) or an arbitrary OID number.</span>
<span class="line-modified">1385 The \f[I]value\f[R] argument, when provided, denotes the argument for the</span>
<span class="line-modified">1386 extension.</span>
<span class="line-modified">1387 When \f[I]value\f[R] is omitted, the default value of the extension or</span>
<span class="line-modified">1388 the extension itself requires no argument.</span>
<span class="line-modified">1389 The \f[CB]:critical\f[R] modifier, when provided, means the</span>
<span class="line-modified">1390 extension\[aq]s \f[CB]isCritical\f[R] attribute is \f[CB]true\f[R];</span>
<span class="line-modified">1391 otherwise, it is \f[CB]false\f[R].</span>
<span class="line-modified">1392 You can use \f[CB]:c\f[R] in place of \f[CB]:critical\f[R].</span>
<span class="line-modified">1393 .RS</span>
<span class="line-modified">1394 .RE</span>
<span class="line-modified">1395 .TP</span>
<span class="line-modified">1396 .B \f[CB]\-conf\f[R] \f[I]file\f[R]</span>
<span class="line-modified">1397 Specifies a pre\-configured options file.</span>
<span class="line-modified">1398 .RS</span>
<span class="line-modified">1399 .RE</span>
<span class="line-modified">1400 .SH PRE\-CONFIGURED OPTIONS FILE</span>
<span class="line-modified">1401 .PP</span>
<span class="line-modified">1402 A pre\-configured options file is a Java properties file that can be</span>
<span class="line-modified">1403 specified with the \f[CB]\-conf\f[R] option.</span>
<span class="line-modified">1404 Each property represents the default option(s) for a keytool command</span>
<span class="line-modified">1405 using &quot;keytool.\f[I]command_name\f[R]&quot; as the property name.</span>
<span class="line-modified">1406 A special property named &quot;keytool.all&quot; represents the default option(s)</span>
<span class="line-modified">1407 applied to all commands.</span>
<span class="line-modified">1408 A property value can include \f[CB]${prop}\f[R] which will be expanded to</span>
<span class="line-modified">1409 the system property associated with it.</span>
<span class="line-modified">1410 If an option value includes white spaces inside, it should be surrounded</span>
<span class="line-modified">1411 by quotation marks (&quot; or \[aq]).</span>
<span class="line-modified">1412 All property names must be in lower case.</span>
<span class="line-modified">1413 .PP</span>
<span class="line-modified">1414 When \f[CB]keytool\f[R] is launched with a pre\-configured options file,</span>
<span class="line-modified">1415 the value for &quot;keytool.all&quot; (if it exists) is prepended to the</span>
<span class="line-modified">1416 \f[CB]keytool\f[R] command line first, with the value for the command name</span>
<span class="line-modified">1417 (if it exists) comes next, and the existing options on the command line</span>
<span class="line-modified">1418 at last.</span>
<span class="line-modified">1419 For a single\-valued option, this allows the property for a specific</span>
<span class="line-modified">1420 command to override the &quot;keytool.all&quot; value, and the value specified on</span>
<span class="line-modified">1421 the command line to override both.</span>
<span class="line-modified">1422 For multiple\-valued options, all of them will be used by</span>
<span class="line-modified">1423 \f[CB]keytool\f[R].</span>
<span class="line-modified">1424 .PP</span>
<span class="line-modified">1425 For example, given the following file named \f[CB]preconfig\f[R]:</span>
<span class="line-modified">1426 .IP</span>
<span class="line-modified">1427 .nf</span>
<span class="line-modified">1428 \f[CB]</span>
<span class="line-modified">1429 \ \ \ \ #\ A\ tiny\ pre\-configured\ options\ file</span>
<span class="line-modified">1430 \ \ \ \ keytool.all\ =\ \-keystore\ ${user.home}/ks</span>
<span class="line-modified">1431 \ \ \ \ keytool.list\ =\ \-v</span>
<span class="line-modified">1432 \ \ \ \ keytool.genkeypair\ =\ \-keyalg\ rsa</span>
<span class="line-modified">1433 \f[R]</span>
<span class="line-modified">1434 .fi</span>
<span class="line-modified">1435 .PP</span>
<span class="line-modified">1436 \f[CB]keytool\ \-conf\ preconfig\ \-list\f[R] is identical to</span>
<span class="line-modified">1437 .RS</span>
<span class="line-modified">1438 .PP</span>
<span class="line-modified">1439 \f[CB]keytool\ \-keystore\ ~/ks\ \-v\ \-list\f[R]</span>
<span class="line-modified">1440 .RE</span>
<span class="line-modified">1441 .PP</span>
<span class="line-modified">1442 \f[CB]keytool\ \-conf\ preconfig\ \-genkeypair\ \-alias\ me\f[R] is</span>
<span class="line-modified">1443 identical to</span>
<span class="line-modified">1444 .RS</span>
<span class="line-modified">1445 .PP</span>
<span class="line-modified">1446 \f[CB]keytool\ \-keystore\ ~/ks\ \-keyalg\ rsa\ \-genkeypair\ \-alias\ me\f[R]</span>
<span class="line-modified">1447 .RE</span>
<span class="line-modified">1448 .PP</span>
<span class="line-modified">1449 \f[CB]keytool\ \-conf\ preconfig\ \-genkeypair\ \-alias\ you\ \-keyalg\ ec\f[R]</span>
<span class="line-modified">1450 is identical to</span>
<span class="line-modified">1451 .RS</span>
<span class="line-modified">1452 .PP</span>
<span class="line-modified">1453 \f[CB]keytool\ \-keystore\ ~/ks\ \-keyalg\ rsa\ \-genkeypair\ \-alias\ you\ \-keyalg\ ec\f[R]</span>
<span class="line-modified">1454 .RE</span>
<span class="line-modified">1455 .PP</span>
<span class="line-modified">1456 which is equivalent to</span>
<span class="line-modified">1457 .RS</span>
<span class="line-modified">1458 .PP</span>
<span class="line-modified">1459 \f[CB]keytool\ \-keystore\ ~/ks\ \-genkeypair\ \-alias\ you\ \-keyalg\ ec\f[R]</span>
<span class="line-modified">1460 .RE</span>
<span class="line-modified">1461 .PP</span>
<span class="line-modified">1462 because \f[CB]\-keyalg\f[R] is a single\-valued option and the \f[CB]ec\f[R]</span>
<span class="line-modified">1463 value specified on the command line overrides the preconfigured options</span>
<span class="line-modified">1464 file.</span>
<span class="line-modified">1465 .SH EXAMPLES OF OPTION VALUES</span>
<span class="line-modified">1466 .PP</span>
<span class="line-modified">1467 The following examples show the defaults for various option values:</span>
<span class="line-modified">1468 .IP</span>
<span class="line-modified">1469 .nf</span>
<span class="line-modified">1470 \f[CB]</span>
<span class="line-modified">1471 \-alias\ &quot;mykey&quot;</span>

























































































































































































































































































1472 
<span class="line-modified">1473 \-keysize</span>
<span class="line-added">1474 \ \ \ \ 2048\ (when\ using\ \-genkeypair\ and\ \-keyalg\ is\ &quot;RSA&quot;)</span>
<span class="line-added">1475 \ \ \ \ 2048\ (when\ using\ \-genkeypair\ and\ \-keyalg\ is\ &quot;DSA&quot;)</span>
<span class="line-added">1476 \ \ \ \ 256\ (when\ using\ \-genkeypair\ and\ \-keyalg\ is\ &quot;EC&quot;)</span>
<span class="line-added">1477 \ \ \ \ 56\ (when\ using\ \-genseckey\ and\ \-keyalg\ is\ &quot;DES&quot;)</span>
<span class="line-added">1478 \ \ \ \ 168\ (when\ using\ \-genseckey\ and\ \-keyalg\ is\ &quot;DESede&quot;)</span>
1479 
<span class="line-modified">1480 \-validity\ 90</span>
1481 
<span class="line-modified">1482 \-keystore\ &lt;the\ file\ named\ .keystore\ in\ the\ user\[aq]s\ home\ directory&gt;</span>
1483 
<span class="line-modified">1484 \-destkeystore\ &lt;the\ file\ named\ .keystore\ in\ the\ user\[aq]s\ home\ directory&gt;</span>
1485 
<span class="line-modified">1486 \-storetype\ &lt;the\ value\ of\ the\ &quot;keystore.type&quot;\ property\ in\ the</span>
<span class="line-added">1487 \ \ \ \ security\ properties\ file,\ which\ is\ returned\ by\ the\ static</span>
<span class="line-added">1488 \ \ \ \ getDefaultType\ method\ in\ java.security.KeyStore&gt;</span>
1489 
<span class="line-modified">1490 \-file</span>
<span class="line-modified">1491 \ \ \ \ stdin\ (if\ reading)</span>
<span class="line-modified">1492 \ \ \ \ stdout\ (if\ writing)</span>




















1493 
<span class="line-modified">1494 \-protected\ false</span>
<span class="line-modified">1495 \f[R]</span>
<span class="line-modified">1496 .fi</span>
<span class="line-modified">1497 .PP</span>
<span class="line-modified">1498 When generating a certificate or a certificate request, the default</span>
<span class="line-modified">1499 signature algorithm (\f[CB]\-sigalg\f[R] option) is derived from the</span>
<span class="line-modified">1500 algorithm of the underlying private key to provide an appropriate level</span>
<span class="line-modified">1501 of security strength as follows:</span>
<span class="line-modified">1502 .PP</span>
<span class="line-modified">1503 .TS</span>
<span class="line-modified">1504 tab(@);</span>
<span class="line-modified">1505 l l l.</span>
<span class="line-modified">1506 T{</span>
<span class="line-modified">1507 keyalg</span>
<span class="line-modified">1508 T}@T{</span>
<span class="line-modified">1509 keysize</span>
<span class="line-modified">1510 T}@T{</span>
<span class="line-modified">1511 default sigalg</span>
<span class="line-modified">1512 T}</span>
<span class="line-modified">1513 _</span>
<span class="line-modified">1514 T{</span>
<span class="line-modified">1515 DSA</span>
<span class="line-modified">1516 T}@T{</span>
<span class="line-modified">1517 any size</span>
<span class="line-modified">1518 T}@T{</span>
<span class="line-modified">1519 SHA256withDSA</span>
<span class="line-modified">1520 T}</span>
<span class="line-modified">1521 T{</span>
<span class="line-modified">1522 RSA</span>
<span class="line-modified">1523 T}@T{</span>
<span class="line-modified">1524 &lt;= 3072</span>
<span class="line-modified">1525 T}@T{</span>
<span class="line-modified">1526 SHA256withRSA</span>
<span class="line-modified">1527 T}</span>
<span class="line-modified">1528 T{</span>
<span class="line-modified">1529 T}@T{</span>
<span class="line-modified">1530 &lt;= 7680</span>
<span class="line-modified">1531 T}@T{</span>
<span class="line-modified">1532 SHA384withRSA</span>
<span class="line-modified">1533 T}</span>
<span class="line-modified">1534 T{</span>
<span class="line-modified">1535 T}@T{</span>
<span class="line-modified">1536 &gt; 7680</span>
<span class="line-modified">1537 T}@T{</span>
<span class="line-modified">1538 SHA512withRSA</span>
<span class="line-modified">1539 T}</span>
<span class="line-modified">1540 T{</span>
<span class="line-modified">1541 EC</span>
<span class="line-modified">1542 T}@T{</span>
<span class="line-modified">1543 &lt; 384</span>
<span class="line-modified">1544 T}@T{</span>
<span class="line-modified">1545 SHA256withECDSA</span>
<span class="line-modified">1546 T}</span>
<span class="line-modified">1547 T{</span>
<span class="line-modified">1548 T}@T{</span>
<span class="line-modified">1549 &lt; 512</span>
<span class="line-modified">1550 T}@T{</span>
<span class="line-modified">1551 SHA384withECDSA</span>
<span class="line-modified">1552 T}</span>
<span class="line-modified">1553 T{</span>
<span class="line-modified">1554 T}@T{</span>
<span class="line-modified">1555 = 512</span>
<span class="line-modified">1556 T}@T{</span>
<span class="line-modified">1557 SHA512withECDSA</span>
<span class="line-modified">1558 T}</span>
<span class="line-modified">1559 .TE</span>
<span class="line-modified">1560 .PP</span>
<span class="line-modified">1561 \f[B]Note:\f[R]</span>
<span class="line-modified">1562 .PP</span>
<span class="line-modified">1563 To improve out of the box security, default key size and signature</span>
<span class="line-modified">1564 algorithm names are periodically updated to stronger values with each</span>
<span class="line-modified">1565 release of the JDK.</span>
<span class="line-modified">1566 If interoperability with older releases of the JDK is important, make</span>
<span class="line-modified">1567 sure that the defaults are supported by those releases.</span>
<span class="line-modified">1568 Alternatively, you can use the \f[CB]\-keysize\f[R] or \f[CB]\-sigalg\f[R]</span>
<span class="line-modified">1569 options to override the default values at your own risk.</span>
<span class="line-modified">1570 .SH SUPPORTED NAMED EXTENSIONS</span>
<span class="line-modified">1571 .PP</span>
<span class="line-modified">1572 The \f[CB]keytool\f[R] command supports these named extensions.</span>
<span class="line-modified">1573 The names aren\[aq]t case\-sensitive.</span>
































































































1574 .TP
<span class="line-modified">1575 .B \f[CB]BC\f[R] or \f[CB]BasicContraints\f[R]</span>
<span class="line-modified">1576 Values:</span>
<span class="line-modified">1577 .RS</span>
<span class="line-modified">1578 .PP</span>
<span class="line-modified">1579 The full form is</span>
<span class="line-modified">1580 \f[CB]ca:\f[R]{\f[CB]true\f[R]|\f[CB]false\f[R]}[\f[CB],pathlen:\f[R]\f[I]len\f[R]]</span>
<span class="line-modified">1581 or \f[I]len\f[R], which is short for</span>
<span class="line-modified">1582 \f[CB]ca:true,pathlen:\f[R]\f[I]len\f[R].</span>
<span class="line-modified">1583 .PP</span>
<span class="line-modified">1584 When \f[I]len\f[R] is omitted, the resulting value is \f[CB]ca:true\f[R].</span>
<span class="line-modified">1585 .RE</span>
<span class="line-modified">1586 .TP</span>
<span class="line-modified">1587 .B \f[CB]KU\f[R] or \f[CB]KeyUsage\f[R]</span>
<span class="line-modified">1588 Values:</span>
<span class="line-modified">1589 .RS</span>
<span class="line-modified">1590 .PP</span>
<span class="line-modified">1591 \f[I]usage\f[R](\f[CB],\f[R] \f[I]usage\f[R])*</span>
<span class="line-modified">1592 .PP</span>
<span class="line-modified">1593 \f[I]usage\f[R] can be one of the following:</span>
<span class="line-modified">1594 .IP \[bu] 2</span>
<span class="line-modified">1595 \f[CB]digitalSignature\f[R]</span>
<span class="line-modified">1596 .IP \[bu] 2</span>
<span class="line-modified">1597 \f[CB]nonRepudiation\f[R] (\f[CB]contentCommitment\f[R])</span>
<span class="line-modified">1598 .IP \[bu] 2</span>
<span class="line-modified">1599 \f[CB]keyEncipherment\f[R]</span>
<span class="line-modified">1600 .IP \[bu] 2</span>
<span class="line-modified">1601 \f[CB]dataEncipherment\f[R]</span>
<span class="line-modified">1602 .IP \[bu] 2</span>
<span class="line-modified">1603 \f[CB]keyAgreement\f[R]</span>
<span class="line-modified">1604 .IP \[bu] 2</span>
<span class="line-modified">1605 \f[CB]keyCertSign\f[R]</span>
<span class="line-modified">1606 .IP \[bu] 2</span>
<span class="line-modified">1607 \f[CB]cRLSign\f[R]</span>
<span class="line-modified">1608 .IP \[bu] 2</span>
<span class="line-modified">1609 \f[CB]encipherOnly\f[R]</span>
<span class="line-modified">1610 .IP \[bu] 2</span>
<span class="line-modified">1611 \f[CB]decipherOnly\f[R]</span>
<span class="line-modified">1612 .PP</span>
<span class="line-modified">1613 Provided there is no ambiguity, the \f[I]usage\f[R] argument can be</span>
<span class="line-modified">1614 abbreviated with the first few letters (such as \f[CB]dig\f[R] for</span>
<span class="line-modified">1615 \f[CB]digitalSignature\f[R]) or in camel\-case style (such as \f[CB]dS\f[R]</span>
<span class="line-modified">1616 for \f[CB]digitalSignature\f[R] or \f[CB]cRLS\f[R] for \f[CB]cRLSign\f[R]).</span>
<span class="line-modified">1617 The \f[I]usage\f[R] values are case\-sensitive.</span>
<span class="line-modified">1618 .RE</span>
<span class="line-modified">1619 .TP</span>
<span class="line-modified">1620 .B \f[CB]EKU\f[R] or \f[CB]ExtendedKeyUsage\f[R]</span>
<span class="line-modified">1621 Values:</span>
<span class="line-modified">1622 .RS</span>
<span class="line-modified">1623 .PP</span>
<span class="line-modified">1624 \f[I]usage\f[R](\f[CB],\f[R] \f[I]usage\f[R])*</span>
<span class="line-modified">1625 .PP</span>
<span class="line-modified">1626 \f[I]usage\f[R] can be one of the following:</span>
<span class="line-modified">1627 .IP \[bu] 2</span>
<span class="line-modified">1628 \f[CB]anyExtendedKeyUsage\f[R]</span>
<span class="line-modified">1629 .IP \[bu] 2</span>
<span class="line-modified">1630 \f[CB]serverAuth\f[R]</span>
<span class="line-modified">1631 .IP \[bu] 2</span>
<span class="line-modified">1632 \f[CB]clientAuth\f[R]</span>
<span class="line-modified">1633 .IP \[bu] 2</span>
<span class="line-modified">1634 \f[CB]codeSigning\f[R]</span>
<span class="line-modified">1635 .IP \[bu] 2</span>
<span class="line-modified">1636 \f[CB]emailProtection\f[R]</span>
<span class="line-modified">1637 .IP \[bu] 2</span>
<span class="line-modified">1638 \f[CB]timeStamping\f[R]</span>
<span class="line-modified">1639 .IP \[bu] 2</span>
<span class="line-modified">1640 \f[CB]OCSPSigning\f[R]</span>
<span class="line-modified">1641 .IP \[bu] 2</span>
<span class="line-modified">1642 Any OID string</span>
<span class="line-modified">1643 .PP</span>
<span class="line-modified">1644 Provided there is no ambiguity, the \f[I]usage\f[R] argument can be</span>
<span class="line-modified">1645 abbreviated with the first few letters or in camel\-case style.</span>
<span class="line-modified">1646 The \f[I]usage\f[R] values are case\-sensitive.</span>
<span class="line-modified">1647 .RE</span>
<span class="line-modified">1648 .TP</span>
<span class="line-modified">1649 .B \f[CB]SAN\f[R] or \f[CB]SubjectAlternativeName\f[R]</span>
<span class="line-modified">1650 Values:</span>
<span class="line-modified">1651 .RS</span>
<span class="line-modified">1652 .PP</span>
<span class="line-modified">1653 \f[I]type\f[R]\f[CB]:\f[R]\f[I]value\f[R](\f[CB],\f[R]</span>
<span class="line-modified">1654 \f[I]type\f[R]\f[CB]:\f[R]\f[I]value\f[R])*</span>
<span class="line-modified">1655 .PP</span>
<span class="line-modified">1656 \f[I]type\f[R] can be one of the following:</span>
<span class="line-modified">1657 .IP \[bu] 2</span>
<span class="line-modified">1658 \f[CB]EMAIL\f[R]</span>
<span class="line-modified">1659 .IP \[bu] 2</span>
<span class="line-modified">1660 \f[CB]URI\f[R]</span>
<span class="line-modified">1661 .IP \[bu] 2</span>
<span class="line-modified">1662 \f[CB]DNS\f[R]</span>
<span class="line-modified">1663 .IP \[bu] 2</span>
<span class="line-modified">1664 \f[CB]IP\f[R]</span>
<span class="line-modified">1665 .IP \[bu] 2</span>
<span class="line-modified">1666 \f[CB]OID\f[R]</span>
<span class="line-modified">1667 .PP</span>
<span class="line-modified">1668 The \f[I]value\f[R] argument is the string format value for the</span>
<span class="line-modified">1669 \f[I]type\f[R].</span>
<span class="line-modified">1670 .RE</span>
<span class="line-modified">1671 .TP</span>
<span class="line-modified">1672 .B \f[CB]IAN\f[R] or \f[CB]IssuerAlternativeName\f[R]</span>
<span class="line-modified">1673 Values:</span>
<span class="line-modified">1674 .RS</span>
<span class="line-modified">1675 .PP</span>
<span class="line-modified">1676 Same as \f[CB]SAN\f[R] or \f[CB]SubjectAlternativeName\f[R].</span>
<span class="line-modified">1677 .RE</span>
<span class="line-modified">1678 .TP</span>
<span class="line-modified">1679 .B \f[CB]SIA\f[R] or \f[CB]SubjectInfoAccess\f[R]</span>
<span class="line-modified">1680 Values:</span>
<span class="line-modified">1681 .RS</span>
<span class="line-modified">1682 .PP</span>
<span class="line-modified">1683 \f[I]method\f[R]\f[CB]:\f[R]\f[I]location\-type\f[R]\f[CB]:\f[R]\f[I]location\-value\f[R](\f[CB],\f[R]</span>
<span class="line-modified">1684 \f[I]method\f[R]\f[CB]:\f[R]\f[I]location\-type\f[R]\f[CB]:\f[R]\f[I]location\-value\f[R])*</span>
<span class="line-modified">1685 .PP</span>
<span class="line-modified">1686 \f[I]method\f[R] can be one of the following:</span>
<span class="line-modified">1687 .IP \[bu] 2</span>
<span class="line-modified">1688 \f[CB]timeStamping\f[R]</span>
<span class="line-modified">1689 .IP \[bu] 2</span>
<span class="line-modified">1690 \f[CB]caRepository\f[R]</span>
<span class="line-modified">1691 .IP \[bu] 2</span>
<span class="line-modified">1692 Any OID</span>
<span class="line-modified">1693 .PP</span>
<span class="line-modified">1694 The \f[I]location\-type\f[R] and \f[I]location\-value\f[R] arguments can</span>
<span class="line-modified">1695 be any \f[I]type\f[R]\f[CB]:\f[R]\f[I]value\f[R] supported by the</span>
<span class="line-modified">1696 \f[CB]SubjectAlternativeName\f[R] extension.</span>
<span class="line-modified">1697 .RE</span>
<span class="line-modified">1698 .TP</span>
<span class="line-modified">1699 .B \f[CB]AIA\f[R] or \f[CB]AuthorityInfoAccess\f[R]</span>
<span class="line-modified">1700 Values:</span>
<span class="line-modified">1701 .RS</span>
<span class="line-modified">1702 .PP</span>
<span class="line-modified">1703 Same as \f[CB]SIA\f[R] or \f[CB]SubjectInfoAccess\f[R].</span>
<span class="line-modified">1704 .PP</span>
<span class="line-modified">1705 The \f[I]method\f[R] argument can be one of the following:</span>
<span class="line-modified">1706 .IP \[bu] 2</span>
<span class="line-modified">1707 \f[CB]ocsp\f[R]</span>
<span class="line-modified">1708 .IP \[bu] 2</span>
<span class="line-modified">1709 \f[CB]caIssuers\f[R]</span>
<span class="line-modified">1710 .IP \[bu] 2</span>
<span class="line-modified">1711 Any OID</span>
<span class="line-modified">1712 .RE</span>
<span class="line-modified">1713 .PP</span>
<span class="line-modified">1714 When \f[I]name\f[R] is OID, the value is the hexadecimal dumped Definite</span>
<span class="line-modified">1715 Encoding Rules (DER) encoding of the \f[CB]extnValue\f[R] for the</span>
<span class="line-modified">1716 extension excluding the OCTET STRING type and length bytes.</span>
<span class="line-modified">1717 Other than standard hexadecimal numbers (0\-9, a\-f, A\-F), any extra</span>
<span class="line-modified">1718 characters are ignored in the HEX string.</span>
<span class="line-modified">1719 Therefore, both 01:02:03:04 and 01020304 are accepted as identical</span>
<span class="line-modified">1720 values.</span>
<span class="line-modified">1721 When there is no value, the extension has an empty value field.</span>
<span class="line-modified">1722 .PP</span>
<span class="line-modified">1723 A special name \f[CB]honored\f[R], used only in \f[CB]\-gencert\f[R],</span>
<span class="line-modified">1724 denotes how the extensions included in the certificate request should be</span>
<span class="line-modified">1725 honored.</span>
<span class="line-modified">1726 The value for this name is a comma\-separated list of \f[CB]all\f[R] (all</span>
<span class="line-modified">1727 requested extensions are honored),</span>
<span class="line-modified">1728 \f[I]name\f[R]{\f[CB]:\f[R][\f[CB]critical\f[R]|\f[CB]non\-critical\f[R]]} (the</span>
<span class="line-modified">1729 named extension is honored, but it uses a different \f[CB]isCritical\f[R]</span>
<span class="line-modified">1730 attribute), and \f[CB]\-name\f[R] (used with \f[CB]all\f[R], denotes an</span>
<span class="line-modified">1731 exception).</span>
<span class="line-modified">1732 Requested extensions aren\[aq]t honored by default.</span>
<span class="line-modified">1733 .PP</span>
<span class="line-modified">1734 If, besides the\f[CB]\-ext\ honored\f[R] option, another named or OID</span>
<span class="line-modified">1735 \f[CB]\-ext\f[R] option is provided, this extension is added to those</span>
<span class="line-modified">1736 already honored.</span>
<span class="line-modified">1737 However, if this name (or OID) also appears in the honored value, then</span>
<span class="line-modified">1738 its value and criticality override that in the request.</span>
<span class="line-modified">1739 If an extension of the same type is provided multiple times through</span>
<span class="line-modified">1740 either a name or an OID, only the last extension is used.</span>
<span class="line-modified">1741 .PP</span>
<span class="line-modified">1742 The \f[CB]subjectKeyIdentifier\f[R] extension is always created.</span>
<span class="line-modified">1743 For non\-self\-signed certificates, the \f[CB]authorityKeyIdentifier\f[R]</span>
<span class="line-modified">1744 is created.</span>
<span class="line-modified">1745 .PP</span>
<span class="line-modified">1746 \f[B]CAUTION:\f[R]</span>
<span class="line-modified">1747 .PP</span>
<span class="line-modified">1748 Users should be aware that some combinations of extensions (and other</span>
<span class="line-modified">1749 certificate fields) may not conform to the Internet standard.</span>
<span class="line-modified">1750 See \f[B]Certificate Conformance Warning\f[R].</span>
<span class="line-modified">1751 .SH EXAMPLES OF TASKS IN CREATING A KEYSTORE</span>
<span class="line-modified">1752 .PP</span>
<span class="line-modified">1753 The following examples describe the sequence actions in creating a</span>
<span class="line-modified">1754 keystore for managing public/private key pairs and certificates from</span>
<span class="line-modified">1755 trusted entities.</span>
<span class="line-modified">1756 .IP \[bu] 2</span>
<span class="line-modified">1757 \f[B]Generating the Key Pair\f[R]</span>
<span class="line-modified">1758 .IP \[bu] 2</span>
<span class="line-modified">1759 \f[B]Requesting a Signed Certificate from a CA\f[R]</span>
<span class="line-modified">1760 .IP \[bu] 2</span>
<span class="line-modified">1761 \f[B]Importing a Certificate for the CA\f[R]</span>
<span class="line-modified">1762 .IP \[bu] 2</span>
<span class="line-modified">1763 \f[B]Importing the Certificate Reply from the CA\f[R]</span>
<span class="line-modified">1764 .IP \[bu] 2</span>
<span class="line-modified">1765 \f[B]Exporting a Certificate That Authenticates the Public Key\f[R]</span>
<span class="line-modified">1766 .IP \[bu] 2</span>
<span class="line-modified">1767 \f[B]Importing the Keystore\f[R]</span>
<span class="line-modified">1768 .IP \[bu] 2</span>
<span class="line-modified">1769 \f[B]Generating Certificates for an SSL Server\f[R]</span>
<span class="line-modified">1770 .SH GENERATING THE KEY PAIR</span>
<span class="line-modified">1771 .PP</span>
<span class="line-modified">1772 Create a keystore and then generate the key pair.</span>
<span class="line-modified">1773 .PP</span>
<span class="line-modified">1774 You can enter the command as a single line such as the following:</span>
<span class="line-modified">1775 .RS</span>
<span class="line-modified">1776 .PP</span>
<span class="line-modified">1777 \f[CB]keytool\ \-genkeypair\ \-dname\ &quot;cn=myname,\ ou=mygroup,\ o=mycompany,\ c=mycountry&quot;\ \-alias\ business\ \-keyalg\ rsa\ \-keypass\f[R]</span>
<span class="line-modified">1778 \f[I]password\f[R]</span>
<span class="line-modified">1779 \f[CB]\-keystore\ /working/mykeystore\ \-storepass\ password\ \-validity\ 180\f[R]</span>
<span class="line-modified">1780 .RE</span>
<span class="line-modified">1781 .PP</span>
<span class="line-modified">1782 The command creates the keystore named \f[CB]mykeystore\f[R] in the</span>
<span class="line-modified">1783 working directory (provided it doesn\[aq]t already exist), and assigns</span>
<span class="line-modified">1784 it the password specified by \f[CB]\-keypass\f[R].</span>
<span class="line-modified">1785 It generates a public/private key pair for the entity whose</span>
<span class="line-modified">1786 distinguished name is \f[CB]myname\f[R], \f[CB]mygroup\f[R],</span>
<span class="line-modified">1787 \f[CB]mycompany\f[R], and a two\-letter country code of</span>
<span class="line-modified">1788 \f[CB]mycountry\f[R].</span>
<span class="line-modified">1789 It uses the RSA key generation algorithm to create the keys; both are</span>
<span class="line-modified">1790 2048 bits</span>
<span class="line-modified">1791 .PP</span>
<span class="line-modified">1792 The command uses the default SHA256withRSA signature algorithm to create</span>
<span class="line-modified">1793 a self\-signed certificate that includes the public key and the</span>
<span class="line-modified">1794 distinguished name information.</span>
<span class="line-modified">1795 The certificate is valid for 180 days, and is associated with the</span>
<span class="line-modified">1796 private key in a keystore entry referred to by</span>
<span class="line-modified">1797 \f[CB]\-alias\ business\f[R].</span>
<span class="line-modified">1798 The private key is assigned the password specified by</span>
<span class="line-modified">1799 \f[CB]\-keypass\f[R].</span>
<span class="line-modified">1800 .PP</span>
<span class="line-modified">1801 The command is significantly shorter when the option defaults are</span>
<span class="line-modified">1802 accepted.</span>
<span class="line-modified">1803 In this case, only \f[CB]\-keyalg\f[R] is required, and the defaults are</span>
<span class="line-modified">1804 used for unspecified options that have default values.</span>
<span class="line-modified">1805 You are prompted for any required values.</span>
<span class="line-modified">1806 You could have the following:</span>
<span class="line-modified">1807 .RS</span>
<span class="line-modified">1808 .PP</span>
<span class="line-modified">1809 \f[CB]keytool\ \-genkeypair\ \-keyalg\ rsa\f[R]</span>
<span class="line-modified">1810 .RE</span>
<span class="line-modified">1811 .PP</span>
<span class="line-modified">1812 In this case, a keystore entry with the alias \f[CB]mykey\f[R] is created,</span>
<span class="line-modified">1813 with a newly generated key pair and a certificate that is valid for 90</span>
<span class="line-modified">1814 days.</span>
<span class="line-modified">1815 This entry is placed in your home directory in a keystore named</span>
<span class="line-modified">1816 \f[CB]\&amp;.keystore\f[R] .</span>
<span class="line-modified">1817 \f[CB]\&amp;.keystore\f[R] is created if it doesn\[aq]t already exist.</span>
<span class="line-modified">1818 You are prompted for the distinguished name information, the keystore</span>
<span class="line-modified">1819 password, and the private key password.</span>
<span class="line-modified">1820 .PP</span>
<span class="line-modified">1821 \f[B]Note:\f[R]</span>
<span class="line-modified">1822 .PP</span>
<span class="line-modified">1823 The rest of the examples assume that you responded to the prompts with</span>
<span class="line-modified">1824 values equal to those specified in the first \f[CB]\-genkeypair\f[R]</span>
<span class="line-modified">1825 command.</span>
<span class="line-modified">1826 For example, a distinguished name of</span>
<span class="line-modified">1827 \f[CB]cn=\f[R]\f[I]myname\f[R]\f[CB],\ ou=\f[R]\f[I]mygroup\f[R]\f[CB],\ o=\f[R]\f[I]mycompany\f[R]\f[CB],\ c=\f[R]\f[I]mycountry\f[R]).</span>
<span class="line-modified">1828 .SH REQUESTING A SIGNED CERTIFICATE FROM A CA</span>
<span class="line-modified">1829 .PP</span>
<span class="line-modified">1830 \f[B]Note:\f[R]</span>
<span class="line-modified">1831 .PP</span>
<span class="line-modified">1832 Generating the key pair created a self\-signed certificate; however, a</span>
<span class="line-modified">1833 certificate is more likely to be trusted by others when it is signed by</span>
<span class="line-modified">1834 a CA.</span>
<span class="line-modified">1835 .PP</span>
<span class="line-modified">1836 To get a CA signature, complete the following process:</span>
<span class="line-modified">1837 .IP &quot;1.&quot; 3</span>
<span class="line-modified">1838 Generate a CSR:</span>
<span class="line-modified">1839 .RS 4</span>
<span class="line-modified">1840 .RS</span>
<span class="line-modified">1841 .PP</span>
<span class="line-modified">1842 \f[CB]keytool\ \-certreq\ \-file\ myname.csr\f[R]</span>
<span class="line-modified">1843 .RE</span>
<span class="line-modified">1844 .PP</span>
<span class="line-modified">1845 This creates a CSR for the entity identified by the default alias</span>
<span class="line-modified">1846 \f[CB]mykey\f[R] and puts the request in the file named</span>
<span class="line-modified">1847 \f[CB]myname.csr\f[R].</span>
<span class="line-modified">1848 .RE</span>
<span class="line-modified">1849 .IP &quot;2.&quot; 3</span>
<span class="line-modified">1850 Submit \f[CB]myname.csr\f[R] to a CA, such as DigiCert.</span>
<span class="line-modified">1851 .PP</span>
<span class="line-modified">1852 The CA authenticates you, the requestor (usually offline), and returns a</span>
<span class="line-modified">1853 certificate, signed by them, authenticating your public key.</span>
<span class="line-modified">1854 In some cases, the CA returns a chain of certificates, each one</span>
<span class="line-modified">1855 authenticating the public key of the signer of the previous certificate</span>
<span class="line-modified">1856 in the chain.</span>
<span class="line-modified">1857 .SH IMPORTING A CERTIFICATE FOR THE CA</span>
<span class="line-modified">1858 .PP</span>
<span class="line-modified">1859 To import a certificate for the CA, complete the following process:</span>
<span class="line-modified">1860 .IP &quot;1.&quot; 3</span>
<span class="line-modified">1861 Before you import the certificate reply from a CA, you need one or more</span>
<span class="line-modified">1862 trusted certificates either in your keystore or in the \f[CB]cacerts\f[R]</span>
<span class="line-modified">1863 keystore file.</span>
<span class="line-modified">1864 See \f[CB]\-importcert\f[R] in \f[B]Commands\f[R].</span>
<span class="line-modified">1865 .RS 4</span>
<span class="line-modified">1866 .IP \[bu] 2</span>
<span class="line-modified">1867 If the certificate reply is a certificate chain, then you need the top</span>
<span class="line-modified">1868 certificate of the chain.</span>
<span class="line-modified">1869 The root CA certificate that authenticates the public key of the CA.</span>
<span class="line-modified">1870 .IP \[bu] 2</span>
<span class="line-modified">1871 If the certificate reply is a single certificate, then you need a</span>
<span class="line-modified">1872 certificate for the issuing CA (the one that signed it).</span>
<span class="line-modified">1873 If that certificate isn\[aq]t self\-signed, then you need a certificate</span>
<span class="line-modified">1874 for its signer, and so on, up to a self\-signed root CA certificate.</span>
<span class="line-modified">1875 .PP</span>
<span class="line-modified">1876 The \f[CB]cacerts\f[R] keystore ships with a set of root certificates</span>
<span class="line-modified">1877 issued by the CAs of \f[B]the Oracle Java Root Certificate program\f[R]</span>
<span class="line-modified">1878 [http://www.oracle.com/technetwork/java/javase/javasecarootcertsprogram\-1876540.html].</span>
<span class="line-modified">1879 If you request a signed certificate from a CA, and a certificate</span>
<span class="line-modified">1880 authenticating that CA\[aq]s public key hasn\[aq]t been added to</span>
<span class="line-modified">1881 \f[CB]cacerts\f[R], then you must import a certificate from that CA as a</span>
<span class="line-modified">1882 trusted certificate.</span>
<span class="line-modified">1883 .PP</span>
<span class="line-modified">1884 A certificate from a CA is usually self\-signed or signed by another CA.</span>
<span class="line-modified">1885 If it is signed by another CA, you need a certificate that authenticates</span>
<span class="line-modified">1886 that CA\[aq]s public key.</span>
<span class="line-modified">1887 .PP</span>
<span class="line-modified">1888 For example, you have obtained a \f[I]X\f[R]\f[CB]\&amp;.cer\f[R] file from a</span>
<span class="line-modified">1889 company that is a CA and the file is supposed to be a self\-signed</span>
<span class="line-modified">1890 certificate that authenticates that CA\[aq]s public key.</span>
<span class="line-modified">1891 Before you import it as a trusted certificate, you should ensure that</span>
<span class="line-modified">1892 the certificate is valid by:</span>
<span class="line-modified">1893 .IP &quot;1.&quot; 3</span>
<span class="line-modified">1894 Viewing it with the \f[CB]keytool\ \-printcert\f[R] command or the</span>
<span class="line-modified">1895 \f[CB]keytool\ \-importcert\f[R] command without using the</span>
<span class="line-modified">1896 \f[CB]\-noprompt\f[R] option.</span>
<span class="line-modified">1897 Make sure that the displayed certificate fingerprints match the expected</span>
<span class="line-modified">1898 fingerprints.</span>
<span class="line-modified">1899 .IP &quot;2.&quot; 3</span>
<span class="line-modified">1900 Calling the person who sent the certificate, and comparing the</span>
<span class="line-modified">1901 fingerprints that you see with the ones that they show or that a secure</span>
<span class="line-modified">1902 public key repository shows.</span>
<span class="line-modified">1903 .PP</span>
<span class="line-modified">1904 Only when the fingerprints are equal is it assured that the certificate</span>
<span class="line-modified">1905 wasn\[aq]t replaced in transit with somebody else\[aq]s certificate</span>
<span class="line-modified">1906 (such as an attacker\[aq]s certificate).</span>
<span class="line-modified">1907 If such an attack takes place, and you didn\[aq]t check the certificate</span>
<span class="line-modified">1908 before you imported it, then you would be trusting anything that the</span>
<span class="line-modified">1909 attacker signed.</span>
<span class="line-modified">1910 .RE</span>
<span class="line-modified">1911 .IP &quot;2.&quot; 3</span>
<span class="line-modified">1912 Replace the self\-signed certificate with a certificate chain, where</span>
<span class="line-modified">1913 each certificate in the chain authenticates the public key of the signer</span>
<span class="line-modified">1914 of the previous certificate in the chain, up to a root CA.</span>
<span class="line-modified">1915 .RS 4</span>
<span class="line-modified">1916 .PP</span>
<span class="line-modified">1917 If you trust that the certificate is valid, then you can add it to your</span>
<span class="line-modified">1918 keystore by entering the following command:</span>
<span class="line-modified">1919 .RS</span>
<span class="line-modified">1920 .PP</span>
<span class="line-modified">1921 \f[CB]keytool\ \-importcert\ \-alias\f[R] \f[I]alias\f[R]</span>
<span class="line-modified">1922 \f[CB]\-file\ *X*\f[R].cer`</span>
<span class="line-modified">1923 .RE</span>
<span class="line-modified">1924 .PP</span>
<span class="line-modified">1925 This command creates a trusted certificate entry in the keystore from</span>
<span class="line-modified">1926 the data in the CA certificate file and assigns the values of the</span>
<span class="line-modified">1927 \f[I]alias\f[R] to the entry.</span>
<span class="line-modified">1928 .RE</span>
<span class="line-modified">1929 .SH IMPORTING THE CERTIFICATE REPLY FROM THE CA</span>
<span class="line-modified">1930 .PP</span>
<span class="line-modified">1931 After you import a certificate that authenticates the public key of the</span>
<span class="line-modified">1932 CA that you submitted your certificate signing request to (or there is</span>
<span class="line-modified">1933 already such a certificate in the \f[CB]cacerts\f[R] file), you can import</span>
<span class="line-modified">1934 the certificate reply and replace your self\-signed certificate with a</span>
<span class="line-modified">1935 certificate chain.</span>
<span class="line-modified">1936 .PP</span>
<span class="line-modified">1937 The certificate chain is one of the following:</span>
<span class="line-modified">1938 .IP \[bu] 2</span>
<span class="line-modified">1939 Returned by the CA when the CA reply is a chain.</span>
<span class="line-modified">1940 .IP \[bu] 2</span>
<span class="line-modified">1941 Constructed when the CA reply is a single certificate.</span>
<span class="line-modified">1942 This certificate chain is constructed by using the certificate reply and</span>
<span class="line-modified">1943 trusted certificates available either in the keystore where you import</span>
<span class="line-modified">1944 the reply or in the \f[CB]cacerts\f[R] keystore file.</span>
<span class="line-modified">1945 .PP</span>
<span class="line-modified">1946 For example, if you sent your certificate signing request to DigiCert,</span>
<span class="line-modified">1947 then you can import their reply by entering the following command:</span>
<span class="line-modified">1948 .PP</span>
<span class="line-modified">1949 \f[B]Note:\f[R]</span>
<span class="line-modified">1950 .PP</span>
<span class="line-modified">1951 In this example, the returned certificate is named</span>
<span class="line-modified">1952 \f[CB]DCmyname.cer\f[R].</span>
<span class="line-modified">1953 .RS</span>
<span class="line-modified">1954 .PP</span>
<span class="line-modified">1955 \f[CB]keytool\ \-importcert\ \-trustcacerts\ \-file\ DCmyname.cer\f[R]</span>
<span class="line-modified">1956 .RE</span>
<span class="line-modified">1957 .SH EXPORTING A CERTIFICATE THAT AUTHENTICATES THE PUBLIC KEY</span>
<span class="line-modified">1958 .PP</span>
<span class="line-modified">1959 \f[B]Note:\f[R]</span>
<span class="line-modified">1960 .PP</span>
<span class="line-modified">1961 If you used the \f[CB]jarsigner\f[R] command to sign a Java Archive (JAR)</span>
<span class="line-modified">1962 file, then clients that use the file will want to authenticate your</span>
<span class="line-modified">1963 signature.</span>
<span class="line-modified">1964 .PP</span>
<span class="line-modified">1965 One way that clients can authenticate you is by importing your public</span>
<span class="line-modified">1966 key certificate into their keystore as a trusted entry.</span>
<span class="line-modified">1967 You can then export the certificate and supply it to your clients.</span>
<span class="line-modified">1968 .PP</span>
<span class="line-modified">1969 For example:</span>
<span class="line-modified">1970 .IP &quot;1.&quot; 3</span>
<span class="line-modified">1971 Copy your certificate to a file named \f[CB]myname.cer\f[R] by entering</span>
<span class="line-modified">1972 the following command:</span>
<span class="line-modified">1973 .RS 4</span>
<span class="line-modified">1974 .PP</span>
<span class="line-modified">1975 \f[B]Note:\f[R]</span>
<span class="line-modified">1976 .PP</span>
<span class="line-modified">1977 In this example, the entry has an alias of \f[CB]mykey\f[R].</span>
<span class="line-modified">1978 .RS</span>
<span class="line-modified">1979 .PP</span>
<span class="line-modified">1980 \f[CB]keytool\ \-exportcert\ \-alias\ mykey\ \-file\ myname.cer\f[R]</span>
<span class="line-modified">1981 .RE</span>
<span class="line-modified">1982 .RE</span>
<span class="line-modified">1983 .IP &quot;2.&quot; 3</span>
<span class="line-modified">1984 With the certificate and the signed JAR file, a client can use the</span>
<span class="line-modified">1985 \f[CB]jarsigner\f[R] command to authenticate your signature.</span>
<span class="line-modified">1986 .SH IMPORTING THE KEYSTORE</span>
<span class="line-modified">1987 .PP</span>
<span class="line-modified">1988 Use the \f[CB]importkeystore\f[R] command to import an entire keystore</span>
<span class="line-modified">1989 into another keystore.</span>
<span class="line-modified">1990 This imports all entries from the source keystore, including keys and</span>
<span class="line-modified">1991 certificates, to the destination keystore with a single command.</span>
<span class="line-modified">1992 You can use this command to import entries from a different type of</span>
<span class="line-modified">1993 keystore.</span>
<span class="line-modified">1994 During the import, all new entries in the destination keystore will have</span>
<span class="line-modified">1995 the same alias names and protection passwords (for secret keys and</span>
<span class="line-modified">1996 private keys).</span>
<span class="line-modified">1997 If the \f[CB]keytool\f[R] command can\[aq]t recover the private keys or</span>
<span class="line-modified">1998 secret keys from the source keystore, then it prompts you for a</span>
<span class="line-modified">1999 password.</span>
<span class="line-modified">2000 If it detects alias duplication, then it asks you for a new alias, and</span>
<span class="line-modified">2001 you can specify a new alias or simply allow the \f[CB]keytool\f[R] command</span>
<span class="line-modified">2002 to overwrite the existing one.</span>
<span class="line-modified">2003 .PP</span>
<span class="line-modified">2004 For example, import entries from a typical JKS type keystore</span>
<span class="line-modified">2005 \f[CB]key.jks\f[R] into a PKCS #11 type hardware\-based keystore, by</span>
<span class="line-modified">2006 entering the following command:</span>
<span class="line-modified">2007 .RS</span>
<span class="line-modified">2008 .PP</span>
<span class="line-modified">2009 \f[CB]keytool\ \-importkeystore\ \-srckeystore\ key.jks\ \-destkeystore\ NONE\ \-srcstoretype\ JKS\ \-deststoretype\ PKCS11\ \-srcstorepass\f[R]</span>
<span class="line-modified">2010 \f[I]password\f[R] \f[CB]\-deststorepass\f[R] \f[I]password\f[R]</span>
<span class="line-modified">2011 .RE</span>
<span class="line-modified">2012 .PP</span>
<span class="line-modified">2013 The \f[CB]importkeystore\f[R] command can also be used to import a single</span>
<span class="line-modified">2014 entry from a source keystore to a destination keystore.</span>
<span class="line-modified">2015 In this case, besides the options you used in the previous example, you</span>
<span class="line-modified">2016 need to specify the alias you want to import.</span>
<span class="line-modified">2017 With the \f[CB]\-srcalias\f[R] option specified, you can also specify the</span>
<span class="line-modified">2018 destination alias name, protection password for a secret or private key,</span>
<span class="line-modified">2019 and the destination protection password you want as follows:</span>
<span class="line-modified">2020 .RS</span>
<span class="line-modified">2021 .PP</span>
<span class="line-modified">2022 \f[CB]keytool\ \-importkeystore\ \-srckeystore\ key.jks\ \-destkeystore\ NONE\ \-srcstoretype\ JKS\ \-deststoretype\ PKCS11\ \-srcstorepass\f[R]</span>
<span class="line-modified">2023 \f[I]password\f[R] \f[CB]\-deststorepass\f[R] \f[I]password\f[R]</span>
<span class="line-modified">2024 \f[CB]\-srcalias\ myprivatekey\ \-destalias\ myoldprivatekey\ \-srckeypass\f[R]</span>
<span class="line-modified">2025 \f[I]password\f[R] \f[CB]\-destkeypass\f[R] \f[I]password\f[R]</span>
<span class="line-modified">2026 \f[CB]\-noprompt\f[R]</span>
<span class="line-modified">2027 .RE</span>
<span class="line-modified">2028 .SH GENERATING CERTIFICATES FOR AN SSL SERVER</span>
<span class="line-modified">2029 .PP</span>
<span class="line-modified">2030 The following are \f[CB]keytool\f[R] commands used to generate key pairs</span>
<span class="line-modified">2031 and certificates for three entities:</span>
<span class="line-modified">2032 .IP \[bu] 2</span>
<span class="line-modified">2033 Root CA (\f[CB]root\f[R])</span>
<span class="line-modified">2034 .IP \[bu] 2</span>
<span class="line-modified">2035 Intermediate CA (\f[CB]ca\f[R])</span>
<span class="line-modified">2036 .IP \[bu] 2</span>
<span class="line-modified">2037 SSL server (\f[CB]server\f[R])</span>
<span class="line-modified">2038 .PP</span>
<span class="line-modified">2039 Ensure that you store all the certificates in the same keystore.</span>
<span class="line-modified">2040 .IP</span>
<span class="line-modified">2041 .nf</span>
<span class="line-modified">2042 \f[CB]</span>
<span class="line-modified">2043 keytool\ \-genkeypair\ \-keystore\ root.jks\ \-alias\ root\ \-ext\ bc:c\ \-keyalg\ rsa</span>
<span class="line-modified">2044 keytool\ \-genkeypair\ \-keystore\ ca.jks\ \-alias\ ca\ \-ext\ bc:c\ \-keyalg\ rsa</span>
<span class="line-modified">2045 keytool\ \-genkeypair\ \-keystore\ server.jks\ \-alias\ server\ \-keyalg\ rsa</span>
<span class="line-modified">2046 </span>
<span class="line-modified">2047 keytool\ \-keystore\ root.jks\ \-alias\ root\ \-exportcert\ \-rfc\ &gt;\ root.pem</span>
<span class="line-modified">2048 </span>
<span class="line-modified">2049 keytool\ \-storepass\ password\ \-keystore\ ca.jks\ \-certreq\ \-alias\ ca\ |</span>
<span class="line-modified">2050 \ \ \ \ keytool\ \-storepass\ password\ \-keystore\ root.jks</span>
<span class="line-modified">2051 \ \ \ \ \-gencert\ \-alias\ root\ \-ext\ BC=0\ \-rfc\ &gt;\ ca.pem</span>
<span class="line-modified">2052 keytool\ \-keystore\ ca.jks\ \-importcert\ \-alias\ ca\ \-file\ ca.pem</span>
<span class="line-modified">2053 </span>
<span class="line-modified">2054 keytool\ \-storepass\ password\ \-keystore\ server.jks\ \-certreq\ \-alias\ server\ |</span>
<span class="line-added">2055 \ \ \ \ keytool\ \-storepass\ password\ \-keystore\ ca.jks\ \-gencert\ \-alias\ ca</span>
<span class="line-added">2056 \ \ \ \ \-ext\ ku:c=dig,kE\ \-rfc\ &gt;\ server.pem</span>
<span class="line-added">2057 cat\ root.pem\ ca.pem\ server.pem\ |</span>
<span class="line-added">2058 \ \ \ \ keytool\ \-keystore\ server.jks\ \-importcert\ \-alias\ server</span>
<span class="line-added">2059 \f[R]</span>
<span class="line-added">2060 .fi</span>
<span class="line-added">2061 .SH TERMS</span>
<span class="line-added">2062 .TP</span>
<span class="line-added">2063 .B Keystore</span>
<span class="line-added">2064 A keystore is a storage facility for cryptographic keys and</span>
<span class="line-added">2065 certificates.</span>
<span class="line-added">2066 .RS</span>
<span class="line-added">2067 .RE</span>
<span class="line-added">2068 .TP</span>
<span class="line-added">2069 .B Keystore entries</span>
<span class="line-added">2070 Keystores can have different types of entries.</span>
<span class="line-added">2071 The two most applicable entry types for the \f[CB]keytool\f[R] command</span>
<span class="line-added">2072 include the following:</span>
<span class="line-added">2073 .RS</span>
<span class="line-added">2074 .PP</span>
<span class="line-added">2075 Key entries: Each entry holds very sensitive cryptographic key</span>
<span class="line-added">2076 information, which is stored in a protected format to prevent</span>
<span class="line-added">2077 unauthorized access.</span>
<span class="line-added">2078 Typically, a key stored in this type of entry is a secret key, or a</span>
<span class="line-added">2079 private key accompanied by the certificate chain for the corresponding</span>
<span class="line-added">2080 public key.</span>
<span class="line-added">2081 See \f[B]Certificate Chains\f[R].</span>
<span class="line-added">2082 The \f[CB]keytool\f[R] command can handle both types of entries, while the</span>
<span class="line-added">2083 \f[CB]jarsigner\f[R] tool only handles the latter type of entry, that is</span>
<span class="line-added">2084 private keys and their associated certificate chains.</span>
<span class="line-added">2085 .PP</span>
<span class="line-added">2086 Trusted certificate entries: Each entry contains a single public key</span>
<span class="line-added">2087 certificate that belongs to another party.</span>
<span class="line-added">2088 The entry is called a trusted certificate because the keystore owner</span>
<span class="line-added">2089 trusts that the public key in the certificate belongs to the identity</span>
<span class="line-added">2090 identified by the subject (owner) of the certificate.</span>
<span class="line-added">2091 The issuer of the certificate vouches for this, by signing the</span>
<span class="line-added">2092 certificate.</span>
<span class="line-added">2093 .RE</span>
<span class="line-added">2094 .TP</span>
<span class="line-added">2095 .B Keystore aliases</span>
<span class="line-added">2096 All keystore entries (key and trusted certificate entries) are accessed</span>
<span class="line-added">2097 by way of unique aliases.</span>
<span class="line-added">2098 .RS</span>
<span class="line-added">2099 .PP</span>
<span class="line-added">2100 An alias is specified when you add an entity to the keystore with the</span>
<span class="line-added">2101 \f[CB]\-genseckey\f[R] command to generate a secret key, the</span>
<span class="line-added">2102 \f[CB]\-genkeypair\f[R] command to generate a key pair (public and private</span>
<span class="line-added">2103 key), or the \f[CB]\-importcert\f[R] command to add a certificate or</span>
<span class="line-added">2104 certificate chain to the list of trusted certificates.</span>
<span class="line-added">2105 Subsequent \f[CB]keytool\f[R] commands must use this same alias to refer</span>
<span class="line-added">2106 to the entity.</span>
<span class="line-added">2107 .PP</span>
<span class="line-added">2108 For example, you can use the alias \f[CB]duke\f[R] to generate a new</span>
<span class="line-added">2109 public/private key pair and wrap the public key into a self\-signed</span>
<span class="line-added">2110 certificate with the following command.</span>
<span class="line-added">2111 See \f[B]Certificate Chains\f[R].</span>
<span class="line-added">2112 .RS</span>
<span class="line-added">2113 .PP</span>
<span class="line-added">2114 \f[CB]keytool\ \-genkeypair\ \-alias\ duke\ \-keyalg\ rsa\ \-keypass\f[R]</span>
<span class="line-added">2115 \f[I]passwd\f[R]</span>
<span class="line-added">2116 .RE</span>
<span class="line-added">2117 .PP</span>
<span class="line-added">2118 This example specifies an initial \f[I]passwd\f[R] required by subsequent</span>
<span class="line-added">2119 commands to access the private key associated with the alias</span>
<span class="line-added">2120 \f[CB]duke\f[R].</span>
<span class="line-added">2121 If you later want to change Duke\[aq]s private key password, use a</span>
<span class="line-added">2122 command such as the following:</span>
<span class="line-added">2123 .RS</span>
<span class="line-added">2124 .PP</span>
<span class="line-added">2125 \f[CB]keytool\ \-keypasswd\ \-alias\ duke\ \-keypass\f[R] \f[I]passwd\f[R]</span>
<span class="line-added">2126 \f[CB]\-new\f[R] \f[I]newpasswd\f[R]</span>
<span class="line-added">2127 .RE</span>
<span class="line-added">2128 .PP</span>
<span class="line-added">2129 This changes the initial \f[I]passwd\f[R] to \f[I]newpasswd\f[R].</span>
<span class="line-added">2130 A password shouldn\[aq]t be specified on a command line or in a script</span>
<span class="line-added">2131 unless it is for testing purposes, or you are on a secure system.</span>
<span class="line-added">2132 If you don\[aq]t specify a required password option on a command line,</span>
<span class="line-added">2133 then you are prompted for it.</span>
<span class="line-added">2134 .RE</span>
<span class="line-added">2135 .TP</span>
<span class="line-added">2136 .B Keystore implementation</span>
<span class="line-added">2137 The \f[CB]KeyStore\f[R] class provided in the \f[CB]java.security\f[R]</span>
<span class="line-added">2138 package supplies well\-defined interfaces to access and modify the</span>
<span class="line-added">2139 information in a keystore.</span>
<span class="line-added">2140 It is possible for there to be multiple different concrete</span>
<span class="line-added">2141 implementations, where each implementation is that for a particular type</span>
<span class="line-added">2142 of keystore.</span>
<span class="line-added">2143 .RS</span>
<span class="line-added">2144 .PP</span>
<span class="line-added">2145 Currently, two command\-line tools (\f[CB]keytool\f[R] and</span>
<span class="line-added">2146 \f[CB]jarsigner\f[R]) make use of keystore implementations.</span>
<span class="line-added">2147 Because the \f[CB]KeyStore\f[R] class is \f[CB]public\f[R], users can write</span>
<span class="line-added">2148 additional security applications that use it.</span>
<span class="line-added">2149 .PP</span>
<span class="line-added">2150 In JDK 9 and later, the default keystore implementation is</span>
<span class="line-added">2151 \f[CB]PKCS12\f[R].</span>
<span class="line-added">2152 This is a cross platform keystore based on the RSA PKCS12 Personal</span>
<span class="line-added">2153 Information Exchange Syntax Standard.</span>
<span class="line-added">2154 This standard is primarily meant for storing or transporting a</span>
<span class="line-added">2155 user\[aq]s private keys, certificates, and miscellaneous secrets.</span>
<span class="line-added">2156 There is another built\-in implementation, provided by Oracle.</span>
<span class="line-added">2157 It implements the keystore as a file with a proprietary keystore type</span>
<span class="line-added">2158 (format) named \f[CB]JKS\f[R].</span>
<span class="line-added">2159 It protects each private key with its individual password, and also</span>
<span class="line-added">2160 protects the integrity of the entire keystore with a (possibly</span>
<span class="line-added">2161 different) password.</span>
<span class="line-added">2162 .PP</span>
<span class="line-added">2163 Keystore implementations are provider\-based.</span>
<span class="line-added">2164 More specifically, the application interfaces supplied by</span>
<span class="line-added">2165 \f[CB]KeyStore\f[R] are implemented in terms of a Service Provider</span>
<span class="line-added">2166 Interface (SPI).</span>
<span class="line-added">2167 That is, there is a corresponding abstract \f[CB]KeystoreSpi\f[R] class,</span>
<span class="line-added">2168 also in the \f[CB]java.security\ package\f[R], which defines the Service</span>
<span class="line-added">2169 Provider Interface methods that providers must implement.</span>
<span class="line-added">2170 The term \f[I]provider\f[R] refers to a package or a set of packages that</span>
<span class="line-added">2171 supply a concrete implementation of a subset of services that can be</span>
<span class="line-added">2172 accessed by the Java Security API.</span>
<span class="line-added">2173 To provide a keystore implementation, clients must implement a provider</span>
<span class="line-added">2174 and supply a \f[CB]KeystoreSpi\f[R] subclass implementation, as described</span>
<span class="line-added">2175 in Steps to Implement and Integrate a Provider.</span>
<span class="line-added">2176 .PP</span>
<span class="line-added">2177 Applications can choose different types of keystore implementations from</span>
<span class="line-added">2178 different providers, using the \f[CB]getInstance\f[R] factory method</span>
<span class="line-added">2179 supplied in the \f[CB]KeyStore\f[R] class.</span>
<span class="line-added">2180 A keystore type defines the storage and data format of the keystore</span>
<span class="line-added">2181 information, and the algorithms used to protect private/secret keys in</span>
<span class="line-added">2182 the keystore and the integrity of the keystore.</span>
<span class="line-added">2183 Keystore implementations of different types aren\[aq]t compatible.</span>
<span class="line-added">2184 .PP</span>
<span class="line-added">2185 The \f[CB]keytool\f[R] command works on any file\-based keystore</span>
<span class="line-added">2186 implementation.</span>
<span class="line-added">2187 It treats the keystore location that is passed to it at the command line</span>
<span class="line-added">2188 as a file name and converts it to a \f[CB]FileInputStream\f[R], from which</span>
<span class="line-added">2189 it loads the keystore information.)The \f[CB]jarsigner\f[R] commands can</span>
<span class="line-added">2190 read a keystore from any location that can be specified with a URL.</span>
<span class="line-added">2191 .PP</span>
<span class="line-added">2192 For \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R], you can specify a keystore</span>
<span class="line-added">2193 type at the command line, with the \f[CB]\-storetype\f[R] option.</span>
<span class="line-added">2194 .PP</span>
<span class="line-added">2195 If you don\[aq]t explicitly specify a keystore type, then the tools</span>
<span class="line-added">2196 choose a keystore implementation based on the value of the</span>
<span class="line-added">2197 \f[CB]keystore.type\f[R] property specified in the security properties</span>
<span class="line-added">2198 file.</span>
<span class="line-added">2199 The security properties file is called \f[CB]java.security\f[R], and</span>
<span class="line-added">2200 resides in the security properties directory:</span>
<span class="line-added">2201 .IP \[bu] 2</span>
<span class="line-added">2202 \f[B]Oracle Solaris, Linux, and OS X:\f[R]</span>
<span class="line-added">2203 \f[CB]java.home/lib/security\f[R]</span>
<span class="line-added">2204 .IP \[bu] 2</span>
<span class="line-added">2205 \f[B]Windows:\f[R] \f[CB]java.home\\lib\\security\f[R]</span>
<span class="line-added">2206 .PP</span>
<span class="line-added">2207 Each tool gets the \f[CB]keystore.type\f[R] value and then examines all</span>
<span class="line-added">2208 the currently installed providers until it finds one that implements a</span>
<span class="line-added">2209 keystores of that type.</span>
<span class="line-added">2210 It then uses the keystore implementation from that provider.The</span>
<span class="line-added">2211 \f[CB]KeyStore\f[R] class defines a static method named</span>
<span class="line-added">2212 \f[CB]getDefaultType\f[R] that lets applications retrieve the value of the</span>
<span class="line-added">2213 \f[CB]keystore.type\f[R] property.</span>
<span class="line-added">2214 The following line of code creates an instance of the default keystore</span>
<span class="line-added">2215 type as specified in the \f[CB]keystore.type\f[R] property:</span>
<span class="line-added">2216 .RS</span>
<span class="line-added">2217 .PP</span>
<span class="line-added">2218 \f[CB]KeyStore\ keyStore\ =\ KeyStore.getInstance(KeyStore.getDefaultType());\f[R]</span>
<span class="line-added">2219 .RE</span>
<span class="line-added">2220 .PP</span>
<span class="line-added">2221 The default keystore type is \f[CB]pkcs12\f[R], which is a cross\-platform</span>
<span class="line-added">2222 keystore based on the RSA PKCS12 Personal Information Exchange Syntax</span>
<span class="line-added">2223 Standard.</span>
<span class="line-added">2224 This is specified by the following line in the security properties file:</span>
<span class="line-added">2225 .RS</span>
<span class="line-added">2226 .PP</span>
<span class="line-added">2227 \f[CB]keystore.type=pkcs12\f[R]</span>
<span class="line-added">2228 .RE</span>
<span class="line-added">2229 .PP</span>
<span class="line-added">2230 To have the tools utilize a keystore implementation other than the</span>
<span class="line-added">2231 default, you can change that line to specify a different keystore type.</span>
<span class="line-added">2232 For example, if you want to use the Oracle\[aq]s \f[CB]jks\f[R] keystore</span>
<span class="line-added">2233 implementation, then change the line to the following:</span>
<span class="line-added">2234 .RS</span>
<span class="line-added">2235 .PP</span>
<span class="line-added">2236 \f[CB]keystore.type=jks\f[R]</span>
<span class="line-added">2237 .RE</span>
<span class="line-added">2238 .PP</span>
<span class="line-added">2239 \f[B]Note:\f[R]</span>
<span class="line-added">2240 .PP</span>
<span class="line-added">2241 Case doesn\[aq]t matter in keystore type designations.</span>
<span class="line-added">2242 For example, \f[CB]JKS\f[R] would be considered the same as \f[CB]jks\f[R].</span>
<span class="line-added">2243 .RE</span>
<span class="line-added">2244 .TP</span>
<span class="line-added">2245 .B Certificate</span>
<span class="line-added">2246 A certificate (or public\-key certificate) is a digitally signed</span>
<span class="line-added">2247 statement from one entity (the issuer), saying that the public key and</span>
<span class="line-added">2248 some other information of another entity (the subject) has some specific</span>
<span class="line-added">2249 value.</span>
<span class="line-added">2250 The following terms are related to certificates:</span>
<span class="line-added">2251 .RS</span>
<span class="line-added">2252 .IP \[bu] 2</span>
<span class="line-added">2253 Public Keys: These are numbers associated with a particular entity, and</span>
<span class="line-added">2254 are intended to be known to everyone who needs to have trusted</span>
<span class="line-added">2255 interactions with that entity.</span>
<span class="line-added">2256 Public keys are used to verify signatures.</span>
<span class="line-added">2257 .IP \[bu] 2</span>
<span class="line-added">2258 Digitally Signed: If some data is digitally signed, then it is stored</span>
<span class="line-added">2259 with the identity of an entity and a signature that proves that entity</span>
<span class="line-added">2260 knows about the data.</span>
<span class="line-added">2261 The data is rendered unforgeable by signing with the entity\[aq]s</span>
<span class="line-added">2262 private key.</span>
<span class="line-added">2263 .IP \[bu] 2</span>
<span class="line-added">2264 Identity: A known way of addressing an entity.</span>
<span class="line-added">2265 In some systems, the identity is the public key, and in others it can be</span>
<span class="line-added">2266 anything from an Oracle Solaris UID to an email address to an X.509</span>
<span class="line-added">2267 distinguished name.</span>
<span class="line-added">2268 .IP \[bu] 2</span>
<span class="line-added">2269 Signature: A signature is computed over some data using the private key</span>
<span class="line-added">2270 of an entity.</span>
<span class="line-added">2271 The signer, which in the case of a certificate is also known as the</span>
<span class="line-added">2272 issuer.</span>
<span class="line-added">2273 .IP \[bu] 2</span>
<span class="line-added">2274 Private Keys: These are numbers, each of which is supposed to be known</span>
<span class="line-added">2275 only to the particular entity whose private key it is (that is, it is</span>
<span class="line-added">2276 supposed to be kept secret).</span>
<span class="line-added">2277 Private and public keys exist in pairs in all public key cryptography</span>
<span class="line-added">2278 systems (also referred to as public key crypto systems).</span>
<span class="line-added">2279 In a typical public key crypto system, such as DSA, a private key</span>
<span class="line-added">2280 corresponds to exactly one public key.</span>
<span class="line-added">2281 Private keys are used to compute signatures.</span>
<span class="line-added">2282 .IP \[bu] 2</span>
<span class="line-added">2283 Entity: An entity is a person, organization, program, computer,</span>
<span class="line-added">2284 business, bank, or something else you are trusting to some degree.</span>
<span class="line-added">2285 .PP</span>
<span class="line-added">2286 Public key cryptography requires access to users\[aq] public keys.</span>
<span class="line-added">2287 In a large\-scale networked environment, it is impossible to guarantee</span>
<span class="line-added">2288 that prior relationships between communicating entities were established</span>
<span class="line-added">2289 or that a trusted repository exists with all used public keys.</span>
<span class="line-added">2290 Certificates were invented as a solution to this public key distribution</span>
<span class="line-added">2291 problem.</span>
<span class="line-added">2292 Now a Certification Authority (CA) can act as a trusted third party.</span>
<span class="line-added">2293 CAs are entities such as businesses that are trusted to sign (issue)</span>
<span class="line-added">2294 certificates for other entities.</span>
<span class="line-added">2295 It is assumed that CAs only create valid and reliable certificates</span>
<span class="line-added">2296 because they are bound by legal agreements.</span>
<span class="line-added">2297 There are many public Certification Authorities, such as DigiCert,</span>
<span class="line-added">2298 Comodo, Entrust, and so on.</span>
<span class="line-added">2299 .PP</span>
<span class="line-added">2300 You can also run your own Certification Authority using products such as</span>
<span class="line-added">2301 Microsoft Certificate Server or the Entrust CA product for your</span>
<span class="line-added">2302 organization.</span>
<span class="line-added">2303 With the \f[CB]keytool\f[R] command, it is possible to display, import,</span>
<span class="line-added">2304 and export certificates.</span>
<span class="line-added">2305 It is also possible to generate self\-signed certificates.</span>
<span class="line-added">2306 .PP</span>
<span class="line-added">2307 The \f[CB]keytool\f[R] command currently handles X.509 certificates.</span>
<span class="line-added">2308 .RE</span>
<span class="line-added">2309 .TP</span>
<span class="line-added">2310 .B X.509 Certificates</span>
<span class="line-added">2311 The X.509 standard defines what information can go into a certificate</span>
<span class="line-added">2312 and describes how to write it down (the data format).</span>
<span class="line-added">2313 All the data in a certificate is encoded with two related standards</span>
<span class="line-added">2314 called ASN.1/DER.</span>
<span class="line-added">2315 Abstract Syntax Notation 1 describes data.</span>
<span class="line-added">2316 The Definite Encoding Rules describe a single way to store and transfer</span>
<span class="line-added">2317 that data.</span>
<span class="line-added">2318 .RS</span>
<span class="line-added">2319 .PP</span>
<span class="line-added">2320 All X.509 certificates have the following data, in addition to the</span>
<span class="line-added">2321 signature:</span>
<span class="line-added">2322 .IP \[bu] 2</span>
<span class="line-added">2323 Version: This identifies which version of the X.509 standard applies to</span>
<span class="line-added">2324 this certificate, which affects what information can be specified in it.</span>
<span class="line-added">2325 Thus far, three versions are defined.</span>
<span class="line-added">2326 The \f[CB]keytool\f[R] command can import and export v1, v2, and v3</span>
<span class="line-added">2327 certificates.</span>
<span class="line-added">2328 It generates v3 certificates.</span>
<span class="line-added">2329 .RS 2</span>
<span class="line-added">2330 .IP \[bu] 2</span>
<span class="line-added">2331 X.509 Version 1 has been available since 1988, is widely deployed, and</span>
<span class="line-added">2332 is the most generic.</span>
<span class="line-added">2333 .IP \[bu] 2</span>
<span class="line-added">2334 X.509 Version 2 introduced the concept of subject and issuer unique</span>
<span class="line-added">2335 identifiers to handle the possibility of reuse of subject or issuer</span>
<span class="line-added">2336 names over time.</span>
<span class="line-added">2337 Most certificate profile documents strongly recommend that names not be</span>
<span class="line-added">2338 reused and that certificates shouldn\[aq]t make use of unique</span>
<span class="line-added">2339 identifiers.</span>
<span class="line-added">2340 Version 2 certificates aren\[aq]t widely used.</span>
<span class="line-added">2341 .IP \[bu] 2</span>
<span class="line-added">2342 X.509 Version 3 is the most recent (1996) and supports the notion of</span>
<span class="line-added">2343 extensions where anyone can define an extension and include it in the</span>
<span class="line-added">2344 certificate.</span>
<span class="line-added">2345 Some common extensions are: KeyUsage (limits the use of the keys to</span>
<span class="line-added">2346 particular purposes such as \f[CB]signing\-only\f[R]) and AlternativeNames</span>
<span class="line-added">2347 (allows other identities to also be associated with this public key, for</span>
<span class="line-added">2348 example.</span>
<span class="line-added">2349 DNS names, email addresses, IP addresses).</span>
<span class="line-added">2350 Extensions can be marked critical to indicate that the extension should</span>
<span class="line-added">2351 be checked and enforced or used.</span>
<span class="line-added">2352 For example, if a certificate has the KeyUsage extension marked critical</span>
<span class="line-added">2353 and set to \f[CB]keyCertSign\f[R], then when this certificate is presented</span>
<span class="line-added">2354 during SSL communication, it should be rejected because the certificate</span>
<span class="line-added">2355 extension indicates that the associated private key should only be used</span>
<span class="line-added">2356 for signing certificates and not for SSL use.</span>
<span class="line-added">2357 .RE</span>
<span class="line-added">2358 .IP \[bu] 2</span>
<span class="line-added">2359 Serial number: The entity that created the certificate is responsible</span>
<span class="line-added">2360 for assigning it a serial number to distinguish it from other</span>
<span class="line-added">2361 certificates it issues.</span>
<span class="line-added">2362 This information is used in numerous ways.</span>
<span class="line-added">2363 For example, when a certificate is revoked its serial number is placed</span>
<span class="line-added">2364 in a Certificate Revocation List (CRL).</span>
<span class="line-added">2365 .IP \[bu] 2</span>
<span class="line-added">2366 Signature algorithm identifier: This identifies the algorithm used by</span>
<span class="line-added">2367 the CA to sign the certificate.</span>
<span class="line-added">2368 .IP \[bu] 2</span>
<span class="line-added">2369 Issuer name: The X.500 Distinguished Name of the entity that signed the</span>
<span class="line-added">2370 certificate.</span>
<span class="line-added">2371 This is typically a CA.</span>
<span class="line-added">2372 Using this certificate implies trusting the entity that signed this</span>
<span class="line-added">2373 certificate.</span>
<span class="line-added">2374 In some cases, such as root or top\-level CA certificates, the issuer</span>
<span class="line-added">2375 signs its own certificate.</span>
<span class="line-added">2376 .IP \[bu] 2</span>
<span class="line-added">2377 Validity period: Each certificate is valid only for a limited amount of</span>
<span class="line-added">2378 time.</span>
<span class="line-added">2379 This period is described by a start date and time and an end date and</span>
<span class="line-added">2380 time, and can be as short as a few seconds or almost as long as a</span>
<span class="line-added">2381 century.</span>
<span class="line-added">2382 The validity period chosen depends on a number of factors, such as the</span>
<span class="line-added">2383 strength of the private key used to sign the certificate, or the amount</span>
<span class="line-added">2384 one is willing to pay for a certificate.</span>
<span class="line-added">2385 This is the expected period that entities can rely on the public value,</span>
<span class="line-added">2386 when the associated private key has not been compromised.</span>
<span class="line-added">2387 .IP \[bu] 2</span>
<span class="line-added">2388 Subject name: The name of the entity whose public key the certificate</span>
<span class="line-added">2389 identifies.</span>
<span class="line-added">2390 This name uses the X.500 standard, so it is intended to be unique across</span>
<span class="line-added">2391 the Internet.</span>
<span class="line-added">2392 This is the X.500 Distinguished Name (DN) of the entity.</span>
<span class="line-added">2393 For example,</span>
<span class="line-added">2394 .RS 2</span>
<span class="line-added">2395 .RS</span>
<span class="line-added">2396 .PP</span>
<span class="line-added">2397 \f[CB]CN=Java\ Duke,\ OU=Java\ Software\ Division,\ O=Oracle\ Corporation,\ C=US\f[R]</span>
<span class="line-added">2398 .RE</span>
<span class="line-added">2399 .PP</span>
<span class="line-added">2400 These refer to the subject\[aq]s common name (CN), organizational unit</span>
<span class="line-added">2401 (OU), organization (O), and country (C).</span>
<span class="line-added">2402 .RE</span>
<span class="line-added">2403 .IP \[bu] 2</span>
<span class="line-added">2404 Subject public key information: This is the public key of the entity</span>
<span class="line-added">2405 being named with an algorithm identifier that specifies which public key</span>
<span class="line-added">2406 crypto system this key belongs to and any associated key parameters.</span>
<span class="line-added">2407 .RE</span>
<span class="line-added">2408 .TP</span>
<span class="line-added">2409 .B Certificate Chains</span>
<span class="line-added">2410 The \f[CB]keytool\f[R] command can create and manage keystore key entries</span>
<span class="line-added">2411 that each contain a private key and an associated certificate chain.</span>
<span class="line-added">2412 The first certificate in the chain contains the public key that</span>
<span class="line-added">2413 corresponds to the private key.</span>
<span class="line-added">2414 .RS</span>
<span class="line-added">2415 .PP</span>
<span class="line-added">2416 When keys are first generated, the chain starts off containing a single</span>
<span class="line-added">2417 element, a self\-signed certificate.</span>
<span class="line-added">2418 See \-genkeypair in \f[B]Commands\f[R].</span>
<span class="line-added">2419 A self\-signed certificate is one for which the issuer (signer) is the</span>
<span class="line-added">2420 same as the subject.</span>
<span class="line-added">2421 The subject is the entity whose public key is being authenticated by the</span>
<span class="line-added">2422 certificate.</span>
<span class="line-added">2423 Whenever the \f[CB]\-genkeypair\f[R] command is called to generate a new</span>
<span class="line-added">2424 public/private key pair, it also wraps the public key into a</span>
<span class="line-added">2425 self\-signed certificate.</span>
<span class="line-added">2426 .PP</span>
<span class="line-added">2427 Later, after a Certificate Signing Request (CSR) was generated with the</span>
<span class="line-added">2428 \f[CB]\-certreq\f[R] command and sent to a Certification Authority (CA),</span>
<span class="line-added">2429 the response from the CA is imported with \f[CB]\-importcert\f[R], and the</span>
<span class="line-added">2430 self\-signed certificate is replaced by a chain of certificates.</span>
<span class="line-added">2431 At the bottom of the chain is the certificate (reply) issued by the CA</span>
<span class="line-added">2432 authenticating the subject\[aq]s public key.</span>
<span class="line-added">2433 The next certificate in the chain is one that authenticates the CA\[aq]s</span>
<span class="line-added">2434 public key.</span>
<span class="line-added">2435 .PP</span>
<span class="line-added">2436 In many cases, this is a self\-signed certificate, which is a</span>
<span class="line-added">2437 certificate from the CA authenticating its own public key, and the last</span>
<span class="line-added">2438 certificate in the chain.</span>
<span class="line-added">2439 In other cases, the CA might return a chain of certificates.</span>
<span class="line-added">2440 In this case, the bottom certificate in the chain is the same (a</span>
<span class="line-added">2441 certificate signed by the CA, authenticating the public key of the key</span>
<span class="line-added">2442 entry), but the second certificate in the chain is a certificate signed</span>
<span class="line-added">2443 by a different CA that authenticates the public key of the CA you sent</span>
<span class="line-added">2444 the CSR to.</span>
<span class="line-added">2445 The next certificate in the chain is a certificate that authenticates</span>
<span class="line-added">2446 the second CA\[aq]s key, and so on, until a self\-signed root</span>
<span class="line-added">2447 certificate is reached.</span>
<span class="line-added">2448 Each certificate in the chain (after the first) authenticates the public</span>
<span class="line-added">2449 key of the signer of the previous certificate in the chain.</span>
<span class="line-added">2450 .PP</span>
<span class="line-added">2451 Many CAs only return the issued certificate, with no supporting chain,</span>
<span class="line-added">2452 especially when there is a flat hierarchy (no intermediates CAs).</span>
<span class="line-added">2453 In this case, the certificate chain must be established from trusted</span>
<span class="line-added">2454 certificate information already stored in the keystore.</span>
<span class="line-added">2455 .PP</span>
<span class="line-added">2456 A different reply format (defined by the PKCS #7 standard) includes the</span>
<span class="line-added">2457 supporting certificate chain in addition to the issued certificate.</span>
<span class="line-added">2458 Both reply formats can be handled by the \f[CB]keytool\f[R] command.</span>
<span class="line-added">2459 .PP</span>
<span class="line-added">2460 The top\-level (root) CA certificate is self\-signed.</span>
<span class="line-added">2461 However, the trust into the root\[aq]s public key doesn\[aq]t come from</span>
<span class="line-added">2462 the root certificate itself, but from other sources such as a newspaper.</span>
<span class="line-added">2463 This is because anybody could generate a self\-signed certificate with</span>
<span class="line-added">2464 the distinguished name of, for example, the DigiCert root CA.</span>
<span class="line-added">2465 The root CA public key is widely known.</span>
<span class="line-added">2466 The only reason it is stored in a certificate is because this is the</span>
<span class="line-added">2467 format understood by most tools, so the certificate in this case is only</span>
<span class="line-added">2468 used as a vehicle to transport the root CA\[aq]s public key.</span>
<span class="line-added">2469 Before you add the root CA certificate to your keystore, you should view</span>
<span class="line-added">2470 it with the \f[CB]\-printcert\f[R] option and compare the displayed</span>
<span class="line-added">2471 fingerprint with the well\-known fingerprint obtained from a newspaper,</span>
<span class="line-added">2472 the root CA\[aq]s Web page, and so on.</span>
<span class="line-added">2473 .RE</span>
<span class="line-added">2474 .TP</span>
<span class="line-added">2475 .B cacerts Certificates File</span>
<span class="line-added">2476 A certificates file named \f[CB]cacerts\f[R] resides in the security</span>
<span class="line-added">2477 properties directory:</span>
<span class="line-added">2478 .RS</span>
<span class="line-added">2479 .IP \[bu] 2</span>
<span class="line-added">2480 \f[B]Oracle Solaris, Linux, and OS X:\f[R]</span>
<span class="line-added">2481 \f[I]JAVA_HOME\f[R]\f[CB]/lib/security\f[R]</span>
<span class="line-added">2482 .IP \[bu] 2</span>
<span class="line-added">2483 \f[B]Windows:\f[R] \f[I]JAVA_HOME\f[R]\f[CB]\\lib\\security\f[R]</span>
<span class="line-added">2484 .PP</span>
<span class="line-added">2485 \f[I]JAVA_HOME\f[R] is the runtime environment directory, which is the</span>
<span class="line-added">2486 \f[CB]jre\f[R] directory in the JDK or the top\-level directory of the</span>
<span class="line-added">2487 Java Runtime Environment (JRE).</span>
<span class="line-added">2488 .PP</span>
<span class="line-added">2489 The \f[CB]cacerts\f[R] file represents a system\-wide keystore with CA</span>
<span class="line-added">2490 certificates.</span>
<span class="line-added">2491 System administrators can configure and manage that file with the</span>
<span class="line-added">2492 \f[CB]keytool\f[R] command by specifying \f[CB]jks\f[R] as the keystore</span>
<span class="line-added">2493 type.</span>
<span class="line-added">2494 The \f[CB]cacerts\f[R] keystore file ships with a default set of root CA</span>
<span class="line-added">2495 certificates.</span>
<span class="line-added">2496 For Oracle Solaris, Linux, OS X, and Windows, you can list the default</span>
<span class="line-added">2497 certificates with the following command:</span>
<span class="line-added">2498 .RS</span>
<span class="line-added">2499 .PP</span>
<span class="line-added">2500 \f[CB]keytool\ \-list\ \-cacerts\f[R]</span>
<span class="line-added">2501 .RE</span>
<span class="line-added">2502 .PP</span>
<span class="line-added">2503 The initial password of the \f[CB]cacerts\f[R] keystore file is</span>
<span class="line-added">2504 \f[CB]changeit\f[R].</span>
<span class="line-added">2505 System administrators should change that password and the default access</span>
<span class="line-added">2506 permission of that file upon installing the SDK.</span>
<span class="line-added">2507 .PP</span>
<span class="line-added">2508 \f[B]Note:\f[R]</span>
<span class="line-added">2509 .PP</span>
<span class="line-added">2510 It is important to verify your \f[CB]cacerts\f[R] file.</span>
<span class="line-added">2511 Because you trust the CAs in the \f[CB]cacerts\f[R] file as entities for</span>
<span class="line-added">2512 signing and issuing certificates to other entities, you must manage the</span>
<span class="line-added">2513 \f[CB]cacerts\f[R] file carefully.</span>
<span class="line-added">2514 The \f[CB]cacerts\f[R] file should contain only certificates of the CAs</span>
<span class="line-added">2515 you trust.</span>
<span class="line-added">2516 It is your responsibility to verify the trusted root CA certificates</span>
<span class="line-added">2517 bundled in the \f[CB]cacerts\f[R] file and make your own trust decisions.</span>
<span class="line-added">2518 .PP</span>
<span class="line-added">2519 To remove an untrusted CA certificate from the \f[CB]cacerts\f[R] file,</span>
<span class="line-added">2520 use the \f[CB]\-delete\f[R] option of the \f[CB]keytool\f[R] command.</span>
<span class="line-added">2521 You can find the \f[CB]cacerts\f[R] file in the JRE installation</span>
<span class="line-added">2522 directory.</span>
<span class="line-added">2523 Contact your system administrator if you don\[aq]t have permission to</span>
<span class="line-added">2524 edit this file</span>
<span class="line-added">2525 .RE</span>
<span class="line-added">2526 .TP</span>
<span class="line-added">2527 .B Internet RFC 1421 Certificate Encoding Standard</span>
<span class="line-added">2528 Certificates are often stored using the printable encoding format</span>
<span class="line-added">2529 defined by the Internet RFC 1421 standard, instead of their binary</span>
<span class="line-added">2530 encoding.</span>
<span class="line-added">2531 This certificate format, also known as Base64 encoding, makes it easy to</span>
<span class="line-added">2532 export certificates to other applications by email or through some other</span>
<span class="line-added">2533 mechanism.</span>
<span class="line-added">2534 .RS</span>
<span class="line-added">2535 .PP</span>
<span class="line-added">2536 Certificates read by the \f[CB]\-importcert\f[R] and \f[CB]\-printcert\f[R]</span>
<span class="line-added">2537 commands can be in either this format or binary encoded.</span>
<span class="line-added">2538 The \f[CB]\-exportcert\f[R] command by default outputs a certificate in</span>
<span class="line-added">2539 binary encoding, but will instead output a certificate in the printable</span>
<span class="line-added">2540 encoding format, when the \f[CB]\-rfc\f[R] option is specified.</span>
<span class="line-added">2541 .PP</span>
<span class="line-added">2542 The \f[CB]\-list\f[R] command by default prints the SHA\-256 fingerprint</span>
<span class="line-added">2543 of a certificate.</span>
<span class="line-added">2544 If the \f[CB]\-v\f[R] option is specified, then the certificate is printed</span>
<span class="line-added">2545 in human\-readable format.</span>
<span class="line-added">2546 If the \f[CB]\-rfc\f[R] option is specified, then the certificate is</span>
<span class="line-added">2547 output in the printable encoding format.</span>
<span class="line-added">2548 .PP</span>
<span class="line-added">2549 In its printable encoding format, the encoded certificate is bounded at</span>
<span class="line-added">2550 the beginning and end by the following text:</span>
<span class="line-added">2551 .IP</span>
<span class="line-added">2552 .nf</span>
<span class="line-added">2553 \f[CB]</span>
<span class="line-added">2554 \-\-\-\-\-BEGIN\ CERTIFICATE\-\-\-\-\-</span>
<span class="line-added">2555 </span>
<span class="line-added">2556 encoded\ certificate\ goes\ here.</span>
<span class="line-added">2557 </span>
<span class="line-added">2558 \-\-\-\-\-END\ CERTIFICATE\-\-\-\-\-</span>
<span class="line-added">2559 \f[R]</span>
<span class="line-added">2560 .fi</span>
<span class="line-added">2561 .RE</span>
<span class="line-added">2562 .TP</span>
<span class="line-added">2563 .B X.500 Distinguished Names</span>
<span class="line-added">2564 X.500 Distinguished Names are used to identify entities, such as those</span>
<span class="line-added">2565 that are named by the \f[CB]subject\f[R] and \f[CB]issuer\f[R] (signer)</span>
<span class="line-added">2566 fields of X.509 certificates.</span>
<span class="line-added">2567 The \f[CB]keytool\f[R] command supports the following subparts:</span>
<span class="line-added">2568 .RS</span>
<span class="line-added">2569 .IP \[bu] 2</span>
<span class="line-added">2570 commonName: The common name of a person such as Susan Jones.</span>
<span class="line-added">2571 .IP \[bu] 2</span>
<span class="line-added">2572 organizationUnit: The small organization (such as department or</span>
<span class="line-added">2573 division) name.</span>
<span class="line-added">2574 For example, Purchasing.</span>
<span class="line-added">2575 .IP \[bu] 2</span>
<span class="line-added">2576 localityName: The locality (city) name, for example, Palo Alto.</span>
<span class="line-added">2577 .IP \[bu] 2</span>
<span class="line-added">2578 stateName: State or province name, for example, California.</span>
<span class="line-added">2579 .IP \[bu] 2</span>
<span class="line-added">2580 country: Two\-letter country code, for example, CH.</span>
<span class="line-added">2581 .PP</span>
<span class="line-added">2582 When you supply a distinguished name string as the value of a</span>
<span class="line-added">2583 \f[CB]\-dname\f[R] option, such as for the \f[CB]\-genkeypair\f[R] command,</span>
<span class="line-added">2584 the string must be in the following format:</span>
<span class="line-added">2585 .RS</span>
<span class="line-added">2586 .PP</span>
<span class="line-added">2587 \f[CB]CN=cName,\ OU=orgUnit,\ O=org,\ L=city,\ S=state,\ C=countryCode\f[R]</span>
<span class="line-added">2588 .RE</span>
<span class="line-added">2589 .PP</span>
<span class="line-added">2590 All the following items represent actual values and the previous</span>
<span class="line-added">2591 keywords are abbreviations for the following:</span>
<span class="line-added">2592 .IP</span>
<span class="line-added">2593 .nf</span>
<span class="line-added">2594 \f[CB]</span>
<span class="line-added">2595 CN=commonName</span>
<span class="line-added">2596 OU=organizationUnit</span>
<span class="line-added">2597 O=organizationName</span>
<span class="line-added">2598 L=localityName</span>
<span class="line-added">2599 S=stateName</span>
<span class="line-added">2600 C=country</span>
<span class="line-added">2601 \f[R]</span>
<span class="line-added">2602 .fi</span>
<span class="line-added">2603 .PP</span>
2604 A sample distinguished name string is:
<span class="line-modified">2605 .RS</span>
<span class="line-modified">2606 .PP</span>
<span class="line-modified">2607 \f[CB]CN=Mark\ Smith,\ OU=Java,\ O=Oracle,\ L=Cupertino,\ S=California,\ C=US\f[R]</span>
<span class="line-modified">2608 .RE</span>
<span class="line-modified">2609 .PP</span>





2610 A sample command using such a string is:
<span class="line-modified">2611 .RS</span>








































2612 .PP
<span class="line-modified">2613 \f[CB]keytool\ \-genkeypair\ \-dname\ &quot;CN=Mark\ Smith,\ OU=Java,\ O=Oracle,\ L=Cupertino,\ S=California,\ C=US&quot;\ \-alias\ mark\ \-keyalg\ rsa\f[R]</span>
<span class="line-modified">2614 .RE</span>


































2615 .PP
<span class="line-modified">2616 Case doesn\[aq]t matter for the keyword abbreviations.</span>
<span class="line-modified">2617 For example, CN, cn, and Cn are all treated the same.</span>
<span class="line-modified">2618 .PP</span>
<span class="line-modified">2619 Order matters; each subcomponent must appear in the designated order.</span>
<span class="line-modified">2620 However, it isn\[aq]t necessary to have all the subcomponents.</span>
<span class="line-modified">2621 You can use a subset, for example:</span>
<span class="line-modified">2622 .RS</span>
<span class="line-modified">2623 .PP</span>
<span class="line-modified">2624 \f[CB]CN=Smith,\ OU=Java,\ O=Oracle,\ C=US\f[R]</span>
<span class="line-modified">2625 .RE</span>
<span class="line-modified">2626 .PP</span>
<span class="line-modified">2627 If a distinguished name string value contains a comma, then the comma</span>
<span class="line-modified">2628 must be escaped by a backslash (\\) character when you specify the</span>
<span class="line-modified">2629 string on a command line, as in:</span>
<span class="line-modified">2630 .RS</span>
<span class="line-modified">2631 .PP</span>
<span class="line-modified">2632 \f[CB]cn=Jack,\ ou=Java\\,\ Product\ Development,\ o=Oracle,\ c=US\f[R]</span>
<span class="line-modified">2633 .RE</span>
<span class="line-modified">2634 .PP</span>
<span class="line-modified">2635 It is never necessary to specify a distinguished name string on a</span>
<span class="line-modified">2636 command line.</span>
<span class="line-modified">2637 When the distinguished name is needed for a command, but not supplied on</span>
<span class="line-modified">2638 the command line, the user is prompted for each of the subcomponents.</span>
<span class="line-modified">2639 In this case, a comma doesn\[aq]t need to be escaped by a backslash</span>
<span class="line-modified">2640 (\\).</span>
<span class="line-modified">2641 .RE</span>
<span class="line-modified">2642 .SH WARNINGS</span>
<span class="line-modified">2643 .SH IMPORTING TRUSTED CERTIFICATES WARNING</span>
<span class="line-modified">2644 .PP</span>
<span class="line-modified">2645 \f[B]Important\f[R]: Be sure to check a certificate very carefully before</span>
<span class="line-modified">2646 importing it as a trusted certificate.</span>
<span class="line-modified">2647 .PP</span>
<span class="line-modified">2648 \f[B]Windows Example:\f[R]</span>
<span class="line-modified">2649 .PP</span>
<span class="line-modified">2650 View the certificate first with the \f[CB]\-printcert\f[R] command or the</span>
<span class="line-modified">2651 \f[CB]\-importcert\f[R] command without the \f[CB]\-noprompt\f[R] option.</span>
<span class="line-modified">2652 Ensure that the displayed certificate fingerprints match the expected</span>
<span class="line-modified">2653 ones.</span>
<span class="line-modified">2654 For example, suppose someone sends or emails you a certificate that you</span>
<span class="line-modified">2655 put it in a file named \f[CB]\\tmp\\cert\f[R].</span>
<span class="line-modified">2656 Before you consider adding the certificate to your list of trusted</span>
<span class="line-modified">2657 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its</span>
<span class="line-modified">2658 fingerprints, as follows:</span>
<span class="line-modified">2659 .IP</span>
<span class="line-modified">2660 .nf</span>
<span class="line-modified">2661 \f[CB]</span>
<span class="line-modified">2662 \ \ keytool\ \-printcert\ \-file\ \\tmp\\cert</span>
<span class="line-modified">2663 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll</span>
<span class="line-modified">2664 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll</span>
<span class="line-modified">2665 \ \ \ \ Serial\ Number:\ 59092b34</span>
<span class="line-modified">2666 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016</span>
<span class="line-modified">2667 \ \ \ \ Certificate\ Fingerprints:</span>
<span class="line-modified">2668 </span>
<span class="line-modified">2669 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-1:\ 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE</span>
<span class="line-modified">2670 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-256:\ 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:</span>
<span class="line-modified">2671 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4</span>
<span class="line-modified">2672 \f[R]</span>
<span class="line-modified">2673 .fi</span>
<span class="line-modified">2674 .PP</span>
<span class="line-modified">2675 \f[B]Oracle Solaris Example:\f[R]</span>
<span class="line-modified">2676 .PP</span>
<span class="line-modified">2677 View the certificate first with the \f[CB]\-printcert\f[R] command or the</span>
<span class="line-modified">2678 \f[CB]\-importcert\f[R] command without the \f[CB]\-noprompt\f[R] option.</span>
<span class="line-modified">2679 Ensure that the displayed certificate fingerprints match the expected</span>
<span class="line-modified">2680 ones.</span>
<span class="line-modified">2681 For example, suppose someone sends or emails you a certificate that you</span>
<span class="line-modified">2682 put it in a file named \f[CB]/tmp/cert\f[R].</span>
<span class="line-modified">2683 Before you consider adding the certificate to your list of trusted</span>
<span class="line-modified">2684 certificates, you can execute a \f[CB]\-printcert\f[R] command to view its</span>
<span class="line-modified">2685 fingerprints, as follows:</span>
<span class="line-modified">2686 .IP</span>
<span class="line-modified">2687 .nf</span>
<span class="line-modified">2688 \f[CB]</span>
<span class="line-modified">2689 \ \ keytool\ \-printcert\ \-file\ /tmp/cert</span>
<span class="line-modified">2690 \ \ \ \ Owner:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll</span>
<span class="line-modified">2691 \ \ \ \ Issuer:\ CN=ll,\ OU=ll,\ O=ll,\ L=ll,\ S=ll,\ C=ll</span>
<span class="line-modified">2692 \ \ \ \ Serial\ Number:\ 59092b34</span>
<span class="line-modified">2693 \ \ \ \ Valid\ from:\ Thu\ Jun\ 24\ 18:01:13\ PDT\ 2016\ until:\ Wed\ Jun\ 23\ 17:01:13\ PST\ 2016</span>
<span class="line-modified">2694 \ \ \ \ Certificate\ Fingerprints:</span>
<span class="line-modified">2695 </span>
<span class="line-modified">2696 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-1:\ 20:B6:17:FA:EF:E5:55:8A:D0:71:1F:E8:D6:9D:C0:37:13:0E:5E:FE</span>
<span class="line-modified">2697 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHA\-256:\ 90:7B:70:0A:EA:DC:16:79:92:99:41:FF:8A:FE:EB:90:</span>
<span class="line-added">2698 \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 17:75:E0:90:B2:24:4D:3A:2A:16:A6:E4:11:0F:67:A4</span>
<span class="line-added">2699 \f[R]</span>
<span class="line-added">2700 .fi</span>
<span class="line-added">2701 .PP</span>
<span class="line-added">2702 Then call or otherwise contact the person who sent the certificate and</span>
<span class="line-added">2703 compare the fingerprints that you see with the ones that they show.</span>
<span class="line-added">2704 Only when the fingerprints are equal is it guaranteed that the</span>
<span class="line-added">2705 certificate wasn\[aq]t replaced in transit with somebody else\[aq]s</span>
<span class="line-added">2706 certificate such as an attacker\[aq]s certificate.</span>
<span class="line-added">2707 If such an attack took place, and you didn\[aq]t check the certificate</span>
<span class="line-added">2708 before you imported it, then you would be trusting anything the attacker</span>
<span class="line-added">2709 signed, for example, a JAR file with malicious class files inside.</span>
<span class="line-added">2710 .PP</span>
<span class="line-added">2711 \f[B]Note:\f[R]</span>
<span class="line-added">2712 .PP</span>
<span class="line-added">2713 It isn\[aq]t required that you execute a \f[CB]\-printcert\f[R] command</span>
<span class="line-added">2714 before importing a certificate.</span>
<span class="line-added">2715 This is because before you add a certificate to the list of trusted</span>
<span class="line-added">2716 certificates in the keystore, the \f[CB]\-importcert\f[R] command prints</span>
<span class="line-added">2717 out the certificate information and prompts you to verify it.</span>
<span class="line-added">2718 You can then stop the import operation.</span>
<span class="line-added">2719 However, you can do this only when you call the \f[CB]\-importcert\f[R]</span>
<span class="line-added">2720 command without the \f[CB]\-noprompt\f[R] option.</span>
<span class="line-added">2721 If the \f[CB]\-noprompt\f[R] option is specified, then there is no</span>
<span class="line-added">2722 interaction with the user.</span>
<span class="line-added">2723 .SH PASSWORDS WARNING</span>
<span class="line-added">2724 .PP</span>
<span class="line-added">2725 Most commands that operate on a keystore require the store password.</span>
<span class="line-added">2726 Some commands require a private/secret key password.</span>
<span class="line-added">2727 Passwords can be specified on the command line in the</span>
<span class="line-added">2728 \f[CB]\-storepass\f[R] and \f[CB]\-keypass\f[R] options.</span>
<span class="line-added">2729 However, a password shouldn\[aq]t be specified on a command line or in a</span>
<span class="line-added">2730 script unless it is for testing, or you are on a secure system.</span>
<span class="line-added">2731 When you don\[aq]t specify a required password option on a command line,</span>
<span class="line-added">2732 you are prompted for it.</span>
<span class="line-added">2733 .SH CERTIFICATE CONFORMANCE WARNING</span>
<span class="line-added">2734 .PP</span>
<span class="line-added">2735 \f[B]Internet X.509 Public Key Infrastructure Certificate and</span>
<span class="line-added">2736 Certificate Revocation List (CRL) Profile\f[R]</span>
<span class="line-added">2737 [https://tools.ietf.org/rfc/rfc5280.txt] defined a profile on conforming</span>
<span class="line-added">2738 X.509 certificates, which includes what values and value combinations</span>
<span class="line-added">2739 are valid for certificate fields and extensions.</span>
<span class="line-added">2740 .PP</span>
<span class="line-added">2741 The \f[CB]keytool\f[R] command doesn\[aq]t enforce all of these rules so</span>
<span class="line-added">2742 it can generate certificates that don\[aq]t conform to the standard,</span>
<span class="line-added">2743 such as self\-signed certificates that would be used for internal</span>
<span class="line-added">2744 testing purposes.</span>
<span class="line-added">2745 Certificates that don\[aq]t conform to the standard might be rejected by</span>
<span class="line-added">2746 JRE or other applications.</span>
<span class="line-added">2747 Users should ensure that they provide the correct options for</span>
<span class="line-added">2748 \f[CB]\-dname\f[R], \f[CB]\-ext\f[R], and so on.</span>
<span class="line-added">2749 .SH IMPORT A NEW TRUSTED CERTIFICATE</span>
<span class="line-added">2750 .PP</span>
<span class="line-added">2751 Before you add the certificate to the keystore, the \f[CB]keytool\f[R]</span>
<span class="line-added">2752 command verifies it by attempting to construct a chain of trust from</span>
<span class="line-added">2753 that certificate to a self\-signed certificate (belonging to a root CA),</span>
<span class="line-added">2754 using trusted certificates that are already available in the keystore.</span>
<span class="line-added">2755 .PP</span>
<span class="line-added">2756 If the \f[CB]\-trustcacerts\f[R] option was specified, then additional</span>
<span class="line-added">2757 certificates are considered for the chain of trust, namely the</span>
<span class="line-added">2758 certificates in a file named \f[CB]cacerts\f[R].</span>
<span class="line-added">2759 .PP</span>
<span class="line-added">2760 If the \f[CB]keytool\f[R] command fails to establish a trust path from the</span>
<span class="line-added">2761 certificate to be imported up to a self\-signed certificate (either from</span>
<span class="line-added">2762 the keystore or the \f[CB]cacerts\f[R] file), then the certificate</span>
<span class="line-added">2763 information is printed, and the user is prompted to verify it by</span>
<span class="line-added">2764 comparing the displayed certificate fingerprints with the fingerprints</span>
<span class="line-added">2765 obtained from some other (trusted) source of information, which might be</span>
<span class="line-added">2766 the certificate owner.</span>
<span class="line-added">2767 Be very careful to ensure the certificate is valid before importing it</span>
<span class="line-added">2768 as a trusted certificate.</span>
<span class="line-added">2769 The user then has the option of stopping the import operation.</span>
<span class="line-added">2770 If the \f[CB]\-noprompt\f[R] option is specified, then there is no</span>
<span class="line-added">2771 interaction with the user.</span>
<span class="line-added">2772 .SH IMPORT A CERTIFICATE REPLY</span>
<span class="line-added">2773 .PP</span>
<span class="line-added">2774 When you import a certificate reply, the certificate reply is validated</span>
<span class="line-added">2775 with trusted certificates from the keystore, and optionally, the</span>
<span class="line-added">2776 certificates configured in the \f[CB]cacerts\f[R] keystore file when the</span>
<span class="line-added">2777 \f[CB]\-trustcacerts\f[R] option is specified.</span>
<span class="line-added">2778 .PP</span>
<span class="line-added">2779 The methods of determining whether the certificate reply is trusted are</span>
<span class="line-added">2780 as follows:</span>
<span class="line-added">2781 .IP \[bu] 2</span>
<span class="line-added">2782 If the reply is a single X.509 certificate, then the \f[CB]keytool\f[R]</span>
<span class="line-added">2783 command attempts to establish a trust chain, starting at the certificate</span>
<span class="line-added">2784 reply and ending at a self\-signed certificate (belonging to a root CA).</span>
<span class="line-added">2785 The certificate reply and the hierarchy of certificates is used to</span>
<span class="line-added">2786 authenticate the certificate reply from the new certificate chain of</span>
<span class="line-added">2787 aliases.</span>
<span class="line-added">2788 If a trust chain can\[aq]t be established, then the certificate reply</span>
<span class="line-added">2789 isn\[aq]t imported.</span>
<span class="line-added">2790 In this case, the \f[CB]keytool\f[R] command doesn\[aq]t print the</span>
<span class="line-added">2791 certificate and prompt the user to verify it, because it is very</span>
<span class="line-added">2792 difficult for a user to determine the authenticity of the certificate</span>
<span class="line-added">2793 reply.</span>
<span class="line-added">2794 .IP \[bu] 2</span>
<span class="line-added">2795 If the reply is a PKCS #7 formatted certificate chain or a sequence of</span>
<span class="line-added">2796 X.509 certificates, then the chain is ordered with the user certificate</span>
<span class="line-added">2797 first followed by zero or more CA certificates.</span>
<span class="line-added">2798 If the chain ends with a self\-signed root CA certificate and</span>
<span class="line-added">2799 the\f[CB]\-trustcacerts\f[R] option was specified, the \f[CB]keytool\f[R]</span>
<span class="line-added">2800 command attempts to match it with any of the trusted certificates in the</span>
<span class="line-added">2801 keystore or the \f[CB]cacerts\f[R] keystore file.</span>
<span class="line-added">2802 If the chain doesn\[aq]t end with a self\-signed root CA certificate and</span>
<span class="line-added">2803 the \f[CB]\-trustcacerts\f[R] option was specified, the \f[CB]keytool\f[R]</span>
<span class="line-added">2804 command tries to find one from the trusted certificates in the keystore</span>
<span class="line-added">2805 or the \f[CB]cacerts\f[R] keystore file and add it to the end of the</span>
<span class="line-added">2806 chain.</span>
<span class="line-added">2807 If the certificate isn\[aq]t found and the \f[CB]\-noprompt\f[R] option</span>
<span class="line-added">2808 isn\[aq]t specified, the information of the last certificate in the</span>
<span class="line-added">2809 chain is printed, and the user is prompted to verify it.</span>
<span class="line-added">2810 .PP</span>
<span class="line-added">2811 If the public key in the certificate reply matches the user\[aq]s public</span>
<span class="line-added">2812 key already stored with \f[CB]alias\f[R], then the old certificate chain</span>
<span class="line-added">2813 is replaced with the new certificate chain in the reply.</span>
<span class="line-added">2814 The old chain can only be replaced with a valid \f[CB]keypass\f[R], and so</span>
<span class="line-added">2815 the password used to protect the private key of the entry is supplied.</span>
<span class="line-added">2816 If no password is provided, and the private key password is different</span>
<span class="line-added">2817 from the keystore password, the user is prompted for it.</span>
<span class="line-added">2818 .PP</span>
<span class="line-added">2819 This command was named \f[CB]\-import\f[R] in earlier releases.</span>
<span class="line-added">2820 This old name is still supported in this release.</span>
<span class="line-added">2821 The new name, \f[CB]\-importcert\f[R], is preferred.</span>
</pre>
</td>
</tr>
</table>
<center><a href="java.1.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../native/include/classfile_constants.h.template.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>