<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.management.jfr/share/classes/jdk/management/jfr/RecordingInfo.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="MBeanUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.management/aix/native/libmanagement_ext/UnixOperatingSystem.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.management.jfr/share/classes/jdk/management/jfr/RecordingInfo.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.management.jfr;
 27 
<span class="line-removed"> 28 import java.nio.file.Path;</span>
 29 import java.time.Duration;
 30 import java.time.Instant;
 31 import java.util.LinkedHashMap;
 32 import java.util.List;
 33 import java.util.Map;
 34 
 35 import javax.management.openmbean.CompositeData;
 36 import javax.management.openmbean.TabularData;
 37 
 38 import jdk.jfr.Recording;
 39 import jdk.jfr.RecordingState;

 40 
 41 /**
 42  * Management representation of a {@code Recording}.
 43  *
 44  * @see Recording
 45  *
 46  * @since 9
 47  */
 48 public final class RecordingInfo {
 49     private final long id;
 50     private final String name;
 51     private final String state;
 52     private final boolean dumpOnExit;
 53     private final long size;
 54     private final boolean disk;
 55     private final long maxAge;
 56     private final long maxSize;
 57     private final long startTime;
 58     private final long stopTime;
 59     private final String destination;
</pre>
<hr />
<pre>
 63     // package private
 64     RecordingInfo(Recording recording) {
 65         id = recording.getId();
 66         name = recording.getName();
 67         state = recording.getState().toString();
 68         dumpOnExit = recording.getDumpOnExit();
 69         size = recording.getSize();
 70         disk = recording.isToDisk();
 71 
 72         Duration d = recording.getMaxAge();
 73         if (d == null) {
 74             maxAge = 0;
 75         } else {
 76             maxAge = d.getSeconds();
 77         }
 78         maxSize = recording.getMaxSize();
 79         Instant s = recording.getStartTime();
 80         startTime = s == null ? 0L : s.toEpochMilli();
 81         Instant st = recording.getStopTime();
 82         stopTime = st == null ? 0L : st.toEpochMilli();
<span class="line-modified"> 83         Path p = recording.getDestination();</span>
<span class="line-removed"> 84         destination = p == null ? null : p.toString();</span>
 85         Duration duration = recording.getDuration();
 86         durationInSeconds = duration == null ? 0 : duration.getSeconds();
 87         settings = recording.getSettings();
 88     }
 89 
 90     private RecordingInfo(CompositeData cd) {
 91         id = (int) cd.get(&quot;id&quot;);
 92         name = (String) cd.get(&quot;name&quot;);
 93         state = (String) cd.get(&quot;state&quot;);
 94         dumpOnExit = (boolean) cd.get(&quot;dumpOnExit&quot;);
 95         size = (long) cd.get(&quot;size&quot;);
 96         disk = (boolean) cd.get(&quot;disk&quot;);
 97         maxAge = (Long) cd.get(&quot;maxAge&quot;);
 98         maxSize = (Long) cd.get(&quot;maxSize&quot;);
 99         startTime = (Long) cd.get(&quot;startTime&quot;);
100         stopTime = (Long) cd.get(&quot;stopTime&quot;);
101         destination = (String) cd.get(&quot;destination&quot;);
102         durationInSeconds = (long) cd.get(&quot;duration&quot;);
103         settings = new LinkedHashMap&lt;&gt;();
104         Object map = cd.get(&quot;settings&quot;);
</pre>
</td>
<td>
<hr />
<pre>
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.management.jfr;
 27 

 28 import java.time.Duration;
 29 import java.time.Instant;
 30 import java.util.LinkedHashMap;
 31 import java.util.List;
 32 import java.util.Map;
 33 
 34 import javax.management.openmbean.CompositeData;
 35 import javax.management.openmbean.TabularData;
 36 
 37 import jdk.jfr.Recording;
 38 import jdk.jfr.RecordingState;
<span class="line-added"> 39 import jdk.jfr.internal.management.ManagementSupport;</span>
 40 
 41 /**
 42  * Management representation of a {@code Recording}.
 43  *
 44  * @see Recording
 45  *
 46  * @since 9
 47  */
 48 public final class RecordingInfo {
 49     private final long id;
 50     private final String name;
 51     private final String state;
 52     private final boolean dumpOnExit;
 53     private final long size;
 54     private final boolean disk;
 55     private final long maxAge;
 56     private final long maxSize;
 57     private final long startTime;
 58     private final long stopTime;
 59     private final String destination;
</pre>
<hr />
<pre>
 63     // package private
 64     RecordingInfo(Recording recording) {
 65         id = recording.getId();
 66         name = recording.getName();
 67         state = recording.getState().toString();
 68         dumpOnExit = recording.getDumpOnExit();
 69         size = recording.getSize();
 70         disk = recording.isToDisk();
 71 
 72         Duration d = recording.getMaxAge();
 73         if (d == null) {
 74             maxAge = 0;
 75         } else {
 76             maxAge = d.getSeconds();
 77         }
 78         maxSize = recording.getMaxSize();
 79         Instant s = recording.getStartTime();
 80         startTime = s == null ? 0L : s.toEpochMilli();
 81         Instant st = recording.getStopTime();
 82         stopTime = st == null ? 0L : st.toEpochMilli();
<span class="line-modified"> 83         destination = ManagementSupport.getDestinationOriginalText(recording);</span>

 84         Duration duration = recording.getDuration();
 85         durationInSeconds = duration == null ? 0 : duration.getSeconds();
 86         settings = recording.getSettings();
 87     }
 88 
 89     private RecordingInfo(CompositeData cd) {
 90         id = (int) cd.get(&quot;id&quot;);
 91         name = (String) cd.get(&quot;name&quot;);
 92         state = (String) cd.get(&quot;state&quot;);
 93         dumpOnExit = (boolean) cd.get(&quot;dumpOnExit&quot;);
 94         size = (long) cd.get(&quot;size&quot;);
 95         disk = (boolean) cd.get(&quot;disk&quot;);
 96         maxAge = (Long) cd.get(&quot;maxAge&quot;);
 97         maxSize = (Long) cd.get(&quot;maxSize&quot;);
 98         startTime = (Long) cd.get(&quot;startTime&quot;);
 99         stopTime = (Long) cd.get(&quot;stopTime&quot;);
100         destination = (String) cd.get(&quot;destination&quot;);
101         durationInSeconds = (long) cd.get(&quot;duration&quot;);
102         settings = new LinkedHashMap&lt;&gt;();
103         Object map = cd.get(&quot;settings&quot;);
</pre>
</td>
</tr>
</table>
<center><a href="MBeanUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.management/aix/native/libmanagement_ext/UnixOperatingSystem.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>