<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/VM.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Threads.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="VMOps.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/runtime/VM.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 102,20 ***</span>
    private int          logMinObjAlignmentInBytes;
    private int          heapWordSize;
    private int          heapOopSize;
    private int          klassPtrSize;
    private int          oopSize;
<span class="line-removed">-   private final int    IndexSetSize;</span>
    /** -XX flags (value origin) */
    public static int    Flags_DEFAULT;
    public static int    Flags_COMMAND_LINE;
    public static int    Flags_ENVIRON_VAR;
    public static int    Flags_CONFIG_FILE;
    public static int    Flags_MANAGEMENT;
    public static int    Flags_ERGONOMIC;
    public static int    Flags_ATTACH_ON_DEMAND;
    public static int    Flags_INTERNAL;
    private static int   Flags_VALUE_ORIGIN_MASK;
    private static int   Flags_ORIG_COMMAND_LINE;
    /** This is only present in a non-core build */
    private CodeCache    codeCache;
    /** This is only present in a C1 build */
<span class="line-new-header">--- 102,20 ---</span>
    private int          logMinObjAlignmentInBytes;
    private int          heapWordSize;
    private int          heapOopSize;
    private int          klassPtrSize;
    private int          oopSize;
    /** -XX flags (value origin) */
    public static int    Flags_DEFAULT;
    public static int    Flags_COMMAND_LINE;
    public static int    Flags_ENVIRON_VAR;
    public static int    Flags_CONFIG_FILE;
    public static int    Flags_MANAGEMENT;
    public static int    Flags_ERGONOMIC;
    public static int    Flags_ATTACH_ON_DEMAND;
    public static int    Flags_INTERNAL;
<span class="line-added">+   public static int    Flags_JIMAGE_RESOURCE;</span>
    private static int   Flags_VALUE_ORIGIN_MASK;
    private static int   Flags_ORIG_COMMAND_LINE;
    /** This is only present in a non-core build */
    private CodeCache    codeCache;
    /** This is only present in a C1 build */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 198,10 ***</span>
<span class="line-new-header">--- 198,12 ---</span>
              return result + &quot;ergonomic&quot;;
          } else if (origin == Flags_ATTACH_ON_DEMAND) {
              return &quot;attach&quot;;
          } else if (origin == Flags_INTERNAL) {
              return &quot;internal&quot;;
<span class="line-added">+         } else if (origin == Flags_JIMAGE_RESOURCE) {</span>
<span class="line-added">+             return &quot;jimage&quot;;</span>
          } else {
              throw new IllegalStateException(
                  &quot;Unknown flag origin &quot; + origin + &quot; is detected in &quot; + name);
          }
       }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 482,14 ***</span>
      Flags_CONFIG_FILE = db.lookupIntConstant(&quot;JVMFlag::CONFIG_FILE&quot;).intValue();
      Flags_MANAGEMENT = db.lookupIntConstant(&quot;JVMFlag::MANAGEMENT&quot;).intValue();
      Flags_ERGONOMIC = db.lookupIntConstant(&quot;JVMFlag::ERGONOMIC&quot;).intValue();
      Flags_ATTACH_ON_DEMAND = db.lookupIntConstant(&quot;JVMFlag::ATTACH_ON_DEMAND&quot;).intValue();
      Flags_INTERNAL = db.lookupIntConstant(&quot;JVMFlag::INTERNAL&quot;).intValue();
      Flags_VALUE_ORIGIN_MASK = db.lookupIntConstant(&quot;JVMFlag::VALUE_ORIGIN_MASK&quot;).intValue();
      Flags_ORIG_COMMAND_LINE = db.lookupIntConstant(&quot;JVMFlag::ORIG_COMMAND_LINE&quot;).intValue();
      oopSize  = db.lookupIntConstant(&quot;oopSize&quot;).intValue();
<span class="line-removed">-     IndexSetSize = db.lookupIntConstant(&quot;CompactibleFreeListSpace::IndexSetSize&quot;).intValue();</span>
  
      intType = db.lookupType(&quot;int&quot;);
      uintType = db.lookupType(&quot;uint&quot;);
      intxType = db.lookupType(&quot;intx&quot;);
      uintxType = db.lookupType(&quot;uintx&quot;);
<span class="line-new-header">--- 484,14 ---</span>
      Flags_CONFIG_FILE = db.lookupIntConstant(&quot;JVMFlag::CONFIG_FILE&quot;).intValue();
      Flags_MANAGEMENT = db.lookupIntConstant(&quot;JVMFlag::MANAGEMENT&quot;).intValue();
      Flags_ERGONOMIC = db.lookupIntConstant(&quot;JVMFlag::ERGONOMIC&quot;).intValue();
      Flags_ATTACH_ON_DEMAND = db.lookupIntConstant(&quot;JVMFlag::ATTACH_ON_DEMAND&quot;).intValue();
      Flags_INTERNAL = db.lookupIntConstant(&quot;JVMFlag::INTERNAL&quot;).intValue();
<span class="line-added">+     Flags_JIMAGE_RESOURCE = db.lookupIntConstant(&quot;JVMFlag::JIMAGE_RESOURCE&quot;).intValue();</span>
      Flags_VALUE_ORIGIN_MASK = db.lookupIntConstant(&quot;JVMFlag::VALUE_ORIGIN_MASK&quot;).intValue();
      Flags_ORIG_COMMAND_LINE = db.lookupIntConstant(&quot;JVMFlag::ORIG_COMMAND_LINE&quot;).intValue();
      oopSize  = db.lookupIntConstant(&quot;oopSize&quot;).intValue();
  
      intType = db.lookupType(&quot;int&quot;);
      uintType = db.lookupType(&quot;uint&quot;);
      intxType = db.lookupType(&quot;intx&quot;);
      uintxType = db.lookupType(&quot;uintx&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 542,12 ***</span>
      for (Iterator iter = vmInitializedObservers.iterator(); iter.hasNext(); ) {
        ((Observer) iter.next()).update(null, null);
      }
  
      debugger.putHeapConst(soleInstance.getHeapOopSize(), soleInstance.getKlassPtrSize(),
<span class="line-modified">!                           Universe.getNarrowOopBase(), Universe.getNarrowOopShift(),</span>
<span class="line-modified">!                           Universe.getNarrowKlassBase(), Universe.getNarrowKlassShift());</span>
    }
  
    /** This is used by the debugging system */
    public static void shutdown() {
      soleInstance = null;
<span class="line-new-header">--- 544,12 ---</span>
      for (Iterator iter = vmInitializedObservers.iterator(); iter.hasNext(); ) {
        ((Observer) iter.next()).update(null, null);
      }
  
      debugger.putHeapConst(soleInstance.getHeapOopSize(), soleInstance.getKlassPtrSize(),
<span class="line-modified">!                           CompressedOops.getBase(), CompressedOops.getShift(),</span>
<span class="line-modified">!                           CompressedKlassPointers.getBase(), CompressedKlassPointers.getShift());</span>
    }
  
    /** This is used by the debugging system */
    public static void shutdown() {
      soleInstance = null;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 705,14 ***</span>
  
    public int getHeapOopSize() {
      return heapOopSize;
    }
  
<span class="line-removed">-   public int getIndexSetSize() {</span>
<span class="line-removed">-     return IndexSetSize;</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
    public int getKlassPtrSize() {
      return klassPtrSize;
    }
    /** Utility routine for getting data structure alignment correct */
    public long alignUp(long size, long alignment) {
<span class="line-new-header">--- 707,10 ---</span>
</pre>
<center><a href="Threads.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="VMOps.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>