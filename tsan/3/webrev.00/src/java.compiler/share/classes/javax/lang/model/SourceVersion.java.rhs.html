<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.compiler/share/classes/javax/lang/model/SourceVersion.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2005, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package javax.lang.model;
 27 
 28 import java.util.Collections;
 29 import java.util.Set;
 30 import java.util.HashSet;
 31 
 32 /**
 33  * Source versions of the Java&amp;trade; programming language.
 34  *
 35  * See the appropriate edition of
 36  * &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;
 37  * for information about a particular source version.
 38  *
 39  * &lt;p&gt;Note that additional source version constants will be added to
 40  * model future releases of the language.
 41  *
 42  * @author Joseph D. Darcy
 43  * @author Scott Seligman
 44  * @author Peter von der Ah&amp;eacute;
 45  * @since 1.6
 46  */
 47 public enum SourceVersion {
 48     /*
 49      * Summary of language evolution
 50      * 1.1: nested classes
 51      * 1.2: strictfp
 52      * 1.3: no changes
 53      * 1.4: assert
 54      * 1.5: annotations, generics, autoboxing, var-args...
 55      * 1.6: no changes
 56      * 1.7: diamond syntax, try-with-resources, etc.
 57      * 1.8: lambda expressions and default methods
 58      *   9: modules, small cleanups to 1.7 and 1.8 changes
 59      *  10: local-variable type inference (var)
 60      *  11: local-variable syntax for lambda parameters
<a name="2" id="anc2"></a><span class="line-modified"> 61      *  12: no changes (switch expressions in preview)</span>
<span class="line-modified"> 62      *  13: no changes (switch expressions and text blocks in preview)</span>
<span class="line-added"> 63      *  14: switch expressions (pattern matching and records in</span>
<span class="line-added"> 64      *      preview, text blocks in preview again)</span>
<span class="line-added"> 65      *  15: TBD</span>
 66      */
 67 
 68     /**
 69      * The original version.
 70      *
 71      * The language described in
 72      * &lt;cite&gt;The Java&amp;trade; Language Specification, First Edition&lt;/cite&gt;.
 73      */
 74     RELEASE_0,
 75 
 76     /**
 77      * The version recognized by the Java Platform 1.1.
 78      *
 79      * The language is {@code RELEASE_0} augmented with nested classes as described in the 1.1 update to
 80      * &lt;cite&gt;The Java&amp;trade; Language Specification, First Edition&lt;/cite&gt;.
 81      */
 82     RELEASE_1,
 83 
 84     /**
 85      * The version recognized by the Java 2 Platform, Standard Edition,
 86      * v 1.2.
 87      *
 88      * The language described in
 89      * &lt;cite&gt;The Java&amp;trade; Language Specification,
 90      * Second Edition&lt;/cite&gt;, which includes the {@code
 91      * strictfp} modifier.
 92      */
 93     RELEASE_2,
 94 
 95     /**
 96      * The version recognized by the Java 2 Platform, Standard Edition,
 97      * v 1.3.
 98      *
 99      * No major changes from {@code RELEASE_2}.
100      */
101     RELEASE_3,
102 
103     /**
104      * The version recognized by the Java 2 Platform, Standard Edition,
105      * v 1.4.
106      *
107      * Added a simple assertion facility.
108      */
109     RELEASE_4,
110 
111     /**
112      * The version recognized by the Java 2 Platform, Standard
113      * Edition 5.0.
114      *
115      * The language described in
116      * &lt;cite&gt;The Java&amp;trade; Language Specification,
117      * Third Edition&lt;/cite&gt;.  First release to support
118      * generics, annotations, autoboxing, var-args, enhanced {@code
119      * for} loop, and hexadecimal floating-point literals.
120      */
121     RELEASE_5,
122 
123     /**
124      * The version recognized by the Java Platform, Standard Edition
125      * 6.
126      *
127      * No major changes from {@code RELEASE_5}.
128      */
129     RELEASE_6,
130 
131     /**
132      * The version recognized by the Java Platform, Standard Edition
133      * 7.
134      *
135      * Additions in this release include, diamond syntax for
136      * constructors, {@code try}-with-resources, strings in switch,
137      * binary literals, and multi-catch.
138      * @since 1.7
139      */
140     RELEASE_7,
141 
142     /**
143      * The version recognized by the Java Platform, Standard Edition
144      * 8.
145      *
146      * Additions in this release include lambda expressions and default methods.
147      * @since 1.8
148      */
149     RELEASE_8,
150 
151     /**
152      * The version recognized by the Java Platform, Standard Edition
153      * 9.
154      *
155      * Additions in this release include modules and removal of a
156      * single underscore from the set of legal identifier names.
157      *
158      * @since 9
159      */
160      RELEASE_9,
161 
162     /**
163      * The version recognized by the Java Platform, Standard Edition
164      * 10.
165      *
166      * Additions in this release include local-variable type inference
167      * ({@code var}).
168      *
169      * @since 10
170      */
171      RELEASE_10,
172 
173     /**
174      * The version recognized by the Java Platform, Standard Edition
175      * 11.
176      *
177      * Additions in this release include local-variable syntax for
178      * lambda parameters.
179      *
180      * @since 11
181      */
182      RELEASE_11,
183 
184     /**
185      * The version recognized by the Java Platform, Standard Edition
186      * 12.
187      *
188      * @since 12
189      */
190      RELEASE_12,
191 
192     /**
193      * The version recognized by the Java Platform, Standard Edition
194      * 13.
195      *
196      * @since 13
197      */
<a name="3" id="anc3"></a><span class="line-modified">198      RELEASE_13,</span>
<span class="line-added">199 </span>
<span class="line-added">200     /**</span>
<span class="line-added">201      * The version recognized by the Java Platform, Standard Edition</span>
<span class="line-added">202      * 14.</span>
<span class="line-added">203      *</span>
<span class="line-added">204      * Additions in this release include switch expressions.</span>
<span class="line-added">205      *</span>
<span class="line-added">206      * @since 14</span>
<span class="line-added">207      */</span>
<span class="line-added">208     RELEASE_14,</span>
<span class="line-added">209 </span>
<span class="line-added">210     /**</span>
<span class="line-added">211      * The version recognized by the Java Platform, Standard Edition</span>
<span class="line-added">212      * 15.</span>
<span class="line-added">213      *</span>
<span class="line-added">214      * @since 15</span>
<span class="line-added">215      */</span>
<span class="line-added">216      RELEASE_15;</span>
217 
218     // Note that when adding constants for newer releases, the
219     // behavior of latest() and latestSupported() must be updated too.
220 
221     /**
222      * Returns the latest source version that can be modeled.
223      *
224      * @return the latest source version that can be modeled
225      */
226     public static SourceVersion latest() {
<a name="4" id="anc4"></a><span class="line-modified">227         return RELEASE_15;</span>
228     }
229 
230     private static final SourceVersion latestSupported = getLatestSupported();
231 
<a name="5" id="anc5"></a><span class="line-added">232     /*</span>
<span class="line-added">233      * The integer version to enum constant mapping implemented by</span>
<span class="line-added">234      * this method assumes the JEP 322: &quot;Time-Based Release</span>
<span class="line-added">235      * Versioning&quot; scheme is in effect. This scheme began in JDK</span>
<span class="line-added">236      * 10. If the JDK versioning scheme is revised, this method may</span>
<span class="line-added">237      * need to be updated accordingly.</span>
<span class="line-added">238      */</span>
239     private static SourceVersion getLatestSupported() {
<a name="6" id="anc6"></a><span class="line-modified">240         int intVersion = Runtime.version().feature();</span>
<span class="line-modified">241         return (intVersion &gt;= 11) ?</span>
<span class="line-modified">242             valueOf(&quot;RELEASE_&quot; + Math.min(15, intVersion)):</span>
<span class="line-modified">243             RELEASE_10;</span>




















244     }
245 
246     /**
247      * Returns the latest source version fully supported by the
<a name="7" id="anc7"></a><span class="line-modified">248      * current execution environment.  {@code RELEASE_9} or later must</span>
249      * be returned.
250      *
<a name="8" id="anc8"></a><span class="line-added">251      * @apiNote This method is included alongside {@link latest} to</span>
<span class="line-added">252      * allow identification of situations where the language model API</span>
<span class="line-added">253      * is running on a platform version different than the latest</span>
<span class="line-added">254      * version modeled by the API. One way that sort of situation can</span>
<span class="line-added">255      * occur is if an IDE or similar tool is using the API to model</span>
<span class="line-added">256      * source version &lt;i&gt;N&lt;/i&gt; while running on platform version</span>
<span class="line-added">257      * (&lt;i&gt;N&lt;/i&gt;&amp;nbsp;-&amp;nbsp;1). Running in this configuration is</span>
<span class="line-added">258      * supported by the API. Running an API on platform versions</span>
<span class="line-added">259      * earlier than (&lt;i&gt;N&lt;/i&gt;&amp;nbsp;-&amp;nbsp;1) or later than &lt;i&gt;N&lt;/i&gt;</span>
<span class="line-added">260      * may or may not work as an implementation detail. If an</span>
<span class="line-added">261      * annotation processor was generating code to run under the</span>
<span class="line-added">262      * current execution environment, the processor should only use</span>
<span class="line-added">263      * platform features up to the {@code latestSupported} release,</span>
<span class="line-added">264      * which may be earlier than the {@code latest} release.</span>
<span class="line-added">265      *</span>
266      * @return the latest source version that is fully supported
267      */
268     public static SourceVersion latestSupported() {
269         return latestSupported;
270     }
271 
272     /**
273      * Returns whether or not {@code name} is a syntactically valid
274      * identifier (simple name) or keyword in the latest source
275      * version.  The method returns {@code true} if the name consists
276      * of an initial character for which {@link
277      * Character#isJavaIdentifierStart(int)} returns {@code true},
278      * followed only by characters for which {@link
279      * Character#isJavaIdentifierPart(int)} returns {@code true}.
280      * This pattern matches regular identifiers, keywords, restricted
<a name="9" id="anc9"></a><span class="line-modified">281      * keywords, restricted identifiers and the literals {@code &quot;true&quot;},</span>
<span class="line-modified">282      * {@code &quot;false&quot;}, {@code &quot;null&quot;}.</span>
283      *
284      * The method returns {@code false} for all other strings.
285      *
286      * @param name the string to check
287      * @return {@code true} if this string is a
288      * syntactically valid identifier or keyword, {@code false}
289      * otherwise.
<a name="10" id="anc10"></a><span class="line-added">290      *</span>
<span class="line-added">291      * @jls 3.8 Identifiers</span>
292      */
293     public static boolean isIdentifier(CharSequence name) {
294         String id = name.toString();
295 
296         if (id.length() == 0) {
297             return false;
298         }
299         int cp = id.codePointAt(0);
300         if (!Character.isJavaIdentifierStart(cp)) {
301             return false;
302         }
303         for (int i = Character.charCount(cp);
304                 i &lt; id.length();
305                 i += Character.charCount(cp)) {
306             cp = id.codePointAt(i);
307             if (!Character.isJavaIdentifierPart(cp)) {
308                 return false;
309             }
310         }
311         return true;
312     }
313 
314     /**
315      * Returns whether or not {@code name} is a syntactically valid
<a name="11" id="anc11"></a><span class="line-modified">316      * qualified name in the latest source version.</span>
<span class="line-modified">317      *</span>
<span class="line-modified">318      * Syntactically, a qualified name is a sequence of identifiers</span>
<span class="line-added">319      * separated by period characters (&quot;{@code .}&quot;). This method</span>
<span class="line-added">320      * splits the input string into period-separated segments and</span>
<span class="line-added">321      * applies checks to each segment in turn.</span>
<span class="line-added">322      *</span>
<span class="line-added">323      * Unlike {@link #isIdentifier isIdentifier}, this method returns</span>
<span class="line-added">324      * {@code false} for keywords, boolean literals, and the null</span>
<span class="line-added">325      * literal in any segment.</span>
326      *
327      * This method returns {@code true} for &lt;i&gt;restricted
<a name="12" id="anc12"></a><span class="line-modified">328      * keywords&lt;/i&gt; and &lt;i&gt;restricted identifiers&lt;/i&gt;</span>
329      *
330      * @param name the string to check
331      * @return {@code true} if this string is a
332      * syntactically valid name, {@code false} otherwise.
333      * @jls 3.9 Keywords
334      * @jls 6.2 Names and Identifiers
335      */
336     public static boolean isName(CharSequence name) {
337         return isName(name, latest());
338     }
339 
340     /**
341      * Returns whether or not {@code name} is a syntactically valid
<a name="13" id="anc13"></a><span class="line-modified">342      * qualified name in the given source version.</span>
<span class="line-modified">343      *</span>
<span class="line-modified">344      * Syntactically, a qualified name is a sequence of identifiers</span>
<span class="line-added">345      * separated by period characters (&quot;{@code .}&quot;). This method</span>
<span class="line-added">346      * splits the input string into period-separated segments and</span>
<span class="line-added">347      * applies checks to each segment in turn.</span>
<span class="line-added">348      *</span>
<span class="line-added">349      * Unlike {@link #isIdentifier isIdentifier}, this method returns</span>
<span class="line-added">350      * {@code false} for keywords, boolean literals, and the null</span>
<span class="line-added">351      * literal in any segment.</span>
352      *
353      * This method returns {@code true} for &lt;i&gt;restricted
<a name="14" id="anc14"></a><span class="line-modified">354      * keywords&lt;/i&gt; and &lt;i&gt;restricted identifiers&lt;/i&gt;</span>
355      *
356      * @param name the string to check
357      * @param version the version to use
358      * @return {@code true} if this string is a
359      * syntactically valid name, {@code false} otherwise.
360      * @jls 3.9 Keywords
361      * @jls 6.2 Names and Identifiers
362      * @since 9
363      */
364     public static boolean isName(CharSequence name, SourceVersion version) {
365         String id = name.toString();
366 
367         for(String s : id.split(&quot;\\.&quot;, -1)) {
368             if (!isIdentifier(s) || isKeyword(s, version))
369                 return false;
370         }
371         return true;
372     }
373 
374     /**
375      * Returns whether or not {@code s} is a keyword, boolean literal,
376      * or null literal in the latest source version.
377      * This method returns {@code false} for &lt;i&gt;restricted
<a name="15" id="anc15"></a><span class="line-modified">378      * keywords&lt;/i&gt; and &lt;i&gt;restricted identifiers&lt;/i&gt;.</span>
379      *
380      * @param s the string to check
381      * @return {@code true} if {@code s} is a keyword, or boolean
382      * literal, or null literal, {@code false} otherwise.
383      * @jls 3.9 Keywords
384      * @jls 3.10.3 Boolean Literals
385      * @jls 3.10.7 The Null Literal
386      */
387     public static boolean isKeyword(CharSequence s) {
388         return isKeyword(s, latest());
389     }
390 
391     /**
392      * Returns whether or not {@code s} is a keyword, boolean literal,
393      * or null literal in the given source version.
394      * This method returns {@code false} for &lt;i&gt;restricted
<a name="16" id="anc16"></a><span class="line-modified">395      * keywords&lt;/i&gt; and &lt;i&gt;restricted identifiers&lt;/i&gt;.</span>
396      *
397      * @param s the string to check
398      * @param version the version to use
399      * @return {@code true} if {@code s} is a keyword, or boolean
400      * literal, or null literal, {@code false} otherwise.
401      * @jls 3.9 Keywords
402      * @jls 3.10.3 Boolean Literals
403      * @jls 3.10.7 The Null Literal
404      * @since 9
405      */
406     public static boolean isKeyword(CharSequence s, SourceVersion version) {
407         String id = s.toString();
408         switch(id) {
409             // A trip through history
410         case &quot;strictfp&quot;:
411             return version.compareTo(RELEASE_2) &gt;= 0;
412 
413         case &quot;assert&quot;:
414             return version.compareTo(RELEASE_4) &gt;= 0;
415 
416         case &quot;enum&quot;:
417             return version.compareTo(RELEASE_5) &gt;= 0;
418 
419         case &quot;_&quot;:
420             return version.compareTo(RELEASE_9) &gt;= 0;
421 
422             // Keywords common across versions
423 
424             // Modifiers
425         case &quot;public&quot;:    case &quot;protected&quot;: case &quot;private&quot;:
426         case &quot;abstract&quot;:  case &quot;static&quot;:    case &quot;final&quot;:
427         case &quot;transient&quot;: case &quot;volatile&quot;:  case &quot;synchronized&quot;:
428         case &quot;native&quot;:
429 
430             // Declarations
431         case &quot;class&quot;:     case &quot;interface&quot;: case &quot;extends&quot;:
432         case &quot;package&quot;:   case &quot;throws&quot;:    case &quot;implements&quot;:
433 
434             // Primitive types and void
435         case &quot;boolean&quot;:   case &quot;byte&quot;:      case &quot;char&quot;:
436         case &quot;short&quot;:     case &quot;int&quot;:       case &quot;long&quot;:
437         case &quot;float&quot;:     case &quot;double&quot;:
438         case &quot;void&quot;:
439 
440             // Control flow
441         case &quot;if&quot;:      case &quot;else&quot;:
442         case &quot;try&quot;:     case &quot;catch&quot;:    case &quot;finally&quot;:
443         case &quot;do&quot;:      case &quot;while&quot;:
444         case &quot;for&quot;:     case &quot;continue&quot;:
445         case &quot;switch&quot;:  case &quot;case&quot;:     case &quot;default&quot;:
446         case &quot;break&quot;:   case &quot;throw&quot;:    case &quot;return&quot;:
447 
448             // Other keywords
449         case  &quot;this&quot;:   case &quot;new&quot;:      case &quot;super&quot;:
450         case &quot;import&quot;:  case &quot;instanceof&quot;:
451 
452             // Forbidden!
453         case &quot;goto&quot;:        case &quot;const&quot;:
454 
455             // literals
456         case &quot;null&quot;:         case &quot;true&quot;:       case &quot;false&quot;:
457             return true;
458 
459         default:
460             return false;
461         }
462     }
463 }
<a name="17" id="anc17"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="17" type="hidden" />
</body>
</html>