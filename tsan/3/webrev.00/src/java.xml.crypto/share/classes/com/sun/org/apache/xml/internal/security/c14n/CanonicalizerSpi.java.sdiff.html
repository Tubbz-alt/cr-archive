<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Canonicalizer.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="implementations/Canonicalizer20010315.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  9  * regarding copyright ownership. The ASF licenses this file
 10  * to you under the Apache License, Version 2.0 (the
 11  * &quot;License&quot;); you may not use this file except in compliance
 12  * with the License. You may obtain a copy of the License at
 13  *
 14  * http://www.apache.org/licenses/LICENSE-2.0
 15  *
 16  * Unless required by applicable law or agreed to in writing,
 17  * software distributed under the License is distributed on an
 18  * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 19  * KIND, either express or implied. See the License for the
 20  * specific language governing permissions and limitations
 21  * under the License.
 22  */
 23 package com.sun.org.apache.xml.internal.security.c14n;
 24 
 25 import java.io.ByteArrayInputStream;
 26 import java.io.OutputStream;
 27 import java.util.Set;
 28 
<span class="line-removed"> 29 import javax.xml.parsers.DocumentBuilder;</span>
<span class="line-removed"> 30 </span>
 31 import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
 32 import org.w3c.dom.Document;
 33 import org.w3c.dom.Node;
 34 import org.w3c.dom.NodeList;
 35 import org.xml.sax.InputSource;
 36 
 37 /**
 38  * Base class which all Canonicalization algorithms extend.
 39  *
 40  */
 41 public abstract class CanonicalizerSpi {
 42 
 43     /** Reset the writer after a c14n */
 44     protected boolean reset = false;
 45     protected boolean secureValidation;
 46 
 47     /**
 48      * Method canonicalize
 49      *
 50      * @param inputBytes
 51      * @return the c14n bytes.
 52      *
 53      * @throws CanonicalizationException
 54      * @throws java.io.IOException
 55      * @throws javax.xml.parsers.ParserConfigurationException
 56      * @throws org.xml.sax.SAXException
 57      */
 58     public byte[] engineCanonicalize(byte[] inputBytes)
 59         throws javax.xml.parsers.ParserConfigurationException, java.io.IOException,
 60         org.xml.sax.SAXException, CanonicalizationException {
 61 
 62         Document document = null;
 63         try (java.io.InputStream bais = new ByteArrayInputStream(inputBytes)) {
 64             InputSource in = new InputSource(bais);
 65 
<span class="line-modified"> 66             DocumentBuilder db = XMLUtils.createDocumentBuilder(false, secureValidation);</span>
<span class="line-removed"> 67 </span>
<span class="line-removed"> 68             document = db.parse(in);</span>
 69         }
 70         return this.engineCanonicalizeSubTree(document);
 71     }
 72 
 73     /**
 74      * Method engineCanonicalizeXPathNodeSet
 75      *
 76      * @param xpathNodeSet
 77      * @return the c14n bytes
 78      * @throws CanonicalizationException
 79      */
 80     public byte[] engineCanonicalizeXPathNodeSet(NodeList xpathNodeSet)
 81         throws CanonicalizationException {
 82         return this.engineCanonicalizeXPathNodeSet(
 83             XMLUtils.convertNodelistToSet(xpathNodeSet)
 84         );
 85     }
 86 
 87     /**
 88      * Method engineCanonicalizeXPathNodeSet
</pre>
</td>
<td>
<hr />
<pre>
  9  * regarding copyright ownership. The ASF licenses this file
 10  * to you under the Apache License, Version 2.0 (the
 11  * &quot;License&quot;); you may not use this file except in compliance
 12  * with the License. You may obtain a copy of the License at
 13  *
 14  * http://www.apache.org/licenses/LICENSE-2.0
 15  *
 16  * Unless required by applicable law or agreed to in writing,
 17  * software distributed under the License is distributed on an
 18  * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 19  * KIND, either express or implied. See the License for the
 20  * specific language governing permissions and limitations
 21  * under the License.
 22  */
 23 package com.sun.org.apache.xml.internal.security.c14n;
 24 
 25 import java.io.ByteArrayInputStream;
 26 import java.io.OutputStream;
 27 import java.util.Set;
 28 


 29 import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
 30 import org.w3c.dom.Document;
 31 import org.w3c.dom.Node;
 32 import org.w3c.dom.NodeList;
 33 import org.xml.sax.InputSource;
 34 
 35 /**
 36  * Base class which all Canonicalization algorithms extend.
 37  *
 38  */
 39 public abstract class CanonicalizerSpi {
 40 
 41     /** Reset the writer after a c14n */
 42     protected boolean reset = false;
 43     protected boolean secureValidation;
 44 
 45     /**
 46      * Method canonicalize
 47      *
 48      * @param inputBytes
 49      * @return the c14n bytes.
 50      *
 51      * @throws CanonicalizationException
 52      * @throws java.io.IOException
 53      * @throws javax.xml.parsers.ParserConfigurationException
 54      * @throws org.xml.sax.SAXException
 55      */
 56     public byte[] engineCanonicalize(byte[] inputBytes)
 57         throws javax.xml.parsers.ParserConfigurationException, java.io.IOException,
 58         org.xml.sax.SAXException, CanonicalizationException {
 59 
 60         Document document = null;
 61         try (java.io.InputStream bais = new ByteArrayInputStream(inputBytes)) {
 62             InputSource in = new InputSource(bais);
 63 
<span class="line-modified"> 64             document = XMLUtils.read(in, secureValidation);</span>


 65         }
 66         return this.engineCanonicalizeSubTree(document);
 67     }
 68 
 69     /**
 70      * Method engineCanonicalizeXPathNodeSet
 71      *
 72      * @param xpathNodeSet
 73      * @return the c14n bytes
 74      * @throws CanonicalizationException
 75      */
 76     public byte[] engineCanonicalizeXPathNodeSet(NodeList xpathNodeSet)
 77         throws CanonicalizationException {
 78         return this.engineCanonicalizeXPathNodeSet(
 79             XMLUtils.convertNodelistToSet(xpathNodeSet)
 80         );
 81     }
 82 
 83     /**
 84      * Method engineCanonicalizeXPathNodeSet
</pre>
</td>
</tr>
</table>
<center><a href="Canonicalizer.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="implementations/Canonicalizer20010315.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>