<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../algorithms/implementations/SignatureECDSA.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="CanonicalizerSpi.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/c14n/Canonicalizer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -28,12 +28,10 @@</span>
  import java.nio.charset.StandardCharsets;
  import java.util.Map;
  import java.util.Set;
  import java.util.concurrent.ConcurrentHashMap;
  
<span class="udiff-line-removed">- import javax.xml.parsers.DocumentBuilder;</span>
<span class="udiff-line-removed">- </span>
  import com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer11_OmitComments;
  import com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer11_WithComments;
  import com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315ExclOmitComments;
  import com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315ExclWithComments;
  import com.sun.org.apache.xml.internal.security.c14n.implementations.Canonicalizer20010315OmitComments;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -259,21 +257,11 @@</span>
          java.io.IOException, org.xml.sax.SAXException, CanonicalizationException {
          Document document = null;
          try (InputStream bais = new ByteArrayInputStream(inputBytes)) {
              InputSource in = new InputSource(bais);
  
<span class="udiff-line-removed">-             // needs to validate for ID attribute normalization</span>
<span class="udiff-line-removed">-             DocumentBuilder db = XMLUtils.createDocumentBuilder(true, secureValidation);</span>
<span class="udiff-line-removed">- </span>
              /*
<span class="udiff-line-removed">-              * for some of the test vectors from the specification,</span>
<span class="udiff-line-removed">-              * there has to be a validating parser for ID attributes, default</span>
<span class="udiff-line-removed">-              * attribute values, NMTOKENS, etc.</span>
<span class="udiff-line-removed">-              * Unfortunately, the test vectors do use different DTDs or</span>
<span class="udiff-line-removed">-              * even no DTD. So Xerces 1.3.1 fires many warnings about using</span>
<span class="udiff-line-removed">-              * ErrorHandlers.</span>
<span class="udiff-line-removed">-              *</span>
               * Text from the spec:
               *
               * The input octet stream MUST contain a well-formed XML document,
               * but the input need not be validated. However, the attribute
               * value normalization and entity reference resolution MUST be
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -283,13 +271,11 @@</span>
               * in each element. Thus, the declarations in the document type
               * declaration are used to help create the canonical form, even
               * though the document type declaration is not retained in the
               * canonical form.
               */
<span class="udiff-line-modified-removed">-             db.setErrorHandler(new com.sun.org.apache.xml.internal.security.utils.IgnoreAllErrorHandler());</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-             document = db.parse(in);</span>
<span class="udiff-line-modified-added">+             document = XMLUtils.read(in, secureValidation);</span>
          }
          return this.canonicalizeSubtree(document);
      }
  
      /**
</pre>
<center><a href="../algorithms/implementations/SignatureECDSA.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="CanonicalizerSpi.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>