<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/utils/resolver/implementations/ResolverDirectHTTP.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../ResourceResolver.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../javax/xml/crypto/dsig/CanonicalizationMethod.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/utils/resolver/implementations/ResolverDirectHTTP.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 31,13 ***</span>
  import java.net.URISyntaxException;
  import java.net.URI;
  import java.net.URL;
  import java.net.URLConnection;
  import java.nio.charset.StandardCharsets;
<span class="line-removed">- import java.util.Base64;</span>
  
  import com.sun.org.apache.xml.internal.security.signature.XMLSignatureInput;
  import com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverContext;
  import com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverException;
  import com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverSpi;
  
  /**
<span class="line-new-header">--- 31,13 ---</span>
  import java.net.URISyntaxException;
  import java.net.URI;
  import java.net.URL;
  import java.net.URLConnection;
  import java.nio.charset.StandardCharsets;
  
  import com.sun.org.apache.xml.internal.security.signature.XMLSignatureInput;
<span class="line-added">+ import com.sun.org.apache.xml.internal.security.utils.XMLUtils;</span>
  import com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverContext;
  import com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverException;
  import com.sun.org.apache.xml.internal.security.utils.resolver.ResourceResolverSpi;
  
  /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 55,11 ***</span>
   * resourceResolver.setProperty(&quot;http.proxy.username&quot;, &quot;proxyuser3&quot;);
   * resourceResolver.setProperty(&quot;http.proxy.password&quot;, &quot;secretca&quot;);
   * &lt;/PRE&gt;
   *
   * @see &lt;A HREF=&quot;http://www.javaworld.com/javaworld/javatips/jw-javatip42_p.html&quot;&gt;Java Tip 42: Write Java apps that work with proxy-based firewalls&lt;/A&gt;
<span class="line-modified">!  * @see &lt;A HREF=&quot;http://docs.oracle.com/javase/1.4.2/docs/guide/net/properties.html&quot;&gt;SUN J2SE docs for network properties&lt;/A&gt;</span>
   * @see &lt;A HREF=&quot;http://metalab.unc.edu/javafaq/javafaq.html#proxy&quot;&gt;The JAVA FAQ Question 9.5: How do I make Java work with a proxy server?&lt;/A&gt;
   */
  public class ResolverDirectHTTP extends ResourceResolverSpi {
  
      private static final com.sun.org.slf4j.internal.Logger LOG =
<span class="line-new-header">--- 55,11 ---</span>
   * resourceResolver.setProperty(&quot;http.proxy.username&quot;, &quot;proxyuser3&quot;);
   * resourceResolver.setProperty(&quot;http.proxy.password&quot;, &quot;secretca&quot;);
   * &lt;/PRE&gt;
   *
   * @see &lt;A HREF=&quot;http://www.javaworld.com/javaworld/javatips/jw-javatip42_p.html&quot;&gt;Java Tip 42: Write Java apps that work with proxy-based firewalls&lt;/A&gt;
<span class="line-modified">!  * @see &lt;A HREF=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html&quot;&gt;JDK docs for network properties&lt;/A&gt;</span>
   * @see &lt;A HREF=&quot;http://metalab.unc.edu/javafaq/javafaq.html#proxy&quot;&gt;The JAVA FAQ Question 9.5: How do I make Java work with a proxy server?&lt;/A&gt;
   */
  public class ResolverDirectHTTP extends ResourceResolverSpi {
  
      private static final com.sun.org.slf4j.internal.Logger LOG =
</pre>
<hr />
<pre>
<span class="line-old-header">*** 120,11 ***</span>
  
                  if (user != null &amp;&amp; pass != null) {
                      urlConnection = openConnection(url);
  
                      String password = user + &quot;:&quot; + pass;
<span class="line-modified">!                     String encodedPassword = Base64.getMimeEncoder().encodeToString(password.getBytes(StandardCharsets.ISO_8859_1));</span>
  
                      // set authentication property in the http header
                      urlConnection.setRequestProperty(&quot;Authorization&quot;,
                                                       &quot;Basic &quot; + encodedPassword);
                  }
<span class="line-new-header">--- 120,11 ---</span>
  
                  if (user != null &amp;&amp; pass != null) {
                      urlConnection = openConnection(url);
  
                      String password = user + &quot;:&quot; + pass;
<span class="line-modified">!                     String encodedPassword = XMLUtils.encodeToString(password.getBytes(StandardCharsets.ISO_8859_1));</span>
  
                      // set authentication property in the http header
                      urlConnection.setRequestProperty(&quot;Authorization&quot;,
                                                       &quot;Basic &quot; + encodedPassword);
                  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 185,11 ***</span>
          if (proxy != null) {
              urlConnection = url.openConnection(proxy);
  
              if (proxyUser != null &amp;&amp; proxyPass != null) {
                  String password = proxyUser + &quot;:&quot; + proxyPass;
<span class="line-modified">!                 String authString = &quot;Basic &quot; + Base64.getMimeEncoder().encodeToString(password.getBytes(StandardCharsets.ISO_8859_1));</span>
  
                  urlConnection.setRequestProperty(&quot;Proxy-Authorization&quot;, authString);
              }
          } else {
              urlConnection = url.openConnection();
<span class="line-new-header">--- 185,11 ---</span>
          if (proxy != null) {
              urlConnection = url.openConnection(proxy);
  
              if (proxyUser != null &amp;&amp; proxyPass != null) {
                  String password = proxyUser + &quot;:&quot; + proxyPass;
<span class="line-modified">!                 String authString = &quot;Basic &quot; + XMLUtils.encodeToString(password.getBytes(StandardCharsets.ISO_8859_1));</span>
  
                  urlConnection.setRequestProperty(&quot;Proxy-Authorization&quot;, authString);
              }
          } else {
              urlConnection = url.openConnection();
</pre>
<center><a href="../ResourceResolver.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../javax/xml/crypto/dsig/CanonicalizationMethod.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>