<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/transforms/params/XPathFilterCHGPContainer.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../implementations/TransformXSLT.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../utils/Constants.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/transforms/params/XPathFilterCHGPContainer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -28,10 +28,11 @@</span>
  import com.sun.org.apache.xml.internal.security.utils.ElementProxy;
  import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
  import org.w3c.dom.Document;
  import org.w3c.dom.Element;
  import org.w3c.dom.Node;
<span class="udiff-line-added">+ import org.w3c.dom.Text;</span>
  
  /**
   * Implements the parameters for a custom Transform which has a better performance
   * than the xfilter2.
   *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -202,11 +203,11 @@</span>
          Element xElem =
              XMLUtils.selectNode(
                  getElement().getFirstChild(), this.getBaseNamespace(), type, 0
              );
  
<span class="udiff-line-modified-removed">-         return XMLUtils.getFullTextChildrenFromElement(xElem);</span>
<span class="udiff-line-modified-added">+         return XMLUtils.getFullTextChildrenFromNode(xElem);</span>
      }
  
      /**
       * Method getIncludeButSearch
       *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -256,15 +257,27 @@</span>
  
          if (this.length(this.getBaseNamespace(), type) != 1) {
              return null;
          }
  
<span class="udiff-line-modified-removed">-         return XMLUtils.selectNodeText(</span>
<span class="udiff-line-modified-added">+         return selectNodeText(</span>
              getFirstChild(), this.getBaseNamespace(), type, 0
          );
      }
  
<span class="udiff-line-added">+     private static Text selectNodeText(Node sibling, String uri, String nodeName, int number) {</span>
<span class="udiff-line-added">+         Node n = XMLUtils.selectNode(sibling, uri, nodeName, number);</span>
<span class="udiff-line-added">+         if (n == null) {</span>
<span class="udiff-line-added">+             return null;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         n = n.getFirstChild();</span>
<span class="udiff-line-added">+         while (n != null &amp;&amp; n.getNodeType() != Node.TEXT_NODE) {</span>
<span class="udiff-line-added">+             n = n.getNextSibling();</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         return (Text)n;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * Method getHereContextNodeIncludeButSearch
       *
       * @return the string
       */
</pre>
<center><a href="../implementations/TransformXSLT.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../utils/Constants.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>