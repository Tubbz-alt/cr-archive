<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.xml.crypto/share/classes/com/sun/org/apache/xml/internal/security/c14n/CanonicalizerSpi.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * reserved comment block
  3  * DO NOT REMOVE OR ALTER!
  4  */
  5 /**
  6  * Licensed to the Apache Software Foundation (ASF) under one
  7  * or more contributor license agreements. See the NOTICE file
  8  * distributed with this work for additional information
  9  * regarding copyright ownership. The ASF licenses this file
 10  * to you under the Apache License, Version 2.0 (the
 11  * &quot;License&quot;); you may not use this file except in compliance
 12  * with the License. You may obtain a copy of the License at
 13  *
 14  * http://www.apache.org/licenses/LICENSE-2.0
 15  *
 16  * Unless required by applicable law or agreed to in writing,
 17  * software distributed under the License is distributed on an
 18  * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 19  * KIND, either express or implied. See the License for the
 20  * specific language governing permissions and limitations
 21  * under the License.
 22  */
 23 package com.sun.org.apache.xml.internal.security.c14n;
 24 
 25 import java.io.ByteArrayInputStream;
 26 import java.io.OutputStream;
 27 import java.util.Set;
 28 
<a name="1" id="anc1"></a>

 29 import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
 30 import org.w3c.dom.Document;
 31 import org.w3c.dom.Node;
 32 import org.w3c.dom.NodeList;
 33 import org.xml.sax.InputSource;
 34 
 35 /**
 36  * Base class which all Canonicalization algorithms extend.
 37  *
 38  */
 39 public abstract class CanonicalizerSpi {
 40 
 41     /** Reset the writer after a c14n */
 42     protected boolean reset = false;
 43     protected boolean secureValidation;
 44 
 45     /**
 46      * Method canonicalize
 47      *
 48      * @param inputBytes
 49      * @return the c14n bytes.
 50      *
 51      * @throws CanonicalizationException
 52      * @throws java.io.IOException
 53      * @throws javax.xml.parsers.ParserConfigurationException
 54      * @throws org.xml.sax.SAXException
 55      */
 56     public byte[] engineCanonicalize(byte[] inputBytes)
 57         throws javax.xml.parsers.ParserConfigurationException, java.io.IOException,
 58         org.xml.sax.SAXException, CanonicalizationException {
 59 
 60         Document document = null;
 61         try (java.io.InputStream bais = new ByteArrayInputStream(inputBytes)) {
 62             InputSource in = new InputSource(bais);
 63 
<a name="2" id="anc2"></a><span class="line-modified"> 64             document = XMLUtils.read(in, secureValidation);</span>


 65         }
 66         return this.engineCanonicalizeSubTree(document);
 67     }
 68 
 69     /**
 70      * Method engineCanonicalizeXPathNodeSet
 71      *
 72      * @param xpathNodeSet
 73      * @return the c14n bytes
 74      * @throws CanonicalizationException
 75      */
 76     public byte[] engineCanonicalizeXPathNodeSet(NodeList xpathNodeSet)
 77         throws CanonicalizationException {
 78         return this.engineCanonicalizeXPathNodeSet(
 79             XMLUtils.convertNodelistToSet(xpathNodeSet)
 80         );
 81     }
 82 
 83     /**
 84      * Method engineCanonicalizeXPathNodeSet
 85      *
 86      * @param xpathNodeSet
 87      * @param inclusiveNamespaces
 88      * @return the c14n bytes
 89      * @throws CanonicalizationException
 90      */
 91     public byte[] engineCanonicalizeXPathNodeSet(NodeList xpathNodeSet, String inclusiveNamespaces)
 92         throws CanonicalizationException {
 93         return this.engineCanonicalizeXPathNodeSet(
 94             XMLUtils.convertNodelistToSet(xpathNodeSet), inclusiveNamespaces
 95         );
 96     }
 97 
 98     /**
 99      * Returns the URI of this engine.
100      * @return the URI
101      */
102     public abstract String engineGetURI();
103 
104     /**
105      * Returns true if comments are included
106      * @return true if comments are included
107      */
108     public abstract boolean engineGetIncludeComments();
109 
110     /**
111      * C14n a nodeset
112      *
113      * @param xpathNodeSet
114      * @return the c14n bytes
115      * @throws CanonicalizationException
116      */
117     public abstract byte[] engineCanonicalizeXPathNodeSet(Set&lt;Node&gt; xpathNodeSet)
118         throws CanonicalizationException;
119 
120     /**
121      * C14n a nodeset
122      *
123      * @param xpathNodeSet
124      * @param inclusiveNamespaces
125      * @return the c14n bytes
126      * @throws CanonicalizationException
127      */
128     public abstract byte[] engineCanonicalizeXPathNodeSet(
129         Set&lt;Node&gt; xpathNodeSet, String inclusiveNamespaces
130     ) throws CanonicalizationException;
131 
132     /**
133      * C14n a node tree.
134      *
135      * @param rootNode
136      * @return the c14n bytes
137      * @throws CanonicalizationException
138      */
139     public abstract byte[] engineCanonicalizeSubTree(Node rootNode)
140         throws CanonicalizationException;
141 
142     /**
143      * C14n a node tree.
144      *
145      * @param rootNode
146      * @param inclusiveNamespaces
147      * @return the c14n bytes
148      * @throws CanonicalizationException
149      */
150     public abstract byte[] engineCanonicalizeSubTree(Node rootNode, String inclusiveNamespaces)
151         throws CanonicalizationException;
152 
153     /**
154      * C14n a node tree.
155      *
156      * @param rootNode
157      * @param inclusiveNamespaces
158      * @param propagateDefaultNamespace If true the default namespace will be propagated to the c14n-ized root element
159      * @return the c14n bytes
160      * @throws CanonicalizationException
161      */
162     public abstract byte[] engineCanonicalizeSubTree(
163             Node rootNode, String inclusiveNamespaces, boolean propagateDefaultNamespace)
164             throws CanonicalizationException;
165 
166     /**
167      * Sets the writer where the canonicalization ends. ByteArrayOutputStream if
168      * none is set.
169      * @param os
170      */
171     public abstract void setWriter(OutputStream os);
172 
173     public boolean isSecureValidation() {
174         return secureValidation;
175     }
176 
177     public void setSecureValidation(boolean secureValidation) {
178         this.secureValidation = secureValidation;
179     }
180 
181 }
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>