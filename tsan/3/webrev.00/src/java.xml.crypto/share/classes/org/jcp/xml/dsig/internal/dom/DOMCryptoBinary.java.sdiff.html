<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMCryptoBinary.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DOMCanonicalXMLC14NMethod.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMDigestMethod.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMCryptoBinary.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>




  1 /**
  2  * Licensed to the Apache Software Foundation (ASF) under one
  3  * or more contributor license agreements. See the NOTICE file
  4  * distributed with this work for additional information
  5  * regarding copyright ownership. The ASF licenses this file
  6  * to you under the Apache License, Version 2.0 (the
  7  * &quot;License&quot;); you may not use this file except in compliance
  8  * with the License. You may obtain a copy of the License at
  9  *
 10  * http://www.apache.org/licenses/LICENSE-2.0
 11  *
 12  * Unless required by applicable law or agreed to in writing,
 13  * software distributed under the License is distributed on an
 14  * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 15  * KIND, either express or implied. See the License for the
 16  * specific language governing permissions and limitations
 17  * under the License.
 18  */
 19 /*
<span class="line-modified"> 20  * Copyright 2005 Sun Microsystems, Inc. All rights reserved.</span>
 21  */
 22 /*
 23  * $Id$
 24  */
 25 package org.jcp.xml.dsig.internal.dom;
 26 
 27 import java.math.BigInteger;
 28 import javax.xml.crypto.*;
 29 import javax.xml.crypto.dom.DOMCryptoContext;
 30 
 31 import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
 32 import org.w3c.dom.Node;
 33 import org.w3c.dom.Text;
 34 
 35 /**
<span class="line-modified"> 36  * A DOM-based representation of the XML &lt;code&gt;CryptoBinary&lt;/code&gt; simple type</span>
 37  * as defined in the W3C specification for XML-Signature Syntax and Processing.
 38  * The XML Schema Definition is defined as:
 39  *
<span class="line-modified"> 40  * &lt;xmp&gt;</span>
 41  * &lt;simpleType name=&quot;CryptoBinary&quot;&gt;
 42  *   &lt;restriction base = &quot;base64Binary&quot;&gt;
 43  *   &lt;/restriction&gt;
 44  * &lt;/simpleType&gt;
<span class="line-modified"> 45  * &lt;/xmp&gt;</span>
 46  *
 47  * @author Sean Mullan
 48  */
 49 public final class DOMCryptoBinary extends DOMStructure {
 50 
 51     private final BigInteger bigNum;
 52     private final String value;
 53 
 54     /**
<span class="line-modified"> 55      * Create a &lt;code&gt;DOMCryptoBinary&lt;/code&gt; instance from the specified</span>
<span class="line-modified"> 56      * &lt;code&gt;BigInteger&lt;/code&gt;</span>
 57      *
 58      * @param bigNum the arbitrary-length integer
<span class="line-modified"> 59      * @throws NullPointerException if &lt;code&gt;bigNum&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;</span>
 60      */
 61     public DOMCryptoBinary(BigInteger bigNum) {
 62         if (bigNum == null) {
 63             throw new NullPointerException(&quot;bigNum is null&quot;);
 64         }
 65         this.bigNum = bigNum;
 66         // convert to bitstring
 67         byte[] bytes = XMLUtils.getBytes(bigNum, bigNum.bitLength());
 68         value = XMLUtils.encodeToString(bytes);
 69     }
 70 
 71     /**
<span class="line-modified"> 72      * Creates a &lt;code&gt;DOMCryptoBinary&lt;/code&gt; from a node.</span>
 73      *
 74      * @param cbNode a CryptoBinary text node
 75      * @throws MarshalException if value cannot be decoded (invalid format)
 76      */
 77     public DOMCryptoBinary(Node cbNode) throws MarshalException {
 78         value = cbNode.getNodeValue();
 79         try {
 80             bigNum = new BigInteger(1, XMLUtils.decode(((Text) cbNode).getData()));
 81         } catch (Exception ex) {
 82             throw new MarshalException(ex);
 83         }
 84     }
 85 
 86     /**
<span class="line-modified"> 87      * Returns the &lt;code&gt;BigInteger&lt;/code&gt; that this object contains.</span>
 88      *
<span class="line-modified"> 89      * @return the &lt;code&gt;BigInteger&lt;/code&gt; that this object contains</span>
 90      */
 91     public BigInteger getBigNum() {
 92         return bigNum;
 93     }
 94 
 95     @Override
 96     public void marshal(Node parent, String prefix, DOMCryptoContext context)
 97         throws MarshalException {
 98         parent.appendChild
 99             (DOMUtils.getOwnerDocument(parent).createTextNode(value));
100     }
101 }
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-added">  1 /*</span>
<span class="line-added">  2  * reserved comment block</span>
<span class="line-added">  3  * DO NOT REMOVE OR ALTER!</span>
<span class="line-added">  4  */</span>
  5 /**
  6  * Licensed to the Apache Software Foundation (ASF) under one
  7  * or more contributor license agreements. See the NOTICE file
  8  * distributed with this work for additional information
  9  * regarding copyright ownership. The ASF licenses this file
 10  * to you under the Apache License, Version 2.0 (the
 11  * &quot;License&quot;); you may not use this file except in compliance
 12  * with the License. You may obtain a copy of the License at
 13  *
 14  * http://www.apache.org/licenses/LICENSE-2.0
 15  *
 16  * Unless required by applicable law or agreed to in writing,
 17  * software distributed under the License is distributed on an
 18  * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 19  * KIND, either express or implied. See the License for the
 20  * specific language governing permissions and limitations
 21  * under the License.
 22  */
 23 /*
<span class="line-modified"> 24  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
 25  */
 26 /*
 27  * $Id$
 28  */
 29 package org.jcp.xml.dsig.internal.dom;
 30 
 31 import java.math.BigInteger;
 32 import javax.xml.crypto.*;
 33 import javax.xml.crypto.dom.DOMCryptoContext;
 34 
 35 import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
 36 import org.w3c.dom.Node;
 37 import org.w3c.dom.Text;
 38 
 39 /**
<span class="line-modified"> 40  * A DOM-based representation of the XML {@code CryptoBinary} simple type</span>
 41  * as defined in the W3C specification for XML-Signature Syntax and Processing.
 42  * The XML Schema Definition is defined as:
 43  *
<span class="line-modified"> 44  * &lt;pre&gt;{@code</span>
 45  * &lt;simpleType name=&quot;CryptoBinary&quot;&gt;
 46  *   &lt;restriction base = &quot;base64Binary&quot;&gt;
 47  *   &lt;/restriction&gt;
 48  * &lt;/simpleType&gt;
<span class="line-modified"> 49  * }&lt;/pre&gt;</span>
 50  *
 51  * @author Sean Mullan
 52  */
 53 public final class DOMCryptoBinary extends DOMStructure {
 54 
 55     private final BigInteger bigNum;
 56     private final String value;
 57 
 58     /**
<span class="line-modified"> 59      * Create a {@code DOMCryptoBinary} instance from the specified</span>
<span class="line-modified"> 60      * {@code BigInteger}</span>
 61      *
 62      * @param bigNum the arbitrary-length integer
<span class="line-modified"> 63      * @throws NullPointerException if {@code bigNum} is {@code null}</span>
 64      */
 65     public DOMCryptoBinary(BigInteger bigNum) {
 66         if (bigNum == null) {
 67             throw new NullPointerException(&quot;bigNum is null&quot;);
 68         }
 69         this.bigNum = bigNum;
 70         // convert to bitstring
 71         byte[] bytes = XMLUtils.getBytes(bigNum, bigNum.bitLength());
 72         value = XMLUtils.encodeToString(bytes);
 73     }
 74 
 75     /**
<span class="line-modified"> 76      * Creates a {@code DOMCryptoBinary} from a node.</span>
 77      *
 78      * @param cbNode a CryptoBinary text node
 79      * @throws MarshalException if value cannot be decoded (invalid format)
 80      */
 81     public DOMCryptoBinary(Node cbNode) throws MarshalException {
 82         value = cbNode.getNodeValue();
 83         try {
 84             bigNum = new BigInteger(1, XMLUtils.decode(((Text) cbNode).getData()));
 85         } catch (Exception ex) {
 86             throw new MarshalException(ex);
 87         }
 88     }
 89 
 90     /**
<span class="line-modified"> 91      * Returns the {@code BigInteger} that this object contains.</span>
 92      *
<span class="line-modified"> 93      * @return the {@code BigInteger} that this object contains</span>
 94      */
 95     public BigInteger getBigNum() {
 96         return bigNum;
 97     }
 98 
 99     @Override
100     public void marshal(Node parent, String prefix, DOMCryptoContext context)
101         throws MarshalException {
102         parent.appendChild
103             (DOMUtils.getOwnerDocument(parent).createTextNode(value));
104     }
105 }
</pre>
</td>
</tr>
</table>
<center><a href="DOMCanonicalXMLC14NMethod.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMDigestMethod.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>