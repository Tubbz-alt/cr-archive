<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMX509Data.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DOMUtils.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMX509IssuerSerial.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMX509Data.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -19,28 +19,29 @@</span>
   * KIND, either express or implied. See the License for the
   * specific language governing permissions and limitations
   * under the License.
   */
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2005, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
<span class="udiff-line-modified-removed">-  * $Id: DOMX509Data.java 1789702 2017-03-31 15:15:04Z coheigea $</span>
<span class="udiff-line-modified-added">+  * $Id: DOMX509Data.java 1854026 2019-02-21 09:30:01Z coheigea $</span>
   */
  package org.jcp.xml.dsig.internal.dom;
  
  import java.io.ByteArrayInputStream;
  import java.io.IOException;
  import java.security.cert.*;
  import java.util.*;
  
<span class="udiff-line-modified-removed">- import javax.xml.crypto.*;</span>
<span class="udiff-line-modified-added">+ import javax.security.auth.x500.X500Principal;</span>
<span class="udiff-line-added">+ import javax.xml.crypto.MarshalException;</span>
<span class="udiff-line-added">+ import javax.xml.crypto.XMLStructure;</span>
  import javax.xml.crypto.dom.DOMCryptoContext;
<span class="udiff-line-modified-removed">- import javax.xml.crypto.dsig.*;</span>
<span class="udiff-line-modified-added">+ import javax.xml.crypto.dsig.XMLSignature;</span>
  import javax.xml.crypto.dsig.keyinfo.X509Data;
  import javax.xml.crypto.dsig.keyinfo.X509IssuerSerial;
<span class="udiff-line-removed">- import javax.security.auth.x500.X500Principal;</span>
  
  import org.w3c.dom.Document;
  import org.w3c.dom.Element;
  import org.w3c.dom.Node;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -113,11 +114,11 @@</span>
                  } else if (&quot;X509IssuerSerial&quot;.equals(localName) &amp;&amp; XMLSignature.XMLNS.equals(namespace)) {
                      newContent.add(new DOMX509IssuerSerial(childElem));
                  } else if (&quot;X509SubjectName&quot;.equals(localName) &amp;&amp; XMLSignature.XMLNS.equals(namespace)) {
                      newContent.add(childElem.getFirstChild().getNodeValue());
                  } else if (&quot;X509SKI&quot;.equals(localName) &amp;&amp; XMLSignature.XMLNS.equals(namespace)) {
<span class="udiff-line-modified-removed">-                     String content = XMLUtils.getFullTextChildrenFromElement(childElem);</span>
<span class="udiff-line-modified-added">+                     String content = XMLUtils.getFullTextChildrenFromNode(childElem);</span>
                      newContent.add(XMLUtils.decode(content));
                  } else if (&quot;X509CRL&quot;.equals(localName) &amp;&amp; XMLSignature.XMLNS.equals(namespace)) {
                      newContent.add(unmarshalX509CRL(childElem));
                  } else {
                      newContent.add(new javax.xml.crypto.dom.DOMStructure(childElem));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -130,10 +131,11 @@</span>
  
      public List&lt;Object&gt; getContent() {
          return content;
      }
  
<span class="udiff-line-added">+     @Override</span>
      public void marshal(Node parent, String dsPrefix, DOMCryptoContext context)
          throws MarshalException
      {
          Document ownerDoc = DOMUtils.getOwnerDocument(parent);
          Element xdElem = DOMUtils.createElement(ownerDoc, &quot;X509Data&quot;,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -239,11 +241,11 @@</span>
          throws MarshalException {
          try {
              if (cf == null) {
                  cf = CertificateFactory.getInstance(&quot;X.509&quot;);
              }
<span class="udiff-line-modified-removed">-             String content = XMLUtils.getFullTextChildrenFromElement(elem);</span>
<span class="udiff-line-modified-added">+             String content = XMLUtils.getFullTextChildrenFromNode(elem);</span>
              return new ByteArrayInputStream(XMLUtils.decode(content));
          } catch (CertificateException e) {
              throw new MarshalException(&quot;Cannot create CertificateFactory&quot;, e);
          }
      }
</pre>
<center><a href="DOMUtils.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMX509IssuerSerial.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>