<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMKeyValue.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DOMKeyName.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMManifest.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/DOMKeyValue.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 19,22 ***</span>
   * KIND, either express or implied. See the License for the
   * specific language governing permissions and limitations
   * under the License.
   */
  /*
<span class="line-modified">!  * Copyright (c) 2005, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
<span class="line-modified">!  * $Id: DOMKeyValue.java 1788465 2017-03-24 15:10:51Z coheigea $</span>
   */
  package org.jcp.xml.dsig.internal.dom;
  
<span class="line-removed">- import javax.xml.crypto.*;</span>
<span class="line-removed">- import javax.xml.crypto.dom.DOMCryptoContext;</span>
<span class="line-removed">- import javax.xml.crypto.dsig.*;</span>
<span class="line-removed">- import javax.xml.crypto.dsig.keyinfo.KeyValue;</span>
<span class="line-removed">- </span>
  import java.io.IOException;
  import java.math.BigInteger;
  import java.security.KeyException;
  import java.security.KeyFactory;
  import java.security.NoSuchAlgorithmException;
<span class="line-new-header">--- 19,17 ---</span>
   * KIND, either express or implied. See the License for the
   * specific language governing permissions and limitations
   * under the License.
   */
  /*
<span class="line-modified">!  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
<span class="line-modified">!  * $Id: DOMKeyValue.java 1854026 2019-02-21 09:30:01Z coheigea $</span>
   */
  package org.jcp.xml.dsig.internal.dom;
  
  import java.io.IOException;
  import java.math.BigInteger;
  import java.security.KeyException;
  import java.security.KeyFactory;
  import java.security.NoSuchAlgorithmException;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 53,10 ***</span>
<span class="line-new-header">--- 48,15 ---</span>
  import java.security.spec.InvalidKeySpecException;
  import java.security.spec.KeySpec;
  import java.security.spec.RSAPublicKeySpec;
  import java.util.Arrays;
  
<span class="line-added">+ import javax.xml.crypto.MarshalException;</span>
<span class="line-added">+ import javax.xml.crypto.dom.DOMCryptoContext;</span>
<span class="line-added">+ import javax.xml.crypto.dsig.XMLSignature;</span>
<span class="line-added">+ import javax.xml.crypto.dsig.keyinfo.KeyValue;</span>
<span class="line-added">+ </span>
  import com.sun.org.apache.xml.internal.security.utils.XMLUtils;
  import org.w3c.dom.Document;
  import org.w3c.dom.Element;
  import org.w3c.dom.Node;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 498,11 ***</span>
              String oid = getCurveOid(ecParams);
              if (oid == null) {
                  throw new MarshalException(&quot;Invalid ECParameterSpec&quot;);
              }
              DOMUtils.setAttribute(namedCurveElem, &quot;URI&quot;, &quot;urn:oid:&quot; + oid);
<span class="line-modified">!             String qname = (prefix == null || prefix.length() == 0)</span>
                         ? &quot;xmlns&quot; : &quot;xmlns:&quot; + prefix;
              namedCurveElem.setAttributeNS(&quot;http://www.w3.org/2000/xmlns/&quot;,
                                            qname, XMLDSIG_11_XMLNS);
              ecKeyValueElem.appendChild(namedCurveElem);
              String encoded = XMLUtils.encodeToString(ecPublicKey);
<span class="line-new-header">--- 498,11 ---</span>
              String oid = getCurveOid(ecParams);
              if (oid == null) {
                  throw new MarshalException(&quot;Invalid ECParameterSpec&quot;);
              }
              DOMUtils.setAttribute(namedCurveElem, &quot;URI&quot;, &quot;urn:oid:&quot; + oid);
<span class="line-modified">!             String qname = prefix == null || prefix.length() == 0</span>
                         ? &quot;xmlns&quot; : &quot;xmlns:&quot; + prefix;
              namedCurveElem.setAttributeNS(&quot;http://www.w3.org/2000/xmlns/&quot;,
                                            qname, XMLDSIG_11_XMLNS);
              ecKeyValueElem.appendChild(namedCurveElem);
              String encoded = XMLUtils.encodeToString(ecPublicKey);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 552,11 ***</span>
              }
              curElem = DOMUtils.getNextSiblingElement(curElem, &quot;PublicKey&quot;, XMLDSIG_11_XMLNS);
              ECPoint ecPoint = null;
  
              try {
<span class="line-modified">!                 String content = XMLUtils.getFullTextChildrenFromElement(curElem);</span>
                  ecPoint = decodePoint(XMLUtils.decode(content),
                                        ecParams.getCurve());
              } catch (IOException ioe) {
                  throw new MarshalException(&quot;Invalid EC Point&quot;, ioe);
              }
<span class="line-new-header">--- 552,11 ---</span>
              }
              curElem = DOMUtils.getNextSiblingElement(curElem, &quot;PublicKey&quot;, XMLDSIG_11_XMLNS);
              ECPoint ecPoint = null;
  
              try {
<span class="line-modified">!                 String content = XMLUtils.getFullTextChildrenFromNode(curElem);</span>
                  ecPoint = decodePoint(XMLUtils.decode(content),
                                        ecParams.getCurve());
              } catch (IOException ioe) {
                  throw new MarshalException(&quot;Invalid EC Point&quot;, ioe);
              }
</pre>
<center><a href="DOMKeyName.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DOMManifest.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>