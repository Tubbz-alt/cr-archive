<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.xml/share/classes/javax/xml/parsers/SAXParserFactory.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="DocumentBuilderFactory.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../stream/XMLStreamException.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/javax/xml/parsers/SAXParserFactory.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -39,10 +39,12 @@</span>
   * @author Neeraj Bajaj
   *
   * @since 1.4
   */
  public abstract class SAXParserFactory {
<span class="udiff-line-added">+     private static final String DEFAULT_IMPL =</span>
<span class="udiff-line-added">+             &quot;com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl&quot;;</span>
  
      /**
       * Should Parsers be validating?
       */
      private boolean validating = false;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -57,10 +59,80 @@</span>
       */
      protected SAXParserFactory () {
  
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Creates a new NamespaceAware instance of the {@code SAXParserFactory}</span>
<span class="udiff-line-added">+      * builtin system-default implementation. Parsers produced by the factory</span>
<span class="udiff-line-added">+      * instance provides support for XML namespaces by default.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @implSpec</span>
<span class="udiff-line-added">+      * In addition to creating a factory instance using the same process as</span>
<span class="udiff-line-added">+      * {@link #newDefaultInstance()}, this method must set NamespaceAware to true.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @return a new instance of the {@code SAXParserFactory} builtin</span>
<span class="udiff-line-added">+      *         system-default implementation.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @since 13</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static SAXParserFactory newDefaultNSInstance() {</span>
<span class="udiff-line-added">+         return makeNSAware(new SAXParserFactoryImpl());</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Creates a new NamespaceAware instance of a {@code SAXParserFactory}.</span>
<span class="udiff-line-added">+      * Parsers produced by the factory instance provides support for XML</span>
<span class="udiff-line-added">+      * namespaces by default.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @implSpec</span>
<span class="udiff-line-added">+      * In addition to creating a factory instance using the same process as</span>
<span class="udiff-line-added">+      * {@link #newInstance()}, this method must set NamespaceAware to true.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @return a new instance of the {@code SAXParserFactory}</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @throws FactoryConfigurationError in case of {@linkplain</span>
<span class="udiff-line-added">+      *         java.util.ServiceConfigurationError service configuration error}</span>
<span class="udiff-line-added">+      *         or if the implementation is not available or cannot be instantiated.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @since 13</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static SAXParserFactory newNSInstance() {</span>
<span class="udiff-line-added">+         return makeNSAware(FactoryFinder.find(SAXParserFactory.class, DEFAULT_IMPL));</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Creates a new NamespaceAware instance of a {@code SAXParserFactory} from</span>
<span class="udiff-line-added">+      * the class name. Parsers produced by the factory instance provides</span>
<span class="udiff-line-added">+      * support for XML namespaces by default.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @implSpec</span>
<span class="udiff-line-added">+      * In addition to creating a factory instance using the same process as</span>
<span class="udiff-line-added">+      * {@link #newInstance(java.lang.String, java.lang.ClassLoader)}, this method</span>
<span class="udiff-line-added">+      * must set NamespaceAware to true.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @param factoryClassName a fully qualified factory class name that provides</span>
<span class="udiff-line-added">+      *                         implementation of</span>
<span class="udiff-line-added">+      *                         {@code javax.xml.parsers.SAXParserFactory}.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @param classLoader the {@code ClassLoader} used to load the factory class.</span>
<span class="udiff-line-added">+      *                    If it is {@code null}, the current {@code Thread}&#39;s</span>
<span class="udiff-line-added">+      *                    context classLoader is used to load the factory class.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @return a new instance of the {@code SAXParserFactory}</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @throws FactoryConfigurationError if {@code factoryClassName} is {@code null}, or</span>
<span class="udiff-line-added">+      *                                   the factory class cannot be loaded, instantiated.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @since 13</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public static SAXParserFactory newNSInstance(String factoryClassName,</span>
<span class="udiff-line-added">+             ClassLoader classLoader) {</span>
<span class="udiff-line-added">+             return makeNSAware(FactoryFinder.newInstance(</span>
<span class="udiff-line-added">+                     SAXParserFactory.class, factoryClassName, classLoader, false));</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * Creates a new instance of the {@code SAXParserFactory} builtin
       * system-default implementation.
       *
       * @return A new instance of the {@code SAXParserFactory} builtin
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -121,11 +193,11 @@</span>
       * {@code SAXParserFactory} it can use the factory to
       * configure and obtain parser instances.
       *
       *
       *
<span class="udiff-line-modified-removed">-      * &lt;h2&gt;Tip for Trouble-shooting&lt;/h2&gt;</span>
<span class="udiff-line-modified-added">+      * &lt;h4&gt;Tip for Trouble-shooting&lt;/h4&gt;</span>
       * &lt;p&gt;
       * Setting the {@code jaxp.debug} system property will cause
       * this method to print a lot of debug messages
       * to {@code System.err} about what it is doing and where it is looking at.
       *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -146,11 +218,11 @@</span>
      public static SAXParserFactory newInstance() {
          return FactoryFinder.find(
                  /* The default property name according to the JAXP spec */
                  SAXParserFactory.class,
                  /* The fallback implementation class name */
<span class="udiff-line-modified-removed">-                 &quot;com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl&quot;);</span>
<span class="udiff-line-modified-added">+                 DEFAULT_IMPL);</span>
      }
  
      /**
       * Obtain a new instance of a {@code SAXParserFactory} from class name.
       * This function is useful when there are multiple providers in the classpath.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -159,11 +231,11 @@</span>
       *
       * &lt;p&gt;Once an application has obtained a reference to a {@code SAXParserFactory}
       * it can use the factory to configure and obtain parser instances.
       *
       *
<span class="udiff-line-modified-removed">-      * &lt;h2&gt;Tip for Trouble-shooting&lt;/h2&gt;</span>
<span class="udiff-line-modified-added">+      * &lt;h4&gt;Tip for Trouble-shooting&lt;/h4&gt;</span>
       * &lt;p&gt;Setting the {@code jaxp.debug} system property will cause
       * this method to print a lot of debug messages
       * to {@code System.err} about what it is doing and where it is looking at.
       *
       * &lt;p&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -190,10 +262,15 @@</span>
              //do not fallback if given classloader can&#39;t find the class, throw exception
              return FactoryFinder.newInstance(SAXParserFactory.class,
                      factoryClassName, classLoader, false);
      }
  
<span class="udiff-line-added">+     private static SAXParserFactory makeNSAware(SAXParserFactory spf) {</span>
<span class="udiff-line-added">+         spf.setNamespaceAware(true);</span>
<span class="udiff-line-added">+         return spf;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * Creates a new instance of a SAXParser using the currently
       * configured factory parameters.
       *
       * @return A new instance of a SAXParser.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -387,11 +464,11 @@</span>
       * property and/or the {@code http://java.sun.com/xml/jaxp/properties/schemaLanguage}
       * property in conjunction with a non-null {@link Schema} object.
       * Such configuration will cause a {@link SAXException}
       * exception when those properties are set on a {@link SAXParser}.
       *
<span class="udiff-line-modified-removed">-      * &lt;h3&gt;Note for implementors&lt;/h3&gt;</span>
<span class="udiff-line-modified-added">+      * &lt;h4&gt;Note for implementors&lt;/h4&gt;</span>
       * &lt;p&gt;
       * A parser must be able to work with any {@link Schema}
       * implementation. However, parsers and schemas are allowed
       * to use implementation-specific custom mechanisms
       * as long as they yield the result described in the specification.
</pre>
<center><a href="DocumentBuilderFactory.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../stream/XMLStreamException.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>