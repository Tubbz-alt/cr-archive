<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/javax/xml/validation/SchemaFactory.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../transform/package-info.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../xpath/XPathFactory.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/javax/xml/validation/SchemaFactory.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
189      *   Each potential service provider is required to implement the method
190      *        {@link #isSchemaLanguageSupported(String schemaLanguage)}.
191      *   &lt;br&gt;
192      *   The first service provider found that supports the specified schema
193      *   language is returned.
194      *   &lt;br&gt;
195      *   In case of {@link java.util.ServiceConfigurationError} a
196      *   {@link SchemaFactoryConfigurationError} will be thrown.
197      *   &lt;/li&gt;
198      *   &lt;li&gt;
199      *     &lt;p&gt;
200      *     Platform default {@code SchemaFactory} is located
201      *     in an implementation specific way. There must be a
202      *     {@linkplain #newDefaultInstance() platform default}
203      *     {@code SchemaFactory} for W3C XML Schema.
204      *   &lt;/li&gt;
205      * &lt;/ol&gt;
206      *
207      * &lt;p&gt;If everything fails, {@link IllegalArgumentException} will be thrown.
208      *
<span class="line-modified">209      * &lt;p&gt;&lt;strong&gt;Tip for Trouble-shooting:&lt;/strong&gt;</span>
210      * &lt;p&gt;See {@link java.util.Properties#load(java.io.InputStream)} for
211      * exactly how a property file is parsed. In particular, colons &#39;:&#39;
212      * need to be escaped in a property file, so make sure schema language
213      * URIs are properly escaped in it. For example:
214      * &lt;pre&gt;
215      * http\://www.w3.org/2001/XMLSchema=org.acme.foo.XSSchemaFactory
216      * &lt;/pre&gt;
217      *
218      * @param schemaLanguage
219      *      Specifies the schema language which the returned
220      *      SchemaFactory will understand. See
221      *      &lt;a href=&quot;#schemaLanguage&quot;&gt;the list of available
222      *      schema languages&lt;/a&gt; for the possible values.
223      *
224      * @return New instance of a {@code SchemaFactory}
225      *
226      * @throws IllegalArgumentException
227      *      If no implementation of the schema language is available.
228      * @throws NullPointerException
229      *      If the {@code schemaLanguage} parameter is null.
</pre>
<hr />
<pre>
242             cl = SchemaFactory.class.getClassLoader();
243         }
244 
245         SchemaFactory f = new SchemaFactoryFinder(cl).newFactory(schemaLanguage);
246         if (f == null) {
247             throw new IllegalArgumentException(
248                     &quot;No SchemaFactory&quot;
249                     + &quot; that implements the schema language specified by: &quot; + schemaLanguage
250                     + &quot; could be loaded&quot;);
251         }
252         return f;
253     }
254 
255     /**
256      * Obtain a new instance of a {@code SchemaFactory} from class name. {@code SchemaFactory}
257      * is returned if specified factory class name supports the specified schema language.
258      * This function is useful when there are multiple providers in the classpath.
259      * It gives more control to the application as it can specify which provider
260      * should be loaded.
261      *
<span class="line-modified">262      * &lt;h2&gt;Tip for Trouble-shooting&lt;/h2&gt;</span>
263      * &lt;p&gt;Setting the {@code jaxp.debug} system property will cause
264      * this method to print a lot of debug messages
265      * to {@code System.err} about what it is doing and where it is looking at.
266      *
267      * &lt;p&gt; If you have problems try:
268      * &lt;pre&gt;
269      * java -Djaxp.debug=1 YourProgram ....
270      * &lt;/pre&gt;
271      *
272      * @param schemaLanguage Specifies the schema language which the returned
273      *                          {@code SchemaFactory} will understand. See
274      *                          &lt;a href=&quot;#schemaLanguage&quot;&gt;the list of available
275      *                          schema languages&lt;/a&gt; for the possible values.
276      *
277      * @param factoryClassName fully qualified factory class name that provides implementation of {@code javax.xml.validation.SchemaFactory}.
278      *
279      * @param classLoader {@code ClassLoader} used to load the factory class. If {@code null}
280      *                     current {@code Thread}&#39;s context classLoader is used to load the factory class.
281      *
282      * @return New instance of a {@code SchemaFactory}
</pre>
<hr />
<pre>
700     public Schema newSchema(URL schema) throws SAXException {
701         return newSchema(new StreamSource(schema.toExternalForm()));
702     }
703 
704     /**
705      * Parses the specified source(s) as a schema and returns it as a schema.
706      *
707      * &lt;p&gt;
708      * The callee will read all the {@link Source}s and combine them into a
709      * single schema. The exact semantics of the combination depends on the schema
710      * language that this {@link SchemaFactory} object is created for.
711      *
712      * &lt;p&gt;
713      * When an {@link ErrorHandler} is set, the callee will report all the errors
714      * found in sources to the handler. If the handler throws an exception, it will
715      * abort the schema compilation and the same exception will be thrown from
716      * this method. Also, after an error is reported to a handler, the callee is allowed
717      * to abort the further processing by throwing it. If an error handler is not set,
718      * the callee will throw the first error it finds in the sources.
719      *
<span class="line-modified">720      * &lt;h2&gt;W3C XML Schema 1.0&lt;/h2&gt;</span>
721      * &lt;p&gt;
722      * The resulting schema contains components from the specified sources.
723      * The same result would be achieved if all these sources were
724      * imported, using appropriate values for schemaLocation and namespace,
725      * into a single schema document with a different targetNamespace
726      * and no components of its own, if the import elements were given
727      * in the same order as the sources.  Section 4.2.3 of the XML Schema
728      * recommendation describes the options processors have in this
729      * regard.  While a processor should be consistent in its treatment of
730      * JAXP schema sources and XML Schema imports, the behaviour between
731      * JAXP-compliant parsers may vary; in particular, parsers may choose
732      * to ignore all but the first {@code &lt;import&gt;} for a given namespace,
733      * regardless of information provided in schemaLocation.
734      *
735      * &lt;p&gt;
736      * If the parsed set of schemas includes error(s) as
737      * specified in the section 5.1 of the XML Schema spec, then
738      * the error must be reported to the {@link ErrorHandler}.
739      *
<span class="line-modified">740      * &lt;h2&gt;RELAX NG&lt;/h2&gt;</span>
741      *
742      * &lt;p&gt;For RELAX NG, this method must throw {@link UnsupportedOperationException}
743      * if {@code schemas.length!=1}.
744      *
745      *
746      * @param schemas
747      *      inputs to be parsed. {@link SchemaFactory} is required
748      *      to recognize {@link javax.xml.transform.sax.SAXSource},
749      *      {@link StreamSource},
750      *      {@link javax.xml.transform.stax.StAXSource},
751      *      and {@link javax.xml.transform.dom.DOMSource}.
752      *      Input schemas must be XML documents or
753      *      XML elements and must not be null. For backwards compatibility,
754      *      the results of passing anything other than
755      *      a document or element are implementation-dependent.
756      *      Implementations must either recognize and process the input
757      *      or thrown an IllegalArgumentException.
758      *
759      * @return
760      *      Always return a non-null valid {@link Schema} object.
</pre>
<hr />
<pre>
780      * Creates a special {@link Schema} object.
781      *
782      * &lt;p&gt;The exact semantics of the returned {@link Schema} object
783      * depend on the schema language for which this {@link SchemaFactory}
784      * is created.
785      *
786      * &lt;p&gt;Also, implementations are allowed to use implementation-specific
787      * property/feature to alter the semantics of this method.
788      *
789      * &lt;p&gt;Implementors and developers should pay particular attention
790      * to how the features set on this {@link SchemaFactory} are
791      * processed by this special {@link Schema}.
792      * In some cases, for example, when the
793      * {@link SchemaFactory} and the class actually loading the
794      * schema come from different implementations, it may not be possible
795      * for {@link SchemaFactory} features to be inherited automatically.
796      * Developers should
797      * make sure that features, such as secure processing, are explicitly
798      * set in both places.
799      *
<span class="line-modified">800      * &lt;h2&gt;W3C XML Schema 1.0&lt;/h2&gt;</span>
801      * &lt;p&gt;
802      * For XML Schema, this method creates a {@link Schema} object that
803      * performs validation by using location hints specified in documents.
804      *
805      * &lt;p&gt;
806      * The returned {@link Schema} object assumes that if documents
807      * refer to the same URL in the schema location hints,
808      * they will always resolve to the same schema document. This
809      * asusmption allows implementations to reuse parsed results of
810      * schema documents so that multiple validations against the same
811      * schema will run faster.
812      *
813      * &lt;p&gt;
814      * Note that the use of schema location hints introduces a
815      * vulnerability to denial-of-service attacks.
816      *
817      *
<span class="line-modified">818      * &lt;h2&gt;RELAX NG&lt;/h2&gt;</span>
819      * &lt;p&gt;
820      * RELAX NG does not support this operation.
821      *
822      * @return
823      *      Always return non-null valid {@link Schema} object.
824      *
825      * @throws UnsupportedOperationException
826      *      If this operation is not supported by the callee.
827      * @throws SAXException
828      *      If this operation is supported but failed for some reason.
829      */
830     public abstract Schema newSchema() throws SAXException;
831 }
</pre>
</td>
<td>
<hr />
<pre>
189      *   Each potential service provider is required to implement the method
190      *        {@link #isSchemaLanguageSupported(String schemaLanguage)}.
191      *   &lt;br&gt;
192      *   The first service provider found that supports the specified schema
193      *   language is returned.
194      *   &lt;br&gt;
195      *   In case of {@link java.util.ServiceConfigurationError} a
196      *   {@link SchemaFactoryConfigurationError} will be thrown.
197      *   &lt;/li&gt;
198      *   &lt;li&gt;
199      *     &lt;p&gt;
200      *     Platform default {@code SchemaFactory} is located
201      *     in an implementation specific way. There must be a
202      *     {@linkplain #newDefaultInstance() platform default}
203      *     {@code SchemaFactory} for W3C XML Schema.
204      *   &lt;/li&gt;
205      * &lt;/ol&gt;
206      *
207      * &lt;p&gt;If everything fails, {@link IllegalArgumentException} will be thrown.
208      *
<span class="line-modified">209      * &lt;h4&gt;Tip for Trouble-shooting:&lt;/h4&gt;</span>
210      * &lt;p&gt;See {@link java.util.Properties#load(java.io.InputStream)} for
211      * exactly how a property file is parsed. In particular, colons &#39;:&#39;
212      * need to be escaped in a property file, so make sure schema language
213      * URIs are properly escaped in it. For example:
214      * &lt;pre&gt;
215      * http\://www.w3.org/2001/XMLSchema=org.acme.foo.XSSchemaFactory
216      * &lt;/pre&gt;
217      *
218      * @param schemaLanguage
219      *      Specifies the schema language which the returned
220      *      SchemaFactory will understand. See
221      *      &lt;a href=&quot;#schemaLanguage&quot;&gt;the list of available
222      *      schema languages&lt;/a&gt; for the possible values.
223      *
224      * @return New instance of a {@code SchemaFactory}
225      *
226      * @throws IllegalArgumentException
227      *      If no implementation of the schema language is available.
228      * @throws NullPointerException
229      *      If the {@code schemaLanguage} parameter is null.
</pre>
<hr />
<pre>
242             cl = SchemaFactory.class.getClassLoader();
243         }
244 
245         SchemaFactory f = new SchemaFactoryFinder(cl).newFactory(schemaLanguage);
246         if (f == null) {
247             throw new IllegalArgumentException(
248                     &quot;No SchemaFactory&quot;
249                     + &quot; that implements the schema language specified by: &quot; + schemaLanguage
250                     + &quot; could be loaded&quot;);
251         }
252         return f;
253     }
254 
255     /**
256      * Obtain a new instance of a {@code SchemaFactory} from class name. {@code SchemaFactory}
257      * is returned if specified factory class name supports the specified schema language.
258      * This function is useful when there are multiple providers in the classpath.
259      * It gives more control to the application as it can specify which provider
260      * should be loaded.
261      *
<span class="line-modified">262      * &lt;h4&gt;Tip for Trouble-shooting&lt;/h4&gt;</span>
263      * &lt;p&gt;Setting the {@code jaxp.debug} system property will cause
264      * this method to print a lot of debug messages
265      * to {@code System.err} about what it is doing and where it is looking at.
266      *
267      * &lt;p&gt; If you have problems try:
268      * &lt;pre&gt;
269      * java -Djaxp.debug=1 YourProgram ....
270      * &lt;/pre&gt;
271      *
272      * @param schemaLanguage Specifies the schema language which the returned
273      *                          {@code SchemaFactory} will understand. See
274      *                          &lt;a href=&quot;#schemaLanguage&quot;&gt;the list of available
275      *                          schema languages&lt;/a&gt; for the possible values.
276      *
277      * @param factoryClassName fully qualified factory class name that provides implementation of {@code javax.xml.validation.SchemaFactory}.
278      *
279      * @param classLoader {@code ClassLoader} used to load the factory class. If {@code null}
280      *                     current {@code Thread}&#39;s context classLoader is used to load the factory class.
281      *
282      * @return New instance of a {@code SchemaFactory}
</pre>
<hr />
<pre>
700     public Schema newSchema(URL schema) throws SAXException {
701         return newSchema(new StreamSource(schema.toExternalForm()));
702     }
703 
704     /**
705      * Parses the specified source(s) as a schema and returns it as a schema.
706      *
707      * &lt;p&gt;
708      * The callee will read all the {@link Source}s and combine them into a
709      * single schema. The exact semantics of the combination depends on the schema
710      * language that this {@link SchemaFactory} object is created for.
711      *
712      * &lt;p&gt;
713      * When an {@link ErrorHandler} is set, the callee will report all the errors
714      * found in sources to the handler. If the handler throws an exception, it will
715      * abort the schema compilation and the same exception will be thrown from
716      * this method. Also, after an error is reported to a handler, the callee is allowed
717      * to abort the further processing by throwing it. If an error handler is not set,
718      * the callee will throw the first error it finds in the sources.
719      *
<span class="line-modified">720      * &lt;h4&gt;W3C XML Schema 1.0&lt;/h4&gt;</span>
721      * &lt;p&gt;
722      * The resulting schema contains components from the specified sources.
723      * The same result would be achieved if all these sources were
724      * imported, using appropriate values for schemaLocation and namespace,
725      * into a single schema document with a different targetNamespace
726      * and no components of its own, if the import elements were given
727      * in the same order as the sources.  Section 4.2.3 of the XML Schema
728      * recommendation describes the options processors have in this
729      * regard.  While a processor should be consistent in its treatment of
730      * JAXP schema sources and XML Schema imports, the behaviour between
731      * JAXP-compliant parsers may vary; in particular, parsers may choose
732      * to ignore all but the first {@code &lt;import&gt;} for a given namespace,
733      * regardless of information provided in schemaLocation.
734      *
735      * &lt;p&gt;
736      * If the parsed set of schemas includes error(s) as
737      * specified in the section 5.1 of the XML Schema spec, then
738      * the error must be reported to the {@link ErrorHandler}.
739      *
<span class="line-modified">740      * &lt;h4&gt;RELAX NG&lt;/h4&gt;</span>
741      *
742      * &lt;p&gt;For RELAX NG, this method must throw {@link UnsupportedOperationException}
743      * if {@code schemas.length!=1}.
744      *
745      *
746      * @param schemas
747      *      inputs to be parsed. {@link SchemaFactory} is required
748      *      to recognize {@link javax.xml.transform.sax.SAXSource},
749      *      {@link StreamSource},
750      *      {@link javax.xml.transform.stax.StAXSource},
751      *      and {@link javax.xml.transform.dom.DOMSource}.
752      *      Input schemas must be XML documents or
753      *      XML elements and must not be null. For backwards compatibility,
754      *      the results of passing anything other than
755      *      a document or element are implementation-dependent.
756      *      Implementations must either recognize and process the input
757      *      or thrown an IllegalArgumentException.
758      *
759      * @return
760      *      Always return a non-null valid {@link Schema} object.
</pre>
<hr />
<pre>
780      * Creates a special {@link Schema} object.
781      *
782      * &lt;p&gt;The exact semantics of the returned {@link Schema} object
783      * depend on the schema language for which this {@link SchemaFactory}
784      * is created.
785      *
786      * &lt;p&gt;Also, implementations are allowed to use implementation-specific
787      * property/feature to alter the semantics of this method.
788      *
789      * &lt;p&gt;Implementors and developers should pay particular attention
790      * to how the features set on this {@link SchemaFactory} are
791      * processed by this special {@link Schema}.
792      * In some cases, for example, when the
793      * {@link SchemaFactory} and the class actually loading the
794      * schema come from different implementations, it may not be possible
795      * for {@link SchemaFactory} features to be inherited automatically.
796      * Developers should
797      * make sure that features, such as secure processing, are explicitly
798      * set in both places.
799      *
<span class="line-modified">800      * &lt;h4&gt;W3C XML Schema 1.0&lt;/h4&gt;</span>
801      * &lt;p&gt;
802      * For XML Schema, this method creates a {@link Schema} object that
803      * performs validation by using location hints specified in documents.
804      *
805      * &lt;p&gt;
806      * The returned {@link Schema} object assumes that if documents
807      * refer to the same URL in the schema location hints,
808      * they will always resolve to the same schema document. This
809      * asusmption allows implementations to reuse parsed results of
810      * schema documents so that multiple validations against the same
811      * schema will run faster.
812      *
813      * &lt;p&gt;
814      * Note that the use of schema location hints introduces a
815      * vulnerability to denial-of-service attacks.
816      *
817      *
<span class="line-modified">818      * &lt;h4&gt;RELAX NG&lt;/h4&gt;</span>
819      * &lt;p&gt;
820      * RELAX NG does not support this operation.
821      *
822      * @return
823      *      Always return non-null valid {@link Schema} object.
824      *
825      * @throws UnsupportedOperationException
826      *      If this operation is not supported by the callee.
827      * @throws SAXException
828      *      If this operation is supported but failed for some reason.
829      */
830     public abstract Schema newSchema() throws SAXException;
831 }
</pre>
</td>
</tr>
</table>
<center><a href="../transform/package-info.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../xpath/XPathFactory.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>