<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/ClassParser.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ClassFormatException.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Code.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/ClassParser.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 41,11 ***</span>
   * The structure and the names comply, except for a few conveniences,
   * exactly with the &lt;A href=&quot;http://docs.oracle.com/javase/specs/&quot;&gt;
   * JVM specification 1.0&lt;/a&gt;. See this paper for
   * further details about the structure of a bytecode file.
   *
<span class="line-removed">-  * @version $Id: ClassParser.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
   */
  public final class ClassParser {
  
      private DataInputStream dataInputStream;
      private final boolean fileOwned;
<span class="line-new-header">--- 41,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 64,11 ***</span>
      private final boolean is_zip; // Loaded from zip file
      private static final int BUFSIZE = 8192;
  
  
      /**
<span class="line-modified">!      * Parse class from the given stream.</span>
       *
       * @param inputStream Input stream
       * @param file_name File name
       */
      public ClassParser(final InputStream inputStream, final String file_name) {
<span class="line-new-header">--- 63,11 ---</span>
      private final boolean is_zip; // Loaded from zip file
      private static final int BUFSIZE = 8192;
  
  
      /**
<span class="line-modified">!      * Parses class from the given stream.</span>
       *
       * @param inputStream Input stream
       * @param file_name File name
       */
      public ClassParser(final InputStream inputStream, final String file_name) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 82,22 ***</span>
              this.dataInputStream = new DataInputStream(new BufferedInputStream(inputStream, BUFSIZE));
          }
      }
  
  
<span class="line-modified">!     /** Parse class from given .class file.</span>
       *
       * @param file_name file name
       */
      public ClassParser(final String file_name) {
          is_zip = false;
          this.file_name = file_name;
          fileOwned = true;
      }
  
  
<span class="line-modified">!     /** Parse class from given .class file in a ZIP-archive</span>
       *
       * @param zip_file zip file name
       * @param file_name file name
       */
      public ClassParser(final String zip_file, final String file_name) {
<span class="line-new-header">--- 81,22 ---</span>
              this.dataInputStream = new DataInputStream(new BufferedInputStream(inputStream, BUFSIZE));
          }
      }
  
  
<span class="line-modified">!     /** Parses class from given .class file.</span>
       *
       * @param file_name file name
       */
      public ClassParser(final String file_name) {
          is_zip = false;
          this.file_name = file_name;
          fileOwned = true;
      }
  
  
<span class="line-modified">!     /** Parses class from given .class file in a ZIP-archive</span>
       *
       * @param zip_file zip file name
       * @param file_name file name
       */
      public ClassParser(final String zip_file, final String file_name) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 107,11 ***</span>
          this.file_name = file_name;
      }
  
  
      /**
<span class="line-modified">!      * Parse the given Java class file and return an object that represents</span>
       * the contained data, i.e., constants, methods, fields and commands.
       * A &lt;em&gt;ClassFormatException&lt;/em&gt; is raised, if the file is not a valid
       * .class file. (This does not include verification of the byte code as it
       * is performed by the java interpreter).
       *
<span class="line-new-header">--- 106,11 ---</span>
          this.file_name = file_name;
      }
  
  
      /**
<span class="line-modified">!      * Parses the given Java class file and return an object that represents</span>
       * the contained data, i.e., constants, methods, fields and commands.
       * A &lt;em&gt;ClassFormatException&lt;/em&gt; is raised, if the file is not a valid
       * .class file. (This does not include verification of the byte code as it
       * is performed by the java interpreter).
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 197,11 ***</span>
                          : JavaClass.FILE);
      }
  
  
      /**
<span class="line-modified">!      * Read information about the attributes of the class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readAttributes() throws IOException, ClassFormatException {
          final int attributes_count = dataInputStream.readUnsignedShort();
<span class="line-new-header">--- 196,11 ---</span>
                          : JavaClass.FILE);
      }
  
  
      /**
<span class="line-modified">!      * Reads information about the attributes of the class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readAttributes() throws IOException, ClassFormatException {
          final int attributes_count = dataInputStream.readUnsignedShort();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 211,11 ***</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Read information about the class and its super class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readClassInfo() throws IOException, ClassFormatException {
          access_flags = dataInputStream.readUnsignedShort();
<span class="line-new-header">--- 210,11 ---</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Reads information about the class and its super class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readClassInfo() throws IOException, ClassFormatException {
          access_flags = dataInputStream.readUnsignedShort();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 233,21 ***</span>
          superclass_name_index = dataInputStream.readUnsignedShort();
      }
  
  
      /**
<span class="line-modified">!      * Read constant pool entries.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readConstantPool() throws IOException, ClassFormatException {
          constant_pool = new ConstantPool(dataInputStream);
      }
  
  
      /**
<span class="line-modified">!      * Read information about the fields of the class, i.e., its variables.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readFields() throws IOException, ClassFormatException {
          final int fields_count = dataInputStream.readUnsignedShort();
<span class="line-new-header">--- 232,21 ---</span>
          superclass_name_index = dataInputStream.readUnsignedShort();
      }
  
  
      /**
<span class="line-modified">!      * Reads constant pool entries.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readConstantPool() throws IOException, ClassFormatException {
          constant_pool = new ConstantPool(dataInputStream);
      }
  
  
      /**
<span class="line-modified">!      * Reads information about the fields of the class, i.e., its variables.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readFields() throws IOException, ClassFormatException {
          final int fields_count = dataInputStream.readUnsignedShort();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 258,11 ***</span>
      }
  
  
      /******************** Private utility methods **********************/
      /**
<span class="line-modified">!      * Check whether the header of the file is ok.</span>
       * Of course, this has to be the first action on successive file reads.
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readID() throws IOException, ClassFormatException {
<span class="line-new-header">--- 257,11 ---</span>
      }
  
  
      /******************** Private utility methods **********************/
      /**
<span class="line-modified">!      * Checks whether the header of the file is ok.</span>
       * Of course, this has to be the first action on successive file reads.
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readID() throws IOException, ClassFormatException {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 271,11 ***</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Read information about the interfaces implemented by this class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readInterfaces() throws IOException, ClassFormatException {
          final int interfaces_count = dataInputStream.readUnsignedShort();
<span class="line-new-header">--- 270,11 ---</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Reads information about the interfaces implemented by this class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readInterfaces() throws IOException, ClassFormatException {
          final int interfaces_count = dataInputStream.readUnsignedShort();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 285,11 ***</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Read information about the methods of the class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readMethods() throws IOException, ClassFormatException {
          final int methods_count = dataInputStream.readUnsignedShort();
<span class="line-new-header">--- 284,11 ---</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Reads information about the methods of the class.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readMethods() throws IOException, ClassFormatException {
          final int methods_count = dataInputStream.readUnsignedShort();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 299,11 ***</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Read major and minor version of compiler which created the file.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readVersion() throws IOException, ClassFormatException {
          minor = dataInputStream.readUnsignedShort();
<span class="line-new-header">--- 298,11 ---</span>
          }
      }
  
  
      /**
<span class="line-modified">!      * Reads major and minor version of compiler which created the file.</span>
       * @throws  IOException
       * @throws  ClassFormatException
       */
      private void readVersion() throws IOException, ClassFormatException {
          minor = dataInputStream.readUnsignedShort();
</pre>
<center><a href="ClassFormatException.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Code.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>