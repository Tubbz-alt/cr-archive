<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/generic/FieldGenOrMethodGen.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FieldGen.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="FieldInstruction.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/generic/FieldGenOrMethodGen.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 package com.sun.org.apache.bcel.internal.generic;
 21 
 22 import java.util.ArrayList;
 23 import java.util.List;
 24 
 25 import com.sun.org.apache.bcel.internal.Const;
 26 import com.sun.org.apache.bcel.internal.classfile.AccessFlags;
 27 import com.sun.org.apache.bcel.internal.classfile.Attribute;
 28 
 29 /**
<span class="line-modified"> 30  * Super class for FieldGen and MethodGen objects, since they have some methods</span>
<span class="line-modified"> 31  * in common!</span>
 32  *
<span class="line-modified"> 33  * @version $Id: FieldGenOrMethodGen.java 1749603 2016-06-21 20:50:19Z ggregory</span>
<span class="line-removed"> 34  * $</span>
 35  */
 36 public abstract class FieldGenOrMethodGen extends AccessFlags implements NamedAndTyped, Cloneable {
 37 
 38     private String name;
 39     private Type type;
 40     private ConstantPoolGen cp;
 41 
 42     private final List&lt;Attribute&gt; attribute_vec = new ArrayList&lt;&gt;();
 43 
 44     // @since 6.0
<span class="line-modified"> 45     private final List&lt;AnnotationEntryGen&gt; annotation_vec = new ArrayList&lt;&gt;();</span>

 46 
 47     protected FieldGenOrMethodGen() {
 48     }
 49 

 50     /**
 51      * @since 6.0
 52      */
 53     protected FieldGenOrMethodGen(final int access_flags) { // TODO could this be package protected?
 54         super(access_flags);
 55     }
 56 
 57     @Override
<span class="line-modified"> 58     public void setType(final Type type) { // TODO could be package-protected?</span>
 59         if (type.getType() == Const.T_ADDRESS) {
 60             throw new IllegalArgumentException(&quot;Type can not be &quot; + type);
 61         }
 62         this.type = type;
 63     }
 64 

 65     @Override
 66     public Type getType() {
 67         return type;
 68     }
 69 
<span class="line-modified"> 70     /**</span>
<span class="line-modified"> 71      * @return name of method/field.</span>
 72      */
 73     @Override
 74     public String getName() {
 75         return name;
 76     }
 77 

 78     @Override
<span class="line-modified"> 79     public void setName(final String name) { // TODO could be package-protected?</span>
 80         this.name = name;
 81     }
 82 

 83     public ConstantPoolGen getConstantPool() {
 84         return cp;
 85     }
 86 
<span class="line-modified"> 87     public void setConstantPool(final ConstantPoolGen cp) { // TODO could be package-protected?</span>

 88         this.cp = cp;
 89     }
 90 

 91     /**
<span class="line-modified"> 92      * Add an attribute to this method. Currently, the JVM knows about the</span>
<span class="line-modified"> 93      * `Code&#39;, `ConstantValue&#39;, `Synthetic&#39; and `Exceptions&#39; attributes. Other</span>
<span class="line-modified"> 94      * attributes will be ignored by the JVM but do no harm.</span>

 95      *
 96      * @param a attribute to be added
 97      */
<span class="line-modified"> 98     public void addAttribute(final Attribute a) {</span>
 99         attribute_vec.add(a);
100     }
101 
102     /**
103      * @since 6.0
104      */
105     protected void addAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
106     {
107         annotation_vec.add(ag);
108     }
109 

110     /**
111      * Remove an attribute.
112      */
<span class="line-modified">113     public void removeAttribute(final Attribute a) {</span>
114         attribute_vec.remove(a);
115     }
116 
117     /**
118      * @since 6.0
119      */
120     protected void removeAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
121     {
122         annotation_vec.remove(ag);
123     }
124 

125     /**
126      * Remove all attributes.
127      */
128     public void removeAttributes() {
129         attribute_vec.clear();
130     }
131 
132     /**
133      * @since 6.0
134      */
135     protected void removeAnnotationEntries() // TODO could this be package protected?
136     {
137         annotation_vec.clear();
138     }
139 

140     /**
141      * @return all attributes of this method.
142      */
143     public Attribute[] getAttributes() {
144         final Attribute[] attributes = new Attribute[attribute_vec.size()];
145         attribute_vec.toArray(attributes);
146         return attributes;
147     }
148 
149     public AnnotationEntryGen[] getAnnotationEntries() {
150         final AnnotationEntryGen[] annotations = new AnnotationEntryGen[annotation_vec.size()];
<span class="line-modified">151         annotation_vec.toArray(annotations);</span>
<span class="line-modified">152         return annotations;</span>
<span class="line-modified">153     }</span>
154 
<span class="line-modified">155     /**</span>
<span class="line-modified">156      * @return signature of method/field.</span>
157      */
158     public abstract String getSignature();
159 

160     @Override
161     public Object clone() {
162         try {
163             return super.clone();
164         } catch (final CloneNotSupportedException e) {
165             throw new Error(&quot;Clone Not Supported&quot;); // never happens
166         }
167     }
168 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 package com.sun.org.apache.bcel.internal.generic;
 21 
 22 import java.util.ArrayList;
 23 import java.util.List;
 24 
 25 import com.sun.org.apache.bcel.internal.Const;
 26 import com.sun.org.apache.bcel.internal.classfile.AccessFlags;
 27 import com.sun.org.apache.bcel.internal.classfile.Attribute;
 28 
 29 /**
<span class="line-modified"> 30  * Super class for FieldGen and MethodGen objects, since they have</span>
<span class="line-modified"> 31  * some methods in common!</span>
 32  *
<span class="line-modified"> 33  * @LastModified: Jun 2020</span>

 34  */
 35 public abstract class FieldGenOrMethodGen extends AccessFlags implements NamedAndTyped, Cloneable {
 36 
 37     private String name;
 38     private Type type;
 39     private ConstantPoolGen cp;
 40 
 41     private final List&lt;Attribute&gt; attribute_vec = new ArrayList&lt;&gt;();
 42 
 43     // @since 6.0
<span class="line-modified"> 44     private final List&lt;AnnotationEntryGen&gt;       annotation_vec= new ArrayList&lt;&gt;();</span>
<span class="line-added"> 45 </span>
 46 
 47     protected FieldGenOrMethodGen() {
 48     }
 49 
<span class="line-added"> 50 </span>
 51     /**
 52      * @since 6.0
 53      */
 54     protected FieldGenOrMethodGen(final int access_flags) { // TODO could this be package protected?
 55         super(access_flags);
 56     }
 57 
 58     @Override
<span class="line-modified"> 59     public void setType( final Type type ) { // TODO could be package-protected?</span>
 60         if (type.getType() == Const.T_ADDRESS) {
 61             throw new IllegalArgumentException(&quot;Type can not be &quot; + type);
 62         }
 63         this.type = type;
 64     }
 65 
<span class="line-added"> 66 </span>
 67     @Override
 68     public Type getType() {
 69         return type;
 70     }
 71 
<span class="line-modified"> 72 </span>
<span class="line-modified"> 73     /** @return name of method/field.</span>
 74      */
 75     @Override
 76     public String getName() {
 77         return name;
 78     }
 79 
<span class="line-added"> 80 </span>
 81     @Override
<span class="line-modified"> 82     public void setName( final String name ) { // TODO could be package-protected?</span>
 83         this.name = name;
 84     }
 85 
<span class="line-added"> 86 </span>
 87     public ConstantPoolGen getConstantPool() {
 88         return cp;
 89     }
 90 
<span class="line-modified"> 91 </span>
<span class="line-added"> 92     public void setConstantPool( final ConstantPoolGen cp ) { // TODO could be package-protected?</span>
 93         this.cp = cp;
 94     }
 95 
<span class="line-added"> 96 </span>
 97     /**
<span class="line-modified"> 98      * Add an attribute to this method. Currently, the JVM knows about</span>
<span class="line-modified"> 99      * the `Code&#39;, `ConstantValue&#39;, `Synthetic&#39; and `Exceptions&#39;</span>
<span class="line-modified">100      * attributes. Other attributes will be ignored by the JVM but do no</span>
<span class="line-added">101      * harm.</span>
102      *
103      * @param a attribute to be added
104      */
<span class="line-modified">105     public void addAttribute( final Attribute a ) {</span>
106         attribute_vec.add(a);
107     }
108 
109     /**
110      * @since 6.0
111      */
112     protected void addAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
113     {
114         annotation_vec.add(ag);
115     }
116 
<span class="line-added">117 </span>
118     /**
119      * Remove an attribute.
120      */
<span class="line-modified">121     public void removeAttribute( final Attribute a ) {</span>
122         attribute_vec.remove(a);
123     }
124 
125     /**
126      * @since 6.0
127      */
128     protected void removeAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
129     {
130         annotation_vec.remove(ag);
131     }
132 
<span class="line-added">133 </span>
134     /**
135      * Remove all attributes.
136      */
137     public void removeAttributes() {
138         attribute_vec.clear();
139     }
140 
141     /**
142      * @since 6.0
143      */
144     protected void removeAnnotationEntries() // TODO could this be package protected?
145     {
146         annotation_vec.clear();
147     }
148 
<span class="line-added">149 </span>
150     /**
151      * @return all attributes of this method.
152      */
153     public Attribute[] getAttributes() {
154         final Attribute[] attributes = new Attribute[attribute_vec.size()];
155         attribute_vec.toArray(attributes);
156         return attributes;
157     }
158 
159     public AnnotationEntryGen[] getAnnotationEntries() {
160         final AnnotationEntryGen[] annotations = new AnnotationEntryGen[annotation_vec.size()];
<span class="line-modified">161           annotation_vec.toArray(annotations);</span>
<span class="line-modified">162           return annotations;</span>
<span class="line-modified">163       }</span>
164 
<span class="line-modified">165 </span>
<span class="line-modified">166     /** @return signature of method/field.</span>
167      */
168     public abstract String getSignature();
169 
<span class="line-added">170 </span>
171     @Override
172     public Object clone() {
173         try {
174             return super.clone();
175         } catch (final CloneNotSupportedException e) {
176             throw new Error(&quot;Clone Not Supported&quot;); // never happens
177         }
178     }
179 }
</pre>
</td>
</tr>
</table>
<center><a href="FieldGen.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="FieldInstruction.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>