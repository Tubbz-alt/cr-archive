<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/Field.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ExceptionTable.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="FieldOrMethod.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/Field.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  6  * Licensed to the Apache Software Foundation (ASF) under one or more
  7  * contributor license agreements.  See the NOTICE file distributed with
  8  * this work for additional information regarding copyright ownership.
  9  * The ASF licenses this file to You under the Apache License, Version 2.0
 10  * (the &quot;License&quot;); you may not use this file except in compliance with
 11  * the License.  You may obtain a copy of the License at
 12  *
 13  *      http://www.apache.org/licenses/LICENSE-2.0
 14  *
 15  * Unless required by applicable law or agreed to in writing, software
 16  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 17  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.IOException;

 26 
 27 import com.sun.org.apache.bcel.internal.Const;
 28 import com.sun.org.apache.bcel.internal.generic.Type;
 29 import com.sun.org.apache.bcel.internal.util.BCELComparator;
 30 
 31 /**
 32  * This class represents the field info structure, i.e., the representation
 33  * for a variable in the class. See JVM specification for details.
 34  *
<span class="line-removed"> 35  * @version $Id: Field.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
 36  */
 37 public final class Field extends FieldOrMethod {
 38 
 39     private static BCELComparator bcelComparator = new BCELComparator() {
 40 
 41         @Override
 42         public boolean equals( final Object o1, final Object o2 ) {
 43             final Field THIS = (Field) o1;
 44             final Field THAT = (Field) o2;
<span class="line-modified"> 45             return THIS.getName().equals(THAT.getName())</span>
<span class="line-modified"> 46                     &amp;&amp; THIS.getSignature().equals(THAT.getSignature());</span>
 47         }
 48 
 49 
 50         @Override
 51         public int hashCode( final Object o ) {
 52             final Field THIS = (Field) o;
 53             return THIS.getSignature().hashCode() ^ THIS.getName().hashCode();
 54         }
 55     };
 56 
 57 
 58     /**
 59      * Initialize from another object. Note that both objects use the same
 60      * references (shallow copy). Use clone() for a physical copy.
 61      */
 62     public Field(final Field c) {
 63         super(c);
 64     }
 65 
 66 
</pre>
<hr />
<pre>
 86         super(access_flags, name_index, signature_index, attributes, constant_pool);
 87     }
 88 
 89 
 90     /**
 91      * Called by objects that are traversing the nodes of the tree implicitely
 92      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 93      * fields, attributes, etc. spawns a tree of objects.
 94      *
 95      * @param v Visitor object
 96      */
 97     @Override
 98     public void accept( final Visitor v ) {
 99         v.visitField(this);
100     }
101 
102 
103     /**
104      * @return constant value associated with this field (may be null)
105      */
<span class="line-modified">106     public final ConstantValue getConstantValue() {</span>
107         for (final Attribute attribute : super.getAttributes()) {
108             if (attribute.getTag() == Const.ATTR_CONSTANT_VALUE) {
109                 return (ConstantValue) attribute;
110             }
111         }
112         return null;
113     }
114 
115 
116     /**
117      * Return string representation close to declaration format,
118      * `public static final short MAX = 100&#39;, e.g..
119      *
120      * @return String representation of field, including the signature.
121      */
122     @Override
<span class="line-modified">123     public final String toString() {</span>
124         String name;
125         String signature;
126         String access; // Short cuts to constant pool
127 
128         // Get names from constant pool
129         access = Utility.accessToString(super.getAccessFlags());
130         access = access.isEmpty() ? &quot;&quot; : (access + &quot; &quot;);
131         signature = Utility.signatureToString(getSignature());
132         name = getName();
133         final StringBuilder buf = new StringBuilder(64); // CHECKSTYLE IGNORE MagicNumber
134         buf.append(access).append(signature).append(&quot; &quot;).append(name);
135         final ConstantValue cv = getConstantValue();
136         if (cv != null) {
137             buf.append(&quot; = &quot;).append(cv);
138         }
139         for (final Attribute attribute : super.getAttributes()) {
140             if (!(attribute instanceof ConstantValue)) {
141                 buf.append(&quot; [&quot;).append(attribute).append(&quot;]&quot;);
142             }
143         }
144         return buf.toString();
145     }
146 
147 
148     /**
149      * @return deep copy of this field
150      */
<span class="line-modified">151     public final Field copy( final ConstantPool _constant_pool ) {</span>
152         return (Field) copy_(_constant_pool);
153     }
154 
155 
156     /**
157      * @return type of field
158      */
159     public Type getType() {
160         return Type.getReturnType(getSignature());
161     }
162 
163 
164     /**
165      * @return Comparison strategy object
166      */
167     public static BCELComparator getComparator() {
168         return bcelComparator;
169     }
170 
171 
</pre>
</td>
<td>
<hr />
<pre>
  6  * Licensed to the Apache Software Foundation (ASF) under one or more
  7  * contributor license agreements.  See the NOTICE file distributed with
  8  * this work for additional information regarding copyright ownership.
  9  * The ASF licenses this file to You under the Apache License, Version 2.0
 10  * (the &quot;License&quot;); you may not use this file except in compliance with
 11  * the License.  You may obtain a copy of the License at
 12  *
 13  *      http://www.apache.org/licenses/LICENSE-2.0
 14  *
 15  * Unless required by applicable law or agreed to in writing, software
 16  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 17  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.IOException;
<span class="line-added"> 26 import java.util.Objects;</span>
 27 
 28 import com.sun.org.apache.bcel.internal.Const;
 29 import com.sun.org.apache.bcel.internal.generic.Type;
 30 import com.sun.org.apache.bcel.internal.util.BCELComparator;
 31 
 32 /**
 33  * This class represents the field info structure, i.e., the representation
 34  * for a variable in the class. See JVM specification for details.
 35  *

 36  */
 37 public final class Field extends FieldOrMethod {
 38 
 39     private static BCELComparator bcelComparator = new BCELComparator() {
 40 
 41         @Override
 42         public boolean equals( final Object o1, final Object o2 ) {
 43             final Field THIS = (Field) o1;
 44             final Field THAT = (Field) o2;
<span class="line-modified"> 45             return Objects.equals(THIS.getName(), THAT.getName())</span>
<span class="line-modified"> 46                     &amp;&amp; Objects.equals(THIS.getSignature(), THAT.getSignature());</span>
 47         }
 48 
 49 
 50         @Override
 51         public int hashCode( final Object o ) {
 52             final Field THIS = (Field) o;
 53             return THIS.getSignature().hashCode() ^ THIS.getName().hashCode();
 54         }
 55     };
 56 
 57 
 58     /**
 59      * Initialize from another object. Note that both objects use the same
 60      * references (shallow copy). Use clone() for a physical copy.
 61      */
 62     public Field(final Field c) {
 63         super(c);
 64     }
 65 
 66 
</pre>
<hr />
<pre>
 86         super(access_flags, name_index, signature_index, attributes, constant_pool);
 87     }
 88 
 89 
 90     /**
 91      * Called by objects that are traversing the nodes of the tree implicitely
 92      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 93      * fields, attributes, etc. spawns a tree of objects.
 94      *
 95      * @param v Visitor object
 96      */
 97     @Override
 98     public void accept( final Visitor v ) {
 99         v.visitField(this);
100     }
101 
102 
103     /**
104      * @return constant value associated with this field (may be null)
105      */
<span class="line-modified">106     public ConstantValue getConstantValue() {</span>
107         for (final Attribute attribute : super.getAttributes()) {
108             if (attribute.getTag() == Const.ATTR_CONSTANT_VALUE) {
109                 return (ConstantValue) attribute;
110             }
111         }
112         return null;
113     }
114 
115 
116     /**
117      * Return string representation close to declaration format,
118      * `public static final short MAX = 100&#39;, e.g..
119      *
120      * @return String representation of field, including the signature.
121      */
122     @Override
<span class="line-modified">123     public String toString() {</span>
124         String name;
125         String signature;
126         String access; // Short cuts to constant pool
127 
128         // Get names from constant pool
129         access = Utility.accessToString(super.getAccessFlags());
130         access = access.isEmpty() ? &quot;&quot; : (access + &quot; &quot;);
131         signature = Utility.signatureToString(getSignature());
132         name = getName();
133         final StringBuilder buf = new StringBuilder(64); // CHECKSTYLE IGNORE MagicNumber
134         buf.append(access).append(signature).append(&quot; &quot;).append(name);
135         final ConstantValue cv = getConstantValue();
136         if (cv != null) {
137             buf.append(&quot; = &quot;).append(cv);
138         }
139         for (final Attribute attribute : super.getAttributes()) {
140             if (!(attribute instanceof ConstantValue)) {
141                 buf.append(&quot; [&quot;).append(attribute).append(&quot;]&quot;);
142             }
143         }
144         return buf.toString();
145     }
146 
147 
148     /**
149      * @return deep copy of this field
150      */
<span class="line-modified">151     public Field copy( final ConstantPool _constant_pool ) {</span>
152         return (Field) copy_(_constant_pool);
153     }
154 
155 
156     /**
157      * @return type of field
158      */
159     public Type getType() {
160         return Type.getReturnType(getSignature());
161     }
162 
163 
164     /**
165      * @return Comparison strategy object
166      */
167     public static BCELComparator getComparator() {
168         return bcelComparator;
169     }
170 
171 
</pre>
</td>
</tr>
</table>
<center><a href="ExceptionTable.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="FieldOrMethod.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>