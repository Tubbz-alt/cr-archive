<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/generic/FieldGenOrMethodGen.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FieldGen.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="FieldInstruction.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/generic/FieldGenOrMethodGen.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
   * Licensed to the Apache Software Foundation (ASF) under one or more
   * contributor license agreements.  See the NOTICE file distributed with
   * this work for additional information regarding copyright ownership.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2017, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
   * Licensed to the Apache Software Foundation (ASF) under one or more
   * contributor license agreements.  See the NOTICE file distributed with
   * this work for additional information regarding copyright ownership.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 25,79 ***</span>
  import com.sun.org.apache.bcel.internal.Const;
  import com.sun.org.apache.bcel.internal.classfile.AccessFlags;
  import com.sun.org.apache.bcel.internal.classfile.Attribute;
  
  /**
<span class="line-modified">!  * Super class for FieldGen and MethodGen objects, since they have some methods</span>
<span class="line-modified">!  * in common!</span>
   *
<span class="line-modified">!  * @version $Id: FieldGenOrMethodGen.java 1749603 2016-06-21 20:50:19Z ggregory</span>
<span class="line-removed">-  * $</span>
   */
  public abstract class FieldGenOrMethodGen extends AccessFlags implements NamedAndTyped, Cloneable {
  
      private String name;
      private Type type;
      private ConstantPoolGen cp;
  
      private final List&lt;Attribute&gt; attribute_vec = new ArrayList&lt;&gt;();
  
      // @since 6.0
<span class="line-modified">!     private final List&lt;AnnotationEntryGen&gt; annotation_vec = new ArrayList&lt;&gt;();</span>
  
      protected FieldGenOrMethodGen() {
      }
  
      /**
       * @since 6.0
       */
      protected FieldGenOrMethodGen(final int access_flags) { // TODO could this be package protected?
          super(access_flags);
      }
  
      @Override
<span class="line-modified">!     public void setType(final Type type) { // TODO could be package-protected?</span>
          if (type.getType() == Const.T_ADDRESS) {
              throw new IllegalArgumentException(&quot;Type can not be &quot; + type);
          }
          this.type = type;
      }
  
      @Override
      public Type getType() {
          return type;
      }
  
<span class="line-modified">!     /**</span>
<span class="line-modified">!      * @return name of method/field.</span>
       */
      @Override
      public String getName() {
          return name;
      }
  
      @Override
<span class="line-modified">!     public void setName(final String name) { // TODO could be package-protected?</span>
          this.name = name;
      }
  
      public ConstantPoolGen getConstantPool() {
          return cp;
      }
  
<span class="line-modified">!     public void setConstantPool(final ConstantPoolGen cp) { // TODO could be package-protected?</span>
          this.cp = cp;
      }
  
      /**
<span class="line-modified">!      * Add an attribute to this method. Currently, the JVM knows about the</span>
<span class="line-modified">!      * `Code&#39;, `ConstantValue&#39;, `Synthetic&#39; and `Exceptions&#39; attributes. Other</span>
<span class="line-modified">!      * attributes will be ignored by the JVM but do no harm.</span>
       *
       * @param a attribute to be added
       */
<span class="line-modified">!     public void addAttribute(final Attribute a) {</span>
          attribute_vec.add(a);
      }
  
      /**
       * @since 6.0
<span class="line-new-header">--- 25,86 ---</span>
  import com.sun.org.apache.bcel.internal.Const;
  import com.sun.org.apache.bcel.internal.classfile.AccessFlags;
  import com.sun.org.apache.bcel.internal.classfile.Attribute;
  
  /**
<span class="line-modified">!  * Super class for FieldGen and MethodGen objects, since they have</span>
<span class="line-modified">!  * some methods in common!</span>
   *
<span class="line-modified">!  * @LastModified: Jun 2020</span>
   */
  public abstract class FieldGenOrMethodGen extends AccessFlags implements NamedAndTyped, Cloneable {
  
      private String name;
      private Type type;
      private ConstantPoolGen cp;
  
      private final List&lt;Attribute&gt; attribute_vec = new ArrayList&lt;&gt;();
  
      // @since 6.0
<span class="line-modified">!     private final List&lt;AnnotationEntryGen&gt;       annotation_vec= new ArrayList&lt;&gt;();</span>
<span class="line-added">+ </span>
  
      protected FieldGenOrMethodGen() {
      }
  
<span class="line-added">+ </span>
      /**
       * @since 6.0
       */
      protected FieldGenOrMethodGen(final int access_flags) { // TODO could this be package protected?
          super(access_flags);
      }
  
      @Override
<span class="line-modified">!     public void setType( final Type type ) { // TODO could be package-protected?</span>
          if (type.getType() == Const.T_ADDRESS) {
              throw new IllegalArgumentException(&quot;Type can not be &quot; + type);
          }
          this.type = type;
      }
  
<span class="line-added">+ </span>
      @Override
      public Type getType() {
          return type;
      }
  
<span class="line-modified">! </span>
<span class="line-modified">!     /** @return name of method/field.</span>
       */
      @Override
      public String getName() {
          return name;
      }
  
<span class="line-added">+ </span>
      @Override
<span class="line-modified">!     public void setName( final String name ) { // TODO could be package-protected?</span>
          this.name = name;
      }
  
<span class="line-added">+ </span>
      public ConstantPoolGen getConstantPool() {
          return cp;
      }
  
<span class="line-modified">! </span>
<span class="line-added">+     public void setConstantPool( final ConstantPoolGen cp ) { // TODO could be package-protected?</span>
          this.cp = cp;
      }
  
<span class="line-added">+ </span>
      /**
<span class="line-modified">!      * Add an attribute to this method. Currently, the JVM knows about</span>
<span class="line-modified">!      * the `Code&#39;, `ConstantValue&#39;, `Synthetic&#39; and `Exceptions&#39;</span>
<span class="line-modified">!      * attributes. Other attributes will be ignored by the JVM but do no</span>
<span class="line-added">+      * harm.</span>
       *
       * @param a attribute to be added
       */
<span class="line-modified">!     public void addAttribute( final Attribute a ) {</span>
          attribute_vec.add(a);
      }
  
      /**
       * @since 6.0
</pre>
<hr />
<pre>
<span class="line-old-header">*** 105,14 ***</span>
      protected void addAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
      {
          annotation_vec.add(ag);
      }
  
      /**
       * Remove an attribute.
       */
<span class="line-modified">!     public void removeAttribute(final Attribute a) {</span>
          attribute_vec.remove(a);
      }
  
      /**
       * @since 6.0
<span class="line-new-header">--- 112,15 ---</span>
      protected void addAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
      {
          annotation_vec.add(ag);
      }
  
<span class="line-added">+ </span>
      /**
       * Remove an attribute.
       */
<span class="line-modified">!     public void removeAttribute( final Attribute a ) {</span>
          attribute_vec.remove(a);
      }
  
      /**
       * @since 6.0
</pre>
<hr />
<pre>
<span class="line-old-header">*** 120,10 ***</span>
<span class="line-new-header">--- 128,11 ---</span>
      protected void removeAnnotationEntry(final AnnotationEntryGen ag) // TODO could this be package protected?
      {
          annotation_vec.remove(ag);
      }
  
<span class="line-added">+ </span>
      /**
       * Remove all attributes.
       */
      public void removeAttributes() {
          attribute_vec.clear();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 135,10 ***</span>
<span class="line-new-header">--- 144,11 ---</span>
      protected void removeAnnotationEntries() // TODO could this be package protected?
      {
          annotation_vec.clear();
      }
  
<span class="line-added">+ </span>
      /**
       * @return all attributes of this method.
       */
      public Attribute[] getAttributes() {
          final Attribute[] attributes = new Attribute[attribute_vec.size()];
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,19 ***</span>
          return attributes;
      }
  
      public AnnotationEntryGen[] getAnnotationEntries() {
          final AnnotationEntryGen[] annotations = new AnnotationEntryGen[annotation_vec.size()];
<span class="line-modified">!         annotation_vec.toArray(annotations);</span>
<span class="line-modified">!         return annotations;</span>
<span class="line-modified">!     }</span>
  
<span class="line-modified">!     /**</span>
<span class="line-modified">!      * @return signature of method/field.</span>
       */
      public abstract String getSignature();
  
      @Override
      public Object clone() {
          try {
              return super.clone();
          } catch (final CloneNotSupportedException e) {
<span class="line-new-header">--- 156,20 ---</span>
          return attributes;
      }
  
      public AnnotationEntryGen[] getAnnotationEntries() {
          final AnnotationEntryGen[] annotations = new AnnotationEntryGen[annotation_vec.size()];
<span class="line-modified">!           annotation_vec.toArray(annotations);</span>
<span class="line-modified">!           return annotations;</span>
<span class="line-modified">!       }</span>
  
<span class="line-modified">! </span>
<span class="line-modified">!     /** @return signature of method/field.</span>
       */
      public abstract String getSignature();
  
<span class="line-added">+ </span>
      @Override
      public Object clone() {
          try {
              return super.clone();
          } catch (final CloneNotSupportedException e) {
</pre>
<center><a href="FieldGen.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="FieldInstruction.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>