<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/ExceptionTable.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="EmptyVisitor.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Field.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/ExceptionTable.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.DataOutputStream;
 26 import java.io.IOException;
 27 
 28 import com.sun.org.apache.bcel.internal.Const;
 29 
 30 /**
 31  * This class represents the table of exceptions that are thrown by a
 32  * method. This attribute may be used once per method.  The name of
 33  * this class is &lt;em&gt;ExceptionTable&lt;/em&gt; for historical reasons; The
 34  * Java Virtual Machine Specification, Second Edition defines this
 35  * attribute using the name &lt;em&gt;Exceptions&lt;/em&gt; (which is inconsistent
 36  * with the other classes).
 37  *
<span class="line-removed"> 38  * @version $Id: ExceptionTable.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
 39  * @see     Code
 40  */
 41 public final class ExceptionTable extends Attribute {
 42 
 43     private int[] exception_index_table; // constant pool
 44 
 45 
 46     /**
 47      * Initialize from another object. Note that both objects use the same
 48      * references (shallow copy). Use copy() for a physical copy.
 49      */
 50     public ExceptionTable(final ExceptionTable c) {
 51         this(c.getNameIndex(), c.getLength(), c.getExceptionIndexTable(), c.getConstantPool());
 52     }
 53 
 54 
 55     /**
 56      * @param name_index Index in constant pool
 57      * @param length Content length in bytes
 58      * @param exception_index_table Table of indices in constant pool
</pre>
<hr />
<pre>
 86     /**
 87      * Called by objects that are traversing the nodes of the tree implicitely
 88      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 89      * fields, attributes, etc. spawns a tree of objects.
 90      *
 91      * @param v Visitor object
 92      */
 93     @Override
 94     public void accept( final Visitor v ) {
 95         v.visitExceptionTable(this);
 96     }
 97 
 98 
 99     /**
100      * Dump exceptions attribute to file stream in binary format.
101      *
102      * @param file Output file stream
103      * @throws IOException
104      */
105     @Override
<span class="line-modified">106     public final void dump( final DataOutputStream file ) throws IOException {</span>
107         super.dump(file);
108         file.writeShort(exception_index_table.length);
109         for (final int index : exception_index_table) {
110             file.writeShort(index);
111         }
112     }
113 
114 
115     /**
116      * @return Array of indices into constant pool of thrown exceptions.
117      */
<span class="line-modified">118     public final int[] getExceptionIndexTable() {</span>
119         return exception_index_table;
120     }
121 
122 
123     /**
124      * @return Length of exception table.
125      */
<span class="line-modified">126     public final int getNumberOfExceptions() {</span>
127         return exception_index_table == null ? 0 : exception_index_table.length;
128     }
129 
130 
131     /**
132      * @return class names of thrown exceptions
133      */
<span class="line-modified">134     public final String[] getExceptionNames() {</span>
135         final String[] names = new String[exception_index_table.length];
136         for (int i = 0; i &lt; exception_index_table.length; i++) {
137             names[i] = super.getConstantPool().getConstantString(exception_index_table[i],
138                     Const.CONSTANT_Class).replace(&#39;/&#39;, &#39;.&#39;);
139         }
140         return names;
141     }
142 
143 
144     /**
145      * @param exception_index_table the list of exception indexes
146      * Also redefines number_of_exceptions according to table length.
147      */
<span class="line-modified">148     public final void setExceptionIndexTable( final int[] exception_index_table ) {</span>
149         this.exception_index_table = exception_index_table != null ? exception_index_table : new int[0];
150     }
151 
152 
153     /**
154      * @return String representation, i.e., a list of thrown exceptions.
155      */
156     @Override
<span class="line-modified">157     public final String toString() {</span>
158         final StringBuilder buf = new StringBuilder();
159         String str;
160         buf.append(&quot;Exceptions: &quot;);
161         for (int i = 0; i &lt; exception_index_table.length; i++) {
162             str = super.getConstantPool().getConstantString(exception_index_table[i], Const.CONSTANT_Class);
163             buf.append(Utility.compactClassName(str, false));
164             if (i &lt; exception_index_table.length - 1) {
165                 buf.append(&quot;, &quot;);
166             }
167         }
168         return buf.toString();
169     }
170 
171 
172     /**
173      * @return deep copy of this attribute
174      */
175     @Override
176     public Attribute copy( final ConstantPool _constant_pool ) {
177         final ExceptionTable c = (ExceptionTable) clone();
</pre>
</td>
<td>
<hr />
<pre>
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.DataOutputStream;
 26 import java.io.IOException;
 27 
 28 import com.sun.org.apache.bcel.internal.Const;
 29 
 30 /**
 31  * This class represents the table of exceptions that are thrown by a
 32  * method. This attribute may be used once per method.  The name of
 33  * this class is &lt;em&gt;ExceptionTable&lt;/em&gt; for historical reasons; The
 34  * Java Virtual Machine Specification, Second Edition defines this
 35  * attribute using the name &lt;em&gt;Exceptions&lt;/em&gt; (which is inconsistent
 36  * with the other classes).
 37  *

 38  * @see     Code
 39  */
 40 public final class ExceptionTable extends Attribute {
 41 
 42     private int[] exception_index_table; // constant pool
 43 
 44 
 45     /**
 46      * Initialize from another object. Note that both objects use the same
 47      * references (shallow copy). Use copy() for a physical copy.
 48      */
 49     public ExceptionTable(final ExceptionTable c) {
 50         this(c.getNameIndex(), c.getLength(), c.getExceptionIndexTable(), c.getConstantPool());
 51     }
 52 
 53 
 54     /**
 55      * @param name_index Index in constant pool
 56      * @param length Content length in bytes
 57      * @param exception_index_table Table of indices in constant pool
</pre>
<hr />
<pre>
 85     /**
 86      * Called by objects that are traversing the nodes of the tree implicitely
 87      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 88      * fields, attributes, etc. spawns a tree of objects.
 89      *
 90      * @param v Visitor object
 91      */
 92     @Override
 93     public void accept( final Visitor v ) {
 94         v.visitExceptionTable(this);
 95     }
 96 
 97 
 98     /**
 99      * Dump exceptions attribute to file stream in binary format.
100      *
101      * @param file Output file stream
102      * @throws IOException
103      */
104     @Override
<span class="line-modified">105     public void dump( final DataOutputStream file ) throws IOException {</span>
106         super.dump(file);
107         file.writeShort(exception_index_table.length);
108         for (final int index : exception_index_table) {
109             file.writeShort(index);
110         }
111     }
112 
113 
114     /**
115      * @return Array of indices into constant pool of thrown exceptions.
116      */
<span class="line-modified">117     public int[] getExceptionIndexTable() {</span>
118         return exception_index_table;
119     }
120 
121 
122     /**
123      * @return Length of exception table.
124      */
<span class="line-modified">125     public int getNumberOfExceptions() {</span>
126         return exception_index_table == null ? 0 : exception_index_table.length;
127     }
128 
129 
130     /**
131      * @return class names of thrown exceptions
132      */
<span class="line-modified">133     public String[] getExceptionNames() {</span>
134         final String[] names = new String[exception_index_table.length];
135         for (int i = 0; i &lt; exception_index_table.length; i++) {
136             names[i] = super.getConstantPool().getConstantString(exception_index_table[i],
137                     Const.CONSTANT_Class).replace(&#39;/&#39;, &#39;.&#39;);
138         }
139         return names;
140     }
141 
142 
143     /**
144      * @param exception_index_table the list of exception indexes
145      * Also redefines number_of_exceptions according to table length.
146      */
<span class="line-modified">147     public void setExceptionIndexTable( final int[] exception_index_table ) {</span>
148         this.exception_index_table = exception_index_table != null ? exception_index_table : new int[0];
149     }
150 
151 
152     /**
153      * @return String representation, i.e., a list of thrown exceptions.
154      */
155     @Override
<span class="line-modified">156     public String toString() {</span>
157         final StringBuilder buf = new StringBuilder();
158         String str;
159         buf.append(&quot;Exceptions: &quot;);
160         for (int i = 0; i &lt; exception_index_table.length; i++) {
161             str = super.getConstantPool().getConstantString(exception_index_table[i], Const.CONSTANT_Class);
162             buf.append(Utility.compactClassName(str, false));
163             if (i &lt; exception_index_table.length - 1) {
164                 buf.append(&quot;, &quot;);
165             }
166         }
167         return buf.toString();
168     }
169 
170 
171     /**
172      * @return deep copy of this attribute
173      */
174     @Override
175     public Attribute copy( final ConstantPool _constant_pool ) {
176         final ExceptionTable c = (ExceptionTable) clone();
</pre>
</td>
</tr>
</table>
<center><a href="EmptyVisitor.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Field.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>