<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/xerces/internal/dom/DocumentTypeImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DeferredDocumentImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ElementImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/xerces/internal/dom/DocumentTypeImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2015, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 
 21 package com.sun.org.apache.xerces.internal.dom;
 22 
</pre>
<hr />
<pre>
 39  * An XML document may (or may not) have such a reference.
 40  * &lt;P&gt;
 41  * DocumentType is an Extended DOM feature, used in XML documents but
 42  * not in HTML.
 43  * &lt;P&gt;
 44  * Note that Entities and Notations are no longer children of the
 45  * DocumentType, but are parentless nodes hung only in their
 46  * appropriate NamedNodeMaps.
 47  * &lt;P&gt;
 48  * This area is UNDERSPECIFIED IN REC-DOM-Level-1-19981001
 49  * Most notably, absolutely no provision was made for storing
 50  * and using Element and Attribute information. Nor was the linkage
 51  * between Entities and Entity References nailed down solidly.
 52  *
 53  * @xerces.internal
 54  *
 55  * @author Arnaud  Le Hors, IBM
 56  * @author Joe Kesselman, IBM
 57  * @author Andy Clark, IBM
 58  * @since  PR-DOM-Level-1-19980818.

 59  */
 60 public class DocumentTypeImpl
 61     extends ParentNode
 62     implements DocumentType {
 63 
 64     //
 65     // Constants
 66     //
 67 
 68     /** Serialization version. */
 69     static final long serialVersionUID = 7751299192316526485L;
 70 
 71     //
 72     // Data
 73     //
 74 
 75     /** Document type name. */
 76     protected String name;
 77 
 78     /** Entities. */
</pre>
<hr />
<pre>
307                 return false;
308             }
309         }
310 
311         //test if NamedNodeMaps entities and notations are equal
312         NamedNodeMapImpl argEntities = argDocType.entities;
313 
314         if ((entities == null &amp;&amp; argEntities != null)
315             || (entities != null &amp;&amp; argEntities == null))
316             return false;
317 
318         if (entities != null &amp;&amp; argEntities != null) {
319             if (entities.getLength() != argEntities.getLength())
320                 return false;
321 
322             for (int index = 0; entities.item(index) != null; index++) {
323                 Node entNode1 = entities.item(index);
324                 Node entNode2 =
325                     argEntities.getNamedItem(entNode1.getNodeName());
326 
<span class="line-modified">327                 if (!((NodeImpl) entNode1).isEqualNode((NodeImpl) entNode2))</span>
328                     return false;
329             }
330         }
331 
332         NamedNodeMapImpl argNotations = argDocType.notations;
333 
334         if ((notations == null &amp;&amp; argNotations != null)
335             || (notations != null &amp;&amp; argNotations == null))
336             return false;
337 
338         if (notations != null &amp;&amp; argNotations != null) {
339             if (notations.getLength() != argNotations.getLength())
340                 return false;
341 
342             for (int index = 0; notations.item(index) != null; index++) {
343                 Node noteNode1 = notations.item(index);
344                 Node noteNode2 =
345                     argNotations.getNamedItem(noteNode1.getNodeName());
346 
<span class="line-modified">347                 if (!((NodeImpl) noteNode1).isEqualNode((NodeImpl) noteNode2))</span>
348                     return false;
349             }
350         }
351 
352         return true;
353     } //end isEqualNode
354 
355 
356     /**
357      * NON-DOM
358      * set the ownerDocument of this node and its children
359      */
<span class="line-modified">360     void setOwnerDocument(CoreDocumentImpl doc) {</span>
361         super.setOwnerDocument(doc);
362         entities.setOwnerDocument(doc);
363         notations.setOwnerDocument(doc);
364         elements.setOwnerDocument(doc);
365     }
366 
367     /** NON-DOM
368         Get the number associated with this doctype.
369     */
370     protected int getNodeNumber() {
371          // If the doctype has a document owner, get the node number
372          // relative to the owner doc
373          if (getOwnerDocument()!=null)
374             return super.getNodeNumber();
375 
376          // The doctype is disconnected and not associated with any document.
377          // Assign the doctype a number relative to the implementation.
378          if (doctypeNumber==0) {
379 
380             CoreDOMImplementationImpl cd = (CoreDOMImplementationImpl)CoreDOMImplementationImpl.getDOMImplementation();
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 
 21 package com.sun.org.apache.xerces.internal.dom;
 22 
</pre>
<hr />
<pre>
 39  * An XML document may (or may not) have such a reference.
 40  * &lt;P&gt;
 41  * DocumentType is an Extended DOM feature, used in XML documents but
 42  * not in HTML.
 43  * &lt;P&gt;
 44  * Note that Entities and Notations are no longer children of the
 45  * DocumentType, but are parentless nodes hung only in their
 46  * appropriate NamedNodeMaps.
 47  * &lt;P&gt;
 48  * This area is UNDERSPECIFIED IN REC-DOM-Level-1-19981001
 49  * Most notably, absolutely no provision was made for storing
 50  * and using Element and Attribute information. Nor was the linkage
 51  * between Entities and Entity References nailed down solidly.
 52  *
 53  * @xerces.internal
 54  *
 55  * @author Arnaud  Le Hors, IBM
 56  * @author Joe Kesselman, IBM
 57  * @author Andy Clark, IBM
 58  * @since  PR-DOM-Level-1-19980818.
<span class="line-added"> 59  * @LastModified: Apr 2019</span>
 60  */
 61 public class DocumentTypeImpl
 62     extends ParentNode
 63     implements DocumentType {
 64 
 65     //
 66     // Constants
 67     //
 68 
 69     /** Serialization version. */
 70     static final long serialVersionUID = 7751299192316526485L;
 71 
 72     //
 73     // Data
 74     //
 75 
 76     /** Document type name. */
 77     protected String name;
 78 
 79     /** Entities. */
</pre>
<hr />
<pre>
308                 return false;
309             }
310         }
311 
312         //test if NamedNodeMaps entities and notations are equal
313         NamedNodeMapImpl argEntities = argDocType.entities;
314 
315         if ((entities == null &amp;&amp; argEntities != null)
316             || (entities != null &amp;&amp; argEntities == null))
317             return false;
318 
319         if (entities != null &amp;&amp; argEntities != null) {
320             if (entities.getLength() != argEntities.getLength())
321                 return false;
322 
323             for (int index = 0; entities.item(index) != null; index++) {
324                 Node entNode1 = entities.item(index);
325                 Node entNode2 =
326                     argEntities.getNamedItem(entNode1.getNodeName());
327 
<span class="line-modified">328                 if (!((NodeImpl) entNode1).isEqualNode(entNode2))</span>
329                     return false;
330             }
331         }
332 
333         NamedNodeMapImpl argNotations = argDocType.notations;
334 
335         if ((notations == null &amp;&amp; argNotations != null)
336             || (notations != null &amp;&amp; argNotations == null))
337             return false;
338 
339         if (notations != null &amp;&amp; argNotations != null) {
340             if (notations.getLength() != argNotations.getLength())
341                 return false;
342 
343             for (int index = 0; notations.item(index) != null; index++) {
344                 Node noteNode1 = notations.item(index);
345                 Node noteNode2 =
346                     argNotations.getNamedItem(noteNode1.getNodeName());
347 
<span class="line-modified">348                 if (!((NodeImpl) noteNode1).isEqualNode(noteNode2))</span>
349                     return false;
350             }
351         }
352 
353         return true;
354     } //end isEqualNode
355 
356 
357     /**
358      * NON-DOM
359      * set the ownerDocument of this node and its children
360      */
<span class="line-modified">361     protected void setOwnerDocument(CoreDocumentImpl doc) {</span>
362         super.setOwnerDocument(doc);
363         entities.setOwnerDocument(doc);
364         notations.setOwnerDocument(doc);
365         elements.setOwnerDocument(doc);
366     }
367 
368     /** NON-DOM
369         Get the number associated with this doctype.
370     */
371     protected int getNodeNumber() {
372          // If the doctype has a document owner, get the node number
373          // relative to the owner doc
374          if (getOwnerDocument()!=null)
375             return super.getNodeNumber();
376 
377          // The doctype is disconnected and not associated with any document.
378          // Assign the doctype a number relative to the implementation.
379          if (doctypeNumber==0) {
380 
381             CoreDOMImplementationImpl cd = (CoreDOMImplementationImpl)CoreDOMImplementationImpl.getDOMImplementation();
</pre>
</td>
</tr>
</table>
<center><a href="DeferredDocumentImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ElementImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>