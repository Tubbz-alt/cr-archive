<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/Synthetic.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="StackMapType.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Unknown.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/Synthetic.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.DataOutputStream;
 26 import java.io.IOException;
 27 
 28 import com.sun.org.apache.bcel.internal.Const;
 29 
 30 /**
 31  * This class is derived from &lt;em&gt;Attribute&lt;/em&gt; and declares this class as
 32  * `synthetic&#39;, i.e., it needs special handling.  The JVM specification
 33  * states &quot;A class member that does not appear in the source code must be
 34  * marked using a Synthetic attribute.&quot;  It may appear in the ClassFile
 35  * attribute table, a field_info table or a method_info table.  This class
 36  * is intended to be instantiated from the
 37  * &lt;em&gt;Attribute.readAttribute()&lt;/em&gt; method.
 38  *
<span class="line-removed"> 39  * @version $Id: Synthetic.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
 40  * @see     Attribute
 41  */
 42 public final class Synthetic extends Attribute {
 43 
 44     private byte[] bytes;
 45 
 46 
 47     /**
 48      * Initialize from another object. Note that both objects use the same
 49      * references (shallow copy). Use copy() for a physical copy.
 50      */
 51     public Synthetic(final Synthetic c) {
 52         this(c.getNameIndex(), c.getLength(), c.getBytes(), c.getConstantPool());
 53     }
 54 
 55 
 56     /**
 57      * @param name_index Index in constant pool to CONSTANT_Utf8, which
 58      * should represent the string &quot;Synthetic&quot;.
 59      * @param length Content length in bytes - should be zero.
</pre>
<hr />
<pre>
 65         super(Const.ATTR_SYNTHETIC, name_index, length, constant_pool);
 66         this.bytes = bytes;
 67     }
 68 
 69 
 70     /**
 71      * Construct object from input stream.
 72      *
 73      * @param name_index Index in constant pool to CONSTANT_Utf8
 74      * @param length Content length in bytes
 75      * @param input Input stream
 76      * @param constant_pool Array of constants
 77      * @throws IOException
 78      */
 79     Synthetic(final int name_index, final int length, final DataInput input, final ConstantPool constant_pool)
 80             throws IOException {
 81         this(name_index, length, (byte[]) null, constant_pool);
 82         if (length &gt; 0) {
 83             bytes = new byte[length];
 84             input.readFully(bytes);
<span class="line-modified"> 85             System.err.println(&quot;Synthetic attribute with length &gt; 0&quot;);</span>
 86         }
 87     }
 88 
 89 
 90     /**
 91      * Called by objects that are traversing the nodes of the tree implicitely
 92      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 93      * fields, attributes, etc. spawns a tree of objects.
 94      *
 95      * @param v Visitor object
 96      */
 97     @Override
 98     public void accept( final Visitor v ) {
 99         v.visitSynthetic(this);
100     }
101 
102 
103     /**
104      * Dump source file attribute to file stream in binary format.
105      *
106      * @param file Output file stream
107      * @throws IOException
108      */
109     @Override
<span class="line-modified">110     public final void dump( final DataOutputStream file ) throws IOException {</span>
111         super.dump(file);
112         if (super.getLength() &gt; 0) {
113             file.write(bytes, 0, super.getLength());
114         }
115     }
116 
117 
118     /**
119      * @return data bytes.
120      */
<span class="line-modified">121     public final byte[] getBytes() {</span>
122         return bytes;
123     }
124 
125 
126     /**
127      * @param bytes
128      */
<span class="line-modified">129     public final void setBytes( final byte[] bytes ) {</span>
130         this.bytes = bytes;
131     }
132 
133 
134     /**
135      * @return String representation.
136      */
137     @Override
<span class="line-modified">138     public final String toString() {</span>
139         final StringBuilder buf = new StringBuilder(&quot;Synthetic&quot;);
140         if (super.getLength() &gt; 0) {
141             buf.append(&quot; &quot;).append(Utility.toHexString(bytes));
142         }
143         return buf.toString();
144     }
145 
146 
147     /**
148      * @return deep copy of this attribute
149      */
150     @Override
151     public Attribute copy( final ConstantPool _constant_pool ) {
152         final Synthetic c = (Synthetic) clone();
153         if (bytes != null) {
154             c.bytes = new byte[bytes.length];
155             System.arraycopy(bytes, 0, c.bytes, 0, bytes.length);
156         }
157         c.setConstantPool(_constant_pool);
158         return c;
</pre>
</td>
<td>
<hr />
<pre>
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.DataOutputStream;
 26 import java.io.IOException;
 27 
 28 import com.sun.org.apache.bcel.internal.Const;
 29 
 30 /**
 31  * This class is derived from &lt;em&gt;Attribute&lt;/em&gt; and declares this class as
 32  * `synthetic&#39;, i.e., it needs special handling.  The JVM specification
 33  * states &quot;A class member that does not appear in the source code must be
 34  * marked using a Synthetic attribute.&quot;  It may appear in the ClassFile
 35  * attribute table, a field_info table or a method_info table.  This class
 36  * is intended to be instantiated from the
 37  * &lt;em&gt;Attribute.readAttribute()&lt;/em&gt; method.
 38  *

 39  * @see     Attribute
 40  */
 41 public final class Synthetic extends Attribute {
 42 
 43     private byte[] bytes;
 44 
 45 
 46     /**
 47      * Initialize from another object. Note that both objects use the same
 48      * references (shallow copy). Use copy() for a physical copy.
 49      */
 50     public Synthetic(final Synthetic c) {
 51         this(c.getNameIndex(), c.getLength(), c.getBytes(), c.getConstantPool());
 52     }
 53 
 54 
 55     /**
 56      * @param name_index Index in constant pool to CONSTANT_Utf8, which
 57      * should represent the string &quot;Synthetic&quot;.
 58      * @param length Content length in bytes - should be zero.
</pre>
<hr />
<pre>
 64         super(Const.ATTR_SYNTHETIC, name_index, length, constant_pool);
 65         this.bytes = bytes;
 66     }
 67 
 68 
 69     /**
 70      * Construct object from input stream.
 71      *
 72      * @param name_index Index in constant pool to CONSTANT_Utf8
 73      * @param length Content length in bytes
 74      * @param input Input stream
 75      * @param constant_pool Array of constants
 76      * @throws IOException
 77      */
 78     Synthetic(final int name_index, final int length, final DataInput input, final ConstantPool constant_pool)
 79             throws IOException {
 80         this(name_index, length, (byte[]) null, constant_pool);
 81         if (length &gt; 0) {
 82             bytes = new byte[length];
 83             input.readFully(bytes);
<span class="line-modified"> 84             println(&quot;Synthetic attribute with length &gt; 0&quot;);</span>
 85         }
 86     }
 87 
 88 
 89     /**
 90      * Called by objects that are traversing the nodes of the tree implicitely
 91      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 92      * fields, attributes, etc. spawns a tree of objects.
 93      *
 94      * @param v Visitor object
 95      */
 96     @Override
 97     public void accept( final Visitor v ) {
 98         v.visitSynthetic(this);
 99     }
100 
101 
102     /**
103      * Dump source file attribute to file stream in binary format.
104      *
105      * @param file Output file stream
106      * @throws IOException
107      */
108     @Override
<span class="line-modified">109     public void dump( final DataOutputStream file ) throws IOException {</span>
110         super.dump(file);
111         if (super.getLength() &gt; 0) {
112             file.write(bytes, 0, super.getLength());
113         }
114     }
115 
116 
117     /**
118      * @return data bytes.
119      */
<span class="line-modified">120     public byte[] getBytes() {</span>
121         return bytes;
122     }
123 
124 
125     /**
126      * @param bytes
127      */
<span class="line-modified">128     public void setBytes( final byte[] bytes ) {</span>
129         this.bytes = bytes;
130     }
131 
132 
133     /**
134      * @return String representation.
135      */
136     @Override
<span class="line-modified">137     public String toString() {</span>
138         final StringBuilder buf = new StringBuilder(&quot;Synthetic&quot;);
139         if (super.getLength() &gt; 0) {
140             buf.append(&quot; &quot;).append(Utility.toHexString(bytes));
141         }
142         return buf.toString();
143     }
144 
145 
146     /**
147      * @return deep copy of this attribute
148      */
149     @Override
150     public Attribute copy( final ConstantPool _constant_pool ) {
151         final Synthetic c = (Synthetic) clone();
152         if (bytes != null) {
153             c.bytes = new byte[bytes.length];
154             System.arraycopy(bytes, 0, c.bytes, 0, bytes.length);
155         }
156         c.setConstantPool(_constant_pool);
157         return c;
</pre>
</td>
</tr>
</table>
<center><a href="StackMapType.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Unknown.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>