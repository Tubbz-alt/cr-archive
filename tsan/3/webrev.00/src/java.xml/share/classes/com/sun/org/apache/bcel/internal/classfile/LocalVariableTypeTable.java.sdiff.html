<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/LocalVariableTypeTable.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="LocalVariableTable.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Method.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/LocalVariableTypeTable.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  6  * Licensed to the Apache Software Foundation (ASF) under one or more
  7  * contributor license agreements.  See the NOTICE file distributed with
  8  * this work for additional information regarding copyright ownership.
  9  * The ASF licenses this file to You under the Apache License, Version 2.0
 10  * (the &quot;License&quot;); you may not use this file except in compliance with
 11  * the License.  You may obtain a copy of the License at
 12  *
 13  *      http://www.apache.org/licenses/LICENSE-2.0
 14  *
 15  * Unless required by applicable law or agreed to in writing, software
 16  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 17  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 package com.sun.org.apache.bcel.internal.classfile;
 22 
 23 import java.io.DataInput;
 24 import java.io.DataOutputStream;
 25 import java.io.IOException;

 26 import com.sun.org.apache.bcel.internal.Const;
 27 
 28 // The new table is used when generic types are about...

 29 //LocalVariableTable_attribute {
 30 //       u2 attribute_name_index;
 31 //       u4 attribute_length;
 32 //       u2 local_variable_table_length;
 33 //       {  u2 start_pc;
 34 //          u2 length;
 35 //          u2 name_index;
 36 //          u2 descriptor_index;
 37 //          u2 index;
 38 //       } local_variable_table[local_variable_table_length];
 39 //     }

 40 //LocalVariableTypeTable_attribute {
 41 //    u2 attribute_name_index;
 42 //    u4 attribute_length;
 43 //    u2 local_variable_type_table_length;
 44 //    {
 45 //      u2 start_pc;
 46 //      u2 length;
 47 //      u2 name_index;
 48 //      u2 signature_index;
 49 //      u2 index;
 50 //    } local_variable_type_table[local_variable_type_table_length];
 51 //  }
 52 // J5TODO: Needs some testing !

 53 /**
 54  * @since 6.0
 55  */
 56 public class LocalVariableTypeTable extends Attribute {
 57 
 58     private LocalVariable[] local_variable_type_table;        // variables
 59 
 60     public LocalVariableTypeTable(final LocalVariableTypeTable c) {
 61         this(c.getNameIndex(), c.getLength(), c.getLocalVariableTypeTable(), c.getConstantPool());
 62     }
 63 
<span class="line-modified"> 64     public LocalVariableTypeTable(final int name_index, final int length,</span>
<span class="line-removed"> 65             final LocalVariable[] local_variable_table, final ConstantPool constant_pool) {</span>
 66         super(Const.ATTR_LOCAL_VARIABLE_TYPE_TABLE, name_index, length, constant_pool);
 67         this.local_variable_type_table = local_variable_table;
 68     }
 69 
<span class="line-modified"> 70     LocalVariableTypeTable(final int nameIdx, final int len, final DataInput input,</span>
<span class="line-removed"> 71             final ConstantPool cpool) throws IOException {</span>
 72         this(nameIdx, len, (LocalVariable[]) null, cpool);
 73 
 74         final int local_variable_type_table_length = input.readUnsignedShort();
 75         local_variable_type_table = new LocalVariable[local_variable_type_table_length];
 76 
 77         for (int i = 0; i &lt; local_variable_type_table_length; i++) {
 78             local_variable_type_table[i] = new LocalVariable(input, cpool);
 79         }
 80     }
 81 
 82     @Override
 83     public void accept(final Visitor v) {
 84         v.visitLocalVariableTypeTable(this);
 85     }
 86 
 87     @Override
 88     public final void dump(final DataOutputStream file) throws IOException {
 89         super.dump(file);
 90         file.writeShort(local_variable_type_table.length);
 91         for (final LocalVariable variable : local_variable_type_table) {
</pre>
</td>
<td>
<hr />
<pre>
  6  * Licensed to the Apache Software Foundation (ASF) under one or more
  7  * contributor license agreements.  See the NOTICE file distributed with
  8  * this work for additional information regarding copyright ownership.
  9  * The ASF licenses this file to You under the Apache License, Version 2.0
 10  * (the &quot;License&quot;); you may not use this file except in compliance with
 11  * the License.  You may obtain a copy of the License at
 12  *
 13  *      http://www.apache.org/licenses/LICENSE-2.0
 14  *
 15  * Unless required by applicable law or agreed to in writing, software
 16  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 17  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 package com.sun.org.apache.bcel.internal.classfile;
 22 
 23 import java.io.DataInput;
 24 import java.io.DataOutputStream;
 25 import java.io.IOException;
<span class="line-added"> 26 </span>
 27 import com.sun.org.apache.bcel.internal.Const;
 28 
 29 // The new table is used when generic types are about...
<span class="line-added"> 30 </span>
 31 //LocalVariableTable_attribute {
 32 //       u2 attribute_name_index;
 33 //       u4 attribute_length;
 34 //       u2 local_variable_table_length;
 35 //       {  u2 start_pc;
 36 //          u2 length;
 37 //          u2 name_index;
 38 //          u2 descriptor_index;
 39 //          u2 index;
 40 //       } local_variable_table[local_variable_table_length];
 41 //     }
<span class="line-added"> 42 </span>
 43 //LocalVariableTypeTable_attribute {
 44 //    u2 attribute_name_index;
 45 //    u4 attribute_length;
 46 //    u2 local_variable_type_table_length;
 47 //    {
 48 //      u2 start_pc;
 49 //      u2 length;
 50 //      u2 name_index;
 51 //      u2 signature_index;
 52 //      u2 index;
 53 //    } local_variable_type_table[local_variable_type_table_length];
 54 //  }
 55 // J5TODO: Needs some testing !
<span class="line-added"> 56 </span>
 57 /**
 58  * @since 6.0
 59  */
 60 public class LocalVariableTypeTable extends Attribute {
 61 
 62     private LocalVariable[] local_variable_type_table;        // variables
 63 
 64     public LocalVariableTypeTable(final LocalVariableTypeTable c) {
 65         this(c.getNameIndex(), c.getLength(), c.getLocalVariableTypeTable(), c.getConstantPool());
 66     }
 67 
<span class="line-modified"> 68     public LocalVariableTypeTable(final int name_index, final int length, final LocalVariable[] local_variable_table, final ConstantPool constant_pool) {</span>

 69         super(Const.ATTR_LOCAL_VARIABLE_TYPE_TABLE, name_index, length, constant_pool);
 70         this.local_variable_type_table = local_variable_table;
 71     }
 72 
<span class="line-modified"> 73     LocalVariableTypeTable(final int nameIdx, final int len, final DataInput input, final ConstantPool cpool) throws IOException {</span>

 74         this(nameIdx, len, (LocalVariable[]) null, cpool);
 75 
 76         final int local_variable_type_table_length = input.readUnsignedShort();
 77         local_variable_type_table = new LocalVariable[local_variable_type_table_length];
 78 
 79         for (int i = 0; i &lt; local_variable_type_table_length; i++) {
 80             local_variable_type_table[i] = new LocalVariable(input, cpool);
 81         }
 82     }
 83 
 84     @Override
 85     public void accept(final Visitor v) {
 86         v.visitLocalVariableTypeTable(this);
 87     }
 88 
 89     @Override
 90     public final void dump(final DataOutputStream file) throws IOException {
 91         super.dump(file);
 92         file.writeShort(local_variable_type_table.length);
 93         for (final LocalVariable variable : local_variable_type_table) {
</pre>
</td>
</tr>
</table>
<center><a href="LocalVariableTable.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Method.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>