<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.xml/share/classes/com/sun/org/apache/xerces/internal/impl/xs/XMLSchemaValidator.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="SubstitutionGroupHandler.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="identity/XPathMatcher.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/xerces/internal/impl/xs/XMLSchemaValidator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2006, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2006, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
   * Licensed to the Apache Software Foundation (ASF) under one or more
   * contributor license agreements.  See the NOTICE file distributed with
   * this work for additional information regarding copyright ownership.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -109,11 +109,11 @@</span>
   *
   * @author Sandy Gao IBM
   * @author Elena Litani IBM
   * @author Andy Clark IBM
   * @author Neeraj Bajaj, Sun Microsystems, inc.
<span class="udiff-line-modified-removed">-  * @LastModified: Nov 2017</span>
<span class="udiff-line-modified-added">+  * @LastModified: Apr 2019</span>
   */
  public class XMLSchemaValidator
      implements XMLComponent, XMLDocumentFilter, FieldActivator, RevalidationHandler, XSElementDeclHelper {
  
      //
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2427,11 +2427,11 @@</span>
                              &amp;&amp; id.getCategory() == IdentityConstraint.IC_KEYREF) {
                          ValueStoreBase values =
                              fValueStoreCache.getValueStoreFor(id, selMatcher.getInitialDepth());
                          // nothing to do if nothing matched, or if not all
                          // fields are present.
<span class="udiff-line-modified-removed">-                         if (values != null &amp;&amp; values.fValuesCount == values.fFieldCount)</span>
<span class="udiff-line-modified-added">+                         if (values != null &amp;&amp; values.fHasValue)</span>
                              values.endDocumentFragment();
                      }
                  }
              }
              fValueStoreCache.endElement();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3716,10 +3716,11 @@</span>
          protected short[] fLocalValueTypes = null;
          protected ShortList[] fLocalItemValueTypes = null;
  
          /** Current data value count. */
          protected int fValuesCount;
<span class="udiff-line-added">+         protected boolean fHasValue = false;</span>
  
          /** global data */
          public final Vector&lt;Object&gt; fValues = new Vector&lt;&gt;();
          public ShortVector fValueTypes = null;
          public Vector&lt;ShortList&gt; fItemValueTypes = null;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3883,10 +3884,11 @@</span>
                  String cName = fIdentityConstraint.getIdentityConstraintName();
                  reportSchemaError(code, new Object[] { field.toString(), cName });
              }
              else {
                  fValuesCount++;
<span class="udiff-line-added">+                 fHasValue = true;</span>
              }
              fLocalValues[i] = actualValue;
              fLocalValueTypes[i] = valueType;
              fLocalItemValueTypes[i] = itemValueType;
              if (fValuesCount == fFieldCount) {
</pre>
<center><a href="SubstitutionGroupHandler.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="identity/XPathMatcher.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>