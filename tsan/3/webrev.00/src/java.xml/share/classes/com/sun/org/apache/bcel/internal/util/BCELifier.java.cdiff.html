<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/util/BCELifier.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BCELFactory.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ByteSequence.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/util/BCELifier.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 44,11 ***</span>
   * Java program that creates that very class using BCEL. This
   * gives new users of BCEL a useful example showing how things
   * are done with BCEL. It does not cover all features of BCEL,
   * but tries to mimic hand-written code as close as possible.
   *
<span class="line-removed">-  * @version $Id: BCELifier.java 1750228 2016-06-25 21:47:44Z ggregory $</span>
   */
  public class BCELifier extends com.sun.org.apache.bcel.internal.classfile.EmptyVisitor {
  
      /**
       * Enum corresponding to flag source.
<span class="line-new-header">--- 44,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 111,10 ***</span>
<span class="line-new-header">--- 110,12 ---</span>
          _out.println(&quot;    _cg = new ClassGen(\&quot;&quot;
                  + ((&quot;&quot;.equals(package_name)) ? class_name : package_name + &quot;.&quot; + class_name)
                  + &quot;\&quot;, \&quot;&quot; + super_name + &quot;\&quot;, &quot; + &quot;\&quot;&quot; + clazz.getSourceFileName() + &quot;\&quot;, &quot;
                  + printFlags(clazz.getAccessFlags(), FLAGS.CLASS) + &quot;, &quot;
                  + &quot;new String[] { &quot; + inter + &quot; });&quot;);
<span class="line-added">+         _out.println(&quot;    _cg.setMajor(&quot; + clazz.getMajor() +&quot;);&quot;);</span>
<span class="line-added">+         _out.println(&quot;    _cg.setMinor(&quot; + clazz.getMinor() +&quot;);&quot;);</span>
          _out.println();
          _out.println(&quot;    _cp = _cg.getConstantPool();&quot;);
          _out.println(&quot;    _factory = new InstructionFactory(_cg, _cp);&quot;);
          _out.println(&quot;  }&quot;);
          _out.println();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 214,11 ***</span>
      public static String printFlags( final int flags, final FLAGS location ) {
          if (flags == 0) {
              return &quot;0&quot;;
          }
          final StringBuilder buf = new StringBuilder();
<span class="line-modified">!         for (int i = 0, pow = 1; pow &lt;= Const.MAX_ACC_FLAG; i++) {</span>
              if ((flags &amp; pow) != 0) {
                  if ((pow == Const.ACC_SYNCHRONIZED) &amp;&amp; (location == FLAGS.CLASS)) {
                      buf.append(CONSTANT_PREFIX+&quot;ACC_SUPER | &quot;);
                  } else if ((pow == Const.ACC_VOLATILE) &amp;&amp; (location == FLAGS.METHOD)) {
                      buf.append(CONSTANT_PREFIX+&quot;ACC_BRIDGE | &quot;);
<span class="line-new-header">--- 215,11 ---</span>
      public static String printFlags( final int flags, final FLAGS location ) {
          if (flags == 0) {
              return &quot;0&quot;;
          }
          final StringBuilder buf = new StringBuilder();
<span class="line-modified">!         for (int i = 0, pow = 1; pow &lt;= Const.MAX_ACC_FLAG_I; i++) {</span>
              if ((flags &amp; pow) != 0) {
                  if ((pow == Const.ACC_SYNCHRONIZED) &amp;&amp; (location == FLAGS.CLASS)) {
                      buf.append(CONSTANT_PREFIX+&quot;ACC_SUPER | &quot;);
                  } else if ((pow == Const.ACC_VOLATILE) &amp;&amp; (location == FLAGS.METHOD)) {
                      buf.append(CONSTANT_PREFIX+&quot;ACC_BRIDGE | &quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 282,11 ***</span>
      }
  
  
      /** Default main method
       */
<span class="line-modified">!     public static void _main( final String[] argv ) throws Exception {</span>
          if (argv.length != 1) {
              System.out.println(&quot;Usage: BCELifier classname&quot;);
              System.out.println(&quot;\tThe class must exist on the classpath&quot;);
              return;
          }
<span class="line-new-header">--- 283,11 ---</span>
      }
  
  
      /** Default main method
       */
<span class="line-modified">!     public static void main( final String[] argv ) throws Exception {</span>
          if (argv.length != 1) {
              System.out.println(&quot;Usage: BCELifier classname&quot;);
              System.out.println(&quot;\tThe class must exist on the classpath&quot;);
              return;
          }
</pre>
<center><a href="BCELFactory.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ByteSequence.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>