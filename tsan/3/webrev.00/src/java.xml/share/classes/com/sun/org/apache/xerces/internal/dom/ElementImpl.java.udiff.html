<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.xml/share/classes/com/sun/org/apache/xerces/internal/dom/ElementImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DocumentTypeImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ElementNSImpl.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/xerces/internal/dom/ElementImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,8 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * reserved comment block</span>
<span class="udiff-line-removed">-  * DO NOT REMOVE OR ALTER!</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   */
  /*
   * Licensed to the Apache Software Foundation (ASF) under one or more
   * contributor license agreements.  See the NOTICE file distributed with
   * this work for additional information regarding copyright ownership.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -53,51 +52,45 @@</span>
   * @author Arnaud Le Hors, IBM
   * @author Joe Kesselman, IBM
   * @author Andy Clark, IBM
   * @author Ralf Pfeiffer, IBM
   * @since PR-DOM-Level-1-19980818.
<span class="udiff-line-added">+  * @LastModified: Apr 2019</span>
   */
  public class ElementImpl
<span class="udiff-line-modified-removed">-         extends ParentNode</span>
<span class="udiff-line-modified-removed">-         implements Element, ElementTraversal, TypeInfo {</span>
<span class="udiff-line-modified-added">+     extends ParentNode</span>
<span class="udiff-line-modified-added">+     implements Element, ElementTraversal, TypeInfo {</span>
  
      //
      // Constants
      //
<span class="udiff-line-modified-removed">-     /**</span>
<span class="udiff-line-modified-removed">-      * Serialization version.</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     /** Serialization version. */</span>
      static final long serialVersionUID = 3717253516652722278L;
      //
      // Data
      //
  
<span class="udiff-line-modified-removed">-     /**</span>
<span class="udiff-line-removed">-      * Element name.</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-modified-added">+     /** Element name. */</span>
      protected String name;
  
<span class="udiff-line-modified-removed">-     /**</span>
<span class="udiff-line-removed">-      * Attributes.</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-modified-added">+     /** Attributes. */</span>
      protected AttributeMap attributes;
  
      //
      // Constructors
      //
<span class="udiff-line-modified-removed">-     /**</span>
<span class="udiff-line-modified-removed">-      * Factory constructor.</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     /** Factory constructor. */</span>
      public ElementImpl(CoreDocumentImpl ownerDoc, String name) {
          super(ownerDoc);
          this.name = name;
          needsSyncData(true);    // synchronizeData will initialize attributes
      }
  
      // for ElementNSImpl
<span class="udiff-line-modified-removed">-     protected ElementImpl() {</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-modified-added">+     protected ElementImpl() {}</span>
  
      // Support for DOM Level 3 renameNode method.
      // Note: This only deals with part of the pb. CoreDocumentImpl
      // does all the work.
      void rename(String name) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -107,13 +100,13 @@</span>
          if (ownerDocument.errorChecking) {
              int colon1 = name.indexOf(&#39;:&#39;);
              if (colon1 != -1) {
                  String msg
                          = DOMMessageFormatter.formatMessage(
<span class="udiff-line-modified-removed">-                                 DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-modified-removed">-                                 &quot;NAMESPACE_ERR&quot;,</span>
<span class="udiff-line-modified-removed">-                                 null);</span>
<span class="udiff-line-modified-added">+                             DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-modified-added">+                             &quot;NAMESPACE_ERR&quot;,</span>
<span class="udiff-line-modified-added">+                             null);</span>
                  throw new DOMException(DOMException.NAMESPACE_ERR, msg);
              }
              if (!CoreDocumentImpl.isXMLName(name, ownerDocument.isXML11Version())) {
                  String msg = DOMMessageFormatter.formatMessage(
                          DOMMessageFormatter.DOM_DOMAIN,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -285,11 +278,11 @@</span>
              synchronizeData();
          }
          if (attributes == null) {
              return &quot;&quot;;
          }
<span class="udiff-line-modified-removed">-         Attr attr = (Attr) (attributes.getNamedItem(name));</span>
<span class="udiff-line-modified-added">+         Attr attr = (Attr)(attributes.getNamedItem(name));</span>
          return (attr == null) ? &quot;&quot; : attr.getValue();
  
      } // getAttribute(String):String
  
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -305,11 +298,11 @@</span>
              synchronizeData();
          }
          if (attributes == null) {
              return null;
          }
<span class="udiff-line-modified-removed">-         return (Attr) attributes.getNamedItem(name);</span>
<span class="udiff-line-modified-added">+         return (Attr)attributes.getNamedItem(name);</span>
  
      } // getAttributeNode(String):Attr
  
      /**
       * Returns a NodeList of all descendent nodes (children, grandchildren, and
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -451,11 +444,11 @@</span>
       * this Element.
       * @throws DOMException(NO_MODIFICATION_ALLOWED_ERR) if the node is
       * readonly.
       */
      public Attr removeAttributeNode(Attr oldAttr)
<span class="udiff-line-modified-removed">-             throws DOMException {</span>
<span class="udiff-line-modified-added">+         throws DOMException {</span>
  
          if (ownerDocument.errorChecking &amp;&amp; isReadOnly()) {
              String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);
              throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR, msg);
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -489,40 +482,39 @@</span>
       * (Attribute factory will do that test for us.)
       *
       * @throws DOMException(NO_MODIFICATION_ALLOWED_ERR) if the node is
       * readonly.
       */
<span class="udiff-line-modified-removed">-     public void setAttribute(String name, String value) {</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         if (ownerDocument.errorChecking &amp;&amp; isReadOnly()) {</span>
<span class="udiff-line-modified-removed">-             String msg</span>
<span class="udiff-line-modified-removed">-                     = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-removed">-                             DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-modified-removed">-                             &quot;NO_MODIFICATION_ALLOWED_ERR&quot;,</span>
<span class="udiff-line-modified-removed">-                             null);</span>
<span class="udiff-line-modified-removed">-             throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR, msg);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-modified-added">+         public void setAttribute(String name, String value) {</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+                 if (ownerDocument.errorChecking &amp;&amp; isReadOnly()) {</span>
<span class="udiff-line-modified-added">+                     String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-added">+                                         DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-modified-added">+                                         &quot;NO_MODIFICATION_ALLOWED_ERR&quot;,</span>
<span class="udiff-line-modified-added">+                                         null);</span>
<span class="udiff-line-modified-added">+                     throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR, msg);</span>
<span class="udiff-line-modified-added">+                 }</span>
  
<span class="udiff-line-modified-removed">-         if (needsSyncData()) {</span>
<span class="udiff-line-modified-removed">-             synchronizeData();</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-added">+                 if (needsSyncData()) {</span>
<span class="udiff-line-modified-added">+                         synchronizeData();</span>
<span class="udiff-line-modified-added">+                 }</span>
  
<span class="udiff-line-modified-removed">-         Attr newAttr = getAttributeNode(name);</span>
<span class="udiff-line-modified-removed">-         if (newAttr == null) {</span>
<span class="udiff-line-modified-removed">-             newAttr = getOwnerDocument().createAttribute(name);</span>
<span class="udiff-line-modified-added">+                 Attr newAttr = getAttributeNode(name);</span>
<span class="udiff-line-modified-added">+                 if (newAttr == null) {</span>
<span class="udiff-line-modified-added">+                         newAttr = getOwnerDocument().createAttribute(name);</span>
  
<span class="udiff-line-modified-removed">-             if (attributes == null) {</span>
<span class="udiff-line-modified-removed">-                 attributes = new AttributeMap(this, null);</span>
<span class="udiff-line-modified-removed">-             }</span>
<span class="udiff-line-modified-added">+                         if (attributes == null) {</span>
<span class="udiff-line-modified-added">+                                 attributes = new AttributeMap(this, null);</span>
<span class="udiff-line-modified-added">+                         }</span>
  
<span class="udiff-line-modified-removed">-             newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-removed">-             attributes.setNamedItem(newAttr);</span>
<span class="udiff-line-modified-removed">-         } else {</span>
<span class="udiff-line-modified-removed">-             newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-added">+                         newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-added">+                         attributes.setNamedItem(newAttr);</span>
<span class="udiff-line-modified-added">+                 } else {</span>
<span class="udiff-line-modified-added">+                         newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-added">+                 }</span>
  
<span class="udiff-line-modified-removed">-     } // setAttribute(String,String)</span>
<span class="udiff-line-modified-added">+         } // setAttribute(String,String)</span>
  
      /**
       * Add a new attribute/value pair, or replace the value of the existing
       * attribute with that name.
       * &lt;P&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -544,17 +536,17 @@</span>
  
          if (ownerDocument.errorChecking) {
              if (isReadOnly()) {
                  String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);
                  throw new DOMException(
<span class="udiff-line-modified-removed">-                         DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-removed">-                         msg);</span>
<span class="udiff-line-modified-added">+                                      DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-added">+                                      msg);</span>
              }
  
              if (newAttr.getOwnerDocument() != ownerDocument) {
                  String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;WRONG_DOCUMENT_ERR&quot;, null);
<span class="udiff-line-modified-removed">-                 throw new DOMException(DOMException.WRONG_DOCUMENT_ERR, msg);</span>
<span class="udiff-line-modified-added">+                     throw new DOMException(DOMException.WRONG_DOCUMENT_ERR, msg);</span>
              }
          }
  
          if (attributes == null) {
              attributes = new AttributeMap(this, null);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -587,11 +579,11 @@</span>
  
          if (attributes == null) {
              return &quot;&quot;;
          }
  
<span class="udiff-line-modified-removed">-         Attr attr = (Attr) (attributes.getNamedItemNS(namespaceURI, localName));</span>
<span class="udiff-line-modified-added">+         Attr attr = (Attr)(attributes.getNamedItemNS(namespaceURI, localName));</span>
          return (attr == null) ? &quot;&quot; : attr.getValue();
  
      } // getAttributeNS(String,String):String
  
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -631,45 +623,42 @@</span>
       * string, or if if the qualifiedName has a prefix different from &quot;xml&quot; and
       * &quot;xmlns&quot; and the namespaceURI is null or an empty string.
       * @since WD-DOM-Level-2-19990923
       */
      public void setAttributeNS(String namespaceURI, String qualifiedName,
<span class="udiff-line-modified-removed">-             String value) {</span>
<span class="udiff-line-modified-removed">-         if (ownerDocument.errorChecking &amp;&amp; isReadOnly()) {</span>
<span class="udiff-line-modified-removed">-             String msg</span>
<span class="udiff-line-modified-removed">-                     = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-removed">-                             DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-modified-removed">-                             &quot;NO_MODIFICATION_ALLOWED_ERR&quot;,</span>
<span class="udiff-line-modified-removed">-                             null);</span>
<span class="udiff-line-modified-removed">-             throw new DOMException(</span>
<span class="udiff-line-modified-removed">-                     DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-removed">-                     msg);</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-         if (needsSyncData()) {</span>
<span class="udiff-line-modified-removed">-             synchronizeData();</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-         int index = qualifiedName.indexOf(&#39;:&#39;);</span>
<span class="udiff-line-modified-removed">-         String prefix, localName;</span>
<span class="udiff-line-modified-removed">-         if (index &lt; 0) {</span>
<span class="udiff-line-modified-removed">-             prefix = null;</span>
<span class="udiff-line-modified-removed">-             localName = qualifiedName;</span>
<span class="udiff-line-modified-removed">-         } else {</span>
<span class="udiff-line-modified-removed">-             prefix = qualifiedName.substring(0, index);</span>
<span class="udiff-line-modified-removed">-             localName = qualifiedName.substring(index + 1);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-         Attr newAttr = getAttributeNodeNS(namespaceURI, localName);</span>
<span class="udiff-line-removed">-         if (newAttr == null) {</span>
<span class="udiff-line-modified-added">+                                           String value) {</span>
<span class="udiff-line-modified-added">+                 if (ownerDocument.errorChecking &amp;&amp; isReadOnly()) {</span>
<span class="udiff-line-modified-added">+                     String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-added">+                                         DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-modified-added">+                                         &quot;NO_MODIFICATION_ALLOWED_ERR&quot;,</span>
<span class="udiff-line-modified-added">+                                         null);</span>
<span class="udiff-line-modified-added">+                     throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR, msg);</span>
<span class="udiff-line-modified-added">+                 }</span>
<span class="udiff-line-modified-added">+                 if (needsSyncData()) {</span>
<span class="udiff-line-modified-added">+                         synchronizeData();</span>
<span class="udiff-line-modified-added">+                 }</span>
<span class="udiff-line-modified-added">+                 int index = qualifiedName.indexOf(&#39;:&#39;);</span>
<span class="udiff-line-modified-added">+                 String prefix, localName;</span>
<span class="udiff-line-modified-added">+                 if (index &lt; 0) {</span>
<span class="udiff-line-modified-added">+                         prefix = null;</span>
<span class="udiff-line-modified-added">+                         localName = qualifiedName;</span>
<span class="udiff-line-modified-added">+                 } else {</span>
<span class="udiff-line-modified-added">+                         prefix = qualifiedName.substring(0, index);</span>
<span class="udiff-line-modified-added">+                         localName = qualifiedName.substring(index + 1);</span>
<span class="udiff-line-modified-added">+                 }</span>
<span class="udiff-line-modified-added">+                 Attr newAttr = getAttributeNodeNS(namespaceURI, localName);</span>
<span class="udiff-line-modified-added">+                 if (newAttr == null) {</span>
              // REVISIT: this is not efficient, we are creating twice the same
              //          strings for prefix and localName.
<span class="udiff-line-modified-removed">-             newAttr = getOwnerDocument().createAttributeNS(</span>
<span class="udiff-line-modified-removed">-                     namespaceURI,</span>
<span class="udiff-line-modified-removed">-                     qualifiedName);</span>
<span class="udiff-line-modified-removed">-             if (attributes == null) {</span>
<span class="udiff-line-modified-removed">-                 attributes = new AttributeMap(this, null);</span>
<span class="udiff-line-modified-removed">-             }</span>
<span class="udiff-line-modified-removed">-             newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-removed">-             attributes.setNamedItemNS(newAttr);</span>
<span class="udiff-line-modified-added">+                         newAttr = getOwnerDocument().createAttributeNS(</span>
<span class="udiff-line-modified-added">+                                         namespaceURI,</span>
<span class="udiff-line-modified-added">+                                         qualifiedName);</span>
<span class="udiff-line-modified-added">+                         if (attributes == null) {</span>
<span class="udiff-line-modified-added">+                                 attributes = new AttributeMap(this, null);</span>
<span class="udiff-line-modified-added">+                         }</span>
<span class="udiff-line-modified-added">+                         newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-added">+                         attributes.setNamedItemNS(newAttr);</span>
                  }
                  else {
              if (newAttr instanceof AttrNSImpl){
                  String origNodeName = ((AttrNSImpl) newAttr).name;
                  String newName = (prefix!=null) ? (prefix+&quot;:&quot;+localName) : localName;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -691,16 +680,16 @@</span>
                  //      elem.setAttribute(&quot;name&quot;, &quot;value&quot;);
                  //      elem.setAttributeNS(null, &quot;name&quot;, &quot;value&quot;);
                  // This case is not defined by the DOM spec, we choose
                  // to create a new attribute in this case and remove an old one from the tree
                  // note this might cause events to be propagated or user data to be lost
<span class="udiff-line-modified-removed">-                 newAttr = new AttrNSImpl((CoreDocumentImpl)getOwnerDocument(), namespaceURI, qualifiedName, localName);</span>
<span class="udiff-line-modified-added">+                 newAttr = ((CoreDocumentImpl)getOwnerDocument()).createAttributeNS(namespaceURI, qualifiedName, localName);</span>
                  attributes.setNamedItemNS(newAttr);
              }
  
<span class="udiff-line-modified-removed">-             newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-added">+                         newAttr.setNodeValue(value);</span>
<span class="udiff-line-modified-added">+                 }</span>
  
      } // setAttributeNS(String,String,String)
  
      /**
       * Introduced in DOM Level 2.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -751,11 +740,11 @@</span>
              synchronizeData();
          }
          if (attributes == null) {
              return null;
          }
<span class="udiff-line-modified-removed">-         return (Attr) attributes.getNamedItemNS(namespaceURI, localName);</span>
<span class="udiff-line-modified-added">+         return (Attr)attributes.getNamedItemNS(namespaceURI, localName);</span>
  
      } // getAttributeNodeNS(String,String):Attr
  
      /**
       * Introduced in DOM Level 2.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -786,13 +775,13 @@</span>
              synchronizeData();
          }
          if (ownerDocument.errorChecking) {
              if (isReadOnly()) {
                  String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);
<span class="udiff-line-modified-removed">-                 throw new DOMException(</span>
<span class="udiff-line-modified-removed">-                         DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-removed">-                         msg);</span>
<span class="udiff-line-modified-added">+                     throw new DOMException(</span>
<span class="udiff-line-modified-added">+                                      DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-added">+                                      msg);</span>
              }
              if (newAttr.getOwnerDocument() != ownerDocument) {
                  String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;WRONG_DOCUMENT_ERR&quot;, null);
                  throw new DOMException(DOMException.WRONG_DOCUMENT_ERR, msg);
              }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -805,12 +794,12 @@</span>
          return (Attr) attributes.setNamedItemNS(newAttr);
  
      } // setAttributeNodeNS(Attr):Attr
  
      /**
<span class="udiff-line-modified-removed">-      * NON-DOM: sets attribute node for this element</span>
<span class="udiff-line-modified-removed">-      */</span>
<span class="udiff-line-modified-added">+       * NON-DOM: sets attribute node for this element</span>
<span class="udiff-line-modified-added">+       */</span>
      protected int setXercesAttributeNode(Attr attr) {
  
          if (needsSyncData()) {
              synchronizeData();
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -821,12 +810,12 @@</span>
          return attributes.addItem(attr);
  
      }
  
      /**
<span class="udiff-line-modified-removed">-      * NON-DOM: get inded of an attribute</span>
<span class="udiff-line-modified-removed">-      */</span>
<span class="udiff-line-modified-added">+       * NON-DOM: get inded of an attribute</span>
<span class="udiff-line-modified-added">+       */</span>
      protected int getXercesAttribute(String namespaceURI, String localName) {
  
          if (needsSyncData()) {
              synchronizeData();
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -877,11 +866,11 @@</span>
       * @return NodeList A new NodeList object containing all the matched
       * Elements.
       * @since WD-DOM-Level-2-19990923
       */
      public NodeList getElementsByTagNameNS(String namespaceURI,
<span class="udiff-line-modified-removed">-             String localName) {</span>
<span class="udiff-line-modified-added">+                                            String localName) {</span>
          return new DeepNodeListImpl(this, namespaceURI, localName);
      }
  
      /**
       * DOM Level 3 WD- Experimental. Override inherited behavior from NodeImpl
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -909,11 +898,11 @@</span>
                      if (n2 == null || !((NodeImpl) n1).isEqualNode(n2)) {
                          return false;
                      }
                  } else {
                      Node n2 = map2.getNamedItemNS(n1.getNamespaceURI(),
<span class="udiff-line-modified-removed">-                             n1.getLocalName());</span>
<span class="udiff-line-modified-added">+                                                   n1.getLocalName());</span>
                      if (n2 == null || !((NodeImpl) n1).isEqualNode(n2)) {
                          return false;
                      }
                  }
              }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -928,18 +917,19 @@</span>
          if (needsSyncData()) {
              synchronizeData();
          }
          if (ownerDocument.errorChecking) {
              if (isReadOnly()) {
<span class="udiff-line-modified-removed">-                 String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);</span>
<span class="udiff-line-modified-added">+                 String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-added">+                         DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);</span>
                  throw new DOMException(
<span class="udiff-line-modified-removed">-                         DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-removed">-                         msg);</span>
<span class="udiff-line-modified-added">+                         DOMException.NO_MODIFICATION_ALLOWED_ERR, msg);</span>
              }
  
              if (at.getOwnerElement() != this) {
<span class="udiff-line-modified-removed">-                 String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);</span>
<span class="udiff-line-modified-added">+                 String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-added">+                         DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);</span>
                  throw new DOMException(DOMException.NOT_FOUND_ERR, msg);
              }
          }
          ((AttrImpl) at).isIdAttribute(makeId);
          if (!makeId) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -957,26 +947,25 @@</span>
              synchronizeData();
          }
          Attr at = getAttributeNode(name);
  
          if (at == null) {
<span class="udiff-line-modified-removed">-             String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-removed">-                     DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-removed">-                     &quot;NOT_FOUND_ERR&quot;, null);</span>
<span class="udiff-line-modified-added">+                 String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-added">+                         DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);</span>
              throw new DOMException(DOMException.NOT_FOUND_ERR, msg);
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-added">+                 }</span>
  
          if (ownerDocument.errorChecking) {
              if (isReadOnly()) {
<span class="udiff-line-modified-removed">-                 String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);</span>
<span class="udiff-line-modified-removed">-                 throw new DOMException(</span>
<span class="udiff-line-modified-removed">-                         DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-removed">-                         msg);</span>
<span class="udiff-line-modified-added">+                 String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-added">+                         DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);</span>
<span class="udiff-line-modified-added">+                 throw new DOMException(DOMException.NO_MODIFICATION_ALLOWED_ERR, msg);</span>
              }
  
              if (at.getOwnerElement() != this) {
<span class="udiff-line-modified-removed">-                 String msg = DOMMessageFormatter.formatMessage(DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);</span>
<span class="udiff-line-modified-added">+                 String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-added">+                         DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);</span>
                  throw new DOMException(DOMException.NOT_FOUND_ERR, msg);
              }
          }
  
          ((AttrImpl) at).isIdAttribute(makeId);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -989,34 +978,33 @@</span>
  
      /**
       * DOM Level 3: register the given attribute node as an ID attribute
       */
      public void setIdAttributeNS(String namespaceURI, String localName,
<span class="udiff-line-modified-removed">-             boolean makeId) {</span>
<span class="udiff-line-modified-added">+                                     boolean makeId) {</span>
          if (needsSyncData()) {
              synchronizeData();
          }
          //if namespace uri is empty string, set it to &#39;null&#39;
          if (namespaceURI != null) {
              namespaceURI = (namespaceURI.length() == 0) ? null : namespaceURI;
          }
          Attr at = getAttributeNodeNS(namespaceURI, localName);
  
          if (at == null) {
<span class="udiff-line-modified-removed">-             String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-removed">-                     DOMMessageFormatter.DOM_DOMAIN,</span>
<span class="udiff-line-removed">-                     &quot;NOT_FOUND_ERR&quot;, null);</span>
<span class="udiff-line-modified-added">+                 String msg = DOMMessageFormatter.formatMessage(</span>
<span class="udiff-line-modified-added">+                         DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);</span>
              throw new DOMException(DOMException.NOT_FOUND_ERR, msg);
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-added">+                 }</span>
  
<span class="udiff-line-modified-removed">-         if (ownerDocument.errorChecking) {</span>
<span class="udiff-line-modified-added">+                 if (ownerDocument.errorChecking) {</span>
              if (isReadOnly()) {
                  String msg = DOMMessageFormatter.formatMessage(
                          DOMMessageFormatter.DOM_DOMAIN, &quot;NO_MODIFICATION_ALLOWED_ERR&quot;, null);
                  throw new DOMException(
<span class="udiff-line-modified-removed">-                         DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-removed">-                         msg);</span>
<span class="udiff-line-modified-added">+                                      DOMException.NO_MODIFICATION_ALLOWED_ERR,</span>
<span class="udiff-line-modified-added">+                                      msg);</span>
              }
  
              if (at.getOwnerElement() != this) {
                  String msg = DOMMessageFormatter.formatMessage(
                          DOMMessageFormatter.DOM_DOMAIN, &quot;NOT_FOUND_ERR&quot;, null);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1027,18 +1015,18 @@</span>
          if (!makeId) {
              ownerDocument.removeIdentifier(at.getValue());
          } else {
              ownerDocument.putIdentifier(at.getValue(), this);
          }
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+    }</span>
  
      /**
       * @see org.w3c.dom.TypeInfo#getTypeName()
       */
<span class="udiff-line-modified-removed">-     public String getTypeName() {</span>
<span class="udiff-line-modified-added">+      public String getTypeName() {</span>
          return null;
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+      }</span>
  
      /**
       * @see org.w3c.dom.TypeInfo#getTypeNamespace()
       */
      public String getTypeNamespace() {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1057,21 +1045,20 @@</span>
       *
       * @return boolean True if the type is derived by restriction for the
       * reference type
       */
      public boolean isDerivedFrom(String typeNamespaceArg,
<span class="udiff-line-modified-removed">-             String typeNameArg,</span>
<span class="udiff-line-modified-removed">-             int derivationMethod) {</span>
<span class="udiff-line-modified-added">+                                  String typeNameArg,</span>
<span class="udiff-line-modified-added">+                                  int derivationMethod) {</span>
  
          return false;
      }
  
<span class="udiff-line-modified-removed">-     /**</span>
<span class="udiff-line-modified-removed">-      * Method getSchemaTypeInfo.</span>
<span class="udiff-line-modified-removed">-      *</span>
<span class="udiff-line-modified-removed">-      * @return TypeInfo</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-modified-added">+         /**</span>
<span class="udiff-line-modified-added">+          * Method getSchemaTypeInfo.</span>
<span class="udiff-line-modified-added">+          * @return TypeInfo</span>
<span class="udiff-line-modified-added">+          */</span>
      public TypeInfo getSchemaTypeInfo() {
          if (needsSyncData()) {
              synchronizeData();
          }
          return this;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1157,12 +1144,11 @@</span>
          DocumentTypeImpl doctype
                  = (DocumentTypeImpl) ownerDocument.getDoctype();
          if (doctype == null) {
              return null;
          }
<span class="udiff-line-modified-removed">-         ElementDefinitionImpl eldef</span>
<span class="udiff-line-removed">-                 = (ElementDefinitionImpl) doctype.getElements()</span>
<span class="udiff-line-modified-added">+         ElementDefinitionImpl eldef = (ElementDefinitionImpl)doctype.getElements()</span>
                  .getNamedItem(getNodeName());
          if (eldef == null) {
              return null;
          }
          return (NamedNodeMapImpl) eldef.getAttributes();
</pre>
<center><a href="DocumentTypeImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ElementNSImpl.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>