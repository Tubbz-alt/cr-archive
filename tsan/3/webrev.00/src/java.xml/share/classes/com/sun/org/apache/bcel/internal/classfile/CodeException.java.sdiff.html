<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/CodeException.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Code.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Constant.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/CodeException.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 
 21 package com.sun.org.apache.bcel.internal.classfile;
 22 
 23 import java.io.DataInput;
 24 import java.io.DataOutputStream;
 25 import java.io.IOException;
 26 
 27 import com.sun.org.apache.bcel.internal.Const;
 28 
 29 /**
 30  * This class represents an entry in the exception table of the &lt;em&gt;Code&lt;/em&gt;
 31  * attribute and is used only there. It contains a range in which a
 32  * particular exception handler is active.
 33  *
<span class="line-removed"> 34  * @version $Id: CodeException.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
 35  * @see     Code

 36  */
 37 public final class CodeException implements Cloneable, Node {
 38 
 39     private int start_pc; // Range in the code the exception handler is
 40     private int end_pc; // active. start_pc is inclusive, end_pc exclusive
 41     private int handler_pc; /* Starting address of exception handler, i.e.,
 42      * an offset from start of code.
 43      */
 44     private int catch_type; /* If this is zero the handler catches any
 45      * exception, otherwise it points to the
 46      * exception class which is to be caught.
 47      */
 48 
 49 
 50     /**
 51      * Initialize from another object.
 52      */
 53     public CodeException(final CodeException c) {
 54         this(c.getStartPC(), c.getEndPC(), c.getHandlerPC(), c.getCatchType());
 55     }
</pre>
<hr />
<pre>
 86 
 87     /**
 88      * Called by objects that are traversing the nodes of the tree implicitely
 89      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 90      * fields, attributes, etc. spawns a tree of objects.
 91      *
 92      * @param v Visitor object
 93      */
 94     @Override
 95     public void accept( final Visitor v ) {
 96         v.visitCodeException(this);
 97     }
 98 
 99 
100     /**
101      * Dump code exception to file stream in binary format.
102      *
103      * @param file Output file stream
104      * @throws IOException
105      */
<span class="line-modified">106     public final void dump( final DataOutputStream file ) throws IOException {</span>
107         file.writeShort(start_pc);
108         file.writeShort(end_pc);
109         file.writeShort(handler_pc);
110         file.writeShort(catch_type);
111     }
112 
113 
114     /**
115      * @return 0, if the handler catches any exception, otherwise it points to
116      * the exception class which is to be caught.
117      */
<span class="line-modified">118     public final int getCatchType() {</span>
119         return catch_type;
120     }
121 
122 
123     /**
124      * @return Exclusive end index of the region where the handler is active.
125      */
<span class="line-modified">126     public final int getEndPC() {</span>
127         return end_pc;
128     }
129 
130 
131     /**
132      * @return Starting address of exception handler, relative to the code.
133      */
<span class="line-modified">134     public final int getHandlerPC() {</span>
135         return handler_pc;
136     }
137 
138 
139     /**
140      * @return Inclusive start index of the region where the handler is active.
141      */
<span class="line-modified">142     public final int getStartPC() {</span>
143         return start_pc;
144     }
145 
146 
147     /**
148      * @param catch_type the type of exception that is caught
149      */
<span class="line-modified">150     public final void setCatchType( final int catch_type ) {</span>
151         this.catch_type = catch_type;
152     }
153 
154 
155     /**
156      * @param end_pc end of handled block
157      */
<span class="line-modified">158     public final void setEndPC( final int end_pc ) {</span>
159         this.end_pc = end_pc;
160     }
161 
162 
163     /**
164      * @param handler_pc where the actual code is
165      */
<span class="line-modified">166     public final void setHandlerPC( final int handler_pc ) { // TODO unused</span>
167         this.handler_pc = handler_pc;
168     }
169 
170 
171     /**
172      * @param start_pc start of handled block
173      */
<span class="line-modified">174     public final void setStartPC( final int start_pc ) { // TODO unused</span>
175         this.start_pc = start_pc;
176     }
177 
178 
179     /**
180      * @return String representation.
181      */
182     @Override
<span class="line-modified">183     public final String toString() {</span>
184         return &quot;CodeException(start_pc = &quot; + start_pc + &quot;, end_pc = &quot; + end_pc + &quot;, handler_pc = &quot;
185                 + handler_pc + &quot;, catch_type = &quot; + catch_type + &quot;)&quot;;
186     }
187 
188 
189     /**
190      * @return String representation.
191      */
<span class="line-modified">192     public final String toString( final ConstantPool cp, final boolean verbose ) {</span>
193         String str;
194         if (catch_type == 0) {
195             str = &quot;&lt;Any exception&gt;(0)&quot;;
196         } else {
197             str = Utility.compactClassName(cp.getConstantString(catch_type, Const.CONSTANT_Class), false)
198                     + (verbose ? &quot;(&quot; + catch_type + &quot;)&quot; : &quot;&quot;);
199         }
200         return start_pc + &quot;\t&quot; + end_pc + &quot;\t&quot; + handler_pc + &quot;\t&quot; + str;
201     }
202 
203 
<span class="line-modified">204     public final String toString( final ConstantPool cp ) {</span>
205         return toString(cp, true);
206     }
207 
208 
209     /**
210      * @return deep copy of this object
211      */
212     public CodeException copy() {
213         try {
214             return (CodeException) clone();
215         } catch (final CloneNotSupportedException e) {
216             // TODO should this throw?
217         }
218         return null;
219     }
220 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 
 21 package com.sun.org.apache.bcel.internal.classfile;
 22 
 23 import java.io.DataInput;
 24 import java.io.DataOutputStream;
 25 import java.io.IOException;
 26 
 27 import com.sun.org.apache.bcel.internal.Const;
 28 
 29 /**
 30  * This class represents an entry in the exception table of the &lt;em&gt;Code&lt;/em&gt;
 31  * attribute and is used only there. It contains a range in which a
 32  * particular exception handler is active.
 33  *

 34  * @see     Code
<span class="line-added"> 35  * @LastModified: Jan 2020</span>
 36  */
 37 public final class CodeException implements Cloneable, Node {
 38 
 39     private int start_pc; // Range in the code the exception handler is
 40     private int end_pc; // active. start_pc is inclusive, end_pc exclusive
 41     private int handler_pc; /* Starting address of exception handler, i.e.,
 42      * an offset from start of code.
 43      */
 44     private int catch_type; /* If this is zero the handler catches any
 45      * exception, otherwise it points to the
 46      * exception class which is to be caught.
 47      */
 48 
 49 
 50     /**
 51      * Initialize from another object.
 52      */
 53     public CodeException(final CodeException c) {
 54         this(c.getStartPC(), c.getEndPC(), c.getHandlerPC(), c.getCatchType());
 55     }
</pre>
<hr />
<pre>
 86 
 87     /**
 88      * Called by objects that are traversing the nodes of the tree implicitely
 89      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 90      * fields, attributes, etc. spawns a tree of objects.
 91      *
 92      * @param v Visitor object
 93      */
 94     @Override
 95     public void accept( final Visitor v ) {
 96         v.visitCodeException(this);
 97     }
 98 
 99 
100     /**
101      * Dump code exception to file stream in binary format.
102      *
103      * @param file Output file stream
104      * @throws IOException
105      */
<span class="line-modified">106     public void dump( final DataOutputStream file ) throws IOException {</span>
107         file.writeShort(start_pc);
108         file.writeShort(end_pc);
109         file.writeShort(handler_pc);
110         file.writeShort(catch_type);
111     }
112 
113 
114     /**
115      * @return 0, if the handler catches any exception, otherwise it points to
116      * the exception class which is to be caught.
117      */
<span class="line-modified">118     public int getCatchType() {</span>
119         return catch_type;
120     }
121 
122 
123     /**
124      * @return Exclusive end index of the region where the handler is active.
125      */
<span class="line-modified">126     public int getEndPC() {</span>
127         return end_pc;
128     }
129 
130 
131     /**
132      * @return Starting address of exception handler, relative to the code.
133      */
<span class="line-modified">134     public int getHandlerPC() {</span>
135         return handler_pc;
136     }
137 
138 
139     /**
140      * @return Inclusive start index of the region where the handler is active.
141      */
<span class="line-modified">142     public int getStartPC() {</span>
143         return start_pc;
144     }
145 
146 
147     /**
148      * @param catch_type the type of exception that is caught
149      */
<span class="line-modified">150     public void setCatchType( final int catch_type ) {</span>
151         this.catch_type = catch_type;
152     }
153 
154 
155     /**
156      * @param end_pc end of handled block
157      */
<span class="line-modified">158     public void setEndPC( final int end_pc ) {</span>
159         this.end_pc = end_pc;
160     }
161 
162 
163     /**
164      * @param handler_pc where the actual code is
165      */
<span class="line-modified">166     public void setHandlerPC( final int handler_pc ) { // TODO unused</span>
167         this.handler_pc = handler_pc;
168     }
169 
170 
171     /**
172      * @param start_pc start of handled block
173      */
<span class="line-modified">174     public void setStartPC( final int start_pc ) { // TODO unused</span>
175         this.start_pc = start_pc;
176     }
177 
178 
179     /**
180      * @return String representation.
181      */
182     @Override
<span class="line-modified">183     public String toString() {</span>
184         return &quot;CodeException(start_pc = &quot; + start_pc + &quot;, end_pc = &quot; + end_pc + &quot;, handler_pc = &quot;
185                 + handler_pc + &quot;, catch_type = &quot; + catch_type + &quot;)&quot;;
186     }
187 
188 
189     /**
190      * @return String representation.
191      */
<span class="line-modified">192     public String toString( final ConstantPool cp, final boolean verbose ) {</span>
193         String str;
194         if (catch_type == 0) {
195             str = &quot;&lt;Any exception&gt;(0)&quot;;
196         } else {
197             str = Utility.compactClassName(cp.getConstantString(catch_type, Const.CONSTANT_Class), false)
198                     + (verbose ? &quot;(&quot; + catch_type + &quot;)&quot; : &quot;&quot;);
199         }
200         return start_pc + &quot;\t&quot; + end_pc + &quot;\t&quot; + handler_pc + &quot;\t&quot; + str;
201     }
202 
203 
<span class="line-modified">204     public String toString( final ConstantPool cp ) {</span>
205         return toString(cp, true);
206     }
207 
208 
209     /**
210      * @return deep copy of this object
211      */
212     public CodeException copy() {
213         try {
214             return (CodeException) clone();
215         } catch (final CloneNotSupportedException e) {
216             // TODO should this throw?
217         }
218         return null;
219     }
220 }
</pre>
</td>
</tr>
</table>
<center><a href="Code.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="Constant.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>