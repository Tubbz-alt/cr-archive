<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.xml/share/classes/com/sun/org/apache/bcel/internal/Repository.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  */
  4 /*
  5  * Licensed to the Apache Software Foundation (ASF) under one or more
  6  * contributor license agreements.  See the NOTICE file distributed with
  7  * this work for additional information regarding copyright ownership.
  8  * The ASF licenses this file to You under the Apache License, Version 2.0
  9  * (the &quot;License&quot;); you may not use this file except in compliance with
 10  * the License.  You may obtain a copy of the License at
 11  *
 12  *      http://www.apache.org/licenses/LICENSE-2.0
 13  *
 14  * Unless required by applicable law or agreed to in writing, software
 15  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 16  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 17  * See the License for the specific language governing permissions and
 18  * limitations under the License.
 19  */
 20 package com.sun.org.apache.bcel.internal;
 21 
 22 
 23 import com.sun.org.apache.bcel.internal.classfile.JavaClass;
 24 import com.sun.org.apache.bcel.internal.util.SyntheticRepository;
 25 
 26 /**
 27  * The repository maintains informations about class interdependencies, e.g.,
<a name="2" id="anc2"></a><span class="line-modified"> 28  * whether a class is a sub-class of another. Delegates actual class loading to</span>
<span class="line-modified"> 29  * SyntheticRepository with current class path by default.</span>
 30  *
 31  * @see com.sun.org.apache.bcel.internal.util.Repository
 32  * @see SyntheticRepository
 33  *
<a name="3" id="anc3"></a><span class="line-modified"> 34  * @version $Id: Repository.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
 35  */
 36 public abstract class Repository {
 37 
 38     private static com.sun.org.apache.bcel.internal.util.Repository repository
 39             = SyntheticRepository.getInstance();
 40 
<a name="4" id="anc4"></a>
 41     /**
 42      * @return currently used repository instance
 43      */
 44     public static com.sun.org.apache.bcel.internal.util.Repository getRepository() {
 45         return repository;
 46     }
 47 
<a name="5" id="anc5"></a>
 48     /**
<a name="6" id="anc6"></a><span class="line-modified"> 49      * Set repository instance to be used for class loading</span>
 50      */
<a name="7" id="anc7"></a><span class="line-modified"> 51     public static void setRepository(final com.sun.org.apache.bcel.internal.util.Repository rep) {</span>
 52         repository = rep;
 53     }
 54 
<a name="8" id="anc8"></a>
 55     /**
<a name="9" id="anc9"></a><span class="line-modified"> 56      * Lookup class somewhere found on your CLASSPATH, or whereever the</span>
 57      * repository instance looks for it.
 58      *
 59      * @return class object for given fully qualified class name
<a name="10" id="anc10"></a><span class="line-modified"> 60      * @throws ClassNotFoundException if the class could not be found or parsed</span>
<span class="line-modified"> 61      * correctly</span>
 62      */
<a name="11" id="anc11"></a><span class="line-modified"> 63     public static JavaClass lookupClass(final String class_name)</span>
<span class="line-removed"> 64             throws ClassNotFoundException {</span>
 65         return repository.loadClass(class_name);
 66     }
 67 
<a name="12" id="anc12"></a>
 68     /**
<a name="13" id="anc13"></a><span class="line-modified"> 69      * Try to find class source using the internal repository instance.</span>
 70      *
 71      * @see Class
 72      * @return JavaClass object for given runtime class
<a name="14" id="anc14"></a><span class="line-modified"> 73      * @throws ClassNotFoundException if the class could not be found or parsed</span>
<span class="line-modified"> 74      * correctly</span>
 75      */
<a name="15" id="anc15"></a><span class="line-modified"> 76     public static JavaClass lookupClass(final Class&lt;?&gt; clazz)</span>
<span class="line-removed"> 77             throws ClassNotFoundException {</span>
 78         return repository.loadClass(clazz);
 79     }
 80 
<a name="16" id="anc16"></a>
 81     /**
 82      * Clear the repository.
 83      */
 84     public static void clearCache() {
 85         repository.clear();
 86     }
 87 
<a name="17" id="anc17"></a>
 88     /**
<a name="18" id="anc18"></a><span class="line-modified"> 89      * Add clazz to repository if there isn&#39;t an equally named class already in</span>
<span class="line-removed"> 90      * there.</span>
 91      *
 92      * @return old entry in repository
 93      */
<a name="19" id="anc19"></a><span class="line-modified"> 94     public static JavaClass addClass(final JavaClass clazz) {</span>
 95         final JavaClass old = repository.findClass(clazz.getClassName());
 96         repository.storeClass(clazz);
 97         return old;
 98     }
 99 
<a name="20" id="anc20"></a>
100     /**
<a name="21" id="anc21"></a><span class="line-modified">101      * Remove class with given (fully qualified) name from repository.</span>
102      */
<a name="22" id="anc22"></a><span class="line-modified">103     public static void removeClass(final String clazz) {</span>
104         repository.removeClass(repository.findClass(clazz));
105     }
106 
<a name="23" id="anc23"></a>
107     /**
<a name="24" id="anc24"></a><span class="line-modified">108      * Remove given class from repository.</span>
109      */
<a name="25" id="anc25"></a><span class="line-modified">110     public static void removeClass(final JavaClass clazz) {</span>
111         repository.removeClass(clazz);
112     }
113 
<a name="26" id="anc26"></a>
114     /**
<a name="27" id="anc27"></a><span class="line-modified">115      * @return list of super classes of clazz in ascending order, i.e., Object</span>
<span class="line-modified">116      * is always the last element</span>
117      * @throws ClassNotFoundException if any of the superclasses can&#39;t be found
118      */
<a name="28" id="anc28"></a><span class="line-modified">119     public static JavaClass[] getSuperClasses(final JavaClass clazz) throws ClassNotFoundException {</span>
120         return clazz.getSuperClasses();
121     }
122 
<a name="29" id="anc29"></a>
123     /**
<a name="30" id="anc30"></a><span class="line-modified">124      * @return list of super classes of clazz in ascending order, i.e., Object</span>
<span class="line-modified">125      * is always the last element.</span>
126      * @throws ClassNotFoundException if the named class or any of its
<a name="31" id="anc31"></a><span class="line-modified">127      * superclasses can&#39;t be found</span>
128      */
<a name="32" id="anc32"></a><span class="line-modified">129     public static JavaClass[] getSuperClasses(final String class_name) throws ClassNotFoundException {</span>
130         final JavaClass jc = lookupClass(class_name);
131         return getSuperClasses(jc);
132     }
133 
<a name="33" id="anc33"></a>
134     /**
<a name="34" id="anc34"></a><span class="line-modified">135      * @return all interfaces implemented by class and its super classes and the</span>
<span class="line-modified">136      * interfaces that those interfaces extend, and so on. (Some people call</span>
<span class="line-modified">137      * this a transitive hull).</span>
<span class="line-modified">138      * @throws ClassNotFoundException if any of the class&#39;s superclasses or</span>
<span class="line-modified">139      * superinterfaces can&#39;t be found</span>
140      */
<a name="35" id="anc35"></a><span class="line-modified">141     public static JavaClass[] getInterfaces(final JavaClass clazz) throws ClassNotFoundException {</span>
142         return clazz.getAllInterfaces();
143     }
144 
<a name="36" id="anc36"></a>
145     /**
<a name="37" id="anc37"></a><span class="line-modified">146      * @return all interfaces implemented by class and its super classes and the</span>
<span class="line-modified">147      * interfaces that extend those interfaces, and so on</span>
<span class="line-modified">148      * @throws ClassNotFoundException if the named class can&#39;t be found, or if</span>
<span class="line-modified">149      * any of its superclasses or superinterfaces can&#39;t be found</span>
150      */
<a name="38" id="anc38"></a><span class="line-modified">151     public static JavaClass[] getInterfaces(final String class_name) throws ClassNotFoundException {</span>
152         return getInterfaces(lookupClass(class_name));
153     }
154 
<a name="39" id="anc39"></a>
155     /**
156      * Equivalent to runtime &quot;instanceof&quot; operator.
<a name="40" id="anc40"></a><span class="line-removed">157      *</span>
158      * @return true, if clazz is an instance of super_class
<a name="41" id="anc41"></a><span class="line-modified">159      * @throws ClassNotFoundException if any superclasses or superinterfaces of</span>
<span class="line-modified">160      * clazz can&#39;t be found</span>
161      */
<a name="42" id="anc42"></a><span class="line-modified">162     public static boolean instanceOf(final JavaClass clazz, final JavaClass super_class)</span>
163             throws ClassNotFoundException {
164         return clazz.instanceOf(super_class);
165     }
166 
<a name="43" id="anc43"></a>
167     /**
168      * @return true, if clazz is an instance of super_class
<a name="44" id="anc44"></a><span class="line-modified">169      * @throws ClassNotFoundException if either clazz or super_class can&#39;t be</span>
<span class="line-modified">170      * found</span>
171      */
<a name="45" id="anc45"></a><span class="line-modified">172     public static boolean instanceOf(final String clazz, final String super_class)</span>
173             throws ClassNotFoundException {
174         return instanceOf(lookupClass(clazz), lookupClass(super_class));
175     }
176 
<a name="46" id="anc46"></a>
177     /**
178      * @return true, if clazz is an instance of super_class
179      * @throws ClassNotFoundException if super_class can&#39;t be found
180      */
<a name="47" id="anc47"></a><span class="line-modified">181     public static boolean instanceOf(final JavaClass clazz, final String super_class)</span>
182             throws ClassNotFoundException {
183         return instanceOf(clazz, lookupClass(super_class));
184     }
185 
<a name="48" id="anc48"></a>
186     /**
187      * @return true, if clazz is an instance of super_class
188      * @throws ClassNotFoundException if clazz can&#39;t be found
189      */
<a name="49" id="anc49"></a><span class="line-modified">190     public static boolean instanceOf(final String clazz, final JavaClass super_class)</span>
191             throws ClassNotFoundException {
192         return instanceOf(lookupClass(clazz), super_class);
193     }
194 
<a name="50" id="anc50"></a>
195     /**
196      * @return true, if clazz is an implementation of interface inter
<a name="51" id="anc51"></a><span class="line-modified">197      * @throws ClassNotFoundException if any superclasses or superinterfaces of</span>
<span class="line-modified">198      * clazz can&#39;t be found</span>
199      */
<a name="52" id="anc52"></a><span class="line-modified">200     public static boolean implementationOf(final JavaClass clazz, final JavaClass inter)</span>
201             throws ClassNotFoundException {
202         return clazz.implementationOf(inter);
203     }
204 
<a name="53" id="anc53"></a>
205     /**
206      * @return true, if clazz is an implementation of interface inter
<a name="54" id="anc54"></a><span class="line-modified">207      * @throws ClassNotFoundException if clazz, inter, or any superclasses or</span>
<span class="line-modified">208      * superinterfaces of clazz can&#39;t be found</span>
209      */
<a name="55" id="anc55"></a><span class="line-modified">210     public static boolean implementationOf(final String clazz, final String inter)</span>
211             throws ClassNotFoundException {
212         return implementationOf(lookupClass(clazz), lookupClass(inter));
213     }
214 
<a name="56" id="anc56"></a>
215     /**
216      * @return true, if clazz is an implementation of interface inter
<a name="57" id="anc57"></a><span class="line-modified">217      * @throws ClassNotFoundException if inter or any superclasses or</span>
<span class="line-modified">218      * superinterfaces of clazz can&#39;t be found</span>
219      */
<a name="58" id="anc58"></a><span class="line-modified">220     public static boolean implementationOf(final JavaClass clazz, final String inter)</span>
221             throws ClassNotFoundException {
222         return implementationOf(clazz, lookupClass(inter));
223     }
224 
<a name="59" id="anc59"></a>
225     /**
226      * @return true, if clazz is an implementation of interface inter
227      * @throws ClassNotFoundException if clazz or any superclasses or
<a name="60" id="anc60"></a><span class="line-modified">228      * superinterfaces of clazz can&#39;t be found</span>
229      */
<a name="61" id="anc61"></a><span class="line-modified">230     public static boolean implementationOf(final String clazz, final JavaClass inter)</span>
231             throws ClassNotFoundException {
232         return implementationOf(lookupClass(clazz), inter);
233     }
234 }
<a name="62" id="anc62"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="62" type="hidden" />
</body>
</html>