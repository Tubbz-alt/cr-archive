<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.xml/share/classes/com/sun/org/apache/bcel/internal/classfile/Synthetic.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * reserved comment block
  3  * DO NOT REMOVE OR ALTER!
  4  */
  5 /*
  6  * Licensed to the Apache Software Foundation (ASF) under one or more
  7  * contributor license agreements.  See the NOTICE file distributed with
  8  * this work for additional information regarding copyright ownership.
  9  * The ASF licenses this file to You under the Apache License, Version 2.0
 10  * (the &quot;License&quot;); you may not use this file except in compliance with
 11  * the License.  You may obtain a copy of the License at
 12  *
 13  *      http://www.apache.org/licenses/LICENSE-2.0
 14  *
 15  * Unless required by applicable law or agreed to in writing, software
 16  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 17  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.classfile;
 23 
 24 import java.io.DataInput;
 25 import java.io.DataOutputStream;
 26 import java.io.IOException;
 27 
 28 import com.sun.org.apache.bcel.internal.Const;
 29 
 30 /**
 31  * This class is derived from &lt;em&gt;Attribute&lt;/em&gt; and declares this class as
 32  * `synthetic&#39;, i.e., it needs special handling.  The JVM specification
 33  * states &quot;A class member that does not appear in the source code must be
 34  * marked using a Synthetic attribute.&quot;  It may appear in the ClassFile
 35  * attribute table, a field_info table or a method_info table.  This class
 36  * is intended to be instantiated from the
 37  * &lt;em&gt;Attribute.readAttribute()&lt;/em&gt; method.
 38  *
<a name="1" id="anc1"></a><span class="line-removed"> 39  * @version $Id: Synthetic.java 1749603 2016-06-21 20:50:19Z ggregory $</span>
 40  * @see     Attribute
 41  */
 42 public final class Synthetic extends Attribute {
 43 
 44     private byte[] bytes;
 45 
 46 
 47     /**
 48      * Initialize from another object. Note that both objects use the same
 49      * references (shallow copy). Use copy() for a physical copy.
 50      */
 51     public Synthetic(final Synthetic c) {
 52         this(c.getNameIndex(), c.getLength(), c.getBytes(), c.getConstantPool());
 53     }
 54 
 55 
 56     /**
 57      * @param name_index Index in constant pool to CONSTANT_Utf8, which
 58      * should represent the string &quot;Synthetic&quot;.
 59      * @param length Content length in bytes - should be zero.
 60      * @param bytes Attribute contents
 61      * @param constant_pool The constant pool this attribute is associated
 62      * with.
 63      */
 64     public Synthetic(final int name_index, final int length, final byte[] bytes, final ConstantPool constant_pool) {
 65         super(Const.ATTR_SYNTHETIC, name_index, length, constant_pool);
 66         this.bytes = bytes;
 67     }
 68 
 69 
 70     /**
 71      * Construct object from input stream.
 72      *
 73      * @param name_index Index in constant pool to CONSTANT_Utf8
 74      * @param length Content length in bytes
 75      * @param input Input stream
 76      * @param constant_pool Array of constants
 77      * @throws IOException
 78      */
 79     Synthetic(final int name_index, final int length, final DataInput input, final ConstantPool constant_pool)
 80             throws IOException {
 81         this(name_index, length, (byte[]) null, constant_pool);
 82         if (length &gt; 0) {
 83             bytes = new byte[length];
 84             input.readFully(bytes);
<a name="2" id="anc2"></a><span class="line-modified"> 85             System.err.println(&quot;Synthetic attribute with length &gt; 0&quot;);</span>
 86         }
 87     }
 88 
 89 
 90     /**
 91      * Called by objects that are traversing the nodes of the tree implicitely
 92      * defined by the contents of a Java class. I.e., the hierarchy of methods,
 93      * fields, attributes, etc. spawns a tree of objects.
 94      *
 95      * @param v Visitor object
 96      */
 97     @Override
 98     public void accept( final Visitor v ) {
 99         v.visitSynthetic(this);
100     }
101 
102 
103     /**
104      * Dump source file attribute to file stream in binary format.
105      *
106      * @param file Output file stream
107      * @throws IOException
108      */
109     @Override
<a name="3" id="anc3"></a><span class="line-modified">110     public final void dump( final DataOutputStream file ) throws IOException {</span>
111         super.dump(file);
112         if (super.getLength() &gt; 0) {
113             file.write(bytes, 0, super.getLength());
114         }
115     }
116 
117 
118     /**
119      * @return data bytes.
120      */
<a name="4" id="anc4"></a><span class="line-modified">121     public final byte[] getBytes() {</span>
122         return bytes;
123     }
124 
125 
126     /**
127      * @param bytes
128      */
<a name="5" id="anc5"></a><span class="line-modified">129     public final void setBytes( final byte[] bytes ) {</span>
130         this.bytes = bytes;
131     }
132 
133 
134     /**
135      * @return String representation.
136      */
137     @Override
<a name="6" id="anc6"></a><span class="line-modified">138     public final String toString() {</span>
139         final StringBuilder buf = new StringBuilder(&quot;Synthetic&quot;);
140         if (super.getLength() &gt; 0) {
141             buf.append(&quot; &quot;).append(Utility.toHexString(bytes));
142         }
143         return buf.toString();
144     }
145 
146 
147     /**
148      * @return deep copy of this attribute
149      */
150     @Override
151     public Attribute copy( final ConstantPool _constant_pool ) {
152         final Synthetic c = (Synthetic) clone();
153         if (bytes != null) {
154             c.bytes = new byte[bytes.length];
155             System.arraycopy(bytes, 0, c.bytes, 0, bytes.length);
156         }
157         c.setConstantPool(_constant_pool);
158         return c;
159     }
160 }
<a name="7" id="anc7"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="7" type="hidden" />
</body>
</html>