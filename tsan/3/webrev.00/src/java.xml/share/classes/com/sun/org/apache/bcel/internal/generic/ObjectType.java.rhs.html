<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.xml/share/classes/com/sun/org/apache/bcel/internal/generic/ObjectType.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * reserved comment block
  3  * DO NOT REMOVE OR ALTER!
  4  */
  5 /*
  6  * Licensed to the Apache Software Foundation (ASF) under one or more
  7  * contributor license agreements.  See the NOTICE file distributed with
  8  * this work for additional information regarding copyright ownership.
  9  * The ASF licenses this file to You under the Apache License, Version 2.0
 10  * (the &quot;License&quot;); you may not use this file except in compliance with
 11  * the License.  You may obtain a copy of the License at
 12  *
 13  *      http://www.apache.org/licenses/LICENSE-2.0
 14  *
 15  * Unless required by applicable law or agreed to in writing, software
 16  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 17  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 18  * See the License for the specific language governing permissions and
 19  * limitations under the License.
 20  */
 21 
 22 package com.sun.org.apache.bcel.internal.generic;
 23 
 24 import com.sun.org.apache.bcel.internal.Const;
 25 import com.sun.org.apache.bcel.internal.Repository;
 26 import com.sun.org.apache.bcel.internal.classfile.JavaClass;
 27 
 28 /**
 29  * Denotes reference such as java.lang.String.
 30  *
<a name="1" id="anc1"></a>
 31  */
 32 public class ObjectType extends ReferenceType {
 33 
 34     private final String class_name; // Class name of type
 35 
 36     /**
 37      * @since 6.0
 38      */
 39     public static ObjectType getInstance(final String class_name) {
 40         return new ObjectType(class_name);
 41     }
 42 
 43     /**
 44      * @param class_name fully qualified class name, e.g. java.lang.String
 45      */
 46     public ObjectType(final String class_name) {
 47         super(Const.T_REFERENCE, &quot;L&quot; + class_name.replace(&#39;.&#39;, &#39;/&#39;) + &quot;;&quot;);
 48         this.class_name = class_name.replace(&#39;/&#39;, &#39;.&#39;);
 49     }
 50 
 51 
 52     /** @return name of referenced class
 53      */
 54     public String getClassName() {
 55         return class_name;
 56     }
 57 
 58 
 59     /** @return a hash code value for the object.
 60      */
 61     @Override
 62     public int hashCode() {
 63         return class_name.hashCode();
 64     }
 65 
 66 
 67     /** @return true if both type objects refer to the same class.
 68      */
 69     @Override
 70     public boolean equals( final Object type ) {
 71         return (type instanceof ObjectType)
 72                 ? ((ObjectType) type).class_name.equals(class_name)
 73                 : false;
 74     }
 75 
 76 
 77     /**
 78      * If &quot;this&quot; doesn&#39;t reference a class, it references an interface
 79      * or a non-existant entity.
 80      * @deprecated (since 6.0) this method returns an inaccurate result
 81      *   if the class or interface referenced cannot
 82      *   be found: use referencesClassExact() instead
 83      */
 84     @Deprecated
 85     public boolean referencesClass() {
 86         try {
 87             final JavaClass jc = Repository.lookupClass(class_name);
 88             return jc.isClass();
 89         } catch (final ClassNotFoundException e) {
 90             return false;
 91         }
 92     }
 93 
 94 
 95     /**
 96      * If &quot;this&quot; doesn&#39;t reference an interface, it references a class
 97      * or a non-existant entity.
 98      * @deprecated (since 6.0) this method returns an inaccurate result
 99      *   if the class or interface referenced cannot
100      *   be found: use referencesInterfaceExact() instead
101      */
102     @Deprecated
103     public boolean referencesInterface() {
104         try {
105             final JavaClass jc = Repository.lookupClass(class_name);
106             return !jc.isClass();
107         } catch (final ClassNotFoundException e) {
108             return false;
109         }
110     }
111 
112 
113     /**
114      * Return true if this type references a class,
115      * false if it references an interface.
116      * @return true if the type references a class, false if
117      *   it references an interface
118      * @throws ClassNotFoundException if the class or interface
119      *   referenced by this type can&#39;t be found
120      */
121     public boolean referencesClassExact() throws ClassNotFoundException {
122         final JavaClass jc = Repository.lookupClass(class_name);
123         return jc.isClass();
124     }
125 
126 
127     /**
128      * Return true if this type references an interface,
129      * false if it references a class.
130      * @return true if the type references an interface, false if
131      *   it references a class
132      * @throws ClassNotFoundException if the class or interface
133      *   referenced by this type can&#39;t be found
134      */
135     public boolean referencesInterfaceExact() throws ClassNotFoundException {
136         final JavaClass jc = Repository.lookupClass(class_name);
137         return !jc.isClass();
138     }
139 
140 
141     /**
142      * Return true if this type is a subclass of given ObjectType.
143      * @throws ClassNotFoundException if any of this class&#39;s superclasses
144      *  can&#39;t be found
145      */
146     public boolean subclassOf( final ObjectType superclass ) throws ClassNotFoundException {
147         if (this.referencesInterfaceExact() || superclass.referencesInterfaceExact()) {
148             return false;
149         }
150         return Repository.instanceOf(this.class_name, superclass.class_name);
151     }
152 
153 
154     /**
155      * Java Virtual Machine Specification edition 2,  5.4.4 Access Control
156      * @throws ClassNotFoundException if the class referenced by this type
157      *   can&#39;t be found
158      */
159     public boolean accessibleTo( final ObjectType accessor ) throws ClassNotFoundException {
160         final JavaClass jc = Repository.lookupClass(class_name);
161         if (jc.isPublic()) {
162             return true;
163         }
164         final JavaClass acc = Repository.lookupClass(accessor.class_name);
165         return acc.getPackageName().equals(jc.getPackageName());
166     }
167 }
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>