<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jdi/share/classes/com/sun/tools/jdi/ReferenceTypeImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="InterfaceTypeImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SocketListeningConnector.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdi/share/classes/com/sun/tools/jdi/ReferenceTypeImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1998, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 590                 candidate.signature().equals(signature)) {
 591                 retList.add(candidate);
 592             }
 593         }
 594         retList.trimToSize();
 595         return retList;
 596     }
 597 
 598     List&lt;InterfaceType&gt; getInterfaces() {
 599         InterfaceTypeImpl[] intfs;
 600         try {
 601             intfs = JDWP.ReferenceType.Interfaces.
 602                                          process(vm, this).interfaces;
 603         } catch (JDWPException exc) {
 604             throw exc.toJDIException();
 605         }
 606         return Arrays.asList((InterfaceType[])intfs);
 607     }
 608 
 609     public List&lt;ReferenceType&gt; nestedTypes() {
<span class="line-removed"> 610         List&lt;ReferenceType&gt; all = vm.allClasses();</span>
 611         List&lt;ReferenceType&gt; nested = new ArrayList&lt;ReferenceType&gt;();
 612         String outername = name();
 613         int outerlen = outername.length();
<span class="line-modified"> 614         Iterator&lt;ReferenceType&gt; iter = all.iterator();</span>
<span class="line-removed"> 615         while (iter.hasNext()) {</span>
<span class="line-removed"> 616             ReferenceType refType = iter.next();</span>
 617             String name = refType.name();
 618             int len = name.length();
 619             /* The separator is historically &#39;$&#39; but could also be &#39;#&#39; */
 620             if ( len &gt; outerlen &amp;&amp; name.startsWith(outername) ) {
 621                 char c = name.charAt(outerlen);
<span class="line-modified"> 622                 if ( c ==&#39;$&#39; || c== &#39;#&#39; ) {</span>
 623                     nested.add(refType);
 624                 }
 625             }
<span class="line-modified"> 626         }</span>
 627         return nested;
 628     }
 629 
 630     public Value getValue(Field sig) {
 631         List&lt;Field&gt; list = new ArrayList&lt;Field&gt;(1);
 632         list.add(sig);
 633         Map&lt;Field, Value&gt; map = getValues(list);
 634         return map.get(sig);
 635     }
 636 
 637 
 638     void validateFieldAccess(Field field) {
 639         /*
 640          * Field must be in this object&#39;s class, a superclass, or
 641          * implemented interface
 642          */
 643         ReferenceTypeImpl declType = (ReferenceTypeImpl)field.declaringType();
 644         if (!declType.isAssignableFrom(this)) {
 645             throw new IllegalArgumentException(&quot;Invalid field&quot;);
 646         }
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 590                 candidate.signature().equals(signature)) {
 591                 retList.add(candidate);
 592             }
 593         }
 594         retList.trimToSize();
 595         return retList;
 596     }
 597 
 598     List&lt;InterfaceType&gt; getInterfaces() {
 599         InterfaceTypeImpl[] intfs;
 600         try {
 601             intfs = JDWP.ReferenceType.Interfaces.
 602                                          process(vm, this).interfaces;
 603         } catch (JDWPException exc) {
 604             throw exc.toJDIException();
 605         }
 606         return Arrays.asList((InterfaceType[])intfs);
 607     }
 608 
 609     public List&lt;ReferenceType&gt; nestedTypes() {

 610         List&lt;ReferenceType&gt; nested = new ArrayList&lt;ReferenceType&gt;();
 611         String outername = name();
 612         int outerlen = outername.length();
<span class="line-modified"> 613         vm.forEachClass(refType -&gt; {</span>


 614             String name = refType.name();
 615             int len = name.length();
 616             /* The separator is historically &#39;$&#39; but could also be &#39;#&#39; */
 617             if ( len &gt; outerlen &amp;&amp; name.startsWith(outername) ) {
 618                 char c = name.charAt(outerlen);
<span class="line-modified"> 619                 if ( c == &#39;$&#39; || c == &#39;#&#39; ) {</span>
 620                     nested.add(refType);
 621                 }
 622             }
<span class="line-modified"> 623         });</span>
 624         return nested;
 625     }
 626 
 627     public Value getValue(Field sig) {
 628         List&lt;Field&gt; list = new ArrayList&lt;Field&gt;(1);
 629         list.add(sig);
 630         Map&lt;Field, Value&gt; map = getValues(list);
 631         return map.get(sig);
 632     }
 633 
 634 
 635     void validateFieldAccess(Field field) {
 636         /*
 637          * Field must be in this object&#39;s class, a superclass, or
 638          * implemented interface
 639          */
 640         ReferenceTypeImpl declType = (ReferenceTypeImpl)field.declaringType();
 641         if (!declType.isAssignableFrom(this)) {
 642             throw new IllegalArgumentException(&quot;Invalid field&quot;);
 643         }
</pre>
</td>
</tr>
</table>
<center><a href="InterfaceTypeImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="SocketListeningConnector.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>