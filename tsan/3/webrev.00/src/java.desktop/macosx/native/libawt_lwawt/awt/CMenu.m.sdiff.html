<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/native/libawt_lwawt/awt/CMenu.m</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="CMenu.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="CMenuItem.m.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/native/libawt_lwawt/awt/CMenu.m</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2016, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 69 - (void)setJavaMenuTitle:(NSString *)title {
 70 
 71     if (title) {
 72         [ThreadUtilities performOnMainThread:@selector(setNativeMenuTitle_OnAppKitThread:) on:self withObject:title waitUntilDone:YES];
 73     }
 74 }
 75 
 76 - (void)setNativeMenuTitle_OnAppKitThread:(NSString *)title {
 77 AWT_ASSERT_APPKIT_THREAD;
 78 
 79     [fMenu setTitle:title];
 80     // If we are a submenu we need to set our name in the parent menu&#39;s menu item.
 81     NSMenu *parent = [fMenu supermenu];
 82     if (parent) {
 83         NSInteger index = [parent indexOfItemWithSubmenu:fMenu];
 84         NSMenuItem *menuItem = [parent itemAtIndex:index];
 85         [menuItem setTitle:title];
 86     }
 87 }
 88 
<span class="line-removed"> 89 - (void)addSeparator {</span>
<span class="line-removed"> 90     // Nothing calls this, which is good because we need a CMenuItem here.</span>
<span class="line-removed"> 91 }</span>
<span class="line-removed"> 92 </span>
 93 - (void)deleteJavaItem:(jint)index {
 94 
 95     [ThreadUtilities performOnMainThread:@selector(deleteNativeJavaItem_OnAppKitThread:) on:self withObject:[NSNumber numberWithInt:index] waitUntilDone:YES];
 96 }
 97 
 98 - (void)deleteNativeJavaItem_OnAppKitThread:(NSNumber *)number {
 99 AWT_ASSERT_APPKIT_THREAD;
100 
101     int n = [number intValue];
102     if (n &lt; [[self menu] numberOfItems]) {
103         [[self menu] removeItemAtIndex:n];
104     }
105 }
106 
107 - (void)addNSMenuItemToMenu:(NSMenu *)inMenu {
108     if (fMenuItem == nil) return;
109     [fMenuItem setSubmenu:fMenu];
110     [inMenu addItem:fMenuItem];
111 }
112 
</pre>
<hr />
<pre>
206 JNF_COCOA_EXIT(env);
207     return ptr_to_jlong(aCMenu);
208 }
209 
210 
211 /*
212  * Class:     sun_lwawt_macosx_CMenu
213  * Method:    nativeSetMenuTitle
214  * Signature: (JLjava/lang/String;)V
215  */
216 JNIEXPORT void JNICALL
217 Java_sun_lwawt_macosx_CMenu_nativeSetMenuTitle
218 (JNIEnv *env, jobject peer, jlong menuObject, jstring label)
219 {
220 JNF_COCOA_ENTER(env);
221     // Set the menu&#39;s title.
222     [((CMenu *)jlong_to_ptr(menuObject)) setJavaMenuTitle:JNFJavaToNSString(env, label)];
223 JNF_COCOA_EXIT(env);
224 }
225 
<span class="line-removed">226 /*</span>
<span class="line-removed">227  * Class:     sun_lwawt_macosx_CMenu</span>
<span class="line-removed">228  * Method:    nativeAddSeparator</span>
<span class="line-removed">229  * Signature: (J)V</span>
<span class="line-removed">230  */</span>
<span class="line-removed">231 JNIEXPORT void JNICALL</span>
<span class="line-removed">232 Java_sun_lwawt_macosx_CMenu_nativeAddSeparator</span>
<span class="line-removed">233 (JNIEnv *env, jobject peer, jlong menuObject)</span>
<span class="line-removed">234 {</span>
<span class="line-removed">235 JNF_COCOA_ENTER(env);</span>
<span class="line-removed">236     // Add a separator item.</span>
<span class="line-removed">237     [((CMenu *)jlong_to_ptr(menuObject))addSeparator];</span>
<span class="line-removed">238 JNF_COCOA_EXIT(env);</span>
<span class="line-removed">239 }</span>
<span class="line-removed">240 </span>
241 /*
242  * Class:     sun_lwawt_macosx_CMenu
243  * Method:    nativeDeleteItem
244  * Signature: (JI)V
245  */
246 JNIEXPORT void JNICALL
247 Java_sun_lwawt_macosx_CMenu_nativeDeleteItem
248 (JNIEnv *env, jobject peer, jlong menuObject, jint index)
249 {
250 JNF_COCOA_ENTER(env);
251     // Remove the specified item.
252     [((CMenu *)jlong_to_ptr(menuObject)) deleteJavaItem: index];
253 JNF_COCOA_EXIT(env);
254 }
255 
256 /*
257  * Class:     sun_lwawt_macosx_CMenu
258  * Method:    nativeGetNSMenu
259  * Signature: (J)J
260  */
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 69 - (void)setJavaMenuTitle:(NSString *)title {
 70 
 71     if (title) {
 72         [ThreadUtilities performOnMainThread:@selector(setNativeMenuTitle_OnAppKitThread:) on:self withObject:title waitUntilDone:YES];
 73     }
 74 }
 75 
 76 - (void)setNativeMenuTitle_OnAppKitThread:(NSString *)title {
 77 AWT_ASSERT_APPKIT_THREAD;
 78 
 79     [fMenu setTitle:title];
 80     // If we are a submenu we need to set our name in the parent menu&#39;s menu item.
 81     NSMenu *parent = [fMenu supermenu];
 82     if (parent) {
 83         NSInteger index = [parent indexOfItemWithSubmenu:fMenu];
 84         NSMenuItem *menuItem = [parent itemAtIndex:index];
 85         [menuItem setTitle:title];
 86     }
 87 }
 88 




 89 - (void)deleteJavaItem:(jint)index {
 90 
 91     [ThreadUtilities performOnMainThread:@selector(deleteNativeJavaItem_OnAppKitThread:) on:self withObject:[NSNumber numberWithInt:index] waitUntilDone:YES];
 92 }
 93 
 94 - (void)deleteNativeJavaItem_OnAppKitThread:(NSNumber *)number {
 95 AWT_ASSERT_APPKIT_THREAD;
 96 
 97     int n = [number intValue];
 98     if (n &lt; [[self menu] numberOfItems]) {
 99         [[self menu] removeItemAtIndex:n];
100     }
101 }
102 
103 - (void)addNSMenuItemToMenu:(NSMenu *)inMenu {
104     if (fMenuItem == nil) return;
105     [fMenuItem setSubmenu:fMenu];
106     [inMenu addItem:fMenuItem];
107 }
108 
</pre>
<hr />
<pre>
202 JNF_COCOA_EXIT(env);
203     return ptr_to_jlong(aCMenu);
204 }
205 
206 
207 /*
208  * Class:     sun_lwawt_macosx_CMenu
209  * Method:    nativeSetMenuTitle
210  * Signature: (JLjava/lang/String;)V
211  */
212 JNIEXPORT void JNICALL
213 Java_sun_lwawt_macosx_CMenu_nativeSetMenuTitle
214 (JNIEnv *env, jobject peer, jlong menuObject, jstring label)
215 {
216 JNF_COCOA_ENTER(env);
217     // Set the menu&#39;s title.
218     [((CMenu *)jlong_to_ptr(menuObject)) setJavaMenuTitle:JNFJavaToNSString(env, label)];
219 JNF_COCOA_EXIT(env);
220 }
221 















222 /*
223  * Class:     sun_lwawt_macosx_CMenu
224  * Method:    nativeDeleteItem
225  * Signature: (JI)V
226  */
227 JNIEXPORT void JNICALL
228 Java_sun_lwawt_macosx_CMenu_nativeDeleteItem
229 (JNIEnv *env, jobject peer, jlong menuObject, jint index)
230 {
231 JNF_COCOA_ENTER(env);
232     // Remove the specified item.
233     [((CMenu *)jlong_to_ptr(menuObject)) deleteJavaItem: index];
234 JNF_COCOA_EXIT(env);
235 }
236 
237 /*
238  * Class:     sun_lwawt_macosx_CMenu
239  * Method:    nativeGetNSMenu
240  * Signature: (J)J
241  */
</pre>
</td>
</tr>
</table>
<center><a href="CMenu.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="CMenuItem.m.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>