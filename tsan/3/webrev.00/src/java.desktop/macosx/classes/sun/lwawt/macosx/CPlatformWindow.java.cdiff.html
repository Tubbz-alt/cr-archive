<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/macosx/classes/sun/lwawt/macosx/CPlatformWindow.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CPlatformView.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="CTaskbarPeer.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/classes/sun/lwawt/macosx/CPlatformWindow.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 60,11 ***</span>
  import com.apple.laf.ClientPropertyApplicator.Property;
  import sun.awt.AWTAccessor;
  import sun.awt.AWTAccessor.ComponentAccessor;
  import sun.awt.AWTAccessor.WindowAccessor;
  import sun.java2d.SurfaceData;
<span class="line-removed">- import sun.java2d.opengl.CGLSurfaceData;</span>
  import sun.lwawt.LWLightweightFramePeer;
  import sun.lwawt.LWToolkit;
  import sun.lwawt.LWWindowPeer;
  import sun.lwawt.LWWindowPeer.PeerType;
  import sun.lwawt.PlatformWindow;
<span class="line-new-header">--- 60,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 307,16 ***</span>
       * Delegate initialization (create native window and all the
       * related resources).
       */
      @Override // PlatformWindow
      public void initialize(Window _target, LWWindowPeer _peer, PlatformWindow _owner) {
<span class="line-modified">!         initializeBase(_target, _peer, _owner, new CPlatformView());</span>
  
          final int styleBits = getInitialStyleBits();
  
          responder = createPlatformResponder();
<span class="line-removed">-         contentView = createContentView();</span>
          contentView.initialize(peer, responder);
  
          Rectangle bounds;
          if (!IS(DECORATED, styleBits)) {
              // For undecorated frames the move/resize event does not come if the frame is centered on the screen
<span class="line-new-header">--- 306,15 ---</span>
       * Delegate initialization (create native window and all the
       * related resources).
       */
      @Override // PlatformWindow
      public void initialize(Window _target, LWWindowPeer _peer, PlatformWindow _owner) {
<span class="line-modified">!         initializeBase(_target, _peer, _owner);</span>
  
          final int styleBits = getInitialStyleBits();
  
          responder = createPlatformResponder();
          contentView.initialize(peer, responder);
  
          Rectangle bounds;
          if (!IS(DECORATED, styleBits)) {
              // For undecorated frames the move/resize event does not come if the frame is centered on the screen
</pre>
<hr />
<pre>
<span class="line-old-header">*** 353,28 ***</span>
                      CLIENT_PROPERTY_APPLICATOR.attachAndApplyClientProperties(rootpane);
                      rootpane.removePropertyChangeListener(&quot;ancestor&quot;, this);
                  }
              });
          }
<span class="line-removed">- </span>
<span class="line-removed">-         validateSurface();</span>
      }
  
<span class="line-modified">!     protected void initializeBase(Window target, LWWindowPeer peer, PlatformWindow owner, CPlatformView view) {</span>
          this.peer = peer;
          this.target = target;
          if (owner instanceof CPlatformWindow) {
              this.owner = (CPlatformWindow)owner;
          }
<span class="line-modified">!         this.contentView = view;</span>
      }
  
      protected CPlatformResponder createPlatformResponder() {
          return new CPlatformResponder(peer, false);
      }
  
<span class="line-modified">!     protected CPlatformView createContentView() {</span>
          return new CPlatformView();
      }
  
      protected int getInitialStyleBits() {
          // defaults style bits
<span class="line-new-header">--- 351,26 ---</span>
                      CLIENT_PROPERTY_APPLICATOR.attachAndApplyClientProperties(rootpane);
                      rootpane.removePropertyChangeListener(&quot;ancestor&quot;, this);
                  }
              });
          }
      }
  
<span class="line-modified">!     void initializeBase(Window target, LWWindowPeer peer, PlatformWindow owner) {</span>
          this.peer = peer;
          this.target = target;
          if (owner instanceof CPlatformWindow) {
              this.owner = (CPlatformWindow)owner;
          }
<span class="line-modified">!         contentView = createContentView();</span>
      }
  
      protected CPlatformResponder createPlatformResponder() {
          return new CPlatformResponder(peer, false);
      }
  
<span class="line-modified">!     CPlatformView createContentView() {</span>
          return new CPlatformView();
      }
  
      protected int getInitialStyleBits() {
          // defaults style bits
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1050,17 ***</span>
      @Override
      public long getLayerPtr() {
          return contentView.getWindowLayerPtr();
      }
  
<span class="line-removed">-     private void validateSurface() {</span>
<span class="line-removed">-         SurfaceData surfaceData = getSurfaceData();</span>
<span class="line-removed">-         if (surfaceData instanceof CGLSurfaceData) {</span>
<span class="line-removed">-             ((CGLSurfaceData)surfaceData).validate();</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
      void flushBuffers() {
          if (isVisible() &amp;&amp; !nativeBounds.isEmpty() &amp;&amp; !isFullScreenMode) {
              try {
                  LWCToolkit.invokeAndWait(new Runnable() {
                      @Override
<span class="line-new-header">--- 1046,10 ---</span>
</pre>
<center><a href="CPlatformView.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="CTaskbarPeer.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>