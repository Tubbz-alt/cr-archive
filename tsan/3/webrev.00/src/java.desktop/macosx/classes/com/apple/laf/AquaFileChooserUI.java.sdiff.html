<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/macosx/classes/com/apple/laf/AquaFileChooserUI.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="AquaComboBoxRendererInternal.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AquaInternalFrameBorder.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/classes/com/apple/laf/AquaFileChooserUI.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 823             } else if (getFileChooser().getDialogType() == JFileChooser.SAVE_DIALOG) { return saveTitleText; }
 824         }
 825         return fc.getDialogTitle();
 826     }
 827 
 828     // Utility to get the first selected item regardless of whether we&#39;re single or multi select
 829     File getFirstSelectedItem() {
 830         // Get the selected item
 831         File selectedFile = null;
 832         final int index = fFileList.getSelectedRow();
 833         if (index &gt;= 0) {
 834             selectedFile = (File)((AquaFileSystemModel)fFileList.getModel()).getElementAt(index);
 835         }
 836         return selectedFile;
 837     }
 838 
 839     // Make a file from the filename
 840     File makeFile(final JFileChooser fc, final String filename) {
 841         File selectedFile = null;
 842         // whitespace is legal on Macs, even on beginning and end of filename
<span class="line-modified"> 843         if (filename != null &amp;&amp; !filename.equals(&quot;&quot;)) {</span>
 844             final FileSystemView fs = fc.getFileSystemView();
 845             selectedFile = fs.createFileObject(filename);
 846             if (!selectedFile.isAbsolute()) {
 847                 selectedFile = fs.createFileObject(fc.getCurrentDirectory(), filename);
 848             }
 849         }
 850         return selectedFile;
 851     }
 852 
 853     // Utility to tell if the textfield has anything in it
 854     boolean textfieldIsValid() {
 855         final String s = getFileName();
<span class="line-modified"> 856         return (s != null &amp;&amp; !s.equals(&quot;&quot;));</span>
 857     }
 858 
 859     // Action to attach to the file list so we can override the default action
 860     // of the table for the return key, which is to select the next line.
 861     @SuppressWarnings(&quot;serial&quot;) // Superclass is not serializable across versions
 862     protected class DefaultButtonAction extends AbstractAction {
 863         public void actionPerformed(final ActionEvent e) {
 864             final JRootPane root = AquaFileChooserUI.this.getFileChooser().getRootPane();
 865             final JFileChooser fc = AquaFileChooserUI.this.getFileChooser();
 866             final JButton owner = root.getDefaultButton();
 867             if (owner != null &amp;&amp; SwingUtilities.getRootPane(owner) == root &amp;&amp; owner.isEnabled()) {
 868                 owner.doClick(20);
 869             } else if (!fc.getControlButtonsAreShown()) {
 870                 final JButton defaultButton = AquaFileChooserUI.this.fSubPanel.getDefaultButton(fc);
 871 
 872                 if (defaultButton != null) {
 873                     defaultButton.doClick(20);
 874                 }
 875             } else {
 876                 Toolkit.getDefaultToolkit().beep();
</pre>
<hr />
<pre>
1943 
1944         JButton getDefaultButton(final JFileChooser fc) {
1945             return fApproveButton;
1946         }
1947 
1948         // Default to the textfield, panels without one should subclass
1949         JComponent getFocusComponent(final JFileChooser fc) {
1950             return filenameTextField;
1951         }
1952 
1953         String getApproveButtonText(final JFileChooser fc) {
1954             // Fallback to &quot;choose&quot;
1955             return this.getApproveButtonText(fc, chooseButtonText);
1956         }
1957 
1958         // Try to get the custom text.  If none, use the fallback
1959         String getApproveButtonText(final JFileChooser fc, final String fallbackText) {
1960             final String buttonText = fc.getApproveButtonText();
1961             if (buttonText != null) {
1962                 buttonText.trim();
<span class="line-modified">1963                 if (!buttonText.equals(&quot;&quot;)) return buttonText;</span>
1964             }
1965             return fallbackText;
1966         }
1967 
1968         int getApproveButtonMnemonic(final JFileChooser fc) {
1969             // Don&#39;t use a default
1970             return fc.getApproveButtonMnemonic();
1971         }
1972 
1973         // No fallback
1974         String getApproveButtonToolTipText(final JFileChooser fc) {
1975             return getApproveButtonToolTipText(fc, null);
1976         }
1977 
1978         String getApproveButtonToolTipText(final JFileChooser fc, final String fallbackText) {
1979             final String tooltipText = fc.getApproveButtonToolTipText();
1980             if (tooltipText != null) {
1981                 tooltipText.trim();
<span class="line-modified">1982                 if (!tooltipText.equals(&quot;&quot;)) return tooltipText;</span>
1983             }
1984             return fallbackText;
1985         }
1986 
1987         String getCancelButtonToolTipText(final JFileChooser fc) {
1988             return cancelChooseButtonToolTipText;
1989         }
1990     }
1991 
1992     // Custom FILES_ONLY dialog
1993     /*
1994      NavServices Save appearance with Open behavior
1995      Approve button label = Open when list has focus and a directory is selected, Custom otherwise
1996      No OpenDirectory button - Approve button is overloaded
1997      Default button / double click = Approve
1998      Has text field
1999      List - everything is enabled
2000      */
2001     class CustomFilePanel extends FCSubpanel {
2002         void installPanel(final JFileChooser fc, final boolean controlButtonsAreShown) {
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 823             } else if (getFileChooser().getDialogType() == JFileChooser.SAVE_DIALOG) { return saveTitleText; }
 824         }
 825         return fc.getDialogTitle();
 826     }
 827 
 828     // Utility to get the first selected item regardless of whether we&#39;re single or multi select
 829     File getFirstSelectedItem() {
 830         // Get the selected item
 831         File selectedFile = null;
 832         final int index = fFileList.getSelectedRow();
 833         if (index &gt;= 0) {
 834             selectedFile = (File)((AquaFileSystemModel)fFileList.getModel()).getElementAt(index);
 835         }
 836         return selectedFile;
 837     }
 838 
 839     // Make a file from the filename
 840     File makeFile(final JFileChooser fc, final String filename) {
 841         File selectedFile = null;
 842         // whitespace is legal on Macs, even on beginning and end of filename
<span class="line-modified"> 843         if (filename != null &amp;&amp; !filename.isEmpty()) {</span>
 844             final FileSystemView fs = fc.getFileSystemView();
 845             selectedFile = fs.createFileObject(filename);
 846             if (!selectedFile.isAbsolute()) {
 847                 selectedFile = fs.createFileObject(fc.getCurrentDirectory(), filename);
 848             }
 849         }
 850         return selectedFile;
 851     }
 852 
 853     // Utility to tell if the textfield has anything in it
 854     boolean textfieldIsValid() {
 855         final String s = getFileName();
<span class="line-modified"> 856         return (s != null &amp;&amp; !s.isEmpty());</span>
 857     }
 858 
 859     // Action to attach to the file list so we can override the default action
 860     // of the table for the return key, which is to select the next line.
 861     @SuppressWarnings(&quot;serial&quot;) // Superclass is not serializable across versions
 862     protected class DefaultButtonAction extends AbstractAction {
 863         public void actionPerformed(final ActionEvent e) {
 864             final JRootPane root = AquaFileChooserUI.this.getFileChooser().getRootPane();
 865             final JFileChooser fc = AquaFileChooserUI.this.getFileChooser();
 866             final JButton owner = root.getDefaultButton();
 867             if (owner != null &amp;&amp; SwingUtilities.getRootPane(owner) == root &amp;&amp; owner.isEnabled()) {
 868                 owner.doClick(20);
 869             } else if (!fc.getControlButtonsAreShown()) {
 870                 final JButton defaultButton = AquaFileChooserUI.this.fSubPanel.getDefaultButton(fc);
 871 
 872                 if (defaultButton != null) {
 873                     defaultButton.doClick(20);
 874                 }
 875             } else {
 876                 Toolkit.getDefaultToolkit().beep();
</pre>
<hr />
<pre>
1943 
1944         JButton getDefaultButton(final JFileChooser fc) {
1945             return fApproveButton;
1946         }
1947 
1948         // Default to the textfield, panels without one should subclass
1949         JComponent getFocusComponent(final JFileChooser fc) {
1950             return filenameTextField;
1951         }
1952 
1953         String getApproveButtonText(final JFileChooser fc) {
1954             // Fallback to &quot;choose&quot;
1955             return this.getApproveButtonText(fc, chooseButtonText);
1956         }
1957 
1958         // Try to get the custom text.  If none, use the fallback
1959         String getApproveButtonText(final JFileChooser fc, final String fallbackText) {
1960             final String buttonText = fc.getApproveButtonText();
1961             if (buttonText != null) {
1962                 buttonText.trim();
<span class="line-modified">1963                 if (!buttonText.isEmpty()) return buttonText;</span>
1964             }
1965             return fallbackText;
1966         }
1967 
1968         int getApproveButtonMnemonic(final JFileChooser fc) {
1969             // Don&#39;t use a default
1970             return fc.getApproveButtonMnemonic();
1971         }
1972 
1973         // No fallback
1974         String getApproveButtonToolTipText(final JFileChooser fc) {
1975             return getApproveButtonToolTipText(fc, null);
1976         }
1977 
1978         String getApproveButtonToolTipText(final JFileChooser fc, final String fallbackText) {
1979             final String tooltipText = fc.getApproveButtonToolTipText();
1980             if (tooltipText != null) {
1981                 tooltipText.trim();
<span class="line-modified">1982                 if (!tooltipText.isEmpty()) return tooltipText;</span>
1983             }
1984             return fallbackText;
1985         }
1986 
1987         String getCancelButtonToolTipText(final JFileChooser fc) {
1988             return cancelChooseButtonToolTipText;
1989         }
1990     }
1991 
1992     // Custom FILES_ONLY dialog
1993     /*
1994      NavServices Save appearance with Open behavior
1995      Approve button label = Open when list has focus and a directory is selected, Custom otherwise
1996      No OpenDirectory button - Approve button is overloaded
1997      Default button / double click = Approve
1998      Has text field
1999      List - everything is enabled
2000      */
2001     class CustomFilePanel extends FCSubpanel {
2002         void installPanel(final JFileChooser fc, final boolean controlButtonsAreShown) {
</pre>
</td>
</tr>
</table>
<center><a href="AquaComboBoxRendererInternal.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AquaInternalFrameBorder.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>