<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/macosx/classes/com/apple/laf/AquaMenuPainter.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="AquaKeyBindings.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AquaSpinnerUI.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/macosx/classes/com/apple/laf/AquaMenuPainter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2011, 2013, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 251,13 ***</span>
          if (checkIcon != null) {
              paintCheck(g, b, checkIcon, checkIconRect);
          }
  
          // Draw the accelerator first in case the HTML renderer changes the color
<span class="line-modified">!         if (keyString != null &amp;&amp; !keyString.equals(&quot;&quot;)) {</span>
              final int yAccel = acceleratorRect.y + fm.getAscent();
<span class="line-modified">!             if (modifiersString.equals(&quot;&quot;)) {</span>
                  // just draw the keyString
                  SwingUtilities2.drawString(c, g, keyString, acceleratorRect.x, yAccel);
              } else {
                  final int modifiers = accelerator.getModifiers();
                  int underlinedChar = 0;
<span class="line-new-header">--- 251,13 ---</span>
          if (checkIcon != null) {
              paintCheck(g, b, checkIcon, checkIconRect);
          }
  
          // Draw the accelerator first in case the HTML renderer changes the color
<span class="line-modified">!         if (keyString != null &amp;&amp; !keyString.isEmpty()) {</span>
              final int yAccel = acceleratorRect.y + fm.getAscent();
<span class="line-modified">!             if (modifiersString.isEmpty()) {</span>
                  // just draw the keyString
                  SwingUtilities2.drawString(c, g, keyString, acceleratorRect.x, yAccel);
              } else {
                  final int modifiers = accelerator.getModifiers();
                  int underlinedChar = 0;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 280,11 ***</span>
                  }
              }
          }
  
          // Draw the Text
<span class="line-modified">!         if (text != null &amp;&amp; !text.equals(&quot;&quot;)) {</span>
              final View v = (View)c.getClientProperty(BasicHTML.propertyKey);
              if (v != null) {
                  v.paint(g, textRect);
              } else {
                  final int mnemonic = (AquaMnemonicHandler.isMnemonicHidden() ? -1 : model.getMnemonic());
<span class="line-new-header">--- 280,11 ---</span>
                  }
              }
          }
  
          // Draw the Text
<span class="line-modified">!         if (text != null &amp;&amp; !text.isEmpty()) {</span>
              final View v = (View)c.getClientProperty(BasicHTML.propertyKey);
              if (v != null) {
                  v.paint(g, textRect);
              } else {
                  final int mnemonic = (AquaMnemonicHandler.isMnemonicHidden() ? -1 : model.getMnemonic());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 340,11 ***</span>
          r.setBounds(textRect);
          r = SwingUtilities.computeUnion(iconRect.x, iconRect.y, iconRect.width, iconRect.height, r);
          //   r = iconRect.union(textRect);
  
          // Add in the accelerator
<span class="line-modified">!         boolean acceleratorTextIsEmpty = (keyString == null) || keyString.equals(&quot;&quot;);</span>
  
          if (!acceleratorTextIsEmpty) {
              r.width += acceleratorRect.width;
          }
  
<span class="line-new-header">--- 340,11 ---</span>
          r.setBounds(textRect);
          r = SwingUtilities.computeUnion(iconRect.x, iconRect.y, iconRect.width, iconRect.height, r);
          //   r = iconRect.union(textRect);
  
          // Add in the accelerator
<span class="line-modified">!         boolean acceleratorTextIsEmpty = (keyString == null) || keyString.isEmpty();</span>
  
          if (!acceleratorTextIsEmpty) {
              r.width += acceleratorRect.width;
          }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 442,11 ***</span>
  
      private String layoutMenuItem(final JMenuItem menuItem, final FontMetrics fm, final String text, final FontMetrics fmAccel, String keyString, final String modifiersString, final Icon icon, final Icon checkIcon, final Icon arrowIcon, final int verticalAlignment, final int horizontalAlignment, final int verticalTextPosition, final int horizontalTextPosition, final Rectangle viewR, final Rectangle iconR, final Rectangle textR, final Rectangle acceleratorR, final Rectangle checkIconR, final Rectangle arrowIconR, final int textIconGap, final int menuItemGap) {
          // Force it to do &quot;LEFT&quot;, then flip the rects if we&#39;re right-to-left
          SwingUtilities.layoutCompoundLabel(menuItem, fm, text, icon, verticalAlignment, SwingConstants.LEFT, verticalTextPosition, horizontalTextPosition, viewR, iconR, textR, textIconGap);
  
<span class="line-modified">!         final boolean acceleratorTextIsEmpty = (keyString == null) || keyString.equals(&quot;&quot;);</span>
  
          if (acceleratorTextIsEmpty) {
              acceleratorR.width = acceleratorR.height = 0;
              keyString = &quot;&quot;;
          } else {
<span class="line-new-header">--- 442,11 ---</span>
  
      private String layoutMenuItem(final JMenuItem menuItem, final FontMetrics fm, final String text, final FontMetrics fmAccel, String keyString, final String modifiersString, final Icon icon, final Icon checkIcon, final Icon arrowIcon, final int verticalAlignment, final int horizontalAlignment, final int verticalTextPosition, final int horizontalTextPosition, final Rectangle viewR, final Rectangle iconR, final Rectangle textR, final Rectangle acceleratorR, final Rectangle checkIconR, final Rectangle arrowIconR, final int textIconGap, final int menuItemGap) {
          // Force it to do &quot;LEFT&quot;, then flip the rects if we&#39;re right-to-left
          SwingUtilities.layoutCompoundLabel(menuItem, fm, text, icon, verticalAlignment, SwingConstants.LEFT, verticalTextPosition, horizontalTextPosition, viewR, iconR, textR, textIconGap);
  
<span class="line-modified">!         final boolean acceleratorTextIsEmpty = (keyString == null) || keyString.isEmpty();</span>
  
          if (acceleratorTextIsEmpty) {
              acceleratorR.width = acceleratorR.height = 0;
              keyString = &quot;&quot;;
          } else {
</pre>
<center><a href="AquaKeyBindings.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="AquaSpinnerUI.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>