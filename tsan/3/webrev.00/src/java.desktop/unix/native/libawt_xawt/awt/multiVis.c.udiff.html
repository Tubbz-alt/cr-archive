<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/unix/native/libawt_xawt/awt/multiVis.c</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="gtk_interface.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="swing_GTKEngine.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/native/libawt_xawt/awt/multiVis.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -216,11 +216,15 @@</span>
       unsigned long       redMask, greenMask, blueMask;
       int                 redShift, greenShift, blueShift;
       XColor *colors ;
  
       ncolors = (unsigned) src_vis-&gt;map_entries ;
<span class="udiff-line-modified-removed">-      *src_colors = colors = (XColor *)malloc(ncolors * sizeof(XColor) ) ;</span>
<span class="udiff-line-modified-added">+ /* JDK modification.</span>
<span class="udiff-line-added">+  * use calloc instead of malloc to initialize allocated memory</span>
<span class="udiff-line-added">+  *   *src_colors = colors = (XColor *)malloc(ncolors * sizeof(XColor) ) ;</span>
<span class="udiff-line-added">+  */</span>
<span class="udiff-line-added">+      *src_colors = colors = (XColor *)calloc(ncolors, sizeof(XColor));</span>
  
       if(src_vis-&gt;class != TrueColor &amp;&amp; src_vis-&gt;class != DirectColor)
       {
           for(i=0 ; i &lt; ncolors ; i++)
           {
</pre>
<center><a href="gtk_interface.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="swing_GTKEngine.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>