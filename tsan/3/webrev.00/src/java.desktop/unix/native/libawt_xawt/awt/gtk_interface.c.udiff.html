<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/unix/native/libawt_xawt/awt/gtk_interface.c</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="gtk3_interface.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="multiVis.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/native/libawt_xawt/awt/gtk_interface.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2005, 2016, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -64,10 +64,13 @@</span>
      static GtkLib** load_order;
      static int n_libs = 0;
      if (!n_libs) {
          n_libs = sizeof(gtk_libs) / sizeof(GtkLib);
          load_order = calloc(n_libs + 1, sizeof(GtkLib *));
<span class="udiff-line-added">+         if (load_order == NULL) {</span>
<span class="udiff-line-added">+           return NULL;</span>
<span class="udiff-line-added">+         }</span>
      }
      int i, first = 0;
      for (i = 0; i &lt; n_libs; i++) {
          load_order[i] = &amp;gtk_libs[i];
          if (load_order[i]-&gt;version == version) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -83,10 +86,11 @@</span>
      return load_order;
  }
  
  static GtkLib* get_loaded() {
      GtkLib** libs = get_libs_order(GTK_ANY);
<span class="udiff-line-added">+     if (libs == NULL) return NULL;</span>
      while(!gtk &amp;&amp; *libs) {
          GtkLib* lib = *libs++;
          if (lib-&gt;check(lib-&gt;vname, /* load = */FALSE)) {
              return lib;
          }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -109,11 +113,11 @@</span>
              if (!gtk) {
                  gtk = lib-&gt;load(env, lib-&gt;name);
              }
          } else {
              GtkLib** libs = get_libs_order(version);
<span class="udiff-line-modified-removed">-             while (!gtk &amp;&amp; *libs) {</span>
<span class="udiff-line-modified-added">+             while (!gtk &amp;&amp; libs &amp;&amp; *libs) {</span>
                  lib = *libs++;
                  if (version == GTK_ANY || lib-&gt;version == version) {
                      if (verbose) {
                          fprintf(stderr, &quot;Looking for GTK%d library...\n&quot;,
                                                                    lib-&gt;version);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -139,10 +143,11 @@</span>
      return gtk != NULL;
  }
  
  static gboolean check_version(GtkVersion version) {
      GtkLib** libs = get_libs_order(version);
<span class="udiff-line-added">+     if (libs == NULL) return FALSE;</span>
      while (*libs) {
          GtkLib* lib = *libs++;
          if (lib-&gt;check(lib-&gt;vname, /* load = */TRUE)) {
              return TRUE;
          }
</pre>
<center><a href="gtk3_interface.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="multiVis.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>