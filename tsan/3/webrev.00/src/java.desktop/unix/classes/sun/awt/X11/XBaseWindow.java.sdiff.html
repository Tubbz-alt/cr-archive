<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/unix/classes/sun/awt/X11/XBaseWindow.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="XAWTLookAndFeel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="XComponentPeer.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/classes/sun/awt/X11/XBaseWindow.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1008 
1009     public void handleVisibilityEvent(XEvent xev) {
1010     }
1011     public void handleKeyPress(XEvent xev) {
1012     }
1013     public void handleKeyRelease(XEvent xev) {
1014     }
1015     public void handleExposeEvent(XEvent xev) {
1016     }
1017     /**
1018      * Activate automatic grab on first ButtonPress,
1019      * deactivate on full mouse release
1020      */
1021     public void handleButtonPressRelease(XEvent xev) {
1022         XButtonEvent xbe = xev.get_xbutton();
1023         /*
1024          * Ignore the buttons above 20 due to the bit limit for
1025          * InputEvent.BUTTON_DOWN_MASK.
1026          * One more bit is reserved for FIRST_HIGH_BIT.
1027          */
<span class="line-modified">1028         if (xbe.get_button() &gt; SunToolkit.MAX_BUTTONS_SUPPORTED) {</span>

1029             return;
1030         }
1031         int buttonState = 0;
1032         buttonState = xbe.get_state() &amp; XConstants.ALL_BUTTONS_MASK;
<span class="line-modified">1033         switch (xev.get_type()) {</span>
<span class="line-modified">1034         case XConstants.ButtonPress:</span>
<span class="line-modified">1035             if (buttonState == 0) {</span>
<span class="line-modified">1036                 XWindowPeer parent = getToplevelXWindow();</span>
<span class="line-modified">1037                 // See 6385277, 6981400.</span>
<span class="line-modified">1038                 if (parent != null &amp;&amp; parent.isFocusableWindow()) {</span>
<span class="line-modified">1039                     // A click in a client area drops the actual focused window retaining.</span>
<span class="line-modified">1040                     parent.setActualFocusedWindow(null);</span>
<span class="line-modified">1041                     parent.requestWindowFocus(xbe.get_time(), true);</span>
<span class="line-modified">1042                 }</span>
<span class="line-modified">1043                 XAwtState.setAutoGrabWindow(this);</span>
<span class="line-modified">1044             }</span>
<span class="line-modified">1045             break;</span>
<span class="line-modified">1046         case XConstants.ButtonRelease:</span>
<span class="line-modified">1047             if (isFullRelease(buttonState, xbe.get_button())) {</span>
<span class="line-modified">1048                 XAwtState.setAutoGrabWindow(null);</span>








1049             }
<span class="line-removed">1050             break;</span>
1051         }
1052     }
1053     public void handleMotionNotify(XEvent xev) {
1054     }
1055     public void handleXCrossingEvent(XEvent xev) {
1056     }
1057     public void handleConfigureNotifyEvent(XEvent xev) {
1058         XConfigureEvent xe = xev.get_xconfigure();
1059         if (insLog.isLoggable(PlatformLogger.Level.FINER)) {
1060             insLog.finer(&quot;Configure, {0}&quot;, xe);
1061         }
1062 
1063         x = scaleDown(xe.get_x());
1064         y = scaleDown(xe.get_y());
1065         width = scaleDown(xe.get_width());
1066         height = scaleDown(xe.get_height());
1067     }
1068     /**
1069      * Checks ButtonRelease released all Mouse buttons
1070      */
</pre>
</td>
<td>
<hr />
<pre>
1008 
1009     public void handleVisibilityEvent(XEvent xev) {
1010     }
1011     public void handleKeyPress(XEvent xev) {
1012     }
1013     public void handleKeyRelease(XEvent xev) {
1014     }
1015     public void handleExposeEvent(XEvent xev) {
1016     }
1017     /**
1018      * Activate automatic grab on first ButtonPress,
1019      * deactivate on full mouse release
1020      */
1021     public void handleButtonPressRelease(XEvent xev) {
1022         XButtonEvent xbe = xev.get_xbutton();
1023         /*
1024          * Ignore the buttons above 20 due to the bit limit for
1025          * InputEvent.BUTTON_DOWN_MASK.
1026          * One more bit is reserved for FIRST_HIGH_BIT.
1027          */
<span class="line-modified">1028         int theButton = xbe.get_button();</span>
<span class="line-added">1029         if (theButton &gt; SunToolkit.MAX_BUTTONS_SUPPORTED) {</span>
1030             return;
1031         }
1032         int buttonState = 0;
1033         buttonState = xbe.get_state() &amp; XConstants.ALL_BUTTONS_MASK;
<span class="line-modified">1034 </span>
<span class="line-modified">1035         boolean isWheel = (theButton == XConstants.MouseWheelUp ||</span>
<span class="line-modified">1036                            theButton == XConstants.MouseWheelDown);</span>
<span class="line-modified">1037 </span>
<span class="line-modified">1038         // don&#39;t give focus if it&#39;s just the mouse wheel turning</span>
<span class="line-modified">1039         if (!isWheel) {</span>
<span class="line-modified">1040             switch (xev.get_type()) {</span>
<span class="line-modified">1041                 case XConstants.ButtonPress:</span>
<span class="line-modified">1042                     if (buttonState == 0) {</span>
<span class="line-modified">1043                         XWindowPeer parent = getToplevelXWindow();</span>
<span class="line-modified">1044                         // See 6385277, 6981400.</span>
<span class="line-modified">1045                         if (parent != null &amp;&amp; parent.isFocusableWindow()) {</span>
<span class="line-modified">1046                             // A click in a client area drops the actual focused window retaining.</span>
<span class="line-modified">1047                             parent.setActualFocusedWindow(null);</span>
<span class="line-modified">1048                             parent.requestWindowFocus(xbe.get_time(), true);</span>
<span class="line-modified">1049                         }</span>
<span class="line-added">1050                         XAwtState.setAutoGrabWindow(this);</span>
<span class="line-added">1051                     }</span>
<span class="line-added">1052                     break;</span>
<span class="line-added">1053                 case XConstants.ButtonRelease:</span>
<span class="line-added">1054                     if (isFullRelease(buttonState, xbe.get_button())) {</span>
<span class="line-added">1055                         XAwtState.setAutoGrabWindow(null);</span>
<span class="line-added">1056                     }</span>
<span class="line-added">1057                     break;</span>
1058             }

1059         }
1060     }
1061     public void handleMotionNotify(XEvent xev) {
1062     }
1063     public void handleXCrossingEvent(XEvent xev) {
1064     }
1065     public void handleConfigureNotifyEvent(XEvent xev) {
1066         XConfigureEvent xe = xev.get_xconfigure();
1067         if (insLog.isLoggable(PlatformLogger.Level.FINER)) {
1068             insLog.finer(&quot;Configure, {0}&quot;, xe);
1069         }
1070 
1071         x = scaleDown(xe.get_x());
1072         y = scaleDown(xe.get_y());
1073         width = scaleDown(xe.get_width());
1074         height = scaleDown(xe.get_height());
1075     }
1076     /**
1077      * Checks ButtonRelease released all Mouse buttons
1078      */
</pre>
</td>
</tr>
</table>
<center><a href="XAWTLookAndFeel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="XComponentPeer.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>