<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/unix/classes/sun/awt/X11/MotifColorUtilities.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../UNIXToolkit.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="XAWTLookAndFeel.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/classes/sun/awt/X11/MotifColorUtilities.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 27,10 ***</span>
<span class="line-new-header">--- 27,11 ---</span>
  
  import java.awt.*;
  import java.io.*;
  import sun.security.action.GetPropertyAction;
  import java.security.AccessController;
<span class="line-added">+ import sun.awt.OSInfo;</span>
  
  /**
    *
    *  This class contains code that is need to mimic the
    *  Motif Color selection and color defaults code.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 432,10 ***</span>
<span class="line-new-header">--- 433,35 ---</span>
              b = Integer.valueOf(color.substring(8,12),16).intValue() &gt;&gt; 8;
              colors[i] = 0xff000000 | r&lt;&lt;16 | g&lt;&lt;8 | b;
              //  System.out.println(&quot;color[&quot;+i+&quot;]=&quot;+Integer.toHexString(colors[i]) + &quot;r = &quot; +r + &quot;g=&quot;+g+&quot;b=&quot;+b);
          }
  
<span class="line-added">+         // Solaris&#39;s default color is MEDIUM_COLOR (4)</span>
<span class="line-added">+         // AIX&#39;s default color is HIGH_COLOR (8)</span>
<span class="line-added">+         int numOfColor = OSInfo.getOSType() == OSInfo.OSType.AIX ? 8 : 4;</span>
<span class="line-added">+ </span>
<span class="line-added">+         int idx = resourceString.indexOf(&quot;ColorUse:&quot;);</span>
<span class="line-added">+         if (idx &gt; -1) {</span>
<span class="line-added">+             while ( (idx &lt; len) &amp;&amp; (resourceString.charAt(idx) != &#39;:&#39;)) idx++;</span>
<span class="line-added">+             idx++; // skip :</span>
<span class="line-added">+             if (resourceString.charAt(idx) == &#39;\t&#39;) idx++; // skip \t</span>
<span class="line-added">+             String colorUse = resourceString.substring(idx,resourceString.indexOf(&quot;\n&quot;,idx));</span>
<span class="line-added">+             if (&quot;HIGH_COLOR&quot;.equalsIgnoreCase(colorUse)) {</span>
<span class="line-added">+                 numOfColor = 8;</span>
<span class="line-added">+             } else if (&quot;MEDIUM_COLOR&quot;.equalsIgnoreCase(colorUse)) {</span>
<span class="line-added">+                 numOfColor = 4;</span>
<span class="line-added">+             }</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         if (4 == numOfColor)</span>
<span class="line-added">+             loadSystemColorsForCDE4(systemColors, colors);</span>
<span class="line-added">+         else</span>
<span class="line-added">+             loadSystemColorsForCDE8(systemColors, colors);</span>
<span class="line-added">+    }</span>
<span class="line-added">+ </span>
<span class="line-added">+    private static void loadSystemColorsForCDE4(int[] systemColors, int[] colors) throws Exception {</span>
<span class="line-added">+         int r,g,b;</span>
          systemColors[SystemColor.ACTIVE_CAPTION] = colors[0];
          systemColors[SystemColor.ACTIVE_CAPTION_BORDER] = colors[0];
  
          systemColors[SystemColor.INACTIVE_CAPTION] = colors[1];
          systemColors[SystemColor.INACTIVE_CAPTION_BORDER] = colors[1];
</pre>
<hr />
<pre>
<span class="line-old-header">*** 494,10 ***</span>
<span class="line-new-header">--- 520,88 ---</span>
          systemColors[SystemColor.CONTROL_SHADOW] =  bottom_shadow;
          systemColors[SystemColor.CONTROL_DK_SHADOW] = tmp.darker().getRGB();
  
      }
  
<span class="line-added">+     private static void loadSystemColorsForCDE8(int[] systemColors, int[] colors) throws Exception {</span>
<span class="line-added">+         int r,g,b;</span>
<span class="line-added">+         systemColors[SystemColor.ACTIVE_CAPTION] = colors[0];</span>
<span class="line-added">+         systemColors[SystemColor.ACTIVE_CAPTION_BORDER] = colors[0];</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.INACTIVE_CAPTION] = colors[1];</span>
<span class="line-added">+         systemColors[SystemColor.INACTIVE_CAPTION_BORDER] = colors[1];</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.WINDOW] = colors[4];</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.MENU] = colors[5];</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.TEXT] = colors[3];</span>
<span class="line-added">+         systemColors[SystemColor.TEXT_HIGHLIGHT_TEXT] = colors[3];</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.SCROLLBAR] = colors[4];</span>
<span class="line-added">+         systemColors[SystemColor.CONTROL] = colors[4];</span>
<span class="line-added">+         systemColors[SystemColor.INFO] =  colors[4];</span>
<span class="line-added">+ </span>
<span class="line-added">+         int activeFore;</span>
<span class="line-added">+         int inactiveFore;</span>
<span class="line-added">+         int textFore;</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+         r = (colors[0] &amp; 0x00FF0000) &gt;&gt; 16;</span>
<span class="line-added">+         g = (colors[0] &amp; 0x0000FF00) &gt;&gt; 8;</span>
<span class="line-added">+         b = (colors[0] &amp; 0x000000FF);</span>
<span class="line-added">+ </span>
<span class="line-added">+         activeFore = MotifColorUtilities.calculateForegroundFromBackground(r,g,b);</span>
<span class="line-added">+ </span>
<span class="line-added">+         r = (colors[1] &amp; 0x00FF0000) &gt;&gt; 16;</span>
<span class="line-added">+         g = (colors[1] &amp; 0x0000FF00) &gt;&gt; 8;</span>
<span class="line-added">+         b = (colors[1] &amp; 0x000000FF);</span>
<span class="line-added">+ </span>
<span class="line-added">+         inactiveFore = MotifColorUtilities.calculateForegroundFromBackground(r,g,b);</span>
<span class="line-added">+ </span>
<span class="line-added">+         r = (colors[3] &amp; 0x00FF0000) &gt;&gt; 16;</span>
<span class="line-added">+         g = (colors[3] &amp; 0x0000FF00) &gt;&gt; 8;</span>
<span class="line-added">+         b = (colors[3] &amp; 0x000000FF);</span>
<span class="line-added">+ </span>
<span class="line-added">+         textFore = MotifColorUtilities.calculateForegroundFromBackground(r,g,b);</span>
<span class="line-added">+ </span>
<span class="line-added">+         r = (colors[4] &amp; 0x00FF0000) &gt;&gt; 16;</span>
<span class="line-added">+         g = (colors[4] &amp; 0x0000FF00) &gt;&gt; 8;</span>
<span class="line-added">+         b = (colors[4] &amp; 0x000000FF);</span>
<span class="line-added">+ </span>
<span class="line-added">+         int windowFore = MotifColorUtilities.calculateForegroundFromBackground(r,g,b);</span>
<span class="line-added">+ </span>
<span class="line-added">+         int top_shadow = MotifColorUtilities.calculateTopShadowFromBackground(r,g,b);</span>
<span class="line-added">+         int bottom_shadow = MotifColorUtilities.calculateBottomShadowFromBackground(r,g,b);</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+         r = (colors[5] &amp; 0x00FF0000) &gt;&gt; 16;</span>
<span class="line-added">+         g = (colors[5] &amp; 0x0000FF00) &gt;&gt; 8;</span>
<span class="line-added">+         b = (colors[5] &amp; 0x000000FF);</span>
<span class="line-added">+ </span>
<span class="line-added">+         int menuFore = MotifColorUtilities.calculateForegroundFromBackground(r,g,b);</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.ACTIVE_CAPTION_TEXT] = activeFore;</span>
<span class="line-added">+         systemColors[SystemColor.INACTIVE_CAPTION_TEXT] = inactiveFore;</span>
<span class="line-added">+         systemColors[SystemColor.WINDOW_BORDER] = MotifColorUtilities.BLACK;</span>
<span class="line-added">+         systemColors[SystemColor.WINDOW_TEXT] = windowFore;</span>
<span class="line-added">+         systemColors[SystemColor.MENU_TEXT] = menuFore;</span>
<span class="line-added">+         systemColors[SystemColor.TEXT_TEXT] = textFore;</span>
<span class="line-added">+         systemColors[SystemColor.TEXT_HIGHLIGHT] = textFore;</span>
<span class="line-added">+         systemColors[SystemColor.CONTROL_TEXT] = windowFore;</span>
<span class="line-added">+         Color tmp = new Color(top_shadow);</span>
<span class="line-added">+         systemColors[SystemColor.CONTROL_HIGHLIGHT] =  top_shadow;</span>
<span class="line-added">+         systemColors[SystemColor.CONTROL_LT_HIGHLIGHT] =  tmp.brighter().getRGB();</span>
<span class="line-added">+ </span>
<span class="line-added">+         tmp = new Color(bottom_shadow);</span>
<span class="line-added">+         systemColors[SystemColor.CONTROL_SHADOW] =  bottom_shadow;</span>
<span class="line-added">+         systemColors[SystemColor.CONTROL_DK_SHADOW] = tmp.darker().getRGB();</span>
<span class="line-added">+ </span>
<span class="line-added">+         systemColors[SystemColor.INFO_TEXT] = windowFore;</span>
<span class="line-added">+ </span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      static void loadMotifDefaultColors(int[] systemColors) {
          //fix for 5092883. WINDOW should be light gray and TEXT should be WHITE to look similar to Motif
          systemColors[SystemColor.WINDOW] = MotifColorUtilities.MOTIF_WINDOW_COLOR;
          systemColors[SystemColor.TEXT] = MotifColorUtilities.WHITE;
          systemColors[SystemColor.WINDOW_TEXT] = MotifColorUtilities.BLACK;
</pre>
<center><a href="../UNIXToolkit.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="XAWTLookAndFeel.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>