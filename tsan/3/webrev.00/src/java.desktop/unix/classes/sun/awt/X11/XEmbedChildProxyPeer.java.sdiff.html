<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/unix/classes/sun/awt/X11/XEmbedChildProxyPeer.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="XDecoratedPeer.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="XFileDialogPeer.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/unix/classes/sun/awt/X11/XEmbedChildProxyPeer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package sun.awt.X11;
 27 
<span class="line-modified"> 28 import java.awt.*;</span>
<span class="line-modified"> 29 import java.awt.event.*;</span>




















 30 import java.awt.image.ColorModel;
<span class="line-removed"> 31 import java.awt.image.ImageObserver;</span>
<span class="line-removed"> 32 import java.awt.image.ImageProducer;</span>
 33 import java.awt.image.VolatileImage;
<span class="line-modified"> 34 import java.awt.peer.*;</span>


 35 import sun.java2d.pipe.Region;
<span class="line-removed"> 36 import sun.awt.*;</span>
 37 
 38 public class XEmbedChildProxyPeer implements ComponentPeer, XEventDispatcher{
 39     XEmbeddingContainer container;
 40     XEmbedChildProxy proxy;
 41     long handle;
 42     XEmbedChildProxyPeer(XEmbedChildProxy proxy) {
 43         this.container = proxy.getEmbeddingContainer();
 44         this.handle = proxy.getHandle();
 45         this.proxy = proxy;
 46         initDispatching();
 47     }
 48 
 49     void initDispatching() {
 50         XToolkit.awtLock();
 51         try {
 52             XToolkit.addEventDispatcher(handle, this);
 53             XlibWrapper.XSelectInput(XToolkit.getDisplay(), handle,
 54                     XConstants.StructureNotifyMask | XConstants.PropertyChangeMask);
 55         }
 56         finally {
</pre>
<hr />
<pre>
231                   }
232               }
233 
234               // NOTE: We simulate heavyweight behavior of Motif - component receives focus right
235               // after request, not after event. Normally, we should better listen for event
236               // by listeners.
237 
238               // TODO: consider replacing with XKeyboardFocusManagerPeer.deliverFocus
239               return simulateMotifRequestFocus(lightweightChild, temporary, focusedWindowChangeAllowed, time);
240               // Motif compatibility code
241           case XKeyboardFocusManagerPeer.SNFH_SUCCESS_HANDLED:
242               // Either lightweight or excessive requiest - all events are generated.
243               return true;
244         }
245         return false;
246     }
247     public boolean              isFocusable() {
248         return true;
249     }
250 
<span class="line-removed">251     public Image                createImage(ImageProducer producer) { return null; }</span>
252     public Image                createImage(int width, int height) { return null; }
253     public VolatileImage        createVolatileImage(int width, int height) { return null; }
<span class="line-removed">254     public boolean              prepareImage(Image img, int w, int h, ImageObserver o) { return false; }</span>
<span class="line-removed">255     public int                  checkImage(Image img, int w, int h, ImageObserver o) { return 0; }</span>
256     public GraphicsConfiguration getGraphicsConfiguration() { return null; }
257     public boolean     handlesWheelScrolling() { return true; }
258     public void createBuffers(int numBuffers, BufferCapabilities caps)
259       throws AWTException { }
260     public Image getBackBuffer() { return null; }
261     public void flip(int x1, int y1, int x2, int y2, BufferCapabilities.FlipContents flipAction) {  }
262     public void destroyBuffers() { }
263 
264     /**
265      * Used by lightweight implementations to tell a ComponentPeer to layout
266      * its sub-elements.  For instance, a lightweight Checkbox needs to layout
267      * the box, as well as the text label.
268      */
269     public void        layout() {}
270 
271     Window getTopLevel(Component comp) {
272         while (comp != null &amp;&amp; !(comp instanceof Window)) {
273             comp = comp.getParent();
274         }
275         return (Window)comp;
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package sun.awt.X11;
 27 
<span class="line-modified"> 28 import java.awt.AWTEvent;</span>
<span class="line-modified"> 29 import java.awt.AWTException;</span>
<span class="line-added"> 30 import java.awt.BufferCapabilities;</span>
<span class="line-added"> 31 import java.awt.Color;</span>
<span class="line-added"> 32 import java.awt.Component;</span>
<span class="line-added"> 33 import java.awt.Container;</span>
<span class="line-added"> 34 import java.awt.Dimension;</span>
<span class="line-added"> 35 import java.awt.Font;</span>
<span class="line-added"> 36 import java.awt.FontMetrics;</span>
<span class="line-added"> 37 import java.awt.Graphics;</span>
<span class="line-added"> 38 import java.awt.GraphicsConfiguration;</span>
<span class="line-added"> 39 import java.awt.Image;</span>
<span class="line-added"> 40 import java.awt.Point;</span>
<span class="line-added"> 41 import java.awt.Rectangle;</span>
<span class="line-added"> 42 import java.awt.Toolkit;</span>
<span class="line-added"> 43 import java.awt.Window;</span>
<span class="line-added"> 44 import java.awt.event.ComponentEvent;</span>
<span class="line-added"> 45 import java.awt.event.FocusEvent;</span>
<span class="line-added"> 46 import java.awt.event.InputEvent;</span>
<span class="line-added"> 47 import java.awt.event.InvocationEvent;</span>
<span class="line-added"> 48 import java.awt.event.KeyEvent;</span>
<span class="line-added"> 49 import java.awt.event.PaintEvent;</span>
 50 import java.awt.image.ColorModel;


 51 import java.awt.image.VolatileImage;
<span class="line-modified"> 52 import java.awt.peer.ComponentPeer;</span>
<span class="line-added"> 53 import java.awt.peer.ContainerPeer;</span>
<span class="line-added"> 54 </span>
 55 import sun.java2d.pipe.Region;

 56 
 57 public class XEmbedChildProxyPeer implements ComponentPeer, XEventDispatcher{
 58     XEmbeddingContainer container;
 59     XEmbedChildProxy proxy;
 60     long handle;
 61     XEmbedChildProxyPeer(XEmbedChildProxy proxy) {
 62         this.container = proxy.getEmbeddingContainer();
 63         this.handle = proxy.getHandle();
 64         this.proxy = proxy;
 65         initDispatching();
 66     }
 67 
 68     void initDispatching() {
 69         XToolkit.awtLock();
 70         try {
 71             XToolkit.addEventDispatcher(handle, this);
 72             XlibWrapper.XSelectInput(XToolkit.getDisplay(), handle,
 73                     XConstants.StructureNotifyMask | XConstants.PropertyChangeMask);
 74         }
 75         finally {
</pre>
<hr />
<pre>
250                   }
251               }
252 
253               // NOTE: We simulate heavyweight behavior of Motif - component receives focus right
254               // after request, not after event. Normally, we should better listen for event
255               // by listeners.
256 
257               // TODO: consider replacing with XKeyboardFocusManagerPeer.deliverFocus
258               return simulateMotifRequestFocus(lightweightChild, temporary, focusedWindowChangeAllowed, time);
259               // Motif compatibility code
260           case XKeyboardFocusManagerPeer.SNFH_SUCCESS_HANDLED:
261               // Either lightweight or excessive requiest - all events are generated.
262               return true;
263         }
264         return false;
265     }
266     public boolean              isFocusable() {
267         return true;
268     }
269 

270     public Image                createImage(int width, int height) { return null; }
271     public VolatileImage        createVolatileImage(int width, int height) { return null; }


272     public GraphicsConfiguration getGraphicsConfiguration() { return null; }
273     public boolean     handlesWheelScrolling() { return true; }
274     public void createBuffers(int numBuffers, BufferCapabilities caps)
275       throws AWTException { }
276     public Image getBackBuffer() { return null; }
277     public void flip(int x1, int y1, int x2, int y2, BufferCapabilities.FlipContents flipAction) {  }
278     public void destroyBuffers() { }
279 
280     /**
281      * Used by lightweight implementations to tell a ComponentPeer to layout
282      * its sub-elements.  For instance, a lightweight Checkbox needs to layout
283      * the box, as well as the text label.
284      */
285     public void        layout() {}
286 
287     Window getTopLevel(Component comp) {
288         while (comp != null &amp;&amp; !(comp instanceof Window)) {
289             comp = comp.getParent();
290         }
291         return (Window)comp;
</pre>
</td>
</tr>
</table>
<center><a href="XDecoratedPeer.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="XFileDialogPeer.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>