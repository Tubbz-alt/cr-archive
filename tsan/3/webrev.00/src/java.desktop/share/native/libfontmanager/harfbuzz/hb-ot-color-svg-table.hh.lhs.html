<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-color-svg-table.hh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright Â© 2018  Ebrahim Byagowi
  3  *
  4  *  This is part of HarfBuzz, a text shaping library.
  5  *
  6  * Permission is hereby granted, without written agreement and without
  7  * license or royalty fees, to use, copy, modify, and distribute this
  8  * software and its documentation for any purpose, provided that the
  9  * above copyright notice and the following two paragraphs appear in
 10  * all copies of this software.
 11  *
 12  * IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR
 13  * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
 14  * ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN
 15  * IF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 16  * DAMAGE.
 17  *
 18  * THE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,
 19  * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 20  * FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
 21  * ON AN &quot;AS IS&quot; BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO
 22  * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
 23  */
 24 
 25 #ifndef HB_OT_COLOR_SVG_TABLE_HH
 26 #define HB_OT_COLOR_SVG_TABLE_HH
 27 
<a name="1" id="anc1"></a><span class="line-modified"> 28 #include &quot;hb-open-type-private.hh&quot;</span>
 29 
 30 /*
 31  * SVG -- SVG (Scalable Vector Graphics)
 32  * https://docs.microsoft.com/en-us/typography/opentype/spec/svg
 33  */
 34 
 35 #define HB_OT_TAG_SVG HB_TAG(&#39;S&#39;,&#39;V&#39;,&#39;G&#39;,&#39; &#39;)
 36 
 37 
 38 namespace OT {
 39 
 40 
 41 struct SVGDocumentIndexEntry
 42 {
<a name="2" id="anc2"></a><span class="line-modified"> 43   friend struct SVG;</span>

 44 
<a name="3" id="anc3"></a><span class="line-modified"> 45   inline bool sanitize (hb_sanitize_context_t *c, const void* base) const</span>







 46   {
 47     TRACE_SANITIZE (this);
 48     return_trace (c-&gt;check_struct (this) &amp;&amp;
<a name="4" id="anc4"></a><span class="line-modified"> 49                   (base+svgDoc).sanitize (c, svgDocLength));</span>
 50   }
 51 
 52   protected:
 53   HBUINT16      startGlyphID;   /* The first glyph ID in the range described by
 54                                  * this index entry. */
 55   HBUINT16      endGlyphID;     /* The last glyph ID in the range described by
 56                                  * this index entry. Must be &gt;= startGlyphID. */
<a name="5" id="anc5"></a><span class="line-modified"> 57   LOffsetTo&lt;UnsizedArrayOf&lt;HBUINT8&gt; &gt;</span>
 58                 svgDoc;         /* Offset from the beginning of the SVG Document Index
 59                                  * to an SVG document. Must be non-zero. */
<a name="6" id="anc6"></a><span class="line-modified"> 60   HBUINT32 svgDocLength;        /* Length of the SVG document.</span>
 61                                  * Must be non-zero. */
 62   public:
 63   DEFINE_SIZE_STATIC (12);
 64 };
 65 
<a name="7" id="anc7"></a><span class="line-removed"> 66 struct SVGDocumentIndex</span>
<span class="line-removed"> 67 {</span>
<span class="line-removed"> 68   friend struct SVG;</span>
<span class="line-removed"> 69 </span>
<span class="line-removed"> 70   inline bool sanitize (hb_sanitize_context_t *c) const</span>
<span class="line-removed"> 71   {</span>
<span class="line-removed"> 72     TRACE_SANITIZE (this);</span>
<span class="line-removed"> 73     return_trace (c-&gt;check_struct (this) &amp;&amp;</span>
<span class="line-removed"> 74                   entries.sanitize (c, this));</span>
<span class="line-removed"> 75   }</span>
<span class="line-removed"> 76 </span>
<span class="line-removed"> 77   protected:</span>
<span class="line-removed"> 78   ArrayOf&lt;SVGDocumentIndexEntry&gt;</span>
<span class="line-removed"> 79                 entries;        /* Array of SVG Document Index Entries. */</span>
<span class="line-removed"> 80   public:</span>
<span class="line-removed"> 81   DEFINE_SIZE_ARRAY (2, entries);</span>
<span class="line-removed"> 82 };</span>
<span class="line-removed"> 83 </span>
 84 struct SVG
 85 {
<a name="8" id="anc8"></a><span class="line-modified"> 86   static const hb_tag_t tableTag = HB_OT_TAG_SVG;</span>
 87 
<a name="9" id="anc9"></a><span class="line-modified"> 88   inline bool sanitize (hb_sanitize_context_t *c) const</span>
<span class="line-removed"> 89   {</span>
<span class="line-removed"> 90     TRACE_SANITIZE (this);</span>
<span class="line-removed"> 91     return_trace (likely (c-&gt;check_struct (this) &amp;&amp;</span>
<span class="line-removed"> 92                           (this+svgDocIndex).sanitize (c)));</span>
<span class="line-removed"> 93   }</span>
 94 
 95   struct accelerator_t
 96   {
<a name="10" id="anc10"></a><span class="line-modified"> 97     inline void init (hb_face_t *face)</span>
<span class="line-modified"> 98     {</span>
<span class="line-modified"> 99       OT::Sanitizer&lt;OT::SVG&gt; sanitizer;</span>
<span class="line-removed">100       svg_blob = sanitizer.sanitize (face-&gt;reference_table (HB_OT_TAG_SVG));</span>
<span class="line-removed">101       svg_len = hb_blob_get_length (svg_blob);</span>
<span class="line-removed">102       svg = svg_blob-&gt;as&lt;OT::SVG&gt; ();</span>
<span class="line-removed">103 </span>
<span class="line-removed">104     }</span>
105 
<a name="11" id="anc11"></a><span class="line-modified">106     inline void fini (void)</span>
107     {
<a name="12" id="anc12"></a><span class="line-modified">108       hb_blob_destroy (svg_blob);</span>

109     }
110 
<a name="13" id="anc13"></a><span class="line-modified">111     inline void</span>
<span class="line-removed">112     dump (void (*callback) (const uint8_t* data, unsigned int length,</span>
<span class="line-removed">113                             unsigned int start_glyph, unsigned int end_glyph)) const</span>
<span class="line-removed">114     {</span>
<span class="line-removed">115       const SVGDocumentIndex &amp;index = svg+svg-&gt;svgDocIndex;</span>
<span class="line-removed">116       const ArrayOf&lt;SVGDocumentIndexEntry&gt; &amp;entries = index.entries;</span>
<span class="line-removed">117       for (unsigned int i = 0; i &lt; entries.len; ++i)</span>
<span class="line-removed">118       {</span>
<span class="line-removed">119         const SVGDocumentIndexEntry &amp;entry = entries[i];</span>
<span class="line-removed">120         callback ((const uint8_t*) &amp;entry.svgDoc (&amp;index), entry.svgDocLength,</span>
<span class="line-removed">121                                                   entry.startGlyphID, entry.endGlyphID);</span>
<span class="line-removed">122       }</span>
<span class="line-removed">123     }</span>
124 
125     private:
<a name="14" id="anc14"></a><span class="line-modified">126     hb_blob_t *svg_blob;</span>
<span class="line-removed">127     const SVG *svg;</span>
<span class="line-removed">128 </span>
<span class="line-removed">129     unsigned int svg_len;</span>
130   };
131 
<a name="15" id="anc15"></a>









132   protected:
133   HBUINT16      version;        /* Table version (starting at 0). */
<a name="16" id="anc16"></a><span class="line-modified">134   LOffsetTo&lt;SVGDocumentIndex&gt;</span>
<span class="line-modified">135                 svgDocIndex;    /* Offset (relative to the start of the SVG table) to the</span>
136                                  * SVG Documents Index. Must be non-zero. */
<a name="17" id="anc17"></a>
137   HBUINT32      reserved;       /* Set to 0. */
138   public:
139   DEFINE_SIZE_STATIC (10);
140 };
141 
<a name="18" id="anc18"></a>

142 } /* namespace OT */
143 
144 
145 #endif /* HB_OT_COLOR_SVG_TABLE_HH */
<a name="19" id="anc19"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="19" type="hidden" />
</body>
</html>