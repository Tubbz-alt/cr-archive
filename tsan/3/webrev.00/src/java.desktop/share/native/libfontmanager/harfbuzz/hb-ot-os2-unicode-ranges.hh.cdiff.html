<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-os2-unicode-ranges.hh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="hb-ot-os2-table.hh.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-post-macroman.hh.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-os2-unicode-ranges.hh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,23 ***</span>
   */
  
  #ifndef HB_OT_OS2_UNICODE_RANGES_HH
  #define HB_OT_OS2_UNICODE_RANGES_HH
  
<span class="line-modified">! #include &quot;hb-private.hh&quot;</span>
<span class="line-removed">- #include &quot;hb-dsalgs.hh&quot;</span>
  
  namespace OT {
  
<span class="line-modified">! struct Range {</span>
    hb_codepoint_t start;
    hb_codepoint_t end;
    unsigned int bit;
  };
  
<span class="line-modified">! /* Note: The contents of this array was generated using src/gen-unicode-ranges.py. */</span>
<span class="line-modified">! static Range os2UnicodeRangesSorted[] =</span>
  {
    {     0x0,     0x7F,   0}, // Basic Latin
    {    0x80,     0xFF,   1}, // Latin-1 Supplement
    {   0x100,    0x17F,   2}, // Latin Extended-A
    {   0x180,    0x24F,   3}, // Latin Extended-B
<span class="line-new-header">--- 25,37 ---</span>
   */
  
  #ifndef HB_OT_OS2_UNICODE_RANGES_HH
  #define HB_OT_OS2_UNICODE_RANGES_HH
  
<span class="line-modified">! #include &quot;hb.hh&quot;</span>
  
  namespace OT {
  
<span class="line-modified">! struct OS2Range</span>
<span class="line-added">+ {</span>
<span class="line-added">+   static int</span>
<span class="line-added">+   cmp (const void *_key, const void *_item)</span>
<span class="line-added">+   {</span>
<span class="line-added">+     hb_codepoint_t cp = *((hb_codepoint_t *) _key);</span>
<span class="line-added">+     const OS2Range *range = (OS2Range *) _item;</span>
<span class="line-added">+ </span>
<span class="line-added">+     if (cp &lt; range-&gt;start)</span>
<span class="line-added">+       return -1;</span>
<span class="line-added">+     else if (cp &lt;= range-&gt;end)</span>
<span class="line-added">+       return 0;</span>
<span class="line-added">+     else</span>
<span class="line-added">+       return +1;</span>
<span class="line-added">+   }</span>
<span class="line-added">+ </span>
    hb_codepoint_t start;
    hb_codepoint_t end;
    unsigned int bit;
  };
  
<span class="line-modified">! /* Note: The contents of this array was generated using gen-os2-unicode-ranges.py. */</span>
<span class="line-modified">! static const OS2Range _hb_os2_unicode_ranges[] =</span>
  {
    {     0x0,     0x7F,   0}, // Basic Latin
    {    0x80,     0xFF,   1}, // Latin-1 Supplement
    {   0x100,    0x17F,   2}, // Latin Extended-A
    {   0x180,    0x24F,   3}, // Latin Extended-B
</pre>
<hr />
<pre>
<span class="line-old-header">*** 210,35 ***</span>
    { 0xE0100,  0xE01EF,  91}, // Variation Selectors Supplement
    { 0xF0000,  0xFFFFD,  90}, // Private Use (plane 15)
    {0x100000, 0x10FFFD,  90}, // Private Use (plane 16)
  };
  
<span class="line-removed">- static int</span>
<span class="line-removed">- _compare_range (const void *_key, const void *_item, void *_arg)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-   hb_codepoint_t cp = *((hb_codepoint_t *) _key);</span>
<span class="line-removed">-   const Range *range = (Range *) _item;</span>
<span class="line-removed">- </span>
<span class="line-removed">-   if (cp &lt; range-&gt;start)</span>
<span class="line-removed">-     return -1;</span>
<span class="line-removed">-   else if (cp &lt;= range-&gt;end)</span>
<span class="line-removed">-     return 0;</span>
<span class="line-removed">-   else</span>
<span class="line-removed">-     return 1;</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  /**
<span class="line-modified">!  * hb_get_unicode_range_bit:</span>
<span class="line-modified">!  * Returns the bit to be set in os/2 ulUnicodeRange for a given codepoint.</span>
   **/
  static unsigned int
<span class="line-modified">! hb_get_unicode_range_bit (hb_codepoint_t cp)</span>
  {
<span class="line-modified">!   Range *range = (Range*) hb_bsearch_r (&amp;cp, os2UnicodeRangesSorted,</span>
<span class="line-modified">!                                         sizeof (os2UnicodeRangesSorted) / sizeof(Range),</span>
<span class="line-modified">!                                         sizeof(Range),</span>
<span class="line-modified">!                                         _compare_range, nullptr);</span>
    if (range != nullptr)
      return range-&gt;bit;
    return -1;
  }
  
<span class="line-new-header">--- 224,21 ---</span>
    { 0xE0100,  0xE01EF,  91}, // Variation Selectors Supplement
    { 0xF0000,  0xFFFFD,  90}, // Private Use (plane 15)
    {0x100000, 0x10FFFD,  90}, // Private Use (plane 16)
  };
  
  /**
<span class="line-modified">!  * _hb_ot_os2_get_unicode_range_bit:</span>
<span class="line-modified">!  * Returns the bit to be set in os/2 ulUnicodeOS2Range for a given codepoint.</span>
   **/
  static unsigned int
<span class="line-modified">! _hb_ot_os2_get_unicode_range_bit (hb_codepoint_t cp)</span>
  {
<span class="line-modified">!   OS2Range *range = (OS2Range*) hb_bsearch (&amp;cp, _hb_os2_unicode_ranges,</span>
<span class="line-modified">!                                             ARRAY_LENGTH (_hb_os2_unicode_ranges),</span>
<span class="line-modified">!                                             sizeof (OS2Range),</span>
<span class="line-modified">!                                             OS2Range::cmp);</span>
    if (range != nullptr)
      return range-&gt;bit;
    return -1;
  }
  
</pre>
<center><a href="hb-ot-os2-table.hh.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-post-macroman.hh.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>