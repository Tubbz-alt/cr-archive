<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-layout-jstf-table.hh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="hb-ot-layout-gsub-table.hh.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-layout.cc.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-layout-jstf-table.hh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 10  * all copies of this software.
 11  *
 12  * IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR
 13  * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
 14  * ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN
 15  * IF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 16  * DAMAGE.
 17  *
 18  * THE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,
 19  * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 20  * FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
 21  * ON AN &quot;AS IS&quot; BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO
 22  * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
 23  *
 24  * Google Author(s): Behdad Esfahbod
 25  */
 26 
 27 #ifndef HB_OT_LAYOUT_JSTF_TABLE_HH
 28 #define HB_OT_LAYOUT_JSTF_TABLE_HH
 29 
<span class="line-modified"> 30 #include &quot;hb-open-type-private.hh&quot;</span>
 31 #include &quot;hb-ot-layout-gpos-table.hh&quot;
 32 
 33 
 34 namespace OT {
 35 
 36 
 37 /*
 38  * JstfModList -- Justification Modification List Tables
 39  */
 40 
 41 typedef IndexArray JstfModList;
 42 
 43 
 44 /*
 45  * JstfMax -- Justification Maximum Table
 46  */
 47 
 48 typedef OffsetListOf&lt;PosLookup&gt; JstfMax;
 49 
 50 
 51 /*
 52  * JstfPriority -- Justification Priority Table
 53  */
 54 
 55 struct JstfPriority
 56 {
<span class="line-modified"> 57   inline bool sanitize (hb_sanitize_context_t *c) const</span>
 58   {
 59     TRACE_SANITIZE (this);
 60     return_trace (c-&gt;check_struct (this) &amp;&amp;
 61                   shrinkageEnableGSUB.sanitize (c, this) &amp;&amp;
 62                   shrinkageDisableGSUB.sanitize (c, this) &amp;&amp;
 63                   shrinkageEnableGPOS.sanitize (c, this) &amp;&amp;
 64                   shrinkageDisableGPOS.sanitize (c, this) &amp;&amp;
 65                   shrinkageJstfMax.sanitize (c, this) &amp;&amp;
 66                   extensionEnableGSUB.sanitize (c, this) &amp;&amp;
 67                   extensionDisableGSUB.sanitize (c, this) &amp;&amp;
 68                   extensionEnableGPOS.sanitize (c, this) &amp;&amp;
 69                   extensionDisableGPOS.sanitize (c, this) &amp;&amp;
 70                   extensionJstfMax.sanitize (c, this));
 71   }
 72 
 73   protected:
 74   OffsetTo&lt;JstfModList&gt;
 75                 shrinkageEnableGSUB;    /* Offset to Shrinkage Enable GSUB
 76                                          * JstfModList table--from beginning of
 77                                          * JstfPriority table--may be NULL */
</pre>
<hr />
<pre>
106   OffsetTo&lt;JstfModList&gt;
107                 extensionDisableGPOS;   /* Offset to Extension Disable GPOS
108                                          * JstfModList table--from beginning of
109                                          * JstfPriority table--may be NULL */
110   OffsetTo&lt;JstfMax&gt;
111                 extensionJstfMax;       /* Offset to Extension JstfMax table--
112                                          * from beginning of JstfPriority table
113                                          * --may be NULL */
114 
115   public:
116   DEFINE_SIZE_STATIC (20);
117 };
118 
119 
120 /*
121  * JstfLangSys -- Justification Language System Table
122  */
123 
124 struct JstfLangSys : OffsetListOf&lt;JstfPriority&gt;
125 {
<span class="line-modified">126   inline bool sanitize (hb_sanitize_context_t *c,</span>
<span class="line-modified">127                         const Record&lt;JstfLangSys&gt;::sanitize_closure_t * = nullptr) const</span>
128   {
129     TRACE_SANITIZE (this);
130     return_trace (OffsetListOf&lt;JstfPriority&gt;::sanitize (c));
131   }
132 };
133 
134 
135 /*
136  * ExtenderGlyphs -- Extender Glyph Table
137  */
138 
139 typedef SortedArrayOf&lt;GlyphID&gt; ExtenderGlyphs;
140 
141 
142 /*
143  * JstfScript -- The Justification Table
144  */
145 
146 struct JstfScript
147 {
<span class="line-modified">148   inline unsigned int get_lang_sys_count (void) const</span>
149   { return langSys.len; }
<span class="line-modified">150   inline const Tag&amp; get_lang_sys_tag (unsigned int i) const</span>
151   { return langSys.get_tag (i); }
<span class="line-modified">152   inline unsigned int get_lang_sys_tags (unsigned int start_offset,</span>
<span class="line-modified">153                                          unsigned int *lang_sys_count /* IN/OUT */,</span>
<span class="line-modified">154                                          hb_tag_t     *lang_sys_tags /* OUT */) const</span>
155   { return langSys.get_tags (start_offset, lang_sys_count, lang_sys_tags); }
<span class="line-modified">156   inline const JstfLangSys&amp; get_lang_sys (unsigned int i) const</span>
157   {
158     if (i == Index::NOT_FOUND_INDEX) return get_default_lang_sys ();
159     return this+langSys[i].offset;
160   }
<span class="line-modified">161   inline bool find_lang_sys_index (hb_tag_t tag, unsigned int *index) const</span>
162   { return langSys.find_index (tag, index); }
163 
<span class="line-modified">164   inline bool has_default_lang_sys (void) const { return defaultLangSys != 0; }</span>
<span class="line-modified">165   inline const JstfLangSys&amp; get_default_lang_sys (void) const { return this+defaultLangSys; }</span>
166 
<span class="line-modified">167   inline bool sanitize (hb_sanitize_context_t *c,</span>
<span class="line-modified">168                         const Record&lt;JstfScript&gt;::sanitize_closure_t * = nullptr) const</span>
169   {
170     TRACE_SANITIZE (this);
171     return_trace (extenderGlyphs.sanitize (c, this) &amp;&amp;
172                   defaultLangSys.sanitize (c, this) &amp;&amp;
173                   langSys.sanitize (c, this));
174   }
175 
176   protected:
177   OffsetTo&lt;ExtenderGlyphs&gt;
178                 extenderGlyphs; /* Offset to ExtenderGlyph table--from beginning
179                                  * of JstfScript table-may be NULL */
180   OffsetTo&lt;JstfLangSys&gt;
181                 defaultLangSys; /* Offset to DefaultJstfLangSys table--from
182                                  * beginning of JstfScript table--may be Null */
183   RecordArrayOf&lt;JstfLangSys&gt;
184                 langSys;        /* Array of JstfLangSysRecords--listed
185                                  * alphabetically by LangSysTag */
186   public:
187   DEFINE_SIZE_ARRAY (6, langSys);
188 };
189 
190 
191 /*
192  * JSTF -- Justification
193  * https://docs.microsoft.com/en-us/typography/opentype/spec/jstf
194  */
195 
196 struct JSTF
197 {
<span class="line-modified">198   static const hb_tag_t tableTag        = HB_OT_TAG_JSTF;</span>
199 
<span class="line-modified">200   inline unsigned int get_script_count (void) const</span>
201   { return scriptList.len; }
<span class="line-modified">202   inline const Tag&amp; get_script_tag (unsigned int i) const</span>
203   { return scriptList.get_tag (i); }
<span class="line-modified">204   inline unsigned int get_script_tags (unsigned int start_offset,</span>
<span class="line-modified">205                                        unsigned int *script_count /* IN/OUT */,</span>
<span class="line-modified">206                                        hb_tag_t     *script_tags /* OUT */) const</span>
207   { return scriptList.get_tags (start_offset, script_count, script_tags); }
<span class="line-modified">208   inline const JstfScript&amp; get_script (unsigned int i) const</span>
209   { return this+scriptList[i].offset; }
<span class="line-modified">210   inline bool find_script_index (hb_tag_t tag, unsigned int *index) const</span>
211   { return scriptList.find_index (tag, index); }
212 
<span class="line-modified">213   inline bool sanitize (hb_sanitize_context_t *c) const</span>
214   {
215     TRACE_SANITIZE (this);
216     return_trace (version.sanitize (c) &amp;&amp;
217                   likely (version.major == 1) &amp;&amp;
218                   scriptList.sanitize (c, this));
219   }
220 
221   protected:
222   FixedVersion&lt;&gt;version;        /* Version of the JSTF table--initially set
223                                  * to 0x00010000u */
224   RecordArrayOf&lt;JstfScript&gt;
225                 scriptList;     /* Array of JstfScripts--listed
226                                  * alphabetically by ScriptTag */
227   public:
228   DEFINE_SIZE_ARRAY (6, scriptList);
229 };
230 
231 
232 } /* namespace OT */
233 
</pre>
</td>
<td>
<hr />
<pre>
 10  * all copies of this software.
 11  *
 12  * IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR
 13  * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
 14  * ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN
 15  * IF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 16  * DAMAGE.
 17  *
 18  * THE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,
 19  * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 20  * FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
 21  * ON AN &quot;AS IS&quot; BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO
 22  * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
 23  *
 24  * Google Author(s): Behdad Esfahbod
 25  */
 26 
 27 #ifndef HB_OT_LAYOUT_JSTF_TABLE_HH
 28 #define HB_OT_LAYOUT_JSTF_TABLE_HH
 29 
<span class="line-modified"> 30 #include &quot;hb-open-type.hh&quot;</span>
 31 #include &quot;hb-ot-layout-gpos-table.hh&quot;
 32 
 33 
 34 namespace OT {
 35 
 36 
 37 /*
 38  * JstfModList -- Justification Modification List Tables
 39  */
 40 
 41 typedef IndexArray JstfModList;
 42 
 43 
 44 /*
 45  * JstfMax -- Justification Maximum Table
 46  */
 47 
 48 typedef OffsetListOf&lt;PosLookup&gt; JstfMax;
 49 
 50 
 51 /*
 52  * JstfPriority -- Justification Priority Table
 53  */
 54 
 55 struct JstfPriority
 56 {
<span class="line-modified"> 57   bool sanitize (hb_sanitize_context_t *c) const</span>
 58   {
 59     TRACE_SANITIZE (this);
 60     return_trace (c-&gt;check_struct (this) &amp;&amp;
 61                   shrinkageEnableGSUB.sanitize (c, this) &amp;&amp;
 62                   shrinkageDisableGSUB.sanitize (c, this) &amp;&amp;
 63                   shrinkageEnableGPOS.sanitize (c, this) &amp;&amp;
 64                   shrinkageDisableGPOS.sanitize (c, this) &amp;&amp;
 65                   shrinkageJstfMax.sanitize (c, this) &amp;&amp;
 66                   extensionEnableGSUB.sanitize (c, this) &amp;&amp;
 67                   extensionDisableGSUB.sanitize (c, this) &amp;&amp;
 68                   extensionEnableGPOS.sanitize (c, this) &amp;&amp;
 69                   extensionDisableGPOS.sanitize (c, this) &amp;&amp;
 70                   extensionJstfMax.sanitize (c, this));
 71   }
 72 
 73   protected:
 74   OffsetTo&lt;JstfModList&gt;
 75                 shrinkageEnableGSUB;    /* Offset to Shrinkage Enable GSUB
 76                                          * JstfModList table--from beginning of
 77                                          * JstfPriority table--may be NULL */
</pre>
<hr />
<pre>
106   OffsetTo&lt;JstfModList&gt;
107                 extensionDisableGPOS;   /* Offset to Extension Disable GPOS
108                                          * JstfModList table--from beginning of
109                                          * JstfPriority table--may be NULL */
110   OffsetTo&lt;JstfMax&gt;
111                 extensionJstfMax;       /* Offset to Extension JstfMax table--
112                                          * from beginning of JstfPriority table
113                                          * --may be NULL */
114 
115   public:
116   DEFINE_SIZE_STATIC (20);
117 };
118 
119 
120 /*
121  * JstfLangSys -- Justification Language System Table
122  */
123 
124 struct JstfLangSys : OffsetListOf&lt;JstfPriority&gt;
125 {
<span class="line-modified">126   bool sanitize (hb_sanitize_context_t *c,</span>
<span class="line-modified">127                  const Record_sanitize_closure_t * = nullptr) const</span>
128   {
129     TRACE_SANITIZE (this);
130     return_trace (OffsetListOf&lt;JstfPriority&gt;::sanitize (c));
131   }
132 };
133 
134 
135 /*
136  * ExtenderGlyphs -- Extender Glyph Table
137  */
138 
139 typedef SortedArrayOf&lt;GlyphID&gt; ExtenderGlyphs;
140 
141 
142 /*
143  * JstfScript -- The Justification Table
144  */
145 
146 struct JstfScript
147 {
<span class="line-modified">148   unsigned int get_lang_sys_count () const</span>
149   { return langSys.len; }
<span class="line-modified">150   const Tag&amp; get_lang_sys_tag (unsigned int i) const</span>
151   { return langSys.get_tag (i); }
<span class="line-modified">152   unsigned int get_lang_sys_tags (unsigned int start_offset,</span>
<span class="line-modified">153                                   unsigned int *lang_sys_count /* IN/OUT */,</span>
<span class="line-modified">154                                   hb_tag_t     *lang_sys_tags /* OUT */) const</span>
155   { return langSys.get_tags (start_offset, lang_sys_count, lang_sys_tags); }
<span class="line-modified">156   const JstfLangSys&amp; get_lang_sys (unsigned int i) const</span>
157   {
158     if (i == Index::NOT_FOUND_INDEX) return get_default_lang_sys ();
159     return this+langSys[i].offset;
160   }
<span class="line-modified">161   bool find_lang_sys_index (hb_tag_t tag, unsigned int *index) const</span>
162   { return langSys.find_index (tag, index); }
163 
<span class="line-modified">164   bool has_default_lang_sys () const               { return defaultLangSys != 0; }</span>
<span class="line-modified">165   const JstfLangSys&amp; get_default_lang_sys () const { return this+defaultLangSys; }</span>
166 
<span class="line-modified">167   bool sanitize (hb_sanitize_context_t *c,</span>
<span class="line-modified">168                  const Record_sanitize_closure_t * = nullptr) const</span>
169   {
170     TRACE_SANITIZE (this);
171     return_trace (extenderGlyphs.sanitize (c, this) &amp;&amp;
172                   defaultLangSys.sanitize (c, this) &amp;&amp;
173                   langSys.sanitize (c, this));
174   }
175 
176   protected:
177   OffsetTo&lt;ExtenderGlyphs&gt;
178                 extenderGlyphs; /* Offset to ExtenderGlyph table--from beginning
179                                  * of JstfScript table-may be NULL */
180   OffsetTo&lt;JstfLangSys&gt;
181                 defaultLangSys; /* Offset to DefaultJstfLangSys table--from
182                                  * beginning of JstfScript table--may be Null */
183   RecordArrayOf&lt;JstfLangSys&gt;
184                 langSys;        /* Array of JstfLangSysRecords--listed
185                                  * alphabetically by LangSysTag */
186   public:
187   DEFINE_SIZE_ARRAY (6, langSys);
188 };
189 
190 
191 /*
192  * JSTF -- Justification
193  * https://docs.microsoft.com/en-us/typography/opentype/spec/jstf
194  */
195 
196 struct JSTF
197 {
<span class="line-modified">198   static constexpr hb_tag_t tableTag = HB_OT_TAG_JSTF;</span>
199 
<span class="line-modified">200   unsigned int get_script_count () const</span>
201   { return scriptList.len; }
<span class="line-modified">202   const Tag&amp; get_script_tag (unsigned int i) const</span>
203   { return scriptList.get_tag (i); }
<span class="line-modified">204   unsigned int get_script_tags (unsigned int start_offset,</span>
<span class="line-modified">205                                 unsigned int *script_count /* IN/OUT */,</span>
<span class="line-modified">206                                 hb_tag_t     *script_tags /* OUT */) const</span>
207   { return scriptList.get_tags (start_offset, script_count, script_tags); }
<span class="line-modified">208   const JstfScript&amp; get_script (unsigned int i) const</span>
209   { return this+scriptList[i].offset; }
<span class="line-modified">210   bool find_script_index (hb_tag_t tag, unsigned int *index) const</span>
211   { return scriptList.find_index (tag, index); }
212 
<span class="line-modified">213   bool sanitize (hb_sanitize_context_t *c) const</span>
214   {
215     TRACE_SANITIZE (this);
216     return_trace (version.sanitize (c) &amp;&amp;
217                   likely (version.major == 1) &amp;&amp;
218                   scriptList.sanitize (c, this));
219   }
220 
221   protected:
222   FixedVersion&lt;&gt;version;        /* Version of the JSTF table--initially set
223                                  * to 0x00010000u */
224   RecordArrayOf&lt;JstfScript&gt;
225                 scriptList;     /* Array of JstfScripts--listed
226                                  * alphabetically by ScriptTag */
227   public:
228   DEFINE_SIZE_ARRAY (6, scriptList);
229 };
230 
231 
232 } /* namespace OT */
233 
</pre>
</td>
</tr>
</table>
<center><a href="hb-ot-layout-gsub-table.hh.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-layout.cc.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>