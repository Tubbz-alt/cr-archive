<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-shape-complex-myanmar-machine.hh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="hb-ot-shape-complex-khmer.cc.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-shape-complex-myanmar.cc.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-shape-complex-myanmar-machine.hh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 12  * all copies of this software.
 13  *
 14  * IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR
 15  * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
 16  * ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN
 17  * IF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 18  * DAMAGE.
 19  *
 20  * THE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,
 21  * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 22  * FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
 23  * ON AN &quot;AS IS&quot; BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO
 24  * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
 25  *
 26  * Google Author(s): Behdad Esfahbod
 27  */
 28 
 29 #ifndef HB_OT_SHAPE_COMPLEX_MYANMAR_MACHINE_HH
 30 #define HB_OT_SHAPE_COMPLEX_MYANMAR_MACHINE_HH
 31 
<span class="line-modified"> 32 #include &quot;hb-private.hh&quot;</span>
 33 
 34 
 35 #line 36 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;
 36 static const unsigned char _myanmar_syllable_machine_trans_keys[] = {
 37         1u, 32u, 3u, 30u, 5u, 29u, 5u, 8u, 5u, 29u, 3u, 25u, 5u, 25u, 5u, 25u,
 38         3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u, 1u, 16u, 3u, 29u, 3u, 29u, 3u, 29u,
 39         3u, 29u, 3u, 29u, 3u, 30u, 3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u, 5u, 29u,
 40         5u, 8u, 5u, 29u, 3u, 25u, 5u, 25u, 5u, 25u, 3u, 29u, 3u, 29u, 3u, 29u,
 41         3u, 29u, 3u, 30u, 3u, 29u, 1u, 32u, 3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u,
 42         3u, 29u, 3u, 30u, 3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u, 1u, 32u, 8u, 8u,
 43         0
 44 };
 45 
 46 static const char _myanmar_syllable_machine_key_spans[] = {
 47         32, 28, 25, 4, 25, 23, 21, 21,
 48         27, 27, 27, 27, 16, 27, 27, 27,
 49         27, 27, 28, 27, 27, 27, 27, 25,
 50         4, 25, 23, 21, 21, 27, 27, 27,
 51         27, 28, 27, 32, 27, 27, 27, 27,
 52         27, 28, 27, 27, 27, 27, 32, 1
</pre>
<hr />
<pre>
266         45, 22, 22, 45, 45, 45, 45, 45,
267         45, 45, 45, 45, 45, 45, 54, 54
268 };
269 
270 static const int myanmar_syllable_machine_start = 0;
271 static const int myanmar_syllable_machine_first_final = 0;
272 static const int myanmar_syllable_machine_error = -1;
273 
274 static const int myanmar_syllable_machine_en_main = 0;
275 
276 
277 #line 36 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
278 
279 
280 
281 #line 94 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
282 
283 
284 #define found_syllable(syllable_type) \
285   HB_STMT_START { \
<span class="line-modified">286     if (0) fprintf (stderr, &quot;syllable %d..%d %s\n&quot;, last, p+1, #syllable_type); \</span>
<span class="line-modified">287     for (unsigned int i = last; i &lt; p+1; i++) \</span>
288       info[i].syllable() = (syllable_serial &lt;&lt; 4) | syllable_type; \
<span class="line-removed">289     last = p+1; \</span>
290     syllable_serial++; \
291     if (unlikely (syllable_serial == 16)) syllable_serial = 1; \
292   } HB_STMT_END
293 
294 static void
295 find_syllables (hb_buffer_t *buffer)
296 {
<span class="line-modified">297   unsigned int p, pe, eof, ts HB_UNUSED, te HB_UNUSED, act HB_UNUSED;</span>
298   int cs;
299   hb_glyph_info_t *info = buffer-&gt;info;
300 
<span class="line-modified">301 #line 302 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
302         {
303         cs = myanmar_syllable_machine_start;
304         ts = 0;
305         te = 0;
306         act = 0;
307         }
308 
<span class="line-modified">309 #line 115 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;</span>
310 
311 
312   p = 0;
313   pe = eof = buffer-&gt;len;
314 
<span class="line-removed">315   unsigned int last = 0;</span>
316   unsigned int syllable_serial = 1;
317 
<span class="line-modified">318 #line 319 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
319         {
320         int _slen;
321         int _trans;
322         const unsigned char *_keys;
323         const char *_inds;
324         if ( p == pe )
325                 goto _test_eof;
326 _resume:
327         switch ( _myanmar_syllable_machine_from_state_actions[cs] ) {
328         case 2:
329 #line 1 &quot;NONE&quot;
330         {ts = p;}
331         break;
<span class="line-modified">332 #line 333 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
333         }
334 
335         _keys = _myanmar_syllable_machine_trans_keys + (cs&lt;&lt;1);
336         _inds = _myanmar_syllable_machine_indicies + _myanmar_syllable_machine_index_offsets[cs];
337 
338         _slen = _myanmar_syllable_machine_key_spans[cs];
339         _trans = _inds[ _slen &gt; 0 &amp;&amp; _keys[0] &lt;=( info[p].myanmar_category()) &amp;&amp;
340                 ( info[p].myanmar_category()) &lt;= _keys[1] ?
341                 ( info[p].myanmar_category()) - _keys[0] : _slen ];
342 
343 _eof_trans:
344         cs = _myanmar_syllable_machine_trans_targs[_trans];
345 
346         if ( _myanmar_syllable_machine_trans_actions[_trans] == 0 )
347                 goto _again;
348 
349         switch ( _myanmar_syllable_machine_trans_actions[_trans] ) {
350         case 7:
351 #line 86 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
352         {te = p+1;{ found_syllable (consonant_syllable); }}
</pre>
<hr />
<pre>
362         case 4:
363 #line 89 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
364         {te = p+1;{ found_syllable (broken_cluster); }}
365         break;
366         case 3:
367 #line 90 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
368         {te = p+1;{ found_syllable (non_myanmar_cluster); }}
369         break;
370         case 6:
371 #line 86 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
372         {te = p;p--;{ found_syllable (consonant_syllable); }}
373         break;
374         case 8:
375 #line 89 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
376         {te = p;p--;{ found_syllable (broken_cluster); }}
377         break;
378         case 9:
379 #line 90 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
380         {te = p;p--;{ found_syllable (non_myanmar_cluster); }}
381         break;
<span class="line-modified">382 #line 383 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
383         }
384 
385 _again:
386         switch ( _myanmar_syllable_machine_to_state_actions[cs] ) {
387         case 1:
388 #line 1 &quot;NONE&quot;
389         {ts = 0;}
390         break;
<span class="line-modified">391 #line 392 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
392         }
393 
394         if ( ++p != pe )
395                 goto _resume;
396         _test_eof: {}
397         if ( p == eof )
398         {
399         if ( _myanmar_syllable_machine_eof_trans[cs] &gt; 0 ) {
400                 _trans = _myanmar_syllable_machine_eof_trans[cs] - 1;
401                 goto _eof_trans;
402         }
403         }
404 
405         }
406 
<span class="line-modified">407 #line 124 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;</span>
408 
409 }
410 
411 #undef found_syllable
412 
413 #endif /* HB_OT_SHAPE_COMPLEX_MYANMAR_MACHINE_HH */
</pre>
</td>
<td>
<hr />
<pre>
 12  * all copies of this software.
 13  *
 14  * IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR
 15  * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
 16  * ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN
 17  * IF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 18  * DAMAGE.
 19  *
 20  * THE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,
 21  * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 22  * FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
 23  * ON AN &quot;AS IS&quot; BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO
 24  * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
 25  *
 26  * Google Author(s): Behdad Esfahbod
 27  */
 28 
 29 #ifndef HB_OT_SHAPE_COMPLEX_MYANMAR_MACHINE_HH
 30 #define HB_OT_SHAPE_COMPLEX_MYANMAR_MACHINE_HH
 31 
<span class="line-modified"> 32 #include &quot;hb.hh&quot;</span>
 33 
 34 
 35 #line 36 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;
 36 static const unsigned char _myanmar_syllable_machine_trans_keys[] = {
 37         1u, 32u, 3u, 30u, 5u, 29u, 5u, 8u, 5u, 29u, 3u, 25u, 5u, 25u, 5u, 25u,
 38         3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u, 1u, 16u, 3u, 29u, 3u, 29u, 3u, 29u,
 39         3u, 29u, 3u, 29u, 3u, 30u, 3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u, 5u, 29u,
 40         5u, 8u, 5u, 29u, 3u, 25u, 5u, 25u, 5u, 25u, 3u, 29u, 3u, 29u, 3u, 29u,
 41         3u, 29u, 3u, 30u, 3u, 29u, 1u, 32u, 3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u,
 42         3u, 29u, 3u, 30u, 3u, 29u, 3u, 29u, 3u, 29u, 3u, 29u, 1u, 32u, 8u, 8u,
 43         0
 44 };
 45 
 46 static const char _myanmar_syllable_machine_key_spans[] = {
 47         32, 28, 25, 4, 25, 23, 21, 21,
 48         27, 27, 27, 27, 16, 27, 27, 27,
 49         27, 27, 28, 27, 27, 27, 27, 25,
 50         4, 25, 23, 21, 21, 27, 27, 27,
 51         27, 28, 27, 32, 27, 27, 27, 27,
 52         27, 28, 27, 27, 27, 27, 32, 1
</pre>
<hr />
<pre>
266         45, 22, 22, 45, 45, 45, 45, 45,
267         45, 45, 45, 45, 45, 45, 54, 54
268 };
269 
270 static const int myanmar_syllable_machine_start = 0;
271 static const int myanmar_syllable_machine_first_final = 0;
272 static const int myanmar_syllable_machine_error = -1;
273 
274 static const int myanmar_syllable_machine_en_main = 0;
275 
276 
277 #line 36 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
278 
279 
280 
281 #line 94 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
282 
283 
284 #define found_syllable(syllable_type) \
285   HB_STMT_START { \
<span class="line-modified">286     if (0) fprintf (stderr, &quot;syllable %d..%d %s\n&quot;, ts, te, #syllable_type); \</span>
<span class="line-modified">287     for (unsigned int i = ts; i &lt; te; i++) \</span>
288       info[i].syllable() = (syllable_serial &lt;&lt; 4) | syllable_type; \

289     syllable_serial++; \
290     if (unlikely (syllable_serial == 16)) syllable_serial = 1; \
291   } HB_STMT_END
292 
293 static void
294 find_syllables (hb_buffer_t *buffer)
295 {
<span class="line-modified">296   unsigned int p, pe, eof, ts, te, act HB_UNUSED;</span>
297   int cs;
298   hb_glyph_info_t *info = buffer-&gt;info;
299 
<span class="line-modified">300 #line 301 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
301         {
302         cs = myanmar_syllable_machine_start;
303         ts = 0;
304         te = 0;
305         act = 0;
306         }
307 
<span class="line-modified">308 #line 114 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;</span>
309 
310 
311   p = 0;
312   pe = eof = buffer-&gt;len;
313 

314   unsigned int syllable_serial = 1;
315 
<span class="line-modified">316 #line 317 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
317         {
318         int _slen;
319         int _trans;
320         const unsigned char *_keys;
321         const char *_inds;
322         if ( p == pe )
323                 goto _test_eof;
324 _resume:
325         switch ( _myanmar_syllable_machine_from_state_actions[cs] ) {
326         case 2:
327 #line 1 &quot;NONE&quot;
328         {ts = p;}
329         break;
<span class="line-modified">330 #line 331 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
331         }
332 
333         _keys = _myanmar_syllable_machine_trans_keys + (cs&lt;&lt;1);
334         _inds = _myanmar_syllable_machine_indicies + _myanmar_syllable_machine_index_offsets[cs];
335 
336         _slen = _myanmar_syllable_machine_key_spans[cs];
337         _trans = _inds[ _slen &gt; 0 &amp;&amp; _keys[0] &lt;=( info[p].myanmar_category()) &amp;&amp;
338                 ( info[p].myanmar_category()) &lt;= _keys[1] ?
339                 ( info[p].myanmar_category()) - _keys[0] : _slen ];
340 
341 _eof_trans:
342         cs = _myanmar_syllable_machine_trans_targs[_trans];
343 
344         if ( _myanmar_syllable_machine_trans_actions[_trans] == 0 )
345                 goto _again;
346 
347         switch ( _myanmar_syllable_machine_trans_actions[_trans] ) {
348         case 7:
349 #line 86 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
350         {te = p+1;{ found_syllable (consonant_syllable); }}
</pre>
<hr />
<pre>
360         case 4:
361 #line 89 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
362         {te = p+1;{ found_syllable (broken_cluster); }}
363         break;
364         case 3:
365 #line 90 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
366         {te = p+1;{ found_syllable (non_myanmar_cluster); }}
367         break;
368         case 6:
369 #line 86 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
370         {te = p;p--;{ found_syllable (consonant_syllable); }}
371         break;
372         case 8:
373 #line 89 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
374         {te = p;p--;{ found_syllable (broken_cluster); }}
375         break;
376         case 9:
377 #line 90 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;
378         {te = p;p--;{ found_syllable (non_myanmar_cluster); }}
379         break;
<span class="line-modified">380 #line 381 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
381         }
382 
383 _again:
384         switch ( _myanmar_syllable_machine_to_state_actions[cs] ) {
385         case 1:
386 #line 1 &quot;NONE&quot;
387         {ts = 0;}
388         break;
<span class="line-modified">389 #line 390 &quot;hb-ot-shape-complex-myanmar-machine.hh&quot;</span>
390         }
391 
392         if ( ++p != pe )
393                 goto _resume;
394         _test_eof: {}
395         if ( p == eof )
396         {
397         if ( _myanmar_syllable_machine_eof_trans[cs] &gt; 0 ) {
398                 _trans = _myanmar_syllable_machine_eof_trans[cs] - 1;
399                 goto _eof_trans;
400         }
401         }
402 
403         }
404 
<span class="line-modified">405 #line 122 &quot;hb-ot-shape-complex-myanmar-machine.rl&quot;</span>
406 
407 }
408 
409 #undef found_syllable
410 
411 #endif /* HB_OT_SHAPE_COMPLEX_MYANMAR_MACHINE_HH */
</pre>
</td>
</tr>
</table>
<center><a href="hb-ot-shape-complex-khmer.cc.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-shape-complex-myanmar.cc.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>