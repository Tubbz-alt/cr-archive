<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-var-avar-table.hh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="hb-ot-tag.cc.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-var-fvar-table.hh.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-var-avar-table.hh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -25,11 +25,11 @@</span>
   */
  
  #ifndef HB_OT_VAR_AVAR_TABLE_HH
  #define HB_OT_VAR_AVAR_TABLE_HH
  
<span class="udiff-line-modified-removed">- #include &quot;hb-open-type-private.hh&quot;</span>
<span class="udiff-line-modified-added">+ #include &quot;hb-open-type.hh&quot;</span>
  
  /*
   * avar -- Axis Variations
   * https://docs.microsoft.com/en-us/typography/opentype/spec/avar
   */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -40,11 +40,11 @@</span>
  namespace OT {
  
  
  struct AxisValueMap
  {
<span class="udiff-line-modified-removed">-   inline bool sanitize (hb_sanitize_context_t *c) const</span>
<span class="udiff-line-modified-added">+   bool sanitize (hb_sanitize_context_t *c) const</span>
    {
      TRACE_SANITIZE (this);
      return_trace (c-&gt;check_struct (this));
    }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -57,11 +57,11 @@</span>
    DEFINE_SIZE_STATIC (4);
  };
  
  struct SegmentMaps : ArrayOf&lt;AxisValueMap&gt;
  {
<span class="udiff-line-modified-removed">-   inline int map (int value) const</span>
<span class="udiff-line-modified-added">+   int map (int value) const</span>
    {
      /* The following special-cases are not part of OpenType, which requires
       * that at least -1, 0, and +1 must be mapped. But we include these as
       * part of a better error recovery scheme. */
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -91,26 +91,27 @@</span>
      return arrayZ[i-1].toCoord +
             ((arrayZ[i].toCoord - arrayZ[i-1].toCoord) *
              (value - arrayZ[i-1].fromCoord) + denom/2) / denom;
    }
  
<span class="udiff-line-modified-removed">-   DEFINE_SIZE_ARRAY (2, arrayZ);</span>
<span class="udiff-line-modified-added">+   public:</span>
<span class="udiff-line-added">+   DEFINE_SIZE_ARRAY (2, *this);</span>
  };
  
  struct avar
  {
<span class="udiff-line-modified-removed">-   static const hb_tag_t tableTag        = HB_OT_TAG_avar;</span>
<span class="udiff-line-modified-added">+   static constexpr hb_tag_t tableTag = HB_OT_TAG_avar;</span>
  
<span class="udiff-line-modified-removed">-   inline bool sanitize (hb_sanitize_context_t *c) const</span>
<span class="udiff-line-modified-added">+   bool sanitize (hb_sanitize_context_t *c) const</span>
    {
      TRACE_SANITIZE (this);
      if (unlikely (!(version.sanitize (c) &amp;&amp;
                      version.major == 1 &amp;&amp;
                      c-&gt;check_struct (this))))
        return_trace (false);
  
<span class="udiff-line-modified-removed">-     const SegmentMaps *map = axisSegmentMapsZ;</span>
<span class="udiff-line-modified-added">+     const SegmentMaps *map = &amp;firstAxisSegmentMaps;</span>
      unsigned int count = axisCount;
      for (unsigned int i = 0; i &lt; count; i++)
      {
        if (unlikely (!map-&gt;sanitize (c)))
          return_trace (false);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -118,15 +119,15 @@</span>
      }
  
      return_trace (true);
    }
  
<span class="udiff-line-modified-removed">-   inline void map_coords (int *coords, unsigned int coords_length) const</span>
<span class="udiff-line-modified-added">+   void map_coords (int *coords, unsigned int coords_length) const</span>
    {
      unsigned int count = MIN&lt;unsigned int&gt; (coords_length, axisCount);
  
<span class="udiff-line-modified-removed">-     const SegmentMaps *map = axisSegmentMapsZ;</span>
<span class="udiff-line-modified-added">+     const SegmentMaps *map = &amp;firstAxisSegmentMaps;</span>
      for (unsigned int i = 0; i &lt; count; i++)
      {
        coords[i] = map-&gt;map (coords[i]);
        map = &amp;StructAfter&lt;SegmentMaps&gt; (*map);
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -137,11 +138,11 @@</span>
                                   * initially set to 0x00010000u */
    HBUINT16      reserved;       /* This field is permanently reserved. Set to 0. */
    HBUINT16      axisCount;      /* The number of variation axes in the font. This
                                   * must be the same number as axisCount in the
                                   * &#39;fvar&#39; table. */
<span class="udiff-line-modified-removed">-   SegmentMaps   axisSegmentMapsZ[VAR];</span>
<span class="udiff-line-modified-added">+   SegmentMaps   firstAxisSegmentMaps;</span>
  
    public:
    DEFINE_SIZE_MIN (8);
  };
  
</pre>
<center><a href="hb-ot-tag.cc.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-var-fvar-table.hh.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>