<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.desktop/share/native/libfontmanager/harfbuzz/hb-face-private.hh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright © 2009  Red Hat, Inc.
  3  * Copyright © 2011  Google, Inc.
  4  *
  5  *  This is part of HarfBuzz, a text shaping library.
  6  *
  7  * Permission is hereby granted, without written agreement and without
  8  * license or royalty fees, to use, copy, modify, and distribute this
  9  * software and its documentation for any purpose, provided that the
 10  * above copyright notice and the following two paragraphs appear in
 11  * all copies of this software.
 12  *
 13  * IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE TO ANY PARTY FOR
 14  * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
 15  * ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN
 16  * IF THE COPYRIGHT HOLDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
 17  * DAMAGE.
 18  *
 19  * THE COPYRIGHT HOLDER SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING,
 20  * BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 21  * FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS
 22  * ON AN &quot;AS IS&quot; BASIS, AND THE COPYRIGHT HOLDER HAS NO OBLIGATION TO
 23  * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
 24  *
 25  * Red Hat Author(s): Behdad Esfahbod
 26  * Google Author(s): Behdad Esfahbod
 27  */
 28 
 29 #ifndef HB_FACE_PRIVATE_HH
 30 #define HB_FACE_PRIVATE_HH
 31 
 32 #include &quot;hb-private.hh&quot;
 33 
 34 #include &quot;hb-object-private.hh&quot;
 35 #include &quot;hb-shaper-private.hh&quot;
 36 #include &quot;hb-shape-plan-private.hh&quot;
 37 
 38 
 39 /*
 40  * hb_face_t
 41  */
 42 
 43 struct hb_face_t {
 44   hb_object_header_t header;
 45   ASSERT_POD ();
 46 
 47   hb_bool_t immutable;
 48 
 49   hb_reference_table_func_t  reference_table_func;
 50   void                      *user_data;
 51   hb_destroy_func_t          destroy;
 52 
 53   unsigned int index;                   /* Face index in a collection, zero-based. */
 54   mutable unsigned int upem;            /* Units-per-EM. */
 55   mutable unsigned int num_glyphs;      /* Number of glyphs. */
 56 
 57   struct hb_shaper_data_t shaper_data;  /* Various shaper data. */
 58 
 59   /* Various non-shaping data. */
 60   /* ... */
 61 
 62   /* Cache */
 63   struct plan_node_t {
 64     hb_shape_plan_t *shape_plan;
 65     plan_node_t *next;
 66   } *shape_plans;
 67 
 68 
 69   inline hb_blob_t *reference_table (hb_tag_t tag) const
 70   {
 71     hb_blob_t *blob;
 72 
 73     if (unlikely (!reference_table_func))
 74       return hb_blob_get_empty ();
 75 
 76     blob = reference_table_func (/*XXX*/const_cast&lt;hb_face_t *&gt; (this), tag, user_data);
 77     if (unlikely (!blob))
 78       return hb_blob_get_empty ();
 79 
 80     return blob;
 81   }
 82 
 83   inline HB_PURE_FUNC unsigned int get_upem (void) const
 84   {
 85     if (unlikely (!upem))
 86       load_upem ();
 87     return upem;
 88   }
 89 
 90   inline unsigned int get_num_glyphs (void) const
 91   {
 92     if (unlikely (num_glyphs == (unsigned int) -1))
 93       load_num_glyphs ();
 94     return num_glyphs;
 95   }
 96 
 97   private:
 98   HB_INTERNAL void load_upem (void) const;
 99   HB_INTERNAL void load_num_glyphs (void) const;
100 };
101 
102 extern HB_INTERNAL const hb_face_t _hb_face_nil;
103 
104 #define HB_SHAPER_DATA_CREATE_FUNC_EXTRA_ARGS
105 #define HB_SHAPER_IMPLEMENT(shaper) HB_SHAPER_DATA_PROTOTYPE(shaper, face);
106 #include &quot;hb-shaper-list.hh&quot;
107 #undef HB_SHAPER_IMPLEMENT
108 #undef HB_SHAPER_DATA_CREATE_FUNC_EXTRA_ARGS
109 
110 
111 #endif /* HB_FACE_PRIVATE_HH */
    </pre>
  </body>
</html>