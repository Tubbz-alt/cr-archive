<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-shape-complex-hebrew.cc</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="hb-ot-shape-complex-hangul.cc.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-shape-complex-indic-machine.hh.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/harfbuzz/hb-ot-shape-complex-hebrew.cc</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 22,11 ***</span>
   * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
   *
   * Google Author(s): Behdad Esfahbod
   */
  
<span class="line-modified">! #include &quot;hb-ot-shape-complex-private.hh&quot;</span>
  
  
  static bool
  compose_hebrew (const hb_ot_shape_normalize_context_t *c,
                  hb_codepoint_t  a,
<span class="line-new-header">--- 22,11 ---</span>
   * PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
   *
   * Google Author(s): Behdad Esfahbod
   */
  
<span class="line-modified">! #include &quot;hb-ot-shape-complex.hh&quot;</span>
  
  
  static bool
  compose_hebrew (const hb_ot_shape_normalize_context_t *c,
                  hb_codepoint_t  a,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 68,11 ***</span>
      0xFB4Au /* TAV */
    };
  
    bool found = (bool) c-&gt;unicode-&gt;compose (a, b, ab);
  
<span class="line-modified">!   if (!found &amp;&amp; !c-&gt;plan-&gt;has_mark)</span>
    {
        /* Special-case Hebrew presentation forms that are excluded from
         * standard normalization, but wanted for old fonts. */
        switch (b) {
        case 0x05B4u: /* HIRIQ */
<span class="line-new-header">--- 68,11 ---</span>
      0xFB4Au /* TAV */
    };
  
    bool found = (bool) c-&gt;unicode-&gt;compose (a, b, ab);
  
<span class="line-modified">!   if (!found &amp;&amp; !c-&gt;plan-&gt;has_gpos_mark)</span>
    {
        /* Special-case Hebrew presentation forms that are excluded from
         * standard normalization, but wanted for old fonts. */
        switch (b) {
        case 0x05B4u: /* HIRIQ */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 152,22 ***</span>
    }
  
    return found;
  }
  
<span class="line-removed">- static bool</span>
<span class="line-removed">- disable_otl_hebrew (const hb_ot_shape_plan_t *plan)</span>
<span class="line-removed">- {</span>
<span class="line-removed">-   /* For Hebrew shaper, use fallback if GPOS does not have &#39;hebr&#39;</span>
<span class="line-removed">-    * script.  This matches Uniscribe better, and makes fonts like</span>
<span class="line-removed">-    * Arial that have GSUB/GPOS/GDEF but no data for Hebrew work.</span>
<span class="line-removed">-    * See:</span>
<span class="line-removed">-    * https://github.com/harfbuzz/harfbuzz/issues/347#issuecomment-267838368</span>
<span class="line-removed">-    */</span>
<span class="line-removed">-   return plan-&gt;map.chosen_script[1] != HB_TAG (&#39;h&#39;,&#39;e&#39;,&#39;b&#39;,&#39;r&#39;);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  
  const hb_ot_complex_shaper_t _hb_ot_complex_shaper_hebrew =
  {
    nullptr, /* collect_features */
    nullptr, /* override_features */
<span class="line-new-header">--- 152,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 177,10 ***</span>
    nullptr, /* postprocess_glyphs */
    HB_OT_SHAPE_NORMALIZATION_MODE_DEFAULT,
    nullptr, /* decompose */
    compose_hebrew,
    nullptr, /* setup_masks */
<span class="line-modified">!   disable_otl_hebrew,</span>
    nullptr, /* reorder_marks */
    HB_OT_SHAPE_ZERO_WIDTH_MARKS_BY_GDEF_LATE,
    true, /* fallback_position */
  };
<span class="line-new-header">--- 165,10 ---</span>
    nullptr, /* postprocess_glyphs */
    HB_OT_SHAPE_NORMALIZATION_MODE_DEFAULT,
    nullptr, /* decompose */
    compose_hebrew,
    nullptr, /* setup_masks */
<span class="line-modified">!   HB_TAG (&#39;h&#39;,&#39;e&#39;,&#39;b&#39;,&#39;r&#39;), /* gpos_tag. https://github.com/harfbuzz/harfbuzz/issues/347#issuecomment-267838368 */</span>
    nullptr, /* reorder_marks */
    HB_OT_SHAPE_ZERO_WIDTH_MARKS_BY_GDEF_LATE,
    true, /* fallback_position */
  };
</pre>
<center><a href="hb-ot-shape-complex-hangul.cc.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-ot-shape-complex-indic-machine.hh.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>