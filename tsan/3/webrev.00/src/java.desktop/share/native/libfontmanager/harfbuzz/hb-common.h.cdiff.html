<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfontmanager/harfbuzz/hb-common.h</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="hb-common.cc.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-coretext.cc.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/harfbuzz/hb-common.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 31,10 ***</span>
<span class="line-new-header">--- 31,14 ---</span>
  #endif
  
  #ifndef HB_COMMON_H
  #define HB_COMMON_H
  
<span class="line-added">+ #ifndef HB_EXTERN</span>
<span class="line-added">+ #define HB_EXTERN extern</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  #ifndef HB_BEGIN_DECLS
  # ifdef __cplusplus
  #  define HB_BEGIN_DECLS        extern &quot;C&quot; {
  #  define HB_END_DECLS          }
  # else /* !__cplusplus */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 61,10 ***</span>
<span class="line-new-header">--- 65,27 ---</span>
  typedef unsigned __int64 uint64_t;
  #else
  #  include &lt;stdint.h&gt;
  #endif
  
<span class="line-added">+ #if defined(__GNUC__) &amp;&amp; ((__GNUC__ &gt; 3) || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 1))</span>
<span class="line-added">+ #define HB_DEPRECATED __attribute__((__deprecated__))</span>
<span class="line-added">+ #elif defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1300)</span>
<span class="line-added">+ #define HB_DEPRECATED __declspec(deprecated)</span>
<span class="line-added">+ #else</span>
<span class="line-added">+ #define HB_DEPRECATED</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
<span class="line-added">+ #if defined(__GNUC__) &amp;&amp; ((__GNUC__ &gt; 4) || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 5))</span>
<span class="line-added">+ #define HB_DEPRECATED_FOR(f) __attribute__((__deprecated__(&quot;Use &#39;&quot; #f &quot;&#39; instead&quot;)))</span>
<span class="line-added">+ #elif defined(_MSC_FULL_VER) &amp;&amp; (_MSC_FULL_VER &gt; 140050320)</span>
<span class="line-added">+ #define HB_DEPRECATED_FOR(f) __declspec(deprecated(&quot;is deprecated. Use &#39;&quot; #f &quot;&#39; instead&quot;))</span>
<span class="line-added">+ #else</span>
<span class="line-added">+ #define HB_DEPRECATED_FOR(f) HB_DEPRECATED</span>
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
  HB_BEGIN_DECLS
  
  
  typedef int hb_bool_t;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 84,12 ***</span>
  
  /* hb_tag_t */
  
  typedef uint32_t hb_tag_t;
  
<span class="line-modified">! #define HB_TAG(c1,c2,c3,c4) ((hb_tag_t)((((uint8_t)(c1))&lt;&lt;24)|(((uint8_t)(c2))&lt;&lt;16)|(((uint8_t)(c3))&lt;&lt;8)|((uint8_t)(c4))))</span>
<span class="line-modified">! #define HB_UNTAG(tag)   ((uint8_t)((tag)&gt;&gt;24)), ((uint8_t)((tag)&gt;&gt;16)), ((uint8_t)((tag)&gt;&gt;8)), ((uint8_t)(tag))</span>
  
  #define HB_TAG_NONE HB_TAG(0,0,0,0)
  #define HB_TAG_MAX HB_TAG(0xff,0xff,0xff,0xff)
  #define HB_TAG_MAX_SIGNED HB_TAG(0x7f,0xff,0xff,0xff)
  
<span class="line-new-header">--- 105,12 ---</span>
  
  /* hb_tag_t */
  
  typedef uint32_t hb_tag_t;
  
<span class="line-modified">! #define HB_TAG(c1,c2,c3,c4) ((hb_tag_t)((((uint32_t)(c1)&amp;0xFF)&lt;&lt;24)|(((uint32_t)(c2)&amp;0xFF)&lt;&lt;16)|(((uint32_t)(c3)&amp;0xFF)&lt;&lt;8)|((uint32_t)(c4)&amp;0xFF)))</span>
<span class="line-modified">! #define HB_UNTAG(tag)   (uint8_t)(((tag)&gt;&gt;24)&amp;0xFF), (uint8_t)(((tag)&gt;&gt;16)&amp;0xFF), (uint8_t)(((tag)&gt;&gt;8)&amp;0xFF), (uint8_t)((tag)&amp;0xFF)</span>
  
  #define HB_TAG_NONE HB_TAG(0,0,0,0)
  #define HB_TAG_MAX HB_TAG(0xff,0xff,0xff,0xff)
  #define HB_TAG_MAX_SIGNED HB_TAG(0x7f,0xff,0xff,0xff)
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 338,17 ***</span>
  
    /* No script set. */
    HB_SCRIPT_INVALID                             = HB_TAG_NONE,
  
    /* Dummy values to ensure any hb_tag_t value can be passed/stored as hb_script_t
<span class="line-modified">!    * without risking undefined behavior.  Include both a signed and unsigned max,</span>
<span class="line-modified">!    * since technically enums are int, and indeed, hb_script_t ends up being signed.</span>
     * See this thread for technicalities:
     *
     *   https://lists.freedesktop.org/archives/harfbuzz/2014-March/004150.html
     */
<span class="line-modified">!   _HB_SCRIPT_MAX_VALUE                          = HB_TAG_MAX, /*&lt; skip &gt;*/</span>
    _HB_SCRIPT_MAX_VALUE_SIGNED                   = HB_TAG_MAX_SIGNED /*&lt; skip &gt;*/
  
  } hb_script_t;
  
  
<span class="line-new-header">--- 359,19 ---</span>
  
    /* No script set. */
    HB_SCRIPT_INVALID                             = HB_TAG_NONE,
  
    /* Dummy values to ensure any hb_tag_t value can be passed/stored as hb_script_t
<span class="line-modified">!    * without risking undefined behavior.  We have two, for historical reasons.</span>
<span class="line-modified">!    * HB_TAG_MAX used to be unsigned, but that was invalid Ansi C, so was changed</span>
<span class="line-added">+    * to _HB_SCRIPT_MAX_VALUE to be equal to HB_TAG_MAX_SIGNED as well.</span>
<span class="line-added">+    *</span>
     * See this thread for technicalities:
     *
     *   https://lists.freedesktop.org/archives/harfbuzz/2014-March/004150.html
     */
<span class="line-modified">!   _HB_SCRIPT_MAX_VALUE                          = HB_TAG_MAX_SIGNED, /*&lt; skip &gt;*/</span>
    _HB_SCRIPT_MAX_VALUE_SIGNED                   = HB_TAG_MAX_SIGNED /*&lt; skip &gt;*/
  
  } hb_script_t;
  
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 377,10 ***</span>
<span class="line-new-header">--- 400,23 ---</span>
  typedef void (*hb_destroy_func_t) (void *user_data);
  
  
  /* Font features and variations. */
  
<span class="line-added">+ /**</span>
<span class="line-added">+  * HB_FEATURE_GLOBAL_START</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.0.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define HB_FEATURE_GLOBAL_START 0</span>
<span class="line-added">+ /**</span>
<span class="line-added">+  * HB_FEATURE_GLOBAL_END</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.0.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define HB_FEATURE_GLOBAL_END   ((unsigned int) -1)</span>
<span class="line-added">+ </span>
  typedef struct hb_feature_t {
    hb_tag_t      tag;
    uint32_t      value;
    unsigned int  start;
    unsigned int  end;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 410,9 ***</span>
<span class="line-new-header">--- 446,53 ---</span>
  
  HB_EXTERN void
  hb_variation_to_string (hb_variation_t *variation,
                          char *buf, unsigned int size);
  
<span class="line-added">+ /**</span>
<span class="line-added">+  * hb_color_t:</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Data type for holding color values.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.1.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ typedef uint32_t hb_color_t;</span>
<span class="line-added">+ </span>
<span class="line-added">+ #define HB_COLOR(b,g,r,a) ((hb_color_t) HB_TAG ((b),(g),(r),(a)))</span>
<span class="line-added">+ </span>
<span class="line-added">+ /**</span>
<span class="line-added">+  * hb_color_get_alpha:</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.1.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define hb_color_get_alpha(color)       ((color) &amp; 0xFF)</span>
<span class="line-added">+ /**</span>
<span class="line-added">+  * hb_color_get_red:</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.1.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define hb_color_get_red(color)         (((color) &gt;&gt; 8) &amp; 0xFF)</span>
<span class="line-added">+ /**</span>
<span class="line-added">+  * hb_color_get_green:</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.1.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define hb_color_get_green(color)       (((color) &gt;&gt; 16) &amp; 0xFF)</span>
<span class="line-added">+ /**</span>
<span class="line-added">+  * hb_color_get_blue:</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.1.0</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define hb_color_get_blue(color)        (((color) &gt;&gt; 24) &amp; 0xFF)</span>
<span class="line-added">+ </span>
  
  HB_END_DECLS
  
  #endif /* HB_COMMON_H */
</pre>
<center><a href="hb-common.cc.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="hb-coretext.cc.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>