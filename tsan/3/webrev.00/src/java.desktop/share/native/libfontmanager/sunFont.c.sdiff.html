<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfontmanager/sunFont.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="hb-jdk.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../libfreetype/UPDATING.txt.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfontmanager/sunFont.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
327         (*env)-&gt;ReleasePrimitiveArrayCritical(env, results, nresults, 0);
328         return;
329     }
330     baseAddr = (size_t)info;
331     nresults[0] = sizeof(void*);
332     nresults[1] = sizeof(GlyphInfo);
333     nresults[2] = 0;
334     nresults[3] = (size_t)&amp;(info-&gt;advanceY)-baseAddr;
335     nresults[4] = (size_t)&amp;(info-&gt;width)-baseAddr;
336     nresults[5] = (size_t)&amp;(info-&gt;height)-baseAddr;
337     nresults[6] = (size_t)&amp;(info-&gt;rowBytes)-baseAddr;
338     nresults[7] = (size_t)&amp;(info-&gt;topLeftX)-baseAddr;
339     nresults[8] = (size_t)&amp;(info-&gt;topLeftY)-baseAddr;
340     nresults[9] = (size_t)&amp;(info-&gt;image)-baseAddr;
341     nresults[10] = (jlong)(uintptr_t)info; /* invisible glyph */
342     nresults[11] = (size_t)&amp;(info-&gt;cellInfo)-baseAddr;
343     nresults[12] = (size_t)&amp;(info-&gt;managed)-baseAddr;
344 
345     (*env)-&gt;ReleasePrimitiveArrayCritical(env, results, nresults, 0);
346 }
<span class="line-removed">347 </span>
<span class="line-removed">348 JNIEXPORT TTLayoutTableCache* newLayoutTableCache() {</span>
<span class="line-removed">349   TTLayoutTableCache* ltc = calloc(1, sizeof(TTLayoutTableCache));</span>
<span class="line-removed">350   if (ltc) {</span>
<span class="line-removed">351     int i;</span>
<span class="line-removed">352     for(i=0;i&lt;LAYOUTCACHE_ENTRIES;i++) {</span>
<span class="line-removed">353       ltc-&gt;entries[i].len = -1;</span>
<span class="line-removed">354     }</span>
<span class="line-removed">355     ltc-&gt;entries[0].tag = GDEF_TAG;</span>
<span class="line-removed">356     ltc-&gt;entries[1].tag = GPOS_TAG;</span>
<span class="line-removed">357     ltc-&gt;entries[2].tag = GSUB_TAG;</span>
<span class="line-removed">358     ltc-&gt;entries[3].tag = HEAD_TAG;</span>
<span class="line-removed">359     ltc-&gt;entries[4].tag = KERN_TAG;</span>
<span class="line-removed">360     ltc-&gt;entries[5].tag = MORT_TAG;</span>
<span class="line-removed">361     ltc-&gt;entries[6].tag = MORX_TAG;</span>
<span class="line-removed">362   }</span>
<span class="line-removed">363   return ltc;</span>
<span class="line-removed">364 }</span>
<span class="line-removed">365 </span>
<span class="line-removed">366 JNIEXPORT void freeLayoutTableCache(TTLayoutTableCache* ltc) {</span>
<span class="line-removed">367   if (ltc) {</span>
<span class="line-removed">368     int i;</span>
<span class="line-removed">369     for(i=0;i&lt;LAYOUTCACHE_ENTRIES;i++) {</span>
<span class="line-removed">370       if(ltc-&gt;entries[i].ptr) free (ltc-&gt;entries[i].ptr);</span>
<span class="line-removed">371     }</span>
<span class="line-removed">372     if (ltc-&gt;kernPairs) free(ltc-&gt;kernPairs);</span>
<span class="line-removed">373     free(ltc);</span>
<span class="line-removed">374   }</span>
<span class="line-removed">375 }</span>
</pre>
</td>
<td>
<hr />
<pre>
327         (*env)-&gt;ReleasePrimitiveArrayCritical(env, results, nresults, 0);
328         return;
329     }
330     baseAddr = (size_t)info;
331     nresults[0] = sizeof(void*);
332     nresults[1] = sizeof(GlyphInfo);
333     nresults[2] = 0;
334     nresults[3] = (size_t)&amp;(info-&gt;advanceY)-baseAddr;
335     nresults[4] = (size_t)&amp;(info-&gt;width)-baseAddr;
336     nresults[5] = (size_t)&amp;(info-&gt;height)-baseAddr;
337     nresults[6] = (size_t)&amp;(info-&gt;rowBytes)-baseAddr;
338     nresults[7] = (size_t)&amp;(info-&gt;topLeftX)-baseAddr;
339     nresults[8] = (size_t)&amp;(info-&gt;topLeftY)-baseAddr;
340     nresults[9] = (size_t)&amp;(info-&gt;image)-baseAddr;
341     nresults[10] = (jlong)(uintptr_t)info; /* invisible glyph */
342     nresults[11] = (size_t)&amp;(info-&gt;cellInfo)-baseAddr;
343     nresults[12] = (size_t)&amp;(info-&gt;managed)-baseAddr;
344 
345     (*env)-&gt;ReleasePrimitiveArrayCritical(env, results, nresults, 0);
346 }





























</pre>
</td>
</tr>
</table>
<center><a href="hb-jdk.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../libfreetype/UPDATING.txt.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>