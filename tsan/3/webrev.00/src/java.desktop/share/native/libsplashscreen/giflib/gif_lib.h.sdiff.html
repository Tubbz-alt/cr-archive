<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libsplashscreen/giflib/gif_lib.h</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="gif_hash.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="gif_lib_private.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libsplashscreen/giflib/gif_lib.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  9  *
 10  * This code is distributed in the hope that it will be useful, but WITHOUT
 11  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 12  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 13  * version 2 for more details (a copy is included in the LICENSE file that
 14  * accompanied this code).
 15  *
 16  * You should have received a copy of the GNU General Public License version
 17  * 2 along with this work; if not, write to the Free Software Foundation,
 18  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 19  *
 20  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 21  * or visit www.oracle.com if you need additional information or have any
 22  * questions.
 23  */
 24 
 25 /******************************************************************************
 26 
 27 gif_lib.h - service library for decoding and encoding GIF images
 28 


 29 *****************************************************************************/
 30 
 31 #ifndef _GIF_LIB_H_
 32 #define _GIF_LIB_H_ 1
 33 
 34 #ifdef __cplusplus
 35 extern &quot;C&quot; {
 36 #endif /* __cplusplus */
 37 
 38 #define GIFLIB_MAJOR 5
<span class="line-modified"> 39 #define GIFLIB_MINOR 1</span>
<span class="line-modified"> 40 #define GIFLIB_RELEASE 4</span>
 41 
 42 #define GIF_ERROR   0
 43 #define GIF_OK      1
 44 
 45 #include &lt;stddef.h&gt;
<span class="line-modified"> 46 </span>

 47 #ifdef bool
 48 #undef bool
 49 #endif
 50 typedef int bool;
 51 #define false 0
 52 #define true 1

 53 
 54 #define GIF_STAMP &quot;GIFVER&quot;          /* First chars in file - GIF stamp.  */
 55 #define GIF_STAMP_LEN sizeof(GIF_STAMP) - 1
 56 #define GIF_VERSION_POS 3           /* Version first character in stamp. */
 57 #define GIF87_STAMP &quot;GIF87a&quot;        /* First chars in file - GIF stamp.  */
 58 #define GIF89_STAMP &quot;GIF89a&quot;        /* First chars in file - GIF stamp.  */
 59 
 60 typedef unsigned char GifPixelType;
 61 typedef unsigned char *GifRowType;
 62 typedef unsigned char GifByteType;
 63 typedef unsigned int GifPrefixType;
 64 typedef int GifWord;
 65 
 66 typedef struct GifColorType {
 67     GifByteType Red, Green, Blue;
 68 } GifColorType;
 69 
 70 typedef struct ColorMapObject {
 71     int ColorCount;
 72     int BitsPerPixel;
 73     bool SortFlag;
 74     GifColorType *Colors;    /* on malloc(3) heap */
 75 } ColorMapObject;
 76 
 77 typedef struct GifImageDesc {
 78     GifWord Left, Top, Width, Height;   /* Current image dimensions. */
 79     bool Interlace;                     /* Sequential/Interlaced lines. */
 80     ColorMapObject *ColorMap;           /* The local color map */
 81 } GifImageDesc;
 82 
 83 typedef struct ExtensionBlock {
 84     int ByteCount;
 85     GifByteType *Bytes; /* on malloc(3) heap */
 86     int Function;       /* The block function code */
 87 #define CONTINUE_EXT_FUNC_CODE    0x00    /* continuation subblock */
 88 #define COMMENT_EXT_FUNC_CODE     0xfe    /* comment */
 89 #define GRAPHICS_EXT_FUNC_CODE    0xf9    /* graphics control (GIF89) */
 90 #define PLAINTEXT_EXT_FUNC_CODE   0x01    /* plaintext */
<span class="line-modified"> 91 #define APPLICATION_EXT_FUNC_CODE 0xff    /* application block */</span>
 92 } ExtensionBlock;
 93 
 94 typedef struct SavedImage {
 95     GifImageDesc ImageDesc;
 96     GifByteType *RasterBits;         /* on malloc(3) heap */
 97     int ExtensionBlockCount;         /* Count of extensions before image */
 98     ExtensionBlock *ExtensionBlocks; /* Extensions before image */
 99 } SavedImage;
100 
101 typedef struct GifFileType {
102     GifWord SWidth, SHeight;         /* Size of virtual canvas */
103     GifWord SColorResolution;        /* How many colors can we generate? */
104     GifWord SBackGroundColor;        /* Background color for virtual canvas */
105     GifByteType AspectByte;          /* Used to compute pixel aspect ratio */
106     ColorMapObject *SColorMap;       /* Global colormap, NULL if nonexistent. */
107     int ImageCount;                  /* Number of current image (both APIs) */
108     GifImageDesc Image;              /* Current image (low-level API) */
109     SavedImage *SavedImages;         /* Image sequence (high-level API) */
110     int ExtensionBlockCount;         /* Count extensions past last image */
111     ExtensionBlock *ExtensionBlocks; /* Extensions past last image */
</pre>
<hr />
<pre>
213     int DGifCloseFile(GifFileType * GifFile, int *ErrorCode);
214 
215 #define D_GIF_SUCCEEDED          0
216 #define D_GIF_ERR_OPEN_FAILED    101    /* And DGif possible errors. */
217 #define D_GIF_ERR_READ_FAILED    102
218 #define D_GIF_ERR_NOT_GIF_FILE   103
219 #define D_GIF_ERR_NO_SCRN_DSCR   104
220 #define D_GIF_ERR_NO_IMAG_DSCR   105
221 #define D_GIF_ERR_NO_COLOR_MAP   106
222 #define D_GIF_ERR_WRONG_RECORD   107
223 #define D_GIF_ERR_DATA_TOO_BIG   108
224 #define D_GIF_ERR_NOT_ENOUGH_MEM 109
225 #define D_GIF_ERR_CLOSE_FAILED   110
226 #define D_GIF_ERR_NOT_READABLE   111
227 #define D_GIF_ERR_IMAGE_DEFECT   112
228 #define D_GIF_ERR_EOF_TOO_SOON   113
229 
230 /* These are legacy.  You probably do not want to call them directly */
231 int DGifGetScreenDesc(GifFileType *GifFile);
232 int DGifGetRecordType(GifFileType *GifFile, GifRecordType *GifType);

233 int DGifGetImageDesc(GifFileType *GifFile);
234 int DGifGetLine(GifFileType *GifFile, GifPixelType *GifLine, int GifLineLen);
235 int DGifGetPixel(GifFileType *GifFile, GifPixelType GifPixel);
<span class="line-removed">236 int DGifGetComment(GifFileType *GifFile, char *GifComment);</span>
237 int DGifGetExtension(GifFileType *GifFile, int *GifExtCode,
238                      GifByteType **GifExtension);
239 int DGifGetExtensionNext(GifFileType *GifFile, GifByteType **GifExtension);
240 int DGifGetCode(GifFileType *GifFile, int *GifCodeSize,
241                 GifByteType **GifCodeBlock);
242 int DGifGetCodeNext(GifFileType *GifFile, GifByteType **GifCodeBlock);
243 int DGifGetLZCodes(GifFileType *GifFile, int *GifCode);

244 
245 
<span class="line-removed">246 /******************************************************************************</span>
<span class="line-removed">247  Color table quantization (deprecated)</span>
<span class="line-removed">248 ******************************************************************************/</span>
<span class="line-removed">249 int GifQuantizeBuffer(unsigned int Width, unsigned int Height,</span>
<span class="line-removed">250                    int *ColorMapSize, GifByteType * RedInput,</span>
<span class="line-removed">251                    GifByteType * GreenInput, GifByteType * BlueInput,</span>
<span class="line-removed">252                    GifByteType * OutputBuffer,</span>
<span class="line-removed">253                    GifColorType * OutputColorMap);</span>
<span class="line-removed">254 </span>
255 /******************************************************************************
256  Error handling and reporting.
257 ******************************************************************************/
258 extern const char *GifErrorString(int ErrorCode);     /* new in 2012 - ESR */
259 
260 /*****************************************************************************
261  Everything below this point is new after version 1.2, supporting `slurp
262  mode&#39; for doing I/O in two big belts with all the image-bashing in core.
263 ******************************************************************************/
264 
265 /******************************************************************************
266  Color map handling from gif_alloc.c
267 ******************************************************************************/
268 
269 extern ColorMapObject *GifMakeMapObject(int ColorCount,
270                                      const GifColorType *ColorMap);
271 extern void GifFreeMapObject(ColorMapObject *Object);
272 extern ColorMapObject *GifUnionColorMap(const ColorMapObject *ColorIn1,
273                                      const ColorMapObject *ColorIn2,
274                                      GifPixelType ColorTransIn2[]);
275 extern int GifBitSize(int n);
276 
<span class="line-removed">277 extern void * reallocarray(void *optr, size_t nmemb, size_t size);</span>
<span class="line-removed">278 </span>
<span class="line-removed">279 </span>
280 /******************************************************************************
281  Support for the in-core structures allocation (slurp mode).
282 ******************************************************************************/
283 
284 extern void GifApplyTranslation(SavedImage *Image, GifPixelType Translation[]);
285 extern int GifAddExtensionBlock(int *ExtensionBlock_Count,
286                                 ExtensionBlock **ExtensionBlocks,
287                                 int Function,
288                                 unsigned int Len, unsigned char ExtData[]);
289 extern void GifFreeExtensions(int *ExtensionBlock_Count,
290                               ExtensionBlock **ExtensionBlocks);
291 extern SavedImage *GifMakeSavedImage(GifFileType *GifFile,
292                                   const SavedImage *CopyFrom);
293 extern void GifFreeSavedImages(GifFileType *GifFile);
294 
295 /******************************************************************************
296  5.x functions for GIF89 graphics control blocks
297 ******************************************************************************/
298 
299 int DGifExtensionToGCB(const size_t GifExtensionLength,
</pre>
</td>
<td>
<hr />
<pre>
  9  *
 10  * This code is distributed in the hope that it will be useful, but WITHOUT
 11  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 12  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 13  * version 2 for more details (a copy is included in the LICENSE file that
 14  * accompanied this code).
 15  *
 16  * You should have received a copy of the GNU General Public License version
 17  * 2 along with this work; if not, write to the Free Software Foundation,
 18  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 19  *
 20  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 21  * or visit www.oracle.com if you need additional information or have any
 22  * questions.
 23  */
 24 
 25 /******************************************************************************
 26 
 27 gif_lib.h - service library for decoding and encoding GIF images
 28 
<span class="line-added"> 29 SPDX-License-Identifier: MIT</span>
<span class="line-added"> 30 </span>
 31 *****************************************************************************/
 32 
 33 #ifndef _GIF_LIB_H_
 34 #define _GIF_LIB_H_ 1
 35 
 36 #ifdef __cplusplus
 37 extern &quot;C&quot; {
 38 #endif /* __cplusplus */
 39 
 40 #define GIFLIB_MAJOR 5
<span class="line-modified"> 41 #define GIFLIB_MINOR 2</span>
<span class="line-modified"> 42 #define GIFLIB_RELEASE 1</span>
 43 
 44 #define GIF_ERROR   0
 45 #define GIF_OK      1
 46 
 47 #include &lt;stddef.h&gt;
<span class="line-modified"> 48 /** Begin JDK modifications to support building using old compilers**/</span>
<span class="line-added"> 49 //#include &lt;stdbool.h&gt;</span>
 50 #ifdef bool
 51 #undef bool
 52 #endif
 53 typedef int bool;
 54 #define false 0
 55 #define true 1
<span class="line-added"> 56 /** End JDK modifications to support building using old compilers**/</span>
 57 
 58 #define GIF_STAMP &quot;GIFVER&quot;          /* First chars in file - GIF stamp.  */
 59 #define GIF_STAMP_LEN sizeof(GIF_STAMP) - 1
 60 #define GIF_VERSION_POS 3           /* Version first character in stamp. */
 61 #define GIF87_STAMP &quot;GIF87a&quot;        /* First chars in file - GIF stamp.  */
 62 #define GIF89_STAMP &quot;GIF89a&quot;        /* First chars in file - GIF stamp.  */
 63 
 64 typedef unsigned char GifPixelType;
 65 typedef unsigned char *GifRowType;
 66 typedef unsigned char GifByteType;
 67 typedef unsigned int GifPrefixType;
 68 typedef int GifWord;
 69 
 70 typedef struct GifColorType {
 71     GifByteType Red, Green, Blue;
 72 } GifColorType;
 73 
 74 typedef struct ColorMapObject {
 75     int ColorCount;
 76     int BitsPerPixel;
 77     bool SortFlag;
 78     GifColorType *Colors;    /* on malloc(3) heap */
 79 } ColorMapObject;
 80 
 81 typedef struct GifImageDesc {
 82     GifWord Left, Top, Width, Height;   /* Current image dimensions. */
 83     bool Interlace;                     /* Sequential/Interlaced lines. */
 84     ColorMapObject *ColorMap;           /* The local color map */
 85 } GifImageDesc;
 86 
 87 typedef struct ExtensionBlock {
 88     int ByteCount;
 89     GifByteType *Bytes; /* on malloc(3) heap */
 90     int Function;       /* The block function code */
 91 #define CONTINUE_EXT_FUNC_CODE    0x00    /* continuation subblock */
 92 #define COMMENT_EXT_FUNC_CODE     0xfe    /* comment */
 93 #define GRAPHICS_EXT_FUNC_CODE    0xf9    /* graphics control (GIF89) */
 94 #define PLAINTEXT_EXT_FUNC_CODE   0x01    /* plaintext */
<span class="line-modified"> 95 #define APPLICATION_EXT_FUNC_CODE 0xff    /* application block (GIF89) */</span>
 96 } ExtensionBlock;
 97 
 98 typedef struct SavedImage {
 99     GifImageDesc ImageDesc;
100     GifByteType *RasterBits;         /* on malloc(3) heap */
101     int ExtensionBlockCount;         /* Count of extensions before image */
102     ExtensionBlock *ExtensionBlocks; /* Extensions before image */
103 } SavedImage;
104 
105 typedef struct GifFileType {
106     GifWord SWidth, SHeight;         /* Size of virtual canvas */
107     GifWord SColorResolution;        /* How many colors can we generate? */
108     GifWord SBackGroundColor;        /* Background color for virtual canvas */
109     GifByteType AspectByte;          /* Used to compute pixel aspect ratio */
110     ColorMapObject *SColorMap;       /* Global colormap, NULL if nonexistent. */
111     int ImageCount;                  /* Number of current image (both APIs) */
112     GifImageDesc Image;              /* Current image (low-level API) */
113     SavedImage *SavedImages;         /* Image sequence (high-level API) */
114     int ExtensionBlockCount;         /* Count extensions past last image */
115     ExtensionBlock *ExtensionBlocks; /* Extensions past last image */
</pre>
<hr />
<pre>
217     int DGifCloseFile(GifFileType * GifFile, int *ErrorCode);
218 
219 #define D_GIF_SUCCEEDED          0
220 #define D_GIF_ERR_OPEN_FAILED    101    /* And DGif possible errors. */
221 #define D_GIF_ERR_READ_FAILED    102
222 #define D_GIF_ERR_NOT_GIF_FILE   103
223 #define D_GIF_ERR_NO_SCRN_DSCR   104
224 #define D_GIF_ERR_NO_IMAG_DSCR   105
225 #define D_GIF_ERR_NO_COLOR_MAP   106
226 #define D_GIF_ERR_WRONG_RECORD   107
227 #define D_GIF_ERR_DATA_TOO_BIG   108
228 #define D_GIF_ERR_NOT_ENOUGH_MEM 109
229 #define D_GIF_ERR_CLOSE_FAILED   110
230 #define D_GIF_ERR_NOT_READABLE   111
231 #define D_GIF_ERR_IMAGE_DEFECT   112
232 #define D_GIF_ERR_EOF_TOO_SOON   113
233 
234 /* These are legacy.  You probably do not want to call them directly */
235 int DGifGetScreenDesc(GifFileType *GifFile);
236 int DGifGetRecordType(GifFileType *GifFile, GifRecordType *GifType);
<span class="line-added">237 int DGifGetImageHeader(GifFileType *GifFile);</span>
238 int DGifGetImageDesc(GifFileType *GifFile);
239 int DGifGetLine(GifFileType *GifFile, GifPixelType *GifLine, int GifLineLen);
240 int DGifGetPixel(GifFileType *GifFile, GifPixelType GifPixel);

241 int DGifGetExtension(GifFileType *GifFile, int *GifExtCode,
242                      GifByteType **GifExtension);
243 int DGifGetExtensionNext(GifFileType *GifFile, GifByteType **GifExtension);
244 int DGifGetCode(GifFileType *GifFile, int *GifCodeSize,
245                 GifByteType **GifCodeBlock);
246 int DGifGetCodeNext(GifFileType *GifFile, GifByteType **GifCodeBlock);
247 int DGifGetLZCodes(GifFileType *GifFile, int *GifCode);
<span class="line-added">248 const char *DGifGetGifVersion(GifFileType *GifFile);</span>
249 
250 









251 /******************************************************************************
252  Error handling and reporting.
253 ******************************************************************************/
254 extern const char *GifErrorString(int ErrorCode);     /* new in 2012 - ESR */
255 
256 /*****************************************************************************
257  Everything below this point is new after version 1.2, supporting `slurp
258  mode&#39; for doing I/O in two big belts with all the image-bashing in core.
259 ******************************************************************************/
260 
261 /******************************************************************************
262  Color map handling from gif_alloc.c
263 ******************************************************************************/
264 
265 extern ColorMapObject *GifMakeMapObject(int ColorCount,
266                                      const GifColorType *ColorMap);
267 extern void GifFreeMapObject(ColorMapObject *Object);
268 extern ColorMapObject *GifUnionColorMap(const ColorMapObject *ColorIn1,
269                                      const ColorMapObject *ColorIn2,
270                                      GifPixelType ColorTransIn2[]);
271 extern int GifBitSize(int n);
272 



273 /******************************************************************************
274  Support for the in-core structures allocation (slurp mode).
275 ******************************************************************************/
276 
277 extern void GifApplyTranslation(SavedImage *Image, GifPixelType Translation[]);
278 extern int GifAddExtensionBlock(int *ExtensionBlock_Count,
279                                 ExtensionBlock **ExtensionBlocks,
280                                 int Function,
281                                 unsigned int Len, unsigned char ExtData[]);
282 extern void GifFreeExtensions(int *ExtensionBlock_Count,
283                               ExtensionBlock **ExtensionBlocks);
284 extern SavedImage *GifMakeSavedImage(GifFileType *GifFile,
285                                   const SavedImage *CopyFrom);
286 extern void GifFreeSavedImages(GifFileType *GifFile);
287 
288 /******************************************************************************
289  5.x functions for GIF89 graphics control blocks
290 ******************************************************************************/
291 
292 int DGifExtensionToGCB(const size_t GifExtensionLength,
</pre>
</td>
</tr>
</table>
<center><a href="gif_hash.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="gif_lib_private.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>