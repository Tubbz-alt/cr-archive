<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.desktop/share/native/libsplashscreen/libpng/pngpriv.h</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
   2  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   3  *
   4  * This code is free software; you can redistribute it and/or modify it
   5  * under the terms of the GNU General Public License version 2 only, as
   6  * published by the Free Software Foundation.  Oracle designates this
   7  * particular file as subject to the &quot;Classpath&quot; exception as provided
   8  * by Oracle in the LICENSE file that accompanied this code.
   9  *
  10  * This code is distributed in the hope that it will be useful, but WITHOUT
  11  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  12  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  13  * version 2 for more details (a copy is included in the LICENSE file that
  14  * accompanied this code).
  15  *
  16  * You should have received a copy of the GNU General Public License version
  17  * 2 along with this work; if not, write to the Free Software Foundation,
  18  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  19  *
  20  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  21  * or visit www.oracle.com if you need additional information or have any
  22  * questions.
  23  */
  24 
  25 /* pngpriv.h - private declarations for use inside libpng
  26  *
  27  * This file is available under and governed by the GNU General Public
  28  * License version 2 only, as published by the Free Software Foundation.
  29  * However, the following notice accompanied the original version of this
  30  * file and, per its terms, should not be removed:
  31  *
<a name="1" id="anc1"></a><span class="line-modified">  32  * Last changed in libpng 1.6.35 [July 15, 2018]</span>
  33  * Copyright (c) 1998-2002,2004,2006-2018 Glenn Randers-Pehrson
<a name="2" id="anc2"></a><span class="line-modified">  34  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)</span>
<span class="line-modified">  35  * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)</span>
  36  *
  37  * This code is released under the libpng license.
  38  * For conditions of distribution and use, see the disclaimer
  39  * and license in png.h
  40  */
  41 
  42 /* The symbols declared in this file (including the functions declared
  43  * as extern) are PRIVATE.  They are not part of the libpng public
  44  * interface, and are not recommended for use by regular applications.
  45  * Some of them may become public in the future; others may stay private,
  46  * change in an incompatible way, or even disappear.
  47  * Although the libpng users are not forbidden to include this header,
  48  * they should be well aware of the issues that may arise from doing so.
  49  */
  50 
  51 #ifndef PNGPRIV_H
  52 #define PNGPRIV_H
  53 
  54 /* Feature Test Macros.  The following are defined here to ensure that correctly
  55  * implemented libraries reveal the APIs libpng needs to build and hide those
  56  * that are not needed and potentially damaging to the compilation.
  57  *
  58  * Feature Test Macros must be defined before any system header is included (see
  59  * POSIX 1003.1 2.8.2 &quot;POSIX Symbols.&quot;
  60  *
  61  * These macros only have an effect if the operating system supports either
  62  * POSIX 1003.1 or C99, or both.  On other operating systems (particularly
  63  * Windows/Visual Studio) there is no effect; the OS specific tests below are
  64  * still required (as of 2011-05-02.)
  65  */
  66 #ifndef _POSIX_SOURCE
  67 # define _POSIX_SOURCE 1 /* Just the POSIX 1003.1 and C89 APIs */
  68 #endif
  69 
  70 #ifndef PNG_VERSION_INFO_ONLY
  71 /* Standard library headers not required by png.h: */
  72 #  include &lt;stdlib.h&gt;
  73 #  include &lt;string.h&gt;
  74 #endif
  75 
  76 #define PNGLIB_BUILD /*libpng is being built, not used*/
  77 
  78 /* If HAVE_CONFIG_H is defined during the build then the build system must
  79  * provide an appropriate &quot;config.h&quot; file on the include path.  The header file
  80  * must provide definitions as required below (search for &quot;HAVE_CONFIG_H&quot;);
  81  * see configure.ac for more details of the requirements.  The macro
  82  * &quot;PNG_NO_CONFIG_H&quot; is provided for maintainers to test for dependencies on
  83  * &#39;configure&#39;; define this macro to prevent the configure build including the
  84  * configure generated config.h.  Libpng is expected to compile without *any*
  85  * special build system support on a reasonably ANSI-C compliant system.
  86  */
  87 #if defined(HAVE_CONFIG_H) &amp;&amp; !defined(PNG_NO_CONFIG_H)
  88 #  include &lt;config.h&gt;
  89 
  90    /* Pick up the definition of &#39;restrict&#39; from config.h if it was read: */
  91 #  define PNG_RESTRICT restrict
  92 #endif
  93 
  94 /* To support symbol prefixing it is necessary to know *before* including png.h
  95  * whether the fixed point (and maybe other) APIs are exported, because if they
  96  * are not internal definitions may be required.  This is handled below just
  97  * before png.h is included, but load the configuration now if it is available.
  98  */
  99 #ifndef PNGLCONF_H
 100 #  include &quot;pnglibconf.h&quot;
 101 #endif
 102 
 103 /* Local renames may change non-exported API functions from png.h */
 104 #if defined(PNG_PREFIX) &amp;&amp; !defined(PNGPREFIX_H)
 105 #  include &quot;pngprefix.h&quot;
 106 #endif
 107 
 108 #ifdef PNG_USER_CONFIG
 109 #  include &quot;pngusr.h&quot;
 110    /* These should have been defined in pngusr.h */
 111 #  ifndef PNG_USER_PRIVATEBUILD
 112 #    define PNG_USER_PRIVATEBUILD &quot;Custom libpng build&quot;
 113 #  endif
 114 #  ifndef PNG_USER_DLLFNAME_POSTFIX
 115 #    define PNG_USER_DLLFNAME_POSTFIX &quot;Cb&quot;
 116 #  endif
 117 #endif
 118 
 119 /* Compile time options.
 120  * =====================
 121  * In a multi-arch build the compiler may compile the code several times for the
 122  * same object module, producing different binaries for different architectures.
 123  * When this happens configure-time setting of the target host options cannot be
 124  * done and this interferes with the handling of the ARM NEON optimizations, and
 125  * possibly other similar optimizations.  Put additional tests here; in general
 126  * this is needed when the same option can be changed at both compile time and
 127  * run time depending on the target OS (i.e. iOS vs Android.)
 128  *
 129  * NOTE: symbol prefixing does not pass $(CFLAGS) to the preprocessor, because
 130  * this is not possible with certain compilers (Oracle SUN OS CC), as a result
 131  * it is necessary to ensure that all extern functions that *might* be used
 132  * regardless of $(CFLAGS) get declared in this file.  The test on __ARM_NEON__
 133  * below is one example of this behavior because it is controlled by the
 134  * presence or not of -mfpu=neon on the GCC command line, it is possible to do
 135  * this in $(CC), e.g. &quot;CC=gcc -mfpu=neon&quot;, but people who build libpng rarely
 136  * do this.
 137  */
 138 #ifndef PNG_ARM_NEON_OPT
 139    /* ARM NEON optimizations are being controlled by the compiler settings,
 140     * typically the target FPU.  If the FPU has been set to NEON (-mfpu=neon
 141     * with GCC) then the compiler will define __ARM_NEON__ and we can rely
 142     * unconditionally on NEON instructions not crashing, otherwise we must
 143     * disable use of NEON instructions.
 144     *
 145     * NOTE: at present these optimizations depend on &#39;ALIGNED_MEMORY&#39;, so they
 146     * can only be turned on automatically if that is supported too.  If
 147     * PNG_ARM_NEON_OPT is set in CPPFLAGS (to &gt;0) then arm/arm_init.c will fail
 148     * to compile with an appropriate #error if ALIGNED_MEMORY has been turned
 149     * off.
 150     *
 151     * Note that gcc-4.9 defines __ARM_NEON instead of the deprecated
 152     * __ARM_NEON__, so we check both variants.
 153     *
 154     * To disable ARM_NEON optimizations entirely, and skip compiling the
 155     * associated assembler code, pass --enable-arm-neon=no to configure
 156     * or put -DPNG_ARM_NEON_OPT=0 in CPPFLAGS.
 157     */
 158 #  if (defined(__ARM_NEON__) || defined(__ARM_NEON)) &amp;&amp; \
 159    defined(PNG_ALIGNED_MEMORY_SUPPORTED)
 160 #     define PNG_ARM_NEON_OPT 2
 161 #  else
 162 #     define PNG_ARM_NEON_OPT 0
 163 #  endif
 164 #endif
 165 
 166 #if PNG_ARM_NEON_OPT &gt; 0
 167    /* NEON optimizations are to be at least considered by libpng, so enable the
 168     * callbacks to do this.
 169     */
 170 #  define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_neon
 171 
 172    /* By default the &#39;intrinsics&#39; code in arm/filter_neon_intrinsics.c is used
 173     * if possible - if __ARM_NEON__ is set and the compiler version is not known
 174     * to be broken.  This is controlled by PNG_ARM_NEON_IMPLEMENTATION which can
 175     * be:
 176     *
 177     *    1  The intrinsics code (the default with __ARM_NEON__)
 178     *    2  The hand coded assembler (the default without __ARM_NEON__)
 179     *
 180     * It is possible to set PNG_ARM_NEON_IMPLEMENTATION in CPPFLAGS, however
 181     * this is *NOT* supported and may cease to work even after a minor revision
 182     * to libpng.  It *is* valid to do this for testing purposes, e.g. speed
 183     * testing or a new compiler, but the results should be communicated to the
 184     * libpng implementation list for incorporation in the next minor release.
 185     */
 186 #  ifndef PNG_ARM_NEON_IMPLEMENTATION
 187 #     if defined(__ARM_NEON__) || defined(__ARM_NEON)
 188 #        if defined(__clang__)
 189             /* At present it is unknown by the libpng developers which versions
 190              * of clang support the intrinsics, however some or perhaps all
 191              * versions do not work with the assembler so this may be
 192              * irrelevant, so just use the default (do nothing here.)
 193              */
 194 #        elif defined(__GNUC__)
 195             /* GCC 4.5.4 NEON support is known to be broken.  4.6.3 is known to
 196              * work, so if this *is* GCC, or G++, look for a version &gt;4.5
 197              */
 198 #           if __GNUC__ &lt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &lt; 6)
 199 #              define PNG_ARM_NEON_IMPLEMENTATION 2
 200 #           endif /* no GNUC support */
 201 #        endif /* __GNUC__ */
 202 #     else /* !defined __ARM_NEON__ */
 203          /* The &#39;intrinsics&#39; code simply won&#39;t compile without this -mfpu=neon:
 204           */
<a name="3" id="anc3"></a><span class="line-modified"> 205 #        define PNG_ARM_NEON_IMPLEMENTATION 2</span>



 206 #     endif /* __ARM_NEON__ */
 207 #  endif /* !PNG_ARM_NEON_IMPLEMENTATION */
 208 
 209 #  ifndef PNG_ARM_NEON_IMPLEMENTATION
 210       /* Use the intrinsics code by default. */
 211 #     define PNG_ARM_NEON_IMPLEMENTATION 1
 212 #  endif
 213 #endif /* PNG_ARM_NEON_OPT &gt; 0 */
 214 
 215 #ifndef PNG_MIPS_MSA_OPT
 216 #  if defined(__mips_msa) &amp;&amp; (__mips_isa_rev &gt;= 5) &amp;&amp; defined(PNG_ALIGNED_MEMORY_SUPPORTED)
 217 #     define PNG_MIPS_MSA_OPT 2
 218 #  else
 219 #     define PNG_MIPS_MSA_OPT 0
 220 #  endif
 221 #endif
 222 
 223 #ifndef PNG_POWERPC_VSX_OPT
 224 #  if defined(__PPC64__) &amp;&amp; defined(__ALTIVEC__) &amp;&amp; defined(__VSX__)
 225 #     define PNG_POWERPC_VSX_OPT 2
 226 #  else
 227 #     define PNG_POWERPC_VSX_OPT 0
 228 #  endif
 229 #endif
 230 
 231 #ifndef PNG_INTEL_SSE_OPT
 232 #   ifdef PNG_INTEL_SSE
 233       /* Only check for SSE if the build configuration has been modified to
 234        * enable SSE optimizations.  This means that these optimizations will
 235        * be off by default.  See contrib/intel for more details.
 236        */
 237 #     if defined(__SSE4_1__) || defined(__AVX__) || defined(__SSSE3__) || \
 238        defined(__SSE2__) || defined(_M_X64) || defined(_M_AMD64) || \
 239        (defined(_M_IX86_FP) &amp;&amp; _M_IX86_FP &gt;= 2)
 240 #         define PNG_INTEL_SSE_OPT 1
 241 #      else
 242 #         define PNG_INTEL_SSE_OPT 0
 243 #      endif
 244 #   else
 245 #      define PNG_INTEL_SSE_OPT 0
 246 #   endif
 247 #endif
 248 
 249 #if PNG_INTEL_SSE_OPT &gt; 0
 250 #   ifndef PNG_INTEL_SSE_IMPLEMENTATION
 251 #      if defined(__SSE4_1__) || defined(__AVX__)
 252           /* We are not actually using AVX, but checking for AVX is the best
 253              way we can detect SSE4.1 and SSSE3 on MSVC.
 254           */
 255 #         define PNG_INTEL_SSE_IMPLEMENTATION 3
 256 #      elif defined(__SSSE3__)
 257 #         define PNG_INTEL_SSE_IMPLEMENTATION 2
 258 #      elif defined(__SSE2__) || defined(_M_X64) || defined(_M_AMD64) || \
 259        (defined(_M_IX86_FP) &amp;&amp; _M_IX86_FP &gt;= 2)
 260 #         define PNG_INTEL_SSE_IMPLEMENTATION 1
 261 #      else
 262 #         define PNG_INTEL_SSE_IMPLEMENTATION 0
 263 #      endif
 264 #   endif
 265 
 266 #   if PNG_INTEL_SSE_IMPLEMENTATION &gt; 0
 267 #      define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_sse2
 268 #   endif
 269 #else
 270 #   define PNG_INTEL_SSE_IMPLEMENTATION 0
 271 #endif
 272 
 273 #if PNG_MIPS_MSA_OPT &gt; 0
 274 #  define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_msa
 275 #  ifndef PNG_MIPS_MSA_IMPLEMENTATION
 276 #     if defined(__mips_msa)
 277 #        if defined(__clang__)
 278 #        elif defined(__GNUC__)
 279 #           if __GNUC__ &lt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &lt; 7)
 280 #              define PNG_MIPS_MSA_IMPLEMENTATION 2
 281 #           endif /* no GNUC support */
 282 #        endif /* __GNUC__ */
 283 #     else /* !defined __mips_msa */
 284 #        define PNG_MIPS_MSA_IMPLEMENTATION 2
 285 #     endif /* __mips_msa */
 286 #  endif /* !PNG_MIPS_MSA_IMPLEMENTATION */
 287 
 288 #  ifndef PNG_MIPS_MSA_IMPLEMENTATION
 289 #     define PNG_MIPS_MSA_IMPLEMENTATION 1
 290 #  endif
 291 #endif /* PNG_MIPS_MSA_OPT &gt; 0 */
 292 
 293 #if PNG_POWERPC_VSX_OPT &gt; 0
 294 #  define PNG_FILTER_OPTIMIZATIONS png_init_filter_functions_vsx
 295 #  define PNG_POWERPC_VSX_IMPLEMENTATION 1
 296 #endif
 297 
<a name="4" id="anc4"></a>
 298 /* Is this a build of a DLL where compilation of the object modules requires
 299  * different preprocessor settings to those required for a simple library?  If
 300  * so PNG_BUILD_DLL must be set.
 301  *
 302  * If libpng is used inside a DLL but that DLL does not export the libpng APIs
 303  * PNG_BUILD_DLL must not be set.  To avoid the code below kicking in build a
 304  * static library of libpng then link the DLL against that.
 305  */
 306 #ifndef PNG_BUILD_DLL
 307 #  ifdef DLL_EXPORT
 308       /* This is set by libtool when files are compiled for a DLL; libtool
 309        * always compiles twice, even on systems where it isn&#39;t necessary.  Set
 310        * PNG_BUILD_DLL in case it is necessary:
 311        */
 312 #     define PNG_BUILD_DLL
 313 #  else
 314 #     ifdef _WINDLL
 315          /* This is set by the Microsoft Visual Studio IDE in projects that
 316           * build a DLL.  It can&#39;t easily be removed from those projects (it
 317           * isn&#39;t visible in the Visual Studio UI) so it is a fairly reliable
 318           * indication that PNG_IMPEXP needs to be set to the DLL export
 319           * attributes.
 320           */
 321 #        define PNG_BUILD_DLL
 322 #     else
 323 #        ifdef __DLL__
 324             /* This is set by the Borland C system when compiling for a DLL
 325              * (as above.)
 326              */
 327 #           define PNG_BUILD_DLL
 328 #        else
 329             /* Add additional compiler cases here. */
 330 #        endif
 331 #     endif
 332 #  endif
 333 #endif /* Setting PNG_BUILD_DLL if required */
 334 
 335 /* See pngconf.h for more details: the builder of the library may set this on
 336  * the command line to the right thing for the specific compilation system or it
 337  * may be automagically set above (at present we know of no system where it does
 338  * need to be set on the command line.)
 339  *
 340  * PNG_IMPEXP must be set here when building the library to prevent pngconf.h
 341  * setting it to the &quot;import&quot; setting for a DLL build.
 342  */
 343 #ifndef PNG_IMPEXP
 344 #  ifdef PNG_BUILD_DLL
 345 #     define PNG_IMPEXP PNG_DLL_EXPORT
 346 #  else
 347       /* Not building a DLL, or the DLL doesn&#39;t require specific export
 348        * definitions.
 349        */
 350 #     define PNG_IMPEXP
 351 #  endif
 352 #endif
 353 
 354 /* No warnings for private or deprecated functions in the build: */
 355 #ifndef PNG_DEPRECATED
 356 #  define PNG_DEPRECATED
 357 #endif
 358 #ifndef PNG_PRIVATE
 359 #  define PNG_PRIVATE
 360 #endif
 361 
 362 /* Symbol preprocessing support.
 363  *
 364  * To enable listing global, but internal, symbols the following macros should
 365  * always be used to declare an extern data or function object in this file.
 366  */
 367 #ifndef PNG_INTERNAL_DATA
 368 #  define PNG_INTERNAL_DATA(type, name, array) PNG_LINKAGE_DATA type name array
 369 #endif
 370 
 371 #ifndef PNG_INTERNAL_FUNCTION
 372 #  define PNG_INTERNAL_FUNCTION(type, name, args, attributes)\
 373       PNG_LINKAGE_FUNCTION PNG_FUNCTION(type, name, args, PNG_EMPTY attributes)
 374 #endif
 375 
 376 #ifndef PNG_INTERNAL_CALLBACK
 377 #  define PNG_INTERNAL_CALLBACK(type, name, args, attributes)\
 378       PNG_LINKAGE_CALLBACK PNG_FUNCTION(type, (PNGCBAPI name), args,\
 379          PNG_EMPTY attributes)
 380 #endif
 381 
 382 /* If floating or fixed point APIs are disabled they may still be compiled
 383  * internally.  To handle this make sure they are declared as the appropriate
 384  * internal extern function (otherwise the symbol prefixing stuff won&#39;t work and
 385  * the functions will be used without definitions.)
 386  *
 387  * NOTE: although all the API functions are declared here they are not all
 388  * actually built!  Because the declarations are still made it is necessary to
 389  * fake out types that they depend on.
 390  */
 391 #ifndef PNG_FP_EXPORT
 392 #  ifndef PNG_FLOATING_POINT_SUPPORTED
 393 #     define PNG_FP_EXPORT(ordinal, type, name, args)\
 394          PNG_INTERNAL_FUNCTION(type, name, args, PNG_EMPTY);
 395 #     ifndef PNG_VERSION_INFO_ONLY
 396          typedef struct png_incomplete png_double;
 397          typedef png_double*           png_doublep;
 398          typedef const png_double*     png_const_doublep;
 399          typedef png_double**          png_doublepp;
 400 #     endif
 401 #  endif
 402 #endif
 403 #ifndef PNG_FIXED_EXPORT
 404 #  ifndef PNG_FIXED_POINT_SUPPORTED
 405 #     define PNG_FIXED_EXPORT(ordinal, type, name, args)\
 406          PNG_INTERNAL_FUNCTION(type, name, args, PNG_EMPTY);
 407 #  endif
 408 #endif
 409 
 410 #include &quot;png.h&quot;
 411 
 412 /* pngconf.h does not set PNG_DLL_EXPORT unless it is required, so: */
 413 #ifndef PNG_DLL_EXPORT
 414 #  define PNG_DLL_EXPORT
 415 #endif
 416 
 417 /* This is a global switch to set the compilation for an installed system
 418  * (a release build).  It can be set for testing debug builds to ensure that
 419  * they will compile when the build type is switched to RC or STABLE, the
 420  * default is just to use PNG_LIBPNG_BUILD_BASE_TYPE.  Set this in CPPFLAGS
 421  * with either:
 422  *
 423  *   -DPNG_RELEASE_BUILD Turns on the release compile path
 424  *   -DPNG_RELEASE_BUILD=0 Turns it off
 425  * or in your pngusr.h with
 426  *   #define PNG_RELEASE_BUILD=1 Turns on the release compile path
 427  *   #define PNG_RELEASE_BUILD=0 Turns it off
 428  */
 429 #ifndef PNG_RELEASE_BUILD
 430 #  define PNG_RELEASE_BUILD (PNG_LIBPNG_BUILD_BASE_TYPE &gt;= PNG_LIBPNG_BUILD_RC)
 431 #endif
 432 
 433 /* SECURITY and SAFETY:
 434  *
 435  * libpng is built with support for internal limits on image dimensions and
 436  * memory usage.  These are documented in scripts/pnglibconf.dfa of the
 437  * source and recorded in the machine generated header file pnglibconf.h.
 438  */
 439 
 440 /* If you are running on a machine where you cannot allocate more
 441  * than 64K of memory at once, uncomment this.  While libpng will not
 442  * normally need that much memory in a chunk (unless you load up a very
 443  * large file), zlib needs to know how big of a chunk it can use, and
 444  * libpng thus makes sure to check any memory allocation to verify it
 445  * will fit into memory.
 446  *
 447  * zlib provides &#39;MAXSEG_64K&#39; which, if defined, indicates the
 448  * same limit and pngconf.h (already included) sets the limit
 449  * if certain operating systems are detected.
 450  */
 451 #if defined(MAXSEG_64K) &amp;&amp; !defined(PNG_MAX_MALLOC_64K)
 452 #  define PNG_MAX_MALLOC_64K
 453 #endif
 454 
 455 #ifndef PNG_UNUSED
 456 /* Unused formal parameter warnings are silenced using the following macro
 457  * which is expected to have no bad effects on performance (optimizing
 458  * compilers will probably remove it entirely).  Note that if you replace
 459  * it with something other than whitespace, you must include the terminating
 460  * semicolon.
 461  */
 462 #  define PNG_UNUSED(param) (void)param;
 463 #endif
 464 
 465 /* Just a little check that someone hasn&#39;t tried to define something
 466  * contradictory.
 467  */
 468 #if (PNG_ZBUF_SIZE &gt; 65536L) &amp;&amp; defined(PNG_MAX_MALLOC_64K)
 469 #  undef PNG_ZBUF_SIZE
 470 #  define PNG_ZBUF_SIZE 65536L
 471 #endif
 472 
 473 /* If warnings or errors are turned off the code is disabled or redirected here.
 474  * From 1.5.4 functions have been added to allow very limited formatting of
 475  * error and warning messages - this code will also be disabled here.
 476  */
 477 #ifdef PNG_WARNINGS_SUPPORTED
 478 #  define PNG_WARNING_PARAMETERS(p) png_warning_parameters p;
 479 #else
 480 #  define png_warning_parameter(p,number,string) ((void)0)
 481 #  define png_warning_parameter_unsigned(p,number,format,value) ((void)0)
 482 #  define png_warning_parameter_signed(p,number,format,value) ((void)0)
 483 #  define png_formatted_warning(pp,p,message) ((void)(pp))
 484 #  define PNG_WARNING_PARAMETERS(p)
 485 #endif
 486 #ifndef PNG_ERROR_TEXT_SUPPORTED
 487 #  define png_fixed_error(s1,s2) png_err(s1)
 488 #endif
 489 
 490 /* Some fixed point APIs are still required even if not exported because
 491  * they get used by the corresponding floating point APIs.  This magic
 492  * deals with this:
 493  */
 494 #ifdef PNG_FIXED_POINT_SUPPORTED
 495 #  define PNGFAPI PNGAPI
 496 #else
 497 #  define PNGFAPI /* PRIVATE */
 498 #endif
 499 
 500 #ifndef PNG_VERSION_INFO_ONLY
 501 /* Other defines specific to compilers can go here.  Try to keep
 502  * them inside an appropriate ifdef/endif pair for portability.
 503  */
 504 
 505 /* C allows up-casts from (void*) to any pointer and (const void*) to any
 506  * pointer to a const object.  C++ regards this as a type error and requires an
 507  * explicit, static, cast and provides the static_cast&lt;&gt; rune to ensure that
 508  * const is not cast away.
 509  */
 510 #ifdef __cplusplus
 511 #  define png_voidcast(type, value) static_cast&lt;type&gt;(value)
 512 #  define png_constcast(type, value) const_cast&lt;type&gt;(value)
 513 #  define png_aligncast(type, value) \
 514    static_cast&lt;type&gt;(static_cast&lt;void*&gt;(value))
 515 #  define png_aligncastconst(type, value) \
 516    static_cast&lt;type&gt;(static_cast&lt;const void*&gt;(value))
 517 #else
 518 #  define png_voidcast(type, value) (value)
 519 #  ifdef _WIN64
 520 #     ifdef __GNUC__
 521          typedef unsigned long long png_ptruint;
 522 #     else
 523          typedef unsigned __int64 png_ptruint;
 524 #     endif
 525 #  else
 526       typedef unsigned long png_ptruint;
 527 #  endif
 528 #  define png_constcast(type, value) ((type)(png_ptruint)(const void*)(value))
 529 #  define png_aligncast(type, value) ((void*)(value))
 530 #  define png_aligncastconst(type, value) ((const void*)(value))
 531 #endif /* __cplusplus */
 532 
 533 #if defined(PNG_FLOATING_POINT_SUPPORTED) ||\
 534     defined(PNG_FLOATING_ARITHMETIC_SUPPORTED)
 535    /* png.c requires the following ANSI-C constants if the conversion of
 536     * floating point to ASCII is implemented therein:
 537     *
 538     *  DBL_DIG  Maximum number of decimal digits (can be set to any constant)
 539     *  DBL_MIN  Smallest normalized fp number (can be set to an arbitrary value)
 540     *  DBL_MAX  Maximum floating point number (can be set to an arbitrary value)
 541     */
 542 #  include &lt;float.h&gt;
 543 
 544 #  if (defined(__MWERKS__) &amp;&amp; defined(macintosh)) || defined(applec) || \
 545     defined(THINK_C) || defined(__SC__) || defined(TARGET_OS_MAC)
 546    /* We need to check that &lt;math.h&gt; hasn&#39;t already been included earlier
 547     * as it seems it doesn&#39;t agree with &lt;fp.h&gt;, yet we should really use
 548     * &lt;fp.h&gt; if possible.
 549     */
 550 #    if !defined(__MATH_H__) &amp;&amp; !defined(__MATH_H) &amp;&amp; !defined(__cmath__)
 551 #      include &lt;fp.h&gt;
 552 #    endif
 553 #  else
 554 #    include &lt;math.h&gt;
 555 #  endif
 556 #  if defined(_AMIGA) &amp;&amp; defined(__SASC) &amp;&amp; defined(_M68881)
 557    /* Amiga SAS/C: We must include builtin FPU functions when compiling using
 558     * MATH=68881
 559     */
 560 #    include &lt;m68881.h&gt;
 561 #  endif
 562 #endif
 563 
 564 /* This provides the non-ANSI (far) memory allocation routines. */
 565 #if defined(__TURBOC__) &amp;&amp; defined(__MSDOS__)
 566 #  include &lt;mem.h&gt;
 567 #  include &lt;alloc.h&gt;
 568 #endif
 569 
 570 #if defined(WIN32) || defined(_Windows) || defined(_WINDOWS) || \
 571     defined(_WIN32) || defined(__WIN32__)
 572 #  include &lt;windows.h&gt;  /* defines _WINDOWS_ macro */
 573 #endif
 574 #endif /* PNG_VERSION_INFO_ONLY */
 575 
 576 /* Moved here around 1.5.0beta36 from pngconf.h */
 577 /* Users may want to use these so they are not private.  Any library
 578  * functions that are passed far data must be model-independent.
 579  */
 580 
 581 /* Memory model/platform independent fns */
 582 #ifndef PNG_ABORT
 583 #  ifdef _WINDOWS_
 584 #    define PNG_ABORT() ExitProcess(0)
 585 #  else
 586 #    define PNG_ABORT() abort()
 587 #  endif
 588 #endif
 589 
 590 /* These macros may need to be architecture dependent. */
 591 #define PNG_ALIGN_NONE   0 /* do not use data alignment */
 592 #define PNG_ALIGN_ALWAYS 1 /* assume unaligned accesses are OK */
 593 #ifdef offsetof
 594 #  define PNG_ALIGN_OFFSET 2 /* use offsetof to determine alignment */
 595 #else
 596 #  define PNG_ALIGN_OFFSET -1 /* prevent the use of this */
 597 #endif
 598 #define PNG_ALIGN_SIZE   3 /* use sizeof to determine alignment */
 599 
 600 #ifndef PNG_ALIGN_TYPE
 601    /* Default to using aligned access optimizations and requiring alignment to a
 602     * multiple of the data type size.  Override in a compiler specific fashion
 603     * if necessary by inserting tests here:
 604     */
 605 #  define PNG_ALIGN_TYPE PNG_ALIGN_SIZE
 606 #endif
 607 
 608 #if PNG_ALIGN_TYPE == PNG_ALIGN_SIZE
 609    /* This is used because in some compiler implementations non-aligned
 610     * structure members are supported, so the offsetof approach below fails.
 611     * Set PNG_ALIGN_SIZE=0 for compiler combinations where unaligned access
 612     * is good for performance.  Do not do this unless you have tested the result
 613     * and understand it.
 614     */
 615 #  define png_alignof(type) (sizeof (type))
 616 #else
 617 #  if PNG_ALIGN_TYPE == PNG_ALIGN_OFFSET
 618 #     define png_alignof(type) offsetof(struct{char c; type t;}, t)
 619 #  else
 620 #     if PNG_ALIGN_TYPE == PNG_ALIGN_ALWAYS
 621 #        define png_alignof(type) (1)
 622 #     endif
 623       /* Else leave png_alignof undefined to prevent use thereof */
 624 #  endif
 625 #endif
 626 
 627 /* This implicitly assumes alignment is always to a power of 2. */
 628 #ifdef png_alignof
 629 #  define png_isaligned(ptr, type)\
 630    (((type)((const char*)ptr-(const char*)0) &amp; \
 631    (type)(png_alignof(type)-1)) == 0)
 632 #else
 633 #  define png_isaligned(ptr, type) 0
 634 #endif
 635 
 636 /* End of memory model/platform independent support */
 637 /* End of 1.5.0beta36 move from pngconf.h */
 638 
 639 /* CONSTANTS and UTILITY MACROS
 640  * These are used internally by libpng and not exposed in the API
 641  */
 642 
 643 /* Various modes of operation.  Note that after an init, mode is set to
 644  * zero automatically when the structure is created.  Three of these
 645  * are defined in png.h because they need to be visible to applications
 646  * that call png_set_unknown_chunk().
 647  */
 648 /* #define PNG_HAVE_IHDR            0x01U (defined in png.h) */
 649 /* #define PNG_HAVE_PLTE            0x02U (defined in png.h) */
 650 #define PNG_HAVE_IDAT               0x04U
 651 /* #define PNG_AFTER_IDAT           0x08U (defined in png.h) */
 652 #define PNG_HAVE_IEND               0x10U
 653                    /*               0x20U (unused) */
 654                    /*               0x40U (unused) */
 655                    /*               0x80U (unused) */
 656 #define PNG_HAVE_CHUNK_HEADER      0x100U
 657 #define PNG_WROTE_tIME             0x200U
 658 #define PNG_WROTE_INFO_BEFORE_PLTE 0x400U
 659 #define PNG_BACKGROUND_IS_GRAY     0x800U
 660 #define PNG_HAVE_PNG_SIGNATURE    0x1000U
 661 #define PNG_HAVE_CHUNK_AFTER_IDAT 0x2000U /* Have another chunk after IDAT */
 662                    /*             0x4000U (unused) */
 663 #define PNG_IS_READ_STRUCT        0x8000U /* Else is a write struct */
 664 
 665 /* Flags for the transformations the PNG library does on the image data */
 666 #define PNG_BGR                 0x0001U
 667 #define PNG_INTERLACE           0x0002U
 668 #define PNG_PACK                0x0004U
 669 #define PNG_SHIFT               0x0008U
 670 #define PNG_SWAP_BYTES          0x0010U
 671 #define PNG_INVERT_MONO         0x0020U
 672 #define PNG_QUANTIZE            0x0040U
 673 #define PNG_COMPOSE             0x0080U    /* Was PNG_BACKGROUND */
 674 #define PNG_BACKGROUND_EXPAND   0x0100U
 675 #define PNG_EXPAND_16           0x0200U    /* Added to libpng 1.5.2 */
 676 #define PNG_16_TO_8             0x0400U    /* Becomes &#39;chop&#39; in 1.5.4 */
 677 #define PNG_RGBA                0x0800U
 678 #define PNG_EXPAND              0x1000U
 679 #define PNG_GAMMA               0x2000U
 680 #define PNG_GRAY_TO_RGB         0x4000U
 681 #define PNG_FILLER              0x8000U
 682 #define PNG_PACKSWAP           0x10000U
 683 #define PNG_SWAP_ALPHA         0x20000U
 684 #define PNG_STRIP_ALPHA        0x40000U
 685 #define PNG_INVERT_ALPHA       0x80000U
 686 #define PNG_USER_TRANSFORM    0x100000U
 687 #define PNG_RGB_TO_GRAY_ERR   0x200000U
 688 #define PNG_RGB_TO_GRAY_WARN  0x400000U
 689 #define PNG_RGB_TO_GRAY       0x600000U /* two bits, RGB_TO_GRAY_ERR|WARN */
 690 #define PNG_ENCODE_ALPHA      0x800000U /* Added to libpng-1.5.4 */
 691 #define PNG_ADD_ALPHA        0x1000000U /* Added to libpng-1.2.7 */
 692 #define PNG_EXPAND_tRNS      0x2000000U /* Added to libpng-1.2.9 */
 693 #define PNG_SCALE_16_TO_8    0x4000000U /* Added to libpng-1.5.4 */
 694                        /*    0x8000000U unused */
 695                        /*   0x10000000U unused */
 696                        /*   0x20000000U unused */
 697                        /*   0x40000000U unused */
 698 /* Flags for png_create_struct */
 699 #define PNG_STRUCT_PNG   0x0001U
 700 #define PNG_STRUCT_INFO  0x0002U
 701 
 702 /* Flags for the png_ptr-&gt;flags rather than declaring a byte for each one */
 703 #define PNG_FLAG_ZLIB_CUSTOM_STRATEGY     0x0001U
 704 #define PNG_FLAG_ZSTREAM_INITIALIZED      0x0002U /* Added to libpng-1.6.0 */
 705                                   /*      0x0004U    unused */
 706 #define PNG_FLAG_ZSTREAM_ENDED            0x0008U /* Added to libpng-1.6.0 */
 707                                   /*      0x0010U    unused */
 708                                   /*      0x0020U    unused */
 709 #define PNG_FLAG_ROW_INIT                 0x0040U
 710 #define PNG_FLAG_FILLER_AFTER             0x0080U
 711 #define PNG_FLAG_CRC_ANCILLARY_USE        0x0100U
 712 #define PNG_FLAG_CRC_ANCILLARY_NOWARN     0x0200U
 713 #define PNG_FLAG_CRC_CRITICAL_USE         0x0400U
 714 #define PNG_FLAG_CRC_CRITICAL_IGNORE      0x0800U
 715 #define PNG_FLAG_ASSUME_sRGB              0x1000U /* Added to libpng-1.5.4 */
 716 #define PNG_FLAG_OPTIMIZE_ALPHA           0x2000U /* Added to libpng-1.5.4 */
 717 #define PNG_FLAG_DETECT_UNINITIALIZED     0x4000U /* Added to libpng-1.5.4 */
 718 /* #define PNG_FLAG_KEEP_UNKNOWN_CHUNKS      0x8000U */
 719 /* #define PNG_FLAG_KEEP_UNSAFE_CHUNKS      0x10000U */
 720 #define PNG_FLAG_LIBRARY_MISMATCH        0x20000U
 721 #define PNG_FLAG_STRIP_ERROR_NUMBERS     0x40000U
 722 #define PNG_FLAG_STRIP_ERROR_TEXT        0x80000U
 723 #define PNG_FLAG_BENIGN_ERRORS_WARN     0x100000U /* Added to libpng-1.4.0 */
 724 #define PNG_FLAG_APP_WARNINGS_WARN      0x200000U /* Added to libpng-1.6.0 */
 725 #define PNG_FLAG_APP_ERRORS_WARN        0x400000U /* Added to libpng-1.6.0 */
 726                                   /*    0x800000U    unused */
 727                                   /*   0x1000000U    unused */
 728                                   /*   0x2000000U    unused */
 729                                   /*   0x4000000U    unused */
 730                                   /*   0x8000000U    unused */
 731                                   /*  0x10000000U    unused */
 732                                   /*  0x20000000U    unused */
 733                                   /*  0x40000000U    unused */
 734 
 735 #define PNG_FLAG_CRC_ANCILLARY_MASK (PNG_FLAG_CRC_ANCILLARY_USE | \
 736                                      PNG_FLAG_CRC_ANCILLARY_NOWARN)
 737 
 738 #define PNG_FLAG_CRC_CRITICAL_MASK  (PNG_FLAG_CRC_CRITICAL_USE | \
 739                                      PNG_FLAG_CRC_CRITICAL_IGNORE)
 740 
 741 #define PNG_FLAG_CRC_MASK           (PNG_FLAG_CRC_ANCILLARY_MASK | \
 742                                      PNG_FLAG_CRC_CRITICAL_MASK)
 743 
 744 /* Save typing and make code easier to understand */
 745 
 746 #define PNG_COLOR_DIST(c1, c2) (abs((int)((c1).red) - (int)((c2).red)) + \
 747    abs((int)((c1).green) - (int)((c2).green)) + \
 748    abs((int)((c1).blue) - (int)((c2).blue)))
 749 
 750 /* Added to libpng-1.6.0: scale a 16-bit value in the range 0..65535 to 0..255
 751  * by dividing by 257 *with rounding*.  This macro is exact for the given range.
 752  * See the discourse in pngrtran.c png_do_scale_16_to_8.  The values in the
 753  * macro were established by experiment (modifying the added value).  The macro
 754  * has a second variant that takes a value already scaled by 255 and divides by
 755  * 65535 - this has a maximum error of .502.  Over the range 0..65535*65535 it
 756  * only gives off-by-one errors and only for 0.5% (1 in 200) of the values.
 757  */
 758 #define PNG_DIV65535(v24) (((v24) + 32895) &gt;&gt; 16)
 759 #define PNG_DIV257(v16) PNG_DIV65535((png_uint_32)(v16) * 255)
 760 
 761 /* Added to libpng-1.2.6 JB */
 762 #define PNG_ROWBYTES(pixel_bits, width) \
 763     ((pixel_bits) &gt;= 8 ? \
 764     ((size_t)(width) * (((size_t)(pixel_bits)) &gt;&gt; 3)) : \
 765     (( ((size_t)(width) * ((size_t)(pixel_bits))) + 7) &gt;&gt; 3) )
 766 
 767 /* This returns the number of trailing bits in the last byte of a row, 0 if the
 768  * last byte is completely full of pixels.  It is, in principle, (pixel_bits x
 769  * width) % 8, but that would overflow for large &#39;width&#39;.  The second macro is
 770  * the same except that it returns the number of unused bits in the last byte;
 771  * (8-TRAILBITS), but 0 when TRAILBITS is 0.
 772  *
 773  * NOTE: these macros are intended to be self-evidently correct and never
 774  * overflow on the assumption that pixel_bits is in the range 0..255.  The
 775  * arguments are evaluated only once and they can be signed (e.g. as a result of
 776  * the integral promotions).  The result of the expression always has type
 777  * (png_uint_32), however the compiler always knows it is in the range 0..7.
 778  */
 779 #define PNG_TRAILBITS(pixel_bits, width) \
 780     (((pixel_bits) * ((width) % (png_uint_32)8)) % 8)
 781 
 782 #define PNG_PADBITS(pixel_bits, width) \
 783     ((8 - PNG_TRAILBITS(pixel_bits, width)) % 8)
 784 
 785 /* PNG_OUT_OF_RANGE returns true if value is outside the range
 786  * ideal-delta..ideal+delta.  Each argument is evaluated twice.
 787  * &quot;ideal&quot; and &quot;delta&quot; should be constants, normally simple
 788  * integers, &quot;value&quot; a variable. Added to libpng-1.2.6 JB
 789  */
 790 #define PNG_OUT_OF_RANGE(value, ideal, delta) \
 791    ( (value) &lt; (ideal)-(delta) || (value) &gt; (ideal)+(delta) )
 792 
 793 /* Conversions between fixed and floating point, only defined if
 794  * required (to make sure the code doesn&#39;t accidentally use float
 795  * when it is supposedly disabled.)
 796  */
 797 #ifdef PNG_FLOATING_POINT_SUPPORTED
 798 /* The floating point conversion can&#39;t overflow, though it can and
 799  * does lose accuracy relative to the original fixed point value.
 800  * In practice this doesn&#39;t matter because png_fixed_point only
 801  * stores numbers with very low precision.  The png_ptr and s
 802  * arguments are unused by default but are there in case error
 803  * checking becomes a requirement.
 804  */
 805 #define png_float(png_ptr, fixed, s) (.00001 * (fixed))
 806 
 807 /* The fixed point conversion performs range checking and evaluates
 808  * its argument multiple times, so must be used with care.  The
 809  * range checking uses the PNG specification values for a signed
 810  * 32-bit fixed point value except that the values are deliberately
 811  * rounded-to-zero to an integral value - 21474 (21474.83 is roughly
 812  * (2^31-1) * 100000). &#39;s&#39; is a string that describes the value being
 813  * converted.
 814  *
 815  * NOTE: this macro will raise a png_error if the range check fails,
 816  * therefore it is normally only appropriate to use this on values
 817  * that come from API calls or other sources where an out of range
 818  * error indicates a programming error, not a data error!
 819  *
 820  * NOTE: by default this is off - the macro is not used - because the
 821  * function call saves a lot of code.
 822  */
 823 #ifdef PNG_FIXED_POINT_MACRO_SUPPORTED
 824 #define png_fixed(png_ptr, fp, s) ((fp) &lt;= 21474 &amp;&amp; (fp) &gt;= -21474 ?\
 825     ((png_fixed_point)(100000 * (fp))) : (png_fixed_error(png_ptr, s),0))
 826 #endif
 827 /* else the corresponding function is defined below, inside the scope of the
 828  * cplusplus test.
 829  */
 830 #endif
 831 
 832 /* Constants for known chunk types.  If you need to add a chunk, define the name
 833  * here.  For historical reasons these constants have the form png_&lt;name&gt;; i.e.
 834  * the prefix is lower case.  Please use decimal values as the parameters to
 835  * match the ISO PNG specification and to avoid relying on the C locale
 836  * interpretation of character values.
 837  *
 838  * Prior to 1.5.6 these constants were strings, as of 1.5.6 png_uint_32 values
 839  * are computed and a new macro (PNG_STRING_FROM_CHUNK) added to allow a string
 840  * to be generated if required.
 841  *
 842  * PNG_32b correctly produces a value shifted by up to 24 bits, even on
 843  * architectures where (int) is only 16 bits.
 844  */
 845 #define PNG_32b(b,s) ((png_uint_32)(b) &lt;&lt; (s))
 846 #define PNG_U32(b1,b2,b3,b4) \
 847    (PNG_32b(b1,24) | PNG_32b(b2,16) | PNG_32b(b3,8) | PNG_32b(b4,0))
 848 
 849 /* Constants for known chunk types.
 850  *
 851  * MAINTAINERS: If you need to add a chunk, define the name here.
 852  * For historical reasons these constants have the form png_&lt;name&gt;; i.e.
 853  * the prefix is lower case.  Please use decimal values as the parameters to
 854  * match the ISO PNG specification and to avoid relying on the C locale
 855  * interpretation of character values.  Please keep the list sorted.
 856  *
 857  * Notice that PNG_U32 is used to define a 32-bit value for the 4 byte chunk
 858  * type.  In fact the specification does not express chunk types this way,
 859  * however using a 32-bit value means that the chunk type can be read from the
 860  * stream using exactly the same code as used for a 32-bit unsigned value and
 861  * can be examined far more efficiently (using one arithmetic compare).
 862  *
 863  * Prior to 1.5.6 the chunk type constants were expressed as C strings.  The
 864  * libpng API still uses strings for &#39;unknown&#39; chunks and a macro,
 865  * PNG_STRING_FROM_CHUNK, allows a string to be generated if required.  Notice
 866  * that for portable code numeric values must still be used; the string &quot;IHDR&quot;
 867  * is not portable and neither is PNG_U32(&#39;I&#39;, &#39;H&#39;, &#39;D&#39;, &#39;R&#39;).
 868  *
 869  * In 1.7.0 the definitions will be made public in png.h to avoid having to
 870  * duplicate the same definitions in application code.
 871  */
 872 #define png_IDAT PNG_U32( 73,  68,  65,  84)
 873 #define png_IEND PNG_U32( 73,  69,  78,  68)
 874 #define png_IHDR PNG_U32( 73,  72,  68,  82)
 875 #define png_PLTE PNG_U32( 80,  76,  84,  69)
 876 #define png_bKGD PNG_U32( 98,  75,  71,  68)
 877 #define png_cHRM PNG_U32( 99,  72,  82,  77)
 878 #define png_eXIf PNG_U32(101,  88,  73, 102) /* registered July 2017 */
 879 #define png_fRAc PNG_U32(102,  82,  65,  99) /* registered, not defined */
 880 #define png_gAMA PNG_U32(103,  65,  77,  65)
 881 #define png_gIFg PNG_U32(103,  73,  70, 103)
 882 #define png_gIFt PNG_U32(103,  73,  70, 116) /* deprecated */
 883 #define png_gIFx PNG_U32(103,  73,  70, 120)
 884 #define png_hIST PNG_U32(104,  73,  83,  84)
 885 #define png_iCCP PNG_U32(105,  67,  67,  80)
 886 #define png_iTXt PNG_U32(105,  84,  88, 116)
 887 #define png_oFFs PNG_U32(111,  70,  70, 115)
 888 #define png_pCAL PNG_U32(112,  67,  65,  76)
 889 #define png_pHYs PNG_U32(112,  72,  89, 115)
 890 #define png_sBIT PNG_U32(115,  66,  73,  84)
 891 #define png_sCAL PNG_U32(115,  67,  65,  76)
 892 #define png_sPLT PNG_U32(115,  80,  76,  84)
 893 #define png_sRGB PNG_U32(115,  82,  71,  66)
 894 #define png_sTER PNG_U32(115,  84,  69,  82)
 895 #define png_tEXt PNG_U32(116,  69,  88, 116)
 896 #define png_tIME PNG_U32(116,  73,  77,  69)
 897 #define png_tRNS PNG_U32(116,  82,  78,  83)
 898 #define png_zTXt PNG_U32(122,  84,  88, 116)
 899 
 900 /* The following will work on (signed char*) strings, whereas the get_uint_32
 901  * macro will fail on top-bit-set values because of the sign extension.
 902  */
 903 #define PNG_CHUNK_FROM_STRING(s)\
 904    PNG_U32(0xff &amp; (s)[0], 0xff &amp; (s)[1], 0xff &amp; (s)[2], 0xff &amp; (s)[3])
 905 
 906 /* This uses (char), not (png_byte) to avoid warnings on systems where (char) is
 907  * signed and the argument is a (char[])  This macro will fail miserably on
 908  * systems where (char) is more than 8 bits.
 909  */
 910 #define PNG_STRING_FROM_CHUNK(s,c)\
 911    (void)(((char*)(s))[0]=(char)(((c)&gt;&gt;24) &amp; 0xff), \
 912    ((char*)(s))[1]=(char)(((c)&gt;&gt;16) &amp; 0xff),\
 913    ((char*)(s))[2]=(char)(((c)&gt;&gt;8) &amp; 0xff), \
 914    ((char*)(s))[3]=(char)((c &amp; 0xff)))
 915 
 916 /* Do the same but terminate with a null character. */
 917 #define PNG_CSTRING_FROM_CHUNK(s,c)\
 918    (void)(PNG_STRING_FROM_CHUNK(s,c), ((char*)(s))[4] = 0)
 919 
 920 /* Test on flag values as defined in the spec (section 5.4): */
 921 #define PNG_CHUNK_ANCILLARY(c)   (1 &amp; ((c) &gt;&gt; 29))
 922 #define PNG_CHUNK_CRITICAL(c)     (!PNG_CHUNK_ANCILLARY(c))
 923 #define PNG_CHUNK_PRIVATE(c)      (1 &amp; ((c) &gt;&gt; 21))
 924 #define PNG_CHUNK_RESERVED(c)     (1 &amp; ((c) &gt;&gt; 13))
 925 #define PNG_CHUNK_SAFE_TO_COPY(c) (1 &amp; ((c) &gt;&gt;  5))
 926 
 927 /* Gamma values (new at libpng-1.5.4): */
 928 #define PNG_GAMMA_MAC_OLD 151724  /* Assume &#39;1.8&#39; is really 2.2/1.45! */
 929 #define PNG_GAMMA_MAC_INVERSE 65909
 930 #define PNG_GAMMA_sRGB_INVERSE 45455
 931 
 932 /* Almost everything below is C specific; the #defines above can be used in
 933  * non-C code (so long as it is C-preprocessed) the rest of this stuff cannot.
 934  */
 935 #ifndef PNG_VERSION_INFO_ONLY
 936 
 937 #include &quot;pngstruct.h&quot;
 938 #include &quot;pnginfo.h&quot;
 939 
 940 /* Validate the include paths - the include path used to generate pnglibconf.h
 941  * must match that used in the build, or we must be using pnglibconf.h.prebuilt:
 942  */
 943 #if PNG_ZLIB_VERNUM != 0 &amp;&amp; PNG_ZLIB_VERNUM != ZLIB_VERNUM
 944 #  error ZLIB_VERNUM != PNG_ZLIB_VERNUM \
 945       &quot;-I (include path) error: see the notes in pngpriv.h&quot;
 946    /* This means that when pnglibconf.h was built the copy of zlib.h that it
 947     * used is not the same as the one being used here.  Because the build of
 948     * libpng makes decisions to use inflateInit2 and inflateReset2 based on the
 949     * zlib version number and because this affects handling of certain broken
 950     * PNG files the -I directives must match.
 951     *
 952     * The most likely explanation is that you passed a -I in CFLAGS. This will
 953     * not work; all the preprocessor directives and in particular all the -I
 954     * directives must be in CPPFLAGS.
 955     */
 956 #endif
 957 
 958 /* This is used for 16-bit gamma tables -- only the top level pointers are
 959  * const; this could be changed:
 960  */
 961 typedef const png_uint_16p * png_const_uint_16pp;
 962 
 963 /* Added to libpng-1.5.7: sRGB conversion tables */
 964 #if defined(PNG_SIMPLIFIED_READ_SUPPORTED) ||\
 965    defined(PNG_SIMPLIFIED_WRITE_SUPPORTED)
 966 #ifdef PNG_SIMPLIFIED_READ_SUPPORTED
 967 PNG_INTERNAL_DATA(const png_uint_16, png_sRGB_table, [256]);
 968    /* Convert from an sRGB encoded value 0..255 to a 16-bit linear value,
 969     * 0..65535.  This table gives the closest 16-bit answers (no errors).
 970     */
 971 #endif
 972 
 973 PNG_INTERNAL_DATA(const png_uint_16, png_sRGB_base, [512]);
 974 PNG_INTERNAL_DATA(const png_byte, png_sRGB_delta, [512]);
 975 
 976 #define PNG_sRGB_FROM_LINEAR(linear) \
 977   ((png_byte)(0xff &amp; ((png_sRGB_base[(linear)&gt;&gt;15] \
 978    + ((((linear) &amp; 0x7fff)*png_sRGB_delta[(linear)&gt;&gt;15])&gt;&gt;12)) &gt;&gt; 8)))
 979    /* Given a value &#39;linear&#39; in the range 0..255*65535 calculate the 8-bit sRGB
 980     * encoded value with maximum error 0.646365.  Note that the input is not a
 981     * 16-bit value; it has been multiplied by 255! */
 982 #endif /* SIMPLIFIED_READ/WRITE */
 983 
 984 
 985 /* Inhibit C++ name-mangling for libpng functions but not for system calls. */
 986 #ifdef __cplusplus
 987 extern &quot;C&quot; {
 988 #endif /* __cplusplus */
 989 
 990 /* Internal functions; these are not exported from a DLL however because they
 991  * are used within several of the C source files they have to be C extern.
 992  *
 993  * All of these functions must be declared with PNG_INTERNAL_FUNCTION.
 994  */
 995 
 996 /* Zlib support */
 997 #define PNG_UNEXPECTED_ZLIB_RETURN (-7)
 998 PNG_INTERNAL_FUNCTION(void, png_zstream_error,(png_structrp png_ptr, int ret),
 999    PNG_EMPTY);
1000    /* Used by the zlib handling functions to ensure that z_stream::msg is always
1001     * set before they return.
1002     */
1003 
1004 #ifdef PNG_WRITE_SUPPORTED
1005 PNG_INTERNAL_FUNCTION(void,png_free_buffer_list,(png_structrp png_ptr,
1006    png_compression_bufferp *list),PNG_EMPTY);
1007    /* Free the buffer list used by the compressed write code. */
1008 #endif
1009 
1010 #if defined(PNG_FLOATING_POINT_SUPPORTED) &amp;&amp; \
1011    !defined(PNG_FIXED_POINT_MACRO_SUPPORTED) &amp;&amp; \
1012    (defined(PNG_gAMA_SUPPORTED) || defined(PNG_cHRM_SUPPORTED) || \
1013    defined(PNG_sCAL_SUPPORTED) || defined(PNG_READ_BACKGROUND_SUPPORTED) || \
1014    defined(PNG_READ_RGB_TO_GRAY_SUPPORTED)) || \
1015    (defined(PNG_sCAL_SUPPORTED) &amp;&amp; \
1016    defined(PNG_FLOATING_ARITHMETIC_SUPPORTED))
1017 PNG_INTERNAL_FUNCTION(png_fixed_point,png_fixed,(png_const_structrp png_ptr,
1018    double fp, png_const_charp text),PNG_EMPTY);
1019 #endif
1020 
1021 /* Check the user version string for compatibility, returns false if the version
1022  * numbers aren&#39;t compatible.
1023  */
1024 PNG_INTERNAL_FUNCTION(int,png_user_version_check,(png_structrp png_ptr,
1025    png_const_charp user_png_ver),PNG_EMPTY);
1026 
1027 /* Internal base allocator - no messages, NULL on failure to allocate.  This
1028  * does, however, call the application provided allocator and that could call
1029  * png_error (although that would be a bug in the application implementation.)
1030  */
1031 PNG_INTERNAL_FUNCTION(png_voidp,png_malloc_base,(png_const_structrp png_ptr,
1032    png_alloc_size_t size),PNG_ALLOCATED);
1033 
1034 #if defined(PNG_TEXT_SUPPORTED) || defined(PNG_sPLT_SUPPORTED) ||\
1035    defined(PNG_STORE_UNKNOWN_CHUNKS_SUPPORTED)
1036 /* Internal array allocator, outputs no error or warning messages on failure,
1037  * just returns NULL.
1038  */
1039 PNG_INTERNAL_FUNCTION(png_voidp,png_malloc_array,(png_const_structrp png_ptr,
1040    int nelements, size_t element_size),PNG_ALLOCATED);
1041 
1042 /* The same but an existing array is extended by add_elements.  This function
1043  * also memsets the new elements to 0 and copies the old elements.  The old
1044  * array is not freed or altered.
1045  */
1046 PNG_INTERNAL_FUNCTION(png_voidp,png_realloc_array,(png_const_structrp png_ptr,
1047    png_const_voidp array, int old_elements, int add_elements,
1048    size_t element_size),PNG_ALLOCATED);
1049 #endif /* text, sPLT or unknown chunks */
1050 
1051 /* Magic to create a struct when there is no struct to call the user supplied
1052  * memory allocators.  Because error handling has not been set up the memory
1053  * handlers can&#39;t safely call png_error, but this is an obscure and undocumented
1054  * restriction so libpng has to assume that the &#39;free&#39; handler, at least, might
1055  * call png_error.
1056  */
1057 PNG_INTERNAL_FUNCTION(png_structp,png_create_png_struct,
1058    (png_const_charp user_png_ver, png_voidp error_ptr, png_error_ptr error_fn,
1059     png_error_ptr warn_fn, png_voidp mem_ptr, png_malloc_ptr malloc_fn,
1060     png_free_ptr free_fn),PNG_ALLOCATED);
1061 
1062 /* Free memory from internal libpng struct */
1063 PNG_INTERNAL_FUNCTION(void,png_destroy_png_struct,(png_structrp png_ptr),
1064    PNG_EMPTY);
1065 
1066 /* Free an allocated jmp_buf (always succeeds) */
1067 PNG_INTERNAL_FUNCTION(void,png_free_jmpbuf,(png_structrp png_ptr),PNG_EMPTY);
1068 
1069 /* Function to allocate memory for zlib.  PNGAPI is disallowed. */
1070 PNG_INTERNAL_FUNCTION(voidpf,png_zalloc,(voidpf png_ptr, uInt items, uInt size),
1071    PNG_ALLOCATED);
1072 
1073 /* Function to free memory for zlib.  PNGAPI is disallowed. */
1074 PNG_INTERNAL_FUNCTION(void,png_zfree,(voidpf png_ptr, voidpf ptr),PNG_EMPTY);
1075 
1076 /* Next four functions are used internally as callbacks.  PNGCBAPI is required
1077  * but not PNG_EXPORT.  PNGAPI added at libpng version 1.2.3, changed to
1078  * PNGCBAPI at 1.5.0
1079  */
1080 
1081 PNG_INTERNAL_FUNCTION(void PNGCBAPI,png_default_read_data,(png_structp png_ptr,
1082     png_bytep data, size_t length),PNG_EMPTY);
1083 
1084 #ifdef PNG_PROGRESSIVE_READ_SUPPORTED
1085 PNG_INTERNAL_FUNCTION(void PNGCBAPI,png_push_fill_buffer,(png_structp png_ptr,
1086     png_bytep buffer, size_t length),PNG_EMPTY);
1087 #endif
1088 
1089 PNG_INTERNAL_FUNCTION(void PNGCBAPI,png_default_write_data,(png_structp png_ptr,
1090     png_bytep data, size_t length),PNG_EMPTY);
1091 
1092 #ifdef PNG_WRITE_FLUSH_SUPPORTED
1093 #  ifdef PNG_STDIO_SUPPORTED
1094 PNG_INTERNAL_FUNCTION(void PNGCBAPI,png_default_flush,(png_structp png_ptr),
1095    PNG_EMPTY);
1096 #  endif
1097 #endif
1098 
1099 /* Reset the CRC variable */
1100 PNG_INTERNAL_FUNCTION(void,png_reset_crc,(png_structrp png_ptr),PNG_EMPTY);
1101 
1102 /* Write the &quot;data&quot; buffer to whatever output you are using */
1103 PNG_INTERNAL_FUNCTION(void,png_write_data,(png_structrp png_ptr,
1104     png_const_bytep data, size_t length),PNG_EMPTY);
1105 
1106 /* Read and check the PNG file signature */
1107 PNG_INTERNAL_FUNCTION(void,png_read_sig,(png_structrp png_ptr,
1108    png_inforp info_ptr),PNG_EMPTY);
1109 
1110 /* Read the chunk header (length + type name) */
1111 PNG_INTERNAL_FUNCTION(png_uint_32,png_read_chunk_header,(png_structrp png_ptr),
1112    PNG_EMPTY);
1113 
1114 /* Read data from whatever input you are using into the &quot;data&quot; buffer */
1115 PNG_INTERNAL_FUNCTION(void,png_read_data,(png_structrp png_ptr, png_bytep data,
1116     size_t length),PNG_EMPTY);
1117 
1118 /* Read bytes into buf, and update png_ptr-&gt;crc */
1119 PNG_INTERNAL_FUNCTION(void,png_crc_read,(png_structrp png_ptr, png_bytep buf,
1120     png_uint_32 length),PNG_EMPTY);
1121 
1122 /* Read &quot;skip&quot; bytes, read the file crc, and (optionally) verify png_ptr-&gt;crc */
1123 PNG_INTERNAL_FUNCTION(int,png_crc_finish,(png_structrp png_ptr,
1124    png_uint_32 skip),PNG_EMPTY);
1125 
1126 /* Read the CRC from the file and compare it to the libpng calculated CRC */
1127 PNG_INTERNAL_FUNCTION(int,png_crc_error,(png_structrp png_ptr),PNG_EMPTY);
1128 
1129 /* Calculate the CRC over a section of data.  Note that we are only
1130  * passing a maximum of 64K on systems that have this as a memory limit,
1131  * since this is the maximum buffer size we can specify.
1132  */
1133 PNG_INTERNAL_FUNCTION(void,png_calculate_crc,(png_structrp png_ptr,
1134    png_const_bytep ptr, size_t length),PNG_EMPTY);
1135 
1136 #ifdef PNG_WRITE_FLUSH_SUPPORTED
1137 PNG_INTERNAL_FUNCTION(void,png_flush,(png_structrp png_ptr),PNG_EMPTY);
1138 #endif
1139 
1140 /* Write various chunks */
1141 
1142 /* Write the IHDR chunk, and update the png_struct with the necessary
1143  * information.
1144  */
1145 PNG_INTERNAL_FUNCTION(void,png_write_IHDR,(png_structrp png_ptr,
1146    png_uint_32 width, png_uint_32 height, int bit_depth, int color_type,
1147    int compression_method, int filter_method, int interlace_method),PNG_EMPTY);
1148 
1149 PNG_INTERNAL_FUNCTION(void,png_write_PLTE,(png_structrp png_ptr,
1150    png_const_colorp palette, png_uint_32 num_pal),PNG_EMPTY);
1151 
1152 PNG_INTERNAL_FUNCTION(void,png_compress_IDAT,(png_structrp png_ptr,
1153    png_const_bytep row_data, png_alloc_size_t row_data_length, int flush),
1154    PNG_EMPTY);
1155 
1156 PNG_INTERNAL_FUNCTION(void,png_write_IEND,(png_structrp png_ptr),PNG_EMPTY);
1157 
1158 #ifdef PNG_WRITE_gAMA_SUPPORTED
1159 PNG_INTERNAL_FUNCTION(void,png_write_gAMA_fixed,(png_structrp png_ptr,
1160     png_fixed_point file_gamma),PNG_EMPTY);
1161 #endif
1162 
1163 #ifdef PNG_WRITE_sBIT_SUPPORTED
1164 PNG_INTERNAL_FUNCTION(void,png_write_sBIT,(png_structrp png_ptr,
1165     png_const_color_8p sbit, int color_type),PNG_EMPTY);
1166 #endif
1167 
1168 #ifdef PNG_WRITE_cHRM_SUPPORTED
1169 PNG_INTERNAL_FUNCTION(void,png_write_cHRM_fixed,(png_structrp png_ptr,
1170     const png_xy *xy), PNG_EMPTY);
1171    /* The xy value must have been previously validated */
1172 #endif
1173 
1174 #ifdef PNG_WRITE_sRGB_SUPPORTED
1175 PNG_INTERNAL_FUNCTION(void,png_write_sRGB,(png_structrp png_ptr,
1176     int intent),PNG_EMPTY);
1177 #endif
1178 
1179 #ifdef PNG_WRITE_eXIf_SUPPORTED
1180 PNG_INTERNAL_FUNCTION(void,png_write_eXIf,(png_structrp png_ptr,
1181     png_bytep exif, int num_exif),PNG_EMPTY);
1182 #endif
1183 
1184 #ifdef PNG_WRITE_iCCP_SUPPORTED
1185 PNG_INTERNAL_FUNCTION(void,png_write_iCCP,(png_structrp png_ptr,
1186    png_const_charp name, png_const_bytep profile), PNG_EMPTY);
1187    /* The profile must have been previously validated for correctness, the
1188     * length comes from the first four bytes.  Only the base, deflate,
1189     * compression is supported.
1190     */
1191 #endif
1192 
1193 #ifdef PNG_WRITE_sPLT_SUPPORTED
1194 PNG_INTERNAL_FUNCTION(void,png_write_sPLT,(png_structrp png_ptr,
1195     png_const_sPLT_tp palette),PNG_EMPTY);
1196 #endif
1197 
1198 #ifdef PNG_WRITE_tRNS_SUPPORTED
1199 PNG_INTERNAL_FUNCTION(void,png_write_tRNS,(png_structrp png_ptr,
1200     png_const_bytep trans, png_const_color_16p values, int number,
1201     int color_type),PNG_EMPTY);
1202 #endif
1203 
1204 #ifdef PNG_WRITE_bKGD_SUPPORTED
1205 PNG_INTERNAL_FUNCTION(void,png_write_bKGD,(png_structrp png_ptr,
1206     png_const_color_16p values, int color_type),PNG_EMPTY);
1207 #endif
1208 
1209 #ifdef PNG_WRITE_hIST_SUPPORTED
1210 PNG_INTERNAL_FUNCTION(void,png_write_hIST,(png_structrp png_ptr,
1211     png_const_uint_16p hist, int num_hist),PNG_EMPTY);
1212 #endif
1213 
1214 /* Chunks that have keywords */
1215 #ifdef PNG_WRITE_tEXt_SUPPORTED
1216 PNG_INTERNAL_FUNCTION(void,png_write_tEXt,(png_structrp png_ptr,
1217    png_const_charp key, png_const_charp text, size_t text_len),PNG_EMPTY);
1218 #endif
1219 
1220 #ifdef PNG_WRITE_zTXt_SUPPORTED
1221 PNG_INTERNAL_FUNCTION(void,png_write_zTXt,(png_structrp png_ptr, png_const_charp
1222     key, png_const_charp text, int compression),PNG_EMPTY);
1223 #endif
1224 
1225 #ifdef PNG_WRITE_iTXt_SUPPORTED
1226 PNG_INTERNAL_FUNCTION(void,png_write_iTXt,(png_structrp png_ptr,
1227     int compression, png_const_charp key, png_const_charp lang,
1228     png_const_charp lang_key, png_const_charp text),PNG_EMPTY);
1229 #endif
1230 
1231 #ifdef PNG_TEXT_SUPPORTED  /* Added at version 1.0.14 and 1.2.4 */
1232 PNG_INTERNAL_FUNCTION(int,png_set_text_2,(png_const_structrp png_ptr,
1233     png_inforp info_ptr, png_const_textp text_ptr, int num_text),PNG_EMPTY);
1234 #endif
1235 
1236 #ifdef PNG_WRITE_oFFs_SUPPORTED
1237 PNG_INTERNAL_FUNCTION(void,png_write_oFFs,(png_structrp png_ptr,
1238     png_int_32 x_offset, png_int_32 y_offset, int unit_type),PNG_EMPTY);
1239 #endif
1240 
1241 #ifdef PNG_WRITE_pCAL_SUPPORTED
1242 PNG_INTERNAL_FUNCTION(void,png_write_pCAL,(png_structrp png_ptr,
1243     png_charp purpose, png_int_32 X0, png_int_32 X1, int type, int nparams,
1244     png_const_charp units, png_charpp params),PNG_EMPTY);
1245 #endif
1246 
1247 #ifdef PNG_WRITE_pHYs_SUPPORTED
1248 PNG_INTERNAL_FUNCTION(void,png_write_pHYs,(png_structrp png_ptr,
1249     png_uint_32 x_pixels_per_unit, png_uint_32 y_pixels_per_unit,
1250     int unit_type),PNG_EMPTY);
1251 #endif
1252 
1253 #ifdef PNG_WRITE_tIME_SUPPORTED
1254 PNG_INTERNAL_FUNCTION(void,png_write_tIME,(png_structrp png_ptr,
1255     png_const_timep mod_time),PNG_EMPTY);
1256 #endif
1257 
1258 #ifdef PNG_WRITE_sCAL_SUPPORTED
1259 PNG_INTERNAL_FUNCTION(void,png_write_sCAL_s,(png_structrp png_ptr,
1260     int unit, png_const_charp width, png_const_charp height),PNG_EMPTY);
1261 #endif
1262 
1263 /* Called when finished processing a row of data */
1264 PNG_INTERNAL_FUNCTION(void,png_write_finish_row,(png_structrp png_ptr),
1265     PNG_EMPTY);
1266 
1267 /* Internal use only.   Called before first row of data */
1268 PNG_INTERNAL_FUNCTION(void,png_write_start_row,(png_structrp png_ptr),
1269     PNG_EMPTY);
1270 
1271 /* Combine a row of data, dealing with alpha, etc. if requested.  &#39;row&#39; is an
1272  * array of png_ptr-&gt;width pixels.  If the image is not interlaced or this
1273  * is the final pass this just does a memcpy, otherwise the &quot;display&quot; flag
1274  * is used to determine whether to copy pixels that are not in the current pass.
1275  *
1276  * Because &#39;png_do_read_interlace&#39; (below) replicates pixels this allows this
1277  * function to achieve the documented &#39;blocky&#39; appearance during interlaced read
1278  * if display is 1 and the &#39;sparkle&#39; appearance, where existing pixels in &#39;row&#39;
1279  * are not changed if they are not in the current pass, when display is 0.
1280  *
1281  * &#39;display&#39; must be 0 or 1, otherwise the memcpy will be done regardless.
1282  *
1283  * The API always reads from the png_struct row buffer and always assumes that
1284  * it is full width (png_do_read_interlace has already been called.)
1285  *
1286  * This function is only ever used to write to row buffers provided by the
1287  * caller of the relevant libpng API and the row must have already been
1288  * transformed by the read transformations.
1289  *
1290  * The PNG_USE_COMPILE_TIME_MASKS option causes generation of pre-computed
1291  * bitmasks for use within the code, otherwise runtime generated masks are used.
1292  * The default is compile time masks.
1293  */
1294 #ifndef PNG_USE_COMPILE_TIME_MASKS
1295 #  define PNG_USE_COMPILE_TIME_MASKS 1
1296 #endif
1297 PNG_INTERNAL_FUNCTION(void,png_combine_row,(png_const_structrp png_ptr,
1298     png_bytep row, int display),PNG_EMPTY);
1299 
1300 #ifdef PNG_READ_INTERLACING_SUPPORTED
1301 /* Expand an interlaced row: the &#39;row_info&#39; describes the pass data that has
1302  * been read in and must correspond to the pixels in &#39;row&#39;, the pixels are
1303  * expanded (moved apart) in &#39;row&#39; to match the final layout, when doing this
1304  * the pixels are *replicated* to the intervening space.  This is essential for
1305  * the correct operation of png_combine_row, above.
1306  */
1307 PNG_INTERNAL_FUNCTION(void,png_do_read_interlace,(png_row_infop row_info,
1308     png_bytep row, int pass, png_uint_32 transformations),PNG_EMPTY);
1309 #endif
1310 
1311 /* GRR TO DO (2.0 or whenever):  simplify other internal calling interfaces */
1312 
1313 #ifdef PNG_WRITE_INTERLACING_SUPPORTED
1314 /* Grab pixels out of a row for an interlaced pass */
1315 PNG_INTERNAL_FUNCTION(void,png_do_write_interlace,(png_row_infop row_info,
1316     png_bytep row, int pass),PNG_EMPTY);
1317 #endif
1318 
1319 /* Unfilter a row: check the filter value before calling this, there is no point
1320  * calling it for PNG_FILTER_VALUE_NONE.
1321  */
1322 PNG_INTERNAL_FUNCTION(void,png_read_filter_row,(png_structrp pp, png_row_infop
1323     row_info, png_bytep row, png_const_bytep prev_row, int filter),PNG_EMPTY);
1324 
1325 #if PNG_ARM_NEON_OPT &gt; 0
1326 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_up_neon,(png_row_infop row_info,
1327     png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1328 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_neon,(png_row_infop
1329     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1330 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_neon,(png_row_infop
1331     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1332 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_neon,(png_row_infop
1333     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1334 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_neon,(png_row_infop
1335     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1336 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_neon,(png_row_infop
1337     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1338 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_neon,(png_row_infop
1339     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1340 #endif
1341 
1342 #if PNG_MIPS_MSA_OPT &gt; 0
1343 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_up_msa,(png_row_infop row_info,
1344     png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1345 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_msa,(png_row_infop
1346     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1347 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_msa,(png_row_infop
1348     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1349 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_msa,(png_row_infop
1350     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1351 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_msa,(png_row_infop
1352     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1353 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_msa,(png_row_infop
1354     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1355 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_msa,(png_row_infop
1356     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1357 #endif
1358 
1359 #if PNG_POWERPC_VSX_OPT &gt; 0
1360 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_up_vsx,(png_row_infop row_info,
1361     png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1362 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_vsx,(png_row_infop
1363     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1364 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_vsx,(png_row_infop
1365     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1366 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_vsx,(png_row_infop
1367     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1368 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_vsx,(png_row_infop
1369     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1370 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_vsx,(png_row_infop
1371     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1372 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_vsx,(png_row_infop
1373     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1374 #endif
1375 
1376 #if PNG_INTEL_SSE_IMPLEMENTATION &gt; 0
1377 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub3_sse2,(png_row_infop
1378     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1379 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_sub4_sse2,(png_row_infop
1380     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1381 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg3_sse2,(png_row_infop
1382     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1383 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_avg4_sse2,(png_row_infop
1384     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1385 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth3_sse2,(png_row_infop
1386     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1387 PNG_INTERNAL_FUNCTION(void,png_read_filter_row_paeth4_sse2,(png_row_infop
1388     row_info, png_bytep row, png_const_bytep prev_row),PNG_EMPTY);
1389 #endif
1390 
1391 /* Choose the best filter to use and filter the row data */
1392 PNG_INTERNAL_FUNCTION(void,png_write_find_filter,(png_structrp png_ptr,
1393     png_row_infop row_info),PNG_EMPTY);
1394 
1395 #ifdef PNG_SEQUENTIAL_READ_SUPPORTED
1396 PNG_INTERNAL_FUNCTION(void,png_read_IDAT_data,(png_structrp png_ptr,
1397    png_bytep output, png_alloc_size_t avail_out),PNG_EMPTY);
1398    /* Read &#39;avail_out&#39; bytes of data from the IDAT stream.  If the output buffer
1399     * is NULL the function checks, instead, for the end of the stream.  In this
1400     * case a benign error will be issued if the stream end is not found or if
1401     * extra data has to be consumed.
1402     */
1403 PNG_INTERNAL_FUNCTION(void,png_read_finish_IDAT,(png_structrp png_ptr),
1404    PNG_EMPTY);
1405    /* This cleans up when the IDAT LZ stream does not end when the last image
1406     * byte is read; there is still some pending input.
1407     */
1408 
1409 PNG_INTERNAL_FUNCTION(void,png_read_finish_row,(png_structrp png_ptr),
1410    PNG_EMPTY);
1411    /* Finish a row while reading, dealing with interlacing passes, etc. */
1412 #endif /* SEQUENTIAL_READ */
1413 
1414 /* Initialize the row buffers, etc. */
1415 PNG_INTERNAL_FUNCTION(void,png_read_start_row,(png_structrp png_ptr),PNG_EMPTY);
1416 
1417 #if ZLIB_VERNUM &gt;= 0x1240
1418 PNG_INTERNAL_FUNCTION(int,png_zlib_inflate,(png_structrp png_ptr, int flush),
1419       PNG_EMPTY);
1420 #  define PNG_INFLATE(pp, flush) png_zlib_inflate(pp, flush)
1421 #else /* Zlib &lt; 1.2.4 */
1422 #  define PNG_INFLATE(pp, flush) inflate(&amp;(pp)-&gt;zstream, flush)
1423 #endif /* Zlib &lt; 1.2.4 */
1424 
1425 #ifdef PNG_READ_TRANSFORMS_SUPPORTED
1426 /* Optional call to update the users info structure */
1427 PNG_INTERNAL_FUNCTION(void,png_read_transform_info,(png_structrp png_ptr,
1428     png_inforp info_ptr),PNG_EMPTY);
1429 #endif
1430 
1431 /* Shared transform functions, defined in pngtran.c */
1432 #if defined(PNG_WRITE_FILLER_SUPPORTED) || \
1433     defined(PNG_READ_STRIP_ALPHA_SUPPORTED)
1434 PNG_INTERNAL_FUNCTION(void,png_do_strip_channel,(png_row_infop row_info,
1435     png_bytep row, int at_start),PNG_EMPTY);
1436 #endif
1437 
1438 #ifdef PNG_16BIT_SUPPORTED
1439 #if defined(PNG_READ_SWAP_SUPPORTED) || defined(PNG_WRITE_SWAP_SUPPORTED)
1440 PNG_INTERNAL_FUNCTION(void,png_do_swap,(png_row_infop row_info,
1441     png_bytep row),PNG_EMPTY);
1442 #endif
1443 #endif
1444 
1445 #if defined(PNG_READ_PACKSWAP_SUPPORTED) || \
1446     defined(PNG_WRITE_PACKSWAP_SUPPORTED)
1447 PNG_INTERNAL_FUNCTION(void,png_do_packswap,(png_row_infop row_info,
1448     png_bytep row),PNG_EMPTY);
1449 #endif
1450 
1451 #if defined(PNG_READ_INVERT_SUPPORTED) || defined(PNG_WRITE_INVERT_SUPPORTED)
1452 PNG_INTERNAL_FUNCTION(void,png_do_invert,(png_row_infop row_info,
1453     png_bytep row),PNG_EMPTY);
1454 #endif
1455 
1456 #if defined(PNG_READ_BGR_SUPPORTED) || defined(PNG_WRITE_BGR_SUPPORTED)
1457 PNG_INTERNAL_FUNCTION(void,png_do_bgr,(png_row_infop row_info,
1458     png_bytep row),PNG_EMPTY);
1459 #endif
1460 
1461 /* The following decodes the appropriate chunks, and does error correction,
1462  * then calls the appropriate callback for the chunk if it is valid.
1463  */
1464 
1465 /* Decode the IHDR chunk */
1466 PNG_INTERNAL_FUNCTION(void,png_handle_IHDR,(png_structrp png_ptr,
1467     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1468 PNG_INTERNAL_FUNCTION(void,png_handle_PLTE,(png_structrp png_ptr,
1469     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1470 PNG_INTERNAL_FUNCTION(void,png_handle_IEND,(png_structrp png_ptr,
1471     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1472 
1473 #ifdef PNG_READ_bKGD_SUPPORTED
1474 PNG_INTERNAL_FUNCTION(void,png_handle_bKGD,(png_structrp png_ptr,
1475     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1476 #endif
1477 
1478 #ifdef PNG_READ_cHRM_SUPPORTED
1479 PNG_INTERNAL_FUNCTION(void,png_handle_cHRM,(png_structrp png_ptr,
1480     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1481 #endif
1482 
1483 #ifdef PNG_READ_eXIf_SUPPORTED
1484 PNG_INTERNAL_FUNCTION(void,png_handle_eXIf,(png_structrp png_ptr,
1485     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1486 #endif
1487 
1488 #ifdef PNG_READ_gAMA_SUPPORTED
1489 PNG_INTERNAL_FUNCTION(void,png_handle_gAMA,(png_structrp png_ptr,
1490     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1491 #endif
1492 
1493 #ifdef PNG_READ_hIST_SUPPORTED
1494 PNG_INTERNAL_FUNCTION(void,png_handle_hIST,(png_structrp png_ptr,
1495     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1496 #endif
1497 
1498 #ifdef PNG_READ_iCCP_SUPPORTED
1499 PNG_INTERNAL_FUNCTION(void,png_handle_iCCP,(png_structrp png_ptr,
1500     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1501 #endif /* READ_iCCP */
1502 
1503 #ifdef PNG_READ_iTXt_SUPPORTED
1504 PNG_INTERNAL_FUNCTION(void,png_handle_iTXt,(png_structrp png_ptr,
1505     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1506 #endif
1507 
1508 #ifdef PNG_READ_oFFs_SUPPORTED
1509 PNG_INTERNAL_FUNCTION(void,png_handle_oFFs,(png_structrp png_ptr,
1510     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1511 #endif
1512 
1513 #ifdef PNG_READ_pCAL_SUPPORTED
1514 PNG_INTERNAL_FUNCTION(void,png_handle_pCAL,(png_structrp png_ptr,
1515     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1516 #endif
1517 
1518 #ifdef PNG_READ_pHYs_SUPPORTED
1519 PNG_INTERNAL_FUNCTION(void,png_handle_pHYs,(png_structrp png_ptr,
1520     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1521 #endif
1522 
1523 #ifdef PNG_READ_sBIT_SUPPORTED
1524 PNG_INTERNAL_FUNCTION(void,png_handle_sBIT,(png_structrp png_ptr,
1525     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1526 #endif
1527 
1528 #ifdef PNG_READ_sCAL_SUPPORTED
1529 PNG_INTERNAL_FUNCTION(void,png_handle_sCAL,(png_structrp png_ptr,
1530     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1531 #endif
1532 
1533 #ifdef PNG_READ_sPLT_SUPPORTED
1534 PNG_INTERNAL_FUNCTION(void,png_handle_sPLT,(png_structrp png_ptr,
1535     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1536 #endif /* READ_sPLT */
1537 
1538 #ifdef PNG_READ_sRGB_SUPPORTED
1539 PNG_INTERNAL_FUNCTION(void,png_handle_sRGB,(png_structrp png_ptr,
1540     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1541 #endif
1542 
1543 #ifdef PNG_READ_tEXt_SUPPORTED
1544 PNG_INTERNAL_FUNCTION(void,png_handle_tEXt,(png_structrp png_ptr,
1545     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1546 #endif
1547 
1548 #ifdef PNG_READ_tIME_SUPPORTED
1549 PNG_INTERNAL_FUNCTION(void,png_handle_tIME,(png_structrp png_ptr,
1550     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1551 #endif
1552 
1553 #ifdef PNG_READ_tRNS_SUPPORTED
1554 PNG_INTERNAL_FUNCTION(void,png_handle_tRNS,(png_structrp png_ptr,
1555     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1556 #endif
1557 
1558 #ifdef PNG_READ_zTXt_SUPPORTED
1559 PNG_INTERNAL_FUNCTION(void,png_handle_zTXt,(png_structrp png_ptr,
1560     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1561 #endif
1562 
1563 PNG_INTERNAL_FUNCTION(void,png_check_chunk_name,(png_const_structrp png_ptr,
<a name="5" id="anc5"></a><span class="line-modified">1564     const png_uint_32 chunk_name),PNG_EMPTY);</span>
1565 
1566 PNG_INTERNAL_FUNCTION(void,png_check_chunk_length,(png_const_structrp png_ptr,
<a name="6" id="anc6"></a><span class="line-modified">1567     const png_uint_32 chunk_length),PNG_EMPTY);</span>
1568 
1569 PNG_INTERNAL_FUNCTION(void,png_handle_unknown,(png_structrp png_ptr,
1570     png_inforp info_ptr, png_uint_32 length, int keep),PNG_EMPTY);
1571    /* This is the function that gets called for unknown chunks.  The &#39;keep&#39;
1572     * argument is either non-zero for a known chunk that has been set to be
1573     * handled as unknown or zero for an unknown chunk.  By default the function
1574     * just skips the chunk or errors out if it is critical.
1575     */
1576 
1577 #if defined(PNG_READ_UNKNOWN_CHUNKS_SUPPORTED) ||\
1578     defined(PNG_HANDLE_AS_UNKNOWN_SUPPORTED)
1579 PNG_INTERNAL_FUNCTION(int,png_chunk_unknown_handling,
1580     (png_const_structrp png_ptr, png_uint_32 chunk_name),PNG_EMPTY);
1581    /* Exactly as the API png_handle_as_unknown() except that the argument is a
1582     * 32-bit chunk name, not a string.
1583     */
1584 #endif /* READ_UNKNOWN_CHUNKS || HANDLE_AS_UNKNOWN */
1585 
1586 /* Handle the transformations for reading and writing */
1587 #ifdef PNG_READ_TRANSFORMS_SUPPORTED
1588 PNG_INTERNAL_FUNCTION(void,png_do_read_transformations,(png_structrp png_ptr,
1589    png_row_infop row_info),PNG_EMPTY);
1590 #endif
1591 #ifdef PNG_WRITE_TRANSFORMS_SUPPORTED
1592 PNG_INTERNAL_FUNCTION(void,png_do_write_transformations,(png_structrp png_ptr,
1593    png_row_infop row_info),PNG_EMPTY);
1594 #endif
1595 
1596 #ifdef PNG_READ_TRANSFORMS_SUPPORTED
1597 PNG_INTERNAL_FUNCTION(void,png_init_read_transformations,(png_structrp png_ptr),
1598     PNG_EMPTY);
1599 #endif
1600 
1601 #ifdef PNG_PROGRESSIVE_READ_SUPPORTED
1602 PNG_INTERNAL_FUNCTION(void,png_push_read_chunk,(png_structrp png_ptr,
1603     png_inforp info_ptr),PNG_EMPTY);
1604 PNG_INTERNAL_FUNCTION(void,png_push_read_sig,(png_structrp png_ptr,
1605     png_inforp info_ptr),PNG_EMPTY);
1606 PNG_INTERNAL_FUNCTION(void,png_push_check_crc,(png_structrp png_ptr),PNG_EMPTY);
1607 PNG_INTERNAL_FUNCTION(void,png_push_save_buffer,(png_structrp png_ptr),
1608     PNG_EMPTY);
1609 PNG_INTERNAL_FUNCTION(void,png_push_restore_buffer,(png_structrp png_ptr,
1610     png_bytep buffer, size_t buffer_length),PNG_EMPTY);
1611 PNG_INTERNAL_FUNCTION(void,png_push_read_IDAT,(png_structrp png_ptr),PNG_EMPTY);
1612 PNG_INTERNAL_FUNCTION(void,png_process_IDAT_data,(png_structrp png_ptr,
1613     png_bytep buffer, size_t buffer_length),PNG_EMPTY);
1614 PNG_INTERNAL_FUNCTION(void,png_push_process_row,(png_structrp png_ptr),
1615     PNG_EMPTY);
1616 PNG_INTERNAL_FUNCTION(void,png_push_handle_unknown,(png_structrp png_ptr,
1617    png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1618 PNG_INTERNAL_FUNCTION(void,png_push_have_info,(png_structrp png_ptr,
1619    png_inforp info_ptr),PNG_EMPTY);
1620 PNG_INTERNAL_FUNCTION(void,png_push_have_end,(png_structrp png_ptr,
1621    png_inforp info_ptr),PNG_EMPTY);
1622 PNG_INTERNAL_FUNCTION(void,png_push_have_row,(png_structrp png_ptr,
1623     png_bytep row),PNG_EMPTY);
1624 PNG_INTERNAL_FUNCTION(void,png_push_read_end,(png_structrp png_ptr,
1625     png_inforp info_ptr),PNG_EMPTY);
1626 PNG_INTERNAL_FUNCTION(void,png_process_some_data,(png_structrp png_ptr,
1627     png_inforp info_ptr),PNG_EMPTY);
1628 PNG_INTERNAL_FUNCTION(void,png_read_push_finish_row,(png_structrp png_ptr),
1629     PNG_EMPTY);
1630 #  ifdef PNG_READ_tEXt_SUPPORTED
1631 PNG_INTERNAL_FUNCTION(void,png_push_handle_tEXt,(png_structrp png_ptr,
1632     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1633 PNG_INTERNAL_FUNCTION(void,png_push_read_tEXt,(png_structrp png_ptr,
1634     png_inforp info_ptr),PNG_EMPTY);
1635 #  endif
1636 #  ifdef PNG_READ_zTXt_SUPPORTED
1637 PNG_INTERNAL_FUNCTION(void,png_push_handle_zTXt,(png_structrp png_ptr,
1638     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1639 PNG_INTERNAL_FUNCTION(void,png_push_read_zTXt,(png_structrp png_ptr,
1640     png_inforp info_ptr),PNG_EMPTY);
1641 #  endif
1642 #  ifdef PNG_READ_iTXt_SUPPORTED
1643 PNG_INTERNAL_FUNCTION(void,png_push_handle_iTXt,(png_structrp png_ptr,
1644     png_inforp info_ptr, png_uint_32 length),PNG_EMPTY);
1645 PNG_INTERNAL_FUNCTION(void,png_push_read_iTXt,(png_structrp png_ptr,
1646     png_inforp info_ptr),PNG_EMPTY);
1647 #  endif
1648 
1649 #endif /* PROGRESSIVE_READ */
1650 
1651 /* Added at libpng version 1.6.0 */
1652 #ifdef PNG_GAMMA_SUPPORTED
1653 PNG_INTERNAL_FUNCTION(void,png_colorspace_set_gamma,(png_const_structrp png_ptr,
1654     png_colorspacerp colorspace, png_fixed_point gAMA), PNG_EMPTY);
1655    /* Set the colorspace gamma with a value provided by the application or by
1656     * the gAMA chunk on read.  The value will override anything set by an ICC
1657     * profile.
1658     */
1659 
1660 PNG_INTERNAL_FUNCTION(void,png_colorspace_sync_info,(png_const_structrp png_ptr,
1661     png_inforp info_ptr), PNG_EMPTY);
1662    /* Synchronize the info &#39;valid&#39; flags with the colorspace */
1663 
1664 PNG_INTERNAL_FUNCTION(void,png_colorspace_sync,(png_const_structrp png_ptr,
1665     png_inforp info_ptr), PNG_EMPTY);
1666    /* Copy the png_struct colorspace to the info_struct and call the above to
1667     * synchronize the flags.  Checks for NULL info_ptr and does nothing.
1668     */
1669 #endif
1670 
1671 /* Added at libpng version 1.4.0 */
1672 #ifdef PNG_COLORSPACE_SUPPORTED
1673 /* These internal functions are for maintaining the colorspace structure within
1674  * a png_info or png_struct (or, indeed, both).
1675  */
1676 PNG_INTERNAL_FUNCTION(int,png_colorspace_set_chromaticities,
1677    (png_const_structrp png_ptr, png_colorspacerp colorspace, const png_xy *xy,
1678     int preferred), PNG_EMPTY);
1679 
1680 PNG_INTERNAL_FUNCTION(int,png_colorspace_set_endpoints,
1681    (png_const_structrp png_ptr, png_colorspacerp colorspace, const png_XYZ *XYZ,
1682     int preferred), PNG_EMPTY);
1683 
1684 #ifdef PNG_sRGB_SUPPORTED
1685 PNG_INTERNAL_FUNCTION(int,png_colorspace_set_sRGB,(png_const_structrp png_ptr,
1686    png_colorspacerp colorspace, int intent), PNG_EMPTY);
1687    /* This does set the colorspace gAMA and cHRM values too, but doesn&#39;t set the
1688     * flags to write them, if it returns false there was a problem and an error
1689     * message has already been output (but the colorspace may still need to be
1690     * synced to record the invalid flag).
1691     */
1692 #endif /* sRGB */
1693 
1694 #ifdef PNG_iCCP_SUPPORTED
1695 PNG_INTERNAL_FUNCTION(int,png_colorspace_set_ICC,(png_const_structrp png_ptr,
1696    png_colorspacerp colorspace, png_const_charp name,
1697    png_uint_32 profile_length, png_const_bytep profile, int color_type),
1698    PNG_EMPTY);
1699    /* The &#39;name&#39; is used for information only */
1700 
1701 /* Routines for checking parts of an ICC profile. */
1702 #ifdef PNG_READ_iCCP_SUPPORTED
1703 PNG_INTERNAL_FUNCTION(int,png_icc_check_length,(png_const_structrp png_ptr,
1704    png_colorspacerp colorspace, png_const_charp name,
1705    png_uint_32 profile_length), PNG_EMPTY);
1706 #endif /* READ_iCCP */
1707 PNG_INTERNAL_FUNCTION(int,png_icc_check_header,(png_const_structrp png_ptr,
1708    png_colorspacerp colorspace, png_const_charp name,
1709    png_uint_32 profile_length,
1710    png_const_bytep profile /* first 132 bytes only */, int color_type),
1711    PNG_EMPTY);
1712 PNG_INTERNAL_FUNCTION(int,png_icc_check_tag_table,(png_const_structrp png_ptr,
1713    png_colorspacerp colorspace, png_const_charp name,
1714    png_uint_32 profile_length,
1715    png_const_bytep profile /* header plus whole tag table */), PNG_EMPTY);
1716 #ifdef PNG_sRGB_SUPPORTED
1717 PNG_INTERNAL_FUNCTION(void,png_icc_set_sRGB,(
1718    png_const_structrp png_ptr, png_colorspacerp colorspace,
1719    png_const_bytep profile, uLong adler), PNG_EMPTY);
1720    /* &#39;adler&#39; is the Adler32 checksum of the uncompressed profile data. It may
1721     * be zero to indicate that it is not available.  It is used, if provided,
1722     * as a fast check on the profile when checking to see if it is sRGB.
1723     */
1724 #endif
1725 #endif /* iCCP */
1726 
1727 #ifdef PNG_READ_RGB_TO_GRAY_SUPPORTED
1728 PNG_INTERNAL_FUNCTION(void,png_colorspace_set_rgb_coefficients,
1729    (png_structrp png_ptr), PNG_EMPTY);
1730    /* Set the rgb_to_gray coefficients from the colorspace Y values */
1731 #endif /* READ_RGB_TO_GRAY */
1732 #endif /* COLORSPACE */
1733 
1734 /* Added at libpng version 1.4.0 */
1735 PNG_INTERNAL_FUNCTION(void,png_check_IHDR,(png_const_structrp png_ptr,
1736     png_uint_32 width, png_uint_32 height, int bit_depth,
1737     int color_type, int interlace_type, int compression_type,
1738     int filter_type),PNG_EMPTY);
1739 
1740 /* Added at libpng version 1.5.10 */
1741 #if defined(PNG_READ_CHECK_FOR_INVALID_INDEX_SUPPORTED) || \
1742     defined(PNG_WRITE_CHECK_FOR_INVALID_INDEX_SUPPORTED)
1743 PNG_INTERNAL_FUNCTION(void,png_do_check_palette_indexes,
1744    (png_structrp png_ptr, png_row_infop row_info),PNG_EMPTY);
1745 #endif
1746 
1747 #if defined(PNG_FLOATING_POINT_SUPPORTED) &amp;&amp; defined(PNG_ERROR_TEXT_SUPPORTED)
1748 PNG_INTERNAL_FUNCTION(void,png_fixed_error,(png_const_structrp png_ptr,
1749    png_const_charp name),PNG_NORETURN);
1750 #endif
1751 
1752 /* Puts &#39;string&#39; into &#39;buffer&#39; at buffer[pos], taking care never to overwrite
1753  * the end.  Always leaves the buffer nul terminated.  Never errors out (and
1754  * there is no error code.)
1755  */
1756 PNG_INTERNAL_FUNCTION(size_t,png_safecat,(png_charp buffer, size_t bufsize,
1757    size_t pos, png_const_charp string),PNG_EMPTY);
1758 
1759 /* Various internal functions to handle formatted warning messages, currently
1760  * only implemented for warnings.
1761  */
1762 #if defined(PNG_WARNINGS_SUPPORTED) || defined(PNG_TIME_RFC1123_SUPPORTED)
1763 /* Utility to dump an unsigned value into a buffer, given a start pointer and
1764  * and end pointer (which should point just *beyond* the end of the buffer!)
1765  * Returns the pointer to the start of the formatted string.  This utility only
1766  * does unsigned values.
1767  */
1768 PNG_INTERNAL_FUNCTION(png_charp,png_format_number,(png_const_charp start,
1769    png_charp end, int format, png_alloc_size_t number),PNG_EMPTY);
1770 
1771 /* Convenience macro that takes an array: */
1772 #define PNG_FORMAT_NUMBER(buffer,format,number) \
1773    png_format_number(buffer, buffer + (sizeof buffer), format, number)
1774 
1775 /* Suggested size for a number buffer (enough for 64 bits and a sign!) */
1776 #define PNG_NUMBER_BUFFER_SIZE 24
1777 
1778 /* These are the integer formats currently supported, the name is formed from
1779  * the standard printf(3) format string.
1780  */
1781 #define PNG_NUMBER_FORMAT_u     1 /* chose unsigned API! */
1782 #define PNG_NUMBER_FORMAT_02u   2
1783 #define PNG_NUMBER_FORMAT_d     1 /* chose signed API! */
1784 #define PNG_NUMBER_FORMAT_02d   2
1785 #define PNG_NUMBER_FORMAT_x     3
1786 #define PNG_NUMBER_FORMAT_02x   4
1787 #define PNG_NUMBER_FORMAT_fixed 5 /* choose the signed API */
1788 #endif
1789 
1790 #ifdef PNG_WARNINGS_SUPPORTED
1791 /* New defines and members adding in libpng-1.5.4 */
1792 #  define PNG_WARNING_PARAMETER_SIZE 32
1793 #  define PNG_WARNING_PARAMETER_COUNT 8 /* Maximum 9; see pngerror.c */
1794 
1795 /* An l-value of this type has to be passed to the APIs below to cache the
1796  * values of the parameters to a formatted warning message.
1797  */
1798 typedef char png_warning_parameters[PNG_WARNING_PARAMETER_COUNT][
1799    PNG_WARNING_PARAMETER_SIZE];
1800 
1801 PNG_INTERNAL_FUNCTION(void,png_warning_parameter,(png_warning_parameters p,
1802    int number, png_const_charp string),PNG_EMPTY);
1803    /* Parameters are limited in size to PNG_WARNING_PARAMETER_SIZE characters,
1804     * including the trailing &#39;\0&#39;.
1805     */
1806 PNG_INTERNAL_FUNCTION(void,png_warning_parameter_unsigned,
1807    (png_warning_parameters p, int number, int format, png_alloc_size_t value),
1808    PNG_EMPTY);
1809    /* Use png_alloc_size_t because it is an unsigned type as big as any we
1810     * need to output.  Use the following for a signed value.
1811     */
1812 PNG_INTERNAL_FUNCTION(void,png_warning_parameter_signed,
1813    (png_warning_parameters p, int number, int format, png_int_32 value),
1814    PNG_EMPTY);
1815 
1816 PNG_INTERNAL_FUNCTION(void,png_formatted_warning,(png_const_structrp png_ptr,
1817    png_warning_parameters p, png_const_charp message),PNG_EMPTY);
1818    /* &#39;message&#39; follows the X/Open approach of using @1, @2 to insert
1819     * parameters previously supplied using the above functions.  Errors in
1820     * specifying the parameters will simply result in garbage substitutions.
1821     */
1822 #endif
1823 
1824 #ifdef PNG_BENIGN_ERRORS_SUPPORTED
1825 /* Application errors (new in 1.6); use these functions (declared below) for
1826  * errors in the parameters or order of API function calls on read.  The
1827  * &#39;warning&#39; should be used for an error that can be handled completely; the
1828  * &#39;error&#39; for one which can be handled safely but which may lose application
1829  * information or settings.
1830  *
1831  * By default these both result in a png_error call prior to release, while in a
1832  * released version the &#39;warning&#39; is just a warning.  However if the application
1833  * explicitly disables benign errors (explicitly permitting the code to lose
1834  * information) they both turn into warnings.
1835  *
1836  * If benign errors aren&#39;t supported they end up as the corresponding base call
1837  * (png_warning or png_error.)
1838  */
1839 PNG_INTERNAL_FUNCTION(void,png_app_warning,(png_const_structrp png_ptr,
1840    png_const_charp message),PNG_EMPTY);
1841    /* The application provided invalid parameters to an API function or called
1842     * an API function at the wrong time, libpng can completely recover.
1843     */
1844 
1845 PNG_INTERNAL_FUNCTION(void,png_app_error,(png_const_structrp png_ptr,
1846    png_const_charp message),PNG_EMPTY);
1847    /* As above but libpng will ignore the call, or attempt some other partial
1848     * recovery from the error.
1849     */
1850 #else
1851 #  define png_app_warning(pp,s) png_warning(pp,s)
1852 #  define png_app_error(pp,s) png_error(pp,s)
1853 #endif
1854 
1855 PNG_INTERNAL_FUNCTION(void,png_chunk_report,(png_const_structrp png_ptr,
1856    png_const_charp message, int error),PNG_EMPTY);
1857    /* Report a recoverable issue in chunk data.  On read this is used to report
1858     * a problem found while reading a particular chunk and the
1859     * png_chunk_benign_error or png_chunk_warning function is used as
1860     * appropriate.  On write this is used to report an error that comes from
1861     * data set via an application call to a png_set_ API and png_app_error or
1862     * png_app_warning is used as appropriate.
1863     *
1864     * The &#39;error&#39; parameter must have one of the following values:
1865     */
1866 #define PNG_CHUNK_WARNING     0 /* never an error */
1867 #define PNG_CHUNK_WRITE_ERROR 1 /* an error only on write */
1868 #define PNG_CHUNK_ERROR       2 /* always an error */
1869 
1870 /* ASCII to FP interfaces, currently only implemented if sCAL
1871  * support is required.
1872  */
1873 #if defined(PNG_sCAL_SUPPORTED)
1874 /* MAX_DIGITS is actually the maximum number of characters in an sCAL
1875  * width or height, derived from the precision (number of significant
1876  * digits - a build time settable option) and assumptions about the
1877  * maximum ridiculous exponent.
1878  */
1879 #define PNG_sCAL_MAX_DIGITS (PNG_sCAL_PRECISION+1/*.*/+1/*E*/+10/*exponent*/)
1880 
1881 #ifdef PNG_FLOATING_POINT_SUPPORTED
1882 PNG_INTERNAL_FUNCTION(void,png_ascii_from_fp,(png_const_structrp png_ptr,
1883    png_charp ascii, size_t size, double fp, unsigned int precision),
1884    PNG_EMPTY);
1885 #endif /* FLOATING_POINT */
1886 
1887 #ifdef PNG_FIXED_POINT_SUPPORTED
1888 PNG_INTERNAL_FUNCTION(void,png_ascii_from_fixed,(png_const_structrp png_ptr,
1889    png_charp ascii, size_t size, png_fixed_point fp),PNG_EMPTY);
1890 #endif /* FIXED_POINT */
1891 #endif /* sCAL */
1892 
1893 #if defined(PNG_sCAL_SUPPORTED) || defined(PNG_pCAL_SUPPORTED)
1894 /* An internal API to validate the format of a floating point number.
1895  * The result is the index of the next character.  If the number is
1896  * not valid it will be the index of a character in the supposed number.
1897  *
1898  * The format of a number is defined in the PNG extensions specification
1899  * and this API is strictly conformant to that spec, not anyone elses!
1900  *
1901  * The format as a regular expression is:
1902  *
1903  * [+-]?[0-9]+.?([Ee][+-]?[0-9]+)?
1904  *
1905  * or:
1906  *
1907  * [+-]?.[0-9]+(.[0-9]+)?([Ee][+-]?[0-9]+)?
1908  *
1909  * The complexity is that either integer or fraction must be present and the
1910  * fraction is permitted to have no digits only if the integer is present.
1911  *
1912  * NOTE: The dangling E problem.
1913  *   There is a PNG valid floating point number in the following:
1914  *
1915  *       PNG floating point numbers are not greedy.
1916  *
1917  *   Working this out requires *TWO* character lookahead (because of the
1918  *   sign), the parser does not do this - it will fail at the &#39;r&#39; - this
1919  *   doesn&#39;t matter for PNG sCAL chunk values, but it requires more care
1920  *   if the value were ever to be embedded in something more complex.  Use
1921  *   ANSI-C strtod if you need the lookahead.
1922  */
1923 /* State table for the parser. */
1924 #define PNG_FP_INTEGER    0  /* before or in integer */
1925 #define PNG_FP_FRACTION   1  /* before or in fraction */
1926 #define PNG_FP_EXPONENT   2  /* before or in exponent */
1927 #define PNG_FP_STATE      3  /* mask for the above */
1928 #define PNG_FP_SAW_SIGN   4  /* Saw +/- in current state */
1929 #define PNG_FP_SAW_DIGIT  8  /* Saw a digit in current state */
1930 #define PNG_FP_SAW_DOT   16  /* Saw a dot in current state */
1931 #define PNG_FP_SAW_E     32  /* Saw an E (or e) in current state */
1932 #define PNG_FP_SAW_ANY   60  /* Saw any of the above 4 */
1933 
1934 /* These three values don&#39;t affect the parser.  They are set but not used.
1935  */
1936 #define PNG_FP_WAS_VALID 64  /* Preceding substring is a valid fp number */
1937 #define PNG_FP_NEGATIVE 128  /* A negative number, including &quot;-0&quot; */
1938 #define PNG_FP_NONZERO  256  /* A non-zero value */
1939 #define PNG_FP_STICKY   448  /* The above three flags */
1940 
1941 /* This is available for the caller to store in &#39;state&#39; if required.  Do not
1942  * call the parser after setting it (the parser sometimes clears it.)
1943  */
1944 #define PNG_FP_INVALID  512  /* Available for callers as a distinct value */
1945 
1946 /* Result codes for the parser (boolean - true meants ok, false means
1947  * not ok yet.)
1948  */
1949 #define PNG_FP_MAYBE      0  /* The number may be valid in the future */
1950 #define PNG_FP_OK         1  /* The number is valid */
1951 
1952 /* Tests on the sticky non-zero and negative flags.  To pass these checks
1953  * the state must also indicate that the whole number is valid - this is
1954  * achieved by testing PNG_FP_SAW_DIGIT (see the implementation for why this
1955  * is equivalent to PNG_FP_OK above.)
1956  */
1957 #define PNG_FP_NZ_MASK (PNG_FP_SAW_DIGIT | PNG_FP_NEGATIVE | PNG_FP_NONZERO)
1958    /* NZ_MASK: the string is valid and a non-zero negative value */
1959 #define PNG_FP_Z_MASK (PNG_FP_SAW_DIGIT | PNG_FP_NONZERO)
1960    /* Z MASK: the string is valid and a non-zero value. */
1961    /* PNG_FP_SAW_DIGIT: the string is valid. */
1962 #define PNG_FP_IS_ZERO(state) (((state) &amp; PNG_FP_Z_MASK) == PNG_FP_SAW_DIGIT)
1963 #define PNG_FP_IS_POSITIVE(state) (((state) &amp; PNG_FP_NZ_MASK) == PNG_FP_Z_MASK)
1964 #define PNG_FP_IS_NEGATIVE(state) (((state) &amp; PNG_FP_NZ_MASK) == PNG_FP_NZ_MASK)
1965 
1966 /* The actual parser.  This can be called repeatedly. It updates
1967  * the index into the string and the state variable (which must
1968  * be initialized to 0).  It returns a result code, as above.  There
1969  * is no point calling the parser any more if it fails to advance to
1970  * the end of the string - it is stuck on an invalid character (or
1971  * terminated by &#39;\0&#39;).
1972  *
1973  * Note that the pointer will consume an E or even an E+ and then leave
1974  * a &#39;maybe&#39; state even though a preceding integer.fraction is valid.
1975  * The PNG_FP_WAS_VALID flag indicates that a preceding substring was
1976  * a valid number.  It&#39;s possible to recover from this by calling
1977  * the parser again (from the start, with state 0) but with a string
1978  * that omits the last character (i.e. set the size to the index of
1979  * the problem character.)  This has not been tested within libpng.
1980  */
1981 PNG_INTERNAL_FUNCTION(int,png_check_fp_number,(png_const_charp string,
1982    size_t size, int *statep, png_size_tp whereami),PNG_EMPTY);
1983 
1984 /* This is the same but it checks a complete string and returns true
1985  * only if it just contains a floating point number.  As of 1.5.4 this
1986  * function also returns the state at the end of parsing the number if
1987  * it was valid (otherwise it returns 0.)  This can be used for testing
1988  * for negative or zero values using the sticky flag.
1989  */
1990 PNG_INTERNAL_FUNCTION(int,png_check_fp_string,(png_const_charp string,
1991    size_t size),PNG_EMPTY);
1992 #endif /* pCAL || sCAL */
1993 
1994 #if defined(PNG_GAMMA_SUPPORTED) ||\
1995     defined(PNG_INCH_CONVERSIONS_SUPPORTED) || defined(PNG_READ_pHYs_SUPPORTED)
1996 /* Added at libpng version 1.5.0 */
1997 /* This is a utility to provide a*times/div (rounded) and indicate
1998  * if there is an overflow.  The result is a boolean - false (0)
1999  * for overflow, true (1) if no overflow, in which case *res
2000  * holds the result.
2001  */
2002 PNG_INTERNAL_FUNCTION(int,png_muldiv,(png_fixed_point_p res, png_fixed_point a,
2003    png_int_32 multiplied_by, png_int_32 divided_by),PNG_EMPTY);
2004 #endif
2005 
2006 #if defined(PNG_READ_GAMMA_SUPPORTED) || defined(PNG_INCH_CONVERSIONS_SUPPORTED)
2007 /* Same deal, but issue a warning on overflow and return 0. */
2008 PNG_INTERNAL_FUNCTION(png_fixed_point,png_muldiv_warn,
2009    (png_const_structrp png_ptr, png_fixed_point a, png_int_32 multiplied_by,
2010    png_int_32 divided_by),PNG_EMPTY);
2011 #endif
2012 
2013 #ifdef PNG_GAMMA_SUPPORTED
2014 /* Calculate a reciprocal - used for gamma values.  This returns
2015  * 0 if the argument is 0 in order to maintain an undefined value;
2016  * there are no warnings.
2017  */
2018 PNG_INTERNAL_FUNCTION(png_fixed_point,png_reciprocal,(png_fixed_point a),
2019    PNG_EMPTY);
2020 
2021 #ifdef PNG_READ_GAMMA_SUPPORTED
2022 /* The same but gives a reciprocal of the product of two fixed point
2023  * values.  Accuracy is suitable for gamma calculations but this is
2024  * not exact - use png_muldiv for that.  Only required at present on read.
2025  */
2026 PNG_INTERNAL_FUNCTION(png_fixed_point,png_reciprocal2,(png_fixed_point a,
2027    png_fixed_point b),PNG_EMPTY);
2028 #endif
2029 
2030 /* Return true if the gamma value is significantly different from 1.0 */
2031 PNG_INTERNAL_FUNCTION(int,png_gamma_significant,(png_fixed_point gamma_value),
2032    PNG_EMPTY);
2033 #endif
2034 
2035 #ifdef PNG_READ_GAMMA_SUPPORTED
2036 /* Internal fixed point gamma correction.  These APIs are called as
2037  * required to convert single values - they don&#39;t need to be fast,
2038  * they are not used when processing image pixel values.
2039  *
2040  * While the input is an &#39;unsigned&#39; value it must actually be the
2041  * correct bit value - 0..255 or 0..65535 as required.
2042  */
2043 PNG_INTERNAL_FUNCTION(png_uint_16,png_gamma_correct,(png_structrp png_ptr,
2044    unsigned int value, png_fixed_point gamma_value),PNG_EMPTY);
2045 PNG_INTERNAL_FUNCTION(png_uint_16,png_gamma_16bit_correct,(unsigned int value,
2046    png_fixed_point gamma_value),PNG_EMPTY);
2047 PNG_INTERNAL_FUNCTION(png_byte,png_gamma_8bit_correct,(unsigned int value,
2048    png_fixed_point gamma_value),PNG_EMPTY);
2049 PNG_INTERNAL_FUNCTION(void,png_destroy_gamma_table,(png_structrp png_ptr),
2050    PNG_EMPTY);
2051 PNG_INTERNAL_FUNCTION(void,png_build_gamma_table,(png_structrp png_ptr,
2052    int bit_depth),PNG_EMPTY);
2053 #endif
2054 
2055 /* SIMPLIFIED READ/WRITE SUPPORT */
2056 #if defined(PNG_SIMPLIFIED_READ_SUPPORTED) ||\
2057    defined(PNG_SIMPLIFIED_WRITE_SUPPORTED)
2058 /* The internal structure that png_image::opaque points to. */
2059 typedef struct png_control
2060 {
2061    png_structp png_ptr;
2062    png_infop   info_ptr;
2063    png_voidp   error_buf;           /* Always a jmp_buf at present. */
2064 
2065    png_const_bytep memory;          /* Memory buffer. */
2066    size_t          size;            /* Size of the memory buffer. */
2067 
2068    unsigned int for_write       :1; /* Otherwise it is a read structure */
2069    unsigned int owned_file      :1; /* We own the file in io_ptr */
2070 } png_control;
2071 
2072 /* Return the pointer to the jmp_buf from a png_control: necessary because C
2073  * does not reveal the type of the elements of jmp_buf.
2074  */
2075 #ifdef __cplusplus
2076 #  define png_control_jmp_buf(pc) (((jmp_buf*)((pc)-&gt;error_buf))[0])
2077 #else
2078 #  define png_control_jmp_buf(pc) ((pc)-&gt;error_buf)
2079 #endif
2080 
2081 /* Utility to safely execute a piece of libpng code catching and logging any
2082  * errors that might occur.  Returns true on success, false on failure (either
2083  * of the function or as a result of a png_error.)
2084  */
2085 PNG_INTERNAL_CALLBACK(void,png_safe_error,(png_structp png_ptr,
2086    png_const_charp error_message),PNG_NORETURN);
2087 
2088 #ifdef PNG_WARNINGS_SUPPORTED
2089 PNG_INTERNAL_CALLBACK(void,png_safe_warning,(png_structp png_ptr,
2090    png_const_charp warning_message),PNG_EMPTY);
2091 #else
2092 #  define png_safe_warning 0/*dummy argument*/
2093 #endif
2094 
2095 PNG_INTERNAL_FUNCTION(int,png_safe_execute,(png_imagep image,
2096    int (*function)(png_voidp), png_voidp arg),PNG_EMPTY);
2097 
2098 /* Utility to log an error; this also cleans up the png_image; the function
2099  * always returns 0 (false).
2100  */
2101 PNG_INTERNAL_FUNCTION(int,png_image_error,(png_imagep image,
2102    png_const_charp error_message),PNG_EMPTY);
2103 
2104 #ifndef PNG_SIMPLIFIED_READ_SUPPORTED
2105 /* png_image_free is used by the write code but not exported */
2106 PNG_INTERNAL_FUNCTION(void, png_image_free, (png_imagep image), PNG_EMPTY);
2107 #endif /* !SIMPLIFIED_READ */
2108 
2109 #endif /* SIMPLIFIED READ/WRITE */
2110 
2111 /* These are initialization functions for hardware specific PNG filter
2112  * optimizations; list these here then select the appropriate one at compile
2113  * time using the macro PNG_FILTER_OPTIMIZATIONS.  If the macro is not defined
2114  * the generic code is used.
2115  */
2116 #ifdef PNG_FILTER_OPTIMIZATIONS
2117 PNG_INTERNAL_FUNCTION(void, PNG_FILTER_OPTIMIZATIONS, (png_structp png_ptr,
2118    unsigned int bpp), PNG_EMPTY);
2119    /* Just declare the optimization that will be used */
2120 #else
2121    /* List *all* the possible optimizations here - this branch is required if
2122     * the builder of libpng passes the definition of PNG_FILTER_OPTIMIZATIONS in
2123     * CFLAGS in place of CPPFLAGS *and* uses symbol prefixing.
2124     */
2125 #  if PNG_ARM_NEON_OPT &gt; 0
2126 PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_neon,
2127    (png_structp png_ptr, unsigned int bpp), PNG_EMPTY);
2128 #endif
2129 
2130 #if PNG_MIPS_MSA_OPT &gt; 0
2131 PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_msa,
2132    (png_structp png_ptr, unsigned int bpp), PNG_EMPTY);
2133 #endif
2134 
2135 #  if PNG_INTEL_SSE_IMPLEMENTATION &gt; 0
2136 PNG_INTERNAL_FUNCTION(void, png_init_filter_functions_sse2,
2137    (png_structp png_ptr, unsigned int bpp), PNG_EMPTY);
2138 #  endif
2139 #endif
2140 
2141 PNG_INTERNAL_FUNCTION(png_uint_32, png_check_keyword, (png_structrp png_ptr,
2142    png_const_charp key, png_bytep new_key), PNG_EMPTY);
2143 
<a name="7" id="anc7"></a>






















2144 /* Maintainer: Put new private prototypes here ^ */
2145 
2146 #include &quot;pngdebug.h&quot;
2147 
2148 #ifdef __cplusplus
2149 }
2150 #endif
2151 
2152 #endif /* PNG_VERSION_INFO_ONLY */
2153 #endif /* PNGPRIV_H */
<a name="8" id="anc8"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="8" type="hidden" />
</body>
</html>