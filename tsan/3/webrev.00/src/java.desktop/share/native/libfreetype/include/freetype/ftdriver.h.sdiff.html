<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/ftdriver.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftcid.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="fterrdef.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/ftdriver.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">   1 /***************************************************************************/</span>
<span class="line-modified">   2 /*                                                                         */</span>
<span class="line-modified">   3 /*  ftdriver.h                                                             */</span>
<span class="line-modified">   4 /*                                                                         */</span>
<span class="line-modified">   5 /*    FreeType API for controlling driver modules (specification only).    */</span>
<span class="line-modified">   6 /*                                                                         */</span>
<span class="line-modified">   7 /*  Copyright 2017-2018 by                                                 */</span>
<span class="line-modified">   8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">   9 /*                                                                         */</span>
<span class="line-modified">  10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">  11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">  12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">  13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">  14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified">  15 /*                                                                         */</span>
<span class="line-modified">  16 /***************************************************************************/</span>
  17 
  18 
  19 #ifndef FTDRIVER_H_
  20 #define FTDRIVER_H_
  21 
  22 #include &lt;ft2build.h&gt;
  23 #include FT_FREETYPE_H
  24 #include FT_PARAMETER_TAGS_H
  25 
  26 #ifdef FREETYPE_H
  27 #error &quot;freetype.h of FreeType 1 has been loaded!&quot;
  28 #error &quot;Please fix the directory search order for header files&quot;
  29 #error &quot;so that freetype.h of FreeType 2 is found first.&quot;
  30 #endif
  31 
  32 
  33 FT_BEGIN_HEADER
  34 
  35 
  36   /**************************************************************************
  37    *
  38    * @section:
  39    *   auto_hinter
  40    *
  41    * @title:
  42    *   The auto-hinter
  43    *
  44    * @abstract:
  45    *   Controlling the auto-hinting module.
  46    *
  47    * @description:
  48    *   While FreeType&#39;s auto-hinter doesn&#39;t expose API functions by itself,
  49    *   it is possible to control its behaviour with @FT_Property_Set and
  50    *   @FT_Property_Get.  The following lists the available properties
  51    *   together with the necessary macros and structures.
  52    *
<span class="line-modified">  53    *   Note that the auto-hinter&#39;s module name is `autofitter&#39; for</span>
<span class="line-modified">  54    *   historical reasons.</span>
  55    *
  56    *   Available properties are @increase-x-height, @no-stem-darkening
  57    *   (experimental), @darkening-parameters (experimental), @warping
  58    *   (experimental), @glyph-to-script-map (experimental), @fallback-script
  59    *   (experimental), and @default-script (experimental), as documented in
  60    *   the @properties section.
  61    *
  62    */
  63 
  64 
  65   /**************************************************************************
  66    *
  67    * @section:
  68    *   cff_driver
  69    *
  70    * @title:
  71    *   The CFF driver
  72    *
  73    * @abstract:
  74    *   Controlling the CFF driver module.
  75    *
  76    * @description:
<span class="line-modified">  77    *   While FreeType&#39;s CFF driver doesn&#39;t expose API functions by itself,</span>
<span class="line-modified">  78    *   it is possible to control its behaviour with @FT_Property_Set and</span>
  79    *   @FT_Property_Get.
  80    *
<span class="line-modified">  81    *   The CFF driver&#39;s module name is `cff&#39;.</span>
  82    *
  83    *   Available properties are @hinting-engine, @no-stem-darkening,
  84    *   @darkening-parameters, and @random-seed, as documented in the
  85    *   @properties section.
  86    *
  87    *
<span class="line-modified">  88    *   *Hinting* *and* *antialiasing* *principles* *of* *the* *new* *engine*</span>
  89    *
  90    *   The rasterizer is positioning horizontal features (e.g., ascender
  91    *   height &amp; x-height, or crossbars) on the pixel grid and minimizing the
  92    *   amount of antialiasing applied to them, while placing vertical
  93    *   features (vertical stems) on the pixel grid without hinting, thus
  94    *   representing the stem position and weight accurately.  Sometimes the
  95    *   vertical stems may be only partially black.  In this context,
<span class="line-modified">  96    *   `antialiasing&#39; means that stems are not positioned exactly on pixel</span>
  97    *   borders, causing a fuzzy appearance.
  98    *
  99    *   There are two principles behind this approach.
 100    *
<span class="line-modified"> 101    *   1) No hinting in the horizontal direction: Unlike `superhinted&#39;</span>
 102    *   TrueType, which changes glyph widths to accommodate regular
<span class="line-modified"> 103    *   inter-glyph spacing, Adobe&#39;s approach is `faithful to the design&#39; in</span>
<span class="line-modified"> 104    *   representing both the glyph width and the inter-glyph spacing</span>
<span class="line-modified"> 105    *   designed for the font.  This makes the screen display as close as it</span>
<span class="line-modified"> 106    *   can be to the result one would get with infinite resolution, while</span>
<span class="line-modified"> 107    *   preserving what is considered the key characteristics of each glyph.</span>
<span class="line-modified"> 108    *   Note that the distances between unhinted and grid-fitted positions at</span>
<span class="line-modified"> 109    *   small sizes are comparable to kerning values and thus would be</span>
<span class="line-modified"> 110    *   noticeable (and distracting) while reading if hinting were applied.</span>
 111    *
 112    *   One of the reasons to not hint horizontally is antialiasing for LCD
<span class="line-modified"> 113    *   screens: The pixel geometry of modern displays supplies three</span>
<span class="line-modified"> 114    *   vertical subpixels as the eye moves horizontally across each visible</span>
<span class="line-modified"> 115    *   pixel.  On devices where we can be certain this characteristic is</span>
<span class="line-modified"> 116    *   present a rasterizer can take advantage of the subpixels to add</span>
<span class="line-modified"> 117    *   increments of weight.  In Western writing systems this turns out to</span>
<span class="line-modified"> 118    *   be the more critical direction anyway; the weights and spacing of</span>
<span class="line-modified"> 119    *   vertical stems (see above) are central to Armenian, Cyrillic, Greek,</span>
<span class="line-modified"> 120    *   and Latin type designs.  Even when the rasterizer uses greyscale</span>
<span class="line-modified"> 121    *   antialiasing instead of color (a necessary compromise when one</span>
<span class="line-modified"> 122    *   doesn&#39;t know the screen characteristics), the unhinted vertical</span>
<span class="line-modified"> 123    *   features preserve the design&#39;s weight and spacing much better than</span>
<span class="line-removed"> 124    *   aliased type would.</span>
 125    *
 126    *   2) Alignment in the vertical direction: Weights and spacing along the
 127    *   y~axis are less critical; what is much more important is the visual
 128    *   alignment of related features (like cap-height and x-height).  The
 129    *   sense of alignment for these is enhanced by the sharpness of grid-fit
 130    *   edges, while the cruder vertical resolution (full pixels instead of
 131    *   1/3 pixels) is less of a problem.
 132    *
 133    *   On the technical side, horizontal alignment zones for ascender,
 134    *   x-height, and other important height values (traditionally called
<span class="line-modified"> 135    *   `blue zones&#39;) as defined in the font are positioned independently,</span>
<span class="line-modified"> 136    *   each being rounded to the nearest pixel edge, taking care of</span>
<span class="line-modified"> 137    *   overshoot suppression at small sizes, stem darkening, and scaling.</span>
 138    *
 139    *   Hstems (this is, hint values defined in the font to help align
 140    *   horizontal features) that fall within a blue zone are said to be
<span class="line-modified"> 141    *   `captured&#39; and are aligned to that zone.  Uncaptured stems are moved</span>
 142    *   in one of four ways, top edge up or down, bottom edge up or down.
<span class="line-modified"> 143    *   Unless there are conflicting hstems, the smallest movement is taken</span>
<span class="line-modified"> 144    *   to minimize distortion.</span>
 145    *
 146    */
 147 
 148 
 149   /**************************************************************************
 150    *
 151    * @section:
 152    *   pcf_driver
 153    *
 154    * @title:
 155    *   The PCF driver
 156    *
 157    * @abstract:
 158    *   Controlling the PCF driver module.
 159    *
 160    * @description:
<span class="line-modified"> 161    *   While FreeType&#39;s PCF driver doesn&#39;t expose API functions by itself,</span>
<span class="line-modified"> 162    *   it is possible to control its behaviour with @FT_Property_Set and</span>
 163    *   @FT_Property_Get.  Right now, there is a single property
 164    *   @no-long-family-names available if FreeType is compiled with
 165    *   PCF_CONFIG_OPTION_LONG_FAMILY_NAMES.
 166    *
<span class="line-modified"> 167    *   The PCF driver&#39;s module name is `pcf&#39;.</span>
 168    *
 169    */
 170 
 171 
 172   /**************************************************************************
 173    *
 174    * @section:
 175    *   t1_cid_driver
 176    *
 177    * @title:
 178    *   The Type 1 and CID drivers
 179    *
 180    * @abstract:
 181    *   Controlling the Type~1 and CID driver modules.
 182    *
 183    * @description:
 184    *   It is possible to control the behaviour of FreeType&#39;s Type~1 and
 185    *   Type~1 CID drivers with @FT_Property_Set and @FT_Property_Get.
 186    *
 187    *   Behind the scenes, both drivers use the Adobe CFF engine for hinting;
 188    *   however, the used properties must be specified separately.
 189    *
<span class="line-modified"> 190    *   The Type~1 driver&#39;s module name is `type1&#39;; the CID driver&#39;s module</span>
<span class="line-modified"> 191    *   name is `t1cid&#39;.</span>
 192    *
 193    *   Available properties are @hinting-engine, @no-stem-darkening,
 194    *   @darkening-parameters, and @random-seed, as documented in the
 195    *   @properties section.
 196    *
<span class="line-modified"> 197    *   Please see the @cff_driver section for more details on the new</span>
<span class="line-modified"> 198    *   hinting engine.</span>
 199    *
 200    */
 201 
 202 
 203   /**************************************************************************
 204    *
 205    * @section:
 206    *   tt_driver
 207    *
 208    * @title:
 209    *   The TrueType driver
 210    *
 211    * @abstract:
 212    *   Controlling the TrueType driver module.
 213    *
 214    * @description:
 215    *   While FreeType&#39;s TrueType driver doesn&#39;t expose API functions by
 216    *   itself, it is possible to control its behaviour with @FT_Property_Set
 217    *   and @FT_Property_Get.  The following lists the available properties
 218    *   together with the necessary macros and structures.
 219    *
<span class="line-modified"> 220    *   The TrueType driver&#39;s module name is `truetype&#39;.</span>
 221    *
 222    *   A single property @interpreter-version is available, as documented in
 223    *   the @properties section.
 224    *
 225    *   We start with a list of definitions, kindly provided by Greg
 226    *   Hitchcock.
 227    *
<span class="line-modified"> 228    *   _Bi-Level_ _Rendering_</span>
 229    *
 230    *   Monochromatic rendering, exclusively used in the early days of
 231    *   TrueType by both Apple and Microsoft.  Microsoft&#39;s GDI interface
 232    *   supported hinting of the right-side bearing point, such that the
 233    *   advance width could be non-linear.  Most often this was done to
 234    *   achieve some level of glyph symmetry.  To enable reasonable
<span class="line-modified"> 235    *   performance (e.g., not having to run hinting on all glyphs just to</span>
<span class="line-modified"> 236    *   get the widths) there was a bit in the head table indicating if the</span>
<span class="line-modified"> 237    *   side bearing was hinted, and additional tables, `hdmx&#39; and `LTSH&#39;, to</span>
<span class="line-modified"> 238    *   cache hinting widths across multiple sizes and device aspect ratios.</span>
 239    *
<span class="line-modified"> 240    *   _Font_ _Smoothing_</span>
 241    *
 242    *   Microsoft&#39;s GDI implementation of anti-aliasing.  Not traditional
 243    *   anti-aliasing as the outlines were hinted before the sampling.  The
 244    *   widths matched the bi-level rendering.
 245    *
<span class="line-modified"> 246    *   _ClearType_ _Rendering_</span>
 247    *
 248    *   Technique that uses physical subpixels to improve rendering on LCD
 249    *   (and other) displays.  Because of the higher resolution, many methods
<span class="line-modified"> 250    *   of improving symmetry in glyphs through hinting the right-side</span>
<span class="line-modified"> 251    *   bearing were no longer necessary.  This lead to what GDI calls</span>
<span class="line-modified"> 252    *   `natural widths&#39; ClearType, see</span>
<span class="line-modified"> 253    *   http://www.beatstamm.com/typography/RTRCh4.htm#Sec21.  Since hinting</span>
 254    *   has extra resolution, most non-linearity went away, but it is still
 255    *   possible for hints to change the advance widths in this mode.
 256    *
<span class="line-modified"> 257    *   _ClearType_ _Compatible_ _Widths_</span>
 258    *
 259    *   One of the earliest challenges with ClearType was allowing the
 260    *   implementation in GDI to be selected without requiring all UI and
 261    *   documents to reflow.  To address this, a compatible method of
 262    *   rendering ClearType was added where the font hints are executed once
 263    *   to determine the width in bi-level rendering, and then re-run in
 264    *   ClearType, with the difference in widths being absorbed in the font
 265    *   hints for ClearType (mostly in the white space of hints); see
<span class="line-modified"> 266    *   http://www.beatstamm.com/typography/RTRCh4.htm#Sec20.  Somewhat by</span>
 267    *   definition, compatible width ClearType allows for non-linear widths,
 268    *   but only when the bi-level version has non-linear widths.
 269    *
<span class="line-modified"> 270    *   _ClearType_ _Subpixel_ _Positioning_</span>
 271    *
 272    *   One of the nice benefits of ClearType is the ability to more crisply
 273    *   display fractional widths; unfortunately, the GDI model of integer
 274    *   bitmaps did not support this.  However, the WPF and Direct Write
<span class="line-modified"> 275    *   frameworks do support fractional widths.  DWrite calls this `natural</span>
<span class="line-modified"> 276    *   mode&#39;, not to be confused with GDI&#39;s `natural widths&#39;.  Subpixel</span>
 277    *   positioning, in the current implementation of Direct Write,
 278    *   unfortunately does not support hinted advance widths, see
<span class="line-modified"> 279    *   http://www.beatstamm.com/typography/RTRCh4.htm#Sec22.  Note that the</span>
 280    *   TrueType interpreter fully allows the advance width to be adjusted in
 281    *   this mode, just the DWrite client will ignore those changes.
 282    *
<span class="line-modified"> 283    *   _ClearType_ _Backward_ _Compatibility_</span>
 284    *
 285    *   This is a set of exceptions made in the TrueType interpreter to
 286    *   minimize hinting techniques that were problematic with the extra
 287    *   resolution of ClearType; see
<span class="line-modified"> 288    *   http://www.beatstamm.com/typography/RTRCh4.htm#Sec1 and</span>
 289    *   https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx.
<span class="line-modified"> 290    *   This technique is not to be confused with ClearType compatible</span>
<span class="line-modified"> 291    *   widths.  ClearType backward compatibility has no direct impact on</span>
<span class="line-modified"> 292    *   changing advance widths, but there might be an indirect impact on</span>
<span class="line-modified"> 293    *   disabling some deltas.  This could be worked around in backward</span>
<span class="line-modified"> 294    *   compatibility mode.</span>
 295    *
<span class="line-modified"> 296    *   _Native_ _ClearType_ _Mode_</span>
 297    *
<span class="line-modified"> 298    *   (Not to be confused with `natural widths&#39;.)  This mode removes all</span>
<span class="line-modified"> 299    *   the exceptions in the TrueType interpreter when running with</span>
<span class="line-modified"> 300    *   ClearType.  Any issues on widths would still apply, though.</span>
 301    *
 302    */
 303 
 304 
 305   /**************************************************************************
 306    *
 307    * @section:
 308    *   properties
 309    *
 310    * @title:
 311    *   Driver properties
 312    *
 313    * @abstract:
 314    *   Controlling driver modules.
 315    *
 316    * @description:
 317    *   Driver modules can be controlled by setting and unsetting properties,
 318    *   using the functions @FT_Property_Set and @FT_Property_Get.  This
 319    *   section documents the available properties, together with auxiliary
 320    *   macros and structures.
 321    *
 322    */
 323 
 324 
 325   /**************************************************************************
 326    *
 327    * @enum:
 328    *   FT_HINTING_XXX
 329    *
 330    * @description:
<span class="line-modified"> 331    *   A list of constants used for the @hinting-engine property to</span>
<span class="line-modified"> 332    *   select the hinting engine for CFF, Type~1, and CID fonts.</span>
 333    *
 334    * @values:
 335    *   FT_HINTING_FREETYPE ::
 336    *     Use the old FreeType hinting engine.
 337    *
 338    *   FT_HINTING_ADOBE ::
 339    *     Use the hinting engine contributed by Adobe.
 340    *
 341    * @since:
 342    *   2.9
 343    *
 344    */
 345 #define FT_HINTING_FREETYPE  0
 346 #define FT_HINTING_ADOBE     1
 347 
 348   /* these constants (introduced in 2.4.12) are deprecated */
 349 #define FT_CFF_HINTING_FREETYPE  FT_HINTING_FREETYPE
 350 #define FT_CFF_HINTING_ADOBE     FT_HINTING_ADOBE
 351 
 352 
 353   /**************************************************************************
 354    *
 355    * @property:
 356    *   hinting-engine
 357    *
 358    * @description:
<span class="line-modified"> 359    *   Thanks to Adobe, which contributed a new hinting (and parsing)</span>
<span class="line-modified"> 360    *   engine, an application can select between `freetype&#39; and `adobe&#39; if</span>
<span class="line-modified"> 361    *   compiled with CFF_CONFIG_OPTION_OLD_ENGINE.  If this configuration</span>
<span class="line-modified"> 362    *   macro isn&#39;t defined, `hinting-engine&#39; does nothing.</span>
 363    *
 364    *   The same holds for the Type~1 and CID modules if compiled with
<span class="line-modified"> 365    *   T1_CONFIG_OPTION_OLD_ENGINE.</span>
 366    *
<span class="line-modified"> 367    *   For the `cff&#39; module, the default engine is `freetype&#39; if</span>
<span class="line-modified"> 368    *   CFF_CONFIG_OPTION_OLD_ENGINE is defined, and `adobe&#39; otherwise.</span>
 369    *
<span class="line-modified"> 370    *   For both the `type1&#39; and `t1cid&#39; modules, the default engine is</span>
<span class="line-modified"> 371    *   `freetype&#39; if T1_CONFIG_OPTION_OLD_ENGINE is defined, and `adobe&#39;</span>
 372    *   otherwise.
 373    *







 374    *   The following example code demonstrates how to select Adobe&#39;s hinting
<span class="line-modified"> 375    *   engine for the `cff&#39; module (omitting the error handling).</span>
 376    *
<span class="line-modified"> 377    *   {</span>
 378    *     FT_Library  library;
<span class="line-modified"> 379    *     FT_UInt     hinting_engine = FT_CFF_HINTING_ADOBE;</span>
 380    *
 381    *
 382    *     FT_Init_FreeType( &amp;library );
 383    *
 384    *     FT_Property_Set( library, &quot;cff&quot;,
 385    *                               &quot;hinting-engine&quot;, &amp;hinting_engine );
<span class="line-modified"> 386    *   }</span>
<span class="line-removed"> 387    *</span>
<span class="line-removed"> 388    * @note:</span>
<span class="line-removed"> 389    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-removed"> 390    *</span>
<span class="line-removed"> 391    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
<span class="line-removed"> 392    *   variable (using values `adobe&#39; or `freetype&#39;).</span>
 393    *
 394    * @since:
<span class="line-modified"> 395    *   2.4.12 (for `cff&#39; module)</span>
 396    *
<span class="line-modified"> 397    *   2.9 (for `type1&#39; and `t1cid&#39; modules)</span>
 398    *
 399    */
 400 
 401 
 402   /**************************************************************************
 403    *
 404    * @property:
 405    *   no-stem-darkening
 406    *
 407    * @description:
<span class="line-modified"> 408    *   All glyphs that pass through the auto-hinter will be emboldened</span>
<span class="line-modified"> 409    *   unless this property is set to TRUE.  The same is true for the CFF,</span>
<span class="line-modified"> 410    *   Type~1, and CID font modules if the `Adobe&#39; engine is selected (which</span>
<span class="line-modified"> 411    *   is the default).</span>
 412    *
 413    *   Stem darkening emboldens glyphs at smaller sizes to make them more
 414    *   readable on common low-DPI screens when using linear alpha blending
 415    *   and gamma correction, see @FT_Render_Glyph.  When not using linear
 416    *   alpha blending and gamma correction, glyphs will appear heavy and
 417    *   fuzzy!
 418    *
 419    *   Gamma correction essentially lightens fonts since shades of grey are
 420    *   shifted to higher pixel values (=~higher brightness) to match the
 421    *   original intention to the reality of our screens.  The side-effect is
<span class="line-modified"> 422    *   that glyphs `thin out&#39;.  Mac OS~X and Adobe&#39;s proprietary font</span>
 423    *   rendering library implement a counter-measure: stem darkening at
 424    *   smaller sizes where shades of gray dominate.  By emboldening a glyph
 425    *   slightly in relation to its pixel size, individual pixels get higher
<span class="line-modified"> 426    *   coverage of filled-in outlines and are therefore `blacker&#39;.  This</span>
<span class="line-modified"> 427    *   counteracts the `thinning out&#39; of glyphs, making text remain readable</span>
 428    *   at smaller sizes.
 429    *
 430    *   By default, the Adobe engines for CFF, Type~1, and CID fonts darken
 431    *   stems at smaller sizes, regardless of hinting, to enhance contrast.
 432    *   Setting this property, stem darkening gets switched off.
 433    *
<span class="line-modified"> 434    *   For the auto-hinter, stem-darkening is experimental currently and</span>
<span class="line-modified"> 435    *   thus switched off by default (this is, `no-stem-darkening&#39; is set to</span>
<span class="line-modified"> 436    *   TRUE by default).  Total consistency with the CFF driver is not</span>
<span class="line-modified"> 437    *   achieved right now because the emboldening method differs and glyphs</span>
<span class="line-modified"> 438    *   must be scaled down on the Y-axis to keep outline points inside their</span>
 439    *   precomputed blue zones.  The smaller the size (especially 9ppem and
 440    *   down), the higher the loss of emboldening versus the CFF driver.
 441    *
<span class="line-modified"> 442    *   Note that stem darkening is never applied if @FT_LOAD_NO_SCALE is</span>
<span class="line-modified"> 443    *   set.</span>







 444    *
<span class="line-modified"> 445    *   {</span>

 446    *     FT_Library  library;
 447    *     FT_Bool     no_stem_darkening = TRUE;
 448    *
 449    *
 450    *     FT_Init_FreeType( &amp;library );
 451    *
 452    *     FT_Property_Set( library, &quot;cff&quot;,
 453    *                               &quot;no-stem-darkening&quot;, &amp;no_stem_darkening );
<span class="line-modified"> 454    *   }</span>
<span class="line-removed"> 455    *</span>
<span class="line-removed"> 456    * @note:</span>
<span class="line-removed"> 457    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-removed"> 458    *</span>
<span class="line-removed"> 459    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
<span class="line-removed"> 460    *   variable (using values 1 and 0 for `on&#39; and `off&#39;, respectively).</span>
<span class="line-removed"> 461    *   It can also be set per face using @FT_Face_Properties with</span>
<span class="line-removed"> 462    *   @FT_PARAM_TAG_STEM_DARKENING.</span>
 463    *
 464    * @since:
<span class="line-modified"> 465    *   2.4.12 (for `cff&#39; module)</span>
 466    *
<span class="line-modified"> 467    *   2.6.2 (for `autofitter&#39; module)</span>
 468    *
<span class="line-modified"> 469    *   2.9 (for `type1&#39; and `t1cid&#39; modules)</span>
 470    *
 471    */
 472 
 473 
 474   /**************************************************************************
 475    *
 476    * @property:
 477    *   darkening-parameters
 478    *
 479    * @description:
 480    *   By default, the Adobe hinting engine, as used by the CFF, Type~1, and
<span class="line-modified"> 481    *   CID font drivers, darkens stems as follows (if the</span>
<span class="line-modified"> 482    *   `no-stem-darkening&#39; property isn&#39;t set):</span>
 483    *
<span class="line-modified"> 484    *   {</span>
 485    *     stem width &lt;= 0.5px:   darkening amount = 0.4px
 486    *     stem width  = 1px:     darkening amount = 0.275px
 487    *     stem width  = 1.667px: darkening amount = 0.275px
 488    *     stem width &gt;= 2.333px: darkening amount = 0px
<span class="line-modified"> 489    *   }</span>
 490    *
 491    *   and piecewise linear in-between.  At configuration time, these four
 492    *   control points can be set with the macro
<span class="line-modified"> 493    *   `CFF_CONFIG_OPTION_DARKENING_PARAMETERS&#39;; the CFF, Type~1, and CID</span>
 494    *   drivers share these values.  At runtime, the control points can be
<span class="line-modified"> 495    *   changed using the `darkening-parameters&#39; property, as the following</span>
<span class="line-modified"> 496    *   example demonstrates for the Type~1 driver.</span>
<span class="line-removed"> 497    *</span>
<span class="line-removed"> 498    *   {</span>
<span class="line-removed"> 499    *     FT_Library  library;</span>
<span class="line-removed"> 500    *     FT_Int      darken_params[8] = {  500, 300,   // x1, y1</span>
<span class="line-removed"> 501    *                                      1000, 200,   // x2, y2</span>
<span class="line-removed"> 502    *                                      1500, 100,   // x3, y3</span>
<span class="line-removed"> 503    *                                      2000,   0 }; // x4, y4</span>
<span class="line-removed"> 504    *</span>
<span class="line-removed"> 505    *</span>
<span class="line-removed"> 506    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-removed"> 507    *</span>
<span class="line-removed"> 508    *     FT_Property_Set( library, &quot;type1&quot;,</span>
<span class="line-removed"> 509    *                               &quot;darkening-parameters&quot;, darken_params );</span>
<span class="line-removed"> 510    *   }</span>
 511    *
 512    *   The x~values give the stem width, and the y~values the darkening
 513    *   amount.  The unit is 1000th of pixels.  All coordinate values must be
<span class="line-modified"> 514    *   positive; the x~values must be monotonically increasing; the</span>
<span class="line-modified"> 515    *   y~values must be monotonically decreasing and smaller than or</span>
<span class="line-modified"> 516    *   equal to 500 (corresponding to half a pixel); the slope of each</span>
<span class="line-modified"> 517    *   linear piece must be shallower than -1 (e.g., -.4).</span>
 518    *
 519    *   The auto-hinter provides this property, too, as an experimental
 520    *   feature.  See @no-stem-darkening for more.
 521    *
 522    * @note:
 523    *   This property can be used with @FT_Property_Get also.
 524    *
<span class="line-modified"> 525    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
 526    *   variable, using eight comma-separated integers without spaces.  Here
<span class="line-modified"> 527    *   the above example, using `\&#39; to break the line for readability.</span>
 528    *
<span class="line-modified"> 529    *   {</span>
 530    *     FREETYPE_PROPERTIES=\
 531    *     type1:darkening-parameters=500,300,1000,200,1500,100,2000,0
<span class="line-modified"> 532    *   }</span>















 533    *
 534    * @since:
<span class="line-modified"> 535    *   2.5.1 (for `cff&#39; module)</span>
 536    *
<span class="line-modified"> 537    *   2.6.2 (for `autofitter&#39; module)</span>
 538    *
<span class="line-modified"> 539    *   2.9 (for `type1&#39; and `t1cid&#39; modules)</span>
 540    *
 541    */
 542 
 543 
 544   /**************************************************************************
 545    *
 546    * @property:
 547    *   random-seed
 548    *
 549    * @description:
<span class="line-modified"> 550    *   By default, the seed value for the CFF `random&#39; operator and the</span>
<span class="line-modified"> 551    *   similar `0 28 callothersubr pop&#39; command for the Type~1 and CID</span>
 552    *   drivers is set to a random value.  However, mainly for debugging
<span class="line-modified"> 553    *   purposes, it is often necessary to use a known value as a seed so</span>
<span class="line-modified"> 554    *   that the pseudo-random number sequences generated by `random&#39; are</span>
 555    *   repeatable.
 556    *
<span class="line-modified"> 557    *   The `random-seed&#39; property does that.  Its argument is a signed 32bit</span>
 558    *   integer; if the value is zero or negative, the seed given by the
<span class="line-modified"> 559    *   `intitialRandomSeed&#39; private DICT operator in a CFF file gets used</span>
<span class="line-modified"> 560    *   (or a default value if there is no such operator).  If the value is</span>
<span class="line-modified"> 561    *   positive, use it instead of `initialRandomSeed&#39;, which is</span>
<span class="line-modified"> 562    *   consequently ignored.</span>
 563    *
 564    * @note:
<span class="line-modified"> 565    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
 566    *   variable.  It can also be set per face using @FT_Face_Properties with
 567    *   @FT_PARAM_TAG_RANDOM_SEED.
 568    *
 569    * @since:
<span class="line-modified"> 570    *   2.8 (for `cff&#39; module)</span>
 571    *
<span class="line-modified"> 572    *   2.9 (for `type1&#39; and `t1cid&#39; modules)</span>
 573    *
 574    */
 575 
 576 
 577   /**************************************************************************
 578    *
 579    * @property:
 580    *   no-long-family-names
 581    *
 582    * @description:
<span class="line-modified"> 583    *   If PCF_CONFIG_OPTION_LONG_FAMILY_NAMES is active while compiling</span>
 584    *   FreeType, the PCF driver constructs long family names.
 585    *
<span class="line-modified"> 586    *   There are many PCF fonts just called `Fixed&#39; which look completely</span>
 587    *   different, and which have nothing to do with each other.  When
<span class="line-modified"> 588    *   selecting `Fixed&#39; in KDE or Gnome one gets results that appear rather</span>
<span class="line-modified"> 589    *   random, the style changes often if one changes the size and one</span>
<span class="line-modified"> 590    *   cannot select some fonts at all.  The improve this situation, the PCF</span>
<span class="line-modified"> 591    *   module prepends the foundry name (plus a space) to the family name.</span>
<span class="line-modified"> 592    *   It also checks whether there are `wide&#39; characters; all put together,</span>
<span class="line-modified"> 593    *   family names like `Sony Fixed&#39; or `Misc Fixed Wide&#39; are constructed.</span>


 594    *
<span class="line-modified"> 595    *   If `no-long-family-names&#39; is set, this feature gets switched off.</span>

 596    *
<span class="line-modified"> 597    *   {</span>




 598    *     FT_Library  library;
 599    *     FT_Bool     no_long_family_names = TRUE;
 600    *
 601    *
 602    *     FT_Init_FreeType( &amp;library );
 603    *
 604    *     FT_Property_Set( library, &quot;pcf&quot;,
 605    *                               &quot;no-long-family-names&quot;,
 606    *                               &amp;no_long_family_names );
<span class="line-modified"> 607    *   }</span>
<span class="line-removed"> 608    *</span>
<span class="line-removed"> 609    * @note:</span>
<span class="line-removed"> 610    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-removed"> 611    *</span>
<span class="line-removed"> 612    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
<span class="line-removed"> 613    *   variable (using values 1 and 0 for `on&#39; and `off&#39;, respectively).</span>
 614    *
 615    * @since:
 616    *   2.8
 617    */
 618 
 619 
 620   /**************************************************************************
 621    *
 622    * @enum:
 623    *   TT_INTERPRETER_VERSION_XXX
 624    *
 625    * @description:
 626    *   A list of constants used for the @interpreter-version property to
 627    *   select the hinting engine for Truetype fonts.
 628    *
<span class="line-modified"> 629    *   The numeric value in the constant names represents the version</span>
<span class="line-modified"> 630    *   number as returned by the `GETINFO&#39; bytecode instruction.</span>
 631    *
 632    * @values:
 633    *   TT_INTERPRETER_VERSION_35 ::
 634    *     Version~35 corresponds to MS rasterizer v.1.7 as used e.g. in
 635    *     Windows~98; only grayscale and B/W rasterizing is supported.
 636    *
 637    *   TT_INTERPRETER_VERSION_38 ::
 638    *     Version~38 corresponds to MS rasterizer v.1.9; it is roughly
 639    *     equivalent to the hinting provided by DirectWrite ClearType (as can
 640    *     be found, for example, in the Internet Explorer~9 running on
<span class="line-modified"> 641    *     Windows~7).  It is used in FreeType to select the `Infinality&#39;</span>
<span class="line-modified"> 642    *     subpixel hinting code.  The code may be removed in a future</span>
<span class="line-removed"> 643    *     version.</span>
 644    *
 645    *   TT_INTERPRETER_VERSION_40 ::
 646    *     Version~40 corresponds to MS rasterizer v.2.1; it is roughly
 647    *     equivalent to the hinting provided by DirectWrite ClearType (as can
 648    *     be found, for example, in Microsoft&#39;s Edge Browser on Windows~10).
<span class="line-modified"> 649    *     It is used in FreeType to select the `minimal&#39; subpixel hinting</span>
 650    *     code, a stripped-down and higher performance version of the
<span class="line-modified"> 651    *     `Infinality&#39; code.</span>
 652    *
 653    * @note:
<span class="line-modified"> 654    *   This property controls the behaviour of the bytecode interpreter</span>
<span class="line-modified"> 655    *   and thus how outlines get hinted.  It does *not* control how glyph</span>
<span class="line-modified"> 656    *   get rasterized!  In particular, it does not control subpixel color</span>
 657    *   filtering.
 658    *
 659    *   If FreeType has not been compiled with the configuration option
<span class="line-modified"> 660    *   TT_CONFIG_OPTION_SUBPIXEL_HINTING, selecting version~38 or~40 causes</span>
<span class="line-modified"> 661    *   an `FT_Err_Unimplemented_Feature&#39; error.</span>
 662    *
<span class="line-modified"> 663    *   Depending on the graphics framework, Microsoft uses different</span>
<span class="line-modified"> 664    *   bytecode and rendering engines.  As a consequence, the version</span>
<span class="line-modified"> 665    *   numbers returned by a call to the `GETINFO&#39; bytecode instruction are</span>
<span class="line-modified"> 666    *   more convoluted than desired.</span>
 667    *
<span class="line-modified"> 668    *   Here are two tables that try to shed some light on the possible</span>
<span class="line-modified"> 669    *   values for the MS rasterizer engine, together with the additional</span>
<span class="line-modified"> 670    *   features introduced by it.</span>
 671    *
<span class="line-modified"> 672    *   {</span>
 673    *     GETINFO framework               version feature
 674    *     -------------------------------------------------------------------
 675    *         3   GDI (Win 3.1),            v1.0  16-bit, first version
 676    *             TrueImage
 677    *        33   GDI (Win NT 3.1),         v1.5  32-bit
 678    *             HP Laserjet
 679    *        34   GDI (Win 95)              v1.6  font smoothing,
 680    *                                             new SCANTYPE opcode
 681    *        35   GDI (Win 98/2000)         v1.7  (UN)SCALED_COMPONENT_OFFSET
 682    *                                               bits in composite glyphs
 683    *        36   MGDI (Win CE 2)           v1.6+ classic ClearType
 684    *        37   GDI (XP and later),       v1.8  ClearType
 685    *             GDI+ old (before Vista)
 686    *        38   GDI+ old (Vista, Win 7),  v1.9  subpixel ClearType,
 687    *             WPF                             Y-direction ClearType,
 688    *                                             additional error checking
 689    *        39   DWrite (before Win 8)     v2.0  subpixel ClearType flags
 690    *                                               in GETINFO opcode,
 691    *                                             bug fixes
 692    *        40   GDI+ (after Win 7),       v2.1  Y-direction ClearType flag
 693    *             DWrite (Win 8)                    in GETINFO opcode,
 694    *                                             Gray ClearType
<span class="line-modified"> 695    *   }</span>
 696    *
<span class="line-modified"> 697    *   The `version&#39; field gives a rough orientation only, since some</span>
 698    *   applications provided certain features much earlier (as an example,
 699    *   Microsoft Reader used subpixel and Y-direction ClearType already in
 700    *   Windows 2000).  Similarly, updates to a given framework might include
 701    *   improved hinting support.
 702    *
<span class="line-modified"> 703    *   {</span>
 704    *      version   sampling          rendering        comment
 705    *               x        y       x           y
 706    *     --------------------------------------------------------------
 707    *       v1.0   normal  normal  B/W           B/W    bi-level
 708    *       v1.6   high    high    gray          gray   grayscale
 709    *       v1.8   high    normal  color-filter  B/W    (GDI) ClearType
 710    *       v1.9   high    high    color-filter  gray   Color ClearType
 711    *       v2.1   high    normal  gray          B/W    Gray ClearType
 712    *       v2.1   high    high    gray          gray   Gray ClearType
<span class="line-modified"> 713    *   }</span>
 714    *
 715    *   Color and Gray ClearType are the two available variants of
<span class="line-modified"> 716    *   `Y-direction ClearType&#39;, meaning grayscale rasterization along the</span>
 717    *   Y-direction; the name used in the TrueType specification for this
<span class="line-modified"> 718    *   feature is `symmetric smoothing&#39;.  `Classic ClearType&#39; is the</span>
<span class="line-modified"> 719    *   original algorithm used before introducing a modified version in</span>
<span class="line-modified"> 720    *   Win~XP.  Another name for v1.6&#39;s grayscale rendering is `font</span>
<span class="line-modified"> 721    *   smoothing&#39;, and `Color ClearType&#39; is sometimes also called `DWrite</span>
<span class="line-modified"> 722    *   ClearType&#39;.  To differentiate between today&#39;s Color ClearType and the</span>
<span class="line-modified"> 723    *   earlier ClearType variant with B/W rendering along the vertical axis,</span>
<span class="line-modified"> 724    *   the latter is sometimes called `GDI ClearType&#39;.</span>
<span class="line-modified"> 725    *</span>
<span class="line-modified"> 726    *   `Normal&#39; and `high&#39; sampling describe the (virtual) resolution to</span>
<span class="line-modified"> 727    *   access the rasterized outline after the hinting process.  `Normal&#39;</span>
 728    *   means 1 sample per grid line (i.e., B/W).  In the current Microsoft
<span class="line-modified"> 729    *   implementation, `high&#39; means an extra virtual resolution of 16x16 (or</span>
<span class="line-modified"> 730    *   16x1) grid lines per pixel for bytecode instructions like `MIRP&#39;.</span>
 731    *   After hinting, these 16 grid lines are mapped to 6x5 (or 6x1) grid
 732    *   lines for color filtering if Color ClearType is activated.
 733    *
<span class="line-modified"> 734    *   Note that `Gray ClearType&#39; is essentially the same as v1.6&#39;s</span>
<span class="line-modified"> 735    *   grayscale rendering.  However, the GETINFO instruction handles it</span>
<span class="line-modified"> 736    *   differently: v1.6 returns bit~12 (hinting for grayscale), while v2.1</span>
<span class="line-modified"> 737    *   returns bits~13 (hinting for ClearType), 18 (symmetrical smoothing),</span>
<span class="line-modified"> 738    *   and~19 (Gray ClearType).  Also, this mode respects bits 2 and~3 for</span>
<span class="line-modified"> 739    *   the version~1 gasp table exclusively (like Color ClearType), while</span>
<span class="line-modified"> 740    *   v1.6 only respects the values of version~0 (bits 0 and~1).</span>
 741    *
<span class="line-modified"> 742    *   Keep in mind that the features of the above interpreter versions</span>
<span class="line-modified"> 743    *   might not map exactly to FreeType features or behavior because it is</span>
<span class="line-modified"> 744    *   a fundamentally different library with different internals.</span>
 745    *
 746    */
 747 #define TT_INTERPRETER_VERSION_35  35
 748 #define TT_INTERPRETER_VERSION_38  38
 749 #define TT_INTERPRETER_VERSION_40  40
 750 
 751 
 752   /**************************************************************************
 753    *
 754    * @property:
 755    *   interpreter-version
 756    *
 757    * @description:
<span class="line-modified"> 758    *   Currently, three versions are available, two representing the</span>
<span class="line-modified"> 759    *   bytecode interpreter with subpixel hinting support (old `Infinality&#39;</span>
<span class="line-modified"> 760    *   code and new stripped-down and higher performance `minimal&#39; code) and</span>
<span class="line-modified"> 761    *   one without, respectively.  The default is subpixel support if</span>
<span class="line-modified"> 762    *   TT_CONFIG_OPTION_SUBPIXEL_HINTING is defined, and no subpixel support</span>
<span class="line-modified"> 763    *   otherwise (since it isn&#39;t available then).</span>
 764    *
 765    *   If subpixel hinting is on, many TrueType bytecode instructions behave
<span class="line-modified"> 766    *   differently compared to B/W or grayscale rendering (except if `native</span>
 767    *   ClearType&#39; is selected by the font).  Microsoft&#39;s main idea is to
 768    *   render at a much increased horizontal resolution, then sampling down
 769    *   the created output to subpixel precision.  However, many older fonts
<span class="line-modified"> 770    *   are not suited to this and must be specially taken care of by</span>
<span class="line-modified"> 771    *   applying (hardcoded) tweaks in Microsoft&#39;s interpreter.</span>
 772    *
 773    *   Details on subpixel hinting and some of the necessary tweaks can be
 774    *   found in Greg Hitchcock&#39;s whitepaper at
<span class="line-modified"> 775    *   `https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx&#39;.</span>
<span class="line-modified"> 776    *   Note that FreeType currently doesn&#39;t really `subpixel hint&#39; (6x1, 6x2,</span>
 777    *   or 6x5 supersampling) like discussed in the paper.  Depending on the
 778    *   chosen interpreter, it simply ignores instructions on vertical stems
 779    *   to arrive at very similar results.
 780    *







 781    *   The following example code demonstrates how to deactivate subpixel
 782    *   hinting (omitting the error handling).
 783    *
<span class="line-modified"> 784    *   {</span>
 785    *     FT_Library  library;
 786    *     FT_Face     face;
 787    *     FT_UInt     interpreter_version = TT_INTERPRETER_VERSION_35;
 788    *
 789    *
 790    *     FT_Init_FreeType( &amp;library );
 791    *
 792    *     FT_Property_Set( library, &quot;truetype&quot;,
 793    *                               &quot;interpreter-version&quot;,
 794    *                               &amp;interpreter_version );
<span class="line-modified"> 795    *   }</span>
<span class="line-removed"> 796    *</span>
<span class="line-removed"> 797    * @note:</span>
<span class="line-removed"> 798    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-removed"> 799    *</span>
<span class="line-removed"> 800    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
<span class="line-removed"> 801    *   variable (using values `35&#39;, `38&#39;, or `40&#39;).</span>
 802    *
 803    * @since:
 804    *   2.5
 805    */
 806 
 807 
 808   /**************************************************************************
 809    *
 810    * @property:
 811    *   glyph-to-script-map
 812    *
 813    * @description:
<span class="line-modified"> 814    *   *Experimental* *only*</span>
 815    *
 816    *   The auto-hinter provides various script modules to hint glyphs.
 817    *   Examples of supported scripts are Latin or CJK.  Before a glyph is
 818    *   auto-hinted, the Unicode character map of the font gets examined, and
 819    *   the script is then determined based on Unicode character ranges, see
 820    *   below.
 821    *
<span class="line-modified"> 822    *   OpenType fonts, however, often provide much more glyphs than</span>
<span class="line-modified"> 823    *   character codes (small caps, superscripts, ligatures, swashes, etc.),</span>
<span class="line-modified"> 824    *   to be controlled by so-called `features&#39;.  Handling OpenType features</span>
<span class="line-modified"> 825    *   can be quite complicated and thus needs a separate library on top of</span>
 826    *   FreeType.
 827    *
 828    *   The mapping between glyph indices and scripts (in the auto-hinter
<span class="line-modified"> 829    *   sense, see the @FT_AUTOHINTER_SCRIPT_XXX values) is stored as an</span>
<span class="line-modified"> 830    *   array with `num_glyphs&#39; elements, as found in the font&#39;s @FT_Face</span>
<span class="line-modified"> 831    *   structure.  The `glyph-to-script-map&#39; property returns a pointer to</span>
<span class="line-modified"> 832    *   this array, which can be modified as needed.  Note that the</span>
<span class="line-modified"> 833    *   modification should happen before the first glyph gets processed by</span>
<span class="line-modified"> 834    *   the auto-hinter so that the global analysis of the font shapes</span>
<span class="line-modified"> 835    *   actually uses the modified mapping.</span>
<span class="line-modified"> 836    *</span>
<span class="line-modified"> 837    *   The following example code demonstrates how to access it (omitting</span>
<span class="line-modified"> 838    *   the error handling).</span>
<span class="line-modified"> 839    *</span>
<span class="line-modified"> 840    *   {</span>

 841    *     FT_Library                library;
 842    *     FT_Face                   face;
 843    *     FT_Prop_GlyphToScriptMap  prop;
 844    *
 845    *
 846    *     FT_Init_FreeType( &amp;library );
 847    *     FT_New_Face( library, &quot;foo.ttf&quot;, 0, &amp;face );
 848    *
 849    *     prop.face = face;
 850    *
 851    *     FT_Property_Get( library, &quot;autofitter&quot;,
 852    *                               &quot;glyph-to-script-map&quot;, &amp;prop );
 853    *
 854    *     // adjust `prop.map&#39; as needed right here
 855    *
 856    *     FT_Load_Glyph( face, ..., FT_LOAD_FORCE_AUTOHINT );
<span class="line-modified"> 857    *   }</span>
 858    *
 859    * @since:
 860    *   2.4.11
 861    *
 862    */
 863 
 864 
 865   /**************************************************************************
 866    *
 867    * @enum:
 868    *   FT_AUTOHINTER_SCRIPT_XXX
 869    *
 870    * @description:
<span class="line-modified"> 871    *   *Experimental* *only*</span>
 872    *
 873    *   A list of constants used for the @glyph-to-script-map property to
 874    *   specify the script submodule the auto-hinter should use for hinting a
 875    *   particular glyph.
 876    *
 877    * @values:
 878    *   FT_AUTOHINTER_SCRIPT_NONE ::
 879    *     Don&#39;t auto-hint this glyph.
 880    *
 881    *   FT_AUTOHINTER_SCRIPT_LATIN ::
<span class="line-modified"> 882    *     Apply the latin auto-hinter.  For the auto-hinter, `latin&#39; is a</span>
<span class="line-modified"> 883    *     very broad term, including Cyrillic and Greek also since characters</span>
<span class="line-modified"> 884    *     from those scripts share the same design constraints.</span>
 885    *
 886    *     By default, characters from the following Unicode ranges are
 887    *     assigned to this submodule.
 888    *
<span class="line-modified"> 889    *     {</span>
 890    *       U+0020 - U+007F  // Basic Latin (no control characters)
 891    *       U+00A0 - U+00FF  // Latin-1 Supplement (no control characters)
 892    *       U+0100 - U+017F  // Latin Extended-A
 893    *       U+0180 - U+024F  // Latin Extended-B
 894    *       U+0250 - U+02AF  // IPA Extensions
 895    *       U+02B0 - U+02FF  // Spacing Modifier Letters
 896    *       U+0300 - U+036F  // Combining Diacritical Marks
 897    *       U+0370 - U+03FF  // Greek and Coptic
 898    *       U+0400 - U+04FF  // Cyrillic
 899    *       U+0500 - U+052F  // Cyrillic Supplement
 900    *       U+1D00 - U+1D7F  // Phonetic Extensions
 901    *       U+1D80 - U+1DBF  // Phonetic Extensions Supplement
 902    *       U+1DC0 - U+1DFF  // Combining Diacritical Marks Supplement
 903    *       U+1E00 - U+1EFF  // Latin Extended Additional
 904    *       U+1F00 - U+1FFF  // Greek Extended
 905    *       U+2000 - U+206F  // General Punctuation
 906    *       U+2070 - U+209F  // Superscripts and Subscripts
 907    *       U+20A0 - U+20CF  // Currency Symbols
 908    *       U+2150 - U+218F  // Number Forms
 909    *       U+2460 - U+24FF  // Enclosed Alphanumerics
 910    *       U+2C60 - U+2C7F  // Latin Extended-C
 911    *       U+2DE0 - U+2DFF  // Cyrillic Extended-A
 912    *       U+2E00 - U+2E7F  // Supplemental Punctuation
 913    *       U+A640 - U+A69F  // Cyrillic Extended-B
 914    *       U+A720 - U+A7FF  // Latin Extended-D
 915    *       U+FB00 - U+FB06  // Alphab. Present. Forms (Latin Ligatures)
 916    *      U+1D400 - U+1D7FF // Mathematical Alphanumeric Symbols
 917    *      U+1F100 - U+1F1FF // Enclosed Alphanumeric Supplement
<span class="line-modified"> 918    *     }</span>
 919    *
 920    *   FT_AUTOHINTER_SCRIPT_CJK ::
 921    *     Apply the CJK auto-hinter, covering Chinese, Japanese, Korean, old
 922    *     Vietnamese, and some other scripts.
 923    *
 924    *     By default, characters from the following Unicode ranges are
 925    *     assigned to this submodule.
 926    *
<span class="line-modified"> 927    *     {</span>
 928    *       U+1100 - U+11FF  // Hangul Jamo
 929    *       U+2E80 - U+2EFF  // CJK Radicals Supplement
 930    *       U+2F00 - U+2FDF  // Kangxi Radicals
 931    *       U+2FF0 - U+2FFF  // Ideographic Description Characters
 932    *       U+3000 - U+303F  // CJK Symbols and Punctuation
 933    *       U+3040 - U+309F  // Hiragana
 934    *       U+30A0 - U+30FF  // Katakana
 935    *       U+3100 - U+312F  // Bopomofo
 936    *       U+3130 - U+318F  // Hangul Compatibility Jamo
 937    *       U+3190 - U+319F  // Kanbun
 938    *       U+31A0 - U+31BF  // Bopomofo Extended
 939    *       U+31C0 - U+31EF  // CJK Strokes
 940    *       U+31F0 - U+31FF  // Katakana Phonetic Extensions
 941    *       U+3200 - U+32FF  // Enclosed CJK Letters and Months
 942    *       U+3300 - U+33FF  // CJK Compatibility
 943    *       U+3400 - U+4DBF  // CJK Unified Ideographs Extension A
 944    *       U+4DC0 - U+4DFF  // Yijing Hexagram Symbols
 945    *       U+4E00 - U+9FFF  // CJK Unified Ideographs
 946    *       U+A960 - U+A97F  // Hangul Jamo Extended-A
 947    *       U+AC00 - U+D7AF  // Hangul Syllables
 948    *       U+D7B0 - U+D7FF  // Hangul Jamo Extended-B
 949    *       U+F900 - U+FAFF  // CJK Compatibility Ideographs
 950    *       U+FE10 - U+FE1F  // Vertical forms
 951    *       U+FE30 - U+FE4F  // CJK Compatibility Forms
 952    *       U+FF00 - U+FFEF  // Halfwidth and Fullwidth Forms
 953    *      U+1B000 - U+1B0FF // Kana Supplement
 954    *      U+1D300 - U+1D35F // Tai Xuan Hing Symbols
 955    *      U+1F200 - U+1F2FF // Enclosed Ideographic Supplement
 956    *      U+20000 - U+2A6DF // CJK Unified Ideographs Extension B
 957    *      U+2A700 - U+2B73F // CJK Unified Ideographs Extension C
 958    *      U+2B740 - U+2B81F // CJK Unified Ideographs Extension D
 959    *      U+2F800 - U+2FA1F // CJK Compatibility Ideographs Supplement
<span class="line-modified"> 960    *     }</span>
 961    *
 962    *   FT_AUTOHINTER_SCRIPT_INDIC ::
 963    *     Apply the indic auto-hinter, covering all major scripts from the
 964    *     Indian sub-continent and some other related scripts like Thai, Lao,
 965    *     or Tibetan.
 966    *
 967    *     By default, characters from the following Unicode ranges are
 968    *     assigned to this submodule.
 969    *
<span class="line-modified"> 970    *     {</span>
 971    *       U+0900 - U+0DFF  // Indic Range
 972    *       U+0F00 - U+0FFF  // Tibetan
 973    *       U+1900 - U+194F  // Limbu
 974    *       U+1B80 - U+1BBF  // Sundanese
 975    *       U+A800 - U+A82F  // Syloti Nagri
 976    *       U+ABC0 - U+ABFF  // Meetei Mayek
 977    *      U+11800 - U+118DF // Sharada
<span class="line-modified"> 978    *     }</span>
 979    *
 980    *     Note that currently Indic support is rudimentary only, missing blue
 981    *     zone support.
 982    *
 983    * @since:
 984    *   2.4.11
 985    *
 986    */
 987 #define FT_AUTOHINTER_SCRIPT_NONE   0
 988 #define FT_AUTOHINTER_SCRIPT_LATIN  1
 989 #define FT_AUTOHINTER_SCRIPT_CJK    2
 990 #define FT_AUTOHINTER_SCRIPT_INDIC  3
 991 
 992 
 993   /**************************************************************************
 994    *
 995    * @struct:
 996    *   FT_Prop_GlyphToScriptMap
 997    *
 998    * @description:
<span class="line-modified"> 999    *   *Experimental* *only*</span>
1000    *
1001    *   The data exchange structure for the @glyph-to-script-map property.
1002    *
1003    * @since:
1004    *   2.4.11
1005    *
1006    */
1007   typedef struct  FT_Prop_GlyphToScriptMap_
1008   {
1009     FT_Face     face;
1010     FT_UShort*  map;
1011 
1012   } FT_Prop_GlyphToScriptMap;
1013 
1014 
1015   /**************************************************************************
1016    *
1017    * @property:
1018    *   fallback-script
1019    *
1020    * @description:
<span class="line-modified">1021    *   *Experimental* *only*</span>
<span class="line-removed">1022    *</span>
<span class="line-removed">1023    *   If no auto-hinter script module can be assigned to a glyph, a</span>
<span class="line-removed">1024    *   fallback script gets assigned to it (see also the</span>
<span class="line-removed">1025    *   @glyph-to-script-map property).  By default, this is</span>
<span class="line-removed">1026    *   @FT_AUTOHINTER_SCRIPT_CJK.  Using the `fallback-script&#39; property,</span>
<span class="line-removed">1027    *   this fallback value can be changed.</span>
<span class="line-removed">1028    *</span>
<span class="line-removed">1029    *   {</span>
<span class="line-removed">1030    *     FT_Library  library;</span>
<span class="line-removed">1031    *     FT_UInt     fallback_script = FT_AUTOHINTER_SCRIPT_NONE;</span>
<span class="line-removed">1032    *</span>
<span class="line-removed">1033    *</span>
<span class="line-removed">1034    *     FT_Init_FreeType( &amp;library );</span>
1035    *
<span class="line-modified">1036    *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<span class="line-modified">1037    *                               &quot;fallback-script&quot;, &amp;fallback_script );</span>
<span class="line-modified">1038    *   }</span>

1039    *
1040    * @note:
1041    *   This property can be used with @FT_Property_Get also.
1042    *
1043    *   It&#39;s important to use the right timing for changing this value: The
<span class="line-modified">1044    *   creation of the glyph-to-script map that eventually uses the</span>
<span class="line-modified">1045    *   fallback script value gets triggered either by setting or reading a</span>
1046    *   face-specific property like @glyph-to-script-map, or by auto-hinting
1047    *   any glyph from that face.  In particular, if you have already created
1048    *   an @FT_Face structure but not loaded any glyph (using the
1049    *   auto-hinter), a change of the fallback script will affect this face.
1050    *












1051    * @since:
1052    *   2.4.11
1053    *
1054    */
1055 
1056 
1057   /**************************************************************************
1058    *
1059    * @property:
1060    *   default-script
1061    *
1062    * @description:
<span class="line-modified">1063    *   *Experimental* *only*</span>
1064    *
<span class="line-modified">1065    *   If FreeType gets compiled with FT_CONFIG_OPTION_USE_HARFBUZZ to make</span>
<span class="line-modified">1066    *   the HarfBuzz library access OpenType features for getting better</span>
<span class="line-modified">1067    *   glyph coverages, this property sets the (auto-fitter) script to be</span>
<span class="line-modified">1068    *   used for the default (OpenType) script data of a font&#39;s GSUB table.</span>
<span class="line-modified">1069    *   Features for the default script are intended for all scripts not</span>
<span class="line-modified">1070    *   explicitly handled in GSUB; an example is a `dlig&#39; feature,</span>
<span class="line-modified">1071    *   containing the combination of the characters `T&#39;, `E&#39;, and `L&#39; to</span>
<span class="line-modified">1072    *   form a `TEL&#39; ligature.</span>
1073    *
1074    *   By default, this is @FT_AUTOHINTER_SCRIPT_LATIN.  Using the
<span class="line-modified">1075    *   `default-script&#39; property, this default value can be changed.</span>
<span class="line-removed">1076    *</span>
<span class="line-removed">1077    *   {</span>
<span class="line-removed">1078    *     FT_Library  library;</span>
<span class="line-removed">1079    *     FT_UInt     default_script = FT_AUTOHINTER_SCRIPT_NONE;</span>
<span class="line-removed">1080    *</span>
<span class="line-removed">1081    *</span>
<span class="line-removed">1082    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-removed">1083    *</span>
<span class="line-removed">1084    *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<span class="line-removed">1085    *                               &quot;default-script&quot;, &amp;default_script );</span>
<span class="line-removed">1086    *   }</span>
1087    *
1088    * @note:
1089    *   This property can be used with @FT_Property_Get also.
1090    *
1091    *   It&#39;s important to use the right timing for changing this value: The
<span class="line-modified">1092    *   creation of the glyph-to-script map that eventually uses the</span>
<span class="line-modified">1093    *   default script value gets triggered either by setting or reading a</span>
1094    *   face-specific property like @glyph-to-script-map, or by auto-hinting
1095    *   any glyph from that face.  In particular, if you have already created
1096    *   an @FT_Face structure but not loaded any glyph (using the
1097    *   auto-hinter), a change of the default script will affect this face.
1098    *












1099    * @since:
1100    *   2.5.3
1101    *
1102    */
1103 
1104 
1105   /**************************************************************************
1106    *
1107    * @property:
1108    *   increase-x-height
1109    *
1110    * @description:
<span class="line-modified">1111    *   For ppem values in the range 6~&lt;= ppem &lt;= `increase-x-height&#39;, round</span>
<span class="line-modified">1112    *   up the font&#39;s x~height much more often than normally.  If the value</span>
<span class="line-modified">1113    *   is set to~0, which is the default, this feature is switched off.  Use</span>
1114    *   this property to improve the legibility of small font sizes if
1115    *   necessary.
1116    *
<span class="line-modified">1117    *   {</span>







1118    *     FT_Library               library;
1119    *     FT_Face                  face;
1120    *     FT_Prop_IncreaseXHeight  prop;
1121    *
1122    *
1123    *     FT_Init_FreeType( &amp;library );
1124    *     FT_New_Face( library, &quot;foo.ttf&quot;, 0, &amp;face );
1125    *     FT_Set_Char_Size( face, 10 * 64, 0, 72, 0 );
1126    *
1127    *     prop.face  = face;
1128    *     prop.limit = 14;
1129    *
1130    *     FT_Property_Set( library, &quot;autofitter&quot;,
1131    *                               &quot;increase-x-height&quot;, &amp;prop );
<span class="line-modified">1132    *   }</span>
<span class="line-removed">1133    *</span>
<span class="line-removed">1134    * @note:</span>
<span class="line-removed">1135    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-removed">1136    *</span>
<span class="line-removed">1137    *   Set this value right after calling @FT_Set_Char_Size, but before</span>
<span class="line-removed">1138    *   loading any glyph (using the auto-hinter).</span>
1139    *
1140    * @since:
1141    *   2.4.11
1142    *
1143    */
1144 
1145 
1146   /**************************************************************************
1147    *
1148    * @struct:
1149    *   FT_Prop_IncreaseXHeight
1150    *
1151    * @description:
1152    *   The data exchange structure for the @increase-x-height property.
1153    *
1154    */
1155   typedef struct  FT_Prop_IncreaseXHeight_
1156   {
1157     FT_Face  face;
1158     FT_UInt  limit;
1159 
1160   } FT_Prop_IncreaseXHeight;
1161 
1162 
1163   /**************************************************************************
1164    *
1165    * @property:
1166    *   warping
1167    *
1168    * @description:
<span class="line-modified">1169    *   *Experimental* *only*</span>
1170    *
<span class="line-modified">1171    *   If FreeType gets compiled with option AF_CONFIG_OPTION_USE_WARPER to</span>
1172    *   activate the warp hinting code in the auto-hinter, this property
1173    *   switches warping on and off.
1174    *
<span class="line-modified">1175    *   Warping only works in `normal&#39; auto-hinting mode replacing it.</span>
<span class="line-modified">1176    *   The idea of the code is to slightly scale and shift a glyph along</span>
<span class="line-modified">1177    *   the non-hinted dimension (which is usually the horizontal axis) so</span>
<span class="line-modified">1178    *   that as much of its segments are aligned (more or less) to the grid.</span>
<span class="line-modified">1179    *   To find out a glyph&#39;s optimal scaling and shifting value, various</span>
<span class="line-modified">1180    *   parameter combinations are tried and scored.</span>
1181    *
<span class="line-modified">1182    *   By default, warping is off.  The example below shows how to switch on</span>
<span class="line-removed">1183    *   warping (omitting the error handling).</span>
<span class="line-removed">1184    *</span>
<span class="line-removed">1185    *   {</span>
<span class="line-removed">1186    *     FT_Library  library;</span>
<span class="line-removed">1187    *     FT_Bool     warping = 1;</span>
<span class="line-removed">1188    *</span>
<span class="line-removed">1189    *</span>
<span class="line-removed">1190    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-removed">1191    *</span>
<span class="line-removed">1192    *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<span class="line-removed">1193    *                               &quot;warping&quot;, &amp;warping );</span>
<span class="line-removed">1194    *   }</span>
1195    *
1196    * @note:
1197    *   This property can be used with @FT_Property_Get also.
1198    *
<span class="line-modified">1199    *   This property can be set via the `FREETYPE_PROPERTIES&#39; environment</span>
<span class="line-modified">1200    *   variable (using values 1 and 0 for `on&#39; and `off&#39;, respectively).</span>
1201    *
1202    *   The warping code can also change advance widths.  Have a look at the
<span class="line-modified">1203    *   `lsb_delta&#39; and `rsb_delta&#39; fields in the @FT_GlyphSlotRec structure</span>
1204    *   for details on improving inter-glyph distances while rendering.
1205    *
1206    *   Since warping is a global property of the auto-hinter it is best to
1207    *   change its value before rendering any face.  Otherwise, you should
<span class="line-modified">1208    *   reload all faces that get auto-hinted in `normal&#39; hinting mode.</span>














1209    *
1210    * @since:
1211    *   2.6
1212    *
1213    */
1214 
1215 
1216  /* */
1217 
1218 
1219 FT_END_HEADER
1220 
1221 
1222 #endif /* FTDRIVER_H_ */
1223 
1224 
1225 /* END */
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">   1 /****************************************************************************</span>
<span class="line-modified">   2  *</span>
<span class="line-modified">   3  * ftdriver.h</span>
<span class="line-modified">   4  *</span>
<span class="line-modified">   5  *   FreeType API for controlling driver modules (specification only).</span>
<span class="line-modified">   6  *</span>
<span class="line-modified">   7  * Copyright (C) 2017-2019 by</span>
<span class="line-modified">   8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">   9  *</span>
<span class="line-modified">  10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">  11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">  12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">  13  * this file you indicate that you have read the license and</span>
<span class="line-modified">  14  * understand and accept it fully.</span>
<span class="line-modified">  15  *</span>
<span class="line-modified">  16  */</span>
  17 
  18 
  19 #ifndef FTDRIVER_H_
  20 #define FTDRIVER_H_
  21 
  22 #include &lt;ft2build.h&gt;
  23 #include FT_FREETYPE_H
  24 #include FT_PARAMETER_TAGS_H
  25 
  26 #ifdef FREETYPE_H
  27 #error &quot;freetype.h of FreeType 1 has been loaded!&quot;
  28 #error &quot;Please fix the directory search order for header files&quot;
  29 #error &quot;so that freetype.h of FreeType 2 is found first.&quot;
  30 #endif
  31 
  32 
  33 FT_BEGIN_HEADER
  34 
  35 
  36   /**************************************************************************
  37    *
  38    * @section:
  39    *   auto_hinter
  40    *
  41    * @title:
  42    *   The auto-hinter
  43    *
  44    * @abstract:
  45    *   Controlling the auto-hinting module.
  46    *
  47    * @description:
  48    *   While FreeType&#39;s auto-hinter doesn&#39;t expose API functions by itself,
  49    *   it is possible to control its behaviour with @FT_Property_Set and
  50    *   @FT_Property_Get.  The following lists the available properties
  51    *   together with the necessary macros and structures.
  52    *
<span class="line-modified">  53    *   Note that the auto-hinter&#39;s module name is &#39;autofitter&#39; for historical</span>
<span class="line-modified">  54    *   reasons.</span>
  55    *
  56    *   Available properties are @increase-x-height, @no-stem-darkening
  57    *   (experimental), @darkening-parameters (experimental), @warping
  58    *   (experimental), @glyph-to-script-map (experimental), @fallback-script
  59    *   (experimental), and @default-script (experimental), as documented in
  60    *   the @properties section.
  61    *
  62    */
  63 
  64 
  65   /**************************************************************************
  66    *
  67    * @section:
  68    *   cff_driver
  69    *
  70    * @title:
  71    *   The CFF driver
  72    *
  73    * @abstract:
  74    *   Controlling the CFF driver module.
  75    *
  76    * @description:
<span class="line-modified">  77    *   While FreeType&#39;s CFF driver doesn&#39;t expose API functions by itself, it</span>
<span class="line-modified">  78    *   is possible to control its behaviour with @FT_Property_Set and</span>
  79    *   @FT_Property_Get.
  80    *
<span class="line-modified">  81    *   The CFF driver&#39;s module name is &#39;cff&#39;.</span>
  82    *
  83    *   Available properties are @hinting-engine, @no-stem-darkening,
  84    *   @darkening-parameters, and @random-seed, as documented in the
  85    *   @properties section.
  86    *
  87    *
<span class="line-modified">  88    *   **Hinting and antialiasing principles of the new engine**</span>
  89    *
  90    *   The rasterizer is positioning horizontal features (e.g., ascender
  91    *   height &amp; x-height, or crossbars) on the pixel grid and minimizing the
  92    *   amount of antialiasing applied to them, while placing vertical
  93    *   features (vertical stems) on the pixel grid without hinting, thus
  94    *   representing the stem position and weight accurately.  Sometimes the
  95    *   vertical stems may be only partially black.  In this context,
<span class="line-modified">  96    *   &#39;antialiasing&#39; means that stems are not positioned exactly on pixel</span>
  97    *   borders, causing a fuzzy appearance.
  98    *
  99    *   There are two principles behind this approach.
 100    *
<span class="line-modified"> 101    *   1) No hinting in the horizontal direction: Unlike &#39;superhinted&#39;</span>
 102    *   TrueType, which changes glyph widths to accommodate regular
<span class="line-modified"> 103    *   inter-glyph spacing, Adobe&#39;s approach is &#39;faithful to the design&#39; in</span>
<span class="line-modified"> 104    *   representing both the glyph width and the inter-glyph spacing designed</span>
<span class="line-modified"> 105    *   for the font.  This makes the screen display as close as it can be to</span>
<span class="line-modified"> 106    *   the result one would get with infinite resolution, while preserving</span>
<span class="line-modified"> 107    *   what is considered the key characteristics of each glyph.  Note that</span>
<span class="line-modified"> 108    *   the distances between unhinted and grid-fitted positions at small</span>
<span class="line-modified"> 109    *   sizes are comparable to kerning values and thus would be noticeable</span>
<span class="line-modified"> 110    *   (and distracting) while reading if hinting were applied.</span>
 111    *
 112    *   One of the reasons to not hint horizontally is antialiasing for LCD
<span class="line-modified"> 113    *   screens: The pixel geometry of modern displays supplies three vertical</span>
<span class="line-modified"> 114    *   subpixels as the eye moves horizontally across each visible pixel.  On</span>
<span class="line-modified"> 115    *   devices where we can be certain this characteristic is present a</span>
<span class="line-modified"> 116    *   rasterizer can take advantage of the subpixels to add increments of</span>
<span class="line-modified"> 117    *   weight.  In Western writing systems this turns out to be the more</span>
<span class="line-modified"> 118    *   critical direction anyway; the weights and spacing of vertical stems</span>
<span class="line-modified"> 119    *   (see above) are central to Armenian, Cyrillic, Greek, and Latin type</span>
<span class="line-modified"> 120    *   designs.  Even when the rasterizer uses greyscale antialiasing instead</span>
<span class="line-modified"> 121    *   of color (a necessary compromise when one doesn&#39;t know the screen</span>
<span class="line-modified"> 122    *   characteristics), the unhinted vertical features preserve the design&#39;s</span>
<span class="line-modified"> 123    *   weight and spacing much better than aliased type would.</span>

 124    *
 125    *   2) Alignment in the vertical direction: Weights and spacing along the
 126    *   y~axis are less critical; what is much more important is the visual
 127    *   alignment of related features (like cap-height and x-height).  The
 128    *   sense of alignment for these is enhanced by the sharpness of grid-fit
 129    *   edges, while the cruder vertical resolution (full pixels instead of
 130    *   1/3 pixels) is less of a problem.
 131    *
 132    *   On the technical side, horizontal alignment zones for ascender,
 133    *   x-height, and other important height values (traditionally called
<span class="line-modified"> 134    *   &#39;blue zones&#39;) as defined in the font are positioned independently,</span>
<span class="line-modified"> 135    *   each being rounded to the nearest pixel edge, taking care of overshoot</span>
<span class="line-modified"> 136    *   suppression at small sizes, stem darkening, and scaling.</span>
 137    *
 138    *   Hstems (this is, hint values defined in the font to help align
 139    *   horizontal features) that fall within a blue zone are said to be
<span class="line-modified"> 140    *   &#39;captured&#39; and are aligned to that zone.  Uncaptured stems are moved</span>
 141    *   in one of four ways, top edge up or down, bottom edge up or down.
<span class="line-modified"> 142    *   Unless there are conflicting hstems, the smallest movement is taken to</span>
<span class="line-modified"> 143    *   minimize distortion.</span>
 144    *
 145    */
 146 
 147 
 148   /**************************************************************************
 149    *
 150    * @section:
 151    *   pcf_driver
 152    *
 153    * @title:
 154    *   The PCF driver
 155    *
 156    * @abstract:
 157    *   Controlling the PCF driver module.
 158    *
 159    * @description:
<span class="line-modified"> 160    *   While FreeType&#39;s PCF driver doesn&#39;t expose API functions by itself, it</span>
<span class="line-modified"> 161    *   is possible to control its behaviour with @FT_Property_Set and</span>
 162    *   @FT_Property_Get.  Right now, there is a single property
 163    *   @no-long-family-names available if FreeType is compiled with
 164    *   PCF_CONFIG_OPTION_LONG_FAMILY_NAMES.
 165    *
<span class="line-modified"> 166    *   The PCF driver&#39;s module name is &#39;pcf&#39;.</span>
 167    *
 168    */
 169 
 170 
 171   /**************************************************************************
 172    *
 173    * @section:
 174    *   t1_cid_driver
 175    *
 176    * @title:
 177    *   The Type 1 and CID drivers
 178    *
 179    * @abstract:
 180    *   Controlling the Type~1 and CID driver modules.
 181    *
 182    * @description:
 183    *   It is possible to control the behaviour of FreeType&#39;s Type~1 and
 184    *   Type~1 CID drivers with @FT_Property_Set and @FT_Property_Get.
 185    *
 186    *   Behind the scenes, both drivers use the Adobe CFF engine for hinting;
 187    *   however, the used properties must be specified separately.
 188    *
<span class="line-modified"> 189    *   The Type~1 driver&#39;s module name is &#39;type1&#39;; the CID driver&#39;s module</span>
<span class="line-modified"> 190    *   name is &#39;t1cid&#39;.</span>
 191    *
 192    *   Available properties are @hinting-engine, @no-stem-darkening,
 193    *   @darkening-parameters, and @random-seed, as documented in the
 194    *   @properties section.
 195    *
<span class="line-modified"> 196    *   Please see the @cff_driver section for more details on the new hinting</span>
<span class="line-modified"> 197    *   engine.</span>
 198    *
 199    */
 200 
 201 
 202   /**************************************************************************
 203    *
 204    * @section:
 205    *   tt_driver
 206    *
 207    * @title:
 208    *   The TrueType driver
 209    *
 210    * @abstract:
 211    *   Controlling the TrueType driver module.
 212    *
 213    * @description:
 214    *   While FreeType&#39;s TrueType driver doesn&#39;t expose API functions by
 215    *   itself, it is possible to control its behaviour with @FT_Property_Set
 216    *   and @FT_Property_Get.  The following lists the available properties
 217    *   together with the necessary macros and structures.
 218    *
<span class="line-modified"> 219    *   The TrueType driver&#39;s module name is &#39;truetype&#39;.</span>
 220    *
 221    *   A single property @interpreter-version is available, as documented in
 222    *   the @properties section.
 223    *
 224    *   We start with a list of definitions, kindly provided by Greg
 225    *   Hitchcock.
 226    *
<span class="line-modified"> 227    *   _Bi-Level Rendering_</span>
 228    *
 229    *   Monochromatic rendering, exclusively used in the early days of
 230    *   TrueType by both Apple and Microsoft.  Microsoft&#39;s GDI interface
 231    *   supported hinting of the right-side bearing point, such that the
 232    *   advance width could be non-linear.  Most often this was done to
 233    *   achieve some level of glyph symmetry.  To enable reasonable
<span class="line-modified"> 234    *   performance (e.g., not having to run hinting on all glyphs just to get</span>
<span class="line-modified"> 235    *   the widths) there was a bit in the head table indicating if the side</span>
<span class="line-modified"> 236    *   bearing was hinted, and additional tables, &#39;hdmx&#39; and &#39;LTSH&#39;, to cache</span>
<span class="line-modified"> 237    *   hinting widths across multiple sizes and device aspect ratios.</span>
 238    *
<span class="line-modified"> 239    *   _Font Smoothing_</span>
 240    *
 241    *   Microsoft&#39;s GDI implementation of anti-aliasing.  Not traditional
 242    *   anti-aliasing as the outlines were hinted before the sampling.  The
 243    *   widths matched the bi-level rendering.
 244    *
<span class="line-modified"> 245    *   _ClearType Rendering_</span>
 246    *
 247    *   Technique that uses physical subpixels to improve rendering on LCD
 248    *   (and other) displays.  Because of the higher resolution, many methods
<span class="line-modified"> 249    *   of improving symmetry in glyphs through hinting the right-side bearing</span>
<span class="line-modified"> 250    *   were no longer necessary.  This lead to what GDI calls &#39;natural</span>
<span class="line-modified"> 251    *   widths&#39; ClearType, see</span>
<span class="line-modified"> 252    *   http://rastertragedy.com/RTRCh4.htm#Sec21.  Since hinting</span>
 253    *   has extra resolution, most non-linearity went away, but it is still
 254    *   possible for hints to change the advance widths in this mode.
 255    *
<span class="line-modified"> 256    *   _ClearType Compatible Widths_</span>
 257    *
 258    *   One of the earliest challenges with ClearType was allowing the
 259    *   implementation in GDI to be selected without requiring all UI and
 260    *   documents to reflow.  To address this, a compatible method of
 261    *   rendering ClearType was added where the font hints are executed once
 262    *   to determine the width in bi-level rendering, and then re-run in
 263    *   ClearType, with the difference in widths being absorbed in the font
 264    *   hints for ClearType (mostly in the white space of hints); see
<span class="line-modified"> 265    *   http://rastertragedy.com/RTRCh4.htm#Sec20.  Somewhat by</span>
 266    *   definition, compatible width ClearType allows for non-linear widths,
 267    *   but only when the bi-level version has non-linear widths.
 268    *
<span class="line-modified"> 269    *   _ClearType Subpixel Positioning_</span>
 270    *
 271    *   One of the nice benefits of ClearType is the ability to more crisply
 272    *   display fractional widths; unfortunately, the GDI model of integer
 273    *   bitmaps did not support this.  However, the WPF and Direct Write
<span class="line-modified"> 274    *   frameworks do support fractional widths.  DWrite calls this &#39;natural</span>
<span class="line-modified"> 275    *   mode&#39;, not to be confused with GDI&#39;s &#39;natural widths&#39;.  Subpixel</span>
 276    *   positioning, in the current implementation of Direct Write,
 277    *   unfortunately does not support hinted advance widths, see
<span class="line-modified"> 278    *   http://rastertragedy.com/RTRCh4.htm#Sec22.  Note that the</span>
 279    *   TrueType interpreter fully allows the advance width to be adjusted in
 280    *   this mode, just the DWrite client will ignore those changes.
 281    *
<span class="line-modified"> 282    *   _ClearType Backward Compatibility_</span>
 283    *
 284    *   This is a set of exceptions made in the TrueType interpreter to
 285    *   minimize hinting techniques that were problematic with the extra
 286    *   resolution of ClearType; see
<span class="line-modified"> 287    *   http://rastertragedy.com/RTRCh4.htm#Sec1 and</span>
 288    *   https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx.
<span class="line-modified"> 289    *   This technique is not to be confused with ClearType compatible widths.</span>
<span class="line-modified"> 290    *   ClearType backward compatibility has no direct impact on changing</span>
<span class="line-modified"> 291    *   advance widths, but there might be an indirect impact on disabling</span>
<span class="line-modified"> 292    *   some deltas.  This could be worked around in backward compatibility</span>
<span class="line-modified"> 293    *   mode.</span>
 294    *
<span class="line-modified"> 295    *   _Native ClearType Mode_</span>
 296    *
<span class="line-modified"> 297    *   (Not to be confused with &#39;natural widths&#39;.)  This mode removes all the</span>
<span class="line-modified"> 298    *   exceptions in the TrueType interpreter when running with ClearType.</span>
<span class="line-modified"> 299    *   Any issues on widths would still apply, though.</span>
 300    *
 301    */
 302 
 303 
 304   /**************************************************************************
 305    *
 306    * @section:
 307    *   properties
 308    *
 309    * @title:
 310    *   Driver properties
 311    *
 312    * @abstract:
 313    *   Controlling driver modules.
 314    *
 315    * @description:
 316    *   Driver modules can be controlled by setting and unsetting properties,
 317    *   using the functions @FT_Property_Set and @FT_Property_Get.  This
 318    *   section documents the available properties, together with auxiliary
 319    *   macros and structures.
 320    *
 321    */
 322 
 323 
 324   /**************************************************************************
 325    *
 326    * @enum:
 327    *   FT_HINTING_XXX
 328    *
 329    * @description:
<span class="line-modified"> 330    *   A list of constants used for the @hinting-engine property to select</span>
<span class="line-modified"> 331    *   the hinting engine for CFF, Type~1, and CID fonts.</span>
 332    *
 333    * @values:
 334    *   FT_HINTING_FREETYPE ::
 335    *     Use the old FreeType hinting engine.
 336    *
 337    *   FT_HINTING_ADOBE ::
 338    *     Use the hinting engine contributed by Adobe.
 339    *
 340    * @since:
 341    *   2.9
 342    *
 343    */
 344 #define FT_HINTING_FREETYPE  0
 345 #define FT_HINTING_ADOBE     1
 346 
 347   /* these constants (introduced in 2.4.12) are deprecated */
 348 #define FT_CFF_HINTING_FREETYPE  FT_HINTING_FREETYPE
 349 #define FT_CFF_HINTING_ADOBE     FT_HINTING_ADOBE
 350 
 351 
 352   /**************************************************************************
 353    *
 354    * @property:
 355    *   hinting-engine
 356    *
 357    * @description:
<span class="line-modified"> 358    *   Thanks to Adobe, which contributed a new hinting (and parsing) engine,</span>
<span class="line-modified"> 359    *   an application can select between &#39;freetype&#39; and &#39;adobe&#39; if compiled</span>
<span class="line-modified"> 360    *   with `CFF_CONFIG_OPTION_OLD_ENGINE`.  If this configuration macro</span>
<span class="line-modified"> 361    *   isn&#39;t defined, &#39;hinting-engine&#39; does nothing.</span>
 362    *
 363    *   The same holds for the Type~1 and CID modules if compiled with
<span class="line-modified"> 364    *   `T1_CONFIG_OPTION_OLD_ENGINE`.</span>
 365    *
<span class="line-modified"> 366    *   For the &#39;cff&#39; module, the default engine is &#39;freetype&#39; if</span>
<span class="line-modified"> 367    *   `CFF_CONFIG_OPTION_OLD_ENGINE` is defined, and &#39;adobe&#39; otherwise.</span>
 368    *
<span class="line-modified"> 369    *   For both the &#39;type1&#39; and &#39;t1cid&#39; modules, the default engine is</span>
<span class="line-modified"> 370    *   &#39;freetype&#39; if `T1_CONFIG_OPTION_OLD_ENGINE` is defined, and &#39;adobe&#39;</span>
 371    *   otherwise.
 372    *
<span class="line-added"> 373    * @note:</span>
<span class="line-added"> 374    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-added"> 375    *</span>
<span class="line-added"> 376    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
<span class="line-added"> 377    *   variable (using values &#39;adobe&#39; or &#39;freetype&#39;).</span>
<span class="line-added"> 378    *</span>
<span class="line-added"> 379    * @example:</span>
 380    *   The following example code demonstrates how to select Adobe&#39;s hinting
<span class="line-modified"> 381    *   engine for the &#39;cff&#39; module (omitting the error handling).</span>
 382    *
<span class="line-modified"> 383    *   ```</span>
 384    *     FT_Library  library;
<span class="line-modified"> 385    *     FT_UInt     hinting_engine = FT_HINTING_ADOBE;</span>
 386    *
 387    *
 388    *     FT_Init_FreeType( &amp;library );
 389    *
 390    *     FT_Property_Set( library, &quot;cff&quot;,
 391    *                               &quot;hinting-engine&quot;, &amp;hinting_engine );
<span class="line-modified"> 392    *   ```</span>






 393    *
 394    * @since:
<span class="line-modified"> 395    *   2.4.12 (for &#39;cff&#39; module)</span>
 396    *
<span class="line-modified"> 397    *   2.9 (for &#39;type1&#39; and &#39;t1cid&#39; modules)</span>
 398    *
 399    */
 400 
 401 
 402   /**************************************************************************
 403    *
 404    * @property:
 405    *   no-stem-darkening
 406    *
 407    * @description:
<span class="line-modified"> 408    *   All glyphs that pass through the auto-hinter will be emboldened unless</span>
<span class="line-modified"> 409    *   this property is set to TRUE.  The same is true for the CFF, Type~1,</span>
<span class="line-modified"> 410    *   and CID font modules if the &#39;Adobe&#39; engine is selected (which is the</span>
<span class="line-modified"> 411    *   default).</span>
 412    *
 413    *   Stem darkening emboldens glyphs at smaller sizes to make them more
 414    *   readable on common low-DPI screens when using linear alpha blending
 415    *   and gamma correction, see @FT_Render_Glyph.  When not using linear
 416    *   alpha blending and gamma correction, glyphs will appear heavy and
 417    *   fuzzy!
 418    *
 419    *   Gamma correction essentially lightens fonts since shades of grey are
 420    *   shifted to higher pixel values (=~higher brightness) to match the
 421    *   original intention to the reality of our screens.  The side-effect is
<span class="line-modified"> 422    *   that glyphs &#39;thin out&#39;.  Mac OS~X and Adobe&#39;s proprietary font</span>
 423    *   rendering library implement a counter-measure: stem darkening at
 424    *   smaller sizes where shades of gray dominate.  By emboldening a glyph
 425    *   slightly in relation to its pixel size, individual pixels get higher
<span class="line-modified"> 426    *   coverage of filled-in outlines and are therefore &#39;blacker&#39;.  This</span>
<span class="line-modified"> 427    *   counteracts the &#39;thinning out&#39; of glyphs, making text remain readable</span>
 428    *   at smaller sizes.
 429    *
 430    *   By default, the Adobe engines for CFF, Type~1, and CID fonts darken
 431    *   stems at smaller sizes, regardless of hinting, to enhance contrast.
 432    *   Setting this property, stem darkening gets switched off.
 433    *
<span class="line-modified"> 434    *   For the auto-hinter, stem-darkening is experimental currently and thus</span>
<span class="line-modified"> 435    *   switched off by default (this is, `no-stem-darkening` is set to TRUE</span>
<span class="line-modified"> 436    *   by default).  Total consistency with the CFF driver is not achieved</span>
<span class="line-modified"> 437    *   right now because the emboldening method differs and glyphs must be</span>
<span class="line-modified"> 438    *   scaled down on the Y-axis to keep outline points inside their</span>
 439    *   precomputed blue zones.  The smaller the size (especially 9ppem and
 440    *   down), the higher the loss of emboldening versus the CFF driver.
 441    *
<span class="line-modified"> 442    *   Note that stem darkening is never applied if @FT_LOAD_NO_SCALE is set.</span>
<span class="line-modified"> 443    *</span>
<span class="line-added"> 444    * @note:</span>
<span class="line-added"> 445    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-added"> 446    *</span>
<span class="line-added"> 447    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
<span class="line-added"> 448    *   variable (using values 1 and 0 for &#39;on&#39; and &#39;off&#39;, respectively).  It</span>
<span class="line-added"> 449    *   can also be set per face using @FT_Face_Properties with</span>
<span class="line-added"> 450    *   @FT_PARAM_TAG_STEM_DARKENING.</span>
 451    *
<span class="line-modified"> 452    * @example:</span>
<span class="line-added"> 453    *   ```</span>
 454    *     FT_Library  library;
 455    *     FT_Bool     no_stem_darkening = TRUE;
 456    *
 457    *
 458    *     FT_Init_FreeType( &amp;library );
 459    *
 460    *     FT_Property_Set( library, &quot;cff&quot;,
 461    *                               &quot;no-stem-darkening&quot;, &amp;no_stem_darkening );
<span class="line-modified"> 462    *   ```</span>








 463    *
 464    * @since:
<span class="line-modified"> 465    *   2.4.12 (for &#39;cff&#39; module)</span>
 466    *
<span class="line-modified"> 467    *   2.6.2 (for &#39;autofitter&#39; module)</span>
 468    *
<span class="line-modified"> 469    *   2.9 (for &#39;type1&#39; and &#39;t1cid&#39; modules)</span>
 470    *
 471    */
 472 
 473 
 474   /**************************************************************************
 475    *
 476    * @property:
 477    *   darkening-parameters
 478    *
 479    * @description:
 480    *   By default, the Adobe hinting engine, as used by the CFF, Type~1, and
<span class="line-modified"> 481    *   CID font drivers, darkens stems as follows (if the `no-stem-darkening`</span>
<span class="line-modified"> 482    *   property isn&#39;t set):</span>
 483    *
<span class="line-modified"> 484    *   ```</span>
 485    *     stem width &lt;= 0.5px:   darkening amount = 0.4px
 486    *     stem width  = 1px:     darkening amount = 0.275px
 487    *     stem width  = 1.667px: darkening amount = 0.275px
 488    *     stem width &gt;= 2.333px: darkening amount = 0px
<span class="line-modified"> 489    *   ```</span>
 490    *
 491    *   and piecewise linear in-between.  At configuration time, these four
 492    *   control points can be set with the macro
<span class="line-modified"> 493    *   `CFF_CONFIG_OPTION_DARKENING_PARAMETERS`; the CFF, Type~1, and CID</span>
 494    *   drivers share these values.  At runtime, the control points can be
<span class="line-modified"> 495    *   changed using the `darkening-parameters` property (see the example</span>
<span class="line-modified"> 496    *   below that demonstrates this for the Type~1 driver).</span>














 497    *
 498    *   The x~values give the stem width, and the y~values the darkening
 499    *   amount.  The unit is 1000th of pixels.  All coordinate values must be
<span class="line-modified"> 500    *   positive; the x~values must be monotonically increasing; the y~values</span>
<span class="line-modified"> 501    *   must be monotonically decreasing and smaller than or equal to 500</span>
<span class="line-modified"> 502    *   (corresponding to half a pixel); the slope of each linear piece must</span>
<span class="line-modified"> 503    *   be shallower than -1 (e.g., -.4).</span>
 504    *
 505    *   The auto-hinter provides this property, too, as an experimental
 506    *   feature.  See @no-stem-darkening for more.
 507    *
 508    * @note:
 509    *   This property can be used with @FT_Property_Get also.
 510    *
<span class="line-modified"> 511    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
 512    *   variable, using eight comma-separated integers without spaces.  Here
<span class="line-modified"> 513    *   the above example, using `\` to break the line for readability.</span>
 514    *
<span class="line-modified"> 515    *   ```</span>
 516    *     FREETYPE_PROPERTIES=\
 517    *     type1:darkening-parameters=500,300,1000,200,1500,100,2000,0
<span class="line-modified"> 518    *   ```</span>
<span class="line-added"> 519    *</span>
<span class="line-added"> 520    * @example:</span>
<span class="line-added"> 521    *   ```</span>
<span class="line-added"> 522    *     FT_Library  library;</span>
<span class="line-added"> 523    *     FT_Int      darken_params[8] = {  500, 300,   // x1, y1</span>
<span class="line-added"> 524    *                                      1000, 200,   // x2, y2</span>
<span class="line-added"> 525    *                                      1500, 100,   // x3, y3</span>
<span class="line-added"> 526    *                                      2000,   0 }; // x4, y4</span>
<span class="line-added"> 527    *</span>
<span class="line-added"> 528    *</span>
<span class="line-added"> 529    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-added"> 530    *</span>
<span class="line-added"> 531    *     FT_Property_Set( library, &quot;type1&quot;,</span>
<span class="line-added"> 532    *                               &quot;darkening-parameters&quot;, darken_params );</span>
<span class="line-added"> 533    *   ```</span>
 534    *
 535    * @since:
<span class="line-modified"> 536    *   2.5.1 (for &#39;cff&#39; module)</span>
 537    *
<span class="line-modified"> 538    *   2.6.2 (for &#39;autofitter&#39; module)</span>
 539    *
<span class="line-modified"> 540    *   2.9 (for &#39;type1&#39; and &#39;t1cid&#39; modules)</span>
 541    *
 542    */
 543 
 544 
 545   /**************************************************************************
 546    *
 547    * @property:
 548    *   random-seed
 549    *
 550    * @description:
<span class="line-modified"> 551    *   By default, the seed value for the CFF &#39;random&#39; operator and the</span>
<span class="line-modified"> 552    *   similar &#39;0 28 callothersubr pop&#39; command for the Type~1 and CID</span>
 553    *   drivers is set to a random value.  However, mainly for debugging
<span class="line-modified"> 554    *   purposes, it is often necessary to use a known value as a seed so that</span>
<span class="line-modified"> 555    *   the pseudo-random number sequences generated by &#39;random&#39; are</span>
 556    *   repeatable.
 557    *
<span class="line-modified"> 558    *   The `random-seed` property does that.  Its argument is a signed 32bit</span>
 559    *   integer; if the value is zero or negative, the seed given by the
<span class="line-modified"> 560    *   `intitialRandomSeed` private DICT operator in a CFF file gets used (or</span>
<span class="line-modified"> 561    *   a default value if there is no such operator).  If the value is</span>
<span class="line-modified"> 562    *   positive, use it instead of `initialRandomSeed`, which is consequently</span>
<span class="line-modified"> 563    *   ignored.</span>
 564    *
 565    * @note:
<span class="line-modified"> 566    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
 567    *   variable.  It can also be set per face using @FT_Face_Properties with
 568    *   @FT_PARAM_TAG_RANDOM_SEED.
 569    *
 570    * @since:
<span class="line-modified"> 571    *   2.8 (for &#39;cff&#39; module)</span>
 572    *
<span class="line-modified"> 573    *   2.9 (for &#39;type1&#39; and &#39;t1cid&#39; modules)</span>
 574    *
 575    */
 576 
 577 
 578   /**************************************************************************
 579    *
 580    * @property:
 581    *   no-long-family-names
 582    *
 583    * @description:
<span class="line-modified"> 584    *   If `PCF_CONFIG_OPTION_LONG_FAMILY_NAMES` is active while compiling</span>
 585    *   FreeType, the PCF driver constructs long family names.
 586    *
<span class="line-modified"> 587    *   There are many PCF fonts just called &#39;Fixed&#39; which look completely</span>
 588    *   different, and which have nothing to do with each other.  When
<span class="line-modified"> 589    *   selecting &#39;Fixed&#39; in KDE or Gnome one gets results that appear rather</span>
<span class="line-modified"> 590    *   random, the style changes often if one changes the size and one cannot</span>
<span class="line-modified"> 591    *   select some fonts at all.  The improve this situation, the PCF module</span>
<span class="line-modified"> 592    *   prepends the foundry name (plus a space) to the family name.  It also</span>
<span class="line-modified"> 593    *   checks whether there are &#39;wide&#39; characters; all put together, family</span>
<span class="line-modified"> 594    *   names like &#39;Sony Fixed&#39; or &#39;Misc Fixed Wide&#39; are constructed.</span>
<span class="line-added"> 595    *</span>
<span class="line-added"> 596    *   If `no-long-family-names` is set, this feature gets switched off.</span>
 597    *
<span class="line-modified"> 598    * @note:</span>
<span class="line-added"> 599    *   This property can be used with @FT_Property_Get also.</span>
 600    *
<span class="line-modified"> 601    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
<span class="line-added"> 602    *   variable (using values 1 and 0 for &#39;on&#39; and &#39;off&#39;, respectively).</span>
<span class="line-added"> 603    *</span>
<span class="line-added"> 604    * @example:</span>
<span class="line-added"> 605    *   ```</span>
 606    *     FT_Library  library;
 607    *     FT_Bool     no_long_family_names = TRUE;
 608    *
 609    *
 610    *     FT_Init_FreeType( &amp;library );
 611    *
 612    *     FT_Property_Set( library, &quot;pcf&quot;,
 613    *                               &quot;no-long-family-names&quot;,
 614    *                               &amp;no_long_family_names );
<span class="line-modified"> 615    *   ```</span>






 616    *
 617    * @since:
 618    *   2.8
 619    */
 620 
 621 
 622   /**************************************************************************
 623    *
 624    * @enum:
 625    *   TT_INTERPRETER_VERSION_XXX
 626    *
 627    * @description:
 628    *   A list of constants used for the @interpreter-version property to
 629    *   select the hinting engine for Truetype fonts.
 630    *
<span class="line-modified"> 631    *   The numeric value in the constant names represents the version number</span>
<span class="line-modified"> 632    *   as returned by the &#39;GETINFO&#39; bytecode instruction.</span>
 633    *
 634    * @values:
 635    *   TT_INTERPRETER_VERSION_35 ::
 636    *     Version~35 corresponds to MS rasterizer v.1.7 as used e.g. in
 637    *     Windows~98; only grayscale and B/W rasterizing is supported.
 638    *
 639    *   TT_INTERPRETER_VERSION_38 ::
 640    *     Version~38 corresponds to MS rasterizer v.1.9; it is roughly
 641    *     equivalent to the hinting provided by DirectWrite ClearType (as can
 642    *     be found, for example, in the Internet Explorer~9 running on
<span class="line-modified"> 643    *     Windows~7).  It is used in FreeType to select the &#39;Infinality&#39;</span>
<span class="line-modified"> 644    *     subpixel hinting code.  The code may be removed in a future version.</span>

 645    *
 646    *   TT_INTERPRETER_VERSION_40 ::
 647    *     Version~40 corresponds to MS rasterizer v.2.1; it is roughly
 648    *     equivalent to the hinting provided by DirectWrite ClearType (as can
 649    *     be found, for example, in Microsoft&#39;s Edge Browser on Windows~10).
<span class="line-modified"> 650    *     It is used in FreeType to select the &#39;minimal&#39; subpixel hinting</span>
 651    *     code, a stripped-down and higher performance version of the
<span class="line-modified"> 652    *     &#39;Infinality&#39; code.</span>
 653    *
 654    * @note:
<span class="line-modified"> 655    *   This property controls the behaviour of the bytecode interpreter and</span>
<span class="line-modified"> 656    *   thus how outlines get hinted.  It does **not** control how glyph get</span>
<span class="line-modified"> 657    *   rasterized!  In particular, it does not control subpixel color</span>
 658    *   filtering.
 659    *
 660    *   If FreeType has not been compiled with the configuration option
<span class="line-modified"> 661    *   `TT_CONFIG_OPTION_SUBPIXEL_HINTING`, selecting version~38 or~40 causes</span>
<span class="line-modified"> 662    *   an `FT_Err_Unimplemented_Feature` error.</span>
 663    *
<span class="line-modified"> 664    *   Depending on the graphics framework, Microsoft uses different bytecode</span>
<span class="line-modified"> 665    *   and rendering engines.  As a consequence, the version numbers returned</span>
<span class="line-modified"> 666    *   by a call to the &#39;GETINFO&#39; bytecode instruction are more convoluted</span>
<span class="line-modified"> 667    *   than desired.</span>
 668    *
<span class="line-modified"> 669    *   Here are two tables that try to shed some light on the possible values</span>
<span class="line-modified"> 670    *   for the MS rasterizer engine, together with the additional features</span>
<span class="line-modified"> 671    *   introduced by it.</span>
 672    *
<span class="line-modified"> 673    *   ```</span>
 674    *     GETINFO framework               version feature
 675    *     -------------------------------------------------------------------
 676    *         3   GDI (Win 3.1),            v1.0  16-bit, first version
 677    *             TrueImage
 678    *        33   GDI (Win NT 3.1),         v1.5  32-bit
 679    *             HP Laserjet
 680    *        34   GDI (Win 95)              v1.6  font smoothing,
 681    *                                             new SCANTYPE opcode
 682    *        35   GDI (Win 98/2000)         v1.7  (UN)SCALED_COMPONENT_OFFSET
 683    *                                               bits in composite glyphs
 684    *        36   MGDI (Win CE 2)           v1.6+ classic ClearType
 685    *        37   GDI (XP and later),       v1.8  ClearType
 686    *             GDI+ old (before Vista)
 687    *        38   GDI+ old (Vista, Win 7),  v1.9  subpixel ClearType,
 688    *             WPF                             Y-direction ClearType,
 689    *                                             additional error checking
 690    *        39   DWrite (before Win 8)     v2.0  subpixel ClearType flags
 691    *                                               in GETINFO opcode,
 692    *                                             bug fixes
 693    *        40   GDI+ (after Win 7),       v2.1  Y-direction ClearType flag
 694    *             DWrite (Win 8)                    in GETINFO opcode,
 695    *                                             Gray ClearType
<span class="line-modified"> 696    *   ```</span>
 697    *
<span class="line-modified"> 698    *   The &#39;version&#39; field gives a rough orientation only, since some</span>
 699    *   applications provided certain features much earlier (as an example,
 700    *   Microsoft Reader used subpixel and Y-direction ClearType already in
 701    *   Windows 2000).  Similarly, updates to a given framework might include
 702    *   improved hinting support.
 703    *
<span class="line-modified"> 704    *   ```</span>
 705    *      version   sampling          rendering        comment
 706    *               x        y       x           y
 707    *     --------------------------------------------------------------
 708    *       v1.0   normal  normal  B/W           B/W    bi-level
 709    *       v1.6   high    high    gray          gray   grayscale
 710    *       v1.8   high    normal  color-filter  B/W    (GDI) ClearType
 711    *       v1.9   high    high    color-filter  gray   Color ClearType
 712    *       v2.1   high    normal  gray          B/W    Gray ClearType
 713    *       v2.1   high    high    gray          gray   Gray ClearType
<span class="line-modified"> 714    *   ```</span>
 715    *
 716    *   Color and Gray ClearType are the two available variants of
<span class="line-modified"> 717    *   &#39;Y-direction ClearType&#39;, meaning grayscale rasterization along the</span>
 718    *   Y-direction; the name used in the TrueType specification for this
<span class="line-modified"> 719    *   feature is &#39;symmetric smoothing&#39;.  &#39;Classic ClearType&#39; is the original</span>
<span class="line-modified"> 720    *   algorithm used before introducing a modified version in Win~XP.</span>
<span class="line-modified"> 721    *   Another name for v1.6&#39;s grayscale rendering is &#39;font smoothing&#39;, and</span>
<span class="line-modified"> 722    *   &#39;Color ClearType&#39; is sometimes also called &#39;DWrite ClearType&#39;.  To</span>
<span class="line-modified"> 723    *   differentiate between today&#39;s Color ClearType and the earlier</span>
<span class="line-modified"> 724    *   ClearType variant with B/W rendering along the vertical axis, the</span>
<span class="line-modified"> 725    *   latter is sometimes called &#39;GDI ClearType&#39;.</span>
<span class="line-modified"> 726    *</span>
<span class="line-modified"> 727    *   &#39;Normal&#39; and &#39;high&#39; sampling describe the (virtual) resolution to</span>
<span class="line-modified"> 728    *   access the rasterized outline after the hinting process.  &#39;Normal&#39;</span>
 729    *   means 1 sample per grid line (i.e., B/W).  In the current Microsoft
<span class="line-modified"> 730    *   implementation, &#39;high&#39; means an extra virtual resolution of 16x16 (or</span>
<span class="line-modified"> 731    *   16x1) grid lines per pixel for bytecode instructions like &#39;MIRP&#39;.</span>
 732    *   After hinting, these 16 grid lines are mapped to 6x5 (or 6x1) grid
 733    *   lines for color filtering if Color ClearType is activated.
 734    *
<span class="line-modified"> 735    *   Note that &#39;Gray ClearType&#39; is essentially the same as v1.6&#39;s grayscale</span>
<span class="line-modified"> 736    *   rendering.  However, the GETINFO instruction handles it differently:</span>
<span class="line-modified"> 737    *   v1.6 returns bit~12 (hinting for grayscale), while v2.1 returns</span>
<span class="line-modified"> 738    *   bits~13 (hinting for ClearType), 18 (symmetrical smoothing), and~19</span>
<span class="line-modified"> 739    *   (Gray ClearType).  Also, this mode respects bits 2 and~3 for the</span>
<span class="line-modified"> 740    *   version~1 gasp table exclusively (like Color ClearType), while v1.6</span>
<span class="line-modified"> 741    *   only respects the values of version~0 (bits 0 and~1).</span>
 742    *
<span class="line-modified"> 743    *   Keep in mind that the features of the above interpreter versions might</span>
<span class="line-modified"> 744    *   not map exactly to FreeType features or behavior because it is a</span>
<span class="line-modified"> 745    *   fundamentally different library with different internals.</span>
 746    *
 747    */
 748 #define TT_INTERPRETER_VERSION_35  35
 749 #define TT_INTERPRETER_VERSION_38  38
 750 #define TT_INTERPRETER_VERSION_40  40
 751 
 752 
 753   /**************************************************************************
 754    *
 755    * @property:
 756    *   interpreter-version
 757    *
 758    * @description:
<span class="line-modified"> 759    *   Currently, three versions are available, two representing the bytecode</span>
<span class="line-modified"> 760    *   interpreter with subpixel hinting support (old &#39;Infinality&#39; code and</span>
<span class="line-modified"> 761    *   new stripped-down and higher performance &#39;minimal&#39; code) and one</span>
<span class="line-modified"> 762    *   without, respectively.  The default is subpixel support if</span>
<span class="line-modified"> 763    *   `TT_CONFIG_OPTION_SUBPIXEL_HINTING` is defined, and no subpixel</span>
<span class="line-modified"> 764    *   support otherwise (since it isn&#39;t available then).</span>
 765    *
 766    *   If subpixel hinting is on, many TrueType bytecode instructions behave
<span class="line-modified"> 767    *   differently compared to B/W or grayscale rendering (except if &#39;native</span>
 768    *   ClearType&#39; is selected by the font).  Microsoft&#39;s main idea is to
 769    *   render at a much increased horizontal resolution, then sampling down
 770    *   the created output to subpixel precision.  However, many older fonts
<span class="line-modified"> 771    *   are not suited to this and must be specially taken care of by applying</span>
<span class="line-modified"> 772    *   (hardcoded) tweaks in Microsoft&#39;s interpreter.</span>
 773    *
 774    *   Details on subpixel hinting and some of the necessary tweaks can be
 775    *   found in Greg Hitchcock&#39;s whitepaper at
<span class="line-modified"> 776    *   &#39;https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx&#39;.</span>
<span class="line-modified"> 777    *   Note that FreeType currently doesn&#39;t really &#39;subpixel hint&#39; (6x1, 6x2,</span>
 778    *   or 6x5 supersampling) like discussed in the paper.  Depending on the
 779    *   chosen interpreter, it simply ignores instructions on vertical stems
 780    *   to arrive at very similar results.
 781    *
<span class="line-added"> 782    * @note:</span>
<span class="line-added"> 783    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-added"> 784    *</span>
<span class="line-added"> 785    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
<span class="line-added"> 786    *   variable (using values &#39;35&#39;, &#39;38&#39;, or &#39;40&#39;).</span>
<span class="line-added"> 787    *</span>
<span class="line-added"> 788    * @example:</span>
 789    *   The following example code demonstrates how to deactivate subpixel
 790    *   hinting (omitting the error handling).
 791    *
<span class="line-modified"> 792    *   ```</span>
 793    *     FT_Library  library;
 794    *     FT_Face     face;
 795    *     FT_UInt     interpreter_version = TT_INTERPRETER_VERSION_35;
 796    *
 797    *
 798    *     FT_Init_FreeType( &amp;library );
 799    *
 800    *     FT_Property_Set( library, &quot;truetype&quot;,
 801    *                               &quot;interpreter-version&quot;,
 802    *                               &amp;interpreter_version );
<span class="line-modified"> 803    *   ```</span>






 804    *
 805    * @since:
 806    *   2.5
 807    */
 808 
 809 
 810   /**************************************************************************
 811    *
 812    * @property:
 813    *   glyph-to-script-map
 814    *
 815    * @description:
<span class="line-modified"> 816    *   **Experimental only**</span>
 817    *
 818    *   The auto-hinter provides various script modules to hint glyphs.
 819    *   Examples of supported scripts are Latin or CJK.  Before a glyph is
 820    *   auto-hinted, the Unicode character map of the font gets examined, and
 821    *   the script is then determined based on Unicode character ranges, see
 822    *   below.
 823    *
<span class="line-modified"> 824    *   OpenType fonts, however, often provide much more glyphs than character</span>
<span class="line-modified"> 825    *   codes (small caps, superscripts, ligatures, swashes, etc.), to be</span>
<span class="line-modified"> 826    *   controlled by so-called &#39;features&#39;.  Handling OpenType features can be</span>
<span class="line-modified"> 827    *   quite complicated and thus needs a separate library on top of</span>
 828    *   FreeType.
 829    *
 830    *   The mapping between glyph indices and scripts (in the auto-hinter
<span class="line-modified"> 831    *   sense, see the @FT_AUTOHINTER_SCRIPT_XXX values) is stored as an array</span>
<span class="line-modified"> 832    *   with `num_glyphs` elements, as found in the font&#39;s @FT_Face structure.</span>
<span class="line-modified"> 833    *   The `glyph-to-script-map` property returns a pointer to this array,</span>
<span class="line-modified"> 834    *   which can be modified as needed.  Note that the modification should</span>
<span class="line-modified"> 835    *   happen before the first glyph gets processed by the auto-hinter so</span>
<span class="line-modified"> 836    *   that the global analysis of the font shapes actually uses the modified</span>
<span class="line-modified"> 837    *   mapping.</span>
<span class="line-modified"> 838    *</span>
<span class="line-modified"> 839    * @example:</span>
<span class="line-modified"> 840    *   The following example code demonstrates how to access it (omitting the</span>
<span class="line-modified"> 841    *   error handling).</span>
<span class="line-modified"> 842    *</span>
<span class="line-added"> 843    *   ```</span>
 844    *     FT_Library                library;
 845    *     FT_Face                   face;
 846    *     FT_Prop_GlyphToScriptMap  prop;
 847    *
 848    *
 849    *     FT_Init_FreeType( &amp;library );
 850    *     FT_New_Face( library, &quot;foo.ttf&quot;, 0, &amp;face );
 851    *
 852    *     prop.face = face;
 853    *
 854    *     FT_Property_Get( library, &quot;autofitter&quot;,
 855    *                               &quot;glyph-to-script-map&quot;, &amp;prop );
 856    *
 857    *     // adjust `prop.map&#39; as needed right here
 858    *
 859    *     FT_Load_Glyph( face, ..., FT_LOAD_FORCE_AUTOHINT );
<span class="line-modified"> 860    *   ```</span>
 861    *
 862    * @since:
 863    *   2.4.11
 864    *
 865    */
 866 
 867 
 868   /**************************************************************************
 869    *
 870    * @enum:
 871    *   FT_AUTOHINTER_SCRIPT_XXX
 872    *
 873    * @description:
<span class="line-modified"> 874    *   **Experimental only**</span>
 875    *
 876    *   A list of constants used for the @glyph-to-script-map property to
 877    *   specify the script submodule the auto-hinter should use for hinting a
 878    *   particular glyph.
 879    *
 880    * @values:
 881    *   FT_AUTOHINTER_SCRIPT_NONE ::
 882    *     Don&#39;t auto-hint this glyph.
 883    *
 884    *   FT_AUTOHINTER_SCRIPT_LATIN ::
<span class="line-modified"> 885    *     Apply the latin auto-hinter.  For the auto-hinter, &#39;latin&#39; is a very</span>
<span class="line-modified"> 886    *     broad term, including Cyrillic and Greek also since characters from</span>
<span class="line-modified"> 887    *     those scripts share the same design constraints.</span>
 888    *
 889    *     By default, characters from the following Unicode ranges are
 890    *     assigned to this submodule.
 891    *
<span class="line-modified"> 892    *     ```</span>
 893    *       U+0020 - U+007F  // Basic Latin (no control characters)
 894    *       U+00A0 - U+00FF  // Latin-1 Supplement (no control characters)
 895    *       U+0100 - U+017F  // Latin Extended-A
 896    *       U+0180 - U+024F  // Latin Extended-B
 897    *       U+0250 - U+02AF  // IPA Extensions
 898    *       U+02B0 - U+02FF  // Spacing Modifier Letters
 899    *       U+0300 - U+036F  // Combining Diacritical Marks
 900    *       U+0370 - U+03FF  // Greek and Coptic
 901    *       U+0400 - U+04FF  // Cyrillic
 902    *       U+0500 - U+052F  // Cyrillic Supplement
 903    *       U+1D00 - U+1D7F  // Phonetic Extensions
 904    *       U+1D80 - U+1DBF  // Phonetic Extensions Supplement
 905    *       U+1DC0 - U+1DFF  // Combining Diacritical Marks Supplement
 906    *       U+1E00 - U+1EFF  // Latin Extended Additional
 907    *       U+1F00 - U+1FFF  // Greek Extended
 908    *       U+2000 - U+206F  // General Punctuation
 909    *       U+2070 - U+209F  // Superscripts and Subscripts
 910    *       U+20A0 - U+20CF  // Currency Symbols
 911    *       U+2150 - U+218F  // Number Forms
 912    *       U+2460 - U+24FF  // Enclosed Alphanumerics
 913    *       U+2C60 - U+2C7F  // Latin Extended-C
 914    *       U+2DE0 - U+2DFF  // Cyrillic Extended-A
 915    *       U+2E00 - U+2E7F  // Supplemental Punctuation
 916    *       U+A640 - U+A69F  // Cyrillic Extended-B
 917    *       U+A720 - U+A7FF  // Latin Extended-D
 918    *       U+FB00 - U+FB06  // Alphab. Present. Forms (Latin Ligatures)
 919    *      U+1D400 - U+1D7FF // Mathematical Alphanumeric Symbols
 920    *      U+1F100 - U+1F1FF // Enclosed Alphanumeric Supplement
<span class="line-modified"> 921    *     ```</span>
 922    *
 923    *   FT_AUTOHINTER_SCRIPT_CJK ::
 924    *     Apply the CJK auto-hinter, covering Chinese, Japanese, Korean, old
 925    *     Vietnamese, and some other scripts.
 926    *
 927    *     By default, characters from the following Unicode ranges are
 928    *     assigned to this submodule.
 929    *
<span class="line-modified"> 930    *     ```</span>
 931    *       U+1100 - U+11FF  // Hangul Jamo
 932    *       U+2E80 - U+2EFF  // CJK Radicals Supplement
 933    *       U+2F00 - U+2FDF  // Kangxi Radicals
 934    *       U+2FF0 - U+2FFF  // Ideographic Description Characters
 935    *       U+3000 - U+303F  // CJK Symbols and Punctuation
 936    *       U+3040 - U+309F  // Hiragana
 937    *       U+30A0 - U+30FF  // Katakana
 938    *       U+3100 - U+312F  // Bopomofo
 939    *       U+3130 - U+318F  // Hangul Compatibility Jamo
 940    *       U+3190 - U+319F  // Kanbun
 941    *       U+31A0 - U+31BF  // Bopomofo Extended
 942    *       U+31C0 - U+31EF  // CJK Strokes
 943    *       U+31F0 - U+31FF  // Katakana Phonetic Extensions
 944    *       U+3200 - U+32FF  // Enclosed CJK Letters and Months
 945    *       U+3300 - U+33FF  // CJK Compatibility
 946    *       U+3400 - U+4DBF  // CJK Unified Ideographs Extension A
 947    *       U+4DC0 - U+4DFF  // Yijing Hexagram Symbols
 948    *       U+4E00 - U+9FFF  // CJK Unified Ideographs
 949    *       U+A960 - U+A97F  // Hangul Jamo Extended-A
 950    *       U+AC00 - U+D7AF  // Hangul Syllables
 951    *       U+D7B0 - U+D7FF  // Hangul Jamo Extended-B
 952    *       U+F900 - U+FAFF  // CJK Compatibility Ideographs
 953    *       U+FE10 - U+FE1F  // Vertical forms
 954    *       U+FE30 - U+FE4F  // CJK Compatibility Forms
 955    *       U+FF00 - U+FFEF  // Halfwidth and Fullwidth Forms
 956    *      U+1B000 - U+1B0FF // Kana Supplement
 957    *      U+1D300 - U+1D35F // Tai Xuan Hing Symbols
 958    *      U+1F200 - U+1F2FF // Enclosed Ideographic Supplement
 959    *      U+20000 - U+2A6DF // CJK Unified Ideographs Extension B
 960    *      U+2A700 - U+2B73F // CJK Unified Ideographs Extension C
 961    *      U+2B740 - U+2B81F // CJK Unified Ideographs Extension D
 962    *      U+2F800 - U+2FA1F // CJK Compatibility Ideographs Supplement
<span class="line-modified"> 963    *     ```</span>
 964    *
 965    *   FT_AUTOHINTER_SCRIPT_INDIC ::
 966    *     Apply the indic auto-hinter, covering all major scripts from the
 967    *     Indian sub-continent and some other related scripts like Thai, Lao,
 968    *     or Tibetan.
 969    *
 970    *     By default, characters from the following Unicode ranges are
 971    *     assigned to this submodule.
 972    *
<span class="line-modified"> 973    *     ```</span>
 974    *       U+0900 - U+0DFF  // Indic Range
 975    *       U+0F00 - U+0FFF  // Tibetan
 976    *       U+1900 - U+194F  // Limbu
 977    *       U+1B80 - U+1BBF  // Sundanese
 978    *       U+A800 - U+A82F  // Syloti Nagri
 979    *       U+ABC0 - U+ABFF  // Meetei Mayek
 980    *      U+11800 - U+118DF // Sharada
<span class="line-modified"> 981    *     ```</span>
 982    *
 983    *     Note that currently Indic support is rudimentary only, missing blue
 984    *     zone support.
 985    *
 986    * @since:
 987    *   2.4.11
 988    *
 989    */
 990 #define FT_AUTOHINTER_SCRIPT_NONE   0
 991 #define FT_AUTOHINTER_SCRIPT_LATIN  1
 992 #define FT_AUTOHINTER_SCRIPT_CJK    2
 993 #define FT_AUTOHINTER_SCRIPT_INDIC  3
 994 
 995 
 996   /**************************************************************************
 997    *
 998    * @struct:
 999    *   FT_Prop_GlyphToScriptMap
1000    *
1001    * @description:
<span class="line-modified">1002    *   **Experimental only**</span>
1003    *
1004    *   The data exchange structure for the @glyph-to-script-map property.
1005    *
1006    * @since:
1007    *   2.4.11
1008    *
1009    */
1010   typedef struct  FT_Prop_GlyphToScriptMap_
1011   {
1012     FT_Face     face;
1013     FT_UShort*  map;
1014 
1015   } FT_Prop_GlyphToScriptMap;
1016 
1017 
1018   /**************************************************************************
1019    *
1020    * @property:
1021    *   fallback-script
1022    *
1023    * @description:
<span class="line-modified">1024    *   **Experimental only**</span>













1025    *
<span class="line-modified">1026    *   If no auto-hinter script module can be assigned to a glyph, a fallback</span>
<span class="line-modified">1027    *   script gets assigned to it (see also the @glyph-to-script-map</span>
<span class="line-modified">1028    *   property).  By default, this is @FT_AUTOHINTER_SCRIPT_CJK.  Using the</span>
<span class="line-added">1029    *   `fallback-script` property, this fallback value can be changed.</span>
1030    *
1031    * @note:
1032    *   This property can be used with @FT_Property_Get also.
1033    *
1034    *   It&#39;s important to use the right timing for changing this value: The
<span class="line-modified">1035    *   creation of the glyph-to-script map that eventually uses the fallback</span>
<span class="line-modified">1036    *   script value gets triggered either by setting or reading a</span>
1037    *   face-specific property like @glyph-to-script-map, or by auto-hinting
1038    *   any glyph from that face.  In particular, if you have already created
1039    *   an @FT_Face structure but not loaded any glyph (using the
1040    *   auto-hinter), a change of the fallback script will affect this face.
1041    *
<span class="line-added">1042    * @example:</span>
<span class="line-added">1043    *   ```</span>
<span class="line-added">1044    *     FT_Library  library;</span>
<span class="line-added">1045    *     FT_UInt     fallback_script = FT_AUTOHINTER_SCRIPT_NONE;</span>
<span class="line-added">1046    *</span>
<span class="line-added">1047    *</span>
<span class="line-added">1048    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-added">1049    *</span>
<span class="line-added">1050    *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<span class="line-added">1051    *                               &quot;fallback-script&quot;, &amp;fallback_script );</span>
<span class="line-added">1052    *   ```</span>
<span class="line-added">1053    *</span>
1054    * @since:
1055    *   2.4.11
1056    *
1057    */
1058 
1059 
1060   /**************************************************************************
1061    *
1062    * @property:
1063    *   default-script
1064    *
1065    * @description:
<span class="line-modified">1066    *   **Experimental only**</span>
1067    *
<span class="line-modified">1068    *   If FreeType gets compiled with `FT_CONFIG_OPTION_USE_HARFBUZZ` to make</span>
<span class="line-modified">1069    *   the HarfBuzz library access OpenType features for getting better glyph</span>
<span class="line-modified">1070    *   coverages, this property sets the (auto-fitter) script to be used for</span>
<span class="line-modified">1071    *   the default (OpenType) script data of a font&#39;s GSUB table.  Features</span>
<span class="line-modified">1072    *   for the default script are intended for all scripts not explicitly</span>
<span class="line-modified">1073    *   handled in GSUB; an example is a &#39;dlig&#39; feature, containing the</span>
<span class="line-modified">1074    *   combination of the characters &#39;T&#39;, &#39;E&#39;, and &#39;L&#39; to form a &#39;TEL&#39;</span>
<span class="line-modified">1075    *   ligature.</span>
1076    *
1077    *   By default, this is @FT_AUTOHINTER_SCRIPT_LATIN.  Using the
<span class="line-modified">1078    *   `default-script` property, this default value can be changed.</span>











1079    *
1080    * @note:
1081    *   This property can be used with @FT_Property_Get also.
1082    *
1083    *   It&#39;s important to use the right timing for changing this value: The
<span class="line-modified">1084    *   creation of the glyph-to-script map that eventually uses the default</span>
<span class="line-modified">1085    *   script value gets triggered either by setting or reading a</span>
1086    *   face-specific property like @glyph-to-script-map, or by auto-hinting
1087    *   any glyph from that face.  In particular, if you have already created
1088    *   an @FT_Face structure but not loaded any glyph (using the
1089    *   auto-hinter), a change of the default script will affect this face.
1090    *
<span class="line-added">1091    * @example:</span>
<span class="line-added">1092    *   ```</span>
<span class="line-added">1093    *     FT_Library  library;</span>
<span class="line-added">1094    *     FT_UInt     default_script = FT_AUTOHINTER_SCRIPT_NONE;</span>
<span class="line-added">1095    *</span>
<span class="line-added">1096    *</span>
<span class="line-added">1097    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-added">1098    *</span>
<span class="line-added">1099    *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<span class="line-added">1100    *                               &quot;default-script&quot;, &amp;default_script );</span>
<span class="line-added">1101    *   ```</span>
<span class="line-added">1102    *</span>
1103    * @since:
1104    *   2.5.3
1105    *
1106    */
1107 
1108 
1109   /**************************************************************************
1110    *
1111    * @property:
1112    *   increase-x-height
1113    *
1114    * @description:
<span class="line-modified">1115    *   For ppem values in the range 6~&lt;= ppem &lt;= `increase-x-height`, round</span>
<span class="line-modified">1116    *   up the font&#39;s x~height much more often than normally.  If the value is</span>
<span class="line-modified">1117    *   set to~0, which is the default, this feature is switched off.  Use</span>
1118    *   this property to improve the legibility of small font sizes if
1119    *   necessary.
1120    *
<span class="line-modified">1121    * @note:</span>
<span class="line-added">1122    *   This property can be used with @FT_Property_Get also.</span>
<span class="line-added">1123    *</span>
<span class="line-added">1124    *   Set this value right after calling @FT_Set_Char_Size, but before</span>
<span class="line-added">1125    *   loading any glyph (using the auto-hinter).</span>
<span class="line-added">1126    *</span>
<span class="line-added">1127    * @example:</span>
<span class="line-added">1128    *   ```</span>
1129    *     FT_Library               library;
1130    *     FT_Face                  face;
1131    *     FT_Prop_IncreaseXHeight  prop;
1132    *
1133    *
1134    *     FT_Init_FreeType( &amp;library );
1135    *     FT_New_Face( library, &quot;foo.ttf&quot;, 0, &amp;face );
1136    *     FT_Set_Char_Size( face, 10 * 64, 0, 72, 0 );
1137    *
1138    *     prop.face  = face;
1139    *     prop.limit = 14;
1140    *
1141    *     FT_Property_Set( library, &quot;autofitter&quot;,
1142    *                               &quot;increase-x-height&quot;, &amp;prop );
<span class="line-modified">1143    *   ```</span>






1144    *
1145    * @since:
1146    *   2.4.11
1147    *
1148    */
1149 
1150 
1151   /**************************************************************************
1152    *
1153    * @struct:
1154    *   FT_Prop_IncreaseXHeight
1155    *
1156    * @description:
1157    *   The data exchange structure for the @increase-x-height property.
1158    *
1159    */
1160   typedef struct  FT_Prop_IncreaseXHeight_
1161   {
1162     FT_Face  face;
1163     FT_UInt  limit;
1164 
1165   } FT_Prop_IncreaseXHeight;
1166 
1167 
1168   /**************************************************************************
1169    *
1170    * @property:
1171    *   warping
1172    *
1173    * @description:
<span class="line-modified">1174    *   **Experimental only**</span>
1175    *
<span class="line-modified">1176    *   If FreeType gets compiled with option `AF_CONFIG_OPTION_USE_WARPER` to</span>
1177    *   activate the warp hinting code in the auto-hinter, this property
1178    *   switches warping on and off.
1179    *
<span class="line-modified">1180    *   Warping only works in &#39;normal&#39; auto-hinting mode replacing it.  The</span>
<span class="line-modified">1181    *   idea of the code is to slightly scale and shift a glyph along the</span>
<span class="line-modified">1182    *   non-hinted dimension (which is usually the horizontal axis) so that as</span>
<span class="line-modified">1183    *   much of its segments are aligned (more or less) to the grid.  To find</span>
<span class="line-modified">1184    *   out a glyph&#39;s optimal scaling and shifting value, various parameter</span>
<span class="line-modified">1185    *   combinations are tried and scored.</span>
1186    *
<span class="line-modified">1187    *   By default, warping is off.</span>












1188    *
1189    * @note:
1190    *   This property can be used with @FT_Property_Get also.
1191    *
<span class="line-modified">1192    *   This property can be set via the `FREETYPE_PROPERTIES` environment</span>
<span class="line-modified">1193    *   variable (using values 1 and 0 for &#39;on&#39; and &#39;off&#39;, respectively).</span>
1194    *
1195    *   The warping code can also change advance widths.  Have a look at the
<span class="line-modified">1196    *   `lsb_delta` and `rsb_delta` fields in the @FT_GlyphSlotRec structure</span>
1197    *   for details on improving inter-glyph distances while rendering.
1198    *
1199    *   Since warping is a global property of the auto-hinter it is best to
1200    *   change its value before rendering any face.  Otherwise, you should
<span class="line-modified">1201    *   reload all faces that get auto-hinted in &#39;normal&#39; hinting mode.</span>
<span class="line-added">1202    *</span>
<span class="line-added">1203    * @example:</span>
<span class="line-added">1204    *   This example shows how to switch on warping (omitting the error</span>
<span class="line-added">1205    *   handling).</span>
<span class="line-added">1206    *</span>
<span class="line-added">1207    *   ```</span>
<span class="line-added">1208    *     FT_Library  library;</span>
<span class="line-added">1209    *     FT_Bool     warping = 1;</span>
<span class="line-added">1210    *</span>
<span class="line-added">1211    *</span>
<span class="line-added">1212    *     FT_Init_FreeType( &amp;library );</span>
<span class="line-added">1213    *</span>
<span class="line-added">1214    *     FT_Property_Set( library, &quot;autofitter&quot;, &quot;warping&quot;, &amp;warping );</span>
<span class="line-added">1215    *   ```</span>
1216    *
1217    * @since:
1218    *   2.6
1219    *
1220    */
1221 
1222 
1223  /* */
1224 
1225 
1226 FT_END_HEADER
1227 
1228 
1229 #endif /* FTDRIVER_H_ */
1230 
1231 
1232 /* END */
</pre>
</td>
</tr>
</table>
<center><a href="ftcid.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="fterrdef.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>