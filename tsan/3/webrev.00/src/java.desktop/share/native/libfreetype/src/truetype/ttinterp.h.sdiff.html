<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/src/truetype/ttinterp.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ttinterp.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ttobjs.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/truetype/ttinterp.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 /***************************************************************************/</span>
<span class="line-modified">  2 /*                                                                         */</span>
<span class="line-modified">  3 /*  ttinterp.h                                                             */</span>
<span class="line-modified">  4 /*                                                                         */</span>
<span class="line-modified">  5 /*    TrueType bytecode interpreter (specification).                       */</span>
<span class="line-modified">  6 /*                                                                         */</span>
<span class="line-modified">  7 /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">  8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">  9 /*                                                                         */</span>
<span class="line-modified"> 10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified"> 11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified"> 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified"> 13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified"> 14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified"> 15 /*                                                                         */</span>
<span class="line-modified"> 16 /***************************************************************************/</span>
 17 
 18 
 19 #ifndef TTINTERP_H_
 20 #define TTINTERP_H_
 21 
 22 #include &lt;ft2build.h&gt;
 23 #include &quot;ttobjs.h&quot;
 24 
 25 
 26 FT_BEGIN_HEADER
 27 
 28 
<span class="line-modified"> 29   /*************************************************************************/</span>
<span class="line-modified"> 30   /*                                                                       */</span>
<span class="line-modified"> 31   /* Rounding mode constants.                                              */</span>
<span class="line-modified"> 32   /*                                                                       */</span>
 33 #define TT_Round_Off             5
 34 #define TT_Round_To_Half_Grid    0
 35 #define TT_Round_To_Grid         1
 36 #define TT_Round_To_Double_Grid  2
 37 #define TT_Round_Up_To_Grid      4
 38 #define TT_Round_Down_To_Grid    3
 39 #define TT_Round_Super           6
 40 #define TT_Round_Super_45        7
 41 
 42 
<span class="line-modified"> 43   /*************************************************************************/</span>
<span class="line-modified"> 44   /*                                                                       */</span>
<span class="line-modified"> 45   /* Function types used by the interpreter, depending on various modes    */</span>
<span class="line-modified"> 46   /* (e.g. the rounding mode, whether to render a vertical or horizontal   */</span>
<span class="line-modified"> 47   /* line etc).                                                            */</span>
<span class="line-modified"> 48   /*                                                                       */</span>
<span class="line-modified"> 49   /*************************************************************************/</span>
 50 
 51   /* Rounding function */
 52   typedef FT_F26Dot6
 53   (*TT_Round_Func)( TT_ExecContext  exc,
 54                     FT_F26Dot6      distance,
 55                     FT_F26Dot6      compensation );
 56 
 57   /* Point displacement along the freedom vector routine */
 58   typedef void
 59   (*TT_Move_Func)( TT_ExecContext  exc,
 60                    TT_GlyphZone    zone,
 61                    FT_UShort       point,
 62                    FT_F26Dot6      distance );
 63 
 64   /* Distance projection along one of the projection vectors */
 65   typedef FT_F26Dot6
 66   (*TT_Project_Func)( TT_ExecContext  exc,
 67                       FT_Pos          dx,
 68                       FT_Pos          dy );
 69 
 70   /* getting current ppem.  Take care of non-square pixels if necessary */
 71   typedef FT_Long
 72   (*TT_Cur_Ppem_Func)( TT_ExecContext  exc );
 73 
 74   /* reading a cvt value.  Take care of non-square pixels if necessary */
 75   typedef FT_F26Dot6
 76   (*TT_Get_CVT_Func)( TT_ExecContext  exc,
 77                       FT_ULong        idx );
 78 
 79   /* setting or moving a cvt value.  Take care of non-square pixels  */
 80   /* if necessary                                                    */
 81   typedef void
 82   (*TT_Set_CVT_Func)( TT_ExecContext  exc,
 83                       FT_ULong        idx,
 84                       FT_F26Dot6      value );
 85 
 86 
<span class="line-modified"> 87   /*************************************************************************/</span>
<span class="line-modified"> 88   /*                                                                       */</span>
<span class="line-modified"> 89   /* This structure defines a call record, used to manage function calls.  */</span>
<span class="line-modified"> 90   /*                                                                       */</span>
 91   typedef struct  TT_CallRec_
 92   {
 93     FT_Int   Caller_Range;
 94     FT_Long  Caller_IP;
 95     FT_Long  Cur_Count;
 96 
 97     TT_DefRecord  *Def; /* either FDEF or IDEF */
 98 
 99   } TT_CallRec, *TT_CallStack;
100 
101 
102 #ifdef TT_SUPPORT_SUBPIXEL_HINTING_INFINALITY
103 
<span class="line-modified">104   /*************************************************************************/</span>
<span class="line-modified">105   /*                                                                       */</span>
<span class="line-modified">106   /* These structures define rules used to tweak subpixel hinting for      */</span>
<span class="line-modified">107   /* various fonts.  &quot;&quot;, 0, &quot;&quot;, NULL value indicates to match any value.   */</span>
<span class="line-modified">108   /*                                                                       */</span>
109 
110 #define SPH_MAX_NAME_SIZE      32
111 #define SPH_MAX_CLASS_MEMBERS  100
112 
113   typedef struct  SPH_TweakRule_
114   {
115     const char      family[SPH_MAX_NAME_SIZE];
116     const FT_UInt   ppem;
117     const char      style[SPH_MAX_NAME_SIZE];
118     const FT_ULong  glyph;
119 
120   } SPH_TweakRule;
121 
122 
123   typedef struct  SPH_ScaleRule_
124   {
125     const char      family[SPH_MAX_NAME_SIZE];
126     const FT_UInt   ppem;
127     const char      style[SPH_MAX_NAME_SIZE];
128     const FT_ULong  glyph;
129     const FT_ULong  scale;
130 
131   } SPH_ScaleRule;
132 
133 
134   typedef struct  SPH_Font_Class_
135   {
136     const char  name[SPH_MAX_NAME_SIZE];
137     const char  member[SPH_MAX_CLASS_MEMBERS][SPH_MAX_NAME_SIZE];
138 
139   } SPH_Font_Class;
140 
141 #endif /* TT_SUPPORT_SUBPIXEL_HINTING_INFINALITY */
142 
143 
<span class="line-modified">144   /*************************************************************************/</span>
<span class="line-modified">145   /*                                                                       */</span>
<span class="line-modified">146   /* The main structure for the interpreter which collects all necessary   */</span>
<span class="line-modified">147   /* variables and states.                                                 */</span>
<span class="line-modified">148   /*                                                                       */</span>
149   typedef struct  TT_ExecContextRec_
150   {
151     TT_Face            face;
152     TT_Size            size;
153     FT_Memory          memory;
154 
155     /* instructions state */
156 
157     FT_Error           error;      /* last execution error */
158 
159     FT_Long            top;        /* top of exec. stack   */
160 
161     FT_Long            stackSize;  /* size of exec. stack  */
162     FT_Long*           stack;      /* current exec. stack  */
163 
164     FT_Long            args;
165     FT_Long            new_top;    /* new top after exec.  */
166 
167     TT_GlyphZoneRec    zp0,        /* zone records */
168                        zp1,
</pre>
<hr />
<pre>
335      * interpret instructions as before (called `native ClearType&#39;)[2][3].
336      * The font designer then regains full control and is responsible for
337      * making the font work correctly with ClearType without any
338      * hand-holding by the interpreter or rasterizer[4].  The v40
339      * interpreter assumes backward compatibility by default, which can be
340      * turned off the same way by executing the following in the control
341      * program (cf. `Ins_INSTCTRL&#39;).
342      *
343      *   #PUSH 4,3
344      *   INSTCTRL[]
345      *
346      * [1] Tricky fonts as FreeType defines them rely on the bytecode
347      *     interpreter to display correctly.  Hacks can interfere with them,
348      *     so they get treated like native ClearType fonts (v40 with
349      *     backward compatibility turned off).  Cf. `TT_RunIns&#39;.
350      *
351      * [2] Proposed by Microsoft&#39;s Greg Hitchcock in
352      *     https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx
353      *
354      * [3] Beat Stamm describes it in more detail:
<span class="line-modified">355      *     http://www.beatstamm.com/typography/RTRCh4.htm#Sec12</span>
356      *
357      * [4] The list of `native ClearType&#39; fonts is small at the time of this
358      *     writing; I found the following on a Windows 10 Update 1511
359      *     installation: Constantia, Corbel, Sitka, Malgun Gothic, Microsoft
360      *     JhengHei (Bold and UI Bold), Microsoft YaHei (Bold and UI Bold),
361      *     SimSun, NSimSun, and Yu Gothic.
362      *
363      */
364 
365     /* Using v40 implies subpixel hinting, unless FT_RENDER_MODE_MONO has been
366      * requested.  Used to detect interpreter */
367     /* version switches.  `_lean&#39; to differentiate from the Infinality */
368     /* `subpixel_hinting&#39;, which is managed differently.               */
369     FT_Bool            subpixel_hinting_lean;
370 
371     /* Long side of a LCD subpixel is vertical (e.g., screen is rotated). */
372     /* `_lean&#39; to differentiate from the Infinality `vertical_lcd&#39;, which */
373     /* is managed differently.                                            */
374     FT_Bool            vertical_lcd_lean;
375 
</pre>
<hr />
<pre>
447   FT_LOCAL( void )
448   TT_Set_CodeRange( TT_ExecContext  exec,
449                     FT_Int          range,
450                     void*           base,
451                     FT_Long         length );
452 
453   FT_LOCAL( void )
454   TT_Clear_CodeRange( TT_ExecContext  exec,
455                       FT_Int          range );
456 
457 
458   FT_LOCAL( FT_Error )
459   Update_Max( FT_Memory  memory,
460               FT_ULong*  size,
461               FT_ULong   multiplier,
462               void*      _pbuff,
463               FT_ULong   new_max );
464 #endif /* TT_USE_BYTECODE_INTERPRETER */
465 
466 
<span class="line-modified">467   /*************************************************************************/</span>
<span class="line-modified">468   /*                                                                       */</span>
<span class="line-modified">469   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">470   /*    TT_New_Context                                                     */</span>
<span class="line-modified">471   /*                                                                       */</span>
<span class="line-modified">472   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">473   /*    Queries the face context for a given font.  Note that there is     */</span>
<span class="line-modified">474   /*    now a _single_ execution context in the TrueType driver which is   */</span>
<span class="line-modified">475   /*    shared among faces.                                                */</span>
<span class="line-modified">476   /*                                                                       */</span>
<span class="line-modified">477   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">478   /*    face :: A handle to the source face object.                        */</span>
<span class="line-modified">479   /*                                                                       */</span>
<span class="line-modified">480   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">481   /*    A handle to the execution context.  Initialized for `face&#39;.        */</span>
<span class="line-modified">482   /*                                                                       */</span>
<span class="line-modified">483   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">484   /*    Only the glyph loader and debugger should call this function.      */</span>
<span class="line-modified">485   /*    (And right now only the glyph loader uses it.)                     */</span>
<span class="line-modified">486   /*                                                                       */</span>

487   FT_EXPORT( TT_ExecContext )
488   TT_New_Context( TT_Driver  driver );
489 
490 
491 #ifdef TT_USE_BYTECODE_INTERPRETER
492   FT_LOCAL( void )
493   TT_Done_Context( TT_ExecContext  exec );
494 
495   FT_LOCAL( FT_Error )
496   TT_Load_Context( TT_ExecContext  exec,
497                    TT_Face         face,
498                    TT_Size         size );
499 
500   FT_LOCAL( void )
501   TT_Save_Context( TT_ExecContext  exec,
502                    TT_Size         ins );
503 
504   FT_LOCAL( FT_Error )
505   TT_Run_Context( TT_ExecContext  exec );
506 #endif /* TT_USE_BYTECODE_INTERPRETER */
507 
508 
<span class="line-modified">509   /*************************************************************************/</span>
<span class="line-modified">510   /*                                                                       */</span>
<span class="line-modified">511   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">512   /*    TT_RunIns                                                          */</span>
<span class="line-modified">513   /*                                                                       */</span>
<span class="line-modified">514   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">515   /*    Executes one or more instruction in the execution context.  This   */</span>
<span class="line-modified">516   /*    is the main function of the TrueType opcode interpreter.           */</span>
<span class="line-modified">517   /*                                                                       */</span>
<span class="line-modified">518   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">519   /*    exec :: A handle to the target execution context.                  */</span>
<span class="line-modified">520   /*                                                                       */</span>
<span class="line-modified">521   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">522   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">523   /*                                                                       */</span>
<span class="line-modified">524   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">525   /*    Only the object manager and debugger should call this function.    */</span>
<span class="line-modified">526   /*                                                                       */</span>
<span class="line-modified">527   /*    This function is publicly exported because it is directly          */</span>
<span class="line-modified">528   /*    invoked by the TrueType debugger.                                  */</span>
<span class="line-modified">529   /*                                                                       */</span>

530   FT_EXPORT( FT_Error )
531   TT_RunIns( TT_ExecContext  exec );
532 
533 
534 FT_END_HEADER
535 
536 #endif /* TTINTERP_H_ */
537 
538 
539 /* END */
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * ttinterp.h</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   TrueType bytecode interpreter (specification).</span>
<span class="line-modified">  6  *</span>
<span class="line-modified">  7  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">  8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">  9  *</span>
<span class="line-modified"> 10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 13  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 14  * understand and accept it fully.</span>
<span class="line-modified"> 15  *</span>
<span class="line-modified"> 16  */</span>
 17 
 18 
 19 #ifndef TTINTERP_H_
 20 #define TTINTERP_H_
 21 
 22 #include &lt;ft2build.h&gt;
 23 #include &quot;ttobjs.h&quot;
 24 
 25 
 26 FT_BEGIN_HEADER
 27 
 28 
<span class="line-modified"> 29   /**************************************************************************</span>
<span class="line-modified"> 30    *</span>
<span class="line-modified"> 31    * Rounding mode constants.</span>
<span class="line-modified"> 32    */</span>
 33 #define TT_Round_Off             5
 34 #define TT_Round_To_Half_Grid    0
 35 #define TT_Round_To_Grid         1
 36 #define TT_Round_To_Double_Grid  2
 37 #define TT_Round_Up_To_Grid      4
 38 #define TT_Round_Down_To_Grid    3
 39 #define TT_Round_Super           6
 40 #define TT_Round_Super_45        7
 41 
 42 
<span class="line-modified"> 43   /**************************************************************************</span>
<span class="line-modified"> 44    *</span>
<span class="line-modified"> 45    * Function types used by the interpreter, depending on various modes</span>
<span class="line-modified"> 46    * (e.g. the rounding mode, whether to render a vertical or horizontal</span>
<span class="line-modified"> 47    * line etc).</span>
<span class="line-modified"> 48    *</span>
<span class="line-modified"> 49    */</span>
 50 
 51   /* Rounding function */
 52   typedef FT_F26Dot6
 53   (*TT_Round_Func)( TT_ExecContext  exc,
 54                     FT_F26Dot6      distance,
 55                     FT_F26Dot6      compensation );
 56 
 57   /* Point displacement along the freedom vector routine */
 58   typedef void
 59   (*TT_Move_Func)( TT_ExecContext  exc,
 60                    TT_GlyphZone    zone,
 61                    FT_UShort       point,
 62                    FT_F26Dot6      distance );
 63 
 64   /* Distance projection along one of the projection vectors */
 65   typedef FT_F26Dot6
 66   (*TT_Project_Func)( TT_ExecContext  exc,
 67                       FT_Pos          dx,
 68                       FT_Pos          dy );
 69 
 70   /* getting current ppem.  Take care of non-square pixels if necessary */
 71   typedef FT_Long
 72   (*TT_Cur_Ppem_Func)( TT_ExecContext  exc );
 73 
 74   /* reading a cvt value.  Take care of non-square pixels if necessary */
 75   typedef FT_F26Dot6
 76   (*TT_Get_CVT_Func)( TT_ExecContext  exc,
 77                       FT_ULong        idx );
 78 
 79   /* setting or moving a cvt value.  Take care of non-square pixels  */
 80   /* if necessary                                                    */
 81   typedef void
 82   (*TT_Set_CVT_Func)( TT_ExecContext  exc,
 83                       FT_ULong        idx,
 84                       FT_F26Dot6      value );
 85 
 86 
<span class="line-modified"> 87   /**************************************************************************</span>
<span class="line-modified"> 88    *</span>
<span class="line-modified"> 89    * This structure defines a call record, used to manage function calls.</span>
<span class="line-modified"> 90    */</span>
 91   typedef struct  TT_CallRec_
 92   {
 93     FT_Int   Caller_Range;
 94     FT_Long  Caller_IP;
 95     FT_Long  Cur_Count;
 96 
 97     TT_DefRecord  *Def; /* either FDEF or IDEF */
 98 
 99   } TT_CallRec, *TT_CallStack;
100 
101 
102 #ifdef TT_SUPPORT_SUBPIXEL_HINTING_INFINALITY
103 
<span class="line-modified">104   /**************************************************************************</span>
<span class="line-modified">105    *</span>
<span class="line-modified">106    * These structures define rules used to tweak subpixel hinting for</span>
<span class="line-modified">107    * various fonts.  &quot;&quot;, 0, &quot;&quot;, NULL value indicates to match any value.</span>
<span class="line-modified">108    */</span>
109 
110 #define SPH_MAX_NAME_SIZE      32
111 #define SPH_MAX_CLASS_MEMBERS  100
112 
113   typedef struct  SPH_TweakRule_
114   {
115     const char      family[SPH_MAX_NAME_SIZE];
116     const FT_UInt   ppem;
117     const char      style[SPH_MAX_NAME_SIZE];
118     const FT_ULong  glyph;
119 
120   } SPH_TweakRule;
121 
122 
123   typedef struct  SPH_ScaleRule_
124   {
125     const char      family[SPH_MAX_NAME_SIZE];
126     const FT_UInt   ppem;
127     const char      style[SPH_MAX_NAME_SIZE];
128     const FT_ULong  glyph;
129     const FT_ULong  scale;
130 
131   } SPH_ScaleRule;
132 
133 
134   typedef struct  SPH_Font_Class_
135   {
136     const char  name[SPH_MAX_NAME_SIZE];
137     const char  member[SPH_MAX_CLASS_MEMBERS][SPH_MAX_NAME_SIZE];
138 
139   } SPH_Font_Class;
140 
141 #endif /* TT_SUPPORT_SUBPIXEL_HINTING_INFINALITY */
142 
143 
<span class="line-modified">144   /**************************************************************************</span>
<span class="line-modified">145    *</span>
<span class="line-modified">146    * The main structure for the interpreter which collects all necessary</span>
<span class="line-modified">147    * variables and states.</span>
<span class="line-modified">148    */</span>
149   typedef struct  TT_ExecContextRec_
150   {
151     TT_Face            face;
152     TT_Size            size;
153     FT_Memory          memory;
154 
155     /* instructions state */
156 
157     FT_Error           error;      /* last execution error */
158 
159     FT_Long            top;        /* top of exec. stack   */
160 
161     FT_Long            stackSize;  /* size of exec. stack  */
162     FT_Long*           stack;      /* current exec. stack  */
163 
164     FT_Long            args;
165     FT_Long            new_top;    /* new top after exec.  */
166 
167     TT_GlyphZoneRec    zp0,        /* zone records */
168                        zp1,
</pre>
<hr />
<pre>
335      * interpret instructions as before (called `native ClearType&#39;)[2][3].
336      * The font designer then regains full control and is responsible for
337      * making the font work correctly with ClearType without any
338      * hand-holding by the interpreter or rasterizer[4].  The v40
339      * interpreter assumes backward compatibility by default, which can be
340      * turned off the same way by executing the following in the control
341      * program (cf. `Ins_INSTCTRL&#39;).
342      *
343      *   #PUSH 4,3
344      *   INSTCTRL[]
345      *
346      * [1] Tricky fonts as FreeType defines them rely on the bytecode
347      *     interpreter to display correctly.  Hacks can interfere with them,
348      *     so they get treated like native ClearType fonts (v40 with
349      *     backward compatibility turned off).  Cf. `TT_RunIns&#39;.
350      *
351      * [2] Proposed by Microsoft&#39;s Greg Hitchcock in
352      *     https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx
353      *
354      * [3] Beat Stamm describes it in more detail:
<span class="line-modified">355      *     http://rastertragedy.com/RTRCh4.htm#Sec12.</span>
356      *
357      * [4] The list of `native ClearType&#39; fonts is small at the time of this
358      *     writing; I found the following on a Windows 10 Update 1511
359      *     installation: Constantia, Corbel, Sitka, Malgun Gothic, Microsoft
360      *     JhengHei (Bold and UI Bold), Microsoft YaHei (Bold and UI Bold),
361      *     SimSun, NSimSun, and Yu Gothic.
362      *
363      */
364 
365     /* Using v40 implies subpixel hinting, unless FT_RENDER_MODE_MONO has been
366      * requested.  Used to detect interpreter */
367     /* version switches.  `_lean&#39; to differentiate from the Infinality */
368     /* `subpixel_hinting&#39;, which is managed differently.               */
369     FT_Bool            subpixel_hinting_lean;
370 
371     /* Long side of a LCD subpixel is vertical (e.g., screen is rotated). */
372     /* `_lean&#39; to differentiate from the Infinality `vertical_lcd&#39;, which */
373     /* is managed differently.                                            */
374     FT_Bool            vertical_lcd_lean;
375 
</pre>
<hr />
<pre>
447   FT_LOCAL( void )
448   TT_Set_CodeRange( TT_ExecContext  exec,
449                     FT_Int          range,
450                     void*           base,
451                     FT_Long         length );
452 
453   FT_LOCAL( void )
454   TT_Clear_CodeRange( TT_ExecContext  exec,
455                       FT_Int          range );
456 
457 
458   FT_LOCAL( FT_Error )
459   Update_Max( FT_Memory  memory,
460               FT_ULong*  size,
461               FT_ULong   multiplier,
462               void*      _pbuff,
463               FT_ULong   new_max );
464 #endif /* TT_USE_BYTECODE_INTERPRETER */
465 
466 
<span class="line-modified">467   /**************************************************************************</span>
<span class="line-modified">468    *</span>
<span class="line-modified">469    * @Function:</span>
<span class="line-modified">470    *   TT_New_Context</span>
<span class="line-modified">471    *</span>
<span class="line-modified">472    * @Description:</span>
<span class="line-modified">473    *   Queries the face context for a given font.  Note that there is</span>
<span class="line-modified">474    *   now a _single_ execution context in the TrueType driver which is</span>
<span class="line-modified">475    *   shared among faces.</span>
<span class="line-modified">476    *</span>
<span class="line-modified">477    * @Input:</span>
<span class="line-modified">478    *   face ::</span>
<span class="line-modified">479    *     A handle to the source face object.</span>
<span class="line-modified">480    *</span>
<span class="line-modified">481    * @Return:</span>
<span class="line-modified">482    *   A handle to the execution context.  Initialized for `face&#39;.</span>
<span class="line-modified">483    *</span>
<span class="line-modified">484    * @Note:</span>
<span class="line-modified">485    *   Only the glyph loader and debugger should call this function.</span>
<span class="line-modified">486    *   (And right now only the glyph loader uses it.)</span>
<span class="line-added">487    */</span>
488   FT_EXPORT( TT_ExecContext )
489   TT_New_Context( TT_Driver  driver );
490 
491 
492 #ifdef TT_USE_BYTECODE_INTERPRETER
493   FT_LOCAL( void )
494   TT_Done_Context( TT_ExecContext  exec );
495 
496   FT_LOCAL( FT_Error )
497   TT_Load_Context( TT_ExecContext  exec,
498                    TT_Face         face,
499                    TT_Size         size );
500 
501   FT_LOCAL( void )
502   TT_Save_Context( TT_ExecContext  exec,
503                    TT_Size         ins );
504 
505   FT_LOCAL( FT_Error )
506   TT_Run_Context( TT_ExecContext  exec );
507 #endif /* TT_USE_BYTECODE_INTERPRETER */
508 
509 
<span class="line-modified">510   /**************************************************************************</span>
<span class="line-modified">511    *</span>
<span class="line-modified">512    * @Function:</span>
<span class="line-modified">513    *   TT_RunIns</span>
<span class="line-modified">514    *</span>
<span class="line-modified">515    * @Description:</span>
<span class="line-modified">516    *   Executes one or more instruction in the execution context.  This</span>
<span class="line-modified">517    *   is the main function of the TrueType opcode interpreter.</span>
<span class="line-modified">518    *</span>
<span class="line-modified">519    * @Input:</span>
<span class="line-modified">520    *   exec ::</span>
<span class="line-modified">521    *     A handle to the target execution context.</span>
<span class="line-modified">522    *</span>
<span class="line-modified">523    * @Return:</span>
<span class="line-modified">524    *   FreeType error code.  0 means success.</span>
<span class="line-modified">525    *</span>
<span class="line-modified">526    * @Note:</span>
<span class="line-modified">527    *   Only the object manager and debugger should call this function.</span>
<span class="line-modified">528    *</span>
<span class="line-modified">529    *   This function is publicly exported because it is directly</span>
<span class="line-modified">530    *   invoked by the TrueType debugger.</span>
<span class="line-added">531    */</span>
532   FT_EXPORT( FT_Error )
533   TT_RunIns( TT_ExecContext  exec );
534 
535 
536 FT_END_HEADER
537 
538 #endif /* TTINTERP_H_ */
539 
540 
541 /* END */
</pre>
</td>
</tr>
</table>
<center><a href="ttinterp.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ttobjs.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>