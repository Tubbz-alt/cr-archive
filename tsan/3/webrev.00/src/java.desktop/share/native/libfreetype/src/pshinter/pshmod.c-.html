<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.desktop/share/native/libfreetype/src/pshinter/pshmod.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /***************************************************************************/
  2 /*                                                                         */
  3 /*  pshmod.c                                                               */
  4 /*                                                                         */
  5 /*    FreeType PostScript hinter module implementation (body).             */
  6 /*                                                                         */
  7 /*  Copyright 2001-2018 by                                                 */
  8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
  9 /*                                                                         */
 10 /*  This file is part of the FreeType project, and may only be used,       */
 11 /*  modified, and distributed under the terms of the FreeType project      */
 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */
 13 /*  this file you indicate that you have read the license and              */
 14 /*  understand and accept it fully.                                        */
 15 /*                                                                         */
 16 /***************************************************************************/
 17 
 18 
 19 #include &lt;ft2build.h&gt;
 20 #include FT_INTERNAL_OBJECTS_H
 21 #include &quot;pshrec.h&quot;
 22 #include &quot;pshalgo.h&quot;
 23 #include &quot;pshpic.h&quot;
 24 
 25 
 26   /* the Postscript Hinter module structure */
 27   typedef struct  PS_Hinter_Module_Rec_
 28   {
 29     FT_ModuleRec          root;
 30     PS_HintsRec           ps_hints;
 31 
 32     PSH_Globals_FuncsRec  globals_funcs;
 33     T1_Hints_FuncsRec     t1_funcs;
 34     T2_Hints_FuncsRec     t2_funcs;
 35 
 36   } PS_Hinter_ModuleRec, *PS_Hinter_Module;
 37 
 38 
 39   /* finalize module */
 40   FT_CALLBACK_DEF( void )
 41   ps_hinter_done( PS_Hinter_Module  module )
 42   {
 43     module-&gt;t1_funcs.hints = NULL;
 44     module-&gt;t2_funcs.hints = NULL;
 45 
 46     ps_hints_done( &amp;module-&gt;ps_hints );
 47   }
 48 
 49 
 50   /* initialize module, create hints recorder and the interface */
 51   FT_CALLBACK_DEF( FT_Error )
 52   ps_hinter_init( PS_Hinter_Module  module )
 53   {
 54     FT_Memory  memory = module-&gt;root.memory;
 55     void*      ph     = &amp;module-&gt;ps_hints;
 56 
 57 
 58     ps_hints_init( &amp;module-&gt;ps_hints, memory );
 59 
 60     psh_globals_funcs_init( &amp;module-&gt;globals_funcs );
 61 
 62     t1_hints_funcs_init( &amp;module-&gt;t1_funcs );
 63     module-&gt;t1_funcs.hints = (T1_Hints)ph;
 64 
 65     t2_hints_funcs_init( &amp;module-&gt;t2_funcs );
 66     module-&gt;t2_funcs.hints = (T2_Hints)ph;
 67 
 68     return 0;
 69   }
 70 
 71 
 72   /* returns global hints interface */
 73   FT_CALLBACK_DEF( PSH_Globals_Funcs )
 74   pshinter_get_globals_funcs( FT_Module  module )
 75   {
 76     return &amp;((PS_Hinter_Module)module)-&gt;globals_funcs;
 77   }
 78 
 79 
 80   /* return Type 1 hints interface */
 81   FT_CALLBACK_DEF( T1_Hints_Funcs )
 82   pshinter_get_t1_funcs( FT_Module  module )
 83   {
 84     return &amp;((PS_Hinter_Module)module)-&gt;t1_funcs;
 85   }
 86 
 87 
 88   /* return Type 2 hints interface */
 89   FT_CALLBACK_DEF( T2_Hints_Funcs )
 90   pshinter_get_t2_funcs( FT_Module  module )
 91   {
 92     return &amp;((PS_Hinter_Module)module)-&gt;t2_funcs;
 93   }
 94 
 95 
 96   FT_DEFINE_PSHINTER_INTERFACE(
 97     pshinter_interface,
 98 
 99     pshinter_get_globals_funcs,
100     pshinter_get_t1_funcs,
101     pshinter_get_t2_funcs
102   )
103 
104 
105   FT_DEFINE_MODULE(
106     pshinter_module_class,
107 
108     0,
109     sizeof ( PS_Hinter_ModuleRec ),
110     &quot;pshinter&quot;,
111     0x10000L,
112     0x20000L,
113 
114     &amp;PSHINTER_INTERFACE_GET,              /* module-specific interface */
115 
116     (FT_Module_Constructor)ps_hinter_init,  /* module_init   */
117     (FT_Module_Destructor) ps_hinter_done,  /* module_done   */
118     (FT_Module_Requester)  NULL             /* get_interface */
119   )
120 
121 /* END */
    </pre>
  </body>
</html>