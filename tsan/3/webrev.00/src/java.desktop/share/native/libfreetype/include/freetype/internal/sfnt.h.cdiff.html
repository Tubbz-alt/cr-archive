<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/include/freetype/internal/sfnt.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="services/svwinfnt.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="t1types.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/internal/sfnt.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,529 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  sfnt.h                                                                 */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    High-level `sfnt&#39; driver interface (specification).                  */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
  
  
  #ifndef SFNT_H_
  #define SFNT_H_
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DRIVER_H
  #include FT_INTERNAL_TRUETYPE_TYPES_H
  
  
  FT_BEGIN_HEADER
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Init_Face_Func                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    First part of the SFNT face object initialization.  This finds     */</span>
<span class="line-modified">!   /*    the face in a SFNT file or collection, and load its format tag in  */</span>
<span class="line-modified">!   /*    face-&gt;format_tag.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    stream     :: The input stream.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face       :: A handle to the target face object.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_index :: The index of the TrueType font, if we are opening a  */</span>
<span class="line-modified">!   /*                  collection, in bits 0-15.  The numbered instance     */</span>
<span class="line-modified">!   /*                  index~+~1 of a GX (sub)font, if applicable, in bits  */</span>
<span class="line-modified">!   /*                  16-30.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_params :: The number of additional parameters.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    params     :: Optional additional parameters.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The stream cursor must be at the font file&#39;s origin.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This function recognizes fonts embedded in a `TrueType             */</span>
<span class="line-modified">!   /*    collection&#39;.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Once the format tag has been validated by the font driver, it      */</span>
<span class="line-modified">!   /*    should then call the TT_Load_Face_Func() callback to read the rest */</span>
<span class="line-modified">!   /*    of the SFNT tables in the object.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Init_Face_Func)( FT_Stream      stream,
                          TT_Face        face,
                          FT_Int         face_index,
                          FT_Int         num_params,
                          FT_Parameter*  params );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_Face_Func                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Second part of the SFNT face object initialization.  This loads    */</span>
<span class="line-modified">!   /*    the common SFNT tables (head, OS/2, maxp, metrics, etc.) in the    */</span>
<span class="line-modified">!   /*    face object.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    stream     :: The input stream.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face       :: A handle to the target face object.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_index :: The index of the TrueType font, if we are opening a  */</span>
<span class="line-modified">!   /*                  collection, in bits 0-15.  The numbered instance     */</span>
<span class="line-modified">!   /*                  index~+~1 of a GX (sub)font, if applicable, in bits  */</span>
<span class="line-modified">!   /*                  16-30.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_params :: The number of additional parameters.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    params     :: Optional additional parameters.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function must be called after TT_Init_Face_Func().            */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_Face_Func)( FT_Stream      stream,
                          TT_Face        face,
                          FT_Int         face_index,
                          FT_Int         num_params,
                          FT_Parameter*  params );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Done_Face_Func                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A callback used to delete the common SFNT data from a face.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to the target face object.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function does NOT destroy the face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*TT_Done_Face_Func)( TT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_Any_Func                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load any font table into client memory.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face   :: The face object to look for.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    tag    :: The tag of table to load.  Use the value 0 if you want   */</span>
<span class="line-modified">!   /*              to access the whole font file, else set this parameter   */</span>
<span class="line-modified">!   /*              to a valid TrueType table tag that you can forge with    */</span>
<span class="line-modified">!   /*              the MAKE_TT_TAG macro.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    offset :: The starting offset in the table (or the file if         */</span>
<span class="line-modified">!   /*              tag == 0).                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    length :: The address of the decision variable:                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                If length == NULL:                                     */</span>
<span class="line-modified">!   /*                  Loads the whole table.  Returns an error if          */</span>
<span class="line-modified">!   /*                  `offset&#39; == 0!                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                If *length == 0:                                       */</span>
<span class="line-modified">!   /*                  Exits immediately; returning the length of the given */</span>
<span class="line-modified">!   /*                  table or of the font file, depending on the value of */</span>
<span class="line-modified">!   /*                  `tag&#39;.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                If *length != 0:                                       */</span>
<span class="line-modified">!   /*                  Loads the next `length&#39; bytes of table or font,      */</span>
<span class="line-modified">!   /*                  starting at offset `offset&#39; (in table or font too).  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    buffer :: The address of target buffer.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    TrueType error code.  0 means success.                             */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_Any_Func)( TT_Face    face,
                         FT_ULong   tag,
                         FT_Long    offset,
                         FT_Byte   *buffer,
                         FT_ULong*  length );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Find_SBit_Image_Func                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Check whether an embedded bitmap (an `sbit&#39;) exists for a given    */</span>
<span class="line-modified">!   /*    glyph, at a given strike.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face          :: The target face object.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_index   :: The glyph index.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    strike_index  :: The current strike index.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    arange        :: The SBit range containing the glyph index.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    astrike       :: The SBit strike containing the glyph index.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    aglyph_offset :: The offset of the glyph data in `EBDT&#39; table.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.  Returns                    */</span>
<span class="line-modified">!   /*    SFNT_Err_Invalid_Argument if no sbit exists for the requested      */</span>
<span class="line-modified">!   /*    glyph.                                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Find_SBit_Image_Func)( TT_Face          face,
                                FT_UInt          glyph_index,
                                FT_ULong         strike_index,
                                TT_SBit_Range   *arange,
                                TT_SBit_Strike  *astrike,
                                FT_ULong        *aglyph_offset );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_SBit_Metrics_Func                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Get the big metrics for a given embedded bitmap.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    stream      :: The input stream.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    range       :: The SBit range containing the glyph.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    big_metrics :: A big SBit metrics structure for the glyph.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The stream cursor must be positioned at the glyph&#39;s offset within  */</span>
<span class="line-modified">!   /*    the `EBDT&#39; table before the call.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If the image format uses variable metrics, the stream cursor is    */</span>
<span class="line-modified">!   /*    positioned just after the metrics header in the `EBDT&#39; table on    */</span>
<span class="line-modified">!   /*    function exit.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_SBit_Metrics_Func)( FT_Stream        stream,
                                  TT_SBit_Range    range,
                                  TT_SBit_Metrics  metrics );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_SBit_Image_Func                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load a given glyph sbit image from the font resource.  This also   */</span>
<span class="line-modified">!   /*    returns its metrics.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face ::                                                            */</span>
<span class="line-modified">!   /*      The target face object.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    strike_index ::                                                    */</span>
<span class="line-modified">!   /*      The strike index.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_index ::                                                     */</span>
<span class="line-modified">!   /*      The current glyph index.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    load_flags ::                                                      */</span>
<span class="line-modified">!   /*      The current load flags.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stream ::                                                          */</span>
<span class="line-modified">!   /*      The input stream.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    amap ::                                                            */</span>
<span class="line-modified">!   /*      The target pixmap.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    ametrics ::                                                        */</span>
<span class="line-modified">!   /*      A big sbit metrics structure for the glyph image.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.  Returns an error if no     */</span>
<span class="line-modified">!   /*    glyph sbit exists for the index.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*  &lt;Note&gt;                                                               */</span>
<span class="line-modified">!   /*    The `map.buffer&#39; field is always freed before the glyph is loaded. */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_SBit_Image_Func)( TT_Face              face,
                                FT_ULong             strike_index,
                                FT_UInt              glyph_index,
                                FT_UInt              load_flags,
                                FT_Stream            stream,
                                FT_Bitmap           *amap,
                                TT_SBit_MetricsRec  *ametrics );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Set_SBit_Strike_Func                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Select an sbit strike for a given size request.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face          :: The target face object.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    req           :: The size request.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    astrike_index :: The index of the sbit strike.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.  Returns an error if no     */</span>
<span class="line-modified">!   /*    sbit strike exists for the selected ppem values.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Set_SBit_Strike_Func)( TT_Face          face,
                                FT_Size_Request  req,
                                FT_ULong*        astrike_index );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_Strike_Metrics_Func                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load the metrics of a given strike.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face          :: The target face object.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    strike_index  :: The strike index.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    metrics       :: the metrics of the strike.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.  Returns an error if no     */</span>
<span class="line-modified">!   /*    such sbit strike exists.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_Strike_Metrics_Func)( TT_Face           face,
                                    FT_ULong          strike_index,
                                    FT_Size_Metrics*  metrics );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Get_PS_Name_Func                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Get the PostScript glyph name of a glyph.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    idx  :: The glyph index.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    PSname :: The address of a string pointer.  Will be NULL in case   */</span>
<span class="line-modified">!   /*              of error, otherwise it is a pointer to the glyph name.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*              You must not modify the returned string!                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Get_PS_Name_Func)( TT_Face      face,
                            FT_UInt      idx,
                            FT_String**  PSname );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_Metrics_Func                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load a metrics table, which is a table with a horizontal and a     */</span>
<span class="line-modified">!   /*    vertical version.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face     :: A handle to the target face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stream   :: The input stream.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertical :: A boolean flag.  If set, load the vertical one.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_Metrics_Func)( TT_Face    face,
                             FT_Stream  stream,
                             FT_Bool    vertical );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Get_Metrics_Func                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load the horizontal or vertical header in a face object.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face     :: A handle to the target face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertical :: A boolean flag.  If set, load vertical metrics.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    gindex   :: The glyph index.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    abearing :: The horizontal (or vertical) bearing.  Set to zero in  */</span>
<span class="line-modified">!   /*                case of error.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    aadvance :: The horizontal (or vertical) advance.  Set to zero in  */</span>
<span class="line-modified">!   /*                case of error.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*TT_Get_Metrics_Func)( TT_Face     face,
                            FT_Bool     vertical,
                            FT_UInt     gindex,
                            FT_Short*   abearing,
                            FT_UShort*  aadvance );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Get_Name_Func                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    From the `name&#39; table, return a given ENGLISH name record in       */</span>
<span class="line-modified">!   /*    ASCII.                                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    nameid   :: The name id of the name record to return.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    name     :: The address of an allocated string pointer.  NULL if   */</span>
<span class="line-modified">!   /*                no name is present.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Get_Name_Func)( TT_Face      face,
                         FT_UShort    nameid,
                         FT_String**  name );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Get_Name_ID_Func                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Search whether an ENGLISH version for a given name ID is in the    */</span>
<span class="line-modified">!   /*    `name&#39; table.                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    nameid   :: The name id of the name record to return.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Out&gt;                                                                 */</span>
<span class="line-modified">!   /*    win      :: If non-negative, an index into the `name&#39; table with   */</span>
<span class="line-modified">!   /*                the corresponding (3,1) or (3,0) Windows entry.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    apple    :: If non-negative, an index into the `name&#39; table with   */</span>
<span class="line-modified">!   /*                the corresponding (1,0) Apple entry.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    1 if there is either a win or apple entry (or both), 0 otheriwse.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Bool
    (*TT_Get_Name_ID_Func)( TT_Face    face,
                            FT_UShort  nameid,
                            FT_Int    *win,
                            FT_Int    *apple );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Load_Table_Func                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load a given TrueType table.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face   :: A handle to the target face object.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stream :: The input stream.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The function uses `face-&gt;goto_table&#39; to seek the stream to the     */</span>
<span class="line-modified">!   /*    start of the table, except while loading the font directory.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Load_Table_Func)( TT_Face    face,
                           FT_Stream  stream );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Free_Table_Func                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Free a given TrueType table.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to the target face object.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*TT_Free_Table_Func)( TT_Face  face );
  
  
    /*
<span class="line-new-header">--- 1,673 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * sfnt.h</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   High-level &#39;sfnt&#39; driver interface (specification).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
  
  
  #ifndef SFNT_H_
  #define SFNT_H_
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DRIVER_H
  #include FT_INTERNAL_TRUETYPE_TYPES_H
<span class="line-added">+ #include FT_INTERNAL_WOFF_TYPES_H</span>
  
  
  FT_BEGIN_HEADER
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Init_Face_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   First part of the SFNT face object initialization.  This finds the</span>
<span class="line-modified">!    *   face in a SFNT file or collection, and load its format tag in</span>
<span class="line-modified">!    *   face-&gt;format_tag.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_index ::</span>
<span class="line-modified">!    *     The index of the TrueType font, if we are opening a collection, in</span>
<span class="line-modified">!    *     bits 0-15.  The numbered instance index~+~1 of a GX (sub)font, if</span>
<span class="line-modified">!    *     applicable, in bits 16-30.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_params ::</span>
<span class="line-modified">!    *     The number of additional parameters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   params ::</span>
<span class="line-modified">!    *     Optional additional parameters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The stream cursor must be at the font file&#39;s origin.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This function recognizes fonts embedded in a &#39;TrueType collection&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Once the format tag has been validated by the font driver, it should</span>
<span class="line-added">+    *   then call the TT_Load_Face_Func() callback to read the rest of the</span>
<span class="line-added">+    *   SFNT tables in the object.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Init_Face_Func)( FT_Stream      stream,
                          TT_Face        face,
                          FT_Int         face_index,
                          FT_Int         num_params,
                          FT_Parameter*  params );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_Face_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Second part of the SFNT face object initialization.  This loads the</span>
<span class="line-modified">!    *   common SFNT tables (head, OS/2, maxp, metrics, etc.) in the face</span>
<span class="line-modified">!    *   object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_index ::</span>
<span class="line-modified">!    *     The index of the TrueType font, if we are opening a collection, in</span>
<span class="line-modified">!    *     bits 0-15.  The numbered instance index~+~1 of a GX (sub)font, if</span>
<span class="line-modified">!    *     applicable, in bits 16-30.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_params ::</span>
<span class="line-modified">!    *     The number of additional parameters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   params ::</span>
<span class="line-modified">!    *     Optional additional parameters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @note:</span>
<span class="line-added">+    *   This function must be called after TT_Init_Face_Func().</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Load_Face_Func)( FT_Stream      stream,
                          TT_Face        face,
                          FT_Int         face_index,
                          FT_Int         num_params,
                          FT_Parameter*  params );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Done_Face_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A callback used to delete the common SFNT data from a face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function does NOT destroy the face object.</span>
<span class="line-added">+    */</span>
    typedef void
    (*TT_Done_Face_Func)( TT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_Any_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load any font table into client memory.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The face object to look for.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   tag ::</span>
<span class="line-modified">!    *     The tag of table to load.  Use the value 0 if you want to access the</span>
<span class="line-modified">!    *     whole font file, else set this parameter to a valid TrueType table</span>
<span class="line-modified">!    *     tag that you can forge with the MAKE_TT_TAG macro.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   offset ::</span>
<span class="line-modified">!    *     The starting offset in the table (or the file if tag == 0).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   length ::</span>
<span class="line-modified">!    *     The address of the decision variable:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If `length == NULL`: Loads the whole table.  Returns an error if</span>
<span class="line-modified">!    *     &#39;offset&#39; == 0!</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If `*length == 0`: Exits immediately; returning the length of the</span>
<span class="line-modified">!    *     given table or of the font file, depending on the value of &#39;tag&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If `*length != 0`: Loads the next &#39;length&#39; bytes of table or font,</span>
<span class="line-modified">!    *     starting at offset &#39;offset&#39; (in table or font too).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   buffer ::</span>
<span class="line-modified">!    *     The address of target buffer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   TrueType error code.  0 means success.</span>
<span class="line-modified">!    */</span>
    typedef FT_Error
    (*TT_Load_Any_Func)( TT_Face    face,
                         FT_ULong   tag,
                         FT_Long    offset,
                         FT_Byte   *buffer,
                         FT_ULong*  length );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Find_SBit_Image_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Check whether an embedded bitmap (an &#39;sbit&#39;) exists for a given glyph,</span>
<span class="line-modified">!    *   at a given strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_index ::</span>
<span class="line-modified">!    *     The glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   strike_index ::</span>
<span class="line-modified">!    *     The current strike index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   arange ::</span>
<span class="line-modified">!    *     The SBit range containing the glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   astrike ::</span>
<span class="line-modified">!    *     The SBit strike containing the glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   aglyph_offset ::</span>
<span class="line-modified">!    *     The offset of the glyph data in &#39;EBDT&#39; table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.  Returns</span>
<span class="line-added">+    *   SFNT_Err_Invalid_Argument if no sbit exists for the requested glyph.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Find_SBit_Image_Func)( TT_Face          face,
                                FT_UInt          glyph_index,
                                FT_ULong         strike_index,
                                TT_SBit_Range   *arange,
                                TT_SBit_Strike  *astrike,
                                FT_ULong        *aglyph_offset );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_SBit_Metrics_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Get the big metrics for a given embedded bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   range ::</span>
<span class="line-modified">!    *     The SBit range containing the glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   big_metrics ::</span>
<span class="line-modified">!    *     A big SBit metrics structure for the glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The stream cursor must be positioned at the glyph&#39;s offset within the</span>
<span class="line-modified">!    *   &#39;EBDT&#39; table before the call.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If the image format uses variable metrics, the stream cursor is</span>
<span class="line-added">+    *   positioned just after the metrics header in the &#39;EBDT&#39; table on</span>
<span class="line-added">+    *   function exit.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Load_SBit_Metrics_Func)( FT_Stream        stream,
                                  TT_SBit_Range    range,
                                  TT_SBit_Metrics  metrics );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_SBit_Image_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load a given glyph sbit image from the font resource.  This also</span>
<span class="line-modified">!    *   returns its metrics.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   strike_index ::</span>
<span class="line-modified">!    *     The strike index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_index ::</span>
<span class="line-modified">!    *     The current glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   load_flags ::</span>
<span class="line-modified">!    *     The current load flags.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   amap ::</span>
<span class="line-modified">!    *     The target pixmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ametrics ::</span>
<span class="line-modified">!    *     A big sbit metrics structure for the glyph image.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.  Returns an error if no glyph</span>
<span class="line-modified">!    *   sbit exists for the index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The `map.buffer` field is always freed before the glyph is loaded.</span>
<span class="line-modified">!    */</span>
    typedef FT_Error
    (*TT_Load_SBit_Image_Func)( TT_Face              face,
                                FT_ULong             strike_index,
                                FT_UInt              glyph_index,
                                FT_UInt              load_flags,
                                FT_Stream            stream,
                                FT_Bitmap           *amap,
                                TT_SBit_MetricsRec  *ametrics );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Set_SBit_Strike_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Select an sbit strike for a given size request.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   req ::</span>
<span class="line-modified">!    *     The size request.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   astrike_index ::</span>
<span class="line-modified">!    *     The index of the sbit strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.  Returns an error if no sbit</span>
<span class="line-added">+    *   strike exists for the selected ppem values.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Set_SBit_Strike_Func)( TT_Face          face,
                                FT_Size_Request  req,
                                FT_ULong*        astrike_index );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_Strike_Metrics_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load the metrics of a given strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   strike_index ::</span>
<span class="line-modified">!    *     The strike index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   metrics ::</span>
<span class="line-modified">!    *     the metrics of the strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.  Returns an error if no such</span>
<span class="line-added">+    *   sbit strike exists.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Load_Strike_Metrics_Func)( TT_Face           face,
                                    FT_ULong          strike_index,
                                    FT_Size_Metrics*  metrics );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Get_PS_Name_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Get the PostScript glyph name of a glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   idx ::</span>
<span class="line-modified">!    *     The glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   PSname ::</span>
<span class="line-modified">!    *     The address of a string pointer.  Will be `NULL` in case of error,</span>
<span class="line-modified">!    *     otherwise it is a pointer to the glyph name.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     You must not modify the returned string!</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Get_PS_Name_Func)( TT_Face      face,
                            FT_UInt      idx,
                            FT_String**  PSname );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_Metrics_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load a metrics table, which is a table with a horizontal and a</span>
<span class="line-modified">!    *   vertical version.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertical ::</span>
<span class="line-modified">!    *     A boolean flag.  If set, load the vertical one.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Load_Metrics_Func)( TT_Face    face,
                             FT_Stream  stream,
                             FT_Bool    vertical );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Get_Metrics_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load the horizontal or vertical header in a face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertical ::</span>
<span class="line-modified">!    *     A boolean flag.  If set, load vertical metrics.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   gindex ::</span>
<span class="line-modified">!    *     The glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   abearing ::</span>
<span class="line-modified">!    *     The horizontal (or vertical) bearing.  Set to zero in case of error.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   aadvance ::</span>
<span class="line-added">+    *     The horizontal (or vertical) advance.  Set to zero in case of error.</span>
<span class="line-added">+    */</span>
    typedef void
    (*TT_Get_Metrics_Func)( TT_Face     face,
                            FT_Bool     vertical,
                            FT_UInt     gindex,
                            FT_Short*   abearing,
                            FT_UShort*  aadvance );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Set_Palette_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load the colors into `face-&gt;palette` for a given palette index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   idx ::</span>
<span class="line-modified">!    *     The palette index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-modified">!    */</span>
<span class="line-modified">!   typedef FT_Error</span>
<span class="line-modified">!   (*TT_Set_Palette_Func)( TT_Face  face,</span>
<span class="line-modified">!                           FT_UInt  idx );</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @functype:</span>
<span class="line-added">+    *   TT_Get_Colr_Layer_Func</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @description:</span>
<span class="line-added">+    *   Iteratively get the color layer data of a given glyph index.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @input:</span>
<span class="line-added">+    *   face ::</span>
<span class="line-added">+    *     The target face object.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   base_glyph ::</span>
<span class="line-added">+    *     The glyph index the colored glyph layers are associated with.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @inout:</span>
<span class="line-added">+    *   iterator ::</span>
<span class="line-added">+    *     An @FT_LayerIterator object.  For the first call you should set</span>
<span class="line-added">+    *     `iterator-&gt;p` to `NULL`.  For all following calls, simply use the</span>
<span class="line-added">+    *     same object again.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @output:</span>
<span class="line-added">+    *   aglyph_index ::</span>
<span class="line-added">+    *     The glyph index of the current layer.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   acolor_index ::</span>
<span class="line-added">+    *     The color index into the font face&#39;s color palette of the current</span>
<span class="line-added">+    *     layer.  The value 0xFFFF is special; it doesn&#39;t reference a palette</span>
<span class="line-added">+    *     entry but indicates that the text foreground color should be used</span>
<span class="line-added">+    *     instead (to be set up by the application outside of FreeType).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   Value~1 if everything is OK.  If there are no more layers (or if there</span>
<span class="line-added">+    *   are no layers at all), value~0 gets returned.  In case of an error,</span>
<span class="line-added">+    *   value~0 is returned also.</span>
<span class="line-added">+    */</span>
<span class="line-added">+   typedef FT_Bool</span>
<span class="line-added">+   (*TT_Get_Colr_Layer_Func)( TT_Face            face,</span>
<span class="line-added">+                              FT_UInt            base_glyph,</span>
<span class="line-added">+                              FT_UInt           *aglyph_index,</span>
<span class="line-added">+                              FT_UInt           *acolor_index,</span>
<span class="line-added">+                              FT_LayerIterator*  iterator );</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @functype:</span>
<span class="line-added">+    *   TT_Blend_Colr_Func</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @description:</span>
<span class="line-added">+    *   Blend the bitmap in `new_glyph` into `base_glyph` using the color</span>
<span class="line-added">+    *   specified by `color_index`.  If `color_index` is 0xFFFF, use</span>
<span class="line-added">+    *   `face-&gt;foreground_color` if `face-&gt;have_foreground_color` is set.</span>
<span class="line-added">+    *   Otherwise check `face-&gt;palette_data.palette_flags`: If present and</span>
<span class="line-added">+    *   @FT_PALETTE_FOR_DARK_BACKGROUND is set, use BGRA value 0xFFFFFFFF</span>
<span class="line-added">+    *   (white opaque).  Otherwise use BGRA value 0x000000FF (black opaque).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @input:</span>
<span class="line-added">+    *   face ::</span>
<span class="line-added">+    *     The target face object.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   color_index ::</span>
<span class="line-added">+    *     Color index from the COLR table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   base_glyph ::</span>
<span class="line-added">+    *     Slot for bitmap to be merged into.  The underlying bitmap may get</span>
<span class="line-added">+    *     reallocated.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   new_glyph ::</span>
<span class="line-added">+    *     Slot to be incooperated into `base_glyph`.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.  Returns an error if</span>
<span class="line-added">+    *   color_index is invalid or reallocation fails.</span>
<span class="line-added">+    */</span>
<span class="line-added">+   typedef FT_Error</span>
<span class="line-added">+   (*TT_Blend_Colr_Func)( TT_Face       face,</span>
<span class="line-added">+                          FT_UInt       color_index,</span>
<span class="line-added">+                          FT_GlyphSlot  base_glyph,</span>
<span class="line-added">+                          FT_GlyphSlot  new_glyph );</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @functype:</span>
<span class="line-added">+    *   TT_Get_Name_Func</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @description:</span>
<span class="line-added">+    *   From the &#39;name&#39; table, return a given ENGLISH name record in ASCII.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @input:</span>
<span class="line-added">+    *   face ::</span>
<span class="line-added">+    *     A handle to the source face object.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   nameid ::</span>
<span class="line-added">+    *     The name id of the name record to return.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @inout:</span>
<span class="line-added">+    *   name ::</span>
<span class="line-added">+    *     The address of an allocated string pointer.  `NULL` if no name is</span>
<span class="line-added">+    *     present.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0 means success.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Get_Name_Func)( TT_Face      face,
                         FT_UShort    nameid,
                         FT_String**  name );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Get_Name_ID_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Search whether an ENGLISH version for a given name ID is in the &#39;name&#39;</span>
<span class="line-modified">!    *   table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   nameid ::</span>
<span class="line-modified">!    *     The name id of the name record to return.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   win ::</span>
<span class="line-modified">!    *     If non-negative, an index into the &#39;name&#39; table with the</span>
<span class="line-modified">!    *     corresponding (3,1) or (3,0) Windows entry.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   apple ::</span>
<span class="line-modified">!    *     If non-negative, an index into the &#39;name&#39; table with the</span>
<span class="line-modified">!    *     corresponding (1,0) Apple entry.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   1 if there is either a win or apple entry (or both), 0 otheriwse.</span>
<span class="line-added">+    */</span>
    typedef FT_Bool
    (*TT_Get_Name_ID_Func)( TT_Face    face,
                            FT_UShort  nameid,
                            FT_Int    *win,
                            FT_Int    *apple );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Load_Table_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load a given TrueType table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The function uses `face-&gt;goto_table` to seek the stream to the start</span>
<span class="line-added">+    *   of the table, except while loading the font directory.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Load_Table_Func)( TT_Face    face,
                           FT_Stream  stream );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Free_Table_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Free a given TrueType table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-added">+    */</span>
    typedef void
    (*TT_Free_Table_Func)( TT_Face  face );
  
  
    /*
</pre>
<hr />
<pre>
<span class="line-old-header">*** 532,35 ***</span>
     *
     * @description:
     *    Return the horizontal kerning value between two glyphs.
     *
     * @input:
<span class="line-modified">!    *    face        :: A handle to the source face object.</span>
<span class="line-modified">!    *    left_glyph  :: The left glyph index.</span>
<span class="line-modified">!    *    right_glyph :: The right glyph index.</span>
     *
     * @return:
     *    The kerning value in font units.
     */
    typedef FT_Int
    (*TT_Face_GetKerningFunc)( TT_Face  face,
                               FT_UInt  left_glyph,
                               FT_UInt  right_glyph );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    SFNT_Interface                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This structure holds pointers to the functions used to load and    */</span>
<span class="line-modified">!   /*    free the basic tables that are required in a `sfnt&#39; font file.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    Check the various xxx_Func() descriptions for details.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  SFNT_Interface_
    {
      TT_Loader_GotoTableFunc      goto_table;
  
      TT_Init_Face_Func            init_face;
<span class="line-new-header">--- 676,40 ---</span>
     *
     * @description:
     *    Return the horizontal kerning value between two glyphs.
     *
     * @input:
<span class="line-modified">!    *    face ::</span>
<span class="line-modified">!    *      A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *    left_glyph ::</span>
<span class="line-added">+    *      The left glyph index.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *    right_glyph ::</span>
<span class="line-added">+    *      The right glyph index.</span>
     *
     * @return:
     *    The kerning value in font units.
     */
    typedef FT_Int
    (*TT_Face_GetKerningFunc)( TT_Face  face,
                               FT_UInt  left_glyph,
                               FT_UInt  right_glyph );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   SFNT_Interface</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This structure holds pointers to the functions used to load and free</span>
<span class="line-modified">!    *   the basic tables that are required in a &#39;sfnt&#39; font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   Check the various xxx_Func() descriptions for details.</span>
<span class="line-modified">!    */</span>
    typedef struct  SFNT_Interface_
    {
      TT_Loader_GotoTableFunc      goto_table;
  
      TT_Init_Face_Func            init_face;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 614,10 ***</span>
<span class="line-new-header">--- 763,18 ---</span>
      TT_Free_Table_Func           free_eblc;
  
      TT_Set_SBit_Strike_Func      set_sbit_strike;
      TT_Load_Strike_Metrics_Func  load_strike_metrics;
  
<span class="line-added">+     TT_Load_Table_Func           load_cpal;</span>
<span class="line-added">+     TT_Load_Table_Func           load_colr;</span>
<span class="line-added">+     TT_Free_Table_Func           free_cpal;</span>
<span class="line-added">+     TT_Free_Table_Func           free_colr;</span>
<span class="line-added">+     TT_Set_Palette_Func          set_palette;</span>
<span class="line-added">+     TT_Get_Colr_Layer_Func       get_colr_layer;</span>
<span class="line-added">+     TT_Blend_Colr_Func           colr_blend;</span>
<span class="line-added">+ </span>
      TT_Get_Metrics_Func          get_metrics;
  
      TT_Get_Name_Func             get_name;
      TT_Get_Name_ID_Func          get_name_id;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 625,11 ***</span>
  
  
    /* transitional */
    typedef SFNT_Interface*   SFNT_Service;
  
<span class="line-removed">- #ifndef FT_CONFIG_OPTION_PIC</span>
  
  #define FT_DEFINE_SFNT_INTERFACE(        \
            class_,                        \
            goto_table_,                   \
            init_face_,                    \
<span class="line-new-header">--- 782,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 657,10 ***</span>
<span class="line-new-header">--- 813,17 ---</span>
            load_hmtx_,                    \
            load_eblc_,                    \
            free_eblc_,                    \
            set_sbit_strike_,              \
            load_strike_metrics_,          \
<span class="line-added">+           load_cpal_,                    \</span>
<span class="line-added">+           load_colr_,                    \</span>
<span class="line-added">+           free_cpal_,                    \</span>
<span class="line-added">+           free_colr_,                    \</span>
<span class="line-added">+           set_palette_,                  \</span>
<span class="line-added">+           get_colr_layer_,               \</span>
<span class="line-added">+           colr_blend_,                   \</span>
            get_metrics_,                  \
            get_name_,                     \
            get_name_id_ )                 \
    static const SFNT_Interface  class_ =  \
    {                                      \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 690,93 ***</span>
      load_hmtx_,                          \
      load_eblc_,                          \
      free_eblc_,                          \
      set_sbit_strike_,                    \
      load_strike_metrics_,                \
      get_metrics_,                        \
      get_name_,                           \
      get_name_id_                         \
    };
  
<span class="line-removed">- #else /* FT_CONFIG_OPTION_PIC */</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_INTERNAL( a, a_ )  \</span>
<span class="line-removed">-           clazz-&gt;a = a_;</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SFNT_INTERFACE(                       \</span>
<span class="line-removed">-           class_,                                       \</span>
<span class="line-removed">-           goto_table_,                                  \</span>
<span class="line-removed">-           init_face_,                                   \</span>
<span class="line-removed">-           load_face_,                                   \</span>
<span class="line-removed">-           done_face_,                                   \</span>
<span class="line-removed">-           get_interface_,                               \</span>
<span class="line-removed">-           load_any_,                                    \</span>
<span class="line-removed">-           load_head_,                                   \</span>
<span class="line-removed">-           load_hhea_,                                   \</span>
<span class="line-removed">-           load_cmap_,                                   \</span>
<span class="line-removed">-           load_maxp_,                                   \</span>
<span class="line-removed">-           load_os2_,                                    \</span>
<span class="line-removed">-           load_post_,                                   \</span>
<span class="line-removed">-           load_name_,                                   \</span>
<span class="line-removed">-           free_name_,                                   \</span>
<span class="line-removed">-           load_kern_,                                   \</span>
<span class="line-removed">-           load_gasp_,                                   \</span>
<span class="line-removed">-           load_pclt_,                                   \</span>
<span class="line-removed">-           load_bhed_,                                   \</span>
<span class="line-removed">-           load_sbit_image_,                             \</span>
<span class="line-removed">-           get_psname_,                                  \</span>
<span class="line-removed">-           free_psnames_,                                \</span>
<span class="line-removed">-           get_kerning_,                                 \</span>
<span class="line-removed">-           load_font_dir_,                               \</span>
<span class="line-removed">-           load_hmtx_,                                   \</span>
<span class="line-removed">-           load_eblc_,                                   \</span>
<span class="line-removed">-           free_eblc_,                                   \</span>
<span class="line-removed">-           set_sbit_strike_,                             \</span>
<span class="line-removed">-           load_strike_metrics_,                         \</span>
<span class="line-removed">-           get_metrics_,                                 \</span>
<span class="line-removed">-           get_name_,                                    \</span>
<span class="line-removed">-           get_name_id_ )                                \</span>
<span class="line-removed">-   void                                                  \</span>
<span class="line-removed">-   FT_Init_Class_ ## class_( FT_Library       library,   \</span>
<span class="line-removed">-                             SFNT_Interface*  clazz )    \</span>
<span class="line-removed">-   {                                                     \</span>
<span class="line-removed">-     FT_UNUSED( library );                               \</span>
<span class="line-removed">-                                                         \</span>
<span class="line-removed">-     clazz-&gt;goto_table          = goto_table_;           \</span>
<span class="line-removed">-     clazz-&gt;init_face           = init_face_;            \</span>
<span class="line-removed">-     clazz-&gt;load_face           = load_face_;            \</span>
<span class="line-removed">-     clazz-&gt;done_face           = done_face_;            \</span>
<span class="line-removed">-     clazz-&gt;get_interface       = get_interface_;        \</span>
<span class="line-removed">-     clazz-&gt;load_any            = load_any_;             \</span>
<span class="line-removed">-     clazz-&gt;load_head           = load_head_;            \</span>
<span class="line-removed">-     clazz-&gt;load_hhea           = load_hhea_;            \</span>
<span class="line-removed">-     clazz-&gt;load_cmap           = load_cmap_;            \</span>
<span class="line-removed">-     clazz-&gt;load_maxp           = load_maxp_;            \</span>
<span class="line-removed">-     clazz-&gt;load_os2            = load_os2_;             \</span>
<span class="line-removed">-     clazz-&gt;load_post           = load_post_;            \</span>
<span class="line-removed">-     clazz-&gt;load_name           = load_name_;            \</span>
<span class="line-removed">-     clazz-&gt;free_name           = free_name_;            \</span>
<span class="line-removed">-     clazz-&gt;load_kern           = load_kern_;            \</span>
<span class="line-removed">-     clazz-&gt;load_gasp           = load_gasp_;            \</span>
<span class="line-removed">-     clazz-&gt;load_pclt           = load_pclt_;            \</span>
<span class="line-removed">-     clazz-&gt;load_bhed           = load_bhed_;            \</span>
<span class="line-removed">-     clazz-&gt;load_sbit_image     = load_sbit_image_;      \</span>
<span class="line-removed">-     clazz-&gt;get_psname          = get_psname_;           \</span>
<span class="line-removed">-     clazz-&gt;free_psnames        = free_psnames_;         \</span>
<span class="line-removed">-     clazz-&gt;get_kerning         = get_kerning_;          \</span>
<span class="line-removed">-     clazz-&gt;load_font_dir       = load_font_dir_;        \</span>
<span class="line-removed">-     clazz-&gt;load_hmtx           = load_hmtx_;            \</span>
<span class="line-removed">-     clazz-&gt;load_eblc           = load_eblc_;            \</span>
<span class="line-removed">-     clazz-&gt;free_eblc           = free_eblc_;            \</span>
<span class="line-removed">-     clazz-&gt;set_sbit_strike     = set_sbit_strike_;      \</span>
<span class="line-removed">-     clazz-&gt;load_strike_metrics = load_strike_metrics_;  \</span>
<span class="line-removed">-     clazz-&gt;get_metrics         = get_metrics_;          \</span>
<span class="line-removed">-     clazz-&gt;get_name            = get_name_;             \</span>
<span class="line-removed">-     clazz-&gt;get_name_id         = get_name_id_;          \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #endif /* FT_CONFIG_OPTION_PIC */</span>
  
  FT_END_HEADER
  
  #endif /* SFNT_H_ */
  
<span class="line-new-header">--- 853,22 ---</span>
      load_hmtx_,                          \
      load_eblc_,                          \
      free_eblc_,                          \
      set_sbit_strike_,                    \
      load_strike_metrics_,                \
<span class="line-added">+     load_cpal_,                          \</span>
<span class="line-added">+     load_colr_,                          \</span>
<span class="line-added">+     free_cpal_,                          \</span>
<span class="line-added">+     free_colr_,                          \</span>
<span class="line-added">+     set_palette_,                        \</span>
<span class="line-added">+     get_colr_layer_,                     \</span>
<span class="line-added">+     colr_blend_,                         \</span>
      get_metrics_,                        \
      get_name_,                           \
      get_name_id_                         \
    };
  
  
  FT_END_HEADER
  
  #endif /* SFNT_H_ */
  
</pre>
<center><a href="services/svwinfnt.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="t1types.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>