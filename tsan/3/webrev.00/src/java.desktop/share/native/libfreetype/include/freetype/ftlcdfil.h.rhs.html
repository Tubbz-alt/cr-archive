<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.desktop/share/native/libfreetype/include/freetype/ftlcdfil.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre><a name="1" id="anc1"></a><span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * ftlcdfil.h</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   FreeType API for color filtering of subpixel bitmap glyphs</span>
<span class="line-modified">  6  *   (specification).</span>
<span class="line-modified">  7  *</span>
<span class="line-modified">  8  * Copyright (C) 2006-2019 by</span>
<span class="line-modified">  9  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified"> 10  *</span>
<span class="line-modified"> 11  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 12  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 13  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 14  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 15  * understand and accept it fully.</span>
<span class="line-modified"> 16  *</span>
<span class="line-modified"> 17  */</span>
 18 
 19 
 20 #ifndef FTLCDFIL_H_
 21 #define FTLCDFIL_H_
 22 
 23 #include &lt;ft2build.h&gt;
 24 #include FT_FREETYPE_H
 25 #include FT_PARAMETER_TAGS_H
 26 
 27 #ifdef FREETYPE_H
 28 #error &quot;freetype.h of FreeType 1 has been loaded!&quot;
 29 #error &quot;Please fix the directory search order for header files&quot;
 30 #error &quot;so that freetype.h of FreeType 2 is found first.&quot;
 31 #endif
 32 
 33 
 34 FT_BEGIN_HEADER
 35 
<a name="2" id="anc2"></a><span class="line-modified"> 36   /**************************************************************************</span>
 37    *
 38    * @section:
<a name="3" id="anc3"></a><span class="line-modified"> 39    *   lcd_rendering</span>
 40    *
 41    * @title:
<a name="4" id="anc4"></a><span class="line-modified"> 42    *   Subpixel Rendering</span>
 43    *
 44    * @abstract:
<a name="5" id="anc5"></a><span class="line-modified"> 45    *   API to control subpixel rendering.</span>
 46    *
 47    * @description:
<a name="6" id="anc6"></a><span class="line-modified"> 48    *   FreeType provides two alternative subpixel rendering technologies.</span>
<span class="line-modified"> 49    *   Should you define `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` in your</span>
<span class="line-modified"> 50    *   `ftoption.h` file, this enables patented ClearType-style rendering.</span>
<span class="line-modified"> 51    *   Otherwise, Harmony LCD rendering is enabled.  These technologies are</span>
<span class="line-modified"> 52    *   controlled differently and API described below, although always</span>
<span class="line-modified"> 53    *   available, performs its function when appropriate method is enabled</span>
<span class="line-added"> 54    *   and does nothing otherwise.</span>
 55    *
 56    *   ClearType-style LCD rendering exploits the color-striped structure of
 57    *   LCD pixels, increasing the available resolution in the direction of
<a name="7" id="anc7"></a><span class="line-modified"> 58    *   the stripe (usually horizontal RGB) by a factor of~3.  Using the</span>
<span class="line-modified"> 59    *   subpixels coverages unfiltered can create severe color fringes</span>
<span class="line-modified"> 60    *   especially when rendering thin features.  Indeed, to produce</span>
<span class="line-modified"> 61    *   black-on-white text, the nearby color subpixels must be dimmed</span>
<span class="line-modified"> 62    *   equally.</span>
<span class="line-modified"> 63    *</span>
<span class="line-modified"> 64    *   A good 5-tap FIR filter should be applied to subpixel coverages</span>
<span class="line-modified"> 65    *   regardless of pixel boundaries and should have these properties:</span>
<span class="line-modified"> 66    *</span>
<span class="line-modified"> 67    *   1. It should be symmetrical, like {~a, b, c, b, a~}, to avoid</span>
<span class="line-modified"> 68    *      any shifts in appearance.</span>
<span class="line-modified"> 69    *</span>
<span class="line-modified"> 70    *   2. It should be color-balanced, meaning a~+ b~=~c, to reduce color</span>
<span class="line-modified"> 71    *      fringes by distributing the computed coverage for one subpixel to</span>
<span class="line-modified"> 72    *      all subpixels equally.</span>
<span class="line-modified"> 73    *</span>
<span class="line-modified"> 74    *   3. It should be normalized, meaning 2a~+ 2b~+ c~=~1.0 to maintain</span>
<span class="line-modified"> 75    *      overall brightness.</span>
<span class="line-modified"> 76    *</span>
<span class="line-modified"> 77    *   Boxy 3-tap filter {0, 1/3, 1/3, 1/3, 0} is sharper but is less</span>
<span class="line-modified"> 78    *   forgiving of non-ideal gamma curves of a screen (and viewing angles),</span>
<span class="line-modified"> 79    *   beveled filters are fuzzier but more tolerant.</span>
<span class="line-modified"> 80    *</span>
<span class="line-modified"> 81    *   Use the @FT_Library_SetLcdFilter or @FT_Library_SetLcdFilterWeights</span>
<span class="line-modified"> 82    *   API to specify a low-pass filter, which is then applied to</span>
<span class="line-modified"> 83    *   subpixel-rendered bitmaps generated through @FT_Render_Glyph.</span>
<span class="line-modified"> 84    *</span>
<span class="line-modified"> 85    *   Harmony LCD rendering is suitable to panels with any regular subpixel</span>
<span class="line-modified"> 86    *   structure, not just monitors with 3 color striped subpixels, as long</span>
<span class="line-modified"> 87    *   as the color subpixels have fixed positions relative to the pixel</span>
<span class="line-modified"> 88    *   center.  In this case, each color channel is then rendered separately</span>
<span class="line-modified"> 89    *   after shifting the outline opposite to the subpixel shift so that the</span>
<span class="line-modified"> 90    *   coverage maps are aligned.  This method is immune to color fringes</span>
<span class="line-modified"> 91    *   because the shifts do not change integral coverage.</span>
<span class="line-modified"> 92    *</span>
<span class="line-modified"> 93    *   The subpixel geometry must be specified by xy-coordinates for each</span>
<span class="line-modified"> 94    *   subpixel. By convention they may come in the RGB order: {{-1/3, 0},</span>
<span class="line-modified"> 95    *   {0, 0}, {1/3, 0}} for standard RGB striped panel or {{-1/6, 1/4},</span>
<span class="line-modified"> 96    *   {-1/6, -1/4}, {1/3, 0}} for a certain PenTile panel.</span>
<span class="line-modified"> 97    *</span>
<span class="line-modified"> 98    *   Use the @FT_Library_SetLcdGeometry API to specify subpixel positions.</span>
<span class="line-modified"> 99    *   If one follows the RGB order convention, the same order applies to the</span>
<span class="line-modified">100    *   resulting @FT_PIXEL_MODE_LCD and @FT_PIXEL_MODE_LCD_V bitmaps.  Note,</span>
<span class="line-modified">101    *   however, that the coordinate frame for the latter must be rotated</span>
<span class="line-modified">102    *   clockwise.  Harmony with default LCD geometry is equivalent to</span>
<span class="line-modified">103    *   ClearType with light filter.</span>
<span class="line-modified">104    *</span>
<span class="line-modified">105    *   As a result of ClearType filtering or Harmony rendering, the</span>
<span class="line-modified">106    *   dimensions of LCD bitmaps can be either wider or taller than the</span>
<span class="line-modified">107    *   dimensions of the corresponding outline with regard to the pixel grid.</span>
<span class="line-modified">108    *   For example, for @FT_RENDER_MODE_LCD, the filter adds 2~subpixels to</span>
<span class="line-modified">109    *   the left, and 2~subpixels to the right.  The bitmap offset values are</span>
<span class="line-modified">110    *   adjusted accordingly, so clients shouldn&#39;t need to modify their layout</span>
<span class="line-modified">111    *   and glyph positioning code when enabling the filter.</span>
<span class="line-modified">112    *</span>
<span class="line-modified">113    *   The ClearType and Harmony rendering is applicable to glyph bitmaps</span>
<span class="line-modified">114    *   rendered through @FT_Render_Glyph, @FT_Load_Glyph, @FT_Load_Char, and</span>
<span class="line-modified">115    *   @FT_Glyph_To_Bitmap, when @FT_RENDER_MODE_LCD or @FT_RENDER_MODE_LCD_V</span>
<span class="line-modified">116    *   is specified.  This API does not control @FT_Outline_Render and</span>
<span class="line-modified">117    *   @FT_Outline_Get_Bitmap.</span>
<span class="line-modified">118    *</span>
<span class="line-modified">119    *   The described algorithms can completely remove color artefacts when</span>
<span class="line-modified">120    *   combined with gamma-corrected alpha blending in linear space.  Each of</span>
<span class="line-modified">121    *   the 3~alpha values (subpixels) must by independently used to blend one</span>
<span class="line-modified">122    *   color channel.  That is, red alpha blends the red channel of the text</span>
<span class="line-modified">123    *   color with the red channel of the background pixel.</span>








124    */
125 
126 
<a name="8" id="anc8"></a><span class="line-modified">127   /**************************************************************************</span>
128    *
129    * @enum:
130    *   FT_LcdFilter
131    *
132    * @description:
133    *   A list of values to identify various types of LCD filters.
134    *
135    * @values:
136    *   FT_LCD_FILTER_NONE ::
137    *     Do not perform filtering.  When used with subpixel rendering, this
138    *     results in sometimes severe color fringes.
139    *
140    *   FT_LCD_FILTER_DEFAULT ::
<a name="9" id="anc9"></a><span class="line-modified">141    *     This is a beveled, normalized, and color-balanced five-tap filter</span>
<span class="line-modified">142    *     with weights of [0x08 0x4D 0x56 0x4D 0x08] in 1/256th units.</span>







143    *
144    *   FT_LCD_FILTER_LIGHT ::
<a name="10" id="anc10"></a><span class="line-modified">145    *     this is a boxy, normalized, and color-balanced three-tap filter with</span>
<span class="line-modified">146    *     weights of [0x00 0x55 0x56 0x55 0x00] in 1/256th units.</span>







147    *
148    *   FT_LCD_FILTER_LEGACY ::
<a name="11" id="anc11"></a><span class="line-added">149    *   FT_LCD_FILTER_LEGACY1 ::</span>
150    *     This filter corresponds to the original libXft color filter.  It
151    *     provides high contrast output but can exhibit really bad color
152    *     fringes if glyphs are not extremely well hinted to the pixel grid.
<a name="12" id="anc12"></a>


153    *     This filter is only provided for comparison purposes, and might be
<a name="13" id="anc13"></a><span class="line-modified">154    *     disabled or stay unsupported in the future. The second value is</span>
<span class="line-modified">155    *     provided for compatibility with FontConfig, which historically used</span>
<span class="line-modified">156    *     different enumeration, sometimes incorrectly forwarded to FreeType.</span>






157    *
158    * @since:
<a name="14" id="anc14"></a><span class="line-modified">159    *   2.3.0 (`FT_LCD_FILTER_LEGACY1` since 2.6.2)</span>
160    */
161   typedef enum  FT_LcdFilter_
162   {
163     FT_LCD_FILTER_NONE    = 0,
164     FT_LCD_FILTER_DEFAULT = 1,
165     FT_LCD_FILTER_LIGHT   = 2,
166     FT_LCD_FILTER_LEGACY1 = 3,
167     FT_LCD_FILTER_LEGACY  = 16,
168 
169     FT_LCD_FILTER_MAX   /* do not remove */
170 
171   } FT_LcdFilter;
172 
173 
174   /**************************************************************************
175    *
<a name="15" id="anc15"></a><span class="line-modified">176    * @function:</span>
177    *   FT_Library_SetLcdFilter
178    *
179    * @description:
180    *   This function is used to apply color filtering to LCD decimated
181    *   bitmaps, like the ones used when calling @FT_Render_Glyph with
182    *   @FT_RENDER_MODE_LCD or @FT_RENDER_MODE_LCD_V.
183    *
184    * @input:
185    *   library ::
186    *     A handle to the target library instance.
187    *
188    *   filter ::
189    *     The filter type.
190    *
191    *     You can use @FT_LCD_FILTER_NONE here to disable this feature, or
<a name="16" id="anc16"></a><span class="line-modified">192    *     @FT_LCD_FILTER_DEFAULT to use a default filter that should work well</span>
<span class="line-modified">193    *     on most LCD screens.</span>
194    *
195    * @return:
196    *   FreeType error code.  0~means success.
197    *
198    * @note:
199    *   This feature is always disabled by default.  Clients must make an
<a name="17" id="anc17"></a><span class="line-modified">200    *   explicit call to this function with a `filter` value other than</span>
201    *   @FT_LCD_FILTER_NONE in order to enable it.
202    *
<a name="18" id="anc18"></a><span class="line-modified">203    *   Due to **PATENTS** covering subpixel rendering, this function doesn&#39;t</span>
<span class="line-modified">204    *   do anything except returning `FT_Err_Unimplemented_Feature` if the</span>
<span class="line-modified">205    *   configuration macro `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` is not</span>
206    *   defined in your build of the library, which should correspond to all
207    *   default builds of FreeType.
208    *
209    * @since:
210    *   2.3.0
211    */
212   FT_EXPORT( FT_Error )
213   FT_Library_SetLcdFilter( FT_Library    library,
214                            FT_LcdFilter  filter );
215 
216 
217   /**************************************************************************
218    *
<a name="19" id="anc19"></a><span class="line-modified">219    * @function:</span>
220    *   FT_Library_SetLcdFilterWeights
221    *
222    * @description:
223    *   This function can be used to enable LCD filter with custom weights,
224    *   instead of using presets in @FT_Library_SetLcdFilter.
225    *
226    * @input:
227    *   library ::
228    *     A handle to the target library instance.
229    *
230    *   weights ::
231    *     A pointer to an array; the function copies the first five bytes and
<a name="20" id="anc20"></a><span class="line-modified">232    *     uses them to specify the filter weights in 1/256th units.</span>
233    *
234    * @return:
235    *   FreeType error code.  0~means success.
236    *
237    * @note:
<a name="21" id="anc21"></a><span class="line-modified">238    *   Due to **PATENTS** covering subpixel rendering, this function doesn&#39;t</span>
<span class="line-modified">239    *   do anything except returning `FT_Err_Unimplemented_Feature` if the</span>
<span class="line-modified">240    *   configuration macro `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` is not</span>
241    *   defined in your build of the library, which should correspond to all
242    *   default builds of FreeType.
243    *
244    *   LCD filter weights can also be set per face using @FT_Face_Properties
245    *   with @FT_PARAM_TAG_LCD_FILTER_WEIGHTS.
246    *
247    * @since:
248    *   2.4.0
249    */
250   FT_EXPORT( FT_Error )
251   FT_Library_SetLcdFilterWeights( FT_Library      library,
252                                   unsigned char  *weights );
253 
254 
<a name="22" id="anc22"></a><span class="line-modified">255   /**************************************************************************</span>
<span class="line-added">256    *</span>
257    * @type:
258    *   FT_LcdFiveTapFilter
259    *
260    * @description:
261    *   A typedef for passing the five LCD filter weights to
262    *   @FT_Face_Properties within an @FT_Parameter structure.
263    *
264    * @since:
265    *   2.8
266    *
267    */
268 #define FT_LCD_FILTER_FIVE_TAPS  5
269 
270   typedef FT_Byte  FT_LcdFiveTapFilter[FT_LCD_FILTER_FIVE_TAPS];
271 
272 
<a name="23" id="anc23"></a><span class="line-added">273   /**************************************************************************</span>
<span class="line-added">274    *</span>
<span class="line-added">275    * @function:</span>
<span class="line-added">276    *   FT_Library_SetLcdGeometry</span>
<span class="line-added">277    *</span>
<span class="line-added">278    * @description:</span>
<span class="line-added">279    *   This function can be used to modify default positions of color</span>
<span class="line-added">280    *   subpixels, which controls Harmony LCD rendering.</span>
<span class="line-added">281    *</span>
<span class="line-added">282    * @input:</span>
<span class="line-added">283    *   library ::</span>
<span class="line-added">284    *     A handle to the target library instance.</span>
<span class="line-added">285    *</span>
<span class="line-added">286    *   sub ::</span>
<span class="line-added">287    *     A pointer to an array of 3 vectors in 26.6 fractional pixel format;</span>
<span class="line-added">288    *     the function modifies the default values, see the note below.</span>
<span class="line-added">289    *</span>
<span class="line-added">290    * @return:</span>
<span class="line-added">291    *   FreeType error code.  0~means success.</span>
<span class="line-added">292    *</span>
<span class="line-added">293    * @note:</span>
<span class="line-added">294    *   Subpixel geometry examples:</span>
<span class="line-added">295    *</span>
<span class="line-added">296    *   - {{-21, 0}, {0, 0}, {21, 0}} is the default, corresponding to 3 color</span>
<span class="line-added">297    *   stripes shifted by a third of a pixel. This could be an RGB panel.</span>
<span class="line-added">298    *</span>
<span class="line-added">299    *   - {{21, 0}, {0, 0}, {-21, 0}} looks the same as the default but can</span>
<span class="line-added">300    *   specify a BGR panel instead, while keeping the bitmap in the same</span>
<span class="line-added">301    *   RGB888 format.</span>
<span class="line-added">302    *</span>
<span class="line-added">303    *   - {{0, 21}, {0, 0}, {0, -21}} is the vertical RGB, but the bitmap</span>
<span class="line-added">304    *   stays RGB888 as a result.</span>
<span class="line-added">305    *</span>
<span class="line-added">306    *   - {{-11, 16}, {-11, -16}, {22, 0}} is a certain PenTile arrangement.</span>
<span class="line-added">307    *</span>
<span class="line-added">308    *   This function does nothing and returns `FT_Err_Unimplemented_Feature`</span>
<span class="line-added">309    *   in the context of ClearType-style subpixel rendering when</span>
<span class="line-added">310    *   `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` is defined in your build of the</span>
<span class="line-added">311    *   library.</span>
<span class="line-added">312    *</span>
<span class="line-added">313    * @since:</span>
<span class="line-added">314    *   2.10.0</span>
<span class="line-added">315    */</span>
<span class="line-added">316   FT_EXPORT( FT_Error )</span>
<span class="line-added">317   FT_Library_SetLcdGeometry( FT_Library  library,</span>
<span class="line-added">318                              FT_Vector   sub[3] );</span>
<span class="line-added">319 </span>
320   /* */
321 
322 
323 FT_END_HEADER
324 
325 #endif /* FTLCDFIL_H_ */
326 
327 
328 /* END */
<a name="24" id="anc24"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="24" type="hidden" />
</body>
</html>