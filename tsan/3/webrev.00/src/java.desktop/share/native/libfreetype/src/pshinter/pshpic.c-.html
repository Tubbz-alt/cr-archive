<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.desktop/share/native/libfreetype/src/pshinter/pshpic.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /***************************************************************************/
 2 /*                                                                         */
 3 /*  pshpic.c                                                               */
 4 /*                                                                         */
 5 /*    The FreeType position independent code services for pshinter module. */
 6 /*                                                                         */
 7 /*  Copyright 2009-2018 by                                                 */
 8 /*  Oran Agra and Mickey Gabel.                                            */
 9 /*                                                                         */
10 /*  This file is part of the FreeType project, and may only be used,       */
11 /*  modified, and distributed under the terms of the FreeType project      */
12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */
13 /*  this file you indicate that you have read the license and              */
14 /*  understand and accept it fully.                                        */
15 /*                                                                         */
16 /***************************************************************************/
17 
18 
19 #include &lt;ft2build.h&gt;
20 #include FT_FREETYPE_H
21 #include FT_INTERNAL_OBJECTS_H
22 #include &quot;pshpic.h&quot;
23 #include &quot;pshnterr.h&quot;
24 
25 
26 #ifdef FT_CONFIG_OPTION_PIC
27 
28   /* forward declaration of PIC init functions from pshmod.c */
29   void
30   FT_Init_Class_pshinter_interface( FT_Library           library,
31                                     PSHinter_Interface*  clazz );
32 
33   void
34   pshinter_module_class_pic_free( FT_Library  library )
35   {
36     FT_PIC_Container*  pic_container = &amp;library-&gt;pic_container;
37     FT_Memory          memory        = library-&gt;memory;
38 
39 
40     if ( pic_container-&gt;pshinter )
41     {
42       FT_FREE( pic_container-&gt;pshinter );
43       pic_container-&gt;pshinter = NULL;
44     }
45   }
46 
47 
48   FT_Error
49   pshinter_module_class_pic_init( FT_Library  library )
50   {
51     FT_PIC_Container*  pic_container = &amp;library-&gt;pic_container;
52     FT_Error           error         = FT_Err_Ok;
53     PSHinterPIC*       container     = NULL;
54     FT_Memory          memory        = library-&gt;memory;
55 
56 
57     /* allocate pointer, clear and set global container pointer */
58     if ( FT_ALLOC( container, sizeof ( *container ) ) )
59       return error;
60     FT_MEM_SET( container, 0, sizeof ( *container ) );
61     pic_container-&gt;pshinter = container;
62 
63     /* add call to initialization function when you add new scripts */
64     FT_Init_Class_pshinter_interface(
65       library, &amp;container-&gt;pshinter_interface );
66 
67     if ( error )
68       pshinter_module_class_pic_free( library );
69 
70     return error;
71   }
72 
73 #endif /* FT_CONFIG_OPTION_PIC */
74 
75 
76 /* END */
    </pre>
  </body>
</html>