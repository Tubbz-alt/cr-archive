<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/include/freetype/freetype.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="config/ftstdlib.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftadvanc.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/freetype.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,21 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  freetype.h                                                             */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    FreeType high-level API and common types (specification only).       */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
  
  
  #ifndef FREETYPE_H_
  #define FREETYPE_H_
  
<span class="line-new-header">--- 1,21 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * freetype.h</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   FreeType high-level API and common types (specification only).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
  
  
  #ifndef FREETYPE_H_
  #define FREETYPE_H_
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 37,60 ***</span>
  
  FT_BEGIN_HEADER
  
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    header_inclusion                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    FreeType&#39;s header inclusion scheme                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    How client applications should include FreeType header files.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    To be as flexible as possible (and for historical reasons),        */</span>
<span class="line-modified">!   /*    FreeType uses a very special inclusion scheme to load header       */</span>
<span class="line-modified">!   /*    files, for example                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      #include &lt;ft2build.h&gt;                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      #include FT_FREETYPE_H                                           */</span>
<span class="line-modified">!   /*      #include FT_OUTLINE_H                                            */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A compiler and its preprocessor only needs an include path to find */</span>
<span class="line-modified">!   /*    the file `ft2build.h&#39;; the exact locations and names of the other  */</span>
<span class="line-modified">!   /*    FreeType header files are hidden by preprocessor macro names,      */</span>
<span class="line-modified">!   /*    loaded by `ft2build.h&#39;.  The API documentation always gives the    */</span>
<span class="line-modified">!   /*    header macro name needed for a particular function.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-removed">-   /*************************************************************************/</span>
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    user_allocation                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    User allocation                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    How client applications should allocate FreeType data structures.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    FreeType assumes that structures allocated by the user and passed  */</span>
<span class="line-modified">!   /*    as arguments are zeroed out except for the actual data.  In other  */</span>
<span class="line-modified">!   /*    words, it is recommended to use `calloc&#39; (or variants of it)       */</span>
<span class="line-modified">!   /*    instead of `malloc&#39; for allocation.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
  
    /*************************************************************************/
    /*************************************************************************/
<span class="line-new-header">--- 37,59 ---</span>
  
  FT_BEGIN_HEADER
  
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   header_inclusion</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   FreeType&#39;s header inclusion scheme</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   How client applications should include FreeType header files.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   To be as flexible as possible (and for historical reasons), FreeType</span>
<span class="line-modified">!    *   uses a very special inclusion scheme to load header files, for example</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     #include &lt;ft2build.h&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     #include FT_FREETYPE_H</span>
<span class="line-modified">!    *     #include FT_OUTLINE_H</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A compiler and its preprocessor only needs an include path to find the</span>
<span class="line-modified">!    *   file `ft2build.h`; the exact locations and names of the other FreeType</span>
<span class="line-modified">!    *   header files are hidden by @header_file_macros, loaded by</span>
<span class="line-modified">!    *   `ft2build.h`.  The API documentation always gives the header macro</span>
<span class="line-modified">!    *   name needed for a particular function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   user_allocation</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   User allocation</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   How client applications should allocate FreeType data structures.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   FreeType assumes that structures allocated by the user and passed as</span>
<span class="line-modified">!    *   arguments are zeroed out except for the actual data.  In other words,</span>
<span class="line-modified">!    *   it is recommended to use `calloc` (or variants of it) instead of</span>
<span class="line-modified">!    *   `malloc` for allocation.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
  
    /*************************************************************************/
    /*************************************************************************/
</pre>
<hr />
<pre>
<span class="line-old-header">*** 99,223 ***</span>
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    base_interface                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    Base Interface                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    The FreeType~2 base font interface.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This section describes the most important public high-level API    */</span>
<span class="line-modified">!   /*    functions of FreeType~2.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_Library                                                         */</span>
<span class="line-modified">!   /*    FT_Face                                                            */</span>
<span class="line-modified">!   /*    FT_Size                                                            */</span>
<span class="line-modified">!   /*    FT_GlyphSlot                                                       */</span>
<span class="line-modified">!   /*    FT_CharMap                                                         */</span>
<span class="line-modified">!   /*    FT_Encoding                                                        */</span>
<span class="line-modified">!   /*    FT_ENC_TAG                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FaceRec                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_SCALABLE                                              */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_FIXED_SIZES                                           */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_FIXED_WIDTH                                           */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_HORIZONTAL                                            */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_VERTICAL                                              */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_COLOR                                                 */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_SFNT                                                  */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_CID_KEYED                                             */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_TRICKY                                                */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_KERNING                                               */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_MULTIPLE_MASTERS                                      */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_VARIATION                                             */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_GLYPH_NAMES                                           */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_EXTERNAL_STREAM                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_HINTER                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_HAS_HORIZONTAL                                                  */</span>
<span class="line-modified">!   /*    FT_HAS_VERTICAL                                                    */</span>
<span class="line-modified">!   /*    FT_HAS_KERNING                                                     */</span>
<span class="line-modified">!   /*    FT_HAS_FIXED_SIZES                                                 */</span>
<span class="line-modified">!   /*    FT_HAS_GLYPH_NAMES                                                 */</span>
<span class="line-modified">!   /*    FT_HAS_COLOR                                                       */</span>
<span class="line-modified">!   /*    FT_HAS_MULTIPLE_MASTERS                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_IS_SFNT                                                         */</span>
<span class="line-modified">!   /*    FT_IS_SCALABLE                                                     */</span>
<span class="line-modified">!   /*    FT_IS_FIXED_WIDTH                                                  */</span>
<span class="line-modified">!   /*    FT_IS_CID_KEYED                                                    */</span>
<span class="line-modified">!   /*    FT_IS_TRICKY                                                       */</span>
<span class="line-modified">!   /*    FT_IS_NAMED_INSTANCE                                               */</span>
<span class="line-modified">!   /*    FT_IS_VARIATION                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_STYLE_FLAG_BOLD                                                 */</span>
<span class="line-modified">!   /*    FT_STYLE_FLAG_ITALIC                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_SizeRec                                                         */</span>
<span class="line-modified">!   /*    FT_Size_Metrics                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_GlyphSlotRec                                                    */</span>
<span class="line-modified">!   /*    FT_Glyph_Metrics                                                   */</span>
<span class="line-modified">!   /*    FT_SubGlyph                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Bitmap_Size                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Init_FreeType                                                   */</span>
<span class="line-modified">!   /*    FT_Done_FreeType                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_New_Face                                                        */</span>
<span class="line-modified">!   /*    FT_Done_Face                                                       */</span>
<span class="line-modified">!   /*    FT_Reference_Face                                                  */</span>
<span class="line-modified">!   /*    FT_New_Memory_Face                                                 */</span>
<span class="line-modified">!   /*    FT_Face_Properties                                                 */</span>
<span class="line-modified">!   /*    FT_Open_Face                                                       */</span>
<span class="line-modified">!   /*    FT_Open_Args                                                       */</span>
<span class="line-modified">!   /*    FT_Parameter                                                       */</span>
<span class="line-modified">!   /*    FT_Attach_File                                                     */</span>
<span class="line-modified">!   /*    FT_Attach_Stream                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Set_Char_Size                                                   */</span>
<span class="line-modified">!   /*    FT_Set_Pixel_Sizes                                                 */</span>
<span class="line-modified">!   /*    FT_Request_Size                                                    */</span>
<span class="line-modified">!   /*    FT_Select_Size                                                     */</span>
<span class="line-modified">!   /*    FT_Size_Request_Type                                               */</span>
<span class="line-modified">!   /*    FT_Size_RequestRec                                                 */</span>
<span class="line-modified">!   /*    FT_Size_Request                                                    */</span>
<span class="line-modified">!   /*    FT_Set_Transform                                                   */</span>
<span class="line-modified">!   /*    FT_Load_Glyph                                                      */</span>
<span class="line-modified">!   /*    FT_Get_Char_Index                                                  */</span>
<span class="line-modified">!   /*    FT_Get_First_Char                                                  */</span>
<span class="line-modified">!   /*    FT_Get_Next_Char                                                   */</span>
<span class="line-modified">!   /*    FT_Get_Name_Index                                                  */</span>
<span class="line-modified">!   /*    FT_Load_Char                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OPEN_MEMORY                                                     */</span>
<span class="line-modified">!   /*    FT_OPEN_STREAM                                                     */</span>
<span class="line-modified">!   /*    FT_OPEN_PATHNAME                                                   */</span>
<span class="line-modified">!   /*    FT_OPEN_DRIVER                                                     */</span>
<span class="line-modified">!   /*    FT_OPEN_PARAMS                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_LOAD_DEFAULT                                                    */</span>
<span class="line-modified">!   /*    FT_LOAD_RENDER                                                     */</span>
<span class="line-modified">!   /*    FT_LOAD_MONOCHROME                                                 */</span>
<span class="line-modified">!   /*    FT_LOAD_LINEAR_DESIGN                                              */</span>
<span class="line-modified">!   /*    FT_LOAD_NO_SCALE                                                   */</span>
<span class="line-modified">!   /*    FT_LOAD_NO_HINTING                                                 */</span>
<span class="line-modified">!   /*    FT_LOAD_NO_BITMAP                                                  */</span>
<span class="line-modified">!   /*    FT_LOAD_NO_AUTOHINT                                                */</span>
<span class="line-modified">!   /*    FT_LOAD_COLOR                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_LOAD_VERTICAL_LAYOUT                                            */</span>
<span class="line-modified">!   /*    FT_LOAD_IGNORE_TRANSFORM                                           */</span>
<span class="line-modified">!   /*    FT_LOAD_FORCE_AUTOHINT                                             */</span>
<span class="line-modified">!   /*    FT_LOAD_NO_RECURSE                                                 */</span>
<span class="line-modified">!   /*    FT_LOAD_PEDANTIC                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_NORMAL                                              */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_LIGHT                                               */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_MONO                                                */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_LCD                                                 */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_LCD_V                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_MODE                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Render_Glyph                                                    */</span>
<span class="line-modified">!   /*    FT_Render_Mode                                                     */</span>
<span class="line-modified">!   /*    FT_Get_Kerning                                                     */</span>
<span class="line-modified">!   /*    FT_Kerning_Mode                                                    */</span>
<span class="line-modified">!   /*    FT_Get_Track_Kerning                                               */</span>
<span class="line-modified">!   /*    FT_Get_Glyph_Name                                                  */</span>
<span class="line-modified">!   /*    FT_Get_Postscript_Name                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_CharMapRec                                                      */</span>
<span class="line-modified">!   /*    FT_Select_Charmap                                                  */</span>
<span class="line-modified">!   /*    FT_Set_Charmap                                                     */</span>
<span class="line-modified">!   /*    FT_Get_Charmap_Index                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Get_FSType_Flags                                                */</span>
<span class="line-modified">!   /*    FT_Get_SubGlyph_Info                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Face_Internal                                                   */</span>
<span class="line-modified">!   /*    FT_Size_Internal                                                   */</span>
<span class="line-modified">!   /*    FT_Slot_Internal                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_XXX                                                   */</span>
<span class="line-modified">!   /*    FT_STYLE_FLAG_XXX                                                  */</span>
<span class="line-modified">!   /*    FT_OPEN_XXX                                                        */</span>
<span class="line-modified">!   /*    FT_LOAD_XXX                                                        */</span>
<span class="line-modified">!   /*    FT_LOAD_TARGET_XXX                                                 */</span>
<span class="line-modified">!   /*    FT_SUBGLYPH_FLAG_XXX                                               */</span>
<span class="line-modified">!   /*    FT_FSTYPE_XXX                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_HAS_FAST_GLYPHS                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Glyph_Metrics                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure to model the metrics of a single glyph.  The values    */</span>
<span class="line-modified">!   /*    are expressed in 26.6 fractional pixel format; if the flag         */</span>
<span class="line-modified">!   /*    @FT_LOAD_NO_SCALE has been used while loading the glyph, values    */</span>
<span class="line-modified">!   /*    are expressed in font units instead.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    width ::                                                           */</span>
<span class="line-modified">!   /*      The glyph&#39;s width.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    height ::                                                          */</span>
<span class="line-modified">!   /*      The glyph&#39;s height.                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiBearingX ::                                                    */</span>
<span class="line-modified">!   /*      Left side bearing for horizontal layout.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiBearingY ::                                                    */</span>
<span class="line-modified">!   /*      Top side bearing for horizontal layout.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiAdvance ::                                                     */</span>
<span class="line-modified">!   /*      Advance width for horizontal layout.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertBearingX ::                                                    */</span>
<span class="line-modified">!   /*      Left side bearing for vertical layout.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertBearingY ::                                                    */</span>
<span class="line-modified">!   /*      Top side bearing for vertical layout.  Larger positive values    */</span>
<span class="line-modified">!   /*      mean further below the vertical glyph origin.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertAdvance ::                                                     */</span>
<span class="line-modified">!   /*      Advance height for vertical layout.  Positive values mean the    */</span>
<span class="line-modified">!   /*      glyph has a positive advance downward.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    If not disabled with @FT_LOAD_NO_HINTING, the values represent     */</span>
<span class="line-modified">!   /*    dimensions of the hinted glyph (in case hinting is applicable).    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Stroking a glyph with an outside border does not increase          */</span>
<span class="line-modified">!   /*    `horiAdvance&#39; or `vertAdvance&#39;; you have to manually adjust these  */</span>
<span class="line-modified">!   /*    values to account for the added width and height.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FreeType doesn&#39;t use the `VORG&#39; table data for CFF fonts because   */</span>
<span class="line-modified">!   /*    it doesn&#39;t have an interface to quickly retrieve the glyph height. */</span>
<span class="line-modified">!   /*    The y~coordinate of the vertical origin can be simply computed as  */</span>
<span class="line-modified">!   /*    `vertBearingY + height&#39; after loading a glyph.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Glyph_Metrics_
    {
      FT_Pos  width;
      FT_Pos  height;
  
<span class="line-new-header">--- 98,223 ---</span>
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   base_interface</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   Base Interface</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   The FreeType~2 base font interface.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This section describes the most important public high-level API</span>
<span class="line-modified">!    *   functions of FreeType~2.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @order:</span>
<span class="line-modified">!    *   FT_Library</span>
<span class="line-modified">!    *   FT_Face</span>
<span class="line-modified">!    *   FT_Size</span>
<span class="line-modified">!    *   FT_GlyphSlot</span>
<span class="line-modified">!    *   FT_CharMap</span>
<span class="line-modified">!    *   FT_Encoding</span>
<span class="line-modified">!    *   FT_ENC_TAG</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FaceRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_SCALABLE</span>
<span class="line-modified">!    *   FT_FACE_FLAG_FIXED_SIZES</span>
<span class="line-modified">!    *   FT_FACE_FLAG_FIXED_WIDTH</span>
<span class="line-modified">!    *   FT_FACE_FLAG_HORIZONTAL</span>
<span class="line-modified">!    *   FT_FACE_FLAG_VERTICAL</span>
<span class="line-modified">!    *   FT_FACE_FLAG_COLOR</span>
<span class="line-modified">!    *   FT_FACE_FLAG_SFNT</span>
<span class="line-modified">!    *   FT_FACE_FLAG_CID_KEYED</span>
<span class="line-modified">!    *   FT_FACE_FLAG_TRICKY</span>
<span class="line-modified">!    *   FT_FACE_FLAG_KERNING</span>
<span class="line-modified">!    *   FT_FACE_FLAG_MULTIPLE_MASTERS</span>
<span class="line-modified">!    *   FT_FACE_FLAG_VARIATION</span>
<span class="line-modified">!    *   FT_FACE_FLAG_GLYPH_NAMES</span>
<span class="line-modified">!    *   FT_FACE_FLAG_EXTERNAL_STREAM</span>
<span class="line-modified">!    *   FT_FACE_FLAG_HINTER</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_HAS_HORIZONTAL</span>
<span class="line-modified">!    *   FT_HAS_VERTICAL</span>
<span class="line-modified">!    *   FT_HAS_KERNING</span>
<span class="line-modified">!    *   FT_HAS_FIXED_SIZES</span>
<span class="line-modified">!    *   FT_HAS_GLYPH_NAMES</span>
<span class="line-modified">!    *   FT_HAS_COLOR</span>
<span class="line-modified">!    *   FT_HAS_MULTIPLE_MASTERS</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_IS_SFNT</span>
<span class="line-modified">!    *   FT_IS_SCALABLE</span>
<span class="line-modified">!    *   FT_IS_FIXED_WIDTH</span>
<span class="line-modified">!    *   FT_IS_CID_KEYED</span>
<span class="line-modified">!    *   FT_IS_TRICKY</span>
<span class="line-modified">!    *   FT_IS_NAMED_INSTANCE</span>
<span class="line-modified">!    *   FT_IS_VARIATION</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_STYLE_FLAG_BOLD</span>
<span class="line-modified">!    *   FT_STYLE_FLAG_ITALIC</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_SizeRec</span>
<span class="line-modified">!    *   FT_Size_Metrics</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_GlyphSlotRec</span>
<span class="line-modified">!    *   FT_Glyph_Metrics</span>
<span class="line-modified">!    *   FT_SubGlyph</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Bitmap_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Init_FreeType</span>
<span class="line-modified">!    *   FT_Done_FreeType</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_New_Face</span>
<span class="line-modified">!    *   FT_Done_Face</span>
<span class="line-modified">!    *   FT_Reference_Face</span>
<span class="line-modified">!    *   FT_New_Memory_Face</span>
<span class="line-modified">!    *   FT_Face_Properties</span>
<span class="line-modified">!    *   FT_Open_Face</span>
<span class="line-modified">!    *   FT_Open_Args</span>
<span class="line-modified">!    *   FT_Parameter</span>
<span class="line-modified">!    *   FT_Attach_File</span>
<span class="line-modified">!    *   FT_Attach_Stream</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Set_Char_Size</span>
<span class="line-modified">!    *   FT_Set_Pixel_Sizes</span>
<span class="line-modified">!    *   FT_Request_Size</span>
<span class="line-modified">!    *   FT_Select_Size</span>
<span class="line-modified">!    *   FT_Size_Request_Type</span>
<span class="line-modified">!    *   FT_Size_RequestRec</span>
<span class="line-modified">!    *   FT_Size_Request</span>
<span class="line-modified">!    *   FT_Set_Transform</span>
<span class="line-modified">!    *   FT_Load_Glyph</span>
<span class="line-modified">!    *   FT_Get_Char_Index</span>
<span class="line-modified">!    *   FT_Get_First_Char</span>
<span class="line-modified">!    *   FT_Get_Next_Char</span>
<span class="line-modified">!    *   FT_Get_Name_Index</span>
<span class="line-modified">!    *   FT_Load_Char</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OPEN_MEMORY</span>
<span class="line-modified">!    *   FT_OPEN_STREAM</span>
<span class="line-modified">!    *   FT_OPEN_PATHNAME</span>
<span class="line-modified">!    *   FT_OPEN_DRIVER</span>
<span class="line-modified">!    *   FT_OPEN_PARAMS</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_LOAD_DEFAULT</span>
<span class="line-modified">!    *   FT_LOAD_RENDER</span>
<span class="line-modified">!    *   FT_LOAD_MONOCHROME</span>
<span class="line-modified">!    *   FT_LOAD_LINEAR_DESIGN</span>
<span class="line-modified">!    *   FT_LOAD_NO_SCALE</span>
<span class="line-modified">!    *   FT_LOAD_NO_HINTING</span>
<span class="line-modified">!    *   FT_LOAD_NO_BITMAP</span>
<span class="line-modified">!    *   FT_LOAD_NO_AUTOHINT</span>
<span class="line-modified">!    *   FT_LOAD_COLOR</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_LOAD_VERTICAL_LAYOUT</span>
<span class="line-modified">!    *   FT_LOAD_IGNORE_TRANSFORM</span>
<span class="line-modified">!    *   FT_LOAD_FORCE_AUTOHINT</span>
<span class="line-modified">!    *   FT_LOAD_NO_RECURSE</span>
<span class="line-modified">!    *   FT_LOAD_PEDANTIC</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_NORMAL</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_LIGHT</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_MONO</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_LCD</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_LCD_V</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_MODE</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Render_Glyph</span>
<span class="line-modified">!    *   FT_Render_Mode</span>
<span class="line-modified">!    *   FT_Get_Kerning</span>
<span class="line-modified">!    *   FT_Kerning_Mode</span>
<span class="line-modified">!    *   FT_Get_Track_Kerning</span>
<span class="line-modified">!    *   FT_Get_Glyph_Name</span>
<span class="line-modified">!    *   FT_Get_Postscript_Name</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_CharMapRec</span>
<span class="line-modified">!    *   FT_Select_Charmap</span>
<span class="line-modified">!    *   FT_Set_Charmap</span>
<span class="line-modified">!    *   FT_Get_Charmap_Index</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Get_FSType_Flags</span>
<span class="line-modified">!    *   FT_Get_SubGlyph_Info</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Face_Internal</span>
<span class="line-modified">!    *   FT_Size_Internal</span>
<span class="line-modified">!    *   FT_Slot_Internal</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_XXX</span>
<span class="line-modified">!    *   FT_STYLE_FLAG_XXX</span>
<span class="line-modified">!    *   FT_OPEN_XXX</span>
<span class="line-modified">!    *   FT_LOAD_XXX</span>
<span class="line-modified">!    *   FT_LOAD_TARGET_XXX</span>
<span class="line-modified">!    *   FT_SUBGLYPH_FLAG_XXX</span>
<span class="line-modified">!    *   FT_FSTYPE_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_HAS_FAST_GLYPHS</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Glyph_Metrics</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure to model the metrics of a single glyph.  The values are</span>
<span class="line-modified">!    *   expressed in 26.6 fractional pixel format; if the flag</span>
<span class="line-modified">!    *   @FT_LOAD_NO_SCALE has been used while loading the glyph, values are</span>
<span class="line-modified">!    *   expressed in font units instead.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   width ::</span>
<span class="line-modified">!    *     The glyph&#39;s width.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     The glyph&#39;s height.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiBearingX ::</span>
<span class="line-modified">!    *     Left side bearing for horizontal layout.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiBearingY ::</span>
<span class="line-modified">!    *     Top side bearing for horizontal layout.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiAdvance ::</span>
<span class="line-modified">!    *     Advance width for horizontal layout.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertBearingX ::</span>
<span class="line-modified">!    *     Left side bearing for vertical layout.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertBearingY ::</span>
<span class="line-modified">!    *     Top side bearing for vertical layout.  Larger positive values mean</span>
<span class="line-modified">!    *     further below the vertical glyph origin.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertAdvance ::</span>
<span class="line-modified">!    *     Advance height for vertical layout.  Positive values mean the glyph</span>
<span class="line-modified">!    *     has a positive advance downward.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   If not disabled with @FT_LOAD_NO_HINTING, the values represent</span>
<span class="line-modified">!    *   dimensions of the hinted glyph (in case hinting is applicable).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Stroking a glyph with an outside border does not increase</span>
<span class="line-modified">!    *   `horiAdvance` or `vertAdvance`; you have to manually adjust these</span>
<span class="line-modified">!    *   values to account for the added width and height.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FreeType doesn&#39;t use the &#39;VORG&#39; table data for CFF fonts because it</span>
<span class="line-modified">!    *   doesn&#39;t have an interface to quickly retrieve the glyph height.  The</span>
<span class="line-modified">!    *   y~coordinate of the vertical origin can be simply computed as</span>
<span class="line-modified">!    *   `vertBearingY + height` after loading a glyph.</span>
<span class="line-modified">!    */</span>
    typedef struct  FT_Glyph_Metrics_
    {
      FT_Pos  width;
      FT_Pos  height;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 328,48 ***</span>
      FT_Pos  vertAdvance;
  
    } FT_Glyph_Metrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Bitmap_Size                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This structure models the metrics of a bitmap strike (i.e., a set  */</span>
<span class="line-modified">!   /*    of glyphs for a given point size and resolution) in a bitmap font. */</span>
<span class="line-modified">!   /*    It is used for the `available_sizes&#39; field of @FT_Face.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    height :: The vertical distance, in pixels, between two            */</span>
<span class="line-modified">!   /*              consecutive baselines.  It is always positive.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    width  :: The average width, in pixels, of all glyphs in the       */</span>
<span class="line-modified">!   /*              strike.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    size   :: The nominal size of the strike in 26.6 fractional        */</span>
<span class="line-modified">!   /*              points.  This field is not very useful.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    x_ppem :: The horizontal ppem (nominal width) in 26.6 fractional   */</span>
<span class="line-modified">!   /*              pixels.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    y_ppem :: The vertical ppem (nominal height) in 26.6 fractional    */</span>
<span class="line-modified">!   /*              pixels.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Windows FNT:                                                       */</span>
<span class="line-modified">!   /*      The nominal size given in a FNT font is not reliable.  If the    */</span>
<span class="line-modified">!   /*      driver finds it incorrect, it sets `size&#39; to some calculated     */</span>
<span class="line-modified">!   /*      values, and `x_ppem&#39; and `y_ppem&#39; to the pixel width and height  */</span>
<span class="line-modified">!   /*      given in the font, respectively.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    TrueType embedded bitmaps:                                         */</span>
<span class="line-modified">!   /*      `size&#39;, `width&#39;, and `height&#39; values are not contained in the    */</span>
<span class="line-modified">!   /*      bitmap strike itself.  They are computed from the global font    */</span>
<span class="line-modified">!   /*      parameters.                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Bitmap_Size_
    {
      FT_Short  height;
      FT_Short  width;
  
<span class="line-new-header">--- 327,49 ---</span>
      FT_Pos  vertAdvance;
  
    } FT_Glyph_Metrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Bitmap_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This structure models the metrics of a bitmap strike (i.e., a set of</span>
<span class="line-modified">!    *   glyphs for a given point size and resolution) in a bitmap font.  It is</span>
<span class="line-modified">!    *   used for the `available_sizes` field of @FT_Face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     The vertical distance, in pixels, between two consecutive baselines.</span>
<span class="line-modified">!    *     It is always positive.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   width ::</span>
<span class="line-modified">!    *     The average width, in pixels, of all glyphs in the strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   size ::</span>
<span class="line-modified">!    *     The nominal size of the strike in 26.6 fractional points.  This</span>
<span class="line-modified">!    *     field is not very useful.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   x_ppem ::</span>
<span class="line-modified">!    *     The horizontal ppem (nominal width) in 26.6 fractional pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   y_ppem ::</span>
<span class="line-modified">!    *     The vertical ppem (nominal height) in 26.6 fractional pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Windows FNT:</span>
<span class="line-modified">!    *     The nominal size given in a FNT font is not reliable.  If the driver</span>
<span class="line-modified">!    *     finds it incorrect, it sets `size` to some calculated values, and</span>
<span class="line-modified">!    *     `x_ppem` and `y_ppem` to the pixel width and height given in the</span>
<span class="line-modified">!    *     font, respectively.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   TrueType embedded bitmaps:</span>
<span class="line-modified">!    *     `size`, `width`, and `height` values are not contained in the bitmap</span>
<span class="line-modified">!    *     strike itself.  They are computed from the global font parameters.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Bitmap_Size_
    {
      FT_Short  height;
      FT_Short  width;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 387,229 ***</span>
    /*                     O B J E C T   C L A S S E S                       */
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Library                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a FreeType library instance.  Each `library&#39; is        */</span>
<span class="line-modified">!   /*    completely independent from the others; it is the `root&#39; of a set  */</span>
<span class="line-modified">!   /*    of objects like fonts, faces, sizes, etc.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    It also embeds a memory manager (see @FT_Memory), as well as a     */</span>
<span class="line-modified">!   /*    scan-line converter object (see @FT_Raster).                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    In multi-threaded applications it is easiest to use one            */</span>
<span class="line-modified">!   /*    `FT_Library&#39; object per thread.  In case this is too cumbersome,   */</span>
<span class="line-modified">!   /*    a single `FT_Library&#39; object across threads is possible also       */</span>
<span class="line-modified">!   /*    (since FreeType version 2.5.6), as long as a mutex lock is used    */</span>
<span class="line-modified">!   /*    around @FT_New_Face and @FT_Done_Face.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Library objects are normally created by @FT_Init_FreeType, and     */</span>
<span class="line-modified">!   /*    destroyed with @FT_Done_FreeType.  If you need reference-counting  */</span>
<span class="line-modified">!   /*    (cf. @FT_Reference_Library), use @FT_New_Library and               */</span>
<span class="line-removed">-   /*    @FT_Done_Library.                                                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct FT_LibraryRec_  *FT_Library;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    module_management                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Module                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a given FreeType module object.  A module can be a     */</span>
<span class="line-modified">!   /*    font driver, a renderer, or anything else that provides services   */</span>
<span class="line-modified">!   /*    to the former.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_ModuleRec_*  FT_Module;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Driver                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a given FreeType font driver object.  A font driver    */</span>
<span class="line-modified">!   /*    is a module capable of creating faces from font files.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_DriverRec_*  FT_Driver;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Renderer                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a given FreeType renderer.  A renderer is a module in  */</span>
<span class="line-modified">!   /*    charge of converting a glyph&#39;s outline image to a bitmap.  It      */</span>
<span class="line-modified">!   /*    supports a single glyph image format, and one or more target       */</span>
<span class="line-modified">!   /*    surface depths.                                                    */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct FT_RendererRec_*  FT_Renderer;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    base_interface                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Face                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a typographic face object.  A face object models a     */</span>
<span class="line-modified">!   /*    given typeface, in a given style.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    A face object also owns a single @FT_GlyphSlot object, as well     */</span>
<span class="line-modified">!   /*    as one or more @FT_Size objects.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Use @FT_New_Face or @FT_Open_Face to create a new face object from */</span>
<span class="line-modified">!   /*    a given filepath or a custom input stream.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Use @FT_Done_Face to destroy it (along with its slot and sizes).   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    An `FT_Face&#39; object can only be safely used from one thread at a   */</span>
<span class="line-modified">!   /*    time.  Similarly, creation and destruction of `FT_Face&#39; with the   */</span>
<span class="line-modified">!   /*    same @FT_Library object can only be done from one thread at a      */</span>
<span class="line-modified">!   /*    time.  On the other hand, functions like @FT_Load_Glyph and its    */</span>
<span class="line-modified">!   /*    siblings are thread-safe and do not need the lock to be held as    */</span>
<span class="line-modified">!   /*    long as the same `FT_Face&#39; object is not used from multiple        */</span>
<span class="line-modified">!   /*    threads at the same time.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified">!   /*    See @FT_FaceRec for the publicly accessible fields of a given face */</span>
<span class="line-modified">!   /*    object.                                                            */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct FT_FaceRec_*  FT_Face;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Size                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to an object that models a face scaled to a given         */</span>
<span class="line-modified">!   /*    character size.                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    An @FT_Face has one _active_ @FT_Size object that is used by       */</span>
<span class="line-modified">!   /*    functions like @FT_Load_Glyph to determine the scaling             */</span>
<span class="line-modified">!   /*    transformation that in turn is used to load and hint glyphs and    */</span>
<span class="line-modified">!   /*    metrics.                                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    You can use @FT_Set_Char_Size, @FT_Set_Pixel_Sizes,                */</span>
<span class="line-modified">!   /*    @FT_Request_Size or even @FT_Select_Size to change the content     */</span>
<span class="line-modified">!   /*    (i.e., the scaling values) of the active @FT_Size.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    You can use @FT_New_Size to create additional size objects for a   */</span>
<span class="line-modified">!   /*    given @FT_Face, but they won&#39;t be used by other functions until    */</span>
<span class="line-modified">!   /*    you activate it through @FT_Activate_Size.  Only one size can be   */</span>
<span class="line-modified">!   /*    activated at any given time per face.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified">!   /*    See @FT_SizeRec for the publicly accessible fields of a given size */</span>
<span class="line-modified">!   /*    object.                                                            */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct FT_SizeRec_*  FT_Size;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_GlyphSlot                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a given `glyph slot&#39;.  A slot is a container that can  */</span>
<span class="line-modified">!   /*    hold any of the glyphs contained in its parent face.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    In other words, each time you call @FT_Load_Glyph or               */</span>
<span class="line-modified">!   /*    @FT_Load_Char, the slot&#39;s content is erased by the new glyph data, */</span>
<span class="line-modified">!   /*    i.e., the glyph&#39;s metrics, its image (bitmap or outline), and      */</span>
<span class="line-modified">!   /*    other control information.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified">!   /*    See @FT_GlyphSlotRec for the publicly accessible glyph fields.     */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct FT_GlyphSlotRec_*  FT_GlyphSlot;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_CharMap                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a character map (usually abbreviated to `charmap&#39;).  A */</span>
<span class="line-modified">!   /*    charmap is used to translate character codes in a given encoding   */</span>
<span class="line-modified">!   /*    into glyph indexes for its parent&#39;s face.  Some font formats may   */</span>
<span class="line-modified">!   /*    provide several charmaps per font.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Each face object owns zero or more charmaps, but only one of them  */</span>
<span class="line-modified">!   /*    can be `active&#39;, providing the data used by @FT_Get_Char_Index or  */</span>
<span class="line-modified">!   /*    @FT_Load_Char.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The list of available charmaps in a face is available through the  */</span>
<span class="line-modified">!   /*    `face-&gt;num_charmaps&#39; and `face-&gt;charmaps&#39; fields of @FT_FaceRec.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The currently active charmap is available as `face-&gt;charmap&#39;.      */</span>
<span class="line-modified">!   /*    You should call @FT_Set_Charmap to change it.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    When a new face is created (either through @FT_New_Face or         */</span>
<span class="line-modified">!   /*    @FT_Open_Face), the library looks for a Unicode charmap within     */</span>
<span class="line-modified">!   /*    the list and automatically activates it.  If there is no Unicode   */</span>
<span class="line-modified">!   /*    charmap, FreeType doesn&#39;t set an `active&#39; charmap.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified">!   /*    See @FT_CharMapRec for the publicly accessible fields of a given   */</span>
<span class="line-modified">!   /*    character map.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_CharMapRec_*  FT_CharMap;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Macro&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_ENC_TAG                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This macro converts four-letter tags into an unsigned long.  It is */</span>
<span class="line-modified">!   /*    used to define `encoding&#39; identifiers (see @FT_Encoding).          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Since many 16-bit compilers don&#39;t like 32-bit enumerations, you    */</span>
<span class="line-modified">!   /*    should redefine this macro in case of problems to something like   */</span>
<span class="line-modified">!   /*    this:                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      #define FT_ENC_TAG( value, a, b, c, d )  value                   */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    to get a simple enumeration without assigning special numbers.     */</span>
<span class="line-removed">-   /*                                                                       */</span>
  
  #ifndef FT_ENC_TAG
  #define FT_ENC_TAG( value, a, b, c, d )         \
            value = ( ( (FT_UInt32)(a) &lt;&lt; 24 ) |  \
                      ( (FT_UInt32)(b) &lt;&lt; 16 ) |  \
<span class="line-new-header">--- 387,222 ---</span>
    /*                     O B J E C T   C L A S S E S                       */
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Library</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a FreeType library instance.  Each &#39;library&#39; is completely</span>
<span class="line-modified">!    *   independent from the others; it is the &#39;root&#39; of a set of objects like</span>
<span class="line-modified">!    *   fonts, faces, sizes, etc.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   It also embeds a memory manager (see @FT_Memory), as well as a</span>
<span class="line-modified">!    *   scan-line converter object (see @FT_Raster).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   [Since 2.5.6] In multi-threaded applications it is easiest to use one</span>
<span class="line-modified">!    *   `FT_Library` object per thread.  In case this is too cumbersome, a</span>
<span class="line-modified">!    *   single `FT_Library` object across threads is possible also, as long as</span>
<span class="line-modified">!    *   a mutex lock is used around @FT_New_Face and @FT_Done_Face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Library objects are normally created by @FT_Init_FreeType, and</span>
<span class="line-modified">!    *   destroyed with @FT_Done_FreeType.  If you need reference-counting</span>
<span class="line-modified">!    *   (cf. @FT_Reference_Library), use @FT_New_Library and @FT_Done_Library.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_LibraryRec_  *FT_Library;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   module_management</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Module</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a given FreeType module object.  A module can be a font</span>
<span class="line-modified">!    *   driver, a renderer, or anything else that provides services to the</span>
<span class="line-modified">!    *   former.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_ModuleRec_*  FT_Module;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Driver</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a given FreeType font driver object.  A font driver is a</span>
<span class="line-modified">!    *   module capable of creating faces from font files.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_DriverRec_*  FT_Driver;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Renderer</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a given FreeType renderer.  A renderer is a module in</span>
<span class="line-modified">!    *   charge of converting a glyph&#39;s outline image to a bitmap.  It supports</span>
<span class="line-modified">!    *   a single glyph image format, and one or more target surface depths.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_RendererRec_*  FT_Renderer;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   base_interface</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a typographic face object.  A face object models a given</span>
<span class="line-modified">!    *   typeface, in a given style.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   A face object also owns a single @FT_GlyphSlot object, as well as one</span>
<span class="line-modified">!    *   or more @FT_Size objects.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Use @FT_New_Face or @FT_Open_Face to create a new face object from a</span>
<span class="line-modified">!    *   given filepath or a custom input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Use @FT_Done_Face to destroy it (along with its slot and sizes).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   An `FT_Face` object can only be safely used from one thread at a time.</span>
<span class="line-modified">!    *   Similarly, creation and destruction of `FT_Face` with the same</span>
<span class="line-modified">!    *   @FT_Library object can only be done from one thread at a time.  On the</span>
<span class="line-modified">!    *   other hand, functions like @FT_Load_Glyph and its siblings are</span>
<span class="line-modified">!    *   thread-safe and do not need the lock to be held as long as the same</span>
<span class="line-modified">!    *   `FT_Face` object is not used from multiple threads at the same time.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @also:</span>
<span class="line-modified">!    *   See @FT_FaceRec for the publicly accessible fields of a given face</span>
<span class="line-modified">!    *   object.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_FaceRec_*  FT_Face;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to an object that models a face scaled to a given character</span>
<span class="line-modified">!    *   size.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   An @FT_Face has one _active_ @FT_Size object that is used by functions</span>
<span class="line-modified">!    *   like @FT_Load_Glyph to determine the scaling transformation that in</span>
<span class="line-modified">!    *   turn is used to load and hint glyphs and metrics.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   You can use @FT_Set_Char_Size, @FT_Set_Pixel_Sizes, @FT_Request_Size</span>
<span class="line-modified">!    *   or even @FT_Select_Size to change the content (i.e., the scaling</span>
<span class="line-modified">!    *   values) of the active @FT_Size.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   You can use @FT_New_Size to create additional size objects for a given</span>
<span class="line-modified">!    *   @FT_Face, but they won&#39;t be used by other functions until you activate</span>
<span class="line-modified">!    *   it through @FT_Activate_Size.  Only one size can be activated at any</span>
<span class="line-modified">!    *   given time per face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @also:</span>
<span class="line-modified">!    *   See @FT_SizeRec for the publicly accessible fields of a given size</span>
<span class="line-modified">!    *   object.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_SizeRec_*  FT_Size;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_GlyphSlot</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a given &#39;glyph slot&#39;.  A slot is a container that can hold</span>
<span class="line-modified">!    *   any of the glyphs contained in its parent face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   In other words, each time you call @FT_Load_Glyph or @FT_Load_Char,</span>
<span class="line-modified">!    *   the slot&#39;s content is erased by the new glyph data, i.e., the glyph&#39;s</span>
<span class="line-modified">!    *   metrics, its image (bitmap or outline), and other control information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @also:</span>
<span class="line-modified">!    *   See @FT_GlyphSlotRec for the publicly accessible glyph fields.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_GlyphSlotRec_*  FT_GlyphSlot;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_CharMap</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a character map (usually abbreviated to &#39;charmap&#39;).  A</span>
<span class="line-modified">!    *   charmap is used to translate character codes in a given encoding into</span>
<span class="line-modified">!    *   glyph indexes for its parent&#39;s face.  Some font formats may provide</span>
<span class="line-modified">!    *   several charmaps per font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Each face object owns zero or more charmaps, but only one of them can</span>
<span class="line-modified">!    *   be &#39;active&#39;, providing the data used by @FT_Get_Char_Index or</span>
<span class="line-modified">!    *   @FT_Load_Char.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The list of available charmaps in a face is available through the</span>
<span class="line-modified">!    *   `face-&gt;num_charmaps` and `face-&gt;charmaps` fields of @FT_FaceRec.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The currently active charmap is available as `face-&gt;charmap`.  You</span>
<span class="line-modified">!    *   should call @FT_Set_Charmap to change it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   When a new face is created (either through @FT_New_Face or</span>
<span class="line-modified">!    *   @FT_Open_Face), the library looks for a Unicode charmap within the</span>
<span class="line-modified">!    *   list and automatically activates it.  If there is no Unicode charmap,</span>
<span class="line-modified">!    *   FreeType doesn&#39;t set an &#39;active&#39; charmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @also:</span>
<span class="line-modified">!    *   See @FT_CharMapRec for the publicly accessible fields of a given</span>
<span class="line-modified">!    *   character map.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_CharMapRec_*  FT_CharMap;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @macro:</span>
<span class="line-modified">!    *   FT_ENC_TAG</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This macro converts four-letter tags into an unsigned long.  It is</span>
<span class="line-modified">!    *   used to define &#39;encoding&#39; identifiers (see @FT_Encoding).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Since many 16-bit compilers don&#39;t like 32-bit enumerations, you should</span>
<span class="line-modified">!    *   redefine this macro in case of problems to something like this:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     #define FT_ENC_TAG( value, a, b, c, d )  value</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   to get a simple enumeration without assigning special numbers.</span>
<span class="line-modified">!    */</span>
  
  #ifndef FT_ENC_TAG
  #define FT_ENC_TAG( value, a, b, c, d )         \
            value = ( ( (FT_UInt32)(a) &lt;&lt; 24 ) |  \
                      ( (FT_UInt32)(b) &lt;&lt; 16 ) |  \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 617,154 ***</span>
                        (FT_UInt32)(d)         )
  
  #endif /* FT_ENC_TAG */
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Encoding                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An enumeration to specify character sets supported by charmaps.    */</span>
<span class="line-modified">!   /*    Used in the @FT_Select_Charmap API function.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Despite the name, this enumeration lists specific character        */</span>
<span class="line-modified">!   /*    repertories (i.e., charsets), and not text encoding methods (e.g., */</span>
<span class="line-modified">!   /*    UTF-8, UTF-16, etc.).                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Other encodings might be defined in the future.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_ENCODING_NONE ::                                                */</span>
<span class="line-modified">!   /*      The encoding value~0 is reserved.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_UNICODE ::                                             */</span>
<span class="line-modified">!   /*      The Unicode character set.  This value covers all versions of    */</span>
<span class="line-modified">!   /*      the Unicode repertoire, including ASCII and Latin-1.  Most fonts */</span>
<span class="line-modified">!   /*      include a Unicode charmap, but not all of them.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      For example, if you want to access Unicode value U+1F028 (and    */</span>
<span class="line-modified">!   /*      the font contains it), use value 0x1F028 as the input value for  */</span>
<span class="line-modified">!   /*      @FT_Get_Char_Index.                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_MS_SYMBOL ::                                           */</span>
<span class="line-modified">!   /*      Microsoft Symbol encoding, used to encode mathematical symbols   */</span>
<span class="line-modified">!   /*      and wingdings.  For more information, see                        */</span>
<span class="line-modified">!   /*      `https://www.microsoft.com/typography/otspec/recom.htm&#39;,         */</span>
<span class="line-modified">!   /*      `http://www.kostis.net/charsets/symbol.htm&#39;, and                 */</span>
<span class="line-modified">!   /*      `http://www.kostis.net/charsets/wingding.htm&#39;.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      This encoding uses character codes from the PUA (Private Unicode */</span>
<span class="line-modified">!   /*      Area) in the range U+F020-U+F0FF.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_SJIS ::                                                */</span>
<span class="line-modified">!   /*      Shift JIS encoding for Japanese.  More info at                   */</span>
<span class="line-modified">!   /*      `https://en.wikipedia.org/wiki/Shift_JIS&#39;.  See note on          */</span>
<span class="line-modified">!   /*      multi-byte encodings below.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_PRC ::                                                 */</span>
<span class="line-modified">!   /*      Corresponds to encoding systems mainly for Simplified Chinese as */</span>
<span class="line-modified">!   /*      used in People&#39;s Republic of China (PRC).  The encoding layout   */</span>
<span class="line-modified">!   /*      is based on GB~2312 and its supersets GBK and GB~18030.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_BIG5 ::                                                */</span>
<span class="line-modified">!   /*      Corresponds to an encoding system for Traditional Chinese as     */</span>
<span class="line-modified">!   /*      used in Taiwan and Hong Kong.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_WANSUNG ::                                             */</span>
<span class="line-modified">!   /*      Corresponds to the Korean encoding system known as Extended      */</span>
<span class="line-modified">!   /*      Wansung (MS Windows code page 949).                              */</span>
<span class="line-modified">!   /*      For more information see                                         */</span>
<span class="line-modified">!   /*      `https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/bestfit949.txt&#39;. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_JOHAB ::                                               */</span>
<span class="line-modified">!   /*      The Korean standard character set (KS~C 5601-1992), which        */</span>
<span class="line-modified">!   /*      corresponds to MS Windows code page 1361.  This character set    */</span>
<span class="line-modified">!   /*      includes all possible Hangul character combinations.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_ADOBE_LATIN_1 ::                                       */</span>
<span class="line-modified">!   /*      Corresponds to a Latin-1 encoding as defined in a Type~1         */</span>
<span class="line-modified">!   /*      PostScript font.  It is limited to 256 character codes.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_ADOBE_STANDARD ::                                      */</span>
<span class="line-modified">!   /*      Adobe Standard encoding, as found in Type~1, CFF, and            */</span>
<span class="line-modified">!   /*      OpenType/CFF fonts.  It is limited to 256 character codes.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_ADOBE_EXPERT ::                                        */</span>
<span class="line-modified">!   /*      Adobe Expert encoding, as found in Type~1, CFF, and OpenType/CFF */</span>
<span class="line-modified">!   /*      fonts.  It is limited to 256 character codes.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_ADOBE_CUSTOM ::                                        */</span>
<span class="line-modified">!   /*      Corresponds to a custom encoding, as found in Type~1, CFF, and   */</span>
<span class="line-modified">!   /*      OpenType/CFF fonts.  It is limited to 256 character codes.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_APPLE_ROMAN ::                                         */</span>
<span class="line-modified">!   /*      Apple roman encoding.  Many TrueType and OpenType fonts contain  */</span>
<span class="line-modified">!   /*      a charmap for this 8-bit encoding, since older versions of Mac   */</span>
<span class="line-modified">!   /*      OS are able to use it.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_OLD_LATIN_2 ::                                         */</span>
<span class="line-modified">!   /*      This value is deprecated and was neither used nor reported by    */</span>
<span class="line-modified">!   /*      FreeType.  Don&#39;t use or test for it.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_MS_SJIS ::                                             */</span>
<span class="line-modified">!   /*      Same as FT_ENCODING_SJIS.  Deprecated.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_MS_GB2312 ::                                           */</span>
<span class="line-modified">!   /*      Same as FT_ENCODING_PRC.  Deprecated.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_MS_BIG5 ::                                             */</span>
<span class="line-modified">!   /*      Same as FT_ENCODING_BIG5.  Deprecated.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_MS_WANSUNG ::                                          */</span>
<span class="line-modified">!   /*      Same as FT_ENCODING_WANSUNG.  Deprecated.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_MS_JOHAB ::                                            */</span>
<span class="line-modified">!   /*      Same as FT_ENCODING_JOHAB.  Deprecated.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    By default, FreeType enables a Unicode charmap and tags it with    */</span>
<span class="line-modified">!   /*    FT_ENCODING_UNICODE when it is either provided or can be generated */</span>
<span class="line-modified">!   /*    from PostScript glyph name dictionaries in the font file.          */</span>
<span class="line-modified">!   /*    All other encodings are considered legacy and tagged only if       */</span>
<span class="line-modified">!   /*    explicitly defined in the font file.  Otherwise, FT_ENCODING_NONE  */</span>
<span class="line-modified">!   /*    is used.                                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_NONE is set by the BDF and PCF drivers if the charmap  */</span>
<span class="line-modified">!   /*    is neither Unicode nor ISO-8859-1 (otherwise it is set to          */</span>
<span class="line-modified">!   /*    FT_ENCODING_UNICODE).  Use @FT_Get_BDF_Charset_ID to find out      */</span>
<span class="line-modified">!   /*    which encoding is really present.  If, for example, the            */</span>
<span class="line-modified">!   /*    `cs_registry&#39; field is `KOI8&#39; and the `cs_encoding&#39; field is `R&#39;,  */</span>
<span class="line-modified">!   /*    the font is encoded in KOI8-R.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_NONE is always set (with a single exception) by the    */</span>
<span class="line-modified">!   /*    winfonts driver.  Use @FT_Get_WinFNT_Header and examine the        */</span>
<span class="line-modified">!   /*    `charset&#39; field of the @FT_WinFNT_HeaderRec structure to find out  */</span>
<span class="line-modified">!   /*    which encoding is really present.  For example,                    */</span>
<span class="line-modified">!   /*    @FT_WinFNT_ID_CP1251 (204) means Windows code page 1251 (for       */</span>
<span class="line-modified">!   /*    Russian).                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_ENCODING_NONE is set if `platform_id&#39; is @TT_PLATFORM_MACINTOSH */</span>
<span class="line-modified">!   /*    and `encoding_id&#39; is not `TT_MAC_ID_ROMAN&#39; (otherwise it is set to */</span>
<span class="line-modified">!   /*    FT_ENCODING_APPLE_ROMAN).                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If `platform_id&#39; is @TT_PLATFORM_MACINTOSH, use the function       */</span>
<span class="line-modified">!   /*    @FT_Get_CMap_Language_ID to query the Mac language ID that may     */</span>
<span class="line-modified">!   /*    be needed to be able to distinguish Apple encoding variants.  See  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      https://www.unicode.org/Public/MAPPINGS/VENDORS/APPLE/Readme.txt */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    to get an idea how to do that.  Basically, if the language ID      */</span>
<span class="line-modified">!   /*    is~0, don&#39;t use it, otherwise subtract 1 from the language ID.     */</span>
<span class="line-modified">!   /*    Then examine `encoding_id&#39;.  If, for example, `encoding_id&#39; is     */</span>
<span class="line-modified">!   /*    `TT_MAC_ID_ROMAN&#39; and the language ID (minus~1) is                 */</span>
<span class="line-modified">!   /*    `TT_MAC_LANGID_GREEK&#39;, it is the Greek encoding, not Roman.        */</span>
<span class="line-removed">-   /*    `TT_MAC_ID_ARABIC&#39; with `TT_MAC_LANGID_FARSI&#39; means the Farsi      */</span>
<span class="line-removed">-   /*    variant the Arabic encoding.                                       */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef enum  FT_Encoding_
    {
      FT_ENC_TAG( FT_ENCODING_NONE, 0, 0, 0, 0 ),
  
      FT_ENC_TAG( FT_ENCODING_MS_SYMBOL, &#39;s&#39;, &#39;y&#39;, &#39;m&#39;, &#39;b&#39; ),
<span class="line-new-header">--- 610,151 ---</span>
                        (FT_UInt32)(d)         )
  
  #endif /* FT_ENC_TAG */
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_Encoding</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An enumeration to specify character sets supported by charmaps.  Used</span>
<span class="line-modified">!    *   in the @FT_Select_Charmap API function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Despite the name, this enumeration lists specific character</span>
<span class="line-modified">!    *   repertories (i.e., charsets), and not text encoding methods (e.g.,</span>
<span class="line-modified">!    *   UTF-8, UTF-16, etc.).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Other encodings might be defined in the future.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_ENCODING_NONE ::</span>
<span class="line-modified">!    *     The encoding value~0 is reserved for all formats except BDF, PCF,</span>
<span class="line-modified">!    *     and Windows FNT; see below for more information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_UNICODE ::</span>
<span class="line-modified">!    *     The Unicode character set.  This value covers all versions of the</span>
<span class="line-modified">!    *     Unicode repertoire, including ASCII and Latin-1.  Most fonts include</span>
<span class="line-modified">!    *     a Unicode charmap, but not all of them.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     For example, if you want to access Unicode value U+1F028 (and the</span>
<span class="line-modified">!    *     font contains it), use value 0x1F028 as the input value for</span>
<span class="line-modified">!    *     @FT_Get_Char_Index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_MS_SYMBOL ::</span>
<span class="line-modified">!    *     Microsoft Symbol encoding, used to encode mathematical symbols and</span>
<span class="line-modified">!    *     wingdings.  For more information, see</span>
<span class="line-modified">!    *     &#39;https://www.microsoft.com/typography/otspec/recom.htm#non-standard-symbol-fonts&#39;,</span>
<span class="line-modified">!    *     &#39;http://www.kostis.net/charsets/symbol.htm&#39;, and</span>
<span class="line-modified">!    *     &#39;http://www.kostis.net/charsets/wingding.htm&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     This encoding uses character codes from the PUA (Private Unicode</span>
<span class="line-modified">!    *     Area) in the range U+F020-U+F0FF.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_SJIS ::</span>
<span class="line-modified">!    *     Shift JIS encoding for Japanese.  More info at</span>
<span class="line-modified">!    *     &#39;https://en.wikipedia.org/wiki/Shift_JIS&#39;.  See note on multi-byte</span>
<span class="line-modified">!    *     encodings below.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_PRC ::</span>
<span class="line-modified">!    *     Corresponds to encoding systems mainly for Simplified Chinese as</span>
<span class="line-modified">!    *     used in People&#39;s Republic of China (PRC).  The encoding layout is</span>
<span class="line-modified">!    *     based on GB~2312 and its supersets GBK and GB~18030.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_BIG5 ::</span>
<span class="line-modified">!    *     Corresponds to an encoding system for Traditional Chinese as used in</span>
<span class="line-modified">!    *     Taiwan and Hong Kong.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_WANSUNG ::</span>
<span class="line-modified">!    *     Corresponds to the Korean encoding system known as Extended Wansung</span>
<span class="line-modified">!    *     (MS Windows code page 949).  For more information see</span>
<span class="line-modified">!    *     &#39;https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/bestfit949.txt&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_JOHAB ::</span>
<span class="line-modified">!    *     The Korean standard character set (KS~C 5601-1992), which</span>
<span class="line-modified">!    *     corresponds to MS Windows code page 1361.  This character set</span>
<span class="line-modified">!    *     includes all possible Hangul character combinations.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_ADOBE_LATIN_1 ::</span>
<span class="line-modified">!    *     Corresponds to a Latin-1 encoding as defined in a Type~1 PostScript</span>
<span class="line-modified">!    *     font.  It is limited to 256 character codes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_ADOBE_STANDARD ::</span>
<span class="line-modified">!    *     Adobe Standard encoding, as found in Type~1, CFF, and OpenType/CFF</span>
<span class="line-modified">!    *     fonts.  It is limited to 256 character codes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_ADOBE_EXPERT ::</span>
<span class="line-modified">!    *     Adobe Expert encoding, as found in Type~1, CFF, and OpenType/CFF</span>
<span class="line-modified">!    *     fonts.  It is limited to 256 character codes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_ADOBE_CUSTOM ::</span>
<span class="line-modified">!    *     Corresponds to a custom encoding, as found in Type~1, CFF, and</span>
<span class="line-modified">!    *     OpenType/CFF fonts.  It is limited to 256 character codes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_APPLE_ROMAN ::</span>
<span class="line-modified">!    *     Apple roman encoding.  Many TrueType and OpenType fonts contain a</span>
<span class="line-modified">!    *     charmap for this 8-bit encoding, since older versions of Mac OS are</span>
<span class="line-modified">!    *     able to use it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_OLD_LATIN_2 ::</span>
<span class="line-modified">!    *     This value is deprecated and was neither used nor reported by</span>
<span class="line-modified">!    *     FreeType.  Don&#39;t use or test for it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_MS_SJIS ::</span>
<span class="line-modified">!    *     Same as FT_ENCODING_SJIS.  Deprecated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_MS_GB2312 ::</span>
<span class="line-modified">!    *     Same as FT_ENCODING_PRC.  Deprecated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_MS_BIG5 ::</span>
<span class="line-modified">!    *     Same as FT_ENCODING_BIG5.  Deprecated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_MS_WANSUNG ::</span>
<span class="line-modified">!    *     Same as FT_ENCODING_WANSUNG.  Deprecated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_ENCODING_MS_JOHAB ::</span>
<span class="line-modified">!    *     Same as FT_ENCODING_JOHAB.  Deprecated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   By default, FreeType enables a Unicode charmap and tags it with</span>
<span class="line-modified">!    *   `FT_ENCODING_UNICODE` when it is either provided or can be generated</span>
<span class="line-modified">!    *   from PostScript glyph name dictionaries in the font file.  All other</span>
<span class="line-modified">!    *   encodings are considered legacy and tagged only if explicitly defined</span>
<span class="line-modified">!    *   in the font file.  Otherwise, `FT_ENCODING_NONE` is used.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   `FT_ENCODING_NONE` is set by the BDF and PCF drivers if the charmap is</span>
<span class="line-modified">!    *   neither Unicode nor ISO-8859-1 (otherwise it is set to</span>
<span class="line-modified">!    *   `FT_ENCODING_UNICODE`).  Use @FT_Get_BDF_Charset_ID to find out which</span>
<span class="line-modified">!    *   encoding is really present.  If, for example, the `cs_registry` field</span>
<span class="line-modified">!    *   is &#39;KOI8&#39; and the `cs_encoding` field is &#39;R&#39;, the font is encoded in</span>
<span class="line-modified">!    *   KOI8-R.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   `FT_ENCODING_NONE` is always set (with a single exception) by the</span>
<span class="line-modified">!    *   winfonts driver.  Use @FT_Get_WinFNT_Header and examine the `charset`</span>
<span class="line-modified">!    *   field of the @FT_WinFNT_HeaderRec structure to find out which encoding</span>
<span class="line-modified">!    *   is really present.  For example, @FT_WinFNT_ID_CP1251 (204) means</span>
<span class="line-modified">!    *   Windows code page 1251 (for Russian).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   `FT_ENCODING_NONE` is set if `platform_id` is @TT_PLATFORM_MACINTOSH</span>
<span class="line-modified">!    *   and `encoding_id` is not `TT_MAC_ID_ROMAN` (otherwise it is set to</span>
<span class="line-modified">!    *   `FT_ENCODING_APPLE_ROMAN`).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If `platform_id` is @TT_PLATFORM_MACINTOSH, use the function</span>
<span class="line-modified">!    *   @FT_Get_CMap_Language_ID to query the Mac language ID that may be</span>
<span class="line-modified">!    *   needed to be able to distinguish Apple encoding variants.  See</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     https://www.unicode.org/Public/MAPPINGS/VENDORS/APPLE/Readme.txt</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   to get an idea how to do that.  Basically, if the language ID is~0,</span>
<span class="line-modified">!    *   don&#39;t use it, otherwise subtract 1 from the language ID.  Then examine</span>
<span class="line-modified">!    *   `encoding_id`.  If, for example, `encoding_id` is `TT_MAC_ID_ROMAN`</span>
<span class="line-modified">!    *   and the language ID (minus~1) is `TT_MAC_LANGID_GREEK`, it is the</span>
<span class="line-modified">!    *   Greek encoding, not Roman.  `TT_MAC_ID_ARABIC` with</span>
<span class="line-modified">!    *   `TT_MAC_LANGID_FARSI` means the Farsi variant the Arabic encoding.</span>
<span class="line-modified">!    */</span>
    typedef enum  FT_Encoding_
    {
      FT_ENC_TAG( FT_ENCODING_NONE, 0, 0, 0, 0 ),
  
      FT_ENC_TAG( FT_ENCODING_MS_SYMBOL, &#39;s&#39;, &#39;y&#39;, &#39;m&#39;, &#39;b&#39; ),
</pre>
<hr />
<pre>
<span class="line-old-header">*** 794,11 ***</span>
      FT_ENC_TAG( FT_ENCODING_APPLE_ROMAN, &#39;a&#39;, &#39;r&#39;, &#39;m&#39;, &#39;n&#39; )
  
    } FT_Encoding;
  
  
<span class="line-modified">!   /* these constants are deprecated; use the corresponding `FT_Encoding&#39; */</span>
    /* values instead                                                      */
  #define ft_encoding_none            FT_ENCODING_NONE
  #define ft_encoding_unicode         FT_ENCODING_UNICODE
  #define ft_encoding_symbol          FT_ENCODING_MS_SYMBOL
  #define ft_encoding_latin_1         FT_ENCODING_ADOBE_LATIN_1
<span class="line-new-header">--- 784,11 ---</span>
      FT_ENC_TAG( FT_ENCODING_APPLE_ROMAN, &#39;a&#39;, &#39;r&#39;, &#39;m&#39;, &#39;n&#39; )
  
    } FT_Encoding;
  
  
<span class="line-modified">!   /* these constants are deprecated; use the corresponding `FT_Encoding` */</span>
    /* values instead                                                      */
  #define ft_encoding_none            FT_ENCODING_NONE
  #define ft_encoding_unicode         FT_ENCODING_UNICODE
  #define ft_encoding_symbol          FT_ENCODING_MS_SYMBOL
  #define ft_encoding_latin_1         FT_ENCODING_ADOBE_LATIN_1
</pre>
<hr />
<pre>
<span class="line-old-header">*** 813,33 ***</span>
  #define ft_encoding_adobe_expert    FT_ENCODING_ADOBE_EXPERT
  #define ft_encoding_adobe_custom    FT_ENCODING_ADOBE_CUSTOM
  #define ft_encoding_apple_roman     FT_ENCODING_APPLE_ROMAN
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_CharMapRec                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    The base charmap structure.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    face        :: A handle to the parent face object.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    encoding    :: An @FT_Encoding tag identifying the charmap.  Use   */</span>
<span class="line-modified">!   /*                   this with @FT_Select_Charmap.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    platform_id :: An ID number describing the platform for the        */</span>
<span class="line-modified">!   /*                   following encoding ID.  This comes directly from    */</span>
<span class="line-modified">!   /*                   the TrueType specification and gets emulated for    */</span>
<span class="line-modified">!   /*                   other formats.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    encoding_id :: A platform specific encoding number.  This also     */</span>
<span class="line-modified">!   /*                   comes from the TrueType specification and gets      */</span>
<span class="line-modified">!   /*                   emulated similarly.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_CharMapRec_
    {
      FT_Face      face;
      FT_Encoding  encoding;
      FT_UShort    platform_id;
<span class="line-new-header">--- 803,35 ---</span>
  #define ft_encoding_adobe_expert    FT_ENCODING_ADOBE_EXPERT
  #define ft_encoding_adobe_custom    FT_ENCODING_ADOBE_CUSTOM
  #define ft_encoding_apple_roman     FT_ENCODING_APPLE_ROMAN
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_CharMapRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   The base charmap structure.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the parent face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   encoding ::</span>
<span class="line-modified">!    *     An @FT_Encoding tag identifying the charmap.  Use this with</span>
<span class="line-modified">!    *     @FT_Select_Charmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   platform_id ::</span>
<span class="line-modified">!    *     An ID number describing the platform for the following encoding ID.</span>
<span class="line-modified">!    *     This comes directly from the TrueType specification and gets</span>
<span class="line-modified">!    *     emulated for other formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   encoding_id ::</span>
<span class="line-modified">!    *     A platform-specific encoding number.  This also comes from the</span>
<span class="line-added">+    *     TrueType specification and gets emulated similarly.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_CharMapRec_
    {
      FT_Face      face;
      FT_Encoding  encoding;
      FT_UShort    platform_id;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 855,219 ***</span>
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Face_Internal                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An opaque handle to an `FT_Face_InternalRec&#39; structure that models */</span>
<span class="line-modified">!   /*    the private data of a given @FT_Face object.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This structure might change between releases of FreeType~2 and is  */</span>
<span class="line-modified">!   /*    not generally available to client applications.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_Face_InternalRec_*  FT_Face_Internal;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_FaceRec                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    FreeType root face class structure.  A face object models a        */</span>
<span class="line-modified">!   /*    typeface in a font file.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    num_faces           :: The number of faces in the font file.  Some */</span>
<span class="line-modified">!   /*                           font formats can have multiple faces in     */</span>
<span class="line-modified">!   /*                           a single font file.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_index          :: This field holds two different values.      */</span>
<span class="line-modified">!   /*                           Bits 0-15 are the index of the face in the  */</span>
<span class="line-modified">!   /*                           font file (starting with value~0).  They    */</span>
<span class="line-modified">!   /*                           are set to~0 if there is only one face in   */</span>
<span class="line-modified">!   /*                           the font file.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           [Since 2.6.1] Bits 16-30 are relevant to GX */</span>
<span class="line-modified">!   /*                           and OpenType variation fonts only, holding  */</span>
<span class="line-modified">!   /*                           the named instance index for the current    */</span>
<span class="line-modified">!   /*                           face index (starting with value~1; value~0  */</span>
<span class="line-modified">!   /*                           indicates font access without a named       */</span>
<span class="line-modified">!   /*                           instance).  For non-variation fonts, bits   */</span>
<span class="line-modified">!   /*                           16-30 are ignored.  If we have the third    */</span>
<span class="line-modified">!   /*                           named instance of face~4, say, `face_index&#39; */</span>
<span class="line-modified">!   /*                           is set to 0x00030004.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           Bit 31 is always zero (this is,             */</span>
<span class="line-modified">!   /*                           `face_index&#39; is always a positive value).   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           [Since 2.9] Changing the design coordinates */</span>
<span class="line-modified">!   /*                           with @FT_Set_Var_Design_Coordinates or      */</span>
<span class="line-modified">!   /*                           @FT_Set_Var_Blend_Coordinates does not      */</span>
<span class="line-modified">!   /*                           influence the named instance index value    */</span>
<span class="line-modified">!   /*                           (only @FT_Set_Named_Instance does that).    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_flags          :: A set of bit flags that give important      */</span>
<span class="line-modified">!   /*                           information about the face; see             */</span>
<span class="line-modified">!   /*                           @FT_FACE_FLAG_XXX for the details.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    style_flags         :: The lower 16~bits contain a set of bit      */</span>
<span class="line-modified">!   /*                           flags indicating the style of the face; see */</span>
<span class="line-modified">!   /*                           @FT_STYLE_FLAG_XXX for the details.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           [Since 2.6.1] Bits 16-30 hold the number    */</span>
<span class="line-modified">!   /*                           of named instances available for the        */</span>
<span class="line-modified">!   /*                           current face if we have a GX or OpenType    */</span>
<span class="line-modified">!   /*                           variation (sub)font.  Bit 31 is always zero */</span>
<span class="line-modified">!   /*                           (this is, `style_flags&#39; is always a         */</span>
<span class="line-modified">!   /*                           positive value).  Note that a variation     */</span>
<span class="line-modified">!   /*                           font has always at least one named          */</span>
<span class="line-modified">!   /*                           instance, namely the default instance.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_glyphs          :: The number of glyphs in the face.  If the   */</span>
<span class="line-modified">!   /*                           face is scalable and has sbits (see         */</span>
<span class="line-modified">!   /*                           `num_fixed_sizes&#39;), it is set to the number */</span>
<span class="line-modified">!   /*                           of outline glyphs.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           For CID-keyed fonts (not in an SFNT         */</span>
<span class="line-modified">!   /*                           wrapper) this value gives the highest CID   */</span>
<span class="line-modified">!   /*                           used in the font.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    family_name         :: The face&#39;s family name.  This is an ASCII   */</span>
<span class="line-modified">!   /*                           string, usually in English, that describes  */</span>
<span class="line-modified">!   /*                           the typeface&#39;s family (like `Times New      */</span>
<span class="line-modified">!   /*                           Roman&#39;, `Bodoni&#39;, `Garamond&#39;, etc).  This   */</span>
<span class="line-modified">!   /*                           is a least common denominator used to list  */</span>
<span class="line-modified">!   /*                           fonts.  Some formats (TrueType &amp; OpenType)  */</span>
<span class="line-modified">!   /*                           provide localized and Unicode versions of   */</span>
<span class="line-modified">!   /*                           this string.  Applications should use the   */</span>
<span class="line-modified">!   /*                           format specific interface to access them.   */</span>
<span class="line-modified">!   /*                           Can be NULL (e.g., in fonts embedded in a   */</span>
<span class="line-modified">!   /*                           PDF file).                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           In case the font doesn&#39;t provide a specific */</span>
<span class="line-modified">!   /*                           family name entry, FreeType tries to        */</span>
<span class="line-modified">!   /*                           synthesize one, deriving it from other name */</span>
<span class="line-modified">!   /*                           entries.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    style_name          :: The face&#39;s style name.  This is an ASCII    */</span>
<span class="line-modified">!   /*                           string, usually in English, that describes  */</span>
<span class="line-modified">!   /*                           the typeface&#39;s style (like `Italic&#39;,        */</span>
<span class="line-modified">!   /*                           `Bold&#39;, `Condensed&#39;, etc).  Not all font    */</span>
<span class="line-modified">!   /*                           formats provide a style name, so this field */</span>
<span class="line-modified">!   /*                           is optional, and can be set to NULL.  As    */</span>
<span class="line-modified">!   /*                           for `family_name&#39;, some formats provide     */</span>
<span class="line-modified">!   /*                           localized and Unicode versions of this      */</span>
<span class="line-modified">!   /*                           string.  Applications should use the format */</span>
<span class="line-modified">!   /*                           specific interface to access them.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_fixed_sizes     :: The number of bitmap strikes in the face.   */</span>
<span class="line-modified">!   /*                           Even if the face is scalable, there might   */</span>
<span class="line-modified">!   /*                           still be bitmap strikes, which are called   */</span>
<span class="line-modified">!   /*                           `sbits&#39; in that case.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    available_sizes     :: An array of @FT_Bitmap_Size for all bitmap  */</span>
<span class="line-modified">!   /*                           strikes in the face.  It is set to NULL if  */</span>
<span class="line-modified">!   /*                           there is no bitmap strike.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           Note that FreeType tries to sanitize the    */</span>
<span class="line-modified">!   /*                           strike data since they are sometimes sloppy */</span>
<span class="line-modified">!   /*                           or incorrect, but this can easily fail.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_charmaps        :: The number of charmaps in the face.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    charmaps            :: An array of the charmaps of the face.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    generic             :: A field reserved for client uses.  See the  */</span>
<span class="line-modified">!   /*                           @FT_Generic type description.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bbox                :: The font bounding box.  Coordinates are     */</span>
<span class="line-modified">!   /*                           expressed in font units (see                */</span>
<span class="line-modified">!   /*                           `units_per_EM&#39;).  The box is large enough   */</span>
<span class="line-modified">!   /*                           to contain any glyph from the font.  Thus,  */</span>
<span class="line-modified">!   /*                           `bbox.yMax&#39; can be seen as the `maximum     */</span>
<span class="line-modified">!   /*                           ascender&#39;, and `bbox.yMin&#39; as the `minimum  */</span>
<span class="line-modified">!   /*                           descender&#39;.  Only relevant for scalable     */</span>
<span class="line-modified">!   /*                           formats.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           Note that the bounding box might be off by  */</span>
<span class="line-modified">!   /*                           (at least) one pixel for hinted fonts.  See */</span>
<span class="line-modified">!   /*                           @FT_Size_Metrics for further discussion.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    units_per_EM        :: The number of font units per EM square for  */</span>
<span class="line-modified">!   /*                           this face.  This is typically 2048 for      */</span>
<span class="line-modified">!   /*                           TrueType fonts, and 1000 for Type~1 fonts.  */</span>
<span class="line-modified">!   /*                           Only relevant for scalable formats.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    ascender            :: The typographic ascender of the face,       */</span>
<span class="line-modified">!   /*                           expressed in font units.  For font formats  */</span>
<span class="line-modified">!   /*                           not having this information, it is set to   */</span>
<span class="line-modified">!   /*                           `bbox.yMax&#39;.  Only relevant for scalable    */</span>
<span class="line-modified">!   /*                           formats.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    descender           :: The typographic descender of the face,      */</span>
<span class="line-modified">!   /*                           expressed in font units.  For font formats  */</span>
<span class="line-modified">!   /*                           not having this information, it is set to   */</span>
<span class="line-modified">!   /*                           `bbox.yMin&#39;.  Note that this field is       */</span>
<span class="line-modified">!   /*                           negative for values below the baseline.     */</span>
<span class="line-modified">!   /*                           Only relevant for scalable formats.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    height              :: This value is the vertical distance         */</span>
<span class="line-modified">!   /*                           between two consecutive baselines,          */</span>
<span class="line-modified">!   /*                           expressed in font units.  It is always      */</span>
<span class="line-modified">!   /*                           positive.  Only relevant for scalable       */</span>
<span class="line-modified">!   /*                           formats.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                           If you want the global glyph height, use    */</span>
<span class="line-modified">!   /*                           `ascender - descender&#39;.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    max_advance_width   :: The maximum advance width, in font units,   */</span>
<span class="line-modified">!   /*                           for all glyphs in this face.  This can be   */</span>
<span class="line-modified">!   /*                           used to make word wrapping computations     */</span>
<span class="line-modified">!   /*                           faster.  Only relevant for scalable         */</span>
<span class="line-modified">!   /*                           formats.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    max_advance_height  :: The maximum advance height, in font units,  */</span>
<span class="line-modified">!   /*                           for all glyphs in this face.  This is only  */</span>
<span class="line-modified">!   /*                           relevant for vertical layouts, and is set   */</span>
<span class="line-modified">!   /*                           to `height&#39; for fonts that do not provide   */</span>
<span class="line-modified">!   /*                           vertical metrics.  Only relevant for        */</span>
<span class="line-modified">!   /*                           scalable formats.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    underline_position  :: The position, in font units, of the         */</span>
<span class="line-modified">!   /*                           underline line for this face.  It is the    */</span>
<span class="line-modified">!   /*                           center of the underlining stem.  Only       */</span>
<span class="line-modified">!   /*                           relevant for scalable formats.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    underline_thickness :: The thickness, in font units, of the        */</span>
<span class="line-modified">!   /*                           underline for this face.  Only relevant for */</span>
<span class="line-modified">!   /*                           scalable formats.                           */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    glyph               :: The face&#39;s associated glyph slot(s).        */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    size                :: The current active size for this face.      */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    charmap             :: The current active charmap for this face.   */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Note&gt;                                                                */</span>
<span class="line-removed">-   /*    Fields may be changed after a call to @FT_Attach_File or           */</span>
<span class="line-removed">-   /*    @FT_Attach_Stream.                                                 */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    For an OpenType variation font, the values of the following fields */</span>
<span class="line-removed">-   /*    can change after a call to @FT_Set_Var_Design_Coordinates (and     */</span>
<span class="line-removed">-   /*    friends) if the font contains an `MVAR&#39; table: `ascender&#39;,         */</span>
<span class="line-removed">-   /*    `descender&#39;, `height&#39;, `underline_position&#39;, and                   */</span>
<span class="line-removed">-   /*    `underline_thickness&#39;.                                             */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    Especially for TrueType fonts see also the documentation for       */</span>
<span class="line-removed">-   /*    @FT_Size_Metrics.                                                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct  FT_FaceRec_
    {
      FT_Long           num_faces;
      FT_Long           face_index;
  
<span class="line-new-header">--- 847,199 ---</span>
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Face_Internal</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An opaque handle to an `FT_Face_InternalRec` structure that models the</span>
<span class="line-modified">!    *   private data of a given @FT_Face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This structure might change between releases of FreeType~2 and is not</span>
<span class="line-modified">!    *   generally available to client applications.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_Face_InternalRec_*  FT_Face_Internal;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_FaceRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   FreeType root face class structure.  A face object models a typeface</span>
<span class="line-modified">!    *   in a font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   num_faces ::</span>
<span class="line-modified">!    *     The number of faces in the font file.  Some font formats can have</span>
<span class="line-modified">!    *     multiple faces in a single font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_index ::</span>
<span class="line-modified">!    *     This field holds two different values.  Bits 0-15 are the index of</span>
<span class="line-modified">!    *     the face in the font file (starting with value~0).  They are set</span>
<span class="line-modified">!    *     to~0 if there is only one face in the font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     [Since 2.6.1] Bits 16-30 are relevant to GX and OpenType variation</span>
<span class="line-modified">!    *     fonts only, holding the named instance index for the current face</span>
<span class="line-modified">!    *     index (starting with value~1; value~0 indicates font access without</span>
<span class="line-modified">!    *     a named instance).  For non-variation fonts, bits 16-30 are ignored.</span>
<span class="line-modified">!    *     If we have the third named instance of face~4, say, `face_index` is</span>
<span class="line-modified">!    *     set to 0x00030004.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Bit 31 is always zero (this is, `face_index` is always a positive</span>
<span class="line-modified">!    *     value).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     [Since 2.9] Changing the design coordinates with</span>
<span class="line-modified">!    *     @FT_Set_Var_Design_Coordinates or @FT_Set_Var_Blend_Coordinates does</span>
<span class="line-modified">!    *     not influence the named instance index value (only</span>
<span class="line-modified">!    *     @FT_Set_Named_Instance does that).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_flags ::</span>
<span class="line-modified">!    *     A set of bit flags that give important information about the face;</span>
<span class="line-modified">!    *     see @FT_FACE_FLAG_XXX for the details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   style_flags ::</span>
<span class="line-modified">!    *     The lower 16~bits contain a set of bit flags indicating the style of</span>
<span class="line-modified">!    *     the face; see @FT_STYLE_FLAG_XXX for the details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     [Since 2.6.1] Bits 16-30 hold the number of named instances</span>
<span class="line-modified">!    *     available for the current face if we have a GX or OpenType variation</span>
<span class="line-modified">!    *     (sub)font.  Bit 31 is always zero (this is, `style_flags` is always</span>
<span class="line-modified">!    *     a positive value).  Note that a variation font has always at least</span>
<span class="line-modified">!    *     one named instance, namely the default instance.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_glyphs ::</span>
<span class="line-modified">!    *     The number of glyphs in the face.  If the face is scalable and has</span>
<span class="line-modified">!    *     sbits (see `num_fixed_sizes`), it is set to the number of outline</span>
<span class="line-modified">!    *     glyphs.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     For CID-keyed fonts (not in an SFNT wrapper) this value gives the</span>
<span class="line-modified">!    *     highest CID used in the font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   family_name ::</span>
<span class="line-modified">!    *     The face&#39;s family name.  This is an ASCII string, usually in</span>
<span class="line-modified">!    *     English, that describes the typeface&#39;s family (like &#39;Times New</span>
<span class="line-modified">!    *     Roman&#39;, &#39;Bodoni&#39;, &#39;Garamond&#39;, etc).  This is a least common</span>
<span class="line-modified">!    *     denominator used to list fonts.  Some formats (TrueType &amp; OpenType)</span>
<span class="line-modified">!    *     provide localized and Unicode versions of this string.  Applications</span>
<span class="line-modified">!    *     should use the format-specific interface to access them.  Can be</span>
<span class="line-modified">!    *     `NULL` (e.g., in fonts embedded in a PDF file).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     In case the font doesn&#39;t provide a specific family name entry,</span>
<span class="line-modified">!    *     FreeType tries to synthesize one, deriving it from other name</span>
<span class="line-modified">!    *     entries.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   style_name ::</span>
<span class="line-modified">!    *     The face&#39;s style name.  This is an ASCII string, usually in English,</span>
<span class="line-modified">!    *     that describes the typeface&#39;s style (like &#39;Italic&#39;, &#39;Bold&#39;,</span>
<span class="line-modified">!    *     &#39;Condensed&#39;, etc).  Not all font formats provide a style name, so</span>
<span class="line-modified">!    *     this field is optional, and can be set to `NULL`.  As for</span>
<span class="line-modified">!    *     `family_name`, some formats provide localized and Unicode versions</span>
<span class="line-modified">!    *     of this string.  Applications should use the format-specific</span>
<span class="line-modified">!    *     interface to access them.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_fixed_sizes ::</span>
<span class="line-modified">!    *     The number of bitmap strikes in the face.  Even if the face is</span>
<span class="line-modified">!    *     scalable, there might still be bitmap strikes, which are called</span>
<span class="line-modified">!    *     &#39;sbits&#39; in that case.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   available_sizes ::</span>
<span class="line-modified">!    *     An array of @FT_Bitmap_Size for all bitmap strikes in the face.  It</span>
<span class="line-modified">!    *     is set to `NULL` if there is no bitmap strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Note that FreeType tries to sanitize the strike data since they are</span>
<span class="line-modified">!    *     sometimes sloppy or incorrect, but this can easily fail.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_charmaps ::</span>
<span class="line-modified">!    *     The number of charmaps in the face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   charmaps ::</span>
<span class="line-modified">!    *     An array of the charmaps of the face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   generic ::</span>
<span class="line-modified">!    *     A field reserved for client uses.  See the @FT_Generic type</span>
<span class="line-modified">!    *     description.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bbox ::</span>
<span class="line-modified">!    *     The font bounding box.  Coordinates are expressed in font units (see</span>
<span class="line-modified">!    *     `units_per_EM`).  The box is large enough to contain any glyph from</span>
<span class="line-modified">!    *     the font.  Thus, `bbox.yMax` can be seen as the &#39;maximum ascender&#39;,</span>
<span class="line-modified">!    *     and `bbox.yMin` as the &#39;minimum descender&#39;.  Only relevant for</span>
<span class="line-modified">!    *     scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Note that the bounding box might be off by (at least) one pixel for</span>
<span class="line-modified">!    *     hinted fonts.  See @FT_Size_Metrics for further discussion.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   units_per_EM ::</span>
<span class="line-modified">!    *     The number of font units per EM square for this face.  This is</span>
<span class="line-modified">!    *     typically 2048 for TrueType fonts, and 1000 for Type~1 fonts.  Only</span>
<span class="line-modified">!    *     relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ascender ::</span>
<span class="line-modified">!    *     The typographic ascender of the face, expressed in font units.  For</span>
<span class="line-modified">!    *     font formats not having this information, it is set to `bbox.yMax`.</span>
<span class="line-modified">!    *     Only relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   descender ::</span>
<span class="line-modified">!    *     The typographic descender of the face, expressed in font units.  For</span>
<span class="line-modified">!    *     font formats not having this information, it is set to `bbox.yMin`.</span>
<span class="line-modified">!    *     Note that this field is negative for values below the baseline.</span>
<span class="line-modified">!    *     Only relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     This value is the vertical distance between two consecutive</span>
<span class="line-modified">!    *     baselines, expressed in font units.  It is always positive.  Only</span>
<span class="line-modified">!    *     relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If you want the global glyph height, use `ascender - descender`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_advance_width ::</span>
<span class="line-modified">!    *     The maximum advance width, in font units, for all glyphs in this</span>
<span class="line-modified">!    *     face.  This can be used to make word wrapping computations faster.</span>
<span class="line-modified">!    *     Only relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_advance_height ::</span>
<span class="line-modified">!    *     The maximum advance height, in font units, for all glyphs in this</span>
<span class="line-modified">!    *     face.  This is only relevant for vertical layouts, and is set to</span>
<span class="line-modified">!    *     `height` for fonts that do not provide vertical metrics.  Only</span>
<span class="line-modified">!    *     relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   underline_position ::</span>
<span class="line-modified">!    *     The position, in font units, of the underline line for this face.</span>
<span class="line-modified">!    *     It is the center of the underlining stem.  Only relevant for</span>
<span class="line-modified">!    *     scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   underline_thickness ::</span>
<span class="line-modified">!    *     The thickness, in font units, of the underline for this face.  Only</span>
<span class="line-modified">!    *     relevant for scalable formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph ::</span>
<span class="line-modified">!    *     The face&#39;s associated glyph slot(s).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   size ::</span>
<span class="line-modified">!    *     The current active size for this face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   charmap ::</span>
<span class="line-modified">!    *     The current active charmap for this face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Fields may be changed after a call to @FT_Attach_File or</span>
<span class="line-modified">!    *   @FT_Attach_Stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   For an OpenType variation font, the values of the following fields can</span>
<span class="line-modified">!    *   change after a call to @FT_Set_Var_Design_Coordinates (and friends) if</span>
<span class="line-modified">!    *   the font contains an &#39;MVAR&#39; table: `ascender`, `descender`, `height`,</span>
<span class="line-modified">!    *   `underline_position`, and `underline_thickness`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Especially for TrueType fonts see also the documentation for</span>
<span class="line-modified">!    *   @FT_Size_Metrics.</span>
<span class="line-modified">!    */</span>
    typedef struct  FT_FaceRec_
    {
      FT_Long           num_faces;
      FT_Long           face_index;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1085,11 ***</span>
      FT_Int            num_charmaps;
      FT_CharMap*       charmaps;
  
      FT_Generic        generic;
  
<span class="line-modified">!     /*# The following member variables (down to `underline_thickness&#39;) */</span>
      /*# are only relevant to scalable outlines; cf. @FT_Bitmap_Size    */
      /*# for bitmap fonts.                                              */
      FT_BBox           bbox;
  
      FT_UShort         units_per_EM;
<span class="line-new-header">--- 1057,11 ---</span>
      FT_Int            num_charmaps;
      FT_CharMap*       charmaps;
  
      FT_Generic        generic;
  
<span class="line-modified">!     /*# The following member variables (down to `underline_thickness`) */</span>
      /*# are only relevant to scalable outlines; cf. @FT_Bitmap_Size    */
      /*# for bitmap fonts.                                              */
      FT_BBox           bbox;
  
      FT_UShort         units_per_EM;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1123,121 ***</span>
      /*@private end */
  
    } FT_FaceRec;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_XXX                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A list of bit flags used in the `face_flags&#39; field of the          */</span>
<span class="line-modified">!   /*    @FT_FaceRec structure.  They inform client applications of         */</span>
<span class="line-modified">!   /*    properties of the corresponding face.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_SCALABLE ::                                           */</span>
<span class="line-modified">!   /*      The face contains outline glyphs.  Note that a face can contain  */</span>
<span class="line-modified">!   /*      bitmap strikes also, i.e., a face can have both this flag and    */</span>
<span class="line-modified">!   /*      @FT_FACE_FLAG_FIXED_SIZES set.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_FIXED_SIZES ::                                        */</span>
<span class="line-modified">!   /*      The face contains bitmap strikes.  See also the                  */</span>
<span class="line-modified">!   /*      `num_fixed_sizes&#39; and `available_sizes&#39; fields of @FT_FaceRec.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_FIXED_WIDTH ::                                        */</span>
<span class="line-modified">!   /*      The face contains fixed-width characters (like Courier, Lucida,  */</span>
<span class="line-modified">!   /*      MonoType, etc.).                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_SFNT ::                                               */</span>
<span class="line-modified">!   /*      The face uses the SFNT storage scheme.  For now, this means      */</span>
<span class="line-modified">!   /*      TrueType and OpenType.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_HORIZONTAL ::                                         */</span>
<span class="line-modified">!   /*      The face contains horizontal glyph metrics.  This should be set  */</span>
<span class="line-modified">!   /*      for all common formats.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_VERTICAL ::                                           */</span>
<span class="line-modified">!   /*      The face contains vertical glyph metrics.  This is only          */</span>
<span class="line-modified">!   /*      available in some formats, not all of them.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_KERNING ::                                            */</span>
<span class="line-modified">!   /*      The face contains kerning information.  If set, the kerning      */</span>
<span class="line-modified">!   /*      distance can be retrieved using the function @FT_Get_Kerning.    */</span>
<span class="line-modified">!   /*      Otherwise the function always return the vector (0,0).  Note     */</span>
<span class="line-modified">!   /*      that FreeType doesn&#39;t handle kerning data from the SFNT `GPOS&#39;   */</span>
<span class="line-modified">!   /*      table (as present in many OpenType fonts).                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_FAST_GLYPHS ::                                        */</span>
<span class="line-modified">!   /*      THIS FLAG IS DEPRECATED.  DO NOT USE OR TEST IT.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_MULTIPLE_MASTERS ::                                   */</span>
<span class="line-modified">!   /*      The face contains multiple masters and is capable of             */</span>
<span class="line-modified">!   /*      interpolating between them.  Supported formats are Adobe MM,     */</span>
<span class="line-modified">!   /*      TrueType GX, and OpenType variation fonts.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      See section @multiple_masters for API details.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_GLYPH_NAMES ::                                        */</span>
<span class="line-modified">!   /*      The face contains glyph names, which can be retrieved using      */</span>
<span class="line-modified">!   /*      @FT_Get_Glyph_Name.  Note that some TrueType fonts contain       */</span>
<span class="line-modified">!   /*      broken glyph name tables.  Use the function                      */</span>
<span class="line-modified">!   /*      @FT_Has_PS_Glyph_Names when needed.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_EXTERNAL_STREAM ::                                    */</span>
<span class="line-modified">!   /*      Used internally by FreeType to indicate that a face&#39;s stream was */</span>
<span class="line-modified">!   /*      provided by the client application and should not be destroyed   */</span>
<span class="line-modified">!   /*      when @FT_Done_Face is called.  Don&#39;t read or test this flag.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_HINTER ::                                             */</span>
<span class="line-modified">!   /*      The font driver has a hinting machine of its own.  For example,  */</span>
<span class="line-modified">!   /*      with TrueType fonts, it makes sense to use data from the SFNT    */</span>
<span class="line-modified">!   /*      `gasp&#39; table only if the native TrueType hinting engine (with    */</span>
<span class="line-modified">!   /*      the bytecode interpreter) is available and active.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_CID_KEYED ::                                          */</span>
<span class="line-modified">!   /*      The face is CID-keyed.  In that case, the face is not accessed   */</span>
<span class="line-modified">!   /*      by glyph indices but by CID values.  For subsetted CID-keyed     */</span>
<span class="line-modified">!   /*      fonts this has the consequence that not all index values are a   */</span>
<span class="line-modified">!   /*      valid argument to @FT_Load_Glyph.  Only the CID values for which */</span>
<span class="line-modified">!   /*      corresponding glyphs in the subsetted font exist make            */</span>
<span class="line-modified">!   /*      `FT_Load_Glyph&#39; return successfully; in all other cases you get  */</span>
<span class="line-modified">!   /*      an `FT_Err_Invalid_Argument&#39; error.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      Note that CID-keyed fonts that are in an SFNT wrapper (this is,  */</span>
<span class="line-modified">!   /*      all OpenType/CFF fonts) don&#39;t have this flag set since the       */</span>
<span class="line-modified">!   /*      glyphs are accessed in the normal way (using contiguous          */</span>
<span class="line-modified">!   /*      indices); the `CID-ness&#39; isn&#39;t visible to the application.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_TRICKY ::                                             */</span>
<span class="line-modified">!   /*      The face is `tricky&#39;, this is, it always needs the font format&#39;s */</span>
<span class="line-modified">!   /*      native hinting engine to get a reasonable result.  A typical     */</span>
<span class="line-modified">!   /*      example is the old Chinese font `mingli.ttf&#39; (but not            */</span>
<span class="line-modified">!   /*      `mingliu.ttc&#39;) that uses TrueType bytecode instructions to move  */</span>
<span class="line-modified">!   /*      and scale all of its subglyphs.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      It is not possible to auto-hint such fonts using                 */</span>
<span class="line-modified">!   /*      @FT_LOAD_FORCE_AUTOHINT; it will also ignore                     */</span>
<span class="line-modified">!   /*      @FT_LOAD_NO_HINTING.  You have to set both @FT_LOAD_NO_HINTING   */</span>
<span class="line-modified">!   /*      and @FT_LOAD_NO_AUTOHINT to really disable hinting; however, you */</span>
<span class="line-modified">!   /*      probably never want this except for demonstration purposes.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      Currently, there are about a dozen TrueType fonts in the list of */</span>
<span class="line-modified">!   /*      tricky fonts; they are hard-coded in file `ttobjs.c&#39;.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_COLOR ::                                              */</span>
<span class="line-modified">!   /*      [Since 2.5.1] The face has color glyph tables.  To access color  */</span>
<span class="line-modified">!   /*      glyphs use @FT_LOAD_COLOR.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FACE_FLAG_VARIATION ::                                          */</span>
<span class="line-modified">!   /*      [Since 2.9] Set if the current face (or named instance) has been */</span>
<span class="line-modified">!   /*      altered with @FT_Set_MM_Design_Coordinates,                      */</span>
<span class="line-modified">!   /*      @FT_Set_Var_Design_Coordinates, or                               */</span>
<span class="line-modified">!   /*      @FT_Set_Var_Blend_Coordinates.  This flag is unset by a call to  */</span>
<span class="line-modified">!   /*      @FT_Set_Named_Instance.                                          */</span>
<span class="line-removed">-   /*                                                                       */</span>
  #define FT_FACE_FLAG_SCALABLE          ( 1L &lt;&lt;  0 )
  #define FT_FACE_FLAG_FIXED_SIZES       ( 1L &lt;&lt;  1 )
  #define FT_FACE_FLAG_FIXED_WIDTH       ( 1L &lt;&lt;  2 )
  #define FT_FACE_FLAG_SFNT              ( 1L &lt;&lt;  3 )
  #define FT_FACE_FLAG_HORIZONTAL        ( 1L &lt;&lt;  4 )
<span class="line-new-header">--- 1095,120 ---</span>
      /*@private end */
  
    } FT_FaceRec;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_FACE_FLAG_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A list of bit flags used in the `face_flags` field of the @FT_FaceRec</span>
<span class="line-modified">!    *   structure.  They inform client applications of properties of the</span>
<span class="line-modified">!    *   corresponding face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_FACE_FLAG_SCALABLE ::</span>
<span class="line-modified">!    *     The face contains outline glyphs.  Note that a face can contain</span>
<span class="line-modified">!    *     bitmap strikes also, i.e., a face can have both this flag and</span>
<span class="line-modified">!    *     @FT_FACE_FLAG_FIXED_SIZES set.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_FIXED_SIZES ::</span>
<span class="line-modified">!    *     The face contains bitmap strikes.  See also the `num_fixed_sizes`</span>
<span class="line-modified">!    *     and `available_sizes` fields of @FT_FaceRec.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_FIXED_WIDTH ::</span>
<span class="line-modified">!    *     The face contains fixed-width characters (like Courier, Lucida,</span>
<span class="line-modified">!    *     MonoType, etc.).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_SFNT ::</span>
<span class="line-modified">!    *     The face uses the SFNT storage scheme.  For now, this means TrueType</span>
<span class="line-modified">!    *     and OpenType.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_HORIZONTAL ::</span>
<span class="line-modified">!    *     The face contains horizontal glyph metrics.  This should be set for</span>
<span class="line-modified">!    *     all common formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_VERTICAL ::</span>
<span class="line-modified">!    *     The face contains vertical glyph metrics.  This is only available in</span>
<span class="line-modified">!    *     some formats, not all of them.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_KERNING ::</span>
<span class="line-modified">!    *     The face contains kerning information.  If set, the kerning distance</span>
<span class="line-modified">!    *     can be retrieved using the function @FT_Get_Kerning.  Otherwise the</span>
<span class="line-modified">!    *     function always return the vector (0,0).  Note that FreeType doesn&#39;t</span>
<span class="line-modified">!    *     handle kerning data from the SFNT &#39;GPOS&#39; table (as present in many</span>
<span class="line-modified">!    *     OpenType fonts).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_FAST_GLYPHS ::</span>
<span class="line-modified">!    *     THIS FLAG IS DEPRECATED.  DO NOT USE OR TEST IT.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_MULTIPLE_MASTERS ::</span>
<span class="line-modified">!    *     The face contains multiple masters and is capable of interpolating</span>
<span class="line-modified">!    *     between them.  Supported formats are Adobe MM, TrueType GX, and</span>
<span class="line-modified">!    *     OpenType variation fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     See section @multiple_masters for API details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_GLYPH_NAMES ::</span>
<span class="line-modified">!    *     The face contains glyph names, which can be retrieved using</span>
<span class="line-modified">!    *     @FT_Get_Glyph_Name.  Note that some TrueType fonts contain broken</span>
<span class="line-modified">!    *     glyph name tables.  Use the function @FT_Has_PS_Glyph_Names when</span>
<span class="line-modified">!    *     needed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_EXTERNAL_STREAM ::</span>
<span class="line-modified">!    *     Used internally by FreeType to indicate that a face&#39;s stream was</span>
<span class="line-modified">!    *     provided by the client application and should not be destroyed when</span>
<span class="line-modified">!    *     @FT_Done_Face is called.  Don&#39;t read or test this flag.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_HINTER ::</span>
<span class="line-modified">!    *     The font driver has a hinting machine of its own.  For example, with</span>
<span class="line-modified">!    *     TrueType fonts, it makes sense to use data from the SFNT &#39;gasp&#39;</span>
<span class="line-modified">!    *     table only if the native TrueType hinting engine (with the bytecode</span>
<span class="line-modified">!    *     interpreter) is available and active.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_CID_KEYED ::</span>
<span class="line-modified">!    *     The face is CID-keyed.  In that case, the face is not accessed by</span>
<span class="line-modified">!    *     glyph indices but by CID values.  For subsetted CID-keyed fonts this</span>
<span class="line-modified">!    *     has the consequence that not all index values are a valid argument</span>
<span class="line-modified">!    *     to @FT_Load_Glyph.  Only the CID values for which corresponding</span>
<span class="line-modified">!    *     glyphs in the subsetted font exist make `FT_Load_Glyph` return</span>
<span class="line-modified">!    *     successfully; in all other cases you get an</span>
<span class="line-modified">!    *     `FT_Err_Invalid_Argument` error.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Note that CID-keyed fonts that are in an SFNT wrapper (this is, all</span>
<span class="line-modified">!    *     OpenType/CFF fonts) don&#39;t have this flag set since the glyphs are</span>
<span class="line-modified">!    *     accessed in the normal way (using contiguous indices); the</span>
<span class="line-modified">!    *     &#39;CID-ness&#39; isn&#39;t visible to the application.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_TRICKY ::</span>
<span class="line-modified">!    *     The face is &#39;tricky&#39;, this is, it always needs the font format&#39;s</span>
<span class="line-modified">!    *     native hinting engine to get a reasonable result.  A typical example</span>
<span class="line-modified">!    *     is the old Chinese font `mingli.ttf` (but not `mingliu.ttc`) that</span>
<span class="line-modified">!    *     uses TrueType bytecode instructions to move and scale all of its</span>
<span class="line-modified">!    *     subglyphs.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     It is not possible to auto-hint such fonts using</span>
<span class="line-modified">!    *     @FT_LOAD_FORCE_AUTOHINT; it will also ignore @FT_LOAD_NO_HINTING.</span>
<span class="line-modified">!    *     You have to set both @FT_LOAD_NO_HINTING and @FT_LOAD_NO_AUTOHINT to</span>
<span class="line-modified">!    *     really disable hinting; however, you probably never want this except</span>
<span class="line-modified">!    *     for demonstration purposes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Currently, there are about a dozen TrueType fonts in the list of</span>
<span class="line-modified">!    *     tricky fonts; they are hard-coded in file `ttobjs.c`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_COLOR ::</span>
<span class="line-modified">!    *     [Since 2.5.1] The face has color glyph tables.  See @FT_LOAD_COLOR</span>
<span class="line-modified">!    *     for more information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FACE_FLAG_VARIATION ::</span>
<span class="line-modified">!    *     [Since 2.9] Set if the current face (or named instance) has been</span>
<span class="line-modified">!    *     altered with @FT_Set_MM_Design_Coordinates,</span>
<span class="line-modified">!    *     @FT_Set_Var_Design_Coordinates, or @FT_Set_Var_Blend_Coordinates.</span>
<span class="line-modified">!    *     This flag is unset by a call to @FT_Set_Named_Instance.</span>
<span class="line-modified">!    */</span>
  #define FT_FACE_FLAG_SCALABLE          ( 1L &lt;&lt;  0 )
  #define FT_FACE_FLAG_FIXED_SIZES       ( 1L &lt;&lt;  1 )
  #define FT_FACE_FLAG_FIXED_WIDTH       ( 1L &lt;&lt;  2 )
  #define FT_FACE_FLAG_SFNT              ( 1L &lt;&lt;  3 )
  #define FT_FACE_FLAG_HORIZONTAL        ( 1L &lt;&lt;  4 )
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1252,149 ***</span>
  #define FT_FACE_FLAG_TRICKY            ( 1L &lt;&lt; 13 )
  #define FT_FACE_FLAG_COLOR             ( 1L &lt;&lt; 14 )
  #define FT_FACE_FLAG_VARIATION         ( 1L &lt;&lt; 15 )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_HORIZONTAL( face )</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains</span>
<span class="line-modified">!    *   horizontal metrics (this is true for all font formats though).</span>
     *
     * @also:
     *   @FT_HAS_VERTICAL can be used to check for vertical metrics.
     *
     */
  #define FT_HAS_HORIZONTAL( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_HORIZONTAL )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_VERTICAL( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains real
     *   vertical metrics (and not only synthesized ones).
     *
     */
  #define FT_HAS_VERTICAL( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VERTICAL )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_KERNING( face )</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains kerning</span>
<span class="line-modified">!    *   data that can be accessed with @FT_Get_Kerning.</span>
     *
     */
  #define FT_HAS_KERNING( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_KERNING )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_SCALABLE( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains a scalable
<span class="line-modified">!    *   font face (true for TrueType, Type~1, Type~42, CID, OpenType/CFF,</span>
<span class="line-modified">!    *   and PFR font formats).</span>
     *
     */
  #define FT_IS_SCALABLE( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SCALABLE )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_SFNT( face )</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains a font</span>
<span class="line-modified">!    *   whose format is based on the SFNT storage scheme.  This usually</span>
<span class="line-modified">!    *   means: TrueType fonts, OpenType fonts, as well as SFNT-based embedded</span>
<span class="line-modified">!    *   bitmap fonts.</span>
     *
     *   If this macro is true, all functions defined in @FT_SFNT_NAMES_H and
     *   @FT_TRUETYPE_TABLES_H are available.
     *
     */
  #define FT_IS_SFNT( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SFNT )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_FIXED_WIDTH( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains a font face
<span class="line-modified">!    *   that contains fixed-width (or `monospace&#39;, `fixed-pitch&#39;, etc.)</span>
     *   glyphs.
     *
     */
  #define FT_IS_FIXED_WIDTH( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_WIDTH )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_FIXED_SIZES( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains some
<span class="line-modified">!    *   embedded bitmaps.  See the `available_sizes&#39; field of the</span>
<span class="line-modified">!    *   @FT_FaceRec structure.</span>
     *
     */
  #define FT_HAS_FIXED_SIZES( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_SIZES )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_FAST_GLYPHS( face )</span>
     *
     * @description:
     *   Deprecated.
     *
     */
  #define FT_HAS_FAST_GLYPHS( face )  0
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_GLYPH_NAMES( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains some glyph
     *   names that can be accessed through @FT_Get_Glyph_Name.
     *
     */
  #define FT_HAS_GLYPH_NAMES( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_GLYPH_NAMES )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_MULTIPLE_MASTERS( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains some
     *   multiple masters.  The functions provided by @FT_MULTIPLE_MASTERS_H
     *   are then available to choose the exact design you want.
<span class="line-new-header">--- 1223,149 ---</span>
  #define FT_FACE_FLAG_TRICKY            ( 1L &lt;&lt; 13 )
  #define FT_FACE_FLAG_COLOR             ( 1L &lt;&lt; 14 )
  #define FT_FACE_FLAG_VARIATION         ( 1L &lt;&lt; 15 )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_HORIZONTAL</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains horizontal</span>
<span class="line-modified">!    *   metrics (this is true for all font formats though).</span>
     *
     * @also:
     *   @FT_HAS_VERTICAL can be used to check for vertical metrics.
     *
     */
  #define FT_HAS_HORIZONTAL( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_HORIZONTAL )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_VERTICAL</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains real
     *   vertical metrics (and not only synthesized ones).
     *
     */
  #define FT_HAS_VERTICAL( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VERTICAL )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_KERNING</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains kerning data</span>
<span class="line-modified">!    *   that can be accessed with @FT_Get_Kerning.</span>
     *
     */
  #define FT_HAS_KERNING( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_KERNING )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_SCALABLE</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains a scalable
<span class="line-modified">!    *   font face (true for TrueType, Type~1, Type~42, CID, OpenType/CFF, and</span>
<span class="line-modified">!    *   PFR font formats).</span>
     *
     */
  #define FT_IS_SCALABLE( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SCALABLE )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_SFNT</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains a font whose</span>
<span class="line-modified">!    *   format is based on the SFNT storage scheme.  This usually means:</span>
<span class="line-modified">!    *   TrueType fonts, OpenType fonts, as well as SFNT-based embedded bitmap</span>
<span class="line-modified">!    *   fonts.</span>
     *
     *   If this macro is true, all functions defined in @FT_SFNT_NAMES_H and
     *   @FT_TRUETYPE_TABLES_H are available.
     *
     */
  #define FT_IS_SFNT( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SFNT )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_FIXED_WIDTH</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains a font face
<span class="line-modified">!    *   that contains fixed-width (or &#39;monospace&#39;, &#39;fixed-pitch&#39;, etc.)</span>
     *   glyphs.
     *
     */
  #define FT_IS_FIXED_WIDTH( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_WIDTH )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_FIXED_SIZES</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains some
<span class="line-modified">!    *   embedded bitmaps.  See the `available_sizes` field of the @FT_FaceRec</span>
<span class="line-modified">!    *   structure.</span>
     *
     */
  #define FT_HAS_FIXED_SIZES( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_SIZES )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_FAST_GLYPHS</span>
     *
     * @description:
     *   Deprecated.
     *
     */
  #define FT_HAS_FAST_GLYPHS( face )  0
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_GLYPH_NAMES</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains some glyph
     *   names that can be accessed through @FT_Get_Glyph_Name.
     *
     */
  #define FT_HAS_GLYPH_NAMES( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_GLYPH_NAMES )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_MULTIPLE_MASTERS</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains some
     *   multiple masters.  The functions provided by @FT_MULTIPLE_MASTERS_H
     *   are then available to choose the exact design you want.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1402,14 ***</span>
     */
  #define FT_HAS_MULTIPLE_MASTERS( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_MULTIPLE_MASTERS )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_NAMED_INSTANCE( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object is a named instance
     *   of a GX or OpenType variation font.
     *
<span class="line-new-header">--- 1373,14 ---</span>
     */
  #define FT_HAS_MULTIPLE_MASTERS( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_MULTIPLE_MASTERS )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_NAMED_INSTANCE</span>
     *
     * @description:
     *   A macro that returns true whenever a face object is a named instance
     *   of a GX or OpenType variation font.
     *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1424,220 ***</span>
     */
  #define FT_IS_NAMED_INSTANCE( face ) \
            ( (face)-&gt;face_index &amp; 0x7FFF0000L )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_VARIATION( face )</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object has been altered</span>
<span class="line-modified">!    *   by @FT_Set_MM_Design_Coordinates, @FT_Set_Var_Design_Coordinates, or</span>
     *   @FT_Set_Var_Blend_Coordinates.
     *
     * @since:
     *   2.9
     *
     */
  #define FT_IS_VARIATION( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VARIATION )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_CID_KEYED( face )</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains a CID-keyed
<span class="line-modified">!    *   font.  See the discussion of @FT_FACE_FLAG_CID_KEYED for more</span>
<span class="line-removed">-    *   details.</span>
     *
     *   If this macro is true, all functions defined in @FT_CID_H are
     *   available.
     *
     */
  #define FT_IS_CID_KEYED( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_CID_KEYED )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_TRICKY( face )</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face represents a `tricky&#39; font.</span>
     *   See the discussion of @FT_FACE_FLAG_TRICKY for more details.
     *
     */
  #define FT_IS_TRICKY( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_TRICKY )
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_COLOR( face )</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains</span>
<span class="line-modified">!    *   tables for color glyphs.</span>
     *
     * @since:
     *   2.5.1
     *
     */
  #define FT_HAS_COLOR( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_COLOR )
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Const&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_STYLE_FLAG_XXX                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A list of bit flags to indicate the style of a given face.  These  */</span>
<span class="line-modified">!   /*    are used in the `style_flags&#39; field of @FT_FaceRec.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_STYLE_FLAG_ITALIC ::                                            */</span>
<span class="line-modified">!   /*      The face style is italic or oblique.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_STYLE_FLAG_BOLD ::                                              */</span>
<span class="line-modified">!   /*      The face is bold.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The style information as provided by FreeType is very basic.  More */</span>
<span class="line-modified">!   /*    details are beyond the scope and should be done on a higher level  */</span>
<span class="line-modified">!   /*    (for example, by analyzing various fields of the `OS/2&#39; table in   */</span>
<span class="line-modified">!   /*    SFNT based fonts).                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
  #define FT_STYLE_FLAG_ITALIC  ( 1 &lt;&lt; 0 )
  #define FT_STYLE_FLAG_BOLD    ( 1 &lt;&lt; 1 )
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Size_Internal                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An opaque handle to an `FT_Size_InternalRec&#39; structure, used to    */</span>
<span class="line-modified">!   /*    model private data of a given @FT_Size object.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_Size_InternalRec_*  FT_Size_Internal;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Size_Metrics                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    The size metrics structure gives the metrics of a size object.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    x_ppem       :: The width of the scaled EM square in pixels, hence */</span>
<span class="line-modified">!   /*                    the term `ppem&#39; (pixels per EM).  It is also       */</span>
<span class="line-modified">!   /*                    referred to as `nominal width&#39;.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    y_ppem       :: The height of the scaled EM square in pixels,      */</span>
<span class="line-modified">!   /*                    hence the term `ppem&#39; (pixels per EM).  It is also */</span>
<span class="line-modified">!   /*                    referred to as `nominal height&#39;.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    x_scale      :: A 16.16 fractional scaling value to convert        */</span>
<span class="line-modified">!   /*                    horizontal metrics from font units to 26.6         */</span>
<span class="line-modified">!   /*                    fractional pixels.  Only relevant for scalable     */</span>
<span class="line-modified">!   /*                    font formats.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    y_scale      :: A 16.16 fractional scaling value to convert        */</span>
<span class="line-modified">!   /*                    vertical metrics from font units to 26.6           */</span>
<span class="line-modified">!   /*                    fractional pixels.  Only relevant for scalable     */</span>
<span class="line-modified">!   /*                    font formats.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    ascender     :: The ascender in 26.6 fractional pixels, rounded up */</span>
<span class="line-modified">!   /*                    to an integer value.  See @FT_FaceRec for the      */</span>
<span class="line-modified">!   /*                    details.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    descender    :: The descender in 26.6 fractional pixels, rounded   */</span>
<span class="line-modified">!   /*                    down to an integer value.  See @FT_FaceRec for the */</span>
<span class="line-modified">!   /*                    details.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    height       :: The height in 26.6 fractional pixels, rounded to   */</span>
<span class="line-modified">!   /*                    an integer value.  See @FT_FaceRec for the         */</span>
<span class="line-modified">!   /*                    details.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    max_advance  :: The maximum advance width in 26.6 fractional       */</span>
<span class="line-modified">!   /*                    pixels, rounded to an integer value.  See          */</span>
<span class="line-modified">!   /*                    @FT_FaceRec for the details.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The scaling values, if relevant, are determined first during a     */</span>
<span class="line-modified">!   /*    size changing operation.  The remaining fields are then set by the */</span>
<span class="line-modified">!   /*    driver.  For scalable formats, they are usually set to scaled      */</span>
<span class="line-modified">!   /*    values of the corresponding fields in @FT_FaceRec.  Some values    */</span>
<span class="line-modified">!   /*    like ascender or descender are rounded for historical reasons;     */</span>
<span class="line-modified">!   /*    more precise values (for outline fonts) can be derived by scaling  */</span>
<span class="line-modified">!   /*    the corresponding @FT_FaceRec values manually, with code similar   */</span>
<span class="line-modified">!   /*    to the following.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      scaled_ascender = FT_MulFix( face-&gt;ascender,                     */</span>
<span class="line-modified">!   /*                                   size_metrics-&gt;y_scale );            */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Note that due to glyph hinting and the selected rendering mode     */</span>
<span class="line-modified">!   /*    these values are usually not exact; consequently, they must be     */</span>
<span class="line-modified">!   /*    treated as unreliable with an error margin of at least one pixel!  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Indeed, the only way to get the exact metrics is to render _all_   */</span>
<span class="line-modified">!   /*    glyphs.  As this would be a definite performance hit, it is up to  */</span>
<span class="line-modified">!   /*    client applications to perform such computations.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The `FT_Size_Metrics&#39; structure is valid for bitmap fonts also.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    *TrueType* *fonts* *with* *native* *bytecode* *hinting*            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    All applications that handle TrueType fonts with native hinting    */</span>
<span class="line-modified">!   /*    must be aware that TTFs expect different rounding of vertical font */</span>
<span class="line-modified">!   /*    dimensions.  The application has to cater for this, especially if  */</span>
<span class="line-modified">!   /*    it wants to rely on a TTF&#39;s vertical data (for example, to         */</span>
<span class="line-modified">!   /*    properly align box characters vertically).                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Only the application knows _in_ _advance_ that it is going to use  */</span>
<span class="line-modified">!   /*    native hinting for TTFs!  FreeType, on the other hand, selects the */</span>
<span class="line-modified">!   /*    hinting mode not at the time of creating an @FT_Size object but    */</span>
<span class="line-modified">!   /*    much later, namely while calling @FT_Load_Glyph.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Here is some pseudo code that illustrates a possible solution.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      font_format = FT_Get_Font_Format( face );                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      if ( !strcmp( font_format, &quot;TrueType&quot; ) &amp;&amp;                       */</span>
<span class="line-modified">!   /*           do_native_bytecode_hinting         )                        */</span>
<span class="line-modified">!   /*      {                                                                */</span>
<span class="line-modified">!   /*        ascender  = ROUND( FT_MulFix( face-&gt;ascender,                  */</span>
<span class="line-modified">!   /*                                      size_metrics-&gt;y_scale ) );       */</span>
<span class="line-modified">!   /*        descender = ROUND( FT_MulFix( face-&gt;descender,                 */</span>
<span class="line-modified">!   /*                                      size_metrics-&gt;y_scale ) );       */</span>
<span class="line-modified">!   /*      }                                                                */</span>
<span class="line-modified">!   /*      else                                                             */</span>
<span class="line-modified">!   /*      {                                                                */</span>
<span class="line-modified">!   /*        ascender  = size_metrics-&gt;ascender;                            */</span>
<span class="line-modified">!   /*        descender = size_metrics-&gt;descender;                           */</span>
<span class="line-modified">!   /*      }                                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      height      = size_metrics-&gt;height;                              */</span>
<span class="line-modified">!   /*      max_advance = size_metrics-&gt;max_advance;                         */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct  FT_Size_Metrics_
    {
      FT_UShort  x_ppem;      /* horizontal pixels per EM               */
      FT_UShort  y_ppem;      /* vertical pixels per EM                 */
  
<span class="line-new-header">--- 1395,218 ---</span>
     */
  #define FT_IS_NAMED_INSTANCE( face ) \
            ( (face)-&gt;face_index &amp; 0x7FFF0000L )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_VARIATION</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object has been altered by</span>
<span class="line-modified">!    *   @FT_Set_MM_Design_Coordinates, @FT_Set_Var_Design_Coordinates, or</span>
     *   @FT_Set_Var_Blend_Coordinates.
     *
     * @since:
     *   2.9
     *
     */
  #define FT_IS_VARIATION( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VARIATION )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_CID_KEYED</span>
     *
     * @description:
     *   A macro that returns true whenever a face object contains a CID-keyed
<span class="line-modified">!    *   font.  See the discussion of @FT_FACE_FLAG_CID_KEYED for more details.</span>
     *
     *   If this macro is true, all functions defined in @FT_CID_H are
     *   available.
     *
     */
  #define FT_IS_CID_KEYED( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_CID_KEYED )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_IS_TRICKY</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face represents a &#39;tricky&#39; font.</span>
     *   See the discussion of @FT_FACE_FLAG_TRICKY for more details.
     *
     */
  #define FT_IS_TRICKY( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_TRICKY )
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @macro:
<span class="line-modified">!    *   FT_HAS_COLOR</span>
     *
     * @description:
<span class="line-modified">!    *   A macro that returns true whenever a face object contains tables for</span>
<span class="line-modified">!    *   color glyphs.</span>
     *
     * @since:
     *   2.5.1
     *
     */
  #define FT_HAS_COLOR( face ) \
            ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_COLOR )
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_STYLE_FLAG_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A list of bit flags to indicate the style of a given face.  These are</span>
<span class="line-modified">!    *   used in the `style_flags` field of @FT_FaceRec.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_STYLE_FLAG_ITALIC ::</span>
<span class="line-modified">!    *     The face style is italic or oblique.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_STYLE_FLAG_BOLD ::</span>
<span class="line-modified">!    *     The face is bold.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The style information as provided by FreeType is very basic.  More</span>
<span class="line-modified">!    *   details are beyond the scope and should be done on a higher level (for</span>
<span class="line-modified">!    *   example, by analyzing various fields of the &#39;OS/2&#39; table in SFNT based</span>
<span class="line-modified">!    *   fonts).</span>
<span class="line-modified">!    */</span>
  #define FT_STYLE_FLAG_ITALIC  ( 1 &lt;&lt; 0 )
  #define FT_STYLE_FLAG_BOLD    ( 1 &lt;&lt; 1 )
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Size_Internal</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An opaque handle to an `FT_Size_InternalRec` structure, used to model</span>
<span class="line-modified">!    *   private data of a given @FT_Size object.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_Size_InternalRec_*  FT_Size_Internal;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Size_Metrics</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   The size metrics structure gives the metrics of a size object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   x_ppem ::</span>
<span class="line-modified">!    *     The width of the scaled EM square in pixels, hence the term &#39;ppem&#39;</span>
<span class="line-modified">!    *     (pixels per EM).  It is also referred to as &#39;nominal width&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   y_ppem ::</span>
<span class="line-modified">!    *     The height of the scaled EM square in pixels, hence the term &#39;ppem&#39;</span>
<span class="line-modified">!    *     (pixels per EM).  It is also referred to as &#39;nominal height&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   x_scale ::</span>
<span class="line-modified">!    *     A 16.16 fractional scaling value to convert horizontal metrics from</span>
<span class="line-modified">!    *     font units to 26.6 fractional pixels.  Only relevant for scalable</span>
<span class="line-modified">!    *     font formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   y_scale ::</span>
<span class="line-modified">!    *     A 16.16 fractional scaling value to convert vertical metrics from</span>
<span class="line-modified">!    *     font units to 26.6 fractional pixels.  Only relevant for scalable</span>
<span class="line-modified">!    *     font formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ascender ::</span>
<span class="line-modified">!    *     The ascender in 26.6 fractional pixels, rounded up to an integer</span>
<span class="line-modified">!    *     value.  See @FT_FaceRec for the details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   descender ::</span>
<span class="line-modified">!    *     The descender in 26.6 fractional pixels, rounded down to an integer</span>
<span class="line-modified">!    *     value.  See @FT_FaceRec for the details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     The height in 26.6 fractional pixels, rounded to an integer value.</span>
<span class="line-modified">!    *     See @FT_FaceRec for the details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_advance ::</span>
<span class="line-modified">!    *     The maximum advance width in 26.6 fractional pixels, rounded to an</span>
<span class="line-modified">!    *     integer value.  See @FT_FaceRec for the details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The scaling values, if relevant, are determined first during a size</span>
<span class="line-modified">!    *   changing operation.  The remaining fields are then set by the driver.</span>
<span class="line-modified">!    *   For scalable formats, they are usually set to scaled values of the</span>
<span class="line-modified">!    *   corresponding fields in @FT_FaceRec.  Some values like ascender or</span>
<span class="line-modified">!    *   descender are rounded for historical reasons; more precise values (for</span>
<span class="line-modified">!    *   outline fonts) can be derived by scaling the corresponding @FT_FaceRec</span>
<span class="line-modified">!    *   values manually, with code similar to the following.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     scaled_ascender = FT_MulFix( face-&gt;ascender,</span>
<span class="line-modified">!    *                                  size_metrics-&gt;y_scale );</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Note that due to glyph hinting and the selected rendering mode these</span>
<span class="line-modified">!    *   values are usually not exact; consequently, they must be treated as</span>
<span class="line-modified">!    *   unreliable with an error margin of at least one pixel!</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Indeed, the only way to get the exact metrics is to render _all_</span>
<span class="line-modified">!    *   glyphs.  As this would be a definite performance hit, it is up to</span>
<span class="line-modified">!    *   client applications to perform such computations.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The `FT_Size_Metrics` structure is valid for bitmap fonts also.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   **TrueType fonts with native bytecode hinting**</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   All applications that handle TrueType fonts with native hinting must</span>
<span class="line-modified">!    *   be aware that TTFs expect different rounding of vertical font</span>
<span class="line-modified">!    *   dimensions.  The application has to cater for this, especially if it</span>
<span class="line-modified">!    *   wants to rely on a TTF&#39;s vertical data (for example, to properly align</span>
<span class="line-modified">!    *   box characters vertically).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Only the application knows _in advance_ that it is going to use native</span>
<span class="line-modified">!    *   hinting for TTFs!  FreeType, on the other hand, selects the hinting</span>
<span class="line-modified">!    *   mode not at the time of creating an @FT_Size object but much later,</span>
<span class="line-modified">!    *   namely while calling @FT_Load_Glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Here is some pseudo code that illustrates a possible solution.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     font_format = FT_Get_Font_Format( face );</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     if ( !strcmp( font_format, &quot;TrueType&quot; ) &amp;&amp;</span>
<span class="line-modified">!    *          do_native_bytecode_hinting         )</span>
<span class="line-modified">!    *     {</span>
<span class="line-modified">!    *       ascender  = ROUND( FT_MulFix( face-&gt;ascender,</span>
<span class="line-modified">!    *                                     size_metrics-&gt;y_scale ) );</span>
<span class="line-modified">!    *       descender = ROUND( FT_MulFix( face-&gt;descender,</span>
<span class="line-modified">!    *                                     size_metrics-&gt;y_scale ) );</span>
<span class="line-modified">!    *     }</span>
<span class="line-modified">!    *     else</span>
<span class="line-modified">!    *     {</span>
<span class="line-modified">!    *       ascender  = size_metrics-&gt;ascender;</span>
<span class="line-modified">!    *       descender = size_metrics-&gt;descender;</span>
<span class="line-modified">!    *     }</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     height      = size_metrics-&gt;height;</span>
<span class="line-modified">!    *     max_advance = size_metrics-&gt;max_advance;</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    */</span>
    typedef struct  FT_Size_Metrics_
    {
      FT_UShort  x_ppem;      /* horizontal pixels per EM               */
      FT_UShort  y_ppem;      /* vertical pixels per EM                 */
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1650,270 ***</span>
      FT_Pos     max_advance; /* max horizontal advance, in 26.6 pixels */
  
    } FT_Size_Metrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_SizeRec                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    FreeType root size class structure.  A size object models a face   */</span>
<span class="line-modified">!   /*    object at a given size.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    face    :: Handle to the parent face object.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    generic :: A typeless pointer, unused by the FreeType library or   */</span>
<span class="line-modified">!   /*               any of its drivers.  It can be used by client           */</span>
<span class="line-modified">!   /*               applications to link their own data to each size        */</span>
<span class="line-modified">!   /*               object.                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    metrics :: Metrics for this size object.  This field is read-only. */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_SizeRec_
    {
      FT_Face           face;      /* parent face object              */
      FT_Generic        generic;   /* generic pointer for client uses */
      FT_Size_Metrics   metrics;   /* size metrics                    */
      FT_Size_Internal  internal;
  
    } FT_SizeRec;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_SubGlyph                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    The subglyph structure is an internal object used to describe      */</span>
<span class="line-modified">!   /*    subglyphs (for example, in the case of composites).                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The subglyph implementation is not part of the high-level API,     */</span>
<span class="line-modified">!   /*    hence the forward structure declaration.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    You can however retrieve subglyph information with                 */</span>
<span class="line-modified">!   /*    @FT_Get_SubGlyph_Info.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_SubGlyphRec_*  FT_SubGlyph;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Slot_Internal                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An opaque handle to an `FT_Slot_InternalRec&#39; structure, used to    */</span>
<span class="line-modified">!   /*    model private data of a given @FT_GlyphSlot object.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_Slot_InternalRec_*  FT_Slot_Internal;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_GlyphSlotRec                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    FreeType root glyph slot class structure.  A glyph slot is a       */</span>
<span class="line-modified">!   /*    container where individual glyphs can be loaded, be they in        */</span>
<span class="line-modified">!   /*    outline or bitmap format.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    library           :: A handle to the FreeType library instance     */</span>
<span class="line-modified">!   /*                         this slot belongs to.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face              :: A handle to the parent face object.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    next              :: In some cases (like some font tools), several */</span>
<span class="line-modified">!   /*                         glyph slots per face object can be a good     */</span>
<span class="line-modified">!   /*                         thing.  As this is rare, the glyph slots are  */</span>
<span class="line-modified">!   /*                         listed through a direct, single-linked list   */</span>
<span class="line-modified">!   /*                         using its `next&#39; field.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    generic           :: A typeless pointer unused by the FreeType     */</span>
<span class="line-modified">!   /*                         library or any of its drivers.  It can be     */</span>
<span class="line-modified">!   /*                         used by client applications to link their own */</span>
<span class="line-modified">!   /*                         data to each glyph slot object.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    metrics           :: The metrics of the last loaded glyph in the   */</span>
<span class="line-modified">!   /*                         slot.  The returned values depend on the last */</span>
<span class="line-modified">!   /*                         load flags (see the @FT_Load_Glyph API        */</span>
<span class="line-modified">!   /*                         function) and can be expressed either in 26.6 */</span>
<span class="line-modified">!   /*                         fractional pixels or font units.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                         Note that even when the glyph image is        */</span>
<span class="line-modified">!   /*                         transformed, the metrics are not.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    linearHoriAdvance :: The advance width of the unhinted glyph.      */</span>
<span class="line-modified">!   /*                         Its value is expressed in 16.16 fractional    */</span>
<span class="line-modified">!   /*                         pixels, unless @FT_LOAD_LINEAR_DESIGN is set  */</span>
<span class="line-modified">!   /*                         when loading the glyph.  This field can be    */</span>
<span class="line-modified">!   /*                         important to perform correct WYSIWYG layout.  */</span>
<span class="line-modified">!   /*                         Only relevant for outline glyphs.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    linearVertAdvance :: The advance height of the unhinted glyph.     */</span>
<span class="line-modified">!   /*                         Its value is expressed in 16.16 fractional    */</span>
<span class="line-modified">!   /*                         pixels, unless @FT_LOAD_LINEAR_DESIGN is set  */</span>
<span class="line-modified">!   /*                         when loading the glyph.  This field can be    */</span>
<span class="line-modified">!   /*                         important to perform correct WYSIWYG layout.  */</span>
<span class="line-modified">!   /*                         Only relevant for outline glyphs.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    advance           :: This shorthand is, depending on               */</span>
<span class="line-modified">!   /*                         @FT_LOAD_IGNORE_TRANSFORM, the transformed    */</span>
<span class="line-modified">!   /*                         (hinted) advance width for the glyph, in 26.6 */</span>
<span class="line-modified">!   /*                         fractional pixel format.  As specified with   */</span>
<span class="line-modified">!   /*                         @FT_LOAD_VERTICAL_LAYOUT, it uses either the  */</span>
<span class="line-modified">!   /*                         `horiAdvance&#39; or the `vertAdvance&#39; value of   */</span>
<span class="line-modified">!   /*                         `metrics&#39; field.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    format            :: This field indicates the format of the image  */</span>
<span class="line-modified">!   /*                         contained in the glyph slot.  Typically       */</span>
<span class="line-modified">!   /*                         @FT_GLYPH_FORMAT_BITMAP,                      */</span>
<span class="line-modified">!   /*                         @FT_GLYPH_FORMAT_OUTLINE, or                  */</span>
<span class="line-modified">!   /*                         @FT_GLYPH_FORMAT_COMPOSITE, but other values  */</span>
<span class="line-modified">!   /*                         are possible.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bitmap            :: This field is used as a bitmap descriptor.    */</span>
<span class="line-modified">!   /*                         Note that the address and content of the      */</span>
<span class="line-modified">!   /*                         bitmap buffer can change between calls of     */</span>
<span class="line-modified">!   /*                         @FT_Load_Glyph and a few other functions.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bitmap_left       :: The bitmap&#39;s left bearing expressed in        */</span>
<span class="line-modified">!   /*                         integer pixels.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bitmap_top        :: The bitmap&#39;s top bearing expressed in integer */</span>
<span class="line-modified">!   /*                         pixels.  This is the distance from the        */</span>
<span class="line-modified">!   /*                         baseline to the top-most glyph scanline,      */</span>
<span class="line-modified">!   /*                         upwards y~coordinates being *positive*.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    outline           :: The outline descriptor for the current glyph  */</span>
<span class="line-modified">!   /*                         image if its format is                        */</span>
<span class="line-modified">!   /*                         @FT_GLYPH_FORMAT_OUTLINE.  Once a glyph is    */</span>
<span class="line-modified">!   /*                         loaded, `outline&#39; can be transformed,         */</span>
<span class="line-modified">!   /*                         distorted, emboldened, etc.  However, it must */</span>
<span class="line-modified">!   /*                         not be freed.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_subglyphs     :: The number of subglyphs in a composite glyph. */</span>
<span class="line-modified">!   /*                         This field is only valid for the composite    */</span>
<span class="line-modified">!   /*                         glyph format that should normally only be     */</span>
<span class="line-modified">!   /*                         loaded with the @FT_LOAD_NO_RECURSE flag.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    subglyphs         :: An array of subglyph descriptors for          */</span>
<span class="line-modified">!   /*                         composite glyphs.  There are `num_subglyphs&#39;  */</span>
<span class="line-modified">!   /*                         elements in there.  Currently internal to     */</span>
<span class="line-modified">!   /*                         FreeType.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    control_data      :: Certain font drivers can also return the      */</span>
<span class="line-modified">!   /*                         control data for a given glyph image (e.g.    */</span>
<span class="line-modified">!   /*                         TrueType bytecode, Type~1 charstrings, etc.). */</span>
<span class="line-modified">!   /*                         This field is a pointer to such data; it is   */</span>
<span class="line-modified">!   /*                         currently internal to FreeType.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    control_len       :: This is the length in bytes of the control    */</span>
<span class="line-modified">!   /*                         data.  Currently internal to FreeType.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    other             :: Reserved.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    lsb_delta         :: The difference between hinted and unhinted    */</span>
<span class="line-modified">!   /*                         left side bearing while auto-hinting is       */</span>
<span class="line-modified">!   /*                         active.  Zero otherwise.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    rsb_delta         :: The difference between hinted and unhinted    */</span>
<span class="line-modified">!   /*                         right side bearing while auto-hinting is      */</span>
<span class="line-modified">!   /*                         active.  Zero otherwise.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    If @FT_Load_Glyph is called with default flags (see                */</span>
<span class="line-modified">!   /*    @FT_LOAD_DEFAULT) the glyph image is loaded in the glyph slot in   */</span>
<span class="line-modified">!   /*    its native format (e.g., an outline glyph for TrueType and Type~1  */</span>
<span class="line-modified">!   /*    formats).  [Since 2.9] The prospective bitmap metrics are          */</span>
<span class="line-modified">!   /*    calculated according to @FT_LOAD_TARGET_XXX and other flags even   */</span>
<span class="line-modified">!   /*    for the outline glyph, even if @FT_LOAD_RENDER is not set.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This image can later be converted into a bitmap by calling         */</span>
<span class="line-modified">!   /*    @FT_Render_Glyph.  This function searches the current renderer for */</span>
<span class="line-modified">!   /*    the native image&#39;s format, then invokes it.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The renderer is in charge of transforming the native image through */</span>
<span class="line-modified">!   /*    the slot&#39;s face transformation fields, then converting it into a   */</span>
<span class="line-modified">!   /*    bitmap that is returned in `slot-&gt;bitmap&#39;.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Note that `slot-&gt;bitmap_left&#39; and `slot-&gt;bitmap_top&#39; are also used */</span>
<span class="line-modified">!   /*    to specify the position of the bitmap relative to the current pen  */</span>
<span class="line-modified">!   /*    position (e.g., coordinates (0,0) on the baseline).  Of course,    */</span>
<span class="line-modified">!   /*    `slot-&gt;format&#39; is also changed to @FT_GLYPH_FORMAT_BITMAP.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Here is a small pseudo code fragment that shows how to use         */</span>
<span class="line-modified">!   /*    `lsb_delta&#39; and `rsb_delta&#39; to do fractional positioning of        */</span>
<span class="line-modified">!   /*    glyphs:                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      FT_GlyphSlot  slot     = face-&gt;glyph;                            */</span>
<span class="line-modified">!   /*      FT_Pos        origin_x = 0;                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      for all glyphs do                                                */</span>
<span class="line-modified">!   /*        &lt;load glyph with `FT_Load_Glyph&#39;&gt;                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        FT_Outline_Translate( slot-&gt;outline, origin_x &amp; 63, 0 );       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        &lt;save glyph image, or render glyph, or ...&gt;                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        &lt;compute kern between current and next glyph                   */</span>
<span class="line-modified">!   /*         and add it to `origin_x&#39;&gt;                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        origin_x += slot-&gt;advance.x;                                   */</span>
<span class="line-modified">!   /*        origin_x += slot-&gt;rsb_delta - slot-&gt;lsb_delta;                 */</span>
<span class="line-modified">!   /*      endfor                                                           */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Here is another small pseudo code fragment that shows how to use   */</span>
<span class="line-modified">!   /*    `lsb_delta&#39; and `rsb_delta&#39; to improve integer positioning of      */</span>
<span class="line-modified">!   /*    glyphs:                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      FT_GlyphSlot  slot           = face-&gt;glyph;                      */</span>
<span class="line-modified">!   /*      FT_Pos        origin_x       = 0;                                */</span>
<span class="line-modified">!   /*      FT_Pos        prev_rsb_delta = 0;                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      for all glyphs do                                                */</span>
<span class="line-modified">!   /*        &lt;compute kern between current and previous glyph               */</span>
<span class="line-modified">!   /*         and add it to `origin_x&#39;&gt;                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        &lt;load glyph with `FT_Load_Glyph&#39;&gt;                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        if ( prev_rsb_delta - slot-&gt;lsb_delta &gt;  32 )                  */</span>
<span class="line-modified">!   /*          origin_x -= 64;                                              */</span>
<span class="line-modified">!   /*        else if ( prev_rsb_delta - slot-&gt;lsb_delta &lt; -31 )             */</span>
<span class="line-modified">!   /*          origin_x += 64;                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        prev_rsb_delta = slot-&gt;rsb_delta;                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        &lt;save glyph image, or render glyph, or ...&gt;                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        origin_x += slot-&gt;advance.x;                                   */</span>
<span class="line-modified">!   /*      endfor                                                           */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If you use strong auto-hinting, you *must* apply these delta       */</span>
<span class="line-modified">!   /*    values!  Otherwise you will experience far too large inter-glyph   */</span>
<span class="line-modified">!   /*    spacing at small rendering sizes in most cases.  Note that it      */</span>
<span class="line-modified">!   /*    doesn&#39;t harm to use the above code for other hinting modes also,   */</span>
<span class="line-modified">!   /*    since the delta values are zero then.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_GlyphSlotRec_
    {
      FT_Library        library;
      FT_Face           face;
      FT_GlyphSlot      next;
<span class="line-modified">!     FT_UInt           reserved;       /* retained for binary compatibility */</span>
      FT_Generic        generic;
  
      FT_Glyph_Metrics  metrics;
      FT_Fixed          linearHoriAdvance;
      FT_Fixed          linearVertAdvance;
<span class="line-new-header">--- 1619,276 ---</span>
      FT_Pos     max_advance; /* max horizontal advance, in 26.6 pixels */
  
    } FT_Size_Metrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_SizeRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   FreeType root size class structure.  A size object models a face</span>
<span class="line-modified">!    *   object at a given size.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     Handle to the parent face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   generic ::</span>
<span class="line-modified">!    *     A typeless pointer, unused by the FreeType library or any of its</span>
<span class="line-modified">!    *     drivers.  It can be used by client applications to link their own</span>
<span class="line-modified">!    *     data to each size object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   metrics ::</span>
<span class="line-added">+    *     Metrics for this size object.  This field is read-only.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_SizeRec_
    {
      FT_Face           face;      /* parent face object              */
      FT_Generic        generic;   /* generic pointer for client uses */
      FT_Size_Metrics   metrics;   /* size metrics                    */
      FT_Size_Internal  internal;
  
    } FT_SizeRec;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_SubGlyph</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   The subglyph structure is an internal object used to describe</span>
<span class="line-modified">!    *   subglyphs (for example, in the case of composites).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The subglyph implementation is not part of the high-level API, hence</span>
<span class="line-modified">!    *   the forward structure declaration.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   You can however retrieve subglyph information with</span>
<span class="line-modified">!    *   @FT_Get_SubGlyph_Info.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_SubGlyphRec_*  FT_SubGlyph;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Slot_Internal</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An opaque handle to an `FT_Slot_InternalRec` structure, used to model</span>
<span class="line-modified">!    *   private data of a given @FT_GlyphSlot object.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_Slot_InternalRec_*  FT_Slot_Internal;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_GlyphSlotRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   FreeType root glyph slot class structure.  A glyph slot is a container</span>
<span class="line-modified">!    *   where individual glyphs can be loaded, be they in outline or bitmap</span>
<span class="line-modified">!    *   format.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   library ::</span>
<span class="line-modified">!    *     A handle to the FreeType library instance this slot belongs to.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the parent face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   next ::</span>
<span class="line-modified">!    *     In some cases (like some font tools), several glyph slots per face</span>
<span class="line-modified">!    *     object can be a good thing.  As this is rare, the glyph slots are</span>
<span class="line-modified">!    *     listed through a direct, single-linked list using its `next` field.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_index ::</span>
<span class="line-modified">!    *     [Since 2.10] The glyph index passed as an argument to @FT_Load_Glyph</span>
<span class="line-modified">!    *     while initializing the glyph slot.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   generic ::</span>
<span class="line-modified">!    *     A typeless pointer unused by the FreeType library or any of its</span>
<span class="line-modified">!    *     drivers.  It can be used by client applications to link their own</span>
<span class="line-modified">!    *     data to each glyph slot object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   metrics ::</span>
<span class="line-modified">!    *     The metrics of the last loaded glyph in the slot.  The returned</span>
<span class="line-modified">!    *     values depend on the last load flags (see the @FT_Load_Glyph API</span>
<span class="line-modified">!    *     function) and can be expressed either in 26.6 fractional pixels or</span>
<span class="line-modified">!    *     font units.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Note that even when the glyph image is transformed, the metrics are</span>
<span class="line-modified">!    *     not.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   linearHoriAdvance ::</span>
<span class="line-modified">!    *     The advance width of the unhinted glyph.  Its value is expressed in</span>
<span class="line-modified">!    *     16.16 fractional pixels, unless @FT_LOAD_LINEAR_DESIGN is set when</span>
<span class="line-modified">!    *     loading the glyph.  This field can be important to perform correct</span>
<span class="line-modified">!    *     WYSIWYG layout.  Only relevant for outline glyphs.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   linearVertAdvance ::</span>
<span class="line-modified">!    *     The advance height of the unhinted glyph.  Its value is expressed in</span>
<span class="line-modified">!    *     16.16 fractional pixels, unless @FT_LOAD_LINEAR_DESIGN is set when</span>
<span class="line-modified">!    *     loading the glyph.  This field can be important to perform correct</span>
<span class="line-modified">!    *     WYSIWYG layout.  Only relevant for outline glyphs.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   advance ::</span>
<span class="line-modified">!    *     This shorthand is, depending on @FT_LOAD_IGNORE_TRANSFORM, the</span>
<span class="line-modified">!    *     transformed (hinted) advance width for the glyph, in 26.6 fractional</span>
<span class="line-modified">!    *     pixel format.  As specified with @FT_LOAD_VERTICAL_LAYOUT, it uses</span>
<span class="line-modified">!    *     either the `horiAdvance` or the `vertAdvance` value of `metrics`</span>
<span class="line-modified">!    *     field.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   format ::</span>
<span class="line-modified">!    *     This field indicates the format of the image contained in the glyph</span>
<span class="line-modified">!    *     slot.  Typically @FT_GLYPH_FORMAT_BITMAP, @FT_GLYPH_FORMAT_OUTLINE,</span>
<span class="line-modified">!    *     or @FT_GLYPH_FORMAT_COMPOSITE, but other values are possible.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bitmap ::</span>
<span class="line-modified">!    *     This field is used as a bitmap descriptor.  Note that the address</span>
<span class="line-modified">!    *     and content of the bitmap buffer can change between calls of</span>
<span class="line-modified">!    *     @FT_Load_Glyph and a few other functions.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bitmap_left ::</span>
<span class="line-modified">!    *     The bitmap&#39;s left bearing expressed in integer pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bitmap_top ::</span>
<span class="line-modified">!    *     The bitmap&#39;s top bearing expressed in integer pixels.  This is the</span>
<span class="line-modified">!    *     distance from the baseline to the top-most glyph scanline, upwards</span>
<span class="line-modified">!    *     y~coordinates being **positive**.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   outline ::</span>
<span class="line-modified">!    *     The outline descriptor for the current glyph image if its format is</span>
<span class="line-modified">!    *     @FT_GLYPH_FORMAT_OUTLINE.  Once a glyph is loaded, `outline` can be</span>
<span class="line-modified">!    *     transformed, distorted, emboldened, etc.  However, it must not be</span>
<span class="line-modified">!    *     freed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     [Since 2.10.1] If @FT_LOAD_NO_SCALE is set, outline coordinates of</span>
<span class="line-modified">!    *     OpenType variation fonts for a selected instance are internally</span>
<span class="line-modified">!    *     handled as 26.6 fractional font units but returned as (rounded)</span>
<span class="line-modified">!    *     integers, as expected.  To get unrounded font units, don&#39;t use</span>
<span class="line-modified">!    *     @FT_LOAD_NO_SCALE but load the glyph with @FT_LOAD_NO_HINTING and</span>
<span class="line-modified">!    *     scale it, using the font&#39;s `units_per_EM` value as the ppem.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_subglyphs ::</span>
<span class="line-modified">!    *     The number of subglyphs in a composite glyph.  This field is only</span>
<span class="line-modified">!    *     valid for the composite glyph format that should normally only be</span>
<span class="line-modified">!    *     loaded with the @FT_LOAD_NO_RECURSE flag.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   subglyphs ::</span>
<span class="line-modified">!    *     An array of subglyph descriptors for composite glyphs.  There are</span>
<span class="line-modified">!    *     `num_subglyphs` elements in there.  Currently internal to FreeType.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   control_data ::</span>
<span class="line-modified">!    *     Certain font drivers can also return the control data for a given</span>
<span class="line-modified">!    *     glyph image (e.g.  TrueType bytecode, Type~1 charstrings, etc.).</span>
<span class="line-modified">!    *     This field is a pointer to such data; it is currently internal to</span>
<span class="line-modified">!    *     FreeType.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   control_len ::</span>
<span class="line-modified">!    *     This is the length in bytes of the control data.  Currently internal</span>
<span class="line-modified">!    *     to FreeType.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   other ::</span>
<span class="line-modified">!    *     Reserved.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   lsb_delta ::</span>
<span class="line-modified">!    *     The difference between hinted and unhinted left side bearing while</span>
<span class="line-modified">!    *     auto-hinting is active.  Zero otherwise.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   rsb_delta ::</span>
<span class="line-modified">!    *     The difference between hinted and unhinted right side bearing while</span>
<span class="line-modified">!    *     auto-hinting is active.  Zero otherwise.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   If @FT_Load_Glyph is called with default flags (see @FT_LOAD_DEFAULT)</span>
<span class="line-modified">!    *   the glyph image is loaded in the glyph slot in its native format</span>
<span class="line-modified">!    *   (e.g., an outline glyph for TrueType and Type~1 formats).  [Since 2.9]</span>
<span class="line-modified">!    *   The prospective bitmap metrics are calculated according to</span>
<span class="line-modified">!    *   @FT_LOAD_TARGET_XXX and other flags even for the outline glyph, even</span>
<span class="line-modified">!    *   if @FT_LOAD_RENDER is not set.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This image can later be converted into a bitmap by calling</span>
<span class="line-modified">!    *   @FT_Render_Glyph.  This function searches the current renderer for the</span>
<span class="line-modified">!    *   native image&#39;s format, then invokes it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The renderer is in charge of transforming the native image through the</span>
<span class="line-modified">!    *   slot&#39;s face transformation fields, then converting it into a bitmap</span>
<span class="line-modified">!    *   that is returned in `slot-&gt;bitmap`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Note that `slot-&gt;bitmap_left` and `slot-&gt;bitmap_top` are also used to</span>
<span class="line-modified">!    *   specify the position of the bitmap relative to the current pen</span>
<span class="line-modified">!    *   position (e.g., coordinates (0,0) on the baseline).  Of course,</span>
<span class="line-modified">!    *   `slot-&gt;format` is also changed to @FT_GLYPH_FORMAT_BITMAP.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Here is a small pseudo code fragment that shows how to use `lsb_delta`</span>
<span class="line-modified">!    *   and `rsb_delta` to do fractional positioning of glyphs:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     FT_GlyphSlot  slot     = face-&gt;glyph;</span>
<span class="line-modified">!    *     FT_Pos        origin_x = 0;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     for all glyphs do</span>
<span class="line-modified">!    *       &lt;load glyph with `FT_Load_Glyph&#39;&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       FT_Outline_Translate( slot-&gt;outline, origin_x &amp; 63, 0 );</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       &lt;save glyph image, or render glyph, or ...&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       &lt;compute kern between current and next glyph</span>
<span class="line-modified">!    *        and add it to `origin_x&#39;&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       origin_x += slot-&gt;advance.x;</span>
<span class="line-modified">!    *       origin_x += slot-&gt;lsb_delta - slot-&gt;rsb_delta;</span>
<span class="line-modified">!    *     endfor</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Here is another small pseudo code fragment that shows how to use</span>
<span class="line-modified">!    *   `lsb_delta` and `rsb_delta` to improve integer positioning of glyphs:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     FT_GlyphSlot  slot           = face-&gt;glyph;</span>
<span class="line-modified">!    *     FT_Pos        origin_x       = 0;</span>
<span class="line-modified">!    *     FT_Pos        prev_rsb_delta = 0;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     for all glyphs do</span>
<span class="line-modified">!    *       &lt;compute kern between current and previous glyph</span>
<span class="line-modified">!    *        and add it to `origin_x&#39;&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       &lt;load glyph with `FT_Load_Glyph&#39;&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       if ( prev_rsb_delta - slot-&gt;lsb_delta &gt;  32 )</span>
<span class="line-modified">!    *         origin_x -= 64;</span>
<span class="line-modified">!    *       else if ( prev_rsb_delta - slot-&gt;lsb_delta &lt; -31 )</span>
<span class="line-modified">!    *         origin_x += 64;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       prev_rsb_delta = slot-&gt;rsb_delta;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       &lt;save glyph image, or render glyph, or ...&gt;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       origin_x += slot-&gt;advance.x;</span>
<span class="line-modified">!    *     endfor</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If you use strong auto-hinting, you **must** apply these delta values!</span>
<span class="line-modified">!    *   Otherwise you will experience far too large inter-glyph spacing at</span>
<span class="line-added">+    *   small rendering sizes in most cases.  Note that it doesn&#39;t harm to use</span>
<span class="line-added">+    *   the above code for other hinting modes also, since the delta values</span>
<span class="line-added">+    *   are zero then.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_GlyphSlotRec_
    {
      FT_Library        library;
      FT_Face           face;
      FT_GlyphSlot      next;
<span class="line-modified">!     FT_UInt           glyph_index; /* new in 2.10; was reserved previously */</span>
      FT_Generic        generic;
  
      FT_Glyph_Metrics  metrics;
      FT_Fixed          linearHoriAdvance;
      FT_Fixed          linearVertAdvance;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1950,191 ***</span>
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Init_FreeType                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Initialize a new FreeType library object.  The set of modules      */</span>
<span class="line-modified">!   /*    that are registered by this function is determined at build time.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    alibrary :: A handle to a new library object.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    In case you want to provide your own memory allocating routines,   */</span>
<span class="line-modified">!   /*    use @FT_New_Library instead, followed by a call to                 */</span>
<span class="line-modified">!   /*    @FT_Add_Default_Modules (or a series of calls to @FT_Add_Module)   */</span>
<span class="line-modified">!   /*    and @FT_Set_Default_Properties.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    See the documentation of @FT_Library and @FT_Face for              */</span>
<span class="line-modified">!   /*    multi-threading issues.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If you need reference-counting (cf. @FT_Reference_Library), use    */</span>
<span class="line-modified">!   /*    @FT_New_Library and @FT_Done_Library.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If compilation option FT_CONFIG_OPTION_ENVIRONMENT_PROPERTIES is   */</span>
<span class="line-modified">!   /*    set, this function reads the `FREETYPE_PROPERTIES&#39; environment     */</span>
<span class="line-modified">!   /*    variable to control driver properties.  See section @properties    */</span>
<span class="line-modified">!   /*    for more.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Init_FreeType( FT_Library  *alibrary );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Done_FreeType                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Destroy a given FreeType library object and all of its children,   */</span>
<span class="line-modified">!   /*    including resources, drivers, faces, sizes, etc.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    library :: A handle to the target library object.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Done_FreeType( FT_Library  library );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_OPEN_XXX                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A list of bit field constants used within the `flags&#39; field of the */</span>
<span class="line-modified">!   /*    @FT_Open_Args structure.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_OPEN_MEMORY   :: This is a memory-based stream.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OPEN_STREAM   :: Copy the stream from the `stream&#39; field.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OPEN_PATHNAME :: Create a new input stream from a C~path        */</span>
<span class="line-modified">!   /*                        name.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OPEN_DRIVER   :: Use the `driver&#39; field.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OPEN_PARAMS   :: Use the `num_params&#39; and `params&#39; fields.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The `FT_OPEN_MEMORY&#39;, `FT_OPEN_STREAM&#39;, and `FT_OPEN_PATHNAME&#39;     */</span>
<span class="line-modified">!   /*    flags are mutually exclusive.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
  #define FT_OPEN_MEMORY    0x1
  #define FT_OPEN_STREAM    0x2
  #define FT_OPEN_PATHNAME  0x4
  #define FT_OPEN_DRIVER    0x8
  #define FT_OPEN_PARAMS    0x10
  
  
<span class="line-modified">!   /* these constants are deprecated; use the corresponding `FT_OPEN_XXX&#39; */</span>
    /* values instead                                                      */
  #define ft_open_memory    FT_OPEN_MEMORY
  #define ft_open_stream    FT_OPEN_STREAM
  #define ft_open_pathname  FT_OPEN_PATHNAME
  #define ft_open_driver    FT_OPEN_DRIVER
  #define ft_open_params    FT_OPEN_PARAMS
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Parameter                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A simple structure to pass more or less generic parameters to      */</span>
<span class="line-modified">!   /*    @FT_Open_Face and @FT_Face_Properties.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    tag  :: A four-byte identification tag.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    data :: A pointer to the parameter data.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The ID and function of parameters are driver-specific.  See        */</span>
<span class="line-modified">!   /*    section @parameter_tags for more information.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   typedef struct  FT_Parameter_</span>
<span class="line-modified">!   {</span>
<span class="line-modified">!     FT_ULong    tag;</span>
      FT_Pointer  data;
  
    } FT_Parameter;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Open_Args                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure to indicate how to open a new font file or stream.  A  */</span>
<span class="line-modified">!   /*    pointer to such a structure can be used as a parameter for the     */</span>
<span class="line-modified">!   /*    functions @FT_Open_Face and @FT_Attach_Stream.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    flags       :: A set of bit flags indicating how to use the        */</span>
<span class="line-modified">!   /*                   structure.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    memory_base :: The first byte of the file in memory.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    memory_size :: The size in bytes of the file in memory.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pathname    :: A pointer to an 8-bit file pathname.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stream      :: A handle to a source stream object.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    driver      :: This field is exclusively used by @FT_Open_Face;    */</span>
<span class="line-modified">!   /*                   it simply specifies the font driver to use for      */</span>
<span class="line-modified">!   /*                   opening the face.  If set to NULL, FreeType tries   */</span>
<span class="line-modified">!   /*                   to load the face with each one of the drivers in    */</span>
<span class="line-modified">!   /*                   its list.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_params  :: The number of extra parameters.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    params      :: Extra parameters passed to the font driver when     */</span>
<span class="line-modified">!   /*                   opening a new face.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The stream type is determined by the contents of `flags&#39; that      */</span>
<span class="line-modified">!   /*    are tested in the following order by @FT_Open_Face:                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If the @FT_OPEN_MEMORY bit is set, assume that this is a           */</span>
<span class="line-modified">!   /*    memory file of `memory_size&#39; bytes, located at `memory_address&#39;.   */</span>
<span class="line-modified">!   /*    The data are not copied, and the client is responsible for         */</span>
<span class="line-modified">!   /*    releasing and destroying them _after_ the corresponding call to    */</span>
<span class="line-modified">!   /*    @FT_Done_Face.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Otherwise, if the @FT_OPEN_STREAM bit is set, assume that a        */</span>
<span class="line-modified">!   /*    custom input stream `stream&#39; is used.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Otherwise, if the @FT_OPEN_PATHNAME bit is set, assume that this   */</span>
<span class="line-modified">!   /*    is a normal file and use `pathname&#39; to open it.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If the @FT_OPEN_DRIVER bit is set, @FT_Open_Face only tries to     */</span>
<span class="line-modified">!   /*    open the file with the driver whose handler is in `driver&#39;.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If the @FT_OPEN_PARAMS bit is set, the parameters given by         */</span>
<span class="line-modified">!   /*    `num_params&#39; and `params&#39; is used.  They are ignored otherwise.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Ideally, both the `pathname&#39; and `params&#39; fields should be tagged  */</span>
<span class="line-modified">!   /*    as `const&#39;; this is missing for API backward compatibility.  In    */</span>
<span class="line-modified">!   /*    other words, applications should treat them as read-only.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Open_Args_
    {
      FT_UInt         flags;
      const FT_Byte*  memory_base;
      FT_Long         memory_size;
<span class="line-new-header">--- 1925,203 ---</span>
    /*                                                                       */
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Init_FreeType</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Initialize a new FreeType library object.  The set of modules that are</span>
<span class="line-modified">!    *   registered by this function is determined at build time.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   alibrary ::</span>
<span class="line-modified">!    *     A handle to a new library object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   In case you want to provide your own memory allocating routines, use</span>
<span class="line-modified">!    *   @FT_New_Library instead, followed by a call to @FT_Add_Default_Modules</span>
<span class="line-modified">!    *   (or a series of calls to @FT_Add_Module) and</span>
<span class="line-modified">!    *   @FT_Set_Default_Properties.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   See the documentation of @FT_Library and @FT_Face for multi-threading</span>
<span class="line-modified">!    *   issues.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If you need reference-counting (cf. @FT_Reference_Library), use</span>
<span class="line-modified">!    *   @FT_New_Library and @FT_Done_Library.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If compilation option `FT_CONFIG_OPTION_ENVIRONMENT_PROPERTIES` is</span>
<span class="line-modified">!    *   set, this function reads the `FREETYPE_PROPERTIES` environment</span>
<span class="line-modified">!    *   variable to control driver properties.  See section @properties for</span>
<span class="line-modified">!    *   more.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Init_FreeType( FT_Library  *alibrary );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Done_FreeType</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Destroy a given FreeType library object and all of its children,</span>
<span class="line-modified">!    *   including resources, drivers, faces, sizes, etc.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   library ::</span>
<span class="line-modified">!    *     A handle to the target library object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Done_FreeType( FT_Library  library );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_OPEN_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A list of bit field constants used within the `flags` field of the</span>
<span class="line-modified">!    *   @FT_Open_Args structure.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_OPEN_MEMORY ::</span>
<span class="line-modified">!    *     This is a memory-based stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OPEN_STREAM ::</span>
<span class="line-modified">!    *     Copy the stream from the `stream` field.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OPEN_PATHNAME ::</span>
<span class="line-modified">!    *     Create a new input stream from a C~path name.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OPEN_DRIVER ::</span>
<span class="line-modified">!    *     Use the `driver` field.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OPEN_PARAMS ::</span>
<span class="line-modified">!    *     Use the `num_params` and `params` fields.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    * @note:</span>
<span class="line-added">+    *   The `FT_OPEN_MEMORY`, `FT_OPEN_STREAM`, and `FT_OPEN_PATHNAME` flags</span>
<span class="line-added">+    *   are mutually exclusive.</span>
<span class="line-added">+    */</span>
  #define FT_OPEN_MEMORY    0x1
  #define FT_OPEN_STREAM    0x2
  #define FT_OPEN_PATHNAME  0x4
  #define FT_OPEN_DRIVER    0x8
  #define FT_OPEN_PARAMS    0x10
  
  
<span class="line-modified">!   /* these constants are deprecated; use the corresponding `FT_OPEN_XXX` */</span>
    /* values instead                                                      */
  #define ft_open_memory    FT_OPEN_MEMORY
  #define ft_open_stream    FT_OPEN_STREAM
  #define ft_open_pathname  FT_OPEN_PATHNAME
  #define ft_open_driver    FT_OPEN_DRIVER
  #define ft_open_params    FT_OPEN_PARAMS
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Parameter</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A simple structure to pass more or less generic parameters to</span>
<span class="line-modified">!    *   @FT_Open_Face and @FT_Face_Properties.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   tag ::</span>
<span class="line-modified">!    *     A four-byte identification tag.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   data ::</span>
<span class="line-modified">!    *     A pointer to the parameter data.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The ID and function of parameters are driver-specific.  See section</span>
<span class="line-modified">!    *   @parameter_tags for more information.</span>
<span class="line-modified">!    */</span>
<span class="line-modified">!   typedef struct  FT_Parameter_</span>
<span class="line-added">+   {</span>
<span class="line-added">+     FT_ULong    tag;</span>
      FT_Pointer  data;
  
    } FT_Parameter;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Open_Args</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure to indicate how to open a new font file or stream.  A</span>
<span class="line-modified">!    *   pointer to such a structure can be used as a parameter for the</span>
<span class="line-modified">!    *   functions @FT_Open_Face and @FT_Attach_Stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   flags ::</span>
<span class="line-modified">!    *     A set of bit flags indicating how to use the structure.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   memory_base ::</span>
<span class="line-modified">!    *     The first byte of the file in memory.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   memory_size ::</span>
<span class="line-modified">!    *     The size in bytes of the file in memory.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pathname ::</span>
<span class="line-modified">!    *     A pointer to an 8-bit file pathname.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     A handle to a source stream object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   driver ::</span>
<span class="line-modified">!    *     This field is exclusively used by @FT_Open_Face; it simply specifies</span>
<span class="line-modified">!    *     the font driver to use for opening the face.  If set to `NULL`,</span>
<span class="line-modified">!    *     FreeType tries to load the face with each one of the drivers in its</span>
<span class="line-modified">!    *     list.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_params ::</span>
<span class="line-modified">!    *     The number of extra parameters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   params ::</span>
<span class="line-modified">!    *     Extra parameters passed to the font driver when opening a new face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The stream type is determined by the contents of `flags` that are</span>
<span class="line-modified">!    *   tested in the following order by @FT_Open_Face:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If the @FT_OPEN_MEMORY bit is set, assume that this is a memory file</span>
<span class="line-modified">!    *   of `memory_size` bytes, located at `memory_address`.  The data are not</span>
<span class="line-modified">!    *   copied, and the client is responsible for releasing and destroying</span>
<span class="line-modified">!    *   them _after_ the corresponding call to @FT_Done_Face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Otherwise, if the @FT_OPEN_STREAM bit is set, assume that a custom</span>
<span class="line-modified">!    *   input stream `stream` is used.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Otherwise, if the @FT_OPEN_PATHNAME bit is set, assume that this is a</span>
<span class="line-modified">!    *   normal file and use `pathname` to open it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If the @FT_OPEN_DRIVER bit is set, @FT_Open_Face only tries to open</span>
<span class="line-modified">!    *   the file with the driver whose handler is in `driver`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If the @FT_OPEN_PARAMS bit is set, the parameters given by</span>
<span class="line-modified">!    *   `num_params` and `params` is used.  They are ignored otherwise.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   Ideally, both the `pathname` and `params` fields should be tagged as</span>
<span class="line-added">+    *   &#39;const&#39;; this is missing for API backward compatibility.  In other</span>
<span class="line-added">+    *   words, applications should treat them as read-only.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Open_Args_
    {
      FT_UInt         flags;
      const FT_Byte*  memory_base;
      FT_Long         memory_size;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2145,429 ***</span>
      FT_Parameter*   params;
  
    } FT_Open_Args;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_New_Face                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Call @FT_Open_Face to open a font by its pathname.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    library    :: A handle to the library resource.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    pathname   :: A path to the font file.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_index :: See @FT_Open_Face for a detailed description of this */</span>
<span class="line-modified">!   /*                  parameter.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    aface      :: A handle to a new face object.  If `face_index&#39; is   */</span>
<span class="line-modified">!   /*                  greater than or equal to zero, it must be non-NULL.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Use @FT_Done_Face to destroy the created @FT_Face object (along    */</span>
<span class="line-modified">!   /*    with its slot and sizes).                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_New_Face( FT_Library   library,
                 const char*  filepathname,
                 FT_Long      face_index,
                 FT_Face     *aface );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_New_Memory_Face                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Call @FT_Open_Face to open a font that has been loaded into        */</span>
<span class="line-modified">!   /*    memory.                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    library    :: A handle to the library resource.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    file_base  :: A pointer to the beginning of the font data.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    file_size  :: The size of the memory chunk used by the font data.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_index :: See @FT_Open_Face for a detailed description of this */</span>
<span class="line-modified">!   /*                  parameter.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    aface      :: A handle to a new face object.  If `face_index&#39; is   */</span>
<span class="line-modified">!   /*                  greater than or equal to zero, it must be non-NULL.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    You must not deallocate the memory before calling @FT_Done_Face.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_New_Memory_Face( FT_Library      library,
                        const FT_Byte*  file_base,
                        FT_Long         file_size,
                        FT_Long         face_index,
                        FT_Face        *aface );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Open_Face                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Create a face object from a given resource described by            */</span>
<span class="line-modified">!   /*    @FT_Open_Args.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    library    :: A handle to the library resource.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    args       :: A pointer to an `FT_Open_Args&#39; structure that must   */</span>
<span class="line-modified">!   /*                  be filled by the caller.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    face_index :: This field holds two different values.  Bits 0-15    */</span>
<span class="line-modified">!   /*                  are the index of the face in the font file (starting */</span>
<span class="line-modified">!   /*                  with value~0).  Set it to~0 if there is only one     */</span>
<span class="line-modified">!   /*                  face in the font file.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                  [Since 2.6.1] Bits 16-30 are relevant to GX and      */</span>
<span class="line-modified">!   /*                  OpenType variation fonts only, specifying the named  */</span>
<span class="line-modified">!   /*                  instance index for the current face index (starting  */</span>
<span class="line-modified">!   /*                  with value~1; value~0 makes FreeType ignore named    */</span>
<span class="line-modified">!   /*                  instances).  For non-variation fonts, bits 16-30 are */</span>
<span class="line-modified">!   /*                  ignored.  Assuming that you want to access the third */</span>
<span class="line-modified">!   /*                  named instance in face~4, `face_index&#39; should be set */</span>
<span class="line-modified">!   /*                  to 0x00030004.  If you want to access face~4 without */</span>
<span class="line-modified">!   /*                  variation handling, simply set `face_index&#39; to       */</span>
<span class="line-modified">!   /*                  value~4.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                  `FT_Open_Face&#39; and its siblings can be used to       */</span>
<span class="line-modified">!   /*                  quickly check whether the font format of a given     */</span>
<span class="line-modified">!   /*                  font resource is supported by FreeType.  In general, */</span>
<span class="line-modified">!   /*                  if the `face_index&#39; argument is negative, the        */</span>
<span class="line-modified">!   /*                  function&#39;s return value is~0 if the font format is   */</span>
<span class="line-modified">!   /*                  recognized, or non-zero otherwise.  The function     */</span>
<span class="line-modified">!   /*                  allocates a more or less empty face handle in        */</span>
<span class="line-modified">!   /*                  `*aface&#39; (if `aface&#39; isn&#39;t NULL); the only two       */</span>
<span class="line-modified">!   /*                  useful fields in this special case are               */</span>
<span class="line-modified">!   /*                  `face-&gt;num_faces&#39; and `face-&gt;style_flags&#39;.  For any  */</span>
<span class="line-modified">!   /*                  negative value of `face_index&#39;, `face-&gt;num_faces&#39;    */</span>
<span class="line-modified">!   /*                  gives the number of faces within the font file.  For */</span>
<span class="line-modified">!   /*                  the negative value `-(N+1)&#39; (with `N&#39; a non-negative */</span>
<span class="line-modified">!   /*                  16-bit value), bits 16-30 in `face-&gt;style_flags&#39;     */</span>
<span class="line-modified">!   /*                  give the number of named instances in face `N&#39; if we */</span>
<span class="line-modified">!   /*                  have a variation font (or zero otherwise).  After    */</span>
<span class="line-modified">!   /*                  examination, the returned @FT_Face structure should  */</span>
<span class="line-modified">!   /*                  be deallocated with a call to @FT_Done_Face.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    aface      :: A handle to a new face object.  If `face_index&#39; is   */</span>
<span class="line-modified">!   /*                  greater than or equal to zero, it must be non-NULL.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Unlike FreeType 1.x, this function automatically creates a glyph   */</span>
<span class="line-modified">!   /*    slot for the face object that can be accessed directly through     */</span>
<span class="line-modified">!   /*    `face-&gt;glyph&#39;.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Each new face object created with this function also owns a        */</span>
<span class="line-modified">!   /*    default @FT_Size object, accessible as `face-&gt;size&#39;.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    One @FT_Library instance can have multiple face objects, this is,  */</span>
<span class="line-modified">!   /*    @FT_Open_Face and its siblings can be called multiple times using  */</span>
<span class="line-modified">!   /*    the same `library&#39; argument.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    See the discussion of reference counters in the description of     */</span>
<span class="line-modified">!   /*    @FT_Reference_Face.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    To loop over all faces, use code similar to the following snippet  */</span>
<span class="line-modified">!   /*    (omitting the error handling).                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      ...                                                              */</span>
<span class="line-modified">!   /*      FT_Face  face;                                                   */</span>
<span class="line-modified">!   /*      FT_Long  i, num_faces;                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      error = FT_Open_Face( library, args, -1, &amp;face );                */</span>
<span class="line-modified">!   /*      if ( error ) { ... }                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      num_faces = face-&gt;num_faces;                                     */</span>
<span class="line-modified">!   /*      FT_Done_Face( face );                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      for ( i = 0; i &lt; num_faces; i++ )                                */</span>
<span class="line-modified">!   /*      {                                                                */</span>
<span class="line-modified">!   /*        ...                                                            */</span>
<span class="line-modified">!   /*        error = FT_Open_Face( library, args, i, &amp;face );               */</span>
<span class="line-modified">!   /*        ...                                                            */</span>
<span class="line-modified">!   /*        FT_Done_Face( face );                                          */</span>
<span class="line-modified">!   /*        ...                                                            */</span>
<span class="line-modified">!   /*      }                                                                */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    To loop over all valid values for `face_index&#39;, use something      */</span>
<span class="line-modified">!   /*    similar to the following snippet, again without error handling.    */</span>
<span class="line-modified">!   /*    The code accesses all faces immediately (thus only a single call   */</span>
<span class="line-modified">!   /*    of `FT_Open_Face&#39; within the do-loop), with and without named      */</span>
<span class="line-modified">!   /*    instances.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      ...                                                              */</span>
<span class="line-modified">!   /*      FT_Face  face;                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      FT_Long  num_faces     = 0;                                      */</span>
<span class="line-modified">!   /*      FT_Long  num_instances = 0;                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      FT_Long  face_idx     = 0;                                       */</span>
<span class="line-modified">!   /*      FT_Long  instance_idx = 0;                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      do                                                               */</span>
<span class="line-modified">!   /*      {                                                                */</span>
<span class="line-modified">!   /*        FT_Long  id = ( instance_idx &lt;&lt; 16 ) + face_idx;               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        error = FT_Open_Face( library, args, id, &amp;face );              */</span>
<span class="line-modified">!   /*        if ( error ) { ... }                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        num_faces     = face-&gt;num_faces;                               */</span>
<span class="line-modified">!   /*        num_instances = face-&gt;style_flags &gt;&gt; 16;                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        ...                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        FT_Done_Face( face );                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        if ( instance_idx &lt; num_instances )                            */</span>
<span class="line-modified">!   /*          instance_idx++;                                              */</span>
<span class="line-modified">!   /*        else                                                           */</span>
<span class="line-modified">!   /*        {                                                              */</span>
<span class="line-modified">!   /*          face_idx++;                                                  */</span>
<span class="line-modified">!   /*          instance_idx = 0;                                            */</span>
<span class="line-modified">!   /*        }                                                              */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*      } while ( face_idx &lt; num_faces )                                 */</span>
<span class="line-removed">-   /*    }                                                                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Open_Face( FT_Library           library,
                  const FT_Open_Args*  args,
                  FT_Long              face_index,
                  FT_Face             *aface );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Attach_File                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Call @FT_Attach_Stream to attach a file.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face         :: The target face object.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    filepathname :: The pathname.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Attach_File( FT_Face      face,
                    const char*  filepathname );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Attach_Stream                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    `Attach&#39; data to a face object.  Normally, this is used to read    */</span>
<span class="line-modified">!   /*    additional information for the face object.  For example, you can  */</span>
<span class="line-modified">!   /*    attach an AFM file that comes with a Type~1 font to get the        */</span>
<span class="line-modified">!   /*    kerning values and other metrics.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face       :: The target face object.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    parameters :: A pointer to @FT_Open_Args that must be filled by    */</span>
<span class="line-modified">!   /*                  the caller.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The meaning of the `attach&#39; (i.e., what really happens when the    */</span>
<span class="line-modified">!   /*    new file is read) is not fixed by FreeType itself.  It really      */</span>
<span class="line-modified">!   /*    depends on the font format (and thus the font driver).             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Client applications are expected to know what they are doing       */</span>
<span class="line-modified">!   /*    when invoking this function.  Most drivers simply do not implement */</span>
<span class="line-modified">!   /*    file or stream attachments.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Attach_Stream( FT_Face        face,
                      FT_Open_Args*  parameters );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Reference_Face                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A counter gets initialized to~1 at the time an @FT_Face structure  */</span>
<span class="line-modified">!   /*    is created.  This function increments the counter.  @FT_Done_Face  */</span>
<span class="line-modified">!   /*    then only destroys a face if the counter is~1, otherwise it simply */</span>
<span class="line-modified">!   /*    decrements the counter.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This function helps in managing life-cycles of structures that     */</span>
<span class="line-modified">!   /*    reference @FT_Face objects.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to a target face object.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.4.2                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Reference_Face( FT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Done_Face                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Discard a given face object, as well as all of its child slots and */</span>
<span class="line-modified">!   /*    sizes.                                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to a target face object.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    See the discussion of reference counters in the description of     */</span>
<span class="line-modified">!   /*    @FT_Reference_Face.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Done_Face( FT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Select_Size                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Select a bitmap strike.  To be more precise, this function sets    */</span>
<span class="line-modified">!   /*    the scaling factors of the active @FT_Size object in a face so     */</span>
<span class="line-modified">!   /*    that bitmaps from this particular strike are taken by              */</span>
<span class="line-modified">!   /*    @FT_Load_Glyph and friends.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face         :: A handle to a target face object.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    strike_index :: The index of the bitmap strike in the              */</span>
<span class="line-modified">!   /*                    `available_sizes&#39; field of @FT_FaceRec structure.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    For bitmaps embedded in outline fonts it is common that only a     */</span>
<span class="line-modified">!   /*    subset of the available glyphs at a given ppem value is available. */</span>
<span class="line-modified">!   /*    FreeType silently uses outlines if there is no bitmap for a given  */</span>
<span class="line-modified">!   /*    glyph index.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    For GX and OpenType variation fonts, a bitmap strike makes sense   */</span>
<span class="line-modified">!   /*    only if the default instance is active (this is, no glyph          */</span>
<span class="line-modified">!   /*    variation takes place); otherwise, FreeType simply ignores bitmap  */</span>
<span class="line-modified">!   /*    strikes.  The same is true for all named instances that are        */</span>
<span class="line-modified">!   /*    different from the default instance.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Select_Size( FT_Face  face,
                    FT_Int   strike_index );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Size_Request_Type                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An enumeration type that lists the supported size request types,   */</span>
<span class="line-modified">!   /*    i.e., what input size (in font units) maps to the requested output */</span>
<span class="line-modified">!   /*    size (in pixels, as computed from the arguments of                 */</span>
<span class="line-modified">!   /*    @FT_Size_Request).                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_SIZE_REQUEST_TYPE_NOMINAL ::                                    */</span>
<span class="line-modified">!   /*      The nominal size.  The `units_per_EM&#39; field of @FT_FaceRec is    */</span>
<span class="line-modified">!   /*      used to determine both scaling values.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      This is the standard scaling found in most applications.  In     */</span>
<span class="line-modified">!   /*      particular, use this size request type for TrueType fonts if     */</span>
<span class="line-modified">!   /*      they provide optical scaling or something similar.  Note,        */</span>
<span class="line-modified">!   /*      however, that `units_per_EM&#39; is a rather abstract value which    */</span>
<span class="line-modified">!   /*      bears no relation to the actual size of the glyphs in a font.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_SIZE_REQUEST_TYPE_REAL_DIM ::                                   */</span>
<span class="line-modified">!   /*      The real dimension.  The sum of the `ascender&#39; and (minus of)    */</span>
<span class="line-modified">!   /*      the `descender&#39; fields of @FT_FaceRec is used to determine both  */</span>
<span class="line-modified">!   /*      scaling values.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_SIZE_REQUEST_TYPE_BBOX ::                                       */</span>
<span class="line-modified">!   /*      The font bounding box.  The width and height of the `bbox&#39; field */</span>
<span class="line-modified">!   /*      of @FT_FaceRec are used to determine the horizontal and vertical */</span>
<span class="line-modified">!   /*      scaling value, respectively.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_SIZE_REQUEST_TYPE_CELL ::                                       */</span>
<span class="line-modified">!   /*      The `max_advance_width&#39; field of @FT_FaceRec is used to          */</span>
<span class="line-modified">!   /*      determine the horizontal scaling value; the vertical scaling     */</span>
<span class="line-modified">!   /*      value is determined the same way as                              */</span>
<span class="line-modified">!   /*      @FT_SIZE_REQUEST_TYPE_REAL_DIM does.  Finally, both scaling      */</span>
<span class="line-modified">!   /*      values are set to the smaller one.  This type is useful if you   */</span>
<span class="line-modified">!   /*      want to specify the font size for, say, a window of a given      */</span>
<span class="line-modified">!   /*      dimension and 80x24 cells.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_SIZE_REQUEST_TYPE_SCALES ::                                     */</span>
<span class="line-modified">!   /*      Specify the scaling values directly.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The above descriptions only apply to scalable formats.  For bitmap */</span>
<span class="line-modified">!   /*    formats, the behaviour is up to the driver.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    See the note section of @FT_Size_Metrics if you wonder how size    */</span>
<span class="line-removed">-   /*    requesting relates to scaling values.                              */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef enum  FT_Size_Request_Type_
    {
      FT_SIZE_REQUEST_TYPE_NOMINAL,
      FT_SIZE_REQUEST_TYPE_REAL_DIM,
      FT_SIZE_REQUEST_TYPE_BBOX,
<span class="line-new-header">--- 2132,435 ---</span>
      FT_Parameter*   params;
  
    } FT_Open_Args;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_New_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Call @FT_Open_Face to open a font by its pathname.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   library ::</span>
<span class="line-modified">!    *     A handle to the library resource.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   pathname ::</span>
<span class="line-modified">!    *     A path to the font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_index ::</span>
<span class="line-modified">!    *     See @FT_Open_Face for a detailed description of this parameter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   aface ::</span>
<span class="line-modified">!    *     A handle to a new face object.  If `face_index` is greater than or</span>
<span class="line-modified">!    *     equal to zero, it must be non-`NULL`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-added">+    *   Use @FT_Done_Face to destroy the created @FT_Face object (along with</span>
<span class="line-added">+    *   its slot and sizes).</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_New_Face( FT_Library   library,
                 const char*  filepathname,
                 FT_Long      face_index,
                 FT_Face     *aface );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_New_Memory_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Call @FT_Open_Face to open a font that has been loaded into memory.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   library ::</span>
<span class="line-modified">!    *     A handle to the library resource.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   file_base ::</span>
<span class="line-modified">!    *     A pointer to the beginning of the font data.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   file_size ::</span>
<span class="line-modified">!    *     The size of the memory chunk used by the font data.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_index ::</span>
<span class="line-modified">!    *     See @FT_Open_Face for a detailed description of this parameter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   aface ::</span>
<span class="line-modified">!    *     A handle to a new face object.  If `face_index` is greater than or</span>
<span class="line-modified">!    *     equal to zero, it must be non-`NULL`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    * @note:</span>
<span class="line-added">+    *   You must not deallocate the memory before calling @FT_Done_Face.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_New_Memory_Face( FT_Library      library,
                        const FT_Byte*  file_base,
                        FT_Long         file_size,
                        FT_Long         face_index,
                        FT_Face        *aface );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Open_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Create a face object from a given resource described by @FT_Open_Args.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   library ::</span>
<span class="line-modified">!    *     A handle to the library resource.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   args ::</span>
<span class="line-modified">!    *     A pointer to an `FT_Open_Args` structure that must be filled by the</span>
<span class="line-modified">!    *     caller.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   face_index ::</span>
<span class="line-modified">!    *     This field holds two different values.  Bits 0-15 are the index of</span>
<span class="line-modified">!    *     the face in the font file (starting with value~0).  Set it to~0 if</span>
<span class="line-modified">!    *     there is only one face in the font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     [Since 2.6.1] Bits 16-30 are relevant to GX and OpenType variation</span>
<span class="line-modified">!    *     fonts only, specifying the named instance index for the current face</span>
<span class="line-modified">!    *     index (starting with value~1; value~0 makes FreeType ignore named</span>
<span class="line-modified">!    *     instances).  For non-variation fonts, bits 16-30 are ignored.</span>
<span class="line-modified">!    *     Assuming that you want to access the third named instance in face~4,</span>
<span class="line-modified">!    *     `face_index` should be set to 0x00030004.  If you want to access</span>
<span class="line-modified">!    *     face~4 without variation handling, simply set `face_index` to</span>
<span class="line-modified">!    *     value~4.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     `FT_Open_Face` and its siblings can be used to quickly check whether</span>
<span class="line-modified">!    *     the font format of a given font resource is supported by FreeType.</span>
<span class="line-modified">!    *     In general, if the `face_index` argument is negative, the function&#39;s</span>
<span class="line-modified">!    *     return value is~0 if the font format is recognized, or non-zero</span>
<span class="line-modified">!    *     otherwise.  The function allocates a more or less empty face handle</span>
<span class="line-modified">!    *     in `*aface` (if `aface` isn&#39;t `NULL`); the only two useful fields in</span>
<span class="line-modified">!    *     this special case are `face-&gt;num_faces` and `face-&gt;style_flags`.</span>
<span class="line-modified">!    *     For any negative value of `face_index`, `face-&gt;num_faces` gives the</span>
<span class="line-modified">!    *     number of faces within the font file.  For the negative value</span>
<span class="line-modified">!    *     &#39;-(N+1)&#39; (with &#39;N&#39; a non-negative 16-bit value), bits 16-30 in</span>
<span class="line-modified">!    *     `face-&gt;style_flags` give the number of named instances in face &#39;N&#39;</span>
<span class="line-modified">!    *     if we have a variation font (or zero otherwise).  After examination,</span>
<span class="line-modified">!    *     the returned @FT_Face structure should be deallocated with a call to</span>
<span class="line-modified">!    *     @FT_Done_Face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   aface ::</span>
<span class="line-modified">!    *     A handle to a new face object.  If `face_index` is greater than or</span>
<span class="line-modified">!    *     equal to zero, it must be non-`NULL`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Unlike FreeType 1.x, this function automatically creates a glyph slot</span>
<span class="line-modified">!    *   for the face object that can be accessed directly through</span>
<span class="line-modified">!    *   `face-&gt;glyph`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Each new face object created with this function also owns a default</span>
<span class="line-modified">!    *   @FT_Size object, accessible as `face-&gt;size`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   One @FT_Library instance can have multiple face objects, this is,</span>
<span class="line-modified">!    *   @FT_Open_Face and its siblings can be called multiple times using the</span>
<span class="line-modified">!    *   same `library` argument.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   See the discussion of reference counters in the description of</span>
<span class="line-modified">!    *   @FT_Reference_Face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @example:</span>
<span class="line-modified">!    *   To loop over all faces, use code similar to the following snippet</span>
<span class="line-modified">!    *   (omitting the error handling).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     ...</span>
<span class="line-modified">!    *     FT_Face  face;</span>
<span class="line-modified">!    *     FT_Long  i, num_faces;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     error = FT_Open_Face( library, args, -1, &amp;face );</span>
<span class="line-modified">!    *     if ( error ) { ... }</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     num_faces = face-&gt;num_faces;</span>
<span class="line-modified">!    *     FT_Done_Face( face );</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     for ( i = 0; i &lt; num_faces; i++ )</span>
<span class="line-modified">!    *     {</span>
<span class="line-modified">!    *       ...</span>
<span class="line-modified">!    *       error = FT_Open_Face( library, args, i, &amp;face );</span>
<span class="line-modified">!    *       ...</span>
<span class="line-modified">!    *       FT_Done_Face( face );</span>
<span class="line-modified">!    *       ...</span>
<span class="line-modified">!    *     }</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   To loop over all valid values for `face_index`, use something similar</span>
<span class="line-modified">!    *   to the following snippet, again without error handling.  The code</span>
<span class="line-modified">!    *   accesses all faces immediately (thus only a single call of</span>
<span class="line-modified">!    *   `FT_Open_Face` within the do-loop), with and without named instances.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     ...</span>
<span class="line-modified">!    *     FT_Face  face;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     FT_Long  num_faces     = 0;</span>
<span class="line-modified">!    *     FT_Long  num_instances = 0;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     FT_Long  face_idx     = 0;</span>
<span class="line-modified">!    *     FT_Long  instance_idx = 0;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     do</span>
<span class="line-modified">!    *     {</span>
<span class="line-modified">!    *       FT_Long  id = ( instance_idx &lt;&lt; 16 ) + face_idx;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       error = FT_Open_Face( library, args, id, &amp;face );</span>
<span class="line-modified">!    *       if ( error ) { ... }</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       num_faces     = face-&gt;num_faces;</span>
<span class="line-modified">!    *       num_instances = face-&gt;style_flags &gt;&gt; 16;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       ...</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       FT_Done_Face( face );</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       if ( instance_idx &lt; num_instances )</span>
<span class="line-modified">!    *         instance_idx++;</span>
<span class="line-modified">!    *       else</span>
<span class="line-modified">!    *       {</span>
<span class="line-modified">!    *         face_idx++;</span>
<span class="line-modified">!    *         instance_idx = 0;</span>
<span class="line-modified">!    *       }</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     } while ( face_idx &lt; num_faces )</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_Error )
    FT_Open_Face( FT_Library           library,
                  const FT_Open_Args*  args,
                  FT_Long              face_index,
                  FT_Face             *aface );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Attach_File</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Call @FT_Attach_Stream to attach a file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   filepathname ::</span>
<span class="line-modified">!    *     The pathname.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0~means success.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Attach_File( FT_Face      face,
                    const char*  filepathname );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Attach_Stream</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   &#39;Attach&#39; data to a face object.  Normally, this is used to read</span>
<span class="line-modified">!    *   additional information for the face object.  For example, you can</span>
<span class="line-modified">!    *   attach an AFM file that comes with a Type~1 font to get the kerning</span>
<span class="line-modified">!    *   values and other metrics.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     The target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   parameters ::</span>
<span class="line-modified">!    *     A pointer to @FT_Open_Args that must be filled by the caller.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The meaning of the &#39;attach&#39; (i.e., what really happens when the new</span>
<span class="line-modified">!    *   file is read) is not fixed by FreeType itself.  It really depends on</span>
<span class="line-modified">!    *   the font format (and thus the font driver).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Client applications are expected to know what they are doing when</span>
<span class="line-modified">!    *   invoking this function.  Most drivers simply do not implement file or</span>
<span class="line-modified">!    *   stream attachments.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Attach_Stream( FT_Face        face,
                      FT_Open_Args*  parameters );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Reference_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A counter gets initialized to~1 at the time an @FT_Face structure is</span>
<span class="line-modified">!    *   created.  This function increments the counter.  @FT_Done_Face then</span>
<span class="line-modified">!    *   only destroys a face if the counter is~1, otherwise it simply</span>
<span class="line-modified">!    *   decrements the counter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This function helps in managing life-cycles of structures that</span>
<span class="line-modified">!    *   reference @FT_Face objects.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.4.2</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Reference_Face( FT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Done_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Discard a given face object, as well as all of its child slots and</span>
<span class="line-modified">!    *   sizes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   See the discussion of reference counters in the description of</span>
<span class="line-modified">!    *   @FT_Reference_Face.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Done_Face( FT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Select_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Select a bitmap strike.  To be more precise, this function sets the</span>
<span class="line-modified">!    *   scaling factors of the active @FT_Size object in a face so that</span>
<span class="line-modified">!    *   bitmaps from this particular strike are taken by @FT_Load_Glyph and</span>
<span class="line-modified">!    *   friends.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   strike_index ::</span>
<span class="line-modified">!    *     The index of the bitmap strike in the `available_sizes` field of</span>
<span class="line-modified">!    *     @FT_FaceRec structure.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   For bitmaps embedded in outline fonts it is common that only a subset</span>
<span class="line-modified">!    *   of the available glyphs at a given ppem value is available.  FreeType</span>
<span class="line-modified">!    *   silently uses outlines if there is no bitmap for a given glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   For GX and OpenType variation fonts, a bitmap strike makes sense only</span>
<span class="line-modified">!    *   if the default instance is active (this is, no glyph variation takes</span>
<span class="line-modified">!    *   place); otherwise, FreeType simply ignores bitmap strikes.  The same</span>
<span class="line-modified">!    *   is true for all named instances that are different from the default</span>
<span class="line-modified">!    *   instance.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Select_Size( FT_Face  face,
                    FT_Int   strike_index );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_Size_Request_Type</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An enumeration type that lists the supported size request types, i.e.,</span>
<span class="line-modified">!    *   what input size (in font units) maps to the requested output size (in</span>
<span class="line-modified">!    *   pixels, as computed from the arguments of @FT_Size_Request).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_SIZE_REQUEST_TYPE_NOMINAL ::</span>
<span class="line-modified">!    *     The nominal size.  The `units_per_EM` field of @FT_FaceRec is used</span>
<span class="line-modified">!    *     to determine both scaling values.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     This is the standard scaling found in most applications.  In</span>
<span class="line-modified">!    *     particular, use this size request type for TrueType fonts if they</span>
<span class="line-modified">!    *     provide optical scaling or something similar.  Note, however, that</span>
<span class="line-modified">!    *     `units_per_EM` is a rather abstract value which bears no relation to</span>
<span class="line-modified">!    *     the actual size of the glyphs in a font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_SIZE_REQUEST_TYPE_REAL_DIM ::</span>
<span class="line-modified">!    *     The real dimension.  The sum of the `ascender` and (minus of) the</span>
<span class="line-modified">!    *     `descender` fields of @FT_FaceRec is used to determine both scaling</span>
<span class="line-modified">!    *     values.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_SIZE_REQUEST_TYPE_BBOX ::</span>
<span class="line-modified">!    *     The font bounding box.  The width and height of the `bbox` field of</span>
<span class="line-modified">!    *     @FT_FaceRec are used to determine the horizontal and vertical</span>
<span class="line-modified">!    *     scaling value, respectively.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_SIZE_REQUEST_TYPE_CELL ::</span>
<span class="line-modified">!    *     The `max_advance_width` field of @FT_FaceRec is used to determine</span>
<span class="line-modified">!    *     the horizontal scaling value; the vertical scaling value is</span>
<span class="line-modified">!    *     determined the same way as @FT_SIZE_REQUEST_TYPE_REAL_DIM does.</span>
<span class="line-modified">!    *     Finally, both scaling values are set to the smaller one.  This type</span>
<span class="line-modified">!    *     is useful if you want to specify the font size for, say, a window of</span>
<span class="line-modified">!    *     a given dimension and 80x24 cells.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_SIZE_REQUEST_TYPE_SCALES ::</span>
<span class="line-modified">!    *     Specify the scaling values directly.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The above descriptions only apply to scalable formats.  For bitmap</span>
<span class="line-modified">!    *   formats, the behaviour is up to the driver.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   See the note section of @FT_Size_Metrics if you wonder how size</span>
<span class="line-modified">!    *   requesting relates to scaling values.</span>
<span class="line-modified">!    */</span>
    typedef enum  FT_Size_Request_Type_
    {
      FT_SIZE_REQUEST_TYPE_NOMINAL,
      FT_SIZE_REQUEST_TYPE_REAL_DIM,
      FT_SIZE_REQUEST_TYPE_BBOX,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2577,46 ***</span>
      FT_SIZE_REQUEST_TYPE_MAX
  
    } FT_Size_Request_Type;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Size_RequestRec                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure to model a size request.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    type           :: See @FT_Size_Request_Type.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    width          :: The desired width, given as a 26.6 fractional    */</span>
<span class="line-modified">!   /*                      point value (with 72pt = 1in).                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    height         :: The desired height, given as a 26.6 fractional   */</span>
<span class="line-modified">!   /*                      point value (with 72pt = 1in).                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiResolution :: The horizontal resolution (dpi, i.e., pixels per */</span>
<span class="line-modified">!   /*                      inch).  If set to zero, `width&#39; is treated as a  */</span>
<span class="line-modified">!   /*                      26.6 fractional *pixel* value, which gets        */</span>
<span class="line-modified">!   /*                      internally rounded to an integer.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertResolution :: The vertical resolution (dpi, i.e., pixels per   */</span>
<span class="line-modified">!   /*                      inch).  If set to zero, `height&#39; is treated as a */</span>
<span class="line-modified">!   /*                      26.6 fractional *pixel* value, which gets        */</span>
<span class="line-modified">!   /*                      internally rounded to an integer.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    If `width&#39; is zero, the horizontal scaling value is set equal      */</span>
<span class="line-modified">!   /*    to the vertical scaling value, and vice versa.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If `type&#39; is FT_SIZE_REQUEST_TYPE_SCALES, `width&#39; and `height&#39; are */</span>
<span class="line-modified">!   /*    interpreted directly as 16.16 fractional scaling values, without   */</span>
<span class="line-modified">!   /*    any further modification, and both `horiResolution&#39; and            */</span>
<span class="line-modified">!   /*    `vertResolution&#39; are ignored.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Size_RequestRec_
    {
      FT_Size_Request_Type  type;
      FT_Long               width;
      FT_Long               height;
<span class="line-new-header">--- 2570,49 ---</span>
      FT_SIZE_REQUEST_TYPE_MAX
  
    } FT_Size_Request_Type;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Size_RequestRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure to model a size request.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   type ::</span>
<span class="line-modified">!    *     See @FT_Size_Request_Type.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   width ::</span>
<span class="line-modified">!    *     The desired width, given as a 26.6 fractional point value (with 72pt</span>
<span class="line-modified">!    *     = 1in).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     The desired height, given as a 26.6 fractional point value (with</span>
<span class="line-modified">!    *     72pt = 1in).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiResolution ::</span>
<span class="line-modified">!    *     The horizontal resolution (dpi, i.e., pixels per inch).  If set to</span>
<span class="line-modified">!    *     zero, `width` is treated as a 26.6 fractional **pixel** value, which</span>
<span class="line-modified">!    *     gets internally rounded to an integer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertResolution ::</span>
<span class="line-modified">!    *     The vertical resolution (dpi, i.e., pixels per inch).  If set to</span>
<span class="line-modified">!    *     zero, `height` is treated as a 26.6 fractional **pixel** value,</span>
<span class="line-modified">!    *     which gets internally rounded to an integer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   If `width` is zero, the horizontal scaling value is set equal to the</span>
<span class="line-modified">!    *   vertical scaling value, and vice versa.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If `type` is `FT_SIZE_REQUEST_TYPE_SCALES`, `width` and `height` are</span>
<span class="line-modified">!    *   interpreted directly as 16.16 fractional scaling values, without any</span>
<span class="line-added">+    *   further modification, and both `horiResolution` and `vertResolution`</span>
<span class="line-added">+    *   are ignored.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Size_RequestRec_
    {
      FT_Size_Request_Type  type;
      FT_Long               width;
      FT_Long               height;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2624,252 ***</span>
      FT_UInt               vertResolution;
  
    } FT_Size_RequestRec;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Size_Request                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a size request structure.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_Size_RequestRec_  *FT_Size_Request;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Request_Size                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Resize the scale of the active @FT_Size object in a face.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to a target face object.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    req  :: A pointer to a @FT_Size_RequestRec.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Although drivers may select the bitmap strike matching the         */</span>
<span class="line-modified">!   /*    request, you should not rely on this if you intend to select a     */</span>
<span class="line-modified">!   /*    particular bitmap strike.  Use @FT_Select_Size instead in that     */</span>
<span class="line-modified">!   /*    case.                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The relation between the requested size and the resulting glyph    */</span>
<span class="line-modified">!   /*    size is dependent entirely on how the size is defined in the       */</span>
<span class="line-modified">!   /*    source face.  The font designer chooses the final size of each     */</span>
<span class="line-modified">!   /*    glyph relative to this size.  For more information refer to        */</span>
<span class="line-modified">!   /*    `https://www.freetype.org/freetype2/docs/glyphs/glyphs-2.html&#39;.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Contrary to @FT_Set_Char_Size, this function doesn&#39;t have special  */</span>
<span class="line-modified">!   /*    code to normalize zero-valued widths, heights, or resolutions      */</span>
<span class="line-modified">!   /*    (which lead to errors in most cases).                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Request_Size( FT_Face          face,
                     FT_Size_Request  req );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Set_Char_Size                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Call @FT_Request_Size to request the nominal size (in points).     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face            :: A handle to a target face object.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    char_width      :: The nominal width, in 26.6 fractional points.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    char_height     :: The nominal height, in 26.6 fractional points.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horz_resolution :: The horizontal resolution in dpi.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vert_resolution :: The vertical resolution in dpi.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    While this function allows fractional points as input values, the  */</span>
<span class="line-modified">!   /*    resulting ppem value for the given resolution is always rounded to */</span>
<span class="line-modified">!   /*    the nearest integer.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If either the character width or height is zero, it is set equal   */</span>
<span class="line-modified">!   /*    to the other value.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If either the horizontal or vertical resolution is zero, it is set */</span>
<span class="line-modified">!   /*    equal to the other value.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A character width or height smaller than 1pt is set to 1pt; if     */</span>
<span class="line-modified">!   /*    both resolution values are zero, they are set to 72dpi.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Set_Char_Size( FT_Face     face,
                      FT_F26Dot6  char_width,
                      FT_F26Dot6  char_height,
                      FT_UInt     horz_resolution,
                      FT_UInt     vert_resolution );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Set_Pixel_Sizes                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Call @FT_Request_Size to request the nominal size (in pixels).     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face         :: A handle to the target face object.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    pixel_width  :: The nominal width, in pixels.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pixel_height :: The nominal height, in pixels.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    You should not rely on the resulting glyphs matching or being      */</span>
<span class="line-modified">!   /*    constrained to this pixel size.  Refer to @FT_Request_Size to      */</span>
<span class="line-modified">!   /*    understand how requested sizes relate to actual sizes.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Set_Pixel_Sizes( FT_Face  face,
                        FT_UInt  pixel_width,
                        FT_UInt  pixel_height );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Load_Glyph                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load a glyph into the glyph slot of a face object.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face        :: A handle to the target face object where the glyph  */</span>
<span class="line-modified">!   /*                   is loaded.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    glyph_index :: The index of the glyph in the font file.  For       */</span>
<span class="line-modified">!   /*                   CID-keyed fonts (either in PS or in CFF format)     */</span>
<span class="line-modified">!   /*                   this argument specifies the CID value.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    load_flags  :: A flag indicating what to load for this glyph.  The */</span>
<span class="line-modified">!   /*                   @FT_LOAD_XXX constants can be used to control the   */</span>
<span class="line-modified">!   /*                   glyph loading process (e.g., whether the outline    */</span>
<span class="line-modified">!   /*                   should be scaled, whether to load bitmaps or not,   */</span>
<span class="line-modified">!   /*                   whether to hint the outline, etc).                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The loaded glyph may be transformed.  See @FT_Set_Transform for    */</span>
<span class="line-modified">!   /*    the details.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    For subsetted CID-keyed fonts, `FT_Err_Invalid_Argument&#39; is        */</span>
<span class="line-modified">!   /*    returned for invalid CID values (this is, for CID values that      */</span>
<span class="line-modified">!   /*    don&#39;t have a corresponding glyph in the font).  See the discussion */</span>
<span class="line-modified">!   /*    of the @FT_FACE_FLAG_CID_KEYED flag for more details.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If you receive `FT_Err_Glyph_Too_Big&#39;, try getting the glyph       */</span>
<span class="line-modified">!   /*    outline at EM size, then scale it manually and fill it as a        */</span>
<span class="line-modified">!   /*    graphics operation.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Load_Glyph( FT_Face   face,
                   FT_UInt   glyph_index,
                   FT_Int32  load_flags );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Load_Char                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Load a glyph into the glyph slot of a face object, accessed by its */</span>
<span class="line-modified">!   /*    character code.                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face        :: A handle to a target face object where the glyph    */</span>
<span class="line-modified">!   /*                   is loaded.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    char_code   :: The glyph&#39;s character code, according to the        */</span>
<span class="line-modified">!   /*                   current charmap used in the face.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    load_flags  :: A flag indicating what to load for this glyph.  The */</span>
<span class="line-modified">!   /*                   @FT_LOAD_XXX constants can be used to control the   */</span>
<span class="line-modified">!   /*                   glyph loading process (e.g., whether the outline    */</span>
<span class="line-modified">!   /*                   should be scaled, whether to load bitmaps or not,   */</span>
<span class="line-modified">!   /*                   whether to hint the outline, etc).                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function simply calls @FT_Get_Char_Index and @FT_Load_Glyph.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Many fonts contain glyphs that can&#39;t be loaded by this function    */</span>
<span class="line-modified">!   /*    since its glyph indices are not listed in any of the font&#39;s        */</span>
<span class="line-modified">!   /*    charmaps.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If no active cmap is set up (i.e., `face-&gt;charmap&#39; is zero), the   */</span>
<span class="line-modified">!   /*    call to @FT_Get_Char_Index is omitted, and the function behaves    */</span>
<span class="line-modified">!   /*    identically to @FT_Load_Glyph.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Load_Char( FT_Face   face,
                  FT_ULong  char_code,
                  FT_Int32  load_flags );
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @enum:
     *   FT_LOAD_XXX
     *
     * @description:
<span class="line-modified">!    *   A list of bit field constants for @FT_Load_Glyph to indicate what</span>
<span class="line-modified">!    *   kind of operations to perform during glyph loading.</span>
     *
     * @values:
     *   FT_LOAD_DEFAULT ::
     *     Corresponding to~0, this value is used as the default glyph load
     *     operation.  In this case, the following happens:
     *
     *     1. FreeType looks for a bitmap for the glyph corresponding to the
<span class="line-modified">!    *        face&#39;s current size.  If one is found, the function returns.</span>
<span class="line-modified">!    *        The bitmap data can be accessed from the glyph slot (see note</span>
<span class="line-removed">-    *        below).</span>
     *
     *     2. If no embedded bitmap is searched for or found, FreeType looks
<span class="line-modified">!    *        for a scalable outline.  If one is found, it is loaded from</span>
<span class="line-modified">!    *        the font file, scaled to device pixels, then `hinted&#39; to the</span>
<span class="line-modified">!    *        pixel grid in order to optimize it.  The outline data can be</span>
<span class="line-modified">!    *        accessed from the glyph slot (see note below).</span>
     *
     *     Note that by default the glyph loader doesn&#39;t render outlines into
     *     bitmaps.  The following flags are used to modify this default
     *     behaviour to more specific and useful cases.
     *
<span class="line-new-header">--- 2620,261 ---</span>
      FT_UInt               vertResolution;
  
    } FT_Size_RequestRec;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Size_Request</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a size request structure.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_Size_RequestRec_  *FT_Size_Request;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Request_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Resize the scale of the active @FT_Size object in a face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   req ::</span>
<span class="line-modified">!    *     A pointer to a @FT_Size_RequestRec.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Although drivers may select the bitmap strike matching the request,</span>
<span class="line-modified">!    *   you should not rely on this if you intend to select a particular</span>
<span class="line-modified">!    *   bitmap strike.  Use @FT_Select_Size instead in that case.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The relation between the requested size and the resulting glyph size</span>
<span class="line-modified">!    *   is dependent entirely on how the size is defined in the source face.</span>
<span class="line-modified">!    *   The font designer chooses the final size of each glyph relative to</span>
<span class="line-modified">!    *   this size.  For more information refer to</span>
<span class="line-modified">!    *   &#39;https://www.freetype.org/freetype2/docs/glyphs/glyphs-2.html&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Contrary to @FT_Set_Char_Size, this function doesn&#39;t have special code</span>
<span class="line-modified">!    *   to normalize zero-valued widths, heights, or resolutions (which lead</span>
<span class="line-modified">!    *   to errors in most cases).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Request_Size( FT_Face          face,
                     FT_Size_Request  req );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Set_Char_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Call @FT_Request_Size to request the nominal size (in points).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   char_width ::</span>
<span class="line-modified">!    *     The nominal width, in 26.6 fractional points.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   char_height ::</span>
<span class="line-modified">!    *     The nominal height, in 26.6 fractional points.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horz_resolution ::</span>
<span class="line-modified">!    *     The horizontal resolution in dpi.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vert_resolution ::</span>
<span class="line-modified">!    *     The vertical resolution in dpi.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   While this function allows fractional points as input values, the</span>
<span class="line-modified">!    *   resulting ppem value for the given resolution is always rounded to the</span>
<span class="line-modified">!    *   nearest integer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If either the character width or height is zero, it is set equal to</span>
<span class="line-modified">!    *   the other value.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If either the horizontal or vertical resolution is zero, it is set</span>
<span class="line-modified">!    *   equal to the other value.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   A character width or height smaller than 1pt is set to 1pt; if both</span>
<span class="line-added">+    *   resolution values are zero, they are set to 72dpi.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Set_Char_Size( FT_Face     face,
                      FT_F26Dot6  char_width,
                      FT_F26Dot6  char_height,
                      FT_UInt     horz_resolution,
                      FT_UInt     vert_resolution );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Set_Pixel_Sizes</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Call @FT_Request_Size to request the nominal size (in pixels).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   pixel_width ::</span>
<span class="line-modified">!    *     The nominal width, in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pixel_height ::</span>
<span class="line-modified">!    *     The nominal height, in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   You should not rely on the resulting glyphs matching or being</span>
<span class="line-modified">!    *   constrained to this pixel size.  Refer to @FT_Request_Size to</span>
<span class="line-modified">!    *   understand how requested sizes relate to actual sizes.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Set_Pixel_Sizes( FT_Face  face,
                        FT_UInt  pixel_width,
                        FT_UInt  pixel_height );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Load_Glyph</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load a glyph into the glyph slot of a face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object where the glyph is loaded.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   glyph_index ::</span>
<span class="line-modified">!    *     The index of the glyph in the font file.  For CID-keyed fonts</span>
<span class="line-modified">!    *     (either in PS or in CFF format) this argument specifies the CID</span>
<span class="line-modified">!    *     value.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   load_flags ::</span>
<span class="line-modified">!    *     A flag indicating what to load for this glyph.  The @FT_LOAD_XXX</span>
<span class="line-modified">!    *     constants can be used to control the glyph loading process (e.g.,</span>
<span class="line-modified">!    *     whether the outline should be scaled, whether to load bitmaps or</span>
<span class="line-modified">!    *     not, whether to hint the outline, etc).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The loaded glyph may be transformed.  See @FT_Set_Transform for the</span>
<span class="line-modified">!    *   details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   For subsetted CID-keyed fonts, `FT_Err_Invalid_Argument` is returned</span>
<span class="line-modified">!    *   for invalid CID values (this is, for CID values that don&#39;t have a</span>
<span class="line-modified">!    *   corresponding glyph in the font).  See the discussion of the</span>
<span class="line-modified">!    *   @FT_FACE_FLAG_CID_KEYED flag for more details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If you receive `FT_Err_Glyph_Too_Big`, try getting the glyph outline</span>
<span class="line-modified">!    *   at EM size, then scale it manually and fill it as a graphics</span>
<span class="line-modified">!    *   operation.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Load_Glyph( FT_Face   face,
                   FT_UInt   glyph_index,
                   FT_Int32  load_flags );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Load_Char</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Load a glyph into the glyph slot of a face object, accessed by its</span>
<span class="line-modified">!    *   character code.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a target face object where the glyph is loaded.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   char_code ::</span>
<span class="line-modified">!    *     The glyph&#39;s character code, according to the current charmap used in</span>
<span class="line-modified">!    *     the face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   load_flags ::</span>
<span class="line-modified">!    *     A flag indicating what to load for this glyph.  The @FT_LOAD_XXX</span>
<span class="line-modified">!    *     constants can be used to control the glyph loading process (e.g.,</span>
<span class="line-modified">!    *     whether the outline should be scaled, whether to load bitmaps or</span>
<span class="line-modified">!    *     not, whether to hint the outline, etc).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function simply calls @FT_Get_Char_Index and @FT_Load_Glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Many fonts contain glyphs that can&#39;t be loaded by this function since</span>
<span class="line-modified">!    *   its glyph indices are not listed in any of the font&#39;s charmaps.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If no active cmap is set up (i.e., `face-&gt;charmap` is zero), the call</span>
<span class="line-modified">!    *   to @FT_Get_Char_Index is omitted, and the function behaves identically</span>
<span class="line-modified">!    *   to @FT_Load_Glyph.</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_Error )
    FT_Load_Char( FT_Face   face,
                  FT_ULong  char_code,
                  FT_Int32  load_flags );
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @enum:
     *   FT_LOAD_XXX
     *
     * @description:
<span class="line-modified">!    *   A list of bit field constants for @FT_Load_Glyph to indicate what kind</span>
<span class="line-modified">!    *   of operations to perform during glyph loading.</span>
     *
     * @values:
     *   FT_LOAD_DEFAULT ::
     *     Corresponding to~0, this value is used as the default glyph load
     *     operation.  In this case, the following happens:
     *
     *     1. FreeType looks for a bitmap for the glyph corresponding to the
<span class="line-modified">!    *     face&#39;s current size.  If one is found, the function returns.  The</span>
<span class="line-modified">!    *     bitmap data can be accessed from the glyph slot (see note below).</span>
     *
     *     2. If no embedded bitmap is searched for or found, FreeType looks
<span class="line-modified">!    *     for a scalable outline.  If one is found, it is loaded from the font</span>
<span class="line-modified">!    *     file, scaled to device pixels, then &#39;hinted&#39; to the pixel grid in</span>
<span class="line-modified">!    *     order to optimize it.  The outline data can be accessed from the</span>
<span class="line-modified">!    *     glyph slot (see note below).</span>
     *
     *     Note that by default the glyph loader doesn&#39;t render outlines into
     *     bitmaps.  The following flags are used to modify this default
     *     behaviour to more specific and useful cases.
     *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2877,18 ***</span>
     *     Don&#39;t scale the loaded outline glyph but keep it in font units.
     *
     *     This flag implies @FT_LOAD_NO_HINTING and @FT_LOAD_NO_BITMAP, and
     *     unsets @FT_LOAD_RENDER.
     *
<span class="line-modified">!    *     If the font is `tricky&#39; (see @FT_FACE_FLAG_TRICKY for more), using</span>
<span class="line-modified">!    *     FT_LOAD_NO_SCALE usually yields meaningless outlines because the</span>
     *     subglyphs must be scaled and positioned with hinting instructions.
<span class="line-modified">!    *     This can be solved by loading the font without FT_LOAD_NO_SCALE and</span>
<span class="line-modified">!    *     setting the character size to `font-&gt;units_per_EM&#39;.</span>
     *
     *   FT_LOAD_NO_HINTING ::
<span class="line-modified">!    *     Disable hinting.  This generally generates `blurrier&#39; bitmap glyphs</span>
     *     when the glyph are rendered in any of the anti-aliased modes.  See
     *     also the note below.
     *
     *     This flag is implied by @FT_LOAD_NO_SCALE.
     *
<span class="line-new-header">--- 2882,18 ---</span>
     *     Don&#39;t scale the loaded outline glyph but keep it in font units.
     *
     *     This flag implies @FT_LOAD_NO_HINTING and @FT_LOAD_NO_BITMAP, and
     *     unsets @FT_LOAD_RENDER.
     *
<span class="line-modified">!    *     If the font is &#39;tricky&#39; (see @FT_FACE_FLAG_TRICKY for more), using</span>
<span class="line-modified">!    *     `FT_LOAD_NO_SCALE` usually yields meaningless outlines because the</span>
     *     subglyphs must be scaled and positioned with hinting instructions.
<span class="line-modified">!    *     This can be solved by loading the font without `FT_LOAD_NO_SCALE`</span>
<span class="line-modified">!    *     and setting the character size to `font-&gt;units_per_EM`.</span>
     *
     *   FT_LOAD_NO_HINTING ::
<span class="line-modified">!    *     Disable hinting.  This generally generates &#39;blurrier&#39; bitmap glyphs</span>
     *     when the glyph are rendered in any of the anti-aliased modes.  See
     *     also the note below.
     *
     *     This flag is implied by @FT_LOAD_NO_SCALE.
     *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2905,38 ***</span>
     *
     *     @FT_LOAD_NO_SCALE always sets this flag.
     *
     *   FT_LOAD_VERTICAL_LAYOUT ::
     *     Load the glyph for vertical text layout.  In particular, the
<span class="line-modified">!    *     `advance&#39; value in the @FT_GlyphSlotRec structure is set to the</span>
<span class="line-modified">!    *     `vertAdvance&#39; value of the `metrics&#39; field.</span>
     *
<span class="line-modified">!    *     In case @FT_HAS_VERTICAL doesn&#39;t return true, you shouldn&#39;t use</span>
<span class="line-modified">!    *     this flag currently.  Reason is that in this case vertical metrics</span>
<span class="line-modified">!    *     get synthesized, and those values are not always consistent across</span>
     *     various font formats.
     *
     *   FT_LOAD_FORCE_AUTOHINT ::
<span class="line-modified">!    *     Prefer the auto-hinter over the font&#39;s native hinter.  See also</span>
<span class="line-modified">!    *     the note below.</span>
     *
     *   FT_LOAD_PEDANTIC ::
     *     Make the font driver perform pedantic verifications during glyph
<span class="line-modified">!    *     loading.  This is mostly used to detect broken glyphs in fonts.</span>
<span class="line-modified">!    *     By default, FreeType tries to handle broken fonts also.</span>
     *
     *     In particular, errors from the TrueType bytecode engine are not
<span class="line-modified">!    *     passed to the application if this flag is not set; this might</span>
<span class="line-modified">!    *     result in partially hinted or distorted glyphs in case a glyph&#39;s</span>
<span class="line-modified">!    *     bytecode is buggy.</span>
     *
     *   FT_LOAD_NO_RECURSE ::
<span class="line-modified">!    *     Don&#39;t load composite glyphs recursively.  Instead, the font</span>
<span class="line-modified">!    *     driver should set the `num_subglyph&#39; and `subglyphs&#39; values of</span>
<span class="line-modified">!    *     the glyph slot accordingly, and set `glyph-&gt;format&#39; to</span>
<span class="line-modified">!    *     @FT_GLYPH_FORMAT_COMPOSITE.  The description of subglyphs can</span>
<span class="line-modified">!    *     then be accessed with @FT_Get_SubGlyph_Info.</span>
     *
     *     This flag implies @FT_LOAD_NO_SCALE and @FT_LOAD_IGNORE_TRANSFORM.
     *
     *   FT_LOAD_IGNORE_TRANSFORM ::
     *     Ignore the transform matrix set by @FT_Set_Transform.
<span class="line-new-header">--- 2910,41 ---</span>
     *
     *     @FT_LOAD_NO_SCALE always sets this flag.
     *
     *   FT_LOAD_VERTICAL_LAYOUT ::
     *     Load the glyph for vertical text layout.  In particular, the
<span class="line-modified">!    *     `advance` value in the @FT_GlyphSlotRec structure is set to the</span>
<span class="line-modified">!    *     `vertAdvance` value of the `metrics` field.</span>
     *
<span class="line-modified">!    *     In case @FT_HAS_VERTICAL doesn&#39;t return true, you shouldn&#39;t use this</span>
<span class="line-modified">!    *     flag currently.  Reason is that in this case vertical metrics get</span>
<span class="line-modified">!    *     synthesized, and those values are not always consistent across</span>
     *     various font formats.
     *
     *   FT_LOAD_FORCE_AUTOHINT ::
<span class="line-modified">!    *     Prefer the auto-hinter over the font&#39;s native hinter.  See also the</span>
<span class="line-modified">!    *     note below.</span>
     *
     *   FT_LOAD_PEDANTIC ::
     *     Make the font driver perform pedantic verifications during glyph
<span class="line-modified">!    *     loading and hinting.  This is mostly used to detect broken glyphs in</span>
<span class="line-modified">!    *     fonts.  By default, FreeType tries to handle broken fonts also.</span>
     *
     *     In particular, errors from the TrueType bytecode engine are not
<span class="line-modified">!    *     passed to the application if this flag is not set; this might result</span>
<span class="line-modified">!    *     in partially hinted or distorted glyphs in case a glyph&#39;s bytecode</span>
<span class="line-modified">!    *     is buggy.</span>
     *
     *   FT_LOAD_NO_RECURSE ::
<span class="line-modified">!    *     Don&#39;t load composite glyphs recursively.  Instead, the font driver</span>
<span class="line-modified">!    *     fills the `num_subglyph` and `subglyphs` values of the glyph slot;</span>
<span class="line-modified">!    *     it also sets `glyph-&gt;format` to @FT_GLYPH_FORMAT_COMPOSITE.  The</span>
<span class="line-modified">!    *     description of subglyphs can then be accessed with</span>
<span class="line-modified">!    *     @FT_Get_SubGlyph_Info.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     Don&#39;t use this flag for retrieving metrics information since some</span>
<span class="line-added">+    *     font drivers only return rudimentary data.</span>
     *
     *     This flag implies @FT_LOAD_NO_SCALE and @FT_LOAD_IGNORE_TRANSFORM.
     *
     *   FT_LOAD_IGNORE_TRANSFORM ::
     *     Ignore the transform matrix set by @FT_Set_Transform.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2949,38 ***</span>
     *     Note that this has no effect on the hinting algorithm used.  You
     *     should rather use @FT_LOAD_TARGET_MONO so that the
     *     monochrome-optimized hinting algorithm is used.
     *
     *   FT_LOAD_LINEAR_DESIGN ::
<span class="line-modified">!    *     Keep  `linearHoriAdvance&#39; and `linearVertAdvance&#39; fields of</span>
<span class="line-modified">!    *     @FT_GlyphSlotRec in font units.  See @FT_GlyphSlotRec for</span>
<span class="line-removed">-    *     details.</span>
     *
     *   FT_LOAD_NO_AUTOHINT ::
     *     Disable the auto-hinter.  See also the note below.
     *
     *   FT_LOAD_COLOR ::
     *     [Since 2.5] Load embedded color bitmap images.  The resulting color
<span class="line-modified">!    *     bitmaps, if available, will have the @FT_PIXEL_MODE_BGRA format.</span>
<span class="line-modified">!    *     If the flag is not set and color bitmaps are found, they are</span>
<span class="line-modified">!    *     converted to 256-level gray bitmaps transparently, using the</span>
<span class="line-modified">!    *     @FT_PIXEL_MODE_GRAY format.</span>
     *
     *   FT_LOAD_COMPUTE_METRICS ::
<span class="line-modified">!    *     [Since 2.6.1] Compute glyph metrics from the glyph data, without</span>
<span class="line-modified">!    *     the use of bundled metrics tables (for example, the `hdmx&#39; table in</span>
     *     TrueType fonts).  This flag is mainly used by font validating or
     *     font editing applications, which need to ignore, verify, or edit
     *     those tables.
     *
     *     Currently, this flag is only implemented for TrueType fonts.
     *
     *   FT_LOAD_BITMAP_METRICS_ONLY ::
     *     [Since 2.7.1] Request loading of the metrics and bitmap image
<span class="line-modified">!    *     information of a (possibly embedded) bitmap glyph without</span>
<span class="line-modified">!    *     allocating or copying the bitmap image data itself.  No effect if</span>
<span class="line-modified">!    *     the target glyph is not a bitmap image.</span>
     *
     *     This flag unsets @FT_LOAD_RENDER.
     *
     *   FT_LOAD_CROP_BITMAP ::
     *     Ignored.  Deprecated.
<span class="line-new-header">--- 2957,50 ---</span>
     *     Note that this has no effect on the hinting algorithm used.  You
     *     should rather use @FT_LOAD_TARGET_MONO so that the
     *     monochrome-optimized hinting algorithm is used.
     *
     *   FT_LOAD_LINEAR_DESIGN ::
<span class="line-modified">!    *     Keep `linearHoriAdvance` and `linearVertAdvance` fields of</span>
<span class="line-modified">!    *     @FT_GlyphSlotRec in font units.  See @FT_GlyphSlotRec for details.</span>
     *
     *   FT_LOAD_NO_AUTOHINT ::
     *     Disable the auto-hinter.  See also the note below.
     *
     *   FT_LOAD_COLOR ::
<span class="line-added">+    *     Load colored glyphs.  There are slight differences depending on the</span>
<span class="line-added">+    *     font format.</span>
<span class="line-added">+    *</span>
     *     [Since 2.5] Load embedded color bitmap images.  The resulting color
<span class="line-modified">!    *     bitmaps, if available, will have the @FT_PIXEL_MODE_BGRA format,</span>
<span class="line-modified">!    *     with pre-multiplied color channels.  If the flag is not set and</span>
<span class="line-modified">!    *     color bitmaps are found, they are converted to 256-level gray</span>
<span class="line-modified">!    *     bitmaps, using the @FT_PIXEL_MODE_GRAY format.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     [Since 2.10, experimental] If the glyph index contains an entry in</span>
<span class="line-added">+    *     the face&#39;s &#39;COLR&#39; table with a &#39;CPAL&#39; palette table (as defined in</span>
<span class="line-added">+    *     the OpenType specification), make @FT_Render_Glyph provide a default</span>
<span class="line-added">+    *     blending of the color glyph layers associated with the glyph index,</span>
<span class="line-added">+    *     using the same bitmap format as embedded color bitmap images.  This</span>
<span class="line-added">+    *     is mainly for convenience; for full control of color layers use</span>
<span class="line-added">+    *     @FT_Get_Color_Glyph_Layer and FreeType&#39;s color functions like</span>
<span class="line-added">+    *     @FT_Palette_Select instead of setting @FT_LOAD_COLOR for rendering</span>
<span class="line-added">+    *     so that the client application can handle blending by itself.</span>
     *
     *   FT_LOAD_COMPUTE_METRICS ::
<span class="line-modified">!    *     [Since 2.6.1] Compute glyph metrics from the glyph data, without the</span>
<span class="line-modified">!    *     use of bundled metrics tables (for example, the &#39;hdmx&#39; table in</span>
     *     TrueType fonts).  This flag is mainly used by font validating or
     *     font editing applications, which need to ignore, verify, or edit
     *     those tables.
     *
     *     Currently, this flag is only implemented for TrueType fonts.
     *
     *   FT_LOAD_BITMAP_METRICS_ONLY ::
     *     [Since 2.7.1] Request loading of the metrics and bitmap image
<span class="line-modified">!    *     information of a (possibly embedded) bitmap glyph without allocating</span>
<span class="line-modified">!    *     or copying the bitmap image data itself.  No effect if the target</span>
<span class="line-modified">!    *     glyph is not a bitmap image.</span>
     *
     *     This flag unsets @FT_LOAD_RENDER.
     *
     *   FT_LOAD_CROP_BITMAP ::
     *     Ignored.  Deprecated.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2991,23 ***</span>
     * @note:
     *   By default, hinting is enabled and the font&#39;s native hinter (see
     *   @FT_FACE_FLAG_HINTER) is preferred over the auto-hinter.  You can
     *   disable hinting by setting @FT_LOAD_NO_HINTING or change the
     *   precedence by setting @FT_LOAD_FORCE_AUTOHINT.  You can also set
<span class="line-modified">!    *   @FT_LOAD_NO_AUTOHINT in case you don&#39;t want the auto-hinter to be</span>
<span class="line-modified">!    *   used at all.</span>
     *
     *   See the description of @FT_FACE_FLAG_TRICKY for a special exception
     *   (affecting only a handful of Asian fonts).
     *
     *   Besides deciding which hinter to use, you can also decide which
     *   hinting algorithm to use.  See @FT_LOAD_TARGET_XXX for details.
     *
     *   Note that the auto-hinter needs a valid Unicode cmap (either a native
     *   one or synthesized by FreeType) for producing correct results.  If a
     *   font provides an incorrect mapping (for example, assigning the
<span class="line-modified">!    *   character code U+005A, LATIN CAPITAL LETTER Z, to a glyph depicting a</span>
     *   mathematical integral sign), the auto-hinter might produce useless
     *   results.
     *
     */
  #define FT_LOAD_DEFAULT                      0x0
<span class="line-new-header">--- 3011,23 ---</span>
     * @note:
     *   By default, hinting is enabled and the font&#39;s native hinter (see
     *   @FT_FACE_FLAG_HINTER) is preferred over the auto-hinter.  You can
     *   disable hinting by setting @FT_LOAD_NO_HINTING or change the
     *   precedence by setting @FT_LOAD_FORCE_AUTOHINT.  You can also set
<span class="line-modified">!    *   @FT_LOAD_NO_AUTOHINT in case you don&#39;t want the auto-hinter to be used</span>
<span class="line-modified">!    *   at all.</span>
     *
     *   See the description of @FT_FACE_FLAG_TRICKY for a special exception
     *   (affecting only a handful of Asian fonts).
     *
     *   Besides deciding which hinter to use, you can also decide which
     *   hinting algorithm to use.  See @FT_LOAD_TARGET_XXX for details.
     *
     *   Note that the auto-hinter needs a valid Unicode cmap (either a native
     *   one or synthesized by FreeType) for producing correct results.  If a
     *   font provides an incorrect mapping (for example, assigning the
<span class="line-modified">!    *   character code U+005A, LATIN CAPITAL LETTER~Z, to a glyph depicting a</span>
     *   mathematical integral sign), the auto-hinter might produce useless
     *   results.
     *
     */
  #define FT_LOAD_DEFAULT                      0x0
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3023,11 ***</span>
  #define FT_LOAD_NO_RECURSE                   ( 1L &lt;&lt; 10 )
  #define FT_LOAD_IGNORE_TRANSFORM             ( 1L &lt;&lt; 11 )
  #define FT_LOAD_MONOCHROME                   ( 1L &lt;&lt; 12 )
  #define FT_LOAD_LINEAR_DESIGN                ( 1L &lt;&lt; 13 )
  #define FT_LOAD_NO_AUTOHINT                  ( 1L &lt;&lt; 15 )
<span class="line-modified">!   /* Bits 16-19 are used by `FT_LOAD_TARGET_&#39; */</span>
  #define FT_LOAD_COLOR                        ( 1L &lt;&lt; 20 )
  #define FT_LOAD_COMPUTE_METRICS              ( 1L &lt;&lt; 21 )
  #define FT_LOAD_BITMAP_METRICS_ONLY          ( 1L &lt;&lt; 22 )
  
    /* */
<span class="line-new-header">--- 3043,11 ---</span>
  #define FT_LOAD_NO_RECURSE                   ( 1L &lt;&lt; 10 )
  #define FT_LOAD_IGNORE_TRANSFORM             ( 1L &lt;&lt; 11 )
  #define FT_LOAD_MONOCHROME                   ( 1L &lt;&lt; 12 )
  #define FT_LOAD_LINEAR_DESIGN                ( 1L &lt;&lt; 13 )
  #define FT_LOAD_NO_AUTOHINT                  ( 1L &lt;&lt; 15 )
<span class="line-modified">!   /* Bits 16-19 are used by `FT_LOAD_TARGET_` */</span>
  #define FT_LOAD_COLOR                        ( 1L &lt;&lt; 20 )
  #define FT_LOAD_COMPUTE_METRICS              ( 1L &lt;&lt; 21 )
  #define FT_LOAD_BITMAP_METRICS_ONLY          ( 1L &lt;&lt; 22 )
  
    /* */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3042,23 ***</span>
     * @enum:
     *   FT_LOAD_TARGET_XXX
     *
     * @description:
     *   A list of values to select a specific hinting algorithm for the
<span class="line-modified">!    *   hinter.  You should OR one of these values to your `load_flags&#39;</span>
<span class="line-modified">!    *   when calling @FT_Load_Glyph.</span>
     *
<span class="line-modified">!    *   Note that a font&#39;s native hinters may ignore the hinting algorithm</span>
<span class="line-modified">!    *   you have specified (e.g., the TrueType bytecode interpreter).  You</span>
<span class="line-modified">!    *   can set @FT_LOAD_FORCE_AUTOHINT to ensure that the auto-hinter is</span>
<span class="line-removed">-    *   used.</span>
     *
     * @values:
     *   FT_LOAD_TARGET_NORMAL ::
     *     The default hinting algorithm, optimized for standard gray-level
<span class="line-modified">!    *     rendering.  For monochrome output, use @FT_LOAD_TARGET_MONO</span>
<span class="line-removed">-    *     instead.</span>
     *
     *   FT_LOAD_TARGET_LIGHT ::
     *     A lighter hinting algorithm for gray-level modes.  Many generated
     *     glyphs are fuzzier but better resemble their original shape.  This
     *     is achieved by snapping glyphs to the pixel grid only vertically
<span class="line-new-header">--- 3062,21 ---</span>
     * @enum:
     *   FT_LOAD_TARGET_XXX
     *
     * @description:
     *   A list of values to select a specific hinting algorithm for the
<span class="line-modified">!    *   hinter.  You should OR one of these values to your `load_flags` when</span>
<span class="line-modified">!    *   calling @FT_Load_Glyph.</span>
     *
<span class="line-modified">!    *   Note that a font&#39;s native hinters may ignore the hinting algorithm you</span>
<span class="line-modified">!    *   have specified (e.g., the TrueType bytecode interpreter).  You can set</span>
<span class="line-modified">!    *   @FT_LOAD_FORCE_AUTOHINT to ensure that the auto-hinter is used.</span>
     *
     * @values:
     *   FT_LOAD_TARGET_NORMAL ::
     *     The default hinting algorithm, optimized for standard gray-level
<span class="line-modified">!    *     rendering.  For monochrome output, use @FT_LOAD_TARGET_MONO instead.</span>
     *
     *   FT_LOAD_TARGET_LIGHT ::
     *     A lighter hinting algorithm for gray-level modes.  Many generated
     *     glyphs are fuzzier but better resemble their original shape.  This
     *     is achieved by snapping glyphs to the pixel grid only vertically
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3067,52 ***</span>
     *     horizontal text.  The snapping is done either by the native font
     *     driver, if the driver itself and the font support it, or by the
     *     auto-hinter.
     *
     *     Advance widths are rounded to integer values; however, using the
<span class="line-modified">!    *     `lsb_delta&#39; and `rsb_delta&#39; fields of @FT_GlyphSlotRec, it is</span>
     *     possible to get fractional advance widths for subpixel positioning
     *     (which is recommended to use).
     *
<span class="line-modified">!    *     If configuration option AF_CONFIG_OPTION_TT_SIZE_METRICS is active,</span>
<span class="line-modified">!    *     TrueType-like metrics are used to make this mode behave similarly</span>
<span class="line-modified">!    *     as in unpatched FreeType versions between 2.4.6 and 2.7.1</span>
     *     (inclusive).
     *
     *   FT_LOAD_TARGET_MONO ::
     *     Strong hinting algorithm that should only be used for monochrome
     *     output.  The result is probably unpleasant if the glyph is rendered
     *     in non-monochrome modes.
     *
     *   FT_LOAD_TARGET_LCD ::
     *     A variant of @FT_LOAD_TARGET_LIGHT optimized for horizontally
     *     decimated LCD displays.
     *
     *   FT_LOAD_TARGET_LCD_V ::
     *     A variant of @FT_LOAD_TARGET_NORMAL optimized for vertically
     *     decimated LCD displays.
     *
     * @note:
<span class="line-modified">!    *   You should use only _one_ of the FT_LOAD_TARGET_XXX values in your</span>
<span class="line-modified">!    *   `load_flags&#39;.  They can&#39;t be ORed.</span>
     *
     *   If @FT_LOAD_RENDER is also set, the glyph is rendered in the
     *   corresponding mode (i.e., the mode that matches the used algorithm
<span class="line-modified">!    *   best).  An exception is FT_LOAD_TARGET_MONO since it implies</span>
     *   @FT_LOAD_MONOCHROME.
     *
     *   You can use a hinting algorithm that doesn&#39;t correspond to the same
<span class="line-modified">!    *   rendering mode.  As an example, it is possible to use the `light&#39;</span>
     *   hinting algorithm and have the results rendered in horizontal LCD
     *   pixel mode, with code like
     *
<span class="line-modified">!    *     {</span>
<span class="line-modified">!    *       FT_Load_Glyph( face, glyph_index,</span>
<span class="line-modified">!    *                      load_flags | FT_LOAD_TARGET_LIGHT );</span>
     *
<span class="line-modified">!    *       FT_Render_Glyph( face-&gt;glyph, FT_RENDER_MODE_LCD );</span>
<span class="line-modified">!    *     }</span>
     *
     *   In general, you should stick with one rendering mode.  For example,
     *   switching between @FT_LOAD_TARGET_NORMAL and @FT_LOAD_TARGET_MONO
     *   enforces a lot of recomputation for TrueType fonts, which is slow.
     *   Another reason is caching: Selecting a different mode usually causes
<span class="line-new-header">--- 3085,58 ---</span>
     *     horizontal text.  The snapping is done either by the native font
     *     driver, if the driver itself and the font support it, or by the
     *     auto-hinter.
     *
     *     Advance widths are rounded to integer values; however, using the
<span class="line-modified">!    *     `lsb_delta` and `rsb_delta` fields of @FT_GlyphSlotRec, it is</span>
     *     possible to get fractional advance widths for subpixel positioning
     *     (which is recommended to use).
     *
<span class="line-modified">!    *     If configuration option `AF_CONFIG_OPTION_TT_SIZE_METRICS` is</span>
<span class="line-modified">!    *     active, TrueType-like metrics are used to make this mode behave</span>
<span class="line-modified">!    *     similarly as in unpatched FreeType versions between 2.4.6 and 2.7.1</span>
     *     (inclusive).
     *
     *   FT_LOAD_TARGET_MONO ::
     *     Strong hinting algorithm that should only be used for monochrome
     *     output.  The result is probably unpleasant if the glyph is rendered
     *     in non-monochrome modes.
     *
<span class="line-added">+    *     Note that for outline fonts only the TrueType font driver has proper</span>
<span class="line-added">+    *     monochrome hinting support, provided the TTFs contain hints for B/W</span>
<span class="line-added">+    *     rendering (which most fonts no longer provide).  If these conditions</span>
<span class="line-added">+    *     are not met it is very likely that you get ugly results at smaller</span>
<span class="line-added">+    *     sizes.</span>
<span class="line-added">+    *</span>
     *   FT_LOAD_TARGET_LCD ::
     *     A variant of @FT_LOAD_TARGET_LIGHT optimized for horizontally
     *     decimated LCD displays.
     *
     *   FT_LOAD_TARGET_LCD_V ::
     *     A variant of @FT_LOAD_TARGET_NORMAL optimized for vertically
     *     decimated LCD displays.
     *
     * @note:
<span class="line-modified">!    *   You should use only _one_ of the `FT_LOAD_TARGET_XXX` values in your</span>
<span class="line-modified">!    *   `load_flags`.  They can&#39;t be ORed.</span>
     *
     *   If @FT_LOAD_RENDER is also set, the glyph is rendered in the
     *   corresponding mode (i.e., the mode that matches the used algorithm
<span class="line-modified">!    *   best).  An exception is `FT_LOAD_TARGET_MONO` since it implies</span>
     *   @FT_LOAD_MONOCHROME.
     *
     *   You can use a hinting algorithm that doesn&#39;t correspond to the same
<span class="line-modified">!    *   rendering mode.  As an example, it is possible to use the &#39;light&#39;</span>
     *   hinting algorithm and have the results rendered in horizontal LCD
     *   pixel mode, with code like
     *
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     FT_Load_Glyph( face, glyph_index,</span>
<span class="line-modified">!    *                    load_flags | FT_LOAD_TARGET_LIGHT );</span>
     *
<span class="line-modified">!    *     FT_Render_Glyph( face-&gt;glyph, FT_RENDER_MODE_LCD );</span>
<span class="line-modified">!    *   ```</span>
     *
     *   In general, you should stick with one rendering mode.  For example,
     *   switching between @FT_LOAD_TARGET_NORMAL and @FT_LOAD_TARGET_MONO
     *   enforces a lot of recomputation for TrueType fonts, which is slow.
     *   Another reason is caching: Selecting a different mode usually causes
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3140,102 ***</span>
     *
     */
  #define FT_LOAD_TARGET_MODE( x )  ( (FT_Render_Mode)( ( (x) &gt;&gt; 16 ) &amp; 15 ) )
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Set_Transform                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Set the transformation that is applied to glyph images when they   */</span>
<span class="line-modified">!   /*    are loaded into a glyph slot through @FT_Load_Glyph.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face   :: A handle to the source face object.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    matrix :: A pointer to the transformation&#39;s 2x2 matrix.  Use NULL  */</span>
<span class="line-modified">!   /*              for the identity matrix.                                 */</span>
<span class="line-modified">!   /*    delta  :: A pointer to the translation vector.  Use NULL for the   */</span>
<span class="line-modified">!   /*              null vector.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The transformation is only applied to scalable image formats after */</span>
<span class="line-modified">!   /*    the glyph has been loaded.  It means that hinting is unaltered by  */</span>
<span class="line-modified">!   /*    the transformation and is performed on the character size given in */</span>
<span class="line-modified">!   /*    the last call to @FT_Set_Char_Size or @FT_Set_Pixel_Sizes.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Note that this also transforms the `face.glyph.advance&#39; field, but */</span>
<span class="line-modified">!   /*    *not* the values in `face.glyph.metrics&#39;.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( void )
    FT_Set_Transform( FT_Face     face,
                      FT_Matrix*  matrix,
                      FT_Vector*  delta );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Render_Mode                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Render modes supported by FreeType~2.  Each mode corresponds to a  */</span>
<span class="line-modified">!   /*    specific type of scanline conversion performed on the outline.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    For bitmap fonts and embedded bitmaps the `bitmap-&gt;pixel_mode&#39;     */</span>
<span class="line-modified">!   /*    field in the @FT_GlyphSlotRec structure gives the format of the    */</span>
<span class="line-modified">!   /*    returned bitmap.                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    All modes except @FT_RENDER_MODE_MONO use 256 levels of opacity,   */</span>
<span class="line-modified">!   /*    indicating pixel coverage.  Use linear alpha blending and gamma    */</span>
<span class="line-modified">!   /*    correction to correctly render non-monochrome glyph bitmaps onto a */</span>
<span class="line-modified">!   /*    surface; see @FT_Render_Glyph.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_RENDER_MODE_NORMAL ::                                           */</span>
<span class="line-modified">!   /*      Default render mode; it corresponds to 8-bit anti-aliased        */</span>
<span class="line-modified">!   /*      bitmaps.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RENDER_MODE_LIGHT ::                                            */</span>
<span class="line-modified">!   /*      This is equivalent to @FT_RENDER_MODE_NORMAL.  It is only        */</span>
<span class="line-modified">!   /*      defined as a separate value because render modes are also used   */</span>
<span class="line-modified">!   /*      indirectly to define hinting algorithm selectors.  See           */</span>
<span class="line-modified">!   /*      @FT_LOAD_TARGET_XXX for details.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RENDER_MODE_MONO ::                                             */</span>
<span class="line-modified">!   /*      This mode corresponds to 1-bit bitmaps (with 2~levels of         */</span>
<span class="line-modified">!   /*      opacity).                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RENDER_MODE_LCD ::                                              */</span>
<span class="line-modified">!   /*      This mode corresponds to horizontal RGB and BGR subpixel         */</span>
<span class="line-modified">!   /*      displays like LCD screens.  It produces 8-bit bitmaps that are   */</span>
<span class="line-modified">!   /*      3~times the width of the original glyph outline in pixels, and   */</span>
<span class="line-modified">!   /*      which use the @FT_PIXEL_MODE_LCD mode.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RENDER_MODE_LCD_V ::                                            */</span>
<span class="line-modified">!   /*      This mode corresponds to vertical RGB and BGR subpixel displays  */</span>
<span class="line-modified">!   /*      (like PDA screens, rotated LCD displays, etc.).  It produces     */</span>
<span class="line-modified">!   /*      8-bit bitmaps that are 3~times the height of the original        */</span>
<span class="line-modified">!   /*      glyph outline in pixels and use the @FT_PIXEL_MODE_LCD_V mode.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Should you define FT_CONFIG_OPTION_SUBPIXEL_RENDERING in your      */</span>
<span class="line-modified">!   /*    `ftoption.h&#39;, which enables patented ClearType-style rendering,    */</span>
<span class="line-modified">!   /*    the LCD-optimized glyph bitmaps should be filtered to reduce color */</span>
<span class="line-modified">!   /*    fringes inherent to this technology.  You can either set up LCD    */</span>
<span class="line-modified">!   /*    filtering with @FT_Library_SetLcdFilter or @FT_Face_Properties,    */</span>
<span class="line-modified">!   /*    or do the filtering yourself.  The default FreeType LCD rendering  */</span>
<span class="line-modified">!   /*    technology does not require filtering.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The selected render mode only affects vector glyphs of a font.     */</span>
<span class="line-modified">!   /*    Embedded bitmaps often have a different pixel mode like            */</span>
<span class="line-modified">!   /*    @FT_PIXEL_MODE_MONO.  You can use @FT_Bitmap_Convert to transform  */</span>
<span class="line-removed">-   /*    them into 8-bit pixmaps.                                           */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef enum  FT_Render_Mode_
    {
      FT_RENDER_MODE_NORMAL = 0,
      FT_RENDER_MODE_LIGHT,
      FT_RENDER_MODE_MONO,
<span class="line-new-header">--- 3164,102 ---</span>
     *
     */
  #define FT_LOAD_TARGET_MODE( x )  ( (FT_Render_Mode)( ( (x) &gt;&gt; 16 ) &amp; 15 ) )
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Set_Transform</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Set the transformation that is applied to glyph images when they are</span>
<span class="line-modified">!    *   loaded into a glyph slot through @FT_Load_Glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   matrix ::</span>
<span class="line-modified">!    *     A pointer to the transformation&#39;s 2x2 matrix.  Use `NULL` for the</span>
<span class="line-modified">!    *     identity matrix.</span>
<span class="line-modified">!    *   delta ::</span>
<span class="line-modified">!    *     A pointer to the translation vector.  Use `NULL` for the null vector.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The transformation is only applied to scalable image formats after the</span>
<span class="line-modified">!    *   glyph has been loaded.  It means that hinting is unaltered by the</span>
<span class="line-modified">!    *   transformation and is performed on the character size given in the</span>
<span class="line-modified">!    *   last call to @FT_Set_Char_Size or @FT_Set_Pixel_Sizes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Note that this also transforms the `face.glyph.advance` field, but</span>
<span class="line-added">+    *   **not** the values in `face.glyph.metrics`.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( void )
    FT_Set_Transform( FT_Face     face,
                      FT_Matrix*  matrix,
                      FT_Vector*  delta );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_Render_Mode</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Render modes supported by FreeType~2.  Each mode corresponds to a</span>
<span class="line-modified">!    *   specific type of scanline conversion performed on the outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   For bitmap fonts and embedded bitmaps the `bitmap-&gt;pixel_mode` field</span>
<span class="line-modified">!    *   in the @FT_GlyphSlotRec structure gives the format of the returned</span>
<span class="line-modified">!    *   bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   All modes except @FT_RENDER_MODE_MONO use 256 levels of opacity,</span>
<span class="line-modified">!    *   indicating pixel coverage.  Use linear alpha blending and gamma</span>
<span class="line-modified">!    *   correction to correctly render non-monochrome glyph bitmaps onto a</span>
<span class="line-modified">!    *   surface; see @FT_Render_Glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_RENDER_MODE_NORMAL ::</span>
<span class="line-modified">!    *     Default render mode; it corresponds to 8-bit anti-aliased bitmaps.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RENDER_MODE_LIGHT ::</span>
<span class="line-modified">!    *     This is equivalent to @FT_RENDER_MODE_NORMAL.  It is only defined as</span>
<span class="line-modified">!    *     a separate value because render modes are also used indirectly to</span>
<span class="line-modified">!    *     define hinting algorithm selectors.  See @FT_LOAD_TARGET_XXX for</span>
<span class="line-modified">!    *     details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RENDER_MODE_MONO ::</span>
<span class="line-modified">!    *     This mode corresponds to 1-bit bitmaps (with 2~levels of opacity).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RENDER_MODE_LCD ::</span>
<span class="line-modified">!    *     This mode corresponds to horizontal RGB and BGR subpixel displays</span>
<span class="line-modified">!    *     like LCD screens.  It produces 8-bit bitmaps that are 3~times the</span>
<span class="line-modified">!    *     width of the original glyph outline in pixels, and which use the</span>
<span class="line-modified">!    *     @FT_PIXEL_MODE_LCD mode.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RENDER_MODE_LCD_V ::</span>
<span class="line-modified">!    *     This mode corresponds to vertical RGB and BGR subpixel displays</span>
<span class="line-modified">!    *     (like PDA screens, rotated LCD displays, etc.).  It produces 8-bit</span>
<span class="line-modified">!    *     bitmaps that are 3~times the height of the original glyph outline in</span>
<span class="line-modified">!    *     pixels and use the @FT_PIXEL_MODE_LCD_V mode.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Should you define `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` in your</span>
<span class="line-modified">!    *   `ftoption.h`, which enables patented ClearType-style rendering, the</span>
<span class="line-modified">!    *   LCD-optimized glyph bitmaps should be filtered to reduce color fringes</span>
<span class="line-modified">!    *   inherent to this technology.  You can either set up LCD filtering with</span>
<span class="line-modified">!    *   @FT_Library_SetLcdFilter or @FT_Face_Properties, or do the filtering</span>
<span class="line-modified">!    *   yourself.  The default FreeType LCD rendering technology does not</span>
<span class="line-modified">!    *   require filtering.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The selected render mode only affects vector glyphs of a font.</span>
<span class="line-modified">!    *   Embedded bitmaps often have a different pixel mode like</span>
<span class="line-modified">!    *   @FT_PIXEL_MODE_MONO.  You can use @FT_Bitmap_Convert to transform them</span>
<span class="line-modified">!    *   into 8-bit pixmaps.</span>
<span class="line-modified">!    */</span>
    typedef enum  FT_Render_Mode_
    {
      FT_RENDER_MODE_NORMAL = 0,
      FT_RENDER_MODE_LIGHT,
      FT_RENDER_MODE_MONO,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3246,400 ***</span>
  
    } FT_Render_Mode;
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_Render_Mode&#39; values instead                       */</span>
  #define ft_render_mode_normal  FT_RENDER_MODE_NORMAL
  #define ft_render_mode_mono    FT_RENDER_MODE_MONO
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Render_Glyph                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Convert a given glyph image to a bitmap.  It does so by inspecting */</span>
<span class="line-modified">!   /*    the glyph image format, finding the relevant renderer, and         */</span>
<span class="line-modified">!   /*    invoking it.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    slot        :: A handle to the glyph slot containing the image to  */</span>
<span class="line-modified">!   /*                   convert.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    render_mode :: The render mode used to render the glyph image into */</span>
<span class="line-modified">!   /*                   a bitmap.  See @FT_Render_Mode for a list of        */</span>
<span class="line-modified">!   /*                   possible values.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    To get meaningful results, font scaling values must be set with    */</span>
<span class="line-modified">!   /*    functions like @FT_Set_Char_Size before calling `FT_Render_Glyph&#39;. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    When FreeType outputs a bitmap of a glyph, it really outputs an    */</span>
<span class="line-modified">!   /*    alpha coverage map.  If a pixel is completely covered by a         */</span>
<span class="line-modified">!   /*    filled-in outline, the bitmap contains 0xFF at that pixel, meaning */</span>
<span class="line-modified">!   /*    that 0xFF/0xFF fraction of that pixel is covered, meaning the      */</span>
<span class="line-modified">!   /*    pixel is 100% black (or 0% bright).  If a pixel is only 50%        */</span>
<span class="line-modified">!   /*    covered (value 0x80), the pixel is made 50% black (50% bright or a */</span>
<span class="line-modified">!   /*    middle shade of grey).  0% covered means 0% black (100% bright or  */</span>
<span class="line-modified">!   /*    white).                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    On high-DPI screens like on smartphones and tablets, the pixels    */</span>
<span class="line-modified">!   /*    are so small that their chance of being completely covered and     */</span>
<span class="line-modified">!   /*    therefore completely black are fairly good.  On the low-DPI        */</span>
<span class="line-modified">!   /*    screens, however, the situation is different.  The pixels are too  */</span>
<span class="line-modified">!   /*    large for most of the details of a glyph and shades of gray are    */</span>
<span class="line-modified">!   /*    the norm rather than the exception.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This is relevant because all our screens have a second problem:    */</span>
<span class="line-modified">!   /*    they are not linear.  1~+~1 is not~2.  Twice the value does not    */</span>
<span class="line-modified">!   /*    result in twice the brightness.  When a pixel is only 50% covered, */</span>
<span class="line-modified">!   /*    the coverage map says 50% black, and this translates to a pixel    */</span>
<span class="line-modified">!   /*    value of 128 when you use 8~bits per channel (0-255).  However,    */</span>
<span class="line-modified">!   /*    this does not translate to 50% brightness for that pixel on our    */</span>
<span class="line-modified">!   /*    sRGB and gamma~2.2 screens.  Due to their non-linearity, they      */</span>
<span class="line-modified">!   /*    dwell longer in the darks and only a pixel value of about 186      */</span>
<span class="line-modified">!   /*    results in 50% brightness -- 128 ends up too dark on both bright   */</span>
<span class="line-modified">!   /*    and dark backgrounds.  The net result is that dark text looks      */</span>
<span class="line-modified">!   /*    burnt-out, pixely and blotchy on bright background, bright text    */</span>
<span class="line-modified">!   /*    too frail on dark backgrounds, and colored text on colored         */</span>
<span class="line-modified">!   /*    background (for example, red on green) seems to have dark halos or */</span>
<span class="line-modified">!   /*    `dirt&#39; around it.  The situation is especially ugly for diagonal   */</span>
<span class="line-modified">!   /*    stems like in `w&#39; glyph shapes where the quality of FreeType&#39;s     */</span>
<span class="line-modified">!   /*    anti-aliasing depends on the correct display of grays.  On         */</span>
<span class="line-modified">!   /*    high-DPI screens where smaller, fully black pixels reign supreme,  */</span>
<span class="line-modified">!   /*    this doesn&#39;t matter, but on our low-DPI screens with all the gray  */</span>
<span class="line-modified">!   /*    shades, it does.  0% and 100% brightness are the same things in    */</span>
<span class="line-modified">!   /*    linear and non-linear space, just all the shades in-between        */</span>
<span class="line-modified">!   /*    aren&#39;t.                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The blending function for placing text over a background is        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      dst = alpha * src + (1 - alpha) * dst    ,                       */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    which is known as the OVER operator.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    To correctly composite an antialiased pixel of a glyph onto a      */</span>
<span class="line-modified">!   /*    surface,                                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    1. take the foreground and background colors (e.g., in sRGB space) */</span>
<span class="line-modified">!   /*       and apply gamma to get them in a linear space,                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    2. use OVER to blend the two linear colors using the glyph pixel   */</span>
<span class="line-modified">!   /*       as the alpha value (remember, the glyph bitmap is an alpha      */</span>
<span class="line-modified">!   /*       coverage bitmap), and                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    3. apply inverse gamma to the blended pixel and write it back to   */</span>
<span class="line-modified">!   /*       the image.                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Internal testing at Adobe found that a target inverse gamma of~1.8 */</span>
<span class="line-modified">!   /*    for step~3 gives good results across a wide range of displays with */</span>
<span class="line-modified">!   /*    an sRGB gamma curve or a similar one.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This process can cost performance.  There is an approximation that */</span>
<span class="line-modified">!   /*    does not need to know about the background color; see              */</span>
<span class="line-modified">!   /*    https://bel.fi/alankila/lcd/ and                                   */</span>
<span class="line-modified">!   /*    https://bel.fi/alankila/lcd/alpcor.html for details.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    *ATTENTION*: Linear blending is even more important when dealing   */</span>
<span class="line-modified">!   /*    with subpixel-rendered glyphs to prevent color-fringing!  A        */</span>
<span class="line-modified">!   /*    subpixel-rendered glyph must first be filtered with a filter that  */</span>
<span class="line-modified">!   /*    gives equal weight to the three color primaries and does not       */</span>
<span class="line-modified">!   /*    exceed a sum of 0x100, see section @lcd_filtering.  Then the       */</span>
<span class="line-modified">!   /*    only difference to gray linear blending is that subpixel-rendered  */</span>
<span class="line-modified">!   /*    linear blending is done 3~times per pixel: red foreground subpixel */</span>
<span class="line-modified">!   /*    to red background subpixel and so on for green and blue.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Render_Glyph( FT_GlyphSlot    slot,
                     FT_Render_Mode  render_mode );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Kerning_Mode                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An enumeration to specify the format of kerning values returned by */</span>
<span class="line-modified">!   /*    @FT_Get_Kerning.                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_KERNING_DEFAULT  :: Return grid-fitted kerning distances in     */</span>
<span class="line-modified">!   /*                           26.6 fractional pixels.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_KERNING_UNFITTED :: Return un-grid-fitted kerning distances in  */</span>
<span class="line-modified">!   /*                           26.6 fractional pixels.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_KERNING_UNSCALED :: Return the kerning vector in original font  */</span>
<span class="line-modified">!   /*                           units.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_KERNING_DEFAULT returns full pixel values; it also makes        */</span>
<span class="line-modified">!   /*    FreeType heuristically scale down kerning distances at small ppem  */</span>
<span class="line-modified">!   /*    values so that they don&#39;t become too big.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Both FT_KERNING_DEFAULT and FT_KERNING_UNFITTED use the current    */</span>
<span class="line-modified">!   /*    horizontal scaling factor (as set e.g. with @FT_Set_Char_Size) to  */</span>
<span class="line-modified">!   /*    convert font units to pixels.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef enum  FT_Kerning_Mode_
    {
      FT_KERNING_DEFAULT = 0,
      FT_KERNING_UNFITTED,
      FT_KERNING_UNSCALED
  
    } FT_Kerning_Mode;
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_Kerning_Mode&#39; values instead                      */</span>
  #define ft_kerning_default   FT_KERNING_DEFAULT
  #define ft_kerning_unfitted  FT_KERNING_UNFITTED
  #define ft_kerning_unscaled  FT_KERNING_UNSCALED
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Kerning                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the kerning vector between two glyphs of the same face.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face        :: A handle to a source face object.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    left_glyph  :: The index of the left glyph in the kern pair.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    right_glyph :: The index of the right glyph in the kern pair.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    kern_mode   :: See @FT_Kerning_Mode for more information.          */</span>
<span class="line-modified">!   /*                   Determines the scale and dimension of the returned  */</span>
<span class="line-modified">!   /*                   kerning vector.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    akerning    :: The kerning vector.  This is either in font units,  */</span>
<span class="line-modified">!   /*                   fractional pixels (26.6 format), or pixels for      */</span>
<span class="line-modified">!   /*                   scalable formats, and in pixels for fixed-sizes     */</span>
<span class="line-modified">!   /*                   formats.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Only horizontal layouts (left-to-right &amp; right-to-left) are        */</span>
<span class="line-modified">!   /*    supported by this method.  Other layouts, or more sophisticated    */</span>
<span class="line-modified">!   /*    kernings, are out of the scope of this API function -- they can be */</span>
<span class="line-modified">!   /*    implemented through format-specific interfaces.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Kerning for OpenType fonts implemented in a `GPOS&#39; table is not    */</span>
<span class="line-modified">!   /*    supported; use @FT_HAS_KERNING to find out whether a font has data */</span>
<span class="line-modified">!   /*    that can be extracted with `FT_Get_Kerning&#39;.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Get_Kerning( FT_Face     face,
                    FT_UInt     left_glyph,
                    FT_UInt     right_glyph,
                    FT_UInt     kern_mode,
                    FT_Vector  *akerning );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Track_Kerning                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the track kerning for a given face object at a given size.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face       :: A handle to a source face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    point_size :: The point size in 16.16 fractional points.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    degree     :: The degree of tightness.  Increasingly negative      */</span>
<span class="line-modified">!   /*                  values represent tighter track kerning, while        */</span>
<span class="line-modified">!   /*                  increasingly positive values represent looser track  */</span>
<span class="line-modified">!   /*                  kerning.  Value zero means no track kerning.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    akerning   :: The kerning in 16.16 fractional points, to be        */</span>
<span class="line-modified">!   /*                  uniformly applied between all glyphs.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Currently, only the Type~1 font driver supports track kerning,     */</span>
<span class="line-modified">!   /*    using data from AFM files (if attached with @FT_Attach_File or     */</span>
<span class="line-modified">!   /*    @FT_Attach_Stream).                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Only very few AFM files come with track kerning data; please refer */</span>
<span class="line-modified">!   /*    to Adobe&#39;s AFM specification for more details.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Get_Track_Kerning( FT_Face    face,
                          FT_Fixed   point_size,
                          FT_Int     degree,
                          FT_Fixed*  akerning );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Glyph_Name                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Retrieve the ASCII name of a given glyph in a face.  This only     */</span>
<span class="line-modified">!   /*    works for those faces where @FT_HAS_GLYPH_NAMES(face) returns~1.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face        :: A handle to a source face object.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_index :: The glyph index.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    buffer_max  :: The maximum number of bytes available in the        */</span>
<span class="line-modified">!   /*                   buffer.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    buffer      :: A pointer to a target buffer where the name is      */</span>
<span class="line-modified">!   /*                   copied to.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    An error is returned if the face doesn&#39;t provide glyph names or if */</span>
<span class="line-modified">!   /*    the glyph index is invalid.  In all cases of failure, the first    */</span>
<span class="line-modified">!   /*    byte of `buffer&#39; is set to~0 to indicate an empty name.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The glyph name is truncated to fit within the buffer if it is too  */</span>
<span class="line-modified">!   /*    long.  The returned string is always zero-terminated.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Be aware that FreeType reorders glyph indices internally so that   */</span>
<span class="line-modified">!   /*    glyph index~0 always corresponds to the `missing glyph&#39; (called    */</span>
<span class="line-modified">!   /*    `.notdef&#39;).                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This function always returns an error if the config macro          */</span>
<span class="line-modified">!   /*    `FT_CONFIG_OPTION_NO_GLYPH_NAMES&#39; is not defined in `ftoption.h&#39;.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Get_Glyph_Name( FT_Face     face,
                       FT_UInt     glyph_index,
                       FT_Pointer  buffer,
                       FT_UInt     buffer_max );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Postscript_Name                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Retrieve the ASCII PostScript name of a given face, if available.  */</span>
<span class="line-modified">!   /*    This only works with PostScript, TrueType, and OpenType fonts.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to the source face object.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    A pointer to the face&#39;s PostScript name.  NULL if unavailable.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The returned pointer is owned by the face and is destroyed with    */</span>
<span class="line-modified">!   /*    it.                                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    For variation fonts, this string changes if you select a different */</span>
<span class="line-modified">!   /*    instance, and you have to call `FT_Get_PostScript_Name&#39; again to   */</span>
<span class="line-modified">!   /*    retrieve it.  FreeType follows Adobe TechNote #5902, `Generating   */</span>
<span class="line-modified">!   /*    PostScript Names for Fonts Using OpenType Font Variations&#39;.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      https://download.macromedia.com/pub/developer/opentype/tech-notes/5902.AdobePSNameGeneration.html */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    [Since 2.9] Special PostScript names for named instances are only  */</span>
<span class="line-modified">!   /*    returned if the named instance is set with @FT_Set_Named_Instance  */</span>
<span class="line-modified">!   /*    (and the font has corresponding entries in its `fvar&#39; table).  If  */</span>
<span class="line-modified">!   /*    @FT_IS_VARIATION returns true, the algorithmically derived         */</span>
<span class="line-modified">!   /*    PostScript name is provided, not looking up special entries for    */</span>
<span class="line-modified">!   /*    named instances.                                                   */</span>
<span class="line-removed">-   /*                                                                       */</span>
    FT_EXPORT( const char* )
    FT_Get_Postscript_Name( FT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Select_Charmap                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Select a given charmap by its encoding tag (as listed in           */</span>
<span class="line-modified">!   /*    `freetype.h&#39;).                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    encoding :: A handle to the selected encoding.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function returns an error if no charmap in the face           */</span>
<span class="line-modified">!   /*    corresponds to the encoding queried here.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Because many fonts contain more than a single cmap for Unicode     */</span>
<span class="line-modified">!   /*    encoding, this function has some special code to select the one    */</span>
<span class="line-modified">!   /*    that covers Unicode best (`best&#39; in the sense that a UCS-4 cmap is */</span>
<span class="line-modified">!   /*    preferred to a UCS-2 cmap).  It is thus preferable to              */</span>
<span class="line-modified">!   /*    @FT_Set_Charmap in this case.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Select_Charmap( FT_Face      face,
                       FT_Encoding  encoding );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Set_Charmap                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Select a given charmap for character code to glyph index mapping.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    face    :: A handle to the source face object.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    charmap :: A handle to the selected charmap.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function returns an error if the charmap is not part of       */</span>
<span class="line-modified">!   /*    the face (i.e., if it is not listed in the `face-&gt;charmaps&#39;        */</span>
<span class="line-modified">!   /*    table).                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    It also fails if an OpenType type~14 charmap is selected (which    */</span>
<span class="line-modified">!   /*    doesn&#39;t map character codes to glyph indices at all).              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Error )
    FT_Set_Charmap( FT_Face     face,
                    FT_CharMap  charmap );
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @function:
     *   FT_Get_Charmap_Index
     *
     * @description:
<span class="line-new-header">--- 3270,411 ---</span>
  
    } FT_Render_Mode;
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_Render_Mode` values instead                       */</span>
  #define ft_render_mode_normal  FT_RENDER_MODE_NORMAL
  #define ft_render_mode_mono    FT_RENDER_MODE_MONO
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Render_Glyph</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Convert a given glyph image to a bitmap.  It does so by inspecting the</span>
<span class="line-modified">!    *   glyph image format, finding the relevant renderer, and invoking it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   slot ::</span>
<span class="line-modified">!    *     A handle to the glyph slot containing the image to convert.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   render_mode ::</span>
<span class="line-modified">!    *     The render mode used to render the glyph image into a bitmap.  See</span>
<span class="line-modified">!    *     @FT_Render_Mode for a list of possible values.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If @FT_RENDER_MODE_NORMAL is used, a previous call of @FT_Load_Glyph</span>
<span class="line-modified">!    *     with flag @FT_LOAD_COLOR makes FT_Render_Glyph provide a default</span>
<span class="line-modified">!    *     blending of colored glyph layers associated with the current glyph</span>
<span class="line-modified">!    *     slot (provided the font contains such layers) instead of rendering</span>
<span class="line-modified">!    *     the glyph slot&#39;s outline.  This is an experimental feature; see</span>
<span class="line-modified">!    *     @FT_LOAD_COLOR for more information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   To get meaningful results, font scaling values must be set with</span>
<span class="line-modified">!    *   functions like @FT_Set_Char_Size before calling `FT_Render_Glyph`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   When FreeType outputs a bitmap of a glyph, it really outputs an alpha</span>
<span class="line-modified">!    *   coverage map.  If a pixel is completely covered by a filled-in</span>
<span class="line-modified">!    *   outline, the bitmap contains 0xFF at that pixel, meaning that</span>
<span class="line-modified">!    *   0xFF/0xFF fraction of that pixel is covered, meaning the pixel is 100%</span>
<span class="line-modified">!    *   black (or 0% bright).  If a pixel is only 50% covered (value 0x80),</span>
<span class="line-modified">!    *   the pixel is made 50% black (50% bright or a middle shade of grey).</span>
<span class="line-modified">!    *   0% covered means 0% black (100% bright or white).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   On high-DPI screens like on smartphones and tablets, the pixels are so</span>
<span class="line-modified">!    *   small that their chance of being completely covered and therefore</span>
<span class="line-modified">!    *   completely black are fairly good.  On the low-DPI screens, however,</span>
<span class="line-modified">!    *   the situation is different.  The pixels are too large for most of the</span>
<span class="line-modified">!    *   details of a glyph and shades of gray are the norm rather than the</span>
<span class="line-modified">!    *   exception.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This is relevant because all our screens have a second problem: they</span>
<span class="line-modified">!    *   are not linear.  1~+~1 is not~2.  Twice the value does not result in</span>
<span class="line-modified">!    *   twice the brightness.  When a pixel is only 50% covered, the coverage</span>
<span class="line-modified">!    *   map says 50% black, and this translates to a pixel value of 128 when</span>
<span class="line-modified">!    *   you use 8~bits per channel (0-255).  However, this does not translate</span>
<span class="line-modified">!    *   to 50% brightness for that pixel on our sRGB and gamma~2.2 screens.</span>
<span class="line-modified">!    *   Due to their non-linearity, they dwell longer in the darks and only a</span>
<span class="line-modified">!    *   pixel value of about 186 results in 50% brightness -- 128 ends up too</span>
<span class="line-modified">!    *   dark on both bright and dark backgrounds.  The net result is that dark</span>
<span class="line-modified">!    *   text looks burnt-out, pixely and blotchy on bright background, bright</span>
<span class="line-modified">!    *   text too frail on dark backgrounds, and colored text on colored</span>
<span class="line-modified">!    *   background (for example, red on green) seems to have dark halos or</span>
<span class="line-modified">!    *   &#39;dirt&#39; around it.  The situation is especially ugly for diagonal stems</span>
<span class="line-modified">!    *   like in &#39;w&#39; glyph shapes where the quality of FreeType&#39;s anti-aliasing</span>
<span class="line-modified">!    *   depends on the correct display of grays.  On high-DPI screens where</span>
<span class="line-modified">!    *   smaller, fully black pixels reign supreme, this doesn&#39;t matter, but on</span>
<span class="line-modified">!    *   our low-DPI screens with all the gray shades, it does.  0% and 100%</span>
<span class="line-modified">!    *   brightness are the same things in linear and non-linear space, just</span>
<span class="line-modified">!    *   all the shades in-between aren&#39;t.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The blending function for placing text over a background is</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     dst = alpha * src + (1 - alpha) * dst    ,</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   which is known as the OVER operator.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   To correctly composite an antialiased pixel of a glyph onto a surface,</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   1. take the foreground and background colors (e.g., in sRGB space)</span>
<span class="line-modified">!    *      and apply gamma to get them in a linear space,</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   2. use OVER to blend the two linear colors using the glyph pixel</span>
<span class="line-modified">!    *      as the alpha value (remember, the glyph bitmap is an alpha coverage</span>
<span class="line-modified">!    *      bitmap), and</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   3. apply inverse gamma to the blended pixel and write it back to</span>
<span class="line-modified">!    *      the image.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Internal testing at Adobe found that a target inverse gamma of~1.8 for</span>
<span class="line-modified">!    *   step~3 gives good results across a wide range of displays with an sRGB</span>
<span class="line-modified">!    *   gamma curve or a similar one.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This process can cost performance.  There is an approximation that</span>
<span class="line-modified">!    *   does not need to know about the background color; see</span>
<span class="line-modified">!    *   https://bel.fi/alankila/lcd/ and</span>
<span class="line-modified">!    *   https://bel.fi/alankila/lcd/alpcor.html for details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   **ATTENTION**: Linear blending is even more important when dealing</span>
<span class="line-modified">!    *   with subpixel-rendered glyphs to prevent color-fringing!  A</span>
<span class="line-modified">!    *   subpixel-rendered glyph must first be filtered with a filter that</span>
<span class="line-modified">!    *   gives equal weight to the three color primaries and does not exceed a</span>
<span class="line-modified">!    *   sum of 0x100, see section @lcd_rendering.  Then the only difference to</span>
<span class="line-modified">!    *   gray linear blending is that subpixel-rendered linear blending is done</span>
<span class="line-modified">!    *   3~times per pixel: red foreground subpixel to red background subpixel</span>
<span class="line-added">+    *   and so on for green and blue.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Render_Glyph( FT_GlyphSlot    slot,
                     FT_Render_Mode  render_mode );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_Kerning_Mode</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An enumeration to specify the format of kerning values returned by</span>
<span class="line-modified">!    *   @FT_Get_Kerning.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_KERNING_DEFAULT ::</span>
<span class="line-modified">!    *     Return grid-fitted kerning distances in 26.6 fractional pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_KERNING_UNFITTED ::</span>
<span class="line-modified">!    *     Return un-grid-fitted kerning distances in 26.6 fractional pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_KERNING_UNSCALED ::</span>
<span class="line-modified">!    *     Return the kerning vector in original font units.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   `FT_KERNING_DEFAULT` returns full pixel values; it also makes FreeType</span>
<span class="line-modified">!    *   heuristically scale down kerning distances at small ppem values so</span>
<span class="line-modified">!    *   that they don&#39;t become too big.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Both `FT_KERNING_DEFAULT` and `FT_KERNING_UNFITTED` use the current</span>
<span class="line-modified">!    *   horizontal scaling factor (as set e.g. with @FT_Set_Char_Size) to</span>
<span class="line-modified">!    *   convert font units to pixels.</span>
<span class="line-modified">!    */</span>
    typedef enum  FT_Kerning_Mode_
    {
      FT_KERNING_DEFAULT = 0,
      FT_KERNING_UNFITTED,
      FT_KERNING_UNSCALED
  
    } FT_Kerning_Mode;
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_Kerning_Mode` values instead                      */</span>
  #define ft_kerning_default   FT_KERNING_DEFAULT
  #define ft_kerning_unfitted  FT_KERNING_UNFITTED
  #define ft_kerning_unscaled  FT_KERNING_UNSCALED
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Kerning</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the kerning vector between two glyphs of the same face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   left_glyph ::</span>
<span class="line-modified">!    *     The index of the left glyph in the kern pair.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   right_glyph ::</span>
<span class="line-modified">!    *     The index of the right glyph in the kern pair.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   kern_mode ::</span>
<span class="line-modified">!    *     See @FT_Kerning_Mode for more information.  Determines the scale and</span>
<span class="line-modified">!    *     dimension of the returned kerning vector.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   akerning ::</span>
<span class="line-modified">!    *     The kerning vector.  This is either in font units, fractional pixels</span>
<span class="line-modified">!    *     (26.6 format), or pixels for scalable formats, and in pixels for</span>
<span class="line-modified">!    *     fixed-sizes formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Only horizontal layouts (left-to-right &amp; right-to-left) are supported</span>
<span class="line-modified">!    *   by this method.  Other layouts, or more sophisticated kernings, are</span>
<span class="line-modified">!    *   out of the scope of this API function -- they can be implemented</span>
<span class="line-modified">!    *   through format-specific interfaces.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Kerning for OpenType fonts implemented in a &#39;GPOS&#39; table is not</span>
<span class="line-added">+    *   supported; use @FT_HAS_KERNING to find out whether a font has data</span>
<span class="line-added">+    *   that can be extracted with `FT_Get_Kerning`.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Get_Kerning( FT_Face     face,
                    FT_UInt     left_glyph,
                    FT_UInt     right_glyph,
                    FT_UInt     kern_mode,
                    FT_Vector  *akerning );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Track_Kerning</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the track kerning for a given face object at a given size.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   point_size ::</span>
<span class="line-modified">!    *     The point size in 16.16 fractional points.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   degree ::</span>
<span class="line-modified">!    *     The degree of tightness.  Increasingly negative values represent</span>
<span class="line-modified">!    *     tighter track kerning, while increasingly positive values represent</span>
<span class="line-modified">!    *     looser track kerning.  Value zero means no track kerning.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   akerning ::</span>
<span class="line-modified">!    *     The kerning in 16.16 fractional points, to be uniformly applied</span>
<span class="line-modified">!    *     between all glyphs.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Currently, only the Type~1 font driver supports track kerning, using</span>
<span class="line-modified">!    *   data from AFM files (if attached with @FT_Attach_File or</span>
<span class="line-modified">!    *   @FT_Attach_Stream).</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   Only very few AFM files come with track kerning data; please refer to</span>
<span class="line-added">+    *   Adobe&#39;s AFM specification for more details.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Get_Track_Kerning( FT_Face    face,
                          FT_Fixed   point_size,
                          FT_Int     degree,
                          FT_Fixed*  akerning );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Glyph_Name</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Retrieve the ASCII name of a given glyph in a face.  This only works</span>
<span class="line-modified">!    *   for those faces where @FT_HAS_GLYPH_NAMES(face) returns~1.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to a source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_index ::</span>
<span class="line-modified">!    *     The glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   buffer_max ::</span>
<span class="line-modified">!    *     The maximum number of bytes available in the buffer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   buffer ::</span>
<span class="line-modified">!    *     A pointer to a target buffer where the name is copied to.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   An error is returned if the face doesn&#39;t provide glyph names or if the</span>
<span class="line-modified">!    *   glyph index is invalid.  In all cases of failure, the first byte of</span>
<span class="line-modified">!    *   `buffer` is set to~0 to indicate an empty name.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The glyph name is truncated to fit within the buffer if it is too</span>
<span class="line-modified">!    *   long.  The returned string is always zero-terminated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Be aware that FreeType reorders glyph indices internally so that glyph</span>
<span class="line-modified">!    *   index~0 always corresponds to the &#39;missing glyph&#39; (called &#39;.notdef&#39;).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This function always returns an error if the config macro</span>
<span class="line-modified">!    *   `FT_CONFIG_OPTION_NO_GLYPH_NAMES` is not defined in `ftoption.h`.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Get_Glyph_Name( FT_Face     face,
                       FT_UInt     glyph_index,
                       FT_Pointer  buffer,
                       FT_UInt     buffer_max );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Postscript_Name</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Retrieve the ASCII PostScript name of a given face, if available.</span>
<span class="line-modified">!    *   This only works with PostScript, TrueType, and OpenType fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   A pointer to the face&#39;s PostScript name.  `NULL` if unavailable.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The returned pointer is owned by the face and is destroyed with it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   For variation fonts, this string changes if you select a different</span>
<span class="line-modified">!    *   instance, and you have to call `FT_Get_PostScript_Name` again to</span>
<span class="line-modified">!    *   retrieve it.  FreeType follows Adobe TechNote #5902, &#39;Generating</span>
<span class="line-modified">!    *   PostScript Names for Fonts Using OpenType Font Variations&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     https://download.macromedia.com/pub/developer/opentype/tech-notes/5902.AdobePSNameGeneration.html</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   [Since 2.9] Special PostScript names for named instances are only</span>
<span class="line-modified">!    *   returned if the named instance is set with @FT_Set_Named_Instance (and</span>
<span class="line-modified">!    *   the font has corresponding entries in its &#39;fvar&#39; table).  If</span>
<span class="line-modified">!    *   @FT_IS_VARIATION returns true, the algorithmically derived PostScript</span>
<span class="line-modified">!    *   name is provided, not looking up special entries for named instances.</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( const char* )
    FT_Get_Postscript_Name( FT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Select_Charmap</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Select a given charmap by its encoding tag (as listed in</span>
<span class="line-modified">!    *   `freetype.h`).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   encoding ::</span>
<span class="line-modified">!    *     A handle to the selected encoding.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function returns an error if no charmap in the face corresponds</span>
<span class="line-modified">!    *   to the encoding queried here.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Because many fonts contain more than a single cmap for Unicode</span>
<span class="line-modified">!    *   encoding, this function has some special code to select the one that</span>
<span class="line-modified">!    *   covers Unicode best (&#39;best&#39; in the sense that a UCS-4 cmap is</span>
<span class="line-modified">!    *   preferred to a UCS-2 cmap).  It is thus preferable to @FT_Set_Charmap</span>
<span class="line-added">+    *   in this case.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Select_Charmap( FT_Face      face,
                       FT_Encoding  encoding );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Set_Charmap</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Select a given charmap for character code to glyph index mapping.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   charmap ::</span>
<span class="line-modified">!    *     A handle to the selected charmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function returns an error if the charmap is not part of the face</span>
<span class="line-modified">!    *   (i.e., if it is not listed in the `face-&gt;charmaps` table).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   It also fails if an OpenType type~14 charmap is selected (which</span>
<span class="line-modified">!    *   doesn&#39;t map character codes to glyph indices at all).</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Error )
    FT_Set_Charmap( FT_Face     face,
                    FT_CharMap  charmap );
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @function:
     *   FT_Get_Charmap_Index
     *
     * @description:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3649,192 ***</span>
     *   charmap ::
     *     A handle to a charmap.
     *
     * @return:
     *   The index into the array of character maps within the face to which
<span class="line-modified">!    *   `charmap&#39; belongs.  If an error occurs, -1 is returned.</span>
     *
     */
    FT_EXPORT( FT_Int )
    FT_Get_Charmap_Index( FT_CharMap  charmap );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Char_Index                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the glyph index of a given character code.  This function   */</span>
<span class="line-modified">!   /*    uses the currently selected charmap to do the mapping.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    charcode :: The character code.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The glyph index.  0~means `undefined character code&#39;.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    If you use FreeType to manipulate the contents of font files       */</span>
<span class="line-modified">!   /*    directly, be aware that the glyph index returned by this function  */</span>
<span class="line-modified">!   /*    doesn&#39;t always correspond to the internal indices used within the  */</span>
<span class="line-modified">!   /*    file.  This is done to ensure that value~0 always corresponds to   */</span>
<span class="line-modified">!   /*    the `missing glyph&#39;.  If the first glyph is not named `.notdef&#39;,   */</span>
<span class="line-modified">!   /*    then for Type~1 and Type~42 fonts, `.notdef&#39; will be moved into    */</span>
<span class="line-modified">!   /*    the glyph ID~0 position, and whatever was there will be moved to   */</span>
<span class="line-modified">!   /*    the position `.notdef&#39; had.  For Type~1 fonts, if there is no      */</span>
<span class="line-modified">!   /*    `.notdef&#39; glyph at all, then one will be created at index~0 and    */</span>
<span class="line-modified">!   /*    whatever was there will be moved to the last index -- Type~42      */</span>
<span class="line-modified">!   /*    fonts are considered invalid under this condition.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_UInt )
    FT_Get_Char_Index( FT_Face   face,
                       FT_ULong  charcode );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_First_Char                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the first character code in the current charmap of a given  */</span>
<span class="line-modified">!   /*    face, together with its corresponding glyph index.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face    :: A handle to the source face object.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    agindex :: Glyph index of first character code.  0~if charmap is   */</span>
<span class="line-modified">!   /*               empty.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The charmap&#39;s first character code.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    You should use this function together with @FT_Get_Next_Char to    */</span>
<span class="line-modified">!   /*    parse all character codes available in a given charmap.  The code  */</span>
<span class="line-modified">!   /*    should look like this:                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      FT_ULong  charcode;                                              */</span>
<span class="line-modified">!   /*      FT_UInt   gindex;                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      charcode = FT_Get_First_Char( face, &amp;gindex );                   */</span>
<span class="line-modified">!   /*      while ( gindex != 0 )                                            */</span>
<span class="line-modified">!   /*      {                                                                */</span>
<span class="line-modified">!   /*        ... do something with (charcode,gindex) pair ...               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*        charcode = FT_Get_Next_Char( face, charcode, &amp;gindex );        */</span>
<span class="line-modified">!   /*      }                                                                */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Be aware that character codes can have values up to 0xFFFFFFFF;    */</span>
<span class="line-modified">!   /*    this might happen for non-Unicode or malformed cmaps.  However,    */</span>
<span class="line-modified">!   /*    even with regular Unicode encoding, so-called `last resort fonts&#39;  */</span>
<span class="line-modified">!   /*    (using SFNT cmap format 13, see function @FT_Get_CMap_Format)      */</span>
<span class="line-modified">!   /*    normally have entries for all Unicode characters up to 0x1FFFFF,   */</span>
<span class="line-modified">!   /*    which can cause *a lot* of iterations.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Note that `*agindex&#39; is set to~0 if the charmap is empty.  The     */</span>
<span class="line-modified">!   /*    result itself can be~0 in two cases: if the charmap is empty or    */</span>
<span class="line-modified">!   /*    if the value~0 is the first valid character code.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_ULong )
    FT_Get_First_Char( FT_Face   face,
                       FT_UInt  *agindex );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Next_Char                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the next character code in the current charmap of a given   */</span>
<span class="line-modified">!   /*    face following the value `char_code&#39;, as well as the corresponding */</span>
<span class="line-modified">!   /*    glyph index.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face      :: A handle to the source face object.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    char_code :: The starting character code.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    agindex   :: Glyph index of next character code.  0~if charmap     */</span>
<span class="line-modified">!   /*                 is empty.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The charmap&#39;s next character code.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    You should use this function with @FT_Get_First_Char to walk       */</span>
<span class="line-modified">!   /*    over all character codes available in a given charmap.  See the    */</span>
<span class="line-modified">!   /*    note for that function for a simple code example.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Note that `*agindex&#39; is set to~0 when there are no more codes in   */</span>
<span class="line-modified">!   /*    the charmap.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_ULong )
    FT_Get_Next_Char( FT_Face    face,
                      FT_ULong   char_code,
                      FT_UInt   *agindex );
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @function:
     *   FT_Face_Properties
     *
     * @description:
     *   Set or override certain (library or module-wide) properties on a
     *   face-by-face basis.  Useful for finer-grained control and avoiding
<span class="line-modified">!    *   locks on shared structures (threads can modify their own faces as</span>
<span class="line-modified">!    *   they see fit).</span>
     *
<span class="line-modified">!    *   Contrary to @FT_Property_Set, this function uses @FT_Parameter so</span>
<span class="line-modified">!    *   that you can pass multiple properties to the target face in one call.</span>
<span class="line-modified">!    *   Note that only a subset of the available properties can be</span>
<span class="line-removed">-    *   controlled.</span>
     *
     *   * @FT_PARAM_TAG_STEM_DARKENING (stem darkening, corresponding to the
<span class="line-modified">!    *     property `no-stem-darkening&#39; provided by the `autofit&#39;, `cff&#39;,</span>
<span class="line-modified">!    *     `type1&#39;, and `t1cid&#39; modules; see @no-stem-darkening).</span>
     *
     *   * @FT_PARAM_TAG_LCD_FILTER_WEIGHTS (LCD filter weights, corresponding
     *     to function @FT_Library_SetLcdFilterWeights).
     *
     *   * @FT_PARAM_TAG_RANDOM_SEED (seed value for the CFF, Type~1, and CID
<span class="line-modified">!    *     `random&#39; operator, corresponding to the `random-seed&#39; property</span>
<span class="line-modified">!    *     provided by the `cff&#39;, `type1&#39;, and `t1cid&#39; modules; see</span>
     *     @random-seed).
     *
<span class="line-modified">!    *   Pass NULL as `data&#39; in @FT_Parameter for a given tag to reset the</span>
     *   option and use the library or module default again.
     *
     * @input:
     *   face ::
     *     A handle to the source face object.
     *
     *   num_properties ::
     *     The number of properties that follow.
     *
     *   properties ::
<span class="line-modified">!    *     A handle to an @FT_Parameter array with `num_properties&#39; elements.</span>
     *
     * @return:
     *   FreeType error code.  0~means success.
     *
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Here an example that sets three properties.  You must define</span>
<span class="line-modified">!    *   FT_CONFIG_OPTION_SUBPIXEL_RENDERING to make the LCD filter examples</span>
     *   work.
     *
<span class="line-modified">!    *   {</span>
     *     FT_Parameter         property1;
     *     FT_Bool              darken_stems = 1;
     *
     *     FT_Parameter         property2;
     *     FT_LcdFiveTapFilter  custom_weight =
<span class="line-new-header">--- 3684,195 ---</span>
     *   charmap ::
     *     A handle to a charmap.
     *
     * @return:
     *   The index into the array of character maps within the face to which
<span class="line-modified">!    *   `charmap` belongs.  If an error occurs, -1 is returned.</span>
     *
     */
    FT_EXPORT( FT_Int )
    FT_Get_Charmap_Index( FT_CharMap  charmap );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Char_Index</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the glyph index of a given character code.  This function uses</span>
<span class="line-modified">!    *   the currently selected charmap to do the mapping.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   charcode ::</span>
<span class="line-modified">!    *     The character code.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The glyph index.  0~means &#39;undefined character code&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   If you use FreeType to manipulate the contents of font files directly,</span>
<span class="line-modified">!    *   be aware that the glyph index returned by this function doesn&#39;t always</span>
<span class="line-modified">!    *   correspond to the internal indices used within the file.  This is done</span>
<span class="line-modified">!    *   to ensure that value~0 always corresponds to the &#39;missing glyph&#39;.  If</span>
<span class="line-modified">!    *   the first glyph is not named &#39;.notdef&#39;, then for Type~1 and Type~42</span>
<span class="line-modified">!    *   fonts, &#39;.notdef&#39; will be moved into the glyph ID~0 position, and</span>
<span class="line-modified">!    *   whatever was there will be moved to the position &#39;.notdef&#39; had.  For</span>
<span class="line-modified">!    *   Type~1 fonts, if there is no &#39;.notdef&#39; glyph at all, then one will be</span>
<span class="line-modified">!    *   created at index~0 and whatever was there will be moved to the last</span>
<span class="line-modified">!    *   index -- Type~42 fonts are considered invalid under this condition.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_UInt )
    FT_Get_Char_Index( FT_Face   face,
                       FT_ULong  charcode );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_First_Char</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the first character code in the current charmap of a given</span>
<span class="line-modified">!    *   face, together with its corresponding glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   agindex ::</span>
<span class="line-modified">!    *     Glyph index of first character code.  0~if charmap is empty.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The charmap&#39;s first character code.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   You should use this function together with @FT_Get_Next_Char to parse</span>
<span class="line-modified">!    *   all character codes available in a given charmap.  The code should</span>
<span class="line-modified">!    *   look like this:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     FT_ULong  charcode;</span>
<span class="line-modified">!    *     FT_UInt   gindex;</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     charcode = FT_Get_First_Char( face, &amp;gindex );</span>
<span class="line-modified">!    *     while ( gindex != 0 )</span>
<span class="line-modified">!    *     {</span>
<span class="line-modified">!    *       ... do something with (charcode,gindex) pair ...</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *       charcode = FT_Get_Next_Char( face, charcode, &amp;gindex );</span>
<span class="line-modified">!    *     }</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Be aware that character codes can have values up to 0xFFFFFFFF; this</span>
<span class="line-modified">!    *   might happen for non-Unicode or malformed cmaps.  However, even with</span>
<span class="line-modified">!    *   regular Unicode encoding, so-called &#39;last resort fonts&#39; (using SFNT</span>
<span class="line-modified">!    *   cmap format 13, see function @FT_Get_CMap_Format) normally have</span>
<span class="line-modified">!    *   entries for all Unicode characters up to 0x1FFFFF, which can cause *a</span>
<span class="line-modified">!    *   lot* of iterations.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Note that `*agindex` is set to~0 if the charmap is empty.  The result</span>
<span class="line-modified">!    *   itself can be~0 in two cases: if the charmap is empty or if the</span>
<span class="line-modified">!    *   value~0 is the first valid character code.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_ULong )
    FT_Get_First_Char( FT_Face   face,
                       FT_UInt  *agindex );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Next_Char</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the next character code in the current charmap of a given face</span>
<span class="line-modified">!    *   following the value `char_code`, as well as the corresponding glyph</span>
<span class="line-modified">!    *   index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   char_code ::</span>
<span class="line-modified">!    *     The starting character code.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   agindex ::</span>
<span class="line-modified">!    *     Glyph index of next character code.  0~if charmap is empty.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The charmap&#39;s next character code.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   You should use this function with @FT_Get_First_Char to walk over all</span>
<span class="line-modified">!    *   character codes available in a given charmap.  See the note for that</span>
<span class="line-modified">!    *   function for a simple code example.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Note that `*agindex` is set to~0 when there are no more codes in the</span>
<span class="line-added">+    *   charmap.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_ULong )
    FT_Get_Next_Char( FT_Face    face,
                      FT_ULong   char_code,
                      FT_UInt   *agindex );
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @function:
     *   FT_Face_Properties
     *
     * @description:
     *   Set or override certain (library or module-wide) properties on a
     *   face-by-face basis.  Useful for finer-grained control and avoiding
<span class="line-modified">!    *   locks on shared structures (threads can modify their own faces as they</span>
<span class="line-modified">!    *   see fit).</span>
     *
<span class="line-modified">!    *   Contrary to @FT_Property_Set, this function uses @FT_Parameter so that</span>
<span class="line-modified">!    *   you can pass multiple properties to the target face in one call.  Note</span>
<span class="line-modified">!    *   that only a subset of the available properties can be controlled.</span>
     *
     *   * @FT_PARAM_TAG_STEM_DARKENING (stem darkening, corresponding to the
<span class="line-modified">!    *     property `no-stem-darkening` provided by the &#39;autofit&#39;, &#39;cff&#39;,</span>
<span class="line-modified">!    *     &#39;type1&#39;, and &#39;t1cid&#39; modules; see @no-stem-darkening).</span>
     *
     *   * @FT_PARAM_TAG_LCD_FILTER_WEIGHTS (LCD filter weights, corresponding
     *     to function @FT_Library_SetLcdFilterWeights).
     *
     *   * @FT_PARAM_TAG_RANDOM_SEED (seed value for the CFF, Type~1, and CID
<span class="line-modified">!    *     &#39;random&#39; operator, corresponding to the `random-seed` property</span>
<span class="line-modified">!    *     provided by the &#39;cff&#39;, &#39;type1&#39;, and &#39;t1cid&#39; modules; see</span>
     *     @random-seed).
     *
<span class="line-modified">!    *   Pass `NULL` as `data` in @FT_Parameter for a given tag to reset the</span>
     *   option and use the library or module default again.
     *
     * @input:
     *   face ::
     *     A handle to the source face object.
     *
     *   num_properties ::
     *     The number of properties that follow.
     *
     *   properties ::
<span class="line-modified">!    *     A handle to an @FT_Parameter array with `num_properties` elements.</span>
     *
     * @return:
     *   FreeType error code.  0~means success.
     *
<span class="line-modified">!    * @example:</span>
<span class="line-modified">!    *   Here is an example that sets three properties.  You must define</span>
<span class="line-modified">!    *   `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` to make the LCD filter examples</span>
     *   work.
     *
<span class="line-modified">!    *   ```</span>
     *     FT_Parameter         property1;
     *     FT_Bool              darken_stems = 1;
     *
     *     FT_Parameter         property2;
     *     FT_LcdFiveTapFilter  custom_weight =
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3856,23 ***</span>
     *
     *     property3.tag  = FT_PARAM_TAG_RANDOM_SEED;
     *     property3.data = &amp;random_seed;
     *
     *     FT_Face_Properties( face, 3, properties );
<span class="line-modified">!    *   }</span>
     *
     *   The next example resets a single property to its default value.
     *
<span class="line-modified">!    *   {</span>
     *     FT_Parameter  property;
     *
     *
     *     property.tag  = FT_PARAM_TAG_LCD_FILTER_WEIGHTS;
     *     property.data = NULL;
     *
     *     FT_Face_Properties( face, 1, &amp;property );
<span class="line-modified">!    *   }</span>
     *
     * @since:
     *   2.8
     *
     */
<span class="line-new-header">--- 3894,23 ---</span>
     *
     *     property3.tag  = FT_PARAM_TAG_RANDOM_SEED;
     *     property3.data = &amp;random_seed;
     *
     *     FT_Face_Properties( face, 3, properties );
<span class="line-modified">!    *   ```</span>
     *
     *   The next example resets a single property to its default value.
     *
<span class="line-modified">!    *   ```</span>
     *     FT_Parameter  property;
     *
     *
     *     property.tag  = FT_PARAM_TAG_LCD_FILTER_WEIGHTS;
     *     property.data = NULL;
     *
     *     FT_Face_Properties( face, 1, &amp;property );
<span class="line-modified">!    *   ```</span>
     *
     * @since:
     *   2.8
     *
     */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3880,41 ***</span>
    FT_Face_Properties( FT_Face        face,
                        FT_UInt        num_properties,
                        FT_Parameter*  properties );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_Name_Index                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the glyph index of a given glyph name.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face       :: A handle to the source face object.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_name :: The glyph name.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The glyph index.  0~means `undefined character code&#39;.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_UInt )
<span class="line-modified">!   FT_Get_Name_Index( FT_Face     face,</span>
<span class="line-modified">!                      FT_String*  glyph_name );</span>
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
<span class="line-modified">!    * @macro:</span>
     *   FT_SUBGLYPH_FLAG_XXX
     *
     * @description:
<span class="line-modified">!    *   A list of constants describing subglyphs.  Please refer to the</span>
<span class="line-modified">!    *   `glyf&#39; table description in the OpenType specification for the</span>
<span class="line-modified">!    *   meaning of the various flags (which get synthesized for</span>
<span class="line-modified">!    *   non-OpenType subglyphs).</span>
     *
     * @values:
     *   FT_SUBGLYPH_FLAG_ARGS_ARE_WORDS ::
     *   FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES ::
     *   FT_SUBGLYPH_FLAG_ROUND_XY_TO_GRID ::
<span class="line-new-header">--- 3918,44 ---</span>
    FT_Face_Properties( FT_Face        face,
                        FT_UInt        num_properties,
                        FT_Parameter*  properties );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Name_Index</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the glyph index of a given glyph name.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_name ::</span>
<span class="line-modified">!    *     The glyph name.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   The glyph index.  0~means &#39;undefined character code&#39;.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_UInt )
<span class="line-modified">!   FT_Get_Name_Index( FT_Face           face,</span>
<span class="line-modified">!                      const FT_String*  glyph_name );</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
<span class="line-modified">!    * @enum:</span>
     *   FT_SUBGLYPH_FLAG_XXX
     *
     * @description:
<span class="line-modified">!    *   A list of constants describing subglyphs.  Please refer to the &#39;glyf&#39;</span>
<span class="line-modified">!    *   table description in the OpenType specification for the meaning of the</span>
<span class="line-modified">!    *   various flags (which get synthesized for non-OpenType subglyphs).</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *     https://docs.microsoft.com/en-us/typography/opentype/spec/glyf#composite-glyph-description</span>
     *
     * @values:
     *   FT_SUBGLYPH_FLAG_ARGS_ARE_WORDS ::
     *   FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES ::
     *   FT_SUBGLYPH_FLAG_ROUND_XY_TO_GRID ::
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3931,719 ***</span>
  #define FT_SUBGLYPH_FLAG_XY_SCALE             0x40
  #define FT_SUBGLYPH_FLAG_2X2                  0x80
  #define FT_SUBGLYPH_FLAG_USE_MY_METRICS      0x200
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
<span class="line-modified">!    * @func:</span>
<span class="line-modified">!    *   FT_Get_SubGlyph_Info</span>
     *
     * @description:
<span class="line-modified">!    *   Retrieve a description of a given subglyph.  Only use it if</span>
<span class="line-modified">!    *   `glyph-&gt;format&#39; is @FT_GLYPH_FORMAT_COMPOSITE; an error is</span>
<span class="line-modified">!    *   returned otherwise.</span>
     *
<span class="line-modified">!    * @input:</span>
<span class="line-removed">-    *   glyph ::</span>
<span class="line-removed">-    *     The source glyph slot.</span>
     *
<span class="line-modified">!    *   sub_index ::</span>
<span class="line-modified">!    *     The index of the subglyph.  Must be less than</span>
<span class="line-modified">!    *     `glyph-&gt;num_subglyphs&#39;.</span>
     *
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   p_index ::</span>
<span class="line-modified">!    *     The glyph index of the subglyph.</span>
     *
<span class="line-modified">!    *   p_flags ::</span>
<span class="line-modified">!    *     The subglyph flags, see @FT_SUBGLYPH_FLAG_XXX.</span>
     *
<span class="line-modified">!    *   p_arg1 ::</span>
<span class="line-modified">!    *     The subglyph&#39;s first argument (if any).</span>
     *
<span class="line-modified">!    *   p_arg2 ::</span>
<span class="line-modified">!    *     The subglyph&#39;s second argument (if any).</span>
     *
<span class="line-modified">!    *   p_transform ::</span>
<span class="line-modified">!    *     The subglyph transformation (if any).</span>
     *
     * @return:
<span class="line-modified">!    *   FreeType error code.  0~means success.</span>
     *
     * @note:
<span class="line-modified">!    *   The values of `*p_arg1&#39;, `*p_arg2&#39;, and `*p_transform&#39; must be</span>
<span class="line-modified">!    *   interpreted depending on the flags returned in `*p_flags&#39;.  See the</span>
<span class="line-modified">!    *   OpenType specification for details.</span>
     *
     */
<span class="line-modified">!   FT_EXPORT( FT_Error )</span>
<span class="line-modified">!   FT_Get_SubGlyph_Info( FT_GlyphSlot  glyph,</span>
<span class="line-modified">!                         FT_UInt       sub_index,</span>
<span class="line-modified">!                         FT_Int       *p_index,</span>
<span class="line-modified">!                         FT_UInt      *p_flags,</span>
<span class="line-modified">!                         FT_Int       *p_arg1,</span>
<span class="line-removed">-                         FT_Int       *p_arg2,</span>
<span class="line-removed">-                         FT_Matrix    *p_transform );</span>
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_FSTYPE_XXX                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A list of bit flags used in the `fsType&#39; field of the OS/2 table   */</span>
<span class="line-modified">!   /*    in a TrueType or OpenType font and the `FSType&#39; entry in a         */</span>
<span class="line-modified">!   /*    PostScript font.  These bit flags are returned by                  */</span>
<span class="line-modified">!   /*    @FT_Get_FSType_Flags; they inform client applications of embedding */</span>
<span class="line-modified">!   /*    and subsetting restrictions associated with a font.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    See                                                                */</span>
<span class="line-modified">!   /*    https://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/FontPolicies.pdf */</span>
<span class="line-modified">!   /*    for more details.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_FSTYPE_INSTALLABLE_EMBEDDING ::                                 */</span>
<span class="line-modified">!   /*      Fonts with no fsType bit set may be embedded and permanently     */</span>
<span class="line-modified">!   /*      installed on the remote system by an application.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING ::                          */</span>
<span class="line-modified">!   /*      Fonts that have only this bit set must not be modified, embedded */</span>
<span class="line-modified">!   /*      or exchanged in any manner without first obtaining permission of */</span>
<span class="line-modified">!   /*      the font software copyright owner.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING ::                           */</span>
<span class="line-modified">!   /*      The font may be embedded and temporarily loaded on the remote    */</span>
<span class="line-modified">!   /*      system.  Documents containing Preview &amp; Print fonts must be      */</span>
<span class="line-modified">!   /*      opened `read-only&#39;; no edits can be applied to the document.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FSTYPE_EDITABLE_EMBEDDING ::                                    */</span>
<span class="line-modified">!   /*      The font may be embedded but must only be installed temporarily  */</span>
<span class="line-modified">!   /*      on other systems.  In contrast to Preview &amp; Print fonts,         */</span>
<span class="line-modified">!   /*      documents containing editable fonts may be opened for reading,   */</span>
<span class="line-modified">!   /*      editing is permitted, and changes may be saved.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FSTYPE_NO_SUBSETTING ::                                         */</span>
<span class="line-modified">!   /*      The font may not be subsetted prior to embedding.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_FSTYPE_BITMAP_EMBEDDING_ONLY ::                                 */</span>
<span class="line-modified">!   /*      Only bitmaps contained in the font may be embedded; no outline   */</span>
<span class="line-modified">!   /*      data may be embedded.  If there are no bitmaps available in the  */</span>
<span class="line-modified">!   /*      font, then the font is unembeddable.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The flags are ORed together, thus more than a single value can be  */</span>
<span class="line-modified">!   /*    returned.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    While the `fsType&#39; flags can indicate that a font may be embedded, */</span>
<span class="line-modified">!   /*    a license with the font vendor may be separately required to use   */</span>
<span class="line-modified">!   /*    the font in this way.                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
  #define FT_FSTYPE_INSTALLABLE_EMBEDDING         0x0000
  #define FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING  0x0002
  #define FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING   0x0004
  #define FT_FSTYPE_EDITABLE_EMBEDDING            0x0008
  #define FT_FSTYPE_NO_SUBSETTING                 0x0100
  #define FT_FSTYPE_BITMAP_EMBEDDING_ONLY         0x0200
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Get_FSType_Flags                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the `fsType&#39; flags for a font.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A handle to the source face object.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The `fsType&#39; flags, see @FT_FSTYPE_XXX.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Use this function rather than directly reading the `fs_type&#39; field */</span>
<span class="line-modified">!   /*    in the @PS_FontInfoRec structure, which is only guaranteed to      */</span>
<span class="line-modified">!   /*    return the correct results for Type~1 fonts.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.8                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_UShort )
    FT_Get_FSType_Flags( FT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    glyph_variants                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    Unicode Variation Sequences                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    The FreeType~2 interface to Unicode Variation Sequences (UVS),     */</span>
<span class="line-modified">!   /*    using the SFNT cmap format~14.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Many characters, especially for CJK scripts, have variant forms.   */</span>
<span class="line-modified">!   /*    They are a sort of grey area somewhere between being totally       */</span>
<span class="line-modified">!   /*    irrelevant and semantically distinct; for this reason, the Unicode */</span>
<span class="line-modified">!   /*    consortium decided to introduce Variation Sequences (VS),          */</span>
<span class="line-modified">!   /*    consisting of a Unicode base character and a variation selector    */</span>
<span class="line-modified">!   /*    instead of further extending the already huge number of            */</span>
<span class="line-modified">!   /*    characters.                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Unicode maintains two different sets, namely `Standardized         */</span>
<span class="line-modified">!   /*    Variation Sequences&#39; and registered `Ideographic Variation         */</span>
<span class="line-modified">!   /*    Sequences&#39; (IVS), collected in the `Ideographic Variation          */</span>
<span class="line-modified">!   /*    Database&#39; (IVD).                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      https://unicode.org/Public/UCD/latest/ucd/StandardizedVariants.txt */</span>
<span class="line-modified">!   /*      https://unicode.org/reports/tr37/                                */</span>
<span class="line-modified">!   /*      https://unicode.org/ivd/                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    To date (January 2017), the character with the most ideographic    */</span>
<span class="line-modified">!   /*    variations is U+9089, having 32 such IVS.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Three Mongolian Variation Selectors have the values U+180B-U+180D; */</span>
<span class="line-modified">!   /*    256 generic Variation Selectors are encoded in the ranges          */</span>
<span class="line-modified">!   /*    U+FE00-U+FE0F and U+E0100-U+E01EF.  IVS currently use Variation    */</span>
<span class="line-modified">!   /*    Selectors from the range U+E0100-U+E01EF only.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A VS consists of the base character value followed by a single     */</span>
<span class="line-modified">!   /*    Variation Selector.  For example, to get the first variation of    */</span>
<span class="line-modified">!   /*    U+9089, you have to write the character sequence `U+9089 U+E0100&#39;. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Adobe and MS decided to support both standardized and ideographic  */</span>
<span class="line-modified">!   /*    VS with a new cmap subtable (format~14).  It is an odd subtable    */</span>
<span class="line-modified">!   /*    because it is not a mapping of input code points to glyphs, but    */</span>
<span class="line-modified">!   /*    contains lists of all variations supported by the font.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A variation may be either `default&#39; or `non-default&#39; for a given   */</span>
<span class="line-modified">!   /*    font.  A default variation is the one you will get for that code   */</span>
<span class="line-modified">!   /*    point if you look it up in the standard Unicode cmap.  A           */</span>
<span class="line-removed">-   /*    non-default variation is a different glyph.                        */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*************************************************************************/</span>
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_GetCharVariantIndex                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the glyph index of a given character code as modified by    */</span>
<span class="line-modified">!   /*    the variation selector.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face ::                                                            */</span>
<span class="line-modified">!   /*      A handle to the source face object.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    charcode ::                                                        */</span>
<span class="line-modified">!   /*      The character code point in Unicode.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    variantSelector ::                                                 */</span>
<span class="line-modified">!   /*      The Unicode code point of the variation selector.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The glyph index.  0~means either `undefined character code&#39;, or    */</span>
<span class="line-modified">!   /*    `undefined selector code&#39;, or `no variation selector cmap          */</span>
<span class="line-modified">!   /*    subtable&#39;, or `current CharMap is not Unicode&#39;.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    If you use FreeType to manipulate the contents of font files       */</span>
<span class="line-modified">!   /*    directly, be aware that the glyph index returned by this function  */</span>
<span class="line-modified">!   /*    doesn&#39;t always correspond to the internal indices used within      */</span>
<span class="line-modified">!   /*    the file.  This is done to ensure that value~0 always corresponds  */</span>
<span class="line-modified">!   /*    to the `missing glyph&#39;.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This function is only meaningful if                                */</span>
<span class="line-modified">!   /*      a) the font has a variation selector cmap sub table,             */</span>
<span class="line-modified">!   /*    and                                                                */</span>
<span class="line-modified">!   /*      b) the current charmap has a Unicode encoding.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-removed">-   /*    2.3.6                                                              */</span>
<span class="line-removed">-   /*                                                                       */</span>
    FT_EXPORT( FT_UInt )
    FT_Face_GetCharVariantIndex( FT_Face   face,
                                 FT_ULong  charcode,
                                 FT_ULong  variantSelector );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_GetCharVariantIsDefault                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Check whether this variation of this Unicode character is the one  */</span>
<span class="line-modified">!   /*    to be found in the `cmap&#39;.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face ::                                                            */</span>
<span class="line-modified">!   /*      A handle to the source face object.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    charcode ::                                                        */</span>
<span class="line-modified">!   /*      The character codepoint in Unicode.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    variantSelector ::                                                 */</span>
<span class="line-modified">!   /*      The Unicode codepoint of the variation selector.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    1~if found in the standard (Unicode) cmap, 0~if found in the       */</span>
<span class="line-modified">!   /*    variation selector cmap, or -1 if it is not a variation.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function is only meaningful if the font has a variation       */</span>
<span class="line-modified">!   /*    selector cmap subtable.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.6                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Int )
    FT_Face_GetCharVariantIsDefault( FT_Face   face,
                                     FT_ULong  charcode,
                                     FT_ULong  variantSelector );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_GetVariantSelectors                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return a zero-terminated list of Unicode variation selectors found */</span>
<span class="line-modified">!   /*    in the font.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face ::                                                            */</span>
<span class="line-modified">!   /*      A handle to the source face object.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    A pointer to an array of selector code points, or NULL if there is */</span>
<span class="line-modified">!   /*    no valid variation selector cmap subtable.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The last item in the array is~0; the array is owned by the         */</span>
<span class="line-modified">!   /*    @FT_Face object but can be overwritten or released on the next     */</span>
<span class="line-modified">!   /*    call to a FreeType function.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.6                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_UInt32* )
    FT_Face_GetVariantSelectors( FT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_GetVariantsOfChar                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return a zero-terminated list of Unicode variation selectors found */</span>
<span class="line-modified">!   /*    for the specified character code.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face ::                                                            */</span>
<span class="line-modified">!   /*      A handle to the source face object.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    charcode ::                                                        */</span>
<span class="line-modified">!   /*      The character codepoint in Unicode.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    A pointer to an array of variation selector code points that are   */</span>
<span class="line-modified">!   /*    active for the given character, or NULL if the corresponding list  */</span>
<span class="line-modified">!   /*    is empty.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The last item in the array is~0; the array is owned by the         */</span>
<span class="line-modified">!   /*    @FT_Face object but can be overwritten or released on the next     */</span>
<span class="line-modified">!   /*    call to a FreeType function.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.6                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_UInt32* )
    FT_Face_GetVariantsOfChar( FT_Face   face,
                               FT_ULong  charcode );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_GetCharsOfVariant                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return a zero-terminated list of Unicode character codes found for */</span>
<span class="line-modified">!   /*    the specified variation selector.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face ::                                                            */</span>
<span class="line-modified">!   /*      A handle to the source face object.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    variantSelector ::                                                 */</span>
<span class="line-modified">!   /*      The variation selector code point in Unicode.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    A list of all the code points that are specified by this selector  */</span>
<span class="line-modified">!   /*    (both default and non-default codes are returned) or NULL if there */</span>
<span class="line-modified">!   /*    is no valid cmap or the variation selector is invalid.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The last item in the array is~0; the array is owned by the         */</span>
<span class="line-modified">!   /*    @FT_Face object but can be overwritten or released on the next     */</span>
<span class="line-modified">!   /*    call to a FreeType function.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.6                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_UInt32* )
    FT_Face_GetCharsOfVariant( FT_Face   face,
                               FT_ULong  variantSelector );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    computations                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    Computations                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    Crunching fixed numbers and vectors.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This section contains various functions used to perform            */</span>
<span class="line-modified">!   /*    computations on 16.16 fixed-float numbers or 2d vectors.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_MulDiv                                                          */</span>
<span class="line-modified">!   /*    FT_MulFix                                                          */</span>
<span class="line-modified">!   /*    FT_DivFix                                                          */</span>
<span class="line-modified">!   /*    FT_RoundFix                                                        */</span>
<span class="line-modified">!   /*    FT_CeilFix                                                         */</span>
<span class="line-modified">!   /*    FT_FloorFix                                                        */</span>
<span class="line-modified">!   /*    FT_Vector_Transform                                                */</span>
<span class="line-modified">!   /*    FT_Matrix_Multiply                                                 */</span>
<span class="line-modified">!   /*    FT_Matrix_Invert                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_MulDiv                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Compute `(a*b)/c&#39; with maximum accuracy, using a 64-bit            */</span>
<span class="line-modified">!   /*    intermediate integer whenever necessary.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This function isn&#39;t necessarily as fast as some processor specific */</span>
<span class="line-modified">!   /*    operations, but is at least completely portable.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    a :: The first multiplier.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    b :: The second multiplier.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    c :: The divisor.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The result of `(a*b)/c&#39;.  This function never traps when trying to */</span>
<span class="line-modified">!   /*    divide by zero; it simply returns `MaxInt&#39; or `MinInt&#39; depending   */</span>
<span class="line-modified">!   /*    on the signs of `a&#39; and `b&#39;.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Long )
    FT_MulDiv( FT_Long  a,
               FT_Long  b,
               FT_Long  c );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_MulFix                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Compute `(a*b)/0x10000&#39; with maximum accuracy.  Its main use is to */</span>
<span class="line-modified">!   /*    multiply a given value by a 16.16 fixed-point factor.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    a :: The first multiplier.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    b :: The second multiplier.  Use a 16.16 factor here whenever      */</span>
<span class="line-modified">!   /*         possible (see note below).                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The result of `(a*b)/0x10000&#39;.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function has been optimized for the case where the absolute   */</span>
<span class="line-modified">!   /*    value of `a&#39; is less than 2048, and `b&#39; is a 16.16 scaling factor. */</span>
<span class="line-modified">!   /*    As this happens mainly when scaling from notional units to         */</span>
<span class="line-modified">!   /*    fractional pixels in FreeType, it resulted in noticeable speed     */</span>
<span class="line-modified">!   /*    improvements between versions 2.x and 1.x.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    As a conclusion, always try to place a 16.16 factor as the         */</span>
<span class="line-modified">!   /*    _second_ argument of this function; this can make a great          */</span>
<span class="line-modified">!   /*    difference.                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Long )
    FT_MulFix( FT_Long  a,
               FT_Long  b );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_DivFix                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Compute `(a*0x10000)/b&#39; with maximum accuracy.  Its main use is to */</span>
<span class="line-modified">!   /*    divide a given value by a 16.16 fixed-point factor.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    a :: The numerator.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    b :: The denominator.  Use a 16.16 factor here.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    The result of `(a*0x10000)/b&#39;.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Long )
    FT_DivFix( FT_Long  a,
               FT_Long  b );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_RoundFix                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Round a 16.16 fixed number.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    a :: The number to be rounded.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    `a&#39; rounded to the nearest 16.16 fixed integer, halfway cases away */</span>
<span class="line-modified">!   /*    from zero.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The function uses wrap-around arithmetic.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Fixed )
    FT_RoundFix( FT_Fixed  a );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_CeilFix                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Compute the smallest following integer of a 16.16 fixed number.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    a :: The number for which the ceiling function is to be computed.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    `a&#39; rounded towards plus infinity.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The function uses wrap-around arithmetic.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Fixed )
    FT_CeilFix( FT_Fixed  a );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_FloorFix                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Compute the largest previous integer of a 16.16 fixed number.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    a :: The number for which the floor function is to be computed.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    `a&#39; rounded towards minus infinity.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Fixed )
    FT_FloorFix( FT_Fixed  a );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Vector_Transform                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Transform a single vector through a 2x2 matrix.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">!   /*    vector :: The target vector to transform.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    matrix :: A pointer to the source 2x2 matrix.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The result is undefined if either `vector&#39; or `matrix&#39; is invalid. */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( void )
<span class="line-modified">!   FT_Vector_Transform( FT_Vector*        vec,</span>
                         const FT_Matrix*  matrix );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    version                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    FreeType Version                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    Functions and macros related to FreeType versions.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Note that those functions and macros are of limited use because    */</span>
<span class="line-modified">!   /*    even a new release of FreeType with only documentation changes     */</span>
<span class="line-modified">!   /*    increases the version number.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_Library_Version                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FREETYPE_MAJOR                                                     */</span>
<span class="line-modified">!   /*    FREETYPE_MINOR                                                     */</span>
<span class="line-modified">!   /*    FREETYPE_PATCH                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Face_CheckTrueTypePatents                                       */</span>
<span class="line-modified">!   /*    FT_Face_SetUnpatentedHinting                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FREETYPE_XXX                                                       */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*************************************************************************/</span>
  
  
<span class="line-modified">!   /*************************************************************************</span>
     *
     * @enum:
     *   FREETYPE_XXX
     *
     * @description:
<span class="line-modified">!    *   These three macros identify the FreeType source code version.</span>
<span class="line-modified">!    *   Use @FT_Library_Version to access them at runtime.</span>
     *
     * @values:
<span class="line-modified">!    *   FREETYPE_MAJOR :: The major version number.</span>
<span class="line-modified">!    *   FREETYPE_MINOR :: The minor version number.</span>
<span class="line-modified">!    *   FREETYPE_PATCH :: The patch level.</span>
     *
     * @note:
<span class="line-modified">!    *   The version number of FreeType if built as a dynamic link library</span>
<span class="line-modified">!    *   with the `libtool&#39; package is _not_ controlled by these three</span>
<span class="line-removed">-    *   macros.</span>
     *
     */
  #define FREETYPE_MAJOR  2
<span class="line-modified">! #define FREETYPE_MINOR  9</span>
  #define FREETYPE_PATCH  1
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Library_Version                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Return the version of the FreeType library being used.  This is    */</span>
<span class="line-modified">!   /*    useful when dynamically linking to the library, since one cannot   */</span>
<span class="line-modified">!   /*    use the macros @FREETYPE_MAJOR, @FREETYPE_MINOR, and               */</span>
<span class="line-modified">!   /*    @FREETYPE_PATCH.                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    library :: A source library handle.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    amajor  :: The major version number.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    aminor  :: The minor version number.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    apatch  :: The patch version number.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The reason why this function takes a `library&#39; argument is because */</span>
<span class="line-modified">!   /*    certain programs implement library initialization in a custom way  */</span>
<span class="line-modified">!   /*    that doesn&#39;t use @FT_Init_FreeType.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    In such cases, the library version might not be available before   */</span>
<span class="line-modified">!   /*    the library object has been created.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( void )
    FT_Library_Version( FT_Library   library,
                        FT_Int      *amajor,
                        FT_Int      *aminor,
                        FT_Int      *apatch );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_CheckTrueTypePatents                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Deprecated, does nothing.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face :: A face handle.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Always returns false.                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Since May 2010, TrueType hinting is no longer patented.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.5                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Bool )
    FT_Face_CheckTrueTypePatents( FT_Face  face );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Face_SetUnpatentedHinting                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Deprecated, does nothing.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face  :: A face handle.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    value :: New boolean setting.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Always returns false.                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Since May 2010, TrueType hinting is no longer patented.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">!   /*    2.3.5                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_EXPORT( FT_Bool )
    FT_Face_SetUnpatentedHinting( FT_Face  face,
                                  FT_Bool  value );
  
    /* */
<span class="line-new-header">--- 3972,908 ---</span>
  #define FT_SUBGLYPH_FLAG_XY_SCALE             0x40
  #define FT_SUBGLYPH_FLAG_2X2                  0x80
  #define FT_SUBGLYPH_FLAG_USE_MY_METRICS      0x200
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @function:</span>
<span class="line-added">+    *   FT_Get_SubGlyph_Info</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @description:</span>
<span class="line-added">+    *   Retrieve a description of a given subglyph.  Only use it if</span>
<span class="line-added">+    *   `glyph-&gt;format` is @FT_GLYPH_FORMAT_COMPOSITE; an error is returned</span>
<span class="line-added">+    *   otherwise.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @input:</span>
<span class="line-added">+    *   glyph ::</span>
<span class="line-added">+    *     The source glyph slot.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   sub_index ::</span>
<span class="line-added">+    *     The index of the subglyph.  Must be less than</span>
<span class="line-added">+    *     `glyph-&gt;num_subglyphs`.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @output:</span>
<span class="line-added">+    *   p_index ::</span>
<span class="line-added">+    *     The glyph index of the subglyph.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   p_flags ::</span>
<span class="line-added">+    *     The subglyph flags, see @FT_SUBGLYPH_FLAG_XXX.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   p_arg1 ::</span>
<span class="line-added">+    *     The subglyph&#39;s first argument (if any).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   p_arg2 ::</span>
<span class="line-added">+    *     The subglyph&#39;s second argument (if any).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   p_transform ::</span>
<span class="line-added">+    *     The subglyph transformation (if any).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   FreeType error code.  0~means success.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @note:</span>
<span class="line-added">+    *   The values of `*p_arg1`, `*p_arg2`, and `*p_transform` must be</span>
<span class="line-added">+    *   interpreted depending on the flags returned in `*p_flags`.  See the</span>
<span class="line-added">+    *   OpenType specification for details.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     https://docs.microsoft.com/en-us/typography/opentype/spec/glyf#composite-glyph-description</span>
<span class="line-added">+    *</span>
<span class="line-added">+    */</span>
<span class="line-added">+   FT_EXPORT( FT_Error )</span>
<span class="line-added">+   FT_Get_SubGlyph_Info( FT_GlyphSlot  glyph,</span>
<span class="line-added">+                         FT_UInt       sub_index,</span>
<span class="line-added">+                         FT_Int       *p_index,</span>
<span class="line-added">+                         FT_UInt      *p_flags,</span>
<span class="line-added">+                         FT_Int       *p_arg1,</span>
<span class="line-added">+                         FT_Int       *p_arg2,</span>
<span class="line-added">+                         FT_Matrix    *p_transform );</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @section:</span>
<span class="line-added">+    *   layer_management</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @title:</span>
<span class="line-added">+    *   Glyph Layer Management</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @abstract:</span>
<span class="line-added">+    *   Retrieving and manipulating OpenType&#39;s &#39;COLR&#39; table data.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @description:</span>
<span class="line-added">+    *   The functions described here allow access of colored glyph layer data</span>
<span class="line-added">+    *   in OpenType&#39;s &#39;COLR&#39; tables.</span>
<span class="line-added">+    */</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @struct:</span>
<span class="line-added">+    *   FT_LayerIterator</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @description:</span>
<span class="line-added">+    *   This iterator object is needed for @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @fields:</span>
<span class="line-added">+    *   num_layers ::</span>
<span class="line-added">+    *     The number of glyph layers for the requested glyph index.  Will be</span>
<span class="line-added">+    *     set by @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   layer ::</span>
<span class="line-added">+    *     The current layer.  Will be set by @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   p ::</span>
<span class="line-added">+    *     An opaque pointer into &#39;COLR&#39; table data.  The caller must set this</span>
<span class="line-added">+    *     to `NULL` before the first call of @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">+    */</span>
<span class="line-added">+   typedef struct  FT_LayerIterator_</span>
<span class="line-added">+   {</span>
<span class="line-added">+     FT_UInt   num_layers;</span>
<span class="line-added">+     FT_UInt   layer;</span>
<span class="line-added">+     FT_Byte*  p;</span>
<span class="line-added">+ </span>
<span class="line-added">+   } FT_LayerIterator;</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /**************************************************************************</span>
     *
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_Color_Glyph_Layer</span>
     *
     * @description:
<span class="line-modified">!    *   This is an interface to the &#39;COLR&#39; table in OpenType fonts to</span>
<span class="line-modified">!    *   iteratively retrieve the colored glyph layers associated with the</span>
<span class="line-modified">!    *   current glyph slot.</span>
     *
<span class="line-modified">!    *     https://docs.microsoft.com/en-us/typography/opentype/spec/colr</span>
     *
<span class="line-modified">!    *   The glyph layer data for a given glyph index, if present, provides an</span>
<span class="line-modified">!    *   alternative, multi-colour glyph representation: Instead of rendering</span>
<span class="line-modified">!    *   the outline or bitmap with the given glyph index, glyphs with the</span>
<span class="line-added">+    *   indices and colors returned by this function are rendered layer by</span>
<span class="line-added">+    *   layer.</span>
     *
<span class="line-modified">!    *   The returned elements are ordered in the z~direction from bottom to</span>
<span class="line-modified">!    *   top; the &#39;n&#39;th element should be rendered with the associated palette</span>
<span class="line-modified">!    *   color and blended on top of the already rendered layers (elements 0,</span>
<span class="line-added">+    *   1, ..., n-1).</span>
     *
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-added">+    *     A handle to the parent face object.</span>
     *
<span class="line-modified">!    *   base_glyph ::</span>
<span class="line-modified">!    *     The glyph index the colored glyph layers are associated with.</span>
     *
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   iterator ::</span>
<span class="line-added">+    *     An @FT_LayerIterator object.  For the first call you should set</span>
<span class="line-added">+    *     `iterator-&gt;p` to `NULL`.  For all following calls, simply use the</span>
<span class="line-added">+    *     same object again.</span>
     *
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   aglyph_index ::</span>
<span class="line-added">+    *     The glyph index of the current layer.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   acolor_index ::</span>
<span class="line-added">+    *     The color index into the font face&#39;s color palette of the current</span>
<span class="line-added">+    *     layer.  The value 0xFFFF is special; it doesn&#39;t reference a palette</span>
<span class="line-added">+    *     entry but indicates that the text foreground color should be used</span>
<span class="line-added">+    *     instead (to be set up by the application outside of FreeType).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     The color palette can be retrieved with @FT_Palette_Select.</span>
     *
     * @return:
<span class="line-modified">!    *   Value~1 if everything is OK.  If there are no more layers (or if there</span>
<span class="line-added">+    *   are no layers at all), value~0 gets returned.  In case of an error,</span>
<span class="line-added">+    *   value~0 is returned also.</span>
     *
     * @note:
<span class="line-modified">!    *   This function is necessary if you want to handle glyph layers by</span>
<span class="line-modified">!    *   yourself.  In particular, functions that operate with @FT_GlyphRec</span>
<span class="line-modified">!    *   objects (like @FT_Get_Glyph or @FT_Glyph_To_Bitmap) don&#39;t have access</span>
<span class="line-added">+    *   to this information.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   Note that @FT_Render_Glyph is able to handle colored glyph layers</span>
<span class="line-added">+    *   automatically if the @FT_LOAD_COLOR flag is passed to a previous call</span>
<span class="line-added">+    *   to @FT_Load_Glyph.  [This is an experimental feature.]</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @example:</span>
<span class="line-added">+    *   ```</span>
<span class="line-added">+    *     FT_Color*         palette;</span>
<span class="line-added">+    *     FT_LayerIterator  iterator;</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     FT_Bool  have_layers;</span>
<span class="line-added">+    *     FT_UInt  layer_glyph_index;</span>
<span class="line-added">+    *     FT_UInt  layer_color_index;</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     error = FT_Palette_Select( face, palette_index, &amp;palette );</span>
<span class="line-added">+    *     if ( error )</span>
<span class="line-added">+    *       palette = NULL;</span>
     *
<span class="line-added">+    *     iterator.p  = NULL;</span>
<span class="line-added">+    *     have_layers = FT_Get_Color_Glyph_Layer( face,</span>
<span class="line-added">+    *                                             glyph_index,</span>
<span class="line-added">+    *                                             &amp;layer_glyph_index,</span>
<span class="line-added">+    *                                             &amp;layer_color_index,</span>
<span class="line-added">+    *                                             &amp;iterator );</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *     if ( palette &amp;&amp; have_layers )</span>
<span class="line-added">+    *     {</span>
<span class="line-added">+    *       do</span>
<span class="line-added">+    *       {</span>
<span class="line-added">+    *         FT_Color  layer_color;</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *         if ( layer_color_index == 0xFFFF )</span>
<span class="line-added">+    *           layer_color = text_foreground_color;</span>
<span class="line-added">+    *         else</span>
<span class="line-added">+    *           layer_color = palette[layer_color_index];</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *         // Load and render glyph `layer_glyph_index&#39;, then</span>
<span class="line-added">+    *         // blend resulting pixmap (using color `layer_color&#39;)</span>
<span class="line-added">+    *         // with previously created pixmaps.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *       } while ( FT_Get_Color_Glyph_Layer( face,</span>
<span class="line-added">+    *                                           glyph_index,</span>
<span class="line-added">+    *                                           &amp;layer_glyph_index,</span>
<span class="line-added">+    *                                           &amp;layer_color_index,</span>
<span class="line-added">+    *                                           &amp;iterator ) );</span>
<span class="line-added">+    *     }</span>
<span class="line-added">+    *   ```</span>
     */
<span class="line-modified">!   FT_EXPORT( FT_Bool )</span>
<span class="line-modified">!   FT_Get_Color_Glyph_Layer( FT_Face            face,</span>
<span class="line-modified">!                             FT_UInt            base_glyph,</span>
<span class="line-modified">!                             FT_UInt           *aglyph_index,</span>
<span class="line-modified">!                             FT_UInt           *acolor_index,</span>
<span class="line-modified">!                             FT_LayerIterator*  iterator );</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   base_interface</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_FSTYPE_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A list of bit flags used in the `fsType` field of the OS/2 table in a</span>
<span class="line-modified">!    *   TrueType or OpenType font and the `FSType` entry in a PostScript font.</span>
<span class="line-modified">!    *   These bit flags are returned by @FT_Get_FSType_Flags; they inform</span>
<span class="line-modified">!    *   client applications of embedding and subsetting restrictions</span>
<span class="line-modified">!    *   associated with a font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   See</span>
<span class="line-modified">!    *   https://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/FontPolicies.pdf</span>
<span class="line-modified">!    *   for more details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_FSTYPE_INSTALLABLE_EMBEDDING ::</span>
<span class="line-modified">!    *     Fonts with no fsType bit set may be embedded and permanently</span>
<span class="line-modified">!    *     installed on the remote system by an application.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING ::</span>
<span class="line-modified">!    *     Fonts that have only this bit set must not be modified, embedded or</span>
<span class="line-modified">!    *     exchanged in any manner without first obtaining permission of the</span>
<span class="line-modified">!    *     font software copyright owner.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING ::</span>
<span class="line-modified">!    *     The font may be embedded and temporarily loaded on the remote</span>
<span class="line-modified">!    *     system.  Documents containing Preview &amp; Print fonts must be opened</span>
<span class="line-modified">!    *     &#39;read-only&#39;; no edits can be applied to the document.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FSTYPE_EDITABLE_EMBEDDING ::</span>
<span class="line-modified">!    *     The font may be embedded but must only be installed temporarily on</span>
<span class="line-modified">!    *     other systems.  In contrast to Preview &amp; Print fonts, documents</span>
<span class="line-modified">!    *     containing editable fonts may be opened for reading, editing is</span>
<span class="line-modified">!    *     permitted, and changes may be saved.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FSTYPE_NO_SUBSETTING ::</span>
<span class="line-modified">!    *     The font may not be subsetted prior to embedding.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_FSTYPE_BITMAP_EMBEDDING_ONLY ::</span>
<span class="line-modified">!    *     Only bitmaps contained in the font may be embedded; no outline data</span>
<span class="line-modified">!    *     may be embedded.  If there are no bitmaps available in the font,</span>
<span class="line-modified">!    *     then the font is unembeddable.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-added">+    *   The flags are ORed together, thus more than a single value can be</span>
<span class="line-added">+    *   returned.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   While the `fsType` flags can indicate that a font may be embedded, a</span>
<span class="line-added">+    *   license with the font vendor may be separately required to use the</span>
<span class="line-added">+    *   font in this way.</span>
<span class="line-added">+    */</span>
  #define FT_FSTYPE_INSTALLABLE_EMBEDDING         0x0000
  #define FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING  0x0002
  #define FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING   0x0004
  #define FT_FSTYPE_EDITABLE_EMBEDDING            0x0008
  #define FT_FSTYPE_NO_SUBSETTING                 0x0100
  #define FT_FSTYPE_BITMAP_EMBEDDING_ONLY         0x0200
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Get_FSType_Flags</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the `fsType` flags for a font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The `fsType` flags, see @FT_FSTYPE_XXX.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Use this function rather than directly reading the `fs_type` field in</span>
<span class="line-modified">!    *   the @PS_FontInfoRec structure, which is only guaranteed to return the</span>
<span class="line-modified">!    *   correct results for Type~1 fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.8</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_UShort )
    FT_Get_FSType_Flags( FT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   glyph_variants</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   Unicode Variation Sequences</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   The FreeType~2 interface to Unicode Variation Sequences (UVS), using</span>
<span class="line-modified">!    *   the SFNT cmap format~14.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Many characters, especially for CJK scripts, have variant forms.  They</span>
<span class="line-modified">!    *   are a sort of grey area somewhere between being totally irrelevant and</span>
<span class="line-modified">!    *   semantically distinct; for this reason, the Unicode consortium decided</span>
<span class="line-modified">!    *   to introduce Variation Sequences (VS), consisting of a Unicode base</span>
<span class="line-modified">!    *   character and a variation selector instead of further extending the</span>
<span class="line-modified">!    *   already huge number of characters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Unicode maintains two different sets, namely &#39;Standardized Variation</span>
<span class="line-modified">!    *   Sequences&#39; and registered &#39;Ideographic Variation Sequences&#39; (IVS),</span>
<span class="line-modified">!    *   collected in the &#39;Ideographic Variation Database&#39; (IVD).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     https://unicode.org/Public/UCD/latest/ucd/StandardizedVariants.txt</span>
<span class="line-modified">!    *     https://unicode.org/reports/tr37/ https://unicode.org/ivd/</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   To date (January 2017), the character with the most ideographic</span>
<span class="line-modified">!    *   variations is U+9089, having 32 such IVS.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Three Mongolian Variation Selectors have the values U+180B-U+180D; 256</span>
<span class="line-modified">!    *   generic Variation Selectors are encoded in the ranges U+FE00-U+FE0F</span>
<span class="line-modified">!    *   and U+E0100-U+E01EF.  IVS currently use Variation Selectors from the</span>
<span class="line-modified">!    *   range U+E0100-U+E01EF only.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A VS consists of the base character value followed by a single</span>
<span class="line-modified">!    *   Variation Selector.  For example, to get the first variation of</span>
<span class="line-modified">!    *   U+9089, you have to write the character sequence `U+9089 U+E0100`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Adobe and MS decided to support both standardized and ideographic VS</span>
<span class="line-modified">!    *   with a new cmap subtable (format~14).  It is an odd subtable because</span>
<span class="line-modified">!    *   it is not a mapping of input code points to glyphs, but contains lists</span>
<span class="line-modified">!    *   of all variations supported by the font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A variation may be either &#39;default&#39; or &#39;non-default&#39; for a given font.</span>
<span class="line-modified">!    *   A default variation is the one you will get for that code point if you</span>
<span class="line-modified">!    *   look it up in the standard Unicode cmap.  A non-default variation is a</span>
<span class="line-modified">!    *   different glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_GetCharVariantIndex</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the glyph index of a given character code as modified by the</span>
<span class="line-modified">!    *   variation selector.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   charcode ::</span>
<span class="line-modified">!    *     The character code point in Unicode.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   variantSelector ::</span>
<span class="line-modified">!    *     The Unicode code point of the variation selector.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The glyph index.  0~means either &#39;undefined character code&#39;, or</span>
<span class="line-modified">!    *   &#39;undefined selector code&#39;, or &#39;no variation selector cmap subtable&#39;,</span>
<span class="line-modified">!    *   or &#39;current CharMap is not Unicode&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   If you use FreeType to manipulate the contents of font files directly,</span>
<span class="line-modified">!    *   be aware that the glyph index returned by this function doesn&#39;t always</span>
<span class="line-modified">!    *   correspond to the internal indices used within the file.  This is done</span>
<span class="line-modified">!    *   to ensure that value~0 always corresponds to the &#39;missing glyph&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This function is only meaningful if</span>
<span class="line-modified">!    *     a) the font has a variation selector cmap sub table, and</span>
<span class="line-modified">!    *     b) the current charmap has a Unicode encoding.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.6</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_UInt )
    FT_Face_GetCharVariantIndex( FT_Face   face,
                                 FT_ULong  charcode,
                                 FT_ULong  variantSelector );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_GetCharVariantIsDefault</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Check whether this variation of this Unicode character is the one to</span>
<span class="line-modified">!    *   be found in the charmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   charcode ::</span>
<span class="line-modified">!    *     The character codepoint in Unicode.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   variantSelector ::</span>
<span class="line-modified">!    *     The Unicode codepoint of the variation selector.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   1~if found in the standard (Unicode) cmap, 0~if found in the variation</span>
<span class="line-modified">!    *   selector cmap, or -1 if it is not a variation.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function is only meaningful if the font has a variation selector</span>
<span class="line-modified">!    *   cmap subtable.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.6</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_Int )
    FT_Face_GetCharVariantIsDefault( FT_Face   face,
                                     FT_ULong  charcode,
                                     FT_ULong  variantSelector );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_GetVariantSelectors</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return a zero-terminated list of Unicode variation selectors found in</span>
<span class="line-modified">!    *   the font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   A pointer to an array of selector code points, or `NULL` if there is</span>
<span class="line-modified">!    *   no valid variation selector cmap subtable.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The last item in the array is~0; the array is owned by the @FT_Face</span>
<span class="line-modified">!    *   object but can be overwritten or released on the next call to a</span>
<span class="line-modified">!    *   FreeType function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.6</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_UInt32* )
    FT_Face_GetVariantSelectors( FT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_GetVariantsOfChar</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return a zero-terminated list of Unicode variation selectors found for</span>
<span class="line-modified">!    *   the specified character code.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   charcode ::</span>
<span class="line-modified">!    *     The character codepoint in Unicode.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   A pointer to an array of variation selector code points that are</span>
<span class="line-modified">!    *   active for the given character, or `NULL` if the corresponding list is</span>
<span class="line-modified">!    *   empty.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The last item in the array is~0; the array is owned by the @FT_Face</span>
<span class="line-modified">!    *   object but can be overwritten or released on the next call to a</span>
<span class="line-modified">!    *   FreeType function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.6</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_UInt32* )
    FT_Face_GetVariantsOfChar( FT_Face   face,
                               FT_ULong  charcode );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_GetCharsOfVariant</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return a zero-terminated list of Unicode character codes found for the</span>
<span class="line-modified">!    *   specified variation selector.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the source face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   variantSelector ::</span>
<span class="line-modified">!    *     The variation selector code point in Unicode.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   A list of all the code points that are specified by this selector</span>
<span class="line-modified">!    *   (both default and non-default codes are returned) or `NULL` if there</span>
<span class="line-modified">!    *   is no valid cmap or the variation selector is invalid.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The last item in the array is~0; the array is owned by the @FT_Face</span>
<span class="line-modified">!    *   object but can be overwritten or released on the next call to a</span>
<span class="line-modified">!    *   FreeType function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.6</span>
<span class="line-modified">!    */</span>
    FT_EXPORT( FT_UInt32* )
    FT_Face_GetCharsOfVariant( FT_Face   face,
                               FT_ULong  variantSelector );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   computations</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   Computations</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   Crunching fixed numbers and vectors.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This section contains various functions used to perform computations</span>
<span class="line-modified">!    *   on 16.16 fixed-float numbers or 2d vectors.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   **Attention**: Most arithmetic functions take `FT_Long` as arguments.</span>
<span class="line-modified">!    *   For historical reasons, FreeType was designed under the assumption</span>
<span class="line-modified">!    *   that `FT_Long` is a 32-bit integer; results can thus be undefined if</span>
<span class="line-modified">!    *   the arguments don&#39;t fit into 32 bits.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @order:</span>
<span class="line-modified">!    *   FT_MulDiv</span>
<span class="line-modified">!    *   FT_MulFix</span>
<span class="line-modified">!    *   FT_DivFix</span>
<span class="line-modified">!    *   FT_RoundFix</span>
<span class="line-modified">!    *   FT_CeilFix</span>
<span class="line-modified">!    *   FT_FloorFix</span>
<span class="line-added">+    *   FT_Vector_Transform</span>
<span class="line-added">+    *   FT_Matrix_Multiply</span>
<span class="line-added">+    *   FT_Matrix_Invert</span>
<span class="line-added">+    *</span>
<span class="line-added">+    */</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_MulDiv</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Compute `(a*b)/c` with maximum accuracy, using a 64-bit intermediate</span>
<span class="line-modified">!    *   integer whenever necessary.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This function isn&#39;t necessarily as fast as some processor-specific</span>
<span class="line-modified">!    *   operations, but is at least completely portable.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   a ::</span>
<span class="line-modified">!    *     The first multiplier.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   b ::</span>
<span class="line-modified">!    *     The second multiplier.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   c ::</span>
<span class="line-modified">!    *     The divisor.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The result of `(a*b)/c`.  This function never traps when trying to</span>
<span class="line-added">+    *   divide by zero; it simply returns &#39;MaxInt&#39; or &#39;MinInt&#39; depending on</span>
<span class="line-added">+    *   the signs of `a` and `b`.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Long )
    FT_MulDiv( FT_Long  a,
               FT_Long  b,
               FT_Long  c );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_MulFix</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Compute `(a*b)/0x10000` with maximum accuracy.  Its main use is to</span>
<span class="line-modified">!    *   multiply a given value by a 16.16 fixed-point factor.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   a ::</span>
<span class="line-modified">!    *     The first multiplier.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   b ::</span>
<span class="line-modified">!    *     The second multiplier.  Use a 16.16 factor here whenever possible</span>
<span class="line-modified">!    *     (see note below).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   The result of `(a*b)/0x10000`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function has been optimized for the case where the absolute value</span>
<span class="line-modified">!    *   of `a` is less than 2048, and `b` is a 16.16 scaling factor.  As this</span>
<span class="line-modified">!    *   happens mainly when scaling from notional units to fractional pixels</span>
<span class="line-modified">!    *   in FreeType, it resulted in noticeable speed improvements between</span>
<span class="line-modified">!    *   versions 2.x and 1.x.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   As a conclusion, always try to place a 16.16 factor as the _second_</span>
<span class="line-modified">!    *   argument of this function; this can make a great difference.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Long )
    FT_MulFix( FT_Long  a,
               FT_Long  b );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_DivFix</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Compute `(a*0x10000)/b` with maximum accuracy.  Its main use is to</span>
<span class="line-modified">!    *   divide a given value by a 16.16 fixed-point factor.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   a ::</span>
<span class="line-modified">!    *     The numerator.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   b ::</span>
<span class="line-modified">!    *     The denominator.  Use a 16.16 factor here.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   The result of `(a*0x10000)/b`.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Long )
    FT_DivFix( FT_Long  a,
               FT_Long  b );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_RoundFix</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Round a 16.16 fixed number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   a ::</span>
<span class="line-modified">!    *     The number to be rounded.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   `a` rounded to the nearest 16.16 fixed integer, halfway cases away</span>
<span class="line-modified">!    *   from zero.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The function uses wrap-around arithmetic.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Fixed )
    FT_RoundFix( FT_Fixed  a );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_CeilFix</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Compute the smallest following integer of a 16.16 fixed number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   a ::</span>
<span class="line-modified">!    *     The number for which the ceiling function is to be computed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   `a` rounded towards plus infinity.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The function uses wrap-around arithmetic.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Fixed )
    FT_CeilFix( FT_Fixed  a );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_FloorFix</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Compute the largest previous integer of a 16.16 fixed number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   a ::</span>
<span class="line-modified">!    *     The number for which the floor function is to be computed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   `a` rounded towards minus infinity.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Fixed )
    FT_FloorFix( FT_Fixed  a );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Vector_Transform</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Transform a single vector through a 2x2 matrix.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @inout:</span>
<span class="line-modified">!    *   vector ::</span>
<span class="line-modified">!    *     The target vector to transform.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   matrix ::</span>
<span class="line-modified">!    *     A pointer to the source 2x2 matrix.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-added">+    *   The result is undefined if either `vector` or `matrix` is invalid.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( void )
<span class="line-modified">!   FT_Vector_Transform( FT_Vector*        vector,</span>
                         const FT_Matrix*  matrix );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   version</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   FreeType Version</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   Functions and macros related to FreeType versions.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Note that those functions and macros are of limited use because even a</span>
<span class="line-modified">!    *   new release of FreeType with only documentation changes increases the</span>
<span class="line-modified">!    *   version number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @order:</span>
<span class="line-modified">!    *   FT_Library_Version</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FREETYPE_MAJOR</span>
<span class="line-modified">!    *   FREETYPE_MINOR</span>
<span class="line-modified">!    *   FREETYPE_PATCH</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Face_CheckTrueTypePatents</span>
<span class="line-modified">!    *   FT_Face_SetUnpatentedHinting</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
     *
     * @enum:
     *   FREETYPE_XXX
     *
     * @description:
<span class="line-modified">!    *   These three macros identify the FreeType source code version.  Use</span>
<span class="line-modified">!    *   @FT_Library_Version to access them at runtime.</span>
     *
     * @values:
<span class="line-modified">!    *   FREETYPE_MAJOR ::</span>
<span class="line-modified">!    *     The major version number.</span>
<span class="line-modified">!    *   FREETYPE_MINOR ::</span>
<span class="line-added">+    *     The minor version number.</span>
<span class="line-added">+    *   FREETYPE_PATCH ::</span>
<span class="line-added">+    *     The patch level.</span>
     *
     * @note:
<span class="line-modified">!    *   The version number of FreeType if built as a dynamic link library with</span>
<span class="line-modified">!    *   the &#39;libtool&#39; package is _not_ controlled by these three macros.</span>
     *
     */
  #define FREETYPE_MAJOR  2
<span class="line-modified">! #define FREETYPE_MINOR  10</span>
  #define FREETYPE_PATCH  1
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Library_Version</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Return the version of the FreeType library being used.  This is useful</span>
<span class="line-modified">!    *   when dynamically linking to the library, since one cannot use the</span>
<span class="line-modified">!    *   macros @FREETYPE_MAJOR, @FREETYPE_MINOR, and @FREETYPE_PATCH.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   library ::</span>
<span class="line-modified">!    *     A source library handle.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   amajor ::</span>
<span class="line-modified">!    *     The major version number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   aminor ::</span>
<span class="line-modified">!    *     The minor version number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   apatch ::</span>
<span class="line-modified">!    *     The patch version number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The reason why this function takes a `library` argument is because</span>
<span class="line-modified">!    *   certain programs implement library initialization in a custom way that</span>
<span class="line-modified">!    *   doesn&#39;t use @FT_Init_FreeType.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   In such cases, the library version might not be available before the</span>
<span class="line-added">+    *   library object has been created.</span>
<span class="line-added">+    */</span>
    FT_EXPORT( void )
    FT_Library_Version( FT_Library   library,
                        FT_Int      *amajor,
                        FT_Int      *aminor,
                        FT_Int      *apatch );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_CheckTrueTypePatents</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Deprecated, does nothing.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A face handle.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   Always returns false.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Since May 2010, TrueType hinting is no longer patented.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-modified">!    *   2.3.5</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Bool )
    FT_Face_CheckTrueTypePatents( FT_Face  face );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @function:</span>
<span class="line-modified">!    *   FT_Face_SetUnpatentedHinting</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Deprecated, does nothing.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A face handle.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   value ::</span>
<span class="line-modified">!    *     New boolean setting.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   Always returns false.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Since May 2010, TrueType hinting is no longer patented.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @since:</span>
<span class="line-added">+    *   2.3.5</span>
<span class="line-added">+    */</span>
    FT_EXPORT( FT_Bool )
    FT_Face_SetUnpatentedHinting( FT_Face  face,
                                  FT_Bool  value );
  
    /* */
</pre>
<center><a href="config/ftstdlib.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftadvanc.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>