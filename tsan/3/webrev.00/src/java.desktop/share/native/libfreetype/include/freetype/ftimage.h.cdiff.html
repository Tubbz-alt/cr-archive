<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/include/freetype/ftimage.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftgzip.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftincrem.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/ftimage.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,29 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  ftimage.h                                                              */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    FreeType glyph image formats and default raster interface            */</span>
<span class="line-modified">! /*    (specification).                                                     */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* Note: A `raster&#39; is simply a scan-line converter, used to render      */</span>
<span class="line-modified">!   /*       FT_Outlines into FT_Bitmaps.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
  #ifndef FTIMAGE_H_
  #define FTIMAGE_H_
  
<span class="line-new-header">--- 1,29 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * ftimage.h</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   FreeType glyph image formats and default raster interface</span>
<span class="line-modified">!  *   (specification).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * Note: A &#39;raster&#39; is simply a scan-line converter, used to render</span>
<span class="line-modified">!    *       FT_Outlines into FT_Bitmaps.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
  #ifndef FTIMAGE_H_
  #define FTIMAGE_H_
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 35,150 ***</span>
  
  
  FT_BEGIN_HEADER
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    basic_types                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Pos                                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    The type FT_Pos is used to store vectorial coordinates.  Depending */</span>
<span class="line-modified">!   /*    on the context, these can represent distances in integer font      */</span>
<span class="line-modified">!   /*    units, or 16.16, or 26.6 fixed-point pixel coordinates.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef signed long  FT_Pos;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Vector                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A simple structure used to store a 2D vector; coordinates are of   */</span>
<span class="line-modified">!   /*    the FT_Pos type.                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    x :: The horizontal coordinate.                                    */</span>
<span class="line-modified">!   /*    y :: The vertical coordinate.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Vector_
    {
      FT_Pos  x;
      FT_Pos  y;
  
    } FT_Vector;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_BBox                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used to hold an outline&#39;s bounding box, i.e., the      */</span>
<span class="line-modified">!   /*    coordinates of its extrema in the horizontal and vertical          */</span>
<span class="line-modified">!   /*    directions.                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    xMin :: The horizontal minimum (left-most).                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    yMin :: The vertical minimum (bottom-most).                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    xMax :: The horizontal maximum (right-most).                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    yMax :: The vertical maximum (top-most).                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The bounding box is specified with the coordinates of the lower    */</span>
<span class="line-modified">!   /*    left and the upper right corner.  In PostScript, those values are  */</span>
<span class="line-modified">!   /*    often called (llx,lly) and (urx,ury), respectively.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If `yMin&#39; is negative, this value gives the glyph&#39;s descender.     */</span>
<span class="line-modified">!   /*    Otherwise, the glyph doesn&#39;t descend below the baseline.           */</span>
<span class="line-modified">!   /*    Similarly, if `ymax&#39; is positive, this value gives the glyph&#39;s     */</span>
<span class="line-modified">!   /*    ascender.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    `xMin&#39; gives the horizontal distance from the glyph&#39;s origin to    */</span>
<span class="line-modified">!   /*    the left edge of the glyph&#39;s bounding box.  If `xMin&#39; is negative, */</span>
<span class="line-modified">!   /*    the glyph extends to the left of the origin.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_BBox_
    {
      FT_Pos  xMin, yMin;
      FT_Pos  xMax, yMax;
  
    } FT_BBox;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Pixel_Mode                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An enumeration type used to describe the format of pixels in a     */</span>
<span class="line-modified">!   /*    given bitmap.  Note that additional formats may be added in the    */</span>
<span class="line-modified">!   /*    future.                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_NONE ::                                              */</span>
<span class="line-modified">!   /*      Value~0 is reserved.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_MONO ::                                              */</span>
<span class="line-modified">!   /*      A monochrome bitmap, using 1~bit per pixel.  Note that pixels    */</span>
<span class="line-modified">!   /*      are stored in most-significant order (MSB), which means that     */</span>
<span class="line-modified">!   /*      the left-most pixel in a byte has value 128.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_GRAY ::                                              */</span>
<span class="line-modified">!   /*      An 8-bit bitmap, generally used to represent anti-aliased glyph  */</span>
<span class="line-modified">!   /*      images.  Each pixel is stored in one byte.  Note that the number */</span>
<span class="line-modified">!   /*      of `gray&#39; levels is stored in the `num_grays&#39; field of the       */</span>
<span class="line-modified">!   /*      @FT_Bitmap structure (it generally is 256).                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_GRAY2 ::                                             */</span>
<span class="line-modified">!   /*      A 2-bit per pixel bitmap, used to represent embedded             */</span>
<span class="line-modified">!   /*      anti-aliased bitmaps in font files according to the OpenType     */</span>
<span class="line-modified">!   /*      specification.  We haven&#39;t found a single font using this        */</span>
<span class="line-modified">!   /*      format, however.                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_GRAY4 ::                                             */</span>
<span class="line-modified">!   /*      A 4-bit per pixel bitmap, representing embedded anti-aliased     */</span>
<span class="line-modified">!   /*      bitmaps in font files according to the OpenType specification.   */</span>
<span class="line-modified">!   /*      We haven&#39;t found a single font using this format, however.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_LCD ::                                               */</span>
<span class="line-modified">!   /*      An 8-bit bitmap, representing RGB or BGR decimated glyph images  */</span>
<span class="line-modified">!   /*      used for display on LCD displays; the bitmap is three times      */</span>
<span class="line-modified">!   /*      wider than the original glyph image.  See also                   */</span>
<span class="line-modified">!   /*      @FT_RENDER_MODE_LCD.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_LCD_V ::                                             */</span>
<span class="line-modified">!   /*      An 8-bit bitmap, representing RGB or BGR decimated glyph images  */</span>
<span class="line-modified">!   /*      used for display on rotated LCD displays; the bitmap is three    */</span>
<span class="line-modified">!   /*      times taller than the original glyph image.  See also            */</span>
<span class="line-modified">!   /*      @FT_RENDER_MODE_LCD_V.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_PIXEL_MODE_BGRA ::                                              */</span>
<span class="line-modified">!   /*      [Since 2.5] An image with four 8-bit channels per pixel,         */</span>
<span class="line-modified">!   /*      representing a color image (such as emoticons) with alpha        */</span>
<span class="line-modified">!   /*      channel.  For each pixel, the format is BGRA, which means, the   */</span>
<span class="line-modified">!   /*      blue channel comes first in memory.  The color channels are      */</span>
<span class="line-modified">!   /*      pre-multiplied and in the sRGB colorspace.  For example, full    */</span>
<span class="line-removed">-   /*      red at half-translucent opacity will be represented as           */</span>
<span class="line-removed">-   /*      `00,00,80,80&#39;, not `00,00,FF,80&#39;.  See also @FT_LOAD_COLOR.      */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef enum  FT_Pixel_Mode_
    {
      FT_PIXEL_MODE_NONE = 0,
      FT_PIXEL_MODE_MONO,
      FT_PIXEL_MODE_GRAY,
<span class="line-new-header">--- 35,151 ---</span>
  
  
  FT_BEGIN_HEADER
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   basic_types</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Pos</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   The type FT_Pos is used to store vectorial coordinates.  Depending on</span>
<span class="line-modified">!    *   the context, these can represent distances in integer font units, or</span>
<span class="line-modified">!    *   16.16, or 26.6 fixed-point pixel coordinates.</span>
<span class="line-modified">!    */</span>
    typedef signed long  FT_Pos;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Vector</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A simple structure used to store a 2D vector; coordinates are of the</span>
<span class="line-modified">!    *   FT_Pos type.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   x ::</span>
<span class="line-modified">!    *     The horizontal coordinate.</span>
<span class="line-modified">!    *   y ::</span>
<span class="line-added">+    *     The vertical coordinate.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Vector_
    {
      FT_Pos  x;
      FT_Pos  y;
  
    } FT_Vector;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_BBox</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used to hold an outline&#39;s bounding box, i.e., the</span>
<span class="line-modified">!    *   coordinates of its extrema in the horizontal and vertical directions.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   xMin ::</span>
<span class="line-modified">!    *     The horizontal minimum (left-most).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   yMin ::</span>
<span class="line-modified">!    *     The vertical minimum (bottom-most).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   xMax ::</span>
<span class="line-modified">!    *     The horizontal maximum (right-most).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   yMax ::</span>
<span class="line-modified">!    *     The vertical maximum (top-most).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The bounding box is specified with the coordinates of the lower left</span>
<span class="line-modified">!    *   and the upper right corner.  In PostScript, those values are often</span>
<span class="line-modified">!    *   called (llx,lly) and (urx,ury), respectively.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   If `yMin` is negative, this value gives the glyph&#39;s descender.</span>
<span class="line-modified">!    *   Otherwise, the glyph doesn&#39;t descend below the baseline.  Similarly,</span>
<span class="line-modified">!    *   if `ymax` is positive, this value gives the glyph&#39;s ascender.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   `xMin` gives the horizontal distance from the glyph&#39;s origin to the</span>
<span class="line-modified">!    *   left edge of the glyph&#39;s bounding box.  If `xMin` is negative, the</span>
<span class="line-added">+    *   glyph extends to the left of the origin.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_BBox_
    {
      FT_Pos  xMin, yMin;
      FT_Pos  xMax, yMax;
  
    } FT_BBox;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_Pixel_Mode</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An enumeration type used to describe the format of pixels in a given</span>
<span class="line-modified">!    *   bitmap.  Note that additional formats may be added in the future.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_NONE ::</span>
<span class="line-modified">!    *     Value~0 is reserved.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_MONO ::</span>
<span class="line-modified">!    *     A monochrome bitmap, using 1~bit per pixel.  Note that pixels are</span>
<span class="line-modified">!    *     stored in most-significant order (MSB), which means that the</span>
<span class="line-modified">!    *     left-most pixel in a byte has value 128.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_GRAY ::</span>
<span class="line-modified">!    *     An 8-bit bitmap, generally used to represent anti-aliased glyph</span>
<span class="line-modified">!    *     images.  Each pixel is stored in one byte.  Note that the number of</span>
<span class="line-modified">!    *     &#39;gray&#39; levels is stored in the `num_grays` field of the @FT_Bitmap</span>
<span class="line-modified">!    *     structure (it generally is 256).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_GRAY2 ::</span>
<span class="line-modified">!    *     A 2-bit per pixel bitmap, used to represent embedded anti-aliased</span>
<span class="line-modified">!    *     bitmaps in font files according to the OpenType specification.  We</span>
<span class="line-modified">!    *     haven&#39;t found a single font using this format, however.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_GRAY4 ::</span>
<span class="line-modified">!    *     A 4-bit per pixel bitmap, representing embedded anti-aliased bitmaps</span>
<span class="line-modified">!    *     in font files according to the OpenType specification.  We haven&#39;t</span>
<span class="line-modified">!    *     found a single font using this format, however.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_LCD ::</span>
<span class="line-modified">!    *     An 8-bit bitmap, representing RGB or BGR decimated glyph images used</span>
<span class="line-modified">!    *     for display on LCD displays; the bitmap is three times wider than</span>
<span class="line-modified">!    *     the original glyph image.  See also @FT_RENDER_MODE_LCD.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_LCD_V ::</span>
<span class="line-modified">!    *     An 8-bit bitmap, representing RGB or BGR decimated glyph images used</span>
<span class="line-modified">!    *     for display on rotated LCD displays; the bitmap is three times</span>
<span class="line-modified">!    *     taller than the original glyph image.  See also</span>
<span class="line-modified">!    *     @FT_RENDER_MODE_LCD_V.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_PIXEL_MODE_BGRA ::</span>
<span class="line-modified">!    *     [Since 2.5] An image with four 8-bit channels per pixel,</span>
<span class="line-modified">!    *     representing a color image (such as emoticons) with alpha channel.</span>
<span class="line-modified">!    *     For each pixel, the format is BGRA, which means, the blue channel</span>
<span class="line-modified">!    *     comes first in memory.  The color channels are pre-multiplied and in</span>
<span class="line-modified">!    *     the sRGB colorspace.  For example, full red at half-translucent</span>
<span class="line-modified">!    *     opacity will be represented as &#39;00,00,80,80&#39;, not &#39;00,00,FF,80&#39;.</span>
<span class="line-modified">!    *     See also @FT_LOAD_COLOR.</span>
<span class="line-modified">!    */</span>
    typedef enum  FT_Pixel_Mode_
    {
      FT_PIXEL_MODE_NONE = 0,
      FT_PIXEL_MODE_MONO,
      FT_PIXEL_MODE_GRAY,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 191,75 ***</span>
      FT_PIXEL_MODE_MAX      /* do not remove */
  
    } FT_Pixel_Mode;
  
  
<span class="line-modified">!   /* these constants are deprecated; use the corresponding `FT_Pixel_Mode&#39; */</span>
    /* values instead.                                                       */
  #define ft_pixel_mode_none   FT_PIXEL_MODE_NONE
  #define ft_pixel_mode_mono   FT_PIXEL_MODE_MONO
  #define ft_pixel_mode_grays  FT_PIXEL_MODE_GRAY
  #define ft_pixel_mode_pal2   FT_PIXEL_MODE_GRAY2
  #define ft_pixel_mode_pal4   FT_PIXEL_MODE_GRAY4
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Bitmap                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used to describe a bitmap or pixmap to the raster.     */</span>
<span class="line-modified">!   /*    Note that we now manage pixmaps of various depths through the      */</span>
<span class="line-modified">!   /*    `pixel_mode&#39; field.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    rows         :: The number of bitmap rows.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    width        :: The number of pixels in bitmap row.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pitch        :: The pitch&#39;s absolute value is the number of bytes  */</span>
<span class="line-modified">!   /*                    taken by one bitmap row, including padding.        */</span>
<span class="line-modified">!   /*                    However, the pitch is positive when the bitmap has */</span>
<span class="line-modified">!   /*                    a `down&#39; flow, and negative when it has an `up&#39;    */</span>
<span class="line-modified">!   /*                    flow.  In all cases, the pitch is an offset to add */</span>
<span class="line-modified">!   /*                    to a bitmap pointer in order to go down one row.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                    Note that `padding&#39; means the alignment of a       */</span>
<span class="line-modified">!   /*                    bitmap to a byte border, and FreeType functions    */</span>
<span class="line-modified">!   /*                    normally align to the smallest possible integer    */</span>
<span class="line-modified">!   /*                    value.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                    For the B/W rasterizer, `pitch&#39; is always an even  */</span>
<span class="line-modified">!   /*                    number.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                    To change the pitch of a bitmap (say, to make it a */</span>
<span class="line-modified">!   /*                    multiple of 4), use @FT_Bitmap_Convert.            */</span>
<span class="line-modified">!   /*                    Alternatively, you might use callback functions to */</span>
<span class="line-modified">!   /*                    directly render to the application&#39;s surface; see  */</span>
<span class="line-modified">!   /*                    the file `example2.cpp&#39; in the tutorial for a      */</span>
<span class="line-modified">!   /*                    demonstration.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    buffer       :: A typeless pointer to the bitmap buffer.  This     */</span>
<span class="line-modified">!   /*                    value should be aligned on 32-bit boundaries in    */</span>
<span class="line-modified">!   /*                    most cases.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_grays    :: This field is only used with                       */</span>
<span class="line-modified">!   /*                    @FT_PIXEL_MODE_GRAY; it gives the number of gray   */</span>
<span class="line-modified">!   /*                    levels used in the bitmap.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pixel_mode   :: The pixel mode, i.e., how pixel bits are stored.   */</span>
<span class="line-modified">!   /*                    See @FT_Pixel_Mode for possible values.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    palette_mode :: This field is intended for paletted pixel modes;   */</span>
<span class="line-modified">!   /*                    it indicates how the palette is stored.  Not       */</span>
<span class="line-modified">!   /*                    used currently.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    palette      :: A typeless pointer to the bitmap palette; this     */</span>
<span class="line-modified">!   /*                    field is intended for paletted pixel modes.  Not   */</span>
<span class="line-modified">!   /*                    used currently.                                    */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct  FT_Bitmap_
    {
      unsigned int    rows;
      unsigned int    width;
      int             pitch;
<span class="line-new-header">--- 192,74 ---</span>
      FT_PIXEL_MODE_MAX      /* do not remove */
  
    } FT_Pixel_Mode;
  
  
<span class="line-modified">!   /* these constants are deprecated; use the corresponding `FT_Pixel_Mode` */</span>
    /* values instead.                                                       */
  #define ft_pixel_mode_none   FT_PIXEL_MODE_NONE
  #define ft_pixel_mode_mono   FT_PIXEL_MODE_MONO
  #define ft_pixel_mode_grays  FT_PIXEL_MODE_GRAY
  #define ft_pixel_mode_pal2   FT_PIXEL_MODE_GRAY2
  #define ft_pixel_mode_pal4   FT_PIXEL_MODE_GRAY4
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Bitmap</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used to describe a bitmap or pixmap to the raster.  Note</span>
<span class="line-modified">!    *   that we now manage pixmaps of various depths through the `pixel_mode`</span>
<span class="line-modified">!    *   field.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   rows ::</span>
<span class="line-modified">!    *     The number of bitmap rows.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   width ::</span>
<span class="line-modified">!    *     The number of pixels in bitmap row.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pitch ::</span>
<span class="line-modified">!    *     The pitch&#39;s absolute value is the number of bytes taken by one</span>
<span class="line-modified">!    *     bitmap row, including padding.  However, the pitch is positive when</span>
<span class="line-modified">!    *     the bitmap has a &#39;down&#39; flow, and negative when it has an &#39;up&#39; flow.</span>
<span class="line-modified">!    *     In all cases, the pitch is an offset to add to a bitmap pointer in</span>
<span class="line-modified">!    *     order to go down one row.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Note that &#39;padding&#39; means the alignment of a bitmap to a byte</span>
<span class="line-modified">!    *     border, and FreeType functions normally align to the smallest</span>
<span class="line-modified">!    *     possible integer value.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     For the B/W rasterizer, `pitch` is always an even number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     To change the pitch of a bitmap (say, to make it a multiple of 4),</span>
<span class="line-modified">!    *     use @FT_Bitmap_Convert.  Alternatively, you might use callback</span>
<span class="line-modified">!    *     functions to directly render to the application&#39;s surface; see the</span>
<span class="line-modified">!    *     file `example2.cpp` in the tutorial for a demonstration.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   buffer ::</span>
<span class="line-modified">!    *     A typeless pointer to the bitmap buffer.  This value should be</span>
<span class="line-modified">!    *     aligned on 32-bit boundaries in most cases.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_grays ::</span>
<span class="line-modified">!    *     This field is only used with @FT_PIXEL_MODE_GRAY; it gives the</span>
<span class="line-modified">!    *     number of gray levels used in the bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pixel_mode ::</span>
<span class="line-modified">!    *     The pixel mode, i.e., how pixel bits are stored.  See @FT_Pixel_Mode</span>
<span class="line-modified">!    *     for possible values.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   palette_mode ::</span>
<span class="line-modified">!    *     This field is intended for paletted pixel modes; it indicates how</span>
<span class="line-modified">!    *     the palette is stored.  Not used currently.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   palette ::</span>
<span class="line-modified">!    *     A typeless pointer to the bitmap palette; this field is intended for</span>
<span class="line-modified">!    *     paletted pixel modes.  Not used currently.</span>
<span class="line-modified">!    */</span>
    typedef struct  FT_Bitmap_
    {
      unsigned int    rows;
      unsigned int    width;
      int             pitch;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 270,69 ***</span>
      void*           palette;
  
    } FT_Bitmap;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    outline_processing                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Outline                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This structure is used to describe an outline to the scan-line     */</span>
<span class="line-modified">!   /*    converter.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    n_contours :: The number of contours in the outline.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    n_points   :: The number of points in the outline.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    points     :: A pointer to an array of `n_points&#39; @FT_Vector       */</span>
<span class="line-modified">!   /*                  elements, giving the outline&#39;s point coordinates.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    tags       :: A pointer to an array of `n_points&#39; chars, giving    */</span>
<span class="line-modified">!   /*                  each outline point&#39;s type.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                  If bit~0 is unset, the point is `off&#39; the curve,     */</span>
<span class="line-modified">!   /*                  i.e., a Bezier control point, while it is `on&#39; if    */</span>
<span class="line-modified">!   /*                  set.                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                  Bit~1 is meaningful for `off&#39; points only.  If set,  */</span>
<span class="line-modified">!   /*                  it indicates a third-order Bezier arc control point; */</span>
<span class="line-modified">!   /*                  and a second-order control point if unset.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                  If bit~2 is set, bits 5-7 contain the drop-out mode  */</span>
<span class="line-modified">!   /*                  (as defined in the OpenType specification; the value */</span>
<span class="line-modified">!   /*                  is the same as the argument to the SCANMODE          */</span>
<span class="line-modified">!   /*                  instruction).                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                  Bits 3 and~4 are reserved for internal purposes.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    contours   :: An array of `n_contours&#39; shorts, giving the end      */</span>
<span class="line-modified">!   /*                  point of each contour within the outline.  For       */</span>
<span class="line-modified">!   /*                  example, the first contour is defined by the points  */</span>
<span class="line-modified">!   /*                  `0&#39; to `contours[0]&#39;, the second one is defined by   */</span>
<span class="line-modified">!   /*                  the points `contours[0]+1&#39; to `contours[1]&#39;, etc.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    flags      :: A set of bit flags used to characterize the outline  */</span>
<span class="line-modified">!   /*                  and give hints to the scan-converter and hinter on   */</span>
<span class="line-modified">!   /*                  how to convert/grid-fit it.  See @FT_OUTLINE_XXX.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The B/W rasterizer only checks bit~2 in the `tags&#39; array for the   */</span>
<span class="line-modified">!   /*    first point of each contour.  The drop-out mode as given with      */</span>
<span class="line-modified">!   /*    @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, and       */</span>
<span class="line-modified">!   /*    @FT_OUTLINE_INCLUDE_STUBS in `flags&#39; is then overridden.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Outline_
    {
      short       n_contours;      /* number of contours in glyph        */
      short       n_points;        /* number of points in the glyph      */
  
<span class="line-new-header">--- 270,72 ---</span>
      void*           palette;
  
    } FT_Bitmap;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   outline_processing</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Outline</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This structure is used to describe an outline to the scan-line</span>
<span class="line-modified">!    *   converter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   n_contours ::</span>
<span class="line-modified">!    *     The number of contours in the outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   n_points ::</span>
<span class="line-modified">!    *     The number of points in the outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   points ::</span>
<span class="line-modified">!    *     A pointer to an array of `n_points` @FT_Vector elements, giving the</span>
<span class="line-modified">!    *     outline&#39;s point coordinates.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   tags ::</span>
<span class="line-modified">!    *     A pointer to an array of `n_points` chars, giving each outline</span>
<span class="line-modified">!    *     point&#39;s type.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If bit~0 is unset, the point is &#39;off&#39; the curve, i.e., a Bezier</span>
<span class="line-modified">!    *     control point, while it is &#39;on&#39; if set.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Bit~1 is meaningful for &#39;off&#39; points only.  If set, it indicates a</span>
<span class="line-modified">!    *     third-order Bezier arc control point; and a second-order control</span>
<span class="line-modified">!    *     point if unset.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If bit~2 is set, bits 5-7 contain the drop-out mode (as defined in</span>
<span class="line-modified">!    *     the OpenType specification; the value is the same as the argument to</span>
<span class="line-modified">!    *     the &#39;SCANMODE&#39; instruction).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Bits 3 and~4 are reserved for internal purposes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   contours ::</span>
<span class="line-modified">!    *     An array of `n_contours` shorts, giving the end point of each</span>
<span class="line-modified">!    *     contour within the outline.  For example, the first contour is</span>
<span class="line-modified">!    *     defined by the points &#39;0&#39; to `contours[0]`, the second one is</span>
<span class="line-modified">!    *     defined by the points `contours[0]+1` to `contours[1]`, etc.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   flags ::</span>
<span class="line-modified">!    *     A set of bit flags used to characterize the outline and give hints</span>
<span class="line-modified">!    *     to the scan-converter and hinter on how to convert/grid-fit it.  See</span>
<span class="line-modified">!    *     @FT_OUTLINE_XXX.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The B/W rasterizer only checks bit~2 in the `tags` array for the first</span>
<span class="line-modified">!    *   point of each contour.  The drop-out mode as given with</span>
<span class="line-added">+    *   @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, and</span>
<span class="line-added">+    *   @FT_OUTLINE_INCLUDE_STUBS in `flags` is then overridden.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Outline_
    {
      short       n_contours;      /* number of contours in glyph        */
      short       n_points;        /* number of points in the glyph      */
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 350,82 ***</span>
    /* FT_Outline.{n_contours,n_points}         */
  #define FT_OUTLINE_CONTOURS_MAX  SHRT_MAX
  #define FT_OUTLINE_POINTS_MAX    SHRT_MAX
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_OUTLINE_XXX                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A list of bit-field constants use for the flags in an outline&#39;s    */</span>
<span class="line-modified">!   /*    `flags&#39; field.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_OUTLINE_NONE ::                                                 */</span>
<span class="line-modified">!   /*      Value~0 is reserved.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_OWNER ::                                                */</span>
<span class="line-modified">!   /*      If set, this flag indicates that the outline&#39;s field arrays      */</span>
<span class="line-modified">!   /*      (i.e., `points&#39;, `flags&#39;, and `contours&#39;) are `owned&#39; by the     */</span>
<span class="line-modified">!   /*      outline object, and should thus be freed when it is destroyed.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_EVEN_ODD_FILL ::                                        */</span>
<span class="line-modified">!   /*      By default, outlines are filled using the non-zero winding rule. */</span>
<span class="line-modified">!   /*      If set to 1, the outline will be filled using the even-odd fill  */</span>
<span class="line-modified">!   /*      rule (only works with the smooth rasterizer).                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_REVERSE_FILL ::                                         */</span>
<span class="line-modified">!   /*      By default, outside contours of an outline are oriented in       */</span>
<span class="line-modified">!   /*      clock-wise direction, as defined in the TrueType specification.  */</span>
<span class="line-modified">!   /*      This flag is set if the outline uses the opposite direction      */</span>
<span class="line-modified">!   /*      (typically for Type~1 fonts).  This flag is ignored by the scan  */</span>
<span class="line-modified">!   /*      converter.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_IGNORE_DROPOUTS ::                                      */</span>
<span class="line-modified">!   /*      By default, the scan converter will try to detect drop-outs in   */</span>
<span class="line-modified">!   /*      an outline and correct the glyph bitmap to ensure consistent     */</span>
<span class="line-modified">!   /*      shape continuity.  If set, this flag hints the scan-line         */</span>
<span class="line-modified">!   /*      converter to ignore such cases.  See below for more information. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_SMART_DROPOUTS ::                                       */</span>
<span class="line-modified">!   /*      Select smart dropout control.  If unset, use simple dropout      */</span>
<span class="line-modified">!   /*      control.  Ignored if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See    */</span>
<span class="line-modified">!   /*      below for more information.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_INCLUDE_STUBS ::                                        */</span>
<span class="line-modified">!   /*      If set, turn pixels on for `stubs&#39;, otherwise exclude them.      */</span>
<span class="line-modified">!   /*      Ignored if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See below for    */</span>
<span class="line-modified">!   /*      more information.                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_HIGH_PRECISION ::                                       */</span>
<span class="line-modified">!   /*      This flag indicates that the scan-line converter should try to   */</span>
<span class="line-modified">!   /*      convert this outline to bitmaps with the highest possible        */</span>
<span class="line-modified">!   /*      quality.  It is typically set for small character sizes.  Note   */</span>
<span class="line-modified">!   /*      that this is only a hint that might be completely ignored by a   */</span>
<span class="line-modified">!   /*      given scan-converter.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_OUTLINE_SINGLE_PASS ::                                          */</span>
<span class="line-modified">!   /*      This flag is set to force a given scan-converter to only use a   */</span>
<span class="line-modified">!   /*      single pass over the outline to render a bitmap glyph image.     */</span>
<span class="line-modified">!   /*      Normally, it is set for very large character sizes.  It is only  */</span>
<span class="line-modified">!   /*      a hint that might be completely ignored by a given               */</span>
<span class="line-modified">!   /*      scan-converter.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The flags @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, */</span>
<span class="line-modified">!   /*    and @FT_OUTLINE_INCLUDE_STUBS are ignored by the smooth            */</span>
<span class="line-modified">!   /*    rasterizer.                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    There exists a second mechanism to pass the drop-out mode to the   */</span>
<span class="line-modified">!   /*    B/W rasterizer; see the `tags&#39; field in @FT_Outline.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Please refer to the description of the `SCANTYPE&#39; instruction in   */</span>
<span class="line-modified">!   /*    the OpenType specification (in file `ttinst1.doc&#39;) how simple      */</span>
<span class="line-removed">-   /*    drop-outs, smart drop-outs, and stubs are defined.                 */</span>
<span class="line-removed">-   /*                                                                       */</span>
  #define FT_OUTLINE_NONE             0x0
  #define FT_OUTLINE_OWNER            0x1
  #define FT_OUTLINE_EVEN_ODD_FILL    0x2
  #define FT_OUTLINE_REVERSE_FILL     0x4
  #define FT_OUTLINE_IGNORE_DROPOUTS  0x8
<span class="line-new-header">--- 353,80 ---</span>
    /* FT_Outline.{n_contours,n_points}         */
  #define FT_OUTLINE_CONTOURS_MAX  SHRT_MAX
  #define FT_OUTLINE_POINTS_MAX    SHRT_MAX
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_OUTLINE_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A list of bit-field constants used for the flags in an outline&#39;s</span>
<span class="line-modified">!    *   `flags` field.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_OUTLINE_NONE ::</span>
<span class="line-modified">!    *     Value~0 is reserved.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_OWNER ::</span>
<span class="line-modified">!    *     If set, this flag indicates that the outline&#39;s field arrays (i.e.,</span>
<span class="line-modified">!    *     `points`, `flags`, and `contours`) are &#39;owned&#39; by the outline</span>
<span class="line-modified">!    *     object, and should thus be freed when it is destroyed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_EVEN_ODD_FILL ::</span>
<span class="line-modified">!    *     By default, outlines are filled using the non-zero winding rule.  If</span>
<span class="line-modified">!    *     set to 1, the outline will be filled using the even-odd fill rule</span>
<span class="line-modified">!    *     (only works with the smooth rasterizer).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_REVERSE_FILL ::</span>
<span class="line-modified">!    *     By default, outside contours of an outline are oriented in</span>
<span class="line-modified">!    *     clock-wise direction, as defined in the TrueType specification.</span>
<span class="line-modified">!    *     This flag is set if the outline uses the opposite direction</span>
<span class="line-modified">!    *     (typically for Type~1 fonts).  This flag is ignored by the scan</span>
<span class="line-modified">!    *     converter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_IGNORE_DROPOUTS ::</span>
<span class="line-modified">!    *     By default, the scan converter will try to detect drop-outs in an</span>
<span class="line-modified">!    *     outline and correct the glyph bitmap to ensure consistent shape</span>
<span class="line-modified">!    *     continuity.  If set, this flag hints the scan-line converter to</span>
<span class="line-modified">!    *     ignore such cases.  See below for more information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_SMART_DROPOUTS ::</span>
<span class="line-modified">!    *     Select smart dropout control.  If unset, use simple dropout control.</span>
<span class="line-modified">!    *     Ignored if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See below for more</span>
<span class="line-modified">!    *     information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_INCLUDE_STUBS ::</span>
<span class="line-modified">!    *     If set, turn pixels on for &#39;stubs&#39;, otherwise exclude them.  Ignored</span>
<span class="line-modified">!    *     if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See below for more</span>
<span class="line-modified">!    *     information.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_HIGH_PRECISION ::</span>
<span class="line-modified">!    *     This flag indicates that the scan-line converter should try to</span>
<span class="line-modified">!    *     convert this outline to bitmaps with the highest possible quality.</span>
<span class="line-modified">!    *     It is typically set for small character sizes.  Note that this is</span>
<span class="line-modified">!    *     only a hint that might be completely ignored by a given</span>
<span class="line-modified">!    *     scan-converter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_OUTLINE_SINGLE_PASS ::</span>
<span class="line-modified">!    *     This flag is set to force a given scan-converter to only use a</span>
<span class="line-modified">!    *     single pass over the outline to render a bitmap glyph image.</span>
<span class="line-modified">!    *     Normally, it is set for very large character sizes.  It is only a</span>
<span class="line-modified">!    *     hint that might be completely ignored by a given scan-converter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The flags @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, and</span>
<span class="line-modified">!    *   @FT_OUTLINE_INCLUDE_STUBS are ignored by the smooth rasterizer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   There exists a second mechanism to pass the drop-out mode to the B/W</span>
<span class="line-modified">!    *   rasterizer; see the `tags` field in @FT_Outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Please refer to the description of the &#39;SCANTYPE&#39; instruction in the</span>
<span class="line-modified">!    *   OpenType specification (in file `ttinst1.doc`) how simple drop-outs,</span>
<span class="line-modified">!    *   smart drop-outs, and stubs are defined.</span>
<span class="line-modified">!    */</span>
  #define FT_OUTLINE_NONE             0x0
  #define FT_OUTLINE_OWNER            0x1
  #define FT_OUTLINE_EVEN_ODD_FILL    0x2
  #define FT_OUTLINE_REVERSE_FILL     0x4
  #define FT_OUTLINE_IGNORE_DROPOUTS  0x8
</pre>
<hr />
<pre>
<span class="line-old-header">*** 435,198 ***</span>
  #define FT_OUTLINE_HIGH_PRECISION   0x100
  #define FT_OUTLINE_SINGLE_PASS      0x200
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_OUTLINE_XXX&#39; values instead                       */</span>
  #define ft_outline_none             FT_OUTLINE_NONE
  #define ft_outline_owner            FT_OUTLINE_OWNER
  #define ft_outline_even_odd_fill    FT_OUTLINE_EVEN_ODD_FILL
  #define ft_outline_reverse_fill     FT_OUTLINE_REVERSE_FILL
  #define ft_outline_ignore_dropouts  FT_OUTLINE_IGNORE_DROPOUTS
  #define ft_outline_high_precision   FT_OUTLINE_HIGH_PRECISION
  #define ft_outline_single_pass      FT_OUTLINE_SINGLE_PASS
  
    /* */
  
<span class="line-modified">! #define FT_CURVE_TAG( flag )  ( flag &amp; 3 )</span>
  
<span class="line-modified">! #define FT_CURVE_TAG_ON            1</span>
<span class="line-modified">! #define FT_CURVE_TAG_CONIC         0</span>
<span class="line-modified">! #define FT_CURVE_TAG_CUBIC         2</span>
  
<span class="line-modified">! #define FT_CURVE_TAG_HAS_SCANMODE  4</span>
  
<span class="line-modified">! #define FT_CURVE_TAG_TOUCH_X       8  /* reserved for the TrueType hinter */</span>
<span class="line-modified">! #define FT_CURVE_TAG_TOUCH_Y      16  /* reserved for the TrueType hinter */</span>
  
  #define FT_CURVE_TAG_TOUCH_BOTH    ( FT_CURVE_TAG_TOUCH_X | \
                                       FT_CURVE_TAG_TOUCH_Y )
  
  #define FT_Curve_Tag_On       FT_CURVE_TAG_ON
  #define FT_Curve_Tag_Conic    FT_CURVE_TAG_CONIC
  #define FT_Curve_Tag_Cubic    FT_CURVE_TAG_CUBIC
  #define FT_Curve_Tag_Touch_X  FT_CURVE_TAG_TOUCH_X
  #define FT_Curve_Tag_Touch_Y  FT_CURVE_TAG_TOUCH_Y
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Outline_MoveToFunc                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function pointer type used to describe the signature of a `move  */</span>
<span class="line-modified">!   /*    to&#39; function during outline walking/decomposition.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A `move to&#39; is emitted to start a new contour in an outline.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    to   :: A pointer to the target point of the `move to&#39;.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    user :: A typeless pointer, which is passed from the caller of the */</span>
<span class="line-modified">!   /*            decomposition function.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Outline_MoveToFunc)( const FT_Vector*  to,
                              void*             user );
  
  #define FT_Outline_MoveTo_Func  FT_Outline_MoveToFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Outline_LineToFunc                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function pointer type used to describe the signature of a `line  */</span>
<span class="line-modified">!   /*    to&#39; function during outline walking/decomposition.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A `line to&#39; is emitted to indicate a segment in the outline.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    to   :: A pointer to the target point of the `line to&#39;.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    user :: A typeless pointer, which is passed from the caller of the */</span>
<span class="line-modified">!   /*            decomposition function.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Outline_LineToFunc)( const FT_Vector*  to,
                              void*             user );
  
  #define FT_Outline_LineTo_Func  FT_Outline_LineToFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Outline_ConicToFunc                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function pointer type used to describe the signature of a `conic */</span>
<span class="line-modified">!   /*    to&#39; function during outline walking or decomposition.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A `conic to&#39; is emitted to indicate a second-order Bezier arc in   */</span>
<span class="line-modified">!   /*    the outline.                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    control :: An intermediate control point between the last position */</span>
<span class="line-modified">!   /*               and the new target in `to&#39;.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    to      :: A pointer to the target end point of the conic arc.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    user    :: A typeless pointer, which is passed from the caller of  */</span>
<span class="line-modified">!   /*               the decomposition function.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Outline_ConicToFunc)( const FT_Vector*  control,
                               const FT_Vector*  to,
                               void*             user );
  
  #define FT_Outline_ConicTo_Func  FT_Outline_ConicToFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Outline_CubicToFunc                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function pointer type used to describe the signature of a `cubic */</span>
<span class="line-modified">!   /*    to&#39; function during outline walking or decomposition.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    A `cubic to&#39; is emitted to indicate a third-order Bezier arc.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    control1 :: A pointer to the first Bezier control point.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    control2 :: A pointer to the second Bezier control point.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    to       :: A pointer to the target end point.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    user     :: A typeless pointer, which is passed from the caller of */</span>
<span class="line-modified">!   /*                the decomposition function.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Outline_CubicToFunc)( const FT_Vector*  control1,
                               const FT_Vector*  control2,
                               const FT_Vector*  to,
                               void*             user );
  
  #define FT_Outline_CubicTo_Func  FT_Outline_CubicToFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Outline_Funcs                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure to hold various function pointers used during outline  */</span>
<span class="line-modified">!   /*    decomposition in order to emit segments, conic, and cubic Beziers. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    move_to  :: The `move to&#39; emitter.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    line_to  :: The segment emitter.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    conic_to :: The second-order Bezier arc emitter.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cubic_to :: The third-order Bezier arc emitter.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    shift    :: The shift that is applied to coordinates before they   */</span>
<span class="line-modified">!   /*                are sent to the emitter.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    delta    :: The delta that is applied to coordinates before they   */</span>
<span class="line-modified">!   /*                are sent to the emitter, but after the shift.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The point coordinates sent to the emitters are the transformed     */</span>
<span class="line-modified">!   /*    version of the original coordinates (this is important for high    */</span>
<span class="line-modified">!   /*    accuracy during scan-conversion).  The transformation is simple:   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      x&#39; = (x &lt;&lt; shift) - delta                                        */</span>
<span class="line-modified">!   /*      y&#39; = (y &lt;&lt; shift) - delta                                        */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Set the values of `shift&#39; and `delta&#39; to~0 to get the original     */</span>
<span class="line-modified">!   /*    point coordinates.                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Outline_Funcs_
    {
      FT_Outline_MoveToFunc   move_to;
      FT_Outline_LineToFunc   line_to;
      FT_Outline_ConicToFunc  conic_to;
<span class="line-new-header">--- 436,220 ---</span>
  #define FT_OUTLINE_HIGH_PRECISION   0x100
  #define FT_OUTLINE_SINGLE_PASS      0x200
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_OUTLINE_XXX` values instead                       */</span>
  #define ft_outline_none             FT_OUTLINE_NONE
  #define ft_outline_owner            FT_OUTLINE_OWNER
  #define ft_outline_even_odd_fill    FT_OUTLINE_EVEN_ODD_FILL
  #define ft_outline_reverse_fill     FT_OUTLINE_REVERSE_FILL
  #define ft_outline_ignore_dropouts  FT_OUTLINE_IGNORE_DROPOUTS
  #define ft_outline_high_precision   FT_OUTLINE_HIGH_PRECISION
  #define ft_outline_single_pass      FT_OUTLINE_SINGLE_PASS
  
    /* */
  
<span class="line-modified">! #define FT_CURVE_TAG( flag )  ( flag &amp; 0x03 )</span>
  
<span class="line-modified">!   /* see the `tags` field in `FT_Outline` for a description of the values */</span>
<span class="line-modified">! #define FT_CURVE_TAG_ON            0x01</span>
<span class="line-modified">! #define FT_CURVE_TAG_CONIC         0x00</span>
<span class="line-added">+ #define FT_CURVE_TAG_CUBIC         0x02</span>
  
<span class="line-modified">! #define FT_CURVE_TAG_HAS_SCANMODE  0x04</span>
  
<span class="line-modified">! #define FT_CURVE_TAG_TOUCH_X       0x08  /* reserved for TrueType hinter */</span>
<span class="line-modified">! #define FT_CURVE_TAG_TOUCH_Y       0x10  /* reserved for TrueType hinter */</span>
  
  #define FT_CURVE_TAG_TOUCH_BOTH    ( FT_CURVE_TAG_TOUCH_X | \
                                       FT_CURVE_TAG_TOUCH_Y )
<span class="line-added">+   /* values 0x20, 0x40, and 0x80 are reserved */</span>
<span class="line-added">+ </span>
  
<span class="line-added">+   /* these constants are deprecated; use the corresponding */</span>
<span class="line-added">+   /* `FT_CURVE_TAG_XXX` values instead                     */</span>
  #define FT_Curve_Tag_On       FT_CURVE_TAG_ON
  #define FT_Curve_Tag_Conic    FT_CURVE_TAG_CONIC
  #define FT_Curve_Tag_Cubic    FT_CURVE_TAG_CUBIC
  #define FT_Curve_Tag_Touch_X  FT_CURVE_TAG_TOUCH_X
  #define FT_Curve_Tag_Touch_Y  FT_CURVE_TAG_TOUCH_Y
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Outline_MoveToFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function pointer type used to describe the signature of a &#39;move to&#39;</span>
<span class="line-modified">!    *   function during outline walking/decomposition.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A &#39;move to&#39; is emitted to start a new contour in an outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   to ::</span>
<span class="line-modified">!    *     A pointer to the target point of the &#39;move to&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   user ::</span>
<span class="line-modified">!    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified">!    *     decomposition function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   Error code.  0~means success.</span>
<span class="line-added">+    */</span>
    typedef int
    (*FT_Outline_MoveToFunc)( const FT_Vector*  to,
                              void*             user );
  
  #define FT_Outline_MoveTo_Func  FT_Outline_MoveToFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Outline_LineToFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function pointer type used to describe the signature of a &#39;line to&#39;</span>
<span class="line-modified">!    *   function during outline walking/decomposition.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A &#39;line to&#39; is emitted to indicate a segment in the outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   to ::</span>
<span class="line-modified">!    *     A pointer to the target point of the &#39;line to&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   user ::</span>
<span class="line-modified">!    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified">!    *     decomposition function.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-added">+    *   Error code.  0~means success.</span>
<span class="line-added">+    */</span>
    typedef int
    (*FT_Outline_LineToFunc)( const FT_Vector*  to,
                              void*             user );
  
  #define FT_Outline_LineTo_Func  FT_Outline_LineToFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Outline_ConicToFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function pointer type used to describe the signature of a &#39;conic to&#39;</span>
<span class="line-modified">!    *   function during outline walking or decomposition.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A &#39;conic to&#39; is emitted to indicate a second-order Bezier arc in the</span>
<span class="line-modified">!    *   outline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   control ::</span>
<span class="line-modified">!    *     An intermediate control point between the last position and the new</span>
<span class="line-modified">!    *     target in `to`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   to ::</span>
<span class="line-modified">!    *     A pointer to the target end point of the conic arc.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   user ::</span>
<span class="line-modified">!    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified">!    *     decomposition function.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   Error code.  0~means success.</span>
<span class="line-added">+    */</span>
    typedef int
    (*FT_Outline_ConicToFunc)( const FT_Vector*  control,
                               const FT_Vector*  to,
                               void*             user );
  
  #define FT_Outline_ConicTo_Func  FT_Outline_ConicToFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Outline_CubicToFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function pointer type used to describe the signature of a &#39;cubic to&#39;</span>
<span class="line-modified">!    *   function during outline walking or decomposition.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   A &#39;cubic to&#39; is emitted to indicate a third-order Bezier arc.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   control1 ::</span>
<span class="line-modified">!    *     A pointer to the first Bezier control point.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   control2 ::</span>
<span class="line-modified">!    *     A pointer to the second Bezier control point.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   to ::</span>
<span class="line-modified">!    *     A pointer to the target end point.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   user ::</span>
<span class="line-modified">!    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified">!    *     decomposition function.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * @return:</span>
<span class="line-added">+    *   Error code.  0~means success.</span>
<span class="line-added">+    */</span>
    typedef int
    (*FT_Outline_CubicToFunc)( const FT_Vector*  control1,
                               const FT_Vector*  control2,
                               const FT_Vector*  to,
                               void*             user );
  
  #define FT_Outline_CubicTo_Func  FT_Outline_CubicToFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Outline_Funcs</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure to hold various function pointers used during outline</span>
<span class="line-modified">!    *   decomposition in order to emit segments, conic, and cubic Beziers.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   move_to ::</span>
<span class="line-modified">!    *     The &#39;move to&#39; emitter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   line_to ::</span>
<span class="line-modified">!    *     The segment emitter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   conic_to ::</span>
<span class="line-modified">!    *     The second-order Bezier arc emitter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cubic_to ::</span>
<span class="line-modified">!    *     The third-order Bezier arc emitter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   shift ::</span>
<span class="line-modified">!    *     The shift that is applied to coordinates before they are sent to the</span>
<span class="line-modified">!    *     emitter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   delta ::</span>
<span class="line-modified">!    *     The delta that is applied to coordinates before they are sent to the</span>
<span class="line-modified">!    *     emitter, but after the shift.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The point coordinates sent to the emitters are the transformed version</span>
<span class="line-modified">!    *   of the original coordinates (this is important for high accuracy</span>
<span class="line-modified">!    *   during scan-conversion).  The transformation is simple:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     x&#39; = (x &lt;&lt; shift) - delta</span>
<span class="line-added">+    *     y&#39; = (y &lt;&lt; shift) - delta</span>
<span class="line-added">+    *   ```</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   Set the values of `shift` and `delta` to~0 to get the original point</span>
<span class="line-added">+    *   coordinates.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Outline_Funcs_
    {
      FT_Outline_MoveToFunc   move_to;
      FT_Outline_LineToFunc   line_to;
      FT_Outline_ConicToFunc  conic_to;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 636,84 ***</span>
      FT_Pos                  delta;
  
    } FT_Outline_Funcs;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    basic_types                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Macro&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_IMAGE_TAG                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This macro converts four-letter tags to an unsigned long type.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Since many 16-bit compilers don&#39;t like 32-bit enumerations, you    */</span>
<span class="line-modified">!   /*    should redefine this macro in case of problems to something like   */</span>
<span class="line-modified">!   /*    this:                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    {                                                                  */</span>
<span class="line-modified">!   /*      #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  value         */</span>
<span class="line-modified">!   /*    }                                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    to get a simple enumeration without assigning special numbers.     */</span>
<span class="line-removed">-   /*                                                                       */</span>
  #ifndef FT_IMAGE_TAG
  #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  \
            value = ( ( (unsigned long)_x1 &lt;&lt; 24 ) | \
                      ( (unsigned long)_x2 &lt;&lt; 16 ) | \
                      ( (unsigned long)_x3 &lt;&lt; 8  ) | \
                        (unsigned long)_x4         )
  #endif /* FT_IMAGE_TAG */
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Glyph_Format                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An enumeration type used to describe the format of a given glyph   */</span>
<span class="line-modified">!   /*    image.  Note that this version of FreeType only supports two image */</span>
<span class="line-modified">!   /*    formats, even though future font drivers will be able to register  */</span>
<span class="line-modified">!   /*    their own format.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_GLYPH_FORMAT_NONE ::                                            */</span>
<span class="line-modified">!   /*      The value~0 is reserved.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_GLYPH_FORMAT_COMPOSITE ::                                       */</span>
<span class="line-modified">!   /*      The glyph image is a composite of several other images.  This    */</span>
<span class="line-modified">!   /*      format is _only_ used with @FT_LOAD_NO_RECURSE, and is used to   */</span>
<span class="line-modified">!   /*      report compound glyphs (like accented characters).               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_GLYPH_FORMAT_BITMAP ::                                          */</span>
<span class="line-modified">!   /*      The glyph image is a bitmap, and can be described as an          */</span>
<span class="line-modified">!   /*      @FT_Bitmap.  You generally need to access the `bitmap&#39; field of  */</span>
<span class="line-modified">!   /*      the @FT_GlyphSlotRec structure to read it.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_GLYPH_FORMAT_OUTLINE ::                                         */</span>
<span class="line-modified">!   /*      The glyph image is a vectorial outline made of line segments     */</span>
<span class="line-modified">!   /*      and Bezier arcs; it can be described as an @FT_Outline; you      */</span>
<span class="line-modified">!   /*      generally want to access the `outline&#39; field of the              */</span>
<span class="line-modified">!   /*      @FT_GlyphSlotRec structure to read it.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_GLYPH_FORMAT_PLOTTER ::                                         */</span>
<span class="line-modified">!   /*      The glyph image is a vectorial path with no inside and outside   */</span>
<span class="line-modified">!   /*      contours.  Some Type~1 fonts, like those in the Hershey family,  */</span>
<span class="line-modified">!   /*      contain glyphs in this format.  These are described as           */</span>
<span class="line-modified">!   /*      @FT_Outline, but FreeType isn&#39;t currently capable of rendering   */</span>
<span class="line-modified">!   /*      them correctly.                                                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef enum  FT_Glyph_Format_
    {
      FT_IMAGE_TAG( FT_GLYPH_FORMAT_NONE, 0, 0, 0, 0 ),
  
      FT_IMAGE_TAG( FT_GLYPH_FORMAT_COMPOSITE, &#39;c&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39; ),
<span class="line-new-header">--- 659,82 ---</span>
      FT_Pos                  delta;
  
    } FT_Outline_Funcs;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   basic_types</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @macro:</span>
<span class="line-modified">!    *   FT_IMAGE_TAG</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This macro converts four-letter tags to an unsigned long type.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Since many 16-bit compilers don&#39;t like 32-bit enumerations, you should</span>
<span class="line-modified">!    *   redefine this macro in case of problems to something like this:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *     #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  value</span>
<span class="line-modified">!    *   ```</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   to get a simple enumeration without assigning special numbers.</span>
<span class="line-modified">!    */</span>
  #ifndef FT_IMAGE_TAG
  #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  \
            value = ( ( (unsigned long)_x1 &lt;&lt; 24 ) | \
                      ( (unsigned long)_x2 &lt;&lt; 16 ) | \
                      ( (unsigned long)_x3 &lt;&lt; 8  ) | \
                        (unsigned long)_x4         )
  #endif /* FT_IMAGE_TAG */
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_Glyph_Format</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An enumeration type used to describe the format of a given glyph</span>
<span class="line-modified">!    *   image.  Note that this version of FreeType only supports two image</span>
<span class="line-modified">!    *   formats, even though future font drivers will be able to register</span>
<span class="line-modified">!    *   their own format.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_GLYPH_FORMAT_NONE ::</span>
<span class="line-modified">!    *     The value~0 is reserved.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_GLYPH_FORMAT_COMPOSITE ::</span>
<span class="line-modified">!    *     The glyph image is a composite of several other images.  This format</span>
<span class="line-modified">!    *     is _only_ used with @FT_LOAD_NO_RECURSE, and is used to report</span>
<span class="line-modified">!    *     compound glyphs (like accented characters).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_GLYPH_FORMAT_BITMAP ::</span>
<span class="line-modified">!    *     The glyph image is a bitmap, and can be described as an @FT_Bitmap.</span>
<span class="line-modified">!    *     You generally need to access the `bitmap` field of the</span>
<span class="line-modified">!    *     @FT_GlyphSlotRec structure to read it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_GLYPH_FORMAT_OUTLINE ::</span>
<span class="line-modified">!    *     The glyph image is a vectorial outline made of line segments and</span>
<span class="line-modified">!    *     Bezier arcs; it can be described as an @FT_Outline; you generally</span>
<span class="line-modified">!    *     want to access the `outline` field of the @FT_GlyphSlotRec structure</span>
<span class="line-modified">!    *     to read it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_GLYPH_FORMAT_PLOTTER ::</span>
<span class="line-modified">!    *     The glyph image is a vectorial path with no inside and outside</span>
<span class="line-modified">!    *     contours.  Some Type~1 fonts, like those in the Hershey family,</span>
<span class="line-modified">!    *     contain glyphs in this format.  These are described as @FT_Outline,</span>
<span class="line-modified">!    *     but FreeType isn&#39;t currently capable of rendering them correctly.</span>
<span class="line-modified">!    */</span>
    typedef enum  FT_Glyph_Format_
    {
      FT_IMAGE_TAG( FT_GLYPH_FORMAT_NONE, 0, 0, 0, 0 ),
  
      FT_IMAGE_TAG( FT_GLYPH_FORMAT_COMPOSITE, &#39;c&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39; ),
</pre>
<hr />
<pre>
<span class="line-old-header">*** 723,11 ***</span>
  
    } FT_Glyph_Format;
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_Glyph_Format&#39; values instead.                     */</span>
  #define ft_glyph_format_none       FT_GLYPH_FORMAT_NONE
  #define ft_glyph_format_composite  FT_GLYPH_FORMAT_COMPOSITE
  #define ft_glyph_format_bitmap     FT_GLYPH_FORMAT_BITMAP
  #define ft_glyph_format_outline    FT_GLYPH_FORMAT_OUTLINE
  #define ft_glyph_format_plotter    FT_GLYPH_FORMAT_PLOTTER
<span class="line-new-header">--- 744,11 ---</span>
  
    } FT_Glyph_Format;
  
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_Glyph_Format` values instead.                     */</span>
  #define ft_glyph_format_none       FT_GLYPH_FORMAT_NONE
  #define ft_glyph_format_composite  FT_GLYPH_FORMAT_COMPOSITE
  #define ft_glyph_format_bitmap     FT_GLYPH_FORMAT_BITMAP
  #define ft_glyph_format_outline    FT_GLYPH_FORMAT_OUTLINE
  #define ft_glyph_format_plotter    FT_GLYPH_FORMAT_PLOTTER
</pre>
<hr />
<pre>
<span class="line-old-header">*** 742,260 ***</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* A raster is a scan converter, in charge of rendering an outline into  */</span>
<span class="line-modified">!   /* a bitmap.  This section contains the public API for rasters.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* Note that in FreeType 2, all rasters are now encapsulated within      */</span>
<span class="line-modified">!   /* specific modules called `renderers&#39;.  See `ftrender.h&#39; for more       */</span>
<span class="line-modified">!   /* details on renderers.                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">!   /*    raster                                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">!   /*    Scanline Converter                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">!   /*    How vectorial outlines are converted into bitmaps and pixmaps.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This section contains technical definitions.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_Raster                                                          */</span>
<span class="line-modified">!   /*    FT_Span                                                            */</span>
<span class="line-modified">!   /*    FT_SpanFunc                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Raster_Params                                                   */</span>
<span class="line-modified">!   /*    FT_RASTER_FLAG_XXX                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_Raster_NewFunc                                                  */</span>
<span class="line-modified">!   /*    FT_Raster_DoneFunc                                                 */</span>
<span class="line-modified">!   /*    FT_Raster_ResetFunc                                                */</span>
<span class="line-modified">!   /*    FT_Raster_SetModeFunc                                              */</span>
<span class="line-modified">!   /*    FT_Raster_RenderFunc                                               */</span>
<span class="line-modified">!   /*    FT_Raster_Funcs                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_Raster                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    An opaque handle (pointer) to a raster object.  Each object can be */</span>
<span class="line-modified">!   /*    used independently to convert an outline into a bitmap or pixmap.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct FT_RasterRec_*  FT_Raster;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Span                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used to model a single span of gray pixels when        */</span>
<span class="line-modified">!   /*    rendering an anti-aliased bitmap.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    x        :: The span&#39;s horizontal start position.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    len      :: The span&#39;s length in pixels.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    coverage :: The span color/coverage, ranging from 0 (background)   */</span>
<span class="line-modified">!   /*                to 255 (foreground).                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This structure is used by the span drawing callback type named     */</span>
<span class="line-modified">!   /*    @FT_SpanFunc that takes the y~coordinate of the span as a          */</span>
<span class="line-modified">!   /*    parameter.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    The coverage value is always between 0 and 255.  If you want less  */</span>
<span class="line-modified">!   /*    gray values, the callback function has to reduce them.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Span_
    {
      short           x;
      unsigned short  len;
      unsigned char   coverage;
  
    } FT_Span;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_SpanFunc                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function used as a call-back by the anti-aliased renderer in     */</span>
<span class="line-modified">!   /*    order to let client applications draw themselves the gray pixel    */</span>
<span class="line-modified">!   /*    spans on each scan line.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    y     :: The scanline&#39;s y~coordinate.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    count :: The number of spans to draw on this scanline.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    spans :: A table of `count&#39; spans to draw on the scanline.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    user  :: User-supplied data that is passed to the callback.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This callback allows client applications to directly render the    */</span>
<span class="line-modified">!   /*    gray spans of the anti-aliased bitmap to any kind of surfaces.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This can be used to write anti-aliased outlines directly to a      */</span>
<span class="line-modified">!   /*    given background bitmap, and even perform translucency.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*FT_SpanFunc)( int             y,
                    int             count,
                    const FT_Span*  spans,
                    void*           user );
  
  #define FT_Raster_Span_Func  FT_SpanFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_BitTest_Func                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Deprecated, unimplemented.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Raster_BitTest_Func)( int    y,
                               int    x,
                               void*  user );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_BitSet_Func                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Deprecated, unimplemented.                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*FT_Raster_BitSet_Func)( int    y,
                              int    x,
                              void*  user );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">!   /*    FT_RASTER_FLAG_XXX                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A list of bit flag constants as used in the `flags&#39; field of a     */</span>
<span class="line-modified">!   /*    @FT_Raster_Params structure.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_RASTER_FLAG_DEFAULT :: This value is 0.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RASTER_FLAG_AA      :: This flag is set to indicate that an     */</span>
<span class="line-modified">!   /*                              anti-aliased glyph image should be       */</span>
<span class="line-modified">!   /*                              generated.  Otherwise, it will be        */</span>
<span class="line-modified">!   /*                              monochrome (1-bit).                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RASTER_FLAG_DIRECT  :: This flag is set to indicate direct      */</span>
<span class="line-modified">!   /*                              rendering.  In this mode, client         */</span>
<span class="line-modified">!   /*                              applications must provide their own span */</span>
<span class="line-modified">!   /*                              callback.  This lets them directly       */</span>
<span class="line-modified">!   /*                              draw or compose over an existing bitmap. */</span>
<span class="line-modified">!   /*                              If this bit is not set, the target       */</span>
<span class="line-modified">!   /*                              pixmap&#39;s buffer _must_ be zeroed before  */</span>
<span class="line-modified">!   /*                              rendering.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                              Direct rendering is only possible with   */</span>
<span class="line-modified">!   /*                              anti-aliased glyphs.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    FT_RASTER_FLAG_CLIP    :: This flag is only used in direct         */</span>
<span class="line-modified">!   /*                              rendering mode.  If set, the output will */</span>
<span class="line-modified">!   /*                              be clipped to a box specified in the     */</span>
<span class="line-removed">-   /*                              `clip_box&#39; field of the                  */</span>
<span class="line-removed">-   /*                              @FT_Raster_Params structure.             */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*                              Note that by default, the glyph bitmap   */</span>
<span class="line-removed">-   /*                              is clipped to the target pixmap, except  */</span>
<span class="line-removed">-   /*                              in direct rendering mode where all spans */</span>
<span class="line-removed">-   /*                              are generated if no clipping box is set. */</span>
<span class="line-removed">-   /*                                                                       */</span>
  #define FT_RASTER_FLAG_DEFAULT  0x0
  #define FT_RASTER_FLAG_AA       0x1
  #define FT_RASTER_FLAG_DIRECT   0x2
  #define FT_RASTER_FLAG_CLIP     0x4
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_RASTER_FLAG_XXX&#39; values instead                   */</span>
  #define ft_raster_flag_default  FT_RASTER_FLAG_DEFAULT
  #define ft_raster_flag_aa       FT_RASTER_FLAG_AA
  #define ft_raster_flag_direct   FT_RASTER_FLAG_DIRECT
  #define ft_raster_flag_clip     FT_RASTER_FLAG_CLIP
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Raster_Params                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure to hold the arguments used by a raster&#39;s render        */</span>
<span class="line-modified">!   /*    function.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    target      :: The target bitmap.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    source      :: A pointer to the source glyph image (e.g., an       */</span>
<span class="line-modified">!   /*                   @FT_Outline).                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    flags       :: The rendering flags.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    gray_spans  :: The gray span drawing callback.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    black_spans :: Unused.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bit_test    :: Unused.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bit_set     :: Unused.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    user        :: User-supplied data that is passed to each drawing   */</span>
<span class="line-modified">!   /*                   callback.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    clip_box    :: An optional clipping box.  It is only used in       */</span>
<span class="line-modified">!   /*                   direct rendering mode.  Note that coordinates here  */</span>
<span class="line-modified">!   /*                   should be expressed in _integer_ pixels (and not in */</span>
<span class="line-modified">!   /*                   26.6 fixed-point units).                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    An anti-aliased glyph bitmap is drawn if the @FT_RASTER_FLAG_AA    */</span>
<span class="line-modified">!   /*    bit flag is set in the `flags&#39; field, otherwise a monochrome       */</span>
<span class="line-modified">!   /*    bitmap is generated.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    If the @FT_RASTER_FLAG_DIRECT bit flag is set in `flags&#39;, the      */</span>
<span class="line-modified">!   /*    raster will call the `gray_spans&#39; callback to draw gray pixel      */</span>
<span class="line-modified">!   /*    spans.  This allows direct composition over a pre-existing bitmap  */</span>
<span class="line-modified">!   /*    through user-provided callbacks to perform the span drawing and    */</span>
<span class="line-modified">!   /*    composition.    Not supported by the monochrome rasterizer.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Raster_Params_
    {
      const FT_Bitmap*        target;
      const void*             source;
      int                     flags;
<span class="line-new-header">--- 763,264 ---</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * A raster is a scan converter, in charge of rendering an outline into a</span>
<span class="line-modified">!    * bitmap.  This section contains the public API for rasters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * Note that in FreeType 2, all rasters are now encapsulated within</span>
<span class="line-modified">!    * specific modules called &#39;renderers&#39;.  See `ftrender.h` for more details</span>
<span class="line-modified">!    * on renderers.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @section:</span>
<span class="line-modified">!    *   raster</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @title:</span>
<span class="line-modified">!    *   Scanline Converter</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @abstract:</span>
<span class="line-modified">!    *   How vectorial outlines are converted into bitmaps and pixmaps.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This section contains technical definitions.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @order:</span>
<span class="line-modified">!    *   FT_Raster</span>
<span class="line-modified">!    *   FT_Span</span>
<span class="line-modified">!    *   FT_SpanFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Raster_Params</span>
<span class="line-modified">!    *   FT_RASTER_FLAG_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_Raster_NewFunc</span>
<span class="line-modified">!    *   FT_Raster_DoneFunc</span>
<span class="line-modified">!    *   FT_Raster_ResetFunc</span>
<span class="line-modified">!    *   FT_Raster_SetModeFunc</span>
<span class="line-modified">!    *   FT_Raster_RenderFunc</span>
<span class="line-modified">!    *   FT_Raster_Funcs</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   FT_Raster</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   An opaque handle (pointer) to a raster object.  Each object can be</span>
<span class="line-modified">!    *   used independently to convert an outline into a bitmap or pixmap.</span>
<span class="line-modified">!    */</span>
    typedef struct FT_RasterRec_*  FT_Raster;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Span</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used to model a single span of gray pixels when rendering</span>
<span class="line-modified">!    *   an anti-aliased bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   x ::</span>
<span class="line-modified">!    *     The span&#39;s horizontal start position.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   len ::</span>
<span class="line-modified">!    *     The span&#39;s length in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   coverage ::</span>
<span class="line-modified">!    *     The span color/coverage, ranging from 0 (background) to 255</span>
<span class="line-modified">!    *     (foreground).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This structure is used by the span drawing callback type named</span>
<span class="line-modified">!    *   @FT_SpanFunc that takes the y~coordinate of the span as a parameter.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The coverage value is always between 0 and 255.  If you want less gray</span>
<span class="line-added">+    *   values, the callback function has to reduce them.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Span_
    {
      short           x;
      unsigned short  len;
      unsigned char   coverage;
  
    } FT_Span;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_SpanFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function used as a call-back by the anti-aliased renderer in order</span>
<span class="line-modified">!    *   to let client applications draw themselves the gray pixel spans on</span>
<span class="line-modified">!    *   each scan line.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   y ::</span>
<span class="line-modified">!    *     The scanline&#39;s upward y~coordinate.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   count ::</span>
<span class="line-modified">!    *     The number of spans to draw on this scanline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   spans ::</span>
<span class="line-modified">!    *     A table of `count` spans to draw on the scanline.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   user ::</span>
<span class="line-modified">!    *     User-supplied data that is passed to the callback.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This callback allows client applications to directly render the gray</span>
<span class="line-modified">!    *   spans of the anti-aliased bitmap to any kind of surfaces.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   This can be used to write anti-aliased outlines directly to a given</span>
<span class="line-added">+    *   background bitmap, and even perform translucency.</span>
<span class="line-added">+    */</span>
    typedef void
    (*FT_SpanFunc)( int             y,
                    int             count,
                    const FT_Span*  spans,
                    void*           user );
  
  #define FT_Raster_Span_Func  FT_SpanFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_BitTest_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Deprecated, unimplemented.</span>
<span class="line-modified">!    */</span>
    typedef int
    (*FT_Raster_BitTest_Func)( int    y,
                               int    x,
                               void*  user );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_BitSet_Func</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Deprecated, unimplemented.</span>
<span class="line-modified">!    */</span>
    typedef void
    (*FT_Raster_BitSet_Func)( int    y,
                              int    x,
                              void*  user );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @enum:</span>
<span class="line-modified">!    *   FT_RASTER_FLAG_XXX</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A list of bit flag constants as used in the `flags` field of a</span>
<span class="line-modified">!    *   @FT_Raster_Params structure.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @values:</span>
<span class="line-modified">!    *   FT_RASTER_FLAG_DEFAULT ::</span>
<span class="line-modified">!    *     This value is 0.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RASTER_FLAG_AA ::</span>
<span class="line-modified">!    *     This flag is set to indicate that an anti-aliased glyph image should</span>
<span class="line-modified">!    *     be generated.  Otherwise, it will be monochrome (1-bit).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RASTER_FLAG_DIRECT ::</span>
<span class="line-modified">!    *     This flag is set to indicate direct rendering.  In this mode, client</span>
<span class="line-modified">!    *     applications must provide their own span callback.  This lets them</span>
<span class="line-modified">!    *     directly draw or compose over an existing bitmap.  If this bit is</span>
<span class="line-modified">!    *     _not_ set, the target pixmap&#39;s buffer _must_ be zeroed before</span>
<span class="line-modified">!    *     rendering and the output will be clipped to its size.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     Direct rendering is only possible with anti-aliased glyphs.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   FT_RASTER_FLAG_CLIP ::</span>
<span class="line-modified">!    *     This flag is only used in direct rendering mode.  If set, the output</span>
<span class="line-modified">!    *     will be clipped to a box specified in the `clip_box` field of the</span>
<span class="line-modified">!    *     @FT_Raster_Params structure.  Otherwise, the `clip_box` is</span>
<span class="line-modified">!    *     effectively set to the bounding box and all spans are generated.</span>
<span class="line-modified">!    */</span>
  #define FT_RASTER_FLAG_DEFAULT  0x0
  #define FT_RASTER_FLAG_AA       0x1
  #define FT_RASTER_FLAG_DIRECT   0x2
  #define FT_RASTER_FLAG_CLIP     0x4
  
    /* these constants are deprecated; use the corresponding */
<span class="line-modified">!   /* `FT_RASTER_FLAG_XXX` values instead                   */</span>
  #define ft_raster_flag_default  FT_RASTER_FLAG_DEFAULT
  #define ft_raster_flag_aa       FT_RASTER_FLAG_AA
  #define ft_raster_flag_direct   FT_RASTER_FLAG_DIRECT
  #define ft_raster_flag_clip     FT_RASTER_FLAG_CLIP
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Raster_Params</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure to hold the parameters used by a raster&#39;s render function,</span>
<span class="line-modified">!    *   passed as an argument to @FT_Outline_Render.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   target ::</span>
<span class="line-modified">!    *     The target bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   source ::</span>
<span class="line-modified">!    *     A pointer to the source glyph image (e.g., an @FT_Outline).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   flags ::</span>
<span class="line-modified">!    *     The rendering flags.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   gray_spans ::</span>
<span class="line-modified">!    *     The gray span drawing callback.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   black_spans ::</span>
<span class="line-modified">!    *     Unused.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bit_test ::</span>
<span class="line-modified">!    *     Unused.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bit_set ::</span>
<span class="line-modified">!    *     Unused.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   user ::</span>
<span class="line-modified">!    *     User-supplied data that is passed to each drawing callback.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   clip_box ::</span>
<span class="line-modified">!    *     An optional clipping box.  It is only used in direct rendering mode.</span>
<span class="line-modified">!    *     Note that coordinates here should be expressed in _integer_ pixels</span>
<span class="line-modified">!    *     (and not in 26.6 fixed-point units).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   An anti-aliased glyph bitmap is drawn if the @FT_RASTER_FLAG_AA bit</span>
<span class="line-modified">!    *   flag is set in the `flags` field, otherwise a monochrome bitmap is</span>
<span class="line-modified">!    *   generated.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   If the @FT_RASTER_FLAG_DIRECT bit flag is set in `flags`, the raster</span>
<span class="line-added">+    *   will call the `gray_spans` callback to draw gray pixel spans.  This</span>
<span class="line-added">+    *   allows direct composition over a pre-existing bitmap through</span>
<span class="line-added">+    *   user-provided callbacks to perform the span drawing and composition.</span>
<span class="line-added">+    *   Not supported by the monochrome rasterizer.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Raster_Params_
    {
      const FT_Bitmap*        target;
      const void*             source;
      int                     flags;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1007,178 ***</span>
      FT_BBox                 clip_box;
  
    } FT_Raster_Params;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_NewFunc                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function used to create a new raster object.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    memory :: A handle to the memory allocator.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    raster :: A handle to the new raster object.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The `memory&#39; parameter is a typeless pointer in order to avoid     */</span>
<span class="line-modified">!   /*    un-wanted dependencies on the rest of the FreeType code.  In       */</span>
<span class="line-modified">!   /*    practice, it is an @FT_Memory object, i.e., a handle to the        */</span>
<span class="line-modified">!   /*    standard FreeType memory allocator.  However, this field can be    */</span>
<span class="line-modified">!   /*    completely ignored by a given raster implementation.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Raster_NewFunc)( void*       memory,
                          FT_Raster*  raster );
  
  #define FT_Raster_New_Func  FT_Raster_NewFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_DoneFunc                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A function used to destroy a given raster object.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    raster :: A handle to the raster object.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*FT_Raster_DoneFunc)( FT_Raster  raster );
  
  #define FT_Raster_Done_Func  FT_Raster_DoneFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_ResetFunc                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    FreeType used to provide an area of memory called the `render      */</span>
<span class="line-modified">!   /*    pool&#39; available to all registered rasterizers.  This was not       */</span>
<span class="line-modified">!   /*    thread safe, however, and now FreeType never allocates this pool.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    This function is called after a new raster object is created.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    raster    :: A handle to the new raster object.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pool_base :: Previously, the address in memory of the render pool. */</span>
<span class="line-modified">!   /*                 Set this to NULL.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pool_size :: Previously, the size in bytes of the render pool.     */</span>
<span class="line-modified">!   /*                 Set this to 0.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    Rasterizers should rely on dynamic or stack allocation if they     */</span>
<span class="line-modified">!   /*    want to (a handle to the memory allocator is passed to the         */</span>
<span class="line-modified">!   /*    rasterizer constructor).                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*FT_Raster_ResetFunc)( FT_Raster       raster,
                            unsigned char*  pool_base,
                            unsigned long   pool_size );
  
  #define FT_Raster_Reset_Func  FT_Raster_ResetFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_SetModeFunc                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This function is a generic facility to change modes or attributes  */</span>
<span class="line-modified">!   /*    in a given raster.  This can be used for debugging purposes, or    */</span>
<span class="line-modified">!   /*    simply to allow implementation-specific `features&#39; in a given      */</span>
<span class="line-modified">!   /*    raster module.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    raster :: A handle to the new raster object.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    mode   :: A 4-byte tag used to name the mode or property.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    args   :: A pointer to the new mode/property to use.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef int
    (*FT_Raster_SetModeFunc)( FT_Raster      raster,
                              unsigned long  mode,
                              void*          args );
  
  #define FT_Raster_Set_Mode_Func  FT_Raster_SetModeFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    FT_Raster_RenderFunc                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Invoke a given raster to scan-convert a given glyph image into a   */</span>
<span class="line-modified">!   /*    target bitmap.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    raster :: A handle to the raster object.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    params :: A pointer to an @FT_Raster_Params structure used to      */</span>
<span class="line-modified">!   /*              store the rendering parameters.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The exact format of the source image depends on the raster&#39;s glyph */</span>
<span class="line-modified">!   /*    format defined in its @FT_Raster_Funcs structure.  It can be an    */</span>
<span class="line-modified">!   /*    @FT_Outline or anything else in order to support a large array of  */</span>
<span class="line-modified">!   /*    glyph formats.                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Note also that the render function can fail and return a           */</span>
<span class="line-modified">!   /*    `FT_Err_Unimplemented_Feature&#39; error code if the raster used does  */</span>
<span class="line-modified">!   /*    not support direct composition.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    XXX: For now, the standard raster doesn&#39;t support direct           */</span>
<span class="line-modified">!   /*         composition but this should change for the final release (see */</span>
<span class="line-removed">-   /*         the files `demos/src/ftgrays.c&#39; and `demos/src/ftgrays2.c&#39;    */</span>
<span class="line-removed">-   /*         for examples of distinct implementations that support direct  */</span>
<span class="line-removed">-   /*         composition).                                                 */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef int
    (*FT_Raster_RenderFunc)( FT_Raster                raster,
                             const FT_Raster_Params*  params );
  
  #define FT_Raster_Render_Func  FT_Raster_RenderFunc
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    FT_Raster_Funcs                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*   A structure used to describe a given raster class to the library.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    glyph_format  :: The supported glyph format for this raster.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    raster_new    :: The raster constructor.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    raster_reset  :: Used to reset the render pool within the raster.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    raster_render :: A function to render a glyph into a given bitmap. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    raster_done   :: The raster destructor.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  FT_Raster_Funcs_
    {
      FT_Glyph_Format        glyph_format;
  
      FT_Raster_NewFunc      raster_new;
<span class="line-new-header">--- 1032,186 ---</span>
      FT_BBox                 clip_box;
  
    } FT_Raster_Params;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_NewFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function used to create a new raster object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   memory ::</span>
<span class="line-modified">!    *     A handle to the memory allocator.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   raster ::</span>
<span class="line-modified">!    *     A handle to the new raster object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   Error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The `memory` parameter is a typeless pointer in order to avoid</span>
<span class="line-modified">!    *   un-wanted dependencies on the rest of the FreeType code.  In practice,</span>
<span class="line-modified">!    *   it is an @FT_Memory object, i.e., a handle to the standard FreeType</span>
<span class="line-modified">!    *   memory allocator.  However, this field can be completely ignored by a</span>
<span class="line-added">+    *   given raster implementation.</span>
<span class="line-added">+    */</span>
    typedef int
    (*FT_Raster_NewFunc)( void*       memory,
                          FT_Raster*  raster );
  
  #define FT_Raster_New_Func  FT_Raster_NewFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_DoneFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A function used to destroy a given raster object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   raster ::</span>
<span class="line-modified">!    *     A handle to the raster object.</span>
<span class="line-added">+    */</span>
    typedef void
    (*FT_Raster_DoneFunc)( FT_Raster  raster );
  
  #define FT_Raster_Done_Func  FT_Raster_DoneFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_ResetFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   FreeType used to provide an area of memory called the &#39;render pool&#39;</span>
<span class="line-modified">!    *   available to all registered rasterizers.  This was not thread safe,</span>
<span class="line-modified">!    *   however, and now FreeType never allocates this pool.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   This function is called after a new raster object is created.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   raster ::</span>
<span class="line-modified">!    *     A handle to the new raster object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pool_base ::</span>
<span class="line-modified">!    *     Previously, the address in memory of the render pool.  Set this to</span>
<span class="line-modified">!    *     `NULL`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pool_size ::</span>
<span class="line-modified">!    *     Previously, the size in bytes of the render pool.  Set this to 0.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   Rasterizers should rely on dynamic or stack allocation if they want to</span>
<span class="line-modified">!    *   (a handle to the memory allocator is passed to the rasterizer</span>
<span class="line-added">+    *   constructor).</span>
<span class="line-added">+    */</span>
    typedef void
    (*FT_Raster_ResetFunc)( FT_Raster       raster,
                            unsigned char*  pool_base,
                            unsigned long   pool_size );
  
  #define FT_Raster_Reset_Func  FT_Raster_ResetFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_SetModeFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This function is a generic facility to change modes or attributes in a</span>
<span class="line-modified">!    *   given raster.  This can be used for debugging purposes, or simply to</span>
<span class="line-modified">!    *   allow implementation-specific &#39;features&#39; in a given raster module.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   raster ::</span>
<span class="line-modified">!    *     A handle to the new raster object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   mode ::</span>
<span class="line-modified">!    *     A 4-byte tag used to name the mode or property.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   args ::</span>
<span class="line-added">+    *     A pointer to the new mode/property to use.</span>
<span class="line-added">+    */</span>
    typedef int
    (*FT_Raster_SetModeFunc)( FT_Raster      raster,
                              unsigned long  mode,
                              void*          args );
  
  #define FT_Raster_Set_Mode_Func  FT_Raster_SetModeFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   FT_Raster_RenderFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Invoke a given raster to scan-convert a given glyph image into a</span>
<span class="line-modified">!    *   target bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   raster ::</span>
<span class="line-modified">!    *     A handle to the raster object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   params ::</span>
<span class="line-modified">!    *     A pointer to an @FT_Raster_Params structure used to store the</span>
<span class="line-modified">!    *     rendering parameters.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   Error code.  0~means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The exact format of the source image depends on the raster&#39;s glyph</span>
<span class="line-modified">!    *   format defined in its @FT_Raster_Funcs structure.  It can be an</span>
<span class="line-modified">!    *   @FT_Outline or anything else in order to support a large array of</span>
<span class="line-modified">!    *   glyph formats.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Note also that the render function can fail and return a</span>
<span class="line-modified">!    *   `FT_Err_Unimplemented_Feature` error code if the raster used does not</span>
<span class="line-modified">!    *   support direct composition.</span>
<span class="line-modified">!    */</span>
    typedef int
    (*FT_Raster_RenderFunc)( FT_Raster                raster,
                             const FT_Raster_Params*  params );
  
  #define FT_Raster_Render_Func  FT_Raster_RenderFunc
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   FT_Raster_Funcs</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *  A structure used to describe a given raster class to the library.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   glyph_format ::</span>
<span class="line-modified">!    *     The supported glyph format for this raster.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   raster_new ::</span>
<span class="line-modified">!    *     The raster constructor.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   raster_reset ::</span>
<span class="line-modified">!    *     Used to reset the render pool within the raster.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   raster_render ::</span>
<span class="line-added">+    *     A function to render a glyph into a given bitmap.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   raster_done ::</span>
<span class="line-added">+    *     The raster destructor.</span>
<span class="line-added">+    */</span>
    typedef struct  FT_Raster_Funcs_
    {
      FT_Glyph_Format        glyph_format;
  
      FT_Raster_NewFunc      raster_new;
</pre>
<center><a href="ftgzip.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftincrem.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>