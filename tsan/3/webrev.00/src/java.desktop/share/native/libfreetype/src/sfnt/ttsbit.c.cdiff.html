<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/src/sfnt/ttsbit.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ttpost.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ttsbit.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/sfnt/ttsbit.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,24 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  ttsbit.c                                                               */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    TrueType and OpenType embedded bitmap support (body).                */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 2005-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 2013 by Google, Inc.                                         */</span>
<span class="line-modified">! /*  Google Author(s): Behdad Esfahbod.                                     */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DEBUG_H
  #include FT_INTERNAL_STREAM_H
<span class="line-new-header">--- 1,24 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * ttsbit.c</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   TrueType and OpenType embedded bitmap support (body).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 2005-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright 2013 by Google, Inc.</span>
<span class="line-modified">!  * Google Author(s): Behdad Esfahbod.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DEBUG_H
  #include FT_INTERNAL_STREAM_H
</pre>
<hr />
<pre>
<span class="line-old-header">*** 34,18 ***</span>
  
  #include &quot;ttmtx.h&quot;
  #include &quot;pngshim.h&quot;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* The macro FT_COMPONENT is used in trace mode.  It is an implicit      */</span>
<span class="line-modified">!   /* parameter of the FT_TRACE() and FT_ERROR() macros, used to print/log  */</span>
<span class="line-modified">!   /* messages during execution.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
  #undef  FT_COMPONENT
<span class="line-modified">! #define FT_COMPONENT  trace_ttsbit</span>
  
  
    FT_LOCAL_DEF( FT_Error )
    tt_face_load_sbit( TT_Face    face,
                       FT_Stream  stream )
<span class="line-new-header">--- 34,18 ---</span>
  
  #include &quot;ttmtx.h&quot;
  #include &quot;pngshim.h&quot;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * The macro FT_COMPONENT is used in trace mode.  It is an implicit</span>
<span class="line-modified">!    * parameter of the FT_TRACE() and FT_ERROR() macros, used to print/log</span>
<span class="line-modified">!    * messages during execution.</span>
<span class="line-modified">!    */</span>
  #undef  FT_COMPONENT
<span class="line-modified">! #define FT_COMPONENT  ttsbit</span>
  
  
    FT_LOCAL_DEF( FT_Error )
    tt_face_load_sbit( TT_Face    face,
                       FT_Stream  stream )
</pre>
<hr />
<pre>
<span class="line-old-header">*** 127,12 ***</span>
            error = FT_THROW( Invalid_File_Format );
            goto Exit;
          }
  
          /*
<span class="line-modified">!          *  Count the number of strikes available in the table.  We are a bit</span>
<span class="line-modified">!          *  paranoid there and don&#39;t trust the data.</span>
           */
          count = (FT_UInt)num_strikes;
          if ( 8 + 48UL * count &gt; table_size )
            count = (FT_UInt)( ( table_size - 8 ) / 48 );
  
<span class="line-new-header">--- 127,12 ---</span>
            error = FT_THROW( Invalid_File_Format );
            goto Exit;
          }
  
          /*
<span class="line-modified">!          * Count the number of strikes available in the table.  We are a bit</span>
<span class="line-modified">!          * paranoid there and don&#39;t trust the data.</span>
           */
          count = (FT_UInt)num_strikes;
          if ( 8 + 48UL * count &gt; table_size )
            count = (FT_UInt)( ( table_size - 8 ) / 48 );
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 180,12 ***</span>
                        &quot; sbix overlay not supported yet\n&quot;
                        &quot;                          &quot;
                        &quot; expect bad rendering results\n&quot; ));
  
          /*
<span class="line-modified">!          *  Count the number of strikes available in the table.  We are a bit</span>
<span class="line-modified">!          *  paranoid there and don&#39;t trust the data.</span>
           */
          count = (FT_UInt)num_strikes;
          if ( 8 + 4UL * count &gt; table_size )
            count = (FT_UInt)( ( table_size - 8 ) / 4 );
  
<span class="line-new-header">--- 180,12 ---</span>
                        &quot; sbix overlay not supported yet\n&quot;
                        &quot;                          &quot;
                        &quot; expect bad rendering results\n&quot; ));
  
          /*
<span class="line-modified">!          * Count the number of strikes available in the table.  We are a bit</span>
<span class="line-modified">!          * paranoid there and don&#39;t trust the data.</span>
           */
          count = (FT_UInt)num_strikes;
          if ( 8 + 4UL * count &gt; table_size )
            count = (FT_UInt)( ( table_size - 8 ) / 4 );
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1012,12 ***</span>
                  num_components == 1 ? &quot;&quot; : &quot;s&quot; ));
  
      for ( nn = 0; nn &lt; num_components; nn++ )
      {
        FT_UInt  gindex = FT_NEXT_USHORT( p );
<span class="line-modified">!       FT_Byte  dx     = FT_NEXT_BYTE( p );</span>
<span class="line-modified">!       FT_Byte  dy     = FT_NEXT_BYTE( p );</span>
  
  
        /* NB: a recursive call */
        error = tt_sbit_decoder_load_image( decoder,
                                            gindex,
<span class="line-new-header">--- 1012,12 ---</span>
                  num_components == 1 ? &quot;&quot; : &quot;s&quot; ));
  
      for ( nn = 0; nn &lt; num_components; nn++ )
      {
        FT_UInt  gindex = FT_NEXT_USHORT( p );
<span class="line-modified">!       FT_Char  dx     = FT_NEXT_CHAR( p );</span>
<span class="line-modified">!       FT_Char  dy     = FT_NEXT_CHAR( p );</span>
  
  
        /* NB: a recursive call */
        error = tt_sbit_decoder_load_image( decoder,
                                            gindex,
</pre>
<center><a href="ttpost.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ttsbit.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>