<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/include/freetype/internal/tttypes.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="t1types.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../t1tables.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/internal/tttypes.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,31 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  tttypes.h                                                              */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    Basic SFNT/TrueType type definitions and interface (specification    */</span>
<span class="line-modified">! /*    only).                                                               */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
  
  
  #ifndef TTTYPES_H_
  #define TTTYPES_H_
  
  
  #include &lt;ft2build.h&gt;
  #include FT_TRUETYPE_TABLES_H
  #include FT_INTERNAL_OBJECTS_H
  
  #ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT
  #include FT_MULTIPLE_MASTERS_H
  #endif
  
<span class="line-new-header">--- 1,32 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * tttypes.h</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   Basic SFNT/TrueType type definitions and interface (specification</span>
<span class="line-modified">!  *   only).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
  
  
  #ifndef TTTYPES_H_
  #define TTTYPES_H_
  
  
  #include &lt;ft2build.h&gt;
  #include FT_TRUETYPE_TABLES_H
  #include FT_INTERNAL_OBJECTS_H
<span class="line-added">+ #include FT_COLOR_H</span>
  
  #ifdef TT_CONFIG_OPTION_GX_VAR_SUPPORT
  #include FT_MULTIPLE_MASTERS_H
  #endif
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 44,60 ***</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TTC_HeaderRec                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    TrueType collection header.  This table contains the offsets of    */</span>
<span class="line-modified">!   /*    the font headers of each distinct TrueType face in the file.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    tag     :: Must be `ttc &#39; to indicate a TrueType collection.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    version :: The version number.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    count   :: The number of faces in the collection.  The             */</span>
<span class="line-modified">!   /*               specification says this should be an unsigned long, but */</span>
<span class="line-modified">!   /*               we use a signed long since we need the value -1 for     */</span>
<span class="line-modified">!   /*               specific purposes.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    offsets :: The offsets of the font headers, one per face.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TTC_HeaderRec_
    {
      FT_ULong   tag;
      FT_Fixed   version;
      FT_Long    count;
      FT_ULong*  offsets;
  
    } TTC_HeaderRec;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    SFNT_HeaderRec                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    SFNT file format header.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    format_tag     :: The font format tag.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_tables     :: The number of tables in file.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    search_range   :: Must be `16 * (max power of 2 &lt;= num_tables)&#39;.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    entry_selector :: Must be log2 of `search_range / 16&#39;.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    range_shift    :: Must be `num_tables * 16 - search_range&#39;.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  SFNT_HeaderRec_
    {
      FT_ULong   format_tag;
      FT_UShort  num_tables;
      FT_UShort  search_range;
<span class="line-new-header">--- 45,68 ---</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TTC_HeaderRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   TrueType collection header.  This table contains the offsets of the</span>
<span class="line-modified">!    *   font headers of each distinct TrueType face in the file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   tag ::</span>
<span class="line-modified">!    *     Must be &#39;ttc~&#39; to indicate a TrueType collection.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   version ::</span>
<span class="line-modified">!    *     The version number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   count ::</span>
<span class="line-modified">!    *     The number of faces in the collection.  The specification says this</span>
<span class="line-modified">!    *     should be an unsigned long, but we use a signed long since we need</span>
<span class="line-modified">!    *     the value -1 for specific purposes.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   offsets ::</span>
<span class="line-added">+    *     The offsets of the font headers, one per face.</span>
<span class="line-added">+    */</span>
    typedef struct  TTC_HeaderRec_
    {
      FT_ULong   tag;
      FT_Fixed   version;
      FT_Long    count;
      FT_ULong*  offsets;
  
    } TTC_HeaderRec;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   SFNT_HeaderRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   SFNT file format header.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   format_tag ::</span>
<span class="line-modified">!    *     The font format tag.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_tables ::</span>
<span class="line-modified">!    *     The number of tables in file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   search_range ::</span>
<span class="line-modified">!    *     Must be &#39;16 * (max power of 2 &lt;= num_tables)&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   entry_selector ::</span>
<span class="line-added">+    *     Must be log2 of &#39;search_range / 16&#39;.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   range_shift ::</span>
<span class="line-added">+    *     Must be &#39;num_tables * 16 - search_range&#39;.</span>
<span class="line-added">+    */</span>
    typedef struct  SFNT_HeaderRec_
    {
      FT_ULong   format_tag;
      FT_UShort  num_tables;
      FT_UShort  search_range;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 107,168 ***</span>
      FT_ULong   offset;  /* not in file */
  
    } SFNT_HeaderRec, *SFNT_Header;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_TableRec                                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    This structure describes a given table of a TrueType font.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    Tag      :: A four-bytes tag describing the table.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    CheckSum :: The table checksum.  This value can be ignored.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Offset   :: The offset of the table from the start of the TrueType */</span>
<span class="line-modified">!   /*                font in its resource.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    Length   :: The table length (in bytes).                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_TableRec_
    {
      FT_ULong  Tag;        /*        table type */
      FT_ULong  CheckSum;   /*    table checksum */
      FT_ULong  Offset;     /* table file offset */
      FT_ULong  Length;     /*      table length */
  
    } TT_TableRec, *TT_Table;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    WOFF_HeaderRec                                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    WOFF file format header.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    See                                                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*      https://www.w3.org/TR/WOFF/#WOFFHeader                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   typedef struct  WOFF_HeaderRec_</span>
<span class="line-modified">!   {</span>
<span class="line-modified">!     FT_ULong   signature;</span>
<span class="line-removed">-     FT_ULong   flavor;</span>
<span class="line-removed">-     FT_ULong   length;</span>
<span class="line-removed">-     FT_UShort  num_tables;</span>
<span class="line-removed">-     FT_UShort  reserved;</span>
<span class="line-removed">-     FT_ULong   totalSfntSize;</span>
<span class="line-removed">-     FT_UShort  majorVersion;</span>
<span class="line-removed">-     FT_UShort  minorVersion;</span>
<span class="line-removed">-     FT_ULong   metaOffset;</span>
<span class="line-removed">-     FT_ULong   metaLength;</span>
<span class="line-removed">-     FT_ULong   metaOrigLength;</span>
<span class="line-removed">-     FT_ULong   privOffset;</span>
<span class="line-removed">-     FT_ULong   privLength;</span>
<span class="line-removed">- </span>
<span class="line-removed">-   } WOFF_HeaderRec, *WOFF_Header;</span>
<span class="line-removed">- </span>
<span class="line-removed">- </span>
<span class="line-removed">-   /*************************************************************************/</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Struct&gt;                                                              */</span>
<span class="line-removed">-   /*    WOFF_TableRec                                                      */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Description&gt;                                                         */</span>
<span class="line-removed">-   /*    This structure describes a given table of a WOFF font.             */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Fields&gt;                                                              */</span>
<span class="line-removed">-   /*    Tag        :: A four-bytes tag describing the table.               */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    Offset     :: The offset of the table from the start of the WOFF   */</span>
<span class="line-removed">-   /*                  font in its resource.                                */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    CompLength :: Compressed table length (in bytes).                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    OrigLength :: Uncompressed table length (in bytes).                */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    CheckSum   :: The table checksum.  This value can be ignored.      */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    OrigOffset :: The uncompressed table file offset.  This value gets */</span>
<span class="line-removed">-   /*                  computed while constructing the (uncompressed) SFNT  */</span>
<span class="line-removed">-   /*                  header.  It is not contained in the WOFF file.       */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   typedef struct  WOFF_TableRec_</span>
<span class="line-removed">-   {</span>
<span class="line-removed">-     FT_ULong  Tag;           /* table ID                  */</span>
<span class="line-removed">-     FT_ULong  Offset;        /* table file offset         */</span>
<span class="line-removed">-     FT_ULong  CompLength;    /* compressed table length   */</span>
<span class="line-removed">-     FT_ULong  OrigLength;    /* uncompressed table length */</span>
<span class="line-removed">-     FT_ULong  CheckSum;      /* uncompressed checksum     */</span>
<span class="line-removed">- </span>
<span class="line-removed">-     FT_ULong  OrigOffset;    /* uncompressed table file offset */</span>
<span class="line-removed">-                              /* (not in the WOFF file)         */</span>
<span class="line-removed">-   } WOFF_TableRec, *WOFF_Table;</span>
<span class="line-removed">- </span>
<span class="line-removed">- </span>
<span class="line-removed">-   /*************************************************************************/</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Struct&gt;                                                              */</span>
<span class="line-removed">-   /*    TT_LongMetricsRec                                                  */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Description&gt;                                                         */</span>
<span class="line-removed">-   /*    A structure modeling the long metrics of the `hmtx&#39; and `vmtx&#39;     */</span>
<span class="line-removed">-   /*    TrueType tables.  The values are expressed in font units.          */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /* &lt;Fields&gt;                                                              */</span>
<span class="line-removed">-   /*    advance :: The advance width or height for the glyph.              */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    bearing :: The left-side or top-side bearing for the glyph.        */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct  TT_LongMetricsRec_
    {
      FT_UShort  advance;
      FT_Short   bearing;
  
    } TT_LongMetricsRec, *TT_LongMetrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    TT_ShortMetrics                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A simple type to model the short metrics of the `hmtx&#39; and `vmtx&#39;  */</span>
<span class="line-modified">!   /*    tables.                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Short  TT_ShortMetrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_NameRec                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure modeling TrueType name records.  Name records are used */</span>
<span class="line-modified">!   /*    to store important strings like family name, style name,           */</span>
<span class="line-modified">!   /*    copyright, etc. in _localized_ versions (i.e., language, encoding, */</span>
<span class="line-modified">!   /*    etc).                                                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    platformID   :: The ID of the name&#39;s encoding platform.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    encodingID   :: The platform-specific ID for the name&#39;s encoding.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    languageID   :: The platform-specific ID for the name&#39;s language.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    nameID       :: The ID specifying what kind of name this is.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stringLength :: The length of the string in bytes.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stringOffset :: The offset to the string in the `name&#39; table.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    string       :: A pointer to the string&#39;s bytes.  Note that these  */</span>
<span class="line-modified">!   /*                    are usually UTF-16 encoded characters.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_NameRec_
    {
      FT_UShort  platformID;
      FT_UShort  encodingID;
      FT_UShort  languageID;
<span class="line-new-header">--- 116,111 ---</span>
      FT_ULong   offset;  /* not in file */
  
    } SFNT_HeaderRec, *SFNT_Header;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_TableRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   This structure describes a given table of a TrueType font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   Tag ::</span>
<span class="line-modified">!    *     A four-bytes tag describing the table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   CheckSum ::</span>
<span class="line-modified">!    *     The table checksum.  This value can be ignored.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Offset ::</span>
<span class="line-modified">!    *     The offset of the table from the start of the TrueType font in its</span>
<span class="line-modified">!    *     resource.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   Length ::</span>
<span class="line-added">+    *     The table length (in bytes).</span>
<span class="line-added">+    */</span>
    typedef struct  TT_TableRec_
    {
      FT_ULong  Tag;        /*        table type */
      FT_ULong  CheckSum;   /*    table checksum */
      FT_ULong  Offset;     /* table file offset */
      FT_ULong  Length;     /*      table length */
  
    } TT_TableRec, *TT_Table;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_LongMetricsRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure modeling the long metrics of the &#39;hmtx&#39; and &#39;vmtx&#39;</span>
<span class="line-modified">!    *   TrueType tables.  The values are expressed in font units.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   advance ::</span>
<span class="line-modified">!    *     The advance width or height for the glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bearing ::</span>
<span class="line-modified">!    *     The left-side or top-side bearing for the glyph.</span>
<span class="line-modified">!    */</span>
    typedef struct  TT_LongMetricsRec_
    {
      FT_UShort  advance;
      FT_Short   bearing;
  
    } TT_LongMetricsRec, *TT_LongMetrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   TT_ShortMetrics</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A simple type to model the short metrics of the &#39;hmtx&#39; and &#39;vmtx&#39;</span>
<span class="line-modified">!    *   tables.</span>
<span class="line-modified">!    */</span>
    typedef FT_Short  TT_ShortMetrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_NameRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure modeling TrueType name records.  Name records are used to</span>
<span class="line-modified">!    *   store important strings like family name, style name, copyright,</span>
<span class="line-modified">!    *   etc. in _localized_ versions (i.e., language, encoding, etc).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   platformID ::</span>
<span class="line-modified">!    *     The ID of the name&#39;s encoding platform.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   encodingID ::</span>
<span class="line-modified">!    *     The platform-specific ID for the name&#39;s encoding.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   languageID ::</span>
<span class="line-modified">!    *     The platform-specific ID for the name&#39;s language.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   nameID ::</span>
<span class="line-modified">!    *     The ID specifying what kind of name this is.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stringLength ::</span>
<span class="line-modified">!    *     The length of the string in bytes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stringOffset ::</span>
<span class="line-added">+    *     The offset to the string in the &#39;name&#39; table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   string ::</span>
<span class="line-added">+    *     A pointer to the string&#39;s bytes.  Note that these are usually UTF-16</span>
<span class="line-added">+    *     encoded characters.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_NameRec_
    {
      FT_UShort  platformID;
      FT_UShort  encodingID;
      FT_UShort  languageID;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 282,27 ***</span>
      FT_Byte*  string;
  
    } TT_NameRec, *TT_Name;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_LangTagRec                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure modeling language tag records in SFNT `name&#39; tables,   */</span>
<span class="line-modified">!   /*    introduced in OpenType version 1.6.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    stringLength :: The length of the string in bytes.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stringOffset :: The offset to the string in the `name&#39; table.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    string       :: A pointer to the string&#39;s bytes.  Note that these  */</span>
<span class="line-modified">!   /*                    are UTF-16BE encoded characters.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct TT_LangTagRec_
    {
      FT_UShort  stringLength;
      FT_ULong   stringOffset;
  
<span class="line-new-header">--- 234,30 ---</span>
      FT_Byte*  string;
  
    } TT_NameRec, *TT_Name;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_LangTagRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure modeling language tag records in SFNT &#39;name&#39; tables,</span>
<span class="line-modified">!    *   introduced in OpenType version 1.6.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   stringLength ::</span>
<span class="line-modified">!    *     The length of the string in bytes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stringOffset ::</span>
<span class="line-modified">!    *     The offset to the string in the &#39;name&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   string ::</span>
<span class="line-added">+    *     A pointer to the string&#39;s bytes.  Note that these are UTF-16BE</span>
<span class="line-added">+    *     encoded characters.</span>
<span class="line-added">+    */</span>
    typedef struct TT_LangTagRec_
    {
      FT_UShort  stringLength;
      FT_ULong   stringOffset;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 312,34 ***</span>
      FT_Byte*  string;
  
    } TT_LangTagRec, *TT_LangTag;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_NameTableRec                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure modeling the TrueType name table.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    format            :: The format of the name table.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    numNameRecords    :: The number of names in table.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    storageOffset     :: The offset of the name table in the `name&#39;    */</span>
<span class="line-modified">!   /*                         TrueType table.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    names             :: An array of name records.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    numLangTagRecords :: The number of language tags in table.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    langTags          :: An array of language tag records.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stream            :: The file&#39;s input stream.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_NameTableRec_
    {
      FT_UShort       format;
      FT_UInt         numNameRecords;
      FT_UInt         storageOffset;
<span class="line-new-header">--- 267,40 ---</span>
      FT_Byte*  string;
  
    } TT_LangTagRec, *TT_LangTag;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_NameTableRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure modeling the TrueType name table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   format ::</span>
<span class="line-modified">!    *     The format of the name table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   numNameRecords ::</span>
<span class="line-modified">!    *     The number of names in table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   storageOffset ::</span>
<span class="line-modified">!    *     The offset of the name table in the &#39;name&#39; TrueType table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   names ::</span>
<span class="line-modified">!    *     An array of name records.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   numLangTagRecords ::</span>
<span class="line-modified">!    *     The number of language tags in table.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   langTags ::</span>
<span class="line-added">+    *     An array of language tag records.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   stream ::</span>
<span class="line-added">+    *     The file&#39;s input stream.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_NameTableRec_
    {
      FT_UShort       format;
      FT_UInt         numNameRecords;
      FT_UInt         storageOffset;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 362,25 ***</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_GaspRangeRec                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A tiny structure used to model a gasp range according to the       */</span>
<span class="line-modified">!   /*    TrueType specification.                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    maxPPEM  :: The maximum ppem value to which `gaspFlag&#39; applies.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    gaspFlag :: A flag describing the grid-fitting and anti-aliasing   */</span>
<span class="line-modified">!   /*                modes to be used.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_GaspRangeRec_
    {
      FT_UShort  maxPPEM;
      FT_UShort  gaspFlag;
  
<span class="line-new-header">--- 323,27 ---</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_GaspRangeRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A tiny structure used to model a gasp range according to the TrueType</span>
<span class="line-modified">!    *   specification.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   maxPPEM ::</span>
<span class="line-modified">!    *     The maximum ppem value to which `gaspFlag` applies.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   gaspFlag ::</span>
<span class="line-modified">!    *     A flag describing the grid-fitting and anti-aliasing modes to be</span>
<span class="line-added">+    *     used.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_GaspRangeRec_
    {
      FT_UShort  maxPPEM;
      FT_UShort  gaspFlag;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 389,26 ***</span>
  
  #define TT_GASP_GRIDFIT  0x01
  #define TT_GASP_DOGRAY   0x02
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_GaspRec                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure modeling the TrueType `gasp&#39; table used to specify     */</span>
<span class="line-modified">!   /*    grid-fitting and anti-aliasing behaviour.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    version    :: The version number.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    numRanges  :: The number of gasp ranges in table.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    gaspRanges :: An array of gasp ranges.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_Gasp_
    {
      FT_UShort     version;
      FT_UShort     numRanges;
      TT_GaspRange  gaspRanges;
<span class="line-new-header">--- 352,29 ---</span>
  
  #define TT_GASP_GRIDFIT  0x01
  #define TT_GASP_DOGRAY   0x02
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_GaspRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure modeling the TrueType &#39;gasp&#39; table used to specify</span>
<span class="line-modified">!    *   grid-fitting and anti-aliasing behaviour.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   version ::</span>
<span class="line-modified">!    *     The version number.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   numRanges ::</span>
<span class="line-modified">!    *     The number of gasp ranges in table.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   gaspRanges ::</span>
<span class="line-added">+    *     An array of gasp ranges.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_Gasp_
    {
      FT_UShort     version;
      FT_UShort     numRanges;
      TT_GaspRange  gaspRanges;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 427,37 ***</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_MetricsRec                                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used to hold the big metrics of a given glyph bitmap   */</span>
<span class="line-modified">!   /*    in a TrueType or OpenType font.  These are usually found in the    */</span>
<span class="line-modified">!   /*    `EBDT&#39; (Microsoft) or `bloc&#39; (Apple) table.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    height       :: The glyph height in pixels.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    width        :: The glyph width in pixels.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiBearingX :: The horizontal left bearing.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiBearingY :: The horizontal top bearing.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horiAdvance  :: The horizontal advance.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertBearingX :: The vertical left bearing.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertBearingY :: The vertical top bearing.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertAdvance  :: The vertical advance.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_MetricsRec_
    {
      FT_UShort  height;
      FT_UShort  width;
  
<span class="line-new-header">--- 393,45 ---</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_MetricsRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used to hold the big metrics of a given glyph bitmap in a</span>
<span class="line-modified">!    *   TrueType or OpenType font.  These are usually found in the &#39;EBDT&#39;</span>
<span class="line-modified">!    *   (Microsoft) or &#39;bloc&#39; (Apple) table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     The glyph height in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   width ::</span>
<span class="line-modified">!    *     The glyph width in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiBearingX ::</span>
<span class="line-modified">!    *     The horizontal left bearing.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiBearingY ::</span>
<span class="line-modified">!    *     The horizontal top bearing.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horiAdvance ::</span>
<span class="line-modified">!    *     The horizontal advance.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertBearingX ::</span>
<span class="line-added">+    *     The vertical left bearing.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   vertBearingY ::</span>
<span class="line-added">+    *     The vertical top bearing.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   vertAdvance ::</span>
<span class="line-added">+    *     The vertical advance.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_MetricsRec_
    {
      FT_UShort  height;
      FT_UShort  width;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 470,31 ***</span>
      FT_UShort  vertAdvance;
  
    } TT_SBit_MetricsRec, *TT_SBit_Metrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_SmallMetricsRec                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used to hold the small metrics of a given glyph bitmap */</span>
<span class="line-modified">!   /*    in a TrueType or OpenType font.  These are usually found in the    */</span>
<span class="line-modified">!   /*    `EBDT&#39; (Microsoft) or the `bdat&#39; (Apple) table.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    height   :: The glyph height in pixels.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    width    :: The glyph width in pixels.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bearingX :: The left-side bearing.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bearingY :: The top-side bearing.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    advance  :: The advance width or height.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_Small_Metrics_
    {
      FT_Byte  height;
      FT_Byte  width;
  
<span class="line-new-header">--- 444,36 ---</span>
      FT_UShort  vertAdvance;
  
    } TT_SBit_MetricsRec, *TT_SBit_Metrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_SmallMetricsRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used to hold the small metrics of a given glyph bitmap in</span>
<span class="line-modified">!    *   a TrueType or OpenType font.  These are usually found in the &#39;EBDT&#39;</span>
<span class="line-modified">!    *   (Microsoft) or the &#39;bdat&#39; (Apple) table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   height ::</span>
<span class="line-modified">!    *     The glyph height in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   width ::</span>
<span class="line-modified">!    *     The glyph width in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bearingX ::</span>
<span class="line-modified">!    *     The left-side bearing.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   bearingY ::</span>
<span class="line-added">+    *     The top-side bearing.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   advance ::</span>
<span class="line-added">+    *     The advance width or height.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_Small_Metrics_
    {
      FT_Byte  height;
      FT_Byte  width;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 503,61 ***</span>
      FT_Byte  advance;
  
    } TT_SBit_SmallMetricsRec, *TT_SBit_SmallMetrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_LineMetricsRec                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used to describe the text line metrics of a given      */</span>
<span class="line-modified">!   /*    bitmap strike, for either a horizontal or vertical layout.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    ascender                :: The ascender in pixels.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    descender               :: The descender in pixels.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    max_width               :: The maximum glyph width in pixels.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    caret_slope_enumerator  :: Rise of the caret slope, typically set  */</span>
<span class="line-modified">!   /*                               to 1 for non-italic fonts.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    caret_slope_denominator :: Rise of the caret slope, typically set  */</span>
<span class="line-modified">!   /*                               to 0 for non-italic fonts.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    caret_offset            :: Offset in pixels to move the caret for  */</span>
<span class="line-modified">!   /*                               proper positioning.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    min_origin_SB           :: Minimum of horiBearingX (resp.          */</span>
<span class="line-modified">!   /*                               vertBearingY).                          */</span>
<span class="line-modified">!   /*    min_advance_SB          :: Minimum of                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                 horizontal advance -                  */</span>
<span class="line-modified">!   /*                                   ( horiBearingX + width )            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                               resp.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                 vertical advance -                    */</span>
<span class="line-modified">!   /*                                   ( vertBearingY + height )           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    max_before_BL           :: Maximum of horiBearingY (resp.          */</span>
<span class="line-modified">!   /*                               vertBearingY).                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    min_after_BL            :: Minimum of                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                 horiBearingY - height                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                               resp.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                                 vertBearingX - width                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pads                    :: Unused (to make the size of the record  */</span>
<span class="line-modified">!   /*                               a multiple of 32 bits.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_LineMetricsRec_
    {
      FT_Char  ascender;
      FT_Char  descender;
      FT_Byte  max_width;
<span class="line-new-header">--- 482,64 ---</span>
      FT_Byte  advance;
  
    } TT_SBit_SmallMetricsRec, *TT_SBit_SmallMetrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_LineMetricsRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used to describe the text line metrics of a given bitmap</span>
<span class="line-modified">!    *   strike, for either a horizontal or vertical layout.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   ascender ::</span>
<span class="line-modified">!    *     The ascender in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   descender ::</span>
<span class="line-modified">!    *     The descender in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_width ::</span>
<span class="line-modified">!    *     The maximum glyph width in pixels.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   caret_slope_enumerator ::</span>
<span class="line-modified">!    *     Rise of the caret slope, typically set to 1 for non-italic fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   caret_slope_denominator ::</span>
<span class="line-modified">!    *     Rise of the caret slope, typically set to 0 for non-italic fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   caret_offset ::</span>
<span class="line-modified">!    *     Offset in pixels to move the caret for proper positioning.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   min_origin_SB ::</span>
<span class="line-modified">!    *     Minimum of horiBearingX (resp.  vertBearingY).</span>
<span class="line-modified">!    *   min_advance_SB ::</span>
<span class="line-modified">!    *     Minimum of</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     horizontal advance - ( horiBearingX + width )</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     resp.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     vertical advance - ( vertBearingY + height )</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_before_BL ::</span>
<span class="line-modified">!    *     Maximum of horiBearingY (resp.  vertBearingY).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   min_after_BL ::</span>
<span class="line-modified">!    *     Minimum of</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     horiBearingY - height</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     resp.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     vertBearingX - width</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   pads ::</span>
<span class="line-added">+    *     Unused (to make the size of the record a multiple of 32 bits.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_LineMetricsRec_
    {
      FT_Char  ascender;
      FT_Char  descender;
      FT_Byte  max_width;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 571,47 ***</span>
      FT_Char  pads[2];
  
    } TT_SBit_LineMetricsRec, *TT_SBit_LineMetrics;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_RangeRec                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A TrueType/OpenType subIndexTable as defined in the `EBLC&#39;         */</span>
<span class="line-modified">!   /*    (Microsoft) or `bloc&#39; (Apple) tables.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    first_glyph   :: The first glyph index in the range.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    last_glyph    :: The last glyph index in the range.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    index_format  :: The format of index table.  Valid values are 1    */</span>
<span class="line-modified">!   /*                     to 5.                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    image_format  :: The format of `EBDT&#39; image data.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    image_offset  :: The offset to image data in `EBDT&#39;.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    image_size    :: For index formats 2 and 5.  This is the size in   */</span>
<span class="line-modified">!   /*                     bytes of each glyph bitmap.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    big_metrics   :: For index formats 2 and 5.  This is the big       */</span>
<span class="line-modified">!   /*                     metrics for each glyph bitmap.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_glyphs    :: For index formats 4 and 5.  This is the number of */</span>
<span class="line-modified">!   /*                     glyphs in the code array.                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_offsets :: For index formats 1 and 3.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_codes   :: For index formats 4 and 5.                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    table_offset  :: The offset of the index table in the `EBLC&#39;       */</span>
<span class="line-modified">!   /*                     table.  Only used during strike loading.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_RangeRec_
    {
      FT_UShort           first_glyph;
      FT_UShort           last_glyph;
  
<span class="line-new-header">--- 553,57 ---</span>
      FT_Char  pads[2];
  
    } TT_SBit_LineMetricsRec, *TT_SBit_LineMetrics;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_RangeRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A TrueType/OpenType subIndexTable as defined in the &#39;EBLC&#39; (Microsoft)</span>
<span class="line-modified">!    *   or &#39;bloc&#39; (Apple) tables.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   first_glyph ::</span>
<span class="line-modified">!    *     The first glyph index in the range.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   last_glyph ::</span>
<span class="line-modified">!    *     The last glyph index in the range.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   index_format ::</span>
<span class="line-modified">!    *     The format of index table.  Valid values are 1 to 5.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   image_format ::</span>
<span class="line-modified">!    *     The format of &#39;EBDT&#39; image data.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   image_offset ::</span>
<span class="line-modified">!    *     The offset to image data in &#39;EBDT&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   image_size ::</span>
<span class="line-modified">!    *     For index formats 2 and 5.  This is the size in bytes of each glyph</span>
<span class="line-modified">!    *     bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   big_metrics ::</span>
<span class="line-modified">!    *     For index formats 2 and 5.  This is the big metrics for each glyph</span>
<span class="line-modified">!    *     bitmap.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_glyphs ::</span>
<span class="line-modified">!    *     For index formats 4 and 5.  This is the number of glyphs in the code</span>
<span class="line-modified">!    *     array.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   glyph_offsets ::</span>
<span class="line-added">+    *     For index formats 1 and 3.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   glyph_codes ::</span>
<span class="line-added">+    *     For index formats 4 and 5.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   table_offset ::</span>
<span class="line-added">+    *     The offset of the index table in the &#39;EBLC&#39; table.  Only used during</span>
<span class="line-added">+    *     strike loading.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_RangeRec_
    {
      FT_UShort           first_glyph;
      FT_UShort           last_glyph;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 629,51 ***</span>
      FT_ULong            table_offset;
  
    } TT_SBit_RangeRec, *TT_SBit_Range;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_StrikeRec                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used describe a given bitmap strike in the `EBLC&#39;      */</span>
<span class="line-modified">!   /*    (Microsoft) or `bloc&#39; (Apple) tables.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*   num_index_ranges :: The number of index ranges.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   index_ranges     :: An array of glyph index ranges.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   color_ref        :: Unused.  `color_ref&#39; is put in for future       */</span>
<span class="line-modified">!   /*                       enhancements, but these fields are already      */</span>
<span class="line-modified">!   /*                       in use by other platforms (e.g. Newton).        */</span>
<span class="line-modified">!   /*                       For details, please see                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                         https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6bloc.html */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   hori             :: The line metrics for horizontal layouts.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   vert             :: The line metrics for vertical layouts.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   start_glyph      :: The lowest glyph index for this strike.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   end_glyph        :: The highest glyph index for this strike.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   x_ppem           :: The number of horizontal pixels per EM.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   y_ppem           :: The number of vertical pixels per EM.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   bit_depth        :: The bit depth.  Valid values are 1, 2, 4,       */</span>
<span class="line-modified">!   /*                       and 8.                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   flags            :: Is this a vertical or horizontal strike?  For   */</span>
<span class="line-modified">!   /*                       details, please see                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                         https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6bloc.html */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_StrikeRec_
    {
      FT_Int                  num_ranges;
      TT_SBit_Range           sbit_ranges;
      FT_ULong                ranges_offset;
<span class="line-new-header">--- 621,59 ---</span>
      FT_ULong            table_offset;
  
    } TT_SBit_RangeRec, *TT_SBit_Range;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_StrikeRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used describe a given bitmap strike in the &#39;EBLC&#39;</span>
<span class="line-modified">!    *   (Microsoft) or &#39;bloc&#39; (Apple) tables.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *  num_index_ranges ::</span>
<span class="line-modified">!    *    The number of index ranges.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  index_ranges ::</span>
<span class="line-modified">!    *    An array of glyph index ranges.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  color_ref ::</span>
<span class="line-modified">!    *    Unused.  `color_ref` is put in for future enhancements, but these</span>
<span class="line-modified">!    *    fields are already in use by other platforms (e.g. Newton).  For</span>
<span class="line-modified">!    *    details, please see</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *    https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6bloc.html</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  hori ::</span>
<span class="line-modified">!    *    The line metrics for horizontal layouts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  vert ::</span>
<span class="line-modified">!    *    The line metrics for vertical layouts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  start_glyph ::</span>
<span class="line-modified">!    *    The lowest glyph index for this strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  end_glyph ::</span>
<span class="line-modified">!    *    The highest glyph index for this strike.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  x_ppem ::</span>
<span class="line-modified">!    *    The number of horizontal pixels per EM.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *  y_ppem ::</span>
<span class="line-modified">!    *    The number of vertical pixels per EM.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *  bit_depth ::</span>
<span class="line-added">+    *    The bit depth.  Valid values are 1, 2, 4, and 8.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *  flags ::</span>
<span class="line-added">+    *    Is this a vertical or horizontal strike?  For details, please see</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *    https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6bloc.html</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_StrikeRec_
    {
      FT_Int                  num_ranges;
      TT_SBit_Range           sbit_ranges;
      FT_ULong                ranges_offset;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 693,56 ***</span>
      FT_Char                 flags;
  
    } TT_SBit_StrikeRec, *TT_SBit_Strike;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_ComponentRec                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A simple structure to describe a compound sbit element.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    glyph_code :: The element&#39;s glyph index.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    x_offset   :: The element&#39;s left bearing.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    y_offset   :: The element&#39;s top bearing.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_ComponentRec_
    {
      FT_UShort  glyph_code;
      FT_Char    x_offset;
      FT_Char    y_offset;
  
    } TT_SBit_ComponentRec, *TT_SBit_Component;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_SBit_ScaleRec                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A structure used describe a given bitmap scaling table, as defined */</span>
<span class="line-modified">!   /*    in the `EBSC&#39; table.                                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    hori              :: The horizontal line metrics.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vert              :: The vertical line metrics.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    x_ppem            :: The number of horizontal pixels per EM.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    y_ppem            :: The number of vertical pixels per EM.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    x_ppem_substitute :: Substitution x_ppem value.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    y_ppem_substitute :: Substitution y_ppem value.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_SBit_ScaleRec_
    {
      TT_SBit_LineMetricsRec  hori;
      TT_SBit_LineMetricsRec  vert;
  
<span class="line-new-header">--- 693,65 ---</span>
      FT_Char                 flags;
  
    } TT_SBit_StrikeRec, *TT_SBit_Strike;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_ComponentRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A simple structure to describe a compound sbit element.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   glyph_code ::</span>
<span class="line-modified">!    *     The element&#39;s glyph index.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   x_offset ::</span>
<span class="line-modified">!    *     The element&#39;s left bearing.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   y_offset ::</span>
<span class="line-added">+    *     The element&#39;s top bearing.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_ComponentRec_
    {
      FT_UShort  glyph_code;
      FT_Char    x_offset;
      FT_Char    y_offset;
  
    } TT_SBit_ComponentRec, *TT_SBit_Component;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_SBit_ScaleRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A structure used describe a given bitmap scaling table, as defined in</span>
<span class="line-modified">!    *   the &#39;EBSC&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   hori ::</span>
<span class="line-modified">!    *     The horizontal line metrics.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vert ::</span>
<span class="line-modified">!    *     The vertical line metrics.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   x_ppem ::</span>
<span class="line-modified">!    *     The number of horizontal pixels per EM.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   y_ppem ::</span>
<span class="line-modified">!    *     The number of vertical pixels per EM.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   x_ppem_substitute ::</span>
<span class="line-added">+    *     Substitution x_ppem value.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   y_ppem_substitute ::</span>
<span class="line-added">+    *     Substitution y_ppem value.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_SBit_ScaleRec_
    {
      TT_SBit_LineMetricsRec  hori;
      TT_SBit_LineMetricsRec  vert;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 766,76 ***</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_Post_20Rec                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Postscript names sub-table, format 2.0.  Stores the PS name of     */</span>
<span class="line-modified">!   /*    each glyph in the font face.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    num_glyphs    :: The number of named glyphs in the table.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_names     :: The number of PS names stored in the table.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_indices :: The indices of the glyphs in the names arrays.    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_names   :: The PS names not in Mac Encoding.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_Post_20Rec_
    {
      FT_UShort   num_glyphs;
      FT_UShort   num_names;
      FT_UShort*  glyph_indices;
      FT_Char**   glyph_names;
  
    } TT_Post_20Rec, *TT_Post_20;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_Post_25Rec                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Postscript names sub-table, format 2.5.  Stores the PS name of     */</span>
<span class="line-modified">!   /*    each glyph in the font face.                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    num_glyphs :: The number of glyphs in the table.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    offsets    :: An array of signed offsets in a normal Mac           */</span>
<span class="line-modified">!   /*                  Postscript name encoding.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_Post_25_
    {
      FT_UShort  num_glyphs;
      FT_Char*   offsets;
  
    } TT_Post_25Rec, *TT_Post_25;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_Post_NamesRec                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Postscript names table, either format 2.0 or 2.5.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    loaded    :: A flag to indicate whether the PS names are loaded.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    format_20 :: The sub-table used for format 2.0.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    format_25 :: The sub-table used for format 2.5.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_Post_NamesRec_
    {
      FT_Bool  loaded;
  
      union
<span class="line-new-header">--- 775,84 ---</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_Post_20Rec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Postscript names sub-table, format 2.0.  Stores the PS name of each</span>
<span class="line-modified">!    *   glyph in the font face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   num_glyphs ::</span>
<span class="line-modified">!    *     The number of named glyphs in the table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_names ::</span>
<span class="line-modified">!    *     The number of PS names stored in the table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_indices ::</span>
<span class="line-modified">!    *     The indices of the glyphs in the names arrays.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   glyph_names ::</span>
<span class="line-added">+    *     The PS names not in Mac Encoding.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_Post_20Rec_
    {
      FT_UShort   num_glyphs;
      FT_UShort   num_names;
      FT_UShort*  glyph_indices;
      FT_Char**   glyph_names;
  
    } TT_Post_20Rec, *TT_Post_20;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_Post_25Rec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Postscript names sub-table, format 2.5.  Stores the PS name of each</span>
<span class="line-modified">!    *   glyph in the font face.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   num_glyphs ::</span>
<span class="line-modified">!    *     The number of glyphs in the table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   offsets ::</span>
<span class="line-modified">!    *     An array of signed offsets in a normal Mac Postscript name encoding.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_Post_25_
    {
      FT_UShort  num_glyphs;
      FT_Char*   offsets;
  
    } TT_Post_25Rec, *TT_Post_25;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_Post_NamesRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Postscript names table, either format 2.0 or 2.5.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   loaded ::</span>
<span class="line-modified">!    *     A flag to indicate whether the PS names are loaded.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   format_20 ::</span>
<span class="line-modified">!    *     The sub-table used for format 2.0.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   format_25 ::</span>
<span class="line-added">+    *     The sub-table used for format 2.5.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_Post_NamesRec_
    {
      FT_Bool  loaded;
  
      union
</pre>
<hr />
<pre>
<span class="line-old-header">*** 877,29 ***</span>
    /*************************************************************************/
    /*************************************************************************/
  
    /*
     * These types are used to support a `BDF &#39; table that isn&#39;t part of the
<span class="line-modified">!    * official TrueType specification.  It is mainly used in SFNT-based</span>
<span class="line-modified">!    * bitmap fonts that were generated from a set of BDF fonts.</span>
     *
     * The format of the table is as follows.
     *
<span class="line-modified">!    *   USHORT   version      `BDF &#39; table version number, should be 0x0001.</span>
<span class="line-modified">!    *   USHORT   strikeCount  Number of strikes (bitmap sizes) in this table.</span>
<span class="line-modified">!    *   ULONG    stringTable  Offset (from start of BDF table) to string</span>
     *                         table.
     *
     * This is followed by an array of `strikeCount&#39; descriptors, having the
     * following format.
     *
<span class="line-modified">!    *   USHORT   ppem         Vertical pixels per EM for this strike.</span>
<span class="line-modified">!    *   USHORT   numItems     Number of items for this strike (properties and</span>
     *                         atoms).  Maximum is 255.
     *
<span class="line-modified">!    * This array in turn is followed by `strikeCount&#39; value sets.  Each</span>
<span class="line-modified">!    * `value set&#39; is an array of `numItems&#39; items with the following format.</span>
     *
     *   ULONG    item_name    Offset in string table to item name.
     *   USHORT   item_type    The item type.  Possible values are
     *                            0 =&gt; string (e.g., COMMENT)
     *                            1 =&gt; atom   (e.g., FONT or even SIZE)
<span class="line-new-header">--- 894,29 ---</span>
    /*************************************************************************/
    /*************************************************************************/
  
    /*
     * These types are used to support a `BDF &#39; table that isn&#39;t part of the
<span class="line-modified">!    * official TrueType specification.  It is mainly used in SFNT-based bitmap</span>
<span class="line-modified">!    * fonts that were generated from a set of BDF fonts.</span>
     *
     * The format of the table is as follows.
     *
<span class="line-modified">!    *   USHORT version `BDF &#39; table version number, should be 0x0001.  USHORT</span>
<span class="line-modified">!    *   strikeCount Number of strikes (bitmap sizes) in this table.  ULONG</span>
<span class="line-modified">!    *   stringTable Offset (from start of BDF table) to string</span>
     *                         table.
     *
     * This is followed by an array of `strikeCount&#39; descriptors, having the
     * following format.
     *
<span class="line-modified">!    *   USHORT ppem Vertical pixels per EM for this strike.  USHORT numItems</span>
<span class="line-modified">!    *   Number of items for this strike (properties and</span>
     *                         atoms).  Maximum is 255.
     *
<span class="line-modified">!    * This array in turn is followed by `strikeCount&#39; value sets.  Each `value</span>
<span class="line-modified">!    * set&#39; is an array of `numItems&#39; items with the following format.</span>
     *
     *   ULONG    item_name    Offset in string table to item name.
     *   USHORT   item_type    The item type.  Possible values are
     *                            0 =&gt; string (e.g., COMMENT)
     *                            1 =&gt; atom   (e.g., FONT or even SIZE)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 943,35 ***</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* This structure/class is defined here because it is common to the      */</span>
<span class="line-modified">!   /* following formats: TTF, OpenType-TT, and OpenType-CFF.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* Note, however, that the classes TT_Size and TT_GlyphSlot are not      */</span>
<span class="line-modified">!   /* shared between font drivers, and are thus defined in `ttobjs.h&#39;.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    TT_Face                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a TrueType face/font object.  A TT_Face encapsulates   */</span>
<span class="line-modified">!   /*    the resolution and scaling independent parts of a TrueType font    */</span>
<span class="line-modified">!   /*    resource.                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The TT_Face structure is also used as a `parent class&#39; for the     */</span>
<span class="line-modified">!   /*    OpenType-CFF class (T2_Face).                                      */</span>
<span class="line-removed">-   /*                                                                       */</span>
    typedef struct TT_FaceRec_*  TT_Face;
  
  
    /* a function type used for the truetype bytecode interpreter hooks */
    typedef FT_Error
<span class="line-new-header">--- 960,34 ---</span>
    /*************************************************************************/
    /*************************************************************************/
    /*************************************************************************/
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * This structure/class is defined here because it is common to the</span>
<span class="line-modified">!    * following formats: TTF, OpenType-TT, and OpenType-CFF.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * Note, however, that the classes TT_Size and TT_GlyphSlot are not shared</span>
<span class="line-modified">!    * between font drivers, and are thus defined in `ttobjs.h`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   TT_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a TrueType face/font object.  A TT_Face encapsulates the</span>
<span class="line-modified">!    *   resolution and scaling independent parts of a TrueType font resource.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   The TT_Face structure is also used as a &#39;parent class&#39; for the</span>
<span class="line-modified">!    *   OpenType-CFF class (T2_Face).</span>
<span class="line-modified">!    */</span>
    typedef struct TT_FaceRec_*  TT_Face;
  
  
    /* a function type used for the truetype bytecode interpreter hooks */
    typedef FT_Error
</pre>
<hr />
<pre>
<span class="line-old-header">*** 979,107 ***</span>
  
    /* forward declaration */
    typedef struct TT_LoaderRec_*  TT_Loader;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Loader_GotoTableFunc                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Seeks a stream to the start of a given TrueType table.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    face   :: A handle to the target face object.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    tag    :: A 4-byte tag used to name the table.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    stream :: The input stream.                                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">!   /*    length :: The length of the table in bytes.  Set to 0 if not       */</span>
<span class="line-modified">!   /*              needed.                                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    The stream cursor must be at the font file&#39;s origin.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Loader_GotoTableFunc)( TT_Face    face,
                                FT_ULong   tag,
                                FT_Stream  stream,
                                FT_ULong*  length );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Loader_StartGlyphFunc                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Seeks a stream to the start of a given glyph element, and opens a  */</span>
<span class="line-modified">!   /*    frame for it.                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    loader      :: The current TrueType glyph loader object.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph index :: The index of the glyph to access.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    offset      :: The offset of the glyph according to the            */</span>
<span class="line-modified">!   /*                   `locations&#39; table.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    byte_count  :: The size of the frame in bytes.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">!   /*    This function is normally equivalent to FT_STREAM_SEEK(offset)     */</span>
<span class="line-modified">!   /*    followed by FT_FRAME_ENTER(byte_count) with the loader&#39;s stream,   */</span>
<span class="line-modified">!   /*    but alternative formats (e.g. compressed ones) might use something */</span>
<span class="line-modified">!   /*    different.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Loader_StartGlyphFunc)( TT_Loader  loader,
                                 FT_UInt    glyph_index,
                                 FT_ULong   offset,
                                 FT_UInt    byte_count );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Loader_ReadGlyphFunc                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Reads one glyph element (its header, a simple glyph, or a          */</span>
<span class="line-modified">!   /*    composite) from the loader&#39;s current stream frame.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    loader :: The current TrueType glyph loader object.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">!   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef FT_Error
    (*TT_Loader_ReadGlyphFunc)( TT_Loader  loader );
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">!   /*    TT_Loader_EndGlyphFunc                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Closes the current loader stream frame for the glyph.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">!   /*    loader :: The current TrueType glyph loader object.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef void
    (*TT_Loader_EndGlyphFunc)( TT_Loader  loader );
  
  
    typedef enum TT_SbitTableType_
<span class="line-new-header">--- 995,114 ---</span>
  
    /* forward declaration */
    typedef struct TT_LoaderRec_*  TT_Loader;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Loader_GotoTableFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Seeks a stream to the start of a given TrueType table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   face ::</span>
<span class="line-modified">!    *     A handle to the target face object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   tag ::</span>
<span class="line-modified">!    *     A 4-byte tag used to name the table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   stream ::</span>
<span class="line-modified">!    *     The input stream.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @output:</span>
<span class="line-modified">!    *   length ::</span>
<span class="line-modified">!    *     The length of the table in bytes.  Set to 0 if not needed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    * @note:</span>
<span class="line-added">+    *   The stream cursor must be at the font file&#39;s origin.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Loader_GotoTableFunc)( TT_Face    face,
                                FT_ULong   tag,
                                FT_Stream  stream,
                                FT_ULong*  length );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Loader_StartGlyphFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Seeks a stream to the start of a given glyph element, and opens a</span>
<span class="line-modified">!    *   frame for it.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   loader ::</span>
<span class="line-modified">!    *     The current TrueType glyph loader object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     glyph index :: The index of the glyph to access.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   offset ::</span>
<span class="line-modified">!    *     The offset of the glyph according to the &#39;locations&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   byte_count ::</span>
<span class="line-modified">!    *     The size of the frame in bytes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @note:</span>
<span class="line-modified">!    *   This function is normally equivalent to FT_STREAM_SEEK(offset)</span>
<span class="line-modified">!    *   followed by FT_FRAME_ENTER(byte_count) with the loader&#39;s stream, but</span>
<span class="line-modified">!    *   alternative formats (e.g. compressed ones) might use something</span>
<span class="line-added">+    *   different.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Loader_StartGlyphFunc)( TT_Loader  loader,
                                 FT_UInt    glyph_index,
                                 FT_ULong   offset,
                                 FT_UInt    byte_count );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Loader_ReadGlyphFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Reads one glyph element (its header, a simple glyph, or a composite)</span>
<span class="line-modified">!    *   from the loader&#39;s current stream frame.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   loader ::</span>
<span class="line-modified">!    *     The current TrueType glyph loader object.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @return:</span>
<span class="line-modified">!    *   FreeType error code.  0 means success.</span>
<span class="line-added">+    */</span>
    typedef FT_Error
    (*TT_Loader_ReadGlyphFunc)( TT_Loader  loader );
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @functype:</span>
<span class="line-modified">!    *   TT_Loader_EndGlyphFunc</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Closes the current loader stream frame for the glyph.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @input:</span>
<span class="line-modified">!    *   loader ::</span>
<span class="line-modified">!    *     The current TrueType glyph loader object.</span>
<span class="line-added">+    */</span>
    typedef void
    (*TT_Loader_EndGlyphFunc)( TT_Loader  loader );
  
  
    typedef enum TT_SbitTableType_
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1122,274 ***</span>
  
    /* MVAR */
  #define TT_FACE_FLAG_VAR_MVAR  ( 1 &lt;&lt; 8 )
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*                         TrueType Face Type                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">!   /*    TT_Face                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    The TrueType face class.  These objects model the resolution and   */</span>
<span class="line-modified">!   /*    point-size independent data found in a TrueType font file.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">!   /*    root                 :: The base FT_Face structure, managed by the */</span>
<span class="line-modified">!   /*                            base layer.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    ttc_header           :: The TrueType collection header, used when  */</span>
<span class="line-modified">!   /*                            the file is a `ttc&#39; rather than a `ttf&#39;.   */</span>
<span class="line-modified">!   /*                            For ordinary font files, the field         */</span>
<span class="line-modified">!   /*                            `ttc_header.count&#39; is set to 0.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    format_tag           :: The font format tag.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_tables           :: The number of TrueType tables in this font */</span>
<span class="line-modified">!   /*                            file.                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    dir_tables           :: The directory of TrueType tables for this  */</span>
<span class="line-modified">!   /*                            font file.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    header               :: The font&#39;s font header (`head&#39; table).     */</span>
<span class="line-modified">!   /*                            Read on font opening.                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horizontal           :: The font&#39;s horizontal header (`hhea&#39;       */</span>
<span class="line-modified">!   /*                            table).  This field also contains the      */</span>
<span class="line-modified">!   /*                            associated horizontal metrics table        */</span>
<span class="line-modified">!   /*                            (`hmtx&#39;).                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    max_profile          :: The font&#39;s maximum profile table.  Read on */</span>
<span class="line-modified">!   /*                            font opening.  Note that some maximum      */</span>
<span class="line-modified">!   /*                            values cannot be taken directly from this  */</span>
<span class="line-modified">!   /*                            table.  We thus define additional fields   */</span>
<span class="line-modified">!   /*                            below to hold the computed maxima.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertical_info        :: A boolean which is set when the font file  */</span>
<span class="line-modified">!   /*                            contains vertical metrics.  If not, the    */</span>
<span class="line-modified">!   /*                            value of the `vertical&#39; field is           */</span>
<span class="line-modified">!   /*                            undefined.                                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vertical             :: The font&#39;s vertical header (`vhea&#39; table). */</span>
<span class="line-modified">!   /*                            This field also contains the associated    */</span>
<span class="line-modified">!   /*                            vertical metrics table (`vmtx&#39;), if found. */</span>
<span class="line-modified">!   /*                            IMPORTANT: The contents of this field is   */</span>
<span class="line-modified">!   /*                            undefined if the `vertical_info&#39; field is  */</span>
<span class="line-modified">!   /*                            unset.                                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_names            :: The number of name records within this     */</span>
<span class="line-modified">!   /*                            TrueType font.                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    name_table           :: The table of name records (`name&#39;).        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    os2                  :: The font&#39;s OS/2 table (`OS/2&#39;).            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    postscript           :: The font&#39;s PostScript table (`post&#39;        */</span>
<span class="line-modified">!   /*                            table).  The PostScript glyph names are    */</span>
<span class="line-modified">!   /*                            not loaded by the driver on face opening.  */</span>
<span class="line-modified">!   /*                            See the `ttpost&#39; module for more details.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cmap_table           :: Address of the face&#39;s `cmap&#39; SFNT table    */</span>
<span class="line-modified">!   /*                            in memory (it&#39;s an extracted frame).       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cmap_size            :: The size in bytes of the `cmap_table&#39;      */</span>
<span class="line-modified">!   /*                            described above.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    goto_table           :: A function called by each TrueType table   */</span>
<span class="line-modified">!   /*                            loader to position a stream&#39;s cursor to    */</span>
<span class="line-modified">!   /*                            the start of a given table according to    */</span>
<span class="line-modified">!   /*                            its tag.  It defaults to TT_Goto_Face but  */</span>
<span class="line-modified">!   /*                            can be different for strange formats (e.g. */</span>
<span class="line-modified">!   /*                            Type 42).                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    access_glyph_frame   :: A function used to access the frame of a   */</span>
<span class="line-modified">!   /*                            given glyph within the face&#39;s font file.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    forget_glyph_frame   :: A function used to forget the frame of a   */</span>
<span class="line-modified">!   /*                            given glyph when all data has been loaded. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    read_glyph_header    :: A function used to read a glyph header.    */</span>
<span class="line-modified">!   /*                            It must be called between an `access&#39; and  */</span>
<span class="line-modified">!   /*                            `forget&#39;.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    read_simple_glyph    :: A function used to read a simple glyph.    */</span>
<span class="line-modified">!   /*                            It must be called after the header was     */</span>
<span class="line-modified">!   /*                            read, and before the `forget&#39;.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    read_composite_glyph :: A function used to read a composite glyph. */</span>
<span class="line-modified">!   /*                            It must be called after the header was     */</span>
<span class="line-modified">!   /*                            read, and before the `forget&#39;.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sfnt                 :: A pointer to the SFNT service.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    psnames              :: A pointer to the PostScript names service. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    mm                   :: A pointer to the Multiple Masters service. */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    var                  :: A pointer to the Metrics Variations        */</span>
<span class="line-modified">!   /*                            service.                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    hdmx                 :: The face&#39;s horizontal device metrics       */</span>
<span class="line-modified">!   /*                            (`hdmx&#39; table).  This table is optional in */</span>
<span class="line-modified">!   /*                            TrueType/OpenType fonts.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    gasp                 :: The grid-fitting and scaling properties    */</span>
<span class="line-modified">!   /*                            table (`gasp&#39;).  This table is optional in */</span>
<span class="line-modified">!   /*                            TrueType/OpenType fonts.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    pclt                 :: The `pclt&#39; SFNT table.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_sbit_scales      :: The number of sbit scales for this font.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sbit_scales          :: Array of sbit scales embedded in this      */</span>
<span class="line-modified">!   /*                            font.  This table is optional in a         */</span>
<span class="line-modified">!   /*                            TrueType/OpenType font.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    postscript_names     :: A table used to store the Postscript names */</span>
<span class="line-modified">!   /*                            of  the glyphs for this font.  See the     */</span>
<span class="line-modified">!   /*                            file  `ttconfig.h&#39; for comments on the     */</span>
<span class="line-modified">!   /*                            TT_CONFIG_OPTION_POSTSCRIPT_NAMES option.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    font_program_size    :: Size in bytecodes of the face&#39;s font       */</span>
<span class="line-modified">!   /*                            program.  0 if none defined.  Ignored for  */</span>
<span class="line-modified">!   /*                            Type 2 fonts.                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    font_program         :: The face&#39;s font program (bytecode stream)  */</span>
<span class="line-modified">!   /*                            executed at load time, also used during    */</span>
<span class="line-modified">!   /*                            glyph rendering.  Comes from the `fpgm&#39;    */</span>
<span class="line-modified">!   /*                            table.  Ignored for Type 2 font fonts.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cvt_program_size     :: The size in bytecodes of the face&#39;s cvt    */</span>
<span class="line-modified">!   /*                            program.  Ignored for Type 2 fonts.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cvt_program          :: The face&#39;s cvt program (bytecode stream)   */</span>
<span class="line-modified">!   /*                            executed each time an instance/size is     */</span>
<span class="line-modified">!   /*                            changed/reset.  Comes from the `prep&#39;      */</span>
<span class="line-modified">!   /*                            table.  Ignored for Type 2 fonts.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cvt_size             :: Size of the control value table (in        */</span>
<span class="line-modified">!   /*                            entries).   Ignored for Type 2 fonts.      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    cvt                  :: The face&#39;s original control value table.   */</span>
<span class="line-modified">!   /*                            Coordinates are expressed in unscaled font */</span>
<span class="line-modified">!   /*                            units.  Comes from the `cvt &#39; table.       */</span>
<span class="line-modified">!   /*                            Ignored for Type 2 fonts.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    interpreter          :: A pointer to the TrueType bytecode         */</span>
<span class="line-modified">!   /*                            interpreters field is also used to hook    */</span>
<span class="line-modified">!   /*                            the debugger in `ttdebug&#39;.                 */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    extra                :: Reserved for third-party font drivers.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    postscript_name      :: The PS name of the font.  Used by the      */</span>
<span class="line-modified">!   /*                            postscript name service.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyf_len             :: The length of the `glyf&#39; table.  Needed    */</span>
<span class="line-modified">!   /*                            for malformed `loca&#39; tables.               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyf_offset          :: The file offset of the `glyf&#39; table.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    is_cff2              :: Set if the font format is CFF2.            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    doblend              :: A boolean which is set if the font should  */</span>
<span class="line-modified">!   /*                            be blended (this is for GX var).           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    blend                :: Contains the data needed to control GX     */</span>
<span class="line-modified">!   /*                            variation tables (rather like Multiple     */</span>
<span class="line-modified">!   /*                            Master data).                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    variation_support    :: Flags that indicate which OpenType         */</span>
<span class="line-modified">!   /*                            functionality related to font variation    */</span>
<span class="line-modified">!   /*                            support is present, valid, and usable.     */</span>
<span class="line-modified">!   /*                            For example, TT_FACE_FLAG_VAR_FVAR is only */</span>
<span class="line-modified">!   /*                            set if we have at least one design axis.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    var_postscript_prefix ::                                           */</span>
<span class="line-modified">!   /*                            The PostScript name prefix needed for      */</span>
<span class="line-modified">!   /*                            constructing a variation font instance&#39;s   */</span>
<span class="line-modified">!   /*                            PS name .                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    var_postscript_prefix_len ::                                       */</span>
<span class="line-modified">!   /*                            The length of the `var_postscript_prefix&#39;  */</span>
<span class="line-modified">!   /*                            string.                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horz_metrics_size    :: The size of the `hmtx&#39; table.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vert_metrics_size    :: The size of the `vmtx&#39; table.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_locations        :: The number of glyph locations in this      */</span>
<span class="line-modified">!   /*                            TrueType file.  This should be             */</span>
<span class="line-modified">!   /*                            identical to the number of glyphs.         */</span>
<span class="line-modified">!   /*                            Ignored for Type 2 fonts.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    glyph_locations      :: An array of longs.  These are offsets to   */</span>
<span class="line-modified">!   /*                            glyph data within the `glyf&#39; table.        */</span>
<span class="line-modified">!   /*                            Ignored for Type 2 font faces.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    hdmx_table           :: A pointer to the `hdmx&#39; table.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    hdmx_table_size      :: The size of the `hdmx&#39; table.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    hdmx_record_count    :: The number of hdmx records.                */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    hdmx_record_size     :: The size of a single hdmx record.          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    hdmx_record_sizes    :: An array holding the ppem sizes available  */</span>
<span class="line-modified">!   /*                            in the `hdmx&#39; table.                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sbit_table           :: A pointer to the font&#39;s embedded bitmap    */</span>
<span class="line-modified">!   /*                            location table.                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sbit_table_size      :: The size of `sbit_table&#39;.                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sbit_table_type      :: The sbit table type (CBLC, sbix, etc.).    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sbit_num_strikes     :: The number of sbit strikes exposed by      */</span>
<span class="line-modified">!   /*                            FreeType&#39;s API, omitting invalid strikes.  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sbit_strike_map      :: A mapping between the strike indices       */</span>
<span class="line-modified">!   /*                            exposed by the API and the indices used in */</span>
<span class="line-modified">!   /*                            the font&#39;s sbit table.                     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    kern_table           :: A pointer to the `kern&#39; table.             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    kern_table_size      :: The size of the `kern&#39; table.              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    num_kern_tables      :: The number of supported kern subtables     */</span>
<span class="line-modified">!   /*                            (up to 32; FreeType recognizes only        */</span>
<span class="line-modified">!   /*                            horizontal ones with format 0).            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    kern_avail_bits      :: The availability status of kern subtables; */</span>
<span class="line-modified">!   /*                            if bit n is set, table n is available.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    kern_order_bits      :: The sortedness status of kern subtables;   */</span>
<span class="line-modified">!   /*                            if bit n is set, table n is sorted.        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    bdf                  :: Data related to an SFNT font&#39;s `bdf&#39;       */</span>
<span class="line-modified">!   /*                            table; see `tttypes.h&#39;.                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    horz_metrics_offset  :: The file offset of the `hmtx&#39; table.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    vert_metrics_offset  :: The file offset of the `vmtx&#39; table.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sph_found_func_flags :: Flags identifying special bytecode         */</span>
<span class="line-modified">!   /*                            functions (used by the v38 implementation  */</span>
<span class="line-modified">!   /*                            of the bytecode interpreter).              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    sph_compatibility_mode ::                                          */</span>
<span class="line-modified">!   /*                            This flag is set if we are in ClearType    */</span>
<span class="line-modified">!   /*                            backward compatibility mode (used by the   */</span>
<span class="line-modified">!   /*                            v38 implementation of the bytecode         */</span>
<span class="line-modified">!   /*                            interpreter).                              */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    ebdt_start           :: The file offset of the sbit data table     */</span>
<span class="line-modified">!   /*                            (CBDT, bdat, etc.).                        */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    ebdt_size            :: The size of the sbit data table.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_FaceRec_
    {
      FT_FaceRec            root;
  
      TTC_HeaderRec         ttc_header;
<span class="line-new-header">--- 1145,323 ---</span>
  
    /* MVAR */
  #define TT_FACE_FLAG_VAR_MVAR  ( 1 &lt;&lt; 8 )
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *                        TrueType Face Type</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *   TT_Face</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   The TrueType face class.  These objects model the resolution and</span>
<span class="line-modified">!    *   point-size independent data found in a TrueType font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   root ::</span>
<span class="line-modified">!    *     The base FT_Face structure, managed by the base layer.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   ttc_header ::</span>
<span class="line-modified">!    *     The TrueType collection header, used when the file is a &#39;ttc&#39; rather</span>
<span class="line-modified">!    *     than a &#39;ttf&#39;.  For ordinary font files, the field `ttc_header.count`</span>
<span class="line-modified">!    *     is set to 0.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   format_tag ::</span>
<span class="line-modified">!    *     The font format tag.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_tables ::</span>
<span class="line-modified">!    *     The number of TrueType tables in this font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   dir_tables ::</span>
<span class="line-modified">!    *     The directory of TrueType tables for this font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   header ::</span>
<span class="line-modified">!    *     The font&#39;s font header (&#39;head&#39; table).  Read on font opening.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horizontal ::</span>
<span class="line-modified">!    *     The font&#39;s horizontal header (&#39;hhea&#39; table).  This field also</span>
<span class="line-modified">!    *     contains the associated horizontal metrics table (&#39;hmtx&#39;).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_profile ::</span>
<span class="line-modified">!    *     The font&#39;s maximum profile table.  Read on font opening.  Note that</span>
<span class="line-modified">!    *     some maximum values cannot be taken directly from this table.  We</span>
<span class="line-modified">!    *     thus define additional fields below to hold the computed maxima.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertical_info ::</span>
<span class="line-modified">!    *     A boolean which is set when the font file contains vertical metrics.</span>
<span class="line-modified">!    *     If not, the value of the &#39;vertical&#39; field is undefined.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vertical ::</span>
<span class="line-modified">!    *     The font&#39;s vertical header (&#39;vhea&#39; table).  This field also contains</span>
<span class="line-modified">!    *     the associated vertical metrics table (&#39;vmtx&#39;), if found.</span>
<span class="line-modified">!    *     IMPORTANT: The contents of this field is undefined if the</span>
<span class="line-modified">!    *     `vertical_info` field is unset.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_names ::</span>
<span class="line-modified">!    *     The number of name records within this TrueType font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   name_table ::</span>
<span class="line-modified">!    *     The table of name records (&#39;name&#39;).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   os2 ::</span>
<span class="line-modified">!    *     The font&#39;s OS/2 table (&#39;OS/2&#39;).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   postscript ::</span>
<span class="line-modified">!    *     The font&#39;s PostScript table (&#39;post&#39; table).  The PostScript glyph</span>
<span class="line-modified">!    *     names are not loaded by the driver on face opening.  See the</span>
<span class="line-modified">!    *     &#39;ttpost&#39; module for more details.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cmap_table ::</span>
<span class="line-modified">!    *     Address of the face&#39;s &#39;cmap&#39; SFNT table in memory (it&#39;s an extracted</span>
<span class="line-modified">!    *     frame).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cmap_size ::</span>
<span class="line-modified">!    *     The size in bytes of the `cmap_table` described above.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   goto_table ::</span>
<span class="line-modified">!    *     A function called by each TrueType table loader to position a</span>
<span class="line-modified">!    *     stream&#39;s cursor to the start of a given table according to its tag.</span>
<span class="line-modified">!    *     It defaults to TT_Goto_Face but can be different for strange formats</span>
<span class="line-modified">!    *     (e.g.  Type 42).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   access_glyph_frame ::</span>
<span class="line-modified">!    *     A function used to access the frame of a given glyph within the</span>
<span class="line-modified">!    *     face&#39;s font file.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   forget_glyph_frame ::</span>
<span class="line-modified">!    *     A function used to forget the frame of a given glyph when all data</span>
<span class="line-modified">!    *     has been loaded.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   read_glyph_header ::</span>
<span class="line-modified">!    *     A function used to read a glyph header.  It must be called between</span>
<span class="line-modified">!    *     an &#39;access&#39; and &#39;forget&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   read_simple_glyph ::</span>
<span class="line-modified">!    *     A function used to read a simple glyph.  It must be called after the</span>
<span class="line-modified">!    *     header was read, and before the &#39;forget&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   read_composite_glyph ::</span>
<span class="line-modified">!    *     A function used to read a composite glyph.  It must be called after</span>
<span class="line-modified">!    *     the header was read, and before the &#39;forget&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sfnt ::</span>
<span class="line-modified">!    *     A pointer to the SFNT service.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   psnames ::</span>
<span class="line-modified">!    *     A pointer to the PostScript names service.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   mm ::</span>
<span class="line-modified">!    *     A pointer to the Multiple Masters service.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   var ::</span>
<span class="line-modified">!    *     A pointer to the Metrics Variations service.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   hdmx ::</span>
<span class="line-modified">!    *     The face&#39;s horizontal device metrics (&#39;hdmx&#39; table).  This table is</span>
<span class="line-modified">!    *     optional in TrueType/OpenType fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   gasp ::</span>
<span class="line-modified">!    *     The grid-fitting and scaling properties table (&#39;gasp&#39;).  This table</span>
<span class="line-modified">!    *     is optional in TrueType/OpenType fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   pclt ::</span>
<span class="line-modified">!    *     The &#39;pclt&#39; SFNT table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_sbit_scales ::</span>
<span class="line-modified">!    *     The number of sbit scales for this font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sbit_scales ::</span>
<span class="line-modified">!    *     Array of sbit scales embedded in this font.  This table is optional</span>
<span class="line-modified">!    *     in a TrueType/OpenType font.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   postscript_names ::</span>
<span class="line-modified">!    *     A table used to store the Postscript names of the glyphs for this</span>
<span class="line-modified">!    *     font.  See the file `ttconfig.h` for comments on the</span>
<span class="line-modified">!    *     TT_CONFIG_OPTION_POSTSCRIPT_NAMES option.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   palette_data ::</span>
<span class="line-modified">!    *     Some fields from the &#39;CPAL&#39; table that are directly indexed.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   palette_index ::</span>
<span class="line-modified">!    *     The current palette index, as set by @FT_Palette_Select.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   palette ::</span>
<span class="line-modified">!    *     An array containing the current palette&#39;s colors.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   have_foreground_color ::</span>
<span class="line-modified">!    *     There was a call to @FT_Palette_Set_Foreground_Color.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   foreground_color ::</span>
<span class="line-modified">!    *     The current foreground color corresponding to &#39;CPAL&#39; color index</span>
<span class="line-modified">!    *     0xFFFF.  Only valid if `have_foreground_color` is set.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   font_program_size ::</span>
<span class="line-modified">!    *     Size in bytecodes of the face&#39;s font program.  0 if none defined.</span>
<span class="line-modified">!    *     Ignored for Type 2 fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   font_program ::</span>
<span class="line-modified">!    *     The face&#39;s font program (bytecode stream) executed at load time,</span>
<span class="line-modified">!    *     also used during glyph rendering.  Comes from the &#39;fpgm&#39; table.</span>
<span class="line-modified">!    *     Ignored for Type 2 font fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cvt_program_size ::</span>
<span class="line-modified">!    *     The size in bytecodes of the face&#39;s cvt program.  Ignored for Type 2</span>
<span class="line-modified">!    *     fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cvt_program ::</span>
<span class="line-modified">!    *     The face&#39;s cvt program (bytecode stream) executed each time an</span>
<span class="line-modified">!    *     instance/size is changed/reset.  Comes from the &#39;prep&#39; table.</span>
<span class="line-modified">!    *     Ignored for Type 2 fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cvt_size ::</span>
<span class="line-modified">!    *     Size of the control value table (in entries).  Ignored for Type 2</span>
<span class="line-modified">!    *     fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cvt ::</span>
<span class="line-modified">!    *     The face&#39;s original control value table.  Coordinates are expressed</span>
<span class="line-modified">!    *     in unscaled font units (in 26.6 format).  Comes from the &#39;cvt~&#39;</span>
<span class="line-modified">!    *     table.  Ignored for Type 2 fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *     If varied by the `CVAR&#39; table, non-integer values are possible.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   interpreter ::</span>
<span class="line-modified">!    *     A pointer to the TrueType bytecode interpreters field is also used</span>
<span class="line-modified">!    *     to hook the debugger in &#39;ttdebug&#39;.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   extra ::</span>
<span class="line-modified">!    *     Reserved for third-party font drivers.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   postscript_name ::</span>
<span class="line-modified">!    *     The PS name of the font.  Used by the postscript name service.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyf_len ::</span>
<span class="line-modified">!    *     The length of the &#39;glyf&#39; table.  Needed for malformed &#39;loca&#39; tables.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyf_offset ::</span>
<span class="line-modified">!    *     The file offset of the &#39;glyf&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   is_cff2 ::</span>
<span class="line-modified">!    *     Set if the font format is CFF2.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   doblend ::</span>
<span class="line-modified">!    *     A boolean which is set if the font should be blended (this is for GX</span>
<span class="line-modified">!    *     var).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   blend ::</span>
<span class="line-modified">!    *     Contains the data needed to control GX variation tables (rather like</span>
<span class="line-modified">!    *     Multiple Master data).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   variation_support ::</span>
<span class="line-modified">!    *     Flags that indicate which OpenType functionality related to font</span>
<span class="line-modified">!    *     variation support is present, valid, and usable.  For example,</span>
<span class="line-modified">!    *     TT_FACE_FLAG_VAR_FVAR is only set if we have at least one design</span>
<span class="line-modified">!    *     axis.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   var_postscript_prefix ::</span>
<span class="line-modified">!    *     The PostScript name prefix needed for constructing a variation font</span>
<span class="line-modified">!    *     instance&#39;s PS name .</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   var_postscript_prefix_len ::</span>
<span class="line-modified">!    *     The length of the `var_postscript_prefix` string.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   horz_metrics_size ::</span>
<span class="line-modified">!    *     The size of the &#39;hmtx&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   vert_metrics_size ::</span>
<span class="line-modified">!    *     The size of the &#39;vmtx&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   num_locations ::</span>
<span class="line-modified">!    *     The number of glyph locations in this TrueType file.  This should be</span>
<span class="line-modified">!    *     identical to the number of glyphs.  Ignored for Type 2 fonts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   glyph_locations ::</span>
<span class="line-modified">!    *     An array of longs.  These are offsets to glyph data within the</span>
<span class="line-modified">!    *     &#39;glyf&#39; table.  Ignored for Type 2 font faces.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   hdmx_table ::</span>
<span class="line-modified">!    *     A pointer to the &#39;hdmx&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   hdmx_table_size ::</span>
<span class="line-modified">!    *     The size of the &#39;hdmx&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   hdmx_record_count ::</span>
<span class="line-modified">!    *     The number of hdmx records.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   hdmx_record_size ::</span>
<span class="line-modified">!    *     The size of a single hdmx record.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   hdmx_record_sizes ::</span>
<span class="line-modified">!    *     An array holding the ppem sizes available in the &#39;hdmx&#39; table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sbit_table ::</span>
<span class="line-modified">!    *     A pointer to the font&#39;s embedded bitmap location table.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sbit_table_size ::</span>
<span class="line-modified">!    *     The size of `sbit_table`.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sbit_table_type ::</span>
<span class="line-modified">!    *     The sbit table type (CBLC, sbix, etc.).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sbit_num_strikes ::</span>
<span class="line-modified">!    *     The number of sbit strikes exposed by FreeType&#39;s API, omitting</span>
<span class="line-modified">!    *     invalid strikes.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   sbit_strike_map ::</span>
<span class="line-modified">!    *     A mapping between the strike indices exposed by the API and the</span>
<span class="line-modified">!    *     indices used in the font&#39;s sbit table.</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   cpal ::</span>
<span class="line-added">+    *     A pointer to data related to the &#39;CPAL&#39; table.  `NULL` if the table</span>
<span class="line-added">+    *     is not available.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   colr ::</span>
<span class="line-added">+    *     A pointer to data related to the &#39;COLR&#39; table.  `NULL` if the table</span>
<span class="line-added">+    *     is not available.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   kern_table ::</span>
<span class="line-added">+    *     A pointer to the &#39;kern&#39; table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   kern_table_size ::</span>
<span class="line-added">+    *     The size of the &#39;kern&#39; table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   num_kern_tables ::</span>
<span class="line-added">+    *     The number of supported kern subtables (up to 32; FreeType</span>
<span class="line-added">+    *     recognizes only horizontal ones with format 0).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   kern_avail_bits ::</span>
<span class="line-added">+    *     The availability status of kern subtables; if bit n is set, table n</span>
<span class="line-added">+    *     is available.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   kern_order_bits ::</span>
<span class="line-added">+    *     The sortedness status of kern subtables; if bit n is set, table n is</span>
<span class="line-added">+    *     sorted.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   bdf ::</span>
<span class="line-added">+    *     Data related to an SFNT font&#39;s &#39;bdf&#39; table; see `tttypes.h`.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   horz_metrics_offset ::</span>
<span class="line-added">+    *     The file offset of the &#39;hmtx&#39; table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   vert_metrics_offset ::</span>
<span class="line-added">+    *     The file offset of the &#39;vmtx&#39; table.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   sph_found_func_flags ::</span>
<span class="line-added">+    *     Flags identifying special bytecode functions (used by the v38</span>
<span class="line-added">+    *     implementation of the bytecode interpreter).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   sph_compatibility_mode ::</span>
<span class="line-added">+    *     This flag is set if we are in ClearType backward compatibility mode</span>
<span class="line-added">+    *     (used by the v38 implementation of the bytecode interpreter).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   ebdt_start ::</span>
<span class="line-added">+    *     The file offset of the sbit data table (CBDT, bdat, etc.).</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   ebdt_size ::</span>
<span class="line-added">+    *     The size of the sbit data table.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_FaceRec_
    {
      FT_FaceRec            root;
  
      TTC_HeaderRec         ttc_header;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1443,15 ***</span>
  
      /* a typeless pointer to the PostScript Aux service */
      void*                 psaux;
  
  
<span class="line-modified">!     /***********************************************************************/</span>
<span class="line-modified">!     /*                                                                     */</span>
<span class="line-modified">!     /* Optional TrueType/OpenType tables                                   */</span>
<span class="line-modified">!     /*                                                                     */</span>
<span class="line-modified">!     /***********************************************************************/</span>
  
      /* grid-fitting and scaling table */
      TT_GaspRec            gasp;                 /* the `gasp&#39; table */
  
      /* PCL 5 table */
<span class="line-new-header">--- 1515,15 ---</span>
  
      /* a typeless pointer to the PostScript Aux service */
      void*                 psaux;
  
  
<span class="line-modified">!     /************************************************************************</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * Optional TrueType/OpenType tables</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      */</span>
  
      /* grid-fitting and scaling table */
      TT_GaspRec            gasp;                 /* the `gasp&#39; table */
  
      /* PCL 5 table */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1462,16 ***</span>
      TT_SBit_Scale         sbit_scales;
  
      /* postscript names table */
      TT_Post_NamesRec      postscript_names;
  
  
<span class="line-modified">!     /***********************************************************************/</span>
<span class="line-modified">!     /*                                                                     */</span>
<span class="line-modified">!     /* TrueType-specific fields (ignored by the CFF driver)                */</span>
<span class="line-modified">!     /*                                                                     */</span>
<span class="line-modified">!     /***********************************************************************/</span>
  
      /* the font program, if any */
      FT_ULong              font_program_size;
      FT_Byte*              font_program;
  
<span class="line-new-header">--- 1534,23 ---</span>
      TT_SBit_Scale         sbit_scales;
  
      /* postscript names table */
      TT_Post_NamesRec      postscript_names;
  
<span class="line-added">+     /* glyph colors */</span>
<span class="line-added">+     FT_Palette_Data       palette_data;         /* since 2.10 */</span>
<span class="line-added">+     FT_UShort             palette_index;</span>
<span class="line-added">+     FT_Color*             palette;</span>
<span class="line-added">+     FT_Bool               have_foreground_color;</span>
<span class="line-added">+     FT_Color              foreground_color;</span>
<span class="line-added">+ </span>
  
<span class="line-modified">!     /************************************************************************</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * TrueType-specific fields (ignored by the CFF driver)</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      */</span>
  
      /* the font program, if any */
      FT_ULong              font_program_size;
      FT_Byte*              font_program;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1479,23 ***</span>
      FT_ULong              cvt_program_size;
      FT_Byte*              cvt_program;
  
      /* the original, unscaled, control value table */
      FT_ULong              cvt_size;
<span class="line-modified">!     FT_Short*             cvt;</span>
  
      /* A pointer to the bytecode interpreter to use.  This is also */
      /* used to hook the debugger for the `ttdebug&#39; utility.        */
      TT_Interpreter        interpreter;
  
  
<span class="line-modified">!     /***********************************************************************/</span>
<span class="line-modified">!     /*                                                                     */</span>
<span class="line-modified">!     /* Other tables or fields. This is used by derivative formats like     */</span>
<span class="line-modified">!     /* OpenType.                                                           */</span>
<span class="line-modified">!     /*                                                                     */</span>
<span class="line-modified">!     /***********************************************************************/</span>
  
      FT_Generic            extra;
  
      const char*           postscript_name;
  
<span class="line-new-header">--- 1558,23 ---</span>
      FT_ULong              cvt_program_size;
      FT_Byte*              cvt_program;
  
      /* the original, unscaled, control value table */
      FT_ULong              cvt_size;
<span class="line-modified">!     FT_Int32*             cvt;</span>
  
      /* A pointer to the bytecode interpreter to use.  This is also */
      /* used to hook the debugger for the `ttdebug&#39; utility.        */
      TT_Interpreter        interpreter;
  
  
<span class="line-modified">!     /************************************************************************</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * Other tables or fields. This is used by derivative formats like</span>
<span class="line-modified">!      * OpenType.</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      */</span>
  
      FT_Generic            extra;
  
      const char*           postscript_name;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1560,44 ***</span>
      /* since 2.7 */
      FT_ULong              ebdt_start;  /* either `CBDT&#39;, `EBDT&#39;, or `bdat&#39; */
      FT_ULong              ebdt_size;
  #endif
  
    } TT_FaceRec;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*  &lt;Struct&gt;                                                             */</span>
<span class="line-modified">!   /*     TT_GlyphZoneRec                                                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*  &lt;Description&gt;                                                        */</span>
<span class="line-modified">!   /*     A glyph zone is used to load, scale and hint glyph outline        */</span>
<span class="line-modified">!   /*     coordinates.                                                      */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*  &lt;Fields&gt;                                                             */</span>
<span class="line-modified">!   /*     memory       :: A handle to the memory manager.                   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     max_points   :: The maximum size in points of the zone.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     max_contours :: Max size in links contours of the zone.           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     n_points     :: The current number of points in the zone.         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     n_contours   :: The current number of contours in the zone.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     org          :: The original glyph coordinates (font              */</span>
<span class="line-modified">!   /*                     units/scaled).                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     cur          :: The current glyph coordinates (scaled/hinted).    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     tags         :: The point control tags.                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     contours     :: The contours end points.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*     first_point  :: Offset of the current subglyph&#39;s first point.     */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct  TT_GlyphZoneRec_
    {
      FT_Memory   memory;
      FT_UShort   max_points;
      FT_Short    max_contours;
<span class="line-new-header">--- 1639,57 ---</span>
      /* since 2.7 */
      FT_ULong              ebdt_start;  /* either `CBDT&#39;, `EBDT&#39;, or `bdat&#39; */
      FT_ULong              ebdt_size;
  #endif
  
<span class="line-added">+     /* since 2.10 */</span>
<span class="line-added">+     void*                 cpal;</span>
<span class="line-added">+     void*                 colr;</span>
<span class="line-added">+ </span>
    } TT_FaceRec;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @struct:</span>
<span class="line-modified">!    *    TT_GlyphZoneRec</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A glyph zone is used to load, scale and hint glyph outline</span>
<span class="line-modified">!    *   coordinates.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @fields:</span>
<span class="line-modified">!    *   memory ::</span>
<span class="line-modified">!    *     A handle to the memory manager.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_points ::</span>
<span class="line-modified">!    *     The maximum size in points of the zone.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   max_contours ::</span>
<span class="line-modified">!    *     Max size in links contours of the zone.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   n_points ::</span>
<span class="line-modified">!    *     The current number of points in the zone.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   n_contours ::</span>
<span class="line-modified">!    *     The current number of contours in the zone.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   org ::</span>
<span class="line-modified">!    *     The original glyph coordinates (font units/scaled).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   cur ::</span>
<span class="line-modified">!    *     The current glyph coordinates (scaled/hinted).</span>
<span class="line-modified">!    *</span>
<span class="line-added">+    *   tags ::</span>
<span class="line-added">+    *     The point control tags.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   contours ::</span>
<span class="line-added">+    *     The contours end points.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   first_point ::</span>
<span class="line-added">+    *     Offset of the current subglyph&#39;s first point.</span>
<span class="line-added">+    */</span>
    typedef struct  TT_GlyphZoneRec_
    {
      FT_Memory   memory;
      FT_UShort   max_points;
      FT_Short    max_contours;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1618,18 ***</span>
  
    /* handle to execution context */
    typedef struct TT_ExecContextRec_*  TT_ExecContext;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">!   /*    TT_Size                                                            */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    A handle to a TrueType size object.                                */</span>
<span class="line-modified">!   /*                                                                       */</span>
    typedef struct TT_SizeRec_*  TT_Size;
  
  
    /* glyph loader structure */
    typedef struct  TT_LoaderRec_
<span class="line-new-header">--- 1710,18 ---</span>
  
    /* handle to execution context */
    typedef struct TT_ExecContextRec_*  TT_ExecContext;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @type:</span>
<span class="line-modified">!    *   TT_Size</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   A handle to a TrueType size object.</span>
<span class="line-modified">!    */</span>
    typedef struct TT_SizeRec_*  TT_Size;
  
  
    /* glyph loader structure */
    typedef struct  TT_LoaderRec_
</pre>
<center><a href="t1types.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../t1tables.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>