<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/config/ftconfig.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../UPDATING.txt.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ftheader.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/config/ftconfig.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 /***************************************************************************/</span>
<span class="line-modified">  2 /*                                                                         */</span>
<span class="line-modified">  3 /*  ftconfig.h                                                             */</span>
<span class="line-modified">  4 /*                                                                         */</span>
<span class="line-modified">  5 /*    ANSI-specific configuration file (specification only).               */</span>
<span class="line-modified">  6 /*                                                                         */</span>
<span class="line-modified">  7 /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">  8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">  9 /*                                                                         */</span>
<span class="line-modified"> 10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified"> 11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified"> 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified"> 13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified"> 14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified"> 15 /*                                                                         */</span>
<span class="line-modified"> 16 /***************************************************************************/</span>
<span class="line-modified"> 17 </span>
<span class="line-modified"> 18 </span>
<span class="line-modified"> 19   /*************************************************************************/</span>
<span class="line-modified"> 20   /*                                                                       */</span>
<span class="line-modified"> 21   /* This header file contains a number of macro definitions that are used */</span>
<span class="line-modified"> 22   /* by the rest of the engine.  Most of the macros here are automatically */</span>
<span class="line-modified"> 23   /* determined at compile time, and you should not need to change it to   */</span>
<span class="line-modified"> 24   /* port FreeType, except to compile the library with a non-ANSI          */</span>
<span class="line-modified"> 25   /* compiler.                                                             */</span>
<span class="line-modified"> 26   /*                                                                       */</span>
<span class="line-modified"> 27   /* Note however that if some specific modifications are needed, we       */</span>
<span class="line-modified"> 28   /* advise you to place a modified copy in your build directory.          */</span>
<span class="line-modified"> 29   /*                                                                       */</span>
<span class="line-modified"> 30   /* The build directory is usually `builds/&lt;system&gt;&#39;, and contains        */</span>
<span class="line-modified"> 31   /* system-specific files that are always included first when building    */</span>
<span class="line-modified"> 32   /* the library.                                                          */</span>
<span class="line-modified"> 33   /*                                                                       */</span>
<span class="line-modified"> 34   /* This ANSI version should stay in `include/config/&#39;.                   */</span>
<span class="line-modified"> 35   /*                                                                       */</span>
<span class="line-removed"> 36   /*************************************************************************/</span>
 37 
 38 #ifndef FTCONFIG_H_
 39 #define FTCONFIG_H_
 40 
 41 #include &lt;ft2build.h&gt;
 42 #include FT_CONFIG_OPTIONS_H
 43 #include FT_CONFIG_STANDARD_LIBRARY_H
 44 
 45 
 46 FT_BEGIN_HEADER
 47 
 48 
<span class="line-modified"> 49   /*************************************************************************/</span>
<span class="line-modified"> 50   /*                                                                       */</span>
<span class="line-modified"> 51   /*               PLATFORM-SPECIFIC CONFIGURATION MACROS                  */</span>
<span class="line-modified"> 52   /*                                                                       */</span>
<span class="line-modified"> 53   /* These macros can be toggled to suit a specific system.  The current   */</span>
<span class="line-modified"> 54   /* ones are defaults used to compile FreeType in an ANSI C environment   */</span>
<span class="line-modified"> 55   /* (16bit compilers are also supported).  Copy this file to your own     */</span>
<span class="line-modified"> 56   /* `builds/&lt;system&gt;&#39; directory, and edit it to port the engine.          */</span>
<span class="line-modified"> 57   /*                                                                       */</span>
<span class="line-modified"> 58   /*************************************************************************/</span>
 59 
 60 
<span class="line-modified"> 61   /* There are systems (like the Texas Instruments &#39;C54x) where a `char&#39; */</span>
<span class="line-modified"> 62   /* has 16 bits.  ANSI C says that sizeof(char) is always 1.  Since an  */</span>
<span class="line-modified"> 63   /* `int&#39; has 16 bits also for this system, sizeof(int) gives 1 which   */</span>
<span class="line-modified"> 64   /* is probably unexpected.                                             */</span>
<span class="line-modified"> 65   /*                                                                     */</span>
<span class="line-modified"> 66   /* `CHAR_BIT&#39; (defined in limits.h) gives the number of bits in a      */</span>
<span class="line-modified"> 67   /* `char&#39; type.                                                        */</span>
 68 
 69 #ifndef FT_CHAR_BIT
 70 #define FT_CHAR_BIT  CHAR_BIT
 71 #endif
 72 
 73 
<span class="line-modified"> 74   /* The size of an `int&#39; type.  */</span>
 75 #if                                 FT_UINT_MAX == 0xFFFFUL
 76 #define FT_SIZEOF_INT  ( 16 / FT_CHAR_BIT )
 77 #elif                               FT_UINT_MAX == 0xFFFFFFFFUL
 78 #define FT_SIZEOF_INT  ( 32 / FT_CHAR_BIT )
 79 #elif FT_UINT_MAX &gt; 0xFFFFFFFFUL &amp;&amp; FT_UINT_MAX == 0xFFFFFFFFFFFFFFFFUL
 80 #define FT_SIZEOF_INT  ( 64 / FT_CHAR_BIT )
 81 #else
 82 #error &quot;Unsupported size of `int&#39; type!&quot;
 83 #endif
 84 
<span class="line-modified"> 85   /* The size of a `long&#39; type.  A five-byte `long&#39; (as used e.g. on the */</span>
 86   /* DM642) is recognized but avoided.                                   */
 87 #if                                  FT_ULONG_MAX == 0xFFFFFFFFUL
 88 #define FT_SIZEOF_LONG  ( 32 / FT_CHAR_BIT )
 89 #elif FT_ULONG_MAX &gt; 0xFFFFFFFFUL &amp;&amp; FT_ULONG_MAX == 0xFFFFFFFFFFUL
 90 #define FT_SIZEOF_LONG  ( 32 / FT_CHAR_BIT )
 91 #elif FT_ULONG_MAX &gt; 0xFFFFFFFFUL &amp;&amp; FT_ULONG_MAX == 0xFFFFFFFFFFFFFFFFUL
 92 #define FT_SIZEOF_LONG  ( 64 / FT_CHAR_BIT )
 93 #else
 94 #error &quot;Unsupported size of `long&#39; type!&quot;
 95 #endif
 96 
 97 
<span class="line-modified"> 98   /* FT_UNUSED is a macro used to indicate that a given parameter is not  */</span>
<span class="line-modified"> 99   /* used -- this is only used to get rid of unpleasant compiler warnings */</span>
100 #ifndef FT_UNUSED
101 #define FT_UNUSED( arg )  ( (arg) = (arg) )
102 #endif
103 
104 
<span class="line-modified">105   /*************************************************************************/</span>
<span class="line-modified">106   /*                                                                       */</span>
<span class="line-modified">107   /*                     AUTOMATIC CONFIGURATION MACROS                    */</span>
<span class="line-modified">108   /*                                                                       */</span>
<span class="line-modified">109   /* These macros are computed from the ones defined above.  Don&#39;t touch   */</span>
<span class="line-modified">110   /* their definition, unless you know precisely what you are doing.  No   */</span>
<span class="line-modified">111   /* porter should need to mess with them.                                 */</span>
<span class="line-modified">112   /*                                                                       */</span>
<span class="line-modified">113   /*************************************************************************/</span>
<span class="line-modified">114 </span>
<span class="line-modified">115 </span>
<span class="line-modified">116   /*************************************************************************/</span>
<span class="line-modified">117   /*                                                                       */</span>
<span class="line-modified">118   /* Mac support                                                           */</span>
<span class="line-modified">119   /*                                                                       */</span>
<span class="line-modified">120   /*   This is the only necessary change, so it is defined here instead    */</span>
<span class="line-modified">121   /*   providing a new configuration file.                                 */</span>
<span class="line-modified">122   /*                                                                       */</span>
123 #if defined( __APPLE__ ) || ( defined( __MWERKS__ ) &amp;&amp; defined( macintosh ) )
<span class="line-modified">124   /* no Carbon frameworks for 64bit 10.4.x */</span>
<span class="line-modified">125   /* AvailabilityMacros.h is available since Mac OS X 10.2,        */</span>
<span class="line-modified">126   /* so guess the system version by maximum errno before inclusion */</span>
127 #include &lt;errno.h&gt;
128 #ifdef ECANCELED /* defined since 10.2 */
129 #include &quot;AvailabilityMacros.h&quot;
130 #endif
131 #if defined( __LP64__ ) &amp;&amp; \
132     ( MAC_OS_X_VERSION_MIN_REQUIRED &lt;= MAC_OS_X_VERSION_10_4 )
133 #undef FT_MACINTOSH
134 #endif
135 
136 #elif defined( __SC__ ) || defined( __MRC__ )
137   /* Classic MacOS compilers */
138 #include &quot;ConditionalMacros.h&quot;
139 #if TARGET_OS_MAC
140 #define FT_MACINTOSH 1
141 #endif
142 
143 #endif
144 
145 
<span class="line-modified">146   /* Fix compiler warning with sgi compiler */</span>
147 #if defined( __sgi ) &amp;&amp; !defined( __GNUC__ )
148 #if defined( _COMPILER_VERSION ) &amp;&amp; ( _COMPILER_VERSION &gt;= 730 )
149 #pragma set woff 3505
150 #endif
151 #endif
152 
153 
<span class="line-modified">154   /*************************************************************************/</span>
<span class="line-modified">155   /*                                                                       */</span>
<span class="line-modified">156   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">157   /*    basic_types                                                        */</span>
<span class="line-modified">158   /*                                                                       */</span>
<span class="line-modified">159   /*************************************************************************/</span>
160 
161 
<span class="line-modified">162   /*************************************************************************/</span>
<span class="line-modified">163   /*                                                                       */</span>
<span class="line-modified">164   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">165   /*    FT_Int16                                                           */</span>
<span class="line-modified">166   /*                                                                       */</span>
<span class="line-modified">167   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">168   /*    A typedef for a 16bit signed integer type.                         */</span>
<span class="line-modified">169   /*                                                                       */</span>
170   typedef signed short  FT_Int16;
171 
172 
<span class="line-modified">173   /*************************************************************************/</span>
<span class="line-modified">174   /*                                                                       */</span>
<span class="line-modified">175   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">176   /*    FT_UInt16                                                          */</span>
<span class="line-modified">177   /*                                                                       */</span>
<span class="line-modified">178   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">179   /*    A typedef for a 16bit unsigned integer type.                       */</span>
<span class="line-modified">180   /*                                                                       */</span>
181   typedef unsigned short  FT_UInt16;
182 
183   /* */
184 
185 
186   /* this #if 0 ... #endif clause is for documentation purposes */
187 #if 0
188 
<span class="line-modified">189   /*************************************************************************/</span>
<span class="line-modified">190   /*                                                                       */</span>
<span class="line-modified">191   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">192   /*    FT_Int32                                                           */</span>
<span class="line-modified">193   /*                                                                       */</span>
<span class="line-modified">194   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">195   /*    A typedef for a 32bit signed integer type.  The size depends on    */</span>
<span class="line-modified">196   /*    the configuration.                                                 */</span>
<span class="line-modified">197   /*                                                                       */</span>
198   typedef signed XXX  FT_Int32;
199 
200 
<span class="line-modified">201   /*************************************************************************/</span>
<span class="line-modified">202   /*                                                                       */</span>
<span class="line-modified">203   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">204   /*    FT_UInt32                                                          */</span>
<span class="line-modified">205   /*                                                                       */</span>
<span class="line-modified">206   /*    A typedef for a 32bit unsigned integer type.  The size depends on  */</span>
<span class="line-modified">207   /*    the configuration.                                                 */</span>
<span class="line-modified">208   /*                                                                       */</span>
209   typedef unsigned XXX  FT_UInt32;
210 
211 
<span class="line-modified">212   /*************************************************************************/</span>
<span class="line-modified">213   /*                                                                       */</span>
<span class="line-modified">214   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">215   /*    FT_Int64                                                           */</span>
<span class="line-modified">216   /*                                                                       */</span>
<span class="line-modified">217   /*    A typedef for a 64bit signed integer type.  The size depends on    */</span>
<span class="line-modified">218   /*    the configuration.  Only defined if there is real 64bit support;   */</span>
<span class="line-modified">219   /*    otherwise, it gets emulated with a structure (if necessary).       */</span>
<span class="line-modified">220   /*                                                                       */</span>
221   typedef signed XXX  FT_Int64;
222 
223 
<span class="line-modified">224   /*************************************************************************/</span>
<span class="line-modified">225   /*                                                                       */</span>
<span class="line-modified">226   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">227   /*    FT_UInt64                                                          */</span>
<span class="line-modified">228   /*                                                                       */</span>
<span class="line-modified">229   /*    A typedef for a 64bit unsigned integer type.  The size depends on  */</span>
<span class="line-modified">230   /*    the configuration.  Only defined if there is real 64bit support;   */</span>
<span class="line-modified">231   /*    otherwise, it gets emulated with a structure (if necessary).       */</span>
<span class="line-modified">232   /*                                                                       */</span>
233   typedef unsigned XXX  FT_UInt64;
234 
235   /* */
236 
237 #endif
238 
239 #if FT_SIZEOF_INT == ( 32 / FT_CHAR_BIT )
240 
241   typedef signed int      FT_Int32;
242   typedef unsigned int    FT_UInt32;
243 
244 #elif FT_SIZEOF_LONG == ( 32 / FT_CHAR_BIT )
245 
246   typedef signed long     FT_Int32;
247   typedef unsigned long   FT_UInt32;
248 
249 #else
250 #error &quot;no 32bit type found -- please check your configuration files&quot;
251 #endif
252 
253 
<span class="line-modified">254   /* look up an integer type that is at least 32 bits */</span>
255 #if FT_SIZEOF_INT &gt;= ( 32 / FT_CHAR_BIT )
256 
257   typedef int            FT_Fast;
258   typedef unsigned int   FT_UFast;
259 
260 #elif FT_SIZEOF_LONG &gt;= ( 32 / FT_CHAR_BIT )
261 
262   typedef long           FT_Fast;
263   typedef unsigned long  FT_UFast;
264 
265 #endif
266 
267 
<span class="line-modified">268   /* determine whether we have a 64-bit int type for platforms without */</span>
<span class="line-modified">269   /* Autoconf                                                          */</span>
270 #if FT_SIZEOF_LONG == ( 64 / FT_CHAR_BIT )
271 
<span class="line-modified">272   /* FT_LONG64 must be defined if a 64-bit type is available */</span>
273 #define FT_LONG64
274 #define FT_INT64   long
275 #define FT_UINT64  unsigned long
276 
<span class="line-modified">277   /*************************************************************************/</span>
<span class="line-modified">278   /*                                                                       */</span>
<span class="line-modified">279   /* A 64-bit data type may create compilation problems if you compile     */</span>
<span class="line-modified">280   /* in strict ANSI mode.  To avoid them, we disable other 64-bit data     */</span>
<span class="line-modified">281   /* types if __STDC__ is defined.  You can however ignore this rule       */</span>
<span class="line-modified">282   /* by defining the FT_CONFIG_OPTION_FORCE_INT64 configuration macro.     */</span>
<span class="line-modified">283   /*                                                                       */</span>
284 #elif !defined( __STDC__ ) || defined( FT_CONFIG_OPTION_FORCE_INT64 )
285 
286 #if defined( __STDC_VERSION__ ) &amp;&amp; __STDC_VERSION__ &gt;= 199901L
287 
288 #define FT_LONG64
289 #define FT_INT64   long long int
290 #define FT_UINT64  unsigned long long int
291 
<span class="line-modified">292 #elif defined( _MSC_VER ) &amp;&amp; _MSC_VER &gt;= 900  /* Visual C++ (and Intel C++) */</span>
293 
<span class="line-modified">294   /* this compiler provides the __int64 type */</span>
295 #define FT_LONG64
296 #define FT_INT64   __int64
297 #define FT_UINT64  unsigned __int64
298 
299 #elif defined( __BORLANDC__ )  /* Borland C++ */
300 
<span class="line-modified">301   /* XXXX: We should probably check the value of __BORLANDC__ in order */</span>
<span class="line-modified">302   /*       to test the compiler version.                               */</span>
303 
<span class="line-modified">304   /* this compiler provides the __int64 type */</span>
305 #define FT_LONG64
306 #define FT_INT64   __int64
307 #define FT_UINT64  unsigned __int64
308 
309 #elif defined( __WATCOMC__ )   /* Watcom C++ */
310 
311   /* Watcom doesn&#39;t provide 64-bit data types */
312 
313 #elif defined( __MWERKS__ )    /* Metrowerks CodeWarrior */
314 
315 #define FT_LONG64
316 #define FT_INT64   long long int
317 #define FT_UINT64  unsigned long long int
318 
319 #elif defined( __GNUC__ )
320 
<span class="line-modified">321   /* GCC provides the `long long&#39; type */</span>
322 #define FT_LONG64
323 #define FT_INT64   long long int
324 #define FT_UINT64  unsigned long long int
325 
326 #endif /* __STDC_VERSION__ &gt;= 199901L */
327 
328 #endif /* FT_SIZEOF_LONG == (64 / FT_CHAR_BIT) */
329 
330 #ifdef FT_LONG64
331   typedef FT_INT64   FT_Int64;
332   typedef FT_UINT64  FT_UInt64;
333 #endif
334 
335 
336 #ifdef _WIN64
337   /* only 64bit Windows uses the LLP64 data model, i.e., */
338   /* 32bit integers, 64bit pointers                      */
339 #define FT_UINT_TO_POINTER( x ) (void*)(unsigned __int64)(x)
340 #else
341 #define FT_UINT_TO_POINTER( x ) (void*)(unsigned long)(x)
342 #endif
343 
344 
<span class="line-modified">345   /*************************************************************************/</span>
<span class="line-modified">346   /*                                                                       */</span>
<span class="line-modified">347   /* miscellaneous                                                         */</span>
<span class="line-modified">348   /*                                                                       */</span>
<span class="line-modified">349   /*************************************************************************/</span>
350 
351 
352 #define FT_BEGIN_STMNT  do {
353 #define FT_END_STMNT    } while ( 0 )
354 #define FT_DUMMY_STMNT  FT_BEGIN_STMNT FT_END_STMNT
355 
356 
<span class="line-modified">357   /* typeof condition taken from gnulib&#39;s `intprops.h&#39; header file */</span>
358 #if ( ( defined( __GNUC__ ) &amp;&amp; __GNUC__ &gt;= 2 )                       || \
359       ( defined( __IBMC__ ) &amp;&amp; __IBMC__ &gt;= 1210 &amp;&amp;                      \
360         defined( __IBM__TYPEOF__ ) )                                 || \
361       ( defined( __SUNPRO_C ) &amp;&amp; __SUNPRO_C &gt;= 0x5110 &amp;&amp; !__STDC__ ) )
362 #define FT_TYPEOF( type )  ( __typeof__ ( type ) )
363 #else
364 #define FT_TYPEOF( type )  /* empty */
365 #endif
366 
367 
<span class="line-modified">368   /* Use FT_LOCAL and FT_LOCAL_DEF to declare and define, respectively, */</span>
<span class="line-modified">369   /* a function that gets used only within the scope of a module.       */</span>
<span class="line-modified">370   /* Normally, both the header and source code files for such a         */</span>
<span class="line-modified">371   /* function are within a single module directory.                     */</span>
<span class="line-modified">372   /*                                                                    */</span>
<span class="line-modified">373   /* Intra-module arrays should be tagged with FT_LOCAL_ARRAY and       */</span>
<span class="line-modified">374   /* FT_LOCAL_ARRAY_DEF.                                                */</span>
<span class="line-modified">375   /*                                                                    */</span>
376 #ifdef FT_MAKE_OPTION_SINGLE_OBJECT
377 
378 #define FT_LOCAL( x )      static  x
379 #define FT_LOCAL_DEF( x )  static  x
380 
381 #else
382 
383 #ifdef __cplusplus
384 #define FT_LOCAL( x )      extern &quot;C&quot;  x
385 #define FT_LOCAL_DEF( x )  extern &quot;C&quot;  x
386 #else
387 #define FT_LOCAL( x )      extern  x
388 #define FT_LOCAL_DEF( x )  x
389 #endif
390 
391 #endif /* FT_MAKE_OPTION_SINGLE_OBJECT */
392 
393 #define FT_LOCAL_ARRAY( x )      extern const  x
394 #define FT_LOCAL_ARRAY_DEF( x )  const  x
395 
396 
<span class="line-modified">397   /* Use FT_BASE and FT_BASE_DEF to declare and define, respectively, */</span>
<span class="line-modified">398   /* functions that are used in more than a single module.  In the    */</span>
<span class="line-modified">399   /* current setup this implies that the declaration is in a header   */</span>
<span class="line-modified">400   /* file in the `include/freetype/internal&#39; directory, and the       */</span>
<span class="line-modified">401   /* function body is in a file in `src/base&#39;.                        */</span>
<span class="line-modified">402   /*                                                                  */</span>
403 #ifndef FT_BASE
404 
405 #ifdef __cplusplus
406 #define FT_BASE( x )  extern &quot;C&quot;  x
407 #else
408 #define FT_BASE( x )  extern  x
409 #endif
410 
411 #endif /* !FT_BASE */
412 
413 
414 #ifndef FT_BASE_DEF
415 
416 #ifdef __cplusplus
417 #define FT_BASE_DEF( x )  x
418 #else
419 #define FT_BASE_DEF( x )  x
420 #endif
421 
422 #endif /* !FT_BASE_DEF */
423 
424 
<span class="line-modified">425   /*   When compiling FreeType as a DLL or DSO with hidden visibility      */</span>
<span class="line-modified">426   /*   some systems/compilers need a special attribute in front OR after   */</span>
<span class="line-modified">427   /*   the return type of function declarations.                           */</span>
<span class="line-modified">428   /*                                                                       */</span>
<span class="line-modified">429   /*   Two macros are used within the FreeType source code to define       */</span>
<span class="line-modified">430   /*   exported library functions: FT_EXPORT and FT_EXPORT_DEF.            */</span>
<span class="line-modified">431   /*                                                                       */</span>
<span class="line-modified">432   /*     FT_EXPORT( return_type )                                          */</span>
<span class="line-modified">433   /*                                                                       */</span>
<span class="line-modified">434   /*       is used in a function declaration, as in                        */</span>
<span class="line-modified">435   /*                                                                       */</span>
<span class="line-modified">436   /*         FT_EXPORT( FT_Error )                                         */</span>
<span class="line-modified">437   /*         FT_Init_FreeType( FT_Library*  alibrary );                    */</span>
<span class="line-modified">438   /*                                                                       */</span>
<span class="line-modified">439   /*                                                                       */</span>
<span class="line-modified">440   /*     FT_EXPORT_DEF( return_type )                                      */</span>
<span class="line-modified">441   /*                                                                       */</span>
<span class="line-modified">442   /*       is used in a function definition, as in                         */</span>
<span class="line-modified">443   /*                                                                       */</span>
<span class="line-modified">444   /*         FT_EXPORT_DEF( FT_Error )                                     */</span>
<span class="line-modified">445   /*         FT_Init_FreeType( FT_Library*  alibrary )                     */</span>
<span class="line-modified">446   /*         {                                                             */</span>
<span class="line-modified">447   /*           ... some code ...                                           */</span>
<span class="line-modified">448   /*           return FT_Err_Ok;                                           */</span>
<span class="line-modified">449   /*         }                                                             */</span>
<span class="line-modified">450   /*                                                                       */</span>
<span class="line-modified">451   /*   You can provide your own implementation of FT_EXPORT and            */</span>
<span class="line-modified">452   /*   FT_EXPORT_DEF here if you want.                                     */</span>
<span class="line-modified">453   /*                                                                       */</span>
<span class="line-modified">454   /*   To export a variable, use FT_EXPORT_VAR.                            */</span>
<span class="line-modified">455   /*                                                                       */</span>



456 #ifndef FT_EXPORT
457 
458 #ifdef FT2_BUILD_LIBRARY
459 
<span class="line-modified">460 #if defined( _WIN32 ) &amp;&amp; ( defined( _DLL ) || defined( DLL_EXPORT ) )</span>
461 #define FT_EXPORT( x )  __declspec( dllexport )  x
462 #elif defined( __GNUC__ ) &amp;&amp; __GNUC__ &gt;= 4
463 #define FT_EXPORT( x )  __attribute__(( visibility( &quot;default&quot; ) ))  x


464 #elif defined( __cplusplus )
465 #define FT_EXPORT( x )  extern &quot;C&quot;  x
466 #else
467 #define FT_EXPORT( x )  extern  x
468 #endif
469 
470 #else
471 
<span class="line-modified">472 #if defined( FT2_DLLIMPORT )</span>
473 #define FT_EXPORT( x )  __declspec( dllimport )  x
474 #elif defined( __cplusplus )
475 #define FT_EXPORT( x )  extern &quot;C&quot;  x
476 #else
477 #define FT_EXPORT( x )  extern  x
478 #endif
479 
480 #endif
481 
482 #endif /* !FT_EXPORT */
483 
484 
485 #ifndef FT_EXPORT_DEF
486 
487 #ifdef __cplusplus
488 #define FT_EXPORT_DEF( x )  extern &quot;C&quot;  x
489 #else
490 #define FT_EXPORT_DEF( x )  extern  x
491 #endif
492 
493 #endif /* !FT_EXPORT_DEF */
494 
495 
496 #ifndef FT_EXPORT_VAR
497 
498 #ifdef __cplusplus
499 #define FT_EXPORT_VAR( x )  extern &quot;C&quot;  x
500 #else
501 #define FT_EXPORT_VAR( x )  extern  x
502 #endif
503 
504 #endif /* !FT_EXPORT_VAR */
505 
506 
507   /* The following macros are needed to compile the library with a   */
508   /* C++ compiler and with 16bit compilers.                          */
509   /*                                                                 */
510 
<span class="line-modified">511   /* This is special.  Within C++, you must specify `extern &quot;C&quot;&#39; for */</span>
512   /* functions which are used via function pointers, and you also    */
513   /* must do that for structures which contain function pointers to  */
514   /* assure C linkage -- it&#39;s not possible to have (local) anonymous */
515   /* functions which are accessed by (global) function pointers.     */
516   /*                                                                 */
517   /*                                                                 */
518   /* FT_CALLBACK_DEF is used to _define_ a callback function,        */
519   /* located in the same source code file as the structure that uses */
520   /* it.                                                             */
521   /*                                                                 */
522   /* FT_BASE_CALLBACK and FT_BASE_CALLBACK_DEF are used to declare   */
523   /* and define a callback function, respectively, in a similar way  */
524   /* as FT_BASE and FT_BASE_DEF work.                                */
525   /*                                                                 */
526   /* FT_CALLBACK_TABLE is used to _declare_ a constant variable that */
527   /* contains pointers to callback functions.                        */
528   /*                                                                 */
529   /* FT_CALLBACK_TABLE_DEF is used to _define_ a constant variable   */
530   /* that contains pointers to callback functions.                   */
531   /*                                                                 */
532   /*                                                                 */
533   /* Some 16bit compilers have to redefine these macros to insert    */
<span class="line-modified">534   /* the infamous `_cdecl&#39; or `__fastcall&#39; declarations.             */</span>
535   /*                                                                 */
536 #ifndef FT_CALLBACK_DEF
537 #ifdef __cplusplus
538 #define FT_CALLBACK_DEF( x )  extern &quot;C&quot;  x
539 #else
540 #define FT_CALLBACK_DEF( x )  static  x
541 #endif
542 #endif /* FT_CALLBACK_DEF */
543 
544 #ifndef FT_BASE_CALLBACK
545 #ifdef __cplusplus
546 #define FT_BASE_CALLBACK( x )      extern &quot;C&quot;  x
547 #define FT_BASE_CALLBACK_DEF( x )  extern &quot;C&quot;  x
548 #else
549 #define FT_BASE_CALLBACK( x )      extern  x
550 #define FT_BASE_CALLBACK_DEF( x )  x
551 #endif
552 #endif /* FT_BASE_CALLBACK */
553 
554 #ifndef FT_CALLBACK_TABLE
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * ftconfig.h</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   ANSI-specific configuration file (specification only).</span>
<span class="line-modified">  6  *</span>
<span class="line-modified">  7  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">  8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">  9  *</span>
<span class="line-modified"> 10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 13  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 14  * understand and accept it fully.</span>
<span class="line-modified"> 15  *</span>
<span class="line-modified"> 16  */</span>
<span class="line-modified"> 17 </span>
<span class="line-modified"> 18 </span>
<span class="line-modified"> 19   /**************************************************************************</span>
<span class="line-modified"> 20    *</span>
<span class="line-modified"> 21    * This header file contains a number of macro definitions that are used by</span>
<span class="line-modified"> 22    * the rest of the engine.  Most of the macros here are automatically</span>
<span class="line-modified"> 23    * determined at compile time, and you should not need to change it to port</span>
<span class="line-modified"> 24    * FreeType, except to compile the library with a non-ANSI compiler.</span>
<span class="line-modified"> 25    *</span>
<span class="line-modified"> 26    * Note however that if some specific modifications are needed, we advise</span>
<span class="line-modified"> 27    * you to place a modified copy in your build directory.</span>
<span class="line-modified"> 28    *</span>
<span class="line-modified"> 29    * The build directory is usually `builds/&lt;system&gt;`, and contains</span>
<span class="line-modified"> 30    * system-specific files that are always included first when building the</span>
<span class="line-modified"> 31    * library.</span>
<span class="line-modified"> 32    *</span>
<span class="line-modified"> 33    * This ANSI version should stay in `include/config/`.</span>
<span class="line-modified"> 34    *</span>
<span class="line-modified"> 35    */</span>

 36 
 37 #ifndef FTCONFIG_H_
 38 #define FTCONFIG_H_
 39 
 40 #include &lt;ft2build.h&gt;
 41 #include FT_CONFIG_OPTIONS_H
 42 #include FT_CONFIG_STANDARD_LIBRARY_H
 43 
 44 
 45 FT_BEGIN_HEADER
 46 
 47 
<span class="line-modified"> 48   /**************************************************************************</span>
<span class="line-modified"> 49    *</span>
<span class="line-modified"> 50    *              PLATFORM-SPECIFIC CONFIGURATION MACROS</span>
<span class="line-modified"> 51    *</span>
<span class="line-modified"> 52    * These macros can be toggled to suit a specific system.  The current ones</span>
<span class="line-modified"> 53    * are defaults used to compile FreeType in an ANSI C environment (16bit</span>
<span class="line-modified"> 54    * compilers are also supported).  Copy this file to your own</span>
<span class="line-modified"> 55    * `builds/&lt;system&gt;` directory, and edit it to port the engine.</span>
<span class="line-modified"> 56    *</span>
<span class="line-modified"> 57    */</span>
 58 
 59 
<span class="line-modified"> 60   /* There are systems (like the Texas Instruments &#39;C54x) where a `char`  */</span>
<span class="line-modified"> 61   /* has 16~bits.  ANSI~C says that `sizeof(char)` is always~1.  Since an */</span>
<span class="line-modified"> 62   /* `int` has 16~bits also for this system, `sizeof(int)` gives~1 which  */</span>
<span class="line-modified"> 63   /* is probably unexpected.                                              */</span>
<span class="line-modified"> 64   /*                                                                      */</span>
<span class="line-modified"> 65   /* `CHAR_BIT` (defined in `limits.h`) gives the number of bits in a     */</span>
<span class="line-modified"> 66   /* `char` type.                                                         */</span>
 67 
 68 #ifndef FT_CHAR_BIT
 69 #define FT_CHAR_BIT  CHAR_BIT
 70 #endif
 71 
 72 
<span class="line-modified"> 73   /* The size of an `int` type. */</span>
 74 #if                                 FT_UINT_MAX == 0xFFFFUL
 75 #define FT_SIZEOF_INT  ( 16 / FT_CHAR_BIT )
 76 #elif                               FT_UINT_MAX == 0xFFFFFFFFUL
 77 #define FT_SIZEOF_INT  ( 32 / FT_CHAR_BIT )
 78 #elif FT_UINT_MAX &gt; 0xFFFFFFFFUL &amp;&amp; FT_UINT_MAX == 0xFFFFFFFFFFFFFFFFUL
 79 #define FT_SIZEOF_INT  ( 64 / FT_CHAR_BIT )
 80 #else
 81 #error &quot;Unsupported size of `int&#39; type!&quot;
 82 #endif
 83 
<span class="line-modified"> 84   /* The size of a `long` type.  A five-byte `long` (as used e.g. on the */</span>
 85   /* DM642) is recognized but avoided.                                   */
 86 #if                                  FT_ULONG_MAX == 0xFFFFFFFFUL
 87 #define FT_SIZEOF_LONG  ( 32 / FT_CHAR_BIT )
 88 #elif FT_ULONG_MAX &gt; 0xFFFFFFFFUL &amp;&amp; FT_ULONG_MAX == 0xFFFFFFFFFFUL
 89 #define FT_SIZEOF_LONG  ( 32 / FT_CHAR_BIT )
 90 #elif FT_ULONG_MAX &gt; 0xFFFFFFFFUL &amp;&amp; FT_ULONG_MAX == 0xFFFFFFFFFFFFFFFFUL
 91 #define FT_SIZEOF_LONG  ( 64 / FT_CHAR_BIT )
 92 #else
 93 #error &quot;Unsupported size of `long&#39; type!&quot;
 94 #endif
 95 
 96 
<span class="line-modified"> 97   /* `FT_UNUSED` indicates that a given parameter is not used --   */</span>
<span class="line-modified"> 98   /* this is only used to get rid of unpleasant compiler warnings. */</span>
 99 #ifndef FT_UNUSED
100 #define FT_UNUSED( arg )  ( (arg) = (arg) )
101 #endif
102 
103 
<span class="line-modified">104   /**************************************************************************</span>
<span class="line-modified">105    *</span>
<span class="line-modified">106    *                    AUTOMATIC CONFIGURATION MACROS</span>
<span class="line-modified">107    *</span>
<span class="line-modified">108    * These macros are computed from the ones defined above.  Don&#39;t touch</span>
<span class="line-modified">109    * their definition, unless you know precisely what you are doing.  No</span>
<span class="line-modified">110    * porter should need to mess with them.</span>
<span class="line-modified">111    *</span>
<span class="line-modified">112    */</span>
<span class="line-modified">113 </span>
<span class="line-modified">114 </span>
<span class="line-modified">115   /**************************************************************************</span>
<span class="line-modified">116    *</span>
<span class="line-modified">117    * Mac support</span>
<span class="line-modified">118    *</span>
<span class="line-modified">119    *   This is the only necessary change, so it is defined here instead</span>
<span class="line-modified">120    *   providing a new configuration file.</span>
<span class="line-modified">121    */</span>
122 #if defined( __APPLE__ ) || ( defined( __MWERKS__ ) &amp;&amp; defined( macintosh ) )
<span class="line-modified">123   /* No Carbon frameworks for 64bit 10.4.x.                         */</span>
<span class="line-modified">124   /* `AvailabilityMacros.h` is available since Mac OS X 10.2,       */</span>
<span class="line-modified">125   /* so guess the system version by maximum errno before inclusion. */</span>
126 #include &lt;errno.h&gt;
127 #ifdef ECANCELED /* defined since 10.2 */
128 #include &quot;AvailabilityMacros.h&quot;
129 #endif
130 #if defined( __LP64__ ) &amp;&amp; \
131     ( MAC_OS_X_VERSION_MIN_REQUIRED &lt;= MAC_OS_X_VERSION_10_4 )
132 #undef FT_MACINTOSH
133 #endif
134 
135 #elif defined( __SC__ ) || defined( __MRC__ )
136   /* Classic MacOS compilers */
137 #include &quot;ConditionalMacros.h&quot;
138 #if TARGET_OS_MAC
139 #define FT_MACINTOSH 1
140 #endif
141 
142 #endif
143 
144 
<span class="line-modified">145   /* Fix compiler warning with sgi compiler. */</span>
146 #if defined( __sgi ) &amp;&amp; !defined( __GNUC__ )
147 #if defined( _COMPILER_VERSION ) &amp;&amp; ( _COMPILER_VERSION &gt;= 730 )
148 #pragma set woff 3505
149 #endif
150 #endif
151 
152 
<span class="line-modified">153   /**************************************************************************</span>
<span class="line-modified">154    *</span>
<span class="line-modified">155    * @section:</span>
<span class="line-modified">156    *   basic_types</span>
<span class="line-modified">157    *</span>
<span class="line-modified">158    */</span>
159 
160 
<span class="line-modified">161   /**************************************************************************</span>
<span class="line-modified">162    *</span>
<span class="line-modified">163    * @type:</span>
<span class="line-modified">164    *   FT_Int16</span>
<span class="line-modified">165    *</span>
<span class="line-modified">166    * @description:</span>
<span class="line-modified">167    *   A typedef for a 16bit signed integer type.</span>
<span class="line-modified">168    */</span>
169   typedef signed short  FT_Int16;
170 
171 
<span class="line-modified">172   /**************************************************************************</span>
<span class="line-modified">173    *</span>
<span class="line-modified">174    * @type:</span>
<span class="line-modified">175    *   FT_UInt16</span>
<span class="line-modified">176    *</span>
<span class="line-modified">177    * @description:</span>
<span class="line-modified">178    *   A typedef for a 16bit unsigned integer type.</span>
<span class="line-modified">179    */</span>
180   typedef unsigned short  FT_UInt16;
181 
182   /* */
183 
184 
185   /* this #if 0 ... #endif clause is for documentation purposes */
186 #if 0
187 
<span class="line-modified">188   /**************************************************************************</span>
<span class="line-modified">189    *</span>
<span class="line-modified">190    * @type:</span>
<span class="line-modified">191    *   FT_Int32</span>
<span class="line-modified">192    *</span>
<span class="line-modified">193    * @description:</span>
<span class="line-modified">194    *   A typedef for a 32bit signed integer type.  The size depends on the</span>
<span class="line-modified">195    *   configuration.</span>
<span class="line-modified">196    */</span>
197   typedef signed XXX  FT_Int32;
198 
199 
<span class="line-modified">200   /**************************************************************************</span>
<span class="line-modified">201    *</span>
<span class="line-modified">202    * @type:</span>
<span class="line-modified">203    *   FT_UInt32</span>
<span class="line-modified">204    *</span>
<span class="line-modified">205    *   A typedef for a 32bit unsigned integer type.  The size depends on the</span>
<span class="line-modified">206    *   configuration.</span>
<span class="line-modified">207    */</span>
208   typedef unsigned XXX  FT_UInt32;
209 
210 
<span class="line-modified">211   /**************************************************************************</span>
<span class="line-modified">212    *</span>
<span class="line-modified">213    * @type:</span>
<span class="line-modified">214    *   FT_Int64</span>
<span class="line-modified">215    *</span>
<span class="line-modified">216    *   A typedef for a 64bit signed integer type.  The size depends on the</span>
<span class="line-modified">217    *   configuration.  Only defined if there is real 64bit support;</span>
<span class="line-modified">218    *   otherwise, it gets emulated with a structure (if necessary).</span>
<span class="line-modified">219    */</span>
220   typedef signed XXX  FT_Int64;
221 
222 
<span class="line-modified">223   /**************************************************************************</span>
<span class="line-modified">224    *</span>
<span class="line-modified">225    * @type:</span>
<span class="line-modified">226    *   FT_UInt64</span>
<span class="line-modified">227    *</span>
<span class="line-modified">228    *   A typedef for a 64bit unsigned integer type.  The size depends on the</span>
<span class="line-modified">229    *   configuration.  Only defined if there is real 64bit support;</span>
<span class="line-modified">230    *   otherwise, it gets emulated with a structure (if necessary).</span>
<span class="line-modified">231    */</span>
232   typedef unsigned XXX  FT_UInt64;
233 
234   /* */
235 
236 #endif
237 
238 #if FT_SIZEOF_INT == ( 32 / FT_CHAR_BIT )
239 
240   typedef signed int      FT_Int32;
241   typedef unsigned int    FT_UInt32;
242 
243 #elif FT_SIZEOF_LONG == ( 32 / FT_CHAR_BIT )
244 
245   typedef signed long     FT_Int32;
246   typedef unsigned long   FT_UInt32;
247 
248 #else
249 #error &quot;no 32bit type found -- please check your configuration files&quot;
250 #endif
251 
252 
<span class="line-modified">253   /* look up an integer type that is at least 32~bits */</span>
254 #if FT_SIZEOF_INT &gt;= ( 32 / FT_CHAR_BIT )
255 
256   typedef int            FT_Fast;
257   typedef unsigned int   FT_UFast;
258 
259 #elif FT_SIZEOF_LONG &gt;= ( 32 / FT_CHAR_BIT )
260 
261   typedef long           FT_Fast;
262   typedef unsigned long  FT_UFast;
263 
264 #endif
265 
266 
<span class="line-modified">267   /* determine whether we have a 64-bit `int` type for platforms without */</span>
<span class="line-modified">268   /* Autoconf                                                            */</span>
269 #if FT_SIZEOF_LONG == ( 64 / FT_CHAR_BIT )
270 
<span class="line-modified">271   /* `FT_LONG64` must be defined if a 64-bit type is available */</span>
272 #define FT_LONG64
273 #define FT_INT64   long
274 #define FT_UINT64  unsigned long
275 
<span class="line-modified">276   /**************************************************************************</span>
<span class="line-modified">277    *</span>
<span class="line-modified">278    * A 64-bit data type may create compilation problems if you compile in</span>
<span class="line-modified">279    * strict ANSI mode.  To avoid them, we disable other 64-bit data types if</span>
<span class="line-modified">280    * `__STDC__` is defined.  You can however ignore this rule by defining the</span>
<span class="line-modified">281    * `FT_CONFIG_OPTION_FORCE_INT64` configuration macro.</span>
<span class="line-modified">282    */</span>
283 #elif !defined( __STDC__ ) || defined( FT_CONFIG_OPTION_FORCE_INT64 )
284 
285 #if defined( __STDC_VERSION__ ) &amp;&amp; __STDC_VERSION__ &gt;= 199901L
286 
287 #define FT_LONG64
288 #define FT_INT64   long long int
289 #define FT_UINT64  unsigned long long int
290 
<span class="line-modified">291 #elif defined( _MSC_VER ) &amp;&amp; _MSC_VER &gt;= 900 /* Visual C++ (and Intel C++) */</span>
292 
<span class="line-modified">293   /* this compiler provides the `__int64` type */</span>
294 #define FT_LONG64
295 #define FT_INT64   __int64
296 #define FT_UINT64  unsigned __int64
297 
298 #elif defined( __BORLANDC__ )  /* Borland C++ */
299 
<span class="line-modified">300   /* XXXX: We should probably check the value of `__BORLANDC__` in order */</span>
<span class="line-modified">301   /*       to test the compiler version.                                 */</span>
302 
<span class="line-modified">303   /* this compiler provides the `__int64` type */</span>
304 #define FT_LONG64
305 #define FT_INT64   __int64
306 #define FT_UINT64  unsigned __int64
307 
308 #elif defined( __WATCOMC__ )   /* Watcom C++ */
309 
310   /* Watcom doesn&#39;t provide 64-bit data types */
311 
312 #elif defined( __MWERKS__ )    /* Metrowerks CodeWarrior */
313 
314 #define FT_LONG64
315 #define FT_INT64   long long int
316 #define FT_UINT64  unsigned long long int
317 
318 #elif defined( __GNUC__ )
319 
<span class="line-modified">320   /* GCC provides the `long long` type */</span>
321 #define FT_LONG64
322 #define FT_INT64   long long int
323 #define FT_UINT64  unsigned long long int
324 
325 #endif /* __STDC_VERSION__ &gt;= 199901L */
326 
327 #endif /* FT_SIZEOF_LONG == (64 / FT_CHAR_BIT) */
328 
329 #ifdef FT_LONG64
330   typedef FT_INT64   FT_Int64;
331   typedef FT_UINT64  FT_UInt64;
332 #endif
333 
334 
335 #ifdef _WIN64
336   /* only 64bit Windows uses the LLP64 data model, i.e., */
337   /* 32bit integers, 64bit pointers                      */
338 #define FT_UINT_TO_POINTER( x ) (void*)(unsigned __int64)(x)
339 #else
340 #define FT_UINT_TO_POINTER( x ) (void*)(unsigned long)(x)
341 #endif
342 
343 
<span class="line-modified">344   /**************************************************************************</span>
<span class="line-modified">345    *</span>
<span class="line-modified">346    * miscellaneous</span>
<span class="line-modified">347    *</span>
<span class="line-modified">348    */</span>
349 
350 
351 #define FT_BEGIN_STMNT  do {
352 #define FT_END_STMNT    } while ( 0 )
353 #define FT_DUMMY_STMNT  FT_BEGIN_STMNT FT_END_STMNT
354 
355 
<span class="line-modified">356   /* `typeof` condition taken from gnulib&#39;s `intprops.h` header file */</span>
357 #if ( ( defined( __GNUC__ ) &amp;&amp; __GNUC__ &gt;= 2 )                       || \
358       ( defined( __IBMC__ ) &amp;&amp; __IBMC__ &gt;= 1210 &amp;&amp;                      \
359         defined( __IBM__TYPEOF__ ) )                                 || \
360       ( defined( __SUNPRO_C ) &amp;&amp; __SUNPRO_C &gt;= 0x5110 &amp;&amp; !__STDC__ ) )
361 #define FT_TYPEOF( type )  ( __typeof__ ( type ) )
362 #else
363 #define FT_TYPEOF( type )  /* empty */
364 #endif
365 
366 
<span class="line-modified">367   /* Use `FT_LOCAL` and `FT_LOCAL_DEF` to declare and define,            */</span>
<span class="line-modified">368   /* respectively, a function that gets used only within the scope of a  */</span>
<span class="line-modified">369   /* module.  Normally, both the header and source code files for such a */</span>
<span class="line-modified">370   /* function are within a single module directory.                      */</span>
<span class="line-modified">371   /*                                                                     */</span>
<span class="line-modified">372   /* Intra-module arrays should be tagged with `FT_LOCAL_ARRAY` and      */</span>
<span class="line-modified">373   /* `FT_LOCAL_ARRAY_DEF`.                                               */</span>
<span class="line-modified">374   /*                                                                     */</span>
375 #ifdef FT_MAKE_OPTION_SINGLE_OBJECT
376 
377 #define FT_LOCAL( x )      static  x
378 #define FT_LOCAL_DEF( x )  static  x
379 
380 #else
381 
382 #ifdef __cplusplus
383 #define FT_LOCAL( x )      extern &quot;C&quot;  x
384 #define FT_LOCAL_DEF( x )  extern &quot;C&quot;  x
385 #else
386 #define FT_LOCAL( x )      extern  x
387 #define FT_LOCAL_DEF( x )  x
388 #endif
389 
390 #endif /* FT_MAKE_OPTION_SINGLE_OBJECT */
391 
392 #define FT_LOCAL_ARRAY( x )      extern const  x
393 #define FT_LOCAL_ARRAY_DEF( x )  const  x
394 
395 
<span class="line-modified">396   /* Use `FT_BASE` and `FT_BASE_DEF` to declare and define, respectively, */</span>
<span class="line-modified">397   /* functions that are used in more than a single module.  In the        */</span>
<span class="line-modified">398   /* current setup this implies that the declaration is in a header file  */</span>
<span class="line-modified">399   /* in the `include/freetype/internal` directory, and the function body  */</span>
<span class="line-modified">400   /* is in a file in `src/base`.                                          */</span>
<span class="line-modified">401   /*                                                                      */</span>
402 #ifndef FT_BASE
403 
404 #ifdef __cplusplus
405 #define FT_BASE( x )  extern &quot;C&quot;  x
406 #else
407 #define FT_BASE( x )  extern  x
408 #endif
409 
410 #endif /* !FT_BASE */
411 
412 
413 #ifndef FT_BASE_DEF
414 
415 #ifdef __cplusplus
416 #define FT_BASE_DEF( x )  x
417 #else
418 #define FT_BASE_DEF( x )  x
419 #endif
420 
421 #endif /* !FT_BASE_DEF */
422 
423 
<span class="line-modified">424   /* When compiling FreeType as a DLL or DSO with hidden visibility    */</span>
<span class="line-modified">425   /* some systems/compilers need a special attribute in front OR after */</span>
<span class="line-modified">426   /* the return type of function declarations.                         */</span>
<span class="line-modified">427   /*                                                                   */</span>
<span class="line-modified">428   /* Two macros are used within the FreeType source code to define     */</span>
<span class="line-modified">429   /* exported library functions: `FT_EXPORT` and `FT_EXPORT_DEF`.      */</span>
<span class="line-modified">430   /*                                                                   */</span>
<span class="line-modified">431   /* - `FT_EXPORT( return_type )`                                      */</span>
<span class="line-modified">432   /*                                                                   */</span>
<span class="line-modified">433   /*   is used in a function declaration, as in                        */</span>
<span class="line-modified">434   /*                                                                   */</span>
<span class="line-modified">435   /*   ```                                                             */</span>
<span class="line-modified">436   /*     FT_EXPORT( FT_Error )                                         */</span>
<span class="line-modified">437   /*     FT_Init_FreeType( FT_Library*  alibrary );                    */</span>
<span class="line-modified">438   /*   ```                                                             */</span>
<span class="line-modified">439   /*                                                                   */</span>
<span class="line-modified">440   /* - `FT_EXPORT_DEF( return_type )`                                  */</span>
<span class="line-modified">441   /*                                                                   */</span>
<span class="line-modified">442   /*   is used in a function definition, as in                         */</span>
<span class="line-modified">443   /*                                                                   */</span>
<span class="line-modified">444   /*   ```                                                             */</span>
<span class="line-modified">445   /*     FT_EXPORT_DEF( FT_Error )                                     */</span>
<span class="line-modified">446   /*     FT_Init_FreeType( FT_Library*  alibrary )                     */</span>
<span class="line-modified">447   /*     {                                                             */</span>
<span class="line-modified">448   /*       ... some code ...                                           */</span>
<span class="line-modified">449   /*       return FT_Err_Ok;                                           */</span>
<span class="line-modified">450   /*     }                                                             */</span>
<span class="line-modified">451   /*   ```                                                             */</span>
<span class="line-modified">452   /*                                                                   */</span>
<span class="line-modified">453   /* You can provide your own implementation of `FT_EXPORT` and        */</span>
<span class="line-modified">454   /* `FT_EXPORT_DEF` here if you want.                                 */</span>
<span class="line-added">455   /*                                                                   */</span>
<span class="line-added">456   /* To export a variable, use `FT_EXPORT_VAR`.                        */</span>
<span class="line-added">457   /*                                                                   */</span>
458 #ifndef FT_EXPORT
459 
460 #ifdef FT2_BUILD_LIBRARY
461 
<span class="line-modified">462 #if defined( _WIN32 ) &amp;&amp; defined( DLL_EXPORT )</span>
463 #define FT_EXPORT( x )  __declspec( dllexport )  x
464 #elif defined( __GNUC__ ) &amp;&amp; __GNUC__ &gt;= 4
465 #define FT_EXPORT( x )  __attribute__(( visibility( &quot;default&quot; ) ))  x
<span class="line-added">466 #elif defined( __SUNPRO_C ) &amp;&amp; __SUNPRO_C &gt;= 0x550</span>
<span class="line-added">467 #define FT_EXPORT( x )  __global  x</span>
468 #elif defined( __cplusplus )
469 #define FT_EXPORT( x )  extern &quot;C&quot;  x
470 #else
471 #define FT_EXPORT( x )  extern  x
472 #endif
473 
474 #else
475 
<span class="line-modified">476 #if defined( _WIN32 ) &amp;&amp; defined( DLL_IMPORT )</span>
477 #define FT_EXPORT( x )  __declspec( dllimport )  x
478 #elif defined( __cplusplus )
479 #define FT_EXPORT( x )  extern &quot;C&quot;  x
480 #else
481 #define FT_EXPORT( x )  extern  x
482 #endif
483 
484 #endif
485 
486 #endif /* !FT_EXPORT */
487 
488 
489 #ifndef FT_EXPORT_DEF
490 
491 #ifdef __cplusplus
492 #define FT_EXPORT_DEF( x )  extern &quot;C&quot;  x
493 #else
494 #define FT_EXPORT_DEF( x )  extern  x
495 #endif
496 
497 #endif /* !FT_EXPORT_DEF */
498 
499 
500 #ifndef FT_EXPORT_VAR
501 
502 #ifdef __cplusplus
503 #define FT_EXPORT_VAR( x )  extern &quot;C&quot;  x
504 #else
505 #define FT_EXPORT_VAR( x )  extern  x
506 #endif
507 
508 #endif /* !FT_EXPORT_VAR */
509 
510 
511   /* The following macros are needed to compile the library with a   */
512   /* C++ compiler and with 16bit compilers.                          */
513   /*                                                                 */
514 
<span class="line-modified">515   /* This is special.  Within C++, you must specify `extern &quot;C&quot;` for */</span>
516   /* functions which are used via function pointers, and you also    */
517   /* must do that for structures which contain function pointers to  */
518   /* assure C linkage -- it&#39;s not possible to have (local) anonymous */
519   /* functions which are accessed by (global) function pointers.     */
520   /*                                                                 */
521   /*                                                                 */
522   /* FT_CALLBACK_DEF is used to _define_ a callback function,        */
523   /* located in the same source code file as the structure that uses */
524   /* it.                                                             */
525   /*                                                                 */
526   /* FT_BASE_CALLBACK and FT_BASE_CALLBACK_DEF are used to declare   */
527   /* and define a callback function, respectively, in a similar way  */
528   /* as FT_BASE and FT_BASE_DEF work.                                */
529   /*                                                                 */
530   /* FT_CALLBACK_TABLE is used to _declare_ a constant variable that */
531   /* contains pointers to callback functions.                        */
532   /*                                                                 */
533   /* FT_CALLBACK_TABLE_DEF is used to _define_ a constant variable   */
534   /* that contains pointers to callback functions.                   */
535   /*                                                                 */
536   /*                                                                 */
537   /* Some 16bit compilers have to redefine these macros to insert    */
<span class="line-modified">538   /* the infamous `_cdecl` or `__fastcall` declarations.             */</span>
539   /*                                                                 */
540 #ifndef FT_CALLBACK_DEF
541 #ifdef __cplusplus
542 #define FT_CALLBACK_DEF( x )  extern &quot;C&quot;  x
543 #else
544 #define FT_CALLBACK_DEF( x )  static  x
545 #endif
546 #endif /* FT_CALLBACK_DEF */
547 
548 #ifndef FT_BASE_CALLBACK
549 #ifdef __cplusplus
550 #define FT_BASE_CALLBACK( x )      extern &quot;C&quot;  x
551 #define FT_BASE_CALLBACK_DEF( x )  extern &quot;C&quot;  x
552 #else
553 #define FT_BASE_CALLBACK( x )      extern  x
554 #define FT_BASE_CALLBACK_DEF( x )  x
555 #endif
556 #endif /* FT_BASE_CALLBACK */
557 
558 #ifndef FT_CALLBACK_TABLE
</pre>
</td>
</tr>
</table>
<center><a href="../../../UPDATING.txt.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ftheader.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>