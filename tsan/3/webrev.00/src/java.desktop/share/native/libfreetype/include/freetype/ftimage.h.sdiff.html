<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/ftimage.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftgzip.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftincrem.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/ftimage.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">   1 /***************************************************************************/</span>
<span class="line-modified">   2 /*                                                                         */</span>
<span class="line-modified">   3 /*  ftimage.h                                                              */</span>
<span class="line-modified">   4 /*                                                                         */</span>
<span class="line-modified">   5 /*    FreeType glyph image formats and default raster interface            */</span>
<span class="line-modified">   6 /*    (specification).                                                     */</span>
<span class="line-modified">   7 /*                                                                         */</span>
<span class="line-modified">   8 /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">   9 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">  10 /*                                                                         */</span>
<span class="line-modified">  11 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">  12 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">  13 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">  14 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">  15 /*  understand and accept it fully.                                        */</span>
<span class="line-modified">  16 /*                                                                         */</span>
<span class="line-modified">  17 /***************************************************************************/</span>
<span class="line-modified">  18 </span>
<span class="line-modified">  19   /*************************************************************************/</span>
<span class="line-modified">  20   /*                                                                       */</span>
<span class="line-modified">  21   /* Note: A `raster&#39; is simply a scan-line converter, used to render      */</span>
<span class="line-modified">  22   /*       FT_Outlines into FT_Bitmaps.                                    */</span>
<span class="line-modified">  23   /*                                                                       */</span>
<span class="line-modified">  24   /*************************************************************************/</span>
  25 
  26 
  27 #ifndef FTIMAGE_H_
  28 #define FTIMAGE_H_
  29 
  30 
  31   /* STANDALONE_ is from ftgrays.c */
  32 #ifndef STANDALONE_
  33 #include &lt;ft2build.h&gt;
  34 #endif
  35 
  36 
  37 FT_BEGIN_HEADER
  38 
  39 
<span class="line-modified">  40   /*************************************************************************/</span>
<span class="line-modified">  41   /*                                                                       */</span>
<span class="line-modified">  42   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">  43   /*    basic_types                                                        */</span>
<span class="line-modified">  44   /*                                                                       */</span>
<span class="line-modified">  45   /*************************************************************************/</span>
<span class="line-modified">  46 </span>
<span class="line-modified">  47 </span>
<span class="line-modified">  48   /*************************************************************************/</span>
<span class="line-modified">  49   /*                                                                       */</span>
<span class="line-modified">  50   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">  51   /*    FT_Pos                                                             */</span>
<span class="line-modified">  52   /*                                                                       */</span>
<span class="line-modified">  53   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">  54   /*    The type FT_Pos is used to store vectorial coordinates.  Depending */</span>
<span class="line-modified">  55   /*    on the context, these can represent distances in integer font      */</span>
<span class="line-modified">  56   /*    units, or 16.16, or 26.6 fixed-point pixel coordinates.            */</span>
<span class="line-modified">  57   /*                                                                       */</span>
  58   typedef signed long  FT_Pos;
  59 
  60 
<span class="line-modified">  61   /*************************************************************************/</span>
<span class="line-modified">  62   /*                                                                       */</span>
<span class="line-modified">  63   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">  64   /*    FT_Vector                                                          */</span>
<span class="line-modified">  65   /*                                                                       */</span>
<span class="line-modified">  66   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">  67   /*    A simple structure used to store a 2D vector; coordinates are of   */</span>
<span class="line-modified">  68   /*    the FT_Pos type.                                                   */</span>
<span class="line-modified">  69   /*                                                                       */</span>
<span class="line-modified">  70   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">  71   /*    x :: The horizontal coordinate.                                    */</span>
<span class="line-modified">  72   /*    y :: The vertical coordinate.                                      */</span>
<span class="line-modified">  73   /*                                                                       */</span>


  74   typedef struct  FT_Vector_
  75   {
  76     FT_Pos  x;
  77     FT_Pos  y;
  78 
  79   } FT_Vector;
  80 
  81 
<span class="line-modified">  82   /*************************************************************************/</span>
<span class="line-modified">  83   /*                                                                       */</span>
<span class="line-modified">  84   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">  85   /*    FT_BBox                                                            */</span>
<span class="line-modified">  86   /*                                                                       */</span>
<span class="line-modified">  87   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">  88   /*    A structure used to hold an outline&#39;s bounding box, i.e., the      */</span>
<span class="line-modified">  89   /*    coordinates of its extrema in the horizontal and vertical          */</span>
<span class="line-modified">  90   /*    directions.                                                        */</span>
<span class="line-modified">  91   /*                                                                       */</span>
<span class="line-modified">  92   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">  93   /*    xMin :: The horizontal minimum (left-most).                        */</span>
<span class="line-modified">  94   /*                                                                       */</span>
<span class="line-modified">  95   /*    yMin :: The vertical minimum (bottom-most).                        */</span>
<span class="line-modified">  96   /*                                                                       */</span>
<span class="line-modified">  97   /*    xMax :: The horizontal maximum (right-most).                       */</span>
<span class="line-modified">  98   /*                                                                       */</span>
<span class="line-modified">  99   /*    yMax :: The vertical maximum (top-most).                           */</span>
<span class="line-modified"> 100   /*                                                                       */</span>
<span class="line-modified"> 101   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 102   /*    The bounding box is specified with the coordinates of the lower    */</span>
<span class="line-modified"> 103   /*    left and the upper right corner.  In PostScript, those values are  */</span>
<span class="line-modified"> 104   /*    often called (llx,lly) and (urx,ury), respectively.                */</span>
<span class="line-modified"> 105   /*                                                                       */</span>
<span class="line-modified"> 106   /*    If `yMin&#39; is negative, this value gives the glyph&#39;s descender.     */</span>
<span class="line-modified"> 107   /*    Otherwise, the glyph doesn&#39;t descend below the baseline.           */</span>
<span class="line-modified"> 108   /*    Similarly, if `ymax&#39; is positive, this value gives the glyph&#39;s     */</span>
<span class="line-modified"> 109   /*    ascender.                                                          */</span>
<span class="line-modified"> 110   /*                                                                       */</span>
<span class="line-modified"> 111   /*    `xMin&#39; gives the horizontal distance from the glyph&#39;s origin to    */</span>
<span class="line-modified"> 112   /*    the left edge of the glyph&#39;s bounding box.  If `xMin&#39; is negative, */</span>
<span class="line-modified"> 113   /*    the glyph extends to the left of the origin.                       */</span>
<span class="line-modified"> 114   /*                                                                       */</span>


 115   typedef struct  FT_BBox_
 116   {
 117     FT_Pos  xMin, yMin;
 118     FT_Pos  xMax, yMax;
 119 
 120   } FT_BBox;
 121 
 122 
<span class="line-modified"> 123   /*************************************************************************/</span>
<span class="line-modified"> 124   /*                                                                       */</span>
<span class="line-modified"> 125   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified"> 126   /*    FT_Pixel_Mode                                                      */</span>
<span class="line-modified"> 127   /*                                                                       */</span>
<span class="line-modified"> 128   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 129   /*    An enumeration type used to describe the format of pixels in a     */</span>
<span class="line-modified"> 130   /*    given bitmap.  Note that additional formats may be added in the    */</span>
<span class="line-modified"> 131   /*    future.                                                            */</span>
<span class="line-modified"> 132   /*                                                                       */</span>
<span class="line-modified"> 133   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified"> 134   /*    FT_PIXEL_MODE_NONE ::                                              */</span>
<span class="line-modified"> 135   /*      Value~0 is reserved.                                             */</span>
<span class="line-modified"> 136   /*                                                                       */</span>
<span class="line-modified"> 137   /*    FT_PIXEL_MODE_MONO ::                                              */</span>
<span class="line-modified"> 138   /*      A monochrome bitmap, using 1~bit per pixel.  Note that pixels    */</span>
<span class="line-modified"> 139   /*      are stored in most-significant order (MSB), which means that     */</span>
<span class="line-modified"> 140   /*      the left-most pixel in a byte has value 128.                     */</span>
<span class="line-modified"> 141   /*                                                                       */</span>
<span class="line-modified"> 142   /*    FT_PIXEL_MODE_GRAY ::                                              */</span>
<span class="line-modified"> 143   /*      An 8-bit bitmap, generally used to represent anti-aliased glyph  */</span>
<span class="line-modified"> 144   /*      images.  Each pixel is stored in one byte.  Note that the number */</span>
<span class="line-modified"> 145   /*      of `gray&#39; levels is stored in the `num_grays&#39; field of the       */</span>
<span class="line-modified"> 146   /*      @FT_Bitmap structure (it generally is 256).                      */</span>
<span class="line-modified"> 147   /*                                                                       */</span>
<span class="line-modified"> 148   /*    FT_PIXEL_MODE_GRAY2 ::                                             */</span>
<span class="line-modified"> 149   /*      A 2-bit per pixel bitmap, used to represent embedded             */</span>
<span class="line-modified"> 150   /*      anti-aliased bitmaps in font files according to the OpenType     */</span>
<span class="line-modified"> 151   /*      specification.  We haven&#39;t found a single font using this        */</span>
<span class="line-modified"> 152   /*      format, however.                                                 */</span>
<span class="line-modified"> 153   /*                                                                       */</span>
<span class="line-modified"> 154   /*    FT_PIXEL_MODE_GRAY4 ::                                             */</span>
<span class="line-modified"> 155   /*      A 4-bit per pixel bitmap, representing embedded anti-aliased     */</span>
<span class="line-modified"> 156   /*      bitmaps in font files according to the OpenType specification.   */</span>
<span class="line-modified"> 157   /*      We haven&#39;t found a single font using this format, however.       */</span>
<span class="line-modified"> 158   /*                                                                       */</span>
<span class="line-modified"> 159   /*    FT_PIXEL_MODE_LCD ::                                               */</span>
<span class="line-modified"> 160   /*      An 8-bit bitmap, representing RGB or BGR decimated glyph images  */</span>
<span class="line-modified"> 161   /*      used for display on LCD displays; the bitmap is three times      */</span>
<span class="line-modified"> 162   /*      wider than the original glyph image.  See also                   */</span>
<span class="line-modified"> 163   /*      @FT_RENDER_MODE_LCD.                                             */</span>
<span class="line-modified"> 164   /*                                                                       */</span>
<span class="line-modified"> 165   /*    FT_PIXEL_MODE_LCD_V ::                                             */</span>
<span class="line-modified"> 166   /*      An 8-bit bitmap, representing RGB or BGR decimated glyph images  */</span>
<span class="line-modified"> 167   /*      used for display on rotated LCD displays; the bitmap is three    */</span>
<span class="line-modified"> 168   /*      times taller than the original glyph image.  See also            */</span>
<span class="line-modified"> 169   /*      @FT_RENDER_MODE_LCD_V.                                           */</span>
<span class="line-modified"> 170   /*                                                                       */</span>
<span class="line-modified"> 171   /*    FT_PIXEL_MODE_BGRA ::                                              */</span>
<span class="line-modified"> 172   /*      [Since 2.5] An image with four 8-bit channels per pixel,         */</span>
<span class="line-modified"> 173   /*      representing a color image (such as emoticons) with alpha        */</span>
<span class="line-modified"> 174   /*      channel.  For each pixel, the format is BGRA, which means, the   */</span>
<span class="line-modified"> 175   /*      blue channel comes first in memory.  The color channels are      */</span>
<span class="line-modified"> 176   /*      pre-multiplied and in the sRGB colorspace.  For example, full    */</span>
<span class="line-removed"> 177   /*      red at half-translucent opacity will be represented as           */</span>
<span class="line-removed"> 178   /*      `00,00,80,80&#39;, not `00,00,FF,80&#39;.  See also @FT_LOAD_COLOR.      */</span>
<span class="line-removed"> 179   /*                                                                       */</span>
 180   typedef enum  FT_Pixel_Mode_
 181   {
 182     FT_PIXEL_MODE_NONE = 0,
 183     FT_PIXEL_MODE_MONO,
 184     FT_PIXEL_MODE_GRAY,
 185     FT_PIXEL_MODE_GRAY2,
 186     FT_PIXEL_MODE_GRAY4,
 187     FT_PIXEL_MODE_LCD,
 188     FT_PIXEL_MODE_LCD_V,
 189     FT_PIXEL_MODE_BGRA,
 190 
 191     FT_PIXEL_MODE_MAX      /* do not remove */
 192 
 193   } FT_Pixel_Mode;
 194 
 195 
<span class="line-modified"> 196   /* these constants are deprecated; use the corresponding `FT_Pixel_Mode&#39; */</span>
 197   /* values instead.                                                       */
 198 #define ft_pixel_mode_none   FT_PIXEL_MODE_NONE
 199 #define ft_pixel_mode_mono   FT_PIXEL_MODE_MONO
 200 #define ft_pixel_mode_grays  FT_PIXEL_MODE_GRAY
 201 #define ft_pixel_mode_pal2   FT_PIXEL_MODE_GRAY2
 202 #define ft_pixel_mode_pal4   FT_PIXEL_MODE_GRAY4
 203 
 204 
<span class="line-modified"> 205   /*************************************************************************/</span>
<span class="line-modified"> 206   /*                                                                       */</span>
<span class="line-modified"> 207   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 208   /*    FT_Bitmap                                                          */</span>
<span class="line-modified"> 209   /*                                                                       */</span>
<span class="line-modified"> 210   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 211   /*    A structure used to describe a bitmap or pixmap to the raster.     */</span>
<span class="line-modified"> 212   /*    Note that we now manage pixmaps of various depths through the      */</span>
<span class="line-modified"> 213   /*    `pixel_mode&#39; field.                                                */</span>
<span class="line-modified"> 214   /*                                                                       */</span>
<span class="line-modified"> 215   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 216   /*    rows         :: The number of bitmap rows.                         */</span>
<span class="line-modified"> 217   /*                                                                       */</span>
<span class="line-modified"> 218   /*    width        :: The number of pixels in bitmap row.                */</span>
<span class="line-modified"> 219   /*                                                                       */</span>
<span class="line-modified"> 220   /*    pitch        :: The pitch&#39;s absolute value is the number of bytes  */</span>
<span class="line-modified"> 221   /*                    taken by one bitmap row, including padding.        */</span>
<span class="line-modified"> 222   /*                    However, the pitch is positive when the bitmap has */</span>
<span class="line-modified"> 223   /*                    a `down&#39; flow, and negative when it has an `up&#39;    */</span>
<span class="line-modified"> 224   /*                    flow.  In all cases, the pitch is an offset to add */</span>
<span class="line-modified"> 225   /*                    to a bitmap pointer in order to go down one row.   */</span>
<span class="line-modified"> 226   /*                                                                       */</span>
<span class="line-modified"> 227   /*                    Note that `padding&#39; means the alignment of a       */</span>
<span class="line-modified"> 228   /*                    bitmap to a byte border, and FreeType functions    */</span>
<span class="line-modified"> 229   /*                    normally align to the smallest possible integer    */</span>
<span class="line-modified"> 230   /*                    value.                                             */</span>
<span class="line-modified"> 231   /*                                                                       */</span>
<span class="line-modified"> 232   /*                    For the B/W rasterizer, `pitch&#39; is always an even  */</span>
<span class="line-modified"> 233   /*                    number.                                            */</span>
<span class="line-modified"> 234   /*                                                                       */</span>
<span class="line-modified"> 235   /*                    To change the pitch of a bitmap (say, to make it a */</span>
<span class="line-modified"> 236   /*                    multiple of 4), use @FT_Bitmap_Convert.            */</span>
<span class="line-modified"> 237   /*                    Alternatively, you might use callback functions to */</span>
<span class="line-modified"> 238   /*                    directly render to the application&#39;s surface; see  */</span>
<span class="line-modified"> 239   /*                    the file `example2.cpp&#39; in the tutorial for a      */</span>
<span class="line-modified"> 240   /*                    demonstration.                                     */</span>
<span class="line-modified"> 241   /*                                                                       */</span>
<span class="line-modified"> 242   /*    buffer       :: A typeless pointer to the bitmap buffer.  This     */</span>
<span class="line-modified"> 243   /*                    value should be aligned on 32-bit boundaries in    */</span>
<span class="line-modified"> 244   /*                    most cases.                                        */</span>
<span class="line-modified"> 245   /*                                                                       */</span>
<span class="line-modified"> 246   /*    num_grays    :: This field is only used with                       */</span>
<span class="line-modified"> 247   /*                    @FT_PIXEL_MODE_GRAY; it gives the number of gray   */</span>
<span class="line-modified"> 248   /*                    levels used in the bitmap.                         */</span>
<span class="line-modified"> 249   /*                                                                       */</span>
<span class="line-modified"> 250   /*    pixel_mode   :: The pixel mode, i.e., how pixel bits are stored.   */</span>
<span class="line-modified"> 251   /*                    See @FT_Pixel_Mode for possible values.            */</span>
<span class="line-modified"> 252   /*                                                                       */</span>
<span class="line-modified"> 253   /*    palette_mode :: This field is intended for paletted pixel modes;   */</span>
<span class="line-modified"> 254   /*                    it indicates how the palette is stored.  Not       */</span>
<span class="line-modified"> 255   /*                    used currently.                                    */</span>
<span class="line-modified"> 256   /*                                                                       */</span>
<span class="line-modified"> 257   /*    palette      :: A typeless pointer to the bitmap palette; this     */</span>
<span class="line-modified"> 258   /*                    field is intended for paletted pixel modes.  Not   */</span>
<span class="line-modified"> 259   /*                    used currently.                                    */</span>
<span class="line-removed"> 260   /*                                                                       */</span>
 261   typedef struct  FT_Bitmap_
 262   {
 263     unsigned int    rows;
 264     unsigned int    width;
 265     int             pitch;
 266     unsigned char*  buffer;
 267     unsigned short  num_grays;
 268     unsigned char   pixel_mode;
 269     unsigned char   palette_mode;
 270     void*           palette;
 271 
 272   } FT_Bitmap;
 273 
 274 
<span class="line-modified"> 275   /*************************************************************************/</span>
<span class="line-modified"> 276   /*                                                                       */</span>
<span class="line-modified"> 277   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 278   /*    outline_processing                                                 */</span>
<span class="line-modified"> 279   /*                                                                       */</span>
<span class="line-modified"> 280   /*************************************************************************/</span>
<span class="line-modified"> 281 </span>
<span class="line-modified"> 282 </span>
<span class="line-modified"> 283   /*************************************************************************/</span>
<span class="line-modified"> 284   /*                                                                       */</span>
<span class="line-modified"> 285   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 286   /*    FT_Outline                                                         */</span>
<span class="line-modified"> 287   /*                                                                       */</span>
<span class="line-modified"> 288   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 289   /*    This structure is used to describe an outline to the scan-line     */</span>
<span class="line-modified"> 290   /*    converter.                                                         */</span>
<span class="line-modified"> 291   /*                                                                       */</span>
<span class="line-modified"> 292   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 293   /*    n_contours :: The number of contours in the outline.               */</span>
<span class="line-modified"> 294   /*                                                                       */</span>
<span class="line-modified"> 295   /*    n_points   :: The number of points in the outline.                 */</span>
<span class="line-modified"> 296   /*                                                                       */</span>
<span class="line-modified"> 297   /*    points     :: A pointer to an array of `n_points&#39; @FT_Vector       */</span>
<span class="line-modified"> 298   /*                  elements, giving the outline&#39;s point coordinates.    */</span>
<span class="line-modified"> 299   /*                                                                       */</span>
<span class="line-modified"> 300   /*    tags       :: A pointer to an array of `n_points&#39; chars, giving    */</span>
<span class="line-modified"> 301   /*                  each outline point&#39;s type.                           */</span>
<span class="line-modified"> 302   /*                                                                       */</span>
<span class="line-modified"> 303   /*                  If bit~0 is unset, the point is `off&#39; the curve,     */</span>
<span class="line-modified"> 304   /*                  i.e., a Bezier control point, while it is `on&#39; if    */</span>
<span class="line-modified"> 305   /*                  set.                                                 */</span>
<span class="line-modified"> 306   /*                                                                       */</span>
<span class="line-modified"> 307   /*                  Bit~1 is meaningful for `off&#39; points only.  If set,  */</span>
<span class="line-modified"> 308   /*                  it indicates a third-order Bezier arc control point; */</span>
<span class="line-modified"> 309   /*                  and a second-order control point if unset.           */</span>
<span class="line-modified"> 310   /*                                                                       */</span>
<span class="line-modified"> 311   /*                  If bit~2 is set, bits 5-7 contain the drop-out mode  */</span>
<span class="line-modified"> 312   /*                  (as defined in the OpenType specification; the value */</span>
<span class="line-modified"> 313   /*                  is the same as the argument to the SCANMODE          */</span>
<span class="line-modified"> 314   /*                  instruction).                                        */</span>
<span class="line-modified"> 315   /*                                                                       */</span>
<span class="line-modified"> 316   /*                  Bits 3 and~4 are reserved for internal purposes.     */</span>
<span class="line-modified"> 317   /*                                                                       */</span>
<span class="line-modified"> 318   /*    contours   :: An array of `n_contours&#39; shorts, giving the end      */</span>
<span class="line-modified"> 319   /*                  point of each contour within the outline.  For       */</span>
<span class="line-modified"> 320   /*                  example, the first contour is defined by the points  */</span>
<span class="line-modified"> 321   /*                  `0&#39; to `contours[0]&#39;, the second one is defined by   */</span>
<span class="line-modified"> 322   /*                  the points `contours[0]+1&#39; to `contours[1]&#39;, etc.    */</span>
<span class="line-modified"> 323   /*                                                                       */</span>
<span class="line-modified"> 324   /*    flags      :: A set of bit flags used to characterize the outline  */</span>
<span class="line-modified"> 325   /*                  and give hints to the scan-converter and hinter on   */</span>
<span class="line-modified"> 326   /*                  how to convert/grid-fit it.  See @FT_OUTLINE_XXX.    */</span>
<span class="line-modified"> 327   /*                                                                       */</span>
<span class="line-modified"> 328   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 329   /*    The B/W rasterizer only checks bit~2 in the `tags&#39; array for the   */</span>
<span class="line-modified"> 330   /*    first point of each contour.  The drop-out mode as given with      */</span>
<span class="line-modified"> 331   /*    @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, and       */</span>
<span class="line-modified"> 332   /*    @FT_OUTLINE_INCLUDE_STUBS in `flags&#39; is then overridden.           */</span>
<span class="line-modified"> 333   /*                                                                       */</span>



 334   typedef struct  FT_Outline_
 335   {
 336     short       n_contours;      /* number of contours in glyph        */
 337     short       n_points;        /* number of points in the glyph      */
 338 
 339     FT_Vector*  points;          /* the outline&#39;s points               */
 340     char*       tags;            /* the points flags                   */
 341     short*      contours;        /* the contour end points             */
 342 
 343     int         flags;           /* outline masks                      */
 344 
 345   } FT_Outline;
 346 
 347   /* */
 348 
 349   /* Following limits must be consistent with */
 350   /* FT_Outline.{n_contours,n_points}         */
 351 #define FT_OUTLINE_CONTOURS_MAX  SHRT_MAX
 352 #define FT_OUTLINE_POINTS_MAX    SHRT_MAX
 353 
 354 
<span class="line-modified"> 355   /*************************************************************************/</span>
<span class="line-modified"> 356   /*                                                                       */</span>
<span class="line-modified"> 357   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified"> 358   /*    FT_OUTLINE_XXX                                                     */</span>
<span class="line-modified"> 359   /*                                                                       */</span>
<span class="line-modified"> 360   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 361   /*    A list of bit-field constants use for the flags in an outline&#39;s    */</span>
<span class="line-modified"> 362   /*    `flags&#39; field.                                                     */</span>
<span class="line-modified"> 363   /*                                                                       */</span>
<span class="line-modified"> 364   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified"> 365   /*    FT_OUTLINE_NONE ::                                                 */</span>
<span class="line-modified"> 366   /*      Value~0 is reserved.                                             */</span>
<span class="line-modified"> 367   /*                                                                       */</span>
<span class="line-modified"> 368   /*    FT_OUTLINE_OWNER ::                                                */</span>
<span class="line-modified"> 369   /*      If set, this flag indicates that the outline&#39;s field arrays      */</span>
<span class="line-modified"> 370   /*      (i.e., `points&#39;, `flags&#39;, and `contours&#39;) are `owned&#39; by the     */</span>
<span class="line-modified"> 371   /*      outline object, and should thus be freed when it is destroyed.   */</span>
<span class="line-modified"> 372   /*                                                                       */</span>
<span class="line-modified"> 373   /*    FT_OUTLINE_EVEN_ODD_FILL ::                                        */</span>
<span class="line-modified"> 374   /*      By default, outlines are filled using the non-zero winding rule. */</span>
<span class="line-modified"> 375   /*      If set to 1, the outline will be filled using the even-odd fill  */</span>
<span class="line-modified"> 376   /*      rule (only works with the smooth rasterizer).                    */</span>
<span class="line-modified"> 377   /*                                                                       */</span>
<span class="line-modified"> 378   /*    FT_OUTLINE_REVERSE_FILL ::                                         */</span>
<span class="line-modified"> 379   /*      By default, outside contours of an outline are oriented in       */</span>
<span class="line-modified"> 380   /*      clock-wise direction, as defined in the TrueType specification.  */</span>
<span class="line-modified"> 381   /*      This flag is set if the outline uses the opposite direction      */</span>
<span class="line-modified"> 382   /*      (typically for Type~1 fonts).  This flag is ignored by the scan  */</span>
<span class="line-modified"> 383   /*      converter.                                                       */</span>
<span class="line-modified"> 384   /*                                                                       */</span>
<span class="line-modified"> 385   /*    FT_OUTLINE_IGNORE_DROPOUTS ::                                      */</span>
<span class="line-modified"> 386   /*      By default, the scan converter will try to detect drop-outs in   */</span>
<span class="line-modified"> 387   /*      an outline and correct the glyph bitmap to ensure consistent     */</span>
<span class="line-modified"> 388   /*      shape continuity.  If set, this flag hints the scan-line         */</span>
<span class="line-modified"> 389   /*      converter to ignore such cases.  See below for more information. */</span>
<span class="line-modified"> 390   /*                                                                       */</span>
<span class="line-modified"> 391   /*    FT_OUTLINE_SMART_DROPOUTS ::                                       */</span>
<span class="line-modified"> 392   /*      Select smart dropout control.  If unset, use simple dropout      */</span>
<span class="line-modified"> 393   /*      control.  Ignored if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See    */</span>
<span class="line-modified"> 394   /*      below for more information.                                      */</span>
<span class="line-modified"> 395   /*                                                                       */</span>
<span class="line-modified"> 396   /*    FT_OUTLINE_INCLUDE_STUBS ::                                        */</span>
<span class="line-modified"> 397   /*      If set, turn pixels on for `stubs&#39;, otherwise exclude them.      */</span>
<span class="line-modified"> 398   /*      Ignored if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See below for    */</span>
<span class="line-modified"> 399   /*      more information.                                                */</span>
<span class="line-modified"> 400   /*                                                                       */</span>
<span class="line-modified"> 401   /*    FT_OUTLINE_HIGH_PRECISION ::                                       */</span>
<span class="line-modified"> 402   /*      This flag indicates that the scan-line converter should try to   */</span>
<span class="line-modified"> 403   /*      convert this outline to bitmaps with the highest possible        */</span>
<span class="line-modified"> 404   /*      quality.  It is typically set for small character sizes.  Note   */</span>
<span class="line-modified"> 405   /*      that this is only a hint that might be completely ignored by a   */</span>
<span class="line-modified"> 406   /*      given scan-converter.                                            */</span>
<span class="line-modified"> 407   /*                                                                       */</span>
<span class="line-modified"> 408   /*    FT_OUTLINE_SINGLE_PASS ::                                          */</span>
<span class="line-modified"> 409   /*      This flag is set to force a given scan-converter to only use a   */</span>
<span class="line-modified"> 410   /*      single pass over the outline to render a bitmap glyph image.     */</span>
<span class="line-modified"> 411   /*      Normally, it is set for very large character sizes.  It is only  */</span>
<span class="line-modified"> 412   /*      a hint that might be completely ignored by a given               */</span>
<span class="line-modified"> 413   /*      scan-converter.                                                  */</span>
<span class="line-modified"> 414   /*                                                                       */</span>
<span class="line-modified"> 415   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 416   /*    The flags @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, */</span>
<span class="line-modified"> 417   /*    and @FT_OUTLINE_INCLUDE_STUBS are ignored by the smooth            */</span>
<span class="line-modified"> 418   /*    rasterizer.                                                        */</span>
<span class="line-modified"> 419   /*                                                                       */</span>
<span class="line-modified"> 420   /*    There exists a second mechanism to pass the drop-out mode to the   */</span>
<span class="line-modified"> 421   /*    B/W rasterizer; see the `tags&#39; field in @FT_Outline.               */</span>
<span class="line-modified"> 422   /*                                                                       */</span>
<span class="line-modified"> 423   /*    Please refer to the description of the `SCANTYPE&#39; instruction in   */</span>
<span class="line-modified"> 424   /*    the OpenType specification (in file `ttinst1.doc&#39;) how simple      */</span>
<span class="line-removed"> 425   /*    drop-outs, smart drop-outs, and stubs are defined.                 */</span>
<span class="line-removed"> 426   /*                                                                       */</span>
 427 #define FT_OUTLINE_NONE             0x0
 428 #define FT_OUTLINE_OWNER            0x1
 429 #define FT_OUTLINE_EVEN_ODD_FILL    0x2
 430 #define FT_OUTLINE_REVERSE_FILL     0x4
 431 #define FT_OUTLINE_IGNORE_DROPOUTS  0x8
 432 #define FT_OUTLINE_SMART_DROPOUTS   0x10
 433 #define FT_OUTLINE_INCLUDE_STUBS    0x20
 434 
 435 #define FT_OUTLINE_HIGH_PRECISION   0x100
 436 #define FT_OUTLINE_SINGLE_PASS      0x200
 437 
 438 
 439   /* these constants are deprecated; use the corresponding */
<span class="line-modified"> 440   /* `FT_OUTLINE_XXX&#39; values instead                       */</span>
 441 #define ft_outline_none             FT_OUTLINE_NONE
 442 #define ft_outline_owner            FT_OUTLINE_OWNER
 443 #define ft_outline_even_odd_fill    FT_OUTLINE_EVEN_ODD_FILL
 444 #define ft_outline_reverse_fill     FT_OUTLINE_REVERSE_FILL
 445 #define ft_outline_ignore_dropouts  FT_OUTLINE_IGNORE_DROPOUTS
 446 #define ft_outline_high_precision   FT_OUTLINE_HIGH_PRECISION
 447 #define ft_outline_single_pass      FT_OUTLINE_SINGLE_PASS
 448 
 449   /* */
 450 
<span class="line-modified"> 451 #define FT_CURVE_TAG( flag )  ( flag &amp; 3 )</span>
 452 
<span class="line-modified"> 453 #define FT_CURVE_TAG_ON            1</span>
<span class="line-modified"> 454 #define FT_CURVE_TAG_CONIC         0</span>
<span class="line-modified"> 455 #define FT_CURVE_TAG_CUBIC         2</span>

 456 
<span class="line-modified"> 457 #define FT_CURVE_TAG_HAS_SCANMODE  4</span>
 458 
<span class="line-modified"> 459 #define FT_CURVE_TAG_TOUCH_X       8  /* reserved for the TrueType hinter */</span>
<span class="line-modified"> 460 #define FT_CURVE_TAG_TOUCH_Y      16  /* reserved for the TrueType hinter */</span>
 461 
 462 #define FT_CURVE_TAG_TOUCH_BOTH    ( FT_CURVE_TAG_TOUCH_X | \
 463                                      FT_CURVE_TAG_TOUCH_Y )


 464 


 465 #define FT_Curve_Tag_On       FT_CURVE_TAG_ON
 466 #define FT_Curve_Tag_Conic    FT_CURVE_TAG_CONIC
 467 #define FT_Curve_Tag_Cubic    FT_CURVE_TAG_CUBIC
 468 #define FT_Curve_Tag_Touch_X  FT_CURVE_TAG_TOUCH_X
 469 #define FT_Curve_Tag_Touch_Y  FT_CURVE_TAG_TOUCH_Y
 470 
 471 
<span class="line-modified"> 472   /*************************************************************************/</span>
<span class="line-modified"> 473   /*                                                                       */</span>
<span class="line-modified"> 474   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 475   /*    FT_Outline_MoveToFunc                                              */</span>
<span class="line-modified"> 476   /*                                                                       */</span>
<span class="line-modified"> 477   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 478   /*    A function pointer type used to describe the signature of a `move  */</span>
<span class="line-modified"> 479   /*    to&#39; function during outline walking/decomposition.                 */</span>
<span class="line-modified"> 480   /*                                                                       */</span>
<span class="line-modified"> 481   /*    A `move to&#39; is emitted to start a new contour in an outline.       */</span>
<span class="line-modified"> 482   /*                                                                       */</span>
<span class="line-modified"> 483   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 484   /*    to   :: A pointer to the target point of the `move to&#39;.            */</span>
<span class="line-modified"> 485   /*                                                                       */</span>
<span class="line-modified"> 486   /*    user :: A typeless pointer, which is passed from the caller of the */</span>
<span class="line-modified"> 487   /*            decomposition function.                                    */</span>
<span class="line-modified"> 488   /*                                                                       */</span>
<span class="line-modified"> 489   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified"> 490   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified"> 491   /*                                                                       */</span>


 492   typedef int
 493   (*FT_Outline_MoveToFunc)( const FT_Vector*  to,
 494                             void*             user );
 495 
 496 #define FT_Outline_MoveTo_Func  FT_Outline_MoveToFunc
 497 
 498 
<span class="line-modified"> 499   /*************************************************************************/</span>
<span class="line-modified"> 500   /*                                                                       */</span>
<span class="line-modified"> 501   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 502   /*    FT_Outline_LineToFunc                                              */</span>
<span class="line-modified"> 503   /*                                                                       */</span>
<span class="line-modified"> 504   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 505   /*    A function pointer type used to describe the signature of a `line  */</span>
<span class="line-modified"> 506   /*    to&#39; function during outline walking/decomposition.                 */</span>
<span class="line-modified"> 507   /*                                                                       */</span>
<span class="line-modified"> 508   /*    A `line to&#39; is emitted to indicate a segment in the outline.       */</span>
<span class="line-modified"> 509   /*                                                                       */</span>
<span class="line-modified"> 510   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 511   /*    to   :: A pointer to the target point of the `line to&#39;.            */</span>
<span class="line-modified"> 512   /*                                                                       */</span>
<span class="line-modified"> 513   /*    user :: A typeless pointer, which is passed from the caller of the */</span>
<span class="line-modified"> 514   /*            decomposition function.                                    */</span>
<span class="line-modified"> 515   /*                                                                       */</span>
<span class="line-modified"> 516   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified"> 517   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified"> 518   /*                                                                       */</span>


 519   typedef int
 520   (*FT_Outline_LineToFunc)( const FT_Vector*  to,
 521                             void*             user );
 522 
 523 #define FT_Outline_LineTo_Func  FT_Outline_LineToFunc
 524 
 525 
<span class="line-modified"> 526   /*************************************************************************/</span>
<span class="line-modified"> 527   /*                                                                       */</span>
<span class="line-modified"> 528   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 529   /*    FT_Outline_ConicToFunc                                             */</span>
<span class="line-modified"> 530   /*                                                                       */</span>
<span class="line-modified"> 531   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 532   /*    A function pointer type used to describe the signature of a `conic */</span>
<span class="line-modified"> 533   /*    to&#39; function during outline walking or decomposition.              */</span>
<span class="line-modified"> 534   /*                                                                       */</span>
<span class="line-modified"> 535   /*    A `conic to&#39; is emitted to indicate a second-order Bezier arc in   */</span>
<span class="line-modified"> 536   /*    the outline.                                                       */</span>
<span class="line-modified"> 537   /*                                                                       */</span>
<span class="line-modified"> 538   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 539   /*    control :: An intermediate control point between the last position */</span>
<span class="line-modified"> 540   /*               and the new target in `to&#39;.                             */</span>
<span class="line-modified"> 541   /*                                                                       */</span>
<span class="line-modified"> 542   /*    to      :: A pointer to the target end point of the conic arc.     */</span>
<span class="line-modified"> 543   /*                                                                       */</span>
<span class="line-modified"> 544   /*    user    :: A typeless pointer, which is passed from the caller of  */</span>
<span class="line-modified"> 545   /*               the decomposition function.                             */</span>
<span class="line-modified"> 546   /*                                                                       */</span>
<span class="line-modified"> 547   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified"> 548   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified"> 549   /*                                                                       */</span>



 550   typedef int
 551   (*FT_Outline_ConicToFunc)( const FT_Vector*  control,
 552                              const FT_Vector*  to,
 553                              void*             user );
 554 
 555 #define FT_Outline_ConicTo_Func  FT_Outline_ConicToFunc
 556 
 557 
<span class="line-modified"> 558   /*************************************************************************/</span>
<span class="line-modified"> 559   /*                                                                       */</span>
<span class="line-modified"> 560   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 561   /*    FT_Outline_CubicToFunc                                             */</span>
<span class="line-modified"> 562   /*                                                                       */</span>
<span class="line-modified"> 563   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 564   /*    A function pointer type used to describe the signature of a `cubic */</span>
<span class="line-modified"> 565   /*    to&#39; function during outline walking or decomposition.              */</span>
<span class="line-modified"> 566   /*                                                                       */</span>
<span class="line-modified"> 567   /*    A `cubic to&#39; is emitted to indicate a third-order Bezier arc.      */</span>
<span class="line-modified"> 568   /*                                                                       */</span>
<span class="line-modified"> 569   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 570   /*    control1 :: A pointer to the first Bezier control point.           */</span>
<span class="line-modified"> 571   /*                                                                       */</span>
<span class="line-modified"> 572   /*    control2 :: A pointer to the second Bezier control point.          */</span>
<span class="line-modified"> 573   /*                                                                       */</span>
<span class="line-modified"> 574   /*    to       :: A pointer to the target end point.                     */</span>
<span class="line-modified"> 575   /*                                                                       */</span>
<span class="line-modified"> 576   /*    user     :: A typeless pointer, which is passed from the caller of */</span>
<span class="line-modified"> 577   /*                the decomposition function.                            */</span>
<span class="line-modified"> 578   /*                                                                       */</span>
<span class="line-modified"> 579   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified"> 580   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified"> 581   /*                                                                       */</span>




 582   typedef int
 583   (*FT_Outline_CubicToFunc)( const FT_Vector*  control1,
 584                              const FT_Vector*  control2,
 585                              const FT_Vector*  to,
 586                              void*             user );
 587 
 588 #define FT_Outline_CubicTo_Func  FT_Outline_CubicToFunc
 589 
 590 
<span class="line-modified"> 591   /*************************************************************************/</span>
<span class="line-modified"> 592   /*                                                                       */</span>
<span class="line-modified"> 593   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 594   /*    FT_Outline_Funcs                                                   */</span>
<span class="line-modified"> 595   /*                                                                       */</span>
<span class="line-modified"> 596   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 597   /*    A structure to hold various function pointers used during outline  */</span>
<span class="line-modified"> 598   /*    decomposition in order to emit segments, conic, and cubic Beziers. */</span>
<span class="line-modified"> 599   /*                                                                       */</span>
<span class="line-modified"> 600   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 601   /*    move_to  :: The `move to&#39; emitter.                                 */</span>
<span class="line-modified"> 602   /*                                                                       */</span>
<span class="line-modified"> 603   /*    line_to  :: The segment emitter.                                   */</span>
<span class="line-modified"> 604   /*                                                                       */</span>
<span class="line-modified"> 605   /*    conic_to :: The second-order Bezier arc emitter.                   */</span>
<span class="line-modified"> 606   /*                                                                       */</span>
<span class="line-modified"> 607   /*    cubic_to :: The third-order Bezier arc emitter.                    */</span>
<span class="line-modified"> 608   /*                                                                       */</span>
<span class="line-modified"> 609   /*    shift    :: The shift that is applied to coordinates before they   */</span>
<span class="line-modified"> 610   /*                are sent to the emitter.                               */</span>
<span class="line-modified"> 611   /*                                                                       */</span>
<span class="line-modified"> 612   /*    delta    :: The delta that is applied to coordinates before they   */</span>
<span class="line-modified"> 613   /*                are sent to the emitter, but after the shift.          */</span>
<span class="line-modified"> 614   /*                                                                       */</span>
<span class="line-modified"> 615   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 616   /*    The point coordinates sent to the emitters are the transformed     */</span>
<span class="line-modified"> 617   /*    version of the original coordinates (this is important for high    */</span>
<span class="line-modified"> 618   /*    accuracy during scan-conversion).  The transformation is simple:   */</span>
<span class="line-modified"> 619   /*                                                                       */</span>
<span class="line-modified"> 620   /*    {                                                                  */</span>
<span class="line-modified"> 621   /*      x&#39; = (x &lt;&lt; shift) - delta                                        */</span>
<span class="line-modified"> 622   /*      y&#39; = (y &lt;&lt; shift) - delta                                        */</span>
<span class="line-modified"> 623   /*    }                                                                  */</span>
<span class="line-modified"> 624   /*                                                                       */</span>
<span class="line-modified"> 625   /*    Set the values of `shift&#39; and `delta&#39; to~0 to get the original     */</span>
<span class="line-modified"> 626   /*    point coordinates.                                                 */</span>
<span class="line-modified"> 627   /*                                                                       */</span>






 628   typedef struct  FT_Outline_Funcs_
 629   {
 630     FT_Outline_MoveToFunc   move_to;
 631     FT_Outline_LineToFunc   line_to;
 632     FT_Outline_ConicToFunc  conic_to;
 633     FT_Outline_CubicToFunc  cubic_to;
 634 
 635     int                     shift;
 636     FT_Pos                  delta;
 637 
 638   } FT_Outline_Funcs;
 639 
 640 
<span class="line-modified"> 641   /*************************************************************************/</span>
<span class="line-modified"> 642   /*                                                                       */</span>
<span class="line-modified"> 643   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 644   /*    basic_types                                                        */</span>
<span class="line-modified"> 645   /*                                                                       */</span>
<span class="line-modified"> 646   /*************************************************************************/</span>
<span class="line-modified"> 647 </span>
<span class="line-modified"> 648 </span>
<span class="line-modified"> 649   /*************************************************************************/</span>
<span class="line-modified"> 650   /*                                                                       */</span>
<span class="line-modified"> 651   /* &lt;Macro&gt;                                                               */</span>
<span class="line-modified"> 652   /*    FT_IMAGE_TAG                                                       */</span>
<span class="line-modified"> 653   /*                                                                       */</span>
<span class="line-modified"> 654   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 655   /*    This macro converts four-letter tags to an unsigned long type.     */</span>
<span class="line-modified"> 656   /*                                                                       */</span>
<span class="line-modified"> 657   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 658   /*    Since many 16-bit compilers don&#39;t like 32-bit enumerations, you    */</span>
<span class="line-modified"> 659   /*    should redefine this macro in case of problems to something like   */</span>
<span class="line-modified"> 660   /*    this:                                                              */</span>
<span class="line-modified"> 661   /*                                                                       */</span>
<span class="line-modified"> 662   /*    {                                                                  */</span>
<span class="line-modified"> 663   /*      #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  value         */</span>
<span class="line-modified"> 664   /*    }                                                                  */</span>
<span class="line-modified"> 665   /*                                                                       */</span>
<span class="line-modified"> 666   /*    to get a simple enumeration without assigning special numbers.     */</span>
<span class="line-removed"> 667   /*                                                                       */</span>
 668 #ifndef FT_IMAGE_TAG
 669 #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  \
 670           value = ( ( (unsigned long)_x1 &lt;&lt; 24 ) | \
 671                     ( (unsigned long)_x2 &lt;&lt; 16 ) | \
 672                     ( (unsigned long)_x3 &lt;&lt; 8  ) | \
 673                       (unsigned long)_x4         )
 674 #endif /* FT_IMAGE_TAG */
 675 
 676 
<span class="line-modified"> 677   /*************************************************************************/</span>
<span class="line-modified"> 678   /*                                                                       */</span>
<span class="line-modified"> 679   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified"> 680   /*    FT_Glyph_Format                                                    */</span>
<span class="line-modified"> 681   /*                                                                       */</span>
<span class="line-modified"> 682   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 683   /*    An enumeration type used to describe the format of a given glyph   */</span>
<span class="line-modified"> 684   /*    image.  Note that this version of FreeType only supports two image */</span>
<span class="line-modified"> 685   /*    formats, even though future font drivers will be able to register  */</span>
<span class="line-modified"> 686   /*    their own format.                                                  */</span>
<span class="line-modified"> 687   /*                                                                       */</span>
<span class="line-modified"> 688   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified"> 689   /*    FT_GLYPH_FORMAT_NONE ::                                            */</span>
<span class="line-modified"> 690   /*      The value~0 is reserved.                                         */</span>
<span class="line-modified"> 691   /*                                                                       */</span>
<span class="line-modified"> 692   /*    FT_GLYPH_FORMAT_COMPOSITE ::                                       */</span>
<span class="line-modified"> 693   /*      The glyph image is a composite of several other images.  This    */</span>
<span class="line-modified"> 694   /*      format is _only_ used with @FT_LOAD_NO_RECURSE, and is used to   */</span>
<span class="line-modified"> 695   /*      report compound glyphs (like accented characters).               */</span>
<span class="line-modified"> 696   /*                                                                       */</span>
<span class="line-modified"> 697   /*    FT_GLYPH_FORMAT_BITMAP ::                                          */</span>
<span class="line-modified"> 698   /*      The glyph image is a bitmap, and can be described as an          */</span>
<span class="line-modified"> 699   /*      @FT_Bitmap.  You generally need to access the `bitmap&#39; field of  */</span>
<span class="line-modified"> 700   /*      the @FT_GlyphSlotRec structure to read it.                       */</span>
<span class="line-modified"> 701   /*                                                                       */</span>
<span class="line-modified"> 702   /*    FT_GLYPH_FORMAT_OUTLINE ::                                         */</span>
<span class="line-modified"> 703   /*      The glyph image is a vectorial outline made of line segments     */</span>
<span class="line-modified"> 704   /*      and Bezier arcs; it can be described as an @FT_Outline; you      */</span>
<span class="line-modified"> 705   /*      generally want to access the `outline&#39; field of the              */</span>
<span class="line-modified"> 706   /*      @FT_GlyphSlotRec structure to read it.                           */</span>
<span class="line-modified"> 707   /*                                                                       */</span>
<span class="line-modified"> 708   /*    FT_GLYPH_FORMAT_PLOTTER ::                                         */</span>
<span class="line-modified"> 709   /*      The glyph image is a vectorial path with no inside and outside   */</span>
<span class="line-modified"> 710   /*      contours.  Some Type~1 fonts, like those in the Hershey family,  */</span>
<span class="line-modified"> 711   /*      contain glyphs in this format.  These are described as           */</span>
<span class="line-modified"> 712   /*      @FT_Outline, but FreeType isn&#39;t currently capable of rendering   */</span>
<span class="line-modified"> 713   /*      them correctly.                                                  */</span>
<span class="line-removed"> 714   /*                                                                       */</span>
 715   typedef enum  FT_Glyph_Format_
 716   {
 717     FT_IMAGE_TAG( FT_GLYPH_FORMAT_NONE, 0, 0, 0, 0 ),
 718 
 719     FT_IMAGE_TAG( FT_GLYPH_FORMAT_COMPOSITE, &#39;c&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39; ),
 720     FT_IMAGE_TAG( FT_GLYPH_FORMAT_BITMAP,    &#39;b&#39;, &#39;i&#39;, &#39;t&#39;, &#39;s&#39; ),
 721     FT_IMAGE_TAG( FT_GLYPH_FORMAT_OUTLINE,   &#39;o&#39;, &#39;u&#39;, &#39;t&#39;, &#39;l&#39; ),
 722     FT_IMAGE_TAG( FT_GLYPH_FORMAT_PLOTTER,   &#39;p&#39;, &#39;l&#39;, &#39;o&#39;, &#39;t&#39; )
 723 
 724   } FT_Glyph_Format;
 725 
 726 
 727   /* these constants are deprecated; use the corresponding */
<span class="line-modified"> 728   /* `FT_Glyph_Format&#39; values instead.                     */</span>
 729 #define ft_glyph_format_none       FT_GLYPH_FORMAT_NONE
 730 #define ft_glyph_format_composite  FT_GLYPH_FORMAT_COMPOSITE
 731 #define ft_glyph_format_bitmap     FT_GLYPH_FORMAT_BITMAP
 732 #define ft_glyph_format_outline    FT_GLYPH_FORMAT_OUTLINE
 733 #define ft_glyph_format_plotter    FT_GLYPH_FORMAT_PLOTTER
 734 
 735 
 736   /*************************************************************************/
 737   /*************************************************************************/
 738   /*************************************************************************/
 739   /*****                                                               *****/
 740   /*****            R A S T E R   D E F I N I T I O N S                *****/
 741   /*****                                                               *****/
 742   /*************************************************************************/
 743   /*************************************************************************/
 744   /*************************************************************************/
 745 
 746 
<span class="line-modified"> 747   /*************************************************************************/</span>
<span class="line-modified"> 748   /*                                                                       */</span>
<span class="line-modified"> 749   /* A raster is a scan converter, in charge of rendering an outline into  */</span>
<span class="line-modified"> 750   /* a bitmap.  This section contains the public API for rasters.          */</span>
<span class="line-modified"> 751   /*                                                                       */</span>
<span class="line-modified"> 752   /* Note that in FreeType 2, all rasters are now encapsulated within      */</span>
<span class="line-modified"> 753   /* specific modules called `renderers&#39;.  See `ftrender.h&#39; for more       */</span>
<span class="line-modified"> 754   /* details on renderers.                                                 */</span>
<span class="line-modified"> 755   /*                                                                       */</span>
<span class="line-modified"> 756   /*************************************************************************/</span>
<span class="line-modified"> 757 </span>
<span class="line-modified"> 758 </span>
<span class="line-modified"> 759   /*************************************************************************/</span>
<span class="line-modified"> 760   /*                                                                       */</span>
<span class="line-modified"> 761   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 762   /*    raster                                                             */</span>
<span class="line-modified"> 763   /*                                                                       */</span>
<span class="line-modified"> 764   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified"> 765   /*    Scanline Converter                                                 */</span>
<span class="line-modified"> 766   /*                                                                       */</span>
<span class="line-modified"> 767   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified"> 768   /*    How vectorial outlines are converted into bitmaps and pixmaps.     */</span>
<span class="line-modified"> 769   /*                                                                       */</span>
<span class="line-modified"> 770   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 771   /*    This section contains technical definitions.                       */</span>
<span class="line-modified"> 772   /*                                                                       */</span>
<span class="line-modified"> 773   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified"> 774   /*    FT_Raster                                                          */</span>
<span class="line-modified"> 775   /*    FT_Span                                                            */</span>
<span class="line-modified"> 776   /*    FT_SpanFunc                                                        */</span>
<span class="line-modified"> 777   /*                                                                       */</span>
<span class="line-modified"> 778   /*    FT_Raster_Params                                                   */</span>
<span class="line-modified"> 779   /*    FT_RASTER_FLAG_XXX                                                 */</span>
<span class="line-modified"> 780   /*                                                                       */</span>
<span class="line-modified"> 781   /*    FT_Raster_NewFunc                                                  */</span>
<span class="line-modified"> 782   /*    FT_Raster_DoneFunc                                                 */</span>
<span class="line-modified"> 783   /*    FT_Raster_ResetFunc                                                */</span>
<span class="line-modified"> 784   /*    FT_Raster_SetModeFunc                                              */</span>
<span class="line-modified"> 785   /*    FT_Raster_RenderFunc                                               */</span>
<span class="line-modified"> 786   /*    FT_Raster_Funcs                                                    */</span>
<span class="line-modified"> 787   /*                                                                       */</span>
<span class="line-modified"> 788   /*************************************************************************/</span>
<span class="line-modified"> 789 </span>
<span class="line-modified"> 790 </span>
<span class="line-modified"> 791   /*************************************************************************/</span>
<span class="line-modified"> 792   /*                                                                       */</span>
<span class="line-modified"> 793   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 794   /*    FT_Raster                                                          */</span>
<span class="line-modified"> 795   /*                                                                       */</span>
<span class="line-modified"> 796   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 797   /*    An opaque handle (pointer) to a raster object.  Each object can be */</span>
<span class="line-modified"> 798   /*    used independently to convert an outline into a bitmap or pixmap.  */</span>
<span class="line-modified"> 799   /*                                                                       */</span>
 800   typedef struct FT_RasterRec_*  FT_Raster;
 801 
 802 
<span class="line-modified"> 803   /*************************************************************************/</span>
<span class="line-modified"> 804   /*                                                                       */</span>
<span class="line-modified"> 805   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 806   /*    FT_Span                                                            */</span>
<span class="line-modified"> 807   /*                                                                       */</span>
<span class="line-modified"> 808   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 809   /*    A structure used to model a single span of gray pixels when        */</span>
<span class="line-modified"> 810   /*    rendering an anti-aliased bitmap.                                  */</span>
<span class="line-modified"> 811   /*                                                                       */</span>
<span class="line-modified"> 812   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 813   /*    x        :: The span&#39;s horizontal start position.                  */</span>
<span class="line-modified"> 814   /*                                                                       */</span>
<span class="line-modified"> 815   /*    len      :: The span&#39;s length in pixels.                           */</span>
<span class="line-modified"> 816   /*                                                                       */</span>
<span class="line-modified"> 817   /*    coverage :: The span color/coverage, ranging from 0 (background)   */</span>
<span class="line-modified"> 818   /*                to 255 (foreground).                                   */</span>
<span class="line-modified"> 819   /*                                                                       */</span>
<span class="line-modified"> 820   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 821   /*    This structure is used by the span drawing callback type named     */</span>
<span class="line-modified"> 822   /*    @FT_SpanFunc that takes the y~coordinate of the span as a          */</span>
<span class="line-modified"> 823   /*    parameter.                                                         */</span>
<span class="line-modified"> 824   /*                                                                       */</span>
<span class="line-modified"> 825   /*    The coverage value is always between 0 and 255.  If you want less  */</span>
<span class="line-modified"> 826   /*    gray values, the callback function has to reduce them.             */</span>
<span class="line-modified"> 827   /*                                                                       */</span>


 828   typedef struct  FT_Span_
 829   {
 830     short           x;
 831     unsigned short  len;
 832     unsigned char   coverage;
 833 
 834   } FT_Span;
 835 
 836 
<span class="line-modified"> 837   /*************************************************************************/</span>
<span class="line-modified"> 838   /*                                                                       */</span>
<span class="line-modified"> 839   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 840   /*    FT_SpanFunc                                                        */</span>
<span class="line-modified"> 841   /*                                                                       */</span>
<span class="line-modified"> 842   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 843   /*    A function used as a call-back by the anti-aliased renderer in     */</span>
<span class="line-modified"> 844   /*    order to let client applications draw themselves the gray pixel    */</span>
<span class="line-modified"> 845   /*    spans on each scan line.                                           */</span>
<span class="line-modified"> 846   /*                                                                       */</span>
<span class="line-modified"> 847   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 848   /*    y     :: The scanline&#39;s y~coordinate.                              */</span>
<span class="line-modified"> 849   /*                                                                       */</span>
<span class="line-modified"> 850   /*    count :: The number of spans to draw on this scanline.             */</span>
<span class="line-modified"> 851   /*                                                                       */</span>
<span class="line-modified"> 852   /*    spans :: A table of `count&#39; spans to draw on the scanline.         */</span>
<span class="line-modified"> 853   /*                                                                       */</span>
<span class="line-modified"> 854   /*    user  :: User-supplied data that is passed to the callback.        */</span>
<span class="line-modified"> 855   /*                                                                       */</span>
<span class="line-modified"> 856   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 857   /*    This callback allows client applications to directly render the    */</span>
<span class="line-modified"> 858   /*    gray spans of the anti-aliased bitmap to any kind of surfaces.     */</span>
<span class="line-modified"> 859   /*                                                                       */</span>
<span class="line-modified"> 860   /*    This can be used to write anti-aliased outlines directly to a      */</span>
<span class="line-modified"> 861   /*    given background bitmap, and even perform translucency.            */</span>
<span class="line-modified"> 862   /*                                                                       */</span>




 863   typedef void
 864   (*FT_SpanFunc)( int             y,
 865                   int             count,
 866                   const FT_Span*  spans,
 867                   void*           user );
 868 
 869 #define FT_Raster_Span_Func  FT_SpanFunc
 870 
 871 
<span class="line-modified"> 872   /*************************************************************************/</span>
<span class="line-modified"> 873   /*                                                                       */</span>
<span class="line-modified"> 874   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 875   /*    FT_Raster_BitTest_Func                                             */</span>
<span class="line-modified"> 876   /*                                                                       */</span>
<span class="line-modified"> 877   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 878   /*    Deprecated, unimplemented.                                         */</span>
<span class="line-modified"> 879   /*                                                                       */</span>
 880   typedef int
 881   (*FT_Raster_BitTest_Func)( int    y,
 882                              int    x,
 883                              void*  user );
 884 
 885 
<span class="line-modified"> 886   /*************************************************************************/</span>
<span class="line-modified"> 887   /*                                                                       */</span>
<span class="line-modified"> 888   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 889   /*    FT_Raster_BitSet_Func                                              */</span>
<span class="line-modified"> 890   /*                                                                       */</span>
<span class="line-modified"> 891   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 892   /*    Deprecated, unimplemented.                                         */</span>
<span class="line-modified"> 893   /*                                                                       */</span>
 894   typedef void
 895   (*FT_Raster_BitSet_Func)( int    y,
 896                             int    x,
 897                             void*  user );
 898 
 899 
<span class="line-modified"> 900   /*************************************************************************/</span>
<span class="line-modified"> 901   /*                                                                       */</span>
<span class="line-modified"> 902   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified"> 903   /*    FT_RASTER_FLAG_XXX                                                 */</span>
<span class="line-modified"> 904   /*                                                                       */</span>
<span class="line-modified"> 905   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 906   /*    A list of bit flag constants as used in the `flags&#39; field of a     */</span>
<span class="line-modified"> 907   /*    @FT_Raster_Params structure.                                       */</span>
<span class="line-modified"> 908   /*                                                                       */</span>
<span class="line-modified"> 909   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified"> 910   /*    FT_RASTER_FLAG_DEFAULT :: This value is 0.                         */</span>
<span class="line-modified"> 911   /*                                                                       */</span>
<span class="line-modified"> 912   /*    FT_RASTER_FLAG_AA      :: This flag is set to indicate that an     */</span>
<span class="line-modified"> 913   /*                              anti-aliased glyph image should be       */</span>
<span class="line-modified"> 914   /*                              generated.  Otherwise, it will be        */</span>
<span class="line-modified"> 915   /*                              monochrome (1-bit).                      */</span>
<span class="line-modified"> 916   /*                                                                       */</span>
<span class="line-modified"> 917   /*    FT_RASTER_FLAG_DIRECT  :: This flag is set to indicate direct      */</span>
<span class="line-modified"> 918   /*                              rendering.  In this mode, client         */</span>
<span class="line-modified"> 919   /*                              applications must provide their own span */</span>
<span class="line-modified"> 920   /*                              callback.  This lets them directly       */</span>
<span class="line-modified"> 921   /*                              draw or compose over an existing bitmap. */</span>
<span class="line-modified"> 922   /*                              If this bit is not set, the target       */</span>
<span class="line-modified"> 923   /*                              pixmap&#39;s buffer _must_ be zeroed before  */</span>
<span class="line-modified"> 924   /*                              rendering.                               */</span>
<span class="line-modified"> 925   /*                                                                       */</span>
<span class="line-modified"> 926   /*                              Direct rendering is only possible with   */</span>
<span class="line-modified"> 927   /*                              anti-aliased glyphs.                     */</span>
<span class="line-modified"> 928   /*                                                                       */</span>
<span class="line-modified"> 929   /*    FT_RASTER_FLAG_CLIP    :: This flag is only used in direct         */</span>
<span class="line-modified"> 930   /*                              rendering mode.  If set, the output will */</span>
<span class="line-modified"> 931   /*                              be clipped to a box specified in the     */</span>
<span class="line-removed"> 932   /*                              `clip_box&#39; field of the                  */</span>
<span class="line-removed"> 933   /*                              @FT_Raster_Params structure.             */</span>
<span class="line-removed"> 934   /*                                                                       */</span>
<span class="line-removed"> 935   /*                              Note that by default, the glyph bitmap   */</span>
<span class="line-removed"> 936   /*                              is clipped to the target pixmap, except  */</span>
<span class="line-removed"> 937   /*                              in direct rendering mode where all spans */</span>
<span class="line-removed"> 938   /*                              are generated if no clipping box is set. */</span>
<span class="line-removed"> 939   /*                                                                       */</span>
 940 #define FT_RASTER_FLAG_DEFAULT  0x0
 941 #define FT_RASTER_FLAG_AA       0x1
 942 #define FT_RASTER_FLAG_DIRECT   0x2
 943 #define FT_RASTER_FLAG_CLIP     0x4
 944 
 945   /* these constants are deprecated; use the corresponding */
<span class="line-modified"> 946   /* `FT_RASTER_FLAG_XXX&#39; values instead                   */</span>
 947 #define ft_raster_flag_default  FT_RASTER_FLAG_DEFAULT
 948 #define ft_raster_flag_aa       FT_RASTER_FLAG_AA
 949 #define ft_raster_flag_direct   FT_RASTER_FLAG_DIRECT
 950 #define ft_raster_flag_clip     FT_RASTER_FLAG_CLIP
 951 
 952 
<span class="line-modified"> 953   /*************************************************************************/</span>
<span class="line-modified"> 954   /*                                                                       */</span>
<span class="line-modified"> 955   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 956   /*    FT_Raster_Params                                                   */</span>
<span class="line-modified"> 957   /*                                                                       */</span>
<span class="line-modified"> 958   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 959   /*    A structure to hold the arguments used by a raster&#39;s render        */</span>
<span class="line-modified"> 960   /*    function.                                                          */</span>
<span class="line-modified"> 961   /*                                                                       */</span>
<span class="line-modified"> 962   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 963   /*    target      :: The target bitmap.                                  */</span>
<span class="line-modified"> 964   /*                                                                       */</span>
<span class="line-modified"> 965   /*    source      :: A pointer to the source glyph image (e.g., an       */</span>
<span class="line-modified"> 966   /*                   @FT_Outline).                                       */</span>
<span class="line-modified"> 967   /*                                                                       */</span>
<span class="line-modified"> 968   /*    flags       :: The rendering flags.                                */</span>
<span class="line-modified"> 969   /*                                                                       */</span>
<span class="line-modified"> 970   /*    gray_spans  :: The gray span drawing callback.                     */</span>
<span class="line-modified"> 971   /*                                                                       */</span>
<span class="line-modified"> 972   /*    black_spans :: Unused.                                             */</span>
<span class="line-modified"> 973   /*                                                                       */</span>
<span class="line-modified"> 974   /*    bit_test    :: Unused.                                             */</span>
<span class="line-modified"> 975   /*                                                                       */</span>
<span class="line-modified"> 976   /*    bit_set     :: Unused.                                             */</span>
<span class="line-modified"> 977   /*                                                                       */</span>
<span class="line-modified"> 978   /*    user        :: User-supplied data that is passed to each drawing   */</span>
<span class="line-modified"> 979   /*                   callback.                                           */</span>
<span class="line-modified"> 980   /*                                                                       */</span>
<span class="line-modified"> 981   /*    clip_box    :: An optional clipping box.  It is only used in       */</span>
<span class="line-modified"> 982   /*                   direct rendering mode.  Note that coordinates here  */</span>
<span class="line-modified"> 983   /*                   should be expressed in _integer_ pixels (and not in */</span>
<span class="line-modified"> 984   /*                   26.6 fixed-point units).                            */</span>
<span class="line-modified"> 985   /*                                                                       */</span>
<span class="line-modified"> 986   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 987   /*    An anti-aliased glyph bitmap is drawn if the @FT_RASTER_FLAG_AA    */</span>
<span class="line-modified"> 988   /*    bit flag is set in the `flags&#39; field, otherwise a monochrome       */</span>
<span class="line-modified"> 989   /*    bitmap is generated.                                               */</span>
<span class="line-modified"> 990   /*                                                                       */</span>
<span class="line-modified"> 991   /*    If the @FT_RASTER_FLAG_DIRECT bit flag is set in `flags&#39;, the      */</span>
<span class="line-modified"> 992   /*    raster will call the `gray_spans&#39; callback to draw gray pixel      */</span>
<span class="line-modified"> 993   /*    spans.  This allows direct composition over a pre-existing bitmap  */</span>
<span class="line-modified"> 994   /*    through user-provided callbacks to perform the span drawing and    */</span>
<span class="line-modified"> 995   /*    composition.    Not supported by the monochrome rasterizer.        */</span>
<span class="line-modified"> 996   /*                                                                       */</span>






 997   typedef struct  FT_Raster_Params_
 998   {
 999     const FT_Bitmap*        target;
1000     const void*             source;
1001     int                     flags;
1002     FT_SpanFunc             gray_spans;
1003     FT_SpanFunc             black_spans;  /* unused */
1004     FT_Raster_BitTest_Func  bit_test;     /* unused */
1005     FT_Raster_BitSet_Func   bit_set;      /* unused */
1006     void*                   user;
1007     FT_BBox                 clip_box;
1008 
1009   } FT_Raster_Params;
1010 
1011 
<span class="line-modified">1012   /*************************************************************************/</span>
<span class="line-modified">1013   /*                                                                       */</span>
<span class="line-modified">1014   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">1015   /*    FT_Raster_NewFunc                                                  */</span>
<span class="line-modified">1016   /*                                                                       */</span>
<span class="line-modified">1017   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1018   /*    A function used to create a new raster object.                     */</span>
<span class="line-modified">1019   /*                                                                       */</span>
<span class="line-modified">1020   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">1021   /*    memory :: A handle to the memory allocator.                        */</span>
<span class="line-modified">1022   /*                                                                       */</span>
<span class="line-modified">1023   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">1024   /*    raster :: A handle to the new raster object.                       */</span>
<span class="line-modified">1025   /*                                                                       */</span>
<span class="line-modified">1026   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">1027   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">1028   /*                                                                       */</span>
<span class="line-modified">1029   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1030   /*    The `memory&#39; parameter is a typeless pointer in order to avoid     */</span>
<span class="line-modified">1031   /*    un-wanted dependencies on the rest of the FreeType code.  In       */</span>
<span class="line-modified">1032   /*    practice, it is an @FT_Memory object, i.e., a handle to the        */</span>
<span class="line-modified">1033   /*    standard FreeType memory allocator.  However, this field can be    */</span>
<span class="line-modified">1034   /*    completely ignored by a given raster implementation.               */</span>
<span class="line-modified">1035   /*                                                                       */</span>


1036   typedef int
1037   (*FT_Raster_NewFunc)( void*       memory,
1038                         FT_Raster*  raster );
1039 
1040 #define FT_Raster_New_Func  FT_Raster_NewFunc
1041 
1042 
<span class="line-modified">1043   /*************************************************************************/</span>
<span class="line-modified">1044   /*                                                                       */</span>
<span class="line-modified">1045   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">1046   /*    FT_Raster_DoneFunc                                                 */</span>
<span class="line-modified">1047   /*                                                                       */</span>
<span class="line-modified">1048   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1049   /*    A function used to destroy a given raster object.                  */</span>
<span class="line-modified">1050   /*                                                                       */</span>
<span class="line-modified">1051   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">1052   /*    raster :: A handle to the raster object.                           */</span>
<span class="line-modified">1053   /*                                                                       */</span>

1054   typedef void
1055   (*FT_Raster_DoneFunc)( FT_Raster  raster );
1056 
1057 #define FT_Raster_Done_Func  FT_Raster_DoneFunc
1058 
1059 
<span class="line-modified">1060   /*************************************************************************/</span>
<span class="line-modified">1061   /*                                                                       */</span>
<span class="line-modified">1062   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">1063   /*    FT_Raster_ResetFunc                                                */</span>
<span class="line-modified">1064   /*                                                                       */</span>
<span class="line-modified">1065   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1066   /*    FreeType used to provide an area of memory called the `render      */</span>
<span class="line-modified">1067   /*    pool&#39; available to all registered rasterizers.  This was not       */</span>
<span class="line-modified">1068   /*    thread safe, however, and now FreeType never allocates this pool.  */</span>
<span class="line-modified">1069   /*                                                                       */</span>
<span class="line-modified">1070   /*    This function is called after a new raster object is created.      */</span>
<span class="line-modified">1071   /*                                                                       */</span>
<span class="line-modified">1072   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">1073   /*    raster    :: A handle to the new raster object.                    */</span>
<span class="line-modified">1074   /*                                                                       */</span>
<span class="line-modified">1075   /*    pool_base :: Previously, the address in memory of the render pool. */</span>
<span class="line-modified">1076   /*                 Set this to NULL.                                     */</span>
<span class="line-modified">1077   /*                                                                       */</span>
<span class="line-modified">1078   /*    pool_size :: Previously, the size in bytes of the render pool.     */</span>
<span class="line-modified">1079   /*                 Set this to 0.                                        */</span>
<span class="line-modified">1080   /*                                                                       */</span>
<span class="line-modified">1081   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1082   /*    Rasterizers should rely on dynamic or stack allocation if they     */</span>
<span class="line-modified">1083   /*    want to (a handle to the memory allocator is passed to the         */</span>
<span class="line-modified">1084   /*    rasterizer constructor).                                           */</span>
<span class="line-modified">1085   /*                                                                       */</span>


1086   typedef void
1087   (*FT_Raster_ResetFunc)( FT_Raster       raster,
1088                           unsigned char*  pool_base,
1089                           unsigned long   pool_size );
1090 
1091 #define FT_Raster_Reset_Func  FT_Raster_ResetFunc
1092 
1093 
<span class="line-modified">1094   /*************************************************************************/</span>
<span class="line-modified">1095   /*                                                                       */</span>
<span class="line-modified">1096   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">1097   /*    FT_Raster_SetModeFunc                                              */</span>
<span class="line-modified">1098   /*                                                                       */</span>
<span class="line-modified">1099   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1100   /*    This function is a generic facility to change modes or attributes  */</span>
<span class="line-modified">1101   /*    in a given raster.  This can be used for debugging purposes, or    */</span>
<span class="line-modified">1102   /*    simply to allow implementation-specific `features&#39; in a given      */</span>
<span class="line-modified">1103   /*    raster module.                                                     */</span>
<span class="line-modified">1104   /*                                                                       */</span>
<span class="line-modified">1105   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">1106   /*    raster :: A handle to the new raster object.                       */</span>
<span class="line-modified">1107   /*                                                                       */</span>
<span class="line-modified">1108   /*    mode   :: A 4-byte tag used to name the mode or property.          */</span>
<span class="line-modified">1109   /*                                                                       */</span>
<span class="line-modified">1110   /*    args   :: A pointer to the new mode/property to use.               */</span>
<span class="line-modified">1111   /*                                                                       */</span>


1112   typedef int
1113   (*FT_Raster_SetModeFunc)( FT_Raster      raster,
1114                             unsigned long  mode,
1115                             void*          args );
1116 
1117 #define FT_Raster_Set_Mode_Func  FT_Raster_SetModeFunc
1118 
1119 
<span class="line-modified">1120   /*************************************************************************/</span>
<span class="line-modified">1121   /*                                                                       */</span>
<span class="line-modified">1122   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">1123   /*    FT_Raster_RenderFunc                                               */</span>
<span class="line-modified">1124   /*                                                                       */</span>
<span class="line-modified">1125   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1126   /*    Invoke a given raster to scan-convert a given glyph image into a   */</span>
<span class="line-modified">1127   /*    target bitmap.                                                     */</span>
<span class="line-modified">1128   /*                                                                       */</span>
<span class="line-modified">1129   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">1130   /*    raster :: A handle to the raster object.                           */</span>
<span class="line-modified">1131   /*                                                                       */</span>
<span class="line-modified">1132   /*    params :: A pointer to an @FT_Raster_Params structure used to      */</span>
<span class="line-modified">1133   /*              store the rendering parameters.                          */</span>
<span class="line-modified">1134   /*                                                                       */</span>
<span class="line-modified">1135   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">1136   /*    Error code.  0~means success.                                      */</span>
<span class="line-modified">1137   /*                                                                       */</span>
<span class="line-modified">1138   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1139   /*    The exact format of the source image depends on the raster&#39;s glyph */</span>
<span class="line-modified">1140   /*    format defined in its @FT_Raster_Funcs structure.  It can be an    */</span>
<span class="line-modified">1141   /*    @FT_Outline or anything else in order to support a large array of  */</span>
<span class="line-modified">1142   /*    glyph formats.                                                     */</span>
<span class="line-modified">1143   /*                                                                       */</span>
<span class="line-modified">1144   /*    Note also that the render function can fail and return a           */</span>
<span class="line-modified">1145   /*    `FT_Err_Unimplemented_Feature&#39; error code if the raster used does  */</span>
<span class="line-modified">1146   /*    not support direct composition.                                    */</span>
<span class="line-modified">1147   /*                                                                       */</span>
<span class="line-modified">1148   /*    XXX: For now, the standard raster doesn&#39;t support direct           */</span>
<span class="line-modified">1149   /*         composition but this should change for the final release (see */</span>
<span class="line-removed">1150   /*         the files `demos/src/ftgrays.c&#39; and `demos/src/ftgrays2.c&#39;    */</span>
<span class="line-removed">1151   /*         for examples of distinct implementations that support direct  */</span>
<span class="line-removed">1152   /*         composition).                                                 */</span>
<span class="line-removed">1153   /*                                                                       */</span>
1154   typedef int
1155   (*FT_Raster_RenderFunc)( FT_Raster                raster,
1156                            const FT_Raster_Params*  params );
1157 
1158 #define FT_Raster_Render_Func  FT_Raster_RenderFunc
1159 
1160 
<span class="line-modified">1161   /*************************************************************************/</span>
<span class="line-modified">1162   /*                                                                       */</span>
<span class="line-modified">1163   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">1164   /*    FT_Raster_Funcs                                                    */</span>
<span class="line-modified">1165   /*                                                                       */</span>
<span class="line-modified">1166   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1167   /*   A structure used to describe a given raster class to the library.   */</span>
<span class="line-modified">1168   /*                                                                       */</span>
<span class="line-modified">1169   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">1170   /*    glyph_format  :: The supported glyph format for this raster.       */</span>
<span class="line-modified">1171   /*                                                                       */</span>
<span class="line-modified">1172   /*    raster_new    :: The raster constructor.                           */</span>
<span class="line-modified">1173   /*                                                                       */</span>
<span class="line-modified">1174   /*    raster_reset  :: Used to reset the render pool within the raster.  */</span>
<span class="line-modified">1175   /*                                                                       */</span>
<span class="line-modified">1176   /*    raster_render :: A function to render a glyph into a given bitmap. */</span>
<span class="line-modified">1177   /*                                                                       */</span>
<span class="line-modified">1178   /*    raster_done   :: The raster destructor.                            */</span>
<span class="line-modified">1179   /*                                                                       */</span>





1180   typedef struct  FT_Raster_Funcs_
1181   {
1182     FT_Glyph_Format        glyph_format;
1183 
1184     FT_Raster_NewFunc      raster_new;
1185     FT_Raster_ResetFunc    raster_reset;
1186     FT_Raster_SetModeFunc  raster_set_mode;
1187     FT_Raster_RenderFunc   raster_render;
1188     FT_Raster_DoneFunc     raster_done;
1189 
1190   } FT_Raster_Funcs;
1191 
1192   /* */
1193 
1194 
1195 FT_END_HEADER
1196 
1197 #endif /* FTIMAGE_H_ */
1198 
1199 
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">   1 /****************************************************************************</span>
<span class="line-modified">   2  *</span>
<span class="line-modified">   3  * ftimage.h</span>
<span class="line-modified">   4  *</span>
<span class="line-modified">   5  *   FreeType glyph image formats and default raster interface</span>
<span class="line-modified">   6  *   (specification).</span>
<span class="line-modified">   7  *</span>
<span class="line-modified">   8  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">   9  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">  10  *</span>
<span class="line-modified">  11  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">  12  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">  13  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">  14  * this file you indicate that you have read the license and</span>
<span class="line-modified">  15  * understand and accept it fully.</span>
<span class="line-modified">  16  *</span>
<span class="line-modified">  17  */</span>
<span class="line-modified">  18 </span>
<span class="line-modified">  19   /**************************************************************************</span>
<span class="line-modified">  20    *</span>
<span class="line-modified">  21    * Note: A &#39;raster&#39; is simply a scan-line converter, used to render</span>
<span class="line-modified">  22    *       FT_Outlines into FT_Bitmaps.</span>
<span class="line-modified">  23    *</span>
<span class="line-modified">  24    */</span>
  25 
  26 
  27 #ifndef FTIMAGE_H_
  28 #define FTIMAGE_H_
  29 
  30 
  31   /* STANDALONE_ is from ftgrays.c */
  32 #ifndef STANDALONE_
  33 #include &lt;ft2build.h&gt;
  34 #endif
  35 
  36 
  37 FT_BEGIN_HEADER
  38 
  39 
<span class="line-modified">  40   /**************************************************************************</span>
<span class="line-modified">  41    *</span>
<span class="line-modified">  42    * @section:</span>
<span class="line-modified">  43    *   basic_types</span>
<span class="line-modified">  44    *</span>
<span class="line-modified">  45    */</span>
<span class="line-modified">  46 </span>
<span class="line-modified">  47 </span>
<span class="line-modified">  48   /**************************************************************************</span>
<span class="line-modified">  49    *</span>
<span class="line-modified">  50    * @type:</span>
<span class="line-modified">  51    *   FT_Pos</span>
<span class="line-modified">  52    *</span>
<span class="line-modified">  53    * @description:</span>
<span class="line-modified">  54    *   The type FT_Pos is used to store vectorial coordinates.  Depending on</span>
<span class="line-modified">  55    *   the context, these can represent distances in integer font units, or</span>
<span class="line-modified">  56    *   16.16, or 26.6 fixed-point pixel coordinates.</span>
<span class="line-modified">  57    */</span>
  58   typedef signed long  FT_Pos;
  59 
  60 
<span class="line-modified">  61   /**************************************************************************</span>
<span class="line-modified">  62    *</span>
<span class="line-modified">  63    * @struct:</span>
<span class="line-modified">  64    *   FT_Vector</span>
<span class="line-modified">  65    *</span>
<span class="line-modified">  66    * @description:</span>
<span class="line-modified">  67    *   A simple structure used to store a 2D vector; coordinates are of the</span>
<span class="line-modified">  68    *   FT_Pos type.</span>
<span class="line-modified">  69    *</span>
<span class="line-modified">  70    * @fields:</span>
<span class="line-modified">  71    *   x ::</span>
<span class="line-modified">  72    *     The horizontal coordinate.</span>
<span class="line-modified">  73    *   y ::</span>
<span class="line-added">  74    *     The vertical coordinate.</span>
<span class="line-added">  75    */</span>
  76   typedef struct  FT_Vector_
  77   {
  78     FT_Pos  x;
  79     FT_Pos  y;
  80 
  81   } FT_Vector;
  82 
  83 
<span class="line-modified">  84   /**************************************************************************</span>
<span class="line-modified">  85    *</span>
<span class="line-modified">  86    * @struct:</span>
<span class="line-modified">  87    *   FT_BBox</span>
<span class="line-modified">  88    *</span>
<span class="line-modified">  89    * @description:</span>
<span class="line-modified">  90    *   A structure used to hold an outline&#39;s bounding box, i.e., the</span>
<span class="line-modified">  91    *   coordinates of its extrema in the horizontal and vertical directions.</span>
<span class="line-modified">  92    *</span>
<span class="line-modified">  93    * @fields:</span>
<span class="line-modified">  94    *   xMin ::</span>
<span class="line-modified">  95    *     The horizontal minimum (left-most).</span>
<span class="line-modified">  96    *</span>
<span class="line-modified">  97    *   yMin ::</span>
<span class="line-modified">  98    *     The vertical minimum (bottom-most).</span>
<span class="line-modified">  99    *</span>
<span class="line-modified"> 100    *   xMax ::</span>
<span class="line-modified"> 101    *     The horizontal maximum (right-most).</span>
<span class="line-modified"> 102    *</span>
<span class="line-modified"> 103    *   yMax ::</span>
<span class="line-modified"> 104    *     The vertical maximum (top-most).</span>
<span class="line-modified"> 105    *</span>
<span class="line-modified"> 106    * @note:</span>
<span class="line-modified"> 107    *   The bounding box is specified with the coordinates of the lower left</span>
<span class="line-modified"> 108    *   and the upper right corner.  In PostScript, those values are often</span>
<span class="line-modified"> 109    *   called (llx,lly) and (urx,ury), respectively.</span>
<span class="line-modified"> 110    *</span>
<span class="line-modified"> 111    *   If `yMin` is negative, this value gives the glyph&#39;s descender.</span>
<span class="line-modified"> 112    *   Otherwise, the glyph doesn&#39;t descend below the baseline.  Similarly,</span>
<span class="line-modified"> 113    *   if `ymax` is positive, this value gives the glyph&#39;s ascender.</span>
<span class="line-modified"> 114    *</span>
<span class="line-modified"> 115    *   `xMin` gives the horizontal distance from the glyph&#39;s origin to the</span>
<span class="line-modified"> 116    *   left edge of the glyph&#39;s bounding box.  If `xMin` is negative, the</span>
<span class="line-added"> 117    *   glyph extends to the left of the origin.</span>
<span class="line-added"> 118    */</span>
 119   typedef struct  FT_BBox_
 120   {
 121     FT_Pos  xMin, yMin;
 122     FT_Pos  xMax, yMax;
 123 
 124   } FT_BBox;
 125 
 126 
<span class="line-modified"> 127   /**************************************************************************</span>
<span class="line-modified"> 128    *</span>
<span class="line-modified"> 129    * @enum:</span>
<span class="line-modified"> 130    *   FT_Pixel_Mode</span>
<span class="line-modified"> 131    *</span>
<span class="line-modified"> 132    * @description:</span>
<span class="line-modified"> 133    *   An enumeration type used to describe the format of pixels in a given</span>
<span class="line-modified"> 134    *   bitmap.  Note that additional formats may be added in the future.</span>
<span class="line-modified"> 135    *</span>
<span class="line-modified"> 136    * @values:</span>
<span class="line-modified"> 137    *   FT_PIXEL_MODE_NONE ::</span>
<span class="line-modified"> 138    *     Value~0 is reserved.</span>
<span class="line-modified"> 139    *</span>
<span class="line-modified"> 140    *   FT_PIXEL_MODE_MONO ::</span>
<span class="line-modified"> 141    *     A monochrome bitmap, using 1~bit per pixel.  Note that pixels are</span>
<span class="line-modified"> 142    *     stored in most-significant order (MSB), which means that the</span>
<span class="line-modified"> 143    *     left-most pixel in a byte has value 128.</span>
<span class="line-modified"> 144    *</span>
<span class="line-modified"> 145    *   FT_PIXEL_MODE_GRAY ::</span>
<span class="line-modified"> 146    *     An 8-bit bitmap, generally used to represent anti-aliased glyph</span>
<span class="line-modified"> 147    *     images.  Each pixel is stored in one byte.  Note that the number of</span>
<span class="line-modified"> 148    *     &#39;gray&#39; levels is stored in the `num_grays` field of the @FT_Bitmap</span>
<span class="line-modified"> 149    *     structure (it generally is 256).</span>
<span class="line-modified"> 150    *</span>
<span class="line-modified"> 151    *   FT_PIXEL_MODE_GRAY2 ::</span>
<span class="line-modified"> 152    *     A 2-bit per pixel bitmap, used to represent embedded anti-aliased</span>
<span class="line-modified"> 153    *     bitmaps in font files according to the OpenType specification.  We</span>
<span class="line-modified"> 154    *     haven&#39;t found a single font using this format, however.</span>
<span class="line-modified"> 155    *</span>
<span class="line-modified"> 156    *   FT_PIXEL_MODE_GRAY4 ::</span>
<span class="line-modified"> 157    *     A 4-bit per pixel bitmap, representing embedded anti-aliased bitmaps</span>
<span class="line-modified"> 158    *     in font files according to the OpenType specification.  We haven&#39;t</span>
<span class="line-modified"> 159    *     found a single font using this format, however.</span>
<span class="line-modified"> 160    *</span>
<span class="line-modified"> 161    *   FT_PIXEL_MODE_LCD ::</span>
<span class="line-modified"> 162    *     An 8-bit bitmap, representing RGB or BGR decimated glyph images used</span>
<span class="line-modified"> 163    *     for display on LCD displays; the bitmap is three times wider than</span>
<span class="line-modified"> 164    *     the original glyph image.  See also @FT_RENDER_MODE_LCD.</span>
<span class="line-modified"> 165    *</span>
<span class="line-modified"> 166    *   FT_PIXEL_MODE_LCD_V ::</span>
<span class="line-modified"> 167    *     An 8-bit bitmap, representing RGB or BGR decimated glyph images used</span>
<span class="line-modified"> 168    *     for display on rotated LCD displays; the bitmap is three times</span>
<span class="line-modified"> 169    *     taller than the original glyph image.  See also</span>
<span class="line-modified"> 170    *     @FT_RENDER_MODE_LCD_V.</span>
<span class="line-modified"> 171    *</span>
<span class="line-modified"> 172    *   FT_PIXEL_MODE_BGRA ::</span>
<span class="line-modified"> 173    *     [Since 2.5] An image with four 8-bit channels per pixel,</span>
<span class="line-modified"> 174    *     representing a color image (such as emoticons) with alpha channel.</span>
<span class="line-modified"> 175    *     For each pixel, the format is BGRA, which means, the blue channel</span>
<span class="line-modified"> 176    *     comes first in memory.  The color channels are pre-multiplied and in</span>
<span class="line-modified"> 177    *     the sRGB colorspace.  For example, full red at half-translucent</span>
<span class="line-modified"> 178    *     opacity will be represented as &#39;00,00,80,80&#39;, not &#39;00,00,FF,80&#39;.</span>
<span class="line-modified"> 179    *     See also @FT_LOAD_COLOR.</span>
<span class="line-modified"> 180    */</span>



 181   typedef enum  FT_Pixel_Mode_
 182   {
 183     FT_PIXEL_MODE_NONE = 0,
 184     FT_PIXEL_MODE_MONO,
 185     FT_PIXEL_MODE_GRAY,
 186     FT_PIXEL_MODE_GRAY2,
 187     FT_PIXEL_MODE_GRAY4,
 188     FT_PIXEL_MODE_LCD,
 189     FT_PIXEL_MODE_LCD_V,
 190     FT_PIXEL_MODE_BGRA,
 191 
 192     FT_PIXEL_MODE_MAX      /* do not remove */
 193 
 194   } FT_Pixel_Mode;
 195 
 196 
<span class="line-modified"> 197   /* these constants are deprecated; use the corresponding `FT_Pixel_Mode` */</span>
 198   /* values instead.                                                       */
 199 #define ft_pixel_mode_none   FT_PIXEL_MODE_NONE
 200 #define ft_pixel_mode_mono   FT_PIXEL_MODE_MONO
 201 #define ft_pixel_mode_grays  FT_PIXEL_MODE_GRAY
 202 #define ft_pixel_mode_pal2   FT_PIXEL_MODE_GRAY2
 203 #define ft_pixel_mode_pal4   FT_PIXEL_MODE_GRAY4
 204 
 205 
<span class="line-modified"> 206   /**************************************************************************</span>
<span class="line-modified"> 207    *</span>
<span class="line-modified"> 208    * @struct:</span>
<span class="line-modified"> 209    *   FT_Bitmap</span>
<span class="line-modified"> 210    *</span>
<span class="line-modified"> 211    * @description:</span>
<span class="line-modified"> 212    *   A structure used to describe a bitmap or pixmap to the raster.  Note</span>
<span class="line-modified"> 213    *   that we now manage pixmaps of various depths through the `pixel_mode`</span>
<span class="line-modified"> 214    *   field.</span>
<span class="line-modified"> 215    *</span>
<span class="line-modified"> 216    * @fields:</span>
<span class="line-modified"> 217    *   rows ::</span>
<span class="line-modified"> 218    *     The number of bitmap rows.</span>
<span class="line-modified"> 219    *</span>
<span class="line-modified"> 220    *   width ::</span>
<span class="line-modified"> 221    *     The number of pixels in bitmap row.</span>
<span class="line-modified"> 222    *</span>
<span class="line-modified"> 223    *   pitch ::</span>
<span class="line-modified"> 224    *     The pitch&#39;s absolute value is the number of bytes taken by one</span>
<span class="line-modified"> 225    *     bitmap row, including padding.  However, the pitch is positive when</span>
<span class="line-modified"> 226    *     the bitmap has a &#39;down&#39; flow, and negative when it has an &#39;up&#39; flow.</span>
<span class="line-modified"> 227    *     In all cases, the pitch is an offset to add to a bitmap pointer in</span>
<span class="line-modified"> 228    *     order to go down one row.</span>
<span class="line-modified"> 229    *</span>
<span class="line-modified"> 230    *     Note that &#39;padding&#39; means the alignment of a bitmap to a byte</span>
<span class="line-modified"> 231    *     border, and FreeType functions normally align to the smallest</span>
<span class="line-modified"> 232    *     possible integer value.</span>
<span class="line-modified"> 233    *</span>
<span class="line-modified"> 234    *     For the B/W rasterizer, `pitch` is always an even number.</span>
<span class="line-modified"> 235    *</span>
<span class="line-modified"> 236    *     To change the pitch of a bitmap (say, to make it a multiple of 4),</span>
<span class="line-modified"> 237    *     use @FT_Bitmap_Convert.  Alternatively, you might use callback</span>
<span class="line-modified"> 238    *     functions to directly render to the application&#39;s surface; see the</span>
<span class="line-modified"> 239    *     file `example2.cpp` in the tutorial for a demonstration.</span>
<span class="line-modified"> 240    *</span>
<span class="line-modified"> 241    *   buffer ::</span>
<span class="line-modified"> 242    *     A typeless pointer to the bitmap buffer.  This value should be</span>
<span class="line-modified"> 243    *     aligned on 32-bit boundaries in most cases.</span>
<span class="line-modified"> 244    *</span>
<span class="line-modified"> 245    *   num_grays ::</span>
<span class="line-modified"> 246    *     This field is only used with @FT_PIXEL_MODE_GRAY; it gives the</span>
<span class="line-modified"> 247    *     number of gray levels used in the bitmap.</span>
<span class="line-modified"> 248    *</span>
<span class="line-modified"> 249    *   pixel_mode ::</span>
<span class="line-modified"> 250    *     The pixel mode, i.e., how pixel bits are stored.  See @FT_Pixel_Mode</span>
<span class="line-modified"> 251    *     for possible values.</span>
<span class="line-modified"> 252    *</span>
<span class="line-modified"> 253    *   palette_mode ::</span>
<span class="line-modified"> 254    *     This field is intended for paletted pixel modes; it indicates how</span>
<span class="line-modified"> 255    *     the palette is stored.  Not used currently.</span>
<span class="line-modified"> 256    *</span>
<span class="line-modified"> 257    *   palette ::</span>
<span class="line-modified"> 258    *     A typeless pointer to the bitmap palette; this field is intended for</span>
<span class="line-modified"> 259    *     paletted pixel modes.  Not used currently.</span>
<span class="line-modified"> 260    */</span>

 261   typedef struct  FT_Bitmap_
 262   {
 263     unsigned int    rows;
 264     unsigned int    width;
 265     int             pitch;
 266     unsigned char*  buffer;
 267     unsigned short  num_grays;
 268     unsigned char   pixel_mode;
 269     unsigned char   palette_mode;
 270     void*           palette;
 271 
 272   } FT_Bitmap;
 273 
 274 
<span class="line-modified"> 275   /**************************************************************************</span>
<span class="line-modified"> 276    *</span>
<span class="line-modified"> 277    * @section:</span>
<span class="line-modified"> 278    *   outline_processing</span>
<span class="line-modified"> 279    *</span>
<span class="line-modified"> 280    */</span>
<span class="line-modified"> 281 </span>
<span class="line-modified"> 282 </span>
<span class="line-modified"> 283   /**************************************************************************</span>
<span class="line-modified"> 284    *</span>
<span class="line-modified"> 285    * @struct:</span>
<span class="line-modified"> 286    *   FT_Outline</span>
<span class="line-modified"> 287    *</span>
<span class="line-modified"> 288    * @description:</span>
<span class="line-modified"> 289    *   This structure is used to describe an outline to the scan-line</span>
<span class="line-modified"> 290    *   converter.</span>
<span class="line-modified"> 291    *</span>
<span class="line-modified"> 292    * @fields:</span>
<span class="line-modified"> 293    *   n_contours ::</span>
<span class="line-modified"> 294    *     The number of contours in the outline.</span>
<span class="line-modified"> 295    *</span>
<span class="line-modified"> 296    *   n_points ::</span>
<span class="line-modified"> 297    *     The number of points in the outline.</span>
<span class="line-modified"> 298    *</span>
<span class="line-modified"> 299    *   points ::</span>
<span class="line-modified"> 300    *     A pointer to an array of `n_points` @FT_Vector elements, giving the</span>
<span class="line-modified"> 301    *     outline&#39;s point coordinates.</span>
<span class="line-modified"> 302    *</span>
<span class="line-modified"> 303    *   tags ::</span>
<span class="line-modified"> 304    *     A pointer to an array of `n_points` chars, giving each outline</span>
<span class="line-modified"> 305    *     point&#39;s type.</span>
<span class="line-modified"> 306    *</span>
<span class="line-modified"> 307    *     If bit~0 is unset, the point is &#39;off&#39; the curve, i.e., a Bezier</span>
<span class="line-modified"> 308    *     control point, while it is &#39;on&#39; if set.</span>
<span class="line-modified"> 309    *</span>
<span class="line-modified"> 310    *     Bit~1 is meaningful for &#39;off&#39; points only.  If set, it indicates a</span>
<span class="line-modified"> 311    *     third-order Bezier arc control point; and a second-order control</span>
<span class="line-modified"> 312    *     point if unset.</span>
<span class="line-modified"> 313    *</span>
<span class="line-modified"> 314    *     If bit~2 is set, bits 5-7 contain the drop-out mode (as defined in</span>
<span class="line-modified"> 315    *     the OpenType specification; the value is the same as the argument to</span>
<span class="line-modified"> 316    *     the &#39;SCANMODE&#39; instruction).</span>
<span class="line-modified"> 317    *</span>
<span class="line-modified"> 318    *     Bits 3 and~4 are reserved for internal purposes.</span>
<span class="line-modified"> 319    *</span>
<span class="line-modified"> 320    *   contours ::</span>
<span class="line-modified"> 321    *     An array of `n_contours` shorts, giving the end point of each</span>
<span class="line-modified"> 322    *     contour within the outline.  For example, the first contour is</span>
<span class="line-modified"> 323    *     defined by the points &#39;0&#39; to `contours[0]`, the second one is</span>
<span class="line-modified"> 324    *     defined by the points `contours[0]+1` to `contours[1]`, etc.</span>
<span class="line-modified"> 325    *</span>
<span class="line-modified"> 326    *   flags ::</span>
<span class="line-modified"> 327    *     A set of bit flags used to characterize the outline and give hints</span>
<span class="line-modified"> 328    *     to the scan-converter and hinter on how to convert/grid-fit it.  See</span>
<span class="line-modified"> 329    *     @FT_OUTLINE_XXX.</span>
<span class="line-modified"> 330    *</span>
<span class="line-modified"> 331    * @note:</span>
<span class="line-modified"> 332    *   The B/W rasterizer only checks bit~2 in the `tags` array for the first</span>
<span class="line-modified"> 333    *   point of each contour.  The drop-out mode as given with</span>
<span class="line-added"> 334    *   @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, and</span>
<span class="line-added"> 335    *   @FT_OUTLINE_INCLUDE_STUBS in `flags` is then overridden.</span>
<span class="line-added"> 336    */</span>
 337   typedef struct  FT_Outline_
 338   {
 339     short       n_contours;      /* number of contours in glyph        */
 340     short       n_points;        /* number of points in the glyph      */
 341 
 342     FT_Vector*  points;          /* the outline&#39;s points               */
 343     char*       tags;            /* the points flags                   */
 344     short*      contours;        /* the contour end points             */
 345 
 346     int         flags;           /* outline masks                      */
 347 
 348   } FT_Outline;
 349 
 350   /* */
 351 
 352   /* Following limits must be consistent with */
 353   /* FT_Outline.{n_contours,n_points}         */
 354 #define FT_OUTLINE_CONTOURS_MAX  SHRT_MAX
 355 #define FT_OUTLINE_POINTS_MAX    SHRT_MAX
 356 
 357 
<span class="line-modified"> 358   /**************************************************************************</span>
<span class="line-modified"> 359    *</span>
<span class="line-modified"> 360    * @enum:</span>
<span class="line-modified"> 361    *   FT_OUTLINE_XXX</span>
<span class="line-modified"> 362    *</span>
<span class="line-modified"> 363    * @description:</span>
<span class="line-modified"> 364    *   A list of bit-field constants used for the flags in an outline&#39;s</span>
<span class="line-modified"> 365    *   `flags` field.</span>
<span class="line-modified"> 366    *</span>
<span class="line-modified"> 367    * @values:</span>
<span class="line-modified"> 368    *   FT_OUTLINE_NONE ::</span>
<span class="line-modified"> 369    *     Value~0 is reserved.</span>
<span class="line-modified"> 370    *</span>
<span class="line-modified"> 371    *   FT_OUTLINE_OWNER ::</span>
<span class="line-modified"> 372    *     If set, this flag indicates that the outline&#39;s field arrays (i.e.,</span>
<span class="line-modified"> 373    *     `points`, `flags`, and `contours`) are &#39;owned&#39; by the outline</span>
<span class="line-modified"> 374    *     object, and should thus be freed when it is destroyed.</span>
<span class="line-modified"> 375    *</span>
<span class="line-modified"> 376    *   FT_OUTLINE_EVEN_ODD_FILL ::</span>
<span class="line-modified"> 377    *     By default, outlines are filled using the non-zero winding rule.  If</span>
<span class="line-modified"> 378    *     set to 1, the outline will be filled using the even-odd fill rule</span>
<span class="line-modified"> 379    *     (only works with the smooth rasterizer).</span>
<span class="line-modified"> 380    *</span>
<span class="line-modified"> 381    *   FT_OUTLINE_REVERSE_FILL ::</span>
<span class="line-modified"> 382    *     By default, outside contours of an outline are oriented in</span>
<span class="line-modified"> 383    *     clock-wise direction, as defined in the TrueType specification.</span>
<span class="line-modified"> 384    *     This flag is set if the outline uses the opposite direction</span>
<span class="line-modified"> 385    *     (typically for Type~1 fonts).  This flag is ignored by the scan</span>
<span class="line-modified"> 386    *     converter.</span>
<span class="line-modified"> 387    *</span>
<span class="line-modified"> 388    *   FT_OUTLINE_IGNORE_DROPOUTS ::</span>
<span class="line-modified"> 389    *     By default, the scan converter will try to detect drop-outs in an</span>
<span class="line-modified"> 390    *     outline and correct the glyph bitmap to ensure consistent shape</span>
<span class="line-modified"> 391    *     continuity.  If set, this flag hints the scan-line converter to</span>
<span class="line-modified"> 392    *     ignore such cases.  See below for more information.</span>
<span class="line-modified"> 393    *</span>
<span class="line-modified"> 394    *   FT_OUTLINE_SMART_DROPOUTS ::</span>
<span class="line-modified"> 395    *     Select smart dropout control.  If unset, use simple dropout control.</span>
<span class="line-modified"> 396    *     Ignored if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See below for more</span>
<span class="line-modified"> 397    *     information.</span>
<span class="line-modified"> 398    *</span>
<span class="line-modified"> 399    *   FT_OUTLINE_INCLUDE_STUBS ::</span>
<span class="line-modified"> 400    *     If set, turn pixels on for &#39;stubs&#39;, otherwise exclude them.  Ignored</span>
<span class="line-modified"> 401    *     if @FT_OUTLINE_IGNORE_DROPOUTS is set.  See below for more</span>
<span class="line-modified"> 402    *     information.</span>
<span class="line-modified"> 403    *</span>
<span class="line-modified"> 404    *   FT_OUTLINE_HIGH_PRECISION ::</span>
<span class="line-modified"> 405    *     This flag indicates that the scan-line converter should try to</span>
<span class="line-modified"> 406    *     convert this outline to bitmaps with the highest possible quality.</span>
<span class="line-modified"> 407    *     It is typically set for small character sizes.  Note that this is</span>
<span class="line-modified"> 408    *     only a hint that might be completely ignored by a given</span>
<span class="line-modified"> 409    *     scan-converter.</span>
<span class="line-modified"> 410    *</span>
<span class="line-modified"> 411    *   FT_OUTLINE_SINGLE_PASS ::</span>
<span class="line-modified"> 412    *     This flag is set to force a given scan-converter to only use a</span>
<span class="line-modified"> 413    *     single pass over the outline to render a bitmap glyph image.</span>
<span class="line-modified"> 414    *     Normally, it is set for very large character sizes.  It is only a</span>
<span class="line-modified"> 415    *     hint that might be completely ignored by a given scan-converter.</span>
<span class="line-modified"> 416    *</span>
<span class="line-modified"> 417    * @note:</span>
<span class="line-modified"> 418    *   The flags @FT_OUTLINE_IGNORE_DROPOUTS, @FT_OUTLINE_SMART_DROPOUTS, and</span>
<span class="line-modified"> 419    *   @FT_OUTLINE_INCLUDE_STUBS are ignored by the smooth rasterizer.</span>
<span class="line-modified"> 420    *</span>
<span class="line-modified"> 421    *   There exists a second mechanism to pass the drop-out mode to the B/W</span>
<span class="line-modified"> 422    *   rasterizer; see the `tags` field in @FT_Outline.</span>
<span class="line-modified"> 423    *</span>
<span class="line-modified"> 424    *   Please refer to the description of the &#39;SCANTYPE&#39; instruction in the</span>
<span class="line-modified"> 425    *   OpenType specification (in file `ttinst1.doc`) how simple drop-outs,</span>
<span class="line-modified"> 426    *   smart drop-outs, and stubs are defined.</span>
<span class="line-modified"> 427    */</span>


 428 #define FT_OUTLINE_NONE             0x0
 429 #define FT_OUTLINE_OWNER            0x1
 430 #define FT_OUTLINE_EVEN_ODD_FILL    0x2
 431 #define FT_OUTLINE_REVERSE_FILL     0x4
 432 #define FT_OUTLINE_IGNORE_DROPOUTS  0x8
 433 #define FT_OUTLINE_SMART_DROPOUTS   0x10
 434 #define FT_OUTLINE_INCLUDE_STUBS    0x20
 435 
 436 #define FT_OUTLINE_HIGH_PRECISION   0x100
 437 #define FT_OUTLINE_SINGLE_PASS      0x200
 438 
 439 
 440   /* these constants are deprecated; use the corresponding */
<span class="line-modified"> 441   /* `FT_OUTLINE_XXX` values instead                       */</span>
 442 #define ft_outline_none             FT_OUTLINE_NONE
 443 #define ft_outline_owner            FT_OUTLINE_OWNER
 444 #define ft_outline_even_odd_fill    FT_OUTLINE_EVEN_ODD_FILL
 445 #define ft_outline_reverse_fill     FT_OUTLINE_REVERSE_FILL
 446 #define ft_outline_ignore_dropouts  FT_OUTLINE_IGNORE_DROPOUTS
 447 #define ft_outline_high_precision   FT_OUTLINE_HIGH_PRECISION
 448 #define ft_outline_single_pass      FT_OUTLINE_SINGLE_PASS
 449 
 450   /* */
 451 
<span class="line-modified"> 452 #define FT_CURVE_TAG( flag )  ( flag &amp; 0x03 )</span>
 453 
<span class="line-modified"> 454   /* see the `tags` field in `FT_Outline` for a description of the values */</span>
<span class="line-modified"> 455 #define FT_CURVE_TAG_ON            0x01</span>
<span class="line-modified"> 456 #define FT_CURVE_TAG_CONIC         0x00</span>
<span class="line-added"> 457 #define FT_CURVE_TAG_CUBIC         0x02</span>
 458 
<span class="line-modified"> 459 #define FT_CURVE_TAG_HAS_SCANMODE  0x04</span>
 460 
<span class="line-modified"> 461 #define FT_CURVE_TAG_TOUCH_X       0x08  /* reserved for TrueType hinter */</span>
<span class="line-modified"> 462 #define FT_CURVE_TAG_TOUCH_Y       0x10  /* reserved for TrueType hinter */</span>
 463 
 464 #define FT_CURVE_TAG_TOUCH_BOTH    ( FT_CURVE_TAG_TOUCH_X | \
 465                                      FT_CURVE_TAG_TOUCH_Y )
<span class="line-added"> 466   /* values 0x20, 0x40, and 0x80 are reserved */</span>
<span class="line-added"> 467 </span>
 468 
<span class="line-added"> 469   /* these constants are deprecated; use the corresponding */</span>
<span class="line-added"> 470   /* `FT_CURVE_TAG_XXX` values instead                     */</span>
 471 #define FT_Curve_Tag_On       FT_CURVE_TAG_ON
 472 #define FT_Curve_Tag_Conic    FT_CURVE_TAG_CONIC
 473 #define FT_Curve_Tag_Cubic    FT_CURVE_TAG_CUBIC
 474 #define FT_Curve_Tag_Touch_X  FT_CURVE_TAG_TOUCH_X
 475 #define FT_Curve_Tag_Touch_Y  FT_CURVE_TAG_TOUCH_Y
 476 
 477 
<span class="line-modified"> 478   /**************************************************************************</span>
<span class="line-modified"> 479    *</span>
<span class="line-modified"> 480    * @functype:</span>
<span class="line-modified"> 481    *   FT_Outline_MoveToFunc</span>
<span class="line-modified"> 482    *</span>
<span class="line-modified"> 483    * @description:</span>
<span class="line-modified"> 484    *   A function pointer type used to describe the signature of a &#39;move to&#39;</span>
<span class="line-modified"> 485    *   function during outline walking/decomposition.</span>
<span class="line-modified"> 486    *</span>
<span class="line-modified"> 487    *   A &#39;move to&#39; is emitted to start a new contour in an outline.</span>
<span class="line-modified"> 488    *</span>
<span class="line-modified"> 489    * @input:</span>
<span class="line-modified"> 490    *   to ::</span>
<span class="line-modified"> 491    *     A pointer to the target point of the &#39;move to&#39;.</span>
<span class="line-modified"> 492    *</span>
<span class="line-modified"> 493    *   user ::</span>
<span class="line-modified"> 494    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified"> 495    *     decomposition function.</span>
<span class="line-modified"> 496    *</span>
<span class="line-modified"> 497    * @return:</span>
<span class="line-added"> 498    *   Error code.  0~means success.</span>
<span class="line-added"> 499    */</span>
 500   typedef int
 501   (*FT_Outline_MoveToFunc)( const FT_Vector*  to,
 502                             void*             user );
 503 
 504 #define FT_Outline_MoveTo_Func  FT_Outline_MoveToFunc
 505 
 506 
<span class="line-modified"> 507   /**************************************************************************</span>
<span class="line-modified"> 508    *</span>
<span class="line-modified"> 509    * @functype:</span>
<span class="line-modified"> 510    *   FT_Outline_LineToFunc</span>
<span class="line-modified"> 511    *</span>
<span class="line-modified"> 512    * @description:</span>
<span class="line-modified"> 513    *   A function pointer type used to describe the signature of a &#39;line to&#39;</span>
<span class="line-modified"> 514    *   function during outline walking/decomposition.</span>
<span class="line-modified"> 515    *</span>
<span class="line-modified"> 516    *   A &#39;line to&#39; is emitted to indicate a segment in the outline.</span>
<span class="line-modified"> 517    *</span>
<span class="line-modified"> 518    * @input:</span>
<span class="line-modified"> 519    *   to ::</span>
<span class="line-modified"> 520    *     A pointer to the target point of the &#39;line to&#39;.</span>
<span class="line-modified"> 521    *</span>
<span class="line-modified"> 522    *   user ::</span>
<span class="line-modified"> 523    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified"> 524    *     decomposition function.</span>
<span class="line-modified"> 525    *</span>
<span class="line-modified"> 526    * @return:</span>
<span class="line-added"> 527    *   Error code.  0~means success.</span>
<span class="line-added"> 528    */</span>
 529   typedef int
 530   (*FT_Outline_LineToFunc)( const FT_Vector*  to,
 531                             void*             user );
 532 
 533 #define FT_Outline_LineTo_Func  FT_Outline_LineToFunc
 534 
 535 
<span class="line-modified"> 536   /**************************************************************************</span>
<span class="line-modified"> 537    *</span>
<span class="line-modified"> 538    * @functype:</span>
<span class="line-modified"> 539    *   FT_Outline_ConicToFunc</span>
<span class="line-modified"> 540    *</span>
<span class="line-modified"> 541    * @description:</span>
<span class="line-modified"> 542    *   A function pointer type used to describe the signature of a &#39;conic to&#39;</span>
<span class="line-modified"> 543    *   function during outline walking or decomposition.</span>
<span class="line-modified"> 544    *</span>
<span class="line-modified"> 545    *   A &#39;conic to&#39; is emitted to indicate a second-order Bezier arc in the</span>
<span class="line-modified"> 546    *   outline.</span>
<span class="line-modified"> 547    *</span>
<span class="line-modified"> 548    * @input:</span>
<span class="line-modified"> 549    *   control ::</span>
<span class="line-modified"> 550    *     An intermediate control point between the last position and the new</span>
<span class="line-modified"> 551    *     target in `to`.</span>
<span class="line-modified"> 552    *</span>
<span class="line-modified"> 553    *   to ::</span>
<span class="line-modified"> 554    *     A pointer to the target end point of the conic arc.</span>
<span class="line-modified"> 555    *</span>
<span class="line-modified"> 556    *   user ::</span>
<span class="line-modified"> 557    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified"> 558    *     decomposition function.</span>
<span class="line-modified"> 559    *</span>
<span class="line-added"> 560    * @return:</span>
<span class="line-added"> 561    *   Error code.  0~means success.</span>
<span class="line-added"> 562    */</span>
 563   typedef int
 564   (*FT_Outline_ConicToFunc)( const FT_Vector*  control,
 565                              const FT_Vector*  to,
 566                              void*             user );
 567 
 568 #define FT_Outline_ConicTo_Func  FT_Outline_ConicToFunc
 569 
 570 
<span class="line-modified"> 571   /**************************************************************************</span>
<span class="line-modified"> 572    *</span>
<span class="line-modified"> 573    * @functype:</span>
<span class="line-modified"> 574    *   FT_Outline_CubicToFunc</span>
<span class="line-modified"> 575    *</span>
<span class="line-modified"> 576    * @description:</span>
<span class="line-modified"> 577    *   A function pointer type used to describe the signature of a &#39;cubic to&#39;</span>
<span class="line-modified"> 578    *   function during outline walking or decomposition.</span>
<span class="line-modified"> 579    *</span>
<span class="line-modified"> 580    *   A &#39;cubic to&#39; is emitted to indicate a third-order Bezier arc.</span>
<span class="line-modified"> 581    *</span>
<span class="line-modified"> 582    * @input:</span>
<span class="line-modified"> 583    *   control1 ::</span>
<span class="line-modified"> 584    *     A pointer to the first Bezier control point.</span>
<span class="line-modified"> 585    *</span>
<span class="line-modified"> 586    *   control2 ::</span>
<span class="line-modified"> 587    *     A pointer to the second Bezier control point.</span>
<span class="line-modified"> 588    *</span>
<span class="line-modified"> 589    *   to ::</span>
<span class="line-modified"> 590    *     A pointer to the target end point.</span>
<span class="line-modified"> 591    *</span>
<span class="line-modified"> 592    *   user ::</span>
<span class="line-modified"> 593    *     A typeless pointer, which is passed from the caller of the</span>
<span class="line-modified"> 594    *     decomposition function.</span>
<span class="line-added"> 595    *</span>
<span class="line-added"> 596    * @return:</span>
<span class="line-added"> 597    *   Error code.  0~means success.</span>
<span class="line-added"> 598    */</span>
 599   typedef int
 600   (*FT_Outline_CubicToFunc)( const FT_Vector*  control1,
 601                              const FT_Vector*  control2,
 602                              const FT_Vector*  to,
 603                              void*             user );
 604 
 605 #define FT_Outline_CubicTo_Func  FT_Outline_CubicToFunc
 606 
 607 
<span class="line-modified"> 608   /**************************************************************************</span>
<span class="line-modified"> 609    *</span>
<span class="line-modified"> 610    * @struct:</span>
<span class="line-modified"> 611    *   FT_Outline_Funcs</span>
<span class="line-modified"> 612    *</span>
<span class="line-modified"> 613    * @description:</span>
<span class="line-modified"> 614    *   A structure to hold various function pointers used during outline</span>
<span class="line-modified"> 615    *   decomposition in order to emit segments, conic, and cubic Beziers.</span>
<span class="line-modified"> 616    *</span>
<span class="line-modified"> 617    * @fields:</span>
<span class="line-modified"> 618    *   move_to ::</span>
<span class="line-modified"> 619    *     The &#39;move to&#39; emitter.</span>
<span class="line-modified"> 620    *</span>
<span class="line-modified"> 621    *   line_to ::</span>
<span class="line-modified"> 622    *     The segment emitter.</span>
<span class="line-modified"> 623    *</span>
<span class="line-modified"> 624    *   conic_to ::</span>
<span class="line-modified"> 625    *     The second-order Bezier arc emitter.</span>
<span class="line-modified"> 626    *</span>
<span class="line-modified"> 627    *   cubic_to ::</span>
<span class="line-modified"> 628    *     The third-order Bezier arc emitter.</span>
<span class="line-modified"> 629    *</span>
<span class="line-modified"> 630    *   shift ::</span>
<span class="line-modified"> 631    *     The shift that is applied to coordinates before they are sent to the</span>
<span class="line-modified"> 632    *     emitter.</span>
<span class="line-modified"> 633    *</span>
<span class="line-modified"> 634    *   delta ::</span>
<span class="line-modified"> 635    *     The delta that is applied to coordinates before they are sent to the</span>
<span class="line-modified"> 636    *     emitter, but after the shift.</span>
<span class="line-modified"> 637    *</span>
<span class="line-modified"> 638    * @note:</span>
<span class="line-modified"> 639    *   The point coordinates sent to the emitters are the transformed version</span>
<span class="line-modified"> 640    *   of the original coordinates (this is important for high accuracy</span>
<span class="line-modified"> 641    *   during scan-conversion).  The transformation is simple:</span>
<span class="line-modified"> 642    *</span>
<span class="line-modified"> 643    *   ```</span>
<span class="line-modified"> 644    *     x&#39; = (x &lt;&lt; shift) - delta</span>
<span class="line-added"> 645    *     y&#39; = (y &lt;&lt; shift) - delta</span>
<span class="line-added"> 646    *   ```</span>
<span class="line-added"> 647    *</span>
<span class="line-added"> 648    *   Set the values of `shift` and `delta` to~0 to get the original point</span>
<span class="line-added"> 649    *   coordinates.</span>
<span class="line-added"> 650    */</span>
 651   typedef struct  FT_Outline_Funcs_
 652   {
 653     FT_Outline_MoveToFunc   move_to;
 654     FT_Outline_LineToFunc   line_to;
 655     FT_Outline_ConicToFunc  conic_to;
 656     FT_Outline_CubicToFunc  cubic_to;
 657 
 658     int                     shift;
 659     FT_Pos                  delta;
 660 
 661   } FT_Outline_Funcs;
 662 
 663 
<span class="line-modified"> 664   /**************************************************************************</span>
<span class="line-modified"> 665    *</span>
<span class="line-modified"> 666    * @section:</span>
<span class="line-modified"> 667    *   basic_types</span>
<span class="line-modified"> 668    *</span>
<span class="line-modified"> 669    */</span>
<span class="line-modified"> 670 </span>
<span class="line-modified"> 671 </span>
<span class="line-modified"> 672   /**************************************************************************</span>
<span class="line-modified"> 673    *</span>
<span class="line-modified"> 674    * @macro:</span>
<span class="line-modified"> 675    *   FT_IMAGE_TAG</span>
<span class="line-modified"> 676    *</span>
<span class="line-modified"> 677    * @description:</span>
<span class="line-modified"> 678    *   This macro converts four-letter tags to an unsigned long type.</span>
<span class="line-modified"> 679    *</span>
<span class="line-modified"> 680    * @note:</span>
<span class="line-modified"> 681    *   Since many 16-bit compilers don&#39;t like 32-bit enumerations, you should</span>
<span class="line-modified"> 682    *   redefine this macro in case of problems to something like this:</span>
<span class="line-modified"> 683    *</span>
<span class="line-modified"> 684    *   ```</span>
<span class="line-modified"> 685    *     #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  value</span>
<span class="line-modified"> 686    *   ```</span>
<span class="line-modified"> 687    *</span>
<span class="line-modified"> 688    *   to get a simple enumeration without assigning special numbers.</span>
<span class="line-modified"> 689    */</span>

 690 #ifndef FT_IMAGE_TAG
 691 #define FT_IMAGE_TAG( value, _x1, _x2, _x3, _x4 )  \
 692           value = ( ( (unsigned long)_x1 &lt;&lt; 24 ) | \
 693                     ( (unsigned long)_x2 &lt;&lt; 16 ) | \
 694                     ( (unsigned long)_x3 &lt;&lt; 8  ) | \
 695                       (unsigned long)_x4         )
 696 #endif /* FT_IMAGE_TAG */
 697 
 698 
<span class="line-modified"> 699   /**************************************************************************</span>
<span class="line-modified"> 700    *</span>
<span class="line-modified"> 701    * @enum:</span>
<span class="line-modified"> 702    *   FT_Glyph_Format</span>
<span class="line-modified"> 703    *</span>
<span class="line-modified"> 704    * @description:</span>
<span class="line-modified"> 705    *   An enumeration type used to describe the format of a given glyph</span>
<span class="line-modified"> 706    *   image.  Note that this version of FreeType only supports two image</span>
<span class="line-modified"> 707    *   formats, even though future font drivers will be able to register</span>
<span class="line-modified"> 708    *   their own format.</span>
<span class="line-modified"> 709    *</span>
<span class="line-modified"> 710    * @values:</span>
<span class="line-modified"> 711    *   FT_GLYPH_FORMAT_NONE ::</span>
<span class="line-modified"> 712    *     The value~0 is reserved.</span>
<span class="line-modified"> 713    *</span>
<span class="line-modified"> 714    *   FT_GLYPH_FORMAT_COMPOSITE ::</span>
<span class="line-modified"> 715    *     The glyph image is a composite of several other images.  This format</span>
<span class="line-modified"> 716    *     is _only_ used with @FT_LOAD_NO_RECURSE, and is used to report</span>
<span class="line-modified"> 717    *     compound glyphs (like accented characters).</span>
<span class="line-modified"> 718    *</span>
<span class="line-modified"> 719    *   FT_GLYPH_FORMAT_BITMAP ::</span>
<span class="line-modified"> 720    *     The glyph image is a bitmap, and can be described as an @FT_Bitmap.</span>
<span class="line-modified"> 721    *     You generally need to access the `bitmap` field of the</span>
<span class="line-modified"> 722    *     @FT_GlyphSlotRec structure to read it.</span>
<span class="line-modified"> 723    *</span>
<span class="line-modified"> 724    *   FT_GLYPH_FORMAT_OUTLINE ::</span>
<span class="line-modified"> 725    *     The glyph image is a vectorial outline made of line segments and</span>
<span class="line-modified"> 726    *     Bezier arcs; it can be described as an @FT_Outline; you generally</span>
<span class="line-modified"> 727    *     want to access the `outline` field of the @FT_GlyphSlotRec structure</span>
<span class="line-modified"> 728    *     to read it.</span>
<span class="line-modified"> 729    *</span>
<span class="line-modified"> 730    *   FT_GLYPH_FORMAT_PLOTTER ::</span>
<span class="line-modified"> 731    *     The glyph image is a vectorial path with no inside and outside</span>
<span class="line-modified"> 732    *     contours.  Some Type~1 fonts, like those in the Hershey family,</span>
<span class="line-modified"> 733    *     contain glyphs in this format.  These are described as @FT_Outline,</span>
<span class="line-modified"> 734    *     but FreeType isn&#39;t currently capable of rendering them correctly.</span>
<span class="line-modified"> 735    */</span>

 736   typedef enum  FT_Glyph_Format_
 737   {
 738     FT_IMAGE_TAG( FT_GLYPH_FORMAT_NONE, 0, 0, 0, 0 ),
 739 
 740     FT_IMAGE_TAG( FT_GLYPH_FORMAT_COMPOSITE, &#39;c&#39;, &#39;o&#39;, &#39;m&#39;, &#39;p&#39; ),
 741     FT_IMAGE_TAG( FT_GLYPH_FORMAT_BITMAP,    &#39;b&#39;, &#39;i&#39;, &#39;t&#39;, &#39;s&#39; ),
 742     FT_IMAGE_TAG( FT_GLYPH_FORMAT_OUTLINE,   &#39;o&#39;, &#39;u&#39;, &#39;t&#39;, &#39;l&#39; ),
 743     FT_IMAGE_TAG( FT_GLYPH_FORMAT_PLOTTER,   &#39;p&#39;, &#39;l&#39;, &#39;o&#39;, &#39;t&#39; )
 744 
 745   } FT_Glyph_Format;
 746 
 747 
 748   /* these constants are deprecated; use the corresponding */
<span class="line-modified"> 749   /* `FT_Glyph_Format` values instead.                     */</span>
 750 #define ft_glyph_format_none       FT_GLYPH_FORMAT_NONE
 751 #define ft_glyph_format_composite  FT_GLYPH_FORMAT_COMPOSITE
 752 #define ft_glyph_format_bitmap     FT_GLYPH_FORMAT_BITMAP
 753 #define ft_glyph_format_outline    FT_GLYPH_FORMAT_OUTLINE
 754 #define ft_glyph_format_plotter    FT_GLYPH_FORMAT_PLOTTER
 755 
 756 
 757   /*************************************************************************/
 758   /*************************************************************************/
 759   /*************************************************************************/
 760   /*****                                                               *****/
 761   /*****            R A S T E R   D E F I N I T I O N S                *****/
 762   /*****                                                               *****/
 763   /*************************************************************************/
 764   /*************************************************************************/
 765   /*************************************************************************/
 766 
 767 
<span class="line-modified"> 768   /**************************************************************************</span>
<span class="line-modified"> 769    *</span>
<span class="line-modified"> 770    * A raster is a scan converter, in charge of rendering an outline into a</span>
<span class="line-modified"> 771    * bitmap.  This section contains the public API for rasters.</span>
<span class="line-modified"> 772    *</span>
<span class="line-modified"> 773    * Note that in FreeType 2, all rasters are now encapsulated within</span>
<span class="line-modified"> 774    * specific modules called &#39;renderers&#39;.  See `ftrender.h` for more details</span>
<span class="line-modified"> 775    * on renderers.</span>
<span class="line-modified"> 776    *</span>
<span class="line-modified"> 777    */</span>
<span class="line-modified"> 778 </span>
<span class="line-modified"> 779 </span>
<span class="line-modified"> 780   /**************************************************************************</span>
<span class="line-modified"> 781    *</span>
<span class="line-modified"> 782    * @section:</span>
<span class="line-modified"> 783    *   raster</span>
<span class="line-modified"> 784    *</span>
<span class="line-modified"> 785    * @title:</span>
<span class="line-modified"> 786    *   Scanline Converter</span>
<span class="line-modified"> 787    *</span>
<span class="line-modified"> 788    * @abstract:</span>
<span class="line-modified"> 789    *   How vectorial outlines are converted into bitmaps and pixmaps.</span>
<span class="line-modified"> 790    *</span>
<span class="line-modified"> 791    * @description:</span>
<span class="line-modified"> 792    *   This section contains technical definitions.</span>
<span class="line-modified"> 793    *</span>
<span class="line-modified"> 794    * @order:</span>
<span class="line-modified"> 795    *   FT_Raster</span>
<span class="line-modified"> 796    *   FT_Span</span>
<span class="line-modified"> 797    *   FT_SpanFunc</span>
<span class="line-modified"> 798    *</span>
<span class="line-modified"> 799    *   FT_Raster_Params</span>
<span class="line-modified"> 800    *   FT_RASTER_FLAG_XXX</span>
<span class="line-modified"> 801    *</span>
<span class="line-modified"> 802    *   FT_Raster_NewFunc</span>
<span class="line-modified"> 803    *   FT_Raster_DoneFunc</span>
<span class="line-modified"> 804    *   FT_Raster_ResetFunc</span>
<span class="line-modified"> 805    *   FT_Raster_SetModeFunc</span>
<span class="line-modified"> 806    *   FT_Raster_RenderFunc</span>
<span class="line-modified"> 807    *   FT_Raster_Funcs</span>
<span class="line-modified"> 808    *</span>
<span class="line-modified"> 809    */</span>
<span class="line-modified"> 810 </span>
<span class="line-modified"> 811 </span>
<span class="line-modified"> 812   /**************************************************************************</span>
<span class="line-modified"> 813    *</span>
<span class="line-modified"> 814    * @type:</span>
<span class="line-modified"> 815    *   FT_Raster</span>
<span class="line-modified"> 816    *</span>
<span class="line-modified"> 817    * @description:</span>
<span class="line-modified"> 818    *   An opaque handle (pointer) to a raster object.  Each object can be</span>
<span class="line-modified"> 819    *   used independently to convert an outline into a bitmap or pixmap.</span>
<span class="line-modified"> 820    */</span>
 821   typedef struct FT_RasterRec_*  FT_Raster;
 822 
 823 
<span class="line-modified"> 824   /**************************************************************************</span>
<span class="line-modified"> 825    *</span>
<span class="line-modified"> 826    * @struct:</span>
<span class="line-modified"> 827    *   FT_Span</span>
<span class="line-modified"> 828    *</span>
<span class="line-modified"> 829    * @description:</span>
<span class="line-modified"> 830    *   A structure used to model a single span of gray pixels when rendering</span>
<span class="line-modified"> 831    *   an anti-aliased bitmap.</span>
<span class="line-modified"> 832    *</span>
<span class="line-modified"> 833    * @fields:</span>
<span class="line-modified"> 834    *   x ::</span>
<span class="line-modified"> 835    *     The span&#39;s horizontal start position.</span>
<span class="line-modified"> 836    *</span>
<span class="line-modified"> 837    *   len ::</span>
<span class="line-modified"> 838    *     The span&#39;s length in pixels.</span>
<span class="line-modified"> 839    *</span>
<span class="line-modified"> 840    *   coverage ::</span>
<span class="line-modified"> 841    *     The span color/coverage, ranging from 0 (background) to 255</span>
<span class="line-modified"> 842    *     (foreground).</span>
<span class="line-modified"> 843    *</span>
<span class="line-modified"> 844    * @note:</span>
<span class="line-modified"> 845    *   This structure is used by the span drawing callback type named</span>
<span class="line-modified"> 846    *   @FT_SpanFunc that takes the y~coordinate of the span as a parameter.</span>
<span class="line-modified"> 847    *</span>
<span class="line-modified"> 848    *   The coverage value is always between 0 and 255.  If you want less gray</span>
<span class="line-added"> 849    *   values, the callback function has to reduce them.</span>
<span class="line-added"> 850    */</span>
 851   typedef struct  FT_Span_
 852   {
 853     short           x;
 854     unsigned short  len;
 855     unsigned char   coverage;
 856 
 857   } FT_Span;
 858 
 859 
<span class="line-modified"> 860   /**************************************************************************</span>
<span class="line-modified"> 861    *</span>
<span class="line-modified"> 862    * @functype:</span>
<span class="line-modified"> 863    *   FT_SpanFunc</span>
<span class="line-modified"> 864    *</span>
<span class="line-modified"> 865    * @description:</span>
<span class="line-modified"> 866    *   A function used as a call-back by the anti-aliased renderer in order</span>
<span class="line-modified"> 867    *   to let client applications draw themselves the gray pixel spans on</span>
<span class="line-modified"> 868    *   each scan line.</span>
<span class="line-modified"> 869    *</span>
<span class="line-modified"> 870    * @input:</span>
<span class="line-modified"> 871    *   y ::</span>
<span class="line-modified"> 872    *     The scanline&#39;s upward y~coordinate.</span>
<span class="line-modified"> 873    *</span>
<span class="line-modified"> 874    *   count ::</span>
<span class="line-modified"> 875    *     The number of spans to draw on this scanline.</span>
<span class="line-modified"> 876    *</span>
<span class="line-modified"> 877    *   spans ::</span>
<span class="line-modified"> 878    *     A table of `count` spans to draw on the scanline.</span>
<span class="line-modified"> 879    *</span>
<span class="line-modified"> 880    *   user ::</span>
<span class="line-modified"> 881    *     User-supplied data that is passed to the callback.</span>
<span class="line-modified"> 882    *</span>
<span class="line-modified"> 883    * @note:</span>
<span class="line-modified"> 884    *   This callback allows client applications to directly render the gray</span>
<span class="line-modified"> 885    *   spans of the anti-aliased bitmap to any kind of surfaces.</span>
<span class="line-added"> 886    *</span>
<span class="line-added"> 887    *   This can be used to write anti-aliased outlines directly to a given</span>
<span class="line-added"> 888    *   background bitmap, and even perform translucency.</span>
<span class="line-added"> 889    */</span>
 890   typedef void
 891   (*FT_SpanFunc)( int             y,
 892                   int             count,
 893                   const FT_Span*  spans,
 894                   void*           user );
 895 
 896 #define FT_Raster_Span_Func  FT_SpanFunc
 897 
 898 
<span class="line-modified"> 899   /**************************************************************************</span>
<span class="line-modified"> 900    *</span>
<span class="line-modified"> 901    * @functype:</span>
<span class="line-modified"> 902    *   FT_Raster_BitTest_Func</span>
<span class="line-modified"> 903    *</span>
<span class="line-modified"> 904    * @description:</span>
<span class="line-modified"> 905    *   Deprecated, unimplemented.</span>
<span class="line-modified"> 906    */</span>
 907   typedef int
 908   (*FT_Raster_BitTest_Func)( int    y,
 909                              int    x,
 910                              void*  user );
 911 
 912 
<span class="line-modified"> 913   /**************************************************************************</span>
<span class="line-modified"> 914    *</span>
<span class="line-modified"> 915    * @functype:</span>
<span class="line-modified"> 916    *   FT_Raster_BitSet_Func</span>
<span class="line-modified"> 917    *</span>
<span class="line-modified"> 918    * @description:</span>
<span class="line-modified"> 919    *   Deprecated, unimplemented.</span>
<span class="line-modified"> 920    */</span>
 921   typedef void
 922   (*FT_Raster_BitSet_Func)( int    y,
 923                             int    x,
 924                             void*  user );
 925 
 926 
<span class="line-modified"> 927   /**************************************************************************</span>
<span class="line-modified"> 928    *</span>
<span class="line-modified"> 929    * @enum:</span>
<span class="line-modified"> 930    *   FT_RASTER_FLAG_XXX</span>
<span class="line-modified"> 931    *</span>
<span class="line-modified"> 932    * @description:</span>
<span class="line-modified"> 933    *   A list of bit flag constants as used in the `flags` field of a</span>
<span class="line-modified"> 934    *   @FT_Raster_Params structure.</span>
<span class="line-modified"> 935    *</span>
<span class="line-modified"> 936    * @values:</span>
<span class="line-modified"> 937    *   FT_RASTER_FLAG_DEFAULT ::</span>
<span class="line-modified"> 938    *     This value is 0.</span>
<span class="line-modified"> 939    *</span>
<span class="line-modified"> 940    *   FT_RASTER_FLAG_AA ::</span>
<span class="line-modified"> 941    *     This flag is set to indicate that an anti-aliased glyph image should</span>
<span class="line-modified"> 942    *     be generated.  Otherwise, it will be monochrome (1-bit).</span>
<span class="line-modified"> 943    *</span>
<span class="line-modified"> 944    *   FT_RASTER_FLAG_DIRECT ::</span>
<span class="line-modified"> 945    *     This flag is set to indicate direct rendering.  In this mode, client</span>
<span class="line-modified"> 946    *     applications must provide their own span callback.  This lets them</span>
<span class="line-modified"> 947    *     directly draw or compose over an existing bitmap.  If this bit is</span>
<span class="line-modified"> 948    *     _not_ set, the target pixmap&#39;s buffer _must_ be zeroed before</span>
<span class="line-modified"> 949    *     rendering and the output will be clipped to its size.</span>
<span class="line-modified"> 950    *</span>
<span class="line-modified"> 951    *     Direct rendering is only possible with anti-aliased glyphs.</span>
<span class="line-modified"> 952    *</span>
<span class="line-modified"> 953    *   FT_RASTER_FLAG_CLIP ::</span>
<span class="line-modified"> 954    *     This flag is only used in direct rendering mode.  If set, the output</span>
<span class="line-modified"> 955    *     will be clipped to a box specified in the `clip_box` field of the</span>
<span class="line-modified"> 956    *     @FT_Raster_Params structure.  Otherwise, the `clip_box` is</span>
<span class="line-modified"> 957    *     effectively set to the bounding box and all spans are generated.</span>
<span class="line-modified"> 958    */</span>








 959 #define FT_RASTER_FLAG_DEFAULT  0x0
 960 #define FT_RASTER_FLAG_AA       0x1
 961 #define FT_RASTER_FLAG_DIRECT   0x2
 962 #define FT_RASTER_FLAG_CLIP     0x4
 963 
 964   /* these constants are deprecated; use the corresponding */
<span class="line-modified"> 965   /* `FT_RASTER_FLAG_XXX` values instead                   */</span>
 966 #define ft_raster_flag_default  FT_RASTER_FLAG_DEFAULT
 967 #define ft_raster_flag_aa       FT_RASTER_FLAG_AA
 968 #define ft_raster_flag_direct   FT_RASTER_FLAG_DIRECT
 969 #define ft_raster_flag_clip     FT_RASTER_FLAG_CLIP
 970 
 971 
<span class="line-modified"> 972   /**************************************************************************</span>
<span class="line-modified"> 973    *</span>
<span class="line-modified"> 974    * @struct:</span>
<span class="line-modified"> 975    *   FT_Raster_Params</span>
<span class="line-modified"> 976    *</span>
<span class="line-modified"> 977    * @description:</span>
<span class="line-modified"> 978    *   A structure to hold the parameters used by a raster&#39;s render function,</span>
<span class="line-modified"> 979    *   passed as an argument to @FT_Outline_Render.</span>
<span class="line-modified"> 980    *</span>
<span class="line-modified"> 981    * @fields:</span>
<span class="line-modified"> 982    *   target ::</span>
<span class="line-modified"> 983    *     The target bitmap.</span>
<span class="line-modified"> 984    *</span>
<span class="line-modified"> 985    *   source ::</span>
<span class="line-modified"> 986    *     A pointer to the source glyph image (e.g., an @FT_Outline).</span>
<span class="line-modified"> 987    *</span>
<span class="line-modified"> 988    *   flags ::</span>
<span class="line-modified"> 989    *     The rendering flags.</span>
<span class="line-modified"> 990    *</span>
<span class="line-modified"> 991    *   gray_spans ::</span>
<span class="line-modified"> 992    *     The gray span drawing callback.</span>
<span class="line-modified"> 993    *</span>
<span class="line-modified"> 994    *   black_spans ::</span>
<span class="line-modified"> 995    *     Unused.</span>
<span class="line-modified"> 996    *</span>
<span class="line-modified"> 997    *   bit_test ::</span>
<span class="line-modified"> 998    *     Unused.</span>
<span class="line-modified"> 999    *</span>
<span class="line-modified">1000    *   bit_set ::</span>
<span class="line-modified">1001    *     Unused.</span>
<span class="line-modified">1002    *</span>
<span class="line-modified">1003    *   user ::</span>
<span class="line-modified">1004    *     User-supplied data that is passed to each drawing callback.</span>
<span class="line-modified">1005    *</span>
<span class="line-modified">1006    *   clip_box ::</span>
<span class="line-modified">1007    *     An optional clipping box.  It is only used in direct rendering mode.</span>
<span class="line-modified">1008    *     Note that coordinates here should be expressed in _integer_ pixels</span>
<span class="line-modified">1009    *     (and not in 26.6 fixed-point units).</span>
<span class="line-modified">1010    *</span>
<span class="line-modified">1011    * @note:</span>
<span class="line-modified">1012    *   An anti-aliased glyph bitmap is drawn if the @FT_RASTER_FLAG_AA bit</span>
<span class="line-modified">1013    *   flag is set in the `flags` field, otherwise a monochrome bitmap is</span>
<span class="line-modified">1014    *   generated.</span>
<span class="line-modified">1015    *</span>
<span class="line-added">1016    *   If the @FT_RASTER_FLAG_DIRECT bit flag is set in `flags`, the raster</span>
<span class="line-added">1017    *   will call the `gray_spans` callback to draw gray pixel spans.  This</span>
<span class="line-added">1018    *   allows direct composition over a pre-existing bitmap through</span>
<span class="line-added">1019    *   user-provided callbacks to perform the span drawing and composition.</span>
<span class="line-added">1020    *   Not supported by the monochrome rasterizer.</span>
<span class="line-added">1021    */</span>
1022   typedef struct  FT_Raster_Params_
1023   {
1024     const FT_Bitmap*        target;
1025     const void*             source;
1026     int                     flags;
1027     FT_SpanFunc             gray_spans;
1028     FT_SpanFunc             black_spans;  /* unused */
1029     FT_Raster_BitTest_Func  bit_test;     /* unused */
1030     FT_Raster_BitSet_Func   bit_set;      /* unused */
1031     void*                   user;
1032     FT_BBox                 clip_box;
1033 
1034   } FT_Raster_Params;
1035 
1036 
<span class="line-modified">1037   /**************************************************************************</span>
<span class="line-modified">1038    *</span>
<span class="line-modified">1039    * @functype:</span>
<span class="line-modified">1040    *   FT_Raster_NewFunc</span>
<span class="line-modified">1041    *</span>
<span class="line-modified">1042    * @description:</span>
<span class="line-modified">1043    *   A function used to create a new raster object.</span>
<span class="line-modified">1044    *</span>
<span class="line-modified">1045    * @input:</span>
<span class="line-modified">1046    *   memory ::</span>
<span class="line-modified">1047    *     A handle to the memory allocator.</span>
<span class="line-modified">1048    *</span>
<span class="line-modified">1049    * @output:</span>
<span class="line-modified">1050    *   raster ::</span>
<span class="line-modified">1051    *     A handle to the new raster object.</span>
<span class="line-modified">1052    *</span>
<span class="line-modified">1053    * @return:</span>
<span class="line-modified">1054    *   Error code.  0~means success.</span>
<span class="line-modified">1055    *</span>
<span class="line-modified">1056    * @note:</span>
<span class="line-modified">1057    *   The `memory` parameter is a typeless pointer in order to avoid</span>
<span class="line-modified">1058    *   un-wanted dependencies on the rest of the FreeType code.  In practice,</span>
<span class="line-modified">1059    *   it is an @FT_Memory object, i.e., a handle to the standard FreeType</span>
<span class="line-modified">1060    *   memory allocator.  However, this field can be completely ignored by a</span>
<span class="line-added">1061    *   given raster implementation.</span>
<span class="line-added">1062    */</span>
1063   typedef int
1064   (*FT_Raster_NewFunc)( void*       memory,
1065                         FT_Raster*  raster );
1066 
1067 #define FT_Raster_New_Func  FT_Raster_NewFunc
1068 
1069 
<span class="line-modified">1070   /**************************************************************************</span>
<span class="line-modified">1071    *</span>
<span class="line-modified">1072    * @functype:</span>
<span class="line-modified">1073    *   FT_Raster_DoneFunc</span>
<span class="line-modified">1074    *</span>
<span class="line-modified">1075    * @description:</span>
<span class="line-modified">1076    *   A function used to destroy a given raster object.</span>
<span class="line-modified">1077    *</span>
<span class="line-modified">1078    * @input:</span>
<span class="line-modified">1079    *   raster ::</span>
<span class="line-modified">1080    *     A handle to the raster object.</span>
<span class="line-added">1081    */</span>
1082   typedef void
1083   (*FT_Raster_DoneFunc)( FT_Raster  raster );
1084 
1085 #define FT_Raster_Done_Func  FT_Raster_DoneFunc
1086 
1087 
<span class="line-modified">1088   /**************************************************************************</span>
<span class="line-modified">1089    *</span>
<span class="line-modified">1090    * @functype:</span>
<span class="line-modified">1091    *   FT_Raster_ResetFunc</span>
<span class="line-modified">1092    *</span>
<span class="line-modified">1093    * @description:</span>
<span class="line-modified">1094    *   FreeType used to provide an area of memory called the &#39;render pool&#39;</span>
<span class="line-modified">1095    *   available to all registered rasterizers.  This was not thread safe,</span>
<span class="line-modified">1096    *   however, and now FreeType never allocates this pool.</span>
<span class="line-modified">1097    *</span>
<span class="line-modified">1098    *   This function is called after a new raster object is created.</span>
<span class="line-modified">1099    *</span>
<span class="line-modified">1100    * @input:</span>
<span class="line-modified">1101    *   raster ::</span>
<span class="line-modified">1102    *     A handle to the new raster object.</span>
<span class="line-modified">1103    *</span>
<span class="line-modified">1104    *   pool_base ::</span>
<span class="line-modified">1105    *     Previously, the address in memory of the render pool.  Set this to</span>
<span class="line-modified">1106    *     `NULL`.</span>
<span class="line-modified">1107    *</span>
<span class="line-modified">1108    *   pool_size ::</span>
<span class="line-modified">1109    *     Previously, the size in bytes of the render pool.  Set this to 0.</span>
<span class="line-modified">1110    *</span>
<span class="line-modified">1111    * @note:</span>
<span class="line-modified">1112    *   Rasterizers should rely on dynamic or stack allocation if they want to</span>
<span class="line-modified">1113    *   (a handle to the memory allocator is passed to the rasterizer</span>
<span class="line-added">1114    *   constructor).</span>
<span class="line-added">1115    */</span>
1116   typedef void
1117   (*FT_Raster_ResetFunc)( FT_Raster       raster,
1118                           unsigned char*  pool_base,
1119                           unsigned long   pool_size );
1120 
1121 #define FT_Raster_Reset_Func  FT_Raster_ResetFunc
1122 
1123 
<span class="line-modified">1124   /**************************************************************************</span>
<span class="line-modified">1125    *</span>
<span class="line-modified">1126    * @functype:</span>
<span class="line-modified">1127    *   FT_Raster_SetModeFunc</span>
<span class="line-modified">1128    *</span>
<span class="line-modified">1129    * @description:</span>
<span class="line-modified">1130    *   This function is a generic facility to change modes or attributes in a</span>
<span class="line-modified">1131    *   given raster.  This can be used for debugging purposes, or simply to</span>
<span class="line-modified">1132    *   allow implementation-specific &#39;features&#39; in a given raster module.</span>
<span class="line-modified">1133    *</span>
<span class="line-modified">1134    * @input:</span>
<span class="line-modified">1135    *   raster ::</span>
<span class="line-modified">1136    *     A handle to the new raster object.</span>
<span class="line-modified">1137    *</span>
<span class="line-modified">1138    *   mode ::</span>
<span class="line-modified">1139    *     A 4-byte tag used to name the mode or property.</span>
<span class="line-modified">1140    *</span>
<span class="line-modified">1141    *   args ::</span>
<span class="line-added">1142    *     A pointer to the new mode/property to use.</span>
<span class="line-added">1143    */</span>
1144   typedef int
1145   (*FT_Raster_SetModeFunc)( FT_Raster      raster,
1146                             unsigned long  mode,
1147                             void*          args );
1148 
1149 #define FT_Raster_Set_Mode_Func  FT_Raster_SetModeFunc
1150 
1151 
<span class="line-modified">1152   /**************************************************************************</span>
<span class="line-modified">1153    *</span>
<span class="line-modified">1154    * @functype:</span>
<span class="line-modified">1155    *   FT_Raster_RenderFunc</span>
<span class="line-modified">1156    *</span>
<span class="line-modified">1157    * @description:</span>
<span class="line-modified">1158    *   Invoke a given raster to scan-convert a given glyph image into a</span>
<span class="line-modified">1159    *   target bitmap.</span>
<span class="line-modified">1160    *</span>
<span class="line-modified">1161    * @input:</span>
<span class="line-modified">1162    *   raster ::</span>
<span class="line-modified">1163    *     A handle to the raster object.</span>
<span class="line-modified">1164    *</span>
<span class="line-modified">1165    *   params ::</span>
<span class="line-modified">1166    *     A pointer to an @FT_Raster_Params structure used to store the</span>
<span class="line-modified">1167    *     rendering parameters.</span>
<span class="line-modified">1168    *</span>
<span class="line-modified">1169    * @return:</span>
<span class="line-modified">1170    *   Error code.  0~means success.</span>
<span class="line-modified">1171    *</span>
<span class="line-modified">1172    * @note:</span>
<span class="line-modified">1173    *   The exact format of the source image depends on the raster&#39;s glyph</span>
<span class="line-modified">1174    *   format defined in its @FT_Raster_Funcs structure.  It can be an</span>
<span class="line-modified">1175    *   @FT_Outline or anything else in order to support a large array of</span>
<span class="line-modified">1176    *   glyph formats.</span>
<span class="line-modified">1177    *</span>
<span class="line-modified">1178    *   Note also that the render function can fail and return a</span>
<span class="line-modified">1179    *   `FT_Err_Unimplemented_Feature` error code if the raster used does not</span>
<span class="line-modified">1180    *   support direct composition.</span>
<span class="line-modified">1181    */</span>




1182   typedef int
1183   (*FT_Raster_RenderFunc)( FT_Raster                raster,
1184                            const FT_Raster_Params*  params );
1185 
1186 #define FT_Raster_Render_Func  FT_Raster_RenderFunc
1187 
1188 
<span class="line-modified">1189   /**************************************************************************</span>
<span class="line-modified">1190    *</span>
<span class="line-modified">1191    * @struct:</span>
<span class="line-modified">1192    *   FT_Raster_Funcs</span>
<span class="line-modified">1193    *</span>
<span class="line-modified">1194    * @description:</span>
<span class="line-modified">1195    *  A structure used to describe a given raster class to the library.</span>
<span class="line-modified">1196    *</span>
<span class="line-modified">1197    * @fields:</span>
<span class="line-modified">1198    *   glyph_format ::</span>
<span class="line-modified">1199    *     The supported glyph format for this raster.</span>
<span class="line-modified">1200    *</span>
<span class="line-modified">1201    *   raster_new ::</span>
<span class="line-modified">1202    *     The raster constructor.</span>
<span class="line-modified">1203    *</span>
<span class="line-modified">1204    *   raster_reset ::</span>
<span class="line-modified">1205    *     Used to reset the render pool within the raster.</span>
<span class="line-modified">1206    *</span>
<span class="line-modified">1207    *   raster_render ::</span>
<span class="line-added">1208    *     A function to render a glyph into a given bitmap.</span>
<span class="line-added">1209    *</span>
<span class="line-added">1210    *   raster_done ::</span>
<span class="line-added">1211    *     The raster destructor.</span>
<span class="line-added">1212    */</span>
1213   typedef struct  FT_Raster_Funcs_
1214   {
1215     FT_Glyph_Format        glyph_format;
1216 
1217     FT_Raster_NewFunc      raster_new;
1218     FT_Raster_ResetFunc    raster_reset;
1219     FT_Raster_SetModeFunc  raster_set_mode;
1220     FT_Raster_RenderFunc   raster_render;
1221     FT_Raster_DoneFunc     raster_done;
1222 
1223   } FT_Raster_Funcs;
1224 
1225   /* */
1226 
1227 
1228 FT_END_HEADER
1229 
1230 #endif /* FTIMAGE_H_ */
1231 
1232 
</pre>
</td>
</tr>
</table>
<center><a href="ftgzip.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftincrem.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>