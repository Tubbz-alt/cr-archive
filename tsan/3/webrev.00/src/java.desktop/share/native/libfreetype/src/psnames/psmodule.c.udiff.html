<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/native/libfreetype/src/psnames/psmodule.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../pshinter/pshrec.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="psmodule.h.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/psnames/psmodule.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,49 +1,48 @@</span>
<span class="udiff-line-modified-removed">- /***************************************************************************/</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*  psmodule.c                                                             */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*    PSNames module implementation (body).                                */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*  Copyright 1996-2018 by                                                 */</span>
<span class="udiff-line-modified-removed">- /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="udiff-line-modified-removed">- /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="udiff-line-modified-removed">- /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="udiff-line-modified-removed">- /*  this file you indicate that you have read the license and              */</span>
<span class="udiff-line-modified-removed">- /*  understand and accept it fully.                                        */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /***************************************************************************/</span>
<span class="udiff-line-modified-added">+ /****************************************************************************</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  * psmodule.c</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  *   psnames module implementation (body).</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 1996-2019 by</span>
<span class="udiff-line-modified-added">+  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  * This file is part of the FreeType project, and may only be used,</span>
<span class="udiff-line-modified-added">+  * modified, and distributed under the terms of the FreeType project</span>
<span class="udiff-line-modified-added">+  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="udiff-line-modified-added">+  * this file you indicate that you have read the license and</span>
<span class="udiff-line-modified-added">+  * understand and accept it fully.</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  */</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DEBUG_H
  #include FT_INTERNAL_OBJECTS_H
  #include FT_SERVICE_POSTSCRIPT_CMAPS_H
  
  #include &quot;psmodule.h&quot;
  
    /*
<span class="udiff-line-modified-removed">-    *  The file `pstables.h&#39; with its arrays and its function</span>
<span class="udiff-line-modified-removed">-    *  `ft_get_adobe_glyph_index&#39; is useful for other projects also (for</span>
<span class="udiff-line-modified-removed">-    *  example, `pdfium&#39; is using it).  However, if used as a C++ header,</span>
<span class="udiff-line-modified-removed">-    *  including it in two different source files makes it necessary to use</span>
<span class="udiff-line-modified-removed">-    *  `extern const&#39; for the declaration of its arrays, otherwise the data</span>
<span class="udiff-line-modified-removed">-    *  would be duplicated as mandated by the C++ standard.</span>
<span class="udiff-line-modified-added">+    * The file `pstables.h&#39; with its arrays and its function</span>
<span class="udiff-line-modified-added">+    * `ft_get_adobe_glyph_index&#39; is useful for other projects also (for</span>
<span class="udiff-line-modified-added">+    * example, `pdfium&#39; is using it).  However, if used as a C++ header,</span>
<span class="udiff-line-modified-added">+    * including it in two different source files makes it necessary to use</span>
<span class="udiff-line-modified-added">+    * `extern const&#39; for the declaration of its arrays, otherwise the data</span>
<span class="udiff-line-modified-added">+    * would be duplicated as mandated by the C++ standard.</span>
     *
<span class="udiff-line-modified-removed">-    *  For this reason, we use `DEFINE_PS_TABLES&#39; to guard the function</span>
<span class="udiff-line-modified-removed">-    *  definitions, and `DEFINE_PS_TABLES_DATA&#39; to provide both proper array</span>
<span class="udiff-line-modified-removed">-    *  declarations and definitions.</span>
<span class="udiff-line-modified-added">+    * For this reason, we use `DEFINE_PS_TABLES&#39; to guard the function</span>
<span class="udiff-line-modified-added">+    * definitions, and `DEFINE_PS_TABLES_DATA&#39; to provide both proper array</span>
<span class="udiff-line-modified-added">+    * declarations and definitions.</span>
     */
  #include &quot;pstables.h&quot;
  #define  DEFINE_PS_TABLES
  #define  DEFINE_PS_TABLES_DATA
  #include &quot;pstables.h&quot;
  
  #include &quot;psnamerr.h&quot;
<span class="udiff-line-removed">- #include &quot;pspic.h&quot;</span>
  
  
  #ifdef FT_CONFIG_OPTION_POSTSCRIPT_NAMES
  
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -391,11 +390,13 @@</span>
        else
        {
          /* Reallocate if the number of used entries is much smaller. */
          if ( count &lt; num_glyphs / 2 )
          {
<span class="udiff-line-modified-removed">-           (void)FT_RENEW_ARRAY( table-&gt;maps, num_glyphs, count );</span>
<span class="udiff-line-modified-added">+           (void)FT_RENEW_ARRAY( table-&gt;maps,</span>
<span class="udiff-line-added">+                                 num_glyphs + EXTRA_GLYPH_LIST_SIZE,</span>
<span class="udiff-line-added">+                                 count );</span>
            error = FT_Err_Ok;
          }
  
          /* Sort the table in increasing order of unicode values, */
          /* taking care of glyph variants.                        */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -575,32 +576,20 @@</span>
  
  
    FT_DEFINE_SERVICEDESCREC1(
      pscmaps_services,
  
<span class="udiff-line-modified-removed">-     FT_SERVICE_ID_POSTSCRIPT_CMAPS, &amp;PSCMAPS_INTERFACE_GET )</span>
<span class="udiff-line-modified-added">+     FT_SERVICE_ID_POSTSCRIPT_CMAPS, &amp;pscmaps_interface )</span>
  
  
    static FT_Pointer
    psnames_get_service( FT_Module    module,
                         const char*  service_id )
    {
<span class="udiff-line-removed">-     /* PSCMAPS_SERVICES_GET dereferences `library&#39; in PIC mode */</span>
<span class="udiff-line-removed">- #ifdef FT_CONFIG_OPTION_PIC</span>
<span class="udiff-line-removed">-     FT_Library  library;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     if ( !module )</span>
<span class="udiff-line-removed">-       return NULL;</span>
<span class="udiff-line-removed">-     library = module-&gt;library;</span>
<span class="udiff-line-removed">-     if ( !library )</span>
<span class="udiff-line-removed">-       return NULL;</span>
<span class="udiff-line-removed">- #else</span>
      FT_UNUSED( module );
<span class="udiff-line-removed">- #endif</span>
  
<span class="udiff-line-modified-removed">-     return ft_service_list_lookup( PSCMAPS_SERVICES_GET, service_id );</span>
<span class="udiff-line-modified-added">+     return ft_service_list_lookup( pscmaps_services, service_id );</span>
    }
  
  #endif /* FT_CONFIG_OPTION_POSTSCRIPT_NAMES */
  
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -619,11 +608,11 @@</span>
      &quot;psnames&quot;,  /* driver name                         */
      0x10000L,   /* driver version                      */
      0x20000L,   /* driver requires FreeType 2 or above */
  
      PUT_PS_NAMES_SERVICE(
<span class="udiff-line-modified-removed">-       (void*)&amp;PSCMAPS_INTERFACE_GET ),   /* module specific interface */</span>
<span class="udiff-line-modified-added">+       (void*)&amp;pscmaps_interface ),   /* module specific interface */</span>
  
      (FT_Module_Constructor)NULL,                                       /* module_init   */
      (FT_Module_Destructor) NULL,                                       /* module_done   */
      (FT_Module_Requester)  PUT_PS_NAMES_SERVICE( psnames_get_service ) /* get_interface */
    )
</pre>
<center><a href="../pshinter/pshrec.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="psmodule.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>