<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/internal/ftrfork.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftpsprop.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ftserv.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/internal/ftrfork.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 /***************************************************************************/</span>
<span class="line-modified">  2 /*                                                                         */</span>
<span class="line-modified">  3 /*  ftrfork.h                                                              */</span>
<span class="line-modified">  4 /*                                                                         */</span>
<span class="line-modified">  5 /*    Embedded resource forks accessor (specification).                    */</span>
<span class="line-modified">  6 /*                                                                         */</span>
<span class="line-modified">  7 /*  Copyright 2004-2018 by                                                 */</span>
<span class="line-modified">  8 /*  Masatake YAMATO and Redhat K.K.                                        */</span>
<span class="line-modified">  9 /*                                                                         */</span>
<span class="line-modified"> 10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified"> 11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified"> 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified"> 13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified"> 14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified"> 15 /*                                                                         */</span>
<span class="line-modified"> 16 /***************************************************************************/</span>
<span class="line-modified"> 17 </span>
<span class="line-modified"> 18 /***************************************************************************/</span>
<span class="line-modified"> 19 /* Development of the code in this file is support of                      */</span>
<span class="line-modified"> 20 /* Information-technology Promotion Agency, Japan.                         */</span>
<span class="line-modified"> 21 /***************************************************************************/</span>
 22 
 23 
 24 #ifndef FTRFORK_H_
 25 #define FTRFORK_H_
 26 
 27 
 28 #include &lt;ft2build.h&gt;
 29 #include FT_INTERNAL_OBJECTS_H
 30 
 31 
 32 FT_BEGIN_HEADER
 33 
 34 
 35   /* Number of guessing rules supported in `FT_Raccess_Guess&#39;.            */
 36   /* Don&#39;t forget to increment the number if you add a new guessing rule. */
 37 #define FT_RACCESS_N_RULES  9
 38 
 39 
 40   /* A structure to describe a reference in a resource by its resource ID */
 41   /* and internal offset.  The `POST&#39; resource expects to be concatenated */
</pre>
<hr />
<pre>
 55                             FT_Stream   stream,
 56                             char       *base_file_name,
 57                             char      **result_file_name,
 58                             FT_Long    *result_offset );
 59 
 60   typedef enum  FT_RFork_Rule_ {
 61     FT_RFork_Rule_invalid = -2,
 62     FT_RFork_Rule_uknown, /* -1 */
 63     FT_RFork_Rule_apple_double,
 64     FT_RFork_Rule_apple_single,
 65     FT_RFork_Rule_darwin_ufs_export,
 66     FT_RFork_Rule_darwin_newvfs,
 67     FT_RFork_Rule_darwin_hfsplus,
 68     FT_RFork_Rule_vfat,
 69     FT_RFork_Rule_linux_cap,
 70     FT_RFork_Rule_linux_double,
 71     FT_RFork_Rule_linux_netatalk
 72   } FT_RFork_Rule;
 73 
 74   /* For fast translation between rule index and rule type,
<span class="line-modified"> 75    * the macros FT_RFORK_xxx should be kept consistent with</span>
<span class="line-modified"> 76    * the raccess_guess_funcs table</span>
 77    */
 78   typedef struct ft_raccess_guess_rec_ {
 79     ft_raccess_guess_func  func;
 80     FT_RFork_Rule          type;
 81   } ft_raccess_guess_rec;
 82 
<span class="line-removed"> 83 #ifndef FT_CONFIG_OPTION_PIC</span>
 84 
<span class="line-removed"> 85   /* this array is a storage in non-PIC mode, so ; is needed in END */</span>
 86 #define CONST_FT_RFORK_RULE_ARRAY_BEGIN( name, type )  \
 87           static const type name[] = {
 88 #define CONST_FT_RFORK_RULE_ARRAY_ENTRY( func_suffix, type_suffix )  \
 89           { raccess_guess_ ## func_suffix,                           \
 90             FT_RFork_Rule_ ## type_suffix },

 91 #define CONST_FT_RFORK_RULE_ARRAY_END  };
 92 
<span class="line-removed"> 93 #else /* FT_CONFIG_OPTION_PIC */</span>
<span class="line-removed"> 94 </span>
<span class="line-removed"> 95   /* this array is a function in PIC mode, so no ; is needed in END */</span>
<span class="line-removed"> 96 #define CONST_FT_RFORK_RULE_ARRAY_BEGIN( name, type )  \</span>
<span class="line-removed"> 97           void                                         \</span>
<span class="line-removed"> 98           FT_Init_Table_ ## name( type*  storage )     \</span>
<span class="line-removed"> 99           {                                            \</span>
<span class="line-removed">100             type*  local = storage;                    \</span>
<span class="line-removed">101                                                        \</span>
<span class="line-removed">102                                                        \</span>
<span class="line-removed">103             int  i = 0;</span>
<span class="line-removed">104 #define CONST_FT_RFORK_RULE_ARRAY_ENTRY( func_suffix, type_suffix )  \</span>
<span class="line-removed">105           local[i].func = raccess_guess_ ## func_suffix;             \</span>
<span class="line-removed">106           local[i].type = FT_RFork_Rule_ ## type_suffix;             \</span>
<span class="line-removed">107           i++;</span>
<span class="line-removed">108 #define CONST_FT_RFORK_RULE_ARRAY_END  }</span>
<span class="line-removed">109 </span>
<span class="line-removed">110 #endif /* FT_CONFIG_OPTION_PIC */</span>
<span class="line-removed">111 </span>
112 #endif /* FT_CONFIG_OPTION_GUESSING_EMBEDDED_RFORK */
113 
114 
<span class="line-modified">115   /*************************************************************************/</span>
<span class="line-modified">116   /*                                                                       */</span>
<span class="line-modified">117   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">118   /*    FT_Raccess_Guess                                                   */</span>
<span class="line-modified">119   /*                                                                       */</span>
<span class="line-modified">120   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">121   /*    Guess a file name and offset where the actual resource fork is     */</span>
<span class="line-modified">122   /*    stored.  The macro FT_RACCESS_N_RULES holds the number of          */</span>
<span class="line-modified">123   /*    guessing rules;  the guessed result for the Nth rule is            */</span>
<span class="line-modified">124   /*    represented as a triplet: a new file name (new_names[N]), a file   */</span>
<span class="line-modified">125   /*    offset (offsets[N]), and an error code (errors[N]).                */</span>
<span class="line-modified">126   /*                                                                       */</span>
<span class="line-modified">127   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">128   /*    library ::                                                         */</span>
<span class="line-modified">129   /*      A FreeType library instance.                                     */</span>
<span class="line-modified">130   /*                                                                       */</span>
<span class="line-modified">131   /*    stream ::                                                          */</span>
<span class="line-modified">132   /*      A file stream containing the resource fork.                      */</span>
<span class="line-modified">133   /*                                                                       */</span>
<span class="line-modified">134   /*    base_name ::                                                       */</span>
<span class="line-modified">135   /*      The (base) file name of the resource fork used for some          */</span>
<span class="line-modified">136   /*      guessing rules.                                                  */</span>
<span class="line-modified">137   /*                                                                       */</span>
<span class="line-modified">138   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">139   /*    new_names ::                                                       */</span>
<span class="line-modified">140   /*      An array of guessed file names in which the resource forks may   */</span>
<span class="line-modified">141   /*      exist.  If `new_names[N]&#39; is NULL, the guessed file name is      */</span>
<span class="line-modified">142   /*      equal to `base_name&#39;.                                            */</span>
<span class="line-modified">143   /*                                                                       */</span>
<span class="line-modified">144   /*    offsets ::                                                         */</span>
<span class="line-modified">145   /*      An array of guessed file offsets.  `offsets[N]&#39; holds the file   */</span>
<span class="line-modified">146   /*      offset of the possible start of the resource fork in file        */</span>
<span class="line-modified">147   /*      `new_names[N]&#39;.                                                  */</span>
<span class="line-modified">148   /*                                                                       */</span>
<span class="line-modified">149   /*    errors ::                                                          */</span>
<span class="line-modified">150   /*      An array of FreeType error codes.  `errors[N]&#39; is the error      */</span>
<span class="line-modified">151   /*      code of Nth guessing rule function.  If `errors[N]&#39; is not       */</span>
<span class="line-modified">152   /*      FT_Err_Ok, `new_names[N]&#39; and `offsets[N]&#39; are meaningless.      */</span>
<span class="line-modified">153   /*                                                                       */</span>
154   FT_BASE( void )
155   FT_Raccess_Guess( FT_Library  library,
156                     FT_Stream   stream,
157                     char*       base_name,
158                     char**      new_names,
159                     FT_Long*    offsets,
160                     FT_Error*   errors );
161 
162 
<span class="line-modified">163   /*************************************************************************/</span>
<span class="line-modified">164   /*                                                                       */</span>
<span class="line-modified">165   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">166   /*    FT_Raccess_Get_HeaderInfo                                          */</span>
<span class="line-modified">167   /*                                                                       */</span>
<span class="line-modified">168   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">169   /*    Get the information from the header of resource fork.  The         */</span>
<span class="line-modified">170   /*    information includes the file offset where the resource map        */</span>
<span class="line-modified">171   /*    starts, and the file offset where the resource data starts.        */</span>
<span class="line-modified">172   /*    `FT_Raccess_Get_DataOffsets&#39; requires these two data.              */</span>
<span class="line-modified">173   /*                                                                       */</span>
<span class="line-modified">174   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">175   /*    library ::                                                         */</span>
<span class="line-modified">176   /*      A FreeType library instance.                                     */</span>
<span class="line-modified">177   /*                                                                       */</span>
<span class="line-modified">178   /*    stream ::                                                          */</span>
<span class="line-modified">179   /*      A file stream containing the resource fork.                      */</span>
<span class="line-modified">180   /*                                                                       */</span>
<span class="line-modified">181   /*    rfork_offset ::                                                    */</span>
<span class="line-modified">182   /*      The file offset where the resource fork starts.                  */</span>
<span class="line-modified">183   /*                                                                       */</span>
<span class="line-modified">184   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">185   /*    map_offset ::                                                      */</span>
<span class="line-modified">186   /*      The file offset where the resource map starts.                   */</span>
<span class="line-modified">187   /*                                                                       */</span>
<span class="line-modified">188   /*    rdata_pos ::                                                       */</span>
<span class="line-modified">189   /*      The file offset where the resource data starts.                  */</span>
<span class="line-modified">190   /*                                                                       */</span>
<span class="line-modified">191   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">192   /*    FreeType error code.  FT_Err_Ok means success.                     */</span>
<span class="line-modified">193   /*                                                                       */</span>
194   FT_BASE( FT_Error )
195   FT_Raccess_Get_HeaderInfo( FT_Library  library,
196                              FT_Stream   stream,
197                              FT_Long     rfork_offset,
198                              FT_Long    *map_offset,
199                              FT_Long    *rdata_pos );
200 
201 
<span class="line-modified">202   /*************************************************************************/</span>
<span class="line-modified">203   /*                                                                       */</span>
<span class="line-modified">204   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">205   /*    FT_Raccess_Get_DataOffsets                                         */</span>
<span class="line-modified">206   /*                                                                       */</span>
<span class="line-modified">207   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">208   /*    Get the data offsets for a tag in a resource fork.  Offsets are    */</span>
<span class="line-modified">209   /*    stored in an array because, in some cases, resources in a resource */</span>
<span class="line-modified">210   /*    fork have the same tag.                                            */</span>
<span class="line-modified">211   /*                                                                       */</span>
<span class="line-modified">212   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">213   /*    library ::                                                         */</span>
<span class="line-modified">214   /*      A FreeType library instance.                                     */</span>
<span class="line-modified">215   /*                                                                       */</span>
<span class="line-modified">216   /*    stream ::                                                          */</span>
<span class="line-modified">217   /*      A file stream containing the resource fork.                      */</span>
<span class="line-modified">218   /*                                                                       */</span>
<span class="line-modified">219   /*    map_offset ::                                                      */</span>
<span class="line-modified">220   /*      The file offset where the resource map starts.                   */</span>
<span class="line-modified">221   /*                                                                       */</span>
<span class="line-modified">222   /*    rdata_pos ::                                                       */</span>
<span class="line-modified">223   /*      The file offset where the resource data starts.                  */</span>
<span class="line-modified">224   /*                                                                       */</span>
<span class="line-modified">225   /*    tag ::                                                             */</span>
<span class="line-modified">226   /*      The resource tag.                                                */</span>
<span class="line-modified">227   /*                                                                       */</span>
<span class="line-modified">228   /*    sort_by_res_id ::                                                  */</span>
<span class="line-modified">229   /*      A Boolean to sort the fragmented resource by their ids.          */</span>
<span class="line-modified">230   /*      The fragmented resources for `POST&#39; resource should be sorted    */</span>
<span class="line-modified">231   /*      to restore Type1 font properly.  For `sfnt&#39; resources, sorting   */</span>
<span class="line-modified">232   /*      may induce a different order of the faces in comparison to that  */</span>
<span class="line-modified">233   /*      by QuickDraw API.                                                */</span>
<span class="line-modified">234   /*                                                                       */</span>
<span class="line-modified">235   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">236   /*    offsets ::                                                         */</span>
<span class="line-modified">237   /*      The stream offsets for the resource data specified by `tag&#39;.     */</span>
<span class="line-modified">238   /*      This array is allocated by the function, so you have to call     */</span>
<span class="line-modified">239   /*      @ft_mem_free after use.                                          */</span>
<span class="line-modified">240   /*                                                                       */</span>
<span class="line-modified">241   /*    count ::                                                           */</span>
<span class="line-modified">242   /*      The length of offsets array.                                     */</span>
<span class="line-modified">243   /*                                                                       */</span>
<span class="line-modified">244   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">245   /*    FreeType error code.  FT_Err_Ok means success.                     */</span>
<span class="line-modified">246   /*                                                                       */</span>
<span class="line-modified">247   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">248   /*    Normally you should use `FT_Raccess_Get_HeaderInfo&#39; to get the     */</span>
<span class="line-modified">249   /*    value for `map_offset&#39; and `rdata_pos&#39;.                            */</span>
<span class="line-removed">250   /*                                                                       */</span>
251   FT_BASE( FT_Error )
252   FT_Raccess_Get_DataOffsets( FT_Library  library,
253                               FT_Stream   stream,
254                               FT_Long     map_offset,
255                               FT_Long     rdata_pos,
256                               FT_Long     tag,
257                               FT_Bool     sort_by_res_id,
258                               FT_Long   **offsets,
259                               FT_Long    *count );
260 
261 
262 FT_END_HEADER
263 
264 #endif /* FTRFORK_H_ */
265 
266 
267 /* END */
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * ftrfork.h</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   Embedded resource forks accessor (specification).</span>
<span class="line-modified">  6  *</span>
<span class="line-modified">  7  * Copyright (C) 2004-2019 by</span>
<span class="line-modified">  8  * Masatake YAMATO and Redhat K.K.</span>
<span class="line-modified">  9  *</span>
<span class="line-modified"> 10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 13  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 14  * understand and accept it fully.</span>
<span class="line-modified"> 15  *</span>
<span class="line-modified"> 16  */</span>
<span class="line-modified"> 17 </span>
<span class="line-modified"> 18 /****************************************************************************</span>
<span class="line-modified"> 19  * Development of the code in this file is support of</span>
<span class="line-modified"> 20  * Information-technology Promotion Agency, Japan.</span>
<span class="line-modified"> 21  */</span>
 22 
 23 
 24 #ifndef FTRFORK_H_
 25 #define FTRFORK_H_
 26 
 27 
 28 #include &lt;ft2build.h&gt;
 29 #include FT_INTERNAL_OBJECTS_H
 30 
 31 
 32 FT_BEGIN_HEADER
 33 
 34 
 35   /* Number of guessing rules supported in `FT_Raccess_Guess&#39;.            */
 36   /* Don&#39;t forget to increment the number if you add a new guessing rule. */
 37 #define FT_RACCESS_N_RULES  9
 38 
 39 
 40   /* A structure to describe a reference in a resource by its resource ID */
 41   /* and internal offset.  The `POST&#39; resource expects to be concatenated */
</pre>
<hr />
<pre>
 55                             FT_Stream   stream,
 56                             char       *base_file_name,
 57                             char      **result_file_name,
 58                             FT_Long    *result_offset );
 59 
 60   typedef enum  FT_RFork_Rule_ {
 61     FT_RFork_Rule_invalid = -2,
 62     FT_RFork_Rule_uknown, /* -1 */
 63     FT_RFork_Rule_apple_double,
 64     FT_RFork_Rule_apple_single,
 65     FT_RFork_Rule_darwin_ufs_export,
 66     FT_RFork_Rule_darwin_newvfs,
 67     FT_RFork_Rule_darwin_hfsplus,
 68     FT_RFork_Rule_vfat,
 69     FT_RFork_Rule_linux_cap,
 70     FT_RFork_Rule_linux_double,
 71     FT_RFork_Rule_linux_netatalk
 72   } FT_RFork_Rule;
 73 
 74   /* For fast translation between rule index and rule type,
<span class="line-modified"> 75    * the macros FT_RFORK_xxx should be kept consistent with the</span>
<span class="line-modified"> 76    * raccess_guess_funcs table</span>
 77    */
 78   typedef struct ft_raccess_guess_rec_ {
 79     ft_raccess_guess_func  func;
 80     FT_RFork_Rule          type;
 81   } ft_raccess_guess_rec;
 82 

 83 

 84 #define CONST_FT_RFORK_RULE_ARRAY_BEGIN( name, type )  \
 85           static const type name[] = {
 86 #define CONST_FT_RFORK_RULE_ARRAY_ENTRY( func_suffix, type_suffix )  \
 87           { raccess_guess_ ## func_suffix,                           \
 88             FT_RFork_Rule_ ## type_suffix },
<span class="line-added"> 89   /* this array is a storage, thus a final `;&#39; is needed */</span>
 90 #define CONST_FT_RFORK_RULE_ARRAY_END  };
 91 



















 92 #endif /* FT_CONFIG_OPTION_GUESSING_EMBEDDED_RFORK */
 93 
 94 
<span class="line-modified"> 95   /**************************************************************************</span>
<span class="line-modified"> 96    *</span>
<span class="line-modified"> 97    * @function:</span>
<span class="line-modified"> 98    *   FT_Raccess_Guess</span>
<span class="line-modified"> 99    *</span>
<span class="line-modified">100    * @description:</span>
<span class="line-modified">101    *   Guess a file name and offset where the actual resource fork is stored.</span>
<span class="line-modified">102    *   The macro FT_RACCESS_N_RULES holds the number of guessing rules; the</span>
<span class="line-modified">103    *   guessed result for the Nth rule is represented as a triplet: a new</span>
<span class="line-modified">104    *   file name (new_names[N]), a file offset (offsets[N]), and an error</span>
<span class="line-modified">105    *   code (errors[N]).</span>
<span class="line-modified">106    *</span>
<span class="line-modified">107    * @input:</span>
<span class="line-modified">108    *   library ::</span>
<span class="line-modified">109    *     A FreeType library instance.</span>
<span class="line-modified">110    *</span>
<span class="line-modified">111    *   stream ::</span>
<span class="line-modified">112    *     A file stream containing the resource fork.</span>
<span class="line-modified">113    *</span>
<span class="line-modified">114    *   base_name ::</span>
<span class="line-modified">115    *     The (base) file name of the resource fork used for some guessing</span>
<span class="line-modified">116    *     rules.</span>
<span class="line-modified">117    *</span>
<span class="line-modified">118    * @output:</span>
<span class="line-modified">119    *   new_names ::</span>
<span class="line-modified">120    *     An array of guessed file names in which the resource forks may</span>
<span class="line-modified">121    *     exist.  If &#39;new_names[N]&#39; is `NULL`, the guessed file name is equal</span>
<span class="line-modified">122    *     to `base_name`.</span>
<span class="line-modified">123    *</span>
<span class="line-modified">124    *   offsets ::</span>
<span class="line-modified">125    *     An array of guessed file offsets.  &#39;offsets[N]&#39; holds the file</span>
<span class="line-modified">126    *     offset of the possible start of the resource fork in file</span>
<span class="line-modified">127    *     &#39;new_names[N]&#39;.</span>
<span class="line-modified">128    *</span>
<span class="line-modified">129    *   errors ::</span>
<span class="line-modified">130    *     An array of FreeType error codes.  &#39;errors[N]&#39; is the error code of</span>
<span class="line-modified">131    *     Nth guessing rule function.  If &#39;errors[N]&#39; is not FT_Err_Ok,</span>
<span class="line-modified">132    *     &#39;new_names[N]&#39; and &#39;offsets[N]&#39; are meaningless.</span>
<span class="line-modified">133    */</span>
134   FT_BASE( void )
135   FT_Raccess_Guess( FT_Library  library,
136                     FT_Stream   stream,
137                     char*       base_name,
138                     char**      new_names,
139                     FT_Long*    offsets,
140                     FT_Error*   errors );
141 
142 
<span class="line-modified">143   /**************************************************************************</span>
<span class="line-modified">144    *</span>
<span class="line-modified">145    * @function:</span>
<span class="line-modified">146    *   FT_Raccess_Get_HeaderInfo</span>
<span class="line-modified">147    *</span>
<span class="line-modified">148    * @description:</span>
<span class="line-modified">149    *   Get the information from the header of resource fork.  The information</span>
<span class="line-modified">150    *   includes the file offset where the resource map starts, and the file</span>
<span class="line-modified">151    *   offset where the resource data starts.  `FT_Raccess_Get_DataOffsets`</span>
<span class="line-modified">152    *   requires these two data.</span>
<span class="line-modified">153    *</span>
<span class="line-modified">154    * @input:</span>
<span class="line-modified">155    *   library ::</span>
<span class="line-modified">156    *     A FreeType library instance.</span>
<span class="line-modified">157    *</span>
<span class="line-modified">158    *   stream ::</span>
<span class="line-modified">159    *     A file stream containing the resource fork.</span>
<span class="line-modified">160    *</span>
<span class="line-modified">161    *   rfork_offset ::</span>
<span class="line-modified">162    *     The file offset where the resource fork starts.</span>
<span class="line-modified">163    *</span>
<span class="line-modified">164    * @output:</span>
<span class="line-modified">165    *   map_offset ::</span>
<span class="line-modified">166    *     The file offset where the resource map starts.</span>
<span class="line-modified">167    *</span>
<span class="line-modified">168    *   rdata_pos ::</span>
<span class="line-modified">169    *     The file offset where the resource data starts.</span>
<span class="line-modified">170    *</span>
<span class="line-modified">171    * @return:</span>
<span class="line-modified">172    *   FreeType error code.  FT_Err_Ok means success.</span>
<span class="line-modified">173    */</span>
174   FT_BASE( FT_Error )
175   FT_Raccess_Get_HeaderInfo( FT_Library  library,
176                              FT_Stream   stream,
177                              FT_Long     rfork_offset,
178                              FT_Long    *map_offset,
179                              FT_Long    *rdata_pos );
180 
181 
<span class="line-modified">182   /**************************************************************************</span>
<span class="line-modified">183    *</span>
<span class="line-modified">184    * @function:</span>
<span class="line-modified">185    *   FT_Raccess_Get_DataOffsets</span>
<span class="line-modified">186    *</span>
<span class="line-modified">187    * @description:</span>
<span class="line-modified">188    *   Get the data offsets for a tag in a resource fork.  Offsets are stored</span>
<span class="line-modified">189    *   in an array because, in some cases, resources in a resource fork have</span>
<span class="line-modified">190    *   the same tag.</span>
<span class="line-modified">191    *</span>
<span class="line-modified">192    * @input:</span>
<span class="line-modified">193    *   library ::</span>
<span class="line-modified">194    *     A FreeType library instance.</span>
<span class="line-modified">195    *</span>
<span class="line-modified">196    *   stream ::</span>
<span class="line-modified">197    *     A file stream containing the resource fork.</span>
<span class="line-modified">198    *</span>
<span class="line-modified">199    *   map_offset ::</span>
<span class="line-modified">200    *     The file offset where the resource map starts.</span>
<span class="line-modified">201    *</span>
<span class="line-modified">202    *   rdata_pos ::</span>
<span class="line-modified">203    *     The file offset where the resource data starts.</span>
<span class="line-modified">204    *</span>
<span class="line-modified">205    *   tag ::</span>
<span class="line-modified">206    *     The resource tag.</span>
<span class="line-modified">207    *</span>
<span class="line-modified">208    *   sort_by_res_id ::</span>
<span class="line-modified">209    *     A Boolean to sort the fragmented resource by their ids.  The</span>
<span class="line-modified">210    *     fragmented resources for &#39;POST&#39; resource should be sorted to restore</span>
<span class="line-modified">211    *     Type1 font properly.  For &#39;sfnt&#39; resources, sorting may induce a</span>
<span class="line-modified">212    *     different order of the faces in comparison to that by QuickDraw API.</span>
<span class="line-modified">213    *</span>
<span class="line-modified">214    * @output:</span>
<span class="line-modified">215    *   offsets ::</span>
<span class="line-modified">216    *     The stream offsets for the resource data specified by &#39;tag&#39;.  This</span>
<span class="line-modified">217    *     array is allocated by the function, so you have to call @ft_mem_free</span>
<span class="line-modified">218    *     after use.</span>
<span class="line-modified">219    *</span>
<span class="line-modified">220    *   count ::</span>
<span class="line-modified">221    *     The length of offsets array.</span>
<span class="line-modified">222    *</span>
<span class="line-modified">223    * @return:</span>
<span class="line-modified">224    *   FreeType error code.  FT_Err_Ok means success.</span>
<span class="line-modified">225    *</span>
<span class="line-modified">226    * @note:</span>
<span class="line-modified">227    *   Normally you should use `FT_Raccess_Get_HeaderInfo` to get the value</span>
<span class="line-modified">228    *   for `map_offset` and `rdata_pos`.</span>
<span class="line-modified">229    */</span>

230   FT_BASE( FT_Error )
231   FT_Raccess_Get_DataOffsets( FT_Library  library,
232                               FT_Stream   stream,
233                               FT_Long     map_offset,
234                               FT_Long     rdata_pos,
235                               FT_Long     tag,
236                               FT_Bool     sort_by_res_id,
237                               FT_Long   **offsets,
238                               FT_Long    *count );
239 
240 
241 FT_END_HEADER
242 
243 #endif /* FTRFORK_H_ */
244 
245 
246 /* END */
</pre>
</td>
</tr>
</table>
<center><a href="ftpsprop.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ftserv.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>