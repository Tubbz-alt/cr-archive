<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/src/base/ftdebug.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftdbgmem.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftfntfmt.c.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/base/ftdebug.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,46 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  ftdebug.c                                                              */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    Debugging and logging component (body).                              */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* This component contains various macros and functions used to ease the */</span>
<span class="line-modified">!   /* debugging of the FreeType engine.  Its main purpose is in assertion   */</span>
<span class="line-modified">!   /* checking, tracing, and error detection.                               */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* There are now three debugging modes:                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* - trace mode                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   Error and trace messages are sent to the log file (which can be the */</span>
<span class="line-modified">!   /*   standard error output).                                             */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* - error mode                                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   Only error messages are generated.                                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* - release mode:                                                       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*   No error message is sent or generated.  The code is free from any   */</span>
<span class="line-modified">!   /*   debugging parts.                                                    */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_FREETYPE_H
  #include FT_INTERNAL_DEBUG_H
<span class="line-new-header">--- 1,46 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * ftdebug.c</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   Debugging and logging component (body).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * This component contains various macros and functions used to ease the</span>
<span class="line-modified">!    * debugging of the FreeType engine.  Its main purpose is in assertion</span>
<span class="line-modified">!    * checking, tracing, and error detection.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * There are now three debugging modes:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * - trace mode</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Error and trace messages are sent to the log file (which can be the</span>
<span class="line-modified">!    *   standard error output).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * - error mode</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   Only error messages are generated.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * - release mode:</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   No error message is sent or generated.  The code is free from any</span>
<span class="line-modified">!    *   debugging parts.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_FREETYPE_H
  #include FT_INTERNAL_DEBUG_H
</pre>
<hr />
<pre>
<span class="line-old-header">*** 85,26 ***</span>
    FT_BASE_DEF( int )
    FT_Throw( FT_Error     error,
              int          line,
              const char*  file )
    {
      FT_UNUSED( error );
      FT_UNUSED( line );
      FT_UNUSED( file );
  
      return 0;
    }
  
  #endif /* FT_DEBUG_LEVEL_ERROR */
  
  
  
  #ifdef FT_DEBUG_LEVEL_TRACE
  
<span class="line-modified">!   /* array of trace levels, initialized to 0 */</span>
<span class="line-modified">!   int  ft_trace_levels[trace_count];</span>
  
  
    /* define array of trace toggle names */
  #define FT_TRACE_DEF( x )  #x ,
  
    static const char*  ft_trace_toggles[trace_count + 1] =
<span class="line-new-header">--- 85,43 ---</span>
    FT_BASE_DEF( int )
    FT_Throw( FT_Error     error,
              int          line,
              const char*  file )
    {
<span class="line-added">+ #if 0</span>
<span class="line-added">+     /* activating the code in this block makes FreeType very chatty */</span>
<span class="line-added">+     fprintf( stderr,</span>
<span class="line-added">+              &quot;%s:%d: error 0x%02x: %s\n&quot;,</span>
<span class="line-added">+              file,</span>
<span class="line-added">+              line,</span>
<span class="line-added">+              error,</span>
<span class="line-added">+              FT_Error_String( error ) );</span>
<span class="line-added">+ #else</span>
      FT_UNUSED( error );
      FT_UNUSED( line );
      FT_UNUSED( file );
<span class="line-added">+ #endif</span>
  
      return 0;
    }
  
  #endif /* FT_DEBUG_LEVEL_ERROR */
  
  
  
  #ifdef FT_DEBUG_LEVEL_TRACE
  
<span class="line-modified">!   /* array of trace levels, initialized to 0; */</span>
<span class="line-modified">!   /* this gets adjusted at run-time           */</span>
<span class="line-added">+   static int  ft_trace_levels_enabled[trace_count];</span>
  
<span class="line-added">+   /* array of trace levels, always initialized to 0 */</span>
<span class="line-added">+   static int  ft_trace_levels_disabled[trace_count];</span>
<span class="line-added">+ </span>
<span class="line-added">+   /* a pointer to either `ft_trace_levels_enabled&#39; */</span>
<span class="line-added">+   /* or `ft_trace_levels_disabled&#39;                 */</span>
<span class="line-added">+   int*  ft_trace_levels;</span>
  
    /* define array of trace toggle names */
  #define FT_TRACE_DEF( x )  #x ,
  
    static const char*  ft_trace_toggles[trace_count + 1] =
</pre>
<hr />
<pre>
<span class="line-old-header">*** 138,28 ***</span>
      else
        return NULL;
    }
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* Initialize the tracing sub-system.  This is done by retrieving the    */</span>
<span class="line-modified">!   /* value of the `FT2_DEBUG&#39; environment variable.  It must be a list of  */</span>
<span class="line-modified">!   /* toggles, separated by spaces, `;&#39;, or `,&#39;.  Example:                  */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    export FT2_DEBUG=&quot;any:3 memory:7 stream:5&quot;                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* This requests that all levels be set to 3, except the trace level for */</span>
<span class="line-modified">!   /* the memory and stream components which are set to 7 and 5,            */</span>
<span class="line-modified">!   /* respectively.                                                         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* See the file `include/freetype/internal/fttrace.h&#39; for details of     */</span>
<span class="line-modified">!   /* the available toggle names.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* The level must be between 0 and 7; 0 means quiet (except for serious  */</span>
<span class="line-modified">!   /* runtime errors), and 7 means _very_ verbose.                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
    FT_BASE_DEF( void )
    ft_debug_init( void )
    {
      const char*  ft2_debug = ft_getenv( &quot;FT2_DEBUG&quot; );
  
<span class="line-new-header">--- 155,46 ---</span>
      else
        return NULL;
    }
  
  
<span class="line-modified">!   /* documentation is in ftdebug.h */</span>
<span class="line-modified">! </span>
<span class="line-modified">!   FT_BASE_DEF( void )</span>
<span class="line-modified">!   FT_Trace_Disable( void )</span>
<span class="line-modified">!   {</span>
<span class="line-modified">!     ft_trace_levels = ft_trace_levels_disabled;</span>
<span class="line-modified">!   }</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-modified">!   /* documentation is in ftdebug.h */</span>
<span class="line-modified">! </span>
<span class="line-modified">!   FT_BASE_DEF( void )</span>
<span class="line-modified">!   FT_Trace_Enable( void )</span>
<span class="line-modified">!   {</span>
<span class="line-modified">!     ft_trace_levels = ft_trace_levels_enabled;</span>
<span class="line-modified">!   }</span>
<span class="line-modified">! </span>
<span class="line-modified">! </span>
<span class="line-added">+   /**************************************************************************</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * Initialize the tracing sub-system.  This is done by retrieving the</span>
<span class="line-added">+    * value of the `FT2_DEBUG&#39; environment variable.  It must be a list of</span>
<span class="line-added">+    * toggles, separated by spaces, `;&#39;, or `,&#39;.  Example:</span>
<span class="line-added">+    *</span>
<span class="line-added">+    *   export FT2_DEBUG=&quot;any:3 memory:7 stream:5&quot;</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * This requests that all levels be set to 3, except the trace level for</span>
<span class="line-added">+    * the memory and stream components which are set to 7 and 5,</span>
<span class="line-added">+    * respectively.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * See the file `include/freetype/internal/fttrace.h&#39; for details of</span>
<span class="line-added">+    * the available toggle names.</span>
<span class="line-added">+    *</span>
<span class="line-added">+    * The level must be between 0 and 7; 0 means quiet (except for serious</span>
<span class="line-added">+    * runtime errors), and 7 means _very_ verbose.</span>
<span class="line-added">+    */</span>
    FT_BASE_DEF( void )
    ft_debug_init( void )
    {
      const char*  ft2_debug = ft_getenv( &quot;FT2_DEBUG&quot; );
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 221,18 ***</span>
            {
              if ( found == trace_any )
              {
                /* special case for `any&#39; */
                for ( n = 0; n &lt; trace_count; n++ )
<span class="line-modified">!                 ft_trace_levels[n] = level;</span>
              }
              else
<span class="line-modified">!               ft_trace_levels[found] = level;</span>
            }
          }
        }
      }
    }
  
  
  #else  /* !FT_DEBUG_LEVEL_TRACE */
  
<span class="line-new-header">--- 256,20 ---</span>
            {
              if ( found == trace_any )
              {
                /* special case for `any&#39; */
                for ( n = 0; n &lt; trace_count; n++ )
<span class="line-modified">!                 ft_trace_levels_enabled[n] = level;</span>
              }
              else
<span class="line-modified">!               ft_trace_levels_enabled[found] = level;</span>
            }
          }
        }
      }
<span class="line-added">+ </span>
<span class="line-added">+     ft_trace_levels = ft_trace_levels_enabled;</span>
    }
  
  
  #else  /* !FT_DEBUG_LEVEL_TRACE */
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 258,9 ***</span>
<span class="line-new-header">--- 295,25 ---</span>
  
      return NULL;
    }
  
  
<span class="line-added">+   FT_BASE_DEF( void )</span>
<span class="line-added">+   FT_Trace_Disable( void )</span>
<span class="line-added">+   {</span>
<span class="line-added">+     /* nothing */</span>
<span class="line-added">+   }</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
<span class="line-added">+   /* documentation is in ftdebug.h */</span>
<span class="line-added">+ </span>
<span class="line-added">+   FT_BASE_DEF( void )</span>
<span class="line-added">+   FT_Trace_Enable( void )</span>
<span class="line-added">+   {</span>
<span class="line-added">+     /* nothing */</span>
<span class="line-added">+   }</span>
<span class="line-added">+ </span>
<span class="line-added">+ </span>
  #endif /* !FT_DEBUG_LEVEL_TRACE */
  
  
  /* END */
</pre>
<center><a href="ftdbgmem.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftfntfmt.c.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>