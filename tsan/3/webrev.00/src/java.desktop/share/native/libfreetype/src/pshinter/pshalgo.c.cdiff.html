<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/src/pshinter/pshalgo.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../psaux/t1decode.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="pshalgo.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/pshinter/pshalgo.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,21 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  pshalgo.c                                                              */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    PostScript hinting algorithm (body).                                 */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 2001-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used        */</span>
<span class="line-modified">! /*  modified and distributed under the terms of the FreeType project       */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_OBJECTS_H
  #include FT_INTERNAL_DEBUG_H
<span class="line-new-header">--- 1,21 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * pshalgo.c</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   PostScript hinting algorithm (body).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 2001-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used</span>
<span class="line-modified">!  * modified and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_OBJECTS_H
  #include FT_INTERNAL_DEBUG_H
</pre>
<hr />
<pre>
<span class="line-old-header">*** 24,11 ***</span>
  
  #include &quot;pshnterr.h&quot;
  
  
  #undef  FT_COMPONENT
<span class="line-modified">! #define FT_COMPONENT  trace_pshalgo</span>
  
  
  #ifdef DEBUG_HINTER
    PSH_Hint_Table  ps_debug_hint_table = NULL;
    PSH_HintFunc    ps_debug_hint_func  = NULL;
<span class="line-new-header">--- 24,11 ---</span>
  
  #include &quot;pshnterr.h&quot;
  
  
  #undef  FT_COMPONENT
<span class="line-modified">! #define FT_COMPONENT  pshalgo</span>
  
  
  #ifdef DEBUG_HINTER
    PSH_Hint_Table  ps_debug_hint_table = NULL;
    PSH_HintFunc    ps_debug_hint_func  = NULL;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 51,12 ***</span>
    /* return true if two stem hints overlap */
    static FT_Int
    psh_hint_overlap( PSH_Hint  hint1,
                      PSH_Hint  hint2 )
    {
<span class="line-modified">!     return hint1-&gt;org_pos + hint1-&gt;org_len &gt;= hint2-&gt;org_pos &amp;&amp;</span>
<span class="line-modified">!            hint2-&gt;org_pos + hint2-&gt;org_len &gt;= hint1-&gt;org_pos;</span>
    }
  
  
    /* destroy hints table */
    static void
<span class="line-new-header">--- 51,12 ---</span>
    /* return true if two stem hints overlap */
    static FT_Int
    psh_hint_overlap( PSH_Hint  hint1,
                      PSH_Hint  hint2 )
    {
<span class="line-modified">!     return ADD_INT( hint1-&gt;org_pos, hint1-&gt;org_len ) &gt;= hint2-&gt;org_pos &amp;&amp;</span>
<span class="line-modified">!            ADD_INT( hint2-&gt;org_pos, hint2-&gt;org_len ) &gt;= hint1-&gt;org_pos;</span>
    }
  
  
    /* destroy hints table */
    static void
</pre>
<hr />
<pre>
<span class="line-old-header">*** 477,11 ***</span>
        align.align     = PSH_BLUE_ALIGN_NONE;
        align.align_bot = align.align_top = 0;
  
        if ( dimension == 1 )
          psh_blues_snap_stem( &amp;globals-&gt;blues,
<span class="line-modified">!                              hint-&gt;org_pos + hint-&gt;org_len,</span>
                               hint-&gt;org_pos,
                               &amp;align );
  
        switch ( align.align )
        {
<span class="line-new-header">--- 477,11 ---</span>
        align.align     = PSH_BLUE_ALIGN_NONE;
        align.align_bot = align.align_top = 0;
  
        if ( dimension == 1 )
          psh_blues_snap_stem( &amp;globals-&gt;blues,
<span class="line-modified">!                              ADD_INT( hint-&gt;org_pos, hint-&gt;org_len ),</span>
                               hint-&gt;org_pos,
                               &amp;align );
  
        switch ( align.align )
        {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 656,12 ***</span>
  
  
  #if 0  /* not used for now, experimental */
  
   /*
<span class="line-modified">!   *  A variant to perform &quot;light&quot; hinting (i.e. FT_RENDER_MODE_LIGHT)</span>
<span class="line-modified">!   *  of stems</span>
    */
    static void
    psh_hint_align_light( PSH_Hint     hint,
                          PSH_Globals  globals,
                          FT_Int       dimension,
<span class="line-new-header">--- 656,12 ---</span>
  
  
  #if 0  /* not used for now, experimental */
  
   /*
<span class="line-modified">!   * A variant to perform &quot;light&quot; hinting (i.e. FT_RENDER_MODE_LIGHT)</span>
<span class="line-modified">!   * of stems</span>
    */
    static void
    psh_hint_align_light( PSH_Hint     hint,
                          PSH_Globals  globals,
                          FT_Int       dimension,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 701,11 ***</span>
        align.align = PSH_BLUE_ALIGN_NONE;
        align.align_bot = align.align_top = 0;
  
        if ( dimension == 1 )
          psh_blues_snap_stem( &amp;globals-&gt;blues,
<span class="line-modified">!                              hint-&gt;org_pos + hint-&gt;org_len,</span>
                               hint-&gt;org_pos,
                               &amp;align );
  
        switch ( align.align )
        {
<span class="line-new-header">--- 701,11 ---</span>
        align.align = PSH_BLUE_ALIGN_NONE;
        align.align_bot = align.align_top = 0;
  
        if ( dimension == 1 )
          psh_blues_snap_stem( &amp;globals-&gt;blues,
<span class="line-modified">!                              ADD_INT( hint-&gt;org_pos, hint-&gt;org_len ),</span>
                               hint-&gt;org_pos,
                               &amp;align );
  
        switch ( align.align )
        {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1536,12 ***</span>
            for ( nn = 0; nn &lt; num_hints; nn++ )
            {
              PSH_Hint  hint = sort[nn];
  
  
<span class="line-modified">!             if ( org_u &gt;= hint-&gt;org_pos                 &amp;&amp;</span>
<span class="line-modified">!                 org_u &lt;= hint-&gt;org_pos + hint-&gt;org_len )</span>
              {
                point-&gt;hint = hint;
                break;
              }
            }
<span class="line-new-header">--- 1536,12 ---</span>
            for ( nn = 0; nn &lt; num_hints; nn++ )
            {
              PSH_Hint  hint = sort[nn];
  
  
<span class="line-modified">!             if ( org_u &gt;=          hint-&gt;org_pos                  &amp;&amp;</span>
<span class="line-modified">!                  org_u &lt;= ADD_INT( hint-&gt;org_pos, hint-&gt;org_len ) )</span>
              {
                point-&gt;hint = hint;
                break;
              }
            }
</pre>
<center><a href="../psaux/t1decode.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="pshalgo.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>