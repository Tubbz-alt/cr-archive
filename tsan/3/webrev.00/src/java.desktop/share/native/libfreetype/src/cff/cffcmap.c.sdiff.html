<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/src/cff/cffcmap.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../base/ftutil.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="cffcmap.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/cff/cffcmap.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 /***************************************************************************/</span>
<span class="line-modified">  2 /*                                                                         */</span>
<span class="line-modified">  3 /*  cffcmap.c                                                              */</span>
<span class="line-modified">  4 /*                                                                         */</span>
<span class="line-modified">  5 /*    CFF character mapping table (cmap) support (body).                   */</span>
<span class="line-modified">  6 /*                                                                         */</span>
<span class="line-modified">  7 /*  Copyright 2002-2018 by                                                 */</span>
<span class="line-modified">  8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">  9 /*                                                                         */</span>
<span class="line-modified"> 10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified"> 11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified"> 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified"> 13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified"> 14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified"> 15 /*                                                                         */</span>
<span class="line-modified"> 16 /***************************************************************************/</span>
 17 
 18 
 19 #include &lt;ft2build.h&gt;
 20 #include FT_INTERNAL_DEBUG_H
 21 #include &quot;cffcmap.h&quot;
 22 #include &quot;cffload.h&quot;
 23 
 24 #include &quot;cfferrs.h&quot;
 25 
 26 
 27   /*************************************************************************/
 28   /*************************************************************************/
 29   /*****                                                               *****/
 30   /*****           CFF STANDARD (AND EXPERT) ENCODING CMAPS            *****/
 31   /*****                                                               *****/
 32   /*************************************************************************/
 33   /*************************************************************************/
 34 
 35   FT_CALLBACK_DEF( FT_Error )
 36   cff_cmap_encoding_init( CFF_CMapStd  cmap,
</pre>
<hr />
<pre>
144 
145 
146   FT_CALLBACK_DEF( FT_Error )
147   cff_cmap_unicode_init( PS_Unicodes  unicodes,
148                          FT_Pointer   pointer )
149   {
150     TT_Face             face    = (TT_Face)FT_CMAP_FACE( unicodes );
151     FT_Memory           memory  = FT_FACE_MEMORY( face );
152     CFF_Font            cff     = (CFF_Font)face-&gt;extra.data;
153     CFF_Charset         charset = &amp;cff-&gt;charset;
154     FT_Service_PsCMaps  psnames = (FT_Service_PsCMaps)cff-&gt;psnames;
155 
156     FT_UNUSED( pointer );
157 
158 
159     /* can&#39;t build Unicode map for CID-keyed font */
160     /* because we don&#39;t know glyph names.         */
161     if ( !charset-&gt;sids )
162       return FT_THROW( No_Unicode_Glyph_Name );
163 



164     return psnames-&gt;unicodes_init( memory,
165                                    unicodes,
166                                    cff-&gt;num_glyphs,
167                                    (PS_GetGlyphNameFunc)&amp;cff_sid_to_glyph_name,
168                                    (PS_FreeGlyphNameFunc)NULL,
169                                    (FT_Pointer)face );
170   }
171 
172 
173   FT_CALLBACK_DEF( void )
174   cff_cmap_unicode_done( PS_Unicodes  unicodes )
175   {
176     FT_Face    face   = FT_CMAP_FACE( unicodes );
177     FT_Memory  memory = FT_FACE_MEMORY( face );
178 
179 
180     FT_FREE( unicodes-&gt;maps );
181     unicodes-&gt;num_maps = 0;
182   }
183 
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * cffcmap.c</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   CFF character mapping table (cmap) support (body).</span>
<span class="line-modified">  6  *</span>
<span class="line-modified">  7  * Copyright (C) 2002-2019 by</span>
<span class="line-modified">  8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">  9  *</span>
<span class="line-modified"> 10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 13  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 14  * understand and accept it fully.</span>
<span class="line-modified"> 15  *</span>
<span class="line-modified"> 16  */</span>
 17 
 18 
 19 #include &lt;ft2build.h&gt;
 20 #include FT_INTERNAL_DEBUG_H
 21 #include &quot;cffcmap.h&quot;
 22 #include &quot;cffload.h&quot;
 23 
 24 #include &quot;cfferrs.h&quot;
 25 
 26 
 27   /*************************************************************************/
 28   /*************************************************************************/
 29   /*****                                                               *****/
 30   /*****           CFF STANDARD (AND EXPERT) ENCODING CMAPS            *****/
 31   /*****                                                               *****/
 32   /*************************************************************************/
 33   /*************************************************************************/
 34 
 35   FT_CALLBACK_DEF( FT_Error )
 36   cff_cmap_encoding_init( CFF_CMapStd  cmap,
</pre>
<hr />
<pre>
144 
145 
146   FT_CALLBACK_DEF( FT_Error )
147   cff_cmap_unicode_init( PS_Unicodes  unicodes,
148                          FT_Pointer   pointer )
149   {
150     TT_Face             face    = (TT_Face)FT_CMAP_FACE( unicodes );
151     FT_Memory           memory  = FT_FACE_MEMORY( face );
152     CFF_Font            cff     = (CFF_Font)face-&gt;extra.data;
153     CFF_Charset         charset = &amp;cff-&gt;charset;
154     FT_Service_PsCMaps  psnames = (FT_Service_PsCMaps)cff-&gt;psnames;
155 
156     FT_UNUSED( pointer );
157 
158 
159     /* can&#39;t build Unicode map for CID-keyed font */
160     /* because we don&#39;t know glyph names.         */
161     if ( !charset-&gt;sids )
162       return FT_THROW( No_Unicode_Glyph_Name );
163 
<span class="line-added">164     if ( !psnames-&gt;unicodes_init )</span>
<span class="line-added">165       return FT_THROW( Unimplemented_Feature );</span>
<span class="line-added">166 </span>
167     return psnames-&gt;unicodes_init( memory,
168                                    unicodes,
169                                    cff-&gt;num_glyphs,
170                                    (PS_GetGlyphNameFunc)&amp;cff_sid_to_glyph_name,
171                                    (PS_FreeGlyphNameFunc)NULL,
172                                    (FT_Pointer)face );
173   }
174 
175 
176   FT_CALLBACK_DEF( void )
177   cff_cmap_unicode_done( PS_Unicodes  unicodes )
178   {
179     FT_Face    face   = FT_CMAP_FACE( unicodes );
180     FT_Memory  memory = FT_FACE_MEMORY( face );
181 
182 
183     FT_FREE( unicodes-&gt;maps );
184     unicodes-&gt;num_maps = 0;
185   }
186 
</pre>
</td>
</tr>
</table>
<center><a href="../base/ftutil.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="cffcmap.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>