<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/java.desktop/share/native/libfreetype/UPDATING.txt</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 Tips and tasks when updating freetype sources to a newer version.
 2 -----------------------------------------------------------------
 3 
 4 The freetype sources here are just the subset needed by JDK. This is deliberate.
 5 When updating be sure to import only the same files.
 6 If a file is no longer present in freetype, or renamed this will be noticed
 7 during the copy.
 8 Occasionally there may be a new missing dependency if freetype introduces
 9 a new file or imports a file into these files that was not previously used.
10 Import just what is needed.
11 
12 Before attempting compilation be sure to diff the JDK copy and the freetype copy
13 of src/java.desktop/share/native/libfreetype/include/freetype/config/ftoption.h
14 and re-apply the same edits made for the JDK option file.
15 Also modules the JDK does not include must be commented out in
16 src/java.desktop/share/native/libfreetype/include/freetype/config/ftmodule.h.
17 Notably JDK is not using GZIP or LZW or BDF support which are on by default
18 for the freetype distribution.
19 If you don&#39;t make the edits the build will fail due to not copying the relevant
20 sources.
21 
22 Use &quot;expand&quot; and &quot;sed&quot; to remove tabs and trailing white space from the imported
23 sources. The current version of freetype is quite clean in this respect.
24 None of files we import have tabs, and ./include/freetype/freetype.h,
25 ./include/freetype/ftlcdfil.h and ./include/freetype/ftstroke.h have the
26 only trailing white space.
27 If you forget this step, or aren&#39;t thorough, jcheck will remind you.
28 
29 Remember to update the freetype version identified in
30 src/java.desktop/share/legal/freetype.md
31 
32 When updating specify --with-freetype=bundled to test builds to
33 expose build issues.
34 This is important because presently on Linux and Solaris the build
35 defaults to linking against the system library and does not attempt
36 to compile the sources.
    </pre>
  </body>
</html>