<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/freetype.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="config/ftstdlib.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftadvanc.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/freetype.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">   1 /***************************************************************************/</span>
<span class="line-modified">   2 /*                                                                         */</span>
<span class="line-modified">   3 /*  freetype.h                                                             */</span>
<span class="line-modified">   4 /*                                                                         */</span>
<span class="line-modified">   5 /*    FreeType high-level API and common types (specification only).       */</span>
<span class="line-modified">   6 /*                                                                         */</span>
<span class="line-modified">   7 /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">   8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">   9 /*                                                                         */</span>
<span class="line-modified">  10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">  11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">  12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">  13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">  14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified">  15 /*                                                                         */</span>
<span class="line-modified">  16 /***************************************************************************/</span>
  17 
  18 
  19 #ifndef FREETYPE_H_
  20 #define FREETYPE_H_
  21 
  22 
  23 #ifndef FT_FREETYPE_H
  24 #error &quot;`ft2build.h&#39; hasn&#39;t been included yet!&quot;
  25 #error &quot;Please always use macros to include FreeType header files.&quot;
  26 #error &quot;Example:&quot;
  27 #error &quot;  #include &lt;ft2build.h&gt;&quot;
  28 #error &quot;  #include FT_FREETYPE_H&quot;
  29 #endif
  30 
  31 
  32 #include &lt;ft2build.h&gt;
  33 #include FT_CONFIG_CONFIG_H
  34 #include FT_TYPES_H
  35 #include FT_ERRORS_H
  36 
  37 
  38 FT_BEGIN_HEADER
  39 
  40 
  41 
<span class="line-modified">  42   /*************************************************************************/</span>
<span class="line-modified">  43   /*                                                                       */</span>
<span class="line-modified">  44   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">  45   /*    header_inclusion                                                   */</span>
<span class="line-modified">  46   /*                                                                       */</span>
<span class="line-modified">  47   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">  48   /*    FreeType&#39;s header inclusion scheme                                 */</span>
<span class="line-modified">  49   /*                                                                       */</span>
<span class="line-modified">  50   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">  51   /*    How client applications should include FreeType header files.      */</span>
<span class="line-modified">  52   /*                                                                       */</span>
<span class="line-modified">  53   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">  54   /*    To be as flexible as possible (and for historical reasons),        */</span>
<span class="line-modified">  55   /*    FreeType uses a very special inclusion scheme to load header       */</span>
<span class="line-modified">  56   /*    files, for example                                                 */</span>
<span class="line-modified">  57   /*                                                                       */</span>
<span class="line-modified">  58   /*    {                                                                  */</span>
<span class="line-modified">  59   /*      #include &lt;ft2build.h&gt;                                            */</span>
<span class="line-modified">  60   /*                                                                       */</span>
<span class="line-modified">  61   /*      #include FT_FREETYPE_H                                           */</span>
<span class="line-modified">  62   /*      #include FT_OUTLINE_H                                            */</span>
<span class="line-modified">  63   /*    }                                                                  */</span>
<span class="line-modified">  64   /*                                                                       */</span>
<span class="line-modified">  65   /*    A compiler and its preprocessor only needs an include path to find */</span>
<span class="line-modified">  66   /*    the file `ft2build.h&#39;; the exact locations and names of the other  */</span>
<span class="line-modified">  67   /*    FreeType header files are hidden by preprocessor macro names,      */</span>
<span class="line-modified">  68   /*    loaded by `ft2build.h&#39;.  The API documentation always gives the    */</span>
<span class="line-modified">  69   /*    header macro name needed for a particular function.                */</span>
<span class="line-modified">  70   /*                                                                       */</span>
<span class="line-removed">  71   /*************************************************************************/</span>
  72 
  73 
<span class="line-modified">  74   /*************************************************************************/</span>
<span class="line-modified">  75   /*                                                                       */</span>
<span class="line-modified">  76   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">  77   /*    user_allocation                                                    */</span>
<span class="line-modified">  78   /*                                                                       */</span>
<span class="line-modified">  79   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">  80   /*    User allocation                                                    */</span>
<span class="line-modified">  81   /*                                                                       */</span>
<span class="line-modified">  82   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">  83   /*    How client applications should allocate FreeType data structures.  */</span>
<span class="line-modified">  84   /*                                                                       */</span>
<span class="line-modified">  85   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">  86   /*    FreeType assumes that structures allocated by the user and passed  */</span>
<span class="line-modified">  87   /*    as arguments are zeroed out except for the actual data.  In other  */</span>
<span class="line-modified">  88   /*    words, it is recommended to use `calloc&#39; (or variants of it)       */</span>
<span class="line-modified">  89   /*    instead of `malloc&#39; for allocation.                                */</span>
<span class="line-modified">  90   /*                                                                       */</span>
<span class="line-modified">  91   /*************************************************************************/</span>
  92 
  93 
  94 
  95   /*************************************************************************/
  96   /*************************************************************************/
  97   /*                                                                       */
  98   /*                        B A S I C   T Y P E S                          */
  99   /*                                                                       */
 100   /*************************************************************************/
 101   /*************************************************************************/
 102 
 103 
<span class="line-modified"> 104   /*************************************************************************/</span>
<span class="line-modified"> 105   /*                                                                       */</span>
<span class="line-modified"> 106   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 107   /*    base_interface                                                     */</span>
<span class="line-modified"> 108   /*                                                                       */</span>
<span class="line-modified"> 109   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified"> 110   /*    Base Interface                                                     */</span>
<span class="line-modified"> 111   /*                                                                       */</span>
<span class="line-modified"> 112   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified"> 113   /*    The FreeType~2 base font interface.                                */</span>
<span class="line-modified"> 114   /*                                                                       */</span>
<span class="line-modified"> 115   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 116   /*    This section describes the most important public high-level API    */</span>
<span class="line-modified"> 117   /*    functions of FreeType~2.                                           */</span>
<span class="line-modified"> 118   /*                                                                       */</span>
<span class="line-modified"> 119   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified"> 120   /*    FT_Library                                                         */</span>
<span class="line-modified"> 121   /*    FT_Face                                                            */</span>
<span class="line-modified"> 122   /*    FT_Size                                                            */</span>
<span class="line-modified"> 123   /*    FT_GlyphSlot                                                       */</span>
<span class="line-modified"> 124   /*    FT_CharMap                                                         */</span>
<span class="line-modified"> 125   /*    FT_Encoding                                                        */</span>
<span class="line-modified"> 126   /*    FT_ENC_TAG                                                         */</span>
<span class="line-modified"> 127   /*                                                                       */</span>
<span class="line-modified"> 128   /*    FT_FaceRec                                                         */</span>
<span class="line-modified"> 129   /*                                                                       */</span>
<span class="line-modified"> 130   /*    FT_FACE_FLAG_SCALABLE                                              */</span>
<span class="line-modified"> 131   /*    FT_FACE_FLAG_FIXED_SIZES                                           */</span>
<span class="line-modified"> 132   /*    FT_FACE_FLAG_FIXED_WIDTH                                           */</span>
<span class="line-modified"> 133   /*    FT_FACE_FLAG_HORIZONTAL                                            */</span>
<span class="line-modified"> 134   /*    FT_FACE_FLAG_VERTICAL                                              */</span>
<span class="line-modified"> 135   /*    FT_FACE_FLAG_COLOR                                                 */</span>
<span class="line-modified"> 136   /*    FT_FACE_FLAG_SFNT                                                  */</span>
<span class="line-modified"> 137   /*    FT_FACE_FLAG_CID_KEYED                                             */</span>
<span class="line-modified"> 138   /*    FT_FACE_FLAG_TRICKY                                                */</span>
<span class="line-modified"> 139   /*    FT_FACE_FLAG_KERNING                                               */</span>
<span class="line-modified"> 140   /*    FT_FACE_FLAG_MULTIPLE_MASTERS                                      */</span>
<span class="line-modified"> 141   /*    FT_FACE_FLAG_VARIATION                                             */</span>
<span class="line-modified"> 142   /*    FT_FACE_FLAG_GLYPH_NAMES                                           */</span>
<span class="line-modified"> 143   /*    FT_FACE_FLAG_EXTERNAL_STREAM                                       */</span>
<span class="line-modified"> 144   /*    FT_FACE_FLAG_HINTER                                                */</span>
<span class="line-modified"> 145   /*                                                                       */</span>
<span class="line-modified"> 146   /*    FT_HAS_HORIZONTAL                                                  */</span>
<span class="line-modified"> 147   /*    FT_HAS_VERTICAL                                                    */</span>
<span class="line-modified"> 148   /*    FT_HAS_KERNING                                                     */</span>
<span class="line-modified"> 149   /*    FT_HAS_FIXED_SIZES                                                 */</span>
<span class="line-modified"> 150   /*    FT_HAS_GLYPH_NAMES                                                 */</span>
<span class="line-modified"> 151   /*    FT_HAS_COLOR                                                       */</span>
<span class="line-modified"> 152   /*    FT_HAS_MULTIPLE_MASTERS                                            */</span>
<span class="line-modified"> 153   /*                                                                       */</span>
<span class="line-modified"> 154   /*    FT_IS_SFNT                                                         */</span>
<span class="line-modified"> 155   /*    FT_IS_SCALABLE                                                     */</span>
<span class="line-modified"> 156   /*    FT_IS_FIXED_WIDTH                                                  */</span>
<span class="line-modified"> 157   /*    FT_IS_CID_KEYED                                                    */</span>
<span class="line-modified"> 158   /*    FT_IS_TRICKY                                                       */</span>
<span class="line-modified"> 159   /*    FT_IS_NAMED_INSTANCE                                               */</span>
<span class="line-modified"> 160   /*    FT_IS_VARIATION                                                    */</span>
<span class="line-modified"> 161   /*                                                                       */</span>
<span class="line-modified"> 162   /*    FT_STYLE_FLAG_BOLD                                                 */</span>
<span class="line-modified"> 163   /*    FT_STYLE_FLAG_ITALIC                                               */</span>
<span class="line-modified"> 164   /*                                                                       */</span>
<span class="line-modified"> 165   /*    FT_SizeRec                                                         */</span>
<span class="line-modified"> 166   /*    FT_Size_Metrics                                                    */</span>
<span class="line-modified"> 167   /*                                                                       */</span>
<span class="line-modified"> 168   /*    FT_GlyphSlotRec                                                    */</span>
<span class="line-modified"> 169   /*    FT_Glyph_Metrics                                                   */</span>
<span class="line-modified"> 170   /*    FT_SubGlyph                                                        */</span>
<span class="line-modified"> 171   /*                                                                       */</span>
<span class="line-modified"> 172   /*    FT_Bitmap_Size                                                     */</span>
<span class="line-modified"> 173   /*                                                                       */</span>
<span class="line-modified"> 174   /*    FT_Init_FreeType                                                   */</span>
<span class="line-modified"> 175   /*    FT_Done_FreeType                                                   */</span>
<span class="line-modified"> 176   /*                                                                       */</span>
<span class="line-modified"> 177   /*    FT_New_Face                                                        */</span>
<span class="line-modified"> 178   /*    FT_Done_Face                                                       */</span>
<span class="line-modified"> 179   /*    FT_Reference_Face                                                  */</span>
<span class="line-modified"> 180   /*    FT_New_Memory_Face                                                 */</span>
<span class="line-modified"> 181   /*    FT_Face_Properties                                                 */</span>
<span class="line-modified"> 182   /*    FT_Open_Face                                                       */</span>
<span class="line-modified"> 183   /*    FT_Open_Args                                                       */</span>
<span class="line-modified"> 184   /*    FT_Parameter                                                       */</span>
<span class="line-modified"> 185   /*    FT_Attach_File                                                     */</span>
<span class="line-modified"> 186   /*    FT_Attach_Stream                                                   */</span>
<span class="line-modified"> 187   /*                                                                       */</span>
<span class="line-modified"> 188   /*    FT_Set_Char_Size                                                   */</span>
<span class="line-modified"> 189   /*    FT_Set_Pixel_Sizes                                                 */</span>
<span class="line-modified"> 190   /*    FT_Request_Size                                                    */</span>
<span class="line-modified"> 191   /*    FT_Select_Size                                                     */</span>
<span class="line-modified"> 192   /*    FT_Size_Request_Type                                               */</span>
<span class="line-modified"> 193   /*    FT_Size_RequestRec                                                 */</span>
<span class="line-modified"> 194   /*    FT_Size_Request                                                    */</span>
<span class="line-modified"> 195   /*    FT_Set_Transform                                                   */</span>
<span class="line-modified"> 196   /*    FT_Load_Glyph                                                      */</span>
<span class="line-modified"> 197   /*    FT_Get_Char_Index                                                  */</span>
<span class="line-modified"> 198   /*    FT_Get_First_Char                                                  */</span>
<span class="line-modified"> 199   /*    FT_Get_Next_Char                                                   */</span>
<span class="line-modified"> 200   /*    FT_Get_Name_Index                                                  */</span>
<span class="line-modified"> 201   /*    FT_Load_Char                                                       */</span>
<span class="line-modified"> 202   /*                                                                       */</span>
<span class="line-modified"> 203   /*    FT_OPEN_MEMORY                                                     */</span>
<span class="line-modified"> 204   /*    FT_OPEN_STREAM                                                     */</span>
<span class="line-modified"> 205   /*    FT_OPEN_PATHNAME                                                   */</span>
<span class="line-modified"> 206   /*    FT_OPEN_DRIVER                                                     */</span>
<span class="line-modified"> 207   /*    FT_OPEN_PARAMS                                                     */</span>
<span class="line-modified"> 208   /*                                                                       */</span>
<span class="line-modified"> 209   /*    FT_LOAD_DEFAULT                                                    */</span>
<span class="line-modified"> 210   /*    FT_LOAD_RENDER                                                     */</span>
<span class="line-modified"> 211   /*    FT_LOAD_MONOCHROME                                                 */</span>
<span class="line-modified"> 212   /*    FT_LOAD_LINEAR_DESIGN                                              */</span>
<span class="line-modified"> 213   /*    FT_LOAD_NO_SCALE                                                   */</span>
<span class="line-modified"> 214   /*    FT_LOAD_NO_HINTING                                                 */</span>
<span class="line-modified"> 215   /*    FT_LOAD_NO_BITMAP                                                  */</span>
<span class="line-modified"> 216   /*    FT_LOAD_NO_AUTOHINT                                                */</span>
<span class="line-modified"> 217   /*    FT_LOAD_COLOR                                                      */</span>
<span class="line-modified"> 218   /*                                                                       */</span>
<span class="line-modified"> 219   /*    FT_LOAD_VERTICAL_LAYOUT                                            */</span>
<span class="line-modified"> 220   /*    FT_LOAD_IGNORE_TRANSFORM                                           */</span>
<span class="line-modified"> 221   /*    FT_LOAD_FORCE_AUTOHINT                                             */</span>
<span class="line-modified"> 222   /*    FT_LOAD_NO_RECURSE                                                 */</span>
<span class="line-modified"> 223   /*    FT_LOAD_PEDANTIC                                                   */</span>
<span class="line-modified"> 224   /*                                                                       */</span>
<span class="line-modified"> 225   /*    FT_LOAD_TARGET_NORMAL                                              */</span>
<span class="line-modified"> 226   /*    FT_LOAD_TARGET_LIGHT                                               */</span>
<span class="line-modified"> 227   /*    FT_LOAD_TARGET_MONO                                                */</span>
<span class="line-modified"> 228   /*    FT_LOAD_TARGET_LCD                                                 */</span>
<span class="line-modified"> 229   /*    FT_LOAD_TARGET_LCD_V                                               */</span>
<span class="line-modified"> 230   /*                                                                       */</span>
<span class="line-modified"> 231   /*    FT_LOAD_TARGET_MODE                                                */</span>
<span class="line-modified"> 232   /*                                                                       */</span>
<span class="line-modified"> 233   /*    FT_Render_Glyph                                                    */</span>
<span class="line-modified"> 234   /*    FT_Render_Mode                                                     */</span>
<span class="line-modified"> 235   /*    FT_Get_Kerning                                                     */</span>
<span class="line-modified"> 236   /*    FT_Kerning_Mode                                                    */</span>
<span class="line-modified"> 237   /*    FT_Get_Track_Kerning                                               */</span>
<span class="line-modified"> 238   /*    FT_Get_Glyph_Name                                                  */</span>
<span class="line-modified"> 239   /*    FT_Get_Postscript_Name                                             */</span>
<span class="line-modified"> 240   /*                                                                       */</span>
<span class="line-modified"> 241   /*    FT_CharMapRec                                                      */</span>
<span class="line-modified"> 242   /*    FT_Select_Charmap                                                  */</span>
<span class="line-modified"> 243   /*    FT_Set_Charmap                                                     */</span>
<span class="line-modified"> 244   /*    FT_Get_Charmap_Index                                               */</span>
<span class="line-modified"> 245   /*                                                                       */</span>
<span class="line-modified"> 246   /*    FT_Get_FSType_Flags                                                */</span>
<span class="line-modified"> 247   /*    FT_Get_SubGlyph_Info                                               */</span>
<span class="line-modified"> 248   /*                                                                       */</span>
<span class="line-modified"> 249   /*    FT_Face_Internal                                                   */</span>
<span class="line-modified"> 250   /*    FT_Size_Internal                                                   */</span>
<span class="line-modified"> 251   /*    FT_Slot_Internal                                                   */</span>
<span class="line-modified"> 252   /*                                                                       */</span>
<span class="line-modified"> 253   /*    FT_FACE_FLAG_XXX                                                   */</span>
<span class="line-modified"> 254   /*    FT_STYLE_FLAG_XXX                                                  */</span>
<span class="line-modified"> 255   /*    FT_OPEN_XXX                                                        */</span>
<span class="line-modified"> 256   /*    FT_LOAD_XXX                                                        */</span>
<span class="line-modified"> 257   /*    FT_LOAD_TARGET_XXX                                                 */</span>
<span class="line-modified"> 258   /*    FT_SUBGLYPH_FLAG_XXX                                               */</span>
<span class="line-modified"> 259   /*    FT_FSTYPE_XXX                                                      */</span>
<span class="line-modified"> 260   /*                                                                       */</span>
<span class="line-modified"> 261   /*    FT_HAS_FAST_GLYPHS                                                 */</span>
<span class="line-modified"> 262   /*                                                                       */</span>
<span class="line-modified"> 263   /*************************************************************************/</span>
 264 
 265 
<span class="line-modified"> 266   /*************************************************************************/</span>
<span class="line-modified"> 267   /*                                                                       */</span>
<span class="line-modified"> 268   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 269   /*    FT_Glyph_Metrics                                                   */</span>
<span class="line-modified"> 270   /*                                                                       */</span>
<span class="line-modified"> 271   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 272   /*    A structure to model the metrics of a single glyph.  The values    */</span>
<span class="line-modified"> 273   /*    are expressed in 26.6 fractional pixel format; if the flag         */</span>
<span class="line-modified"> 274   /*    @FT_LOAD_NO_SCALE has been used while loading the glyph, values    */</span>
<span class="line-modified"> 275   /*    are expressed in font units instead.                               */</span>
<span class="line-modified"> 276   /*                                                                       */</span>
<span class="line-modified"> 277   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 278   /*    width ::                                                           */</span>
<span class="line-modified"> 279   /*      The glyph&#39;s width.                                               */</span>
<span class="line-modified"> 280   /*                                                                       */</span>
<span class="line-modified"> 281   /*    height ::                                                          */</span>
<span class="line-modified"> 282   /*      The glyph&#39;s height.                                              */</span>
<span class="line-modified"> 283   /*                                                                       */</span>
<span class="line-modified"> 284   /*    horiBearingX ::                                                    */</span>
<span class="line-modified"> 285   /*      Left side bearing for horizontal layout.                         */</span>
<span class="line-modified"> 286   /*                                                                       */</span>
<span class="line-modified"> 287   /*    horiBearingY ::                                                    */</span>
<span class="line-modified"> 288   /*      Top side bearing for horizontal layout.                          */</span>
<span class="line-modified"> 289   /*                                                                       */</span>
<span class="line-modified"> 290   /*    horiAdvance ::                                                     */</span>
<span class="line-modified"> 291   /*      Advance width for horizontal layout.                             */</span>
<span class="line-modified"> 292   /*                                                                       */</span>
<span class="line-modified"> 293   /*    vertBearingX ::                                                    */</span>
<span class="line-modified"> 294   /*      Left side bearing for vertical layout.                           */</span>
<span class="line-modified"> 295   /*                                                                       */</span>
<span class="line-modified"> 296   /*    vertBearingY ::                                                    */</span>
<span class="line-modified"> 297   /*      Top side bearing for vertical layout.  Larger positive values    */</span>
<span class="line-modified"> 298   /*      mean further below the vertical glyph origin.                    */</span>
<span class="line-modified"> 299   /*                                                                       */</span>
<span class="line-modified"> 300   /*    vertAdvance ::                                                     */</span>
<span class="line-modified"> 301   /*      Advance height for vertical layout.  Positive values mean the    */</span>
<span class="line-modified"> 302   /*      glyph has a positive advance downward.                           */</span>
<span class="line-modified"> 303   /*                                                                       */</span>
<span class="line-modified"> 304   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 305   /*    If not disabled with @FT_LOAD_NO_HINTING, the values represent     */</span>
<span class="line-modified"> 306   /*    dimensions of the hinted glyph (in case hinting is applicable).    */</span>
<span class="line-modified"> 307   /*                                                                       */</span>
<span class="line-modified"> 308   /*    Stroking a glyph with an outside border does not increase          */</span>
<span class="line-modified"> 309   /*    `horiAdvance&#39; or `vertAdvance&#39;; you have to manually adjust these  */</span>
<span class="line-modified"> 310   /*    values to account for the added width and height.                  */</span>
<span class="line-modified"> 311   /*                                                                       */</span>
<span class="line-modified"> 312   /*    FreeType doesn&#39;t use the `VORG&#39; table data for CFF fonts because   */</span>
<span class="line-modified"> 313   /*    it doesn&#39;t have an interface to quickly retrieve the glyph height. */</span>
<span class="line-modified"> 314   /*    The y~coordinate of the vertical origin can be simply computed as  */</span>
<span class="line-modified"> 315   /*    `vertBearingY + height&#39; after loading a glyph.                     */</span>
<span class="line-modified"> 316   /*                                                                       */</span>
 317   typedef struct  FT_Glyph_Metrics_
 318   {
 319     FT_Pos  width;
 320     FT_Pos  height;
 321 
 322     FT_Pos  horiBearingX;
 323     FT_Pos  horiBearingY;
 324     FT_Pos  horiAdvance;
 325 
 326     FT_Pos  vertBearingX;
 327     FT_Pos  vertBearingY;
 328     FT_Pos  vertAdvance;
 329 
 330   } FT_Glyph_Metrics;
 331 
 332 
<span class="line-modified"> 333   /*************************************************************************/</span>
<span class="line-modified"> 334   /*                                                                       */</span>
<span class="line-modified"> 335   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 336   /*    FT_Bitmap_Size                                                     */</span>
<span class="line-modified"> 337   /*                                                                       */</span>
<span class="line-modified"> 338   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 339   /*    This structure models the metrics of a bitmap strike (i.e., a set  */</span>
<span class="line-modified"> 340   /*    of glyphs for a given point size and resolution) in a bitmap font. */</span>
<span class="line-modified"> 341   /*    It is used for the `available_sizes&#39; field of @FT_Face.            */</span>
<span class="line-modified"> 342   /*                                                                       */</span>
<span class="line-modified"> 343   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 344   /*    height :: The vertical distance, in pixels, between two            */</span>
<span class="line-modified"> 345   /*              consecutive baselines.  It is always positive.           */</span>
<span class="line-modified"> 346   /*                                                                       */</span>
<span class="line-modified"> 347   /*    width  :: The average width, in pixels, of all glyphs in the       */</span>
<span class="line-modified"> 348   /*              strike.                                                  */</span>
<span class="line-modified"> 349   /*                                                                       */</span>
<span class="line-modified"> 350   /*    size   :: The nominal size of the strike in 26.6 fractional        */</span>
<span class="line-modified"> 351   /*              points.  This field is not very useful.                  */</span>
<span class="line-modified"> 352   /*                                                                       */</span>
<span class="line-modified"> 353   /*    x_ppem :: The horizontal ppem (nominal width) in 26.6 fractional   */</span>
<span class="line-modified"> 354   /*              pixels.                                                  */</span>
<span class="line-modified"> 355   /*                                                                       */</span>
<span class="line-modified"> 356   /*    y_ppem :: The vertical ppem (nominal height) in 26.6 fractional    */</span>
<span class="line-modified"> 357   /*              pixels.                                                  */</span>
<span class="line-modified"> 358   /*                                                                       */</span>
<span class="line-modified"> 359   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 360   /*    Windows FNT:                                                       */</span>
<span class="line-modified"> 361   /*      The nominal size given in a FNT font is not reliable.  If the    */</span>
<span class="line-modified"> 362   /*      driver finds it incorrect, it sets `size&#39; to some calculated     */</span>
<span class="line-modified"> 363   /*      values, and `x_ppem&#39; and `y_ppem&#39; to the pixel width and height  */</span>
<span class="line-modified"> 364   /*      given in the font, respectively.                                 */</span>
<span class="line-modified"> 365   /*                                                                       */</span>
<span class="line-modified"> 366   /*    TrueType embedded bitmaps:                                         */</span>
<span class="line-modified"> 367   /*      `size&#39;, `width&#39;, and `height&#39; values are not contained in the    */</span>
<span class="line-modified"> 368   /*      bitmap strike itself.  They are computed from the global font    */</span>
<span class="line-modified"> 369   /*      parameters.                                                      */</span>
<span class="line-modified"> 370   /*                                                                       */</span>

 371   typedef struct  FT_Bitmap_Size_
 372   {
 373     FT_Short  height;
 374     FT_Short  width;
 375 
 376     FT_Pos    size;
 377 
 378     FT_Pos    x_ppem;
 379     FT_Pos    y_ppem;
 380 
 381   } FT_Bitmap_Size;
 382 
 383 
 384   /*************************************************************************/
 385   /*************************************************************************/
 386   /*                                                                       */
 387   /*                     O B J E C T   C L A S S E S                       */
 388   /*                                                                       */
 389   /*************************************************************************/
 390   /*************************************************************************/
 391 
<span class="line-modified"> 392   /*************************************************************************/</span>
<span class="line-modified"> 393   /*                                                                       */</span>
<span class="line-modified"> 394   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 395   /*    FT_Library                                                         */</span>
<span class="line-modified"> 396   /*                                                                       */</span>
<span class="line-modified"> 397   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 398   /*    A handle to a FreeType library instance.  Each `library&#39; is        */</span>
<span class="line-modified"> 399   /*    completely independent from the others; it is the `root&#39; of a set  */</span>
<span class="line-modified"> 400   /*    of objects like fonts, faces, sizes, etc.                          */</span>
<span class="line-modified"> 401   /*                                                                       */</span>
<span class="line-modified"> 402   /*    It also embeds a memory manager (see @FT_Memory), as well as a     */</span>
<span class="line-modified"> 403   /*    scan-line converter object (see @FT_Raster).                       */</span>
<span class="line-modified"> 404   /*                                                                       */</span>
<span class="line-modified"> 405   /*    In multi-threaded applications it is easiest to use one            */</span>
<span class="line-modified"> 406   /*    `FT_Library&#39; object per thread.  In case this is too cumbersome,   */</span>
<span class="line-modified"> 407   /*    a single `FT_Library&#39; object across threads is possible also       */</span>
<span class="line-modified"> 408   /*    (since FreeType version 2.5.6), as long as a mutex lock is used    */</span>
<span class="line-modified"> 409   /*    around @FT_New_Face and @FT_Done_Face.                             */</span>
<span class="line-modified"> 410   /*                                                                       */</span>
<span class="line-modified"> 411   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 412   /*    Library objects are normally created by @FT_Init_FreeType, and     */</span>
<span class="line-modified"> 413   /*    destroyed with @FT_Done_FreeType.  If you need reference-counting  */</span>
<span class="line-modified"> 414   /*    (cf. @FT_Reference_Library), use @FT_New_Library and               */</span>
<span class="line-removed"> 415   /*    @FT_Done_Library.                                                  */</span>
<span class="line-removed"> 416   /*                                                                       */</span>
 417   typedef struct FT_LibraryRec_  *FT_Library;
 418 
 419 
<span class="line-modified"> 420   /*************************************************************************/</span>
<span class="line-modified"> 421   /*                                                                       */</span>
<span class="line-modified"> 422   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 423   /*    module_management                                                  */</span>
<span class="line-modified"> 424   /*                                                                       */</span>
<span class="line-modified"> 425   /*************************************************************************/</span>
 426 
<span class="line-modified"> 427   /*************************************************************************/</span>
<span class="line-modified"> 428   /*                                                                       */</span>
<span class="line-modified"> 429   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 430   /*    FT_Module                                                          */</span>
<span class="line-modified"> 431   /*                                                                       */</span>
<span class="line-modified"> 432   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 433   /*    A handle to a given FreeType module object.  A module can be a     */</span>
<span class="line-modified"> 434   /*    font driver, a renderer, or anything else that provides services   */</span>
<span class="line-modified"> 435   /*    to the former.                                                     */</span>
<span class="line-modified"> 436   /*                                                                       */</span>
 437   typedef struct FT_ModuleRec_*  FT_Module;
 438 
 439 
<span class="line-modified"> 440   /*************************************************************************/</span>
<span class="line-modified"> 441   /*                                                                       */</span>
<span class="line-modified"> 442   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 443   /*    FT_Driver                                                          */</span>
<span class="line-modified"> 444   /*                                                                       */</span>
<span class="line-modified"> 445   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 446   /*    A handle to a given FreeType font driver object.  A font driver    */</span>
<span class="line-modified"> 447   /*    is a module capable of creating faces from font files.             */</span>
<span class="line-modified"> 448   /*                                                                       */</span>
 449   typedef struct FT_DriverRec_*  FT_Driver;
 450 
 451 
<span class="line-modified"> 452   /*************************************************************************/</span>
<span class="line-modified"> 453   /*                                                                       */</span>
<span class="line-modified"> 454   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 455   /*    FT_Renderer                                                        */</span>
<span class="line-modified"> 456   /*                                                                       */</span>
<span class="line-modified"> 457   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 458   /*    A handle to a given FreeType renderer.  A renderer is a module in  */</span>
<span class="line-modified"> 459   /*    charge of converting a glyph&#39;s outline image to a bitmap.  It      */</span>
<span class="line-modified"> 460   /*    supports a single glyph image format, and one or more target       */</span>
<span class="line-modified"> 461   /*    surface depths.                                                    */</span>
<span class="line-removed"> 462   /*                                                                       */</span>
 463   typedef struct FT_RendererRec_*  FT_Renderer;
 464 
 465 
<span class="line-modified"> 466   /*************************************************************************/</span>
<span class="line-modified"> 467   /*                                                                       */</span>
<span class="line-modified"> 468   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 469   /*    base_interface                                                     */</span>
<span class="line-modified"> 470   /*                                                                       */</span>
<span class="line-modified"> 471   /*************************************************************************/</span>
 472 
<span class="line-modified"> 473   /*************************************************************************/</span>
<span class="line-modified"> 474   /*                                                                       */</span>
<span class="line-modified"> 475   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 476   /*    FT_Face                                                            */</span>
<span class="line-modified"> 477   /*                                                                       */</span>
<span class="line-modified"> 478   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 479   /*    A handle to a typographic face object.  A face object models a     */</span>
<span class="line-modified"> 480   /*    given typeface, in a given style.                                  */</span>
<span class="line-modified"> 481   /*                                                                       */</span>
<span class="line-modified"> 482   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 483   /*    A face object also owns a single @FT_GlyphSlot object, as well     */</span>
<span class="line-modified"> 484   /*    as one or more @FT_Size objects.                                   */</span>
<span class="line-modified"> 485   /*                                                                       */</span>
<span class="line-modified"> 486   /*    Use @FT_New_Face or @FT_Open_Face to create a new face object from */</span>
<span class="line-modified"> 487   /*    a given filepath or a custom input stream.                         */</span>
<span class="line-modified"> 488   /*                                                                       */</span>
<span class="line-modified"> 489   /*    Use @FT_Done_Face to destroy it (along with its slot and sizes).   */</span>
<span class="line-modified"> 490   /*                                                                       */</span>
<span class="line-modified"> 491   /*    An `FT_Face&#39; object can only be safely used from one thread at a   */</span>
<span class="line-modified"> 492   /*    time.  Similarly, creation and destruction of `FT_Face&#39; with the   */</span>
<span class="line-modified"> 493   /*    same @FT_Library object can only be done from one thread at a      */</span>
<span class="line-modified"> 494   /*    time.  On the other hand, functions like @FT_Load_Glyph and its    */</span>
<span class="line-modified"> 495   /*    siblings are thread-safe and do not need the lock to be held as    */</span>
<span class="line-modified"> 496   /*    long as the same `FT_Face&#39; object is not used from multiple        */</span>
<span class="line-modified"> 497   /*    threads at the same time.                                          */</span>
<span class="line-modified"> 498   /*                                                                       */</span>
<span class="line-modified"> 499   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified"> 500   /*    See @FT_FaceRec for the publicly accessible fields of a given face */</span>
<span class="line-modified"> 501   /*    object.                                                            */</span>
<span class="line-removed"> 502   /*                                                                       */</span>
 503   typedef struct FT_FaceRec_*  FT_Face;
 504 
 505 
<span class="line-modified"> 506   /*************************************************************************/</span>
<span class="line-modified"> 507   /*                                                                       */</span>
<span class="line-modified"> 508   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 509   /*    FT_Size                                                            */</span>
<span class="line-modified"> 510   /*                                                                       */</span>
<span class="line-modified"> 511   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 512   /*    A handle to an object that models a face scaled to a given         */</span>
<span class="line-modified"> 513   /*    character size.                                                    */</span>
<span class="line-modified"> 514   /*                                                                       */</span>
<span class="line-modified"> 515   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 516   /*    An @FT_Face has one _active_ @FT_Size object that is used by       */</span>
<span class="line-modified"> 517   /*    functions like @FT_Load_Glyph to determine the scaling             */</span>
<span class="line-modified"> 518   /*    transformation that in turn is used to load and hint glyphs and    */</span>
<span class="line-modified"> 519   /*    metrics.                                                           */</span>
<span class="line-modified"> 520   /*                                                                       */</span>
<span class="line-modified"> 521   /*    You can use @FT_Set_Char_Size, @FT_Set_Pixel_Sizes,                */</span>
<span class="line-modified"> 522   /*    @FT_Request_Size or even @FT_Select_Size to change the content     */</span>
<span class="line-modified"> 523   /*    (i.e., the scaling values) of the active @FT_Size.                 */</span>
<span class="line-modified"> 524   /*                                                                       */</span>
<span class="line-modified"> 525   /*    You can use @FT_New_Size to create additional size objects for a   */</span>
<span class="line-modified"> 526   /*    given @FT_Face, but they won&#39;t be used by other functions until    */</span>
<span class="line-modified"> 527   /*    you activate it through @FT_Activate_Size.  Only one size can be   */</span>
<span class="line-modified"> 528   /*    activated at any given time per face.                              */</span>
<span class="line-modified"> 529   /*                                                                       */</span>
<span class="line-modified"> 530   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified"> 531   /*    See @FT_SizeRec for the publicly accessible fields of a given size */</span>
<span class="line-modified"> 532   /*    object.                                                            */</span>
<span class="line-removed"> 533   /*                                                                       */</span>
 534   typedef struct FT_SizeRec_*  FT_Size;
 535 
 536 
<span class="line-modified"> 537   /*************************************************************************/</span>
<span class="line-modified"> 538   /*                                                                       */</span>
<span class="line-modified"> 539   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 540   /*    FT_GlyphSlot                                                       */</span>
<span class="line-modified"> 541   /*                                                                       */</span>
<span class="line-modified"> 542   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 543   /*    A handle to a given `glyph slot&#39;.  A slot is a container that can  */</span>
<span class="line-modified"> 544   /*    hold any of the glyphs contained in its parent face.               */</span>
<span class="line-modified"> 545   /*                                                                       */</span>
<span class="line-modified"> 546   /*    In other words, each time you call @FT_Load_Glyph or               */</span>
<span class="line-modified"> 547   /*    @FT_Load_Char, the slot&#39;s content is erased by the new glyph data, */</span>
<span class="line-modified"> 548   /*    i.e., the glyph&#39;s metrics, its image (bitmap or outline), and      */</span>
<span class="line-modified"> 549   /*    other control information.                                         */</span>
<span class="line-modified"> 550   /*                                                                       */</span>
<span class="line-modified"> 551   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified"> 552   /*    See @FT_GlyphSlotRec for the publicly accessible glyph fields.     */</span>
<span class="line-removed"> 553   /*                                                                       */</span>
 554   typedef struct FT_GlyphSlotRec_*  FT_GlyphSlot;
 555 
 556 
<span class="line-modified"> 557   /*************************************************************************/</span>
<span class="line-modified"> 558   /*                                                                       */</span>
<span class="line-modified"> 559   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 560   /*    FT_CharMap                                                         */</span>
<span class="line-modified"> 561   /*                                                                       */</span>
<span class="line-modified"> 562   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 563   /*    A handle to a character map (usually abbreviated to `charmap&#39;).  A */</span>
<span class="line-modified"> 564   /*    charmap is used to translate character codes in a given encoding   */</span>
<span class="line-modified"> 565   /*    into glyph indexes for its parent&#39;s face.  Some font formats may   */</span>
<span class="line-modified"> 566   /*    provide several charmaps per font.                                 */</span>
<span class="line-modified"> 567   /*                                                                       */</span>
<span class="line-modified"> 568   /*    Each face object owns zero or more charmaps, but only one of them  */</span>
<span class="line-modified"> 569   /*    can be `active&#39;, providing the data used by @FT_Get_Char_Index or  */</span>
<span class="line-modified"> 570   /*    @FT_Load_Char.                                                     */</span>
<span class="line-modified"> 571   /*                                                                       */</span>
<span class="line-modified"> 572   /*    The list of available charmaps in a face is available through the  */</span>
<span class="line-modified"> 573   /*    `face-&gt;num_charmaps&#39; and `face-&gt;charmaps&#39; fields of @FT_FaceRec.   */</span>
<span class="line-modified"> 574   /*                                                                       */</span>
<span class="line-modified"> 575   /*    The currently active charmap is available as `face-&gt;charmap&#39;.      */</span>
<span class="line-modified"> 576   /*    You should call @FT_Set_Charmap to change it.                      */</span>
<span class="line-modified"> 577   /*                                                                       */</span>
<span class="line-modified"> 578   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 579   /*    When a new face is created (either through @FT_New_Face or         */</span>
<span class="line-modified"> 580   /*    @FT_Open_Face), the library looks for a Unicode charmap within     */</span>
<span class="line-modified"> 581   /*    the list and automatically activates it.  If there is no Unicode   */</span>
<span class="line-modified"> 582   /*    charmap, FreeType doesn&#39;t set an `active&#39; charmap.                 */</span>
<span class="line-modified"> 583   /*                                                                       */</span>
<span class="line-modified"> 584   /* &lt;Also&gt;                                                                */</span>
<span class="line-modified"> 585   /*    See @FT_CharMapRec for the publicly accessible fields of a given   */</span>
<span class="line-modified"> 586   /*    character map.                                                     */</span>
<span class="line-modified"> 587   /*                                                                       */</span>
 588   typedef struct FT_CharMapRec_*  FT_CharMap;
 589 
 590 
<span class="line-modified"> 591   /*************************************************************************/</span>
<span class="line-modified"> 592   /*                                                                       */</span>
<span class="line-modified"> 593   /* &lt;Macro&gt;                                                               */</span>
<span class="line-modified"> 594   /*    FT_ENC_TAG                                                         */</span>
<span class="line-modified"> 595   /*                                                                       */</span>
<span class="line-modified"> 596   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 597   /*    This macro converts four-letter tags into an unsigned long.  It is */</span>
<span class="line-modified"> 598   /*    used to define `encoding&#39; identifiers (see @FT_Encoding).          */</span>
<span class="line-modified"> 599   /*                                                                       */</span>
<span class="line-modified"> 600   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 601   /*    Since many 16-bit compilers don&#39;t like 32-bit enumerations, you    */</span>
<span class="line-modified"> 602   /*    should redefine this macro in case of problems to something like   */</span>
<span class="line-modified"> 603   /*    this:                                                              */</span>
<span class="line-modified"> 604   /*                                                                       */</span>
<span class="line-modified"> 605   /*    {                                                                  */</span>
<span class="line-modified"> 606   /*      #define FT_ENC_TAG( value, a, b, c, d )  value                   */</span>
<span class="line-modified"> 607   /*    }                                                                  */</span>
<span class="line-modified"> 608   /*                                                                       */</span>
<span class="line-modified"> 609   /*    to get a simple enumeration without assigning special numbers.     */</span>
<span class="line-removed"> 610   /*                                                                       */</span>
 611 
 612 #ifndef FT_ENC_TAG
 613 #define FT_ENC_TAG( value, a, b, c, d )         \
 614           value = ( ( (FT_UInt32)(a) &lt;&lt; 24 ) |  \
 615                     ( (FT_UInt32)(b) &lt;&lt; 16 ) |  \
 616                     ( (FT_UInt32)(c) &lt;&lt;  8 ) |  \
 617                       (FT_UInt32)(d)         )
 618 
 619 #endif /* FT_ENC_TAG */
 620 
 621 
<span class="line-modified"> 622   /*************************************************************************/</span>
<span class="line-modified"> 623   /*                                                                       */</span>
<span class="line-modified"> 624   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified"> 625   /*    FT_Encoding                                                        */</span>
<span class="line-modified"> 626   /*                                                                       */</span>
<span class="line-modified"> 627   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 628   /*    An enumeration to specify character sets supported by charmaps.    */</span>
<span class="line-modified"> 629   /*    Used in the @FT_Select_Charmap API function.                       */</span>
<span class="line-modified"> 630   /*                                                                       */</span>
<span class="line-modified"> 631   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 632   /*    Despite the name, this enumeration lists specific character        */</span>
<span class="line-modified"> 633   /*    repertories (i.e., charsets), and not text encoding methods (e.g., */</span>
<span class="line-modified"> 634   /*    UTF-8, UTF-16, etc.).                                              */</span>
<span class="line-modified"> 635   /*                                                                       */</span>
<span class="line-modified"> 636   /*    Other encodings might be defined in the future.                    */</span>
<span class="line-modified"> 637   /*                                                                       */</span>
<span class="line-modified"> 638   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified"> 639   /*    FT_ENCODING_NONE ::                                                */</span>
<span class="line-modified"> 640   /*      The encoding value~0 is reserved.                                */</span>
<span class="line-modified"> 641   /*                                                                       */</span>
<span class="line-modified"> 642   /*    FT_ENCODING_UNICODE ::                                             */</span>
<span class="line-modified"> 643   /*      The Unicode character set.  This value covers all versions of    */</span>
<span class="line-modified"> 644   /*      the Unicode repertoire, including ASCII and Latin-1.  Most fonts */</span>
<span class="line-modified"> 645   /*      include a Unicode charmap, but not all of them.                  */</span>
<span class="line-modified"> 646   /*                                                                       */</span>
<span class="line-modified"> 647   /*      For example, if you want to access Unicode value U+1F028 (and    */</span>
<span class="line-modified"> 648   /*      the font contains it), use value 0x1F028 as the input value for  */</span>
<span class="line-modified"> 649   /*      @FT_Get_Char_Index.                                              */</span>
<span class="line-modified"> 650   /*                                                                       */</span>
<span class="line-modified"> 651   /*    FT_ENCODING_MS_SYMBOL ::                                           */</span>
<span class="line-modified"> 652   /*      Microsoft Symbol encoding, used to encode mathematical symbols   */</span>
<span class="line-modified"> 653   /*      and wingdings.  For more information, see                        */</span>
<span class="line-modified"> 654   /*      `https://www.microsoft.com/typography/otspec/recom.htm&#39;,         */</span>
<span class="line-modified"> 655   /*      `http://www.kostis.net/charsets/symbol.htm&#39;, and                 */</span>
<span class="line-modified"> 656   /*      `http://www.kostis.net/charsets/wingding.htm&#39;.                   */</span>
<span class="line-modified"> 657   /*                                                                       */</span>
<span class="line-modified"> 658   /*      This encoding uses character codes from the PUA (Private Unicode */</span>
<span class="line-modified"> 659   /*      Area) in the range U+F020-U+F0FF.                                */</span>
<span class="line-modified"> 660   /*                                                                       */</span>
<span class="line-modified"> 661   /*    FT_ENCODING_SJIS ::                                                */</span>
<span class="line-modified"> 662   /*      Shift JIS encoding for Japanese.  More info at                   */</span>
<span class="line-modified"> 663   /*      `https://en.wikipedia.org/wiki/Shift_JIS&#39;.  See note on          */</span>
<span class="line-modified"> 664   /*      multi-byte encodings below.                                      */</span>
<span class="line-modified"> 665   /*                                                                       */</span>
<span class="line-modified"> 666   /*    FT_ENCODING_PRC ::                                                 */</span>
<span class="line-modified"> 667   /*      Corresponds to encoding systems mainly for Simplified Chinese as */</span>
<span class="line-modified"> 668   /*      used in People&#39;s Republic of China (PRC).  The encoding layout   */</span>
<span class="line-modified"> 669   /*      is based on GB~2312 and its supersets GBK and GB~18030.          */</span>
<span class="line-modified"> 670   /*                                                                       */</span>
<span class="line-modified"> 671   /*    FT_ENCODING_BIG5 ::                                                */</span>
<span class="line-modified"> 672   /*      Corresponds to an encoding system for Traditional Chinese as     */</span>
<span class="line-modified"> 673   /*      used in Taiwan and Hong Kong.                                    */</span>
<span class="line-modified"> 674   /*                                                                       */</span>
<span class="line-modified"> 675   /*    FT_ENCODING_WANSUNG ::                                             */</span>
<span class="line-modified"> 676   /*      Corresponds to the Korean encoding system known as Extended      */</span>
<span class="line-modified"> 677   /*      Wansung (MS Windows code page 949).                              */</span>
<span class="line-modified"> 678   /*      For more information see                                         */</span>
<span class="line-modified"> 679   /*      `https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/bestfit949.txt&#39;. */</span>
<span class="line-modified"> 680   /*                                                                       */</span>
<span class="line-modified"> 681   /*    FT_ENCODING_JOHAB ::                                               */</span>
<span class="line-modified"> 682   /*      The Korean standard character set (KS~C 5601-1992), which        */</span>
<span class="line-modified"> 683   /*      corresponds to MS Windows code page 1361.  This character set    */</span>
<span class="line-modified"> 684   /*      includes all possible Hangul character combinations.             */</span>
<span class="line-modified"> 685   /*                                                                       */</span>
<span class="line-modified"> 686   /*    FT_ENCODING_ADOBE_LATIN_1 ::                                       */</span>
<span class="line-modified"> 687   /*      Corresponds to a Latin-1 encoding as defined in a Type~1         */</span>
<span class="line-modified"> 688   /*      PostScript font.  It is limited to 256 character codes.          */</span>
<span class="line-modified"> 689   /*                                                                       */</span>
<span class="line-modified"> 690   /*    FT_ENCODING_ADOBE_STANDARD ::                                      */</span>
<span class="line-modified"> 691   /*      Adobe Standard encoding, as found in Type~1, CFF, and            */</span>
<span class="line-modified"> 692   /*      OpenType/CFF fonts.  It is limited to 256 character codes.       */</span>
<span class="line-modified"> 693   /*                                                                       */</span>
<span class="line-modified"> 694   /*    FT_ENCODING_ADOBE_EXPERT ::                                        */</span>
<span class="line-modified"> 695   /*      Adobe Expert encoding, as found in Type~1, CFF, and OpenType/CFF */</span>
<span class="line-modified"> 696   /*      fonts.  It is limited to 256 character codes.                    */</span>
<span class="line-modified"> 697   /*                                                                       */</span>
<span class="line-modified"> 698   /*    FT_ENCODING_ADOBE_CUSTOM ::                                        */</span>
<span class="line-modified"> 699   /*      Corresponds to a custom encoding, as found in Type~1, CFF, and   */</span>
<span class="line-modified"> 700   /*      OpenType/CFF fonts.  It is limited to 256 character codes.       */</span>
<span class="line-modified"> 701   /*                                                                       */</span>
<span class="line-modified"> 702   /*    FT_ENCODING_APPLE_ROMAN ::                                         */</span>
<span class="line-modified"> 703   /*      Apple roman encoding.  Many TrueType and OpenType fonts contain  */</span>
<span class="line-modified"> 704   /*      a charmap for this 8-bit encoding, since older versions of Mac   */</span>
<span class="line-modified"> 705   /*      OS are able to use it.                                           */</span>
<span class="line-modified"> 706   /*                                                                       */</span>
<span class="line-modified"> 707   /*    FT_ENCODING_OLD_LATIN_2 ::                                         */</span>
<span class="line-modified"> 708   /*      This value is deprecated and was neither used nor reported by    */</span>
<span class="line-modified"> 709   /*      FreeType.  Don&#39;t use or test for it.                             */</span>
<span class="line-modified"> 710   /*                                                                       */</span>
<span class="line-modified"> 711   /*    FT_ENCODING_MS_SJIS ::                                             */</span>
<span class="line-modified"> 712   /*      Same as FT_ENCODING_SJIS.  Deprecated.                           */</span>
<span class="line-modified"> 713   /*                                                                       */</span>
<span class="line-modified"> 714   /*    FT_ENCODING_MS_GB2312 ::                                           */</span>
<span class="line-modified"> 715   /*      Same as FT_ENCODING_PRC.  Deprecated.                            */</span>
<span class="line-modified"> 716   /*                                                                       */</span>
<span class="line-modified"> 717   /*    FT_ENCODING_MS_BIG5 ::                                             */</span>
<span class="line-modified"> 718   /*      Same as FT_ENCODING_BIG5.  Deprecated.                           */</span>
<span class="line-modified"> 719   /*                                                                       */</span>
<span class="line-modified"> 720   /*    FT_ENCODING_MS_WANSUNG ::                                          */</span>
<span class="line-modified"> 721   /*      Same as FT_ENCODING_WANSUNG.  Deprecated.                        */</span>
<span class="line-modified"> 722   /*                                                                       */</span>
<span class="line-modified"> 723   /*    FT_ENCODING_MS_JOHAB ::                                            */</span>
<span class="line-modified"> 724   /*      Same as FT_ENCODING_JOHAB.  Deprecated.                          */</span>
<span class="line-modified"> 725   /*                                                                       */</span>
<span class="line-modified"> 726   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 727   /*    By default, FreeType enables a Unicode charmap and tags it with    */</span>
<span class="line-modified"> 728   /*    FT_ENCODING_UNICODE when it is either provided or can be generated */</span>
<span class="line-modified"> 729   /*    from PostScript glyph name dictionaries in the font file.          */</span>
<span class="line-modified"> 730   /*    All other encodings are considered legacy and tagged only if       */</span>
<span class="line-modified"> 731   /*    explicitly defined in the font file.  Otherwise, FT_ENCODING_NONE  */</span>
<span class="line-modified"> 732   /*    is used.                                                           */</span>
<span class="line-modified"> 733   /*                                                                       */</span>
<span class="line-modified"> 734   /*    FT_ENCODING_NONE is set by the BDF and PCF drivers if the charmap  */</span>
<span class="line-modified"> 735   /*    is neither Unicode nor ISO-8859-1 (otherwise it is set to          */</span>
<span class="line-modified"> 736   /*    FT_ENCODING_UNICODE).  Use @FT_Get_BDF_Charset_ID to find out      */</span>
<span class="line-modified"> 737   /*    which encoding is really present.  If, for example, the            */</span>
<span class="line-modified"> 738   /*    `cs_registry&#39; field is `KOI8&#39; and the `cs_encoding&#39; field is `R&#39;,  */</span>
<span class="line-modified"> 739   /*    the font is encoded in KOI8-R.                                     */</span>
<span class="line-modified"> 740   /*                                                                       */</span>
<span class="line-modified"> 741   /*    FT_ENCODING_NONE is always set (with a single exception) by the    */</span>
<span class="line-modified"> 742   /*    winfonts driver.  Use @FT_Get_WinFNT_Header and examine the        */</span>
<span class="line-modified"> 743   /*    `charset&#39; field of the @FT_WinFNT_HeaderRec structure to find out  */</span>
<span class="line-modified"> 744   /*    which encoding is really present.  For example,                    */</span>
<span class="line-modified"> 745   /*    @FT_WinFNT_ID_CP1251 (204) means Windows code page 1251 (for       */</span>
<span class="line-modified"> 746   /*    Russian).                                                          */</span>
<span class="line-modified"> 747   /*                                                                       */</span>
<span class="line-modified"> 748   /*    FT_ENCODING_NONE is set if `platform_id&#39; is @TT_PLATFORM_MACINTOSH */</span>
<span class="line-modified"> 749   /*    and `encoding_id&#39; is not `TT_MAC_ID_ROMAN&#39; (otherwise it is set to */</span>
<span class="line-modified"> 750   /*    FT_ENCODING_APPLE_ROMAN).                                          */</span>
<span class="line-modified"> 751   /*                                                                       */</span>
<span class="line-modified"> 752   /*    If `platform_id&#39; is @TT_PLATFORM_MACINTOSH, use the function       */</span>
<span class="line-modified"> 753   /*    @FT_Get_CMap_Language_ID to query the Mac language ID that may     */</span>
<span class="line-modified"> 754   /*    be needed to be able to distinguish Apple encoding variants.  See  */</span>
<span class="line-modified"> 755   /*                                                                       */</span>
<span class="line-modified"> 756   /*      https://www.unicode.org/Public/MAPPINGS/VENDORS/APPLE/Readme.txt */</span>
<span class="line-modified"> 757   /*                                                                       */</span>
<span class="line-modified"> 758   /*    to get an idea how to do that.  Basically, if the language ID      */</span>
<span class="line-modified"> 759   /*    is~0, don&#39;t use it, otherwise subtract 1 from the language ID.     */</span>
<span class="line-modified"> 760   /*    Then examine `encoding_id&#39;.  If, for example, `encoding_id&#39; is     */</span>
<span class="line-modified"> 761   /*    `TT_MAC_ID_ROMAN&#39; and the language ID (minus~1) is                 */</span>
<span class="line-modified"> 762   /*    `TT_MAC_LANGID_GREEK&#39;, it is the Greek encoding, not Roman.        */</span>
<span class="line-removed"> 763   /*    `TT_MAC_ID_ARABIC&#39; with `TT_MAC_LANGID_FARSI&#39; means the Farsi      */</span>
<span class="line-removed"> 764   /*    variant the Arabic encoding.                                       */</span>
<span class="line-removed"> 765   /*                                                                       */</span>
 766   typedef enum  FT_Encoding_
 767   {
 768     FT_ENC_TAG( FT_ENCODING_NONE, 0, 0, 0, 0 ),
 769 
 770     FT_ENC_TAG( FT_ENCODING_MS_SYMBOL, &#39;s&#39;, &#39;y&#39;, &#39;m&#39;, &#39;b&#39; ),
 771     FT_ENC_TAG( FT_ENCODING_UNICODE,   &#39;u&#39;, &#39;n&#39;, &#39;i&#39;, &#39;c&#39; ),
 772 
 773     FT_ENC_TAG( FT_ENCODING_SJIS,    &#39;s&#39;, &#39;j&#39;, &#39;i&#39;, &#39;s&#39; ),
 774     FT_ENC_TAG( FT_ENCODING_PRC,     &#39;g&#39;, &#39;b&#39;, &#39; &#39;, &#39; &#39; ),
 775     FT_ENC_TAG( FT_ENCODING_BIG5,    &#39;b&#39;, &#39;i&#39;, &#39;g&#39;, &#39;5&#39; ),
 776     FT_ENC_TAG( FT_ENCODING_WANSUNG, &#39;w&#39;, &#39;a&#39;, &#39;n&#39;, &#39;s&#39; ),
 777     FT_ENC_TAG( FT_ENCODING_JOHAB,   &#39;j&#39;, &#39;o&#39;, &#39;h&#39;, &#39;a&#39; ),
 778 
 779     /* for backward compatibility */
 780     FT_ENCODING_GB2312     = FT_ENCODING_PRC,
 781     FT_ENCODING_MS_SJIS    = FT_ENCODING_SJIS,
 782     FT_ENCODING_MS_GB2312  = FT_ENCODING_PRC,
 783     FT_ENCODING_MS_BIG5    = FT_ENCODING_BIG5,
 784     FT_ENCODING_MS_WANSUNG = FT_ENCODING_WANSUNG,
 785     FT_ENCODING_MS_JOHAB   = FT_ENCODING_JOHAB,
 786 
 787     FT_ENC_TAG( FT_ENCODING_ADOBE_STANDARD, &#39;A&#39;, &#39;D&#39;, &#39;O&#39;, &#39;B&#39; ),
 788     FT_ENC_TAG( FT_ENCODING_ADOBE_EXPERT,   &#39;A&#39;, &#39;D&#39;, &#39;B&#39;, &#39;E&#39; ),
 789     FT_ENC_TAG( FT_ENCODING_ADOBE_CUSTOM,   &#39;A&#39;, &#39;D&#39;, &#39;B&#39;, &#39;C&#39; ),
 790     FT_ENC_TAG( FT_ENCODING_ADOBE_LATIN_1,  &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39;1&#39; ),
 791 
 792     FT_ENC_TAG( FT_ENCODING_OLD_LATIN_2, &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39;2&#39; ),
 793 
 794     FT_ENC_TAG( FT_ENCODING_APPLE_ROMAN, &#39;a&#39;, &#39;r&#39;, &#39;m&#39;, &#39;n&#39; )
 795 
 796   } FT_Encoding;
 797 
 798 
<span class="line-modified"> 799   /* these constants are deprecated; use the corresponding `FT_Encoding&#39; */</span>
 800   /* values instead                                                      */
 801 #define ft_encoding_none            FT_ENCODING_NONE
 802 #define ft_encoding_unicode         FT_ENCODING_UNICODE
 803 #define ft_encoding_symbol          FT_ENCODING_MS_SYMBOL
 804 #define ft_encoding_latin_1         FT_ENCODING_ADOBE_LATIN_1
 805 #define ft_encoding_latin_2         FT_ENCODING_OLD_LATIN_2
 806 #define ft_encoding_sjis            FT_ENCODING_SJIS
 807 #define ft_encoding_gb2312          FT_ENCODING_PRC
 808 #define ft_encoding_big5            FT_ENCODING_BIG5
 809 #define ft_encoding_wansung         FT_ENCODING_WANSUNG
 810 #define ft_encoding_johab           FT_ENCODING_JOHAB
 811 
 812 #define ft_encoding_adobe_standard  FT_ENCODING_ADOBE_STANDARD
 813 #define ft_encoding_adobe_expert    FT_ENCODING_ADOBE_EXPERT
 814 #define ft_encoding_adobe_custom    FT_ENCODING_ADOBE_CUSTOM
 815 #define ft_encoding_apple_roman     FT_ENCODING_APPLE_ROMAN
 816 
 817 
<span class="line-modified"> 818   /*************************************************************************/</span>
<span class="line-modified"> 819   /*                                                                       */</span>
<span class="line-modified"> 820   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 821   /*    FT_CharMapRec                                                      */</span>
<span class="line-modified"> 822   /*                                                                       */</span>
<span class="line-modified"> 823   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 824   /*    The base charmap structure.                                        */</span>
<span class="line-modified"> 825   /*                                                                       */</span>
<span class="line-modified"> 826   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 827   /*    face        :: A handle to the parent face object.                 */</span>
<span class="line-modified"> 828   /*                                                                       */</span>
<span class="line-modified"> 829   /*    encoding    :: An @FT_Encoding tag identifying the charmap.  Use   */</span>
<span class="line-modified"> 830   /*                   this with @FT_Select_Charmap.                       */</span>
<span class="line-modified"> 831   /*                                                                       */</span>
<span class="line-modified"> 832   /*    platform_id :: An ID number describing the platform for the        */</span>
<span class="line-modified"> 833   /*                   following encoding ID.  This comes directly from    */</span>
<span class="line-modified"> 834   /*                   the TrueType specification and gets emulated for    */</span>
<span class="line-modified"> 835   /*                   other formats.                                      */</span>
<span class="line-modified"> 836   /*                                                                       */</span>
<span class="line-modified"> 837   /*    encoding_id :: A platform specific encoding number.  This also     */</span>
<span class="line-modified"> 838   /*                   comes from the TrueType specification and gets      */</span>
<span class="line-modified"> 839   /*                   emulated similarly.                                 */</span>
<span class="line-modified"> 840   /*                                                                       */</span>


 841   typedef struct  FT_CharMapRec_
 842   {
 843     FT_Face      face;
 844     FT_Encoding  encoding;
 845     FT_UShort    platform_id;
 846     FT_UShort    encoding_id;
 847 
 848   } FT_CharMapRec;
 849 
 850 
 851   /*************************************************************************/
 852   /*************************************************************************/
 853   /*                                                                       */
 854   /*                 B A S E   O B J E C T   C L A S S E S                 */
 855   /*                                                                       */
 856   /*************************************************************************/
 857   /*************************************************************************/
 858 
 859 
<span class="line-modified"> 860   /*************************************************************************/</span>
<span class="line-modified"> 861   /*                                                                       */</span>
<span class="line-modified"> 862   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified"> 863   /*    FT_Face_Internal                                                   */</span>
<span class="line-modified"> 864   /*                                                                       */</span>
<span class="line-modified"> 865   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 866   /*    An opaque handle to an `FT_Face_InternalRec&#39; structure that models */</span>
<span class="line-modified"> 867   /*    the private data of a given @FT_Face object.                       */</span>
<span class="line-modified"> 868   /*                                                                       */</span>
<span class="line-modified"> 869   /*    This structure might change between releases of FreeType~2 and is  */</span>
<span class="line-modified"> 870   /*    not generally available to client applications.                    */</span>
<span class="line-modified"> 871   /*                                                                       */</span>
 872   typedef struct FT_Face_InternalRec_*  FT_Face_Internal;
 873 
 874 
<span class="line-modified"> 875   /*************************************************************************/</span>
<span class="line-modified"> 876   /*                                                                       */</span>
<span class="line-modified"> 877   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified"> 878   /*    FT_FaceRec                                                         */</span>
<span class="line-modified"> 879   /*                                                                       */</span>
<span class="line-modified"> 880   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 881   /*    FreeType root face class structure.  A face object models a        */</span>
<span class="line-modified"> 882   /*    typeface in a font file.                                           */</span>
<span class="line-modified"> 883   /*                                                                       */</span>
<span class="line-modified"> 884   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified"> 885   /*    num_faces           :: The number of faces in the font file.  Some */</span>
<span class="line-modified"> 886   /*                           font formats can have multiple faces in     */</span>
<span class="line-modified"> 887   /*                           a single font file.                         */</span>
<span class="line-modified"> 888   /*                                                                       */</span>
<span class="line-modified"> 889   /*    face_index          :: This field holds two different values.      */</span>
<span class="line-modified"> 890   /*                           Bits 0-15 are the index of the face in the  */</span>
<span class="line-modified"> 891   /*                           font file (starting with value~0).  They    */</span>
<span class="line-modified"> 892   /*                           are set to~0 if there is only one face in   */</span>
<span class="line-modified"> 893   /*                           the font file.                              */</span>
<span class="line-modified"> 894   /*                                                                       */</span>
<span class="line-modified"> 895   /*                           [Since 2.6.1] Bits 16-30 are relevant to GX */</span>
<span class="line-modified"> 896   /*                           and OpenType variation fonts only, holding  */</span>
<span class="line-modified"> 897   /*                           the named instance index for the current    */</span>
<span class="line-modified"> 898   /*                           face index (starting with value~1; value~0  */</span>
<span class="line-modified"> 899   /*                           indicates font access without a named       */</span>
<span class="line-modified"> 900   /*                           instance).  For non-variation fonts, bits   */</span>
<span class="line-modified"> 901   /*                           16-30 are ignored.  If we have the third    */</span>
<span class="line-modified"> 902   /*                           named instance of face~4, say, `face_index&#39; */</span>
<span class="line-modified"> 903   /*                           is set to 0x00030004.                       */</span>
<span class="line-modified"> 904   /*                                                                       */</span>
<span class="line-modified"> 905   /*                           Bit 31 is always zero (this is,             */</span>
<span class="line-modified"> 906   /*                           `face_index&#39; is always a positive value).   */</span>
<span class="line-modified"> 907   /*                                                                       */</span>
<span class="line-modified"> 908   /*                           [Since 2.9] Changing the design coordinates */</span>
<span class="line-modified"> 909   /*                           with @FT_Set_Var_Design_Coordinates or      */</span>
<span class="line-modified"> 910   /*                           @FT_Set_Var_Blend_Coordinates does not      */</span>
<span class="line-modified"> 911   /*                           influence the named instance index value    */</span>
<span class="line-modified"> 912   /*                           (only @FT_Set_Named_Instance does that).    */</span>
<span class="line-modified"> 913   /*                                                                       */</span>
<span class="line-modified"> 914   /*    face_flags          :: A set of bit flags that give important      */</span>
<span class="line-modified"> 915   /*                           information about the face; see             */</span>
<span class="line-modified"> 916   /*                           @FT_FACE_FLAG_XXX for the details.          */</span>
<span class="line-modified"> 917   /*                                                                       */</span>
<span class="line-modified"> 918   /*    style_flags         :: The lower 16~bits contain a set of bit      */</span>
<span class="line-modified"> 919   /*                           flags indicating the style of the face; see */</span>
<span class="line-modified"> 920   /*                           @FT_STYLE_FLAG_XXX for the details.         */</span>
<span class="line-modified"> 921   /*                                                                       */</span>
<span class="line-modified"> 922   /*                           [Since 2.6.1] Bits 16-30 hold the number    */</span>
<span class="line-modified"> 923   /*                           of named instances available for the        */</span>
<span class="line-modified"> 924   /*                           current face if we have a GX or OpenType    */</span>
<span class="line-modified"> 925   /*                           variation (sub)font.  Bit 31 is always zero */</span>
<span class="line-modified"> 926   /*                           (this is, `style_flags&#39; is always a         */</span>
<span class="line-modified"> 927   /*                           positive value).  Note that a variation     */</span>
<span class="line-modified"> 928   /*                           font has always at least one named          */</span>
<span class="line-modified"> 929   /*                           instance, namely the default instance.      */</span>
<span class="line-modified"> 930   /*                                                                       */</span>
<span class="line-modified"> 931   /*    num_glyphs          :: The number of glyphs in the face.  If the   */</span>
<span class="line-modified"> 932   /*                           face is scalable and has sbits (see         */</span>
<span class="line-modified"> 933   /*                           `num_fixed_sizes&#39;), it is set to the number */</span>
<span class="line-modified"> 934   /*                           of outline glyphs.                          */</span>
<span class="line-modified"> 935   /*                                                                       */</span>
<span class="line-modified"> 936   /*                           For CID-keyed fonts (not in an SFNT         */</span>
<span class="line-modified"> 937   /*                           wrapper) this value gives the highest CID   */</span>
<span class="line-modified"> 938   /*                           used in the font.                           */</span>
<span class="line-modified"> 939   /*                                                                       */</span>
<span class="line-modified"> 940   /*    family_name         :: The face&#39;s family name.  This is an ASCII   */</span>
<span class="line-modified"> 941   /*                           string, usually in English, that describes  */</span>
<span class="line-modified"> 942   /*                           the typeface&#39;s family (like `Times New      */</span>
<span class="line-modified"> 943   /*                           Roman&#39;, `Bodoni&#39;, `Garamond&#39;, etc).  This   */</span>
<span class="line-modified"> 944   /*                           is a least common denominator used to list  */</span>
<span class="line-modified"> 945   /*                           fonts.  Some formats (TrueType &amp; OpenType)  */</span>
<span class="line-modified"> 946   /*                           provide localized and Unicode versions of   */</span>
<span class="line-modified"> 947   /*                           this string.  Applications should use the   */</span>
<span class="line-modified"> 948   /*                           format specific interface to access them.   */</span>
<span class="line-modified"> 949   /*                           Can be NULL (e.g., in fonts embedded in a   */</span>
<span class="line-modified"> 950   /*                           PDF file).                                  */</span>
<span class="line-modified"> 951   /*                                                                       */</span>
<span class="line-modified"> 952   /*                           In case the font doesn&#39;t provide a specific */</span>
<span class="line-modified"> 953   /*                           family name entry, FreeType tries to        */</span>
<span class="line-modified"> 954   /*                           synthesize one, deriving it from other name */</span>
<span class="line-modified"> 955   /*                           entries.                                    */</span>
<span class="line-modified"> 956   /*                                                                       */</span>
<span class="line-modified"> 957   /*    style_name          :: The face&#39;s style name.  This is an ASCII    */</span>
<span class="line-modified"> 958   /*                           string, usually in English, that describes  */</span>
<span class="line-modified"> 959   /*                           the typeface&#39;s style (like `Italic&#39;,        */</span>
<span class="line-modified"> 960   /*                           `Bold&#39;, `Condensed&#39;, etc).  Not all font    */</span>
<span class="line-modified"> 961   /*                           formats provide a style name, so this field */</span>
<span class="line-modified"> 962   /*                           is optional, and can be set to NULL.  As    */</span>
<span class="line-modified"> 963   /*                           for `family_name&#39;, some formats provide     */</span>
<span class="line-modified"> 964   /*                           localized and Unicode versions of this      */</span>
<span class="line-modified"> 965   /*                           string.  Applications should use the format */</span>
<span class="line-modified"> 966   /*                           specific interface to access them.          */</span>
<span class="line-modified"> 967   /*                                                                       */</span>
<span class="line-modified"> 968   /*    num_fixed_sizes     :: The number of bitmap strikes in the face.   */</span>
<span class="line-modified"> 969   /*                           Even if the face is scalable, there might   */</span>
<span class="line-modified"> 970   /*                           still be bitmap strikes, which are called   */</span>
<span class="line-modified"> 971   /*                           `sbits&#39; in that case.                       */</span>
<span class="line-modified"> 972   /*                                                                       */</span>
<span class="line-modified"> 973   /*    available_sizes     :: An array of @FT_Bitmap_Size for all bitmap  */</span>
<span class="line-modified"> 974   /*                           strikes in the face.  It is set to NULL if  */</span>
<span class="line-modified"> 975   /*                           there is no bitmap strike.                  */</span>
<span class="line-modified"> 976   /*                                                                       */</span>
<span class="line-modified"> 977   /*                           Note that FreeType tries to sanitize the    */</span>
<span class="line-modified"> 978   /*                           strike data since they are sometimes sloppy */</span>
<span class="line-modified"> 979   /*                           or incorrect, but this can easily fail.     */</span>
<span class="line-modified"> 980   /*                                                                       */</span>
<span class="line-modified"> 981   /*    num_charmaps        :: The number of charmaps in the face.         */</span>
<span class="line-modified"> 982   /*                                                                       */</span>
<span class="line-modified"> 983   /*    charmaps            :: An array of the charmaps of the face.       */</span>
<span class="line-modified"> 984   /*                                                                       */</span>
<span class="line-modified"> 985   /*    generic             :: A field reserved for client uses.  See the  */</span>
<span class="line-modified"> 986   /*                           @FT_Generic type description.               */</span>
<span class="line-modified"> 987   /*                                                                       */</span>
<span class="line-modified"> 988   /*    bbox                :: The font bounding box.  Coordinates are     */</span>
<span class="line-modified"> 989   /*                           expressed in font units (see                */</span>
<span class="line-modified"> 990   /*                           `units_per_EM&#39;).  The box is large enough   */</span>
<span class="line-modified"> 991   /*                           to contain any glyph from the font.  Thus,  */</span>
<span class="line-modified"> 992   /*                           `bbox.yMax&#39; can be seen as the `maximum     */</span>
<span class="line-modified"> 993   /*                           ascender&#39;, and `bbox.yMin&#39; as the `minimum  */</span>
<span class="line-modified"> 994   /*                           descender&#39;.  Only relevant for scalable     */</span>
<span class="line-modified"> 995   /*                           formats.                                    */</span>
<span class="line-modified"> 996   /*                                                                       */</span>
<span class="line-modified"> 997   /*                           Note that the bounding box might be off by  */</span>
<span class="line-modified"> 998   /*                           (at least) one pixel for hinted fonts.  See */</span>
<span class="line-modified"> 999   /*                           @FT_Size_Metrics for further discussion.    */</span>
<span class="line-modified">1000   /*                                                                       */</span>
<span class="line-modified">1001   /*    units_per_EM        :: The number of font units per EM square for  */</span>
<span class="line-modified">1002   /*                           this face.  This is typically 2048 for      */</span>
<span class="line-modified">1003   /*                           TrueType fonts, and 1000 for Type~1 fonts.  */</span>
<span class="line-modified">1004   /*                           Only relevant for scalable formats.         */</span>
<span class="line-modified">1005   /*                                                                       */</span>
<span class="line-modified">1006   /*    ascender            :: The typographic ascender of the face,       */</span>
<span class="line-modified">1007   /*                           expressed in font units.  For font formats  */</span>
<span class="line-modified">1008   /*                           not having this information, it is set to   */</span>
<span class="line-modified">1009   /*                           `bbox.yMax&#39;.  Only relevant for scalable    */</span>
<span class="line-modified">1010   /*                           formats.                                    */</span>
<span class="line-modified">1011   /*                                                                       */</span>
<span class="line-modified">1012   /*    descender           :: The typographic descender of the face,      */</span>
<span class="line-modified">1013   /*                           expressed in font units.  For font formats  */</span>
<span class="line-modified">1014   /*                           not having this information, it is set to   */</span>
<span class="line-modified">1015   /*                           `bbox.yMin&#39;.  Note that this field is       */</span>
<span class="line-modified">1016   /*                           negative for values below the baseline.     */</span>
<span class="line-modified">1017   /*                           Only relevant for scalable formats.         */</span>
<span class="line-modified">1018   /*                                                                       */</span>
<span class="line-modified">1019   /*    height              :: This value is the vertical distance         */</span>
<span class="line-modified">1020   /*                           between two consecutive baselines,          */</span>
<span class="line-modified">1021   /*                           expressed in font units.  It is always      */</span>
<span class="line-modified">1022   /*                           positive.  Only relevant for scalable       */</span>
<span class="line-modified">1023   /*                           formats.                                    */</span>
<span class="line-modified">1024   /*                                                                       */</span>
<span class="line-modified">1025   /*                           If you want the global glyph height, use    */</span>
<span class="line-modified">1026   /*                           `ascender - descender&#39;.                     */</span>
<span class="line-modified">1027   /*                                                                       */</span>
<span class="line-modified">1028   /*    max_advance_width   :: The maximum advance width, in font units,   */</span>
<span class="line-modified">1029   /*                           for all glyphs in this face.  This can be   */</span>
<span class="line-modified">1030   /*                           used to make word wrapping computations     */</span>
<span class="line-modified">1031   /*                           faster.  Only relevant for scalable         */</span>
<span class="line-modified">1032   /*                           formats.                                    */</span>
<span class="line-modified">1033   /*                                                                       */</span>
<span class="line-modified">1034   /*    max_advance_height  :: The maximum advance height, in font units,  */</span>
<span class="line-modified">1035   /*                           for all glyphs in this face.  This is only  */</span>
<span class="line-modified">1036   /*                           relevant for vertical layouts, and is set   */</span>
<span class="line-modified">1037   /*                           to `height&#39; for fonts that do not provide   */</span>
<span class="line-modified">1038   /*                           vertical metrics.  Only relevant for        */</span>
<span class="line-modified">1039   /*                           scalable formats.                           */</span>
<span class="line-modified">1040   /*                                                                       */</span>
<span class="line-modified">1041   /*    underline_position  :: The position, in font units, of the         */</span>
<span class="line-modified">1042   /*                           underline line for this face.  It is the    */</span>
<span class="line-modified">1043   /*                           center of the underlining stem.  Only       */</span>
<span class="line-modified">1044   /*                           relevant for scalable formats.              */</span>
<span class="line-modified">1045   /*                                                                       */</span>
<span class="line-modified">1046   /*    underline_thickness :: The thickness, in font units, of the        */</span>
<span class="line-modified">1047   /*                           underline for this face.  Only relevant for */</span>
<span class="line-modified">1048   /*                           scalable formats.                           */</span>
<span class="line-removed">1049   /*                                                                       */</span>
<span class="line-removed">1050   /*    glyph               :: The face&#39;s associated glyph slot(s).        */</span>
<span class="line-removed">1051   /*                                                                       */</span>
<span class="line-removed">1052   /*    size                :: The current active size for this face.      */</span>
<span class="line-removed">1053   /*                                                                       */</span>
<span class="line-removed">1054   /*    charmap             :: The current active charmap for this face.   */</span>
<span class="line-removed">1055   /*                                                                       */</span>
<span class="line-removed">1056   /* &lt;Note&gt;                                                                */</span>
<span class="line-removed">1057   /*    Fields may be changed after a call to @FT_Attach_File or           */</span>
<span class="line-removed">1058   /*    @FT_Attach_Stream.                                                 */</span>
<span class="line-removed">1059   /*                                                                       */</span>
<span class="line-removed">1060   /*    For an OpenType variation font, the values of the following fields */</span>
<span class="line-removed">1061   /*    can change after a call to @FT_Set_Var_Design_Coordinates (and     */</span>
<span class="line-removed">1062   /*    friends) if the font contains an `MVAR&#39; table: `ascender&#39;,         */</span>
<span class="line-removed">1063   /*    `descender&#39;, `height&#39;, `underline_position&#39;, and                   */</span>
<span class="line-removed">1064   /*    `underline_thickness&#39;.                                             */</span>
<span class="line-removed">1065   /*                                                                       */</span>
<span class="line-removed">1066   /*    Especially for TrueType fonts see also the documentation for       */</span>
<span class="line-removed">1067   /*    @FT_Size_Metrics.                                                  */</span>
<span class="line-removed">1068   /*                                                                       */</span>
1069   typedef struct  FT_FaceRec_
1070   {
1071     FT_Long           num_faces;
1072     FT_Long           face_index;
1073 
1074     FT_Long           face_flags;
1075     FT_Long           style_flags;
1076 
1077     FT_Long           num_glyphs;
1078 
1079     FT_String*        family_name;
1080     FT_String*        style_name;
1081 
1082     FT_Int            num_fixed_sizes;
1083     FT_Bitmap_Size*   available_sizes;
1084 
1085     FT_Int            num_charmaps;
1086     FT_CharMap*       charmaps;
1087 
1088     FT_Generic        generic;
1089 
<span class="line-modified">1090     /*# The following member variables (down to `underline_thickness&#39;) */</span>
1091     /*# are only relevant to scalable outlines; cf. @FT_Bitmap_Size    */
1092     /*# for bitmap fonts.                                              */
1093     FT_BBox           bbox;
1094 
1095     FT_UShort         units_per_EM;
1096     FT_Short          ascender;
1097     FT_Short          descender;
1098     FT_Short          height;
1099 
1100     FT_Short          max_advance_width;
1101     FT_Short          max_advance_height;
1102 
1103     FT_Short          underline_position;
1104     FT_Short          underline_thickness;
1105 
1106     FT_GlyphSlot      glyph;
1107     FT_Size           size;
1108     FT_CharMap        charmap;
1109 
1110     /*@private begin */
1111 
1112     FT_Driver         driver;
1113     FT_Memory         memory;
1114     FT_Stream         stream;
1115 
1116     FT_ListRec        sizes_list;
1117 
1118     FT_Generic        autohint;   /* face-specific auto-hinter data */
1119     void*             extensions; /* unused                         */
1120 
1121     FT_Face_Internal  internal;
1122 
1123     /*@private end */
1124 
1125   } FT_FaceRec;
1126 
1127 
<span class="line-modified">1128   /*************************************************************************/</span>
<span class="line-modified">1129   /*                                                                       */</span>
<span class="line-modified">1130   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">1131   /*    FT_FACE_FLAG_XXX                                                   */</span>
<span class="line-modified">1132   /*                                                                       */</span>
<span class="line-modified">1133   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1134   /*    A list of bit flags used in the `face_flags&#39; field of the          */</span>
<span class="line-modified">1135   /*    @FT_FaceRec structure.  They inform client applications of         */</span>
<span class="line-modified">1136   /*    properties of the corresponding face.                              */</span>
<span class="line-modified">1137   /*                                                                       */</span>
<span class="line-modified">1138   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">1139   /*    FT_FACE_FLAG_SCALABLE ::                                           */</span>
<span class="line-modified">1140   /*      The face contains outline glyphs.  Note that a face can contain  */</span>
<span class="line-modified">1141   /*      bitmap strikes also, i.e., a face can have both this flag and    */</span>
<span class="line-modified">1142   /*      @FT_FACE_FLAG_FIXED_SIZES set.                                   */</span>
<span class="line-modified">1143   /*                                                                       */</span>
<span class="line-modified">1144   /*    FT_FACE_FLAG_FIXED_SIZES ::                                        */</span>
<span class="line-modified">1145   /*      The face contains bitmap strikes.  See also the                  */</span>
<span class="line-modified">1146   /*      `num_fixed_sizes&#39; and `available_sizes&#39; fields of @FT_FaceRec.   */</span>
<span class="line-modified">1147   /*                                                                       */</span>
<span class="line-modified">1148   /*    FT_FACE_FLAG_FIXED_WIDTH ::                                        */</span>
<span class="line-modified">1149   /*      The face contains fixed-width characters (like Courier, Lucida,  */</span>
<span class="line-modified">1150   /*      MonoType, etc.).                                                 */</span>
<span class="line-modified">1151   /*                                                                       */</span>
<span class="line-modified">1152   /*    FT_FACE_FLAG_SFNT ::                                               */</span>
<span class="line-modified">1153   /*      The face uses the SFNT storage scheme.  For now, this means      */</span>
<span class="line-modified">1154   /*      TrueType and OpenType.                                           */</span>
<span class="line-modified">1155   /*                                                                       */</span>
<span class="line-modified">1156   /*    FT_FACE_FLAG_HORIZONTAL ::                                         */</span>
<span class="line-modified">1157   /*      The face contains horizontal glyph metrics.  This should be set  */</span>
<span class="line-modified">1158   /*      for all common formats.                                          */</span>
<span class="line-modified">1159   /*                                                                       */</span>
<span class="line-modified">1160   /*    FT_FACE_FLAG_VERTICAL ::                                           */</span>
<span class="line-modified">1161   /*      The face contains vertical glyph metrics.  This is only          */</span>
<span class="line-modified">1162   /*      available in some formats, not all of them.                      */</span>
<span class="line-modified">1163   /*                                                                       */</span>
<span class="line-modified">1164   /*    FT_FACE_FLAG_KERNING ::                                            */</span>
<span class="line-modified">1165   /*      The face contains kerning information.  If set, the kerning      */</span>
<span class="line-modified">1166   /*      distance can be retrieved using the function @FT_Get_Kerning.    */</span>
<span class="line-modified">1167   /*      Otherwise the function always return the vector (0,0).  Note     */</span>
<span class="line-modified">1168   /*      that FreeType doesn&#39;t handle kerning data from the SFNT `GPOS&#39;   */</span>
<span class="line-modified">1169   /*      table (as present in many OpenType fonts).                       */</span>
<span class="line-modified">1170   /*                                                                       */</span>
<span class="line-modified">1171   /*    FT_FACE_FLAG_FAST_GLYPHS ::                                        */</span>
<span class="line-modified">1172   /*      THIS FLAG IS DEPRECATED.  DO NOT USE OR TEST IT.                 */</span>
<span class="line-modified">1173   /*                                                                       */</span>
<span class="line-modified">1174   /*    FT_FACE_FLAG_MULTIPLE_MASTERS ::                                   */</span>
<span class="line-modified">1175   /*      The face contains multiple masters and is capable of             */</span>
<span class="line-modified">1176   /*      interpolating between them.  Supported formats are Adobe MM,     */</span>
<span class="line-modified">1177   /*      TrueType GX, and OpenType variation fonts.                       */</span>
<span class="line-modified">1178   /*                                                                       */</span>
<span class="line-modified">1179   /*      See section @multiple_masters for API details.                   */</span>
<span class="line-modified">1180   /*                                                                       */</span>
<span class="line-modified">1181   /*    FT_FACE_FLAG_GLYPH_NAMES ::                                        */</span>
<span class="line-modified">1182   /*      The face contains glyph names, which can be retrieved using      */</span>
<span class="line-modified">1183   /*      @FT_Get_Glyph_Name.  Note that some TrueType fonts contain       */</span>
<span class="line-modified">1184   /*      broken glyph name tables.  Use the function                      */</span>
<span class="line-modified">1185   /*      @FT_Has_PS_Glyph_Names when needed.                              */</span>
<span class="line-modified">1186   /*                                                                       */</span>
<span class="line-modified">1187   /*    FT_FACE_FLAG_EXTERNAL_STREAM ::                                    */</span>
<span class="line-modified">1188   /*      Used internally by FreeType to indicate that a face&#39;s stream was */</span>
<span class="line-modified">1189   /*      provided by the client application and should not be destroyed   */</span>
<span class="line-modified">1190   /*      when @FT_Done_Face is called.  Don&#39;t read or test this flag.     */</span>
<span class="line-modified">1191   /*                                                                       */</span>
<span class="line-modified">1192   /*    FT_FACE_FLAG_HINTER ::                                             */</span>
<span class="line-modified">1193   /*      The font driver has a hinting machine of its own.  For example,  */</span>
<span class="line-modified">1194   /*      with TrueType fonts, it makes sense to use data from the SFNT    */</span>
<span class="line-modified">1195   /*      `gasp&#39; table only if the native TrueType hinting engine (with    */</span>
<span class="line-modified">1196   /*      the bytecode interpreter) is available and active.               */</span>
<span class="line-modified">1197   /*                                                                       */</span>
<span class="line-modified">1198   /*    FT_FACE_FLAG_CID_KEYED ::                                          */</span>
<span class="line-modified">1199   /*      The face is CID-keyed.  In that case, the face is not accessed   */</span>
<span class="line-modified">1200   /*      by glyph indices but by CID values.  For subsetted CID-keyed     */</span>
<span class="line-modified">1201   /*      fonts this has the consequence that not all index values are a   */</span>
<span class="line-modified">1202   /*      valid argument to @FT_Load_Glyph.  Only the CID values for which */</span>
<span class="line-modified">1203   /*      corresponding glyphs in the subsetted font exist make            */</span>
<span class="line-modified">1204   /*      `FT_Load_Glyph&#39; return successfully; in all other cases you get  */</span>
<span class="line-modified">1205   /*      an `FT_Err_Invalid_Argument&#39; error.                              */</span>
<span class="line-modified">1206   /*                                                                       */</span>
<span class="line-modified">1207   /*      Note that CID-keyed fonts that are in an SFNT wrapper (this is,  */</span>
<span class="line-modified">1208   /*      all OpenType/CFF fonts) don&#39;t have this flag set since the       */</span>
<span class="line-modified">1209   /*      glyphs are accessed in the normal way (using contiguous          */</span>
<span class="line-modified">1210   /*      indices); the `CID-ness&#39; isn&#39;t visible to the application.       */</span>
<span class="line-modified">1211   /*                                                                       */</span>
<span class="line-modified">1212   /*    FT_FACE_FLAG_TRICKY ::                                             */</span>
<span class="line-modified">1213   /*      The face is `tricky&#39;, this is, it always needs the font format&#39;s */</span>
<span class="line-modified">1214   /*      native hinting engine to get a reasonable result.  A typical     */</span>
<span class="line-modified">1215   /*      example is the old Chinese font `mingli.ttf&#39; (but not            */</span>
<span class="line-modified">1216   /*      `mingliu.ttc&#39;) that uses TrueType bytecode instructions to move  */</span>
<span class="line-modified">1217   /*      and scale all of its subglyphs.                                  */</span>
<span class="line-modified">1218   /*                                                                       */</span>
<span class="line-modified">1219   /*      It is not possible to auto-hint such fonts using                 */</span>
<span class="line-modified">1220   /*      @FT_LOAD_FORCE_AUTOHINT; it will also ignore                     */</span>
<span class="line-modified">1221   /*      @FT_LOAD_NO_HINTING.  You have to set both @FT_LOAD_NO_HINTING   */</span>
<span class="line-modified">1222   /*      and @FT_LOAD_NO_AUTOHINT to really disable hinting; however, you */</span>
<span class="line-modified">1223   /*      probably never want this except for demonstration purposes.      */</span>
<span class="line-modified">1224   /*                                                                       */</span>
<span class="line-modified">1225   /*      Currently, there are about a dozen TrueType fonts in the list of */</span>
<span class="line-modified">1226   /*      tricky fonts; they are hard-coded in file `ttobjs.c&#39;.            */</span>
<span class="line-modified">1227   /*                                                                       */</span>
<span class="line-modified">1228   /*    FT_FACE_FLAG_COLOR ::                                              */</span>
<span class="line-modified">1229   /*      [Since 2.5.1] The face has color glyph tables.  To access color  */</span>
<span class="line-modified">1230   /*      glyphs use @FT_LOAD_COLOR.                                       */</span>
<span class="line-modified">1231   /*                                                                       */</span>
<span class="line-modified">1232   /*    FT_FACE_FLAG_VARIATION ::                                          */</span>
<span class="line-modified">1233   /*      [Since 2.9] Set if the current face (or named instance) has been */</span>
<span class="line-modified">1234   /*      altered with @FT_Set_MM_Design_Coordinates,                      */</span>
<span class="line-modified">1235   /*      @FT_Set_Var_Design_Coordinates, or                               */</span>
<span class="line-modified">1236   /*      @FT_Set_Var_Blend_Coordinates.  This flag is unset by a call to  */</span>
<span class="line-modified">1237   /*      @FT_Set_Named_Instance.                                          */</span>
<span class="line-removed">1238   /*                                                                       */</span>
1239 #define FT_FACE_FLAG_SCALABLE          ( 1L &lt;&lt;  0 )
1240 #define FT_FACE_FLAG_FIXED_SIZES       ( 1L &lt;&lt;  1 )
1241 #define FT_FACE_FLAG_FIXED_WIDTH       ( 1L &lt;&lt;  2 )
1242 #define FT_FACE_FLAG_SFNT              ( 1L &lt;&lt;  3 )
1243 #define FT_FACE_FLAG_HORIZONTAL        ( 1L &lt;&lt;  4 )
1244 #define FT_FACE_FLAG_VERTICAL          ( 1L &lt;&lt;  5 )
1245 #define FT_FACE_FLAG_KERNING           ( 1L &lt;&lt;  6 )
1246 #define FT_FACE_FLAG_FAST_GLYPHS       ( 1L &lt;&lt;  7 )
1247 #define FT_FACE_FLAG_MULTIPLE_MASTERS  ( 1L &lt;&lt;  8 )
1248 #define FT_FACE_FLAG_GLYPH_NAMES       ( 1L &lt;&lt;  9 )
1249 #define FT_FACE_FLAG_EXTERNAL_STREAM   ( 1L &lt;&lt; 10 )
1250 #define FT_FACE_FLAG_HINTER            ( 1L &lt;&lt; 11 )
1251 #define FT_FACE_FLAG_CID_KEYED         ( 1L &lt;&lt; 12 )
1252 #define FT_FACE_FLAG_TRICKY            ( 1L &lt;&lt; 13 )
1253 #define FT_FACE_FLAG_COLOR             ( 1L &lt;&lt; 14 )
1254 #define FT_FACE_FLAG_VARIATION         ( 1L &lt;&lt; 15 )
1255 
1256 
<span class="line-modified">1257   /*************************************************************************</span>
1258    *
1259    * @macro:
<span class="line-modified">1260    *   FT_HAS_HORIZONTAL( face )</span>
1261    *
1262    * @description:
<span class="line-modified">1263    *   A macro that returns true whenever a face object contains</span>
<span class="line-modified">1264    *   horizontal metrics (this is true for all font formats though).</span>
1265    *
1266    * @also:
1267    *   @FT_HAS_VERTICAL can be used to check for vertical metrics.
1268    *
1269    */
1270 #define FT_HAS_HORIZONTAL( face ) \
1271           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_HORIZONTAL )
1272 
1273 
<span class="line-modified">1274   /*************************************************************************</span>
1275    *
1276    * @macro:
<span class="line-modified">1277    *   FT_HAS_VERTICAL( face )</span>
1278    *
1279    * @description:
1280    *   A macro that returns true whenever a face object contains real
1281    *   vertical metrics (and not only synthesized ones).
1282    *
1283    */
1284 #define FT_HAS_VERTICAL( face ) \
1285           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VERTICAL )
1286 
1287 
<span class="line-modified">1288   /*************************************************************************</span>
1289    *
1290    * @macro:
<span class="line-modified">1291    *   FT_HAS_KERNING( face )</span>
1292    *
1293    * @description:
<span class="line-modified">1294    *   A macro that returns true whenever a face object contains kerning</span>
<span class="line-modified">1295    *   data that can be accessed with @FT_Get_Kerning.</span>
1296    *
1297    */
1298 #define FT_HAS_KERNING( face ) \
1299           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_KERNING )
1300 
1301 
<span class="line-modified">1302   /*************************************************************************</span>
1303    *
1304    * @macro:
<span class="line-modified">1305    *   FT_IS_SCALABLE( face )</span>
1306    *
1307    * @description:
1308    *   A macro that returns true whenever a face object contains a scalable
<span class="line-modified">1309    *   font face (true for TrueType, Type~1, Type~42, CID, OpenType/CFF,</span>
<span class="line-modified">1310    *   and PFR font formats).</span>
1311    *
1312    */
1313 #define FT_IS_SCALABLE( face ) \
1314           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SCALABLE )
1315 
1316 
<span class="line-modified">1317   /*************************************************************************</span>
1318    *
1319    * @macro:
<span class="line-modified">1320    *   FT_IS_SFNT( face )</span>
1321    *
1322    * @description:
<span class="line-modified">1323    *   A macro that returns true whenever a face object contains a font</span>
<span class="line-modified">1324    *   whose format is based on the SFNT storage scheme.  This usually</span>
<span class="line-modified">1325    *   means: TrueType fonts, OpenType fonts, as well as SFNT-based embedded</span>
<span class="line-modified">1326    *   bitmap fonts.</span>
1327    *
1328    *   If this macro is true, all functions defined in @FT_SFNT_NAMES_H and
1329    *   @FT_TRUETYPE_TABLES_H are available.
1330    *
1331    */
1332 #define FT_IS_SFNT( face ) \
1333           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SFNT )
1334 
1335 
<span class="line-modified">1336   /*************************************************************************</span>
1337    *
1338    * @macro:
<span class="line-modified">1339    *   FT_IS_FIXED_WIDTH( face )</span>
1340    *
1341    * @description:
1342    *   A macro that returns true whenever a face object contains a font face
<span class="line-modified">1343    *   that contains fixed-width (or `monospace&#39;, `fixed-pitch&#39;, etc.)</span>
1344    *   glyphs.
1345    *
1346    */
1347 #define FT_IS_FIXED_WIDTH( face ) \
1348           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_WIDTH )
1349 
1350 
<span class="line-modified">1351   /*************************************************************************</span>
1352    *
1353    * @macro:
<span class="line-modified">1354    *   FT_HAS_FIXED_SIZES( face )</span>
1355    *
1356    * @description:
1357    *   A macro that returns true whenever a face object contains some
<span class="line-modified">1358    *   embedded bitmaps.  See the `available_sizes&#39; field of the</span>
<span class="line-modified">1359    *   @FT_FaceRec structure.</span>
1360    *
1361    */
1362 #define FT_HAS_FIXED_SIZES( face ) \
1363           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_SIZES )
1364 
1365 
<span class="line-modified">1366   /*************************************************************************</span>
1367    *
1368    * @macro:
<span class="line-modified">1369    *   FT_HAS_FAST_GLYPHS( face )</span>
1370    *
1371    * @description:
1372    *   Deprecated.
1373    *
1374    */
1375 #define FT_HAS_FAST_GLYPHS( face )  0
1376 
1377 
<span class="line-modified">1378   /*************************************************************************</span>
1379    *
1380    * @macro:
<span class="line-modified">1381    *   FT_HAS_GLYPH_NAMES( face )</span>
1382    *
1383    * @description:
1384    *   A macro that returns true whenever a face object contains some glyph
1385    *   names that can be accessed through @FT_Get_Glyph_Name.
1386    *
1387    */
1388 #define FT_HAS_GLYPH_NAMES( face ) \
1389           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_GLYPH_NAMES )
1390 
1391 
<span class="line-modified">1392   /*************************************************************************</span>
1393    *
1394    * @macro:
<span class="line-modified">1395    *   FT_HAS_MULTIPLE_MASTERS( face )</span>
1396    *
1397    * @description:
1398    *   A macro that returns true whenever a face object contains some
1399    *   multiple masters.  The functions provided by @FT_MULTIPLE_MASTERS_H
1400    *   are then available to choose the exact design you want.
1401    *
1402    */
1403 #define FT_HAS_MULTIPLE_MASTERS( face ) \
1404           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_MULTIPLE_MASTERS )
1405 
1406 
<span class="line-modified">1407   /*************************************************************************</span>
1408    *
1409    * @macro:
<span class="line-modified">1410    *   FT_IS_NAMED_INSTANCE( face )</span>
1411    *
1412    * @description:
1413    *   A macro that returns true whenever a face object is a named instance
1414    *   of a GX or OpenType variation font.
1415    *
1416    *   [Since 2.9] Changing the design coordinates with
1417    *   @FT_Set_Var_Design_Coordinates or @FT_Set_Var_Blend_Coordinates does
1418    *   not influence the return value of this macro (only
1419    *   @FT_Set_Named_Instance does that).
1420    *
1421    * @since:
1422    *   2.7
1423    *
1424    */
1425 #define FT_IS_NAMED_INSTANCE( face ) \
1426           ( (face)-&gt;face_index &amp; 0x7FFF0000L )
1427 
1428 
<span class="line-modified">1429   /*************************************************************************</span>
1430    *
1431    * @macro:
<span class="line-modified">1432    *   FT_IS_VARIATION( face )</span>
1433    *
1434    * @description:
<span class="line-modified">1435    *   A macro that returns true whenever a face object has been altered</span>
<span class="line-modified">1436    *   by @FT_Set_MM_Design_Coordinates, @FT_Set_Var_Design_Coordinates, or</span>
1437    *   @FT_Set_Var_Blend_Coordinates.
1438    *
1439    * @since:
1440    *   2.9
1441    *
1442    */
1443 #define FT_IS_VARIATION( face ) \
1444           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VARIATION )
1445 
1446 
<span class="line-modified">1447   /*************************************************************************</span>
1448    *
1449    * @macro:
<span class="line-modified">1450    *   FT_IS_CID_KEYED( face )</span>
1451    *
1452    * @description:
1453    *   A macro that returns true whenever a face object contains a CID-keyed
<span class="line-modified">1454    *   font.  See the discussion of @FT_FACE_FLAG_CID_KEYED for more</span>
<span class="line-removed">1455    *   details.</span>
1456    *
1457    *   If this macro is true, all functions defined in @FT_CID_H are
1458    *   available.
1459    *
1460    */
1461 #define FT_IS_CID_KEYED( face ) \
1462           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_CID_KEYED )
1463 
1464 
<span class="line-modified">1465   /*************************************************************************</span>
1466    *
1467    * @macro:
<span class="line-modified">1468    *   FT_IS_TRICKY( face )</span>
1469    *
1470    * @description:
<span class="line-modified">1471    *   A macro that returns true whenever a face represents a `tricky&#39; font.</span>
1472    *   See the discussion of @FT_FACE_FLAG_TRICKY for more details.
1473    *
1474    */
1475 #define FT_IS_TRICKY( face ) \
1476           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_TRICKY )
1477 
1478 
<span class="line-modified">1479   /*************************************************************************</span>
1480    *
1481    * @macro:
<span class="line-modified">1482    *   FT_HAS_COLOR( face )</span>
1483    *
1484    * @description:
<span class="line-modified">1485    *   A macro that returns true whenever a face object contains</span>
<span class="line-modified">1486    *   tables for color glyphs.</span>
1487    *
1488    * @since:
1489    *   2.5.1
1490    *
1491    */
1492 #define FT_HAS_COLOR( face ) \
1493           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_COLOR )
1494 
1495 
<span class="line-modified">1496   /*************************************************************************/</span>
<span class="line-modified">1497   /*                                                                       */</span>
<span class="line-modified">1498   /* &lt;Const&gt;                                                               */</span>
<span class="line-modified">1499   /*    FT_STYLE_FLAG_XXX                                                  */</span>
<span class="line-modified">1500   /*                                                                       */</span>
<span class="line-modified">1501   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1502   /*    A list of bit flags to indicate the style of a given face.  These  */</span>
<span class="line-modified">1503   /*    are used in the `style_flags&#39; field of @FT_FaceRec.                */</span>
<span class="line-modified">1504   /*                                                                       */</span>
<span class="line-modified">1505   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">1506   /*    FT_STYLE_FLAG_ITALIC ::                                            */</span>
<span class="line-modified">1507   /*      The face style is italic or oblique.                             */</span>
<span class="line-modified">1508   /*                                                                       */</span>
<span class="line-modified">1509   /*    FT_STYLE_FLAG_BOLD ::                                              */</span>
<span class="line-modified">1510   /*      The face is bold.                                                */</span>
<span class="line-modified">1511   /*                                                                       */</span>
<span class="line-modified">1512   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1513   /*    The style information as provided by FreeType is very basic.  More */</span>
<span class="line-modified">1514   /*    details are beyond the scope and should be done on a higher level  */</span>
<span class="line-modified">1515   /*    (for example, by analyzing various fields of the `OS/2&#39; table in   */</span>
<span class="line-modified">1516   /*    SFNT based fonts).                                                 */</span>
<span class="line-modified">1517   /*                                                                       */</span>
1518 #define FT_STYLE_FLAG_ITALIC  ( 1 &lt;&lt; 0 )
1519 #define FT_STYLE_FLAG_BOLD    ( 1 &lt;&lt; 1 )
1520 
1521 
<span class="line-modified">1522   /*************************************************************************/</span>
<span class="line-modified">1523   /*                                                                       */</span>
<span class="line-modified">1524   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">1525   /*    FT_Size_Internal                                                   */</span>
<span class="line-modified">1526   /*                                                                       */</span>
<span class="line-modified">1527   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1528   /*    An opaque handle to an `FT_Size_InternalRec&#39; structure, used to    */</span>
<span class="line-modified">1529   /*    model private data of a given @FT_Size object.                     */</span>
<span class="line-modified">1530   /*                                                                       */</span>
1531   typedef struct FT_Size_InternalRec_*  FT_Size_Internal;
1532 
1533 
<span class="line-modified">1534   /*************************************************************************/</span>
<span class="line-modified">1535   /*                                                                       */</span>
<span class="line-modified">1536   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">1537   /*    FT_Size_Metrics                                                    */</span>
<span class="line-modified">1538   /*                                                                       */</span>
<span class="line-modified">1539   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1540   /*    The size metrics structure gives the metrics of a size object.     */</span>
<span class="line-modified">1541   /*                                                                       */</span>
<span class="line-modified">1542   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">1543   /*    x_ppem       :: The width of the scaled EM square in pixels, hence */</span>
<span class="line-modified">1544   /*                    the term `ppem&#39; (pixels per EM).  It is also       */</span>
<span class="line-modified">1545   /*                    referred to as `nominal width&#39;.                    */</span>
<span class="line-modified">1546   /*                                                                       */</span>
<span class="line-modified">1547   /*    y_ppem       :: The height of the scaled EM square in pixels,      */</span>
<span class="line-modified">1548   /*                    hence the term `ppem&#39; (pixels per EM).  It is also */</span>
<span class="line-modified">1549   /*                    referred to as `nominal height&#39;.                   */</span>
<span class="line-modified">1550   /*                                                                       */</span>
<span class="line-modified">1551   /*    x_scale      :: A 16.16 fractional scaling value to convert        */</span>
<span class="line-modified">1552   /*                    horizontal metrics from font units to 26.6         */</span>
<span class="line-modified">1553   /*                    fractional pixels.  Only relevant for scalable     */</span>
<span class="line-modified">1554   /*                    font formats.                                      */</span>
<span class="line-modified">1555   /*                                                                       */</span>
<span class="line-modified">1556   /*    y_scale      :: A 16.16 fractional scaling value to convert        */</span>
<span class="line-modified">1557   /*                    vertical metrics from font units to 26.6           */</span>
<span class="line-modified">1558   /*                    fractional pixels.  Only relevant for scalable     */</span>
<span class="line-modified">1559   /*                    font formats.                                      */</span>
<span class="line-modified">1560   /*                                                                       */</span>
<span class="line-modified">1561   /*    ascender     :: The ascender in 26.6 fractional pixels, rounded up */</span>
<span class="line-modified">1562   /*                    to an integer value.  See @FT_FaceRec for the      */</span>
<span class="line-modified">1563   /*                    details.                                           */</span>
<span class="line-modified">1564   /*                                                                       */</span>
<span class="line-modified">1565   /*    descender    :: The descender in 26.6 fractional pixels, rounded   */</span>
<span class="line-modified">1566   /*                    down to an integer value.  See @FT_FaceRec for the */</span>
<span class="line-modified">1567   /*                    details.                                           */</span>
<span class="line-modified">1568   /*                                                                       */</span>
<span class="line-modified">1569   /*    height       :: The height in 26.6 fractional pixels, rounded to   */</span>
<span class="line-modified">1570   /*                    an integer value.  See @FT_FaceRec for the         */</span>
<span class="line-modified">1571   /*                    details.                                           */</span>
<span class="line-modified">1572   /*                                                                       */</span>
<span class="line-modified">1573   /*    max_advance  :: The maximum advance width in 26.6 fractional       */</span>
<span class="line-modified">1574   /*                    pixels, rounded to an integer value.  See          */</span>
<span class="line-modified">1575   /*                    @FT_FaceRec for the details.                       */</span>
<span class="line-modified">1576   /*                                                                       */</span>
<span class="line-modified">1577   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1578   /*    The scaling values, if relevant, are determined first during a     */</span>
<span class="line-modified">1579   /*    size changing operation.  The remaining fields are then set by the */</span>
<span class="line-modified">1580   /*    driver.  For scalable formats, they are usually set to scaled      */</span>
<span class="line-modified">1581   /*    values of the corresponding fields in @FT_FaceRec.  Some values    */</span>
<span class="line-modified">1582   /*    like ascender or descender are rounded for historical reasons;     */</span>
<span class="line-modified">1583   /*    more precise values (for outline fonts) can be derived by scaling  */</span>
<span class="line-modified">1584   /*    the corresponding @FT_FaceRec values manually, with code similar   */</span>
<span class="line-modified">1585   /*    to the following.                                                  */</span>
<span class="line-modified">1586   /*                                                                       */</span>
<span class="line-modified">1587   /*    {                                                                  */</span>
<span class="line-modified">1588   /*      scaled_ascender = FT_MulFix( face-&gt;ascender,                     */</span>
<span class="line-modified">1589   /*                                   size_metrics-&gt;y_scale );            */</span>
<span class="line-modified">1590   /*    }                                                                  */</span>
<span class="line-modified">1591   /*                                                                       */</span>
<span class="line-modified">1592   /*    Note that due to glyph hinting and the selected rendering mode     */</span>
<span class="line-modified">1593   /*    these values are usually not exact; consequently, they must be     */</span>
<span class="line-modified">1594   /*    treated as unreliable with an error margin of at least one pixel!  */</span>
<span class="line-modified">1595   /*                                                                       */</span>
<span class="line-modified">1596   /*    Indeed, the only way to get the exact metrics is to render _all_   */</span>
<span class="line-modified">1597   /*    glyphs.  As this would be a definite performance hit, it is up to  */</span>
<span class="line-modified">1598   /*    client applications to perform such computations.                  */</span>
<span class="line-modified">1599   /*                                                                       */</span>
<span class="line-modified">1600   /*    The `FT_Size_Metrics&#39; structure is valid for bitmap fonts also.    */</span>
<span class="line-modified">1601   /*                                                                       */</span>
<span class="line-modified">1602   /*                                                                       */</span>
<span class="line-modified">1603   /*    *TrueType* *fonts* *with* *native* *bytecode* *hinting*            */</span>
<span class="line-modified">1604   /*                                                                       */</span>
<span class="line-modified">1605   /*    All applications that handle TrueType fonts with native hinting    */</span>
<span class="line-modified">1606   /*    must be aware that TTFs expect different rounding of vertical font */</span>
<span class="line-modified">1607   /*    dimensions.  The application has to cater for this, especially if  */</span>
<span class="line-modified">1608   /*    it wants to rely on a TTF&#39;s vertical data (for example, to         */</span>
<span class="line-modified">1609   /*    properly align box characters vertically).                         */</span>
<span class="line-modified">1610   /*                                                                       */</span>
<span class="line-modified">1611   /*    Only the application knows _in_ _advance_ that it is going to use  */</span>
<span class="line-modified">1612   /*    native hinting for TTFs!  FreeType, on the other hand, selects the */</span>
<span class="line-modified">1613   /*    hinting mode not at the time of creating an @FT_Size object but    */</span>
<span class="line-modified">1614   /*    much later, namely while calling @FT_Load_Glyph.                   */</span>
<span class="line-modified">1615   /*                                                                       */</span>
<span class="line-modified">1616   /*    Here is some pseudo code that illustrates a possible solution.     */</span>
<span class="line-modified">1617   /*                                                                       */</span>
<span class="line-modified">1618   /*    {                                                                  */</span>
<span class="line-modified">1619   /*      font_format = FT_Get_Font_Format( face );                        */</span>
<span class="line-modified">1620   /*                                                                       */</span>
<span class="line-modified">1621   /*      if ( !strcmp( font_format, &quot;TrueType&quot; ) &amp;&amp;                       */</span>
<span class="line-modified">1622   /*           do_native_bytecode_hinting         )                        */</span>
<span class="line-modified">1623   /*      {                                                                */</span>
<span class="line-modified">1624   /*        ascender  = ROUND( FT_MulFix( face-&gt;ascender,                  */</span>
<span class="line-modified">1625   /*                                      size_metrics-&gt;y_scale ) );       */</span>
<span class="line-modified">1626   /*        descender = ROUND( FT_MulFix( face-&gt;descender,                 */</span>
<span class="line-modified">1627   /*                                      size_metrics-&gt;y_scale ) );       */</span>
<span class="line-modified">1628   /*      }                                                                */</span>
<span class="line-modified">1629   /*      else                                                             */</span>
<span class="line-modified">1630   /*      {                                                                */</span>
<span class="line-modified">1631   /*        ascender  = size_metrics-&gt;ascender;                            */</span>
<span class="line-modified">1632   /*        descender = size_metrics-&gt;descender;                           */</span>
<span class="line-modified">1633   /*      }                                                                */</span>
<span class="line-modified">1634   /*                                                                       */</span>
<span class="line-modified">1635   /*      height      = size_metrics-&gt;height;                              */</span>
<span class="line-modified">1636   /*      max_advance = size_metrics-&gt;max_advance;                         */</span>
<span class="line-modified">1637   /*    }                                                                  */</span>
<span class="line-removed">1638   /*                                                                       */</span>
1639   typedef struct  FT_Size_Metrics_
1640   {
1641     FT_UShort  x_ppem;      /* horizontal pixels per EM               */
1642     FT_UShort  y_ppem;      /* vertical pixels per EM                 */
1643 
1644     FT_Fixed   x_scale;     /* scaling values used to convert font    */
1645     FT_Fixed   y_scale;     /* units to 26.6 fractional pixels        */
1646 
1647     FT_Pos     ascender;    /* ascender in 26.6 frac. pixels          */
1648     FT_Pos     descender;   /* descender in 26.6 frac. pixels         */
1649     FT_Pos     height;      /* text height in 26.6 frac. pixels       */
1650     FT_Pos     max_advance; /* max horizontal advance, in 26.6 pixels */
1651 
1652   } FT_Size_Metrics;
1653 
1654 
<span class="line-modified">1655   /*************************************************************************/</span>
<span class="line-modified">1656   /*                                                                       */</span>
<span class="line-modified">1657   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">1658   /*    FT_SizeRec                                                         */</span>
<span class="line-modified">1659   /*                                                                       */</span>
<span class="line-modified">1660   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1661   /*    FreeType root size class structure.  A size object models a face   */</span>
<span class="line-modified">1662   /*    object at a given size.                                            */</span>
<span class="line-modified">1663   /*                                                                       */</span>
<span class="line-modified">1664   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">1665   /*    face    :: Handle to the parent face object.                       */</span>
<span class="line-modified">1666   /*                                                                       */</span>
<span class="line-modified">1667   /*    generic :: A typeless pointer, unused by the FreeType library or   */</span>
<span class="line-modified">1668   /*               any of its drivers.  It can be used by client           */</span>
<span class="line-modified">1669   /*               applications to link their own data to each size        */</span>
<span class="line-modified">1670   /*               object.                                                 */</span>
<span class="line-modified">1671   /*                                                                       */</span>
<span class="line-modified">1672   /*    metrics :: Metrics for this size object.  This field is read-only. */</span>
<span class="line-modified">1673   /*                                                                       */</span>


1674   typedef struct  FT_SizeRec_
1675   {
1676     FT_Face           face;      /* parent face object              */
1677     FT_Generic        generic;   /* generic pointer for client uses */
1678     FT_Size_Metrics   metrics;   /* size metrics                    */
1679     FT_Size_Internal  internal;
1680 
1681   } FT_SizeRec;
1682 
1683 
<span class="line-modified">1684   /*************************************************************************/</span>
<span class="line-modified">1685   /*                                                                       */</span>
<span class="line-modified">1686   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">1687   /*    FT_SubGlyph                                                        */</span>
<span class="line-modified">1688   /*                                                                       */</span>
<span class="line-modified">1689   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1690   /*    The subglyph structure is an internal object used to describe      */</span>
<span class="line-modified">1691   /*    subglyphs (for example, in the case of composites).                */</span>
<span class="line-modified">1692   /*                                                                       */</span>
<span class="line-modified">1693   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1694   /*    The subglyph implementation is not part of the high-level API,     */</span>
<span class="line-modified">1695   /*    hence the forward structure declaration.                           */</span>
<span class="line-modified">1696   /*                                                                       */</span>
<span class="line-modified">1697   /*    You can however retrieve subglyph information with                 */</span>
<span class="line-modified">1698   /*    @FT_Get_SubGlyph_Info.                                             */</span>
<span class="line-modified">1699   /*                                                                       */</span>
1700   typedef struct FT_SubGlyphRec_*  FT_SubGlyph;
1701 
1702 
<span class="line-modified">1703   /*************************************************************************/</span>
<span class="line-modified">1704   /*                                                                       */</span>
<span class="line-modified">1705   /* &lt;Type&gt;                                                                */</span>
<span class="line-modified">1706   /*    FT_Slot_Internal                                                   */</span>
<span class="line-modified">1707   /*                                                                       */</span>
<span class="line-modified">1708   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1709   /*    An opaque handle to an `FT_Slot_InternalRec&#39; structure, used to    */</span>
<span class="line-modified">1710   /*    model private data of a given @FT_GlyphSlot object.                */</span>
<span class="line-modified">1711   /*                                                                       */</span>
1712   typedef struct FT_Slot_InternalRec_*  FT_Slot_Internal;
1713 
1714 
<span class="line-modified">1715   /*************************************************************************/</span>
<span class="line-modified">1716   /*                                                                       */</span>
<span class="line-modified">1717   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">1718   /*    FT_GlyphSlotRec                                                    */</span>
<span class="line-modified">1719   /*                                                                       */</span>
<span class="line-modified">1720   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1721   /*    FreeType root glyph slot class structure.  A glyph slot is a       */</span>
<span class="line-modified">1722   /*    container where individual glyphs can be loaded, be they in        */</span>
<span class="line-modified">1723   /*    outline or bitmap format.                                          */</span>
<span class="line-modified">1724   /*                                                                       */</span>
<span class="line-modified">1725   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">1726   /*    library           :: A handle to the FreeType library instance     */</span>
<span class="line-modified">1727   /*                         this slot belongs to.                         */</span>
<span class="line-modified">1728   /*                                                                       */</span>
<span class="line-modified">1729   /*    face              :: A handle to the parent face object.           */</span>
<span class="line-modified">1730   /*                                                                       */</span>
<span class="line-modified">1731   /*    next              :: In some cases (like some font tools), several */</span>
<span class="line-modified">1732   /*                         glyph slots per face object can be a good     */</span>
<span class="line-modified">1733   /*                         thing.  As this is rare, the glyph slots are  */</span>
<span class="line-modified">1734   /*                         listed through a direct, single-linked list   */</span>
<span class="line-modified">1735   /*                         using its `next&#39; field.                       */</span>
<span class="line-modified">1736   /*                                                                       */</span>
<span class="line-modified">1737   /*    generic           :: A typeless pointer unused by the FreeType     */</span>
<span class="line-modified">1738   /*                         library or any of its drivers.  It can be     */</span>
<span class="line-modified">1739   /*                         used by client applications to link their own */</span>
<span class="line-modified">1740   /*                         data to each glyph slot object.               */</span>
<span class="line-modified">1741   /*                                                                       */</span>
<span class="line-modified">1742   /*    metrics           :: The metrics of the last loaded glyph in the   */</span>
<span class="line-modified">1743   /*                         slot.  The returned values depend on the last */</span>
<span class="line-modified">1744   /*                         load flags (see the @FT_Load_Glyph API        */</span>
<span class="line-modified">1745   /*                         function) and can be expressed either in 26.6 */</span>
<span class="line-modified">1746   /*                         fractional pixels or font units.              */</span>
<span class="line-modified">1747   /*                                                                       */</span>
<span class="line-modified">1748   /*                         Note that even when the glyph image is        */</span>
<span class="line-modified">1749   /*                         transformed, the metrics are not.             */</span>
<span class="line-modified">1750   /*                                                                       */</span>
<span class="line-modified">1751   /*    linearHoriAdvance :: The advance width of the unhinted glyph.      */</span>
<span class="line-modified">1752   /*                         Its value is expressed in 16.16 fractional    */</span>
<span class="line-modified">1753   /*                         pixels, unless @FT_LOAD_LINEAR_DESIGN is set  */</span>
<span class="line-modified">1754   /*                         when loading the glyph.  This field can be    */</span>
<span class="line-modified">1755   /*                         important to perform correct WYSIWYG layout.  */</span>
<span class="line-modified">1756   /*                         Only relevant for outline glyphs.             */</span>
<span class="line-modified">1757   /*                                                                       */</span>
<span class="line-modified">1758   /*    linearVertAdvance :: The advance height of the unhinted glyph.     */</span>
<span class="line-modified">1759   /*                         Its value is expressed in 16.16 fractional    */</span>
<span class="line-modified">1760   /*                         pixels, unless @FT_LOAD_LINEAR_DESIGN is set  */</span>
<span class="line-modified">1761   /*                         when loading the glyph.  This field can be    */</span>
<span class="line-modified">1762   /*                         important to perform correct WYSIWYG layout.  */</span>
<span class="line-modified">1763   /*                         Only relevant for outline glyphs.             */</span>
<span class="line-modified">1764   /*                                                                       */</span>
<span class="line-modified">1765   /*    advance           :: This shorthand is, depending on               */</span>
<span class="line-modified">1766   /*                         @FT_LOAD_IGNORE_TRANSFORM, the transformed    */</span>
<span class="line-modified">1767   /*                         (hinted) advance width for the glyph, in 26.6 */</span>
<span class="line-modified">1768   /*                         fractional pixel format.  As specified with   */</span>
<span class="line-modified">1769   /*                         @FT_LOAD_VERTICAL_LAYOUT, it uses either the  */</span>
<span class="line-modified">1770   /*                         `horiAdvance&#39; or the `vertAdvance&#39; value of   */</span>
<span class="line-modified">1771   /*                         `metrics&#39; field.                              */</span>
<span class="line-modified">1772   /*                                                                       */</span>
<span class="line-modified">1773   /*    format            :: This field indicates the format of the image  */</span>
<span class="line-modified">1774   /*                         contained in the glyph slot.  Typically       */</span>
<span class="line-modified">1775   /*                         @FT_GLYPH_FORMAT_BITMAP,                      */</span>
<span class="line-modified">1776   /*                         @FT_GLYPH_FORMAT_OUTLINE, or                  */</span>
<span class="line-modified">1777   /*                         @FT_GLYPH_FORMAT_COMPOSITE, but other values  */</span>
<span class="line-modified">1778   /*                         are possible.                                 */</span>
<span class="line-modified">1779   /*                                                                       */</span>
<span class="line-modified">1780   /*    bitmap            :: This field is used as a bitmap descriptor.    */</span>
<span class="line-modified">1781   /*                         Note that the address and content of the      */</span>
<span class="line-modified">1782   /*                         bitmap buffer can change between calls of     */</span>
<span class="line-modified">1783   /*                         @FT_Load_Glyph and a few other functions.     */</span>
<span class="line-modified">1784   /*                                                                       */</span>
<span class="line-modified">1785   /*    bitmap_left       :: The bitmap&#39;s left bearing expressed in        */</span>
<span class="line-modified">1786   /*                         integer pixels.                               */</span>
<span class="line-modified">1787   /*                                                                       */</span>
<span class="line-modified">1788   /*    bitmap_top        :: The bitmap&#39;s top bearing expressed in integer */</span>
<span class="line-modified">1789   /*                         pixels.  This is the distance from the        */</span>
<span class="line-modified">1790   /*                         baseline to the top-most glyph scanline,      */</span>
<span class="line-modified">1791   /*                         upwards y~coordinates being *positive*.       */</span>
<span class="line-modified">1792   /*                                                                       */</span>
<span class="line-modified">1793   /*    outline           :: The outline descriptor for the current glyph  */</span>
<span class="line-modified">1794   /*                         image if its format is                        */</span>
<span class="line-modified">1795   /*                         @FT_GLYPH_FORMAT_OUTLINE.  Once a glyph is    */</span>
<span class="line-modified">1796   /*                         loaded, `outline&#39; can be transformed,         */</span>
<span class="line-modified">1797   /*                         distorted, emboldened, etc.  However, it must */</span>
<span class="line-modified">1798   /*                         not be freed.                                 */</span>
<span class="line-modified">1799   /*                                                                       */</span>
<span class="line-modified">1800   /*    num_subglyphs     :: The number of subglyphs in a composite glyph. */</span>
<span class="line-modified">1801   /*                         This field is only valid for the composite    */</span>
<span class="line-modified">1802   /*                         glyph format that should normally only be     */</span>
<span class="line-modified">1803   /*                         loaded with the @FT_LOAD_NO_RECURSE flag.     */</span>
<span class="line-modified">1804   /*                                                                       */</span>
<span class="line-modified">1805   /*    subglyphs         :: An array of subglyph descriptors for          */</span>
<span class="line-modified">1806   /*                         composite glyphs.  There are `num_subglyphs&#39;  */</span>
<span class="line-modified">1807   /*                         elements in there.  Currently internal to     */</span>
<span class="line-modified">1808   /*                         FreeType.                                     */</span>
<span class="line-modified">1809   /*                                                                       */</span>
<span class="line-modified">1810   /*    control_data      :: Certain font drivers can also return the      */</span>
<span class="line-modified">1811   /*                         control data for a given glyph image (e.g.    */</span>
<span class="line-modified">1812   /*                         TrueType bytecode, Type~1 charstrings, etc.). */</span>
<span class="line-modified">1813   /*                         This field is a pointer to such data; it is   */</span>
<span class="line-modified">1814   /*                         currently internal to FreeType.               */</span>
<span class="line-modified">1815   /*                                                                       */</span>
<span class="line-modified">1816   /*    control_len       :: This is the length in bytes of the control    */</span>
<span class="line-modified">1817   /*                         data.  Currently internal to FreeType.        */</span>
<span class="line-modified">1818   /*                                                                       */</span>
<span class="line-modified">1819   /*    other             :: Reserved.                                     */</span>
<span class="line-modified">1820   /*                                                                       */</span>
<span class="line-modified">1821   /*    lsb_delta         :: The difference between hinted and unhinted    */</span>
<span class="line-modified">1822   /*                         left side bearing while auto-hinting is       */</span>
<span class="line-modified">1823   /*                         active.  Zero otherwise.                      */</span>
<span class="line-modified">1824   /*                                                                       */</span>
<span class="line-modified">1825   /*    rsb_delta         :: The difference between hinted and unhinted    */</span>
<span class="line-modified">1826   /*                         right side bearing while auto-hinting is      */</span>
<span class="line-modified">1827   /*                         active.  Zero otherwise.                      */</span>
<span class="line-modified">1828   /*                                                                       */</span>
<span class="line-modified">1829   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1830   /*    If @FT_Load_Glyph is called with default flags (see                */</span>
<span class="line-modified">1831   /*    @FT_LOAD_DEFAULT) the glyph image is loaded in the glyph slot in   */</span>
<span class="line-modified">1832   /*    its native format (e.g., an outline glyph for TrueType and Type~1  */</span>
<span class="line-modified">1833   /*    formats).  [Since 2.9] The prospective bitmap metrics are          */</span>
<span class="line-modified">1834   /*    calculated according to @FT_LOAD_TARGET_XXX and other flags even   */</span>
<span class="line-modified">1835   /*    for the outline glyph, even if @FT_LOAD_RENDER is not set.         */</span>
<span class="line-modified">1836   /*                                                                       */</span>
<span class="line-modified">1837   /*    This image can later be converted into a bitmap by calling         */</span>
<span class="line-modified">1838   /*    @FT_Render_Glyph.  This function searches the current renderer for */</span>
<span class="line-modified">1839   /*    the native image&#39;s format, then invokes it.                        */</span>
<span class="line-modified">1840   /*                                                                       */</span>
<span class="line-modified">1841   /*    The renderer is in charge of transforming the native image through */</span>
<span class="line-modified">1842   /*    the slot&#39;s face transformation fields, then converting it into a   */</span>
<span class="line-modified">1843   /*    bitmap that is returned in `slot-&gt;bitmap&#39;.                         */</span>
<span class="line-modified">1844   /*                                                                       */</span>
<span class="line-modified">1845   /*    Note that `slot-&gt;bitmap_left&#39; and `slot-&gt;bitmap_top&#39; are also used */</span>
<span class="line-modified">1846   /*    to specify the position of the bitmap relative to the current pen  */</span>
<span class="line-modified">1847   /*    position (e.g., coordinates (0,0) on the baseline).  Of course,    */</span>
<span class="line-modified">1848   /*    `slot-&gt;format&#39; is also changed to @FT_GLYPH_FORMAT_BITMAP.         */</span>
<span class="line-modified">1849   /*                                                                       */</span>
<span class="line-modified">1850   /*    Here is a small pseudo code fragment that shows how to use         */</span>
<span class="line-modified">1851   /*    `lsb_delta&#39; and `rsb_delta&#39; to do fractional positioning of        */</span>
<span class="line-modified">1852   /*    glyphs:                                                            */</span>
<span class="line-modified">1853   /*                                                                       */</span>
<span class="line-modified">1854   /*    {                                                                  */</span>
<span class="line-modified">1855   /*      FT_GlyphSlot  slot     = face-&gt;glyph;                            */</span>
<span class="line-modified">1856   /*      FT_Pos        origin_x = 0;                                      */</span>
<span class="line-modified">1857   /*                                                                       */</span>
<span class="line-modified">1858   /*                                                                       */</span>
<span class="line-modified">1859   /*      for all glyphs do                                                */</span>
<span class="line-modified">1860   /*        &lt;load glyph with `FT_Load_Glyph&#39;&gt;                              */</span>
<span class="line-modified">1861   /*                                                                       */</span>
<span class="line-modified">1862   /*        FT_Outline_Translate( slot-&gt;outline, origin_x &amp; 63, 0 );       */</span>
<span class="line-modified">1863   /*                                                                       */</span>
<span class="line-modified">1864   /*        &lt;save glyph image, or render glyph, or ...&gt;                    */</span>
<span class="line-modified">1865   /*                                                                       */</span>
<span class="line-modified">1866   /*        &lt;compute kern between current and next glyph                   */</span>
<span class="line-modified">1867   /*         and add it to `origin_x&#39;&gt;                                     */</span>
<span class="line-modified">1868   /*                                                                       */</span>
<span class="line-modified">1869   /*        origin_x += slot-&gt;advance.x;                                   */</span>
<span class="line-modified">1870   /*        origin_x += slot-&gt;rsb_delta - slot-&gt;lsb_delta;                 */</span>
<span class="line-modified">1871   /*      endfor                                                           */</span>
<span class="line-modified">1872   /*    }                                                                  */</span>
<span class="line-modified">1873   /*                                                                       */</span>
<span class="line-modified">1874   /*    Here is another small pseudo code fragment that shows how to use   */</span>
<span class="line-modified">1875   /*    `lsb_delta&#39; and `rsb_delta&#39; to improve integer positioning of      */</span>
<span class="line-modified">1876   /*    glyphs:                                                            */</span>
<span class="line-modified">1877   /*                                                                       */</span>
<span class="line-modified">1878   /*    {                                                                  */</span>
<span class="line-modified">1879   /*      FT_GlyphSlot  slot           = face-&gt;glyph;                      */</span>
<span class="line-modified">1880   /*      FT_Pos        origin_x       = 0;                                */</span>
<span class="line-modified">1881   /*      FT_Pos        prev_rsb_delta = 0;                                */</span>
<span class="line-modified">1882   /*                                                                       */</span>
<span class="line-modified">1883   /*                                                                       */</span>
<span class="line-modified">1884   /*      for all glyphs do                                                */</span>
<span class="line-modified">1885   /*        &lt;compute kern between current and previous glyph               */</span>
<span class="line-modified">1886   /*         and add it to `origin_x&#39;&gt;                                     */</span>
<span class="line-modified">1887   /*                                                                       */</span>
<span class="line-modified">1888   /*        &lt;load glyph with `FT_Load_Glyph&#39;&gt;                              */</span>
<span class="line-modified">1889   /*                                                                       */</span>
<span class="line-modified">1890   /*        if ( prev_rsb_delta - slot-&gt;lsb_delta &gt;  32 )                  */</span>
<span class="line-modified">1891   /*          origin_x -= 64;                                              */</span>
<span class="line-modified">1892   /*        else if ( prev_rsb_delta - slot-&gt;lsb_delta &lt; -31 )             */</span>
<span class="line-modified">1893   /*          origin_x += 64;                                              */</span>
<span class="line-modified">1894   /*                                                                       */</span>
<span class="line-modified">1895   /*        prev_rsb_delta = slot-&gt;rsb_delta;                              */</span>
<span class="line-modified">1896   /*                                                                       */</span>
<span class="line-modified">1897   /*        &lt;save glyph image, or render glyph, or ...&gt;                    */</span>
<span class="line-modified">1898   /*                                                                       */</span>
<span class="line-modified">1899   /*        origin_x += slot-&gt;advance.x;                                   */</span>
<span class="line-modified">1900   /*      endfor                                                           */</span>
<span class="line-modified">1901   /*    }                                                                  */</span>
<span class="line-modified">1902   /*                                                                       */</span>
<span class="line-modified">1903   /*    If you use strong auto-hinting, you *must* apply these delta       */</span>
<span class="line-modified">1904   /*    values!  Otherwise you will experience far too large inter-glyph   */</span>
<span class="line-modified">1905   /*    spacing at small rendering sizes in most cases.  Note that it      */</span>
<span class="line-modified">1906   /*    doesn&#39;t harm to use the above code for other hinting modes also,   */</span>
<span class="line-modified">1907   /*    since the delta values are zero then.                              */</span>
<span class="line-modified">1908   /*                                                                       */</span>




1909   typedef struct  FT_GlyphSlotRec_
1910   {
1911     FT_Library        library;
1912     FT_Face           face;
1913     FT_GlyphSlot      next;
<span class="line-modified">1914     FT_UInt           reserved;       /* retained for binary compatibility */</span>
1915     FT_Generic        generic;
1916 
1917     FT_Glyph_Metrics  metrics;
1918     FT_Fixed          linearHoriAdvance;
1919     FT_Fixed          linearVertAdvance;
1920     FT_Vector         advance;
1921 
1922     FT_Glyph_Format   format;
1923 
1924     FT_Bitmap         bitmap;
1925     FT_Int            bitmap_left;
1926     FT_Int            bitmap_top;
1927 
1928     FT_Outline        outline;
1929 
1930     FT_UInt           num_subglyphs;
1931     FT_SubGlyph       subglyphs;
1932 
1933     void*             control_data;
1934     long              control_len;
1935 
1936     FT_Pos            lsb_delta;
1937     FT_Pos            rsb_delta;
1938 
1939     void*             other;
1940 
1941     FT_Slot_Internal  internal;
1942 
1943   } FT_GlyphSlotRec;
1944 
1945 
1946   /*************************************************************************/
1947   /*************************************************************************/
1948   /*                                                                       */
1949   /*                         F U N C T I O N S                             */
1950   /*                                                                       */
1951   /*************************************************************************/
1952   /*************************************************************************/
1953 
1954 
<span class="line-modified">1955   /*************************************************************************/</span>
<span class="line-modified">1956   /*                                                                       */</span>
<span class="line-modified">1957   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">1958   /*    FT_Init_FreeType                                                   */</span>
<span class="line-modified">1959   /*                                                                       */</span>
<span class="line-modified">1960   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1961   /*    Initialize a new FreeType library object.  The set of modules      */</span>
<span class="line-modified">1962   /*    that are registered by this function is determined at build time.  */</span>
<span class="line-modified">1963   /*                                                                       */</span>
<span class="line-modified">1964   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">1965   /*    alibrary :: A handle to a new library object.                      */</span>
<span class="line-modified">1966   /*                                                                       */</span>
<span class="line-modified">1967   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">1968   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">1969   /*                                                                       */</span>
<span class="line-modified">1970   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">1971   /*    In case you want to provide your own memory allocating routines,   */</span>
<span class="line-modified">1972   /*    use @FT_New_Library instead, followed by a call to                 */</span>
<span class="line-modified">1973   /*    @FT_Add_Default_Modules (or a series of calls to @FT_Add_Module)   */</span>
<span class="line-modified">1974   /*    and @FT_Set_Default_Properties.                                    */</span>
<span class="line-modified">1975   /*                                                                       */</span>
<span class="line-modified">1976   /*    See the documentation of @FT_Library and @FT_Face for              */</span>
<span class="line-modified">1977   /*    multi-threading issues.                                            */</span>
<span class="line-modified">1978   /*                                                                       */</span>
<span class="line-modified">1979   /*    If you need reference-counting (cf. @FT_Reference_Library), use    */</span>
<span class="line-modified">1980   /*    @FT_New_Library and @FT_Done_Library.                              */</span>
<span class="line-modified">1981   /*                                                                       */</span>
<span class="line-modified">1982   /*    If compilation option FT_CONFIG_OPTION_ENVIRONMENT_PROPERTIES is   */</span>
<span class="line-modified">1983   /*    set, this function reads the `FREETYPE_PROPERTIES&#39; environment     */</span>
<span class="line-modified">1984   /*    variable to control driver properties.  See section @properties    */</span>
<span class="line-modified">1985   /*    for more.                                                          */</span>
<span class="line-modified">1986   /*                                                                       */</span>

1987   FT_EXPORT( FT_Error )
1988   FT_Init_FreeType( FT_Library  *alibrary );
1989 
1990 
<span class="line-modified">1991   /*************************************************************************/</span>
<span class="line-modified">1992   /*                                                                       */</span>
<span class="line-modified">1993   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">1994   /*    FT_Done_FreeType                                                   */</span>
<span class="line-modified">1995   /*                                                                       */</span>
<span class="line-modified">1996   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">1997   /*    Destroy a given FreeType library object and all of its children,   */</span>
<span class="line-modified">1998   /*    including resources, drivers, faces, sizes, etc.                   */</span>
<span class="line-modified">1999   /*                                                                       */</span>
<span class="line-modified">2000   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2001   /*    library :: A handle to the target library object.                  */</span>
<span class="line-modified">2002   /*                                                                       */</span>
<span class="line-modified">2003   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2004   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2005   /*                                                                       */</span>

2006   FT_EXPORT( FT_Error )
2007   FT_Done_FreeType( FT_Library  library );
2008 
2009 
<span class="line-modified">2010   /*************************************************************************/</span>
<span class="line-modified">2011   /*                                                                       */</span>
<span class="line-modified">2012   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">2013   /*    FT_OPEN_XXX                                                        */</span>
<span class="line-modified">2014   /*                                                                       */</span>
<span class="line-modified">2015   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2016   /*    A list of bit field constants used within the `flags&#39; field of the */</span>
<span class="line-modified">2017   /*    @FT_Open_Args structure.                                           */</span>
<span class="line-modified">2018   /*                                                                       */</span>
<span class="line-modified">2019   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">2020   /*    FT_OPEN_MEMORY   :: This is a memory-based stream.                 */</span>
<span class="line-modified">2021   /*                                                                       */</span>
<span class="line-modified">2022   /*    FT_OPEN_STREAM   :: Copy the stream from the `stream&#39; field.       */</span>
<span class="line-modified">2023   /*                                                                       */</span>
<span class="line-modified">2024   /*    FT_OPEN_PATHNAME :: Create a new input stream from a C~path        */</span>
<span class="line-modified">2025   /*                        name.                                          */</span>
<span class="line-modified">2026   /*                                                                       */</span>
<span class="line-modified">2027   /*    FT_OPEN_DRIVER   :: Use the `driver&#39; field.                        */</span>
<span class="line-modified">2028   /*                                                                       */</span>
<span class="line-modified">2029   /*    FT_OPEN_PARAMS   :: Use the `num_params&#39; and `params&#39; fields.      */</span>
<span class="line-modified">2030   /*                                                                       */</span>
<span class="line-modified">2031   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2032   /*    The `FT_OPEN_MEMORY&#39;, `FT_OPEN_STREAM&#39;, and `FT_OPEN_PATHNAME&#39;     */</span>
<span class="line-modified">2033   /*    flags are mutually exclusive.                                      */</span>
<span class="line-modified">2034   /*                                                                       */</span>




2035 #define FT_OPEN_MEMORY    0x1
2036 #define FT_OPEN_STREAM    0x2
2037 #define FT_OPEN_PATHNAME  0x4
2038 #define FT_OPEN_DRIVER    0x8
2039 #define FT_OPEN_PARAMS    0x10
2040 
2041 
<span class="line-modified">2042   /* these constants are deprecated; use the corresponding `FT_OPEN_XXX&#39; */</span>
2043   /* values instead                                                      */
2044 #define ft_open_memory    FT_OPEN_MEMORY
2045 #define ft_open_stream    FT_OPEN_STREAM
2046 #define ft_open_pathname  FT_OPEN_PATHNAME
2047 #define ft_open_driver    FT_OPEN_DRIVER
2048 #define ft_open_params    FT_OPEN_PARAMS
2049 
2050 
<span class="line-modified">2051   /*************************************************************************/</span>
<span class="line-modified">2052   /*                                                                       */</span>
<span class="line-modified">2053   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">2054   /*    FT_Parameter                                                       */</span>
<span class="line-modified">2055   /*                                                                       */</span>
<span class="line-modified">2056   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2057   /*    A simple structure to pass more or less generic parameters to      */</span>
<span class="line-modified">2058   /*    @FT_Open_Face and @FT_Face_Properties.                             */</span>
<span class="line-modified">2059   /*                                                                       */</span>
<span class="line-modified">2060   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">2061   /*    tag  :: A four-byte identification tag.                            */</span>
<span class="line-modified">2062   /*                                                                       */</span>
<span class="line-modified">2063   /*    data :: A pointer to the parameter data.                           */</span>
<span class="line-modified">2064   /*                                                                       */</span>
<span class="line-modified">2065   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2066   /*    The ID and function of parameters are driver-specific.  See        */</span>
<span class="line-modified">2067   /*    section @parameter_tags for more information.                      */</span>
<span class="line-modified">2068   /*                                                                       */</span>
<span class="line-modified">2069   typedef struct  FT_Parameter_</span>
<span class="line-modified">2070   {</span>
<span class="line-modified">2071     FT_ULong    tag;</span>


2072     FT_Pointer  data;
2073 
2074   } FT_Parameter;
2075 
2076 
<span class="line-modified">2077   /*************************************************************************/</span>
<span class="line-modified">2078   /*                                                                       */</span>
<span class="line-modified">2079   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">2080   /*    FT_Open_Args                                                       */</span>
<span class="line-modified">2081   /*                                                                       */</span>
<span class="line-modified">2082   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2083   /*    A structure to indicate how to open a new font file or stream.  A  */</span>
<span class="line-modified">2084   /*    pointer to such a structure can be used as a parameter for the     */</span>
<span class="line-modified">2085   /*    functions @FT_Open_Face and @FT_Attach_Stream.                     */</span>
<span class="line-modified">2086   /*                                                                       */</span>
<span class="line-modified">2087   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">2088   /*    flags       :: A set of bit flags indicating how to use the        */</span>
<span class="line-modified">2089   /*                   structure.                                          */</span>
<span class="line-modified">2090   /*                                                                       */</span>
<span class="line-modified">2091   /*    memory_base :: The first byte of the file in memory.               */</span>
<span class="line-modified">2092   /*                                                                       */</span>
<span class="line-modified">2093   /*    memory_size :: The size in bytes of the file in memory.            */</span>
<span class="line-modified">2094   /*                                                                       */</span>
<span class="line-modified">2095   /*    pathname    :: A pointer to an 8-bit file pathname.                */</span>
<span class="line-modified">2096   /*                                                                       */</span>
<span class="line-modified">2097   /*    stream      :: A handle to a source stream object.                 */</span>
<span class="line-modified">2098   /*                                                                       */</span>
<span class="line-modified">2099   /*    driver      :: This field is exclusively used by @FT_Open_Face;    */</span>
<span class="line-modified">2100   /*                   it simply specifies the font driver to use for      */</span>
<span class="line-modified">2101   /*                   opening the face.  If set to NULL, FreeType tries   */</span>
<span class="line-modified">2102   /*                   to load the face with each one of the drivers in    */</span>
<span class="line-modified">2103   /*                   its list.                                           */</span>
<span class="line-modified">2104   /*                                                                       */</span>
<span class="line-modified">2105   /*    num_params  :: The number of extra parameters.                     */</span>
<span class="line-modified">2106   /*                                                                       */</span>
<span class="line-modified">2107   /*    params      :: Extra parameters passed to the font driver when     */</span>
<span class="line-modified">2108   /*                   opening a new face.                                 */</span>
<span class="line-modified">2109   /*                                                                       */</span>
<span class="line-modified">2110   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2111   /*    The stream type is determined by the contents of `flags&#39; that      */</span>
<span class="line-modified">2112   /*    are tested in the following order by @FT_Open_Face:                */</span>
<span class="line-modified">2113   /*                                                                       */</span>
<span class="line-modified">2114   /*    If the @FT_OPEN_MEMORY bit is set, assume that this is a           */</span>
<span class="line-modified">2115   /*    memory file of `memory_size&#39; bytes, located at `memory_address&#39;.   */</span>
<span class="line-modified">2116   /*    The data are not copied, and the client is responsible for         */</span>
<span class="line-modified">2117   /*    releasing and destroying them _after_ the corresponding call to    */</span>
<span class="line-modified">2118   /*    @FT_Done_Face.                                                     */</span>
<span class="line-modified">2119   /*                                                                       */</span>
<span class="line-modified">2120   /*    Otherwise, if the @FT_OPEN_STREAM bit is set, assume that a        */</span>
<span class="line-modified">2121   /*    custom input stream `stream&#39; is used.                              */</span>
<span class="line-modified">2122   /*                                                                       */</span>
<span class="line-modified">2123   /*    Otherwise, if the @FT_OPEN_PATHNAME bit is set, assume that this   */</span>
<span class="line-modified">2124   /*    is a normal file and use `pathname&#39; to open it.                    */</span>
<span class="line-modified">2125   /*                                                                       */</span>
<span class="line-modified">2126   /*    If the @FT_OPEN_DRIVER bit is set, @FT_Open_Face only tries to     */</span>
<span class="line-modified">2127   /*    open the file with the driver whose handler is in `driver&#39;.        */</span>
<span class="line-modified">2128   /*                                                                       */</span>
<span class="line-modified">2129   /*    If the @FT_OPEN_PARAMS bit is set, the parameters given by         */</span>
<span class="line-modified">2130   /*    `num_params&#39; and `params&#39; is used.  They are ignored otherwise.    */</span>
<span class="line-modified">2131   /*                                                                       */</span>
<span class="line-modified">2132   /*    Ideally, both the `pathname&#39; and `params&#39; fields should be tagged  */</span>
<span class="line-modified">2133   /*    as `const&#39;; this is missing for API backward compatibility.  In    */</span>
<span class="line-modified">2134   /*    other words, applications should treat them as read-only.          */</span>
<span class="line-modified">2135   /*                                                                       */</span>




2136   typedef struct  FT_Open_Args_
2137   {
2138     FT_UInt         flags;
2139     const FT_Byte*  memory_base;
2140     FT_Long         memory_size;
2141     FT_String*      pathname;
2142     FT_Stream       stream;
2143     FT_Module       driver;
2144     FT_Int          num_params;
2145     FT_Parameter*   params;
2146 
2147   } FT_Open_Args;
2148 
2149 
<span class="line-modified">2150   /*************************************************************************/</span>
<span class="line-modified">2151   /*                                                                       */</span>
<span class="line-modified">2152   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2153   /*    FT_New_Face                                                        */</span>
<span class="line-modified">2154   /*                                                                       */</span>
<span class="line-modified">2155   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2156   /*    Call @FT_Open_Face to open a font by its pathname.                 */</span>
<span class="line-modified">2157   /*                                                                       */</span>
<span class="line-modified">2158   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2159   /*    library    :: A handle to the library resource.                    */</span>
<span class="line-modified">2160   /*                                                                       */</span>
<span class="line-modified">2161   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2162   /*    pathname   :: A path to the font file.                             */</span>
<span class="line-modified">2163   /*                                                                       */</span>
<span class="line-modified">2164   /*    face_index :: See @FT_Open_Face for a detailed description of this */</span>
<span class="line-modified">2165   /*                  parameter.                                           */</span>
<span class="line-modified">2166   /*                                                                       */</span>
<span class="line-modified">2167   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">2168   /*    aface      :: A handle to a new face object.  If `face_index&#39; is   */</span>
<span class="line-modified">2169   /*                  greater than or equal to zero, it must be non-NULL.  */</span>
<span class="line-modified">2170   /*                                                                       */</span>
<span class="line-modified">2171   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2172   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2173   /*                                                                       */</span>
<span class="line-modified">2174   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2175   /*    Use @FT_Done_Face to destroy the created @FT_Face object (along    */</span>
<span class="line-modified">2176   /*    with its slot and sizes).                                          */</span>
<span class="line-modified">2177   /*                                                                       */</span>



2178   FT_EXPORT( FT_Error )
2179   FT_New_Face( FT_Library   library,
2180                const char*  filepathname,
2181                FT_Long      face_index,
2182                FT_Face     *aface );
2183 
2184 
<span class="line-modified">2185   /*************************************************************************/</span>
<span class="line-modified">2186   /*                                                                       */</span>
<span class="line-modified">2187   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2188   /*    FT_New_Memory_Face                                                 */</span>
<span class="line-modified">2189   /*                                                                       */</span>
<span class="line-modified">2190   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2191   /*    Call @FT_Open_Face to open a font that has been loaded into        */</span>
<span class="line-modified">2192   /*    memory.                                                            */</span>
<span class="line-modified">2193   /*                                                                       */</span>
<span class="line-modified">2194   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2195   /*    library    :: A handle to the library resource.                    */</span>
<span class="line-modified">2196   /*                                                                       */</span>
<span class="line-modified">2197   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2198   /*    file_base  :: A pointer to the beginning of the font data.         */</span>
<span class="line-modified">2199   /*                                                                       */</span>
<span class="line-modified">2200   /*    file_size  :: The size of the memory chunk used by the font data.  */</span>
<span class="line-modified">2201   /*                                                                       */</span>
<span class="line-modified">2202   /*    face_index :: See @FT_Open_Face for a detailed description of this */</span>
<span class="line-modified">2203   /*                  parameter.                                           */</span>
<span class="line-modified">2204   /*                                                                       */</span>
<span class="line-modified">2205   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">2206   /*    aface      :: A handle to a new face object.  If `face_index&#39; is   */</span>
<span class="line-modified">2207   /*                  greater than or equal to zero, it must be non-NULL.  */</span>
<span class="line-modified">2208   /*                                                                       */</span>
<span class="line-modified">2209   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2210   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2211   /*                                                                       */</span>
<span class="line-modified">2212   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2213   /*    You must not deallocate the memory before calling @FT_Done_Face.   */</span>
<span class="line-modified">2214   /*                                                                       */</span>



2215   FT_EXPORT( FT_Error )
2216   FT_New_Memory_Face( FT_Library      library,
2217                       const FT_Byte*  file_base,
2218                       FT_Long         file_size,
2219                       FT_Long         face_index,
2220                       FT_Face        *aface );
2221 
2222 
<span class="line-modified">2223   /*************************************************************************/</span>
<span class="line-modified">2224   /*                                                                       */</span>
<span class="line-modified">2225   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2226   /*    FT_Open_Face                                                       */</span>
<span class="line-modified">2227   /*                                                                       */</span>
<span class="line-modified">2228   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2229   /*    Create a face object from a given resource described by            */</span>
<span class="line-modified">2230   /*    @FT_Open_Args.                                                     */</span>
<span class="line-modified">2231   /*                                                                       */</span>
<span class="line-modified">2232   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2233   /*    library    :: A handle to the library resource.                    */</span>
<span class="line-modified">2234   /*                                                                       */</span>
<span class="line-modified">2235   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2236   /*    args       :: A pointer to an `FT_Open_Args&#39; structure that must   */</span>
<span class="line-modified">2237   /*                  be filled by the caller.                             */</span>
<span class="line-modified">2238   /*                                                                       */</span>
<span class="line-modified">2239   /*    face_index :: This field holds two different values.  Bits 0-15    */</span>
<span class="line-modified">2240   /*                  are the index of the face in the font file (starting */</span>
<span class="line-modified">2241   /*                  with value~0).  Set it to~0 if there is only one     */</span>
<span class="line-modified">2242   /*                  face in the font file.                               */</span>
<span class="line-modified">2243   /*                                                                       */</span>
<span class="line-modified">2244   /*                  [Since 2.6.1] Bits 16-30 are relevant to GX and      */</span>
<span class="line-modified">2245   /*                  OpenType variation fonts only, specifying the named  */</span>
<span class="line-modified">2246   /*                  instance index for the current face index (starting  */</span>
<span class="line-modified">2247   /*                  with value~1; value~0 makes FreeType ignore named    */</span>
<span class="line-modified">2248   /*                  instances).  For non-variation fonts, bits 16-30 are */</span>
<span class="line-modified">2249   /*                  ignored.  Assuming that you want to access the third */</span>
<span class="line-modified">2250   /*                  named instance in face~4, `face_index&#39; should be set */</span>
<span class="line-modified">2251   /*                  to 0x00030004.  If you want to access face~4 without */</span>
<span class="line-modified">2252   /*                  variation handling, simply set `face_index&#39; to       */</span>
<span class="line-modified">2253   /*                  value~4.                                             */</span>
<span class="line-modified">2254   /*                                                                       */</span>
<span class="line-modified">2255   /*                  `FT_Open_Face&#39; and its siblings can be used to       */</span>
<span class="line-modified">2256   /*                  quickly check whether the font format of a given     */</span>
<span class="line-modified">2257   /*                  font resource is supported by FreeType.  In general, */</span>
<span class="line-modified">2258   /*                  if the `face_index&#39; argument is negative, the        */</span>
<span class="line-modified">2259   /*                  function&#39;s return value is~0 if the font format is   */</span>
<span class="line-modified">2260   /*                  recognized, or non-zero otherwise.  The function     */</span>
<span class="line-modified">2261   /*                  allocates a more or less empty face handle in        */</span>
<span class="line-modified">2262   /*                  `*aface&#39; (if `aface&#39; isn&#39;t NULL); the only two       */</span>
<span class="line-modified">2263   /*                  useful fields in this special case are               */</span>
<span class="line-modified">2264   /*                  `face-&gt;num_faces&#39; and `face-&gt;style_flags&#39;.  For any  */</span>
<span class="line-modified">2265   /*                  negative value of `face_index&#39;, `face-&gt;num_faces&#39;    */</span>
<span class="line-modified">2266   /*                  gives the number of faces within the font file.  For */</span>
<span class="line-modified">2267   /*                  the negative value `-(N+1)&#39; (with `N&#39; a non-negative */</span>
<span class="line-modified">2268   /*                  16-bit value), bits 16-30 in `face-&gt;style_flags&#39;     */</span>
<span class="line-modified">2269   /*                  give the number of named instances in face `N&#39; if we */</span>
<span class="line-modified">2270   /*                  have a variation font (or zero otherwise).  After    */</span>
<span class="line-modified">2271   /*                  examination, the returned @FT_Face structure should  */</span>
<span class="line-modified">2272   /*                  be deallocated with a call to @FT_Done_Face.         */</span>
<span class="line-modified">2273   /*                                                                       */</span>
<span class="line-modified">2274   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">2275   /*    aface      :: A handle to a new face object.  If `face_index&#39; is   */</span>
<span class="line-modified">2276   /*                  greater than or equal to zero, it must be non-NULL.  */</span>
<span class="line-modified">2277   /*                                                                       */</span>
<span class="line-modified">2278   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2279   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2280   /*                                                                       */</span>
<span class="line-modified">2281   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2282   /*    Unlike FreeType 1.x, this function automatically creates a glyph   */</span>
<span class="line-modified">2283   /*    slot for the face object that can be accessed directly through     */</span>
<span class="line-modified">2284   /*    `face-&gt;glyph&#39;.                                                     */</span>
<span class="line-modified">2285   /*                                                                       */</span>
<span class="line-modified">2286   /*    Each new face object created with this function also owns a        */</span>
<span class="line-modified">2287   /*    default @FT_Size object, accessible as `face-&gt;size&#39;.               */</span>
<span class="line-modified">2288   /*                                                                       */</span>
<span class="line-modified">2289   /*    One @FT_Library instance can have multiple face objects, this is,  */</span>
<span class="line-modified">2290   /*    @FT_Open_Face and its siblings can be called multiple times using  */</span>
<span class="line-modified">2291   /*    the same `library&#39; argument.                                       */</span>
<span class="line-modified">2292   /*                                                                       */</span>
<span class="line-modified">2293   /*    See the discussion of reference counters in the description of     */</span>
<span class="line-modified">2294   /*    @FT_Reference_Face.                                                */</span>
<span class="line-modified">2295   /*                                                                       */</span>
<span class="line-modified">2296   /*    To loop over all faces, use code similar to the following snippet  */</span>
<span class="line-modified">2297   /*    (omitting the error handling).                                     */</span>
<span class="line-modified">2298   /*                                                                       */</span>
<span class="line-modified">2299   /*    {                                                                  */</span>
<span class="line-modified">2300   /*      ...                                                              */</span>
<span class="line-modified">2301   /*      FT_Face  face;                                                   */</span>
<span class="line-modified">2302   /*      FT_Long  i, num_faces;                                           */</span>
<span class="line-modified">2303   /*                                                                       */</span>
<span class="line-modified">2304   /*                                                                       */</span>
<span class="line-modified">2305   /*      error = FT_Open_Face( library, args, -1, &amp;face );                */</span>
<span class="line-modified">2306   /*      if ( error ) { ... }                                             */</span>
<span class="line-modified">2307   /*                                                                       */</span>
<span class="line-modified">2308   /*      num_faces = face-&gt;num_faces;                                     */</span>
<span class="line-modified">2309   /*      FT_Done_Face( face );                                            */</span>
<span class="line-modified">2310   /*                                                                       */</span>
<span class="line-modified">2311   /*      for ( i = 0; i &lt; num_faces; i++ )                                */</span>
<span class="line-modified">2312   /*      {                                                                */</span>
<span class="line-modified">2313   /*        ...                                                            */</span>
<span class="line-modified">2314   /*        error = FT_Open_Face( library, args, i, &amp;face );               */</span>
<span class="line-modified">2315   /*        ...                                                            */</span>
<span class="line-modified">2316   /*        FT_Done_Face( face );                                          */</span>
<span class="line-modified">2317   /*        ...                                                            */</span>
<span class="line-modified">2318   /*      }                                                                */</span>
<span class="line-modified">2319   /*    }                                                                  */</span>
<span class="line-modified">2320   /*                                                                       */</span>
<span class="line-modified">2321   /*    To loop over all valid values for `face_index&#39;, use something      */</span>
<span class="line-modified">2322   /*    similar to the following snippet, again without error handling.    */</span>
<span class="line-modified">2323   /*    The code accesses all faces immediately (thus only a single call   */</span>
<span class="line-modified">2324   /*    of `FT_Open_Face&#39; within the do-loop), with and without named      */</span>
<span class="line-modified">2325   /*    instances.                                                         */</span>
<span class="line-modified">2326   /*                                                                       */</span>
<span class="line-modified">2327   /*    {                                                                  */</span>
<span class="line-modified">2328   /*      ...                                                              */</span>
<span class="line-modified">2329   /*      FT_Face  face;                                                   */</span>
<span class="line-modified">2330   /*                                                                       */</span>
<span class="line-modified">2331   /*      FT_Long  num_faces     = 0;                                      */</span>
<span class="line-modified">2332   /*      FT_Long  num_instances = 0;                                      */</span>
<span class="line-modified">2333   /*                                                                       */</span>
<span class="line-modified">2334   /*      FT_Long  face_idx     = 0;                                       */</span>
<span class="line-modified">2335   /*      FT_Long  instance_idx = 0;                                       */</span>
<span class="line-modified">2336   /*                                                                       */</span>
<span class="line-modified">2337   /*                                                                       */</span>
<span class="line-modified">2338   /*      do                                                               */</span>
<span class="line-modified">2339   /*      {                                                                */</span>
<span class="line-modified">2340   /*        FT_Long  id = ( instance_idx &lt;&lt; 16 ) + face_idx;               */</span>
<span class="line-modified">2341   /*                                                                       */</span>
<span class="line-modified">2342   /*                                                                       */</span>
<span class="line-modified">2343   /*        error = FT_Open_Face( library, args, id, &amp;face );              */</span>
<span class="line-modified">2344   /*        if ( error ) { ... }                                           */</span>
<span class="line-modified">2345   /*                                                                       */</span>
<span class="line-modified">2346   /*        num_faces     = face-&gt;num_faces;                               */</span>
<span class="line-modified">2347   /*        num_instances = face-&gt;style_flags &gt;&gt; 16;                       */</span>
<span class="line-modified">2348   /*                                                                       */</span>
<span class="line-modified">2349   /*        ...                                                            */</span>
<span class="line-modified">2350   /*                                                                       */</span>
<span class="line-modified">2351   /*        FT_Done_Face( face );                                          */</span>
<span class="line-modified">2352   /*                                                                       */</span>
<span class="line-modified">2353   /*        if ( instance_idx &lt; num_instances )                            */</span>
<span class="line-modified">2354   /*          instance_idx++;                                              */</span>
<span class="line-modified">2355   /*        else                                                           */</span>
<span class="line-modified">2356   /*        {                                                              */</span>
<span class="line-modified">2357   /*          face_idx++;                                                  */</span>
<span class="line-modified">2358   /*          instance_idx = 0;                                            */</span>
<span class="line-modified">2359   /*        }                                                              */</span>
<span class="line-removed">2360   /*                                                                       */</span>
<span class="line-removed">2361   /*      } while ( face_idx &lt; num_faces )                                 */</span>
<span class="line-removed">2362   /*    }                                                                  */</span>
<span class="line-removed">2363   /*                                                                       */</span>
2364   FT_EXPORT( FT_Error )
2365   FT_Open_Face( FT_Library           library,
2366                 const FT_Open_Args*  args,
2367                 FT_Long              face_index,
2368                 FT_Face             *aface );
2369 
2370 
<span class="line-modified">2371   /*************************************************************************/</span>
<span class="line-modified">2372   /*                                                                       */</span>
<span class="line-modified">2373   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2374   /*    FT_Attach_File                                                     */</span>
<span class="line-modified">2375   /*                                                                       */</span>
<span class="line-modified">2376   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2377   /*    Call @FT_Attach_Stream to attach a file.                           */</span>
<span class="line-modified">2378   /*                                                                       */</span>
<span class="line-modified">2379   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2380   /*    face         :: The target face object.                            */</span>
<span class="line-modified">2381   /*                                                                       */</span>
<span class="line-modified">2382   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2383   /*    filepathname :: The pathname.                                      */</span>
<span class="line-modified">2384   /*                                                                       */</span>
<span class="line-modified">2385   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2386   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2387   /*                                                                       */</span>


2388   FT_EXPORT( FT_Error )
2389   FT_Attach_File( FT_Face      face,
2390                   const char*  filepathname );
2391 
2392 
<span class="line-modified">2393   /*************************************************************************/</span>
<span class="line-modified">2394   /*                                                                       */</span>
<span class="line-modified">2395   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2396   /*    FT_Attach_Stream                                                   */</span>
<span class="line-modified">2397   /*                                                                       */</span>
<span class="line-modified">2398   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2399   /*    `Attach&#39; data to a face object.  Normally, this is used to read    */</span>
<span class="line-modified">2400   /*    additional information for the face object.  For example, you can  */</span>
<span class="line-modified">2401   /*    attach an AFM file that comes with a Type~1 font to get the        */</span>
<span class="line-modified">2402   /*    kerning values and other metrics.                                  */</span>
<span class="line-modified">2403   /*                                                                       */</span>
<span class="line-modified">2404   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2405   /*    face       :: The target face object.                              */</span>
<span class="line-modified">2406   /*                                                                       */</span>
<span class="line-modified">2407   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2408   /*    parameters :: A pointer to @FT_Open_Args that must be filled by    */</span>
<span class="line-modified">2409   /*                  the caller.                                          */</span>
<span class="line-modified">2410   /*                                                                       */</span>
<span class="line-modified">2411   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2412   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2413   /*                                                                       */</span>
<span class="line-modified">2414   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2415   /*    The meaning of the `attach&#39; (i.e., what really happens when the    */</span>
<span class="line-modified">2416   /*    new file is read) is not fixed by FreeType itself.  It really      */</span>
<span class="line-modified">2417   /*    depends on the font format (and thus the font driver).             */</span>
<span class="line-modified">2418   /*                                                                       */</span>
<span class="line-modified">2419   /*    Client applications are expected to know what they are doing       */</span>
<span class="line-modified">2420   /*    when invoking this function.  Most drivers simply do not implement */</span>
<span class="line-modified">2421   /*    file or stream attachments.                                        */</span>
<span class="line-modified">2422   /*                                                                       */</span>

2423   FT_EXPORT( FT_Error )
2424   FT_Attach_Stream( FT_Face        face,
2425                     FT_Open_Args*  parameters );
2426 
2427 
<span class="line-modified">2428   /*************************************************************************/</span>
<span class="line-modified">2429   /*                                                                       */</span>
<span class="line-modified">2430   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2431   /*    FT_Reference_Face                                                  */</span>
<span class="line-modified">2432   /*                                                                       */</span>
<span class="line-modified">2433   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2434   /*    A counter gets initialized to~1 at the time an @FT_Face structure  */</span>
<span class="line-modified">2435   /*    is created.  This function increments the counter.  @FT_Done_Face  */</span>
<span class="line-modified">2436   /*    then only destroys a face if the counter is~1, otherwise it simply */</span>
<span class="line-modified">2437   /*    decrements the counter.                                            */</span>
<span class="line-modified">2438   /*                                                                       */</span>
<span class="line-modified">2439   /*    This function helps in managing life-cycles of structures that     */</span>
<span class="line-modified">2440   /*    reference @FT_Face objects.                                        */</span>
<span class="line-modified">2441   /*                                                                       */</span>
<span class="line-modified">2442   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2443   /*    face :: A handle to a target face object.                          */</span>
<span class="line-modified">2444   /*                                                                       */</span>
<span class="line-modified">2445   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2446   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2447   /*                                                                       */</span>
<span class="line-modified">2448   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">2449   /*    2.4.2                                                              */</span>
<span class="line-modified">2450   /*                                                                       */</span>

2451   FT_EXPORT( FT_Error )
2452   FT_Reference_Face( FT_Face  face );
2453 
2454 
<span class="line-modified">2455   /*************************************************************************/</span>
<span class="line-modified">2456   /*                                                                       */</span>
<span class="line-modified">2457   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2458   /*    FT_Done_Face                                                       */</span>
<span class="line-modified">2459   /*                                                                       */</span>
<span class="line-modified">2460   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2461   /*    Discard a given face object, as well as all of its child slots and */</span>
<span class="line-modified">2462   /*    sizes.                                                             */</span>
<span class="line-modified">2463   /*                                                                       */</span>
<span class="line-modified">2464   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2465   /*    face :: A handle to a target face object.                          */</span>
<span class="line-modified">2466   /*                                                                       */</span>
<span class="line-modified">2467   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2468   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2469   /*                                                                       */</span>
<span class="line-modified">2470   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2471   /*    See the discussion of reference counters in the description of     */</span>
<span class="line-modified">2472   /*    @FT_Reference_Face.                                                */</span>
<span class="line-modified">2473   /*                                                                       */</span>

2474   FT_EXPORT( FT_Error )
2475   FT_Done_Face( FT_Face  face );
2476 
2477 
<span class="line-modified">2478   /*************************************************************************/</span>
<span class="line-modified">2479   /*                                                                       */</span>
<span class="line-modified">2480   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2481   /*    FT_Select_Size                                                     */</span>
<span class="line-modified">2482   /*                                                                       */</span>
<span class="line-modified">2483   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2484   /*    Select a bitmap strike.  To be more precise, this function sets    */</span>
<span class="line-modified">2485   /*    the scaling factors of the active @FT_Size object in a face so     */</span>
<span class="line-modified">2486   /*    that bitmaps from this particular strike are taken by              */</span>
<span class="line-modified">2487   /*    @FT_Load_Glyph and friends.                                        */</span>
<span class="line-modified">2488   /*                                                                       */</span>
<span class="line-modified">2489   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2490   /*    face         :: A handle to a target face object.                  */</span>
<span class="line-modified">2491   /*                                                                       */</span>
<span class="line-modified">2492   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2493   /*    strike_index :: The index of the bitmap strike in the              */</span>
<span class="line-modified">2494   /*                    `available_sizes&#39; field of @FT_FaceRec structure.  */</span>
<span class="line-modified">2495   /*                                                                       */</span>
<span class="line-modified">2496   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2497   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2498   /*                                                                       */</span>
<span class="line-modified">2499   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2500   /*    For bitmaps embedded in outline fonts it is common that only a     */</span>
<span class="line-modified">2501   /*    subset of the available glyphs at a given ppem value is available. */</span>
<span class="line-modified">2502   /*    FreeType silently uses outlines if there is no bitmap for a given  */</span>
<span class="line-modified">2503   /*    glyph index.                                                       */</span>
<span class="line-modified">2504   /*                                                                       */</span>
<span class="line-modified">2505   /*    For GX and OpenType variation fonts, a bitmap strike makes sense   */</span>
<span class="line-modified">2506   /*    only if the default instance is active (this is, no glyph          */</span>
<span class="line-modified">2507   /*    variation takes place); otherwise, FreeType simply ignores bitmap  */</span>
<span class="line-modified">2508   /*    strikes.  The same is true for all named instances that are        */</span>
<span class="line-modified">2509   /*    different from the default instance.                               */</span>
<span class="line-modified">2510   /*                                                                       */</span>
<span class="line-modified">2511   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">2512   /*                                                                       */</span>

2513   FT_EXPORT( FT_Error )
2514   FT_Select_Size( FT_Face  face,
2515                   FT_Int   strike_index );
2516 
2517 
<span class="line-modified">2518   /*************************************************************************/</span>
<span class="line-modified">2519   /*                                                                       */</span>
<span class="line-modified">2520   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">2521   /*    FT_Size_Request_Type                                               */</span>
<span class="line-modified">2522   /*                                                                       */</span>
<span class="line-modified">2523   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2524   /*    An enumeration type that lists the supported size request types,   */</span>
<span class="line-modified">2525   /*    i.e., what input size (in font units) maps to the requested output */</span>
<span class="line-modified">2526   /*    size (in pixels, as computed from the arguments of                 */</span>
<span class="line-modified">2527   /*    @FT_Size_Request).                                                 */</span>
<span class="line-modified">2528   /*                                                                       */</span>
<span class="line-modified">2529   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">2530   /*    FT_SIZE_REQUEST_TYPE_NOMINAL ::                                    */</span>
<span class="line-modified">2531   /*      The nominal size.  The `units_per_EM&#39; field of @FT_FaceRec is    */</span>
<span class="line-modified">2532   /*      used to determine both scaling values.                           */</span>
<span class="line-modified">2533   /*                                                                       */</span>
<span class="line-modified">2534   /*      This is the standard scaling found in most applications.  In     */</span>
<span class="line-modified">2535   /*      particular, use this size request type for TrueType fonts if     */</span>
<span class="line-modified">2536   /*      they provide optical scaling or something similar.  Note,        */</span>
<span class="line-modified">2537   /*      however, that `units_per_EM&#39; is a rather abstract value which    */</span>
<span class="line-modified">2538   /*      bears no relation to the actual size of the glyphs in a font.    */</span>
<span class="line-modified">2539   /*                                                                       */</span>
<span class="line-modified">2540   /*    FT_SIZE_REQUEST_TYPE_REAL_DIM ::                                   */</span>
<span class="line-modified">2541   /*      The real dimension.  The sum of the `ascender&#39; and (minus of)    */</span>
<span class="line-modified">2542   /*      the `descender&#39; fields of @FT_FaceRec is used to determine both  */</span>
<span class="line-modified">2543   /*      scaling values.                                                  */</span>
<span class="line-modified">2544   /*                                                                       */</span>
<span class="line-modified">2545   /*    FT_SIZE_REQUEST_TYPE_BBOX ::                                       */</span>
<span class="line-modified">2546   /*      The font bounding box.  The width and height of the `bbox&#39; field */</span>
<span class="line-modified">2547   /*      of @FT_FaceRec are used to determine the horizontal and vertical */</span>
<span class="line-modified">2548   /*      scaling value, respectively.                                     */</span>
<span class="line-modified">2549   /*                                                                       */</span>
<span class="line-modified">2550   /*    FT_SIZE_REQUEST_TYPE_CELL ::                                       */</span>
<span class="line-modified">2551   /*      The `max_advance_width&#39; field of @FT_FaceRec is used to          */</span>
<span class="line-modified">2552   /*      determine the horizontal scaling value; the vertical scaling     */</span>
<span class="line-modified">2553   /*      value is determined the same way as                              */</span>
<span class="line-modified">2554   /*      @FT_SIZE_REQUEST_TYPE_REAL_DIM does.  Finally, both scaling      */</span>
<span class="line-modified">2555   /*      values are set to the smaller one.  This type is useful if you   */</span>
<span class="line-modified">2556   /*      want to specify the font size for, say, a window of a given      */</span>
<span class="line-modified">2557   /*      dimension and 80x24 cells.                                       */</span>
<span class="line-modified">2558   /*                                                                       */</span>
<span class="line-modified">2559   /*    FT_SIZE_REQUEST_TYPE_SCALES ::                                     */</span>
<span class="line-modified">2560   /*      Specify the scaling values directly.                             */</span>
<span class="line-modified">2561   /*                                                                       */</span>
<span class="line-modified">2562   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2563   /*    The above descriptions only apply to scalable formats.  For bitmap */</span>
<span class="line-modified">2564   /*    formats, the behaviour is up to the driver.                        */</span>
<span class="line-modified">2565   /*                                                                       */</span>
<span class="line-modified">2566   /*    See the note section of @FT_Size_Metrics if you wonder how size    */</span>
<span class="line-removed">2567   /*    requesting relates to scaling values.                              */</span>
<span class="line-removed">2568   /*                                                                       */</span>
2569   typedef enum  FT_Size_Request_Type_
2570   {
2571     FT_SIZE_REQUEST_TYPE_NOMINAL,
2572     FT_SIZE_REQUEST_TYPE_REAL_DIM,
2573     FT_SIZE_REQUEST_TYPE_BBOX,
2574     FT_SIZE_REQUEST_TYPE_CELL,
2575     FT_SIZE_REQUEST_TYPE_SCALES,
2576 
2577     FT_SIZE_REQUEST_TYPE_MAX
2578 
2579   } FT_Size_Request_Type;
2580 
2581 
<span class="line-modified">2582   /*************************************************************************/</span>
<span class="line-modified">2583   /*                                                                       */</span>
<span class="line-modified">2584   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">2585   /*    FT_Size_RequestRec                                                 */</span>
<span class="line-modified">2586   /*                                                                       */</span>
<span class="line-modified">2587   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2588   /*    A structure to model a size request.                               */</span>
<span class="line-modified">2589   /*                                                                       */</span>
<span class="line-modified">2590   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">2591   /*    type           :: See @FT_Size_Request_Type.                       */</span>
<span class="line-modified">2592   /*                                                                       */</span>
<span class="line-modified">2593   /*    width          :: The desired width, given as a 26.6 fractional    */</span>
<span class="line-modified">2594   /*                      point value (with 72pt = 1in).                   */</span>
<span class="line-modified">2595   /*                                                                       */</span>
<span class="line-modified">2596   /*    height         :: The desired height, given as a 26.6 fractional   */</span>
<span class="line-modified">2597   /*                      point value (with 72pt = 1in).                   */</span>
<span class="line-modified">2598   /*                                                                       */</span>
<span class="line-modified">2599   /*    horiResolution :: The horizontal resolution (dpi, i.e., pixels per */</span>
<span class="line-modified">2600   /*                      inch).  If set to zero, `width&#39; is treated as a  */</span>
<span class="line-modified">2601   /*                      26.6 fractional *pixel* value, which gets        */</span>
<span class="line-modified">2602   /*                      internally rounded to an integer.                */</span>
<span class="line-modified">2603   /*                                                                       */</span>
<span class="line-modified">2604   /*    vertResolution :: The vertical resolution (dpi, i.e., pixels per   */</span>
<span class="line-modified">2605   /*                      inch).  If set to zero, `height&#39; is treated as a */</span>
<span class="line-modified">2606   /*                      26.6 fractional *pixel* value, which gets        */</span>
<span class="line-modified">2607   /*                      internally rounded to an integer.                */</span>
<span class="line-modified">2608   /*                                                                       */</span>
<span class="line-modified">2609   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2610   /*    If `width&#39; is zero, the horizontal scaling value is set equal      */</span>
<span class="line-modified">2611   /*    to the vertical scaling value, and vice versa.                     */</span>
<span class="line-modified">2612   /*                                                                       */</span>
<span class="line-modified">2613   /*    If `type&#39; is FT_SIZE_REQUEST_TYPE_SCALES, `width&#39; and `height&#39; are */</span>
<span class="line-modified">2614   /*    interpreted directly as 16.16 fractional scaling values, without   */</span>
<span class="line-modified">2615   /*    any further modification, and both `horiResolution&#39; and            */</span>
<span class="line-modified">2616   /*    `vertResolution&#39; are ignored.                                      */</span>
<span class="line-modified">2617   /*                                                                       */</span>



2618   typedef struct  FT_Size_RequestRec_
2619   {
2620     FT_Size_Request_Type  type;
2621     FT_Long               width;
2622     FT_Long               height;
2623     FT_UInt               horiResolution;
2624     FT_UInt               vertResolution;
2625 
2626   } FT_Size_RequestRec;
2627 
2628 
<span class="line-modified">2629   /*************************************************************************/</span>
<span class="line-modified">2630   /*                                                                       */</span>
<span class="line-modified">2631   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">2632   /*    FT_Size_Request                                                    */</span>
<span class="line-modified">2633   /*                                                                       */</span>
<span class="line-modified">2634   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2635   /*    A handle to a size request structure.                              */</span>
<span class="line-modified">2636   /*                                                                       */</span>
2637   typedef struct FT_Size_RequestRec_  *FT_Size_Request;
2638 
2639 
<span class="line-modified">2640   /*************************************************************************/</span>
<span class="line-modified">2641   /*                                                                       */</span>
<span class="line-modified">2642   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2643   /*    FT_Request_Size                                                    */</span>
<span class="line-modified">2644   /*                                                                       */</span>
<span class="line-modified">2645   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2646   /*    Resize the scale of the active @FT_Size object in a face.          */</span>
<span class="line-modified">2647   /*                                                                       */</span>
<span class="line-modified">2648   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2649   /*    face :: A handle to a target face object.                          */</span>
<span class="line-modified">2650   /*                                                                       */</span>
<span class="line-modified">2651   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2652   /*    req  :: A pointer to a @FT_Size_RequestRec.                        */</span>
<span class="line-modified">2653   /*                                                                       */</span>
<span class="line-modified">2654   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2655   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2656   /*                                                                       */</span>
<span class="line-modified">2657   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2658   /*    Although drivers may select the bitmap strike matching the         */</span>
<span class="line-modified">2659   /*    request, you should not rely on this if you intend to select a     */</span>
<span class="line-modified">2660   /*    particular bitmap strike.  Use @FT_Select_Size instead in that     */</span>
<span class="line-modified">2661   /*    case.                                                              */</span>
<span class="line-modified">2662   /*                                                                       */</span>
<span class="line-modified">2663   /*    The relation between the requested size and the resulting glyph    */</span>
<span class="line-modified">2664   /*    size is dependent entirely on how the size is defined in the       */</span>
<span class="line-modified">2665   /*    source face.  The font designer chooses the final size of each     */</span>
<span class="line-modified">2666   /*    glyph relative to this size.  For more information refer to        */</span>
<span class="line-modified">2667   /*    `https://www.freetype.org/freetype2/docs/glyphs/glyphs-2.html&#39;.    */</span>
<span class="line-modified">2668   /*                                                                       */</span>
<span class="line-modified">2669   /*    Contrary to @FT_Set_Char_Size, this function doesn&#39;t have special  */</span>
<span class="line-modified">2670   /*    code to normalize zero-valued widths, heights, or resolutions      */</span>
<span class="line-modified">2671   /*    (which lead to errors in most cases).                              */</span>
<span class="line-modified">2672   /*                                                                       */</span>
<span class="line-modified">2673   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">2674   /*                                                                       */</span>

2675   FT_EXPORT( FT_Error )
2676   FT_Request_Size( FT_Face          face,
2677                    FT_Size_Request  req );
2678 
2679 
<span class="line-modified">2680   /*************************************************************************/</span>
<span class="line-modified">2681   /*                                                                       */</span>
<span class="line-modified">2682   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2683   /*    FT_Set_Char_Size                                                   */</span>
<span class="line-modified">2684   /*                                                                       */</span>
<span class="line-modified">2685   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2686   /*    Call @FT_Request_Size to request the nominal size (in points).     */</span>
<span class="line-modified">2687   /*                                                                       */</span>
<span class="line-modified">2688   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2689   /*    face            :: A handle to a target face object.               */</span>
<span class="line-modified">2690   /*                                                                       */</span>
<span class="line-modified">2691   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2692   /*    char_width      :: The nominal width, in 26.6 fractional points.   */</span>
<span class="line-modified">2693   /*                                                                       */</span>
<span class="line-modified">2694   /*    char_height     :: The nominal height, in 26.6 fractional points.  */</span>
<span class="line-modified">2695   /*                                                                       */</span>
<span class="line-modified">2696   /*    horz_resolution :: The horizontal resolution in dpi.               */</span>
<span class="line-modified">2697   /*                                                                       */</span>
<span class="line-modified">2698   /*    vert_resolution :: The vertical resolution in dpi.                 */</span>
<span class="line-modified">2699   /*                                                                       */</span>
<span class="line-modified">2700   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2701   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2702   /*                                                                       */</span>
<span class="line-modified">2703   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2704   /*    While this function allows fractional points as input values, the  */</span>
<span class="line-modified">2705   /*    resulting ppem value for the given resolution is always rounded to */</span>
<span class="line-modified">2706   /*    the nearest integer.                                               */</span>
<span class="line-modified">2707   /*                                                                       */</span>
<span class="line-modified">2708   /*    If either the character width or height is zero, it is set equal   */</span>
<span class="line-modified">2709   /*    to the other value.                                                */</span>
<span class="line-modified">2710   /*                                                                       */</span>
<span class="line-modified">2711   /*    If either the horizontal or vertical resolution is zero, it is set */</span>
<span class="line-modified">2712   /*    equal to the other value.                                          */</span>
<span class="line-modified">2713   /*                                                                       */</span>
<span class="line-modified">2714   /*    A character width or height smaller than 1pt is set to 1pt; if     */</span>
<span class="line-modified">2715   /*    both resolution values are zero, they are set to 72dpi.            */</span>
<span class="line-modified">2716   /*                                                                       */</span>
<span class="line-modified">2717   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">2718   /*                                                                       */</span>





2719   FT_EXPORT( FT_Error )
2720   FT_Set_Char_Size( FT_Face     face,
2721                     FT_F26Dot6  char_width,
2722                     FT_F26Dot6  char_height,
2723                     FT_UInt     horz_resolution,
2724                     FT_UInt     vert_resolution );
2725 
2726 
<span class="line-modified">2727   /*************************************************************************/</span>
<span class="line-modified">2728   /*                                                                       */</span>
<span class="line-modified">2729   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2730   /*    FT_Set_Pixel_Sizes                                                 */</span>
<span class="line-modified">2731   /*                                                                       */</span>
<span class="line-modified">2732   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2733   /*    Call @FT_Request_Size to request the nominal size (in pixels).     */</span>
<span class="line-modified">2734   /*                                                                       */</span>
<span class="line-modified">2735   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2736   /*    face         :: A handle to the target face object.                */</span>
<span class="line-modified">2737   /*                                                                       */</span>
<span class="line-modified">2738   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2739   /*    pixel_width  :: The nominal width, in pixels.                      */</span>
<span class="line-modified">2740   /*                                                                       */</span>
<span class="line-modified">2741   /*    pixel_height :: The nominal height, in pixels.                     */</span>
<span class="line-modified">2742   /*                                                                       */</span>
<span class="line-modified">2743   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2744   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2745   /*                                                                       */</span>
<span class="line-modified">2746   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2747   /*    You should not rely on the resulting glyphs matching or being      */</span>
<span class="line-modified">2748   /*    constrained to this pixel size.  Refer to @FT_Request_Size to      */</span>
<span class="line-modified">2749   /*    understand how requested sizes relate to actual sizes.             */</span>
<span class="line-modified">2750   /*                                                                       */</span>
<span class="line-modified">2751   /*    Don&#39;t use this function if you are using the FreeType cache API.   */</span>
<span class="line-modified">2752   /*                                                                       */</span>



2753   FT_EXPORT( FT_Error )
2754   FT_Set_Pixel_Sizes( FT_Face  face,
2755                       FT_UInt  pixel_width,
2756                       FT_UInt  pixel_height );
2757 
2758 
<span class="line-modified">2759   /*************************************************************************/</span>
<span class="line-modified">2760   /*                                                                       */</span>
<span class="line-modified">2761   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2762   /*    FT_Load_Glyph                                                      */</span>
<span class="line-modified">2763   /*                                                                       */</span>
<span class="line-modified">2764   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2765   /*    Load a glyph into the glyph slot of a face object.                 */</span>
<span class="line-modified">2766   /*                                                                       */</span>
<span class="line-modified">2767   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2768   /*    face        :: A handle to the target face object where the glyph  */</span>
<span class="line-modified">2769   /*                   is loaded.                                          */</span>
<span class="line-modified">2770   /*                                                                       */</span>
<span class="line-modified">2771   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2772   /*    glyph_index :: The index of the glyph in the font file.  For       */</span>
<span class="line-modified">2773   /*                   CID-keyed fonts (either in PS or in CFF format)     */</span>
<span class="line-modified">2774   /*                   this argument specifies the CID value.              */</span>
<span class="line-modified">2775   /*                                                                       */</span>
<span class="line-modified">2776   /*    load_flags  :: A flag indicating what to load for this glyph.  The */</span>
<span class="line-modified">2777   /*                   @FT_LOAD_XXX constants can be used to control the   */</span>
<span class="line-modified">2778   /*                   glyph loading process (e.g., whether the outline    */</span>
<span class="line-modified">2779   /*                   should be scaled, whether to load bitmaps or not,   */</span>
<span class="line-modified">2780   /*                   whether to hint the outline, etc).                  */</span>
<span class="line-modified">2781   /*                                                                       */</span>
<span class="line-modified">2782   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2783   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2784   /*                                                                       */</span>
<span class="line-modified">2785   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2786   /*    The loaded glyph may be transformed.  See @FT_Set_Transform for    */</span>
<span class="line-modified">2787   /*    the details.                                                       */</span>
<span class="line-modified">2788   /*                                                                       */</span>
<span class="line-modified">2789   /*    For subsetted CID-keyed fonts, `FT_Err_Invalid_Argument&#39; is        */</span>
<span class="line-modified">2790   /*    returned for invalid CID values (this is, for CID values that      */</span>
<span class="line-modified">2791   /*    don&#39;t have a corresponding glyph in the font).  See the discussion */</span>
<span class="line-modified">2792   /*    of the @FT_FACE_FLAG_CID_KEYED flag for more details.              */</span>
<span class="line-modified">2793   /*                                                                       */</span>
<span class="line-modified">2794   /*    If you receive `FT_Err_Glyph_Too_Big&#39;, try getting the glyph       */</span>
<span class="line-modified">2795   /*    outline at EM size, then scale it manually and fill it as a        */</span>
<span class="line-modified">2796   /*    graphics operation.                                                */</span>
<span class="line-modified">2797   /*                                                                       */</span>

2798   FT_EXPORT( FT_Error )
2799   FT_Load_Glyph( FT_Face   face,
2800                  FT_UInt   glyph_index,
2801                  FT_Int32  load_flags );
2802 
2803 
<span class="line-modified">2804   /*************************************************************************/</span>
<span class="line-modified">2805   /*                                                                       */</span>
<span class="line-modified">2806   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">2807   /*    FT_Load_Char                                                       */</span>
<span class="line-modified">2808   /*                                                                       */</span>
<span class="line-modified">2809   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">2810   /*    Load a glyph into the glyph slot of a face object, accessed by its */</span>
<span class="line-modified">2811   /*    character code.                                                    */</span>
<span class="line-modified">2812   /*                                                                       */</span>
<span class="line-modified">2813   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">2814   /*    face        :: A handle to a target face object where the glyph    */</span>
<span class="line-modified">2815   /*                   is loaded.                                          */</span>
<span class="line-modified">2816   /*                                                                       */</span>
<span class="line-modified">2817   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">2818   /*    char_code   :: The glyph&#39;s character code, according to the        */</span>
<span class="line-modified">2819   /*                   current charmap used in the face.                   */</span>
<span class="line-modified">2820   /*                                                                       */</span>
<span class="line-modified">2821   /*    load_flags  :: A flag indicating what to load for this glyph.  The */</span>
<span class="line-modified">2822   /*                   @FT_LOAD_XXX constants can be used to control the   */</span>
<span class="line-modified">2823   /*                   glyph loading process (e.g., whether the outline    */</span>
<span class="line-modified">2824   /*                   should be scaled, whether to load bitmaps or not,   */</span>
<span class="line-modified">2825   /*                   whether to hint the outline, etc).                  */</span>
<span class="line-modified">2826   /*                                                                       */</span>
<span class="line-modified">2827   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">2828   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">2829   /*                                                                       */</span>
<span class="line-modified">2830   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">2831   /*    This function simply calls @FT_Get_Char_Index and @FT_Load_Glyph.  */</span>
<span class="line-modified">2832   /*                                                                       */</span>
<span class="line-modified">2833   /*    Many fonts contain glyphs that can&#39;t be loaded by this function    */</span>
<span class="line-modified">2834   /*    since its glyph indices are not listed in any of the font&#39;s        */</span>
<span class="line-modified">2835   /*    charmaps.                                                          */</span>
<span class="line-modified">2836   /*                                                                       */</span>
<span class="line-modified">2837   /*    If no active cmap is set up (i.e., `face-&gt;charmap&#39; is zero), the   */</span>
<span class="line-modified">2838   /*    call to @FT_Get_Char_Index is omitted, and the function behaves    */</span>
<span class="line-modified">2839   /*    identically to @FT_Load_Glyph.                                     */</span>
<span class="line-modified">2840   /*                                                                       */</span>
2841   FT_EXPORT( FT_Error )
2842   FT_Load_Char( FT_Face   face,
2843                 FT_ULong  char_code,
2844                 FT_Int32  load_flags );
2845 
2846 
<span class="line-modified">2847   /*************************************************************************</span>
2848    *
2849    * @enum:
2850    *   FT_LOAD_XXX
2851    *
2852    * @description:
<span class="line-modified">2853    *   A list of bit field constants for @FT_Load_Glyph to indicate what</span>
<span class="line-modified">2854    *   kind of operations to perform during glyph loading.</span>
2855    *
2856    * @values:
2857    *   FT_LOAD_DEFAULT ::
2858    *     Corresponding to~0, this value is used as the default glyph load
2859    *     operation.  In this case, the following happens:
2860    *
2861    *     1. FreeType looks for a bitmap for the glyph corresponding to the
<span class="line-modified">2862    *        face&#39;s current size.  If one is found, the function returns.</span>
<span class="line-modified">2863    *        The bitmap data can be accessed from the glyph slot (see note</span>
<span class="line-removed">2864    *        below).</span>
2865    *
2866    *     2. If no embedded bitmap is searched for or found, FreeType looks
<span class="line-modified">2867    *        for a scalable outline.  If one is found, it is loaded from</span>
<span class="line-modified">2868    *        the font file, scaled to device pixels, then `hinted&#39; to the</span>
<span class="line-modified">2869    *        pixel grid in order to optimize it.  The outline data can be</span>
<span class="line-modified">2870    *        accessed from the glyph slot (see note below).</span>
2871    *
2872    *     Note that by default the glyph loader doesn&#39;t render outlines into
2873    *     bitmaps.  The following flags are used to modify this default
2874    *     behaviour to more specific and useful cases.
2875    *
2876    *   FT_LOAD_NO_SCALE ::
2877    *     Don&#39;t scale the loaded outline glyph but keep it in font units.
2878    *
2879    *     This flag implies @FT_LOAD_NO_HINTING and @FT_LOAD_NO_BITMAP, and
2880    *     unsets @FT_LOAD_RENDER.
2881    *
<span class="line-modified">2882    *     If the font is `tricky&#39; (see @FT_FACE_FLAG_TRICKY for more), using</span>
<span class="line-modified">2883    *     FT_LOAD_NO_SCALE usually yields meaningless outlines because the</span>
2884    *     subglyphs must be scaled and positioned with hinting instructions.
<span class="line-modified">2885    *     This can be solved by loading the font without FT_LOAD_NO_SCALE and</span>
<span class="line-modified">2886    *     setting the character size to `font-&gt;units_per_EM&#39;.</span>
2887    *
2888    *   FT_LOAD_NO_HINTING ::
<span class="line-modified">2889    *     Disable hinting.  This generally generates `blurrier&#39; bitmap glyphs</span>
2890    *     when the glyph are rendered in any of the anti-aliased modes.  See
2891    *     also the note below.
2892    *
2893    *     This flag is implied by @FT_LOAD_NO_SCALE.
2894    *
2895    *   FT_LOAD_RENDER ::
2896    *     Call @FT_Render_Glyph after the glyph is loaded.  By default, the
2897    *     glyph is rendered in @FT_RENDER_MODE_NORMAL mode.  This can be
2898    *     overridden by @FT_LOAD_TARGET_XXX or @FT_LOAD_MONOCHROME.
2899    *
2900    *     This flag is unset by @FT_LOAD_NO_SCALE.
2901    *
2902    *   FT_LOAD_NO_BITMAP ::
2903    *     Ignore bitmap strikes when loading.  Bitmap-only fonts ignore this
2904    *     flag.
2905    *
2906    *     @FT_LOAD_NO_SCALE always sets this flag.
2907    *
2908    *   FT_LOAD_VERTICAL_LAYOUT ::
2909    *     Load the glyph for vertical text layout.  In particular, the
<span class="line-modified">2910    *     `advance&#39; value in the @FT_GlyphSlotRec structure is set to the</span>
<span class="line-modified">2911    *     `vertAdvance&#39; value of the `metrics&#39; field.</span>
2912    *
<span class="line-modified">2913    *     In case @FT_HAS_VERTICAL doesn&#39;t return true, you shouldn&#39;t use</span>
<span class="line-modified">2914    *     this flag currently.  Reason is that in this case vertical metrics</span>
<span class="line-modified">2915    *     get synthesized, and those values are not always consistent across</span>
2916    *     various font formats.
2917    *
2918    *   FT_LOAD_FORCE_AUTOHINT ::
<span class="line-modified">2919    *     Prefer the auto-hinter over the font&#39;s native hinter.  See also</span>
<span class="line-modified">2920    *     the note below.</span>
2921    *
2922    *   FT_LOAD_PEDANTIC ::
2923    *     Make the font driver perform pedantic verifications during glyph
<span class="line-modified">2924    *     loading.  This is mostly used to detect broken glyphs in fonts.</span>
<span class="line-modified">2925    *     By default, FreeType tries to handle broken fonts also.</span>
2926    *
2927    *     In particular, errors from the TrueType bytecode engine are not
<span class="line-modified">2928    *     passed to the application if this flag is not set; this might</span>
<span class="line-modified">2929    *     result in partially hinted or distorted glyphs in case a glyph&#39;s</span>
<span class="line-modified">2930    *     bytecode is buggy.</span>
2931    *
2932    *   FT_LOAD_NO_RECURSE ::
<span class="line-modified">2933    *     Don&#39;t load composite glyphs recursively.  Instead, the font</span>
<span class="line-modified">2934    *     driver should set the `num_subglyph&#39; and `subglyphs&#39; values of</span>
<span class="line-modified">2935    *     the glyph slot accordingly, and set `glyph-&gt;format&#39; to</span>
<span class="line-modified">2936    *     @FT_GLYPH_FORMAT_COMPOSITE.  The description of subglyphs can</span>
<span class="line-modified">2937    *     then be accessed with @FT_Get_SubGlyph_Info.</span>



2938    *
2939    *     This flag implies @FT_LOAD_NO_SCALE and @FT_LOAD_IGNORE_TRANSFORM.
2940    *
2941    *   FT_LOAD_IGNORE_TRANSFORM ::
2942    *     Ignore the transform matrix set by @FT_Set_Transform.
2943    *
2944    *   FT_LOAD_MONOCHROME ::
2945    *     This flag is used with @FT_LOAD_RENDER to indicate that you want to
2946    *     render an outline glyph to a 1-bit monochrome bitmap glyph, with
2947    *     8~pixels packed into each byte of the bitmap data.
2948    *
2949    *     Note that this has no effect on the hinting algorithm used.  You
2950    *     should rather use @FT_LOAD_TARGET_MONO so that the
2951    *     monochrome-optimized hinting algorithm is used.
2952    *
2953    *   FT_LOAD_LINEAR_DESIGN ::
<span class="line-modified">2954    *     Keep  `linearHoriAdvance&#39; and `linearVertAdvance&#39; fields of</span>
<span class="line-modified">2955    *     @FT_GlyphSlotRec in font units.  See @FT_GlyphSlotRec for</span>
<span class="line-removed">2956    *     details.</span>
2957    *
2958    *   FT_LOAD_NO_AUTOHINT ::
2959    *     Disable the auto-hinter.  See also the note below.
2960    *
2961    *   FT_LOAD_COLOR ::



2962    *     [Since 2.5] Load embedded color bitmap images.  The resulting color
<span class="line-modified">2963    *     bitmaps, if available, will have the @FT_PIXEL_MODE_BGRA format.</span>
<span class="line-modified">2964    *     If the flag is not set and color bitmaps are found, they are</span>
<span class="line-modified">2965    *     converted to 256-level gray bitmaps transparently, using the</span>
<span class="line-modified">2966    *     @FT_PIXEL_MODE_GRAY format.</span>










2967    *
2968    *   FT_LOAD_COMPUTE_METRICS ::
<span class="line-modified">2969    *     [Since 2.6.1] Compute glyph metrics from the glyph data, without</span>
<span class="line-modified">2970    *     the use of bundled metrics tables (for example, the `hdmx&#39; table in</span>
2971    *     TrueType fonts).  This flag is mainly used by font validating or
2972    *     font editing applications, which need to ignore, verify, or edit
2973    *     those tables.
2974    *
2975    *     Currently, this flag is only implemented for TrueType fonts.
2976    *
2977    *   FT_LOAD_BITMAP_METRICS_ONLY ::
2978    *     [Since 2.7.1] Request loading of the metrics and bitmap image
<span class="line-modified">2979    *     information of a (possibly embedded) bitmap glyph without</span>
<span class="line-modified">2980    *     allocating or copying the bitmap image data itself.  No effect if</span>
<span class="line-modified">2981    *     the target glyph is not a bitmap image.</span>
2982    *
2983    *     This flag unsets @FT_LOAD_RENDER.
2984    *
2985    *   FT_LOAD_CROP_BITMAP ::
2986    *     Ignored.  Deprecated.
2987    *
2988    *   FT_LOAD_IGNORE_GLOBAL_ADVANCE_WIDTH ::
2989    *     Ignored.  Deprecated.
2990    *
2991    * @note:
2992    *   By default, hinting is enabled and the font&#39;s native hinter (see
2993    *   @FT_FACE_FLAG_HINTER) is preferred over the auto-hinter.  You can
2994    *   disable hinting by setting @FT_LOAD_NO_HINTING or change the
2995    *   precedence by setting @FT_LOAD_FORCE_AUTOHINT.  You can also set
<span class="line-modified">2996    *   @FT_LOAD_NO_AUTOHINT in case you don&#39;t want the auto-hinter to be</span>
<span class="line-modified">2997    *   used at all.</span>
2998    *
2999    *   See the description of @FT_FACE_FLAG_TRICKY for a special exception
3000    *   (affecting only a handful of Asian fonts).
3001    *
3002    *   Besides deciding which hinter to use, you can also decide which
3003    *   hinting algorithm to use.  See @FT_LOAD_TARGET_XXX for details.
3004    *
3005    *   Note that the auto-hinter needs a valid Unicode cmap (either a native
3006    *   one or synthesized by FreeType) for producing correct results.  If a
3007    *   font provides an incorrect mapping (for example, assigning the
<span class="line-modified">3008    *   character code U+005A, LATIN CAPITAL LETTER Z, to a glyph depicting a</span>
3009    *   mathematical integral sign), the auto-hinter might produce useless
3010    *   results.
3011    *
3012    */
3013 #define FT_LOAD_DEFAULT                      0x0
3014 #define FT_LOAD_NO_SCALE                     ( 1L &lt;&lt; 0 )
3015 #define FT_LOAD_NO_HINTING                   ( 1L &lt;&lt; 1 )
3016 #define FT_LOAD_RENDER                       ( 1L &lt;&lt; 2 )
3017 #define FT_LOAD_NO_BITMAP                    ( 1L &lt;&lt; 3 )
3018 #define FT_LOAD_VERTICAL_LAYOUT              ( 1L &lt;&lt; 4 )
3019 #define FT_LOAD_FORCE_AUTOHINT               ( 1L &lt;&lt; 5 )
3020 #define FT_LOAD_CROP_BITMAP                  ( 1L &lt;&lt; 6 )
3021 #define FT_LOAD_PEDANTIC                     ( 1L &lt;&lt; 7 )
3022 #define FT_LOAD_IGNORE_GLOBAL_ADVANCE_WIDTH  ( 1L &lt;&lt; 9 )
3023 #define FT_LOAD_NO_RECURSE                   ( 1L &lt;&lt; 10 )
3024 #define FT_LOAD_IGNORE_TRANSFORM             ( 1L &lt;&lt; 11 )
3025 #define FT_LOAD_MONOCHROME                   ( 1L &lt;&lt; 12 )
3026 #define FT_LOAD_LINEAR_DESIGN                ( 1L &lt;&lt; 13 )
3027 #define FT_LOAD_NO_AUTOHINT                  ( 1L &lt;&lt; 15 )
<span class="line-modified">3028   /* Bits 16-19 are used by `FT_LOAD_TARGET_&#39; */</span>
3029 #define FT_LOAD_COLOR                        ( 1L &lt;&lt; 20 )
3030 #define FT_LOAD_COMPUTE_METRICS              ( 1L &lt;&lt; 21 )
3031 #define FT_LOAD_BITMAP_METRICS_ONLY          ( 1L &lt;&lt; 22 )
3032 
3033   /* */
3034 
3035   /* used internally only by certain font drivers */
3036 #define FT_LOAD_ADVANCE_ONLY                 ( 1L &lt;&lt; 8 )
3037 #define FT_LOAD_SBITS_ONLY                   ( 1L &lt;&lt; 14 )
3038 
3039 
3040   /**************************************************************************
3041    *
3042    * @enum:
3043    *   FT_LOAD_TARGET_XXX
3044    *
3045    * @description:
3046    *   A list of values to select a specific hinting algorithm for the
<span class="line-modified">3047    *   hinter.  You should OR one of these values to your `load_flags&#39;</span>
<span class="line-modified">3048    *   when calling @FT_Load_Glyph.</span>
3049    *
<span class="line-modified">3050    *   Note that a font&#39;s native hinters may ignore the hinting algorithm</span>
<span class="line-modified">3051    *   you have specified (e.g., the TrueType bytecode interpreter).  You</span>
<span class="line-modified">3052    *   can set @FT_LOAD_FORCE_AUTOHINT to ensure that the auto-hinter is</span>
<span class="line-removed">3053    *   used.</span>
3054    *
3055    * @values:
3056    *   FT_LOAD_TARGET_NORMAL ::
3057    *     The default hinting algorithm, optimized for standard gray-level
<span class="line-modified">3058    *     rendering.  For monochrome output, use @FT_LOAD_TARGET_MONO</span>
<span class="line-removed">3059    *     instead.</span>
3060    *
3061    *   FT_LOAD_TARGET_LIGHT ::
3062    *     A lighter hinting algorithm for gray-level modes.  Many generated
3063    *     glyphs are fuzzier but better resemble their original shape.  This
3064    *     is achieved by snapping glyphs to the pixel grid only vertically
3065    *     (Y-axis), as is done by FreeType&#39;s new CFF engine or Microsoft&#39;s
3066    *     ClearType font renderer.  This preserves inter-glyph spacing in
3067    *     horizontal text.  The snapping is done either by the native font
3068    *     driver, if the driver itself and the font support it, or by the
3069    *     auto-hinter.
3070    *
3071    *     Advance widths are rounded to integer values; however, using the
<span class="line-modified">3072    *     `lsb_delta&#39; and `rsb_delta&#39; fields of @FT_GlyphSlotRec, it is</span>
3073    *     possible to get fractional advance widths for subpixel positioning
3074    *     (which is recommended to use).
3075    *
<span class="line-modified">3076    *     If configuration option AF_CONFIG_OPTION_TT_SIZE_METRICS is active,</span>
<span class="line-modified">3077    *     TrueType-like metrics are used to make this mode behave similarly</span>
<span class="line-modified">3078    *     as in unpatched FreeType versions between 2.4.6 and 2.7.1</span>
3079    *     (inclusive).
3080    *
3081    *   FT_LOAD_TARGET_MONO ::
3082    *     Strong hinting algorithm that should only be used for monochrome
3083    *     output.  The result is probably unpleasant if the glyph is rendered
3084    *     in non-monochrome modes.
3085    *






3086    *   FT_LOAD_TARGET_LCD ::
3087    *     A variant of @FT_LOAD_TARGET_LIGHT optimized for horizontally
3088    *     decimated LCD displays.
3089    *
3090    *   FT_LOAD_TARGET_LCD_V ::
3091    *     A variant of @FT_LOAD_TARGET_NORMAL optimized for vertically
3092    *     decimated LCD displays.
3093    *
3094    * @note:
<span class="line-modified">3095    *   You should use only _one_ of the FT_LOAD_TARGET_XXX values in your</span>
<span class="line-modified">3096    *   `load_flags&#39;.  They can&#39;t be ORed.</span>
3097    *
3098    *   If @FT_LOAD_RENDER is also set, the glyph is rendered in the
3099    *   corresponding mode (i.e., the mode that matches the used algorithm
<span class="line-modified">3100    *   best).  An exception is FT_LOAD_TARGET_MONO since it implies</span>
3101    *   @FT_LOAD_MONOCHROME.
3102    *
3103    *   You can use a hinting algorithm that doesn&#39;t correspond to the same
<span class="line-modified">3104    *   rendering mode.  As an example, it is possible to use the `light&#39;</span>
3105    *   hinting algorithm and have the results rendered in horizontal LCD
3106    *   pixel mode, with code like
3107    *
<span class="line-modified">3108    *     {</span>
<span class="line-modified">3109    *       FT_Load_Glyph( face, glyph_index,</span>
<span class="line-modified">3110    *                      load_flags | FT_LOAD_TARGET_LIGHT );</span>
3111    *
<span class="line-modified">3112    *       FT_Render_Glyph( face-&gt;glyph, FT_RENDER_MODE_LCD );</span>
<span class="line-modified">3113    *     }</span>
3114    *
3115    *   In general, you should stick with one rendering mode.  For example,
3116    *   switching between @FT_LOAD_TARGET_NORMAL and @FT_LOAD_TARGET_MONO
3117    *   enforces a lot of recomputation for TrueType fonts, which is slow.
3118    *   Another reason is caching: Selecting a different mode usually causes
3119    *   changes in both the outlines and the rasterized bitmaps; it is thus
3120    *   necessary to empty the cache after a mode switch to avoid false hits.
3121    *
3122    */
3123 #define FT_LOAD_TARGET_( x )   ( (FT_Int32)( (x) &amp; 15 ) &lt;&lt; 16 )
3124 
3125 #define FT_LOAD_TARGET_NORMAL  FT_LOAD_TARGET_( FT_RENDER_MODE_NORMAL )
3126 #define FT_LOAD_TARGET_LIGHT   FT_LOAD_TARGET_( FT_RENDER_MODE_LIGHT  )
3127 #define FT_LOAD_TARGET_MONO    FT_LOAD_TARGET_( FT_RENDER_MODE_MONO   )
3128 #define FT_LOAD_TARGET_LCD     FT_LOAD_TARGET_( FT_RENDER_MODE_LCD    )
3129 #define FT_LOAD_TARGET_LCD_V   FT_LOAD_TARGET_( FT_RENDER_MODE_LCD_V  )
3130 
3131 
3132   /**************************************************************************
3133    *
3134    * @macro:
3135    *   FT_LOAD_TARGET_MODE
3136    *
3137    * @description:
3138    *   Return the @FT_Render_Mode corresponding to a given
3139    *   @FT_LOAD_TARGET_XXX value.
3140    *
3141    */
3142 #define FT_LOAD_TARGET_MODE( x )  ( (FT_Render_Mode)( ( (x) &gt;&gt; 16 ) &amp; 15 ) )
3143 
3144 
<span class="line-modified">3145   /*************************************************************************/</span>
<span class="line-modified">3146   /*                                                                       */</span>
<span class="line-modified">3147   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3148   /*    FT_Set_Transform                                                   */</span>
<span class="line-modified">3149   /*                                                                       */</span>
<span class="line-modified">3150   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3151   /*    Set the transformation that is applied to glyph images when they   */</span>
<span class="line-modified">3152   /*    are loaded into a glyph slot through @FT_Load_Glyph.               */</span>
<span class="line-modified">3153   /*                                                                       */</span>
<span class="line-modified">3154   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">3155   /*    face   :: A handle to the source face object.                      */</span>
<span class="line-modified">3156   /*                                                                       */</span>
<span class="line-modified">3157   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3158   /*    matrix :: A pointer to the transformation&#39;s 2x2 matrix.  Use NULL  */</span>
<span class="line-modified">3159   /*              for the identity matrix.                                 */</span>
<span class="line-modified">3160   /*    delta  :: A pointer to the translation vector.  Use NULL for the   */</span>
<span class="line-modified">3161   /*              null vector.                                             */</span>
<span class="line-modified">3162   /*                                                                       */</span>
<span class="line-modified">3163   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3164   /*    The transformation is only applied to scalable image formats after */</span>
<span class="line-modified">3165   /*    the glyph has been loaded.  It means that hinting is unaltered by  */</span>
<span class="line-modified">3166   /*    the transformation and is performed on the character size given in */</span>
<span class="line-modified">3167   /*    the last call to @FT_Set_Char_Size or @FT_Set_Pixel_Sizes.         */</span>
<span class="line-modified">3168   /*                                                                       */</span>
<span class="line-modified">3169   /*    Note that this also transforms the `face.glyph.advance&#39; field, but */</span>
<span class="line-modified">3170   /*    *not* the values in `face.glyph.metrics&#39;.                          */</span>
<span class="line-modified">3171   /*                                                                       */</span>


3172   FT_EXPORT( void )
3173   FT_Set_Transform( FT_Face     face,
3174                     FT_Matrix*  matrix,
3175                     FT_Vector*  delta );
3176 
3177 
<span class="line-modified">3178   /*************************************************************************/</span>
<span class="line-modified">3179   /*                                                                       */</span>
<span class="line-modified">3180   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">3181   /*    FT_Render_Mode                                                     */</span>
<span class="line-modified">3182   /*                                                                       */</span>
<span class="line-modified">3183   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3184   /*    Render modes supported by FreeType~2.  Each mode corresponds to a  */</span>
<span class="line-modified">3185   /*    specific type of scanline conversion performed on the outline.     */</span>
<span class="line-modified">3186   /*                                                                       */</span>
<span class="line-modified">3187   /*    For bitmap fonts and embedded bitmaps the `bitmap-&gt;pixel_mode&#39;     */</span>
<span class="line-modified">3188   /*    field in the @FT_GlyphSlotRec structure gives the format of the    */</span>
<span class="line-modified">3189   /*    returned bitmap.                                                   */</span>
<span class="line-modified">3190   /*                                                                       */</span>
<span class="line-modified">3191   /*    All modes except @FT_RENDER_MODE_MONO use 256 levels of opacity,   */</span>
<span class="line-modified">3192   /*    indicating pixel coverage.  Use linear alpha blending and gamma    */</span>
<span class="line-modified">3193   /*    correction to correctly render non-monochrome glyph bitmaps onto a */</span>
<span class="line-modified">3194   /*    surface; see @FT_Render_Glyph.                                     */</span>
<span class="line-modified">3195   /*                                                                       */</span>
<span class="line-modified">3196   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">3197   /*    FT_RENDER_MODE_NORMAL ::                                           */</span>
<span class="line-modified">3198   /*      Default render mode; it corresponds to 8-bit anti-aliased        */</span>
<span class="line-modified">3199   /*      bitmaps.                                                         */</span>
<span class="line-modified">3200   /*                                                                       */</span>
<span class="line-modified">3201   /*    FT_RENDER_MODE_LIGHT ::                                            */</span>
<span class="line-modified">3202   /*      This is equivalent to @FT_RENDER_MODE_NORMAL.  It is only        */</span>
<span class="line-modified">3203   /*      defined as a separate value because render modes are also used   */</span>
<span class="line-modified">3204   /*      indirectly to define hinting algorithm selectors.  See           */</span>
<span class="line-modified">3205   /*      @FT_LOAD_TARGET_XXX for details.                                 */</span>
<span class="line-modified">3206   /*                                                                       */</span>
<span class="line-modified">3207   /*    FT_RENDER_MODE_MONO ::                                             */</span>
<span class="line-modified">3208   /*      This mode corresponds to 1-bit bitmaps (with 2~levels of         */</span>
<span class="line-modified">3209   /*      opacity).                                                        */</span>
<span class="line-modified">3210   /*                                                                       */</span>
<span class="line-modified">3211   /*    FT_RENDER_MODE_LCD ::                                              */</span>
<span class="line-modified">3212   /*      This mode corresponds to horizontal RGB and BGR subpixel         */</span>
<span class="line-modified">3213   /*      displays like LCD screens.  It produces 8-bit bitmaps that are   */</span>
<span class="line-modified">3214   /*      3~times the width of the original glyph outline in pixels, and   */</span>
<span class="line-modified">3215   /*      which use the @FT_PIXEL_MODE_LCD mode.                           */</span>
<span class="line-modified">3216   /*                                                                       */</span>
<span class="line-modified">3217   /*    FT_RENDER_MODE_LCD_V ::                                            */</span>
<span class="line-modified">3218   /*      This mode corresponds to vertical RGB and BGR subpixel displays  */</span>
<span class="line-modified">3219   /*      (like PDA screens, rotated LCD displays, etc.).  It produces     */</span>
<span class="line-modified">3220   /*      8-bit bitmaps that are 3~times the height of the original        */</span>
<span class="line-modified">3221   /*      glyph outline in pixels and use the @FT_PIXEL_MODE_LCD_V mode.   */</span>
<span class="line-modified">3222   /*                                                                       */</span>
<span class="line-modified">3223   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3224   /*    Should you define FT_CONFIG_OPTION_SUBPIXEL_RENDERING in your      */</span>
<span class="line-modified">3225   /*    `ftoption.h&#39;, which enables patented ClearType-style rendering,    */</span>
<span class="line-modified">3226   /*    the LCD-optimized glyph bitmaps should be filtered to reduce color */</span>
<span class="line-modified">3227   /*    fringes inherent to this technology.  You can either set up LCD    */</span>
<span class="line-modified">3228   /*    filtering with @FT_Library_SetLcdFilter or @FT_Face_Properties,    */</span>
<span class="line-modified">3229   /*    or do the filtering yourself.  The default FreeType LCD rendering  */</span>
<span class="line-modified">3230   /*    technology does not require filtering.                             */</span>
<span class="line-modified">3231   /*                                                                       */</span>
<span class="line-modified">3232   /*    The selected render mode only affects vector glyphs of a font.     */</span>
<span class="line-modified">3233   /*    Embedded bitmaps often have a different pixel mode like            */</span>
<span class="line-modified">3234   /*    @FT_PIXEL_MODE_MONO.  You can use @FT_Bitmap_Convert to transform  */</span>
<span class="line-removed">3235   /*    them into 8-bit pixmaps.                                           */</span>
<span class="line-removed">3236   /*                                                                       */</span>
3237   typedef enum  FT_Render_Mode_
3238   {
3239     FT_RENDER_MODE_NORMAL = 0,
3240     FT_RENDER_MODE_LIGHT,
3241     FT_RENDER_MODE_MONO,
3242     FT_RENDER_MODE_LCD,
3243     FT_RENDER_MODE_LCD_V,
3244 
3245     FT_RENDER_MODE_MAX
3246 
3247   } FT_Render_Mode;
3248 
3249 
3250   /* these constants are deprecated; use the corresponding */
<span class="line-modified">3251   /* `FT_Render_Mode&#39; values instead                       */</span>
3252 #define ft_render_mode_normal  FT_RENDER_MODE_NORMAL
3253 #define ft_render_mode_mono    FT_RENDER_MODE_MONO
3254 
3255 
<span class="line-modified">3256   /*************************************************************************/</span>
<span class="line-modified">3257   /*                                                                       */</span>
<span class="line-modified">3258   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3259   /*    FT_Render_Glyph                                                    */</span>
<span class="line-modified">3260   /*                                                                       */</span>
<span class="line-modified">3261   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3262   /*    Convert a given glyph image to a bitmap.  It does so by inspecting */</span>
<span class="line-modified">3263   /*    the glyph image format, finding the relevant renderer, and         */</span>
<span class="line-modified">3264   /*    invoking it.                                                       */</span>
<span class="line-modified">3265   /*                                                                       */</span>
<span class="line-modified">3266   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">3267   /*    slot        :: A handle to the glyph slot containing the image to  */</span>
<span class="line-modified">3268   /*                   convert.                                            */</span>
<span class="line-modified">3269   /*                                                                       */</span>
<span class="line-modified">3270   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3271   /*    render_mode :: The render mode used to render the glyph image into */</span>
<span class="line-modified">3272   /*                   a bitmap.  See @FT_Render_Mode for a list of        */</span>
<span class="line-modified">3273   /*                   possible values.                                    */</span>
<span class="line-modified">3274   /*                                                                       */</span>
<span class="line-modified">3275   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3276   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">3277   /*                                                                       */</span>
<span class="line-modified">3278   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3279   /*    To get meaningful results, font scaling values must be set with    */</span>
<span class="line-modified">3280   /*    functions like @FT_Set_Char_Size before calling `FT_Render_Glyph&#39;. */</span>
<span class="line-modified">3281   /*                                                                       */</span>
<span class="line-modified">3282   /*    When FreeType outputs a bitmap of a glyph, it really outputs an    */</span>
<span class="line-modified">3283   /*    alpha coverage map.  If a pixel is completely covered by a         */</span>
<span class="line-modified">3284   /*    filled-in outline, the bitmap contains 0xFF at that pixel, meaning */</span>
<span class="line-modified">3285   /*    that 0xFF/0xFF fraction of that pixel is covered, meaning the      */</span>
<span class="line-modified">3286   /*    pixel is 100% black (or 0% bright).  If a pixel is only 50%        */</span>
<span class="line-modified">3287   /*    covered (value 0x80), the pixel is made 50% black (50% bright or a */</span>
<span class="line-modified">3288   /*    middle shade of grey).  0% covered means 0% black (100% bright or  */</span>
<span class="line-modified">3289   /*    white).                                                            */</span>
<span class="line-modified">3290   /*                                                                       */</span>
<span class="line-modified">3291   /*    On high-DPI screens like on smartphones and tablets, the pixels    */</span>
<span class="line-modified">3292   /*    are so small that their chance of being completely covered and     */</span>
<span class="line-modified">3293   /*    therefore completely black are fairly good.  On the low-DPI        */</span>
<span class="line-modified">3294   /*    screens, however, the situation is different.  The pixels are too  */</span>
<span class="line-modified">3295   /*    large for most of the details of a glyph and shades of gray are    */</span>
<span class="line-modified">3296   /*    the norm rather than the exception.                                */</span>
<span class="line-modified">3297   /*                                                                       */</span>
<span class="line-modified">3298   /*    This is relevant because all our screens have a second problem:    */</span>
<span class="line-modified">3299   /*    they are not linear.  1~+~1 is not~2.  Twice the value does not    */</span>
<span class="line-modified">3300   /*    result in twice the brightness.  When a pixel is only 50% covered, */</span>
<span class="line-modified">3301   /*    the coverage map says 50% black, and this translates to a pixel    */</span>
<span class="line-modified">3302   /*    value of 128 when you use 8~bits per channel (0-255).  However,    */</span>
<span class="line-modified">3303   /*    this does not translate to 50% brightness for that pixel on our    */</span>
<span class="line-modified">3304   /*    sRGB and gamma~2.2 screens.  Due to their non-linearity, they      */</span>
<span class="line-modified">3305   /*    dwell longer in the darks and only a pixel value of about 186      */</span>
<span class="line-modified">3306   /*    results in 50% brightness -- 128 ends up too dark on both bright   */</span>
<span class="line-modified">3307   /*    and dark backgrounds.  The net result is that dark text looks      */</span>
<span class="line-modified">3308   /*    burnt-out, pixely and blotchy on bright background, bright text    */</span>
<span class="line-modified">3309   /*    too frail on dark backgrounds, and colored text on colored         */</span>
<span class="line-modified">3310   /*    background (for example, red on green) seems to have dark halos or */</span>
<span class="line-modified">3311   /*    `dirt&#39; around it.  The situation is especially ugly for diagonal   */</span>
<span class="line-modified">3312   /*    stems like in `w&#39; glyph shapes where the quality of FreeType&#39;s     */</span>
<span class="line-modified">3313   /*    anti-aliasing depends on the correct display of grays.  On         */</span>
<span class="line-modified">3314   /*    high-DPI screens where smaller, fully black pixels reign supreme,  */</span>
<span class="line-modified">3315   /*    this doesn&#39;t matter, but on our low-DPI screens with all the gray  */</span>
<span class="line-modified">3316   /*    shades, it does.  0% and 100% brightness are the same things in    */</span>
<span class="line-modified">3317   /*    linear and non-linear space, just all the shades in-between        */</span>
<span class="line-modified">3318   /*    aren&#39;t.                                                            */</span>
<span class="line-modified">3319   /*                                                                       */</span>
<span class="line-modified">3320   /*    The blending function for placing text over a background is        */</span>
<span class="line-modified">3321   /*                                                                       */</span>
<span class="line-modified">3322   /*    {                                                                  */</span>
<span class="line-modified">3323   /*      dst = alpha * src + (1 - alpha) * dst    ,                       */</span>
<span class="line-modified">3324   /*    }                                                                  */</span>
<span class="line-modified">3325   /*                                                                       */</span>
<span class="line-modified">3326   /*    which is known as the OVER operator.                               */</span>
<span class="line-modified">3327   /*                                                                       */</span>
<span class="line-modified">3328   /*    To correctly composite an antialiased pixel of a glyph onto a      */</span>
<span class="line-modified">3329   /*    surface,                                                           */</span>
<span class="line-modified">3330   /*                                                                       */</span>
<span class="line-modified">3331   /*    1. take the foreground and background colors (e.g., in sRGB space) */</span>
<span class="line-modified">3332   /*       and apply gamma to get them in a linear space,                  */</span>
<span class="line-modified">3333   /*                                                                       */</span>
<span class="line-modified">3334   /*    2. use OVER to blend the two linear colors using the glyph pixel   */</span>
<span class="line-modified">3335   /*       as the alpha value (remember, the glyph bitmap is an alpha      */</span>
<span class="line-modified">3336   /*       coverage bitmap), and                                           */</span>
<span class="line-modified">3337   /*                                                                       */</span>
<span class="line-modified">3338   /*    3. apply inverse gamma to the blended pixel and write it back to   */</span>
<span class="line-modified">3339   /*       the image.                                                      */</span>
<span class="line-modified">3340   /*                                                                       */</span>
<span class="line-modified">3341   /*    Internal testing at Adobe found that a target inverse gamma of~1.8 */</span>
<span class="line-modified">3342   /*    for step~3 gives good results across a wide range of displays with */</span>
<span class="line-modified">3343   /*    an sRGB gamma curve or a similar one.                              */</span>
<span class="line-modified">3344   /*                                                                       */</span>
<span class="line-modified">3345   /*    This process can cost performance.  There is an approximation that */</span>
<span class="line-modified">3346   /*    does not need to know about the background color; see              */</span>
<span class="line-modified">3347   /*    https://bel.fi/alankila/lcd/ and                                   */</span>
<span class="line-modified">3348   /*    https://bel.fi/alankila/lcd/alpcor.html for details.               */</span>
<span class="line-modified">3349   /*                                                                       */</span>
<span class="line-modified">3350   /*    *ATTENTION*: Linear blending is even more important when dealing   */</span>
<span class="line-modified">3351   /*    with subpixel-rendered glyphs to prevent color-fringing!  A        */</span>
<span class="line-modified">3352   /*    subpixel-rendered glyph must first be filtered with a filter that  */</span>
<span class="line-modified">3353   /*    gives equal weight to the three color primaries and does not       */</span>
<span class="line-modified">3354   /*    exceed a sum of 0x100, see section @lcd_filtering.  Then the       */</span>
<span class="line-modified">3355   /*    only difference to gray linear blending is that subpixel-rendered  */</span>
<span class="line-modified">3356   /*    linear blending is done 3~times per pixel: red foreground subpixel */</span>
<span class="line-modified">3357   /*    to red background subpixel and so on for green and blue.           */</span>
<span class="line-modified">3358   /*                                                                       */</span>


3359   FT_EXPORT( FT_Error )
3360   FT_Render_Glyph( FT_GlyphSlot    slot,
3361                    FT_Render_Mode  render_mode );
3362 
3363 
<span class="line-modified">3364   /*************************************************************************/</span>
<span class="line-modified">3365   /*                                                                       */</span>
<span class="line-modified">3366   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">3367   /*    FT_Kerning_Mode                                                    */</span>
<span class="line-modified">3368   /*                                                                       */</span>
<span class="line-modified">3369   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3370   /*    An enumeration to specify the format of kerning values returned by */</span>
<span class="line-modified">3371   /*    @FT_Get_Kerning.                                                   */</span>
<span class="line-modified">3372   /*                                                                       */</span>
<span class="line-modified">3373   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">3374   /*    FT_KERNING_DEFAULT  :: Return grid-fitted kerning distances in     */</span>
<span class="line-modified">3375   /*                           26.6 fractional pixels.                     */</span>
<span class="line-modified">3376   /*                                                                       */</span>
<span class="line-modified">3377   /*    FT_KERNING_UNFITTED :: Return un-grid-fitted kerning distances in  */</span>
<span class="line-modified">3378   /*                           26.6 fractional pixels.                     */</span>
<span class="line-modified">3379   /*                                                                       */</span>
<span class="line-modified">3380   /*    FT_KERNING_UNSCALED :: Return the kerning vector in original font  */</span>
<span class="line-modified">3381   /*                           units.                                      */</span>
<span class="line-modified">3382   /*                                                                       */</span>
<span class="line-modified">3383   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3384   /*    FT_KERNING_DEFAULT returns full pixel values; it also makes        */</span>
<span class="line-modified">3385   /*    FreeType heuristically scale down kerning distances at small ppem  */</span>
<span class="line-modified">3386   /*    values so that they don&#39;t become too big.                          */</span>
<span class="line-modified">3387   /*                                                                       */</span>
<span class="line-modified">3388   /*    Both FT_KERNING_DEFAULT and FT_KERNING_UNFITTED use the current    */</span>
<span class="line-modified">3389   /*    horizontal scaling factor (as set e.g. with @FT_Set_Char_Size) to  */</span>
<span class="line-modified">3390   /*    convert font units to pixels.                                      */</span>
<span class="line-modified">3391   /*                                                                       */</span>
3392   typedef enum  FT_Kerning_Mode_
3393   {
3394     FT_KERNING_DEFAULT = 0,
3395     FT_KERNING_UNFITTED,
3396     FT_KERNING_UNSCALED
3397 
3398   } FT_Kerning_Mode;
3399 
3400 
3401   /* these constants are deprecated; use the corresponding */
<span class="line-modified">3402   /* `FT_Kerning_Mode&#39; values instead                      */</span>
3403 #define ft_kerning_default   FT_KERNING_DEFAULT
3404 #define ft_kerning_unfitted  FT_KERNING_UNFITTED
3405 #define ft_kerning_unscaled  FT_KERNING_UNSCALED
3406 
3407 
<span class="line-modified">3408   /*************************************************************************/</span>
<span class="line-modified">3409   /*                                                                       */</span>
<span class="line-modified">3410   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3411   /*    FT_Get_Kerning                                                     */</span>
<span class="line-modified">3412   /*                                                                       */</span>
<span class="line-modified">3413   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3414   /*    Return the kerning vector between two glyphs of the same face.     */</span>
<span class="line-modified">3415   /*                                                                       */</span>
<span class="line-modified">3416   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3417   /*    face        :: A handle to a source face object.                   */</span>
<span class="line-modified">3418   /*                                                                       */</span>
<span class="line-modified">3419   /*    left_glyph  :: The index of the left glyph in the kern pair.       */</span>
<span class="line-modified">3420   /*                                                                       */</span>
<span class="line-modified">3421   /*    right_glyph :: The index of the right glyph in the kern pair.      */</span>
<span class="line-modified">3422   /*                                                                       */</span>
<span class="line-modified">3423   /*    kern_mode   :: See @FT_Kerning_Mode for more information.          */</span>
<span class="line-modified">3424   /*                   Determines the scale and dimension of the returned  */</span>
<span class="line-modified">3425   /*                   kerning vector.                                     */</span>
<span class="line-modified">3426   /*                                                                       */</span>
<span class="line-modified">3427   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">3428   /*    akerning    :: The kerning vector.  This is either in font units,  */</span>
<span class="line-modified">3429   /*                   fractional pixels (26.6 format), or pixels for      */</span>
<span class="line-modified">3430   /*                   scalable formats, and in pixels for fixed-sizes     */</span>
<span class="line-modified">3431   /*                   formats.                                            */</span>
<span class="line-modified">3432   /*                                                                       */</span>
<span class="line-modified">3433   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3434   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">3435   /*                                                                       */</span>
<span class="line-modified">3436   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3437   /*    Only horizontal layouts (left-to-right &amp; right-to-left) are        */</span>
<span class="line-modified">3438   /*    supported by this method.  Other layouts, or more sophisticated    */</span>
<span class="line-modified">3439   /*    kernings, are out of the scope of this API function -- they can be */</span>
<span class="line-modified">3440   /*    implemented through format-specific interfaces.                    */</span>
<span class="line-modified">3441   /*                                                                       */</span>
<span class="line-modified">3442   /*    Kerning for OpenType fonts implemented in a `GPOS&#39; table is not    */</span>
<span class="line-modified">3443   /*    supported; use @FT_HAS_KERNING to find out whether a font has data */</span>
<span class="line-modified">3444   /*    that can be extracted with `FT_Get_Kerning&#39;.                       */</span>
<span class="line-modified">3445   /*                                                                       */</span>



3446   FT_EXPORT( FT_Error )
3447   FT_Get_Kerning( FT_Face     face,
3448                   FT_UInt     left_glyph,
3449                   FT_UInt     right_glyph,
3450                   FT_UInt     kern_mode,
3451                   FT_Vector  *akerning );
3452 
3453 
<span class="line-modified">3454   /*************************************************************************/</span>
<span class="line-modified">3455   /*                                                                       */</span>
<span class="line-modified">3456   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3457   /*    FT_Get_Track_Kerning                                               */</span>
<span class="line-modified">3458   /*                                                                       */</span>
<span class="line-modified">3459   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3460   /*    Return the track kerning for a given face object at a given size.  */</span>
<span class="line-modified">3461   /*                                                                       */</span>
<span class="line-modified">3462   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3463   /*    face       :: A handle to a source face object.                    */</span>
<span class="line-modified">3464   /*                                                                       */</span>
<span class="line-modified">3465   /*    point_size :: The point size in 16.16 fractional points.           */</span>
<span class="line-modified">3466   /*                                                                       */</span>
<span class="line-modified">3467   /*    degree     :: The degree of tightness.  Increasingly negative      */</span>
<span class="line-modified">3468   /*                  values represent tighter track kerning, while        */</span>
<span class="line-modified">3469   /*                  increasingly positive values represent looser track  */</span>
<span class="line-modified">3470   /*                  kerning.  Value zero means no track kerning.         */</span>
<span class="line-modified">3471   /*                                                                       */</span>
<span class="line-modified">3472   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">3473   /*    akerning   :: The kerning in 16.16 fractional points, to be        */</span>
<span class="line-modified">3474   /*                  uniformly applied between all glyphs.                */</span>
<span class="line-modified">3475   /*                                                                       */</span>
<span class="line-modified">3476   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3477   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">3478   /*                                                                       */</span>
<span class="line-modified">3479   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3480   /*    Currently, only the Type~1 font driver supports track kerning,     */</span>
<span class="line-modified">3481   /*    using data from AFM files (if attached with @FT_Attach_File or     */</span>
<span class="line-modified">3482   /*    @FT_Attach_Stream).                                                */</span>
<span class="line-modified">3483   /*                                                                       */</span>
<span class="line-modified">3484   /*    Only very few AFM files come with track kerning data; please refer */</span>
<span class="line-modified">3485   /*    to Adobe&#39;s AFM specification for more details.                     */</span>
<span class="line-modified">3486   /*                                                                       */</span>



3487   FT_EXPORT( FT_Error )
3488   FT_Get_Track_Kerning( FT_Face    face,
3489                         FT_Fixed   point_size,
3490                         FT_Int     degree,
3491                         FT_Fixed*  akerning );
3492 
3493 
<span class="line-modified">3494   /*************************************************************************/</span>
<span class="line-modified">3495   /*                                                                       */</span>
<span class="line-modified">3496   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3497   /*    FT_Get_Glyph_Name                                                  */</span>
<span class="line-modified">3498   /*                                                                       */</span>
<span class="line-modified">3499   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3500   /*    Retrieve the ASCII name of a given glyph in a face.  This only     */</span>
<span class="line-modified">3501   /*    works for those faces where @FT_HAS_GLYPH_NAMES(face) returns~1.   */</span>
<span class="line-modified">3502   /*                                                                       */</span>
<span class="line-modified">3503   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3504   /*    face        :: A handle to a source face object.                   */</span>
<span class="line-modified">3505   /*                                                                       */</span>
<span class="line-modified">3506   /*    glyph_index :: The glyph index.                                    */</span>
<span class="line-modified">3507   /*                                                                       */</span>
<span class="line-modified">3508   /*    buffer_max  :: The maximum number of bytes available in the        */</span>
<span class="line-modified">3509   /*                   buffer.                                             */</span>
<span class="line-modified">3510   /*                                                                       */</span>
<span class="line-modified">3511   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">3512   /*    buffer      :: A pointer to a target buffer where the name is      */</span>
<span class="line-modified">3513   /*                   copied to.                                          */</span>
<span class="line-modified">3514   /*                                                                       */</span>
<span class="line-modified">3515   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3516   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">3517   /*                                                                       */</span>
<span class="line-modified">3518   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3519   /*    An error is returned if the face doesn&#39;t provide glyph names or if */</span>
<span class="line-modified">3520   /*    the glyph index is invalid.  In all cases of failure, the first    */</span>
<span class="line-modified">3521   /*    byte of `buffer&#39; is set to~0 to indicate an empty name.            */</span>
<span class="line-modified">3522   /*                                                                       */</span>
<span class="line-modified">3523   /*    The glyph name is truncated to fit within the buffer if it is too  */</span>
<span class="line-modified">3524   /*    long.  The returned string is always zero-terminated.              */</span>
<span class="line-modified">3525   /*                                                                       */</span>
<span class="line-modified">3526   /*    Be aware that FreeType reorders glyph indices internally so that   */</span>
<span class="line-modified">3527   /*    glyph index~0 always corresponds to the `missing glyph&#39; (called    */</span>
<span class="line-modified">3528   /*    `.notdef&#39;).                                                        */</span>
<span class="line-modified">3529   /*                                                                       */</span>
<span class="line-modified">3530   /*    This function always returns an error if the config macro          */</span>
<span class="line-modified">3531   /*    `FT_CONFIG_OPTION_NO_GLYPH_NAMES&#39; is not defined in `ftoption.h&#39;.  */</span>
<span class="line-modified">3532   /*                                                                       */</span>

3533   FT_EXPORT( FT_Error )
3534   FT_Get_Glyph_Name( FT_Face     face,
3535                      FT_UInt     glyph_index,
3536                      FT_Pointer  buffer,
3537                      FT_UInt     buffer_max );
3538 
3539 
<span class="line-modified">3540   /*************************************************************************/</span>
<span class="line-modified">3541   /*                                                                       */</span>
<span class="line-modified">3542   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3543   /*    FT_Get_Postscript_Name                                             */</span>
<span class="line-modified">3544   /*                                                                       */</span>
<span class="line-modified">3545   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3546   /*    Retrieve the ASCII PostScript name of a given face, if available.  */</span>
<span class="line-modified">3547   /*    This only works with PostScript, TrueType, and OpenType fonts.     */</span>
<span class="line-modified">3548   /*                                                                       */</span>
<span class="line-modified">3549   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3550   /*    face :: A handle to the source face object.                        */</span>
<span class="line-modified">3551   /*                                                                       */</span>
<span class="line-modified">3552   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3553   /*    A pointer to the face&#39;s PostScript name.  NULL if unavailable.     */</span>
<span class="line-modified">3554   /*                                                                       */</span>
<span class="line-modified">3555   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3556   /*    The returned pointer is owned by the face and is destroyed with    */</span>
<span class="line-modified">3557   /*    it.                                                                */</span>
<span class="line-modified">3558   /*                                                                       */</span>
<span class="line-modified">3559   /*    For variation fonts, this string changes if you select a different */</span>
<span class="line-modified">3560   /*    instance, and you have to call `FT_Get_PostScript_Name&#39; again to   */</span>
<span class="line-modified">3561   /*    retrieve it.  FreeType follows Adobe TechNote #5902, `Generating   */</span>
<span class="line-modified">3562   /*    PostScript Names for Fonts Using OpenType Font Variations&#39;.        */</span>
<span class="line-modified">3563   /*                                                                       */</span>
<span class="line-modified">3564   /*      https://download.macromedia.com/pub/developer/opentype/tech-notes/5902.AdobePSNameGeneration.html */</span>
<span class="line-modified">3565   /*                                                                       */</span>
<span class="line-modified">3566   /*    [Since 2.9] Special PostScript names for named instances are only  */</span>
<span class="line-modified">3567   /*    returned if the named instance is set with @FT_Set_Named_Instance  */</span>
<span class="line-modified">3568   /*    (and the font has corresponding entries in its `fvar&#39; table).  If  */</span>
<span class="line-modified">3569   /*    @FT_IS_VARIATION returns true, the algorithmically derived         */</span>
<span class="line-modified">3570   /*    PostScript name is provided, not looking up special entries for    */</span>
<span class="line-modified">3571   /*    named instances.                                                   */</span>
<span class="line-removed">3572   /*                                                                       */</span>
3573   FT_EXPORT( const char* )
3574   FT_Get_Postscript_Name( FT_Face  face );
3575 
3576 
<span class="line-modified">3577   /*************************************************************************/</span>
<span class="line-modified">3578   /*                                                                       */</span>
<span class="line-modified">3579   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3580   /*    FT_Select_Charmap                                                  */</span>
<span class="line-modified">3581   /*                                                                       */</span>
<span class="line-modified">3582   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3583   /*    Select a given charmap by its encoding tag (as listed in           */</span>
<span class="line-modified">3584   /*    `freetype.h&#39;).                                                     */</span>
<span class="line-modified">3585   /*                                                                       */</span>
<span class="line-modified">3586   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">3587   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">3588   /*                                                                       */</span>
<span class="line-modified">3589   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3590   /*    encoding :: A handle to the selected encoding.                     */</span>
<span class="line-modified">3591   /*                                                                       */</span>
<span class="line-modified">3592   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3593   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">3594   /*                                                                       */</span>
<span class="line-modified">3595   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3596   /*    This function returns an error if no charmap in the face           */</span>
<span class="line-modified">3597   /*    corresponds to the encoding queried here.                          */</span>
<span class="line-modified">3598   /*                                                                       */</span>
<span class="line-modified">3599   /*    Because many fonts contain more than a single cmap for Unicode     */</span>
<span class="line-modified">3600   /*    encoding, this function has some special code to select the one    */</span>
<span class="line-modified">3601   /*    that covers Unicode best (`best&#39; in the sense that a UCS-4 cmap is */</span>
<span class="line-modified">3602   /*    preferred to a UCS-2 cmap).  It is thus preferable to              */</span>
<span class="line-modified">3603   /*    @FT_Set_Charmap in this case.                                      */</span>
<span class="line-modified">3604   /*                                                                       */</span>


3605   FT_EXPORT( FT_Error )
3606   FT_Select_Charmap( FT_Face      face,
3607                      FT_Encoding  encoding );
3608 
3609 
<span class="line-modified">3610   /*************************************************************************/</span>
<span class="line-modified">3611   /*                                                                       */</span>
<span class="line-modified">3612   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3613   /*    FT_Set_Charmap                                                     */</span>
<span class="line-modified">3614   /*                                                                       */</span>
<span class="line-modified">3615   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3616   /*    Select a given charmap for character code to glyph index mapping.  */</span>
<span class="line-modified">3617   /*                                                                       */</span>
<span class="line-modified">3618   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">3619   /*    face    :: A handle to the source face object.                     */</span>
<span class="line-modified">3620   /*                                                                       */</span>
<span class="line-modified">3621   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3622   /*    charmap :: A handle to the selected charmap.                       */</span>
<span class="line-modified">3623   /*                                                                       */</span>
<span class="line-modified">3624   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3625   /*    FreeType error code.  0~means success.                             */</span>
<span class="line-modified">3626   /*                                                                       */</span>
<span class="line-modified">3627   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3628   /*    This function returns an error if the charmap is not part of       */</span>
<span class="line-modified">3629   /*    the face (i.e., if it is not listed in the `face-&gt;charmaps&#39;        */</span>
<span class="line-modified">3630   /*    table).                                                            */</span>
<span class="line-modified">3631   /*                                                                       */</span>
<span class="line-modified">3632   /*    It also fails if an OpenType type~14 charmap is selected (which    */</span>
<span class="line-modified">3633   /*    doesn&#39;t map character codes to glyph indices at all).              */</span>
<span class="line-modified">3634   /*                                                                       */</span>

3635   FT_EXPORT( FT_Error )
3636   FT_Set_Charmap( FT_Face     face,
3637                   FT_CharMap  charmap );
3638 
3639 
<span class="line-modified">3640   /*************************************************************************</span>
3641    *
3642    * @function:
3643    *   FT_Get_Charmap_Index
3644    *
3645    * @description:
3646    *   Retrieve index of a given charmap.
3647    *
3648    * @input:
3649    *   charmap ::
3650    *     A handle to a charmap.
3651    *
3652    * @return:
3653    *   The index into the array of character maps within the face to which
<span class="line-modified">3654    *   `charmap&#39; belongs.  If an error occurs, -1 is returned.</span>
3655    *
3656    */
3657   FT_EXPORT( FT_Int )
3658   FT_Get_Charmap_Index( FT_CharMap  charmap );
3659 
3660 
<span class="line-modified">3661   /*************************************************************************/</span>
<span class="line-modified">3662   /*                                                                       */</span>
<span class="line-modified">3663   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3664   /*    FT_Get_Char_Index                                                  */</span>
<span class="line-modified">3665   /*                                                                       */</span>
<span class="line-modified">3666   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3667   /*    Return the glyph index of a given character code.  This function   */</span>
<span class="line-modified">3668   /*    uses the currently selected charmap to do the mapping.             */</span>
<span class="line-modified">3669   /*                                                                       */</span>
<span class="line-modified">3670   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3671   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">3672   /*                                                                       */</span>
<span class="line-modified">3673   /*    charcode :: The character code.                                    */</span>
<span class="line-modified">3674   /*                                                                       */</span>
<span class="line-modified">3675   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3676   /*    The glyph index.  0~means `undefined character code&#39;.              */</span>
<span class="line-modified">3677   /*                                                                       */</span>
<span class="line-modified">3678   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3679   /*    If you use FreeType to manipulate the contents of font files       */</span>
<span class="line-modified">3680   /*    directly, be aware that the glyph index returned by this function  */</span>
<span class="line-modified">3681   /*    doesn&#39;t always correspond to the internal indices used within the  */</span>
<span class="line-modified">3682   /*    file.  This is done to ensure that value~0 always corresponds to   */</span>
<span class="line-modified">3683   /*    the `missing glyph&#39;.  If the first glyph is not named `.notdef&#39;,   */</span>
<span class="line-modified">3684   /*    then for Type~1 and Type~42 fonts, `.notdef&#39; will be moved into    */</span>
<span class="line-modified">3685   /*    the glyph ID~0 position, and whatever was there will be moved to   */</span>
<span class="line-modified">3686   /*    the position `.notdef&#39; had.  For Type~1 fonts, if there is no      */</span>
<span class="line-modified">3687   /*    `.notdef&#39; glyph at all, then one will be created at index~0 and    */</span>
<span class="line-modified">3688   /*    whatever was there will be moved to the last index -- Type~42      */</span>
<span class="line-modified">3689   /*    fonts are considered invalid under this condition.                 */</span>
<span class="line-modified">3690   /*                                                                       */</span>

3691   FT_EXPORT( FT_UInt )
3692   FT_Get_Char_Index( FT_Face   face,
3693                      FT_ULong  charcode );
3694 
3695 
<span class="line-modified">3696   /*************************************************************************/</span>
<span class="line-modified">3697   /*                                                                       */</span>
<span class="line-modified">3698   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3699   /*    FT_Get_First_Char                                                  */</span>
<span class="line-modified">3700   /*                                                                       */</span>
<span class="line-modified">3701   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3702   /*    Return the first character code in the current charmap of a given  */</span>
<span class="line-modified">3703   /*    face, together with its corresponding glyph index.                 */</span>
<span class="line-modified">3704   /*                                                                       */</span>
<span class="line-modified">3705   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3706   /*    face    :: A handle to the source face object.                     */</span>
<span class="line-modified">3707   /*                                                                       */</span>
<span class="line-modified">3708   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">3709   /*    agindex :: Glyph index of first character code.  0~if charmap is   */</span>
<span class="line-modified">3710   /*               empty.                                                  */</span>
<span class="line-modified">3711   /*                                                                       */</span>
<span class="line-modified">3712   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3713   /*    The charmap&#39;s first character code.                                */</span>
<span class="line-modified">3714   /*                                                                       */</span>
<span class="line-modified">3715   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3716   /*    You should use this function together with @FT_Get_Next_Char to    */</span>
<span class="line-modified">3717   /*    parse all character codes available in a given charmap.  The code  */</span>
<span class="line-modified">3718   /*    should look like this:                                             */</span>
<span class="line-modified">3719   /*                                                                       */</span>
<span class="line-modified">3720   /*    {                                                                  */</span>
<span class="line-modified">3721   /*      FT_ULong  charcode;                                              */</span>
<span class="line-modified">3722   /*      FT_UInt   gindex;                                                */</span>
<span class="line-modified">3723   /*                                                                       */</span>
<span class="line-modified">3724   /*                                                                       */</span>
<span class="line-modified">3725   /*      charcode = FT_Get_First_Char( face, &amp;gindex );                   */</span>
<span class="line-modified">3726   /*      while ( gindex != 0 )                                            */</span>
<span class="line-modified">3727   /*      {                                                                */</span>
<span class="line-modified">3728   /*        ... do something with (charcode,gindex) pair ...               */</span>
<span class="line-modified">3729   /*                                                                       */</span>
<span class="line-modified">3730   /*        charcode = FT_Get_Next_Char( face, charcode, &amp;gindex );        */</span>
<span class="line-modified">3731   /*      }                                                                */</span>
<span class="line-modified">3732   /*    }                                                                  */</span>
<span class="line-modified">3733   /*                                                                       */</span>
<span class="line-modified">3734   /*    Be aware that character codes can have values up to 0xFFFFFFFF;    */</span>
<span class="line-modified">3735   /*    this might happen for non-Unicode or malformed cmaps.  However,    */</span>
<span class="line-modified">3736   /*    even with regular Unicode encoding, so-called `last resort fonts&#39;  */</span>
<span class="line-modified">3737   /*    (using SFNT cmap format 13, see function @FT_Get_CMap_Format)      */</span>
<span class="line-modified">3738   /*    normally have entries for all Unicode characters up to 0x1FFFFF,   */</span>
<span class="line-modified">3739   /*    which can cause *a lot* of iterations.                             */</span>
<span class="line-modified">3740   /*                                                                       */</span>
<span class="line-modified">3741   /*    Note that `*agindex&#39; is set to~0 if the charmap is empty.  The     */</span>
<span class="line-modified">3742   /*    result itself can be~0 in two cases: if the charmap is empty or    */</span>
<span class="line-modified">3743   /*    if the value~0 is the first valid character code.                  */</span>
<span class="line-modified">3744   /*                                                                       */</span>

3745   FT_EXPORT( FT_ULong )
3746   FT_Get_First_Char( FT_Face   face,
3747                      FT_UInt  *agindex );
3748 
3749 
<span class="line-modified">3750   /*************************************************************************/</span>
<span class="line-modified">3751   /*                                                                       */</span>
<span class="line-modified">3752   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3753   /*    FT_Get_Next_Char                                                   */</span>
<span class="line-modified">3754   /*                                                                       */</span>
<span class="line-modified">3755   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3756   /*    Return the next character code in the current charmap of a given   */</span>
<span class="line-modified">3757   /*    face following the value `char_code&#39;, as well as the corresponding */</span>
<span class="line-modified">3758   /*    glyph index.                                                       */</span>
<span class="line-modified">3759   /*                                                                       */</span>
<span class="line-modified">3760   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3761   /*    face      :: A handle to the source face object.                   */</span>
<span class="line-modified">3762   /*                                                                       */</span>
<span class="line-modified">3763   /*    char_code :: The starting character code.                          */</span>
<span class="line-modified">3764   /*                                                                       */</span>
<span class="line-modified">3765   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">3766   /*    agindex   :: Glyph index of next character code.  0~if charmap     */</span>
<span class="line-modified">3767   /*                 is empty.                                             */</span>
<span class="line-modified">3768   /*                                                                       */</span>
<span class="line-modified">3769   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3770   /*    The charmap&#39;s next character code.                                 */</span>
<span class="line-modified">3771   /*                                                                       */</span>
<span class="line-modified">3772   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">3773   /*    You should use this function with @FT_Get_First_Char to walk       */</span>
<span class="line-modified">3774   /*    over all character codes available in a given charmap.  See the    */</span>
<span class="line-modified">3775   /*    note for that function for a simple code example.                  */</span>
<span class="line-modified">3776   /*                                                                       */</span>
<span class="line-modified">3777   /*    Note that `*agindex&#39; is set to~0 when there are no more codes in   */</span>
<span class="line-modified">3778   /*    the charmap.                                                       */</span>
<span class="line-modified">3779   /*                                                                       */</span>


3780   FT_EXPORT( FT_ULong )
3781   FT_Get_Next_Char( FT_Face    face,
3782                     FT_ULong   char_code,
3783                     FT_UInt   *agindex );
3784 
3785 
<span class="line-modified">3786   /*************************************************************************</span>
3787    *
3788    * @function:
3789    *   FT_Face_Properties
3790    *
3791    * @description:
3792    *   Set or override certain (library or module-wide) properties on a
3793    *   face-by-face basis.  Useful for finer-grained control and avoiding
<span class="line-modified">3794    *   locks on shared structures (threads can modify their own faces as</span>
<span class="line-modified">3795    *   they see fit).</span>
3796    *
<span class="line-modified">3797    *   Contrary to @FT_Property_Set, this function uses @FT_Parameter so</span>
<span class="line-modified">3798    *   that you can pass multiple properties to the target face in one call.</span>
<span class="line-modified">3799    *   Note that only a subset of the available properties can be</span>
<span class="line-removed">3800    *   controlled.</span>
3801    *
3802    *   * @FT_PARAM_TAG_STEM_DARKENING (stem darkening, corresponding to the
<span class="line-modified">3803    *     property `no-stem-darkening&#39; provided by the `autofit&#39;, `cff&#39;,</span>
<span class="line-modified">3804    *     `type1&#39;, and `t1cid&#39; modules; see @no-stem-darkening).</span>
3805    *
3806    *   * @FT_PARAM_TAG_LCD_FILTER_WEIGHTS (LCD filter weights, corresponding
3807    *     to function @FT_Library_SetLcdFilterWeights).
3808    *
3809    *   * @FT_PARAM_TAG_RANDOM_SEED (seed value for the CFF, Type~1, and CID
<span class="line-modified">3810    *     `random&#39; operator, corresponding to the `random-seed&#39; property</span>
<span class="line-modified">3811    *     provided by the `cff&#39;, `type1&#39;, and `t1cid&#39; modules; see</span>
3812    *     @random-seed).
3813    *
<span class="line-modified">3814    *   Pass NULL as `data&#39; in @FT_Parameter for a given tag to reset the</span>
3815    *   option and use the library or module default again.
3816    *
3817    * @input:
3818    *   face ::
3819    *     A handle to the source face object.
3820    *
3821    *   num_properties ::
3822    *     The number of properties that follow.
3823    *
3824    *   properties ::
<span class="line-modified">3825    *     A handle to an @FT_Parameter array with `num_properties&#39; elements.</span>
3826    *
3827    * @return:
3828    *   FreeType error code.  0~means success.
3829    *
<span class="line-modified">3830    * @note:</span>
<span class="line-modified">3831    *   Here an example that sets three properties.  You must define</span>
<span class="line-modified">3832    *   FT_CONFIG_OPTION_SUBPIXEL_RENDERING to make the LCD filter examples</span>
3833    *   work.
3834    *
<span class="line-modified">3835    *   {</span>
3836    *     FT_Parameter         property1;
3837    *     FT_Bool              darken_stems = 1;
3838    *
3839    *     FT_Parameter         property2;
3840    *     FT_LcdFiveTapFilter  custom_weight =
3841    *                            { 0x11, 0x44, 0x56, 0x44, 0x11 };
3842    *
3843    *     FT_Parameter         property3;
3844    *     FT_Int32             random_seed = 314159265;
3845    *
3846    *     FT_Parameter         properties[3] = { property1,
3847    *                                            property2,
3848    *                                            property3 };
3849    *
3850    *
3851    *     property1.tag  = FT_PARAM_TAG_STEM_DARKENING;
3852    *     property1.data = &amp;darken_stems;
3853    *
3854    *     property2.tag  = FT_PARAM_TAG_LCD_FILTER_WEIGHTS;
3855    *     property2.data = custom_weight;
3856    *
3857    *     property3.tag  = FT_PARAM_TAG_RANDOM_SEED;
3858    *     property3.data = &amp;random_seed;
3859    *
3860    *     FT_Face_Properties( face, 3, properties );
<span class="line-modified">3861    *   }</span>
3862    *
3863    *   The next example resets a single property to its default value.
3864    *
<span class="line-modified">3865    *   {</span>
3866    *     FT_Parameter  property;
3867    *
3868    *
3869    *     property.tag  = FT_PARAM_TAG_LCD_FILTER_WEIGHTS;
3870    *     property.data = NULL;
3871    *
3872    *     FT_Face_Properties( face, 1, &amp;property );
<span class="line-modified">3873    *   }</span>
3874    *
3875    * @since:
3876    *   2.8
3877    *
3878    */
3879   FT_EXPORT( FT_Error )
3880   FT_Face_Properties( FT_Face        face,
3881                       FT_UInt        num_properties,
3882                       FT_Parameter*  properties );
3883 
3884 
<span class="line-modified">3885   /*************************************************************************/</span>
<span class="line-modified">3886   /*                                                                       */</span>
<span class="line-modified">3887   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">3888   /*    FT_Get_Name_Index                                                  */</span>
<span class="line-modified">3889   /*                                                                       */</span>
<span class="line-modified">3890   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3891   /*    Return the glyph index of a given glyph name.                      */</span>
<span class="line-modified">3892   /*                                                                       */</span>
<span class="line-modified">3893   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">3894   /*    face       :: A handle to the source face object.                  */</span>
<span class="line-modified">3895   /*                                                                       */</span>
<span class="line-modified">3896   /*    glyph_name :: The glyph name.                                      */</span>
<span class="line-modified">3897   /*                                                                       */</span>
<span class="line-modified">3898   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">3899   /*    The glyph index.  0~means `undefined character code&#39;.              */</span>
<span class="line-modified">3900   /*                                                                       */</span>


3901   FT_EXPORT( FT_UInt )
<span class="line-modified">3902   FT_Get_Name_Index( FT_Face     face,</span>
<span class="line-modified">3903                      FT_String*  glyph_name );</span>
3904 
3905 
<span class="line-modified">3906   /*************************************************************************</span>
3907    *
<span class="line-modified">3908    * @macro:</span>
3909    *   FT_SUBGLYPH_FLAG_XXX
3910    *
3911    * @description:
<span class="line-modified">3912    *   A list of constants describing subglyphs.  Please refer to the</span>
<span class="line-modified">3913    *   `glyf&#39; table description in the OpenType specification for the</span>
<span class="line-modified">3914    *   meaning of the various flags (which get synthesized for</span>
<span class="line-modified">3915    *   non-OpenType subglyphs).</span>

3916    *
3917    * @values:
3918    *   FT_SUBGLYPH_FLAG_ARGS_ARE_WORDS ::
3919    *   FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES ::
3920    *   FT_SUBGLYPH_FLAG_ROUND_XY_TO_GRID ::
3921    *   FT_SUBGLYPH_FLAG_SCALE ::
3922    *   FT_SUBGLYPH_FLAG_XY_SCALE ::
3923    *   FT_SUBGLYPH_FLAG_2X2 ::
3924    *   FT_SUBGLYPH_FLAG_USE_MY_METRICS ::
3925    *
3926    */
3927 #define FT_SUBGLYPH_FLAG_ARGS_ARE_WORDS          1
3928 #define FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES      2
3929 #define FT_SUBGLYPH_FLAG_ROUND_XY_TO_GRID        4
3930 #define FT_SUBGLYPH_FLAG_SCALE                   8
3931 #define FT_SUBGLYPH_FLAG_XY_SCALE             0x40
3932 #define FT_SUBGLYPH_FLAG_2X2                  0x80
3933 #define FT_SUBGLYPH_FLAG_USE_MY_METRICS      0x200
3934 
3935 
<span class="line-modified">3936   /*************************************************************************</span>





































































































3937    *
<span class="line-modified">3938    * @func:</span>
<span class="line-modified">3939    *   FT_Get_SubGlyph_Info</span>
3940    *
3941    * @description:
<span class="line-modified">3942    *   Retrieve a description of a given subglyph.  Only use it if</span>
<span class="line-modified">3943    *   `glyph-&gt;format&#39; is @FT_GLYPH_FORMAT_COMPOSITE; an error is</span>
<span class="line-modified">3944    *   returned otherwise.</span>
3945    *
<span class="line-modified">3946    * @input:</span>
<span class="line-removed">3947    *   glyph ::</span>
<span class="line-removed">3948    *     The source glyph slot.</span>
3949    *
<span class="line-modified">3950    *   sub_index ::</span>
<span class="line-modified">3951    *     The index of the subglyph.  Must be less than</span>
<span class="line-modified">3952    *     `glyph-&gt;num_subglyphs&#39;.</span>


3953    *
<span class="line-modified">3954    * @output:</span>
<span class="line-modified">3955    *   p_index ::</span>
<span class="line-modified">3956    *     The glyph index of the subglyph.</span>

3957    *
<span class="line-modified">3958    *   p_flags ::</span>
<span class="line-modified">3959    *     The subglyph flags, see @FT_SUBGLYPH_FLAG_XXX.</span>

3960    *
<span class="line-modified">3961    *   p_arg1 ::</span>
<span class="line-modified">3962    *     The subglyph&#39;s first argument (if any).</span>
3963    *
<span class="line-modified">3964    *   p_arg2 ::</span>
<span class="line-modified">3965    *     The subglyph&#39;s second argument (if any).</span>



3966    *
<span class="line-modified">3967    *   p_transform ::</span>
<span class="line-modified">3968    *     The subglyph transformation (if any).</span>









3969    *
3970    * @return:
<span class="line-modified">3971    *   FreeType error code.  0~means success.</span>


3972    *
3973    * @note:
<span class="line-modified">3974    *   The values of `*p_arg1&#39;, `*p_arg2&#39;, and `*p_transform&#39; must be</span>
<span class="line-modified">3975    *   interpreted depending on the flags returned in `*p_flags&#39;.  See the</span>
<span class="line-modified">3976    *   OpenType specification for details.</span>



















3977    *






























3978    */
<span class="line-modified">3979   FT_EXPORT( FT_Error )</span>
<span class="line-modified">3980   FT_Get_SubGlyph_Info( FT_GlyphSlot  glyph,</span>
<span class="line-modified">3981                         FT_UInt       sub_index,</span>
<span class="line-modified">3982                         FT_Int       *p_index,</span>
<span class="line-modified">3983                         FT_UInt      *p_flags,</span>
<span class="line-modified">3984                         FT_Int       *p_arg1,</span>
<span class="line-removed">3985                         FT_Int       *p_arg2,</span>
<span class="line-removed">3986                         FT_Matrix    *p_transform );</span>
3987 
3988 
<span class="line-modified">3989   /*************************************************************************/</span>
<span class="line-modified">3990   /*                                                                       */</span>
<span class="line-modified">3991   /* &lt;Enum&gt;                                                                */</span>
<span class="line-modified">3992   /*    FT_FSTYPE_XXX                                                      */</span>
<span class="line-modified">3993   /*                                                                       */</span>
<span class="line-modified">3994   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">3995   /*    A list of bit flags used in the `fsType&#39; field of the OS/2 table   */</span>
<span class="line-modified">3996   /*    in a TrueType or OpenType font and the `FSType&#39; entry in a         */</span>
<span class="line-modified">3997   /*    PostScript font.  These bit flags are returned by                  */</span>
<span class="line-modified">3998   /*    @FT_Get_FSType_Flags; they inform client applications of embedding */</span>
<span class="line-modified">3999   /*    and subsetting restrictions associated with a font.                */</span>
<span class="line-modified">4000   /*                                                                       */</span>
<span class="line-modified">4001   /*    See                                                                */</span>
<span class="line-modified">4002   /*    https://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/FontPolicies.pdf */</span>
<span class="line-modified">4003   /*    for more details.                                                  */</span>
<span class="line-modified">4004   /*                                                                       */</span>
<span class="line-modified">4005   /* &lt;Values&gt;                                                              */</span>
<span class="line-modified">4006   /*    FT_FSTYPE_INSTALLABLE_EMBEDDING ::                                 */</span>
<span class="line-modified">4007   /*      Fonts with no fsType bit set may be embedded and permanently     */</span>
<span class="line-modified">4008   /*      installed on the remote system by an application.                */</span>
<span class="line-modified">4009   /*                                                                       */</span>
<span class="line-modified">4010   /*    FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING ::                          */</span>
<span class="line-modified">4011   /*      Fonts that have only this bit set must not be modified, embedded */</span>
<span class="line-modified">4012   /*      or exchanged in any manner without first obtaining permission of */</span>
<span class="line-modified">4013   /*      the font software copyright owner.                               */</span>
<span class="line-modified">4014   /*                                                                       */</span>
<span class="line-modified">4015   /*    FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING ::                           */</span>
<span class="line-modified">4016   /*      The font may be embedded and temporarily loaded on the remote    */</span>
<span class="line-modified">4017   /*      system.  Documents containing Preview &amp; Print fonts must be      */</span>
<span class="line-modified">4018   /*      opened `read-only&#39;; no edits can be applied to the document.     */</span>
<span class="line-modified">4019   /*                                                                       */</span>
<span class="line-modified">4020   /*    FT_FSTYPE_EDITABLE_EMBEDDING ::                                    */</span>
<span class="line-modified">4021   /*      The font may be embedded but must only be installed temporarily  */</span>
<span class="line-modified">4022   /*      on other systems.  In contrast to Preview &amp; Print fonts,         */</span>
<span class="line-modified">4023   /*      documents containing editable fonts may be opened for reading,   */</span>
<span class="line-modified">4024   /*      editing is permitted, and changes may be saved.                  */</span>
<span class="line-modified">4025   /*                                                                       */</span>
<span class="line-modified">4026   /*    FT_FSTYPE_NO_SUBSETTING ::                                         */</span>
<span class="line-modified">4027   /*      The font may not be subsetted prior to embedding.                */</span>
<span class="line-modified">4028   /*                                                                       */</span>
<span class="line-modified">4029   /*    FT_FSTYPE_BITMAP_EMBEDDING_ONLY ::                                 */</span>
<span class="line-modified">4030   /*      Only bitmaps contained in the font may be embedded; no outline   */</span>
<span class="line-modified">4031   /*      data may be embedded.  If there are no bitmaps available in the  */</span>
<span class="line-modified">4032   /*      font, then the font is unembeddable.                             */</span>
<span class="line-modified">4033   /*                                                                       */</span>
<span class="line-modified">4034   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4035   /*    The flags are ORed together, thus more than a single value can be  */</span>
<span class="line-modified">4036   /*    returned.                                                          */</span>
<span class="line-modified">4037   /*                                                                       */</span>
<span class="line-modified">4038   /*    While the `fsType&#39; flags can indicate that a font may be embedded, */</span>
<span class="line-modified">4039   /*    a license with the font vendor may be separately required to use   */</span>
<span class="line-modified">4040   /*    the font in this way.                                              */</span>
<span class="line-modified">4041   /*                                                                       */</span>







4042 #define FT_FSTYPE_INSTALLABLE_EMBEDDING         0x0000
4043 #define FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING  0x0002
4044 #define FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING   0x0004
4045 #define FT_FSTYPE_EDITABLE_EMBEDDING            0x0008
4046 #define FT_FSTYPE_NO_SUBSETTING                 0x0100
4047 #define FT_FSTYPE_BITMAP_EMBEDDING_ONLY         0x0200
4048 
4049 
<span class="line-modified">4050   /*************************************************************************/</span>
<span class="line-modified">4051   /*                                                                       */</span>
<span class="line-modified">4052   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4053   /*    FT_Get_FSType_Flags                                                */</span>
<span class="line-modified">4054   /*                                                                       */</span>
<span class="line-modified">4055   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4056   /*    Return the `fsType&#39; flags for a font.                              */</span>
<span class="line-modified">4057   /*                                                                       */</span>
<span class="line-modified">4058   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4059   /*    face :: A handle to the source face object.                        */</span>
<span class="line-modified">4060   /*                                                                       */</span>
<span class="line-modified">4061   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4062   /*    The `fsType&#39; flags, see @FT_FSTYPE_XXX.                            */</span>
<span class="line-modified">4063   /*                                                                       */</span>
<span class="line-modified">4064   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4065   /*    Use this function rather than directly reading the `fs_type&#39; field */</span>
<span class="line-modified">4066   /*    in the @PS_FontInfoRec structure, which is only guaranteed to      */</span>
<span class="line-modified">4067   /*    return the correct results for Type~1 fonts.                       */</span>
<span class="line-modified">4068   /*                                                                       */</span>
<span class="line-modified">4069   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4070   /*    2.3.8                                                              */</span>
<span class="line-modified">4071   /*                                                                       */</span>

4072   FT_EXPORT( FT_UShort )
4073   FT_Get_FSType_Flags( FT_Face  face );
4074 
4075 
<span class="line-modified">4076   /*************************************************************************/</span>
<span class="line-modified">4077   /*                                                                       */</span>
<span class="line-modified">4078   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">4079   /*    glyph_variants                                                     */</span>
<span class="line-modified">4080   /*                                                                       */</span>
<span class="line-modified">4081   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">4082   /*    Unicode Variation Sequences                                        */</span>
<span class="line-modified">4083   /*                                                                       */</span>
<span class="line-modified">4084   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">4085   /*    The FreeType~2 interface to Unicode Variation Sequences (UVS),     */</span>
<span class="line-modified">4086   /*    using the SFNT cmap format~14.                                     */</span>
<span class="line-modified">4087   /*                                                                       */</span>
<span class="line-modified">4088   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4089   /*    Many characters, especially for CJK scripts, have variant forms.   */</span>
<span class="line-modified">4090   /*    They are a sort of grey area somewhere between being totally       */</span>
<span class="line-modified">4091   /*    irrelevant and semantically distinct; for this reason, the Unicode */</span>
<span class="line-modified">4092   /*    consortium decided to introduce Variation Sequences (VS),          */</span>
<span class="line-modified">4093   /*    consisting of a Unicode base character and a variation selector    */</span>
<span class="line-modified">4094   /*    instead of further extending the already huge number of            */</span>
<span class="line-modified">4095   /*    characters.                                                        */</span>
<span class="line-modified">4096   /*                                                                       */</span>
<span class="line-modified">4097   /*    Unicode maintains two different sets, namely `Standardized         */</span>
<span class="line-modified">4098   /*    Variation Sequences&#39; and registered `Ideographic Variation         */</span>
<span class="line-modified">4099   /*    Sequences&#39; (IVS), collected in the `Ideographic Variation          */</span>
<span class="line-modified">4100   /*    Database&#39; (IVD).                                                   */</span>
<span class="line-modified">4101   /*                                                                       */</span>
<span class="line-modified">4102   /*      https://unicode.org/Public/UCD/latest/ucd/StandardizedVariants.txt */</span>
<span class="line-modified">4103   /*      https://unicode.org/reports/tr37/                                */</span>
<span class="line-modified">4104   /*      https://unicode.org/ivd/                                         */</span>
<span class="line-modified">4105   /*                                                                       */</span>
<span class="line-modified">4106   /*    To date (January 2017), the character with the most ideographic    */</span>
<span class="line-modified">4107   /*    variations is U+9089, having 32 such IVS.                          */</span>
<span class="line-modified">4108   /*                                                                       */</span>
<span class="line-modified">4109   /*    Three Mongolian Variation Selectors have the values U+180B-U+180D; */</span>
<span class="line-modified">4110   /*    256 generic Variation Selectors are encoded in the ranges          */</span>
<span class="line-modified">4111   /*    U+FE00-U+FE0F and U+E0100-U+E01EF.  IVS currently use Variation    */</span>
<span class="line-modified">4112   /*    Selectors from the range U+E0100-U+E01EF only.                     */</span>
<span class="line-modified">4113   /*                                                                       */</span>
<span class="line-modified">4114   /*    A VS consists of the base character value followed by a single     */</span>
<span class="line-modified">4115   /*    Variation Selector.  For example, to get the first variation of    */</span>
<span class="line-modified">4116   /*    U+9089, you have to write the character sequence `U+9089 U+E0100&#39;. */</span>
<span class="line-modified">4117   /*                                                                       */</span>
<span class="line-modified">4118   /*    Adobe and MS decided to support both standardized and ideographic  */</span>
<span class="line-modified">4119   /*    VS with a new cmap subtable (format~14).  It is an odd subtable    */</span>
<span class="line-modified">4120   /*    because it is not a mapping of input code points to glyphs, but    */</span>
<span class="line-modified">4121   /*    contains lists of all variations supported by the font.            */</span>
<span class="line-modified">4122   /*                                                                       */</span>
<span class="line-modified">4123   /*    A variation may be either `default&#39; or `non-default&#39; for a given   */</span>
<span class="line-modified">4124   /*    font.  A default variation is the one you will get for that code   */</span>
<span class="line-modified">4125   /*    point if you look it up in the standard Unicode cmap.  A           */</span>
<span class="line-removed">4126   /*    non-default variation is a different glyph.                        */</span>
<span class="line-removed">4127   /*                                                                       */</span>
<span class="line-removed">4128   /*************************************************************************/</span>
4129 
4130 
<span class="line-modified">4131   /*************************************************************************/</span>
<span class="line-modified">4132   /*                                                                       */</span>
<span class="line-modified">4133   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4134   /*    FT_Face_GetCharVariantIndex                                        */</span>
<span class="line-modified">4135   /*                                                                       */</span>
<span class="line-modified">4136   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4137   /*    Return the glyph index of a given character code as modified by    */</span>
<span class="line-modified">4138   /*    the variation selector.                                            */</span>
<span class="line-modified">4139   /*                                                                       */</span>
<span class="line-modified">4140   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4141   /*    face ::                                                            */</span>
<span class="line-modified">4142   /*      A handle to the source face object.                              */</span>
<span class="line-modified">4143   /*                                                                       */</span>
<span class="line-modified">4144   /*    charcode ::                                                        */</span>
<span class="line-modified">4145   /*      The character code point in Unicode.                             */</span>
<span class="line-modified">4146   /*                                                                       */</span>
<span class="line-modified">4147   /*    variantSelector ::                                                 */</span>
<span class="line-modified">4148   /*      The Unicode code point of the variation selector.                */</span>
<span class="line-modified">4149   /*                                                                       */</span>
<span class="line-modified">4150   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4151   /*    The glyph index.  0~means either `undefined character code&#39;, or    */</span>
<span class="line-modified">4152   /*    `undefined selector code&#39;, or `no variation selector cmap          */</span>
<span class="line-modified">4153   /*    subtable&#39;, or `current CharMap is not Unicode&#39;.                    */</span>
<span class="line-modified">4154   /*                                                                       */</span>
<span class="line-modified">4155   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4156   /*    If you use FreeType to manipulate the contents of font files       */</span>
<span class="line-modified">4157   /*    directly, be aware that the glyph index returned by this function  */</span>
<span class="line-modified">4158   /*    doesn&#39;t always correspond to the internal indices used within      */</span>
<span class="line-modified">4159   /*    the file.  This is done to ensure that value~0 always corresponds  */</span>
<span class="line-modified">4160   /*    to the `missing glyph&#39;.                                            */</span>
<span class="line-modified">4161   /*                                                                       */</span>
<span class="line-modified">4162   /*    This function is only meaningful if                                */</span>
<span class="line-modified">4163   /*      a) the font has a variation selector cmap sub table,             */</span>
<span class="line-modified">4164   /*    and                                                                */</span>
<span class="line-modified">4165   /*      b) the current charmap has a Unicode encoding.                   */</span>
<span class="line-modified">4166   /*                                                                       */</span>
<span class="line-modified">4167   /* &lt;Since&gt;                                                               */</span>
<span class="line-removed">4168   /*    2.3.6                                                              */</span>
<span class="line-removed">4169   /*                                                                       */</span>
4170   FT_EXPORT( FT_UInt )
4171   FT_Face_GetCharVariantIndex( FT_Face   face,
4172                                FT_ULong  charcode,
4173                                FT_ULong  variantSelector );
4174 
4175 
<span class="line-modified">4176   /*************************************************************************/</span>
<span class="line-modified">4177   /*                                                                       */</span>
<span class="line-modified">4178   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4179   /*    FT_Face_GetCharVariantIsDefault                                    */</span>
<span class="line-modified">4180   /*                                                                       */</span>
<span class="line-modified">4181   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4182   /*    Check whether this variation of this Unicode character is the one  */</span>
<span class="line-modified">4183   /*    to be found in the `cmap&#39;.                                         */</span>
<span class="line-modified">4184   /*                                                                       */</span>
<span class="line-modified">4185   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4186   /*    face ::                                                            */</span>
<span class="line-modified">4187   /*      A handle to the source face object.                              */</span>
<span class="line-modified">4188   /*                                                                       */</span>
<span class="line-modified">4189   /*    charcode ::                                                        */</span>
<span class="line-modified">4190   /*      The character codepoint in Unicode.                              */</span>
<span class="line-modified">4191   /*                                                                       */</span>
<span class="line-modified">4192   /*    variantSelector ::                                                 */</span>
<span class="line-modified">4193   /*      The Unicode codepoint of the variation selector.                 */</span>
<span class="line-modified">4194   /*                                                                       */</span>
<span class="line-modified">4195   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4196   /*    1~if found in the standard (Unicode) cmap, 0~if found in the       */</span>
<span class="line-modified">4197   /*    variation selector cmap, or -1 if it is not a variation.           */</span>
<span class="line-modified">4198   /*                                                                       */</span>
<span class="line-modified">4199   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4200   /*    This function is only meaningful if the font has a variation       */</span>
<span class="line-modified">4201   /*    selector cmap subtable.                                            */</span>
<span class="line-modified">4202   /*                                                                       */</span>
<span class="line-modified">4203   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4204   /*    2.3.6                                                              */</span>
<span class="line-modified">4205   /*                                                                       */</span>
4206   FT_EXPORT( FT_Int )
4207   FT_Face_GetCharVariantIsDefault( FT_Face   face,
4208                                    FT_ULong  charcode,
4209                                    FT_ULong  variantSelector );
4210 
4211 
<span class="line-modified">4212   /*************************************************************************/</span>
<span class="line-modified">4213   /*                                                                       */</span>
<span class="line-modified">4214   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4215   /*    FT_Face_GetVariantSelectors                                        */</span>
<span class="line-modified">4216   /*                                                                       */</span>
<span class="line-modified">4217   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4218   /*    Return a zero-terminated list of Unicode variation selectors found */</span>
<span class="line-modified">4219   /*    in the font.                                                       */</span>
<span class="line-modified">4220   /*                                                                       */</span>
<span class="line-modified">4221   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4222   /*    face ::                                                            */</span>
<span class="line-modified">4223   /*      A handle to the source face object.                              */</span>
<span class="line-modified">4224   /*                                                                       */</span>
<span class="line-modified">4225   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4226   /*    A pointer to an array of selector code points, or NULL if there is */</span>
<span class="line-modified">4227   /*    no valid variation selector cmap subtable.                         */</span>
<span class="line-modified">4228   /*                                                                       */</span>
<span class="line-modified">4229   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4230   /*    The last item in the array is~0; the array is owned by the         */</span>
<span class="line-modified">4231   /*    @FT_Face object but can be overwritten or released on the next     */</span>
<span class="line-modified">4232   /*    call to a FreeType function.                                       */</span>
<span class="line-modified">4233   /*                                                                       */</span>
<span class="line-modified">4234   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4235   /*    2.3.6                                                              */</span>
<span class="line-modified">4236   /*                                                                       */</span>
4237   FT_EXPORT( FT_UInt32* )
4238   FT_Face_GetVariantSelectors( FT_Face  face );
4239 
4240 
<span class="line-modified">4241   /*************************************************************************/</span>
<span class="line-modified">4242   /*                                                                       */</span>
<span class="line-modified">4243   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4244   /*    FT_Face_GetVariantsOfChar                                          */</span>
<span class="line-modified">4245   /*                                                                       */</span>
<span class="line-modified">4246   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4247   /*    Return a zero-terminated list of Unicode variation selectors found */</span>
<span class="line-modified">4248   /*    for the specified character code.                                  */</span>
<span class="line-modified">4249   /*                                                                       */</span>
<span class="line-modified">4250   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4251   /*    face ::                                                            */</span>
<span class="line-modified">4252   /*      A handle to the source face object.                              */</span>
<span class="line-modified">4253   /*                                                                       */</span>
<span class="line-modified">4254   /*    charcode ::                                                        */</span>
<span class="line-modified">4255   /*      The character codepoint in Unicode.                              */</span>
<span class="line-modified">4256   /*                                                                       */</span>
<span class="line-modified">4257   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4258   /*    A pointer to an array of variation selector code points that are   */</span>
<span class="line-modified">4259   /*    active for the given character, or NULL if the corresponding list  */</span>
<span class="line-modified">4260   /*    is empty.                                                          */</span>
<span class="line-modified">4261   /*                                                                       */</span>
<span class="line-modified">4262   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4263   /*    The last item in the array is~0; the array is owned by the         */</span>
<span class="line-modified">4264   /*    @FT_Face object but can be overwritten or released on the next     */</span>
<span class="line-modified">4265   /*    call to a FreeType function.                                       */</span>
<span class="line-modified">4266   /*                                                                       */</span>
<span class="line-modified">4267   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4268   /*    2.3.6                                                              */</span>
<span class="line-modified">4269   /*                                                                       */</span>
4270   FT_EXPORT( FT_UInt32* )
4271   FT_Face_GetVariantsOfChar( FT_Face   face,
4272                              FT_ULong  charcode );
4273 
4274 
<span class="line-modified">4275   /*************************************************************************/</span>
<span class="line-modified">4276   /*                                                                       */</span>
<span class="line-modified">4277   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4278   /*    FT_Face_GetCharsOfVariant                                          */</span>
<span class="line-modified">4279   /*                                                                       */</span>
<span class="line-modified">4280   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4281   /*    Return a zero-terminated list of Unicode character codes found for */</span>
<span class="line-modified">4282   /*    the specified variation selector.                                  */</span>
<span class="line-modified">4283   /*                                                                       */</span>
<span class="line-modified">4284   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4285   /*    face ::                                                            */</span>
<span class="line-modified">4286   /*      A handle to the source face object.                              */</span>
<span class="line-modified">4287   /*                                                                       */</span>
<span class="line-modified">4288   /*    variantSelector ::                                                 */</span>
<span class="line-modified">4289   /*      The variation selector code point in Unicode.                    */</span>
<span class="line-modified">4290   /*                                                                       */</span>
<span class="line-modified">4291   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4292   /*    A list of all the code points that are specified by this selector  */</span>
<span class="line-modified">4293   /*    (both default and non-default codes are returned) or NULL if there */</span>
<span class="line-modified">4294   /*    is no valid cmap or the variation selector is invalid.             */</span>
<span class="line-modified">4295   /*                                                                       */</span>
<span class="line-modified">4296   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4297   /*    The last item in the array is~0; the array is owned by the         */</span>
<span class="line-modified">4298   /*    @FT_Face object but can be overwritten or released on the next     */</span>
<span class="line-modified">4299   /*    call to a FreeType function.                                       */</span>
<span class="line-modified">4300   /*                                                                       */</span>
<span class="line-modified">4301   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4302   /*    2.3.6                                                              */</span>
<span class="line-modified">4303   /*                                                                       */</span>
4304   FT_EXPORT( FT_UInt32* )
4305   FT_Face_GetCharsOfVariant( FT_Face   face,
4306                              FT_ULong  variantSelector );
4307 
4308 
<span class="line-modified">4309   /*************************************************************************/</span>
<span class="line-modified">4310   /*                                                                       */</span>
<span class="line-modified">4311   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">4312   /*    computations                                                       */</span>
<span class="line-modified">4313   /*                                                                       */</span>
<span class="line-modified">4314   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">4315   /*    Computations                                                       */</span>
<span class="line-modified">4316   /*                                                                       */</span>
<span class="line-modified">4317   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">4318   /*    Crunching fixed numbers and vectors.                               */</span>
<span class="line-modified">4319   /*                                                                       */</span>
<span class="line-modified">4320   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4321   /*    This section contains various functions used to perform            */</span>
<span class="line-modified">4322   /*    computations on 16.16 fixed-float numbers or 2d vectors.           */</span>
<span class="line-modified">4323   /*                                                                       */</span>
<span class="line-modified">4324   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified">4325   /*    FT_MulDiv                                                          */</span>
<span class="line-modified">4326   /*    FT_MulFix                                                          */</span>
<span class="line-modified">4327   /*    FT_DivFix                                                          */</span>
<span class="line-modified">4328   /*    FT_RoundFix                                                        */</span>
<span class="line-modified">4329   /*    FT_CeilFix                                                         */</span>
<span class="line-modified">4330   /*    FT_FloorFix                                                        */</span>
<span class="line-modified">4331   /*    FT_Vector_Transform                                                */</span>
<span class="line-modified">4332   /*    FT_Matrix_Multiply                                                 */</span>
<span class="line-modified">4333   /*    FT_Matrix_Invert                                                   */</span>
<span class="line-modified">4334   /*                                                                       */</span>
<span class="line-modified">4335   /*************************************************************************/</span>





4336 
4337 
<span class="line-modified">4338   /*************************************************************************/</span>
<span class="line-modified">4339   /*                                                                       */</span>
<span class="line-modified">4340   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4341   /*    FT_MulDiv                                                          */</span>
<span class="line-modified">4342   /*                                                                       */</span>
<span class="line-modified">4343   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4344   /*    Compute `(a*b)/c&#39; with maximum accuracy, using a 64-bit            */</span>
<span class="line-modified">4345   /*    intermediate integer whenever necessary.                           */</span>
<span class="line-modified">4346   /*                                                                       */</span>
<span class="line-modified">4347   /*    This function isn&#39;t necessarily as fast as some processor specific */</span>
<span class="line-modified">4348   /*    operations, but is at least completely portable.                   */</span>
<span class="line-modified">4349   /*                                                                       */</span>
<span class="line-modified">4350   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4351   /*    a :: The first multiplier.                                         */</span>
<span class="line-modified">4352   /*                                                                       */</span>
<span class="line-modified">4353   /*    b :: The second multiplier.                                        */</span>
<span class="line-modified">4354   /*                                                                       */</span>
<span class="line-modified">4355   /*    c :: The divisor.                                                  */</span>
<span class="line-modified">4356   /*                                                                       */</span>
<span class="line-modified">4357   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4358   /*    The result of `(a*b)/c&#39;.  This function never traps when trying to */</span>
<span class="line-modified">4359   /*    divide by zero; it simply returns `MaxInt&#39; or `MinInt&#39; depending   */</span>
<span class="line-modified">4360   /*    on the signs of `a&#39; and `b&#39;.                                       */</span>
<span class="line-modified">4361   /*                                                                       */</span>



4362   FT_EXPORT( FT_Long )
4363   FT_MulDiv( FT_Long  a,
4364              FT_Long  b,
4365              FT_Long  c );
4366 
4367 
<span class="line-modified">4368   /*************************************************************************/</span>
<span class="line-modified">4369   /*                                                                       */</span>
<span class="line-modified">4370   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4371   /*    FT_MulFix                                                          */</span>
<span class="line-modified">4372   /*                                                                       */</span>
<span class="line-modified">4373   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4374   /*    Compute `(a*b)/0x10000&#39; with maximum accuracy.  Its main use is to */</span>
<span class="line-modified">4375   /*    multiply a given value by a 16.16 fixed-point factor.              */</span>
<span class="line-modified">4376   /*                                                                       */</span>
<span class="line-modified">4377   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4378   /*    a :: The first multiplier.                                         */</span>
<span class="line-modified">4379   /*                                                                       */</span>
<span class="line-modified">4380   /*    b :: The second multiplier.  Use a 16.16 factor here whenever      */</span>
<span class="line-modified">4381   /*         possible (see note below).                                    */</span>
<span class="line-modified">4382   /*                                                                       */</span>
<span class="line-modified">4383   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4384   /*    The result of `(a*b)/0x10000&#39;.                                     */</span>
<span class="line-modified">4385   /*                                                                       */</span>
<span class="line-modified">4386   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4387   /*    This function has been optimized for the case where the absolute   */</span>
<span class="line-modified">4388   /*    value of `a&#39; is less than 2048, and `b&#39; is a 16.16 scaling factor. */</span>
<span class="line-modified">4389   /*    As this happens mainly when scaling from notional units to         */</span>
<span class="line-modified">4390   /*    fractional pixels in FreeType, it resulted in noticeable speed     */</span>
<span class="line-modified">4391   /*    improvements between versions 2.x and 1.x.                         */</span>
<span class="line-modified">4392   /*                                                                       */</span>
<span class="line-modified">4393   /*    As a conclusion, always try to place a 16.16 factor as the         */</span>
<span class="line-modified">4394   /*    _second_ argument of this function; this can make a great          */</span>
<span class="line-modified">4395   /*    difference.                                                        */</span>
<span class="line-modified">4396   /*                                                                       */</span>

4397   FT_EXPORT( FT_Long )
4398   FT_MulFix( FT_Long  a,
4399              FT_Long  b );
4400 
4401 
<span class="line-modified">4402   /*************************************************************************/</span>
<span class="line-modified">4403   /*                                                                       */</span>
<span class="line-modified">4404   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4405   /*    FT_DivFix                                                          */</span>
<span class="line-modified">4406   /*                                                                       */</span>
<span class="line-modified">4407   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4408   /*    Compute `(a*0x10000)/b&#39; with maximum accuracy.  Its main use is to */</span>
<span class="line-modified">4409   /*    divide a given value by a 16.16 fixed-point factor.                */</span>
<span class="line-modified">4410   /*                                                                       */</span>
<span class="line-modified">4411   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4412   /*    a :: The numerator.                                                */</span>
<span class="line-modified">4413   /*                                                                       */</span>
<span class="line-modified">4414   /*    b :: The denominator.  Use a 16.16 factor here.                    */</span>
<span class="line-modified">4415   /*                                                                       */</span>
<span class="line-modified">4416   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4417   /*    The result of `(a*0x10000)/b&#39;.                                     */</span>
<span class="line-modified">4418   /*                                                                       */</span>


4419   FT_EXPORT( FT_Long )
4420   FT_DivFix( FT_Long  a,
4421              FT_Long  b );
4422 
4423 
<span class="line-modified">4424   /*************************************************************************/</span>
<span class="line-modified">4425   /*                                                                       */</span>
<span class="line-modified">4426   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4427   /*    FT_RoundFix                                                        */</span>
<span class="line-modified">4428   /*                                                                       */</span>
<span class="line-modified">4429   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4430   /*    Round a 16.16 fixed number.                                        */</span>
<span class="line-modified">4431   /*                                                                       */</span>
<span class="line-modified">4432   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4433   /*    a :: The number to be rounded.                                     */</span>
<span class="line-modified">4434   /*                                                                       */</span>
<span class="line-modified">4435   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4436   /*    `a&#39; rounded to the nearest 16.16 fixed integer, halfway cases away */</span>
<span class="line-modified">4437   /*    from zero.                                                         */</span>
<span class="line-modified">4438   /*                                                                       */</span>
<span class="line-modified">4439   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4440   /*    The function uses wrap-around arithmetic.                          */</span>
<span class="line-modified">4441   /*                                                                       */</span>

4442   FT_EXPORT( FT_Fixed )
4443   FT_RoundFix( FT_Fixed  a );
4444 
4445 
<span class="line-modified">4446   /*************************************************************************/</span>
<span class="line-modified">4447   /*                                                                       */</span>
<span class="line-modified">4448   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4449   /*    FT_CeilFix                                                         */</span>
<span class="line-modified">4450   /*                                                                       */</span>
<span class="line-modified">4451   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4452   /*    Compute the smallest following integer of a 16.16 fixed number.    */</span>
<span class="line-modified">4453   /*                                                                       */</span>
<span class="line-modified">4454   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4455   /*    a :: The number for which the ceiling function is to be computed.  */</span>
<span class="line-modified">4456   /*                                                                       */</span>
<span class="line-modified">4457   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4458   /*    `a&#39; rounded towards plus infinity.                                 */</span>
<span class="line-modified">4459   /*                                                                       */</span>
<span class="line-modified">4460   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4461   /*    The function uses wrap-around arithmetic.                          */</span>
<span class="line-modified">4462   /*                                                                       */</span>

4463   FT_EXPORT( FT_Fixed )
4464   FT_CeilFix( FT_Fixed  a );
4465 
4466 
<span class="line-modified">4467   /*************************************************************************/</span>
<span class="line-modified">4468   /*                                                                       */</span>
<span class="line-modified">4469   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4470   /*    FT_FloorFix                                                        */</span>
<span class="line-modified">4471   /*                                                                       */</span>
<span class="line-modified">4472   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4473   /*    Compute the largest previous integer of a 16.16 fixed number.      */</span>
<span class="line-modified">4474   /*                                                                       */</span>
<span class="line-modified">4475   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4476   /*    a :: The number for which the floor function is to be computed.    */</span>
<span class="line-modified">4477   /*                                                                       */</span>
<span class="line-modified">4478   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4479   /*    `a&#39; rounded towards minus infinity.                                */</span>
<span class="line-modified">4480   /*                                                                       */</span>

4481   FT_EXPORT( FT_Fixed )
4482   FT_FloorFix( FT_Fixed  a );
4483 
4484 
<span class="line-modified">4485   /*************************************************************************/</span>
<span class="line-modified">4486   /*                                                                       */</span>
<span class="line-modified">4487   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4488   /*    FT_Vector_Transform                                                */</span>
<span class="line-modified">4489   /*                                                                       */</span>
<span class="line-modified">4490   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4491   /*    Transform a single vector through a 2x2 matrix.                    */</span>
<span class="line-modified">4492   /*                                                                       */</span>
<span class="line-modified">4493   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">4494   /*    vector :: The target vector to transform.                          */</span>
<span class="line-modified">4495   /*                                                                       */</span>
<span class="line-modified">4496   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4497   /*    matrix :: A pointer to the source 2x2 matrix.                      */</span>
<span class="line-modified">4498   /*                                                                       */</span>
<span class="line-modified">4499   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4500   /*    The result is undefined if either `vector&#39; or `matrix&#39; is invalid. */</span>
<span class="line-modified">4501   /*                                                                       */</span>


4502   FT_EXPORT( void )
<span class="line-modified">4503   FT_Vector_Transform( FT_Vector*        vec,</span>
4504                        const FT_Matrix*  matrix );
4505 
4506 
<span class="line-modified">4507   /*************************************************************************/</span>
<span class="line-modified">4508   /*                                                                       */</span>
<span class="line-modified">4509   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified">4510   /*    version                                                            */</span>
<span class="line-modified">4511   /*                                                                       */</span>
<span class="line-modified">4512   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified">4513   /*    FreeType Version                                                   */</span>
<span class="line-modified">4514   /*                                                                       */</span>
<span class="line-modified">4515   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified">4516   /*    Functions and macros related to FreeType versions.                 */</span>
<span class="line-modified">4517   /*                                                                       */</span>
<span class="line-modified">4518   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4519   /*    Note that those functions and macros are of limited use because    */</span>
<span class="line-modified">4520   /*    even a new release of FreeType with only documentation changes     */</span>
<span class="line-modified">4521   /*    increases the version number.                                      */</span>
<span class="line-modified">4522   /*                                                                       */</span>
<span class="line-modified">4523   /* &lt;Order&gt;                                                               */</span>
<span class="line-modified">4524   /*    FT_Library_Version                                                 */</span>
<span class="line-modified">4525   /*                                                                       */</span>
<span class="line-modified">4526   /*    FREETYPE_MAJOR                                                     */</span>
<span class="line-modified">4527   /*    FREETYPE_MINOR                                                     */</span>
<span class="line-modified">4528   /*    FREETYPE_PATCH                                                     */</span>
<span class="line-modified">4529   /*                                                                       */</span>
<span class="line-modified">4530   /*    FT_Face_CheckTrueTypePatents                                       */</span>
<span class="line-modified">4531   /*    FT_Face_SetUnpatentedHinting                                       */</span>
<span class="line-modified">4532   /*                                                                       */</span>
<span class="line-modified">4533   /*    FREETYPE_XXX                                                       */</span>
<span class="line-removed">4534   /*                                                                       */</span>
<span class="line-removed">4535   /*************************************************************************/</span>
4536 
4537 
<span class="line-modified">4538   /*************************************************************************</span>
4539    *
4540    * @enum:
4541    *   FREETYPE_XXX
4542    *
4543    * @description:
<span class="line-modified">4544    *   These three macros identify the FreeType source code version.</span>
<span class="line-modified">4545    *   Use @FT_Library_Version to access them at runtime.</span>
4546    *
4547    * @values:
<span class="line-modified">4548    *   FREETYPE_MAJOR :: The major version number.</span>
<span class="line-modified">4549    *   FREETYPE_MINOR :: The minor version number.</span>
<span class="line-modified">4550    *   FREETYPE_PATCH :: The patch level.</span>



4551    *
4552    * @note:
<span class="line-modified">4553    *   The version number of FreeType if built as a dynamic link library</span>
<span class="line-modified">4554    *   with the `libtool&#39; package is _not_ controlled by these three</span>
<span class="line-removed">4555    *   macros.</span>
4556    *
4557    */
4558 #define FREETYPE_MAJOR  2
<span class="line-modified">4559 #define FREETYPE_MINOR  9</span>
4560 #define FREETYPE_PATCH  1
4561 
4562 
<span class="line-modified">4563   /*************************************************************************/</span>
<span class="line-modified">4564   /*                                                                       */</span>
<span class="line-modified">4565   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4566   /*    FT_Library_Version                                                 */</span>
<span class="line-modified">4567   /*                                                                       */</span>
<span class="line-modified">4568   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4569   /*    Return the version of the FreeType library being used.  This is    */</span>
<span class="line-modified">4570   /*    useful when dynamically linking to the library, since one cannot   */</span>
<span class="line-modified">4571   /*    use the macros @FREETYPE_MAJOR, @FREETYPE_MINOR, and               */</span>
<span class="line-modified">4572   /*    @FREETYPE_PATCH.                                                   */</span>
<span class="line-modified">4573   /*                                                                       */</span>
<span class="line-modified">4574   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4575   /*    library :: A source library handle.                                */</span>
<span class="line-modified">4576   /*                                                                       */</span>
<span class="line-modified">4577   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">4578   /*    amajor  :: The major version number.                               */</span>
<span class="line-modified">4579   /*                                                                       */</span>
<span class="line-modified">4580   /*    aminor  :: The minor version number.                               */</span>
<span class="line-modified">4581   /*                                                                       */</span>
<span class="line-modified">4582   /*    apatch  :: The patch version number.                               */</span>
<span class="line-modified">4583   /*                                                                       */</span>
<span class="line-modified">4584   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4585   /*    The reason why this function takes a `library&#39; argument is because */</span>
<span class="line-modified">4586   /*    certain programs implement library initialization in a custom way  */</span>
<span class="line-modified">4587   /*    that doesn&#39;t use @FT_Init_FreeType.                                */</span>
<span class="line-modified">4588   /*                                                                       */</span>
<span class="line-modified">4589   /*    In such cases, the library version might not be available before   */</span>
<span class="line-modified">4590   /*    the library object has been created.                               */</span>
<span class="line-modified">4591   /*                                                                       */</span>



4592   FT_EXPORT( void )
4593   FT_Library_Version( FT_Library   library,
4594                       FT_Int      *amajor,
4595                       FT_Int      *aminor,
4596                       FT_Int      *apatch );
4597 
4598 
<span class="line-modified">4599   /*************************************************************************/</span>
<span class="line-modified">4600   /*                                                                       */</span>
<span class="line-modified">4601   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4602   /*    FT_Face_CheckTrueTypePatents                                       */</span>
<span class="line-modified">4603   /*                                                                       */</span>
<span class="line-modified">4604   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4605   /*    Deprecated, does nothing.                                          */</span>
<span class="line-modified">4606   /*                                                                       */</span>
<span class="line-modified">4607   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4608   /*    face :: A face handle.                                             */</span>
<span class="line-modified">4609   /*                                                                       */</span>
<span class="line-modified">4610   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4611   /*    Always returns false.                                              */</span>
<span class="line-modified">4612   /*                                                                       */</span>
<span class="line-modified">4613   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4614   /*    Since May 2010, TrueType hinting is no longer patented.            */</span>
<span class="line-modified">4615   /*                                                                       */</span>
<span class="line-modified">4616   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4617   /*    2.3.5                                                              */</span>
<span class="line-modified">4618   /*                                                                       */</span>

4619   FT_EXPORT( FT_Bool )
4620   FT_Face_CheckTrueTypePatents( FT_Face  face );
4621 
4622 
<span class="line-modified">4623   /*************************************************************************/</span>
<span class="line-modified">4624   /*                                                                       */</span>
<span class="line-modified">4625   /* &lt;Function&gt;                                                            */</span>
<span class="line-modified">4626   /*    FT_Face_SetUnpatentedHinting                                       */</span>
<span class="line-modified">4627   /*                                                                       */</span>
<span class="line-modified">4628   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">4629   /*    Deprecated, does nothing.                                          */</span>
<span class="line-modified">4630   /*                                                                       */</span>
<span class="line-modified">4631   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">4632   /*    face  :: A face handle.                                            */</span>
<span class="line-modified">4633   /*                                                                       */</span>
<span class="line-modified">4634   /*    value :: New boolean setting.                                      */</span>
<span class="line-modified">4635   /*                                                                       */</span>
<span class="line-modified">4636   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">4637   /*    Always returns false.                                              */</span>
<span class="line-modified">4638   /*                                                                       */</span>
<span class="line-modified">4639   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">4640   /*    Since May 2010, TrueType hinting is no longer patented.            */</span>
<span class="line-modified">4641   /*                                                                       */</span>
<span class="line-modified">4642   /* &lt;Since&gt;                                                               */</span>
<span class="line-modified">4643   /*    2.3.5                                                              */</span>
<span class="line-modified">4644   /*                                                                       */</span>


4645   FT_EXPORT( FT_Bool )
4646   FT_Face_SetUnpatentedHinting( FT_Face  face,
4647                                 FT_Bool  value );
4648 
4649   /* */
4650 
4651 
4652 FT_END_HEADER
4653 
4654 #endif /* FREETYPE_H_ */
4655 
4656 
4657 /* END */
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">   1 /****************************************************************************</span>
<span class="line-modified">   2  *</span>
<span class="line-modified">   3  * freetype.h</span>
<span class="line-modified">   4  *</span>
<span class="line-modified">   5  *   FreeType high-level API and common types (specification only).</span>
<span class="line-modified">   6  *</span>
<span class="line-modified">   7  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">   8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">   9  *</span>
<span class="line-modified">  10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">  11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">  12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">  13  * this file you indicate that you have read the license and</span>
<span class="line-modified">  14  * understand and accept it fully.</span>
<span class="line-modified">  15  *</span>
<span class="line-modified">  16  */</span>
  17 
  18 
  19 #ifndef FREETYPE_H_
  20 #define FREETYPE_H_
  21 
  22 
  23 #ifndef FT_FREETYPE_H
  24 #error &quot;`ft2build.h&#39; hasn&#39;t been included yet!&quot;
  25 #error &quot;Please always use macros to include FreeType header files.&quot;
  26 #error &quot;Example:&quot;
  27 #error &quot;  #include &lt;ft2build.h&gt;&quot;
  28 #error &quot;  #include FT_FREETYPE_H&quot;
  29 #endif
  30 
  31 
  32 #include &lt;ft2build.h&gt;
  33 #include FT_CONFIG_CONFIG_H
  34 #include FT_TYPES_H
  35 #include FT_ERRORS_H
  36 
  37 
  38 FT_BEGIN_HEADER
  39 
  40 
  41 
<span class="line-modified">  42   /**************************************************************************</span>
<span class="line-modified">  43    *</span>
<span class="line-modified">  44    * @section:</span>
<span class="line-modified">  45    *   header_inclusion</span>
<span class="line-modified">  46    *</span>
<span class="line-modified">  47    * @title:</span>
<span class="line-modified">  48    *   FreeType&#39;s header inclusion scheme</span>
<span class="line-modified">  49    *</span>
<span class="line-modified">  50    * @abstract:</span>
<span class="line-modified">  51    *   How client applications should include FreeType header files.</span>
<span class="line-modified">  52    *</span>
<span class="line-modified">  53    * @description:</span>
<span class="line-modified">  54    *   To be as flexible as possible (and for historical reasons), FreeType</span>
<span class="line-modified">  55    *   uses a very special inclusion scheme to load header files, for example</span>
<span class="line-modified">  56    *</span>
<span class="line-modified">  57    *   ```</span>
<span class="line-modified">  58    *     #include &lt;ft2build.h&gt;</span>
<span class="line-modified">  59    *</span>
<span class="line-modified">  60    *     #include FT_FREETYPE_H</span>
<span class="line-modified">  61    *     #include FT_OUTLINE_H</span>
<span class="line-modified">  62    *   ```</span>
<span class="line-modified">  63    *</span>
<span class="line-modified">  64    *   A compiler and its preprocessor only needs an include path to find the</span>
<span class="line-modified">  65    *   file `ft2build.h`; the exact locations and names of the other FreeType</span>
<span class="line-modified">  66    *   header files are hidden by @header_file_macros, loaded by</span>
<span class="line-modified">  67    *   `ft2build.h`.  The API documentation always gives the header macro</span>
<span class="line-modified">  68    *   name needed for a particular function.</span>
<span class="line-modified">  69    *</span>
<span class="line-modified">  70    */</span>

  71 
  72 
<span class="line-modified">  73   /**************************************************************************</span>
<span class="line-modified">  74    *</span>
<span class="line-modified">  75    * @section:</span>
<span class="line-modified">  76    *   user_allocation</span>
<span class="line-modified">  77    *</span>
<span class="line-modified">  78    * @title:</span>
<span class="line-modified">  79    *   User allocation</span>
<span class="line-modified">  80    *</span>
<span class="line-modified">  81    * @abstract:</span>
<span class="line-modified">  82    *   How client applications should allocate FreeType data structures.</span>
<span class="line-modified">  83    *</span>
<span class="line-modified">  84    * @description:</span>
<span class="line-modified">  85    *   FreeType assumes that structures allocated by the user and passed as</span>
<span class="line-modified">  86    *   arguments are zeroed out except for the actual data.  In other words,</span>
<span class="line-modified">  87    *   it is recommended to use `calloc` (or variants of it) instead of</span>
<span class="line-modified">  88    *   `malloc` for allocation.</span>
<span class="line-modified">  89    *</span>
<span class="line-modified">  90    */</span>
  91 
  92 
  93 
  94   /*************************************************************************/
  95   /*************************************************************************/
  96   /*                                                                       */
  97   /*                        B A S I C   T Y P E S                          */
  98   /*                                                                       */
  99   /*************************************************************************/
 100   /*************************************************************************/
 101 
 102 
<span class="line-modified"> 103   /**************************************************************************</span>
<span class="line-modified"> 104    *</span>
<span class="line-modified"> 105    * @section:</span>
<span class="line-modified"> 106    *   base_interface</span>
<span class="line-modified"> 107    *</span>
<span class="line-modified"> 108    * @title:</span>
<span class="line-modified"> 109    *   Base Interface</span>
<span class="line-modified"> 110    *</span>
<span class="line-modified"> 111    * @abstract:</span>
<span class="line-modified"> 112    *   The FreeType~2 base font interface.</span>
<span class="line-modified"> 113    *</span>
<span class="line-modified"> 114    * @description:</span>
<span class="line-modified"> 115    *   This section describes the most important public high-level API</span>
<span class="line-modified"> 116    *   functions of FreeType~2.</span>
<span class="line-modified"> 117    *</span>
<span class="line-modified"> 118    * @order:</span>
<span class="line-modified"> 119    *   FT_Library</span>
<span class="line-modified"> 120    *   FT_Face</span>
<span class="line-modified"> 121    *   FT_Size</span>
<span class="line-modified"> 122    *   FT_GlyphSlot</span>
<span class="line-modified"> 123    *   FT_CharMap</span>
<span class="line-modified"> 124    *   FT_Encoding</span>
<span class="line-modified"> 125    *   FT_ENC_TAG</span>
<span class="line-modified"> 126    *</span>
<span class="line-modified"> 127    *   FT_FaceRec</span>
<span class="line-modified"> 128    *</span>
<span class="line-modified"> 129    *   FT_FACE_FLAG_SCALABLE</span>
<span class="line-modified"> 130    *   FT_FACE_FLAG_FIXED_SIZES</span>
<span class="line-modified"> 131    *   FT_FACE_FLAG_FIXED_WIDTH</span>
<span class="line-modified"> 132    *   FT_FACE_FLAG_HORIZONTAL</span>
<span class="line-modified"> 133    *   FT_FACE_FLAG_VERTICAL</span>
<span class="line-modified"> 134    *   FT_FACE_FLAG_COLOR</span>
<span class="line-modified"> 135    *   FT_FACE_FLAG_SFNT</span>
<span class="line-modified"> 136    *   FT_FACE_FLAG_CID_KEYED</span>
<span class="line-modified"> 137    *   FT_FACE_FLAG_TRICKY</span>
<span class="line-modified"> 138    *   FT_FACE_FLAG_KERNING</span>
<span class="line-modified"> 139    *   FT_FACE_FLAG_MULTIPLE_MASTERS</span>
<span class="line-modified"> 140    *   FT_FACE_FLAG_VARIATION</span>
<span class="line-modified"> 141    *   FT_FACE_FLAG_GLYPH_NAMES</span>
<span class="line-modified"> 142    *   FT_FACE_FLAG_EXTERNAL_STREAM</span>
<span class="line-modified"> 143    *   FT_FACE_FLAG_HINTER</span>
<span class="line-modified"> 144    *</span>
<span class="line-modified"> 145    *   FT_HAS_HORIZONTAL</span>
<span class="line-modified"> 146    *   FT_HAS_VERTICAL</span>
<span class="line-modified"> 147    *   FT_HAS_KERNING</span>
<span class="line-modified"> 148    *   FT_HAS_FIXED_SIZES</span>
<span class="line-modified"> 149    *   FT_HAS_GLYPH_NAMES</span>
<span class="line-modified"> 150    *   FT_HAS_COLOR</span>
<span class="line-modified"> 151    *   FT_HAS_MULTIPLE_MASTERS</span>
<span class="line-modified"> 152    *</span>
<span class="line-modified"> 153    *   FT_IS_SFNT</span>
<span class="line-modified"> 154    *   FT_IS_SCALABLE</span>
<span class="line-modified"> 155    *   FT_IS_FIXED_WIDTH</span>
<span class="line-modified"> 156    *   FT_IS_CID_KEYED</span>
<span class="line-modified"> 157    *   FT_IS_TRICKY</span>
<span class="line-modified"> 158    *   FT_IS_NAMED_INSTANCE</span>
<span class="line-modified"> 159    *   FT_IS_VARIATION</span>
<span class="line-modified"> 160    *</span>
<span class="line-modified"> 161    *   FT_STYLE_FLAG_BOLD</span>
<span class="line-modified"> 162    *   FT_STYLE_FLAG_ITALIC</span>
<span class="line-modified"> 163    *</span>
<span class="line-modified"> 164    *   FT_SizeRec</span>
<span class="line-modified"> 165    *   FT_Size_Metrics</span>
<span class="line-modified"> 166    *</span>
<span class="line-modified"> 167    *   FT_GlyphSlotRec</span>
<span class="line-modified"> 168    *   FT_Glyph_Metrics</span>
<span class="line-modified"> 169    *   FT_SubGlyph</span>
<span class="line-modified"> 170    *</span>
<span class="line-modified"> 171    *   FT_Bitmap_Size</span>
<span class="line-modified"> 172    *</span>
<span class="line-modified"> 173    *   FT_Init_FreeType</span>
<span class="line-modified"> 174    *   FT_Done_FreeType</span>
<span class="line-modified"> 175    *</span>
<span class="line-modified"> 176    *   FT_New_Face</span>
<span class="line-modified"> 177    *   FT_Done_Face</span>
<span class="line-modified"> 178    *   FT_Reference_Face</span>
<span class="line-modified"> 179    *   FT_New_Memory_Face</span>
<span class="line-modified"> 180    *   FT_Face_Properties</span>
<span class="line-modified"> 181    *   FT_Open_Face</span>
<span class="line-modified"> 182    *   FT_Open_Args</span>
<span class="line-modified"> 183    *   FT_Parameter</span>
<span class="line-modified"> 184    *   FT_Attach_File</span>
<span class="line-modified"> 185    *   FT_Attach_Stream</span>
<span class="line-modified"> 186    *</span>
<span class="line-modified"> 187    *   FT_Set_Char_Size</span>
<span class="line-modified"> 188    *   FT_Set_Pixel_Sizes</span>
<span class="line-modified"> 189    *   FT_Request_Size</span>
<span class="line-modified"> 190    *   FT_Select_Size</span>
<span class="line-modified"> 191    *   FT_Size_Request_Type</span>
<span class="line-modified"> 192    *   FT_Size_RequestRec</span>
<span class="line-modified"> 193    *   FT_Size_Request</span>
<span class="line-modified"> 194    *   FT_Set_Transform</span>
<span class="line-modified"> 195    *   FT_Load_Glyph</span>
<span class="line-modified"> 196    *   FT_Get_Char_Index</span>
<span class="line-modified"> 197    *   FT_Get_First_Char</span>
<span class="line-modified"> 198    *   FT_Get_Next_Char</span>
<span class="line-modified"> 199    *   FT_Get_Name_Index</span>
<span class="line-modified"> 200    *   FT_Load_Char</span>
<span class="line-modified"> 201    *</span>
<span class="line-modified"> 202    *   FT_OPEN_MEMORY</span>
<span class="line-modified"> 203    *   FT_OPEN_STREAM</span>
<span class="line-modified"> 204    *   FT_OPEN_PATHNAME</span>
<span class="line-modified"> 205    *   FT_OPEN_DRIVER</span>
<span class="line-modified"> 206    *   FT_OPEN_PARAMS</span>
<span class="line-modified"> 207    *</span>
<span class="line-modified"> 208    *   FT_LOAD_DEFAULT</span>
<span class="line-modified"> 209    *   FT_LOAD_RENDER</span>
<span class="line-modified"> 210    *   FT_LOAD_MONOCHROME</span>
<span class="line-modified"> 211    *   FT_LOAD_LINEAR_DESIGN</span>
<span class="line-modified"> 212    *   FT_LOAD_NO_SCALE</span>
<span class="line-modified"> 213    *   FT_LOAD_NO_HINTING</span>
<span class="line-modified"> 214    *   FT_LOAD_NO_BITMAP</span>
<span class="line-modified"> 215    *   FT_LOAD_NO_AUTOHINT</span>
<span class="line-modified"> 216    *   FT_LOAD_COLOR</span>
<span class="line-modified"> 217    *</span>
<span class="line-modified"> 218    *   FT_LOAD_VERTICAL_LAYOUT</span>
<span class="line-modified"> 219    *   FT_LOAD_IGNORE_TRANSFORM</span>
<span class="line-modified"> 220    *   FT_LOAD_FORCE_AUTOHINT</span>
<span class="line-modified"> 221    *   FT_LOAD_NO_RECURSE</span>
<span class="line-modified"> 222    *   FT_LOAD_PEDANTIC</span>
<span class="line-modified"> 223    *</span>
<span class="line-modified"> 224    *   FT_LOAD_TARGET_NORMAL</span>
<span class="line-modified"> 225    *   FT_LOAD_TARGET_LIGHT</span>
<span class="line-modified"> 226    *   FT_LOAD_TARGET_MONO</span>
<span class="line-modified"> 227    *   FT_LOAD_TARGET_LCD</span>
<span class="line-modified"> 228    *   FT_LOAD_TARGET_LCD_V</span>
<span class="line-modified"> 229    *</span>
<span class="line-modified"> 230    *   FT_LOAD_TARGET_MODE</span>
<span class="line-modified"> 231    *</span>
<span class="line-modified"> 232    *   FT_Render_Glyph</span>
<span class="line-modified"> 233    *   FT_Render_Mode</span>
<span class="line-modified"> 234    *   FT_Get_Kerning</span>
<span class="line-modified"> 235    *   FT_Kerning_Mode</span>
<span class="line-modified"> 236    *   FT_Get_Track_Kerning</span>
<span class="line-modified"> 237    *   FT_Get_Glyph_Name</span>
<span class="line-modified"> 238    *   FT_Get_Postscript_Name</span>
<span class="line-modified"> 239    *</span>
<span class="line-modified"> 240    *   FT_CharMapRec</span>
<span class="line-modified"> 241    *   FT_Select_Charmap</span>
<span class="line-modified"> 242    *   FT_Set_Charmap</span>
<span class="line-modified"> 243    *   FT_Get_Charmap_Index</span>
<span class="line-modified"> 244    *</span>
<span class="line-modified"> 245    *   FT_Get_FSType_Flags</span>
<span class="line-modified"> 246    *   FT_Get_SubGlyph_Info</span>
<span class="line-modified"> 247    *</span>
<span class="line-modified"> 248    *   FT_Face_Internal</span>
<span class="line-modified"> 249    *   FT_Size_Internal</span>
<span class="line-modified"> 250    *   FT_Slot_Internal</span>
<span class="line-modified"> 251    *</span>
<span class="line-modified"> 252    *   FT_FACE_FLAG_XXX</span>
<span class="line-modified"> 253    *   FT_STYLE_FLAG_XXX</span>
<span class="line-modified"> 254    *   FT_OPEN_XXX</span>
<span class="line-modified"> 255    *   FT_LOAD_XXX</span>
<span class="line-modified"> 256    *   FT_LOAD_TARGET_XXX</span>
<span class="line-modified"> 257    *   FT_SUBGLYPH_FLAG_XXX</span>
<span class="line-modified"> 258    *   FT_FSTYPE_XXX</span>
<span class="line-modified"> 259    *</span>
<span class="line-modified"> 260    *   FT_HAS_FAST_GLYPHS</span>
<span class="line-modified"> 261    *</span>
<span class="line-modified"> 262    */</span>
 263 
 264 
<span class="line-modified"> 265   /**************************************************************************</span>
<span class="line-modified"> 266    *</span>
<span class="line-modified"> 267    * @struct:</span>
<span class="line-modified"> 268    *   FT_Glyph_Metrics</span>
<span class="line-modified"> 269    *</span>
<span class="line-modified"> 270    * @description:</span>
<span class="line-modified"> 271    *   A structure to model the metrics of a single glyph.  The values are</span>
<span class="line-modified"> 272    *   expressed in 26.6 fractional pixel format; if the flag</span>
<span class="line-modified"> 273    *   @FT_LOAD_NO_SCALE has been used while loading the glyph, values are</span>
<span class="line-modified"> 274    *   expressed in font units instead.</span>
<span class="line-modified"> 275    *</span>
<span class="line-modified"> 276    * @fields:</span>
<span class="line-modified"> 277    *   width ::</span>
<span class="line-modified"> 278    *     The glyph&#39;s width.</span>
<span class="line-modified"> 279    *</span>
<span class="line-modified"> 280    *   height ::</span>
<span class="line-modified"> 281    *     The glyph&#39;s height.</span>
<span class="line-modified"> 282    *</span>
<span class="line-modified"> 283    *   horiBearingX ::</span>
<span class="line-modified"> 284    *     Left side bearing for horizontal layout.</span>
<span class="line-modified"> 285    *</span>
<span class="line-modified"> 286    *   horiBearingY ::</span>
<span class="line-modified"> 287    *     Top side bearing for horizontal layout.</span>
<span class="line-modified"> 288    *</span>
<span class="line-modified"> 289    *   horiAdvance ::</span>
<span class="line-modified"> 290    *     Advance width for horizontal layout.</span>
<span class="line-modified"> 291    *</span>
<span class="line-modified"> 292    *   vertBearingX ::</span>
<span class="line-modified"> 293    *     Left side bearing for vertical layout.</span>
<span class="line-modified"> 294    *</span>
<span class="line-modified"> 295    *   vertBearingY ::</span>
<span class="line-modified"> 296    *     Top side bearing for vertical layout.  Larger positive values mean</span>
<span class="line-modified"> 297    *     further below the vertical glyph origin.</span>
<span class="line-modified"> 298    *</span>
<span class="line-modified"> 299    *   vertAdvance ::</span>
<span class="line-modified"> 300    *     Advance height for vertical layout.  Positive values mean the glyph</span>
<span class="line-modified"> 301    *     has a positive advance downward.</span>
<span class="line-modified"> 302    *</span>
<span class="line-modified"> 303    * @note:</span>
<span class="line-modified"> 304    *   If not disabled with @FT_LOAD_NO_HINTING, the values represent</span>
<span class="line-modified"> 305    *   dimensions of the hinted glyph (in case hinting is applicable).</span>
<span class="line-modified"> 306    *</span>
<span class="line-modified"> 307    *   Stroking a glyph with an outside border does not increase</span>
<span class="line-modified"> 308    *   `horiAdvance` or `vertAdvance`; you have to manually adjust these</span>
<span class="line-modified"> 309    *   values to account for the added width and height.</span>
<span class="line-modified"> 310    *</span>
<span class="line-modified"> 311    *   FreeType doesn&#39;t use the &#39;VORG&#39; table data for CFF fonts because it</span>
<span class="line-modified"> 312    *   doesn&#39;t have an interface to quickly retrieve the glyph height.  The</span>
<span class="line-modified"> 313    *   y~coordinate of the vertical origin can be simply computed as</span>
<span class="line-modified"> 314    *   `vertBearingY + height` after loading a glyph.</span>
<span class="line-modified"> 315    */</span>
 316   typedef struct  FT_Glyph_Metrics_
 317   {
 318     FT_Pos  width;
 319     FT_Pos  height;
 320 
 321     FT_Pos  horiBearingX;
 322     FT_Pos  horiBearingY;
 323     FT_Pos  horiAdvance;
 324 
 325     FT_Pos  vertBearingX;
 326     FT_Pos  vertBearingY;
 327     FT_Pos  vertAdvance;
 328 
 329   } FT_Glyph_Metrics;
 330 
 331 
<span class="line-modified"> 332   /**************************************************************************</span>
<span class="line-modified"> 333    *</span>
<span class="line-modified"> 334    * @struct:</span>
<span class="line-modified"> 335    *   FT_Bitmap_Size</span>
<span class="line-modified"> 336    *</span>
<span class="line-modified"> 337    * @description:</span>
<span class="line-modified"> 338    *   This structure models the metrics of a bitmap strike (i.e., a set of</span>
<span class="line-modified"> 339    *   glyphs for a given point size and resolution) in a bitmap font.  It is</span>
<span class="line-modified"> 340    *   used for the `available_sizes` field of @FT_Face.</span>
<span class="line-modified"> 341    *</span>
<span class="line-modified"> 342    * @fields:</span>
<span class="line-modified"> 343    *   height ::</span>
<span class="line-modified"> 344    *     The vertical distance, in pixels, between two consecutive baselines.</span>
<span class="line-modified"> 345    *     It is always positive.</span>
<span class="line-modified"> 346    *</span>
<span class="line-modified"> 347    *   width ::</span>
<span class="line-modified"> 348    *     The average width, in pixels, of all glyphs in the strike.</span>
<span class="line-modified"> 349    *</span>
<span class="line-modified"> 350    *   size ::</span>
<span class="line-modified"> 351    *     The nominal size of the strike in 26.6 fractional points.  This</span>
<span class="line-modified"> 352    *     field is not very useful.</span>
<span class="line-modified"> 353    *</span>
<span class="line-modified"> 354    *   x_ppem ::</span>
<span class="line-modified"> 355    *     The horizontal ppem (nominal width) in 26.6 fractional pixels.</span>
<span class="line-modified"> 356    *</span>
<span class="line-modified"> 357    *   y_ppem ::</span>
<span class="line-modified"> 358    *     The vertical ppem (nominal height) in 26.6 fractional pixels.</span>
<span class="line-modified"> 359    *</span>
<span class="line-modified"> 360    * @note:</span>
<span class="line-modified"> 361    *   Windows FNT:</span>
<span class="line-modified"> 362    *     The nominal size given in a FNT font is not reliable.  If the driver</span>
<span class="line-modified"> 363    *     finds it incorrect, it sets `size` to some calculated values, and</span>
<span class="line-modified"> 364    *     `x_ppem` and `y_ppem` to the pixel width and height given in the</span>
<span class="line-modified"> 365    *     font, respectively.</span>
<span class="line-modified"> 366    *</span>
<span class="line-modified"> 367    *   TrueType embedded bitmaps:</span>
<span class="line-modified"> 368    *     `size`, `width`, and `height` values are not contained in the bitmap</span>
<span class="line-modified"> 369    *     strike itself.  They are computed from the global font parameters.</span>
<span class="line-added"> 370    */</span>
 371   typedef struct  FT_Bitmap_Size_
 372   {
 373     FT_Short  height;
 374     FT_Short  width;
 375 
 376     FT_Pos    size;
 377 
 378     FT_Pos    x_ppem;
 379     FT_Pos    y_ppem;
 380 
 381   } FT_Bitmap_Size;
 382 
 383 
 384   /*************************************************************************/
 385   /*************************************************************************/
 386   /*                                                                       */
 387   /*                     O B J E C T   C L A S S E S                       */
 388   /*                                                                       */
 389   /*************************************************************************/
 390   /*************************************************************************/
 391 
<span class="line-modified"> 392   /**************************************************************************</span>
<span class="line-modified"> 393    *</span>
<span class="line-modified"> 394    * @type:</span>
<span class="line-modified"> 395    *   FT_Library</span>
<span class="line-modified"> 396    *</span>
<span class="line-modified"> 397    * @description:</span>
<span class="line-modified"> 398    *   A handle to a FreeType library instance.  Each &#39;library&#39; is completely</span>
<span class="line-modified"> 399    *   independent from the others; it is the &#39;root&#39; of a set of objects like</span>
<span class="line-modified"> 400    *   fonts, faces, sizes, etc.</span>
<span class="line-modified"> 401    *</span>
<span class="line-modified"> 402    *   It also embeds a memory manager (see @FT_Memory), as well as a</span>
<span class="line-modified"> 403    *   scan-line converter object (see @FT_Raster).</span>
<span class="line-modified"> 404    *</span>
<span class="line-modified"> 405    *   [Since 2.5.6] In multi-threaded applications it is easiest to use one</span>
<span class="line-modified"> 406    *   `FT_Library` object per thread.  In case this is too cumbersome, a</span>
<span class="line-modified"> 407    *   single `FT_Library` object across threads is possible also, as long as</span>
<span class="line-modified"> 408    *   a mutex lock is used around @FT_New_Face and @FT_Done_Face.</span>
<span class="line-modified"> 409    *</span>
<span class="line-modified"> 410    * @note:</span>
<span class="line-modified"> 411    *   Library objects are normally created by @FT_Init_FreeType, and</span>
<span class="line-modified"> 412    *   destroyed with @FT_Done_FreeType.  If you need reference-counting</span>
<span class="line-modified"> 413    *   (cf. @FT_Reference_Library), use @FT_New_Library and @FT_Done_Library.</span>
<span class="line-modified"> 414    */</span>


 415   typedef struct FT_LibraryRec_  *FT_Library;
 416 
 417 
<span class="line-modified"> 418   /**************************************************************************</span>
<span class="line-modified"> 419    *</span>
<span class="line-modified"> 420    * @section:</span>
<span class="line-modified"> 421    *   module_management</span>
<span class="line-modified"> 422    *</span>
<span class="line-modified"> 423    */</span>
 424 
<span class="line-modified"> 425   /**************************************************************************</span>
<span class="line-modified"> 426    *</span>
<span class="line-modified"> 427    * @type:</span>
<span class="line-modified"> 428    *   FT_Module</span>
<span class="line-modified"> 429    *</span>
<span class="line-modified"> 430    * @description:</span>
<span class="line-modified"> 431    *   A handle to a given FreeType module object.  A module can be a font</span>
<span class="line-modified"> 432    *   driver, a renderer, or anything else that provides services to the</span>
<span class="line-modified"> 433    *   former.</span>
<span class="line-modified"> 434    */</span>
 435   typedef struct FT_ModuleRec_*  FT_Module;
 436 
 437 
<span class="line-modified"> 438   /**************************************************************************</span>
<span class="line-modified"> 439    *</span>
<span class="line-modified"> 440    * @type:</span>
<span class="line-modified"> 441    *   FT_Driver</span>
<span class="line-modified"> 442    *</span>
<span class="line-modified"> 443    * @description:</span>
<span class="line-modified"> 444    *   A handle to a given FreeType font driver object.  A font driver is a</span>
<span class="line-modified"> 445    *   module capable of creating faces from font files.</span>
<span class="line-modified"> 446    */</span>
 447   typedef struct FT_DriverRec_*  FT_Driver;
 448 
 449 
<span class="line-modified"> 450   /**************************************************************************</span>
<span class="line-modified"> 451    *</span>
<span class="line-modified"> 452    * @type:</span>
<span class="line-modified"> 453    *   FT_Renderer</span>
<span class="line-modified"> 454    *</span>
<span class="line-modified"> 455    * @description:</span>
<span class="line-modified"> 456    *   A handle to a given FreeType renderer.  A renderer is a module in</span>
<span class="line-modified"> 457    *   charge of converting a glyph&#39;s outline image to a bitmap.  It supports</span>
<span class="line-modified"> 458    *   a single glyph image format, and one or more target surface depths.</span>
<span class="line-modified"> 459    */</span>

 460   typedef struct FT_RendererRec_*  FT_Renderer;
 461 
 462 
<span class="line-modified"> 463   /**************************************************************************</span>
<span class="line-modified"> 464    *</span>
<span class="line-modified"> 465    * @section:</span>
<span class="line-modified"> 466    *   base_interface</span>
<span class="line-modified"> 467    *</span>
<span class="line-modified"> 468    */</span>
 469 
<span class="line-modified"> 470   /**************************************************************************</span>
<span class="line-modified"> 471    *</span>
<span class="line-modified"> 472    * @type:</span>
<span class="line-modified"> 473    *   FT_Face</span>
<span class="line-modified"> 474    *</span>
<span class="line-modified"> 475    * @description:</span>
<span class="line-modified"> 476    *   A handle to a typographic face object.  A face object models a given</span>
<span class="line-modified"> 477    *   typeface, in a given style.</span>
<span class="line-modified"> 478    *</span>
<span class="line-modified"> 479    * @note:</span>
<span class="line-modified"> 480    *   A face object also owns a single @FT_GlyphSlot object, as well as one</span>
<span class="line-modified"> 481    *   or more @FT_Size objects.</span>
<span class="line-modified"> 482    *</span>
<span class="line-modified"> 483    *   Use @FT_New_Face or @FT_Open_Face to create a new face object from a</span>
<span class="line-modified"> 484    *   given filepath or a custom input stream.</span>
<span class="line-modified"> 485    *</span>
<span class="line-modified"> 486    *   Use @FT_Done_Face to destroy it (along with its slot and sizes).</span>
<span class="line-modified"> 487    *</span>
<span class="line-modified"> 488    *   An `FT_Face` object can only be safely used from one thread at a time.</span>
<span class="line-modified"> 489    *   Similarly, creation and destruction of `FT_Face` with the same</span>
<span class="line-modified"> 490    *   @FT_Library object can only be done from one thread at a time.  On the</span>
<span class="line-modified"> 491    *   other hand, functions like @FT_Load_Glyph and its siblings are</span>
<span class="line-modified"> 492    *   thread-safe and do not need the lock to be held as long as the same</span>
<span class="line-modified"> 493    *   `FT_Face` object is not used from multiple threads at the same time.</span>
<span class="line-modified"> 494    *</span>
<span class="line-modified"> 495    * @also:</span>
<span class="line-modified"> 496    *   See @FT_FaceRec for the publicly accessible fields of a given face</span>
<span class="line-modified"> 497    *   object.</span>
<span class="line-modified"> 498    */</span>

 499   typedef struct FT_FaceRec_*  FT_Face;
 500 
 501 
<span class="line-modified"> 502   /**************************************************************************</span>
<span class="line-modified"> 503    *</span>
<span class="line-modified"> 504    * @type:</span>
<span class="line-modified"> 505    *   FT_Size</span>
<span class="line-modified"> 506    *</span>
<span class="line-modified"> 507    * @description:</span>
<span class="line-modified"> 508    *   A handle to an object that models a face scaled to a given character</span>
<span class="line-modified"> 509    *   size.</span>
<span class="line-modified"> 510    *</span>
<span class="line-modified"> 511    * @note:</span>
<span class="line-modified"> 512    *   An @FT_Face has one _active_ @FT_Size object that is used by functions</span>
<span class="line-modified"> 513    *   like @FT_Load_Glyph to determine the scaling transformation that in</span>
<span class="line-modified"> 514    *   turn is used to load and hint glyphs and metrics.</span>
<span class="line-modified"> 515    *</span>
<span class="line-modified"> 516    *   You can use @FT_Set_Char_Size, @FT_Set_Pixel_Sizes, @FT_Request_Size</span>
<span class="line-modified"> 517    *   or even @FT_Select_Size to change the content (i.e., the scaling</span>
<span class="line-modified"> 518    *   values) of the active @FT_Size.</span>
<span class="line-modified"> 519    *</span>
<span class="line-modified"> 520    *   You can use @FT_New_Size to create additional size objects for a given</span>
<span class="line-modified"> 521    *   @FT_Face, but they won&#39;t be used by other functions until you activate</span>
<span class="line-modified"> 522    *   it through @FT_Activate_Size.  Only one size can be activated at any</span>
<span class="line-modified"> 523    *   given time per face.</span>
<span class="line-modified"> 524    *</span>
<span class="line-modified"> 525    * @also:</span>
<span class="line-modified"> 526    *   See @FT_SizeRec for the publicly accessible fields of a given size</span>
<span class="line-modified"> 527    *   object.</span>
<span class="line-modified"> 528    */</span>

 529   typedef struct FT_SizeRec_*  FT_Size;
 530 
 531 
<span class="line-modified"> 532   /**************************************************************************</span>
<span class="line-modified"> 533    *</span>
<span class="line-modified"> 534    * @type:</span>
<span class="line-modified"> 535    *   FT_GlyphSlot</span>
<span class="line-modified"> 536    *</span>
<span class="line-modified"> 537    * @description:</span>
<span class="line-modified"> 538    *   A handle to a given &#39;glyph slot&#39;.  A slot is a container that can hold</span>
<span class="line-modified"> 539    *   any of the glyphs contained in its parent face.</span>
<span class="line-modified"> 540    *</span>
<span class="line-modified"> 541    *   In other words, each time you call @FT_Load_Glyph or @FT_Load_Char,</span>
<span class="line-modified"> 542    *   the slot&#39;s content is erased by the new glyph data, i.e., the glyph&#39;s</span>
<span class="line-modified"> 543    *   metrics, its image (bitmap or outline), and other control information.</span>
<span class="line-modified"> 544    *</span>
<span class="line-modified"> 545    * @also:</span>
<span class="line-modified"> 546    *   See @FT_GlyphSlotRec for the publicly accessible glyph fields.</span>
<span class="line-modified"> 547    */</span>

 548   typedef struct FT_GlyphSlotRec_*  FT_GlyphSlot;
 549 
 550 
<span class="line-modified"> 551   /**************************************************************************</span>
<span class="line-modified"> 552    *</span>
<span class="line-modified"> 553    * @type:</span>
<span class="line-modified"> 554    *   FT_CharMap</span>
<span class="line-modified"> 555    *</span>
<span class="line-modified"> 556    * @description:</span>
<span class="line-modified"> 557    *   A handle to a character map (usually abbreviated to &#39;charmap&#39;).  A</span>
<span class="line-modified"> 558    *   charmap is used to translate character codes in a given encoding into</span>
<span class="line-modified"> 559    *   glyph indexes for its parent&#39;s face.  Some font formats may provide</span>
<span class="line-modified"> 560    *   several charmaps per font.</span>
<span class="line-modified"> 561    *</span>
<span class="line-modified"> 562    *   Each face object owns zero or more charmaps, but only one of them can</span>
<span class="line-modified"> 563    *   be &#39;active&#39;, providing the data used by @FT_Get_Char_Index or</span>
<span class="line-modified"> 564    *   @FT_Load_Char.</span>
<span class="line-modified"> 565    *</span>
<span class="line-modified"> 566    *   The list of available charmaps in a face is available through the</span>
<span class="line-modified"> 567    *   `face-&gt;num_charmaps` and `face-&gt;charmaps` fields of @FT_FaceRec.</span>
<span class="line-modified"> 568    *</span>
<span class="line-modified"> 569    *   The currently active charmap is available as `face-&gt;charmap`.  You</span>
<span class="line-modified"> 570    *   should call @FT_Set_Charmap to change it.</span>
<span class="line-modified"> 571    *</span>
<span class="line-modified"> 572    * @note:</span>
<span class="line-modified"> 573    *   When a new face is created (either through @FT_New_Face or</span>
<span class="line-modified"> 574    *   @FT_Open_Face), the library looks for a Unicode charmap within the</span>
<span class="line-modified"> 575    *   list and automatically activates it.  If there is no Unicode charmap,</span>
<span class="line-modified"> 576    *   FreeType doesn&#39;t set an &#39;active&#39; charmap.</span>
<span class="line-modified"> 577    *</span>
<span class="line-modified"> 578    * @also:</span>
<span class="line-modified"> 579    *   See @FT_CharMapRec for the publicly accessible fields of a given</span>
<span class="line-modified"> 580    *   character map.</span>
<span class="line-modified"> 581    */</span>
 582   typedef struct FT_CharMapRec_*  FT_CharMap;
 583 
 584 
<span class="line-modified"> 585   /**************************************************************************</span>
<span class="line-modified"> 586    *</span>
<span class="line-modified"> 587    * @macro:</span>
<span class="line-modified"> 588    *   FT_ENC_TAG</span>
<span class="line-modified"> 589    *</span>
<span class="line-modified"> 590    * @description:</span>
<span class="line-modified"> 591    *   This macro converts four-letter tags into an unsigned long.  It is</span>
<span class="line-modified"> 592    *   used to define &#39;encoding&#39; identifiers (see @FT_Encoding).</span>
<span class="line-modified"> 593    *</span>
<span class="line-modified"> 594    * @note:</span>
<span class="line-modified"> 595    *   Since many 16-bit compilers don&#39;t like 32-bit enumerations, you should</span>
<span class="line-modified"> 596    *   redefine this macro in case of problems to something like this:</span>
<span class="line-modified"> 597    *</span>
<span class="line-modified"> 598    *   ```</span>
<span class="line-modified"> 599    *     #define FT_ENC_TAG( value, a, b, c, d )  value</span>
<span class="line-modified"> 600    *   ```</span>
<span class="line-modified"> 601    *</span>
<span class="line-modified"> 602    *   to get a simple enumeration without assigning special numbers.</span>
<span class="line-modified"> 603    */</span>

 604 
 605 #ifndef FT_ENC_TAG
 606 #define FT_ENC_TAG( value, a, b, c, d )         \
 607           value = ( ( (FT_UInt32)(a) &lt;&lt; 24 ) |  \
 608                     ( (FT_UInt32)(b) &lt;&lt; 16 ) |  \
 609                     ( (FT_UInt32)(c) &lt;&lt;  8 ) |  \
 610                       (FT_UInt32)(d)         )
 611 
 612 #endif /* FT_ENC_TAG */
 613 
 614 
<span class="line-modified"> 615   /**************************************************************************</span>
<span class="line-modified"> 616    *</span>
<span class="line-modified"> 617    * @enum:</span>
<span class="line-modified"> 618    *   FT_Encoding</span>
<span class="line-modified"> 619    *</span>
<span class="line-modified"> 620    * @description:</span>
<span class="line-modified"> 621    *   An enumeration to specify character sets supported by charmaps.  Used</span>
<span class="line-modified"> 622    *   in the @FT_Select_Charmap API function.</span>
<span class="line-modified"> 623    *</span>
<span class="line-modified"> 624    * @note:</span>
<span class="line-modified"> 625    *   Despite the name, this enumeration lists specific character</span>
<span class="line-modified"> 626    *   repertories (i.e., charsets), and not text encoding methods (e.g.,</span>
<span class="line-modified"> 627    *   UTF-8, UTF-16, etc.).</span>
<span class="line-modified"> 628    *</span>
<span class="line-modified"> 629    *   Other encodings might be defined in the future.</span>
<span class="line-modified"> 630    *</span>
<span class="line-modified"> 631    * @values:</span>
<span class="line-modified"> 632    *   FT_ENCODING_NONE ::</span>
<span class="line-modified"> 633    *     The encoding value~0 is reserved for all formats except BDF, PCF,</span>
<span class="line-modified"> 634    *     and Windows FNT; see below for more information.</span>
<span class="line-modified"> 635    *</span>
<span class="line-modified"> 636    *   FT_ENCODING_UNICODE ::</span>
<span class="line-modified"> 637    *     The Unicode character set.  This value covers all versions of the</span>
<span class="line-modified"> 638    *     Unicode repertoire, including ASCII and Latin-1.  Most fonts include</span>
<span class="line-modified"> 639    *     a Unicode charmap, but not all of them.</span>
<span class="line-modified"> 640    *</span>
<span class="line-modified"> 641    *     For example, if you want to access Unicode value U+1F028 (and the</span>
<span class="line-modified"> 642    *     font contains it), use value 0x1F028 as the input value for</span>
<span class="line-modified"> 643    *     @FT_Get_Char_Index.</span>
<span class="line-modified"> 644    *</span>
<span class="line-modified"> 645    *   FT_ENCODING_MS_SYMBOL ::</span>
<span class="line-modified"> 646    *     Microsoft Symbol encoding, used to encode mathematical symbols and</span>
<span class="line-modified"> 647    *     wingdings.  For more information, see</span>
<span class="line-modified"> 648    *     &#39;https://www.microsoft.com/typography/otspec/recom.htm#non-standard-symbol-fonts&#39;,</span>
<span class="line-modified"> 649    *     &#39;http://www.kostis.net/charsets/symbol.htm&#39;, and</span>
<span class="line-modified"> 650    *     &#39;http://www.kostis.net/charsets/wingding.htm&#39;.</span>
<span class="line-modified"> 651    *</span>
<span class="line-modified"> 652    *     This encoding uses character codes from the PUA (Private Unicode</span>
<span class="line-modified"> 653    *     Area) in the range U+F020-U+F0FF.</span>
<span class="line-modified"> 654    *</span>
<span class="line-modified"> 655    *   FT_ENCODING_SJIS ::</span>
<span class="line-modified"> 656    *     Shift JIS encoding for Japanese.  More info at</span>
<span class="line-modified"> 657    *     &#39;https://en.wikipedia.org/wiki/Shift_JIS&#39;.  See note on multi-byte</span>
<span class="line-modified"> 658    *     encodings below.</span>
<span class="line-modified"> 659    *</span>
<span class="line-modified"> 660    *   FT_ENCODING_PRC ::</span>
<span class="line-modified"> 661    *     Corresponds to encoding systems mainly for Simplified Chinese as</span>
<span class="line-modified"> 662    *     used in People&#39;s Republic of China (PRC).  The encoding layout is</span>
<span class="line-modified"> 663    *     based on GB~2312 and its supersets GBK and GB~18030.</span>
<span class="line-modified"> 664    *</span>
<span class="line-modified"> 665    *   FT_ENCODING_BIG5 ::</span>
<span class="line-modified"> 666    *     Corresponds to an encoding system for Traditional Chinese as used in</span>
<span class="line-modified"> 667    *     Taiwan and Hong Kong.</span>
<span class="line-modified"> 668    *</span>
<span class="line-modified"> 669    *   FT_ENCODING_WANSUNG ::</span>
<span class="line-modified"> 670    *     Corresponds to the Korean encoding system known as Extended Wansung</span>
<span class="line-modified"> 671    *     (MS Windows code page 949).  For more information see</span>
<span class="line-modified"> 672    *     &#39;https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/bestfit949.txt&#39;.</span>
<span class="line-modified"> 673    *</span>
<span class="line-modified"> 674    *   FT_ENCODING_JOHAB ::</span>
<span class="line-modified"> 675    *     The Korean standard character set (KS~C 5601-1992), which</span>
<span class="line-modified"> 676    *     corresponds to MS Windows code page 1361.  This character set</span>
<span class="line-modified"> 677    *     includes all possible Hangul character combinations.</span>
<span class="line-modified"> 678    *</span>
<span class="line-modified"> 679    *   FT_ENCODING_ADOBE_LATIN_1 ::</span>
<span class="line-modified"> 680    *     Corresponds to a Latin-1 encoding as defined in a Type~1 PostScript</span>
<span class="line-modified"> 681    *     font.  It is limited to 256 character codes.</span>
<span class="line-modified"> 682    *</span>
<span class="line-modified"> 683    *   FT_ENCODING_ADOBE_STANDARD ::</span>
<span class="line-modified"> 684    *     Adobe Standard encoding, as found in Type~1, CFF, and OpenType/CFF</span>
<span class="line-modified"> 685    *     fonts.  It is limited to 256 character codes.</span>
<span class="line-modified"> 686    *</span>
<span class="line-modified"> 687    *   FT_ENCODING_ADOBE_EXPERT ::</span>
<span class="line-modified"> 688    *     Adobe Expert encoding, as found in Type~1, CFF, and OpenType/CFF</span>
<span class="line-modified"> 689    *     fonts.  It is limited to 256 character codes.</span>
<span class="line-modified"> 690    *</span>
<span class="line-modified"> 691    *   FT_ENCODING_ADOBE_CUSTOM ::</span>
<span class="line-modified"> 692    *     Corresponds to a custom encoding, as found in Type~1, CFF, and</span>
<span class="line-modified"> 693    *     OpenType/CFF fonts.  It is limited to 256 character codes.</span>
<span class="line-modified"> 694    *</span>
<span class="line-modified"> 695    *   FT_ENCODING_APPLE_ROMAN ::</span>
<span class="line-modified"> 696    *     Apple roman encoding.  Many TrueType and OpenType fonts contain a</span>
<span class="line-modified"> 697    *     charmap for this 8-bit encoding, since older versions of Mac OS are</span>
<span class="line-modified"> 698    *     able to use it.</span>
<span class="line-modified"> 699    *</span>
<span class="line-modified"> 700    *   FT_ENCODING_OLD_LATIN_2 ::</span>
<span class="line-modified"> 701    *     This value is deprecated and was neither used nor reported by</span>
<span class="line-modified"> 702    *     FreeType.  Don&#39;t use or test for it.</span>
<span class="line-modified"> 703    *</span>
<span class="line-modified"> 704    *   FT_ENCODING_MS_SJIS ::</span>
<span class="line-modified"> 705    *     Same as FT_ENCODING_SJIS.  Deprecated.</span>
<span class="line-modified"> 706    *</span>
<span class="line-modified"> 707    *   FT_ENCODING_MS_GB2312 ::</span>
<span class="line-modified"> 708    *     Same as FT_ENCODING_PRC.  Deprecated.</span>
<span class="line-modified"> 709    *</span>
<span class="line-modified"> 710    *   FT_ENCODING_MS_BIG5 ::</span>
<span class="line-modified"> 711    *     Same as FT_ENCODING_BIG5.  Deprecated.</span>
<span class="line-modified"> 712    *</span>
<span class="line-modified"> 713    *   FT_ENCODING_MS_WANSUNG ::</span>
<span class="line-modified"> 714    *     Same as FT_ENCODING_WANSUNG.  Deprecated.</span>
<span class="line-modified"> 715    *</span>
<span class="line-modified"> 716    *   FT_ENCODING_MS_JOHAB ::</span>
<span class="line-modified"> 717    *     Same as FT_ENCODING_JOHAB.  Deprecated.</span>
<span class="line-modified"> 718    *</span>
<span class="line-modified"> 719    * @note:</span>
<span class="line-modified"> 720    *   By default, FreeType enables a Unicode charmap and tags it with</span>
<span class="line-modified"> 721    *   `FT_ENCODING_UNICODE` when it is either provided or can be generated</span>
<span class="line-modified"> 722    *   from PostScript glyph name dictionaries in the font file.  All other</span>
<span class="line-modified"> 723    *   encodings are considered legacy and tagged only if explicitly defined</span>
<span class="line-modified"> 724    *   in the font file.  Otherwise, `FT_ENCODING_NONE` is used.</span>
<span class="line-modified"> 725    *</span>
<span class="line-modified"> 726    *   `FT_ENCODING_NONE` is set by the BDF and PCF drivers if the charmap is</span>
<span class="line-modified"> 727    *   neither Unicode nor ISO-8859-1 (otherwise it is set to</span>
<span class="line-modified"> 728    *   `FT_ENCODING_UNICODE`).  Use @FT_Get_BDF_Charset_ID to find out which</span>
<span class="line-modified"> 729    *   encoding is really present.  If, for example, the `cs_registry` field</span>
<span class="line-modified"> 730    *   is &#39;KOI8&#39; and the `cs_encoding` field is &#39;R&#39;, the font is encoded in</span>
<span class="line-modified"> 731    *   KOI8-R.</span>
<span class="line-modified"> 732    *</span>
<span class="line-modified"> 733    *   `FT_ENCODING_NONE` is always set (with a single exception) by the</span>
<span class="line-modified"> 734    *   winfonts driver.  Use @FT_Get_WinFNT_Header and examine the `charset`</span>
<span class="line-modified"> 735    *   field of the @FT_WinFNT_HeaderRec structure to find out which encoding</span>
<span class="line-modified"> 736    *   is really present.  For example, @FT_WinFNT_ID_CP1251 (204) means</span>
<span class="line-modified"> 737    *   Windows code page 1251 (for Russian).</span>
<span class="line-modified"> 738    *</span>
<span class="line-modified"> 739    *   `FT_ENCODING_NONE` is set if `platform_id` is @TT_PLATFORM_MACINTOSH</span>
<span class="line-modified"> 740    *   and `encoding_id` is not `TT_MAC_ID_ROMAN` (otherwise it is set to</span>
<span class="line-modified"> 741    *   `FT_ENCODING_APPLE_ROMAN`).</span>
<span class="line-modified"> 742    *</span>
<span class="line-modified"> 743    *   If `platform_id` is @TT_PLATFORM_MACINTOSH, use the function</span>
<span class="line-modified"> 744    *   @FT_Get_CMap_Language_ID to query the Mac language ID that may be</span>
<span class="line-modified"> 745    *   needed to be able to distinguish Apple encoding variants.  See</span>
<span class="line-modified"> 746    *</span>
<span class="line-modified"> 747    *     https://www.unicode.org/Public/MAPPINGS/VENDORS/APPLE/Readme.txt</span>
<span class="line-modified"> 748    *</span>
<span class="line-modified"> 749    *   to get an idea how to do that.  Basically, if the language ID is~0,</span>
<span class="line-modified"> 750    *   don&#39;t use it, otherwise subtract 1 from the language ID.  Then examine</span>
<span class="line-modified"> 751    *   `encoding_id`.  If, for example, `encoding_id` is `TT_MAC_ID_ROMAN`</span>
<span class="line-modified"> 752    *   and the language ID (minus~1) is `TT_MAC_LANGID_GREEK`, it is the</span>
<span class="line-modified"> 753    *   Greek encoding, not Roman.  `TT_MAC_ID_ARABIC` with</span>
<span class="line-modified"> 754    *   `TT_MAC_LANGID_FARSI` means the Farsi variant the Arabic encoding.</span>
<span class="line-modified"> 755    */</span>



 756   typedef enum  FT_Encoding_
 757   {
 758     FT_ENC_TAG( FT_ENCODING_NONE, 0, 0, 0, 0 ),
 759 
 760     FT_ENC_TAG( FT_ENCODING_MS_SYMBOL, &#39;s&#39;, &#39;y&#39;, &#39;m&#39;, &#39;b&#39; ),
 761     FT_ENC_TAG( FT_ENCODING_UNICODE,   &#39;u&#39;, &#39;n&#39;, &#39;i&#39;, &#39;c&#39; ),
 762 
 763     FT_ENC_TAG( FT_ENCODING_SJIS,    &#39;s&#39;, &#39;j&#39;, &#39;i&#39;, &#39;s&#39; ),
 764     FT_ENC_TAG( FT_ENCODING_PRC,     &#39;g&#39;, &#39;b&#39;, &#39; &#39;, &#39; &#39; ),
 765     FT_ENC_TAG( FT_ENCODING_BIG5,    &#39;b&#39;, &#39;i&#39;, &#39;g&#39;, &#39;5&#39; ),
 766     FT_ENC_TAG( FT_ENCODING_WANSUNG, &#39;w&#39;, &#39;a&#39;, &#39;n&#39;, &#39;s&#39; ),
 767     FT_ENC_TAG( FT_ENCODING_JOHAB,   &#39;j&#39;, &#39;o&#39;, &#39;h&#39;, &#39;a&#39; ),
 768 
 769     /* for backward compatibility */
 770     FT_ENCODING_GB2312     = FT_ENCODING_PRC,
 771     FT_ENCODING_MS_SJIS    = FT_ENCODING_SJIS,
 772     FT_ENCODING_MS_GB2312  = FT_ENCODING_PRC,
 773     FT_ENCODING_MS_BIG5    = FT_ENCODING_BIG5,
 774     FT_ENCODING_MS_WANSUNG = FT_ENCODING_WANSUNG,
 775     FT_ENCODING_MS_JOHAB   = FT_ENCODING_JOHAB,
 776 
 777     FT_ENC_TAG( FT_ENCODING_ADOBE_STANDARD, &#39;A&#39;, &#39;D&#39;, &#39;O&#39;, &#39;B&#39; ),
 778     FT_ENC_TAG( FT_ENCODING_ADOBE_EXPERT,   &#39;A&#39;, &#39;D&#39;, &#39;B&#39;, &#39;E&#39; ),
 779     FT_ENC_TAG( FT_ENCODING_ADOBE_CUSTOM,   &#39;A&#39;, &#39;D&#39;, &#39;B&#39;, &#39;C&#39; ),
 780     FT_ENC_TAG( FT_ENCODING_ADOBE_LATIN_1,  &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39;1&#39; ),
 781 
 782     FT_ENC_TAG( FT_ENCODING_OLD_LATIN_2, &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39;2&#39; ),
 783 
 784     FT_ENC_TAG( FT_ENCODING_APPLE_ROMAN, &#39;a&#39;, &#39;r&#39;, &#39;m&#39;, &#39;n&#39; )
 785 
 786   } FT_Encoding;
 787 
 788 
<span class="line-modified"> 789   /* these constants are deprecated; use the corresponding `FT_Encoding` */</span>
 790   /* values instead                                                      */
 791 #define ft_encoding_none            FT_ENCODING_NONE
 792 #define ft_encoding_unicode         FT_ENCODING_UNICODE
 793 #define ft_encoding_symbol          FT_ENCODING_MS_SYMBOL
 794 #define ft_encoding_latin_1         FT_ENCODING_ADOBE_LATIN_1
 795 #define ft_encoding_latin_2         FT_ENCODING_OLD_LATIN_2
 796 #define ft_encoding_sjis            FT_ENCODING_SJIS
 797 #define ft_encoding_gb2312          FT_ENCODING_PRC
 798 #define ft_encoding_big5            FT_ENCODING_BIG5
 799 #define ft_encoding_wansung         FT_ENCODING_WANSUNG
 800 #define ft_encoding_johab           FT_ENCODING_JOHAB
 801 
 802 #define ft_encoding_adobe_standard  FT_ENCODING_ADOBE_STANDARD
 803 #define ft_encoding_adobe_expert    FT_ENCODING_ADOBE_EXPERT
 804 #define ft_encoding_adobe_custom    FT_ENCODING_ADOBE_CUSTOM
 805 #define ft_encoding_apple_roman     FT_ENCODING_APPLE_ROMAN
 806 
 807 
<span class="line-modified"> 808   /**************************************************************************</span>
<span class="line-modified"> 809    *</span>
<span class="line-modified"> 810    * @struct:</span>
<span class="line-modified"> 811    *   FT_CharMapRec</span>
<span class="line-modified"> 812    *</span>
<span class="line-modified"> 813    * @description:</span>
<span class="line-modified"> 814    *   The base charmap structure.</span>
<span class="line-modified"> 815    *</span>
<span class="line-modified"> 816    * @fields:</span>
<span class="line-modified"> 817    *   face ::</span>
<span class="line-modified"> 818    *     A handle to the parent face object.</span>
<span class="line-modified"> 819    *</span>
<span class="line-modified"> 820    *   encoding ::</span>
<span class="line-modified"> 821    *     An @FT_Encoding tag identifying the charmap.  Use this with</span>
<span class="line-modified"> 822    *     @FT_Select_Charmap.</span>
<span class="line-modified"> 823    *</span>
<span class="line-modified"> 824    *   platform_id ::</span>
<span class="line-modified"> 825    *     An ID number describing the platform for the following encoding ID.</span>
<span class="line-modified"> 826    *     This comes directly from the TrueType specification and gets</span>
<span class="line-modified"> 827    *     emulated for other formats.</span>
<span class="line-modified"> 828    *</span>
<span class="line-modified"> 829    *   encoding_id ::</span>
<span class="line-modified"> 830    *     A platform-specific encoding number.  This also comes from the</span>
<span class="line-added"> 831    *     TrueType specification and gets emulated similarly.</span>
<span class="line-added"> 832    */</span>
 833   typedef struct  FT_CharMapRec_
 834   {
 835     FT_Face      face;
 836     FT_Encoding  encoding;
 837     FT_UShort    platform_id;
 838     FT_UShort    encoding_id;
 839 
 840   } FT_CharMapRec;
 841 
 842 
 843   /*************************************************************************/
 844   /*************************************************************************/
 845   /*                                                                       */
 846   /*                 B A S E   O B J E C T   C L A S S E S                 */
 847   /*                                                                       */
 848   /*************************************************************************/
 849   /*************************************************************************/
 850 
 851 
<span class="line-modified"> 852   /**************************************************************************</span>
<span class="line-modified"> 853    *</span>
<span class="line-modified"> 854    * @type:</span>
<span class="line-modified"> 855    *   FT_Face_Internal</span>
<span class="line-modified"> 856    *</span>
<span class="line-modified"> 857    * @description:</span>
<span class="line-modified"> 858    *   An opaque handle to an `FT_Face_InternalRec` structure that models the</span>
<span class="line-modified"> 859    *   private data of a given @FT_Face object.</span>
<span class="line-modified"> 860    *</span>
<span class="line-modified"> 861    *   This structure might change between releases of FreeType~2 and is not</span>
<span class="line-modified"> 862    *   generally available to client applications.</span>
<span class="line-modified"> 863    */</span>
 864   typedef struct FT_Face_InternalRec_*  FT_Face_Internal;
 865 
 866 
<span class="line-modified"> 867   /**************************************************************************</span>
<span class="line-modified"> 868    *</span>
<span class="line-modified"> 869    * @struct:</span>
<span class="line-modified"> 870    *   FT_FaceRec</span>
<span class="line-modified"> 871    *</span>
<span class="line-modified"> 872    * @description:</span>
<span class="line-modified"> 873    *   FreeType root face class structure.  A face object models a typeface</span>
<span class="line-modified"> 874    *   in a font file.</span>
<span class="line-modified"> 875    *</span>
<span class="line-modified"> 876    * @fields:</span>
<span class="line-modified"> 877    *   num_faces ::</span>
<span class="line-modified"> 878    *     The number of faces in the font file.  Some font formats can have</span>
<span class="line-modified"> 879    *     multiple faces in a single font file.</span>
<span class="line-modified"> 880    *</span>
<span class="line-modified"> 881    *   face_index ::</span>
<span class="line-modified"> 882    *     This field holds two different values.  Bits 0-15 are the index of</span>
<span class="line-modified"> 883    *     the face in the font file (starting with value~0).  They are set</span>
<span class="line-modified"> 884    *     to~0 if there is only one face in the font file.</span>
<span class="line-modified"> 885    *</span>
<span class="line-modified"> 886    *     [Since 2.6.1] Bits 16-30 are relevant to GX and OpenType variation</span>
<span class="line-modified"> 887    *     fonts only, holding the named instance index for the current face</span>
<span class="line-modified"> 888    *     index (starting with value~1; value~0 indicates font access without</span>
<span class="line-modified"> 889    *     a named instance).  For non-variation fonts, bits 16-30 are ignored.</span>
<span class="line-modified"> 890    *     If we have the third named instance of face~4, say, `face_index` is</span>
<span class="line-modified"> 891    *     set to 0x00030004.</span>
<span class="line-modified"> 892    *</span>
<span class="line-modified"> 893    *     Bit 31 is always zero (this is, `face_index` is always a positive</span>
<span class="line-modified"> 894    *     value).</span>
<span class="line-modified"> 895    *</span>
<span class="line-modified"> 896    *     [Since 2.9] Changing the design coordinates with</span>
<span class="line-modified"> 897    *     @FT_Set_Var_Design_Coordinates or @FT_Set_Var_Blend_Coordinates does</span>
<span class="line-modified"> 898    *     not influence the named instance index value (only</span>
<span class="line-modified"> 899    *     @FT_Set_Named_Instance does that).</span>
<span class="line-modified"> 900    *</span>
<span class="line-modified"> 901    *   face_flags ::</span>
<span class="line-modified"> 902    *     A set of bit flags that give important information about the face;</span>
<span class="line-modified"> 903    *     see @FT_FACE_FLAG_XXX for the details.</span>
<span class="line-modified"> 904    *</span>
<span class="line-modified"> 905    *   style_flags ::</span>
<span class="line-modified"> 906    *     The lower 16~bits contain a set of bit flags indicating the style of</span>
<span class="line-modified"> 907    *     the face; see @FT_STYLE_FLAG_XXX for the details.</span>
<span class="line-modified"> 908    *</span>
<span class="line-modified"> 909    *     [Since 2.6.1] Bits 16-30 hold the number of named instances</span>
<span class="line-modified"> 910    *     available for the current face if we have a GX or OpenType variation</span>
<span class="line-modified"> 911    *     (sub)font.  Bit 31 is always zero (this is, `style_flags` is always</span>
<span class="line-modified"> 912    *     a positive value).  Note that a variation font has always at least</span>
<span class="line-modified"> 913    *     one named instance, namely the default instance.</span>
<span class="line-modified"> 914    *</span>
<span class="line-modified"> 915    *   num_glyphs ::</span>
<span class="line-modified"> 916    *     The number of glyphs in the face.  If the face is scalable and has</span>
<span class="line-modified"> 917    *     sbits (see `num_fixed_sizes`), it is set to the number of outline</span>
<span class="line-modified"> 918    *     glyphs.</span>
<span class="line-modified"> 919    *</span>
<span class="line-modified"> 920    *     For CID-keyed fonts (not in an SFNT wrapper) this value gives the</span>
<span class="line-modified"> 921    *     highest CID used in the font.</span>
<span class="line-modified"> 922    *</span>
<span class="line-modified"> 923    *   family_name ::</span>
<span class="line-modified"> 924    *     The face&#39;s family name.  This is an ASCII string, usually in</span>
<span class="line-modified"> 925    *     English, that describes the typeface&#39;s family (like &#39;Times New</span>
<span class="line-modified"> 926    *     Roman&#39;, &#39;Bodoni&#39;, &#39;Garamond&#39;, etc).  This is a least common</span>
<span class="line-modified"> 927    *     denominator used to list fonts.  Some formats (TrueType &amp; OpenType)</span>
<span class="line-modified"> 928    *     provide localized and Unicode versions of this string.  Applications</span>
<span class="line-modified"> 929    *     should use the format-specific interface to access them.  Can be</span>
<span class="line-modified"> 930    *     `NULL` (e.g., in fonts embedded in a PDF file).</span>
<span class="line-modified"> 931    *</span>
<span class="line-modified"> 932    *     In case the font doesn&#39;t provide a specific family name entry,</span>
<span class="line-modified"> 933    *     FreeType tries to synthesize one, deriving it from other name</span>
<span class="line-modified"> 934    *     entries.</span>
<span class="line-modified"> 935    *</span>
<span class="line-modified"> 936    *   style_name ::</span>
<span class="line-modified"> 937    *     The face&#39;s style name.  This is an ASCII string, usually in English,</span>
<span class="line-modified"> 938    *     that describes the typeface&#39;s style (like &#39;Italic&#39;, &#39;Bold&#39;,</span>
<span class="line-modified"> 939    *     &#39;Condensed&#39;, etc).  Not all font formats provide a style name, so</span>
<span class="line-modified"> 940    *     this field is optional, and can be set to `NULL`.  As for</span>
<span class="line-modified"> 941    *     `family_name`, some formats provide localized and Unicode versions</span>
<span class="line-modified"> 942    *     of this string.  Applications should use the format-specific</span>
<span class="line-modified"> 943    *     interface to access them.</span>
<span class="line-modified"> 944    *</span>
<span class="line-modified"> 945    *   num_fixed_sizes ::</span>
<span class="line-modified"> 946    *     The number of bitmap strikes in the face.  Even if the face is</span>
<span class="line-modified"> 947    *     scalable, there might still be bitmap strikes, which are called</span>
<span class="line-modified"> 948    *     &#39;sbits&#39; in that case.</span>
<span class="line-modified"> 949    *</span>
<span class="line-modified"> 950    *   available_sizes ::</span>
<span class="line-modified"> 951    *     An array of @FT_Bitmap_Size for all bitmap strikes in the face.  It</span>
<span class="line-modified"> 952    *     is set to `NULL` if there is no bitmap strike.</span>
<span class="line-modified"> 953    *</span>
<span class="line-modified"> 954    *     Note that FreeType tries to sanitize the strike data since they are</span>
<span class="line-modified"> 955    *     sometimes sloppy or incorrect, but this can easily fail.</span>
<span class="line-modified"> 956    *</span>
<span class="line-modified"> 957    *   num_charmaps ::</span>
<span class="line-modified"> 958    *     The number of charmaps in the face.</span>
<span class="line-modified"> 959    *</span>
<span class="line-modified"> 960    *   charmaps ::</span>
<span class="line-modified"> 961    *     An array of the charmaps of the face.</span>
<span class="line-modified"> 962    *</span>
<span class="line-modified"> 963    *   generic ::</span>
<span class="line-modified"> 964    *     A field reserved for client uses.  See the @FT_Generic type</span>
<span class="line-modified"> 965    *     description.</span>
<span class="line-modified"> 966    *</span>
<span class="line-modified"> 967    *   bbox ::</span>
<span class="line-modified"> 968    *     The font bounding box.  Coordinates are expressed in font units (see</span>
<span class="line-modified"> 969    *     `units_per_EM`).  The box is large enough to contain any glyph from</span>
<span class="line-modified"> 970    *     the font.  Thus, `bbox.yMax` can be seen as the &#39;maximum ascender&#39;,</span>
<span class="line-modified"> 971    *     and `bbox.yMin` as the &#39;minimum descender&#39;.  Only relevant for</span>
<span class="line-modified"> 972    *     scalable formats.</span>
<span class="line-modified"> 973    *</span>
<span class="line-modified"> 974    *     Note that the bounding box might be off by (at least) one pixel for</span>
<span class="line-modified"> 975    *     hinted fonts.  See @FT_Size_Metrics for further discussion.</span>
<span class="line-modified"> 976    *</span>
<span class="line-modified"> 977    *   units_per_EM ::</span>
<span class="line-modified"> 978    *     The number of font units per EM square for this face.  This is</span>
<span class="line-modified"> 979    *     typically 2048 for TrueType fonts, and 1000 for Type~1 fonts.  Only</span>
<span class="line-modified"> 980    *     relevant for scalable formats.</span>
<span class="line-modified"> 981    *</span>
<span class="line-modified"> 982    *   ascender ::</span>
<span class="line-modified"> 983    *     The typographic ascender of the face, expressed in font units.  For</span>
<span class="line-modified"> 984    *     font formats not having this information, it is set to `bbox.yMax`.</span>
<span class="line-modified"> 985    *     Only relevant for scalable formats.</span>
<span class="line-modified"> 986    *</span>
<span class="line-modified"> 987    *   descender ::</span>
<span class="line-modified"> 988    *     The typographic descender of the face, expressed in font units.  For</span>
<span class="line-modified"> 989    *     font formats not having this information, it is set to `bbox.yMin`.</span>
<span class="line-modified"> 990    *     Note that this field is negative for values below the baseline.</span>
<span class="line-modified"> 991    *     Only relevant for scalable formats.</span>
<span class="line-modified"> 992    *</span>
<span class="line-modified"> 993    *   height ::</span>
<span class="line-modified"> 994    *     This value is the vertical distance between two consecutive</span>
<span class="line-modified"> 995    *     baselines, expressed in font units.  It is always positive.  Only</span>
<span class="line-modified"> 996    *     relevant for scalable formats.</span>
<span class="line-modified"> 997    *</span>
<span class="line-modified"> 998    *     If you want the global glyph height, use `ascender - descender`.</span>
<span class="line-modified"> 999    *</span>
<span class="line-modified">1000    *   max_advance_width ::</span>
<span class="line-modified">1001    *     The maximum advance width, in font units, for all glyphs in this</span>
<span class="line-modified">1002    *     face.  This can be used to make word wrapping computations faster.</span>
<span class="line-modified">1003    *     Only relevant for scalable formats.</span>
<span class="line-modified">1004    *</span>
<span class="line-modified">1005    *   max_advance_height ::</span>
<span class="line-modified">1006    *     The maximum advance height, in font units, for all glyphs in this</span>
<span class="line-modified">1007    *     face.  This is only relevant for vertical layouts, and is set to</span>
<span class="line-modified">1008    *     `height` for fonts that do not provide vertical metrics.  Only</span>
<span class="line-modified">1009    *     relevant for scalable formats.</span>
<span class="line-modified">1010    *</span>
<span class="line-modified">1011    *   underline_position ::</span>
<span class="line-modified">1012    *     The position, in font units, of the underline line for this face.</span>
<span class="line-modified">1013    *     It is the center of the underlining stem.  Only relevant for</span>
<span class="line-modified">1014    *     scalable formats.</span>
<span class="line-modified">1015    *</span>
<span class="line-modified">1016    *   underline_thickness ::</span>
<span class="line-modified">1017    *     The thickness, in font units, of the underline for this face.  Only</span>
<span class="line-modified">1018    *     relevant for scalable formats.</span>
<span class="line-modified">1019    *</span>
<span class="line-modified">1020    *   glyph ::</span>
<span class="line-modified">1021    *     The face&#39;s associated glyph slot(s).</span>
<span class="line-modified">1022    *</span>
<span class="line-modified">1023    *   size ::</span>
<span class="line-modified">1024    *     The current active size for this face.</span>
<span class="line-modified">1025    *</span>
<span class="line-modified">1026    *   charmap ::</span>
<span class="line-modified">1027    *     The current active charmap for this face.</span>
<span class="line-modified">1028    *</span>
<span class="line-modified">1029    * @note:</span>
<span class="line-modified">1030    *   Fields may be changed after a call to @FT_Attach_File or</span>
<span class="line-modified">1031    *   @FT_Attach_Stream.</span>
<span class="line-modified">1032    *</span>
<span class="line-modified">1033    *   For an OpenType variation font, the values of the following fields can</span>
<span class="line-modified">1034    *   change after a call to @FT_Set_Var_Design_Coordinates (and friends) if</span>
<span class="line-modified">1035    *   the font contains an &#39;MVAR&#39; table: `ascender`, `descender`, `height`,</span>
<span class="line-modified">1036    *   `underline_position`, and `underline_thickness`.</span>
<span class="line-modified">1037    *</span>
<span class="line-modified">1038    *   Especially for TrueType fonts see also the documentation for</span>
<span class="line-modified">1039    *   @FT_Size_Metrics.</span>
<span class="line-modified">1040    */</span>




















1041   typedef struct  FT_FaceRec_
1042   {
1043     FT_Long           num_faces;
1044     FT_Long           face_index;
1045 
1046     FT_Long           face_flags;
1047     FT_Long           style_flags;
1048 
1049     FT_Long           num_glyphs;
1050 
1051     FT_String*        family_name;
1052     FT_String*        style_name;
1053 
1054     FT_Int            num_fixed_sizes;
1055     FT_Bitmap_Size*   available_sizes;
1056 
1057     FT_Int            num_charmaps;
1058     FT_CharMap*       charmaps;
1059 
1060     FT_Generic        generic;
1061 
<span class="line-modified">1062     /*# The following member variables (down to `underline_thickness`) */</span>
1063     /*# are only relevant to scalable outlines; cf. @FT_Bitmap_Size    */
1064     /*# for bitmap fonts.                                              */
1065     FT_BBox           bbox;
1066 
1067     FT_UShort         units_per_EM;
1068     FT_Short          ascender;
1069     FT_Short          descender;
1070     FT_Short          height;
1071 
1072     FT_Short          max_advance_width;
1073     FT_Short          max_advance_height;
1074 
1075     FT_Short          underline_position;
1076     FT_Short          underline_thickness;
1077 
1078     FT_GlyphSlot      glyph;
1079     FT_Size           size;
1080     FT_CharMap        charmap;
1081 
1082     /*@private begin */
1083 
1084     FT_Driver         driver;
1085     FT_Memory         memory;
1086     FT_Stream         stream;
1087 
1088     FT_ListRec        sizes_list;
1089 
1090     FT_Generic        autohint;   /* face-specific auto-hinter data */
1091     void*             extensions; /* unused                         */
1092 
1093     FT_Face_Internal  internal;
1094 
1095     /*@private end */
1096 
1097   } FT_FaceRec;
1098 
1099 
<span class="line-modified">1100   /**************************************************************************</span>
<span class="line-modified">1101    *</span>
<span class="line-modified">1102    * @enum:</span>
<span class="line-modified">1103    *   FT_FACE_FLAG_XXX</span>
<span class="line-modified">1104    *</span>
<span class="line-modified">1105    * @description:</span>
<span class="line-modified">1106    *   A list of bit flags used in the `face_flags` field of the @FT_FaceRec</span>
<span class="line-modified">1107    *   structure.  They inform client applications of properties of the</span>
<span class="line-modified">1108    *   corresponding face.</span>
<span class="line-modified">1109    *</span>
<span class="line-modified">1110    * @values:</span>
<span class="line-modified">1111    *   FT_FACE_FLAG_SCALABLE ::</span>
<span class="line-modified">1112    *     The face contains outline glyphs.  Note that a face can contain</span>
<span class="line-modified">1113    *     bitmap strikes also, i.e., a face can have both this flag and</span>
<span class="line-modified">1114    *     @FT_FACE_FLAG_FIXED_SIZES set.</span>
<span class="line-modified">1115    *</span>
<span class="line-modified">1116    *   FT_FACE_FLAG_FIXED_SIZES ::</span>
<span class="line-modified">1117    *     The face contains bitmap strikes.  See also the `num_fixed_sizes`</span>
<span class="line-modified">1118    *     and `available_sizes` fields of @FT_FaceRec.</span>
<span class="line-modified">1119    *</span>
<span class="line-modified">1120    *   FT_FACE_FLAG_FIXED_WIDTH ::</span>
<span class="line-modified">1121    *     The face contains fixed-width characters (like Courier, Lucida,</span>
<span class="line-modified">1122    *     MonoType, etc.).</span>
<span class="line-modified">1123    *</span>
<span class="line-modified">1124    *   FT_FACE_FLAG_SFNT ::</span>
<span class="line-modified">1125    *     The face uses the SFNT storage scheme.  For now, this means TrueType</span>
<span class="line-modified">1126    *     and OpenType.</span>
<span class="line-modified">1127    *</span>
<span class="line-modified">1128    *   FT_FACE_FLAG_HORIZONTAL ::</span>
<span class="line-modified">1129    *     The face contains horizontal glyph metrics.  This should be set for</span>
<span class="line-modified">1130    *     all common formats.</span>
<span class="line-modified">1131    *</span>
<span class="line-modified">1132    *   FT_FACE_FLAG_VERTICAL ::</span>
<span class="line-modified">1133    *     The face contains vertical glyph metrics.  This is only available in</span>
<span class="line-modified">1134    *     some formats, not all of them.</span>
<span class="line-modified">1135    *</span>
<span class="line-modified">1136    *   FT_FACE_FLAG_KERNING ::</span>
<span class="line-modified">1137    *     The face contains kerning information.  If set, the kerning distance</span>
<span class="line-modified">1138    *     can be retrieved using the function @FT_Get_Kerning.  Otherwise the</span>
<span class="line-modified">1139    *     function always return the vector (0,0).  Note that FreeType doesn&#39;t</span>
<span class="line-modified">1140    *     handle kerning data from the SFNT &#39;GPOS&#39; table (as present in many</span>
<span class="line-modified">1141    *     OpenType fonts).</span>
<span class="line-modified">1142    *</span>
<span class="line-modified">1143    *   FT_FACE_FLAG_FAST_GLYPHS ::</span>
<span class="line-modified">1144    *     THIS FLAG IS DEPRECATED.  DO NOT USE OR TEST IT.</span>
<span class="line-modified">1145    *</span>
<span class="line-modified">1146    *   FT_FACE_FLAG_MULTIPLE_MASTERS ::</span>
<span class="line-modified">1147    *     The face contains multiple masters and is capable of interpolating</span>
<span class="line-modified">1148    *     between them.  Supported formats are Adobe MM, TrueType GX, and</span>
<span class="line-modified">1149    *     OpenType variation fonts.</span>
<span class="line-modified">1150    *</span>
<span class="line-modified">1151    *     See section @multiple_masters for API details.</span>
<span class="line-modified">1152    *</span>
<span class="line-modified">1153    *   FT_FACE_FLAG_GLYPH_NAMES ::</span>
<span class="line-modified">1154    *     The face contains glyph names, which can be retrieved using</span>
<span class="line-modified">1155    *     @FT_Get_Glyph_Name.  Note that some TrueType fonts contain broken</span>
<span class="line-modified">1156    *     glyph name tables.  Use the function @FT_Has_PS_Glyph_Names when</span>
<span class="line-modified">1157    *     needed.</span>
<span class="line-modified">1158    *</span>
<span class="line-modified">1159    *   FT_FACE_FLAG_EXTERNAL_STREAM ::</span>
<span class="line-modified">1160    *     Used internally by FreeType to indicate that a face&#39;s stream was</span>
<span class="line-modified">1161    *     provided by the client application and should not be destroyed when</span>
<span class="line-modified">1162    *     @FT_Done_Face is called.  Don&#39;t read or test this flag.</span>
<span class="line-modified">1163    *</span>
<span class="line-modified">1164    *   FT_FACE_FLAG_HINTER ::</span>
<span class="line-modified">1165    *     The font driver has a hinting machine of its own.  For example, with</span>
<span class="line-modified">1166    *     TrueType fonts, it makes sense to use data from the SFNT &#39;gasp&#39;</span>
<span class="line-modified">1167    *     table only if the native TrueType hinting engine (with the bytecode</span>
<span class="line-modified">1168    *     interpreter) is available and active.</span>
<span class="line-modified">1169    *</span>
<span class="line-modified">1170    *   FT_FACE_FLAG_CID_KEYED ::</span>
<span class="line-modified">1171    *     The face is CID-keyed.  In that case, the face is not accessed by</span>
<span class="line-modified">1172    *     glyph indices but by CID values.  For subsetted CID-keyed fonts this</span>
<span class="line-modified">1173    *     has the consequence that not all index values are a valid argument</span>
<span class="line-modified">1174    *     to @FT_Load_Glyph.  Only the CID values for which corresponding</span>
<span class="line-modified">1175    *     glyphs in the subsetted font exist make `FT_Load_Glyph` return</span>
<span class="line-modified">1176    *     successfully; in all other cases you get an</span>
<span class="line-modified">1177    *     `FT_Err_Invalid_Argument` error.</span>
<span class="line-modified">1178    *</span>
<span class="line-modified">1179    *     Note that CID-keyed fonts that are in an SFNT wrapper (this is, all</span>
<span class="line-modified">1180    *     OpenType/CFF fonts) don&#39;t have this flag set since the glyphs are</span>
<span class="line-modified">1181    *     accessed in the normal way (using contiguous indices); the</span>
<span class="line-modified">1182    *     &#39;CID-ness&#39; isn&#39;t visible to the application.</span>
<span class="line-modified">1183    *</span>
<span class="line-modified">1184    *   FT_FACE_FLAG_TRICKY ::</span>
<span class="line-modified">1185    *     The face is &#39;tricky&#39;, this is, it always needs the font format&#39;s</span>
<span class="line-modified">1186    *     native hinting engine to get a reasonable result.  A typical example</span>
<span class="line-modified">1187    *     is the old Chinese font `mingli.ttf` (but not `mingliu.ttc`) that</span>
<span class="line-modified">1188    *     uses TrueType bytecode instructions to move and scale all of its</span>
<span class="line-modified">1189    *     subglyphs.</span>
<span class="line-modified">1190    *</span>
<span class="line-modified">1191    *     It is not possible to auto-hint such fonts using</span>
<span class="line-modified">1192    *     @FT_LOAD_FORCE_AUTOHINT; it will also ignore @FT_LOAD_NO_HINTING.</span>
<span class="line-modified">1193    *     You have to set both @FT_LOAD_NO_HINTING and @FT_LOAD_NO_AUTOHINT to</span>
<span class="line-modified">1194    *     really disable hinting; however, you probably never want this except</span>
<span class="line-modified">1195    *     for demonstration purposes.</span>
<span class="line-modified">1196    *</span>
<span class="line-modified">1197    *     Currently, there are about a dozen TrueType fonts in the list of</span>
<span class="line-modified">1198    *     tricky fonts; they are hard-coded in file `ttobjs.c`.</span>
<span class="line-modified">1199    *</span>
<span class="line-modified">1200    *   FT_FACE_FLAG_COLOR ::</span>
<span class="line-modified">1201    *     [Since 2.5.1] The face has color glyph tables.  See @FT_LOAD_COLOR</span>
<span class="line-modified">1202    *     for more information.</span>
<span class="line-modified">1203    *</span>
<span class="line-modified">1204    *   FT_FACE_FLAG_VARIATION ::</span>
<span class="line-modified">1205    *     [Since 2.9] Set if the current face (or named instance) has been</span>
<span class="line-modified">1206    *     altered with @FT_Set_MM_Design_Coordinates,</span>
<span class="line-modified">1207    *     @FT_Set_Var_Design_Coordinates, or @FT_Set_Var_Blend_Coordinates.</span>
<span class="line-modified">1208    *     This flag is unset by a call to @FT_Set_Named_Instance.</span>
<span class="line-modified">1209    */</span>

1210 #define FT_FACE_FLAG_SCALABLE          ( 1L &lt;&lt;  0 )
1211 #define FT_FACE_FLAG_FIXED_SIZES       ( 1L &lt;&lt;  1 )
1212 #define FT_FACE_FLAG_FIXED_WIDTH       ( 1L &lt;&lt;  2 )
1213 #define FT_FACE_FLAG_SFNT              ( 1L &lt;&lt;  3 )
1214 #define FT_FACE_FLAG_HORIZONTAL        ( 1L &lt;&lt;  4 )
1215 #define FT_FACE_FLAG_VERTICAL          ( 1L &lt;&lt;  5 )
1216 #define FT_FACE_FLAG_KERNING           ( 1L &lt;&lt;  6 )
1217 #define FT_FACE_FLAG_FAST_GLYPHS       ( 1L &lt;&lt;  7 )
1218 #define FT_FACE_FLAG_MULTIPLE_MASTERS  ( 1L &lt;&lt;  8 )
1219 #define FT_FACE_FLAG_GLYPH_NAMES       ( 1L &lt;&lt;  9 )
1220 #define FT_FACE_FLAG_EXTERNAL_STREAM   ( 1L &lt;&lt; 10 )
1221 #define FT_FACE_FLAG_HINTER            ( 1L &lt;&lt; 11 )
1222 #define FT_FACE_FLAG_CID_KEYED         ( 1L &lt;&lt; 12 )
1223 #define FT_FACE_FLAG_TRICKY            ( 1L &lt;&lt; 13 )
1224 #define FT_FACE_FLAG_COLOR             ( 1L &lt;&lt; 14 )
1225 #define FT_FACE_FLAG_VARIATION         ( 1L &lt;&lt; 15 )
1226 
1227 
<span class="line-modified">1228   /**************************************************************************</span>
1229    *
1230    * @macro:
<span class="line-modified">1231    *   FT_HAS_HORIZONTAL</span>
1232    *
1233    * @description:
<span class="line-modified">1234    *   A macro that returns true whenever a face object contains horizontal</span>
<span class="line-modified">1235    *   metrics (this is true for all font formats though).</span>
1236    *
1237    * @also:
1238    *   @FT_HAS_VERTICAL can be used to check for vertical metrics.
1239    *
1240    */
1241 #define FT_HAS_HORIZONTAL( face ) \
1242           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_HORIZONTAL )
1243 
1244 
<span class="line-modified">1245   /**************************************************************************</span>
1246    *
1247    * @macro:
<span class="line-modified">1248    *   FT_HAS_VERTICAL</span>
1249    *
1250    * @description:
1251    *   A macro that returns true whenever a face object contains real
1252    *   vertical metrics (and not only synthesized ones).
1253    *
1254    */
1255 #define FT_HAS_VERTICAL( face ) \
1256           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VERTICAL )
1257 
1258 
<span class="line-modified">1259   /**************************************************************************</span>
1260    *
1261    * @macro:
<span class="line-modified">1262    *   FT_HAS_KERNING</span>
1263    *
1264    * @description:
<span class="line-modified">1265    *   A macro that returns true whenever a face object contains kerning data</span>
<span class="line-modified">1266    *   that can be accessed with @FT_Get_Kerning.</span>
1267    *
1268    */
1269 #define FT_HAS_KERNING( face ) \
1270           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_KERNING )
1271 
1272 
<span class="line-modified">1273   /**************************************************************************</span>
1274    *
1275    * @macro:
<span class="line-modified">1276    *   FT_IS_SCALABLE</span>
1277    *
1278    * @description:
1279    *   A macro that returns true whenever a face object contains a scalable
<span class="line-modified">1280    *   font face (true for TrueType, Type~1, Type~42, CID, OpenType/CFF, and</span>
<span class="line-modified">1281    *   PFR font formats).</span>
1282    *
1283    */
1284 #define FT_IS_SCALABLE( face ) \
1285           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SCALABLE )
1286 
1287 
<span class="line-modified">1288   /**************************************************************************</span>
1289    *
1290    * @macro:
<span class="line-modified">1291    *   FT_IS_SFNT</span>
1292    *
1293    * @description:
<span class="line-modified">1294    *   A macro that returns true whenever a face object contains a font whose</span>
<span class="line-modified">1295    *   format is based on the SFNT storage scheme.  This usually means:</span>
<span class="line-modified">1296    *   TrueType fonts, OpenType fonts, as well as SFNT-based embedded bitmap</span>
<span class="line-modified">1297    *   fonts.</span>
1298    *
1299    *   If this macro is true, all functions defined in @FT_SFNT_NAMES_H and
1300    *   @FT_TRUETYPE_TABLES_H are available.
1301    *
1302    */
1303 #define FT_IS_SFNT( face ) \
1304           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_SFNT )
1305 
1306 
<span class="line-modified">1307   /**************************************************************************</span>
1308    *
1309    * @macro:
<span class="line-modified">1310    *   FT_IS_FIXED_WIDTH</span>
1311    *
1312    * @description:
1313    *   A macro that returns true whenever a face object contains a font face
<span class="line-modified">1314    *   that contains fixed-width (or &#39;monospace&#39;, &#39;fixed-pitch&#39;, etc.)</span>
1315    *   glyphs.
1316    *
1317    */
1318 #define FT_IS_FIXED_WIDTH( face ) \
1319           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_WIDTH )
1320 
1321 
<span class="line-modified">1322   /**************************************************************************</span>
1323    *
1324    * @macro:
<span class="line-modified">1325    *   FT_HAS_FIXED_SIZES</span>
1326    *
1327    * @description:
1328    *   A macro that returns true whenever a face object contains some
<span class="line-modified">1329    *   embedded bitmaps.  See the `available_sizes` field of the @FT_FaceRec</span>
<span class="line-modified">1330    *   structure.</span>
1331    *
1332    */
1333 #define FT_HAS_FIXED_SIZES( face ) \
1334           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_SIZES )
1335 
1336 
<span class="line-modified">1337   /**************************************************************************</span>
1338    *
1339    * @macro:
<span class="line-modified">1340    *   FT_HAS_FAST_GLYPHS</span>
1341    *
1342    * @description:
1343    *   Deprecated.
1344    *
1345    */
1346 #define FT_HAS_FAST_GLYPHS( face )  0
1347 
1348 
<span class="line-modified">1349   /**************************************************************************</span>
1350    *
1351    * @macro:
<span class="line-modified">1352    *   FT_HAS_GLYPH_NAMES</span>
1353    *
1354    * @description:
1355    *   A macro that returns true whenever a face object contains some glyph
1356    *   names that can be accessed through @FT_Get_Glyph_Name.
1357    *
1358    */
1359 #define FT_HAS_GLYPH_NAMES( face ) \
1360           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_GLYPH_NAMES )
1361 
1362 
<span class="line-modified">1363   /**************************************************************************</span>
1364    *
1365    * @macro:
<span class="line-modified">1366    *   FT_HAS_MULTIPLE_MASTERS</span>
1367    *
1368    * @description:
1369    *   A macro that returns true whenever a face object contains some
1370    *   multiple masters.  The functions provided by @FT_MULTIPLE_MASTERS_H
1371    *   are then available to choose the exact design you want.
1372    *
1373    */
1374 #define FT_HAS_MULTIPLE_MASTERS( face ) \
1375           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_MULTIPLE_MASTERS )
1376 
1377 
<span class="line-modified">1378   /**************************************************************************</span>
1379    *
1380    * @macro:
<span class="line-modified">1381    *   FT_IS_NAMED_INSTANCE</span>
1382    *
1383    * @description:
1384    *   A macro that returns true whenever a face object is a named instance
1385    *   of a GX or OpenType variation font.
1386    *
1387    *   [Since 2.9] Changing the design coordinates with
1388    *   @FT_Set_Var_Design_Coordinates or @FT_Set_Var_Blend_Coordinates does
1389    *   not influence the return value of this macro (only
1390    *   @FT_Set_Named_Instance does that).
1391    *
1392    * @since:
1393    *   2.7
1394    *
1395    */
1396 #define FT_IS_NAMED_INSTANCE( face ) \
1397           ( (face)-&gt;face_index &amp; 0x7FFF0000L )
1398 
1399 
<span class="line-modified">1400   /**************************************************************************</span>
1401    *
1402    * @macro:
<span class="line-modified">1403    *   FT_IS_VARIATION</span>
1404    *
1405    * @description:
<span class="line-modified">1406    *   A macro that returns true whenever a face object has been altered by</span>
<span class="line-modified">1407    *   @FT_Set_MM_Design_Coordinates, @FT_Set_Var_Design_Coordinates, or</span>
1408    *   @FT_Set_Var_Blend_Coordinates.
1409    *
1410    * @since:
1411    *   2.9
1412    *
1413    */
1414 #define FT_IS_VARIATION( face ) \
1415           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_VARIATION )
1416 
1417 
<span class="line-modified">1418   /**************************************************************************</span>
1419    *
1420    * @macro:
<span class="line-modified">1421    *   FT_IS_CID_KEYED</span>
1422    *
1423    * @description:
1424    *   A macro that returns true whenever a face object contains a CID-keyed
<span class="line-modified">1425    *   font.  See the discussion of @FT_FACE_FLAG_CID_KEYED for more details.</span>

1426    *
1427    *   If this macro is true, all functions defined in @FT_CID_H are
1428    *   available.
1429    *
1430    */
1431 #define FT_IS_CID_KEYED( face ) \
1432           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_CID_KEYED )
1433 
1434 
<span class="line-modified">1435   /**************************************************************************</span>
1436    *
1437    * @macro:
<span class="line-modified">1438    *   FT_IS_TRICKY</span>
1439    *
1440    * @description:
<span class="line-modified">1441    *   A macro that returns true whenever a face represents a &#39;tricky&#39; font.</span>
1442    *   See the discussion of @FT_FACE_FLAG_TRICKY for more details.
1443    *
1444    */
1445 #define FT_IS_TRICKY( face ) \
1446           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_TRICKY )
1447 
1448 
<span class="line-modified">1449   /**************************************************************************</span>
1450    *
1451    * @macro:
<span class="line-modified">1452    *   FT_HAS_COLOR</span>
1453    *
1454    * @description:
<span class="line-modified">1455    *   A macro that returns true whenever a face object contains tables for</span>
<span class="line-modified">1456    *   color glyphs.</span>
1457    *
1458    * @since:
1459    *   2.5.1
1460    *
1461    */
1462 #define FT_HAS_COLOR( face ) \
1463           ( (face)-&gt;face_flags &amp; FT_FACE_FLAG_COLOR )
1464 
1465 
<span class="line-modified">1466   /**************************************************************************</span>
<span class="line-modified">1467    *</span>
<span class="line-modified">1468    * @enum:</span>
<span class="line-modified">1469    *   FT_STYLE_FLAG_XXX</span>
<span class="line-modified">1470    *</span>
<span class="line-modified">1471    * @description:</span>
<span class="line-modified">1472    *   A list of bit flags to indicate the style of a given face.  These are</span>
<span class="line-modified">1473    *   used in the `style_flags` field of @FT_FaceRec.</span>
<span class="line-modified">1474    *</span>
<span class="line-modified">1475    * @values:</span>
<span class="line-modified">1476    *   FT_STYLE_FLAG_ITALIC ::</span>
<span class="line-modified">1477    *     The face style is italic or oblique.</span>
<span class="line-modified">1478    *</span>
<span class="line-modified">1479    *   FT_STYLE_FLAG_BOLD ::</span>
<span class="line-modified">1480    *     The face is bold.</span>
<span class="line-modified">1481    *</span>
<span class="line-modified">1482    * @note:</span>
<span class="line-modified">1483    *   The style information as provided by FreeType is very basic.  More</span>
<span class="line-modified">1484    *   details are beyond the scope and should be done on a higher level (for</span>
<span class="line-modified">1485    *   example, by analyzing various fields of the &#39;OS/2&#39; table in SFNT based</span>
<span class="line-modified">1486    *   fonts).</span>
<span class="line-modified">1487    */</span>
1488 #define FT_STYLE_FLAG_ITALIC  ( 1 &lt;&lt; 0 )
1489 #define FT_STYLE_FLAG_BOLD    ( 1 &lt;&lt; 1 )
1490 
1491 
<span class="line-modified">1492   /**************************************************************************</span>
<span class="line-modified">1493    *</span>
<span class="line-modified">1494    * @type:</span>
<span class="line-modified">1495    *   FT_Size_Internal</span>
<span class="line-modified">1496    *</span>
<span class="line-modified">1497    * @description:</span>
<span class="line-modified">1498    *   An opaque handle to an `FT_Size_InternalRec` structure, used to model</span>
<span class="line-modified">1499    *   private data of a given @FT_Size object.</span>
<span class="line-modified">1500    */</span>
1501   typedef struct FT_Size_InternalRec_*  FT_Size_Internal;
1502 
1503 
<span class="line-modified">1504   /**************************************************************************</span>
<span class="line-modified">1505    *</span>
<span class="line-modified">1506    * @struct:</span>
<span class="line-modified">1507    *   FT_Size_Metrics</span>
<span class="line-modified">1508    *</span>
<span class="line-modified">1509    * @description:</span>
<span class="line-modified">1510    *   The size metrics structure gives the metrics of a size object.</span>
<span class="line-modified">1511    *</span>
<span class="line-modified">1512    * @fields:</span>
<span class="line-modified">1513    *   x_ppem ::</span>
<span class="line-modified">1514    *     The width of the scaled EM square in pixels, hence the term &#39;ppem&#39;</span>
<span class="line-modified">1515    *     (pixels per EM).  It is also referred to as &#39;nominal width&#39;.</span>
<span class="line-modified">1516    *</span>
<span class="line-modified">1517    *   y_ppem ::</span>
<span class="line-modified">1518    *     The height of the scaled EM square in pixels, hence the term &#39;ppem&#39;</span>
<span class="line-modified">1519    *     (pixels per EM).  It is also referred to as &#39;nominal height&#39;.</span>
<span class="line-modified">1520    *</span>
<span class="line-modified">1521    *   x_scale ::</span>
<span class="line-modified">1522    *     A 16.16 fractional scaling value to convert horizontal metrics from</span>
<span class="line-modified">1523    *     font units to 26.6 fractional pixels.  Only relevant for scalable</span>
<span class="line-modified">1524    *     font formats.</span>
<span class="line-modified">1525    *</span>
<span class="line-modified">1526    *   y_scale ::</span>
<span class="line-modified">1527    *     A 16.16 fractional scaling value to convert vertical metrics from</span>
<span class="line-modified">1528    *     font units to 26.6 fractional pixels.  Only relevant for scalable</span>
<span class="line-modified">1529    *     font formats.</span>
<span class="line-modified">1530    *</span>
<span class="line-modified">1531    *   ascender ::</span>
<span class="line-modified">1532    *     The ascender in 26.6 fractional pixels, rounded up to an integer</span>
<span class="line-modified">1533    *     value.  See @FT_FaceRec for the details.</span>
<span class="line-modified">1534    *</span>
<span class="line-modified">1535    *   descender ::</span>
<span class="line-modified">1536    *     The descender in 26.6 fractional pixels, rounded down to an integer</span>
<span class="line-modified">1537    *     value.  See @FT_FaceRec for the details.</span>
<span class="line-modified">1538    *</span>
<span class="line-modified">1539    *   height ::</span>
<span class="line-modified">1540    *     The height in 26.6 fractional pixels, rounded to an integer value.</span>
<span class="line-modified">1541    *     See @FT_FaceRec for the details.</span>
<span class="line-modified">1542    *</span>
<span class="line-modified">1543    *   max_advance ::</span>
<span class="line-modified">1544    *     The maximum advance width in 26.6 fractional pixels, rounded to an</span>
<span class="line-modified">1545    *     integer value.  See @FT_FaceRec for the details.</span>
<span class="line-modified">1546    *</span>
<span class="line-modified">1547    * @note:</span>
<span class="line-modified">1548    *   The scaling values, if relevant, are determined first during a size</span>
<span class="line-modified">1549    *   changing operation.  The remaining fields are then set by the driver.</span>
<span class="line-modified">1550    *   For scalable formats, they are usually set to scaled values of the</span>
<span class="line-modified">1551    *   corresponding fields in @FT_FaceRec.  Some values like ascender or</span>
<span class="line-modified">1552    *   descender are rounded for historical reasons; more precise values (for</span>
<span class="line-modified">1553    *   outline fonts) can be derived by scaling the corresponding @FT_FaceRec</span>
<span class="line-modified">1554    *   values manually, with code similar to the following.</span>
<span class="line-modified">1555    *</span>
<span class="line-modified">1556    *   ```</span>
<span class="line-modified">1557    *     scaled_ascender = FT_MulFix( face-&gt;ascender,</span>
<span class="line-modified">1558    *                                  size_metrics-&gt;y_scale );</span>
<span class="line-modified">1559    *   ```</span>
<span class="line-modified">1560    *</span>
<span class="line-modified">1561    *   Note that due to glyph hinting and the selected rendering mode these</span>
<span class="line-modified">1562    *   values are usually not exact; consequently, they must be treated as</span>
<span class="line-modified">1563    *   unreliable with an error margin of at least one pixel!</span>
<span class="line-modified">1564    *</span>
<span class="line-modified">1565    *   Indeed, the only way to get the exact metrics is to render _all_</span>
<span class="line-modified">1566    *   glyphs.  As this would be a definite performance hit, it is up to</span>
<span class="line-modified">1567    *   client applications to perform such computations.</span>
<span class="line-modified">1568    *</span>
<span class="line-modified">1569    *   The `FT_Size_Metrics` structure is valid for bitmap fonts also.</span>
<span class="line-modified">1570    *</span>
<span class="line-modified">1571    *</span>
<span class="line-modified">1572    *   **TrueType fonts with native bytecode hinting**</span>
<span class="line-modified">1573    *</span>
<span class="line-modified">1574    *   All applications that handle TrueType fonts with native hinting must</span>
<span class="line-modified">1575    *   be aware that TTFs expect different rounding of vertical font</span>
<span class="line-modified">1576    *   dimensions.  The application has to cater for this, especially if it</span>
<span class="line-modified">1577    *   wants to rely on a TTF&#39;s vertical data (for example, to properly align</span>
<span class="line-modified">1578    *   box characters vertically).</span>
<span class="line-modified">1579    *</span>
<span class="line-modified">1580    *   Only the application knows _in advance_ that it is going to use native</span>
<span class="line-modified">1581    *   hinting for TTFs!  FreeType, on the other hand, selects the hinting</span>
<span class="line-modified">1582    *   mode not at the time of creating an @FT_Size object but much later,</span>
<span class="line-modified">1583    *   namely while calling @FT_Load_Glyph.</span>
<span class="line-modified">1584    *</span>
<span class="line-modified">1585    *   Here is some pseudo code that illustrates a possible solution.</span>
<span class="line-modified">1586    *</span>
<span class="line-modified">1587    *   ```</span>
<span class="line-modified">1588    *     font_format = FT_Get_Font_Format( face );</span>
<span class="line-modified">1589    *</span>
<span class="line-modified">1590    *     if ( !strcmp( font_format, &quot;TrueType&quot; ) &amp;&amp;</span>
<span class="line-modified">1591    *          do_native_bytecode_hinting         )</span>
<span class="line-modified">1592    *     {</span>
<span class="line-modified">1593    *       ascender  = ROUND( FT_MulFix( face-&gt;ascender,</span>
<span class="line-modified">1594    *                                     size_metrics-&gt;y_scale ) );</span>
<span class="line-modified">1595    *       descender = ROUND( FT_MulFix( face-&gt;descender,</span>
<span class="line-modified">1596    *                                     size_metrics-&gt;y_scale ) );</span>
<span class="line-modified">1597    *     }</span>
<span class="line-modified">1598    *     else</span>
<span class="line-modified">1599    *     {</span>
<span class="line-modified">1600    *       ascender  = size_metrics-&gt;ascender;</span>
<span class="line-modified">1601    *       descender = size_metrics-&gt;descender;</span>
<span class="line-modified">1602    *     }</span>
<span class="line-modified">1603    *</span>
<span class="line-modified">1604    *     height      = size_metrics-&gt;height;</span>
<span class="line-modified">1605    *     max_advance = size_metrics-&gt;max_advance;</span>
<span class="line-modified">1606    *   ```</span>
<span class="line-modified">1607    */</span>

1608   typedef struct  FT_Size_Metrics_
1609   {
1610     FT_UShort  x_ppem;      /* horizontal pixels per EM               */
1611     FT_UShort  y_ppem;      /* vertical pixels per EM                 */
1612 
1613     FT_Fixed   x_scale;     /* scaling values used to convert font    */
1614     FT_Fixed   y_scale;     /* units to 26.6 fractional pixels        */
1615 
1616     FT_Pos     ascender;    /* ascender in 26.6 frac. pixels          */
1617     FT_Pos     descender;   /* descender in 26.6 frac. pixels         */
1618     FT_Pos     height;      /* text height in 26.6 frac. pixels       */
1619     FT_Pos     max_advance; /* max horizontal advance, in 26.6 pixels */
1620 
1621   } FT_Size_Metrics;
1622 
1623 
<span class="line-modified">1624   /**************************************************************************</span>
<span class="line-modified">1625    *</span>
<span class="line-modified">1626    * @struct:</span>
<span class="line-modified">1627    *   FT_SizeRec</span>
<span class="line-modified">1628    *</span>
<span class="line-modified">1629    * @description:</span>
<span class="line-modified">1630    *   FreeType root size class structure.  A size object models a face</span>
<span class="line-modified">1631    *   object at a given size.</span>
<span class="line-modified">1632    *</span>
<span class="line-modified">1633    * @fields:</span>
<span class="line-modified">1634    *   face ::</span>
<span class="line-modified">1635    *     Handle to the parent face object.</span>
<span class="line-modified">1636    *</span>
<span class="line-modified">1637    *   generic ::</span>
<span class="line-modified">1638    *     A typeless pointer, unused by the FreeType library or any of its</span>
<span class="line-modified">1639    *     drivers.  It can be used by client applications to link their own</span>
<span class="line-modified">1640    *     data to each size object.</span>
<span class="line-modified">1641    *</span>
<span class="line-modified">1642    *   metrics ::</span>
<span class="line-added">1643    *     Metrics for this size object.  This field is read-only.</span>
<span class="line-added">1644    */</span>
1645   typedef struct  FT_SizeRec_
1646   {
1647     FT_Face           face;      /* parent face object              */
1648     FT_Generic        generic;   /* generic pointer for client uses */
1649     FT_Size_Metrics   metrics;   /* size metrics                    */
1650     FT_Size_Internal  internal;
1651 
1652   } FT_SizeRec;
1653 
1654 
<span class="line-modified">1655   /**************************************************************************</span>
<span class="line-modified">1656    *</span>
<span class="line-modified">1657    * @struct:</span>
<span class="line-modified">1658    *   FT_SubGlyph</span>
<span class="line-modified">1659    *</span>
<span class="line-modified">1660    * @description:</span>
<span class="line-modified">1661    *   The subglyph structure is an internal object used to describe</span>
<span class="line-modified">1662    *   subglyphs (for example, in the case of composites).</span>
<span class="line-modified">1663    *</span>
<span class="line-modified">1664    * @note:</span>
<span class="line-modified">1665    *   The subglyph implementation is not part of the high-level API, hence</span>
<span class="line-modified">1666    *   the forward structure declaration.</span>
<span class="line-modified">1667    *</span>
<span class="line-modified">1668    *   You can however retrieve subglyph information with</span>
<span class="line-modified">1669    *   @FT_Get_SubGlyph_Info.</span>
<span class="line-modified">1670    */</span>
1671   typedef struct FT_SubGlyphRec_*  FT_SubGlyph;
1672 
1673 
<span class="line-modified">1674   /**************************************************************************</span>
<span class="line-modified">1675    *</span>
<span class="line-modified">1676    * @type:</span>
<span class="line-modified">1677    *   FT_Slot_Internal</span>
<span class="line-modified">1678    *</span>
<span class="line-modified">1679    * @description:</span>
<span class="line-modified">1680    *   An opaque handle to an `FT_Slot_InternalRec` structure, used to model</span>
<span class="line-modified">1681    *   private data of a given @FT_GlyphSlot object.</span>
<span class="line-modified">1682    */</span>
1683   typedef struct FT_Slot_InternalRec_*  FT_Slot_Internal;
1684 
1685 
<span class="line-modified">1686   /**************************************************************************</span>
<span class="line-modified">1687    *</span>
<span class="line-modified">1688    * @struct:</span>
<span class="line-modified">1689    *   FT_GlyphSlotRec</span>
<span class="line-modified">1690    *</span>
<span class="line-modified">1691    * @description:</span>
<span class="line-modified">1692    *   FreeType root glyph slot class structure.  A glyph slot is a container</span>
<span class="line-modified">1693    *   where individual glyphs can be loaded, be they in outline or bitmap</span>
<span class="line-modified">1694    *   format.</span>
<span class="line-modified">1695    *</span>
<span class="line-modified">1696    * @fields:</span>
<span class="line-modified">1697    *   library ::</span>
<span class="line-modified">1698    *     A handle to the FreeType library instance this slot belongs to.</span>
<span class="line-modified">1699    *</span>
<span class="line-modified">1700    *   face ::</span>
<span class="line-modified">1701    *     A handle to the parent face object.</span>
<span class="line-modified">1702    *</span>
<span class="line-modified">1703    *   next ::</span>
<span class="line-modified">1704    *     In some cases (like some font tools), several glyph slots per face</span>
<span class="line-modified">1705    *     object can be a good thing.  As this is rare, the glyph slots are</span>
<span class="line-modified">1706    *     listed through a direct, single-linked list using its `next` field.</span>
<span class="line-modified">1707    *</span>
<span class="line-modified">1708    *   glyph_index ::</span>
<span class="line-modified">1709    *     [Since 2.10] The glyph index passed as an argument to @FT_Load_Glyph</span>
<span class="line-modified">1710    *     while initializing the glyph slot.</span>
<span class="line-modified">1711    *</span>
<span class="line-modified">1712    *   generic ::</span>
<span class="line-modified">1713    *     A typeless pointer unused by the FreeType library or any of its</span>
<span class="line-modified">1714    *     drivers.  It can be used by client applications to link their own</span>
<span class="line-modified">1715    *     data to each glyph slot object.</span>
<span class="line-modified">1716    *</span>
<span class="line-modified">1717    *   metrics ::</span>
<span class="line-modified">1718    *     The metrics of the last loaded glyph in the slot.  The returned</span>
<span class="line-modified">1719    *     values depend on the last load flags (see the @FT_Load_Glyph API</span>
<span class="line-modified">1720    *     function) and can be expressed either in 26.6 fractional pixels or</span>
<span class="line-modified">1721    *     font units.</span>
<span class="line-modified">1722    *</span>
<span class="line-modified">1723    *     Note that even when the glyph image is transformed, the metrics are</span>
<span class="line-modified">1724    *     not.</span>
<span class="line-modified">1725    *</span>
<span class="line-modified">1726    *   linearHoriAdvance ::</span>
<span class="line-modified">1727    *     The advance width of the unhinted glyph.  Its value is expressed in</span>
<span class="line-modified">1728    *     16.16 fractional pixels, unless @FT_LOAD_LINEAR_DESIGN is set when</span>
<span class="line-modified">1729    *     loading the glyph.  This field can be important to perform correct</span>
<span class="line-modified">1730    *     WYSIWYG layout.  Only relevant for outline glyphs.</span>
<span class="line-modified">1731    *</span>
<span class="line-modified">1732    *   linearVertAdvance ::</span>
<span class="line-modified">1733    *     The advance height of the unhinted glyph.  Its value is expressed in</span>
<span class="line-modified">1734    *     16.16 fractional pixels, unless @FT_LOAD_LINEAR_DESIGN is set when</span>
<span class="line-modified">1735    *     loading the glyph.  This field can be important to perform correct</span>
<span class="line-modified">1736    *     WYSIWYG layout.  Only relevant for outline glyphs.</span>
<span class="line-modified">1737    *</span>
<span class="line-modified">1738    *   advance ::</span>
<span class="line-modified">1739    *     This shorthand is, depending on @FT_LOAD_IGNORE_TRANSFORM, the</span>
<span class="line-modified">1740    *     transformed (hinted) advance width for the glyph, in 26.6 fractional</span>
<span class="line-modified">1741    *     pixel format.  As specified with @FT_LOAD_VERTICAL_LAYOUT, it uses</span>
<span class="line-modified">1742    *     either the `horiAdvance` or the `vertAdvance` value of `metrics`</span>
<span class="line-modified">1743    *     field.</span>
<span class="line-modified">1744    *</span>
<span class="line-modified">1745    *   format ::</span>
<span class="line-modified">1746    *     This field indicates the format of the image contained in the glyph</span>
<span class="line-modified">1747    *     slot.  Typically @FT_GLYPH_FORMAT_BITMAP, @FT_GLYPH_FORMAT_OUTLINE,</span>
<span class="line-modified">1748    *     or @FT_GLYPH_FORMAT_COMPOSITE, but other values are possible.</span>
<span class="line-modified">1749    *</span>
<span class="line-modified">1750    *   bitmap ::</span>
<span class="line-modified">1751    *     This field is used as a bitmap descriptor.  Note that the address</span>
<span class="line-modified">1752    *     and content of the bitmap buffer can change between calls of</span>
<span class="line-modified">1753    *     @FT_Load_Glyph and a few other functions.</span>
<span class="line-modified">1754    *</span>
<span class="line-modified">1755    *   bitmap_left ::</span>
<span class="line-modified">1756    *     The bitmap&#39;s left bearing expressed in integer pixels.</span>
<span class="line-modified">1757    *</span>
<span class="line-modified">1758    *   bitmap_top ::</span>
<span class="line-modified">1759    *     The bitmap&#39;s top bearing expressed in integer pixels.  This is the</span>
<span class="line-modified">1760    *     distance from the baseline to the top-most glyph scanline, upwards</span>
<span class="line-modified">1761    *     y~coordinates being **positive**.</span>
<span class="line-modified">1762    *</span>
<span class="line-modified">1763    *   outline ::</span>
<span class="line-modified">1764    *     The outline descriptor for the current glyph image if its format is</span>
<span class="line-modified">1765    *     @FT_GLYPH_FORMAT_OUTLINE.  Once a glyph is loaded, `outline` can be</span>
<span class="line-modified">1766    *     transformed, distorted, emboldened, etc.  However, it must not be</span>
<span class="line-modified">1767    *     freed.</span>
<span class="line-modified">1768    *</span>
<span class="line-modified">1769    *     [Since 2.10.1] If @FT_LOAD_NO_SCALE is set, outline coordinates of</span>
<span class="line-modified">1770    *     OpenType variation fonts for a selected instance are internally</span>
<span class="line-modified">1771    *     handled as 26.6 fractional font units but returned as (rounded)</span>
<span class="line-modified">1772    *     integers, as expected.  To get unrounded font units, don&#39;t use</span>
<span class="line-modified">1773    *     @FT_LOAD_NO_SCALE but load the glyph with @FT_LOAD_NO_HINTING and</span>
<span class="line-modified">1774    *     scale it, using the font&#39;s `units_per_EM` value as the ppem.</span>
<span class="line-modified">1775    *</span>
<span class="line-modified">1776    *   num_subglyphs ::</span>
<span class="line-modified">1777    *     The number of subglyphs in a composite glyph.  This field is only</span>
<span class="line-modified">1778    *     valid for the composite glyph format that should normally only be</span>
<span class="line-modified">1779    *     loaded with the @FT_LOAD_NO_RECURSE flag.</span>
<span class="line-modified">1780    *</span>
<span class="line-modified">1781    *   subglyphs ::</span>
<span class="line-modified">1782    *     An array of subglyph descriptors for composite glyphs.  There are</span>
<span class="line-modified">1783    *     `num_subglyphs` elements in there.  Currently internal to FreeType.</span>
<span class="line-modified">1784    *</span>
<span class="line-modified">1785    *   control_data ::</span>
<span class="line-modified">1786    *     Certain font drivers can also return the control data for a given</span>
<span class="line-modified">1787    *     glyph image (e.g.  TrueType bytecode, Type~1 charstrings, etc.).</span>
<span class="line-modified">1788    *     This field is a pointer to such data; it is currently internal to</span>
<span class="line-modified">1789    *     FreeType.</span>
<span class="line-modified">1790    *</span>
<span class="line-modified">1791    *   control_len ::</span>
<span class="line-modified">1792    *     This is the length in bytes of the control data.  Currently internal</span>
<span class="line-modified">1793    *     to FreeType.</span>
<span class="line-modified">1794    *</span>
<span class="line-modified">1795    *   other ::</span>
<span class="line-modified">1796    *     Reserved.</span>
<span class="line-modified">1797    *</span>
<span class="line-modified">1798    *   lsb_delta ::</span>
<span class="line-modified">1799    *     The difference between hinted and unhinted left side bearing while</span>
<span class="line-modified">1800    *     auto-hinting is active.  Zero otherwise.</span>
<span class="line-modified">1801    *</span>
<span class="line-modified">1802    *   rsb_delta ::</span>
<span class="line-modified">1803    *     The difference between hinted and unhinted right side bearing while</span>
<span class="line-modified">1804    *     auto-hinting is active.  Zero otherwise.</span>
<span class="line-modified">1805    *</span>
<span class="line-modified">1806    * @note:</span>
<span class="line-modified">1807    *   If @FT_Load_Glyph is called with default flags (see @FT_LOAD_DEFAULT)</span>
<span class="line-modified">1808    *   the glyph image is loaded in the glyph slot in its native format</span>
<span class="line-modified">1809    *   (e.g., an outline glyph for TrueType and Type~1 formats).  [Since 2.9]</span>
<span class="line-modified">1810    *   The prospective bitmap metrics are calculated according to</span>
<span class="line-modified">1811    *   @FT_LOAD_TARGET_XXX and other flags even for the outline glyph, even</span>
<span class="line-modified">1812    *   if @FT_LOAD_RENDER is not set.</span>
<span class="line-modified">1813    *</span>
<span class="line-modified">1814    *   This image can later be converted into a bitmap by calling</span>
<span class="line-modified">1815    *   @FT_Render_Glyph.  This function searches the current renderer for the</span>
<span class="line-modified">1816    *   native image&#39;s format, then invokes it.</span>
<span class="line-modified">1817    *</span>
<span class="line-modified">1818    *   The renderer is in charge of transforming the native image through the</span>
<span class="line-modified">1819    *   slot&#39;s face transformation fields, then converting it into a bitmap</span>
<span class="line-modified">1820    *   that is returned in `slot-&gt;bitmap`.</span>
<span class="line-modified">1821    *</span>
<span class="line-modified">1822    *   Note that `slot-&gt;bitmap_left` and `slot-&gt;bitmap_top` are also used to</span>
<span class="line-modified">1823    *   specify the position of the bitmap relative to the current pen</span>
<span class="line-modified">1824    *   position (e.g., coordinates (0,0) on the baseline).  Of course,</span>
<span class="line-modified">1825    *   `slot-&gt;format` is also changed to @FT_GLYPH_FORMAT_BITMAP.</span>
<span class="line-modified">1826    *</span>
<span class="line-modified">1827    *   Here is a small pseudo code fragment that shows how to use `lsb_delta`</span>
<span class="line-modified">1828    *   and `rsb_delta` to do fractional positioning of glyphs:</span>
<span class="line-modified">1829    *</span>
<span class="line-modified">1830    *   ```</span>
<span class="line-modified">1831    *     FT_GlyphSlot  slot     = face-&gt;glyph;</span>
<span class="line-modified">1832    *     FT_Pos        origin_x = 0;</span>
<span class="line-modified">1833    *</span>
<span class="line-modified">1834    *</span>
<span class="line-modified">1835    *     for all glyphs do</span>
<span class="line-modified">1836    *       &lt;load glyph with `FT_Load_Glyph&#39;&gt;</span>
<span class="line-modified">1837    *</span>
<span class="line-modified">1838    *       FT_Outline_Translate( slot-&gt;outline, origin_x &amp; 63, 0 );</span>
<span class="line-modified">1839    *</span>
<span class="line-modified">1840    *       &lt;save glyph image, or render glyph, or ...&gt;</span>
<span class="line-modified">1841    *</span>
<span class="line-modified">1842    *       &lt;compute kern between current and next glyph</span>
<span class="line-modified">1843    *        and add it to `origin_x&#39;&gt;</span>
<span class="line-modified">1844    *</span>
<span class="line-modified">1845    *       origin_x += slot-&gt;advance.x;</span>
<span class="line-modified">1846    *       origin_x += slot-&gt;lsb_delta - slot-&gt;rsb_delta;</span>
<span class="line-modified">1847    *     endfor</span>
<span class="line-modified">1848    *   ```</span>
<span class="line-modified">1849    *</span>
<span class="line-modified">1850    *   Here is another small pseudo code fragment that shows how to use</span>
<span class="line-modified">1851    *   `lsb_delta` and `rsb_delta` to improve integer positioning of glyphs:</span>
<span class="line-modified">1852    *</span>
<span class="line-modified">1853    *   ```</span>
<span class="line-modified">1854    *     FT_GlyphSlot  slot           = face-&gt;glyph;</span>
<span class="line-modified">1855    *     FT_Pos        origin_x       = 0;</span>
<span class="line-modified">1856    *     FT_Pos        prev_rsb_delta = 0;</span>
<span class="line-modified">1857    *</span>
<span class="line-modified">1858    *</span>
<span class="line-modified">1859    *     for all glyphs do</span>
<span class="line-modified">1860    *       &lt;compute kern between current and previous glyph</span>
<span class="line-modified">1861    *        and add it to `origin_x&#39;&gt;</span>
<span class="line-modified">1862    *</span>
<span class="line-modified">1863    *       &lt;load glyph with `FT_Load_Glyph&#39;&gt;</span>
<span class="line-modified">1864    *</span>
<span class="line-modified">1865    *       if ( prev_rsb_delta - slot-&gt;lsb_delta &gt;  32 )</span>
<span class="line-modified">1866    *         origin_x -= 64;</span>
<span class="line-modified">1867    *       else if ( prev_rsb_delta - slot-&gt;lsb_delta &lt; -31 )</span>
<span class="line-modified">1868    *         origin_x += 64;</span>
<span class="line-modified">1869    *</span>
<span class="line-modified">1870    *       prev_rsb_delta = slot-&gt;rsb_delta;</span>
<span class="line-modified">1871    *</span>
<span class="line-modified">1872    *       &lt;save glyph image, or render glyph, or ...&gt;</span>
<span class="line-modified">1873    *</span>
<span class="line-modified">1874    *       origin_x += slot-&gt;advance.x;</span>
<span class="line-modified">1875    *     endfor</span>
<span class="line-modified">1876    *   ```</span>
<span class="line-modified">1877    *</span>
<span class="line-modified">1878    *   If you use strong auto-hinting, you **must** apply these delta values!</span>
<span class="line-modified">1879    *   Otherwise you will experience far too large inter-glyph spacing at</span>
<span class="line-added">1880    *   small rendering sizes in most cases.  Note that it doesn&#39;t harm to use</span>
<span class="line-added">1881    *   the above code for other hinting modes also, since the delta values</span>
<span class="line-added">1882    *   are zero then.</span>
<span class="line-added">1883    */</span>
1884   typedef struct  FT_GlyphSlotRec_
1885   {
1886     FT_Library        library;
1887     FT_Face           face;
1888     FT_GlyphSlot      next;
<span class="line-modified">1889     FT_UInt           glyph_index; /* new in 2.10; was reserved previously */</span>
1890     FT_Generic        generic;
1891 
1892     FT_Glyph_Metrics  metrics;
1893     FT_Fixed          linearHoriAdvance;
1894     FT_Fixed          linearVertAdvance;
1895     FT_Vector         advance;
1896 
1897     FT_Glyph_Format   format;
1898 
1899     FT_Bitmap         bitmap;
1900     FT_Int            bitmap_left;
1901     FT_Int            bitmap_top;
1902 
1903     FT_Outline        outline;
1904 
1905     FT_UInt           num_subglyphs;
1906     FT_SubGlyph       subglyphs;
1907 
1908     void*             control_data;
1909     long              control_len;
1910 
1911     FT_Pos            lsb_delta;
1912     FT_Pos            rsb_delta;
1913 
1914     void*             other;
1915 
1916     FT_Slot_Internal  internal;
1917 
1918   } FT_GlyphSlotRec;
1919 
1920 
1921   /*************************************************************************/
1922   /*************************************************************************/
1923   /*                                                                       */
1924   /*                         F U N C T I O N S                             */
1925   /*                                                                       */
1926   /*************************************************************************/
1927   /*************************************************************************/
1928 
1929 
<span class="line-modified">1930   /**************************************************************************</span>
<span class="line-modified">1931    *</span>
<span class="line-modified">1932    * @function:</span>
<span class="line-modified">1933    *   FT_Init_FreeType</span>
<span class="line-modified">1934    *</span>
<span class="line-modified">1935    * @description:</span>
<span class="line-modified">1936    *   Initialize a new FreeType library object.  The set of modules that are</span>
<span class="line-modified">1937    *   registered by this function is determined at build time.</span>
<span class="line-modified">1938    *</span>
<span class="line-modified">1939    * @output:</span>
<span class="line-modified">1940    *   alibrary ::</span>
<span class="line-modified">1941    *     A handle to a new library object.</span>
<span class="line-modified">1942    *</span>
<span class="line-modified">1943    * @return:</span>
<span class="line-modified">1944    *   FreeType error code.  0~means success.</span>
<span class="line-modified">1945    *</span>
<span class="line-modified">1946    * @note:</span>
<span class="line-modified">1947    *   In case you want to provide your own memory allocating routines, use</span>
<span class="line-modified">1948    *   @FT_New_Library instead, followed by a call to @FT_Add_Default_Modules</span>
<span class="line-modified">1949    *   (or a series of calls to @FT_Add_Module) and</span>
<span class="line-modified">1950    *   @FT_Set_Default_Properties.</span>
<span class="line-modified">1951    *</span>
<span class="line-modified">1952    *   See the documentation of @FT_Library and @FT_Face for multi-threading</span>
<span class="line-modified">1953    *   issues.</span>
<span class="line-modified">1954    *</span>
<span class="line-modified">1955    *   If you need reference-counting (cf. @FT_Reference_Library), use</span>
<span class="line-modified">1956    *   @FT_New_Library and @FT_Done_Library.</span>
<span class="line-modified">1957    *</span>
<span class="line-modified">1958    *   If compilation option `FT_CONFIG_OPTION_ENVIRONMENT_PROPERTIES` is</span>
<span class="line-modified">1959    *   set, this function reads the `FREETYPE_PROPERTIES` environment</span>
<span class="line-modified">1960    *   variable to control driver properties.  See section @properties for</span>
<span class="line-modified">1961    *   more.</span>
<span class="line-added">1962    */</span>
1963   FT_EXPORT( FT_Error )
1964   FT_Init_FreeType( FT_Library  *alibrary );
1965 
1966 
<span class="line-modified">1967   /**************************************************************************</span>
<span class="line-modified">1968    *</span>
<span class="line-modified">1969    * @function:</span>
<span class="line-modified">1970    *   FT_Done_FreeType</span>
<span class="line-modified">1971    *</span>
<span class="line-modified">1972    * @description:</span>
<span class="line-modified">1973    *   Destroy a given FreeType library object and all of its children,</span>
<span class="line-modified">1974    *   including resources, drivers, faces, sizes, etc.</span>
<span class="line-modified">1975    *</span>
<span class="line-modified">1976    * @input:</span>
<span class="line-modified">1977    *   library ::</span>
<span class="line-modified">1978    *     A handle to the target library object.</span>
<span class="line-modified">1979    *</span>
<span class="line-modified">1980    * @return:</span>
<span class="line-modified">1981    *   FreeType error code.  0~means success.</span>
<span class="line-added">1982    */</span>
1983   FT_EXPORT( FT_Error )
1984   FT_Done_FreeType( FT_Library  library );
1985 
1986 
<span class="line-modified">1987   /**************************************************************************</span>
<span class="line-modified">1988    *</span>
<span class="line-modified">1989    * @enum:</span>
<span class="line-modified">1990    *   FT_OPEN_XXX</span>
<span class="line-modified">1991    *</span>
<span class="line-modified">1992    * @description:</span>
<span class="line-modified">1993    *   A list of bit field constants used within the `flags` field of the</span>
<span class="line-modified">1994    *   @FT_Open_Args structure.</span>
<span class="line-modified">1995    *</span>
<span class="line-modified">1996    * @values:</span>
<span class="line-modified">1997    *   FT_OPEN_MEMORY ::</span>
<span class="line-modified">1998    *     This is a memory-based stream.</span>
<span class="line-modified">1999    *</span>
<span class="line-modified">2000    *   FT_OPEN_STREAM ::</span>
<span class="line-modified">2001    *     Copy the stream from the `stream` field.</span>
<span class="line-modified">2002    *</span>
<span class="line-modified">2003    *   FT_OPEN_PATHNAME ::</span>
<span class="line-modified">2004    *     Create a new input stream from a C~path name.</span>
<span class="line-modified">2005    *</span>
<span class="line-modified">2006    *   FT_OPEN_DRIVER ::</span>
<span class="line-modified">2007    *     Use the `driver` field.</span>
<span class="line-modified">2008    *</span>
<span class="line-modified">2009    *   FT_OPEN_PARAMS ::</span>
<span class="line-modified">2010    *     Use the `num_params` and `params` fields.</span>
<span class="line-modified">2011    *</span>
<span class="line-added">2012    * @note:</span>
<span class="line-added">2013    *   The `FT_OPEN_MEMORY`, `FT_OPEN_STREAM`, and `FT_OPEN_PATHNAME` flags</span>
<span class="line-added">2014    *   are mutually exclusive.</span>
<span class="line-added">2015    */</span>
2016 #define FT_OPEN_MEMORY    0x1
2017 #define FT_OPEN_STREAM    0x2
2018 #define FT_OPEN_PATHNAME  0x4
2019 #define FT_OPEN_DRIVER    0x8
2020 #define FT_OPEN_PARAMS    0x10
2021 
2022 
<span class="line-modified">2023   /* these constants are deprecated; use the corresponding `FT_OPEN_XXX` */</span>
2024   /* values instead                                                      */
2025 #define ft_open_memory    FT_OPEN_MEMORY
2026 #define ft_open_stream    FT_OPEN_STREAM
2027 #define ft_open_pathname  FT_OPEN_PATHNAME
2028 #define ft_open_driver    FT_OPEN_DRIVER
2029 #define ft_open_params    FT_OPEN_PARAMS
2030 
2031 
<span class="line-modified">2032   /**************************************************************************</span>
<span class="line-modified">2033    *</span>
<span class="line-modified">2034    * @struct:</span>
<span class="line-modified">2035    *   FT_Parameter</span>
<span class="line-modified">2036    *</span>
<span class="line-modified">2037    * @description:</span>
<span class="line-modified">2038    *   A simple structure to pass more or less generic parameters to</span>
<span class="line-modified">2039    *   @FT_Open_Face and @FT_Face_Properties.</span>
<span class="line-modified">2040    *</span>
<span class="line-modified">2041    * @fields:</span>
<span class="line-modified">2042    *   tag ::</span>
<span class="line-modified">2043    *     A four-byte identification tag.</span>
<span class="line-modified">2044    *</span>
<span class="line-modified">2045    *   data ::</span>
<span class="line-modified">2046    *     A pointer to the parameter data.</span>
<span class="line-modified">2047    *</span>
<span class="line-modified">2048    * @note:</span>
<span class="line-modified">2049    *   The ID and function of parameters are driver-specific.  See section</span>
<span class="line-modified">2050    *   @parameter_tags for more information.</span>
<span class="line-modified">2051    */</span>
<span class="line-modified">2052   typedef struct  FT_Parameter_</span>
<span class="line-added">2053   {</span>
<span class="line-added">2054     FT_ULong    tag;</span>
2055     FT_Pointer  data;
2056 
2057   } FT_Parameter;
2058 
2059 
<span class="line-modified">2060   /**************************************************************************</span>
<span class="line-modified">2061    *</span>
<span class="line-modified">2062    * @struct:</span>
<span class="line-modified">2063    *   FT_Open_Args</span>
<span class="line-modified">2064    *</span>
<span class="line-modified">2065    * @description:</span>
<span class="line-modified">2066    *   A structure to indicate how to open a new font file or stream.  A</span>
<span class="line-modified">2067    *   pointer to such a structure can be used as a parameter for the</span>
<span class="line-modified">2068    *   functions @FT_Open_Face and @FT_Attach_Stream.</span>
<span class="line-modified">2069    *</span>
<span class="line-modified">2070    * @fields:</span>
<span class="line-modified">2071    *   flags ::</span>
<span class="line-modified">2072    *     A set of bit flags indicating how to use the structure.</span>
<span class="line-modified">2073    *</span>
<span class="line-modified">2074    *   memory_base ::</span>
<span class="line-modified">2075    *     The first byte of the file in memory.</span>
<span class="line-modified">2076    *</span>
<span class="line-modified">2077    *   memory_size ::</span>
<span class="line-modified">2078    *     The size in bytes of the file in memory.</span>
<span class="line-modified">2079    *</span>
<span class="line-modified">2080    *   pathname ::</span>
<span class="line-modified">2081    *     A pointer to an 8-bit file pathname.</span>
<span class="line-modified">2082    *</span>
<span class="line-modified">2083    *   stream ::</span>
<span class="line-modified">2084    *     A handle to a source stream object.</span>
<span class="line-modified">2085    *</span>
<span class="line-modified">2086    *   driver ::</span>
<span class="line-modified">2087    *     This field is exclusively used by @FT_Open_Face; it simply specifies</span>
<span class="line-modified">2088    *     the font driver to use for opening the face.  If set to `NULL`,</span>
<span class="line-modified">2089    *     FreeType tries to load the face with each one of the drivers in its</span>
<span class="line-modified">2090    *     list.</span>
<span class="line-modified">2091    *</span>
<span class="line-modified">2092    *   num_params ::</span>
<span class="line-modified">2093    *     The number of extra parameters.</span>
<span class="line-modified">2094    *</span>
<span class="line-modified">2095    *   params ::</span>
<span class="line-modified">2096    *     Extra parameters passed to the font driver when opening a new face.</span>
<span class="line-modified">2097    *</span>
<span class="line-modified">2098    * @note:</span>
<span class="line-modified">2099    *   The stream type is determined by the contents of `flags` that are</span>
<span class="line-modified">2100    *   tested in the following order by @FT_Open_Face:</span>
<span class="line-modified">2101    *</span>
<span class="line-modified">2102    *   If the @FT_OPEN_MEMORY bit is set, assume that this is a memory file</span>
<span class="line-modified">2103    *   of `memory_size` bytes, located at `memory_address`.  The data are not</span>
<span class="line-modified">2104    *   copied, and the client is responsible for releasing and destroying</span>
<span class="line-modified">2105    *   them _after_ the corresponding call to @FT_Done_Face.</span>
<span class="line-modified">2106    *</span>
<span class="line-modified">2107    *   Otherwise, if the @FT_OPEN_STREAM bit is set, assume that a custom</span>
<span class="line-modified">2108    *   input stream `stream` is used.</span>
<span class="line-modified">2109    *</span>
<span class="line-modified">2110    *   Otherwise, if the @FT_OPEN_PATHNAME bit is set, assume that this is a</span>
<span class="line-modified">2111    *   normal file and use `pathname` to open it.</span>
<span class="line-modified">2112    *</span>
<span class="line-modified">2113    *   If the @FT_OPEN_DRIVER bit is set, @FT_Open_Face only tries to open</span>
<span class="line-modified">2114    *   the file with the driver whose handler is in `driver`.</span>
<span class="line-modified">2115    *</span>
<span class="line-modified">2116    *   If the @FT_OPEN_PARAMS bit is set, the parameters given by</span>
<span class="line-modified">2117    *   `num_params` and `params` is used.  They are ignored otherwise.</span>
<span class="line-modified">2118    *</span>
<span class="line-added">2119    *   Ideally, both the `pathname` and `params` fields should be tagged as</span>
<span class="line-added">2120    *   &#39;const&#39;; this is missing for API backward compatibility.  In other</span>
<span class="line-added">2121    *   words, applications should treat them as read-only.</span>
<span class="line-added">2122    */</span>
2123   typedef struct  FT_Open_Args_
2124   {
2125     FT_UInt         flags;
2126     const FT_Byte*  memory_base;
2127     FT_Long         memory_size;
2128     FT_String*      pathname;
2129     FT_Stream       stream;
2130     FT_Module       driver;
2131     FT_Int          num_params;
2132     FT_Parameter*   params;
2133 
2134   } FT_Open_Args;
2135 
2136 
<span class="line-modified">2137   /**************************************************************************</span>
<span class="line-modified">2138    *</span>
<span class="line-modified">2139    * @function:</span>
<span class="line-modified">2140    *   FT_New_Face</span>
<span class="line-modified">2141    *</span>
<span class="line-modified">2142    * @description:</span>
<span class="line-modified">2143    *   Call @FT_Open_Face to open a font by its pathname.</span>
<span class="line-modified">2144    *</span>
<span class="line-modified">2145    * @inout:</span>
<span class="line-modified">2146    *   library ::</span>
<span class="line-modified">2147    *     A handle to the library resource.</span>
<span class="line-modified">2148    *</span>
<span class="line-modified">2149    * @input:</span>
<span class="line-modified">2150    *   pathname ::</span>
<span class="line-modified">2151    *     A path to the font file.</span>
<span class="line-modified">2152    *</span>
<span class="line-modified">2153    *   face_index ::</span>
<span class="line-modified">2154    *     See @FT_Open_Face for a detailed description of this parameter.</span>
<span class="line-modified">2155    *</span>
<span class="line-modified">2156    * @output:</span>
<span class="line-modified">2157    *   aface ::</span>
<span class="line-modified">2158    *     A handle to a new face object.  If `face_index` is greater than or</span>
<span class="line-modified">2159    *     equal to zero, it must be non-`NULL`.</span>
<span class="line-modified">2160    *</span>
<span class="line-modified">2161    * @return:</span>
<span class="line-modified">2162    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2163    *</span>
<span class="line-modified">2164    * @note:</span>
<span class="line-added">2165    *   Use @FT_Done_Face to destroy the created @FT_Face object (along with</span>
<span class="line-added">2166    *   its slot and sizes).</span>
<span class="line-added">2167    */</span>
2168   FT_EXPORT( FT_Error )
2169   FT_New_Face( FT_Library   library,
2170                const char*  filepathname,
2171                FT_Long      face_index,
2172                FT_Face     *aface );
2173 
2174 
<span class="line-modified">2175   /**************************************************************************</span>
<span class="line-modified">2176    *</span>
<span class="line-modified">2177    * @function:</span>
<span class="line-modified">2178    *   FT_New_Memory_Face</span>
<span class="line-modified">2179    *</span>
<span class="line-modified">2180    * @description:</span>
<span class="line-modified">2181    *   Call @FT_Open_Face to open a font that has been loaded into memory.</span>
<span class="line-modified">2182    *</span>
<span class="line-modified">2183    * @inout:</span>
<span class="line-modified">2184    *   library ::</span>
<span class="line-modified">2185    *     A handle to the library resource.</span>
<span class="line-modified">2186    *</span>
<span class="line-modified">2187    * @input:</span>
<span class="line-modified">2188    *   file_base ::</span>
<span class="line-modified">2189    *     A pointer to the beginning of the font data.</span>
<span class="line-modified">2190    *</span>
<span class="line-modified">2191    *   file_size ::</span>
<span class="line-modified">2192    *     The size of the memory chunk used by the font data.</span>
<span class="line-modified">2193    *</span>
<span class="line-modified">2194    *   face_index ::</span>
<span class="line-modified">2195    *     See @FT_Open_Face for a detailed description of this parameter.</span>
<span class="line-modified">2196    *</span>
<span class="line-modified">2197    * @output:</span>
<span class="line-modified">2198    *   aface ::</span>
<span class="line-modified">2199    *     A handle to a new face object.  If `face_index` is greater than or</span>
<span class="line-modified">2200    *     equal to zero, it must be non-`NULL`.</span>
<span class="line-modified">2201    *</span>
<span class="line-modified">2202    * @return:</span>
<span class="line-modified">2203    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2204    *</span>
<span class="line-added">2205    * @note:</span>
<span class="line-added">2206    *   You must not deallocate the memory before calling @FT_Done_Face.</span>
<span class="line-added">2207    */</span>
2208   FT_EXPORT( FT_Error )
2209   FT_New_Memory_Face( FT_Library      library,
2210                       const FT_Byte*  file_base,
2211                       FT_Long         file_size,
2212                       FT_Long         face_index,
2213                       FT_Face        *aface );
2214 
2215 
<span class="line-modified">2216   /**************************************************************************</span>
<span class="line-modified">2217    *</span>
<span class="line-modified">2218    * @function:</span>
<span class="line-modified">2219    *   FT_Open_Face</span>
<span class="line-modified">2220    *</span>
<span class="line-modified">2221    * @description:</span>
<span class="line-modified">2222    *   Create a face object from a given resource described by @FT_Open_Args.</span>
<span class="line-modified">2223    *</span>
<span class="line-modified">2224    * @inout:</span>
<span class="line-modified">2225    *   library ::</span>
<span class="line-modified">2226    *     A handle to the library resource.</span>
<span class="line-modified">2227    *</span>
<span class="line-modified">2228    * @input:</span>
<span class="line-modified">2229    *   args ::</span>
<span class="line-modified">2230    *     A pointer to an `FT_Open_Args` structure that must be filled by the</span>
<span class="line-modified">2231    *     caller.</span>
<span class="line-modified">2232    *</span>
<span class="line-modified">2233    *   face_index ::</span>
<span class="line-modified">2234    *     This field holds two different values.  Bits 0-15 are the index of</span>
<span class="line-modified">2235    *     the face in the font file (starting with value~0).  Set it to~0 if</span>
<span class="line-modified">2236    *     there is only one face in the font file.</span>
<span class="line-modified">2237    *</span>
<span class="line-modified">2238    *     [Since 2.6.1] Bits 16-30 are relevant to GX and OpenType variation</span>
<span class="line-modified">2239    *     fonts only, specifying the named instance index for the current face</span>
<span class="line-modified">2240    *     index (starting with value~1; value~0 makes FreeType ignore named</span>
<span class="line-modified">2241    *     instances).  For non-variation fonts, bits 16-30 are ignored.</span>
<span class="line-modified">2242    *     Assuming that you want to access the third named instance in face~4,</span>
<span class="line-modified">2243    *     `face_index` should be set to 0x00030004.  If you want to access</span>
<span class="line-modified">2244    *     face~4 without variation handling, simply set `face_index` to</span>
<span class="line-modified">2245    *     value~4.</span>
<span class="line-modified">2246    *</span>
<span class="line-modified">2247    *     `FT_Open_Face` and its siblings can be used to quickly check whether</span>
<span class="line-modified">2248    *     the font format of a given font resource is supported by FreeType.</span>
<span class="line-modified">2249    *     In general, if the `face_index` argument is negative, the function&#39;s</span>
<span class="line-modified">2250    *     return value is~0 if the font format is recognized, or non-zero</span>
<span class="line-modified">2251    *     otherwise.  The function allocates a more or less empty face handle</span>
<span class="line-modified">2252    *     in `*aface` (if `aface` isn&#39;t `NULL`); the only two useful fields in</span>
<span class="line-modified">2253    *     this special case are `face-&gt;num_faces` and `face-&gt;style_flags`.</span>
<span class="line-modified">2254    *     For any negative value of `face_index`, `face-&gt;num_faces` gives the</span>
<span class="line-modified">2255    *     number of faces within the font file.  For the negative value</span>
<span class="line-modified">2256    *     &#39;-(N+1)&#39; (with &#39;N&#39; a non-negative 16-bit value), bits 16-30 in</span>
<span class="line-modified">2257    *     `face-&gt;style_flags` give the number of named instances in face &#39;N&#39;</span>
<span class="line-modified">2258    *     if we have a variation font (or zero otherwise).  After examination,</span>
<span class="line-modified">2259    *     the returned @FT_Face structure should be deallocated with a call to</span>
<span class="line-modified">2260    *     @FT_Done_Face.</span>
<span class="line-modified">2261    *</span>
<span class="line-modified">2262    * @output:</span>
<span class="line-modified">2263    *   aface ::</span>
<span class="line-modified">2264    *     A handle to a new face object.  If `face_index` is greater than or</span>
<span class="line-modified">2265    *     equal to zero, it must be non-`NULL`.</span>
<span class="line-modified">2266    *</span>
<span class="line-modified">2267    * @return:</span>
<span class="line-modified">2268    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2269    *</span>
<span class="line-modified">2270    * @note:</span>
<span class="line-modified">2271    *   Unlike FreeType 1.x, this function automatically creates a glyph slot</span>
<span class="line-modified">2272    *   for the face object that can be accessed directly through</span>
<span class="line-modified">2273    *   `face-&gt;glyph`.</span>
<span class="line-modified">2274    *</span>
<span class="line-modified">2275    *   Each new face object created with this function also owns a default</span>
<span class="line-modified">2276    *   @FT_Size object, accessible as `face-&gt;size`.</span>
<span class="line-modified">2277    *</span>
<span class="line-modified">2278    *   One @FT_Library instance can have multiple face objects, this is,</span>
<span class="line-modified">2279    *   @FT_Open_Face and its siblings can be called multiple times using the</span>
<span class="line-modified">2280    *   same `library` argument.</span>
<span class="line-modified">2281    *</span>
<span class="line-modified">2282    *   See the discussion of reference counters in the description of</span>
<span class="line-modified">2283    *   @FT_Reference_Face.</span>
<span class="line-modified">2284    *</span>
<span class="line-modified">2285    * @example:</span>
<span class="line-modified">2286    *   To loop over all faces, use code similar to the following snippet</span>
<span class="line-modified">2287    *   (omitting the error handling).</span>
<span class="line-modified">2288    *</span>
<span class="line-modified">2289    *   ```</span>
<span class="line-modified">2290    *     ...</span>
<span class="line-modified">2291    *     FT_Face  face;</span>
<span class="line-modified">2292    *     FT_Long  i, num_faces;</span>
<span class="line-modified">2293    *</span>
<span class="line-modified">2294    *</span>
<span class="line-modified">2295    *     error = FT_Open_Face( library, args, -1, &amp;face );</span>
<span class="line-modified">2296    *     if ( error ) { ... }</span>
<span class="line-modified">2297    *</span>
<span class="line-modified">2298    *     num_faces = face-&gt;num_faces;</span>
<span class="line-modified">2299    *     FT_Done_Face( face );</span>
<span class="line-modified">2300    *</span>
<span class="line-modified">2301    *     for ( i = 0; i &lt; num_faces; i++ )</span>
<span class="line-modified">2302    *     {</span>
<span class="line-modified">2303    *       ...</span>
<span class="line-modified">2304    *       error = FT_Open_Face( library, args, i, &amp;face );</span>
<span class="line-modified">2305    *       ...</span>
<span class="line-modified">2306    *       FT_Done_Face( face );</span>
<span class="line-modified">2307    *       ...</span>
<span class="line-modified">2308    *     }</span>
<span class="line-modified">2309    *   ```</span>
<span class="line-modified">2310    *</span>
<span class="line-modified">2311    *   To loop over all valid values for `face_index`, use something similar</span>
<span class="line-modified">2312    *   to the following snippet, again without error handling.  The code</span>
<span class="line-modified">2313    *   accesses all faces immediately (thus only a single call of</span>
<span class="line-modified">2314    *   `FT_Open_Face` within the do-loop), with and without named instances.</span>
<span class="line-modified">2315    *</span>
<span class="line-modified">2316    *   ```</span>
<span class="line-modified">2317    *     ...</span>
<span class="line-modified">2318    *     FT_Face  face;</span>
<span class="line-modified">2319    *</span>
<span class="line-modified">2320    *     FT_Long  num_faces     = 0;</span>
<span class="line-modified">2321    *     FT_Long  num_instances = 0;</span>
<span class="line-modified">2322    *</span>
<span class="line-modified">2323    *     FT_Long  face_idx     = 0;</span>
<span class="line-modified">2324    *     FT_Long  instance_idx = 0;</span>
<span class="line-modified">2325    *</span>
<span class="line-modified">2326    *</span>
<span class="line-modified">2327    *     do</span>
<span class="line-modified">2328    *     {</span>
<span class="line-modified">2329    *       FT_Long  id = ( instance_idx &lt;&lt; 16 ) + face_idx;</span>
<span class="line-modified">2330    *</span>
<span class="line-modified">2331    *</span>
<span class="line-modified">2332    *       error = FT_Open_Face( library, args, id, &amp;face );</span>
<span class="line-modified">2333    *       if ( error ) { ... }</span>
<span class="line-modified">2334    *</span>
<span class="line-modified">2335    *       num_faces     = face-&gt;num_faces;</span>
<span class="line-modified">2336    *       num_instances = face-&gt;style_flags &gt;&gt; 16;</span>
<span class="line-modified">2337    *</span>
<span class="line-modified">2338    *       ...</span>
<span class="line-modified">2339    *</span>
<span class="line-modified">2340    *       FT_Done_Face( face );</span>
<span class="line-modified">2341    *</span>
<span class="line-modified">2342    *       if ( instance_idx &lt; num_instances )</span>
<span class="line-modified">2343    *         instance_idx++;</span>
<span class="line-modified">2344    *       else</span>
<span class="line-modified">2345    *       {</span>
<span class="line-modified">2346    *         face_idx++;</span>
<span class="line-modified">2347    *         instance_idx = 0;</span>
<span class="line-modified">2348    *       }</span>
<span class="line-modified">2349    *</span>
<span class="line-modified">2350    *     } while ( face_idx &lt; num_faces )</span>
<span class="line-modified">2351    *   ```</span>
<span class="line-modified">2352    */</span>




2353   FT_EXPORT( FT_Error )
2354   FT_Open_Face( FT_Library           library,
2355                 const FT_Open_Args*  args,
2356                 FT_Long              face_index,
2357                 FT_Face             *aface );
2358 
2359 
<span class="line-modified">2360   /**************************************************************************</span>
<span class="line-modified">2361    *</span>
<span class="line-modified">2362    * @function:</span>
<span class="line-modified">2363    *   FT_Attach_File</span>
<span class="line-modified">2364    *</span>
<span class="line-modified">2365    * @description:</span>
<span class="line-modified">2366    *   Call @FT_Attach_Stream to attach a file.</span>
<span class="line-modified">2367    *</span>
<span class="line-modified">2368    * @inout:</span>
<span class="line-modified">2369    *   face ::</span>
<span class="line-modified">2370    *     The target face object.</span>
<span class="line-modified">2371    *</span>
<span class="line-modified">2372    * @input:</span>
<span class="line-modified">2373    *   filepathname ::</span>
<span class="line-modified">2374    *     The pathname.</span>
<span class="line-modified">2375    *</span>
<span class="line-modified">2376    * @return:</span>
<span class="line-added">2377    *   FreeType error code.  0~means success.</span>
<span class="line-added">2378    */</span>
2379   FT_EXPORT( FT_Error )
2380   FT_Attach_File( FT_Face      face,
2381                   const char*  filepathname );
2382 
2383 
<span class="line-modified">2384   /**************************************************************************</span>
<span class="line-modified">2385    *</span>
<span class="line-modified">2386    * @function:</span>
<span class="line-modified">2387    *   FT_Attach_Stream</span>
<span class="line-modified">2388    *</span>
<span class="line-modified">2389    * @description:</span>
<span class="line-modified">2390    *   &#39;Attach&#39; data to a face object.  Normally, this is used to read</span>
<span class="line-modified">2391    *   additional information for the face object.  For example, you can</span>
<span class="line-modified">2392    *   attach an AFM file that comes with a Type~1 font to get the kerning</span>
<span class="line-modified">2393    *   values and other metrics.</span>
<span class="line-modified">2394    *</span>
<span class="line-modified">2395    * @inout:</span>
<span class="line-modified">2396    *   face ::</span>
<span class="line-modified">2397    *     The target face object.</span>
<span class="line-modified">2398    *</span>
<span class="line-modified">2399    * @input:</span>
<span class="line-modified">2400    *   parameters ::</span>
<span class="line-modified">2401    *     A pointer to @FT_Open_Args that must be filled by the caller.</span>
<span class="line-modified">2402    *</span>
<span class="line-modified">2403    * @return:</span>
<span class="line-modified">2404    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2405    *</span>
<span class="line-modified">2406    * @note:</span>
<span class="line-modified">2407    *   The meaning of the &#39;attach&#39; (i.e., what really happens when the new</span>
<span class="line-modified">2408    *   file is read) is not fixed by FreeType itself.  It really depends on</span>
<span class="line-modified">2409    *   the font format (and thus the font driver).</span>
<span class="line-modified">2410    *</span>
<span class="line-modified">2411    *   Client applications are expected to know what they are doing when</span>
<span class="line-modified">2412    *   invoking this function.  Most drivers simply do not implement file or</span>
<span class="line-modified">2413    *   stream attachments.</span>
<span class="line-added">2414    */</span>
2415   FT_EXPORT( FT_Error )
2416   FT_Attach_Stream( FT_Face        face,
2417                     FT_Open_Args*  parameters );
2418 
2419 
<span class="line-modified">2420   /**************************************************************************</span>
<span class="line-modified">2421    *</span>
<span class="line-modified">2422    * @function:</span>
<span class="line-modified">2423    *   FT_Reference_Face</span>
<span class="line-modified">2424    *</span>
<span class="line-modified">2425    * @description:</span>
<span class="line-modified">2426    *   A counter gets initialized to~1 at the time an @FT_Face structure is</span>
<span class="line-modified">2427    *   created.  This function increments the counter.  @FT_Done_Face then</span>
<span class="line-modified">2428    *   only destroys a face if the counter is~1, otherwise it simply</span>
<span class="line-modified">2429    *   decrements the counter.</span>
<span class="line-modified">2430    *</span>
<span class="line-modified">2431    *   This function helps in managing life-cycles of structures that</span>
<span class="line-modified">2432    *   reference @FT_Face objects.</span>
<span class="line-modified">2433    *</span>
<span class="line-modified">2434    * @input:</span>
<span class="line-modified">2435    *   face ::</span>
<span class="line-modified">2436    *     A handle to a target face object.</span>
<span class="line-modified">2437    *</span>
<span class="line-modified">2438    * @return:</span>
<span class="line-modified">2439    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2440    *</span>
<span class="line-modified">2441    * @since:</span>
<span class="line-modified">2442    *   2.4.2</span>
<span class="line-added">2443    */</span>
2444   FT_EXPORT( FT_Error )
2445   FT_Reference_Face( FT_Face  face );
2446 
2447 
<span class="line-modified">2448   /**************************************************************************</span>
<span class="line-modified">2449    *</span>
<span class="line-modified">2450    * @function:</span>
<span class="line-modified">2451    *   FT_Done_Face</span>
<span class="line-modified">2452    *</span>
<span class="line-modified">2453    * @description:</span>
<span class="line-modified">2454    *   Discard a given face object, as well as all of its child slots and</span>
<span class="line-modified">2455    *   sizes.</span>
<span class="line-modified">2456    *</span>
<span class="line-modified">2457    * @input:</span>
<span class="line-modified">2458    *   face ::</span>
<span class="line-modified">2459    *     A handle to a target face object.</span>
<span class="line-modified">2460    *</span>
<span class="line-modified">2461    * @return:</span>
<span class="line-modified">2462    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2463    *</span>
<span class="line-modified">2464    * @note:</span>
<span class="line-modified">2465    *   See the discussion of reference counters in the description of</span>
<span class="line-modified">2466    *   @FT_Reference_Face.</span>
<span class="line-added">2467    */</span>
2468   FT_EXPORT( FT_Error )
2469   FT_Done_Face( FT_Face  face );
2470 
2471 
<span class="line-modified">2472   /**************************************************************************</span>
<span class="line-modified">2473    *</span>
<span class="line-modified">2474    * @function:</span>
<span class="line-modified">2475    *   FT_Select_Size</span>
<span class="line-modified">2476    *</span>
<span class="line-modified">2477    * @description:</span>
<span class="line-modified">2478    *   Select a bitmap strike.  To be more precise, this function sets the</span>
<span class="line-modified">2479    *   scaling factors of the active @FT_Size object in a face so that</span>
<span class="line-modified">2480    *   bitmaps from this particular strike are taken by @FT_Load_Glyph and</span>
<span class="line-modified">2481    *   friends.</span>
<span class="line-modified">2482    *</span>
<span class="line-modified">2483    * @inout:</span>
<span class="line-modified">2484    *   face ::</span>
<span class="line-modified">2485    *     A handle to a target face object.</span>
<span class="line-modified">2486    *</span>
<span class="line-modified">2487    * @input:</span>
<span class="line-modified">2488    *   strike_index ::</span>
<span class="line-modified">2489    *     The index of the bitmap strike in the `available_sizes` field of</span>
<span class="line-modified">2490    *     @FT_FaceRec structure.</span>
<span class="line-modified">2491    *</span>
<span class="line-modified">2492    * @return:</span>
<span class="line-modified">2493    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2494    *</span>
<span class="line-modified">2495    * @note:</span>
<span class="line-modified">2496    *   For bitmaps embedded in outline fonts it is common that only a subset</span>
<span class="line-modified">2497    *   of the available glyphs at a given ppem value is available.  FreeType</span>
<span class="line-modified">2498    *   silently uses outlines if there is no bitmap for a given glyph index.</span>
<span class="line-modified">2499    *</span>
<span class="line-modified">2500    *   For GX and OpenType variation fonts, a bitmap strike makes sense only</span>
<span class="line-modified">2501    *   if the default instance is active (this is, no glyph variation takes</span>
<span class="line-modified">2502    *   place); otherwise, FreeType simply ignores bitmap strikes.  The same</span>
<span class="line-modified">2503    *   is true for all named instances that are different from the default</span>
<span class="line-modified">2504    *   instance.</span>
<span class="line-modified">2505    *</span>
<span class="line-modified">2506    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">2507    */</span>
2508   FT_EXPORT( FT_Error )
2509   FT_Select_Size( FT_Face  face,
2510                   FT_Int   strike_index );
2511 
2512 
<span class="line-modified">2513   /**************************************************************************</span>
<span class="line-modified">2514    *</span>
<span class="line-modified">2515    * @enum:</span>
<span class="line-modified">2516    *   FT_Size_Request_Type</span>
<span class="line-modified">2517    *</span>
<span class="line-modified">2518    * @description:</span>
<span class="line-modified">2519    *   An enumeration type that lists the supported size request types, i.e.,</span>
<span class="line-modified">2520    *   what input size (in font units) maps to the requested output size (in</span>
<span class="line-modified">2521    *   pixels, as computed from the arguments of @FT_Size_Request).</span>
<span class="line-modified">2522    *</span>
<span class="line-modified">2523    * @values:</span>
<span class="line-modified">2524    *   FT_SIZE_REQUEST_TYPE_NOMINAL ::</span>
<span class="line-modified">2525    *     The nominal size.  The `units_per_EM` field of @FT_FaceRec is used</span>
<span class="line-modified">2526    *     to determine both scaling values.</span>
<span class="line-modified">2527    *</span>
<span class="line-modified">2528    *     This is the standard scaling found in most applications.  In</span>
<span class="line-modified">2529    *     particular, use this size request type for TrueType fonts if they</span>
<span class="line-modified">2530    *     provide optical scaling or something similar.  Note, however, that</span>
<span class="line-modified">2531    *     `units_per_EM` is a rather abstract value which bears no relation to</span>
<span class="line-modified">2532    *     the actual size of the glyphs in a font.</span>
<span class="line-modified">2533    *</span>
<span class="line-modified">2534    *   FT_SIZE_REQUEST_TYPE_REAL_DIM ::</span>
<span class="line-modified">2535    *     The real dimension.  The sum of the `ascender` and (minus of) the</span>
<span class="line-modified">2536    *     `descender` fields of @FT_FaceRec is used to determine both scaling</span>
<span class="line-modified">2537    *     values.</span>
<span class="line-modified">2538    *</span>
<span class="line-modified">2539    *   FT_SIZE_REQUEST_TYPE_BBOX ::</span>
<span class="line-modified">2540    *     The font bounding box.  The width and height of the `bbox` field of</span>
<span class="line-modified">2541    *     @FT_FaceRec are used to determine the horizontal and vertical</span>
<span class="line-modified">2542    *     scaling value, respectively.</span>
<span class="line-modified">2543    *</span>
<span class="line-modified">2544    *   FT_SIZE_REQUEST_TYPE_CELL ::</span>
<span class="line-modified">2545    *     The `max_advance_width` field of @FT_FaceRec is used to determine</span>
<span class="line-modified">2546    *     the horizontal scaling value; the vertical scaling value is</span>
<span class="line-modified">2547    *     determined the same way as @FT_SIZE_REQUEST_TYPE_REAL_DIM does.</span>
<span class="line-modified">2548    *     Finally, both scaling values are set to the smaller one.  This type</span>
<span class="line-modified">2549    *     is useful if you want to specify the font size for, say, a window of</span>
<span class="line-modified">2550    *     a given dimension and 80x24 cells.</span>
<span class="line-modified">2551    *</span>
<span class="line-modified">2552    *   FT_SIZE_REQUEST_TYPE_SCALES ::</span>
<span class="line-modified">2553    *     Specify the scaling values directly.</span>
<span class="line-modified">2554    *</span>
<span class="line-modified">2555    * @note:</span>
<span class="line-modified">2556    *   The above descriptions only apply to scalable formats.  For bitmap</span>
<span class="line-modified">2557    *   formats, the behaviour is up to the driver.</span>
<span class="line-modified">2558    *</span>
<span class="line-modified">2559    *   See the note section of @FT_Size_Metrics if you wonder how size</span>
<span class="line-modified">2560    *   requesting relates to scaling values.</span>
<span class="line-modified">2561    */</span>


2562   typedef enum  FT_Size_Request_Type_
2563   {
2564     FT_SIZE_REQUEST_TYPE_NOMINAL,
2565     FT_SIZE_REQUEST_TYPE_REAL_DIM,
2566     FT_SIZE_REQUEST_TYPE_BBOX,
2567     FT_SIZE_REQUEST_TYPE_CELL,
2568     FT_SIZE_REQUEST_TYPE_SCALES,
2569 
2570     FT_SIZE_REQUEST_TYPE_MAX
2571 
2572   } FT_Size_Request_Type;
2573 
2574 
<span class="line-modified">2575   /**************************************************************************</span>
<span class="line-modified">2576    *</span>
<span class="line-modified">2577    * @struct:</span>
<span class="line-modified">2578    *   FT_Size_RequestRec</span>
<span class="line-modified">2579    *</span>
<span class="line-modified">2580    * @description:</span>
<span class="line-modified">2581    *   A structure to model a size request.</span>
<span class="line-modified">2582    *</span>
<span class="line-modified">2583    * @fields:</span>
<span class="line-modified">2584    *   type ::</span>
<span class="line-modified">2585    *     See @FT_Size_Request_Type.</span>
<span class="line-modified">2586    *</span>
<span class="line-modified">2587    *   width ::</span>
<span class="line-modified">2588    *     The desired width, given as a 26.6 fractional point value (with 72pt</span>
<span class="line-modified">2589    *     = 1in).</span>
<span class="line-modified">2590    *</span>
<span class="line-modified">2591    *   height ::</span>
<span class="line-modified">2592    *     The desired height, given as a 26.6 fractional point value (with</span>
<span class="line-modified">2593    *     72pt = 1in).</span>
<span class="line-modified">2594    *</span>
<span class="line-modified">2595    *   horiResolution ::</span>
<span class="line-modified">2596    *     The horizontal resolution (dpi, i.e., pixels per inch).  If set to</span>
<span class="line-modified">2597    *     zero, `width` is treated as a 26.6 fractional **pixel** value, which</span>
<span class="line-modified">2598    *     gets internally rounded to an integer.</span>
<span class="line-modified">2599    *</span>
<span class="line-modified">2600    *   vertResolution ::</span>
<span class="line-modified">2601    *     The vertical resolution (dpi, i.e., pixels per inch).  If set to</span>
<span class="line-modified">2602    *     zero, `height` is treated as a 26.6 fractional **pixel** value,</span>
<span class="line-modified">2603    *     which gets internally rounded to an integer.</span>
<span class="line-modified">2604    *</span>
<span class="line-modified">2605    * @note:</span>
<span class="line-modified">2606    *   If `width` is zero, the horizontal scaling value is set equal to the</span>
<span class="line-modified">2607    *   vertical scaling value, and vice versa.</span>
<span class="line-modified">2608    *</span>
<span class="line-modified">2609    *   If `type` is `FT_SIZE_REQUEST_TYPE_SCALES`, `width` and `height` are</span>
<span class="line-modified">2610    *   interpreted directly as 16.16 fractional scaling values, without any</span>
<span class="line-added">2611    *   further modification, and both `horiResolution` and `vertResolution`</span>
<span class="line-added">2612    *   are ignored.</span>
<span class="line-added">2613    */</span>
2614   typedef struct  FT_Size_RequestRec_
2615   {
2616     FT_Size_Request_Type  type;
2617     FT_Long               width;
2618     FT_Long               height;
2619     FT_UInt               horiResolution;
2620     FT_UInt               vertResolution;
2621 
2622   } FT_Size_RequestRec;
2623 
2624 
<span class="line-modified">2625   /**************************************************************************</span>
<span class="line-modified">2626    *</span>
<span class="line-modified">2627    * @struct:</span>
<span class="line-modified">2628    *   FT_Size_Request</span>
<span class="line-modified">2629    *</span>
<span class="line-modified">2630    * @description:</span>
<span class="line-modified">2631    *   A handle to a size request structure.</span>
<span class="line-modified">2632    */</span>
2633   typedef struct FT_Size_RequestRec_  *FT_Size_Request;
2634 
2635 
<span class="line-modified">2636   /**************************************************************************</span>
<span class="line-modified">2637    *</span>
<span class="line-modified">2638    * @function:</span>
<span class="line-modified">2639    *   FT_Request_Size</span>
<span class="line-modified">2640    *</span>
<span class="line-modified">2641    * @description:</span>
<span class="line-modified">2642    *   Resize the scale of the active @FT_Size object in a face.</span>
<span class="line-modified">2643    *</span>
<span class="line-modified">2644    * @inout:</span>
<span class="line-modified">2645    *   face ::</span>
<span class="line-modified">2646    *     A handle to a target face object.</span>
<span class="line-modified">2647    *</span>
<span class="line-modified">2648    * @input:</span>
<span class="line-modified">2649    *   req ::</span>
<span class="line-modified">2650    *     A pointer to a @FT_Size_RequestRec.</span>
<span class="line-modified">2651    *</span>
<span class="line-modified">2652    * @return:</span>
<span class="line-modified">2653    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2654    *</span>
<span class="line-modified">2655    * @note:</span>
<span class="line-modified">2656    *   Although drivers may select the bitmap strike matching the request,</span>
<span class="line-modified">2657    *   you should not rely on this if you intend to select a particular</span>
<span class="line-modified">2658    *   bitmap strike.  Use @FT_Select_Size instead in that case.</span>
<span class="line-modified">2659    *</span>
<span class="line-modified">2660    *   The relation between the requested size and the resulting glyph size</span>
<span class="line-modified">2661    *   is dependent entirely on how the size is defined in the source face.</span>
<span class="line-modified">2662    *   The font designer chooses the final size of each glyph relative to</span>
<span class="line-modified">2663    *   this size.  For more information refer to</span>
<span class="line-modified">2664    *   &#39;https://www.freetype.org/freetype2/docs/glyphs/glyphs-2.html&#39;.</span>
<span class="line-modified">2665    *</span>
<span class="line-modified">2666    *   Contrary to @FT_Set_Char_Size, this function doesn&#39;t have special code</span>
<span class="line-modified">2667    *   to normalize zero-valued widths, heights, or resolutions (which lead</span>
<span class="line-modified">2668    *   to errors in most cases).</span>
<span class="line-modified">2669    *</span>
<span class="line-modified">2670    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">2671    */</span>
2672   FT_EXPORT( FT_Error )
2673   FT_Request_Size( FT_Face          face,
2674                    FT_Size_Request  req );
2675 
2676 
<span class="line-modified">2677   /**************************************************************************</span>
<span class="line-modified">2678    *</span>
<span class="line-modified">2679    * @function:</span>
<span class="line-modified">2680    *   FT_Set_Char_Size</span>
<span class="line-modified">2681    *</span>
<span class="line-modified">2682    * @description:</span>
<span class="line-modified">2683    *   Call @FT_Request_Size to request the nominal size (in points).</span>
<span class="line-modified">2684    *</span>
<span class="line-modified">2685    * @inout:</span>
<span class="line-modified">2686    *   face ::</span>
<span class="line-modified">2687    *     A handle to a target face object.</span>
<span class="line-modified">2688    *</span>
<span class="line-modified">2689    * @input:</span>
<span class="line-modified">2690    *   char_width ::</span>
<span class="line-modified">2691    *     The nominal width, in 26.6 fractional points.</span>
<span class="line-modified">2692    *</span>
<span class="line-modified">2693    *   char_height ::</span>
<span class="line-modified">2694    *     The nominal height, in 26.6 fractional points.</span>
<span class="line-modified">2695    *</span>
<span class="line-modified">2696    *   horz_resolution ::</span>
<span class="line-modified">2697    *     The horizontal resolution in dpi.</span>
<span class="line-modified">2698    *</span>
<span class="line-modified">2699    *   vert_resolution ::</span>
<span class="line-modified">2700    *     The vertical resolution in dpi.</span>
<span class="line-modified">2701    *</span>
<span class="line-modified">2702    * @return:</span>
<span class="line-modified">2703    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2704    *</span>
<span class="line-modified">2705    * @note:</span>
<span class="line-modified">2706    *   While this function allows fractional points as input values, the</span>
<span class="line-modified">2707    *   resulting ppem value for the given resolution is always rounded to the</span>
<span class="line-modified">2708    *   nearest integer.</span>
<span class="line-modified">2709    *</span>
<span class="line-modified">2710    *   If either the character width or height is zero, it is set equal to</span>
<span class="line-modified">2711    *   the other value.</span>
<span class="line-modified">2712    *</span>
<span class="line-modified">2713    *   If either the horizontal or vertical resolution is zero, it is set</span>
<span class="line-modified">2714    *   equal to the other value.</span>
<span class="line-modified">2715    *</span>
<span class="line-added">2716    *   A character width or height smaller than 1pt is set to 1pt; if both</span>
<span class="line-added">2717    *   resolution values are zero, they are set to 72dpi.</span>
<span class="line-added">2718    *</span>
<span class="line-added">2719    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">2720    */</span>
2721   FT_EXPORT( FT_Error )
2722   FT_Set_Char_Size( FT_Face     face,
2723                     FT_F26Dot6  char_width,
2724                     FT_F26Dot6  char_height,
2725                     FT_UInt     horz_resolution,
2726                     FT_UInt     vert_resolution );
2727 
2728 
<span class="line-modified">2729   /**************************************************************************</span>
<span class="line-modified">2730    *</span>
<span class="line-modified">2731    * @function:</span>
<span class="line-modified">2732    *   FT_Set_Pixel_Sizes</span>
<span class="line-modified">2733    *</span>
<span class="line-modified">2734    * @description:</span>
<span class="line-modified">2735    *   Call @FT_Request_Size to request the nominal size (in pixels).</span>
<span class="line-modified">2736    *</span>
<span class="line-modified">2737    * @inout:</span>
<span class="line-modified">2738    *   face ::</span>
<span class="line-modified">2739    *     A handle to the target face object.</span>
<span class="line-modified">2740    *</span>
<span class="line-modified">2741    * @input:</span>
<span class="line-modified">2742    *   pixel_width ::</span>
<span class="line-modified">2743    *     The nominal width, in pixels.</span>
<span class="line-modified">2744    *</span>
<span class="line-modified">2745    *   pixel_height ::</span>
<span class="line-modified">2746    *     The nominal height, in pixels.</span>
<span class="line-modified">2747    *</span>
<span class="line-modified">2748    * @return:</span>
<span class="line-modified">2749    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2750    *</span>
<span class="line-modified">2751    * @note:</span>
<span class="line-modified">2752    *   You should not rely on the resulting glyphs matching or being</span>
<span class="line-modified">2753    *   constrained to this pixel size.  Refer to @FT_Request_Size to</span>
<span class="line-modified">2754    *   understand how requested sizes relate to actual sizes.</span>
<span class="line-added">2755    *</span>
<span class="line-added">2756    *   Don&#39;t use this function if you are using the FreeType cache API.</span>
<span class="line-added">2757    */</span>
2758   FT_EXPORT( FT_Error )
2759   FT_Set_Pixel_Sizes( FT_Face  face,
2760                       FT_UInt  pixel_width,
2761                       FT_UInt  pixel_height );
2762 
2763 
<span class="line-modified">2764   /**************************************************************************</span>
<span class="line-modified">2765    *</span>
<span class="line-modified">2766    * @function:</span>
<span class="line-modified">2767    *   FT_Load_Glyph</span>
<span class="line-modified">2768    *</span>
<span class="line-modified">2769    * @description:</span>
<span class="line-modified">2770    *   Load a glyph into the glyph slot of a face object.</span>
<span class="line-modified">2771    *</span>
<span class="line-modified">2772    * @inout:</span>
<span class="line-modified">2773    *   face ::</span>
<span class="line-modified">2774    *     A handle to the target face object where the glyph is loaded.</span>
<span class="line-modified">2775    *</span>
<span class="line-modified">2776    * @input:</span>
<span class="line-modified">2777    *   glyph_index ::</span>
<span class="line-modified">2778    *     The index of the glyph in the font file.  For CID-keyed fonts</span>
<span class="line-modified">2779    *     (either in PS or in CFF format) this argument specifies the CID</span>
<span class="line-modified">2780    *     value.</span>
<span class="line-modified">2781    *</span>
<span class="line-modified">2782    *   load_flags ::</span>
<span class="line-modified">2783    *     A flag indicating what to load for this glyph.  The @FT_LOAD_XXX</span>
<span class="line-modified">2784    *     constants can be used to control the glyph loading process (e.g.,</span>
<span class="line-modified">2785    *     whether the outline should be scaled, whether to load bitmaps or</span>
<span class="line-modified">2786    *     not, whether to hint the outline, etc).</span>
<span class="line-modified">2787    *</span>
<span class="line-modified">2788    * @return:</span>
<span class="line-modified">2789    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2790    *</span>
<span class="line-modified">2791    * @note:</span>
<span class="line-modified">2792    *   The loaded glyph may be transformed.  See @FT_Set_Transform for the</span>
<span class="line-modified">2793    *   details.</span>
<span class="line-modified">2794    *</span>
<span class="line-modified">2795    *   For subsetted CID-keyed fonts, `FT_Err_Invalid_Argument` is returned</span>
<span class="line-modified">2796    *   for invalid CID values (this is, for CID values that don&#39;t have a</span>
<span class="line-modified">2797    *   corresponding glyph in the font).  See the discussion of the</span>
<span class="line-modified">2798    *   @FT_FACE_FLAG_CID_KEYED flag for more details.</span>
<span class="line-modified">2799    *</span>
<span class="line-modified">2800    *   If you receive `FT_Err_Glyph_Too_Big`, try getting the glyph outline</span>
<span class="line-modified">2801    *   at EM size, then scale it manually and fill it as a graphics</span>
<span class="line-modified">2802    *   operation.</span>
<span class="line-added">2803    */</span>
2804   FT_EXPORT( FT_Error )
2805   FT_Load_Glyph( FT_Face   face,
2806                  FT_UInt   glyph_index,
2807                  FT_Int32  load_flags );
2808 
2809 
<span class="line-modified">2810   /**************************************************************************</span>
<span class="line-modified">2811    *</span>
<span class="line-modified">2812    * @function:</span>
<span class="line-modified">2813    *   FT_Load_Char</span>
<span class="line-modified">2814    *</span>
<span class="line-modified">2815    * @description:</span>
<span class="line-modified">2816    *   Load a glyph into the glyph slot of a face object, accessed by its</span>
<span class="line-modified">2817    *   character code.</span>
<span class="line-modified">2818    *</span>
<span class="line-modified">2819    * @inout:</span>
<span class="line-modified">2820    *   face ::</span>
<span class="line-modified">2821    *     A handle to a target face object where the glyph is loaded.</span>
<span class="line-modified">2822    *</span>
<span class="line-modified">2823    * @input:</span>
<span class="line-modified">2824    *   char_code ::</span>
<span class="line-modified">2825    *     The glyph&#39;s character code, according to the current charmap used in</span>
<span class="line-modified">2826    *     the face.</span>
<span class="line-modified">2827    *</span>
<span class="line-modified">2828    *   load_flags ::</span>
<span class="line-modified">2829    *     A flag indicating what to load for this glyph.  The @FT_LOAD_XXX</span>
<span class="line-modified">2830    *     constants can be used to control the glyph loading process (e.g.,</span>
<span class="line-modified">2831    *     whether the outline should be scaled, whether to load bitmaps or</span>
<span class="line-modified">2832    *     not, whether to hint the outline, etc).</span>
<span class="line-modified">2833    *</span>
<span class="line-modified">2834    * @return:</span>
<span class="line-modified">2835    *   FreeType error code.  0~means success.</span>
<span class="line-modified">2836    *</span>
<span class="line-modified">2837    * @note:</span>
<span class="line-modified">2838    *   This function simply calls @FT_Get_Char_Index and @FT_Load_Glyph.</span>
<span class="line-modified">2839    *</span>
<span class="line-modified">2840    *   Many fonts contain glyphs that can&#39;t be loaded by this function since</span>
<span class="line-modified">2841    *   its glyph indices are not listed in any of the font&#39;s charmaps.</span>
<span class="line-modified">2842    *</span>
<span class="line-modified">2843    *   If no active cmap is set up (i.e., `face-&gt;charmap` is zero), the call</span>
<span class="line-modified">2844    *   to @FT_Get_Char_Index is omitted, and the function behaves identically</span>
<span class="line-modified">2845    *   to @FT_Load_Glyph.</span>
<span class="line-modified">2846    */</span>
2847   FT_EXPORT( FT_Error )
2848   FT_Load_Char( FT_Face   face,
2849                 FT_ULong  char_code,
2850                 FT_Int32  load_flags );
2851 
2852 
<span class="line-modified">2853   /**************************************************************************</span>
2854    *
2855    * @enum:
2856    *   FT_LOAD_XXX
2857    *
2858    * @description:
<span class="line-modified">2859    *   A list of bit field constants for @FT_Load_Glyph to indicate what kind</span>
<span class="line-modified">2860    *   of operations to perform during glyph loading.</span>
2861    *
2862    * @values:
2863    *   FT_LOAD_DEFAULT ::
2864    *     Corresponding to~0, this value is used as the default glyph load
2865    *     operation.  In this case, the following happens:
2866    *
2867    *     1. FreeType looks for a bitmap for the glyph corresponding to the
<span class="line-modified">2868    *     face&#39;s current size.  If one is found, the function returns.  The</span>
<span class="line-modified">2869    *     bitmap data can be accessed from the glyph slot (see note below).</span>

2870    *
2871    *     2. If no embedded bitmap is searched for or found, FreeType looks
<span class="line-modified">2872    *     for a scalable outline.  If one is found, it is loaded from the font</span>
<span class="line-modified">2873    *     file, scaled to device pixels, then &#39;hinted&#39; to the pixel grid in</span>
<span class="line-modified">2874    *     order to optimize it.  The outline data can be accessed from the</span>
<span class="line-modified">2875    *     glyph slot (see note below).</span>
2876    *
2877    *     Note that by default the glyph loader doesn&#39;t render outlines into
2878    *     bitmaps.  The following flags are used to modify this default
2879    *     behaviour to more specific and useful cases.
2880    *
2881    *   FT_LOAD_NO_SCALE ::
2882    *     Don&#39;t scale the loaded outline glyph but keep it in font units.
2883    *
2884    *     This flag implies @FT_LOAD_NO_HINTING and @FT_LOAD_NO_BITMAP, and
2885    *     unsets @FT_LOAD_RENDER.
2886    *
<span class="line-modified">2887    *     If the font is &#39;tricky&#39; (see @FT_FACE_FLAG_TRICKY for more), using</span>
<span class="line-modified">2888    *     `FT_LOAD_NO_SCALE` usually yields meaningless outlines because the</span>
2889    *     subglyphs must be scaled and positioned with hinting instructions.
<span class="line-modified">2890    *     This can be solved by loading the font without `FT_LOAD_NO_SCALE`</span>
<span class="line-modified">2891    *     and setting the character size to `font-&gt;units_per_EM`.</span>
2892    *
2893    *   FT_LOAD_NO_HINTING ::
<span class="line-modified">2894    *     Disable hinting.  This generally generates &#39;blurrier&#39; bitmap glyphs</span>
2895    *     when the glyph are rendered in any of the anti-aliased modes.  See
2896    *     also the note below.
2897    *
2898    *     This flag is implied by @FT_LOAD_NO_SCALE.
2899    *
2900    *   FT_LOAD_RENDER ::
2901    *     Call @FT_Render_Glyph after the glyph is loaded.  By default, the
2902    *     glyph is rendered in @FT_RENDER_MODE_NORMAL mode.  This can be
2903    *     overridden by @FT_LOAD_TARGET_XXX or @FT_LOAD_MONOCHROME.
2904    *
2905    *     This flag is unset by @FT_LOAD_NO_SCALE.
2906    *
2907    *   FT_LOAD_NO_BITMAP ::
2908    *     Ignore bitmap strikes when loading.  Bitmap-only fonts ignore this
2909    *     flag.
2910    *
2911    *     @FT_LOAD_NO_SCALE always sets this flag.
2912    *
2913    *   FT_LOAD_VERTICAL_LAYOUT ::
2914    *     Load the glyph for vertical text layout.  In particular, the
<span class="line-modified">2915    *     `advance` value in the @FT_GlyphSlotRec structure is set to the</span>
<span class="line-modified">2916    *     `vertAdvance` value of the `metrics` field.</span>
2917    *
<span class="line-modified">2918    *     In case @FT_HAS_VERTICAL doesn&#39;t return true, you shouldn&#39;t use this</span>
<span class="line-modified">2919    *     flag currently.  Reason is that in this case vertical metrics get</span>
<span class="line-modified">2920    *     synthesized, and those values are not always consistent across</span>
2921    *     various font formats.
2922    *
2923    *   FT_LOAD_FORCE_AUTOHINT ::
<span class="line-modified">2924    *     Prefer the auto-hinter over the font&#39;s native hinter.  See also the</span>
<span class="line-modified">2925    *     note below.</span>
2926    *
2927    *   FT_LOAD_PEDANTIC ::
2928    *     Make the font driver perform pedantic verifications during glyph
<span class="line-modified">2929    *     loading and hinting.  This is mostly used to detect broken glyphs in</span>
<span class="line-modified">2930    *     fonts.  By default, FreeType tries to handle broken fonts also.</span>
2931    *
2932    *     In particular, errors from the TrueType bytecode engine are not
<span class="line-modified">2933    *     passed to the application if this flag is not set; this might result</span>
<span class="line-modified">2934    *     in partially hinted or distorted glyphs in case a glyph&#39;s bytecode</span>
<span class="line-modified">2935    *     is buggy.</span>
2936    *
2937    *   FT_LOAD_NO_RECURSE ::
<span class="line-modified">2938    *     Don&#39;t load composite glyphs recursively.  Instead, the font driver</span>
<span class="line-modified">2939    *     fills the `num_subglyph` and `subglyphs` values of the glyph slot;</span>
<span class="line-modified">2940    *     it also sets `glyph-&gt;format` to @FT_GLYPH_FORMAT_COMPOSITE.  The</span>
<span class="line-modified">2941    *     description of subglyphs can then be accessed with</span>
<span class="line-modified">2942    *     @FT_Get_SubGlyph_Info.</span>
<span class="line-added">2943    *</span>
<span class="line-added">2944    *     Don&#39;t use this flag for retrieving metrics information since some</span>
<span class="line-added">2945    *     font drivers only return rudimentary data.</span>
2946    *
2947    *     This flag implies @FT_LOAD_NO_SCALE and @FT_LOAD_IGNORE_TRANSFORM.
2948    *
2949    *   FT_LOAD_IGNORE_TRANSFORM ::
2950    *     Ignore the transform matrix set by @FT_Set_Transform.
2951    *
2952    *   FT_LOAD_MONOCHROME ::
2953    *     This flag is used with @FT_LOAD_RENDER to indicate that you want to
2954    *     render an outline glyph to a 1-bit monochrome bitmap glyph, with
2955    *     8~pixels packed into each byte of the bitmap data.
2956    *
2957    *     Note that this has no effect on the hinting algorithm used.  You
2958    *     should rather use @FT_LOAD_TARGET_MONO so that the
2959    *     monochrome-optimized hinting algorithm is used.
2960    *
2961    *   FT_LOAD_LINEAR_DESIGN ::
<span class="line-modified">2962    *     Keep `linearHoriAdvance` and `linearVertAdvance` fields of</span>
<span class="line-modified">2963    *     @FT_GlyphSlotRec in font units.  See @FT_GlyphSlotRec for details.</span>

2964    *
2965    *   FT_LOAD_NO_AUTOHINT ::
2966    *     Disable the auto-hinter.  See also the note below.
2967    *
2968    *   FT_LOAD_COLOR ::
<span class="line-added">2969    *     Load colored glyphs.  There are slight differences depending on the</span>
<span class="line-added">2970    *     font format.</span>
<span class="line-added">2971    *</span>
2972    *     [Since 2.5] Load embedded color bitmap images.  The resulting color
<span class="line-modified">2973    *     bitmaps, if available, will have the @FT_PIXEL_MODE_BGRA format,</span>
<span class="line-modified">2974    *     with pre-multiplied color channels.  If the flag is not set and</span>
<span class="line-modified">2975    *     color bitmaps are found, they are converted to 256-level gray</span>
<span class="line-modified">2976    *     bitmaps, using the @FT_PIXEL_MODE_GRAY format.</span>
<span class="line-added">2977    *</span>
<span class="line-added">2978    *     [Since 2.10, experimental] If the glyph index contains an entry in</span>
<span class="line-added">2979    *     the face&#39;s &#39;COLR&#39; table with a &#39;CPAL&#39; palette table (as defined in</span>
<span class="line-added">2980    *     the OpenType specification), make @FT_Render_Glyph provide a default</span>
<span class="line-added">2981    *     blending of the color glyph layers associated with the glyph index,</span>
<span class="line-added">2982    *     using the same bitmap format as embedded color bitmap images.  This</span>
<span class="line-added">2983    *     is mainly for convenience; for full control of color layers use</span>
<span class="line-added">2984    *     @FT_Get_Color_Glyph_Layer and FreeType&#39;s color functions like</span>
<span class="line-added">2985    *     @FT_Palette_Select instead of setting @FT_LOAD_COLOR for rendering</span>
<span class="line-added">2986    *     so that the client application can handle blending by itself.</span>
2987    *
2988    *   FT_LOAD_COMPUTE_METRICS ::
<span class="line-modified">2989    *     [Since 2.6.1] Compute glyph metrics from the glyph data, without the</span>
<span class="line-modified">2990    *     use of bundled metrics tables (for example, the &#39;hdmx&#39; table in</span>
2991    *     TrueType fonts).  This flag is mainly used by font validating or
2992    *     font editing applications, which need to ignore, verify, or edit
2993    *     those tables.
2994    *
2995    *     Currently, this flag is only implemented for TrueType fonts.
2996    *
2997    *   FT_LOAD_BITMAP_METRICS_ONLY ::
2998    *     [Since 2.7.1] Request loading of the metrics and bitmap image
<span class="line-modified">2999    *     information of a (possibly embedded) bitmap glyph without allocating</span>
<span class="line-modified">3000    *     or copying the bitmap image data itself.  No effect if the target</span>
<span class="line-modified">3001    *     glyph is not a bitmap image.</span>
3002    *
3003    *     This flag unsets @FT_LOAD_RENDER.
3004    *
3005    *   FT_LOAD_CROP_BITMAP ::
3006    *     Ignored.  Deprecated.
3007    *
3008    *   FT_LOAD_IGNORE_GLOBAL_ADVANCE_WIDTH ::
3009    *     Ignored.  Deprecated.
3010    *
3011    * @note:
3012    *   By default, hinting is enabled and the font&#39;s native hinter (see
3013    *   @FT_FACE_FLAG_HINTER) is preferred over the auto-hinter.  You can
3014    *   disable hinting by setting @FT_LOAD_NO_HINTING or change the
3015    *   precedence by setting @FT_LOAD_FORCE_AUTOHINT.  You can also set
<span class="line-modified">3016    *   @FT_LOAD_NO_AUTOHINT in case you don&#39;t want the auto-hinter to be used</span>
<span class="line-modified">3017    *   at all.</span>
3018    *
3019    *   See the description of @FT_FACE_FLAG_TRICKY for a special exception
3020    *   (affecting only a handful of Asian fonts).
3021    *
3022    *   Besides deciding which hinter to use, you can also decide which
3023    *   hinting algorithm to use.  See @FT_LOAD_TARGET_XXX for details.
3024    *
3025    *   Note that the auto-hinter needs a valid Unicode cmap (either a native
3026    *   one or synthesized by FreeType) for producing correct results.  If a
3027    *   font provides an incorrect mapping (for example, assigning the
<span class="line-modified">3028    *   character code U+005A, LATIN CAPITAL LETTER~Z, to a glyph depicting a</span>
3029    *   mathematical integral sign), the auto-hinter might produce useless
3030    *   results.
3031    *
3032    */
3033 #define FT_LOAD_DEFAULT                      0x0
3034 #define FT_LOAD_NO_SCALE                     ( 1L &lt;&lt; 0 )
3035 #define FT_LOAD_NO_HINTING                   ( 1L &lt;&lt; 1 )
3036 #define FT_LOAD_RENDER                       ( 1L &lt;&lt; 2 )
3037 #define FT_LOAD_NO_BITMAP                    ( 1L &lt;&lt; 3 )
3038 #define FT_LOAD_VERTICAL_LAYOUT              ( 1L &lt;&lt; 4 )
3039 #define FT_LOAD_FORCE_AUTOHINT               ( 1L &lt;&lt; 5 )
3040 #define FT_LOAD_CROP_BITMAP                  ( 1L &lt;&lt; 6 )
3041 #define FT_LOAD_PEDANTIC                     ( 1L &lt;&lt; 7 )
3042 #define FT_LOAD_IGNORE_GLOBAL_ADVANCE_WIDTH  ( 1L &lt;&lt; 9 )
3043 #define FT_LOAD_NO_RECURSE                   ( 1L &lt;&lt; 10 )
3044 #define FT_LOAD_IGNORE_TRANSFORM             ( 1L &lt;&lt; 11 )
3045 #define FT_LOAD_MONOCHROME                   ( 1L &lt;&lt; 12 )
3046 #define FT_LOAD_LINEAR_DESIGN                ( 1L &lt;&lt; 13 )
3047 #define FT_LOAD_NO_AUTOHINT                  ( 1L &lt;&lt; 15 )
<span class="line-modified">3048   /* Bits 16-19 are used by `FT_LOAD_TARGET_` */</span>
3049 #define FT_LOAD_COLOR                        ( 1L &lt;&lt; 20 )
3050 #define FT_LOAD_COMPUTE_METRICS              ( 1L &lt;&lt; 21 )
3051 #define FT_LOAD_BITMAP_METRICS_ONLY          ( 1L &lt;&lt; 22 )
3052 
3053   /* */
3054 
3055   /* used internally only by certain font drivers */
3056 #define FT_LOAD_ADVANCE_ONLY                 ( 1L &lt;&lt; 8 )
3057 #define FT_LOAD_SBITS_ONLY                   ( 1L &lt;&lt; 14 )
3058 
3059 
3060   /**************************************************************************
3061    *
3062    * @enum:
3063    *   FT_LOAD_TARGET_XXX
3064    *
3065    * @description:
3066    *   A list of values to select a specific hinting algorithm for the
<span class="line-modified">3067    *   hinter.  You should OR one of these values to your `load_flags` when</span>
<span class="line-modified">3068    *   calling @FT_Load_Glyph.</span>
3069    *
<span class="line-modified">3070    *   Note that a font&#39;s native hinters may ignore the hinting algorithm you</span>
<span class="line-modified">3071    *   have specified (e.g., the TrueType bytecode interpreter).  You can set</span>
<span class="line-modified">3072    *   @FT_LOAD_FORCE_AUTOHINT to ensure that the auto-hinter is used.</span>

3073    *
3074    * @values:
3075    *   FT_LOAD_TARGET_NORMAL ::
3076    *     The default hinting algorithm, optimized for standard gray-level
<span class="line-modified">3077    *     rendering.  For monochrome output, use @FT_LOAD_TARGET_MONO instead.</span>

3078    *
3079    *   FT_LOAD_TARGET_LIGHT ::
3080    *     A lighter hinting algorithm for gray-level modes.  Many generated
3081    *     glyphs are fuzzier but better resemble their original shape.  This
3082    *     is achieved by snapping glyphs to the pixel grid only vertically
3083    *     (Y-axis), as is done by FreeType&#39;s new CFF engine or Microsoft&#39;s
3084    *     ClearType font renderer.  This preserves inter-glyph spacing in
3085    *     horizontal text.  The snapping is done either by the native font
3086    *     driver, if the driver itself and the font support it, or by the
3087    *     auto-hinter.
3088    *
3089    *     Advance widths are rounded to integer values; however, using the
<span class="line-modified">3090    *     `lsb_delta` and `rsb_delta` fields of @FT_GlyphSlotRec, it is</span>
3091    *     possible to get fractional advance widths for subpixel positioning
3092    *     (which is recommended to use).
3093    *
<span class="line-modified">3094    *     If configuration option `AF_CONFIG_OPTION_TT_SIZE_METRICS` is</span>
<span class="line-modified">3095    *     active, TrueType-like metrics are used to make this mode behave</span>
<span class="line-modified">3096    *     similarly as in unpatched FreeType versions between 2.4.6 and 2.7.1</span>
3097    *     (inclusive).
3098    *
3099    *   FT_LOAD_TARGET_MONO ::
3100    *     Strong hinting algorithm that should only be used for monochrome
3101    *     output.  The result is probably unpleasant if the glyph is rendered
3102    *     in non-monochrome modes.
3103    *
<span class="line-added">3104    *     Note that for outline fonts only the TrueType font driver has proper</span>
<span class="line-added">3105    *     monochrome hinting support, provided the TTFs contain hints for B/W</span>
<span class="line-added">3106    *     rendering (which most fonts no longer provide).  If these conditions</span>
<span class="line-added">3107    *     are not met it is very likely that you get ugly results at smaller</span>
<span class="line-added">3108    *     sizes.</span>
<span class="line-added">3109    *</span>
3110    *   FT_LOAD_TARGET_LCD ::
3111    *     A variant of @FT_LOAD_TARGET_LIGHT optimized for horizontally
3112    *     decimated LCD displays.
3113    *
3114    *   FT_LOAD_TARGET_LCD_V ::
3115    *     A variant of @FT_LOAD_TARGET_NORMAL optimized for vertically
3116    *     decimated LCD displays.
3117    *
3118    * @note:
<span class="line-modified">3119    *   You should use only _one_ of the `FT_LOAD_TARGET_XXX` values in your</span>
<span class="line-modified">3120    *   `load_flags`.  They can&#39;t be ORed.</span>
3121    *
3122    *   If @FT_LOAD_RENDER is also set, the glyph is rendered in the
3123    *   corresponding mode (i.e., the mode that matches the used algorithm
<span class="line-modified">3124    *   best).  An exception is `FT_LOAD_TARGET_MONO` since it implies</span>
3125    *   @FT_LOAD_MONOCHROME.
3126    *
3127    *   You can use a hinting algorithm that doesn&#39;t correspond to the same
<span class="line-modified">3128    *   rendering mode.  As an example, it is possible to use the &#39;light&#39;</span>
3129    *   hinting algorithm and have the results rendered in horizontal LCD
3130    *   pixel mode, with code like
3131    *
<span class="line-modified">3132    *   ```</span>
<span class="line-modified">3133    *     FT_Load_Glyph( face, glyph_index,</span>
<span class="line-modified">3134    *                    load_flags | FT_LOAD_TARGET_LIGHT );</span>
3135    *
<span class="line-modified">3136    *     FT_Render_Glyph( face-&gt;glyph, FT_RENDER_MODE_LCD );</span>
<span class="line-modified">3137    *   ```</span>
3138    *
3139    *   In general, you should stick with one rendering mode.  For example,
3140    *   switching between @FT_LOAD_TARGET_NORMAL and @FT_LOAD_TARGET_MONO
3141    *   enforces a lot of recomputation for TrueType fonts, which is slow.
3142    *   Another reason is caching: Selecting a different mode usually causes
3143    *   changes in both the outlines and the rasterized bitmaps; it is thus
3144    *   necessary to empty the cache after a mode switch to avoid false hits.
3145    *
3146    */
3147 #define FT_LOAD_TARGET_( x )   ( (FT_Int32)( (x) &amp; 15 ) &lt;&lt; 16 )
3148 
3149 #define FT_LOAD_TARGET_NORMAL  FT_LOAD_TARGET_( FT_RENDER_MODE_NORMAL )
3150 #define FT_LOAD_TARGET_LIGHT   FT_LOAD_TARGET_( FT_RENDER_MODE_LIGHT  )
3151 #define FT_LOAD_TARGET_MONO    FT_LOAD_TARGET_( FT_RENDER_MODE_MONO   )
3152 #define FT_LOAD_TARGET_LCD     FT_LOAD_TARGET_( FT_RENDER_MODE_LCD    )
3153 #define FT_LOAD_TARGET_LCD_V   FT_LOAD_TARGET_( FT_RENDER_MODE_LCD_V  )
3154 
3155 
3156   /**************************************************************************
3157    *
3158    * @macro:
3159    *   FT_LOAD_TARGET_MODE
3160    *
3161    * @description:
3162    *   Return the @FT_Render_Mode corresponding to a given
3163    *   @FT_LOAD_TARGET_XXX value.
3164    *
3165    */
3166 #define FT_LOAD_TARGET_MODE( x )  ( (FT_Render_Mode)( ( (x) &gt;&gt; 16 ) &amp; 15 ) )
3167 
3168 
<span class="line-modified">3169   /**************************************************************************</span>
<span class="line-modified">3170    *</span>
<span class="line-modified">3171    * @function:</span>
<span class="line-modified">3172    *   FT_Set_Transform</span>
<span class="line-modified">3173    *</span>
<span class="line-modified">3174    * @description:</span>
<span class="line-modified">3175    *   Set the transformation that is applied to glyph images when they are</span>
<span class="line-modified">3176    *   loaded into a glyph slot through @FT_Load_Glyph.</span>
<span class="line-modified">3177    *</span>
<span class="line-modified">3178    * @inout:</span>
<span class="line-modified">3179    *   face ::</span>
<span class="line-modified">3180    *     A handle to the source face object.</span>
<span class="line-modified">3181    *</span>
<span class="line-modified">3182    * @input:</span>
<span class="line-modified">3183    *   matrix ::</span>
<span class="line-modified">3184    *     A pointer to the transformation&#39;s 2x2 matrix.  Use `NULL` for the</span>
<span class="line-modified">3185    *     identity matrix.</span>
<span class="line-modified">3186    *   delta ::</span>
<span class="line-modified">3187    *     A pointer to the translation vector.  Use `NULL` for the null vector.</span>
<span class="line-modified">3188    *</span>
<span class="line-modified">3189    * @note:</span>
<span class="line-modified">3190    *   The transformation is only applied to scalable image formats after the</span>
<span class="line-modified">3191    *   glyph has been loaded.  It means that hinting is unaltered by the</span>
<span class="line-modified">3192    *   transformation and is performed on the character size given in the</span>
<span class="line-modified">3193    *   last call to @FT_Set_Char_Size or @FT_Set_Pixel_Sizes.</span>
<span class="line-modified">3194    *</span>
<span class="line-modified">3195    *   Note that this also transforms the `face.glyph.advance` field, but</span>
<span class="line-added">3196    *   **not** the values in `face.glyph.metrics`.</span>
<span class="line-added">3197    */</span>
3198   FT_EXPORT( void )
3199   FT_Set_Transform( FT_Face     face,
3200                     FT_Matrix*  matrix,
3201                     FT_Vector*  delta );
3202 
3203 
<span class="line-modified">3204   /**************************************************************************</span>
<span class="line-modified">3205    *</span>
<span class="line-modified">3206    * @enum:</span>
<span class="line-modified">3207    *   FT_Render_Mode</span>
<span class="line-modified">3208    *</span>
<span class="line-modified">3209    * @description:</span>
<span class="line-modified">3210    *   Render modes supported by FreeType~2.  Each mode corresponds to a</span>
<span class="line-modified">3211    *   specific type of scanline conversion performed on the outline.</span>
<span class="line-modified">3212    *</span>
<span class="line-modified">3213    *   For bitmap fonts and embedded bitmaps the `bitmap-&gt;pixel_mode` field</span>
<span class="line-modified">3214    *   in the @FT_GlyphSlotRec structure gives the format of the returned</span>
<span class="line-modified">3215    *   bitmap.</span>
<span class="line-modified">3216    *</span>
<span class="line-modified">3217    *   All modes except @FT_RENDER_MODE_MONO use 256 levels of opacity,</span>
<span class="line-modified">3218    *   indicating pixel coverage.  Use linear alpha blending and gamma</span>
<span class="line-modified">3219    *   correction to correctly render non-monochrome glyph bitmaps onto a</span>
<span class="line-modified">3220    *   surface; see @FT_Render_Glyph.</span>
<span class="line-modified">3221    *</span>
<span class="line-modified">3222    * @values:</span>
<span class="line-modified">3223    *   FT_RENDER_MODE_NORMAL ::</span>
<span class="line-modified">3224    *     Default render mode; it corresponds to 8-bit anti-aliased bitmaps.</span>
<span class="line-modified">3225    *</span>
<span class="line-modified">3226    *   FT_RENDER_MODE_LIGHT ::</span>
<span class="line-modified">3227    *     This is equivalent to @FT_RENDER_MODE_NORMAL.  It is only defined as</span>
<span class="line-modified">3228    *     a separate value because render modes are also used indirectly to</span>
<span class="line-modified">3229    *     define hinting algorithm selectors.  See @FT_LOAD_TARGET_XXX for</span>
<span class="line-modified">3230    *     details.</span>
<span class="line-modified">3231    *</span>
<span class="line-modified">3232    *   FT_RENDER_MODE_MONO ::</span>
<span class="line-modified">3233    *     This mode corresponds to 1-bit bitmaps (with 2~levels of opacity).</span>
<span class="line-modified">3234    *</span>
<span class="line-modified">3235    *   FT_RENDER_MODE_LCD ::</span>
<span class="line-modified">3236    *     This mode corresponds to horizontal RGB and BGR subpixel displays</span>
<span class="line-modified">3237    *     like LCD screens.  It produces 8-bit bitmaps that are 3~times the</span>
<span class="line-modified">3238    *     width of the original glyph outline in pixels, and which use the</span>
<span class="line-modified">3239    *     @FT_PIXEL_MODE_LCD mode.</span>
<span class="line-modified">3240    *</span>
<span class="line-modified">3241    *   FT_RENDER_MODE_LCD_V ::</span>
<span class="line-modified">3242    *     This mode corresponds to vertical RGB and BGR subpixel displays</span>
<span class="line-modified">3243    *     (like PDA screens, rotated LCD displays, etc.).  It produces 8-bit</span>
<span class="line-modified">3244    *     bitmaps that are 3~times the height of the original glyph outline in</span>
<span class="line-modified">3245    *     pixels and use the @FT_PIXEL_MODE_LCD_V mode.</span>
<span class="line-modified">3246    *</span>
<span class="line-modified">3247    * @note:</span>
<span class="line-modified">3248    *   Should you define `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` in your</span>
<span class="line-modified">3249    *   `ftoption.h`, which enables patented ClearType-style rendering, the</span>
<span class="line-modified">3250    *   LCD-optimized glyph bitmaps should be filtered to reduce color fringes</span>
<span class="line-modified">3251    *   inherent to this technology.  You can either set up LCD filtering with</span>
<span class="line-modified">3252    *   @FT_Library_SetLcdFilter or @FT_Face_Properties, or do the filtering</span>
<span class="line-modified">3253    *   yourself.  The default FreeType LCD rendering technology does not</span>
<span class="line-modified">3254    *   require filtering.</span>
<span class="line-modified">3255    *</span>
<span class="line-modified">3256    *   The selected render mode only affects vector glyphs of a font.</span>
<span class="line-modified">3257    *   Embedded bitmaps often have a different pixel mode like</span>
<span class="line-modified">3258    *   @FT_PIXEL_MODE_MONO.  You can use @FT_Bitmap_Convert to transform them</span>
<span class="line-modified">3259    *   into 8-bit pixmaps.</span>
<span class="line-modified">3260    */</span>


3261   typedef enum  FT_Render_Mode_
3262   {
3263     FT_RENDER_MODE_NORMAL = 0,
3264     FT_RENDER_MODE_LIGHT,
3265     FT_RENDER_MODE_MONO,
3266     FT_RENDER_MODE_LCD,
3267     FT_RENDER_MODE_LCD_V,
3268 
3269     FT_RENDER_MODE_MAX
3270 
3271   } FT_Render_Mode;
3272 
3273 
3274   /* these constants are deprecated; use the corresponding */
<span class="line-modified">3275   /* `FT_Render_Mode` values instead                       */</span>
3276 #define ft_render_mode_normal  FT_RENDER_MODE_NORMAL
3277 #define ft_render_mode_mono    FT_RENDER_MODE_MONO
3278 
3279 
<span class="line-modified">3280   /**************************************************************************</span>
<span class="line-modified">3281    *</span>
<span class="line-modified">3282    * @function:</span>
<span class="line-modified">3283    *   FT_Render_Glyph</span>
<span class="line-modified">3284    *</span>
<span class="line-modified">3285    * @description:</span>
<span class="line-modified">3286    *   Convert a given glyph image to a bitmap.  It does so by inspecting the</span>
<span class="line-modified">3287    *   glyph image format, finding the relevant renderer, and invoking it.</span>
<span class="line-modified">3288    *</span>
<span class="line-modified">3289    * @inout:</span>
<span class="line-modified">3290    *   slot ::</span>
<span class="line-modified">3291    *     A handle to the glyph slot containing the image to convert.</span>
<span class="line-modified">3292    *</span>
<span class="line-modified">3293    * @input:</span>
<span class="line-modified">3294    *   render_mode ::</span>
<span class="line-modified">3295    *     The render mode used to render the glyph image into a bitmap.  See</span>
<span class="line-modified">3296    *     @FT_Render_Mode for a list of possible values.</span>
<span class="line-modified">3297    *</span>
<span class="line-modified">3298    *     If @FT_RENDER_MODE_NORMAL is used, a previous call of @FT_Load_Glyph</span>
<span class="line-modified">3299    *     with flag @FT_LOAD_COLOR makes FT_Render_Glyph provide a default</span>
<span class="line-modified">3300    *     blending of colored glyph layers associated with the current glyph</span>
<span class="line-modified">3301    *     slot (provided the font contains such layers) instead of rendering</span>
<span class="line-modified">3302    *     the glyph slot&#39;s outline.  This is an experimental feature; see</span>
<span class="line-modified">3303    *     @FT_LOAD_COLOR for more information.</span>
<span class="line-modified">3304    *</span>
<span class="line-modified">3305    * @return:</span>
<span class="line-modified">3306    *   FreeType error code.  0~means success.</span>
<span class="line-modified">3307    *</span>
<span class="line-modified">3308    * @note:</span>
<span class="line-modified">3309    *   To get meaningful results, font scaling values must be set with</span>
<span class="line-modified">3310    *   functions like @FT_Set_Char_Size before calling `FT_Render_Glyph`.</span>
<span class="line-modified">3311    *</span>
<span class="line-modified">3312    *   When FreeType outputs a bitmap of a glyph, it really outputs an alpha</span>
<span class="line-modified">3313    *   coverage map.  If a pixel is completely covered by a filled-in</span>
<span class="line-modified">3314    *   outline, the bitmap contains 0xFF at that pixel, meaning that</span>
<span class="line-modified">3315    *   0xFF/0xFF fraction of that pixel is covered, meaning the pixel is 100%</span>
<span class="line-modified">3316    *   black (or 0% bright).  If a pixel is only 50% covered (value 0x80),</span>
<span class="line-modified">3317    *   the pixel is made 50% black (50% bright or a middle shade of grey).</span>
<span class="line-modified">3318    *   0% covered means 0% black (100% bright or white).</span>
<span class="line-modified">3319    *</span>
<span class="line-modified">3320    *   On high-DPI screens like on smartphones and tablets, the pixels are so</span>
<span class="line-modified">3321    *   small that their chance of being completely covered and therefore</span>
<span class="line-modified">3322    *   completely black are fairly good.  On the low-DPI screens, however,</span>
<span class="line-modified">3323    *   the situation is different.  The pixels are too large for most of the</span>
<span class="line-modified">3324    *   details of a glyph and shades of gray are the norm rather than the</span>
<span class="line-modified">3325    *   exception.</span>
<span class="line-modified">3326    *</span>
<span class="line-modified">3327    *   This is relevant because all our screens have a second problem: they</span>
<span class="line-modified">3328    *   are not linear.  1~+~1 is not~2.  Twice the value does not result in</span>
<span class="line-modified">3329    *   twice the brightness.  When a pixel is only 50% covered, the coverage</span>
<span class="line-modified">3330    *   map says 50% black, and this translates to a pixel value of 128 when</span>
<span class="line-modified">3331    *   you use 8~bits per channel (0-255).  However, this does not translate</span>
<span class="line-modified">3332    *   to 50% brightness for that pixel on our sRGB and gamma~2.2 screens.</span>
<span class="line-modified">3333    *   Due to their non-linearity, they dwell longer in the darks and only a</span>
<span class="line-modified">3334    *   pixel value of about 186 results in 50% brightness -- 128 ends up too</span>
<span class="line-modified">3335    *   dark on both bright and dark backgrounds.  The net result is that dark</span>
<span class="line-modified">3336    *   text looks burnt-out, pixely and blotchy on bright background, bright</span>
<span class="line-modified">3337    *   text too frail on dark backgrounds, and colored text on colored</span>
<span class="line-modified">3338    *   background (for example, red on green) seems to have dark halos or</span>
<span class="line-modified">3339    *   &#39;dirt&#39; around it.  The situation is especially ugly for diagonal stems</span>
<span class="line-modified">3340    *   like in &#39;w&#39; glyph shapes where the quality of FreeType&#39;s anti-aliasing</span>
<span class="line-modified">3341    *   depends on the correct display of grays.  On high-DPI screens where</span>
<span class="line-modified">3342    *   smaller, fully black pixels reign supreme, this doesn&#39;t matter, but on</span>
<span class="line-modified">3343    *   our low-DPI screens with all the gray shades, it does.  0% and 100%</span>
<span class="line-modified">3344    *   brightness are the same things in linear and non-linear space, just</span>
<span class="line-modified">3345    *   all the shades in-between aren&#39;t.</span>
<span class="line-modified">3346    *</span>
<span class="line-modified">3347    *   The blending function for placing text over a background is</span>
<span class="line-modified">3348    *</span>
<span class="line-modified">3349    *   ```</span>
<span class="line-modified">3350    *     dst = alpha * src + (1 - alpha) * dst    ,</span>
<span class="line-modified">3351    *   ```</span>
<span class="line-modified">3352    *</span>
<span class="line-modified">3353    *   which is known as the OVER operator.</span>
<span class="line-modified">3354    *</span>
<span class="line-modified">3355    *   To correctly composite an antialiased pixel of a glyph onto a surface,</span>
<span class="line-modified">3356    *</span>
<span class="line-modified">3357    *   1. take the foreground and background colors (e.g., in sRGB space)</span>
<span class="line-modified">3358    *      and apply gamma to get them in a linear space,</span>
<span class="line-modified">3359    *</span>
<span class="line-modified">3360    *   2. use OVER to blend the two linear colors using the glyph pixel</span>
<span class="line-modified">3361    *      as the alpha value (remember, the glyph bitmap is an alpha coverage</span>
<span class="line-modified">3362    *      bitmap), and</span>
<span class="line-modified">3363    *</span>
<span class="line-modified">3364    *   3. apply inverse gamma to the blended pixel and write it back to</span>
<span class="line-modified">3365    *      the image.</span>
<span class="line-modified">3366    *</span>
<span class="line-modified">3367    *   Internal testing at Adobe found that a target inverse gamma of~1.8 for</span>
<span class="line-modified">3368    *   step~3 gives good results across a wide range of displays with an sRGB</span>
<span class="line-modified">3369    *   gamma curve or a similar one.</span>
<span class="line-modified">3370    *</span>
<span class="line-modified">3371    *   This process can cost performance.  There is an approximation that</span>
<span class="line-modified">3372    *   does not need to know about the background color; see</span>
<span class="line-modified">3373    *   https://bel.fi/alankila/lcd/ and</span>
<span class="line-modified">3374    *   https://bel.fi/alankila/lcd/alpcor.html for details.</span>
<span class="line-modified">3375    *</span>
<span class="line-modified">3376    *   **ATTENTION**: Linear blending is even more important when dealing</span>
<span class="line-modified">3377    *   with subpixel-rendered glyphs to prevent color-fringing!  A</span>
<span class="line-modified">3378    *   subpixel-rendered glyph must first be filtered with a filter that</span>
<span class="line-modified">3379    *   gives equal weight to the three color primaries and does not exceed a</span>
<span class="line-modified">3380    *   sum of 0x100, see section @lcd_rendering.  Then the only difference to</span>
<span class="line-modified">3381    *   gray linear blending is that subpixel-rendered linear blending is done</span>
<span class="line-modified">3382    *   3~times per pixel: red foreground subpixel to red background subpixel</span>
<span class="line-added">3383    *   and so on for green and blue.</span>
<span class="line-added">3384    */</span>
3385   FT_EXPORT( FT_Error )
3386   FT_Render_Glyph( FT_GlyphSlot    slot,
3387                    FT_Render_Mode  render_mode );
3388 
3389 
<span class="line-modified">3390   /**************************************************************************</span>
<span class="line-modified">3391    *</span>
<span class="line-modified">3392    * @enum:</span>
<span class="line-modified">3393    *   FT_Kerning_Mode</span>
<span class="line-modified">3394    *</span>
<span class="line-modified">3395    * @description:</span>
<span class="line-modified">3396    *   An enumeration to specify the format of kerning values returned by</span>
<span class="line-modified">3397    *   @FT_Get_Kerning.</span>
<span class="line-modified">3398    *</span>
<span class="line-modified">3399    * @values:</span>
<span class="line-modified">3400    *   FT_KERNING_DEFAULT ::</span>
<span class="line-modified">3401    *     Return grid-fitted kerning distances in 26.6 fractional pixels.</span>
<span class="line-modified">3402    *</span>
<span class="line-modified">3403    *   FT_KERNING_UNFITTED ::</span>
<span class="line-modified">3404    *     Return un-grid-fitted kerning distances in 26.6 fractional pixels.</span>
<span class="line-modified">3405    *</span>
<span class="line-modified">3406    *   FT_KERNING_UNSCALED ::</span>
<span class="line-modified">3407    *     Return the kerning vector in original font units.</span>
<span class="line-modified">3408    *</span>
<span class="line-modified">3409    * @note:</span>
<span class="line-modified">3410    *   `FT_KERNING_DEFAULT` returns full pixel values; it also makes FreeType</span>
<span class="line-modified">3411    *   heuristically scale down kerning distances at small ppem values so</span>
<span class="line-modified">3412    *   that they don&#39;t become too big.</span>
<span class="line-modified">3413    *</span>
<span class="line-modified">3414    *   Both `FT_KERNING_DEFAULT` and `FT_KERNING_UNFITTED` use the current</span>
<span class="line-modified">3415    *   horizontal scaling factor (as set e.g. with @FT_Set_Char_Size) to</span>
<span class="line-modified">3416    *   convert font units to pixels.</span>
<span class="line-modified">3417    */</span>
3418   typedef enum  FT_Kerning_Mode_
3419   {
3420     FT_KERNING_DEFAULT = 0,
3421     FT_KERNING_UNFITTED,
3422     FT_KERNING_UNSCALED
3423 
3424   } FT_Kerning_Mode;
3425 
3426 
3427   /* these constants are deprecated; use the corresponding */
<span class="line-modified">3428   /* `FT_Kerning_Mode` values instead                      */</span>
3429 #define ft_kerning_default   FT_KERNING_DEFAULT
3430 #define ft_kerning_unfitted  FT_KERNING_UNFITTED
3431 #define ft_kerning_unscaled  FT_KERNING_UNSCALED
3432 
3433 
<span class="line-modified">3434   /**************************************************************************</span>
<span class="line-modified">3435    *</span>
<span class="line-modified">3436    * @function:</span>
<span class="line-modified">3437    *   FT_Get_Kerning</span>
<span class="line-modified">3438    *</span>
<span class="line-modified">3439    * @description:</span>
<span class="line-modified">3440    *   Return the kerning vector between two glyphs of the same face.</span>
<span class="line-modified">3441    *</span>
<span class="line-modified">3442    * @input:</span>
<span class="line-modified">3443    *   face ::</span>
<span class="line-modified">3444    *     A handle to a source face object.</span>
<span class="line-modified">3445    *</span>
<span class="line-modified">3446    *   left_glyph ::</span>
<span class="line-modified">3447    *     The index of the left glyph in the kern pair.</span>
<span class="line-modified">3448    *</span>
<span class="line-modified">3449    *   right_glyph ::</span>
<span class="line-modified">3450    *     The index of the right glyph in the kern pair.</span>
<span class="line-modified">3451    *</span>
<span class="line-modified">3452    *   kern_mode ::</span>
<span class="line-modified">3453    *     See @FT_Kerning_Mode for more information.  Determines the scale and</span>
<span class="line-modified">3454    *     dimension of the returned kerning vector.</span>
<span class="line-modified">3455    *</span>
<span class="line-modified">3456    * @output:</span>
<span class="line-modified">3457    *   akerning ::</span>
<span class="line-modified">3458    *     The kerning vector.  This is either in font units, fractional pixels</span>
<span class="line-modified">3459    *     (26.6 format), or pixels for scalable formats, and in pixels for</span>
<span class="line-modified">3460    *     fixed-sizes formats.</span>
<span class="line-modified">3461    *</span>
<span class="line-modified">3462    * @return:</span>
<span class="line-modified">3463    *   FreeType error code.  0~means success.</span>
<span class="line-modified">3464    *</span>
<span class="line-modified">3465    * @note:</span>
<span class="line-modified">3466    *   Only horizontal layouts (left-to-right &amp; right-to-left) are supported</span>
<span class="line-modified">3467    *   by this method.  Other layouts, or more sophisticated kernings, are</span>
<span class="line-modified">3468    *   out of the scope of this API function -- they can be implemented</span>
<span class="line-modified">3469    *   through format-specific interfaces.</span>
<span class="line-modified">3470    *</span>
<span class="line-modified">3471    *   Kerning for OpenType fonts implemented in a &#39;GPOS&#39; table is not</span>
<span class="line-added">3472    *   supported; use @FT_HAS_KERNING to find out whether a font has data</span>
<span class="line-added">3473    *   that can be extracted with `FT_Get_Kerning`.</span>
<span class="line-added">3474    */</span>
3475   FT_EXPORT( FT_Error )
3476   FT_Get_Kerning( FT_Face     face,
3477                   FT_UInt     left_glyph,
3478                   FT_UInt     right_glyph,
3479                   FT_UInt     kern_mode,
3480                   FT_Vector  *akerning );
3481 
3482 
<span class="line-modified">3483   /**************************************************************************</span>
<span class="line-modified">3484    *</span>
<span class="line-modified">3485    * @function:</span>
<span class="line-modified">3486    *   FT_Get_Track_Kerning</span>
<span class="line-modified">3487    *</span>
<span class="line-modified">3488    * @description:</span>
<span class="line-modified">3489    *   Return the track kerning for a given face object at a given size.</span>
<span class="line-modified">3490    *</span>
<span class="line-modified">3491    * @input:</span>
<span class="line-modified">3492    *   face ::</span>
<span class="line-modified">3493    *     A handle to a source face object.</span>
<span class="line-modified">3494    *</span>
<span class="line-modified">3495    *   point_size ::</span>
<span class="line-modified">3496    *     The point size in 16.16 fractional points.</span>
<span class="line-modified">3497    *</span>
<span class="line-modified">3498    *   degree ::</span>
<span class="line-modified">3499    *     The degree of tightness.  Increasingly negative values represent</span>
<span class="line-modified">3500    *     tighter track kerning, while increasingly positive values represent</span>
<span class="line-modified">3501    *     looser track kerning.  Value zero means no track kerning.</span>
<span class="line-modified">3502    *</span>
<span class="line-modified">3503    * @output:</span>
<span class="line-modified">3504    *   akerning ::</span>
<span class="line-modified">3505    *     The kerning in 16.16 fractional points, to be uniformly applied</span>
<span class="line-modified">3506    *     between all glyphs.</span>
<span class="line-modified">3507    *</span>
<span class="line-modified">3508    * @return:</span>
<span class="line-modified">3509    *   FreeType error code.  0~means success.</span>
<span class="line-modified">3510    *</span>
<span class="line-modified">3511    * @note:</span>
<span class="line-modified">3512    *   Currently, only the Type~1 font driver supports track kerning, using</span>
<span class="line-modified">3513    *   data from AFM files (if attached with @FT_Attach_File or</span>
<span class="line-modified">3514    *   @FT_Attach_Stream).</span>
<span class="line-modified">3515    *</span>
<span class="line-added">3516    *   Only very few AFM files come with track kerning data; please refer to</span>
<span class="line-added">3517    *   Adobe&#39;s AFM specification for more details.</span>
<span class="line-added">3518    */</span>
3519   FT_EXPORT( FT_Error )
3520   FT_Get_Track_Kerning( FT_Face    face,
3521                         FT_Fixed   point_size,
3522                         FT_Int     degree,
3523                         FT_Fixed*  akerning );
3524 
3525 
<span class="line-modified">3526   /**************************************************************************</span>
<span class="line-modified">3527    *</span>
<span class="line-modified">3528    * @function:</span>
<span class="line-modified">3529    *   FT_Get_Glyph_Name</span>
<span class="line-modified">3530    *</span>
<span class="line-modified">3531    * @description:</span>
<span class="line-modified">3532    *   Retrieve the ASCII name of a given glyph in a face.  This only works</span>
<span class="line-modified">3533    *   for those faces where @FT_HAS_GLYPH_NAMES(face) returns~1.</span>
<span class="line-modified">3534    *</span>
<span class="line-modified">3535    * @input:</span>
<span class="line-modified">3536    *   face ::</span>
<span class="line-modified">3537    *     A handle to a source face object.</span>
<span class="line-modified">3538    *</span>
<span class="line-modified">3539    *   glyph_index ::</span>
<span class="line-modified">3540    *     The glyph index.</span>
<span class="line-modified">3541    *</span>
<span class="line-modified">3542    *   buffer_max ::</span>
<span class="line-modified">3543    *     The maximum number of bytes available in the buffer.</span>
<span class="line-modified">3544    *</span>
<span class="line-modified">3545    * @output:</span>
<span class="line-modified">3546    *   buffer ::</span>
<span class="line-modified">3547    *     A pointer to a target buffer where the name is copied to.</span>
<span class="line-modified">3548    *</span>
<span class="line-modified">3549    * @return:</span>
<span class="line-modified">3550    *   FreeType error code.  0~means success.</span>
<span class="line-modified">3551    *</span>
<span class="line-modified">3552    * @note:</span>
<span class="line-modified">3553    *   An error is returned if the face doesn&#39;t provide glyph names or if the</span>
<span class="line-modified">3554    *   glyph index is invalid.  In all cases of failure, the first byte of</span>
<span class="line-modified">3555    *   `buffer` is set to~0 to indicate an empty name.</span>
<span class="line-modified">3556    *</span>
<span class="line-modified">3557    *   The glyph name is truncated to fit within the buffer if it is too</span>
<span class="line-modified">3558    *   long.  The returned string is always zero-terminated.</span>
<span class="line-modified">3559    *</span>
<span class="line-modified">3560    *   Be aware that FreeType reorders glyph indices internally so that glyph</span>
<span class="line-modified">3561    *   index~0 always corresponds to the &#39;missing glyph&#39; (called &#39;.notdef&#39;).</span>
<span class="line-modified">3562    *</span>
<span class="line-modified">3563    *   This function always returns an error if the config macro</span>
<span class="line-modified">3564    *   `FT_CONFIG_OPTION_NO_GLYPH_NAMES` is not defined in `ftoption.h`.</span>
<span class="line-added">3565    */</span>
3566   FT_EXPORT( FT_Error )
3567   FT_Get_Glyph_Name( FT_Face     face,
3568                      FT_UInt     glyph_index,
3569                      FT_Pointer  buffer,
3570                      FT_UInt     buffer_max );
3571 
3572 
<span class="line-modified">3573   /**************************************************************************</span>
<span class="line-modified">3574    *</span>
<span class="line-modified">3575    * @function:</span>
<span class="line-modified">3576    *   FT_Get_Postscript_Name</span>
<span class="line-modified">3577    *</span>
<span class="line-modified">3578    * @description:</span>
<span class="line-modified">3579    *   Retrieve the ASCII PostScript name of a given face, if available.</span>
<span class="line-modified">3580    *   This only works with PostScript, TrueType, and OpenType fonts.</span>
<span class="line-modified">3581    *</span>
<span class="line-modified">3582    * @input:</span>
<span class="line-modified">3583    *   face ::</span>
<span class="line-modified">3584    *     A handle to the source face object.</span>
<span class="line-modified">3585    *</span>
<span class="line-modified">3586    * @return:</span>
<span class="line-modified">3587    *   A pointer to the face&#39;s PostScript name.  `NULL` if unavailable.</span>
<span class="line-modified">3588    *</span>
<span class="line-modified">3589    * @note:</span>
<span class="line-modified">3590    *   The returned pointer is owned by the face and is destroyed with it.</span>
<span class="line-modified">3591    *</span>
<span class="line-modified">3592    *   For variation fonts, this string changes if you select a different</span>
<span class="line-modified">3593    *   instance, and you have to call `FT_Get_PostScript_Name` again to</span>
<span class="line-modified">3594    *   retrieve it.  FreeType follows Adobe TechNote #5902, &#39;Generating</span>
<span class="line-modified">3595    *   PostScript Names for Fonts Using OpenType Font Variations&#39;.</span>
<span class="line-modified">3596    *</span>
<span class="line-modified">3597    *     https://download.macromedia.com/pub/developer/opentype/tech-notes/5902.AdobePSNameGeneration.html</span>
<span class="line-modified">3598    *</span>
<span class="line-modified">3599    *   [Since 2.9] Special PostScript names for named instances are only</span>
<span class="line-modified">3600    *   returned if the named instance is set with @FT_Set_Named_Instance (and</span>
<span class="line-modified">3601    *   the font has corresponding entries in its &#39;fvar&#39; table).  If</span>
<span class="line-modified">3602    *   @FT_IS_VARIATION returns true, the algorithmically derived PostScript</span>
<span class="line-modified">3603    *   name is provided, not looking up special entries for named instances.</span>
<span class="line-modified">3604    */</span>

3605   FT_EXPORT( const char* )
3606   FT_Get_Postscript_Name( FT_Face  face );
3607 
3608 
<span class="line-modified">3609   /**************************************************************************</span>
<span class="line-modified">3610    *</span>
<span class="line-modified">3611    * @function:</span>
<span class="line-modified">3612    *   FT_Select_Charmap</span>
<span class="line-modified">3613    *</span>
<span class="line-modified">3614    * @description:</span>
<span class="line-modified">3615    *   Select a given charmap by its encoding tag (as listed in</span>
<span class="line-modified">3616    *   `freetype.h`).</span>
<span class="line-modified">3617    *</span>
<span class="line-modified">3618    * @inout:</span>
<span class="line-modified">3619    *   face ::</span>
<span class="line-modified">3620    *     A handle to the source face object.</span>
<span class="line-modified">3621    *</span>
<span class="line-modified">3622    * @input:</span>
<span class="line-modified">3623    *   encoding ::</span>
<span class="line-modified">3624    *     A handle to the selected encoding.</span>
<span class="line-modified">3625    *</span>
<span class="line-modified">3626    * @return:</span>
<span class="line-modified">3627    *   FreeType error code.  0~means success.</span>
<span class="line-modified">3628    *</span>
<span class="line-modified">3629    * @note:</span>
<span class="line-modified">3630    *   This function returns an error if no charmap in the face corresponds</span>
<span class="line-modified">3631    *   to the encoding queried here.</span>
<span class="line-modified">3632    *</span>
<span class="line-modified">3633    *   Because many fonts contain more than a single cmap for Unicode</span>
<span class="line-modified">3634    *   encoding, this function has some special code to select the one that</span>
<span class="line-modified">3635    *   covers Unicode best (&#39;best&#39; in the sense that a UCS-4 cmap is</span>
<span class="line-modified">3636    *   preferred to a UCS-2 cmap).  It is thus preferable to @FT_Set_Charmap</span>
<span class="line-added">3637    *   in this case.</span>
<span class="line-added">3638    */</span>
3639   FT_EXPORT( FT_Error )
3640   FT_Select_Charmap( FT_Face      face,
3641                      FT_Encoding  encoding );
3642 
3643 
<span class="line-modified">3644   /**************************************************************************</span>
<span class="line-modified">3645    *</span>
<span class="line-modified">3646    * @function:</span>
<span class="line-modified">3647    *   FT_Set_Charmap</span>
<span class="line-modified">3648    *</span>
<span class="line-modified">3649    * @description:</span>
<span class="line-modified">3650    *   Select a given charmap for character code to glyph index mapping.</span>
<span class="line-modified">3651    *</span>
<span class="line-modified">3652    * @inout:</span>
<span class="line-modified">3653    *   face ::</span>
<span class="line-modified">3654    *     A handle to the source face object.</span>
<span class="line-modified">3655    *</span>
<span class="line-modified">3656    * @input:</span>
<span class="line-modified">3657    *   charmap ::</span>
<span class="line-modified">3658    *     A handle to the selected charmap.</span>
<span class="line-modified">3659    *</span>
<span class="line-modified">3660    * @return:</span>
<span class="line-modified">3661    *   FreeType error code.  0~means success.</span>
<span class="line-modified">3662    *</span>
<span class="line-modified">3663    * @note:</span>
<span class="line-modified">3664    *   This function returns an error if the charmap is not part of the face</span>
<span class="line-modified">3665    *   (i.e., if it is not listed in the `face-&gt;charmaps` table).</span>
<span class="line-modified">3666    *</span>
<span class="line-modified">3667    *   It also fails if an OpenType type~14 charmap is selected (which</span>
<span class="line-modified">3668    *   doesn&#39;t map character codes to glyph indices at all).</span>
<span class="line-added">3669    */</span>
3670   FT_EXPORT( FT_Error )
3671   FT_Set_Charmap( FT_Face     face,
3672                   FT_CharMap  charmap );
3673 
3674 
<span class="line-modified">3675   /**************************************************************************</span>
3676    *
3677    * @function:
3678    *   FT_Get_Charmap_Index
3679    *
3680    * @description:
3681    *   Retrieve index of a given charmap.
3682    *
3683    * @input:
3684    *   charmap ::
3685    *     A handle to a charmap.
3686    *
3687    * @return:
3688    *   The index into the array of character maps within the face to which
<span class="line-modified">3689    *   `charmap` belongs.  If an error occurs, -1 is returned.</span>
3690    *
3691    */
3692   FT_EXPORT( FT_Int )
3693   FT_Get_Charmap_Index( FT_CharMap  charmap );
3694 
3695 
<span class="line-modified">3696   /**************************************************************************</span>
<span class="line-modified">3697    *</span>
<span class="line-modified">3698    * @function:</span>
<span class="line-modified">3699    *   FT_Get_Char_Index</span>
<span class="line-modified">3700    *</span>
<span class="line-modified">3701    * @description:</span>
<span class="line-modified">3702    *   Return the glyph index of a given character code.  This function uses</span>
<span class="line-modified">3703    *   the currently selected charmap to do the mapping.</span>
<span class="line-modified">3704    *</span>
<span class="line-modified">3705    * @input:</span>
<span class="line-modified">3706    *   face ::</span>
<span class="line-modified">3707    *     A handle to the source face object.</span>
<span class="line-modified">3708    *</span>
<span class="line-modified">3709    *   charcode ::</span>
<span class="line-modified">3710    *     The character code.</span>
<span class="line-modified">3711    *</span>
<span class="line-modified">3712    * @return:</span>
<span class="line-modified">3713    *   The glyph index.  0~means &#39;undefined character code&#39;.</span>
<span class="line-modified">3714    *</span>
<span class="line-modified">3715    * @note:</span>
<span class="line-modified">3716    *   If you use FreeType to manipulate the contents of font files directly,</span>
<span class="line-modified">3717    *   be aware that the glyph index returned by this function doesn&#39;t always</span>
<span class="line-modified">3718    *   correspond to the internal indices used within the file.  This is done</span>
<span class="line-modified">3719    *   to ensure that value~0 always corresponds to the &#39;missing glyph&#39;.  If</span>
<span class="line-modified">3720    *   the first glyph is not named &#39;.notdef&#39;, then for Type~1 and Type~42</span>
<span class="line-modified">3721    *   fonts, &#39;.notdef&#39; will be moved into the glyph ID~0 position, and</span>
<span class="line-modified">3722    *   whatever was there will be moved to the position &#39;.notdef&#39; had.  For</span>
<span class="line-modified">3723    *   Type~1 fonts, if there is no &#39;.notdef&#39; glyph at all, then one will be</span>
<span class="line-modified">3724    *   created at index~0 and whatever was there will be moved to the last</span>
<span class="line-modified">3725    *   index -- Type~42 fonts are considered invalid under this condition.</span>
<span class="line-added">3726    */</span>
3727   FT_EXPORT( FT_UInt )
3728   FT_Get_Char_Index( FT_Face   face,
3729                      FT_ULong  charcode );
3730 
3731 
<span class="line-modified">3732   /**************************************************************************</span>
<span class="line-modified">3733    *</span>
<span class="line-modified">3734    * @function:</span>
<span class="line-modified">3735    *   FT_Get_First_Char</span>
<span class="line-modified">3736    *</span>
<span class="line-modified">3737    * @description:</span>
<span class="line-modified">3738    *   Return the first character code in the current charmap of a given</span>
<span class="line-modified">3739    *   face, together with its corresponding glyph index.</span>
<span class="line-modified">3740    *</span>
<span class="line-modified">3741    * @input:</span>
<span class="line-modified">3742    *   face ::</span>
<span class="line-modified">3743    *     A handle to the source face object.</span>
<span class="line-modified">3744    *</span>
<span class="line-modified">3745    * @output:</span>
<span class="line-modified">3746    *   agindex ::</span>
<span class="line-modified">3747    *     Glyph index of first character code.  0~if charmap is empty.</span>
<span class="line-modified">3748    *</span>
<span class="line-modified">3749    * @return:</span>
<span class="line-modified">3750    *   The charmap&#39;s first character code.</span>
<span class="line-modified">3751    *</span>
<span class="line-modified">3752    * @note:</span>
<span class="line-modified">3753    *   You should use this function together with @FT_Get_Next_Char to parse</span>
<span class="line-modified">3754    *   all character codes available in a given charmap.  The code should</span>
<span class="line-modified">3755    *   look like this:</span>
<span class="line-modified">3756    *</span>
<span class="line-modified">3757    *   ```</span>
<span class="line-modified">3758    *     FT_ULong  charcode;</span>
<span class="line-modified">3759    *     FT_UInt   gindex;</span>
<span class="line-modified">3760    *</span>
<span class="line-modified">3761    *</span>
<span class="line-modified">3762    *     charcode = FT_Get_First_Char( face, &amp;gindex );</span>
<span class="line-modified">3763    *     while ( gindex != 0 )</span>
<span class="line-modified">3764    *     {</span>
<span class="line-modified">3765    *       ... do something with (charcode,gindex) pair ...</span>
<span class="line-modified">3766    *</span>
<span class="line-modified">3767    *       charcode = FT_Get_Next_Char( face, charcode, &amp;gindex );</span>
<span class="line-modified">3768    *     }</span>
<span class="line-modified">3769    *   ```</span>
<span class="line-modified">3770    *</span>
<span class="line-modified">3771    *   Be aware that character codes can have values up to 0xFFFFFFFF; this</span>
<span class="line-modified">3772    *   might happen for non-Unicode or malformed cmaps.  However, even with</span>
<span class="line-modified">3773    *   regular Unicode encoding, so-called &#39;last resort fonts&#39; (using SFNT</span>
<span class="line-modified">3774    *   cmap format 13, see function @FT_Get_CMap_Format) normally have</span>
<span class="line-modified">3775    *   entries for all Unicode characters up to 0x1FFFFF, which can cause *a</span>
<span class="line-modified">3776    *   lot* of iterations.</span>
<span class="line-modified">3777    *</span>
<span class="line-modified">3778    *   Note that `*agindex` is set to~0 if the charmap is empty.  The result</span>
<span class="line-modified">3779    *   itself can be~0 in two cases: if the charmap is empty or if the</span>
<span class="line-modified">3780    *   value~0 is the first valid character code.</span>
<span class="line-added">3781    */</span>
3782   FT_EXPORT( FT_ULong )
3783   FT_Get_First_Char( FT_Face   face,
3784                      FT_UInt  *agindex );
3785 
3786 
<span class="line-modified">3787   /**************************************************************************</span>
<span class="line-modified">3788    *</span>
<span class="line-modified">3789    * @function:</span>
<span class="line-modified">3790    *   FT_Get_Next_Char</span>
<span class="line-modified">3791    *</span>
<span class="line-modified">3792    * @description:</span>
<span class="line-modified">3793    *   Return the next character code in the current charmap of a given face</span>
<span class="line-modified">3794    *   following the value `char_code`, as well as the corresponding glyph</span>
<span class="line-modified">3795    *   index.</span>
<span class="line-modified">3796    *</span>
<span class="line-modified">3797    * @input:</span>
<span class="line-modified">3798    *   face ::</span>
<span class="line-modified">3799    *     A handle to the source face object.</span>
<span class="line-modified">3800    *</span>
<span class="line-modified">3801    *   char_code ::</span>
<span class="line-modified">3802    *     The starting character code.</span>
<span class="line-modified">3803    *</span>
<span class="line-modified">3804    * @output:</span>
<span class="line-modified">3805    *   agindex ::</span>
<span class="line-modified">3806    *     Glyph index of next character code.  0~if charmap is empty.</span>
<span class="line-modified">3807    *</span>
<span class="line-modified">3808    * @return:</span>
<span class="line-modified">3809    *   The charmap&#39;s next character code.</span>
<span class="line-modified">3810    *</span>
<span class="line-modified">3811    * @note:</span>
<span class="line-modified">3812    *   You should use this function with @FT_Get_First_Char to walk over all</span>
<span class="line-modified">3813    *   character codes available in a given charmap.  See the note for that</span>
<span class="line-modified">3814    *   function for a simple code example.</span>
<span class="line-modified">3815    *</span>
<span class="line-modified">3816    *   Note that `*agindex` is set to~0 when there are no more codes in the</span>
<span class="line-added">3817    *   charmap.</span>
<span class="line-added">3818    */</span>
3819   FT_EXPORT( FT_ULong )
3820   FT_Get_Next_Char( FT_Face    face,
3821                     FT_ULong   char_code,
3822                     FT_UInt   *agindex );
3823 
3824 
<span class="line-modified">3825   /**************************************************************************</span>
3826    *
3827    * @function:
3828    *   FT_Face_Properties
3829    *
3830    * @description:
3831    *   Set or override certain (library or module-wide) properties on a
3832    *   face-by-face basis.  Useful for finer-grained control and avoiding
<span class="line-modified">3833    *   locks on shared structures (threads can modify their own faces as they</span>
<span class="line-modified">3834    *   see fit).</span>
3835    *
<span class="line-modified">3836    *   Contrary to @FT_Property_Set, this function uses @FT_Parameter so that</span>
<span class="line-modified">3837    *   you can pass multiple properties to the target face in one call.  Note</span>
<span class="line-modified">3838    *   that only a subset of the available properties can be controlled.</span>

3839    *
3840    *   * @FT_PARAM_TAG_STEM_DARKENING (stem darkening, corresponding to the
<span class="line-modified">3841    *     property `no-stem-darkening` provided by the &#39;autofit&#39;, &#39;cff&#39;,</span>
<span class="line-modified">3842    *     &#39;type1&#39;, and &#39;t1cid&#39; modules; see @no-stem-darkening).</span>
3843    *
3844    *   * @FT_PARAM_TAG_LCD_FILTER_WEIGHTS (LCD filter weights, corresponding
3845    *     to function @FT_Library_SetLcdFilterWeights).
3846    *
3847    *   * @FT_PARAM_TAG_RANDOM_SEED (seed value for the CFF, Type~1, and CID
<span class="line-modified">3848    *     &#39;random&#39; operator, corresponding to the `random-seed` property</span>
<span class="line-modified">3849    *     provided by the &#39;cff&#39;, &#39;type1&#39;, and &#39;t1cid&#39; modules; see</span>
3850    *     @random-seed).
3851    *
<span class="line-modified">3852    *   Pass `NULL` as `data` in @FT_Parameter for a given tag to reset the</span>
3853    *   option and use the library or module default again.
3854    *
3855    * @input:
3856    *   face ::
3857    *     A handle to the source face object.
3858    *
3859    *   num_properties ::
3860    *     The number of properties that follow.
3861    *
3862    *   properties ::
<span class="line-modified">3863    *     A handle to an @FT_Parameter array with `num_properties` elements.</span>
3864    *
3865    * @return:
3866    *   FreeType error code.  0~means success.
3867    *
<span class="line-modified">3868    * @example:</span>
<span class="line-modified">3869    *   Here is an example that sets three properties.  You must define</span>
<span class="line-modified">3870    *   `FT_CONFIG_OPTION_SUBPIXEL_RENDERING` to make the LCD filter examples</span>
3871    *   work.
3872    *
<span class="line-modified">3873    *   ```</span>
3874    *     FT_Parameter         property1;
3875    *     FT_Bool              darken_stems = 1;
3876    *
3877    *     FT_Parameter         property2;
3878    *     FT_LcdFiveTapFilter  custom_weight =
3879    *                            { 0x11, 0x44, 0x56, 0x44, 0x11 };
3880    *
3881    *     FT_Parameter         property3;
3882    *     FT_Int32             random_seed = 314159265;
3883    *
3884    *     FT_Parameter         properties[3] = { property1,
3885    *                                            property2,
3886    *                                            property3 };
3887    *
3888    *
3889    *     property1.tag  = FT_PARAM_TAG_STEM_DARKENING;
3890    *     property1.data = &amp;darken_stems;
3891    *
3892    *     property2.tag  = FT_PARAM_TAG_LCD_FILTER_WEIGHTS;
3893    *     property2.data = custom_weight;
3894    *
3895    *     property3.tag  = FT_PARAM_TAG_RANDOM_SEED;
3896    *     property3.data = &amp;random_seed;
3897    *
3898    *     FT_Face_Properties( face, 3, properties );
<span class="line-modified">3899    *   ```</span>
3900    *
3901    *   The next example resets a single property to its default value.
3902    *
<span class="line-modified">3903    *   ```</span>
3904    *     FT_Parameter  property;
3905    *
3906    *
3907    *     property.tag  = FT_PARAM_TAG_LCD_FILTER_WEIGHTS;
3908    *     property.data = NULL;
3909    *
3910    *     FT_Face_Properties( face, 1, &amp;property );
<span class="line-modified">3911    *   ```</span>
3912    *
3913    * @since:
3914    *   2.8
3915    *
3916    */
3917   FT_EXPORT( FT_Error )
3918   FT_Face_Properties( FT_Face        face,
3919                       FT_UInt        num_properties,
3920                       FT_Parameter*  properties );
3921 
3922 
<span class="line-modified">3923   /**************************************************************************</span>
<span class="line-modified">3924    *</span>
<span class="line-modified">3925    * @function:</span>
<span class="line-modified">3926    *   FT_Get_Name_Index</span>
<span class="line-modified">3927    *</span>
<span class="line-modified">3928    * @description:</span>
<span class="line-modified">3929    *   Return the glyph index of a given glyph name.</span>
<span class="line-modified">3930    *</span>
<span class="line-modified">3931    * @input:</span>
<span class="line-modified">3932    *   face ::</span>
<span class="line-modified">3933    *     A handle to the source face object.</span>
<span class="line-modified">3934    *</span>
<span class="line-modified">3935    *   glyph_name ::</span>
<span class="line-modified">3936    *     The glyph name.</span>
<span class="line-modified">3937    *</span>
<span class="line-modified">3938    * @return:</span>
<span class="line-added">3939    *   The glyph index.  0~means &#39;undefined character code&#39;.</span>
<span class="line-added">3940    */</span>
3941   FT_EXPORT( FT_UInt )
<span class="line-modified">3942   FT_Get_Name_Index( FT_Face           face,</span>
<span class="line-modified">3943                      const FT_String*  glyph_name );</span>
3944 
3945 
<span class="line-modified">3946   /**************************************************************************</span>
3947    *
<span class="line-modified">3948    * @enum:</span>
3949    *   FT_SUBGLYPH_FLAG_XXX
3950    *
3951    * @description:
<span class="line-modified">3952    *   A list of constants describing subglyphs.  Please refer to the &#39;glyf&#39;</span>
<span class="line-modified">3953    *   table description in the OpenType specification for the meaning of the</span>
<span class="line-modified">3954    *   various flags (which get synthesized for non-OpenType subglyphs).</span>
<span class="line-modified">3955    *</span>
<span class="line-added">3956    *     https://docs.microsoft.com/en-us/typography/opentype/spec/glyf#composite-glyph-description</span>
3957    *
3958    * @values:
3959    *   FT_SUBGLYPH_FLAG_ARGS_ARE_WORDS ::
3960    *   FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES ::
3961    *   FT_SUBGLYPH_FLAG_ROUND_XY_TO_GRID ::
3962    *   FT_SUBGLYPH_FLAG_SCALE ::
3963    *   FT_SUBGLYPH_FLAG_XY_SCALE ::
3964    *   FT_SUBGLYPH_FLAG_2X2 ::
3965    *   FT_SUBGLYPH_FLAG_USE_MY_METRICS ::
3966    *
3967    */
3968 #define FT_SUBGLYPH_FLAG_ARGS_ARE_WORDS          1
3969 #define FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES      2
3970 #define FT_SUBGLYPH_FLAG_ROUND_XY_TO_GRID        4
3971 #define FT_SUBGLYPH_FLAG_SCALE                   8
3972 #define FT_SUBGLYPH_FLAG_XY_SCALE             0x40
3973 #define FT_SUBGLYPH_FLAG_2X2                  0x80
3974 #define FT_SUBGLYPH_FLAG_USE_MY_METRICS      0x200
3975 
3976 
<span class="line-modified">3977   /**************************************************************************</span>
<span class="line-added">3978    *</span>
<span class="line-added">3979    * @function:</span>
<span class="line-added">3980    *   FT_Get_SubGlyph_Info</span>
<span class="line-added">3981    *</span>
<span class="line-added">3982    * @description:</span>
<span class="line-added">3983    *   Retrieve a description of a given subglyph.  Only use it if</span>
<span class="line-added">3984    *   `glyph-&gt;format` is @FT_GLYPH_FORMAT_COMPOSITE; an error is returned</span>
<span class="line-added">3985    *   otherwise.</span>
<span class="line-added">3986    *</span>
<span class="line-added">3987    * @input:</span>
<span class="line-added">3988    *   glyph ::</span>
<span class="line-added">3989    *     The source glyph slot.</span>
<span class="line-added">3990    *</span>
<span class="line-added">3991    *   sub_index ::</span>
<span class="line-added">3992    *     The index of the subglyph.  Must be less than</span>
<span class="line-added">3993    *     `glyph-&gt;num_subglyphs`.</span>
<span class="line-added">3994    *</span>
<span class="line-added">3995    * @output:</span>
<span class="line-added">3996    *   p_index ::</span>
<span class="line-added">3997    *     The glyph index of the subglyph.</span>
<span class="line-added">3998    *</span>
<span class="line-added">3999    *   p_flags ::</span>
<span class="line-added">4000    *     The subglyph flags, see @FT_SUBGLYPH_FLAG_XXX.</span>
<span class="line-added">4001    *</span>
<span class="line-added">4002    *   p_arg1 ::</span>
<span class="line-added">4003    *     The subglyph&#39;s first argument (if any).</span>
<span class="line-added">4004    *</span>
<span class="line-added">4005    *   p_arg2 ::</span>
<span class="line-added">4006    *     The subglyph&#39;s second argument (if any).</span>
<span class="line-added">4007    *</span>
<span class="line-added">4008    *   p_transform ::</span>
<span class="line-added">4009    *     The subglyph transformation (if any).</span>
<span class="line-added">4010    *</span>
<span class="line-added">4011    * @return:</span>
<span class="line-added">4012    *   FreeType error code.  0~means success.</span>
<span class="line-added">4013    *</span>
<span class="line-added">4014    * @note:</span>
<span class="line-added">4015    *   The values of `*p_arg1`, `*p_arg2`, and `*p_transform` must be</span>
<span class="line-added">4016    *   interpreted depending on the flags returned in `*p_flags`.  See the</span>
<span class="line-added">4017    *   OpenType specification for details.</span>
<span class="line-added">4018    *</span>
<span class="line-added">4019    *     https://docs.microsoft.com/en-us/typography/opentype/spec/glyf#composite-glyph-description</span>
<span class="line-added">4020    *</span>
<span class="line-added">4021    */</span>
<span class="line-added">4022   FT_EXPORT( FT_Error )</span>
<span class="line-added">4023   FT_Get_SubGlyph_Info( FT_GlyphSlot  glyph,</span>
<span class="line-added">4024                         FT_UInt       sub_index,</span>
<span class="line-added">4025                         FT_Int       *p_index,</span>
<span class="line-added">4026                         FT_UInt      *p_flags,</span>
<span class="line-added">4027                         FT_Int       *p_arg1,</span>
<span class="line-added">4028                         FT_Int       *p_arg2,</span>
<span class="line-added">4029                         FT_Matrix    *p_transform );</span>
<span class="line-added">4030 </span>
<span class="line-added">4031 </span>
<span class="line-added">4032   /**************************************************************************</span>
<span class="line-added">4033    *</span>
<span class="line-added">4034    * @section:</span>
<span class="line-added">4035    *   layer_management</span>
<span class="line-added">4036    *</span>
<span class="line-added">4037    * @title:</span>
<span class="line-added">4038    *   Glyph Layer Management</span>
<span class="line-added">4039    *</span>
<span class="line-added">4040    * @abstract:</span>
<span class="line-added">4041    *   Retrieving and manipulating OpenType&#39;s &#39;COLR&#39; table data.</span>
<span class="line-added">4042    *</span>
<span class="line-added">4043    * @description:</span>
<span class="line-added">4044    *   The functions described here allow access of colored glyph layer data</span>
<span class="line-added">4045    *   in OpenType&#39;s &#39;COLR&#39; tables.</span>
<span class="line-added">4046    */</span>
<span class="line-added">4047 </span>
<span class="line-added">4048 </span>
<span class="line-added">4049   /**************************************************************************</span>
<span class="line-added">4050    *</span>
<span class="line-added">4051    * @struct:</span>
<span class="line-added">4052    *   FT_LayerIterator</span>
<span class="line-added">4053    *</span>
<span class="line-added">4054    * @description:</span>
<span class="line-added">4055    *   This iterator object is needed for @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">4056    *</span>
<span class="line-added">4057    * @fields:</span>
<span class="line-added">4058    *   num_layers ::</span>
<span class="line-added">4059    *     The number of glyph layers for the requested glyph index.  Will be</span>
<span class="line-added">4060    *     set by @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">4061    *</span>
<span class="line-added">4062    *   layer ::</span>
<span class="line-added">4063    *     The current layer.  Will be set by @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">4064    *</span>
<span class="line-added">4065    *   p ::</span>
<span class="line-added">4066    *     An opaque pointer into &#39;COLR&#39; table data.  The caller must set this</span>
<span class="line-added">4067    *     to `NULL` before the first call of @FT_Get_Color_Glyph_Layer.</span>
<span class="line-added">4068    */</span>
<span class="line-added">4069   typedef struct  FT_LayerIterator_</span>
<span class="line-added">4070   {</span>
<span class="line-added">4071     FT_UInt   num_layers;</span>
<span class="line-added">4072     FT_UInt   layer;</span>
<span class="line-added">4073     FT_Byte*  p;</span>
<span class="line-added">4074 </span>
<span class="line-added">4075   } FT_LayerIterator;</span>
<span class="line-added">4076 </span>
<span class="line-added">4077 </span>
<span class="line-added">4078   /**************************************************************************</span>
4079    *
<span class="line-modified">4080    * @function:</span>
<span class="line-modified">4081    *   FT_Get_Color_Glyph_Layer</span>
4082    *
4083    * @description:
<span class="line-modified">4084    *   This is an interface to the &#39;COLR&#39; table in OpenType fonts to</span>
<span class="line-modified">4085    *   iteratively retrieve the colored glyph layers associated with the</span>
<span class="line-modified">4086    *   current glyph slot.</span>
4087    *
<span class="line-modified">4088    *     https://docs.microsoft.com/en-us/typography/opentype/spec/colr</span>


4089    *
<span class="line-modified">4090    *   The glyph layer data for a given glyph index, if present, provides an</span>
<span class="line-modified">4091    *   alternative, multi-colour glyph representation: Instead of rendering</span>
<span class="line-modified">4092    *   the outline or bitmap with the given glyph index, glyphs with the</span>
<span class="line-added">4093    *   indices and colors returned by this function are rendered layer by</span>
<span class="line-added">4094    *   layer.</span>
4095    *
<span class="line-modified">4096    *   The returned elements are ordered in the z~direction from bottom to</span>
<span class="line-modified">4097    *   top; the &#39;n&#39;th element should be rendered with the associated palette</span>
<span class="line-modified">4098    *   color and blended on top of the already rendered layers (elements 0,</span>
<span class="line-added">4099    *   1, ..., n-1).</span>
4100    *
<span class="line-modified">4101    * @input:</span>
<span class="line-modified">4102    *   face ::</span>
<span class="line-added">4103    *     A handle to the parent face object.</span>
4104    *
<span class="line-modified">4105    *   base_glyph ::</span>
<span class="line-modified">4106    *     The glyph index the colored glyph layers are associated with.</span>
4107    *
<span class="line-modified">4108    * @inout:</span>
<span class="line-modified">4109    *   iterator ::</span>
<span class="line-added">4110    *     An @FT_LayerIterator object.  For the first call you should set</span>
<span class="line-added">4111    *     `iterator-&gt;p` to `NULL`.  For all following calls, simply use the</span>
<span class="line-added">4112    *     same object again.</span>
4113    *
<span class="line-modified">4114    * @output:</span>
<span class="line-modified">4115    *   aglyph_index ::</span>
<span class="line-added">4116    *     The glyph index of the current layer.</span>
<span class="line-added">4117    *</span>
<span class="line-added">4118    *   acolor_index ::</span>
<span class="line-added">4119    *     The color index into the font face&#39;s color palette of the current</span>
<span class="line-added">4120    *     layer.  The value 0xFFFF is special; it doesn&#39;t reference a palette</span>
<span class="line-added">4121    *     entry but indicates that the text foreground color should be used</span>
<span class="line-added">4122    *     instead (to be set up by the application outside of FreeType).</span>
<span class="line-added">4123    *</span>
<span class="line-added">4124    *     The color palette can be retrieved with @FT_Palette_Select.</span>
4125    *
4126    * @return:
<span class="line-modified">4127    *   Value~1 if everything is OK.  If there are no more layers (or if there</span>
<span class="line-added">4128    *   are no layers at all), value~0 gets returned.  In case of an error,</span>
<span class="line-added">4129    *   value~0 is returned also.</span>
4130    *
4131    * @note:
<span class="line-modified">4132    *   This function is necessary if you want to handle glyph layers by</span>
<span class="line-modified">4133    *   yourself.  In particular, functions that operate with @FT_GlyphRec</span>
<span class="line-modified">4134    *   objects (like @FT_Get_Glyph or @FT_Glyph_To_Bitmap) don&#39;t have access</span>
<span class="line-added">4135    *   to this information.</span>
<span class="line-added">4136    *</span>
<span class="line-added">4137    *   Note that @FT_Render_Glyph is able to handle colored glyph layers</span>
<span class="line-added">4138    *   automatically if the @FT_LOAD_COLOR flag is passed to a previous call</span>
<span class="line-added">4139    *   to @FT_Load_Glyph.  [This is an experimental feature.]</span>
<span class="line-added">4140    *</span>
<span class="line-added">4141    * @example:</span>
<span class="line-added">4142    *   ```</span>
<span class="line-added">4143    *     FT_Color*         palette;</span>
<span class="line-added">4144    *     FT_LayerIterator  iterator;</span>
<span class="line-added">4145    *</span>
<span class="line-added">4146    *     FT_Bool  have_layers;</span>
<span class="line-added">4147    *     FT_UInt  layer_glyph_index;</span>
<span class="line-added">4148    *     FT_UInt  layer_color_index;</span>
<span class="line-added">4149    *</span>
<span class="line-added">4150    *</span>
<span class="line-added">4151    *     error = FT_Palette_Select( face, palette_index, &amp;palette );</span>
<span class="line-added">4152    *     if ( error )</span>
<span class="line-added">4153    *       palette = NULL;</span>
4154    *
<span class="line-added">4155    *     iterator.p  = NULL;</span>
<span class="line-added">4156    *     have_layers = FT_Get_Color_Glyph_Layer( face,</span>
<span class="line-added">4157    *                                             glyph_index,</span>
<span class="line-added">4158    *                                             &amp;layer_glyph_index,</span>
<span class="line-added">4159    *                                             &amp;layer_color_index,</span>
<span class="line-added">4160    *                                             &amp;iterator );</span>
<span class="line-added">4161    *</span>
<span class="line-added">4162    *     if ( palette &amp;&amp; have_layers )</span>
<span class="line-added">4163    *     {</span>
<span class="line-added">4164    *       do</span>
<span class="line-added">4165    *       {</span>
<span class="line-added">4166    *         FT_Color  layer_color;</span>
<span class="line-added">4167    *</span>
<span class="line-added">4168    *</span>
<span class="line-added">4169    *         if ( layer_color_index == 0xFFFF )</span>
<span class="line-added">4170    *           layer_color = text_foreground_color;</span>
<span class="line-added">4171    *         else</span>
<span class="line-added">4172    *           layer_color = palette[layer_color_index];</span>
<span class="line-added">4173    *</span>
<span class="line-added">4174    *         // Load and render glyph `layer_glyph_index&#39;, then</span>
<span class="line-added">4175    *         // blend resulting pixmap (using color `layer_color&#39;)</span>
<span class="line-added">4176    *         // with previously created pixmaps.</span>
<span class="line-added">4177    *</span>
<span class="line-added">4178    *       } while ( FT_Get_Color_Glyph_Layer( face,</span>
<span class="line-added">4179    *                                           glyph_index,</span>
<span class="line-added">4180    *                                           &amp;layer_glyph_index,</span>
<span class="line-added">4181    *                                           &amp;layer_color_index,</span>
<span class="line-added">4182    *                                           &amp;iterator ) );</span>
<span class="line-added">4183    *     }</span>
<span class="line-added">4184    *   ```</span>
4185    */
<span class="line-modified">4186   FT_EXPORT( FT_Bool )</span>
<span class="line-modified">4187   FT_Get_Color_Glyph_Layer( FT_Face            face,</span>
<span class="line-modified">4188                             FT_UInt            base_glyph,</span>
<span class="line-modified">4189                             FT_UInt           *aglyph_index,</span>
<span class="line-modified">4190                             FT_UInt           *acolor_index,</span>
<span class="line-modified">4191                             FT_LayerIterator*  iterator );</span>


4192 
4193 
<span class="line-modified">4194   /**************************************************************************</span>
<span class="line-modified">4195    *</span>
<span class="line-modified">4196    * @section:</span>
<span class="line-modified">4197    *   base_interface</span>
<span class="line-modified">4198    *</span>
<span class="line-modified">4199    */</span>
<span class="line-modified">4200 </span>
<span class="line-modified">4201   /**************************************************************************</span>
<span class="line-modified">4202    *</span>
<span class="line-modified">4203    * @enum:</span>
<span class="line-modified">4204    *   FT_FSTYPE_XXX</span>
<span class="line-modified">4205    *</span>
<span class="line-modified">4206    * @description:</span>
<span class="line-modified">4207    *   A list of bit flags used in the `fsType` field of the OS/2 table in a</span>
<span class="line-modified">4208    *   TrueType or OpenType font and the `FSType` entry in a PostScript font.</span>
<span class="line-modified">4209    *   These bit flags are returned by @FT_Get_FSType_Flags; they inform</span>
<span class="line-modified">4210    *   client applications of embedding and subsetting restrictions</span>
<span class="line-modified">4211    *   associated with a font.</span>
<span class="line-modified">4212    *</span>
<span class="line-modified">4213    *   See</span>
<span class="line-modified">4214    *   https://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/FontPolicies.pdf</span>
<span class="line-modified">4215    *   for more details.</span>
<span class="line-modified">4216    *</span>
<span class="line-modified">4217    * @values:</span>
<span class="line-modified">4218    *   FT_FSTYPE_INSTALLABLE_EMBEDDING ::</span>
<span class="line-modified">4219    *     Fonts with no fsType bit set may be embedded and permanently</span>
<span class="line-modified">4220    *     installed on the remote system by an application.</span>
<span class="line-modified">4221    *</span>
<span class="line-modified">4222    *   FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING ::</span>
<span class="line-modified">4223    *     Fonts that have only this bit set must not be modified, embedded or</span>
<span class="line-modified">4224    *     exchanged in any manner without first obtaining permission of the</span>
<span class="line-modified">4225    *     font software copyright owner.</span>
<span class="line-modified">4226    *</span>
<span class="line-modified">4227    *   FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING ::</span>
<span class="line-modified">4228    *     The font may be embedded and temporarily loaded on the remote</span>
<span class="line-modified">4229    *     system.  Documents containing Preview &amp; Print fonts must be opened</span>
<span class="line-modified">4230    *     &#39;read-only&#39;; no edits can be applied to the document.</span>
<span class="line-modified">4231    *</span>
<span class="line-modified">4232    *   FT_FSTYPE_EDITABLE_EMBEDDING ::</span>
<span class="line-modified">4233    *     The font may be embedded but must only be installed temporarily on</span>
<span class="line-modified">4234    *     other systems.  In contrast to Preview &amp; Print fonts, documents</span>
<span class="line-modified">4235    *     containing editable fonts may be opened for reading, editing is</span>
<span class="line-modified">4236    *     permitted, and changes may be saved.</span>
<span class="line-modified">4237    *</span>
<span class="line-modified">4238    *   FT_FSTYPE_NO_SUBSETTING ::</span>
<span class="line-modified">4239    *     The font may not be subsetted prior to embedding.</span>
<span class="line-modified">4240    *</span>
<span class="line-modified">4241    *   FT_FSTYPE_BITMAP_EMBEDDING_ONLY ::</span>
<span class="line-modified">4242    *     Only bitmaps contained in the font may be embedded; no outline data</span>
<span class="line-modified">4243    *     may be embedded.  If there are no bitmaps available in the font,</span>
<span class="line-modified">4244    *     then the font is unembeddable.</span>
<span class="line-modified">4245    *</span>
<span class="line-modified">4246    * @note:</span>
<span class="line-added">4247    *   The flags are ORed together, thus more than a single value can be</span>
<span class="line-added">4248    *   returned.</span>
<span class="line-added">4249    *</span>
<span class="line-added">4250    *   While the `fsType` flags can indicate that a font may be embedded, a</span>
<span class="line-added">4251    *   license with the font vendor may be separately required to use the</span>
<span class="line-added">4252    *   font in this way.</span>
<span class="line-added">4253    */</span>
4254 #define FT_FSTYPE_INSTALLABLE_EMBEDDING         0x0000
4255 #define FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING  0x0002
4256 #define FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING   0x0004
4257 #define FT_FSTYPE_EDITABLE_EMBEDDING            0x0008
4258 #define FT_FSTYPE_NO_SUBSETTING                 0x0100
4259 #define FT_FSTYPE_BITMAP_EMBEDDING_ONLY         0x0200
4260 
4261 
<span class="line-modified">4262   /**************************************************************************</span>
<span class="line-modified">4263    *</span>
<span class="line-modified">4264    * @function:</span>
<span class="line-modified">4265    *   FT_Get_FSType_Flags</span>
<span class="line-modified">4266    *</span>
<span class="line-modified">4267    * @description:</span>
<span class="line-modified">4268    *   Return the `fsType` flags for a font.</span>
<span class="line-modified">4269    *</span>
<span class="line-modified">4270    * @input:</span>
<span class="line-modified">4271    *   face ::</span>
<span class="line-modified">4272    *     A handle to the source face object.</span>
<span class="line-modified">4273    *</span>
<span class="line-modified">4274    * @return:</span>
<span class="line-modified">4275    *   The `fsType` flags, see @FT_FSTYPE_XXX.</span>
<span class="line-modified">4276    *</span>
<span class="line-modified">4277    * @note:</span>
<span class="line-modified">4278    *   Use this function rather than directly reading the `fs_type` field in</span>
<span class="line-modified">4279    *   the @PS_FontInfoRec structure, which is only guaranteed to return the</span>
<span class="line-modified">4280    *   correct results for Type~1 fonts.</span>
<span class="line-modified">4281    *</span>
<span class="line-modified">4282    * @since:</span>
<span class="line-modified">4283    *   2.3.8</span>
<span class="line-added">4284    */</span>
4285   FT_EXPORT( FT_UShort )
4286   FT_Get_FSType_Flags( FT_Face  face );
4287 
4288 
<span class="line-modified">4289   /**************************************************************************</span>
<span class="line-modified">4290    *</span>
<span class="line-modified">4291    * @section:</span>
<span class="line-modified">4292    *   glyph_variants</span>
<span class="line-modified">4293    *</span>
<span class="line-modified">4294    * @title:</span>
<span class="line-modified">4295    *   Unicode Variation Sequences</span>
<span class="line-modified">4296    *</span>
<span class="line-modified">4297    * @abstract:</span>
<span class="line-modified">4298    *   The FreeType~2 interface to Unicode Variation Sequences (UVS), using</span>
<span class="line-modified">4299    *   the SFNT cmap format~14.</span>
<span class="line-modified">4300    *</span>
<span class="line-modified">4301    * @description:</span>
<span class="line-modified">4302    *   Many characters, especially for CJK scripts, have variant forms.  They</span>
<span class="line-modified">4303    *   are a sort of grey area somewhere between being totally irrelevant and</span>
<span class="line-modified">4304    *   semantically distinct; for this reason, the Unicode consortium decided</span>
<span class="line-modified">4305    *   to introduce Variation Sequences (VS), consisting of a Unicode base</span>
<span class="line-modified">4306    *   character and a variation selector instead of further extending the</span>
<span class="line-modified">4307    *   already huge number of characters.</span>
<span class="line-modified">4308    *</span>
<span class="line-modified">4309    *   Unicode maintains two different sets, namely &#39;Standardized Variation</span>
<span class="line-modified">4310    *   Sequences&#39; and registered &#39;Ideographic Variation Sequences&#39; (IVS),</span>
<span class="line-modified">4311    *   collected in the &#39;Ideographic Variation Database&#39; (IVD).</span>
<span class="line-modified">4312    *</span>
<span class="line-modified">4313    *     https://unicode.org/Public/UCD/latest/ucd/StandardizedVariants.txt</span>
<span class="line-modified">4314    *     https://unicode.org/reports/tr37/ https://unicode.org/ivd/</span>
<span class="line-modified">4315    *</span>
<span class="line-modified">4316    *   To date (January 2017), the character with the most ideographic</span>
<span class="line-modified">4317    *   variations is U+9089, having 32 such IVS.</span>
<span class="line-modified">4318    *</span>
<span class="line-modified">4319    *   Three Mongolian Variation Selectors have the values U+180B-U+180D; 256</span>
<span class="line-modified">4320    *   generic Variation Selectors are encoded in the ranges U+FE00-U+FE0F</span>
<span class="line-modified">4321    *   and U+E0100-U+E01EF.  IVS currently use Variation Selectors from the</span>
<span class="line-modified">4322    *   range U+E0100-U+E01EF only.</span>
<span class="line-modified">4323    *</span>
<span class="line-modified">4324    *   A VS consists of the base character value followed by a single</span>
<span class="line-modified">4325    *   Variation Selector.  For example, to get the first variation of</span>
<span class="line-modified">4326    *   U+9089, you have to write the character sequence `U+9089 U+E0100`.</span>
<span class="line-modified">4327    *</span>
<span class="line-modified">4328    *   Adobe and MS decided to support both standardized and ideographic VS</span>
<span class="line-modified">4329    *   with a new cmap subtable (format~14).  It is an odd subtable because</span>
<span class="line-modified">4330    *   it is not a mapping of input code points to glyphs, but contains lists</span>
<span class="line-modified">4331    *   of all variations supported by the font.</span>
<span class="line-modified">4332    *</span>
<span class="line-modified">4333    *   A variation may be either &#39;default&#39; or &#39;non-default&#39; for a given font.</span>
<span class="line-modified">4334    *   A default variation is the one you will get for that code point if you</span>
<span class="line-modified">4335    *   look it up in the standard Unicode cmap.  A non-default variation is a</span>
<span class="line-modified">4336    *   different glyph.</span>
<span class="line-modified">4337    *</span>
<span class="line-modified">4338    */</span>



4339 
4340 
<span class="line-modified">4341   /**************************************************************************</span>
<span class="line-modified">4342    *</span>
<span class="line-modified">4343    * @function:</span>
<span class="line-modified">4344    *   FT_Face_GetCharVariantIndex</span>
<span class="line-modified">4345    *</span>
<span class="line-modified">4346    * @description:</span>
<span class="line-modified">4347    *   Return the glyph index of a given character code as modified by the</span>
<span class="line-modified">4348    *   variation selector.</span>
<span class="line-modified">4349    *</span>
<span class="line-modified">4350    * @input:</span>
<span class="line-modified">4351    *   face ::</span>
<span class="line-modified">4352    *     A handle to the source face object.</span>
<span class="line-modified">4353    *</span>
<span class="line-modified">4354    *   charcode ::</span>
<span class="line-modified">4355    *     The character code point in Unicode.</span>
<span class="line-modified">4356    *</span>
<span class="line-modified">4357    *   variantSelector ::</span>
<span class="line-modified">4358    *     The Unicode code point of the variation selector.</span>
<span class="line-modified">4359    *</span>
<span class="line-modified">4360    * @return:</span>
<span class="line-modified">4361    *   The glyph index.  0~means either &#39;undefined character code&#39;, or</span>
<span class="line-modified">4362    *   &#39;undefined selector code&#39;, or &#39;no variation selector cmap subtable&#39;,</span>
<span class="line-modified">4363    *   or &#39;current CharMap is not Unicode&#39;.</span>
<span class="line-modified">4364    *</span>
<span class="line-modified">4365    * @note:</span>
<span class="line-modified">4366    *   If you use FreeType to manipulate the contents of font files directly,</span>
<span class="line-modified">4367    *   be aware that the glyph index returned by this function doesn&#39;t always</span>
<span class="line-modified">4368    *   correspond to the internal indices used within the file.  This is done</span>
<span class="line-modified">4369    *   to ensure that value~0 always corresponds to the &#39;missing glyph&#39;.</span>
<span class="line-modified">4370    *</span>
<span class="line-modified">4371    *   This function is only meaningful if</span>
<span class="line-modified">4372    *     a) the font has a variation selector cmap sub table, and</span>
<span class="line-modified">4373    *     b) the current charmap has a Unicode encoding.</span>
<span class="line-modified">4374    *</span>
<span class="line-modified">4375    * @since:</span>
<span class="line-modified">4376    *   2.3.6</span>
<span class="line-modified">4377    */</span>


4378   FT_EXPORT( FT_UInt )
4379   FT_Face_GetCharVariantIndex( FT_Face   face,
4380                                FT_ULong  charcode,
4381                                FT_ULong  variantSelector );
4382 
4383 
<span class="line-modified">4384   /**************************************************************************</span>
<span class="line-modified">4385    *</span>
<span class="line-modified">4386    * @function:</span>
<span class="line-modified">4387    *   FT_Face_GetCharVariantIsDefault</span>
<span class="line-modified">4388    *</span>
<span class="line-modified">4389    * @description:</span>
<span class="line-modified">4390    *   Check whether this variation of this Unicode character is the one to</span>
<span class="line-modified">4391    *   be found in the charmap.</span>
<span class="line-modified">4392    *</span>
<span class="line-modified">4393    * @input:</span>
<span class="line-modified">4394    *   face ::</span>
<span class="line-modified">4395    *     A handle to the source face object.</span>
<span class="line-modified">4396    *</span>
<span class="line-modified">4397    *   charcode ::</span>
<span class="line-modified">4398    *     The character codepoint in Unicode.</span>
<span class="line-modified">4399    *</span>
<span class="line-modified">4400    *   variantSelector ::</span>
<span class="line-modified">4401    *     The Unicode codepoint of the variation selector.</span>
<span class="line-modified">4402    *</span>
<span class="line-modified">4403    * @return:</span>
<span class="line-modified">4404    *   1~if found in the standard (Unicode) cmap, 0~if found in the variation</span>
<span class="line-modified">4405    *   selector cmap, or -1 if it is not a variation.</span>
<span class="line-modified">4406    *</span>
<span class="line-modified">4407    * @note:</span>
<span class="line-modified">4408    *   This function is only meaningful if the font has a variation selector</span>
<span class="line-modified">4409    *   cmap subtable.</span>
<span class="line-modified">4410    *</span>
<span class="line-modified">4411    * @since:</span>
<span class="line-modified">4412    *   2.3.6</span>
<span class="line-modified">4413    */</span>
4414   FT_EXPORT( FT_Int )
4415   FT_Face_GetCharVariantIsDefault( FT_Face   face,
4416                                    FT_ULong  charcode,
4417                                    FT_ULong  variantSelector );
4418 
4419 
<span class="line-modified">4420   /**************************************************************************</span>
<span class="line-modified">4421    *</span>
<span class="line-modified">4422    * @function:</span>
<span class="line-modified">4423    *   FT_Face_GetVariantSelectors</span>
<span class="line-modified">4424    *</span>
<span class="line-modified">4425    * @description:</span>
<span class="line-modified">4426    *   Return a zero-terminated list of Unicode variation selectors found in</span>
<span class="line-modified">4427    *   the font.</span>
<span class="line-modified">4428    *</span>
<span class="line-modified">4429    * @input:</span>
<span class="line-modified">4430    *   face ::</span>
<span class="line-modified">4431    *     A handle to the source face object.</span>
<span class="line-modified">4432    *</span>
<span class="line-modified">4433    * @return:</span>
<span class="line-modified">4434    *   A pointer to an array of selector code points, or `NULL` if there is</span>
<span class="line-modified">4435    *   no valid variation selector cmap subtable.</span>
<span class="line-modified">4436    *</span>
<span class="line-modified">4437    * @note:</span>
<span class="line-modified">4438    *   The last item in the array is~0; the array is owned by the @FT_Face</span>
<span class="line-modified">4439    *   object but can be overwritten or released on the next call to a</span>
<span class="line-modified">4440    *   FreeType function.</span>
<span class="line-modified">4441    *</span>
<span class="line-modified">4442    * @since:</span>
<span class="line-modified">4443    *   2.3.6</span>
<span class="line-modified">4444    */</span>
4445   FT_EXPORT( FT_UInt32* )
4446   FT_Face_GetVariantSelectors( FT_Face  face );
4447 
4448 
<span class="line-modified">4449   /**************************************************************************</span>
<span class="line-modified">4450    *</span>
<span class="line-modified">4451    * @function:</span>
<span class="line-modified">4452    *   FT_Face_GetVariantsOfChar</span>
<span class="line-modified">4453    *</span>
<span class="line-modified">4454    * @description:</span>
<span class="line-modified">4455    *   Return a zero-terminated list of Unicode variation selectors found for</span>
<span class="line-modified">4456    *   the specified character code.</span>
<span class="line-modified">4457    *</span>
<span class="line-modified">4458    * @input:</span>
<span class="line-modified">4459    *   face ::</span>
<span class="line-modified">4460    *     A handle to the source face object.</span>
<span class="line-modified">4461    *</span>
<span class="line-modified">4462    *   charcode ::</span>
<span class="line-modified">4463    *     The character codepoint in Unicode.</span>
<span class="line-modified">4464    *</span>
<span class="line-modified">4465    * @return:</span>
<span class="line-modified">4466    *   A pointer to an array of variation selector code points that are</span>
<span class="line-modified">4467    *   active for the given character, or `NULL` if the corresponding list is</span>
<span class="line-modified">4468    *   empty.</span>
<span class="line-modified">4469    *</span>
<span class="line-modified">4470    * @note:</span>
<span class="line-modified">4471    *   The last item in the array is~0; the array is owned by the @FT_Face</span>
<span class="line-modified">4472    *   object but can be overwritten or released on the next call to a</span>
<span class="line-modified">4473    *   FreeType function.</span>
<span class="line-modified">4474    *</span>
<span class="line-modified">4475    * @since:</span>
<span class="line-modified">4476    *   2.3.6</span>
<span class="line-modified">4477    */</span>
4478   FT_EXPORT( FT_UInt32* )
4479   FT_Face_GetVariantsOfChar( FT_Face   face,
4480                              FT_ULong  charcode );
4481 
4482 
<span class="line-modified">4483   /**************************************************************************</span>
<span class="line-modified">4484    *</span>
<span class="line-modified">4485    * @function:</span>
<span class="line-modified">4486    *   FT_Face_GetCharsOfVariant</span>
<span class="line-modified">4487    *</span>
<span class="line-modified">4488    * @description:</span>
<span class="line-modified">4489    *   Return a zero-terminated list of Unicode character codes found for the</span>
<span class="line-modified">4490    *   specified variation selector.</span>
<span class="line-modified">4491    *</span>
<span class="line-modified">4492    * @input:</span>
<span class="line-modified">4493    *   face ::</span>
<span class="line-modified">4494    *     A handle to the source face object.</span>
<span class="line-modified">4495    *</span>
<span class="line-modified">4496    *   variantSelector ::</span>
<span class="line-modified">4497    *     The variation selector code point in Unicode.</span>
<span class="line-modified">4498    *</span>
<span class="line-modified">4499    * @return:</span>
<span class="line-modified">4500    *   A list of all the code points that are specified by this selector</span>
<span class="line-modified">4501    *   (both default and non-default codes are returned) or `NULL` if there</span>
<span class="line-modified">4502    *   is no valid cmap or the variation selector is invalid.</span>
<span class="line-modified">4503    *</span>
<span class="line-modified">4504    * @note:</span>
<span class="line-modified">4505    *   The last item in the array is~0; the array is owned by the @FT_Face</span>
<span class="line-modified">4506    *   object but can be overwritten or released on the next call to a</span>
<span class="line-modified">4507    *   FreeType function.</span>
<span class="line-modified">4508    *</span>
<span class="line-modified">4509    * @since:</span>
<span class="line-modified">4510    *   2.3.6</span>
<span class="line-modified">4511    */</span>
4512   FT_EXPORT( FT_UInt32* )
4513   FT_Face_GetCharsOfVariant( FT_Face   face,
4514                              FT_ULong  variantSelector );
4515 
4516 
<span class="line-modified">4517   /**************************************************************************</span>
<span class="line-modified">4518    *</span>
<span class="line-modified">4519    * @section:</span>
<span class="line-modified">4520    *   computations</span>
<span class="line-modified">4521    *</span>
<span class="line-modified">4522    * @title:</span>
<span class="line-modified">4523    *   Computations</span>
<span class="line-modified">4524    *</span>
<span class="line-modified">4525    * @abstract:</span>
<span class="line-modified">4526    *   Crunching fixed numbers and vectors.</span>
<span class="line-modified">4527    *</span>
<span class="line-modified">4528    * @description:</span>
<span class="line-modified">4529    *   This section contains various functions used to perform computations</span>
<span class="line-modified">4530    *   on 16.16 fixed-float numbers or 2d vectors.</span>
<span class="line-modified">4531    *</span>
<span class="line-modified">4532    *   **Attention**: Most arithmetic functions take `FT_Long` as arguments.</span>
<span class="line-modified">4533    *   For historical reasons, FreeType was designed under the assumption</span>
<span class="line-modified">4534    *   that `FT_Long` is a 32-bit integer; results can thus be undefined if</span>
<span class="line-modified">4535    *   the arguments don&#39;t fit into 32 bits.</span>
<span class="line-modified">4536    *</span>
<span class="line-modified">4537    * @order:</span>
<span class="line-modified">4538    *   FT_MulDiv</span>
<span class="line-modified">4539    *   FT_MulFix</span>
<span class="line-modified">4540    *   FT_DivFix</span>
<span class="line-modified">4541    *   FT_RoundFix</span>
<span class="line-modified">4542    *   FT_CeilFix</span>
<span class="line-modified">4543    *   FT_FloorFix</span>
<span class="line-added">4544    *   FT_Vector_Transform</span>
<span class="line-added">4545    *   FT_Matrix_Multiply</span>
<span class="line-added">4546    *   FT_Matrix_Invert</span>
<span class="line-added">4547    *</span>
<span class="line-added">4548    */</span>
4549 
4550 
<span class="line-modified">4551   /**************************************************************************</span>
<span class="line-modified">4552    *</span>
<span class="line-modified">4553    * @function:</span>
<span class="line-modified">4554    *   FT_MulDiv</span>
<span class="line-modified">4555    *</span>
<span class="line-modified">4556    * @description:</span>
<span class="line-modified">4557    *   Compute `(a*b)/c` with maximum accuracy, using a 64-bit intermediate</span>
<span class="line-modified">4558    *   integer whenever necessary.</span>
<span class="line-modified">4559    *</span>
<span class="line-modified">4560    *   This function isn&#39;t necessarily as fast as some processor-specific</span>
<span class="line-modified">4561    *   operations, but is at least completely portable.</span>
<span class="line-modified">4562    *</span>
<span class="line-modified">4563    * @input:</span>
<span class="line-modified">4564    *   a ::</span>
<span class="line-modified">4565    *     The first multiplier.</span>
<span class="line-modified">4566    *</span>
<span class="line-modified">4567    *   b ::</span>
<span class="line-modified">4568    *     The second multiplier.</span>
<span class="line-modified">4569    *</span>
<span class="line-modified">4570    *   c ::</span>
<span class="line-modified">4571    *     The divisor.</span>
<span class="line-modified">4572    *</span>
<span class="line-modified">4573    * @return:</span>
<span class="line-modified">4574    *   The result of `(a*b)/c`.  This function never traps when trying to</span>
<span class="line-added">4575    *   divide by zero; it simply returns &#39;MaxInt&#39; or &#39;MinInt&#39; depending on</span>
<span class="line-added">4576    *   the signs of `a` and `b`.</span>
<span class="line-added">4577    */</span>
4578   FT_EXPORT( FT_Long )
4579   FT_MulDiv( FT_Long  a,
4580              FT_Long  b,
4581              FT_Long  c );
4582 
4583 
<span class="line-modified">4584   /**************************************************************************</span>
<span class="line-modified">4585    *</span>
<span class="line-modified">4586    * @function:</span>
<span class="line-modified">4587    *   FT_MulFix</span>
<span class="line-modified">4588    *</span>
<span class="line-modified">4589    * @description:</span>
<span class="line-modified">4590    *   Compute `(a*b)/0x10000` with maximum accuracy.  Its main use is to</span>
<span class="line-modified">4591    *   multiply a given value by a 16.16 fixed-point factor.</span>
<span class="line-modified">4592    *</span>
<span class="line-modified">4593    * @input:</span>
<span class="line-modified">4594    *   a ::</span>
<span class="line-modified">4595    *     The first multiplier.</span>
<span class="line-modified">4596    *</span>
<span class="line-modified">4597    *   b ::</span>
<span class="line-modified">4598    *     The second multiplier.  Use a 16.16 factor here whenever possible</span>
<span class="line-modified">4599    *     (see note below).</span>
<span class="line-modified">4600    *</span>
<span class="line-modified">4601    * @return:</span>
<span class="line-modified">4602    *   The result of `(a*b)/0x10000`.</span>
<span class="line-modified">4603    *</span>
<span class="line-modified">4604    * @note:</span>
<span class="line-modified">4605    *   This function has been optimized for the case where the absolute value</span>
<span class="line-modified">4606    *   of `a` is less than 2048, and `b` is a 16.16 scaling factor.  As this</span>
<span class="line-modified">4607    *   happens mainly when scaling from notional units to fractional pixels</span>
<span class="line-modified">4608    *   in FreeType, it resulted in noticeable speed improvements between</span>
<span class="line-modified">4609    *   versions 2.x and 1.x.</span>
<span class="line-modified">4610    *</span>
<span class="line-modified">4611    *   As a conclusion, always try to place a 16.16 factor as the _second_</span>
<span class="line-modified">4612    *   argument of this function; this can make a great difference.</span>
<span class="line-added">4613    */</span>
4614   FT_EXPORT( FT_Long )
4615   FT_MulFix( FT_Long  a,
4616              FT_Long  b );
4617 
4618 
<span class="line-modified">4619   /**************************************************************************</span>
<span class="line-modified">4620    *</span>
<span class="line-modified">4621    * @function:</span>
<span class="line-modified">4622    *   FT_DivFix</span>
<span class="line-modified">4623    *</span>
<span class="line-modified">4624    * @description:</span>
<span class="line-modified">4625    *   Compute `(a*0x10000)/b` with maximum accuracy.  Its main use is to</span>
<span class="line-modified">4626    *   divide a given value by a 16.16 fixed-point factor.</span>
<span class="line-modified">4627    *</span>
<span class="line-modified">4628    * @input:</span>
<span class="line-modified">4629    *   a ::</span>
<span class="line-modified">4630    *     The numerator.</span>
<span class="line-modified">4631    *</span>
<span class="line-modified">4632    *   b ::</span>
<span class="line-modified">4633    *     The denominator.  Use a 16.16 factor here.</span>
<span class="line-modified">4634    *</span>
<span class="line-modified">4635    * @return:</span>
<span class="line-added">4636    *   The result of `(a*0x10000)/b`.</span>
<span class="line-added">4637    */</span>
4638   FT_EXPORT( FT_Long )
4639   FT_DivFix( FT_Long  a,
4640              FT_Long  b );
4641 
4642 
<span class="line-modified">4643   /**************************************************************************</span>
<span class="line-modified">4644    *</span>
<span class="line-modified">4645    * @function:</span>
<span class="line-modified">4646    *   FT_RoundFix</span>
<span class="line-modified">4647    *</span>
<span class="line-modified">4648    * @description:</span>
<span class="line-modified">4649    *   Round a 16.16 fixed number.</span>
<span class="line-modified">4650    *</span>
<span class="line-modified">4651    * @input:</span>
<span class="line-modified">4652    *   a ::</span>
<span class="line-modified">4653    *     The number to be rounded.</span>
<span class="line-modified">4654    *</span>
<span class="line-modified">4655    * @return:</span>
<span class="line-modified">4656    *   `a` rounded to the nearest 16.16 fixed integer, halfway cases away</span>
<span class="line-modified">4657    *   from zero.</span>
<span class="line-modified">4658    *</span>
<span class="line-modified">4659    * @note:</span>
<span class="line-modified">4660    *   The function uses wrap-around arithmetic.</span>
<span class="line-added">4661    */</span>
4662   FT_EXPORT( FT_Fixed )
4663   FT_RoundFix( FT_Fixed  a );
4664 
4665 
<span class="line-modified">4666   /**************************************************************************</span>
<span class="line-modified">4667    *</span>
<span class="line-modified">4668    * @function:</span>
<span class="line-modified">4669    *   FT_CeilFix</span>
<span class="line-modified">4670    *</span>
<span class="line-modified">4671    * @description:</span>
<span class="line-modified">4672    *   Compute the smallest following integer of a 16.16 fixed number.</span>
<span class="line-modified">4673    *</span>
<span class="line-modified">4674    * @input:</span>
<span class="line-modified">4675    *   a ::</span>
<span class="line-modified">4676    *     The number for which the ceiling function is to be computed.</span>
<span class="line-modified">4677    *</span>
<span class="line-modified">4678    * @return:</span>
<span class="line-modified">4679    *   `a` rounded towards plus infinity.</span>
<span class="line-modified">4680    *</span>
<span class="line-modified">4681    * @note:</span>
<span class="line-modified">4682    *   The function uses wrap-around arithmetic.</span>
<span class="line-added">4683    */</span>
4684   FT_EXPORT( FT_Fixed )
4685   FT_CeilFix( FT_Fixed  a );
4686 
4687 
<span class="line-modified">4688   /**************************************************************************</span>
<span class="line-modified">4689    *</span>
<span class="line-modified">4690    * @function:</span>
<span class="line-modified">4691    *   FT_FloorFix</span>
<span class="line-modified">4692    *</span>
<span class="line-modified">4693    * @description:</span>
<span class="line-modified">4694    *   Compute the largest previous integer of a 16.16 fixed number.</span>
<span class="line-modified">4695    *</span>
<span class="line-modified">4696    * @input:</span>
<span class="line-modified">4697    *   a ::</span>
<span class="line-modified">4698    *     The number for which the floor function is to be computed.</span>
<span class="line-modified">4699    *</span>
<span class="line-modified">4700    * @return:</span>
<span class="line-modified">4701    *   `a` rounded towards minus infinity.</span>
<span class="line-added">4702    */</span>
4703   FT_EXPORT( FT_Fixed )
4704   FT_FloorFix( FT_Fixed  a );
4705 
4706 
<span class="line-modified">4707   /**************************************************************************</span>
<span class="line-modified">4708    *</span>
<span class="line-modified">4709    * @function:</span>
<span class="line-modified">4710    *   FT_Vector_Transform</span>
<span class="line-modified">4711    *</span>
<span class="line-modified">4712    * @description:</span>
<span class="line-modified">4713    *   Transform a single vector through a 2x2 matrix.</span>
<span class="line-modified">4714    *</span>
<span class="line-modified">4715    * @inout:</span>
<span class="line-modified">4716    *   vector ::</span>
<span class="line-modified">4717    *     The target vector to transform.</span>
<span class="line-modified">4718    *</span>
<span class="line-modified">4719    * @input:</span>
<span class="line-modified">4720    *   matrix ::</span>
<span class="line-modified">4721    *     A pointer to the source 2x2 matrix.</span>
<span class="line-modified">4722    *</span>
<span class="line-modified">4723    * @note:</span>
<span class="line-added">4724    *   The result is undefined if either `vector` or `matrix` is invalid.</span>
<span class="line-added">4725    */</span>
4726   FT_EXPORT( void )
<span class="line-modified">4727   FT_Vector_Transform( FT_Vector*        vector,</span>
4728                        const FT_Matrix*  matrix );
4729 
4730 
<span class="line-modified">4731   /**************************************************************************</span>
<span class="line-modified">4732    *</span>
<span class="line-modified">4733    * @section:</span>
<span class="line-modified">4734    *   version</span>
<span class="line-modified">4735    *</span>
<span class="line-modified">4736    * @title:</span>
<span class="line-modified">4737    *   FreeType Version</span>
<span class="line-modified">4738    *</span>
<span class="line-modified">4739    * @abstract:</span>
<span class="line-modified">4740    *   Functions and macros related to FreeType versions.</span>
<span class="line-modified">4741    *</span>
<span class="line-modified">4742    * @description:</span>
<span class="line-modified">4743    *   Note that those functions and macros are of limited use because even a</span>
<span class="line-modified">4744    *   new release of FreeType with only documentation changes increases the</span>
<span class="line-modified">4745    *   version number.</span>
<span class="line-modified">4746    *</span>
<span class="line-modified">4747    * @order:</span>
<span class="line-modified">4748    *   FT_Library_Version</span>
<span class="line-modified">4749    *</span>
<span class="line-modified">4750    *   FREETYPE_MAJOR</span>
<span class="line-modified">4751    *   FREETYPE_MINOR</span>
<span class="line-modified">4752    *   FREETYPE_PATCH</span>
<span class="line-modified">4753    *</span>
<span class="line-modified">4754    *   FT_Face_CheckTrueTypePatents</span>
<span class="line-modified">4755    *   FT_Face_SetUnpatentedHinting</span>
<span class="line-modified">4756    *</span>
<span class="line-modified">4757    */</span>


4758 
4759 
<span class="line-modified">4760   /**************************************************************************</span>
4761    *
4762    * @enum:
4763    *   FREETYPE_XXX
4764    *
4765    * @description:
<span class="line-modified">4766    *   These three macros identify the FreeType source code version.  Use</span>
<span class="line-modified">4767    *   @FT_Library_Version to access them at runtime.</span>
4768    *
4769    * @values:
<span class="line-modified">4770    *   FREETYPE_MAJOR ::</span>
<span class="line-modified">4771    *     The major version number.</span>
<span class="line-modified">4772    *   FREETYPE_MINOR ::</span>
<span class="line-added">4773    *     The minor version number.</span>
<span class="line-added">4774    *   FREETYPE_PATCH ::</span>
<span class="line-added">4775    *     The patch level.</span>
4776    *
4777    * @note:
<span class="line-modified">4778    *   The version number of FreeType if built as a dynamic link library with</span>
<span class="line-modified">4779    *   the &#39;libtool&#39; package is _not_ controlled by these three macros.</span>

4780    *
4781    */
4782 #define FREETYPE_MAJOR  2
<span class="line-modified">4783 #define FREETYPE_MINOR  10</span>
4784 #define FREETYPE_PATCH  1
4785 
4786 
<span class="line-modified">4787   /**************************************************************************</span>
<span class="line-modified">4788    *</span>
<span class="line-modified">4789    * @function:</span>
<span class="line-modified">4790    *   FT_Library_Version</span>
<span class="line-modified">4791    *</span>
<span class="line-modified">4792    * @description:</span>
<span class="line-modified">4793    *   Return the version of the FreeType library being used.  This is useful</span>
<span class="line-modified">4794    *   when dynamically linking to the library, since one cannot use the</span>
<span class="line-modified">4795    *   macros @FREETYPE_MAJOR, @FREETYPE_MINOR, and @FREETYPE_PATCH.</span>
<span class="line-modified">4796    *</span>
<span class="line-modified">4797    * @input:</span>
<span class="line-modified">4798    *   library ::</span>
<span class="line-modified">4799    *     A source library handle.</span>
<span class="line-modified">4800    *</span>
<span class="line-modified">4801    * @output:</span>
<span class="line-modified">4802    *   amajor ::</span>
<span class="line-modified">4803    *     The major version number.</span>
<span class="line-modified">4804    *</span>
<span class="line-modified">4805    *   aminor ::</span>
<span class="line-modified">4806    *     The minor version number.</span>
<span class="line-modified">4807    *</span>
<span class="line-modified">4808    *   apatch ::</span>
<span class="line-modified">4809    *     The patch version number.</span>
<span class="line-modified">4810    *</span>
<span class="line-modified">4811    * @note:</span>
<span class="line-modified">4812    *   The reason why this function takes a `library` argument is because</span>
<span class="line-modified">4813    *   certain programs implement library initialization in a custom way that</span>
<span class="line-modified">4814    *   doesn&#39;t use @FT_Init_FreeType.</span>
<span class="line-modified">4815    *</span>
<span class="line-added">4816    *   In such cases, the library version might not be available before the</span>
<span class="line-added">4817    *   library object has been created.</span>
<span class="line-added">4818    */</span>
4819   FT_EXPORT( void )
4820   FT_Library_Version( FT_Library   library,
4821                       FT_Int      *amajor,
4822                       FT_Int      *aminor,
4823                       FT_Int      *apatch );
4824 
4825 
<span class="line-modified">4826   /**************************************************************************</span>
<span class="line-modified">4827    *</span>
<span class="line-modified">4828    * @function:</span>
<span class="line-modified">4829    *   FT_Face_CheckTrueTypePatents</span>
<span class="line-modified">4830    *</span>
<span class="line-modified">4831    * @description:</span>
<span class="line-modified">4832    *   Deprecated, does nothing.</span>
<span class="line-modified">4833    *</span>
<span class="line-modified">4834    * @input:</span>
<span class="line-modified">4835    *   face ::</span>
<span class="line-modified">4836    *     A face handle.</span>
<span class="line-modified">4837    *</span>
<span class="line-modified">4838    * @return:</span>
<span class="line-modified">4839    *   Always returns false.</span>
<span class="line-modified">4840    *</span>
<span class="line-modified">4841    * @note:</span>
<span class="line-modified">4842    *   Since May 2010, TrueType hinting is no longer patented.</span>
<span class="line-modified">4843    *</span>
<span class="line-modified">4844    * @since:</span>
<span class="line-modified">4845    *   2.3.5</span>
<span class="line-added">4846    */</span>
4847   FT_EXPORT( FT_Bool )
4848   FT_Face_CheckTrueTypePatents( FT_Face  face );
4849 
4850 
<span class="line-modified">4851   /**************************************************************************</span>
<span class="line-modified">4852    *</span>
<span class="line-modified">4853    * @function:</span>
<span class="line-modified">4854    *   FT_Face_SetUnpatentedHinting</span>
<span class="line-modified">4855    *</span>
<span class="line-modified">4856    * @description:</span>
<span class="line-modified">4857    *   Deprecated, does nothing.</span>
<span class="line-modified">4858    *</span>
<span class="line-modified">4859    * @input:</span>
<span class="line-modified">4860    *   face ::</span>
<span class="line-modified">4861    *     A face handle.</span>
<span class="line-modified">4862    *</span>
<span class="line-modified">4863    *   value ::</span>
<span class="line-modified">4864    *     New boolean setting.</span>
<span class="line-modified">4865    *</span>
<span class="line-modified">4866    * @return:</span>
<span class="line-modified">4867    *   Always returns false.</span>
<span class="line-modified">4868    *</span>
<span class="line-modified">4869    * @note:</span>
<span class="line-modified">4870    *   Since May 2010, TrueType hinting is no longer patented.</span>
<span class="line-modified">4871    *</span>
<span class="line-modified">4872    * @since:</span>
<span class="line-added">4873    *   2.3.5</span>
<span class="line-added">4874    */</span>
4875   FT_EXPORT( FT_Bool )
4876   FT_Face_SetUnpatentedHinting( FT_Face  face,
4877                                 FT_Bool  value );
4878 
4879   /* */
4880 
4881 
4882 FT_END_HEADER
4883 
4884 #endif /* FREETYPE_H_ */
4885 
4886 
4887 /* END */
</pre>
</td>
</tr>
</table>
<center><a href="config/ftstdlib.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftadvanc.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>