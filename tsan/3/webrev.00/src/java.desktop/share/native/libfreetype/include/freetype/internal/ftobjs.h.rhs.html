<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.desktop/share/native/libfreetype/include/freetype/internal/ftobjs.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre><a name="1" id="anc1"></a><span class="line-modified">   1 /****************************************************************************</span>
<span class="line-modified">   2  *</span>
<span class="line-modified">   3  * ftobjs.h</span>
<span class="line-modified">   4  *</span>
<span class="line-modified">   5  *   The FreeType private base classes (specification).</span>
<span class="line-modified">   6  *</span>
<span class="line-modified">   7  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">   8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">   9  *</span>
<span class="line-modified">  10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">  11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">  12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">  13  * this file you indicate that you have read the license and</span>
<span class="line-modified">  14  * understand and accept it fully.</span>
<span class="line-modified">  15  *</span>
<span class="line-modified">  16  */</span>
<span class="line-modified">  17 </span>
<span class="line-modified">  18 </span>
<span class="line-modified">  19   /**************************************************************************</span>
<span class="line-modified">  20    *</span>
<span class="line-modified">  21    * This file contains the definition of all internal FreeType classes.</span>
<span class="line-modified">  22    *</span>
<span class="line-modified">  23    */</span>
  24 
  25 
  26 #ifndef FTOBJS_H_
  27 #define FTOBJS_H_
  28 
  29 #include &lt;ft2build.h&gt;
  30 #include FT_RENDER_H
  31 #include FT_SIZES_H
  32 #include FT_LCD_FILTER_H
  33 #include FT_INTERNAL_MEMORY_H
  34 #include FT_INTERNAL_GLYPH_LOADER_H
  35 #include FT_INTERNAL_DRIVER_H
  36 #include FT_INTERNAL_AUTOHINT_H
  37 #include FT_INTERNAL_SERVICE_H
<a name="2" id="anc2"></a>
  38 #include FT_INTERNAL_CALC_H
  39 
  40 #ifdef FT_CONFIG_OPTION_INCREMENTAL
  41 #include FT_INCREMENTAL_H
  42 #endif
  43 
  44 
  45 FT_BEGIN_HEADER
  46 
  47 
<a name="3" id="anc3"></a><span class="line-modified">  48   /**************************************************************************</span>
<span class="line-modified">  49    *</span>
<span class="line-modified">  50    * Some generic definitions.</span>
<span class="line-modified">  51    */</span>
  52 #ifndef TRUE
  53 #define TRUE  1
  54 #endif
  55 
  56 #ifndef FALSE
  57 #define FALSE  0
  58 #endif
  59 
  60 #ifndef NULL
  61 #define NULL  (void*)0
  62 #endif
  63 
  64 
<a name="4" id="anc4"></a><span class="line-modified">  65   /**************************************************************************</span>
<span class="line-modified">  66    *</span>
<span class="line-modified">  67    * The min and max functions missing in C.  As usual, be careful not to</span>
<span class="line-modified">  68    * write things like FT_MIN( a++, b++ ) to avoid side effects.</span>
<span class="line-modified">  69    */</span>
  70 #define FT_MIN( a, b )  ( (a) &lt; (b) ? (a) : (b) )
  71 #define FT_MAX( a, b )  ( (a) &gt; (b) ? (a) : (b) )
  72 
  73 #define FT_ABS( a )     ( (a) &lt; 0 ? -(a) : (a) )
  74 
  75   /*
<a name="5" id="anc5"></a><span class="line-modified">  76    * Approximate sqrt(x*x+y*y) using the `alpha max plus beta min&#39; algorithm.</span>
<span class="line-modified">  77    * We use alpha = 1, beta = 3/8, giving us results with a largest error</span>
<span class="line-modified">  78    * less than 7% compared to the exact value.</span>
  79    */
  80 #define FT_HYPOT( x, y )                 \
  81           ( x = FT_ABS( x ),             \
  82             y = FT_ABS( y ),             \
  83             x &gt; y ? x + ( 3 * y &gt;&gt; 3 )   \
  84                   : y + ( 3 * x &gt;&gt; 3 ) )
  85 
  86   /* we use FT_TYPEOF to suppress signedness compilation warnings */
  87 #define FT_PAD_FLOOR( x, n )  ( (x) &amp; ~FT_TYPEOF( x )( (n) - 1 ) )
  88 #define FT_PAD_ROUND( x, n )  FT_PAD_FLOOR( (x) + (n) / 2, n )
  89 #define FT_PAD_CEIL( x, n )   FT_PAD_FLOOR( (x) + (n) - 1, n )
  90 
  91 #define FT_PIX_FLOOR( x )     ( (x) &amp; ~FT_TYPEOF( x )63 )
  92 #define FT_PIX_ROUND( x )     FT_PIX_FLOOR( (x) + 32 )
  93 #define FT_PIX_CEIL( x )      FT_PIX_FLOOR( (x) + 63 )
  94 
  95   /* specialized versions (for signed values)                   */
  96   /* that don&#39;t produce run-time errors due to integer overflow */
  97 #define FT_PAD_ROUND_LONG( x, n )  FT_PAD_FLOOR( ADD_LONG( (x), (n) / 2 ), \
  98                                                  n )
  99 #define FT_PAD_CEIL_LONG( x, n )   FT_PAD_FLOOR( ADD_LONG( (x), (n) - 1 ), \
 100                                                  n )
 101 #define FT_PIX_ROUND_LONG( x )     FT_PIX_FLOOR( ADD_LONG( (x), 32 ) )
 102 #define FT_PIX_CEIL_LONG( x )      FT_PIX_FLOOR( ADD_LONG( (x), 63 ) )
 103 
 104 #define FT_PAD_ROUND_INT32( x, n )  FT_PAD_FLOOR( ADD_INT32( (x), (n) / 2 ), \
 105                                                   n )
 106 #define FT_PAD_CEIL_INT32( x, n )   FT_PAD_FLOOR( ADD_INT32( (x), (n) - 1 ), \
 107                                                   n )
 108 #define FT_PIX_ROUND_INT32( x )     FT_PIX_FLOOR( ADD_INT32( (x), 32 ) )
 109 #define FT_PIX_CEIL_INT32( x )      FT_PIX_FLOOR( ADD_INT32( (x), 63 ) )
 110 
 111 
 112   /*
<a name="6" id="anc6"></a><span class="line-modified"> 113    * character classification functions -- since these are used to parse font</span>
<span class="line-modified"> 114    * files, we must not use those in &lt;ctypes.h&gt; which are locale-dependent</span>

 115    */
 116 #define  ft_isdigit( x )   ( ( (unsigned)(x) - &#39;0&#39; ) &lt; 10U )
 117 
 118 #define  ft_isxdigit( x )  ( ( (unsigned)(x) - &#39;0&#39; ) &lt; 10U || \
 119                              ( (unsigned)(x) - &#39;a&#39; ) &lt; 6U  || \
 120                              ( (unsigned)(x) - &#39;A&#39; ) &lt; 6U  )
 121 
 122   /* the next two macros assume ASCII representation */
 123 #define  ft_isupper( x )  ( ( (unsigned)(x) - &#39;A&#39; ) &lt; 26U )
 124 #define  ft_islower( x )  ( ( (unsigned)(x) - &#39;a&#39; ) &lt; 26U )
 125 
 126 #define  ft_isalpha( x )  ( ft_isupper( x ) || ft_islower( x ) )
 127 #define  ft_isalnum( x )  ( ft_isdigit( x ) || ft_isalpha( x ) )
 128 
 129 
 130   /*************************************************************************/
 131   /*************************************************************************/
 132   /*************************************************************************/
 133   /****                                                                 ****/
 134   /****                                                                 ****/
 135   /****                       C H A R M A P S                           ****/
 136   /****                                                                 ****/
 137   /****                                                                 ****/
 138   /*************************************************************************/
 139   /*************************************************************************/
 140   /*************************************************************************/
 141 
 142   /* handle to internal charmap object */
 143   typedef struct FT_CMapRec_*              FT_CMap;
 144 
 145   /* handle to charmap class structure */
 146   typedef const struct FT_CMap_ClassRec_*  FT_CMap_Class;
 147 
 148   /* internal charmap object structure */
 149   typedef struct  FT_CMapRec_
 150   {
 151     FT_CharMapRec  charmap;
 152     FT_CMap_Class  clazz;
 153 
 154   } FT_CMapRec;
 155 
 156   /* typecast any pointer to a charmap handle */
 157 #define FT_CMAP( x )  ( (FT_CMap)( x ) )
 158 
 159   /* obvious macros */
 160 #define FT_CMAP_PLATFORM_ID( x )  FT_CMAP( x )-&gt;charmap.platform_id
 161 #define FT_CMAP_ENCODING_ID( x )  FT_CMAP( x )-&gt;charmap.encoding_id
 162 #define FT_CMAP_ENCODING( x )     FT_CMAP( x )-&gt;charmap.encoding
 163 #define FT_CMAP_FACE( x )         FT_CMAP( x )-&gt;charmap.face
 164 
 165 
 166   /* class method definitions */
 167   typedef FT_Error
 168   (*FT_CMap_InitFunc)( FT_CMap     cmap,
 169                        FT_Pointer  init_data );
 170 
 171   typedef void
 172   (*FT_CMap_DoneFunc)( FT_CMap  cmap );
 173 
 174   typedef FT_UInt
 175   (*FT_CMap_CharIndexFunc)( FT_CMap    cmap,
 176                             FT_UInt32  char_code );
 177 
 178   typedef FT_UInt
 179   (*FT_CMap_CharNextFunc)( FT_CMap     cmap,
 180                            FT_UInt32  *achar_code );
 181 
 182   typedef FT_UInt
 183   (*FT_CMap_CharVarIndexFunc)( FT_CMap    cmap,
 184                                FT_CMap    unicode_cmap,
 185                                FT_UInt32  char_code,
 186                                FT_UInt32  variant_selector );
 187 
<a name="7" id="anc7"></a><span class="line-modified"> 188   typedef FT_Int</span>
 189   (*FT_CMap_CharVarIsDefaultFunc)( FT_CMap    cmap,
 190                                    FT_UInt32  char_code,
 191                                    FT_UInt32  variant_selector );
 192 
 193   typedef FT_UInt32 *
 194   (*FT_CMap_VariantListFunc)( FT_CMap    cmap,
 195                               FT_Memory  mem );
 196 
 197   typedef FT_UInt32 *
 198   (*FT_CMap_CharVariantListFunc)( FT_CMap    cmap,
 199                                   FT_Memory  mem,
 200                                   FT_UInt32  char_code );
 201 
 202   typedef FT_UInt32 *
 203   (*FT_CMap_VariantCharListFunc)( FT_CMap    cmap,
 204                                   FT_Memory  mem,
 205                                   FT_UInt32  variant_selector );
 206 
 207 
 208   typedef struct  FT_CMap_ClassRec_
 209   {
 210     FT_ULong               size;
 211 
 212     FT_CMap_InitFunc       init;
 213     FT_CMap_DoneFunc       done;
 214     FT_CMap_CharIndexFunc  char_index;
 215     FT_CMap_CharNextFunc   char_next;
 216 
 217     /* Subsequent entries are special ones for format 14 -- the variant */
 218     /* selector subtable which behaves like no other                    */
 219 
 220     FT_CMap_CharVarIndexFunc      char_var_index;
 221     FT_CMap_CharVarIsDefaultFunc  char_var_default;
 222     FT_CMap_VariantListFunc       variant_list;
 223     FT_CMap_CharVariantListFunc   charvariant_list;
 224     FT_CMap_VariantCharListFunc   variantchar_list;
 225 
 226   } FT_CMap_ClassRec;
 227 
 228 
<a name="8" id="anc8"></a>

 229 #define FT_DECLARE_CMAP_CLASS( class_ )              \
 230   FT_CALLBACK_TABLE const  FT_CMap_ClassRec class_;
 231 
 232 #define FT_DEFINE_CMAP_CLASS(       \
 233           class_,                   \
 234           size_,                    \
 235           init_,                    \
 236           done_,                    \
 237           char_index_,              \
 238           char_next_,               \
 239           char_var_index_,          \
 240           char_var_default_,        \
 241           variant_list_,            \
 242           charvariant_list_,        \
 243           variantchar_list_ )       \
 244   FT_CALLBACK_TABLE_DEF             \
 245   const FT_CMap_ClassRec  class_ =  \
 246   {                                 \
 247     size_,                          \
 248     init_,                          \
 249     done_,                          \
 250     char_index_,                    \
 251     char_next_,                     \
 252     char_var_index_,                \
 253     char_var_default_,              \
 254     variant_list_,                  \
 255     charvariant_list_,              \
 256     variantchar_list_               \
 257   };
 258 
<a name="9" id="anc9"></a>






































 259 
 260   /* create a new charmap and add it to charmap-&gt;face */
 261   FT_BASE( FT_Error )
 262   FT_CMap_New( FT_CMap_Class  clazz,
 263                FT_Pointer     init_data,
 264                FT_CharMap     charmap,
 265                FT_CMap       *acmap );
 266 
 267   /* destroy a charmap and remove it from face&#39;s list */
 268   FT_BASE( void )
 269   FT_CMap_Done( FT_CMap  cmap );
 270 
 271 
<a name="10" id="anc10"></a><span class="line-modified"> 272   /* add LCD padding to CBox */</span>
 273   FT_BASE( void )
<a name="11" id="anc11"></a><span class="line-modified"> 274   ft_lcd_padding( FT_BBox*        cbox,</span>
<span class="line-modified"> 275                   FT_GlyphSlot    slot,</span>
<span class="line-modified"> 276                   FT_Render_Mode  mode );</span>
 277 
 278 #ifdef FT_CONFIG_OPTION_SUBPIXEL_RENDERING
 279 
 280   typedef void  (*FT_Bitmap_LcdFilterFunc)( FT_Bitmap*      bitmap,
<a name="12" id="anc12"></a>
 281                                             FT_Byte*        weights );
 282 
 283 
 284   /* This is the default LCD filter, an in-place, 5-tap FIR filter. */
 285   FT_BASE( void )
 286   ft_lcd_filter_fir( FT_Bitmap*           bitmap,
<a name="13" id="anc13"></a>
 287                      FT_LcdFiveTapFilter  weights );
 288 
 289 #endif /* FT_CONFIG_OPTION_SUBPIXEL_RENDERING */
 290 
<a name="14" id="anc14"></a><span class="line-modified"> 291   /**************************************************************************</span>
<span class="line-modified"> 292    *</span>
<span class="line-modified"> 293    * @struct:</span>
<span class="line-modified"> 294    *   FT_Face_InternalRec</span>
<span class="line-modified"> 295    *</span>
<span class="line-modified"> 296    * @description:</span>
<span class="line-modified"> 297    *   This structure contains the internal fields of each FT_Face object.</span>
<span class="line-modified"> 298    *   These fields may change between different releases of FreeType.</span>
<span class="line-modified"> 299    *</span>
<span class="line-modified"> 300    * @fields:</span>
<span class="line-modified"> 301    *   max_points ::</span>
<span class="line-modified"> 302    *     The maximum number of points used to store the vectorial outline of</span>
<span class="line-modified"> 303    *     any glyph in this face.  If this value cannot be known in advance,</span>
<span class="line-modified"> 304    *     or if the face isn&#39;t scalable, this should be set to 0.  Only</span>
<span class="line-modified"> 305    *     relevant for scalable formats.</span>
<span class="line-modified"> 306    *</span>
<span class="line-modified"> 307    *   max_contours ::</span>
<span class="line-modified"> 308    *     The maximum number of contours used to store the vectorial outline</span>
<span class="line-modified"> 309    *     of any glyph in this face.  If this value cannot be known in</span>
<span class="line-modified"> 310    *     advance, or if the face isn&#39;t scalable, this should be set to 0.</span>
<span class="line-modified"> 311    *     Only relevant for scalable formats.</span>
<span class="line-modified"> 312    *</span>
<span class="line-modified"> 313    *   transform_matrix ::</span>
<span class="line-modified"> 314    *     A 2x2 matrix of 16.16 coefficients used to transform glyph outlines</span>
<span class="line-modified"> 315    *     after they are loaded from the font.  Only used by the convenience</span>
<span class="line-modified"> 316    *     functions.</span>
<span class="line-modified"> 317    *</span>
<span class="line-modified"> 318    *   transform_delta ::</span>
<span class="line-modified"> 319    *     A translation vector used to transform glyph outlines after they are</span>
<span class="line-modified"> 320    *     loaded from the font.  Only used by the convenience functions.</span>
<span class="line-modified"> 321    *</span>
<span class="line-modified"> 322    *   transform_flags ::</span>
<span class="line-modified"> 323    *     Some flags used to classify the transform.  Only used by the</span>
<span class="line-modified"> 324    *     convenience functions.</span>
<span class="line-modified"> 325    *</span>
<span class="line-modified"> 326    *   services ::</span>
<span class="line-modified"> 327    *     A cache for frequently used services.  It should be only accessed</span>
<span class="line-modified"> 328    *     with the macro `FT_FACE_LOOKUP_SERVICE`.</span>
<span class="line-modified"> 329    *</span>
<span class="line-modified"> 330    *   incremental_interface ::</span>
<span class="line-modified"> 331    *     If non-null, the interface through which glyph data and metrics are</span>
<span class="line-modified"> 332    *     loaded incrementally for faces that do not provide all of this data</span>
<span class="line-modified"> 333    *     when first opened.  This field exists only if</span>
<span class="line-modified"> 334    *     @FT_CONFIG_OPTION_INCREMENTAL is defined.</span>
<span class="line-modified"> 335    *</span>
<span class="line-modified"> 336    *   no_stem_darkening ::</span>
<span class="line-modified"> 337    *     Overrides the module-level default, see @stem-darkening[cff], for</span>
<span class="line-modified"> 338    *     example.  FALSE and TRUE toggle stem darkening on and off,</span>
<span class="line-modified"> 339    *     respectively, value~-1 means to use the module/driver default.</span>
<span class="line-modified"> 340    *</span>
<span class="line-modified"> 341    *   random_seed ::</span>
<span class="line-modified"> 342    *     If positive, override the seed value for the CFF &#39;random&#39; operator.</span>
<span class="line-modified"> 343    *     Value~0 means to use the font&#39;s value.  Value~-1 means to use the</span>
<span class="line-modified"> 344    *     CFF driver&#39;s default.</span>
<span class="line-modified"> 345    *</span>
<span class="line-modified"> 346    *   lcd_weights ::</span>
<span class="line-modified"> 347    *   lcd_filter_func ::</span>
<span class="line-modified"> 348    *     These fields specify the LCD filtering weights and callback function</span>
<span class="line-modified"> 349    *     for ClearType-style subpixel rendering.</span>
<span class="line-modified"> 350    *</span>
<span class="line-modified"> 351    *   refcount ::</span>
<span class="line-modified"> 352    *     A counter initialized to~1 at the time an @FT_Face structure is</span>
<span class="line-modified"> 353    *     created.  @FT_Reference_Face increments this counter, and</span>
<span class="line-modified"> 354    *     @FT_Done_Face only destroys a face if the counter is~1, otherwise it</span>
<span class="line-modified"> 355    *     simply decrements it.</span>
<span class="line-modified"> 356    */</span>


 357   typedef struct  FT_Face_InternalRec_
 358   {
 359     FT_Matrix  transform_matrix;
 360     FT_Vector  transform_delta;
 361     FT_Int     transform_flags;
 362 
 363     FT_ServiceCacheRec  services;
 364 
 365 #ifdef FT_CONFIG_OPTION_INCREMENTAL
 366     FT_Incremental_InterfaceRec*  incremental_interface;
 367 #endif
 368 
 369     FT_Char              no_stem_darkening;
 370     FT_Int32             random_seed;
 371 
 372 #ifdef FT_CONFIG_OPTION_SUBPIXEL_RENDERING
 373     FT_LcdFiveTapFilter      lcd_weights;      /* filter weights, if any */
 374     FT_Bitmap_LcdFilterFunc  lcd_filter_func;  /* filtering callback     */
 375 #endif
 376 
 377     FT_Int  refcount;
 378 
 379   } FT_Face_InternalRec;
 380 
 381 
<a name="15" id="anc15"></a><span class="line-modified"> 382   /**************************************************************************</span>
<span class="line-modified"> 383    *</span>
<span class="line-modified"> 384    * @struct:</span>
<span class="line-modified"> 385    *   FT_Slot_InternalRec</span>
<span class="line-modified"> 386    *</span>
<span class="line-modified"> 387    * @description:</span>
<span class="line-modified"> 388    *   This structure contains the internal fields of each FT_GlyphSlot</span>
<span class="line-modified"> 389    *   object.  These fields may change between different releases of</span>
<span class="line-modified"> 390    *   FreeType.</span>
<span class="line-modified"> 391    *</span>
<span class="line-modified"> 392    * @fields:</span>
<span class="line-modified"> 393    *   loader ::</span>
<span class="line-modified"> 394    *     The glyph loader object used to load outlines into the glyph slot.</span>
<span class="line-modified"> 395    *</span>
<span class="line-modified"> 396    *   flags ::</span>
<span class="line-modified"> 397    *     Possible values are zero or FT_GLYPH_OWN_BITMAP.  The latter</span>
<span class="line-modified"> 398    *     indicates that the FT_GlyphSlot structure owns the bitmap buffer.</span>
<span class="line-modified"> 399    *</span>
<span class="line-modified"> 400    *   glyph_transformed ::</span>
<span class="line-modified"> 401    *     Boolean.  Set to TRUE when the loaded glyph must be transformed</span>
<span class="line-modified"> 402    *     through a specific font transformation.  This is _not_ the same as</span>
<span class="line-modified"> 403    *     the face transform set through FT_Set_Transform().</span>
<span class="line-modified"> 404    *</span>
<span class="line-modified"> 405    *   glyph_matrix ::</span>
<span class="line-modified"> 406    *     The 2x2 matrix corresponding to the glyph transformation, if</span>
<span class="line-modified"> 407    *     necessary.</span>
<span class="line-modified"> 408    *</span>
<span class="line-modified"> 409    *   glyph_delta ::</span>
<span class="line-modified"> 410    *     The 2d translation vector corresponding to the glyph transformation,</span>
<span class="line-modified"> 411    *     if necessary.</span>
<span class="line-modified"> 412    *</span>
<span class="line-modified"> 413    *   glyph_hints ::</span>
<span class="line-modified"> 414    *     Format-specific glyph hints management.</span>
<span class="line-added"> 415    *</span>
<span class="line-added"> 416    *   load_flags ::</span>
<span class="line-added"> 417    *     The load flags passed as an argument to @FT_Load_Glyph while</span>
<span class="line-added"> 418    *     initializing the glyph slot.</span>
<span class="line-added"> 419    */</span>
 420 
 421 #define FT_GLYPH_OWN_BITMAP  0x1U
 422 
 423   typedef struct  FT_Slot_InternalRec_
 424   {
 425     FT_GlyphLoader  loader;
 426     FT_UInt         flags;
 427     FT_Bool         glyph_transformed;
 428     FT_Matrix       glyph_matrix;
 429     FT_Vector       glyph_delta;
 430     void*           glyph_hints;
 431 
<a name="16" id="anc16"></a><span class="line-added"> 432     FT_Int32        load_flags;</span>
<span class="line-added"> 433 </span>
 434   } FT_GlyphSlot_InternalRec;
 435 
 436 
<a name="17" id="anc17"></a><span class="line-modified"> 437   /**************************************************************************</span>
<span class="line-modified"> 438    *</span>
<span class="line-modified"> 439    * @struct:</span>
<span class="line-modified"> 440    *   FT_Size_InternalRec</span>
<span class="line-modified"> 441    *</span>
<span class="line-modified"> 442    * @description:</span>
<span class="line-modified"> 443    *   This structure contains the internal fields of each FT_Size object.</span>
<span class="line-modified"> 444    *</span>
<span class="line-modified"> 445    * @fields:</span>
<span class="line-modified"> 446    *   module_data ::</span>
<span class="line-modified"> 447    *     Data specific to a driver module.</span>
<span class="line-modified"> 448    *</span>
<span class="line-modified"> 449    *   autohint_mode ::</span>
<span class="line-modified"> 450    *     The used auto-hinting mode.</span>
<span class="line-modified"> 451    *</span>
<span class="line-modified"> 452    *   autohint_metrics ::</span>
<span class="line-modified"> 453    *     Metrics used by the auto-hinter.</span>
<span class="line-added"> 454    *</span>
<span class="line-added"> 455    */</span>
 456 
 457   typedef struct  FT_Size_InternalRec_
 458   {
 459     void*  module_data;
 460 
 461     FT_Render_Mode   autohint_mode;
 462     FT_Size_Metrics  autohint_metrics;
 463 
 464   } FT_Size_InternalRec;
 465 
 466 
 467   /*************************************************************************/
 468   /*************************************************************************/
 469   /*************************************************************************/
 470   /****                                                                 ****/
 471   /****                                                                 ****/
 472   /****                         M O D U L E S                           ****/
 473   /****                                                                 ****/
 474   /****                                                                 ****/
 475   /*************************************************************************/
 476   /*************************************************************************/
 477   /*************************************************************************/
 478 
 479 
<a name="18" id="anc18"></a><span class="line-modified"> 480   /**************************************************************************</span>
<span class="line-modified"> 481    *</span>
<span class="line-modified"> 482    * @struct:</span>
<span class="line-modified"> 483    *   FT_ModuleRec</span>
<span class="line-modified"> 484    *</span>
<span class="line-modified"> 485    * @description:</span>
<span class="line-modified"> 486    *   A module object instance.</span>
<span class="line-modified"> 487    *</span>
<span class="line-modified"> 488    * @fields:</span>
<span class="line-modified"> 489    *   clazz ::</span>
<span class="line-modified"> 490    *     A pointer to the module&#39;s class.</span>
<span class="line-modified"> 491    *</span>
<span class="line-modified"> 492    *   library ::</span>
<span class="line-modified"> 493    *     A handle to the parent library object.</span>
<span class="line-modified"> 494    *</span>
<span class="line-added"> 495    *   memory ::</span>
<span class="line-added"> 496    *     A handle to the memory manager.</span>
<span class="line-added"> 497    */</span>
 498   typedef struct  FT_ModuleRec_
 499   {
 500     FT_Module_Class*  clazz;
 501     FT_Library        library;
 502     FT_Memory         memory;
 503 
 504   } FT_ModuleRec;
 505 
 506 
 507   /* typecast an object to an FT_Module */
 508 #define FT_MODULE( x )  ( (FT_Module)(x) )
 509 
 510 #define FT_MODULE_CLASS( x )    FT_MODULE( x )-&gt;clazz
 511 #define FT_MODULE_LIBRARY( x )  FT_MODULE( x )-&gt;library
 512 #define FT_MODULE_MEMORY( x )   FT_MODULE( x )-&gt;memory
 513 
 514 
 515 #define FT_MODULE_IS_DRIVER( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 516                                     FT_MODULE_FONT_DRIVER )
 517 
 518 #define FT_MODULE_IS_RENDERER( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 519                                       FT_MODULE_RENDERER )
 520 
 521 #define FT_MODULE_IS_HINTER( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 522                                     FT_MODULE_HINTER )
 523 
 524 #define FT_MODULE_IS_STYLER( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 525                                     FT_MODULE_STYLER )
 526 
 527 #define FT_DRIVER_IS_SCALABLE( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 528                                       FT_MODULE_DRIVER_SCALABLE )
 529 
 530 #define FT_DRIVER_USES_OUTLINES( x )  !( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 531                                          FT_MODULE_DRIVER_NO_OUTLINES )
 532 
 533 #define FT_DRIVER_HAS_HINTER( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 534                                      FT_MODULE_DRIVER_HAS_HINTER )
 535 
 536 #define FT_DRIVER_HINTS_LIGHTLY( x )  ( FT_MODULE_CLASS( x )-&gt;module_flags &amp; \
 537                                         FT_MODULE_DRIVER_HINTS_LIGHTLY )
 538 
 539 
<a name="19" id="anc19"></a><span class="line-modified"> 540   /**************************************************************************</span>
<span class="line-modified"> 541    *</span>
<span class="line-modified"> 542    * @function:</span>
<span class="line-modified"> 543    *   FT_Get_Module_Interface</span>
<span class="line-modified"> 544    *</span>
<span class="line-modified"> 545    * @description:</span>
<span class="line-modified"> 546    *   Finds a module and returns its specific interface as a typeless</span>
<span class="line-modified"> 547    *   pointer.</span>
<span class="line-modified"> 548    *</span>
<span class="line-modified"> 549    * @input:</span>
<span class="line-modified"> 550    *   library ::</span>
<span class="line-modified"> 551    *     A handle to the library object.</span>
<span class="line-modified"> 552    *</span>
<span class="line-modified"> 553    *   module_name ::</span>
<span class="line-modified"> 554    *     The module&#39;s name (as an ASCII string).</span>
<span class="line-modified"> 555    *</span>
<span class="line-modified"> 556    * @return:</span>
<span class="line-modified"> 557    *   A module-specific interface if available, 0 otherwise.</span>
<span class="line-modified"> 558    *</span>
<span class="line-modified"> 559    * @note:</span>
<span class="line-modified"> 560    *   You should better be familiar with FreeType internals to know which</span>
<span class="line-added"> 561    *   module to look for, and what its interface is :-)</span>
<span class="line-added"> 562    */</span>
 563   FT_BASE( const void* )
 564   FT_Get_Module_Interface( FT_Library   library,
 565                            const char*  mod_name );
 566 
 567   FT_BASE( FT_Pointer )
 568   ft_module_get_service( FT_Module    module,
 569                          const char*  service_id,
 570                          FT_Bool      global );
 571 
 572 #ifdef FT_CONFIG_OPTION_ENVIRONMENT_PROPERTIES
 573   FT_BASE( FT_Error )
 574   ft_property_string_set( FT_Library        library,
 575                           const FT_String*  module_name,
 576                           const FT_String*  property_name,
 577                           FT_String*        value );
 578 #endif
 579 
 580   /* */
 581 
 582 
 583   /*************************************************************************/
 584   /*************************************************************************/
 585   /*************************************************************************/
 586   /****                                                                 ****/
 587   /****                                                                 ****/
 588   /****   F A C E,   S I Z E   &amp;   G L Y P H   S L O T   O B J E C T S  ****/
 589   /****                                                                 ****/
 590   /****                                                                 ****/
 591   /*************************************************************************/
 592   /*************************************************************************/
 593   /*************************************************************************/
 594 
 595   /* a few macros used to perform easy typecasts with minimal brain damage */
 596 
 597 #define FT_FACE( x )          ( (FT_Face)(x) )
 598 #define FT_SIZE( x )          ( (FT_Size)(x) )
 599 #define FT_SLOT( x )          ( (FT_GlyphSlot)(x) )
 600 
 601 #define FT_FACE_DRIVER( x )   FT_FACE( x )-&gt;driver
 602 #define FT_FACE_LIBRARY( x )  FT_FACE_DRIVER( x )-&gt;root.library
 603 #define FT_FACE_MEMORY( x )   FT_FACE( x )-&gt;memory
 604 #define FT_FACE_STREAM( x )   FT_FACE( x )-&gt;stream
 605 
 606 #define FT_SIZE_FACE( x )     FT_SIZE( x )-&gt;face
 607 #define FT_SLOT_FACE( x )     FT_SLOT( x )-&gt;face
 608 
 609 #define FT_FACE_SLOT( x )     FT_FACE( x )-&gt;glyph
 610 #define FT_FACE_SIZE( x )     FT_FACE( x )-&gt;size
 611 
 612 
<a name="20" id="anc20"></a><span class="line-modified"> 613   /**************************************************************************</span>
<span class="line-modified"> 614    *</span>
<span class="line-modified"> 615    * @function:</span>
<span class="line-modified"> 616    *   FT_New_GlyphSlot</span>
<span class="line-modified"> 617    *</span>
<span class="line-modified"> 618    * @description:</span>
<span class="line-modified"> 619    *   It is sometimes useful to have more than one glyph slot for a given</span>
<span class="line-modified"> 620    *   face object.  This function is used to create additional slots.  All</span>
<span class="line-modified"> 621    *   of them are automatically discarded when the face is destroyed.</span>
<span class="line-modified"> 622    *</span>
<span class="line-modified"> 623    * @input:</span>
<span class="line-modified"> 624    *   face ::</span>
<span class="line-modified"> 625    *     A handle to a parent face object.</span>
<span class="line-modified"> 626    *</span>
<span class="line-modified"> 627    * @output:</span>
<span class="line-modified"> 628    *   aslot ::</span>
<span class="line-modified"> 629    *     A handle to a new glyph slot object.</span>
<span class="line-modified"> 630    *</span>
<span class="line-modified"> 631    * @return:</span>
<span class="line-modified"> 632    *   FreeType error code.  0 means success.</span>
<span class="line-added"> 633    */</span>
 634   FT_BASE( FT_Error )
 635   FT_New_GlyphSlot( FT_Face        face,
 636                     FT_GlyphSlot  *aslot );
 637 
 638 
<a name="21" id="anc21"></a><span class="line-modified"> 639   /**************************************************************************</span>
<span class="line-modified"> 640    *</span>
<span class="line-modified"> 641    * @function:</span>
<span class="line-modified"> 642    *   FT_Done_GlyphSlot</span>
<span class="line-modified"> 643    *</span>
<span class="line-modified"> 644    * @description:</span>
<span class="line-modified"> 645    *   Destroys a given glyph slot.  Remember however that all slots are</span>
<span class="line-modified"> 646    *   automatically destroyed with its parent.  Using this function is not</span>
<span class="line-modified"> 647    *   always mandatory.</span>
<span class="line-modified"> 648    *</span>
<span class="line-modified"> 649    * @input:</span>
<span class="line-modified"> 650    *   slot ::</span>
<span class="line-modified"> 651    *     A handle to a target glyph slot.</span>
<span class="line-added"> 652    */</span>
 653   FT_BASE( void )
 654   FT_Done_GlyphSlot( FT_GlyphSlot  slot );
 655 
 656  /* */
 657 
 658 #define FT_REQUEST_WIDTH( req )                                            \
 659           ( (req)-&gt;horiResolution                                          \
 660               ? ( (req)-&gt;width * (FT_Pos)(req)-&gt;horiResolution + 36 ) / 72 \
 661               : (req)-&gt;width )
 662 
 663 #define FT_REQUEST_HEIGHT( req )                                            \
 664           ( (req)-&gt;vertResolution                                           \
 665               ? ( (req)-&gt;height * (FT_Pos)(req)-&gt;vertResolution + 36 ) / 72 \
 666               : (req)-&gt;height )
 667 
 668 
 669   /* Set the metrics according to a bitmap strike. */
 670   FT_BASE( void )
 671   FT_Select_Metrics( FT_Face   face,
 672                      FT_ULong  strike_index );
 673 
 674 
 675   /* Set the metrics according to a size request. */
 676   FT_BASE( void )
 677   FT_Request_Metrics( FT_Face          face,
 678                       FT_Size_Request  req );
 679 
 680 
 681   /* Match a size request against `available_sizes&#39;. */
 682   FT_BASE( FT_Error )
 683   FT_Match_Size( FT_Face          face,
 684                  FT_Size_Request  req,
 685                  FT_Bool          ignore_width,
 686                  FT_ULong*        size_index );
 687 
 688 
 689   /* Use the horizontal metrics to synthesize the vertical metrics. */
 690   /* If `advance&#39; is zero, it is also synthesized.                  */
 691   FT_BASE( void )
 692   ft_synthesize_vertical_metrics( FT_Glyph_Metrics*  metrics,
 693                                   FT_Pos             advance );
 694 
 695 
 696   /* Free the bitmap of a given glyphslot when needed (i.e., only when it */
 697   /* was allocated with ft_glyphslot_alloc_bitmap).                       */
 698   FT_BASE( void )
 699   ft_glyphslot_free_bitmap( FT_GlyphSlot  slot );
 700 
 701 
<a name="22" id="anc22"></a><span class="line-modified"> 702   /* Preset bitmap metrics of an outline glyphslot prior to rendering */</span>
<span class="line-modified"> 703   /* and check whether the truncated bbox is too large for rendering. */</span>
<span class="line-added"> 704   FT_BASE( FT_Bool )</span>
 705   ft_glyphslot_preset_bitmap( FT_GlyphSlot      slot,
 706                               FT_Render_Mode    mode,
 707                               const FT_Vector*  origin );
 708 
 709   /* Allocate a new bitmap buffer in a glyph slot. */
 710   FT_BASE( FT_Error )
 711   ft_glyphslot_alloc_bitmap( FT_GlyphSlot  slot,
 712                              FT_ULong      size );
 713 
 714 
 715   /* Set the bitmap buffer in a glyph slot to a given pointer.  The buffer */
 716   /* will not be freed by a later call to ft_glyphslot_free_bitmap.        */
 717   FT_BASE( void )
 718   ft_glyphslot_set_bitmap( FT_GlyphSlot  slot,
 719                            FT_Byte*      buffer );
 720 
 721 
 722   /*************************************************************************/
 723   /*************************************************************************/
 724   /*************************************************************************/
 725   /****                                                                 ****/
 726   /****                                                                 ****/
 727   /****                        R E N D E R E R S                        ****/
 728   /****                                                                 ****/
 729   /****                                                                 ****/
 730   /*************************************************************************/
 731   /*************************************************************************/
 732   /*************************************************************************/
 733 
 734 
 735 #define FT_RENDERER( x )       ( (FT_Renderer)(x) )
 736 #define FT_GLYPH( x )          ( (FT_Glyph)(x) )
 737 #define FT_BITMAP_GLYPH( x )   ( (FT_BitmapGlyph)(x) )
 738 #define FT_OUTLINE_GLYPH( x )  ( (FT_OutlineGlyph)(x) )
 739 
 740 
 741   typedef struct  FT_RendererRec_
 742   {
 743     FT_ModuleRec            root;
 744     FT_Renderer_Class*      clazz;
 745     FT_Glyph_Format         glyph_format;
 746     FT_Glyph_Class          glyph_class;
 747 
 748     FT_Raster               raster;
 749     FT_Raster_Render_Func   raster_render;
 750     FT_Renderer_RenderFunc  render;
 751 
 752   } FT_RendererRec;
 753 
 754 
 755   /*************************************************************************/
 756   /*************************************************************************/
 757   /*************************************************************************/
 758   /****                                                                 ****/
 759   /****                                                                 ****/
 760   /****                    F O N T   D R I V E R S                      ****/
 761   /****                                                                 ****/
 762   /****                                                                 ****/
 763   /*************************************************************************/
 764   /*************************************************************************/
 765   /*************************************************************************/
 766 
 767 
 768   /* typecast a module into a driver easily */
 769 #define FT_DRIVER( x )  ( (FT_Driver)(x) )
 770 
 771   /* typecast a module as a driver, and get its driver class */
 772 #define FT_DRIVER_CLASS( x )  FT_DRIVER( x )-&gt;clazz
 773 
 774 
<a name="23" id="anc23"></a><span class="line-modified"> 775   /**************************************************************************</span>
<span class="line-modified"> 776    *</span>
<span class="line-modified"> 777    * @struct:</span>
<span class="line-modified"> 778    *   FT_DriverRec</span>
<span class="line-modified"> 779    *</span>
<span class="line-modified"> 780    * @description:</span>
<span class="line-modified"> 781    *   The root font driver class.  A font driver is responsible for managing</span>
<span class="line-modified"> 782    *   and loading font files of a given format.</span>
<span class="line-modified"> 783    *</span>
<span class="line-modified"> 784    * @fields:</span>
<span class="line-modified"> 785    *   root ::</span>
<span class="line-modified"> 786    *     Contains the fields of the root module class.</span>
<span class="line-modified"> 787    *</span>
<span class="line-modified"> 788    *   clazz ::</span>
<span class="line-modified"> 789    *     A pointer to the font driver&#39;s class.  Note that this is NOT</span>
<span class="line-modified"> 790    *     root.clazz.  &#39;class&#39; wasn&#39;t used as it is a reserved word in C++.</span>
<span class="line-modified"> 791    *</span>
<span class="line-modified"> 792    *   faces_list ::</span>
<span class="line-modified"> 793    *     The list of faces currently opened by this driver.</span>
<span class="line-modified"> 794    *</span>
<span class="line-modified"> 795    *   glyph_loader ::</span>
<span class="line-modified"> 796    *     Unused.  Used to be glyph loader for all faces managed by this</span>
<span class="line-added"> 797    *     driver.</span>
<span class="line-added"> 798    */</span>
 799   typedef struct  FT_DriverRec_
 800   {
 801     FT_ModuleRec     root;
 802     FT_Driver_Class  clazz;
 803     FT_ListRec       faces_list;
 804     FT_GlyphLoader   glyph_loader;
 805 
 806   } FT_DriverRec;
 807 
 808 
 809   /*************************************************************************/
 810   /*************************************************************************/
 811   /*************************************************************************/
 812   /****                                                                 ****/
 813   /****                                                                 ****/
 814   /****                       L I B R A R I E S                         ****/
 815   /****                                                                 ****/
 816   /****                                                                 ****/
 817   /*************************************************************************/
 818   /*************************************************************************/
 819   /*************************************************************************/
 820 
 821 
<a name="24" id="anc24"></a><span class="line-modified"> 822   /**************************************************************************</span>
<span class="line-modified"> 823    *</span>
<span class="line-modified"> 824    * @struct:</span>
<span class="line-modified"> 825    *   FT_LibraryRec</span>
<span class="line-modified"> 826    *</span>
<span class="line-modified"> 827    * @description:</span>
<span class="line-modified"> 828    *   The FreeType library class.  This is the root of all FreeType data.</span>
<span class="line-modified"> 829    *   Use FT_New_Library() to create a library object, and FT_Done_Library()</span>
<span class="line-modified"> 830    *   to discard it and all child objects.</span>
<span class="line-modified"> 831    *</span>
<span class="line-modified"> 832    * @fields:</span>
<span class="line-modified"> 833    *   memory ::</span>
<span class="line-modified"> 834    *     The library&#39;s memory object.  Manages memory allocation.</span>
<span class="line-modified"> 835    *</span>
<span class="line-modified"> 836    *   version_major ::</span>
<span class="line-modified"> 837    *     The major version number of the library.</span>
<span class="line-modified"> 838    *</span>
<span class="line-modified"> 839    *   version_minor ::</span>
<span class="line-modified"> 840    *     The minor version number of the library.</span>
<span class="line-modified"> 841    *</span>
<span class="line-modified"> 842    *   version_patch ::</span>
<span class="line-modified"> 843    *     The current patch level of the library.</span>
<span class="line-modified"> 844    *</span>
<span class="line-modified"> 845    *   num_modules ::</span>
<span class="line-modified"> 846    *     The number of modules currently registered within this library.</span>
<span class="line-modified"> 847    *     This is set to 0 for new libraries.  New modules are added through</span>
<span class="line-modified"> 848    *     the FT_Add_Module() API function.</span>
<span class="line-modified"> 849    *</span>
<span class="line-modified"> 850    *   modules ::</span>
<span class="line-modified"> 851    *     A table used to store handles to the currently registered</span>
<span class="line-modified"> 852    *     modules. Note that each font driver contains a list of its opened</span>
<span class="line-modified"> 853    *     faces.</span>
<span class="line-modified"> 854    *</span>
<span class="line-modified"> 855    *   renderers ::</span>
<span class="line-modified"> 856    *     The list of renderers currently registered within the library.</span>
<span class="line-modified"> 857    *</span>
<span class="line-modified"> 858    *   cur_renderer ::</span>
<span class="line-modified"> 859    *     The current outline renderer.  This is a shortcut used to avoid</span>
<span class="line-modified"> 860    *     parsing the list on each call to FT_Outline_Render().  It is a</span>
<span class="line-modified"> 861    *     handle to the current renderer for the FT_GLYPH_FORMAT_OUTLINE</span>
<span class="line-modified"> 862    *     format.</span>
<span class="line-modified"> 863    *</span>
<span class="line-modified"> 864    *   auto_hinter ::</span>
<span class="line-modified"> 865    *     The auto-hinter module interface.</span>
<span class="line-modified"> 866    *</span>
<span class="line-modified"> 867    *   debug_hooks ::</span>
<span class="line-modified"> 868    *     An array of four function pointers that allow debuggers to hook into</span>
<span class="line-modified"> 869    *     a font format&#39;s interpreter.  Currently, only the TrueType bytecode</span>
<span class="line-modified"> 870    *     debugger uses this.</span>
<span class="line-modified"> 871    *</span>
<span class="line-modified"> 872    *   lcd_weights ::</span>
<span class="line-modified"> 873    *     The LCD filter weights for ClearType-style subpixel rendering.</span>
<span class="line-modified"> 874    *</span>
<span class="line-modified"> 875    *   lcd_filter_func ::</span>
<span class="line-modified"> 876    *     The LCD filtering callback function for for ClearType-style subpixel</span>
<span class="line-modified"> 877    *     rendering.</span>
<span class="line-modified"> 878    *</span>
<span class="line-modified"> 879    *   lcd_geometry ::</span>
<span class="line-modified"> 880    *     This array specifies LCD subpixel geometry and controls Harmony LCD</span>
<span class="line-modified"> 881    *     rendering technique, alternative to ClearType.</span>
<span class="line-modified"> 882    *</span>
<span class="line-modified"> 883    *   pic_container ::</span>
<span class="line-modified"> 884    *     Contains global structs and tables, instead of defining them</span>
<span class="line-modified"> 885    *     globally.</span>
<span class="line-modified"> 886    *</span>
<span class="line-modified"> 887    *   refcount ::</span>
<span class="line-added"> 888    *     A counter initialized to~1 at the time an @FT_Library structure is</span>
<span class="line-added"> 889    *     created.  @FT_Reference_Library increments this counter, and</span>
<span class="line-added"> 890    *     @FT_Done_Library only destroys a library if the counter is~1,</span>
<span class="line-added"> 891    *     otherwise it simply decrements it.</span>
<span class="line-added"> 892    */</span>
 893   typedef struct  FT_LibraryRec_
 894   {
 895     FT_Memory          memory;           /* library&#39;s memory manager */
 896 
 897     FT_Int             version_major;
 898     FT_Int             version_minor;
 899     FT_Int             version_patch;
 900 
 901     FT_UInt            num_modules;
 902     FT_Module          modules[FT_MAX_MODULES];  /* module objects  */
 903 
 904     FT_ListRec         renderers;        /* list of renderers        */
 905     FT_Renderer        cur_renderer;     /* current outline renderer */
 906     FT_Module          auto_hinter;
 907 
 908     FT_DebugHook_Func  debug_hooks[4];
 909 
 910 #ifdef FT_CONFIG_OPTION_SUBPIXEL_RENDERING
 911     FT_LcdFiveTapFilter      lcd_weights;      /* filter weights, if any */
 912     FT_Bitmap_LcdFilterFunc  lcd_filter_func;  /* filtering callback     */
<a name="25" id="anc25"></a><span class="line-modified"> 913 #else</span>
<span class="line-modified"> 914     FT_Vector                lcd_geometry[3];  /* RGB subpixel positions */</span>


 915 #endif
 916 
 917     FT_Int             refcount;
 918 
 919   } FT_LibraryRec;
 920 
 921 
 922   FT_BASE( FT_Renderer )
 923   FT_Lookup_Renderer( FT_Library       library,
 924                       FT_Glyph_Format  format,
 925                       FT_ListNode*     node );
 926 
 927   FT_BASE( FT_Error )
 928   FT_Render_Glyph_Internal( FT_Library      library,
 929                             FT_GlyphSlot    slot,
 930                             FT_Render_Mode  render_mode );
 931 
 932   typedef const char*
 933   (*FT_Face_GetPostscriptNameFunc)( FT_Face  face );
 934 
 935   typedef FT_Error
 936   (*FT_Face_GetGlyphNameFunc)( FT_Face     face,
 937                                FT_UInt     glyph_index,
 938                                FT_Pointer  buffer,
 939                                FT_UInt     buffer_max );
 940 
 941   typedef FT_UInt
<a name="26" id="anc26"></a><span class="line-modified"> 942   (*FT_Face_GetGlyphNameIndexFunc)( FT_Face           face,</span>
<span class="line-modified"> 943                                     const FT_String*  glyph_name );</span>
 944 
 945 
 946 #ifndef FT_CONFIG_OPTION_NO_DEFAULT_SYSTEM
 947 
<a name="27" id="anc27"></a><span class="line-modified"> 948   /**************************************************************************</span>
<span class="line-modified"> 949    *</span>
<span class="line-modified"> 950    * @function:</span>
<span class="line-modified"> 951    *   FT_New_Memory</span>
<span class="line-modified"> 952    *</span>
<span class="line-modified"> 953    * @description:</span>
<span class="line-modified"> 954    *   Creates a new memory object.</span>
<span class="line-modified"> 955    *</span>
<span class="line-modified"> 956    * @return:</span>
<span class="line-modified"> 957    *   A pointer to the new memory object.  0 in case of error.</span>
<span class="line-modified"> 958    */</span>
 959   FT_BASE( FT_Memory )
 960   FT_New_Memory( void );
 961 
 962 
<a name="28" id="anc28"></a><span class="line-modified"> 963   /**************************************************************************</span>
<span class="line-modified"> 964    *</span>
<span class="line-modified"> 965    * @function:</span>
<span class="line-modified"> 966    *   FT_Done_Memory</span>
<span class="line-modified"> 967    *</span>
<span class="line-modified"> 968    * @description:</span>
<span class="line-modified"> 969    *   Discards memory manager.</span>
<span class="line-modified"> 970    *</span>
<span class="line-modified"> 971    * @input:</span>
<span class="line-modified"> 972    *   memory ::</span>
<span class="line-modified"> 973    *     A handle to the memory manager.</span>
<span class="line-added"> 974    */</span>
 975   FT_BASE( void )
 976   FT_Done_Memory( FT_Memory  memory );
 977 
 978 #endif /* !FT_CONFIG_OPTION_NO_DEFAULT_SYSTEM */
 979 
 980 
 981   /* Define default raster&#39;s interface.  The default raster is located in  */
 982   /* `src/base/ftraster.c&#39;.                                                */
 983   /*                                                                       */
 984   /* Client applications can register new rasters through the              */
 985   /* FT_Set_Raster() API.                                                  */
 986 
 987 #ifndef FT_NO_DEFAULT_RASTER
 988   FT_EXPORT_VAR( FT_Raster_Funcs )  ft_default_raster;
 989 #endif
 990 
 991 
<a name="29" id="anc29"></a><span class="line-modified"> 992   /**************************************************************************</span>
<span class="line-modified"> 993    *</span>
<span class="line-modified"> 994    * @macro:</span>
<span class="line-modified"> 995    *   FT_DEFINE_OUTLINE_FUNCS</span>
<span class="line-modified"> 996    *</span>
<span class="line-modified"> 997    * @description:</span>
<span class="line-modified"> 998    *   Used to initialize an instance of FT_Outline_Funcs struct.  The struct</span>
<span class="line-modified"> 999    *   will be allocated in the global scope (or the scope where the macro is</span>
<span class="line-modified">1000    *   used).</span>
<span class="line-modified">1001    */</span>





















1002 #define FT_DEFINE_OUTLINE_FUNCS(           \
1003           class_,                          \
1004           move_to_,                        \
1005           line_to_,                        \
1006           conic_to_,                       \
1007           cubic_to_,                       \
1008           shift_,                          \
1009           delta_ )                         \
1010   static const  FT_Outline_Funcs class_ =  \
1011   {                                        \
1012     move_to_,                              \
1013     line_to_,                              \
1014     conic_to_,                             \
1015     cubic_to_,                             \
1016     shift_,                                \
1017     delta_                                 \
1018   };
1019 
<a name="30" id="anc30"></a>







































1020 
<a name="31" id="anc31"></a><span class="line-added">1021   /**************************************************************************</span>
<span class="line-added">1022    *</span>
<span class="line-added">1023    * @macro:</span>
<span class="line-added">1024    *   FT_DEFINE_RASTER_FUNCS</span>
<span class="line-added">1025    *</span>
<span class="line-added">1026    * @description:</span>
<span class="line-added">1027    *   Used to initialize an instance of FT_Raster_Funcs struct.  The struct</span>
<span class="line-added">1028    *   will be allocated in the global scope (or the scope where the macro is</span>
<span class="line-added">1029    *   used).</span>
<span class="line-added">1030    */</span>
1031 #define FT_DEFINE_RASTER_FUNCS(    \
1032           class_,                  \
1033           glyph_format_,           \
1034           raster_new_,             \
1035           raster_reset_,           \
1036           raster_set_mode_,        \
1037           raster_render_,          \
1038           raster_done_ )           \
1039   const FT_Raster_Funcs  class_ =  \
1040   {                                \
1041     glyph_format_,                 \
1042     raster_new_,                   \
1043     raster_reset_,                 \
1044     raster_set_mode_,              \
1045     raster_render_,                \
1046     raster_done_                   \
1047   };
1048 
<a name="32" id="anc32"></a>





















1049 
1050 
<a name="33" id="anc33"></a><span class="line-modified">1051   /**************************************************************************</span>
<span class="line-modified">1052    *</span>
<span class="line-modified">1053    * @macro:</span>
<span class="line-modified">1054    *   FT_DEFINE_GLYPH</span>
<span class="line-modified">1055    *</span>
<span class="line-modified">1056    * @description:</span>
<span class="line-modified">1057    *   The struct will be allocated in the global scope (or the scope where</span>
<span class="line-modified">1058    *   the macro is used).</span>
<span class="line-modified">1059    */</span>









1060 #define FT_DEFINE_GLYPH(          \
1061           class_,                 \
1062           size_,                  \
1063           format_,                \
1064           init_,                  \
1065           done_,                  \
1066           copy_,                  \
1067           transform_,             \
1068           bbox_,                  \
1069           prepare_ )              \
1070   FT_CALLBACK_TABLE_DEF           \
1071   const FT_Glyph_Class  class_ =  \
1072   {                               \
1073     size_,                        \
1074     format_,                      \
1075     init_,                        \
1076     done_,                        \
1077     copy_,                        \
1078     transform_,                   \
1079     bbox_,                        \
1080     prepare_                      \
1081   };
1082 
<a name="34" id="anc34"></a>

































































1083 
<a name="35" id="anc35"></a><span class="line-added">1084   /**************************************************************************</span>
<span class="line-added">1085    *</span>
<span class="line-added">1086    * @macro:</span>
<span class="line-added">1087    *   FT_DECLARE_RENDERER</span>
<span class="line-added">1088    *</span>
<span class="line-added">1089    * @description:</span>
<span class="line-added">1090    *   Used to create a forward declaration of a FT_Renderer_Class struct</span>
<span class="line-added">1091    *   instance.</span>
<span class="line-added">1092    *</span>
<span class="line-added">1093    * @macro:</span>
<span class="line-added">1094    *   FT_DEFINE_RENDERER</span>
<span class="line-added">1095    *</span>
<span class="line-added">1096    * @description:</span>
<span class="line-added">1097    *   Used to initialize an instance of FT_Renderer_Class struct.</span>
<span class="line-added">1098    *</span>
<span class="line-added">1099    *   The struct will be allocated in the global scope (or the scope where</span>
<span class="line-added">1100    *   the macro is used).</span>
<span class="line-added">1101    */</span>
1102 #define FT_DECLARE_RENDERER( class_ )               \
1103   FT_EXPORT_VAR( const FT_Renderer_Class ) class_;
1104 
1105 #define FT_DEFINE_RENDERER(                  \
1106           class_,                            \
1107           flags_,                            \
1108           size_,                             \
1109           name_,                             \
1110           version_,                          \
1111           requires_,                         \
1112           interface_,                        \
1113           init_,                             \
1114           done_,                             \
1115           get_interface_,                    \
1116           glyph_format_,                     \
1117           render_glyph_,                     \
1118           transform_glyph_,                  \
1119           get_glyph_cbox_,                   \
1120           set_mode_,                         \
1121           raster_class_ )                    \
1122   FT_CALLBACK_TABLE_DEF                      \
1123   const FT_Renderer_Class  class_ =          \
1124   {                                          \
1125     FT_DEFINE_ROOT_MODULE( flags_,           \
1126                            size_,            \
1127                            name_,            \
1128                            version_,         \
1129                            requires_,        \
1130                            interface_,       \
1131                            init_,            \
1132                            done_,            \
1133                            get_interface_ )  \
1134     glyph_format_,                           \
1135                                              \
1136     render_glyph_,                           \
1137     transform_glyph_,                        \
1138     get_glyph_cbox_,                         \
1139     set_mode_,                               \
1140                                              \
1141     raster_class_                            \
1142   };
1143 
<a name="36" id="anc36"></a>








































































































































































1144 
<a name="37" id="anc37"></a><span class="line-added">1145   /**************************************************************************</span>
<span class="line-added">1146    *</span>
<span class="line-added">1147    * @macro:</span>
<span class="line-added">1148    *   FT_DECLARE_MODULE</span>
<span class="line-added">1149    *</span>
<span class="line-added">1150    * @description:</span>
<span class="line-added">1151    *   Used to create a forward declaration of a FT_Module_Class struct</span>
<span class="line-added">1152    *   instance.</span>
<span class="line-added">1153    *</span>
<span class="line-added">1154    * @macro:</span>
<span class="line-added">1155    *   FT_DEFINE_MODULE</span>
<span class="line-added">1156    *</span>
<span class="line-added">1157    * @description:</span>
<span class="line-added">1158    *   Used to initialize an instance of an FT_Module_Class struct.</span>
<span class="line-added">1159    *</span>
<span class="line-added">1160    *   The struct will be allocated in the global scope (or the scope where</span>
<span class="line-added">1161    *   the macro is used).</span>
<span class="line-added">1162    *</span>
<span class="line-added">1163    * @macro:</span>
<span class="line-added">1164    *   FT_DEFINE_ROOT_MODULE</span>
<span class="line-added">1165    *</span>
<span class="line-added">1166    * @description:</span>
<span class="line-added">1167    *   Used to initialize an instance of an FT_Module_Class struct inside</span>
<span class="line-added">1168    *   another struct that contains it or in a function that initializes that</span>
<span class="line-added">1169    *   containing struct.</span>
<span class="line-added">1170    */</span>
1171 #define FT_DECLARE_MODULE( class_ )  \
1172   FT_CALLBACK_TABLE                  \
1173   const FT_Module_Class  class_;
1174 
1175 #define FT_DEFINE_ROOT_MODULE(  \
1176           flags_,               \
1177           size_,                \
1178           name_,                \
1179           version_,             \
1180           requires_,            \
1181           interface_,           \
1182           init_,                \
1183           done_,                \
1184           get_interface_ )      \
1185   {                             \
1186     flags_,                     \
1187     size_,                      \
1188                                 \
1189     name_,                      \
1190     version_,                   \
1191     requires_,                  \
1192                                 \
1193     interface_,                 \
1194                                 \
1195     init_,                      \
1196     done_,                      \
1197     get_interface_,             \
1198   },
1199 
1200 #define FT_DEFINE_MODULE(         \
1201           class_,                 \
1202           flags_,                 \
1203           size_,                  \
1204           name_,                  \
1205           version_,               \
1206           requires_,              \
1207           interface_,             \
1208           init_,                  \
1209           done_,                  \
1210           get_interface_ )        \
1211   FT_CALLBACK_TABLE_DEF           \
1212   const FT_Module_Class class_ =  \
1213   {                               \
1214     flags_,                       \
1215     size_,                        \
1216                                   \
1217     name_,                        \
1218     version_,                     \
1219     requires_,                    \
1220                                   \
1221     interface_,                   \
1222                                   \
1223     init_,                        \
1224     done_,                        \
1225     get_interface_,               \
1226   };
1227 
1228 
<a name="38" id="anc38"></a>





























































































1229 FT_END_HEADER
1230 
1231 #endif /* FTOBJS_H_ */
1232 
1233 
1234 /* END */
<a name="39" id="anc39"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="39" type="hidden" />
</body>
</html>