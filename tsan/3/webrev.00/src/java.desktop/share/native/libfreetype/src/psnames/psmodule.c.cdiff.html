<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/src/psnames/psmodule.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../pshinter/pshrec.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="psmodule.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/psnames/psmodule.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,49 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  psmodule.c                                                             */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    PSNames module implementation (body).                                */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DEBUG_H
  #include FT_INTERNAL_OBJECTS_H
  #include FT_SERVICE_POSTSCRIPT_CMAPS_H
  
  #include &quot;psmodule.h&quot;
  
    /*
<span class="line-modified">!    *  The file `pstables.h&#39; with its arrays and its function</span>
<span class="line-modified">!    *  `ft_get_adobe_glyph_index&#39; is useful for other projects also (for</span>
<span class="line-modified">!    *  example, `pdfium&#39; is using it).  However, if used as a C++ header,</span>
<span class="line-modified">!    *  including it in two different source files makes it necessary to use</span>
<span class="line-modified">!    *  `extern const&#39; for the declaration of its arrays, otherwise the data</span>
<span class="line-modified">!    *  would be duplicated as mandated by the C++ standard.</span>
     *
<span class="line-modified">!    *  For this reason, we use `DEFINE_PS_TABLES&#39; to guard the function</span>
<span class="line-modified">!    *  definitions, and `DEFINE_PS_TABLES_DATA&#39; to provide both proper array</span>
<span class="line-modified">!    *  declarations and definitions.</span>
     */
  #include &quot;pstables.h&quot;
  #define  DEFINE_PS_TABLES
  #define  DEFINE_PS_TABLES_DATA
  #include &quot;pstables.h&quot;
  
  #include &quot;psnamerr.h&quot;
<span class="line-removed">- #include &quot;pspic.h&quot;</span>
  
  
  #ifdef FT_CONFIG_OPTION_POSTSCRIPT_NAMES
  
  
<span class="line-new-header">--- 1,48 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * psmodule.c</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   psnames module implementation (body).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_INTERNAL_DEBUG_H
  #include FT_INTERNAL_OBJECTS_H
  #include FT_SERVICE_POSTSCRIPT_CMAPS_H
  
  #include &quot;psmodule.h&quot;
  
    /*
<span class="line-modified">!    * The file `pstables.h&#39; with its arrays and its function</span>
<span class="line-modified">!    * `ft_get_adobe_glyph_index&#39; is useful for other projects also (for</span>
<span class="line-modified">!    * example, `pdfium&#39; is using it).  However, if used as a C++ header,</span>
<span class="line-modified">!    * including it in two different source files makes it necessary to use</span>
<span class="line-modified">!    * `extern const&#39; for the declaration of its arrays, otherwise the data</span>
<span class="line-modified">!    * would be duplicated as mandated by the C++ standard.</span>
     *
<span class="line-modified">!    * For this reason, we use `DEFINE_PS_TABLES&#39; to guard the function</span>
<span class="line-modified">!    * definitions, and `DEFINE_PS_TABLES_DATA&#39; to provide both proper array</span>
<span class="line-modified">!    * declarations and definitions.</span>
     */
  #include &quot;pstables.h&quot;
  #define  DEFINE_PS_TABLES
  #define  DEFINE_PS_TABLES_DATA
  #include &quot;pstables.h&quot;
  
  #include &quot;psnamerr.h&quot;
  
  
  #ifdef FT_CONFIG_OPTION_POSTSCRIPT_NAMES
  
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 391,11 ***</span>
        else
        {
          /* Reallocate if the number of used entries is much smaller. */
          if ( count &lt; num_glyphs / 2 )
          {
<span class="line-modified">!           (void)FT_RENEW_ARRAY( table-&gt;maps, num_glyphs, count );</span>
            error = FT_Err_Ok;
          }
  
          /* Sort the table in increasing order of unicode values, */
          /* taking care of glyph variants.                        */
<span class="line-new-header">--- 390,13 ---</span>
        else
        {
          /* Reallocate if the number of used entries is much smaller. */
          if ( count &lt; num_glyphs / 2 )
          {
<span class="line-modified">!           (void)FT_RENEW_ARRAY( table-&gt;maps,</span>
<span class="line-added">+                                 num_glyphs + EXTRA_GLYPH_LIST_SIZE,</span>
<span class="line-added">+                                 count );</span>
            error = FT_Err_Ok;
          }
  
          /* Sort the table in increasing order of unicode values, */
          /* taking care of glyph variants.                        */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 575,32 ***</span>
  
  
    FT_DEFINE_SERVICEDESCREC1(
      pscmaps_services,
  
<span class="line-modified">!     FT_SERVICE_ID_POSTSCRIPT_CMAPS, &amp;PSCMAPS_INTERFACE_GET )</span>
  
  
    static FT_Pointer
    psnames_get_service( FT_Module    module,
                         const char*  service_id )
    {
<span class="line-removed">-     /* PSCMAPS_SERVICES_GET dereferences `library&#39; in PIC mode */</span>
<span class="line-removed">- #ifdef FT_CONFIG_OPTION_PIC</span>
<span class="line-removed">-     FT_Library  library;</span>
<span class="line-removed">- </span>
<span class="line-removed">- </span>
<span class="line-removed">-     if ( !module )</span>
<span class="line-removed">-       return NULL;</span>
<span class="line-removed">-     library = module-&gt;library;</span>
<span class="line-removed">-     if ( !library )</span>
<span class="line-removed">-       return NULL;</span>
<span class="line-removed">- #else</span>
      FT_UNUSED( module );
<span class="line-removed">- #endif</span>
  
<span class="line-modified">!     return ft_service_list_lookup( PSCMAPS_SERVICES_GET, service_id );</span>
    }
  
  #endif /* FT_CONFIG_OPTION_POSTSCRIPT_NAMES */
  
  
<span class="line-new-header">--- 576,20 ---</span>
  
  
    FT_DEFINE_SERVICEDESCREC1(
      pscmaps_services,
  
<span class="line-modified">!     FT_SERVICE_ID_POSTSCRIPT_CMAPS, &amp;pscmaps_interface )</span>
  
  
    static FT_Pointer
    psnames_get_service( FT_Module    module,
                         const char*  service_id )
    {
      FT_UNUSED( module );
  
<span class="line-modified">!     return ft_service_list_lookup( pscmaps_services, service_id );</span>
    }
  
  #endif /* FT_CONFIG_OPTION_POSTSCRIPT_NAMES */
  
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 619,11 ***</span>
      &quot;psnames&quot;,  /* driver name                         */
      0x10000L,   /* driver version                      */
      0x20000L,   /* driver requires FreeType 2 or above */
  
      PUT_PS_NAMES_SERVICE(
<span class="line-modified">!       (void*)&amp;PSCMAPS_INTERFACE_GET ),   /* module specific interface */</span>
  
      (FT_Module_Constructor)NULL,                                       /* module_init   */
      (FT_Module_Destructor) NULL,                                       /* module_done   */
      (FT_Module_Requester)  PUT_PS_NAMES_SERVICE( psnames_get_service ) /* get_interface */
    )
<span class="line-new-header">--- 608,11 ---</span>
      &quot;psnames&quot;,  /* driver name                         */
      0x10000L,   /* driver version                      */
      0x20000L,   /* driver requires FreeType 2 or above */
  
      PUT_PS_NAMES_SERVICE(
<span class="line-modified">!       (void*)&amp;pscmaps_interface ),   /* module specific interface */</span>
  
      (FT_Module_Constructor)NULL,                                       /* module_init   */
      (FT_Module_Destructor) NULL,                                       /* module_done   */
      (FT_Module_Requester)  PUT_PS_NAMES_SERVICE( psnames_get_service ) /* get_interface */
    )
</pre>
<center><a href="../pshinter/pshrec.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="psmodule.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>