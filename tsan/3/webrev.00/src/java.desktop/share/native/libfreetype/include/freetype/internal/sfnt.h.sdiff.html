<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/internal/sfnt.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="services/svwinfnt.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="t1types.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/internal/sfnt.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 /***************************************************************************/</span>
<span class="line-modified">  2 /*                                                                         */</span>
<span class="line-modified">  3 /*  sfnt.h                                                                 */</span>
<span class="line-modified">  4 /*                                                                         */</span>
<span class="line-modified">  5 /*    High-level `sfnt&#39; driver interface (specification).                  */</span>
<span class="line-modified">  6 /*                                                                         */</span>
<span class="line-modified">  7 /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">  8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">  9 /*                                                                         */</span>
<span class="line-modified"> 10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified"> 11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified"> 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified"> 13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified"> 14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified"> 15 /*                                                                         */</span>
<span class="line-modified"> 16 /***************************************************************************/</span>
 17 
 18 
 19 #ifndef SFNT_H_
 20 #define SFNT_H_
 21 
 22 
 23 #include &lt;ft2build.h&gt;
 24 #include FT_INTERNAL_DRIVER_H
 25 #include FT_INTERNAL_TRUETYPE_TYPES_H

 26 
 27 
 28 FT_BEGIN_HEADER
 29 
 30 
<span class="line-modified"> 31   /*************************************************************************/</span>
<span class="line-modified"> 32   /*                                                                       */</span>
<span class="line-modified"> 33   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 34   /*    TT_Init_Face_Func                                                  */</span>
<span class="line-modified"> 35   /*                                                                       */</span>
<span class="line-modified"> 36   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 37   /*    First part of the SFNT face object initialization.  This finds     */</span>
<span class="line-modified"> 38   /*    the face in a SFNT file or collection, and load its format tag in  */</span>
<span class="line-modified"> 39   /*    face-&gt;format_tag.                                                  */</span>
<span class="line-modified"> 40   /*                                                                       */</span>
<span class="line-modified"> 41   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 42   /*    stream     :: The input stream.                                    */</span>
<span class="line-modified"> 43   /*                                                                       */</span>
<span class="line-modified"> 44   /*    face       :: A handle to the target face object.                  */</span>
<span class="line-modified"> 45   /*                                                                       */</span>
<span class="line-modified"> 46   /*    face_index :: The index of the TrueType font, if we are opening a  */</span>
<span class="line-modified"> 47   /*                  collection, in bits 0-15.  The numbered instance     */</span>
<span class="line-modified"> 48   /*                  index~+~1 of a GX (sub)font, if applicable, in bits  */</span>
<span class="line-modified"> 49   /*                  16-30.                                               */</span>
<span class="line-modified"> 50   /*                                                                       */</span>
<span class="line-modified"> 51   /*    num_params :: The number of additional parameters.                 */</span>
<span class="line-modified"> 52   /*                                                                       */</span>
<span class="line-modified"> 53   /*    params     :: Optional additional parameters.                      */</span>
<span class="line-modified"> 54   /*                                                                       */</span>
<span class="line-modified"> 55   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified"> 56   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified"> 57   /*                                                                       */</span>
<span class="line-modified"> 58   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified"> 59   /*    The stream cursor must be at the font file&#39;s origin.               */</span>
<span class="line-modified"> 60   /*                                                                       */</span>
<span class="line-modified"> 61   /*    This function recognizes fonts embedded in a `TrueType             */</span>
<span class="line-modified"> 62   /*    collection&#39;.                                                       */</span>
<span class="line-modified"> 63   /*                                                                       */</span>
<span class="line-modified"> 64   /*    Once the format tag has been validated by the font driver, it      */</span>
<span class="line-modified"> 65   /*    should then call the TT_Load_Face_Func() callback to read the rest */</span>
<span class="line-modified"> 66   /*    of the SFNT tables in the object.                                  */</span>
<span class="line-modified"> 67   /*                                                                       */</span>



 68   typedef FT_Error
 69   (*TT_Init_Face_Func)( FT_Stream      stream,
 70                         TT_Face        face,
 71                         FT_Int         face_index,
 72                         FT_Int         num_params,
 73                         FT_Parameter*  params );
 74 
 75 
<span class="line-modified"> 76   /*************************************************************************/</span>
<span class="line-modified"> 77   /*                                                                       */</span>
<span class="line-modified"> 78   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified"> 79   /*    TT_Load_Face_Func                                                  */</span>
<span class="line-modified"> 80   /*                                                                       */</span>
<span class="line-modified"> 81   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 82   /*    Second part of the SFNT face object initialization.  This loads    */</span>
<span class="line-modified"> 83   /*    the common SFNT tables (head, OS/2, maxp, metrics, etc.) in the    */</span>
<span class="line-modified"> 84   /*    face object.                                                       */</span>
<span class="line-modified"> 85   /*                                                                       */</span>
<span class="line-modified"> 86   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified"> 87   /*    stream     :: The input stream.                                    */</span>
<span class="line-modified"> 88   /*                                                                       */</span>
<span class="line-modified"> 89   /*    face       :: A handle to the target face object.                  */</span>
<span class="line-modified"> 90   /*                                                                       */</span>
<span class="line-modified"> 91   /*    face_index :: The index of the TrueType font, if we are opening a  */</span>
<span class="line-modified"> 92   /*                  collection, in bits 0-15.  The numbered instance     */</span>
<span class="line-modified"> 93   /*                  index~+~1 of a GX (sub)font, if applicable, in bits  */</span>
<span class="line-modified"> 94   /*                  16-30.                                               */</span>
<span class="line-modified"> 95   /*                                                                       */</span>
<span class="line-modified"> 96   /*    num_params :: The number of additional parameters.                 */</span>
<span class="line-modified"> 97   /*                                                                       */</span>
<span class="line-modified"> 98   /*    params     :: Optional additional parameters.                      */</span>
<span class="line-modified"> 99   /*                                                                       */</span>
<span class="line-modified">100   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">101   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">102   /*                                                                       */</span>
<span class="line-modified">103   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">104   /*    This function must be called after TT_Init_Face_Func().            */</span>
<span class="line-modified">105   /*                                                                       */</span>




106   typedef FT_Error
107   (*TT_Load_Face_Func)( FT_Stream      stream,
108                         TT_Face        face,
109                         FT_Int         face_index,
110                         FT_Int         num_params,
111                         FT_Parameter*  params );
112 
113 
<span class="line-modified">114   /*************************************************************************/</span>
<span class="line-modified">115   /*                                                                       */</span>
<span class="line-modified">116   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">117   /*    TT_Done_Face_Func                                                  */</span>
<span class="line-modified">118   /*                                                                       */</span>
<span class="line-modified">119   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">120   /*    A callback used to delete the common SFNT data from a face.        */</span>
<span class="line-modified">121   /*                                                                       */</span>
<span class="line-modified">122   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">123   /*    face :: A handle to the target face object.                        */</span>
<span class="line-modified">124   /*                                                                       */</span>
<span class="line-modified">125   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">126   /*    This function does NOT destroy the face object.                    */</span>
<span class="line-modified">127   /*                                                                       */</span>

128   typedef void
129   (*TT_Done_Face_Func)( TT_Face  face );
130 
131 
<span class="line-modified">132   /*************************************************************************/</span>
<span class="line-modified">133   /*                                                                       */</span>
<span class="line-modified">134   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">135   /*    TT_Load_Any_Func                                                   */</span>
<span class="line-modified">136   /*                                                                       */</span>
<span class="line-modified">137   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">138   /*    Load any font table into client memory.                            */</span>
<span class="line-modified">139   /*                                                                       */</span>
<span class="line-modified">140   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">141   /*    face   :: The face object to look for.                             */</span>
<span class="line-modified">142   /*                                                                       */</span>
<span class="line-modified">143   /*    tag    :: The tag of table to load.  Use the value 0 if you want   */</span>
<span class="line-modified">144   /*              to access the whole font file, else set this parameter   */</span>
<span class="line-modified">145   /*              to a valid TrueType table tag that you can forge with    */</span>
<span class="line-modified">146   /*              the MAKE_TT_TAG macro.                                   */</span>
<span class="line-modified">147   /*                                                                       */</span>
<span class="line-modified">148   /*    offset :: The starting offset in the table (or the file if         */</span>
<span class="line-modified">149   /*              tag == 0).                                               */</span>
<span class="line-modified">150   /*                                                                       */</span>
<span class="line-modified">151   /*    length :: The address of the decision variable:                    */</span>
<span class="line-modified">152   /*                                                                       */</span>
<span class="line-modified">153   /*                If length == NULL:                                     */</span>
<span class="line-modified">154   /*                  Loads the whole table.  Returns an error if          */</span>
<span class="line-modified">155   /*                  `offset&#39; == 0!                                       */</span>
<span class="line-modified">156   /*                                                                       */</span>
<span class="line-modified">157   /*                If *length == 0:                                       */</span>
<span class="line-modified">158   /*                  Exits immediately; returning the length of the given */</span>
<span class="line-modified">159   /*                  table or of the font file, depending on the value of */</span>
<span class="line-modified">160   /*                  `tag&#39;.                                               */</span>
<span class="line-modified">161   /*                                                                       */</span>
<span class="line-modified">162   /*                If *length != 0:                                       */</span>
<span class="line-modified">163   /*                  Loads the next `length&#39; bytes of table or font,      */</span>
<span class="line-modified">164   /*                  starting at offset `offset&#39; (in table or font too).  */</span>
<span class="line-modified">165   /*                                                                       */</span>
<span class="line-modified">166   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">167   /*    buffer :: The address of target buffer.                            */</span>
<span class="line-modified">168   /*                                                                       */</span>
<span class="line-modified">169   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">170   /*    TrueType error code.  0 means success.                             */</span>
<span class="line-removed">171   /*                                                                       */</span>
172   typedef FT_Error
173   (*TT_Load_Any_Func)( TT_Face    face,
174                        FT_ULong   tag,
175                        FT_Long    offset,
176                        FT_Byte   *buffer,
177                        FT_ULong*  length );
178 
179 
<span class="line-modified">180   /*************************************************************************/</span>
<span class="line-modified">181   /*                                                                       */</span>
<span class="line-modified">182   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">183   /*    TT_Find_SBit_Image_Func                                            */</span>
<span class="line-modified">184   /*                                                                       */</span>
<span class="line-modified">185   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">186   /*    Check whether an embedded bitmap (an `sbit&#39;) exists for a given    */</span>
<span class="line-modified">187   /*    glyph, at a given strike.                                          */</span>
<span class="line-modified">188   /*                                                                       */</span>
<span class="line-modified">189   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">190   /*    face          :: The target face object.                           */</span>
<span class="line-modified">191   /*                                                                       */</span>
<span class="line-modified">192   /*    glyph_index   :: The glyph index.                                  */</span>
<span class="line-modified">193   /*                                                                       */</span>
<span class="line-modified">194   /*    strike_index  :: The current strike index.                         */</span>
<span class="line-modified">195   /*                                                                       */</span>
<span class="line-modified">196   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">197   /*    arange        :: The SBit range containing the glyph index.        */</span>
<span class="line-modified">198   /*                                                                       */</span>
<span class="line-modified">199   /*    astrike       :: The SBit strike containing the glyph index.       */</span>
<span class="line-modified">200   /*                                                                       */</span>
<span class="line-modified">201   /*    aglyph_offset :: The offset of the glyph data in `EBDT&#39; table.     */</span>
<span class="line-modified">202   /*                                                                       */</span>
<span class="line-modified">203   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">204   /*    FreeType error code.  0 means success.  Returns                    */</span>
<span class="line-modified">205   /*    SFNT_Err_Invalid_Argument if no sbit exists for the requested      */</span>
<span class="line-modified">206   /*    glyph.                                                             */</span>
<span class="line-modified">207   /*                                                                       */</span>





208   typedef FT_Error
209   (*TT_Find_SBit_Image_Func)( TT_Face          face,
210                               FT_UInt          glyph_index,
211                               FT_ULong         strike_index,
212                               TT_SBit_Range   *arange,
213                               TT_SBit_Strike  *astrike,
214                               FT_ULong        *aglyph_offset );
215 
216 
<span class="line-modified">217   /*************************************************************************/</span>
<span class="line-modified">218   /*                                                                       */</span>
<span class="line-modified">219   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">220   /*    TT_Load_SBit_Metrics_Func                                          */</span>
<span class="line-modified">221   /*                                                                       */</span>
<span class="line-modified">222   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">223   /*    Get the big metrics for a given embedded bitmap.                   */</span>
<span class="line-modified">224   /*                                                                       */</span>
<span class="line-modified">225   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">226   /*    stream      :: The input stream.                                   */</span>
<span class="line-modified">227   /*                                                                       */</span>
<span class="line-modified">228   /*    range       :: The SBit range containing the glyph.                */</span>
<span class="line-modified">229   /*                                                                       */</span>
<span class="line-modified">230   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">231   /*    big_metrics :: A big SBit metrics structure for the glyph.         */</span>
<span class="line-modified">232   /*                                                                       */</span>
<span class="line-modified">233   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">234   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">235   /*                                                                       */</span>
<span class="line-modified">236   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">237   /*    The stream cursor must be positioned at the glyph&#39;s offset within  */</span>
<span class="line-modified">238   /*    the `EBDT&#39; table before the call.                                  */</span>
<span class="line-modified">239   /*                                                                       */</span>
<span class="line-modified">240   /*    If the image format uses variable metrics, the stream cursor is    */</span>
<span class="line-modified">241   /*    positioned just after the metrics header in the `EBDT&#39; table on    */</span>
<span class="line-modified">242   /*    function exit.                                                     */</span>
<span class="line-modified">243   /*                                                                       */</span>



244   typedef FT_Error
245   (*TT_Load_SBit_Metrics_Func)( FT_Stream        stream,
246                                 TT_SBit_Range    range,
247                                 TT_SBit_Metrics  metrics );
248 
249 
<span class="line-modified">250   /*************************************************************************/</span>
<span class="line-modified">251   /*                                                                       */</span>
<span class="line-modified">252   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">253   /*    TT_Load_SBit_Image_Func                                            */</span>
<span class="line-modified">254   /*                                                                       */</span>
<span class="line-modified">255   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">256   /*    Load a given glyph sbit image from the font resource.  This also   */</span>
<span class="line-modified">257   /*    returns its metrics.                                               */</span>
<span class="line-modified">258   /*                                                                       */</span>
<span class="line-modified">259   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">260   /*    face ::                                                            */</span>
<span class="line-modified">261   /*      The target face object.                                          */</span>
<span class="line-modified">262   /*                                                                       */</span>
<span class="line-modified">263   /*    strike_index ::                                                    */</span>
<span class="line-modified">264   /*      The strike index.                                                */</span>
<span class="line-modified">265   /*                                                                       */</span>
<span class="line-modified">266   /*    glyph_index ::                                                     */</span>
<span class="line-modified">267   /*      The current glyph index.                                         */</span>
<span class="line-modified">268   /*                                                                       */</span>
<span class="line-modified">269   /*    load_flags ::                                                      */</span>
<span class="line-modified">270   /*      The current load flags.                                          */</span>
<span class="line-modified">271   /*                                                                       */</span>
<span class="line-modified">272   /*    stream ::                                                          */</span>
<span class="line-modified">273   /*      The input stream.                                                */</span>
<span class="line-modified">274   /*                                                                       */</span>
<span class="line-modified">275   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">276   /*    amap ::                                                            */</span>
<span class="line-modified">277   /*      The target pixmap.                                               */</span>
<span class="line-modified">278   /*                                                                       */</span>
<span class="line-modified">279   /*    ametrics ::                                                        */</span>
<span class="line-modified">280   /*      A big sbit metrics structure for the glyph image.                */</span>
<span class="line-modified">281   /*                                                                       */</span>
<span class="line-modified">282   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">283   /*    FreeType error code.  0 means success.  Returns an error if no     */</span>
<span class="line-modified">284   /*    glyph sbit exists for the index.                                   */</span>
<span class="line-modified">285   /*                                                                       */</span>
<span class="line-modified">286   /*  &lt;Note&gt;                                                               */</span>
<span class="line-modified">287   /*    The `map.buffer&#39; field is always freed before the glyph is loaded. */</span>
<span class="line-modified">288   /*                                                                       */</span>
289   typedef FT_Error
290   (*TT_Load_SBit_Image_Func)( TT_Face              face,
291                               FT_ULong             strike_index,
292                               FT_UInt              glyph_index,
293                               FT_UInt              load_flags,
294                               FT_Stream            stream,
295                               FT_Bitmap           *amap,
296                               TT_SBit_MetricsRec  *ametrics );
297 
298 
<span class="line-modified">299   /*************************************************************************/</span>
<span class="line-modified">300   /*                                                                       */</span>
<span class="line-modified">301   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">302   /*    TT_Set_SBit_Strike_Func                                            */</span>
<span class="line-modified">303   /*                                                                       */</span>
<span class="line-modified">304   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">305   /*    Select an sbit strike for a given size request.                    */</span>
<span class="line-modified">306   /*                                                                       */</span>
<span class="line-modified">307   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">308   /*    face          :: The target face object.                           */</span>
<span class="line-modified">309   /*                                                                       */</span>
<span class="line-modified">310   /*    req           :: The size request.                                 */</span>
<span class="line-modified">311   /*                                                                       */</span>
<span class="line-modified">312   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">313   /*    astrike_index :: The index of the sbit strike.                     */</span>
<span class="line-modified">314   /*                                                                       */</span>
<span class="line-modified">315   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">316   /*    FreeType error code.  0 means success.  Returns an error if no     */</span>
<span class="line-modified">317   /*    sbit strike exists for the selected ppem values.                   */</span>
<span class="line-modified">318   /*                                                                       */</span>



319   typedef FT_Error
320   (*TT_Set_SBit_Strike_Func)( TT_Face          face,
321                               FT_Size_Request  req,
322                               FT_ULong*        astrike_index );
323 
324 
<span class="line-modified">325   /*************************************************************************/</span>
<span class="line-modified">326   /*                                                                       */</span>
<span class="line-modified">327   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">328   /*    TT_Load_Strike_Metrics_Func                                        */</span>
<span class="line-modified">329   /*                                                                       */</span>
<span class="line-modified">330   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">331   /*    Load the metrics of a given strike.                                */</span>
<span class="line-modified">332   /*                                                                       */</span>
<span class="line-modified">333   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">334   /*    face          :: The target face object.                           */</span>
<span class="line-modified">335   /*                                                                       */</span>
<span class="line-modified">336   /*    strike_index  :: The strike index.                                 */</span>
<span class="line-modified">337   /*                                                                       */</span>
<span class="line-modified">338   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">339   /*    metrics       :: the metrics of the strike.                        */</span>
<span class="line-modified">340   /*                                                                       */</span>
<span class="line-modified">341   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">342   /*    FreeType error code.  0 means success.  Returns an error if no     */</span>
<span class="line-modified">343   /*    such sbit strike exists.                                           */</span>
<span class="line-modified">344   /*                                                                       */</span>



345   typedef FT_Error
346   (*TT_Load_Strike_Metrics_Func)( TT_Face           face,
347                                   FT_ULong          strike_index,
348                                   FT_Size_Metrics*  metrics );
349 
350 
<span class="line-modified">351   /*************************************************************************/</span>
<span class="line-modified">352   /*                                                                       */</span>
<span class="line-modified">353   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">354   /*    TT_Get_PS_Name_Func                                                */</span>
<span class="line-modified">355   /*                                                                       */</span>
<span class="line-modified">356   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">357   /*    Get the PostScript glyph name of a glyph.                          */</span>
<span class="line-modified">358   /*                                                                       */</span>
<span class="line-modified">359   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">360   /*    idx  :: The glyph index.                                           */</span>
<span class="line-modified">361   /*                                                                       */</span>
<span class="line-modified">362   /*    PSname :: The address of a string pointer.  Will be NULL in case   */</span>
<span class="line-modified">363   /*              of error, otherwise it is a pointer to the glyph name.   */</span>
<span class="line-modified">364   /*                                                                       */</span>
<span class="line-modified">365   /*              You must not modify the returned string!                 */</span>
<span class="line-modified">366   /*                                                                       */</span>
<span class="line-modified">367   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">368   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">369   /*                                                                       */</span>


370   typedef FT_Error
371   (*TT_Get_PS_Name_Func)( TT_Face      face,
372                           FT_UInt      idx,
373                           FT_String**  PSname );
374 
375 
<span class="line-modified">376   /*************************************************************************/</span>
<span class="line-modified">377   /*                                                                       */</span>
<span class="line-modified">378   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">379   /*    TT_Load_Metrics_Func                                               */</span>
<span class="line-modified">380   /*                                                                       */</span>
<span class="line-modified">381   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">382   /*    Load a metrics table, which is a table with a horizontal and a     */</span>
<span class="line-modified">383   /*    vertical version.                                                  */</span>
<span class="line-modified">384   /*                                                                       */</span>
<span class="line-modified">385   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">386   /*    face     :: A handle to the target face object.                    */</span>
<span class="line-modified">387   /*                                                                       */</span>
<span class="line-modified">388   /*    stream   :: The input stream.                                      */</span>
<span class="line-modified">389   /*                                                                       */</span>
<span class="line-modified">390   /*    vertical :: A boolean flag.  If set, load the vertical one.        */</span>
<span class="line-modified">391   /*                                                                       */</span>
<span class="line-modified">392   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">393   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">394   /*                                                                       */</span>



395   typedef FT_Error
396   (*TT_Load_Metrics_Func)( TT_Face    face,
397                            FT_Stream  stream,
398                            FT_Bool    vertical );
399 
400 
<span class="line-modified">401   /*************************************************************************/</span>
<span class="line-modified">402   /*                                                                       */</span>
<span class="line-modified">403   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">404   /*    TT_Get_Metrics_Func                                                */</span>
<span class="line-modified">405   /*                                                                       */</span>
<span class="line-modified">406   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">407   /*    Load the horizontal or vertical header in a face object.           */</span>
<span class="line-modified">408   /*                                                                       */</span>
<span class="line-modified">409   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">410   /*    face     :: A handle to the target face object.                    */</span>
<span class="line-modified">411   /*                                                                       */</span>
<span class="line-modified">412   /*    vertical :: A boolean flag.  If set, load vertical metrics.        */</span>
<span class="line-modified">413   /*                                                                       */</span>
<span class="line-modified">414   /*    gindex   :: The glyph index.                                       */</span>
<span class="line-modified">415   /*                                                                       */</span>
<span class="line-modified">416   /* &lt;Output&gt;                                                              */</span>
<span class="line-modified">417   /*    abearing :: The horizontal (or vertical) bearing.  Set to zero in  */</span>
<span class="line-modified">418   /*                case of error.                                         */</span>
<span class="line-modified">419   /*                                                                       */</span>
<span class="line-modified">420   /*    aadvance :: The horizontal (or vertical) advance.  Set to zero in  */</span>
<span class="line-modified">421   /*                case of error.                                         */</span>
<span class="line-modified">422   /*                                                                       */</span>



423   typedef void
424   (*TT_Get_Metrics_Func)( TT_Face     face,
425                           FT_Bool     vertical,
426                           FT_UInt     gindex,
427                           FT_Short*   abearing,
428                           FT_UShort*  aadvance );
429 
430 
<span class="line-modified">431   /*************************************************************************/</span>
<span class="line-modified">432   /*                                                                       */</span>
<span class="line-modified">433   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">434   /*    TT_Get_Name_Func                                                   */</span>
<span class="line-modified">435   /*                                                                       */</span>
<span class="line-modified">436   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">437   /*    From the `name&#39; table, return a given ENGLISH name record in       */</span>
<span class="line-modified">438   /*    ASCII.                                                             */</span>
<span class="line-modified">439   /*                                                                       */</span>
<span class="line-modified">440   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">441   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">442   /*                                                                       */</span>
<span class="line-modified">443   /*    nameid   :: The name id of the name record to return.              */</span>
<span class="line-modified">444   /*                                                                       */</span>
<span class="line-modified">445   /* &lt;InOut&gt;                                                               */</span>
<span class="line-modified">446   /*    name     :: The address of an allocated string pointer.  NULL if   */</span>
<span class="line-modified">447   /*                no name is present.                                    */</span>
<span class="line-modified">448   /*                                                                       */</span>
<span class="line-modified">449   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">450   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">451   /*                                                                       */</span>











































































































452   typedef FT_Error
453   (*TT_Get_Name_Func)( TT_Face      face,
454                        FT_UShort    nameid,
455                        FT_String**  name );
456 
457 
<span class="line-modified">458   /*************************************************************************/</span>
<span class="line-modified">459   /*                                                                       */</span>
<span class="line-modified">460   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">461   /*    TT_Get_Name_ID_Func                                                */</span>
<span class="line-modified">462   /*                                                                       */</span>
<span class="line-modified">463   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">464   /*    Search whether an ENGLISH version for a given name ID is in the    */</span>
<span class="line-modified">465   /*    `name&#39; table.                                                      */</span>
<span class="line-modified">466   /*                                                                       */</span>
<span class="line-modified">467   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">468   /*    face     :: A handle to the source face object.                    */</span>
<span class="line-modified">469   /*                                                                       */</span>
<span class="line-modified">470   /*    nameid   :: The name id of the name record to return.              */</span>
<span class="line-modified">471   /*                                                                       */</span>
<span class="line-modified">472   /* &lt;Out&gt;                                                                 */</span>
<span class="line-modified">473   /*    win      :: If non-negative, an index into the `name&#39; table with   */</span>
<span class="line-modified">474   /*                the corresponding (3,1) or (3,0) Windows entry.        */</span>
<span class="line-modified">475   /*                                                                       */</span>
<span class="line-modified">476   /*    apple    :: If non-negative, an index into the `name&#39; table with   */</span>
<span class="line-modified">477   /*                the corresponding (1,0) Apple entry.                   */</span>
<span class="line-modified">478   /*                                                                       */</span>
<span class="line-modified">479   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">480   /*    1 if there is either a win or apple entry (or both), 0 otheriwse.  */</span>
<span class="line-modified">481   /*                                                                       */</span>




482   typedef FT_Bool
483   (*TT_Get_Name_ID_Func)( TT_Face    face,
484                           FT_UShort  nameid,
485                           FT_Int    *win,
486                           FT_Int    *apple );
487 
488 
<span class="line-modified">489   /*************************************************************************/</span>
<span class="line-modified">490   /*                                                                       */</span>
<span class="line-modified">491   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">492   /*    TT_Load_Table_Func                                                 */</span>
<span class="line-modified">493   /*                                                                       */</span>
<span class="line-modified">494   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">495   /*    Load a given TrueType table.                                       */</span>
<span class="line-modified">496   /*                                                                       */</span>
<span class="line-modified">497   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">498   /*    face   :: A handle to the target face object.                      */</span>
<span class="line-modified">499   /*                                                                       */</span>
<span class="line-modified">500   /*    stream :: The input stream.                                        */</span>
<span class="line-modified">501   /*                                                                       */</span>
<span class="line-modified">502   /* &lt;Return&gt;                                                              */</span>
<span class="line-modified">503   /*    FreeType error code.  0 means success.                             */</span>
<span class="line-modified">504   /*                                                                       */</span>
<span class="line-modified">505   /* &lt;Note&gt;                                                                */</span>
<span class="line-modified">506   /*    The function uses `face-&gt;goto_table&#39; to seek the stream to the     */</span>
<span class="line-modified">507   /*    start of the table, except while loading the font directory.       */</span>
<span class="line-modified">508   /*                                                                       */</span>


509   typedef FT_Error
510   (*TT_Load_Table_Func)( TT_Face    face,
511                          FT_Stream  stream );
512 
513 
<span class="line-modified">514   /*************************************************************************/</span>
<span class="line-modified">515   /*                                                                       */</span>
<span class="line-modified">516   /* &lt;FuncType&gt;                                                            */</span>
<span class="line-modified">517   /*    TT_Free_Table_Func                                                 */</span>
<span class="line-modified">518   /*                                                                       */</span>
<span class="line-modified">519   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">520   /*    Free a given TrueType table.                                       */</span>
<span class="line-modified">521   /*                                                                       */</span>
<span class="line-modified">522   /* &lt;Input&gt;                                                               */</span>
<span class="line-modified">523   /*    face :: A handle to the target face object.                        */</span>
<span class="line-modified">524   /*                                                                       */</span>

525   typedef void
526   (*TT_Free_Table_Func)( TT_Face  face );
527 
528 
529   /*
530    * @functype:
531    *    TT_Face_GetKerningFunc
532    *
533    * @description:
534    *    Return the horizontal kerning value between two glyphs.
535    *
536    * @input:
<span class="line-modified">537    *    face        :: A handle to the source face object.</span>
<span class="line-modified">538    *    left_glyph  :: The left glyph index.</span>
<span class="line-modified">539    *    right_glyph :: The right glyph index.</span>





540    *
541    * @return:
542    *    The kerning value in font units.
543    */
544   typedef FT_Int
545   (*TT_Face_GetKerningFunc)( TT_Face  face,
546                              FT_UInt  left_glyph,
547                              FT_UInt  right_glyph );
548 
549 
<span class="line-modified">550   /*************************************************************************/</span>
<span class="line-modified">551   /*                                                                       */</span>
<span class="line-modified">552   /* &lt;Struct&gt;                                                              */</span>
<span class="line-modified">553   /*    SFNT_Interface                                                     */</span>
<span class="line-modified">554   /*                                                                       */</span>
<span class="line-modified">555   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">556   /*    This structure holds pointers to the functions used to load and    */</span>
<span class="line-modified">557   /*    free the basic tables that are required in a `sfnt&#39; font file.     */</span>
<span class="line-modified">558   /*                                                                       */</span>
<span class="line-modified">559   /* &lt;Fields&gt;                                                              */</span>
<span class="line-modified">560   /*    Check the various xxx_Func() descriptions for details.             */</span>
<span class="line-modified">561   /*                                                                       */</span>
562   typedef struct  SFNT_Interface_
563   {
564     TT_Loader_GotoTableFunc      goto_table;
565 
566     TT_Init_Face_Func            init_face;
567     TT_Load_Face_Func            load_face;
568     TT_Done_Face_Func            done_face;
569     FT_Module_Requester          get_interface;
570 
571     TT_Load_Any_Func             load_any;
572 
573     /* these functions are called by `load_face&#39; but they can also  */
574     /* be called from external modules, if there is a need to do so */
575     TT_Load_Table_Func           load_head;
576     TT_Load_Metrics_Func         load_hhea;
577     TT_Load_Table_Func           load_cmap;
578     TT_Load_Table_Func           load_maxp;
579     TT_Load_Table_Func           load_os2;
580     TT_Load_Table_Func           load_post;
581 
</pre>
<hr />
<pre>
599     TT_Free_Table_Func           free_psnames;
600 
601     /* starting here, the structure differs from version 2.1.7 */
602 
603     /* this field was introduced in version 2.1.8, named `get_psname&#39; */
604     TT_Face_GetKerningFunc       get_kerning;
605 
606     /* new elements introduced after version 2.1.10 */
607 
608     /* load the font directory, i.e., the offset table and */
609     /* the table directory                                 */
610     TT_Load_Table_Func           load_font_dir;
611     TT_Load_Metrics_Func         load_hmtx;
612 
613     TT_Load_Table_Func           load_eblc;
614     TT_Free_Table_Func           free_eblc;
615 
616     TT_Set_SBit_Strike_Func      set_sbit_strike;
617     TT_Load_Strike_Metrics_Func  load_strike_metrics;
618 








619     TT_Get_Metrics_Func          get_metrics;
620 
621     TT_Get_Name_Func             get_name;
622     TT_Get_Name_ID_Func          get_name_id;
623 
624   } SFNT_Interface;
625 
626 
627   /* transitional */
628   typedef SFNT_Interface*   SFNT_Service;
629 
<span class="line-removed">630 #ifndef FT_CONFIG_OPTION_PIC</span>
631 
632 #define FT_DEFINE_SFNT_INTERFACE(        \
633           class_,                        \
634           goto_table_,                   \
635           init_face_,                    \
636           load_face_,                    \
637           done_face_,                    \
638           get_interface_,                \
639           load_any_,                     \
640           load_head_,                    \
641           load_hhea_,                    \
642           load_cmap_,                    \
643           load_maxp_,                    \
644           load_os2_,                     \
645           load_post_,                    \
646           load_name_,                    \
647           free_name_,                    \
648           load_kern_,                    \
649           load_gasp_,                    \
650           load_pclt_,                    \
651           load_bhed_,                    \
652           load_sbit_image_,              \
653           get_psname_,                   \
654           free_psnames_,                 \
655           get_kerning_,                  \
656           load_font_dir_,                \
657           load_hmtx_,                    \
658           load_eblc_,                    \
659           free_eblc_,                    \
660           set_sbit_strike_,              \
661           load_strike_metrics_,          \







662           get_metrics_,                  \
663           get_name_,                     \
664           get_name_id_ )                 \
665   static const SFNT_Interface  class_ =  \
666   {                                      \
667     goto_table_,                         \
668     init_face_,                          \
669     load_face_,                          \
670     done_face_,                          \
671     get_interface_,                      \
672     load_any_,                           \
673     load_head_,                          \
674     load_hhea_,                          \
675     load_cmap_,                          \
676     load_maxp_,                          \
677     load_os2_,                           \
678     load_post_,                          \
679     load_name_,                          \
680     free_name_,                          \
681     load_kern_,                          \
682     load_gasp_,                          \
683     load_pclt_,                          \
684     load_bhed_,                          \
685     load_sbit_image_,                    \
686     get_psname_,                         \
687     free_psnames_,                       \
688     get_kerning_,                        \
689     load_font_dir_,                      \
690     load_hmtx_,                          \
691     load_eblc_,                          \
692     free_eblc_,                          \
693     set_sbit_strike_,                    \
694     load_strike_metrics_,                \







695     get_metrics_,                        \
696     get_name_,                           \
697     get_name_id_                         \
698   };
699 
<span class="line-removed">700 #else /* FT_CONFIG_OPTION_PIC */</span>
<span class="line-removed">701 </span>
<span class="line-removed">702 #define FT_INTERNAL( a, a_ )  \</span>
<span class="line-removed">703           clazz-&gt;a = a_;</span>
<span class="line-removed">704 </span>
<span class="line-removed">705 #define FT_DEFINE_SFNT_INTERFACE(                       \</span>
<span class="line-removed">706           class_,                                       \</span>
<span class="line-removed">707           goto_table_,                                  \</span>
<span class="line-removed">708           init_face_,                                   \</span>
<span class="line-removed">709           load_face_,                                   \</span>
<span class="line-removed">710           done_face_,                                   \</span>
<span class="line-removed">711           get_interface_,                               \</span>
<span class="line-removed">712           load_any_,                                    \</span>
<span class="line-removed">713           load_head_,                                   \</span>
<span class="line-removed">714           load_hhea_,                                   \</span>
<span class="line-removed">715           load_cmap_,                                   \</span>
<span class="line-removed">716           load_maxp_,                                   \</span>
<span class="line-removed">717           load_os2_,                                    \</span>
<span class="line-removed">718           load_post_,                                   \</span>
<span class="line-removed">719           load_name_,                                   \</span>
<span class="line-removed">720           free_name_,                                   \</span>
<span class="line-removed">721           load_kern_,                                   \</span>
<span class="line-removed">722           load_gasp_,                                   \</span>
<span class="line-removed">723           load_pclt_,                                   \</span>
<span class="line-removed">724           load_bhed_,                                   \</span>
<span class="line-removed">725           load_sbit_image_,                             \</span>
<span class="line-removed">726           get_psname_,                                  \</span>
<span class="line-removed">727           free_psnames_,                                \</span>
<span class="line-removed">728           get_kerning_,                                 \</span>
<span class="line-removed">729           load_font_dir_,                               \</span>
<span class="line-removed">730           load_hmtx_,                                   \</span>
<span class="line-removed">731           load_eblc_,                                   \</span>
<span class="line-removed">732           free_eblc_,                                   \</span>
<span class="line-removed">733           set_sbit_strike_,                             \</span>
<span class="line-removed">734           load_strike_metrics_,                         \</span>
<span class="line-removed">735           get_metrics_,                                 \</span>
<span class="line-removed">736           get_name_,                                    \</span>
<span class="line-removed">737           get_name_id_ )                                \</span>
<span class="line-removed">738   void                                                  \</span>
<span class="line-removed">739   FT_Init_Class_ ## class_( FT_Library       library,   \</span>
<span class="line-removed">740                             SFNT_Interface*  clazz )    \</span>
<span class="line-removed">741   {                                                     \</span>
<span class="line-removed">742     FT_UNUSED( library );                               \</span>
<span class="line-removed">743                                                         \</span>
<span class="line-removed">744     clazz-&gt;goto_table          = goto_table_;           \</span>
<span class="line-removed">745     clazz-&gt;init_face           = init_face_;            \</span>
<span class="line-removed">746     clazz-&gt;load_face           = load_face_;            \</span>
<span class="line-removed">747     clazz-&gt;done_face           = done_face_;            \</span>
<span class="line-removed">748     clazz-&gt;get_interface       = get_interface_;        \</span>
<span class="line-removed">749     clazz-&gt;load_any            = load_any_;             \</span>
<span class="line-removed">750     clazz-&gt;load_head           = load_head_;            \</span>
<span class="line-removed">751     clazz-&gt;load_hhea           = load_hhea_;            \</span>
<span class="line-removed">752     clazz-&gt;load_cmap           = load_cmap_;            \</span>
<span class="line-removed">753     clazz-&gt;load_maxp           = load_maxp_;            \</span>
<span class="line-removed">754     clazz-&gt;load_os2            = load_os2_;             \</span>
<span class="line-removed">755     clazz-&gt;load_post           = load_post_;            \</span>
<span class="line-removed">756     clazz-&gt;load_name           = load_name_;            \</span>
<span class="line-removed">757     clazz-&gt;free_name           = free_name_;            \</span>
<span class="line-removed">758     clazz-&gt;load_kern           = load_kern_;            \</span>
<span class="line-removed">759     clazz-&gt;load_gasp           = load_gasp_;            \</span>
<span class="line-removed">760     clazz-&gt;load_pclt           = load_pclt_;            \</span>
<span class="line-removed">761     clazz-&gt;load_bhed           = load_bhed_;            \</span>
<span class="line-removed">762     clazz-&gt;load_sbit_image     = load_sbit_image_;      \</span>
<span class="line-removed">763     clazz-&gt;get_psname          = get_psname_;           \</span>
<span class="line-removed">764     clazz-&gt;free_psnames        = free_psnames_;         \</span>
<span class="line-removed">765     clazz-&gt;get_kerning         = get_kerning_;          \</span>
<span class="line-removed">766     clazz-&gt;load_font_dir       = load_font_dir_;        \</span>
<span class="line-removed">767     clazz-&gt;load_hmtx           = load_hmtx_;            \</span>
<span class="line-removed">768     clazz-&gt;load_eblc           = load_eblc_;            \</span>
<span class="line-removed">769     clazz-&gt;free_eblc           = free_eblc_;            \</span>
<span class="line-removed">770     clazz-&gt;set_sbit_strike     = set_sbit_strike_;      \</span>
<span class="line-removed">771     clazz-&gt;load_strike_metrics = load_strike_metrics_;  \</span>
<span class="line-removed">772     clazz-&gt;get_metrics         = get_metrics_;          \</span>
<span class="line-removed">773     clazz-&gt;get_name            = get_name_;             \</span>
<span class="line-removed">774     clazz-&gt;get_name_id         = get_name_id_;          \</span>
<span class="line-removed">775   }</span>
<span class="line-removed">776 </span>
<span class="line-removed">777 #endif /* FT_CONFIG_OPTION_PIC */</span>
778 
779 FT_END_HEADER
780 
781 #endif /* SFNT_H_ */
782 
783 
784 /* END */
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * sfnt.h</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   High-level &#39;sfnt&#39; driver interface (specification).</span>
<span class="line-modified">  6  *</span>
<span class="line-modified">  7  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">  8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">  9  *</span>
<span class="line-modified"> 10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 13  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 14  * understand and accept it fully.</span>
<span class="line-modified"> 15  *</span>
<span class="line-modified"> 16  */</span>
 17 
 18 
 19 #ifndef SFNT_H_
 20 #define SFNT_H_
 21 
 22 
 23 #include &lt;ft2build.h&gt;
 24 #include FT_INTERNAL_DRIVER_H
 25 #include FT_INTERNAL_TRUETYPE_TYPES_H
<span class="line-added"> 26 #include FT_INTERNAL_WOFF_TYPES_H</span>
 27 
 28 
 29 FT_BEGIN_HEADER
 30 
 31 
<span class="line-modified"> 32   /**************************************************************************</span>
<span class="line-modified"> 33    *</span>
<span class="line-modified"> 34    * @functype:</span>
<span class="line-modified"> 35    *   TT_Init_Face_Func</span>
<span class="line-modified"> 36    *</span>
<span class="line-modified"> 37    * @description:</span>
<span class="line-modified"> 38    *   First part of the SFNT face object initialization.  This finds the</span>
<span class="line-modified"> 39    *   face in a SFNT file or collection, and load its format tag in</span>
<span class="line-modified"> 40    *   face-&gt;format_tag.</span>
<span class="line-modified"> 41    *</span>
<span class="line-modified"> 42    * @input:</span>
<span class="line-modified"> 43    *   stream ::</span>
<span class="line-modified"> 44    *     The input stream.</span>
<span class="line-modified"> 45    *</span>
<span class="line-modified"> 46    *   face ::</span>
<span class="line-modified"> 47    *     A handle to the target face object.</span>
<span class="line-modified"> 48    *</span>
<span class="line-modified"> 49    *   face_index ::</span>
<span class="line-modified"> 50    *     The index of the TrueType font, if we are opening a collection, in</span>
<span class="line-modified"> 51    *     bits 0-15.  The numbered instance index~+~1 of a GX (sub)font, if</span>
<span class="line-modified"> 52    *     applicable, in bits 16-30.</span>
<span class="line-modified"> 53    *</span>
<span class="line-modified"> 54    *   num_params ::</span>
<span class="line-modified"> 55    *     The number of additional parameters.</span>
<span class="line-modified"> 56    *</span>
<span class="line-modified"> 57    *   params ::</span>
<span class="line-modified"> 58    *     Optional additional parameters.</span>
<span class="line-modified"> 59    *</span>
<span class="line-modified"> 60    * @return:</span>
<span class="line-modified"> 61    *   FreeType error code.  0 means success.</span>
<span class="line-modified"> 62    *</span>
<span class="line-modified"> 63    * @note:</span>
<span class="line-modified"> 64    *   The stream cursor must be at the font file&#39;s origin.</span>
<span class="line-modified"> 65    *</span>
<span class="line-modified"> 66    *   This function recognizes fonts embedded in a &#39;TrueType collection&#39;.</span>
<span class="line-modified"> 67    *</span>
<span class="line-modified"> 68    *   Once the format tag has been validated by the font driver, it should</span>
<span class="line-added"> 69    *   then call the TT_Load_Face_Func() callback to read the rest of the</span>
<span class="line-added"> 70    *   SFNT tables in the object.</span>
<span class="line-added"> 71    */</span>
 72   typedef FT_Error
 73   (*TT_Init_Face_Func)( FT_Stream      stream,
 74                         TT_Face        face,
 75                         FT_Int         face_index,
 76                         FT_Int         num_params,
 77                         FT_Parameter*  params );
 78 
 79 
<span class="line-modified"> 80   /**************************************************************************</span>
<span class="line-modified"> 81    *</span>
<span class="line-modified"> 82    * @functype:</span>
<span class="line-modified"> 83    *   TT_Load_Face_Func</span>
<span class="line-modified"> 84    *</span>
<span class="line-modified"> 85    * @description:</span>
<span class="line-modified"> 86    *   Second part of the SFNT face object initialization.  This loads the</span>
<span class="line-modified"> 87    *   common SFNT tables (head, OS/2, maxp, metrics, etc.) in the face</span>
<span class="line-modified"> 88    *   object.</span>
<span class="line-modified"> 89    *</span>
<span class="line-modified"> 90    * @input:</span>
<span class="line-modified"> 91    *   stream ::</span>
<span class="line-modified"> 92    *     The input stream.</span>
<span class="line-modified"> 93    *</span>
<span class="line-modified"> 94    *   face ::</span>
<span class="line-modified"> 95    *     A handle to the target face object.</span>
<span class="line-modified"> 96    *</span>
<span class="line-modified"> 97    *   face_index ::</span>
<span class="line-modified"> 98    *     The index of the TrueType font, if we are opening a collection, in</span>
<span class="line-modified"> 99    *     bits 0-15.  The numbered instance index~+~1 of a GX (sub)font, if</span>
<span class="line-modified">100    *     applicable, in bits 16-30.</span>
<span class="line-modified">101    *</span>
<span class="line-modified">102    *   num_params ::</span>
<span class="line-modified">103    *     The number of additional parameters.</span>
<span class="line-modified">104    *</span>
<span class="line-modified">105    *   params ::</span>
<span class="line-modified">106    *     Optional additional parameters.</span>
<span class="line-modified">107    *</span>
<span class="line-modified">108    * @return:</span>
<span class="line-modified">109    *   FreeType error code.  0 means success.</span>
<span class="line-added">110    *</span>
<span class="line-added">111    * @note:</span>
<span class="line-added">112    *   This function must be called after TT_Init_Face_Func().</span>
<span class="line-added">113    */</span>
114   typedef FT_Error
115   (*TT_Load_Face_Func)( FT_Stream      stream,
116                         TT_Face        face,
117                         FT_Int         face_index,
118                         FT_Int         num_params,
119                         FT_Parameter*  params );
120 
121 
<span class="line-modified">122   /**************************************************************************</span>
<span class="line-modified">123    *</span>
<span class="line-modified">124    * @functype:</span>
<span class="line-modified">125    *   TT_Done_Face_Func</span>
<span class="line-modified">126    *</span>
<span class="line-modified">127    * @description:</span>
<span class="line-modified">128    *   A callback used to delete the common SFNT data from a face.</span>
<span class="line-modified">129    *</span>
<span class="line-modified">130    * @input:</span>
<span class="line-modified">131    *   face ::</span>
<span class="line-modified">132    *     A handle to the target face object.</span>
<span class="line-modified">133    *</span>
<span class="line-modified">134    * @note:</span>
<span class="line-modified">135    *   This function does NOT destroy the face object.</span>
<span class="line-added">136    */</span>
137   typedef void
138   (*TT_Done_Face_Func)( TT_Face  face );
139 
140 
<span class="line-modified">141   /**************************************************************************</span>
<span class="line-modified">142    *</span>
<span class="line-modified">143    * @functype:</span>
<span class="line-modified">144    *   TT_Load_Any_Func</span>
<span class="line-modified">145    *</span>
<span class="line-modified">146    * @description:</span>
<span class="line-modified">147    *   Load any font table into client memory.</span>
<span class="line-modified">148    *</span>
<span class="line-modified">149    * @input:</span>
<span class="line-modified">150    *   face ::</span>
<span class="line-modified">151    *     The face object to look for.</span>
<span class="line-modified">152    *</span>
<span class="line-modified">153    *   tag ::</span>
<span class="line-modified">154    *     The tag of table to load.  Use the value 0 if you want to access the</span>
<span class="line-modified">155    *     whole font file, else set this parameter to a valid TrueType table</span>
<span class="line-modified">156    *     tag that you can forge with the MAKE_TT_TAG macro.</span>
<span class="line-modified">157    *</span>
<span class="line-modified">158    *   offset ::</span>
<span class="line-modified">159    *     The starting offset in the table (or the file if tag == 0).</span>
<span class="line-modified">160    *</span>
<span class="line-modified">161    *   length ::</span>
<span class="line-modified">162    *     The address of the decision variable:</span>
<span class="line-modified">163    *</span>
<span class="line-modified">164    *     If `length == NULL`: Loads the whole table.  Returns an error if</span>
<span class="line-modified">165    *     &#39;offset&#39; == 0!</span>
<span class="line-modified">166    *</span>
<span class="line-modified">167    *     If `*length == 0`: Exits immediately; returning the length of the</span>
<span class="line-modified">168    *     given table or of the font file, depending on the value of &#39;tag&#39;.</span>
<span class="line-modified">169    *</span>
<span class="line-modified">170    *     If `*length != 0`: Loads the next &#39;length&#39; bytes of table or font,</span>
<span class="line-modified">171    *     starting at offset &#39;offset&#39; (in table or font too).</span>
<span class="line-modified">172    *</span>
<span class="line-modified">173    * @output:</span>
<span class="line-modified">174    *   buffer ::</span>
<span class="line-modified">175    *     The address of target buffer.</span>
<span class="line-modified">176    *</span>
<span class="line-modified">177    * @return:</span>
<span class="line-modified">178    *   TrueType error code.  0 means success.</span>
<span class="line-modified">179    */</span>

180   typedef FT_Error
181   (*TT_Load_Any_Func)( TT_Face    face,
182                        FT_ULong   tag,
183                        FT_Long    offset,
184                        FT_Byte   *buffer,
185                        FT_ULong*  length );
186 
187 
<span class="line-modified">188   /**************************************************************************</span>
<span class="line-modified">189    *</span>
<span class="line-modified">190    * @functype:</span>
<span class="line-modified">191    *   TT_Find_SBit_Image_Func</span>
<span class="line-modified">192    *</span>
<span class="line-modified">193    * @description:</span>
<span class="line-modified">194    *   Check whether an embedded bitmap (an &#39;sbit&#39;) exists for a given glyph,</span>
<span class="line-modified">195    *   at a given strike.</span>
<span class="line-modified">196    *</span>
<span class="line-modified">197    * @input:</span>
<span class="line-modified">198    *   face ::</span>
<span class="line-modified">199    *     The target face object.</span>
<span class="line-modified">200    *</span>
<span class="line-modified">201    *   glyph_index ::</span>
<span class="line-modified">202    *     The glyph index.</span>
<span class="line-modified">203    *</span>
<span class="line-modified">204    *   strike_index ::</span>
<span class="line-modified">205    *     The current strike index.</span>
<span class="line-modified">206    *</span>
<span class="line-modified">207    * @output:</span>
<span class="line-modified">208    *   arange ::</span>
<span class="line-modified">209    *     The SBit range containing the glyph index.</span>
<span class="line-modified">210    *</span>
<span class="line-modified">211    *   astrike ::</span>
<span class="line-modified">212    *     The SBit strike containing the glyph index.</span>
<span class="line-modified">213    *</span>
<span class="line-modified">214    *   aglyph_offset ::</span>
<span class="line-modified">215    *     The offset of the glyph data in &#39;EBDT&#39; table.</span>
<span class="line-added">216    *</span>
<span class="line-added">217    * @return:</span>
<span class="line-added">218    *   FreeType error code.  0 means success.  Returns</span>
<span class="line-added">219    *   SFNT_Err_Invalid_Argument if no sbit exists for the requested glyph.</span>
<span class="line-added">220    */</span>
221   typedef FT_Error
222   (*TT_Find_SBit_Image_Func)( TT_Face          face,
223                               FT_UInt          glyph_index,
224                               FT_ULong         strike_index,
225                               TT_SBit_Range   *arange,
226                               TT_SBit_Strike  *astrike,
227                               FT_ULong        *aglyph_offset );
228 
229 
<span class="line-modified">230   /**************************************************************************</span>
<span class="line-modified">231    *</span>
<span class="line-modified">232    * @functype:</span>
<span class="line-modified">233    *   TT_Load_SBit_Metrics_Func</span>
<span class="line-modified">234    *</span>
<span class="line-modified">235    * @description:</span>
<span class="line-modified">236    *   Get the big metrics for a given embedded bitmap.</span>
<span class="line-modified">237    *</span>
<span class="line-modified">238    * @input:</span>
<span class="line-modified">239    *   stream ::</span>
<span class="line-modified">240    *     The input stream.</span>
<span class="line-modified">241    *</span>
<span class="line-modified">242    *   range ::</span>
<span class="line-modified">243    *     The SBit range containing the glyph.</span>
<span class="line-modified">244    *</span>
<span class="line-modified">245    * @output:</span>
<span class="line-modified">246    *   big_metrics ::</span>
<span class="line-modified">247    *     A big SBit metrics structure for the glyph.</span>
<span class="line-modified">248    *</span>
<span class="line-modified">249    * @return:</span>
<span class="line-modified">250    *   FreeType error code.  0 means success.</span>
<span class="line-modified">251    *</span>
<span class="line-modified">252    * @note:</span>
<span class="line-modified">253    *   The stream cursor must be positioned at the glyph&#39;s offset within the</span>
<span class="line-modified">254    *   &#39;EBDT&#39; table before the call.</span>
<span class="line-modified">255    *</span>
<span class="line-modified">256    *   If the image format uses variable metrics, the stream cursor is</span>
<span class="line-added">257    *   positioned just after the metrics header in the &#39;EBDT&#39; table on</span>
<span class="line-added">258    *   function exit.</span>
<span class="line-added">259    */</span>
260   typedef FT_Error
261   (*TT_Load_SBit_Metrics_Func)( FT_Stream        stream,
262                                 TT_SBit_Range    range,
263                                 TT_SBit_Metrics  metrics );
264 
265 
<span class="line-modified">266   /**************************************************************************</span>
<span class="line-modified">267    *</span>
<span class="line-modified">268    * @functype:</span>
<span class="line-modified">269    *   TT_Load_SBit_Image_Func</span>
<span class="line-modified">270    *</span>
<span class="line-modified">271    * @description:</span>
<span class="line-modified">272    *   Load a given glyph sbit image from the font resource.  This also</span>
<span class="line-modified">273    *   returns its metrics.</span>
<span class="line-modified">274    *</span>
<span class="line-modified">275    * @input:</span>
<span class="line-modified">276    *   face ::</span>
<span class="line-modified">277    *     The target face object.</span>
<span class="line-modified">278    *</span>
<span class="line-modified">279    *   strike_index ::</span>
<span class="line-modified">280    *     The strike index.</span>
<span class="line-modified">281    *</span>
<span class="line-modified">282    *   glyph_index ::</span>
<span class="line-modified">283    *     The current glyph index.</span>
<span class="line-modified">284    *</span>
<span class="line-modified">285    *   load_flags ::</span>
<span class="line-modified">286    *     The current load flags.</span>
<span class="line-modified">287    *</span>
<span class="line-modified">288    *   stream ::</span>
<span class="line-modified">289    *     The input stream.</span>
<span class="line-modified">290    *</span>
<span class="line-modified">291    * @output:</span>
<span class="line-modified">292    *   amap ::</span>
<span class="line-modified">293    *     The target pixmap.</span>
<span class="line-modified">294    *</span>
<span class="line-modified">295    *   ametrics ::</span>
<span class="line-modified">296    *     A big sbit metrics structure for the glyph image.</span>
<span class="line-modified">297    *</span>
<span class="line-modified">298    * @return:</span>
<span class="line-modified">299    *   FreeType error code.  0 means success.  Returns an error if no glyph</span>
<span class="line-modified">300    *   sbit exists for the index.</span>
<span class="line-modified">301    *</span>
<span class="line-modified">302    * @note:</span>
<span class="line-modified">303    *   The `map.buffer` field is always freed before the glyph is loaded.</span>
<span class="line-modified">304    */</span>
305   typedef FT_Error
306   (*TT_Load_SBit_Image_Func)( TT_Face              face,
307                               FT_ULong             strike_index,
308                               FT_UInt              glyph_index,
309                               FT_UInt              load_flags,
310                               FT_Stream            stream,
311                               FT_Bitmap           *amap,
312                               TT_SBit_MetricsRec  *ametrics );
313 
314 
<span class="line-modified">315   /**************************************************************************</span>
<span class="line-modified">316    *</span>
<span class="line-modified">317    * @functype:</span>
<span class="line-modified">318    *   TT_Set_SBit_Strike_Func</span>
<span class="line-modified">319    *</span>
<span class="line-modified">320    * @description:</span>
<span class="line-modified">321    *   Select an sbit strike for a given size request.</span>
<span class="line-modified">322    *</span>
<span class="line-modified">323    * @input:</span>
<span class="line-modified">324    *   face ::</span>
<span class="line-modified">325    *     The target face object.</span>
<span class="line-modified">326    *</span>
<span class="line-modified">327    *   req ::</span>
<span class="line-modified">328    *     The size request.</span>
<span class="line-modified">329    *</span>
<span class="line-modified">330    * @output:</span>
<span class="line-modified">331    *   astrike_index ::</span>
<span class="line-modified">332    *     The index of the sbit strike.</span>
<span class="line-modified">333    *</span>
<span class="line-modified">334    * @return:</span>
<span class="line-added">335    *   FreeType error code.  0 means success.  Returns an error if no sbit</span>
<span class="line-added">336    *   strike exists for the selected ppem values.</span>
<span class="line-added">337    */</span>
338   typedef FT_Error
339   (*TT_Set_SBit_Strike_Func)( TT_Face          face,
340                               FT_Size_Request  req,
341                               FT_ULong*        astrike_index );
342 
343 
<span class="line-modified">344   /**************************************************************************</span>
<span class="line-modified">345    *</span>
<span class="line-modified">346    * @functype:</span>
<span class="line-modified">347    *   TT_Load_Strike_Metrics_Func</span>
<span class="line-modified">348    *</span>
<span class="line-modified">349    * @description:</span>
<span class="line-modified">350    *   Load the metrics of a given strike.</span>
<span class="line-modified">351    *</span>
<span class="line-modified">352    * @input:</span>
<span class="line-modified">353    *   face ::</span>
<span class="line-modified">354    *     The target face object.</span>
<span class="line-modified">355    *</span>
<span class="line-modified">356    *   strike_index ::</span>
<span class="line-modified">357    *     The strike index.</span>
<span class="line-modified">358    *</span>
<span class="line-modified">359    * @output:</span>
<span class="line-modified">360    *   metrics ::</span>
<span class="line-modified">361    *     the metrics of the strike.</span>
<span class="line-modified">362    *</span>
<span class="line-modified">363    * @return:</span>
<span class="line-added">364    *   FreeType error code.  0 means success.  Returns an error if no such</span>
<span class="line-added">365    *   sbit strike exists.</span>
<span class="line-added">366    */</span>
367   typedef FT_Error
368   (*TT_Load_Strike_Metrics_Func)( TT_Face           face,
369                                   FT_ULong          strike_index,
370                                   FT_Size_Metrics*  metrics );
371 
372 
<span class="line-modified">373   /**************************************************************************</span>
<span class="line-modified">374    *</span>
<span class="line-modified">375    * @functype:</span>
<span class="line-modified">376    *   TT_Get_PS_Name_Func</span>
<span class="line-modified">377    *</span>
<span class="line-modified">378    * @description:</span>
<span class="line-modified">379    *   Get the PostScript glyph name of a glyph.</span>
<span class="line-modified">380    *</span>
<span class="line-modified">381    * @input:</span>
<span class="line-modified">382    *   idx ::</span>
<span class="line-modified">383    *     The glyph index.</span>
<span class="line-modified">384    *</span>
<span class="line-modified">385    *   PSname ::</span>
<span class="line-modified">386    *     The address of a string pointer.  Will be `NULL` in case of error,</span>
<span class="line-modified">387    *     otherwise it is a pointer to the glyph name.</span>
<span class="line-modified">388    *</span>
<span class="line-modified">389    *     You must not modify the returned string!</span>
<span class="line-modified">390    *</span>
<span class="line-modified">391    * @output:</span>
<span class="line-added">392    *   FreeType error code.  0 means success.</span>
<span class="line-added">393    */</span>
394   typedef FT_Error
395   (*TT_Get_PS_Name_Func)( TT_Face      face,
396                           FT_UInt      idx,
397                           FT_String**  PSname );
398 
399 
<span class="line-modified">400   /**************************************************************************</span>
<span class="line-modified">401    *</span>
<span class="line-modified">402    * @functype:</span>
<span class="line-modified">403    *   TT_Load_Metrics_Func</span>
<span class="line-modified">404    *</span>
<span class="line-modified">405    * @description:</span>
<span class="line-modified">406    *   Load a metrics table, which is a table with a horizontal and a</span>
<span class="line-modified">407    *   vertical version.</span>
<span class="line-modified">408    *</span>
<span class="line-modified">409    * @input:</span>
<span class="line-modified">410    *   face ::</span>
<span class="line-modified">411    *     A handle to the target face object.</span>
<span class="line-modified">412    *</span>
<span class="line-modified">413    *   stream ::</span>
<span class="line-modified">414    *     The input stream.</span>
<span class="line-modified">415    *</span>
<span class="line-modified">416    *   vertical ::</span>
<span class="line-modified">417    *     A boolean flag.  If set, load the vertical one.</span>
<span class="line-modified">418    *</span>
<span class="line-added">419    * @return:</span>
<span class="line-added">420    *   FreeType error code.  0 means success.</span>
<span class="line-added">421    */</span>
422   typedef FT_Error
423   (*TT_Load_Metrics_Func)( TT_Face    face,
424                            FT_Stream  stream,
425                            FT_Bool    vertical );
426 
427 
<span class="line-modified">428   /**************************************************************************</span>
<span class="line-modified">429    *</span>
<span class="line-modified">430    * @functype:</span>
<span class="line-modified">431    *   TT_Get_Metrics_Func</span>
<span class="line-modified">432    *</span>
<span class="line-modified">433    * @description:</span>
<span class="line-modified">434    *   Load the horizontal or vertical header in a face object.</span>
<span class="line-modified">435    *</span>
<span class="line-modified">436    * @input:</span>
<span class="line-modified">437    *   face ::</span>
<span class="line-modified">438    *     A handle to the target face object.</span>
<span class="line-modified">439    *</span>
<span class="line-modified">440    *   vertical ::</span>
<span class="line-modified">441    *     A boolean flag.  If set, load vertical metrics.</span>
<span class="line-modified">442    *</span>
<span class="line-modified">443    *   gindex ::</span>
<span class="line-modified">444    *     The glyph index.</span>
<span class="line-modified">445    *</span>
<span class="line-modified">446    * @output:</span>
<span class="line-modified">447    *   abearing ::</span>
<span class="line-modified">448    *     The horizontal (or vertical) bearing.  Set to zero in case of error.</span>
<span class="line-modified">449    *</span>
<span class="line-added">450    *   aadvance ::</span>
<span class="line-added">451    *     The horizontal (or vertical) advance.  Set to zero in case of error.</span>
<span class="line-added">452    */</span>
453   typedef void
454   (*TT_Get_Metrics_Func)( TT_Face     face,
455                           FT_Bool     vertical,
456                           FT_UInt     gindex,
457                           FT_Short*   abearing,
458                           FT_UShort*  aadvance );
459 
460 
<span class="line-modified">461   /**************************************************************************</span>
<span class="line-modified">462    *</span>
<span class="line-modified">463    * @functype:</span>
<span class="line-modified">464    *   TT_Set_Palette_Func</span>
<span class="line-modified">465    *</span>
<span class="line-modified">466    * @description:</span>
<span class="line-modified">467    *   Load the colors into `face-&gt;palette` for a given palette index.</span>
<span class="line-modified">468    *</span>
<span class="line-modified">469    * @input:</span>
<span class="line-modified">470    *   face ::</span>
<span class="line-modified">471    *     The target face object.</span>
<span class="line-modified">472    *</span>
<span class="line-modified">473    *   idx ::</span>
<span class="line-modified">474    *     The palette index.</span>
<span class="line-modified">475    *</span>
<span class="line-modified">476    * @return:</span>
<span class="line-modified">477    *   FreeType error code.  0 means success.</span>
<span class="line-modified">478    */</span>
<span class="line-modified">479   typedef FT_Error</span>
<span class="line-modified">480   (*TT_Set_Palette_Func)( TT_Face  face,</span>
<span class="line-modified">481                           FT_UInt  idx );</span>
<span class="line-added">482 </span>
<span class="line-added">483 </span>
<span class="line-added">484   /**************************************************************************</span>
<span class="line-added">485    *</span>
<span class="line-added">486    * @functype:</span>
<span class="line-added">487    *   TT_Get_Colr_Layer_Func</span>
<span class="line-added">488    *</span>
<span class="line-added">489    * @description:</span>
<span class="line-added">490    *   Iteratively get the color layer data of a given glyph index.</span>
<span class="line-added">491    *</span>
<span class="line-added">492    * @input:</span>
<span class="line-added">493    *   face ::</span>
<span class="line-added">494    *     The target face object.</span>
<span class="line-added">495    *</span>
<span class="line-added">496    *   base_glyph ::</span>
<span class="line-added">497    *     The glyph index the colored glyph layers are associated with.</span>
<span class="line-added">498    *</span>
<span class="line-added">499    * @inout:</span>
<span class="line-added">500    *   iterator ::</span>
<span class="line-added">501    *     An @FT_LayerIterator object.  For the first call you should set</span>
<span class="line-added">502    *     `iterator-&gt;p` to `NULL`.  For all following calls, simply use the</span>
<span class="line-added">503    *     same object again.</span>
<span class="line-added">504    *</span>
<span class="line-added">505    * @output:</span>
<span class="line-added">506    *   aglyph_index ::</span>
<span class="line-added">507    *     The glyph index of the current layer.</span>
<span class="line-added">508    *</span>
<span class="line-added">509    *   acolor_index ::</span>
<span class="line-added">510    *     The color index into the font face&#39;s color palette of the current</span>
<span class="line-added">511    *     layer.  The value 0xFFFF is special; it doesn&#39;t reference a palette</span>
<span class="line-added">512    *     entry but indicates that the text foreground color should be used</span>
<span class="line-added">513    *     instead (to be set up by the application outside of FreeType).</span>
<span class="line-added">514    *</span>
<span class="line-added">515    * @return:</span>
<span class="line-added">516    *   Value~1 if everything is OK.  If there are no more layers (or if there</span>
<span class="line-added">517    *   are no layers at all), value~0 gets returned.  In case of an error,</span>
<span class="line-added">518    *   value~0 is returned also.</span>
<span class="line-added">519    */</span>
<span class="line-added">520   typedef FT_Bool</span>
<span class="line-added">521   (*TT_Get_Colr_Layer_Func)( TT_Face            face,</span>
<span class="line-added">522                              FT_UInt            base_glyph,</span>
<span class="line-added">523                              FT_UInt           *aglyph_index,</span>
<span class="line-added">524                              FT_UInt           *acolor_index,</span>
<span class="line-added">525                              FT_LayerIterator*  iterator );</span>
<span class="line-added">526 </span>
<span class="line-added">527 </span>
<span class="line-added">528   /**************************************************************************</span>
<span class="line-added">529    *</span>
<span class="line-added">530    * @functype:</span>
<span class="line-added">531    *   TT_Blend_Colr_Func</span>
<span class="line-added">532    *</span>
<span class="line-added">533    * @description:</span>
<span class="line-added">534    *   Blend the bitmap in `new_glyph` into `base_glyph` using the color</span>
<span class="line-added">535    *   specified by `color_index`.  If `color_index` is 0xFFFF, use</span>
<span class="line-added">536    *   `face-&gt;foreground_color` if `face-&gt;have_foreground_color` is set.</span>
<span class="line-added">537    *   Otherwise check `face-&gt;palette_data.palette_flags`: If present and</span>
<span class="line-added">538    *   @FT_PALETTE_FOR_DARK_BACKGROUND is set, use BGRA value 0xFFFFFFFF</span>
<span class="line-added">539    *   (white opaque).  Otherwise use BGRA value 0x000000FF (black opaque).</span>
<span class="line-added">540    *</span>
<span class="line-added">541    * @input:</span>
<span class="line-added">542    *   face ::</span>
<span class="line-added">543    *     The target face object.</span>
<span class="line-added">544    *</span>
<span class="line-added">545    *   color_index ::</span>
<span class="line-added">546    *     Color index from the COLR table.</span>
<span class="line-added">547    *</span>
<span class="line-added">548    *   base_glyph ::</span>
<span class="line-added">549    *     Slot for bitmap to be merged into.  The underlying bitmap may get</span>
<span class="line-added">550    *     reallocated.</span>
<span class="line-added">551    *</span>
<span class="line-added">552    *   new_glyph ::</span>
<span class="line-added">553    *     Slot to be incooperated into `base_glyph`.</span>
<span class="line-added">554    *</span>
<span class="line-added">555    * @return:</span>
<span class="line-added">556    *   FreeType error code.  0 means success.  Returns an error if</span>
<span class="line-added">557    *   color_index is invalid or reallocation fails.</span>
<span class="line-added">558    */</span>
<span class="line-added">559   typedef FT_Error</span>
<span class="line-added">560   (*TT_Blend_Colr_Func)( TT_Face       face,</span>
<span class="line-added">561                          FT_UInt       color_index,</span>
<span class="line-added">562                          FT_GlyphSlot  base_glyph,</span>
<span class="line-added">563                          FT_GlyphSlot  new_glyph );</span>
<span class="line-added">564 </span>
<span class="line-added">565 </span>
<span class="line-added">566   /**************************************************************************</span>
<span class="line-added">567    *</span>
<span class="line-added">568    * @functype:</span>
<span class="line-added">569    *   TT_Get_Name_Func</span>
<span class="line-added">570    *</span>
<span class="line-added">571    * @description:</span>
<span class="line-added">572    *   From the &#39;name&#39; table, return a given ENGLISH name record in ASCII.</span>
<span class="line-added">573    *</span>
<span class="line-added">574    * @input:</span>
<span class="line-added">575    *   face ::</span>
<span class="line-added">576    *     A handle to the source face object.</span>
<span class="line-added">577    *</span>
<span class="line-added">578    *   nameid ::</span>
<span class="line-added">579    *     The name id of the name record to return.</span>
<span class="line-added">580    *</span>
<span class="line-added">581    * @inout:</span>
<span class="line-added">582    *   name ::</span>
<span class="line-added">583    *     The address of an allocated string pointer.  `NULL` if no name is</span>
<span class="line-added">584    *     present.</span>
<span class="line-added">585    *</span>
<span class="line-added">586    * @return:</span>
<span class="line-added">587    *   FreeType error code.  0 means success.</span>
<span class="line-added">588    */</span>
589   typedef FT_Error
590   (*TT_Get_Name_Func)( TT_Face      face,
591                        FT_UShort    nameid,
592                        FT_String**  name );
593 
594 
<span class="line-modified">595   /**************************************************************************</span>
<span class="line-modified">596    *</span>
<span class="line-modified">597    * @functype:</span>
<span class="line-modified">598    *   TT_Get_Name_ID_Func</span>
<span class="line-modified">599    *</span>
<span class="line-modified">600    * @description:</span>
<span class="line-modified">601    *   Search whether an ENGLISH version for a given name ID is in the &#39;name&#39;</span>
<span class="line-modified">602    *   table.</span>
<span class="line-modified">603    *</span>
<span class="line-modified">604    * @input:</span>
<span class="line-modified">605    *   face ::</span>
<span class="line-modified">606    *     A handle to the source face object.</span>
<span class="line-modified">607    *</span>
<span class="line-modified">608    *   nameid ::</span>
<span class="line-modified">609    *     The name id of the name record to return.</span>
<span class="line-modified">610    *</span>
<span class="line-modified">611    * @output:</span>
<span class="line-modified">612    *   win ::</span>
<span class="line-modified">613    *     If non-negative, an index into the &#39;name&#39; table with the</span>
<span class="line-modified">614    *     corresponding (3,1) or (3,0) Windows entry.</span>
<span class="line-modified">615    *</span>
<span class="line-modified">616    *   apple ::</span>
<span class="line-modified">617    *     If non-negative, an index into the &#39;name&#39; table with the</span>
<span class="line-modified">618    *     corresponding (1,0) Apple entry.</span>
<span class="line-added">619    *</span>
<span class="line-added">620    * @return:</span>
<span class="line-added">621    *   1 if there is either a win or apple entry (or both), 0 otheriwse.</span>
<span class="line-added">622    */</span>
623   typedef FT_Bool
624   (*TT_Get_Name_ID_Func)( TT_Face    face,
625                           FT_UShort  nameid,
626                           FT_Int    *win,
627                           FT_Int    *apple );
628 
629 
<span class="line-modified">630   /**************************************************************************</span>
<span class="line-modified">631    *</span>
<span class="line-modified">632    * @functype:</span>
<span class="line-modified">633    *   TT_Load_Table_Func</span>
<span class="line-modified">634    *</span>
<span class="line-modified">635    * @description:</span>
<span class="line-modified">636    *   Load a given TrueType table.</span>
<span class="line-modified">637    *</span>
<span class="line-modified">638    * @input:</span>
<span class="line-modified">639    *   face ::</span>
<span class="line-modified">640    *     A handle to the target face object.</span>
<span class="line-modified">641    *</span>
<span class="line-modified">642    *   stream ::</span>
<span class="line-modified">643    *     The input stream.</span>
<span class="line-modified">644    *</span>
<span class="line-modified">645    * @return:</span>
<span class="line-modified">646    *   FreeType error code.  0 means success.</span>
<span class="line-modified">647    *</span>
<span class="line-modified">648    * @note:</span>
<span class="line-modified">649    *   The function uses `face-&gt;goto_table` to seek the stream to the start</span>
<span class="line-added">650    *   of the table, except while loading the font directory.</span>
<span class="line-added">651    */</span>
652   typedef FT_Error
653   (*TT_Load_Table_Func)( TT_Face    face,
654                          FT_Stream  stream );
655 
656 
<span class="line-modified">657   /**************************************************************************</span>
<span class="line-modified">658    *</span>
<span class="line-modified">659    * @functype:</span>
<span class="line-modified">660    *   TT_Free_Table_Func</span>
<span class="line-modified">661    *</span>
<span class="line-modified">662    * @description:</span>
<span class="line-modified">663    *   Free a given TrueType table.</span>
<span class="line-modified">664    *</span>
<span class="line-modified">665    * @input:</span>
<span class="line-modified">666    *   face ::</span>
<span class="line-modified">667    *     A handle to the target face object.</span>
<span class="line-added">668    */</span>
669   typedef void
670   (*TT_Free_Table_Func)( TT_Face  face );
671 
672 
673   /*
674    * @functype:
675    *    TT_Face_GetKerningFunc
676    *
677    * @description:
678    *    Return the horizontal kerning value between two glyphs.
679    *
680    * @input:
<span class="line-modified">681    *    face ::</span>
<span class="line-modified">682    *      A handle to the source face object.</span>
<span class="line-modified">683    *</span>
<span class="line-added">684    *    left_glyph ::</span>
<span class="line-added">685    *      The left glyph index.</span>
<span class="line-added">686    *</span>
<span class="line-added">687    *    right_glyph ::</span>
<span class="line-added">688    *      The right glyph index.</span>
689    *
690    * @return:
691    *    The kerning value in font units.
692    */
693   typedef FT_Int
694   (*TT_Face_GetKerningFunc)( TT_Face  face,
695                              FT_UInt  left_glyph,
696                              FT_UInt  right_glyph );
697 
698 
<span class="line-modified">699   /**************************************************************************</span>
<span class="line-modified">700    *</span>
<span class="line-modified">701    * @struct:</span>
<span class="line-modified">702    *   SFNT_Interface</span>
<span class="line-modified">703    *</span>
<span class="line-modified">704    * @description:</span>
<span class="line-modified">705    *   This structure holds pointers to the functions used to load and free</span>
<span class="line-modified">706    *   the basic tables that are required in a &#39;sfnt&#39; font file.</span>
<span class="line-modified">707    *</span>
<span class="line-modified">708    * @fields:</span>
<span class="line-modified">709    *   Check the various xxx_Func() descriptions for details.</span>
<span class="line-modified">710    */</span>
711   typedef struct  SFNT_Interface_
712   {
713     TT_Loader_GotoTableFunc      goto_table;
714 
715     TT_Init_Face_Func            init_face;
716     TT_Load_Face_Func            load_face;
717     TT_Done_Face_Func            done_face;
718     FT_Module_Requester          get_interface;
719 
720     TT_Load_Any_Func             load_any;
721 
722     /* these functions are called by `load_face&#39; but they can also  */
723     /* be called from external modules, if there is a need to do so */
724     TT_Load_Table_Func           load_head;
725     TT_Load_Metrics_Func         load_hhea;
726     TT_Load_Table_Func           load_cmap;
727     TT_Load_Table_Func           load_maxp;
728     TT_Load_Table_Func           load_os2;
729     TT_Load_Table_Func           load_post;
730 
</pre>
<hr />
<pre>
748     TT_Free_Table_Func           free_psnames;
749 
750     /* starting here, the structure differs from version 2.1.7 */
751 
752     /* this field was introduced in version 2.1.8, named `get_psname&#39; */
753     TT_Face_GetKerningFunc       get_kerning;
754 
755     /* new elements introduced after version 2.1.10 */
756 
757     /* load the font directory, i.e., the offset table and */
758     /* the table directory                                 */
759     TT_Load_Table_Func           load_font_dir;
760     TT_Load_Metrics_Func         load_hmtx;
761 
762     TT_Load_Table_Func           load_eblc;
763     TT_Free_Table_Func           free_eblc;
764 
765     TT_Set_SBit_Strike_Func      set_sbit_strike;
766     TT_Load_Strike_Metrics_Func  load_strike_metrics;
767 
<span class="line-added">768     TT_Load_Table_Func           load_cpal;</span>
<span class="line-added">769     TT_Load_Table_Func           load_colr;</span>
<span class="line-added">770     TT_Free_Table_Func           free_cpal;</span>
<span class="line-added">771     TT_Free_Table_Func           free_colr;</span>
<span class="line-added">772     TT_Set_Palette_Func          set_palette;</span>
<span class="line-added">773     TT_Get_Colr_Layer_Func       get_colr_layer;</span>
<span class="line-added">774     TT_Blend_Colr_Func           colr_blend;</span>
<span class="line-added">775 </span>
776     TT_Get_Metrics_Func          get_metrics;
777 
778     TT_Get_Name_Func             get_name;
779     TT_Get_Name_ID_Func          get_name_id;
780 
781   } SFNT_Interface;
782 
783 
784   /* transitional */
785   typedef SFNT_Interface*   SFNT_Service;
786 

787 
788 #define FT_DEFINE_SFNT_INTERFACE(        \
789           class_,                        \
790           goto_table_,                   \
791           init_face_,                    \
792           load_face_,                    \
793           done_face_,                    \
794           get_interface_,                \
795           load_any_,                     \
796           load_head_,                    \
797           load_hhea_,                    \
798           load_cmap_,                    \
799           load_maxp_,                    \
800           load_os2_,                     \
801           load_post_,                    \
802           load_name_,                    \
803           free_name_,                    \
804           load_kern_,                    \
805           load_gasp_,                    \
806           load_pclt_,                    \
807           load_bhed_,                    \
808           load_sbit_image_,              \
809           get_psname_,                   \
810           free_psnames_,                 \
811           get_kerning_,                  \
812           load_font_dir_,                \
813           load_hmtx_,                    \
814           load_eblc_,                    \
815           free_eblc_,                    \
816           set_sbit_strike_,              \
817           load_strike_metrics_,          \
<span class="line-added">818           load_cpal_,                    \</span>
<span class="line-added">819           load_colr_,                    \</span>
<span class="line-added">820           free_cpal_,                    \</span>
<span class="line-added">821           free_colr_,                    \</span>
<span class="line-added">822           set_palette_,                  \</span>
<span class="line-added">823           get_colr_layer_,               \</span>
<span class="line-added">824           colr_blend_,                   \</span>
825           get_metrics_,                  \
826           get_name_,                     \
827           get_name_id_ )                 \
828   static const SFNT_Interface  class_ =  \
829   {                                      \
830     goto_table_,                         \
831     init_face_,                          \
832     load_face_,                          \
833     done_face_,                          \
834     get_interface_,                      \
835     load_any_,                           \
836     load_head_,                          \
837     load_hhea_,                          \
838     load_cmap_,                          \
839     load_maxp_,                          \
840     load_os2_,                           \
841     load_post_,                          \
842     load_name_,                          \
843     free_name_,                          \
844     load_kern_,                          \
845     load_gasp_,                          \
846     load_pclt_,                          \
847     load_bhed_,                          \
848     load_sbit_image_,                    \
849     get_psname_,                         \
850     free_psnames_,                       \
851     get_kerning_,                        \
852     load_font_dir_,                      \
853     load_hmtx_,                          \
854     load_eblc_,                          \
855     free_eblc_,                          \
856     set_sbit_strike_,                    \
857     load_strike_metrics_,                \
<span class="line-added">858     load_cpal_,                          \</span>
<span class="line-added">859     load_colr_,                          \</span>
<span class="line-added">860     free_cpal_,                          \</span>
<span class="line-added">861     free_colr_,                          \</span>
<span class="line-added">862     set_palette_,                        \</span>
<span class="line-added">863     get_colr_layer_,                     \</span>
<span class="line-added">864     colr_blend_,                         \</span>
865     get_metrics_,                        \
866     get_name_,                           \
867     get_name_id_                         \
868   };
869 














































































870 
871 FT_END_HEADER
872 
873 #endif /* SFNT_H_ */
874 
875 
876 /* END */
</pre>
</td>
</tr>
</table>
<center><a href="services/svwinfnt.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="t1types.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>