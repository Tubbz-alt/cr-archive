<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.desktop/share/native/libfreetype/include/freetype/internal/ftserv.h</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftrfork.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ftstream.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/internal/ftserv.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,42 ***</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  ftserv.h                                                               */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*    The FreeType services (specification only).                          */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  Copyright 2003-2018 by                                                 */</span>
<span class="line-modified">! /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified">! /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified">! /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified">! /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified">! /*  understand and accept it fully.                                        */</span>
<span class="line-modified">! /*                                                                         */</span>
<span class="line-modified">! /***************************************************************************/</span>
<span class="line-modified">! </span>
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*  Each module can export one or more `services&#39;.  Each service is      */</span>
<span class="line-modified">!   /*  identified by a constant string and modeled by a pointer; the latter */</span>
<span class="line-modified">!   /*  generally corresponds to a structure containing function pointers.   */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*  Note that a service&#39;s data cannot be a mere function pointer because */</span>
<span class="line-modified">!   /*  in C it is possible that function pointers might be implemented      */</span>
<span class="line-modified">!   /*  differently than data pointers (e.g. 48 bits instead of 32).         */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*************************************************************************/</span>
  
  
  #ifndef FTSERV_H_
  #define FTSERV_H_
  
  
  FT_BEGIN_HEADER
  
<span class="line-modified">!   /*</span>
     * @macro:
     *   FT_FACE_FIND_SERVICE
     *
     * @description:
     *   This macro is used to look up a service from a face&#39;s driver module.
<span class="line-new-header">--- 1,43 ---</span>
<span class="line-modified">! /****************************************************************************</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * ftserv.h</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  *   The FreeType services (specification only).</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * Copyright (C) 2003-2019 by</span>
<span class="line-modified">!  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified">!  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified">!  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified">!  * this file you indicate that you have read the license and</span>
<span class="line-modified">!  * understand and accept it fully.</span>
<span class="line-modified">!  *</span>
<span class="line-modified">!  */</span>
<span class="line-modified">! </span>
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * Each module can export one or more &#39;services&#39;.  Each service is</span>
<span class="line-modified">!    * identified by a constant string and modeled by a pointer; the latter</span>
<span class="line-modified">!    * generally corresponds to a structure containing function pointers.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * Note that a service&#39;s data cannot be a mere function pointer because in</span>
<span class="line-modified">!    * C it is possible that function pointers might be implemented differently</span>
<span class="line-modified">!    * than data pointers (e.g. 48 bits instead of 32).</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    */</span>
  
  
  #ifndef FTSERV_H_
  #define FTSERV_H_
  
  
  FT_BEGIN_HEADER
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-added">+    *</span>
     * @macro:
     *   FT_FACE_FIND_SERVICE
     *
     * @description:
     *   This macro is used to look up a service from a face&#39;s driver module.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 44,19 ***</span>
     * @input:
     *   face ::
     *     The source face handle.
     *
     *   id ::
<span class="line-modified">!    *     A string describing the service as defined in the service&#39;s</span>
<span class="line-modified">!    *     header files (e.g. FT_SERVICE_ID_MULTI_MASTERS which expands to</span>
<span class="line-modified">!    *     `multi-masters&#39;).  It is automatically prefixed with</span>
<span class="line-modified">!    *     `FT_SERVICE_ID_&#39;.</span>
     *
     * @output:
     *   ptr ::
<span class="line-modified">!    *     A variable that receives the service pointer.  Will be NULL</span>
<span class="line-modified">!    *     if not found.</span>
     */
  #ifdef __cplusplus
  
  #define FT_FACE_FIND_SERVICE( face, ptr, id )                               \
    FT_BEGIN_STMNT                                                            \
<span class="line-new-header">--- 45,19 ---</span>
     * @input:
     *   face ::
     *     The source face handle.
     *
     *   id ::
<span class="line-modified">!    *     A string describing the service as defined in the service&#39;s header</span>
<span class="line-modified">!    *     files (e.g. FT_SERVICE_ID_MULTI_MASTERS which expands to</span>
<span class="line-modified">!    *     &#39;multi-masters&#39;).  It is automatically prefixed with</span>
<span class="line-modified">!    *     `FT_SERVICE_ID_`.</span>
     *
     * @output:
     *   ptr ::
<span class="line-modified">!    *     A variable that receives the service pointer.  Will be `NULL` if not</span>
<span class="line-modified">!    *     found.</span>
     */
  #ifdef __cplusplus
  
  #define FT_FACE_FIND_SERVICE( face, ptr, id )                               \
    FT_BEGIN_STMNT                                                            \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 83,11 ***</span>
    FT_END_STMNT
  
  #endif /* !C++ */
  
  
<span class="line-modified">!   /*</span>
     * @macro:
     *   FT_FACE_FIND_GLOBAL_SERVICE
     *
     * @description:
     *   This macro is used to look up a service from all modules.
<span class="line-new-header">--- 84,12 ---</span>
    FT_END_STMNT
  
  #endif /* !C++ */
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-added">+    *</span>
     * @macro:
     *   FT_FACE_FIND_GLOBAL_SERVICE
     *
     * @description:
     *   This macro is used to look up a service from all modules.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 95,19 ***</span>
     * @input:
     *   face ::
     *     The source face handle.
     *
     *   id ::
<span class="line-modified">!    *     A string describing the service as defined in the service&#39;s</span>
<span class="line-modified">!    *     header files (e.g. FT_SERVICE_ID_MULTI_MASTERS which expands to</span>
<span class="line-modified">!    *     `multi-masters&#39;).  It is automatically prefixed with</span>
<span class="line-modified">!    *     `FT_SERVICE_ID_&#39;.</span>
     *
     * @output:
     *   ptr ::
<span class="line-modified">!    *     A variable that receives the service pointer.  Will be NULL</span>
<span class="line-modified">!    *     if not found.</span>
     */
  #ifdef __cplusplus
  
  #define FT_FACE_FIND_GLOBAL_SERVICE( face, ptr, id )                  \
    FT_BEGIN_STMNT                                                      \
<span class="line-new-header">--- 97,19 ---</span>
     * @input:
     *   face ::
     *     The source face handle.
     *
     *   id ::
<span class="line-modified">!    *     A string describing the service as defined in the service&#39;s header</span>
<span class="line-modified">!    *     files (e.g. FT_SERVICE_ID_MULTI_MASTERS which expands to</span>
<span class="line-modified">!    *     &#39;multi-masters&#39;).  It is automatically prefixed with</span>
<span class="line-modified">!    *     `FT_SERVICE_ID_`.</span>
     *
     * @output:
     *   ptr ::
<span class="line-modified">!    *     A variable that receives the service pointer.  Will be `NULL` if not</span>
<span class="line-modified">!    *     found.</span>
     */
  #ifdef __cplusplus
  
  #define FT_FACE_FIND_GLOBAL_SERVICE( face, ptr, id )                  \
    FT_BEGIN_STMNT                                                      \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 142,12 ***</span>
    /*****                                                               *****/
    /*************************************************************************/
    /*************************************************************************/
  
    /*
<span class="line-modified">!    *  The following structure is used to _describe_ a given service</span>
<span class="line-modified">!    *  to the library.  This is useful to build simple static service lists.</span>
     */
    typedef struct  FT_ServiceDescRec_
    {
      const char*  serv_id;     /* service name         */
      const void*  serv_data;   /* service pointer/data */
<span class="line-new-header">--- 144,12 ---</span>
    /*****                                                               *****/
    /*************************************************************************/
    /*************************************************************************/
  
    /*
<span class="line-modified">!    * The following structure is used to _describe_ a given service to the</span>
<span class="line-modified">!    * library.  This is useful to build simple static service lists.</span>
     */
    typedef struct  FT_ServiceDescRec_
    {
      const char*  serv_id;     /* service name         */
      const void*  serv_data;   /* service pointer/data */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 155,39 ***</span>
    } FT_ServiceDescRec;
  
    typedef const FT_ServiceDescRec*  FT_ServiceDesc;
  
  
<span class="line-modified">!   /*************************************************************************/</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Macro&gt;                                                               */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC1                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC2                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC3                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC4                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC5                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC6                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC7                                          */</span>
<span class="line-modified">!   /*    FT_DEFINE_SERVICEDESCREC8                                          */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified">!   /*    Used to initialize an array of FT_ServiceDescRec structures.       */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-modified">!   /*    When FT_CONFIG_OPTION_PIC is defined a `create&#39; function needs to  */</span>
<span class="line-modified">!   /*    be called with a pointer to return an allocated array.  As soon as */</span>
<span class="line-modified">!   /*    it is no longer needed, a `destroy&#39; function needs to be called to */</span>
<span class="line-modified">!   /*    release that allocation.                                           */</span>
<span class="line-modified">!   /*                                                                       */</span>
<span class="line-removed">-   /*    These functions should be manually called from the `pic_init&#39; and  */</span>
<span class="line-removed">-   /*    `pic_free&#39; functions of your module (see FT_DEFINE_MODULE).        */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">-   /*    When FT_CONFIG_OPTION_PIC is not defined the array will be         */</span>
<span class="line-removed">-   /*    allocated in the global scope (or the scope where the macro is     */</span>
<span class="line-removed">-   /*    used).                                                             */</span>
<span class="line-removed">-   /*                                                                       */</span>
<span class="line-removed">- #ifndef FT_CONFIG_OPTION_PIC</span>
<span class="line-removed">- </span>
  #define FT_DEFINE_SERVICEDESCREC1( class_,                                  \
                                     serv_id_1, serv_data_1 )                 \
    static const FT_ServiceDescRec  class_[] =                                \
    {                                                                         \
      { serv_id_1, serv_data_1 },                                             \
<span class="line-new-header">--- 157,30 ---</span>
    } FT_ServiceDescRec;
  
    typedef const FT_ServiceDescRec*  FT_ServiceDesc;
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @macro:</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC1</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC2</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC3</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC4</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC5</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC6</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC7</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC8</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC9</span>
<span class="line-modified">!    *   FT_DEFINE_SERVICEDESCREC10</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    * @description:</span>
<span class="line-modified">!    *   Used to initialize an array of FT_ServiceDescRec structures.</span>
<span class="line-modified">!    *</span>
<span class="line-modified">!    *   The array will be allocated in the global scope (or the scope where</span>
<span class="line-modified">!    *   the macro is used).</span>
<span class="line-modified">!    */</span>
  #define FT_DEFINE_SERVICEDESCREC1( class_,                                  \
                                     serv_id_1, serv_data_1 )                 \
    static const FT_ServiceDescRec  class_[] =                                \
    {                                                                         \
      { serv_id_1, serv_data_1 },                                             \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 354,508 ***</span>
      { serv_id_9, serv_data_9 },                                             \
      { serv_id_10, serv_data_10 },                                           \
      { NULL, NULL }                                                          \
    };
  
<span class="line-removed">- #else /* FT_CONFIG_OPTION_PIC */</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC1( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 2 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[1].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC2( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 3 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[2].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC3( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 4 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[3].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC4( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3,                  \</span>
<span class="line-removed">-                                    serv_id_4, serv_data_4 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 5 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = serv_id_4;                                         \</span>
<span class="line-removed">-     clazz[3].serv_data = serv_data_4;                                       \</span>
<span class="line-removed">-     clazz[4].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[4].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC5( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3,                  \</span>
<span class="line-removed">-                                    serv_id_4, serv_data_4,                  \</span>
<span class="line-removed">-                                    serv_id_5, serv_data_5 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 6 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = serv_id_4;                                         \</span>
<span class="line-removed">-     clazz[3].serv_data = serv_data_4;                                       \</span>
<span class="line-removed">-     clazz[4].serv_id   = serv_id_5;                                         \</span>
<span class="line-removed">-     clazz[4].serv_data = serv_data_5;                                       \</span>
<span class="line-removed">-     clazz[5].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[5].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC6( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3,                  \</span>
<span class="line-removed">-                                    serv_id_4, serv_data_4,                  \</span>
<span class="line-removed">-                                    serv_id_5, serv_data_5,                  \</span>
<span class="line-removed">-                                    serv_id_6, serv_data_6 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 7 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = serv_id_4;                                         \</span>
<span class="line-removed">-     clazz[3].serv_data = serv_data_4;                                       \</span>
<span class="line-removed">-     clazz[4].serv_id   = serv_id_5;                                         \</span>
<span class="line-removed">-     clazz[4].serv_data = serv_data_5;                                       \</span>
<span class="line-removed">-     clazz[5].serv_id   = serv_id_6;                                         \</span>
<span class="line-removed">-     clazz[5].serv_data = serv_data_6;                                       \</span>
<span class="line-removed">-     clazz[6].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[6].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC7( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3,                  \</span>
<span class="line-removed">-                                    serv_id_4, serv_data_4,                  \</span>
<span class="line-removed">-                                    serv_id_5, serv_data_5,                  \</span>
<span class="line-removed">-                                    serv_id_6, serv_data_6,                  \</span>
<span class="line-removed">-                                    serv_id_7, serv_data_7 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 8 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = serv_id_4;                                         \</span>
<span class="line-removed">-     clazz[3].serv_data = serv_data_4;                                       \</span>
<span class="line-removed">-     clazz[4].serv_id   = serv_id_5;                                         \</span>
<span class="line-removed">-     clazz[4].serv_data = serv_data_5;                                       \</span>
<span class="line-removed">-     clazz[5].serv_id   = serv_id_6;                                         \</span>
<span class="line-removed">-     clazz[5].serv_data = serv_data_6;                                       \</span>
<span class="line-removed">-     clazz[6].serv_id   = serv_id_7;                                         \</span>
<span class="line-removed">-     clazz[6].serv_data = serv_data_7;                                       \</span>
<span class="line-removed">-     clazz[7].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[7].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC8( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3,                  \</span>
<span class="line-removed">-                                    serv_id_4, serv_data_4,                  \</span>
<span class="line-removed">-                                    serv_id_5, serv_data_5,                  \</span>
<span class="line-removed">-                                    serv_id_6, serv_data_6,                  \</span>
<span class="line-removed">-                                    serv_id_7, serv_data_7,                  \</span>
<span class="line-removed">-                                    serv_id_8, serv_data_8 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 9 ) )                         \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = serv_id_4;                                         \</span>
<span class="line-removed">-     clazz[3].serv_data = serv_data_4;                                       \</span>
<span class="line-removed">-     clazz[4].serv_id   = serv_id_5;                                         \</span>
<span class="line-removed">-     clazz[4].serv_data = serv_data_5;                                       \</span>
<span class="line-removed">-     clazz[5].serv_id   = serv_id_6;                                         \</span>
<span class="line-removed">-     clazz[5].serv_data = serv_data_6;                                       \</span>
<span class="line-removed">-     clazz[6].serv_id   = serv_id_7;                                         \</span>
<span class="line-removed">-     clazz[6].serv_data = serv_data_7;                                       \</span>
<span class="line-removed">-     clazz[7].serv_id   = serv_id_8;                                         \</span>
<span class="line-removed">-     clazz[7].serv_data = serv_data_8;                                       \</span>
<span class="line-removed">-     clazz[8].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[8].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC9( class_,                                  \</span>
<span class="line-removed">-                                    serv_id_1, serv_data_1,                  \</span>
<span class="line-removed">-                                    serv_id_2, serv_data_2,                  \</span>
<span class="line-removed">-                                    serv_id_3, serv_data_3,                  \</span>
<span class="line-removed">-                                    serv_id_4, serv_data_4,                  \</span>
<span class="line-removed">-                                    serv_id_5, serv_data_5,                  \</span>
<span class="line-removed">-                                    serv_id_6, serv_data_6,                  \</span>
<span class="line-removed">-                                    serv_id_7, serv_data_7,                  \</span>
<span class="line-removed">-                                    serv_id_8, serv_data_8,                  \</span>
<span class="line-removed">-                                    serv_id_9, serv_data_9 )                 \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 10 ) )                        \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[0].serv_id   = serv_id_1;                                         \</span>
<span class="line-removed">-     clazz[0].serv_data = serv_data_1;                                       \</span>
<span class="line-removed">-     clazz[1].serv_id   = serv_id_2;                                         \</span>
<span class="line-removed">-     clazz[1].serv_data = serv_data_2;                                       \</span>
<span class="line-removed">-     clazz[2].serv_id   = serv_id_3;                                         \</span>
<span class="line-removed">-     clazz[2].serv_data = serv_data_3;                                       \</span>
<span class="line-removed">-     clazz[3].serv_id   = serv_id_4;                                         \</span>
<span class="line-removed">-     clazz[3].serv_data = serv_data_4;                                       \</span>
<span class="line-removed">-     clazz[4].serv_id   = serv_id_5;                                         \</span>
<span class="line-removed">-     clazz[4].serv_data = serv_data_5;                                       \</span>
<span class="line-removed">-     clazz[5].serv_id   = serv_id_6;                                         \</span>
<span class="line-removed">-     clazz[5].serv_data = serv_data_6;                                       \</span>
<span class="line-removed">-     clazz[6].serv_id   = serv_id_7;                                         \</span>
<span class="line-removed">-     clazz[6].serv_data = serv_data_7;                                       \</span>
<span class="line-removed">-     clazz[7].serv_id   = serv_id_8;                                         \</span>
<span class="line-removed">-     clazz[7].serv_data = serv_data_8;                                       \</span>
<span class="line-removed">-     clazz[8].serv_id   = serv_id_9;                                         \</span>
<span class="line-removed">-     clazz[8].serv_data = serv_data_9;                                       \</span>
<span class="line-removed">-     clazz[9].serv_id   = NULL;                                              \</span>
<span class="line-removed">-     clazz[9].serv_data = NULL;                                              \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #define FT_DEFINE_SERVICEDESCREC10( class_,                                 \</span>
<span class="line-removed">-                                     serv_id_1, serv_data_1,                 \</span>
<span class="line-removed">-                                     serv_id_2, serv_data_2,                 \</span>
<span class="line-removed">-                                     serv_id_3, serv_data_3,                 \</span>
<span class="line-removed">-                                     serv_id_4, serv_data_4,                 \</span>
<span class="line-removed">-                                     serv_id_5, serv_data_5,                 \</span>
<span class="line-removed">-                                     serv_id_6, serv_data_6,                 \</span>
<span class="line-removed">-                                     serv_id_7, serv_data_7,                 \</span>
<span class="line-removed">-                                     serv_id_8, serv_data_8,                 \</span>
<span class="line-removed">-                                     serv_id_9, serv_data_9,                 \</span>
<span class="line-removed">-                                     serv_id_10, serv_data_10 )              \</span>
<span class="line-removed">-   void                                                                      \</span>
<span class="line-removed">-   FT_Destroy_Class_ ## class_( FT_Library          library,                 \</span>
<span class="line-removed">-                                FT_ServiceDescRec*  clazz )                  \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_Memory  memory = library-&gt;memory;                                    \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( clazz )                                                            \</span>
<span class="line-removed">-       FT_FREE( clazz );                                                     \</span>
<span class="line-removed">-   }                                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-   FT_Error                                                                  \</span>
<span class="line-removed">-   FT_Create_Class_ ## class_( FT_Library           library,                 \</span>
<span class="line-removed">-                               FT_ServiceDescRec**  output_class )           \</span>
<span class="line-removed">-   {                                                                         \</span>
<span class="line-removed">-     FT_ServiceDescRec*  clazz  = NULL;                                      \</span>
<span class="line-removed">-     FT_Error            error;                                              \</span>
<span class="line-removed">-     FT_Memory           memory = library-&gt;memory;                           \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     if ( FT_ALLOC( clazz, sizeof ( *clazz ) * 11 ) )                        \</span>
<span class="line-removed">-       return error;                                                         \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     clazz[ 0].serv_id   = serv_id_1;                                        \</span>
<span class="line-removed">-     clazz[ 0].serv_data = serv_data_1;                                      \</span>
<span class="line-removed">-     clazz[ 1].serv_id   = serv_id_2;                                        \</span>
<span class="line-removed">-     clazz[ 1].serv_data = serv_data_2;                                      \</span>
<span class="line-removed">-     clazz[ 2].serv_id   = serv_id_3;                                        \</span>
<span class="line-removed">-     clazz[ 2].serv_data = serv_data_3;                                      \</span>
<span class="line-removed">-     clazz[ 3].serv_id   = serv_id_4;                                        \</span>
<span class="line-removed">-     clazz[ 3].serv_data = serv_data_4;                                      \</span>
<span class="line-removed">-     clazz[ 4].serv_id   = serv_id_5;                                        \</span>
<span class="line-removed">-     clazz[ 4].serv_data = serv_data_5;                                      \</span>
<span class="line-removed">-     clazz[ 5].serv_id   = serv_id_6;                                        \</span>
<span class="line-removed">-     clazz[ 5].serv_data = serv_data_6;                                      \</span>
<span class="line-removed">-     clazz[ 6].serv_id   = serv_id_7;                                        \</span>
<span class="line-removed">-     clazz[ 6].serv_data = serv_data_7;                                      \</span>
<span class="line-removed">-     clazz[ 7].serv_id   = serv_id_8;                                        \</span>
<span class="line-removed">-     clazz[ 7].serv_data = serv_data_8;                                      \</span>
<span class="line-removed">-     clazz[ 8].serv_id   = serv_id_9;                                        \</span>
<span class="line-removed">-     clazz[ 8].serv_data = serv_data_9;                                      \</span>
<span class="line-removed">-     clazz[ 9].serv_id   = serv_id_10;                                       \</span>
<span class="line-removed">-     clazz[ 9].serv_data = serv_data_10;                                     \</span>
<span class="line-removed">-     clazz[10].serv_id   = NULL;                                             \</span>
<span class="line-removed">-     clazz[10].serv_data = NULL;                                             \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     *output_class = clazz;                                                  \</span>
<span class="line-removed">-                                                                             \</span>
<span class="line-removed">-     return FT_Err_Ok;                                                       \</span>
<span class="line-removed">-   }</span>
<span class="line-removed">- </span>
<span class="line-removed">- #endif /* FT_CONFIG_OPTION_PIC */</span>
<span class="line-removed">- </span>
  
    /*
<span class="line-modified">!    *  Parse a list of FT_ServiceDescRec descriptors and look for</span>
<span class="line-modified">!    *  a specific service by ID.  Note that the last element in the</span>
<span class="line-modified">!    *  array must be { NULL, NULL }, and that the function should</span>
<span class="line-modified">!    *  return NULL if the service isn&#39;t available.</span>
     *
<span class="line-modified">!    *  This function can be used by modules to implement their</span>
<span class="line-modified">!    *  `get_service&#39; method.</span>
     */
    FT_BASE( FT_Pointer )
    ft_service_list_lookup( FT_ServiceDesc  service_descriptors,
                            const char*     service_id );
  
<span class="line-new-header">--- 347,19 ---</span>
      { serv_id_9, serv_data_9 },                                             \
      { serv_id_10, serv_data_10 },                                           \
      { NULL, NULL }                                                          \
    };
  
  
    /*
<span class="line-modified">!    * Parse a list of FT_ServiceDescRec descriptors and look for a specific</span>
<span class="line-modified">!    * service by ID.  Note that the last element in the array must be { NULL,</span>
<span class="line-modified">!    * NULL }, and that the function should return NULL if the service isn&#39;t</span>
<span class="line-modified">!    * available.</span>
     *
<span class="line-modified">!    * This function can be used by modules to implement their `get_service&#39;</span>
<span class="line-modified">!    * method.</span>
     */
    FT_BASE( FT_Pointer )
    ft_service_list_lookup( FT_ServiceDesc  service_descriptors,
                            const char*     service_id );
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 867,20 ***</span>
    /*****                                                               *****/
    /*************************************************************************/
    /*************************************************************************/
  
    /*
<span class="line-modified">!    *  This structure is used to store a cache for several frequently used</span>
<span class="line-modified">!    *  services.  It is the type of `face-&gt;internal-&gt;services&#39;.  You</span>
<span class="line-modified">!    *  should only use FT_FACE_LOOKUP_SERVICE to access it.</span>
     *
<span class="line-modified">!    *  All fields should have the type FT_Pointer to relax compilation</span>
<span class="line-modified">!    *  dependencies.  We assume the developer isn&#39;t completely stupid.</span>
     *
<span class="line-modified">!    *  Each field must be named `service_XXXX&#39; where `XXX&#39; corresponds to</span>
<span class="line-modified">!    *  the correct FT_SERVICE_ID_XXXX macro.  See the definition of</span>
<span class="line-modified">!    *  FT_FACE_LOOKUP_SERVICE below how this is implemented.</span>
     *
     */
    typedef struct  FT_ServiceCacheRec_
    {
      FT_Pointer  service_POSTSCRIPT_FONT_NAME;
<span class="line-new-header">--- 371,20 ---</span>
    /*****                                                               *****/
    /*************************************************************************/
    /*************************************************************************/
  
    /*
<span class="line-modified">!    * This structure is used to store a cache for several frequently used</span>
<span class="line-modified">!    * services.  It is the type of `face-&gt;internal-&gt;services&#39;.  You should</span>
<span class="line-modified">!    * only use FT_FACE_LOOKUP_SERVICE to access it.</span>
     *
<span class="line-modified">!    * All fields should have the type FT_Pointer to relax compilation</span>
<span class="line-modified">!    * dependencies.  We assume the developer isn&#39;t completely stupid.</span>
     *
<span class="line-modified">!    * Each field must be named `service_XXXX&#39; where `XXX&#39; corresponds to the</span>
<span class="line-modified">!    * correct FT_SERVICE_ID_XXXX macro.  See the definition of</span>
<span class="line-modified">!    * FT_FACE_LOOKUP_SERVICE below how this is implemented.</span>
     *
     */
    typedef struct  FT_ServiceCacheRec_
    {
      FT_Pointer  service_POSTSCRIPT_FONT_NAME;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 892,38 ***</span>
  
    } FT_ServiceCacheRec, *FT_ServiceCache;
  
  
    /*
<span class="line-modified">!    *  A magic number used within the services cache.</span>
     */
  
    /* ensure that value `1&#39; has the same width as a pointer */
  #define FT_SERVICE_UNAVAILABLE  ((FT_Pointer)~(FT_PtrDist)1)
  
  
<span class="line-modified">!   /*</span>
     * @macro:
     *   FT_FACE_LOOKUP_SERVICE
     *
     * @description:
     *   This macro is used to look up a service from a face&#39;s driver module
     *   using its cache.
     *
     * @input:
<span class="line-modified">!    *   face::</span>
     *     The source face handle containing the cache.
     *
     *   field ::
     *     The field name in the cache.
     *
     *   id ::
     *     The service ID.
     *
     * @output:
     *   ptr ::
<span class="line-modified">!    *     A variable receiving the service data.  NULL if not available.</span>
     */
  #ifdef __cplusplus
  
  #define FT_FACE_LOOKUP_SERVICE( face, ptr, id )                \
    FT_BEGIN_STMNT                                               \
<span class="line-new-header">--- 396,39 ---</span>
  
    } FT_ServiceCacheRec, *FT_ServiceCache;
  
  
    /*
<span class="line-modified">!    * A magic number used within the services cache.</span>
     */
  
    /* ensure that value `1&#39; has the same width as a pointer */
  #define FT_SERVICE_UNAVAILABLE  ((FT_Pointer)~(FT_PtrDist)1)
  
  
<span class="line-modified">!   /**************************************************************************</span>
<span class="line-added">+    *</span>
     * @macro:
     *   FT_FACE_LOOKUP_SERVICE
     *
     * @description:
     *   This macro is used to look up a service from a face&#39;s driver module
     *   using its cache.
     *
     * @input:
<span class="line-modified">!    *   face ::</span>
     *     The source face handle containing the cache.
     *
     *   field ::
     *     The field name in the cache.
     *
     *   id ::
     *     The service ID.
     *
     * @output:
     *   ptr ::
<span class="line-modified">!    *     A variable receiving the service data.  `NULL` if not available.</span>
     */
  #ifdef __cplusplus
  
  #define FT_FACE_LOOKUP_SERVICE( face, ptr, id )                \
    FT_BEGIN_STMNT                                               \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 967,11 ***</span>
    FT_END_STMNT
  
  #endif /* !C++ */
  
    /*
<span class="line-modified">!    *  A macro used to define new service structure types.</span>
     */
  
  #define FT_DEFINE_SERVICE( name )            \
    typedef struct FT_Service_ ## name ## Rec_ \
      FT_Service_ ## name ## Rec ;             \
<span class="line-new-header">--- 472,11 ---</span>
    FT_END_STMNT
  
  #endif /* !C++ */
  
    /*
<span class="line-modified">!    * A macro used to define new service structure types.</span>
     */
  
  #define FT_DEFINE_SERVICE( name )            \
    typedef struct FT_Service_ ## name ## Rec_ \
      FT_Service_ ## name ## Rec ;             \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 980,11 ***</span>
    struct FT_Service_ ## name ## Rec_
  
    /* */
  
    /*
<span class="line-modified">!    *  The header files containing the services.</span>
     */
  
  #define FT_SERVICE_BDF_H                &lt;freetype/internal/services/svbdf.h&gt;
  #define FT_SERVICE_CFF_TABLE_LOAD_H     &lt;freetype/internal/services/svcfftl.h&gt;
  #define FT_SERVICE_CID_H                &lt;freetype/internal/services/svcid.h&gt;
<span class="line-new-header">--- 485,11 ---</span>
    struct FT_Service_ ## name ## Rec_
  
    /* */
  
    /*
<span class="line-modified">!    * The header files containing the services.</span>
     */
  
  #define FT_SERVICE_BDF_H                &lt;freetype/internal/services/svbdf.h&gt;
  #define FT_SERVICE_CFF_TABLE_LOAD_H     &lt;freetype/internal/services/svcfftl.h&gt;
  #define FT_SERVICE_CID_H                &lt;freetype/internal/services/svcid.h&gt;
</pre>
<center><a href="ftrfork.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ftstream.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>