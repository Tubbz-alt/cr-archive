<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/native/libfreetype/include/freetype/ftsystem.h</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftsynth.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="fttrigon.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/include/freetype/ftsystem.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 /***************************************************************************/</span>
<span class="line-modified">  2 /*                                                                         */</span>
<span class="line-modified">  3 /*  ftsystem.h                                                             */</span>
<span class="line-modified">  4 /*                                                                         */</span>
<span class="line-modified">  5 /*    FreeType low-level system interface definition (specification).      */</span>
<span class="line-modified">  6 /*                                                                         */</span>
<span class="line-modified">  7 /*  Copyright 1996-2018 by                                                 */</span>
<span class="line-modified">  8 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="line-modified">  9 /*                                                                         */</span>
<span class="line-modified"> 10 /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="line-modified"> 11 /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="line-modified"> 12 /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="line-modified"> 13 /*  this file you indicate that you have read the license and              */</span>
<span class="line-modified"> 14 /*  understand and accept it fully.                                        */</span>
<span class="line-modified"> 15 /*                                                                         */</span>
<span class="line-modified"> 16 /***************************************************************************/</span>
 17 
 18 
 19 #ifndef FTSYSTEM_H_
 20 #define FTSYSTEM_H_
 21 
 22 
 23 #include &lt;ft2build.h&gt;
 24 
 25 
 26 FT_BEGIN_HEADER
 27 
 28 
<span class="line-modified"> 29   /*************************************************************************/</span>
<span class="line-modified"> 30   /*                                                                       */</span>
<span class="line-modified"> 31   /* &lt;Section&gt;                                                             */</span>
<span class="line-modified"> 32   /*   system_interface                                                    */</span>
<span class="line-modified"> 33   /*                                                                       */</span>
<span class="line-modified"> 34   /* &lt;Title&gt;                                                               */</span>
<span class="line-modified"> 35   /*   System Interface                                                    */</span>
<span class="line-modified"> 36   /*                                                                       */</span>
<span class="line-modified"> 37   /* &lt;Abstract&gt;                                                            */</span>
<span class="line-modified"> 38   /*   How FreeType manages memory and i/o.                                */</span>
<span class="line-modified"> 39   /*                                                                       */</span>
<span class="line-modified"> 40   /* &lt;Description&gt;                                                         */</span>
<span class="line-modified"> 41   /*   This section contains various definitions related to memory         */</span>
<span class="line-modified"> 42   /*   management and i/o access.  You need to understand this             */</span>
<span class="line-modified"> 43   /*   information if you want to use a custom memory manager or you own   */</span>
<span class="line-modified"> 44   /*   i/o streams.                                                        */</span>
<span class="line-modified"> 45   /*                                                                       */</span>
<span class="line-removed"> 46   /*************************************************************************/</span>
 47 
 48 
<span class="line-modified"> 49   /*************************************************************************/</span>
<span class="line-modified"> 50   /*                                                                       */</span>
<span class="line-modified"> 51   /*                  M E M O R Y   M A N A G E M E N T                    */</span>
<span class="line-modified"> 52   /*                                                                       */</span>
<span class="line-modified"> 53   /*************************************************************************/</span>
 54 
 55 
<span class="line-modified"> 56   /*************************************************************************</span>
 57    *
 58    * @type:
 59    *   FT_Memory
 60    *
 61    * @description:
 62    *   A handle to a given memory manager object, defined with an
 63    *   @FT_MemoryRec structure.
 64    *
 65    */
 66   typedef struct FT_MemoryRec_*  FT_Memory;
 67 
 68 
<span class="line-modified"> 69   /*************************************************************************</span>
 70    *
 71    * @functype:
 72    *   FT_Alloc_Func
 73    *
 74    * @description:
<span class="line-modified"> 75    *   A function used to allocate `size&#39; bytes from `memory&#39;.</span>
 76    *
 77    * @input:
 78    *   memory ::
 79    *     A handle to the source memory manager.
 80    *
 81    *   size ::
 82    *     The size in bytes to allocate.
 83    *
 84    * @return:
 85    *   Address of new memory block.  0~in case of failure.
 86    *
 87    */
 88   typedef void*
 89   (*FT_Alloc_Func)( FT_Memory  memory,
 90                     long       size );
 91 
 92 
<span class="line-modified"> 93   /*************************************************************************</span>
 94    *
 95    * @functype:
 96    *   FT_Free_Func
 97    *
 98    * @description:
 99    *   A function used to release a given block of memory.
100    *
101    * @input:
102    *   memory ::
103    *     A handle to the source memory manager.
104    *
105    *   block ::
106    *     The address of the target memory block.
107    *
108    */
109   typedef void
110   (*FT_Free_Func)( FT_Memory  memory,
111                    void*      block );
112 
113 
<span class="line-modified">114   /*************************************************************************</span>
115    *
116    * @functype:
117    *   FT_Realloc_Func
118    *
119    * @description:
120    *   A function used to re-allocate a given block of memory.
121    *
122    * @input:
123    *   memory ::
124    *     A handle to the source memory manager.
125    *
126    *   cur_size ::
127    *     The block&#39;s current size in bytes.
128    *
129    *   new_size ::
130    *     The block&#39;s requested new size.
131    *
132    *   block ::
133    *     The block&#39;s current address.
134    *
135    * @return:
136    *   New block address.  0~in case of memory shortage.
137    *
138    * @note:
139    *   In case of error, the old block must still be available.
140    *
141    */
142   typedef void*
143   (*FT_Realloc_Func)( FT_Memory  memory,
144                       long       cur_size,
145                       long       new_size,
146                       void*      block );
147 
148 
<span class="line-modified">149   /*************************************************************************</span>
150    *
151    * @struct:
152    *   FT_MemoryRec
153    *
154    * @description:
155    *   A structure used to describe a given memory manager to FreeType~2.
156    *
157    * @fields:
158    *   user ::
159    *     A generic typeless pointer for user data.
160    *
161    *   alloc ::
162    *     A pointer type to an allocation function.
163    *
164    *   free ::
165    *     A pointer type to an memory freeing function.
166    *
167    *   realloc ::
168    *     A pointer type to a reallocation function.
169    *
170    */
171   struct  FT_MemoryRec_
172   {
173     void*            user;
174     FT_Alloc_Func    alloc;
175     FT_Free_Func     free;
176     FT_Realloc_Func  realloc;
177   };
178 
179 
<span class="line-modified">180   /*************************************************************************/</span>
<span class="line-modified">181   /*                                                                       */</span>
<span class="line-modified">182   /*                       I / O   M A N A G E M E N T                     */</span>
<span class="line-modified">183   /*                                                                       */</span>
<span class="line-modified">184   /*************************************************************************/</span>
185 
186 
<span class="line-modified">187   /*************************************************************************</span>
188    *
189    * @type:
190    *   FT_Stream
191    *
192    * @description:
193    *   A handle to an input stream.
194    *
195    * @also:
<span class="line-modified">196    *   See @FT_StreamRec for the publicly accessible fields of a given</span>
<span class="line-modified">197    *   stream object.</span>
198    *
199    */
200   typedef struct FT_StreamRec_*  FT_Stream;
201 
202 
<span class="line-modified">203   /*************************************************************************</span>
204    *
205    * @struct:
206    *   FT_StreamDesc
207    *
208    * @description:
209    *   A union type used to store either a long or a pointer.  This is used
<span class="line-modified">210    *   to store a file descriptor or a `FILE*&#39; in an input stream.</span>
211    *
212    */
213   typedef union  FT_StreamDesc_
214   {
215     long   value;
216     void*  pointer;
217 
218   } FT_StreamDesc;
219 
220 
<span class="line-modified">221   /*************************************************************************</span>
222    *
223    * @functype:
224    *   FT_Stream_IoFunc
225    *
226    * @description:
227    *   A function used to seek and read data from a given input stream.
228    *
229    * @input:
230    *   stream ::
231    *     A handle to the source stream.
232    *
233    *   offset ::
234    *     The offset of read in stream (always from start).
235    *
236    *   buffer ::
237    *     The address of the read buffer.
238    *
239    *   count ::
240    *     The number of bytes to read from the stream.
241    *
242    * @return:
243    *   The number of bytes effectively read by the stream.
244    *
245    * @note:
<span class="line-modified">246    *   This function might be called to perform a seek or skip operation</span>
<span class="line-modified">247    *   with a `count&#39; of~0.  A non-zero return value then indicates an</span>
<span class="line-removed">248    *   error.</span>
249    *
250    */
251   typedef unsigned long
252   (*FT_Stream_IoFunc)( FT_Stream       stream,
253                        unsigned long   offset,
254                        unsigned char*  buffer,
255                        unsigned long   count );
256 
257 
<span class="line-modified">258   /*************************************************************************</span>
259    *
260    * @functype:
261    *   FT_Stream_CloseFunc
262    *
263    * @description:
264    *   A function used to close a given input stream.
265    *
266    * @input:
267    *  stream ::
<span class="line-modified">268    *     A handle to the target stream.</span>
269    *
270    */
271   typedef void
272   (*FT_Stream_CloseFunc)( FT_Stream  stream );
273 
274 
<span class="line-modified">275   /*************************************************************************</span>
276    *
277    * @struct:
278    *   FT_StreamRec
279    *
280    * @description:
281    *   A structure used to describe an input stream.
282    *
283    * @input:
284    *   base ::
285    *     For memory-based streams, this is the address of the first stream
<span class="line-modified">286    *     byte in memory.  This field should always be set to NULL for</span>
287    *     disk-based streams.
288    *
289    *   size ::
290    *     The stream size in bytes.
291    *
292    *     In case of compressed streams where the size is unknown before
293    *     actually doing the decompression, the value is set to 0x7FFFFFFF.
294    *     (Note that this size value can occur for normal streams also; it is
295    *     thus just a hint.)
296    *
297    *   pos ::
298    *     The current position within the stream.
299    *
300    *   descriptor ::
301    *     This field is a union that can hold an integer or a pointer.  It is
<span class="line-modified">302    *     used by stream implementations to store file descriptors or `FILE*&#39;</span>
303    *     pointers.
304    *
305    *   pathname ::
306    *     This field is completely ignored by FreeType.  However, it is often
307    *     useful during debugging to use it to store the stream&#39;s filename
308    *     (where available).
309    *
310    *   read ::
311    *     The stream&#39;s input function.
312    *
313    *   close ::
314    *     The stream&#39;s close function.
315    *
316    *   memory ::
<span class="line-modified">317    *     The memory manager to use to preload frames.  This is set</span>
<span class="line-modified">318    *     internally by FreeType and shouldn&#39;t be touched by stream</span>
<span class="line-removed">319    *     implementations.</span>
320    *
321    *   cursor ::
322    *     This field is set and used internally by FreeType when parsing
<span class="line-modified">323    *     frames.</span>

324    *
325    *   limit ::
326    *     This field is set and used internally by FreeType when parsing
327    *     frames.
328    *
329    */
330   typedef struct  FT_StreamRec_
331   {
332     unsigned char*       base;
333     unsigned long        size;
334     unsigned long        pos;
335 
336     FT_StreamDesc        descriptor;
337     FT_StreamDesc        pathname;
338     FT_Stream_IoFunc     read;
339     FT_Stream_CloseFunc  close;
340 
341     FT_Memory            memory;
342     unsigned char*       cursor;
343     unsigned char*       limit;
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 /****************************************************************************</span>
<span class="line-modified">  2  *</span>
<span class="line-modified">  3  * ftsystem.h</span>
<span class="line-modified">  4  *</span>
<span class="line-modified">  5  *   FreeType low-level system interface definition (specification).</span>
<span class="line-modified">  6  *</span>
<span class="line-modified">  7  * Copyright (C) 1996-2019 by</span>
<span class="line-modified">  8  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="line-modified">  9  *</span>
<span class="line-modified"> 10  * This file is part of the FreeType project, and may only be used,</span>
<span class="line-modified"> 11  * modified, and distributed under the terms of the FreeType project</span>
<span class="line-modified"> 12  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="line-modified"> 13  * this file you indicate that you have read the license and</span>
<span class="line-modified"> 14  * understand and accept it fully.</span>
<span class="line-modified"> 15  *</span>
<span class="line-modified"> 16  */</span>
 17 
 18 
 19 #ifndef FTSYSTEM_H_
 20 #define FTSYSTEM_H_
 21 
 22 
 23 #include &lt;ft2build.h&gt;
 24 
 25 
 26 FT_BEGIN_HEADER
 27 
 28 
<span class="line-modified"> 29   /**************************************************************************</span>
<span class="line-modified"> 30    *</span>
<span class="line-modified"> 31    * @section:</span>
<span class="line-modified"> 32    *  system_interface</span>
<span class="line-modified"> 33    *</span>
<span class="line-modified"> 34    * @title:</span>
<span class="line-modified"> 35    *  System Interface</span>
<span class="line-modified"> 36    *</span>
<span class="line-modified"> 37    * @abstract:</span>
<span class="line-modified"> 38    *  How FreeType manages memory and i/o.</span>
<span class="line-modified"> 39    *</span>
<span class="line-modified"> 40    * @description:</span>
<span class="line-modified"> 41    *  This section contains various definitions related to memory management</span>
<span class="line-modified"> 42    *  and i/o access.  You need to understand this information if you want to</span>
<span class="line-modified"> 43    *  use a custom memory manager or you own i/o streams.</span>
<span class="line-modified"> 44    *</span>
<span class="line-modified"> 45    */</span>

 46 
 47 
<span class="line-modified"> 48   /**************************************************************************</span>
<span class="line-modified"> 49    *</span>
<span class="line-modified"> 50    *                 M E M O R Y   M A N A G E M E N T</span>
<span class="line-modified"> 51    *</span>
<span class="line-modified"> 52    */</span>
 53 
 54 
<span class="line-modified"> 55   /**************************************************************************</span>
 56    *
 57    * @type:
 58    *   FT_Memory
 59    *
 60    * @description:
 61    *   A handle to a given memory manager object, defined with an
 62    *   @FT_MemoryRec structure.
 63    *
 64    */
 65   typedef struct FT_MemoryRec_*  FT_Memory;
 66 
 67 
<span class="line-modified"> 68   /**************************************************************************</span>
 69    *
 70    * @functype:
 71    *   FT_Alloc_Func
 72    *
 73    * @description:
<span class="line-modified"> 74    *   A function used to allocate `size` bytes from `memory`.</span>
 75    *
 76    * @input:
 77    *   memory ::
 78    *     A handle to the source memory manager.
 79    *
 80    *   size ::
 81    *     The size in bytes to allocate.
 82    *
 83    * @return:
 84    *   Address of new memory block.  0~in case of failure.
 85    *
 86    */
 87   typedef void*
 88   (*FT_Alloc_Func)( FT_Memory  memory,
 89                     long       size );
 90 
 91 
<span class="line-modified"> 92   /**************************************************************************</span>
 93    *
 94    * @functype:
 95    *   FT_Free_Func
 96    *
 97    * @description:
 98    *   A function used to release a given block of memory.
 99    *
100    * @input:
101    *   memory ::
102    *     A handle to the source memory manager.
103    *
104    *   block ::
105    *     The address of the target memory block.
106    *
107    */
108   typedef void
109   (*FT_Free_Func)( FT_Memory  memory,
110                    void*      block );
111 
112 
<span class="line-modified">113   /**************************************************************************</span>
114    *
115    * @functype:
116    *   FT_Realloc_Func
117    *
118    * @description:
119    *   A function used to re-allocate a given block of memory.
120    *
121    * @input:
122    *   memory ::
123    *     A handle to the source memory manager.
124    *
125    *   cur_size ::
126    *     The block&#39;s current size in bytes.
127    *
128    *   new_size ::
129    *     The block&#39;s requested new size.
130    *
131    *   block ::
132    *     The block&#39;s current address.
133    *
134    * @return:
135    *   New block address.  0~in case of memory shortage.
136    *
137    * @note:
138    *   In case of error, the old block must still be available.
139    *
140    */
141   typedef void*
142   (*FT_Realloc_Func)( FT_Memory  memory,
143                       long       cur_size,
144                       long       new_size,
145                       void*      block );
146 
147 
<span class="line-modified">148   /**************************************************************************</span>
149    *
150    * @struct:
151    *   FT_MemoryRec
152    *
153    * @description:
154    *   A structure used to describe a given memory manager to FreeType~2.
155    *
156    * @fields:
157    *   user ::
158    *     A generic typeless pointer for user data.
159    *
160    *   alloc ::
161    *     A pointer type to an allocation function.
162    *
163    *   free ::
164    *     A pointer type to an memory freeing function.
165    *
166    *   realloc ::
167    *     A pointer type to a reallocation function.
168    *
169    */
170   struct  FT_MemoryRec_
171   {
172     void*            user;
173     FT_Alloc_Func    alloc;
174     FT_Free_Func     free;
175     FT_Realloc_Func  realloc;
176   };
177 
178 
<span class="line-modified">179   /**************************************************************************</span>
<span class="line-modified">180    *</span>
<span class="line-modified">181    *                      I / O   M A N A G E M E N T</span>
<span class="line-modified">182    *</span>
<span class="line-modified">183    */</span>
184 
185 
<span class="line-modified">186   /**************************************************************************</span>
187    *
188    * @type:
189    *   FT_Stream
190    *
191    * @description:
192    *   A handle to an input stream.
193    *
194    * @also:
<span class="line-modified">195    *   See @FT_StreamRec for the publicly accessible fields of a given stream</span>
<span class="line-modified">196    *   object.</span>
197    *
198    */
199   typedef struct FT_StreamRec_*  FT_Stream;
200 
201 
<span class="line-modified">202   /**************************************************************************</span>
203    *
204    * @struct:
205    *   FT_StreamDesc
206    *
207    * @description:
208    *   A union type used to store either a long or a pointer.  This is used
<span class="line-modified">209    *   to store a file descriptor or a `FILE*` in an input stream.</span>
210    *
211    */
212   typedef union  FT_StreamDesc_
213   {
214     long   value;
215     void*  pointer;
216 
217   } FT_StreamDesc;
218 
219 
<span class="line-modified">220   /**************************************************************************</span>
221    *
222    * @functype:
223    *   FT_Stream_IoFunc
224    *
225    * @description:
226    *   A function used to seek and read data from a given input stream.
227    *
228    * @input:
229    *   stream ::
230    *     A handle to the source stream.
231    *
232    *   offset ::
233    *     The offset of read in stream (always from start).
234    *
235    *   buffer ::
236    *     The address of the read buffer.
237    *
238    *   count ::
239    *     The number of bytes to read from the stream.
240    *
241    * @return:
242    *   The number of bytes effectively read by the stream.
243    *
244    * @note:
<span class="line-modified">245    *   This function might be called to perform a seek or skip operation with</span>
<span class="line-modified">246    *   a `count` of~0.  A non-zero return value then indicates an error.</span>

247    *
248    */
249   typedef unsigned long
250   (*FT_Stream_IoFunc)( FT_Stream       stream,
251                        unsigned long   offset,
252                        unsigned char*  buffer,
253                        unsigned long   count );
254 
255 
<span class="line-modified">256   /**************************************************************************</span>
257    *
258    * @functype:
259    *   FT_Stream_CloseFunc
260    *
261    * @description:
262    *   A function used to close a given input stream.
263    *
264    * @input:
265    *  stream ::
<span class="line-modified">266    *    A handle to the target stream.</span>
267    *
268    */
269   typedef void
270   (*FT_Stream_CloseFunc)( FT_Stream  stream );
271 
272 
<span class="line-modified">273   /**************************************************************************</span>
274    *
275    * @struct:
276    *   FT_StreamRec
277    *
278    * @description:
279    *   A structure used to describe an input stream.
280    *
281    * @input:
282    *   base ::
283    *     For memory-based streams, this is the address of the first stream
<span class="line-modified">284    *     byte in memory.  This field should always be set to `NULL` for</span>
285    *     disk-based streams.
286    *
287    *   size ::
288    *     The stream size in bytes.
289    *
290    *     In case of compressed streams where the size is unknown before
291    *     actually doing the decompression, the value is set to 0x7FFFFFFF.
292    *     (Note that this size value can occur for normal streams also; it is
293    *     thus just a hint.)
294    *
295    *   pos ::
296    *     The current position within the stream.
297    *
298    *   descriptor ::
299    *     This field is a union that can hold an integer or a pointer.  It is
<span class="line-modified">300    *     used by stream implementations to store file descriptors or `FILE*`</span>
301    *     pointers.
302    *
303    *   pathname ::
304    *     This field is completely ignored by FreeType.  However, it is often
305    *     useful during debugging to use it to store the stream&#39;s filename
306    *     (where available).
307    *
308    *   read ::
309    *     The stream&#39;s input function.
310    *
311    *   close ::
312    *     The stream&#39;s close function.
313    *
314    *   memory ::
<span class="line-modified">315    *     The memory manager to use to preload frames.  This is set internally</span>
<span class="line-modified">316    *     by FreeType and shouldn&#39;t be touched by stream implementations.</span>

317    *
318    *   cursor ::
319    *     This field is set and used internally by FreeType when parsing
<span class="line-modified">320    *     frames.  In particular, the `FT_GET_XXX` macros use this instead of</span>
<span class="line-added">321    *     the `pos` field.</span>
322    *
323    *   limit ::
324    *     This field is set and used internally by FreeType when parsing
325    *     frames.
326    *
327    */
328   typedef struct  FT_StreamRec_
329   {
330     unsigned char*       base;
331     unsigned long        size;
332     unsigned long        pos;
333 
334     FT_StreamDesc        descriptor;
335     FT_StreamDesc        pathname;
336     FT_Stream_IoFunc     read;
337     FT_Stream_CloseFunc  close;
338 
339     FT_Memory            memory;
340     unsigned char*       cursor;
341     unsigned char*       limit;
</pre>
</td>
</tr>
</table>
<center><a href="ftsynth.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="fttrigon.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>