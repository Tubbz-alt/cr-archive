<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/native/libfreetype/src/base/ftdebug.c</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="ftdbgmem.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftfntfmt.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/native/libfreetype/src/base/ftdebug.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,46 +1,46 @@</span>
<span class="udiff-line-modified-removed">- /***************************************************************************/</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*  ftdebug.c                                                              */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*    Debugging and logging component (body).                              */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*  Copyright 1996-2018 by                                                 */</span>
<span class="udiff-line-modified-removed">- /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /*  This file is part of the FreeType project, and may only be used,       */</span>
<span class="udiff-line-modified-removed">- /*  modified, and distributed under the terms of the FreeType project      */</span>
<span class="udiff-line-modified-removed">- /*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<span class="udiff-line-modified-removed">- /*  this file you indicate that you have read the license and              */</span>
<span class="udiff-line-modified-removed">- /*  understand and accept it fully.                                        */</span>
<span class="udiff-line-modified-removed">- /*                                                                         */</span>
<span class="udiff-line-modified-removed">- /***************************************************************************/</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-   /*************************************************************************/</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* This component contains various macros and functions used to ease the */</span>
<span class="udiff-line-modified-removed">-   /* debugging of the FreeType engine.  Its main purpose is in assertion   */</span>
<span class="udiff-line-modified-removed">-   /* checking, tracing, and error detection.                               */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* There are now three debugging modes:                                  */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* - trace mode                                                          */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /*   Error and trace messages are sent to the log file (which can be the */</span>
<span class="udiff-line-modified-removed">-   /*   standard error output).                                             */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* - error mode                                                          */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /*   Only error messages are generated.                                  */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* - release mode:                                                       */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /*   No error message is sent or generated.  The code is free from any   */</span>
<span class="udiff-line-modified-removed">-   /*   debugging parts.                                                    */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /*************************************************************************/</span>
<span class="udiff-line-modified-added">+ /****************************************************************************</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  * ftdebug.c</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  *   Debugging and logging component (body).</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  * Copyright (C) 1996-2019 by</span>
<span class="udiff-line-modified-added">+  * David Turner, Robert Wilhelm, and Werner Lemberg.</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  * This file is part of the FreeType project, and may only be used,</span>
<span class="udiff-line-modified-added">+  * modified, and distributed under the terms of the FreeType project</span>
<span class="udiff-line-modified-added">+  * license, LICENSE.TXT.  By continuing to use, modify, or distribute</span>
<span class="udiff-line-modified-added">+  * this file you indicate that you have read the license and</span>
<span class="udiff-line-modified-added">+  * understand and accept it fully.</span>
<span class="udiff-line-modified-added">+  *</span>
<span class="udiff-line-modified-added">+  */</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   /**************************************************************************</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    * This component contains various macros and functions used to ease the</span>
<span class="udiff-line-modified-added">+    * debugging of the FreeType engine.  Its main purpose is in assertion</span>
<span class="udiff-line-modified-added">+    * checking, tracing, and error detection.</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    * There are now three debugging modes:</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    * - trace mode</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    *   Error and trace messages are sent to the log file (which can be the</span>
<span class="udiff-line-modified-added">+    *   standard error output).</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    * - error mode</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    *   Only error messages are generated.</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    * - release mode:</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    *   No error message is sent or generated.  The code is free from any</span>
<span class="udiff-line-modified-added">+    *   debugging parts.</span>
<span class="udiff-line-modified-added">+    *</span>
<span class="udiff-line-modified-added">+    */</span>
  
  
  #include &lt;ft2build.h&gt;
  #include FT_FREETYPE_H
  #include FT_INTERNAL_DEBUG_H
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -85,26 +85,43 @@</span>
    FT_BASE_DEF( int )
    FT_Throw( FT_Error     error,
              int          line,
              const char*  file )
    {
<span class="udiff-line-added">+ #if 0</span>
<span class="udiff-line-added">+     /* activating the code in this block makes FreeType very chatty */</span>
<span class="udiff-line-added">+     fprintf( stderr,</span>
<span class="udiff-line-added">+              &quot;%s:%d: error 0x%02x: %s\n&quot;,</span>
<span class="udiff-line-added">+              file,</span>
<span class="udiff-line-added">+              line,</span>
<span class="udiff-line-added">+              error,</span>
<span class="udiff-line-added">+              FT_Error_String( error ) );</span>
<span class="udiff-line-added">+ #else</span>
      FT_UNUSED( error );
      FT_UNUSED( line );
      FT_UNUSED( file );
<span class="udiff-line-added">+ #endif</span>
  
      return 0;
    }
  
  #endif /* FT_DEBUG_LEVEL_ERROR */
  
  
  
  #ifdef FT_DEBUG_LEVEL_TRACE
  
<span class="udiff-line-modified-removed">-   /* array of trace levels, initialized to 0 */</span>
<span class="udiff-line-modified-removed">-   int  ft_trace_levels[trace_count];</span>
<span class="udiff-line-modified-added">+   /* array of trace levels, initialized to 0; */</span>
<span class="udiff-line-modified-added">+   /* this gets adjusted at run-time           */</span>
<span class="udiff-line-added">+   static int  ft_trace_levels_enabled[trace_count];</span>
  
<span class="udiff-line-added">+   /* array of trace levels, always initialized to 0 */</span>
<span class="udiff-line-added">+   static int  ft_trace_levels_disabled[trace_count];</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   /* a pointer to either `ft_trace_levels_enabled&#39; */</span>
<span class="udiff-line-added">+   /* or `ft_trace_levels_disabled&#39;                 */</span>
<span class="udiff-line-added">+   int*  ft_trace_levels;</span>
  
    /* define array of trace toggle names */
  #define FT_TRACE_DEF( x )  #x ,
  
    static const char*  ft_trace_toggles[trace_count + 1] =
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -138,28 +155,46 @@</span>
      else
        return NULL;
    }
  
  
<span class="udiff-line-modified-removed">-   /*************************************************************************/</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* Initialize the tracing sub-system.  This is done by retrieving the    */</span>
<span class="udiff-line-modified-removed">-   /* value of the `FT2_DEBUG&#39; environment variable.  It must be a list of  */</span>
<span class="udiff-line-modified-removed">-   /* toggles, separated by spaces, `;&#39;, or `,&#39;.  Example:                  */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /*    export FT2_DEBUG=&quot;any:3 memory:7 stream:5&quot;                         */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* This requests that all levels be set to 3, except the trace level for */</span>
<span class="udiff-line-modified-removed">-   /* the memory and stream components which are set to 7 and 5,            */</span>
<span class="udiff-line-modified-removed">-   /* respectively.                                                         */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* See the file `include/freetype/internal/fttrace.h&#39; for details of     */</span>
<span class="udiff-line-modified-removed">-   /* the available toggle names.                                           */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-removed">-   /* The level must be between 0 and 7; 0 means quiet (except for serious  */</span>
<span class="udiff-line-modified-removed">-   /* runtime errors), and 7 means _very_ verbose.                          */</span>
<span class="udiff-line-modified-removed">-   /*                                                                       */</span>
<span class="udiff-line-modified-added">+   /* documentation is in ftdebug.h */</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   FT_BASE_DEF( void )</span>
<span class="udiff-line-modified-added">+   FT_Trace_Disable( void )</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     ft_trace_levels = ft_trace_levels_disabled;</span>
<span class="udiff-line-modified-added">+   }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   /* documentation is in ftdebug.h */</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   FT_BASE_DEF( void )</span>
<span class="udiff-line-modified-added">+   FT_Trace_Enable( void )</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     ft_trace_levels = ft_trace_levels_enabled;</span>
<span class="udiff-line-modified-added">+   }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+   /**************************************************************************</span>
<span class="udiff-line-added">+    *</span>
<span class="udiff-line-added">+    * Initialize the tracing sub-system.  This is done by retrieving the</span>
<span class="udiff-line-added">+    * value of the `FT2_DEBUG&#39; environment variable.  It must be a list of</span>
<span class="udiff-line-added">+    * toggles, separated by spaces, `;&#39;, or `,&#39;.  Example:</span>
<span class="udiff-line-added">+    *</span>
<span class="udiff-line-added">+    *   export FT2_DEBUG=&quot;any:3 memory:7 stream:5&quot;</span>
<span class="udiff-line-added">+    *</span>
<span class="udiff-line-added">+    * This requests that all levels be set to 3, except the trace level for</span>
<span class="udiff-line-added">+    * the memory and stream components which are set to 7 and 5,</span>
<span class="udiff-line-added">+    * respectively.</span>
<span class="udiff-line-added">+    *</span>
<span class="udiff-line-added">+    * See the file `include/freetype/internal/fttrace.h&#39; for details of</span>
<span class="udiff-line-added">+    * the available toggle names.</span>
<span class="udiff-line-added">+    *</span>
<span class="udiff-line-added">+    * The level must be between 0 and 7; 0 means quiet (except for serious</span>
<span class="udiff-line-added">+    * runtime errors), and 7 means _very_ verbose.</span>
<span class="udiff-line-added">+    */</span>
    FT_BASE_DEF( void )
    ft_debug_init( void )
    {
      const char*  ft2_debug = ft_getenv( &quot;FT2_DEBUG&quot; );
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -221,18 +256,20 @@</span>
            {
              if ( found == trace_any )
              {
                /* special case for `any&#39; */
                for ( n = 0; n &lt; trace_count; n++ )
<span class="udiff-line-modified-removed">-                 ft_trace_levels[n] = level;</span>
<span class="udiff-line-modified-added">+                 ft_trace_levels_enabled[n] = level;</span>
              }
              else
<span class="udiff-line-modified-removed">-               ft_trace_levels[found] = level;</span>
<span class="udiff-line-modified-added">+               ft_trace_levels_enabled[found] = level;</span>
            }
          }
        }
      }
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     ft_trace_levels = ft_trace_levels_enabled;</span>
    }
  
  
  #else  /* !FT_DEBUG_LEVEL_TRACE */
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -258,9 +295,25 @@</span>
  
      return NULL;
    }
  
  
<span class="udiff-line-added">+   FT_BASE_DEF( void )</span>
<span class="udiff-line-added">+   FT_Trace_Disable( void )</span>
<span class="udiff-line-added">+   {</span>
<span class="udiff-line-added">+     /* nothing */</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   /* documentation is in ftdebug.h */</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   FT_BASE_DEF( void )</span>
<span class="udiff-line-added">+   FT_Trace_Enable( void )</span>
<span class="udiff-line-added">+   {</span>
<span class="udiff-line-added">+     /* nothing */</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
  #endif /* !FT_DEBUG_LEVEL_TRACE */
  
  
  /* END */
</pre>
<center><a href="ftdbgmem.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ftfntfmt.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>