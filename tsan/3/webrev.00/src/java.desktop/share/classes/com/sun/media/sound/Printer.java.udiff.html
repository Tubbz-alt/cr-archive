<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/classes/com/sun/media/sound/Printer.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="PortMixerProvider.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RealTimeSequencer.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/com/sun/media/sound/Printer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1998, 2013, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -23,92 +23,59 @@</span>
   * questions.
   */
  
  package com.sun.media.sound;
  
<span class="udiff-line-added">+ import java.security.AccessController;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ import sun.security.action.GetPropertyAction;</span>
<span class="udiff-line-added">+ </span>
  /**
   * Printer allows you to set up global debugging status and print
   * messages accordingly.
   *
   * @author David Rivas
   * @author Kara Kytle
   */
  final class Printer {
  
<span class="udiff-line-modified-removed">-     static final boolean err = false;</span>
<span class="udiff-line-removed">-     static final boolean debug = false;</span>
<span class="udiff-line-removed">-     static final boolean trace = false;</span>
<span class="udiff-line-removed">-     static final boolean verbose = false;</span>
<span class="udiff-line-removed">-     static final boolean release = false;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     static final boolean SHOW_THREADID = false;</span>
<span class="udiff-line-removed">-     static final boolean SHOW_TIMESTAMP = false;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     /*static void setErrorPrint(boolean on) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       err = on;</span>
<span class="udiff-line-removed">-       }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       static void setDebugPrint(boolean on) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       debug = on;</span>
<span class="udiff-line-removed">-       }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       static void setTracePrint(boolean on) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       trace = on;</span>
<span class="udiff-line-removed">-       }</span>
<span class="udiff-line-modified-added">+     static final boolean err = isBuildInternal();</span>
  
<span class="udiff-line-modified-removed">-       static void setVerbosePrint(boolean on) {</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-removed">-       verbose = on;</span>
<span class="udiff-line-removed">-       }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       static void setReleasePrint(boolean on) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       release = on;</span>
<span class="udiff-line-removed">-       }*/</span>
<span class="udiff-line-modified-added">+     private static final boolean SHOW_THREADID = true;</span>
<span class="udiff-line-modified-added">+     private static final boolean SHOW_TIMESTAMP = true;</span>
  
      /**
       * Suppresses default constructor, ensuring non-instantiability.
       */
      private Printer() {
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * This method is used in the special cases which &quot;should never happen...&quot;.</span>
<span class="udiff-line-added">+      * And in fact if should be implemented as an assertion, but for</span>
<span class="udiff-line-added">+      * compatibility reason it just print an error only in case of &quot;internal&quot;</span>
<span class="udiff-line-added">+      * build. In time its usage should be replaced by some kind of assertion or</span>
<span class="udiff-line-added">+      * dropped completly.</span>
<span class="udiff-line-added">+      */</span>
      public static void err(String str) {
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-removed">-         if (err)</span>
<span class="udiff-line-removed">-             println(str);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     public static void debug(String str) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (debug)</span>
<span class="udiff-line-removed">-             println(str);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     public static void trace(String str) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (trace)</span>
<span class="udiff-line-removed">-             println(str);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     public static void verbose(String str) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (verbose)</span>
<span class="udiff-line-modified-added">+         if (err) {</span>
              println(str);
<span class="udiff-line-added">+         }</span>
      }
  
<span class="udiff-line-modified-removed">-     public static void release(String str) {</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         if (release)</span>
<span class="udiff-line-modified-removed">-             println(str);</span>
<span class="udiff-line-modified-added">+     /**</span>
<span class="udiff-line-modified-added">+      * Returns {@code true} if the build of the current jdk is &quot;internal&quot;.</span>
<span class="udiff-line-modified-added">+      */</span>
<span class="udiff-line-modified-added">+     private static boolean isBuildInternal() {</span>
<span class="udiff-line-added">+         String javaVersion = AccessController.doPrivileged(</span>
<span class="udiff-line-added">+                 new GetPropertyAction(&quot;java.version&quot;));</span>
<span class="udiff-line-added">+         return javaVersion != null &amp;&amp; javaVersion.contains(&quot;internal&quot;);</span>
      }
  
      private static long startTime = 0;
  
<span class="udiff-line-modified-removed">-     public static void println(String s) {</span>
<span class="udiff-line-modified-added">+     private static void println(String s) {</span>
          String prepend = &quot;&quot;;
          if (SHOW_THREADID) {
              prepend = &quot;thread &quot;  + Thread.currentThread().getId() + &quot; &quot; + prepend;
          }
          if (SHOW_TIMESTAMP) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -117,11 +84,6 @@</span>
              }
              prepend = prepend + ((System.nanoTime()/1000000l) - startTime) + &quot;millis: &quot;;
          }
          System.out.println(prepend + s);
      }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     public static void println() {</span>
<span class="udiff-line-removed">-         System.out.println();</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
  }
</pre>
<center><a href="PortMixerProvider.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="RealTimeSequencer.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>