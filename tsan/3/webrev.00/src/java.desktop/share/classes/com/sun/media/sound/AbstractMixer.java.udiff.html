<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.desktop/share/classes/com/sun/media/sound/AbstractMixer.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AbstractMidiDeviceProvider.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AuFileFormat.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/com/sun/media/sound/AbstractMixer.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1999, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1999, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -280,21 +280,18 @@</span>
  
      /**
       * This implementation tries to open the mixer with its current format and buffer size settings.
       */
      final synchronized void open(boolean manual) throws LineUnavailableException {
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&gt;&gt; AbstractMixer: open()&quot;);</span>
          if (!isOpen()) {
              implOpen();
              // if the mixer is not currently open, set open to true and send event
              setOpen(true);
              if (manual) {
                  manuallyOpened = true;
              }
          }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: open() succeeded&quot;);</span>
      }
  
      // METHOD FOR INTERNAL IMPLEMENTATION USE
  
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -303,16 +300,12 @@</span>
       * mixer, and adds the line to the appropriate vector.
       * The mixer may be opened at a format different than the line&#39;s
       * format if it is a DataLine.
       */
      final synchronized void open(Line line) throws LineUnavailableException {
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&gt;&gt; AbstractMixer: open(line = &quot; + line + &quot;)&quot;);</span>
<span class="udiff-line-removed">- </span>
          // $$kk: 06.11.99: ignore ourselves for now
          if (this.equals(line)) {
<span class="udiff-line-removed">-             if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: open(&quot; + line + &quot;) nothing done&quot;);</span>
              return;
          }
  
          // source line?
          if (isSourceLine(line.getLineInfo())) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -337,50 +330,36 @@</span>
                  }
              } else {
                  if (Printer.err) Printer.err(&quot;Unknown line received for AbstractMixer.open(Line): &quot; + line);
              }
          }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: open(&quot; + line + &quot;) completed&quot;);</span>
      }
  
      /**
       * Removes this line from the list of open source lines and
       * open target lines, if it exists in either.
       * If the list is now empty, closes the mixer.
       */
      final synchronized void close(Line line) {
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&gt;&gt; AbstractMixer: close(&quot; + line + &quot;)&quot;);</span>
<span class="udiff-line-removed">- </span>
          // $$kk: 06.11.99: ignore ourselves for now
          if (this.equals(line)) {
<span class="udiff-line-removed">-             if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: close(&quot; + line + &quot;) nothing done&quot;);</span>
              return;
          }
  
          sourceLines.removeElement(line);
          targetLines.removeElement(line);
  
<span class="udiff-line-removed">-         if (Printer.debug) Printer.debug(&quot;AbstractMixer: close(line): sourceLines.size() now: &quot; + sourceLines.size());</span>
<span class="udiff-line-removed">-         if (Printer.debug) Printer.debug(&quot;AbstractMixer: close(line): targetLines.size() now: &quot; + targetLines.size());</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- </span>
          if (sourceLines.isEmpty() &amp;&amp; targetLines.isEmpty() &amp;&amp; !manuallyOpened) {
<span class="udiff-line-removed">-             if (Printer.trace) Printer.trace(&quot;AbstractMixer: close(&quot; + line + &quot;): need to close the mixer&quot;);</span>
              close();
          }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: close(&quot; + line + &quot;) succeeded&quot;);</span>
      }
  
      /**
       * Close all lines and then close this mixer.
       */
      @Override
      public final synchronized void close() {
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&gt;&gt; AbstractMixer: close()&quot;);</span>
          if (isOpen()) {
              // close all source lines
              Line[] localLines = getSourceLines();
              for (int i = 0; i&lt;localLines.length; i++) {
                  localLines[i].close();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -396,46 +375,34 @@</span>
  
              // set the open state to false and send events
              setOpen(false);
          }
          manuallyOpened = false;
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: close() succeeded&quot;);</span>
      }
  
      /**
       * Starts the mixer.
       */
      final synchronized void start(Line line) {
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&gt;&gt; AbstractMixer: start(&quot; + line + &quot;)&quot;);</span>
<span class="udiff-line-removed">- </span>
          // $$kk: 06.11.99: ignore ourselves for now
          if (this.equals(line)) {
<span class="udiff-line-removed">-             if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: start(&quot; + line + &quot;) nothing done&quot;);</span>
              return;
          }
  
          // we just start the mixer regardless of anything else here.
          if (!started) {
<span class="udiff-line-removed">-             if (Printer.debug) Printer.debug(&quot;AbstractMixer: start(line): starting the mixer&quot;);</span>
              implStart();
              started = true;
          }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: start(&quot; + line + &quot;) succeeded&quot;);</span>
      }
  
      /**
       * Stops the mixer if this was the last running line.
       */
      final synchronized void stop(Line line) {
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&gt;&gt; AbstractMixer: stop(&quot; + line + &quot;)&quot;);</span>
<span class="udiff-line-removed">- </span>
          // $$kk: 06.11.99: ignore ourselves for now
          if (this.equals(line)) {
<span class="udiff-line-removed">-             if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: stop(&quot; + line + &quot;) nothing done&quot;);</span>
              return;
          }
  
          @SuppressWarnings(&quot;unchecked&quot;)
          Vector&lt;Line&gt; localSourceLines = (Vector&lt;Line&gt;)sourceLines.clone();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -445,11 +412,10 @@</span>
  
              // this covers clips and source data lines
              if (localSourceLines.elementAt(i) instanceof AbstractDataLine) {
                  AbstractDataLine sourceLine = (AbstractDataLine)localSourceLines.elementAt(i);
                  if ( sourceLine.isStartedRunning() &amp;&amp; (!sourceLine.equals(line)) ) {
<span class="udiff-line-removed">-                     if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: stop(&quot; + line + &quot;) found running sourceLine: &quot; + sourceLine);</span>
                      return;
                  }
              }
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -460,22 +426,18 @@</span>
              // if any other open line is running, return
              // this covers target data lines
              if (localTargetLines.elementAt(i) instanceof AbstractDataLine) {
                  AbstractDataLine targetLine = (AbstractDataLine)localTargetLines.elementAt(i);
                  if ( targetLine.isStartedRunning() &amp;&amp; (!targetLine.equals(line)) ) {
<span class="udiff-line-removed">-                     if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: stop(&quot; + line + &quot;) found running targetLine: &quot; + targetLine);</span>
                      return;
                  }
              }
          }
  
          // otherwise, stop
<span class="udiff-line-removed">-         if (Printer.debug) Printer.debug(&quot;AbstractMixer: stop(line): stopping the mixer&quot;);</span>
          started = false;
          implStop();
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         if (Printer.trace) Printer.trace(&quot;&lt;&lt; AbstractMixer: stop(&quot; + line + &quot;) succeeded&quot;);</span>
      }
  
      /**
       * Determines whether this is a source line for this mixer.
       * Right now this just checks whether it&#39;s supported, but should
</pre>
<center><a href="AbstractMidiDeviceProvider.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="AuFileFormat.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>