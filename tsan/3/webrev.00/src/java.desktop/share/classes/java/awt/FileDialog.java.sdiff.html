<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/java/awt/FileDialog.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="Event.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FlowLayout.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/java/awt/FileDialog.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1995, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
108      * Represents whether the file dialog allows the multiple file selection.
109      *
110      * @serial
111      * @see #setMultipleMode
112      * @see #isMultipleMode
113      * @since 1.7
114      */
115     private boolean multipleMode = false;
116 
117     /*
118      * The filter used as the file dialog&#39;s filename filter.
119      * The file dialog will only be displaying files whose
120      * names are accepted by this filter.
121      * This variable may be {@code null}.
122      *
123      * @serial
124      * @see #getFilenameFilter()
125      * @see #setFilenameFilter()
126      * @see FileNameFilter
127      */

128     FilenameFilter filter;
129 
130     private static final String base = &quot;filedlg&quot;;
131     private static int nameCounter = 0;
132 
133     /*
134      * JDK 1.1 serialVersionUID
135      */
136      private static final long serialVersionUID = 5035145889651310422L;
137 
138 
139     static {
140         /* ensure that the necessary native libraries are loaded */
141         Toolkit.loadLibraries();
142         if (!GraphicsEnvironment.isHeadless()) {
143             initIDs();
144         }
145     }
146 
147     static {
</pre>
<hr />
<pre>
427      */
428     public String getDirectory() {
429         return dir;
430     }
431 
432     /**
433      * Sets the directory of this file dialog window to be the
434      * specified directory. Specifying a {@code null} or an
435      * invalid directory implies an implementation-defined default.
436      * This default will not be realized, however, until the user
437      * has selected a file. Until this point, {@code getDirectory()}
438      * will return the value passed into this method.
439      * &lt;p&gt;
440      * Specifying &quot;&quot; as the directory is exactly equivalent to
441      * specifying {@code null} as the directory.
442      *
443      * @param     dir   the specified directory
444      * @see       java.awt.FileDialog#getDirectory
445      */
446     public void setDirectory(String dir) {
<span class="line-modified">447         this.dir = (dir != null &amp;&amp; dir.equals(&quot;&quot;)) ? null : dir;</span>
448         FileDialogPeer peer = (FileDialogPeer)this.peer;
449         if (peer != null) {
450             peer.setDirectory(this.dir);
451         }
452     }
453 
454     /**
455      * Gets the selected file of this file dialog.  If the user
456      * selected {@code CANCEL}, the returned file is {@code null}.
457      *
458      * @return    the currently selected file of this file dialog window,
459      *                or {@code null} if none is selected
460      * @see       java.awt.FileDialog#setFile
461      */
462     public String getFile() {
463         return file;
464     }
465 
466     /**
467      * Returns files that the user selects.
</pre>
<hr />
<pre>
507      * Sets the selected file for this file dialog window to be the
508      * specified file. This file becomes the default file if it is set
509      * before the file dialog window is first shown.
510      * &lt;p&gt;
511      * When the dialog is shown, the specified file is selected. The kind of
512      * selection depends on the file existence, the dialog type, and the native
513      * platform. E.g., the file could be highlighted in the file list, or a
514      * file name editbox could be populated with the file name.
515      * &lt;p&gt;
516      * This method accepts either a full file path, or a file name with an
517      * extension if used together with the {@code setDirectory} method.
518      * &lt;p&gt;
519      * Specifying &quot;&quot; as the file is exactly equivalent to specifying
520      * {@code null} as the file.
521      *
522      * @param    file   the file being set
523      * @see      #getFile
524      * @see      #getFiles
525      */
526     public void setFile(String file) {
<span class="line-modified">527         this.file = (file != null &amp;&amp; file.equals(&quot;&quot;)) ? null : file;</span>
528         FileDialogPeer peer = (FileDialogPeer)this.peer;
529         if (peer != null) {
530             peer.setFile(this.file);
531         }
532     }
533 
534     /**
535      * Enables or disables multiple file selection for the file dialog.
536      *
537      * @param enable    if {@code true}, multiple file selection is enabled;
538      *                  {@code false} - disabled.
539      * @see #isMultipleMode
540      * @since 1.7
541      */
542     public void setMultipleMode(boolean enable) {
543         synchronized (getObjectLock()) {
544             this.multipleMode = enable;
545         }
546     }
547 
</pre>
<hr />
<pre>
588         FileDialogPeer peer = (FileDialogPeer)this.peer;
589         if (peer != null) {
590             peer.setFilenameFilter(filter);
591         }
592     }
593 
594     /**
595      * Reads the {@code ObjectInputStream} and performs
596      * a backwards compatibility check by converting
597      * either a {@code dir} or a {@code file}
598      * equal to an empty string to {@code null}.
599      *
600      * @param s the {@code ObjectInputStream} to read
601      */
602     private void readObject(ObjectInputStream s)
603         throws ClassNotFoundException, IOException
604     {
605         s.defaultReadObject();
606 
607         // 1.1 Compatibility: &quot;&quot; is not converted to null in 1.1
<span class="line-modified">608         if (dir != null &amp;&amp; dir.equals(&quot;&quot;)) {</span>
609             dir = null;
610         }
<span class="line-modified">611         if (file != null &amp;&amp; file.equals(&quot;&quot;)) {</span>
612             file = null;
613         }
614     }
615 
616     /**
617      * Returns a string representing the state of this {@code FileDialog}
618      * window. This method is intended to be used only for debugging purposes,
619      * and the content and format of the returned string may vary between
620      * implementations. The returned string may be empty but may not be
621      * {@code null}.
622      *
623      * @return  the parameter string of this file dialog window
624      */
625     protected String paramString() {
626         String str = super.paramString();
627         str += &quot;,dir= &quot; + dir;
628         str += &quot;,file= &quot; + file;
629         return str + ((mode == LOAD) ? &quot;,load&quot; : &quot;,save&quot;);
630     }
631 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1995, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
108      * Represents whether the file dialog allows the multiple file selection.
109      *
110      * @serial
111      * @see #setMultipleMode
112      * @see #isMultipleMode
113      * @since 1.7
114      */
115     private boolean multipleMode = false;
116 
117     /*
118      * The filter used as the file dialog&#39;s filename filter.
119      * The file dialog will only be displaying files whose
120      * names are accepted by this filter.
121      * This variable may be {@code null}.
122      *
123      * @serial
124      * @see #getFilenameFilter()
125      * @see #setFilenameFilter()
126      * @see FileNameFilter
127      */
<span class="line-added">128     @SuppressWarnings(&quot;serial&quot;) // Not statically typed as Serializable</span>
129     FilenameFilter filter;
130 
131     private static final String base = &quot;filedlg&quot;;
132     private static int nameCounter = 0;
133 
134     /*
135      * JDK 1.1 serialVersionUID
136      */
137      private static final long serialVersionUID = 5035145889651310422L;
138 
139 
140     static {
141         /* ensure that the necessary native libraries are loaded */
142         Toolkit.loadLibraries();
143         if (!GraphicsEnvironment.isHeadless()) {
144             initIDs();
145         }
146     }
147 
148     static {
</pre>
<hr />
<pre>
428      */
429     public String getDirectory() {
430         return dir;
431     }
432 
433     /**
434      * Sets the directory of this file dialog window to be the
435      * specified directory. Specifying a {@code null} or an
436      * invalid directory implies an implementation-defined default.
437      * This default will not be realized, however, until the user
438      * has selected a file. Until this point, {@code getDirectory()}
439      * will return the value passed into this method.
440      * &lt;p&gt;
441      * Specifying &quot;&quot; as the directory is exactly equivalent to
442      * specifying {@code null} as the directory.
443      *
444      * @param     dir   the specified directory
445      * @see       java.awt.FileDialog#getDirectory
446      */
447     public void setDirectory(String dir) {
<span class="line-modified">448         this.dir = (dir != null &amp;&amp; dir.isEmpty()) ? null : dir;</span>
449         FileDialogPeer peer = (FileDialogPeer)this.peer;
450         if (peer != null) {
451             peer.setDirectory(this.dir);
452         }
453     }
454 
455     /**
456      * Gets the selected file of this file dialog.  If the user
457      * selected {@code CANCEL}, the returned file is {@code null}.
458      *
459      * @return    the currently selected file of this file dialog window,
460      *                or {@code null} if none is selected
461      * @see       java.awt.FileDialog#setFile
462      */
463     public String getFile() {
464         return file;
465     }
466 
467     /**
468      * Returns files that the user selects.
</pre>
<hr />
<pre>
508      * Sets the selected file for this file dialog window to be the
509      * specified file. This file becomes the default file if it is set
510      * before the file dialog window is first shown.
511      * &lt;p&gt;
512      * When the dialog is shown, the specified file is selected. The kind of
513      * selection depends on the file existence, the dialog type, and the native
514      * platform. E.g., the file could be highlighted in the file list, or a
515      * file name editbox could be populated with the file name.
516      * &lt;p&gt;
517      * This method accepts either a full file path, or a file name with an
518      * extension if used together with the {@code setDirectory} method.
519      * &lt;p&gt;
520      * Specifying &quot;&quot; as the file is exactly equivalent to specifying
521      * {@code null} as the file.
522      *
523      * @param    file   the file being set
524      * @see      #getFile
525      * @see      #getFiles
526      */
527     public void setFile(String file) {
<span class="line-modified">528         this.file = (file != null &amp;&amp; file.isEmpty()) ? null : file;</span>
529         FileDialogPeer peer = (FileDialogPeer)this.peer;
530         if (peer != null) {
531             peer.setFile(this.file);
532         }
533     }
534 
535     /**
536      * Enables or disables multiple file selection for the file dialog.
537      *
538      * @param enable    if {@code true}, multiple file selection is enabled;
539      *                  {@code false} - disabled.
540      * @see #isMultipleMode
541      * @since 1.7
542      */
543     public void setMultipleMode(boolean enable) {
544         synchronized (getObjectLock()) {
545             this.multipleMode = enable;
546         }
547     }
548 
</pre>
<hr />
<pre>
589         FileDialogPeer peer = (FileDialogPeer)this.peer;
590         if (peer != null) {
591             peer.setFilenameFilter(filter);
592         }
593     }
594 
595     /**
596      * Reads the {@code ObjectInputStream} and performs
597      * a backwards compatibility check by converting
598      * either a {@code dir} or a {@code file}
599      * equal to an empty string to {@code null}.
600      *
601      * @param s the {@code ObjectInputStream} to read
602      */
603     private void readObject(ObjectInputStream s)
604         throws ClassNotFoundException, IOException
605     {
606         s.defaultReadObject();
607 
608         // 1.1 Compatibility: &quot;&quot; is not converted to null in 1.1
<span class="line-modified">609         if (dir != null &amp;&amp; dir.isEmpty()) {</span>
610             dir = null;
611         }
<span class="line-modified">612         if (file != null &amp;&amp; file.isEmpty()) {</span>
613             file = null;
614         }
615     }
616 
617     /**
618      * Returns a string representing the state of this {@code FileDialog}
619      * window. This method is intended to be used only for debugging purposes,
620      * and the content and format of the returned string may vary between
621      * implementations. The returned string may be empty but may not be
622      * {@code null}.
623      *
624      * @return  the parameter string of this file dialog window
625      */
626     protected String paramString() {
627         String str = super.paramString();
628         str += &quot;,dir= &quot; + dir;
629         str += &quot;,file= &quot; + file;
630         return str + ((mode == LOAD) ? &quot;,load&quot; : &quot;,save&quot;);
631     }
632 
</pre>
</td>
</tr>
</table>
<center><a href="Event.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="FlowLayout.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>