<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.desktop/share/classes/java/awt/doc-files/DesktopProperties.html</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 &lt;!doctype html&gt;
  2 &lt;html lang=&quot;en&quot;&gt;
  3 &lt;head&gt;
  4   &lt;meta charset=&quot;utf-8&quot;/&gt;
  5   &lt;title&gt;AWT Desktop Properties&lt;/title&gt;
  6 &lt;/head&gt;
  7 &lt;!--
<a name="1" id="anc1"></a><span class="line-modified">  8  Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  9  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 10 
 11  This code is free software; you can redistribute it and/or modify it
 12  under the terms of the GNU General Public License version 2 only, as
 13  published by the Free Software Foundation.  Oracle designates this
 14  particular file as subject to the &quot;Classpath&quot; exception as provided
 15  by Oracle in the LICENSE file that accompanied this code.
 16 
 17  This code is distributed in the hope that it will be useful, but WITHOUT
 18  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 19  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 20  version 2 for more details (a copy is included in the LICENSE file that
 21  accompanied this code).
 22 
 23  You should have received a copy of the GNU General Public License version
 24  2 along with this work; if not, write to the Free Software Foundation,
 25  Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 26 
 27  Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 28  or visit www.oracle.com if you need additional information or have any
 29  questions.
 30 --&gt;
 31 
 32 &lt;body&gt;
 33 &lt;main role=&quot;main&quot;&gt;
<a name="2" id="anc2"></a><span class="line-added"> 34 &lt;div class=&quot;contentContainer&quot;&gt;</span>
 35 &lt;h1&gt;AWT Desktop Properties&lt;/h1&gt;
 36 
 37 The following refers to standard AWT desktop properties that
 38 may be obtained via the
 39 &lt;a href=&quot;../Toolkit.html#getDesktopProperty(java.lang.String)&quot;&gt;
 40 &lt;code&gt;Toolkit.getDesktopProperty&lt;/code&gt;&lt;/a&gt; method.
 41 &lt;p&gt;
 42 Each desktop property is named by a unique string, which
 43 is the &quot;name&quot; of that property.
 44 &lt;p&gt;
 45 Desktop properties supported by the AWT but not documented
 46 elsewhere - typically because there is no suitable
 47 method or class - are documented here.
 48 &lt;p&gt;
 49 Desktop properties documented elsewhere are those which are
 50 tightly coupled with a method or class which documents them.
 51 &lt;p&gt;
 52 Since desktop properties abstract an underlying platform
 53 setting, they may not be available in environments that do
 54 not support them. In the event that a desktop property is
 55 unavailable for any reason, the implementation will return
 56 &lt;code&gt;null&lt;/code&gt;.
 57 &lt;p&gt;
 58 The following table summarizes the desktop properties documented
 59 here, and their value types.
 60 &lt;br&gt;&lt;br&gt;
<a name="3" id="anc3"></a><span class="line-modified"> 61 &lt;table border=1&gt;</span>
<span class="line-modified"> 62 &lt;thead&gt;</span>
<span class="line-modified"> 63 &lt;tr&gt;</span>
<span class="line-modified"> 64 &lt;th scope=&quot;col&quot;&gt;Property Name&lt;/th&gt;</span>
<span class="line-modified"> 65 &lt;th scope=&quot;col&quot;&gt;Value Type&lt;/th&gt;</span>
<span class="line-added"> 66 &lt;th scope=&quot;col&quot;&gt;Summary Description&lt;/th&gt;</span>
 67 &lt;/tr&gt;
<a name="4" id="anc4"></a><span class="line-added"> 68 &lt;/thead&gt;</span>
<span class="line-added"> 69 &lt;tbody&gt;</span>
 70 &lt;tr&gt;
<a name="5" id="anc5"></a><span class="line-modified"> 71 &lt;th scope=&quot;row&quot;&gt;&lt;A href=&quot;#awt.font.desktophints&quot;&gt;awt.font.desktophints&lt;/A&gt;&lt;/th&gt;</span>
<span class="line-modified"> 72 &lt;td&gt;{@link java.util.Map java.util.Map}&lt;/td&gt;</span>
 73 &lt;td&gt;Font smoothing (text antialiasing) settings.&lt;/td&gt;
 74 &lt;/tr&gt;
 75 &lt;tr&gt;
<a name="6" id="anc6"></a><span class="line-modified"> 76 &lt;th scope=&quot;row&quot;&gt;&lt;A href=&quot;#sun.awt.enableExtraMouseButtons&quot;&gt;sun.awt.enableExtraMouseButtons&lt;/A&gt;&lt;/th&gt;</span>
<span class="line-modified"> 77 &lt;td&gt;{@link java.lang.Boolean java.lang.Boolean}&lt;/td&gt;</span>
 78 &lt;td&gt;Controls if mouse events from extra buttons are to be generated or not&lt;/td&gt;
 79 &lt;/tr&gt;
<a name="7" id="anc7"></a><span class="line-added"> 80 &lt;/tbody&gt;</span>
 81 &lt;/table&gt;
 82 
 83 &lt;h2&gt;Desktop Font Rendering Hints&lt;/h2&gt;
 84 &lt;b&gt;Desktop Property: &lt;a id=&quot;awt.font.desktophints&quot;&gt;&quot;awt.font.desktophints&quot;&lt;/A&gt;&lt;/b&gt;
 85 &lt;p&gt;
 86 Modern desktops support various forms of text antialiasing (font smoothing).
 87 &lt;p&gt;
 88 These are applied by platform-specific heavyweight components.
 89 However an application may want to render text using the same text
 90 antialiasing on a drawing surface or lightweight (non-platform) component using
 91 &lt;a href=&quot;../Graphics2D.html&quot;&gt; &lt;code&gt;Graphics2D&lt;/code&gt;&lt;/a&gt; methods.
 92 This is particularly important when creating
 93 &lt;a href=&quot;../../../javax/swing/JComponent.html&quot;&gt; Swing components&lt;/a&gt; which
 94 are required to appear consistent with native desktop components or other
 95 Swing components.
 96 
 97 &lt;h3&gt;Basic Usage&lt;/h3&gt;
 98 The standard desktop property named
 99 &lt;b&gt;&quot;awt.font.desktophints&quot;&lt;/b&gt;
100 can be used to obtain the rendering hints that best match the desktop settings.
101 
102 The return value is a
103 &lt;a href=&quot;../../util/Map.html&quot;&gt; Map&lt;/a&gt; of
104 &lt;a href=&quot;../RenderingHints.html&quot;&gt; &lt;code&gt;RenderingHints&lt;/code&gt;&lt;/a&gt; which
105 can be directly applied to a &lt;code&gt;Graphics2D&lt;/code&gt;.
106 &lt;p&gt;
107 It is a &lt;code&gt;Map&lt;/code&gt; as more than one hint may be needed.
108 If non-null this can be directly applied to the &lt;code&gt;Graphics2D&lt;/code&gt;.
109 &lt;pre&gt;&lt;code&gt;
110 Toolkit tk = Toolkit.getDefaultToolkit();
111 Map map = (Map)(tk.getDesktopProperty(&quot;awt.font.desktophints&quot;));
112 if (map != null) {
113     graphics2D.addRenderingHints(map);
114 }
115 &lt;/code&gt;&lt;/pre&gt;
116 &lt;h3&gt;Advanced Usage Tips&lt;/h3&gt;
117 
118 &lt;h4&gt;Listening for changes&lt;/h4&gt;
119 &lt;p&gt;
120 An application can listen for changes in the property
121 using a &lt;a href=&quot;../../beans/PropertyChangeListener.html&quot;&gt;
122 &lt;code&gt;PropertyChangeListener&lt;/code&gt;&lt;/a&gt; :
123 &lt;pre&gt;&lt;code&gt;
124 tk.addPropertyChangeListener(&quot;awt.font.desktophints&quot;, pcl);
125 &lt;/code&gt;&lt;/pre&gt;
126 Listening for changes is recommended as users can, on rare occasions,
127 reconfigure a desktop environment whilst applications are running
128 in a way that may affect the selection of these hints, and furthermore
129 many desktop environments support dynamic reconfiguration of these
130 running applications to conform to the new settings.
131 &lt;p&gt;
132 There is no direct way to discover if dynamic reconfiguration
133 is expected of running applications but the default assumption
134 should be that it is expected, since most modern desktop environments
135 do provide this capability.
136 &lt;h4&gt;Text Measurement&lt;/h4&gt;
137 &lt;p&gt;
138 Text always needs to be measured using the same
139 &lt;a href=&quot;../font/FontRenderContext.html&quot;&gt; &lt;code&gt;FontRenderContext&lt;/code&gt;&lt;/a&gt;
140 as used for rendering. The text anti-aliasing hint is a component of
141 the &lt;code&gt;FontRenderContext&lt;/code&gt;.
142 A &lt;a href=&quot;../FontMetrics.html&quot;&gt; &lt;code&gt;FontMetrics&lt;/code&gt;&lt;/a&gt;
143 obtained from the &lt;code&gt;Graphics&lt;/code&gt; object on which the hint
144 has been set will measure text appropriately.
145 This is not a unique requirement for clients that specify this hint
146 directly, since the value of the &lt;code&gt;FontRenderContext&lt;/code&gt; should
147 never be assumed, so is discussed here principally as a reminder.
148 &lt;h4&gt;Saving and restoring Graphics State&lt;/h4&gt;
149 &lt;p&gt;
150 Sometimes an application may need to apply these hints on a shared
151 Graphics only temporarily, restoring the previous values after they
152 have been applied to text rendering operations.
153 The following sample code shows one way to do this.
154 &lt;pre&gt;&lt;code&gt;
155 /**
156   * Get rendering hints from a Graphics instance.
157   * &quot;hintsToSave&quot; is a Map of RenderingHint key-values.
158   * For each hint key present in that map, the value of that
159   * hint is obtained from the Graphics and stored as the value
160   * for the key in savedHints.
161   */
162 RenderingHints getRenderingHints(Graphics2D g2d,
163                                   RenderingHints hintsToSave,
164                                   RenderingHints savedHints) {
165      if (savedHints == null) {
166          savedHints = new RenderingHints(null);
167      } else {
168          savedHints.clear();
169      }
170      if (hintsToSave.size() == 0) {
171          return savedHints;
172      }
173      /* RenderingHints.keySet() returns Set&amp;lt;Object&amp;gt; */
174      for (Object o : hintsToSave.keySet()) {
175          RenderingHints.Key key = (RenderingHints.Key)o;
176          Object value = g2d.getRenderingHint(key);
177          savedHints.put(key, value);
178      }
179      return savedHints;
180 }
181 
182 
183 Toolkit tk = Toolkit.getDefaultToolkit();
184 Map map = (Map)(tk.getDesktopProperty(&quot;awt.font.desktophints&quot;));
185 Map oldHints;
186 if (map != null) {
187      oldHints = getRenderingHints(graphic2D, map, null);
188      graphics2D.addRenderingHints(map);
189      ..
190      graphics2D.addRenderingHints(oldHints);
191 }
192 &lt;/code&gt;&lt;/pre&gt;
193 
194 &lt;h3&gt;Details&lt;/h3&gt;
195 &lt;ul&gt;
196 &lt;li&gt;The return value will always be null or a &lt;code&gt;Map&lt;/code&gt;
197 &lt;br&gt;&lt;br&gt;
198 &lt;li&gt;If the return value is null, then no desktop properties are available,
199 and dynamic updates will not be available. This is a typical behaviour if
200 the JDK does not recognise the desktop environment, or it is one which
201 has no such settings. The &lt;b&gt;Headless&lt;/b&gt; toolkit is one such example.
202 Therefore it is important to test against null before using the map.
203 &lt;br&gt;&lt;br&gt;
204 &lt;li&gt;If non-null the value will be a &lt;code&gt;Map&lt;/code&gt; of
205 &lt;code&gt;RenderingHints&lt;/code&gt; such that every key is an instance of
206 &lt;code&gt;RenderingHints.Key&lt;/code&gt; and the value is a legal value for that key.
207 &lt;br&gt;&lt;br&gt;
208 &lt;li&gt;The map may contain the default value for a hint. This is
209 needed in the event there is a previously a non-default value for the hint
210 set on the &lt;code&gt;Graphics2D&lt;/code&gt;. If the map did not contain
211 the default value, then &lt;code&gt;addRenderingHints(Map)&lt;/code&gt; would leave
212 the previous hint which may not correspond to the desktop setting.
213 &lt;p&gt;
214 An application can use &lt;code&gt;setRenderingHints(Map)&lt;/code&gt; to reinitialise
215 all hints, but this would affect unrelated hints too.
216 &lt;br&gt;&lt;br&gt;
217 &lt;li&gt;A multi-screen desktop may support per-screen device settings in which
218 case the returned value is for the default screen of the desktop.
219 An application may want to use the settings for the screen on
220 which they will be applied.
221 The per-screen device hints may be obtained by per-device property names
222 which are constructed as the String concatenation
223 &lt;pre&gt;&lt;code&gt;
224 &quot;awt.font.desktophints&quot; + &quot;.&quot; + GraphicsDevice.getIDstring();
225 &lt;/code&gt;&lt;/pre&gt;
226 &lt;p&gt;
227 An application can also listen for changes on these properties.
228 &lt;p&gt;
229 However this is an extremely unlikely configuration, so to help
230 ease of development, if only a single, desktop-wide setting is supported,
231 then querying each of these per-device settings will return null.
232 So to determine if there are per-device settings it is sufficient to
233 determine that there is a non-null return for any screen device using
234 the per-device property name.
235 &lt;/ul&gt;
236 &lt;h2&gt;Mouse Functionality&lt;/h2&gt;
237 &lt;b&gt;Desktop Property: &lt;a id=&quot;sun.awt.enableExtraMouseButtons&quot;&gt;&quot;sun.awt.enableExtraMouseButtons&quot;&lt;/A&gt;&lt;/b&gt;
238 &lt;p&gt;
239 This property determines if events from extra mouse buttons (if they are exist and are
240 enabled by the underlying operating system) are allowed to be processed and posted into
241 {@code EventQueue}.
242 &lt;br&gt;
243 The value could be changed by passing &quot;sun.awt.enableExtraMouseButtons&quot;
244 property value into java before application starts. This could be done with the following command:
245 &lt;pre&gt;
246 java -Dsun.awt.enableExtraMouseButtons=false Application
247 &lt;/pre&gt;
248 Once set on application startup, it is impossible to change this value after.
249 &lt;br&gt;
250 Current value could also be queried using getDesktopProperty(&quot;sun.awt.enableExtraMouseButtons&quot;)
251 method.
252 &lt;br&gt;
253 If the property is set to {@code true} then
254 &lt;ul&gt;
255 &lt;li&gt; it is still legal to create {@code MouseEvent} objects with
256 standard buttons and, if the mouse has more
257 then three buttons, it is also legal to use buttons from the range started
258 from 0 up to {@link java.awt.MouseInfo#getNumberOfButtons() getNumberOfButtons()}.
259 
260 &lt;li&gt; it is legal to use standard button masks when using {@code Robot.mousePress()}
261 and {@code Robot.mouseRelease()} methods and, if the mouse has more then three buttons,
262 it is also legal to use masks for existing extended mouse buttons.
263 That way, if there are more then three buttons on the mouse then it is allowed to
264 use button masks corresponding to the buttons
265 in the range from 1 up to {@link java.awt.MouseInfo#getNumberOfButtons() getNumberOfButtons()}
266 &lt;/ul&gt;
267 &lt;br&gt;
268 If the property is set to {@code false} then
269 &lt;ul&gt;
270 &lt;li&gt; it is legal to create {@code MouseEvent} objects with standard buttons
271 only: {@code NOBUTTON}, {@code BUTTON1}, {@code BUTTON2} and
272 {@code BUTTON3}
273 &lt;li&gt; it is legal to use standard button masks only:
274 {@code InputEvent.BUTTON1_DOWN_MASK}, {@code InputEvent.BUTTON2_DOWN_MASK},
275 {@code InputEvent.BUTTON3_DOWN_MASK}
276 &lt;/ul&gt;
277 
278 This property should be used when there is no need in listening mouse events fired as a result of
279 activity with extra mouse button.
280 By default this property is set to {@code true}.
<a name="8" id="anc8"></a><span class="line-added">281 &lt;/div&gt;</span>
282 &lt;/main&gt;
283 &lt;/body&gt;
284 &lt;/html&gt;
<a name="9" id="anc9"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="9" type="hidden" />
</body>
</html>