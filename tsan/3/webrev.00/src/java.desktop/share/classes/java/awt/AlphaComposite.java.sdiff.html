<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/java/awt/AlphaComposite.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../applet/Applet.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="BorderLayout.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/java/awt/AlphaComposite.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
146  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;C&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt;
147  *     &lt;td&gt;one of the raw color components of the destination pixel
148  *   &lt;tr&gt;
149  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt;
150  *     &lt;td&gt;the &quot;extra&quot; alpha component from the AlphaComposite instance
151  *   &lt;tr&gt;
152  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt;
153  *     &lt;td&gt;the raw alpha component of the source pixel
154  *   &lt;tr&gt;
155  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt;
156  *     &lt;td&gt;the raw alpha component of the destination pixel
157  *   &lt;tr&gt;
158  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt;
159  *     &lt;td&gt;the final alpha component stored in the destination
160  *   &lt;tr&gt;
161  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;C&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt;
162  *     &lt;td&gt;the final raw color component stored in the destination
163  * &lt;/tbody&gt;
164  * &lt;/table&gt;
165  *
<span class="line-modified">166  * &lt;h3&gt;Preparing Inputs&lt;/h3&gt;</span>
167  *
168  * &lt;p&gt;
169  * The {@code AlphaComposite} class defines an additional alpha
170  * value that is applied to the source alpha.
171  * This value is applied as if an implicit SRC_IN rule were first
172  * applied to the source pixel against a pixel with the indicated
173  * alpha by multiplying both the raw source alpha and the raw
174  * source colors by the alpha in the {@code AlphaComposite}.
175  * This leads to the following equation for producing the alpha
176  * used in the Porter and Duff blending equation:
177  *
178  * &lt;pre&gt;
179  *      &lt;em&gt;A&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;A&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt; &lt;/pre&gt;
180  *
181  * All of the raw source color components need to be multiplied
182  * by the alpha in the {@code AlphaComposite} instance.
183  * Additionally, if the source was not in premultiplied form
184  * then the color components also need to be multiplied by the
185  * source alpha.
186  * Thus, the equation for producing the source color components
187  * for the Porter and Duff equation depends on whether the source
188  * pixels are premultiplied or not:
189  *
190  * &lt;pre&gt;
191  *      &lt;em&gt;C&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt;     (if source is not premultiplied)
192  *      &lt;em&gt;C&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt;           (if source is premultiplied) &lt;/pre&gt;
193  *
194  * No adjustment needs to be made to the destination alpha:
195  *
196  * &lt;pre&gt;
197  *      &lt;em&gt;A&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;A&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt; &lt;/pre&gt;
198  *
199  * &lt;p&gt;
200  * The destination color components need to be adjusted only if
201  * they are not in premultiplied form:
202  *
203  * &lt;pre&gt;
204  *      &lt;em&gt;C&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt;    (if destination is not premultiplied)
205  *      &lt;em&gt;C&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt;         (if destination is premultiplied) &lt;/pre&gt;
206  *
<span class="line-modified">207  * &lt;h3&gt;Applying the Blending Equation&lt;/h3&gt;</span>
208  *
209  * &lt;p&gt;
210  * The adjusted &lt;em&gt;A&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt;, &lt;em&gt;A&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt;,
211  * &lt;em&gt;C&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt;, and &lt;em&gt;C&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; are used in the standard
212  * Porter and Duff equations to calculate the blending factors
213  * &lt;em&gt;F&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; and &lt;em&gt;F&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; and then the resulting
214  * premultiplied components &lt;em&gt;A&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt; and &lt;em&gt;C&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;.
215  *
<span class="line-modified">216  * &lt;h3&gt;Preparing Results&lt;/h3&gt;</span>
217  *
218  * &lt;p&gt;
219  * The results only need to be adjusted if they are to be stored
220  * back into a destination buffer that holds data that is not
221  * premultiplied, using the following equations:
222  *
223  * &lt;pre&gt;
224  *      &lt;em&gt;A&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;A&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;
225  *      &lt;em&gt;C&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;                 (if dest is premultiplied)
226  *      &lt;em&gt;C&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt; / &lt;em&gt;A&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;            (if dest is not premultiplied) &lt;/pre&gt;
227  *
228  * Note that since the division is undefined if the resulting alpha
229  * is zero, the division in that case is omitted to avoid the &quot;divide
230  * by zero&quot; and the color components are left as
231  * all zeros.
232  *
<span class="line-modified">233  * &lt;h3&gt;Performance Considerations&lt;/h3&gt;</span>
234  *
235  * &lt;p&gt;
236  * For performance reasons, it is preferable that
237  * {@code Raster} objects passed to the {@code compose}
238  * method of a {@link CompositeContext} object created by the
239  * {@code AlphaComposite} class have premultiplied data.
240  * If either the source {@code Raster}
241  * or the destination {@code Raster}
242  * is not premultiplied, however,
243  * appropriate conversions are performed before and after the compositing
244  * operation.
245  *
<span class="line-modified">246  * &lt;h3&gt;&lt;a id=&quot;caveats&quot;&gt;Implementation Caveats&lt;/a&gt;&lt;/h3&gt;</span>
247  *
248  * &lt;ul&gt;
249  * &lt;li&gt;
250  * Many sources, such as some of the opaque image types listed
251  * in the {@code BufferedImage} class, do not store alpha values
252  * for their pixels.  Such sources supply an alpha of 1.0 for
253  * all of their pixels.
254  *
255  * &lt;li&gt;
256  * Many destinations also have no place to store the alpha values
257  * that result from the blending calculations performed by this class.
258  * Such destinations thus implicitly discard the resulting
259  * alpha values that this class produces.
260  * It is recommended that such destinations should treat their stored
261  * color values as non-premultiplied and divide the resulting color
262  * values by the resulting alpha value before storing the color
263  * values and discarding the alpha value.
264  *
265  * &lt;li&gt;
266  * The accuracy of the results depends on the manner in which pixels
</pre>
</td>
<td>
<hr />
<pre>
146  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;C&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt;
147  *     &lt;td&gt;one of the raw color components of the destination pixel
148  *   &lt;tr&gt;
149  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt;
150  *     &lt;td&gt;the &quot;extra&quot; alpha component from the AlphaComposite instance
151  *   &lt;tr&gt;
152  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt;
153  *     &lt;td&gt;the raw alpha component of the source pixel
154  *   &lt;tr&gt;
155  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt;
156  *     &lt;td&gt;the raw alpha component of the destination pixel
157  *   &lt;tr&gt;
158  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;A&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt;
159  *     &lt;td&gt;the final alpha component stored in the destination
160  *   &lt;tr&gt;
161  *     &lt;th scope=&quot;row&quot;&gt;&lt;em&gt;C&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt;
162  *     &lt;td&gt;the final raw color component stored in the destination
163  * &lt;/tbody&gt;
164  * &lt;/table&gt;
165  *
<span class="line-modified">166  * &lt;h2&gt;Preparing Inputs&lt;/h2&gt;</span>
167  *
168  * &lt;p&gt;
169  * The {@code AlphaComposite} class defines an additional alpha
170  * value that is applied to the source alpha.
171  * This value is applied as if an implicit SRC_IN rule were first
172  * applied to the source pixel against a pixel with the indicated
173  * alpha by multiplying both the raw source alpha and the raw
174  * source colors by the alpha in the {@code AlphaComposite}.
175  * This leads to the following equation for producing the alpha
176  * used in the Porter and Duff blending equation:
177  *
178  * &lt;pre&gt;
179  *      &lt;em&gt;A&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;A&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt; &lt;/pre&gt;
180  *
181  * All of the raw source color components need to be multiplied
182  * by the alpha in the {@code AlphaComposite} instance.
183  * Additionally, if the source was not in premultiplied form
184  * then the color components also need to be multiplied by the
185  * source alpha.
186  * Thus, the equation for producing the source color components
187  * for the Porter and Duff equation depends on whether the source
188  * pixels are premultiplied or not:
189  *
190  * &lt;pre&gt;
191  *      &lt;em&gt;C&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt;     (if source is not premultiplied)
192  *      &lt;em&gt;C&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;sr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;ac&lt;/sub&gt;&lt;/em&gt;           (if source is premultiplied) &lt;/pre&gt;
193  *
194  * No adjustment needs to be made to the destination alpha:
195  *
196  * &lt;pre&gt;
197  *      &lt;em&gt;A&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;A&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt; &lt;/pre&gt;
198  *
199  * &lt;p&gt;
200  * The destination color components need to be adjusted only if
201  * they are not in premultiplied form:
202  *
203  * &lt;pre&gt;
204  *      &lt;em&gt;C&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt; * &lt;em&gt;A&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt;    (if destination is not premultiplied)
205  *      &lt;em&gt;C&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;dr&lt;/sub&gt;&lt;/em&gt;         (if destination is premultiplied) &lt;/pre&gt;
206  *
<span class="line-modified">207  * &lt;h2&gt;Applying the Blending Equation&lt;/h2&gt;</span>
208  *
209  * &lt;p&gt;
210  * The adjusted &lt;em&gt;A&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt;, &lt;em&gt;A&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt;,
211  * &lt;em&gt;C&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt;, and &lt;em&gt;C&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; are used in the standard
212  * Porter and Duff equations to calculate the blending factors
213  * &lt;em&gt;F&lt;sub&gt;s&lt;/sub&gt;&lt;/em&gt; and &lt;em&gt;F&lt;sub&gt;d&lt;/sub&gt;&lt;/em&gt; and then the resulting
214  * premultiplied components &lt;em&gt;A&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt; and &lt;em&gt;C&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;.
215  *
<span class="line-modified">216  * &lt;h2&gt;Preparing Results&lt;/h2&gt;</span>
217  *
218  * &lt;p&gt;
219  * The results only need to be adjusted if they are to be stored
220  * back into a destination buffer that holds data that is not
221  * premultiplied, using the following equations:
222  *
223  * &lt;pre&gt;
224  *      &lt;em&gt;A&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;A&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;
225  *      &lt;em&gt;C&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;                 (if dest is premultiplied)
226  *      &lt;em&gt;C&lt;sub&gt;df&lt;/sub&gt;&lt;/em&gt; = &lt;em&gt;C&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt; / &lt;em&gt;A&lt;sub&gt;r&lt;/sub&gt;&lt;/em&gt;            (if dest is not premultiplied) &lt;/pre&gt;
227  *
228  * Note that since the division is undefined if the resulting alpha
229  * is zero, the division in that case is omitted to avoid the &quot;divide
230  * by zero&quot; and the color components are left as
231  * all zeros.
232  *
<span class="line-modified">233  * &lt;h2&gt;Performance Considerations&lt;/h2&gt;</span>
234  *
235  * &lt;p&gt;
236  * For performance reasons, it is preferable that
237  * {@code Raster} objects passed to the {@code compose}
238  * method of a {@link CompositeContext} object created by the
239  * {@code AlphaComposite} class have premultiplied data.
240  * If either the source {@code Raster}
241  * or the destination {@code Raster}
242  * is not premultiplied, however,
243  * appropriate conversions are performed before and after the compositing
244  * operation.
245  *
<span class="line-modified">246  * &lt;h2&gt;&lt;a id=&quot;caveats&quot;&gt;Implementation Caveats&lt;/a&gt;&lt;/h2&gt;</span>
247  *
248  * &lt;ul&gt;
249  * &lt;li&gt;
250  * Many sources, such as some of the opaque image types listed
251  * in the {@code BufferedImage} class, do not store alpha values
252  * for their pixels.  Such sources supply an alpha of 1.0 for
253  * all of their pixels.
254  *
255  * &lt;li&gt;
256  * Many destinations also have no place to store the alpha values
257  * that result from the blending calculations performed by this class.
258  * Such destinations thus implicitly discard the resulting
259  * alpha values that this class produces.
260  * It is recommended that such destinations should treat their stored
261  * color values as non-premultiplied and divide the resulting color
262  * values by the resulting alpha value before storing the color
263  * values and discarding the alpha value.
264  *
265  * &lt;li&gt;
266  * The accuracy of the results depends on the manner in which pixels
</pre>
</td>
</tr>
</table>
<center><a href="../applet/Applet.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="BorderLayout.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>