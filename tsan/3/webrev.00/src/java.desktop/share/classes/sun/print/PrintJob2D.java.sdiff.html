<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/sun/print/PrintJob2D.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="PSStreamPrintService.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="RasterPrinterJob.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/sun/print/PrintJob2D.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 666                     }
 667                 }
 668             } catch (PrinterException pe) {
 669             }
 670         }
 671 
 672         DestinationType dest = jobAttributes.getDestination();
 673         if (dest == DestinationType.FILE &amp;&amp; pServ != null &amp;&amp;
 674             pServ.isAttributeCategorySupported(Destination.class)) {
 675 
 676             String fileName = jobAttributes.getFileName();
 677 
 678             Destination defaultDest;
 679             if (fileName == null &amp;&amp; (defaultDest = (Destination)pServ.
 680                     getDefaultAttributeValue(Destination.class)) != null) {
 681                 attributes.add(defaultDest);
 682             } else {
 683                 URI uri = null;
 684                 try {
 685                     if (fileName != null) {
<span class="line-modified"> 686                         if (fileName.equals(&quot;&quot;)) {</span>
 687                             fileName = &quot;.&quot;;
 688                         }
 689                     } else {
 690                         // defaultDest should not be null.  The following code
 691                         // is only added to safeguard against a possible
 692                         // buggy implementation of a PrintService having a
 693                         // null default Destination.
 694                         fileName = &quot;out.prn&quot;;
 695                     }
 696                     uri = (new File(fileName)).toURI();
 697                 } catch (SecurityException se) {
 698                     try {
 699                         // &#39;\\&#39; file separator is illegal character in opaque
 700                         // part and causes URISyntaxException, so we replace
 701                         // it with &#39;/&#39;
 702                         fileName = fileName.replace(&#39;\\&#39;, &#39;/&#39;);
 703                         uri = new URI(&quot;file:&quot;+fileName);
 704                     } catch (URISyntaxException e) {
 705                     }
 706                 }
</pre>
<hr />
<pre>
1216                 pageAttributes.setMedia(SIZES[MediaType.LEGAL.hashCode()]);
1217             } else if (str.equals(EXECUTIVE)) {
1218                 pageAttributes.setMedia(SIZES[MediaType.EXECUTIVE.hashCode()]);
1219             } else if (str.equals(A4)) {
1220                 pageAttributes.setMedia(SIZES[MediaType.A4.hashCode()]);
1221             }
1222         }
1223     }
1224 
1225     private void translateOutputProps() {
1226         if (props == null) {
1227             return;
1228         }
1229 
1230         String str;
1231 
1232         props.setProperty(DEST_PROP,
1233             (jobAttributes.getDestination() == DestinationType.PRINTER) ?
1234                           PRINTER : FILE);
1235         str = jobAttributes.getPrinter();
<span class="line-modified">1236         if (str != null &amp;&amp; !str.equals(&quot;&quot;)) {</span>
1237             props.setProperty(PRINTER_PROP, str);
1238         }
1239         str = jobAttributes.getFileName();
<span class="line-modified">1240         if (str != null &amp;&amp; !str.equals(&quot;&quot;)) {</span>
1241             props.setProperty(FILENAME_PROP, str);
1242         }
1243         int copies = jobAttributes.getCopies();
1244         if (copies &gt; 0) {
1245             props.setProperty(NUMCOPIES_PROP, &quot;&quot; + copies);
1246         }
1247         str = this.options;
<span class="line-modified">1248         if (str != null &amp;&amp; !str.equals(&quot;&quot;)) {</span>
1249             props.setProperty(OPTIONS_PROP, str);
1250         }
1251         props.setProperty(ORIENT_PROP,
1252             (pageAttributes.getOrientationRequested() ==
1253              OrientationRequestedType.PORTRAIT)
1254                           ? PORTRAIT : LANDSCAPE);
1255         MediaType media = SIZES[pageAttributes.getMedia().hashCode()];
1256         if (media == MediaType.LETTER) {
1257             str = LETTER;
1258         } else if (media == MediaType.LEGAL) {
1259             str = LEGAL;
1260         } else if (media == MediaType.EXECUTIVE) {
1261             str = EXECUTIVE;
1262         } else if (media == MediaType.A4) {
1263             str = A4;
1264         } else {
1265             str = media.toString();
1266         }
1267         props.setProperty(PAPERSIZE_PROP, str);
1268     }
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 666                     }
 667                 }
 668             } catch (PrinterException pe) {
 669             }
 670         }
 671 
 672         DestinationType dest = jobAttributes.getDestination();
 673         if (dest == DestinationType.FILE &amp;&amp; pServ != null &amp;&amp;
 674             pServ.isAttributeCategorySupported(Destination.class)) {
 675 
 676             String fileName = jobAttributes.getFileName();
 677 
 678             Destination defaultDest;
 679             if (fileName == null &amp;&amp; (defaultDest = (Destination)pServ.
 680                     getDefaultAttributeValue(Destination.class)) != null) {
 681                 attributes.add(defaultDest);
 682             } else {
 683                 URI uri = null;
 684                 try {
 685                     if (fileName != null) {
<span class="line-modified"> 686                         if (fileName.isEmpty()) {</span>
 687                             fileName = &quot;.&quot;;
 688                         }
 689                     } else {
 690                         // defaultDest should not be null.  The following code
 691                         // is only added to safeguard against a possible
 692                         // buggy implementation of a PrintService having a
 693                         // null default Destination.
 694                         fileName = &quot;out.prn&quot;;
 695                     }
 696                     uri = (new File(fileName)).toURI();
 697                 } catch (SecurityException se) {
 698                     try {
 699                         // &#39;\\&#39; file separator is illegal character in opaque
 700                         // part and causes URISyntaxException, so we replace
 701                         // it with &#39;/&#39;
 702                         fileName = fileName.replace(&#39;\\&#39;, &#39;/&#39;);
 703                         uri = new URI(&quot;file:&quot;+fileName);
 704                     } catch (URISyntaxException e) {
 705                     }
 706                 }
</pre>
<hr />
<pre>
1216                 pageAttributes.setMedia(SIZES[MediaType.LEGAL.hashCode()]);
1217             } else if (str.equals(EXECUTIVE)) {
1218                 pageAttributes.setMedia(SIZES[MediaType.EXECUTIVE.hashCode()]);
1219             } else if (str.equals(A4)) {
1220                 pageAttributes.setMedia(SIZES[MediaType.A4.hashCode()]);
1221             }
1222         }
1223     }
1224 
1225     private void translateOutputProps() {
1226         if (props == null) {
1227             return;
1228         }
1229 
1230         String str;
1231 
1232         props.setProperty(DEST_PROP,
1233             (jobAttributes.getDestination() == DestinationType.PRINTER) ?
1234                           PRINTER : FILE);
1235         str = jobAttributes.getPrinter();
<span class="line-modified">1236         if (str != null &amp;&amp; !str.isEmpty()) {</span>
1237             props.setProperty(PRINTER_PROP, str);
1238         }
1239         str = jobAttributes.getFileName();
<span class="line-modified">1240         if (str != null &amp;&amp; !str.isEmpty()) {</span>
1241             props.setProperty(FILENAME_PROP, str);
1242         }
1243         int copies = jobAttributes.getCopies();
1244         if (copies &gt; 0) {
1245             props.setProperty(NUMCOPIES_PROP, &quot;&quot; + copies);
1246         }
1247         str = this.options;
<span class="line-modified">1248         if (str != null &amp;&amp; !str.isEmpty()) {</span>
1249             props.setProperty(OPTIONS_PROP, str);
1250         }
1251         props.setProperty(ORIENT_PROP,
1252             (pageAttributes.getOrientationRequested() ==
1253              OrientationRequestedType.PORTRAIT)
1254                           ? PORTRAIT : LANDSCAPE);
1255         MediaType media = SIZES[pageAttributes.getMedia().hashCode()];
1256         if (media == MediaType.LETTER) {
1257             str = LETTER;
1258         } else if (media == MediaType.LEGAL) {
1259             str = LEGAL;
1260         } else if (media == MediaType.EXECUTIVE) {
1261             str = EXECUTIVE;
1262         } else if (media == MediaType.A4) {
1263             str = A4;
1264         } else {
1265             str = media.toString();
1266         }
1267         props.setProperty(PAPERSIZE_PROP, str);
1268     }
</pre>
</td>
</tr>
</table>
<center><a href="PSStreamPrintService.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="RasterPrinterJob.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>