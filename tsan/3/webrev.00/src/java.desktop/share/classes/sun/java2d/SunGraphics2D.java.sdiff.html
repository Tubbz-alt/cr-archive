<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/sun/java2d/SunGraphics2D.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../font/TrueTypeFont.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="SunGraphicsEnvironment.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/sun/java2d/SunGraphics2D.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
3004             textpipe.drawGlyphVector(this, gv, x, y);
3005         } catch (InvalidPipeException e) {
3006             try {
3007                 revalidateAll();
3008                 textpipe.drawGlyphVector(this, gv, x, y);
3009             } catch (InvalidPipeException e2) {
3010                 // Still catching the exception; we are not yet ready to
3011                 // validate the surfaceData correctly.  Fail for now and
3012                 // try again next time around.
3013             }
3014         } finally {
3015             surfaceData.markDirty();
3016         }
3017     }
3018 
3019     public void drawChars(char[] data, int offset, int length, int x, int y) {
3020 
3021         if (data == null) {
3022             throw new NullPointerException(&quot;char data is null&quot;);
3023         }
<span class="line-modified">3024         if (offset &lt; 0 || length &lt; 0 || offset + length &gt; data.length) {</span>

3025             throw new ArrayIndexOutOfBoundsException(&quot;bad offset/length&quot;);
3026         }
3027         if (font.hasLayoutAttributes()) {
3028             if (data.length == 0) {
3029                 return;
3030             }
3031             new TextLayout(new String(data, offset, length),
3032                            font, getFontRenderContext()).draw(this, x, y);
3033             return;
3034         }
3035 
3036         try {
3037             textpipe.drawChars(this, data, offset, length, x, y);
3038         } catch (InvalidPipeException e) {
3039             try {
3040                 revalidateAll();
3041                 textpipe.drawChars(this, data, offset, length, x, y);
3042             } catch (InvalidPipeException e2) {
3043                 // Still catching the exception; we are not yet ready to
3044                 // validate the surfaceData correctly.  Fail for now and
3045                 // try again next time around.
3046             }
3047         } finally {
3048             surfaceData.markDirty();
3049         }
3050     }
3051 
3052     public void drawBytes(byte[] data, int offset, int length, int x, int y) {
3053         if (data == null) {
3054             throw new NullPointerException(&quot;byte data is null&quot;);
3055         }
<span class="line-modified">3056         if (offset &lt; 0 || length &lt; 0 || offset + length &gt; data.length) {</span>

3057             throw new ArrayIndexOutOfBoundsException(&quot;bad offset/length&quot;);
3058         }
3059         /* Byte data is interpreted as 8-bit ASCII. Re-use drawChars loops */
3060         char[] chData = new char[length];
3061         for (int i = length; i-- &gt; 0; ) {
3062             chData[i] = (char)(data[i+offset] &amp; 0xff);
3063         }
3064         if (font.hasLayoutAttributes()) {
3065             if (data.length == 0) {
3066                 return;
3067             }
3068             new TextLayout(new String(chData),
3069                            font, getFontRenderContext()).draw(this, x, y);
3070             return;
3071         }
3072 
3073         try {
3074             textpipe.drawChars(this, chData, 0, length, x, y);
3075         } catch (InvalidPipeException e) {
3076             try {
</pre>
</td>
<td>
<hr />
<pre>
3004             textpipe.drawGlyphVector(this, gv, x, y);
3005         } catch (InvalidPipeException e) {
3006             try {
3007                 revalidateAll();
3008                 textpipe.drawGlyphVector(this, gv, x, y);
3009             } catch (InvalidPipeException e2) {
3010                 // Still catching the exception; we are not yet ready to
3011                 // validate the surfaceData correctly.  Fail for now and
3012                 // try again next time around.
3013             }
3014         } finally {
3015             surfaceData.markDirty();
3016         }
3017     }
3018 
3019     public void drawChars(char[] data, int offset, int length, int x, int y) {
3020 
3021         if (data == null) {
3022             throw new NullPointerException(&quot;char data is null&quot;);
3023         }
<span class="line-modified">3024         if (offset &lt; 0 || length &lt; 0 || offset + length &lt; length ||</span>
<span class="line-added">3025             offset + length &gt; data.length) {</span>
3026             throw new ArrayIndexOutOfBoundsException(&quot;bad offset/length&quot;);
3027         }
3028         if (font.hasLayoutAttributes()) {
3029             if (data.length == 0) {
3030                 return;
3031             }
3032             new TextLayout(new String(data, offset, length),
3033                            font, getFontRenderContext()).draw(this, x, y);
3034             return;
3035         }
3036 
3037         try {
3038             textpipe.drawChars(this, data, offset, length, x, y);
3039         } catch (InvalidPipeException e) {
3040             try {
3041                 revalidateAll();
3042                 textpipe.drawChars(this, data, offset, length, x, y);
3043             } catch (InvalidPipeException e2) {
3044                 // Still catching the exception; we are not yet ready to
3045                 // validate the surfaceData correctly.  Fail for now and
3046                 // try again next time around.
3047             }
3048         } finally {
3049             surfaceData.markDirty();
3050         }
3051     }
3052 
3053     public void drawBytes(byte[] data, int offset, int length, int x, int y) {
3054         if (data == null) {
3055             throw new NullPointerException(&quot;byte data is null&quot;);
3056         }
<span class="line-modified">3057         if (offset &lt; 0 || length &lt; 0 || offset + length &lt; length ||</span>
<span class="line-added">3058             offset + length &gt; data.length) {</span>
3059             throw new ArrayIndexOutOfBoundsException(&quot;bad offset/length&quot;);
3060         }
3061         /* Byte data is interpreted as 8-bit ASCII. Re-use drawChars loops */
3062         char[] chData = new char[length];
3063         for (int i = length; i-- &gt; 0; ) {
3064             chData[i] = (char)(data[i+offset] &amp; 0xff);
3065         }
3066         if (font.hasLayoutAttributes()) {
3067             if (data.length == 0) {
3068                 return;
3069             }
3070             new TextLayout(new String(chData),
3071                            font, getFontRenderContext()).draw(this, x, y);
3072             return;
3073         }
3074 
3075         try {
3076             textpipe.drawChars(this, chData, 0, length, x, y);
3077         } catch (InvalidPipeException e) {
3078             try {
</pre>
</td>
</tr>
</table>
<center><a href="../font/TrueTypeFont.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="SunGraphicsEnvironment.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>