<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/javax/imageio/metadata/doc-files/tiff_metadata.html</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="standard_metadata.html.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="wbmp_metadata.html.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/javax/imageio/metadata/doc-files/tiff_metadata.html</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 &lt;!doctype html&gt;
   2 &lt;html lang=&quot;en&quot;&gt;
   3 &lt;head&gt;
   4     &lt;meta charset=&quot;utf-8&quot;/&gt;
   5     &lt;title&gt;TIFF Metadata Format Specification and Usage Notes&lt;/title&gt;
   6 &lt;/head&gt;
   7 &lt;!--
<span class="line-modified">   8 Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   9 DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  10 
  11 This code is free software; you can redistribute it and/or modify it
  12 under the terms of the GNU General Public License version 2 only, as
  13 published by the Free Software Foundation.  Oracle designates this
  14 particular file as subject to the &quot;Classpath&quot; exception as provided
  15 by Oracle in the LICENSE file that accompanied this code.
  16 
  17 This code is distributed in the hope that it will be useful, but WITHOUT
  18 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  19 FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  20 version 2 for more details (a copy is included in the LICENSE file that
  21 accompanied this code).
  22 
  23 You should have received a copy of the GNU General Public License version
  24 2 along with this work; if not, write to the Free Software Foundation,
  25 Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  26 
  27 Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  28 or visit www.oracle.com if you need additional information or have any
  29 questions.
  30 --&gt;
  31 
  32 &lt;body&gt;
  33 &lt;main role=&quot;main&quot;&gt;

  34 &lt;h1&gt;TIFF Metadata Format Specification and Usage Notes&lt;/h1&gt;
  35 
  36 &lt;a href=&quot;#Reading&quot;&gt;Reading Images&lt;/a&gt;
  37 &lt;ul&gt;
  38 &lt;li&gt;&lt;a href=&quot;#ColorConversionRead&quot;&gt;Color Conversion&lt;/a&gt;&lt;/li&gt;
  39 &lt;li&gt;&lt;a href=&quot;#ColorSpacesRead&quot;&gt;Color Spaces&lt;/a&gt;&lt;/li&gt;
  40 &lt;li&gt;&lt;a href=&quot;#ICCProfilesRead&quot;&gt;ICC Profiles&lt;/a&gt;&lt;/li&gt;
  41 &lt;li&gt;&lt;a href=&quot;#MetadataIssuesRead&quot;&gt;Metadata Issues&lt;/a&gt;
  42 &lt;ul&gt;
  43 &lt;li&gt;&lt;a href=&quot;#MapNativeStandard&quot;&gt;Native to Standard Metadata Mapping&lt;/a&gt;&lt;/li&gt;
  44 &lt;/ul&gt;
  45 &lt;/li&gt;
  46 &lt;li&gt;&lt;a href=&quot;#ExifRead&quot;&gt;Reading Exif Images&lt;/a&gt;
  47 &lt;ul&gt;
  48 &lt;li&gt;&lt;a href=&quot;#ExifReadTIFF&quot;&gt;Reading Uncompressed Exif Images&lt;/a&gt;&lt;/li&gt;
  49 &lt;li&gt;&lt;a href=&quot;#ExifReadJPEG&quot;&gt;Reading Compressed Exif Images&lt;/a&gt;&lt;/li&gt;
  50 &lt;/ul&gt;
  51 &lt;/li&gt;
  52 &lt;/ul&gt;
  53 &lt;a href=&quot;#Writing&quot;&gt;Writing Images&lt;/a&gt;&lt;br/&gt;
</pre>
<hr />
<pre>
 174 &lt;code&gt;ImageReader.getImageMetadata&lt;/code&gt;&lt;/li&gt;
 175 &lt;li&gt;Extract the ICC profile field and its value.&lt;/li&gt;
 176 &lt;li&gt;Create an &lt;a href=&quot;../../../../java/awt/color/ICC_ColorSpace.html&quot;&gt;
 177 ICC_ColorSpace&lt;/a&gt; from an
 178 &lt;a href=&quot;../../../../java/awt/color/ICC_Profile.html&quot;&gt;
 179 ICC_Profile&lt;/a&gt; created from the ICC profile field data
 180 using &lt;code&gt;ICC_Profile.getInstance(byte[])&lt;/code&gt;.&lt;/li&gt;
 181 &lt;li&gt;Create an &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; from the new color
 182 space using one of its factory methods which accepts an
 183 &lt;code&gt;ICC_ColorSpace&lt;/code&gt;.
 184 &lt;li&gt;Create a compatible &lt;a href=&quot;../../ImageReadParam.html&quot;&gt;ImageReadParam&lt;/a&gt;
 185 and set the &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; using
 186 &lt;code&gt;ImageReadParam.setDestinationType&lt;/code&gt;.&lt;/li&gt;
 187 &lt;li&gt;Pass the parameter object to the appropriate &lt;code&gt;read&lt;/code&gt; method.&lt;/li&gt;
 188 &lt;/ol&gt;
 189 
 190 &lt;p&gt;If the inferred color space not based on the ICC Profile field is compatible
 191 with the ICC profile-based color space, then a second
 192 &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; derived from this inferred color
 193 space will be included in the
<span class="line-modified"> 194 &lt;a href=&quot;../../../../java/util/Iterator.html&quot;&gt;Iterator&lt;/a&gt; returned by</span>
 195 &lt;code&gt;ImageReader.getImageTypes&lt;/code&gt;. If the iterator contains
 196 more than one type, the first one will be based on the ICC profile and the
 197 second on the inferred color space.&lt;/p&gt;
 198 
 199 &lt;h3&gt;&lt;a id=&quot;MetadataIssuesRead&quot;&gt;Metadata Issues&lt;/a&gt;&lt;/h3&gt;
 200 
 201 By default all recognized fields in the TIFF image file directory (IFD) are
 202 loaded into the native image metadata object. Which fields are loaded may be
 203 controlled by setting which TIFF tags the reader is allowed to recognize,
 204 whether to read fields with unrecognized tags, and whether to ignore all
 205 metadata. The reader is informed to disregard all metadata as usual via the
 206 &lt;code&gt;ignoreMetadata&lt;/code&gt; parameter of
 207 &lt;code&gt;ImageReader.setInput(Object,boolean,boolean)&lt;/code&gt;. It is
 208 informed of which &lt;a href=&quot;../../plugins/tiff/TIFFTag.html&quot;&gt;TIFFTag&lt;/a&gt;s to
 209 recognize or not to recognize via
 210 &lt;code&gt;TIFFImageReadParam.addAllowedTagSet(TIFFTagSet)&lt;/code&gt; and
 211 &lt;code&gt;TIFFImageReadParam.removeAllowedTagSet(TIFFTagSet)&lt;/code&gt;.
 212 If &lt;code&gt;ignoreMetadata&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;, then only metadata
 213 essential to reading the image will be loaded into the native image metadata
 214 object. If &lt;code&gt;ignoreMetadata&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;, then the reader
</pre>
<hr />
<pre>
 218 fields with tags not in the allowed &lt;code&gt;TIFFTagSet&lt;/code&gt;s may be forced
 219 by passing in a &lt;code&gt;TIFFImageReadParam&lt;/code&gt; on which
 220 &lt;code&gt;TIFFImageReadParam.setReadUnknownTags(boolean)&lt;/code&gt; has been
 221 invoked with parameter &lt;code&gt;true&lt;/code&gt;.
 222 
 223 &lt;p&gt;Use of a &lt;a href=&quot;../../plugins/tiff/TIFFDirectory.html&quot;&gt;TIFFDirectory&lt;/a&gt;
 224 object may simplify gaining access to metadata values. An instance of
 225 &lt;code&gt;TIFFDirectory&lt;/code&gt; may be created from the &lt;code&gt;IIOMetadata&lt;/code&gt;
 226 object returned by the TIFF reader using the
 227 &lt;code&gt;TIFFDirectory.createFromMetadata&lt;/code&gt; method.&lt;/p&gt;
 228 
 229 &lt;h4&gt;&lt;a id=&quot;MapNativeStandard&quot;&gt;&lt;/a&gt;
 230 Mapping of TIFF Native Image Metadata to the Standard Metadata Format&lt;/h4&gt;
 231 
 232 The derivation of standard metadata format
 233 &lt;a href=&quot;standard_metadata.html&quot;&gt;javax_imageio_1.0&lt;/a&gt;
 234 elements from &lt;a href=&quot;#ImageMetadata&quot;&gt;TIFF native image metadata&lt;/a&gt; is given
 235 in the following table.
 236 
 237 &lt;table border=&quot;1&quot;&gt;

 238 &lt;tr&gt;
<span class="line-modified"> 239 &lt;th&gt;Standard Metadata Element&lt;/th&gt;</span>
<span class="line-modified"> 240 &lt;th&gt;Derivation from TIFF Fields&lt;/th&gt;</span>

 241 &lt;/tr&gt;


 242 &lt;tr&gt;

 243 &lt;td&gt;/Chroma/ColorSpaceType@name&lt;/td&gt;
 244 &lt;td&gt;PhotometricInterpretation: WhiteIsZero, BlackIsZero, TransparencyMask =
 245 &quot;GRAY&quot;; RGB, PaletteColor =&amp;gt; &quot;RGB&quot;; CMYK =&amp;gt; &quot;CMYK&quot;;
 246 YCbCr =&amp;gt; &quot;YCbCr&quot;;
 247 CIELab, ICCLab =&amp;gt; &quot;Lab&quot;.&lt;/td&gt;
 248 &lt;/tr&gt;
 249 &lt;tr&gt;

 250 &lt;td&gt;/Chroma/NumChannels@value&lt;/td&gt;
 251 &lt;td&gt;SamplesPerPixel&lt;/td&gt;
 252 &lt;/tr&gt;
 253 &lt;tr&gt;

 254 &lt;td&gt;/Chroma/BlackIsZero@value&lt;/td&gt;
 255 &lt;td&gt;&quot;TRUE&quot; &amp;lt;=&amp;gt; PhotometricInterpretation =&amp;gt; WhiteIsZero&lt;/td&gt;
 256 &lt;/tr&gt;
 257 &lt;tr&gt;

 258 &lt;td&gt;/Chroma/Palette&lt;/td&gt;
 259 &lt;td&gt;ColorMap&lt;/td&gt;
 260 &lt;/tr&gt;
 261 &lt;tr&gt;

 262 &lt;td&gt;/Compression/CompressionTypeName@value&lt;/td&gt;
 263 &lt;td&gt;Compression: Uncompressed =&amp;gt; &quot;none&quot;; CCITT 1D =&amp;gt; &quot;CCITT
 264 RLE&quot;;
 265 Group 3 Fax =&amp;gt; &quot;CCITT T.4&quot;; Group 4 Fax =&amp;gt; &quot;CCITT T.6&quot;;
 266 LZW =&amp;gt; &quot;LZW&quot;;
 267 JPEG =&amp;gt; &quot;Old JPEG&quot;; New JPEG =&amp;gt; &quot;JPEG&quot;; Zlib =&amp;gt;&amp;gt; &quot;ZLib&quot;; PackBits =&amp;gt;
 268 &quot;PackBits&quot;;
 269 Deflate =&amp;gt; &quot;Deflate&quot;; Exif JPEG =&amp;gt; &quot;JPEG&quot;.&lt;/td&gt;
 270 &lt;/tr&gt;
 271 &lt;tr&gt;

 272 &lt;td&gt;/Compression/Lossless@value&lt;/td&gt;
 273 &lt;td&gt;Compression: JPEG or New JPEG =&amp;gt; &quot;FALSE&quot;; otherwise &quot;TRUE&quot;.&lt;/td&gt;
 274 &lt;/tr&gt;
 275 &lt;tr&gt;

 276 &lt;td&gt;/Data/PlanarConfiguration@value&lt;/td&gt;
 277 &lt;td&gt;Chunky =&amp;gt; &quot;PixelInterleaved&quot;; Planar =&amp;gt; &quot;PlaneInterleaved&quot;.&lt;/td&gt;
 278 &lt;/tr&gt;
 279 &lt;tr&gt;

 280 &lt;td&gt;/Data/SampleFormat@value&lt;/td&gt;
 281 &lt;td&gt;PhotometricInterpretation PaletteColor =&amp;gt; &quot;Index&quot;;
 282 SampleFormat unsigned integer data =&amp;gt; &quot;UnsignedIntegral&quot;;
 283 SampleFormat two&#39;s complement signed integer data =&amp;gt; &quot;SignedIntegral&quot;;
 284 SampleFormat IEEE floating point data =&amp;gt; &quot;Real&quot;;
 285 otherwise element not emitted.
 286 &lt;/td&gt;
 287 &lt;/tr&gt;
 288 &lt;tr&gt;

 289 &lt;td&gt;/Data/BitsPerSample@value&lt;/td&gt;
 290 &lt;td&gt;BitsPerSample as a space-separated list.&lt;/td&gt;
 291 &lt;/tr&gt;
 292 &lt;tr&gt;

 293 &lt;td&gt;/Data/SampleMSB@value&lt;/td&gt;
 294 &lt;td&gt;FillOrder: left-to-right =&amp;gt; space-separated list of BitsPerSample-1;
 295 right-to-left =&amp;gt; space-separated list of 0s.&lt;/td&gt;
 296 &lt;/tr&gt;
 297 &lt;tr&gt;

 298 &lt;td&gt;/Dimension/PixelAspectRatio@value&lt;/td&gt;
 299 &lt;td&gt;(1/XResolution)/(1/YResolution)&lt;/td&gt;
 300 &lt;/tr&gt;
 301 &lt;tr&gt;

 302 &lt;td&gt;/Dimension/ImageOrientation@value&lt;/td&gt;
 303 &lt;td&gt;Orientation&lt;/td&gt;
 304 &lt;/tr&gt;
 305 &lt;tr&gt;

 306 &lt;td&gt;/Dimension/HorizontalPixelSize@value&lt;/td&gt;
 307 &lt;td&gt;1/XResolution in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 308 &lt;/tr&gt;
 309 &lt;tr&gt;

 310 &lt;td&gt;/Dimension/VerticalPixelSize@value&lt;/td&gt;
 311 &lt;td&gt;1/YResolution in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 312 &lt;/tr&gt;
 313 &lt;tr&gt;

 314 &lt;td&gt;/Dimension/HorizontalPosition@value&lt;/td&gt;
 315 &lt;td&gt;XPosition in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 316 &lt;/tr&gt;
 317 &lt;tr&gt;

 318 &lt;td&gt;/Dimension/VerticalPosition@value&lt;/td&gt;
 319 &lt;td&gt;YPosition in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 320 &lt;/tr&gt;
 321 &lt;tr&gt;

 322 &lt;td&gt;/Document/FormatVersion@value&lt;/td&gt;
 323 &lt;td&gt;6.0&lt;/td&gt;
 324 &lt;/tr&gt;
 325 &lt;tr&gt;

 326 &lt;td&gt;/Document/SubimageInterpretation@value&lt;/td&gt;
 327 &lt;td&gt;NewSubFileType: transparency =&amp;gt; &quot;TransparencyMask&quot;;
 328 reduced-resolution =&amp;gt; &quot;ReducedResolution&quot;;
 329 single page =&amp;gt; &quot;SinglePage&quot;.&lt;/td&gt;
 330 &lt;/tr&gt;
 331 &lt;tr&gt;

 332 &lt;td&gt;/Document/ImageCreationTime@value&lt;/td&gt;
 333 &lt;td&gt;DateTime&lt;/td&gt;
 334 &lt;/tr&gt;
 335 &lt;tr&gt;

 336 &lt;td&gt;/Text/TextEntry&lt;/td&gt;
 337 &lt;td&gt;DocumentName, ImageDescription, Make, Model, PageName, Software,
 338 Artist, HostComputer, InkNames, Copyright:
 339 /Text/TextEntry@keyword = field name,
 340 /Text/TextEntry@value = field value.&lt;br&gt;
 341 Example: TIFF Software field =&amp;gt; /Text/TextEntry@keyword = &quot;Software&quot;,
 342 /Text/TextEntry@value = Name and version number of the software package(s)
 343 used to create the image.&lt;/td&gt;
 344 &lt;/tr&gt;
 345 &lt;tr&gt;

 346 &lt;td&gt;/Transparency/Alpha@value&lt;/td&gt;
 347 &lt;td&gt;ExtraSamples: associated alpha =&amp;gt; &quot;premultiplied&quot;;
 348 unassociated alpha =&amp;gt; &quot;nonpremultiplied&quot;.&lt;/td&gt;
 349 &lt;/tr&gt;

 350 &lt;/table&gt;
 351 
 352 &lt;h3&gt;&lt;a id=&quot;ExifRead&quot;&gt;Reading Exif Images&lt;/a&gt;&lt;/h3&gt;
 353 
 354 The TIFF reader may be used to read an uncompressed Exif image or the
 355 contents of the &lt;code&gt;APP1&lt;/code&gt; marker segment of a compressed Exif image.
 356 
 357 &lt;h4&gt;&lt;a id=&quot;ExifReadTIFF&quot;&gt;Reading Uncompressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 358 
 359 An uncompressed Exif image is a one- or two-page uncompressed TIFF image
 360 with a specific ordering of its IFD and image data content. Each pixel
 361 has three 8-bit samples with photometric interpretation RGB or YCbCr.
 362 The image stream must contain a single primary image and may contain a
 363 single thumbnail which if present must also be uncompressed. The usual
 364 &lt;code&gt;ImageReader&lt;/code&gt; methods may be used to read the image
 365 data and metadata:
 366 
 367 &lt;pre&gt;&lt;code&gt;
 368     ImageInputStream input;
 369     ImageReader tiffReader;
</pre>
<hr />
<pre>
 473 JPEG-in-TIFF compression is being used, and tiles are being written
 474 each tile dimension will be rounded to the nearest multiple of 8 times
 475 the JPEG minimum coded unit (MCU) in that dimension. If JPEG-in-TIFF
 476 compression is being used and strips are being written, the number of
 477 rows per strip is rounded to a multiple of 8 times the maximum MCU over
 478 both dimensions.&lt;/p&gt;
 479 
 480  &lt;!-- &lt;h3&gt;Supported Image Types&lt;/h3&gt; --&gt;
 481 
 482 &lt;!-- Table? --&gt;
 483 
 484 &lt;h3&gt;&lt;a id=&quot;Compression&quot;&gt;Compression&lt;/a&gt;&lt;/h3&gt;
 485 
 486 The compression type may be set via the &lt;code&gt;setCompressionType()&lt;/code&gt; method of
 487 the &lt;code&gt;ImageWriteParam&lt;/code&gt; after setting the compression mode to
 488 &lt;code&gt;MODE_EXPLICIT&lt;/code&gt;. The set of innately
 489 supported compression types is listed in the following table:
 490 
 491 &lt;table border=1&gt;
 492 &lt;caption&gt;&lt;b&gt;Supported Compression Types&lt;/b&gt;&lt;/caption&gt;
<span class="line-modified"> 493 &lt;tr&gt;&lt;th&gt;Compression Type&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Reference&lt;/th&gt;&lt;/tr&gt;</span>
 494 &lt;tr&gt;









 495 &lt;td&gt;CCITT RLE&lt;/td&gt;
 496 &lt;td&gt;Modified Huffman compression&lt;/td&gt;
 497 &lt;td&gt;TIFF 6.0 Specification, Section 10&lt;/td&gt;
 498 &lt;/tr&gt;
 499 &lt;tr&gt;

 500 &lt;td&gt;CCITT T.4&lt;/td&gt;
 501 &lt;td&gt;CCITT T.4 bilevel encoding/Group 3 facsimile compression&lt;/td&gt;
 502 &lt;td&gt;TIFF 6.0 Specification, Section 11&lt;/td&gt;
 503 &lt;/tr&gt;
 504 &lt;tr&gt;

 505 &lt;td&gt;CCITT T.6&lt;/td&gt;
 506 &lt;td&gt;CCITT T.6 bilevel encoding/Group 4 facsimile compression&lt;/td&gt;
 507 &lt;td&gt;TIFF 6.0 Specification, Section 11&lt;/td&gt;&lt;/tr&gt;
 508 &lt;tr&gt;

 509 &lt;td&gt;LZW&lt;/td&gt;
 510 &lt;td&gt;LZW compression&lt;/td&gt;
 511 &lt;td&gt;TIFF 6.0 Specification, Section 13&lt;/td&gt;&lt;/tr&gt;
 512 &lt;tr&gt;

 513 &lt;td&gt;JPEG&lt;/td&gt;
 514 &lt;td&gt;&quot;New&quot; JPEG-in-TIFF compression&lt;/td&gt;
 515 &lt;td&gt;TIFF Technical Note #2&lt;/td&gt;&lt;/tr&gt;
 516 &lt;tr&gt;

 517 &lt;td&gt;ZLib&lt;/td&gt;
 518 &lt;td&gt;&quot;Deflate/Inflate&quot; compression (see note following this table)&lt;/td&gt;
 519 &lt;td&gt;Adobe Photoshop&amp;#174; TIFF Technical Notes&lt;/td&gt;
 520 &lt;/tr&gt;
 521 &lt;tr&gt;

 522 &lt;td&gt;PackBits&lt;/td&gt;
 523 &lt;td&gt;Byte-oriented, run length compression&lt;/td&gt;
 524 &lt;td&gt;TIFF 6.0 Specification, Section 9&lt;/td&gt;
 525 &lt;/tr&gt;
 526 &lt;tr&gt;

 527 &lt;td&gt;Deflate&lt;/td&gt;
 528 &lt;td&gt;&quot;Zip-in-TIFF&quot; compression (see note following this table)&lt;/td&gt;
 529 &lt;td&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc1950&quot;&gt;
 530 ZLIB Compressed Data Format Specification&lt;/a&gt;,
 531 &lt;a href=&quot;https://tools.ietf.org/html/rfc1951&quot;&gt;
 532 DEFLATE Compressed Data Format Specification&lt;/a&gt;&lt;/td&gt;
 533 &lt;/tr&gt;
 534 &lt;tr&gt;

 535 &lt;td&gt;Exif JPEG&lt;/td&gt;
 536 &lt;td&gt;Exif-specific JPEG compression (see note following this table)&lt;/td&gt;
 537 &lt;td&gt;&lt;a href=&quot;http://www.exif.org/Exif2-2.PDF&quot;&gt;Exif 2.2 Specification&lt;/a&gt;
 538 (PDF), section 4.5.5, &quot;Basic Structure of Thumbnail Data&quot;&lt;/td&gt;

 539 &lt;/table&gt;
 540 
 541 &lt;p&gt;
 542 Old-style JPEG compression as described in section 22 of the TIFF 6.0
 543 Specification is &lt;i&gt;not&lt;/i&gt; supported.
 544 &lt;/p&gt;
 545 
 546 &lt;p&gt; The CCITT compression types are applicable to bilevel (1-bit)
 547 images only.  The JPEG compression type is applicable to byte
 548 grayscale (1-band) and RGB (3-band) images only.&lt;/p&gt;
 549 
 550 &lt;p&gt;
 551 ZLib and Deflate compression are identical except for the value of the
 552 TIFF Compression field: for ZLib the Compression field has value 8
 553 whereas for Deflate it has value 32946 (0x80b2). In both cases each
 554 image segment (strip or tile) is written as a single complete zlib data
 555 stream.
 556 &lt;/p&gt;
 557 
 558 &lt;p&gt;
</pre>
<hr />
<pre>
 704 &lt;p&gt;Setting up the image metadata to write to a TIFF stream may be simplified
 705 by using the &lt;code&gt;TIFFDirectory&lt;/code&gt; class
 706 which represents a TIFF IFD. A field in a TIFF IFD is represented by an
 707 instance of &lt;a href=&quot;../../plugins/tiff/TIFFField.html&quot;&gt;TIFFField&lt;/a&gt;. For each
 708 field to be written a &lt;code&gt;TIFFField&lt;/code&gt; may be added to the
 709 &lt;code&gt;TIFFDirectory&lt;/code&gt; and the latter converted to an
 710 &lt;code&gt;IIOMetadata&lt;/code&gt; object by invoking
 711 &lt;code&gt;TIFFDirectory.getAsMetadata&lt;/code&gt;. The
 712 &lt;code&gt;IIOMetadata&lt;/code&gt; object so obtained may then be passed to the TIFF
 713 writer.&lt;/p&gt;
 714 
 715 &lt;h4&gt;&lt;a id=&quot;MapStandardNative&quot;&gt;&lt;/a&gt;
 716 Mapping of the Standard Metadata Format to TIFF Native Image Metadata&lt;/h4&gt;
 717 
 718 The derivation of &lt;a href=&quot;#ImageMetadata&quot;&gt;TIFF native image metadata&lt;/a&gt;
 719 elements from the standard metadata format
 720 &lt;a href=&quot;standard_metadata.html&quot;&gt;javax_imageio_1.0&lt;/a&gt; is
 721 given in the following table.
 722 
 723 &lt;table border=&quot;1&quot;&gt;

 724 &lt;tr&gt;
<span class="line-modified"> 725 &lt;th&gt;TIFF Field&lt;/th&gt;</span>
<span class="line-modified"> 726 &lt;th&gt;Derivation from Standard Metadata Elements&lt;/th&gt;</span>

 727 &lt;/tr&gt;


 728 &lt;tr&gt;

 729 &lt;td&gt;
 730 PhotometricInterpretation
 731 &lt;/td&gt;
 732 &lt;td&gt;/Chroma/ColorSpaceType@name: &quot;GRAY&quot; and /Chroma/BlackIsZero@value = &quot;FALSE&quot;
 733 =&amp;gt; WhiteIsZero; &quot;GRAY&quot; and /Document/SubimageInterpretation@value =
 734 &quot;TransparencyMask&quot; =&amp;gt; TransparencyMask; &quot;RGB&quot; and /Chroma/Palette present =&amp;gt;
 735 PaletteColor; &quot;GRAY&quot; =&amp;gt; BlackIsZero; &quot;RGB&quot; =&amp;gt; RGB; &quot;YCbCr&quot; =&amp;gt; YCbCr;
 736 &quot;CMYK&quot; =&amp;gt; CMYK; &quot;Lab&quot; =&amp;gt; CIELab.&lt;/td&gt;
 737 &lt;/tr&gt;
 738 &lt;tr&gt;

 739 &lt;td&gt;SamplesPerPixel&lt;/td&gt;
 740 &lt;td&gt;/Chroma/NumChannels@value&lt;/td&gt;
 741 &lt;/tr&gt;
 742 &lt;tr&gt;

 743 &lt;td&gt;ColorMap&lt;/td&gt;
 744 &lt;td&gt;/Chroma/Palette&lt;/td&gt;
 745 &lt;/tr&gt;
 746 &lt;tr&gt;

 747 &lt;td&gt;Compression&lt;/td&gt;
 748 &lt;td&gt;/Compression/CompressionTypeName@value: &quot;none&quot; =&amp;gt; Uncompressed;
 749 &quot;CCITT RLE&quot; =&amp;gt; CCITT 1D; &quot;CCITT T.4&quot; =&amp;gt; Group 3 Fax; &quot;CCITT T.6&quot; =&amp;gt; Group 4
 750 Fax; &quot;LZW&quot; =&amp;gt; LZW; &quot;Old JPEG&quot; =&amp;gt; JPEG; &quot;JPEG&quot; =&amp;gt; New JPEG; &quot;ZLib&quot; =&amp;gt; ZLib;
 751 &quot;PackBits&quot; =&amp;gt; PackBits; &quot;Deflate&quot; =&amp;gt; Deflate.&lt;/td&gt;
 752 &lt;/tr&gt;
 753 &lt;tr&gt;

 754 &lt;td&gt;PlanarConfiguration&lt;/td&gt;
 755 &lt;td&gt;/Data/PlanarConfiguration@value: &quot;PixelInterleaved&quot; =&amp;gt; Chunky;
 756 &quot;PlaneInterleaved&quot; =&amp;gt; Planar.&lt;/td&gt;
 757 &lt;/tr&gt;
 758 &lt;tr&gt;

 759 &lt;td&gt;SampleFormat&lt;/td&gt;
 760 &lt;td&gt;/Data/SampleFormat@value: &quot;SignedIntegral&quot; =&amp;gt; two&#39;s complement signed
 761 integer data; &quot;UnsignedIntegral&quot; =&amp;gt; unsigned integer data; &quot;Real&quot; =&amp;gt;
 762 IEEE floating point data; &quot;Index&quot; =&amp;gt; unsigned integer data.
 763 &lt;/td&gt;
 764 &lt;/tr&gt;
 765 &lt;tr&gt;

 766 &lt;td&gt;BitsPerSample&lt;/td&gt;
 767 &lt;td&gt;/Data/BitsPerSample@value: space-separated list parsed to char array.&lt;/td&gt;
 768 &lt;/tr&gt;
 769 &lt;tr&gt;

 770 &lt;td&gt;FillOrder&lt;/td&gt;
 771 &lt;td&gt;/Data/SampleMSB@value: if all values in space-separated list are 0s =&amp;gt;
 772 right-to-left; otherwise =&amp;gt; left-to-right.
 773 &lt;/td&gt;
 774 &lt;/tr&gt;
 775 &lt;tr&gt;

 776 &lt;td&gt;XResolution&lt;/td&gt;
 777 &lt;td&gt;(10 / /Dimension/HorizontalPixelSize@value) or
 778 (10 / (/Dimension/VerticalPixelSize@value *
 779 /Dimension/PixelAspectRatio@value))&lt;/td&gt;
 780 &lt;/tr&gt;
 781 &lt;tr&gt;

 782 &lt;td&gt;YResolution&lt;/td&gt;
 783 &lt;td&gt;(10 / /Dimension/VerticalPixelSize@value) or
 784 (10 / (/Dimension/HorizontalPixelSize@value /
 785 /Dimension/PixelAspectRatio@value))&lt;/td&gt;
 786 &lt;/tr&gt;
 787 &lt;tr&gt;

 788 &lt;td&gt;ResolutionUnit&lt;/td&gt;
 789 &lt;td&gt;Centimeter if XResolution or YResolution set; otherwise None.&lt;/td&gt;
 790 &lt;/tr&gt;
 791 &lt;tr&gt;

 792 &lt;td&gt;Orientation&lt;/td&gt;
 793 &lt;td&gt;/Dimension/ImageOrientation@value&lt;/td&gt;
 794 &lt;/tr&gt;
 795 &lt;tr&gt;

 796 &lt;td&gt;XPosition&lt;/td&gt;
 797 &lt;td&gt;/Dimension/HorizontalPosition@value / 10&lt;/td&gt;
 798 &lt;/tr&gt;
 799 &lt;tr&gt;

 800 &lt;td&gt;YPosition&lt;/td&gt;
 801 &lt;td&gt;/Dimension/VerticalPosition@value / 10&lt;/td&gt;
 802 &lt;/tr&gt;
 803 &lt;tr&gt;

 804 &lt;td&gt;NewSubFileType&lt;/td&gt;
 805 &lt;td&gt;/Document/SubimageInterpretation@value: &quot;TransparencyMask&quot; =&amp;gt;
 806 transparency mask; &quot;ReducedResolution&quot; =&amp;gt; reduced-resolution;
 807 &quot;SinglePage&quot; =&amp;gt; single page.&lt;/td&gt;
 808 &lt;/tr&gt;
 809 &lt;tr&gt;

 810 &lt;td&gt;DateTime&lt;/td&gt;
 811 &lt;td&gt;/Document/ImageCreationTime@value&lt;/td&gt;
 812 &lt;/tr&gt;
 813 &lt;tr&gt;

 814 &lt;td&gt;DocumentName, ImageDescription, Make, Model, PageName, Software,
 815 Artist, HostComputer, InkNames, Copyright&lt;/td&gt;
 816 &lt;td&gt;/Text/TextEntry: if /Text/TextEntry@keyword is the name of any of the
 817 TIFF Fields, e.g., &quot;Software&quot;, then the field is added with content
 818 /Text/TextEntry@value and count 1.&lt;/td&gt;
 819 &lt;/tr&gt;
 820 &lt;tr&gt;

 821 &lt;td&gt;ExtraSamples&lt;/td&gt;
 822 &lt;td&gt;/Transparency/Alpha@value: &quot;premultiplied&quot; =&amp;gt; associated alpha, count 1;
 823 &quot;nonpremultiplied&quot; =&amp;gt; unassociated alpha, count 1.&lt;/td&gt;
 824 &lt;/tr&gt;
<span class="line-modified"> 825 &lt;tr&gt;</span>
<span class="line-removed"> 826 &lt;td&gt;&lt;/td&gt;</span>
<span class="line-removed"> 827 &lt;td&gt;&lt;/td&gt;</span>
<span class="line-removed"> 828 &lt;/tr&gt;</span>
 829 &lt;/table&gt;
 830 
 831 &lt;h3&gt;&lt;a id=&quot;ExifWrite&quot;&gt;Writing Exif Images&lt;/a&gt;&lt;/h3&gt;
 832 
 833 The TIFF writer may be used to write an uncompressed Exif image or the
 834 contents of the &lt;code&gt;APP1&lt;/code&gt; marker segment of a compressed Exif image.
 835 
 836 &lt;h4&gt;&lt;a id=&quot;ExifWriteTIFF&quot;&gt;Writing Uncompressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 837 
 838 When writing a sequence of images each image is normally recorded as
 839 {IFD,&amp;nbsp;IFD Value,&amp;nbsp;Image Data}. The Exif specification requires
 840 that an uncompressed Exif image be structured as follows:
 841 
 842 &lt;a id=&quot;ExifStructure&quot;&gt;&lt;/a&gt;
 843 &lt;ol&gt;
 844 &lt;li&gt;Image File Header&lt;/li&gt;
 845 &lt;li&gt;Primary IFD&lt;/li&gt;
 846 &lt;li&gt;Primary IFD Value&lt;/li&gt;
 847 &lt;li&gt;Thumbnail IFD&lt;/li&gt;
 848 &lt;li&gt;Thumbnail IFD Value&lt;/li&gt;
</pre>
<hr />
<pre>
1156               &amp;lt;!-- Data type: String --&amp;gt;
1157 
1158         &amp;lt;!ELEMENT &quot;TIFFDoubles&quot; (TIFFDouble)*&amp;gt;
1159           &amp;lt;!-- A sequence of TIFFDouble nodes --&amp;gt;
1160 
1161           &amp;lt;!ELEMENT &quot;TIFFDouble&quot; EMPTY&amp;gt;
1162             &amp;lt;!-- A double-precision floating-point value --&amp;gt;
1163             &amp;lt;!ATTLIST &quot;TIFFDouble&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1164               &amp;lt;!-- The value --&amp;gt;
1165               &amp;lt;!-- Data type: String --&amp;gt;
1166 
1167         &amp;lt;!ELEMENT &quot;TIFFUndefined&quot; EMPTY&amp;gt;
1168           &amp;lt;!-- Uninterpreted byte data --&amp;gt;
1169           &amp;lt;!ATTLIST &quot;TIFFUndefined&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1170             &amp;lt;!-- A list of comma-separated byte values --&amp;gt;
1171             &amp;lt;!-- Data type: String --&amp;gt;
1172 ]&amp;gt;
1173 &lt;/pre&gt;
1174 
1175 @since 9

1176 &lt;/main&gt;
1177 &lt;/body&gt;
1178 &lt;/html&gt;
</pre>
</td>
<td>
<hr />
<pre>
   1 &lt;!doctype html&gt;
   2 &lt;html lang=&quot;en&quot;&gt;
   3 &lt;head&gt;
   4     &lt;meta charset=&quot;utf-8&quot;/&gt;
   5     &lt;title&gt;TIFF Metadata Format Specification and Usage Notes&lt;/title&gt;
   6 &lt;/head&gt;
   7 &lt;!--
<span class="line-modified">   8 Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   9 DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  10 
  11 This code is free software; you can redistribute it and/or modify it
  12 under the terms of the GNU General Public License version 2 only, as
  13 published by the Free Software Foundation.  Oracle designates this
  14 particular file as subject to the &quot;Classpath&quot; exception as provided
  15 by Oracle in the LICENSE file that accompanied this code.
  16 
  17 This code is distributed in the hope that it will be useful, but WITHOUT
  18 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  19 FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  20 version 2 for more details (a copy is included in the LICENSE file that
  21 accompanied this code).
  22 
  23 You should have received a copy of the GNU General Public License version
  24 2 along with this work; if not, write to the Free Software Foundation,
  25 Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  26 
  27 Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  28 or visit www.oracle.com if you need additional information or have any
  29 questions.
  30 --&gt;
  31 
  32 &lt;body&gt;
  33 &lt;main role=&quot;main&quot;&gt;
<span class="line-added">  34 &lt;div class=&quot;contentContainer&quot;&gt;</span>
  35 &lt;h1&gt;TIFF Metadata Format Specification and Usage Notes&lt;/h1&gt;
  36 
  37 &lt;a href=&quot;#Reading&quot;&gt;Reading Images&lt;/a&gt;
  38 &lt;ul&gt;
  39 &lt;li&gt;&lt;a href=&quot;#ColorConversionRead&quot;&gt;Color Conversion&lt;/a&gt;&lt;/li&gt;
  40 &lt;li&gt;&lt;a href=&quot;#ColorSpacesRead&quot;&gt;Color Spaces&lt;/a&gt;&lt;/li&gt;
  41 &lt;li&gt;&lt;a href=&quot;#ICCProfilesRead&quot;&gt;ICC Profiles&lt;/a&gt;&lt;/li&gt;
  42 &lt;li&gt;&lt;a href=&quot;#MetadataIssuesRead&quot;&gt;Metadata Issues&lt;/a&gt;
  43 &lt;ul&gt;
  44 &lt;li&gt;&lt;a href=&quot;#MapNativeStandard&quot;&gt;Native to Standard Metadata Mapping&lt;/a&gt;&lt;/li&gt;
  45 &lt;/ul&gt;
  46 &lt;/li&gt;
  47 &lt;li&gt;&lt;a href=&quot;#ExifRead&quot;&gt;Reading Exif Images&lt;/a&gt;
  48 &lt;ul&gt;
  49 &lt;li&gt;&lt;a href=&quot;#ExifReadTIFF&quot;&gt;Reading Uncompressed Exif Images&lt;/a&gt;&lt;/li&gt;
  50 &lt;li&gt;&lt;a href=&quot;#ExifReadJPEG&quot;&gt;Reading Compressed Exif Images&lt;/a&gt;&lt;/li&gt;
  51 &lt;/ul&gt;
  52 &lt;/li&gt;
  53 &lt;/ul&gt;
  54 &lt;a href=&quot;#Writing&quot;&gt;Writing Images&lt;/a&gt;&lt;br/&gt;
</pre>
<hr />
<pre>
 175 &lt;code&gt;ImageReader.getImageMetadata&lt;/code&gt;&lt;/li&gt;
 176 &lt;li&gt;Extract the ICC profile field and its value.&lt;/li&gt;
 177 &lt;li&gt;Create an &lt;a href=&quot;../../../../java/awt/color/ICC_ColorSpace.html&quot;&gt;
 178 ICC_ColorSpace&lt;/a&gt; from an
 179 &lt;a href=&quot;../../../../java/awt/color/ICC_Profile.html&quot;&gt;
 180 ICC_Profile&lt;/a&gt; created from the ICC profile field data
 181 using &lt;code&gt;ICC_Profile.getInstance(byte[])&lt;/code&gt;.&lt;/li&gt;
 182 &lt;li&gt;Create an &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; from the new color
 183 space using one of its factory methods which accepts an
 184 &lt;code&gt;ICC_ColorSpace&lt;/code&gt;.
 185 &lt;li&gt;Create a compatible &lt;a href=&quot;../../ImageReadParam.html&quot;&gt;ImageReadParam&lt;/a&gt;
 186 and set the &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; using
 187 &lt;code&gt;ImageReadParam.setDestinationType&lt;/code&gt;.&lt;/li&gt;
 188 &lt;li&gt;Pass the parameter object to the appropriate &lt;code&gt;read&lt;/code&gt; method.&lt;/li&gt;
 189 &lt;/ol&gt;
 190 
 191 &lt;p&gt;If the inferred color space not based on the ICC Profile field is compatible
 192 with the ICC profile-based color space, then a second
 193 &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; derived from this inferred color
 194 space will be included in the
<span class="line-modified"> 195 {@link java.util.Iterator Iterator} returned by</span>
 196 &lt;code&gt;ImageReader.getImageTypes&lt;/code&gt;. If the iterator contains
 197 more than one type, the first one will be based on the ICC profile and the
 198 second on the inferred color space.&lt;/p&gt;
 199 
 200 &lt;h3&gt;&lt;a id=&quot;MetadataIssuesRead&quot;&gt;Metadata Issues&lt;/a&gt;&lt;/h3&gt;
 201 
 202 By default all recognized fields in the TIFF image file directory (IFD) are
 203 loaded into the native image metadata object. Which fields are loaded may be
 204 controlled by setting which TIFF tags the reader is allowed to recognize,
 205 whether to read fields with unrecognized tags, and whether to ignore all
 206 metadata. The reader is informed to disregard all metadata as usual via the
 207 &lt;code&gt;ignoreMetadata&lt;/code&gt; parameter of
 208 &lt;code&gt;ImageReader.setInput(Object,boolean,boolean)&lt;/code&gt;. It is
 209 informed of which &lt;a href=&quot;../../plugins/tiff/TIFFTag.html&quot;&gt;TIFFTag&lt;/a&gt;s to
 210 recognize or not to recognize via
 211 &lt;code&gt;TIFFImageReadParam.addAllowedTagSet(TIFFTagSet)&lt;/code&gt; and
 212 &lt;code&gt;TIFFImageReadParam.removeAllowedTagSet(TIFFTagSet)&lt;/code&gt;.
 213 If &lt;code&gt;ignoreMetadata&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;, then only metadata
 214 essential to reading the image will be loaded into the native image metadata
 215 object. If &lt;code&gt;ignoreMetadata&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;, then the reader
</pre>
<hr />
<pre>
 219 fields with tags not in the allowed &lt;code&gt;TIFFTagSet&lt;/code&gt;s may be forced
 220 by passing in a &lt;code&gt;TIFFImageReadParam&lt;/code&gt; on which
 221 &lt;code&gt;TIFFImageReadParam.setReadUnknownTags(boolean)&lt;/code&gt; has been
 222 invoked with parameter &lt;code&gt;true&lt;/code&gt;.
 223 
 224 &lt;p&gt;Use of a &lt;a href=&quot;../../plugins/tiff/TIFFDirectory.html&quot;&gt;TIFFDirectory&lt;/a&gt;
 225 object may simplify gaining access to metadata values. An instance of
 226 &lt;code&gt;TIFFDirectory&lt;/code&gt; may be created from the &lt;code&gt;IIOMetadata&lt;/code&gt;
 227 object returned by the TIFF reader using the
 228 &lt;code&gt;TIFFDirectory.createFromMetadata&lt;/code&gt; method.&lt;/p&gt;
 229 
 230 &lt;h4&gt;&lt;a id=&quot;MapNativeStandard&quot;&gt;&lt;/a&gt;
 231 Mapping of TIFF Native Image Metadata to the Standard Metadata Format&lt;/h4&gt;
 232 
 233 The derivation of standard metadata format
 234 &lt;a href=&quot;standard_metadata.html&quot;&gt;javax_imageio_1.0&lt;/a&gt;
 235 elements from &lt;a href=&quot;#ImageMetadata&quot;&gt;TIFF native image metadata&lt;/a&gt; is given
 236 in the following table.
 237 
 238 &lt;table border=&quot;1&quot;&gt;
<span class="line-added"> 239 &lt;thead&gt;</span>
 240 &lt;tr&gt;
<span class="line-modified"> 241 &lt;th scope=&quot;col&quot;&gt;Index&lt;/th&gt;</span>
<span class="line-modified"> 242 &lt;th scope=&quot;col&quot;&gt;Standard Metadata Element&lt;/th&gt;</span>
<span class="line-added"> 243 &lt;th scope=&quot;col&quot;&gt;Derivation from TIFF Fields&lt;/th&gt;</span>
 244 &lt;/tr&gt;
<span class="line-added"> 245 &lt;/thead&gt;</span>
<span class="line-added"> 246 &lt;tbody&gt;</span>
 247 &lt;tr&gt;
<span class="line-added"> 248 &lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;</span>
 249 &lt;td&gt;/Chroma/ColorSpaceType@name&lt;/td&gt;
 250 &lt;td&gt;PhotometricInterpretation: WhiteIsZero, BlackIsZero, TransparencyMask =
 251 &quot;GRAY&quot;; RGB, PaletteColor =&amp;gt; &quot;RGB&quot;; CMYK =&amp;gt; &quot;CMYK&quot;;
 252 YCbCr =&amp;gt; &quot;YCbCr&quot;;
 253 CIELab, ICCLab =&amp;gt; &quot;Lab&quot;.&lt;/td&gt;
 254 &lt;/tr&gt;
 255 &lt;tr&gt;
<span class="line-added"> 256 &lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;</span>
 257 &lt;td&gt;/Chroma/NumChannels@value&lt;/td&gt;
 258 &lt;td&gt;SamplesPerPixel&lt;/td&gt;
 259 &lt;/tr&gt;
 260 &lt;tr&gt;
<span class="line-added"> 261 &lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;</span>
 262 &lt;td&gt;/Chroma/BlackIsZero@value&lt;/td&gt;
 263 &lt;td&gt;&quot;TRUE&quot; &amp;lt;=&amp;gt; PhotometricInterpretation =&amp;gt; WhiteIsZero&lt;/td&gt;
 264 &lt;/tr&gt;
 265 &lt;tr&gt;
<span class="line-added"> 266 &lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;</span>
 267 &lt;td&gt;/Chroma/Palette&lt;/td&gt;
 268 &lt;td&gt;ColorMap&lt;/td&gt;
 269 &lt;/tr&gt;
 270 &lt;tr&gt;
<span class="line-added"> 271 &lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;</span>
 272 &lt;td&gt;/Compression/CompressionTypeName@value&lt;/td&gt;
 273 &lt;td&gt;Compression: Uncompressed =&amp;gt; &quot;none&quot;; CCITT 1D =&amp;gt; &quot;CCITT
 274 RLE&quot;;
 275 Group 3 Fax =&amp;gt; &quot;CCITT T.4&quot;; Group 4 Fax =&amp;gt; &quot;CCITT T.6&quot;;
 276 LZW =&amp;gt; &quot;LZW&quot;;
 277 JPEG =&amp;gt; &quot;Old JPEG&quot;; New JPEG =&amp;gt; &quot;JPEG&quot;; Zlib =&amp;gt;&amp;gt; &quot;ZLib&quot;; PackBits =&amp;gt;
 278 &quot;PackBits&quot;;
 279 Deflate =&amp;gt; &quot;Deflate&quot;; Exif JPEG =&amp;gt; &quot;JPEG&quot;.&lt;/td&gt;
 280 &lt;/tr&gt;
 281 &lt;tr&gt;
<span class="line-added"> 282 &lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;</span>
 283 &lt;td&gt;/Compression/Lossless@value&lt;/td&gt;
 284 &lt;td&gt;Compression: JPEG or New JPEG =&amp;gt; &quot;FALSE&quot;; otherwise &quot;TRUE&quot;.&lt;/td&gt;
 285 &lt;/tr&gt;
 286 &lt;tr&gt;
<span class="line-added"> 287 &lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;</span>
 288 &lt;td&gt;/Data/PlanarConfiguration@value&lt;/td&gt;
 289 &lt;td&gt;Chunky =&amp;gt; &quot;PixelInterleaved&quot;; Planar =&amp;gt; &quot;PlaneInterleaved&quot;.&lt;/td&gt;
 290 &lt;/tr&gt;
 291 &lt;tr&gt;
<span class="line-added"> 292 &lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;</span>
 293 &lt;td&gt;/Data/SampleFormat@value&lt;/td&gt;
 294 &lt;td&gt;PhotometricInterpretation PaletteColor =&amp;gt; &quot;Index&quot;;
 295 SampleFormat unsigned integer data =&amp;gt; &quot;UnsignedIntegral&quot;;
 296 SampleFormat two&#39;s complement signed integer data =&amp;gt; &quot;SignedIntegral&quot;;
 297 SampleFormat IEEE floating point data =&amp;gt; &quot;Real&quot;;
 298 otherwise element not emitted.
 299 &lt;/td&gt;
 300 &lt;/tr&gt;
 301 &lt;tr&gt;
<span class="line-added"> 302 &lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;</span>
 303 &lt;td&gt;/Data/BitsPerSample@value&lt;/td&gt;
 304 &lt;td&gt;BitsPerSample as a space-separated list.&lt;/td&gt;
 305 &lt;/tr&gt;
 306 &lt;tr&gt;
<span class="line-added"> 307 &lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;</span>
 308 &lt;td&gt;/Data/SampleMSB@value&lt;/td&gt;
 309 &lt;td&gt;FillOrder: left-to-right =&amp;gt; space-separated list of BitsPerSample-1;
 310 right-to-left =&amp;gt; space-separated list of 0s.&lt;/td&gt;
 311 &lt;/tr&gt;
 312 &lt;tr&gt;
<span class="line-added"> 313 &lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;</span>
 314 &lt;td&gt;/Dimension/PixelAspectRatio@value&lt;/td&gt;
 315 &lt;td&gt;(1/XResolution)/(1/YResolution)&lt;/td&gt;
 316 &lt;/tr&gt;
 317 &lt;tr&gt;
<span class="line-added"> 318 &lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;</span>
 319 &lt;td&gt;/Dimension/ImageOrientation@value&lt;/td&gt;
 320 &lt;td&gt;Orientation&lt;/td&gt;
 321 &lt;/tr&gt;
 322 &lt;tr&gt;
<span class="line-added"> 323 &lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;</span>
 324 &lt;td&gt;/Dimension/HorizontalPixelSize@value&lt;/td&gt;
 325 &lt;td&gt;1/XResolution in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 326 &lt;/tr&gt;
 327 &lt;tr&gt;
<span class="line-added"> 328 &lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;</span>
 329 &lt;td&gt;/Dimension/VerticalPixelSize@value&lt;/td&gt;
 330 &lt;td&gt;1/YResolution in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 331 &lt;/tr&gt;
 332 &lt;tr&gt;
<span class="line-added"> 333 &lt;th scope=&quot;row&quot;&gt;15&lt;/th&gt;</span>
 334 &lt;td&gt;/Dimension/HorizontalPosition@value&lt;/td&gt;
 335 &lt;td&gt;XPosition in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 336 &lt;/tr&gt;
 337 &lt;tr&gt;
<span class="line-added"> 338 &lt;th scope=&quot;row&quot;&gt;16&lt;/th&gt;</span>
 339 &lt;td&gt;/Dimension/VerticalPosition@value&lt;/td&gt;
 340 &lt;td&gt;YPosition in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 341 &lt;/tr&gt;
 342 &lt;tr&gt;
<span class="line-added"> 343 &lt;th scope=&quot;row&quot;&gt;17&lt;/th&gt;</span>
 344 &lt;td&gt;/Document/FormatVersion@value&lt;/td&gt;
 345 &lt;td&gt;6.0&lt;/td&gt;
 346 &lt;/tr&gt;
 347 &lt;tr&gt;
<span class="line-added"> 348 &lt;th scope=&quot;row&quot;&gt;18&lt;/th&gt;</span>
 349 &lt;td&gt;/Document/SubimageInterpretation@value&lt;/td&gt;
 350 &lt;td&gt;NewSubFileType: transparency =&amp;gt; &quot;TransparencyMask&quot;;
 351 reduced-resolution =&amp;gt; &quot;ReducedResolution&quot;;
 352 single page =&amp;gt; &quot;SinglePage&quot;.&lt;/td&gt;
 353 &lt;/tr&gt;
 354 &lt;tr&gt;
<span class="line-added"> 355 &lt;th scope=&quot;row&quot;&gt;19&lt;/th&gt;</span>
 356 &lt;td&gt;/Document/ImageCreationTime@value&lt;/td&gt;
 357 &lt;td&gt;DateTime&lt;/td&gt;
 358 &lt;/tr&gt;
 359 &lt;tr&gt;
<span class="line-added"> 360 &lt;th scope=&quot;row&quot;&gt;20&lt;/th&gt;</span>
 361 &lt;td&gt;/Text/TextEntry&lt;/td&gt;
 362 &lt;td&gt;DocumentName, ImageDescription, Make, Model, PageName, Software,
 363 Artist, HostComputer, InkNames, Copyright:
 364 /Text/TextEntry@keyword = field name,
 365 /Text/TextEntry@value = field value.&lt;br&gt;
 366 Example: TIFF Software field =&amp;gt; /Text/TextEntry@keyword = &quot;Software&quot;,
 367 /Text/TextEntry@value = Name and version number of the software package(s)
 368 used to create the image.&lt;/td&gt;
 369 &lt;/tr&gt;
 370 &lt;tr&gt;
<span class="line-added"> 371 &lt;th scope=&quot;row&quot;&gt;21&lt;/th&gt;</span>
 372 &lt;td&gt;/Transparency/Alpha@value&lt;/td&gt;
 373 &lt;td&gt;ExtraSamples: associated alpha =&amp;gt; &quot;premultiplied&quot;;
 374 unassociated alpha =&amp;gt; &quot;nonpremultiplied&quot;.&lt;/td&gt;
 375 &lt;/tr&gt;
<span class="line-added"> 376 &lt;/tbody&gt;</span>
 377 &lt;/table&gt;
 378 
 379 &lt;h3&gt;&lt;a id=&quot;ExifRead&quot;&gt;Reading Exif Images&lt;/a&gt;&lt;/h3&gt;
 380 
 381 The TIFF reader may be used to read an uncompressed Exif image or the
 382 contents of the &lt;code&gt;APP1&lt;/code&gt; marker segment of a compressed Exif image.
 383 
 384 &lt;h4&gt;&lt;a id=&quot;ExifReadTIFF&quot;&gt;Reading Uncompressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 385 
 386 An uncompressed Exif image is a one- or two-page uncompressed TIFF image
 387 with a specific ordering of its IFD and image data content. Each pixel
 388 has three 8-bit samples with photometric interpretation RGB or YCbCr.
 389 The image stream must contain a single primary image and may contain a
 390 single thumbnail which if present must also be uncompressed. The usual
 391 &lt;code&gt;ImageReader&lt;/code&gt; methods may be used to read the image
 392 data and metadata:
 393 
 394 &lt;pre&gt;&lt;code&gt;
 395     ImageInputStream input;
 396     ImageReader tiffReader;
</pre>
<hr />
<pre>
 500 JPEG-in-TIFF compression is being used, and tiles are being written
 501 each tile dimension will be rounded to the nearest multiple of 8 times
 502 the JPEG minimum coded unit (MCU) in that dimension. If JPEG-in-TIFF
 503 compression is being used and strips are being written, the number of
 504 rows per strip is rounded to a multiple of 8 times the maximum MCU over
 505 both dimensions.&lt;/p&gt;
 506 
 507  &lt;!-- &lt;h3&gt;Supported Image Types&lt;/h3&gt; --&gt;
 508 
 509 &lt;!-- Table? --&gt;
 510 
 511 &lt;h3&gt;&lt;a id=&quot;Compression&quot;&gt;Compression&lt;/a&gt;&lt;/h3&gt;
 512 
 513 The compression type may be set via the &lt;code&gt;setCompressionType()&lt;/code&gt; method of
 514 the &lt;code&gt;ImageWriteParam&lt;/code&gt; after setting the compression mode to
 515 &lt;code&gt;MODE_EXPLICIT&lt;/code&gt;. The set of innately
 516 supported compression types is listed in the following table:
 517 
 518 &lt;table border=1&gt;
 519 &lt;caption&gt;&lt;b&gt;Supported Compression Types&lt;/b&gt;&lt;/caption&gt;
<span class="line-modified"> 520 &lt;thead&gt;</span>
 521 &lt;tr&gt;
<span class="line-added"> 522   &lt;th scope=&quot;col&quot;&gt;Index&lt;/th&gt;</span>
<span class="line-added"> 523   &lt;th scope=&quot;col&quot;&gt;Compression Type&lt;/th&gt;</span>
<span class="line-added"> 524   &lt;th scope=&quot;col&quot;&gt;Description&lt;/th&gt;</span>
<span class="line-added"> 525   &lt;th scope=&quot;col&quot;&gt;Reference&lt;/th&gt;</span>
<span class="line-added"> 526 &lt;/tr&gt;</span>
<span class="line-added"> 527 &lt;/thead&gt;</span>
<span class="line-added"> 528 &lt;tbody&gt;</span>
<span class="line-added"> 529 &lt;tr&gt;</span>
<span class="line-added"> 530 &lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;</span>
 531 &lt;td&gt;CCITT RLE&lt;/td&gt;
 532 &lt;td&gt;Modified Huffman compression&lt;/td&gt;
 533 &lt;td&gt;TIFF 6.0 Specification, Section 10&lt;/td&gt;
 534 &lt;/tr&gt;
 535 &lt;tr&gt;
<span class="line-added"> 536 &lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;</span>
 537 &lt;td&gt;CCITT T.4&lt;/td&gt;
 538 &lt;td&gt;CCITT T.4 bilevel encoding/Group 3 facsimile compression&lt;/td&gt;
 539 &lt;td&gt;TIFF 6.0 Specification, Section 11&lt;/td&gt;
 540 &lt;/tr&gt;
 541 &lt;tr&gt;
<span class="line-added"> 542 &lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;</span>
 543 &lt;td&gt;CCITT T.6&lt;/td&gt;
 544 &lt;td&gt;CCITT T.6 bilevel encoding/Group 4 facsimile compression&lt;/td&gt;
 545 &lt;td&gt;TIFF 6.0 Specification, Section 11&lt;/td&gt;&lt;/tr&gt;
 546 &lt;tr&gt;
<span class="line-added"> 547 &lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;</span>
 548 &lt;td&gt;LZW&lt;/td&gt;
 549 &lt;td&gt;LZW compression&lt;/td&gt;
 550 &lt;td&gt;TIFF 6.0 Specification, Section 13&lt;/td&gt;&lt;/tr&gt;
 551 &lt;tr&gt;
<span class="line-added"> 552 &lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;</span>
 553 &lt;td&gt;JPEG&lt;/td&gt;
 554 &lt;td&gt;&quot;New&quot; JPEG-in-TIFF compression&lt;/td&gt;
 555 &lt;td&gt;TIFF Technical Note #2&lt;/td&gt;&lt;/tr&gt;
 556 &lt;tr&gt;
<span class="line-added"> 557 &lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;</span>
 558 &lt;td&gt;ZLib&lt;/td&gt;
 559 &lt;td&gt;&quot;Deflate/Inflate&quot; compression (see note following this table)&lt;/td&gt;
 560 &lt;td&gt;Adobe Photoshop&amp;#174; TIFF Technical Notes&lt;/td&gt;
 561 &lt;/tr&gt;
 562 &lt;tr&gt;
<span class="line-added"> 563 &lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;</span>
 564 &lt;td&gt;PackBits&lt;/td&gt;
 565 &lt;td&gt;Byte-oriented, run length compression&lt;/td&gt;
 566 &lt;td&gt;TIFF 6.0 Specification, Section 9&lt;/td&gt;
 567 &lt;/tr&gt;
 568 &lt;tr&gt;
<span class="line-added"> 569 &lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;</span>
 570 &lt;td&gt;Deflate&lt;/td&gt;
 571 &lt;td&gt;&quot;Zip-in-TIFF&quot; compression (see note following this table)&lt;/td&gt;
 572 &lt;td&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc1950&quot;&gt;
 573 ZLIB Compressed Data Format Specification&lt;/a&gt;,
 574 &lt;a href=&quot;https://tools.ietf.org/html/rfc1951&quot;&gt;
 575 DEFLATE Compressed Data Format Specification&lt;/a&gt;&lt;/td&gt;
 576 &lt;/tr&gt;
 577 &lt;tr&gt;
<span class="line-added"> 578 &lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;</span>
 579 &lt;td&gt;Exif JPEG&lt;/td&gt;
 580 &lt;td&gt;Exif-specific JPEG compression (see note following this table)&lt;/td&gt;
 581 &lt;td&gt;&lt;a href=&quot;http://www.exif.org/Exif2-2.PDF&quot;&gt;Exif 2.2 Specification&lt;/a&gt;
 582 (PDF), section 4.5.5, &quot;Basic Structure of Thumbnail Data&quot;&lt;/td&gt;
<span class="line-added"> 583 &lt;/tbody&gt;</span>
 584 &lt;/table&gt;
 585 
 586 &lt;p&gt;
 587 Old-style JPEG compression as described in section 22 of the TIFF 6.0
 588 Specification is &lt;i&gt;not&lt;/i&gt; supported.
 589 &lt;/p&gt;
 590 
 591 &lt;p&gt; The CCITT compression types are applicable to bilevel (1-bit)
 592 images only.  The JPEG compression type is applicable to byte
 593 grayscale (1-band) and RGB (3-band) images only.&lt;/p&gt;
 594 
 595 &lt;p&gt;
 596 ZLib and Deflate compression are identical except for the value of the
 597 TIFF Compression field: for ZLib the Compression field has value 8
 598 whereas for Deflate it has value 32946 (0x80b2). In both cases each
 599 image segment (strip or tile) is written as a single complete zlib data
 600 stream.
 601 &lt;/p&gt;
 602 
 603 &lt;p&gt;
</pre>
<hr />
<pre>
 749 &lt;p&gt;Setting up the image metadata to write to a TIFF stream may be simplified
 750 by using the &lt;code&gt;TIFFDirectory&lt;/code&gt; class
 751 which represents a TIFF IFD. A field in a TIFF IFD is represented by an
 752 instance of &lt;a href=&quot;../../plugins/tiff/TIFFField.html&quot;&gt;TIFFField&lt;/a&gt;. For each
 753 field to be written a &lt;code&gt;TIFFField&lt;/code&gt; may be added to the
 754 &lt;code&gt;TIFFDirectory&lt;/code&gt; and the latter converted to an
 755 &lt;code&gt;IIOMetadata&lt;/code&gt; object by invoking
 756 &lt;code&gt;TIFFDirectory.getAsMetadata&lt;/code&gt;. The
 757 &lt;code&gt;IIOMetadata&lt;/code&gt; object so obtained may then be passed to the TIFF
 758 writer.&lt;/p&gt;
 759 
 760 &lt;h4&gt;&lt;a id=&quot;MapStandardNative&quot;&gt;&lt;/a&gt;
 761 Mapping of the Standard Metadata Format to TIFF Native Image Metadata&lt;/h4&gt;
 762 
 763 The derivation of &lt;a href=&quot;#ImageMetadata&quot;&gt;TIFF native image metadata&lt;/a&gt;
 764 elements from the standard metadata format
 765 &lt;a href=&quot;standard_metadata.html&quot;&gt;javax_imageio_1.0&lt;/a&gt; is
 766 given in the following table.
 767 
 768 &lt;table border=&quot;1&quot;&gt;
<span class="line-added"> 769 &lt;thead&gt;</span>
 770 &lt;tr&gt;
<span class="line-modified"> 771 &lt;th scope=&quot;col&quot;&gt;Index&lt;/th&gt;</span>
<span class="line-modified"> 772 &lt;th scope=&quot;col&quot;&gt;TIFF Field&lt;/th&gt;</span>
<span class="line-added"> 773 &lt;th scope=&quot;col&quot;&gt;Derivation from Standard Metadata Elements&lt;/th&gt;</span>
 774 &lt;/tr&gt;
<span class="line-added"> 775 &lt;/thead&gt;</span>
<span class="line-added"> 776 &lt;tbody&gt;</span>
 777 &lt;tr&gt;
<span class="line-added"> 778 &lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;</span>
 779 &lt;td&gt;
 780 PhotometricInterpretation
 781 &lt;/td&gt;
 782 &lt;td&gt;/Chroma/ColorSpaceType@name: &quot;GRAY&quot; and /Chroma/BlackIsZero@value = &quot;FALSE&quot;
 783 =&amp;gt; WhiteIsZero; &quot;GRAY&quot; and /Document/SubimageInterpretation@value =
 784 &quot;TransparencyMask&quot; =&amp;gt; TransparencyMask; &quot;RGB&quot; and /Chroma/Palette present =&amp;gt;
 785 PaletteColor; &quot;GRAY&quot; =&amp;gt; BlackIsZero; &quot;RGB&quot; =&amp;gt; RGB; &quot;YCbCr&quot; =&amp;gt; YCbCr;
 786 &quot;CMYK&quot; =&amp;gt; CMYK; &quot;Lab&quot; =&amp;gt; CIELab.&lt;/td&gt;
 787 &lt;/tr&gt;
 788 &lt;tr&gt;
<span class="line-added"> 789 &lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;</span>
 790 &lt;td&gt;SamplesPerPixel&lt;/td&gt;
 791 &lt;td&gt;/Chroma/NumChannels@value&lt;/td&gt;
 792 &lt;/tr&gt;
 793 &lt;tr&gt;
<span class="line-added"> 794 &lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;</span>
 795 &lt;td&gt;ColorMap&lt;/td&gt;
 796 &lt;td&gt;/Chroma/Palette&lt;/td&gt;
 797 &lt;/tr&gt;
 798 &lt;tr&gt;
<span class="line-added"> 799 &lt;th scope=&quot;row&quot;&gt;4&lt;/th&gt;</span>
 800 &lt;td&gt;Compression&lt;/td&gt;
 801 &lt;td&gt;/Compression/CompressionTypeName@value: &quot;none&quot; =&amp;gt; Uncompressed;
 802 &quot;CCITT RLE&quot; =&amp;gt; CCITT 1D; &quot;CCITT T.4&quot; =&amp;gt; Group 3 Fax; &quot;CCITT T.6&quot; =&amp;gt; Group 4
 803 Fax; &quot;LZW&quot; =&amp;gt; LZW; &quot;Old JPEG&quot; =&amp;gt; JPEG; &quot;JPEG&quot; =&amp;gt; New JPEG; &quot;ZLib&quot; =&amp;gt; ZLib;
 804 &quot;PackBits&quot; =&amp;gt; PackBits; &quot;Deflate&quot; =&amp;gt; Deflate.&lt;/td&gt;
 805 &lt;/tr&gt;
 806 &lt;tr&gt;
<span class="line-added"> 807 &lt;th scope=&quot;row&quot;&gt;5&lt;/th&gt;</span>
 808 &lt;td&gt;PlanarConfiguration&lt;/td&gt;
 809 &lt;td&gt;/Data/PlanarConfiguration@value: &quot;PixelInterleaved&quot; =&amp;gt; Chunky;
 810 &quot;PlaneInterleaved&quot; =&amp;gt; Planar.&lt;/td&gt;
 811 &lt;/tr&gt;
 812 &lt;tr&gt;
<span class="line-added"> 813 &lt;th scope=&quot;row&quot;&gt;6&lt;/th&gt;</span>
 814 &lt;td&gt;SampleFormat&lt;/td&gt;
 815 &lt;td&gt;/Data/SampleFormat@value: &quot;SignedIntegral&quot; =&amp;gt; two&#39;s complement signed
 816 integer data; &quot;UnsignedIntegral&quot; =&amp;gt; unsigned integer data; &quot;Real&quot; =&amp;gt;
 817 IEEE floating point data; &quot;Index&quot; =&amp;gt; unsigned integer data.
 818 &lt;/td&gt;
 819 &lt;/tr&gt;
 820 &lt;tr&gt;
<span class="line-added"> 821 &lt;th scope=&quot;row&quot;&gt;7&lt;/th&gt;</span>
 822 &lt;td&gt;BitsPerSample&lt;/td&gt;
 823 &lt;td&gt;/Data/BitsPerSample@value: space-separated list parsed to char array.&lt;/td&gt;
 824 &lt;/tr&gt;
 825 &lt;tr&gt;
<span class="line-added"> 826 &lt;th scope=&quot;row&quot;&gt;8&lt;/th&gt;</span>
 827 &lt;td&gt;FillOrder&lt;/td&gt;
 828 &lt;td&gt;/Data/SampleMSB@value: if all values in space-separated list are 0s =&amp;gt;
 829 right-to-left; otherwise =&amp;gt; left-to-right.
 830 &lt;/td&gt;
 831 &lt;/tr&gt;
 832 &lt;tr&gt;
<span class="line-added"> 833 &lt;th scope=&quot;row&quot;&gt;9&lt;/th&gt;</span>
 834 &lt;td&gt;XResolution&lt;/td&gt;
 835 &lt;td&gt;(10 / /Dimension/HorizontalPixelSize@value) or
 836 (10 / (/Dimension/VerticalPixelSize@value *
 837 /Dimension/PixelAspectRatio@value))&lt;/td&gt;
 838 &lt;/tr&gt;
 839 &lt;tr&gt;
<span class="line-added"> 840 &lt;th scope=&quot;row&quot;&gt;10&lt;/th&gt;</span>
 841 &lt;td&gt;YResolution&lt;/td&gt;
 842 &lt;td&gt;(10 / /Dimension/VerticalPixelSize@value) or
 843 (10 / (/Dimension/HorizontalPixelSize@value /
 844 /Dimension/PixelAspectRatio@value))&lt;/td&gt;
 845 &lt;/tr&gt;
 846 &lt;tr&gt;
<span class="line-added"> 847 &lt;th scope=&quot;row&quot;&gt;11&lt;/th&gt;</span>
 848 &lt;td&gt;ResolutionUnit&lt;/td&gt;
 849 &lt;td&gt;Centimeter if XResolution or YResolution set; otherwise None.&lt;/td&gt;
 850 &lt;/tr&gt;
 851 &lt;tr&gt;
<span class="line-added"> 852 &lt;th scope=&quot;row&quot;&gt;12&lt;/th&gt;</span>
 853 &lt;td&gt;Orientation&lt;/td&gt;
 854 &lt;td&gt;/Dimension/ImageOrientation@value&lt;/td&gt;
 855 &lt;/tr&gt;
 856 &lt;tr&gt;
<span class="line-added"> 857 &lt;th scope=&quot;row&quot;&gt;13&lt;/th&gt;</span>
 858 &lt;td&gt;XPosition&lt;/td&gt;
 859 &lt;td&gt;/Dimension/HorizontalPosition@value / 10&lt;/td&gt;
 860 &lt;/tr&gt;
 861 &lt;tr&gt;
<span class="line-added"> 862 &lt;th scope=&quot;row&quot;&gt;14&lt;/th&gt;</span>
 863 &lt;td&gt;YPosition&lt;/td&gt;
 864 &lt;td&gt;/Dimension/VerticalPosition@value / 10&lt;/td&gt;
 865 &lt;/tr&gt;
 866 &lt;tr&gt;
<span class="line-added"> 867 &lt;th scope=&quot;row&quot;&gt;15&lt;/th&gt;</span>
 868 &lt;td&gt;NewSubFileType&lt;/td&gt;
 869 &lt;td&gt;/Document/SubimageInterpretation@value: &quot;TransparencyMask&quot; =&amp;gt;
 870 transparency mask; &quot;ReducedResolution&quot; =&amp;gt; reduced-resolution;
 871 &quot;SinglePage&quot; =&amp;gt; single page.&lt;/td&gt;
 872 &lt;/tr&gt;
 873 &lt;tr&gt;
<span class="line-added"> 874 &lt;th scope=&quot;row&quot;&gt;16&lt;/th&gt;</span>
 875 &lt;td&gt;DateTime&lt;/td&gt;
 876 &lt;td&gt;/Document/ImageCreationTime@value&lt;/td&gt;
 877 &lt;/tr&gt;
 878 &lt;tr&gt;
<span class="line-added"> 879 &lt;th scope=&quot;row&quot;&gt;17&lt;/th&gt;</span>
 880 &lt;td&gt;DocumentName, ImageDescription, Make, Model, PageName, Software,
 881 Artist, HostComputer, InkNames, Copyright&lt;/td&gt;
 882 &lt;td&gt;/Text/TextEntry: if /Text/TextEntry@keyword is the name of any of the
 883 TIFF Fields, e.g., &quot;Software&quot;, then the field is added with content
 884 /Text/TextEntry@value and count 1.&lt;/td&gt;
 885 &lt;/tr&gt;
 886 &lt;tr&gt;
<span class="line-added"> 887 &lt;th scope=&quot;row&quot;&gt;18&lt;/th&gt;</span>
 888 &lt;td&gt;ExtraSamples&lt;/td&gt;
 889 &lt;td&gt;/Transparency/Alpha@value: &quot;premultiplied&quot; =&amp;gt; associated alpha, count 1;
 890 &quot;nonpremultiplied&quot; =&amp;gt; unassociated alpha, count 1.&lt;/td&gt;
 891 &lt;/tr&gt;
<span class="line-modified"> 892 &lt;/tbody&gt;</span>



 893 &lt;/table&gt;
 894 
 895 &lt;h3&gt;&lt;a id=&quot;ExifWrite&quot;&gt;Writing Exif Images&lt;/a&gt;&lt;/h3&gt;
 896 
 897 The TIFF writer may be used to write an uncompressed Exif image or the
 898 contents of the &lt;code&gt;APP1&lt;/code&gt; marker segment of a compressed Exif image.
 899 
 900 &lt;h4&gt;&lt;a id=&quot;ExifWriteTIFF&quot;&gt;Writing Uncompressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 901 
 902 When writing a sequence of images each image is normally recorded as
 903 {IFD,&amp;nbsp;IFD Value,&amp;nbsp;Image Data}. The Exif specification requires
 904 that an uncompressed Exif image be structured as follows:
 905 
 906 &lt;a id=&quot;ExifStructure&quot;&gt;&lt;/a&gt;
 907 &lt;ol&gt;
 908 &lt;li&gt;Image File Header&lt;/li&gt;
 909 &lt;li&gt;Primary IFD&lt;/li&gt;
 910 &lt;li&gt;Primary IFD Value&lt;/li&gt;
 911 &lt;li&gt;Thumbnail IFD&lt;/li&gt;
 912 &lt;li&gt;Thumbnail IFD Value&lt;/li&gt;
</pre>
<hr />
<pre>
1220               &amp;lt;!-- Data type: String --&amp;gt;
1221 
1222         &amp;lt;!ELEMENT &quot;TIFFDoubles&quot; (TIFFDouble)*&amp;gt;
1223           &amp;lt;!-- A sequence of TIFFDouble nodes --&amp;gt;
1224 
1225           &amp;lt;!ELEMENT &quot;TIFFDouble&quot; EMPTY&amp;gt;
1226             &amp;lt;!-- A double-precision floating-point value --&amp;gt;
1227             &amp;lt;!ATTLIST &quot;TIFFDouble&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1228               &amp;lt;!-- The value --&amp;gt;
1229               &amp;lt;!-- Data type: String --&amp;gt;
1230 
1231         &amp;lt;!ELEMENT &quot;TIFFUndefined&quot; EMPTY&amp;gt;
1232           &amp;lt;!-- Uninterpreted byte data --&amp;gt;
1233           &amp;lt;!ATTLIST &quot;TIFFUndefined&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1234             &amp;lt;!-- A list of comma-separated byte values --&amp;gt;
1235             &amp;lt;!-- Data type: String --&amp;gt;
1236 ]&amp;gt;
1237 &lt;/pre&gt;
1238 
1239 @since 9
<span class="line-added">1240 &lt;/div&gt;</span>
1241 &lt;/main&gt;
1242 &lt;/body&gt;
1243 &lt;/html&gt;
</pre>
</td>
</tr>
</table>
<center><a href="standard_metadata.html.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="wbmp_metadata.html.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>