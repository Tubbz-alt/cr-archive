<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/javax/swing/UIManager.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="ToolTipManager.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="plaf/basic/BasicButtonUI.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/javax/swing/UIManager.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  53 import java.util.Vector;
  54 import java.util.Locale;
  55 
  56 import sun.awt.SunToolkit;
  57 import sun.awt.OSInfo;
  58 import sun.security.action.GetPropertyAction;
  59 import sun.swing.SwingUtilities2;
  60 import java.lang.reflect.Method;
  61 import java.util.HashMap;
  62 import java.util.Objects;
  63 import sun.awt.AppContext;
  64 import sun.awt.AWTAccessor;
  65 
  66 
  67 /**
  68  * {@code UIManager} manages the current look and feel, the set of
  69  * available look and feels, {@code PropertyChangeListeners} that
  70  * are notified when the look and feel changes, look and feel defaults, and
  71  * convenience methods for obtaining various default values.
  72  *
<span class="line-modified">  73  * &lt;h3&gt;Specifying the look and feel&lt;/h3&gt;</span>
  74  *
  75  * The look and feel can be specified in two distinct ways: by
  76  * specifying the fully qualified name of the class for the look and
  77  * feel, or by creating an instance of {@code LookAndFeel} and passing
  78  * it to {@code setLookAndFeel}. The following example illustrates
  79  * setting the look and feel to the system look and feel:
  80  * &lt;pre&gt;
  81  *   UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
  82  * &lt;/pre&gt;
  83  * The following example illustrates setting the look and feel based on
  84  * class name:
  85  * &lt;pre&gt;
  86  *   UIManager.setLookAndFeel(&quot;javax.swing.plaf.metal.MetalLookAndFeel&quot;);
  87  * &lt;/pre&gt;
  88  * Once the look and feel has been changed it is imperative to invoke
  89  * {@code updateUI} on all {@code JComponents}. The method {@link
  90  * SwingUtilities#updateComponentTreeUI} makes it easy to apply {@code
  91  * updateUI} to a containment hierarchy. Refer to it for
  92  * details. The exact behavior of not invoking {@code
  93  * updateUI} after changing the look and feel is
  94  * unspecified. It is very possible to receive unexpected exceptions,
  95  * painting problems, or worse.
  96  *
<span class="line-modified">  97  * &lt;h3&gt;Default look and feel&lt;/h3&gt;</span>
  98  *
  99  * The class used for the default look and feel is chosen in the following
 100  * manner:
 101  * &lt;ol&gt;
 102  *   &lt;li&gt;If the system property &lt;code&gt;swing.defaultlaf&lt;/code&gt; is
 103  *       {@code non-null}, use its value as the default look and feel class
 104  *       name.
 105  *   &lt;li&gt;If the {@link java.util.Properties} file &lt;code&gt;swing.properties&lt;/code&gt;
 106  *       exists and contains the key &lt;code&gt;swing.defaultlaf&lt;/code&gt;,
 107  *       use its value as the default look and feel class name. The location
 108  *       that is checked for &lt;code&gt;swing.properties&lt;/code&gt; may vary depending
 109  *       upon the implementation of the Java platform. Typically the
 110  *       &lt;code&gt;swing.properties&lt;/code&gt; file is located in the &lt;code&gt;conf&lt;/code&gt;
 111  *       subdirectory of the Java installation directory.
 112  *       Refer to the release notes of the implementation being used for
 113  *       further details.
 114  *   &lt;li&gt;Otherwise use the cross platform look and feel.
 115  * &lt;/ol&gt;
 116  *
<span class="line-modified"> 117  * &lt;h3&gt;Defaults&lt;/h3&gt;</span>
 118  *
 119  * {@code UIManager} manages three sets of {@code UIDefaults}. In order, they
 120  * are:
 121  * &lt;ol&gt;
 122  *   &lt;li&gt;Developer defaults. With few exceptions Swing does not
 123  *       alter the developer defaults; these are intended to be modified
 124  *       and used by the developer.
 125  *   &lt;li&gt;Look and feel defaults. The look and feel defaults are
 126  *       supplied by the look and feel at the time it is installed as the
 127  *       current look and feel ({@code setLookAndFeel()} is invoked). The
 128  *       look and feel defaults can be obtained using the {@code
 129  *       getLookAndFeelDefaults()} method.
 130  *   &lt;li&gt;System defaults. The system defaults are provided by Swing.
 131  * &lt;/ol&gt;
 132  * Invoking any of the various {@code get} methods
 133  * results in checking each of the defaults, in order, returning
 134  * the first {@code non-null} value. For example, invoking
 135  * {@code UIManager.getString(&quot;Table.foreground&quot;)} results in first
 136  * checking developer defaults. If the developer defaults contain
 137  * a value for {@code &quot;Table.foreground&quot;} it is returned, otherwise
</pre>
<hr />
<pre>
 640      * the name of the default cross platform &lt;code&gt;LookAndFeel&lt;/code&gt;
 641      * class. This value can be overriden by setting the
 642      * &lt;code&gt;swing.systemlaf&lt;/code&gt; system property.
 643      *
 644      * @return the &lt;code&gt;String&lt;/code&gt; of the &lt;code&gt;LookAndFeel&lt;/code&gt;
 645      *          class
 646      *
 647      * @see #setLookAndFeel
 648      * @see #getCrossPlatformLookAndFeelClassName
 649      */
 650     public static String getSystemLookAndFeelClassName() {
 651         String systemLAF = AccessController.doPrivileged(
 652                              new GetPropertyAction(&quot;swing.systemlaf&quot;));
 653         if (systemLAF != null) {
 654             return systemLAF;
 655         }
 656         OSInfo.OSType osType = AccessController.doPrivileged(OSInfo.getOSTypeAction());
 657         if (osType == OSInfo.OSType.WINDOWS) {
 658             return &quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;;
 659         } else {
<span class="line-removed"> 660             String desktop = AccessController.doPrivileged(new GetPropertyAction(&quot;sun.desktop&quot;));</span>
 661             Toolkit toolkit = Toolkit.getDefaultToolkit();
<span class="line-modified"> 662             if (&quot;gnome&quot;.equals(desktop) &amp;&amp;</span>
<span class="line-modified"> 663                     toolkit instanceof SunToolkit &amp;&amp;</span>
<span class="line-modified"> 664                     ((SunToolkit) toolkit).isNativeGTKAvailable()) {</span>
<span class="line-modified"> 665                 // May be set on Linux and Solaris boxs.</span>
<span class="line-modified"> 666                 return &quot;com.sun.java.swing.plaf.gtk.GTKLookAndFeel&quot;;</span>


 667             }
 668             if (osType == OSInfo.OSType.MACOSX) {
 669                 if (toolkit.getClass() .getName()
 670                                        .equals(&quot;sun.lwawt.macosx.LWCToolkit&quot;)) {
 671                     return &quot;com.apple.laf.AquaLookAndFeel&quot;;
 672                 }
 673             }
 674             if (osType == OSInfo.OSType.SOLARIS) {
 675                 return &quot;com.sun.java.swing.plaf.motif.MotifLookAndFeel&quot;;
 676             }
 677         }
 678         return getCrossPlatformLookAndFeelClassName();
 679     }
 680 
 681 
 682     /**
 683      * Returns the name of the &lt;code&gt;LookAndFeel&lt;/code&gt; class that implements
 684      * the default cross platform look and feel -- the Java
 685      * Look and Feel (JLF).  This value can be overriden by setting the
 686      * &lt;code&gt;swing.crossplatformlaf&lt;/code&gt; system property.
</pre>
</td>
<td>
<hr />
<pre>
  53 import java.util.Vector;
  54 import java.util.Locale;
  55 
  56 import sun.awt.SunToolkit;
  57 import sun.awt.OSInfo;
  58 import sun.security.action.GetPropertyAction;
  59 import sun.swing.SwingUtilities2;
  60 import java.lang.reflect.Method;
  61 import java.util.HashMap;
  62 import java.util.Objects;
  63 import sun.awt.AppContext;
  64 import sun.awt.AWTAccessor;
  65 
  66 
  67 /**
  68  * {@code UIManager} manages the current look and feel, the set of
  69  * available look and feels, {@code PropertyChangeListeners} that
  70  * are notified when the look and feel changes, look and feel defaults, and
  71  * convenience methods for obtaining various default values.
  72  *
<span class="line-modified">  73  * &lt;h2&gt;Specifying the look and feel&lt;/h2&gt;</span>
  74  *
  75  * The look and feel can be specified in two distinct ways: by
  76  * specifying the fully qualified name of the class for the look and
  77  * feel, or by creating an instance of {@code LookAndFeel} and passing
  78  * it to {@code setLookAndFeel}. The following example illustrates
  79  * setting the look and feel to the system look and feel:
  80  * &lt;pre&gt;
  81  *   UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
  82  * &lt;/pre&gt;
  83  * The following example illustrates setting the look and feel based on
  84  * class name:
  85  * &lt;pre&gt;
  86  *   UIManager.setLookAndFeel(&quot;javax.swing.plaf.metal.MetalLookAndFeel&quot;);
  87  * &lt;/pre&gt;
  88  * Once the look and feel has been changed it is imperative to invoke
  89  * {@code updateUI} on all {@code JComponents}. The method {@link
  90  * SwingUtilities#updateComponentTreeUI} makes it easy to apply {@code
  91  * updateUI} to a containment hierarchy. Refer to it for
  92  * details. The exact behavior of not invoking {@code
  93  * updateUI} after changing the look and feel is
  94  * unspecified. It is very possible to receive unexpected exceptions,
  95  * painting problems, or worse.
  96  *
<span class="line-modified">  97  * &lt;h2&gt;Default look and feel&lt;/h2&gt;</span>
  98  *
  99  * The class used for the default look and feel is chosen in the following
 100  * manner:
 101  * &lt;ol&gt;
 102  *   &lt;li&gt;If the system property &lt;code&gt;swing.defaultlaf&lt;/code&gt; is
 103  *       {@code non-null}, use its value as the default look and feel class
 104  *       name.
 105  *   &lt;li&gt;If the {@link java.util.Properties} file &lt;code&gt;swing.properties&lt;/code&gt;
 106  *       exists and contains the key &lt;code&gt;swing.defaultlaf&lt;/code&gt;,
 107  *       use its value as the default look and feel class name. The location
 108  *       that is checked for &lt;code&gt;swing.properties&lt;/code&gt; may vary depending
 109  *       upon the implementation of the Java platform. Typically the
 110  *       &lt;code&gt;swing.properties&lt;/code&gt; file is located in the &lt;code&gt;conf&lt;/code&gt;
 111  *       subdirectory of the Java installation directory.
 112  *       Refer to the release notes of the implementation being used for
 113  *       further details.
 114  *   &lt;li&gt;Otherwise use the cross platform look and feel.
 115  * &lt;/ol&gt;
 116  *
<span class="line-modified"> 117  * &lt;h2&gt;Defaults&lt;/h2&gt;</span>
 118  *
 119  * {@code UIManager} manages three sets of {@code UIDefaults}. In order, they
 120  * are:
 121  * &lt;ol&gt;
 122  *   &lt;li&gt;Developer defaults. With few exceptions Swing does not
 123  *       alter the developer defaults; these are intended to be modified
 124  *       and used by the developer.
 125  *   &lt;li&gt;Look and feel defaults. The look and feel defaults are
 126  *       supplied by the look and feel at the time it is installed as the
 127  *       current look and feel ({@code setLookAndFeel()} is invoked). The
 128  *       look and feel defaults can be obtained using the {@code
 129  *       getLookAndFeelDefaults()} method.
 130  *   &lt;li&gt;System defaults. The system defaults are provided by Swing.
 131  * &lt;/ol&gt;
 132  * Invoking any of the various {@code get} methods
 133  * results in checking each of the defaults, in order, returning
 134  * the first {@code non-null} value. For example, invoking
 135  * {@code UIManager.getString(&quot;Table.foreground&quot;)} results in first
 136  * checking developer defaults. If the developer defaults contain
 137  * a value for {@code &quot;Table.foreground&quot;} it is returned, otherwise
</pre>
<hr />
<pre>
 640      * the name of the default cross platform &lt;code&gt;LookAndFeel&lt;/code&gt;
 641      * class. This value can be overriden by setting the
 642      * &lt;code&gt;swing.systemlaf&lt;/code&gt; system property.
 643      *
 644      * @return the &lt;code&gt;String&lt;/code&gt; of the &lt;code&gt;LookAndFeel&lt;/code&gt;
 645      *          class
 646      *
 647      * @see #setLookAndFeel
 648      * @see #getCrossPlatformLookAndFeelClassName
 649      */
 650     public static String getSystemLookAndFeelClassName() {
 651         String systemLAF = AccessController.doPrivileged(
 652                              new GetPropertyAction(&quot;swing.systemlaf&quot;));
 653         if (systemLAF != null) {
 654             return systemLAF;
 655         }
 656         OSInfo.OSType osType = AccessController.doPrivileged(OSInfo.getOSTypeAction());
 657         if (osType == OSInfo.OSType.WINDOWS) {
 658             return &quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;;
 659         } else {

 660             Toolkit toolkit = Toolkit.getDefaultToolkit();
<span class="line-modified"> 661             if (toolkit instanceof SunToolkit) {</span>
<span class="line-modified"> 662                 SunToolkit suntk = (SunToolkit)toolkit;</span>
<span class="line-modified"> 663                 String desktop = suntk.getDesktop();</span>
<span class="line-modified"> 664                 boolean gtkAvailable = suntk.isNativeGTKAvailable();</span>
<span class="line-modified"> 665                 if (&quot;gnome&quot;.equals(desktop) &amp;&amp; gtkAvailable) {</span>
<span class="line-added"> 666                     return &quot;com.sun.java.swing.plaf.gtk.GTKLookAndFeel&quot;;</span>
<span class="line-added"> 667                 }</span>
 668             }
 669             if (osType == OSInfo.OSType.MACOSX) {
 670                 if (toolkit.getClass() .getName()
 671                                        .equals(&quot;sun.lwawt.macosx.LWCToolkit&quot;)) {
 672                     return &quot;com.apple.laf.AquaLookAndFeel&quot;;
 673                 }
 674             }
 675             if (osType == OSInfo.OSType.SOLARIS) {
 676                 return &quot;com.sun.java.swing.plaf.motif.MotifLookAndFeel&quot;;
 677             }
 678         }
 679         return getCrossPlatformLookAndFeelClassName();
 680     }
 681 
 682 
 683     /**
 684      * Returns the name of the &lt;code&gt;LookAndFeel&lt;/code&gt; class that implements
 685      * the default cross platform look and feel -- the Java
 686      * Look and Feel (JLF).  This value can be overriden by setting the
 687      * &lt;code&gt;swing.crossplatformlaf&lt;/code&gt; system property.
</pre>
</td>
</tr>
</table>
<center><a href="ToolTipManager.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="plaf/basic/BasicButtonUI.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>