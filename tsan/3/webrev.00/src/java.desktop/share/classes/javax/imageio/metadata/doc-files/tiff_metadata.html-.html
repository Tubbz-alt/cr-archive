<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/java.desktop/share/classes/javax/imageio/metadata/doc-files/tiff_metadata.html</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 &lt;!doctype html&gt;
   2 &lt;html lang=&quot;en&quot;&gt;
   3 &lt;head&gt;
   4     &lt;meta charset=&quot;utf-8&quot;/&gt;
   5     &lt;title&gt;TIFF Metadata Format Specification and Usage Notes&lt;/title&gt;
   6 &lt;/head&gt;
   7 &lt;!--
   8 Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.
   9 DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  10 
  11 This code is free software; you can redistribute it and/or modify it
  12 under the terms of the GNU General Public License version 2 only, as
  13 published by the Free Software Foundation.  Oracle designates this
  14 particular file as subject to the &quot;Classpath&quot; exception as provided
  15 by Oracle in the LICENSE file that accompanied this code.
  16 
  17 This code is distributed in the hope that it will be useful, but WITHOUT
  18 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  19 FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  20 version 2 for more details (a copy is included in the LICENSE file that
  21 accompanied this code).
  22 
  23 You should have received a copy of the GNU General Public License version
  24 2 along with this work; if not, write to the Free Software Foundation,
  25 Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  26 
  27 Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  28 or visit www.oracle.com if you need additional information or have any
  29 questions.
  30 --&gt;
  31 
  32 &lt;body&gt;
  33 &lt;main role=&quot;main&quot;&gt;
  34 &lt;h1&gt;TIFF Metadata Format Specification and Usage Notes&lt;/h1&gt;
  35 
  36 &lt;a href=&quot;#Reading&quot;&gt;Reading Images&lt;/a&gt;
  37 &lt;ul&gt;
  38 &lt;li&gt;&lt;a href=&quot;#ColorConversionRead&quot;&gt;Color Conversion&lt;/a&gt;&lt;/li&gt;
  39 &lt;li&gt;&lt;a href=&quot;#ColorSpacesRead&quot;&gt;Color Spaces&lt;/a&gt;&lt;/li&gt;
  40 &lt;li&gt;&lt;a href=&quot;#ICCProfilesRead&quot;&gt;ICC Profiles&lt;/a&gt;&lt;/li&gt;
  41 &lt;li&gt;&lt;a href=&quot;#MetadataIssuesRead&quot;&gt;Metadata Issues&lt;/a&gt;
  42 &lt;ul&gt;
  43 &lt;li&gt;&lt;a href=&quot;#MapNativeStandard&quot;&gt;Native to Standard Metadata Mapping&lt;/a&gt;&lt;/li&gt;
  44 &lt;/ul&gt;
  45 &lt;/li&gt;
  46 &lt;li&gt;&lt;a href=&quot;#ExifRead&quot;&gt;Reading Exif Images&lt;/a&gt;
  47 &lt;ul&gt;
  48 &lt;li&gt;&lt;a href=&quot;#ExifReadTIFF&quot;&gt;Reading Uncompressed Exif Images&lt;/a&gt;&lt;/li&gt;
  49 &lt;li&gt;&lt;a href=&quot;#ExifReadJPEG&quot;&gt;Reading Compressed Exif Images&lt;/a&gt;&lt;/li&gt;
  50 &lt;/ul&gt;
  51 &lt;/li&gt;
  52 &lt;/ul&gt;
  53 &lt;a href=&quot;#Writing&quot;&gt;Writing Images&lt;/a&gt;&lt;br/&gt;
  54 &lt;ul&gt;
  55 &lt;li&gt;&lt;a href=&quot;#Compression&quot;&gt;Compression&lt;/a&gt;&lt;/li&gt;
  56 &lt;li&gt;&lt;a href=&quot;#ColorConversionWrite&quot;&gt;Color Conversion&lt;/a&gt;&lt;/li&gt;
  57 &lt;li&gt;&lt;a href=&quot;#ICCProfilesWrite&quot;&gt;ICC Profiles&lt;/a&gt;&lt;/li&gt;
  58 &lt;li&gt;&lt;a href=&quot;#MetadataIssuesWrite&quot;&gt;Metadata Issues&lt;/a&gt;
  59 &lt;ul&gt;
  60 &lt;li&gt;&lt;a href=&quot;#MapStandardNative&quot;&gt;Standard to Native Metadata Mapping&lt;/a&gt;&lt;/li&gt;
  61 &lt;/ul&gt;
  62 &lt;li&gt;&lt;a href=&quot;#ExifWrite&quot;&gt;Writing Exif Images&lt;/a&gt;
  63 &lt;ul&gt;
  64 &lt;li&gt;&lt;a href=&quot;#ExifWriteTIFF&quot;&gt;Writing Uncompressed Exif Images&lt;/a&gt;&lt;/li&gt;
  65 &lt;li&gt;&lt;a href=&quot;#ExifWriteJPEG&quot;&gt;Writing Compressed Exif Images&lt;/a&gt;&lt;/li&gt;
  66 &lt;/ul&gt;
  67 &lt;/li&gt;
  68 &lt;/ul&gt;
  69 &lt;a href=&quot;#StreamMetadata&quot;&gt;Native Stream Metadata Format&lt;/a&gt;&lt;br/&gt;
  70 &lt;a href=&quot;#ImageMetadata&quot;&gt;Native Image Metadata Format&lt;/a&gt;
  71 
  72 &lt;h2&gt;&lt;a id=&quot;Reading&quot;&gt;Reading Images&lt;/a&gt;&lt;/h2&gt;
  73 
  74 TIFF images are read by an &lt;a href=&quot;../../ImageReader.html&quot;&gt;ImageReader&lt;/a&gt;
  75 which may be controlled by its public interface as well as via a supplied
  76 &lt;a href=&quot;../../plugins/tiff/TIFFImageReadParam.html&quot;&gt;TIFFImageReadParam&lt;/a&gt;.
  77 
  78 &lt;!-- &lt;h3&gt;Supported Image Types&lt;/h3&gt; --&gt;
  79 
  80 &lt;!-- Table? --&gt;
  81 
  82 &lt;h3&gt;&lt;a id=&quot;ColorConversionRead&quot;&gt;Color Conversion&lt;/a&gt;&lt;/h3&gt;
  83 
  84 &lt;p&gt;If the source image data
  85 have photometric type CIE L*a*b* or YCbCr, and the destination color space
  86 type is RGB, then the source image data will be automatically converted to
  87 RGB using an internal color converter.&lt;/p&gt;
  88 
  89 &lt;h3&gt;&lt;a id=&quot;ColorSpacesRead&quot;&gt;Color Spaces&lt;/a&gt;&lt;/h3&gt;
  90 
  91 The raw color space assigned by default, i.e., in the absence of a
  92 user-supplied &lt;a href=&quot;../../ImageTypeSpecifier.html&quot;&gt;ImageTypeSpecifier&lt;/a&gt;,
  93 will be the first among the following which applies:
  94 
  95 &lt;ul&gt;
  96 &lt;li&gt;A color space created from the &lt;a href=&quot;#ICCProfilesRead&quot;&gt;ICC Profile&lt;/a&gt;
  97 metadata field if it is present and compatible with the image data
  98 layout.&lt;/li&gt;
  99 &lt;li&gt;&lt;a id=&quot;nonICCProfile&quot;&gt;&lt;/a&gt;sRGB if the image is monochrome/bilevel
 100 (a two-level color map is created internally).&lt;/li&gt;
 101 &lt;li&gt;sRGB if the image is palette-color.&lt;/li&gt;
 102 &lt;li&gt;Linear RGB if the image has three samples per pixel, has photometric type
 103 CIE L*a*b*, or has photometric type YCbCr and is &lt;i&gt;not&lt;/i&gt;
 104 JPEG-compressed.&lt;/li&gt;
 105 &lt;li&gt;A &lt;a href=&quot;#DefaultCMYK&quot;&gt;default CMYK color space&lt;/a&gt; if the image has
 106 photometric type CMYK and four samples per pixel.&lt;/li&gt;
 107 &lt;li&gt;Grayscale if the image has one or two samples per pixel and uniformly
 108 1, 2, 4, 8, 16, or 32 bits per sample or is floating point.&lt;/li&gt;
 109 &lt;li&gt;sRGB if the image has three or four samples per pixel and uniformly
 110 1, 2, 4, 8, 16, or 32 bits per sample or is floating point.&lt;/li&gt;
 111 &lt;li&gt;A fabricated, &lt;a href=&quot;#GenericCS&quot;&gt;generic color space&lt;/a&gt; if the image
 112 has more than four samples per pixel and the number of bits per sample for
 113 all bands is the same and is a multiple of 8.&lt;/li&gt;
 114 &lt;li&gt;Grayscale if the image has one or two samples per pixel regardless of
 115 the number of bits per sample.&lt;/li&gt;
 116 &lt;li&gt;sRGB if the image has three or four samples per pixel regardless of
 117 the number of bits per sample.&lt;/li&gt;
 118 &lt;li&gt;A fabricated, &lt;a href=&quot;#GenericCS&quot;&gt;generic color space&lt;/a&gt; if the image
 119 has more than four samples per pixel regardless of the number of bits per
 120 sample.&lt;/li&gt;
 121 &lt;/ul&gt;
 122 
 123 &lt;p&gt;&lt;a id=&quot;DefaultCMYK&quot;&gt;&lt;/a&gt;The normalized color coordinate transformations
 124 used for the default CMYK color space are defined as follows:
 125 
 126 &lt;ul&gt;
 127 &lt;li&gt;CMYK to linear RGB
 128 &lt;pre&gt;
 129 R = (1 - K)*(1 - C)
 130 G = (1 - K)*(1 - M)
 131 B = (1 - K)*(1 - Y)
 132 &lt;/pre&gt;
 133 &lt;/li&gt;
 134 &lt;li&gt;Linear RGB to CMYK
 135 &lt;pre&gt;
 136 K = min{1 - R, 1 - G, 1 - B}
 137 if(K != 1) {
 138     C = (1 - R - K)/(1 - K)
 139     M = (1 - G - K)/(1 - K)
 140     Y = (1 - B - K)/(1 - K)
 141 } else {
 142     C = M = Y = 0
 143 }
 144 &lt;/pre&gt;
 145 &lt;/li&gt;
 146 &lt;/ul&gt;
 147 
 148 &lt;p&gt;&lt;a id=&quot;GenericCS&quot;&gt;&lt;/a&gt;The generic color space used when no other color space
 149 can be inferred is provided merely to enable the data to be loaded. It is not
 150 intended to provide accurate conversions of any kind.&lt;/p&gt;
 151 
 152 &lt;p&gt;If the data are known to be in a color space not correctly handled by the
 153 foregoing, then an &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; should be
 154 supplied to the reader and should be derived from a color space which is correct
 155 for the data in question.&lt;/p&gt;
 156 
 157 &lt;h3&gt;&lt;a id=&quot;ICCProfilesRead&quot;&gt;ICC Profiles&lt;/a&gt;&lt;/h3&gt;
 158 
 159 If an ICC profile is contained in the image metadata
 160 (&lt;a href=&quot;../../plugins/tiff/BaselineTIFFTagSet.html&quot;&gt;
 161 BaselineTIFFTagSet&lt;/a&gt;.TAG_ICC_PROFILE, tag number 34675),
 162 an attempt will be made to use it to create the color space
 163 of the loaded image. It will be used if the data layout is of component type
 164 and the number of samples per pixel equals or is one greater than the number
 165 of components described by the ICC profile. If the ICC profile is not used
 166 then the color space will be inferred in one of the subsequent steps described
 167 &lt;a href=&quot;#nonICCProfile&quot;&gt;above&lt;/a&gt;.
 168 
 169 &lt;p&gt;If for some reason the embedded ICC profile is not used automatically, then
 170 it may be used manually by following this procedure:
 171 
 172 &lt;ol&gt;
 173 &lt;li&gt;Obtain the image metadata from
 174 &lt;code&gt;ImageReader.getImageMetadata&lt;/code&gt;&lt;/li&gt;
 175 &lt;li&gt;Extract the ICC profile field and its value.&lt;/li&gt;
 176 &lt;li&gt;Create an &lt;a href=&quot;../../../../java/awt/color/ICC_ColorSpace.html&quot;&gt;
 177 ICC_ColorSpace&lt;/a&gt; from an
 178 &lt;a href=&quot;../../../../java/awt/color/ICC_Profile.html&quot;&gt;
 179 ICC_Profile&lt;/a&gt; created from the ICC profile field data
 180 using &lt;code&gt;ICC_Profile.getInstance(byte[])&lt;/code&gt;.&lt;/li&gt;
 181 &lt;li&gt;Create an &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; from the new color
 182 space using one of its factory methods which accepts an
 183 &lt;code&gt;ICC_ColorSpace&lt;/code&gt;.
 184 &lt;li&gt;Create a compatible &lt;a href=&quot;../../ImageReadParam.html&quot;&gt;ImageReadParam&lt;/a&gt;
 185 and set the &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; using
 186 &lt;code&gt;ImageReadParam.setDestinationType&lt;/code&gt;.&lt;/li&gt;
 187 &lt;li&gt;Pass the parameter object to the appropriate &lt;code&gt;read&lt;/code&gt; method.&lt;/li&gt;
 188 &lt;/ol&gt;
 189 
 190 &lt;p&gt;If the inferred color space not based on the ICC Profile field is compatible
 191 with the ICC profile-based color space, then a second
 192 &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; derived from this inferred color
 193 space will be included in the
 194 &lt;a href=&quot;../../../../java/util/Iterator.html&quot;&gt;Iterator&lt;/a&gt; returned by
 195 &lt;code&gt;ImageReader.getImageTypes&lt;/code&gt;. If the iterator contains
 196 more than one type, the first one will be based on the ICC profile and the
 197 second on the inferred color space.&lt;/p&gt;
 198 
 199 &lt;h3&gt;&lt;a id=&quot;MetadataIssuesRead&quot;&gt;Metadata Issues&lt;/a&gt;&lt;/h3&gt;
 200 
 201 By default all recognized fields in the TIFF image file directory (IFD) are
 202 loaded into the native image metadata object. Which fields are loaded may be
 203 controlled by setting which TIFF tags the reader is allowed to recognize,
 204 whether to read fields with unrecognized tags, and whether to ignore all
 205 metadata. The reader is informed to disregard all metadata as usual via the
 206 &lt;code&gt;ignoreMetadata&lt;/code&gt; parameter of
 207 &lt;code&gt;ImageReader.setInput(Object,boolean,boolean)&lt;/code&gt;. It is
 208 informed of which &lt;a href=&quot;../../plugins/tiff/TIFFTag.html&quot;&gt;TIFFTag&lt;/a&gt;s to
 209 recognize or not to recognize via
 210 &lt;code&gt;TIFFImageReadParam.addAllowedTagSet(TIFFTagSet)&lt;/code&gt; and
 211 &lt;code&gt;TIFFImageReadParam.removeAllowedTagSet(TIFFTagSet)&lt;/code&gt;.
 212 If &lt;code&gt;ignoreMetadata&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;, then only metadata
 213 essential to reading the image will be loaded into the native image metadata
 214 object. If &lt;code&gt;ignoreMetadata&lt;/code&gt; is &lt;code&gt;false&lt;/code&gt;, then the reader
 215 will by default load into the native image metadata object only those fields
 216 which are either essential to reading the image or have a &lt;code&gt;TIFFTag&lt;/code&gt;
 217 contained in the one of the allowed &lt;code&gt;TIFFTagSet&lt;/code&gt;s. Reading of
 218 fields with tags not in the allowed &lt;code&gt;TIFFTagSet&lt;/code&gt;s may be forced
 219 by passing in a &lt;code&gt;TIFFImageReadParam&lt;/code&gt; on which
 220 &lt;code&gt;TIFFImageReadParam.setReadUnknownTags(boolean)&lt;/code&gt; has been
 221 invoked with parameter &lt;code&gt;true&lt;/code&gt;.
 222 
 223 &lt;p&gt;Use of a &lt;a href=&quot;../../plugins/tiff/TIFFDirectory.html&quot;&gt;TIFFDirectory&lt;/a&gt;
 224 object may simplify gaining access to metadata values. An instance of
 225 &lt;code&gt;TIFFDirectory&lt;/code&gt; may be created from the &lt;code&gt;IIOMetadata&lt;/code&gt;
 226 object returned by the TIFF reader using the
 227 &lt;code&gt;TIFFDirectory.createFromMetadata&lt;/code&gt; method.&lt;/p&gt;
 228 
 229 &lt;h4&gt;&lt;a id=&quot;MapNativeStandard&quot;&gt;&lt;/a&gt;
 230 Mapping of TIFF Native Image Metadata to the Standard Metadata Format&lt;/h4&gt;
 231 
 232 The derivation of standard metadata format
 233 &lt;a href=&quot;standard_metadata.html&quot;&gt;javax_imageio_1.0&lt;/a&gt;
 234 elements from &lt;a href=&quot;#ImageMetadata&quot;&gt;TIFF native image metadata&lt;/a&gt; is given
 235 in the following table.
 236 
 237 &lt;table border=&quot;1&quot;&gt;
 238 &lt;tr&gt;
 239 &lt;th&gt;Standard Metadata Element&lt;/th&gt;
 240 &lt;th&gt;Derivation from TIFF Fields&lt;/th&gt;
 241 &lt;/tr&gt;
 242 &lt;tr&gt;
 243 &lt;td&gt;/Chroma/ColorSpaceType@name&lt;/td&gt;
 244 &lt;td&gt;PhotometricInterpretation: WhiteIsZero, BlackIsZero, TransparencyMask =
 245 &quot;GRAY&quot;; RGB, PaletteColor =&amp;gt; &quot;RGB&quot;; CMYK =&amp;gt; &quot;CMYK&quot;;
 246 YCbCr =&amp;gt; &quot;YCbCr&quot;;
 247 CIELab, ICCLab =&amp;gt; &quot;Lab&quot;.&lt;/td&gt;
 248 &lt;/tr&gt;
 249 &lt;tr&gt;
 250 &lt;td&gt;/Chroma/NumChannels@value&lt;/td&gt;
 251 &lt;td&gt;SamplesPerPixel&lt;/td&gt;
 252 &lt;/tr&gt;
 253 &lt;tr&gt;
 254 &lt;td&gt;/Chroma/BlackIsZero@value&lt;/td&gt;
 255 &lt;td&gt;&quot;TRUE&quot; &amp;lt;=&amp;gt; PhotometricInterpretation =&amp;gt; WhiteIsZero&lt;/td&gt;
 256 &lt;/tr&gt;
 257 &lt;tr&gt;
 258 &lt;td&gt;/Chroma/Palette&lt;/td&gt;
 259 &lt;td&gt;ColorMap&lt;/td&gt;
 260 &lt;/tr&gt;
 261 &lt;tr&gt;
 262 &lt;td&gt;/Compression/CompressionTypeName@value&lt;/td&gt;
 263 &lt;td&gt;Compression: Uncompressed =&amp;gt; &quot;none&quot;; CCITT 1D =&amp;gt; &quot;CCITT
 264 RLE&quot;;
 265 Group 3 Fax =&amp;gt; &quot;CCITT T.4&quot;; Group 4 Fax =&amp;gt; &quot;CCITT T.6&quot;;
 266 LZW =&amp;gt; &quot;LZW&quot;;
 267 JPEG =&amp;gt; &quot;Old JPEG&quot;; New JPEG =&amp;gt; &quot;JPEG&quot;; Zlib =&amp;gt;&amp;gt; &quot;ZLib&quot;; PackBits =&amp;gt;
 268 &quot;PackBits&quot;;
 269 Deflate =&amp;gt; &quot;Deflate&quot;; Exif JPEG =&amp;gt; &quot;JPEG&quot;.&lt;/td&gt;
 270 &lt;/tr&gt;
 271 &lt;tr&gt;
 272 &lt;td&gt;/Compression/Lossless@value&lt;/td&gt;
 273 &lt;td&gt;Compression: JPEG or New JPEG =&amp;gt; &quot;FALSE&quot;; otherwise &quot;TRUE&quot;.&lt;/td&gt;
 274 &lt;/tr&gt;
 275 &lt;tr&gt;
 276 &lt;td&gt;/Data/PlanarConfiguration@value&lt;/td&gt;
 277 &lt;td&gt;Chunky =&amp;gt; &quot;PixelInterleaved&quot;; Planar =&amp;gt; &quot;PlaneInterleaved&quot;.&lt;/td&gt;
 278 &lt;/tr&gt;
 279 &lt;tr&gt;
 280 &lt;td&gt;/Data/SampleFormat@value&lt;/td&gt;
 281 &lt;td&gt;PhotometricInterpretation PaletteColor =&amp;gt; &quot;Index&quot;;
 282 SampleFormat unsigned integer data =&amp;gt; &quot;UnsignedIntegral&quot;;
 283 SampleFormat two&#39;s complement signed integer data =&amp;gt; &quot;SignedIntegral&quot;;
 284 SampleFormat IEEE floating point data =&amp;gt; &quot;Real&quot;;
 285 otherwise element not emitted.
 286 &lt;/td&gt;
 287 &lt;/tr&gt;
 288 &lt;tr&gt;
 289 &lt;td&gt;/Data/BitsPerSample@value&lt;/td&gt;
 290 &lt;td&gt;BitsPerSample as a space-separated list.&lt;/td&gt;
 291 &lt;/tr&gt;
 292 &lt;tr&gt;
 293 &lt;td&gt;/Data/SampleMSB@value&lt;/td&gt;
 294 &lt;td&gt;FillOrder: left-to-right =&amp;gt; space-separated list of BitsPerSample-1;
 295 right-to-left =&amp;gt; space-separated list of 0s.&lt;/td&gt;
 296 &lt;/tr&gt;
 297 &lt;tr&gt;
 298 &lt;td&gt;/Dimension/PixelAspectRatio@value&lt;/td&gt;
 299 &lt;td&gt;(1/XResolution)/(1/YResolution)&lt;/td&gt;
 300 &lt;/tr&gt;
 301 &lt;tr&gt;
 302 &lt;td&gt;/Dimension/ImageOrientation@value&lt;/td&gt;
 303 &lt;td&gt;Orientation&lt;/td&gt;
 304 &lt;/tr&gt;
 305 &lt;tr&gt;
 306 &lt;td&gt;/Dimension/HorizontalPixelSize@value&lt;/td&gt;
 307 &lt;td&gt;1/XResolution in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 308 &lt;/tr&gt;
 309 &lt;tr&gt;
 310 &lt;td&gt;/Dimension/VerticalPixelSize@value&lt;/td&gt;
 311 &lt;td&gt;1/YResolution in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 312 &lt;/tr&gt;
 313 &lt;tr&gt;
 314 &lt;td&gt;/Dimension/HorizontalPosition@value&lt;/td&gt;
 315 &lt;td&gt;XPosition in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 316 &lt;/tr&gt;
 317 &lt;tr&gt;
 318 &lt;td&gt;/Dimension/VerticalPosition@value&lt;/td&gt;
 319 &lt;td&gt;YPosition in millimeters if ResolutionUnit is not None.&lt;/td&gt;
 320 &lt;/tr&gt;
 321 &lt;tr&gt;
 322 &lt;td&gt;/Document/FormatVersion@value&lt;/td&gt;
 323 &lt;td&gt;6.0&lt;/td&gt;
 324 &lt;/tr&gt;
 325 &lt;tr&gt;
 326 &lt;td&gt;/Document/SubimageInterpretation@value&lt;/td&gt;
 327 &lt;td&gt;NewSubFileType: transparency =&amp;gt; &quot;TransparencyMask&quot;;
 328 reduced-resolution =&amp;gt; &quot;ReducedResolution&quot;;
 329 single page =&amp;gt; &quot;SinglePage&quot;.&lt;/td&gt;
 330 &lt;/tr&gt;
 331 &lt;tr&gt;
 332 &lt;td&gt;/Document/ImageCreationTime@value&lt;/td&gt;
 333 &lt;td&gt;DateTime&lt;/td&gt;
 334 &lt;/tr&gt;
 335 &lt;tr&gt;
 336 &lt;td&gt;/Text/TextEntry&lt;/td&gt;
 337 &lt;td&gt;DocumentName, ImageDescription, Make, Model, PageName, Software,
 338 Artist, HostComputer, InkNames, Copyright:
 339 /Text/TextEntry@keyword = field name,
 340 /Text/TextEntry@value = field value.&lt;br&gt;
 341 Example: TIFF Software field =&amp;gt; /Text/TextEntry@keyword = &quot;Software&quot;,
 342 /Text/TextEntry@value = Name and version number of the software package(s)
 343 used to create the image.&lt;/td&gt;
 344 &lt;/tr&gt;
 345 &lt;tr&gt;
 346 &lt;td&gt;/Transparency/Alpha@value&lt;/td&gt;
 347 &lt;td&gt;ExtraSamples: associated alpha =&amp;gt; &quot;premultiplied&quot;;
 348 unassociated alpha =&amp;gt; &quot;nonpremultiplied&quot;.&lt;/td&gt;
 349 &lt;/tr&gt;
 350 &lt;/table&gt;
 351 
 352 &lt;h3&gt;&lt;a id=&quot;ExifRead&quot;&gt;Reading Exif Images&lt;/a&gt;&lt;/h3&gt;
 353 
 354 The TIFF reader may be used to read an uncompressed Exif image or the
 355 contents of the &lt;code&gt;APP1&lt;/code&gt; marker segment of a compressed Exif image.
 356 
 357 &lt;h4&gt;&lt;a id=&quot;ExifReadTIFF&quot;&gt;Reading Uncompressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 358 
 359 An uncompressed Exif image is a one- or two-page uncompressed TIFF image
 360 with a specific ordering of its IFD and image data content. Each pixel
 361 has three 8-bit samples with photometric interpretation RGB or YCbCr.
 362 The image stream must contain a single primary image and may contain a
 363 single thumbnail which if present must also be uncompressed. The usual
 364 &lt;code&gt;ImageReader&lt;/code&gt; methods may be used to read the image
 365 data and metadata:
 366 
 367 &lt;pre&gt;&lt;code&gt;
 368     ImageInputStream input;
 369     ImageReader tiffReader;
 370     ImageReadParam tiffReadParam;
 371 
 372     tiffReader.setInput(input);
 373 
 374     // Read primary image and IFD.
 375     BufferedImage image = tiffReader.read(0, tiffReadParam);
 376     IIOMetadata primaryIFD = tiffReader.getImageMetadata(0);
 377 
 378     // Read thumbnail if present.
 379     BufferedImage thumbnail = null;
 380     if (tiffReader.getNumImages(true) &gt; 1) {
 381         thumbnail = tiffReader.read(1, tiffReadParam);
 382     }
 383 &lt;/code&gt;&lt;/pre&gt;
 384 
 385 Note that the Exif thumbnail is treated as a separate page in the TIFF
 386 stream and not as a thumbnail, i.e.,
 387 &lt;code&gt;tiffReader.hasThumbnails(0)&lt;/code&gt; will return &lt;code&gt;false&lt;/code&gt;.
 388 
 389 &lt;h4&gt;&lt;a id=&quot;ExifReadJPEG&quot;&gt;Reading Compressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 390 
 391 A compressed Exif image is a 3-band ISO/IEC 10918-1 baseline DCT JPEG stream
 392 with an inserted &lt;code&gt;APP1&lt;/code&gt; marker segment. The parameters of the marker
 393 segment after the length are the 6-byte sequence
 394 &lt;code&gt;{&#39;E&#39;,&amp;nbsp;&#39;x&#39;,&amp;nbsp;&#39;i&#39;,&amp;nbsp;&#39;f&#39;,&amp;nbsp;0x00,&amp;nbsp;0x00}&lt;/code&gt;
 395 followed by a complete TIFF stream. The embedded TIFF stream contains a primary
 396 IFD describing the JPEG image optionally followed by a thumbnail IFD and
 397 compressed or uncompressed thumbnail image data. Note that the embedded TIFF
 398 stream does not contain any image data associated with the primary IFD
 399 nor any descriptive fields which duplicate information found in the JPEG
 400 stream itself.
 401 
 402 &lt;p&gt;The parameter content of the &lt;code&gt;APP1&lt;/code&gt; marker segment may be obtained
 403 from the user object of the associated &lt;code&gt;Node&lt;/code&gt; in a
 404 &lt;code&gt;javax_imageio_jpeg_image_1.0&lt;/code&gt; native image metadata tree extracted
 405 from the image metadata object returned by the JPEG reader. This APP1 Exif
 406 node will be a child of the node named &quot;markerSequence&quot; and will
 407 have name &lt;code&gt;unknown&lt;/code&gt; and an attribute named &lt;code&gt;MarkerTag&lt;/code&gt; with
 408 integral value &lt;code&gt;0xE1&lt;/code&gt; (&lt;code&gt;String&lt;/code&gt; value
 409 &lt;code&gt;&quot;225&quot;&lt;/code&gt;). The user object of this node will be a byte array
 410 which starts with the six bytes &lt;code&gt;{&#39;E&#39;, &#39;x&#39;, &#39;i&#39;, &#39;f&#39;, &#39;0&#39;, &#39;0&#39;}&lt;/code&gt;.
 411 The primary IFD and the thumbnail IFD and image may be
 412 read from the user object by the usual &lt;code&gt;ImageReader&lt;/code&gt;
 413 methods:
 414 
 415 &lt;pre&gt;&lt;code&gt;
 416     ImageReader jpegReader;
 417     ImageReader tiffReader;
 418 
 419     // Obtain the APP1 Exif marker data from the JPEG image metadata.
 420     IIOMetadata jpegImageMetadata = jpegReader.getImageMetadata(0);
 421     String nativeFormat = jpegImageMetadata.getNativeMetadataFormatName();
 422     Node jpegImageMetadataTree = jpegImageMetadata.getAsTree(nativeFormat);
 423 
 424     // getExifMarkerData() returns the byte array which is the user object
 425     // of the APP1 Exif marker node.
 426     byte[] app1Params = getExifMarkerData(jpegImageMetadataTree);
 427     if (app1Params == null) {
 428         throw new IIOException(&quot;APP1 Exif marker not found.&quot;);
 429     }
 430 
 431     // Set up input, skipping Exif ID 6-byte sequence.
 432     MemoryCacheImageInputStream app1ExifInput
 433         = new MemoryCacheImageInputStream
 434             (new ByteArrayInputStream(app1Params, 6, app1Params.length - 6));
 435     tiffReader.setInput(app1ExifInput);
 436 
 437     // Read primary IFD.
 438     IIOMetadata primaryIFD = tiffReader.getImageMetadata(0);
 439 
 440     // Read thumbnail if present.
 441     BufferedImage thumbnail = null;
 442     if (tiffReader.getNumImages(true) &gt; 1) {
 443         thumbnail = tiffReader.read(1, tiffReadParam);
 444     }
 445 
 446     // Read the primary image.
 447     BufferedImage image = jpegReader.read(0);
 448 &lt;/code&gt;&lt;/pre&gt;
 449 
 450 Note that &lt;code&gt;tiffReader.getNumImages(true)&lt;/code&gt; returns the number of
 451 IFDs in the embedded TIFF stream including those corresponding to empty
 452 images. Calling &lt;code&gt;tiffReader.read(0,&amp;nbsp;readParam)&lt;/code&gt; will throw
 453 an exception as the primary image in the embedded TIFF stream is always
 454 empty; the primary image should be obtained using the JPEG reader itself.
 455 
 456 &lt;h2&gt;&lt;a id=&quot;Writing&quot;&gt;Writing Images&lt;/a&gt;&lt;/h2&gt;
 457 
 458 TIFF images are written by a &lt;a href=&quot;../../ImageWriter.html&quot;&gt;ImageWriter&lt;/a&gt; which may be
 459 controlled by its public interface as well as via a supplied
 460 &lt;a href=&quot;../../ImageWriteParam.html&quot;&gt;ImageWriteParam&lt;/a&gt;.  For an &lt;code&gt;ImageWriteParam&lt;/code&gt; returned
 461 by the &lt;code&gt;getDefaultWriteParam()&lt;/code&gt; method of the TIFF &lt;code&gt;ImageWriter&lt;/code&gt;,
 462 the &lt;code&gt;canWriteTiles()&lt;/code&gt; and &lt;code&gt;canWriteCompressed()&lt;/code&gt; methods
 463 will return &lt;code&gt;true&lt;/code&gt;; the &lt;code&gt;canOffsetTiles()&lt;/code&gt; and
 464 &lt;code&gt;canWriteProgressive()&lt;/code&gt; methods will return &lt;code&gt;false&lt;/code&gt;.
 465 
 466 The TIFF writer supports many optional capabilities including writing tiled
 467 images, inserting images, writing or inserting empty images, and replacing image
 468 data. Pixels may be replaced in either empty or non-empty images but if and
 469 only if the data are not compressed.
 470 
 471 &lt;p&gt; If tiles are being written, then each of their dimensions will be
 472 rounded to the nearest multiple of 16 per the TIFF specification. If
 473 JPEG-in-TIFF compression is being used, and tiles are being written
 474 each tile dimension will be rounded to the nearest multiple of 8 times
 475 the JPEG minimum coded unit (MCU) in that dimension. If JPEG-in-TIFF
 476 compression is being used and strips are being written, the number of
 477 rows per strip is rounded to a multiple of 8 times the maximum MCU over
 478 both dimensions.&lt;/p&gt;
 479 
 480  &lt;!-- &lt;h3&gt;Supported Image Types&lt;/h3&gt; --&gt;
 481 
 482 &lt;!-- Table? --&gt;
 483 
 484 &lt;h3&gt;&lt;a id=&quot;Compression&quot;&gt;Compression&lt;/a&gt;&lt;/h3&gt;
 485 
 486 The compression type may be set via the &lt;code&gt;setCompressionType()&lt;/code&gt; method of
 487 the &lt;code&gt;ImageWriteParam&lt;/code&gt; after setting the compression mode to
 488 &lt;code&gt;MODE_EXPLICIT&lt;/code&gt;. The set of innately
 489 supported compression types is listed in the following table:
 490 
 491 &lt;table border=1&gt;
 492 &lt;caption&gt;&lt;b&gt;Supported Compression Types&lt;/b&gt;&lt;/caption&gt;
 493 &lt;tr&gt;&lt;th&gt;Compression Type&lt;/th&gt; &lt;th&gt;Description&lt;/th&gt; &lt;th&gt;Reference&lt;/th&gt;&lt;/tr&gt;
 494 &lt;tr&gt;
 495 &lt;td&gt;CCITT RLE&lt;/td&gt;
 496 &lt;td&gt;Modified Huffman compression&lt;/td&gt;
 497 &lt;td&gt;TIFF 6.0 Specification, Section 10&lt;/td&gt;
 498 &lt;/tr&gt;
 499 &lt;tr&gt;
 500 &lt;td&gt;CCITT T.4&lt;/td&gt;
 501 &lt;td&gt;CCITT T.4 bilevel encoding/Group 3 facsimile compression&lt;/td&gt;
 502 &lt;td&gt;TIFF 6.0 Specification, Section 11&lt;/td&gt;
 503 &lt;/tr&gt;
 504 &lt;tr&gt;
 505 &lt;td&gt;CCITT T.6&lt;/td&gt;
 506 &lt;td&gt;CCITT T.6 bilevel encoding/Group 4 facsimile compression&lt;/td&gt;
 507 &lt;td&gt;TIFF 6.0 Specification, Section 11&lt;/td&gt;&lt;/tr&gt;
 508 &lt;tr&gt;
 509 &lt;td&gt;LZW&lt;/td&gt;
 510 &lt;td&gt;LZW compression&lt;/td&gt;
 511 &lt;td&gt;TIFF 6.0 Specification, Section 13&lt;/td&gt;&lt;/tr&gt;
 512 &lt;tr&gt;
 513 &lt;td&gt;JPEG&lt;/td&gt;
 514 &lt;td&gt;&quot;New&quot; JPEG-in-TIFF compression&lt;/td&gt;
 515 &lt;td&gt;TIFF Technical Note #2&lt;/td&gt;&lt;/tr&gt;
 516 &lt;tr&gt;
 517 &lt;td&gt;ZLib&lt;/td&gt;
 518 &lt;td&gt;&quot;Deflate/Inflate&quot; compression (see note following this table)&lt;/td&gt;
 519 &lt;td&gt;Adobe Photoshop&amp;#174; TIFF Technical Notes&lt;/td&gt;
 520 &lt;/tr&gt;
 521 &lt;tr&gt;
 522 &lt;td&gt;PackBits&lt;/td&gt;
 523 &lt;td&gt;Byte-oriented, run length compression&lt;/td&gt;
 524 &lt;td&gt;TIFF 6.0 Specification, Section 9&lt;/td&gt;
 525 &lt;/tr&gt;
 526 &lt;tr&gt;
 527 &lt;td&gt;Deflate&lt;/td&gt;
 528 &lt;td&gt;&quot;Zip-in-TIFF&quot; compression (see note following this table)&lt;/td&gt;
 529 &lt;td&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc1950&quot;&gt;
 530 ZLIB Compressed Data Format Specification&lt;/a&gt;,
 531 &lt;a href=&quot;https://tools.ietf.org/html/rfc1951&quot;&gt;
 532 DEFLATE Compressed Data Format Specification&lt;/a&gt;&lt;/td&gt;
 533 &lt;/tr&gt;
 534 &lt;tr&gt;
 535 &lt;td&gt;Exif JPEG&lt;/td&gt;
 536 &lt;td&gt;Exif-specific JPEG compression (see note following this table)&lt;/td&gt;
 537 &lt;td&gt;&lt;a href=&quot;http://www.exif.org/Exif2-2.PDF&quot;&gt;Exif 2.2 Specification&lt;/a&gt;
 538 (PDF), section 4.5.5, &quot;Basic Structure of Thumbnail Data&quot;&lt;/td&gt;
 539 &lt;/table&gt;
 540 
 541 &lt;p&gt;
 542 Old-style JPEG compression as described in section 22 of the TIFF 6.0
 543 Specification is &lt;i&gt;not&lt;/i&gt; supported.
 544 &lt;/p&gt;
 545 
 546 &lt;p&gt; The CCITT compression types are applicable to bilevel (1-bit)
 547 images only.  The JPEG compression type is applicable to byte
 548 grayscale (1-band) and RGB (3-band) images only.&lt;/p&gt;
 549 
 550 &lt;p&gt;
 551 ZLib and Deflate compression are identical except for the value of the
 552 TIFF Compression field: for ZLib the Compression field has value 8
 553 whereas for Deflate it has value 32946 (0x80b2). In both cases each
 554 image segment (strip or tile) is written as a single complete zlib data
 555 stream.
 556 &lt;/p&gt;
 557 
 558 &lt;p&gt;
 559 &quot;Exif JPEG&quot; is a compression type used when writing the contents of an
 560 APP1 Exif marker segment for inclusion in a JPEG native image metadata
 561 tree. The contents appended to the output when this compression type is
 562 used are a function of whether an empty or non-empty image is written.
 563 If the image is empty, then a TIFF IFD adhering to the specification of
 564 a compressed Exif primary IFD is appended. If the image is non-empty,
 565 then a complete IFD and image adhering to the specification of a
 566 compressed Exif thumbnail IFD and image are appended. Note that the
 567 data of the empty image may &lt;i&gt;not&lt;/i&gt; later be appended using the pixel
 568 replacement capability of the TIFF writer.
 569 &lt;/p&gt;
 570 
 571 &lt;p&gt; If ZLib/Deflate or JPEG compression is used, the compression quality
 572 may be set. For ZLib/Deflate the supplied floating point quality value is
 573 rescaled to the range &lt;code&gt;[1,&amp;nbsp;9]&lt;/code&gt; and truncated to an integer
 574 to derive the Deflate compression level. For JPEG the floating point
 575 quality value is passed directly to the JPEG writer plug-in which
 576 interprets it in the usual way.&lt;/p&gt;
 577 
 578 &lt;h3&gt;&lt;a id=&quot;ColorConversionWrite&quot;&gt;Color Conversion&lt;/a&gt;&lt;/h3&gt;
 579 
 580 &lt;p&gt;If the source image data
 581 color space type is RGB, and the destination photometric type is CIE L*a*b* or
 582 YCbCr, then the source image data will be automatically converted from
 583 RGB using an internal color converter.&lt;/p&gt;
 584 
 585 &lt;h3&gt;&lt;a id=&quot;ICCProfilesWrite&quot;&gt;ICC Profiles&lt;/a&gt;&lt;/h3&gt;
 586 
 587 An &lt;code&gt;ICC Profile&lt;/code&gt; field will be written if either:
 588 &lt;ul&gt;
 589 &lt;li&gt;one is present in the native image metadata
 590 &lt;a href=&quot;../IIOMetadata.html&quot;&gt;IIOMetadata&lt;/a&gt; instance supplied to the writer,
 591 or&lt;/li&gt;
 592 &lt;li&gt;the &lt;a href=&quot;../../../../java/awt/color/ColorSpace.html&quot;&gt;ColorSpace&lt;/a&gt;
 593 of the destination &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; is an instance of
 594 &lt;code&gt;ICC_ColorSpace&lt;/code&gt; which is not one of the standard
 595 color spaces defined by the &lt;code&gt;CS_*&lt;/code&gt; constants in the
 596 &lt;code&gt;ColorSpace&lt;/code&gt; class. The destination type is set via
 597 &lt;code&gt;ImageWriteParam.setDestinationType(ImageTypeSpecifier)&lt;/code&gt; and defaults
 598 to the &lt;code&gt;ImageTypeSpecifier&lt;/code&gt; of the image being written.
 599 &lt;/li&gt;
 600 &lt;/ul&gt;
 601 
 602 &lt;h3&gt;&lt;a id=&quot;MetadataIssuesWrite&quot;&gt;Metadata Issues&lt;/a&gt;&lt;/h3&gt;
 603 
 604 Some behavior of the writer is affected by or may affect the contents of
 605 the image metadata which may be supplied by the user.
 606 
 607 &lt;p&gt;For bilevel images, the &lt;code&gt;FillOrder&lt;/code&gt;, and &lt;code&gt;T4Options&lt;/code&gt;
 608 fields affect the output data. The data will be filled right-to-left if
 609 &lt;code&gt;FillOrder&lt;/code&gt; is present with a value of 2
 610 (&lt;code&gt;BaselineTIFFTagSet.FILL_ORDER_RIGHT_TO_LEFT&lt;/code&gt;)
 611 and will be filled left-to-right otherwise. The value of &lt;code&gt;T4Options&lt;/code&gt;
 612 specifies whether the data should be 1D- or 2D-encoded and whether EOL
 613 padding should be used.&lt;/p&gt;
 614 
 615 &lt;p&gt;For all images the value of the &lt;code&gt;RowsPerStrip&lt;/code&gt; field is used
 616 to the set the number of rows per strip if the image is not tiled. The
 617 default number of rows per strip is either 8 or the number of rows which
 618 would fill no more than 8 kilobytes, whichever is larger.&lt;/p&gt;
 619 
 620 &lt;p&gt;For all images the tile dimensions may be set using the &lt;code&gt;TileWidth&lt;/code&gt;
 621 and &lt;code&gt;TileLength&lt;/code&gt; field values if the tiling mode is
 622 &lt;code&gt;ImageWriteParam.MODE_COPY_FROM_METADATA&lt;/code&gt;. If this mode
 623 is set but the fields are not, their respective default values are the image
 624 width and height.&lt;/p&gt;
 625 
 626 &lt;p&gt;When using JPEG-in-TIFF compression, a &lt;code&gt;JPEGTables&lt;/code&gt; field will be
 627 written to the IFD and abbreviated JPEG streams to each strip or tile if and
 628 only if a &lt;code&gt;JPEGTables&lt;/code&gt; field is contained in the metadata object
 629 provided to the writer. If the contents of the &lt;code&gt;JPEGTables&lt;/code&gt; field is
 630 a valid tables-only JPEG stream, then it will be used; otherwise the contents
 631 of the field will be replaced with default visually lossless tables. If no
 632 such &lt;code&gt;JPEGTables&lt;/code&gt; field is present in the metadata, then no
 633 &lt;code&gt;JPEGTables&lt;/code&gt; field will be written to the output and each strip or
 634 tile will be written as a separate, self-contained JPEG stream.&lt;/p&gt;
 635 
 636 &lt;p&gt;When using Deflate/ZLib or LZW compression, if the image has 8 bits per
 637 sample, a horizontal differencing predictor will be used if the
 638 &lt;code&gt;Predictor&lt;/code&gt; field is present with a value of 2
 639 (&lt;code&gt;BaselineTIFFTagSet.PREDICTOR_HORIZONTAL_DIFFERENCING&lt;/code&gt;).
 640 If prediction is so requested but the image does not have
 641 8 bits per sample the field will be reset to have the value 1
 642 (&lt;code&gt;BaselineTIFFTagSet.PREDICTOR_NONE&lt;/code&gt;).
 643 &lt;/p&gt;
 644 
 645 &lt;p&gt;Some fields may be added or modified:
 646 
 647 &lt;ul&gt;
 648 &lt;li&gt;&lt;code&gt;PhotometricInterpretation&lt;/code&gt; if not present.&lt;/li&gt;
 649 &lt;li&gt;&lt;code&gt;PlanarConfiguration&lt;/code&gt; if this field is present with value
 650 &lt;code&gt;Planar&lt;/code&gt; is is reset to &lt;code&gt;Chunky&lt;/code&gt;.&lt;/li&gt;
 651 &lt;li&gt;&lt;code&gt;Compression&lt;/code&gt; always.&lt;/li&gt;
 652 &lt;li&gt;&lt;code&gt;BitsPerSample&lt;/code&gt; if the image is not bilevel.&lt;/li&gt;
 653 &lt;li&gt;&lt;code&gt;SamplesPerPixel&lt;/code&gt; always.&lt;/li&gt;
 654 &lt;li&gt;&lt;code&gt;ExtraSamples&lt;/code&gt; if an alpha channel is present.&lt;/li&gt;
 655 &lt;li&gt;&lt;code&gt;SampleFormat&lt;/code&gt; if not present and the data are 16- or 32-bit
 656 integers or floating point.&lt;/li&gt;
 657 &lt;li&gt;&lt;code&gt;ColorMap&lt;/code&gt; if the &lt;code&gt;PhotometricInterpretation&lt;/code&gt; is
 658 &lt;code&gt;RGBPalette&lt;/code&gt;.&lt;/li&gt;
 659 &lt;li&gt;&lt;code&gt;ImageWidth&lt;/code&gt; and &lt;code&gt;ImageLength&lt;/code&gt; always.&lt;/li&gt;
 660 &lt;li&gt;&lt;code&gt;TileWidth&lt;/code&gt;, &lt;code&gt;TileLength&lt;/code&gt;, &lt;code&gt;TileOffsets&lt;/code&gt;, and
 661 &lt;code&gt;TileByteCounts&lt;/code&gt; if a tiled image is being written.&lt;/li&gt;
 662 &lt;li&gt;&lt;code&gt;RowsPerStrip&lt;/code&gt;, &lt;code&gt;StripOffsets&lt;/code&gt;, and &lt;code&gt;StripByteCounts&lt;/code&gt;
 663 if a tiled image is &lt;i&gt;not&lt;/i&gt; being written.&lt;/li&gt;
 664 &lt;li&gt;&lt;code&gt;XResolution&lt;/code&gt;, &lt;code&gt;YResolution&lt;/code&gt;, and &lt;code&gt;ResolutionUnit&lt;/code&gt;
 665 if none of these is present.&lt;/li&gt;
 666 &lt;li&gt;&lt;code&gt;YCbCrSubsampling&lt;/code&gt; and &lt;code&gt;YCbCrPositioning&lt;/code&gt; if the
 667 photometric interpretation is YCbCr and the compression type is not JPEG
 668 (only [1,&amp;nbsp;1] subsampling and cosited positioning are supported for
 669 non-JPEG YCbCr output).&lt;/li&gt;
 670 &lt;li&gt;&lt;code&gt;YCbCrSubsampling&lt;/code&gt;, &lt;code&gt;YCbCrPositioning&lt;/code&gt;, and
 671 &lt;code&gt;ReferenceBlackWhite&lt;/code&gt;: if the compression type is JPEG and the color
 672 space is RGB these will be reset to [2,&amp;nbsp;2] centered subsampling with no
 673 headroom/footroom (0:255,128:255,128:255).&lt;/li&gt;
 674 &lt;/ul&gt;
 675 
 676 &lt;p&gt;Some fields may be removed:
 677 
 678 &lt;ul&gt;
 679 &lt;li&gt;&lt;code&gt;BitsPerSample&lt;/code&gt; if the image is bilevel.&lt;/li&gt;
 680 &lt;li&gt;&lt;code&gt;ExtraSamples&lt;/code&gt; if the image does not have an alpha channel.&lt;/li&gt;
 681 &lt;li&gt;&lt;code&gt;ColorMap&lt;/code&gt; if the photometric interpretation is not
 682 &lt;code&gt;RGBPalette&lt;/code&gt;.&lt;/li&gt;
 683 &lt;li&gt;&lt;code&gt;TileWidth&lt;/code&gt;, &lt;code&gt;TileLength&lt;/code&gt;, &lt;code&gt;TileOffsets&lt;/code&gt;, and
 684 &lt;code&gt;TileByteCounts&lt;/code&gt; if tiling &lt;i&gt;is not&lt;/i&gt; being used.&lt;/li&gt;
 685 &lt;li&gt;&lt;code&gt;RowsPerStrip&lt;/code&gt;, &lt;code&gt;StripOffsets&lt;/code&gt;, and &lt;code&gt;StripByteCounts&lt;/code&gt;
 686 if tiling &lt;i&gt;is&lt;/i&gt; being used.&lt;/li&gt;
 687 &lt;li&gt;&lt;code&gt;YCbCrSubsampling&lt;/code&gt;, &lt;code&gt;YCbCrPositioning&lt;/code&gt;, and
 688 &lt;code&gt;ReferenceBlackWhite&lt;/code&gt; if the compression type is JPEG and the
 689 color space is grayscale.&lt;/li&gt;
 690 &lt;li&gt;&lt;code&gt;JPEGProc&lt;/code&gt;, &lt;code&gt;JPEGInterchangeFormat&lt;/code&gt;,
 691 &lt;code&gt;JPEGInterchangeFormatLength&lt;/code&gt;, &lt;code&gt;JPEGRestartInterval&lt;/code&gt;,
 692 &lt;code&gt;JPEGLosslessPredictors&lt;/code&gt;, &lt;code&gt;JPEGPointTransforms&lt;/code&gt;,
 693 &lt;code&gt;JPEGQTables&lt;/code&gt;, &lt;code&gt;JPEGDCTables&lt;/code&gt;, and
 694 &lt;code&gt;JPEGACTables&lt;/code&gt; if the compression type is JPEG.&lt;/li&gt;
 695 &lt;/ul&gt;
 696 
 697 &lt;p&gt;Other fields present in the supplied metadata are uninterpreted and will
 698 be written as supplied.&lt;/p&gt;
 699 
 700 &lt;p&gt;If an Exif image is being written, the set of fields present and their
 701 values will be modified such that the result is in accord with the Exif 2.2
 702 specification.&lt;/p&gt;
 703 
 704 &lt;p&gt;Setting up the image metadata to write to a TIFF stream may be simplified
 705 by using the &lt;code&gt;TIFFDirectory&lt;/code&gt; class
 706 which represents a TIFF IFD. A field in a TIFF IFD is represented by an
 707 instance of &lt;a href=&quot;../../plugins/tiff/TIFFField.html&quot;&gt;TIFFField&lt;/a&gt;. For each
 708 field to be written a &lt;code&gt;TIFFField&lt;/code&gt; may be added to the
 709 &lt;code&gt;TIFFDirectory&lt;/code&gt; and the latter converted to an
 710 &lt;code&gt;IIOMetadata&lt;/code&gt; object by invoking
 711 &lt;code&gt;TIFFDirectory.getAsMetadata&lt;/code&gt;. The
 712 &lt;code&gt;IIOMetadata&lt;/code&gt; object so obtained may then be passed to the TIFF
 713 writer.&lt;/p&gt;
 714 
 715 &lt;h4&gt;&lt;a id=&quot;MapStandardNative&quot;&gt;&lt;/a&gt;
 716 Mapping of the Standard Metadata Format to TIFF Native Image Metadata&lt;/h4&gt;
 717 
 718 The derivation of &lt;a href=&quot;#ImageMetadata&quot;&gt;TIFF native image metadata&lt;/a&gt;
 719 elements from the standard metadata format
 720 &lt;a href=&quot;standard_metadata.html&quot;&gt;javax_imageio_1.0&lt;/a&gt; is
 721 given in the following table.
 722 
 723 &lt;table border=&quot;1&quot;&gt;
 724 &lt;tr&gt;
 725 &lt;th&gt;TIFF Field&lt;/th&gt;
 726 &lt;th&gt;Derivation from Standard Metadata Elements&lt;/th&gt;
 727 &lt;/tr&gt;
 728 &lt;tr&gt;
 729 &lt;td&gt;
 730 PhotometricInterpretation
 731 &lt;/td&gt;
 732 &lt;td&gt;/Chroma/ColorSpaceType@name: &quot;GRAY&quot; and /Chroma/BlackIsZero@value = &quot;FALSE&quot;
 733 =&amp;gt; WhiteIsZero; &quot;GRAY&quot; and /Document/SubimageInterpretation@value =
 734 &quot;TransparencyMask&quot; =&amp;gt; TransparencyMask; &quot;RGB&quot; and /Chroma/Palette present =&amp;gt;
 735 PaletteColor; &quot;GRAY&quot; =&amp;gt; BlackIsZero; &quot;RGB&quot; =&amp;gt; RGB; &quot;YCbCr&quot; =&amp;gt; YCbCr;
 736 &quot;CMYK&quot; =&amp;gt; CMYK; &quot;Lab&quot; =&amp;gt; CIELab.&lt;/td&gt;
 737 &lt;/tr&gt;
 738 &lt;tr&gt;
 739 &lt;td&gt;SamplesPerPixel&lt;/td&gt;
 740 &lt;td&gt;/Chroma/NumChannels@value&lt;/td&gt;
 741 &lt;/tr&gt;
 742 &lt;tr&gt;
 743 &lt;td&gt;ColorMap&lt;/td&gt;
 744 &lt;td&gt;/Chroma/Palette&lt;/td&gt;
 745 &lt;/tr&gt;
 746 &lt;tr&gt;
 747 &lt;td&gt;Compression&lt;/td&gt;
 748 &lt;td&gt;/Compression/CompressionTypeName@value: &quot;none&quot; =&amp;gt; Uncompressed;
 749 &quot;CCITT RLE&quot; =&amp;gt; CCITT 1D; &quot;CCITT T.4&quot; =&amp;gt; Group 3 Fax; &quot;CCITT T.6&quot; =&amp;gt; Group 4
 750 Fax; &quot;LZW&quot; =&amp;gt; LZW; &quot;Old JPEG&quot; =&amp;gt; JPEG; &quot;JPEG&quot; =&amp;gt; New JPEG; &quot;ZLib&quot; =&amp;gt; ZLib;
 751 &quot;PackBits&quot; =&amp;gt; PackBits; &quot;Deflate&quot; =&amp;gt; Deflate.&lt;/td&gt;
 752 &lt;/tr&gt;
 753 &lt;tr&gt;
 754 &lt;td&gt;PlanarConfiguration&lt;/td&gt;
 755 &lt;td&gt;/Data/PlanarConfiguration@value: &quot;PixelInterleaved&quot; =&amp;gt; Chunky;
 756 &quot;PlaneInterleaved&quot; =&amp;gt; Planar.&lt;/td&gt;
 757 &lt;/tr&gt;
 758 &lt;tr&gt;
 759 &lt;td&gt;SampleFormat&lt;/td&gt;
 760 &lt;td&gt;/Data/SampleFormat@value: &quot;SignedIntegral&quot; =&amp;gt; two&#39;s complement signed
 761 integer data; &quot;UnsignedIntegral&quot; =&amp;gt; unsigned integer data; &quot;Real&quot; =&amp;gt;
 762 IEEE floating point data; &quot;Index&quot; =&amp;gt; unsigned integer data.
 763 &lt;/td&gt;
 764 &lt;/tr&gt;
 765 &lt;tr&gt;
 766 &lt;td&gt;BitsPerSample&lt;/td&gt;
 767 &lt;td&gt;/Data/BitsPerSample@value: space-separated list parsed to char array.&lt;/td&gt;
 768 &lt;/tr&gt;
 769 &lt;tr&gt;
 770 &lt;td&gt;FillOrder&lt;/td&gt;
 771 &lt;td&gt;/Data/SampleMSB@value: if all values in space-separated list are 0s =&amp;gt;
 772 right-to-left; otherwise =&amp;gt; left-to-right.
 773 &lt;/td&gt;
 774 &lt;/tr&gt;
 775 &lt;tr&gt;
 776 &lt;td&gt;XResolution&lt;/td&gt;
 777 &lt;td&gt;(10 / /Dimension/HorizontalPixelSize@value) or
 778 (10 / (/Dimension/VerticalPixelSize@value *
 779 /Dimension/PixelAspectRatio@value))&lt;/td&gt;
 780 &lt;/tr&gt;
 781 &lt;tr&gt;
 782 &lt;td&gt;YResolution&lt;/td&gt;
 783 &lt;td&gt;(10 / /Dimension/VerticalPixelSize@value) or
 784 (10 / (/Dimension/HorizontalPixelSize@value /
 785 /Dimension/PixelAspectRatio@value))&lt;/td&gt;
 786 &lt;/tr&gt;
 787 &lt;tr&gt;
 788 &lt;td&gt;ResolutionUnit&lt;/td&gt;
 789 &lt;td&gt;Centimeter if XResolution or YResolution set; otherwise None.&lt;/td&gt;
 790 &lt;/tr&gt;
 791 &lt;tr&gt;
 792 &lt;td&gt;Orientation&lt;/td&gt;
 793 &lt;td&gt;/Dimension/ImageOrientation@value&lt;/td&gt;
 794 &lt;/tr&gt;
 795 &lt;tr&gt;
 796 &lt;td&gt;XPosition&lt;/td&gt;
 797 &lt;td&gt;/Dimension/HorizontalPosition@value / 10&lt;/td&gt;
 798 &lt;/tr&gt;
 799 &lt;tr&gt;
 800 &lt;td&gt;YPosition&lt;/td&gt;
 801 &lt;td&gt;/Dimension/VerticalPosition@value / 10&lt;/td&gt;
 802 &lt;/tr&gt;
 803 &lt;tr&gt;
 804 &lt;td&gt;NewSubFileType&lt;/td&gt;
 805 &lt;td&gt;/Document/SubimageInterpretation@value: &quot;TransparencyMask&quot; =&amp;gt;
 806 transparency mask; &quot;ReducedResolution&quot; =&amp;gt; reduced-resolution;
 807 &quot;SinglePage&quot; =&amp;gt; single page.&lt;/td&gt;
 808 &lt;/tr&gt;
 809 &lt;tr&gt;
 810 &lt;td&gt;DateTime&lt;/td&gt;
 811 &lt;td&gt;/Document/ImageCreationTime@value&lt;/td&gt;
 812 &lt;/tr&gt;
 813 &lt;tr&gt;
 814 &lt;td&gt;DocumentName, ImageDescription, Make, Model, PageName, Software,
 815 Artist, HostComputer, InkNames, Copyright&lt;/td&gt;
 816 &lt;td&gt;/Text/TextEntry: if /Text/TextEntry@keyword is the name of any of the
 817 TIFF Fields, e.g., &quot;Software&quot;, then the field is added with content
 818 /Text/TextEntry@value and count 1.&lt;/td&gt;
 819 &lt;/tr&gt;
 820 &lt;tr&gt;
 821 &lt;td&gt;ExtraSamples&lt;/td&gt;
 822 &lt;td&gt;/Transparency/Alpha@value: &quot;premultiplied&quot; =&amp;gt; associated alpha, count 1;
 823 &quot;nonpremultiplied&quot; =&amp;gt; unassociated alpha, count 1.&lt;/td&gt;
 824 &lt;/tr&gt;
 825 &lt;tr&gt;
 826 &lt;td&gt;&lt;/td&gt;
 827 &lt;td&gt;&lt;/td&gt;
 828 &lt;/tr&gt;
 829 &lt;/table&gt;
 830 
 831 &lt;h3&gt;&lt;a id=&quot;ExifWrite&quot;&gt;Writing Exif Images&lt;/a&gt;&lt;/h3&gt;
 832 
 833 The TIFF writer may be used to write an uncompressed Exif image or the
 834 contents of the &lt;code&gt;APP1&lt;/code&gt; marker segment of a compressed Exif image.
 835 
 836 &lt;h4&gt;&lt;a id=&quot;ExifWriteTIFF&quot;&gt;Writing Uncompressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 837 
 838 When writing a sequence of images each image is normally recorded as
 839 {IFD,&amp;nbsp;IFD Value,&amp;nbsp;Image Data}. The Exif specification requires
 840 that an uncompressed Exif image be structured as follows:
 841 
 842 &lt;a id=&quot;ExifStructure&quot;&gt;&lt;/a&gt;
 843 &lt;ol&gt;
 844 &lt;li&gt;Image File Header&lt;/li&gt;
 845 &lt;li&gt;Primary IFD&lt;/li&gt;
 846 &lt;li&gt;Primary IFD Value&lt;/li&gt;
 847 &lt;li&gt;Thumbnail IFD&lt;/li&gt;
 848 &lt;li&gt;Thumbnail IFD Value&lt;/li&gt;
 849 &lt;li&gt;Thumbnail Image Data&lt;/li&gt;
 850 &lt;li&gt;Primary Image Data&lt;/li&gt;
 851 &lt;/ol&gt;
 852 
 853 To meet the requirement of the primary image data being recorded last, the
 854 primary image must be written initially as an empty image and have its data
 855 added via pixel replacement after the thumbnail IFD and image data have been
 856 written:
 857 
 858 &lt;pre&gt;&lt;code&gt;
 859     ImageWriter tiffWriter;
 860     ImageWriteParam tiffWriteParam;
 861     IIOMetadata tiffStreamMetadata;
 862     IIOMetadata primaryIFD;
 863     BufferedImage image;
 864     BufferedImage thumbnail;
 865 
 866     // Specify uncompressed output.
 867     tiffWriteParam.setCompressionMode(ImageWriteParam.MODE_DISABLED);
 868 
 869     if (thumbnail != null) {
 870         // Write the TIFF header.
 871         tiffWriter.prepareWriteSequence(tiffStreamMetadata);
 872 
 873         // Append the primary IFD.
 874         tiffWriter.prepareInsertEmpty(-1, // append
 875                 new ImageTypeSpecifier(image),
 876                 image.getWidth(),
 877                 image.getHeight(),
 878                 primaryIFD,
 879                 null, // thumbnails
 880                 tiffWriteParam);
 881         tiffWriter.endInsertEmpty();
 882 
 883         // Append the thumbnail image data.
 884         tiffWriter.writeToSequence(new IIOImage(thumbnail, null, null),
 885                 tiffWriteParam);
 886 
 887         // Insert the primary image data.
 888         tiffWriter.prepareReplacePixels(0, new Rectangle(image.getWidth(),
 889                 image.getHeight()));
 890         tiffWriter.replacePixels(image, tiffWriteParam);
 891         tiffWriter.endReplacePixels();
 892 
 893         // End writing.
 894         tiffWriter.endWriteSequence();
 895     } else {
 896         // Write only the primary IFD and image data.
 897         tiffWriter.write(tiffStreamMetadata,
 898                 new IIOImage(image, null, primaryIFD),
 899                 tiffWriteParam);
 900     }
 901 &lt;/code&gt;&lt;/pre&gt;
 902 
 903 &lt;h4&gt;&lt;a id=&quot;ExifWriteJPEG&quot;&gt;Writing Compressed Exif Images&lt;/a&gt;&lt;/h4&gt;
 904 
 905 The structure of the embedded TIFF stream in the &lt;code&gt;APP1&lt;/code&gt; segment of a
 906 compressed Exif image is identical to the &lt;a href=&quot;#ExifStructure&quot;&gt;
 907 uncompressed Exif image structure&lt;/a&gt; except that there are no primary
 908 image data, i.e., the primary IFD does not refer to any image data.
 909 
 910 &lt;pre&gt;&lt;code&gt;
 911     ImageWriter tiffWriter;
 912     ImageWriteParam tiffWriteParam;
 913     IIOMetadata tiffStreamMetadata;
 914     BufferedImage image;
 915     BufferedImage thumbnail;
 916     IIOMetadata primaryIFD;
 917     ImageOutputStream output;
 918 
 919     // Set up an output to contain the APP1 Exif TIFF stream.
 920     ByteArrayOutputStream baos = new ByteArrayOutputStream();
 921     MemoryCacheImageOutputStream app1ExifOutput =
 922         new MemoryCacheImageOutputStream(baos);
 923     tiffWriter.setOutput(app1ExifOutput);
 924 
 925     // Set compression for the thumbnail.
 926     tiffWriteParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
 927     tiffWriteParam.setCompressionType(&quot;Exif JPEG&quot;);
 928 
 929     // Write the APP1 Exif TIFF stream.
 930     if (thumbnail != null) {
 931         // Write the TIFF header.
 932         tiffWriter.prepareWriteSequence(tiffStreamMetadata);
 933 
 934         // Append the primary IFD.
 935         tiffWriter.prepareInsertEmpty(-1, // append
 936                 new ImageTypeSpecifier(image),
 937                 image.getWidth(),
 938                 image.getHeight(),
 939                 primaryIFD,
 940                 null, // thumbnails
 941                 tiffWriteParam);
 942         tiffWriter.endInsertEmpty();
 943 
 944         // Append the thumbnail IFD and image data.
 945         tiffWriter.writeToSequence(new IIOImage(thumbnail, null,
 946                 null), tiffWriteParam);
 947 
 948         // End writing.
 949         tiffWriter.endWriteSequence();
 950     } else {
 951         // Write only the primary IFD.
 952         tiffWriter.prepareWriteEmpty(tiffStreamMetadata,
 953                 new ImageTypeSpecifier(image),
 954                 image.getWidth(),
 955                 image.getHeight(),
 956                 primaryIFD,
 957                 null, // thumbnails
 958                 tiffWriteParam);
 959         tiffWriter.endWriteEmpty();
 960     }
 961 
 962     // Flush data into byte stream.
 963     app1ExifOutput.flush();
 964 
 965     // Create APP1 parameter array.
 966     byte[] app1Parameters = new byte[6 + baos.size()];
 967 
 968     // Add APP1 Exif ID bytes.
 969     app1Parameters[0] = (byte) &#39;E&#39;;
 970     app1Parameters[1] = (byte) &#39;x&#39;;
 971     app1Parameters[2] = (byte) &#39;i&#39;;
 972     app1Parameters[3] = (byte) &#39;f&#39;;
 973     app1Parameters[4] = app1Parameters[5] = (byte) 0;
 974 
 975     // Append TIFF stream to APP1 parameters.
 976     System.arraycopy(baos.toByteArray(), 0, app1Parameters, 6, baos.size());
 977 
 978     // Create the APP1 Exif node to be added to native JPEG image metadata.
 979     IIOMetadataNode app1Node = new IIOMetadataNode(&quot;unknown&quot;);
 980     app1Node.setAttribute(&quot;MarkerTag&quot;, String.valueOf(0xE1));
 981     app1Node.setUserObject(app1Parameters);
 982 
 983     // Append the APP1 Exif marker to the &quot;markerSequence&quot; node.
 984     IIOMetadata jpegImageMetadata =
 985         jpegWriter.getDefaultImageMetadata(new ImageTypeSpecifier(image),
 986             jpegWriteParam);
 987     String nativeFormat = jpegImageMetadata.getNativeMetadataFormatName();
 988     Node tree = jpegImageMetadata.getAsTree(nativeFormat);
 989     NodeList children = tree.getChildNodes();
 990     int numChildren = children.getLength();
 991     for (int i = 0; i &amp;lt; numChildren; i++) {
 992         Node child = children.item(i);
 993         if (child.getNodeName().equals(&quot;markerSequence&quot;)) {
 994             child.appendChild(app1Node);
 995             break;
 996         }
 997     }
 998     jpegImageMetadata.setFromTree(nativeFormat, tree);
 999 
1000     // Write the JPEG image data including the APP1 Exif marker.
1001     jpegWriter.setOutput(output);
1002     jpegWriter.write(new IIOImage(image, null, jpegImageMetadata));
1003 &lt;/code&gt;&lt;/pre&gt;
1004 
1005 The &lt;code&gt;&quot;unknown&quot;&lt;/code&gt; node created above would be appended to the
1006 &lt;code&gt;&quot;markerSequence&quot;&lt;/code&gt; node of the native JPEG image metadata
1007 and written to the JPEG stream when the primary image is written using
1008 the JPEG writer.
1009 
1010 &lt;h2&gt;&lt;a id=&quot;StreamMetadata&quot;&gt;Stream Metadata&lt;/a&gt;&lt;/h2&gt;
1011 
1012 The DTD for the TIFF native stream metadata format is as follows:
1013 
1014 &lt;pre&gt;
1015 &amp;lt;!DOCTYPE &quot;javax_imageio_tiff_stream_1.0&quot; [
1016 
1017   &amp;lt;!ELEMENT &quot;javax_imageio_tiff_stream_1.0&quot; (ByteOrder)&gt;
1018 
1019     &amp;lt;!ELEMENT &quot;ByteOrder&quot; EMPTY&amp;gt;
1020       &amp;lt;!-- The stream byte order --&amp;gt;
1021       &amp;lt;!ATTLIST &quot;ByteOrder&quot; &quot;value&quot; #CDATA #REQUIRED&amp;gt;
1022         &amp;lt;!-- One of &quot;BIG_ENDIAN&quot; or &quot;LITTLE_ENDIAN&quot; --&amp;gt;
1023         &amp;lt;!-- Data type: String --&amp;gt;
1024 ]&amp;gt;
1025 &lt;/pre&gt;
1026 
1027 &lt;h2&gt;&lt;a id=&quot;ImageMetadata&quot;&gt;Image Metadata&lt;/a&gt;&lt;/h2&gt;
1028 
1029 The DTD for the TIFF native image metadata format is as follows:
1030 
1031 &lt;pre&gt;
1032 &amp;lt;!DOCTYPE &quot;javax_imageio_tiff_image_1.0&quot; [
1033 
1034   &amp;lt;!ELEMENT &quot;javax_imageio_tiff_image_1.0&quot; (TIFFIFD)*&amp;gt;
1035 
1036     &amp;lt;!ELEMENT &quot;TIFFIFD&quot; (TIFFField | TIFFIFD)*&amp;gt;
1037       &amp;lt;!-- An IFD (directory) containing fields --&amp;gt;
1038       &amp;lt;!ATTLIST &quot;TIFFIFD&quot; &quot;tagSets&quot; #CDATA #REQUIRED&amp;gt;
1039         &amp;lt;!-- Data type: String --&amp;gt;
1040       &amp;lt;!ATTLIST &quot;TIFFIFD&quot; &quot;parentTagNumber&quot; #CDATA #IMPLIED&amp;gt;
1041         &amp;lt;!-- The tag number of the field pointing to this IFD --&amp;gt;
1042         &amp;lt;!-- Data type: Integer --&amp;gt;
1043       &amp;lt;!ATTLIST &quot;TIFFIFD&quot; &quot;parentTagName&quot; #CDATA #IMPLIED&amp;gt;
1044         &amp;lt;!-- A mnemonic name for the field pointing to this IFD, if known
1045              --&amp;gt;
1046         &amp;lt;!-- Data type: String --&amp;gt;
1047 
1048       &amp;lt;!ELEMENT &quot;TIFFField&quot; (TIFFBytes | TIFFAsciis |
1049         TIFFShorts | TIFFSShorts | TIFFLongs | TIFFSLongs |
1050         TIFFRationals | TIFFSRationals |
1051         TIFFFloats | TIFFDoubles | TIFFUndefined)&amp;gt;
1052         &amp;lt;!-- A field containing data --&amp;gt;
1053         &amp;lt;!ATTLIST &quot;TIFFField&quot; &quot;number&quot; #CDATA #REQUIRED&amp;gt;
1054           &amp;lt;!-- The tag number asociated with the field --&amp;gt;
1055           &amp;lt;!-- Data type: String --&amp;gt;
1056         &amp;lt;!ATTLIST &quot;TIFFField&quot; &quot;name&quot; #CDATA #IMPLIED&amp;gt;
1057           &amp;lt;!-- A mnemonic name associated with the field, if known --&amp;gt;
1058           &amp;lt;!-- Data type: String --&amp;gt;
1059 
1060         &amp;lt;!ELEMENT &quot;TIFFBytes&quot; (TIFFByte)*&amp;gt;
1061           &amp;lt;!-- A sequence of TIFFByte nodes --&amp;gt;
1062 
1063           &amp;lt;!ELEMENT &quot;TIFFByte&quot; EMPTY&amp;gt;
1064             &amp;lt;!-- An integral value between 0 and 255 --&amp;gt;
1065             &amp;lt;!ATTLIST &quot;TIFFByte&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1066               &amp;lt;!-- The value --&amp;gt;
1067               &amp;lt;!-- Data type: String --&amp;gt;
1068             &amp;lt;!ATTLIST &quot;TIFFByte&quot; &quot;description&quot; #CDATA #IMPLIED&amp;gt;
1069               &amp;lt;!-- A description, if available --&amp;gt;
1070               &amp;lt;!-- Data type: String --&amp;gt;
1071 
1072         &amp;lt;!ELEMENT &quot;TIFFAsciis&quot; (TIFFAscii)*&amp;gt;
1073           &amp;lt;!-- A sequence of TIFFAscii nodes --&amp;gt;
1074 
1075           &amp;lt;!ELEMENT &quot;TIFFAscii&quot; EMPTY&amp;gt;
1076             &amp;lt;!-- A String value --&amp;gt;
1077             &amp;lt;!ATTLIST &quot;TIFFAscii&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1078               &amp;lt;!-- The value --&amp;gt;
1079               &amp;lt;!-- Data type: String --&amp;gt;
1080 
1081         &amp;lt;!ELEMENT &quot;TIFFShorts&quot; (TIFFShort)*&amp;gt;
1082           &amp;lt;!-- A sequence of TIFFShort nodes --&amp;gt;
1083 
1084           &amp;lt;!ELEMENT &quot;TIFFShort&quot; EMPTY&amp;gt;
1085             &amp;lt;!-- An integral value between 0 and 65535 --&amp;gt;
1086             &amp;lt;!ATTLIST &quot;TIFFShort&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1087               &amp;lt;!-- The value --&amp;gt;
1088               &amp;lt;!-- Data type: String --&amp;gt;
1089             &amp;lt;!ATTLIST &quot;TIFFShort&quot; &quot;description&quot; #CDATA #IMPLIED&amp;gt;
1090               &amp;lt;!-- A description, if available --&amp;gt;
1091               &amp;lt;!-- Data type: String --&amp;gt;
1092 
1093         &amp;lt;!ELEMENT &quot;TIFFSShorts&quot; (TIFFSShort)*&amp;gt;
1094           &amp;lt;!-- A sequence of TIFFSShort nodes --&amp;gt;
1095 
1096           &amp;lt;!ELEMENT &quot;TIFFSShort&quot; EMPTY&amp;gt;
1097             &amp;lt;!-- An integral value between -32768 and 32767 --&amp;gt;
1098             &amp;lt;!ATTLIST &quot;TIFFSShort&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1099               &amp;lt;!-- The value --&amp;gt;
1100               &amp;lt;!-- Data type: String --&amp;gt;
1101             &amp;lt;!ATTLIST &quot;TIFFSShort&quot; &quot;description&quot; #CDATA #IMPLIED&amp;gt;
1102               &amp;lt;!-- A description, if available --&amp;gt;
1103               &amp;lt;!-- Data type: String --&amp;gt;
1104 
1105         &amp;lt;!ELEMENT &quot;TIFFLongs&quot; (TIFFLong)*&amp;gt;
1106           &amp;lt;!-- A sequence of TIFFLong nodes --&amp;gt;
1107 
1108           &amp;lt;!ELEMENT &quot;TIFFLong&quot; EMPTY&amp;gt;
1109             &amp;lt;!-- An integral value between 0 and 4294967295 --&amp;gt;
1110             &amp;lt;!ATTLIST &quot;TIFFLong&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1111               &amp;lt;!-- The value --&amp;gt;
1112               &amp;lt;!-- Data type: String --&amp;gt;
1113             &amp;lt;!ATTLIST &quot;TIFFLong&quot; &quot;description&quot; #CDATA #IMPLIED&amp;gt;
1114               &amp;lt;!-- A description, if available --&amp;gt;
1115               &amp;lt;!-- Data type: String --&amp;gt;
1116 
1117         &amp;lt;!ELEMENT &quot;TIFFSLongs&quot; (TIFFSLong)*&amp;gt;
1118           &amp;lt;!-- A sequence of TIFFSLong nodes --&amp;gt;
1119 
1120           &amp;lt;!ELEMENT &quot;TIFFSLong&quot; EMPTY&amp;gt;
1121             &amp;lt;!-- An integral value between -2147483648 and 2147482647 --&amp;gt;
1122             &amp;lt;!ATTLIST &quot;TIFFSLong&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1123               &amp;lt;!-- The value --&amp;gt;
1124               &amp;lt;!-- Data type: String --&amp;gt;
1125             &amp;lt;!ATTLIST &quot;TIFFSLong&quot; &quot;description&quot; #CDATA #IMPLIED&amp;gt;
1126               &amp;lt;!-- A description, if available --&amp;gt;
1127               &amp;lt;!-- Data type: String --&amp;gt;
1128 
1129         &amp;lt;!ELEMENT &quot;TIFFRationals&quot; (TIFFRational)*&amp;gt;
1130           &amp;lt;!-- A sequence of TIFFRational nodes --&amp;gt;
1131 
1132           &amp;lt;!ELEMENT &quot;TIFFRational&quot; EMPTY&amp;gt;
1133             &amp;lt;!-- A rational value consisting of an unsigned numerator and
1134                  denominator --&amp;gt;
1135             &amp;lt;!ATTLIST &quot;TIFFRational&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1136               &amp;lt;!-- The numerator and denominator, separated by a slash --&amp;gt;
1137               &amp;lt;!-- Data type: String --&amp;gt;
1138 
1139         &amp;lt;!ELEMENT &quot;TIFFSRationals&quot; (TIFFSRational)*&amp;gt;
1140           &amp;lt;!-- A sequence of TIFFSRational nodes --&amp;gt;
1141 
1142           &amp;lt;!ELEMENT &quot;TIFFSRational&quot; EMPTY&amp;gt;
1143             &amp;lt;!-- A rational value consisting of a signed numerator and
1144                  denominator --&amp;gt;
1145             &amp;lt;!ATTLIST &quot;TIFFSRational&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1146               &amp;lt;!-- The numerator and denominator, separated by a slash --&amp;gt;
1147               &amp;lt;!-- Data type: String --&amp;gt;
1148 
1149         &amp;lt;!ELEMENT &quot;TIFFFloats&quot; (TIFFFloat)*&amp;gt;
1150           &amp;lt;!-- A sequence of TIFFFloat nodes --&amp;gt;
1151 
1152           &amp;lt;!ELEMENT &quot;TIFFFloat&quot; EMPTY&amp;gt;
1153             &amp;lt;!-- A single-precision floating-point value --&amp;gt;
1154             &amp;lt;!ATTLIST &quot;TIFFFloat&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1155               &amp;lt;!-- The value --&amp;gt;
1156               &amp;lt;!-- Data type: String --&amp;gt;
1157 
1158         &amp;lt;!ELEMENT &quot;TIFFDoubles&quot; (TIFFDouble)*&amp;gt;
1159           &amp;lt;!-- A sequence of TIFFDouble nodes --&amp;gt;
1160 
1161           &amp;lt;!ELEMENT &quot;TIFFDouble&quot; EMPTY&amp;gt;
1162             &amp;lt;!-- A double-precision floating-point value --&amp;gt;
1163             &amp;lt;!ATTLIST &quot;TIFFDouble&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1164               &amp;lt;!-- The value --&amp;gt;
1165               &amp;lt;!-- Data type: String --&amp;gt;
1166 
1167         &amp;lt;!ELEMENT &quot;TIFFUndefined&quot; EMPTY&amp;gt;
1168           &amp;lt;!-- Uninterpreted byte data --&amp;gt;
1169           &amp;lt;!ATTLIST &quot;TIFFUndefined&quot; &quot;value&quot; #CDATA #IMPLIED&amp;gt;
1170             &amp;lt;!-- A list of comma-separated byte values --&amp;gt;
1171             &amp;lt;!-- Data type: String --&amp;gt;
1172 ]&amp;gt;
1173 &lt;/pre&gt;
1174 
1175 @since 9
1176 &lt;/main&gt;
1177 &lt;/body&gt;
1178 &lt;/html&gt;
    </pre>
  </body>
</html>