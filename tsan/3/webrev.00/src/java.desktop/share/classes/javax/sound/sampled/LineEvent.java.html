<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/java.desktop/share/classes/javax/sound/sampled/LineEvent.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 1999, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package javax.sound.sampled;
 27 
 28 import java.util.EventObject;
 29 
 30 /**
 31  * The {@code LineEvent} class encapsulates information that a line sends its
 32  * listeners whenever the line opens, closes, starts, or stops. Each of these
 33  * four state changes is represented by a corresponding type of event. A
 34  * listener receives the event as a parameter to its
 35  * {@link LineListener#update update} method. By querying the event, the
 36  * listener can learn the type of event, the line responsible for the event, and
 37  * how much data the line had processed when the event occurred.
 38  * &lt;p&gt;
 39  * Although this class implements Serializable, attempts to serialize a
 40  * {@code LineEvent} object will fail.
 41  *
 42  * @author Kara Kytle
 43  * @see Line
 44  * @see LineListener#update
 45  * @since 1.3
 46  *
 47  * @serial exclude
 48  */
 49 public class LineEvent extends EventObject {
 50 
 51     /**
 52      * Use serialVersionUID from JDK 1.3 for interoperability.
 53      */
 54     private static final long serialVersionUID = -1274246333383880410L;
 55 
 56     /**
 57      * The kind of line event ({@code OPEN}, {@code CLOSE}, {@code START}, or
 58      * {@code STOP}).
 59      *
 60      * @see #getType
 61      * @serial
 62      */
 63     @SuppressWarnings(&quot;serial&quot;) // Not statically typed as Serializable
 64     private final Type type;
 65 
 66     /**
 67      * The media position when the event occurred, expressed in sample frames.
 68      * Note that this field is only relevant to certain events generated by data
 69      * lines, such as {@code START} and {@code STOP}. For events generated by
 70      * lines that do not count sample frames, and for any other events for which
 71      * this value is not known, the position value should be
 72      * {@link AudioSystem#NOT_SPECIFIED}.
 73      *
 74      * @see #getFramePosition
 75      * @serial
 76      */
 77     private final long position;
 78 
 79     /**
 80      * Constructs a new event of the specified type, originating from the
 81      * specified line.
 82      *
 83      * @param  line the source of this event
 84      * @param  type the event type ({@code OPEN}, {@code CLOSE}, {@code START},
 85      *         or {@code STOP})
 86      * @param  position the number of sample frames that the line had already
 87      *         processed when the event occurred, or
 88      *         {@link AudioSystem#NOT_SPECIFIED}
 89      * @throws IllegalArgumentException if {@code line} is {@code null}
 90      */
 91     public LineEvent(Line line, Type type, long position) {
 92 
 93         super(line);
 94         this.type = type;
 95         this.position = position;
 96     }
 97 
 98     /**
 99      * Obtains the audio line that is the source of this event.
100      *
101      * @return the line responsible for this event
102      */
103     public final Line getLine() {
104         return (Line)getSource();
105     }
106 
107     /**
108      * Obtains the event&#39;s type.
109      *
110      * @return this event&#39;s type ({@link Type#OPEN}, {@link Type#CLOSE},
111      *         {@link Type#START}, or {@link Type#STOP})
112      */
113     public final Type getType() {
114         return type;
115     }
116 
117     /**
118      * Obtains the position in the line&#39;s audio data when the event occurred,
119      * expressed in sample frames. For example, if a source line had already
120      * played back 14 sample frames at the time it was paused, the pause event
121      * would report the line&#39;s position as 14. The next frame to be processed
122      * would be frame number 14 using zero-based numbering, or 15 using
123      * one-based numbering.
124      * &lt;p&gt;
125      * Note that this field is relevant only to certain events generated by data
126      * lines, such as {@code START} and {@code STOP}. For events generated by
127      * lines that do not count sample frames, and for any other events for which
128      * this value is not known, the position value should be
129      * {@link AudioSystem#NOT_SPECIFIED}.
130      *
131      * @return the line&#39;s position as a sample frame number
132      */
133     /*
134      * $$kk: 04.20.99: note to myself: should make sure our implementation is
135      * consistent with this.
136      * which is a reasonable definition....
137      */
138     public final long getFramePosition() {
139         return position;
140     }
141 
142     /**
143      * Obtains a string representation of the event. The contents of the string
144      * may vary between implementations of Java Sound.
145      *
146      * @return a string describing the event
147      */
148     @Override
149     public String toString() {
150         String sType = &quot;&quot;;
151         if (type != null) sType = type.toString()+&quot; &quot;;
152         String sLine;
153         if (getLine() == null) {
154             sLine = &quot;null&quot;;
155         } else {
156             sLine = getLine().toString();
157         }
158         return new String(sType + &quot;event from line &quot; + sLine);
159     }
160 
161     /**
162      * The LineEvent.Type inner class identifies what kind of event occurred on
163      * a line. Static instances are provided for the common types (OPEN, CLOSE,
164      * START, and STOP).
165      *
166      * @see LineEvent#getType()
167      */
168     public static class Type {
169 
170         /**
171          * Type name.
172          */
173         private final String name;
174 
175         /**
176          * Constructs a new event type.
177          *
178          * @param  name name of the type
179          */
180         protected Type(String name) {
181             this.name = name;
182         }
183 
184         //$$fb 2002-11-26: fix for 4695001: SPEC: description of equals() method contains typo
185 
186         /**
187          * Indicates whether the specified object is equal to this event type,
188          * returning {@code true} if the objects are the same.
189          *
190          * @param  obj the reference object with which to compare
191          * @return {@code true} if the specified object is equal to this event
192          *         type; {@code false} otherwise
193          */
194         @Override
195         public final boolean equals(Object obj) {
196             return super.equals(obj);
197         }
198 
199         /**
200          * Returns a hash code value for this event type.
201          *
202          * @return a hash code value for this event type
203          */
204         @Override
205         public final int hashCode() {
206             return super.hashCode();
207         }
208 
209         /**
210          * Returns the type name as the string representation.
211          *
212          * @return the type name as the string representation
213          */
214         @Override
215         public String toString() {
216             return name;
217         }
218 
219         // LINE EVENT TYPE DEFINES
220 
221         /**
222          * A type of event that is sent when a line opens, reserving system
223          * resources for itself.
224          *
225          * @see #CLOSE
226          * @see Line#open
227          */
228         public static final Type OPEN = new Type(&quot;Open&quot;);
229 
230         /**
231          * A type of event that is sent when a line closes, freeing the system
232          * resources it had obtained when it was opened.
233          *
234          * @see #OPEN
235          * @see Line#close
236          */
237         public static final Type CLOSE = new Type(&quot;Close&quot;);
238 
239         /**
240          * A type of event that is sent when a line begins to engage in active
241          * input or output of audio data in response to a
242          * {@link DataLine#start start} request.
243          *
244          * @see #STOP
245          * @see DataLine#start
246          */
247         public static final Type START = new Type(&quot;Start&quot;);
248 
249         /**
250          * A type of event that is sent when a line ceases active input or
251          * output of audio data in response to a {@link DataLine#stop stop}
252          * request, or because the end of media has been reached.
253          *
254          * @see #START
255          * @see DataLine#stop
256          */
257         public static final Type STOP = new Type(&quot;Stop&quot;);
258 
259         /**
260          * A type of event that is sent when a line ceases to engage in active
261          * input or output of audio data because the end of media has been
262          * reached.
263          */
264         /*
265          * ISSUE: we may want to get rid of this. Is JavaSound responsible for
266          * reporting this??
267          *
268          * [If it&#39;s decided to keep this API, the docs will need to be updated
269          * to include mention of EOM events elsewhere.]
270          */
271         //public static final Type EOM  = new Type(&quot;EOM&quot;);
272 
273         /**
274          * A type of event that is sent when a line begins to engage in active
275          * input or output of audio data. Examples of when this happens are when
276          * a source line begins or resumes writing data to its mixer, and when a
277          * target line begins or resumes reading data from its mixer.
278          *
279          * @see #STOP
280          * @see SourceDataLine#write
281          * @see TargetDataLine#read
282          * @see DataLine#start
283          */
284         //public static final Type ACTIVE       = new Type(&quot;ACTIVE&quot;);
285 
286         /**
287          * A type of event that is sent when a line ceases active input or
288          * output of audio data.
289          *
290          * @see #START
291          * @see DataLine#stop
292          */
293         //public static final Type INACTIVE     = new Type(&quot;INACTIVE&quot;);
294     }
295 }
    </pre>
  </body>
</html>