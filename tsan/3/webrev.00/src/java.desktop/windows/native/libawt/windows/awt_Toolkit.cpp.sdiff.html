<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/windows/native/libawt/windows/awt_Toolkit.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="awt_Rectangle.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="awt_Win32GraphicsDevice.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/windows/native/libawt/windows/awt_Toolkit.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1996, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
2448     reasonLock = GetStaticObject(env, reasonClassLocal, &quot;LOCK&quot;,
2449                                          &quot;Ljava/awt/desktop/UserSessionEvent$Reason;&quot;);
2450     CHECK_NULL (reasonLock);
2451     reasonLock = env-&gt;NewGlobalRef(reasonLock);
2452 
2453 
2454     AwtToolkit::userSessionMID =
2455     env-&gt;GetStaticMethodID(dPeerClassLocal, &quot;userSessionCallback&quot;,
2456                             &quot;(ZLjava/awt/desktop/UserSessionEvent$Reason;)V&quot;);
2457     DASSERT(AwtToolkit::userSessionMID != 0);
2458     CHECK_NULL(AwtToolkit::userSessionMID);
2459 
2460     AwtToolkit::systemSleepMID =
2461     env-&gt;GetStaticMethodID(dPeerClassLocal, &quot;systemSleepCallback&quot;, &quot;(Z)V&quot;);
2462     DASSERT(AwtToolkit::systemSleepMID != 0);
2463     CHECK_NULL(AwtToolkit::systemSleepMID);
2464 
2465     CATCH_BAD_ALLOC;
2466 }
2467 
<span class="line-removed">2468 </span>
<span class="line-removed">2469 /*</span>
<span class="line-removed">2470  * Class:     sun_awt_windows_Toolkit</span>
<span class="line-removed">2471  * Method:    disableCustomPalette</span>
<span class="line-removed">2472  * Signature: ()V</span>
<span class="line-removed">2473  */</span>
<span class="line-removed">2474 JNIEXPORT void JNICALL</span>
<span class="line-removed">2475 Java_sun_awt_windows_WToolkit_disableCustomPalette(JNIEnv *env, jclass cls) {</span>
<span class="line-removed">2476     AwtPalette::DisableCustomPalette();</span>
<span class="line-removed">2477 }</span>
<span class="line-removed">2478 </span>
2479 /*
2480  * Class:     sun_awt_windows_WToolkit
2481  * Method:    embeddedInit
2482  * Signature: ()Z
2483  */
2484 JNIEXPORT jboolean JNICALL
2485 Java_sun_awt_windows_WToolkit_embeddedInit(JNIEnv *env, jclass cls)
2486 {
2487     TRY;
2488 
2489     AwtToolkit::SetEnv(env);
2490 
2491     return AwtToolkit::GetInstance().Initialize(FALSE);
2492 
2493     CATCH_BAD_ALLOC_RET(JNI_FALSE);
2494 }
2495 
2496 /*
2497  * Class:     sun_awt_windows_WToolkit
2498  * Method:    embeddedDispose
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1996, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
2448     reasonLock = GetStaticObject(env, reasonClassLocal, &quot;LOCK&quot;,
2449                                          &quot;Ljava/awt/desktop/UserSessionEvent$Reason;&quot;);
2450     CHECK_NULL (reasonLock);
2451     reasonLock = env-&gt;NewGlobalRef(reasonLock);
2452 
2453 
2454     AwtToolkit::userSessionMID =
2455     env-&gt;GetStaticMethodID(dPeerClassLocal, &quot;userSessionCallback&quot;,
2456                             &quot;(ZLjava/awt/desktop/UserSessionEvent$Reason;)V&quot;);
2457     DASSERT(AwtToolkit::userSessionMID != 0);
2458     CHECK_NULL(AwtToolkit::userSessionMID);
2459 
2460     AwtToolkit::systemSleepMID =
2461     env-&gt;GetStaticMethodID(dPeerClassLocal, &quot;systemSleepCallback&quot;, &quot;(Z)V&quot;);
2462     DASSERT(AwtToolkit::systemSleepMID != 0);
2463     CHECK_NULL(AwtToolkit::systemSleepMID);
2464 
2465     CATCH_BAD_ALLOC;
2466 }
2467 











2468 /*
2469  * Class:     sun_awt_windows_WToolkit
2470  * Method:    embeddedInit
2471  * Signature: ()Z
2472  */
2473 JNIEXPORT jboolean JNICALL
2474 Java_sun_awt_windows_WToolkit_embeddedInit(JNIEnv *env, jclass cls)
2475 {
2476     TRY;
2477 
2478     AwtToolkit::SetEnv(env);
2479 
2480     return AwtToolkit::GetInstance().Initialize(FALSE);
2481 
2482     CATCH_BAD_ALLOC_RET(JNI_FALSE);
2483 }
2484 
2485 /*
2486  * Class:     sun_awt_windows_WToolkit
2487  * Method:    embeddedDispose
</pre>
</td>
</tr>
</table>
<center><a href="awt_Rectangle.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="awt_Win32GraphicsDevice.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>