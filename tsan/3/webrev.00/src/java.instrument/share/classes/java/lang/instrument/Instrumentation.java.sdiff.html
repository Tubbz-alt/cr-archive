<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.instrument/share/classes/java/lang/instrument/Instrumentation.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../java.desktop/windows/native/libsplashscreen/splashscreen_sys.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../native/libinstrument/FileSystemSupport.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.instrument/share/classes/java/lang/instrument/Instrumentation.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 49  * There are two ways to obtain an instance of the
 50  * &lt;code&gt;Instrumentation&lt;/code&gt; interface:
 51  *
 52  * &lt;ol&gt;
 53  *   &lt;li&gt;&lt;p&gt; When a JVM is launched in a way that indicates an agent
 54  *     class. In that case an &lt;code&gt;Instrumentation&lt;/code&gt; instance
 55  *     is passed to the &lt;code&gt;premain&lt;/code&gt; method of the agent class.
 56  *     &lt;/p&gt;&lt;/li&gt;
 57  *   &lt;li&gt;&lt;p&gt; When a JVM provides a mechanism to start agents sometime
 58  *     after the JVM is launched. In that case an &lt;code&gt;Instrumentation&lt;/code&gt;
 59  *     instance is passed to the &lt;code&gt;agentmain&lt;/code&gt; method of the
 60  *     agent code. &lt;/p&gt; &lt;/li&gt;
 61  * &lt;/ol&gt;
 62  * &lt;p&gt;
 63  * These mechanisms are described in the
 64  * {@linkplain java.lang.instrument package specification}.
 65  * &lt;p&gt;
 66  * Once an agent acquires an &lt;code&gt;Instrumentation&lt;/code&gt; instance,
 67  * the agent may call methods on the instance at any time.
 68  *



 69  * @since   1.5
 70  */
 71 public interface Instrumentation {
 72     /**
 73      * Registers the supplied transformer. All future class definitions
 74      * will be seen by the transformer, except definitions of classes upon which any
 75      * registered transformer is dependent.
 76      * The transformer is called when classes are loaded, when they are
 77      * {@linkplain #redefineClasses redefined}. and if &lt;code&gt;canRetransform&lt;/code&gt; is true,
 78      * when they are {@linkplain #retransformClasses retransformed}.
 79      * {@link ClassFileTransformer} defines the order of transform calls.
 80      *
 81      * If a transformer throws
 82      * an exception during execution, the JVM will still call the other registered
 83      * transformers in order. The same transformer may be added more than once,
 84      * but it is strongly discouraged -- avoid this by creating a new instance of
 85      * transformer class.
 86      * &lt;P&gt;
 87      * This method is intended for use in instrumentation, as described in the
 88      * {@linkplain Instrumentation class specification}.
</pre>
<hr />
<pre>
206      *
207      * &lt;P&gt;
208      * If a retransformed method has active stack frames, those active frames continue to
209      * run the bytecodes of the original method.
210      * The retransformed method will be used on new invokes.
211      *
212      * &lt;P&gt;
213      * This method does not cause any initialization except that which would occur
214      * under the customary JVM semantics. In other words, redefining a class
215      * does not cause its initializers to be run. The values of static variables
216      * will remain as they were prior to the call.
217      *
218      * &lt;P&gt;
219      * Instances of the retransformed class are not affected.
220      *
221      * &lt;P&gt;
222      * The retransformation may change method bodies, the constant pool and
223      * attributes (unless explicitly prohibited).
224      * The retransformation must not add, remove or rename fields or methods, change the
225      * signatures of methods, or change inheritance.
<span class="line-modified">226      * The retransformation must not change the &lt;code&gt;NestHost&lt;/code&gt; or</span>
<span class="line-modified">227      * &lt;code&gt;NestMembers&lt;/code&gt; attributes.</span>
228      * These restrictions may be lifted in future versions.
229      * The class file bytes are not checked, verified and installed
230      * until after the transformations have been applied, if the resultant bytes are in
231      * error this method will throw an exception.
232      *
233      * &lt;P&gt;
234      * If this method throws an exception, no classes have been retransformed.
235      * &lt;P&gt;
236      * This method is intended for use in instrumentation, as described in the
237      * {@linkplain Instrumentation class specification}.
238      *
239      * @param classes array of classes to retransform;
240      *                a zero-length array is allowed, in this case, this method does nothing
241      * @throws java.lang.instrument.UnmodifiableClassException if a specified class cannot be modified
242      * ({@link #isModifiableClass} would return &lt;code&gt;false&lt;/code&gt;)
243      * @throws java.lang.UnsupportedOperationException if the current configuration of the JVM does not allow
244      * retransformation ({@link #isRetransformClassesSupported} is false) or the retransformation attempted
245      * to make unsupported changes
246      * @throws java.lang.ClassFormatError if the data did not contain a valid class
247      * @throws java.lang.NoClassDefFoundError if the name in the class file is not equal to the name of the class
</pre>
<hr />
<pre>
297      *
298      * &lt;P&gt;
299      * If a redefined method has active stack frames, those active frames continue to
300      * run the bytecodes of the original method.
301      * The redefined method will be used on new invokes.
302      *
303      * &lt;P&gt;
304      * This method does not cause any initialization except that which would occur
305      * under the customary JVM semantics. In other words, redefining a class
306      * does not cause its initializers to be run. The values of static variables
307      * will remain as they were prior to the call.
308      *
309      * &lt;P&gt;
310      * Instances of the redefined class are not affected.
311      *
312      * &lt;P&gt;
313      * The redefinition may change method bodies, the constant pool and attributes
314      * (unless explicitly prohibited).
315      * The redefinition must not add, remove or rename fields or methods, change the
316      * signatures of methods, or change inheritance.
<span class="line-modified">317      * The redefinition must not change the &lt;code&gt;NestHost&lt;/code&gt; or</span>
<span class="line-modified">318      * &lt;code&gt;NestMembers&lt;/code&gt; attributes.</span>
319      * These restrictions may be lifted in future versions.
320      * The class file bytes are not checked, verified and installed
321      * until after the transformations have been applied, if the resultant bytes are in
322      * error this method will throw an exception.
323      *
324      * &lt;P&gt;
325      * If this method throws an exception, no classes have been redefined.
326      * &lt;P&gt;
327      * This method is intended for use in instrumentation, as described in the
328      * {@linkplain Instrumentation class specification}.
329      *
330      * @param definitions array of classes to redefine with corresponding definitions;
331      *                    a zero-length array is allowed, in this case, this method does nothing
332      * @throws java.lang.instrument.UnmodifiableClassException if a specified class cannot be modified
333      * ({@link #isModifiableClass} would return &lt;code&gt;false&lt;/code&gt;)
334      * @throws java.lang.UnsupportedOperationException if the current configuration of the JVM does not allow
335      * redefinition ({@link #isRedefineClassesSupported} is false) or the redefinition attempted
336      * to make unsupported changes
337      * @throws java.lang.ClassFormatError if the data did not contain a valid class
338      * @throws java.lang.NoClassDefFoundError if the name in the class file is not equal to the name of the class
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 49  * There are two ways to obtain an instance of the
 50  * &lt;code&gt;Instrumentation&lt;/code&gt; interface:
 51  *
 52  * &lt;ol&gt;
 53  *   &lt;li&gt;&lt;p&gt; When a JVM is launched in a way that indicates an agent
 54  *     class. In that case an &lt;code&gt;Instrumentation&lt;/code&gt; instance
 55  *     is passed to the &lt;code&gt;premain&lt;/code&gt; method of the agent class.
 56  *     &lt;/p&gt;&lt;/li&gt;
 57  *   &lt;li&gt;&lt;p&gt; When a JVM provides a mechanism to start agents sometime
 58  *     after the JVM is launched. In that case an &lt;code&gt;Instrumentation&lt;/code&gt;
 59  *     instance is passed to the &lt;code&gt;agentmain&lt;/code&gt; method of the
 60  *     agent code. &lt;/p&gt; &lt;/li&gt;
 61  * &lt;/ol&gt;
 62  * &lt;p&gt;
 63  * These mechanisms are described in the
 64  * {@linkplain java.lang.instrument package specification}.
 65  * &lt;p&gt;
 66  * Once an agent acquires an &lt;code&gt;Instrumentation&lt;/code&gt; instance,
 67  * the agent may call methods on the instance at any time.
 68  *
<span class="line-added"> 69  * @apiNote This interface is not intended to be implemented outside of</span>
<span class="line-added"> 70  * the java.instrument module.</span>
<span class="line-added"> 71  *</span>
 72  * @since   1.5
 73  */
 74 public interface Instrumentation {
 75     /**
 76      * Registers the supplied transformer. All future class definitions
 77      * will be seen by the transformer, except definitions of classes upon which any
 78      * registered transformer is dependent.
 79      * The transformer is called when classes are loaded, when they are
 80      * {@linkplain #redefineClasses redefined}. and if &lt;code&gt;canRetransform&lt;/code&gt; is true,
 81      * when they are {@linkplain #retransformClasses retransformed}.
 82      * {@link ClassFileTransformer} defines the order of transform calls.
 83      *
 84      * If a transformer throws
 85      * an exception during execution, the JVM will still call the other registered
 86      * transformers in order. The same transformer may be added more than once,
 87      * but it is strongly discouraged -- avoid this by creating a new instance of
 88      * transformer class.
 89      * &lt;P&gt;
 90      * This method is intended for use in instrumentation, as described in the
 91      * {@linkplain Instrumentation class specification}.
</pre>
<hr />
<pre>
209      *
210      * &lt;P&gt;
211      * If a retransformed method has active stack frames, those active frames continue to
212      * run the bytecodes of the original method.
213      * The retransformed method will be used on new invokes.
214      *
215      * &lt;P&gt;
216      * This method does not cause any initialization except that which would occur
217      * under the customary JVM semantics. In other words, redefining a class
218      * does not cause its initializers to be run. The values of static variables
219      * will remain as they were prior to the call.
220      *
221      * &lt;P&gt;
222      * Instances of the retransformed class are not affected.
223      *
224      * &lt;P&gt;
225      * The retransformation may change method bodies, the constant pool and
226      * attributes (unless explicitly prohibited).
227      * The retransformation must not add, remove or rename fields or methods, change the
228      * signatures of methods, or change inheritance.
<span class="line-modified">229      * The retransformation must not change the &lt;code&gt;NestHost&lt;/code&gt;,</span>
<span class="line-modified">230      * &lt;code&gt;NestMembers&lt;/code&gt;, or &lt;code&gt;Record&lt;/code&gt; attributes.</span>
231      * These restrictions may be lifted in future versions.
232      * The class file bytes are not checked, verified and installed
233      * until after the transformations have been applied, if the resultant bytes are in
234      * error this method will throw an exception.
235      *
236      * &lt;P&gt;
237      * If this method throws an exception, no classes have been retransformed.
238      * &lt;P&gt;
239      * This method is intended for use in instrumentation, as described in the
240      * {@linkplain Instrumentation class specification}.
241      *
242      * @param classes array of classes to retransform;
243      *                a zero-length array is allowed, in this case, this method does nothing
244      * @throws java.lang.instrument.UnmodifiableClassException if a specified class cannot be modified
245      * ({@link #isModifiableClass} would return &lt;code&gt;false&lt;/code&gt;)
246      * @throws java.lang.UnsupportedOperationException if the current configuration of the JVM does not allow
247      * retransformation ({@link #isRetransformClassesSupported} is false) or the retransformation attempted
248      * to make unsupported changes
249      * @throws java.lang.ClassFormatError if the data did not contain a valid class
250      * @throws java.lang.NoClassDefFoundError if the name in the class file is not equal to the name of the class
</pre>
<hr />
<pre>
300      *
301      * &lt;P&gt;
302      * If a redefined method has active stack frames, those active frames continue to
303      * run the bytecodes of the original method.
304      * The redefined method will be used on new invokes.
305      *
306      * &lt;P&gt;
307      * This method does not cause any initialization except that which would occur
308      * under the customary JVM semantics. In other words, redefining a class
309      * does not cause its initializers to be run. The values of static variables
310      * will remain as they were prior to the call.
311      *
312      * &lt;P&gt;
313      * Instances of the redefined class are not affected.
314      *
315      * &lt;P&gt;
316      * The redefinition may change method bodies, the constant pool and attributes
317      * (unless explicitly prohibited).
318      * The redefinition must not add, remove or rename fields or methods, change the
319      * signatures of methods, or change inheritance.
<span class="line-modified">320      * The redefinition must not change the &lt;code&gt;NestHost&lt;/code&gt;,</span>
<span class="line-modified">321      * &lt;code&gt;NestMembers&lt;/code&gt;, or &lt;code&gt;Record&lt;/code&gt; attributes.</span>
322      * These restrictions may be lifted in future versions.
323      * The class file bytes are not checked, verified and installed
324      * until after the transformations have been applied, if the resultant bytes are in
325      * error this method will throw an exception.
326      *
327      * &lt;P&gt;
328      * If this method throws an exception, no classes have been redefined.
329      * &lt;P&gt;
330      * This method is intended for use in instrumentation, as described in the
331      * {@linkplain Instrumentation class specification}.
332      *
333      * @param definitions array of classes to redefine with corresponding definitions;
334      *                    a zero-length array is allowed, in this case, this method does nothing
335      * @throws java.lang.instrument.UnmodifiableClassException if a specified class cannot be modified
336      * ({@link #isModifiableClass} would return &lt;code&gt;false&lt;/code&gt;)
337      * @throws java.lang.UnsupportedOperationException if the current configuration of the JVM does not allow
338      * redefinition ({@link #isRedefineClassesSupported} is false) or the redefinition attempted
339      * to make unsupported changes
340      * @throws java.lang.ClassFormatError if the data did not contain a valid class
341      * @throws java.lang.NoClassDefFoundError if the name in the class file is not equal to the name of the class
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../java.desktop/windows/native/libsplashscreen/splashscreen_sys.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../native/libinstrument/FileSystemSupport.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>