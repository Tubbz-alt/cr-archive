<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.management.rmi/share/classes/javax/management/remote/rmi/package.html</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 &lt;html&gt;
  2 &lt;head&gt;
  3     &lt;title&gt;RMI connector&lt;/title&gt;
  4 &lt;!--
<a name="1" id="anc1"></a><span class="line-modified">  5 Copyright (c) 2002, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  6 DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  7 
  8 This code is free software; you can redistribute it and/or modify it
  9 under the terms of the GNU General Public License version 2 only, as
 10 published by the Free Software Foundation.  Oracle designates this
 11 particular file as subject to the &quot;Classpath&quot; exception as provided
 12 by Oracle in the LICENSE file that accompanied this code.
 13 
 14 This code is distributed in the hope that it will be useful, but WITHOUT
 15 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 16 FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 17 version 2 for more details (a copy is included in the LICENSE file that
 18 accompanied this code).
 19 
 20 You should have received a copy of the GNU General Public License version
 21 2 along with this work; if not, write to the Free Software Foundation,
 22 Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 23 
 24 Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 25 or visit www.oracle.com if you need additional information or have any
 26 questions.
 27 --&gt;
 28 &lt;/head&gt;
 29 &lt;body bgcolor=&quot;white&quot;&gt;
 30     &lt;p&gt;The RMI connector is a connector for the JMX Remote API that
 31       uses RMI to transmit client requests to a remote MBean server.
 32       This package defines the classes that the user of an RMI
 33       connector needs to reference directly, for both the client and
 34       server sides.  It also defines certain classes that the user
 35       will not usually reference directly, but that must be defined so
 36       that different implementations of the RMI connector can
 37       interoperate.&lt;/p&gt;
 38 
 39     &lt;p&gt;The RMI connector supports the JRMP transport for RMI.&lt;/p&gt;
 40 
 41     &lt;p&gt;Like most connectors in the JMX Remote API, an RMI connector
 42       usually has an address, which
 43       is a {@link javax.management.remote.JMXServiceURL
 44       JMXServiceURL}.  The protocol part of this address is
 45       &lt;code&gt;rmi&lt;/code&gt; for a connector that uses the default RMI
 46       transport (JRMP).&lt;/p&gt;
 47 
 48     &lt;p&gt;There are two forms for RMI connector addresses:&lt;/p&gt;
 49 
 50     &lt;ul&gt;
 51       &lt;li&gt;
 52 	In the &lt;em&gt;JNDI form&lt;/em&gt;, the URL indicates &lt;em&gt;where to find
 53 	an RMI stub for the connector&lt;/em&gt;.  This RMI stub is a Java
 54 	object of type {@link javax.management.remote.rmi.RMIServer
 55 	RMIServer} that gives remote access to the connector server.
 56 	With this address form, the RMI stub is obtained from an
 57 	external directory entry included in the URL.  An external
 58 	directory is any directory recognized by {@link javax.naming
 59 	JNDI}, typically the RMI registry, LDAP, or COS Naming.
 60 
 61       &lt;li&gt;
 62 	In the &lt;em&gt;encoded form&lt;/em&gt;, the URL directly includes the
 63 	information needed to connect to the connector server.  When
 64 	using RMI/JRMP, the encoded form is the serialized RMI stub
 65 	for the server object, encoded using BASE64 without embedded
 66 	newlines.
 67     &lt;/ul&gt;
 68 
 69     &lt;p&gt;Addresses are covered in more detail below.&lt;/p&gt;
 70 
 71 
<a name="2" id="anc2"></a><span class="line-modified"> 72     &lt;h3&gt;Creating an RMI connector server&lt;/h3&gt;</span>
 73 
 74     &lt;p&gt;The usual way to create an RMI connector server is to supply an
 75       RMI connector address to the method {@link
 76       javax.management.remote.JMXConnectorServerFactory#newJMXConnectorServer
 77       JMXConnectorServerFactory.newJMXConnectorServer}.  The MBean
 78       server to which the connector server is attached can be
 79       specified as a parameter to that method.  Alternatively, the
 80       connector server can be registered as an MBean in that MBean
 81       server.&lt;/p&gt;
 82 
 83     &lt;p&gt;An RMI connector server can also be created by constructing an
 84       instance of {@link
 85       javax.management.remote.rmi.RMIConnectorServer
 86       RMIConnectorServer}, explicitly or through the MBean server&#39;s
 87       &lt;code&gt;createMBean&lt;/code&gt; method.&lt;/p&gt;
 88 
<a name="3" id="anc3"></a><span class="line-modified"> 89     &lt;h4&gt;Choosing the RMI transport&lt;/h4&gt;</span>
 90 
 91     &lt;p&gt;You can choose the RMI transport by specifying
 92       &lt;code&gt;rmi&lt;/code&gt; in the &lt;code&gt;&lt;em&gt;protocol&lt;/em&gt;&lt;/code&gt; part of the
 93       &lt;code&gt;serviceURL&lt;/code&gt; when creating the connector server.  You
 94       can also create specialized connector servers by instantiating
 95       an appropriate subclass of {@link
 96       javax.management.remote.rmi.RMIServerImpl RMIServerImpl} and
 97       supplying it to the &lt;code&gt;RMIConnectorServer&lt;/code&gt;
 98       constructor.&lt;/p&gt;
 99 
100 
<a name="4" id="anc4"></a><span class="line-modified">101     &lt;h4&gt;&lt;a id=&quot;servergen&quot;&gt;Connector addresses generated by the</span>
<span class="line-modified">102 	server&lt;/a&gt;&lt;/h4&gt;</span>
103 
104     &lt;p&gt;If the &lt;code&gt;serviceURL&lt;/code&gt; you specify has an empty URL
105       path (after the optional host and port), or if you do not
106       specify a &lt;code&gt;serviceURL&lt;/code&gt;, then the connector server
107       will fabricate a new &lt;code&gt;JMXServiceURL&lt;/code&gt; that clients can
108       use to connect:&lt;/p&gt;
109 
110     &lt;ul&gt;
111 
112       &lt;li&gt;&lt;p&gt;If the &lt;code&gt;serviceURL&lt;/code&gt; looks like:&lt;/p&gt;
113 
114 	&lt;pre&gt;
115 	&lt;code&gt;service:jmx:rmi://&lt;em&gt;host&lt;/em&gt;:&lt;em&gt;port&lt;/em&gt;&lt;/code&gt;
116 	&lt;/pre&gt;
117 
118 	&lt;p&gt;then the connector server will generate an {@link
119 	javax.management.remote.rmi.RMIJRMPServerImpl
120 	RMIJRMPServerImpl} and the returned &lt;code&gt;JMXServiceURL&lt;/code&gt;
121 	looks like:&lt;/p&gt;
122 
123 	&lt;pre&gt;
124 	&lt;code&gt;service:jmx:rmi://&lt;em&gt;host&lt;/em&gt;:&lt;em&gt;port&lt;/em&gt;/stub/&lt;em&gt;XXXX&lt;/em&gt;&lt;/code&gt;
125 	&lt;/pre&gt;
126 
127 	&lt;p&gt;where &lt;code&gt;&lt;em&gt;XXXX&lt;/em&gt;&lt;/code&gt; is the serialized form of the
128 	stub for the generated object, encoded in BASE64 without
129 	newlines.&lt;/p&gt;
130 
131       &lt;li&gt;&lt;p&gt;If there is no &lt;code&gt;serviceURL&lt;/code&gt;, there must be a
132 	user-provided &lt;code&gt;RMIServerImpl&lt;/code&gt;.  The connector server
133         will generate a &lt;code&gt;JMXServiceURL&lt;/code&gt; using the &lt;code&gt;rmi&lt;/code&gt;
134 	form.&lt;/p&gt;
135 
136     &lt;/ul&gt;
137 
138     &lt;p&gt;The &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt; in a user-provided
139       &lt;code&gt;serviceURL&lt;/code&gt; is optional.  If present, it is copied
140       into the generated &lt;code&gt;JMXServiceURL&lt;/code&gt; but otherwise
141       ignored.  If absent, the generated &lt;code&gt;JXMServiceURL&lt;/code&gt;
142       will have the local host name.&lt;/p&gt;
143 
144     &lt;p&gt;The &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt; in a user-provided
145       &lt;code&gt;serviceURL&lt;/code&gt; is also optional.  If present, it is
146       also copied into the generated &lt;code&gt;JMXServiceURL&lt;/code&gt;;
147       otherwise, the generated &lt;code&gt;JMXServiceURL&lt;/code&gt; has no port.
148       For an &lt;code&gt;serviceURL&lt;/code&gt; using the &lt;code&gt;rmi&lt;/code&gt;
149       protocol, the &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt;, if present, indicates
150       what port the generated remote object should be exported on.  It
151       has no other effect.&lt;/p&gt;
152 
153     &lt;p&gt;If the user provides an &lt;code&gt;RMIServerImpl&lt;/code&gt; rather than a
154       &lt;code&gt;JMXServiceURL&lt;/code&gt;, then the generated
155       &lt;code&gt;JMXServiceURL&lt;/code&gt; will have the local host name in its
156       &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt; part and no
157       &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt;.&lt;/p&gt;
158 
159 
<a name="5" id="anc5"></a><span class="line-modified">160     &lt;h4&gt;&lt;a id=&quot;directory&quot;&gt;Connector addresses based on directory</span>
<span class="line-modified">161 	entries&lt;/a&gt;&lt;/h4&gt;</span>
162 
163     &lt;p&gt;As an alternative to the generated addresses just described,
164       the &lt;code&gt;serviceURL&lt;/code&gt; address supplied when creating a
165       connector server can specify a &lt;em&gt;directory address&lt;/em&gt; in
166       which to store the provided or generated &lt;code&gt;RMIServer&lt;/code&gt;
167       stub.  This directory address is then used by both client and
168       server.&lt;/p&gt;
169 
170     &lt;p&gt;In this case, the &lt;code&gt;serviceURL&lt;/code&gt; has the following form:&lt;/p&gt;
171 
172     &lt;pre&gt;
173     &lt;code&gt;service:jmx:rmi://&lt;em&gt;host&lt;/em&gt;:&lt;em&gt;port&lt;/em&gt;/jndi/&lt;em&gt;jndi-name&lt;/em&gt;&lt;/code&gt;
174     &lt;/pre&gt;
175 
176     &lt;p&gt;Here, &lt;code&gt;&lt;em&gt;jndi-name&lt;/em&gt;&lt;/code&gt; is a string that can be
177       supplied to {@link javax.naming.InitialContext#bind
178       javax.naming.InitialContext.bind}.&lt;/p&gt;
179 
180     &lt;p&gt;As usual, the &lt;code&gt;&lt;em&gt;host&lt;/em&gt;&lt;/code&gt; and
181       &lt;code&gt;:&lt;em&gt;port&lt;/em&gt;&lt;/code&gt; can be omitted.&lt;/p&gt;
182 
183     &lt;p&gt;The connector server will generate an
184       &lt;code&gt;RMIServerImpl&lt;/code&gt; based on the protocol
185       (&lt;code&gt;rmi&lt;/code&gt;) and the &lt;code&gt;&lt;em&gt;port&lt;/em&gt;&lt;/code&gt; if any.  When
186       the connector server is started, it will derive a stub from this
187       object using its {@link
188       javax.management.remote.rmi.RMIServerImpl#toStub toStub} method
189       and store the object using the given
190       &lt;code&gt;&lt;em&gt;jndi-name&lt;/em&gt;&lt;/code&gt;.  The properties defined by the
191       JNDI API are consulted as usual.&lt;/p&gt;
192 
193     &lt;p&gt;For example, if the &lt;code&gt;JMXServiceURL&lt;/code&gt; is:
194 
195       &lt;pre&gt;
196       &lt;code&gt;service:jmx:rmi://ignoredhost/jndi/rmi://myhost/myname&lt;/code&gt;
197       &lt;/pre&gt;
198 
199       then the connector server will generate an
200       &lt;code&gt;RMIJRMPServerImpl&lt;/code&gt; and store its stub using the JNDI
201       name
202 
203       &lt;pre&gt;
204       &lt;code&gt;rmi://myhost/myname&lt;/code&gt;
205       &lt;/pre&gt;
206 
207       which means entry &lt;code&gt;myname&lt;/code&gt; in the RMI registry
208       running on the default port of host &lt;code&gt;myhost&lt;/code&gt;.  Note
209       that the RMI registry only allows registration from the local
210       host.  So, in this case, &lt;code&gt;myhost&lt;/code&gt; must be the name
211       (or a name) of the host that the connector server is running
212       on.
213 
214     &lt;p&gt;In this &lt;code&gt;JMXServiceURL&lt;/code&gt;, the first &lt;code&gt;rmi:&lt;/code&gt;
215       specifies the RMI
216       connector, while the second &lt;code&gt;rmi:&lt;/code&gt; specifies the RMI
217       registry.
218 
219     &lt;p&gt;As another example, if the &lt;code&gt;JMXServiceURL&lt;/code&gt; is:
220 
221       &lt;pre&gt;
222       &lt;code&gt;service:jmx:rmi://ignoredhost/jndi/ldap://dirhost:9999/cn=this,ou=that&lt;/code&gt;
223       &lt;/pre&gt;
224 
225       then the connector server will generate an
226       &lt;code&gt;RMIJRMPServerImpl&lt;/code&gt; and store its stub using the JNDI
227       name
228 
229       &lt;pre&gt;
230       &lt;code&gt;ldap://dirhost:9999/cn=this,ou=that&lt;/code&gt;
231       &lt;/pre&gt;
232 
233       which means entry &lt;code&gt;cn=this,ou=that&lt;/code&gt; in the LDAP
234       directory running on port 9999 of host &lt;code&gt;dirhost&lt;/code&gt;.
235 
236     &lt;p&gt;If the &lt;code&gt;JMXServiceURL&lt;/code&gt; is:
237 
238       &lt;pre&gt;
239       &lt;code&gt;service:jmx:rmi://ignoredhost/jndi/cn=this,ou=that&lt;/code&gt;
240       &lt;/pre&gt;
241 
242       then the connector server will generate an
243       &lt;code&gt;RMIJRMPServerImpl&lt;/code&gt; and store its stub using the JNDI
244       name
245 
246       &lt;pre&gt;
247       &lt;code&gt;cn=this,ou=that&lt;/code&gt;
248       &lt;/pre&gt;
249 
250       For this case to work, the JNDI API must have been configured
251       appropriately to supply the information about what directory to
252       use.
253 
254     &lt;p&gt;In these examples, the host name &lt;code&gt;ignoredhost&lt;/code&gt; is
255       not used by the connector server or its clients.  It can be
256       omitted, for example:&lt;/p&gt;
257 
258       &lt;pre&gt;
259       &lt;code&gt;service:jmx:rmi:///jndi/cn=this,ou=that&lt;/code&gt;
260       &lt;/pre&gt;
261 
262     &lt;p&gt;However, it is good practice to use the name of the host
263       where the connector server is running.  This is often different
264       from the name of the directory host.&lt;/p&gt;
265 
266 
<a name="6" id="anc6"></a><span class="line-modified">267     &lt;h4&gt;Connector server attributes&lt;/h4&gt;</span>
268 
269     &lt;p&gt;When using the default JRMP transport, RMI socket factories can
270       be specified using the attributes
271       &lt;code&gt;jmx.remote.rmi.client.socket.factory&lt;/code&gt; and
272       &lt;code&gt;jmx.remote.rmi.server.socket.factory&lt;/code&gt; in the
273       &lt;code&gt;environment&lt;/code&gt; given to the
274       &lt;code&gt;RMIConnectorServer&lt;/code&gt; constructor.  The values of these
275       attributes must be of type {@link
276       java.rmi.server.RMIClientSocketFactory} and {@link
277       java.rmi.server.RMIServerSocketFactory}, respectively.  These
278       factories are used when creating the RMI objects associated with
279       the connector.&lt;/p&gt;
280 
<a name="7" id="anc7"></a><span class="line-modified">281     &lt;h3&gt;Creating an RMI connector client&lt;/h3&gt;</span>
282 
283     &lt;p&gt;An RMI connector client is usually constructed using {@link
284       javax.management.remote.JMXConnectorFactory}, with a
285       &lt;code&gt;JMXServiceURL&lt;/code&gt; that has &lt;code&gt;rmi&lt;/code&gt; as its protocol.&lt;/p&gt;
286 
287     &lt;p&gt;If the &lt;code&gt;JMXServiceURL&lt;/code&gt; was generated by the server,
288       as described above under &lt;a href=&quot;#servergen&quot;&gt;&quot;connector
289       addresses generated by the server&quot;&lt;/a&gt;, then the client will
290       need to obtain it directly or indirectly from the server.
291       Typically, the server makes the &lt;code&gt;JMXServiceURL&lt;/code&gt;
292       available by storing it in a file or a lookup service.&lt;/p&gt;
293 
294     &lt;p&gt;If the &lt;code&gt;JMXServiceURL&lt;/code&gt; uses the directory syntax, as
295       described above under &lt;a href=&quot;#directory&quot;&gt;&quot;connector addresses
296       based on directory entries&quot;&lt;/a&gt;, then the client may obtain it
297       as just explained, or client and server may both know the
298       appropriate directory entry to use.  For example, if the
299       connector server for the Whatsit agent uses the entry
300       &lt;code&gt;whatsit-agent-connector&lt;/code&gt; in the RMI registry on host
301       &lt;code&gt;myhost&lt;/code&gt;, then client and server can both know
302       that the appropriate &lt;code&gt;JMXServiceURL&lt;/code&gt; is:&lt;/p&gt;
303 
304     &lt;pre&gt;
305     &lt;code&gt;service:jmx:rmi:///jndi/rmi://myhost/whatsit-agent-connector&lt;/code&gt;
306     &lt;/pre&gt;
307 
308     &lt;p&gt;If you have an RMI stub of type {@link
309       javax.management.remote.rmi.RMIServer RMIServer}, you can
310       construct an RMI connection directly by using the appropriate
311       constructor of {@link javax.management.remote.rmi.RMIConnector
312       RMIConnector}.&lt;/p&gt;
313 
<a name="8" id="anc8"></a><span class="line-modified">314     &lt;h3&gt;Dynamic code downloading&lt;/h3&gt;</span>
315 
316     &lt;p&gt;If an RMI connector client or server receives from its peer an
317       instance of a class that it does not know, and if dynamic code
318       downloading is active for the RMI connection, then the class can
319       be downloaded from a codebase specified by the peer.
320       {@extLink rmi_guide Java RMI Guide} explains this in more detail.&lt;/p&gt;
321 
322     @see &lt;a href=&quot;http://www.ietf.org/rfc/rfc2045.txt&quot;&gt;RFC 2045,
323     section 6.8, &quot;Base64 Content-Transfer-Encoding&quot;&lt;/a&gt;
324 
325 
326     @since 1.5
327 
328   &lt;/body&gt;
329 &lt;/html&gt;
<a name="9" id="anc9"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="9" type="hidden" />
</body>
</html>