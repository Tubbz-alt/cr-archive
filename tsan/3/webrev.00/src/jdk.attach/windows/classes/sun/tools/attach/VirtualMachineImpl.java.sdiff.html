<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.attach/windows/classes/sun/tools/attach/VirtualMachineImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../solaris/classes/sun/tools/attach/VirtualMachineImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.charsets/share/classes/sun/nio/cs/ext/ExtendedCharsets.java.template.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.attach/windows/classes/sun/tools/attach/VirtualMachineImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
152         public synchronized int read() throws IOException {
153             byte b[] = new byte[1];
154             int n = this.read(b, 0, 1);
155             if (n == 1) {
156                 return b[0] &amp; 0xff;
157             } else {
158                 return -1;
159             }
160         }
161 
162         public synchronized int read(byte[] bs, int off, int len) throws IOException {
163             if ((off &lt; 0) || (off &gt; bs.length) || (len &lt; 0) ||
164                 ((off + len) &gt; bs.length) || ((off + len) &lt; 0)) {
165                 throw new IndexOutOfBoundsException();
166             } else if (len == 0)
167                 return 0;
168 
169             return VirtualMachineImpl.readPipe(hPipe, bs, off, len);
170         }
171 
<span class="line-modified">172         public void close() throws IOException {</span>
173             if (hPipe != -1) {
<span class="line-modified">174                 VirtualMachineImpl.closePipe(hPipe);</span>
175                 hPipe = -1;

176            }
177         }
178     }
179 
180 
181     //-- native methods
182 
183     static native void init();
184 
185     static native byte[] generateStub();
186 
187     static native long openProcess(int pid) throws IOException;
188 
189     static native void closeProcess(long hProcess) throws IOException;
190 
191     static native long createPipe(String name) throws IOException;
192 
193     static native void closePipe(long hPipe) throws IOException;
194 
195     static native void connectPipe(long hPipe) throws IOException;
</pre>
</td>
<td>
<hr />
<pre>
152         public synchronized int read() throws IOException {
153             byte b[] = new byte[1];
154             int n = this.read(b, 0, 1);
155             if (n == 1) {
156                 return b[0] &amp; 0xff;
157             } else {
158                 return -1;
159             }
160         }
161 
162         public synchronized int read(byte[] bs, int off, int len) throws IOException {
163             if ((off &lt; 0) || (off &gt; bs.length) || (len &lt; 0) ||
164                 ((off + len) &gt; bs.length) || ((off + len) &lt; 0)) {
165                 throw new IndexOutOfBoundsException();
166             } else if (len == 0)
167                 return 0;
168 
169             return VirtualMachineImpl.readPipe(hPipe, bs, off, len);
170         }
171 
<span class="line-modified">172         public synchronized void close() throws IOException {</span>
173             if (hPipe != -1) {
<span class="line-modified">174                 long toClose = hPipe;</span>
175                 hPipe = -1;
<span class="line-added">176                 VirtualMachineImpl.closePipe(toClose);</span>
177            }
178         }
179     }
180 
181 
182     //-- native methods
183 
184     static native void init();
185 
186     static native byte[] generateStub();
187 
188     static native long openProcess(int pid) throws IOException;
189 
190     static native void closeProcess(long hProcess) throws IOException;
191 
192     static native long createPipe(String name) throws IOException;
193 
194     static native void closePipe(long hPipe) throws IOException;
195 
196     static native void connectPipe(long hPipe) throws IOException;
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../solaris/classes/sun/tools/attach/VirtualMachineImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.charsets/share/classes/sun/nio/cs/ext/ExtendedCharsets.java.template.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>