<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jdwp.agent/share/native/libjdwp/debugInit.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="debugDispatch.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="debugLoop.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdwp.agent/share/native/libjdwp/debugInit.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1998, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 
  26 #include &lt;ctype.h&gt;
  27 
  28 #include &quot;util.h&quot;
  29 #include &quot;commonRef.h&quot;
  30 #include &quot;debugDispatch.h&quot;
  31 #include &quot;eventHandler.h&quot;
  32 #include &quot;eventHelper.h&quot;
  33 #include &quot;threadControl.h&quot;
  34 #include &quot;stepControl.h&quot;
  35 #include &quot;transport.h&quot;
  36 #include &quot;classTrack.h&quot;
  37 #include &quot;debugLoop.h&quot;
  38 #include &quot;bag.h&quot;
  39 #include &quot;invoker.h&quot;
  40 #include &quot;sys.h&quot;
  41 
  42 /* How the options get to OnLoad: */
<span class="line-removed">  43 #define XDEBUG &quot;-Xdebug&quot;</span>
  44 #define XRUN &quot;-Xrunjdwp&quot;
  45 #define AGENTLIB &quot;-agentlib:jdwp&quot;
  46 
  47 /* Debug version defaults */
  48 #ifdef DEBUG
  49     #define DEFAULT_ASSERT_ON           JNI_TRUE
  50     #define DEFAULT_ASSERT_FATAL        JNI_TRUE
  51     #define DEFAULT_LOGFILE             &quot;jdwp.log&quot;
  52 #else
  53     #define DEFAULT_ASSERT_ON           JNI_FALSE
  54     #define DEFAULT_ASSERT_FATAL        JNI_FALSE
  55     #define DEFAULT_LOGFILE             NULL
  56 #endif
  57 
  58 static jboolean vmInitialized;
  59 static jrawMonitorID initMonitor;
  60 static jboolean initComplete;
  61 static jbyte currentSessionID;
  62 
  63 /*
</pre>
<hr />
<pre>
 856 static void
 857 printUsage(void)
 858 {
 859      TTY_MESSAGE((
 860  &quot;               Java Debugger JDWP Agent Library\n&quot;
 861  &quot;               --------------------------------\n&quot;
 862  &quot;\n&quot;
 863  &quot;  (see http://java.sun.com/products/jpda for more information)\n&quot;
 864  &quot;\n&quot;
 865  &quot;jdwp usage: java &quot; AGENTLIB &quot;=[help]|[&lt;option&gt;=&lt;value&gt;, ...]\n&quot;
 866  &quot;\n&quot;
 867  &quot;Option Name and Value            Description                       Default\n&quot;
 868  &quot;---------------------            -----------                       -------\n&quot;
 869  &quot;suspend=y|n                      wait on startup?                  y\n&quot;
 870  &quot;transport=&lt;name&gt;                 transport spec                    none\n&quot;
 871  &quot;address=&lt;listen/attach address&gt;  transport spec                    \&quot;\&quot;\n&quot;
 872  &quot;server=y|n                       listen for debugger?              n\n&quot;
 873  &quot;launch=&lt;command line&gt;            run debugger on event             none\n&quot;
 874  &quot;onthrow=&lt;exception name&gt;         debug on throw                    none\n&quot;
 875  &quot;onuncaught=y|n                   debug on any uncaught?            n\n&quot;
<span class="line-removed"> 876  &quot;onjcmd=y|n                       start debug via jcmd?             n\n&quot;</span>
 877  &quot;timeout=&lt;timeout value&gt;          for listen/attach in milliseconds n\n&quot;
 878  &quot;mutf8=y|n                        output modified utf-8             n\n&quot;
 879  &quot;quiet=y|n                        control over terminal messages    n\n&quot;));
 880 
 881     TTY_MESSAGE((
 882  &quot;Obsolete Options\n&quot;
 883  &quot;----------------\n&quot;
 884  &quot;strict=y|n\n&quot;
 885  &quot;stdalloc=y|n\n&quot;
 886  &quot;\n&quot;
 887  &quot;Examples\n&quot;
 888  &quot;--------\n&quot;
 889  &quot;  - Using sockets connect to a debugger at a specific address:\n&quot;
 890  &quot;    java &quot; AGENTLIB &quot;=transport=dt_socket,address=localhost:8000 ...\n&quot;
 891  &quot;  - Using sockets listen for a debugger to attach:\n&quot;
 892  &quot;    java &quot; AGENTLIB &quot;=transport=dt_socket,server=y,suspend=y ...\n&quot;
 893  &quot;\n&quot;
 894  &quot;Notes\n&quot;
 895  &quot;-----\n&quot;
 896  &quot;  - A timeout value of 0 (the default) is no timeout.\n&quot;
 897  &quot;\n&quot;
 898  &quot;Warnings\n&quot;
 899  &quot;--------\n&quot;
 900  &quot;  - The older &quot; XRUN &quot; interface can still be used, but will be removed in\n&quot;
 901  &quot;    a future release, for example:\n&quot;
<span class="line-modified"> 902  &quot;        java &quot; XDEBUG &quot; &quot; XRUN &quot;:[help]|[&lt;option&gt;=&lt;value&gt;, ...]\n&quot;</span>
 903     ));
 904 
 905 #ifdef DEBUG
 906 
 907      TTY_MESSAGE((
 908  &quot;\n&quot;
 909  &quot;Debugging Options            Description                       Default\n&quot;
 910  &quot;-----------------            -----------                       -------\n&quot;
 911  &quot;pause=y|n                    pause to debug PID                n\n&quot;
 912  &quot;coredump=y|n                 coredump at exit                  n\n&quot;
 913  &quot;errorexit=y|n                exit on any error                 n\n&quot;
 914  &quot;logfile=filename             name of log file                  none\n&quot;
 915  &quot;logflags=flags               log flags (bitmask)               none\n&quot;
 916  &quot;                               JVM calls     = 0x001\n&quot;
 917  &quot;                               JNI calls     = 0x002\n&quot;
 918  &quot;                               JVMTI calls   = 0x004\n&quot;
 919  &quot;                               misc events   = 0x008\n&quot;
 920  &quot;                               step logs     = 0x010\n&quot;
 921  &quot;                               locations     = 0x020\n&quot;
 922  &quot;                               callbacks     = 0x040\n&quot;
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.  Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
  23  * questions.
  24  */
  25 
  26 #include &lt;ctype.h&gt;
  27 
  28 #include &quot;util.h&quot;
  29 #include &quot;commonRef.h&quot;
  30 #include &quot;debugDispatch.h&quot;
  31 #include &quot;eventHandler.h&quot;
  32 #include &quot;eventHelper.h&quot;
  33 #include &quot;threadControl.h&quot;
  34 #include &quot;stepControl.h&quot;
  35 #include &quot;transport.h&quot;
  36 #include &quot;classTrack.h&quot;
  37 #include &quot;debugLoop.h&quot;
  38 #include &quot;bag.h&quot;
  39 #include &quot;invoker.h&quot;
  40 #include &quot;sys.h&quot;
  41 
  42 /* How the options get to OnLoad: */

  43 #define XRUN &quot;-Xrunjdwp&quot;
  44 #define AGENTLIB &quot;-agentlib:jdwp&quot;
  45 
  46 /* Debug version defaults */
  47 #ifdef DEBUG
  48     #define DEFAULT_ASSERT_ON           JNI_TRUE
  49     #define DEFAULT_ASSERT_FATAL        JNI_TRUE
  50     #define DEFAULT_LOGFILE             &quot;jdwp.log&quot;
  51 #else
  52     #define DEFAULT_ASSERT_ON           JNI_FALSE
  53     #define DEFAULT_ASSERT_FATAL        JNI_FALSE
  54     #define DEFAULT_LOGFILE             NULL
  55 #endif
  56 
  57 static jboolean vmInitialized;
  58 static jrawMonitorID initMonitor;
  59 static jboolean initComplete;
  60 static jbyte currentSessionID;
  61 
  62 /*
</pre>
<hr />
<pre>
 855 static void
 856 printUsage(void)
 857 {
 858      TTY_MESSAGE((
 859  &quot;               Java Debugger JDWP Agent Library\n&quot;
 860  &quot;               --------------------------------\n&quot;
 861  &quot;\n&quot;
 862  &quot;  (see http://java.sun.com/products/jpda for more information)\n&quot;
 863  &quot;\n&quot;
 864  &quot;jdwp usage: java &quot; AGENTLIB &quot;=[help]|[&lt;option&gt;=&lt;value&gt;, ...]\n&quot;
 865  &quot;\n&quot;
 866  &quot;Option Name and Value            Description                       Default\n&quot;
 867  &quot;---------------------            -----------                       -------\n&quot;
 868  &quot;suspend=y|n                      wait on startup?                  y\n&quot;
 869  &quot;transport=&lt;name&gt;                 transport spec                    none\n&quot;
 870  &quot;address=&lt;listen/attach address&gt;  transport spec                    \&quot;\&quot;\n&quot;
 871  &quot;server=y|n                       listen for debugger?              n\n&quot;
 872  &quot;launch=&lt;command line&gt;            run debugger on event             none\n&quot;
 873  &quot;onthrow=&lt;exception name&gt;         debug on throw                    none\n&quot;
 874  &quot;onuncaught=y|n                   debug on any uncaught?            n\n&quot;

 875  &quot;timeout=&lt;timeout value&gt;          for listen/attach in milliseconds n\n&quot;
 876  &quot;mutf8=y|n                        output modified utf-8             n\n&quot;
 877  &quot;quiet=y|n                        control over terminal messages    n\n&quot;));
 878 
 879     TTY_MESSAGE((
 880  &quot;Obsolete Options\n&quot;
 881  &quot;----------------\n&quot;
 882  &quot;strict=y|n\n&quot;
 883  &quot;stdalloc=y|n\n&quot;
 884  &quot;\n&quot;
 885  &quot;Examples\n&quot;
 886  &quot;--------\n&quot;
 887  &quot;  - Using sockets connect to a debugger at a specific address:\n&quot;
 888  &quot;    java &quot; AGENTLIB &quot;=transport=dt_socket,address=localhost:8000 ...\n&quot;
 889  &quot;  - Using sockets listen for a debugger to attach:\n&quot;
 890  &quot;    java &quot; AGENTLIB &quot;=transport=dt_socket,server=y,suspend=y ...\n&quot;
 891  &quot;\n&quot;
 892  &quot;Notes\n&quot;
 893  &quot;-----\n&quot;
 894  &quot;  - A timeout value of 0 (the default) is no timeout.\n&quot;
 895  &quot;\n&quot;
 896  &quot;Warnings\n&quot;
 897  &quot;--------\n&quot;
 898  &quot;  - The older &quot; XRUN &quot; interface can still be used, but will be removed in\n&quot;
 899  &quot;    a future release, for example:\n&quot;
<span class="line-modified"> 900  &quot;        java &quot; XRUN &quot;:[help]|[&lt;option&gt;=&lt;value&gt;, ...]\n&quot;</span>
 901     ));
 902 
 903 #ifdef DEBUG
 904 
 905      TTY_MESSAGE((
 906  &quot;\n&quot;
 907  &quot;Debugging Options            Description                       Default\n&quot;
 908  &quot;-----------------            -----------                       -------\n&quot;
 909  &quot;pause=y|n                    pause to debug PID                n\n&quot;
 910  &quot;coredump=y|n                 coredump at exit                  n\n&quot;
 911  &quot;errorexit=y|n                exit on any error                 n\n&quot;
 912  &quot;logfile=filename             name of log file                  none\n&quot;
 913  &quot;logflags=flags               log flags (bitmask)               none\n&quot;
 914  &quot;                               JVM calls     = 0x001\n&quot;
 915  &quot;                               JNI calls     = 0x002\n&quot;
 916  &quot;                               JVMTI calls   = 0x004\n&quot;
 917  &quot;                               misc events   = 0x008\n&quot;
 918  &quot;                               step logs     = 0x010\n&quot;
 919  &quot;                               locations     = 0x020\n&quot;
 920  &quot;                               callbacks     = 0x040\n&quot;
</pre>
</td>
</tr>
</table>
<center><a href="debugDispatch.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="debugLoop.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>