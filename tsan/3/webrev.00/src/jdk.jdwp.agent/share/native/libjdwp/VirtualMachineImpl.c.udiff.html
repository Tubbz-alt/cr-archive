<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.jdwp.agent/share/native/libjdwp/VirtualMachineImpl.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="ThreadReferenceImpl.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="VirtualMachineImpl.h.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdwp.agent/share/native/libjdwp/VirtualMachineImpl.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1998, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -33,21 +33,23 @@</span>
  #include &quot;threadControl.h&quot;
  #include &quot;SDE.h&quot;
  #include &quot;FrameID.h&quot;
  
  static char *versionName = &quot;Java Debug Wire Protocol (Reference Implementation)&quot;;
<span class="udiff-line-removed">- static int majorVersion = 11;  /* JDWP major version */</span>
<span class="udiff-line-removed">- static int minorVersion = 0;  /* JDWP minor version */</span>
  
  static jboolean
  version(PacketInputStream *in, PacketOutputStream *out)
  {
      char buf[500];
      char *vmName;
      char *vmVersion;
      char *vmInfo;
  
<span class="udiff-line-added">+     /* Now the JDWP versions are the same as JVMTI versions */</span>
<span class="udiff-line-added">+     int majorVersion = jvmtiMajorVersion();</span>
<span class="udiff-line-added">+     int minorVersion = 0;</span>
<span class="udiff-line-added">+ </span>
      if (gdata-&gt;vmDead) {
          outStream_setError(out, JDWP_ERROR(VM_DEAD));
          return JNI_TRUE;
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -923,29 +925,31 @@</span>
  {
      eventHelper_releaseEvents();
      return JNI_TRUE;
  }
  
<span class="udiff-line-modified-removed">- void *VirtualMachine_Cmds[] = { (void *)22</span>
<span class="udiff-line-modified-removed">-     ,(void *)version</span>
<span class="udiff-line-modified-removed">-     ,(void *)classesForSignature</span>
<span class="udiff-line-modified-removed">-     ,(void *)allClasses</span>
<span class="udiff-line-modified-removed">-     ,(void *)getAllThreads</span>
<span class="udiff-line-modified-removed">-     ,(void *)topLevelThreadGroups</span>
<span class="udiff-line-modified-removed">-     ,(void *)dispose</span>
<span class="udiff-line-modified-removed">-     ,(void *)idSizes</span>
<span class="udiff-line-modified-removed">-     ,(void *)suspend</span>
<span class="udiff-line-modified-removed">-     ,(void *)resume</span>
<span class="udiff-line-modified-removed">-     ,(void *)doExit</span>
<span class="udiff-line-modified-removed">-     ,(void *)createString</span>
<span class="udiff-line-modified-removed">-     ,(void *)capabilities</span>
<span class="udiff-line-modified-removed">-     ,(void *)classPaths</span>
<span class="udiff-line-modified-removed">-     ,(void *)disposeObjects</span>
<span class="udiff-line-modified-removed">-     ,(void *)holdEvents</span>
<span class="udiff-line-modified-removed">-     ,(void *)releaseEvents</span>
<span class="udiff-line-modified-removed">-     ,(void *)capabilitiesNew</span>
<span class="udiff-line-modified-removed">-     ,(void *)redefineClasses</span>
<span class="udiff-line-modified-removed">-     ,(void *)setDefaultStratum</span>
<span class="udiff-line-modified-removed">-     ,(void *)allClassesWithGeneric</span>
<span class="udiff-line-modified-removed">-     ,(void *)instanceCounts</span>
<span class="udiff-line-modified-removed">-     ,(void *)allModules</span>
<span class="udiff-line-modified-added">+ Command VirtualMachine_Commands[] = {</span>
<span class="udiff-line-modified-added">+     {version, &quot;Version&quot;},</span>
<span class="udiff-line-modified-added">+     {classesForSignature, &quot;ClassesForSignature&quot;},</span>
<span class="udiff-line-modified-added">+     {allClasses, &quot;AllClasses&quot;},</span>
<span class="udiff-line-modified-added">+     {getAllThreads, &quot;GetAllThreads&quot;},</span>
<span class="udiff-line-modified-added">+     {topLevelThreadGroups, &quot;TopLevelThreadGroups&quot;},</span>
<span class="udiff-line-modified-added">+     {dispose, &quot;Dispose&quot;},</span>
<span class="udiff-line-modified-added">+     {idSizes, &quot;IDSizes&quot;},</span>
<span class="udiff-line-modified-added">+     {suspend, &quot;Suspend&quot;},</span>
<span class="udiff-line-modified-added">+     {resume, &quot;Resume&quot;},</span>
<span class="udiff-line-modified-added">+     {doExit, &quot;DoExit&quot;},</span>
<span class="udiff-line-modified-added">+     {createString, &quot;CreateString&quot;},</span>
<span class="udiff-line-modified-added">+     {capabilities, &quot;Capabilities&quot;},</span>
<span class="udiff-line-modified-added">+     {classPaths, &quot;ClassPaths&quot;},</span>
<span class="udiff-line-modified-added">+     {disposeObjects, &quot;DisposeObjects&quot;},</span>
<span class="udiff-line-modified-added">+     {holdEvents, &quot;HoldEvents&quot;},</span>
<span class="udiff-line-modified-added">+     {releaseEvents, &quot;ReleaseEvents&quot;},</span>
<span class="udiff-line-modified-added">+     {capabilitiesNew, &quot;CapabilitiesNew&quot;},</span>
<span class="udiff-line-modified-added">+     {redefineClasses, &quot;RedefineClasses&quot;},</span>
<span class="udiff-line-modified-added">+     {setDefaultStratum, &quot;SetDefaultStratum&quot;},</span>
<span class="udiff-line-modified-added">+     {allClassesWithGeneric, &quot;AllClassesWithGeneric&quot;},</span>
<span class="udiff-line-modified-added">+     {instanceCounts, &quot;InstanceCounts&quot;},</span>
<span class="udiff-line-modified-added">+     {allModules, &quot;AllModules&quot;}</span>
  };
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ DEBUG_DISPATCH_DEFINE_CMDSET(VirtualMachine)</span>
</pre>
<center><a href="ThreadReferenceImpl.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="VirtualMachineImpl.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>