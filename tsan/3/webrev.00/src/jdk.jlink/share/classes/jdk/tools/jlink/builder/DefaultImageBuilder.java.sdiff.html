<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jlink/share/classes/jdk/tools/jlink/builder/DefaultImageBuilder.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../jdk.jfr/share/conf/jfr/profile.jfc.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../internal/ImagePluginConfiguration.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jlink/share/classes/jdk/tools/jlink/builder/DefaultImageBuilder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
283             if (mainClassName != null) {
284                 // make sure main class exists!
285                 if (!imageContent.findEntry(&quot;/&quot; + module + &quot;/&quot; +
286                         mainClassName.replace(&#39;.&#39;, &#39;/&#39;) + &quot;.class&quot;).isPresent()) {
287                     throw new IllegalArgumentException(module + &quot; does not have main class: &quot; + mainClassName);
288                 }
289 
290                 String launcherFile = entry.getKey();
291                 Path cmd = root.resolve(&quot;bin&quot;).resolve(launcherFile);
292                 // generate shell script for Unix platforms
293                 StringBuilder sb = new StringBuilder();
294                 sb.append(&quot;#!/bin/sh&quot;)
295                         .append(&quot;\n&quot;);
296                 sb.append(&quot;JLINK_VM_OPTIONS=&quot;)
297                         .append(&quot;\n&quot;);
298                 sb.append(&quot;DIR=`dirname $0`&quot;)
299                         .append(&quot;\n&quot;);
300                 sb.append(&quot;$DIR/java $JLINK_VM_OPTIONS -m &quot;)
301                         .append(module).append(&#39;/&#39;)
302                         .append(mainClassName)
<span class="line-modified">303                         .append(&quot; $@\n&quot;);</span>
304 
305                 try (BufferedWriter writer = Files.newBufferedWriter(cmd,
306                         StandardCharsets.ISO_8859_1,
307                         StandardOpenOption.CREATE_NEW)) {
308                     writer.write(sb.toString());
309                 }
310                 if (root.resolve(&quot;bin&quot;).getFileSystem()
311                         .supportedFileAttributeViews().contains(&quot;posix&quot;)) {
312                     setExecutable(cmd);
313                 }
314                 // generate .bat file for Windows
315                 if (isWindows()) {
316                     Path bat = root.resolve(BIN_DIRNAME).resolve(launcherFile + &quot;.bat&quot;);
317                     sb = new StringBuilder();
318                     sb.append(&quot;@echo off&quot;)
319                             .append(&quot;\r\n&quot;);
320                     sb.append(&quot;set JLINK_VM_OPTIONS=&quot;)
321                             .append(&quot;\r\n&quot;);
322                     sb.append(&quot;set DIR=%~dp0&quot;)
323                             .append(&quot;\r\n&quot;);
</pre>
</td>
<td>
<hr />
<pre>
283             if (mainClassName != null) {
284                 // make sure main class exists!
285                 if (!imageContent.findEntry(&quot;/&quot; + module + &quot;/&quot; +
286                         mainClassName.replace(&#39;.&#39;, &#39;/&#39;) + &quot;.class&quot;).isPresent()) {
287                     throw new IllegalArgumentException(module + &quot; does not have main class: &quot; + mainClassName);
288                 }
289 
290                 String launcherFile = entry.getKey();
291                 Path cmd = root.resolve(&quot;bin&quot;).resolve(launcherFile);
292                 // generate shell script for Unix platforms
293                 StringBuilder sb = new StringBuilder();
294                 sb.append(&quot;#!/bin/sh&quot;)
295                         .append(&quot;\n&quot;);
296                 sb.append(&quot;JLINK_VM_OPTIONS=&quot;)
297                         .append(&quot;\n&quot;);
298                 sb.append(&quot;DIR=`dirname $0`&quot;)
299                         .append(&quot;\n&quot;);
300                 sb.append(&quot;$DIR/java $JLINK_VM_OPTIONS -m &quot;)
301                         .append(module).append(&#39;/&#39;)
302                         .append(mainClassName)
<span class="line-modified">303                         .append(&quot; \&quot;$@\&quot;\n&quot;);</span>
304 
305                 try (BufferedWriter writer = Files.newBufferedWriter(cmd,
306                         StandardCharsets.ISO_8859_1,
307                         StandardOpenOption.CREATE_NEW)) {
308                     writer.write(sb.toString());
309                 }
310                 if (root.resolve(&quot;bin&quot;).getFileSystem()
311                         .supportedFileAttributeViews().contains(&quot;posix&quot;)) {
312                     setExecutable(cmd);
313                 }
314                 // generate .bat file for Windows
315                 if (isWindows()) {
316                     Path bat = root.resolve(BIN_DIRNAME).resolve(launcherFile + &quot;.bat&quot;);
317                     sb = new StringBuilder();
318                     sb.append(&quot;@echo off&quot;)
319                             .append(&quot;\r\n&quot;);
320                     sb.append(&quot;set JLINK_VM_OPTIONS=&quot;)
321                             .append(&quot;\r\n&quot;);
322                     sb.append(&quot;set DIR=%~dp0&quot;)
323                             .append(&quot;\r\n&quot;);
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../jdk.jfr/share/conf/jfr/profile.jfc.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../internal/ImagePluginConfiguration.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>