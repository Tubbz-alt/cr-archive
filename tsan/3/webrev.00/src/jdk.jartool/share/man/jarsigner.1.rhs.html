<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.jartool/share/man/jarsigner.1</title>
    <link rel="stylesheet" href="../../../../style.css" />
    <script type="text/javascript" src="../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre><a name="1" id="anc1"></a><span class="line-modified">   1 .\&quot;t</span>
<span class="line-modified">   2 .\&quot; Copyright (c) 1994, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3 .\&quot; DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4 .\&quot;
   5 .\&quot; This code is free software; you can redistribute it and/or modify it
   6 .\&quot; under the terms of the GNU General Public License version 2 only, as
   7 .\&quot; published by the Free Software Foundation.
   8 .\&quot;
   9 .\&quot; This code is distributed in the hope that it will be useful, but WITHOUT
  10 .\&quot; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
<a name="2" id="anc2"></a><span class="line-modified">  11 .\&quot; FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License</span>
  12 .\&quot; version 2 for more details (a copy is included in the LICENSE file that
  13 .\&quot; accompanied this code).
  14 .\&quot;
  15 .\&quot; You should have received a copy of the GNU General Public License version
  16 .\&quot; 2 along with this work; if not, write to the Free Software Foundation,
  17 .\&quot; Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18 .\&quot;
  19 .\&quot; Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20 .\&quot; or visit www.oracle.com if you need additional information or have any
  21 .\&quot; questions.
  22 .\&quot;
<a name="3" id="anc3"></a><span class="line-modified">  23 .\&quot; Automatically generated by Pandoc 2.3.1</span>




  24 .\&quot;
<a name="4" id="anc4"></a><span class="line-modified">  25 .TH &quot;JARSIGNER&quot; &quot;1&quot; &quot;2020&quot; &quot;JDK 14&quot; &quot;JDK Commands&quot;</span>
<span class="line-modified">  26 .hy</span>
<span class="line-modified">  27 .SH NAME</span>
<span class="line-modified">  28 .PP</span>
<span class="line-modified">  29 jarsigner \- sign and verify Java Archive (JAR) files</span>
<span class="line-modified">  30 .SH SYNOPSIS</span>
<span class="line-modified">  31 .PP</span>
<span class="line-modified">  32 \f[CB]jarsigner\f[R] [\f[I]options\f[R]] \f[I]jar\-file\f[R] \f[I]alias\f[R]</span>
<span class="line-modified">  33 .PP</span>
<span class="line-modified">  34 \f[CB]jarsigner\f[R] \f[CB]\-verify\f[R] [\f[I]options\f[R]]</span>
<span class="line-modified">  35 \f[I]jar\-file\f[R] [\f[I]alias\f[R] ...]</span>
<span class="line-modified">  36 .TP</span>
<span class="line-modified">  37 .B \f[I]options\f[R]</span>
<span class="line-modified">  38 The command\-line options.</span>
<span class="line-modified">  39 See \f[B]Options for jarsigner\f[R].</span>
<span class="line-modified">  40 .RS</span>
<span class="line-modified">  41 .RE</span>
<span class="line-modified">  42 .TP</span>
<span class="line-modified">  43 .B \f[CB]\-verify\f[R]</span>
<span class="line-modified">  44 The \f[CB]\-verify\f[R] option can take zero or more keystore alias names</span>
<span class="line-modified">  45 after the JAR file name.</span>
<span class="line-modified">  46 When the \f[CB]\-verify\f[R] option is specified, the \f[CB]jarsigner\f[R]</span>
<span class="line-modified">  47 command checks that the certificate used to verify each signed entry in</span>
<span class="line-modified">  48 the JAR file matches one of the keystore aliases.</span>
<span class="line-modified">  49 The aliases are defined in the keystore specified by \f[CB]\-keystore\f[R]</span>
<span class="line-modified">  50 or the default keystore.</span>
<span class="line-modified">  51 .RS</span>
<span class="line-modified">  52 .PP</span>
<span class="line-modified">  53 If you also specify the \f[CB]\-strict\f[R] option, and the</span>
<span class="line-modified">  54 \f[CB]jarsigner\f[R] command detects severe warnings, the message, &quot;jar</span>
<span class="line-modified">  55 verified, with signer errors&quot; is displayed.</span>
<span class="line-modified">  56 .RE</span>
<span class="line-modified">  57 .TP</span>
<span class="line-modified">  58 .B \f[I]jar\-file\f[R]</span>
<span class="line-modified">  59 The JAR file to be signed.</span>
<span class="line-modified">  60 .RS</span>
<span class="line-modified">  61 .PP</span>
<span class="line-modified">  62 If you also specified the \f[CB]\-strict\f[R] option, and the</span>
<span class="line-modified">  63 \f[CB]jarsigner\f[R] command detected severe warnings, the message, &quot;jar</span>
<span class="line-modified">  64 signed, with signer errors&quot; is displayed.</span>
<span class="line-modified">  65 .RE</span>
<span class="line-modified">  66 .TP</span>
<span class="line-modified">  67 .B \f[I]alias\f[R]</span>
<span class="line-modified">  68 The aliases are defined in the keystore specified by \f[CB]\-keystore\f[R]</span>
<span class="line-modified">  69 or the default keystore.</span>
<span class="line-modified">  70 .RS</span>
<span class="line-modified">  71 .RE</span>
<span class="line-modified">  72 .SH DESCRIPTION</span>
<span class="line-modified">  73 .PP</span>
<span class="line-modified">  74 The \f[CB]jarsigner\f[R] tool has two purposes:</span>
<span class="line-modified">  75 .IP \[bu] 2</span>
<span class="line-modified">  76 To sign Java Archive (JAR) files.</span>
<span class="line-modified">  77 .IP \[bu] 2</span>
<span class="line-modified">  78 To verify the signatures and integrity of signed JAR files.</span>
<span class="line-modified">  79 .PP</span>
<span class="line-modified">  80 The JAR feature enables the packaging of class files, images, sounds,</span>
<span class="line-modified">  81 and other digital data in a single file for faster and easier</span>
<span class="line-modified">  82 distribution.</span>
<span class="line-modified">  83 A tool named \f[CB]jar\f[R] enables developers to produce JAR files.</span>
<span class="line-modified">  84 (Technically, any ZIP file can also be considered a JAR file, although</span>
<span class="line-modified">  85 when created by the \f[CB]jar\f[R] command or processed by the</span>
<span class="line-modified">  86 \f[CB]jarsigner\f[R] command, JAR files also contain a</span>
<span class="line-modified">  87 \f[CB]META\-INF/MANIFEST.MF\f[R] file.)</span>
<span class="line-modified">  88 .PP</span>
<span class="line-modified">  89 A digital signature is a string of bits that is computed from some data</span>
<span class="line-modified">  90 (the data being signed) and the private key of an entity (a person,</span>
<span class="line-modified">  91 company, and so on).</span>
<span class="line-modified">  92 Similar to a handwritten signature, a digital signature has many useful</span>
<span class="line-modified">  93 characteristics:</span>
<span class="line-modified">  94 .IP \[bu] 2</span>
<span class="line-modified">  95 Its authenticity can be verified by a computation that uses the public</span>
<span class="line-modified">  96 key corresponding to the private key used to generate the signature.</span>
<span class="line-modified">  97 .IP \[bu] 2</span>
<span class="line-modified">  98 It can\[aq]t be forged, assuming the private key is kept secret.</span>
<span class="line-modified">  99 .IP \[bu] 2</span>
<span class="line-modified"> 100 It is a function of the data signed and thus can\[aq]t be claimed to be</span>
<span class="line-modified"> 101 the signature for other data as well.</span>
<span class="line-modified"> 102 .IP \[bu] 2</span>
<span class="line-modified"> 103 The signed data can\[aq]t be changed.</span>
<span class="line-modified"> 104 If the data is changed, then the signature can\[aq]t be verified as</span>
<span class="line-modified"> 105 authentic.</span>
<span class="line-modified"> 106 .PP</span>
<span class="line-modified"> 107 To generate an entity\[aq]s signature for a file, the entity must first</span>
<span class="line-modified"> 108 have a public/private key pair associated with it and one or more</span>
<span class="line-modified"> 109 certificates that authenticate its public key.</span>
<span class="line-modified"> 110 A certificate is a digitally signed statement from one entity that says</span>
<span class="line-modified"> 111 that the public key of another entity has a particular value.</span>
<span class="line-modified"> 112 .PP</span>
<span class="line-modified"> 113 The \f[CB]jarsigner\f[R] command uses key and certificate information from</span>
<span class="line-modified"> 114 a keystore to generate digital signatures for JAR files.</span>
<span class="line-modified"> 115 A keystore is a database of private keys and their associated X.509</span>
<span class="line-modified"> 116 certificate chains that authenticate the corresponding public keys.</span>
<span class="line-modified"> 117 The \f[CB]keytool\f[R] command is used to create and administer keystores.</span>
<span class="line-modified"> 118 .PP</span>
<span class="line-modified"> 119 The \f[CB]jarsigner\f[R] command uses an entity\[aq]s private key to</span>
<span class="line-modified"> 120 generate a signature.</span>
<span class="line-modified"> 121 The signed JAR file contains, among other things, a copy of the</span>
<span class="line-modified"> 122 certificate from the keystore for the public key corresponding to the</span>
<span class="line-modified"> 123 private key used to sign the file.</span>
<span class="line-modified"> 124 The \f[CB]jarsigner\f[R] command can verify the digital signature of the</span>
<span class="line-modified"> 125 signed JAR file using the certificate inside it (in its signature block</span>
<span class="line-modified"> 126 file).</span>
<span class="line-modified"> 127 .PP</span>
<span class="line-modified"> 128 The \f[CB]jarsigner\f[R] command can generate signatures that include a</span>
<span class="line-modified"> 129 time stamp that enables a systems or deployer to check whether the JAR</span>
<span class="line-modified"> 130 file was signed while the signing certificate was still valid.</span>
<span class="line-modified"> 131 .PP</span>
<span class="line-modified"> 132 In addition, APIs allow applications to obtain the timestamp</span>
<span class="line-modified"> 133 information.</span>
<span class="line-modified"> 134 .PP</span>
<span class="line-modified"> 135 At this time, the \f[CB]jarsigner\f[R] command can only sign JAR files</span>
<span class="line-modified"> 136 created by the \f[CB]jar\f[R] command or zip files.</span>
<span class="line-modified"> 137 JAR files are the same as zip files, except they also have a</span>
<span class="line-modified"> 138 \f[CB]META\-INF/MANIFEST.MF\f[R] file.</span>
<span class="line-modified"> 139 A \f[CB]META\-INF/MANIFEST.MF\f[R] file is created when the</span>
<span class="line-modified"> 140 \f[CB]jarsigner\f[R] command signs a zip file.</span>
<span class="line-modified"> 141 .PP</span>
<span class="line-modified"> 142 The default \f[CB]jarsigner\f[R] command behavior is to sign a JAR or zip</span>
<span class="line-modified"> 143 file.</span>
<span class="line-modified"> 144 Use the \f[CB]\-verify\f[R] option to verify a signed JAR file.</span>
<span class="line-modified"> 145 .PP</span>
<span class="line-modified"> 146 The \f[CB]jarsigner\f[R] command also attempts to validate the</span>
<span class="line-modified"> 147 signer\[aq]s certificate after signing or verifying.</span>
<span class="line-modified"> 148 If there is a validation error or any other problem, the command</span>
<span class="line-modified"> 149 generates warning messages.</span>
<span class="line-modified"> 150 If you specify the \f[CB]\-strict\f[R] option, then the command treats</span>
<span class="line-modified"> 151 severe warnings as errors.</span>
<span class="line-modified"> 152 See \f[B]Errors and Warnings\f[R].</span>
<span class="line-modified"> 153 .SH KEYSTORE ALIASES</span>
<span class="line-modified"> 154 .PP</span>
<span class="line-modified"> 155 All keystore entities are accessed with unique aliases.</span>
<span class="line-modified"> 156 .PP</span>
<span class="line-modified"> 157 When you use the \f[CB]jarsigner\f[R] command to sign a JAR file, you must</span>
<span class="line-modified"> 158 specify the alias for the keystore entry that contains the private key</span>
<span class="line-modified"> 159 needed to generate the signature.</span>
<span class="line-modified"> 160 If no output file is specified, it overwrites the original JAR file with</span>
<span class="line-modified"> 161 the signed JAR file.</span>
<span class="line-modified"> 162 .PP</span>
<span class="line-modified"> 163 Keystores are protected with a password, so the store password must be</span>
<span class="line-modified"> 164 specified.</span>
<span class="line-modified"> 165 You are prompted for it when you don\[aq]t specify it on the command</span>
<span class="line-modified"> 166 line.</span>
<span class="line-modified"> 167 Similarly, private keys are protected in a keystore with a password, so</span>
<span class="line-modified"> 168 the private key\[aq]s password must be specified, and you are prompted</span>
<span class="line-modified"> 169 for the password when you don\[aq]t specify it on the command line and</span>
<span class="line-modified"> 170 it isn\[aq]t the same as the store password.</span>
<span class="line-modified"> 171 .SH KEYSTORE LOCATION</span>
<span class="line-modified"> 172 .PP</span>
<span class="line-modified"> 173 The \f[CB]jarsigner\f[R] command has a \f[CB]\-keystore\f[R] option for</span>
<span class="line-modified"> 174 specifying the URL of the keystore to be used.</span>
<span class="line-modified"> 175 The keystore is by default stored in a file named \f[CB]\&amp;.keystore\f[R]</span>
<span class="line-modified"> 176 in the user\[aq]s home directory, as determined by the</span>
<span class="line-modified"> 177 \f[CB]user.home\f[R] system property.</span>
<span class="line-modified"> 178 .PP</span>
<span class="line-modified"> 179 \f[B]Oracle Solaris, Linux, and OS X:\f[R] \f[CB]user.home\f[R] defaults to</span>
<span class="line-modified"> 180 the user\[aq]s home directory.</span>
<span class="line-modified"> 181 .PP</span>
<span class="line-modified"> 182 The input stream from the \f[CB]\-keystore\f[R] option is passed to the</span>
<span class="line-modified"> 183 \f[CB]KeyStore.load\f[R] method.</span>
<span class="line-modified"> 184 If \f[CB]NONE\f[R] is specified as the URL, then a null stream is passed</span>
<span class="line-modified"> 185 to the \f[CB]KeyStore.load\f[R] method.</span>
<span class="line-modified"> 186 \f[CB]NONE\f[R] should be specified when the \f[CB]KeyStore\f[R] class</span>
<span class="line-modified"> 187 isn\[aq]t file based, for example, when it resides on a hardware token</span>
<span class="line-modified"> 188 device.</span>
<span class="line-modified"> 189 .SH KEYSTORE IMPLEMENTATION</span>
<span class="line-modified"> 190 .PP</span>
<span class="line-modified"> 191 The \f[CB]KeyStore\f[R] class provided in the \f[CB]java.security\f[R]</span>
<span class="line-modified"> 192 package supplies a number of well\-defined interfaces to access and</span>
<span class="line-modified"> 193 modify the information in a keystore.</span>
<span class="line-modified"> 194 You can have multiple different concrete implementations, where each</span>
<span class="line-modified"> 195 implementation is for a particular type of keystore.</span>
<span class="line-modified"> 196 .PP</span>
<span class="line-modified"> 197 Currently, there are two command\-line tools that use keystore</span>
<span class="line-modified"> 198 implementations (\f[CB]keytool\f[R] and \f[CB]jarsigner\f[R]).</span>
<span class="line-modified"> 199 .PP</span>
<span class="line-modified"> 200 The default keystore implementation is \f[CB]PKCS12\f[R].</span>
<span class="line-modified"> 201 This is a cross platform keystore based on the RSA PKCS12 Personal</span>
<span class="line-modified"> 202 Information Exchange Syntax Standard.</span>
<span class="line-modified"> 203 This standard is primarily meant for storing or transporting a</span>
<span class="line-modified"> 204 user\[aq]s private keys, certificates, and miscellaneous secrets.</span>
<span class="line-modified"> 205 There is another built\-in implementation, provided by Oracle.</span>
<span class="line-modified"> 206 It implements the keystore as a file with a proprietary keystore type</span>
<span class="line-modified"> 207 (format) named \f[CB]JKS\f[R].</span>
<span class="line-modified"> 208 It protects each private key with its individual password, and also</span>
<span class="line-modified"> 209 protects the integrity of the entire keystore with a (possibly</span>
<span class="line-modified"> 210 different) password.</span>
<span class="line-modified"> 211 .PP</span>
<span class="line-modified"> 212 Keystore implementations are provider\-based, which means the</span>
<span class="line-modified"> 213 application interfaces supplied by the \f[CB]KeyStore\f[R] class are</span>
<span class="line-modified"> 214 implemented in terms of a Service Provider Interface (SPI).</span>
<span class="line-modified"> 215 There is a corresponding abstract \f[CB]KeystoreSpi\f[R] class, also in</span>
<span class="line-modified"> 216 the \f[CB]java.security\ package\f[R], that defines the Service Provider</span>
<span class="line-modified"> 217 Interface methods that providers must implement.</span>
<span class="line-modified"> 218 The term provider refers to a package or a set of packages that supply a</span>
<span class="line-added"> 219 concrete implementation of a subset of services that can be accessed by</span>
<span class="line-added"> 220 the Java Security API.</span>
<span class="line-added"> 221 To provide a keystore implementation, clients must implement a provider</span>
<span class="line-added"> 222 and supply a \f[CB]KeystoreSpi\f[R] subclass implementation, as described</span>
<span class="line-added"> 223 in \f[B]How to Implement a Provider in the Java Cryptography</span>
<span class="line-added"> 224 Architecture\f[R]</span>
<span class="line-added"> 225 [https://www.oracle.com/pls/topic/lookup?ctx=en/java/javase/11/tools&amp;id=JSSEC\-GUID\-2BCFDD85\-D533\-4E6C\-8CE9\-29990DEB0190].</span>
<span class="line-added"> 226 .PP</span>
<span class="line-added"> 227 Applications can choose different types of keystore implementations from</span>
<span class="line-added"> 228 different providers, with the \f[CB]getInstance\f[R] factory method in the</span>
<span class="line-added"> 229 \f[CB]KeyStore\f[R] class.</span>
<span class="line-added"> 230 A keystore type defines the storage and data format of the keystore</span>
<span class="line-added"> 231 information and the algorithms used to protect private keys in the</span>
<span class="line-added"> 232 keystore and the integrity of the keystore itself.</span>
<span class="line-added"> 233 Keystore implementations of different types aren\[aq]t compatible.</span>
<span class="line-added"> 234 .PP</span>
<span class="line-added"> 235 The \f[CB]jarsigner\f[R] commands can read file\-based keystores from any</span>
<span class="line-added"> 236 location that can be specified using a URL.</span>
<span class="line-added"> 237 In addition, these commands can read non\-file\-based keystores such as</span>
<span class="line-added"> 238 those provided by MSCAPI on Windows and PKCS11 on all platforms.</span>
<span class="line-added"> 239 .PP</span>
<span class="line-added"> 240 For the \f[CB]jarsigner\f[R] and \f[CB]keytool\f[R] commands, you can</span>
<span class="line-added"> 241 specify a keystore type at the command line with the</span>
<span class="line-added"> 242 \f[CB]\-storetype\f[R] option.</span>
<span class="line-added"> 243 .PP</span>
<span class="line-added"> 244 If you don\[aq]t explicitly specify a keystore type, then the tools</span>
<span class="line-added"> 245 choose a keystore implementation based on the value of the</span>
<span class="line-added"> 246 \f[CB]keystore.type\f[R] property specified in the security properties</span>
<span class="line-added"> 247 file.</span>
<span class="line-added"> 248 The security properties file is called \f[CB]java.security\f[R], and it</span>
<span class="line-added"> 249 resides in the JDK security properties directory,</span>
<span class="line-added"> 250 \f[CB]java.home/conf/security\f[R].</span>
<span class="line-added"> 251 .PP</span>
<span class="line-added"> 252 Each tool gets the \f[CB]keystore.type\f[R] value and then examines all</span>
<span class="line-added"> 253 the installed providers until it finds one that implements keystores of</span>
<span class="line-added"> 254 that type.</span>
<span class="line-added"> 255 It then uses the keystore implementation from that provider.</span>
<span class="line-added"> 256 .PP</span>
<span class="line-added"> 257 The \f[CB]KeyStore\f[R] class defines a static method named</span>
<span class="line-added"> 258 \f[CB]getDefaultType\f[R] that lets applications retrieve the value of the</span>
<span class="line-added"> 259 \f[CB]keystore.type\f[R] property.</span>
<span class="line-added"> 260 The following line of code creates an instance of the default keystore</span>
<span class="line-added"> 261 type as specified in the \f[CB]keystore.type\f[R] property:</span>
<span class="line-added"> 262 .RS</span>
<span class="line-added"> 263 .PP</span>
<span class="line-added"> 264 \f[CB]KeyStore\ keyStore\ =\ KeyStore.getInstance(KeyStore.getDefaultType());\f[R]</span>
<span class="line-added"> 265 .RE</span>
<span class="line-added"> 266 .PP</span>
<span class="line-added"> 267 The default keystore type is \f[CB]pkcs12\f[R], which is a cross platform</span>
<span class="line-added"> 268 keystore based on the RSA PKCS12 Personal Information Exchange Syntax</span>
<span class="line-added"> 269 Standard.</span>
<span class="line-added"> 270 This is specified by the following line in the security properties file:</span>
<span class="line-added"> 271 .RS</span>
<span class="line-added"> 272 .PP</span>
<span class="line-added"> 273 \f[CB]keystore.type=pkcs12\f[R]</span>
<span class="line-added"> 274 .RE</span>
<span class="line-added"> 275 .PP</span>
<span class="line-added"> 276 Case doesn\[aq]t matter in keystore type designations.</span>
<span class="line-added"> 277 For example, \f[CB]JKS\f[R] is the same as \f[CB]jks\f[R].</span>
<span class="line-added"> 278 .PP</span>
<span class="line-added"> 279 To have the tools utilize a keystore implementation other than the</span>
<span class="line-added"> 280 default, you can change that line to specify a different keystore type.</span>
<span class="line-added"> 281 For example, if you want to use the Oracle\[aq]s \f[CB]jks\f[R] keystore</span>
<span class="line-added"> 282 implementation, then change the line to the following:</span>
<span class="line-added"> 283 .RS</span>
<span class="line-added"> 284 .PP</span>
<span class="line-added"> 285 \f[CB]keystore.type=jks\f[R]</span>
<span class="line-added"> 286 .RE</span>
<span class="line-added"> 287 .SH SUPPORTED ALGORITHMS</span>
<span class="line-added"> 288 .PP</span>
<span class="line-added"> 289 By default, the \f[CB]jarsigner\f[R] command signs a JAR file using one of</span>
<span class="line-added"> 290 the following algorithms files depending on the type and size of the</span>
<span class="line-added"> 291 private key:</span>
<span class="line-added"> 292 .PP</span>
<span class="line-added"> 293 .TS</span>
<span class="line-added"> 294 tab(@);</span>
<span class="line-added"> 295 l l l.</span>
<span class="line-added"> 296 T{</span>
<span class="line-added"> 297 keyalg</span>
<span class="line-added"> 298 T}@T{</span>
<span class="line-added"> 299 keysize</span>
<span class="line-added"> 300 T}@T{</span>
<span class="line-added"> 301 default sigalg</span>
<span class="line-added"> 302 T}</span>
<span class="line-added"> 303 _</span>
<span class="line-added"> 304 T{</span>
<span class="line-added"> 305 DSA</span>
<span class="line-added"> 306 T}@T{</span>
<span class="line-added"> 307 any size</span>
<span class="line-added"> 308 T}@T{</span>
<span class="line-added"> 309 SHA256withDSA</span>
<span class="line-added"> 310 T}</span>
<span class="line-added"> 311 T{</span>
<span class="line-added"> 312 RSA</span>
<span class="line-added"> 313 T}@T{</span>
<span class="line-added"> 314 &lt;= 3072</span>
<span class="line-added"> 315 T}@T{</span>
<span class="line-added"> 316 SHA256withRSA</span>
<span class="line-added"> 317 T}</span>
<span class="line-added"> 318 T{</span>
<span class="line-added"> 319 T}@T{</span>
<span class="line-added"> 320 &lt;= 7680</span>
<span class="line-added"> 321 T}@T{</span>
<span class="line-added"> 322 SHA384withRSA</span>
<span class="line-added"> 323 T}</span>
<span class="line-added"> 324 T{</span>
<span class="line-added"> 325 T}@T{</span>
<span class="line-added"> 326 &gt; 7680</span>
<span class="line-added"> 327 T}@T{</span>
<span class="line-added"> 328 SHA512withRSA</span>
<span class="line-added"> 329 T}</span>
<span class="line-added"> 330 T{</span>
<span class="line-added"> 331 EC</span>
<span class="line-added"> 332 T}@T{</span>
<span class="line-added"> 333 &lt; 384</span>
<span class="line-added"> 334 T}@T{</span>
<span class="line-added"> 335 SHA256withECDSA</span>
<span class="line-added"> 336 T}</span>
<span class="line-added"> 337 T{</span>
<span class="line-added"> 338 T}@T{</span>
<span class="line-added"> 339 &lt; 512</span>
<span class="line-added"> 340 T}@T{</span>
<span class="line-added"> 341 SHA384withECDSA</span>
<span class="line-added"> 342 T}</span>
<span class="line-added"> 343 T{</span>
<span class="line-added"> 344 T}@T{</span>
<span class="line-added"> 345 = 512</span>
<span class="line-added"> 346 T}@T{</span>
<span class="line-added"> 347 SHA512withECDSA</span>
<span class="line-added"> 348 T}</span>
<span class="line-added"> 349 .TE</span>
<span class="line-added"> 350 .PP</span>
<span class="line-added"> 351 These default signature algorithms can be overridden by using the</span>
<span class="line-added"> 352 \f[CB]\-sigalg\f[R] option.</span>
<span class="line-added"> 353 .PP</span>
<span class="line-added"> 354 Signed JAR file algorithms are checked against the</span>
<span class="line-added"> 355 \f[CB]jdk.jar.disabledAlgorithms\f[R] security property during</span>
<span class="line-added"> 356 verification (\f[CB]\-verify\f[R]).</span>
<span class="line-added"> 357 If the JAR file was signed with any algorithms that are disabled, it</span>
<span class="line-added"> 358 will be treated as an unsigned JAR file.</span>
<span class="line-added"> 359 For detailed verification output, include</span>
<span class="line-added"> 360 \f[CB]\-J\-Djava.security.debug=jar\f[R].</span>
<span class="line-added"> 361 The default value for the \f[CB]jdk.jar.disabledAlgorithms\f[R] security</span>
<span class="line-added"> 362 property is defined in the \f[CB]java.security\f[R] file (located in the</span>
<span class="line-added"> 363 JRE\[aq]s \f[CB]$JAVA_HOME/conf/security\f[R] directory).</span>
<span class="line-added"> 364 .PP</span>
<span class="line-added"> 365 \f[B]Note:\f[R]</span>
<span class="line-added"> 366 .PP</span>
<span class="line-added"> 367 In order to improve out of the box security, default key size and</span>
<span class="line-added"> 368 signature algorithm names are periodically updated to stronger values</span>
<span class="line-added"> 369 with each release of the JDK.</span>
<span class="line-added"> 370 If interoperability with older releases of the JDK is important, please</span>
<span class="line-added"> 371 make sure the defaults are supported by those releases, or alternatively</span>
<span class="line-added"> 372 use the \f[CB]\-sigalg\f[R] option to override the default values at your</span>
<span class="line-added"> 373 own risk.</span>
<span class="line-added"> 374 .SH THE SIGNED JAR FILE</span>
<span class="line-added"> 375 .PP</span>
<span class="line-added"> 376 When the \f[CB]jarsigner\f[R] command is used to sign a JAR file, the</span>
<span class="line-added"> 377 output signed JAR file is exactly the same as the input JAR file, except</span>
<span class="line-added"> 378 that it has two additional files placed in the META\-INF directory:</span>
<span class="line-added"> 379 .IP \[bu] 2</span>
<span class="line-added"> 380 A signature file with an \f[CB]\&amp;.SF\f[R] extension</span>
<span class="line-added"> 381 .IP \[bu] 2</span>
<span class="line-added"> 382 A signature block file with a \f[CB]\&amp;.DSA\f[R], \f[CB]\&amp;.RSA\f[R], or</span>
<span class="line-added"> 383 \f[CB]\&amp;.EC\f[R] extension</span>
<span class="line-added"> 384 .PP</span>
<span class="line-added"> 385 The base file names for these two files come from the value of the</span>
<span class="line-added"> 386 \f[CB]\-sigfile\f[R] option.</span>
<span class="line-added"> 387 For example, when the option is \f[CB]\-sigfile\ MKSIGN\f[R], the files</span>
<span class="line-added"> 388 are named \f[CB]MKSIGN.SF\f[R] and \f[CB]MKSIGN.DSA\f[R]</span>
<span class="line-added"> 389 .PP</span>
<span class="line-added"> 390 If no \f[CB]\-sigfile\f[R] option appears on the command line, then the</span>
<span class="line-added"> 391 base file name for the \f[CB]\&amp;.SF\f[R] and \f[CB]\&amp;.DSA\f[R] files is the</span>
<span class="line-added"> 392 first 8 characters of the alias name specified on the command line, all</span>
<span class="line-added"> 393 converted to uppercase.</span>
<span class="line-added"> 394 If the alias name has fewer than 8 characters, then the full alias name</span>
<span class="line-added"> 395 is used.</span>
<span class="line-added"> 396 If the alias name contains any characters that aren\[aq]t allowed in a</span>
<span class="line-added"> 397 signature file name, then each such character is converted to an</span>
<span class="line-added"> 398 underscore (_) character in forming the file name.</span>
<span class="line-added"> 399 Valid characters include letters, digits, underscores, and hyphens.</span>
<span class="line-added"> 400 .SH SIGNATURE FILE</span>
<span class="line-added"> 401 .PP</span>
<span class="line-added"> 402 A signature file (\f[CB]\&amp;.SF\f[R] file) looks similar to the manifest</span>
<span class="line-added"> 403 file that is always included in a JAR file when the \f[CB]jarsigner\f[R]</span>
<span class="line-added"> 404 command is used to sign the file.</span>
<span class="line-added"> 405 For each source file included in the JAR file, the \f[CB]\&amp;.SF\f[R] file</span>
<span class="line-added"> 406 has two lines, such as in the manifest file, that list the following:</span>
<span class="line-added"> 407 .IP \[bu] 2</span>
 408 File name
<a name="5" id="anc5"></a><span class="line-modified"> 409 .IP \[bu] 2</span>

 410 Name of the digest algorithm (SHA)
<a name="6" id="anc6"></a><span class="line-modified"> 411 .IP \[bu] 2</span>

 412 SHA digest value
 413 .PP
<a name="7" id="anc7"></a><span class="line-modified"> 414 \f[B]Note:\f[R]</span>
 415 .PP
<a name="8" id="anc8"></a><span class="line-modified"> 416 The name of the digest algorithm (SHA) and the SHA digest value are on</span>
<span class="line-added"> 417 the same line.</span>
 418 .PP
<a name="9" id="anc9"></a><span class="line-modified"> 419 In the manifest file, the SHA digest value for each source file is the</span>
<span class="line-modified"> 420 digest (hash) of the binary data in the source file.</span>
<span class="line-modified"> 421 In the \f[CB]\&amp;.SF\f[R] file, the digest value for a specified source file</span>
<span class="line-modified"> 422 is the hash of the two lines in the manifest file for the source file.</span>
<span class="line-modified"> 423 .PP</span>
<span class="line-modified"> 424 The signature file, by default, includes a header with a hash of the</span>
<span class="line-modified"> 425 whole manifest file.</span>
<span class="line-modified"> 426 The header also contains a hash of the manifest header.</span>
<span class="line-modified"> 427 The presence of the header enables verification optimization.</span>
<span class="line-modified"> 428 See \f[B]JAR File Verification\f[R].</span>
<span class="line-modified"> 429 .SH SIGNATURE BLOCK FILE</span>
<span class="line-modified"> 430 .PP</span>
<span class="line-modified"> 431 The \f[CB]\&amp;.SF\f[R] file is signed and the signature is placed in the</span>
<span class="line-modified"> 432 signature block file.</span>
<span class="line-modified"> 433 This file also contains, encoded inside it, the certificate or</span>
<span class="line-modified"> 434 certificate chain from the keystore that authenticates the public key</span>
<span class="line-modified"> 435 corresponding to the private key used for signing.</span>
<span class="line-modified"> 436 The file has the extension \f[CB]\&amp;.DSA\f[R], \f[CB]\&amp;.RSA\f[R], or</span>
<span class="line-modified"> 437 \f[CB]\&amp;.EC\f[R], depending on the digest algorithm used.</span>
<span class="line-modified"> 438 .SH SIGNATURE TIME STAMP</span>
<span class="line-modified"> 439 .PP</span>
<span class="line-modified"> 440 The \f[CB]jarsigner\f[R] command used with the following options generates</span>
<span class="line-modified"> 441 and stores a signature time stamp when signing a JAR file:</span>
<span class="line-modified"> 442 .IP \[bu] 2</span>
<span class="line-modified"> 443 \f[CB]\-tsa\f[R] \f[I]url\f[R]</span>
<span class="line-modified"> 444 .IP \[bu] 2</span>
<span class="line-modified"> 445 \f[CB]\-tsacert\f[R] \f[I]alias\f[R]</span>
<span class="line-modified"> 446 .IP \[bu] 2</span>
<span class="line-modified"> 447 \f[CB]\-tsapolicyid\f[R] \f[I]policyid\f[R]</span>
<span class="line-modified"> 448 .IP \[bu] 2</span>
<span class="line-modified"> 449 \f[CB]\-tsadigestalg\f[R] \f[I]algorithm\f[R]</span>
<span class="line-modified"> 450 .PP</span>
<span class="line-modified"> 451 See \f[B]Options for jarsigner\f[R].</span>
<span class="line-modified"> 452 .SH JAR FILE VERIFICATION</span>
<span class="line-modified"> 453 .PP</span>
<span class="line-modified"> 454 A successful JAR file verification occurs when the signatures are valid,</span>
<span class="line-modified"> 455 and none of the files that were in the JAR file when the signatures were</span>
<span class="line-modified"> 456 generated have changed since then.</span>
<span class="line-modified"> 457 JAR file verification involves the following steps:</span>
<span class="line-modified"> 458 .IP &quot;1.&quot; 3</span>
<span class="line-modified"> 459 Verify the signature of the \f[CB]\&amp;.SF\f[R] file.</span>
<span class="line-modified"> 460 .RS 4</span>
<span class="line-modified"> 461 .PP</span>
<span class="line-modified"> 462 The verification ensures that the signature stored in each signature</span>
<span class="line-modified"> 463 block (\f[CB]\&amp;.DSA\f[R]) file was generated using the private key</span>
<span class="line-modified"> 464 corresponding to the public key whose certificate (or certificate chain)</span>
<span class="line-modified"> 465 also appears in the \f[CB]\&amp;.DSA\f[R] file.</span>
<span class="line-modified"> 466 It also ensures that the signature is a valid signature of the</span>
<span class="line-modified"> 467 corresponding signature (\f[CB]\&amp;.SF\f[R]) file, and thus the</span>
<span class="line-modified"> 468 \f[CB]\&amp;.SF\f[R] file wasn\[aq]t tampered with.</span>
<span class="line-modified"> 469 .RE</span>
<span class="line-modified"> 470 .IP &quot;2.&quot; 3</span>
<span class="line-modified"> 471 Verify the digest listed in each entry in the \f[CB]\&amp;.SF\f[R] file with</span>
<span class="line-modified"> 472 each corresponding section in the manifest.</span>
<span class="line-modified"> 473 .RS 4</span>
<span class="line-modified"> 474 .PP</span>
<span class="line-modified"> 475 The \f[CB]\&amp;.SF\f[R] file by default includes a header that contains a</span>
<span class="line-modified"> 476 hash of the entire manifest file.</span>
<span class="line-modified"> 477 When the header is present, the verification can check to see whether or</span>
<span class="line-modified"> 478 not the hash in the header matches the hash of the manifest file.</span>
<span class="line-modified"> 479 If there is a match, then verification proceeds to the next step.</span>
<span class="line-modified"> 480 .PP</span>
<span class="line-modified"> 481 If there is no match, then a less optimized verification is required to</span>
<span class="line-modified"> 482 ensure that the hash in each source file information section in the</span>
<span class="line-modified"> 483 \f[CB]\&amp;.SF\f[R] file equals the hash of its corresponding section in the</span>
<span class="line-modified"> 484 manifest file.</span>
<span class="line-modified"> 485 See Signature File.</span>
<span class="line-modified"> 486 .PP</span>
<span class="line-modified"> 487 One reason the hash of the manifest file that is stored in the</span>
<span class="line-modified"> 488 \f[CB]\&amp;.SF\f[R] file header might not equal the hash of the current</span>
<span class="line-modified"> 489 manifest file is that one or more files were added to the JAR file (with</span>
<span class="line-modified"> 490 the \f[CB]jar\f[R] tool) after the signature and \f[CB]\&amp;.SF\f[R] file were</span>
<span class="line-modified"> 491 generated.</span>
<span class="line-modified"> 492 When the \f[CB]jar\f[R] tool is used to add files, the manifest file is</span>
<span class="line-modified"> 493 changed by adding sections to it for the new files, but the</span>
<span class="line-modified"> 494 \f[CB]\&amp;.SF\f[R] file isn\[aq]t changed.</span>
<span class="line-modified"> 495 A verification is still considered successful when none of the files</span>
<span class="line-modified"> 496 that were in the JAR file when the signature was generated have been</span>
<span class="line-modified"> 497 changed since then.</span>
<span class="line-modified"> 498 This happens when the hashes in the non\-header sections of the</span>
<span class="line-modified"> 499 \f[CB]\&amp;.SF\f[R] file equal the hashes of the corresponding sections in</span>
<span class="line-modified"> 500 the manifest file.</span>
<span class="line-modified"> 501 .RE</span>
<span class="line-modified"> 502 .IP &quot;3.&quot; 3</span>
<span class="line-modified"> 503 Read each file in the JAR file that has an entry in the \f[CB]\&amp;.SF\f[R]</span>
<span class="line-modified"> 504 file.</span>
<span class="line-modified"> 505 While reading, compute the file\[aq]s digest and compare the result with</span>
<span class="line-modified"> 506 the digest for this file in the manifest section.</span>
<span class="line-modified"> 507 The digests should be the same or verification fails.</span>
<span class="line-modified"> 508 .RS 4</span>
<span class="line-modified"> 509 .PP</span>
<span class="line-modified"> 510 If any serious verification failures occur during the verification</span>
<span class="line-modified"> 511 process, then the process is stopped and a security exception is thrown.</span>
<span class="line-modified"> 512 The \f[CB]jarsigner\f[R] command catches and displays the exception.</span>
<span class="line-modified"> 513 .RE</span>
<span class="line-modified"> 514 .IP &quot;4.&quot; 3</span>
<span class="line-modified"> 515 Check for disabled algorithm usage.</span>
<span class="line-modified"> 516 See \f[B]Supported Algorithms\f[R].</span>
<span class="line-modified"> 517 .PP</span>
<span class="line-modified"> 518 \f[B]Note:\f[R]</span>
<span class="line-modified"> 519 .PP</span>
<span class="line-modified"> 520 You should read any addition warnings (or errors if you specified the</span>
<span class="line-modified"> 521 \f[CB]\-strict\f[R] option), as well as the content of the certificate (by</span>
<span class="line-modified"> 522 specifying the \f[CB]\-verbose\f[R] and \f[CB]\-certs\f[R] options) to</span>
<span class="line-modified"> 523 determine if the signature can be trusted.</span>
<span class="line-modified"> 524 .SH MULTIPLE SIGNATURES FOR A JAR FILE</span>
<span class="line-modified"> 525 .PP</span>
<span class="line-modified"> 526 A JAR file can be signed by multiple people by running the</span>
<span class="line-modified"> 527 \f[CB]jarsigner\f[R] command on the file multiple times and specifying the</span>
<span class="line-modified"> 528 alias for a different person each time, as follows:</span>
<span class="line-modified"> 529 .IP</span>
<span class="line-modified"> 530 .nf</span>
<span class="line-modified"> 531 \f[CB]</span>
<span class="line-modified"> 532 jarsigner\ myBundle.jar\ susan</span>
<span class="line-modified"> 533 jarsigner\ myBundle.jar\ kevin</span>
<span class="line-modified"> 534 \f[R]</span>
<span class="line-modified"> 535 .fi</span>
<span class="line-modified"> 536 .PP</span>
<span class="line-modified"> 537 When a JAR file is signed multiple times, there are multiple</span>
<span class="line-modified"> 538 \f[CB]\&amp;.SF\f[R] and \f[CB]\&amp;.DSA\f[R] files in the resulting JAR file, one</span>
<span class="line-modified"> 539 pair for each signature.</span>
<span class="line-modified"> 540 In the previous example, the output JAR file includes files with the</span>
<span class="line-modified"> 541 following names:</span>
<span class="line-modified"> 542 .IP</span>
<span class="line-modified"> 543 .nf</span>
<span class="line-modified"> 544 \f[CB]</span>
<span class="line-modified"> 545 SUSAN.SF</span>
<span class="line-modified"> 546 SUSAN.DSA</span>
<span class="line-modified"> 547 KEVIN.SF</span>
<span class="line-modified"> 548 KEVIN.DSA</span>
<span class="line-modified"> 549 \f[R]</span>
<span class="line-modified"> 550 .fi</span>
<span class="line-modified"> 551 .SH OPTIONS FOR JARSIGNER</span>
<span class="line-modified"> 552 .PP</span>
<span class="line-modified"> 553 The following sections describe the options for the \f[CB]jarsigner\f[R].</span>
<span class="line-modified"> 554 Be aware of the following standards:</span>
<span class="line-modified"> 555 .IP \[bu] 2</span>
<span class="line-added"> 556 All option names are preceded by a hyphen sign (\-).</span>
<span class="line-added"> 557 .IP \[bu] 2</span>
<span class="line-added"> 558 The options can be provided in any order.</span>
<span class="line-added"> 559 .IP \[bu] 2</span>
<span class="line-added"> 560 Items that are in italics or underlined (option values) represent the</span>
<span class="line-added"> 561 actual values that must be supplied.</span>
<span class="line-added"> 562 .IP \[bu] 2</span>
<span class="line-added"> 563 The \f[CB]\-storepass\f[R], \f[CB]\-keypass\f[R], \f[CB]\-sigfile\f[R],</span>
<span class="line-added"> 564 \f[CB]\-sigalg\f[R], \f[CB]\-digestalg\f[R], \f[CB]\-signedjar\f[R], and</span>
<span class="line-added"> 565 TSA\-related options are only relevant when signing a JAR file; they</span>
<span class="line-added"> 566 aren\[aq]t relevant when verifying a signed JAR file.</span>
<span class="line-added"> 567 The \f[CB]\-keystore\f[R] option is relevant for signing and verifying a</span>
<span class="line-added"> 568 JAR file.</span>
<span class="line-added"> 569 In addition, aliases are specified when signing and verifying a JAR</span>
<span class="line-added"> 570 file.</span>
 571 .TP
<a name="10" id="anc10"></a><span class="line-modified"> 572 .B \f[CB]\-keystore\f[R] \f[I]url\f[R]</span>
<span class="line-modified"> 573 Specifies the URL that tells the keystore location.</span>
<span class="line-modified"> 574 This defaults to the file \f[CB]\&amp;.keystore\f[R] in the user\[aq]s home</span>
<span class="line-modified"> 575 directory, as determined by the \f[CB]user.home\f[R] system property.</span>
<span class="line-modified"> 576 .RS</span>
<span class="line-added"> 577 .PP</span>
<span class="line-added"> 578 A keystore is required when signing.</span>
<span class="line-added"> 579 You must explicitly specify a keystore when the default keystore</span>
<span class="line-added"> 580 doesn\[aq]t exist or if you want to use one other than the default.</span>
<span class="line-added"> 581 .PP</span>
<span class="line-added"> 582 A keystore isn\[aq]t required when verifying, but if one is specified or</span>
<span class="line-added"> 583 the default exists and the \f[CB]\-verbose\f[R] option was also specified,</span>
<span class="line-added"> 584 then additional information is output regarding whether or not any of</span>
<span class="line-added"> 585 the certificates used to verify the JAR file are contained in that</span>
<span class="line-added"> 586 keystore.</span>
<span class="line-added"> 587 .PP</span>
<span class="line-added"> 588 The \f[CB]\-keystore\f[R] argument can be a file name and path</span>
<span class="line-added"> 589 specification rather than a URL, in which case it is treated the same as</span>
<span class="line-added"> 590 a file: URL, for example, the following are equivalent:</span>
<span class="line-added"> 591 .IP \[bu] 2</span>
<span class="line-added"> 592 \f[CB]\-keystore\f[R] \f[I]filePathAndName\f[R]</span>
<span class="line-added"> 593 .IP \[bu] 2</span>
<span class="line-added"> 594 \f[CB]\-keystore\ file:\f[R]\f[I]filePathAndName\f[R]</span>
<span class="line-added"> 595 .PP</span>
<span class="line-added"> 596 If the Sun PKCS #11 provider was configured in the</span>
<span class="line-added"> 597 \f[CB]java.security\f[R] security properties file (located in the</span>
<span class="line-added"> 598 JRE\[aq]s \f[CB]$JAVA_HOME/conf/security\f[R] directory), then the</span>
<span class="line-added"> 599 \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R] tools can operate on the PKCS</span>
<span class="line-added"> 600 #11 token by specifying these options:</span>
<span class="line-added"> 601 .RS</span>
<span class="line-added"> 602 .PP</span>
<span class="line-added"> 603 \f[CB]\-keystore\ NONE\ \-storetype\ PKCS11\f[R]</span>
<span class="line-added"> 604 .RE</span>
<span class="line-added"> 605 .PP</span>
<span class="line-added"> 606 For example, the following command lists the contents of the configured</span>
<span class="line-added"> 607 PKCS#11 token:</span>
<span class="line-added"> 608 .RS</span>
<span class="line-added"> 609 .PP</span>
<span class="line-added"> 610 \f[CB]keytool\ \-keystore\ NONE\ \-storetype\ PKCS11\ \-list\f[R]</span>
<span class="line-added"> 611 .RE</span>
<span class="line-added"> 612 .RE</span>
 613 .TP
<a name="11" id="anc11"></a><span class="line-modified"> 614 .B \f[CB]\-storepass\f[R] [\f[CB]:env\f[R] | \f[CB]:file\f[R]] \f[I]argument\f[R]</span>
<span class="line-modified"> 615 Specifies the password that is required to access the keystore.</span>
<span class="line-modified"> 616 This is only needed when signing (not verifying) a JAR file.</span>
<span class="line-modified"> 617 In that case, if a \f[CB]\-storepass\f[R] option isn\[aq]t provided at the</span>
<span class="line-modified"> 618 command line, then the user is prompted for the password.</span>
<span class="line-modified"> 619 .RS</span>
<span class="line-modified"> 620 .PP</span>
<span class="line-modified"> 621 If the modifier \f[CB]env\f[R] or \f[CB]file\f[R] isn\[aq]t specified, then</span>
<span class="line-modified"> 622 the password has the value \f[CB]argument\f[R].</span>
<span class="line-modified"> 623 Otherwise, the password is retrieved as follows:</span>
<span class="line-modified"> 624 .IP \[bu] 2</span>
<span class="line-modified"> 625 \f[CB]env\f[R]: Retrieve the password from the environment variable named</span>
<span class="line-modified"> 626 \f[I]argument\f[R].</span>
<span class="line-modified"> 627 .IP \[bu] 2</span>
<span class="line-modified"> 628 \f[CB]file\f[R]: Retrieve the password from the file named</span>
<span class="line-modified"> 629 \f[I]argument\f[R].</span>
<span class="line-added"> 630 .PP</span>
<span class="line-added"> 631 \f[B]Note:\f[R]</span>
<span class="line-added"> 632 .PP</span>
<span class="line-added"> 633 The password shouldn\[aq]t be specified on the command line or in a</span>
<span class="line-added"> 634 script unless it is for testing purposes, or you are on a secure system.</span>
<span class="line-added"> 635 .RE</span>
 636 .TP
<a name="12" id="anc12"></a><span class="line-modified"> 637 .B \f[CB]\-storetype\f[R] \f[I]storetype\f[R]</span>
<span class="line-modified"> 638 Specifies the type of keystore to be instantiated.</span>
<span class="line-modified"> 639 The default keystore type is the one that is specified as the value of</span>
<span class="line-modified"> 640 the \f[CB]keystore.type\f[R] property in the security properties file,</span>
<span class="line-modified"> 641 which is returned by the static \f[CB]getDefaultType\f[R] method in</span>
<span class="line-modified"> 642 \f[CB]java.security.KeyStore\f[R].</span>
<span class="line-modified"> 643 .RS</span>
<span class="line-modified"> 644 .PP</span>
<span class="line-modified"> 645 The PIN for a PKCS #11 token can also be specified with the</span>
<span class="line-modified"> 646 \f[CB]\-storepass\f[R] option.</span>
<span class="line-modified"> 647 If none is specified, then the \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R]</span>
<span class="line-modified"> 648 commands prompt for the token PIN.</span>
<span class="line-modified"> 649 If the token has a protected authentication path (such as a dedicated</span>
<span class="line-modified"> 650 PIN\-pad or a biometric reader), then the \f[CB]\-protected\f[R] option</span>
<span class="line-modified"> 651 must be specified and no password options can be specified.</span>
<span class="line-modified"> 652 .RE</span>
 653 .TP
<a name="13" id="anc13"></a><span class="line-modified"> 654 .B \f[CB]\-keypass\f[R] [\f[CB]:env\f[R] | \f[CB]:file\f[R]] \f[I]argument\f[R] \f[CB]\-certchain\f[R] \f[I]file\f[R]</span>
<span class="line-modified"> 655 Specifies the password used to protect the private key of the keystore</span>
<span class="line-modified"> 656 entry addressed by the alias specified on the command line.</span>
<span class="line-modified"> 657 The password is required when using \f[CB]jarsigner\f[R] to sign a JAR</span>
<span class="line-modified"> 658 file.</span>
<span class="line-modified"> 659 If no password is provided on the command line, and the required</span>
<span class="line-modified"> 660 password is different from the store password, then the user is prompted</span>
<span class="line-added"> 661 for it.</span>
<span class="line-added"> 662 .RS</span>
<span class="line-added"> 663 .PP</span>
<span class="line-added"> 664 If the modifier \f[CB]env\f[R] or \f[CB]file\f[R] isn\[aq]t specified, then</span>
<span class="line-added"> 665 the password has the value \f[CB]argument\f[R].</span>
<span class="line-added"> 666 Otherwise, the password is retrieved as follows:</span>
<span class="line-added"> 667 .IP \[bu] 2</span>
<span class="line-added"> 668 \f[CB]env\f[R]: Retrieve the password from the environment variable named</span>
<span class="line-added"> 669 \f[I]argument\f[R].</span>
<span class="line-added"> 670 .IP \[bu] 2</span>
<span class="line-added"> 671 \f[CB]file\f[R]: Retrieve the password from the file named</span>
<span class="line-added"> 672 \f[I]argument\f[R].</span>
<span class="line-added"> 673 .PP</span>
<span class="line-added"> 674 \f[B]Note:\f[R]</span>
<span class="line-added"> 675 .PP</span>
<span class="line-added"> 676 The password shouldn\[aq]t be specified on the command line or in a</span>
<span class="line-added"> 677 script unless it is for testing purposes, or you are on a secure system.</span>
<span class="line-added"> 678 .RE</span>
 679 .TP
<a name="14" id="anc14"></a><span class="line-modified"> 680 .B \f[CB]\-certchain\f[R] \f[I]file\f[R]</span>
<span class="line-modified"> 681 Specifies the certificate chain to be used when the certificate chain</span>
<span class="line-modified"> 682 associated with the private key of the keystore entry that is addressed</span>
<span class="line-modified"> 683 by the alias specified on the command line isn\[aq]t complete.</span>
<span class="line-modified"> 684 This can happen when the keystore is located on a hardware token where</span>
<span class="line-modified"> 685 there isn\[aq]t enough capacity to hold a complete certificate chain.</span>
<span class="line-modified"> 686 The file can be a sequence of concatenated X.509 certificates, or a</span>
<span class="line-added"> 687 single PKCS#7 formatted data block, either in binary encoding format or</span>
<span class="line-added"> 688 in printable encoding format (also known as Base64 encoding) as defined</span>
<span class="line-added"> 689 by \f[B]Internet RFC 1421 Certificate Encoding Standard\f[R]</span>
<span class="line-added"> 690 [http://tools.ietf.org/html/rfc1421].</span>
<span class="line-added"> 691 .RS</span>
<span class="line-added"> 692 .RE</span>
 693 .TP
<a name="15" id="anc15"></a><span class="line-modified"> 694 .B \f[CB]\-sigfile\f[R] \f[I]file\f[R]</span>
<span class="line-modified"> 695 Specifies the base file name to be used for the generated \f[CB]\&amp;.SF\f[R]</span>
<span class="line-modified"> 696 and \f[CB]\&amp;.DSA\f[R] files.</span>
<span class="line-modified"> 697 For example, if file is \f[CB]DUKESIGN\f[R], then the generated</span>
<span class="line-modified"> 698 \f[CB]\&amp;.SF\f[R] and \f[CB]\&amp;.DSA\f[R] files are named \f[CB]DUKESIGN.SF\f[R]</span>
<span class="line-modified"> 699 and \f[CB]DUKESIGN.DSA\f[R], and placed in the \f[CB]META\-INF\f[R]</span>
<span class="line-modified"> 700 directory of the signed JAR file.</span>
<span class="line-added"> 701 .RS</span>
<span class="line-added"> 702 .PP</span>
<span class="line-added"> 703 The characters in the file must come from the set</span>
<span class="line-added"> 704 \f[CB]a\-zA\-Z0\-9_\-\f[R].</span>
<span class="line-added"> 705 Only letters, numbers, underscore, and hyphen characters are allowed.</span>
<span class="line-added"> 706 All lowercase characters are converted to uppercase for the</span>
<span class="line-added"> 707 \f[CB]\&amp;.SF\f[R] and \f[CB]\&amp;.DSA\f[R] file names.</span>
<span class="line-added"> 708 .PP</span>
<span class="line-added"> 709 If no \f[CB]\-sigfile\f[R] option appears on the command line, then the</span>
<span class="line-added"> 710 base file name for the \f[CB]\&amp;.SF\f[R] and \f[CB]\&amp;.DSA\f[R] files is the</span>
<span class="line-added"> 711 first 8 characters of the alias name specified on the command line, all</span>
<span class="line-added"> 712 converted to upper case.</span>
<span class="line-added"> 713 If the alias name has fewer than 8 characters, then the full alias name</span>
<span class="line-added"> 714 is used.</span>
<span class="line-added"> 715 If the alias name contains any characters that aren\[aq]t valid in a</span>
<span class="line-added"> 716 signature file name, then each such character is converted to an</span>
<span class="line-added"> 717 underscore (_) character to form the file name.</span>
<span class="line-added"> 718 .RE</span>
 719 .TP
<a name="16" id="anc16"></a><span class="line-modified"> 720 .B \f[CB]\-signedjar\f[R] \f[I]file\f[R]</span>
<span class="line-modified"> 721 Specifies the name of signed JAR file.</span>
<span class="line-modified"> 722 .RS</span>
<span class="line-modified"> 723 .RE</span>
<span class="line-modified"> 724 .TP</span>
<span class="line-added"> 725 .B \f[CB]\-digestalg\f[R] \f[I]algorithm\f[R]</span>
<span class="line-added"> 726 Specifies the name of the message digest algorithm to use when digesting</span>
<span class="line-added"> 727 the entries of a JAR file.</span>
<span class="line-added"> 728 .RS</span>
<span class="line-added"> 729 .PP</span>
<span class="line-added"> 730 For a list of standard message digest algorithm names, see Java Security</span>
<span class="line-added"> 731 Standard Algorithm Names.</span>
<span class="line-added"> 732 .PP</span>
<span class="line-added"> 733 If this option isn\[aq]t specified, then \f[CB]SHA256\f[R] is used.</span>
<span class="line-added"> 734 There must either be a statically installed provider supplying an</span>
<span class="line-added"> 735 implementation of the specified algorithm or the user must specify one</span>
<span class="line-added"> 736 with the \f[CB]\-addprovider\f[R] or \f[CB]\-providerClass\f[R] options;</span>
<span class="line-added"> 737 otherwise, the command will not succeed.</span>
<span class="line-added"> 738 .RE</span>
 739 .TP
<a name="17" id="anc17"></a><span class="line-modified"> 740 .B \f[CB]\-sigalg\f[R] \f[I]algorithm\f[R]</span>
<span class="line-modified"> 741 Specifies the name of the signature algorithm to use to sign the JAR</span>
<span class="line-modified"> 742 file.</span>
<span class="line-added"> 743 .RS</span>
<span class="line-added"> 744 .PP</span>
<span class="line-added"> 745 This algorithm must be compatible with the private key used to sign the</span>
<span class="line-added"> 746 JAR file.</span>
<span class="line-added"> 747 If this option isn\[aq]t specified, then use a default algorithm</span>
<span class="line-added"> 748 matching the private key as described in the \f[B]Supported</span>
<span class="line-added"> 749 Algorithms\f[R] section.</span>
<span class="line-added"> 750 There must either be a statically installed provider supplying an</span>
<span class="line-added"> 751 implementation of the specified algorithm or you must specify one with</span>
<span class="line-added"> 752 the \f[CB]\-addprovider\f[R] or \f[CB]\-providerClass\f[R] option;</span>
<span class="line-added"> 753 otherwise, the command doesn\[aq]t succeed.</span>
<span class="line-added"> 754 .PP</span>
<span class="line-added"> 755 For a list of standard message digest algorithm names, see Java Security</span>
<span class="line-added"> 756 Standard Algorithm Names.</span>
<span class="line-added"> 757 .RE</span>
<span class="line-added"> 758 .TP</span>
<span class="line-added"> 759 .B \f[CB]\-verify\f[R]</span>
<span class="line-added"> 760 Verifies a signed JAR file.</span>
<span class="line-added"> 761 .RS</span>
<span class="line-added"> 762 .RE</span>
<span class="line-added"> 763 .TP</span>
<span class="line-added"> 764 .B \f[CB]\-verbose\f[R][\f[CB]:\f[R]\f[I]suboptions\f[R]]</span>
<span class="line-added"> 765 When the \f[CB]\-verbose\f[R] option appears on the command line, it</span>
<span class="line-added"> 766 indicates that the \f[CB]jarsigner\f[R] use the verbose mode when signing</span>
<span class="line-added"> 767 or verifying with the suboptions determining how much information is</span>
<span class="line-added"> 768 shown.</span>
<span class="line-added"> 769 This causes the , which causes \f[CB]jarsigner\f[R] to output extra</span>
<span class="line-added"> 770 information about the progress of the JAR signing or verification.</span>
<span class="line-added"> 771 The \f[I]suboptions\f[R] can be \f[CB]all\f[R], \f[CB]grouped\f[R], or</span>
<span class="line-added"> 772 \f[CB]summary\f[R].</span>
<span class="line-added"> 773 .RS</span>
<span class="line-added"> 774 .PP</span>
<span class="line-added"> 775 If the \f[CB]\-certs\f[R] option is also specified, then the default mode</span>
<span class="line-added"> 776 (or suboption \f[CB]all\f[R]) displays each entry as it is being</span>
<span class="line-added"> 777 processed, and after that, the certificate information for each signer</span>
<span class="line-added"> 778 of the JAR file.</span>
<span class="line-added"> 779 .PP</span>
<span class="line-added"> 780 If the \f[CB]\-certs\f[R] and the \f[CB]\-verbose:grouped\f[R] suboptions</span>
<span class="line-added"> 781 are specified, then entries with the same signer info are grouped and</span>
<span class="line-added"> 782 displayed together with their certificate information.</span>
<span class="line-added"> 783 .PP</span>
<span class="line-added"> 784 If \f[CB]\-certs\f[R] and the \f[CB]\-verbose:summary\f[R] suboptions are</span>
<span class="line-added"> 785 specified, then entries with the same signer information are grouped and</span>
<span class="line-added"> 786 displayed together with their certificate information.</span>
<span class="line-added"> 787 .PP</span>
<span class="line-added"> 788 Details about each entry are summarized and displayed as \f[I]one entry</span>
<span class="line-added"> 789 (and more)\f[R].</span>
<span class="line-added"> 790 See \f[B]Example of Verifying a Signed JAR File\f[R] and \f[B]Example of</span>
<span class="line-added"> 791 Verification with Certificate Information\f[R].</span>
<span class="line-added"> 792 .RE</span>
 793 .TP
<a name="18" id="anc18"></a><span class="line-modified"> 794 .B \f[CB]\-certs\f[R]</span>
<span class="line-modified"> 795 If the \f[CB]\-certs\f[R] option appears on the command line with the</span>
<span class="line-modified"> 796 \f[CB]\-verify\f[R] and \f[CB]\-verbose\f[R] options, then the output</span>
<span class="line-added"> 797 includes certificate information for each signer of the JAR file.</span>
<span class="line-added"> 798 This information includes the name of the type of certificate (stored in</span>
<span class="line-added"> 799 the \f[CB]\&amp;.DSA\f[R] file) that certifies the signer\[aq]s public key,</span>
<span class="line-added"> 800 and if the certificate is an X.509 certificate (an instance of the</span>
<span class="line-added"> 801 \f[CB]java.security.cert.X509Certificate\f[R]), then the distinguished</span>
<span class="line-added"> 802 name of the signer.</span>
<span class="line-added"> 803 .RS</span>
<span class="line-added"> 804 .PP</span>
<span class="line-added"> 805 The keystore is also examined.</span>
<span class="line-added"> 806 If no keystore value is specified on the command line, then the default</span>
<span class="line-added"> 807 keystore file (if any) is checked.</span>
<span class="line-added"> 808 If the public key certificate for a signer matches an entry in the</span>
<span class="line-added"> 809 keystore, then the alias name for the keystore entry for that signer is</span>
<span class="line-added"> 810 displayed in parentheses.</span>
<span class="line-added"> 811 .RE</span>
 812 .TP
<a name="19" id="anc19"></a><span class="line-modified"> 813 .B \f[CB]\-tsa\f[R] \f[I]url\f[R]</span>
<span class="line-modified"> 814 If \f[CB]\-tsa\ http://example.tsa.url\f[R] appears on the command line</span>
<span class="line-modified"> 815 when signing a JAR file then a time stamp is generated for the</span>
<span class="line-added"> 816 signature.</span>
<span class="line-added"> 817 The URL, \f[CB]http://example.tsa.url\f[R], identifies the location of the</span>
<span class="line-added"> 818 Time Stamping Authority (TSA) and overrides any URL found with the</span>
<span class="line-added"> 819 \f[CB]\-tsacert\f[R] option.</span>
<span class="line-added"> 820 The \f[CB]\-tsa\f[R] option doesn\[aq]t require the TSA public key</span>
<span class="line-added"> 821 certificate to be present in the keystore.</span>
<span class="line-added"> 822 .RS</span>
<span class="line-added"> 823 .PP</span>
<span class="line-added"> 824 To generate the time stamp, \f[CB]jarsigner\f[R] communicates with the TSA</span>
<span class="line-added"> 825 with the Time\-Stamp Protocol (TSP) defined in RFC 3161.</span>
<span class="line-added"> 826 When successful, the time stamp token returned by the TSA is stored with</span>
<span class="line-added"> 827 the signature in the signature block file.</span>
<span class="line-added"> 828 .RE</span>
 829 .TP
<a name="20" id="anc20"></a><span class="line-modified"> 830 .B \f[CB]\-tsacert\f[R] \f[I]alias\f[R]</span>
<span class="line-modified"> 831 When \f[CB]\-tsacert\f[R] \f[I]alias\f[R] appears on the command line when</span>
<span class="line-modified"> 832 signing a JAR file, a time stamp is generated for the signature.</span>
<span class="line-modified"> 833 The alias identifies the TSA public key certificate in the keystore that</span>
<span class="line-modified"> 834 is in effect.</span>
<span class="line-modified"> 835 The entry\[aq]s certificate is examined for a Subject Information Access</span>
<span class="line-modified"> 836 extension that contains a URL identifying the location of the TSA.</span>
<span class="line-added"> 837 .RS</span>
<span class="line-added"> 838 .PP</span>
<span class="line-added"> 839 The TSA public key certificate must be present in the keystore when</span>
<span class="line-added"> 840 using the \f[CB]\-tsacert\f[R] option.</span>
<span class="line-added"> 841 .RE</span>
<span class="line-added"> 842 .TP</span>
<span class="line-added"> 843 .B \f[CB]\-tsapolicyid\f[R] \f[I]policyid\f[R]</span>
<span class="line-added"> 844 Specifies the object identifier (OID) that identifies the policy ID to</span>
<span class="line-added"> 845 be sent to the TSA server.</span>
<span class="line-added"> 846 If this option isn\[aq]t specified, no policy ID is sent and the TSA</span>
<span class="line-added"> 847 server will choose a default policy ID.</span>
<span class="line-added"> 848 .RS</span>
<span class="line-added"> 849 .PP</span>
<span class="line-added"> 850 Object identifiers are defined by X.696, which is an ITU</span>
<span class="line-added"> 851 Telecommunication Standardization Sector (ITU\-T) standard.</span>
<span class="line-added"> 852 These identifiers are typically period\-separated sets of non\-negative</span>
<span class="line-added"> 853 digits like \f[CB]1.2.3.4\f[R], for example.</span>
<span class="line-added"> 854 .RE</span>
<span class="line-added"> 855 .TP</span>
<span class="line-added"> 856 .B \f[CB]\-tsadigestalg\f[R] \f[I]algorithm\f[R]</span>
<span class="line-added"> 857 Specifies the message digest algorithm that is used to generate the</span>
<span class="line-added"> 858 message imprint to be sent to the TSA server.</span>
<span class="line-added"> 859 If this option isn\[aq]t specified, SHA\-256 will be used.</span>
<span class="line-added"> 860 .RS</span>
<span class="line-added"> 861 .PP</span>
<span class="line-added"> 862 See \f[B]Supported Algorithms\f[R].</span>
<span class="line-added"> 863 .PP</span>
<span class="line-added"> 864 For a list of standard message digest algorithm names, see Java Security</span>
<span class="line-added"> 865 Standard Algorithm Names.</span>
<span class="line-added"> 866 .RE</span>
<span class="line-added"> 867 .TP</span>
<span class="line-added"> 868 .B \f[CB]\-internalsf\f[R]</span>
<span class="line-added"> 869 In the past, the \f[CB]\&amp;.DSA\f[R] (signature block) file generated when a</span>
<span class="line-added"> 870 JAR file was signed included a complete encoded copy of the</span>
<span class="line-added"> 871 \f[CB]\&amp;.SF\f[R] file (signature file) also generated.</span>
<span class="line-added"> 872 This behavior has been changed.</span>
<span class="line-added"> 873 To reduce the overall size of the output JAR file, the \f[CB]\&amp;.DSA\f[R]</span>
<span class="line-added"> 874 file by default doesn\[aq]t contain a copy of the \f[CB]\&amp;.SF\f[R] file</span>
<span class="line-added"> 875 anymore.</span>
<span class="line-added"> 876 If \f[CB]\-internalsf\f[R] appears on the command line, then the old</span>
<span class="line-added"> 877 behavior is utilized.</span>
<span class="line-added"> 878 This option is useful for testing.</span>
<span class="line-added"> 879 In practice, don\[aq]t use the \f[CB]\-internalsf\f[R] option because it</span>
<span class="line-added"> 880 incurs higher overhead.</span>
<span class="line-added"> 881 .RS</span>
<span class="line-added"> 882 .RE</span>
<span class="line-added"> 883 .TP</span>
<span class="line-added"> 884 .B \f[CB]\-sectionsonly\f[R]</span>
<span class="line-added"> 885 If the \f[CB]\-sectionsonly\f[R] option appears on the command line, then</span>
<span class="line-added"> 886 the \f[CB]\&amp;.SF\f[R] file (signature file) generated when a JAR file is</span>
<span class="line-added"> 887 signed doesn\[aq]t include a header that contains a hash of the whole</span>
<span class="line-added"> 888 manifest file.</span>
<span class="line-added"> 889 It contains only the information and hashes related to each individual</span>
<span class="line-added"> 890 source file included in the JAR file.</span>
<span class="line-added"> 891 See Signature File.</span>
<span class="line-added"> 892 .RS</span>
<span class="line-added"> 893 .PP</span>
<span class="line-added"> 894 By default, this header is added, as an optimization.</span>
<span class="line-added"> 895 When the header is present, whenever the JAR file is verified, the</span>
<span class="line-added"> 896 verification can first check to see whether the hash in the header</span>
<span class="line-added"> 897 matches the hash of the whole manifest file.</span>
<span class="line-added"> 898 When there is a match, verification proceeds to the next step.</span>
<span class="line-added"> 899 When there is no match, it is necessary to do a less optimized</span>
<span class="line-added"> 900 verification that the hash in each source file information section in</span>
<span class="line-added"> 901 the \f[CB]\&amp;.SF\f[R] file equals the hash of its corresponding section in</span>
<span class="line-added"> 902 the manifest file.</span>
<span class="line-added"> 903 See \f[B]JAR File Verification\f[R].</span>
<span class="line-added"> 904 .PP</span>
<span class="line-added"> 905 The \f[CB]\-sectionsonly\f[R] option is primarily used for testing.</span>
<span class="line-added"> 906 It shouldn\[aq]t be used other than for testing because using it incurs</span>
<span class="line-added"> 907 higher overhead.</span>
<span class="line-added"> 908 .RE</span>
<span class="line-added"> 909 .TP</span>
<span class="line-added"> 910 .B \f[CB]\-protected\f[R]</span>
<span class="line-added"> 911 Values can be either \f[CB]true\f[R] or \f[CB]false\f[R].</span>
<span class="line-added"> 912 Specify \f[CB]true\f[R] when a password must be specified through a</span>
<span class="line-added"> 913 protected authentication path such as a dedicated PIN reader.</span>
<span class="line-added"> 914 .RS</span>
<span class="line-added"> 915 .RE</span>
<span class="line-added"> 916 .TP</span>
<span class="line-added"> 917 .B \f[CB]\-providerName\f[R] \f[I]providerName\f[R]</span>
<span class="line-added"> 918 If more than one provider was configured in the \f[CB]java.security\f[R]</span>
<span class="line-added"> 919 security properties file, then you can use the \f[CB]\-providerName\f[R]</span>
<span class="line-added"> 920 option to target a specific provider instance.</span>
<span class="line-added"> 921 The argument to this option is the name of the provider.</span>
<span class="line-added"> 922 .RS</span>
<span class="line-added"> 923 .PP</span>
<span class="line-added"> 924 For the Oracle PKCS #11 provider, \f[I]providerName\f[R] is of the form</span>
<span class="line-added"> 925 \f[CB]SunPKCS11\-\f[R]\f[I]TokenName\f[R], where \f[I]TokenName\f[R] is the</span>
<span class="line-added"> 926 name suffix that the provider instance has been configured with, as</span>
<span class="line-added"> 927 detailed in the configuration attributes table.</span>
<span class="line-added"> 928 For example, the following command lists the contents of the</span>
<span class="line-added"> 929 \f[CB]PKCS\ #11\f[R] keystore provider instance with name suffix</span>
<span class="line-added"> 930 \f[CB]SmartCard\f[R]:</span>
<span class="line-added"> 931 .RS</span>
<span class="line-added"> 932 .PP</span>
<span class="line-added"> 933 \f[CB]jarsigner\ \-keystore\ NONE\ \-storetype\ PKCS11\ \-providerName\ SunPKCS11\-SmartCard\ \-list\f[R]</span>
<span class="line-added"> 934 .RE</span>
<span class="line-added"> 935 .RE</span>
<span class="line-added"> 936 .TP</span>
<span class="line-added"> 937 .B \f[CB]\-addprovider\f[R] \f[I]name\f[R] [\f[CB]\-providerArg\f[R] \f[I]arg\f[R]]</span>
<span class="line-added"> 938 Adds a security provider by name (such as SunPKCS11) and an optional</span>
<span class="line-added"> 939 configure argument.</span>
<span class="line-added"> 940 The value of the security provider is the name of a security provider</span>
<span class="line-added"> 941 that is defined in a module.</span>
<span class="line-added"> 942 .RS</span>
<span class="line-added"> 943 .PP</span>
<span class="line-added"> 944 Used with the \f[CB]\-providerArg\ ConfigFilePath\f[R] option, the</span>
<span class="line-added"> 945 \f[CB]keytool\f[R] and \f[CB]jarsigner\f[R] tools install the provider</span>
<span class="line-added"> 946 dynamically and use \f[CB]ConfigFilePath\f[R] for the path to the token</span>
<span class="line-added"> 947 configuration file.</span>
<span class="line-added"> 948 The following example shows a command to list a \f[CB]PKCS\ #11\f[R]</span>
<span class="line-added"> 949 keystore when the Oracle PKCS #11 provider wasn\[aq]t configured in the</span>
<span class="line-added"> 950 security properties file.</span>
<span class="line-added"> 951 .RS</span>
<span class="line-added"> 952 .PP</span>
<span class="line-added"> 953 \f[CB]jarsigner\ \-keystore\ NONE\ \-storetype\ PKCS11\ \-addprovider\ SunPKCS11\ \-providerArg\ /mydir1/mydir2/token.config\f[R]</span>
<span class="line-added"> 954 .RE</span>
<span class="line-added"> 955 .RE</span>
<span class="line-added"> 956 .TP</span>
<span class="line-added"> 957 .B \f[CB]\-providerClass\f[R] \f[I]provider\-class\-name\f[R] [\f[CB]\-providerArg\f[R] \f[I]arg\f[R]]</span>
<span class="line-added"> 958 Used to specify the name of cryptographic service provider\[aq]s master</span>
<span class="line-added"> 959 class file when the service provider isn\[aq]t listed in the</span>
<span class="line-added"> 960 \f[CB]java.security\f[R] security properties file.</span>
<span class="line-added"> 961 Adds a security provider by fully\-qualified class name and an optional</span>
<span class="line-added"> 962 configure argument.</span>
<span class="line-added"> 963 .RS</span>
<span class="line-added"> 964 .PP</span>
<span class="line-added"> 965 \f[B]Note:\f[R]</span>
<span class="line-added"> 966 .PP</span>
<span class="line-added"> 967 The preferred way to load PKCS11 is by using modules.</span>
<span class="line-added"> 968 See \f[CB]\-addprovider\f[R].</span>
<span class="line-added"> 969 .RE</span>
<span class="line-added"> 970 .TP</span>
<span class="line-added"> 971 .B \f[CB]\-J\f[R]\f[I]javaoption\f[R]</span>
<span class="line-added"> 972 Passes through the specified \f[I]javaoption\f[R] string directly to the</span>
<span class="line-added"> 973 Java interpreter.</span>
<span class="line-added"> 974 The \f[CB]jarsigner\f[R] command is a wrapper around the interpreter.</span>
<span class="line-added"> 975 This option shouldn\[aq]t contain any spaces.</span>
<span class="line-added"> 976 It is useful for adjusting the execution environment or memory usage.</span>
<span class="line-added"> 977 For a list of possible interpreter options, type \f[CB]java\ \-h\f[R] or</span>
<span class="line-added"> 978 \f[CB]java\ \-X\f[R] at the command line.</span>
<span class="line-added"> 979 .RS</span>
<span class="line-added"> 980 .RE</span>
<span class="line-added"> 981 .TP</span>
<span class="line-added"> 982 .B \f[CB]\-strict\f[R]</span>
<span class="line-added"> 983 During the signing or verifying process, the command may issue warning</span>
<span class="line-added"> 984 messages.</span>
<span class="line-added"> 985 If you specify this option, the exit code of the tool reflects the</span>
<span class="line-added"> 986 severe warning messages that this command found.</span>
<span class="line-added"> 987 See \f[B]Errors and Warnings\f[R].</span>
<span class="line-added"> 988 .RS</span>
<span class="line-added"> 989 .RE</span>
<span class="line-added"> 990 .TP</span>
<span class="line-added"> 991 .B \f[CB]\-conf\f[R] \f[I]url\f[R]</span>
<span class="line-added"> 992 Specifies a pre\-configured options file.</span>
<span class="line-added"> 993 Read the \f[B]keytool documentation\f[R] for details.</span>
<span class="line-added"> 994 The property keys supported are &quot;jarsigner.all&quot; for all actions,</span>
<span class="line-added"> 995 &quot;jarsigner.sign&quot; for signing, and &quot;jarsigner.verify&quot; for verification.</span>
<span class="line-added"> 996 \f[CB]jarsigner\f[R] arguments including the JAR file name and alias</span>
<span class="line-added"> 997 name(s) cannot be set in this file.</span>
<span class="line-added"> 998 .RS</span>
<span class="line-added"> 999 .RE</span>
<span class="line-added">1000 .SH DEPRECATED OPTIONS</span>
<span class="line-added">1001 .PP</span>
<span class="line-added">1002 The following \f[CB]jarsigner\f[R] options are deprecated as of JDK 9 and</span>
<span class="line-added">1003 might be removed in a future JDK release.</span>
<span class="line-added">1004 .TP</span>
<span class="line-added">1005 .B \f[CB]\-altsigner\f[R] \f[I]class\f[R]</span>
<span class="line-added">1006 This option specifies an alternative signing mechanism.</span>
<span class="line-added">1007 The fully qualified class name identifies a class file that extends the</span>
<span class="line-added">1008 \f[CB]com.sun.jarsigner.ContentSigner\f[R] abstract class.</span>
<span class="line-added">1009 The path to this class file is defined by the \f[CB]\-altsignerpath\f[R]</span>
<span class="line-added">1010 option.</span>
<span class="line-added">1011 If the \f[CB]\-altsigner\f[R] option is used, then the \f[CB]jarsigner\f[R]</span>
<span class="line-added">1012 command uses the signing mechanism provided by the specified class.</span>
<span class="line-added">1013 Otherwise, the \f[CB]jarsigner\f[R] command uses its default signing</span>
<span class="line-added">1014 mechanism.</span>
<span class="line-added">1015 .RS</span>
<span class="line-added">1016 .PP</span>
<span class="line-added">1017 For example, to use the signing mechanism provided by a class named</span>
<span class="line-added">1018 \f[CB]com.sun.sun.jarsigner.AuthSigner\f[R], use the \f[CB]jarsigner\f[R]</span>
<span class="line-added">1019 option \f[CB]\-altsigner\ com.sun.jarsigner.AuthSigner\f[R].</span>
<span class="line-added">1020 .RE</span>
<span class="line-added">1021 .TP</span>
<span class="line-added">1022 .B \f[CB]\-altsignerpath\f[R] \f[I]classpathlist\f[R]</span>
<span class="line-added">1023 Specifies the path to the class file and any JAR file it depends on.</span>
<span class="line-added">1024 The class file name is specified with the \f[CB]\-altsigner\f[R] option.</span>
<span class="line-added">1025 If the class file is in a JAR file, then this option specifies the path</span>
<span class="line-added">1026 to that JAR file.</span>
<span class="line-added">1027 .RS</span>
<span class="line-added">1028 .PP</span>
<span class="line-added">1029 An absolute path or a path relative to the current directory can be</span>
<span class="line-added">1030 specified.</span>
<span class="line-added">1031 If \f[I]classpathlist\f[R] contains multiple paths or JAR files, then</span>
<span class="line-added">1032 they should be separated with a:</span>
<span class="line-added">1033 .IP \[bu] 2</span>
<span class="line-added">1034 Colon (\f[CB]:\f[R]) on Oracle Solaris, Linux, and macOS</span>
<span class="line-added">1035 .IP \[bu] 2</span>
<span class="line-added">1036 Semicolon (\f[CB];\f[R]) on Windows</span>
<span class="line-added">1037 .PP</span>
<span class="line-added">1038 This option isn\[aq]t necessary when the class is already in the search</span>
<span class="line-added">1039 path.</span>
<span class="line-added">1040 .PP</span>
<span class="line-added">1041 The following example shows how to specify the path to a JAR file that</span>
<span class="line-added">1042 contains the class file.</span>
<span class="line-added">1043 The JAR file name is included.</span>
<span class="line-added">1044 .RS</span>
<span class="line-added">1045 .PP</span>
<span class="line-added">1046 \f[CB]\-altsignerpath\ /home/user/lib/authsigner.jar\f[R]</span>
<span class="line-added">1047 .RE</span>
<span class="line-added">1048 .PP</span>
<span class="line-added">1049 The following example shows how to specify the path to the JAR file that</span>
<span class="line-added">1050 contains the class file.</span>
<span class="line-added">1051 The JAR file name is omitted.</span>
<span class="line-added">1052 .RS</span>
<span class="line-added">1053 .PP</span>
<span class="line-added">1054 \f[CB]\-altsignerpath\ /home/user/classes/com/sun/tools/jarsigner/\f[R]</span>
<span class="line-added">1055 .RE</span>
<span class="line-added">1056 .RE</span>
<span class="line-added">1057 .SH ERRORS AND WARNINGS</span>
<span class="line-added">1058 .PP</span>
<span class="line-added">1059 During the signing or verifying process, the \f[CB]jarsigner\f[R] command</span>
<span class="line-added">1060 may issue various errors or warnings.</span>
<span class="line-added">1061 .PP</span>
<span class="line-added">1062 If there is a failure, the \f[CB]jarsigner\f[R] command exits with code 1.</span>
<span class="line-added">1063 If there is no failure, but there are one or more severe warnings, the</span>
<span class="line-added">1064 \f[CB]jarsigner\f[R] command exits with code 0 when the \f[CB]\-strict\f[R]</span>
<span class="line-added">1065 option is \f[B]not\f[R] specified, or exits with the OR\-value of the</span>
<span class="line-added">1066 warning codes when the \f[CB]\-strict\f[R] is specified.</span>
<span class="line-added">1067 If there is only informational warnings or no warning at all, the</span>
<span class="line-added">1068 command always exits with code 0.</span>
<span class="line-added">1069 .PP</span>
<span class="line-added">1070 For example, if a certificate used to sign an entry is expired and has a</span>
<span class="line-added">1071 KeyUsage extension that doesn\[aq]t allow it to sign a file, the</span>
<span class="line-added">1072 \f[CB]jarsigner\f[R] command exits with code 12 (=4+8) when the</span>
<span class="line-added">1073 \f[CB]\-strict\f[R] option is specified.</span>
<span class="line-added">1074 .PP</span>
<span class="line-added">1075 \f[B]Note:\f[R] Exit codes are reused because only the values from 0 to</span>
<span class="line-added">1076 255 are legal on Oracle Solaris, Linux, and OS X.</span>
<span class="line-added">1077 .PP</span>
<span class="line-added">1078 The following sections describes the names, codes, and descriptions of</span>
<span class="line-added">1079 the errors and warnings that the \f[CB]jarsigner\f[R] command can issue.</span>
<span class="line-added">1080 .SH FAILURE</span>
<span class="line-added">1081 .PP</span>
<span class="line-added">1082 Reasons why the \f[CB]jarsigner\f[R] command fails include (but aren\[aq]t</span>
<span class="line-added">1083 limited to) a command line parsing error, the inability to find a</span>
<span class="line-added">1084 keypair to sign the JAR file, or the verification of a signed JAR fails.</span>
<span class="line-added">1085 .TP</span>
<span class="line-added">1086 .B failure</span>
<span class="line-added">1087 Code 1.</span>
<span class="line-added">1088 The signing or verifying fails.</span>
<span class="line-added">1089 .RS</span>
<span class="line-added">1090 .RE</span>
<span class="line-added">1091 .SH SEVERE WARNINGS</span>
<span class="line-added">1092 .PP</span>
<span class="line-added">1093 \f[B]Note:\f[R]</span>
<span class="line-added">1094 .PP</span>
<span class="line-added">1095 Severe warnings are reported as errors if you specify the</span>
<span class="line-added">1096 \f[CB]\-strict\f[R] option.</span>
<span class="line-added">1097 .PP</span>
<span class="line-added">1098 Reasons why the \f[CB]jarsigner\f[R] command issues a severe warning</span>
<span class="line-added">1099 include the certificate used to sign the JAR file has an error or the</span>
<span class="line-added">1100 signed JAR file has other problems.</span>
<span class="line-added">1101 .TP</span>
<span class="line-added">1102 .B hasExpiredCert</span>
<span class="line-added">1103 Code 4.</span>
<span class="line-added">1104 This JAR contains entries whose signer certificate has expired.</span>
<span class="line-added">1105 .RS</span>
<span class="line-added">1106 .RE</span>
<span class="line-added">1107 .TP</span>
<span class="line-added">1108 .B hasExpiredTsaCert</span>
<span class="line-added">1109 Code 4.</span>
<span class="line-added">1110 The timestamp has expired.</span>
<span class="line-added">1111 .RS</span>
<span class="line-added">1112 .RE</span>
<span class="line-added">1113 .TP</span>
<span class="line-added">1114 .B notYetValidCert</span>
<span class="line-added">1115 Code 4.</span>
<span class="line-added">1116 This JAR contains entries whose signer certificate isn\[aq]t yet valid.</span>
<span class="line-added">1117 .RS</span>
<span class="line-added">1118 .RE</span>
<span class="line-added">1119 .TP</span>
<span class="line-added">1120 .B chainNotValidated</span>
<span class="line-added">1121 Code 4.</span>
<span class="line-added">1122 This JAR contains entries whose certificate chain isn\[aq]t validated.</span>
<span class="line-added">1123 .RS</span>
<span class="line-added">1124 .RE</span>
<span class="line-added">1125 .TP</span>
<span class="line-added">1126 .B tsaChainNotValidated</span>
<span class="line-added">1127 Code 64.</span>
<span class="line-added">1128 The timestamp is invalid.</span>
<span class="line-added">1129 .RS</span>
<span class="line-added">1130 .RE</span>
<span class="line-added">1131 .TP</span>
<span class="line-added">1132 .B signerSelfSigned</span>
<span class="line-added">1133 Code 4.</span>
<span class="line-added">1134 This JAR contains entries whose signer certificate is self signed.</span>
<span class="line-added">1135 .RS</span>
<span class="line-added">1136 .RE</span>
<span class="line-added">1137 .TP</span>
<span class="line-added">1138 .B weakAlg</span>
<span class="line-added">1139 Code 4.</span>
<span class="line-added">1140 An algorithm specified on the command line is considered a security</span>
<span class="line-added">1141 risk.</span>
<span class="line-added">1142 .RS</span>
<span class="line-added">1143 .RE</span>
<span class="line-added">1144 .TP</span>
<span class="line-added">1145 .B badKeyUsage</span>
<span class="line-added">1146 Code 8.</span>
<span class="line-added">1147 This JAR contains entries whose signer certificate\[aq]s KeyUsage</span>
<span class="line-added">1148 extension doesn\[aq]t allow code signing.</span>
<span class="line-added">1149 .RS</span>
<span class="line-added">1150 .RE</span>
<span class="line-added">1151 .TP</span>
<span class="line-added">1152 .B badExtendedKeyUsage</span>
<span class="line-added">1153 Code 8.</span>
<span class="line-added">1154 This JAR contains entries whose signer certificate\[aq]s</span>
<span class="line-added">1155 ExtendedKeyUsage extension doesn\[aq]t allow code signing.</span>
<span class="line-added">1156 .RS</span>
<span class="line-added">1157 .RE</span>
<span class="line-added">1158 .TP</span>
<span class="line-added">1159 .B badNetscapeCertType</span>
<span class="line-added">1160 Code 8.</span>
<span class="line-added">1161 This JAR contains entries whose signer certificate\[aq]s</span>
<span class="line-added">1162 NetscapeCertType extension doesn\[aq]t allow code signing.</span>
<span class="line-added">1163 .RS</span>
<span class="line-added">1164 .RE</span>
<span class="line-added">1165 .TP</span>
<span class="line-added">1166 .B hasUnsignedEntry</span>
<span class="line-added">1167 Code 16.</span>
<span class="line-added">1168 This JAR contains unsigned entries which haven\[aq]t been</span>
<span class="line-added">1169 integrity\-checked.</span>
<span class="line-added">1170 .RS</span>
<span class="line-added">1171 .RE</span>
<span class="line-added">1172 .TP</span>
<span class="line-added">1173 .B notSignedByAlias</span>
<span class="line-added">1174 Code 32.</span>
<span class="line-added">1175 This JAR contains signed entries which aren\[aq]t signed by the</span>
<span class="line-added">1176 specified alias(es).</span>
<span class="line-added">1177 .RS</span>
<span class="line-added">1178 .RE</span>
<span class="line-added">1179 .TP</span>
<span class="line-added">1180 .B aliasNotInStore</span>
<span class="line-added">1181 Code 32.</span>
<span class="line-added">1182 This JAR contains signed entries that aren\[aq]t signed by alias in this</span>
<span class="line-added">1183 keystore.</span>
<span class="line-added">1184 .RS</span>
<span class="line-added">1185 .RE</span>
1186 .TP
<a name="21" id="anc21"></a><span class="line-modified">1187 .B tsaChainNotValidated</span>
<span class="line-modified">1188 Code 64.</span>
<span class="line-modified">1189 This JAR contains entries whose TSA certificate chain is invalid.</span>
<span class="line-added">1190 .RS</span>
<span class="line-added">1191 .RE</span>
<span class="line-added">1192 .SH INFORMATIONAL WARNINGS</span>
<span class="line-added">1193 .PP</span>
<span class="line-added">1194 Informational warnings include those that aren\[aq]t errors but regarded</span>
<span class="line-added">1195 as bad practice.</span>
<span class="line-added">1196 They don\[aq]t have a code.</span>
1197 .TP
<a name="22" id="anc22"></a><span class="line-modified">1198 .B hasExpiringCert</span>
<span class="line-modified">1199 This JAR contains entries whose signer certificate expires within six</span>
<span class="line-modified">1200 months.</span>
<span class="line-added">1201 .RS</span>
<span class="line-added">1202 .RE</span>
<span class="line-added">1203 .TP</span>
<span class="line-added">1204 .B hasExpiringTsaCert</span>
<span class="line-added">1205 The timestamp will expire within one year on \f[CB]YYYY\-MM\-DD\f[R].</span>
<span class="line-added">1206 .RS</span>
<span class="line-added">1207 .RE</span>
<span class="line-added">1208 .TP</span>
<span class="line-added">1209 .B noTimestamp</span>
<span class="line-added">1210 This JAR contains signatures that doesn\[aq]t include a timestamp.</span>
<span class="line-added">1211 Without a timestamp, users may not be able to validate this JAR file</span>
<span class="line-added">1212 after the signer certificate\[aq]s expiration date</span>
<span class="line-added">1213 (\f[CB]YYYY\-MM\-DD\f[R]) or after any future revocation date.</span>
<span class="line-added">1214 .RS</span>
<span class="line-added">1215 .RE</span>
<span class="line-added">1216 .SH EXAMPLE OF SIGNING A JAR FILE</span>
<span class="line-added">1217 .PP</span>
<span class="line-added">1218 Use the following command to sign \f[CB]bundle.jar\f[R] with the private</span>
<span class="line-added">1219 key of a user whose keystore alias is \f[CB]jane\f[R] in a keystore named</span>
<span class="line-added">1220 \f[CB]mystore\f[R] in the \f[CB]working\f[R] directory and name the signed</span>
<span class="line-added">1221 JAR file \f[CB]sbundle.jar\f[R]:</span>
<span class="line-added">1222 .RS</span>
<span class="line-added">1223 .PP</span>
<span class="line-added">1224 \f[CB]jarsigner\ \-keystore\ /working/mystore\ \-storepass\f[R]</span>
<span class="line-added">1225 \f[I]keystore_password\f[R] \f[CB]\-keypass\f[R]</span>
<span class="line-added">1226 \f[I]private_key_password\f[R]</span>
<span class="line-added">1227 \f[CB]\-signedjar\ sbundle.jar\ bundle.jar\ jane\f[R]</span>
<span class="line-added">1228 .RE</span>
<span class="line-added">1229 .PP</span>
<span class="line-added">1230 There is no \f[CB]\-sigfile\f[R] specified in the previous command so the</span>
<span class="line-added">1231 generated \f[CB]\&amp;.SF\f[R] and \f[CB]\&amp;.DSA\f[R] files to be placed in the</span>
<span class="line-added">1232 signed JAR file have default names based on the alias name.</span>
<span class="line-added">1233 They are named \f[CB]JANE.SF\f[R] and \f[CB]JANE.DSA\f[R].</span>
<span class="line-added">1234 .PP</span>
<span class="line-added">1235 If you want to be prompted for the store password and the private key</span>
<span class="line-added">1236 password, then you could shorten the previous command to the following:</span>
<span class="line-added">1237 .RS</span>
<span class="line-added">1238 .PP</span>
<span class="line-added">1239 \f[CB]jarsigner\ \-keystore\ /working/mystore\ \-signedjar\ sbundle.jar\ bundle.jar\ jane\f[R]</span>
<span class="line-added">1240 .RE</span>
<span class="line-added">1241 .PP</span>
<span class="line-added">1242 If the \f[CB]keystore\f[R] is the default \f[CB]keystore\f[R]</span>
<span class="line-added">1243 (\f[CB]\&amp;.keystore\f[R] in your home directory), then you don\[aq]t need</span>
<span class="line-added">1244 to specify a \f[CB]keystore\f[R], as follows:</span>
<span class="line-added">1245 .RS</span>
<span class="line-added">1246 .PP</span>
<span class="line-added">1247 \f[CB]jarsigner\ \-signedjar\ sbundle.jar\ bundle.jar\ jane\f[R]</span>
<span class="line-added">1248 .RE</span>
<span class="line-added">1249 .PP</span>
<span class="line-added">1250 If you want the signed JAR file to overwrite the input JAR file</span>
<span class="line-added">1251 (\f[CB]bundle.jar\f[R]), then you don\[aq]t need to specify a</span>
<span class="line-added">1252 \f[CB]\-signedjar\f[R] option, as follows:</span>
<span class="line-added">1253 .RS</span>
<span class="line-added">1254 .PP</span>
<span class="line-added">1255 \f[CB]jarsigner\ bundle.jar\ jane\f[R]</span>
<span class="line-added">1256 .RE</span>
<span class="line-added">1257 .SH EXAMPLE OF VERIFYING A SIGNED JAR FILE</span>
<span class="line-added">1258 .PP</span>
<span class="line-added">1259 To verify a signed JAR file to ensure that the signature is valid and</span>
<span class="line-added">1260 the JAR file wasn\[aq]t been tampered with, use a command such as the</span>
<span class="line-added">1261 following:</span>
<span class="line-added">1262 .RS</span>
<span class="line-added">1263 .PP</span>
<span class="line-added">1264 \f[CB]jarsigner\ \-verify\ ButtonDemo.jar\f[R]</span>
<span class="line-added">1265 .RE</span>
<span class="line-added">1266 .PP</span>
<span class="line-added">1267 When the verification is successful, \f[CB]jar\ verified\f[R] is</span>
<span class="line-added">1268 displayed.</span>
<span class="line-added">1269 Otherwise, an error message is displayed.</span>
<span class="line-added">1270 You can get more information when you use the \f[CB]\-verbose\f[R] option.</span>
<span class="line-added">1271 A sample use of \f[CB]jarsigner\f[R] with the \f[CB]\-verbose\f[R] option</span>
<span class="line-added">1272 follows:</span>
<span class="line-added">1273 .IP</span>
<span class="line-added">1274 .nf</span>
<span class="line-added">1275 \f[CB]</span>
<span class="line-added">1276 jarsigner\ \-verify\ \-verbose\ ButtonDemo.jar</span>
1277 
<a name="23" id="anc23"></a><span class="line-modified">1278 s\ \ \ \ \ \ \ 866\ Tue\ Sep\ 12\ 20:08:48\ EDT\ 2017\ META\-INF/MANIFEST.MF</span>
<span class="line-modified">1279 \ \ \ \ \ \ \ \ 825\ Tue\ Sep\ 12\ 20:08:48\ EDT\ 2017\ META\-INF/ORACLE_C.SF</span>
<span class="line-modified">1280 \ \ \ \ \ \ \ 7475\ Tue\ Sep\ 12\ 20:08:48\ EDT\ 2017\ META\-INF/ORACLE_C.RSA</span>
<span class="line-modified">1281 \ \ \ \ \ \ \ \ \ \ 0\ Tue\ Sep\ 12\ 20:07:54\ EDT\ 2017\ META\-INF/</span>
<span class="line-modified">1282 \ \ \ \ \ \ \ \ \ \ 0\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/</span>
<span class="line-modified">1283 \ \ \ \ \ \ \ \ \ \ 0\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/</span>
<span class="line-modified">1284 sm\ \ \ \ \ \ 523\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/ButtonDemo$1.class</span>
<span class="line-modified">1285 sm\ \ \ \ \ 3440\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/ButtonDemo.class</span>
<span class="line-modified">1286 sm\ \ \ \ \ 2346\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/ButtonDemo.jnlp</span>
<span class="line-modified">1287 sm\ \ \ \ \ \ 172\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/left.gif</span>
<span class="line-modified">1288 sm\ \ \ \ \ \ 235\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/middle.gif</span>
<span class="line-modified">1289 sm\ \ \ \ \ \ 172\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/right.gif</span>






1290 
<a name="24" id="anc24"></a><span class="line-modified">1291 \ \ s\ =\ signature\ was\ verified</span>
<span class="line-modified">1292 \ \ m\ =\ entry\ is\ listed\ in\ manifest</span>
<span class="line-modified">1293 \ \ k\ =\ at\ least\ one\ certificate\ was\ found\ in\ keystore</span>

1294 
<a name="25" id="anc25"></a><span class="line-modified">1295 \-\ Signed\ by\ &quot;CN=&quot;Oracle\ America,\ Inc.&quot;,\ OU=Software\ Engineering,\ O=&quot;Oracle\ America,\ Inc.&quot;,\ L=Redwood\ City,\ ST=California,\ C=US&quot;</span>
<span class="line-modified">1296 \ \ \ \ Digest\ algorithm:\ SHA\-256</span>
<span class="line-modified">1297 \ \ \ \ Signature\ algorithm:\ SHA256withRSA,\ 2048\-bit\ key</span>
<span class="line-modified">1298 \ \ Timestamped\ by\ &quot;CN=Symantec\ Time\ Stamping\ Services\ Signer\ \-\ G4,\ O=Symantec\ Corporation,\ C=US&quot;\ on\ Tue\ Sep\ 12\ 20:08:49\ UTC\ 2017</span>
<span class="line-modified">1299 \ \ \ \ Timestamp\ digest\ algorithm:\ SHA\-1</span>
<span class="line-modified">1300 \ \ \ \ Timestamp\ signature\ algorithm:\ SHA1withRSA,\ 2048\-bit\ key</span>









1301 
<a name="26" id="anc26"></a><span class="line-modified">1302 jar\ verified.</span>







1303 
<a name="27" id="anc27"></a><span class="line-modified">1304 The\ signer\ certificate\ expired\ on\ 2018\-02\-01.\ However,\ the\ JAR\ will\ be\ valid\ until\ the\ timestamp\ expires\ on\ 2020\-12\-29.</span>
<span class="line-modified">1305 \f[R]</span>
<span class="line-modified">1306 .fi</span>
<span class="line-modified">1307 .SH EXAMPLE OF VERIFICATION WITH CERTIFICATE INFORMATION</span>
<span class="line-modified">1308 .PP</span>
<span class="line-added">1309 If you specify the \f[CB]\-certs\f[R] option with the \f[CB]\-verify\f[R]</span>
<span class="line-added">1310 and \f[CB]\-verbose\f[R] options, then the output includes certificate</span>
<span class="line-added">1311 information for each signer of the JAR file.</span>
<span class="line-added">1312 The information includes the certificate type, the signer distinguished</span>
<span class="line-added">1313 name information (when it is an X.509 certificate), and in parentheses,</span>
<span class="line-added">1314 the keystore alias for the signer when the public key certificate in the</span>
<span class="line-added">1315 JAR file matches the one in a keystore entry, for example:</span>
<span class="line-added">1316 .IP</span>
<span class="line-added">1317 .nf</span>
<span class="line-added">1318 \f[CB]</span>
<span class="line-added">1319 jarsigner\ \-keystore\ $JAVA_HOME/lib/security/cacerts\ \-verify\ \-verbose\ \-certs\ ButtonDemo.jar</span>
1320 
<a name="28" id="anc28"></a><span class="line-modified">1321 s\ k\ \ \ \ \ 866\ Tue\ Sep\ 12\ 20:08:48\ EDT\ 2017\ META\-INF/MANIFEST.MF</span>




1322 
<a name="29" id="anc29"></a><span class="line-modified">1323 \ \ \ \ \ \ &gt;&gt;&gt;\ Signer</span>
<span class="line-modified">1324 \ \ \ \ \ \ X.509,\ CN=&quot;Oracle\ America,\ Inc.&quot;,\ OU=Software\ Engineering,\ O=&quot;Oracle\ America,\ Inc.&quot;,\ L=Redwood\ City,\ ST=California,\ C=US</span>
<span class="line-modified">1325 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2017\-01\-30,\ 7:00\ PM\ to\ 2018\-02\-01,\ 6:59\ PM]</span>
<span class="line-modified">1326 \ \ \ \ \ \ X.509,\ CN=Symantec\ Class\ 3\ SHA256\ Code\ Signing\ CA,\ OU=Symantec\ Trust\ Network,\ O=Symantec\ Corporation,\ C=US</span>
<span class="line-modified">1327 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2013\-12\-09,\ 7:00\ PM\ to\ 2023\-12\-09,\ 6:59\ PM]</span>
<span class="line-added">1328 \ \ \ \ \ \ X.509,\ CN=VeriSign\ Class\ 3\ Public\ Primary\ Certification\ Authority\ \-\ G5,\ OU=&quot;(c)\ 2006\ VeriSign,\ Inc.\ \-\ For\ authorized\ use\ only&quot;,\ OU=VeriSign\ Trust\ Network,\ O=&quot;VeriSign,\ Inc.&quot;,\ C=US\ (verisignclass3g5ca\ [jdk])</span>
<span class="line-added">1329 \ \ \ \ \ \ [trusted\ certificate]</span>
<span class="line-added">1330 \ \ \ \ \ \ &gt;&gt;&gt;\ TSA</span>
<span class="line-added">1331 \ \ \ \ \ \ X.509,\ CN=Symantec\ Time\ Stamping\ Services\ Signer\ \-\ G4,\ O=Symantec\ Corporation,\ C=US</span>
<span class="line-added">1332 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2012\-10\-17,\ 8:00\ PM\ to\ 2020\-12\-29,\ 6:59\ PM]</span>
<span class="line-added">1333 \ \ \ \ \ \ X.509,\ CN=Symantec\ Time\ Stamping\ Services\ CA\ \-\ G2,\ O=Symantec\ Corporation,\ C=US</span>
<span class="line-added">1334 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2012\-12\-20,\ 7:00\ PM\ to\ 2020\-12\-30,\ 6:59\ PM]</span>
1335 
<a name="30" id="anc30"></a><span class="line-modified">1336 \ \ \ \ \ \ \ \ 825\ Tue\ Sep\ 12\ 20:08:48\ EDT\ 2017\ META\-INF/ORACLE_C.SF</span>
<span class="line-modified">1337 \ \ \ \ \ \ \ 7475\ Tue\ Sep\ 12\ 20:08:48\ EDT\ 2017\ META\-INF/ORACLE_C.RSA</span>
<span class="line-modified">1338 \ \ \ \ \ \ \ \ \ \ 0\ Tue\ Sep\ 12\ 20:07:54\ EDT\ 2017\ META\-INF/</span>
<span class="line-modified">1339 \ \ \ \ \ \ \ \ \ \ 0\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/</span>
<span class="line-modified">1340 \ \ \ \ \ \ \ \ \ \ 0\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/</span>
<span class="line-added">1341 smk\ \ \ \ \ 523\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/ButtonDemo$1.class</span>
1342 
<a name="31" id="anc31"></a><span class="line-modified">1343 \ \ \ \ \ \ [entry\ was\ signed\ on\ 2017\-09\-12,\ 4:08\ PM]</span>
<span class="line-added">1344 \ \ \ \ \ \ &gt;&gt;&gt;\ Signer</span>
<span class="line-added">1345 \ \ \ \ \ \ X.509,\ CN=&quot;Oracle\ America,\ Inc.&quot;,\ OU=Software\ Engineering,\ O=&quot;Oracle\ America,\ Inc.&quot;,\ L=Redwood\ City,\ ST=California,\ C=US</span>
<span class="line-added">1346 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2017\-01\-30,\ 7:00\ PM\ to\ 2018\-02\-01,\ 6:59\ PM]</span>
<span class="line-added">1347 \ \ \ \ \ \ X.509,\ CN=Symantec\ Class\ 3\ SHA256\ Code\ Signing\ CA,\ OU=Symantec\ Trust\ Network,\ O=Symantec\ Corporation,\ C=US</span>
<span class="line-added">1348 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2013\-12\-09,\ 7:00\ PM\ to\ 2023\-12\-09,\ 6:59\ PM]</span>
<span class="line-added">1349 \ \ \ \ \ \ X.509,\ CN=VeriSign\ Class\ 3\ Public\ Primary\ Certification\ Authority\ \-\ G5,\ OU=&quot;(c)\ 2006\ VeriSign,\ Inc.\ \-\ For\ authorized\ use\ only&quot;,\ OU=VeriSign\ Trust\ Network,\ O=&quot;VeriSign,\ Inc.&quot;,\ C=US\ (verisignclass3g5ca\ [jdk])</span>
<span class="line-added">1350 \ \ \ \ \ \ [trusted\ certificate]</span>
<span class="line-added">1351 \ \ \ \ \ \ &gt;&gt;&gt;\ TSA</span>
<span class="line-added">1352 \ \ \ \ \ \ X.509,\ CN=Symantec\ Time\ Stamping\ Services\ Signer\ \-\ G4,\ O=Symantec\ Corporation,\ C=US</span>
<span class="line-added">1353 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2012\-10\-17,\ 8:00\ PM\ to\ 2020\-12\-29,\ 6:59\ PM]</span>
<span class="line-added">1354 \ \ \ \ \ \ X.509,\ CN=Symantec\ Time\ Stamping\ Services\ CA\ \-\ G2,\ O=Symantec\ Corporation,\ C=US</span>
<span class="line-added">1355 \ \ \ \ \ \ [certificate\ is\ valid\ from\ 2012\-12\-20,\ 7:00\ PM\ to\ 2020\-12\-30,\ 6:59\ PM]</span>
1356 
<a name="32" id="anc32"></a><span class="line-modified">1357 smk\ \ \ \ 3440\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/ButtonDemo.class</span>
<span class="line-modified">1358 \&amp;...</span>
<span class="line-modified">1359 smk\ \ \ \ 2346\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/ButtonDemo.jnlp</span>
<span class="line-modified">1360 \&amp;...</span>
<span class="line-modified">1361 smk\ \ \ \ \ 172\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/left.gif</span>
<span class="line-modified">1362 \&amp;...</span>
<span class="line-modified">1363 smk\ \ \ \ \ 235\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/middle.gif</span>
<span class="line-modified">1364 \&amp;...</span>
<span class="line-modified">1365 smk\ \ \ \ \ 172\ Tue\ Sep\ 12\ 20:07:16\ EDT\ 2017\ components/images/right.gif</span>
<span class="line-added">1366 \&amp;...</span>
1367 
<a name="33" id="anc33"></a><span class="line-added">1368 \ \ s\ =\ signature\ was\ verified</span>
<span class="line-added">1369 \ \ m\ =\ entry\ is\ listed\ in\ manifest</span>
<span class="line-added">1370 \ \ k\ =\ at\ least\ one\ certificate\ was\ found\ in\ keystore</span>
1371 
<a name="34" id="anc34"></a><span class="line-modified">1372 \-\ Signed\ by\ &quot;CN=&quot;Oracle\ America,\ Inc.&quot;,\ OU=Software\ Engineering,\ O=&quot;Oracle\ America,\ Inc.&quot;,\ L=Redwood\ City,\ ST=California,\ C=US&quot;</span>
<span class="line-modified">1373 \ \ \ \ Digest\ algorithm:\ SHA\-256</span>
<span class="line-modified">1374 \ \ \ \ Signature\ algorithm:\ SHA256withRSA,\ 2048\-bit\ key</span>
<span class="line-modified">1375 \ \ Timestamped\ by\ &quot;CN=Symantec\ Time\ Stamping\ Services\ Signer\ \-\ G4,\ O=Symantec\ Corporation,\ C=US&quot;\ on\ Tue\ Sep\ 12\ 20:08:49\ UTC\ 2017</span>
<span class="line-modified">1376 \ \ \ \ Timestamp\ digest\ algorithm:\ SHA\-1</span>
<span class="line-modified">1377 \ \ \ \ Timestamp\ signature\ algorithm:\ SHA1withRSA,\ 2048\-bit\ key</span>



1378 
<a name="35" id="anc35"></a><span class="line-modified">1379 jar\ verified.</span>
<span class="line-modified">1380 </span>
<span class="line-modified">1381 The\ signer\ certificate\ expired\ on\ 2018\-02\-01.\ However,\ the\ JAR\ will\ be\ valid\ until\ the\ timestamp\ expires\ on\ 2020\-12\-29.</span>
<span class="line-modified">1382 \f[R]</span>
<span class="line-modified">1383 .fi</span>
<span class="line-modified">1384 .PP</span>
<span class="line-modified">1385 If the certificate for a signer isn\[aq]t an X.509 certificate, then</span>
<span class="line-modified">1386 there is no distinguished name information.</span>
<span class="line-modified">1387 In that case, just the certificate type and the alias are shown.</span>
<span class="line-modified">1388 For example, if the certificate is a PGP certificate, and the alias is</span>
<span class="line-modified">1389 \f[CB]bob\f[R], then you would get: \f[CB]PGP,\ (bob)\f[R].</span>







































































































































































































































<a name="36" id="anc36"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="36" type="hidden" />
</body>
</html>