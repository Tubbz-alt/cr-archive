<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.httpserver/share/classes/com/sun/net/httpserver/HttpExchange.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BasicAuthenticator.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HttpServer.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.httpserver/share/classes/com/sun/net/httpserver/HttpExchange.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 26 package com.sun.net.httpserver;
 27 
 28 import java.io.*;
 29 import java.nio.*;
 30 import java.nio.channels.*;
 31 import java.net.*;
 32 import javax.net.ssl.*;
 33 import java.util.*;
 34 
 35 /**
 36  * This class encapsulates a HTTP request received and a
 37  * response to be generated in one exchange. It provides methods
 38  * for examining the request from the client, and for building and
 39  * sending the response.
 40  * &lt;p&gt;
 41  * The typical life-cycle of a HttpExchange is shown in the sequence
 42  * below.
 43  * &lt;ol&gt;&lt;li&gt;{@link #getRequestMethod()} to determine the command
 44  * &lt;li&gt;{@link #getRequestHeaders()} to examine the request headers (if needed)
 45  * &lt;li&gt;{@link #getRequestBody()} returns a {@link java.io.InputStream} for reading the request body.
<span class="line-modified"> 46  *     After reading the request body, the stream is close.</span>
 47  * &lt;li&gt;{@link #getResponseHeaders()} to set any response headers, except content-length
 48  * &lt;li&gt;{@link #sendResponseHeaders(int,long)} to send the response headers. Must be called before
 49  * next step.
 50  * &lt;li&gt;{@link #getResponseBody()} to get a {@link java.io.OutputStream} to send the response body.
 51  *      When the response body has been written, the stream must be closed to terminate the exchange.
 52  * &lt;/ol&gt;
 53  * &lt;b&gt;Terminating exchanges&lt;/b&gt;
 54  * &lt;br&gt;
 55  * Exchanges are terminated when both the request InputStream and response OutputStream are closed.
 56  * Closing the OutputStream, implicitly closes the InputStream (if it is not already closed).
 57  * However, it is recommended
 58  * to consume all the data from the InputStream before closing it.
 59  * The convenience method {@link #close()} does all of these tasks.
 60  * Closing an exchange without consuming all of the request body is not an error
 61  * but may make the underlying TCP connection unusable for following exchanges.
 62  * The effect of failing to terminate an exchange is undefined, but will typically
 63  * result in resources failing to be freed/reused.
 64  * @since 1.6
 65  */
 66 
<span class="line-modified"> 67 public abstract class HttpExchange {</span>
 68 
 69     protected HttpExchange () {
 70     }
 71 
 72     /**
 73      * Returns an immutable Map containing the HTTP headers that were
 74      * included with this request. The keys in this Map will be the header
 75      * names, while the values will be a List of Strings containing each value
 76      * that was included (either for a header that was listed several times,
 77      * or one that accepts a comma-delimited list of values on a single line).
 78      * In either of these cases, the values for the header name will be
 79      * presented in the order that they were included in the request.
 80      * &lt;p&gt;
 81      * The keys in Map are case-insensitive.
 82      * @return a read-only Map which can be used to access request headers
 83      */
 84     public abstract Headers getRequestHeaders () ;
 85 
 86     /**
 87      * Returns a mutable Map into which the HTTP response headers can be stored
</pre>
</td>
<td>
<hr />
<pre>
 26 package com.sun.net.httpserver;
 27 
 28 import java.io.*;
 29 import java.nio.*;
 30 import java.nio.channels.*;
 31 import java.net.*;
 32 import javax.net.ssl.*;
 33 import java.util.*;
 34 
 35 /**
 36  * This class encapsulates a HTTP request received and a
 37  * response to be generated in one exchange. It provides methods
 38  * for examining the request from the client, and for building and
 39  * sending the response.
 40  * &lt;p&gt;
 41  * The typical life-cycle of a HttpExchange is shown in the sequence
 42  * below.
 43  * &lt;ol&gt;&lt;li&gt;{@link #getRequestMethod()} to determine the command
 44  * &lt;li&gt;{@link #getRequestHeaders()} to examine the request headers (if needed)
 45  * &lt;li&gt;{@link #getRequestBody()} returns a {@link java.io.InputStream} for reading the request body.
<span class="line-modified"> 46  *     After reading the request body, the stream should be closed.</span>
 47  * &lt;li&gt;{@link #getResponseHeaders()} to set any response headers, except content-length
 48  * &lt;li&gt;{@link #sendResponseHeaders(int,long)} to send the response headers. Must be called before
 49  * next step.
 50  * &lt;li&gt;{@link #getResponseBody()} to get a {@link java.io.OutputStream} to send the response body.
 51  *      When the response body has been written, the stream must be closed to terminate the exchange.
 52  * &lt;/ol&gt;
 53  * &lt;b&gt;Terminating exchanges&lt;/b&gt;
 54  * &lt;br&gt;
 55  * Exchanges are terminated when both the request InputStream and response OutputStream are closed.
 56  * Closing the OutputStream, implicitly closes the InputStream (if it is not already closed).
 57  * However, it is recommended
 58  * to consume all the data from the InputStream before closing it.
 59  * The convenience method {@link #close()} does all of these tasks.
 60  * Closing an exchange without consuming all of the request body is not an error
 61  * but may make the underlying TCP connection unusable for following exchanges.
 62  * The effect of failing to terminate an exchange is undefined, but will typically
 63  * result in resources failing to be freed/reused.
 64  * @since 1.6
 65  */
 66 
<span class="line-modified"> 67 public abstract class HttpExchange implements AutoCloseable {</span>
 68 
 69     protected HttpExchange () {
 70     }
 71 
 72     /**
 73      * Returns an immutable Map containing the HTTP headers that were
 74      * included with this request. The keys in this Map will be the header
 75      * names, while the values will be a List of Strings containing each value
 76      * that was included (either for a header that was listed several times,
 77      * or one that accepts a comma-delimited list of values on a single line).
 78      * In either of these cases, the values for the header name will be
 79      * presented in the order that they were included in the request.
 80      * &lt;p&gt;
 81      * The keys in Map are case-insensitive.
 82      * @return a read-only Map which can be used to access request headers
 83      */
 84     public abstract Headers getRequestHeaders () ;
 85 
 86     /**
 87      * Returns a mutable Map into which the HTTP response headers can be stored
</pre>
</td>
</tr>
</table>
<center><a href="BasicAuthenticator.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HttpServer.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>