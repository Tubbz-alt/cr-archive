<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.rmi/share/classes/sun/rmi/transport/DGCImpl_Skel.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../server/UnicastServerRef.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="DGCImpl_Stub.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.rmi/share/classes/sun/rmi/transport/DGCImpl_Skel.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package sun.rmi.transport;
 27 


 28 /**
 29  * Skeleton to dispatch DGC methods.
 30  * Originally generated by RMIC but frozen to match the stubs.
 31  */
 32 @SuppressWarnings({&quot;deprecation&quot;, &quot;serial&quot;})
 33 public final class DGCImpl_Skel
 34         implements java.rmi.server.Skeleton {
 35     private static final java.rmi.server.Operation[] operations = {
 36             new java.rmi.server.Operation(&quot;void clean(java.rmi.server.ObjID[], long, java.rmi.dgc.VMID, boolean)&quot;),
 37             new java.rmi.server.Operation(&quot;java.rmi.dgc.Lease dirty(java.rmi.server.ObjID[], long, java.rmi.dgc.Lease)&quot;)
 38     };
 39 
 40     private static final long interfaceHash = -669196253586618813L;
 41 
 42     public java.rmi.server.Operation[] getOperations() {
 43         return operations.clone();
 44     }
 45 
<span class="line-modified"> 46     public void dispatch(java.rmi.Remote obj, java.rmi.server.RemoteCall call, int opnum, long hash)</span>
 47             throws java.lang.Exception {
 48         if (hash != interfaceHash)
 49             throw new java.rmi.server.SkeletonMismatchException(&quot;interface hash mismatch&quot;);
 50 
 51         sun.rmi.transport.DGCImpl server = (sun.rmi.transport.DGCImpl) obj;

 52         switch (opnum) {
 53             case 0: // clean(ObjID[], long, VMID, boolean)
 54             {
 55                 java.rmi.server.ObjID[] $param_arrayOf_ObjID_1;
 56                 long $param_long_2;
 57                 java.rmi.dgc.VMID $param_VMID_3;
 58                 boolean $param_boolean_4;
 59                 try {
 60                     java.io.ObjectInput in = call.getInputStream();
 61                     $param_arrayOf_ObjID_1 = (java.rmi.server.ObjID[]) in.readObject();
 62                     $param_long_2 = in.readLong();
 63                     $param_VMID_3 = (java.rmi.dgc.VMID) in.readObject();
 64                     $param_boolean_4 = in.readBoolean();
<span class="line-modified"> 65                 } catch (java.io.IOException e) {</span>
<span class="line-modified"> 66                     throw new java.rmi.UnmarshalException(&quot;error unmarshalling arguments&quot;, e);</span>
<span class="line-removed"> 67                 } catch (java.lang.ClassNotFoundException e) {</span>
 68                     throw new java.rmi.UnmarshalException(&quot;error unmarshalling arguments&quot;, e);
 69                 } finally {
 70                     call.releaseInputStream();
 71                 }
 72                 server.clean($param_arrayOf_ObjID_1, $param_long_2, $param_VMID_3, $param_boolean_4);
 73                 try {
 74                     call.getResultStream(true);
 75                 } catch (java.io.IOException e) {
 76                     throw new java.rmi.MarshalException(&quot;error marshalling return&quot;, e);
 77                 }
 78                 break;
 79             }
 80 
 81             case 1: // dirty(ObjID[], long, Lease)
 82             {
 83                 java.rmi.server.ObjID[] $param_arrayOf_ObjID_1;
 84                 long $param_long_2;
 85                 java.rmi.dgc.Lease $param_Lease_3;
 86                 try {
 87                     java.io.ObjectInput in = call.getInputStream();
 88                     $param_arrayOf_ObjID_1 = (java.rmi.server.ObjID[]) in.readObject();
 89                     $param_long_2 = in.readLong();
 90                     $param_Lease_3 = (java.rmi.dgc.Lease) in.readObject();
<span class="line-modified"> 91                 } catch (java.io.IOException e) {</span>
<span class="line-modified"> 92                     throw new java.rmi.UnmarshalException(&quot;error unmarshalling arguments&quot;, e);</span>
<span class="line-removed"> 93                 } catch (java.lang.ClassNotFoundException e) {</span>
 94                     throw new java.rmi.UnmarshalException(&quot;error unmarshalling arguments&quot;, e);
 95                 } finally {
 96                     call.releaseInputStream();
 97                 }
 98                 java.rmi.dgc.Lease $result = server.dirty($param_arrayOf_ObjID_1, $param_long_2, $param_Lease_3);
 99                 try {
100                     java.io.ObjectOutput out = call.getResultStream(true);
101                     out.writeObject($result);
102                 } catch (java.io.IOException e) {
103                     throw new java.rmi.MarshalException(&quot;error marshalling return&quot;, e);
104                 }
105                 break;
106             }
107 
108             default:
109                 throw new java.rmi.UnmarshalException(&quot;invalid method number&quot;);
110         }
111     }
112 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package sun.rmi.transport;
 27 
<span class="line-added"> 28 import java.io.IOException;</span>
<span class="line-added"> 29 </span>
 30 /**
 31  * Skeleton to dispatch DGC methods.
 32  * Originally generated by RMIC but frozen to match the stubs.
 33  */
 34 @SuppressWarnings({&quot;deprecation&quot;, &quot;serial&quot;})
 35 public final class DGCImpl_Skel
 36         implements java.rmi.server.Skeleton {
 37     private static final java.rmi.server.Operation[] operations = {
 38             new java.rmi.server.Operation(&quot;void clean(java.rmi.server.ObjID[], long, java.rmi.dgc.VMID, boolean)&quot;),
 39             new java.rmi.server.Operation(&quot;java.rmi.dgc.Lease dirty(java.rmi.server.ObjID[], long, java.rmi.dgc.Lease)&quot;)
 40     };
 41 
 42     private static final long interfaceHash = -669196253586618813L;
 43 
 44     public java.rmi.server.Operation[] getOperations() {
 45         return operations.clone();
 46     }
 47 
<span class="line-modified"> 48     public void dispatch(java.rmi.Remote obj, java.rmi.server.RemoteCall remoteCall, int opnum, long hash)</span>
 49             throws java.lang.Exception {
 50         if (hash != interfaceHash)
 51             throw new java.rmi.server.SkeletonMismatchException(&quot;interface hash mismatch&quot;);
 52 
 53         sun.rmi.transport.DGCImpl server = (sun.rmi.transport.DGCImpl) obj;
<span class="line-added"> 54         StreamRemoteCall call = (StreamRemoteCall) remoteCall;</span>
 55         switch (opnum) {
 56             case 0: // clean(ObjID[], long, VMID, boolean)
 57             {
 58                 java.rmi.server.ObjID[] $param_arrayOf_ObjID_1;
 59                 long $param_long_2;
 60                 java.rmi.dgc.VMID $param_VMID_3;
 61                 boolean $param_boolean_4;
 62                 try {
 63                     java.io.ObjectInput in = call.getInputStream();
 64                     $param_arrayOf_ObjID_1 = (java.rmi.server.ObjID[]) in.readObject();
 65                     $param_long_2 = in.readLong();
 66                     $param_VMID_3 = (java.rmi.dgc.VMID) in.readObject();
 67                     $param_boolean_4 = in.readBoolean();
<span class="line-modified"> 68                 } catch (ClassCastException | IOException | ClassNotFoundException e) {</span>
<span class="line-modified"> 69                     call.discardPendingRefs();</span>

 70                     throw new java.rmi.UnmarshalException(&quot;error unmarshalling arguments&quot;, e);
 71                 } finally {
 72                     call.releaseInputStream();
 73                 }
 74                 server.clean($param_arrayOf_ObjID_1, $param_long_2, $param_VMID_3, $param_boolean_4);
 75                 try {
 76                     call.getResultStream(true);
 77                 } catch (java.io.IOException e) {
 78                     throw new java.rmi.MarshalException(&quot;error marshalling return&quot;, e);
 79                 }
 80                 break;
 81             }
 82 
 83             case 1: // dirty(ObjID[], long, Lease)
 84             {
 85                 java.rmi.server.ObjID[] $param_arrayOf_ObjID_1;
 86                 long $param_long_2;
 87                 java.rmi.dgc.Lease $param_Lease_3;
 88                 try {
 89                     java.io.ObjectInput in = call.getInputStream();
 90                     $param_arrayOf_ObjID_1 = (java.rmi.server.ObjID[]) in.readObject();
 91                     $param_long_2 = in.readLong();
 92                     $param_Lease_3 = (java.rmi.dgc.Lease) in.readObject();
<span class="line-modified"> 93                 } catch (ClassCastException | IOException | ClassNotFoundException e) {</span>
<span class="line-modified"> 94                     call.discardPendingRefs();</span>

 95                     throw new java.rmi.UnmarshalException(&quot;error unmarshalling arguments&quot;, e);
 96                 } finally {
 97                     call.releaseInputStream();
 98                 }
 99                 java.rmi.dgc.Lease $result = server.dirty($param_arrayOf_ObjID_1, $param_long_2, $param_Lease_3);
100                 try {
101                     java.io.ObjectOutput out = call.getResultStream(true);
102                     out.writeObject($result);
103                 } catch (java.io.IOException e) {
104                     throw new java.rmi.MarshalException(&quot;error marshalling return&quot;, e);
105                 }
106                 break;
107             }
108 
109             default:
110                 throw new java.rmi.UnmarshalException(&quot;invalid method number&quot;);
111         }
112     }
113 }
</pre>
</td>
</tr>
</table>
<center><a href="../server/UnicastServerRef.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="DGCImpl_Stub.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>