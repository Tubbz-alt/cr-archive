<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.crypto.cryptoki/share/native/libj2pkcs11/pkcs11wrapper.h</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="pkcs11t.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../unix/native/libj2pkcs11/p11_md.c.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.crypto.cryptoki/share/native/libj2pkcs11/pkcs11wrapper.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   */
  
  /* Copyright  (c) 2002 Graz University of Technology. All rights reserved.
   *
   * Redistribution and use in  source and binary forms, with or without
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -67,15 +67,16 @@</span>
  
  /* extra PKCS#11 constants not in the standard include files */
  
  #define CKA_NETSCAPE_BASE                       (0x80000000 + 0x4E534350)
  #define CKA_NETSCAPE_TRUST_BASE                 (CKA_NETSCAPE_BASE + 0x2000)
<span class="udiff-line-removed">- </span>
  #define CKA_NETSCAPE_TRUST_SERVER_AUTH          (CKA_NETSCAPE_TRUST_BASE + 8)
  #define CKA_NETSCAPE_TRUST_CLIENT_AUTH          (CKA_NETSCAPE_TRUST_BASE + 9)
  #define CKA_NETSCAPE_TRUST_CODE_SIGNING (CKA_NETSCAPE_TRUST_BASE + 10)
  #define CKA_NETSCAPE_TRUST_EMAIL_PROTECTION     (CKA_NETSCAPE_TRUST_BASE + 11)
<span class="udiff-line-added">+ #define CKA_NETSCAPE_DB                         0xD5A0DB00</span>
<span class="udiff-line-added">+ #define CKM_NSS_TLS_PRF_GENERAL                 0x80000373</span>
  
  /*
  
   Define the PKCS#11 functions to include and exclude. Reduces the size
   of the binary somewhat.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -152,15 +153,14 @@</span>
  #undef  P11_ENABLE_C_CANCELFUNCTION
  #undef  P11_ENABLE_C_WAITFORSLOTEVENT
  #define P11_ENABLE_GETNATIVEKEYINFO
  #define P11_ENABLE_CREATENATIVEKEY
  
<span class="udiff-line-added">+ </span>
  /* include the platform dependent part of the header */
  #include &quot;p11_md.h&quot;
  
<span class="udiff-line-removed">- #include &quot;pkcs11.h&quot;</span>
<span class="udiff-line-removed">- #include &quot;pkcs-11v2-20a3.h&quot;</span>
  #include &lt;jni.h&gt;
  #include &lt;jni_util.h&gt;
  #include &lt;stdarg.h&gt;
  
  #define MAX_STACK_BUFFER_LEN (4 * 1024)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -204,11 +204,13 @@</span>
  #define ckLongToJInt(x)         ((jint) x)
  #define ckULongToJInt(x)        ((jint) x)
  #define ckULongToJSize(x)       ((jsize) x)
  #define unsignedIntToCKULong(x) ((CK_ULONG) x)
  
<span class="udiff-line-modified-removed">- //#define P11_DEBUG</span>
<span class="udiff-line-modified-added">+ //#define TRACE0d(s) { printf(s); fflush(stdout); }</span>
<span class="udiff-line-added">+ //#define TRACE1d(s, p1) { printf(s, p1); fflush(stdout); }</span>
<span class="udiff-line-added">+ //#define TRACE2d(s, p1, p2) { printf(s, p1, p2); fflush(stdout); }</span>
  
  #ifdef P11_DEBUG
  #define TRACE0(s) { printf(s); fflush(stdout); }
  #define TRACE1(s, p1) { printf(s, p1); fflush(stdout); }
  #define TRACE2(s, p1, p2) { printf(s, p1, p2); fflush(stdout); }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -226,10 +228,12 @@</span>
  extern jboolean debug;
  void printDebug(const char *format, ...);
  
  #define CK_ASSERT_OK 0L
  
<span class="udiff-line-added">+ #define CLASS_P11PSSSIGNATURE &quot;sun/security/pkcs11/P11PSSSignature&quot;</span>
<span class="udiff-line-added">+ </span>
  #define CLASS_INFO &quot;sun/security/pkcs11/wrapper/CK_INFO&quot;
  #define CLASS_VERSION &quot;sun/security/pkcs11/wrapper/CK_VERSION&quot;
  #define CLASS_SLOT_INFO &quot;sun/security/pkcs11/wrapper/CK_SLOT_INFO&quot;
  #define CLASS_TOKEN_INFO &quot;sun/security/pkcs11/wrapper/CK_TOKEN_INFO&quot;
  #define CLASS_MECHANISM &quot;sun/security/pkcs11/wrapper/CK_MECHANISM&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -247,19 +251,22 @@</span>
  #define CLASS_UNLOCKMUTEX &quot;sun/security/pkcs11/wrapper/CK_UNLOCKMUTEX&quot;
  #define CLASS_NOTIFY &quot;sun/security/pkcs11/wrapper/CK_NOTIFY&quot;
  
  
  /* mechanism parameter classes */
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-added">+ #define CLASS_AES_CTR_PARAMS &quot;sun/security/pkcs11/wrapper/CK_AES_CTR_PARAMS&quot;</span>
<span class="udiff-line-added">+ #define CLASS_GCM_PARAMS &quot;sun/security/pkcs11/wrapper/CK_GCM_PARAMS&quot;</span>
<span class="udiff-line-added">+ #define CLASS_CCM_PARAMS &quot;sun/security/pkcs11/wrapper/CK_CCM_PARAMS&quot;</span>
<span class="udiff-line-added">+ #define CLASS_RSA_PKCS_PSS_PARAMS &quot;sun/security/pkcs11/wrapper/CK_RSA_PKCS_PSS_PARAMS&quot;</span>
  #define CLASS_RSA_PKCS_OAEP_PARAMS &quot;sun/security/pkcs11/wrapper/CK_RSA_PKCS_OAEP_PARAMS&quot;
<span class="udiff-line-added">+ </span>
  #define CLASS_MAC_GENERAL_PARAMS &quot;sun/security/pkcs11/wrapper/CK_MAC_GENERAL_PARAMS&quot;
  #define CLASS_PBE_PARAMS &quot;sun/security/pkcs11/wrapper/CK_PBE_PARAMS&quot;
  #define PBE_INIT_VECTOR_SIZE 8
  #define CLASS_PKCS5_PBKD2_PARAMS &quot;sun/security/pkcs11/wrapper/CK_PKCS5_PBKD2_PARAMS&quot;
  #define CLASS_EXTRACT_PARAMS &quot;sun/security/pkcs11/wrapper/CK_EXTRACT_PARAMS&quot;
  
<span class="udiff-line-removed">- #define CLASS_RSA_PKCS_PSS_PARAMS &quot;sun/security/pkcs11/wrapper/CK_RSA_PKCS_PSS_PARAMS&quot;</span>
  #define CLASS_ECDH1_DERIVE_PARAMS &quot;sun/security/pkcs11/wrapper/CK_ECDH1_DERIVE_PARAMS&quot;
  #define CLASS_ECDH2_DERIVE_PARAMS &quot;sun/security/pkcs11/wrapper/CK_ECDH2_DERIVE_PARAMS&quot;
  #define CLASS_X9_42_DH1_DERIVE_PARAMS &quot;sun/security/pkcs11/wrapper/CK_X9_42_DH1_DERIVE_PARAMS&quot;
  #define CLASS_X9_42_DH2_DERIVE_PARAMS &quot;sun/security/pkcs11/wrapper/CK_X9_42_DH2_DERIVE_PARAMS&quot;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -285,11 +292,15 @@</span>
  #define CLASS_TLS12_MASTER_KEY_DERIVE_PARAMS &quot;sun/security/pkcs11/wrapper/CK_TLS12_MASTER_KEY_DERIVE_PARAMS&quot;
  #define CLASS_SSL3_KEY_MAT_PARAMS &quot;sun/security/pkcs11/wrapper/CK_SSL3_KEY_MAT_PARAMS&quot;
  #define CLASS_TLS12_KEY_MAT_PARAMS &quot;sun/security/pkcs11/wrapper/CK_TLS12_KEY_MAT_PARAMS&quot;
  #define CLASS_TLS_PRF_PARAMS &quot;sun/security/pkcs11/wrapper/CK_TLS_PRF_PARAMS&quot;
  #define CLASS_TLS_MAC_PARAMS &quot;sun/security/pkcs11/wrapper/CK_TLS_MAC_PARAMS&quot;
<span class="udiff-line-modified-removed">- #define CLASS_AES_CTR_PARAMS &quot;sun/security/pkcs11/wrapper/CK_AES_CTR_PARAMS&quot;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+ /* function to update the CK_NSS_GCM_PARAMS in mechanism pointer with</span>
<span class="udiff-line-added">+  * CK_GCM_PARAMS</span>
<span class="udiff-line-added">+  */</span>
<span class="udiff-line-added">+ CK_MECHANISM_PTR updateGCMParams(JNIEnv *env, CK_MECHANISM_PTR mechPtr);</span>
  
  /* function to convert a PKCS#11 return value other than CK_OK into a Java Exception
   * or to throw a PKCS11RuntimeException
   */
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -298,15 +309,16 @@</span>
  void throwNullPointerException(JNIEnv *env, const char *message);
  void throwIOException(JNIEnv *env, const char *message);
  void throwPKCS11RuntimeException(JNIEnv *env, const char *message);
  void throwDisconnectedRuntimeException(JNIEnv *env);
  
<span class="udiff-line-modified-removed">- /* function to free CK_ATTRIBUTE array</span>
<span class="udiff-line-modified-added">+ /* functions to free CK structures and pointers</span>
   */
  void freeCKAttributeArray(CK_ATTRIBUTE_PTR attrPtr, int len);
<span class="udiff-line-added">+ void freeCKMechanismPtr(CK_MECHANISM_PTR mechPtr);</span>
  
<span class="udiff-line-modified-removed">- /* funktions to convert Java arrays to a CK-type array and the array length */</span>
<span class="udiff-line-modified-added">+ /* functions to convert Java arrays to a CK-type array and the array length */</span>
  
  void jBooleanArrayToCKBBoolArray(JNIEnv *env, const jbooleanArray jArray, CK_BBOOL **ckpArray, CK_ULONG_PTR ckLength);
  void jByteArrayToCKByteArray(JNIEnv *env, const jbyteArray jArray, CK_BYTE_PTR *ckpArray, CK_ULONG_PTR ckLength);
  void jLongArrayToCKULongArray(JNIEnv *env, const jlongArray jArray, CK_ULONG_PTR *ckpArray, CK_ULONG_PTR ckLength);
  void jCharArrayToCKCharArray(JNIEnv *env, const jcharArray jArray, CK_CHAR_PTR *ckpArray, CK_ULONG_PTR ckLength);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -314,81 +326,75 @@</span>
  void jStringToCKUTF8CharArray(JNIEnv *env, const jstring jArray, CK_UTF8CHAR_PTR *ckpArray, CK_ULONG_PTR ckpLength);
  void jAttributeArrayToCKAttributeArray(JNIEnv *env, jobjectArray jAArray, CK_ATTRIBUTE_PTR *ckpArray, CK_ULONG_PTR ckpLength);
  /*void jObjectArrayToCKVoidPtrArray(JNIEnv *env, const jobjectArray jArray, CK_VOID_PTR_PTR ckpArray, CK_ULONG_PTR ckpLength); */
  
  
<span class="udiff-line-modified-removed">- /* funktions to convert a CK-type array and the array length to a Java array */</span>
<span class="udiff-line-modified-added">+ /* functions to convert a CK-type array and the array length to a Java array */</span>
  
  jbyteArray ckByteArrayToJByteArray(JNIEnv *env, const CK_BYTE_PTR ckpArray, CK_ULONG ckLength);
  jlongArray ckULongArrayToJLongArray(JNIEnv *env, const CK_ULONG_PTR ckpArray, CK_ULONG ckLength);
  jcharArray ckCharArrayToJCharArray(JNIEnv *env, const CK_CHAR_PTR ckpArray, CK_ULONG length);
  jcharArray ckUTF8CharArrayToJCharArray(JNIEnv *env, const CK_UTF8CHAR_PTR ckpArray, CK_ULONG ckLength);
  
  
<span class="udiff-line-modified-removed">- /* funktions to convert a CK-type structure or a pointer to a CK-value to a Java object */</span>
<span class="udiff-line-modified-added">+ /* functions to convert a CK-type structure or a pointer to a CK-value to a Java object */</span>
  
  jobject ckBBoolPtrToJBooleanObject(JNIEnv *env, const CK_BBOOL* ckpValue);
  jobject ckULongPtrToJLongObject(JNIEnv *env, const CK_ULONG_PTR ckpValue);
  jobject ckDatePtrToJDateObject(JNIEnv *env, const CK_DATE *ckpValue);
  jobject ckVersionPtrToJVersion(JNIEnv *env, const CK_VERSION_PTR ckpVersion);
  jobject ckSessionInfoPtrToJSessionInfo(JNIEnv *env, const CK_SESSION_INFO_PTR ckpSessionInfo);
  jobject ckAttributePtrToJAttribute(JNIEnv *env, const CK_ATTRIBUTE_PTR ckpAttribute);
  
  
<span class="udiff-line-modified-removed">- /* funktion to convert the CK-value used by the CK_ATTRIBUTE structure to a Java object */</span>
<span class="udiff-line-modified-added">+ /* function to convert the CK-value used by the CK_ATTRIBUTE structure to a Java object */</span>
  
  jobject ckAttributeValueToJObject(JNIEnv *env, const CK_ATTRIBUTE_PTR ckpAttribute);
  
  
<span class="udiff-line-modified-removed">- /* funktions to convert a Java object to a CK-type structure or a pointer to a CK-value */</span>
<span class="udiff-line-modified-added">+ /* functions to convert a Java object to a CK-type structure or a pointer to a CK-value */</span>
  
  CK_BBOOL* jBooleanObjectToCKBBoolPtr(JNIEnv *env, jobject jObject);
  CK_BYTE_PTR jByteObjectToCKBytePtr(JNIEnv *env, jobject jObject);
  CK_ULONG* jIntegerObjectToCKULongPtr(JNIEnv *env, jobject jObject);
  CK_ULONG* jLongObjectToCKULongPtr(JNIEnv *env, jobject jObject);
  CK_CHAR_PTR jCharObjectToCKCharPtr(JNIEnv *env, jobject jObject);
  CK_VERSION_PTR jVersionToCKVersionPtr(JNIEnv *env, jobject jVersion);
<span class="udiff-line-modified-removed">- CK_DATE * jDateObjectPtrToCKDatePtr(JNIEnv *env, jobject jDate);</span>
<span class="udiff-line-modified-added">+ CK_DATE * jDateObjectToCKDatePtr(JNIEnv *env, jobject jDate);</span>
  CK_ATTRIBUTE jAttributeToCKAttribute(JNIEnv *env, jobject jAttribute);
<span class="udiff-line-modified-removed">- /*CK_MECHANISM jMechanismToCKMechanism(JNIEnv *env, jobject jMechanism);*/</span>
<span class="udiff-line-removed">- void jMechanismToCKMechanism(JNIEnv *env, jobject jMechanism, CK_MECHANISM_PTR ckMechanismPtr);</span>
<span class="udiff-line-modified-added">+ CK_MECHANISM_PTR jMechanismToCKMechanismPtr(JNIEnv *env, jobject jMechanism);</span>
  
  
<span class="udiff-line-modified-removed">- /* funktions to convert Java objects used by the Mechanism and Attribute class to a CK-type structure */</span>
<span class="udiff-line-modified-added">+ /* functions to convert Java objects used by the Mechanism and Attribute class to a CK-type structure */</span>
<span class="udiff-line-added">+ CK_VOID_PTR jObjectToPrimitiveCKObjectPtr(JNIEnv *env, jobject jObject, CK_ULONG *ckpLength);</span>
<span class="udiff-line-added">+ CK_VOID_PTR jMechParamToCKMechParamPtr(JNIEnv *env, jobject jParam, CK_MECHANISM_TYPE, CK_ULONG</span>
<span class="udiff-line-added">+ *ckpLength);</span>
  
<span class="udiff-line-removed">- void jObjectToPrimitiveCKObjectPtrPtr(JNIEnv *env, jobject jObject, CK_VOID_PTR *ckpObjectPtr, CK_ULONG *pLength);</span>
<span class="udiff-line-removed">- void jMechanismParameterToCKMechanismParameter(JNIEnv *env, jobject jParam, CK_VOID_PTR *ckpParamPtr, CK_ULONG *ckpLength);</span>
  
<span class="udiff-line-added">+ /* functions to convert a specific Java mechanism parameter object to a CK-mechanism parameter pointer */</span>
  
<span class="udiff-line-modified-removed">- /* functions to convert a specific Java mechanism parameter object to a CK-mechanism parameter structure */</span>
<span class="udiff-line-modified-added">+ CK_RSA_PKCS_OAEP_PARAMS_PTR jRsaPkcsOaepParamToCKRsaPkcsOaepParamPtr(JNIEnv *env,</span>
<span class="udiff-line-added">+     jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_PBE_PARAMS_PTR jPbeParamToCKPbeParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_PKCS5_PBKD2_PARAMS_PTR jPkcs5Pbkd2ParamToCKPkcs5Pbkd2ParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_SSL3_MASTER_KEY_DERIVE_PARAMS_PTR jSsl3MasterKeyDeriveParamToCKSsl3MasterKeyDeriveParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_SSL3_KEY_MAT_PARAMS_PTR jSsl3KeyMatParamToCKSsl3KeyMatParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_KEY_DERIVATION_STRING_DATA jKeyDerivationStringDataToCKKeyDerivationStringData(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-added">+ CK_RSA_PKCS_PSS_PARAMS_PTR jRsaPkcsPssParamToCKRsaPkcsPssParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_ECDH1_DERIVE_PARAMS_PTR jEcdh1DeriveParamToCKEcdh1DeriveParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_ECDH2_DERIVE_PARAMS_PTR jEcdh2DeriveParamToCKEcdh2DeriveParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_X9_42_DH1_DERIVE_PARAMS_PTR jX942Dh1DeriveParamToCKX942Dh1DeriveParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ CK_X9_42_DH2_DERIVE_PARAMS_PTR jX942Dh2DeriveParamToCKX942Dh2DeriveParamPtr(JNIEnv *env, jobject jParam, CK_ULONG* pLength);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ /* functions to copy the returned values inside CK-mechanism back to Java object */</span>
  
<span class="udiff-line-removed">- CK_RSA_PKCS_OAEP_PARAMS jRsaPkcsOaepParamToCKRsaPkcsOaepParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_KEA_DERIVE_PARAMS jKeaDeriveParamToCKKeaDeriveParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_RC2_CBC_PARAMS jRc2CbcParamToCKRc2CbcParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_RC2_MAC_GENERAL_PARAMS jRc2MacGeneralParamToCKRc2MacGeneralParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_RC5_PARAMS jRc5ParamToCKRc5Param(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_RC5_CBC_PARAMS jRc5CbcParamToCKRc5CbcParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_RC5_MAC_GENERAL_PARAMS jRc5MacGeneralParamToCKRc5MacGeneralParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_SKIPJACK_PRIVATE_WRAP_PARAMS jSkipjackPrivateWrapParamToCKSkipjackPrivateWrapParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_SKIPJACK_RELAYX_PARAMS jSkipjackRelayxParamToCKSkipjackRelayxParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_PBE_PARAMS jPbeParamToCKPbeParam(JNIEnv *env, jobject jParam);</span>
  void copyBackPBEInitializationVector(JNIEnv *env, CK_MECHANISM *ckMechanism, jobject jMechanism);
<span class="udiff-line-removed">- CK_PKCS5_PBKD2_PARAMS jPkcs5Pbkd2ParamToCKPkcs5Pbkd2Param(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_KEY_WRAP_SET_OAEP_PARAMS jKeyWrapSetOaepParamToCKKeyWrapSetOaepParam(JNIEnv *env, jobject jParam);</span>
  void copyBackSetUnwrappedKey(JNIEnv *env, CK_MECHANISM *ckMechanism, jobject jMechanism);
<span class="udiff-line-removed">- CK_SSL3_MASTER_KEY_DERIVE_PARAMS jSsl3MasterKeyDeriveParamToCKSsl3MasterKeyDeriveParam(JNIEnv *env, jobject jParam);</span>
  void ssl3CopyBackClientVersion(JNIEnv *env, CK_MECHANISM *ckMechanism, jobject jMechanism);
  void tls12CopyBackClientVersion(JNIEnv *env, CK_MECHANISM *ckMechanism, jobject jMechanism);
<span class="udiff-line-removed">- CK_SSL3_KEY_MAT_PARAMS jSsl3KeyMatParamToCKSsl3KeyMatParam(JNIEnv *env, jobject jParam);</span>
  void ssl3CopyBackKeyMatParams(JNIEnv *env, CK_MECHANISM *ckMechanism, jobject jMechanism);
  void tls12CopyBackKeyMatParams(JNIEnv *env, CK_MECHANISM *ckMechanism, jobject jMechanism);
<span class="udiff-line-removed">- CK_KEY_DERIVATION_STRING_DATA jKeyDerivationStringDataToCKKeyDerivationStringData(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_RSA_PKCS_PSS_PARAMS jRsaPkcsPssParamToCKRsaPkcsPssParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_ECDH1_DERIVE_PARAMS jEcdh1DeriveParamToCKEcdh1DeriveParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_ECDH2_DERIVE_PARAMS jEcdh2DeriveParamToCKEcdh2DeriveParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_X9_42_DH1_DERIVE_PARAMS jX942Dh1DeriveParamToCKX942Dh1DeriveParam(JNIEnv *env, jobject jParam);</span>
<span class="udiff-line-removed">- CK_X9_42_DH2_DERIVE_PARAMS jX942Dh2DeriveParamToCKX942Dh2DeriveParam(JNIEnv *env, jobject jParam);</span>
  
  
  /* functions to convert the InitArgs object for calling the right Java mutex functions */
  
  CK_C_INITIALIZE_ARGS_PTR makeCKInitArgsAdapter(JNIEnv *env, jobject pInitArgs);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -448,10 +454,11 @@</span>
  void destroyLockObject(JNIEnv *env, jobject jLockObject);
  
  extern jfieldID pNativeDataID;
  extern jfieldID mech_mechanismID;
  extern jfieldID mech_pParameterID;
<span class="udiff-line-added">+ extern jfieldID mech_pHandleID;</span>
  
  extern jclass jByteArrayClass;
  extern jclass jLongClass;
  
  #ifndef NO_CALLBACKS
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -463,20 +470,22 @@</span>
  #endif /* NO_CALLBACKS */
  
  #ifdef P11_MEMORYDEBUG
  #include &lt;stdlib.h&gt;
  
<span class="udiff-line-modified-removed">- /* Simple malloc/free dumper */</span>
<span class="udiff-line-modified-added">+ /* Simple malloc/calloc/free dumper */</span>
  void *p11malloc(size_t c, char *file, int line);
<span class="udiff-line-added">+ void *p11calloc(size_t c, size_t s, char *file, int line);</span>
  void p11free(void *p, char *file, int line);
  
  /* Use THIS_FILE when it is available. */
  #ifndef THIS_FILE
      #define THIS_FILE __FILE__
  #endif
  
  #define malloc(c)       (p11malloc((c), THIS_FILE, __LINE__))
<span class="udiff-line-added">+ #define calloc(c, s)    (p11calloc((c), (s), THIS_FILE, __LINE__))</span>
  #define free(c)         (p11free((c), THIS_FILE, __LINE__))
  
  #endif
  
  #endif /* _PKCS11WRAPPER_H */
</pre>
<center><a href="pkcs11t.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../../unix/native/libj2pkcs11/p11_md.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>