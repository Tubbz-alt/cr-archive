<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/utils/hsdis/Makefile</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="../LogCompilation/src/test/java/com/sun/hotspot/tools/compiler/TestLogCompilation.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../../../test/failure_handler/src/share/classes/jdk/test/failurehandler/jtreg/GatherDiagnosticInfoObserver.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/utils/hsdis/Makefile</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2008, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # The Universal Permissive License (UPL), Version 1.0
  6 #
  7 # Subject to the condition set forth below, permission is hereby granted to
  8 # any person obtaining a copy of this software, associated documentation
  9 # and/or data (collectively the &quot;Software&quot;), free of charge and under any
 10 # and all copyright rights in the Software, and any and all patent rights
 11 # owned or freely licensable by each licensor hereunder covering either (i)
 12 # the unmodified Software as contributed to or provided by such licensor,
 13 # or (ii) the Larger Works (as defined below), to deal in both
 14 #
 15 # (a) the Software, and
 16 #
 17 # (b) any piece of software and/or hardware listed in the lrgrwrks.txt file
 18 # if one is included with the Software (each a &quot;Larger Work&quot; to which the
 19 # Software is contributed by such licensors),
 20 #
 21 # without restriction, including without limitation the rights to copy,
 22 # create derivative works of, display, perform, and distribute the Software
</pre>
<hr />
<pre>
184 ifeq            ($(BINUTILS),)
185 # Pop all the way out of the workspace to look for binutils.
186 # ...You probably want to override this setting.
187 BINUTILSDIR	= $(shell cd build/binutils;pwd)
188 else
189 BINUTILSDIR	= $(shell cd $(BINUTILS);pwd)
190 endif
191 
192 CPPFLAGS	+= -I$(BINUTILSDIR)/include -I$(BINUTILSDIR)/bfd -I$(TARGET_DIR)/bfd
193 CPPFLAGS	+= -DLIBARCH_$(LIBARCH) -DLIBARCH=\&quot;$(LIBARCH)\&quot; -DLIB_EXT=\&quot;$(LIB_EXT)\&quot;
194 
195 TARGET_DIR	= build/$(OS)-$(JDKARCH)
196 TARGET		= $(TARGET_DIR)/hsdis-$(LIBARCH)$(LIB_EXT)
197 
198 SOURCE		= hsdis.c
199 
200 LIBRARIES =	$(TARGET_DIR)/bfd/libbfd.a \
201 		$(TARGET_DIR)/opcodes/libopcodes.a \
202 		$(TARGET_DIR)/libiberty/libiberty.a
203 




204 DEMO_TARGET	= $(TARGET_DIR)/hsdis-demo
205 DEMO_SOURCE	= hsdis-demo.c
206 
207 .PHONY:  all clean demo both
208 
209 all:  $(TARGET)
210 
211 both: all all64
212 
213 %64:
214 	$(MAKE) LP64=1 ${@:%64=%}
215 
216 demo: $(TARGET) $(DEMO_TARGET)
217 
218 $(LIBRARIES): $(TARGET_DIR) $(TARGET_DIR)/Makefile
219 	if [ ! -f $@ ]; then cd $(TARGET_DIR); make all-opcodes; fi
220 
221 $(TARGET_DIR)/Makefile:
222 	(cd $(TARGET_DIR); CC=$(CC) CFLAGS=&quot;$(CFLAGS)&quot; AR=&quot;$(AR)&quot; $(BINUTILSDIR)/configure --disable-nls $(CONFIGURE_ARGS))
223 
</pre>
</td>
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2008, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # The Universal Permissive License (UPL), Version 1.0
  6 #
  7 # Subject to the condition set forth below, permission is hereby granted to
  8 # any person obtaining a copy of this software, associated documentation
  9 # and/or data (collectively the &quot;Software&quot;), free of charge and under any
 10 # and all copyright rights in the Software, and any and all patent rights
 11 # owned or freely licensable by each licensor hereunder covering either (i)
 12 # the unmodified Software as contributed to or provided by such licensor,
 13 # or (ii) the Larger Works (as defined below), to deal in both
 14 #
 15 # (a) the Software, and
 16 #
 17 # (b) any piece of software and/or hardware listed in the lrgrwrks.txt file
 18 # if one is included with the Software (each a &quot;Larger Work&quot; to which the
 19 # Software is contributed by such licensors),
 20 #
 21 # without restriction, including without limitation the rights to copy,
 22 # create derivative works of, display, perform, and distribute the Software
</pre>
<hr />
<pre>
184 ifeq            ($(BINUTILS),)
185 # Pop all the way out of the workspace to look for binutils.
186 # ...You probably want to override this setting.
187 BINUTILSDIR	= $(shell cd build/binutils;pwd)
188 else
189 BINUTILSDIR	= $(shell cd $(BINUTILS);pwd)
190 endif
191 
192 CPPFLAGS	+= -I$(BINUTILSDIR)/include -I$(BINUTILSDIR)/bfd -I$(TARGET_DIR)/bfd
193 CPPFLAGS	+= -DLIBARCH_$(LIBARCH) -DLIBARCH=\&quot;$(LIBARCH)\&quot; -DLIB_EXT=\&quot;$(LIB_EXT)\&quot;
194 
195 TARGET_DIR	= build/$(OS)-$(JDKARCH)
196 TARGET		= $(TARGET_DIR)/hsdis-$(LIBARCH)$(LIB_EXT)
197 
198 SOURCE		= hsdis.c
199 
200 LIBRARIES =	$(TARGET_DIR)/bfd/libbfd.a \
201 		$(TARGET_DIR)/opcodes/libopcodes.a \
202 		$(TARGET_DIR)/libiberty/libiberty.a
203 
<span class="line-added">204 ifneq ($(MINGW),)</span>
<span class="line-added">205 LIBRARIES +=	$(TARGET_DIR)/zlib/libz.a</span>
<span class="line-added">206 endif</span>
<span class="line-added">207 </span>
208 DEMO_TARGET	= $(TARGET_DIR)/hsdis-demo
209 DEMO_SOURCE	= hsdis-demo.c
210 
211 .PHONY:  all clean demo both
212 
213 all:  $(TARGET)
214 
215 both: all all64
216 
217 %64:
218 	$(MAKE) LP64=1 ${@:%64=%}
219 
220 demo: $(TARGET) $(DEMO_TARGET)
221 
222 $(LIBRARIES): $(TARGET_DIR) $(TARGET_DIR)/Makefile
223 	if [ ! -f $@ ]; then cd $(TARGET_DIR); make all-opcodes; fi
224 
225 $(TARGET_DIR)/Makefile:
226 	(cd $(TARGET_DIR); CC=$(CC) CFLAGS=&quot;$(CFLAGS)&quot; AR=&quot;$(AR)&quot; $(BINUTILSDIR)/configure --disable-nls $(CONFIGURE_ARGS))
227 
</pre>
</td>
</tr>
</table>
<center><a href="../LogCompilation/src/test/java/com/sun/hotspot/tools/compiler/TestLogCompilation.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="../../../test/failure_handler/src/share/classes/jdk/test/failurehandler/jtreg/GatherDiagnosticInfoObserver.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>