<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.jshell/share/classes/jdk/internal/jshell/tool/JShellTool.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Feedback.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="resources/l10n.properties.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jshell/share/classes/jdk/internal/jshell/tool/JShellTool.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2014, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3322,10 ***</span>
<span class="line-new-header">--- 3322,13 ---</span>
                      kind = &quot;enum&quot;;
                      break;
                  case ANNOTATION_TYPE_SUBKIND:
                      kind = &quot;@interface&quot;;
                      break;
<span class="line-added">+                 case RECORD_SUBKIND:</span>
<span class="line-added">+                     kind = &quot;record&quot;;</span>
<span class="line-added">+                     break;</span>
                  default:
                      assert false : &quot;Wrong kind&quot; + ck.subKind();
                      kind = &quot;class&quot;;
                      break;
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3497,10 ***</span>
<span class="line-new-header">--- 3500,14 ---</span>
              }
          }
  
          int pstart = (int) diag.getStartPosition();
          int pend = (int) diag.getEndPosition();
<span class="line-added">+         if (pstart &lt; 0 || pend &lt; 0) {</span>
<span class="line-added">+             pstart = 0;</span>
<span class="line-added">+             pend = source.length();</span>
<span class="line-added">+         }</span>
          Matcher m = LINEBREAK.matcher(source);
          int pstartl = 0;
          int pendl = -2;
          while (m.find(pstartl)) {
              pendl = m.start();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3508,11 ***</span>
                  break;
              } else {
                  pstartl = m.end();
              }
          }
<span class="line-modified">!         if (pendl &lt; pstart) {</span>
              pendl = source.length();
          }
          toDisplay.add(source.substring(pstartl, pendl));
  
          StringBuilder sb = new StringBuilder();
<span class="line-new-header">--- 3515,11 ---</span>
                  break;
              } else {
                  pstartl = m.end();
              }
          }
<span class="line-modified">!         if (pendl &lt; pstartl) {</span>
              pendl = source.length();
          }
          toDisplay.add(source.substring(pstartl, pendl));
  
          StringBuilder sb = new StringBuilder();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 3813,10 ***</span>
<span class="line-new-header">--- 3820,13 ---</span>
                      custom(FormatCase.ENUM, ((TypeDeclSnippet) sn).name());
                      break;
                  case ANNOTATION_TYPE_SUBKIND:
                      custom(FormatCase.ANNOTATION, ((TypeDeclSnippet) sn).name());
                      break;
<span class="line-added">+                 case RECORD_SUBKIND:</span>
<span class="line-added">+                     custom(FormatCase.RECORD, ((TypeDeclSnippet) sn).name());</span>
<span class="line-added">+                     break;</span>
                  case METHOD_SUBKIND:
                      custom(FormatCase.METHOD, ((MethodSnippet) sn).name(), ((MethodSnippet) sn).parameterTypes());
                      break;
                  case VAR_DECLARATION_SUBKIND: {
                      VarSnippet vk = (VarSnippet) sn;
</pre>
<center><a href="Feedback.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="resources/l10n.properties.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>