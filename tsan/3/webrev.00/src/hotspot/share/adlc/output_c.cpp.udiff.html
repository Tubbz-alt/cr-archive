<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/adlc/output_c.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="main.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="output_h.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/adlc/output_c.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1998, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2375,11 +2375,11 @@</span>
  
    void emit_rep_var(const char *rep_var) {
      _processing_noninput = false;
      // A replacement variable, originally &#39;$&#39;
      if ( Opcode::as_opcode_type(rep_var) != Opcode::NOT_AN_OPCODE ) {
<span class="udiff-line-modified-removed">-       if (!_inst._opcode-&gt;print_opcode(_fp, Opcode::as_opcode_type(rep_var) )) {</span>
<span class="udiff-line-modified-added">+       if ((_inst._opcode == NULL) || !_inst._opcode-&gt;print_opcode(_fp, Opcode::as_opcode_type(rep_var) )) {</span>
          // Missing opcode
          _AD.syntax_err( _inst._linenum,
                          &quot;Missing $%s opcode definition in %s, used by encoding %s\n&quot;,
                          rep_var, _inst._ident, _encoding._name);
        }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2431,11 +2431,11 @@</span>
          _constant_status = LITERAL_OUTPUT;
        }
        else if( Opcode::as_opcode_type(inst_rep_var) != Opcode::NOT_AN_OPCODE ) {
          // else check if &quot;primary&quot;, &quot;secondary&quot;, &quot;tertiary&quot;
          assert( _constant_status == LITERAL_ACCESSED, &quot;Must be processing a literal constant parameter&quot;);
<span class="udiff-line-modified-removed">-         if (!_inst._opcode-&gt;print_opcode(_fp, Opcode::as_opcode_type(inst_rep_var) )) {</span>
<span class="udiff-line-modified-added">+         if ((_inst._opcode == NULL) || !_inst._opcode-&gt;print_opcode(_fp, Opcode::as_opcode_type(inst_rep_var) )) {</span>
            // Missing opcode
            _AD.syntax_err( _inst._linenum,
                            &quot;Missing $%s opcode definition in %s\n&quot;,
                            rep_var, _inst._ident);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2779,10 +2779,12 @@</span>
  
      if (all_same) {
        // Return the sole RegMask.
        if (strcmp(first_reg_class, &quot;stack_slots&quot;) == 0) {
          fprintf(fp,&quot;  return &amp;(Compile::current()-&gt;FIRST_STACK_mask());\n&quot;);
<span class="udiff-line-added">+       } else if (strcmp(first_reg_class, &quot;dynamic&quot;) == 0) {</span>
<span class="udiff-line-added">+         fprintf(fp,&quot;  return &amp;RegMask::Empty;\n&quot;);</span>
        } else {
          const char* first_reg_class_to_upper = toUpper(first_reg_class);
          fprintf(fp,&quot;  return &amp;%s_mask();\n&quot;, first_reg_class_to_upper);
          delete[] first_reg_class_to_upper;
        }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -3935,10 +3937,13 @@</span>
    }
    if( inst-&gt;is_ideal_if() ) {
      fprintf(fp_cpp, &quot;%s node-&gt;_prob = _leaf-&gt;as_If()-&gt;_prob;\n&quot;, indent);
      fprintf(fp_cpp, &quot;%s node-&gt;_fcnt = _leaf-&gt;as_If()-&gt;_fcnt;\n&quot;, indent);
    }
<span class="udiff-line-added">+   if (inst-&gt;is_ideal_halt()) {</span>
<span class="udiff-line-added">+     fprintf(fp_cpp, &quot;%s node-&gt;_halt_reason = _leaf-&gt;as_Halt()-&gt;_halt_reason;\n&quot;, indent);</span>
<span class="udiff-line-added">+   }</span>
    if (inst-&gt;is_ideal_jump()) {
      fprintf(fp_cpp, &quot;%s node-&gt;_probs = _leaf-&gt;as_Jump()-&gt;_probs;\n&quot;, indent);
    }
    if( inst-&gt;is_ideal_fastlock() ) {
      fprintf(fp_cpp, &quot;%s node-&gt;_counters = _leaf-&gt;as_FastLock()-&gt;counters();\n&quot;, indent);
</pre>
<center><a href="main.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="output_h.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>