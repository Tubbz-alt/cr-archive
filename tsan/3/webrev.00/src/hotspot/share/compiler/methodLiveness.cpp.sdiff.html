<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/compiler/methodLiveness.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="disassembler.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="methodMatcher.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/compiler/methodLiveness.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
813   return _normal_exit.set_union_with_result(other);
814 }
815 
816 bool MethodLiveness::BasicBlock::merge_exception(const BitMap&amp; other) {
817   return _exception_exit.set_union_with_result(other);
818 }
819 
820 MethodLivenessResult MethodLiveness::BasicBlock::get_liveness_at(ciMethod* method, int bci) {
821   MethodLivenessResult answer(_analyzer-&gt;bit_map_size_bits());
822   answer.set_is_valid();
823 
824 #ifndef ASSERT
825   if (bci == start_bci()) {
826     answer.set_from(_entry);
827     return answer;
828   }
829 #endif
830 
831 #ifdef ASSERT
832   ResourceMark rm;
<span class="line-modified">833   ResourceBitMap g(_gen.size()); g.set_from(_gen);</span>
<span class="line-modified">834   ResourceBitMap k(_kill.size()); k.set_from(_kill);</span>
835 #endif
836   if (_last_bci != bci || trueInDebug) {
837     ciBytecodeStream bytes(method);
838     bytes.reset_to_bci(bci);
839     bytes.set_max_bci(limit_bci());
840     compute_gen_kill_range(&amp;bytes);
841     assert(_last_bci != bci ||
842            (g.is_same(_gen) &amp;&amp; k.is_same(_kill)), &quot;cached computation is incorrect&quot;);
843     _last_bci = bci;
844   }
845 
846   answer.set_union(_normal_exit);
847   answer.set_difference(_kill);
848   answer.set_union(_gen);
849   answer.set_union(_exception_exit);
850 
851 #ifdef ASSERT
852   if (bci == start_bci()) {
853     assert(answer.is_same(_entry), &quot;optimized answer must be accurate&quot;);
854   }
</pre>
</td>
<td>
<hr />
<pre>
813   return _normal_exit.set_union_with_result(other);
814 }
815 
816 bool MethodLiveness::BasicBlock::merge_exception(const BitMap&amp; other) {
817   return _exception_exit.set_union_with_result(other);
818 }
819 
820 MethodLivenessResult MethodLiveness::BasicBlock::get_liveness_at(ciMethod* method, int bci) {
821   MethodLivenessResult answer(_analyzer-&gt;bit_map_size_bits());
822   answer.set_is_valid();
823 
824 #ifndef ASSERT
825   if (bci == start_bci()) {
826     answer.set_from(_entry);
827     return answer;
828   }
829 #endif
830 
831 #ifdef ASSERT
832   ResourceMark rm;
<span class="line-modified">833   ResourceBitMap g(_gen.size(), false); g.set_from(_gen);</span>
<span class="line-modified">834   ResourceBitMap k(_kill.size(), false); k.set_from(_kill);</span>
835 #endif
836   if (_last_bci != bci || trueInDebug) {
837     ciBytecodeStream bytes(method);
838     bytes.reset_to_bci(bci);
839     bytes.set_max_bci(limit_bci());
840     compute_gen_kill_range(&amp;bytes);
841     assert(_last_bci != bci ||
842            (g.is_same(_gen) &amp;&amp; k.is_same(_kill)), &quot;cached computation is incorrect&quot;);
843     _last_bci = bci;
844   }
845 
846   answer.set_union(_normal_exit);
847   answer.set_difference(_kill);
848   answer.set_union(_gen);
849   answer.set_union(_exception_exit);
850 
851 #ifdef ASSERT
852   if (bci == start_bci()) {
853     assert(answer.is_same(_entry), &quot;optimized answer must be accurate&quot;);
854   }
</pre>
</td>
</tr>
</table>
<center><a href="disassembler.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="methodMatcher.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>