<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/compiler/compilerDefinitions.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="compilerDefinitions.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="compilerDirectives.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/compiler/compilerDefinitions.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 45   BeforeBci            = InvocationEntryBci,
 46   AfterBci             = -2,
 47   UnwindBci            = -3,
 48   AfterExceptionBci    = -4,
 49   UnknownBci           = -5,
 50   InvalidFrameStateBci = -6
 51 };
 52 
 53 // Enumeration to distinguish tiers of compilation
 54 enum CompLevel {
 55   CompLevel_any               = -2,
 56   CompLevel_all               = -2,
 57   CompLevel_aot               = -1,
 58   CompLevel_none              = 0,         // Interpreter
 59   CompLevel_simple            = 1,         // C1
 60   CompLevel_limited_profile   = 2,         // C1, invocation &amp; backedge counters
 61   CompLevel_full_profile      = 3,         // C1, invocation &amp; backedge counters + mdo
 62   CompLevel_full_optimization = 4          // C2 or JVMCI
 63 };
 64 




















 65 extern CompLevel CompLevel_highest_tier;
<span class="line-removed"> 66 extern CompLevel CompLevel_initial_compile;</span>
 67 
 68 enum CompMode {
 69   CompMode_none = 0,
 70   CompMode_client = 1,
 71   CompMode_server = 2
 72 };
 73 
 74 extern CompMode Compilation_mode;
 75 
 76 inline bool is_server_compilation_mode_vm() {
 77   return Compilation_mode == CompMode_server;
 78 }
 79 
 80 inline bool is_client_compilation_mode_vm() {
 81   return Compilation_mode == CompMode_client;
 82 }
 83 
 84 inline bool is_c1_compile(int comp_level) {
 85   return comp_level &gt; CompLevel_none &amp;&amp; comp_level &lt; CompLevel_full_optimization;
 86 }
</pre>
<hr />
<pre>
112 #else
113 #define RTM_OPT_ONLY(code)
114 #endif
115 
116 class CompilerConfig : public AllStatic {
117 public:
118   // Scale compile thresholds
119   // Returns threshold scaled with CompileThresholdScaling
120   static intx scaled_compile_threshold(intx threshold, double scale);
121   static intx scaled_compile_threshold(intx threshold);
122 
123   // Returns freq_log scaled with CompileThresholdScaling
124   static intx scaled_freq_log(intx freq_log, double scale);
125   static intx scaled_freq_log(intx freq_log);
126 
127   static bool check_args_consistency(bool status);
128 
129   static void ergo_initialize();
130 
131 private:
<span class="line-modified">132   static void set_tiered_flags();</span>
133 };
134 
135 #endif // SHARE_COMPILER_COMPILERDEFINITIONS_HPP
</pre>
</td>
<td>
<hr />
<pre>
 45   BeforeBci            = InvocationEntryBci,
 46   AfterBci             = -2,
 47   UnwindBci            = -3,
 48   AfterExceptionBci    = -4,
 49   UnknownBci           = -5,
 50   InvalidFrameStateBci = -6
 51 };
 52 
 53 // Enumeration to distinguish tiers of compilation
 54 enum CompLevel {
 55   CompLevel_any               = -2,
 56   CompLevel_all               = -2,
 57   CompLevel_aot               = -1,
 58   CompLevel_none              = 0,         // Interpreter
 59   CompLevel_simple            = 1,         // C1
 60   CompLevel_limited_profile   = 2,         // C1, invocation &amp; backedge counters
 61   CompLevel_full_profile      = 3,         // C1, invocation &amp; backedge counters + mdo
 62   CompLevel_full_optimization = 4          // C2 or JVMCI
 63 };
 64 
<span class="line-added"> 65 #ifdef TIERED</span>
<span class="line-added"> 66 class CompilationModeFlag : AllStatic {</span>
<span class="line-added"> 67   static bool _quick_only;</span>
<span class="line-added"> 68   static bool _high_only;</span>
<span class="line-added"> 69   static bool _high_only_quick_internal;</span>
<span class="line-added"> 70 </span>
<span class="line-added"> 71 public:</span>
<span class="line-added"> 72   static bool initialize();</span>
<span class="line-added"> 73   static bool normal()                   { return !quick_only() &amp;&amp; !high_only() &amp;&amp; !high_only_quick_internal(); }</span>
<span class="line-added"> 74   static bool quick_only()               { return _quick_only;               }</span>
<span class="line-added"> 75   static bool high_only()                { return _high_only;                }</span>
<span class="line-added"> 76   static bool high_only_quick_internal() { return _high_only_quick_internal; }</span>
<span class="line-added"> 77 </span>
<span class="line-added"> 78   static bool disable_intermediate()     { return high_only() || high_only_quick_internal(); }</span>
<span class="line-added"> 79   static bool quick_internal()           { return !high_only(); }</span>
<span class="line-added"> 80 </span>
<span class="line-added"> 81   static void set_high_only_quick_internal(bool x) { _high_only_quick_internal = x; }</span>
<span class="line-added"> 82 };</span>
<span class="line-added"> 83 #endif</span>
<span class="line-added"> 84 </span>
 85 extern CompLevel CompLevel_highest_tier;

 86 
 87 enum CompMode {
 88   CompMode_none = 0,
 89   CompMode_client = 1,
 90   CompMode_server = 2
 91 };
 92 
 93 extern CompMode Compilation_mode;
 94 
 95 inline bool is_server_compilation_mode_vm() {
 96   return Compilation_mode == CompMode_server;
 97 }
 98 
 99 inline bool is_client_compilation_mode_vm() {
100   return Compilation_mode == CompMode_client;
101 }
102 
103 inline bool is_c1_compile(int comp_level) {
104   return comp_level &gt; CompLevel_none &amp;&amp; comp_level &lt; CompLevel_full_optimization;
105 }
</pre>
<hr />
<pre>
131 #else
132 #define RTM_OPT_ONLY(code)
133 #endif
134 
135 class CompilerConfig : public AllStatic {
136 public:
137   // Scale compile thresholds
138   // Returns threshold scaled with CompileThresholdScaling
139   static intx scaled_compile_threshold(intx threshold, double scale);
140   static intx scaled_compile_threshold(intx threshold);
141 
142   // Returns freq_log scaled with CompileThresholdScaling
143   static intx scaled_freq_log(intx freq_log, double scale);
144   static intx scaled_freq_log(intx freq_log);
145 
146   static bool check_args_consistency(bool status);
147 
148   static void ergo_initialize();
149 
150 private:
<span class="line-modified">151   TIERED_ONLY(static void set_tiered_flags();)</span>
152 };
153 
154 #endif // SHARE_COMPILER_COMPILERDEFINITIONS_HPP
</pre>
</td>
</tr>
</table>
<center><a href="compilerDefinitions.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="compilerDirectives.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>