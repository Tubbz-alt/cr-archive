<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/services/memBaseline.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="management.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="memReporter.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/services/memBaseline.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
139   LinkedList&lt;ReservedMemoryRegion&gt;* virtual_memory_allocations() {
140     return &amp;_virtual_memory_regions;
141   }
142 };
143 
144 
145 bool MemBaseline::baseline_summary() {
146   MallocMemorySummary::snapshot(&amp;_malloc_memory_snapshot);
147   VirtualMemorySummary::snapshot(&amp;_virtual_memory_snapshot);
148   MetaspaceSnapshot::snapshot(_metaspace_snapshot);
149   return true;
150 }
151 
152 bool MemBaseline::baseline_allocation_sites() {
153   // Malloc allocation sites
154   MallocAllocationSiteWalker malloc_walker;
155   if (!MallocSiteTable::walk_malloc_site(&amp;malloc_walker)) {
156     return false;
157   }
158 





159   _malloc_sites.move(malloc_walker.malloc_sites());
160   // The malloc sites are collected in size order
161   _malloc_sites_order = by_size;
162 
163   // Virtual memory allocation sites
164   VirtualMemoryAllocationWalker virtual_memory_walker;
165   if (!VirtualMemoryTracker::walk_virtual_memory(&amp;virtual_memory_walker)) {
166     return false;
167   }
168 
169   // Virtual memory allocations are collected in call stack order
170   _virtual_memory_allocations.move(virtual_memory_walker.virtual_memory_allocations());
171 
172   if (!aggregate_virtual_memory_allocation_sites()) {
173     return false;
174   }
175   // Virtual memory allocation sites are aggregrated in call stack order
176   _virtual_memory_sites_order = by_address;
177 
178   return true;
</pre>
</td>
<td>
<hr />
<pre>
139   LinkedList&lt;ReservedMemoryRegion&gt;* virtual_memory_allocations() {
140     return &amp;_virtual_memory_regions;
141   }
142 };
143 
144 
145 bool MemBaseline::baseline_summary() {
146   MallocMemorySummary::snapshot(&amp;_malloc_memory_snapshot);
147   VirtualMemorySummary::snapshot(&amp;_virtual_memory_snapshot);
148   MetaspaceSnapshot::snapshot(_metaspace_snapshot);
149   return true;
150 }
151 
152 bool MemBaseline::baseline_allocation_sites() {
153   // Malloc allocation sites
154   MallocAllocationSiteWalker malloc_walker;
155   if (!MallocSiteTable::walk_malloc_site(&amp;malloc_walker)) {
156     return false;
157   }
158 
<span class="line-added">159   // Walk simple thread stacks</span>
<span class="line-added">160   if (!ThreadStackTracker::walk_simple_thread_stack_site(&amp;malloc_walker)) {</span>
<span class="line-added">161     return false;</span>
<span class="line-added">162   }</span>
<span class="line-added">163 </span>
164   _malloc_sites.move(malloc_walker.malloc_sites());
165   // The malloc sites are collected in size order
166   _malloc_sites_order = by_size;
167 
168   // Virtual memory allocation sites
169   VirtualMemoryAllocationWalker virtual_memory_walker;
170   if (!VirtualMemoryTracker::walk_virtual_memory(&amp;virtual_memory_walker)) {
171     return false;
172   }
173 
174   // Virtual memory allocations are collected in call stack order
175   _virtual_memory_allocations.move(virtual_memory_walker.virtual_memory_allocations());
176 
177   if (!aggregate_virtual_memory_allocation_sites()) {
178     return false;
179   }
180   // Virtual memory allocation sites are aggregrated in call stack order
181   _virtual_memory_sites_order = by_address;
182 
183   return true;
</pre>
</td>
</tr>
</table>
<center><a href="management.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="memReporter.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>