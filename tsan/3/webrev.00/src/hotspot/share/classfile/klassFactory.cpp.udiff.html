<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/classfile/klassFactory.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="javaClasses.inline.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="metadataOnStackMark.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/klassFactory.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -56,11 +56,11 @@</span>
      assert(THREAD-&gt;is_Java_thread(), &quot;must be JavaThread&quot;);
  
      // Post the CFLH
      JvmtiCachedClassFileData* cached_class_file = NULL;
      if (cfs == NULL) {
<span class="udiff-line-modified-removed">-       cfs = FileMapInfo::open_stream_for_jvmti(ik, CHECK_NULL);</span>
<span class="udiff-line-modified-added">+       cfs = FileMapInfo::open_stream_for_jvmti(ik, class_loader, CHECK_NULL);</span>
      }
      unsigned char* ptr = (unsigned char*)cfs-&gt;buffer();
      unsigned char* end_ptr = ptr + cfs-&gt;length();
      unsigned char* old_ptr = ptr;
      JvmtiExport::post_class_file_load_hook(class_name,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -216,11 +216,11 @@</span>
    }
  
    JFR_ONLY(ON_KLASS_CREATION(result, parser, THREAD);)
  
  #if INCLUDE_CDS
<span class="udiff-line-modified-removed">-   if (DumpSharedSpaces) {</span>
<span class="udiff-line-modified-added">+   if (Arguments::is_dumping_archive()) {</span>
      ClassLoader::record_result(result, stream, THREAD);
    }
  #endif // INCLUDE_CDS
  
    return result;
</pre>
<center><a href="javaClasses.inline.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="metadataOnStackMark.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>