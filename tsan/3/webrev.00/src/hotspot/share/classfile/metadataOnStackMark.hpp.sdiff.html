<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/classfile/metadataOnStackMark.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="metadataOnStackMark.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="moduleEntry.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/metadataOnStackMark.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
31 class Metadata;
32 
33 typedef ChunkedList&lt;Metadata*, mtInternal&gt; MetadataOnStackBuffer;
34 
35 // Helper class to mark and unmark metadata used on the stack as either handles
36 // or executing methods, so that it can&#39;t be deleted during class redefinition
37 // and class unloading.
38 // This is also used for other things that can be deallocated, like class
39 // metadata during parsing if errors occur, relocated methods, and temporary
40 // constant pools.
41 class MetadataOnStackMark : public StackObj {
42   NOT_PRODUCT(static bool _is_active;)
43   static MetadataOnStackBuffer* _used_buffers;
44   static MetadataOnStackBuffer* _free_buffers;
45   static MetadataOnStackBuffer* _current_buffer;
46 
47   static MetadataOnStackBuffer* allocate_buffer();
48   static void retire_buffer(MetadataOnStackBuffer* buffer);
49 
50  public:
<span class="line-modified">51   MetadataOnStackMark(bool redefinition_walk);</span>
52    ~MetadataOnStackMark();
53 
54   static void record(Metadata* m);
55   static void retire_current_buffer();
56 };
57 
58 #endif // SHARE_CLASSFILE_METADATAONSTACKMARK_HPP
</pre>
</td>
<td>
<hr />
<pre>
31 class Metadata;
32 
33 typedef ChunkedList&lt;Metadata*, mtInternal&gt; MetadataOnStackBuffer;
34 
35 // Helper class to mark and unmark metadata used on the stack as either handles
36 // or executing methods, so that it can&#39;t be deleted during class redefinition
37 // and class unloading.
38 // This is also used for other things that can be deallocated, like class
39 // metadata during parsing if errors occur, relocated methods, and temporary
40 // constant pools.
41 class MetadataOnStackMark : public StackObj {
42   NOT_PRODUCT(static bool _is_active;)
43   static MetadataOnStackBuffer* _used_buffers;
44   static MetadataOnStackBuffer* _free_buffers;
45   static MetadataOnStackBuffer* _current_buffer;
46 
47   static MetadataOnStackBuffer* allocate_buffer();
48   static void retire_buffer(MetadataOnStackBuffer* buffer);
49 
50  public:
<span class="line-modified">51   MetadataOnStackMark(bool walk_all_metadata, bool redefinition_walk);</span>
52    ~MetadataOnStackMark();
53 
54   static void record(Metadata* m);
55   static void retire_current_buffer();
56 };
57 
58 #endif // SHARE_CLASSFILE_METADATAONSTACKMARK_HPP
</pre>
</td>
</tr>
</table>
<center><a href="metadataOnStackMark.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="moduleEntry.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>