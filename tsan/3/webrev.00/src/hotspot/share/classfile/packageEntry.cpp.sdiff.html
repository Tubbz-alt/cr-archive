<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/classfile/packageEntry.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="modules.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="placeholders.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/packageEntry.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
228   if (locked_lookup_only(name) == NULL) {
229     locked_create_entry(name, module);
230   }
231 }
232 
233 PackageEntry* PackageEntryTable::lookup(Symbol* name, ModuleEntry* module) {
234   MutexLocker ml(Module_lock);
235   PackageEntry* p = locked_lookup_only(name);
236   if (p != NULL) {
237     return p;
238   } else {
239     assert(module != NULL, &quot;module should never be null&quot;);
240     PackageEntry* entry = new_entry(compute_hash(name), name, module);
241     add_entry(index_for(name), entry);
242     return entry;
243   }
244 }
245 
246 PackageEntry* PackageEntryTable::lookup_only(Symbol* name) {
247   assert(!Module_lock-&gt;owned_by_self(), &quot;should not have the Module_lock - use locked_lookup_only&quot;);
<span class="line-modified">248   MutexLockerEx ml(Module_lock);</span>
249   return locked_lookup_only(name);
250 }
251 
252 PackageEntry* PackageEntryTable::locked_lookup_only(Symbol* name) {
253   assert(Module_lock-&gt;owned_by_self(), &quot;should have the Module_lock&quot;);
254   int index = index_for(name);
255   for (PackageEntry* p = bucket(index); p != NULL; p = p-&gt;next()) {
256     if (p-&gt;name()-&gt;fast_compare(name) == 0) {
257       return p;
258     }
259   }
260   return NULL;
261 }
262 
263 // Called when a define module for java.base is being processed.
264 // Verify the packages loaded thus far are in java.base&#39;s package list.
265 void PackageEntryTable::verify_javabase_packages(GrowableArray&lt;Symbol*&gt; *pkg_list) {
266   assert_lock_strong(Module_lock);
267   for (int i = 0; i &lt; table_size(); i++) {
268     for (PackageEntry* entry = bucket(i);
</pre>
</td>
<td>
<hr />
<pre>
228   if (locked_lookup_only(name) == NULL) {
229     locked_create_entry(name, module);
230   }
231 }
232 
233 PackageEntry* PackageEntryTable::lookup(Symbol* name, ModuleEntry* module) {
234   MutexLocker ml(Module_lock);
235   PackageEntry* p = locked_lookup_only(name);
236   if (p != NULL) {
237     return p;
238   } else {
239     assert(module != NULL, &quot;module should never be null&quot;);
240     PackageEntry* entry = new_entry(compute_hash(name), name, module);
241     add_entry(index_for(name), entry);
242     return entry;
243   }
244 }
245 
246 PackageEntry* PackageEntryTable::lookup_only(Symbol* name) {
247   assert(!Module_lock-&gt;owned_by_self(), &quot;should not have the Module_lock - use locked_lookup_only&quot;);
<span class="line-modified">248   MutexLocker ml(Module_lock);</span>
249   return locked_lookup_only(name);
250 }
251 
252 PackageEntry* PackageEntryTable::locked_lookup_only(Symbol* name) {
253   assert(Module_lock-&gt;owned_by_self(), &quot;should have the Module_lock&quot;);
254   int index = index_for(name);
255   for (PackageEntry* p = bucket(index); p != NULL; p = p-&gt;next()) {
256     if (p-&gt;name()-&gt;fast_compare(name) == 0) {
257       return p;
258     }
259   }
260   return NULL;
261 }
262 
263 // Called when a define module for java.base is being processed.
264 // Verify the packages loaded thus far are in java.base&#39;s package list.
265 void PackageEntryTable::verify_javabase_packages(GrowableArray&lt;Symbol*&gt; *pkg_list) {
266   assert_lock_strong(Module_lock);
267   for (int i = 0; i &lt; table_size(); i++) {
268     for (PackageEntry* entry = bucket(i);
</pre>
</td>
</tr>
</table>
<center><a href="modules.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="placeholders.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>