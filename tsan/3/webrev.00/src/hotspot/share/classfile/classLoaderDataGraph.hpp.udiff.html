<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/classfile/classLoaderDataGraph.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="classLoaderDataGraph.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="classLoaderDataGraph.inline.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/classLoaderDataGraph.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -39,16 +39,12 @@</span>
    friend class ClassLoaderDataGraphKlassIteratorStatic;
    friend class ClassLoaderDataGraphIterator;
    friend class VMStructs;
   private:
    // All CLDs (except the null CLD) can be reached by walking _head-&gt;_next-&gt;...
<span class="udiff-line-modified-removed">-   static ClassLoaderData* _head;</span>
<span class="udiff-line-modified-added">+   static ClassLoaderData* volatile _head;</span>
    static ClassLoaderData* _unloading;
<span class="udiff-line-removed">-   // CMS support.</span>
<span class="udiff-line-removed">-   static ClassLoaderData* _saved_head;</span>
<span class="udiff-line-removed">-   static ClassLoaderData* _saved_unloading;</span>
<span class="udiff-line-removed">-   static bool _should_purge;</span>
  
    // Set if there&#39;s anything to purge in the deallocate lists or previous versions
    // during a safepoint after class unloading in a full GC.
    static bool _should_clean_deallocate_lists;
    static bool _safepoint_cleanup_needed;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -66,10 +62,11 @@</span>
   public:
    static ClassLoaderData* find_or_create(Handle class_loader);
    static void clean_module_and_package_info();
    static void purge();
    static void clear_claimed_marks();
<span class="udiff-line-added">+   static void clear_claimed_marks(int claim);</span>
    // Iteration through CLDG inside a safepoint; GC support
    static void cld_do(CLDClosure* cl);
    static void cld_unloading_do(CLDClosure* cl);
    static void roots_cld_do(CLDClosure* strong, CLDClosure* weak);
    static void always_strong_cld_do(CLDClosure* cl);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -110,33 +107,19 @@</span>
    static void adjust_saved_class(ClassLoaderData* cld);
    static void adjust_saved_class(Klass* klass);
  
    static void verify_dictionary();
    static void print_dictionary(outputStream* st);
<span class="udiff-line-modified-removed">-   static void print_dictionary_statistics(outputStream* st);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // CMS support.</span>
<span class="udiff-line-removed">-   static void remember_new_clds(bool remember) { _saved_head = (remember ? _head : NULL); }</span>
<span class="udiff-line-removed">-   static GrowableArray&lt;ClassLoaderData*&gt;* new_clds();</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static void set_should_purge(bool b) { _should_purge = b; }</span>
<span class="udiff-line-removed">-   static void purge_if_needed() {</span>
<span class="udiff-line-removed">-     // Only purge the CLDG for CMS if concurrent sweep is complete.</span>
<span class="udiff-line-removed">-     if (_should_purge) {</span>
<span class="udiff-line-removed">-       purge();</span>
<span class="udiff-line-removed">-       // reset for next time.</span>
<span class="udiff-line-removed">-       set_should_purge(false);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-modified-added">+   static void print_table_statistics(outputStream* st);</span>
  
<span class="udiff-line-modified-removed">-   static int resize_if_needed();</span>
<span class="udiff-line-modified-added">+   static int resize_dictionaries();</span>
  
    static bool has_metaspace_oom()           { return _metaspace_oom; }
    static void set_metaspace_oom(bool value) { _metaspace_oom = value; }
  
    static void print_on(outputStream * const out) PRODUCT_RETURN;
<span class="udiff-line-modified-removed">-   static void print() { print_on(tty); }</span>
<span class="udiff-line-modified-added">+   static void print();</span>
    static void verify();
  
    // instance and array class counters
    static inline size_t num_instance_classes();
    static inline size_t num_array_classes();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -155,10 +138,11 @@</span>
  };
  
  class LockedClassesDo : public KlassClosure {
    typedef void (*classes_do_func_t)(Klass*);
    classes_do_func_t _function;
<span class="udiff-line-added">+   bool _do_lock;</span>
  public:
    LockedClassesDo();  // For callers who provide their own do_klass
    LockedClassesDo(classes_do_func_t function);
    ~LockedClassesDo();
  
</pre>
<center><a href="classLoaderDataGraph.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="classLoaderDataGraph.inline.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>