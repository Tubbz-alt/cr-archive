<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/opto/addnode.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../oops/weakHandle.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="addnode.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/addnode.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 912     // MIN2(x+c0 or x+c1 which less, z).
 913     return new MinINode(phase-&gt;transform(new AddINode(x,phase-&gt;intcon(MIN2(x_off,y_off)))),r-&gt;in(2));
 914   } else {
 915     // See if covers: MIN2(x+c0,y+c1)
 916     if( !phase-&gt;eqv(x,y) ) return NULL;
 917     // If (y == x) transform MIN2(x+c0,x+c1) into x+c0 or x+c1 which less.
 918     return new AddINode(x,phase-&gt;intcon(MIN2(x_off,y_off)));
 919   }
 920 
 921 }
 922 
 923 //------------------------------add_ring---------------------------------------
 924 // Supplied function returns the sum of the inputs.
 925 const Type *MinINode::add_ring( const Type *t0, const Type *t1 ) const {
 926   const TypeInt *r0 = t0-&gt;is_int(); // Handy access
 927   const TypeInt *r1 = t1-&gt;is_int();
 928 
 929   // Otherwise just MIN them bits.
 930   return TypeInt::make( MIN2(r0-&gt;_lo,r1-&gt;_lo), MIN2(r0-&gt;_hi,r1-&gt;_hi), MAX2(r0-&gt;_widen,r1-&gt;_widen) );
 931 }
























































































</pre>
</td>
<td>
<hr />
<pre>
 912     // MIN2(x+c0 or x+c1 which less, z).
 913     return new MinINode(phase-&gt;transform(new AddINode(x,phase-&gt;intcon(MIN2(x_off,y_off)))),r-&gt;in(2));
 914   } else {
 915     // See if covers: MIN2(x+c0,y+c1)
 916     if( !phase-&gt;eqv(x,y) ) return NULL;
 917     // If (y == x) transform MIN2(x+c0,x+c1) into x+c0 or x+c1 which less.
 918     return new AddINode(x,phase-&gt;intcon(MIN2(x_off,y_off)));
 919   }
 920 
 921 }
 922 
 923 //------------------------------add_ring---------------------------------------
 924 // Supplied function returns the sum of the inputs.
 925 const Type *MinINode::add_ring( const Type *t0, const Type *t1 ) const {
 926   const TypeInt *r0 = t0-&gt;is_int(); // Handy access
 927   const TypeInt *r1 = t1-&gt;is_int();
 928 
 929   // Otherwise just MIN them bits.
 930   return TypeInt::make( MIN2(r0-&gt;_lo,r1-&gt;_lo), MIN2(r0-&gt;_hi,r1-&gt;_hi), MAX2(r0-&gt;_widen,r1-&gt;_widen) );
 931 }
<span class="line-added"> 932 </span>
<span class="line-added"> 933 //------------------------------add_ring---------------------------------------</span>
<span class="line-added"> 934 const Type *MinFNode::add_ring( const Type *t0, const Type *t1 ) const {</span>
<span class="line-added"> 935   const TypeF *r0 = t0-&gt;is_float_constant();</span>
<span class="line-added"> 936   const TypeF *r1 = t1-&gt;is_float_constant();</span>
<span class="line-added"> 937 </span>
<span class="line-added"> 938   if (r0-&gt;is_nan()) {</span>
<span class="line-added"> 939     return r0;</span>
<span class="line-added"> 940   }</span>
<span class="line-added"> 941   if (r1-&gt;is_nan()) {</span>
<span class="line-added"> 942     return r1;</span>
<span class="line-added"> 943   }</span>
<span class="line-added"> 944 </span>
<span class="line-added"> 945   float f0 = r0-&gt;getf();</span>
<span class="line-added"> 946   float f1 = r1-&gt;getf();</span>
<span class="line-added"> 947   if (f0 != 0.0f || f1 != 0.0f) {</span>
<span class="line-added"> 948     return f0 &lt; f1 ? r0 : r1;</span>
<span class="line-added"> 949   }</span>
<span class="line-added"> 950 </span>
<span class="line-added"> 951   // handle min of 0.0, -0.0 case.</span>
<span class="line-added"> 952   return (jint_cast(f0) &lt; jint_cast(f1)) ? r0 : r1;</span>
<span class="line-added"> 953 }</span>
<span class="line-added"> 954 </span>
<span class="line-added"> 955 //------------------------------add_ring---------------------------------------</span>
<span class="line-added"> 956 const Type *MinDNode::add_ring( const Type *t0, const Type *t1 ) const {</span>
<span class="line-added"> 957   const TypeD *r0 = t0-&gt;is_double_constant();</span>
<span class="line-added"> 958   const TypeD *r1 = t1-&gt;is_double_constant();</span>
<span class="line-added"> 959 </span>
<span class="line-added"> 960   if (r0-&gt;is_nan()) {</span>
<span class="line-added"> 961     return r0;</span>
<span class="line-added"> 962   }</span>
<span class="line-added"> 963   if (r1-&gt;is_nan()) {</span>
<span class="line-added"> 964     return r1;</span>
<span class="line-added"> 965   }</span>
<span class="line-added"> 966 </span>
<span class="line-added"> 967   double d0 = r0-&gt;getd();</span>
<span class="line-added"> 968   double d1 = r1-&gt;getd();</span>
<span class="line-added"> 969   if (d0 != 0.0 || d1 != 0.0) {</span>
<span class="line-added"> 970     return d0 &lt; d1 ? r0 : r1;</span>
<span class="line-added"> 971   }</span>
<span class="line-added"> 972 </span>
<span class="line-added"> 973   // handle min of 0.0, -0.0 case.</span>
<span class="line-added"> 974   return (jlong_cast(d0) &lt; jlong_cast(d1)) ? r0 : r1;</span>
<span class="line-added"> 975 }</span>
<span class="line-added"> 976 </span>
<span class="line-added"> 977 //------------------------------add_ring---------------------------------------</span>
<span class="line-added"> 978 const Type *MaxFNode::add_ring( const Type *t0, const Type *t1 ) const {</span>
<span class="line-added"> 979   const TypeF *r0 = t0-&gt;is_float_constant();</span>
<span class="line-added"> 980   const TypeF *r1 = t1-&gt;is_float_constant();</span>
<span class="line-added"> 981 </span>
<span class="line-added"> 982   if (r0-&gt;is_nan()) {</span>
<span class="line-added"> 983     return r0;</span>
<span class="line-added"> 984   }</span>
<span class="line-added"> 985   if (r1-&gt;is_nan()) {</span>
<span class="line-added"> 986     return r1;</span>
<span class="line-added"> 987   }</span>
<span class="line-added"> 988 </span>
<span class="line-added"> 989   float f0 = r0-&gt;getf();</span>
<span class="line-added"> 990   float f1 = r1-&gt;getf();</span>
<span class="line-added"> 991   if (f0 != 0.0f || f1 != 0.0f) {</span>
<span class="line-added"> 992     return f0 &gt; f1 ? r0 : r1;</span>
<span class="line-added"> 993   }</span>
<span class="line-added"> 994 </span>
<span class="line-added"> 995   // handle max of 0.0,-0.0 case.</span>
<span class="line-added"> 996   return (jint_cast(f0) &gt; jint_cast(f1)) ? r0 : r1;</span>
<span class="line-added"> 997 }</span>
<span class="line-added"> 998 </span>
<span class="line-added"> 999 //------------------------------add_ring---------------------------------------</span>
<span class="line-added">1000 const Type *MaxDNode::add_ring( const Type *t0, const Type *t1 ) const {</span>
<span class="line-added">1001   const TypeD *r0 = t0-&gt;is_double_constant();</span>
<span class="line-added">1002   const TypeD *r1 = t1-&gt;is_double_constant();</span>
<span class="line-added">1003 </span>
<span class="line-added">1004   if (r0-&gt;is_nan()) {</span>
<span class="line-added">1005     return r0;</span>
<span class="line-added">1006   }</span>
<span class="line-added">1007   if (r1-&gt;is_nan()) {</span>
<span class="line-added">1008     return r1;</span>
<span class="line-added">1009   }</span>
<span class="line-added">1010 </span>
<span class="line-added">1011   double d0 = r0-&gt;getd();</span>
<span class="line-added">1012   double d1 = r1-&gt;getd();</span>
<span class="line-added">1013   if (d0 != 0.0 || d1 != 0.0) {</span>
<span class="line-added">1014     return d0 &gt; d1 ? r0 : r1;</span>
<span class="line-added">1015   }</span>
<span class="line-added">1016 </span>
<span class="line-added">1017   // handle max of 0.0, -0.0 case.</span>
<span class="line-added">1018   return (jlong_cast(d0) &gt; jlong_cast(d1)) ? r0 : r1;</span>
<span class="line-added">1019 }</span>
</pre>
</td>
</tr>
</table>
<center><a href="../oops/weakHandle.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="addnode.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>