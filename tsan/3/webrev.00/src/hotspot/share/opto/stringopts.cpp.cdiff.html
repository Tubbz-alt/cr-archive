<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/opto/stringopts.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="split_if.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="subnode.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/stringopts.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 377,11 ***</span>
  
  Node_List PhaseStringOpts::collect_toString_calls() {
    Node_List string_calls;
    Node_List worklist;
  
<span class="line-modified">!   _visited.Clear();</span>
  
    // Prime the worklist
    for (uint i = 1; i &lt; C-&gt;root()-&gt;len(); i++) {
      Node* n = C-&gt;root()-&gt;in(i);
      if (n != NULL &amp;&amp; !_visited.test_set(n-&gt;_idx)) {
<span class="line-new-header">--- 377,11 ---</span>
  
  Node_List PhaseStringOpts::collect_toString_calls() {
    Node_List string_calls;
    Node_List worklist;
  
<span class="line-modified">!   _visited.clear();</span>
  
    // Prime the worklist
    for (uint i = 1; i &lt; C-&gt;root()-&gt;len(); i++) {
      Node* n = C-&gt;root()-&gt;in(i);
      if (n != NULL &amp;&amp; !_visited.test_set(n-&gt;_idx)) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1031,11 ***</span>
    if (fail) return !fail;
  
    // Validate that all these results produced are contained within
    // this cluster of objects.  First collect all the results produced
    // by calls in the region.
<span class="line-modified">!   _stringopts-&gt;_visited.Clear();</span>
    Node_List worklist;
    Node* final_result = _end-&gt;proj_out_or_null(TypeFunc::Parms);
    for (uint i = 0; i &lt; _control.size(); i++) {
      CallNode* cnode = _control.at(i)-&gt;isa_Call();
      if (cnode != NULL) {
<span class="line-new-header">--- 1031,11 ---</span>
    if (fail) return !fail;
  
    // Validate that all these results produced are contained within
    // this cluster of objects.  First collect all the results produced
    // by calls in the region.
<span class="line-modified">!   _stringopts-&gt;_visited.clear();</span>
    Node_List worklist;
    Node* final_result = _end-&gt;proj_out_or_null(TypeFunc::Parms);
    for (uint i = 0; i &lt; _control.size(); i++) {
      CallNode* cnode = _control.at(i)-&gt;isa_Call();
      if (cnode != NULL) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1210,11 ***</span>
      index-&gt;init_req(1, __ intcon(0));
      kit.gvn().set_type(index, TypeInt::INT);
      kit.set_control(loop);
      Node* sizeTable = fetch_static_field(kit, size_table_field);
  
<span class="line-removed">-     sizeTable = kit.access_resolve(sizeTable, ACCESS_READ);</span>
      Node* value = kit.load_array_element(NULL, sizeTable, index, TypeAryPtr::INTS);
      C-&gt;record_for_igvn(value);
      Node* limit = __ CmpI(phi, value);
      Node* limitb = __ Bool(limit, BoolTest::le);
      IfNode* iff2 = kit.create_and_map_if(kit.control(), limitb, PROB_MIN, COUNT_UNKNOWN);
<span class="line-new-header">--- 1210,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1546,11 ***</span>
  }
  
  // Compress copy contents of the byte/char String str into dst_array starting at index start.
  Node* PhaseStringOpts::copy_string(GraphKit&amp; kit, Node* str, Node* dst_array, Node* dst_coder, Node* start) {
    Node* src_array = kit.load_String_value(str, true);
<span class="line-removed">-   src_array = kit.access_resolve(src_array, ACCESS_READ);</span>
  
    IdealKit ideal(&amp;kit, true, true);
    IdealVariable count(ideal); __ declarations_done();
  
    if (str-&gt;is_Con()) {
<span class="line-new-header">--- 1545,10 ---</span>
</pre>
<center><a href="split_if.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="subnode.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>