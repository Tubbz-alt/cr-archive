<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/opto/convertnode.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="compile.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="convertnode.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/convertnode.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
514 Node* RoundDoubleNode::Identity(PhaseGVN* phase) {
515   assert(Matcher::strict_fp_requires_explicit_rounding, &quot;should only generate for Intel&quot;);
516   // Do not round constants
517   if (phase-&gt;type(in(1))-&gt;base() == Type::DoubleCon)  return in(1);
518   int op = in(1)-&gt;Opcode();
519   // Redundant rounding
520   if( op == Op_RoundDouble ) return in(1);
521   // Already rounded
522   if( op == Op_Parm ) return in(1);
523   if( op == Op_LoadD ) return in(1);
524   if( op == Op_ConvF2D ) return in(1);
525   if( op == Op_ConvI2D ) return in(1);
526   return this;
527 }
528 
529 //------------------------------Value------------------------------------------
530 const Type* RoundDoubleNode::Value(PhaseGVN* phase) const {
531   return phase-&gt;type( in(1) );
532 }
533 





534 












</pre>
</td>
<td>
<hr />
<pre>
514 Node* RoundDoubleNode::Identity(PhaseGVN* phase) {
515   assert(Matcher::strict_fp_requires_explicit_rounding, &quot;should only generate for Intel&quot;);
516   // Do not round constants
517   if (phase-&gt;type(in(1))-&gt;base() == Type::DoubleCon)  return in(1);
518   int op = in(1)-&gt;Opcode();
519   // Redundant rounding
520   if( op == Op_RoundDouble ) return in(1);
521   // Already rounded
522   if( op == Op_Parm ) return in(1);
523   if( op == Op_LoadD ) return in(1);
524   if( op == Op_ConvF2D ) return in(1);
525   if( op == Op_ConvI2D ) return in(1);
526   return this;
527 }
528 
529 //------------------------------Value------------------------------------------
530 const Type* RoundDoubleNode::Value(PhaseGVN* phase) const {
531   return phase-&gt;type( in(1) );
532 }
533 
<span class="line-added">534 //=============================================================================</span>
<span class="line-added">535 RoundDoubleModeNode* RoundDoubleModeNode::make(PhaseGVN&amp; gvn, Node* arg, RoundDoubleModeNode::RoundingMode rmode) {</span>
<span class="line-added">536   ConINode* rm = gvn.intcon(rmode);</span>
<span class="line-added">537   return new RoundDoubleModeNode(arg, (Node *)rm);</span>
<span class="line-added">538 }</span>
539 
<span class="line-added">540 //------------------------------Identity---------------------------------------</span>
<span class="line-added">541 // Remove redundant roundings.</span>
<span class="line-added">542 Node* RoundDoubleModeNode::Identity(PhaseGVN* phase) {</span>
<span class="line-added">543   int op = in(1)-&gt;Opcode();</span>
<span class="line-added">544   // Redundant rounding e.g. floor(ceil(n)) -&gt; ceil(n)</span>
<span class="line-added">545   if(op == Op_RoundDoubleMode) return in(1);</span>
<span class="line-added">546   return this;</span>
<span class="line-added">547 }</span>
<span class="line-added">548 const Type* RoundDoubleModeNode::Value(PhaseGVN* phase) const {</span>
<span class="line-added">549   return Type::DOUBLE;</span>
<span class="line-added">550 }</span>
<span class="line-added">551 //=============================================================================</span>
</pre>
</td>
</tr>
</table>
<center><a href="compile.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="convertnode.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>