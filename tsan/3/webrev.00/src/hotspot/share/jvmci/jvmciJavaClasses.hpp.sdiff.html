<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jvmci/jvmciJavaClasses.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmciJavaClasses.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmciRuntime.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jvmci/jvmciJavaClasses.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 #ifndef SHARE_JVMCI_JVMCIJAVACLASSES_HPP
 25 #define SHARE_JVMCI_JVMCIJAVACLASSES_HPP
 26 
<span class="line-modified"> 27 #include &quot;classfile/systemDictionary.hpp&quot;</span>
<span class="line-modified"> 28 #include &quot;oops/access.hpp&quot;</span>
<span class="line-modified"> 29 #include &quot;oops/instanceMirrorKlass.hpp&quot;</span>
<span class="line-modified"> 30 #include &quot;oops/oop.hpp&quot;</span>































































































































































































































































































































































































































































































 31 
<span class="line-removed"> 32 class JVMCIJavaClasses : AllStatic {</span>
 33  public:




















 34   static void compute_offsets(TRAPS);



 35 };
 36 
<span class="line-modified"> 37 /* This macro defines the structure of the JVMCI classes accessed from VM code.</span>
<span class="line-modified"> 38  * It will generate classes with accessors similar to javaClasses.hpp, but with specializations for oops, Handles and jni handles.</span>



















































 39  *
<span class="line-modified"> 40  * The public interface of these classes will look like this:</span>
<span class="line-modified"> 41 </span>
<span class="line-modified"> 42  * class StackSlot : AllStatic {</span>
<span class="line-modified"> 43  * public:</span>
<span class="line-modified"> 44  *   static Klass* klass();</span>
<span class="line-modified"> 45  *   static jint  index(oop obj);</span>
<span class="line-modified"> 46  *   static jint  index(Handle obj);</span>
<span class="line-modified"> 47  *   static jint  index(jobject obj);</span>
<span class="line-modified"> 48  *   static void set_index(oop obj, jint x);</span>
<span class="line-modified"> 49  *   static void set_index(Handle obj, jint x);</span>
<span class="line-modified"> 50  *   static void set_index(jobject obj, jint x);</span>







 51  * };
<span class="line-removed"> 52  *</span>
 53  */


 54 
<span class="line-modified"> 55 #define COMPILER_CLASSES_DO(start_class, end_class, char_field, int_field, boolean_field, long_field, float_field, oop_field, typeArrayOop_field, objArrayOop_field, static_oop_field, static_objArrayOop_field, static_int_field, static_boolean_field) \</span>
<span class="line-modified"> 56   start_class(Architecture)                                                                                                                                    \</span>
<span class="line-modified"> 57     oop_field(Architecture, wordKind, &quot;Ljdk/vm/ci/meta/PlatformKind;&quot;)                                                                                         \</span>
<span class="line-modified"> 58   end_class                                                                                                                                                    \</span>
<span class="line-modified"> 59   start_class(TargetDescription)                                                                                                                               \</span>
<span class="line-removed"> 60     oop_field(TargetDescription, arch, &quot;Ljdk/vm/ci/code/Architecture;&quot;)                                                                                        \</span>
<span class="line-removed"> 61   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 62   start_class(HotSpotResolvedObjectTypeImpl)                                                                                                                   \</span>
<span class="line-removed"> 63     oop_field(HotSpotResolvedObjectTypeImpl, javaClass, &quot;Ljava/lang/Class;&quot;)                                                                                   \</span>
<span class="line-removed"> 64   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 65   start_class(HotSpotResolvedJavaMethodImpl)                                                                                                                   \</span>
<span class="line-removed"> 66     long_field(HotSpotResolvedJavaMethodImpl, metaspaceMethod)                                                                                                 \</span>
<span class="line-removed"> 67   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 68   start_class(InstalledCode)                                                                                                                                   \</span>
<span class="line-removed"> 69     long_field(InstalledCode, address)                                                                                                                         \</span>
<span class="line-removed"> 70     long_field(InstalledCode, entryPoint)                                                                                                                      \</span>
<span class="line-removed"> 71     long_field(InstalledCode, version)                                                                                                                         \</span>
<span class="line-removed"> 72     oop_field(InstalledCode, name, &quot;Ljava/lang/String;&quot;)                                                                                                       \</span>
<span class="line-removed"> 73   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 74   start_class(HotSpotInstalledCode)                                                                                                                            \</span>
<span class="line-removed"> 75     int_field(HotSpotInstalledCode, size)                                                                                                                      \</span>
<span class="line-removed"> 76     long_field(HotSpotInstalledCode, codeStart)                                                                                                                \</span>
<span class="line-removed"> 77     int_field(HotSpotInstalledCode, codeSize)                                                                                                                  \</span>
<span class="line-removed"> 78   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 79   start_class(HotSpotNmethod)                                                                                                                                  \</span>
<span class="line-removed"> 80     boolean_field(HotSpotNmethod, isDefault)                                                                                                                   \</span>
<span class="line-removed"> 81   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 82   start_class(HotSpotCompiledCode)                                                                                                                             \</span>
<span class="line-removed"> 83     oop_field(HotSpotCompiledCode, name, &quot;Ljava/lang/String;&quot;)                                                                                                 \</span>
<span class="line-removed"> 84     typeArrayOop_field(HotSpotCompiledCode, targetCode, &quot;[B&quot;)                                                                                                  \</span>
<span class="line-removed"> 85     int_field(HotSpotCompiledCode, targetCodeSize)                                                                                                             \</span>
<span class="line-removed"> 86     objArrayOop_field(HotSpotCompiledCode, sites, &quot;[Ljdk/vm/ci/code/site/Site;&quot;)                                                                               \</span>
<span class="line-removed"> 87     objArrayOop_field(HotSpotCompiledCode, assumptions, &quot;[Ljdk/vm/ci/meta/Assumptions$Assumption;&quot;)                                                            \</span>
<span class="line-removed"> 88     objArrayOop_field(HotSpotCompiledCode, methods, &quot;[Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                    \</span>
<span class="line-removed"> 89     objArrayOop_field(HotSpotCompiledCode, comments, &quot;[Ljdk/vm/ci/hotspot/HotSpotCompiledCode$Comment;&quot;)                                                       \</span>
<span class="line-removed"> 90     typeArrayOop_field(HotSpotCompiledCode, dataSection, &quot;[B&quot;)                                                                                                 \</span>
<span class="line-removed"> 91     int_field(HotSpotCompiledCode, dataSectionAlignment)                                                                                                       \</span>
<span class="line-removed"> 92     objArrayOop_field(HotSpotCompiledCode, dataSectionPatches, &quot;[Ljdk/vm/ci/code/site/DataPatch;&quot;)                                                             \</span>
<span class="line-removed"> 93     boolean_field(HotSpotCompiledCode, isImmutablePIC)                                                                                                         \</span>
<span class="line-removed"> 94     int_field(HotSpotCompiledCode, totalFrameSize)                                                                                                             \</span>
<span class="line-removed"> 95     oop_field(HotSpotCompiledCode, deoptRescueSlot, &quot;Ljdk/vm/ci/code/StackSlot;&quot;)                                                                              \</span>
<span class="line-removed"> 96   end_class                                                                                                                                                    \</span>
<span class="line-removed"> 97   start_class(HotSpotCompiledCode_Comment)                                                                                                                     \</span>
<span class="line-removed"> 98     oop_field(HotSpotCompiledCode_Comment, text, &quot;Ljava/lang/String;&quot;)                                                                                         \</span>
<span class="line-removed"> 99     int_field(HotSpotCompiledCode_Comment, pcOffset)                                                                                                           \</span>
<span class="line-removed">100   end_class                                                                                                                                                    \</span>
<span class="line-removed">101   start_class(HotSpotCompiledNmethod)                                                                                                                          \</span>
<span class="line-removed">102     oop_field(HotSpotCompiledNmethod, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)                                                                 \</span>
<span class="line-removed">103     oop_field(HotSpotCompiledNmethod, installationFailureMessage, &quot;Ljava/lang/String;&quot;)                                                                        \</span>
<span class="line-removed">104     int_field(HotSpotCompiledNmethod, entryBCI)                                                                                                                \</span>
<span class="line-removed">105     int_field(HotSpotCompiledNmethod, id)                                                                                                                      \</span>
<span class="line-removed">106     long_field(HotSpotCompiledNmethod, jvmciEnv)                                                                                                               \</span>
<span class="line-removed">107     boolean_field(HotSpotCompiledNmethod, hasUnsafeAccess)                                                                                                     \</span>
<span class="line-removed">108   end_class                                                                                                                                                    \</span>
<span class="line-removed">109   start_class(HotSpotJVMCIMetaAccessContext)                                                                                                                   \</span>
<span class="line-removed">110     static_objArrayOop_field(HotSpotJVMCIMetaAccessContext, allContexts, &quot;[Ljava/lang/ref/WeakReference;&quot;)                                                     \</span>
<span class="line-removed">111     objArrayOop_field(HotSpotJVMCIMetaAccessContext, metadataRoots, &quot;[Ljava/lang/Object;&quot;)                                                                     \</span>
<span class="line-removed">112   end_class                                                                                                                                                    \</span>
<span class="line-removed">113   start_class(HotSpotForeignCallTarget)                                                                                                                        \</span>
<span class="line-removed">114     long_field(HotSpotForeignCallTarget, address)                                                                                                              \</span>
<span class="line-removed">115   end_class                                                                                                                                                    \</span>
<span class="line-removed">116   start_class(VMField)                                                                                                                                         \</span>
<span class="line-removed">117     oop_field(VMField, name, &quot;Ljava/lang/String;&quot;)                                                                                                             \</span>
<span class="line-removed">118     oop_field(VMField, type, &quot;Ljava/lang/String;&quot;)                                                                                                             \</span>
<span class="line-removed">119     long_field(VMField, offset)                                                                                                                                \</span>
<span class="line-removed">120     long_field(VMField, address)                                                                                                                               \</span>
<span class="line-removed">121     oop_field(VMField, value, &quot;Ljava/lang/Object;&quot;)                                                                                                            \</span>
<span class="line-removed">122   end_class                                                                                                                                                    \</span>
<span class="line-removed">123   start_class(VMFlag)                                                                                                                                          \</span>
<span class="line-removed">124     oop_field(VMFlag, name, &quot;Ljava/lang/String;&quot;)                                                                                                              \</span>
<span class="line-removed">125     oop_field(VMFlag, type, &quot;Ljava/lang/String;&quot;)                                                                                                              \</span>
<span class="line-removed">126     oop_field(VMFlag, value, &quot;Ljava/lang/Object;&quot;)                                                                                                             \</span>
<span class="line-removed">127   end_class                                                                                                                                                    \</span>
<span class="line-removed">128   start_class(VMIntrinsicMethod)                                                                                                                               \</span>
<span class="line-removed">129     oop_field(VMIntrinsicMethod, declaringClass, &quot;Ljava/lang/String;&quot;)                                                                                         \</span>
<span class="line-removed">130     oop_field(VMIntrinsicMethod, name, &quot;Ljava/lang/String;&quot;)                                                                                                   \</span>
<span class="line-removed">131     oop_field(VMIntrinsicMethod, descriptor, &quot;Ljava/lang/String;&quot;)                                                                                             \</span>
<span class="line-removed">132     int_field(VMIntrinsicMethod, id)                                                                                                                           \</span>
<span class="line-removed">133   end_class                                                                                                                                                    \</span>
<span class="line-removed">134   start_class(Assumptions_NoFinalizableSubclass)                                                                                                               \</span>
<span class="line-removed">135     oop_field(Assumptions_NoFinalizableSubclass, receiverType, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                            \</span>
<span class="line-removed">136   end_class                                                                                                                                                    \</span>
<span class="line-removed">137   start_class(Assumptions_ConcreteSubtype)                                                                                                                     \</span>
<span class="line-removed">138     oop_field(Assumptions_ConcreteSubtype, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                       \</span>
<span class="line-removed">139     oop_field(Assumptions_ConcreteSubtype, subtype, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                       \</span>
<span class="line-removed">140   end_class                                                                                                                                                    \</span>
<span class="line-removed">141   start_class(Assumptions_LeafType)                                                                                                                            \</span>
<span class="line-removed">142     oop_field(Assumptions_LeafType, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                              \</span>
<span class="line-removed">143   end_class                                                                                                                                                    \</span>
<span class="line-removed">144   start_class(Assumptions_ConcreteMethod)                                                                                                                      \</span>
<span class="line-removed">145     oop_field(Assumptions_ConcreteMethod, method, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                       \</span>
<span class="line-removed">146     oop_field(Assumptions_ConcreteMethod, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                        \</span>
<span class="line-removed">147     oop_field(Assumptions_ConcreteMethod, impl, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                         \</span>
<span class="line-removed">148   end_class                                                                                                                                                    \</span>
<span class="line-removed">149   start_class(Assumptions_CallSiteTargetValue)                                                                                                                 \</span>
<span class="line-removed">150     oop_field(Assumptions_CallSiteTargetValue, callSite, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)                                                                      \</span>
<span class="line-removed">151     oop_field(Assumptions_CallSiteTargetValue, methodHandle, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)                                                                  \</span>
<span class="line-removed">152   end_class                                                                                                                                                    \</span>
<span class="line-removed">153   start_class(site_Site)                                                                                                                                       \</span>
<span class="line-removed">154     int_field(site_Site, pcOffset)                                                                                                                             \</span>
<span class="line-removed">155   end_class                                                                                                                                                    \</span>
<span class="line-removed">156   start_class(site_Call)                                                                                                                                       \</span>
<span class="line-removed">157     oop_field(site_Call, target, &quot;Ljdk/vm/ci/meta/InvokeTarget;&quot;)                                                                                              \</span>
<span class="line-removed">158     oop_field(site_Call, debugInfo, &quot;Ljdk/vm/ci/code/DebugInfo;&quot;)                                                                                              \</span>
<span class="line-removed">159   end_class                                                                                                                                                    \</span>
<span class="line-removed">160   start_class(site_DataPatch)                                                                                                                                  \</span>
<span class="line-removed">161     oop_field(site_DataPatch, reference, &quot;Ljdk/vm/ci/code/site/Reference;&quot;)                                                                                    \</span>
<span class="line-removed">162   end_class                                                                                                                                                    \</span>
<span class="line-removed">163   start_class(site_ConstantReference)                                                                                                                          \</span>
<span class="line-removed">164     oop_field(site_ConstantReference, constant, &quot;Ljdk/vm/ci/meta/VMConstant;&quot;)                                                                                 \</span>
<span class="line-removed">165   end_class                                                                                                                                                    \</span>
<span class="line-removed">166   start_class(site_DataSectionReference)                                                                                                                       \</span>
<span class="line-removed">167     int_field(site_DataSectionReference, offset)                                                                                                               \</span>
<span class="line-removed">168   end_class                                                                                                                                                    \</span>
<span class="line-removed">169   start_class(site_InfopointReason)                                                                                                                            \</span>
<span class="line-removed">170     static_oop_field(site_InfopointReason, SAFEPOINT, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                                 \</span>
<span class="line-removed">171     static_oop_field(site_InfopointReason, CALL, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                                      \</span>
<span class="line-removed">172     static_oop_field(site_InfopointReason, IMPLICIT_EXCEPTION, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                        \</span>
<span class="line-removed">173   end_class                                                                                                                                                    \</span>
<span class="line-removed">174   start_class(site_Infopoint)                                                                                                                                  \</span>
<span class="line-removed">175     oop_field(site_Infopoint, debugInfo, &quot;Ljdk/vm/ci/code/DebugInfo;&quot;)                                                                                         \</span>
<span class="line-removed">176     oop_field(site_Infopoint, reason, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                                                 \</span>
<span class="line-removed">177   end_class                                                                                                                                                    \</span>
<span class="line-removed">178   start_class(site_ExceptionHandler)                                                                                                                           \</span>
<span class="line-removed">179     int_field(site_ExceptionHandler, handlerPos)                                                                                                               \</span>
<span class="line-removed">180   end_class                                                                                                                                                    \</span>
<span class="line-removed">181   start_class(site_Mark)                                                                                                                                       \</span>
<span class="line-removed">182     oop_field(site_Mark, id, &quot;Ljava/lang/Object;&quot;)                                                                                                             \</span>
<span class="line-removed">183   end_class                                                                                                                                                    \</span>
<span class="line-removed">184   start_class(HotSpotCompilationRequestResult)                                                                                                                 \</span>
<span class="line-removed">185     oop_field(HotSpotCompilationRequestResult, failureMessage, &quot;Ljava/lang/String;&quot;)                                                                           \</span>
<span class="line-removed">186     boolean_field(HotSpotCompilationRequestResult, retry)                                                                                                      \</span>
<span class="line-removed">187     int_field(HotSpotCompilationRequestResult, inlinedBytecodes)                                                                                               \</span>
<span class="line-removed">188   end_class                                                                                                                                                    \</span>
<span class="line-removed">189   start_class(DebugInfo)                                                                                                                                       \</span>
<span class="line-removed">190     oop_field(DebugInfo, bytecodePosition, &quot;Ljdk/vm/ci/code/BytecodePosition;&quot;)                                                                                \</span>
<span class="line-removed">191     oop_field(DebugInfo, referenceMap, &quot;Ljdk/vm/ci/code/ReferenceMap;&quot;)                                                                                        \</span>
<span class="line-removed">192     oop_field(DebugInfo, calleeSaveInfo, &quot;Ljdk/vm/ci/code/RegisterSaveLayout;&quot;)                                                                                \</span>
<span class="line-removed">193     objArrayOop_field(DebugInfo, virtualObjectMapping, &quot;[Ljdk/vm/ci/code/VirtualObject;&quot;)                                                                      \</span>
<span class="line-removed">194   end_class                                                                                                                                                    \</span>
<span class="line-removed">195   start_class(HotSpotReferenceMap)                                                                                                                             \</span>
<span class="line-removed">196     objArrayOop_field(HotSpotReferenceMap, objects, &quot;[Ljdk/vm/ci/code/Location;&quot;)                                                                              \</span>
<span class="line-removed">197     objArrayOop_field(HotSpotReferenceMap, derivedBase, &quot;[Ljdk/vm/ci/code/Location;&quot;)                                                                          \</span>
<span class="line-removed">198     typeArrayOop_field(HotSpotReferenceMap, sizeInBytes, &quot;[I&quot;)                                                                                                 \</span>
<span class="line-removed">199     int_field(HotSpotReferenceMap, maxRegisterSize)                                                                                                            \</span>
<span class="line-removed">200   end_class                                                                                                                                                    \</span>
<span class="line-removed">201   start_class(RegisterSaveLayout)                                                                                                                              \</span>
<span class="line-removed">202     objArrayOop_field(RegisterSaveLayout, registers, &quot;[Ljdk/vm/ci/code/Register;&quot;)                                                                             \</span>
<span class="line-removed">203     typeArrayOop_field(RegisterSaveLayout, slots, &quot;[I&quot;)                                                                                                        \</span>
<span class="line-removed">204   end_class                                                                                                                                                    \</span>
<span class="line-removed">205   start_class(BytecodeFrame)                                                                                                                                   \</span>
<span class="line-removed">206     objArrayOop_field(BytecodeFrame, values, &quot;[Ljdk/vm/ci/meta/JavaValue;&quot;)                                                                                    \</span>
<span class="line-removed">207     objArrayOop_field(BytecodeFrame, slotKinds, &quot;[Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                  \</span>
<span class="line-removed">208     int_field(BytecodeFrame, numLocals)                                                                                                                        \</span>
<span class="line-removed">209     int_field(BytecodeFrame, numStack)                                                                                                                         \</span>
<span class="line-removed">210     int_field(BytecodeFrame, numLocks)                                                                                                                         \</span>
<span class="line-removed">211     boolean_field(BytecodeFrame, rethrowException)                                                                                                             \</span>
<span class="line-removed">212     boolean_field(BytecodeFrame, duringCall)                                                                                                                   \</span>
<span class="line-removed">213     static_int_field(BytecodeFrame, UNKNOWN_BCI)                                                                                                               \</span>
<span class="line-removed">214     static_int_field(BytecodeFrame, UNWIND_BCI)                                                                                                                \</span>
<span class="line-removed">215     static_int_field(BytecodeFrame, BEFORE_BCI)                                                                                                                \</span>
<span class="line-removed">216     static_int_field(BytecodeFrame, AFTER_BCI)                                                                                                                 \</span>
<span class="line-removed">217     static_int_field(BytecodeFrame, AFTER_EXCEPTION_BCI)                                                                                                       \</span>
<span class="line-removed">218     static_int_field(BytecodeFrame, INVALID_FRAMESTATE_BCI)                                                                                                    \</span>
<span class="line-removed">219   end_class                                                                                                                                                    \</span>
<span class="line-removed">220   start_class(BytecodePosition)                                                                                                                                \</span>
<span class="line-removed">221     oop_field(BytecodePosition, caller, &quot;Ljdk/vm/ci/code/BytecodePosition;&quot;)                                                                                   \</span>
<span class="line-removed">222     oop_field(BytecodePosition, method, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                                 \</span>
<span class="line-removed">223     int_field(BytecodePosition, bci)                                                                                                                           \</span>
<span class="line-removed">224   end_class                                                                                                                                                    \</span>
<span class="line-removed">225   start_class(JavaConstant)                                                                                                                                    \</span>
<span class="line-removed">226   end_class                                                                                                                                                    \</span>
<span class="line-removed">227   start_class(PrimitiveConstant)                                                                                                                               \</span>
<span class="line-removed">228     oop_field(PrimitiveConstant, kind, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                            \</span>
<span class="line-removed">229     long_field(PrimitiveConstant, primitive)                                                                                                                   \</span>
<span class="line-removed">230   end_class                                                                                                                                                    \</span>
<span class="line-removed">231   start_class(RawConstant)                                                                                                                                     \</span>
<span class="line-removed">232     long_field(RawConstant, primitive)                                                                                                                         \</span>
<span class="line-removed">233   end_class                                                                                                                                                    \</span>
<span class="line-removed">234   start_class(NullConstant)                                                                                                                                    \</span>
<span class="line-removed">235   end_class                                                                                                                                                    \</span>
<span class="line-removed">236   start_class(HotSpotCompressedNullConstant)                                                                                                                   \</span>
<span class="line-removed">237   end_class                                                                                                                                                    \</span>
<span class="line-removed">238   start_class(HotSpotObjectConstantImpl)                                                                                                                       \</span>
<span class="line-removed">239     oop_field(HotSpotObjectConstantImpl, object, &quot;Ljava/lang/Object;&quot;)                                                                                         \</span>
<span class="line-removed">240     boolean_field(HotSpotObjectConstantImpl, compressed)                                                                                                       \</span>
<span class="line-removed">241   end_class                                                                                                                                                    \</span>
<span class="line-removed">242   start_class(HotSpotMetaspaceConstantImpl)                                                                                                                    \</span>
<span class="line-removed">243     oop_field(HotSpotMetaspaceConstantImpl, metaspaceObject, &quot;Ljdk/vm/ci/hotspot/MetaspaceWrapperObject;&quot;)                                                     \</span>
<span class="line-removed">244     boolean_field(HotSpotMetaspaceConstantImpl, compressed)                                                                                                    \</span>
<span class="line-removed">245   end_class                                                                                                                                                    \</span>
<span class="line-removed">246   start_class(HotSpotSentinelConstant)                                                                                                                         \</span>
<span class="line-removed">247   end_class                                                                                                                                                    \</span>
<span class="line-removed">248   start_class(JavaKind)                                                                                                                                        \</span>
<span class="line-removed">249     char_field(JavaKind, typeChar)                                                                                                                             \</span>
<span class="line-removed">250     static_oop_field(JavaKind, Boolean, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                           \</span>
<span class="line-removed">251     static_oop_field(JavaKind, Byte, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                              \</span>
<span class="line-removed">252     static_oop_field(JavaKind, Char, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                              \</span>
<span class="line-removed">253     static_oop_field(JavaKind, Short, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                             \</span>
<span class="line-removed">254     static_oop_field(JavaKind, Int, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                               \</span>
<span class="line-removed">255     static_oop_field(JavaKind, Long, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                              \</span>
<span class="line-removed">256   end_class                                                                                                                                                    \</span>
<span class="line-removed">257   start_class(ValueKind)                                                                                                                                       \</span>
<span class="line-removed">258     oop_field(ValueKind, platformKind, &quot;Ljdk/vm/ci/meta/PlatformKind;&quot;)                                                                                        \</span>
<span class="line-removed">259   end_class                                                                                                                                                    \</span>
<span class="line-removed">260   start_class(Value)                                                                                                                                           \</span>
<span class="line-removed">261     oop_field(Value, valueKind, &quot;Ljdk/vm/ci/meta/ValueKind;&quot;)                                                                                                  \</span>
<span class="line-removed">262     static_oop_field(Value, ILLEGAL, &quot;Ljdk/vm/ci/meta/AllocatableValue;&quot;)                                                                                      \</span>
<span class="line-removed">263   end_class                                                                                                                                                    \</span>
<span class="line-removed">264   start_class(RegisterValue)                                                                                                                                   \</span>
<span class="line-removed">265     oop_field(RegisterValue, reg, &quot;Ljdk/vm/ci/code/Register;&quot;)                                                                                                 \</span>
<span class="line-removed">266   end_class                                                                                                                                                    \</span>
<span class="line-removed">267   start_class(code_Location)                                                                                                                                   \</span>
<span class="line-removed">268     oop_field(code_Location, reg, &quot;Ljdk/vm/ci/code/Register;&quot;)                                                                                                 \</span>
<span class="line-removed">269     int_field(code_Location, offset)                                                                                                                           \</span>
<span class="line-removed">270   end_class                                                                                                                                                    \</span>
<span class="line-removed">271   start_class(code_Register)                                                                                                                                   \</span>
<span class="line-removed">272     int_field(code_Register, number)                                                                                                                           \</span>
<span class="line-removed">273     int_field(code_Register, encoding)                                                                                                                         \</span>
<span class="line-removed">274   end_class                                                                                                                                                    \</span>
<span class="line-removed">275   start_class(StackSlot)                                                                                                                                       \</span>
<span class="line-removed">276     int_field(StackSlot, offset)                                                                                                                               \</span>
<span class="line-removed">277     boolean_field(StackSlot, addFrameSize)                                                                                                                     \</span>
<span class="line-removed">278   end_class                                                                                                                                                    \</span>
<span class="line-removed">279   start_class(VirtualObject)                                                                                                                                   \</span>
<span class="line-removed">280     int_field(VirtualObject, id)                                                                                                                               \</span>
<span class="line-removed">281     oop_field(VirtualObject, type, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                                        \</span>
<span class="line-removed">282     objArrayOop_field(VirtualObject, values, &quot;[Ljdk/vm/ci/meta/JavaValue;&quot;)                                                                                    \</span>
<span class="line-removed">283     objArrayOop_field(VirtualObject, slotKinds, &quot;[Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                  \</span>
<span class="line-removed">284   end_class                                                                                                                                                    \</span>
<span class="line-removed">285   start_class(StackLockValue)                                                                                                                                  \</span>
<span class="line-removed">286     oop_field(StackLockValue, owner, &quot;Ljdk/vm/ci/meta/JavaValue;&quot;)                                                                                             \</span>
<span class="line-removed">287     oop_field(StackLockValue, slot, &quot;Ljdk/vm/ci/meta/AllocatableValue;&quot;)                                                                                       \</span>
<span class="line-removed">288     boolean_field(StackLockValue, eliminated)                                                                                                                  \</span>
<span class="line-removed">289   end_class                                                                                                                                                    \</span>
<span class="line-removed">290   start_class(HotSpotSpeculationLog)                                                                                                                           \</span>
<span class="line-removed">291     long_field(HotSpotSpeculationLog, lastFailed)                                                                                                              \</span>
<span class="line-removed">292   end_class                                                                                                                                                    \</span>
<span class="line-removed">293   start_class(HotSpotStackFrameReference)                                                                                                                      \</span>
<span class="line-removed">294     oop_field(HotSpotStackFrameReference, compilerToVM, &quot;Ljdk/vm/ci/hotspot/CompilerToVM;&quot;)                                                                    \</span>
<span class="line-removed">295     boolean_field(HotSpotStackFrameReference, objectsMaterialized)                                                                                             \</span>
<span class="line-removed">296     long_field(HotSpotStackFrameReference, stackPointer)                                                                                                       \</span>
<span class="line-removed">297     int_field(HotSpotStackFrameReference, frameNumber)                                                                                                         \</span>
<span class="line-removed">298     int_field(HotSpotStackFrameReference, bci)                                                                                                                 \</span>
<span class="line-removed">299     oop_field(HotSpotStackFrameReference, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)                                                             \</span>
<span class="line-removed">300     objArrayOop_field(HotSpotStackFrameReference, locals, &quot;[Ljava/lang/Object;&quot;)                                                                               \</span>
<span class="line-removed">301     typeArrayOop_field(HotSpotStackFrameReference, localIsVirtual, &quot;[Z&quot;)                                                                                       \</span>
<span class="line-removed">302   end_class                                                                                                                                                    \</span>
<span class="line-removed">303   start_class(HotSpotMetaData)                                                                                                                                 \</span>
<span class="line-removed">304     typeArrayOop_field(HotSpotMetaData, pcDescBytes, &quot;[B&quot;)                                                                                                     \</span>
<span class="line-removed">305     typeArrayOop_field(HotSpotMetaData, scopesDescBytes, &quot;[B&quot;)                                                                                                 \</span>
<span class="line-removed">306     typeArrayOop_field(HotSpotMetaData, relocBytes, &quot;[B&quot;)                                                                                                      \</span>
<span class="line-removed">307     typeArrayOop_field(HotSpotMetaData, exceptionBytes, &quot;[B&quot;)                                                                                                  \</span>
<span class="line-removed">308     typeArrayOop_field(HotSpotMetaData, oopMaps, &quot;[B&quot;)                                                                                                         \</span>
<span class="line-removed">309     objArrayOop_field(HotSpotMetaData, metadata, &quot;[Ljava/lang/Object;&quot;)                                                                                        \</span>
<span class="line-removed">310   end_class                                                                                                                                                    \</span>
<span class="line-removed">311   start_class(HotSpotConstantPool)                                                                                                                             \</span>
<span class="line-removed">312     long_field(HotSpotConstantPool, metaspaceConstantPool)                                                                                                     \</span>
<span class="line-removed">313   end_class                                                                                                                                                    \</span>
<span class="line-removed">314   start_class(HotSpotJVMCIRuntime)                                                                                                                             \</span>
<span class="line-removed">315     int_field(HotSpotJVMCIRuntime, compilationLevelAdjustment)                                                                                                 \</span>
<span class="line-removed">316   end_class                                                                                                                                                    \</span>
<span class="line-removed">317   /* end*/</span>
318 
<span class="line-modified">319 #define START_CLASS(name)                                                                                                                                      \</span>
<span class="line-modified">320 class name : AllStatic {                                                                                                                                       \</span>
<span class="line-modified">321   private:                                                                                                                                                     \</span>
<span class="line-modified">322     friend class JVMCICompiler;                                                                                                                                \</span>
<span class="line-removed">323     static void check(oop obj, const char* field_name, int offset);                                                                                            \</span>
<span class="line-removed">324     static void compute_offsets(TRAPS);                                                                                                                        \</span>
<span class="line-removed">325   public:                                                                                                                                                      \</span>
<span class="line-removed">326   static InstanceKlass* klass() { return SystemDictionary::name##_klass_is_loaded() ? SystemDictionary::name##_klass() : NULL; }</span>
327 
<span class="line-modified">328 #define END_CLASS };</span>

329 
<span class="line-modified">330 #define FIELD(name, type, accessor, cast)                                                                                                                         \</span>
<span class="line-removed">331     static int _##name##_offset;                                                                                                                                  \</span>
<span class="line-removed">332     static type name(oop obj)                   { check(obj, #name, _##name##_offset); return cast obj-&gt;accessor(_##name##_offset); }                             \</span>
<span class="line-removed">333     static type name(Handle obj)                { check(obj(), #name, _##name##_offset); return cast obj-&gt;accessor(_##name##_offset); }                           \</span>
<span class="line-removed">334     static type name(jobject obj);                                                                                                                                \</span>
<span class="line-removed">335     static void set_##name(oop obj, type x)     { check(obj, #name, _##name##_offset); obj-&gt;accessor##_put(_##name##_offset, x); }                                \</span>
<span class="line-removed">336     static void set_##name(Handle obj, type x)  { check(obj(), #name, _##name##_offset); obj-&gt;accessor##_put(_##name##_offset, x); }                              \</span>
<span class="line-removed">337     static void set_##name(jobject obj, type x);                                                                                                                  \</span>
338 
<span class="line-modified">339 #define EMPTY_CAST</span>
<span class="line-modified">340 #define CHAR_FIELD(klass, name) FIELD(name, jchar, char_field, EMPTY_CAST)</span>
<span class="line-modified">341 #define INT_FIELD(klass, name) FIELD(name, jint, int_field, EMPTY_CAST)</span>
<span class="line-modified">342 #define BOOLEAN_FIELD(klass, name) FIELD(name, jboolean, bool_field, EMPTY_CAST)</span>
<span class="line-modified">343 #define LONG_FIELD(klass, name) FIELD(name, jlong, long_field, EMPTY_CAST)</span>
<span class="line-modified">344 #define FLOAT_FIELD(klass, name) FIELD(name, jfloat, float_field, EMPTY_CAST)</span>
<span class="line-modified">345 #define OOP_FIELD(klass, name, signature) FIELD(name, oop, obj_field, EMPTY_CAST)</span>
<span class="line-modified">346 #define OBJARRAYOOP_FIELD(klass, name, signature) FIELD(name, objArrayOop, obj_field, (objArrayOop))</span>
<span class="line-modified">347 #define TYPEARRAYOOP_FIELD(klass, name, signature) FIELD(name, typeArrayOop, obj_field, (typeArrayOop))</span>
<span class="line-modified">348 #define STATIC_OOP_FIELD(klassName, name, signature) STATIC_OOPISH_FIELD(klassName, name, oop, signature)</span>
<span class="line-modified">349 #define STATIC_OBJARRAYOOP_FIELD(klassName, name, signature) STATIC_OOPISH_FIELD(klassName, name, objArrayOop, signature)</span>
<span class="line-modified">350 #define STATIC_OOPISH_FIELD(klassName, name, type, signature)                                                  \</span>
<span class="line-modified">351     static int _##name##_offset;                                                                               \</span>
<span class="line-modified">352     static type name();                                                                                        \</span>
<span class="line-modified">353     static void set_##name(type x);</span>
<span class="line-modified">354 #define STATIC_PRIMITIVE_FIELD(klassName, name, jtypename)                                                     \</span>
<span class="line-modified">355     static int _##name##_offset;                                                                               \</span>
<span class="line-modified">356     static jtypename name();                                                                                   \</span>
<span class="line-modified">357     static void set_##name(jtypename x);</span>
<span class="line-removed">358 </span>
<span class="line-removed">359 #define STATIC_INT_FIELD(klassName, name) STATIC_PRIMITIVE_FIELD(klassName, name, jint)</span>
<span class="line-removed">360 #define STATIC_BOOLEAN_FIELD(klassName, name) STATIC_PRIMITIVE_FIELD(klassName, name, jboolean)</span>
<span class="line-removed">361 </span>
<span class="line-removed">362 COMPILER_CLASSES_DO(START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OOP_FIELD, TYPEARRAYOOP_FIELD, OBJARRAYOOP_FIELD, STATIC_OOP_FIELD, STATIC_OBJARRAYOOP_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD)</span>
363 #undef START_CLASS
364 #undef END_CLASS


365 #undef FIELD
366 #undef CHAR_FIELD
367 #undef INT_FIELD
368 #undef BOOLEAN_FIELD
369 #undef LONG_FIELD
370 #undef FLOAT_FIELD
<span class="line-modified">371 #undef OOP_FIELD</span>
<span class="line-modified">372 #undef TYPEARRAYOOP_FIELD</span>
<span class="line-modified">373 #undef OBJARRAYOOP_FIELD</span>



374 #undef STATIC_OOPISH_FIELD
<span class="line-modified">375 #undef STATIC_OOP_FIELD</span>
<span class="line-modified">376 #undef STATIC_OBJARRAYOOP_FIELD</span>

377 #undef STATIC_INT_FIELD
378 #undef STATIC_BOOLEAN_FIELD
379 #undef STATIC_PRIMITIVE_FIELD
380 #undef EMPTY_CAST
381 
<span class="line-removed">382 void compute_offset(int &amp;dest_offset, Klass* klass, const char* name, const char* signature, bool static_field, TRAPS);</span>
<span class="line-removed">383 </span>
384 #endif // SHARE_JVMCI_JVMCIJAVACLASSES_HPP
</pre>
</td>
<td>
<hr />
<pre>
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 #ifndef SHARE_JVMCI_JVMCIJAVACLASSES_HPP
 25 #define SHARE_JVMCI_JVMCIJAVACLASSES_HPP
 26 
<span class="line-modified"> 27 #include &quot;classfile/vmSymbols.hpp&quot;</span>
<span class="line-modified"> 28 #include &quot;jvmci/jvmciExceptions.hpp&quot;</span>
<span class="line-modified"> 29 #include &quot;jvmci/jvmciObject.hpp&quot;</span>
<span class="line-modified"> 30 #include &quot;runtime/jniHandles.hpp&quot;</span>
<span class="line-added"> 31 </span>
<span class="line-added"> 32 /*</span>
<span class="line-added"> 33  * This macro defines the structure of the JVMCI classes accessed from VM code.  It is used to</span>
<span class="line-added"> 34  * generate accessors similar to javaClasses.hpp, but with specializations for HotSpot and JNI based</span>
<span class="line-added"> 35  * access.</span>
<span class="line-added"> 36  *</span>
<span class="line-added"> 37  * HotSpotJVMCI: This class contains accessors based on the VM internal</span>
<span class="line-added"> 38  * interface to Java. It is used for JVMCI Java code executing on the HotSpot heap.</span>
<span class="line-added"> 39  *</span>
<span class="line-added"> 40  * JNIJVMCI: This class contains JNI based accessors and is used for JVMCI</span>
<span class="line-added"> 41  * Java code executing in the JVMCI shared library.</span>
<span class="line-added"> 42  */</span>
<span class="line-added"> 43 </span>
<span class="line-added"> 44 #define JVMCI_CLASSES_DO(start_class, \</span>
<span class="line-added"> 45                          end_class, \</span>
<span class="line-added"> 46                          char_field, \</span>
<span class="line-added"> 47                          int_field, \</span>
<span class="line-added"> 48                          boolean_field, \</span>
<span class="line-added"> 49                          long_field, \</span>
<span class="line-added"> 50                          float_field, \</span>
<span class="line-added"> 51                          object_field, \</span>
<span class="line-added"> 52                          primarray_field, \</span>
<span class="line-added"> 53                          objectarray_field, \</span>
<span class="line-added"> 54                          static_object_field, \</span>
<span class="line-added"> 55                          static_objectarray_field, \</span>
<span class="line-added"> 56                          static_int_field, \</span>
<span class="line-added"> 57                          static_boolean_field, \</span>
<span class="line-added"> 58                          jvmci_method, \</span>
<span class="line-added"> 59                          jvmci_constructor) \</span>
<span class="line-added"> 60   start_class(Services, jdk_vm_ci_services_Services)                                                          \</span>
<span class="line-added"> 61     jvmci_method(CallStaticVoidMethod, GetStaticMethodID, call_static, void, Services, initializeSavedProperties, byte_array_void_signature, (JVMCIObject serializedProperties)) \</span>
<span class="line-added"> 62   end_class                                                                                                   \</span>
<span class="line-added"> 63   start_class(Architecture, jdk_vm_ci_code_Architecture)                                                      \</span>
<span class="line-added"> 64     object_field(Architecture, wordKind, &quot;Ljdk/vm/ci/meta/PlatformKind;&quot;)                                     \</span>
<span class="line-added"> 65   end_class                                                                                                   \</span>
<span class="line-added"> 66   start_class(TargetDescription, jdk_vm_ci_code_TargetDescription)                                            \</span>
<span class="line-added"> 67     object_field(TargetDescription, arch, &quot;Ljdk/vm/ci/code/Architecture;&quot;)                                    \</span>
<span class="line-added"> 68   end_class                                                                                                   \</span>
<span class="line-added"> 69   start_class(HotSpotResolvedObjectTypeImpl, jdk_vm_ci_hotspot_HotSpotResolvedObjectTypeImpl)                 \</span>
<span class="line-added"> 70     long_field(HotSpotResolvedObjectTypeImpl, metadataPointer)                                                \</span>
<span class="line-added"> 71   end_class                                                                                                   \</span>
<span class="line-added"> 72   start_class(HotSpotResolvedPrimitiveType, jdk_vm_ci_hotspot_HotSpotResolvedPrimitiveType)                   \</span>
<span class="line-added"> 73     object_field(HotSpotResolvedPrimitiveType, mirror, &quot;Ljdk/vm/ci/hotspot/HotSpotObjectConstantImpl;&quot;)       \</span>
<span class="line-added"> 74   object_field(HotSpotResolvedPrimitiveType, kind, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                               \</span>
<span class="line-added"> 75     static_objectarray_field(HotSpotResolvedPrimitiveType, primitives, &quot;[Ljdk/vm/ci/hotspot/HotSpotResolvedPrimitiveType;&quot;) \</span>
<span class="line-added"> 76   end_class                                                                                                   \</span>
<span class="line-added"> 77   start_class(HotSpotResolvedJavaFieldImpl, jdk_vm_ci_hotspot_HotSpotResolvedJavaFieldImpl)                   \</span>
<span class="line-added"> 78     object_field(HotSpotResolvedJavaFieldImpl, type, &quot;Ljdk/vm/ci/meta/JavaType;&quot;)                             \</span>
<span class="line-added"> 79     object_field(HotSpotResolvedJavaFieldImpl, holder, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedObjectTypeImpl;&quot;)   \</span>
<span class="line-added"> 80     int_field(HotSpotResolvedJavaFieldImpl, offset)                                                           \</span>
<span class="line-added"> 81     int_field(HotSpotResolvedJavaFieldImpl, modifiers)                                                        \</span>
<span class="line-added"> 82   end_class                                                                                                   \</span>
<span class="line-added"> 83   start_class(HotSpotResolvedJavaMethodImpl, jdk_vm_ci_hotspot_HotSpotResolvedJavaMethodImpl)                 \</span>
<span class="line-added"> 84     long_field(HotSpotResolvedJavaMethodImpl, metadataHandle)                                                 \</span>
<span class="line-added"> 85   end_class                                                                                                   \</span>
<span class="line-added"> 86   start_class(InstalledCode, jdk_vm_ci_code_InstalledCode)                                                    \</span>
<span class="line-added"> 87     long_field(InstalledCode, address)                                                                        \</span>
<span class="line-added"> 88     long_field(InstalledCode, entryPoint)                                                                     \</span>
<span class="line-added"> 89     long_field(InstalledCode, version)                                                                        \</span>
<span class="line-added"> 90     object_field(InstalledCode, name, &quot;Ljava/lang/String;&quot;)                                                   \</span>
<span class="line-added"> 91   end_class                                                                                                   \</span>
<span class="line-added"> 92   start_class(HotSpotInstalledCode, jdk_vm_ci_hotspot_HotSpotInstalledCode)                                   \</span>
<span class="line-added"> 93     int_field(HotSpotInstalledCode, size)                                                                     \</span>
<span class="line-added"> 94     long_field(HotSpotInstalledCode, codeStart)                                                               \</span>
<span class="line-added"> 95     int_field(HotSpotInstalledCode, codeSize)                                                                 \</span>
<span class="line-added"> 96   end_class                                                                                                   \</span>
<span class="line-added"> 97   start_class(HotSpotNmethod, jdk_vm_ci_hotspot_HotSpotNmethod)                                               \</span>
<span class="line-added"> 98     boolean_field(HotSpotNmethod, isDefault)                                                                  \</span>
<span class="line-added"> 99     long_field(HotSpotNmethod, compileIdSnapshot)                                                             \</span>
<span class="line-added">100     object_field(HotSpotNmethod, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethodImpl;&quot;)                 \</span>
<span class="line-added">101     jvmci_constructor(HotSpotNmethod, &quot;(Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethodImpl;Ljava/lang/String;ZJ)V&quot;) \</span>
<span class="line-added">102   end_class                                                                                                   \</span>
<span class="line-added">103   start_class(HotSpotCompiledCode, jdk_vm_ci_hotspot_HotSpotCompiledCode)                                     \</span>
<span class="line-added">104     object_field(HotSpotCompiledCode, name, &quot;Ljava/lang/String;&quot;)                                             \</span>
<span class="line-added">105     primarray_field(HotSpotCompiledCode, targetCode, &quot;[B&quot;)                                                    \</span>
<span class="line-added">106     int_field(HotSpotCompiledCode, targetCodeSize)                                                            \</span>
<span class="line-added">107     objectarray_field(HotSpotCompiledCode, sites, &quot;[Ljdk/vm/ci/code/site/Site;&quot;)                              \</span>
<span class="line-added">108     objectarray_field(HotSpotCompiledCode, assumptions, &quot;[Ljdk/vm/ci/meta/Assumptions$Assumption;&quot;)           \</span>
<span class="line-added">109     objectarray_field(HotSpotCompiledCode, methods, &quot;[Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                   \</span>
<span class="line-added">110     objectarray_field(HotSpotCompiledCode, comments, &quot;[Ljdk/vm/ci/hotspot/HotSpotCompiledCode$Comment;&quot;)      \</span>
<span class="line-added">111     primarray_field(HotSpotCompiledCode, dataSection, &quot;[B&quot;)                                                   \</span>
<span class="line-added">112     int_field(HotSpotCompiledCode, dataSectionAlignment)                                                      \</span>
<span class="line-added">113     objectarray_field(HotSpotCompiledCode, dataSectionPatches, &quot;[Ljdk/vm/ci/code/site/DataPatch;&quot;)            \</span>
<span class="line-added">114     boolean_field(HotSpotCompiledCode, isImmutablePIC)                                                        \</span>
<span class="line-added">115     int_field(HotSpotCompiledCode, totalFrameSize)                                                            \</span>
<span class="line-added">116     object_field(HotSpotCompiledCode, deoptRescueSlot, &quot;Ljdk/vm/ci/code/StackSlot;&quot;)                          \</span>
<span class="line-added">117   end_class                                                                                                   \</span>
<span class="line-added">118   start_class(HotSpotCompiledCode_Comment, jdk_vm_ci_hotspot_HotSpotCompiledCode_Comment)                     \</span>
<span class="line-added">119     object_field(HotSpotCompiledCode_Comment, text, &quot;Ljava/lang/String;&quot;)                                     \</span>
<span class="line-added">120     int_field(HotSpotCompiledCode_Comment, pcOffset)                                                          \</span>
<span class="line-added">121   end_class                                                                                                   \</span>
<span class="line-added">122   start_class(HotSpotCompiledNmethod, jdk_vm_ci_hotspot_HotSpotCompiledNmethod)                               \</span>
<span class="line-added">123     object_field(HotSpotCompiledNmethod, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)             \</span>
<span class="line-added">124     object_field(HotSpotCompiledNmethod, installationFailureMessage, &quot;Ljava/lang/String;&quot;)                    \</span>
<span class="line-added">125     int_field(HotSpotCompiledNmethod, entryBCI)                                                               \</span>
<span class="line-added">126     int_field(HotSpotCompiledNmethod, id)                                                                     \</span>
<span class="line-added">127     long_field(HotSpotCompiledNmethod, compileState)                                                           \</span>
<span class="line-added">128     boolean_field(HotSpotCompiledNmethod, hasUnsafeAccess)                                                    \</span>
<span class="line-added">129   end_class                                                                                                   \</span>
<span class="line-added">130   start_class(HotSpotForeignCallTarget, jdk_vm_ci_hotspot_HotSpotForeignCallTarget)                           \</span>
<span class="line-added">131     long_field(HotSpotForeignCallTarget, address)                                                             \</span>
<span class="line-added">132   end_class                                                                                                   \</span>
<span class="line-added">133   start_class(VMField, jdk_vm_ci_hotspot_VMField)                                                             \</span>
<span class="line-added">134     object_field(VMField, name, &quot;Ljava/lang/String;&quot;)                                                         \</span>
<span class="line-added">135     object_field(VMField, type, &quot;Ljava/lang/String;&quot;)                                                         \</span>
<span class="line-added">136     long_field(VMField, offset)                                                                               \</span>
<span class="line-added">137     long_field(VMField, address)                                                                              \</span>
<span class="line-added">138     object_field(VMField, value, &quot;Ljava/lang/Object;&quot;)                                                        \</span>
<span class="line-added">139     jvmci_constructor(VMField, &quot;(Ljava/lang/String;Ljava/lang/String;JJLjava/lang/Object;)V&quot;)                 \</span>
<span class="line-added">140   end_class                                                                                                   \</span>
<span class="line-added">141   start_class(VMFlag, jdk_vm_ci_hotspot_VMFlag)                                                               \</span>
<span class="line-added">142     object_field(VMFlag, name, &quot;Ljava/lang/String;&quot;)                                                          \</span>
<span class="line-added">143     object_field(VMFlag, type, &quot;Ljava/lang/String;&quot;)                                                          \</span>
<span class="line-added">144     object_field(VMFlag, value, &quot;Ljava/lang/Object;&quot;)                                                         \</span>
<span class="line-added">145     jvmci_constructor(VMFlag, &quot;(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Object;)V&quot;)                    \</span>
<span class="line-added">146   end_class                                                                                                   \</span>
<span class="line-added">147   start_class(VMIntrinsicMethod, jdk_vm_ci_hotspot_VMIntrinsicMethod)                                         \</span>
<span class="line-added">148     object_field(VMIntrinsicMethod, declaringClass, &quot;Ljava/lang/String;&quot;)                                     \</span>
<span class="line-added">149     object_field(VMIntrinsicMethod, name, &quot;Ljava/lang/String;&quot;)                                               \</span>
<span class="line-added">150     object_field(VMIntrinsicMethod, descriptor, &quot;Ljava/lang/String;&quot;)                                         \</span>
<span class="line-added">151     int_field(VMIntrinsicMethod, id)                                                                          \</span>
<span class="line-added">152     jvmci_constructor(VMIntrinsicMethod, &quot;(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V&quot;)        \</span>
<span class="line-added">153   end_class                                                                                                   \</span>
<span class="line-added">154   start_class(Assumptions_NoFinalizableSubclass, jdk_vm_ci_meta_Assumptions_NoFinalizableSubclass)            \</span>
<span class="line-added">155     object_field(Assumptions_NoFinalizableSubclass, receiverType, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)        \</span>
<span class="line-added">156   end_class                                                                                                   \</span>
<span class="line-added">157   start_class(Assumptions_ConcreteSubtype, jdk_vm_ci_meta_Assumptions_ConcreteSubtype)                        \</span>
<span class="line-added">158     object_field(Assumptions_ConcreteSubtype, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                   \</span>
<span class="line-added">159     object_field(Assumptions_ConcreteSubtype, subtype, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                   \</span>
<span class="line-added">160   end_class                                                                                                   \</span>
<span class="line-added">161   start_class(Assumptions_LeafType, jdk_vm_ci_meta_Assumptions_LeafType)                                      \</span>
<span class="line-added">162     object_field(Assumptions_LeafType, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                          \</span>
<span class="line-added">163   end_class                                                                                                   \</span>
<span class="line-added">164   start_class(Assumptions_ConcreteMethod, jdk_vm_ci_meta_Assumptions_ConcreteMethod)                          \</span>
<span class="line-added">165     object_field(Assumptions_ConcreteMethod, method, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                   \</span>
<span class="line-added">166     object_field(Assumptions_ConcreteMethod, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                    \</span>
<span class="line-added">167     object_field(Assumptions_ConcreteMethod, impl, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                     \</span>
<span class="line-added">168   end_class                                                                                                   \</span>
<span class="line-added">169   start_class(Assumptions_CallSiteTargetValue, jdk_vm_ci_meta_Assumptions_CallSiteTargetValue)                \</span>
<span class="line-added">170     object_field(Assumptions_CallSiteTargetValue, callSite, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)                  \</span>
<span class="line-added">171     object_field(Assumptions_CallSiteTargetValue, methodHandle, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)              \</span>
<span class="line-added">172   end_class                                                                                                   \</span>
<span class="line-added">173   start_class(site_Site, jdk_vm_ci_code_site_Site)                                                            \</span>
<span class="line-added">174     int_field(site_Site, pcOffset)                                                                            \</span>
<span class="line-added">175   end_class                                                                                                   \</span>
<span class="line-added">176   start_class(site_Call, jdk_vm_ci_code_site_Call)                                                            \</span>
<span class="line-added">177     object_field(site_Call, target, &quot;Ljdk/vm/ci/meta/InvokeTarget;&quot;)                                          \</span>
<span class="line-added">178   end_class                                                                                                   \</span>
<span class="line-added">179   start_class(site_DataPatch, jdk_vm_ci_code_site_DataPatch)                                                  \</span>
<span class="line-added">180     object_field(site_DataPatch, reference, &quot;Ljdk/vm/ci/code/site/Reference;&quot;)                                \</span>
<span class="line-added">181   end_class                                                                                                   \</span>
<span class="line-added">182   start_class(site_ConstantReference, jdk_vm_ci_code_site_ConstantReference)                                  \</span>
<span class="line-added">183     object_field(site_ConstantReference, constant, &quot;Ljdk/vm/ci/meta/VMConstant;&quot;)                             \</span>
<span class="line-added">184   end_class                                                                                                   \</span>
<span class="line-added">185   start_class(site_DataSectionReference, jdk_vm_ci_code_site_DataSectionReference)                            \</span>
<span class="line-added">186     int_field(site_DataSectionReference, offset)                                                              \</span>
<span class="line-added">187   end_class                                                                                                   \</span>
<span class="line-added">188   start_class(site_InfopointReason, jdk_vm_ci_code_site_InfopointReason)                                      \</span>
<span class="line-added">189     static_object_field(site_InfopointReason, SAFEPOINT, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)             \</span>
<span class="line-added">190     static_object_field(site_InfopointReason, CALL, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                  \</span>
<span class="line-added">191     static_object_field(site_InfopointReason, IMPLICIT_EXCEPTION, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)    \</span>
<span class="line-added">192   end_class                                                                                                   \</span>
<span class="line-added">193   start_class(site_Infopoint, jdk_vm_ci_code_site_Infopoint)                                                  \</span>
<span class="line-added">194     object_field(site_Infopoint, debugInfo, &quot;Ljdk/vm/ci/code/DebugInfo;&quot;)                                     \</span>
<span class="line-added">195     object_field(site_Infopoint, reason, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                             \</span>
<span class="line-added">196   end_class                                                                                                   \</span>
<span class="line-added">197   start_class(site_ExceptionHandler, jdk_vm_ci_code_site_ExceptionHandler)                                    \</span>
<span class="line-added">198     int_field(site_ExceptionHandler, handlerPos)                                                              \</span>
<span class="line-added">199   end_class                                                                                                   \</span>
<span class="line-added">200   start_class(site_Mark, jdk_vm_ci_code_site_Mark)                                                            \</span>
<span class="line-added">201     object_field(site_Mark, id, &quot;Ljava/lang/Object;&quot;)                                                         \</span>
<span class="line-added">202   end_class                                                                                                   \</span>
<span class="line-added">203   start_class(HotSpotCompilationRequestResult, jdk_vm_ci_hotspot_HotSpotCompilationRequestResult)             \</span>
<span class="line-added">204     object_field(HotSpotCompilationRequestResult, failureMessage, &quot;Ljava/lang/String;&quot;)                       \</span>
<span class="line-added">205     boolean_field(HotSpotCompilationRequestResult, retry)                                                     \</span>
<span class="line-added">206     int_field(HotSpotCompilationRequestResult, inlinedBytecodes)                                              \</span>
<span class="line-added">207   end_class                                                                                                   \</span>
<span class="line-added">208   start_class(DebugInfo, jdk_vm_ci_code_DebugInfo)                                                            \</span>
<span class="line-added">209     object_field(DebugInfo, bytecodePosition, &quot;Ljdk/vm/ci/code/BytecodePosition;&quot;)                            \</span>
<span class="line-added">210     object_field(DebugInfo, referenceMap, &quot;Ljdk/vm/ci/code/ReferenceMap;&quot;)                                    \</span>
<span class="line-added">211     object_field(DebugInfo, calleeSaveInfo, &quot;Ljdk/vm/ci/code/RegisterSaveLayout;&quot;)                            \</span>
<span class="line-added">212     objectarray_field(DebugInfo, virtualObjectMapping, &quot;[Ljdk/vm/ci/code/VirtualObject;&quot;)                     \</span>
<span class="line-added">213   end_class                                                                                                   \</span>
<span class="line-added">214   start_class(HotSpotReferenceMap, jdk_vm_ci_hotspot_HotSpotReferenceMap)                                     \</span>
<span class="line-added">215     objectarray_field(HotSpotReferenceMap, objects, &quot;[Ljdk/vm/ci/code/Location;&quot;)                             \</span>
<span class="line-added">216     objectarray_field(HotSpotReferenceMap, derivedBase, &quot;[Ljdk/vm/ci/code/Location;&quot;)                         \</span>
<span class="line-added">217     primarray_field(HotSpotReferenceMap, sizeInBytes, &quot;[I&quot;)                                                   \</span>
<span class="line-added">218     int_field(HotSpotReferenceMap, maxRegisterSize)                                                           \</span>
<span class="line-added">219   end_class                                                                                                   \</span>
<span class="line-added">220   start_class(RegisterSaveLayout, jdk_vm_ci_code_RegisterSaveLayout)                                          \</span>
<span class="line-added">221     objectarray_field(RegisterSaveLayout, registers, &quot;[Ljdk/vm/ci/code/Register;&quot;)                            \</span>
<span class="line-added">222     primarray_field(RegisterSaveLayout, slots, &quot;[I&quot;)                                                          \</span>
<span class="line-added">223   end_class                                                                                                   \</span>
<span class="line-added">224   start_class(BytecodeFrame, jdk_vm_ci_code_BytecodeFrame)                                                    \</span>
<span class="line-added">225     objectarray_field(BytecodeFrame, values, &quot;[Ljdk/vm/ci/meta/JavaValue;&quot;)                                   \</span>
<span class="line-added">226     objectarray_field(BytecodeFrame, slotKinds, &quot;[Ljdk/vm/ci/meta/JavaKind;&quot;)                                 \</span>
<span class="line-added">227     int_field(BytecodeFrame, numLocals)                                                                       \</span>
<span class="line-added">228     int_field(BytecodeFrame, numStack)                                                                        \</span>
<span class="line-added">229     int_field(BytecodeFrame, numLocks)                                                                        \</span>
<span class="line-added">230     boolean_field(BytecodeFrame, rethrowException)                                                            \</span>
<span class="line-added">231     boolean_field(BytecodeFrame, duringCall)                                                                  \</span>
<span class="line-added">232     static_int_field(BytecodeFrame, UNKNOWN_BCI)                                                              \</span>
<span class="line-added">233     static_int_field(BytecodeFrame, UNWIND_BCI)                                                               \</span>
<span class="line-added">234     static_int_field(BytecodeFrame, BEFORE_BCI)                                                               \</span>
<span class="line-added">235     static_int_field(BytecodeFrame, AFTER_BCI)                                                                \</span>
<span class="line-added">236     static_int_field(BytecodeFrame, AFTER_EXCEPTION_BCI)                                                      \</span>
<span class="line-added">237     static_int_field(BytecodeFrame, INVALID_FRAMESTATE_BCI)                                                   \</span>
<span class="line-added">238   end_class                                                                                                   \</span>
<span class="line-added">239   start_class(BytecodePosition, jdk_vm_ci_code_BytecodePosition)                                              \</span>
<span class="line-added">240     object_field(BytecodePosition, caller, &quot;Ljdk/vm/ci/code/BytecodePosition;&quot;)                               \</span>
<span class="line-added">241     object_field(BytecodePosition, method, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                             \</span>
<span class="line-added">242     int_field(BytecodePosition, bci)                                                                          \</span>
<span class="line-added">243   end_class                                                                                                   \</span>
<span class="line-added">244   start_class(JavaConstant, jdk_vm_ci_meta_JavaConstant)                                                      \</span>
<span class="line-added">245     static_object_field(JavaConstant, NULL_POINTER, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)                          \</span>
<span class="line-added">246     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, JavaConstant, forFloat, forFloat_signature, (JVMCIObject kind, jlong value, JVMCI_TRAPS)) \</span>
<span class="line-added">247     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, JavaConstant, forDouble, forDouble_signature, (JVMCIObject kind, jlong value, JVMCI_TRAPS)) \</span>
<span class="line-added">248   end_class                                                                                                   \</span>
<span class="line-added">249   start_class(ResolvedJavaMethod, jdk_vm_ci_meta_ResolvedJavaMethod)                                          \</span>
<span class="line-added">250   end_class                                                                                                   \</span>
<span class="line-added">251   start_class(PrimitiveConstant, jdk_vm_ci_meta_PrimitiveConstant)                                            \</span>
<span class="line-added">252     object_field(PrimitiveConstant, kind, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                        \</span>
<span class="line-added">253     long_field(PrimitiveConstant, primitive)                                                                  \</span>
<span class="line-added">254     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, PrimitiveConstant, forTypeChar, forTypeChar_signature, (JVMCIObject kind, jlong value, JVMCI_TRAPS)) \</span>
<span class="line-added">255   end_class                                                                                                   \</span>
<span class="line-added">256   start_class(RawConstant, jdk_vm_ci_meta_RawConstant)                                                        \</span>
<span class="line-added">257   end_class                                                                                                   \</span>
<span class="line-added">258   start_class(NullConstant, jdk_vm_ci_meta_NullConstant)                                                      \</span>
<span class="line-added">259   end_class                                                                                                   \</span>
<span class="line-added">260   start_class(HotSpotCompressedNullConstant, jdk_vm_ci_hotspot_HotSpotCompressedNullConstant)                 \</span>
<span class="line-added">261   end_class                                                                                                   \</span>
<span class="line-added">262   start_class(HotSpotObjectConstantImpl, jdk_vm_ci_hotspot_HotSpotObjectConstantImpl)                         \</span>
<span class="line-added">263     boolean_field(HotSpotObjectConstantImpl, compressed)                                                      \</span>
<span class="line-added">264   end_class                                                                                                   \</span>
<span class="line-added">265   start_class(DirectHotSpotObjectConstantImpl, jdk_vm_ci_hotspot_DirectHotSpotObjectConstantImpl)             \</span>
<span class="line-added">266     object_field(DirectHotSpotObjectConstantImpl, object, &quot;Ljava/lang/Object;&quot;)                               \</span>
<span class="line-added">267     jvmci_constructor(DirectHotSpotObjectConstantImpl, &quot;(Ljava/lang/Object;Z)V&quot;)                              \</span>
<span class="line-added">268   end_class                                                                                                   \</span>
<span class="line-added">269   start_class(IndirectHotSpotObjectConstantImpl, jdk_vm_ci_hotspot_IndirectHotSpotObjectConstantImpl)         \</span>
<span class="line-added">270     long_field(IndirectHotSpotObjectConstantImpl, objectHandle)                                               \</span>
<span class="line-added">271     jvmci_constructor(IndirectHotSpotObjectConstantImpl, &quot;(JZZ)V&quot;)                                            \</span>
<span class="line-added">272   end_class                                                                                                   \</span>
<span class="line-added">273   start_class(HotSpotMetaspaceConstantImpl, jdk_vm_ci_hotspot_HotSpotMetaspaceConstantImpl)                   \</span>
<span class="line-added">274     object_field(HotSpotMetaspaceConstantImpl, metaspaceObject, &quot;Ljdk/vm/ci/hotspot/MetaspaceObject;&quot;)        \</span>
<span class="line-added">275     boolean_field(HotSpotMetaspaceConstantImpl, compressed)                                                   \</span>
<span class="line-added">276   end_class                                                                                                   \</span>
<span class="line-added">277   start_class(HotSpotSentinelConstant, jdk_vm_ci_hotspot_HotSpotSentinelConstant)                             \</span>
<span class="line-added">278   end_class                                                                                                   \</span>
<span class="line-added">279   start_class(JavaKind, jdk_vm_ci_meta_JavaKind)                                                              \</span>
<span class="line-added">280     char_field(JavaKind, typeChar)                                                                            \</span>
<span class="line-added">281     static_object_field(JavaKind, Boolean, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                       \</span>
<span class="line-added">282     static_object_field(JavaKind, Byte, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                          \</span>
<span class="line-added">283     static_object_field(JavaKind, Char, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                          \</span>
<span class="line-added">284     static_object_field(JavaKind, Short, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                         \</span>
<span class="line-added">285     static_object_field(JavaKind, Int, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                           \</span>
<span class="line-added">286     static_object_field(JavaKind, Long, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                          \</span>
<span class="line-added">287   end_class                                                                                                   \</span>
<span class="line-added">288   start_class(ValueKind, jdk_vm_ci_meta_ValueKind)                                                            \</span>
<span class="line-added">289     object_field(ValueKind, platformKind, &quot;Ljdk/vm/ci/meta/PlatformKind;&quot;)                                    \</span>
<span class="line-added">290   end_class                                                                                                   \</span>
<span class="line-added">291   start_class(Value, jdk_vm_ci_meta_Value)                                                                    \</span>
<span class="line-added">292     object_field(Value, valueKind, &quot;Ljdk/vm/ci/meta/ValueKind;&quot;)                                              \</span>
<span class="line-added">293     static_object_field(Value, ILLEGAL, &quot;Ljdk/vm/ci/meta/AllocatableValue;&quot;)                                  \</span>
<span class="line-added">294   end_class                                                                                                   \</span>
<span class="line-added">295   start_class(RegisterValue, jdk_vm_ci_code_RegisterValue)                                                    \</span>
<span class="line-added">296     object_field(RegisterValue, reg, &quot;Ljdk/vm/ci/code/Register;&quot;)                                             \</span>
<span class="line-added">297   end_class                                                                                                   \</span>
<span class="line-added">298   start_class(code_Location, jdk_vm_ci_code_Location)                                                         \</span>
<span class="line-added">299     object_field(code_Location, reg, &quot;Ljdk/vm/ci/code/Register;&quot;)                                             \</span>
<span class="line-added">300     int_field(code_Location, offset)                                                                          \</span>
<span class="line-added">301   end_class                                                                                                   \</span>
<span class="line-added">302   start_class(code_Register, jdk_vm_ci_code_Register)                                                         \</span>
<span class="line-added">303     int_field(code_Register, number)                                                                          \</span>
<span class="line-added">304     int_field(code_Register, encoding)                                                                        \</span>
<span class="line-added">305   end_class                                                                                                   \</span>
<span class="line-added">306   start_class(StackSlot, jdk_vm_ci_code_StackSlot)                                                            \</span>
<span class="line-added">307     int_field(StackSlot, offset)                                                                              \</span>
<span class="line-added">308     boolean_field(StackSlot, addFrameSize)                                                                    \</span>
<span class="line-added">309   end_class                                                                                                   \</span>
<span class="line-added">310   start_class(VirtualObject, jdk_vm_ci_code_VirtualObject)                                                    \</span>
<span class="line-added">311     int_field(VirtualObject, id)                                                                              \</span>
<span class="line-added">312     boolean_field(VirtualObject, isAutoBox)                                                                   \</span>
<span class="line-added">313     object_field(VirtualObject, type, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                    \</span>
<span class="line-added">314     objectarray_field(VirtualObject, values, &quot;[Ljdk/vm/ci/meta/JavaValue;&quot;)                                   \</span>
<span class="line-added">315     objectarray_field(VirtualObject, slotKinds, &quot;[Ljdk/vm/ci/meta/JavaKind;&quot;)                                 \</span>
<span class="line-added">316   end_class                                                                                                   \</span>
<span class="line-added">317   start_class(StackLockValue, jdk_vm_ci_code_StackLockValue)                                                  \</span>
<span class="line-added">318     object_field(StackLockValue, owner, &quot;Ljdk/vm/ci/meta/JavaValue;&quot;)                                         \</span>
<span class="line-added">319     object_field(StackLockValue, slot, &quot;Ljdk/vm/ci/meta/AllocatableValue;&quot;)                                   \</span>
<span class="line-added">320     boolean_field(StackLockValue, eliminated)                                                                 \</span>
<span class="line-added">321   end_class                                                                                                   \</span>
<span class="line-added">322   start_class(HotSpotStackFrameReference, jdk_vm_ci_hotspot_HotSpotStackFrameReference)                       \</span>
<span class="line-added">323     object_field(HotSpotStackFrameReference, compilerToVM, &quot;Ljdk/vm/ci/hotspot/CompilerToVM;&quot;)                \</span>
<span class="line-added">324     boolean_field(HotSpotStackFrameReference, objectsMaterialized)                                            \</span>
<span class="line-added">325     long_field(HotSpotStackFrameReference, stackPointer)                                                      \</span>
<span class="line-added">326     int_field(HotSpotStackFrameReference, frameNumber)                                                        \</span>
<span class="line-added">327     int_field(HotSpotStackFrameReference, bci)                                                                \</span>
<span class="line-added">328     object_field(HotSpotStackFrameReference, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)         \</span>
<span class="line-added">329     objectarray_field(HotSpotStackFrameReference, locals, &quot;[Ljava/lang/Object;&quot;)                              \</span>
<span class="line-added">330     primarray_field(HotSpotStackFrameReference, localIsVirtual, &quot;[Z&quot;)                                         \</span>
<span class="line-added">331   end_class                                                                                                   \</span>
<span class="line-added">332   start_class(HotSpotMetaData, jdk_vm_ci_hotspot_HotSpotMetaData)                                             \</span>
<span class="line-added">333     primarray_field(HotSpotMetaData, pcDescBytes, &quot;[B&quot;)                                                       \</span>
<span class="line-added">334     primarray_field(HotSpotMetaData, scopesDescBytes, &quot;[B&quot;)                                                   \</span>
<span class="line-added">335     primarray_field(HotSpotMetaData, relocBytes, &quot;[B&quot;)                                                        \</span>
<span class="line-added">336     primarray_field(HotSpotMetaData, exceptionBytes, &quot;[B&quot;)                                                    \</span>
<span class="line-added">337     primarray_field(HotSpotMetaData, implicitExceptionBytes, &quot;[B&quot;)                                            \</span>
<span class="line-added">338     primarray_field(HotSpotMetaData, oopMaps, &quot;[B&quot;)                                                           \</span>
<span class="line-added">339     object_field(HotSpotMetaData, metadata, &quot;[Ljava/lang/Object;&quot;)                                            \</span>
<span class="line-added">340   end_class                                                                                                   \</span>
<span class="line-added">341   start_class(HotSpotConstantPool, jdk_vm_ci_hotspot_HotSpotConstantPool)                                     \</span>
<span class="line-added">342     long_field(HotSpotConstantPool, metadataHandle)                                                           \</span>
<span class="line-added">343   end_class                                                                                                   \</span>
<span class="line-added">344   start_class(HotSpotJVMCIRuntime, jdk_vm_ci_hotspot_HotSpotJVMCIRuntime)                                     \</span>
<span class="line-added">345     objectarray_field(HotSpotJVMCIRuntime, excludeFromJVMCICompilation, &quot;[Ljava/lang/Module;&quot;)                \</span>
<span class="line-added">346     jvmci_method(CallNonvirtualObjectMethod, GetMethodID, call_special, JVMCIObject, HotSpotJVMCIRuntime, compileMethod, compileMethod_signature, (JVMCIObject runtime, JVMCIObject method, int entry_bci, jlong env, int id)) \</span>
<span class="line-added">347     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, HotSpotJVMCIRuntime, encodeThrowable, encodeThrowable_signature, (JVMCIObject throwable)) \</span>
<span class="line-added">348     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, HotSpotJVMCIRuntime, decodeThrowable, decodeThrowable_signature, (JVMCIObject encodedThrowable)) \</span>
<span class="line-added">349     jvmci_method(CallNonvirtualVoidMethod, GetMethodID, call_special, void, HotSpotJVMCIRuntime, bootstrapFinished, void_method_signature, (JVMCIObject runtime, JVMCI_TRAPS)) \</span>
<span class="line-added">350     jvmci_method(CallNonvirtualVoidMethod, GetMethodID, call_special, void, HotSpotJVMCIRuntime, shutdown, void_method_signature, (JVMCIObject runtime)) \</span>
<span class="line-added">351     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, HotSpotJVMCIRuntime, runtime, runtime_signature, (JVMCI_TRAPS)) \</span>
<span class="line-added">352     jvmci_method(CallObjectMethod, GetMethodID, call_virtual, JVMCIObject, HotSpotJVMCIRuntime, getCompiler, getCompiler_signature, (JVMCIObject runtime, JVMCI_TRAPS)) \</span>
<span class="line-added">353     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, HotSpotJVMCIRuntime, callToString, callToString_signature, (JVMCIObject object, JVMCI_TRAPS)) \</span>
<span class="line-added">354   end_class                                                                                                   \</span>
<span class="line-added">355   start_class(JVMCIError, jdk_vm_ci_common_JVMCIError)                                                        \</span>
<span class="line-added">356     jvmci_constructor(JVMCIError, &quot;(Ljava/lang/String;)V&quot;)                                                    \</span>
<span class="line-added">357   end_class                                                                                                   \</span>
<span class="line-added">358   start_class(InspectedFrameVisitor, jdk_vm_ci_code_stack_InspectedFrameVisitor)                              \</span>
<span class="line-added">359   end_class                                                                                                   \</span>
<span class="line-added">360   start_class(JVMCI, jdk_vm_ci_runtime_JVMCI)                                                                 \</span>
<span class="line-added">361     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, JVMCI, getRuntime, getRuntime_signature, (JVMCI_TRAPS)) \</span>
<span class="line-added">362     jvmci_method(CallStaticObjectMethod, GetStaticMethodID, call_static, JVMCIObject, JVMCI, initializeRuntime, initializeRuntime_signature, (JVMCI_TRAPS)) \</span>
<span class="line-added">363   end_class                                                                                                   \</span>
<span class="line-added">364   start_class(Object, java_lang_Object)                                                                       \</span>
<span class="line-added">365   end_class                                                                                                   \</span>
<span class="line-added">366   start_class(String, java_lang_String)                                                                       \</span>
<span class="line-added">367   end_class                                                                                                   \</span>
<span class="line-added">368   start_class(Class, java_lang_Class)                                                                         \</span>
<span class="line-added">369     jvmci_method(CallObjectMethod, GetMethodID, call_virtual, JVMCIObject, Class, getName, void_string_signature, (JVMCI_TRAPS)) \</span>
<span class="line-added">370   end_class                                                                                                   \</span>
<span class="line-added">371   start_class(ArrayIndexOutOfBoundsException, java_lang_ArrayIndexOutOfBoundsException)                       \</span>
<span class="line-added">372     jvmci_constructor(ArrayIndexOutOfBoundsException, &quot;(Ljava/lang/String;)V&quot;)                                \</span>
<span class="line-added">373   end_class                                                                                                   \</span>
<span class="line-added">374   start_class(IllegalStateException, java_lang_IllegalStateException)                                         \</span>
<span class="line-added">375     jvmci_constructor(IllegalStateException, &quot;(Ljava/lang/String;)V&quot;)                                         \</span>
<span class="line-added">376   end_class                                                                                                   \</span>
<span class="line-added">377   start_class(NullPointerException, java_lang_NullPointerException)                                           \</span>
<span class="line-added">378     jvmci_constructor(NullPointerException, &quot;(Ljava/lang/String;)V&quot;)                                          \</span>
<span class="line-added">379   end_class                                                                                                   \</span>
<span class="line-added">380   start_class(IllegalArgumentException, java_lang_IllegalArgumentException)                                   \</span>
<span class="line-added">381     jvmci_constructor(IllegalArgumentException, &quot;(Ljava/lang/String;)V&quot;)                                      \</span>
<span class="line-added">382   end_class                                                                                                   \</span>
<span class="line-added">383   start_class(InternalError, java_lang_InternalError)                                                         \</span>
<span class="line-added">384     jvmci_constructor(InternalError, &quot;(Ljava/lang/String;)V&quot;)                                                 \</span>
<span class="line-added">385   end_class                                                                                                   \</span>
<span class="line-added">386   start_class(ClassNotFoundException, java_lang_ClassNotFoundException)                                       \</span>
<span class="line-added">387     jvmci_constructor(ClassNotFoundException, &quot;(Ljava/lang/String;)V&quot;)                                        \</span>
<span class="line-added">388   end_class                                                                                                   \</span>
<span class="line-added">389   start_class(InvalidInstalledCodeException, jdk_vm_ci_code_InvalidInstalledCodeException)                    \</span>
<span class="line-added">390     jvmci_constructor(InvalidInstalledCodeException, &quot;(Ljava/lang/String;)V&quot;)                                 \</span>
<span class="line-added">391   end_class                                                                                                   \</span>
<span class="line-added">392   start_class(UnsatisfiedLinkError, java_lang_UnsatisfiedLinkError)                                           \</span>
<span class="line-added">393     jvmci_constructor(UnsatisfiedLinkError, &quot;(Ljava/lang/String;)V&quot;)                                          \</span>
<span class="line-added">394   end_class                                                                                                   \</span>
<span class="line-added">395   start_class(UnsupportedOperationException, java_lang_UnsupportedOperationException)                         \</span>
<span class="line-added">396     jvmci_constructor(UnsupportedOperationException, &quot;(Ljava/lang/String;)V&quot;)                                 \</span>
<span class="line-added">397   end_class                                                                                                   \</span>
<span class="line-added">398   start_class(StackTraceElement, java_lang_StackTraceElement)                                                 \</span>
<span class="line-added">399     object_field(StackTraceElement, declaringClass, &quot;Ljava/lang/String;&quot;)                                     \</span>
<span class="line-added">400     object_field(StackTraceElement, methodName, &quot;Ljava/lang/String;&quot;)                                         \</span>
<span class="line-added">401     object_field(StackTraceElement, fileName, &quot;Ljava/lang/String;&quot;)                                           \</span>
<span class="line-added">402     int_field(StackTraceElement, lineNumber)                                                                  \</span>
<span class="line-added">403     jvmci_constructor(StackTraceElement, &quot;(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V&quot;)        \</span>
<span class="line-added">404   end_class                                                                                                   \</span>
<span class="line-added">405   start_class(Throwable, java_lang_Throwable)                                                                 \</span>
<span class="line-added">406     object_field(Throwable, detailMessage, &quot;Ljava/lang/String;&quot;)                                              \</span>
<span class="line-added">407   end_class                                                                                                   \</span>
<span class="line-added">408   /* end*/</span>
<span class="line-added">409 </span>
<span class="line-added">410 class JVMCICompiler;</span>
<span class="line-added">411 class JVMCIEnv;</span>
<span class="line-added">412 </span>
<span class="line-added">413 #define START_CLASS(simpleClassName, fullClassName)      \</span>
<span class="line-added">414   class simpleClassName { \</span>
<span class="line-added">415     friend class JVMCIEnv; \</span>
<span class="line-added">416     static void initialize(JVMCI_TRAPS); \</span>
<span class="line-added">417     static bool is_instance(JVMCIEnv* jvmciEnv, JVMCIObject object); \</span>
<span class="line-added">418 </span>
<span class="line-added">419 #define END_CLASS };</span>
<span class="line-added">420 </span>
<span class="line-added">421 #define EMPTY_CAST</span>
<span class="line-added">422 #define CHAR_FIELD(simpleClassName,  name) FIELD(simpleClassName, name, jchar)</span>
<span class="line-added">423 #define INT_FIELD(simpleClassName,  name) FIELD(simpleClassName, name, jint)</span>
<span class="line-added">424 #define BOOLEAN_FIELD(simpleClassName,  name) FIELD(simpleClassName, name, jboolean)</span>
<span class="line-added">425 #define LONG_FIELD(simpleClassName,  name) FIELD(simpleClassName, name, jlong)</span>
<span class="line-added">426 #define FLOAT_FIELD(simpleClassName,  name) FIELD(simpleClassName, name, jfloat)</span>
<span class="line-added">427 </span>
<span class="line-added">428 #define OBJECT_FIELD(simpleClassName,  name, signature) OOPISH_FIELD(simpleClassName, name, JVMCIObject, oop)</span>
<span class="line-added">429 #define OBJECTARRAY_FIELD(simpleClassName,  name, signature) OOPISH_FIELD(simpleClassName, name, JVMCIObjectArray, objArrayOop)</span>
<span class="line-added">430 #define PRIMARRAY_FIELD(simpleClassName,  name, signature) OOPISH_FIELD(simpleClassName, name, JVMCIPrimitiveArray, typeArrayOop)</span>
<span class="line-added">431 </span>
<span class="line-added">432 #define STATIC_INT_FIELD(simpleClassName, name) STATIC_FIELD(simpleClassName, name, jint)</span>
<span class="line-added">433 #define STATIC_BOOLEAN_FIELD(simpleClassName, name) STATIC_FIELD(simpleClassName, name, jboolean)</span>
<span class="line-added">434 #define STATIC_OBJECT_FIELD(simpleClassName, name, signature) STATIC_OOPISH_FIELD(simpleClassName, name, JVMCIObject, oop)</span>
<span class="line-added">435 #define STATIC_OBJECTARRAY_FIELD(simpleClassName, name, signature) STATIC_OOPISH_FIELD(simpleClassName, name, JVMCIObjectArray, objArrayOop)</span>
<span class="line-added">436 </span>
<span class="line-added">437 #define HS_START_CLASS(simpleClassName, fullClassName)                               \</span>
<span class="line-added">438   START_CLASS(simpleClassName, fullClassName)                                        \</span>
<span class="line-added">439   friend class HotSpotJVMCI;                                                         \</span>
<span class="line-added">440  private:                                                                            \</span>
<span class="line-added">441   static void check(oop obj, const char* field_name, int offset);                    \</span>
<span class="line-added">442   static InstanceKlass* _klass;                                                      \</span>
<span class="line-added">443  public:                                                                             \</span>
<span class="line-added">444   static InstanceKlass* klass() { assert(_klass != NULL, &quot;uninit&quot;); return _klass; } \</span>
<span class="line-added">445   static Symbol* symbol() { return vmSymbols::fullClassName(); }</span>
<span class="line-added">446 </span>
<span class="line-added">447 #define FIELD(simpleClassName, name, type)                                                                   \</span>
<span class="line-added">448   private:                                                                                                   \</span>
<span class="line-added">449     static int _##name##_offset;                                                                             \</span>
<span class="line-added">450   public:                                                                                                    \</span>
<span class="line-added">451     static type get_ ## name(JVMCIEnv* env, JVMCIObject obj) { return name(env, resolve(obj)); }             \</span>
<span class="line-added">452     static void set_ ## name(JVMCIEnv* env, JVMCIObject obj, type x) { set_ ## name(env, resolve(obj), x); } \</span>
<span class="line-added">453     static type name(JVMCIEnv* env, oop obj);                                                                \</span>
<span class="line-added">454     static void set_ ## name(JVMCIEnv* env, oop obj, type x);</span>
<span class="line-added">455 </span>
<span class="line-added">456 #define OOPISH_FIELD(simpleClassName, name, type, hstype)                                                                \</span>
<span class="line-added">457   private:                                                                                                                       \</span>
<span class="line-added">458     static int _##name##_offset;                                                                                                 \</span>
<span class="line-added">459   public:                                                                                                                        \</span>
<span class="line-added">460     static type get_  ## name(JVMCIEnv* env, JVMCIObject obj) { return (type) wrap(name(env, resolve(obj))); }                   \</span>
<span class="line-added">461     static void set_  ## name(JVMCIEnv* env, JVMCIObject obj, type x) { set_  ## name(env, resolve(obj), (hstype) resolve(x)); } \</span>
<span class="line-added">462     static hstype name(JVMCIEnv* env, oop obj);                                                                                  \</span>
<span class="line-added">463     static void set_  ## name(JVMCIEnv* env, oop obj, hstype x);</span>
<span class="line-added">464 </span>
<span class="line-added">465 #define STATIC_FIELD(simpleClassName, name, type)     \</span>
<span class="line-added">466   private:                                            \</span>
<span class="line-added">467     static int _##name##_offset;                      \</span>
<span class="line-added">468   public:                                             \</span>
<span class="line-added">469     static type get_  ## name(JVMCIEnv* env);         \</span>
<span class="line-added">470     static void set_  ## name(JVMCIEnv* env, type x);</span>
<span class="line-added">471 </span>
<span class="line-added">472 #define STATIC_OOPISH_FIELD(simpleClassName, name, type, hstype)                                  \</span>
<span class="line-added">473   private:                                                                                        \</span>
<span class="line-added">474     static int _##name##_offset;                                                                  \</span>
<span class="line-added">475   public:                                                                                         \</span>
<span class="line-added">476     static type get_  ## name(JVMCIEnv* env) { return (type) wrap(name(env)); }                   \</span>
<span class="line-added">477     static void set_  ## name(JVMCIEnv* env, type x) { set_  ## name(env, (hstype) resolve(x)); } \</span>
<span class="line-added">478     static hstype name(JVMCIEnv* env);                                                            \</span>
<span class="line-added">479     static void set_  ## name(JVMCIEnv* env, hstype hstype);</span>
<span class="line-added">480 </span>
<span class="line-added">481 #define METHOD(jniCallType, jniGetMethod, hsCallType, returnType, simpleClassName, methodName, signatureSymbolName, args)</span>
<span class="line-added">482 #define CONSTRUCTOR(className, signature)</span>
<span class="line-added">483 </span>
<span class="line-added">484 /**</span>
<span class="line-added">485  * VM internal interface to Java classes, methods and objects. For example:</span>
<span class="line-added">486  *</span>
<span class="line-added">487  * class HotSpotJVMCI {</span>
<span class="line-added">488  *   ...</span>
<span class="line-added">489  *   class Architecture {</span>
<span class="line-added">490  *     static void initialize(JVMCIEnv* env);</span>
<span class="line-added">491  *     static bool is_instance(JVMCIEnv* env, JVMCIObject object);</span>
<span class="line-added">492  *    private:</span>
<span class="line-added">493  *     static void check(oop obj, const char *field_name, int offset);</span>
<span class="line-added">494  *    public:</span>
<span class="line-added">495  *     static InstanceKlass *klass() { ... }</span>
<span class="line-added">496  *     static Symbol *symbol() { return vmSymbols::jdk_vm_ci_code_Architecture(); }</span>
<span class="line-added">497  *    private:</span>
<span class="line-added">498  *     static int _wordKind_offset;</span>
<span class="line-added">499  *    public:</span>
<span class="line-added">500  *     static JVMCIObject get_wordKind(JVMCIEnv *env, JVMCIObject obj) { ... }</span>
<span class="line-added">501  *     static void set_wordKind(JVMCIEnv *env, JVMCIObject obj, JVMCIObject x) { ... }</span>
<span class="line-added">502  *     static oop wordKind(JVMCIEnv *env, oop obj);</span>
<span class="line-added">503  *     static void set_wordKind(JVMCIEnv *env, oop obj, oop x);</span>
<span class="line-added">504  *   }</span>
<span class="line-added">505  *   ...</span>
<span class="line-added">506  * };</span>
<span class="line-added">507  */</span>
<span class="line-added">508 class HotSpotJVMCI {</span>
<span class="line-added">509   friend class JVMCIEnv;</span>
510 

511  public:
<span class="line-added">512 </span>
<span class="line-added">513   static oop resolve(JVMCIObject obj);</span>
<span class="line-added">514 </span>
<span class="line-added">515   static arrayOop resolve(JVMCIArray obj);</span>
<span class="line-added">516   static objArrayOop resolve(JVMCIObjectArray obj);</span>
<span class="line-added">517   static typeArrayOop resolve(JVMCIPrimitiveArray obj);</span>
<span class="line-added">518 </span>
<span class="line-added">519   static JVMCIObject wrap(jobject obj) { return JVMCIObject(obj, true); }</span>
<span class="line-added">520   static JVMCIObject wrap(oop obj);</span>
<span class="line-added">521 </span>
<span class="line-added">522   static inline Method* asMethod(JVMCIEnv* env, oop jvmci_method) {</span>
<span class="line-added">523     return *(Method**) HotSpotResolvedJavaMethodImpl::metadataHandle(env, jvmci_method);</span>
<span class="line-added">524   }</span>
<span class="line-added">525   static inline ConstantPool* asConstantPool(JVMCIEnv* env, oop jvmci_constant_pool) {</span>
<span class="line-added">526     return *(ConstantPool**) HotSpotConstantPool::metadataHandle(env, jvmci_constant_pool);</span>
<span class="line-added">527   }</span>
<span class="line-added">528   static inline Klass* asKlass(JVMCIEnv* env, oop jvmci_type) {</span>
<span class="line-added">529     return (Klass*) HotSpotResolvedObjectTypeImpl::metadataPointer(env, jvmci_type);</span>
<span class="line-added">530   }</span>
<span class="line-added">531 </span>
532   static void compute_offsets(TRAPS);
<span class="line-added">533   static void compute_offset(int &amp;dest_offset, Klass* klass, const char* name, const char* signature, bool static_field, TRAPS);</span>
<span class="line-added">534 </span>
<span class="line-added">535   JVMCI_CLASSES_DO(HS_START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OBJECT_FIELD, PRIMARRAY_FIELD, OBJECTARRAY_FIELD, STATIC_OBJECT_FIELD, STATIC_OBJECTARRAY_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD, METHOD, CONSTRUCTOR)</span>
536 };
537 
<span class="line-modified">538 #undef HS_START_CLASS</span>
<span class="line-modified">539 </span>
<span class="line-added">540 #define JNI_START_CLASS(simpleClassName, fullClassName)                                             \</span>
<span class="line-added">541   START_CLASS(simpleClassName, fullClassName)                                                       \</span>
<span class="line-added">542   friend class JNIJVMCI;                                                                            \</span>
<span class="line-added">543   private:                                                                                          \</span>
<span class="line-added">544   static void check(JVMCIEnv* jvmciEnv, JVMCIObject obj, const char* field_name, jfieldID offset);  \</span>
<span class="line-added">545   static jclass _class;                                                                             \</span>
<span class="line-added">546 public:                                                                                             \</span>
<span class="line-added">547  static jclass clazz() { assert(_class != NULL, #fullClassName &quot; uninitialized&quot;); return _class; }                         \</span>
<span class="line-added">548  static jclass fullClassName ##_class()  { assert(_class != NULL, &quot;uninit&quot;); return _class; }</span>
<span class="line-added">549 </span>
<span class="line-added">550 #undef METHOD</span>
<span class="line-added">551 #undef CONSTRUCTOR</span>
<span class="line-added">552 #undef FIELD</span>
<span class="line-added">553 #undef OOPISH_FIELD</span>
<span class="line-added">554 #undef STATIC_FIELD</span>
<span class="line-added">555 #undef STATIC_OOPISH_FIELD</span>
<span class="line-added">556 </span>
<span class="line-added">557 #define FIELD(simpleClassName, name, type)                                \</span>
<span class="line-added">558   private:                                                                \</span>
<span class="line-added">559     static jfieldID _##name##_field_id;                                   \</span>
<span class="line-added">560   public:                                                                 \</span>
<span class="line-added">561     static type get_  ## name(JVMCIEnv* jvmciEnv, JVMCIObject obj);       \</span>
<span class="line-added">562     static void set_  ## name(JVMCIEnv* jvmciEnv, JVMCIObject obj, type x);</span>
<span class="line-added">563 </span>
<span class="line-added">564 #define OOPISH_FIELD(simpleClassName, name, type, hstype) \</span>
<span class="line-added">565   FIELD(simpleClassName, name, type)</span>
<span class="line-added">566 </span>
<span class="line-added">567 #define STATIC_FIELD(simpleClassName, name, type)   \</span>
<span class="line-added">568   private:                                          \</span>
<span class="line-added">569     static jfieldID _##name##_field_id;             \</span>
<span class="line-added">570   public:                                           \</span>
<span class="line-added">571     static type get_  ## name(JVMCIEnv* jvmciEnv);  \</span>
<span class="line-added">572     static void set_  ## name(JVMCIEnv* jvmciEnv, type x);</span>
<span class="line-added">573 </span>
<span class="line-added">574 #define STATIC_OOPISH_FIELD(simpleClassName, name, type, hstype) \</span>
<span class="line-added">575   STATIC_FIELD(simpleClassName, name, type)</span>
<span class="line-added">576 </span>
<span class="line-added">577 #define METHOD(jniCallType, jniGetMethod, hsCallType, returnType, className, methodName, signatureSymbolName, args) \</span>
<span class="line-added">578   public:                                                                                                           \</span>
<span class="line-added">579     static jmethodID methodName##_method() { return _##methodName##_method; }                                       \</span>
<span class="line-added">580   private:                                                                                                          \</span>
<span class="line-added">581     static jmethodID _##methodName##_method;</span>
<span class="line-added">582 </span>
<span class="line-added">583 #define CONSTRUCTOR(className, signature)                                                                           \</span>
<span class="line-added">584   public:                                                                                                           \</span>
<span class="line-added">585     static jmethodID constructor() { return _constructor; }                                                         \</span>
<span class="line-added">586   private:                                                                                                          \</span>
<span class="line-added">587     static jmethodID _constructor;</span>
<span class="line-added">588 </span>
<span class="line-added">589 /**</span>
<span class="line-added">590  * JNI based interface to Java classes, methods and objects. For example:</span>
591  *
<span class="line-modified">592  * class JNIJVMCI {</span>
<span class="line-modified">593  *   ...</span>
<span class="line-modified">594  *   class Architecture {</span>
<span class="line-modified">595  *     static void initialize(JVMCIEnv* env);</span>
<span class="line-modified">596  *     static bool is_instance(JVMCIEnv* env, JVMCIObject object);</span>
<span class="line-modified">597  *    private:</span>
<span class="line-modified">598  *     static void check(oop obj, const char *field_name, int offset);</span>
<span class="line-modified">599  *     static jclass _class;</span>
<span class="line-modified">600  *    public:</span>
<span class="line-modified">601  *     static jclass clazz() { return _class; }</span>
<span class="line-modified">602  *     static jclass jdk_vm_ci_code_Architecture_class() { return _class; }</span>
<span class="line-added">603  *    private:</span>
<span class="line-added">604  *     static jfieldID _wordKind_field_id;</span>
<span class="line-added">605  *    public:</span>
<span class="line-added">606  *     static JVMCIObject get_wordKind(JVMCIEnv *env, JVMCIObject obj) { ... }</span>
<span class="line-added">607  *     static void set_wordKind(JVMCIEnv *env, JVMCIObject obj, JVMCIObject x) { ... }</span>
<span class="line-added">608  *   }</span>
<span class="line-added">609  *   ...</span>
610  * };

611  */
<span class="line-added">612 class JNIJVMCI {</span>
<span class="line-added">613   friend class JVMCIEnv;</span>
614 
<span class="line-modified">615   static jclass _byte_array;</span>
<span class="line-modified">616   static jclass _box_classes[T_CONFLICT+1];</span>
<span class="line-modified">617   static jfieldID _box_fields[T_CONFLICT+1];</span>
<span class="line-modified">618   static jmethodID _box_constructors[T_CONFLICT+1];</span>
<span class="line-modified">619   static jmethodID _Class_getName_method;</span>


































































































































































































































































620 
<span class="line-modified">621   static jmethodID _HotSpotResolvedJavaMethodImpl_fromMetaspace_method;</span>
<span class="line-modified">622   static jmethodID _HotSpotConstantPool_fromMetaspace_method;</span>
<span class="line-modified">623   static jmethodID _HotSpotResolvedObjectTypeImpl_fromMetaspace_method;</span>
<span class="line-modified">624   static jmethodID _HotSpotResolvedPrimitiveType_fromMetaspace_method;</span>




625 
<span class="line-modified">626  public:</span>
<span class="line-added">627   static jmethodID Class_getName_method() { return _Class_getName_method; }</span>
628 
<span class="line-modified">629   static jclass    byte_array()           { assert(_byte_array != NULL, &quot;uninit&quot;);      return _byte_array; }</span>







630 
<span class="line-modified">631   static jclass    box_class(BasicType type)       { assert(_box_classes[type]!= NULL, &quot;uninit&quot;);      return _box_classes[type]; }</span>
<span class="line-modified">632   static jfieldID  box_field(BasicType type)       { assert(_box_fields[type]!= NULL, &quot;uninit&quot;);       return _box_fields[type]; }</span>
<span class="line-modified">633   static jmethodID box_constructor(BasicType type) { assert(_box_constructors[type]!= NULL, &quot;uninit&quot;); return _box_constructors[type]; }</span>
<span class="line-modified">634 </span>
<span class="line-modified">635   static jmethodID HotSpotResolvedJavaMethodImpl_fromMetaspace_method()     { assert(_HotSpotResolvedJavaMethodImpl_fromMetaspace_method     != NULL, &quot;uninit&quot;); return _HotSpotResolvedJavaMethodImpl_fromMetaspace_method; }</span>
<span class="line-modified">636   static jmethodID HotSpotConstantPool_fromMetaspace_method()           { assert(_HotSpotConstantPool_fromMetaspace_method           != NULL, &quot;uninit&quot;); return _HotSpotConstantPool_fromMetaspace_method; }</span>
<span class="line-modified">637   static jmethodID HotSpotResolvedObjectTypeImpl_fromMetaspace_method() { assert(_HotSpotResolvedObjectTypeImpl_fromMetaspace_method != NULL, &quot;uninit&quot;); return _HotSpotResolvedObjectTypeImpl_fromMetaspace_method; }</span>
<span class="line-modified">638   static jmethodID HotSpotResolvedPrimitiveType_fromMetaspace_method()  { assert(_HotSpotResolvedPrimitiveType_fromMetaspace_method  != NULL, &quot;uninit&quot;); return _HotSpotResolvedPrimitiveType_fromMetaspace_method; }</span>
<span class="line-modified">639 </span>
<span class="line-modified">640   static void initialize_ids(JNIEnv* env);</span>
<span class="line-modified">641   static void initialize_field_id(JNIEnv* env, jfieldID &amp;dest_offset, jclass klass, const char* klass_name, const char* name, const char* signature, bool static_field);</span>
<span class="line-modified">642 </span>
<span class="line-modified">643   static jobject resolve_handle(JVMCIObject obj) { return obj.as_jobject(); }</span>
<span class="line-modified">644   static JVMCIObject wrap(jobject obj) { return JVMCIObject(obj, false); }</span>
<span class="line-modified">645 </span>
<span class="line-modified">646   JVMCI_CLASSES_DO(JNI_START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OBJECT_FIELD, PRIMARRAY_FIELD, OBJECTARRAY_FIELD, STATIC_OBJECT_FIELD, STATIC_OBJECTARRAY_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD, METHOD, CONSTRUCTOR)</span>
<span class="line-modified">647 };</span>
<span class="line-modified">648 </span>
<span class="line-modified">649 #undef JNI_START_CLASS</span>





650 #undef START_CLASS
651 #undef END_CLASS
<span class="line-added">652 #undef METHOD</span>
<span class="line-added">653 #undef CONSTRUCTOR</span>
654 #undef FIELD
655 #undef CHAR_FIELD
656 #undef INT_FIELD
657 #undef BOOLEAN_FIELD
658 #undef LONG_FIELD
659 #undef FLOAT_FIELD
<span class="line-modified">660 #undef OBJECT_FIELD</span>
<span class="line-modified">661 #undef PRIMARRAY_FIELD</span>
<span class="line-modified">662 #undef OBJECTARRAY_FIELD</span>
<span class="line-added">663 #undef FIELD</span>
<span class="line-added">664 #undef OOPISH_FIELD</span>
<span class="line-added">665 #undef STATIC_FIELD</span>
666 #undef STATIC_OOPISH_FIELD
<span class="line-modified">667 #undef STATIC_FIELD</span>
<span class="line-modified">668 #undef STATIC_OBJECT_FIELD</span>
<span class="line-added">669 #undef STATIC_OBJECTARRAY_FIELD</span>
670 #undef STATIC_INT_FIELD
671 #undef STATIC_BOOLEAN_FIELD
672 #undef STATIC_PRIMITIVE_FIELD
673 #undef EMPTY_CAST
674 


675 #endif // SHARE_JVMCI_JVMCIJAVACLASSES_HPP
</pre>
</td>
</tr>
</table>
<center><a href="jvmciJavaClasses.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmciRuntime.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>