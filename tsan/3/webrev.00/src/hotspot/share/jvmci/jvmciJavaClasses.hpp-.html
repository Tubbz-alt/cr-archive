<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/hotspot/share/jvmci/jvmciJavaClasses.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 #ifndef SHARE_JVMCI_JVMCIJAVACLASSES_HPP
 25 #define SHARE_JVMCI_JVMCIJAVACLASSES_HPP
 26 
 27 #include &quot;classfile/systemDictionary.hpp&quot;
 28 #include &quot;oops/access.hpp&quot;
 29 #include &quot;oops/instanceMirrorKlass.hpp&quot;
 30 #include &quot;oops/oop.hpp&quot;
 31 
 32 class JVMCIJavaClasses : AllStatic {
 33  public:
 34   static void compute_offsets(TRAPS);
 35 };
 36 
 37 /* This macro defines the structure of the JVMCI classes accessed from VM code.
 38  * It will generate classes with accessors similar to javaClasses.hpp, but with specializations for oops, Handles and jni handles.
 39  *
 40  * The public interface of these classes will look like this:
 41 
 42  * class StackSlot : AllStatic {
 43  * public:
 44  *   static Klass* klass();
 45  *   static jint  index(oop obj);
 46  *   static jint  index(Handle obj);
 47  *   static jint  index(jobject obj);
 48  *   static void set_index(oop obj, jint x);
 49  *   static void set_index(Handle obj, jint x);
 50  *   static void set_index(jobject obj, jint x);
 51  * };
 52  *
 53  */
 54 
 55 #define COMPILER_CLASSES_DO(start_class, end_class, char_field, int_field, boolean_field, long_field, float_field, oop_field, typeArrayOop_field, objArrayOop_field, static_oop_field, static_objArrayOop_field, static_int_field, static_boolean_field) \
 56   start_class(Architecture)                                                                                                                                    \
 57     oop_field(Architecture, wordKind, &quot;Ljdk/vm/ci/meta/PlatformKind;&quot;)                                                                                         \
 58   end_class                                                                                                                                                    \
 59   start_class(TargetDescription)                                                                                                                               \
 60     oop_field(TargetDescription, arch, &quot;Ljdk/vm/ci/code/Architecture;&quot;)                                                                                        \
 61   end_class                                                                                                                                                    \
 62   start_class(HotSpotResolvedObjectTypeImpl)                                                                                                                   \
 63     oop_field(HotSpotResolvedObjectTypeImpl, javaClass, &quot;Ljava/lang/Class;&quot;)                                                                                   \
 64   end_class                                                                                                                                                    \
 65   start_class(HotSpotResolvedJavaMethodImpl)                                                                                                                   \
 66     long_field(HotSpotResolvedJavaMethodImpl, metaspaceMethod)                                                                                                 \
 67   end_class                                                                                                                                                    \
 68   start_class(InstalledCode)                                                                                                                                   \
 69     long_field(InstalledCode, address)                                                                                                                         \
 70     long_field(InstalledCode, entryPoint)                                                                                                                      \
 71     long_field(InstalledCode, version)                                                                                                                         \
 72     oop_field(InstalledCode, name, &quot;Ljava/lang/String;&quot;)                                                                                                       \
 73   end_class                                                                                                                                                    \
 74   start_class(HotSpotInstalledCode)                                                                                                                            \
 75     int_field(HotSpotInstalledCode, size)                                                                                                                      \
 76     long_field(HotSpotInstalledCode, codeStart)                                                                                                                \
 77     int_field(HotSpotInstalledCode, codeSize)                                                                                                                  \
 78   end_class                                                                                                                                                    \
 79   start_class(HotSpotNmethod)                                                                                                                                  \
 80     boolean_field(HotSpotNmethod, isDefault)                                                                                                                   \
 81   end_class                                                                                                                                                    \
 82   start_class(HotSpotCompiledCode)                                                                                                                             \
 83     oop_field(HotSpotCompiledCode, name, &quot;Ljava/lang/String;&quot;)                                                                                                 \
 84     typeArrayOop_field(HotSpotCompiledCode, targetCode, &quot;[B&quot;)                                                                                                  \
 85     int_field(HotSpotCompiledCode, targetCodeSize)                                                                                                             \
 86     objArrayOop_field(HotSpotCompiledCode, sites, &quot;[Ljdk/vm/ci/code/site/Site;&quot;)                                                                               \
 87     objArrayOop_field(HotSpotCompiledCode, assumptions, &quot;[Ljdk/vm/ci/meta/Assumptions$Assumption;&quot;)                                                            \
 88     objArrayOop_field(HotSpotCompiledCode, methods, &quot;[Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                    \
 89     objArrayOop_field(HotSpotCompiledCode, comments, &quot;[Ljdk/vm/ci/hotspot/HotSpotCompiledCode$Comment;&quot;)                                                       \
 90     typeArrayOop_field(HotSpotCompiledCode, dataSection, &quot;[B&quot;)                                                                                                 \
 91     int_field(HotSpotCompiledCode, dataSectionAlignment)                                                                                                       \
 92     objArrayOop_field(HotSpotCompiledCode, dataSectionPatches, &quot;[Ljdk/vm/ci/code/site/DataPatch;&quot;)                                                             \
 93     boolean_field(HotSpotCompiledCode, isImmutablePIC)                                                                                                         \
 94     int_field(HotSpotCompiledCode, totalFrameSize)                                                                                                             \
 95     oop_field(HotSpotCompiledCode, deoptRescueSlot, &quot;Ljdk/vm/ci/code/StackSlot;&quot;)                                                                              \
 96   end_class                                                                                                                                                    \
 97   start_class(HotSpotCompiledCode_Comment)                                                                                                                     \
 98     oop_field(HotSpotCompiledCode_Comment, text, &quot;Ljava/lang/String;&quot;)                                                                                         \
 99     int_field(HotSpotCompiledCode_Comment, pcOffset)                                                                                                           \
100   end_class                                                                                                                                                    \
101   start_class(HotSpotCompiledNmethod)                                                                                                                          \
102     oop_field(HotSpotCompiledNmethod, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)                                                                 \
103     oop_field(HotSpotCompiledNmethod, installationFailureMessage, &quot;Ljava/lang/String;&quot;)                                                                        \
104     int_field(HotSpotCompiledNmethod, entryBCI)                                                                                                                \
105     int_field(HotSpotCompiledNmethod, id)                                                                                                                      \
106     long_field(HotSpotCompiledNmethod, jvmciEnv)                                                                                                               \
107     boolean_field(HotSpotCompiledNmethod, hasUnsafeAccess)                                                                                                     \
108   end_class                                                                                                                                                    \
109   start_class(HotSpotJVMCIMetaAccessContext)                                                                                                                   \
110     static_objArrayOop_field(HotSpotJVMCIMetaAccessContext, allContexts, &quot;[Ljava/lang/ref/WeakReference;&quot;)                                                     \
111     objArrayOop_field(HotSpotJVMCIMetaAccessContext, metadataRoots, &quot;[Ljava/lang/Object;&quot;)                                                                     \
112   end_class                                                                                                                                                    \
113   start_class(HotSpotForeignCallTarget)                                                                                                                        \
114     long_field(HotSpotForeignCallTarget, address)                                                                                                              \
115   end_class                                                                                                                                                    \
116   start_class(VMField)                                                                                                                                         \
117     oop_field(VMField, name, &quot;Ljava/lang/String;&quot;)                                                                                                             \
118     oop_field(VMField, type, &quot;Ljava/lang/String;&quot;)                                                                                                             \
119     long_field(VMField, offset)                                                                                                                                \
120     long_field(VMField, address)                                                                                                                               \
121     oop_field(VMField, value, &quot;Ljava/lang/Object;&quot;)                                                                                                            \
122   end_class                                                                                                                                                    \
123   start_class(VMFlag)                                                                                                                                          \
124     oop_field(VMFlag, name, &quot;Ljava/lang/String;&quot;)                                                                                                              \
125     oop_field(VMFlag, type, &quot;Ljava/lang/String;&quot;)                                                                                                              \
126     oop_field(VMFlag, value, &quot;Ljava/lang/Object;&quot;)                                                                                                             \
127   end_class                                                                                                                                                    \
128   start_class(VMIntrinsicMethod)                                                                                                                               \
129     oop_field(VMIntrinsicMethod, declaringClass, &quot;Ljava/lang/String;&quot;)                                                                                         \
130     oop_field(VMIntrinsicMethod, name, &quot;Ljava/lang/String;&quot;)                                                                                                   \
131     oop_field(VMIntrinsicMethod, descriptor, &quot;Ljava/lang/String;&quot;)                                                                                             \
132     int_field(VMIntrinsicMethod, id)                                                                                                                           \
133   end_class                                                                                                                                                    \
134   start_class(Assumptions_NoFinalizableSubclass)                                                                                                               \
135     oop_field(Assumptions_NoFinalizableSubclass, receiverType, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                            \
136   end_class                                                                                                                                                    \
137   start_class(Assumptions_ConcreteSubtype)                                                                                                                     \
138     oop_field(Assumptions_ConcreteSubtype, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                       \
139     oop_field(Assumptions_ConcreteSubtype, subtype, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                       \
140   end_class                                                                                                                                                    \
141   start_class(Assumptions_LeafType)                                                                                                                            \
142     oop_field(Assumptions_LeafType, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                              \
143   end_class                                                                                                                                                    \
144   start_class(Assumptions_ConcreteMethod)                                                                                                                      \
145     oop_field(Assumptions_ConcreteMethod, method, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                       \
146     oop_field(Assumptions_ConcreteMethod, context, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                        \
147     oop_field(Assumptions_ConcreteMethod, impl, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                         \
148   end_class                                                                                                                                                    \
149   start_class(Assumptions_CallSiteTargetValue)                                                                                                                 \
150     oop_field(Assumptions_CallSiteTargetValue, callSite, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)                                                                      \
151     oop_field(Assumptions_CallSiteTargetValue, methodHandle, &quot;Ljdk/vm/ci/meta/JavaConstant;&quot;)                                                                  \
152   end_class                                                                                                                                                    \
153   start_class(site_Site)                                                                                                                                       \
154     int_field(site_Site, pcOffset)                                                                                                                             \
155   end_class                                                                                                                                                    \
156   start_class(site_Call)                                                                                                                                       \
157     oop_field(site_Call, target, &quot;Ljdk/vm/ci/meta/InvokeTarget;&quot;)                                                                                              \
158     oop_field(site_Call, debugInfo, &quot;Ljdk/vm/ci/code/DebugInfo;&quot;)                                                                                              \
159   end_class                                                                                                                                                    \
160   start_class(site_DataPatch)                                                                                                                                  \
161     oop_field(site_DataPatch, reference, &quot;Ljdk/vm/ci/code/site/Reference;&quot;)                                                                                    \
162   end_class                                                                                                                                                    \
163   start_class(site_ConstantReference)                                                                                                                          \
164     oop_field(site_ConstantReference, constant, &quot;Ljdk/vm/ci/meta/VMConstant;&quot;)                                                                                 \
165   end_class                                                                                                                                                    \
166   start_class(site_DataSectionReference)                                                                                                                       \
167     int_field(site_DataSectionReference, offset)                                                                                                               \
168   end_class                                                                                                                                                    \
169   start_class(site_InfopointReason)                                                                                                                            \
170     static_oop_field(site_InfopointReason, SAFEPOINT, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                                 \
171     static_oop_field(site_InfopointReason, CALL, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                                      \
172     static_oop_field(site_InfopointReason, IMPLICIT_EXCEPTION, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                        \
173   end_class                                                                                                                                                    \
174   start_class(site_Infopoint)                                                                                                                                  \
175     oop_field(site_Infopoint, debugInfo, &quot;Ljdk/vm/ci/code/DebugInfo;&quot;)                                                                                         \
176     oop_field(site_Infopoint, reason, &quot;Ljdk/vm/ci/code/site/InfopointReason;&quot;)                                                                                 \
177   end_class                                                                                                                                                    \
178   start_class(site_ExceptionHandler)                                                                                                                           \
179     int_field(site_ExceptionHandler, handlerPos)                                                                                                               \
180   end_class                                                                                                                                                    \
181   start_class(site_Mark)                                                                                                                                       \
182     oop_field(site_Mark, id, &quot;Ljava/lang/Object;&quot;)                                                                                                             \
183   end_class                                                                                                                                                    \
184   start_class(HotSpotCompilationRequestResult)                                                                                                                 \
185     oop_field(HotSpotCompilationRequestResult, failureMessage, &quot;Ljava/lang/String;&quot;)                                                                           \
186     boolean_field(HotSpotCompilationRequestResult, retry)                                                                                                      \
187     int_field(HotSpotCompilationRequestResult, inlinedBytecodes)                                                                                               \
188   end_class                                                                                                                                                    \
189   start_class(DebugInfo)                                                                                                                                       \
190     oop_field(DebugInfo, bytecodePosition, &quot;Ljdk/vm/ci/code/BytecodePosition;&quot;)                                                                                \
191     oop_field(DebugInfo, referenceMap, &quot;Ljdk/vm/ci/code/ReferenceMap;&quot;)                                                                                        \
192     oop_field(DebugInfo, calleeSaveInfo, &quot;Ljdk/vm/ci/code/RegisterSaveLayout;&quot;)                                                                                \
193     objArrayOop_field(DebugInfo, virtualObjectMapping, &quot;[Ljdk/vm/ci/code/VirtualObject;&quot;)                                                                      \
194   end_class                                                                                                                                                    \
195   start_class(HotSpotReferenceMap)                                                                                                                             \
196     objArrayOop_field(HotSpotReferenceMap, objects, &quot;[Ljdk/vm/ci/code/Location;&quot;)                                                                              \
197     objArrayOop_field(HotSpotReferenceMap, derivedBase, &quot;[Ljdk/vm/ci/code/Location;&quot;)                                                                          \
198     typeArrayOop_field(HotSpotReferenceMap, sizeInBytes, &quot;[I&quot;)                                                                                                 \
199     int_field(HotSpotReferenceMap, maxRegisterSize)                                                                                                            \
200   end_class                                                                                                                                                    \
201   start_class(RegisterSaveLayout)                                                                                                                              \
202     objArrayOop_field(RegisterSaveLayout, registers, &quot;[Ljdk/vm/ci/code/Register;&quot;)                                                                             \
203     typeArrayOop_field(RegisterSaveLayout, slots, &quot;[I&quot;)                                                                                                        \
204   end_class                                                                                                                                                    \
205   start_class(BytecodeFrame)                                                                                                                                   \
206     objArrayOop_field(BytecodeFrame, values, &quot;[Ljdk/vm/ci/meta/JavaValue;&quot;)                                                                                    \
207     objArrayOop_field(BytecodeFrame, slotKinds, &quot;[Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                  \
208     int_field(BytecodeFrame, numLocals)                                                                                                                        \
209     int_field(BytecodeFrame, numStack)                                                                                                                         \
210     int_field(BytecodeFrame, numLocks)                                                                                                                         \
211     boolean_field(BytecodeFrame, rethrowException)                                                                                                             \
212     boolean_field(BytecodeFrame, duringCall)                                                                                                                   \
213     static_int_field(BytecodeFrame, UNKNOWN_BCI)                                                                                                               \
214     static_int_field(BytecodeFrame, UNWIND_BCI)                                                                                                                \
215     static_int_field(BytecodeFrame, BEFORE_BCI)                                                                                                                \
216     static_int_field(BytecodeFrame, AFTER_BCI)                                                                                                                 \
217     static_int_field(BytecodeFrame, AFTER_EXCEPTION_BCI)                                                                                                       \
218     static_int_field(BytecodeFrame, INVALID_FRAMESTATE_BCI)                                                                                                    \
219   end_class                                                                                                                                                    \
220   start_class(BytecodePosition)                                                                                                                                \
221     oop_field(BytecodePosition, caller, &quot;Ljdk/vm/ci/code/BytecodePosition;&quot;)                                                                                   \
222     oop_field(BytecodePosition, method, &quot;Ljdk/vm/ci/meta/ResolvedJavaMethod;&quot;)                                                                                 \
223     int_field(BytecodePosition, bci)                                                                                                                           \
224   end_class                                                                                                                                                    \
225   start_class(JavaConstant)                                                                                                                                    \
226   end_class                                                                                                                                                    \
227   start_class(PrimitiveConstant)                                                                                                                               \
228     oop_field(PrimitiveConstant, kind, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                            \
229     long_field(PrimitiveConstant, primitive)                                                                                                                   \
230   end_class                                                                                                                                                    \
231   start_class(RawConstant)                                                                                                                                     \
232     long_field(RawConstant, primitive)                                                                                                                         \
233   end_class                                                                                                                                                    \
234   start_class(NullConstant)                                                                                                                                    \
235   end_class                                                                                                                                                    \
236   start_class(HotSpotCompressedNullConstant)                                                                                                                   \
237   end_class                                                                                                                                                    \
238   start_class(HotSpotObjectConstantImpl)                                                                                                                       \
239     oop_field(HotSpotObjectConstantImpl, object, &quot;Ljava/lang/Object;&quot;)                                                                                         \
240     boolean_field(HotSpotObjectConstantImpl, compressed)                                                                                                       \
241   end_class                                                                                                                                                    \
242   start_class(HotSpotMetaspaceConstantImpl)                                                                                                                    \
243     oop_field(HotSpotMetaspaceConstantImpl, metaspaceObject, &quot;Ljdk/vm/ci/hotspot/MetaspaceWrapperObject;&quot;)                                                     \
244     boolean_field(HotSpotMetaspaceConstantImpl, compressed)                                                                                                    \
245   end_class                                                                                                                                                    \
246   start_class(HotSpotSentinelConstant)                                                                                                                         \
247   end_class                                                                                                                                                    \
248   start_class(JavaKind)                                                                                                                                        \
249     char_field(JavaKind, typeChar)                                                                                                                             \
250     static_oop_field(JavaKind, Boolean, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                           \
251     static_oop_field(JavaKind, Byte, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                              \
252     static_oop_field(JavaKind, Char, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                              \
253     static_oop_field(JavaKind, Short, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                             \
254     static_oop_field(JavaKind, Int, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                               \
255     static_oop_field(JavaKind, Long, &quot;Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                              \
256   end_class                                                                                                                                                    \
257   start_class(ValueKind)                                                                                                                                       \
258     oop_field(ValueKind, platformKind, &quot;Ljdk/vm/ci/meta/PlatformKind;&quot;)                                                                                        \
259   end_class                                                                                                                                                    \
260   start_class(Value)                                                                                                                                           \
261     oop_field(Value, valueKind, &quot;Ljdk/vm/ci/meta/ValueKind;&quot;)                                                                                                  \
262     static_oop_field(Value, ILLEGAL, &quot;Ljdk/vm/ci/meta/AllocatableValue;&quot;)                                                                                      \
263   end_class                                                                                                                                                    \
264   start_class(RegisterValue)                                                                                                                                   \
265     oop_field(RegisterValue, reg, &quot;Ljdk/vm/ci/code/Register;&quot;)                                                                                                 \
266   end_class                                                                                                                                                    \
267   start_class(code_Location)                                                                                                                                   \
268     oop_field(code_Location, reg, &quot;Ljdk/vm/ci/code/Register;&quot;)                                                                                                 \
269     int_field(code_Location, offset)                                                                                                                           \
270   end_class                                                                                                                                                    \
271   start_class(code_Register)                                                                                                                                   \
272     int_field(code_Register, number)                                                                                                                           \
273     int_field(code_Register, encoding)                                                                                                                         \
274   end_class                                                                                                                                                    \
275   start_class(StackSlot)                                                                                                                                       \
276     int_field(StackSlot, offset)                                                                                                                               \
277     boolean_field(StackSlot, addFrameSize)                                                                                                                     \
278   end_class                                                                                                                                                    \
279   start_class(VirtualObject)                                                                                                                                   \
280     int_field(VirtualObject, id)                                                                                                                               \
281     oop_field(VirtualObject, type, &quot;Ljdk/vm/ci/meta/ResolvedJavaType;&quot;)                                                                                        \
282     objArrayOop_field(VirtualObject, values, &quot;[Ljdk/vm/ci/meta/JavaValue;&quot;)                                                                                    \
283     objArrayOop_field(VirtualObject, slotKinds, &quot;[Ljdk/vm/ci/meta/JavaKind;&quot;)                                                                                  \
284   end_class                                                                                                                                                    \
285   start_class(StackLockValue)                                                                                                                                  \
286     oop_field(StackLockValue, owner, &quot;Ljdk/vm/ci/meta/JavaValue;&quot;)                                                                                             \
287     oop_field(StackLockValue, slot, &quot;Ljdk/vm/ci/meta/AllocatableValue;&quot;)                                                                                       \
288     boolean_field(StackLockValue, eliminated)                                                                                                                  \
289   end_class                                                                                                                                                    \
290   start_class(HotSpotSpeculationLog)                                                                                                                           \
291     long_field(HotSpotSpeculationLog, lastFailed)                                                                                                              \
292   end_class                                                                                                                                                    \
293   start_class(HotSpotStackFrameReference)                                                                                                                      \
294     oop_field(HotSpotStackFrameReference, compilerToVM, &quot;Ljdk/vm/ci/hotspot/CompilerToVM;&quot;)                                                                    \
295     boolean_field(HotSpotStackFrameReference, objectsMaterialized)                                                                                             \
296     long_field(HotSpotStackFrameReference, stackPointer)                                                                                                       \
297     int_field(HotSpotStackFrameReference, frameNumber)                                                                                                         \
298     int_field(HotSpotStackFrameReference, bci)                                                                                                                 \
299     oop_field(HotSpotStackFrameReference, method, &quot;Ljdk/vm/ci/hotspot/HotSpotResolvedJavaMethod;&quot;)                                                             \
300     objArrayOop_field(HotSpotStackFrameReference, locals, &quot;[Ljava/lang/Object;&quot;)                                                                               \
301     typeArrayOop_field(HotSpotStackFrameReference, localIsVirtual, &quot;[Z&quot;)                                                                                       \
302   end_class                                                                                                                                                    \
303   start_class(HotSpotMetaData)                                                                                                                                 \
304     typeArrayOop_field(HotSpotMetaData, pcDescBytes, &quot;[B&quot;)                                                                                                     \
305     typeArrayOop_field(HotSpotMetaData, scopesDescBytes, &quot;[B&quot;)                                                                                                 \
306     typeArrayOop_field(HotSpotMetaData, relocBytes, &quot;[B&quot;)                                                                                                      \
307     typeArrayOop_field(HotSpotMetaData, exceptionBytes, &quot;[B&quot;)                                                                                                  \
308     typeArrayOop_field(HotSpotMetaData, oopMaps, &quot;[B&quot;)                                                                                                         \
309     objArrayOop_field(HotSpotMetaData, metadata, &quot;[Ljava/lang/Object;&quot;)                                                                                        \
310   end_class                                                                                                                                                    \
311   start_class(HotSpotConstantPool)                                                                                                                             \
312     long_field(HotSpotConstantPool, metaspaceConstantPool)                                                                                                     \
313   end_class                                                                                                                                                    \
314   start_class(HotSpotJVMCIRuntime)                                                                                                                             \
315     int_field(HotSpotJVMCIRuntime, compilationLevelAdjustment)                                                                                                 \
316   end_class                                                                                                                                                    \
317   /* end*/
318 
319 #define START_CLASS(name)                                                                                                                                      \
320 class name : AllStatic {                                                                                                                                       \
321   private:                                                                                                                                                     \
322     friend class JVMCICompiler;                                                                                                                                \
323     static void check(oop obj, const char* field_name, int offset);                                                                                            \
324     static void compute_offsets(TRAPS);                                                                                                                        \
325   public:                                                                                                                                                      \
326   static InstanceKlass* klass() { return SystemDictionary::name##_klass_is_loaded() ? SystemDictionary::name##_klass() : NULL; }
327 
328 #define END_CLASS };
329 
330 #define FIELD(name, type, accessor, cast)                                                                                                                         \
331     static int _##name##_offset;                                                                                                                                  \
332     static type name(oop obj)                   { check(obj, #name, _##name##_offset); return cast obj-&gt;accessor(_##name##_offset); }                             \
333     static type name(Handle obj)                { check(obj(), #name, _##name##_offset); return cast obj-&gt;accessor(_##name##_offset); }                           \
334     static type name(jobject obj);                                                                                                                                \
335     static void set_##name(oop obj, type x)     { check(obj, #name, _##name##_offset); obj-&gt;accessor##_put(_##name##_offset, x); }                                \
336     static void set_##name(Handle obj, type x)  { check(obj(), #name, _##name##_offset); obj-&gt;accessor##_put(_##name##_offset, x); }                              \
337     static void set_##name(jobject obj, type x);                                                                                                                  \
338 
339 #define EMPTY_CAST
340 #define CHAR_FIELD(klass, name) FIELD(name, jchar, char_field, EMPTY_CAST)
341 #define INT_FIELD(klass, name) FIELD(name, jint, int_field, EMPTY_CAST)
342 #define BOOLEAN_FIELD(klass, name) FIELD(name, jboolean, bool_field, EMPTY_CAST)
343 #define LONG_FIELD(klass, name) FIELD(name, jlong, long_field, EMPTY_CAST)
344 #define FLOAT_FIELD(klass, name) FIELD(name, jfloat, float_field, EMPTY_CAST)
345 #define OOP_FIELD(klass, name, signature) FIELD(name, oop, obj_field, EMPTY_CAST)
346 #define OBJARRAYOOP_FIELD(klass, name, signature) FIELD(name, objArrayOop, obj_field, (objArrayOop))
347 #define TYPEARRAYOOP_FIELD(klass, name, signature) FIELD(name, typeArrayOop, obj_field, (typeArrayOop))
348 #define STATIC_OOP_FIELD(klassName, name, signature) STATIC_OOPISH_FIELD(klassName, name, oop, signature)
349 #define STATIC_OBJARRAYOOP_FIELD(klassName, name, signature) STATIC_OOPISH_FIELD(klassName, name, objArrayOop, signature)
350 #define STATIC_OOPISH_FIELD(klassName, name, type, signature)                                                  \
351     static int _##name##_offset;                                                                               \
352     static type name();                                                                                        \
353     static void set_##name(type x);
354 #define STATIC_PRIMITIVE_FIELD(klassName, name, jtypename)                                                     \
355     static int _##name##_offset;                                                                               \
356     static jtypename name();                                                                                   \
357     static void set_##name(jtypename x);
358 
359 #define STATIC_INT_FIELD(klassName, name) STATIC_PRIMITIVE_FIELD(klassName, name, jint)
360 #define STATIC_BOOLEAN_FIELD(klassName, name) STATIC_PRIMITIVE_FIELD(klassName, name, jboolean)
361 
362 COMPILER_CLASSES_DO(START_CLASS, END_CLASS, CHAR_FIELD, INT_FIELD, BOOLEAN_FIELD, LONG_FIELD, FLOAT_FIELD, OOP_FIELD, TYPEARRAYOOP_FIELD, OBJARRAYOOP_FIELD, STATIC_OOP_FIELD, STATIC_OBJARRAYOOP_FIELD, STATIC_INT_FIELD, STATIC_BOOLEAN_FIELD)
363 #undef START_CLASS
364 #undef END_CLASS
365 #undef FIELD
366 #undef CHAR_FIELD
367 #undef INT_FIELD
368 #undef BOOLEAN_FIELD
369 #undef LONG_FIELD
370 #undef FLOAT_FIELD
371 #undef OOP_FIELD
372 #undef TYPEARRAYOOP_FIELD
373 #undef OBJARRAYOOP_FIELD
374 #undef STATIC_OOPISH_FIELD
375 #undef STATIC_OOP_FIELD
376 #undef STATIC_OBJARRAYOOP_FIELD
377 #undef STATIC_INT_FIELD
378 #undef STATIC_BOOLEAN_FIELD
379 #undef STATIC_PRIMITIVE_FIELD
380 #undef EMPTY_CAST
381 
382 void compute_offset(int &amp;dest_offset, Klass* klass, const char* name, const char* signature, bool static_field, TRAPS);
383 
384 #endif // SHARE_JVMCI_JVMCIJAVACLASSES_HPP
    </pre>
  </body>
</html>