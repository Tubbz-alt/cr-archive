<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jvmci/vmStructs_jvmci.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmci_globals.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmSymbols_jvmci.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jvmci/vmStructs_jvmci.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include &quot;precompiled.hpp&quot;
<span class="line-removed">  26 #include &quot;code/codeBlob.hpp&quot;</span>
<span class="line-removed">  27 #include &quot;compiler/abstractCompiler.hpp&quot;</span>
  28 #include &quot;compiler/compileBroker.hpp&quot;
<span class="line-removed">  29 #include &quot;gc/shared/cardTable.hpp&quot;</span>
  30 #include &quot;gc/shared/collectedHeap.hpp&quot;
  31 #include &quot;jvmci/jvmciCodeInstaller.hpp&quot;
  32 #include &quot;jvmci/jvmciCompilerToVM.hpp&quot;
<span class="line-removed">  33 #include &quot;jvmci/jvmciEnv.hpp&quot;</span>
  34 #include &quot;jvmci/jvmciRuntime.hpp&quot;
  35 #include &quot;jvmci/vmStructs_compiler_runtime.hpp&quot;
  36 #include &quot;jvmci/vmStructs_jvmci.hpp&quot;
<span class="line-removed">  37 #include &quot;oops/oop.hpp&quot;</span>
<span class="line-removed">  38 #include &quot;oops/oopHandle.hpp&quot;</span>
  39 #include &quot;oops/objArrayKlass.hpp&quot;
<span class="line-modified">  40 #include &quot;runtime/flags/jvmFlag.hpp&quot;</span>
<span class="line-removed">  41 #include &quot;runtime/globals.hpp&quot;</span>
  42 #include &quot;runtime/sharedRuntime.hpp&quot;
<span class="line-removed">  43 #include &quot;runtime/thread.hpp&quot;</span>
<span class="line-removed">  44 #include &quot;runtime/vm_version.hpp&quot;</span>
  45 #if INCLUDE_G1GC
<span class="line-removed">  46 #include &quot;gc/g1/g1BarrierSet.hpp&quot;</span>
  47 #include &quot;gc/g1/g1CardTable.hpp&quot;
  48 #include &quot;gc/g1/heapRegion.hpp&quot;
  49 #include &quot;gc/g1/g1ThreadLocalData.hpp&quot;
  50 #endif
  51 
  52 #define VM_STRUCTS(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field) \
  53   static_field(CompilerToVM::Data,             Klass_vtable_start_offset,              int)                                          \
  54   static_field(CompilerToVM::Data,             Klass_vtable_length_offset,             int)                                          \
  55                                                                                                                                      \
  56   static_field(CompilerToVM::Data,             Method_extra_stack_entries,             int)                                          \
  57                                                                                                                                      \
  58   static_field(CompilerToVM::Data,             SharedRuntime_ic_miss_stub,             address)                                      \
  59   static_field(CompilerToVM::Data,             SharedRuntime_handle_wrong_method_stub, address)                                      \
  60   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_unpack,        address)                                      \

  61   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_uncommon_trap, address)                                      \
  62                                                                                                                                      \
  63   static_field(CompilerToVM::Data,             ThreadLocalAllocBuffer_alignment_reserve, size_t)                                     \
  64                                                                                                                                      \
  65   static_field(CompilerToVM::Data,             Universe_collectedHeap,                 CollectedHeap*)                               \
  66   static_field(CompilerToVM::Data,             Universe_base_vtable_size,              int)                                          \
  67   static_field(CompilerToVM::Data,             Universe_narrow_oop_base,               address)                                      \
  68   static_field(CompilerToVM::Data,             Universe_narrow_oop_shift,              int)                                          \
  69   static_field(CompilerToVM::Data,             Universe_narrow_klass_base,             address)                                      \
  70   static_field(CompilerToVM::Data,             Universe_narrow_klass_shift,            int)                                          \
  71   static_field(CompilerToVM::Data,             Universe_non_oop_bits,                  void*)                                        \
  72   static_field(CompilerToVM::Data,             Universe_verify_oop_mask,               uintptr_t)                                    \
  73   static_field(CompilerToVM::Data,             Universe_verify_oop_bits,               uintptr_t)                                    \
  74                                                                                                                                      \
  75   static_field(CompilerToVM::Data,             _supports_inline_contig_alloc,          bool)                                         \
  76   static_field(CompilerToVM::Data,             _heap_end_addr,                         HeapWord**)                                   \
  77   static_field(CompilerToVM::Data,             _heap_top_addr,                         HeapWord* volatile*)                          \
  78                                                                                                                                      \
  79   static_field(CompilerToVM::Data,             _max_oop_map_stack_offset,              int)                                          \
  80   static_field(CompilerToVM::Data,             _fields_annotations_base_offset,        int)                                          \
</pre>
<hr />
<pre>
  96   static_field(CompilerToVM::Data,             dcos,                                   address)                                      \
  97   static_field(CompilerToVM::Data,             dtan,                                   address)                                      \
  98   static_field(CompilerToVM::Data,             dexp,                                   address)                                      \
  99   static_field(CompilerToVM::Data,             dlog,                                   address)                                      \
 100   static_field(CompilerToVM::Data,             dlog10,                                 address)                                      \
 101   static_field(CompilerToVM::Data,             dpow,                                   address)                                      \
 102                                                                                                                                      \
 103   static_field(CompilerToVM::Data,             symbol_init,                            address)                                      \
 104   static_field(CompilerToVM::Data,             symbol_clinit,                          address)                                      \
 105                                                                                                                                      \
 106   static_field(Abstract_VM_Version,            _features,                              uint64_t)                                     \
 107                                                                                                                                      \
 108   nonstatic_field(Annotations,                 _fields_annotations,                    Array&lt;AnnotationArray*&gt;*)                     \
 109                                                                                                                                      \
 110   nonstatic_field(Array&lt;int&gt;,                  _length,                                int)                                          \
 111   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                  sizeof(u1))                                   \
 112   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                  sizeof(u2))                                   \
 113   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                int)                                          \
 114   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                               Klass*)                                       \
 115                                                                                                                                      \
<span class="line-modified"> 116   volatile_nonstatic_field(BasicLock,          _displaced_header,                      markOop)                                      \</span>
 117                                                                                                                                      \
 118   static_field(CodeCache,                      _low_bound,                             address)                                      \
 119   static_field(CodeCache,                      _high_bound,                            address)                                      \
 120                                                                                                                                      \
 121   nonstatic_field(CollectedHeap,               _total_collections,                     unsigned int)                                 \
 122                                                                                                                                      \
 123   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                 int)                                          \
 124                                                                                                                                      \
 125   nonstatic_field(ConstantPool,                _tags,                                  Array&lt;u1&gt;*)                                   \
 126   nonstatic_field(ConstantPool,                _pool_holder,                           InstanceKlass*)                               \
 127   nonstatic_field(ConstantPool,                _length,                                int)                                          \
 128   nonstatic_field(ConstantPool,                _flags,                                 int)                                          \
 129                                                                                                                                      \
 130   nonstatic_field(ConstMethod,                 _constants,                             ConstantPool*)                                \
 131   nonstatic_field(ConstMethod,                 _flags,                                 u2)                                           \
 132   nonstatic_field(ConstMethod,                 _code_size,                             u2)                                           \
 133   nonstatic_field(ConstMethod,                 _name_index,                            u2)                                           \
 134   nonstatic_field(ConstMethod,                 _signature_index,                       u2)                                           \
 135   nonstatic_field(ConstMethod,                 _method_idnum,                          u2)                                           \
 136   nonstatic_field(ConstMethod,                 _max_stack,                             u2)                                           \
</pre>
<hr />
<pre>
 149   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                           intptr_t*)                                    \
 150   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                             address*)                                     \
 151   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                          intptr_t)                                     \
 152   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                           int)                                          \
 153                                                                                                                                      \
 154   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 155   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 156   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 157   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 158                                                                                                                                      \
 159   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
 160   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
 161   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*))                         \
 162   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
 163   static_field(JVMFlag,                        flags,                                         JVMFlag*)                              \
 164                                                                                                                                      \
 165   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 166   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 167   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 168   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
<span class="line-modified"> 169   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \</span>
 170   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 171                                                                                                                                      \
 172   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 173   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 174                                                                                                                                      \





 175   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 176   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 177   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 178   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 179   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 180   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \

 181   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 182   nonstatic_field(JavaThread,                  _pending_deoptimization,                       int)                                   \
<span class="line-modified"> 183   nonstatic_field(JavaThread,                  _pending_failed_speculation,                   long)                                  \</span>
 184   nonstatic_field(JavaThread,                  _pending_transfer_to_interpreter,              bool)                                  \
 185   nonstatic_field(JavaThread,                  _jvmci_counters,                               jlong*)                                \
 186   nonstatic_field(JavaThread,                  _should_post_on_exceptions_flag,               int)                                   \

 187   nonstatic_field(JavaThread,                  _reserved_stack_activation,                    address)                               \
 188                                                                                                                                      \
 189   static_field(java_lang_Class,                _klass_offset,                                 int)                                   \
 190   static_field(java_lang_Class,                _array_klass_offset,                           int)                                   \
 191                                                                                                                                      \
<span class="line-removed"> 192   nonstatic_field(JVMCIEnv,                    _task,                                         CompileTask*)                          \</span>
<span class="line-removed"> 193   nonstatic_field(JVMCIEnv,                    _jvmti_can_hotswap_or_post_breakpoint,         jbyte)                                 \</span>
<span class="line-removed"> 194   nonstatic_field(JVMCIEnv,                    _jvmti_can_access_local_variables,             jbyte)                                 \</span>
<span class="line-removed"> 195   nonstatic_field(JVMCIEnv,                    _jvmti_can_post_on_exceptions,                 jbyte)                                 \</span>
<span class="line-removed"> 196   nonstatic_field(JVMCIEnv,                    _jvmti_can_pop_frame,                          jbyte)                                 \</span>
<span class="line-removed"> 197                                                                                                                                      \</span>
 198   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
 199                                                                                                                                      \
 200   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 201   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 202   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 203   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 204   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \
 205   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 206   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
<span class="line-modified"> 207   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \</span>
 208   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \
 209   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 210   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 211   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \

 212                                                                                                                                      \
 213   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 214   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 215   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 216   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 217   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 218   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 219                                                                                                                                      \
 220   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 221   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 222   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 223   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 224   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 225   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 226   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 227   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
 228   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 229                                                                                                                                      \
 230   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 231   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
</pre>
<hr />
<pre>
 245   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 246   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 247   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 248   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 249   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 250   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 251   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 252   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 253   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 254   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 255   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 256   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 257   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 258   nonstatic_field(MethodData,                  _jvmci_ir_size,                                int)                                   \
 259                                                                                                                                      \
 260   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 261   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 262                                                                                                                                      \
 263   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 264                                                                                                                                      \
<span class="line-modified"> 265   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \</span>




 266   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 267                                                                                                                                      \
 268   static_field(os,                             _polling_page,                                 address)                               \
 269                                                                                                                                      \
<span class="line-removed"> 270   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \</span>
<span class="line-removed"> 271                                                                                                                                      \</span>
 272   static_field(StubRoutines,                _verify_oop_count,                                jint)                                  \
 273                                                                                                                                      \
 274   static_field(StubRoutines,                _throw_delayed_StackOverflowError_entry,          address)                               \
 275                                                                                                                                      \
 276   static_field(StubRoutines,                _jbyte_arraycopy,                                 address)                               \
 277   static_field(StubRoutines,                _jshort_arraycopy,                                address)                               \
 278   static_field(StubRoutines,                _jint_arraycopy,                                  address)                               \
 279   static_field(StubRoutines,                _jlong_arraycopy,                                 address)                               \
 280   static_field(StubRoutines,                _oop_arraycopy,                                   address)                               \
 281   static_field(StubRoutines,                _oop_arraycopy_uninit,                            address)                               \
 282   static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                        address)                               \
 283   static_field(StubRoutines,                _jshort_disjoint_arraycopy,                       address)                               \
 284   static_field(StubRoutines,                _jint_disjoint_arraycopy,                         address)                               \
 285   static_field(StubRoutines,                _jlong_disjoint_arraycopy,                        address)                               \
 286   static_field(StubRoutines,                _oop_disjoint_arraycopy,                          address)                               \
 287   static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                   address)                               \
 288   static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                         address)                               \
 289   static_field(StubRoutines,                _arrayof_jshort_arraycopy,                        address)                               \
 290   static_field(StubRoutines,                _arrayof_jint_arraycopy,                          address)                               \
 291   static_field(StubRoutines,                _arrayof_jlong_arraycopy,                         address)                               \
 292   static_field(StubRoutines,                _arrayof_oop_arraycopy,                           address)                               \
 293   static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                    address)                               \
 294   static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,                address)                               \
 295   static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,               address)                               \
 296   static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,                 address)                               \
 297   static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,                address)                               \
 298   static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,                  address)                               \
 299   static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,           address)                               \
 300   static_field(StubRoutines,                _checkcast_arraycopy,                             address)                               \
 301   static_field(StubRoutines,                _checkcast_arraycopy_uninit,                      address)                               \
 302   static_field(StubRoutines,                _unsafe_arraycopy,                                address)                               \
 303   static_field(StubRoutines,                _generic_arraycopy,                               address)                               \
 304                                                                                                                                      \
 305   static_field(StubRoutines,                _aescrypt_encryptBlock,                           address)                               \
 306   static_field(StubRoutines,                _aescrypt_decryptBlock,                           address)                               \
 307   static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,             address)                               \
 308   static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,             address)                               \


 309   static_field(StubRoutines,                _counterMode_AESCrypt,                            address)                               \
 310   static_field(StubRoutines,                _base64_encodeBlock,                              address)                               \
 311   static_field(StubRoutines,                _ghash_processBlocks,                             address)                               \
 312   static_field(StubRoutines,                _sha1_implCompress,                               address)                               \
 313   static_field(StubRoutines,                _sha1_implCompressMB,                             address)                               \
 314   static_field(StubRoutines,                _sha256_implCompress,                             address)                               \
 315   static_field(StubRoutines,                _sha256_implCompressMB,                           address)                               \
 316   static_field(StubRoutines,                _sha512_implCompress,                             address)                               \
 317   static_field(StubRoutines,                _sha512_implCompressMB,                           address)                               \
 318   static_field(StubRoutines,                _updateBytesCRC32,                                address)                               \
 319   static_field(StubRoutines,                _crc_table_adr,                                   address)                               \
 320   static_field(StubRoutines,                _crc32c_table_addr,                               address)                               \
 321   static_field(StubRoutines,                _updateBytesCRC32C,                               address)                               \
 322   static_field(StubRoutines,                _updateBytesAdler32,                              address)                               \
 323   static_field(StubRoutines,                _multiplyToLen,                                   address)                               \
 324   static_field(StubRoutines,                _squareToLen,                                     address)                               \
 325   static_field(StubRoutines,                _mulAdd,                                          address)                               \
 326   static_field(StubRoutines,                _montgomeryMultiply,                              address)                               \
 327   static_field(StubRoutines,                _montgomerySquare,                                address)                               \
 328   static_field(StubRoutines,                _vectorizedMismatch,                              address)                               \


 329                                                                                                                                      \
 330   nonstatic_field(Thread,                   _tlab,                                            ThreadLocalAllocBuffer)                \
 331   nonstatic_field(Thread,                   _allocated_bytes,                                 jlong)                                 \
 332   nonstatic_field(Thread,                   _polling_page,                                    address)                               \
 333                                                                                                                                      \
 334   nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           HeapWord*)                             \
 335   nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             HeapWord*)                             \
 336   nonstatic_field(ThreadLocalAllocBuffer,   _end,                                             HeapWord*)                             \
 337   nonstatic_field(ThreadLocalAllocBuffer,   _pf_top,                                          HeapWord*)                             \
 338   nonstatic_field(ThreadLocalAllocBuffer,   _desired_size,                                    size_t)                                \
 339   nonstatic_field(ThreadLocalAllocBuffer,   _refill_waste_limit,                              size_t)                                \
 340   nonstatic_field(ThreadLocalAllocBuffer,   _number_of_refills,                               unsigned)                              \
 341   nonstatic_field(ThreadLocalAllocBuffer,   _fast_refill_waste,                               unsigned)                              \
 342   nonstatic_field(ThreadLocalAllocBuffer,   _slow_allocations,                                unsigned)                              \
 343                                                                                                                                      \
 344   nonstatic_field(ThreadShadow,             _pending_exception,                               oop)                                   \
 345                                                                                                                                      \
 346   static_field(vmSymbols,                   _symbols[0],                                      Symbol*)                               \
 347                                                                                                                                      \
 348   nonstatic_field(vtableEntry,              _method,                                          Method*)                               \
 349 
 350 #define VM_TYPES(declare_type, declare_toplevel_type, declare_integer_type, declare_unsigned_integer_type) \
 351   declare_integer_type(bool)                                              \
 352   declare_unsigned_integer_type(size_t)                                   \
 353   declare_integer_type(intx)                                              \
 354   declare_unsigned_integer_type(uintx)                                    \
 355                                                                           \
 356   declare_toplevel_type(BasicLock)                                        \
 357   declare_toplevel_type(CompilerToVM)                                     \
 358   declare_toplevel_type(ExceptionTableElement)                            \
 359   declare_toplevel_type(JVMFlag)                                          \
 360   declare_toplevel_type(JVMFlag*)                                         \
 361   declare_toplevel_type(InvocationCounter)                                \

 362   declare_toplevel_type(JVMCIEnv)                                         \
 363   declare_toplevel_type(LocalVariableTableElement)                        \
 364   declare_toplevel_type(narrowKlass)                                      \

 365   declare_toplevel_type(Symbol*)                                          \
 366   declare_toplevel_type(vtableEntry)                                      \
 367                                                                           \
 368   declare_toplevel_type(oopDesc)                                          \
 369     declare_type(arrayOopDesc, oopDesc)                                   \
 370                                                                           \
 371   declare_toplevel_type(MetaspaceObj)                                     \
 372     declare_type(Metadata, MetaspaceObj)                                  \
 373     declare_type(Klass, Metadata)                                         \
 374       declare_type(InstanceKlass, Klass)                                  \
 375     declare_type(ConstantPool, Metadata)                                  \
 376 
 377 #define VM_INT_CONSTANTS(declare_constant, declare_constant_with_value, declare_preprocessor_constant) \
 378   declare_preprocessor_constant(&quot;ASSERT&quot;, DEBUG_ONLY(1) NOT_DEBUG(0))     \
 379   declare_preprocessor_constant(&quot;FIELDINFO_TAG_SIZE&quot;, FIELDINFO_TAG_SIZE) \
 380   declare_preprocessor_constant(&quot;STACK_BIAS&quot;, STACK_BIAS)                 \
 381                                                                           \
 382   declare_constant(CompLevel_none)                                        \
 383   declare_constant(CompLevel_simple)                                      \
 384   declare_constant(CompLevel_limited_profile)                             \
 385   declare_constant(CompLevel_full_profile)                                \
 386   declare_constant(CompLevel_full_optimization)                           \
 387   declare_constant(HeapWordSize)                                          \
 388   declare_constant(InvocationEntryBci)                                    \
 389   declare_constant(LogKlassAlignmentInBytes)                              \
 390                                                                           \
 391   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
 392   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
 393   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
 394   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
 395   declare_constant(JVM_ACC_IS_CLONEABLE_FAST)                             \
 396   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
 397   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
 398   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
 399   declare_preprocessor_constant(&quot;JVM_ACC_VARARGS&quot;, JVM_ACC_VARARGS)       \
 400   declare_preprocessor_constant(&quot;JVM_ACC_BRIDGE&quot;, JVM_ACC_BRIDGE)         \
 401   declare_preprocessor_constant(&quot;JVM_ACC_ANNOTATION&quot;, JVM_ACC_ANNOTATION) \
 402   declare_preprocessor_constant(&quot;JVM_ACC_ENUM&quot;, JVM_ACC_ENUM)             \
 403   declare_preprocessor_constant(&quot;JVM_ACC_SYNTHETIC&quot;, JVM_ACC_SYNTHETIC)   \

 404                                                                           \
 405   declare_constant(JVM_CONSTANT_Utf8)                                     \
 406   declare_constant(JVM_CONSTANT_Unicode)                                  \
 407   declare_constant(JVM_CONSTANT_Integer)                                  \
 408   declare_constant(JVM_CONSTANT_Float)                                    \
 409   declare_constant(JVM_CONSTANT_Long)                                     \
 410   declare_constant(JVM_CONSTANT_Double)                                   \
 411   declare_constant(JVM_CONSTANT_Class)                                    \
 412   declare_constant(JVM_CONSTANT_String)                                   \
 413   declare_constant(JVM_CONSTANT_Fieldref)                                 \
 414   declare_constant(JVM_CONSTANT_Methodref)                                \
 415   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
 416   declare_constant(JVM_CONSTANT_NameAndType)                              \
 417   declare_constant(JVM_CONSTANT_MethodHandle)                             \
 418   declare_constant(JVM_CONSTANT_MethodType)                               \
 419   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \


 420   declare_constant(JVM_CONSTANT_ExternalMax)                              \
 421                                                                           \
 422   declare_constant(JVM_CONSTANT_Invalid)                                  \
 423   declare_constant(JVM_CONSTANT_InternalMin)                              \
 424   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
 425   declare_constant(JVM_CONSTANT_ClassIndex)                               \
 426   declare_constant(JVM_CONSTANT_StringIndex)                              \
 427   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
 428   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
 429   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
 430   declare_constant(JVM_CONSTANT_DynamicInError)                           \
 431   declare_constant(JVM_CONSTANT_InternalMax)                              \
 432                                                                           \
 433   declare_constant(ArrayData::array_len_off_set)                          \
 434   declare_constant(ArrayData::array_start_off_set)                        \
 435                                                                           \
 436   declare_constant(BitData::exception_seen_flag)                          \
 437   declare_constant(BitData::null_seen_flag)                               \
 438   declare_constant(BranchData::not_taken_off_set)                         \
 439                                                                           \
</pre>
<hr />
<pre>
 447   declare_constant(CodeInstaller::INVOKEINTERFACE)                        \
 448   declare_constant(CodeInstaller::INVOKEVIRTUAL)                          \
 449   declare_constant(CodeInstaller::INVOKESTATIC)                           \
 450   declare_constant(CodeInstaller::INVOKESPECIAL)                          \
 451   declare_constant(CodeInstaller::INLINE_INVOKE)                          \
 452   declare_constant(CodeInstaller::POLL_NEAR)                              \
 453   declare_constant(CodeInstaller::POLL_RETURN_NEAR)                       \
 454   declare_constant(CodeInstaller::POLL_FAR)                               \
 455   declare_constant(CodeInstaller::POLL_RETURN_FAR)                        \
 456   declare_constant(CodeInstaller::CARD_TABLE_SHIFT)                       \
 457   declare_constant(CodeInstaller::CARD_TABLE_ADDRESS)                     \
 458   declare_constant(CodeInstaller::HEAP_TOP_ADDRESS)                       \
 459   declare_constant(CodeInstaller::HEAP_END_ADDRESS)                       \
 460   declare_constant(CodeInstaller::NARROW_KLASS_BASE_ADDRESS)              \
 461   declare_constant(CodeInstaller::NARROW_OOP_BASE_ADDRESS)                \
 462   declare_constant(CodeInstaller::CRC_TABLE_ADDRESS)                      \
 463   declare_constant(CodeInstaller::LOG_OF_HEAP_REGION_GRAIN_BYTES)         \
 464   declare_constant(CodeInstaller::INLINE_CONTIGUOUS_ALLOCATION_SUPPORTED) \
 465   declare_constant(CodeInstaller::INVOKE_INVALID)                         \
 466                                                                           \







 467   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
 468   declare_constant(ConstantPool::_has_dynamic_constant)                   \
 469                                                                           \
 470   declare_constant(ConstMethod::_has_linenumber_table)                    \
 471   declare_constant(ConstMethod::_has_localvariable_table)                 \
 472   declare_constant(ConstMethod::_has_exception_table)                     \
 473   declare_constant(ConstMethod::_has_method_annotations)                  \
 474   declare_constant(ConstMethod::_has_parameter_annotations)               \
 475                                                                           \
 476   declare_constant(CounterData::count_off)                                \
 477                                                                           \
 478   declare_constant(DataLayout::cell_size)                                 \
 479   declare_constant(DataLayout::no_tag)                                    \
 480   declare_constant(DataLayout::bit_data_tag)                              \
 481   declare_constant(DataLayout::counter_data_tag)                          \
 482   declare_constant(DataLayout::jump_data_tag)                             \
 483   declare_constant(DataLayout::receiver_type_data_tag)                    \
 484   declare_constant(DataLayout::virtual_call_data_tag)                     \
 485   declare_constant(DataLayout::ret_data_tag)                              \
 486   declare_constant(DataLayout::branch_data_tag)                           \
</pre>
<hr />
<pre>
 519   declare_constant(Deoptimization::Reason_div0_check)                     \
 520   declare_constant(Deoptimization::Reason_loop_limit_check)               \
 521   declare_constant(Deoptimization::Reason_type_checked_inlining)          \
 522   declare_constant(Deoptimization::Reason_optimized_type_check)           \
 523   declare_constant(Deoptimization::Reason_aliasing)                       \
 524   declare_constant(Deoptimization::Reason_transfer_to_interpreter)        \
 525   declare_constant(Deoptimization::Reason_not_compiled_exception_handler) \
 526   declare_constant(Deoptimization::Reason_unresolved)                     \
 527   declare_constant(Deoptimization::Reason_jsr_mismatch)                   \
 528   declare_constant(Deoptimization::Reason_LIMIT)                          \
 529                                                                           \
 530   declare_constant(FieldInfo::access_flags_offset)                        \
 531   declare_constant(FieldInfo::name_index_offset)                          \
 532   declare_constant(FieldInfo::signature_index_offset)                     \
 533   declare_constant(FieldInfo::initval_index_offset)                       \
 534   declare_constant(FieldInfo::low_packed_offset)                          \
 535   declare_constant(FieldInfo::high_packed_offset)                         \
 536   declare_constant(FieldInfo::field_slots)                                \
 537                                                                           \
 538   declare_constant(InstanceKlass::linked)                                 \

 539   declare_constant(InstanceKlass::fully_initialized)                      \
 540   declare_constant(InstanceKlass::_misc_is_unsafe_anonymous)              \
 541                                                                           \
 542   declare_constant(JumpData::taken_off_set)                               \
 543   declare_constant(JumpData::displacement_off_set)                        \
 544                                                                           \
<span class="line-modified"> 545   declare_constant(JVMCIEnv::ok)                                          \</span>
<span class="line-modified"> 546   declare_constant(JVMCIEnv::dependencies_failed)                         \</span>
<span class="line-modified"> 547   declare_constant(JVMCIEnv::dependencies_invalid)                        \</span>
<span class="line-modified"> 548   declare_constant(JVMCIEnv::cache_full)                                  \</span>
<span class="line-removed"> 549   declare_constant(JVMCIEnv::code_too_large)                              \</span>
 550   declare_constant(JVMCIRuntime::none)                                    \
 551   declare_constant(JVMCIRuntime::by_holder)                               \
 552   declare_constant(JVMCIRuntime::by_full_signature)                       \
 553                                                                           \
 554   declare_constant(Klass::_lh_neutral_value)                              \
 555   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
 556   declare_constant(Klass::_lh_log2_element_size_shift)                    \
 557   declare_constant(Klass::_lh_log2_element_size_mask)                     \
 558   declare_constant(Klass::_lh_element_type_shift)                         \
 559   declare_constant(Klass::_lh_element_type_mask)                          \
 560   declare_constant(Klass::_lh_header_size_shift)                          \
 561   declare_constant(Klass::_lh_header_size_mask)                           \
 562   declare_constant(Klass::_lh_array_tag_shift)                            \
 563   declare_constant(Klass::_lh_array_tag_type_value)                       \
 564   declare_constant(Klass::_lh_array_tag_obj_value)                        \
 565                                                                           \
<span class="line-modified"> 566   declare_constant(markOopDesc::no_hash)                                  \</span>
 567                                                                           \
 568   declare_constant(Method::_caller_sensitive)                             \
 569   declare_constant(Method::_force_inline)                                 \
 570   declare_constant(Method::_dont_inline)                                  \
 571   declare_constant(Method::_hidden)                                       \
 572   declare_constant(Method::_intrinsic_candidate)                          \
 573   declare_constant(Method::_reserved_stack_access)                        \
 574                                                                           \
 575   declare_constant(Method::nonvirtual_vtable_index)                       \
 576   declare_constant(Method::invalid_vtable_index)                          \
 577                                                                           \
 578   declare_constant(MultiBranchData::per_case_cell_count)                  \
 579                                                                           \
 580   declare_constant(ReceiverTypeData::nonprofiled_count_off_set)           \
 581   declare_constant(ReceiverTypeData::receiver_type_row_cell_count)        \
 582   declare_constant(ReceiverTypeData::receiver0_offset)                    \
 583   declare_constant(ReceiverTypeData::count0_offset)                       \
 584                                                                           \
 585   declare_constant(vmIntrinsics::_invokeBasic)                            \
 586   declare_constant(vmIntrinsics::_linkToVirtual)                          \
 587   declare_constant(vmIntrinsics::_linkToStatic)                           \
 588   declare_constant(vmIntrinsics::_linkToSpecial)                          \
 589   declare_constant(vmIntrinsics::_linkToInterface)                        \
 590                                                                           \
 591   declare_constant(vmSymbols::FIRST_SID)                                  \
 592   declare_constant(vmSymbols::SID_LIMIT)                                  \
 593 
 594 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant) \
 595   declare_constant(InvocationCounter::count_increment)                    \
 596   declare_constant(InvocationCounter::count_shift)                        \
 597                                                                           \
<span class="line-modified"> 598   declare_constant(markOopDesc::hash_shift)                               \</span>
 599                                                                           \
<span class="line-modified"> 600   declare_constant(markOopDesc::biased_lock_mask_in_place)                \</span>
<span class="line-modified"> 601   declare_constant(markOopDesc::age_mask_in_place)                        \</span>
<span class="line-modified"> 602   declare_constant(markOopDesc::epoch_mask_in_place)                      \</span>
<span class="line-modified"> 603   declare_constant(markOopDesc::hash_mask)                                \</span>
<span class="line-modified"> 604   declare_constant(markOopDesc::hash_mask_in_place)                       \</span>
 605                                                                           \
<span class="line-modified"> 606   declare_constant(markOopDesc::unlocked_value)                           \</span>
<span class="line-modified"> 607   declare_constant(markOopDesc::biased_lock_pattern)                      \</span>
 608                                                                           \
<span class="line-modified"> 609   declare_constant(markOopDesc::no_hash_in_place)                         \</span>
<span class="line-modified"> 610   declare_constant(markOopDesc::no_lock_in_place)                         \</span>
 611 
 612 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
 613   declare_function(SharedRuntime::register_finalizer)                     \
 614   declare_function(SharedRuntime::exception_handler_for_return_address)   \
 615   declare_function(SharedRuntime::OSR_migration_end)                      \
 616   declare_function(SharedRuntime::enable_stack_reserved_zone)             \
 617   declare_function(SharedRuntime::frem)                                   \
 618   declare_function(SharedRuntime::drem)                                   \
 619                                                                           \
 620   declare_function(os::dll_load)                                          \
 621   declare_function(os::dll_lookup)                                        \
 622   declare_function(os::javaTimeMillis)                                    \
 623   declare_function(os::javaTimeNanos)                                     \
 624                                                                           \
 625   declare_function(Deoptimization::fetch_unroll_info)                     \
 626   declare_function(Deoptimization::uncommon_trap)                         \
 627   declare_function(Deoptimization::unpack_frames)                         \
 628                                                                           \
 629   declare_function(JVMCIRuntime::new_instance) \
 630   declare_function(JVMCIRuntime::new_array) \
 631   declare_function(JVMCIRuntime::new_multi_array) \
 632   declare_function(JVMCIRuntime::dynamic_new_array) \
 633   declare_function(JVMCIRuntime::dynamic_new_instance) \
 634   \
 635   declare_function(JVMCIRuntime::new_instance_or_null) \
 636   declare_function(JVMCIRuntime::new_array_or_null) \
 637   declare_function(JVMCIRuntime::new_multi_array_or_null) \
 638   declare_function(JVMCIRuntime::dynamic_new_array_or_null) \
 639   declare_function(JVMCIRuntime::dynamic_new_instance_or_null) \
 640   \
<span class="line-removed"> 641   declare_function(JVMCIRuntime::thread_is_interrupted) \</span>
 642   declare_function(JVMCIRuntime::vm_message) \
 643   declare_function(JVMCIRuntime::identity_hash_code) \
 644   declare_function(JVMCIRuntime::exception_handler_for_pc) \
 645   declare_function(JVMCIRuntime::monitorenter) \
 646   declare_function(JVMCIRuntime::monitorexit) \
 647   declare_function(JVMCIRuntime::object_notify) \
 648   declare_function(JVMCIRuntime::object_notifyAll) \
 649   declare_function(JVMCIRuntime::throw_and_post_jvmti_exception) \
 650   declare_function(JVMCIRuntime::throw_klass_external_name_exception) \
 651   declare_function(JVMCIRuntime::throw_class_cast_exception) \
 652   declare_function(JVMCIRuntime::log_primitive) \
 653   declare_function(JVMCIRuntime::log_object) \
 654   declare_function(JVMCIRuntime::log_printf) \
 655   declare_function(JVMCIRuntime::vm_error) \
 656   declare_function(JVMCIRuntime::load_and_clear_exception) \
 657   G1GC_ONLY(declare_function(JVMCIRuntime::write_barrier_pre)) \
 658   G1GC_ONLY(declare_function(JVMCIRuntime::write_barrier_post)) \
 659   declare_function(JVMCIRuntime::validate_object) \
 660   \
 661   declare_function(JVMCIRuntime::test_deoptimize_call_int)
</pre>
<hr />
<pre>
 675   declare_constant_with_value(&quot;G1ThreadLocalData::dirty_card_queue_buffer_offset&quot;, in_bytes(G1ThreadLocalData::dirty_card_queue_buffer_offset()))
 676 
 677 #endif // INCLUDE_G1GC
 678 
 679 
 680 #ifdef LINUX
 681 
 682 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function) \
 683   declare_preprocessor_address(&quot;RTLD_DEFAULT&quot;, RTLD_DEFAULT)
 684 
 685 #endif
 686 
 687 
 688 #ifdef BSD
 689 
 690 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function) \
 691   declare_preprocessor_address(&quot;RTLD_DEFAULT&quot;, RTLD_DEFAULT)
 692 
 693 #endif
 694 
<span class="line-modified"> 695 // AARCH64 is defined in closed port, too. TARGET_ARCH_aarch64 is not.</span>
<span class="line-removed"> 696 #ifdef TARGET_ARCH_aarch64</span>
 697 
 698 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \

 699   volatile_nonstatic_field(JavaFrameAnchor, _last_Java_fp, intptr_t*)
 700 
 701 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 702   declare_constant(VM_Version::CPU_FP)                  \
 703   declare_constant(VM_Version::CPU_ASIMD)               \
 704   declare_constant(VM_Version::CPU_EVTSTRM)             \
 705   declare_constant(VM_Version::CPU_AES)                 \
 706   declare_constant(VM_Version::CPU_PMULL)               \
 707   declare_constant(VM_Version::CPU_SHA1)                \
 708   declare_constant(VM_Version::CPU_SHA2)                \
 709   declare_constant(VM_Version::CPU_CRC32)               \
 710   declare_constant(VM_Version::CPU_LSE)                 \
 711   declare_constant(VM_Version::CPU_STXR_PREFETCH)       \
 712   declare_constant(VM_Version::CPU_A53MAC)              \
 713   declare_constant(VM_Version::CPU_DMB_ATOMICS)
 714 
 715 #endif
 716 
 717 
 718 #ifdef X86
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include &quot;precompiled.hpp&quot;


  26 #include &quot;compiler/compileBroker.hpp&quot;

  27 #include &quot;gc/shared/collectedHeap.hpp&quot;
  28 #include &quot;jvmci/jvmciCodeInstaller.hpp&quot;
  29 #include &quot;jvmci/jvmciCompilerToVM.hpp&quot;

  30 #include &quot;jvmci/jvmciRuntime.hpp&quot;
  31 #include &quot;jvmci/vmStructs_compiler_runtime.hpp&quot;
  32 #include &quot;jvmci/vmStructs_jvmci.hpp&quot;


  33 #include &quot;oops/objArrayKlass.hpp&quot;
<span class="line-modified">  34 #include &quot;runtime/deoptimization.hpp&quot;</span>

  35 #include &quot;runtime/sharedRuntime.hpp&quot;


  36 #if INCLUDE_G1GC

  37 #include &quot;gc/g1/g1CardTable.hpp&quot;
  38 #include &quot;gc/g1/heapRegion.hpp&quot;
  39 #include &quot;gc/g1/g1ThreadLocalData.hpp&quot;
  40 #endif
  41 
  42 #define VM_STRUCTS(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field) \
  43   static_field(CompilerToVM::Data,             Klass_vtable_start_offset,              int)                                          \
  44   static_field(CompilerToVM::Data,             Klass_vtable_length_offset,             int)                                          \
  45                                                                                                                                      \
  46   static_field(CompilerToVM::Data,             Method_extra_stack_entries,             int)                                          \
  47                                                                                                                                      \
  48   static_field(CompilerToVM::Data,             SharedRuntime_ic_miss_stub,             address)                                      \
  49   static_field(CompilerToVM::Data,             SharedRuntime_handle_wrong_method_stub, address)                                      \
  50   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_unpack,        address)                                      \
<span class="line-added">  51   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_unpack_with_exception_in_tls,        address)                       \</span>
  52   static_field(CompilerToVM::Data,             SharedRuntime_deopt_blob_uncommon_trap, address)                                      \
  53                                                                                                                                      \
  54   static_field(CompilerToVM::Data,             ThreadLocalAllocBuffer_alignment_reserve, size_t)                                     \
  55                                                                                                                                      \
  56   static_field(CompilerToVM::Data,             Universe_collectedHeap,                 CollectedHeap*)                               \
  57   static_field(CompilerToVM::Data,             Universe_base_vtable_size,              int)                                          \
  58   static_field(CompilerToVM::Data,             Universe_narrow_oop_base,               address)                                      \
  59   static_field(CompilerToVM::Data,             Universe_narrow_oop_shift,              int)                                          \
  60   static_field(CompilerToVM::Data,             Universe_narrow_klass_base,             address)                                      \
  61   static_field(CompilerToVM::Data,             Universe_narrow_klass_shift,            int)                                          \
  62   static_field(CompilerToVM::Data,             Universe_non_oop_bits,                  void*)                                        \
  63   static_field(CompilerToVM::Data,             Universe_verify_oop_mask,               uintptr_t)                                    \
  64   static_field(CompilerToVM::Data,             Universe_verify_oop_bits,               uintptr_t)                                    \
  65                                                                                                                                      \
  66   static_field(CompilerToVM::Data,             _supports_inline_contig_alloc,          bool)                                         \
  67   static_field(CompilerToVM::Data,             _heap_end_addr,                         HeapWord**)                                   \
  68   static_field(CompilerToVM::Data,             _heap_top_addr,                         HeapWord* volatile*)                          \
  69                                                                                                                                      \
  70   static_field(CompilerToVM::Data,             _max_oop_map_stack_offset,              int)                                          \
  71   static_field(CompilerToVM::Data,             _fields_annotations_base_offset,        int)                                          \
</pre>
<hr />
<pre>
  87   static_field(CompilerToVM::Data,             dcos,                                   address)                                      \
  88   static_field(CompilerToVM::Data,             dtan,                                   address)                                      \
  89   static_field(CompilerToVM::Data,             dexp,                                   address)                                      \
  90   static_field(CompilerToVM::Data,             dlog,                                   address)                                      \
  91   static_field(CompilerToVM::Data,             dlog10,                                 address)                                      \
  92   static_field(CompilerToVM::Data,             dpow,                                   address)                                      \
  93                                                                                                                                      \
  94   static_field(CompilerToVM::Data,             symbol_init,                            address)                                      \
  95   static_field(CompilerToVM::Data,             symbol_clinit,                          address)                                      \
  96                                                                                                                                      \
  97   static_field(Abstract_VM_Version,            _features,                              uint64_t)                                     \
  98                                                                                                                                      \
  99   nonstatic_field(Annotations,                 _fields_annotations,                    Array&lt;AnnotationArray*&gt;*)                     \
 100                                                                                                                                      \
 101   nonstatic_field(Array&lt;int&gt;,                  _length,                                int)                                          \
 102   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                  sizeof(u1))                                   \
 103   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                  sizeof(u2))                                   \
 104   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                int)                                          \
 105   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                               Klass*)                                       \
 106                                                                                                                                      \
<span class="line-modified"> 107   volatile_nonstatic_field(BasicLock,          _displaced_header,                      markWord)                                     \</span>
 108                                                                                                                                      \
 109   static_field(CodeCache,                      _low_bound,                             address)                                      \
 110   static_field(CodeCache,                      _high_bound,                            address)                                      \
 111                                                                                                                                      \
 112   nonstatic_field(CollectedHeap,               _total_collections,                     unsigned int)                                 \
 113                                                                                                                                      \
 114   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                 int)                                          \
 115                                                                                                                                      \
 116   nonstatic_field(ConstantPool,                _tags,                                  Array&lt;u1&gt;*)                                   \
 117   nonstatic_field(ConstantPool,                _pool_holder,                           InstanceKlass*)                               \
 118   nonstatic_field(ConstantPool,                _length,                                int)                                          \
 119   nonstatic_field(ConstantPool,                _flags,                                 int)                                          \
 120                                                                                                                                      \
 121   nonstatic_field(ConstMethod,                 _constants,                             ConstantPool*)                                \
 122   nonstatic_field(ConstMethod,                 _flags,                                 u2)                                           \
 123   nonstatic_field(ConstMethod,                 _code_size,                             u2)                                           \
 124   nonstatic_field(ConstMethod,                 _name_index,                            u2)                                           \
 125   nonstatic_field(ConstMethod,                 _signature_index,                       u2)                                           \
 126   nonstatic_field(ConstMethod,                 _method_idnum,                          u2)                                           \
 127   nonstatic_field(ConstMethod,                 _max_stack,                             u2)                                           \
</pre>
<hr />
<pre>
 140   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                           intptr_t*)                                    \
 141   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                             address*)                                     \
 142   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                          intptr_t)                                     \
 143   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                           int)                                          \
 144                                                                                                                                      \
 145   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 146   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 147   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 148   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 149                                                                                                                                      \
 150   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
 151   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
 152   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*))                         \
 153   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
 154   static_field(JVMFlag,                        flags,                                         JVMFlag*)                              \
 155                                                                                                                                      \
 156   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 157   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 158   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 159   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
<span class="line-modified"> 160   nonstatic_field(InstanceKlass,               _misc_flags,                                   u4)                                    \</span>
 161   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 162                                                                                                                                      \
 163   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 164   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 165                                                                                                                                      \
<span class="line-added"> 166   nonstatic_field(JVMCICompileState,           _jvmti_can_hotswap_or_post_breakpoint,         jbyte)                                 \</span>
<span class="line-added"> 167   nonstatic_field(JVMCICompileState,           _jvmti_can_access_local_variables,             jbyte)                                 \</span>
<span class="line-added"> 168   nonstatic_field(JVMCICompileState,           _jvmti_can_post_on_exceptions,                 jbyte)                                 \</span>
<span class="line-added"> 169   nonstatic_field(JVMCICompileState,           _jvmti_can_pop_frame,                          jbyte)                                 \</span>
<span class="line-added"> 170                                                                                                                                      \</span>
 171   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 172   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 173   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 174   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 175   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 176   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
<span class="line-added"> 177   volatile_nonstatic_field(JavaThread,         _doing_unsafe_access,                          bool)                                  \</span>
 178   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 179   nonstatic_field(JavaThread,                  _pending_deoptimization,                       int)                                   \
<span class="line-modified"> 180   nonstatic_field(JavaThread,                  _pending_failed_speculation,                   jlong)                                 \</span>
 181   nonstatic_field(JavaThread,                  _pending_transfer_to_interpreter,              bool)                                  \
 182   nonstatic_field(JavaThread,                  _jvmci_counters,                               jlong*)                                \
 183   nonstatic_field(JavaThread,                  _should_post_on_exceptions_flag,               int)                                   \
<span class="line-added"> 184   nonstatic_field(JavaThread,                  _jni_environment,                              JNIEnv)                                \</span>
 185   nonstatic_field(JavaThread,                  _reserved_stack_activation,                    address)                               \
 186                                                                                                                                      \
 187   static_field(java_lang_Class,                _klass_offset,                                 int)                                   \
 188   static_field(java_lang_Class,                _array_klass_offset,                           int)                                   \
 189                                                                                                                                      \






 190   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
 191                                                                                                                                      \
 192   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 193   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 194   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 195   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 196   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \
 197   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 198   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
<span class="line-modified"> 199   nonstatic_field(Klass,                       _prototype_header,                             markWord)                              \</span>
 200   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \
 201   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 202   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 203   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
<span class="line-added"> 204   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \</span>
 205                                                                                                                                      \
 206   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 207   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 208   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 209   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 210   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 211   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 212                                                                                                                                      \
 213   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 214   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 215   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 216   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 217   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 218   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 219   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 220   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
 221   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 222                                                                                                                                      \
 223   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 224   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
</pre>
<hr />
<pre>
 238   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 239   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 240   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 241   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 242   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 243   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 244   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 245   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 246   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 247   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 248   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 249   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 250   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 251   nonstatic_field(MethodData,                  _jvmci_ir_size,                                int)                                   \
 252                                                                                                                                      \
 253   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 254   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 255                                                                                                                                      \
 256   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 257                                                                                                                                      \
<span class="line-modified"> 258   volatile_nonstatic_field(ObjectMonitor,      _cxq,                                   ObjectWaiter*)                                \</span>
<span class="line-added"> 259   volatile_nonstatic_field(ObjectMonitor,      _EntryList,                             ObjectWaiter*)                                \</span>
<span class="line-added"> 260   volatile_nonstatic_field(ObjectMonitor,      _succ,                                  Thread*)                                      \</span>
<span class="line-added"> 261                                                                                                                                      \</span>
<span class="line-added"> 262   volatile_nonstatic_field(oopDesc,            _mark,                                         markWord)                              \</span>
 263   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 264                                                                                                                                      \
 265   static_field(os,                             _polling_page,                                 address)                               \
 266                                                                                                                                      \


 267   static_field(StubRoutines,                _verify_oop_count,                                jint)                                  \
 268                                                                                                                                      \
 269   static_field(StubRoutines,                _throw_delayed_StackOverflowError_entry,          address)                               \
 270                                                                                                                                      \
 271   static_field(StubRoutines,                _jbyte_arraycopy,                                 address)                               \
 272   static_field(StubRoutines,                _jshort_arraycopy,                                address)                               \
 273   static_field(StubRoutines,                _jint_arraycopy,                                  address)                               \
 274   static_field(StubRoutines,                _jlong_arraycopy,                                 address)                               \
 275   static_field(StubRoutines,                _oop_arraycopy,                                   address)                               \
 276   static_field(StubRoutines,                _oop_arraycopy_uninit,                            address)                               \
 277   static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                        address)                               \
 278   static_field(StubRoutines,                _jshort_disjoint_arraycopy,                       address)                               \
 279   static_field(StubRoutines,                _jint_disjoint_arraycopy,                         address)                               \
 280   static_field(StubRoutines,                _jlong_disjoint_arraycopy,                        address)                               \
 281   static_field(StubRoutines,                _oop_disjoint_arraycopy,                          address)                               \
 282   static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                   address)                               \
 283   static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                         address)                               \
 284   static_field(StubRoutines,                _arrayof_jshort_arraycopy,                        address)                               \
 285   static_field(StubRoutines,                _arrayof_jint_arraycopy,                          address)                               \
 286   static_field(StubRoutines,                _arrayof_jlong_arraycopy,                         address)                               \
 287   static_field(StubRoutines,                _arrayof_oop_arraycopy,                           address)                               \
 288   static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                    address)                               \
 289   static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,                address)                               \
 290   static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,               address)                               \
 291   static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,                 address)                               \
 292   static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,                address)                               \
 293   static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,                  address)                               \
 294   static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,           address)                               \
 295   static_field(StubRoutines,                _checkcast_arraycopy,                             address)                               \
 296   static_field(StubRoutines,                _checkcast_arraycopy_uninit,                      address)                               \
 297   static_field(StubRoutines,                _unsafe_arraycopy,                                address)                               \
 298   static_field(StubRoutines,                _generic_arraycopy,                               address)                               \
 299                                                                                                                                      \
 300   static_field(StubRoutines,                _aescrypt_encryptBlock,                           address)                               \
 301   static_field(StubRoutines,                _aescrypt_decryptBlock,                           address)                               \
 302   static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,             address)                               \
 303   static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,             address)                               \
<span class="line-added"> 304   static_field(StubRoutines,                _electronicCodeBook_encryptAESCrypt,              address)                               \</span>
<span class="line-added"> 305   static_field(StubRoutines,                _electronicCodeBook_decryptAESCrypt,              address)                               \</span>
 306   static_field(StubRoutines,                _counterMode_AESCrypt,                            address)                               \
 307   static_field(StubRoutines,                _base64_encodeBlock,                              address)                               \
 308   static_field(StubRoutines,                _ghash_processBlocks,                             address)                               \
 309   static_field(StubRoutines,                _sha1_implCompress,                               address)                               \
 310   static_field(StubRoutines,                _sha1_implCompressMB,                             address)                               \
 311   static_field(StubRoutines,                _sha256_implCompress,                             address)                               \
 312   static_field(StubRoutines,                _sha256_implCompressMB,                           address)                               \
 313   static_field(StubRoutines,                _sha512_implCompress,                             address)                               \
 314   static_field(StubRoutines,                _sha512_implCompressMB,                           address)                               \
 315   static_field(StubRoutines,                _updateBytesCRC32,                                address)                               \
 316   static_field(StubRoutines,                _crc_table_adr,                                   address)                               \
 317   static_field(StubRoutines,                _crc32c_table_addr,                               address)                               \
 318   static_field(StubRoutines,                _updateBytesCRC32C,                               address)                               \
 319   static_field(StubRoutines,                _updateBytesAdler32,                              address)                               \
 320   static_field(StubRoutines,                _multiplyToLen,                                   address)                               \
 321   static_field(StubRoutines,                _squareToLen,                                     address)                               \
 322   static_field(StubRoutines,                _mulAdd,                                          address)                               \
 323   static_field(StubRoutines,                _montgomeryMultiply,                              address)                               \
 324   static_field(StubRoutines,                _montgomerySquare,                                address)                               \
 325   static_field(StubRoutines,                _vectorizedMismatch,                              address)                               \
<span class="line-added"> 326   static_field(StubRoutines,                _bigIntegerRightShiftWorker,                      address)                               \</span>
<span class="line-added"> 327   static_field(StubRoutines,                _bigIntegerLeftShiftWorker,                       address)                               \</span>
 328                                                                                                                                      \
 329   nonstatic_field(Thread,                   _tlab,                                            ThreadLocalAllocBuffer)                \
 330   nonstatic_field(Thread,                   _allocated_bytes,                                 jlong)                                 \
 331   nonstatic_field(Thread,                   _polling_page,                                    address)                               \
 332                                                                                                                                      \
 333   nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           HeapWord*)                             \
 334   nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             HeapWord*)                             \
 335   nonstatic_field(ThreadLocalAllocBuffer,   _end,                                             HeapWord*)                             \
 336   nonstatic_field(ThreadLocalAllocBuffer,   _pf_top,                                          HeapWord*)                             \
 337   nonstatic_field(ThreadLocalAllocBuffer,   _desired_size,                                    size_t)                                \
 338   nonstatic_field(ThreadLocalAllocBuffer,   _refill_waste_limit,                              size_t)                                \
 339   nonstatic_field(ThreadLocalAllocBuffer,   _number_of_refills,                               unsigned)                              \
 340   nonstatic_field(ThreadLocalAllocBuffer,   _fast_refill_waste,                               unsigned)                              \
 341   nonstatic_field(ThreadLocalAllocBuffer,   _slow_allocations,                                unsigned)                              \
 342                                                                                                                                      \
 343   nonstatic_field(ThreadShadow,             _pending_exception,                               oop)                                   \
 344                                                                                                                                      \
 345   static_field(vmSymbols,                   _symbols[0],                                      Symbol*)                               \
 346                                                                                                                                      \
 347   nonstatic_field(vtableEntry,              _method,                                          Method*)                               \
 348 
 349 #define VM_TYPES(declare_type, declare_toplevel_type, declare_integer_type, declare_unsigned_integer_type) \
 350   declare_integer_type(bool)                                              \
 351   declare_unsigned_integer_type(size_t)                                   \
 352   declare_integer_type(intx)                                              \
 353   declare_unsigned_integer_type(uintx)                                    \
 354                                                                           \
 355   declare_toplevel_type(BasicLock)                                        \
 356   declare_toplevel_type(CompilerToVM)                                     \
 357   declare_toplevel_type(ExceptionTableElement)                            \
 358   declare_toplevel_type(JVMFlag)                                          \
 359   declare_toplevel_type(JVMFlag*)                                         \
 360   declare_toplevel_type(InvocationCounter)                                \
<span class="line-added"> 361   declare_toplevel_type(JVMCICompileState)                                \</span>
 362   declare_toplevel_type(JVMCIEnv)                                         \
 363   declare_toplevel_type(LocalVariableTableElement)                        \
 364   declare_toplevel_type(narrowKlass)                                      \
<span class="line-added"> 365   declare_toplevel_type(ObjectWaiter)                                     \</span>
 366   declare_toplevel_type(Symbol*)                                          \
 367   declare_toplevel_type(vtableEntry)                                      \
 368                                                                           \
 369   declare_toplevel_type(oopDesc)                                          \
 370     declare_type(arrayOopDesc, oopDesc)                                   \
 371                                                                           \
 372   declare_toplevel_type(MetaspaceObj)                                     \
 373     declare_type(Metadata, MetaspaceObj)                                  \
 374     declare_type(Klass, Metadata)                                         \
 375       declare_type(InstanceKlass, Klass)                                  \
 376     declare_type(ConstantPool, Metadata)                                  \
 377 
 378 #define VM_INT_CONSTANTS(declare_constant, declare_constant_with_value, declare_preprocessor_constant) \
 379   declare_preprocessor_constant(&quot;ASSERT&quot;, DEBUG_ONLY(1) NOT_DEBUG(0))     \
 380   declare_preprocessor_constant(&quot;FIELDINFO_TAG_SIZE&quot;, FIELDINFO_TAG_SIZE) \
 381   declare_preprocessor_constant(&quot;STACK_BIAS&quot;, STACK_BIAS)                 \
 382                                                                           \
 383   declare_constant(CompLevel_none)                                        \
 384   declare_constant(CompLevel_simple)                                      \
 385   declare_constant(CompLevel_limited_profile)                             \
 386   declare_constant(CompLevel_full_profile)                                \
 387   declare_constant(CompLevel_full_optimization)                           \
 388   declare_constant(HeapWordSize)                                          \
 389   declare_constant(InvocationEntryBci)                                    \
 390   declare_constant(LogKlassAlignmentInBytes)                              \
 391                                                                           \
 392   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
 393   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
 394   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
 395   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
 396   declare_constant(JVM_ACC_IS_CLONEABLE_FAST)                             \
 397   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
 398   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
 399   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
 400   declare_preprocessor_constant(&quot;JVM_ACC_VARARGS&quot;, JVM_ACC_VARARGS)       \
 401   declare_preprocessor_constant(&quot;JVM_ACC_BRIDGE&quot;, JVM_ACC_BRIDGE)         \
 402   declare_preprocessor_constant(&quot;JVM_ACC_ANNOTATION&quot;, JVM_ACC_ANNOTATION) \
 403   declare_preprocessor_constant(&quot;JVM_ACC_ENUM&quot;, JVM_ACC_ENUM)             \
 404   declare_preprocessor_constant(&quot;JVM_ACC_SYNTHETIC&quot;, JVM_ACC_SYNTHETIC)   \
<span class="line-added"> 405   declare_preprocessor_constant(&quot;JVM_ACC_INTERFACE&quot;, JVM_ACC_INTERFACE)   \</span>
 406                                                                           \
 407   declare_constant(JVM_CONSTANT_Utf8)                                     \
 408   declare_constant(JVM_CONSTANT_Unicode)                                  \
 409   declare_constant(JVM_CONSTANT_Integer)                                  \
 410   declare_constant(JVM_CONSTANT_Float)                                    \
 411   declare_constant(JVM_CONSTANT_Long)                                     \
 412   declare_constant(JVM_CONSTANT_Double)                                   \
 413   declare_constant(JVM_CONSTANT_Class)                                    \
 414   declare_constant(JVM_CONSTANT_String)                                   \
 415   declare_constant(JVM_CONSTANT_Fieldref)                                 \
 416   declare_constant(JVM_CONSTANT_Methodref)                                \
 417   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
 418   declare_constant(JVM_CONSTANT_NameAndType)                              \
 419   declare_constant(JVM_CONSTANT_MethodHandle)                             \
 420   declare_constant(JVM_CONSTANT_MethodType)                               \
 421   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
<span class="line-added"> 422   declare_constant(JVM_CONSTANT_Module)                                   \</span>
<span class="line-added"> 423   declare_constant(JVM_CONSTANT_Package)                                  \</span>
 424   declare_constant(JVM_CONSTANT_ExternalMax)                              \
 425                                                                           \
 426   declare_constant(JVM_CONSTANT_Invalid)                                  \
 427   declare_constant(JVM_CONSTANT_InternalMin)                              \
 428   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
 429   declare_constant(JVM_CONSTANT_ClassIndex)                               \
 430   declare_constant(JVM_CONSTANT_StringIndex)                              \
 431   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
 432   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
 433   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
 434   declare_constant(JVM_CONSTANT_DynamicInError)                           \
 435   declare_constant(JVM_CONSTANT_InternalMax)                              \
 436                                                                           \
 437   declare_constant(ArrayData::array_len_off_set)                          \
 438   declare_constant(ArrayData::array_start_off_set)                        \
 439                                                                           \
 440   declare_constant(BitData::exception_seen_flag)                          \
 441   declare_constant(BitData::null_seen_flag)                               \
 442   declare_constant(BranchData::not_taken_off_set)                         \
 443                                                                           \
</pre>
<hr />
<pre>
 451   declare_constant(CodeInstaller::INVOKEINTERFACE)                        \
 452   declare_constant(CodeInstaller::INVOKEVIRTUAL)                          \
 453   declare_constant(CodeInstaller::INVOKESTATIC)                           \
 454   declare_constant(CodeInstaller::INVOKESPECIAL)                          \
 455   declare_constant(CodeInstaller::INLINE_INVOKE)                          \
 456   declare_constant(CodeInstaller::POLL_NEAR)                              \
 457   declare_constant(CodeInstaller::POLL_RETURN_NEAR)                       \
 458   declare_constant(CodeInstaller::POLL_FAR)                               \
 459   declare_constant(CodeInstaller::POLL_RETURN_FAR)                        \
 460   declare_constant(CodeInstaller::CARD_TABLE_SHIFT)                       \
 461   declare_constant(CodeInstaller::CARD_TABLE_ADDRESS)                     \
 462   declare_constant(CodeInstaller::HEAP_TOP_ADDRESS)                       \
 463   declare_constant(CodeInstaller::HEAP_END_ADDRESS)                       \
 464   declare_constant(CodeInstaller::NARROW_KLASS_BASE_ADDRESS)              \
 465   declare_constant(CodeInstaller::NARROW_OOP_BASE_ADDRESS)                \
 466   declare_constant(CodeInstaller::CRC_TABLE_ADDRESS)                      \
 467   declare_constant(CodeInstaller::LOG_OF_HEAP_REGION_GRAIN_BYTES)         \
 468   declare_constant(CodeInstaller::INLINE_CONTIGUOUS_ALLOCATION_SUPPORTED) \
 469   declare_constant(CodeInstaller::INVOKE_INVALID)                         \
 470                                                                           \
<span class="line-added"> 471   declare_constant(CollectedHeap::Serial)                                 \</span>
<span class="line-added"> 472   declare_constant(CollectedHeap::Parallel)                               \</span>
<span class="line-added"> 473   declare_constant(CollectedHeap::G1)                                     \</span>
<span class="line-added"> 474   declare_constant(CollectedHeap::Epsilon)                                \</span>
<span class="line-added"> 475   declare_constant(CollectedHeap::Z)                                      \</span>
<span class="line-added"> 476   declare_constant(CollectedHeap::Shenandoah)                             \</span>
<span class="line-added"> 477                                                                           \</span>
 478   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
 479   declare_constant(ConstantPool::_has_dynamic_constant)                   \
 480                                                                           \
 481   declare_constant(ConstMethod::_has_linenumber_table)                    \
 482   declare_constant(ConstMethod::_has_localvariable_table)                 \
 483   declare_constant(ConstMethod::_has_exception_table)                     \
 484   declare_constant(ConstMethod::_has_method_annotations)                  \
 485   declare_constant(ConstMethod::_has_parameter_annotations)               \
 486                                                                           \
 487   declare_constant(CounterData::count_off)                                \
 488                                                                           \
 489   declare_constant(DataLayout::cell_size)                                 \
 490   declare_constant(DataLayout::no_tag)                                    \
 491   declare_constant(DataLayout::bit_data_tag)                              \
 492   declare_constant(DataLayout::counter_data_tag)                          \
 493   declare_constant(DataLayout::jump_data_tag)                             \
 494   declare_constant(DataLayout::receiver_type_data_tag)                    \
 495   declare_constant(DataLayout::virtual_call_data_tag)                     \
 496   declare_constant(DataLayout::ret_data_tag)                              \
 497   declare_constant(DataLayout::branch_data_tag)                           \
</pre>
<hr />
<pre>
 530   declare_constant(Deoptimization::Reason_div0_check)                     \
 531   declare_constant(Deoptimization::Reason_loop_limit_check)               \
 532   declare_constant(Deoptimization::Reason_type_checked_inlining)          \
 533   declare_constant(Deoptimization::Reason_optimized_type_check)           \
 534   declare_constant(Deoptimization::Reason_aliasing)                       \
 535   declare_constant(Deoptimization::Reason_transfer_to_interpreter)        \
 536   declare_constant(Deoptimization::Reason_not_compiled_exception_handler) \
 537   declare_constant(Deoptimization::Reason_unresolved)                     \
 538   declare_constant(Deoptimization::Reason_jsr_mismatch)                   \
 539   declare_constant(Deoptimization::Reason_LIMIT)                          \
 540                                                                           \
 541   declare_constant(FieldInfo::access_flags_offset)                        \
 542   declare_constant(FieldInfo::name_index_offset)                          \
 543   declare_constant(FieldInfo::signature_index_offset)                     \
 544   declare_constant(FieldInfo::initval_index_offset)                       \
 545   declare_constant(FieldInfo::low_packed_offset)                          \
 546   declare_constant(FieldInfo::high_packed_offset)                         \
 547   declare_constant(FieldInfo::field_slots)                                \
 548                                                                           \
 549   declare_constant(InstanceKlass::linked)                                 \
<span class="line-added"> 550   declare_constant(InstanceKlass::being_initialized)                      \</span>
 551   declare_constant(InstanceKlass::fully_initialized)                      \
 552   declare_constant(InstanceKlass::_misc_is_unsafe_anonymous)              \
 553                                                                           \
 554   declare_constant(JumpData::taken_off_set)                               \
 555   declare_constant(JumpData::displacement_off_set)                        \
 556                                                                           \
<span class="line-modified"> 557   declare_preprocessor_constant(&quot;JVMCI::ok&quot;,                   JVMCI::ok)                      \</span>
<span class="line-modified"> 558   declare_preprocessor_constant(&quot;JVMCI::dependencies_failed&quot;,  JVMCI::dependencies_failed)     \</span>
<span class="line-modified"> 559   declare_preprocessor_constant(&quot;JVMCI::cache_full&quot;,           JVMCI::cache_full)              \</span>
<span class="line-modified"> 560   declare_preprocessor_constant(&quot;JVMCI::code_too_large&quot;,       JVMCI::code_too_large)          \</span>

 561   declare_constant(JVMCIRuntime::none)                                    \
 562   declare_constant(JVMCIRuntime::by_holder)                               \
 563   declare_constant(JVMCIRuntime::by_full_signature)                       \
 564                                                                           \
 565   declare_constant(Klass::_lh_neutral_value)                              \
 566   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
 567   declare_constant(Klass::_lh_log2_element_size_shift)                    \
 568   declare_constant(Klass::_lh_log2_element_size_mask)                     \
 569   declare_constant(Klass::_lh_element_type_shift)                         \
 570   declare_constant(Klass::_lh_element_type_mask)                          \
 571   declare_constant(Klass::_lh_header_size_shift)                          \
 572   declare_constant(Klass::_lh_header_size_mask)                           \
 573   declare_constant(Klass::_lh_array_tag_shift)                            \
 574   declare_constant(Klass::_lh_array_tag_type_value)                       \
 575   declare_constant(Klass::_lh_array_tag_obj_value)                        \
 576                                                                           \
<span class="line-modified"> 577   declare_constant(markWord::no_hash)                                     \</span>
 578                                                                           \
 579   declare_constant(Method::_caller_sensitive)                             \
 580   declare_constant(Method::_force_inline)                                 \
 581   declare_constant(Method::_dont_inline)                                  \
 582   declare_constant(Method::_hidden)                                       \
 583   declare_constant(Method::_intrinsic_candidate)                          \
 584   declare_constant(Method::_reserved_stack_access)                        \
 585                                                                           \
 586   declare_constant(Method::nonvirtual_vtable_index)                       \
 587   declare_constant(Method::invalid_vtable_index)                          \
 588                                                                           \
 589   declare_constant(MultiBranchData::per_case_cell_count)                  \
 590                                                                           \
 591   declare_constant(ReceiverTypeData::nonprofiled_count_off_set)           \
 592   declare_constant(ReceiverTypeData::receiver_type_row_cell_count)        \
 593   declare_constant(ReceiverTypeData::receiver0_offset)                    \
 594   declare_constant(ReceiverTypeData::count0_offset)                       \
 595                                                                           \
 596   declare_constant(vmIntrinsics::_invokeBasic)                            \
 597   declare_constant(vmIntrinsics::_linkToVirtual)                          \
 598   declare_constant(vmIntrinsics::_linkToStatic)                           \
 599   declare_constant(vmIntrinsics::_linkToSpecial)                          \
 600   declare_constant(vmIntrinsics::_linkToInterface)                        \
 601                                                                           \
 602   declare_constant(vmSymbols::FIRST_SID)                                  \
 603   declare_constant(vmSymbols::SID_LIMIT)                                  \
 604 
 605 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant) \
 606   declare_constant(InvocationCounter::count_increment)                    \
 607   declare_constant(InvocationCounter::count_shift)                        \
 608                                                                           \
<span class="line-modified"> 609   declare_constant(markWord::hash_shift)                                  \</span>
 610                                                                           \
<span class="line-modified"> 611   declare_constant(markWord::biased_lock_mask_in_place)                   \</span>
<span class="line-modified"> 612   declare_constant(markWord::age_mask_in_place)                           \</span>
<span class="line-modified"> 613   declare_constant(markWord::epoch_mask_in_place)                         \</span>
<span class="line-modified"> 614   declare_constant(markWord::hash_mask)                                   \</span>
<span class="line-modified"> 615   declare_constant(markWord::hash_mask_in_place)                          \</span>
 616                                                                           \
<span class="line-modified"> 617   declare_constant(markWord::unlocked_value)                              \</span>
<span class="line-modified"> 618   declare_constant(markWord::biased_lock_pattern)                         \</span>
 619                                                                           \
<span class="line-modified"> 620   declare_constant(markWord::no_hash_in_place)                            \</span>
<span class="line-modified"> 621   declare_constant(markWord::no_lock_in_place)                            \</span>
 622 
 623 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
 624   declare_function(SharedRuntime::register_finalizer)                     \
 625   declare_function(SharedRuntime::exception_handler_for_return_address)   \
 626   declare_function(SharedRuntime::OSR_migration_end)                      \
 627   declare_function(SharedRuntime::enable_stack_reserved_zone)             \
 628   declare_function(SharedRuntime::frem)                                   \
 629   declare_function(SharedRuntime::drem)                                   \
 630                                                                           \
 631   declare_function(os::dll_load)                                          \
 632   declare_function(os::dll_lookup)                                        \
 633   declare_function(os::javaTimeMillis)                                    \
 634   declare_function(os::javaTimeNanos)                                     \
 635                                                                           \
 636   declare_function(Deoptimization::fetch_unroll_info)                     \
 637   declare_function(Deoptimization::uncommon_trap)                         \
 638   declare_function(Deoptimization::unpack_frames)                         \
 639                                                                           \
 640   declare_function(JVMCIRuntime::new_instance) \
 641   declare_function(JVMCIRuntime::new_array) \
 642   declare_function(JVMCIRuntime::new_multi_array) \
 643   declare_function(JVMCIRuntime::dynamic_new_array) \
 644   declare_function(JVMCIRuntime::dynamic_new_instance) \
 645   \
 646   declare_function(JVMCIRuntime::new_instance_or_null) \
 647   declare_function(JVMCIRuntime::new_array_or_null) \
 648   declare_function(JVMCIRuntime::new_multi_array_or_null) \
 649   declare_function(JVMCIRuntime::dynamic_new_array_or_null) \
 650   declare_function(JVMCIRuntime::dynamic_new_instance_or_null) \
 651   \

 652   declare_function(JVMCIRuntime::vm_message) \
 653   declare_function(JVMCIRuntime::identity_hash_code) \
 654   declare_function(JVMCIRuntime::exception_handler_for_pc) \
 655   declare_function(JVMCIRuntime::monitorenter) \
 656   declare_function(JVMCIRuntime::monitorexit) \
 657   declare_function(JVMCIRuntime::object_notify) \
 658   declare_function(JVMCIRuntime::object_notifyAll) \
 659   declare_function(JVMCIRuntime::throw_and_post_jvmti_exception) \
 660   declare_function(JVMCIRuntime::throw_klass_external_name_exception) \
 661   declare_function(JVMCIRuntime::throw_class_cast_exception) \
 662   declare_function(JVMCIRuntime::log_primitive) \
 663   declare_function(JVMCIRuntime::log_object) \
 664   declare_function(JVMCIRuntime::log_printf) \
 665   declare_function(JVMCIRuntime::vm_error) \
 666   declare_function(JVMCIRuntime::load_and_clear_exception) \
 667   G1GC_ONLY(declare_function(JVMCIRuntime::write_barrier_pre)) \
 668   G1GC_ONLY(declare_function(JVMCIRuntime::write_barrier_post)) \
 669   declare_function(JVMCIRuntime::validate_object) \
 670   \
 671   declare_function(JVMCIRuntime::test_deoptimize_call_int)
</pre>
<hr />
<pre>
 685   declare_constant_with_value(&quot;G1ThreadLocalData::dirty_card_queue_buffer_offset&quot;, in_bytes(G1ThreadLocalData::dirty_card_queue_buffer_offset()))
 686 
 687 #endif // INCLUDE_G1GC
 688 
 689 
 690 #ifdef LINUX
 691 
 692 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function) \
 693   declare_preprocessor_address(&quot;RTLD_DEFAULT&quot;, RTLD_DEFAULT)
 694 
 695 #endif
 696 
 697 
 698 #ifdef BSD
 699 
 700 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function) \
 701   declare_preprocessor_address(&quot;RTLD_DEFAULT&quot;, RTLD_DEFAULT)
 702 
 703 #endif
 704 
<span class="line-modified"> 705 #ifdef AARCH64</span>

 706 
 707 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
<span class="line-added"> 708   static_field(VM_Version, _psr_info.dczid_el0, uint32_t)               \</span>
 709   volatile_nonstatic_field(JavaFrameAnchor, _last_Java_fp, intptr_t*)
 710 
 711 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 712   declare_constant(VM_Version::CPU_FP)                  \
 713   declare_constant(VM_Version::CPU_ASIMD)               \
 714   declare_constant(VM_Version::CPU_EVTSTRM)             \
 715   declare_constant(VM_Version::CPU_AES)                 \
 716   declare_constant(VM_Version::CPU_PMULL)               \
 717   declare_constant(VM_Version::CPU_SHA1)                \
 718   declare_constant(VM_Version::CPU_SHA2)                \
 719   declare_constant(VM_Version::CPU_CRC32)               \
 720   declare_constant(VM_Version::CPU_LSE)                 \
 721   declare_constant(VM_Version::CPU_STXR_PREFETCH)       \
 722   declare_constant(VM_Version::CPU_A53MAC)              \
 723   declare_constant(VM_Version::CPU_DMB_ATOMICS)
 724 
 725 #endif
 726 
 727 
 728 #ifdef X86
</pre>
</td>
</tr>
</table>
<center><a href="jvmci_globals.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmSymbols_jvmci.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>