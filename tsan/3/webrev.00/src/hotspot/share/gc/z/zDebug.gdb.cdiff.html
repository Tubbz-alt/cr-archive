<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/z/zDebug.gdb</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="zCollectedHeap.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="zDirector.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/z/zDebug.gdb</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 51,21 ***</span>
      printf &quot;\t Page: %llu\n&quot;, ((uintptr_t)$obj &amp; ZAddressOffsetMask) &gt;&gt; ZGranuleSizeShift
      x/16gx $obj
      printf &quot;Mark:  0x%016llx\tKlass: %s\n&quot;, (uintptr_t)$obj-&gt;_mark, (char*)$obj-&gt;_metadata-&gt;_klass-&gt;_name-&gt;_body
  end
  
<span class="line-modified">! # Print heap page by pagetable index</span>
  define zpp
<span class="line-modified">!     set $page = (ZPage*)((uintptr_t)ZHeap::_heap._pagetable._map._map[($arg0)] &amp; ~1)</span>
      printf &quot;Page %p\n&quot;, $page
      print *$page
  end
  
<span class="line-modified">! # Print pagetable</span>
  define zpt
      printf &quot;Pagetable (first 128 slots)\n&quot;
<span class="line-modified">!     x/128gx ZHeap::_heap._pagetable._map._map</span>
  end
  
  # Print live map
  define __zmarked
      set $livemap   = $arg0
<span class="line-new-header">--- 51,21 ---</span>
      printf &quot;\t Page: %llu\n&quot;, ((uintptr_t)$obj &amp; ZAddressOffsetMask) &gt;&gt; ZGranuleSizeShift
      x/16gx $obj
      printf &quot;Mark:  0x%016llx\tKlass: %s\n&quot;, (uintptr_t)$obj-&gt;_mark, (char*)$obj-&gt;_metadata-&gt;_klass-&gt;_name-&gt;_body
  end
  
<span class="line-modified">! # Print heap page by page table index</span>
  define zpp
<span class="line-modified">!     set $page = (ZPage*)((uintptr_t)ZHeap::_heap._page_table._map._map[($arg0)] &amp; ~1)</span>
      printf &quot;Page %p\n&quot;, $page
      print *$page
  end
  
<span class="line-modified">! # Print page_table</span>
  define zpt
      printf &quot;Pagetable (first 128 slots)\n&quot;
<span class="line-modified">!     x/128gx ZHeap::_heap._page_table._map._map</span>
  end
  
  # Print live map
  define __zmarked
      set $livemap   = $arg0
</pre>
<hr />
<pre>
<span class="line-old-header">*** 98,11 ***</span>
  
  define zmarked
      set $addr          = $arg0
      set $obj           = ((uintptr_t)$addr &amp; ZAddressOffsetMask)
      set $page_index    = $obj &gt;&gt; ZGranuleSizeShift
<span class="line-modified">!     set $page_entry    = (uintptr_t)ZHeap::_heap._pagetable._map._map[$page_index]</span>
      set $page          = (ZPage*)($page_entry &amp; ~1)
      set $page_start    = (uintptr_t)$page._virtual._start
      set $page_end      = (uintptr_t)$page._virtual._end
      set $page_seqnum   = $page._livemap._seqnum
      set $global_seqnum = ZGlobalSeqNum
<span class="line-new-header">--- 98,11 ---</span>
  
  define zmarked
      set $addr          = $arg0
      set $obj           = ((uintptr_t)$addr &amp; ZAddressOffsetMask)
      set $page_index    = $obj &gt;&gt; ZGranuleSizeShift
<span class="line-modified">!     set $page_entry    = (uintptr_t)ZHeap::_heap._page_table._map._map[$page_index]</span>
      set $page          = (ZPage*)($page_entry &amp; ~1)
      set $page_start    = (uintptr_t)$page._virtual._start
      set $page_end      = (uintptr_t)$page._virtual._end
      set $page_seqnum   = $page._livemap._seqnum
      set $global_seqnum = ZGlobalSeqNum
</pre>
<hr />
<pre>
<span class="line-old-header">*** 124,14 ***</span>
      end
  end
  
  # Print heap information
  define zph
<span class="line-removed">-     printf &quot;Address Space\n&quot;</span>
<span class="line-removed">-     printf &quot;     Start:             0x%llx\n&quot;, ZAddressSpaceStart</span>
<span class="line-removed">-     printf &quot;     End:               0x%llx\n&quot;, ZAddressSpaceEnd</span>
<span class="line-removed">-     printf &quot;     Size:              %-15llu (0x%llx)\n&quot;, ZAddressSpaceSize, ZAddressSpaceSize</span>
      printf &quot;Heap\n&quot;
      printf &quot;     GlobalPhase:       %u\n&quot;, ZGlobalPhase
      printf &quot;     GlobalSeqNum:      %u\n&quot;, ZGlobalSeqNum
      printf &quot;     Offset Max:        %-15llu (0x%llx)\n&quot;, ZAddressOffsetMax, ZAddressOffsetMax
      printf &quot;     Page Size Small:   %-15llu (0x%llx)\n&quot;, ZPageSizeSmall, ZPageSizeSmall
<span class="line-new-header">--- 124,10 ---</span>
</pre>
<center><a href="zCollectedHeap.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="zDirector.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>