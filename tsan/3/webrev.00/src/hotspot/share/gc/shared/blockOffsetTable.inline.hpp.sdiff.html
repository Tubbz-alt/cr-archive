<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/shared/blockOffsetTable.inline.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="blockOffsetTable.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="c1/barrierSetC1.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shared/blockOffsetTable.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
53   assert(result &lt; _vs.committed_size(), &quot;bad index from address&quot;);
54   return result;
55 }
56 
57 inline HeapWord* BlockOffsetSharedArray::address_for_index(size_t index) const {
58   assert(index &lt; _vs.committed_size(), &quot;bad index&quot;);
59   HeapWord* result = _reserved.start() + (index &lt;&lt; BOTConstants::LogN_words);
60   assert(result &gt;= _reserved.start() &amp;&amp; result &lt; _reserved.end(),
61          &quot;bad address from index&quot;);
62   return result;
63 }
64 
65 inline void BlockOffsetSharedArray::check_reducing_assertion(bool reducing) {
66     assert(reducing || !SafepointSynchronize::is_at_safepoint() || init_to_zero() ||
67            Thread::current()-&gt;is_VM_thread() ||
68            Thread::current()-&gt;is_ConcurrentGC_thread() ||
69            ((!Thread::current()-&gt;is_ConcurrentGC_thread()) &amp;&amp;
70             ParGCRareEvent_lock-&gt;owned_by_self()), &quot;Crack&quot;);
71 }
72 
<span class="line-removed">73 //////////////////////////////////////////////////////////////////////////</span>
<span class="line-removed">74 // BlockOffsetArrayNonContigSpace inlines</span>
<span class="line-removed">75 //////////////////////////////////////////////////////////////////////////</span>
<span class="line-removed">76 inline void BlockOffsetArrayNonContigSpace::freed(HeapWord* blk,</span>
<span class="line-removed">77                                                   size_t size) {</span>
<span class="line-removed">78   freed(blk, blk + size);</span>
<span class="line-removed">79 }</span>
<span class="line-removed">80 </span>
<span class="line-removed">81 inline void BlockOffsetArrayNonContigSpace::freed(HeapWord* blk_start,</span>
<span class="line-removed">82                                                   HeapWord* blk_end) {</span>
<span class="line-removed">83   // Verify that the BOT shows [blk_start, blk_end) to be one block.</span>
<span class="line-removed">84   verify_single_block(blk_start, blk_end);</span>
<span class="line-removed">85   // adjust _unallocated_block upward or downward</span>
<span class="line-removed">86   // as appropriate</span>
<span class="line-removed">87   if (BlockOffsetArrayUseUnallocatedBlock) {</span>
<span class="line-removed">88     assert(_unallocated_block &lt;= _end,</span>
<span class="line-removed">89            &quot;Inconsistent value for _unallocated_block&quot;);</span>
<span class="line-removed">90     if (blk_end &gt;= _unallocated_block &amp;&amp; blk_start &lt;= _unallocated_block) {</span>
<span class="line-removed">91       // CMS-specific note: a block abutting _unallocated_block to</span>
<span class="line-removed">92       // its left is being freed, a new block is being added or</span>
<span class="line-removed">93       // we are resetting following a compaction</span>
<span class="line-removed">94       _unallocated_block = blk_start;</span>
<span class="line-removed">95     }</span>
<span class="line-removed">96   }</span>
<span class="line-removed">97 }</span>
<span class="line-removed">98 </span>
99 #endif // SHARE_GC_SHARED_BLOCKOFFSETTABLE_INLINE_HPP
</pre>
</td>
<td>
<hr />
<pre>
53   assert(result &lt; _vs.committed_size(), &quot;bad index from address&quot;);
54   return result;
55 }
56 
57 inline HeapWord* BlockOffsetSharedArray::address_for_index(size_t index) const {
58   assert(index &lt; _vs.committed_size(), &quot;bad index&quot;);
59   HeapWord* result = _reserved.start() + (index &lt;&lt; BOTConstants::LogN_words);
60   assert(result &gt;= _reserved.start() &amp;&amp; result &lt; _reserved.end(),
61          &quot;bad address from index&quot;);
62   return result;
63 }
64 
65 inline void BlockOffsetSharedArray::check_reducing_assertion(bool reducing) {
66     assert(reducing || !SafepointSynchronize::is_at_safepoint() || init_to_zero() ||
67            Thread::current()-&gt;is_VM_thread() ||
68            Thread::current()-&gt;is_ConcurrentGC_thread() ||
69            ((!Thread::current()-&gt;is_ConcurrentGC_thread()) &amp;&amp;
70             ParGCRareEvent_lock-&gt;owned_by_self()), &quot;Crack&quot;);
71 }
72 


























73 #endif // SHARE_GC_SHARED_BLOCKOFFSETTABLE_INLINE_HPP
</pre>
</td>
</tr>
</table>
<center><a href="blockOffsetTable.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="c1/barrierSetC1.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>