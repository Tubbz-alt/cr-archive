<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/shared/stringdedup/stringDedupTable.hpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="stringDedupTable.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="stringDedupThread.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shared/stringdedup/stringDedupTable.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -120,11 +120,11 @@</span>
    // Cache for reuse and fast alloc/free of table entries.
    static StringDedupEntryCache*   _entry_cache;
  
    StringDedupEntry**              _buckets;
    size_t                          _size;
<span class="udiff-line-modified-removed">-   uintx                           _entries;</span>
<span class="udiff-line-modified-added">+   volatile uintx                  _entries;</span>
    uintx                           _shrink_threshold;
    uintx                           _grow_threshold;
    bool                            _rehash_needed;
  
    // The hash seed also dictates which hash function to use. A
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -142,11 +142,11 @@</span>
    static const uintx              _rehash_threshold;
    static const double             _max_cache_factor;
  
    // Table statistics, only used for logging.
    static uintx                    _entries_added;
<span class="udiff-line-modified-removed">-   static uintx                    _entries_removed;</span>
<span class="udiff-line-modified-added">+   static volatile uintx           _entries_removed;</span>
    static uintx                    _resize_count;
    static uintx                    _rehash_count;
  
    static volatile size_t          _claimed_index;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -187,11 +187,11 @@</span>
    // Thread safe lookup or add of table entry
    static typeArrayOop lookup_or_add(typeArrayOop value, bool latin1, unsigned int hash) {
      // Protect the table from concurrent access. Also note that this lock
      // acts as a fence for _table, which could have been replaced by a new
      // instance if the table was resized or rehashed.
<span class="udiff-line-modified-removed">-     MutexLockerEx ml(StringDedupTable_lock, Mutex::_no_safepoint_check_flag);</span>
<span class="udiff-line-modified-added">+     MutexLocker ml(StringDedupTable_lock, Mutex::_no_safepoint_check_flag);</span>
      return _table-&gt;lookup_or_add_inner(value, latin1, hash);
    }
  
    // Returns true if the hashtable is currently using a Java compatible
    // hash function.
</pre>
<center><a href="stringDedupTable.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="stringDedupThread.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>