<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/shared/weakProcessorPhaseTimes.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="weakProcessorPhaseTimes.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="weakProcessorPhases.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shared/weakProcessorPhaseTimes.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -23,10 +23,11 @@</span>
   */
  
  #ifndef SHARE_GC_SHARED_WEAKPROCESSORPHASETIMES_HPP
  #define SHARE_GC_SHARED_WEAKPROCESSORPHASETIMES_HPP
  
<span class="udiff-line-added">+ #include &quot;gc/shared/oopStorageSet.hpp&quot;</span>
  #include &quot;gc/shared/weakProcessorPhases.hpp&quot;
  #include &quot;memory/allocation.hpp&quot;
  #include &quot;utilities/globalDefinitions.hpp&quot;
  #include &quot;utilities/ticks.hpp&quot;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -41,21 +42,22 @@</span>
    uint _active_workers;
  
    // Total time for weak processor.
    double _total_time_sec;
  
<span class="udiff-line-modified-removed">-   // Total time for each serially processed phase.  Entries for phases</span>
<span class="udiff-line-modified-removed">-   // processed by multiple threads are unused, as are entries for</span>
<span class="udiff-line-modified-removed">-   // unexecuted phases.</span>
<span class="udiff-line-modified-removed">-   double _phase_times_sec[WeakProcessorPhases::phase_count];</span>
<span class="udiff-line-modified-removed">-   size_t _phase_dead_items[WeakProcessorPhases::phase_count];</span>
<span class="udiff-line-modified-removed">-   size_t _phase_total_items[WeakProcessorPhases::phase_count];</span>
<span class="udiff-line-modified-added">+   // Total time and associated items for each serially processed phase.</span>
<span class="udiff-line-modified-added">+   static const uint phase_data_count = WeakProcessorPhases::serial_phase_count;</span>
<span class="udiff-line-modified-added">+   // +1 because serial_phase_count == 0 in some build configurations.</span>
<span class="udiff-line-modified-added">+   // Simpler to always allocate extra space than conditionalize.</span>
<span class="udiff-line-modified-added">+   double _phase_times_sec[phase_data_count + 1];</span>
<span class="udiff-line-modified-added">+   size_t _phase_dead_items[phase_data_count + 1];</span>
<span class="udiff-line-added">+   size_t _phase_total_items[phase_data_count + 1];</span>
<span class="udiff-line-added">+   void reset_phase_data();</span>
  
<span class="udiff-line-modified-removed">-   // Per-worker times and linked items, if multiple threads used and the phase was executed.</span>
<span class="udiff-line-modified-removed">-   WorkerDataArray&lt;double&gt;* _worker_data[WeakProcessorPhases::oop_storage_phase_count];</span>
<span class="udiff-line-modified-removed">-   WorkerDataArray&lt;size_t&gt;* _worker_dead_items[WeakProcessorPhases::oop_storage_phase_count];</span>
<span class="udiff-line-removed">-   WorkerDataArray&lt;size_t&gt;* _worker_total_items[WeakProcessorPhases::oop_storage_phase_count];</span>
<span class="udiff-line-modified-added">+   // Per-worker times and linked items.</span>
<span class="udiff-line-modified-added">+   static const uint worker_data_count = WeakProcessorPhases::oopstorage_phase_count;</span>
<span class="udiff-line-modified-added">+   WorkerDataArray&lt;double&gt;* _worker_data[worker_data_count];</span>
  
    WorkerDataArray&lt;double&gt;* worker_data(WeakProcessorPhase phase) const;
  
    void log_st_phase(WeakProcessorPhase phase, uint indent) const;
    void log_mt_phase_summary(WeakProcessorPhase phase, uint indent) const;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -112,11 +114,11 @@</span>
    WeakProcessorPhaseTimeTracker(WeakProcessorPhaseTimes* times,
                                  WeakProcessorPhase phase);
  
    // For tracking possibly parallel phase times (even if processed by
    // only one thread).
<span class="udiff-line-modified-removed">-   // Precondition: WeakProcessorPhases::is_oop_storage(phase)</span>
<span class="udiff-line-modified-added">+   // Precondition: WeakProcessorPhases::is_oopstorage(phase)</span>
    // Precondition: worker_id &lt; times-&gt;max_threads().
    WeakProcessorPhaseTimeTracker(WeakProcessorPhaseTimes* times,
                                  WeakProcessorPhase phase,
                                  uint worker_id);
  
</pre>
<center><a href="weakProcessorPhaseTimes.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="weakProcessorPhases.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>