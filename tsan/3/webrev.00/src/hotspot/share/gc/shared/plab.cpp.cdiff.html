<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/shared/plab.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="parallelCleaning.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="plab.inline.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shared/plab.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,10 ***</span>
<span class="line-new-header">--- 25,11 ---</span>
  #include &quot;precompiled.hpp&quot;
  #include &quot;gc/shared/collectedHeap.hpp&quot;
  #include &quot;gc/shared/plab.inline.hpp&quot;
  #include &quot;gc/shared/threadLocalAllocBuffer.hpp&quot;
  #include &quot;logging/log.hpp&quot;
<span class="line-added">+ #include &quot;memory/universe.hpp&quot;</span>
  #include &quot;oops/oop.inline.hpp&quot;
  
  size_t PLAB::min_size() {
    // Make sure that we return something that is larger than AlignmentReserve
    return align_object_size(MAX2(MinTLABSize / HeapWordSize, (size_t)oopDesc::header_size())) + AlignmentReserve;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 132,11 ***</span>
                        net_desired_words * HeapWordSize);
  }
  
  // Calculates plab size for current number of gc worker threads.
  size_t PLABStats::desired_plab_sz(uint no_of_gc_workers) {
<span class="line-modified">!   return align_object_size(MIN2(MAX2(min_size(), _desired_net_plab_sz / no_of_gc_workers), max_size()));</span>
  }
  
  // Compute desired plab size for one gc worker thread and latch result for later
  // use. This should be called once at the end of parallel
  // scavenge; it clears the sensor accumulators.
<span class="line-new-header">--- 133,11 ---</span>
                        net_desired_words * HeapWordSize);
  }
  
  // Calculates plab size for current number of gc worker threads.
  size_t PLABStats::desired_plab_sz(uint no_of_gc_workers) {
<span class="line-modified">!   return align_object_size(clamp(_desired_net_plab_sz / no_of_gc_workers, min_size(), max_size()));</span>
  }
  
  // Compute desired plab size for one gc worker thread and latch result for later
  // use. This should be called once at the end of parallel
  // scavenge; it clears the sensor accumulators.
</pre>
<center><a href="parallelCleaning.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="plab.inline.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>