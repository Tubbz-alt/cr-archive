<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/shared/gcVMOperations.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="gcVMOperations.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="gc_globals.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shared/gcVMOperations.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2005, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 123,36 ***</span>
  
  class VM_GC_HeapInspection: public VM_GC_Operation {
   private:
    outputStream* _out;
    bool _full_gc;
<span class="line-removed">-   bool _csv_format; // &quot;comma separated values&quot; format for spreadsheet.</span>
<span class="line-removed">-   bool _print_help;</span>
<span class="line-removed">-   bool _print_class_stats;</span>
<span class="line-removed">-   const char* _columns;</span>
   public:
    VM_GC_HeapInspection(outputStream* out, bool request_full_gc) :
      VM_GC_Operation(0 /* total collections,      dummy, ignored */,
                      GCCause::_heap_inspection /* GC Cause */,
                      0 /* total full collections, dummy, ignored */,
<span class="line-modified">!                     request_full_gc) {</span>
<span class="line-removed">-     _out = out;</span>
<span class="line-removed">-     _full_gc = request_full_gc;</span>
<span class="line-removed">-     _csv_format = false;</span>
<span class="line-removed">-     _print_help = false;</span>
<span class="line-removed">-     _print_class_stats = false;</span>
<span class="line-removed">-     _columns = NULL;</span>
<span class="line-removed">-   }</span>
  
    ~VM_GC_HeapInspection() {}
    virtual VMOp_Type type() const { return VMOp_GC_HeapInspection; }
    virtual bool skip_operation() const;
    virtual void doit();
<span class="line-removed">-   void set_csv_format(bool value) {_csv_format = value;}</span>
<span class="line-removed">-   void set_print_help(bool value) {_print_help = value;}</span>
<span class="line-removed">-   void set_print_class_stats(bool value) {_print_class_stats = value;}</span>
<span class="line-removed">-   void set_columns(const char* value) {_columns = value;}</span>
   protected:
    bool collect();
  };
  
  class VM_CollectForAllocation : public VM_GC_Operation {
<span class="line-new-header">--- 123,21 ---</span>
  
  class VM_GC_HeapInspection: public VM_GC_Operation {
   private:
    outputStream* _out;
    bool _full_gc;
   public:
    VM_GC_HeapInspection(outputStream* out, bool request_full_gc) :
      VM_GC_Operation(0 /* total collections,      dummy, ignored */,
                      GCCause::_heap_inspection /* GC Cause */,
                      0 /* total full collections, dummy, ignored */,
<span class="line-modified">!                     request_full_gc), _out(out), _full_gc(request_full_gc) {}</span>
  
    ~VM_GC_HeapInspection() {}
    virtual VMOp_Type type() const { return VMOp_GC_HeapInspection; }
    virtual bool skip_operation() const;
    virtual void doit();
   protected:
    bool collect();
  };
  
  class VM_CollectForAllocation : public VM_GC_Operation {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 192,11 ***</span>
   public:
    VM_GenCollectFull(uint gc_count_before,
                      uint full_gc_count_before,
                      GCCause::Cause gc_cause,
                      GenCollectedHeap::GenerationType max_generation)
<span class="line-modified">!     : VM_GC_Operation(gc_count_before, gc_cause, full_gc_count_before, true /* full */),</span>
        _max_generation(max_generation) { }
    ~VM_GenCollectFull() {}
    virtual VMOp_Type type() const { return VMOp_GenCollectFull; }
    virtual void doit();
  };
<span class="line-new-header">--- 177,12 ---</span>
   public:
    VM_GenCollectFull(uint gc_count_before,
                      uint full_gc_count_before,
                      GCCause::Cause gc_cause,
                      GenCollectedHeap::GenerationType max_generation)
<span class="line-modified">!     : VM_GC_Operation(gc_count_before, gc_cause, full_gc_count_before,</span>
<span class="line-added">+                       max_generation != GenCollectedHeap::YoungGen /* full */),</span>
        _max_generation(max_generation) { }
    ~VM_GenCollectFull() {}
    virtual VMOp_Type type() const { return VMOp_GenCollectFull; }
    virtual void doit();
  };
</pre>
<center><a href="gcVMOperations.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="gc_globals.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>