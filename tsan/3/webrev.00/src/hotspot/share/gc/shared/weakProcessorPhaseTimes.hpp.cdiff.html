<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/shared/weakProcessorPhaseTimes.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="weakProcessorPhaseTimes.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="weakProcessorPhases.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shared/weakProcessorPhaseTimes.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 23,10 ***</span>
<span class="line-new-header">--- 23,11 ---</span>
   */
  
  #ifndef SHARE_GC_SHARED_WEAKPROCESSORPHASETIMES_HPP
  #define SHARE_GC_SHARED_WEAKPROCESSORPHASETIMES_HPP
  
<span class="line-added">+ #include &quot;gc/shared/oopStorageSet.hpp&quot;</span>
  #include &quot;gc/shared/weakProcessorPhases.hpp&quot;
  #include &quot;memory/allocation.hpp&quot;
  #include &quot;utilities/globalDefinitions.hpp&quot;
  #include &quot;utilities/ticks.hpp&quot;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 41,21 ***</span>
    uint _active_workers;
  
    // Total time for weak processor.
    double _total_time_sec;
  
<span class="line-modified">!   // Total time for each serially processed phase.  Entries for phases</span>
<span class="line-modified">!   // processed by multiple threads are unused, as are entries for</span>
<span class="line-modified">!   // unexecuted phases.</span>
<span class="line-modified">!   double _phase_times_sec[WeakProcessorPhases::phase_count];</span>
<span class="line-modified">!   size_t _phase_dead_items[WeakProcessorPhases::phase_count];</span>
<span class="line-modified">!   size_t _phase_total_items[WeakProcessorPhases::phase_count];</span>
  
<span class="line-modified">!   // Per-worker times and linked items, if multiple threads used and the phase was executed.</span>
<span class="line-modified">!   WorkerDataArray&lt;double&gt;* _worker_data[WeakProcessorPhases::oop_storage_phase_count];</span>
<span class="line-modified">!   WorkerDataArray&lt;size_t&gt;* _worker_dead_items[WeakProcessorPhases::oop_storage_phase_count];</span>
<span class="line-removed">-   WorkerDataArray&lt;size_t&gt;* _worker_total_items[WeakProcessorPhases::oop_storage_phase_count];</span>
  
    WorkerDataArray&lt;double&gt;* worker_data(WeakProcessorPhase phase) const;
  
    void log_st_phase(WeakProcessorPhase phase, uint indent) const;
    void log_mt_phase_summary(WeakProcessorPhase phase, uint indent) const;
<span class="line-new-header">--- 42,22 ---</span>
    uint _active_workers;
  
    // Total time for weak processor.
    double _total_time_sec;
  
<span class="line-modified">!   // Total time and associated items for each serially processed phase.</span>
<span class="line-modified">!   static const uint phase_data_count = WeakProcessorPhases::serial_phase_count;</span>
<span class="line-modified">!   // +1 because serial_phase_count == 0 in some build configurations.</span>
<span class="line-modified">!   // Simpler to always allocate extra space than conditionalize.</span>
<span class="line-modified">!   double _phase_times_sec[phase_data_count + 1];</span>
<span class="line-modified">!   size_t _phase_dead_items[phase_data_count + 1];</span>
<span class="line-added">+   size_t _phase_total_items[phase_data_count + 1];</span>
<span class="line-added">+   void reset_phase_data();</span>
  
<span class="line-modified">!   // Per-worker times and linked items.</span>
<span class="line-modified">!   static const uint worker_data_count = WeakProcessorPhases::oopstorage_phase_count;</span>
<span class="line-modified">!   WorkerDataArray&lt;double&gt;* _worker_data[worker_data_count];</span>
  
    WorkerDataArray&lt;double&gt;* worker_data(WeakProcessorPhase phase) const;
  
    void log_st_phase(WeakProcessorPhase phase, uint indent) const;
    void log_mt_phase_summary(WeakProcessorPhase phase, uint indent) const;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 112,11 ***</span>
    WeakProcessorPhaseTimeTracker(WeakProcessorPhaseTimes* times,
                                  WeakProcessorPhase phase);
  
    // For tracking possibly parallel phase times (even if processed by
    // only one thread).
<span class="line-modified">!   // Precondition: WeakProcessorPhases::is_oop_storage(phase)</span>
    // Precondition: worker_id &lt; times-&gt;max_threads().
    WeakProcessorPhaseTimeTracker(WeakProcessorPhaseTimes* times,
                                  WeakProcessorPhase phase,
                                  uint worker_id);
  
<span class="line-new-header">--- 114,11 ---</span>
    WeakProcessorPhaseTimeTracker(WeakProcessorPhaseTimes* times,
                                  WeakProcessorPhase phase);
  
    // For tracking possibly parallel phase times (even if processed by
    // only one thread).
<span class="line-modified">!   // Precondition: WeakProcessorPhases::is_oopstorage(phase)</span>
    // Precondition: worker_id &lt; times-&gt;max_threads().
    WeakProcessorPhaseTimeTracker(WeakProcessorPhaseTimes* times,
                                  WeakProcessorPhase phase,
                                  uint worker_id);
  
</pre>
<center><a href="weakProcessorPhaseTimes.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="weakProcessorPhases.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>