<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/shenandoah/shenandoah_globals.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahWorkerPolicy.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="vmStructs_shenandoah.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoah_globals.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,9 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2016, 2018, Red Hat, Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2020, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-added">+  * Copyright (c) 2016, 2020, Red Hat, Inc. All rights reserved.</span>
<span class="udiff-line-added">+  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span>
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
   *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -34,12 +36,11 @@</span>
                              notproduct,                                     \
                              manageable,                                     \
                              product_rw,                                     \
                              lp64_product,                                   \
                              range,                                          \
<span class="udiff-line-modified-removed">-                             constraint,                                     \</span>
<span class="udiff-line-removed">-                             writeable)                                      \</span>
<span class="udiff-line-modified-added">+                             constraint)                                     \</span>
                                                                              \
    experimental(size_t, ShenandoahHeapRegionSize, 0,                         \
            &quot;Size of the Shenandoah regions. Set to zero to detect &quot;          \
            &quot;automatically.&quot;)                                                 \
                                                                              \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -63,42 +64,42 @@</span>
            &quot;The heuristics to use in Shenandoah GC. Possible values:&quot;        \
            &quot; *) adaptive - adapt to maintain the given amount of free heap;&quot; \
            &quot; *) static  -  start concurrent GC when static free heap &quot;       \
            &quot;               threshold and static allocation threshold are &quot;   \
            &quot;               tripped;&quot;                                         \
<span class="udiff-line-removed">-           &quot; *) passive -  do not start concurrent GC, wait for Full GC; &quot;   \</span>
            &quot; *) aggressive - run concurrent GC continuously, evacuate &quot;      \
            &quot;               everything;&quot;                                      \
            &quot; *) compact - run GC with lower footprint target, may end up &quot;   \
            &quot;               doing continuous GC, evacuate lots of live &quot;      \
            &quot;               objects, uncommit heap aggressively;&quot;)            \
                                                                              \
<span class="udiff-line-added">+   experimental(ccstr, ShenandoahGCMode, &quot;normal&quot;,                           \</span>
<span class="udiff-line-added">+           &quot;The GC mode to use in Shenandoah GC. Possible values&quot;            \</span>
<span class="udiff-line-added">+           &quot; *) normal    - normal GC (mark-evac-update)&quot;                    \</span>
<span class="udiff-line-added">+           &quot; *) traversal - traversal GC (single-pass)&quot;                      \</span>
<span class="udiff-line-added">+           &quot; *) passive   - disable concurrent GC, do stop-the-world GC&quot;)    \</span>
<span class="udiff-line-added">+                                                                             \</span>
    experimental(ccstr, ShenandoahUpdateRefsEarly, &quot;adaptive&quot;,                \
            &quot;Run a separate concurrent reference updating phase after&quot;        \
            &quot;concurrent evacuation. Possible values: &#39;on&#39;, &#39;off&#39;, &#39;adaptive&#39;&quot;)\
                                                                              \
    experimental(uintx, ShenandoahRefProcFrequency, 5,                        \
            &quot;How often should (weak, soft, etc) references be processed. &quot;    \
            &quot;References get processed at every Nth GC cycle. Set to zero &quot;    \
            &quot;to disable reference processing.&quot;)                               \
                                                                              \
<span class="udiff-line-modified-removed">-   experimental(uintx, ShenandoahUnloadClassesFrequency, 5,                  \</span>
<span class="udiff-line-modified-added">+   experimental(uintx, ShenandoahUnloadClassesFrequency, 1,                  \</span>
            &quot;How often should classes get unloaded. &quot;                         \
            &quot;Class unloading is performed at every Nth GC cycle. &quot;            \
            &quot;Set to zero to disable class unloading during concurrent GC.&quot;)   \
                                                                              \
    experimental(uintx, ShenandoahGarbageThreshold, 60,                       \
            &quot;Sets the percentage of garbage a region need to contain before &quot; \
            &quot;it can be marked for collection. Does not apply to all &quot;         \
            &quot;heuristics.&quot;)                                                    \
            range(0,100)                                                      \
                                                                              \
<span class="udiff-line-removed">-   experimental(uintx, ShenandoahFreeThreshold, 10,                          \</span>
<span class="udiff-line-removed">-           &quot;Set the percentage of free heap at which a GC cycle is started. &quot;\</span>
<span class="udiff-line-removed">-           &quot;Does not apply to all heuristics.&quot;)                              \</span>
<span class="udiff-line-removed">-           range(0,100)                                                      \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    experimental(uintx, ShenandoahInitFreeThreshold, 70,                      \
            &quot;Initial remaining free heap threshold for learning steps in &quot;    \
            &quot;heuristics. In percents of total heap size. Does not apply to &quot;  \
            &quot;all heuristics.&quot;)                                                \
            range(0,100)                                                      \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -138,14 +139,15 @@</span>
            &quot;this numbers gives the threshold when to switch to &quot;             \
            &quot;separate update-refs mode. Number is percentage relative &quot;       \
            &quot;to duration(marking)+duration(update-refs).&quot;)                    \
                                                                              \
    experimental(uintx, ShenandoahGuaranteedGCInterval, 5*60*1000,            \
<span class="udiff-line-modified-removed">-           &quot;Adaptive and dynamic heuristics would guarantee a GC cycle &quot;     \</span>
<span class="udiff-line-modified-removed">-           &quot;at least with this interval. This is useful when large idle&quot;     \</span>
<span class="udiff-line-modified-removed">-           &quot; intervals are present, where GC can run without stealing &quot;      \</span>
<span class="udiff-line-modified-removed">-           &quot;time from active application. Time is in milliseconds.&quot;)         \</span>
<span class="udiff-line-modified-added">+           &quot;Most heuristics would guarantee a concurrent GC cycle at &quot;       \</span>
<span class="udiff-line-modified-added">+           &quot;least with this interval. This is useful when large idle &quot;       \</span>
<span class="udiff-line-modified-added">+           &quot;intervals are present, where GC can run without stealing &quot;       \</span>
<span class="udiff-line-modified-added">+           &quot;time from active application. Time is in milliseconds. &quot;         \</span>
<span class="udiff-line-added">+           &quot;(Setting this interval to 0 disables this feature).&quot;)            \</span>
                                                                              \
    experimental(bool, ShenandoahAlwaysClearSoftRefs, false,                  \
            &quot;Clear soft references always, instead of using any smart &quot;       \
            &quot;cleanup policy. This minimizes footprint at expense of more &quot;    \
            &quot;softref churn in applications.&quot;)                                 \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -242,11 +244,11 @@</span>
            &quot;When allocation tracing is enabled, the allocation stalls &quot;      \
            &quot;larger than this threshold would be reported as warnings. &quot;      \
            &quot;Time is in microseconds.&quot;)                                       \
                                                                              \
    experimental(uintx, ShenandoahEvacAssist, 10,                             \
<span class="udiff-line-modified-removed">-           &quot;How many objects to evacuate on WB assist path. &quot;                \</span>
<span class="udiff-line-modified-added">+           &quot;How many objects to evacuate on LRB assist path. &quot;               \</span>
            &quot;Use zero to disable.&quot;)                                           \
                                                                              \
    experimental(bool, ShenandoahPacing, true,                                \
            &quot;Pace application allocations to give GC chance to start &quot;        \
            &quot;and complete before allocation failure is reached.&quot;)             \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -292,28 +294,25 @@</span>
                                                                              \
    experimental(bool, ShenandoahImplicitGCInvokesConcurrent, false,          \
            &quot;Should internally-caused GCs invoke concurrent cycles, or go to&quot; \
            &quot;stop-the-world (degenerated/full)?&quot;)                             \
                                                                              \
<span class="udiff-line-modified-removed">-   experimental(bool, ShenandoahHumongousMoves, true,                        \</span>
<span class="udiff-line-modified-added">+   diagnostic(bool, ShenandoahHumongousMoves, true,                          \</span>
            &quot;Allow moving humongous regions. This makes GC more resistant &quot;   \
            &quot;to external fragmentation that may otherwise fail other &quot;        \
            &quot;humongous allocations, at the expense of higher GC copying &quot;     \
<span class="udiff-line-modified-removed">-           &quot;costs.&quot;)                                                         \</span>
<span class="udiff-line-modified-added">+           &quot;costs. Currently affects stop-the-world (full) cycle only.&quot;)     \</span>
                                                                              \
    diagnostic(bool, ShenandoahOOMDuringEvacALot, false,                      \
            &quot;Simulate OOM during evacuation frequently.&quot;)                     \
                                                                              \
    diagnostic(bool, ShenandoahAllocFailureALot, false,                       \
            &quot;Make lots of artificial allocation failures.&quot;)                   \
                                                                              \
    diagnostic(bool, ShenandoahTerminationTrace, false,                       \
            &quot;Tracing task termination timings&quot;)                               \
                                                                              \
<span class="udiff-line-removed">-   develop(bool, ShenandoahVerifyObjectEquals, false,                        \</span>
<span class="udiff-line-removed">-           &quot;Verify that == and != are not used on oops. Only in fastdebug&quot;)  \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    diagnostic(bool, ShenandoahAlwaysPreTouch, false,                         \
            &quot;Pre-touch heap memory, overrides global AlwaysPreTouch&quot;)         \
                                                                              \
    experimental(intx, ShenandoahMarkScanPrefetch, 32,                        \
            &quot;How many objects to prefetch ahead when traversing mark bitmaps.&quot;\
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -350,71 +349,46 @@</span>
            &quot;Turn on/off SATB barriers in Shenandoah&quot;)                        \
                                                                              \
    diagnostic(bool, ShenandoahKeepAliveBarrier, true,                        \
            &quot;Turn on/off keep alive barriers in Shenandoah&quot;)                  \
                                                                              \
<span class="udiff-line-removed">-   diagnostic(bool, ShenandoahWriteBarrier, true,                            \</span>
<span class="udiff-line-removed">-           &quot;Turn on/off write barriers in Shenandoah&quot;)                       \</span>
<span class="udiff-line-removed">-                                                                             \</span>
<span class="udiff-line-removed">-   diagnostic(bool, ShenandoahReadBarrier, true,                             \</span>
<span class="udiff-line-removed">-           &quot;Turn on/off read barriers in Shenandoah&quot;)                        \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    diagnostic(bool, ShenandoahStoreValEnqueueBarrier, false,                 \
            &quot;Turn on/off enqueuing of oops for storeval barriers&quot;)            \
                                                                              \
<span class="udiff-line-removed">-   diagnostic(bool, ShenandoahStoreValReadBarrier, true,                     \</span>
<span class="udiff-line-removed">-           &quot;Turn on/off store val read barriers in Shenandoah&quot;)              \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    diagnostic(bool, ShenandoahCASBarrier, true,                              \
            &quot;Turn on/off CAS barriers in Shenandoah&quot;)                         \
                                                                              \
<span class="udiff-line-removed">-   diagnostic(bool, ShenandoahAcmpBarrier, true,                             \</span>
<span class="udiff-line-removed">-           &quot;Turn on/off acmp barriers in Shenandoah&quot;)                        \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    diagnostic(bool, ShenandoahCloneBarrier, true,                            \
            &quot;Turn on/off clone barriers in Shenandoah&quot;)                       \
                                                                              \
<span class="udiff-line-modified-removed">-   diagnostic(bool, ShenandoahStoreCheck, false,                             \</span>
<span class="udiff-line-modified-removed">-           &quot;Emit additional code that checks objects are written to only&quot;    \</span>
<span class="udiff-line-removed">-           &quot; in to-space&quot;)                                                   \</span>
<span class="udiff-line-modified-added">+   diagnostic(bool, ShenandoahLoadRefBarrier, true,                          \</span>
<span class="udiff-line-modified-added">+           &quot;Turn on/off load-reference barriers in Shenandoah&quot;)              \</span>
                                                                              \
    experimental(bool, ShenandoahConcurrentScanCodeRoots, true,               \
            &quot;Scan code roots concurrently, instead of during a pause&quot;)        \
                                                                              \
    experimental(uintx, ShenandoahCodeRootsStyle, 2,                          \
            &quot;Use this style to scan code cache:&quot;                              \
            &quot; 0 - sequential iterator;&quot;                                       \
            &quot; 1 - parallel iterator;&quot;                                         \
            &quot; 2 - parallel iterator with cset filters;&quot;)                      \
                                                                              \
<span class="udiff-line-modified-removed">-   experimental(bool, ShenandoahOptimizeStaticFinals, true,                  \</span>
<span class="udiff-line-modified-added">+   diagnostic(bool, ShenandoahOptimizeStaticFinals, true,                    \</span>
            &quot;Optimize barriers on static final fields. &quot;                      \
            &quot;Turn it off for maximum compatibility with reflection or JNI &quot;   \
            &quot;code that manipulates final fields.&quot;)                            \
                                                                              \
<span class="udiff-line-removed">-   experimental(bool, ShenandoahOptimizeInstanceFinals, false,               \</span>
<span class="udiff-line-removed">-           &quot;Optimize barriers on final instance fields.&quot;                     \</span>
<span class="udiff-line-removed">-           &quot;Turn it off for maximum compatibility with reflection or JNI &quot;   \</span>
<span class="udiff-line-removed">-           &quot;code that manipulates final fields.&quot;)                            \</span>
<span class="udiff-line-removed">-                                                                             \</span>
<span class="udiff-line-removed">-   experimental(bool, ShenandoahOptimizeStableFinals, false,                 \</span>
<span class="udiff-line-removed">-           &quot;Optimize barriers on stable fields.&quot;                             \</span>
<span class="udiff-line-removed">-           &quot;Turn it off for maximum compatibility with reflection or JNI &quot;   \</span>
<span class="udiff-line-removed">-           &quot;code that manipulates final fields.&quot;)                            \</span>
<span class="udiff-line-removed">-                                                                             \</span>
<span class="udiff-line-removed">-   diagnostic(bool, ShenandoahDecreaseRegisterPressure, false,               \</span>
<span class="udiff-line-removed">-           &quot;Try to reuse after-barrier values to reduce register pressure&quot;)  \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    experimental(bool, ShenandoahCommonGCStateLoads, false,                   \
           &quot;Enable commonming for GC state loads in generated code.&quot;)         \
                                                                              \
    develop(bool, ShenandoahVerifyOptoBarriers, false,                        \
            &quot;Verify no missing barriers in C2&quot;)                               \
                                                                              \
<span class="udiff-line-removed">-   experimental(bool, ShenandoahDontIncreaseWBFreq, true,                    \</span>
<span class="udiff-line-removed">-           &quot;Common 2 WriteBarriers or WriteBarrier and a ReadBarrier only &quot;  \</span>
<span class="udiff-line-removed">-           &quot;if the resulting WriteBarrier isn&#39;t executed more frequently&quot;)   \</span>
<span class="udiff-line-removed">-                                                                             \</span>
    experimental(bool, ShenandoahLoopOptsAfterExpansion, true,                \
<span class="udiff-line-modified-removed">-           &quot;Attempt more loop opts after write barrier expansion&quot;)           \</span>
<span class="udiff-line-modified-added">+           &quot;Attempt more loop opts after barrier expansion&quot;)                 \</span>
<span class="udiff-line-added">+                                                                             \</span>
<span class="udiff-line-added">+   diagnostic(bool, ShenandoahSelfFixing, true,                              \</span>
<span class="udiff-line-added">+           &quot;Fix references with load reference barrier. Disabling this &quot;     \</span>
<span class="udiff-line-added">+           &quot;might degrade performance.&quot;)                                     \</span>
<span class="udiff-line-added">+ </span>
  
  #endif // SHARE_GC_SHENANDOAH_SHENANDOAH_GLOBALS_HPP
</pre>
<center><a href="shenandoahWorkerPolicy.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="vmStructs_shenandoah.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>