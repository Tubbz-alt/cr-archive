<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/gc/shenandoah/shenandoahPhaseTimings.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahPhaseTimings.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahRootProcessor.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoahPhaseTimings.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
  2  * Copyright (c) 2017, 2019, Red Hat, Inc. All rights reserved.

  3  *
  4  * This code is free software; you can redistribute it and/or modify it
  5  * under the terms of the GNU General Public License version 2 only, as
  6  * published by the Free Software Foundation.
  7  *
  8  * This code is distributed in the hope that it will be useful, but WITHOUT
  9  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 10  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 11  * version 2 for more details (a copy is included in the LICENSE file that
 12  * accompanied this code).
 13  *
 14  * You should have received a copy of the GNU General Public License version
 15  * 2 along with this work; if not, write to the Free Software Foundation,
 16  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 17  *
 18  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 19  * or visit www.oracle.com if you need additional information or have any
 20  * questions.
 21  *
 22  */
</pre>
<hr />
<pre>
 34 class outputStream;
 35 
 36 #define SHENANDOAH_GC_PHASE_DO(f)                                                       \
 37   f(total_pause_gross,                              &quot;Total Pauses (G)&quot;)                 \
 38   f(total_pause,                                    &quot;Total Pauses (N)&quot;)                 \
 39   f(init_mark_gross,                                &quot;Pause Init Mark (G)&quot;)              \
 40   f(init_mark,                                      &quot;Pause Init Mark (N)&quot;)              \
 41   f(make_parsable,                                  &quot;  Make Parsable&quot;)                  \
 42   f(clear_liveness,                                 &quot;  Clear Liveness&quot;)                 \
 43                                                                                         \
 44   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
 45   f(scan_roots,                                     &quot;  Scan Roots&quot;)                     \
 46   f(scan_thread_roots,                              &quot;    S: Thread Roots&quot;)              \
 47   f(scan_code_roots,                                &quot;    S: Code Cache Roots&quot;)          \
 48   f(scan_universe_roots,                            &quot;    S: Universe Roots&quot;)            \
 49   f(scan_jni_roots,                                 &quot;    S: JNI Roots&quot;)                 \
 50   f(scan_jvmti_weak_roots,                          &quot;    S: JVMTI Weak Roots&quot;)          \
 51   f(scan_jfr_weak_roots,                            &quot;    S: JFR Weak Roots&quot;)            \
 52   f(scan_jni_weak_roots,                            &quot;    S: JNI Weak Roots&quot;)            \
 53   f(scan_stringtable_roots,                         &quot;    S: String Table Roots&quot;)        \


 54   f(scan_vm_weak_roots,                             &quot;    S: VM Weak Roots&quot;)             \
 55   f(scan_synchronizer_roots,                        &quot;    S: Synchronizer Roots&quot;)        \
 56   f(scan_management_roots,                          &quot;    S: Management Roots&quot;)          \
 57   f(scan_system_dictionary_roots,                   &quot;    S: System Dict Roots&quot;)         \
 58   f(scan_cldg_roots,                                &quot;    S: CLDG Roots&quot;)                \
 59   f(scan_jvmti_roots,                               &quot;    S: JVMTI Roots&quot;)               \
 60   f(scan_string_dedup_table_roots,                  &quot;    S: Dedup Table Roots&quot;)         \
 61   f(scan_string_dedup_queue_roots,                  &quot;    S: Dedup Queue Roots&quot;)         \
 62   f(scan_finish_queues,                             &quot;    S: Finish Queues&quot; )            \
 63                                                                                         \
 64   f(resize_tlabs,                                   &quot;  Resize TLABs&quot;)                   \
 65                                                                                         \
 66   f(final_mark_gross,                               &quot;Pause Final Mark (G)&quot;)             \
 67   f(final_mark,                                     &quot;Pause Final Mark (N)&quot;)             \
 68                                                                                         \
 69   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
 70   f(update_roots,                                   &quot;  Update Roots&quot;)                   \
 71   f(update_thread_roots,                            &quot;    U: Thread Roots&quot;)              \
 72   f(update_code_roots,                              &quot;    U: Code Cache Roots&quot;)          \
 73   f(update_universe_roots,                          &quot;    U: Universe Roots&quot;)            \
 74   f(update_jni_roots,                               &quot;    U: JNI Roots&quot;)                 \
 75   f(update_jvmti_weak_roots,                        &quot;    U: JVMTI Weak Roots&quot;)          \
 76   f(update_jfr_weak_roots,                          &quot;    U: JFR Weak Roots&quot;)            \
 77   f(update_jni_weak_roots,                          &quot;    U: JNI Weak Roots&quot;)            \
 78   f(update_stringtable_roots,                       &quot;    U: String Table Roots&quot;)        \


 79   f(update_vm_weak_roots,                           &quot;    U: VM Weak Roots&quot;)             \
 80   f(update_synchronizer_roots,                      &quot;    U: Synchronizer Roots&quot;)        \
 81   f(update_management_roots,                        &quot;    U: Management Roots&quot;)          \
 82   f(update_system_dictionary_roots,                 &quot;    U: System Dict Roots&quot;)         \
 83   f(update_cldg_roots,                              &quot;    U: CLDG Roots&quot;)                \
 84   f(update_jvmti_roots,                             &quot;    U: JVMTI Roots&quot;)               \
 85   f(update_string_dedup_table_roots,                &quot;    U: Dedup Table Roots&quot;)         \
 86   f(update_string_dedup_queue_roots,                &quot;    U: Dedup Queue Roots&quot;)         \
 87   f(update_finish_queues,                           &quot;    U: Finish Queues&quot;)             \
 88                                                                                         \
 89   f(finish_queues,                                  &quot;  Finish Queues&quot;)                  \
 90   f(termination,                                    &quot;    Termination&quot;)                  \
 91   f(weakrefs,                                       &quot;  Weak References&quot;)                \
 92   f(weakrefs_process,                               &quot;    Process&quot;)                      \
 93   f(weakrefs_termination,                           &quot;      Termination&quot;)                \
 94   f(purge,                                          &quot;  System Purge&quot;)                   \
 95   f(purge_class_unload,                             &quot;    Unload Classes&quot;)               \
 96   f(purge_par,                                      &quot;    Parallel Cleanup&quot;)             \
 97   f(purge_cldg,                                     &quot;    CLDG&quot;)                         \
 98   f(complete_liveness,                              &quot;  Complete Liveness&quot;)              \



 99   f(prepare_evac,                                   &quot;  Prepare Evacuation&quot;)             \
<span class="line-removed">100   f(recycle_regions,                                &quot;  Recycle regions&quot;)                \</span>
101                                                                                         \
102   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
103   f(init_evac,                                      &quot;  Initial Evacuation&quot;)             \
104   f(evac_thread_roots,                              &quot;    E: Thread Roots&quot;)              \
105   f(evac_code_roots,                                &quot;    E: Code Cache Roots&quot;)          \
106   f(evac_universe_roots,                            &quot;    E: Universe Roots&quot;)            \
107   f(evac_jni_roots,                                 &quot;    E: JNI Roots&quot;)                 \
108   f(evac_jvmti_weak_roots,                          &quot;    E: JVMTI Weak Roots&quot;)          \
109   f(evac_jfr_weak_roots,                            &quot;    E: JFR Weak Roots&quot;)            \
110   f(evac_jni_weak_roots,                            &quot;    E: JNI Weak Roots&quot;)            \
111   f(evac_stringtable_roots,                         &quot;    E: String Table Roots&quot;)        \


112   f(evac_vm_weak_roots,                             &quot;    E: VM Weak Roots&quot;)             \
113   f(evac_synchronizer_roots,                        &quot;    E: Synchronizer Roots&quot;)        \
114   f(evac_management_roots,                          &quot;    E: Management Roots&quot;)          \
115   f(evac_system_dictionary_roots,                   &quot;    E: System Dict Roots&quot;)         \
116   f(evac_cldg_roots,                                &quot;    E: CLDG Roots&quot;)                \
117   f(evac_jvmti_roots,                               &quot;    E: JVMTI Roots&quot;)               \
118   f(evac_string_dedup_table_roots,                  &quot;    E: String Dedup Table Roots&quot;)  \
119   f(evac_string_dedup_queue_roots,                  &quot;    E: String Dedup Queue Roots&quot;)  \
120   f(evac_finish_queues,                             &quot;    E: Finish Queues&quot;)             \
121                                                                                         \
122   f(final_evac_gross,                               &quot;Pause Final Evac (G)&quot;)             \
123   f(final_evac,                                     &quot;Pause Final Evac (N)&quot;)             \

124                                                                                         \
125   f(init_update_refs_gross,                         &quot;Pause Init  Update Refs (G)&quot;)      \
126   f(init_update_refs,                               &quot;Pause Init  Update Refs (N)&quot;)      \


127                                                                                         \
128   f(final_update_refs_gross,                         &quot;Pause Final Update Refs (G)&quot;)     \
129   f(final_update_refs,                               &quot;Pause Final Update Refs (N)&quot;)     \
130   f(final_update_refs_finish_work,                   &quot;  Finish Work&quot;)                   \
131                                                                                         \
132   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
133   f(final_update_refs_roots,                         &quot;  Update Roots&quot;)                  \
134   f(final_update_refs_thread_roots,                  &quot;    UR: Thread Roots&quot;)            \
135   f(final_update_refs_code_roots,                    &quot;    UR: Code Cache Roots&quot;)        \
136   f(final_update_refs_universe_roots,                &quot;    UR: Universe Roots&quot;)          \
137   f(final_update_refs_jni_roots,                     &quot;    UR: JNI Roots&quot;)               \
138   f(final_update_jvmti_weak_roots,                   &quot;    UR: JVMTI Weak Roots&quot;)        \
139   f(final_update_jfr_weak_roots,                     &quot;    UR: JFR Weak Roots&quot;)          \
140   f(final_update_jni_weak_roots,                     &quot;    UR: JNI Weak Roots&quot;)          \
141   f(final_update_stringtable_roots,                  &quot;    UR: String Table Roots&quot;)      \


142   f(final_update_vm_weak_roots,                      &quot;    UR: VM Weak Roots&quot;)           \
143   f(final_update_refs_synchronizer_roots,            &quot;    UR: Synchronizer Roots&quot;)      \
144   f(final_update_refs_management_roots,              &quot;    UR: Management Roots&quot;)        \
145   f(final_update_refs_system_dict_roots,             &quot;    UR: System Dict Roots&quot;)       \
146   f(final_update_refs_cldg_roots,                    &quot;    UR: CLDG Roots&quot;)              \
147   f(final_update_refs_jvmti_roots,                   &quot;    UR: JVMTI Roots&quot;)             \
148   f(final_update_refs_string_dedup_table_roots,      &quot;    UR: Dedup Table Roots&quot;)       \
149   f(final_update_refs_string_dedup_queue_roots,      &quot;    UR: Dedup Queue Roots&quot;)       \
150   f(final_update_refs_finish_queues,                 &quot;    UR: Finish Queues&quot;)           \
151                                                                                         \
<span class="line-modified">152   f(final_update_refs_recycle,                       &quot;  Recycle&quot;)                       \</span>

153                                                                                         \
154   f(degen_gc_gross,                                  &quot;Pause Degenerated GC (G)&quot;)        \
155   f(degen_gc,                                        &quot;Pause Degenerated GC (N)&quot;)        \
156                                                                                         \
157   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
158   f(degen_gc_update_roots,                           &quot;  Degen Update Roots&quot;)            \
159   f(degen_gc_update_thread_roots,                    &quot;    DU: Thread Roots&quot;)            \
160   f(degen_gc_update_code_roots,                      &quot;    DU: Code Cache Roots&quot;)        \
161   f(degen_gc_update_universe_roots,                  &quot;    DU: Universe Roots&quot;)          \
162   f(degen_gc_update_jni_roots,                       &quot;    DU: JNI Roots&quot;)               \
163   f(degen_gc_update_jvmti_weak_roots,                &quot;    DU: JVMTI Weak Roots&quot;)        \
164   f(degen_gc_update_jfr_weak_roots,                  &quot;    DU: JFR Weak Roots&quot;)          \
165   f(degen_gc_update_jni_weak_roots,                  &quot;    DU: JNI Weak Roots&quot;)          \
166   f(degen_gc_update_stringtable_roots,               &quot;    DU: String Table Roots&quot;)      \


167   f(degen_gc_update_vm_weak_roots,                   &quot;    DU: VM Weak Roots&quot;)           \
168   f(degen_gc_update_synchronizer_roots,              &quot;    DU: Synchronizer Roots&quot;)      \
169   f(degen_gc_update_management_roots,                &quot;    DU: Management Roots&quot;)        \
170   f(degen_gc_update_system_dict_roots,               &quot;    DU: System Dict Roots&quot;)       \
171   f(degen_gc_update_cldg_roots,                      &quot;    DU: CLDG Roots&quot;)              \
172   f(degen_gc_update_jvmti_roots,                     &quot;    DU: JVMTI Roots&quot;)             \
173   f(degen_gc_update_string_dedup_table_roots,        &quot;    DU: Dedup Table Roots&quot;)       \
174   f(degen_gc_update_string_dedup_queue_roots,        &quot;    DU: Dedup Queue Roots&quot;)       \
175   f(degen_gc_update_finish_queues,                   &quot;    DU: Finish Queues&quot;)           \
176                                                                                         \
177   f(init_traversal_gc_gross,                         &quot;Pause Init Traversal (G)&quot;)        \
178   f(init_traversal_gc,                               &quot;Pause Init Traversal (N)&quot;)        \
179   f(traversal_gc_prepare,                            &quot;  Prepare&quot;)                       \
180   f(traversal_gc_make_parsable,                      &quot;    Make Parsable&quot;)               \
181   f(traversal_gc_resize_tlabs,                       &quot;    Resize TLABs&quot;)                \

182                                                                                         \
183   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
184   f(init_traversal_gc_work,                          &quot;  Work&quot;)                          \
185   f(init_traversal_gc_thread_roots,                  &quot;    TI: Thread Roots&quot;)            \
186   f(init_traversal_gc_code_roots,                    &quot;    TI: Code Cache Roots&quot;)        \
187   f(init_traversal_gc_universe_roots,                &quot;    TI: Universe Roots&quot;)          \
188   f(init_traversal_gc_jni_roots,                     &quot;    TI: JNI Roots&quot;)               \
189   f(init_traversal_gc_jvmti_weak_roots,              &quot;    TI: JVMTI Weak Roots&quot;)        \
190   f(init_traversal_gc_jfr_weak_roots,                &quot;    TI: JFR Weak Roots&quot;)          \
191   f(init_traversal_gc_jni_weak_roots,                &quot;    TI: JNI Weak Roots&quot;)          \
192   f(init_traversal_gc_stringtable_roots,             &quot;    TI: String Table Roots&quot;)      \


193   f(init_traversal_gc_vm_weak_roots,                 &quot;    TI: VM Weak Roots&quot;)           \
194   f(init_traversal_gc_synchronizer_roots,            &quot;    TI: Synchronizer Roots&quot;)      \
195   f(init_traversal_gc_management_roots,              &quot;    TI: Management Roots&quot;)        \
196   f(init_traversal_gc_system_dict_roots,             &quot;    TI: System Dict Roots&quot;)       \
197   f(init_traversal_gc_cldg_roots,                    &quot;    TI: CLDG Roots&quot;)              \
198   f(init_traversal_gc_jvmti_roots,                   &quot;    TI: JVMTI Roots&quot;)             \
199   f(init_traversal_gc_string_dedup_table_roots,      &quot;    TI: Dedup Table Roots&quot;)       \
200   f(init_traversal_gc_string_dedup_queue_roots,      &quot;    TI: Dedup Queue Roots&quot;)       \
201   f(init_traversal_gc_finish_queues,                 &quot;    TI: Finish Queues&quot;)           \
202                                                                                         \
203   f(final_traversal_gc_gross,                        &quot;Pause Final Traversal (G)&quot;)       \
204   f(final_traversal_gc,                              &quot;Pause Final Traversal (N)&quot;)       \
205                                                                                         \
206   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
207   f(final_traversal_gc_work,                         &quot;  Work&quot;)                          \
208   f(final_traversal_gc_thread_roots,                 &quot;    TF: Thread Roots&quot;)            \
209   f(final_traversal_gc_code_roots,                   &quot;    TF: Code Cache Roots&quot;)        \
210   f(final_traversal_gc_universe_roots,               &quot;    TF: Universe Roots&quot;)          \
211   f(final_traversal_gc_jni_roots,                    &quot;    TF: JNI Roots&quot;)               \
212   f(final_traversal_gc_jvmti_weak_roots,             &quot;    TF: JVMTI Weak Roots&quot;)        \
213   f(final_traversal_gc_jfr_weak_roots,               &quot;    TF: JFR Weak Roots&quot;)          \
214   f(final_traversal_gc_jni_weak_roots,               &quot;    TF: JNI Weak Roots&quot;)          \
215   f(final_traversal_gc_stringtable_roots,            &quot;    TF: String Table Roots&quot;)      \


216   f(final_traversal_gc_vm_weak_roots,                &quot;    TF: VM Weak Roots&quot;)           \
217   f(final_traversal_gc_synchronizer_roots,           &quot;    TF: Synchronizer Roots&quot;)      \
218   f(final_traversal_gc_management_roots,             &quot;    TF: Management Roots&quot;)        \
219   f(final_traversal_gc_system_dict_roots,            &quot;    TF: System Dict Roots&quot;)       \
220   f(final_traversal_gc_cldg_roots,                   &quot;    TF: CLDG Roots&quot;)              \
221   f(final_traversal_gc_jvmti_roots,                  &quot;    TF: JVMTI Roots&quot;)             \
222   f(final_traversal_gc_string_dedup_table_roots,     &quot;    TF: Dedup Table Roots&quot;)       \
223   f(final_traversal_gc_string_dedup_queue_roots,     &quot;    TF: Dedup Queue Roots&quot;)       \
224   f(final_traversal_gc_finish_queues,                &quot;    TF: Finish Queues&quot;)           \
225   f(final_traversal_gc_termination,                  &quot;    TF:   Termination&quot;)           \
226                                                                                         \
227   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
<span class="line-modified">228   f(final_traversal_update_roots,                    &quot;  Update Roots&quot;)                  \</span>
<span class="line-modified">229   f(final_traversal_update_thread_roots,             &quot;    TU: Thread Roots&quot;)            \</span>
<span class="line-modified">230   f(final_traversal_update_code_roots,               &quot;    TU: Code Cache Roots&quot;)        \</span>
<span class="line-modified">231   f(final_traversal_update_universe_roots,           &quot;    TU: Universe Roots&quot;)          \</span>
<span class="line-modified">232   f(final_traversal_update_jni_roots,                &quot;    TU: JNI Roots&quot;)               \</span>
<span class="line-modified">233   f(final_traversal_update_jvmti_weak_roots,         &quot;    TU: JVMTI Weak Roots&quot;)        \</span>
<span class="line-modified">234   f(final_traversal_update_jfr_weak_roots,           &quot;    TU: JFR Weak Roots&quot;)          \</span>
<span class="line-modified">235   f(final_traversal_update_jni_weak_roots,           &quot;    TU: JNI Weak Roots&quot;)          \</span>
<span class="line-modified">236   f(final_traversal_update_stringtable_roots,        &quot;    TU: String Table Roots&quot;)      \</span>
<span class="line-modified">237   f(final_traversal_update_vm_weak_roots,            &quot;    TU: VM Weak Roots&quot;)           \</span>
<span class="line-modified">238   f(final_traversal_update_synchronizer_roots,       &quot;    TU: Synchronizer Roots&quot;)      \</span>
<span class="line-modified">239   f(final_traversal_update_management_roots,         &quot;    TU: Management Roots&quot;)        \</span>
<span class="line-modified">240   f(final_traversal_update_system_dict_roots,        &quot;    TU: System Dict Roots&quot;)       \</span>
<span class="line-modified">241   f(final_traversal_update_cldg_roots,               &quot;    TU: CLDG Roots&quot;)              \</span>
<span class="line-modified">242   f(final_traversal_update_jvmti_roots,              &quot;    TU: JVMTI Roots&quot;)             \</span>
<span class="line-modified">243   f(final_traversal_update_string_dedup_table_roots, &quot;    TU: Dedup Table Roots&quot;)       \</span>
<span class="line-modified">244   f(final_traversal_update_string_dedup_queue_roots, &quot;    TU: Dedup Queue Roots&quot;)       \</span>
<span class="line-modified">245   f(final_traversal_update_finish_queues,            &quot;    TU: Finish Queues&quot;)           \</span>


246                                                                                         \

247   f(traversal_gc_cleanup,                            &quot;  Cleanup&quot;)                       \
248                                                                                         \
249   f(full_gc_gross,                                   &quot;Pause Full GC (G)&quot;)               \
250   f(full_gc,                                         &quot;Pause Full GC (N)&quot;)               \
251   f(full_gc_heapdumps,                               &quot;  Heap Dumps&quot;)                    \
252   f(full_gc_prepare,                                 &quot;  Prepare&quot;)                       \
253                                                                                         \
254   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
255   f(full_gc_roots,                                   &quot;  Roots&quot;)                         \
256   f(full_gc_thread_roots,                            &quot;    F: Thread Roots&quot;)             \
257   f(full_gc_code_roots,                              &quot;    F: Code Cache Roots&quot;)         \
258   f(full_gc_universe_roots,                          &quot;    F: Universe Roots&quot;)           \
259   f(full_gc_jni_roots,                               &quot;    F: JNI Roots&quot;)                \
260   f(full_gc_jvmti_weak_roots,                        &quot;    F: JVMTI Weak Roots&quot;)         \
261   f(full_gc_jfr_weak_roots,                          &quot;    F: JFR Weak Roots&quot;)           \
262   f(full_gc_jni_weak_roots,                          &quot;    F: JNI Weak Roots&quot;)           \
263   f(full_gc_stringtable_roots,                       &quot;    F: String Table Roots&quot;)       \


264   f(full_gc_vm_weak_roots,                           &quot;    F: VM Weak Roots&quot;)            \
265   f(full_gc_synchronizer_roots,                      &quot;    F: Synchronizer Roots&quot;)       \
266   f(full_gc_management_roots,                        &quot;    F: Management Roots&quot;)         \
267   f(full_gc_system_dictionary_roots,                 &quot;    F: System Dict Roots&quot;)        \
268   f(full_gc_cldg_roots,                              &quot;    F: CLDG Roots&quot;)               \
269   f(full_gc_jvmti_roots,                             &quot;    F: JVMTI Roots&quot;)              \
270   f(full_gc_string_dedup_table_roots,                &quot;    F: Dedup Table Roots&quot;)        \
271   f(full_gc_string_dedup_queue_roots,                &quot;    F: Dedup Queue Roots&quot;)        \
272   f(full_gc_finish_queues,                           &quot;    F: Finish Queues&quot;)            \
273                                                                                         \
274   f(full_gc_mark,                                    &quot;  Mark&quot;)                          \
275   f(full_gc_mark_finish_queues,                      &quot;    Finish Queues&quot;)               \
276   f(full_gc_mark_termination,                        &quot;      Termination&quot;)               \
277   f(full_gc_weakrefs,                                &quot;    Weak References&quot;)             \
278   f(full_gc_weakrefs_process,                        &quot;      Process&quot;)                   \
279   f(full_gc_weakrefs_termination,                    &quot;        Termination&quot;)             \
280   f(full_gc_purge,                                   &quot;    System Purge&quot;)                \
281   f(full_gc_purge_class_unload,                      &quot;      Unload Classes&quot;)            \
282   f(full_gc_purge_par,                               &quot;    Parallel Cleanup&quot;)            \
283   f(full_gc_purge_cldg,                              &quot;    CLDG&quot;)                        \
284   f(full_gc_calculate_addresses,                     &quot;  Calculate Addresses&quot;)           \
285   f(full_gc_calculate_addresses_regular,             &quot;    Regular Objects&quot;)             \
286   f(full_gc_calculate_addresses_humong,              &quot;    Humongous Objects&quot;)           \
287   f(full_gc_adjust_pointers,                         &quot;  Adjust Pointers&quot;)               \
288   f(full_gc_copy_objects,                            &quot;  Copy Objects&quot;)                  \
289   f(full_gc_copy_objects_regular,                    &quot;    Regular Objects&quot;)             \
290   f(full_gc_copy_objects_humong,                     &quot;    Humongous Objects&quot;)           \
291   f(full_gc_copy_objects_reset_complete,             &quot;    Reset Complete Bitmap&quot;)       \
292   f(full_gc_copy_objects_rebuild,                    &quot;    Rebuild Region Sets&quot;)         \
293   f(full_gc_resize_tlabs,                            &quot;  Resize TLABs&quot;)                  \
294                                                                                         \
295   /* Longer concurrent phases at the end */                                             \
296   f(conc_reset,                                      &quot;Concurrent Reset&quot;)                \
297   f(conc_mark,                                       &quot;Concurrent Marking&quot;)              \
298   f(conc_termination,                                &quot;  Termination&quot;)                   \
299   f(conc_preclean,                                   &quot;Concurrent Precleaning&quot;)          \

300   f(conc_evac,                                       &quot;Concurrent Evacuation&quot;)           \
301   f(conc_update_refs,                                &quot;Concurrent Update Refs&quot;)          \
302   f(conc_cleanup,                                    &quot;Concurrent Cleanup&quot;)              \
303   f(conc_traversal,                                  &quot;Concurrent Traversal&quot;)            \
304   f(conc_traversal_termination,                      &quot;  Termination&quot;)                   \
305                                                                                         \
306   f(conc_uncommit,                                   &quot;Concurrent Uncommit&quot;)             \
307                                                                                         \
308   /* Unclassified */                                                                    \
309   f(pause_other,                                     &quot;Pause Other&quot;)                     \
310   f(conc_other,                                      &quot;Concurrent Other&quot;)                \
311   // end
312 
313 #define SHENANDOAH_GC_PAR_PHASE_DO(f)                           \
<span class="line-modified">314   f(ThreadRoots,             &quot;Thread Roots (ms):&quot;)              \</span>
<span class="line-modified">315   f(CodeCacheRoots,          &quot;CodeCache Roots (ms):&quot;)           \</span>
<span class="line-modified">316   f(UniverseRoots,           &quot;Universe Roots (ms):&quot;)            \</span>
<span class="line-modified">317   f(JNIRoots,                &quot;JNI Handles Roots (ms):&quot;)         \</span>
<span class="line-modified">318   f(JVMTIWeakRoots,          &quot;JVMTI Weak Roots (ms):&quot;)          \</span>
<span class="line-modified">319   f(JFRWeakRoots,            &quot;JFR Weak Roots (ms):&quot;)            \</span>
<span class="line-modified">320   f(TSANWeakRoots,           &quot;TSAN Weak Roots (ms):&quot;)           \</span>
<span class="line-modified">321   f(JNIWeakRoots,            &quot;JNI Weak Roots (ms):&quot;)            \</span>
<span class="line-modified">322   f(StringTableRoots,        &quot;StringTable Roots(ms):&quot;)          \</span>
<span class="line-modified">323   f(VMWeakRoots,             &quot;VM Weak Roots(ms)&quot;)               \</span>
<span class="line-modified">324   f(ObjectSynchronizerRoots, &quot;ObjectSynchronizer Roots (ms):&quot;)  \</span>
<span class="line-modified">325   f(ManagementRoots,         &quot;Management Roots (ms):&quot;)          \</span>
<span class="line-modified">326   f(SystemDictionaryRoots,   &quot;SystemDictionary Roots (ms):&quot;)    \</span>
<span class="line-modified">327   f(CLDGRoots,               &quot;CLDG Roots (ms):&quot;)                \</span>
<span class="line-modified">328   f(JVMTIRoots,              &quot;JVMTI Roots (ms):&quot;)               \</span>
<span class="line-modified">329   f(StringDedupTableRoots,   &quot;String Dedup Table Roots (ms):&quot;)  \</span>
<span class="line-modified">330   f(StringDedupQueueRoots,   &quot;String Dedup Queue Roots (ms):&quot;)  \</span>
<span class="line-modified">331   f(FinishQueues,            &quot;Finish Queues (ms):&quot;)             \</span>


332   // end
333 
334 class ShenandoahPhaseTimings : public CHeapObj&lt;mtGC&gt; {
335 public:
336 #define GC_PHASE_DECLARE_ENUM(type, title)   type,
337 
338   enum Phase {
339     SHENANDOAH_GC_PHASE_DO(GC_PHASE_DECLARE_ENUM)
340     _num_phases
341   };
342 
343   // These are the subphases of GC phases (scan_roots, update_roots,
344   // init_evac, final_update_refs_roots and full_gc_roots).
345   // Make sure they are following this order.
346   enum GCParPhases {
347     SHENANDOAH_GC_PAR_PHASE_DO(GC_PHASE_DECLARE_ENUM)
348     GCParPhasesSentinel
349   };
350 
351 #undef GC_PHASE_DECLARE_ENUM
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
  2  * Copyright (c) 2017, 2019, Red Hat, Inc. All rights reserved.
<span class="line-added">  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span>
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
</pre>
<hr />
<pre>
 35 class outputStream;
 36 
 37 #define SHENANDOAH_GC_PHASE_DO(f)                                                       \
 38   f(total_pause_gross,                              &quot;Total Pauses (G)&quot;)                 \
 39   f(total_pause,                                    &quot;Total Pauses (N)&quot;)                 \
 40   f(init_mark_gross,                                &quot;Pause Init Mark (G)&quot;)              \
 41   f(init_mark,                                      &quot;Pause Init Mark (N)&quot;)              \
 42   f(make_parsable,                                  &quot;  Make Parsable&quot;)                  \
 43   f(clear_liveness,                                 &quot;  Clear Liveness&quot;)                 \
 44                                                                                         \
 45   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
 46   f(scan_roots,                                     &quot;  Scan Roots&quot;)                     \
 47   f(scan_thread_roots,                              &quot;    S: Thread Roots&quot;)              \
 48   f(scan_code_roots,                                &quot;    S: Code Cache Roots&quot;)          \
 49   f(scan_universe_roots,                            &quot;    S: Universe Roots&quot;)            \
 50   f(scan_jni_roots,                                 &quot;    S: JNI Roots&quot;)                 \
 51   f(scan_jvmti_weak_roots,                          &quot;    S: JVMTI Weak Roots&quot;)          \
 52   f(scan_jfr_weak_roots,                            &quot;    S: JFR Weak Roots&quot;)            \
 53   f(scan_jni_weak_roots,                            &quot;    S: JNI Weak Roots&quot;)            \
 54   f(scan_stringtable_roots,                         &quot;    S: String Table Roots&quot;)        \
<span class="line-added"> 55   f(scan_resolved_method_table_roots,               &quot;    S: Resolved Table Roots&quot;)      \</span>
<span class="line-added"> 56   f(scan_vm_global_roots,                           &quot;    S: VM Global Roots&quot;)           \</span>
 57   f(scan_vm_weak_roots,                             &quot;    S: VM Weak Roots&quot;)             \
 58   f(scan_synchronizer_roots,                        &quot;    S: Synchronizer Roots&quot;)        \
 59   f(scan_management_roots,                          &quot;    S: Management Roots&quot;)          \
 60   f(scan_system_dictionary_roots,                   &quot;    S: System Dict Roots&quot;)         \
 61   f(scan_cldg_roots,                                &quot;    S: CLDG Roots&quot;)                \
 62   f(scan_jvmti_roots,                               &quot;    S: JVMTI Roots&quot;)               \
 63   f(scan_string_dedup_table_roots,                  &quot;    S: Dedup Table Roots&quot;)         \
 64   f(scan_string_dedup_queue_roots,                  &quot;    S: Dedup Queue Roots&quot;)         \
 65   f(scan_finish_queues,                             &quot;    S: Finish Queues&quot; )            \
 66                                                                                         \
 67   f(resize_tlabs,                                   &quot;  Resize TLABs&quot;)                   \
 68                                                                                         \
 69   f(final_mark_gross,                               &quot;Pause Final Mark (G)&quot;)             \
 70   f(final_mark,                                     &quot;Pause Final Mark (N)&quot;)             \
 71                                                                                         \
 72   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
 73   f(update_roots,                                   &quot;  Update Roots&quot;)                   \
 74   f(update_thread_roots,                            &quot;    U: Thread Roots&quot;)              \
 75   f(update_code_roots,                              &quot;    U: Code Cache Roots&quot;)          \
 76   f(update_universe_roots,                          &quot;    U: Universe Roots&quot;)            \
 77   f(update_jni_roots,                               &quot;    U: JNI Roots&quot;)                 \
 78   f(update_jvmti_weak_roots,                        &quot;    U: JVMTI Weak Roots&quot;)          \
 79   f(update_jfr_weak_roots,                          &quot;    U: JFR Weak Roots&quot;)            \
 80   f(update_jni_weak_roots,                          &quot;    U: JNI Weak Roots&quot;)            \
 81   f(update_stringtable_roots,                       &quot;    U: String Table Roots&quot;)        \
<span class="line-added"> 82   f(update_resolved_method_table_roots,             &quot;    U: Resolved Table Roots&quot;)      \</span>
<span class="line-added"> 83   f(update_vm_global_roots,                         &quot;    U: VM Global Roots&quot;)           \</span>
 84   f(update_vm_weak_roots,                           &quot;    U: VM Weak Roots&quot;)             \
 85   f(update_synchronizer_roots,                      &quot;    U: Synchronizer Roots&quot;)        \
 86   f(update_management_roots,                        &quot;    U: Management Roots&quot;)          \
 87   f(update_system_dictionary_roots,                 &quot;    U: System Dict Roots&quot;)         \
 88   f(update_cldg_roots,                              &quot;    U: CLDG Roots&quot;)                \
 89   f(update_jvmti_roots,                             &quot;    U: JVMTI Roots&quot;)               \
 90   f(update_string_dedup_table_roots,                &quot;    U: Dedup Table Roots&quot;)         \
 91   f(update_string_dedup_queue_roots,                &quot;    U: Dedup Queue Roots&quot;)         \
 92   f(update_finish_queues,                           &quot;    U: Finish Queues&quot;)             \
 93                                                                                         \
 94   f(finish_queues,                                  &quot;  Finish Queues&quot;)                  \
 95   f(termination,                                    &quot;    Termination&quot;)                  \
 96   f(weakrefs,                                       &quot;  Weak References&quot;)                \
 97   f(weakrefs_process,                               &quot;    Process&quot;)                      \
 98   f(weakrefs_termination,                           &quot;      Termination&quot;)                \
 99   f(purge,                                          &quot;  System Purge&quot;)                   \
100   f(purge_class_unload,                             &quot;    Unload Classes&quot;)               \
101   f(purge_par,                                      &quot;    Parallel Cleanup&quot;)             \
102   f(purge_cldg,                                     &quot;    CLDG&quot;)                         \
103   f(complete_liveness,                              &quot;  Complete Liveness&quot;)              \
<span class="line-added">104   f(retire_tlabs,                                   &quot;  Retire TLABs&quot;)                   \</span>
<span class="line-added">105   f(sync_pinned,                                    &quot;  Sync Pinned&quot;)                    \</span>
<span class="line-added">106   f(trash_cset,                                     &quot;  Trash CSet&quot;)                     \</span>
107   f(prepare_evac,                                   &quot;  Prepare Evacuation&quot;)             \

108                                                                                         \
109   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
110   f(init_evac,                                      &quot;  Initial Evacuation&quot;)             \
111   f(evac_thread_roots,                              &quot;    E: Thread Roots&quot;)              \
112   f(evac_code_roots,                                &quot;    E: Code Cache Roots&quot;)          \
113   f(evac_universe_roots,                            &quot;    E: Universe Roots&quot;)            \
114   f(evac_jni_roots,                                 &quot;    E: JNI Roots&quot;)                 \
115   f(evac_jvmti_weak_roots,                          &quot;    E: JVMTI Weak Roots&quot;)          \
116   f(evac_jfr_weak_roots,                            &quot;    E: JFR Weak Roots&quot;)            \
117   f(evac_jni_weak_roots,                            &quot;    E: JNI Weak Roots&quot;)            \
118   f(evac_stringtable_roots,                         &quot;    E: String Table Roots&quot;)        \
<span class="line-added">119   f(evac_resolved_method_table_roots,               &quot;    E: Resolved Table Roots&quot;)      \</span>
<span class="line-added">120   f(evac_vm_global_roots,                           &quot;    E: VM Global Roots&quot;)           \</span>
121   f(evac_vm_weak_roots,                             &quot;    E: VM Weak Roots&quot;)             \
122   f(evac_synchronizer_roots,                        &quot;    E: Synchronizer Roots&quot;)        \
123   f(evac_management_roots,                          &quot;    E: Management Roots&quot;)          \
124   f(evac_system_dictionary_roots,                   &quot;    E: System Dict Roots&quot;)         \
125   f(evac_cldg_roots,                                &quot;    E: CLDG Roots&quot;)                \
126   f(evac_jvmti_roots,                               &quot;    E: JVMTI Roots&quot;)               \
127   f(evac_string_dedup_table_roots,                  &quot;    E: String Dedup Table Roots&quot;)  \
128   f(evac_string_dedup_queue_roots,                  &quot;    E: String Dedup Queue Roots&quot;)  \
129   f(evac_finish_queues,                             &quot;    E: Finish Queues&quot;)             \
130                                                                                         \
131   f(final_evac_gross,                               &quot;Pause Final Evac (G)&quot;)             \
132   f(final_evac,                                     &quot;Pause Final Evac (N)&quot;)             \
<span class="line-added">133   f(final_evac_retire_gclabs,                       &quot;  Retire GCLABs&quot;)                  \</span>
134                                                                                         \
135   f(init_update_refs_gross,                         &quot;Pause Init  Update Refs (G)&quot;)      \
136   f(init_update_refs,                               &quot;Pause Init  Update Refs (N)&quot;)      \
<span class="line-added">137   f(init_update_refs_retire_gclabs,                 &quot;  Retire GCLABs&quot;)                  \</span>
<span class="line-added">138   f(init_update_refs_prepare,                       &quot;  Prepare&quot;)                        \</span>
139                                                                                         \
140   f(final_update_refs_gross,                         &quot;Pause Final Update Refs (G)&quot;)     \
141   f(final_update_refs,                               &quot;Pause Final Update Refs (N)&quot;)     \
142   f(final_update_refs_finish_work,                   &quot;  Finish Work&quot;)                   \
143                                                                                         \
144   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
145   f(final_update_refs_roots,                         &quot;  Update Roots&quot;)                  \
146   f(final_update_refs_thread_roots,                  &quot;    UR: Thread Roots&quot;)            \
147   f(final_update_refs_code_roots,                    &quot;    UR: Code Cache Roots&quot;)        \
148   f(final_update_refs_universe_roots,                &quot;    UR: Universe Roots&quot;)          \
149   f(final_update_refs_jni_roots,                     &quot;    UR: JNI Roots&quot;)               \
150   f(final_update_jvmti_weak_roots,                   &quot;    UR: JVMTI Weak Roots&quot;)        \
151   f(final_update_jfr_weak_roots,                     &quot;    UR: JFR Weak Roots&quot;)          \
152   f(final_update_jni_weak_roots,                     &quot;    UR: JNI Weak Roots&quot;)          \
153   f(final_update_stringtable_roots,                  &quot;    UR: String Table Roots&quot;)      \
<span class="line-added">154   f(final_update_resolved_method_table_roots,        &quot;    UR: Resolved Table Roots&quot;)    \</span>
<span class="line-added">155   f(final_update_vm_global_roots,                    &quot;    UR: VM Global Roots&quot;)         \</span>
156   f(final_update_vm_weak_roots,                      &quot;    UR: VM Weak Roots&quot;)           \
157   f(final_update_refs_synchronizer_roots,            &quot;    UR: Synchronizer Roots&quot;)      \
158   f(final_update_refs_management_roots,              &quot;    UR: Management Roots&quot;)        \
159   f(final_update_refs_system_dict_roots,             &quot;    UR: System Dict Roots&quot;)       \
160   f(final_update_refs_cldg_roots,                    &quot;    UR: CLDG Roots&quot;)              \
161   f(final_update_refs_jvmti_roots,                   &quot;    UR: JVMTI Roots&quot;)             \
162   f(final_update_refs_string_dedup_table_roots,      &quot;    UR: Dedup Table Roots&quot;)       \
163   f(final_update_refs_string_dedup_queue_roots,      &quot;    UR: Dedup Queue Roots&quot;)       \
164   f(final_update_refs_finish_queues,                 &quot;    UR: Finish Queues&quot;)           \
165                                                                                         \
<span class="line-modified">166   f(final_update_refs_sync_pinned,                   &quot;  Sync Pinned&quot;)                   \</span>
<span class="line-added">167   f(final_update_refs_trash_cset,                    &quot;  Trash CSet&quot;)                    \</span>
168                                                                                         \
169   f(degen_gc_gross,                                  &quot;Pause Degenerated GC (G)&quot;)        \
170   f(degen_gc,                                        &quot;Pause Degenerated GC (N)&quot;)        \
171                                                                                         \
172   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
173   f(degen_gc_update_roots,                           &quot;  Degen Update Roots&quot;)            \
174   f(degen_gc_update_thread_roots,                    &quot;    DU: Thread Roots&quot;)            \
175   f(degen_gc_update_code_roots,                      &quot;    DU: Code Cache Roots&quot;)        \
176   f(degen_gc_update_universe_roots,                  &quot;    DU: Universe Roots&quot;)          \
177   f(degen_gc_update_jni_roots,                       &quot;    DU: JNI Roots&quot;)               \
178   f(degen_gc_update_jvmti_weak_roots,                &quot;    DU: JVMTI Weak Roots&quot;)        \
179   f(degen_gc_update_jfr_weak_roots,                  &quot;    DU: JFR Weak Roots&quot;)          \
180   f(degen_gc_update_jni_weak_roots,                  &quot;    DU: JNI Weak Roots&quot;)          \
181   f(degen_gc_update_stringtable_roots,               &quot;    DU: String Table Roots&quot;)      \
<span class="line-added">182   f(degen_gc_update_resolved_method_table_roots,     &quot;    DU: Resolved Table Roots&quot;)    \</span>
<span class="line-added">183   f(degen_gc_update_vm_global_roots,                 &quot;    DU: VM Global Roots&quot;)         \</span>
184   f(degen_gc_update_vm_weak_roots,                   &quot;    DU: VM Weak Roots&quot;)           \
185   f(degen_gc_update_synchronizer_roots,              &quot;    DU: Synchronizer Roots&quot;)      \
186   f(degen_gc_update_management_roots,                &quot;    DU: Management Roots&quot;)        \
187   f(degen_gc_update_system_dict_roots,               &quot;    DU: System Dict Roots&quot;)       \
188   f(degen_gc_update_cldg_roots,                      &quot;    DU: CLDG Roots&quot;)              \
189   f(degen_gc_update_jvmti_roots,                     &quot;    DU: JVMTI Roots&quot;)             \
190   f(degen_gc_update_string_dedup_table_roots,        &quot;    DU: Dedup Table Roots&quot;)       \
191   f(degen_gc_update_string_dedup_queue_roots,        &quot;    DU: Dedup Queue Roots&quot;)       \
192   f(degen_gc_update_finish_queues,                   &quot;    DU: Finish Queues&quot;)           \
193                                                                                         \
194   f(init_traversal_gc_gross,                         &quot;Pause Init Traversal (G)&quot;)        \
195   f(init_traversal_gc,                               &quot;Pause Init Traversal (N)&quot;)        \
196   f(traversal_gc_prepare,                            &quot;  Prepare&quot;)                       \
197   f(traversal_gc_make_parsable,                      &quot;    Make Parsable&quot;)               \
198   f(traversal_gc_resize_tlabs,                       &quot;    Resize TLABs&quot;)                \
<span class="line-added">199   f(traversal_gc_prepare_sync_pinned,                &quot;    Sync Pinned&quot;)                 \</span>
200                                                                                         \
201   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
202   f(init_traversal_gc_work,                          &quot;  Work&quot;)                          \
203   f(init_traversal_gc_thread_roots,                  &quot;    TI: Thread Roots&quot;)            \
204   f(init_traversal_gc_code_roots,                    &quot;    TI: Code Cache Roots&quot;)        \
205   f(init_traversal_gc_universe_roots,                &quot;    TI: Universe Roots&quot;)          \
206   f(init_traversal_gc_jni_roots,                     &quot;    TI: JNI Roots&quot;)               \
207   f(init_traversal_gc_jvmti_weak_roots,              &quot;    TI: JVMTI Weak Roots&quot;)        \
208   f(init_traversal_gc_jfr_weak_roots,                &quot;    TI: JFR Weak Roots&quot;)          \
209   f(init_traversal_gc_jni_weak_roots,                &quot;    TI: JNI Weak Roots&quot;)          \
210   f(init_traversal_gc_stringtable_roots,             &quot;    TI: String Table Roots&quot;)      \
<span class="line-added">211   f(init_traversal_gc_resolved_method_table_roots,   &quot;    TI: Resolved Table Roots&quot;)    \</span>
<span class="line-added">212   f(init_traversal_gc_vm_global_roots,               &quot;    TI: VM Global Roots&quot;)         \</span>
213   f(init_traversal_gc_vm_weak_roots,                 &quot;    TI: VM Weak Roots&quot;)           \
214   f(init_traversal_gc_synchronizer_roots,            &quot;    TI: Synchronizer Roots&quot;)      \
215   f(init_traversal_gc_management_roots,              &quot;    TI: Management Roots&quot;)        \
216   f(init_traversal_gc_system_dict_roots,             &quot;    TI: System Dict Roots&quot;)       \
217   f(init_traversal_gc_cldg_roots,                    &quot;    TI: CLDG Roots&quot;)              \
218   f(init_traversal_gc_jvmti_roots,                   &quot;    TI: JVMTI Roots&quot;)             \
219   f(init_traversal_gc_string_dedup_table_roots,      &quot;    TI: Dedup Table Roots&quot;)       \
220   f(init_traversal_gc_string_dedup_queue_roots,      &quot;    TI: Dedup Queue Roots&quot;)       \
221   f(init_traversal_gc_finish_queues,                 &quot;    TI: Finish Queues&quot;)           \
222                                                                                         \
223   f(final_traversal_gc_gross,                        &quot;Pause Final Traversal (G)&quot;)       \
224   f(final_traversal_gc,                              &quot;Pause Final Traversal (N)&quot;)       \
225                                                                                         \
226   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
227   f(final_traversal_gc_work,                         &quot;  Work&quot;)                          \
228   f(final_traversal_gc_thread_roots,                 &quot;    TF: Thread Roots&quot;)            \
229   f(final_traversal_gc_code_roots,                   &quot;    TF: Code Cache Roots&quot;)        \
230   f(final_traversal_gc_universe_roots,               &quot;    TF: Universe Roots&quot;)          \
231   f(final_traversal_gc_jni_roots,                    &quot;    TF: JNI Roots&quot;)               \
232   f(final_traversal_gc_jvmti_weak_roots,             &quot;    TF: JVMTI Weak Roots&quot;)        \
233   f(final_traversal_gc_jfr_weak_roots,               &quot;    TF: JFR Weak Roots&quot;)          \
234   f(final_traversal_gc_jni_weak_roots,               &quot;    TF: JNI Weak Roots&quot;)          \
235   f(final_traversal_gc_stringtable_roots,            &quot;    TF: String Table Roots&quot;)      \
<span class="line-added">236   f(final_traversal_gc_resolved_method_table_roots,  &quot;    TF: Resolved Table Roots&quot;)    \</span>
<span class="line-added">237   f(final_traversal_gc_vm_global_roots,              &quot;    TF: VM Global Roots&quot;)         \</span>
238   f(final_traversal_gc_vm_weak_roots,                &quot;    TF: VM Weak Roots&quot;)           \
239   f(final_traversal_gc_synchronizer_roots,           &quot;    TF: Synchronizer Roots&quot;)      \
240   f(final_traversal_gc_management_roots,             &quot;    TF: Management Roots&quot;)        \
241   f(final_traversal_gc_system_dict_roots,            &quot;    TF: System Dict Roots&quot;)       \
242   f(final_traversal_gc_cldg_roots,                   &quot;    TF: CLDG Roots&quot;)              \
243   f(final_traversal_gc_jvmti_roots,                  &quot;    TF: JVMTI Roots&quot;)             \
244   f(final_traversal_gc_string_dedup_table_roots,     &quot;    TF: Dedup Table Roots&quot;)       \
245   f(final_traversal_gc_string_dedup_queue_roots,     &quot;    TF: Dedup Queue Roots&quot;)       \
246   f(final_traversal_gc_finish_queues,                &quot;    TF: Finish Queues&quot;)           \
247   f(final_traversal_gc_termination,                  &quot;    TF:   Termination&quot;)           \
248                                                                                         \
249   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
<span class="line-modified">250   f(final_traversal_update_roots,                       &quot;  Update Roots&quot;)               \</span>
<span class="line-modified">251   f(final_traversal_update_thread_roots,                &quot;    TU: Thread Roots&quot;)         \</span>
<span class="line-modified">252   f(final_traversal_update_code_roots,                  &quot;    TU: Code Cache Roots&quot;)     \</span>
<span class="line-modified">253   f(final_traversal_update_universe_roots,              &quot;    TU: Universe Roots&quot;)       \</span>
<span class="line-modified">254   f(final_traversal_update_jni_roots,                   &quot;    TU: JNI Roots&quot;)            \</span>
<span class="line-modified">255   f(final_traversal_update_jvmti_weak_roots,            &quot;    TU: JVMTI Weak Roots&quot;)     \</span>
<span class="line-modified">256   f(final_traversal_update_jfr_weak_roots,              &quot;    TU: JFR Weak Roots&quot;)       \</span>
<span class="line-modified">257   f(final_traversal_update_jni_weak_roots,              &quot;    TU: JNI Weak Roots&quot;)       \</span>
<span class="line-modified">258   f(final_traversal_update_stringtable_roots,           &quot;    TU: String Table Roots&quot;)   \</span>
<span class="line-modified">259   f(final_traversal_update_resolved_method_table_roots, &quot;    TU: Resolved Table Roots&quot;) \</span>
<span class="line-modified">260   f(final_traversal_update_vm_global_roots,             &quot;    TU: VM Global Roots&quot;)      \</span>
<span class="line-modified">261   f(final_traversal_update_vm_weak_roots,               &quot;    TU: VM Weak Roots&quot;)        \</span>
<span class="line-modified">262   f(final_traversal_update_synchronizer_roots,          &quot;    TU: Synchronizer Roots&quot;)   \</span>
<span class="line-modified">263   f(final_traversal_update_management_roots,            &quot;    TU: Management Roots&quot;)     \</span>
<span class="line-modified">264   f(final_traversal_update_system_dict_roots,           &quot;    TU: System Dict Roots&quot;)    \</span>
<span class="line-modified">265   f(final_traversal_update_cldg_roots,                  &quot;    TU: CLDG Roots&quot;)           \</span>
<span class="line-modified">266   f(final_traversal_update_jvmti_roots,                 &quot;    TU: JVMTI Roots&quot;)          \</span>
<span class="line-modified">267   f(final_traversal_update_string_dedup_table_roots,    &quot;    TU: Dedup Table Roots&quot;)    \</span>
<span class="line-added">268   f(final_traversal_update_string_dedup_queue_roots,    &quot;    TU: Dedup Queue Roots&quot;)    \</span>
<span class="line-added">269   f(final_traversal_update_finish_queues,               &quot;    TU: Finish Queues&quot;)        \</span>
270                                                                                         \
<span class="line-added">271   f(traversal_gc_sync_pinned,                        &quot;  Sync Pinned&quot;)                   \</span>
272   f(traversal_gc_cleanup,                            &quot;  Cleanup&quot;)                       \
273                                                                                         \
274   f(full_gc_gross,                                   &quot;Pause Full GC (G)&quot;)               \
275   f(full_gc,                                         &quot;Pause Full GC (N)&quot;)               \
276   f(full_gc_heapdumps,                               &quot;  Heap Dumps&quot;)                    \
277   f(full_gc_prepare,                                 &quot;  Prepare&quot;)                       \
278                                                                                         \
279   /* Per-thread timer block, should have &quot;roots&quot; counters in consistent order */        \
280   f(full_gc_roots,                                   &quot;  Roots&quot;)                         \
281   f(full_gc_thread_roots,                            &quot;    F: Thread Roots&quot;)             \
282   f(full_gc_code_roots,                              &quot;    F: Code Cache Roots&quot;)         \
283   f(full_gc_universe_roots,                          &quot;    F: Universe Roots&quot;)           \
284   f(full_gc_jni_roots,                               &quot;    F: JNI Roots&quot;)                \
285   f(full_gc_jvmti_weak_roots,                        &quot;    F: JVMTI Weak Roots&quot;)         \
286   f(full_gc_jfr_weak_roots,                          &quot;    F: JFR Weak Roots&quot;)           \
287   f(full_gc_jni_weak_roots,                          &quot;    F: JNI Weak Roots&quot;)           \
288   f(full_gc_stringtable_roots,                       &quot;    F: String Table Roots&quot;)       \
<span class="line-added">289   f(full_gc_resolved_method_table_roots,             &quot;    F: Resolved Table Roots&quot;)     \</span>
<span class="line-added">290   f(full_gc_vm_global_roots,                         &quot;    F: VM Global Roots&quot;)          \</span>
291   f(full_gc_vm_weak_roots,                           &quot;    F: VM Weak Roots&quot;)            \
292   f(full_gc_synchronizer_roots,                      &quot;    F: Synchronizer Roots&quot;)       \
293   f(full_gc_management_roots,                        &quot;    F: Management Roots&quot;)         \
294   f(full_gc_system_dictionary_roots,                 &quot;    F: System Dict Roots&quot;)        \
295   f(full_gc_cldg_roots,                              &quot;    F: CLDG Roots&quot;)               \
296   f(full_gc_jvmti_roots,                             &quot;    F: JVMTI Roots&quot;)              \
297   f(full_gc_string_dedup_table_roots,                &quot;    F: Dedup Table Roots&quot;)        \
298   f(full_gc_string_dedup_queue_roots,                &quot;    F: Dedup Queue Roots&quot;)        \
299   f(full_gc_finish_queues,                           &quot;    F: Finish Queues&quot;)            \
300                                                                                         \
301   f(full_gc_mark,                                    &quot;  Mark&quot;)                          \
302   f(full_gc_mark_finish_queues,                      &quot;    Finish Queues&quot;)               \
303   f(full_gc_mark_termination,                        &quot;      Termination&quot;)               \
304   f(full_gc_weakrefs,                                &quot;    Weak References&quot;)             \
305   f(full_gc_weakrefs_process,                        &quot;      Process&quot;)                   \
306   f(full_gc_weakrefs_termination,                    &quot;        Termination&quot;)             \
307   f(full_gc_purge,                                   &quot;    System Purge&quot;)                \
308   f(full_gc_purge_class_unload,                      &quot;      Unload Classes&quot;)            \
309   f(full_gc_purge_par,                               &quot;    Parallel Cleanup&quot;)            \
310   f(full_gc_purge_cldg,                              &quot;    CLDG&quot;)                        \
311   f(full_gc_calculate_addresses,                     &quot;  Calculate Addresses&quot;)           \
312   f(full_gc_calculate_addresses_regular,             &quot;    Regular Objects&quot;)             \
313   f(full_gc_calculate_addresses_humong,              &quot;    Humongous Objects&quot;)           \
314   f(full_gc_adjust_pointers,                         &quot;  Adjust Pointers&quot;)               \
315   f(full_gc_copy_objects,                            &quot;  Copy Objects&quot;)                  \
316   f(full_gc_copy_objects_regular,                    &quot;    Regular Objects&quot;)             \
317   f(full_gc_copy_objects_humong,                     &quot;    Humongous Objects&quot;)           \
318   f(full_gc_copy_objects_reset_complete,             &quot;    Reset Complete Bitmap&quot;)       \
319   f(full_gc_copy_objects_rebuild,                    &quot;    Rebuild Region Sets&quot;)         \
320   f(full_gc_resize_tlabs,                            &quot;  Resize TLABs&quot;)                  \
321                                                                                         \
322   /* Longer concurrent phases at the end */                                             \
323   f(conc_reset,                                      &quot;Concurrent Reset&quot;)                \
324   f(conc_mark,                                       &quot;Concurrent Marking&quot;)              \
325   f(conc_termination,                                &quot;  Termination&quot;)                   \
326   f(conc_preclean,                                   &quot;Concurrent Precleaning&quot;)          \
<span class="line-added">327   f(conc_roots,                                      &quot;Concurrent Roots&quot;)                \</span>
328   f(conc_evac,                                       &quot;Concurrent Evacuation&quot;)           \
329   f(conc_update_refs,                                &quot;Concurrent Update Refs&quot;)          \
330   f(conc_cleanup,                                    &quot;Concurrent Cleanup&quot;)              \
331   f(conc_traversal,                                  &quot;Concurrent Traversal&quot;)            \
332   f(conc_traversal_termination,                      &quot;  Termination&quot;)                   \
333                                                                                         \
334   f(conc_uncommit,                                   &quot;Concurrent Uncommit&quot;)             \
335                                                                                         \
336   /* Unclassified */                                                                    \
337   f(pause_other,                                     &quot;Pause Other&quot;)                     \
338   f(conc_other,                                      &quot;Concurrent Other&quot;)                \
339   // end
340 
341 #define SHENANDOAH_GC_PAR_PHASE_DO(f)                           \
<span class="line-modified">342   f(ThreadRoots,              &quot;Thread Roots (ms):&quot;)              \</span>
<span class="line-modified">343   f(CodeCacheRoots,           &quot;CodeCache Roots (ms):&quot;)           \</span>
<span class="line-modified">344   f(UniverseRoots,            &quot;Universe Roots (ms):&quot;)            \</span>
<span class="line-modified">345   f(JNIRoots,                 &quot;JNI Handles Roots (ms):&quot;)         \</span>
<span class="line-modified">346   f(JVMTIWeakRoots,           &quot;JVMTI Weak Roots (ms):&quot;)          \</span>
<span class="line-modified">347   f(JFRWeakRoots,             &quot;JFR Weak Roots (ms):&quot;)            \</span>
<span class="line-modified">348   f(TSANWeakRoots,            &quot;TSAN Weak Roots (ms):&quot;)           \</span>
<span class="line-modified">349   f(JNIWeakRoots,             &quot;JNI Weak Roots (ms):&quot;)            \</span>
<span class="line-modified">350   f(StringTableRoots,         &quot;StringTable Roots(ms):&quot;)          \</span>
<span class="line-modified">351   f(ResolvedMethodTableRoots, &quot;Resolved Table Roots(ms):&quot;)       \</span>
<span class="line-modified">352   f(VMGlobalRoots,            &quot;VM Global Roots(ms)&quot;)             \</span>
<span class="line-modified">353   f(VMWeakRoots,              &quot;VM Weak Roots(ms)&quot;)               \</span>
<span class="line-modified">354   f(ObjectSynchronizerRoots,  &quot;ObjectSynchronizer Roots (ms):&quot;)  \</span>
<span class="line-modified">355   f(ManagementRoots,          &quot;Management Roots (ms):&quot;)          \</span>
<span class="line-modified">356   f(SystemDictionaryRoots,    &quot;SystemDictionary Roots (ms):&quot;)    \</span>
<span class="line-modified">357   f(CLDGRoots,                &quot;CLDG Roots (ms):&quot;)                \</span>
<span class="line-modified">358   f(JVMTIRoots,               &quot;JVMTI Roots (ms):&quot;)               \</span>
<span class="line-modified">359   f(StringDedupTableRoots,    &quot;String Dedup Table Roots (ms):&quot;)  \</span>
<span class="line-added">360   f(StringDedupQueueRoots,    &quot;String Dedup Queue Roots (ms):&quot;)  \</span>
<span class="line-added">361   f(FinishQueues,             &quot;Finish Queues (ms):&quot;)             \</span>
362   // end
363 
364 class ShenandoahPhaseTimings : public CHeapObj&lt;mtGC&gt; {
365 public:
366 #define GC_PHASE_DECLARE_ENUM(type, title)   type,
367 
368   enum Phase {
369     SHENANDOAH_GC_PHASE_DO(GC_PHASE_DECLARE_ENUM)
370     _num_phases
371   };
372 
373   // These are the subphases of GC phases (scan_roots, update_roots,
374   // init_evac, final_update_refs_roots and full_gc_roots).
375   // Make sure they are following this order.
376   enum GCParPhases {
377     SHENANDOAH_GC_PAR_PHASE_DO(GC_PHASE_DECLARE_ENUM)
378     GCParPhasesSentinel
379   };
380 
381 #undef GC_PHASE_DECLARE_ENUM
</pre>
</td>
</tr>
</table>
<center><a href="shenandoahPhaseTimings.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahRootProcessor.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>