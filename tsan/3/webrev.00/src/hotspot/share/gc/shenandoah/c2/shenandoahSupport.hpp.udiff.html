<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/shenandoah/c2/shenandoahSupport.hpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahSupport.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../heuristics/shenandoahAdaptiveHeuristics.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/c2/shenandoahSupport.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,8 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2015, 2018, Red Hat, Inc. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2015, 2019, Red Hat, Inc. All rights reserved.</span>
<span class="udiff-line-added">+  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span>
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
   *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -22,11 +23,10 @@</span>
   */
  
  #ifndef SHARE_GC_SHENANDOAH_C2_SHENANDOAHSUPPORT_HPP
  #define SHARE_GC_SHENANDOAH_C2_SHENANDOAHSUPPORT_HPP
  
<span class="udiff-line-removed">- #include &quot;gc/shenandoah/shenandoahBrooksPointer.hpp&quot;</span>
  #include &quot;memory/allocation.hpp&quot;
  #include &quot;opto/addnode.hpp&quot;
  #include &quot;opto/graphKit.hpp&quot;
  #include &quot;opto/machnode.hpp&quot;
  #include &quot;opto/memnode.hpp&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -34,222 +34,66 @@</span>
  #include &quot;opto/node.hpp&quot;
  
  class PhaseGVN;
  class MemoryGraphFixer;
  
<span class="udiff-line-modified-removed">- class ShenandoahBarrierNode : public TypeNode {</span>
<span class="udiff-line-modified-added">+ class ShenandoahBarrierC2Support : public AllStatic {</span>
  private:
<span class="udiff-line-removed">-   bool _allow_fromspace;</span>
<span class="udiff-line-removed">- </span>
  #ifdef ASSERT
    enum verify_type {
      ShenandoahLoad,
      ShenandoahStore,
      ShenandoahValue,
      ShenandoahOopStore,
<span class="udiff-line-modified-removed">-     ShenandoahNone,</span>
<span class="udiff-line-modified-added">+     ShenandoahNone</span>
    };
  
    static bool verify_helper(Node* in, Node_Stack&amp; phis, VectorSet&amp; visited, verify_type t, bool trace, Unique_Node_List&amp; barriers_used);
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- public:</span>
<span class="udiff-line-removed">-   enum { Control,</span>
<span class="udiff-line-removed">-          Memory,</span>
<span class="udiff-line-removed">-          ValueIn</span>
<span class="udiff-line-removed">-   };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   ShenandoahBarrierNode(Node* ctrl, Node* mem, Node* obj, bool allow_fromspace)</span>
<span class="udiff-line-removed">-     : TypeNode(obj-&gt;bottom_type()-&gt;isa_oopptr() ? obj-&gt;bottom_type()-&gt;is_oopptr()-&gt;cast_to_nonconst() : obj-&gt;bottom_type(), 3),</span>
<span class="udiff-line-removed">-       _allow_fromspace(allow_fromspace) {</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     init_req(Control, ctrl);</span>
<span class="udiff-line-removed">-     init_req(Memory, mem);</span>
<span class="udiff-line-removed">-     init_req(ValueIn, obj);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     init_class_id(Class_ShenandoahBarrier);</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static Node* skip_through_barrier(Node* n);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static const TypeOopPtr* brooks_pointer_type(const Type* t) {</span>
<span class="udiff-line-removed">-     return t-&gt;is_oopptr()-&gt;cast_to_nonconst()-&gt;add_offset(ShenandoahBrooksPointer::byte_offset())-&gt;is_oopptr();</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   virtual const TypePtr* adr_type() const {</span>
<span class="udiff-line-removed">-     if (bottom_type() == Type::TOP) {</span>
<span class="udiff-line-removed">-       return NULL;</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">-     //const TypePtr* adr_type = in(MemNode::Address)-&gt;bottom_type()-&gt;is_ptr();</span>
<span class="udiff-line-removed">-     const TypePtr* adr_type = brooks_pointer_type(bottom_type());</span>
<span class="udiff-line-removed">-     assert(adr_type-&gt;offset() == ShenandoahBrooksPointer::byte_offset(), &quot;sane offset&quot;);</span>
<span class="udiff-line-removed">-     assert(Compile::current()-&gt;alias_type(adr_type)-&gt;is_rewritable(), &quot;brooks ptr must be rewritable&quot;);</span>
<span class="udiff-line-removed">-     return adr_type;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   virtual uint  ideal_reg() const { return Op_RegP; }</span>
<span class="udiff-line-removed">-   virtual uint match_edge(uint idx) const {</span>
<span class="udiff-line-removed">-     return idx &gt;= ValueIn;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   Node* Identity_impl(PhaseGVN* phase);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   virtual const Type* Value(PhaseGVN* phase) const;</span>
<span class="udiff-line-removed">-   virtual bool depends_only_on_test() const {</span>
<span class="udiff-line-removed">-     return true;</span>
<span class="udiff-line-removed">-   };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static bool needs_barrier(PhaseGVN* phase, ShenandoahBarrierNode* orig, Node* n, Node* rb_mem, bool allow_fromspace);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- #ifdef ASSERT</span>
    static void report_verify_failure(const char* msg, Node* n1 = NULL, Node* n2 = NULL);
<span class="udiff-line-removed">-   static void verify(RootNode* root);</span>
    static void verify_raw_mem(RootNode* root);
  #endif
<span class="udiff-line-removed">- #ifndef PRODUCT</span>
<span class="udiff-line-removed">-   virtual void dump_spec(outputStream *st) const;</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // protected:</span>
<span class="udiff-line-removed">-   static Node* dom_mem(Node* mem, Node*&amp; mem_ctrl, Node* n, Node* rep_ctrl, int alias, PhaseIdealLoop* phase);</span>
    static Node* dom_mem(Node* mem, Node* ctrl, int alias, Node*&amp; mem_ctrl, PhaseIdealLoop* phase);
<span class="udiff-line-removed">-   static bool is_dominator(Node *d_c, Node *n_c, Node* d, Node* n, PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">-   static bool is_dominator_same_ctrl(Node* c, Node* d, Node* n, PhaseIdealLoop* phase);</span>
    static Node* no_branches(Node* c, Node* dom, bool allow_one_proj, PhaseIdealLoop* phase);
<span class="udiff-line-removed">-   static bool build_loop_late_post(PhaseIdealLoop* phase, Node* n);</span>
<span class="udiff-line-removed">-   bool sink_node(PhaseIdealLoop* phase, Node* ctrl, Node* n_ctrl);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- protected:</span>
<span class="udiff-line-removed">-   uint hash() const;</span>
<span class="udiff-line-removed">-   uint cmp(const Node&amp; n) const;</span>
<span class="udiff-line-removed">-   uint size_of() const;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- private:</span>
<span class="udiff-line-removed">-   static bool needs_barrier_impl(PhaseGVN* phase, ShenandoahBarrierNode* orig, Node* n, Node* rb_mem, bool allow_fromspace, Unique_Node_List &amp;visited);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static bool dominates_memory(PhaseGVN* phase, Node* b1, Node* b2, bool linear);</span>
<span class="udiff-line-removed">-   static bool dominates_memory_impl(PhaseGVN* phase, Node* b1, Node* b2, Node* current, bool linear);</span>
<span class="udiff-line-removed">- };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- class ShenandoahReadBarrierNode : public ShenandoahBarrierNode {</span>
<span class="udiff-line-removed">- public:</span>
<span class="udiff-line-removed">-   ShenandoahReadBarrierNode(Node* ctrl, Node* mem, Node* obj)</span>
<span class="udiff-line-removed">-     : ShenandoahBarrierNode(ctrl, mem, obj, true) {</span>
<span class="udiff-line-removed">-     assert(UseShenandoahGC &amp;&amp; (ShenandoahReadBarrier || ShenandoahStoreValReadBarrier ||</span>
<span class="udiff-line-removed">-                                ShenandoahWriteBarrier || ShenandoahAcmpBarrier),</span>
<span class="udiff-line-removed">-            &quot;should be enabled&quot;);</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">-   ShenandoahReadBarrierNode(Node* ctrl, Node* mem, Node* obj, bool allow_fromspace)</span>
<span class="udiff-line-removed">-     : ShenandoahBarrierNode(ctrl, mem, obj, allow_fromspace) {</span>
<span class="udiff-line-removed">-     assert(UseShenandoahGC &amp;&amp; (ShenandoahReadBarrier || ShenandoahStoreValReadBarrier ||</span>
<span class="udiff-line-removed">-                                ShenandoahWriteBarrier || ShenandoahAcmpBarrier),</span>
<span class="udiff-line-removed">-            &quot;should be enabled&quot;);</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   virtual Node *Ideal(PhaseGVN *phase, bool can_reshape);</span>
<span class="udiff-line-removed">-   virtual Node* Identity(PhaseGVN* phase);</span>
<span class="udiff-line-removed">-   virtual int Opcode() const;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   bool is_independent(Node* mem);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   void try_move(PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- private:</span>
<span class="udiff-line-removed">-   static bool is_independent(const Type* in_type, const Type* this_type);</span>
<span class="udiff-line-removed">-   static bool dominates_memory_rb(PhaseGVN* phase, Node* b1, Node* b2, bool linear);</span>
<span class="udiff-line-removed">-   static bool dominates_memory_rb_impl(PhaseGVN* phase, Node* b1, Node* b2, Node* current, bool linear);</span>
<span class="udiff-line-removed">- };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- class ShenandoahWriteBarrierNode : public ShenandoahBarrierNode {</span>
<span class="udiff-line-removed">- public:</span>
<span class="udiff-line-removed">-   ShenandoahWriteBarrierNode(Compile* C, Node* ctrl, Node* mem, Node* obj);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   virtual int Opcode() const;</span>
<span class="udiff-line-removed">-   virtual Node *Ideal(PhaseGVN *phase, bool can_reshape);</span>
<span class="udiff-line-removed">-   virtual Node* Identity(PhaseGVN* phase);</span>
<span class="udiff-line-removed">-   virtual bool depends_only_on_test() const { return false; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static bool expand(Compile* C, PhaseIterGVN&amp; igvn);</span>
<span class="udiff-line-removed">-   static bool is_gc_state_load(Node *n);</span>
    static bool is_heap_state_test(Node* iff, int mask);
<span class="udiff-line-removed">-   static bool is_heap_stable_test(Node* iff);</span>
    static bool try_common_gc_state_load(Node *n, PhaseIdealLoop *phase);
    static bool has_safepoint_between(Node* start, Node* stop, PhaseIdealLoop *phase);
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static LoopNode* try_move_before_pre_loop(Node* c, Node* val_ctrl, PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">-   static Node* move_above_predicates(LoopNode* cl, Node* val_ctrl, PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">- #ifdef ASSERT</span>
<span class="udiff-line-removed">-   static bool memory_dominates_all_paths(Node* mem, Node* rep_ctrl, int alias, PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">-   static void memory_dominates_all_paths_helper(Node* c, Node* rep_ctrl, Unique_Node_List&amp; controls, PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">-   void try_move_before_loop(GrowableArray&lt;MemoryGraphFixer*&gt;&amp; memory_graph_fixers, PhaseIdealLoop* phase, bool include_lsm, Unique_Node_List&amp; uses);</span>
<span class="udiff-line-removed">-   void try_move_before_loop_helper(LoopNode* cl, Node* val_ctrl, GrowableArray&lt;MemoryGraphFixer*&gt;&amp; memory_graph_fixers, PhaseIdealLoop* phase, bool include_lsm, Unique_Node_List&amp; uses);</span>
<span class="udiff-line-removed">-   static void pin_and_expand(PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">-   CallStaticJavaNode* pin_and_expand_null_check(PhaseIterGVN&amp; igvn);</span>
<span class="udiff-line-removed">-   void pin_and_expand_move_barrier(PhaseIdealLoop* phase, GrowableArray&lt;MemoryGraphFixer*&gt;&amp; memory_graph_fixers, Unique_Node_List&amp; uses);</span>
<span class="udiff-line-removed">-   void pin_and_expand_helper(PhaseIdealLoop* phase);</span>
    static Node* find_bottom_mem(Node* ctrl, PhaseIdealLoop* phase);
    static void follow_barrier_uses(Node* n, Node* ctrl, Unique_Node_List&amp; uses, PhaseIdealLoop* phase);
    static void test_null(Node*&amp; ctrl, Node* val, Node*&amp; null_ctrl, PhaseIdealLoop* phase);
<span class="udiff-line-removed">- </span>
    static void test_heap_stable(Node*&amp; ctrl, Node* raw_mem, Node*&amp; heap_stable_ctrl,
                                 PhaseIdealLoop* phase);
<span class="udiff-line-modified-removed">-   static void call_wb_stub(Node*&amp; ctrl, Node*&amp; val, Node*&amp; result_mem,</span>
<span class="udiff-line-removed">-                            Node* raw_mem, Node* wb_mem, int alias,</span>
<span class="udiff-line-removed">-                            PhaseIdealLoop* phase);</span>
<span class="udiff-line-modified-added">+   static void call_lrb_stub(Node*&amp; ctrl, Node*&amp; val, Node* load_addr, Node*&amp; result_mem, Node* raw_mem, bool is_native, PhaseIdealLoop* phase);</span>
    static Node* clone_null_check(Node*&amp; c, Node* val, Node* unc_ctrl, PhaseIdealLoop* phase);
    static void fix_null_check(Node* unc, Node* unc_ctrl, Node* new_unc_ctrl, Unique_Node_List&amp; uses,
                               PhaseIdealLoop* phase);
    static void in_cset_fast_test(Node*&amp; ctrl, Node*&amp; not_cset_ctrl, Node* val, Node* raw_mem, PhaseIdealLoop* phase);
    static void move_heap_stable_test_out_of_loop(IfNode* iff, PhaseIdealLoop* phase);
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static void optimize_after_expansion(VectorSet &amp;visited, Node_Stack &amp;nstack, Node_List &amp;old_new, PhaseIdealLoop* phase);</span>
    static void merge_back_to_back_tests(Node* n, PhaseIdealLoop* phase);
    static bool identical_backtoback_ifs(Node *n, PhaseIdealLoop* phase);
    static void fix_ctrl(Node* barrier, Node* region, const MemoryGraphFixer&amp; fixer, Unique_Node_List&amp; uses, Unique_Node_List&amp; uses_to_ignore, uint last, PhaseIdealLoop* phase);
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static void optimize_before_expansion(PhaseIdealLoop* phase, GrowableArray&lt;MemoryGraphFixer*&gt; memory_graph_fixers, bool include_lsm);</span>
<span class="udiff-line-removed">-   Node* would_subsume(ShenandoahBarrierNode* other, PhaseIdealLoop* phase);</span>
    static IfNode* find_unswitching_candidate(const IdealLoopTree *loop, PhaseIdealLoop* phase);
  
<span class="udiff-line-modified-removed">-   Node* try_split_thru_phi(PhaseIdealLoop* phase);</span>
<span class="udiff-line-removed">- };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- class ShenandoahWBMemProjNode : public Node {</span>
<span class="udiff-line-modified-added">+   static Node* get_load_addr(PhaseIdealLoop* phase, VectorSet&amp; visited, Node* lrb);</span>
  public:
<span class="udiff-line-modified-removed">-   enum { Control,</span>
<span class="udiff-line-modified-removed">-          WriteBarrier };</span>
<span class="udiff-line-modified-added">+   static bool is_dominator(Node* d_c, Node* n_c, Node* d, Node* n, PhaseIdealLoop* phase);</span>
<span class="udiff-line-modified-added">+   static bool is_dominator_same_ctrl(Node* c, Node* d, Node* n, PhaseIdealLoop* phase);</span>
  
<span class="udiff-line-modified-removed">-   ShenandoahWBMemProjNode(Node *src) : Node(NULL, src) {</span>
<span class="udiff-line-modified-removed">-     assert(UseShenandoahGC &amp;&amp; ShenandoahWriteBarrier, &quot;should be enabled&quot;);</span>
<span class="udiff-line-removed">-     assert(src-&gt;Opcode() == Op_ShenandoahWriteBarrier || src-&gt;is_Mach(), &quot;epxect wb&quot;);</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">-   virtual Node* Identity(PhaseGVN* phase);</span>
<span class="udiff-line-modified-added">+   static bool is_gc_state_load(Node* n);</span>
<span class="udiff-line-modified-added">+   static bool is_heap_stable_test(Node* iff);</span>
  
<span class="udiff-line-modified-removed">-   virtual int Opcode() const;</span>
<span class="udiff-line-modified-removed">-   virtual bool      is_CFG() const  { return false; }</span>
<span class="udiff-line-modified-removed">-   virtual const Type *bottom_type() const {return Type::MEMORY;}</span>
<span class="udiff-line-removed">-   virtual const TypePtr *adr_type() const {</span>
<span class="udiff-line-removed">-     Node* wb = in(WriteBarrier);</span>
<span class="udiff-line-removed">-     if (wb == NULL || wb-&gt;is_top())  return NULL; // node is dead</span>
<span class="udiff-line-removed">-     assert(wb-&gt;Opcode() == Op_ShenandoahWriteBarrier || (wb-&gt;is_Mach() &amp;&amp; wb-&gt;as_Mach()-&gt;ideal_Opcode() == Op_ShenandoahWriteBarrier) || wb-&gt;is_Phi(), &quot;expect wb&quot;);</span>
<span class="udiff-line-removed">-     return ShenandoahBarrierNode::brooks_pointer_type(wb-&gt;bottom_type());</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-modified-added">+   static bool expand(Compile* C, PhaseIterGVN&amp; igvn);</span>
<span class="udiff-line-modified-added">+   static void pin_and_expand(PhaseIdealLoop* phase);</span>
<span class="udiff-line-modified-added">+   static void optimize_after_expansion(VectorSet&amp; visited, Node_Stack&amp; nstack, Node_List&amp; old_new, PhaseIdealLoop* phase);</span>
  
<span class="udiff-line-modified-removed">-   virtual uint ideal_reg() const { return 0;} // memory projections don&#39;t have a register</span>
<span class="udiff-line-modified-removed">-   virtual const Type *Value(PhaseGVN* phase ) const {</span>
<span class="udiff-line-removed">-     return bottom_type();</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- #ifndef PRODUCT</span>
<span class="udiff-line-removed">-   virtual void dump_spec(outputStream *st) const {};</span>
<span class="udiff-line-modified-added">+ #ifdef ASSERT</span>
<span class="udiff-line-modified-added">+   static void verify(RootNode* root);</span>
  #endif
  };
  
  class ShenandoahEnqueueBarrierNode : public Node {
  public:
<span class="udiff-line-modified-removed">-   ShenandoahEnqueueBarrierNode(Node* val) : Node(NULL, val) {</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-modified-added">+   ShenandoahEnqueueBarrierNode(Node* val);</span>
  
    const Type *bottom_type() const;
    const Type* Value(PhaseGVN* phase) const;
    Node* Identity(PhaseGVN* phase);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -287,11 +131,10 @@</span>
    }
  
    Node* find_mem(Node* ctrl, Node* n) const;
    void fix_mem(Node* ctrl, Node* region, Node* mem, Node* mem_for_ctrl, Node* mem_phi, Unique_Node_List&amp; uses);
    int alias() const { return _alias; }
<span class="udiff-line-removed">-   void remove(Node* n);</span>
  };
  
  class ShenandoahCompareAndSwapPNode : public CompareAndSwapPNode {
  public:
    ShenandoahCompareAndSwapPNode(Node *c, Node *mem, Node *adr, Node *val, Node *ex, MemNode::MemOrd mem_ord)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -380,6 +223,48 @@</span>
    }
  
    virtual int Opcode() const;
  };
  
<span class="udiff-line-added">+ class ShenandoahLoadReferenceBarrierNode : public Node {</span>
<span class="udiff-line-added">+ public:</span>
<span class="udiff-line-added">+   enum {</span>
<span class="udiff-line-added">+     Control,</span>
<span class="udiff-line-added">+     ValueIn</span>
<span class="udiff-line-added">+   };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   enum Strength {</span>
<span class="udiff-line-added">+     NONE, STRONG</span>
<span class="udiff-line-added">+   };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+   bool _native;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ public:</span>
<span class="udiff-line-added">+   ShenandoahLoadReferenceBarrierNode(Node* ctrl, Node* val, bool native);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   bool is_native() const;</span>
<span class="udiff-line-added">+   virtual int Opcode() const;</span>
<span class="udiff-line-added">+   virtual const Type* bottom_type() const;</span>
<span class="udiff-line-added">+   virtual const Type* Value(PhaseGVN* phase) const;</span>
<span class="udiff-line-added">+   virtual const class TypePtr *adr_type() const { return TypeOopPtr::BOTTOM; }</span>
<span class="udiff-line-added">+   virtual uint match_edge(uint idx) const {</span>
<span class="udiff-line-added">+     return idx &gt;= ValueIn;</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+   virtual uint ideal_reg() const { return Op_RegP; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   virtual Node* Identity(PhaseGVN* phase);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   virtual uint size_of() const;</span>
<span class="udiff-line-added">+   virtual uint hash() const;</span>
<span class="udiff-line-added">+   virtual bool cmp( const Node &amp;n ) const;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   Strength get_barrier_strength();</span>
<span class="udiff-line-added">+   CallStaticJavaNode* pin_and_expand_null_check(PhaseIterGVN&amp; igvn);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+   bool needs_barrier(PhaseGVN* phase, Node* n);</span>
<span class="udiff-line-added">+   bool needs_barrier_impl(PhaseGVN* phase, Node* n, Unique_Node_List &amp;visited);</span>
<span class="udiff-line-added">+ };</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
  #endif // SHARE_GC_SHENANDOAH_C2_SHENANDOAHSUPPORT_HPP
</pre>
<center><a href="shenandoahSupport.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../heuristics/shenandoahAdaptiveHeuristics.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>