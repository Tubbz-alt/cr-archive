<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/g1/g1CollectionSetChooser.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="g1CollectionSetCandidates.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1ConcurrentMark.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/g1/g1CollectionSetChooser.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -110,11 +110,11 @@</span>
        FREE_C_HEAP_ARRAY(HeapRegion*, _data);
      }
  
      // Claim a new chunk, returning its bounds [from, to[.
      void claim_chunk(uint&amp; from, uint&amp; to) {
<span class="udiff-line-modified-removed">-       uint result = Atomic::add(_chunk_size, &amp;_cur_claim_idx);</span>
<span class="udiff-line-modified-added">+       uint result = Atomic::add(&amp;_cur_claim_idx, _chunk_size);</span>
        assert(_max_size &gt; result - 1,
               &quot;Array too small, is %u should be %u with chunk size %u.&quot;,
               _max_size, result, _chunk_size);
        from = result - _chunk_size;
        to = result;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -212,12 +212,12 @@</span>
    G1BuildCandidateArray _result;
  
    void update_totals(uint num_regions, size_t reclaimable_bytes) {
      if (num_regions &gt; 0) {
        assert(reclaimable_bytes &gt; 0, &quot;invariant&quot;);
<span class="udiff-line-modified-removed">-       Atomic::add(num_regions, &amp;_num_regions_added);</span>
<span class="udiff-line-modified-removed">-       Atomic::add(reclaimable_bytes, &amp;_reclaimable_bytes_added);</span>
<span class="udiff-line-modified-added">+       Atomic::add(&amp;_num_regions_added, num_regions);</span>
<span class="udiff-line-modified-added">+       Atomic::add(&amp;_reclaimable_bytes_added, reclaimable_bytes);</span>
      } else {
        assert(reclaimable_bytes == 0, &quot;invariant&quot;);
      }
    }
  
</pre>
<center><a href="g1CollectionSetCandidates.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1ConcurrentMark.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>