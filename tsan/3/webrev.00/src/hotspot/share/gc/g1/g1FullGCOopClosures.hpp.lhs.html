<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/hotspot/share/gc/g1/g1FullGCOopClosures.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
    <script type="text/javascript" src="../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2017, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_GC_G1_G1FULLGCOOPCLOSURES_HPP
 26 #define SHARE_GC_G1_G1FULLGCOOPCLOSURES_HPP
 27 
<a name="1" id="anc1"></a>
 28 #include &quot;memory/iterator.hpp&quot;
<a name="2" id="anc2"></a><span class="line-removed"> 29 #include &quot;memory/universe.hpp&quot;</span>
 30 
 31 class G1CollectedHeap;
 32 class G1FullCollector;
 33 class G1CMBitMap;
 34 class G1FullGCMarker;
 35 
 36 // Below are closures used by the G1 Full GC.
 37 class G1IsAliveClosure : public BoolObjectClosure {
 38   G1CMBitMap* _bitmap;
 39 
 40 public:
 41   G1IsAliveClosure(G1CMBitMap* bitmap) : _bitmap(bitmap) { }
 42 
 43   virtual bool do_object_b(oop p);
 44 };
 45 
 46 class G1FullKeepAliveClosure: public OopClosure {
 47   G1FullGCMarker* _marker;
 48   template &lt;class T&gt;
 49   inline void do_oop_work(T* p);
 50 
 51 public:
 52   G1FullKeepAliveClosure(G1FullGCMarker* pm) : _marker(pm) { }
 53 
 54   virtual void do_oop(oop* p);
 55   virtual void do_oop(narrowOop* p);
 56 };
 57 
 58 class G1MarkAndPushClosure : public OopIterateClosure {
 59   G1FullGCMarker* _marker;
 60   uint _worker_id;
 61 
 62 public:
 63   G1MarkAndPushClosure(uint worker, G1FullGCMarker* marker, ReferenceDiscoverer* ref) :
 64     OopIterateClosure(ref),
 65     _marker(marker),
 66     _worker_id(worker) { }
 67 
 68   template &lt;class T&gt; inline void do_oop_work(T* p);
 69   virtual void do_oop(oop* p);
 70   virtual void do_oop(narrowOop* p);
 71 
 72   virtual bool do_metadata();
 73   virtual void do_klass(Klass* k);
 74   virtual void do_cld(ClassLoaderData* cld);
 75 };
 76 
 77 class G1AdjustClosure : public BasicOopIterateClosure {
 78   template &lt;class T&gt; static inline void adjust_pointer(T* p);
 79 public:
 80   template &lt;class T&gt; void do_oop_work(T* p) { adjust_pointer(p); }
 81   virtual void do_oop(oop* p);
 82   virtual void do_oop(narrowOop* p);
 83 
 84   virtual ReferenceIterationMode reference_iteration_mode() { return DO_FIELDS; }
 85 };
 86 
 87 class G1VerifyOopClosure: public BasicOopIterateClosure {
 88 private:
 89   G1CollectedHeap* _g1h;
 90   bool             _failures;
 91   oop              _containing_obj;
 92   VerifyOption     _verify_option;
 93 
 94 public:
 95   int _cc;
 96   G1VerifyOopClosure(VerifyOption option);
 97 
 98   void set_containing_obj(oop obj) {
 99     _containing_obj = obj;
100   }
101 
102   bool failures() { return _failures; }
103   void print_object(outputStream* out, oop obj);
104 
105   template &lt;class T&gt; void do_oop_work(T* p);
106 
107   void do_oop(oop* p)       { do_oop_work(p); }
108   void do_oop(narrowOop* p) { do_oop_work(p); }
109 };
110 
111 class G1FollowStackClosure: public VoidClosure {
112   G1FullGCMarker* _marker;
113 
114 public:
115   G1FollowStackClosure(G1FullGCMarker* marker) : _marker(marker) {}
116   virtual void do_void();
117 };
118 
119 #endif // SHARE_GC_G1_G1FULLGCOOPCLOSURES_HPP
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>