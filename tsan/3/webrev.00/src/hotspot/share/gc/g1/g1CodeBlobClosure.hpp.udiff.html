<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/g1/g1CodeBlobClosure.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="g1CodeBlobClosure.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1CodeCacheRemSet.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/g1/g1CodeBlobClosure.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -26,13 +26,15 @@</span>
  #define SHARE_GC_G1_G1CODEBLOBCLOSURE_HPP
  
  #include &quot;gc/g1/g1CollectedHeap.hpp&quot;
  #include &quot;memory/iterator.hpp&quot;
  
<span class="udiff-line-added">+ class G1ConcurrentMark;</span>
  class nmethod;
  
  class G1CodeBlobClosure : public CodeBlobClosure {
<span class="udiff-line-added">+   // Gather nmethod remembered set entries.</span>
    class HeapRegionGatheringOopClosure : public OopClosure {
      G1CollectedHeap* _g1h;
      OopClosure* _work;
      nmethod* _nm;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -48,13 +50,39 @@</span>
      void set_nm(nmethod* nm) {
        _nm = nm;
      }
    };
  
<span class="udiff-line-added">+   // Mark all oops below TAMS.</span>
<span class="udiff-line-added">+   class MarkingOopClosure : public OopClosure {</span>
<span class="udiff-line-added">+     G1ConcurrentMark* _cm;</span>
<span class="udiff-line-added">+     uint _worker_id;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     template &lt;typename T&gt;</span>
<span class="udiff-line-added">+     void do_oop_work(T* p);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   public:</span>
<span class="udiff-line-added">+     MarkingOopClosure(uint worker_id);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     void do_oop(oop* o);</span>
<span class="udiff-line-added">+     void do_oop(narrowOop* o);</span>
<span class="udiff-line-added">+   };</span>
<span class="udiff-line-added">+ </span>
    HeapRegionGatheringOopClosure _oc;
<span class="udiff-line-added">+   MarkingOopClosure _marking_oc;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   bool _strong;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   void do_code_blob_weak(CodeBlob* cb);</span>
<span class="udiff-line-added">+   void do_code_blob_strong(CodeBlob* cb);</span>
<span class="udiff-line-added">+ </span>
  public:
<span class="udiff-line-modified-removed">-   G1CodeBlobClosure(OopClosure* oc) : _oc(oc) {}</span>
<span class="udiff-line-modified-added">+   G1CodeBlobClosure(uint worker_id, OopClosure* oc, bool strong) :</span>
<span class="udiff-line-added">+     _oc(oc), _marking_oc(worker_id), _strong(strong) { }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   void do_evacuation_and_fixup(nmethod* nm);</span>
<span class="udiff-line-added">+   void do_marking(nmethod* nm);</span>
  
    void do_code_blob(CodeBlob* cb);
  };
  
  #endif // SHARE_GC_G1_G1CODEBLOBCLOSURE_HPP
</pre>
<center><a href="g1CodeBlobClosure.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1CodeCacheRemSet.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>