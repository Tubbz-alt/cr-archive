<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/g1/g1RootProcessor.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="g1RootProcessor.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1SATBMarkQueueSet.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/g1/g1RootProcessor.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 23,11 ***</span>
   */
  
  #ifndef SHARE_GC_G1_G1ROOTPROCESSOR_HPP
  #define SHARE_GC_G1_G1ROOTPROCESSOR_HPP
  
<span class="line-removed">- #include &quot;gc/shared/oopStorageParState.hpp&quot;</span>
  #include &quot;gc/shared/strongRootsScope.hpp&quot;
  #include &quot;memory/allocation.hpp&quot;
  #include &quot;runtime/mutex.hpp&quot;
  
  class CLDClosure;
<span class="line-new-header">--- 23,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 48,46 ***</span>
  // worker thread call the process_roots methods.
  class G1RootProcessor : public StackObj {
    G1CollectedHeap* _g1h;
    SubTasksDone _process_strong_tasks;
    StrongRootsScope _srs;
<span class="line-removed">-   OopStorage::ParState&lt;false, false&gt; _par_state_string;</span>
<span class="line-removed">- </span>
<span class="line-removed">-   // Used to implement the Thread work barrier.</span>
<span class="line-removed">-   Monitor _lock;</span>
<span class="line-removed">-   volatile jint _n_workers_discovered_strong_classes;</span>
  
    enum G1H_process_roots_tasks {
      G1RP_PS_Universe_oops_do,
      G1RP_PS_JNIHandles_oops_do,
      G1RP_PS_ObjectSynchronizer_oops_do,
      G1RP_PS_Management_oops_do,
      G1RP_PS_SystemDictionary_oops_do,
      G1RP_PS_ClassLoaderDataGraph_oops_do,
      G1RP_PS_jvmti_oops_do,
      G1RP_PS_CodeCache_oops_do,
<span class="line-modified">!     G1RP_PS_aot_oops_do,</span>
<span class="line-removed">-     G1RP_PS_filter_satb_buffers,</span>
      G1RP_PS_refProcessor_oops_do,
      // Leave this one last.
      G1RP_PS_NumElements
    };
  
<span class="line-removed">-   void worker_has_discovered_all_strong_classes();</span>
<span class="line-removed">-   void wait_until_all_strong_classes_discovered();</span>
<span class="line-removed">- </span>
    void process_java_roots(G1RootClosures* closures,
                            G1GCPhaseTimes* phase_times,
<span class="line-modified">!                           uint worker_i);</span>
  
    void process_vm_roots(G1RootClosures* closures,
                          G1GCPhaseTimes* phase_times,
<span class="line-modified">!                         uint worker_i);</span>
  
    void process_code_cache_roots(CodeBlobClosure* code_closure,
                                  G1GCPhaseTimes* phase_times,
<span class="line-modified">!                                 uint worker_i);</span>
  
  public:
    G1RootProcessor(G1CollectedHeap* g1h, uint n_workers);
  
    // Apply correct closures from pss to the strongly and weakly reachable roots in the system
<span class="line-new-header">--- 47,37 ---</span>
  // worker thread call the process_roots methods.
  class G1RootProcessor : public StackObj {
    G1CollectedHeap* _g1h;
    SubTasksDone _process_strong_tasks;
    StrongRootsScope _srs;
  
    enum G1H_process_roots_tasks {
      G1RP_PS_Universe_oops_do,
      G1RP_PS_JNIHandles_oops_do,
      G1RP_PS_ObjectSynchronizer_oops_do,
      G1RP_PS_Management_oops_do,
      G1RP_PS_SystemDictionary_oops_do,
      G1RP_PS_ClassLoaderDataGraph_oops_do,
      G1RP_PS_jvmti_oops_do,
      G1RP_PS_CodeCache_oops_do,
<span class="line-modified">!     AOT_ONLY(G1RP_PS_aot_oops_do COMMA)</span>
      G1RP_PS_refProcessor_oops_do,
      // Leave this one last.
      G1RP_PS_NumElements
    };
  
    void process_java_roots(G1RootClosures* closures,
                            G1GCPhaseTimes* phase_times,
<span class="line-modified">!                           uint worker_id);</span>
  
    void process_vm_roots(G1RootClosures* closures,
                          G1GCPhaseTimes* phase_times,
<span class="line-modified">!                         uint worker_id);</span>
  
    void process_code_cache_roots(CodeBlobClosure* code_closure,
                                  G1GCPhaseTimes* phase_times,
<span class="line-modified">!                                 uint worker_id);</span>
  
  public:
    G1RootProcessor(G1CollectedHeap* g1h, uint n_workers);
  
    // Apply correct closures from pss to the strongly and weakly reachable roots in the system
</pre>
<center><a href="g1RootProcessor.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="g1SATBMarkQueueSet.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>