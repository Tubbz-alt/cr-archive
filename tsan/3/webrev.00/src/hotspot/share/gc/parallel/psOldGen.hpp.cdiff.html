<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/parallel/psOldGen.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="psOldGen.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="psParallelCompact.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/parallel/psOldGen.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2001, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2001, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 30,12 ***</span>
  #include &quot;gc/parallel/psGenerationCounters.hpp&quot;
  #include &quot;gc/parallel/psVirtualspace.hpp&quot;
  #include &quot;gc/parallel/spaceCounters.hpp&quot;
  #include &quot;runtime/safepoint.hpp&quot;
  
<span class="line-removed">- class PSMarkSweepDecorator;</span>
<span class="line-removed">- </span>
  class PSOldGen : public CHeapObj&lt;mtGC&gt; {
    friend class VMStructs;
    friend class PSPromotionManager; // Uses the cas_allocate methods
    friend class ParallelScavengeHeap;
    friend class AdjoiningGenerations;
<span class="line-new-header">--- 30,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 43,27 ***</span>
   protected:
    MemRegion                _reserved;          // Used for simple containment tests
    PSVirtualSpace*          _virtual_space;     // Controls mapping and unmapping of virtual mem
    ObjectStartArray         _start_array;       // Keeps track of where objects start in a 512b block
    MutableSpace*            _object_space;      // Where all the objects live
<span class="line-removed">- #if INCLUDE_SERIALGC</span>
<span class="line-removed">-   PSMarkSweepDecorator*    _object_mark_sweep; // The mark sweep view of _object_space</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">-   const char* const        _name;              // Name of this generation.</span>
  
    // Performance Counters
    PSGenerationCounters*    _gen_counters;
    SpaceCounters*           _space_counters;
  
    // Sizing information, in bytes, set in constructor
    const size_t _init_gen_size;
    const size_t _min_gen_size;
    const size_t _max_gen_size;
  
<span class="line-removed">-   // Used when initializing the _name field.</span>
<span class="line-removed">-   static inline const char* select_name();</span>
<span class="line-removed">- </span>
  #ifdef ASSERT
    void assert_block_in_covered_region(MemRegion new_memregion) {
      // Explictly capture current covered_region in a local
      MemRegion covered_region = this-&gt;start_array()-&gt;covered_region();
      assert(covered_region.contains(new_memregion),
<span class="line-new-header">--- 41,20 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 150,26 ***</span>
    bool is_in_reserved(const void* p) const {
      return reserved().contains(p);
    }
  
    MutableSpace*         object_space() const      { return _object_space; }
<span class="line-removed">- #if INCLUDE_SERIALGC</span>
<span class="line-removed">-   PSMarkSweepDecorator* object_mark_sweep() const { return _object_mark_sweep; }</span>
<span class="line-removed">- #endif</span>
    ObjectStartArray*     start_array()             { return &amp;_start_array; }
    PSVirtualSpace*       virtual_space() const     { return _virtual_space;}
  
    // Has the generation been successfully allocated?
    bool is_allocated();
  
<span class="line-removed">- #if INCLUDE_SERIALGC</span>
<span class="line-removed">-   // MarkSweep methods</span>
<span class="line-removed">-   virtual void precompact();</span>
<span class="line-removed">-   void adjust_pointers();</span>
<span class="line-removed">-   void compact();</span>
<span class="line-removed">- #endif</span>
<span class="line-removed">- </span>
    // Size info
    size_t capacity_in_bytes() const        { return object_space()-&gt;capacity_in_bytes(); }
    size_t used_in_bytes() const            { return object_space()-&gt;used_in_bytes(); }
    size_t free_in_bytes() const            { return object_space()-&gt;free_in_bytes(); }
  
<span class="line-new-header">--- 141,16 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 196,11 ***</span>
    void object_iterate(ObjectClosure* cl) { object_space()-&gt;object_iterate(cl); }
  
    // Debugging - do not use for time critical operations
    virtual void print() const;
    virtual void print_on(outputStream* st) const;
<span class="line-removed">-   void print_used_change(size_t prev_used) const;</span>
  
    void verify();
    void verify_object_start_array();
  
    // These should not used
<span class="line-new-header">--- 177,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 214,11 ***</span>
  
    // Performance Counter support
    void update_counters();
  
    // Printing support
<span class="line-modified">!   virtual const char* name() const { return _name; }</span>
  
    // Debugging support
    // Save the tops of all spaces for later use during mangling.
    void record_spaces_top() PRODUCT_RETURN;
  };
<span class="line-new-header">--- 194,11 ---</span>
  
    // Performance Counter support
    void update_counters();
  
    // Printing support
<span class="line-modified">!   virtual const char* name() const { return &quot;ParOldGen&quot;; }</span>
  
    // Debugging support
    // Save the tops of all spaces for later use during mangling.
    void record_spaces_top() PRODUCT_RETURN;
  };
</pre>
<center><a href="psOldGen.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="psParallelCompact.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>