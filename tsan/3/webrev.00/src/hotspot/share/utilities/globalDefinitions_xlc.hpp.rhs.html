<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/hotspot/share/utilities/globalDefinitions_xlc.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
    <script type="text/javascript" src="../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * Copyright (c) 2012, 2019 SAP SE. All rights reserved.
  4  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  5  *
  6  * This code is free software; you can redistribute it and/or modify it
  7  * under the terms of the GNU General Public License version 2 only, as
  8  * published by the Free Software Foundation.
  9  *
 10  * This code is distributed in the hope that it will be useful, but WITHOUT
 11  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 12  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 13  * version 2 for more details (a copy is included in the LICENSE file that
 14  * accompanied this code).
 15  *
 16  * You should have received a copy of the GNU General Public License version
 17  * 2 along with this work; if not, write to the Free Software Foundation,
 18  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 19  *
 20  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 21  * or visit www.oracle.com if you need additional information or have any
 22  * questions.
 23  *
 24  */
 25 
 26 #ifndef SHARE_UTILITIES_GLOBALDEFINITIONS_XLC_HPP
 27 #define SHARE_UTILITIES_GLOBALDEFINITIONS_XLC_HPP
 28 
 29 #include &quot;jni.h&quot;
 30 
 31 // This file holds compiler-dependent includes,
 32 // globally used constants &amp; types, class (forward)
 33 // declarations and a few frequently used utility functions.
 34 
 35 #include &lt;ctype.h&gt;
 36 #include &lt;string.h&gt;
 37 #include &lt;stdarg.h&gt;
 38 #include &lt;stddef.h&gt;
 39 #include &lt;stdio.h&gt;
 40 #include &lt;stdlib.h&gt;
 41 #include &lt;wchar.h&gt;
 42 
 43 #include &lt;math.h&gt;
 44 #include &lt;time.h&gt;
 45 #include &lt;fcntl.h&gt;
 46 #include &lt;dlfcn.h&gt;
 47 #include &lt;pthread.h&gt;
 48 
 49 #include &lt;limits.h&gt;
 50 #include &lt;errno.h&gt;
 51 
 52 #include &lt;stdint.h&gt;
 53 
<a name="1" id="anc1"></a><span class="line-modified"> 54 // check for xlc16 or higher</span>
<span class="line-modified"> 55 #ifdef __ibmxl_version__</span>
<span class="line-modified"> 56   #if __ibmxl_version__ &lt; 16</span>
<span class="line-modified"> 57   #error &quot;xlc &lt; 16 not supported&quot;</span>
<span class="line-modified"> 58   #endif</span>
<span class="line-added"> 59 #else</span>
<span class="line-added"> 60   #error &quot;xlc &lt; 16 not supported, macro __ibmxl_version__ not found&quot;</span>
 61 #endif
 62 
 63 #ifndef _AIX
 64 #error &quot;missing AIX-specific definition _AIX&quot;
 65 #endif
 66 
 67 // Use XLC compiler builtins instead of inline assembler
 68 #define USE_XLC_BUILTINS
 69 
 70 #ifdef USE_XLC_BUILTINS
 71 #include &lt;builtins.h&gt;
 72 // XLC V10 and higher provide the prototype for __dcbtst (void *);
 73 #endif // USE_XLC_BUILTINS
 74 
 75 // NULL vs NULL_WORD:
 76 // Some platform/tool-chain combinations can&#39;t assign NULL to an integer
 77 // type so we define NULL_WORD to use in those contexts. For xlc they are the same.
 78 #define NULL_WORD  NULL
 79 
 80 // AIX also needs a 64 bit NULL to work as a null address pointer.
 81 // Most system includes on AIX would define it as an int 0 if not already defined with one
 82 // exception: /usr/include/dirent.h will unconditionally redefine NULL to int 0 again.
 83 // In this case you need to copy the following defines to a position after #include &lt;dirent.h&gt;
 84 #include &lt;dirent.h&gt;
 85 #ifdef _LP64
 86   #undef NULL
 87   #define NULL 0L
 88 #else
 89   #ifndef NULL
 90     #define NULL 0
 91   #endif
 92 #endif
 93 
 94 // Compiler-specific primitive types
 95 // All defs of int (uint16_6 etc) are defined in AIX&#39; /usr/include/stdint.h
 96 
 97 // Additional Java basic types
 98 
 99 typedef uint8_t  jubyte;
100 typedef uint16_t jushort;
101 typedef uint32_t juint;
102 typedef uint64_t julong;
103 
104 // checking for nanness
105 inline int g_isnan(float  f) { return isnan(f); }
106 inline int g_isnan(double f) { return isnan(f); }
107 
108 // Checking for finiteness
109 inline int g_isfinite(jfloat  f)                 { return finite(f); }
110 inline int g_isfinite(jdouble f)                 { return finite(f); }
111 
112 // Wide characters
113 inline int wcslen(const jchar* x) { return wcslen((const wchar_t*)x); }
114 
115 
116 // Formatting.
117 #ifdef _LP64
118 #define FORMAT64_MODIFIER &quot;l&quot;
119 #else // !_LP64
120 #define FORMAT64_MODIFIER &quot;ll&quot;
121 #endif // _LP64
122 
123 // Cannot use xlc&#39;s offsetof as implementation of hotspot&#39;s
124 // offset_of(), because xlc warns about applying offsetof() to non-POD
125 // object and xlc cannot compile the expression offsetof(DataLayout,
126 // _cells[index]) in DataLayout::cell_offset() .  Therefore we define
127 // offset_of as it is defined for gcc.
128 #define offset_of(klass,field) (size_t)((intx)&amp;(((klass*)16)-&gt;field) - 16)
129 
130 // AIX 5.3 has buggy __thread support. (see JDK-8176442).
131 #define USE_LIBRARY_BASED_TLS_ONLY 1
132 
<a name="2" id="anc2"></a>



133 // Inlining support
134 //
135 // Be aware that for function/method declarations, xlC only supports the following
136 // syntax (i.e. the attribute must be placed AFTER the function/method declarator):
137 //
138 //   void* operator new(size_t size) throw() NOINLINE;
139 //
140 // For function/method defintions, the more common placement BEFORE the
141 // function/method declarator seems to be supported as well:
142 //
143 //   NOINLINE void* CHeapObj&lt;F&gt;::operator new(size_t size) throw() {...}
144 
145 #define NOINLINE     __attribute__((__noinline__))
146 #define ALWAYSINLINE inline __attribute__((__always_inline__))
147 
148 #endif // SHARE_UTILITIES_GLOBALDEFINITIONS_XLC_HPP
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>