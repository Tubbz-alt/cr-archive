<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/utilities/ostream.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="ostream.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="population_count.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/utilities/ostream.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -40,10 +40,13 @@</span>
  // we may use jio_printf:
  //     jio_fprintf(defaultStream::output_stream(), &quot;Message&quot;);
  // This allows for redirection via -XX:+DisplayVMOutputToStdout and
  // -XX:+DisplayVMOutputToStderr
  class outputStream : public ResourceObj {
<span class="udiff-line-added">+  private:</span>
<span class="udiff-line-added">+    NONCOPYABLE(outputStream);</span>
<span class="udiff-line-added">+ </span>
   protected:
     int _indentation; // current indentation
     int _width;       // width of the page
     int _position;    // position on the current line
     int _newlines;    // number of &#39;\n&#39; output so far
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -184,27 +187,37 @@</span>
        ttyLocker::hold_tty();
      }
    }
  };
  
<span class="udiff-line-modified-removed">- // for writing to strings; buffer will expand automatically</span>
<span class="udiff-line-modified-added">+ // for writing to strings; buffer will expand automatically.</span>
<span class="udiff-line-added">+ // Buffer will always be zero-terminated.</span>
  class stringStream : public outputStream {
   protected:
    char*  buffer;
    size_t buffer_pos;
    size_t buffer_length;
    bool   buffer_fixed;
<span class="udiff-line-modified-removed">-   DEBUG_ONLY(ResourceMark* rm;)</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+   // zero terminate at buffer_pos.</span>
<span class="udiff-line-added">+   void zero_terminate();</span>
<span class="udiff-line-added">+ </span>
   public:
<span class="udiff-line-added">+   // Create a stringStream using an internal buffer of initially initial_bufsize size;</span>
<span class="udiff-line-added">+   // will be enlarged on demand. There is no maximum cap.</span>
    stringStream(size_t initial_bufsize = 256);
<span class="udiff-line-added">+   // Creates a stringStream using a caller-provided buffer. Will truncate silently if</span>
<span class="udiff-line-added">+   // it overflows.</span>
    stringStream(char* fixed_buffer, size_t fixed_buffer_size);
    ~stringStream();
    virtual void write(const char* c, size_t len);
<span class="udiff-line-modified-removed">-   size_t      size() { return buffer_pos; }</span>
<span class="udiff-line-modified-removed">-   const char* base() { return buffer; }</span>
<span class="udiff-line-modified-removed">-   void  reset() { buffer_pos = 0; _precount = 0; _position = 0; }</span>
<span class="udiff-line-modified-removed">-   char* as_string();</span>
<span class="udiff-line-modified-added">+   // Return number of characters written into buffer, excluding terminating zero and</span>
<span class="udiff-line-modified-added">+   // subject to truncation in static buffer mode.</span>
<span class="udiff-line-modified-added">+   size_t      size() const { return buffer_pos; }</span>
<span class="udiff-line-modified-added">+   const char* base() const { return buffer; }</span>
<span class="udiff-line-added">+   void  reset();</span>
<span class="udiff-line-added">+   char* as_string() const;</span>
  };
  
  class fileStream : public outputStream {
   protected:
    FILE* _file;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -255,10 +268,11 @@</span>
    char*  buffer;
    size_t buffer_pos;
    size_t buffer_max;
    size_t buffer_length;
    bool   buffer_fixed;
<span class="udiff-line-added">+   bool   truncated;</span>
   public:
    bufferedStream(size_t initial_bufsize = 256, size_t bufmax = 1024*1024*10);
    bufferedStream(char* fixed_buffer, size_t fixed_buffer_size, size_t bufmax = 1024*1024*10);
    ~bufferedStream();
    virtual void write(const char* c, size_t len);
</pre>
<center><a href="ostream.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="population_count.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>