<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/utilities/xmlstream.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="waitBarrier_generic.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="xmlstream.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/utilities/xmlstream.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
368   stamp();
369   end_elem();
370   // Output the tail-tag of the enclosing element.
371   buffer[kind_len] = 0;
372   tail(buffer);
373 }
374 PRAGMA_DIAG_POP
375 
376 // Output a timestamp attribute.
377 void xmlStream::stamp() {
378   assert_if_no_error(inside_attrs(), &quot;stamp must be an attribute&quot;);
379   print_raw(&quot; stamp=&#39;&quot;);
380   out()-&gt;stamp();
381   print_raw(&quot;&#39;&quot;);
382 }
383 
384 
385 // ------------------------------------------------------------------
386 // Output a method attribute, in the form &quot; method=&#39;pkg/cls name sig&#39;&quot;.
387 // This is used only when there is no ciMethod available.
<span class="line-modified">388 void xmlStream::method(const methodHandle&amp; method) {</span>
389   assert_if_no_error(inside_attrs(), &quot;printing attributes&quot;);
<span class="line-modified">390   if (method.is_null())  return;</span>
391   print_raw(&quot; method=&#39;&quot;);
392   method_text(method);
393   print(&quot;&#39; bytes=&#39;%d&#39;&quot;, method-&gt;code_size());
394   print(&quot; count=&#39;%d&#39;&quot;, method-&gt;invocation_count());
395   int bec = method-&gt;backedge_count();
396   if (bec != 0)  print(&quot; backedge_count=&#39;%d&#39;&quot;, bec);
397   print(&quot; iicount=&#39;%d&#39;&quot;, method-&gt;interpreter_invocation_count());
398   int throwouts = method-&gt;interpreter_throwout_count();
399   if (throwouts != 0)  print(&quot; throwouts=&#39;%d&#39;&quot;, throwouts);
400   MethodData* mdo = method-&gt;method_data();
401   if (mdo != NULL) {
402     uint cnt;
403     cnt = mdo-&gt;decompile_count();
404     if (cnt != 0)  print(&quot; decompiles=&#39;%d&#39;&quot;, cnt);
405     for (uint reason = 0; reason &lt; mdo-&gt;trap_reason_limit(); reason++) {
406       cnt = mdo-&gt;trap_count(reason);
407       if (cnt != 0)  print(&quot; %s_traps=&#39;%d&#39;&quot;, Deoptimization::trap_reason_name(reason), cnt);
408     }
409     cnt = mdo-&gt;overflow_trap_count();
410     if (cnt != 0)  print(&quot; overflow_traps=&#39;%d&#39;&quot;, cnt);
411     cnt = mdo-&gt;overflow_recompile_count();
412     if (cnt != 0)  print(&quot; overflow_recompiles=&#39;%d&#39;&quot;, cnt);
413   }
414 }
415 
<span class="line-modified">416 void xmlStream::method_text(const methodHandle&amp; method) {</span>
417   ResourceMark rm;
418   assert_if_no_error(inside_attrs(), &quot;printing attributes&quot;);
<span class="line-modified">419   if (method.is_null())  return;</span>
420   text()-&gt;print(&quot;%s&quot;, method-&gt;method_holder()-&gt;external_name());
421   print_raw(&quot; &quot;);  // &quot; &quot; is easier for tools to parse than &quot;::&quot;
422   method-&gt;name()-&gt;print_symbol_on(text());
423   print_raw(&quot; &quot;);  // separator
424   method-&gt;signature()-&gt;print_symbol_on(text());
425 }
426 
427 
428 // ------------------------------------------------------------------
429 // Output a klass attribute, in the form &quot; klass=&#39;pkg/cls&#39;&quot;.
430 // This is used only when there is no ciKlass available.
431 void xmlStream::klass(Klass* klass) {
432   assert_if_no_error(inside_attrs(), &quot;printing attributes&quot;);
433   if (klass == NULL) return;
434   print_raw(&quot; klass=&#39;&quot;);
435   klass_text(klass);
436   print_raw(&quot;&#39;&quot;);
437 }
438 
439 void xmlStream::klass_text(Klass* klass) {
</pre>
</td>
<td>
<hr />
<pre>
368   stamp();
369   end_elem();
370   // Output the tail-tag of the enclosing element.
371   buffer[kind_len] = 0;
372   tail(buffer);
373 }
374 PRAGMA_DIAG_POP
375 
376 // Output a timestamp attribute.
377 void xmlStream::stamp() {
378   assert_if_no_error(inside_attrs(), &quot;stamp must be an attribute&quot;);
379   print_raw(&quot; stamp=&#39;&quot;);
380   out()-&gt;stamp();
381   print_raw(&quot;&#39;&quot;);
382 }
383 
384 
385 // ------------------------------------------------------------------
386 // Output a method attribute, in the form &quot; method=&#39;pkg/cls name sig&#39;&quot;.
387 // This is used only when there is no ciMethod available.
<span class="line-modified">388 void xmlStream::method(Method* method) {</span>
389   assert_if_no_error(inside_attrs(), &quot;printing attributes&quot;);
<span class="line-modified">390   if (method == NULL)  return;</span>
391   print_raw(&quot; method=&#39;&quot;);
392   method_text(method);
393   print(&quot;&#39; bytes=&#39;%d&#39;&quot;, method-&gt;code_size());
394   print(&quot; count=&#39;%d&#39;&quot;, method-&gt;invocation_count());
395   int bec = method-&gt;backedge_count();
396   if (bec != 0)  print(&quot; backedge_count=&#39;%d&#39;&quot;, bec);
397   print(&quot; iicount=&#39;%d&#39;&quot;, method-&gt;interpreter_invocation_count());
398   int throwouts = method-&gt;interpreter_throwout_count();
399   if (throwouts != 0)  print(&quot; throwouts=&#39;%d&#39;&quot;, throwouts);
400   MethodData* mdo = method-&gt;method_data();
401   if (mdo != NULL) {
402     uint cnt;
403     cnt = mdo-&gt;decompile_count();
404     if (cnt != 0)  print(&quot; decompiles=&#39;%d&#39;&quot;, cnt);
405     for (uint reason = 0; reason &lt; mdo-&gt;trap_reason_limit(); reason++) {
406       cnt = mdo-&gt;trap_count(reason);
407       if (cnt != 0)  print(&quot; %s_traps=&#39;%d&#39;&quot;, Deoptimization::trap_reason_name(reason), cnt);
408     }
409     cnt = mdo-&gt;overflow_trap_count();
410     if (cnt != 0)  print(&quot; overflow_traps=&#39;%d&#39;&quot;, cnt);
411     cnt = mdo-&gt;overflow_recompile_count();
412     if (cnt != 0)  print(&quot; overflow_recompiles=&#39;%d&#39;&quot;, cnt);
413   }
414 }
415 
<span class="line-modified">416 void xmlStream::method_text(Method* method) {</span>
417   ResourceMark rm;
418   assert_if_no_error(inside_attrs(), &quot;printing attributes&quot;);
<span class="line-modified">419   if (method == NULL)  return;</span>
420   text()-&gt;print(&quot;%s&quot;, method-&gt;method_holder()-&gt;external_name());
421   print_raw(&quot; &quot;);  // &quot; &quot; is easier for tools to parse than &quot;::&quot;
422   method-&gt;name()-&gt;print_symbol_on(text());
423   print_raw(&quot; &quot;);  // separator
424   method-&gt;signature()-&gt;print_symbol_on(text());
425 }
426 
427 
428 // ------------------------------------------------------------------
429 // Output a klass attribute, in the form &quot; klass=&#39;pkg/cls&#39;&quot;.
430 // This is used only when there is no ciKlass available.
431 void xmlStream::klass(Klass* klass) {
432   assert_if_no_error(inside_attrs(), &quot;printing attributes&quot;);
433   if (klass == NULL) return;
434   print_raw(&quot; klass=&#39;&quot;);
435   klass_text(klass);
436   print_raw(&quot;&#39;&quot;);
437 }
438 
439 void xmlStream::klass_text(Klass* klass) {
</pre>
</td>
</tr>
</table>
<center><a href="waitBarrier_generic.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="xmlstream.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>