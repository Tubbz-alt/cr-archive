<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/hotspot/share/utilities/globalDefinitions_visCPP.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
    <script type="text/javascript" src="../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_UTILITIES_GLOBALDEFINITIONS_VISCPP_HPP
 26 #define SHARE_UTILITIES_GLOBALDEFINITIONS_VISCPP_HPP
 27 
 28 #include &quot;jni.h&quot;
 29 
 30 // This file holds compiler-dependent includes,
 31 // globally used constants &amp; types, class (forward)
 32 // declarations and a few frequently used utility functions.
 33 
 34 # include &lt;ctype.h&gt;
 35 # include &lt;string.h&gt;
 36 # include &lt;stdarg.h&gt;
 37 # include &lt;stdlib.h&gt;
 38 # include &lt;stdint.h&gt;
 39 # include &lt;stddef.h&gt;// for offsetof
 40 # include &lt;io.h&gt;    // for stream.cpp
 41 # include &lt;float.h&gt; // for _isnan
 42 # include &lt;stdio.h&gt; // for va_list
 43 # include &lt;time.h&gt;
 44 # include &lt;fcntl.h&gt;
 45 # include &lt;limits.h&gt;
 46 # include &lt;inttypes.h&gt;
 47 // Need this on windows to get the math constants (e.g., M_PI).
 48 #define _USE_MATH_DEFINES
 49 # include &lt;math.h&gt;
 50 
 51 // 4810578: varargs unsafe on 32-bit integer/64-bit pointer architectures
 52 // When __cplusplus is defined, NULL is defined as 0 (32-bit constant) in
 53 // system header files.  On 32-bit architectures, there is no problem.
 54 // On 64-bit architectures, defining NULL as a 32-bit constant can cause
 55 // problems with varargs functions: C++ integral promotion rules say for
 56 // varargs, we pass the argument 0 as an int.  So, if NULL was passed to a
 57 // varargs function it will remain 32-bits.  Depending on the calling
 58 // convention of the machine, if the argument is passed on the stack then
 59 // only 32-bits of the &quot;NULL&quot; pointer may be initialized to zero.  The
 60 // other 32-bits will be garbage.  If the varargs function is expecting a
 61 // pointer when it extracts the argument, then we may have a problem.
 62 //
 63 // Solution: For 64-bit architectures, redefine NULL as 64-bit constant 0.
 64 #ifdef _LP64
 65 #undef NULL
 66 // 64-bit Windows uses a P64 data model (not LP64, although we define _LP64)
 67 // Since longs are 32-bit we cannot use 0L here.  Use the Visual C++ specific
 68 // 64-bit integer-suffix (LL) instead.
 69 #define NULL 0LL
 70 #else
 71 #ifndef NULL
 72 #define NULL 0
 73 #endif
 74 #endif
 75 
 76 // NULL vs NULL_WORD:
 77 // On Linux NULL is defined as a special type &#39;__null&#39;. Assigning __null to
 78 // integer variable will cause gcc warning. Use NULL_WORD in places where a
 79 // pointer is stored as integer value.
 80 #define NULL_WORD NULL
 81 
 82 #ifdef _WIN64
 83 typedef int64_t ssize_t;
 84 #else
 85 typedef int32_t ssize_t;
 86 #endif
 87 
 88 // Additional Java basic types
 89 
 90 typedef uint8_t  jubyte;
 91 typedef uint16_t jushort;
 92 typedef uint32_t juint;
 93 typedef uint64_t julong;
 94 
 95 // Non-standard stdlib-like stuff:
 96 inline int strcasecmp(const char *s1, const char *s2) { return _stricmp(s1,s2); }
 97 inline int strncasecmp(const char *s1, const char *s2, size_t n) {
 98   return _strnicmp(s1,s2,n);
 99 }
100 
101 // Checking for nanness
102 
103 inline int g_isnan(jfloat  f)                    { return _isnan(f); }
104 inline int g_isnan(jdouble f)                    { return _isnan(f); }
105 
106 // Checking for finiteness
107 
108 inline int g_isfinite(jfloat  f)                 { return _finite(f); }
109 inline int g_isfinite(jdouble f)                 { return _finite(f); }
110 
111 // Miscellaneous
112 
113 // Visual Studio 2005 deprecates POSIX names - use ISO C++ names instead
114 #if _MSC_VER &gt;= 1400
115 #define open _open
116 #define close _close
117 #define read  _read
118 #define write _write
119 #define lseek _lseek
120 #define unlink _unlink
121 #define strdup _strdup
122 #endif
123 
124 #if _MSC_VER &lt; 1800
125 // Visual Studio 2013 introduced strtoull(); before, one has to use _strtoui64() instead.
126 #define strtoull _strtoui64
127 // Visual Studio prior to 2013 had no va_copy, but could safely copy va_list by assignement
128 #define va_copy(dest, src) dest = src
129 // Fixes some wrong warnings about &#39;this&#39; : used in base member initializer list
130 #pragma warning( disable : 4355 )
131 #endif
132 
133 
134 #pragma warning( disable : 4100 ) // unreferenced formal parameter
135 #pragma warning( disable : 4127 ) // conditional expression is constant
136 #pragma warning( disable : 4514 ) // unreferenced inline function has been removed
137 #pragma warning( disable : 4244 ) // possible loss of data
138 #pragma warning( disable : 4512 ) // assignment operator could not be generated
139 #pragma warning( disable : 4201 ) // nonstandard extension used : nameless struct/union (needed in windows.h)
140 #pragma warning( disable : 4511 ) // copy constructor could not be generated
141 #pragma warning( disable : 4291 ) // no matching operator delete found; memory will not be freed if initialization thows an exception
142 #pragma warning( disable : 4351 ) // new behavior: elements of array ... will be default initialized
143 #ifdef CHECK_UNHANDLED_OOPS
144 #pragma warning( disable : 4521 ) // class has multiple copy ctors of a single type
145 #pragma warning( disable : 4522 ) // class has multiple assignment operators of a single type
146 #endif // CHECK_UNHANDLED_OOPS
147 #if _MSC_VER &gt;= 1400
148 #pragma warning( disable : 4996 ) // unsafe string functions. Same as define _CRT_SECURE_NO_WARNINGS/_CRT_SECURE_NO_DEPRICATE
149 #endif
150 
151 // Formatting.
152 #define FORMAT64_MODIFIER &quot;I64&quot;
153 
154 #define offset_of(klass,field) offsetof(klass,field)
155 
<a name="1" id="anc1"></a><span class="line-modified">156 #define THREAD_LOCAL __declspec(thread)</span>


157 
158 // Inlining support
159 // MSVC has &#39;__declspec(noinline)&#39; but according to the official documentation
160 // it only applies to member functions. There are reports though which pretend
161 // that it also works for freestanding functions.
162 #define NOINLINE     __declspec(noinline)
163 #define ALWAYSINLINE __forceinline
164 
165 // Alignment
166 #define ATTRIBUTE_ALIGNED(x) __declspec(align(x))
167 
168 #endif // SHARE_UTILITIES_GLOBALDEFINITIONS_VISCPP_HPP
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>