diff a/src/hotspot/share/code/vmreg.hpp b/src/hotspot/share/code/vmreg.hpp
--- a/src/hotspot/share/code/vmreg.hpp
+++ b/src/hotspot/share/code/vmreg.hpp
@@ -24,10 +24,11 @@
 
 #ifndef SHARE_CODE_VMREG_HPP
 #define SHARE_CODE_VMREG_HPP
 
 #include "asm/register.hpp"
+#include "runtime/globals.hpp"
 #include "utilities/globalDefinitions.hpp"
 #include "utilities/macros.hpp"
 #include "utilities/ostream.hpp"
 #ifdef COMPILER2
 #include "opto/adlcVMDeps.hpp"
@@ -110,11 +111,11 @@
 
 
   intptr_t value() const         {return (intptr_t) this; }
 
   void print_on(outputStream* st) const;
-  void print() const { print_on(tty); }
+  void print() const;
 
   // bias a stack slot.
   // Typically used to adjust a virtual frame slots by amounts that are offset by
   // amounts that are part of the native abi. The VMReg must be a stack slot
   // and the result must be also.
