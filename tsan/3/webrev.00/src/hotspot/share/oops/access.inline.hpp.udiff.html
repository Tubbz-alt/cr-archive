<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/oops/access.inline.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="access.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="accessBackend.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/oops/access.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -88,37 +88,37 @@</span>
    };
  
    template &lt;class GCBarrierType, DecoratorSet decorators&gt;
    struct PostRuntimeDispatch&lt;GCBarrierType, BARRIER_ATOMIC_XCHG, decorators&gt;: public AllStatic {
      template &lt;typename T&gt;
<span class="udiff-line-modified-removed">-     static T access_barrier(T new_value, void* addr) {</span>
<span class="udiff-line-modified-removed">-       return GCBarrierType::atomic_xchg_in_heap(new_value, reinterpret_cast&lt;T*&gt;(addr));</span>
<span class="udiff-line-modified-added">+     static T access_barrier(void* addr, T new_value) {</span>
<span class="udiff-line-modified-added">+       return GCBarrierType::atomic_xchg_in_heap(reinterpret_cast&lt;T*&gt;(addr), new_value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static oop oop_access_barrier(oop new_value, void* addr) {</span>
<span class="udiff-line-modified-added">+     static oop oop_access_barrier(void* addr, oop new_value) {</span>
        typedef typename HeapOopType&lt;decorators&gt;::type OopType;
        if (HasDecorator&lt;decorators, IN_HEAP&gt;::value) {
<span class="udiff-line-modified-removed">-         return GCBarrierType::oop_atomic_xchg_in_heap(new_value, reinterpret_cast&lt;OopType*&gt;(addr));</span>
<span class="udiff-line-modified-added">+         return GCBarrierType::oop_atomic_xchg_in_heap(reinterpret_cast&lt;OopType*&gt;(addr), new_value);</span>
        } else {
<span class="udiff-line-modified-removed">-         return GCBarrierType::oop_atomic_xchg_not_in_heap(new_value, reinterpret_cast&lt;OopType*&gt;(addr));</span>
<span class="udiff-line-modified-added">+         return GCBarrierType::oop_atomic_xchg_not_in_heap(reinterpret_cast&lt;OopType*&gt;(addr), new_value);</span>
        }
      }
    };
  
    template &lt;class GCBarrierType, DecoratorSet decorators&gt;
    struct PostRuntimeDispatch&lt;GCBarrierType, BARRIER_ATOMIC_CMPXCHG, decorators&gt;: public AllStatic {
      template &lt;typename T&gt;
<span class="udiff-line-modified-removed">-     static T access_barrier(T new_value, void* addr, T compare_value) {</span>
<span class="udiff-line-modified-removed">-       return GCBarrierType::atomic_cmpxchg_in_heap(new_value, reinterpret_cast&lt;T*&gt;(addr), compare_value);</span>
<span class="udiff-line-modified-added">+     static T access_barrier(void* addr, T compare_value, T new_value) {</span>
<span class="udiff-line-modified-added">+       return GCBarrierType::atomic_cmpxchg_in_heap(reinterpret_cast&lt;T*&gt;(addr), compare_value, new_value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static oop oop_access_barrier(oop new_value, void* addr, oop compare_value) {</span>
<span class="udiff-line-modified-added">+     static oop oop_access_barrier(void* addr, oop compare_value, oop new_value) {</span>
        typedef typename HeapOopType&lt;decorators&gt;::type OopType;
        if (HasDecorator&lt;decorators, IN_HEAP&gt;::value) {
<span class="udiff-line-modified-removed">-         return GCBarrierType::oop_atomic_cmpxchg_in_heap(new_value, reinterpret_cast&lt;OopType*&gt;(addr), compare_value);</span>
<span class="udiff-line-modified-added">+         return GCBarrierType::oop_atomic_cmpxchg_in_heap(reinterpret_cast&lt;OopType*&gt;(addr), compare_value, new_value);</span>
        } else {
<span class="udiff-line-modified-removed">-         return GCBarrierType::oop_atomic_cmpxchg_not_in_heap(new_value, reinterpret_cast&lt;OopType*&gt;(addr), compare_value);</span>
<span class="udiff-line-modified-added">+         return GCBarrierType::oop_atomic_cmpxchg_not_in_heap(reinterpret_cast&lt;OopType*&gt;(addr), compare_value, new_value);</span>
        }
      }
    };
  
    template &lt;class GCBarrierType, DecoratorSet decorators&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -169,28 +169,28 @@</span>
    };
  
    template &lt;class GCBarrierType, DecoratorSet decorators&gt;
    struct PostRuntimeDispatch&lt;GCBarrierType, BARRIER_ATOMIC_XCHG_AT, decorators&gt;: public AllStatic {
      template &lt;typename T&gt;
<span class="udiff-line-modified-removed">-     static T access_barrier(T new_value, oop base, ptrdiff_t offset) {</span>
<span class="udiff-line-modified-removed">-       return GCBarrierType::atomic_xchg_in_heap_at(new_value, base, offset);</span>
<span class="udiff-line-modified-added">+     static T access_barrier(oop base, ptrdiff_t offset, T new_value) {</span>
<span class="udiff-line-modified-added">+       return GCBarrierType::atomic_xchg_in_heap_at(base, offset, new_value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static oop oop_access_barrier(oop new_value, oop base, ptrdiff_t offset) {</span>
<span class="udiff-line-modified-removed">-       return GCBarrierType::oop_atomic_xchg_in_heap_at(new_value, base, offset);</span>
<span class="udiff-line-modified-added">+     static oop oop_access_barrier(oop base, ptrdiff_t offset, oop new_value) {</span>
<span class="udiff-line-modified-added">+       return GCBarrierType::oop_atomic_xchg_in_heap_at(base, offset, new_value);</span>
      }
    };
  
    template &lt;class GCBarrierType, DecoratorSet decorators&gt;
    struct PostRuntimeDispatch&lt;GCBarrierType, BARRIER_ATOMIC_CMPXCHG_AT, decorators&gt;: public AllStatic {
      template &lt;typename T&gt;
<span class="udiff-line-modified-removed">-     static T access_barrier(T new_value, oop base, ptrdiff_t offset, T compare_value) {</span>
<span class="udiff-line-modified-removed">-       return GCBarrierType::atomic_cmpxchg_in_heap_at(new_value, base, offset, compare_value);</span>
<span class="udiff-line-modified-added">+     static T access_barrier(oop base, ptrdiff_t offset, T compare_value, T new_value) {</span>
<span class="udiff-line-modified-added">+       return GCBarrierType::atomic_cmpxchg_in_heap_at(base, offset, compare_value, new_value);</span>
      }
  
<span class="udiff-line-modified-removed">-     static oop oop_access_barrier(oop new_value, oop base, ptrdiff_t offset, oop compare_value) {</span>
<span class="udiff-line-modified-removed">-       return GCBarrierType::oop_atomic_cmpxchg_in_heap_at(new_value, base, offset, compare_value);</span>
<span class="udiff-line-modified-added">+     static oop oop_access_barrier(oop base, ptrdiff_t offset, oop compare_value, oop new_value) {</span>
<span class="udiff-line-modified-added">+       return GCBarrierType::oop_atomic_cmpxchg_in_heap_at(base, offset, compare_value, new_value);</span>
      }
    };
  
    template &lt;class GCBarrierType, DecoratorSet decorators&gt;
    struct PostRuntimeDispatch&lt;GCBarrierType, BARRIER_CLONE, decorators&gt;: public AllStatic {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -204,17 +204,10 @@</span>
      static oop access_barrier(oop obj) {
        return GCBarrierType::resolve(obj);
      }
    };
  
<span class="udiff-line-removed">-   template &lt;class GCBarrierType, DecoratorSet decorators&gt;</span>
<span class="udiff-line-removed">-   struct PostRuntimeDispatch&lt;GCBarrierType, BARRIER_EQUALS, decorators&gt;: public AllStatic {</span>
<span class="udiff-line-removed">-     static bool access_barrier(oop o1, oop o2) {</span>
<span class="udiff-line-removed">-       return GCBarrierType::equals(o1, o2);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">-   };</span>
<span class="udiff-line-removed">- </span>
    // Resolving accessors with barriers from the barrier set happens in two steps.
    // 1. Expand paths with runtime-decorators, e.g. is UseCompressedOops on or off.
    // 2. Expand paths for each BarrierSet available in the system.
    template &lt;DecoratorSet decorators, typename FunctionPointerT, BarrierType barrier_type&gt;
    struct BarrierResolver: public AllStatic {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -314,35 +307,35 @@</span>
      _load_at_func = function;
      return function(base, offset);
    }
  
    template &lt;DecoratorSet decorators, typename T&gt;
<span class="udiff-line-modified-removed">-   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_CMPXCHG&gt;::atomic_cmpxchg_init(T new_value, void* addr, T compare_value) {</span>
<span class="udiff-line-modified-added">+   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_CMPXCHG&gt;::atomic_cmpxchg_init(void* addr, T compare_value, T new_value) {</span>
      func_t function = BarrierResolver&lt;decorators, func_t, BARRIER_ATOMIC_CMPXCHG&gt;::resolve_barrier();
      _atomic_cmpxchg_func = function;
<span class="udiff-line-modified-removed">-     return function(new_value, addr, compare_value);</span>
<span class="udiff-line-modified-added">+     return function(addr, compare_value, new_value);</span>
    }
  
    template &lt;DecoratorSet decorators, typename T&gt;
<span class="udiff-line-modified-removed">-   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_CMPXCHG_AT&gt;::atomic_cmpxchg_at_init(T new_value, oop base, ptrdiff_t offset, T compare_value) {</span>
<span class="udiff-line-modified-added">+   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_CMPXCHG_AT&gt;::atomic_cmpxchg_at_init(oop base, ptrdiff_t offset, T compare_value, T new_value) {</span>
      func_t function = BarrierResolver&lt;decorators, func_t, BARRIER_ATOMIC_CMPXCHG_AT&gt;::resolve_barrier();
      _atomic_cmpxchg_at_func = function;
<span class="udiff-line-modified-removed">-     return function(new_value, base, offset, compare_value);</span>
<span class="udiff-line-modified-added">+     return function(base, offset, compare_value, new_value);</span>
    }
  
    template &lt;DecoratorSet decorators, typename T&gt;
<span class="udiff-line-modified-removed">-   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_XCHG&gt;::atomic_xchg_init(T new_value, void* addr) {</span>
<span class="udiff-line-modified-added">+   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_XCHG&gt;::atomic_xchg_init(void* addr, T new_value) {</span>
      func_t function = BarrierResolver&lt;decorators, func_t, BARRIER_ATOMIC_XCHG&gt;::resolve_barrier();
      _atomic_xchg_func = function;
<span class="udiff-line-modified-removed">-     return function(new_value, addr);</span>
<span class="udiff-line-modified-added">+     return function(addr, new_value);</span>
    }
  
    template &lt;DecoratorSet decorators, typename T&gt;
<span class="udiff-line-modified-removed">-   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_XCHG_AT&gt;::atomic_xchg_at_init(T new_value, oop base, ptrdiff_t offset) {</span>
<span class="udiff-line-modified-added">+   T RuntimeDispatch&lt;decorators, T, BARRIER_ATOMIC_XCHG_AT&gt;::atomic_xchg_at_init(oop base, ptrdiff_t offset, T new_value) {</span>
      func_t function = BarrierResolver&lt;decorators, func_t, BARRIER_ATOMIC_XCHG_AT&gt;::resolve_barrier();
      _atomic_xchg_at_func = function;
<span class="udiff-line-modified-removed">-     return function(new_value, base, offset);</span>
<span class="udiff-line-modified-added">+     return function(base, offset, new_value);</span>
    }
  
    template &lt;DecoratorSet decorators, typename T&gt;
    bool RuntimeDispatch&lt;decorators, T, BARRIER_ARRAYCOPY&gt;::arraycopy_init(arrayOop src_obj, size_t src_offset_in_bytes, T* src_raw,
                                                                           arrayOop dst_obj, size_t dst_offset_in_bytes, T* dst_raw,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -365,15 +358,8 @@</span>
    oop RuntimeDispatch&lt;decorators, T, BARRIER_RESOLVE&gt;::resolve_init(oop obj) {
      func_t function = BarrierResolver&lt;decorators, func_t, BARRIER_RESOLVE&gt;::resolve_barrier();
      _resolve_func = function;
      return function(obj);
    }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   template &lt;DecoratorSet decorators, typename T&gt;</span>
<span class="udiff-line-removed">-   bool RuntimeDispatch&lt;decorators, T, BARRIER_EQUALS&gt;::equals_init(oop o1, oop o2) {</span>
<span class="udiff-line-removed">-     func_t function = BarrierResolver&lt;decorators, func_t, BARRIER_EQUALS&gt;::resolve_barrier();</span>
<span class="udiff-line-removed">-     _equals_func = function;</span>
<span class="udiff-line-removed">-     return function(o1, o2);</span>
<span class="udiff-line-removed">-   }</span>
  }
  
  #endif // SHARE_OOPS_ACCESS_INLINE_HPP
</pre>
<center><a href="access.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="accessBackend.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>