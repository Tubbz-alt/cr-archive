<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/prims/jvmtiEnvBase.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmtiEnvBase.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmtiEventController.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/prims/jvmtiEnvBase.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -28,10 +28,11 @@</span>
  #include &quot;classfile/classLoader.hpp&quot;
  #include &quot;prims/jvmtiEnvThreadState.hpp&quot;
  #include &quot;prims/jvmtiEventController.hpp&quot;
  #include &quot;prims/jvmtiThreadState.hpp&quot;
  #include &quot;oops/oopHandle.hpp&quot;
<span class="udiff-line-added">+ #include &quot;runtime/atomic.hpp&quot;</span>
  #include &quot;runtime/fieldDescriptor.hpp&quot;
  #include &quot;runtime/frame.hpp&quot;
  #include &quot;runtime/thread.hpp&quot;
  #include &quot;runtime/vmOperations.hpp&quot;
  #include &quot;utilities/growableArray.hpp&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -96,11 +97,11 @@</span>
    JvmtiEnvBase* _next;
    bool _is_retransformable;
    const void *_env_local_storage;     // per env agent allocated data.
    jvmtiEventCallbacks _event_callbacks;
    jvmtiExtEventCallbacks _ext_event_callbacks;
<span class="udiff-line-modified-removed">-   JvmtiTagMap* _tag_map;</span>
<span class="udiff-line-modified-added">+   JvmtiTagMap* volatile _tag_map;</span>
    JvmtiEnvEventEnable _env_event_enable;
    jvmtiCapabilities _current_capabilities;
    jvmtiCapabilities _prohibited_capabilities;
    volatile bool _class_file_load_hook_ever_enabled;
    static volatile bool _needs_clean_up;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -251,10 +252,17 @@</span>
  
    JvmtiTagMap* tag_map() {
      return _tag_map;
    }
  
<span class="udiff-line-added">+   JvmtiTagMap* tag_map_acquire() {</span>
<span class="udiff-line-added">+     return Atomic::load_acquire(&amp;_tag_map);</span>
<span class="udiff-line-added">+   }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   void release_set_tag_map(JvmtiTagMap* tag_map) {</span>
<span class="udiff-line-added">+     Atomic::release_store(&amp;_tag_map, tag_map);</span>
<span class="udiff-line-added">+   }</span>
  
    // return true if event is enabled globally or for any thread
    // True only if there is a callback for it.
    bool is_enabled(jvmtiEvent event_type) {
      return _env_event_enable.is_enabled(event_type);
</pre>
<center><a href="jvmtiEnvBase.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmtiEventController.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>