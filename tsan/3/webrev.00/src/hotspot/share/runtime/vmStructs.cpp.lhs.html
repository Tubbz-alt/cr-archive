<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/hotspot/share/runtime/vmStructs.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
    <script type="text/javascript" src="../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
<a name="1" id="anc1"></a><span class="line-modified">   2  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include &quot;precompiled.hpp&quot;
  26 #include &quot;ci/ciField.hpp&quot;
  27 #include &quot;ci/ciInstance.hpp&quot;
  28 #include &quot;ci/ciMethodData.hpp&quot;
  29 #include &quot;ci/ciObjArrayKlass.hpp&quot;
  30 #include &quot;ci/ciSymbol.hpp&quot;
  31 #include &quot;classfile/compactHashtable.hpp&quot;
  32 #include &quot;classfile/classLoaderDataGraph.hpp&quot;
  33 #include &quot;classfile/dictionary.hpp&quot;
  34 #include &quot;classfile/javaClasses.hpp&quot;
  35 #include &quot;classfile/stringTable.hpp&quot;
  36 #include &quot;classfile/symbolTable.hpp&quot;
  37 #include &quot;classfile/systemDictionary.hpp&quot;
  38 #include &quot;code/codeBlob.hpp&quot;
  39 #include &quot;code/codeCache.hpp&quot;
  40 #include &quot;code/compressedStream.hpp&quot;
  41 #include &quot;code/location.hpp&quot;
  42 #include &quot;code/nmethod.hpp&quot;
  43 #include &quot;code/pcDesc.hpp&quot;
  44 #include &quot;code/stubs.hpp&quot;
  45 #include &quot;code/vmreg.hpp&quot;
  46 #include &quot;compiler/compileBroker.hpp&quot;
  47 #include &quot;compiler/oopMap.hpp&quot;
  48 #include &quot;gc/shared/vmStructs_gc.hpp&quot;
  49 #include &quot;interpreter/bytecodeInterpreter.hpp&quot;
  50 #include &quot;interpreter/bytecodes.hpp&quot;
  51 #include &quot;interpreter/interpreter.hpp&quot;
  52 #include &quot;memory/allocation.hpp&quot;
  53 #include &quot;memory/allocation.inline.hpp&quot;
  54 #include &quot;memory/heap.hpp&quot;
  55 #include &quot;memory/metaspace/metablock.hpp&quot;
  56 #include &quot;memory/padded.hpp&quot;
  57 #include &quot;memory/referenceType.hpp&quot;
  58 #include &quot;memory/universe.hpp&quot;
  59 #include &quot;memory/virtualspace.hpp&quot;
  60 #include &quot;memory/filemap.hpp&quot;
  61 #include &quot;oops/array.hpp&quot;
  62 #include &quot;oops/arrayKlass.hpp&quot;
  63 #include &quot;oops/arrayOop.hpp&quot;
  64 #include &quot;oops/compiledICHolder.hpp&quot;
  65 #include &quot;oops/constMethod.hpp&quot;
  66 #include &quot;oops/constantPool.hpp&quot;
  67 #include &quot;oops/cpCache.hpp&quot;
  68 #include &quot;oops/instanceClassLoaderKlass.hpp&quot;
  69 #include &quot;oops/instanceKlass.hpp&quot;
  70 #include &quot;oops/instanceMirrorKlass.hpp&quot;
  71 #include &quot;oops/instanceOop.hpp&quot;
  72 #include &quot;oops/klass.hpp&quot;
<a name="2" id="anc2"></a><span class="line-modified">  73 #include &quot;oops/markOop.hpp&quot;</span>
  74 #include &quot;oops/method.hpp&quot;
  75 #include &quot;oops/methodCounters.hpp&quot;
  76 #include &quot;oops/methodData.hpp&quot;
  77 #include &quot;oops/objArrayKlass.hpp&quot;
  78 #include &quot;oops/objArrayOop.hpp&quot;
  79 #include &quot;oops/oop.inline.hpp&quot;
  80 #include &quot;oops/oopHandle.hpp&quot;
  81 #include &quot;oops/symbol.hpp&quot;
  82 #include &quot;oops/typeArrayKlass.hpp&quot;
  83 #include &quot;oops/typeArrayOop.hpp&quot;
  84 #include &quot;prims/jvmtiAgentThread.hpp&quot;
  85 #include &quot;runtime/arguments.hpp&quot;
  86 #include &quot;runtime/deoptimization.hpp&quot;
  87 #include &quot;runtime/flags/jvmFlag.hpp&quot;
  88 #include &quot;runtime/globals.hpp&quot;
  89 #include &quot;runtime/java.hpp&quot;
  90 #include &quot;runtime/javaCalls.hpp&quot;
<a name="3" id="anc3"></a>
  91 #include &quot;runtime/os.hpp&quot;
  92 #include &quot;runtime/perfMemory.hpp&quot;
  93 #include &quot;runtime/serviceThread.hpp&quot;
  94 #include &quot;runtime/sharedRuntime.hpp&quot;
  95 #include &quot;runtime/stubRoutines.hpp&quot;
  96 #include &quot;runtime/thread.inline.hpp&quot;
<a name="4" id="anc4"></a>
  97 #include &quot;runtime/vframeArray.hpp&quot;
  98 #include &quot;runtime/vmStructs.hpp&quot;
  99 #include &quot;utilities/globalDefinitions.hpp&quot;
 100 #include &quot;utilities/hashtable.hpp&quot;
 101 #include &quot;utilities/macros.hpp&quot;
 102 
 103 #include CPU_HEADER(vmStructs)
 104 #include OS_HEADER(vmStructs)
 105 #include OS_CPU_HEADER(vmStructs)
 106 
 107 #if INCLUDE_JVMCI
 108 # include &quot;jvmci/vmStructs_jvmci.hpp&quot;
 109 #endif
 110 
 111 
 112 #ifdef COMPILER2
 113 #include &quot;opto/addnode.hpp&quot;
 114 #include &quot;opto/block.hpp&quot;
 115 #include &quot;opto/callnode.hpp&quot;
 116 #include &quot;opto/castnode.hpp&quot;
 117 #include &quot;opto/cfgnode.hpp&quot;
 118 #include &quot;opto/chaitin.hpp&quot;
 119 #include &quot;opto/convertnode.hpp&quot;
 120 #include &quot;opto/divnode.hpp&quot;
 121 #include &quot;opto/intrinsicnode.hpp&quot;
 122 #include &quot;opto/locknode.hpp&quot;
 123 #include &quot;opto/loopnode.hpp&quot;
 124 #include &quot;opto/machnode.hpp&quot;
 125 #include &quot;opto/matcher.hpp&quot;
 126 #include &quot;opto/mathexactnode.hpp&quot;
 127 #include &quot;opto/movenode.hpp&quot;
 128 #include &quot;opto/mulnode.hpp&quot;
 129 #include &quot;opto/narrowptrnode.hpp&quot;
 130 #include &quot;opto/opaquenode.hpp&quot;
 131 #include &quot;opto/optoreg.hpp&quot;
 132 #include &quot;opto/parse.hpp&quot;
 133 #include &quot;opto/phaseX.hpp&quot;
 134 #include &quot;opto/regalloc.hpp&quot;
 135 #include &quot;opto/rootnode.hpp&quot;
 136 #include &quot;opto/subnode.hpp&quot;
 137 #include &quot;opto/vectornode.hpp&quot;
 138 #endif // COMPILER2
 139 
 140 // Note: the cross-product of (c1, c2, product, nonproduct, ...),
 141 // (nonstatic, static), and (unchecked, checked) has not been taken.
 142 // Only the macros currently needed have been defined.
 143 
 144 // A field whose type is not checked is given a null string as the
 145 // type name, indicating an &quot;opaque&quot; type to the serviceability agent.
 146 
 147 // NOTE: there is an interdependency between this file and
 148 // HotSpotTypeDataBase.java, which parses the type strings.
 149 
 150 #ifndef REG_COUNT
 151   #define REG_COUNT 0
 152 #endif
 153 
 154 #if INCLUDE_JVMTI
 155   #define JVMTI_STRUCTS(static_field) \
 156     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 157     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 158     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 159     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 160 #else
 161   #define JVMTI_STRUCTS(static_field)
 162 #endif // INCLUDE_JVMTI
 163 
 164 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 165 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 166 typedef Hashtable&lt;InstanceKlass*, mtClass&gt;       KlassHashtable;
 167 typedef HashtableEntry&lt;InstanceKlass*, mtClass&gt;  KlassHashtableEntry;
 168 
<a name="5" id="anc5"></a><span class="line-removed"> 169 typedef PaddedEnd&lt;ObjectMonitor&gt;              PaddedObjectMonitor;</span>
<span class="line-removed"> 170 </span>
 171 //--------------------------------------------------------------------------------
 172 // VM_STRUCTS
 173 //
 174 // This list enumerates all of the fields the serviceability agent
 175 // needs to know about. Be sure to see also the type table below this one.
 176 // NOTE that there are platform-specific additions to this table in
 177 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 178 
 179 #define VM_STRUCTS(nonstatic_field,                                                                                                  \
 180                    static_field,                                                                                                     \
 181                    static_ptr_volatile_field,                                                                                        \
 182                    unchecked_nonstatic_field,                                                                                        \
 183                    volatile_nonstatic_field,                                                                                         \
 184                    nonproduct_nonstatic_field,                                                                                       \
 185                    c1_nonstatic_field,                                                                                               \
 186                    c2_nonstatic_field,                                                                                               \
 187                    unchecked_c1_static_field,                                                                                        \
 188                    unchecked_c2_static_field)                                                                                        \
 189                                                                                                                                      \
 190   /*************/                                                                                                                    \
 191   /* GC fields */                                                                                                                    \
 192   /*************/                                                                                                                    \
 193                                                                                                                                      \
 194   VM_STRUCTS_GC(nonstatic_field,                                                                                                     \
 195                 volatile_nonstatic_field,                                                                                            \
 196                 static_field,                                                                                                        \
 197                 unchecked_nonstatic_field)                                                                                           \
 198                                                                                                                                      \
 199   /******************************************************************/                                                               \
 200   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete)   */                                                               \
 201   /******************************************************************/                                                               \
 202                                                                                                                                      \
<a name="6" id="anc6"></a><span class="line-modified"> 203   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \</span>
 204   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 205   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowKlass)                           \
 206   static_field(BarrierSet,                     _barrier_set,                                  BarrierSet*)                           \
 207   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 208   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 209   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 210   nonstatic_field(CompiledICHolder,            _holder_metadata,                              Metadata*)                             \
 211   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 212   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 213   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 214   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 215   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 216   nonstatic_field(ConstantPool,                _resolved_klasses,                             Array&lt;Klass*&gt;*)                        \
 217   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 218   nonstatic_field(ConstantPoolCache,           _resolved_references,                          OopHandle)                             \
 219   nonstatic_field(ConstantPoolCache,           _reference_map,                                Array&lt;u2&gt;*)                            \
 220   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 221   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 222   volatile_nonstatic_field(InstanceKlass,      _array_klasses,                                Klass*)                                \
 223   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 224   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 225   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;InstanceKlass*&gt;*)                \
 226   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;InstanceKlass*&gt;*)                \
 227   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 228   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 229   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 230   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 231   nonstatic_field(InstanceKlass,               _source_debug_extension,                       const char*)                           \
 232   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 233   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 234   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 235   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 236   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 237   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
<a name="7" id="anc7"></a><span class="line-modified"> 238   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \</span>
 239   nonstatic_field(InstanceKlass,               _minor_version,                                u2)                                    \
 240   nonstatic_field(InstanceKlass,               _major_version,                                u2)                                    \
 241   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 242   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 243   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 244   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 245   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 246   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 247   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 248   JVMTI_ONLY(nonstatic_field(InstanceKlass,    _breakpoints,                                  BreakpointInfo*))                      \
 249   nonstatic_field(InstanceKlass,               _generic_signature_index,                      u2)                                    \
 250   volatile_nonstatic_field(InstanceKlass,      _methods_jmethod_ids,                          jmethodID*)                            \
 251   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 252   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 253   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 254   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 255   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 256   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 257   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 258   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 259   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 260   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 261   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 262   volatile_nonstatic_field(Klass,              _subklass,                                     Klass*)                                 \
 263   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 264   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 265   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
<a name="8" id="anc8"></a><span class="line-modified"> 266   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \</span>
 267   volatile_nonstatic_field(Klass,              _next_sibling,                                 Klass*)                                \
 268   nonstatic_field(Klass,                       _next_link,                                    Klass*)                                \
 269   nonstatic_field(Klass,                       _vtable_len,                                   int)                                   \
 270   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 271   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 272   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 273   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 274   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 275   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 276   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 277   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 278   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 279   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 280   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 281   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 282   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 283   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 284   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 285   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 286   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 287   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 288   nonstatic_field(DataLayout,                  _header._struct._tag,                          u1)                                    \
 289   nonstatic_field(DataLayout,                  _header._struct._flags,                        u1)                                    \
 290   nonstatic_field(DataLayout,                  _header._struct._bci,                          u2)                                    \
 291   nonstatic_field(DataLayout,                  _header._struct._traps,                        u4)                                    \
 292   nonstatic_field(DataLayout,                  _cells[0],                                     intptr_t)                              \
 293   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 294   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
 295   nonstatic_field(MethodCounters,              _interpreter_backward_branch_limit,            int)                                   \
 296   nonstatic_field(MethodCounters,              _interpreter_profile_limit,                    int)                                   \
 297   nonstatic_field(MethodCounters,              _invoke_mask,                                  int)                                   \
 298   nonstatic_field(MethodCounters,              _backedge_mask,                                int)                                   \
 299   COMPILER2_OR_JVMCI_PRESENT(nonstatic_field(MethodCounters, _interpreter_invocation_count,   int))                                  \
 300   COMPILER2_OR_JVMCI_PRESENT(nonstatic_field(MethodCounters, _interpreter_throwout_count,     u2))                                   \
 301   JVMTI_ONLY(nonstatic_field(MethodCounters,   _number_of_breakpoints,                        u2))                                   \
 302   nonstatic_field(MethodCounters,              _invocation_counter,                           InvocationCounter)                     \
 303   nonstatic_field(MethodCounters,              _backedge_counter,                             InvocationCounter)                     \
 304   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 305   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 306   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 307   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 308   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 309   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 310   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 311   nonproduct_nonstatic_field(Method,           _compiled_invocation_count,                    int)                                   \
 312   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
 313   nonstatic_field(Method,                      _i2i_entry,                                    address)                               \
 314   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 315   volatile_nonstatic_field(Method,             _from_interpreted_entry,                       address)                               \
 316   volatile_nonstatic_field(ConstMethod,        _fingerprint,                                  uint64_t)                              \
 317   nonstatic_field(ConstMethod,                 _constants,                                    ConstantPool*)                         \
 318   nonstatic_field(ConstMethod,                 _stackmap_data,                                Array&lt;u1&gt;*)                            \
 319   nonstatic_field(ConstMethod,                 _constMethod_size,                             int)                                   \
 320   nonstatic_field(ConstMethod,                 _flags,                                        u2)                                    \
 321   nonstatic_field(ConstMethod,                 _code_size,                                    u2)                                    \
 322   nonstatic_field(ConstMethod,                 _name_index,                                   u2)                                    \
 323   nonstatic_field(ConstMethod,                 _signature_index,                              u2)                                    \
 324   nonstatic_field(ConstMethod,                 _method_idnum,                                 u2)                                    \
 325   nonstatic_field(ConstMethod,                 _max_stack,                                    u2)                                    \
 326   nonstatic_field(ConstMethod,                 _max_locals,                                   u2)                                    \
 327   nonstatic_field(ConstMethod,                 _size_of_parameters,                           u2)                                    \
 328   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 329   nonstatic_field(ObjArrayKlass,               _bottom_klass,                                 Klass*)                                \
 330   volatile_nonstatic_field(Symbol,             _length_and_refcount,                          unsigned int)                          \
 331   nonstatic_field(Symbol,                      _identity_hash,                                short)                                 \
 332   unchecked_nonstatic_field(Symbol,            _body,                                         sizeof(u1)) /* NOTE: no type */        \
 333   nonstatic_field(Symbol,                      _body[0],                                      u1)                                    \
 334   nonstatic_field(TypeArrayKlass,              _max_length,                                   jint)                                  \
 335   nonstatic_field(OopHandle,                   _obj,                                          oop*)                                  \
 336                                                                                                                                      \
 337   /***********************/                                                                                                          \
 338   /* Constant Pool Cache */                                                                                                          \
 339   /***********************/                                                                                                          \
 340                                                                                                                                      \
 341   volatile_nonstatic_field(ConstantPoolCacheEntry,      _indices,                             intx)                                  \
 342   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f1,                                  Metadata*)                             \
 343   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f2,                                  intx)                                  \
 344   volatile_nonstatic_field(ConstantPoolCacheEntry,      _flags,                               intx)                                  \
 345                                                                                                                                      \
 346   /********************************/                                                                                                 \
 347   /* MethodOop-related structures */                                                                                                 \
 348   /********************************/                                                                                                 \
 349                                                                                                                                      \
 350   nonstatic_field(CheckedExceptionElement,     class_cp_index,                                u2)                                    \
 351   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 352   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 353   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 354   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 355   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 356   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 357   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 358   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 359   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 360   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 361   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _orig_bytecode,                                Bytecodes::Code))                      \
 362   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _bci,                                          int))                                  \
 363   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _name_index,                                   u2))                                   \
 364   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _signature_index,                              u2))                                   \
 365   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _next,                                         BreakpointInfo*))                      \
 366   /***********/                                                                                                                      \
 367   /* JNI IDs */                                                                                                                      \
 368   /***********/                                                                                                                      \
 369                                                                                                                                      \
 370   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 371   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 372   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
<a name="9" id="anc9"></a>
 373   /************/                                                                                                                     \
 374   /* Universe */                                                                                                                     \
 375   /************/                                                                                                                     \
 376                                                                                                                                      \
 377      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 378      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 379      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 380      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 381      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 382      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 383      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 384      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 385      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 386      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 387      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 388      static_field(Universe,                    _verify_count,                                 int)                                   \
 389      static_field(Universe,                    _verify_oop_mask,                              uintptr_t)                             \
 390      static_field(Universe,                    _verify_oop_bits,                              uintptr_t)                             \
 391      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
<a name="10" id="anc10"></a><span class="line-modified"> 392      static_field(Universe,                    _narrow_oop._base,                             address)                               \</span>
<span class="line-modified"> 393      static_field(Universe,                    _narrow_oop._shift,                            int)                                   \</span>
<span class="line-modified"> 394      static_field(Universe,                    _narrow_oop._use_implicit_null_checks,         bool)                                  \</span>
<span class="line-modified"> 395      static_field(Universe,                    _narrow_klass._base,                           address)                               \</span>
<span class="line-modified"> 396      static_field(Universe,                    _narrow_klass._shift,                          int)                                   \</span>










 397                                                                                                                                      \
 398   /******/                                                                                                                           \
 399   /* os */                                                                                                                           \
 400   /******/                                                                                                                           \
 401                                                                                                                                      \
 402      static_field(os,                          _polling_page,                                 address)                               \
 403                                                                                                                                      \
 404   /**********/                                                                                                                       \
 405   /* Memory */                                                                                                                       \
 406   /**********/                                                                                                                       \
 407                                                                                                                                      \
 408      static_field(MetaspaceObj,                _shared_metaspace_base,                        void*)                                 \
 409      static_field(MetaspaceObj,                _shared_metaspace_top,                         void*)                                 \
 410   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 411   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 412   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 413   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 414   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 415   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 416      static_field(ThreadLocalAllocBuffer,      _reserve_for_allocation_prefetch,              int)                                   \
 417      static_field(ThreadLocalAllocBuffer,      _target_refills,                               unsigned)                              \
 418   nonstatic_field(ThreadLocalAllocBuffer,      _number_of_refills,                            unsigned)                              \
 419   nonstatic_field(ThreadLocalAllocBuffer,      _fast_refill_waste,                            unsigned)                              \
 420   nonstatic_field(ThreadLocalAllocBuffer,      _slow_refill_waste,                            unsigned)                              \
 421   nonstatic_field(ThreadLocalAllocBuffer,      _gc_waste,                                     unsigned)                              \
 422   nonstatic_field(ThreadLocalAllocBuffer,      _slow_allocations,                             unsigned)                              \
 423   nonstatic_field(VirtualSpace,                _low_boundary,                                 char*)                                 \
 424   nonstatic_field(VirtualSpace,                _high_boundary,                                char*)                                 \
 425   nonstatic_field(VirtualSpace,                _low,                                          char*)                                 \
 426   nonstatic_field(VirtualSpace,                _high,                                         char*)                                 \
 427   nonstatic_field(VirtualSpace,                _lower_high,                                   char*)                                 \
 428   nonstatic_field(VirtualSpace,                _middle_high,                                  char*)                                 \
 429   nonstatic_field(VirtualSpace,                _upper_high,                                   char*)                                 \
 430                                                                                                                                      \
 431   /************************/                                                                                                         \
 432   /* PerfMemory - jvmstat */                                                                                                         \
 433   /************************/                                                                                                         \
 434                                                                                                                                      \
 435   nonstatic_field(PerfDataPrologue,            magic,                                         jint)                                  \
 436   nonstatic_field(PerfDataPrologue,            byte_order,                                    jbyte)                                 \
 437   nonstatic_field(PerfDataPrologue,            major_version,                                 jbyte)                                 \
 438   nonstatic_field(PerfDataPrologue,            minor_version,                                 jbyte)                                 \
 439   nonstatic_field(PerfDataPrologue,            accessible,                                    jbyte)                                 \
 440   nonstatic_field(PerfDataPrologue,            used,                                          jint)                                  \
 441   nonstatic_field(PerfDataPrologue,            overflow,                                      jint)                                  \
 442   nonstatic_field(PerfDataPrologue,            mod_time_stamp,                                jlong)                                 \
 443   nonstatic_field(PerfDataPrologue,            entry_offset,                                  jint)                                  \
 444   nonstatic_field(PerfDataPrologue,            num_entries,                                   jint)                                  \
 445                                                                                                                                      \
 446   nonstatic_field(PerfDataEntry,               entry_length,                                  jint)                                  \
 447   nonstatic_field(PerfDataEntry,               name_offset,                                   jint)                                  \
 448   nonstatic_field(PerfDataEntry,               vector_length,                                 jint)                                  \
 449   nonstatic_field(PerfDataEntry,               data_type,                                     jbyte)                                 \
 450   nonstatic_field(PerfDataEntry,               flags,                                         jbyte)                                 \
 451   nonstatic_field(PerfDataEntry,               data_units,                                    jbyte)                                 \
 452   nonstatic_field(PerfDataEntry,               data_variability,                              jbyte)                                 \
 453   nonstatic_field(PerfDataEntry,               data_offset,                                   jint)                                  \
 454                                                                                                                                      \
 455      static_field(PerfMemory,                  _start,                                        char*)                                 \
 456      static_field(PerfMemory,                  _end,                                          char*)                                 \
 457      static_field(PerfMemory,                  _top,                                          char*)                                 \
 458      static_field(PerfMemory,                  _capacity,                                     size_t)                                \
 459      static_field(PerfMemory,                  _prologue,                                     PerfDataPrologue*)                     \
 460      static_field(PerfMemory,                  _initialized,                                  int)                                   \
 461                                                                                                                                      \
 462   /********************/                                                                                                             \
 463   /* SystemDictionary */                                                                                                             \
 464   /********************/                                                                                                             \
 465                                                                                                                                      \
 466      static_field(SystemDictionary,            _system_loader_lock_obj,                       oop)                                   \
 467      static_field(SystemDictionary,            WK_KLASS(Object_klass),                        InstanceKlass*)                        \
 468      static_field(SystemDictionary,            WK_KLASS(String_klass),                        InstanceKlass*)                        \
 469      static_field(SystemDictionary,            WK_KLASS(Class_klass),                         InstanceKlass*)                        \
 470      static_field(SystemDictionary,            WK_KLASS(ClassLoader_klass),                   InstanceKlass*)                        \
 471      static_field(SystemDictionary,            WK_KLASS(System_klass),                        InstanceKlass*)                        \
 472      static_field(SystemDictionary,            WK_KLASS(Thread_klass),                        InstanceKlass*)                        \
 473      static_field(SystemDictionary,            WK_KLASS(ThreadGroup_klass),                   InstanceKlass*)                        \
 474      static_field(SystemDictionary,            WK_KLASS(MethodHandle_klass),                  InstanceKlass*)                        \
 475      static_field(SystemDictionary,            _java_system_loader,                           oop)                                   \
 476                                                                                                                                      \
 477   /*************/                                                                                                                    \
 478   /* vmSymbols */                                                                                                                    \
 479   /*************/                                                                                                                    \
 480                                                                                                                                      \
 481      static_field(vmSymbols,                   _symbols[0],                                   Symbol*)                               \
 482                                                                                                                                      \
 483   /*******************/                                                                                                              \
 484   /* HashtableBucket */                                                                                                              \
 485   /*******************/                                                                                                              \
 486                                                                                                                                      \
 487   nonstatic_field(HashtableBucket&lt;mtInternal&gt;, _entry,                                        BasicHashtableEntry&lt;mtInternal&gt;*)      \
 488                                                                                                                                      \
 489   /******************/                                                                                                               \
 490   /* HashtableEntry */                                                                                                               \
 491   /******************/                                                                                                               \
 492                                                                                                                                      \
 493   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _next,                                     BasicHashtableEntry&lt;mtInternal&gt;*)      \
 494   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _hash,                                     unsigned int)                          \
 495   nonstatic_field(IntptrHashtableEntry,            _literal,                                  intptr_t)                              \
 496                                                                                                                                      \
 497   /*************/                                                                                                                    \
 498   /* Hashtable */                                                                                                                    \
 499   /*************/                                                                                                                    \
 500                                                                                                                                      \
 501   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 502   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 503   volatile_nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                           BasicHashtableEntry&lt;mtInternal&gt;*)      \
 504   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 505   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 506   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 507                                                                                                                                      \
 508   /*******************/                                                                                                              \
 509   /* ClassLoaderData */                                                                                                              \
 510   /*******************/                                                                                                              \
 511   nonstatic_field(ClassLoaderData,             _class_loader,                                 OopHandle)                             \
 512   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 513   volatile_nonstatic_field(ClassLoaderData,    _klasses,                                      Klass*)                                \
 514   nonstatic_field(ClassLoaderData,             _is_unsafe_anonymous,                          bool)                                  \
 515   volatile_nonstatic_field(ClassLoaderData,    _dictionary,                                   Dictionary*)                           \
 516                                                                                                                                      \
<a name="11" id="anc11"></a><span class="line-modified"> 517      static_field(ClassLoaderDataGraph,        _head,                                         ClassLoaderData*)                      \</span>
 518                                                                                                                                      \
 519   /**********/                                                                                                                       \
 520   /* Arrays */                                                                                                                       \
 521   /**********/                                                                                                                       \
 522                                                                                                                                      \
 523   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 524   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 525                                                                                                                                      \
 526   /*******************/                                                                                                              \
 527   /* GrowableArrays  */                                                                                                              \
 528   /*******************/                                                                                                              \
 529                                                                                                                                      \
 530   nonstatic_field(GenericGrowableArray,        _len,                                          int)                                   \
 531   nonstatic_field(GenericGrowableArray,        _max,                                          int)                                   \
 532   nonstatic_field(GenericGrowableArray,        _arena,                                        Arena*)                                \
 533   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 534                                                                                                                                      \
 535   /********************************/                                                                                                 \
 536   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 537   /********************************/                                                                                                 \
 538                                                                                                                                      \
 539      static_field(CodeCache,                   _heaps,                                        GrowableArray&lt;CodeHeap*&gt;*)             \
 540      static_field(CodeCache,                   _low_bound,                                    address)                               \
 541      static_field(CodeCache,                   _high_bound,                                   address)                               \
 542                                                                                                                                      \
 543   /*******************************/                                                                                                  \
 544   /* CodeHeap (NOTE: incomplete) */                                                                                                  \
 545   /*******************************/                                                                                                  \
 546                                                                                                                                      \
 547   nonstatic_field(CodeHeap,                    _memory,                                       VirtualSpace)                          \
 548   nonstatic_field(CodeHeap,                    _segmap,                                       VirtualSpace)                          \
 549   nonstatic_field(CodeHeap,                    _log2_segment_size,                            int)                                   \
 550   nonstatic_field(HeapBlock,                   _header,                                       HeapBlock::Header)                     \
 551   nonstatic_field(HeapBlock::Header,           _length,                                       size_t)                                \
 552   nonstatic_field(HeapBlock::Header,           _used,                                         bool)                                  \
 553                                                                                                                                      \
 554   /**********************************/                                                                                               \
 555   /* Interpreter (NOTE: incomplete) */                                                                                               \
 556   /**********************************/                                                                                               \
 557                                                                                                                                      \
 558      static_field(AbstractInterpreter,         _code,                                         StubQueue*)                            \
 559                                                                                                                                      \
 560   /****************************/                                                                                                     \
 561   /* Stubs (NOTE: incomplete) */                                                                                                     \
 562   /****************************/                                                                                                     \
 563                                                                                                                                      \
 564   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 565   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 566   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 567   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 568   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 569   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 570   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 571   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 572                                                                                                                                      \
 573   /***********************************/                                                                                              \
 574   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 575   /***********************************/                                                                                              \
 576                                                                                                                                      \
 577      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 578      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 579      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 580      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 581      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 582      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
<a name="12" id="anc12"></a>

 583      static_field(StubRoutines,                _counterMode_AESCrypt,                         address)                               \
 584      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 585      static_field(StubRoutines,                _base64_encodeBlock,                           address)                               \
 586      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 587      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 588      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 589      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 590      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 591      static_field(StubRoutines,                _squareToLen,                                  address)                               \
<a name="13" id="anc13"></a>

 592      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 593      static_field(StubRoutines,                _dexp,                                         address)                               \
 594      static_field(StubRoutines,                _dlog,                                         address)                               \
 595      static_field(StubRoutines,                _dlog10,                                       address)                               \
 596      static_field(StubRoutines,                _dpow,                                         address)                               \
 597      static_field(StubRoutines,                _dsin,                                         address)                               \
 598      static_field(StubRoutines,                _dcos,                                         address)                               \
 599      static_field(StubRoutines,                _dtan,                                         address)                               \
 600      static_field(StubRoutines,                _vectorizedMismatch,                           address)                               \
 601      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 602      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 603      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 604      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 605      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 606      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 607      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 608      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 609      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 610      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 611      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
 612      static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                address)                               \
 613      static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                      address)                               \
 614      static_field(StubRoutines,                _arrayof_jshort_arraycopy,                     address)                               \
 615      static_field(StubRoutines,                _arrayof_jint_arraycopy,                       address)                               \
 616      static_field(StubRoutines,                _arrayof_jlong_arraycopy,                      address)                               \
 617      static_field(StubRoutines,                _arrayof_oop_arraycopy,                        address)                               \
 618      static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                 address)                               \
 619      static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,             address)                               \
 620      static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,            address)                               \
 621      static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,              address)                               \
 622      static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,             address)                               \
 623      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,               address)                               \
 624      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,        address)                               \
 625      static_field(StubRoutines,                _checkcast_arraycopy,                          address)                               \
 626      static_field(StubRoutines,                _checkcast_arraycopy_uninit,                   address)                               \
 627      static_field(StubRoutines,                _unsafe_arraycopy,                             address)                               \
 628      static_field(StubRoutines,                _generic_arraycopy,                            address)                               \
 629                                                                                                                                      \
 630   /*****************/                                                                                                                \
 631   /* SharedRuntime */                                                                                                                \
 632   /*****************/                                                                                                                \
 633                                                                                                                                      \
 634      static_field(SharedRuntime,               _wrong_method_blob,                            RuntimeStub*)                          \
 635      static_field(SharedRuntime,               _ic_miss_blob,                                 RuntimeStub*)                          \
 636      static_field(SharedRuntime,               _deopt_blob,                                   DeoptimizationBlob*)                   \
 637                                                                                                                                      \
 638   /***************************************/                                                                                          \
 639   /* PcDesc and other compiled code info */                                                                                          \
 640   /***************************************/                                                                                          \
 641                                                                                                                                      \
 642   nonstatic_field(PcDesc,                      _pc_offset,                                    int)                                   \
 643   nonstatic_field(PcDesc,                      _scope_decode_offset,                          int)                                   \
 644   nonstatic_field(PcDesc,                      _obj_decode_offset,                            int)                                   \
 645   nonstatic_field(PcDesc,                      _flags,                                        int)                                   \
 646                                                                                                                                      \
 647   /***************************************************/                                                                              \
 648   /* CodeBlobs (NOTE: incomplete, but only a little) */                                                                              \
 649   /***************************************************/                                                                              \
 650                                                                                                                                      \
 651   nonstatic_field(CodeBlob,                 _name,                                   const char*)                                    \
 652   nonstatic_field(CodeBlob,                 _size,                                   int)                                            \
 653   nonstatic_field(CodeBlob,                 _header_size,                            int)                                            \
 654   nonstatic_field(CodeBlob,                 _frame_complete_offset,                  int)                                            \
 655   nonstatic_field(CodeBlob,                 _data_offset,                            int)                                            \
 656   nonstatic_field(CodeBlob,                 _frame_size,                             int)                                            \
 657   nonstatic_field(CodeBlob,                 _oop_maps,                               ImmutableOopMapSet*)                            \
 658   nonstatic_field(CodeBlob,                 _code_begin,                             address)                                        \
 659   nonstatic_field(CodeBlob,                 _code_end,                               address)                                        \
 660   nonstatic_field(CodeBlob,                 _content_begin,                          address)                                        \
 661   nonstatic_field(CodeBlob,                 _data_end,                               address)                                        \
 662                                                                                                                                      \
 663   nonstatic_field(DeoptimizationBlob,          _unpack_offset,                                int)                                   \
 664                                                                                                                                      \
 665   nonstatic_field(RuntimeStub,                 _caller_must_gc_arguments,                     bool)                                  \
 666                                                                                                                                      \
 667   /********************************************************/                                                                         \
 668   /* CompiledMethod (NOTE: incomplete, but only a little) */                                                                         \
 669   /********************************************************/                                                                         \
 670                                                                                                                                      \
 671   nonstatic_field(CompiledMethod,                     _method,                                       Method*)                        \
 672   volatile_nonstatic_field(CompiledMethod,            _exception_cache,                              ExceptionCache*)                \
 673   nonstatic_field(CompiledMethod,                     _scopes_data_begin,                            address)                        \
 674   nonstatic_field(CompiledMethod,                     _deopt_handler_begin,                          address)                        \
 675   nonstatic_field(CompiledMethod,                     _deopt_mh_handler_begin,                       address)                        \
 676                                                                                                                                      \
 677   /**************************************************/                                                                               \
 678   /* NMethods (NOTE: incomplete, but only a little) */                                                                               \
 679   /**************************************************/                                                                               \
 680                                                                                                                                      \
 681   nonstatic_field(nmethod,                     _entry_bci,                                    int)                                   \
 682   nonstatic_field(nmethod,                     _osr_link,                                     nmethod*)                              \
 683   nonstatic_field(nmethod,                     _state,                                        volatile signed char)                  \
 684   nonstatic_field(nmethod,                     _exception_offset,                             int)                                   \
 685   nonstatic_field(nmethod,                     _orig_pc_offset,                               int)                                   \
 686   nonstatic_field(nmethod,                     _stub_offset,                                  int)                                   \
 687   nonstatic_field(nmethod,                     _consts_offset,                                int)                                   \
 688   nonstatic_field(nmethod,                     _oops_offset,                                  int)                                   \
 689   nonstatic_field(nmethod,                     _metadata_offset,                              int)                                   \
 690   nonstatic_field(nmethod,                     _scopes_pcs_offset,                            int)                                   \
 691   nonstatic_field(nmethod,                     _dependencies_offset,                          int)                                   \
 692   nonstatic_field(nmethod,                     _handler_table_offset,                         int)                                   \
 693   nonstatic_field(nmethod,                     _nul_chk_table_offset,                         int)                                   \
 694   nonstatic_field(nmethod,                     _nmethod_end_offset,                           int)                                   \
 695   nonstatic_field(nmethod,                     _entry_point,                                  address)                               \
 696   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 697   nonstatic_field(nmethod,                     _osr_entry_point,                              address)                               \
 698   volatile_nonstatic_field(nmethod,            _lock_count,                                   jint)                                  \
 699   volatile_nonstatic_field(nmethod,            _stack_traversal_mark,                         long)                                  \
 700   nonstatic_field(nmethod,                     _compile_id,                                   int)                                   \
 701   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 702                                                                                                                                      \
 703   unchecked_c2_static_field(Deoptimization,    _trap_reason_name,                             void*)                                 \
 704                                                                                                                                      \
 705   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,                    int)                                   \
 706   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                            int)                                   \
 707   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                             int)                                   \
 708   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                            int)                                   \
 709   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                                  int)                                   \
 710   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                                  intptr_t*)                             \
 711   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                                    address*)                              \
 712   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 713   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 714   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 715   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 716                                                                                                                                      \
 717   /********************************/                                                                                                 \
 718   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 719   /********************************/                                                                                                 \
 720                                                                                                                                      \
 721   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 722   /********************************/                                                                                                 \
 723   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 724   /********************************/                                                                                                 \
 725   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 726   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 727                                                                                                                                      \
 728   /******************************/                                                                                                   \
 729   /* Threads (NOTE: incomplete) */                                                                                                   \
 730   /******************************/                                                                                                   \
 731                                                                                                                                      \
<a name="14" id="anc14"></a><span class="line-modified"> 732      static_field(Threads,                     _thread_list,                                  JavaThread*)                           \</span>
<span class="line-modified"> 733      static_field(Threads,                     _number_of_threads,                            int)                                   \</span>
<span class="line-modified"> 734      static_field(Threads,                     _number_of_non_daemon_threads,                 int)                                   \</span>
<span class="line-modified"> 735      static_field(Threads,                     _return_code,                                  int)                                   \</span>



 736                                                                                                                                      \
 737   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 738   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 739   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 740   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
 741   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
 742   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
 743   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
 744   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
 745   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
 746   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
 747   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
 748   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
<a name="15" id="anc15"></a><span class="line-removed"> 749   nonstatic_field(JavaThread,                  _next,                                         JavaThread*)                           \</span>
 750   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 751   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 752   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 753   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
 754   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
 755   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 756   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 757   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 758   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
 759   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
 760   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
 761   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 762   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
 763   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
 764   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
 765   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
 766   volatile_nonstatic_field(JavaThread,         _terminated,                                   JavaThread::TerminatedTypes)           \
 767   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
 768   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
 769                                                                                                                                      \
 770   /************/                                                                                                                     \
 771   /* OSThread */                                                                                                                     \
 772   /************/                                                                                                                     \
 773                                                                                                                                      \
<a name="16" id="anc16"></a><span class="line-removed"> 774   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \</span>
 775   volatile_nonstatic_field(OSThread,           _state,                                        ThreadState)                           \
 776                                                                                                                                      \
 777   /************************/                                                                                                         \
 778   /* OopMap and OopMapSet */                                                                                                         \
 779   /************************/                                                                                                         \
 780                                                                                                                                      \
 781   nonstatic_field(OopMap,                      _pc_offset,                                    int)                                   \
 782   nonstatic_field(OopMap,                      _omv_count,                                    int)                                   \
 783   nonstatic_field(OopMap,                      _write_stream,                                 CompressedWriteStream*)                \
 784   nonstatic_field(OopMapSet,                   _om_count,                                     int)                                   \
 785   nonstatic_field(OopMapSet,                   _om_size,                                      int)                                   \
 786   nonstatic_field(OopMapSet,                   _om_data,                                      OopMap**)                              \
 787                                                                                                                                      \
 788   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
 789   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
 790                                                                                                                                      \
 791   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
 792   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
 793                                                                                                                                      \
 794   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
 795                                                                                                                                      \
 796   /*********************************/                                                                                                \
 797   /* JNIHandles and JNIHandleBlock */                                                                                                \
 798   /*********************************/                                                                                                \
 799   static_field(JNIHandles,                     _global_handles,                               OopStorage*)                           \
 800   static_field(JNIHandles,                     _weak_global_handles,                          OopStorage*)                           \
 801   unchecked_nonstatic_field(JNIHandleBlock,    _handles,       JNIHandleBlock::block_size_in_oops * sizeof(Oop)) /* Note: no type */ \
 802   nonstatic_field(JNIHandleBlock,              _top,                                          int)                                   \
 803   nonstatic_field(JNIHandleBlock,              _next,                                         JNIHandleBlock*)                       \
 804                                                                                                                                      \
 805   /********************/                                                                                                             \
 806   /* CompressedStream */                                                                                                             \
 807   /********************/                                                                                                             \
 808                                                                                                                                      \
 809   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
 810   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
 811                                                                                                                                      \
 812   /*********************************/                                                                                                \
 813   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
 814   /*********************************/                                                                                                \
 815                                                                                                                                      \
 816      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
 817      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
 818                                                                                                                                      \
 819   /*******************************/                                                                                                  \
 820   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
 821   /*******************************/                                                                                                  \
 822                                                                                                                                      \
 823   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
 824                                                                                                                                      \
 825   /**************/                                                                                                                   \
 826   /* CI */                                                                                                                           \
 827   /************/                                                                                                                     \
 828                                                                                                                                      \
<a name="17" id="anc17"></a><span class="line-removed"> 829   nonstatic_field(ciEnv,                       _system_dictionary_modification_counter,       int)                                   \</span>
 830   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
 831   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
 832   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
 833   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
 834   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
 835   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
 836                                                                                                                                      \
 837   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
 838                                                                                                                                      \
 839   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
 840   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
 841                                                                                                                                      \
 842   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
 843                                                                                                                                      \
 844   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
 845                                                                                                                                      \
 846   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
 847                                                                                                                                      \
 848   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
 849                                                                                                                                      \
 850   nonstatic_field(ciArrayKlass,                _dimension,                                    jint)                                  \
 851                                                                                                                                      \
 852   nonstatic_field(ciObjArrayKlass,             _element_klass,                                ciKlass*)                              \
 853   nonstatic_field(ciObjArrayKlass,             _base_element_klass,                           ciKlass*)                              \
 854                                                                                                                                      \
 855   nonstatic_field(ciInstanceKlass,             _init_state,                                   InstanceKlass::ClassState)             \
 856   nonstatic_field(ciInstanceKlass,             _is_shared,                                    bool)                                  \
 857                                                                                                                                      \
 858   nonstatic_field(ciMethod,                    _interpreter_invocation_count,                 int)                                   \
 859   nonstatic_field(ciMethod,                    _interpreter_throwout_count,                   int)                                   \
 860   nonstatic_field(ciMethod,                    _instructions_size,                            int)                                   \
 861                                                                                                                                      \
 862   nonstatic_field(ciMethodData,                _data_size,                                    int)                                   \
 863   nonstatic_field(ciMethodData,                _state,                                        u_char)                                \
 864   nonstatic_field(ciMethodData,                _extra_data_size,                              int)                                   \
 865   nonstatic_field(ciMethodData,                _data,                                         intptr_t*)                             \
 866   nonstatic_field(ciMethodData,                _hint_di,                                      int)                                   \
 867   nonstatic_field(ciMethodData,                _eflags,                                       intx)                                  \
 868   nonstatic_field(ciMethodData,                _arg_local,                                    intx)                                  \
 869   nonstatic_field(ciMethodData,                _arg_stack,                                    intx)                                  \
 870   nonstatic_field(ciMethodData,                _arg_returned,                                 intx)                                  \
 871   nonstatic_field(ciMethodData,                _current_mileage,                              int)                                   \
 872   nonstatic_field(ciMethodData,                _orig,                                         MethodData)                            \
 873                                                                                                                                      \
 874   nonstatic_field(ciField,                     _holder,                                       ciInstanceKlass*)                      \
 875   nonstatic_field(ciField,                     _name,                                         ciSymbol*)                             \
 876   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
 877   nonstatic_field(ciField,                     _offset,                                       int)                                   \
 878   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
 879   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
 880                                                                                                                                      \
 881   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
 882   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
 883   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
 884                                                                                                                                      \
 885   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
 886   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
 887   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
 888   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
 889   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
 890   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
 891                                                                                                                                      \
 892   /************/                                                                                                                     \
 893   /* Monitors */                                                                                                                     \
 894   /************/                                                                                                                     \
 895                                                                                                                                      \
<a name="18" id="anc18"></a><span class="line-modified"> 896   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markOop)                               \</span>
 897   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
 898   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
<a name="19" id="anc19"></a><span class="line-modified"> 899   volatile_nonstatic_field(ObjectMonitor,      _count,                                        jint)                                  \</span>
 900   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
<a name="20" id="anc20"></a><span class="line-modified"> 901   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intptr_t)                              \</span>
<span class="line-modified"> 902   nonstatic_field(ObjectMonitor,               FreeNext,                                      ObjectMonitor*)                        \</span>
<span class="line-modified"> 903   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markOop)                               \</span>
 904   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
 905   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
<a name="21" id="anc21"></a><span class="line-modified"> 906   static_ptr_volatile_field(ObjectSynchronizer, gBlockList,                                   PaddedObjectMonitor*)                  \</span>
 907                                                                                                                                      \
 908   /*********************/                                                                                                            \
 909   /* Matcher (C2 only) */                                                                                                            \
 910   /*********************/                                                                                                            \
 911                                                                                                                                      \
 912   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
 913                                                                                                                                      \
 914   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
 915   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
 916   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
 917   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
 918   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
 919   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
 920   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
 921   c2_nonstatic_field(Node,                     _class_id,                                     jushort)                               \
 922   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
 923                                                                                                                                      \
 924   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
 925   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
 926   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
 927   c2_nonstatic_field(Compile,                  _top,                                          Node*)                                 \
 928   c2_nonstatic_field(Compile,                  _cfg,                                          PhaseCFG*)                             \
 929   c2_nonstatic_field(Compile,                  _regalloc,                                     PhaseRegAlloc*)                        \
 930   c2_nonstatic_field(Compile,                  _method,                                       ciMethod*)                             \
 931   c2_nonstatic_field(Compile,                  _compile_id,                                   const int)                             \
 932   c2_nonstatic_field(Compile,                  _save_argument_registers,                      const bool)                            \
 933   c2_nonstatic_field(Compile,                  _subsume_loads,                                const bool)                            \
 934   c2_nonstatic_field(Compile,                  _do_escape_analysis,                           const bool)                            \
 935   c2_nonstatic_field(Compile,                  _eliminate_boxing,                             const bool)                            \
 936   c2_nonstatic_field(Compile,                  _ilt,                                          InlineTree*)                           \
 937                                                                                                                                      \
 938   c2_nonstatic_field(InlineTree,               _caller_jvms,                                  JVMState*)                             \
 939   c2_nonstatic_field(InlineTree,               _method,                                       ciMethod*)                             \
 940   c2_nonstatic_field(InlineTree,               _caller_tree,                                  InlineTree*)                           \
 941   c2_nonstatic_field(InlineTree,               _subtrees,                                     GrowableArray&lt;InlineTree*&gt;)            \
 942                                                                                                                                      \
 943   c2_nonstatic_field(OptoRegPair,              _first,                                        short)                                 \
 944   c2_nonstatic_field(OptoRegPair,              _second,                                       short)                                 \
 945                                                                                                                                      \
 946   c2_nonstatic_field(JVMState,                 _caller,                                       JVMState*)                             \
 947   c2_nonstatic_field(JVMState,                 _depth,                                        uint)                                  \
 948   c2_nonstatic_field(JVMState,                 _locoff,                                       uint)                                  \
 949   c2_nonstatic_field(JVMState,                 _stkoff,                                       uint)                                  \
 950   c2_nonstatic_field(JVMState,                 _monoff,                                       uint)                                  \
 951   c2_nonstatic_field(JVMState,                 _scloff,                                       uint)                                  \
 952   c2_nonstatic_field(JVMState,                 _endoff,                                       uint)                                  \
 953   c2_nonstatic_field(JVMState,                 _sp,                                           uint)                                  \
 954   c2_nonstatic_field(JVMState,                 _bci,                                          int)                                   \
 955   c2_nonstatic_field(JVMState,                 _method,                                       ciMethod*)                             \
 956   c2_nonstatic_field(JVMState,                 _map,                                          SafePointNode*)                        \
 957                                                                                                                                      \
 958   c2_nonstatic_field(SafePointNode,            _jvms,                                         JVMState* const)                       \
 959                                                                                                                                      \
 960   c2_nonstatic_field(MachSafePointNode,        _jvms,                                         JVMState*)                             \
 961   c2_nonstatic_field(MachSafePointNode,        _jvmadj,                                       uint)                                  \
 962                                                                                                                                      \
 963   c2_nonstatic_field(MachIfNode,               _prob,                                         jfloat)                                \
 964   c2_nonstatic_field(MachIfNode,               _fcnt,                                         jfloat)                                \
 965                                                                                                                                      \
 966   c2_nonstatic_field(MachJumpNode,             _probs,                                        jfloat*)                               \
 967                                                                                                                                      \
 968   c2_nonstatic_field(CallNode,                 _entry_point,                                  address)                               \
 969                                                                                                                                      \
 970   c2_nonstatic_field(CallJavaNode,             _method,                                       ciMethod*)                             \
 971                                                                                                                                      \
 972   c2_nonstatic_field(CallRuntimeNode,          _name,                                         const char*)                           \
 973                                                                                                                                      \
 974   c2_nonstatic_field(CallStaticJavaNode,       _name,                                         const char*)                           \
 975                                                                                                                                      \
 976   c2_nonstatic_field(MachCallJavaNode,         _method,                                       ciMethod*)                             \
 977   c2_nonstatic_field(MachCallJavaNode,         _bci,                                          int)                                   \
 978                                                                                                                                      \
 979   c2_nonstatic_field(MachCallStaticJavaNode,   _name,                                         const char*)                           \
 980                                                                                                                                      \
 981   c2_nonstatic_field(MachCallRuntimeNode,      _name,                                         const char*)                           \
 982                                                                                                                                      \
 983   c2_nonstatic_field(PhaseCFG,                 _number_of_blocks,                             uint)                                  \
 984   c2_nonstatic_field(PhaseCFG,                 _blocks,                                       Block_List)                            \
 985   c2_nonstatic_field(PhaseCFG,                 _node_to_block_mapping,                        Block_Array)                           \
 986   c2_nonstatic_field(PhaseCFG,                 _root_block,                                   Block*)                                \
 987                                                                                                                                      \
 988   c2_nonstatic_field(PhaseRegAlloc,            _node_regs,                                    OptoRegPair*)                          \
 989   c2_nonstatic_field(PhaseRegAlloc,            _node_regs_max_index,                          uint)                                  \
 990   c2_nonstatic_field(PhaseRegAlloc,            _framesize,                                    uint)                                  \
 991   c2_nonstatic_field(PhaseRegAlloc,            _max_reg,                                      OptoReg::Name)                         \
 992                                                                                                                                      \
 993   c2_nonstatic_field(PhaseChaitin,             _trip_cnt,                                     int)                                   \
 994   c2_nonstatic_field(PhaseChaitin,             _alternate,                                    int)                                   \
 995   c2_nonstatic_field(PhaseChaitin,             _lo_degree,                                    uint)                                  \
 996   c2_nonstatic_field(PhaseChaitin,             _lo_stk_degree,                                uint)                                  \
 997   c2_nonstatic_field(PhaseChaitin,             _hi_degree,                                    uint)                                  \
 998   c2_nonstatic_field(PhaseChaitin,             _simplified,                                   uint)                                  \
 999                                                                                                                                      \
1000   c2_nonstatic_field(Block,                    _nodes,                                        Node_List)                             \
1001   c2_nonstatic_field(Block,                    _succs,                                        Block_Array)                           \
1002   c2_nonstatic_field(Block,                    _num_succs,                                    uint)                                  \
1003   c2_nonstatic_field(Block,                    _pre_order,                                    uint)                                  \
1004   c2_nonstatic_field(Block,                    _dom_depth,                                    uint)                                  \
1005   c2_nonstatic_field(Block,                    _idom,                                         Block*)                                \
1006   c2_nonstatic_field(Block,                    _freq,                                         jdouble)                               \
1007                                                                                                                                      \
1008   c2_nonstatic_field(CFGElement,               _freq,                                         jdouble)                               \
1009                                                                                                                                      \
1010   c2_nonstatic_field(Block_List,               _cnt,                                          uint)                                  \
1011                                                                                                                                      \
1012   c2_nonstatic_field(Block_Array,              _size,                                         uint)                                  \
1013   c2_nonstatic_field(Block_Array,              _blocks,                                       Block**)                               \
1014   c2_nonstatic_field(Block_Array,              _arena,                                        Arena*)                                \
1015                                                                                                                                      \
1016   c2_nonstatic_field(Node_List,                _cnt,                                          uint)                                  \
1017                                                                                                                                      \
1018   c2_nonstatic_field(Node_Array,               _max,                                          uint)                                  \
1019   c2_nonstatic_field(Node_Array,               _nodes,                                        Node**)                                \
1020   c2_nonstatic_field(Node_Array,               _a,                                            Arena*)                                \
1021                                                                                                                                      \
1022                                                                                                                                      \
1023   /*********************/                                                                                                            \
1024   /* -XX flags         */                                                                                                            \
1025   /*********************/                                                                                                            \
1026                                                                                                                                      \
1027   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
1028   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
1029   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*)) /* NOTE: no type */     \
1030   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
1031      static_field(JVMFlag,                     flags,                                         JVMFlag*)                              \
1032      static_field(JVMFlag,                     numFlags,                                      size_t)                                \
1033                                                                                                                                      \
1034   /*************************/                                                                                                        \
1035   /* JDK / VM version info */                                                                                                        \
1036   /*************************/                                                                                                        \
1037                                                                                                                                      \
1038      static_field(Abstract_VM_Version,         _s_vm_release,                                 const char*)                           \
1039      static_field(Abstract_VM_Version,         _s_internal_vm_info_string,                    const char*)                           \
1040      static_field(Abstract_VM_Version,         _features,                                     uint64_t)                              \
1041      static_field(Abstract_VM_Version,         _features_string,                              const char*)                           \
1042      static_field(Abstract_VM_Version,         _vm_major_version,                             int)                                   \
1043      static_field(Abstract_VM_Version,         _vm_minor_version,                             int)                                   \
1044      static_field(Abstract_VM_Version,         _vm_security_version,                          int)                                   \
1045      static_field(Abstract_VM_Version,         _vm_build_number,                              int)                                   \
1046                                                                                                                                      \
1047      static_field(JDK_Version,                 _current,                                      JDK_Version)                           \
1048   nonstatic_field(JDK_Version,                 _major,                                        unsigned char)                         \
1049                                                                                                                                      \
1050   /*************************/                                                                                                        \
1051   /* JVMTI */                                                                                                                        \
1052   /*************************/                                                                                                        \
1053                                                                                                                                      \
1054   JVMTI_STRUCTS(static_field)                                                                                                        \
1055                                                                                                                                      \
1056   /*************/                                                                                                                    \
1057   /* Arguments */                                                                                                                    \
1058   /*************/                                                                                                                    \
1059                                                                                                                                      \
1060      static_field(Arguments,                   _jvm_flags_array,                              char**)                                \
1061      static_field(Arguments,                   _num_jvm_flags,                                int)                                   \
1062      static_field(Arguments,                   _jvm_args_array,                               char**)                                \
1063      static_field(Arguments,                   _num_jvm_args,                                 int)                                   \
1064      static_field(Arguments,                   _java_command,                                 char*)                                 \
1065                                                                                                                                      \
1066   /************/                                                                                                                     \
1067   /* Array&lt;T&gt; */                                                                                                                     \
1068   /************/                                                                                                                     \
1069                                                                                                                                      \
1070   nonstatic_field(Array&lt;int&gt;,                  _length,                                       int)                                   \
1071   unchecked_nonstatic_field(Array&lt;int&gt;,        _data,                                         sizeof(int))                           \
1072   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                         sizeof(u1))                            \
1073   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1074   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1075   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1076                                                                                                                                      \
1077   /*********************************/                                                                                                \
1078   /* java_lang_Class fields        */                                                                                                \
1079   /*********************************/                                                                                                \
1080                                                                                                                                      \
1081      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1082      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1083      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1084      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1085                                                                                                                                      \
1086   /********************************************/                                                                                     \
1087   /* FileMapInfo fields (CDS archive related) */                                                                                     \
1088   /********************************************/                                                                                     \
1089                                                                                                                                      \
1090   CDS_ONLY(nonstatic_field(FileMapInfo,        _header,                   FileMapHeader*))                                           \
1091   CDS_ONLY(   static_field(FileMapInfo,        _current_info,             FileMapInfo*))                                             \
1092   CDS_ONLY(nonstatic_field(FileMapHeader,      _space[0],                 CDSFileMapRegion))                                         \
<a name="22" id="anc22"></a><span class="line-modified">1093   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _addr._base,               char*))                                                    \</span>


1094   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _used,                     size_t))                                                   \
1095                                                                                                                                      \
1096   /******************/                                                                                                               \
1097   /* VMError fields */                                                                                                               \
1098   /******************/                                                                                                               \
1099                                                                                                                                      \
1100      static_field(VMError,                     _thread,                                       Thread*)                               \
1101                                                                                                                                      \
1102   /************************/                                                                                                         \
1103   /* Miscellaneous fields */                                                                                                         \
1104   /************************/                                                                                                         \
1105                                                                                                                                      \
1106   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1107   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1108   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1109   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1110   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1111   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1112   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1113                                                                                                                                      \
1114   nonstatic_field(vframeArray,                 _next,                                         vframeArray*)                          \
1115   nonstatic_field(vframeArray,                 _original,                                     frame)                                 \
1116   nonstatic_field(vframeArray,                 _caller,                                       frame)                                 \
1117   nonstatic_field(vframeArray,                 _frames,                                       int)                                   \
1118                                                                                                                                      \
1119   nonstatic_field(vframeArrayElement,          _frame,                                        frame)                                 \
1120   nonstatic_field(vframeArrayElement,          _bci,                                          int)                                   \
1121   nonstatic_field(vframeArrayElement,          _method,                                       Method*)                               \
1122                                                                                                                                      \
1123   nonstatic_field(AccessFlags,                 _flags,                                        jint)                                  \
1124   nonstatic_field(elapsedTimer,                _counter,                                      jlong)                                 \
1125   nonstatic_field(elapsedTimer,                _active,                                       bool)                                  \
1126   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)
1127 
1128 //--------------------------------------------------------------------------------
1129 // VM_TYPES
1130 //
1131 // This list must enumerate at least all of the types in the above
1132 // list. For the types in the above list, the entry below must have
1133 // exactly the same spacing since string comparisons are done in the
1134 // code which verifies the consistency of these tables (in the debug
1135 // build).
1136 //
1137 // In addition to the above types, this list is required to enumerate
1138 // the JNI&#39;s java types, which are used to indicate the size of Java
1139 // fields in this VM to the SA. Further, oop types are currently
1140 // distinguished by name (i.e., ends with &quot;oop&quot;) over in the SA.
1141 //
1142 // The declare_toplevel_type macro should be used to declare types
1143 // which do not have a superclass.
1144 //
1145 // The declare_integer_type and declare_unsigned_integer_type macros
1146 // are required in order to properly identify C integer types over in
1147 // the SA. They should be used for any type which is otherwise opaque
1148 // and which it is necessary to coerce into an integer value. This
1149 // includes, for example, the type uintptr_t. Note that while they
1150 // will properly identify the type&#39;s size regardless of the platform,
1151 // since it is does not seem possible to deduce or check signedness at
1152 // compile time using the pointer comparison tricks, it is currently
1153 // required that the given types have the same signedness across all
1154 // platforms.
1155 //
1156 // NOTE that there are platform-specific additions to this table in
1157 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
1158 
1159 #define VM_TYPES(declare_type,                                            \
1160                  declare_toplevel_type,                                   \
1161                  declare_oop_type,                                        \
1162                  declare_integer_type,                                    \
1163                  declare_unsigned_integer_type,                           \
1164                  declare_c1_toplevel_type,                                \
1165                  declare_c2_type,                                         \
1166                  declare_c2_toplevel_type)                                \
1167                                                                           \
1168   /*************************************************************/         \
1169   /* Java primitive types -- required by the SA implementation */         \
1170   /* in order to determine the size of Java fields in this VM  */         \
1171   /* (the implementation looks up these names specifically)    */         \
1172   /* NOTE: since we fetch these sizes from the remote VM, we   */         \
1173   /* have a bootstrapping sequence during which it is not      */         \
1174   /* valid to fetch Java values from the remote process, only  */         \
1175   /* C integer values (of known size). NOTE also that we do    */         \
1176   /* NOT include &quot;Java unsigned&quot; types like juint here; since  */         \
1177   /* Java does not have unsigned primitive types, those can    */         \
1178   /* not be mapped directly and are considered to be C integer */         \
1179   /* types in this system (see the &quot;other types&quot; section,      */         \
1180   /* below.)                                                   */         \
1181   /*************************************************************/         \
1182                                                                           \
1183   declare_toplevel_type(jboolean)                                         \
1184   declare_toplevel_type(jbyte)                                            \
1185   declare_toplevel_type(jchar)                                            \
1186   declare_toplevel_type(jdouble)                                          \
1187   declare_toplevel_type(jfloat)                                           \
1188   declare_toplevel_type(jint)                                             \
1189   declare_toplevel_type(jlong)                                            \
1190   declare_toplevel_type(jshort)                                           \
1191                                                                           \
1192   /*********************************************************************/ \
1193   /* C integer types. User-defined typedefs (like &quot;size_t&quot; or          */ \
1194   /* &quot;intptr_t&quot;) are guaranteed to be present with the same names over */ \
1195   /* in the SA&#39;s type database. Names like &quot;unsigned short&quot; are not    */ \
1196   /* guaranteed to be visible through the SA&#39;s type database lookup    */ \
1197   /* mechanism, though they will have a Type object created for them   */ \
1198   /* and are valid types for Fields.                                   */ \
1199   /*********************************************************************/ \
1200   declare_integer_type(bool)                                              \
1201   declare_integer_type(short)                                             \
1202   declare_integer_type(int)                                               \
1203   declare_integer_type(long)                                              \
1204   declare_integer_type(char)                                              \
1205   declare_integer_type(volatile signed char)                              \
1206   declare_unsigned_integer_type(unsigned char)                            \
1207   declare_unsigned_integer_type(u_char)                                   \
1208   declare_unsigned_integer_type(unsigned int)                             \
1209   declare_unsigned_integer_type(uint)                                     \
1210   declare_unsigned_integer_type(unsigned short)                           \
1211   declare_unsigned_integer_type(jushort)                                  \
1212   declare_unsigned_integer_type(unsigned long)                            \
1213   /* The compiler thinks this is a different type than */                 \
1214   /* unsigned short on Win32 */                                           \
1215   declare_unsigned_integer_type(u1)                                       \
1216   declare_unsigned_integer_type(u2)                                       \
1217   declare_unsigned_integer_type(u4)                                       \
1218   declare_unsigned_integer_type(u8)                                       \
1219   declare_unsigned_integer_type(unsigned)                                 \
1220                                                                           \
1221   /*****************************/                                         \
1222   /* C primitive pointer types */                                         \
1223   /*****************************/                                         \
1224                                                                           \
1225   declare_toplevel_type(void*)                                            \
1226   declare_toplevel_type(int*)                                             \
1227   declare_toplevel_type(char*)                                            \
1228   declare_toplevel_type(char**)                                           \
1229   declare_toplevel_type(u_char*)                                          \
1230   declare_toplevel_type(unsigned char*)                                   \
1231   declare_toplevel_type(volatile unsigned char*)                          \
1232                                                                           \
1233   /*******************************************************************/   \
1234   /* Types which it will be handy to have available over in the SA   */   \
1235   /* in order to do platform-independent address -&gt; integer coercion */   \
1236   /* (note: these will be looked up by name)                         */   \
1237   /*******************************************************************/   \
1238                                                                           \
1239   declare_unsigned_integer_type(size_t)                                   \
1240   declare_integer_type(ssize_t)                                           \
1241   declare_integer_type(intx)                                              \
1242   declare_integer_type(intptr_t)                                          \
1243   declare_unsigned_integer_type(uintx)                                    \
1244   declare_unsigned_integer_type(uintptr_t)                                \
1245   declare_unsigned_integer_type(uint8_t)                                  \
1246   declare_unsigned_integer_type(uint32_t)                                 \
1247   declare_unsigned_integer_type(uint64_t)                                 \
1248                                                                           \
1249   /******************************************/                            \
1250   /* OopDesc hierarchy (NOTE: some missing) */                            \
1251   /******************************************/                            \
1252                                                                           \
1253   declare_toplevel_type(oopDesc)                                          \
1254     declare_type(arrayOopDesc, oopDesc)                                   \
1255       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1256     declare_type(instanceOopDesc, oopDesc)                                \
<a name="23" id="anc23"></a><span class="line-removed">1257     declare_type(markOopDesc, oopDesc)                                    \</span>
1258                                                                           \
1259   /**************************************************/                    \
1260   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1261   /**************************************************/                    \
1262                                                                           \
1263   declare_toplevel_type(CompiledICHolder)                                 \
1264   declare_toplevel_type(MetaspaceObj)                                     \
1265     declare_type(Metadata, MetaspaceObj)                                  \
1266     declare_type(Klass, Metadata)                                         \
1267            declare_type(ArrayKlass, Klass)                                \
1268            declare_type(ObjArrayKlass, ArrayKlass)                        \
1269            declare_type(TypeArrayKlass, ArrayKlass)                       \
1270       declare_type(InstanceKlass, Klass)                                  \
1271         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1272         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1273         declare_type(InstanceRefKlass, InstanceKlass)                     \
1274     declare_type(ConstantPool, Metadata)                                  \
1275     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1276     declare_type(MethodData, Metadata)                                    \
1277     declare_type(Method, Metadata)                                        \
1278     declare_type(MethodCounters, MetaspaceObj)                            \
1279     declare_type(ConstMethod, MetaspaceObj)                               \
1280                                                                           \
1281   declare_toplevel_type(narrowKlass)                                      \
1282                                                                           \
1283   declare_toplevel_type(vtableEntry)                                      \
1284                                                                           \
1285            declare_toplevel_type(Symbol)                                  \
1286            declare_toplevel_type(Symbol*)                                 \
1287   declare_toplevel_type(volatile Metadata*)                               \
1288                                                                           \
1289   declare_toplevel_type(DataLayout)                                       \
1290                                                                           \
1291   /********/                                                              \
1292   /* Oops */                                                              \
1293   /********/                                                              \
1294                                                                           \
<a name="24" id="anc24"></a><span class="line-removed">1295   declare_oop_type(markOop)                                               \</span>
1296   declare_oop_type(objArrayOop)                                           \
1297   declare_oop_type(oop)                                                   \
1298   declare_oop_type(narrowOop)                                             \
1299   declare_oop_type(typeArrayOop)                                          \
1300                                                                           \
1301   declare_toplevel_type(OopHandle)                                        \
1302                                                                           \
1303   /*************************************/                                 \
1304   /* MethodOop-related data structures */                                 \
1305   /*************************************/                                 \
1306                                                                           \
1307   declare_toplevel_type(CheckedExceptionElement)                          \
1308   declare_toplevel_type(LocalVariableTableElement)                        \
1309   declare_toplevel_type(ExceptionTableElement)                            \
1310   declare_toplevel_type(MethodParametersElement)                          \
1311                                                                           \
1312   declare_toplevel_type(ClassLoaderData)                                  \
1313   declare_toplevel_type(ClassLoaderDataGraph)                             \
1314                                                                           \
1315   /************************/                                              \
1316   /* PerfMemory - jvmstat */                                              \
1317   /************************/                                              \
1318                                                                           \
1319   declare_toplevel_type(PerfDataPrologue)                                 \
1320   declare_toplevel_type(PerfDataPrologue*)                                \
1321   declare_toplevel_type(PerfDataEntry)                                    \
1322   declare_toplevel_type(PerfMemory)                                       \
1323   declare_type(PerfData, CHeapObj&lt;mtInternal&gt;)                            \
1324                                                                           \
1325   /********************/                                                  \
1326   /* SystemDictionary */                                                  \
1327   /********************/                                                  \
1328                                                                           \
1329   declare_toplevel_type(BasicHashtable&lt;mtInternal&gt;)                       \
1330     declare_type(IntptrHashtable, BasicHashtable&lt;mtInternal&gt;)             \
1331   declare_toplevel_type(BasicHashtable&lt;mtSymbol&gt;)                         \
1332     declare_type(Dictionary, KlassHashtable)                              \
1333   declare_toplevel_type(BasicHashtableEntry&lt;mtInternal&gt;)                  \
1334   declare_type(IntptrHashtableEntry, BasicHashtableEntry&lt;mtInternal&gt;)     \
1335     declare_type(DictionaryEntry, KlassHashtableEntry)                    \
1336   declare_toplevel_type(HashtableBucket&lt;mtInternal&gt;)                      \
1337   declare_toplevel_type(SystemDictionary)                                 \
1338   declare_toplevel_type(vmSymbols)                                        \
1339                                                                           \
1340   declare_toplevel_type(GenericGrowableArray)                             \
1341   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1342   declare_toplevel_type(Arena)                                            \
1343     declare_type(ResourceArea, Arena)                                     \
1344                                                                           \
1345   /***********************************************************/           \
1346   /* Thread hierarchy (needed for run-time type information) */           \
1347   /***********************************************************/           \
1348                                                                           \
1349   declare_toplevel_type(Threads)                                          \
1350   declare_toplevel_type(ThreadShadow)                                     \
1351     declare_type(Thread, ThreadShadow)                                    \
1352       declare_type(NonJavaThread, Thread)                                 \
1353         declare_type(NamedThread, NonJavaThread)                          \
1354         declare_type(WatcherThread, NonJavaThread)                        \
1355       declare_type(JavaThread, Thread)                                    \
1356         declare_type(JvmtiAgentThread, JavaThread)                        \
1357         declare_type(ServiceThread, JavaThread)                           \
<a name="25" id="anc25"></a>
1358         declare_type(CompilerThread, JavaThread)                          \
1359         declare_type(CodeCacheSweeperThread, JavaThread)                  \
1360   declare_toplevel_type(OSThread)                                         \
1361   declare_toplevel_type(JavaFrameAnchor)                                  \
1362                                                                           \
<a name="26" id="anc26"></a>


1363   /***************/                                                       \
1364   /* Interpreter */                                                       \
1365   /***************/                                                       \
1366                                                                           \
1367   declare_toplevel_type(AbstractInterpreter)                              \
1368                                                                           \
1369   /*********/                                                             \
1370   /* Stubs */                                                             \
1371   /*********/                                                             \
1372                                                                           \
1373   declare_toplevel_type(StubQueue)                                        \
1374   declare_toplevel_type(StubRoutines)                                     \
1375   declare_toplevel_type(Stub)                                             \
1376            declare_type(InterpreterCodelet, Stub)                         \
1377                                                                           \
1378   /*************/                                                         \
1379   /* JavaCalls */                                                         \
1380   /*************/                                                         \
1381                                                                           \
1382   declare_toplevel_type(JavaCallWrapper)                                  \
1383                                                                           \
1384   /*************/                                                         \
1385   /* CodeCache */                                                         \
1386   /*************/                                                         \
1387                                                                           \
1388   declare_toplevel_type(CodeCache)                                        \
1389                                                                           \
1390   /************/                                                          \
1391   /* CodeHeap */                                                          \
1392   /************/                                                          \
1393                                                                           \
1394   declare_toplevel_type(CodeHeap)                                         \
1395   declare_toplevel_type(CodeHeap*)                                        \
1396   declare_toplevel_type(HeapBlock)                                        \
1397   declare_toplevel_type(HeapBlock::Header)                                \
1398            declare_type(FreeBlock, HeapBlock)                             \
1399                                                                           \
1400   /*************************************************************/         \
1401   /* CodeBlob hierarchy (needed for run-time type information) */         \
1402   /*************************************************************/         \
1403                                                                           \
1404   declare_toplevel_type(SharedRuntime)                                    \
1405                                                                           \
1406   declare_toplevel_type(CodeBlob)                                         \
1407   declare_type(RuntimeBlob,              CodeBlob)                        \
1408   declare_type(BufferBlob,               RuntimeBlob)                     \
1409   declare_type(AdapterBlob,              BufferBlob)                      \
1410   declare_type(MethodHandlesAdapterBlob, BufferBlob)                      \
1411   declare_type(CompiledMethod,           CodeBlob)                        \
1412   declare_type(nmethod,                  CompiledMethod)                  \
1413   declare_type(RuntimeStub,              RuntimeBlob)                     \
1414   declare_type(SingletonBlob,            RuntimeBlob)                     \
1415   declare_type(SafepointBlob,            SingletonBlob)                   \
1416   declare_type(DeoptimizationBlob,       SingletonBlob)                   \
1417   declare_c2_type(ExceptionBlob,         SingletonBlob)                   \
1418   declare_c2_type(UncommonTrapBlob,      RuntimeBlob)                     \
1419                                                                           \
1420   /***************************************/                               \
1421   /* PcDesc and other compiled code info */                               \
1422   /***************************************/                               \
1423                                                                           \
1424   declare_toplevel_type(PcDesc)                                           \
1425   declare_toplevel_type(ExceptionCache)                                   \
1426   declare_toplevel_type(PcDescCache)                                      \
1427   declare_toplevel_type(Dependencies)                                     \
1428   declare_toplevel_type(CompileTask)                                      \
1429   declare_toplevel_type(Deoptimization)                                   \
1430   declare_toplevel_type(Deoptimization::UnrollBlock)                      \
1431                                                                           \
1432   /************************/                                              \
1433   /* OopMap and OopMapSet */                                              \
1434   /************************/                                              \
1435                                                                           \
1436   declare_toplevel_type(OopMap)                                           \
1437   declare_toplevel_type(OopMapSet)                                        \
1438   declare_toplevel_type(ImmutableOopMapSet)                               \
1439   declare_toplevel_type(ImmutableOopMapPair)                              \
1440   declare_toplevel_type(ImmutableOopMap)                                  \
1441                                                                           \
1442   /********************/                                                  \
1443   /* CompressedStream */                                                  \
1444   /********************/                                                  \
1445                                                                           \
1446   declare_toplevel_type(CompressedStream)                                 \
1447                                                                           \
1448   /**************/                                                        \
1449   /* VMRegImpl  */                                                        \
1450   /**************/                                                        \
1451                                                                           \
1452   declare_toplevel_type(VMRegImpl)                                        \
1453                                                                           \
1454   /*********************************/                                     \
1455   /* JNIHandles and JNIHandleBlock */                                     \
1456   /*********************************/                                     \
1457                                                                           \
1458   declare_toplevel_type(JNIHandles)                                       \
1459   declare_toplevel_type(JNIHandleBlock)                                   \
1460   declare_toplevel_type(jobject)                                          \
1461                                                                           \
1462   /**************/                                                        \
1463   /* OopStorage */                                                        \
1464   /**************/                                                        \
1465                                                                           \
1466   declare_toplevel_type(OopStorage)                                       \
1467                                                                           \
1468   /**********************/                                                \
1469   /* Runtime1 (C1 only) */                                                \
1470   /**********************/                                                \
1471                                                                           \
1472   declare_c1_toplevel_type(Runtime1)                                      \
1473                                                                           \
1474   /************/                                                          \
1475   /* Monitors */                                                          \
1476   /************/                                                          \
1477                                                                           \
1478   declare_toplevel_type(ObjectMonitor)                                    \
1479   declare_toplevel_type(PaddedObjectMonitor)                              \
1480   declare_toplevel_type(ObjectSynchronizer)                               \
1481   declare_toplevel_type(BasicLock)                                        \
1482   declare_toplevel_type(BasicObjectLock)                                  \
1483                                                                           \
1484   /*********************/                                                 \
1485   /* Matcher (C2 only) */                                                 \
1486   /*********************/                                                 \
1487                                                                           \
1488   declare_c2_toplevel_type(Matcher)                                       \
1489   declare_c2_toplevel_type(Compile)                                       \
1490   declare_c2_toplevel_type(InlineTree)                                    \
1491   declare_c2_toplevel_type(OptoRegPair)                                   \
1492   declare_c2_toplevel_type(JVMState)                                      \
1493   declare_c2_toplevel_type(Phase)                                         \
1494     declare_c2_type(PhaseCFG, Phase)                                      \
1495     declare_c2_type(PhaseRegAlloc, Phase)                                 \
1496     declare_c2_type(PhaseChaitin, PhaseRegAlloc)                          \
1497   declare_c2_toplevel_type(CFGElement)                                    \
1498     declare_c2_type(Block, CFGElement)                                    \
1499   declare_c2_toplevel_type(Block_Array)                                   \
1500     declare_c2_type(Block_List, Block_Array)                              \
1501   declare_c2_toplevel_type(Node_Array)                                    \
1502   declare_c2_type(Node_List, Node_Array)                                  \
1503   declare_c2_type(Unique_Node_List, Node_List)                            \
1504   declare_c2_toplevel_type(Node)                                          \
1505   declare_c2_type(AddNode, Node)                                          \
1506   declare_c2_type(AddINode, AddNode)                                      \
1507   declare_c2_type(AddLNode, AddNode)                                      \
1508   declare_c2_type(AddFNode, AddNode)                                      \
1509   declare_c2_type(AddDNode, AddNode)                                      \
1510   declare_c2_type(AddPNode, Node)                                         \
1511   declare_c2_type(OrINode, AddNode)                                       \
1512   declare_c2_type(OrLNode, AddNode)                                       \
1513   declare_c2_type(XorINode, AddNode)                                      \
1514   declare_c2_type(XorLNode, AddNode)                                      \
1515   declare_c2_type(MaxNode, AddNode)                                       \
1516   declare_c2_type(MaxINode, MaxNode)                                      \
1517   declare_c2_type(MinINode, MaxNode)                                      \
1518   declare_c2_type(MaxFNode, MaxNode)                                      \
1519   declare_c2_type(MinFNode, MaxNode)                                      \
1520   declare_c2_type(MaxDNode, MaxNode)                                      \
1521   declare_c2_type(MinDNode, MaxNode)                                      \
1522   declare_c2_type(StartNode, MultiNode)                                   \
1523   declare_c2_type(StartOSRNode, StartNode)                                \
1524   declare_c2_type(ParmNode, ProjNode)                                     \
1525   declare_c2_type(ReturnNode, Node)                                       \
1526   declare_c2_type(RethrowNode, Node)                                      \
1527   declare_c2_type(TailCallNode, ReturnNode)                               \
1528   declare_c2_type(TailJumpNode, ReturnNode)                               \
1529   declare_c2_type(SafePointNode, MultiNode)                               \
1530   declare_c2_type(CallNode, SafePointNode)                                \
1531   declare_c2_type(CallJavaNode, CallNode)                                 \
1532   declare_c2_type(CallStaticJavaNode, CallJavaNode)                       \
1533   declare_c2_type(CallDynamicJavaNode, CallJavaNode)                      \
1534   declare_c2_type(CallRuntimeNode, CallNode)                              \
1535   declare_c2_type(CallLeafNode, CallRuntimeNode)                          \
1536   declare_c2_type(CallLeafNoFPNode, CallLeafNode)                         \
1537   declare_c2_type(AllocateNode, CallNode)                                 \
1538   declare_c2_type(AllocateArrayNode, AllocateNode)                        \
1539   declare_c2_type(LockNode, AbstractLockNode)                             \
1540   declare_c2_type(UnlockNode, AbstractLockNode)                           \
1541   declare_c2_type(FastLockNode, CmpNode)                                  \
1542   declare_c2_type(FastUnlockNode, CmpNode)                                \
1543   declare_c2_type(RegionNode, Node)                                       \
1544   declare_c2_type(JProjNode, ProjNode)                                    \
1545   declare_c2_type(PhiNode, TypeNode)                                      \
1546   declare_c2_type(GotoNode, Node)                                         \
1547   declare_c2_type(CProjNode, ProjNode)                                    \
1548   declare_c2_type(MultiBranchNode, MultiNode)                             \
1549   declare_c2_type(IfNode, MultiBranchNode)                                \
1550   declare_c2_type(IfTrueNode, CProjNode)                                  \
1551   declare_c2_type(IfFalseNode, CProjNode)                                 \
1552   declare_c2_type(PCTableNode, MultiBranchNode)                           \
1553   declare_c2_type(JumpNode, PCTableNode)                                  \
1554   declare_c2_type(JumpProjNode, JProjNode)                                \
1555   declare_c2_type(CatchNode, PCTableNode)                                 \
1556   declare_c2_type(CatchProjNode, CProjNode)                               \
1557   declare_c2_type(CreateExNode, TypeNode)                                 \
1558   declare_c2_type(ClearArrayNode, Node)                                   \
1559   declare_c2_type(NeverBranchNode, MultiBranchNode)                       \
1560   declare_c2_type(ConNode, TypeNode)                                      \
1561   declare_c2_type(ConINode, ConNode)                                      \
1562   declare_c2_type(ConPNode, ConNode)                                      \
1563   declare_c2_type(ConNNode, ConNode)                                      \
1564   declare_c2_type(ConLNode, ConNode)                                      \
1565   declare_c2_type(ConFNode, ConNode)                                      \
1566   declare_c2_type(ConDNode, ConNode)                                      \
1567   declare_c2_type(BinaryNode, Node)                                       \
1568   declare_c2_type(CMoveNode, TypeNode)                                    \
1569   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1570   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1571   declare_c2_type(CMoveINode, CMoveNode)                                  \
1572   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1573   declare_c2_type(CMovePNode, CMoveNode)                                  \
1574   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1575   declare_c2_type(EncodePNode, TypeNode)                                  \
1576   declare_c2_type(DecodeNNode, TypeNode)                                  \
1577   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1578   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1579   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1580   declare_c2_type(CastIINode, ConstraintCastNode)                         \
<a name="27" id="anc27"></a>
1581   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1582   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1583   declare_c2_type(Conv2BNode, Node)                                       \
1584   declare_c2_type(ConvD2FNode, Node)                                      \
1585   declare_c2_type(ConvD2INode, Node)                                      \
1586   declare_c2_type(ConvD2LNode, Node)                                      \
1587   declare_c2_type(ConvF2DNode, Node)                                      \
1588   declare_c2_type(ConvF2INode, Node)                                      \
1589   declare_c2_type(ConvF2LNode, Node)                                      \
1590   declare_c2_type(ConvI2DNode, Node)                                      \
1591   declare_c2_type(ConvI2FNode, Node)                                      \
1592   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1593   declare_c2_type(ConvL2DNode, Node)                                      \
1594   declare_c2_type(ConvL2FNode, Node)                                      \
1595   declare_c2_type(ConvL2INode, Node)                                      \
1596   declare_c2_type(CastX2PNode, Node)                                      \
1597   declare_c2_type(CastP2XNode, Node)                                      \
1598   declare_c2_type(SetVectMaskINode, Node)                                 \
1599   declare_c2_type(MemBarNode, MultiNode)                                  \
1600   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
1601   declare_c2_type(MemBarReleaseNode, MemBarNode)                          \
1602   declare_c2_type(LoadFenceNode, MemBarNode)                              \
1603   declare_c2_type(StoreFenceNode, MemBarNode)                             \
1604   declare_c2_type(MemBarVolatileNode, MemBarNode)                         \
1605   declare_c2_type(MemBarCPUOrderNode, MemBarNode)                         \
1606   declare_c2_type(OnSpinWaitNode, MemBarNode)                             \
1607   declare_c2_type(InitializeNode, MemBarNode)                             \
1608   declare_c2_type(ThreadLocalNode, Node)                                  \
1609   declare_c2_type(Opaque1Node, Node)                                      \
1610   declare_c2_type(Opaque2Node, Node)                                      \
1611   declare_c2_type(PartialSubtypeCheckNode, Node)                          \
1612   declare_c2_type(MoveI2FNode, Node)                                      \
1613   declare_c2_type(MoveL2DNode, Node)                                      \
1614   declare_c2_type(MoveF2INode, Node)                                      \
1615   declare_c2_type(MoveD2LNode, Node)                                      \
1616   declare_c2_type(DivINode, Node)                                         \
1617   declare_c2_type(DivLNode, Node)                                         \
1618   declare_c2_type(DivFNode, Node)                                         \
1619   declare_c2_type(DivDNode, Node)                                         \
1620   declare_c2_type(ModINode, Node)                                         \
1621   declare_c2_type(ModLNode, Node)                                         \
1622   declare_c2_type(ModFNode, Node)                                         \
1623   declare_c2_type(ModDNode, Node)                                         \
1624   declare_c2_type(DivModNode, MultiNode)                                  \
1625   declare_c2_type(DivModINode, DivModNode)                                \
1626   declare_c2_type(DivModLNode, DivModNode)                                \
1627   declare_c2_type(BoxLockNode, Node)                                      \
1628   declare_c2_type(LoopNode, RegionNode)                                   \
1629   declare_c2_type(CountedLoopNode, LoopNode)                              \
1630   declare_c2_type(CountedLoopEndNode, IfNode)                             \
1631   declare_c2_type(MachNode, Node)                                         \
1632   declare_c2_type(MachIdealNode, MachNode)                                \
1633   declare_c2_type(MachTypeNode, MachNode)                                 \
1634   declare_c2_type(MachBreakpointNode, MachIdealNode)                      \
1635   declare_c2_type(MachUEPNode, MachIdealNode)                             \
1636   declare_c2_type(MachPrologNode, MachIdealNode)                          \
1637   declare_c2_type(MachEpilogNode, MachIdealNode)                          \
1638   declare_c2_type(MachNopNode, MachIdealNode)                             \
1639   declare_c2_type(MachSpillCopyNode, MachIdealNode)                       \
1640   declare_c2_type(MachNullCheckNode, MachIdealNode)                       \
1641   declare_c2_type(MachProjNode, ProjNode)                                 \
1642   declare_c2_type(MachIfNode, MachNode)                                   \
1643   declare_c2_type(MachJumpNode, MachNode)                                 \
1644   declare_c2_type(MachFastLockNode, MachNode)                             \
1645   declare_c2_type(MachReturnNode, MachNode)                               \
1646   declare_c2_type(MachSafePointNode, MachReturnNode)                      \
1647   declare_c2_type(MachCallNode, MachSafePointNode)                        \
1648   declare_c2_type(MachCallJavaNode, MachCallNode)                         \
1649   declare_c2_type(MachCallStaticJavaNode, MachCallJavaNode)               \
1650   declare_c2_type(MachCallDynamicJavaNode, MachCallJavaNode)              \
1651   declare_c2_type(MachCallRuntimeNode, MachCallNode)                      \
1652   declare_c2_type(MachHaltNode, MachReturnNode)                           \
1653   declare_c2_type(MachTempNode, MachNode)                                 \
1654   declare_c2_type(MemNode, Node)                                          \
1655   declare_c2_type(MergeMemNode, Node)                                     \
1656   declare_c2_type(LoadNode, MemNode)                                      \
1657   declare_c2_type(LoadBNode, LoadNode)                                    \
1658   declare_c2_type(LoadUSNode, LoadNode)                                   \
1659   declare_c2_type(LoadINode, LoadNode)                                    \
1660   declare_c2_type(LoadRangeNode, LoadINode)                               \
1661   declare_c2_type(LoadLNode, LoadNode)                                    \
1662   declare_c2_type(LoadL_unalignedNode, LoadLNode)                         \
1663   declare_c2_type(LoadFNode, LoadNode)                                    \
1664   declare_c2_type(LoadDNode, LoadNode)                                    \
1665   declare_c2_type(LoadD_unalignedNode, LoadDNode)                         \
1666   declare_c2_type(LoadPNode, LoadNode)                                    \
1667   declare_c2_type(LoadNNode, LoadNode)                                    \
1668   declare_c2_type(LoadKlassNode, LoadPNode)                               \
1669   declare_c2_type(LoadNKlassNode, LoadNNode)                              \
1670   declare_c2_type(LoadSNode, LoadNode)                                    \
1671   declare_c2_type(StoreNode, MemNode)                                     \
1672   declare_c2_type(StoreBNode, StoreNode)                                  \
1673   declare_c2_type(StoreCNode, StoreNode)                                  \
1674   declare_c2_type(StoreINode, StoreNode)                                  \
1675   declare_c2_type(StoreLNode, StoreNode)                                  \
1676   declare_c2_type(StoreFNode, StoreNode)                                  \
1677   declare_c2_type(StoreDNode, StoreNode)                                  \
1678   declare_c2_type(StorePNode, StoreNode)                                  \
1679   declare_c2_type(StoreNNode, StoreNode)                                  \
1680   declare_c2_type(StoreNKlassNode, StoreNode)                             \
1681   declare_c2_type(StoreCMNode, StoreNode)                                 \
1682   declare_c2_type(LoadPLockedNode, LoadPNode)                             \
1683   declare_c2_type(SCMemProjNode, ProjNode)                                \
1684   declare_c2_type(LoadStoreNode, Node)                                    \
1685   declare_c2_type(StorePConditionalNode, LoadStoreNode)                   \
1686   declare_c2_type(StoreLConditionalNode, LoadStoreNode)                   \
1687   declare_c2_type(CompareAndSwapNode, LoadStoreConditionalNode)           \
1688   declare_c2_type(CompareAndSwapBNode, CompareAndSwapNode)                \
1689   declare_c2_type(CompareAndSwapSNode, CompareAndSwapNode)                \
1690   declare_c2_type(CompareAndSwapLNode, CompareAndSwapNode)                \
1691   declare_c2_type(CompareAndSwapINode, CompareAndSwapNode)                \
1692   declare_c2_type(CompareAndSwapPNode, CompareAndSwapNode)                \
1693   declare_c2_type(CompareAndSwapNNode, CompareAndSwapNode)                \
1694   declare_c2_type(WeakCompareAndSwapBNode, CompareAndSwapNode)            \
1695   declare_c2_type(WeakCompareAndSwapSNode, CompareAndSwapNode)            \
1696   declare_c2_type(WeakCompareAndSwapLNode, CompareAndSwapNode)            \
1697   declare_c2_type(WeakCompareAndSwapINode, CompareAndSwapNode)            \
1698   declare_c2_type(WeakCompareAndSwapPNode, CompareAndSwapNode)            \
1699   declare_c2_type(WeakCompareAndSwapNNode, CompareAndSwapNode)            \
1700   declare_c2_type(CompareAndExchangeNode, LoadStoreNode)                  \
1701   declare_c2_type(CompareAndExchangeBNode, CompareAndExchangeNode)        \
1702   declare_c2_type(CompareAndExchangeSNode, CompareAndExchangeNode)        \
1703   declare_c2_type(CompareAndExchangeLNode, CompareAndExchangeNode)        \
1704   declare_c2_type(CompareAndExchangeINode, CompareAndExchangeNode)        \
1705   declare_c2_type(CompareAndExchangePNode, CompareAndExchangeNode)        \
1706   declare_c2_type(CompareAndExchangeNNode, CompareAndExchangeNode)        \
1707   declare_c2_type(MulNode, Node)                                          \
1708   declare_c2_type(MulINode, MulNode)                                      \
1709   declare_c2_type(MulLNode, MulNode)                                      \
1710   declare_c2_type(MulFNode, MulNode)                                      \
1711   declare_c2_type(MulDNode, MulNode)                                      \
1712   declare_c2_type(MulHiLNode, Node)                                       \
1713   declare_c2_type(AndINode, MulINode)                                     \
1714   declare_c2_type(AndLNode, MulLNode)                                     \
1715   declare_c2_type(LShiftINode, Node)                                      \
1716   declare_c2_type(LShiftLNode, Node)                                      \
1717   declare_c2_type(RShiftINode, Node)                                      \
1718   declare_c2_type(RShiftLNode, Node)                                      \
1719   declare_c2_type(URShiftINode, Node)                                     \
1720   declare_c2_type(URShiftLNode, Node)                                     \
1721   declare_c2_type(MultiNode, Node)                                        \
1722   declare_c2_type(ProjNode, Node)                                         \
1723   declare_c2_type(TypeNode, Node)                                         \
1724   declare_c2_type(NodeHash, StackObj)                                     \
1725   declare_c2_type(RootNode, LoopNode)                                     \
1726   declare_c2_type(HaltNode, Node)                                         \
1727   declare_c2_type(SubNode, Node)                                          \
1728   declare_c2_type(SubINode, SubNode)                                      \
1729   declare_c2_type(SubLNode, SubNode)                                      \
1730   declare_c2_type(SubFPNode, SubNode)                                     \
1731   declare_c2_type(SubFNode, SubFPNode)                                    \
1732   declare_c2_type(SubDNode, SubFPNode)                                    \
1733   declare_c2_type(CmpNode, SubNode)                                       \
1734   declare_c2_type(CmpINode, CmpNode)                                      \
1735   declare_c2_type(CmpUNode, CmpNode)                                      \
1736   declare_c2_type(CmpPNode, CmpNode)                                      \
1737   declare_c2_type(CmpNNode, CmpNode)                                      \
1738   declare_c2_type(CmpLNode, CmpNode)                                      \
1739   declare_c2_type(CmpULNode, CmpNode)                                     \
1740   declare_c2_type(CmpL3Node, CmpLNode)                                    \
1741   declare_c2_type(CmpFNode, CmpNode)                                      \
1742   declare_c2_type(CmpF3Node, CmpFNode)                                    \
1743   declare_c2_type(CmpDNode, CmpNode)                                      \
1744   declare_c2_type(CmpD3Node, CmpDNode)                                    \
1745   declare_c2_type(BoolNode, Node)                                         \
1746   declare_c2_type(AbsNode, Node)                                          \
1747   declare_c2_type(AbsINode, AbsNode)                                      \
1748   declare_c2_type(AbsFNode, AbsNode)                                      \
1749   declare_c2_type(AbsDNode, AbsNode)                                      \
1750   declare_c2_type(CmpLTMaskNode, Node)                                    \
1751   declare_c2_type(NegNode, Node)                                          \
1752   declare_c2_type(NegFNode, NegNode)                                      \
1753   declare_c2_type(NegDNode, NegNode)                                      \
1754   declare_c2_type(AtanDNode, Node)                                        \
1755   declare_c2_type(SqrtFNode, Node)                                        \
1756   declare_c2_type(SqrtDNode, Node)                                        \
1757   declare_c2_type(ReverseBytesINode, Node)                                \
1758   declare_c2_type(ReverseBytesLNode, Node)                                \
1759   declare_c2_type(ReductionNode, Node)                                    \
1760   declare_c2_type(VectorNode, Node)                                       \
<a name="28" id="anc28"></a>



1761   declare_c2_type(AddVBNode, VectorNode)                                  \
1762   declare_c2_type(AddVSNode, VectorNode)                                  \
1763   declare_c2_type(AddVINode, VectorNode)                                  \
1764   declare_c2_type(AddReductionVINode, ReductionNode)                      \
1765   declare_c2_type(AddVLNode, VectorNode)                                  \
1766   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
1767   declare_c2_type(AddVFNode, VectorNode)                                  \
1768   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
1769   declare_c2_type(AddVDNode, VectorNode)                                  \
1770   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
1771   declare_c2_type(SubVBNode, VectorNode)                                  \
1772   declare_c2_type(SubVSNode, VectorNode)                                  \
1773   declare_c2_type(SubVINode, VectorNode)                                  \
1774   declare_c2_type(SubVLNode, VectorNode)                                  \
1775   declare_c2_type(SubVFNode, VectorNode)                                  \
1776   declare_c2_type(SubVDNode, VectorNode)                                  \
<a name="29" id="anc29"></a>
1777   declare_c2_type(MulVSNode, VectorNode)                                  \
1778   declare_c2_type(MulVLNode, VectorNode)                                  \
1779   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
1780   declare_c2_type(MulVINode, VectorNode)                                  \
1781   declare_c2_type(MulReductionVINode, ReductionNode)                      \
1782   declare_c2_type(MulVFNode, VectorNode)                                  \
1783   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
1784   declare_c2_type(MulVDNode, VectorNode)                                  \
<a name="30" id="anc30"></a>

1785   declare_c2_type(FmaVDNode, VectorNode)                                  \
1786   declare_c2_type(FmaVFNode, VectorNode)                                  \
1787   declare_c2_type(CMoveVFNode, VectorNode)                                \
1788   declare_c2_type(CMoveVDNode, VectorNode)                                \
1789   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
1790   declare_c2_type(DivVFNode, VectorNode)                                  \
1791   declare_c2_type(DivVDNode, VectorNode)                                  \
1792   declare_c2_type(PopCountVINode, VectorNode)                             \
1793   declare_c2_type(LShiftVBNode, VectorNode)                               \
1794   declare_c2_type(LShiftVSNode, VectorNode)                               \
1795   declare_c2_type(LShiftVINode, VectorNode)                               \
1796   declare_c2_type(LShiftVLNode, VectorNode)                               \
1797   declare_c2_type(RShiftVBNode, VectorNode)                               \
1798   declare_c2_type(RShiftVSNode, VectorNode)                               \
1799   declare_c2_type(RShiftVINode, VectorNode)                               \
1800   declare_c2_type(RShiftVLNode, VectorNode)                               \
1801   declare_c2_type(URShiftVBNode, VectorNode)                              \
1802   declare_c2_type(URShiftVSNode, VectorNode)                              \
1803   declare_c2_type(URShiftVINode, VectorNode)                              \
1804   declare_c2_type(URShiftVLNode, VectorNode)                              \
1805   declare_c2_type(AndVNode, VectorNode)                                   \
1806   declare_c2_type(OrVNode, VectorNode)                                    \
1807   declare_c2_type(XorVNode, VectorNode)                                   \
1808   declare_c2_type(MaxVNode, VectorNode)                                   \
1809   declare_c2_type(MinVNode, VectorNode)                                   \
1810   declare_c2_type(MaxReductionVNode, ReductionNode)                       \
1811   declare_c2_type(MinReductionVNode, ReductionNode)                       \
1812   declare_c2_type(LoadVectorNode, LoadNode)                               \
1813   declare_c2_type(StoreVectorNode, StoreNode)                             \
1814   declare_c2_type(ReplicateBNode, VectorNode)                             \
1815   declare_c2_type(ReplicateSNode, VectorNode)                             \
1816   declare_c2_type(ReplicateINode, VectorNode)                             \
1817   declare_c2_type(ReplicateLNode, VectorNode)                             \
1818   declare_c2_type(ReplicateFNode, VectorNode)                             \
1819   declare_c2_type(ReplicateDNode, VectorNode)                             \
1820   declare_c2_type(PackNode, VectorNode)                                   \
1821   declare_c2_type(PackBNode, PackNode)                                    \
1822   declare_c2_type(PackSNode, PackNode)                                    \
1823   declare_c2_type(PackINode, PackNode)                                    \
1824   declare_c2_type(PackLNode, PackNode)                                    \
1825   declare_c2_type(PackFNode, PackNode)                                    \
1826   declare_c2_type(PackDNode, PackNode)                                    \
1827   declare_c2_type(Pack2LNode, PackNode)                                   \
1828   declare_c2_type(Pack2DNode, PackNode)                                   \
1829   declare_c2_type(ExtractNode, Node)                                      \
1830   declare_c2_type(ExtractBNode, ExtractNode)                              \
1831   declare_c2_type(ExtractUBNode, ExtractNode)                             \
1832   declare_c2_type(ExtractCNode, ExtractNode)                              \
1833   declare_c2_type(ExtractSNode, ExtractNode)                              \
1834   declare_c2_type(ExtractINode, ExtractNode)                              \
1835   declare_c2_type(ExtractLNode, ExtractNode)                              \
1836   declare_c2_type(ExtractFNode, ExtractNode)                              \
1837   declare_c2_type(ExtractDNode, ExtractNode)                              \
1838   declare_c2_type(OverflowNode, CmpNode)                                  \
1839   declare_c2_type(OverflowINode, OverflowNode)                            \
1840   declare_c2_type(OverflowAddINode, OverflowINode)                        \
1841   declare_c2_type(OverflowSubINode, OverflowINode)                        \
1842   declare_c2_type(OverflowMulINode, OverflowINode)                        \
1843   declare_c2_type(OverflowLNode, OverflowNode)                            \
1844   declare_c2_type(OverflowAddLNode, OverflowLNode)                        \
1845   declare_c2_type(OverflowSubLNode, OverflowLNode)                        \
1846   declare_c2_type(OverflowMulLNode, OverflowLNode)                        \
1847   declare_c2_type(FmaDNode, Node)                                         \
1848   declare_c2_type(FmaFNode, Node)                                         \
1849                                                                           \
1850   /*********************/                                                 \
1851   /* Adapter Blob Entries */                                              \
1852   /*********************/                                                 \
1853   declare_toplevel_type(AdapterHandlerEntry)                              \
1854   declare_toplevel_type(AdapterHandlerEntry*)                             \
1855                                                                           \
1856   /*********************/                                                 \
1857   /* CI */                                                                \
1858   /*********************/                                                 \
1859   declare_toplevel_type(ciEnv)                                            \
1860   declare_toplevel_type(ciObjectFactory)                                  \
1861   declare_toplevel_type(ciConstant)                                       \
1862   declare_toplevel_type(ciField)                                          \
1863   declare_toplevel_type(ciSymbol)                                         \
1864   declare_toplevel_type(ciBaseObject)                                     \
1865   declare_type(ciObject, ciBaseObject)                                    \
1866   declare_type(ciInstance, ciObject)                                      \
1867   declare_type(ciMetadata, ciBaseObject)                                  \
1868   declare_type(ciMethod, ciMetadata)                                      \
1869   declare_type(ciMethodData, ciMetadata)                                  \
1870   declare_type(ciType, ciMetadata)                                        \
1871   declare_type(ciKlass, ciType)                                           \
1872   declare_type(ciInstanceKlass, ciKlass)                                  \
1873   declare_type(ciArrayKlass, ciKlass)                                     \
1874   declare_type(ciTypeArrayKlass, ciArrayKlass)                            \
1875   declare_type(ciObjArrayKlass, ciArrayKlass)                             \
1876                                                                           \
1877   /********************/                                                  \
1878   /* -XX flags        */                                                  \
1879   /********************/                                                  \
1880                                                                           \
1881   declare_toplevel_type(JVMFlag)                                          \
1882   declare_toplevel_type(JVMFlag*)                                         \
1883                                                                           \
1884   /********************/                                                  \
1885   /* JVMTI            */                                                  \
1886   /********************/                                                  \
1887                                                                           \
1888   declare_toplevel_type(JvmtiExport)                                      \
1889                                                                           \
1890   /********************/                                                  \
1891   /* JDK/VM version   */                                                  \
1892   /********************/                                                  \
1893                                                                           \
1894   declare_toplevel_type(Abstract_VM_Version)                              \
1895   declare_toplevel_type(JDK_Version)                                      \
1896                                                                           \
1897   /*************/                                                         \
1898   /* Arguments */                                                         \
1899   /*************/                                                         \
1900                                                                           \
1901   declare_toplevel_type(Arguments)                                        \
1902                                                                           \
1903   /***********/                                                           \
1904   /* VMError */                                                           \
1905   /***********/                                                           \
1906                                                                           \
1907   declare_toplevel_type(VMError)                                          \
1908                                                                           \
1909   /***************/                                                       \
1910   /* Other types */                                                       \
1911   /***************/                                                       \
1912                                                                           \
1913   /* all enum types */                                                    \
1914                                                                           \
1915    declare_integer_type(Bytecodes::Code)                                  \
1916    declare_integer_type(Generation::Name)                                 \
1917    declare_integer_type(InstanceKlass::ClassState)                        \
1918    declare_integer_type(JavaThreadState)                                  \
1919    declare_integer_type(ThreadState)                                      \
1920    declare_integer_type(Location::Type)                                   \
1921    declare_integer_type(Location::Where)                                  \
1922    declare_integer_type(JVMFlag::Flags)                                   \
1923    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
1924                                                                           \
1925    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
1926             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
1927             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
1928             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
1929             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
1930             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
1931                                                                           \
1932    declare_toplevel_type(BitMap)                                          \
1933             declare_type(BitMapView, BitMap)                              \
1934                                                                           \
<a name="31" id="anc31"></a><span class="line-modified">1935    declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\</span>

1936   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
<a name="32" id="anc32"></a><span class="line-modified">1937    declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */\</span>
1938   declare_toplevel_type(BreakpointInfo)                                   \
1939   declare_toplevel_type(BreakpointInfo*)                                  \
1940   declare_toplevel_type(CodeBlob*)                                        \
1941   declare_toplevel_type(RuntimeBlob*)                                     \
1942   declare_toplevel_type(CompressedWriteStream*)                           \
1943   declare_toplevel_type(ConstantPoolCacheEntry)                           \
1944   declare_toplevel_type(elapsedTimer)                                     \
1945   declare_toplevel_type(frame)                                            \
1946   declare_toplevel_type(intptr_t*)                                        \
1947    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
1948   declare_toplevel_type(JavaThread*)                                      \
<a name="33" id="anc33"></a>
1949   declare_toplevel_type(java_lang_Class)                                  \
1950   declare_integer_type(JavaThread::AsyncRequests)                         \
1951   declare_integer_type(JavaThread::TerminatedTypes)                       \
1952   declare_toplevel_type(jbyte*)                                           \
1953   declare_toplevel_type(jbyte**)                                          \
1954   declare_toplevel_type(jint*)                                            \
1955   declare_toplevel_type(jniIdMapBase*)                                    \
1956   declare_unsigned_integer_type(juint)                                    \
1957   declare_unsigned_integer_type(julong)                                   \
1958   declare_toplevel_type(JNIHandleBlock*)                                  \
1959   declare_toplevel_type(JNIid)                                            \
1960   declare_toplevel_type(JNIid*)                                           \
1961   declare_toplevel_type(jmethodID*)                                       \
1962   declare_toplevel_type(Mutex*)                                           \
1963   declare_toplevel_type(nmethod*)                                         \
1964   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
1965   declare_toplevel_type(ObjectMonitor*)                                   \
1966   declare_toplevel_type(PaddedObjectMonitor*)                             \
1967   declare_toplevel_type(oop*)                                             \
1968   declare_toplevel_type(OopMap**)                                         \
1969   declare_toplevel_type(OopMapCache*)                                     \
1970   declare_toplevel_type(OopMapSet*)                                       \
1971   declare_toplevel_type(VMReg)                                            \
1972   declare_toplevel_type(OSThread*)                                        \
1973    declare_integer_type(ReferenceType)                                    \
1974   declare_toplevel_type(StubQueue*)                                       \
1975   declare_toplevel_type(Thread*)                                          \
1976   declare_toplevel_type(Universe)                                         \
<a name="34" id="anc34"></a>

1977   declare_toplevel_type(os)                                               \
1978   declare_toplevel_type(vframeArray)                                      \
1979   declare_toplevel_type(vframeArrayElement)                               \
1980   declare_toplevel_type(Annotations*)                                     \
1981   declare_type(OopMapValue, StackObj)                                     \
1982   declare_type(FileMapInfo, CHeapObj&lt;mtInternal&gt;)                         \
1983   declare_toplevel_type(FileMapHeader)                                    \
1984   declare_toplevel_type(CDSFileMapRegion)                                 \
1985                                                                           \
1986   /************/                                                          \
1987   /* GC types */                                                          \
1988   /************/                                                          \
1989                                                                           \
1990   VM_TYPES_GC(declare_type,                                               \
1991               declare_toplevel_type,                                      \
1992               declare_integer_type)
1993 
1994 //--------------------------------------------------------------------------------
1995 // VM_INT_CONSTANTS
1996 //
1997 // This table contains integer constants required over in the
1998 // serviceability agent. The &quot;declare_constant&quot; macro is used for all
1999 // enums, etc., while &quot;declare_preprocessor_constant&quot; must be used for
2000 // all #defined constants.
2001 
2002 #define VM_INT_CONSTANTS(declare_constant,                                \
2003                          declare_constant_with_value,                     \
2004                          declare_preprocessor_constant,                   \
2005                          declare_c1_constant,                             \
2006                          declare_c2_constant,                             \
2007                          declare_c2_preprocessor_constant)                \
2008                                                                           \
2009   /****************/                                                      \
2010   /* GC constants */                                                      \
2011   /****************/                                                      \
2012                                                                           \
2013   VM_INT_CONSTANTS_GC(declare_constant,                                   \
2014                       declare_constant_with_value)                        \
2015                                                                           \
2016   /******************/                                                    \
2017   /* Useful globals */                                                    \
2018   /******************/                                                    \
2019                                                                           \
2020   declare_preprocessor_constant(&quot;ASSERT&quot;, DEBUG_ONLY(1) NOT_DEBUG(0))     \
2021                                                                           \
2022   /**************/                                                        \
2023   /* Stack bias */                                                        \
2024   /**************/                                                        \
2025                                                                           \
2026   declare_preprocessor_constant(&quot;STACK_BIAS&quot;, STACK_BIAS)                 \
2027                                                                           \
2028   /****************/                                                      \
2029   /* Object sizes */                                                      \
2030   /****************/                                                      \
2031                                                                           \
2032   declare_constant(oopSize)                                               \
2033   declare_constant(LogBytesPerWord)                                       \
2034   declare_constant(BytesPerWord)                                          \
2035   declare_constant(BytesPerLong)                                          \
2036                                                                           \
2037   declare_constant(LogKlassAlignmentInBytes)                              \
2038                                                                           \
2039   declare_constant(HeapWordSize)                                          \
2040   declare_constant(LogHeapWordSize)                                       \
2041                                                                           \
2042                                                                           \
2043   /************************/                                              \
2044   /* PerfMemory - jvmstat */                                              \
2045   /************************/                                              \
2046                                                                           \
2047   declare_preprocessor_constant(&quot;PERFDATA_MAJOR_VERSION&quot;, PERFDATA_MAJOR_VERSION) \
2048   declare_preprocessor_constant(&quot;PERFDATA_MINOR_VERSION&quot;, PERFDATA_MINOR_VERSION) \
2049   declare_preprocessor_constant(&quot;PERFDATA_BIG_ENDIAN&quot;, PERFDATA_BIG_ENDIAN)       \
2050   declare_preprocessor_constant(&quot;PERFDATA_LITTLE_ENDIAN&quot;, PERFDATA_LITTLE_ENDIAN) \
2051                                                                           \
2052                                                                           \
2053   /************************************************************/          \
2054   /* HotSpot specific JVM_ACC constants from global anon enum */          \
2055   /************************************************************/          \
2056                                                                           \
2057   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
2058   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
2059   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
2060   declare_constant(JVM_ACC_HAS_LOOPS)                                     \
2061   declare_constant(JVM_ACC_LOOPS_FLAG_INIT)                               \
2062   declare_constant(JVM_ACC_QUEUED)                                        \
2063   declare_constant(JVM_ACC_NOT_C2_OSR_COMPILABLE)                         \
2064   declare_constant(JVM_ACC_HAS_LINE_NUMBER_TABLE)                         \
2065   declare_constant(JVM_ACC_HAS_CHECKED_EXCEPTIONS)                        \
2066   declare_constant(JVM_ACC_HAS_JSRS)                                      \
2067   declare_constant(JVM_ACC_IS_OLD)                                        \
2068   declare_constant(JVM_ACC_IS_OBSOLETE)                                   \
2069   declare_constant(JVM_ACC_IS_PREFIXED_NATIVE)                            \
2070   declare_constant(JVM_ACC_HAS_MIRANDA_METHODS)                           \
2071   declare_constant(JVM_ACC_HAS_VANILLA_CONSTRUCTOR)                       \
2072   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
2073   declare_constant(JVM_ACC_IS_CLONEABLE_FAST)                             \
2074   declare_constant(JVM_ACC_HAS_LOCAL_VARIABLE_TABLE)                      \
2075   declare_constant(JVM_ACC_PROMOTED_FLAGS)                                \
2076   declare_constant(JVM_ACC_FIELD_ACCESS_WATCHED)                          \
2077   declare_constant(JVM_ACC_FIELD_MODIFICATION_WATCHED)                    \
2078   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2079   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2080   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2081                                                                           \
2082   declare_constant(JVM_CONSTANT_Utf8)                                     \
2083   declare_constant(JVM_CONSTANT_Unicode)                                  \
2084   declare_constant(JVM_CONSTANT_Integer)                                  \
2085   declare_constant(JVM_CONSTANT_Float)                                    \
2086   declare_constant(JVM_CONSTANT_Long)                                     \
2087   declare_constant(JVM_CONSTANT_Double)                                   \
2088   declare_constant(JVM_CONSTANT_Class)                                    \
2089   declare_constant(JVM_CONSTANT_String)                                   \
2090   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2091   declare_constant(JVM_CONSTANT_Methodref)                                \
2092   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2093   declare_constant(JVM_CONSTANT_NameAndType)                              \
2094   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2095   declare_constant(JVM_CONSTANT_MethodType)                               \
2096   declare_constant(JVM_CONSTANT_Dynamic)                                  \
2097   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
<a name="35" id="anc35"></a>

2098   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2099                                                                           \
2100   declare_constant(JVM_CONSTANT_Invalid)                                  \
2101   declare_constant(JVM_CONSTANT_InternalMin)                              \
2102   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2103   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2104   declare_constant(JVM_CONSTANT_StringIndex)                              \
2105   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2106   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2107   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2108   declare_constant(JVM_CONSTANT_DynamicInError)                           \
2109   declare_constant(JVM_CONSTANT_InternalMax)                              \
2110                                                                           \
2111   /*****************************/                                         \
2112   /* Thread::SuspendFlags enum */                                         \
2113   /*****************************/                                         \
2114                                                                           \
2115   declare_constant(Thread::_external_suspend)                             \
2116   declare_constant(Thread::_ext_suspended)                                \
2117   declare_constant(Thread::_has_async_exception)                          \
2118                                                                           \
2119   /*******************/                                                   \
2120   /* JavaThreadState */                                                   \
2121   /*******************/                                                   \
2122                                                                           \
2123   declare_constant(_thread_uninitialized)                                 \
2124   declare_constant(_thread_new)                                           \
2125   declare_constant(_thread_new_trans)                                     \
2126   declare_constant(_thread_in_native)                                     \
2127   declare_constant(_thread_in_native_trans)                               \
2128   declare_constant(_thread_in_vm)                                         \
2129   declare_constant(_thread_in_vm_trans)                                   \
2130   declare_constant(_thread_in_Java)                                       \
2131   declare_constant(_thread_in_Java_trans)                                 \
2132   declare_constant(_thread_blocked)                                       \
2133   declare_constant(_thread_blocked_trans)                                 \
2134   declare_constant(JavaThread::_not_terminated)                           \
2135   declare_constant(JavaThread::_thread_exiting)                           \
2136                                                                           \
2137   /*******************/                                                   \
2138   /* JavaThreadState */                                                   \
2139   /*******************/                                                   \
2140                                                                           \
2141   declare_constant(ALLOCATED)                                             \
2142   declare_constant(INITIALIZED)                                           \
2143   declare_constant(RUNNABLE)                                              \
2144   declare_constant(MONITOR_WAIT)                                          \
2145   declare_constant(CONDVAR_WAIT)                                          \
2146   declare_constant(OBJECT_WAIT)                                           \
2147   declare_constant(BREAKPOINTED)                                          \
2148   declare_constant(SLEEPING)                                              \
2149   declare_constant(ZOMBIE)                                                \
2150                                                                           \
2151   /******************************/                                        \
2152   /* Klass misc. enum constants */                                        \
2153   /******************************/                                        \
2154                                                                           \
2155   declare_constant(Klass::_primary_super_limit)                           \
2156   declare_constant(Klass::_lh_neutral_value)                              \
2157   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
2158   declare_constant(Klass::_lh_log2_element_size_shift)                    \
2159   declare_constant(Klass::_lh_log2_element_size_mask)                     \
2160   declare_constant(Klass::_lh_element_type_shift)                         \
2161   declare_constant(Klass::_lh_element_type_mask)                          \
2162   declare_constant(Klass::_lh_header_size_shift)                          \
2163   declare_constant(Klass::_lh_header_size_mask)                           \
2164   declare_constant(Klass::_lh_array_tag_shift)                            \
2165   declare_constant(Klass::_lh_array_tag_type_value)                       \
2166   declare_constant(Klass::_lh_array_tag_obj_value)                        \
2167                                                                           \
2168   /********************************/                                      \
2169   /* ConstMethod anon-enum */                                             \
2170   /********************************/                                      \
2171                                                                           \
2172   declare_constant(Method::_caller_sensitive)                             \
2173   declare_constant(Method::_force_inline)                                 \
2174   declare_constant(Method::_dont_inline)                                  \
2175   declare_constant(Method::_hidden)                                       \
2176                                                                           \
2177   declare_constant(Method::nonvirtual_vtable_index)                       \
2178                                                                           \
2179   declare_constant(Method::extra_stack_entries_for_jsr292)                \
2180                                                                           \
2181   declare_constant(ConstMethod::_has_linenumber_table)                    \
2182   declare_constant(ConstMethod::_has_checked_exceptions)                  \
2183   declare_constant(ConstMethod::_has_localvariable_table)                 \
2184   declare_constant(ConstMethod::_has_exception_table)                     \
2185   declare_constant(ConstMethod::_has_generic_signature)                   \
2186   declare_constant(ConstMethod::_has_method_parameters)                   \
2187   declare_constant(ConstMethod::_has_method_annotations)                  \
2188   declare_constant(ConstMethod::_has_parameter_annotations)               \
2189   declare_constant(ConstMethod::_has_default_annotations)                 \
2190   declare_constant(ConstMethod::_has_type_annotations)                    \
2191                                                                           \
2192   /**************/                                                        \
2193   /* DataLayout */                                                        \
2194   /**************/                                                        \
2195                                                                           \
2196   declare_constant(DataLayout::cell_size)                                 \
2197   declare_constant(DataLayout::no_tag)                                    \
2198   declare_constant(DataLayout::bit_data_tag)                              \
2199   declare_constant(DataLayout::counter_data_tag)                          \
2200   declare_constant(DataLayout::jump_data_tag)                             \
2201   declare_constant(DataLayout::receiver_type_data_tag)                    \
2202   declare_constant(DataLayout::virtual_call_data_tag)                     \
2203   declare_constant(DataLayout::ret_data_tag)                              \
2204   declare_constant(DataLayout::branch_data_tag)                           \
2205   declare_constant(DataLayout::multi_branch_data_tag)                     \
2206   declare_constant(DataLayout::arg_info_data_tag)                         \
2207   declare_constant(DataLayout::call_type_data_tag)                        \
2208   declare_constant(DataLayout::virtual_call_type_data_tag)                \
2209   declare_constant(DataLayout::parameters_type_data_tag)                  \
2210   declare_constant(DataLayout::speculative_trap_data_tag)                 \
2211                                                                           \
2212   /*************************************/                                 \
2213   /* InstanceKlass enum                */                                 \
2214   /*************************************/                                 \
2215                                                                           \
2216                                                                           \
2217   /*************************************/                                 \
2218   /* FieldInfo FieldOffset enum        */                                 \
2219   /*************************************/                                 \
2220                                                                           \
2221   declare_constant(FieldInfo::access_flags_offset)                        \
2222   declare_constant(FieldInfo::name_index_offset)                          \
2223   declare_constant(FieldInfo::signature_index_offset)                     \
2224   declare_constant(FieldInfo::initval_index_offset)                       \
2225   declare_constant(FieldInfo::low_packed_offset)                          \
2226   declare_constant(FieldInfo::high_packed_offset)                         \
2227   declare_constant(FieldInfo::field_slots)                                \
2228                                                                           \
2229   /*************************************/                                 \
2230   /* FieldInfo tag constants           */                                 \
2231   /*************************************/                                 \
2232                                                                           \
2233   declare_preprocessor_constant(&quot;FIELDINFO_TAG_SIZE&quot;, FIELDINFO_TAG_SIZE) \
2234   declare_preprocessor_constant(&quot;FIELDINFO_TAG_MASK&quot;, FIELDINFO_TAG_MASK) \
2235   declare_preprocessor_constant(&quot;FIELDINFO_TAG_OFFSET&quot;, FIELDINFO_TAG_OFFSET) \
2236                                                                           \
2237   /************************************************/                      \
2238   /* InstanceKlass InnerClassAttributeOffset enum */                      \
2239   /************************************************/                      \
2240                                                                           \
2241   declare_constant(InstanceKlass::inner_class_inner_class_info_offset)    \
2242   declare_constant(InstanceKlass::inner_class_outer_class_info_offset)    \
2243   declare_constant(InstanceKlass::inner_class_inner_name_offset)          \
2244   declare_constant(InstanceKlass::inner_class_access_flags_offset)        \
2245   declare_constant(InstanceKlass::inner_class_next_offset)                \
2246                                                                           \
2247   /*****************************************************/                 \
2248   /* InstanceKlass EnclosingMethodAttributeOffset enum */                 \
2249   /*****************************************************/                 \
2250                                                                           \
2251   declare_constant(InstanceKlass::enclosing_method_attribute_size)        \
2252                                                                           \
2253   /*********************************/                                     \
2254   /* InstanceKlass ClassState enum */                                     \
2255   /*********************************/                                     \
2256                                                                           \
2257   declare_constant(InstanceKlass::allocated)                              \
2258   declare_constant(InstanceKlass::loaded)                                 \
2259   declare_constant(InstanceKlass::linked)                                 \
2260   declare_constant(InstanceKlass::being_initialized)                      \
2261   declare_constant(InstanceKlass::fully_initialized)                      \
2262   declare_constant(InstanceKlass::initialization_error)                   \
2263                                                                           \
2264   /***************************************/                               \
2265   /* InstanceKlass enums for _misc_flags */                               \
2266   /***************************************/                               \
2267                                                                           \
2268   declare_constant(InstanceKlass::_misc_rewritten)                        \
2269   declare_constant(InstanceKlass::_misc_has_nonstatic_fields)             \
2270   declare_constant(InstanceKlass::_misc_should_verify_class)              \
2271   declare_constant(InstanceKlass::_misc_is_unsafe_anonymous)              \
2272   declare_constant(InstanceKlass::_misc_is_contended)                     \
2273   declare_constant(InstanceKlass::_misc_has_nonstatic_concrete_methods)   \
2274   declare_constant(InstanceKlass::_misc_declares_nonstatic_concrete_methods)\
2275   declare_constant(InstanceKlass::_misc_has_been_redefined)               \
2276   declare_constant(InstanceKlass::_misc_has_passed_fingerprint_check)     \
2277   declare_constant(InstanceKlass::_misc_is_scratch_class)                 \
2278   declare_constant(InstanceKlass::_misc_is_shared_boot_class)             \
2279   declare_constant(InstanceKlass::_misc_is_shared_platform_class)         \
2280   declare_constant(InstanceKlass::_misc_is_shared_app_class)              \
2281                                                                           \
2282   /*********************************/                                     \
2283   /* Symbol* - symbol max length */                                       \
2284   /*********************************/                                     \
2285                                                                           \
2286   declare_constant(Symbol::max_symbol_length)                             \
2287                                                                           \
2288   /***********************************************/                       \
2289   /* ConstantPool* layout enum for InvokeDynamic */                       \
2290   /***********************************************/                       \
2291                                                                           \
2292   declare_constant(ConstantPool::_indy_bsm_offset)                        \
2293   declare_constant(ConstantPool::_indy_argc_offset)                       \
2294   declare_constant(ConstantPool::_indy_argv_offset)                       \
2295   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
2296                                                                           \
2297   /********************************/                                      \
2298   /* ConstantPoolCacheEntry enums */                                      \
2299   /********************************/                                      \
2300                                                                           \
2301   declare_constant(ConstantPoolCacheEntry::is_volatile_shift)             \
2302   declare_constant(ConstantPoolCacheEntry::is_final_shift)                \
2303   declare_constant(ConstantPoolCacheEntry::is_forced_virtual_shift)       \
2304   declare_constant(ConstantPoolCacheEntry::is_vfinal_shift)               \
2305   declare_constant(ConstantPoolCacheEntry::is_field_entry_shift)          \
2306   declare_constant(ConstantPoolCacheEntry::tos_state_shift)               \
2307                                                                           \
2308   /***************************************/                               \
2309   /* java_lang_Thread::ThreadStatus enum */                               \
2310   /***************************************/                               \
2311                                                                           \
2312   declare_constant(java_lang_Thread::NEW)                                 \
2313   declare_constant(java_lang_Thread::RUNNABLE)                            \
2314   declare_constant(java_lang_Thread::SLEEPING)                            \
2315   declare_constant(java_lang_Thread::IN_OBJECT_WAIT)                      \
2316   declare_constant(java_lang_Thread::IN_OBJECT_WAIT_TIMED)                \
2317   declare_constant(java_lang_Thread::PARKED)                              \
2318   declare_constant(java_lang_Thread::PARKED_TIMED)                        \
2319   declare_constant(java_lang_Thread::BLOCKED_ON_MONITOR_ENTER)            \
2320   declare_constant(java_lang_Thread::TERMINATED)                          \
2321                                                                           \
2322   /******************************/                                        \
2323   /* Debug info                 */                                        \
2324   /******************************/                                        \
2325                                                                           \
2326   declare_constant(Location::OFFSET_MASK)                                 \
2327   declare_constant(Location::OFFSET_SHIFT)                                \
2328   declare_constant(Location::TYPE_MASK)                                   \
2329   declare_constant(Location::TYPE_SHIFT)                                  \
2330   declare_constant(Location::WHERE_MASK)                                  \
2331   declare_constant(Location::WHERE_SHIFT)                                 \
2332                                                                           \
2333   /* constants from Location::Type enum  */                               \
2334                                                                           \
2335   declare_constant(Location::normal)                                      \
2336   declare_constant(Location::oop)                                         \
2337   declare_constant(Location::narrowoop)                                   \
2338   declare_constant(Location::int_in_long)                                 \
2339   declare_constant(Location::lng)                                         \
2340   declare_constant(Location::float_in_dbl)                                \
2341   declare_constant(Location::dbl)                                         \
2342   declare_constant(Location::addr)                                        \
2343   declare_constant(Location::invalid)                                     \
2344                                                                           \
2345   /* constants from Location::Where enum */                               \
2346                                                                           \
2347   declare_constant(Location::on_stack)                                    \
2348   declare_constant(Location::in_register)                                 \
2349                                                                           \
2350   declare_constant(Deoptimization::Reason_many)                           \
2351   declare_constant(Deoptimization::Reason_none)                           \
2352   declare_constant(Deoptimization::Reason_null_check)                     \
2353   declare_constant(Deoptimization::Reason_null_assert)                    \
2354   declare_constant(Deoptimization::Reason_range_check)                    \
2355   declare_constant(Deoptimization::Reason_class_check)                    \
2356   declare_constant(Deoptimization::Reason_array_check)                    \
2357   declare_constant(Deoptimization::Reason_intrinsic)                      \
2358   declare_constant(Deoptimization::Reason_bimorphic)                      \
2359   declare_constant(Deoptimization::Reason_profile_predicate)              \
2360   declare_constant(Deoptimization::Reason_unloaded)                       \
2361   declare_constant(Deoptimization::Reason_uninitialized)                  \
<a name="36" id="anc36"></a>
2362   declare_constant(Deoptimization::Reason_unreached)                      \
2363   declare_constant(Deoptimization::Reason_unhandled)                      \
2364   declare_constant(Deoptimization::Reason_constraint)                     \
2365   declare_constant(Deoptimization::Reason_div0_check)                     \
2366   declare_constant(Deoptimization::Reason_age)                            \
2367   declare_constant(Deoptimization::Reason_predicate)                      \
2368   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2369   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2370   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2371   declare_constant(Deoptimization::Reason_speculate_null_assert)          \
2372   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2373   declare_constant(Deoptimization::Reason_unstable_if)                    \
2374   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2375   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_aliasing)))                       \
2376   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_transfer_to_interpreter)))        \
2377   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_not_compiled_exception_handler))) \
2378   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_unresolved)))                     \
2379   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_jsr_mismatch)))                   \
2380   declare_constant(Deoptimization::Reason_tenured)                        \
2381   declare_constant(Deoptimization::Reason_LIMIT)                          \
2382   declare_constant(Deoptimization::Reason_RECORDED_LIMIT)                 \
2383                                                                           \
2384   declare_constant(Deoptimization::Action_none)                           \
2385   declare_constant(Deoptimization::Action_maybe_recompile)                \
2386   declare_constant(Deoptimization::Action_reinterpret)                    \
2387   declare_constant(Deoptimization::Action_make_not_entrant)               \
2388   declare_constant(Deoptimization::Action_make_not_compilable)            \
2389   declare_constant(Deoptimization::Action_LIMIT)                          \
2390                                                                           \
2391   /***************************************************/                   \
2392   /* DEFAULT_CACHE_LINE_SIZE (globalDefinitions.hpp) */                   \
2393   /***************************************************/                   \
2394                                                                           \
2395   declare_preprocessor_constant(&quot;DEFAULT_CACHE_LINE_SIZE&quot;, DEFAULT_CACHE_LINE_SIZE) \
2396                                                                           \
2397   declare_constant(Deoptimization::Unpack_deopt)                          \
2398   declare_constant(Deoptimization::Unpack_exception)                      \
2399   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
2400   declare_constant(Deoptimization::Unpack_reexecute)                      \
2401                                                                           \
2402   declare_constant(Deoptimization::_action_bits)                          \
2403   declare_constant(Deoptimization::_reason_bits)                          \
2404   declare_constant(Deoptimization::_debug_id_bits)                        \
2405   declare_constant(Deoptimization::_action_shift)                         \
2406   declare_constant(Deoptimization::_reason_shift)                         \
2407   declare_constant(Deoptimization::_debug_id_shift)                       \
2408                                                                           \
2409   /******************************************/                            \
2410   /* BasicType enum (globalDefinitions.hpp) */                            \
2411   /******************************************/                            \
2412                                                                           \
2413   declare_constant(T_BOOLEAN)                                             \
2414   declare_constant(T_CHAR)                                                \
2415   declare_constant(T_FLOAT)                                               \
2416   declare_constant(T_DOUBLE)                                              \
2417   declare_constant(T_BYTE)                                                \
2418   declare_constant(T_SHORT)                                               \
2419   declare_constant(T_INT)                                                 \
2420   declare_constant(T_LONG)                                                \
2421   declare_constant(T_OBJECT)                                              \
2422   declare_constant(T_ARRAY)                                               \
2423   declare_constant(T_VOID)                                                \
2424   declare_constant(T_ADDRESS)                                             \
2425   declare_constant(T_NARROWOOP)                                           \
2426   declare_constant(T_METADATA)                                            \
2427   declare_constant(T_NARROWKLASS)                                         \
2428   declare_constant(T_CONFLICT)                                            \
2429   declare_constant(T_ILLEGAL)                                             \
2430                                                                           \
2431   /**********************************************/                        \
2432   /* BasicTypeSize enum (globalDefinitions.hpp) */                        \
2433   /**********************************************/                        \
2434                                                                           \
2435   declare_constant(T_BOOLEAN_size)                                        \
2436   declare_constant(T_CHAR_size)                                           \
2437   declare_constant(T_FLOAT_size)                                          \
2438   declare_constant(T_DOUBLE_size)                                         \
2439   declare_constant(T_BYTE_size)                                           \
2440   declare_constant(T_SHORT_size)                                          \
2441   declare_constant(T_INT_size)                                            \
2442   declare_constant(T_LONG_size)                                           \
2443   declare_constant(T_OBJECT_size)                                         \
2444   declare_constant(T_ARRAY_size)                                          \
2445   declare_constant(T_NARROWOOP_size)                                      \
2446   declare_constant(T_NARROWKLASS_size)                                    \
2447   declare_constant(T_VOID_size)                                           \
2448                                                                           \
2449   /*********************/                                                 \
2450   /* Matcher (C2 only) */                                                 \
2451   /*********************/                                                 \
2452                                                                           \
2453   declare_c2_preprocessor_constant(&quot;Matcher::interpreter_frame_pointer_reg&quot;, Matcher::interpreter_frame_pointer_reg()) \
2454                                                                           \
2455   /*********************************************/                         \
2456   /* MethodCompilation (globalDefinitions.hpp) */                         \
2457   /*********************************************/                         \
2458                                                                           \
2459   declare_constant(InvocationEntryBci)                                    \
2460                                                                           \
2461   /*************/                                                         \
2462   /* CompLevel */                                                         \
2463   /*************/                                                         \
2464                                                                           \
2465   declare_constant(CompLevel_any)                                         \
2466   declare_constant(CompLevel_all)                                         \
2467   declare_constant(CompLevel_none)                                        \
2468   declare_constant(CompLevel_simple)                                      \
2469   declare_constant(CompLevel_limited_profile)                             \
2470   declare_constant(CompLevel_full_profile)                                \
2471   declare_constant(CompLevel_full_optimization)                           \
2472   declare_constant(CompLevel_aot)                                         \
2473                                                                           \
2474   /***************/                                                       \
2475   /* OopMapValue */                                                       \
2476   /***************/                                                       \
2477                                                                           \
2478   declare_constant(OopMapValue::type_bits)                                \
2479   declare_constant(OopMapValue::register_bits)                            \
2480   declare_constant(OopMapValue::type_shift)                               \
2481   declare_constant(OopMapValue::register_shift)                           \
2482   declare_constant(OopMapValue::type_mask)                                \
2483   declare_constant(OopMapValue::type_mask_in_place)                       \
2484   declare_constant(OopMapValue::register_mask)                            \
2485   declare_constant(OopMapValue::register_mask_in_place)                   \
2486   declare_constant(OopMapValue::unused_value)                             \
2487   declare_constant(OopMapValue::oop_value)                                \
2488   declare_constant(OopMapValue::narrowoop_value)                          \
2489   declare_constant(OopMapValue::callee_saved_value)                       \
2490   declare_constant(OopMapValue::derived_oop_value)                        \
2491                                                                           \
2492   /******************/                                                    \
2493   /* JNIHandleBlock */                                                    \
2494   /******************/                                                    \
2495                                                                           \
2496   declare_constant(JNIHandleBlock::block_size_in_oops)                    \
2497                                                                           \
2498   /**********************/                                                \
2499   /* ObjectSynchronizer */                                                \
2500   /**********************/                                                \
2501                                                                           \
2502   declare_constant(ObjectSynchronizer::_BLOCKSIZE)                        \
2503                                                                           \
2504   /**********************/                                                \
2505   /* PcDesc             */                                                \
2506   /**********************/                                                \
2507                                                                           \
2508   declare_constant(PcDesc::PCDESC_reexecute)                              \
2509   declare_constant(PcDesc::PCDESC_is_method_handle_invoke)                \
2510   declare_constant(PcDesc::PCDESC_return_oop)                             \
2511                                                                           \
2512   /**********************/                                                \
2513   /* frame              */                                                \
2514   /**********************/                                                \
2515   NOT_ZERO(PPC64_ONLY(declare_constant(frame::entry_frame_locals_size)))  \
2516                                                                           \
2517   NOT_ZERO(X86_ONLY(declare_constant(frame::entry_frame_call_wrapper_offset)))      \
2518   declare_constant(frame::pc_return_offset)                               \
2519                                                                           \
2520   /*************/                                                         \
2521   /* vmSymbols */                                                         \
2522   /*************/                                                         \
2523                                                                           \
2524   declare_constant(vmSymbols::FIRST_SID)                                  \
2525   declare_constant(vmSymbols::SID_LIMIT)                                  \
2526                                                                           \
2527   /****************/                                                      \
2528   /* vmIntrinsics */                                                      \
2529   /****************/                                                      \
2530                                                                           \
2531   declare_constant(vmIntrinsics::_invokeBasic)                            \
2532   declare_constant(vmIntrinsics::_linkToVirtual)                          \
2533   declare_constant(vmIntrinsics::_linkToStatic)                           \
2534   declare_constant(vmIntrinsics::_linkToSpecial)                          \
2535   declare_constant(vmIntrinsics::_linkToInterface)                        \
2536                                                                           \
2537   /********************************/                                      \
2538   /* Calling convention constants */                                      \
2539   /********************************/                                      \
2540                                                                           \
2541   declare_constant(RegisterImpl::number_of_registers)                     \
2542   declare_constant(ConcreteRegisterImpl::number_of_registers)             \
2543   declare_preprocessor_constant(&quot;REG_COUNT&quot;, REG_COUNT)                \
2544   declare_c2_preprocessor_constant(&quot;SAVED_ON_ENTRY_REG_COUNT&quot;, SAVED_ON_ENTRY_REG_COUNT) \
2545   declare_c2_preprocessor_constant(&quot;C_SAVED_ON_ENTRY_REG_COUNT&quot;, C_SAVED_ON_ENTRY_REG_COUNT) \
2546                                                                           \
2547   /************/                                                          \
2548   /* PerfData */                                                          \
2549   /************/                                                          \
2550                                                                           \
2551   /***********************/                                               \
2552   /* PerfData Units enum */                                               \
2553   /***********************/                                               \
2554                                                                           \
2555   declare_constant(PerfData::U_None)                                      \
2556   declare_constant(PerfData::U_Bytes)                                     \
2557   declare_constant(PerfData::U_Ticks)                                     \
2558   declare_constant(PerfData::U_Events)                                    \
2559   declare_constant(PerfData::U_String)                                    \
2560   declare_constant(PerfData::U_Hertz)                                     \
2561                                                                           \
2562   /****************/                                                      \
2563   /* JVMCI */                                                             \
2564   /****************/                                                      \
2565                                                                           \
2566   declare_preprocessor_constant(&quot;INCLUDE_JVMCI&quot;, INCLUDE_JVMCI)           \
2567                                                                           \
2568   /****************/                                                      \
2569   /*  VMRegImpl   */                                                      \
2570   /****************/                                                      \
2571   declare_constant(VMRegImpl::stack_slot_size)                            \
2572                                                                           \
2573   /******************************/                                        \
2574   /*  -XX flags (value origin)  */                                        \
2575   /******************************/                                        \
2576   declare_constant(JVMFlag::DEFAULT)                                      \
2577   declare_constant(JVMFlag::COMMAND_LINE)                                 \
2578   declare_constant(JVMFlag::ENVIRON_VAR)                                  \
2579   declare_constant(JVMFlag::CONFIG_FILE)                                  \
2580   declare_constant(JVMFlag::MANAGEMENT)                                   \
2581   declare_constant(JVMFlag::ERGONOMIC)                                    \
2582   declare_constant(JVMFlag::ATTACH_ON_DEMAND)                             \
2583   declare_constant(JVMFlag::INTERNAL)                                     \
<a name="37" id="anc37"></a>
2584   declare_constant(JVMFlag::VALUE_ORIGIN_MASK)                            \
2585   declare_constant(JVMFlag::ORIG_COMMAND_LINE)
2586 
2587 //--------------------------------------------------------------------------------
2588 // VM_LONG_CONSTANTS
2589 //
2590 // This table contains long constants required over in the
2591 // serviceability agent. The &quot;declare_constant&quot; macro is used for all
2592 // enums, etc., while &quot;declare_preprocessor_constant&quot; must be used for
2593 // all #defined constants.
2594 
2595 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2596                                                                           \
2597   /****************/                                                      \
2598   /* GC constants */                                                      \
2599   /****************/                                                      \
2600                                                                           \
2601   VM_LONG_CONSTANTS_GC(declare_constant)                                  \
2602                                                                           \
2603   /*********************/                                                 \
<a name="38" id="anc38"></a><span class="line-modified">2604   /* MarkOop constants */                                                 \</span>
2605   /*********************/                                                 \
2606                                                                           \
2607   /* Note: some of these are declared as long constants just for */       \
2608   /* consistency. The mask constants are the only ones requiring */       \
2609   /* 64 bits (on 64-bit platforms). */                                    \
2610                                                                           \
<a name="39" id="anc39"></a><span class="line-modified">2611   declare_constant(markOopDesc::age_bits)                                 \</span>
<span class="line-modified">2612   declare_constant(markOopDesc::lock_bits)                                \</span>
<span class="line-modified">2613   declare_constant(markOopDesc::biased_lock_bits)                         \</span>
<span class="line-modified">2614   declare_constant(markOopDesc::max_hash_bits)                            \</span>
<span class="line-modified">2615   declare_constant(markOopDesc::hash_bits)                                \</span>
<span class="line-modified">2616                                                                           \</span>
<span class="line-modified">2617   declare_constant(markOopDesc::lock_shift)                               \</span>
<span class="line-modified">2618   declare_constant(markOopDesc::biased_lock_shift)                        \</span>
<span class="line-modified">2619   declare_constant(markOopDesc::age_shift)                                \</span>
<span class="line-modified">2620   declare_constant(markOopDesc::hash_shift)                               \</span>
<span class="line-modified">2621                                                                           \</span>
<span class="line-modified">2622   declare_constant(markOopDesc::lock_mask)                                \</span>
<span class="line-modified">2623   declare_constant(markOopDesc::lock_mask_in_place)                       \</span>
<span class="line-modified">2624   declare_constant(markOopDesc::biased_lock_mask)                         \</span>
<span class="line-modified">2625   declare_constant(markOopDesc::biased_lock_mask_in_place)                \</span>
<span class="line-modified">2626   declare_constant(markOopDesc::biased_lock_bit_in_place)                 \</span>
<span class="line-modified">2627   declare_constant(markOopDesc::age_mask)                                 \</span>
<span class="line-modified">2628   declare_constant(markOopDesc::age_mask_in_place)                        \</span>
<span class="line-modified">2629   declare_constant(markOopDesc::epoch_mask)                               \</span>
<span class="line-modified">2630   declare_constant(markOopDesc::epoch_mask_in_place)                      \</span>
<span class="line-modified">2631   declare_constant(markOopDesc::hash_mask)                                \</span>
<span class="line-modified">2632   declare_constant(markOopDesc::hash_mask_in_place)                       \</span>
<span class="line-modified">2633   declare_constant(markOopDesc::biased_lock_alignment)                    \</span>
<span class="line-modified">2634                                                                           \</span>
<span class="line-modified">2635   declare_constant(markOopDesc::locked_value)                             \</span>
<span class="line-modified">2636   declare_constant(markOopDesc::unlocked_value)                           \</span>
<span class="line-modified">2637   declare_constant(markOopDesc::monitor_value)                            \</span>
<span class="line-modified">2638   declare_constant(markOopDesc::marked_value)                             \</span>
<span class="line-modified">2639   declare_constant(markOopDesc::biased_lock_pattern)                      \</span>
<span class="line-modified">2640                                                                           \</span>
<span class="line-modified">2641   declare_constant(markOopDesc::no_hash)                                  \</span>
<span class="line-modified">2642   declare_constant(markOopDesc::no_hash_in_place)                         \</span>
<span class="line-modified">2643   declare_constant(markOopDesc::no_lock_in_place)                         \</span>
<span class="line-modified">2644   declare_constant(markOopDesc::max_age)                                  \</span>
<span class="line-removed">2645                                                                           \</span>
<span class="line-removed">2646   /* Constants in markOop used by CMS. */                                 \</span>
<span class="line-removed">2647   declare_constant(markOopDesc::cms_shift)                                \</span>
<span class="line-removed">2648   declare_constant(markOopDesc::cms_mask)                                 \</span>
<span class="line-removed">2649   declare_constant(markOopDesc::size_shift)                               \</span>
2650                                                                           \
2651   /* InvocationCounter constants */                                       \
2652   declare_constant(InvocationCounter::count_increment)                    \
2653   declare_constant(InvocationCounter::count_shift)
2654 
2655 
2656 //--------------------------------------------------------------------------------
2657 //
2658 
2659 // Generate and check a nonstatic field in non-product builds
2660 #ifndef PRODUCT
2661 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2662 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2663 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2664 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2665 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2666 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2667 #else
2668 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2669 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2670 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2671 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2672 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2673 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2674 #endif /* PRODUCT */
2675 
2676 // Generate and check a nonstatic field in C1 builds
2677 #ifdef COMPILER1
2678 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2679 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2680 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2681 #else
2682 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2683 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2684 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)
2685 #endif /* COMPILER1 */
2686 // Generate and check a nonstatic field in C2 builds
2687 #ifdef COMPILER2
2688 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2689 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2690 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2691 #else
2692 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2693 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2694 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)
2695 #endif /* COMPILER2 */
2696 
2697 // Generate but do not check a static field in C1 builds
2698 #ifdef COMPILER1
2699 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2700 #else
2701 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2702 #endif /* COMPILER1 */
2703 
2704 // Generate but do not check a static field in C2 builds
2705 #ifdef COMPILER2
2706 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2707 #else
2708 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2709 #endif /* COMPILER2 */
2710 
2711 //--------------------------------------------------------------------------------
2712 // VMTypeEntry build-specific macros
2713 //
2714 
2715 #ifdef COMPILER1
2716 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2717 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2718 #else
2719 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2720 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2721 #endif /* COMPILER1 */
2722 
2723 #ifdef COMPILER2
2724 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)                     GENERATE_VM_TYPE_ENTRY(a, b)
2725 # define CHECK_C2_VM_TYPE_ENTRY(a, b)                        CHECK_VM_TYPE_ENTRY(a, b)
2726 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2727 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2728 #else
2729 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)
2730 # define CHECK_C2_VM_TYPE_ENTRY(a, b)
2731 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2732 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2733 #endif /* COMPILER2 */
2734 
2735 
2736 //--------------------------------------------------------------------------------
2737 // VMIntConstantEntry build-specific macros
2738 //
2739 
2740 // Generate an int constant for a C1 build
2741 #ifdef COMPILER1
2742 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)  GENERATE_VM_INT_CONSTANT_ENTRY(name)
2743 #else
2744 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)
2745 #endif /* COMPILER1 */
2746 
2747 // Generate an int constant for a C2 build
2748 #ifdef COMPILER2
2749 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)                      GENERATE_VM_INT_CONSTANT_ENTRY(name)
2750 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)  GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2751 #else
2752 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)
2753 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2754 #endif /* COMPILER1 */
2755 
2756 
2757 //--------------------------------------------------------------------------------
2758 // VMLongConstantEntry build-specific macros
2759 //
2760 
2761 // Generate a long constant for a C1 build
2762 #ifdef COMPILER1
2763 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)  GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2764 #else
2765 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)
2766 #endif /* COMPILER1 */
2767 
2768 // Generate a long constant for a C2 build
2769 #ifdef COMPILER2
2770 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)                     GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2771 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2772 #else
2773 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)
2774 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2775 #endif /* COMPILER1 */
2776 
2777 
2778 //
2779 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
2780 //
2781 
2782 // These initializers are allowed to access private fields in classes
2783 // as long as class VMStructs is a friend
2784 VMStructEntry VMStructs::localHotSpotVMStructs[] = {
2785 
2786   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2787              GENERATE_STATIC_VM_STRUCT_ENTRY,
2788              GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
2789              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2790              GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2791              GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2792              GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY,
2793              GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2794              GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2795              GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2796 
2797 
2798   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2799                 GENERATE_STATIC_VM_STRUCT_ENTRY,
2800                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2801                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2802                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2803                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2804                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2805                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2806 
2807   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2808                  GENERATE_STATIC_VM_STRUCT_ENTRY,
2809                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2810                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2811                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2812                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2813                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2814                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2815 
2816   VM_STRUCTS_OS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2817                     GENERATE_STATIC_VM_STRUCT_ENTRY,
2818                     GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2819                     GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2820                     GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2821                     GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2822                     GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2823                     GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2824 
2825   GENERATE_VM_STRUCT_LAST_ENTRY()
2826 };
2827 
2828 size_t VMStructs::localHotSpotVMStructsLength() {
2829   return sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry);
2830 }
2831 
2832 VMTypeEntry VMStructs::localHotSpotVMTypes[] = {
2833 
2834   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
2835            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2836            GENERATE_OOP_VM_TYPE_ENTRY,
2837            GENERATE_INTEGER_VM_TYPE_ENTRY,
2838            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2839            GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2840            GENERATE_C2_VM_TYPE_ENTRY,
2841            GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2842 
2843 
2844   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,
2845               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2846               GENERATE_OOP_VM_TYPE_ENTRY,
2847               GENERATE_INTEGER_VM_TYPE_ENTRY,
2848               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2849               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2850               GENERATE_C2_VM_TYPE_ENTRY,
2851               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2852 
2853   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
2854                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2855                GENERATE_OOP_VM_TYPE_ENTRY,
2856                GENERATE_INTEGER_VM_TYPE_ENTRY,
2857                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2858                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2859                GENERATE_C2_VM_TYPE_ENTRY,
2860                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2861 
2862   VM_TYPES_OS_CPU(GENERATE_VM_TYPE_ENTRY,
2863                   GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2864                   GENERATE_OOP_VM_TYPE_ENTRY,
2865                   GENERATE_INTEGER_VM_TYPE_ENTRY,
2866                   GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2867                   GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2868                   GENERATE_C2_VM_TYPE_ENTRY,
2869                   GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2870 
2871   GENERATE_VM_TYPE_LAST_ENTRY()
2872 };
2873 
2874 size_t VMStructs::localHotSpotVMTypesLength() {
2875   return sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry);
2876 }
2877 
2878 VMIntConstantEntry VMStructs::localHotSpotVMIntConstants[] = {
2879 
2880   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
2881                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
2882                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2883                    GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2884                    GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2885                    GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2886 
2887   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,
2888                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2889                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2890                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2891                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2892 
2893   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
2894                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2895                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2896                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2897                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2898 
2899   VM_INT_CONSTANTS_OS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
2900                           GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2901                           GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2902                           GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2903                           GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2904 
2905   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
2906 };
2907 
2908 size_t VMStructs::localHotSpotVMIntConstantsLength() {
2909   return sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry);
2910 }
2911 
2912 VMLongConstantEntry VMStructs::localHotSpotVMLongConstants[] = {
2913 
2914   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
2915                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2916                     GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2917                     GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2918                     GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2919 
2920   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,
2921                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2922                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2923                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2924                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2925 
2926   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
2927                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2928                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2929                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2930                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2931 
2932   VM_LONG_CONSTANTS_OS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
2933                            GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2934                            GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2935                            GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2936                            GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2937 
2938   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
2939 };
2940 
2941 size_t VMStructs::localHotSpotVMLongConstantsLength() {
2942   return sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry);
2943 }
2944 
2945 // This is used both to check the types of referenced fields and, in
2946 // debug builds, to ensure that all of the field types are present.
2947 void
2948 VMStructs::init() {
2949   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2950              CHECK_STATIC_VM_STRUCT_ENTRY,
2951              CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
2952              CHECK_NO_OP,
2953              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2954              CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2955              CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY,
2956              CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2957              CHECK_NO_OP,
2958              CHECK_NO_OP);
2959 
2960 
2961   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2962                  CHECK_STATIC_VM_STRUCT_ENTRY,
2963                  CHECK_NO_OP,
2964                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2965                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2966                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2967                  CHECK_NO_OP,
2968                  CHECK_NO_OP);
2969 
2970   VM_STRUCTS_OS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2971                     CHECK_STATIC_VM_STRUCT_ENTRY,
2972                     CHECK_NO_OP,
2973                     CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2974                     CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2975                     CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2976                     CHECK_NO_OP,
2977                     CHECK_NO_OP);
2978 
2979   VM_TYPES(CHECK_VM_TYPE_ENTRY,
2980            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2981            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2982            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2983            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2984            CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
2985            CHECK_C2_VM_TYPE_ENTRY,
2986            CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
2987 
2988 
2989   VM_TYPES_CPU(CHECK_VM_TYPE_ENTRY,
2990                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2991                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2992                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2993                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2994                CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
2995                CHECK_C2_VM_TYPE_ENTRY,
2996                CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
2997 
2998   VM_TYPES_OS_CPU(CHECK_VM_TYPE_ENTRY,
2999                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3000                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3001                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3002                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3003                   CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3004                   CHECK_C2_VM_TYPE_ENTRY,
3005                   CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3006 
3007   //
3008   // Split VM_STRUCTS() invocation into two parts to allow MS VC++ 6.0
3009   // to build with the source mounted over SNC3.2. Symptom was that
3010   // debug build failed with an internal compiler error. Has been seen
3011   // mounting sources from Solaris 2.6 and 2.7 hosts, but so far not
3012   // 2.8 hosts. Appears to occur because line is too long.
3013   //
3014   // If an assertion failure is triggered here it means that an entry
3015   // in VMStructs::localHotSpotVMStructs[] was not found in
3016   // VMStructs::localHotSpotVMTypes[]. (The assertion itself had to be
3017   // made less descriptive because of this above bug -- see the
3018   // definition of ENSURE_FIELD_TYPE_PRESENT.)
3019   //
3020   // NOTE: taken out because this was just not working on everyone&#39;s
3021   // Solstice NFS setup. If everyone switches to local workspaces on
3022   // Win32, we can put this back in.
3023 #ifndef _WINDOWS
3024   debug_only(VM_STRUCTS(ENSURE_FIELD_TYPE_PRESENT,
3025                         CHECK_NO_OP,
3026                         CHECK_NO_OP,
3027                         CHECK_NO_OP,
3028                         CHECK_NO_OP,
3029                         CHECK_NO_OP,
3030                         CHECK_NO_OP,
3031                         CHECK_NO_OP,
3032                         CHECK_NO_OP,
3033                         CHECK_NO_OP));
3034   debug_only(VM_STRUCTS(CHECK_NO_OP,
3035                         ENSURE_FIELD_TYPE_PRESENT,
3036                         ENSURE_FIELD_TYPE_PRESENT,
3037                         CHECK_NO_OP,
3038                         ENSURE_FIELD_TYPE_PRESENT,
3039                         ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3040                         ENSURE_C1_FIELD_TYPE_PRESENT,
3041                         ENSURE_C2_FIELD_TYPE_PRESENT,
3042                         CHECK_NO_OP,
3043                         CHECK_NO_OP));
3044 
3045   debug_only(VM_STRUCTS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3046                             ENSURE_FIELD_TYPE_PRESENT,
3047                             CHECK_NO_OP,
3048                             ENSURE_FIELD_TYPE_PRESENT,
3049                             ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3050                             ENSURE_C2_FIELD_TYPE_PRESENT,
3051                             CHECK_NO_OP,
3052                             CHECK_NO_OP));
3053   debug_only(VM_STRUCTS_OS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3054                                ENSURE_FIELD_TYPE_PRESENT,
3055                                CHECK_NO_OP,
3056                                ENSURE_FIELD_TYPE_PRESENT,
3057                                ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3058                                ENSURE_C2_FIELD_TYPE_PRESENT,
3059                                CHECK_NO_OP,
3060                                CHECK_NO_OP));
3061 #endif
3062 }
3063 
3064 extern &quot;C&quot; {
3065 
3066 #define STRIDE(array) ((char*)&amp;array[1] - (char*)&amp;array[0])
3067 
3068 JNIEXPORT VMStructEntry* gHotSpotVMStructs = VMStructs::localHotSpotVMStructs;
3069 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeNameOffset = offset_of(VMStructEntry, typeName);
3070 JNIEXPORT uint64_t gHotSpotVMStructEntryFieldNameOffset = offset_of(VMStructEntry, fieldName);
3071 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeStringOffset = offset_of(VMStructEntry, typeString);
3072 JNIEXPORT uint64_t gHotSpotVMStructEntryIsStaticOffset = offset_of(VMStructEntry, isStatic);
3073 JNIEXPORT uint64_t gHotSpotVMStructEntryOffsetOffset = offset_of(VMStructEntry, offset);
3074 JNIEXPORT uint64_t gHotSpotVMStructEntryAddressOffset = offset_of(VMStructEntry, address);
3075 JNIEXPORT uint64_t gHotSpotVMStructEntryArrayStride = STRIDE(gHotSpotVMStructs);
3076 
3077 JNIEXPORT VMTypeEntry* gHotSpotVMTypes = VMStructs::localHotSpotVMTypes;
3078 JNIEXPORT uint64_t gHotSpotVMTypeEntryTypeNameOffset = offset_of(VMTypeEntry, typeName);
3079 JNIEXPORT uint64_t gHotSpotVMTypeEntrySuperclassNameOffset = offset_of(VMTypeEntry, superclassName);
3080 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsOopTypeOffset = offset_of(VMTypeEntry, isOopType);
3081 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsIntegerTypeOffset = offset_of(VMTypeEntry, isIntegerType);
3082 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsUnsignedOffset = offset_of(VMTypeEntry, isUnsigned);
3083 JNIEXPORT uint64_t gHotSpotVMTypeEntrySizeOffset = offset_of(VMTypeEntry, size);
3084 JNIEXPORT uint64_t gHotSpotVMTypeEntryArrayStride = STRIDE(gHotSpotVMTypes);
3085 
3086 JNIEXPORT VMIntConstantEntry* gHotSpotVMIntConstants = VMStructs::localHotSpotVMIntConstants;
3087 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryNameOffset = offset_of(VMIntConstantEntry, name);
3088 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryValueOffset = offset_of(VMIntConstantEntry, value);
3089 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryArrayStride = STRIDE(gHotSpotVMIntConstants);
3090 
3091 JNIEXPORT VMLongConstantEntry* gHotSpotVMLongConstants = VMStructs::localHotSpotVMLongConstants;
3092 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryNameOffset = offset_of(VMLongConstantEntry, name);
3093 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryValueOffset = offset_of(VMLongConstantEntry, value);
3094 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryArrayStride = STRIDE(gHotSpotVMLongConstants);
3095 }
3096 
3097 #ifdef ASSERT
3098 static int recursiveFindType(VMTypeEntry* origtypes, const char* typeName, bool isRecurse) {
3099   {
3100     VMTypeEntry* types = origtypes;
3101     while (types-&gt;typeName != NULL) {
3102       if (strcmp(typeName, types-&gt;typeName) == 0) {
3103         // Found it
3104         return 1;
3105       }
3106       ++types;
3107     }
3108   }
3109   // Search for the base type by peeling off const and *
3110   size_t len = strlen(typeName);
3111   if (typeName[len-1] == &#39;*&#39;) {
3112     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3113     strncpy(s, typeName, len - 1);
3114     s[len-1] = &#39;\0&#39;;
3115     // tty-&gt;print_cr(&quot;checking \&quot;%s\&quot; for \&quot;%s\&quot;&quot;, s, typeName);
3116     if (recursiveFindType(origtypes, s, true) == 1) {
3117       FREE_C_HEAP_ARRAY(char, s);
3118       return 1;
3119     }
3120     FREE_C_HEAP_ARRAY(char, s);
3121   }
3122   const char* start = NULL;
3123   if (strstr(typeName, &quot;GrowableArray&lt;&quot;) == typeName) {
3124     start = typeName + strlen(&quot;GrowableArray&lt;&quot;);
3125   } else if (strstr(typeName, &quot;Array&lt;&quot;) == typeName) {
3126     start = typeName + strlen(&quot;Array&lt;&quot;);
3127   }
3128   if (start != NULL) {
3129     const char * end = strrchr(typeName, &#39;&gt;&#39;);
3130     int len = end - start + 1;
3131     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3132     strncpy(s, start, len - 1);
3133     s[len-1] = &#39;\0&#39;;
3134     // tty-&gt;print_cr(&quot;checking \&quot;%s\&quot; for \&quot;%s\&quot;&quot;, s, typeName);
3135     if (recursiveFindType(origtypes, s, true) == 1) {
3136       FREE_C_HEAP_ARRAY(char, s);
3137       return 1;
3138     }
3139     FREE_C_HEAP_ARRAY(char, s);
3140   }
3141   if (strstr(typeName, &quot;const &quot;) == typeName) {
3142     const char * s = typeName + strlen(&quot;const &quot;);
3143     // tty-&gt;print_cr(&quot;checking \&quot;%s\&quot; for \&quot;%s\&quot;&quot;, s, typeName);
3144     if (recursiveFindType(origtypes, s, true) == 1) {
3145       return 1;
3146     }
3147   }
3148   if (strstr(typeName, &quot; const&quot;) == typeName + len - 6) {
3149     char * s = os::strdup_check_oom(typeName);
3150     s[len - 6] = &#39;\0&#39;;
3151     // tty-&gt;print_cr(&quot;checking \&quot;%s\&quot; for \&quot;%s\&quot;&quot;, s, typeName);
3152     if (recursiveFindType(origtypes, s, true) == 1) {
3153       os::free(s);
3154       return 1;
3155     }
3156     os::free(s);
3157   }
3158   if (!isRecurse) {
3159     tty-&gt;print_cr(&quot;type \&quot;%s\&quot; not found&quot;, typeName);
3160   }
3161   return 0;
3162 }
3163 
3164 
3165 int
3166 VMStructs::findType(const char* typeName) {
3167   VMTypeEntry* types = gHotSpotVMTypes;
3168 
3169   return recursiveFindType(types, typeName, false);
3170 }
3171 #endif
3172 
3173 void vmStructs_init() {
3174   debug_only(VMStructs::init());
3175 }
<a name="40" id="anc40"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="40" type="hidden" />
</body>
</html>