<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/os_perf.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="osThread.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="park.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/os_perf.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_RUNTIME_OS_PERF_HPP
 26 #define SHARE_RUNTIME_OS_PERF_HPP
 27 
 28 #include &quot;memory/allocation.hpp&quot;

 29 #include &quot;utilities/macros.hpp&quot;
 30 
 31 #define FUNCTIONALITY_NOT_IMPLEMENTED -8
 32 
 33 class EnvironmentVariable : public CHeapObj&lt;mtInternal&gt; {
 34  public:
 35   char* _key;
 36   char* _value;
 37 
 38   EnvironmentVariable() {
 39     _key = NULL;
 40     _value = NULL;
 41   }
 42 
 43   ~EnvironmentVariable() {
<span class="line-modified"> 44     if (_key != NULL) {</span>
<span class="line-modified"> 45       FREE_C_HEAP_ARRAY(char, _key);</span>
<span class="line-removed"> 46     }</span>
<span class="line-removed"> 47     if (_value != NULL) {</span>
<span class="line-removed"> 48       FREE_C_HEAP_ARRAY(char, _value);</span>
<span class="line-removed"> 49     }</span>
 50   }
 51 
 52   EnvironmentVariable(char* key, char* value) {
 53     _key = key;
 54     _value = value;
 55   }
 56 
 57 };
 58 
 59 
 60 class CPUInformation : public CHeapObj&lt;mtInternal&gt; {
 61  private:
 62   int   _no_of_sockets;
 63   int   _no_of_cores;
 64   int   _no_of_hw_threads;
 65   const char* _description;
 66   const char* _name;
 67 
 68  public:
 69   CPUInformation() {
</pre>
<hr />
<pre>
164     _name = name;
165   }
166 
167   const char* path(void) const {
168     return _path;
169   }
170 
171   void set_path(char* path) {
172     _path = path;
173   }
174 
175   const char* command_line(void) const {
176     return _command_line;
177   }
178 
179   void set_command_line(char* command_line) {
180     _command_line = command_line;
181   }
182 
183   virtual ~SystemProcess(void) {
<span class="line-modified">184     if (_name != NULL) {</span>
<span class="line-modified">185       FREE_C_HEAP_ARRAY(char, _name);</span>
<span class="line-modified">186     }</span>
<span class="line-removed">187     if (_path != NULL) {</span>
<span class="line-removed">188       FREE_C_HEAP_ARRAY(char, _path);</span>
<span class="line-removed">189     }</span>
<span class="line-removed">190     if (_command_line != NULL) {</span>
<span class="line-removed">191       FREE_C_HEAP_ARRAY(char, _command_line);</span>
<span class="line-removed">192     }</span>
193   }
194 };
195 
196 class NetworkInterface : public ResourceObj {
197  private:
198   char* _name;
199   uint64_t _bytes_in;
200   uint64_t _bytes_out;
201   NetworkInterface* _next;
202 
<span class="line-modified">203   NetworkInterface(); // no impl</span>
<span class="line-modified">204   NetworkInterface(const NetworkInterface&amp; rhs); // no impl</span>
<span class="line-removed">205   NetworkInterface&amp; operator=(const NetworkInterface&amp; rhs); // no impl</span>
206  public:
207   NetworkInterface(const char* name, uint64_t bytes_in, uint64_t bytes_out, NetworkInterface* next) :
208   _name(NULL),
209   _bytes_in(bytes_in),
210   _bytes_out(bytes_out),
211   _next(next) {
212     assert(name != NULL, &quot;invariant&quot;);
213     const size_t length = strlen(name);
214     assert(allocated_on_res_area(), &quot;invariant&quot;);
215     _name = NEW_RESOURCE_ARRAY(char, length + 1);
216     strncpy(_name, name, length + 1);
217     assert(strncmp(_name, name, length) == 0, &quot;invariant&quot;);
218   }
219 
220   NetworkInterface* next() const {
221     return _next;
222   }
223 
224   const char* get_name() const {
225     return _name;
</pre>
<hr />
<pre>
261                         double* const psystemTotalLoad) const;
262 };
263 
264 class SystemProcessInterface : public CHeapObj&lt;mtInternal&gt; {
265  private:
266    class SystemProcesses;
267    SystemProcesses* _impl;
268  public:
269    SystemProcessInterface();
270    ~SystemProcessInterface();
271    bool initialize();
272 
273   // information about system processes
274   int system_processes(SystemProcess** system_procs, int* const no_of_sys_processes) const;
275 };
276 
277 class NetworkPerformanceInterface : public CHeapObj&lt;mtInternal&gt; {
278  private:
279   class NetworkPerformance;
280   NetworkPerformance* _impl;
<span class="line-modified">281   NetworkPerformanceInterface(const NetworkPerformanceInterface&amp; rhs); // no impl</span>
<span class="line-modified">282   NetworkPerformanceInterface&amp; operator=(const NetworkPerformanceInterface&amp; rhs); // no impl</span>
283  public:
284   NetworkPerformanceInterface();
285   bool initialize();
286   ~NetworkPerformanceInterface();
287   int network_utilization(NetworkInterface** network_interfaces) const;
288 };
289 
290 #endif // SHARE_RUNTIME_OS_PERF_HPP
</pre>
</td>
<td>
<hr />
<pre>
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_RUNTIME_OS_PERF_HPP
 26 #define SHARE_RUNTIME_OS_PERF_HPP
 27 
 28 #include &quot;memory/allocation.hpp&quot;
<span class="line-added"> 29 #include &quot;utilities/globalDefinitions.hpp&quot;</span>
 30 #include &quot;utilities/macros.hpp&quot;
 31 
 32 #define FUNCTIONALITY_NOT_IMPLEMENTED -8
 33 
 34 class EnvironmentVariable : public CHeapObj&lt;mtInternal&gt; {
 35  public:
 36   char* _key;
 37   char* _value;
 38 
 39   EnvironmentVariable() {
 40     _key = NULL;
 41     _value = NULL;
 42   }
 43 
 44   ~EnvironmentVariable() {
<span class="line-modified"> 45     FREE_C_HEAP_ARRAY(char, _key);</span>
<span class="line-modified"> 46     FREE_C_HEAP_ARRAY(char, _value);</span>




 47   }
 48 
 49   EnvironmentVariable(char* key, char* value) {
 50     _key = key;
 51     _value = value;
 52   }
 53 
 54 };
 55 
 56 
 57 class CPUInformation : public CHeapObj&lt;mtInternal&gt; {
 58  private:
 59   int   _no_of_sockets;
 60   int   _no_of_cores;
 61   int   _no_of_hw_threads;
 62   const char* _description;
 63   const char* _name;
 64 
 65  public:
 66   CPUInformation() {
</pre>
<hr />
<pre>
161     _name = name;
162   }
163 
164   const char* path(void) const {
165     return _path;
166   }
167 
168   void set_path(char* path) {
169     _path = path;
170   }
171 
172   const char* command_line(void) const {
173     return _command_line;
174   }
175 
176   void set_command_line(char* command_line) {
177     _command_line = command_line;
178   }
179 
180   virtual ~SystemProcess(void) {
<span class="line-modified">181     FREE_C_HEAP_ARRAY(char, _name);</span>
<span class="line-modified">182     FREE_C_HEAP_ARRAY(char, _path);</span>
<span class="line-modified">183     FREE_C_HEAP_ARRAY(char, _command_line);</span>






184   }
185 };
186 
187 class NetworkInterface : public ResourceObj {
188  private:
189   char* _name;
190   uint64_t _bytes_in;
191   uint64_t _bytes_out;
192   NetworkInterface* _next;
193 
<span class="line-modified">194   NONCOPYABLE(NetworkInterface);</span>
<span class="line-modified">195 </span>

196  public:
197   NetworkInterface(const char* name, uint64_t bytes_in, uint64_t bytes_out, NetworkInterface* next) :
198   _name(NULL),
199   _bytes_in(bytes_in),
200   _bytes_out(bytes_out),
201   _next(next) {
202     assert(name != NULL, &quot;invariant&quot;);
203     const size_t length = strlen(name);
204     assert(allocated_on_res_area(), &quot;invariant&quot;);
205     _name = NEW_RESOURCE_ARRAY(char, length + 1);
206     strncpy(_name, name, length + 1);
207     assert(strncmp(_name, name, length) == 0, &quot;invariant&quot;);
208   }
209 
210   NetworkInterface* next() const {
211     return _next;
212   }
213 
214   const char* get_name() const {
215     return _name;
</pre>
<hr />
<pre>
251                         double* const psystemTotalLoad) const;
252 };
253 
254 class SystemProcessInterface : public CHeapObj&lt;mtInternal&gt; {
255  private:
256    class SystemProcesses;
257    SystemProcesses* _impl;
258  public:
259    SystemProcessInterface();
260    ~SystemProcessInterface();
261    bool initialize();
262 
263   // information about system processes
264   int system_processes(SystemProcess** system_procs, int* const no_of_sys_processes) const;
265 };
266 
267 class NetworkPerformanceInterface : public CHeapObj&lt;mtInternal&gt; {
268  private:
269   class NetworkPerformance;
270   NetworkPerformance* _impl;
<span class="line-modified">271   NONCOPYABLE(NetworkPerformanceInterface);</span>
<span class="line-modified">272 </span>
273  public:
274   NetworkPerformanceInterface();
275   bool initialize();
276   ~NetworkPerformanceInterface();
277   int network_utilization(NetworkInterface** network_interfaces) const;
278 };
279 
280 #endif // SHARE_RUNTIME_OS_PERF_HPP
</pre>
</td>
</tr>
</table>
<center><a href="osThread.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="park.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>