<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/runtime/serviceThread.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="serviceThread.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="sharedRuntime.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/serviceThread.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -23,29 +23,39 @@</span>
   */
  
  #ifndef SHARE_RUNTIME_SERVICETHREAD_HPP
  #define SHARE_RUNTIME_SERVICETHREAD_HPP
  
<span class="udiff-line-added">+ #include &quot;prims/jvmtiImpl.hpp&quot;</span>
  #include &quot;runtime/thread.hpp&quot;
  
<span class="udiff-line-modified-removed">- // A JavaThread for low memory detection support and JVMTI</span>
<span class="udiff-line-modified-removed">- // compiled-method-load events.</span>
<span class="udiff-line-modified-added">+ // A hidden from external view JavaThread for JVMTI compiled-method-load</span>
<span class="udiff-line-modified-added">+ // events, oop storage cleanup, and the maintainance of string, symbol,</span>
<span class="udiff-line-added">+ // protection domain, and resolved method tables.</span>
<span class="udiff-line-added">+ class JvmtiDeferredEvent;</span>
<span class="udiff-line-added">+ </span>
  class ServiceThread : public JavaThread {
    friend class VMStructs;
   private:
<span class="udiff-line-removed">- </span>
    static ServiceThread* _instance;
<span class="udiff-line-added">+   static JvmtiDeferredEvent* _jvmti_event;</span>
<span class="udiff-line-added">+   static JvmtiDeferredEventQueue _jvmti_service_queue;</span>
  
    static void service_thread_entry(JavaThread* thread, TRAPS);
    ServiceThread(ThreadFunction entry_point) : JavaThread(entry_point) {};
  
   public:
    static void initialize();
  
    // Hide this thread from external view.
    bool is_hidden_from_external_view() const      { return true; }
<span class="udiff-line-added">+   bool is_service_thread() const                 { return true; }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   // Add event to the service thread event queue.</span>
<span class="udiff-line-added">+   static void enqueue_deferred_event(JvmtiDeferredEvent* event);</span>
  
<span class="udiff-line-modified-removed">-   // Returns true if the passed thread is the service thread.</span>
<span class="udiff-line-modified-removed">-   static bool is_service_thread(Thread* thread);</span>
<span class="udiff-line-modified-added">+   // GC support</span>
<span class="udiff-line-modified-added">+   void oops_do(OopClosure* f, CodeBlobClosure* cf);</span>
<span class="udiff-line-added">+   void nmethods_do(CodeBlobClosure* cf);</span>
  };
  
  #endif // SHARE_RUNTIME_SERVICETHREAD_HPP
</pre>
<center><a href="serviceThread.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="sharedRuntime.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>