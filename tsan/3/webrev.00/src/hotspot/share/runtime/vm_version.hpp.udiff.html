<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/runtime/vm_version.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="vm_version.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../services/attachListener.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/vm_version.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -23,134 +23,9 @@</span>
   */
  
  #ifndef SHARE_RUNTIME_VM_VERSION_HPP
  #define SHARE_RUNTIME_VM_VERSION_HPP
  
<span class="udiff-line-modified-removed">- #include &quot;memory/allocation.hpp&quot;</span>
<span class="udiff-line-removed">- #include &quot;utilities/ostream.hpp&quot;</span>
<span class="udiff-line-removed">- #include &quot;utilities/macros.hpp&quot;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- // VM_Version provides information about the VM.</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- class Abstract_VM_Version: AllStatic {</span>
<span class="udiff-line-removed">-   friend class VMStructs;</span>
<span class="udiff-line-removed">-   friend class JVMCIVMStructs;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-  protected:</span>
<span class="udiff-line-removed">-   static const char*  _s_vm_release;</span>
<span class="udiff-line-removed">-   static const char*  _s_internal_vm_info_string;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // CPU feature flags.</span>
<span class="udiff-line-removed">-   static uint64_t _features;</span>
<span class="udiff-line-removed">-   static const char* _features_string;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // These are set by machine-dependent initializations</span>
<span class="udiff-line-removed">-   static bool         _supports_cx8;</span>
<span class="udiff-line-removed">-   static bool         _supports_atomic_getset4;</span>
<span class="udiff-line-removed">-   static bool         _supports_atomic_getset8;</span>
<span class="udiff-line-removed">-   static bool         _supports_atomic_getadd4;</span>
<span class="udiff-line-removed">-   static bool         _supports_atomic_getadd8;</span>
<span class="udiff-line-removed">-   static unsigned int _logical_processors_per_package;</span>
<span class="udiff-line-removed">-   static unsigned int _L1_data_cache_line_size;</span>
<span class="udiff-line-removed">-   static int          _vm_major_version;</span>
<span class="udiff-line-removed">-   static int          _vm_minor_version;</span>
<span class="udiff-line-removed">-   static int          _vm_security_version;</span>
<span class="udiff-line-removed">-   static int          _vm_patch_version;</span>
<span class="udiff-line-removed">-   static int          _vm_build_number;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-  public:</span>
<span class="udiff-line-removed">-   // Called as part of the runtime services initialization which is</span>
<span class="udiff-line-removed">-   // called from the management module initialization (via init_globals())</span>
<span class="udiff-line-removed">-   // after argument parsing and attaching of the main thread has</span>
<span class="udiff-line-removed">-   // occurred.  Examines a variety of the hardware capabilities of</span>
<span class="udiff-line-removed">-   // the platform to determine which features can be used to execute the</span>
<span class="udiff-line-removed">-   // program.</span>
<span class="udiff-line-removed">-   static void initialize() { }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // This allows for early initialization of VM_Version information</span>
<span class="udiff-line-removed">-   // that may be needed later in the initialization sequence but before</span>
<span class="udiff-line-removed">-   // full VM_Version initialization is possible. It can not depend on any</span>
<span class="udiff-line-removed">-   // other part of the VM being initialized when called. Platforms that</span>
<span class="udiff-line-removed">-   // need to specialize this define VM_Version::early_initialize().</span>
<span class="udiff-line-removed">-   static void early_initialize() { }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Called to initialize VM variables needing initialization</span>
<span class="udiff-line-removed">-   // after command line parsing. Platforms that need to specialize</span>
<span class="udiff-line-removed">-   // this should define VM_Version::init_before_ergo().</span>
<span class="udiff-line-removed">-   static void init_before_ergo() {}</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Name</span>
<span class="udiff-line-removed">-   static const char* vm_name();</span>
<span class="udiff-line-removed">-   // Vendor</span>
<span class="udiff-line-removed">-   static const char* vm_vendor();</span>
<span class="udiff-line-removed">-   // VM version information string printed by launcher (java -version)</span>
<span class="udiff-line-removed">-   static const char* vm_info_string();</span>
<span class="udiff-line-removed">-   static const char* vm_release();</span>
<span class="udiff-line-removed">-   static const char* vm_platform_string();</span>
<span class="udiff-line-removed">-   static const char* vm_build_user();</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static int vm_major_version()               { return _vm_major_version; }</span>
<span class="udiff-line-removed">-   static int vm_minor_version()               { return _vm_minor_version; }</span>
<span class="udiff-line-removed">-   static int vm_security_version()            { return _vm_security_version; }</span>
<span class="udiff-line-removed">-   static int vm_patch_version()               { return _vm_patch_version; }</span>
<span class="udiff-line-removed">-   static int vm_build_number()                { return _vm_build_number; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Gets the jvm_version_info.jvm_version defined in jvm.h</span>
<span class="udiff-line-removed">-   static unsigned int jvm_version();</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Internal version providing additional build information</span>
<span class="udiff-line-removed">-   static const char* internal_vm_info_string();</span>
<span class="udiff-line-removed">-   static const char* jre_release_version();</span>
<span class="udiff-line-removed">-   static const char* jdk_debug_level();</span>
<span class="udiff-line-removed">-   static const char* printable_jdk_debug_level();</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static uint64_t features() {</span>
<span class="udiff-line-removed">-     return _features;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static const char* features_string() {</span>
<span class="udiff-line-removed">-     return _features_string;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // does HW support an 8-byte compare-exchange operation?</span>
<span class="udiff-line-removed">-   static bool supports_cx8()  {</span>
<span class="udiff-line-removed">- #ifdef SUPPORTS_NATIVE_CX8</span>
<span class="udiff-line-removed">-     return true;</span>
<span class="udiff-line-removed">- #else</span>
<span class="udiff-line-removed">-     return _supports_cx8;</span>
<span class="udiff-line-removed">- #endif</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">-   // does HW support atomic get-and-set or atomic get-and-add?  Used</span>
<span class="udiff-line-removed">-   // to guide intrinsification decisions for Unsafe atomic ops</span>
<span class="udiff-line-removed">-   static bool supports_atomic_getset4()  {return _supports_atomic_getset4;}</span>
<span class="udiff-line-removed">-   static bool supports_atomic_getset8()  {return _supports_atomic_getset8;}</span>
<span class="udiff-line-removed">-   static bool supports_atomic_getadd4()  {return _supports_atomic_getadd4;}</span>
<span class="udiff-line-removed">-   static bool supports_atomic_getadd8()  {return _supports_atomic_getadd8;}</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static unsigned int logical_processors_per_package() {</span>
<span class="udiff-line-removed">-     return _logical_processors_per_package;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   static unsigned int L1_data_cache_line_size() {</span>
<span class="udiff-line-removed">-     return _L1_data_cache_line_size;</span>
<span class="udiff-line-removed">-   }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // ARCH specific policy for the BiasedLocking</span>
<span class="udiff-line-removed">-   static bool use_biased_locking()  { return true; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Number of page sizes efficiently supported by the hardware.  Most chips now</span>
<span class="udiff-line-removed">-   // support two sizes, thus this default implementation.  Processor-specific</span>
<span class="udiff-line-removed">-   // subclasses should define new versions to hide this one as needed.  Note</span>
<span class="udiff-line-removed">-   // that the O/S may support more sizes, but at most this many are used.</span>
<span class="udiff-line-removed">-   static uint page_size_count() { return 2; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Denominator for computing default ParallelGCThreads for machines with</span>
<span class="udiff-line-removed">-   // a large number of cores.</span>
<span class="udiff-line-removed">-   static uint parallel_worker_threads_denominator() { return 8; }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   // Does this CPU support spin wait instruction?</span>
<span class="udiff-line-removed">-   static bool supports_on_spin_wait() { return false; }</span>
<span class="udiff-line-removed">- };</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-modified-added">+ #include &quot;utilities/macros.hpp&quot;  // for CPU_HEADER() macro.</span>
  #include CPU_HEADER(vm_version)
  
  #endif // SHARE_RUNTIME_VM_VERSION_HPP
</pre>
<center><a href="vm_version.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../services/attachListener.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>