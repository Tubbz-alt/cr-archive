<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/java.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="java.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="javaCalls.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/java.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 50 extern void vm_exit_during_initialization(Symbol* exception_name, const char* message);
 51 extern void vm_exit_during_initialization(const char* error, const char* message = NULL);
 52 extern void vm_shutdown_during_initialization(const char* error, const char* message = NULL);
 53 
 54 extern void vm_exit_during_cds_dumping(const char* error, const char* message = NULL);
 55 
 56 /**
 57  * With the integration of the changes to handle the version string
 58  * as defined by JEP-223, most of the code related to handle the version
 59  * string prior to JDK 1.6 was removed (partial initialization)
 60  */
 61 class JDK_Version {
 62   friend class VMStructs;
 63   friend class Universe;
 64   friend void JDK_Version_init();
 65  private:
 66 
 67   static JDK_Version _current;
 68   static const char* _runtime_name;
 69   static const char* _runtime_version;


 70 
 71   uint8_t _major;
 72   uint8_t _minor;
 73   uint8_t _security;
 74   uint8_t _patch;
 75   uint8_t _build;
 76 
<span class="line-removed"> 77   bool _thread_park_blocker;</span>
<span class="line-removed"> 78   bool _post_vm_init_hook_enabled;</span>
<span class="line-removed"> 79 </span>
 80   bool is_valid() const {
 81     return (_major != 0);
 82   }
 83 
 84   // initializes or partially initializes the _current static field
 85   static void initialize();
 86 
 87  public:
 88 
<span class="line-modified"> 89   JDK_Version() : _major(0), _minor(0), _security(0), _patch(0), _build(0),</span>
<span class="line-modified"> 90                   _thread_park_blocker(false), _post_vm_init_hook_enabled(false)</span>
<span class="line-modified"> 91                   {}</span>
 92 
 93   JDK_Version(uint8_t major, uint8_t minor = 0, uint8_t security = 0,
<span class="line-modified"> 94               uint8_t patch = 0, uint8_t build = 0,</span>
<span class="line-modified"> 95               bool thread_park_blocker = false, bool post_vm_init_hook_enabled = false) :</span>
<span class="line-removed"> 96       _major(major), _minor(minor), _security(security), _patch(patch), _build(build),</span>
<span class="line-removed"> 97       _thread_park_blocker(thread_park_blocker),</span>
<span class="line-removed"> 98       _post_vm_init_hook_enabled(post_vm_init_hook_enabled)</span>
 99       {}
100 
101   // Returns the current running JDK version
102   static JDK_Version current() { return _current; }
103 
104   // Factory methods for convenience
105   static JDK_Version jdk(uint8_t m) {
106     return JDK_Version(m);
107   }
108 
109   static JDK_Version undefined() {
110     return JDK_Version(0);
111   }
112 
113   bool is_undefined() const {
114     return _major == 0;
115   }
116 
117   uint8_t major_version() const          { return _major; }
118   uint8_t minor_version() const          { return _minor; }
119   uint8_t security_version() const       { return _security; }
120   uint8_t patch_version() const          { return _patch; }
121   uint8_t build_number() const           { return _build; }
122 
<span class="line-removed">123   bool supports_thread_park_blocker() const {</span>
<span class="line-removed">124     return _thread_park_blocker;</span>
<span class="line-removed">125   }</span>
<span class="line-removed">126   bool post_vm_init_hook_enabled() const {</span>
<span class="line-removed">127     return _post_vm_init_hook_enabled;</span>
<span class="line-removed">128   }</span>
<span class="line-removed">129 </span>
130   // Performs a full ordering comparison using all fields (patch, build, etc.)
131   int compare(const JDK_Version&amp; other) const;
132 
133   /**
134    * Performs comparison using only the major version, returning negative
135    * if the major version of &#39;this&#39; is less than the parameter, 0 if it is
136    * equal, and a positive value if it is greater.
137    */
138   int compare_major(int version) const {
139       return major_version() - version;
140   }
141 
142   void to_string(char* buffer, size_t buflen) const;
143 
144   static const char* runtime_name() {
145     return _runtime_name;
146   }
147   static void set_runtime_name(const char* name) {
148     _runtime_name = name;
149   }
150 
151   static const char* runtime_version() {
152     return _runtime_version;
153   }
154   static void set_runtime_version(const char* version) {
155     _runtime_version = version;
156   }
157 














158 };
159 
160 #endif // SHARE_RUNTIME_JAVA_HPP
</pre>
</td>
<td>
<hr />
<pre>
 50 extern void vm_exit_during_initialization(Symbol* exception_name, const char* message);
 51 extern void vm_exit_during_initialization(const char* error, const char* message = NULL);
 52 extern void vm_shutdown_during_initialization(const char* error, const char* message = NULL);
 53 
 54 extern void vm_exit_during_cds_dumping(const char* error, const char* message = NULL);
 55 
 56 /**
 57  * With the integration of the changes to handle the version string
 58  * as defined by JEP-223, most of the code related to handle the version
 59  * string prior to JDK 1.6 was removed (partial initialization)
 60  */
 61 class JDK_Version {
 62   friend class VMStructs;
 63   friend class Universe;
 64   friend void JDK_Version_init();
 65  private:
 66 
 67   static JDK_Version _current;
 68   static const char* _runtime_name;
 69   static const char* _runtime_version;
<span class="line-added"> 70   static const char* _runtime_vendor_version;</span>
<span class="line-added"> 71   static const char* _runtime_vendor_vm_bug_url;</span>
 72 
 73   uint8_t _major;
 74   uint8_t _minor;
 75   uint8_t _security;
 76   uint8_t _patch;
 77   uint8_t _build;
 78 



 79   bool is_valid() const {
 80     return (_major != 0);
 81   }
 82 
 83   // initializes or partially initializes the _current static field
 84   static void initialize();
 85 
 86  public:
 87 
<span class="line-modified"> 88   JDK_Version() :</span>
<span class="line-modified"> 89       _major(0), _minor(0), _security(0), _patch(0), _build(0)</span>
<span class="line-modified"> 90       {}</span>
 91 
 92   JDK_Version(uint8_t major, uint8_t minor = 0, uint8_t security = 0,
<span class="line-modified"> 93               uint8_t patch = 0, uint8_t build = 0) :</span>
<span class="line-modified"> 94       _major(major), _minor(minor), _security(security), _patch(patch), _build(build)</span>



 95       {}
 96 
 97   // Returns the current running JDK version
 98   static JDK_Version current() { return _current; }
 99 
100   // Factory methods for convenience
101   static JDK_Version jdk(uint8_t m) {
102     return JDK_Version(m);
103   }
104 
105   static JDK_Version undefined() {
106     return JDK_Version(0);
107   }
108 
109   bool is_undefined() const {
110     return _major == 0;
111   }
112 
113   uint8_t major_version() const          { return _major; }
114   uint8_t minor_version() const          { return _minor; }
115   uint8_t security_version() const       { return _security; }
116   uint8_t patch_version() const          { return _patch; }
117   uint8_t build_number() const           { return _build; }
118 







119   // Performs a full ordering comparison using all fields (patch, build, etc.)
120   int compare(const JDK_Version&amp; other) const;
121 
122   /**
123    * Performs comparison using only the major version, returning negative
124    * if the major version of &#39;this&#39; is less than the parameter, 0 if it is
125    * equal, and a positive value if it is greater.
126    */
127   int compare_major(int version) const {
128       return major_version() - version;
129   }
130 
131   void to_string(char* buffer, size_t buflen) const;
132 
133   static const char* runtime_name() {
134     return _runtime_name;
135   }
136   static void set_runtime_name(const char* name) {
137     _runtime_name = name;
138   }
139 
140   static const char* runtime_version() {
141     return _runtime_version;
142   }
143   static void set_runtime_version(const char* version) {
144     _runtime_version = version;
145   }
146 
<span class="line-added">147   static const char* runtime_vendor_version() {</span>
<span class="line-added">148     return _runtime_vendor_version;</span>
<span class="line-added">149   }</span>
<span class="line-added">150   static void set_runtime_vendor_version(const char* vendor_version) {</span>
<span class="line-added">151     _runtime_vendor_version = vendor_version;</span>
<span class="line-added">152   }</span>
<span class="line-added">153 </span>
<span class="line-added">154   static const char* runtime_vendor_vm_bug_url() {</span>
<span class="line-added">155     return _runtime_vendor_vm_bug_url;</span>
<span class="line-added">156   }</span>
<span class="line-added">157   static void set_runtime_vendor_vm_bug_url(const char* vendor_vm_bug_url) {</span>
<span class="line-added">158     _runtime_vendor_vm_bug_url = vendor_vm_bug_url;</span>
<span class="line-added">159   }</span>
<span class="line-added">160 </span>
161 };
162 
163 #endif // SHARE_RUNTIME_JAVA_HPP
</pre>
</td>
</tr>
</table>
<center><a href="java.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="javaCalls.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>