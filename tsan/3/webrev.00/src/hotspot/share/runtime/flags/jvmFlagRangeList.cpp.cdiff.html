<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/runtime/flags/jvmFlagRangeList.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jvmFlagConstraintsRuntime.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jvmFlagRangeList.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/flags/jvmFlagRangeList.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 25,32 ***</span>
  #include &quot;precompiled.hpp&quot;
  #include &quot;jvm.h&quot;
  #include &quot;classfile/stringTable.hpp&quot;
  #include &quot;classfile/symbolTable.hpp&quot;
  #include &quot;gc/shared/referenceProcessor.hpp&quot;
<span class="line-modified">! #include &quot;oops/markOop.hpp&quot;</span>
  #include &quot;runtime/arguments.hpp&quot;
  #include &quot;runtime/flags/jvmFlag.hpp&quot;
  #include &quot;runtime/flags/jvmFlagConstraintList.hpp&quot;
  #include &quot;runtime/flags/jvmFlagRangeList.hpp&quot;
  #include &quot;runtime/globals_extension.hpp&quot;
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/task.hpp&quot;
  #include &quot;utilities/macros.hpp&quot;
  
  class JVMFlagRange_int : public JVMFlagRange {
    int _min;
    int _max;
<span class="line-removed">-   const int* _ptr;</span>
  
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_int(const char* name, const int* ptr, int min, int max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_int(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_int(int value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 25,31 ---</span>
  #include &quot;precompiled.hpp&quot;
  #include &quot;jvm.h&quot;
  #include &quot;classfile/stringTable.hpp&quot;
  #include &quot;classfile/symbolTable.hpp&quot;
  #include &quot;gc/shared/referenceProcessor.hpp&quot;
<span class="line-modified">! #include &quot;oops/markWord.hpp&quot;</span>
  #include &quot;runtime/arguments.hpp&quot;
  #include &quot;runtime/flags/jvmFlag.hpp&quot;
  #include &quot;runtime/flags/jvmFlagConstraintList.hpp&quot;
  #include &quot;runtime/flags/jvmFlagRangeList.hpp&quot;
<span class="line-added">+ #include &quot;runtime/globals.hpp&quot;</span>
  #include &quot;runtime/globals_extension.hpp&quot;
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/task.hpp&quot;
  #include &quot;utilities/macros.hpp&quot;
  
  class JVMFlagRange_int : public JVMFlagRange {
    int _min;
    int _max;
  
  public:
<span class="line-modified">!   JVMFlagRange_int(const JVMFlag* flag, int min, int max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_int(_flag-&gt;get_int(), verbose);</span>
    }
  
    JVMFlag::Error check_int(int value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 69,18 ***</span>
  };
  
  class JVMFlagRange_intx : public JVMFlagRange {
    intx _min;
    intx _max;
<span class="line-modified">!   const intx* _ptr;</span>
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_intx(const char* name, const intx* ptr, intx min, intx max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_intx(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_intx(intx value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 68,17 ---</span>
  };
  
  class JVMFlagRange_intx : public JVMFlagRange {
    intx _min;
    intx _max;
<span class="line-modified">! </span>
  public:
<span class="line-modified">!   JVMFlagRange_intx(const JVMFlag* flag, intx min, intx max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_intx(_flag-&gt;get_intx(), verbose);</span>
    }
  
    JVMFlag::Error check_intx(intx value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 99,19 ***</span>
  };
  
  class JVMFlagRange_uint : public JVMFlagRange {
    uint _min;
    uint _max;
<span class="line-removed">-   const uint* _ptr;</span>
  
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_uint(const char* name, const uint* ptr, uint min, uint max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_uint(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_uint(uint value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 97,17 ---</span>
  };
  
  class JVMFlagRange_uint : public JVMFlagRange {
    uint _min;
    uint _max;
  
  public:
<span class="line-modified">!   JVMFlagRange_uint(const JVMFlag* flag, uint min, uint max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_uint(_flag-&gt;get_uint(), verbose);</span>
    }
  
    JVMFlag::Error check_uint(uint value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 130,19 ***</span>
  };
  
  class JVMFlagRange_uintx : public JVMFlagRange {
    uintx _min;
    uintx _max;
<span class="line-removed">-   const uintx* _ptr;</span>
  
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_uintx(const char* name, const uintx* ptr, uintx min, uintx max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_uintx(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_uintx(uintx value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 126,17 ---</span>
  };
  
  class JVMFlagRange_uintx : public JVMFlagRange {
    uintx _min;
    uintx _max;
  
  public:
<span class="line-modified">!   JVMFlagRange_uintx(const JVMFlag* flag, uintx min, uintx max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_uintx(_flag-&gt;get_uintx(), verbose);</span>
    }
  
    JVMFlag::Error check_uintx(uintx value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 161,19 ***</span>
  };
  
  class JVMFlagRange_uint64_t : public JVMFlagRange {
    uint64_t _min;
    uint64_t _max;
<span class="line-removed">-   const uint64_t* _ptr;</span>
  
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_uint64_t(const char* name, const uint64_t* ptr, uint64_t min, uint64_t max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_uint64_t(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_uint64_t(uint64_t value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 155,17 ---</span>
  };
  
  class JVMFlagRange_uint64_t : public JVMFlagRange {
    uint64_t _min;
    uint64_t _max;
  
  public:
<span class="line-modified">!   JVMFlagRange_uint64_t(const JVMFlag* flag, uint64_t min, uint64_t max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_uint64_t(_flag-&gt;get_uintx(), verbose);</span>
    }
  
    JVMFlag::Error check_uint64_t(uint64_t value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 192,19 ***</span>
  };
  
  class JVMFlagRange_size_t : public JVMFlagRange {
    size_t _min;
    size_t _max;
<span class="line-removed">-   const size_t* _ptr;</span>
  
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_size_t(const char* name, const size_t* ptr, size_t min, size_t max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_size_t(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_size_t(size_t value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 184,17 ---</span>
  };
  
  class JVMFlagRange_size_t : public JVMFlagRange {
    size_t _min;
    size_t _max;
  
  public:
<span class="line-modified">!   JVMFlagRange_size_t(const JVMFlag* flag, size_t min, size_t max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_size_t(_flag-&gt;get_size_t(), verbose);</span>
    }
  
    JVMFlag::Error check_size_t(size_t value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 223,19 ***</span>
  };
  
  class JVMFlagRange_double : public JVMFlagRange {
    double _min;
    double _max;
<span class="line-removed">-   const double* _ptr;</span>
  
  public:
<span class="line-modified">!   // the &quot;name&quot; argument must be a string literal</span>
<span class="line-modified">!   JVMFlagRange_double(const char* name, const double* ptr, double min, double max)</span>
<span class="line-removed">-     : JVMFlagRange(name), _min(min), _max(max), _ptr(ptr) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_double(*_ptr, verbose);</span>
    }
  
    JVMFlag::Error check_double(double value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
<span class="line-new-header">--- 213,17 ---</span>
  };
  
  class JVMFlagRange_double : public JVMFlagRange {
    double _min;
    double _max;
  
  public:
<span class="line-modified">!   JVMFlagRange_double(const JVMFlag* flag, double min, double max)</span>
<span class="line-modified">!     : JVMFlagRange(flag), _min(min), _max(max) {}</span>
  
    JVMFlag::Error check(bool verbose = true) {
<span class="line-modified">!     return check_double(_flag-&gt;get_double(), verbose);</span>
    }
  
    JVMFlag::Error check_double(double value, bool verbose = true) {
      if ((value &lt; _min) || (value &gt; _max)) {
        JVMFlag::printError(verbose,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 255,66 ***</span>
  
  // No constraint emitting
  void emit_range_no(...)                         { /* NOP */ }
  
  // No constraint emitting if function argument is NOT provided
<span class="line-modified">! void emit_range_bool(const char* /*name*/, const bool* /*value*/)            { /* NOP */ }</span>
<span class="line-modified">! void emit_range_ccstr(const char* /*name*/, const ccstr* /*value*/)          { /* NOP */ }</span>
<span class="line-modified">! void emit_range_ccstrlist(const char* /*name*/, const ccstrlist* /*value*/)  { /* NOP */ }</span>
<span class="line-modified">! void emit_range_int(const char* /*name*/, const int* /*value*/)              { /* NOP */ }</span>
<span class="line-modified">! void emit_range_intx(const char* /*name*/, const intx* /*value*/)            { /* NOP */ }</span>
<span class="line-modified">! void emit_range_uint(const char* /*name*/, const uint* /*value*/)            { /* NOP */ }</span>
<span class="line-modified">! void emit_range_uintx(const char* /*name*/, const uintx* /*value*/)          { /* NOP */ }</span>
<span class="line-modified">! void emit_range_uint64_t(const char* /*name*/, const uint64_t* /*value*/)    { /* NOP */ }</span>
<span class="line-modified">! void emit_range_size_t(const char* /*name*/, const size_t* /*value*/)        { /* NOP */ }</span>
<span class="line-modified">! void emit_range_double(const char* /*name*/, const double* /*value*/)        { /* NOP */ }</span>
  
  // JVMFlagRange emitting code functions if range arguments are provided
<span class="line-modified">! void emit_range_int(const char* name, const int* ptr, int min, int max)       {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_int(name, ptr, min, max));</span>
  }
<span class="line-modified">! void emit_range_intx(const char* name, const intx* ptr, intx min, intx max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_intx(name, ptr, min, max));</span>
  }
<span class="line-modified">! void emit_range_uint(const char* name, const uint* ptr, uint min, uint max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_uint(name, ptr, min, max));</span>
  }
<span class="line-modified">! void emit_range_uintx(const char* name, const uintx* ptr, uintx min, uintx max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_uintx(name, ptr, min, max));</span>
  }
<span class="line-modified">! void emit_range_uint64_t(const char* name, const uint64_t* ptr, uint64_t min, uint64_t max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_uint64_t(name, ptr, min, max));</span>
  }
<span class="line-modified">! void emit_range_size_t(const char* name, const size_t* ptr, size_t min, size_t max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_size_t(name, ptr, min, max));</span>
  }
<span class="line-modified">! void emit_range_double(const char* name, const double* ptr, double min, double max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_double(name, ptr, min, max));</span>
  }
  
  // Generate code to call emit_range_xxx function
<span class="line-modified">! #define EMIT_RANGE_PRODUCT_FLAG(type, name, value, doc)      ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_DIAGNOSTIC_FLAG(type, name, value, doc)   ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_EXPERIMENTAL_FLAG(type, name, value, doc) ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_MANAGEABLE_FLAG(type, name, value, doc)   ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_PRODUCT_RW_FLAG(type, name, value, doc)   ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_PD_PRODUCT_FLAG(type, name, doc)          ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_PD_DIAGNOSTIC_FLAG(type, name, doc)       ); emit_range_##type(#name,&amp;name</span>
  #ifndef PRODUCT
<span class="line-modified">! #define EMIT_RANGE_DEVELOPER_FLAG(type, name, value, doc)    ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_PD_DEVELOPER_FLAG(type, name, doc)        ); emit_range_##type(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_NOTPRODUCT_FLAG(type, name, value, doc)   ); emit_range_##type(#name,&amp;name</span>
  #else
<span class="line-modified">! #define EMIT_RANGE_DEVELOPER_FLAG(type, name, value, doc)    ); emit_range_no(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_PD_DEVELOPER_FLAG(type, name, doc)        ); emit_range_no(#name,&amp;name</span>
<span class="line-modified">! #define EMIT_RANGE_NOTPRODUCT_FLAG(type, name, value, doc)   ); emit_range_no(#name,&amp;name</span>
  #endif
  #ifdef _LP64
<span class="line-modified">! #define EMIT_RANGE_LP64_PRODUCT_FLAG(type, name, value, doc) ); emit_range_##type(#name,&amp;name</span>
  #else
<span class="line-modified">! #define EMIT_RANGE_LP64_PRODUCT_FLAG(type, name, value, doc) ); emit_range_no(#name,&amp;name</span>
  #endif
  
  // Generate func argument to pass into emit_range_xxx functions
  #define EMIT_RANGE_CHECK(a, b)                               , a, b
  
  #define INITIAL_RANGES_SIZE 379
<span class="line-new-header">--- 243,70 ---</span>
  
  // No constraint emitting
  void emit_range_no(...)                         { /* NOP */ }
  
  // No constraint emitting if function argument is NOT provided
<span class="line-modified">! void emit_range_bool(const JVMFlag* /*flag*/)      { /* NOP */ }</span>
<span class="line-modified">! void emit_range_ccstr(const JVMFlag* /*flag*/)     { /* NOP */ }</span>
<span class="line-modified">! void emit_range_ccstrlist(const JVMFlag* /*flag*/) { /* NOP */ }</span>
<span class="line-modified">! void emit_range_int(const JVMFlag* /*flag*/)       { /* NOP */ }</span>
<span class="line-modified">! void emit_range_intx(const JVMFlag* /*flag*/)      { /* NOP */ }</span>
<span class="line-modified">! void emit_range_uint(const JVMFlag* /*flag*/)      { /* NOP */ }</span>
<span class="line-modified">! void emit_range_uintx(const JVMFlag* /*flag*/)     { /* NOP */ }</span>
<span class="line-modified">! void emit_range_uint64_t(const JVMFlag* /*flag*/)  { /* NOP */ }</span>
<span class="line-modified">! void emit_range_size_t(const JVMFlag* /*flag*/)    { /* NOP */ }</span>
<span class="line-modified">! void emit_range_double(const JVMFlag* /*flag*/)    { /* NOP */ }</span>
  
  // JVMFlagRange emitting code functions if range arguments are provided
<span class="line-modified">! void emit_range_int(const JVMFlag* flag, int min, int max)       {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_int(flag, min, max));</span>
  }
<span class="line-modified">! void emit_range_intx(const JVMFlag* flag, intx min, intx max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_intx(flag, min, max));</span>
  }
<span class="line-modified">! void emit_range_uint(const JVMFlag* flag, uint min, uint max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_uint(flag, min, max));</span>
  }
<span class="line-modified">! void emit_range_uintx(const JVMFlag* flag, uintx min, uintx max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_uintx(flag, min, max));</span>
  }
<span class="line-modified">! void emit_range_uint64_t(const JVMFlag* flag, uint64_t min, uint64_t max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_uint64_t(flag, min, max));</span>
  }
<span class="line-modified">! void emit_range_size_t(const JVMFlag* flag, size_t min, size_t max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_size_t(flag, min, max));</span>
  }
<span class="line-modified">! void emit_range_double(const JVMFlag* flag, double min, double max) {</span>
<span class="line-modified">!   JVMFlagRangeList::add(new JVMFlagRange_double(flag, min, max));</span>
  }
  
  // Generate code to call emit_range_xxx function
<span class="line-modified">! #define EMIT_RANGE_START       (void)(0</span>
<span class="line-modified">! #define EMIT_RANGE(type, name) ); emit_range_##type(JVMFlagEx::flag_from_enum(FLAG_MEMBER_ENUM(name))</span>
<span class="line-modified">! #define EMIT_RANGE_NO          ); emit_range_no(0</span>
<span class="line-modified">! #define EMIT_RANGE_PRODUCT_FLAG(type, name, value, doc)      EMIT_RANGE(type, name)</span>
<span class="line-modified">! #define EMIT_RANGE_DIAGNOSTIC_FLAG(type, name, value, doc)   EMIT_RANGE(type, name)</span>
<span class="line-modified">! #define EMIT_RANGE_EXPERIMENTAL_FLAG(type, name, value, doc) EMIT_RANGE(type, name)</span>
<span class="line-modified">! #define EMIT_RANGE_MANAGEABLE_FLAG(type, name, value, doc)   EMIT_RANGE(type, name)</span>
<span class="line-added">+ #define EMIT_RANGE_PRODUCT_RW_FLAG(type, name, value, doc)   EMIT_RANGE(type, name)</span>
<span class="line-added">+ #define EMIT_RANGE_PD_PRODUCT_FLAG(type, name, doc)          EMIT_RANGE(type, name)</span>
<span class="line-added">+ #define EMIT_RANGE_PD_DIAGNOSTIC_FLAG(type, name, doc)       EMIT_RANGE(type, name)</span>
  #ifndef PRODUCT
<span class="line-modified">! #define EMIT_RANGE_DEVELOPER_FLAG(type, name, value, doc)    EMIT_RANGE(type, name)</span>
<span class="line-modified">! #define EMIT_RANGE_PD_DEVELOPER_FLAG(type, name, doc)        EMIT_RANGE(type, name)</span>
<span class="line-modified">! #define EMIT_RANGE_NOTPRODUCT_FLAG(type, name, value, doc)   EMIT_RANGE(type, name)</span>
  #else
<span class="line-modified">! #define EMIT_RANGE_DEVELOPER_FLAG(type, name, value, doc)    EMIT_RANGE_NO</span>
<span class="line-modified">! #define EMIT_RANGE_PD_DEVELOPER_FLAG(type, name, doc)        EMIT_RANGE_NO</span>
<span class="line-modified">! #define EMIT_RANGE_NOTPRODUCT_FLAG(type, name, value, doc)   EMIT_RANGE_NO</span>
  #endif
  #ifdef _LP64
<span class="line-modified">! #define EMIT_RANGE_LP64_PRODUCT_FLAG(type, name, value, doc) EMIT_RANGE(type, name)</span>
  #else
<span class="line-modified">! #define EMIT_RANGE_LP64_PRODUCT_FLAG(type, name, value, doc) EMIT_RANGE_NO</span>
  #endif
<span class="line-added">+ #define EMIT_RANGE_END         );</span>
  
  // Generate func argument to pass into emit_range_xxx functions
  #define EMIT_RANGE_CHECK(a, b)                               , a, b
  
  #define INITIAL_RANGES_SIZE 379
</pre>
<hr />
<pre>
<span class="line-old-header">*** 323,96 ***</span>
  // Check the ranges of all flags that have them
  void JVMFlagRangeList::init(void) {
  
    _ranges = new (ResourceObj::C_HEAP, mtArguments) GrowableArray&lt;JVMFlagRange*&gt;(INITIAL_RANGES_SIZE, true);
  
<span class="line-modified">!   emit_range_no(NULL VM_FLAGS(EMIT_RANGE_DEVELOPER_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_PD_DEVELOPER_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_PRODUCT_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_PD_PRODUCT_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_DIAGNOSTIC_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_PD_DIAGNOSTIC_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_EXPERIMENTAL_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_NOTPRODUCT_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_MANAGEABLE_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_PRODUCT_RW_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_LP64_PRODUCT_FLAG,</span>
<span class="line-modified">!                               EMIT_RANGE_CHECK,</span>
<span class="line-modified">!                               IGNORE_CONSTRAINT,</span>
<span class="line-modified">!                               IGNORE_WRITEABLE));</span>
<span class="line-modified">! </span>
<span class="line-modified">!   EMIT_RANGES_FOR_GLOBALS_EXT</span>
<span class="line-modified">! </span>
<span class="line-removed">-   emit_range_no(NULL ARCH_FLAGS(EMIT_RANGE_DEVELOPER_FLAG,</span>
<span class="line-removed">-                                 EMIT_RANGE_PRODUCT_FLAG,</span>
<span class="line-removed">-                                 EMIT_RANGE_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                                 EMIT_RANGE_EXPERIMENTAL_FLAG,</span>
<span class="line-removed">-                                 EMIT_RANGE_NOTPRODUCT_FLAG,</span>
<span class="line-removed">-                                 EMIT_RANGE_CHECK,</span>
<span class="line-removed">-                                 IGNORE_CONSTRAINT,</span>
<span class="line-removed">-                                 IGNORE_WRITEABLE));</span>
<span class="line-removed">- </span>
<span class="line-removed">- #if INCLUDE_JVMCI</span>
<span class="line-removed">-   emit_range_no(NULL JVMCI_FLAGS(EMIT_RANGE_DEVELOPER_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_PD_DEVELOPER_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_PRODUCT_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_PD_PRODUCT_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_PD_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_EXPERIMENTAL_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_NOTPRODUCT_FLAG,</span>
<span class="line-removed">-                                  EMIT_RANGE_CHECK,</span>
<span class="line-removed">-                                  IGNORE_CONSTRAINT,</span>
<span class="line-removed">-                                  IGNORE_WRITEABLE));</span>
<span class="line-removed">- #endif // INCLUDE_JVMCI</span>
<span class="line-removed">- </span>
<span class="line-removed">- #ifdef COMPILER1</span>
<span class="line-removed">-   emit_range_no(NULL C1_FLAGS(EMIT_RANGE_DEVELOPER_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PD_DEVELOPER_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PRODUCT_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PD_PRODUCT_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PD_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_NOTPRODUCT_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_CHECK,</span>
<span class="line-removed">-                               IGNORE_CONSTRAINT,</span>
<span class="line-removed">-                               IGNORE_WRITEABLE));</span>
<span class="line-removed">- #endif // COMPILER1</span>
<span class="line-removed">- </span>
<span class="line-removed">- #ifdef COMPILER2</span>
<span class="line-removed">-   emit_range_no(NULL C2_FLAGS(EMIT_RANGE_DEVELOPER_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PD_DEVELOPER_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PRODUCT_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PD_PRODUCT_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_PD_DIAGNOSTIC_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_EXPERIMENTAL_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_NOTPRODUCT_FLAG,</span>
<span class="line-removed">-                               EMIT_RANGE_CHECK,</span>
<span class="line-removed">-                               IGNORE_CONSTRAINT,</span>
<span class="line-removed">-                               IGNORE_WRITEABLE));</span>
<span class="line-removed">- #endif // COMPILER2</span>
  }
  
<span class="line-modified">! JVMFlagRange* JVMFlagRangeList::find(const char* name) {</span>
    JVMFlagRange* found = NULL;
    for (int i=0; i&lt;length(); i++) {
      JVMFlagRange* range = at(i);
<span class="line-modified">!     if (strcmp(range-&gt;name(), name) == 0) {</span>
        found = range;
        break;
      }
    }
    return found;
  }
  
<span class="line-modified">! void JVMFlagRangeList::print(outputStream* st, const char* name, RangeStrFunc default_range_str_func) {</span>
<span class="line-modified">!   JVMFlagRange* range = JVMFlagRangeList::find(name);</span>
    if (range != NULL) {
      range-&gt;print(st);
    } else {
<span class="line-modified">!     JVMFlagConstraint* constraint = JVMFlagConstraintList::find(name);</span>
      if (constraint != NULL) {
        assert(default_range_str_func!=NULL, &quot;default_range_str_func must be provided&quot;);
        st-&gt;print(&quot;%s&quot;, default_range_str_func());
      } else {
        st-&gt;print(&quot;[                           ...                           ]&quot;);
<span class="line-new-header">--- 315,47 ---</span>
  // Check the ranges of all flags that have them
  void JVMFlagRangeList::init(void) {
  
    _ranges = new (ResourceObj::C_HEAP, mtArguments) GrowableArray&lt;JVMFlagRange*&gt;(INITIAL_RANGES_SIZE, true);
  
<span class="line-modified">!   EMIT_RANGE_START</span>
<span class="line-modified">! </span>
<span class="line-modified">!   ALL_FLAGS(EMIT_RANGE_DEVELOPER_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_PD_DEVELOPER_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_PRODUCT_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_PD_PRODUCT_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_DIAGNOSTIC_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_PD_DIAGNOSTIC_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_EXPERIMENTAL_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_NOTPRODUCT_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_MANAGEABLE_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_PRODUCT_RW_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_LP64_PRODUCT_FLAG,</span>
<span class="line-modified">!             EMIT_RANGE_CHECK,</span>
<span class="line-modified">!             IGNORE_CONSTRAINT)</span>
<span class="line-modified">! </span>
<span class="line-modified">!   EMIT_RANGE_END</span>
  }
  
<span class="line-modified">! JVMFlagRange* JVMFlagRangeList::find(const JVMFlag* flag) {</span>
    JVMFlagRange* found = NULL;
    for (int i=0; i&lt;length(); i++) {
      JVMFlagRange* range = at(i);
<span class="line-modified">!     if (range-&gt;flag() == flag) {</span>
        found = range;
        break;
      }
    }
    return found;
  }
  
<span class="line-modified">! void JVMFlagRangeList::print(outputStream* st, const JVMFlag* flag, RangeStrFunc default_range_str_func) {</span>
<span class="line-modified">!   JVMFlagRange* range = JVMFlagRangeList::find(flag);</span>
    if (range != NULL) {
      range-&gt;print(st);
    } else {
<span class="line-modified">!     JVMFlagConstraint* constraint = JVMFlagConstraintList::find(flag);</span>
      if (constraint != NULL) {
        assert(default_range_str_func!=NULL, &quot;default_range_str_func must be provided&quot;);
        st-&gt;print(&quot;%s&quot;, default_range_str_func());
      } else {
        st-&gt;print(&quot;[                           ...                           ]&quot;);
</pre>
<center><a href="jvmFlagConstraintsRuntime.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jvmFlagRangeList.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>