<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/flags/jvmFlagConstraintList.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jvmFlagConstraintList.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jvmFlagConstraintsCompiler.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/flags/jvmFlagConstraintList.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 43 typedef JVMFlag::Error (*JVMFlagConstraintFunc_int)(int value, bool verbose);
 44 typedef JVMFlag::Error (*JVMFlagConstraintFunc_intx)(intx value, bool verbose);
 45 typedef JVMFlag::Error (*JVMFlagConstraintFunc_uint)(uint value, bool verbose);
 46 typedef JVMFlag::Error (*JVMFlagConstraintFunc_uintx)(uintx value, bool verbose);
 47 typedef JVMFlag::Error (*JVMFlagConstraintFunc_uint64_t)(uint64_t value, bool verbose);
 48 typedef JVMFlag::Error (*JVMFlagConstraintFunc_size_t)(size_t value, bool verbose);
 49 typedef JVMFlag::Error (*JVMFlagConstraintFunc_double)(double value, bool verbose);
 50 
 51 class JVMFlagConstraint : public CHeapObj&lt;mtArguments&gt; {
 52 public:
 53   // During VM initialization, constraint validation will be done order of ConstraintType.
 54   enum ConstraintType {
 55     // Will be validated during argument processing (Arguments::parse_argument).
 56     AtParse         = 0,
 57     // Will be validated inside Threads::create_vm(), right after Arguments::apply_ergo().
 58     AfterErgo       = 1,
 59     // Will be validated inside universe_init(), right after Metaspace::global_initialize().
 60     AfterMemoryInit = 2
 61   };
 62 



 63 private:
<span class="line-removed"> 64   const char* _name;</span>
 65   ConstraintType _validate_type;
 66 
 67 public:
 68   // the &quot;name&quot; argument must be a string literal
<span class="line-modified"> 69   JVMFlagConstraint(const char* name, ConstraintType type) { _name=name; _validate_type=type; };</span>
<span class="line-modified"> 70   ~JVMFlagConstraint() {};</span>
<span class="line-modified"> 71   const char* name() const { return _name; }</span>
 72   ConstraintType type() const { return _validate_type; }
 73   virtual JVMFlag::Error apply(bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 74   virtual JVMFlag::Error apply_bool(bool value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 75   virtual JVMFlag::Error apply_int(int value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 76   virtual JVMFlag::Error apply_intx(intx value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 77   virtual JVMFlag::Error apply_uint(uint value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 78   virtual JVMFlag::Error apply_uintx(uintx value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 79   virtual JVMFlag::Error apply_uint64_t(uint64_t value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 80   virtual JVMFlag::Error apply_size_t(size_t value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 81   virtual JVMFlag::Error apply_double(double value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 82 };
 83 
 84 class JVMFlagConstraintList : public AllStatic {
 85 private:
 86   static GrowableArray&lt;JVMFlagConstraint*&gt;* _constraints;
 87   // Latest constraint validation type.
 88   static JVMFlagConstraint::ConstraintType _validating_type;
 89 public:
 90   static void init();
 91   static int length() { return (_constraints != NULL) ? _constraints-&gt;length() : 0; }
 92   static JVMFlagConstraint* at(int i) { return (_constraints != NULL) ? _constraints-&gt;at(i) : NULL; }
<span class="line-modified"> 93   static JVMFlagConstraint* find(const char* name);</span>
<span class="line-modified"> 94   static JVMFlagConstraint* find_if_needs_check(const char* name);</span>
 95   static void add(JVMFlagConstraint* constraint) { _constraints-&gt;append(constraint); }
 96   // True if &#39;AfterErgo&#39; or later constraint functions are validated.
 97   static bool validated_after_ergo() { return _validating_type &gt;= JVMFlagConstraint::AfterErgo; };
 98   static bool check_constraints(JVMFlagConstraint::ConstraintType type);
 99 };
100 
101 #endif // SHARE_RUNTIME_FLAGS_JVMFLAGCONSTRAINTLIST_HPP
</pre>
</td>
<td>
<hr />
<pre>
 43 typedef JVMFlag::Error (*JVMFlagConstraintFunc_int)(int value, bool verbose);
 44 typedef JVMFlag::Error (*JVMFlagConstraintFunc_intx)(intx value, bool verbose);
 45 typedef JVMFlag::Error (*JVMFlagConstraintFunc_uint)(uint value, bool verbose);
 46 typedef JVMFlag::Error (*JVMFlagConstraintFunc_uintx)(uintx value, bool verbose);
 47 typedef JVMFlag::Error (*JVMFlagConstraintFunc_uint64_t)(uint64_t value, bool verbose);
 48 typedef JVMFlag::Error (*JVMFlagConstraintFunc_size_t)(size_t value, bool verbose);
 49 typedef JVMFlag::Error (*JVMFlagConstraintFunc_double)(double value, bool verbose);
 50 
 51 class JVMFlagConstraint : public CHeapObj&lt;mtArguments&gt; {
 52 public:
 53   // During VM initialization, constraint validation will be done order of ConstraintType.
 54   enum ConstraintType {
 55     // Will be validated during argument processing (Arguments::parse_argument).
 56     AtParse         = 0,
 57     // Will be validated inside Threads::create_vm(), right after Arguments::apply_ergo().
 58     AfterErgo       = 1,
 59     // Will be validated inside universe_init(), right after Metaspace::global_initialize().
 60     AfterMemoryInit = 2
 61   };
 62 
<span class="line-added"> 63 protected:</span>
<span class="line-added"> 64   const JVMFlag* const _flag;</span>
<span class="line-added"> 65 </span>
 66 private:

 67   ConstraintType _validate_type;
 68 
 69 public:
 70   // the &quot;name&quot; argument must be a string literal
<span class="line-modified"> 71   JVMFlagConstraint(const JVMFlag* flag, ConstraintType type) : _flag(flag), _validate_type(type) {}</span>
<span class="line-modified"> 72   ~JVMFlagConstraint() {}</span>
<span class="line-modified"> 73   const JVMFlag* flag() const { return _flag; }</span>
 74   ConstraintType type() const { return _validate_type; }
 75   virtual JVMFlag::Error apply(bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 76   virtual JVMFlag::Error apply_bool(bool value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 77   virtual JVMFlag::Error apply_int(int value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 78   virtual JVMFlag::Error apply_intx(intx value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 79   virtual JVMFlag::Error apply_uint(uint value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 80   virtual JVMFlag::Error apply_uintx(uintx value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 81   virtual JVMFlag::Error apply_uint64_t(uint64_t value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 82   virtual JVMFlag::Error apply_size_t(size_t value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 83   virtual JVMFlag::Error apply_double(double value, bool verbose = true) { ShouldNotReachHere(); return JVMFlag::ERR_OTHER; };
 84 };
 85 
 86 class JVMFlagConstraintList : public AllStatic {
 87 private:
 88   static GrowableArray&lt;JVMFlagConstraint*&gt;* _constraints;
 89   // Latest constraint validation type.
 90   static JVMFlagConstraint::ConstraintType _validating_type;
 91 public:
 92   static void init();
 93   static int length() { return (_constraints != NULL) ? _constraints-&gt;length() : 0; }
 94   static JVMFlagConstraint* at(int i) { return (_constraints != NULL) ? _constraints-&gt;at(i) : NULL; }
<span class="line-modified"> 95   static JVMFlagConstraint* find(const JVMFlag* flag);</span>
<span class="line-modified"> 96   static JVMFlagConstraint* find_if_needs_check(const JVMFlag* flag);</span>
 97   static void add(JVMFlagConstraint* constraint) { _constraints-&gt;append(constraint); }
 98   // True if &#39;AfterErgo&#39; or later constraint functions are validated.
 99   static bool validated_after_ergo() { return _validating_type &gt;= JVMFlagConstraint::AfterErgo; };
100   static bool check_constraints(JVMFlagConstraint::ConstraintType type);
101 };
102 
103 #endif // SHARE_RUNTIME_FLAGS_JVMFLAGCONSTRAINTLIST_HPP
</pre>
</td>
</tr>
</table>
<center><a href="jvmFlagConstraintList.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jvmFlagConstraintsCompiler.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>