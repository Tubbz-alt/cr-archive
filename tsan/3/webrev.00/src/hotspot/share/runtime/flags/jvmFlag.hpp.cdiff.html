<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/runtime/flags/jvmFlag.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jvmFlag.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jvmFlagConstraintList.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/flags/jvmFlag.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 42,12 ***</span>
      CONFIG_FILE      = 3,
      MANAGEMENT       = 4,
      ERGONOMIC        = 5,
      ATTACH_ON_DEMAND = 6,
      INTERNAL         = 7,
  
<span class="line-modified">!     LAST_VALUE_ORIGIN = INTERNAL,</span>
      VALUE_ORIGIN_BITS = 4,
      VALUE_ORIGIN_MASK = right_n_bits(VALUE_ORIGIN_BITS),
  
      // flag kind
      KIND_PRODUCT            = 1 &lt;&lt; 4,
<span class="line-new-header">--- 42,13 ---</span>
      CONFIG_FILE      = 3,
      MANAGEMENT       = 4,
      ERGONOMIC        = 5,
      ATTACH_ON_DEMAND = 6,
      INTERNAL         = 7,
<span class="line-added">+     JIMAGE_RESOURCE  = 8,</span>
  
<span class="line-modified">!     LAST_VALUE_ORIGIN = JIMAGE_RESOURCE,</span>
      VALUE_ORIGIN_BITS = 4,
      VALUE_ORIGIN_MASK = right_n_bits(VALUE_ORIGIN_BITS),
  
      // flag kind
      KIND_PRODUCT            = 1 &lt;&lt; 4,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 116,60 ***</span>
    static JVMFlag* flags;
  
    // number of flags
    static size_t numFlags;
  
<span class="line-modified">!   static JVMFlag* find_flag(const char* name) { return find_flag(name, strlen(name), true, true); };</span>
<span class="line-modified">!   static JVMFlag* find_flag(const char* name, size_t length, bool allow_locked = false, bool return_flag = false);</span>
    static JVMFlag* fuzzy_match(const char* name, size_t length, bool allow_locked = false);
  
    static const char* get_int_default_range_str();
    static const char* get_uint_default_range_str();
    static const char* get_intx_default_range_str();
    static const char* get_uintx_default_range_str();
    static const char* get_uint64_t_default_range_str();
    static const char* get_size_t_default_range_str();
    static const char* get_double_default_range_str();
  
<span class="line-removed">-   JVMFlag::Error check_writable(bool changed);</span>
<span class="line-removed">- </span>
    bool is_bool() const;
<span class="line-modified">!   bool get_bool() const;</span>
<span class="line-modified">!   JVMFlag::Error set_bool(bool value);</span>
  
    bool is_int() const;
<span class="line-modified">!   int get_int() const;</span>
<span class="line-modified">!   JVMFlag::Error set_int(int value);</span>
  
    bool is_uint() const;
<span class="line-modified">!   uint get_uint() const;</span>
<span class="line-modified">!   JVMFlag::Error set_uint(uint value);</span>
  
    bool is_intx() const;
<span class="line-modified">!   intx get_intx() const;</span>
<span class="line-modified">!   JVMFlag::Error set_intx(intx value);</span>
  
    bool is_uintx() const;
<span class="line-modified">!   uintx get_uintx() const;</span>
<span class="line-modified">!   JVMFlag::Error set_uintx(uintx value);</span>
  
    bool is_uint64_t() const;
<span class="line-modified">!   uint64_t get_uint64_t() const;</span>
<span class="line-modified">!   JVMFlag::Error set_uint64_t(uint64_t value);</span>
  
    bool is_size_t() const;
<span class="line-modified">!   size_t get_size_t() const;</span>
<span class="line-modified">!   JVMFlag::Error set_size_t(size_t value);</span>
  
    bool is_double() const;
<span class="line-modified">!   double get_double() const;</span>
<span class="line-modified">!   JVMFlag::Error set_double(double value);</span>
  
    bool is_ccstr() const;
    bool ccstr_accumulates() const;
<span class="line-modified">!   ccstr get_ccstr() const;</span>
<span class="line-modified">!   JVMFlag::Error set_ccstr(ccstr value);</span>
  
    Flags get_origin();
    void set_origin(Flags origin);
  
    size_t get_name_length();
<span class="line-new-header">--- 117,70 ---</span>
    static JVMFlag* flags;
  
    // number of flags
    static size_t numFlags;
  
<span class="line-modified">! private:</span>
<span class="line-modified">!   static JVMFlag* find_flag(const char* name, size_t length, bool allow_locked, bool return_flag);</span>
<span class="line-added">+ </span>
<span class="line-added">+ public:</span>
<span class="line-added">+   static JVMFlag* find_flag(const char* name) {</span>
<span class="line-added">+     return find_flag(name, strlen(name), false, false);</span>
<span class="line-added">+   }</span>
<span class="line-added">+   static const JVMFlag* find_declared_flag(const char* name, size_t length) {</span>
<span class="line-added">+     return find_flag(name, length, true, true);</span>
<span class="line-added">+   }</span>
<span class="line-added">+   static const JVMFlag* find_declared_flag(const char* name) {</span>
<span class="line-added">+     return find_declared_flag(name, strlen(name));</span>
<span class="line-added">+   }</span>
<span class="line-added">+ </span>
    static JVMFlag* fuzzy_match(const char* name, size_t length, bool allow_locked = false);
  
    static const char* get_int_default_range_str();
    static const char* get_uint_default_range_str();
    static const char* get_intx_default_range_str();
    static const char* get_uintx_default_range_str();
    static const char* get_uint64_t_default_range_str();
    static const char* get_size_t_default_range_str();
    static const char* get_double_default_range_str();
  
    bool is_bool() const;
<span class="line-modified">!   bool get_bool() const                       { return *((bool*) _addr); }</span>
<span class="line-modified">!   void set_bool(bool value)                   { *((bool*) _addr) = value; }</span>
  
    bool is_int() const;
<span class="line-modified">!   int get_int() const                         { return *((int*) _addr); }</span>
<span class="line-modified">!   void set_int(int value)                     { *((int*) _addr) = value; }</span>
  
    bool is_uint() const;
<span class="line-modified">!   uint get_uint() const                       { return *((uint*) _addr); }</span>
<span class="line-modified">!   void set_uint(uint value)                   { *((uint*) _addr) = value; }</span>
  
    bool is_intx() const;
<span class="line-modified">!   intx get_intx() const                       { return *((intx*) _addr); }</span>
<span class="line-modified">!   void set_intx(intx value)                   { *((intx*) _addr) = value; }</span>
  
    bool is_uintx() const;
<span class="line-modified">!   uintx get_uintx() const                     { return *((uintx*) _addr); }</span>
<span class="line-modified">!   void set_uintx(uintx value)                 { *((uintx*) _addr) = value; }</span>
  
    bool is_uint64_t() const;
<span class="line-modified">!   uint64_t get_uint64_t() const               { return *((uint64_t*) _addr); }</span>
<span class="line-modified">!   void set_uint64_t(uint64_t value)           { *((uint64_t*) _addr) = value; }</span>
  
    bool is_size_t() const;
<span class="line-modified">!   size_t get_size_t() const                   { return *((size_t*) _addr); }</span>
<span class="line-modified">!   void set_size_t(size_t value)               { *((size_t*) _addr) = value; }</span>
  
    bool is_double() const;
<span class="line-modified">!   double get_double() const                   { return *((double*) _addr); }</span>
<span class="line-modified">!   void set_double(double value)               { *((double*) _addr) = value; }</span>
  
    bool is_ccstr() const;
    bool ccstr_accumulates() const;
<span class="line-modified">!   ccstr get_ccstr() const                     { return *((ccstr*) _addr); }</span>
<span class="line-modified">!   void set_ccstr(ccstr value)                 { *((ccstr*) _addr) = value; }</span>
  
    Flags get_origin();
    void set_origin(Flags origin);
  
    size_t get_name_length();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 192,16 ***</span>
    bool is_unlocker() const;
    bool is_unlocked() const;
    bool is_writeable() const;
    bool is_external() const;
  
<span class="line-removed">-   bool is_unlocker_ext() const;</span>
<span class="line-removed">-   bool is_unlocked_ext() const;</span>
<span class="line-removed">-   bool is_writeable_ext() const;</span>
<span class="line-removed">-   bool is_external_ext() const;</span>
<span class="line-removed">- </span>
    void clear_diagnostic();
  
    JVMFlag::MsgType get_locked_message(char*, int) const;
    JVMFlag::MsgType get_locked_message_ext(char*, int) const;
  
    // printRanges will print out flags type, name and range values as expected by -XX:+PrintFlagsRanges
<span class="line-new-header">--- 203,13 ---</span>
    bool is_unlocker() const;
    bool is_unlocked() const;
    bool is_writeable() const;
    bool is_external() const;
  
    void clear_diagnostic();
<span class="line-added">+   void clear_experimental();</span>
<span class="line-added">+   void set_product();</span>
  
    JVMFlag::MsgType get_locked_message(char*, int) const;
    JVMFlag::MsgType get_locked_message_ext(char*, int) const;
  
    // printRanges will print out flags type, name and range values as expected by -XX:+PrintFlagsRanges
</pre>
<hr />
<pre>
<span class="line-old-header">*** 211,67 ***</span>
    void print_as_flag(outputStream* st);
  
    static const char* flag_error_str(JVMFlag::Error error);
  
  public:
<span class="line-modified">!   static JVMFlag::Error boolAt(const char* name, size_t len, bool* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error boolAt(const char* name, bool* value, bool allow_locked = false, bool return_flag = false)      { return boolAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error boolAtPut(JVMFlag* flag, bool* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error boolAtPut(const char* name, size_t len, bool* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error boolAtPut(const char* name, bool* value, JVMFlag::Flags origin)   { return boolAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error intAt(const char* name, size_t len, int* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error intAt(const char* name, int* value, bool allow_locked = false, bool return_flag = false)      { return intAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error intAtPut(JVMFlag* flag, int* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error intAtPut(const char* name, size_t len, int* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error intAtPut(const char* name, int* value, JVMFlag::Flags origin)   { return intAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error uintAt(const char* name, size_t len, uint* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error uintAt(const char* name, uint* value, bool allow_locked = false, bool return_flag = false)      { return uintAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error uintAtPut(JVMFlag* flag, uint* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error uintAtPut(const char* name, size_t len, uint* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error uintAtPut(const char* name, uint* value, JVMFlag::Flags origin)   { return uintAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error intxAt(const char* name, size_t len, intx* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error intxAt(const char* name, intx* value, bool allow_locked = false, bool return_flag = false)      { return intxAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error intxAtPut(JVMFlag* flag, intx* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error intxAtPut(const char* name, size_t len, intx* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error intxAtPut(const char* name, intx* value, JVMFlag::Flags origin)   { return intxAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error uintxAt(const char* name, size_t len, uintx* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error uintxAt(const char* name, uintx* value, bool allow_locked = false, bool return_flag = false)    { return uintxAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error uintxAtPut(JVMFlag* flag, uintx* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error uintxAtPut(const char* name, size_t len, uintx* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error uintxAtPut(const char* name, uintx* value, JVMFlag::Flags origin) { return uintxAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error size_tAt(const char* name, size_t len, size_t* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error size_tAt(const char* name, size_t* value, bool allow_locked = false, bool return_flag = false)    { return size_tAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error size_tAtPut(JVMFlag* flag, size_t* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error size_tAtPut(const char* name, size_t len, size_t* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error size_tAtPut(const char* name, size_t* value, JVMFlag::Flags origin) { return size_tAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error uint64_tAt(const char* name, size_t len, uint64_t* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error uint64_tAt(const char* name, uint64_t* value, bool allow_locked = false, bool return_flag = false) { return uint64_tAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error uint64_tAtPut(JVMFlag* flag, uint64_t* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error uint64_tAtPut(const char* name, size_t len, uint64_t* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error uint64_tAtPut(const char* name, uint64_t* value, JVMFlag::Flags origin) { return uint64_tAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error doubleAt(const char* name, size_t len, double* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error doubleAt(const char* name, double* value, bool allow_locked = false, bool return_flag = false)    { return doubleAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    static JVMFlag::Error doubleAtPut(JVMFlag* flag, double* value, JVMFlag::Flags origin);
<span class="line-removed">-   static JVMFlag::Error doubleAtPut(const char* name, size_t len, double* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error doubleAtPut(const char* name, double* value, JVMFlag::Flags origin) { return doubleAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-modified">!   static JVMFlag::Error ccstrAt(const char* name, size_t len, ccstr* value, bool allow_locked = false, bool return_flag = false);</span>
<span class="line-removed">-   static JVMFlag::Error ccstrAt(const char* name, ccstr* value, bool allow_locked = false, bool return_flag = false)    { return ccstrAt(name, strlen(name), value, allow_locked, return_flag); }</span>
    // Contract:  JVMFlag will make private copy of the incoming value.
    // Outgoing value is always malloc-ed, and caller MUST call free.
<span class="line-modified">!   static JVMFlag::Error ccstrAtPut(const char* name, size_t len, ccstr* value, JVMFlag::Flags origin);</span>
<span class="line-removed">-   static JVMFlag::Error ccstrAtPut(const char* name, ccstr* value, JVMFlag::Flags origin) { return ccstrAtPut(name, strlen(name), value, origin); }</span>
  
<span class="line-removed">-   // Returns false if name is not a command line flag.</span>
<span class="line-removed">-   static bool wasSetOnCmdline(const char* name, bool* value);</span>
    static void printSetFlags(outputStream* out);
  
    // printRanges will print out flags type, name and range values as expected by -XX:+PrintFlagsRanges
    static void printFlags(outputStream* out, bool withComments, bool printRanges = false, bool skipDefaults = false);
    static void printError(bool verbose, const char* msg, ...) ATTRIBUTE_PRINTF(2, 3);
<span class="line-new-header">--- 219,39 ---</span>
    void print_as_flag(outputStream* st);
  
    static const char* flag_error_str(JVMFlag::Error error);
  
  public:
<span class="line-modified">!   static JVMFlag::Error boolAt(const JVMFlag* flag, bool* value);</span>
    static JVMFlag::Error boolAtPut(JVMFlag* flag, bool* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error intAt(const JVMFlag* flag, int* value);</span>
    static JVMFlag::Error intAtPut(JVMFlag* flag, int* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error uintAt(const JVMFlag* flag, uint* value);</span>
    static JVMFlag::Error uintAtPut(JVMFlag* flag, uint* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error intxAt(const JVMFlag* flag, intx* value);</span>
    static JVMFlag::Error intxAtPut(JVMFlag* flag, intx* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error uintxAt(const JVMFlag* flag, uintx* value);</span>
    static JVMFlag::Error uintxAtPut(JVMFlag* flag, uintx* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error size_tAt(const JVMFlag* flag, size_t* value);</span>
    static JVMFlag::Error size_tAtPut(JVMFlag* flag, size_t* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error uint64_tAt(const JVMFlag* flag, uint64_t* value);</span>
    static JVMFlag::Error uint64_tAtPut(JVMFlag* flag, uint64_t* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error doubleAt(const JVMFlag* flag, double* value);</span>
    static JVMFlag::Error doubleAtPut(JVMFlag* flag, double* value, JVMFlag::Flags origin);
  
<span class="line-modified">!   static JVMFlag::Error ccstrAt(const JVMFlag* flag, ccstr* value);</span>
    // Contract:  JVMFlag will make private copy of the incoming value.
    // Outgoing value is always malloc-ed, and caller MUST call free.
<span class="line-modified">!   static JVMFlag::Error ccstrAtPut(JVMFlag* flag, ccstr* value, JVMFlag::Flags origin);</span>
  
    static void printSetFlags(outputStream* out);
  
    // printRanges will print out flags type, name and range values as expected by -XX:+PrintFlagsRanges
    static void printFlags(outputStream* out, bool withComments, bool printRanges = false, bool skipDefaults = false);
    static void printError(bool verbose, const char* msg, ...) ATTRIBUTE_PRINTF(2, 3);
</pre>
<center><a href="jvmFlag.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jvmFlagConstraintList.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>