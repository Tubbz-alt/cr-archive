<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/vmStructs.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="vmOperations.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmStructs.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/vmStructs.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
</pre>
<hr />
<pre>
  53 #include &quot;memory/allocation.inline.hpp&quot;
  54 #include &quot;memory/heap.hpp&quot;
  55 #include &quot;memory/metaspace/metablock.hpp&quot;
  56 #include &quot;memory/padded.hpp&quot;
  57 #include &quot;memory/referenceType.hpp&quot;
  58 #include &quot;memory/universe.hpp&quot;
  59 #include &quot;memory/virtualspace.hpp&quot;
  60 #include &quot;memory/filemap.hpp&quot;
  61 #include &quot;oops/array.hpp&quot;
  62 #include &quot;oops/arrayKlass.hpp&quot;
  63 #include &quot;oops/arrayOop.hpp&quot;
  64 #include &quot;oops/compiledICHolder.hpp&quot;
  65 #include &quot;oops/constMethod.hpp&quot;
  66 #include &quot;oops/constantPool.hpp&quot;
  67 #include &quot;oops/cpCache.hpp&quot;
  68 #include &quot;oops/instanceClassLoaderKlass.hpp&quot;
  69 #include &quot;oops/instanceKlass.hpp&quot;
  70 #include &quot;oops/instanceMirrorKlass.hpp&quot;
  71 #include &quot;oops/instanceOop.hpp&quot;
  72 #include &quot;oops/klass.hpp&quot;
<span class="line-modified">  73 #include &quot;oops/markOop.hpp&quot;</span>
  74 #include &quot;oops/method.hpp&quot;
  75 #include &quot;oops/methodCounters.hpp&quot;
  76 #include &quot;oops/methodData.hpp&quot;
  77 #include &quot;oops/objArrayKlass.hpp&quot;
  78 #include &quot;oops/objArrayOop.hpp&quot;
  79 #include &quot;oops/oop.inline.hpp&quot;
  80 #include &quot;oops/oopHandle.hpp&quot;
  81 #include &quot;oops/symbol.hpp&quot;
  82 #include &quot;oops/typeArrayKlass.hpp&quot;
  83 #include &quot;oops/typeArrayOop.hpp&quot;
  84 #include &quot;prims/jvmtiAgentThread.hpp&quot;
  85 #include &quot;runtime/arguments.hpp&quot;
  86 #include &quot;runtime/deoptimization.hpp&quot;
  87 #include &quot;runtime/flags/jvmFlag.hpp&quot;
  88 #include &quot;runtime/globals.hpp&quot;
  89 #include &quot;runtime/java.hpp&quot;
  90 #include &quot;runtime/javaCalls.hpp&quot;

  91 #include &quot;runtime/os.hpp&quot;
  92 #include &quot;runtime/perfMemory.hpp&quot;
  93 #include &quot;runtime/serviceThread.hpp&quot;
  94 #include &quot;runtime/sharedRuntime.hpp&quot;
  95 #include &quot;runtime/stubRoutines.hpp&quot;
  96 #include &quot;runtime/thread.inline.hpp&quot;

  97 #include &quot;runtime/vframeArray.hpp&quot;
  98 #include &quot;runtime/vmStructs.hpp&quot;
  99 #include &quot;utilities/globalDefinitions.hpp&quot;
 100 #include &quot;utilities/hashtable.hpp&quot;
 101 #include &quot;utilities/macros.hpp&quot;
 102 
 103 #include CPU_HEADER(vmStructs)
 104 #include OS_HEADER(vmStructs)
 105 #include OS_CPU_HEADER(vmStructs)
 106 
 107 #if INCLUDE_JVMCI
 108 # include &quot;jvmci/vmStructs_jvmci.hpp&quot;
 109 #endif
 110 
 111 
 112 #ifdef COMPILER2
 113 #include &quot;opto/addnode.hpp&quot;
 114 #include &quot;opto/block.hpp&quot;
 115 #include &quot;opto/callnode.hpp&quot;
 116 #include &quot;opto/castnode.hpp&quot;
</pre>
<hr />
<pre>
 149 
 150 #ifndef REG_COUNT
 151   #define REG_COUNT 0
 152 #endif
 153 
 154 #if INCLUDE_JVMTI
 155   #define JVMTI_STRUCTS(static_field) \
 156     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 157     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 158     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 159     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 160 #else
 161   #define JVMTI_STRUCTS(static_field)
 162 #endif // INCLUDE_JVMTI
 163 
 164 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 165 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 166 typedef Hashtable&lt;InstanceKlass*, mtClass&gt;       KlassHashtable;
 167 typedef HashtableEntry&lt;InstanceKlass*, mtClass&gt;  KlassHashtableEntry;
 168 
<span class="line-removed"> 169 typedef PaddedEnd&lt;ObjectMonitor&gt;              PaddedObjectMonitor;</span>
<span class="line-removed"> 170 </span>
 171 //--------------------------------------------------------------------------------
 172 // VM_STRUCTS
 173 //
 174 // This list enumerates all of the fields the serviceability agent
 175 // needs to know about. Be sure to see also the type table below this one.
 176 // NOTE that there are platform-specific additions to this table in
 177 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 178 
 179 #define VM_STRUCTS(nonstatic_field,                                                                                                  \
 180                    static_field,                                                                                                     \
 181                    static_ptr_volatile_field,                                                                                        \
 182                    unchecked_nonstatic_field,                                                                                        \
 183                    volatile_nonstatic_field,                                                                                         \
 184                    nonproduct_nonstatic_field,                                                                                       \
 185                    c1_nonstatic_field,                                                                                               \
 186                    c2_nonstatic_field,                                                                                               \
 187                    unchecked_c1_static_field,                                                                                        \
 188                    unchecked_c2_static_field)                                                                                        \
 189                                                                                                                                      \
 190   /*************/                                                                                                                    \
 191   /* GC fields */                                                                                                                    \
 192   /*************/                                                                                                                    \
 193                                                                                                                                      \
 194   VM_STRUCTS_GC(nonstatic_field,                                                                                                     \
 195                 volatile_nonstatic_field,                                                                                            \
 196                 static_field,                                                                                                        \
 197                 unchecked_nonstatic_field)                                                                                           \
 198                                                                                                                                      \
 199   /******************************************************************/                                                               \
 200   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete)   */                                                               \
 201   /******************************************************************/                                                               \
 202                                                                                                                                      \
<span class="line-modified"> 203   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \</span>
 204   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 205   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowKlass)                           \
 206   static_field(BarrierSet,                     _barrier_set,                                  BarrierSet*)                           \
 207   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 208   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 209   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 210   nonstatic_field(CompiledICHolder,            _holder_metadata,                              Metadata*)                             \
 211   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 212   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 213   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 214   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 215   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 216   nonstatic_field(ConstantPool,                _resolved_klasses,                             Array&lt;Klass*&gt;*)                        \
 217   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 218   nonstatic_field(ConstantPoolCache,           _resolved_references,                          OopHandle)                             \
 219   nonstatic_field(ConstantPoolCache,           _reference_map,                                Array&lt;u2&gt;*)                            \
 220   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 221   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 222   volatile_nonstatic_field(InstanceKlass,      _array_klasses,                                Klass*)                                \
 223   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 224   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 225   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;InstanceKlass*&gt;*)                \
 226   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;InstanceKlass*&gt;*)                \
 227   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 228   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 229   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 230   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 231   nonstatic_field(InstanceKlass,               _source_debug_extension,                       const char*)                           \
 232   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 233   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 234   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 235   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 236   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 237   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
<span class="line-modified"> 238   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \</span>
 239   nonstatic_field(InstanceKlass,               _minor_version,                                u2)                                    \
 240   nonstatic_field(InstanceKlass,               _major_version,                                u2)                                    \
 241   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 242   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 243   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 244   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 245   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 246   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 247   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 248   JVMTI_ONLY(nonstatic_field(InstanceKlass,    _breakpoints,                                  BreakpointInfo*))                      \
 249   nonstatic_field(InstanceKlass,               _generic_signature_index,                      u2)                                    \
 250   volatile_nonstatic_field(InstanceKlass,      _methods_jmethod_ids,                          jmethodID*)                            \
 251   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 252   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 253   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 254   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 255   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 256   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 257   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 258   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 259   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 260   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 261   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 262   volatile_nonstatic_field(Klass,              _subklass,                                     Klass*)                                 \
 263   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 264   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 265   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
<span class="line-modified"> 266   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \</span>
 267   volatile_nonstatic_field(Klass,              _next_sibling,                                 Klass*)                                \
 268   nonstatic_field(Klass,                       _next_link,                                    Klass*)                                \
 269   nonstatic_field(Klass,                       _vtable_len,                                   int)                                   \
 270   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 271   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 272   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 273   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 274   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 275   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 276   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 277   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 278   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 279   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 280   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 281   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 282   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 283   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 284   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 285   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 286   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
</pre>
<hr />
<pre>
 353   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 354   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 355   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 356   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 357   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 358   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 359   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 360   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 361   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _orig_bytecode,                                Bytecodes::Code))                      \
 362   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _bci,                                          int))                                  \
 363   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _name_index,                                   u2))                                   \
 364   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _signature_index,                              u2))                                   \
 365   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _next,                                         BreakpointInfo*))                      \
 366   /***********/                                                                                                                      \
 367   /* JNI IDs */                                                                                                                      \
 368   /***********/                                                                                                                      \
 369                                                                                                                                      \
 370   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 371   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 372   nonstatic_field(JNIid,                       _offset,                                       int)                                   \

 373   /************/                                                                                                                     \
 374   /* Universe */                                                                                                                     \
 375   /************/                                                                                                                     \
 376                                                                                                                                      \
 377      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 378      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 379      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 380      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 381      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 382      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 383      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 384      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 385      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 386      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 387      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 388      static_field(Universe,                    _verify_count,                                 int)                                   \
 389      static_field(Universe,                    _verify_oop_mask,                              uintptr_t)                             \
 390      static_field(Universe,                    _verify_oop_bits,                              uintptr_t)                             \
 391      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
<span class="line-modified"> 392      static_field(Universe,                    _narrow_oop._base,                             address)                               \</span>
<span class="line-modified"> 393      static_field(Universe,                    _narrow_oop._shift,                            int)                                   \</span>
<span class="line-modified"> 394      static_field(Universe,                    _narrow_oop._use_implicit_null_checks,         bool)                                  \</span>
<span class="line-modified"> 395      static_field(Universe,                    _narrow_klass._base,                           address)                               \</span>
<span class="line-modified"> 396      static_field(Universe,                    _narrow_klass._shift,                          int)                                   \</span>










 397                                                                                                                                      \
 398   /******/                                                                                                                           \
 399   /* os */                                                                                                                           \
 400   /******/                                                                                                                           \
 401                                                                                                                                      \
 402      static_field(os,                          _polling_page,                                 address)                               \
 403                                                                                                                                      \
 404   /**********/                                                                                                                       \
 405   /* Memory */                                                                                                                       \
 406   /**********/                                                                                                                       \
 407                                                                                                                                      \
 408      static_field(MetaspaceObj,                _shared_metaspace_base,                        void*)                                 \
 409      static_field(MetaspaceObj,                _shared_metaspace_top,                         void*)                                 \
 410   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 411   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 412   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 413   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 414   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 415   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 416      static_field(ThreadLocalAllocBuffer,      _reserve_for_allocation_prefetch,              int)                                   \
</pre>
<hr />
<pre>
 497   /*************/                                                                                                                    \
 498   /* Hashtable */                                                                                                                    \
 499   /*************/                                                                                                                    \
 500                                                                                                                                      \
 501   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 502   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 503   volatile_nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                           BasicHashtableEntry&lt;mtInternal&gt;*)      \
 504   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 505   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 506   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 507                                                                                                                                      \
 508   /*******************/                                                                                                              \
 509   /* ClassLoaderData */                                                                                                              \
 510   /*******************/                                                                                                              \
 511   nonstatic_field(ClassLoaderData,             _class_loader,                                 OopHandle)                             \
 512   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 513   volatile_nonstatic_field(ClassLoaderData,    _klasses,                                      Klass*)                                \
 514   nonstatic_field(ClassLoaderData,             _is_unsafe_anonymous,                          bool)                                  \
 515   volatile_nonstatic_field(ClassLoaderData,    _dictionary,                                   Dictionary*)                           \
 516                                                                                                                                      \
<span class="line-modified"> 517      static_field(ClassLoaderDataGraph,        _head,                                         ClassLoaderData*)                      \</span>
 518                                                                                                                                      \
 519   /**********/                                                                                                                       \
 520   /* Arrays */                                                                                                                       \
 521   /**********/                                                                                                                       \
 522                                                                                                                                      \
 523   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 524   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 525                                                                                                                                      \
 526   /*******************/                                                                                                              \
 527   /* GrowableArrays  */                                                                                                              \
 528   /*******************/                                                                                                              \
 529                                                                                                                                      \
 530   nonstatic_field(GenericGrowableArray,        _len,                                          int)                                   \
 531   nonstatic_field(GenericGrowableArray,        _max,                                          int)                                   \
 532   nonstatic_field(GenericGrowableArray,        _arena,                                        Arena*)                                \
 533   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 534                                                                                                                                      \
 535   /********************************/                                                                                                 \
 536   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 537   /********************************/                                                                                                 \
</pre>
<hr />
<pre>
 563                                                                                                                                      \
 564   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 565   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 566   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 567   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 568   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 569   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 570   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 571   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 572                                                                                                                                      \
 573   /***********************************/                                                                                              \
 574   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 575   /***********************************/                                                                                              \
 576                                                                                                                                      \
 577      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 578      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 579      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 580      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 581      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 582      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \


 583      static_field(StubRoutines,                _counterMode_AESCrypt,                         address)                               \
 584      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 585      static_field(StubRoutines,                _base64_encodeBlock,                           address)                               \
 586      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 587      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 588      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 589      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 590      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 591      static_field(StubRoutines,                _squareToLen,                                  address)                               \


 592      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 593      static_field(StubRoutines,                _dexp,                                         address)                               \
 594      static_field(StubRoutines,                _dlog,                                         address)                               \
 595      static_field(StubRoutines,                _dlog10,                                       address)                               \
 596      static_field(StubRoutines,                _dpow,                                         address)                               \
 597      static_field(StubRoutines,                _dsin,                                         address)                               \
 598      static_field(StubRoutines,                _dcos,                                         address)                               \
 599      static_field(StubRoutines,                _dtan,                                         address)                               \
 600      static_field(StubRoutines,                _vectorizedMismatch,                           address)                               \
 601      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 602      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 603      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 604      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 605      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 606      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 607      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 608      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 609      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 610      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 611      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
</pre>
<hr />
<pre>
 712   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 713   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 714   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 715   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 716                                                                                                                                      \
 717   /********************************/                                                                                                 \
 718   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 719   /********************************/                                                                                                 \
 720                                                                                                                                      \
 721   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 722   /********************************/                                                                                                 \
 723   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 724   /********************************/                                                                                                 \
 725   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 726   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 727                                                                                                                                      \
 728   /******************************/                                                                                                   \
 729   /* Threads (NOTE: incomplete) */                                                                                                   \
 730   /******************************/                                                                                                   \
 731                                                                                                                                      \
<span class="line-modified"> 732      static_field(Threads,                     _thread_list,                                  JavaThread*)                           \</span>
<span class="line-modified"> 733      static_field(Threads,                     _number_of_threads,                            int)                                   \</span>
<span class="line-modified"> 734      static_field(Threads,                     _number_of_non_daemon_threads,                 int)                                   \</span>
<span class="line-modified"> 735      static_field(Threads,                     _return_code,                                  int)                                   \</span>



 736                                                                                                                                      \
 737   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 738   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 739   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 740   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
 741   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
 742   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
 743   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
 744   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
 745   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
 746   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
 747   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
 748   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
<span class="line-removed"> 749   nonstatic_field(JavaThread,                  _next,                                         JavaThread*)                           \</span>
 750   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 751   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 752   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 753   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
 754   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
 755   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 756   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 757   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 758   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
 759   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
 760   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
 761   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 762   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
 763   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
 764   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
 765   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
 766   volatile_nonstatic_field(JavaThread,         _terminated,                                   JavaThread::TerminatedTypes)           \
 767   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
 768   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
 769                                                                                                                                      \
 770   /************/                                                                                                                     \
 771   /* OSThread */                                                                                                                     \
 772   /************/                                                                                                                     \
 773                                                                                                                                      \
<span class="line-removed"> 774   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \</span>
 775   volatile_nonstatic_field(OSThread,           _state,                                        ThreadState)                           \
 776                                                                                                                                      \
 777   /************************/                                                                                                         \
 778   /* OopMap and OopMapSet */                                                                                                         \
 779   /************************/                                                                                                         \
 780                                                                                                                                      \
 781   nonstatic_field(OopMap,                      _pc_offset,                                    int)                                   \
 782   nonstatic_field(OopMap,                      _omv_count,                                    int)                                   \
 783   nonstatic_field(OopMap,                      _write_stream,                                 CompressedWriteStream*)                \
 784   nonstatic_field(OopMapSet,                   _om_count,                                     int)                                   \
 785   nonstatic_field(OopMapSet,                   _om_size,                                      int)                                   \
 786   nonstatic_field(OopMapSet,                   _om_data,                                      OopMap**)                              \
 787                                                                                                                                      \
 788   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
 789   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
 790                                                                                                                                      \
 791   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
 792   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
 793                                                                                                                                      \
 794   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
</pre>
<hr />
<pre>
 809   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
 810   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
 811                                                                                                                                      \
 812   /*********************************/                                                                                                \
 813   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
 814   /*********************************/                                                                                                \
 815                                                                                                                                      \
 816      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
 817      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
 818                                                                                                                                      \
 819   /*******************************/                                                                                                  \
 820   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
 821   /*******************************/                                                                                                  \
 822                                                                                                                                      \
 823   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
 824                                                                                                                                      \
 825   /**************/                                                                                                                   \
 826   /* CI */                                                                                                                           \
 827   /************/                                                                                                                     \
 828                                                                                                                                      \
<span class="line-removed"> 829   nonstatic_field(ciEnv,                       _system_dictionary_modification_counter,       int)                                   \</span>
 830   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
 831   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
 832   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
 833   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
 834   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
 835   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
 836                                                                                                                                      \
 837   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
 838                                                                                                                                      \
 839   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
 840   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
 841                                                                                                                                      \
 842   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
 843                                                                                                                                      \
 844   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
 845                                                                                                                                      \
 846   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
 847                                                                                                                                      \
 848   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
 849                                                                                                                                      \
</pre>
<hr />
<pre>
 876   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
 877   nonstatic_field(ciField,                     _offset,                                       int)                                   \
 878   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
 879   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
 880                                                                                                                                      \
 881   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
 882   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
 883   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
 884                                                                                                                                      \
 885   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
 886   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
 887   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
 888   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
 889   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
 890   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
 891                                                                                                                                      \
 892   /************/                                                                                                                     \
 893   /* Monitors */                                                                                                                     \
 894   /************/                                                                                                                     \
 895                                                                                                                                      \
<span class="line-modified"> 896   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markOop)                               \</span>
 897   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
 898   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
<span class="line-modified"> 899   volatile_nonstatic_field(ObjectMonitor,      _count,                                        jint)                                  \</span>
 900   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
<span class="line-modified"> 901   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intptr_t)                              \</span>
<span class="line-modified"> 902   nonstatic_field(ObjectMonitor,               FreeNext,                                      ObjectMonitor*)                        \</span>
<span class="line-modified"> 903   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markOop)                               \</span>
 904   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
 905   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
<span class="line-modified"> 906   static_ptr_volatile_field(ObjectSynchronizer, gBlockList,                                   PaddedObjectMonitor*)                  \</span>
 907                                                                                                                                      \
 908   /*********************/                                                                                                            \
 909   /* Matcher (C2 only) */                                                                                                            \
 910   /*********************/                                                                                                            \
 911                                                                                                                                      \
 912   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
 913                                                                                                                                      \
 914   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
 915   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
 916   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
 917   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
 918   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
 919   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
 920   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
 921   c2_nonstatic_field(Node,                     _class_id,                                     jushort)                               \
 922   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
 923                                                                                                                                      \
 924   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
 925   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
 926   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
</pre>
<hr />
<pre>
1073   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1074   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1075   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1076                                                                                                                                      \
1077   /*********************************/                                                                                                \
1078   /* java_lang_Class fields        */                                                                                                \
1079   /*********************************/                                                                                                \
1080                                                                                                                                      \
1081      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1082      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1083      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1084      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1085                                                                                                                                      \
1086   /********************************************/                                                                                     \
1087   /* FileMapInfo fields (CDS archive related) */                                                                                     \
1088   /********************************************/                                                                                     \
1089                                                                                                                                      \
1090   CDS_ONLY(nonstatic_field(FileMapInfo,        _header,                   FileMapHeader*))                                           \
1091   CDS_ONLY(   static_field(FileMapInfo,        _current_info,             FileMapInfo*))                                             \
1092   CDS_ONLY(nonstatic_field(FileMapHeader,      _space[0],                 CDSFileMapRegion))                                         \
<span class="line-modified">1093   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _addr._base,               char*))                                                    \</span>


1094   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _used,                     size_t))                                                   \
1095                                                                                                                                      \
1096   /******************/                                                                                                               \
1097   /* VMError fields */                                                                                                               \
1098   /******************/                                                                                                               \
1099                                                                                                                                      \
1100      static_field(VMError,                     _thread,                                       Thread*)                               \
1101                                                                                                                                      \
1102   /************************/                                                                                                         \
1103   /* Miscellaneous fields */                                                                                                         \
1104   /************************/                                                                                                         \
1105                                                                                                                                      \
1106   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1107   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1108   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1109   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1110   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1111   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1112   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1113                                                                                                                                      \
</pre>
<hr />
<pre>
1237   /*******************************************************************/   \
1238                                                                           \
1239   declare_unsigned_integer_type(size_t)                                   \
1240   declare_integer_type(ssize_t)                                           \
1241   declare_integer_type(intx)                                              \
1242   declare_integer_type(intptr_t)                                          \
1243   declare_unsigned_integer_type(uintx)                                    \
1244   declare_unsigned_integer_type(uintptr_t)                                \
1245   declare_unsigned_integer_type(uint8_t)                                  \
1246   declare_unsigned_integer_type(uint32_t)                                 \
1247   declare_unsigned_integer_type(uint64_t)                                 \
1248                                                                           \
1249   /******************************************/                            \
1250   /* OopDesc hierarchy (NOTE: some missing) */                            \
1251   /******************************************/                            \
1252                                                                           \
1253   declare_toplevel_type(oopDesc)                                          \
1254     declare_type(arrayOopDesc, oopDesc)                                   \
1255       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1256     declare_type(instanceOopDesc, oopDesc)                                \
<span class="line-removed">1257     declare_type(markOopDesc, oopDesc)                                    \</span>
1258                                                                           \
1259   /**************************************************/                    \
1260   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1261   /**************************************************/                    \
1262                                                                           \
1263   declare_toplevel_type(CompiledICHolder)                                 \
1264   declare_toplevel_type(MetaspaceObj)                                     \
1265     declare_type(Metadata, MetaspaceObj)                                  \
1266     declare_type(Klass, Metadata)                                         \
1267            declare_type(ArrayKlass, Klass)                                \
1268            declare_type(ObjArrayKlass, ArrayKlass)                        \
1269            declare_type(TypeArrayKlass, ArrayKlass)                       \
1270       declare_type(InstanceKlass, Klass)                                  \
1271         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1272         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1273         declare_type(InstanceRefKlass, InstanceKlass)                     \
1274     declare_type(ConstantPool, Metadata)                                  \
1275     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1276     declare_type(MethodData, Metadata)                                    \
1277     declare_type(Method, Metadata)                                        \
1278     declare_type(MethodCounters, MetaspaceObj)                            \
1279     declare_type(ConstMethod, MetaspaceObj)                               \
1280                                                                           \
1281   declare_toplevel_type(narrowKlass)                                      \
1282                                                                           \
1283   declare_toplevel_type(vtableEntry)                                      \
1284                                                                           \
1285            declare_toplevel_type(Symbol)                                  \
1286            declare_toplevel_type(Symbol*)                                 \
1287   declare_toplevel_type(volatile Metadata*)                               \
1288                                                                           \
1289   declare_toplevel_type(DataLayout)                                       \
1290                                                                           \
1291   /********/                                                              \
1292   /* Oops */                                                              \
1293   /********/                                                              \
1294                                                                           \
<span class="line-removed">1295   declare_oop_type(markOop)                                               \</span>
1296   declare_oop_type(objArrayOop)                                           \
1297   declare_oop_type(oop)                                                   \
1298   declare_oop_type(narrowOop)                                             \
1299   declare_oop_type(typeArrayOop)                                          \
1300                                                                           \
1301   declare_toplevel_type(OopHandle)                                        \
1302                                                                           \
1303   /*************************************/                                 \
1304   /* MethodOop-related data structures */                                 \
1305   /*************************************/                                 \
1306                                                                           \
1307   declare_toplevel_type(CheckedExceptionElement)                          \
1308   declare_toplevel_type(LocalVariableTableElement)                        \
1309   declare_toplevel_type(ExceptionTableElement)                            \
1310   declare_toplevel_type(MethodParametersElement)                          \
1311                                                                           \
1312   declare_toplevel_type(ClassLoaderData)                                  \
1313   declare_toplevel_type(ClassLoaderDataGraph)                             \
1314                                                                           \
1315   /************************/                                              \
</pre>
<hr />
<pre>
1338   declare_toplevel_type(vmSymbols)                                        \
1339                                                                           \
1340   declare_toplevel_type(GenericGrowableArray)                             \
1341   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1342   declare_toplevel_type(Arena)                                            \
1343     declare_type(ResourceArea, Arena)                                     \
1344                                                                           \
1345   /***********************************************************/           \
1346   /* Thread hierarchy (needed for run-time type information) */           \
1347   /***********************************************************/           \
1348                                                                           \
1349   declare_toplevel_type(Threads)                                          \
1350   declare_toplevel_type(ThreadShadow)                                     \
1351     declare_type(Thread, ThreadShadow)                                    \
1352       declare_type(NonJavaThread, Thread)                                 \
1353         declare_type(NamedThread, NonJavaThread)                          \
1354         declare_type(WatcherThread, NonJavaThread)                        \
1355       declare_type(JavaThread, Thread)                                    \
1356         declare_type(JvmtiAgentThread, JavaThread)                        \
1357         declare_type(ServiceThread, JavaThread)                           \

1358         declare_type(CompilerThread, JavaThread)                          \
1359         declare_type(CodeCacheSweeperThread, JavaThread)                  \
1360   declare_toplevel_type(OSThread)                                         \
1361   declare_toplevel_type(JavaFrameAnchor)                                  \
1362                                                                           \



1363   /***************/                                                       \
1364   /* Interpreter */                                                       \
1365   /***************/                                                       \
1366                                                                           \
1367   declare_toplevel_type(AbstractInterpreter)                              \
1368                                                                           \
1369   /*********/                                                             \
1370   /* Stubs */                                                             \
1371   /*********/                                                             \
1372                                                                           \
1373   declare_toplevel_type(StubQueue)                                        \
1374   declare_toplevel_type(StubRoutines)                                     \
1375   declare_toplevel_type(Stub)                                             \
1376            declare_type(InterpreterCodelet, Stub)                         \
1377                                                                           \
1378   /*************/                                                         \
1379   /* JavaCalls */                                                         \
1380   /*************/                                                         \
1381                                                                           \
1382   declare_toplevel_type(JavaCallWrapper)                                  \
</pre>
<hr />
<pre>
1561   declare_c2_type(ConINode, ConNode)                                      \
1562   declare_c2_type(ConPNode, ConNode)                                      \
1563   declare_c2_type(ConNNode, ConNode)                                      \
1564   declare_c2_type(ConLNode, ConNode)                                      \
1565   declare_c2_type(ConFNode, ConNode)                                      \
1566   declare_c2_type(ConDNode, ConNode)                                      \
1567   declare_c2_type(BinaryNode, Node)                                       \
1568   declare_c2_type(CMoveNode, TypeNode)                                    \
1569   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1570   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1571   declare_c2_type(CMoveINode, CMoveNode)                                  \
1572   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1573   declare_c2_type(CMovePNode, CMoveNode)                                  \
1574   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1575   declare_c2_type(EncodePNode, TypeNode)                                  \
1576   declare_c2_type(DecodeNNode, TypeNode)                                  \
1577   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1578   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1579   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1580   declare_c2_type(CastIINode, ConstraintCastNode)                         \

1581   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1582   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1583   declare_c2_type(Conv2BNode, Node)                                       \
1584   declare_c2_type(ConvD2FNode, Node)                                      \
1585   declare_c2_type(ConvD2INode, Node)                                      \
1586   declare_c2_type(ConvD2LNode, Node)                                      \
1587   declare_c2_type(ConvF2DNode, Node)                                      \
1588   declare_c2_type(ConvF2INode, Node)                                      \
1589   declare_c2_type(ConvF2LNode, Node)                                      \
1590   declare_c2_type(ConvI2DNode, Node)                                      \
1591   declare_c2_type(ConvI2FNode, Node)                                      \
1592   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1593   declare_c2_type(ConvL2DNode, Node)                                      \
1594   declare_c2_type(ConvL2FNode, Node)                                      \
1595   declare_c2_type(ConvL2INode, Node)                                      \
1596   declare_c2_type(CastX2PNode, Node)                                      \
1597   declare_c2_type(CastP2XNode, Node)                                      \
1598   declare_c2_type(SetVectMaskINode, Node)                                 \
1599   declare_c2_type(MemBarNode, MultiNode)                                  \
1600   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
</pre>
<hr />
<pre>
1741   declare_c2_type(CmpFNode, CmpNode)                                      \
1742   declare_c2_type(CmpF3Node, CmpFNode)                                    \
1743   declare_c2_type(CmpDNode, CmpNode)                                      \
1744   declare_c2_type(CmpD3Node, CmpDNode)                                    \
1745   declare_c2_type(BoolNode, Node)                                         \
1746   declare_c2_type(AbsNode, Node)                                          \
1747   declare_c2_type(AbsINode, AbsNode)                                      \
1748   declare_c2_type(AbsFNode, AbsNode)                                      \
1749   declare_c2_type(AbsDNode, AbsNode)                                      \
1750   declare_c2_type(CmpLTMaskNode, Node)                                    \
1751   declare_c2_type(NegNode, Node)                                          \
1752   declare_c2_type(NegFNode, NegNode)                                      \
1753   declare_c2_type(NegDNode, NegNode)                                      \
1754   declare_c2_type(AtanDNode, Node)                                        \
1755   declare_c2_type(SqrtFNode, Node)                                        \
1756   declare_c2_type(SqrtDNode, Node)                                        \
1757   declare_c2_type(ReverseBytesINode, Node)                                \
1758   declare_c2_type(ReverseBytesLNode, Node)                                \
1759   declare_c2_type(ReductionNode, Node)                                    \
1760   declare_c2_type(VectorNode, Node)                                       \




1761   declare_c2_type(AddVBNode, VectorNode)                                  \
1762   declare_c2_type(AddVSNode, VectorNode)                                  \
1763   declare_c2_type(AddVINode, VectorNode)                                  \
1764   declare_c2_type(AddReductionVINode, ReductionNode)                      \
1765   declare_c2_type(AddVLNode, VectorNode)                                  \
1766   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
1767   declare_c2_type(AddVFNode, VectorNode)                                  \
1768   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
1769   declare_c2_type(AddVDNode, VectorNode)                                  \
1770   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
1771   declare_c2_type(SubVBNode, VectorNode)                                  \
1772   declare_c2_type(SubVSNode, VectorNode)                                  \
1773   declare_c2_type(SubVINode, VectorNode)                                  \
1774   declare_c2_type(SubVLNode, VectorNode)                                  \
1775   declare_c2_type(SubVFNode, VectorNode)                                  \
1776   declare_c2_type(SubVDNode, VectorNode)                                  \

1777   declare_c2_type(MulVSNode, VectorNode)                                  \
1778   declare_c2_type(MulVLNode, VectorNode)                                  \
1779   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
1780   declare_c2_type(MulVINode, VectorNode)                                  \
1781   declare_c2_type(MulReductionVINode, ReductionNode)                      \
1782   declare_c2_type(MulVFNode, VectorNode)                                  \
1783   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
1784   declare_c2_type(MulVDNode, VectorNode)                                  \


1785   declare_c2_type(FmaVDNode, VectorNode)                                  \
1786   declare_c2_type(FmaVFNode, VectorNode)                                  \
1787   declare_c2_type(CMoveVFNode, VectorNode)                                \
1788   declare_c2_type(CMoveVDNode, VectorNode)                                \
1789   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
1790   declare_c2_type(DivVFNode, VectorNode)                                  \
1791   declare_c2_type(DivVDNode, VectorNode)                                  \
1792   declare_c2_type(PopCountVINode, VectorNode)                             \
1793   declare_c2_type(LShiftVBNode, VectorNode)                               \
1794   declare_c2_type(LShiftVSNode, VectorNode)                               \
1795   declare_c2_type(LShiftVINode, VectorNode)                               \
1796   declare_c2_type(LShiftVLNode, VectorNode)                               \
1797   declare_c2_type(RShiftVBNode, VectorNode)                               \
1798   declare_c2_type(RShiftVSNode, VectorNode)                               \
1799   declare_c2_type(RShiftVINode, VectorNode)                               \
1800   declare_c2_type(RShiftVLNode, VectorNode)                               \
1801   declare_c2_type(URShiftVBNode, VectorNode)                              \
1802   declare_c2_type(URShiftVSNode, VectorNode)                              \
1803   declare_c2_type(URShiftVINode, VectorNode)                              \
1804   declare_c2_type(URShiftVLNode, VectorNode)                              \
</pre>
<hr />
<pre>
1915    declare_integer_type(Bytecodes::Code)                                  \
1916    declare_integer_type(Generation::Name)                                 \
1917    declare_integer_type(InstanceKlass::ClassState)                        \
1918    declare_integer_type(JavaThreadState)                                  \
1919    declare_integer_type(ThreadState)                                      \
1920    declare_integer_type(Location::Type)                                   \
1921    declare_integer_type(Location::Where)                                  \
1922    declare_integer_type(JVMFlag::Flags)                                   \
1923    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
1924                                                                           \
1925    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
1926             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
1927             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
1928             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
1929             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
1930             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
1931                                                                           \
1932    declare_toplevel_type(BitMap)                                          \
1933             declare_type(BitMapView, BitMap)                              \
1934                                                                           \
<span class="line-modified">1935    declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\</span>

1936   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
<span class="line-modified">1937    declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */\</span>
1938   declare_toplevel_type(BreakpointInfo)                                   \
1939   declare_toplevel_type(BreakpointInfo*)                                  \
1940   declare_toplevel_type(CodeBlob*)                                        \
1941   declare_toplevel_type(RuntimeBlob*)                                     \
1942   declare_toplevel_type(CompressedWriteStream*)                           \
1943   declare_toplevel_type(ConstantPoolCacheEntry)                           \
1944   declare_toplevel_type(elapsedTimer)                                     \
1945   declare_toplevel_type(frame)                                            \
1946   declare_toplevel_type(intptr_t*)                                        \
1947    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
1948   declare_toplevel_type(JavaThread*)                                      \

1949   declare_toplevel_type(java_lang_Class)                                  \
1950   declare_integer_type(JavaThread::AsyncRequests)                         \
1951   declare_integer_type(JavaThread::TerminatedTypes)                       \
1952   declare_toplevel_type(jbyte*)                                           \
1953   declare_toplevel_type(jbyte**)                                          \
1954   declare_toplevel_type(jint*)                                            \
1955   declare_toplevel_type(jniIdMapBase*)                                    \
1956   declare_unsigned_integer_type(juint)                                    \
1957   declare_unsigned_integer_type(julong)                                   \
1958   declare_toplevel_type(JNIHandleBlock*)                                  \
1959   declare_toplevel_type(JNIid)                                            \
1960   declare_toplevel_type(JNIid*)                                           \
1961   declare_toplevel_type(jmethodID*)                                       \
1962   declare_toplevel_type(Mutex*)                                           \
1963   declare_toplevel_type(nmethod*)                                         \
1964   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
1965   declare_toplevel_type(ObjectMonitor*)                                   \
1966   declare_toplevel_type(PaddedObjectMonitor*)                             \
1967   declare_toplevel_type(oop*)                                             \
1968   declare_toplevel_type(OopMap**)                                         \
1969   declare_toplevel_type(OopMapCache*)                                     \
1970   declare_toplevel_type(OopMapSet*)                                       \
1971   declare_toplevel_type(VMReg)                                            \
1972   declare_toplevel_type(OSThread*)                                        \
1973    declare_integer_type(ReferenceType)                                    \
1974   declare_toplevel_type(StubQueue*)                                       \
1975   declare_toplevel_type(Thread*)                                          \
1976   declare_toplevel_type(Universe)                                         \


1977   declare_toplevel_type(os)                                               \
1978   declare_toplevel_type(vframeArray)                                      \
1979   declare_toplevel_type(vframeArrayElement)                               \
1980   declare_toplevel_type(Annotations*)                                     \
1981   declare_type(OopMapValue, StackObj)                                     \
1982   declare_type(FileMapInfo, CHeapObj&lt;mtInternal&gt;)                         \
1983   declare_toplevel_type(FileMapHeader)                                    \
1984   declare_toplevel_type(CDSFileMapRegion)                                 \
1985                                                                           \
1986   /************/                                                          \
1987   /* GC types */                                                          \
1988   /************/                                                          \
1989                                                                           \
1990   VM_TYPES_GC(declare_type,                                               \
1991               declare_toplevel_type,                                      \
1992               declare_integer_type)
1993 
1994 //--------------------------------------------------------------------------------
1995 // VM_INT_CONSTANTS
1996 //
</pre>
<hr />
<pre>
2078   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2079   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2080   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2081                                                                           \
2082   declare_constant(JVM_CONSTANT_Utf8)                                     \
2083   declare_constant(JVM_CONSTANT_Unicode)                                  \
2084   declare_constant(JVM_CONSTANT_Integer)                                  \
2085   declare_constant(JVM_CONSTANT_Float)                                    \
2086   declare_constant(JVM_CONSTANT_Long)                                     \
2087   declare_constant(JVM_CONSTANT_Double)                                   \
2088   declare_constant(JVM_CONSTANT_Class)                                    \
2089   declare_constant(JVM_CONSTANT_String)                                   \
2090   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2091   declare_constant(JVM_CONSTANT_Methodref)                                \
2092   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2093   declare_constant(JVM_CONSTANT_NameAndType)                              \
2094   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2095   declare_constant(JVM_CONSTANT_MethodType)                               \
2096   declare_constant(JVM_CONSTANT_Dynamic)                                  \
2097   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \


2098   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2099                                                                           \
2100   declare_constant(JVM_CONSTANT_Invalid)                                  \
2101   declare_constant(JVM_CONSTANT_InternalMin)                              \
2102   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2103   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2104   declare_constant(JVM_CONSTANT_StringIndex)                              \
2105   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2106   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2107   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2108   declare_constant(JVM_CONSTANT_DynamicInError)                           \
2109   declare_constant(JVM_CONSTANT_InternalMax)                              \
2110                                                                           \
2111   /*****************************/                                         \
2112   /* Thread::SuspendFlags enum */                                         \
2113   /*****************************/                                         \
2114                                                                           \
2115   declare_constant(Thread::_external_suspend)                             \
2116   declare_constant(Thread::_ext_suspended)                                \
2117   declare_constant(Thread::_has_async_exception)                          \
</pre>
<hr />
<pre>
2342   declare_constant(Location::addr)                                        \
2343   declare_constant(Location::invalid)                                     \
2344                                                                           \
2345   /* constants from Location::Where enum */                               \
2346                                                                           \
2347   declare_constant(Location::on_stack)                                    \
2348   declare_constant(Location::in_register)                                 \
2349                                                                           \
2350   declare_constant(Deoptimization::Reason_many)                           \
2351   declare_constant(Deoptimization::Reason_none)                           \
2352   declare_constant(Deoptimization::Reason_null_check)                     \
2353   declare_constant(Deoptimization::Reason_null_assert)                    \
2354   declare_constant(Deoptimization::Reason_range_check)                    \
2355   declare_constant(Deoptimization::Reason_class_check)                    \
2356   declare_constant(Deoptimization::Reason_array_check)                    \
2357   declare_constant(Deoptimization::Reason_intrinsic)                      \
2358   declare_constant(Deoptimization::Reason_bimorphic)                      \
2359   declare_constant(Deoptimization::Reason_profile_predicate)              \
2360   declare_constant(Deoptimization::Reason_unloaded)                       \
2361   declare_constant(Deoptimization::Reason_uninitialized)                  \

2362   declare_constant(Deoptimization::Reason_unreached)                      \
2363   declare_constant(Deoptimization::Reason_unhandled)                      \
2364   declare_constant(Deoptimization::Reason_constraint)                     \
2365   declare_constant(Deoptimization::Reason_div0_check)                     \
2366   declare_constant(Deoptimization::Reason_age)                            \
2367   declare_constant(Deoptimization::Reason_predicate)                      \
2368   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2369   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2370   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2371   declare_constant(Deoptimization::Reason_speculate_null_assert)          \
2372   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2373   declare_constant(Deoptimization::Reason_unstable_if)                    \
2374   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2375   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_aliasing)))                       \
2376   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_transfer_to_interpreter)))        \
2377   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_not_compiled_exception_handler))) \
2378   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_unresolved)))                     \
2379   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_jsr_mismatch)))                   \
2380   declare_constant(Deoptimization::Reason_tenured)                        \
2381   declare_constant(Deoptimization::Reason_LIMIT)                          \
</pre>
<hr />
<pre>
2564   /****************/                                                      \
2565                                                                           \
2566   declare_preprocessor_constant(&quot;INCLUDE_JVMCI&quot;, INCLUDE_JVMCI)           \
2567                                                                           \
2568   /****************/                                                      \
2569   /*  VMRegImpl   */                                                      \
2570   /****************/                                                      \
2571   declare_constant(VMRegImpl::stack_slot_size)                            \
2572                                                                           \
2573   /******************************/                                        \
2574   /*  -XX flags (value origin)  */                                        \
2575   /******************************/                                        \
2576   declare_constant(JVMFlag::DEFAULT)                                      \
2577   declare_constant(JVMFlag::COMMAND_LINE)                                 \
2578   declare_constant(JVMFlag::ENVIRON_VAR)                                  \
2579   declare_constant(JVMFlag::CONFIG_FILE)                                  \
2580   declare_constant(JVMFlag::MANAGEMENT)                                   \
2581   declare_constant(JVMFlag::ERGONOMIC)                                    \
2582   declare_constant(JVMFlag::ATTACH_ON_DEMAND)                             \
2583   declare_constant(JVMFlag::INTERNAL)                                     \

2584   declare_constant(JVMFlag::VALUE_ORIGIN_MASK)                            \
2585   declare_constant(JVMFlag::ORIG_COMMAND_LINE)
2586 
2587 //--------------------------------------------------------------------------------
2588 // VM_LONG_CONSTANTS
2589 //
2590 // This table contains long constants required over in the
2591 // serviceability agent. The &quot;declare_constant&quot; macro is used for all
2592 // enums, etc., while &quot;declare_preprocessor_constant&quot; must be used for
2593 // all #defined constants.
2594 
2595 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2596                                                                           \
2597   /****************/                                                      \
2598   /* GC constants */                                                      \
2599   /****************/                                                      \
2600                                                                           \
2601   VM_LONG_CONSTANTS_GC(declare_constant)                                  \
2602                                                                           \
2603   /*********************/                                                 \
<span class="line-modified">2604   /* MarkOop constants */                                                 \</span>
2605   /*********************/                                                 \
2606                                                                           \
2607   /* Note: some of these are declared as long constants just for */       \
2608   /* consistency. The mask constants are the only ones requiring */       \
2609   /* 64 bits (on 64-bit platforms). */                                    \
2610                                                                           \
<span class="line-modified">2611   declare_constant(markOopDesc::age_bits)                                 \</span>
<span class="line-modified">2612   declare_constant(markOopDesc::lock_bits)                                \</span>
<span class="line-modified">2613   declare_constant(markOopDesc::biased_lock_bits)                         \</span>
<span class="line-modified">2614   declare_constant(markOopDesc::max_hash_bits)                            \</span>
<span class="line-modified">2615   declare_constant(markOopDesc::hash_bits)                                \</span>
<span class="line-modified">2616                                                                           \</span>
<span class="line-modified">2617   declare_constant(markOopDesc::lock_shift)                               \</span>
<span class="line-modified">2618   declare_constant(markOopDesc::biased_lock_shift)                        \</span>
<span class="line-modified">2619   declare_constant(markOopDesc::age_shift)                                \</span>
<span class="line-modified">2620   declare_constant(markOopDesc::hash_shift)                               \</span>
<span class="line-modified">2621                                                                           \</span>
<span class="line-modified">2622   declare_constant(markOopDesc::lock_mask)                                \</span>
<span class="line-modified">2623   declare_constant(markOopDesc::lock_mask_in_place)                       \</span>
<span class="line-modified">2624   declare_constant(markOopDesc::biased_lock_mask)                         \</span>
<span class="line-modified">2625   declare_constant(markOopDesc::biased_lock_mask_in_place)                \</span>
<span class="line-modified">2626   declare_constant(markOopDesc::biased_lock_bit_in_place)                 \</span>
<span class="line-modified">2627   declare_constant(markOopDesc::age_mask)                                 \</span>
<span class="line-modified">2628   declare_constant(markOopDesc::age_mask_in_place)                        \</span>
<span class="line-modified">2629   declare_constant(markOopDesc::epoch_mask)                               \</span>
<span class="line-modified">2630   declare_constant(markOopDesc::epoch_mask_in_place)                      \</span>
<span class="line-modified">2631   declare_constant(markOopDesc::hash_mask)                                \</span>
<span class="line-modified">2632   declare_constant(markOopDesc::hash_mask_in_place)                       \</span>
<span class="line-modified">2633   declare_constant(markOopDesc::biased_lock_alignment)                    \</span>
<span class="line-modified">2634                                                                           \</span>
<span class="line-modified">2635   declare_constant(markOopDesc::locked_value)                             \</span>
<span class="line-modified">2636   declare_constant(markOopDesc::unlocked_value)                           \</span>
<span class="line-modified">2637   declare_constant(markOopDesc::monitor_value)                            \</span>
<span class="line-modified">2638   declare_constant(markOopDesc::marked_value)                             \</span>
<span class="line-modified">2639   declare_constant(markOopDesc::biased_lock_pattern)                      \</span>
<span class="line-modified">2640                                                                           \</span>
<span class="line-modified">2641   declare_constant(markOopDesc::no_hash)                                  \</span>
<span class="line-modified">2642   declare_constant(markOopDesc::no_hash_in_place)                         \</span>
<span class="line-modified">2643   declare_constant(markOopDesc::no_lock_in_place)                         \</span>
<span class="line-modified">2644   declare_constant(markOopDesc::max_age)                                  \</span>
<span class="line-removed">2645                                                                           \</span>
<span class="line-removed">2646   /* Constants in markOop used by CMS. */                                 \</span>
<span class="line-removed">2647   declare_constant(markOopDesc::cms_shift)                                \</span>
<span class="line-removed">2648   declare_constant(markOopDesc::cms_mask)                                 \</span>
<span class="line-removed">2649   declare_constant(markOopDesc::size_shift)                               \</span>
2650                                                                           \
2651   /* InvocationCounter constants */                                       \
2652   declare_constant(InvocationCounter::count_increment)                    \
2653   declare_constant(InvocationCounter::count_shift)
2654 
2655 
2656 //--------------------------------------------------------------------------------
2657 //
2658 
2659 // Generate and check a nonstatic field in non-product builds
2660 #ifndef PRODUCT
2661 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2662 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2663 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2664 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2665 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2666 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2667 #else
2668 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2669 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
</pre>
<hr />
<pre>
  53 #include &quot;memory/allocation.inline.hpp&quot;
  54 #include &quot;memory/heap.hpp&quot;
  55 #include &quot;memory/metaspace/metablock.hpp&quot;
  56 #include &quot;memory/padded.hpp&quot;
  57 #include &quot;memory/referenceType.hpp&quot;
  58 #include &quot;memory/universe.hpp&quot;
  59 #include &quot;memory/virtualspace.hpp&quot;
  60 #include &quot;memory/filemap.hpp&quot;
  61 #include &quot;oops/array.hpp&quot;
  62 #include &quot;oops/arrayKlass.hpp&quot;
  63 #include &quot;oops/arrayOop.hpp&quot;
  64 #include &quot;oops/compiledICHolder.hpp&quot;
  65 #include &quot;oops/constMethod.hpp&quot;
  66 #include &quot;oops/constantPool.hpp&quot;
  67 #include &quot;oops/cpCache.hpp&quot;
  68 #include &quot;oops/instanceClassLoaderKlass.hpp&quot;
  69 #include &quot;oops/instanceKlass.hpp&quot;
  70 #include &quot;oops/instanceMirrorKlass.hpp&quot;
  71 #include &quot;oops/instanceOop.hpp&quot;
  72 #include &quot;oops/klass.hpp&quot;
<span class="line-modified">  73 #include &quot;oops/markWord.hpp&quot;</span>
  74 #include &quot;oops/method.hpp&quot;
  75 #include &quot;oops/methodCounters.hpp&quot;
  76 #include &quot;oops/methodData.hpp&quot;
  77 #include &quot;oops/objArrayKlass.hpp&quot;
  78 #include &quot;oops/objArrayOop.hpp&quot;
  79 #include &quot;oops/oop.inline.hpp&quot;
  80 #include &quot;oops/oopHandle.hpp&quot;
  81 #include &quot;oops/symbol.hpp&quot;
  82 #include &quot;oops/typeArrayKlass.hpp&quot;
  83 #include &quot;oops/typeArrayOop.hpp&quot;
  84 #include &quot;prims/jvmtiAgentThread.hpp&quot;
  85 #include &quot;runtime/arguments.hpp&quot;
  86 #include &quot;runtime/deoptimization.hpp&quot;
  87 #include &quot;runtime/flags/jvmFlag.hpp&quot;
  88 #include &quot;runtime/globals.hpp&quot;
  89 #include &quot;runtime/java.hpp&quot;
  90 #include &quot;runtime/javaCalls.hpp&quot;
<span class="line-added">  91 #include &quot;runtime/notificationThread.hpp&quot;</span>
  92 #include &quot;runtime/os.hpp&quot;
  93 #include &quot;runtime/perfMemory.hpp&quot;
  94 #include &quot;runtime/serviceThread.hpp&quot;
  95 #include &quot;runtime/sharedRuntime.hpp&quot;
  96 #include &quot;runtime/stubRoutines.hpp&quot;
  97 #include &quot;runtime/thread.inline.hpp&quot;
<span class="line-added">  98 #include &quot;runtime/threadSMR.hpp&quot;</span>
  99 #include &quot;runtime/vframeArray.hpp&quot;
 100 #include &quot;runtime/vmStructs.hpp&quot;
 101 #include &quot;utilities/globalDefinitions.hpp&quot;
 102 #include &quot;utilities/hashtable.hpp&quot;
 103 #include &quot;utilities/macros.hpp&quot;
 104 
 105 #include CPU_HEADER(vmStructs)
 106 #include OS_HEADER(vmStructs)
 107 #include OS_CPU_HEADER(vmStructs)
 108 
 109 #if INCLUDE_JVMCI
 110 # include &quot;jvmci/vmStructs_jvmci.hpp&quot;
 111 #endif
 112 
 113 
 114 #ifdef COMPILER2
 115 #include &quot;opto/addnode.hpp&quot;
 116 #include &quot;opto/block.hpp&quot;
 117 #include &quot;opto/callnode.hpp&quot;
 118 #include &quot;opto/castnode.hpp&quot;
</pre>
<hr />
<pre>
 151 
 152 #ifndef REG_COUNT
 153   #define REG_COUNT 0
 154 #endif
 155 
 156 #if INCLUDE_JVMTI
 157   #define JVMTI_STRUCTS(static_field) \
 158     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 159     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 160     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 161     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 162 #else
 163   #define JVMTI_STRUCTS(static_field)
 164 #endif // INCLUDE_JVMTI
 165 
 166 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 167 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 168 typedef Hashtable&lt;InstanceKlass*, mtClass&gt;       KlassHashtable;
 169 typedef HashtableEntry&lt;InstanceKlass*, mtClass&gt;  KlassHashtableEntry;
 170 


 171 //--------------------------------------------------------------------------------
 172 // VM_STRUCTS
 173 //
 174 // This list enumerates all of the fields the serviceability agent
 175 // needs to know about. Be sure to see also the type table below this one.
 176 // NOTE that there are platform-specific additions to this table in
 177 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 178 
 179 #define VM_STRUCTS(nonstatic_field,                                                                                                  \
 180                    static_field,                                                                                                     \
 181                    static_ptr_volatile_field,                                                                                        \
 182                    unchecked_nonstatic_field,                                                                                        \
 183                    volatile_nonstatic_field,                                                                                         \
 184                    nonproduct_nonstatic_field,                                                                                       \
 185                    c1_nonstatic_field,                                                                                               \
 186                    c2_nonstatic_field,                                                                                               \
 187                    unchecked_c1_static_field,                                                                                        \
 188                    unchecked_c2_static_field)                                                                                        \
 189                                                                                                                                      \
 190   /*************/                                                                                                                    \
 191   /* GC fields */                                                                                                                    \
 192   /*************/                                                                                                                    \
 193                                                                                                                                      \
 194   VM_STRUCTS_GC(nonstatic_field,                                                                                                     \
 195                 volatile_nonstatic_field,                                                                                            \
 196                 static_field,                                                                                                        \
 197                 unchecked_nonstatic_field)                                                                                           \
 198                                                                                                                                      \
 199   /******************************************************************/                                                               \
 200   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete)   */                                                               \
 201   /******************************************************************/                                                               \
 202                                                                                                                                      \
<span class="line-modified"> 203   volatile_nonstatic_field(oopDesc,            _mark,                                         markWord)                              \</span>
 204   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 205   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowKlass)                           \
 206   static_field(BarrierSet,                     _barrier_set,                                  BarrierSet*)                           \
 207   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 208   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 209   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 210   nonstatic_field(CompiledICHolder,            _holder_metadata,                              Metadata*)                             \
 211   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 212   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 213   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 214   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 215   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 216   nonstatic_field(ConstantPool,                _resolved_klasses,                             Array&lt;Klass*&gt;*)                        \
 217   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 218   nonstatic_field(ConstantPoolCache,           _resolved_references,                          OopHandle)                             \
 219   nonstatic_field(ConstantPoolCache,           _reference_map,                                Array&lt;u2&gt;*)                            \
 220   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 221   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 222   volatile_nonstatic_field(InstanceKlass,      _array_klasses,                                Klass*)                                \
 223   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 224   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 225   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;InstanceKlass*&gt;*)                \
 226   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;InstanceKlass*&gt;*)                \
 227   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 228   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 229   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 230   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 231   nonstatic_field(InstanceKlass,               _source_debug_extension,                       const char*)                           \
 232   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 233   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 234   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 235   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 236   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 237   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
<span class="line-modified"> 238   nonstatic_field(InstanceKlass,               _misc_flags,                                   u4)                                    \</span>
 239   nonstatic_field(InstanceKlass,               _minor_version,                                u2)                                    \
 240   nonstatic_field(InstanceKlass,               _major_version,                                u2)                                    \
 241   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 242   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 243   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 244   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 245   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 246   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 247   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 248   JVMTI_ONLY(nonstatic_field(InstanceKlass,    _breakpoints,                                  BreakpointInfo*))                      \
 249   nonstatic_field(InstanceKlass,               _generic_signature_index,                      u2)                                    \
 250   volatile_nonstatic_field(InstanceKlass,      _methods_jmethod_ids,                          jmethodID*)                            \
 251   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 252   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 253   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 254   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 255   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 256   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 257   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 258   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 259   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 260   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 261   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 262   volatile_nonstatic_field(Klass,              _subklass,                                     Klass*)                                 \
 263   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 264   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 265   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
<span class="line-modified"> 266   nonstatic_field(Klass,                       _prototype_header,                             markWord)                              \</span>
 267   volatile_nonstatic_field(Klass,              _next_sibling,                                 Klass*)                                \
 268   nonstatic_field(Klass,                       _next_link,                                    Klass*)                                \
 269   nonstatic_field(Klass,                       _vtable_len,                                   int)                                   \
 270   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 271   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 272   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 273   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 274   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 275   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 276   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 277   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 278   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 279   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 280   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 281   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 282   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 283   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 284   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 285   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 286   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
</pre>
<hr />
<pre>
 353   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 354   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 355   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 356   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 357   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 358   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 359   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 360   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 361   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _orig_bytecode,                                Bytecodes::Code))                      \
 362   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _bci,                                          int))                                  \
 363   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _name_index,                                   u2))                                   \
 364   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _signature_index,                              u2))                                   \
 365   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _next,                                         BreakpointInfo*))                      \
 366   /***********/                                                                                                                      \
 367   /* JNI IDs */                                                                                                                      \
 368   /***********/                                                                                                                      \
 369                                                                                                                                      \
 370   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 371   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 372   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
<span class="line-added"> 373                                                                                                                                      \</span>
 374   /************/                                                                                                                     \
 375   /* Universe */                                                                                                                     \
 376   /************/                                                                                                                     \
 377                                                                                                                                      \
 378      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 379      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 380      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 381      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 382      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 383      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 384      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 385      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 386      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 387      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 388      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 389      static_field(Universe,                    _verify_count,                                 int)                                   \
 390      static_field(Universe,                    _verify_oop_mask,                              uintptr_t)                             \
 391      static_field(Universe,                    _verify_oop_bits,                              uintptr_t)                             \
 392      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
<span class="line-modified"> 393                                                                                                                                      \</span>
<span class="line-modified"> 394   /******************/                                                                                                               \</span>
<span class="line-modified"> 395   /* CompressedOops */                                                                                                               \</span>
<span class="line-modified"> 396   /******************/                                                                                                               \</span>
<span class="line-modified"> 397                                                                                                                                      \</span>
<span class="line-added"> 398      static_field(CompressedOops,              _narrow_oop._base,                             address)                               \</span>
<span class="line-added"> 399      static_field(CompressedOops,              _narrow_oop._shift,                            int)                                   \</span>
<span class="line-added"> 400      static_field(CompressedOops,              _narrow_oop._use_implicit_null_checks,         bool)                                  \</span>
<span class="line-added"> 401                                                                                                                                      \</span>
<span class="line-added"> 402   /***************************/                                                                                                      \</span>
<span class="line-added"> 403   /* CompressedKlassPointers */                                                                                                      \</span>
<span class="line-added"> 404   /***************************/                                                                                                      \</span>
<span class="line-added"> 405                                                                                                                                      \</span>
<span class="line-added"> 406      static_field(CompressedKlassPointers,     _narrow_klass._base,                           address)                               \</span>
<span class="line-added"> 407      static_field(CompressedKlassPointers,     _narrow_klass._shift,                          int)                                   \</span>
 408                                                                                                                                      \
 409   /******/                                                                                                                           \
 410   /* os */                                                                                                                           \
 411   /******/                                                                                                                           \
 412                                                                                                                                      \
 413      static_field(os,                          _polling_page,                                 address)                               \
 414                                                                                                                                      \
 415   /**********/                                                                                                                       \
 416   /* Memory */                                                                                                                       \
 417   /**********/                                                                                                                       \
 418                                                                                                                                      \
 419      static_field(MetaspaceObj,                _shared_metaspace_base,                        void*)                                 \
 420      static_field(MetaspaceObj,                _shared_metaspace_top,                         void*)                                 \
 421   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 422   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 423   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 424   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 425   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 426   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 427      static_field(ThreadLocalAllocBuffer,      _reserve_for_allocation_prefetch,              int)                                   \
</pre>
<hr />
<pre>
 508   /*************/                                                                                                                    \
 509   /* Hashtable */                                                                                                                    \
 510   /*************/                                                                                                                    \
 511                                                                                                                                      \
 512   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 513   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 514   volatile_nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                           BasicHashtableEntry&lt;mtInternal&gt;*)      \
 515   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 516   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 517   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 518                                                                                                                                      \
 519   /*******************/                                                                                                              \
 520   /* ClassLoaderData */                                                                                                              \
 521   /*******************/                                                                                                              \
 522   nonstatic_field(ClassLoaderData,             _class_loader,                                 OopHandle)                             \
 523   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 524   volatile_nonstatic_field(ClassLoaderData,    _klasses,                                      Klass*)                                \
 525   nonstatic_field(ClassLoaderData,             _is_unsafe_anonymous,                          bool)                                  \
 526   volatile_nonstatic_field(ClassLoaderData,    _dictionary,                                   Dictionary*)                           \
 527                                                                                                                                      \
<span class="line-modified"> 528   static_ptr_volatile_field(ClassLoaderDataGraph, _head,                                      ClassLoaderData*)                      \</span>
 529                                                                                                                                      \
 530   /**********/                                                                                                                       \
 531   /* Arrays */                                                                                                                       \
 532   /**********/                                                                                                                       \
 533                                                                                                                                      \
 534   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 535   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 536                                                                                                                                      \
 537   /*******************/                                                                                                              \
 538   /* GrowableArrays  */                                                                                                              \
 539   /*******************/                                                                                                              \
 540                                                                                                                                      \
 541   nonstatic_field(GenericGrowableArray,        _len,                                          int)                                   \
 542   nonstatic_field(GenericGrowableArray,        _max,                                          int)                                   \
 543   nonstatic_field(GenericGrowableArray,        _arena,                                        Arena*)                                \
 544   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 545                                                                                                                                      \
 546   /********************************/                                                                                                 \
 547   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 548   /********************************/                                                                                                 \
</pre>
<hr />
<pre>
 574                                                                                                                                      \
 575   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 576   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 577   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 578   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 579   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 580   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 581   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 582   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 583                                                                                                                                      \
 584   /***********************************/                                                                                              \
 585   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 586   /***********************************/                                                                                              \
 587                                                                                                                                      \
 588      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 589      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 590      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 591      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 592      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 593      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
<span class="line-added"> 594      static_field(StubRoutines,                _electronicCodeBook_encryptAESCrypt,           address)                               \</span>
<span class="line-added"> 595      static_field(StubRoutines,                _electronicCodeBook_decryptAESCrypt,           address)                               \</span>
 596      static_field(StubRoutines,                _counterMode_AESCrypt,                         address)                               \
 597      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 598      static_field(StubRoutines,                _base64_encodeBlock,                           address)                               \
 599      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 600      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 601      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 602      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 603      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 604      static_field(StubRoutines,                _squareToLen,                                  address)                               \
<span class="line-added"> 605      static_field(StubRoutines,                _bigIntegerRightShiftWorker,                   address)                               \</span>
<span class="line-added"> 606      static_field(StubRoutines,                _bigIntegerLeftShiftWorker,                    address)                               \</span>
 607      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 608      static_field(StubRoutines,                _dexp,                                         address)                               \
 609      static_field(StubRoutines,                _dlog,                                         address)                               \
 610      static_field(StubRoutines,                _dlog10,                                       address)                               \
 611      static_field(StubRoutines,                _dpow,                                         address)                               \
 612      static_field(StubRoutines,                _dsin,                                         address)                               \
 613      static_field(StubRoutines,                _dcos,                                         address)                               \
 614      static_field(StubRoutines,                _dtan,                                         address)                               \
 615      static_field(StubRoutines,                _vectorizedMismatch,                           address)                               \
 616      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 617      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 618      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 619      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 620      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 621      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 622      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 623      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 624      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 625      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 626      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
</pre>
<hr />
<pre>
 727   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 728   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 729   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 730   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 731                                                                                                                                      \
 732   /********************************/                                                                                                 \
 733   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 734   /********************************/                                                                                                 \
 735                                                                                                                                      \
 736   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 737   /********************************/                                                                                                 \
 738   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 739   /********************************/                                                                                                 \
 740   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 741   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 742                                                                                                                                      \
 743   /******************************/                                                                                                   \
 744   /* Threads (NOTE: incomplete) */                                                                                                   \
 745   /******************************/                                                                                                   \
 746                                                                                                                                      \
<span class="line-modified"> 747   static_field(Threads,                     _number_of_threads,                               int)                                   \</span>
<span class="line-modified"> 748   static_field(Threads,                     _number_of_non_daemon_threads,                    int)                                   \</span>
<span class="line-modified"> 749   static_field(Threads,                     _return_code,                                     int)                                   \</span>
<span class="line-modified"> 750                                                                                                                                      \</span>
<span class="line-added"> 751   static_ptr_volatile_field(ThreadsSMRSupport, _java_thread_list,                             ThreadsList*)                          \</span>
<span class="line-added"> 752   nonstatic_field(ThreadsList,                 _length,                                       const uint)                            \</span>
<span class="line-added"> 753   nonstatic_field(ThreadsList,                 _threads,                                      JavaThread *const *const)              \</span>
 754                                                                                                                                      \
 755   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 756   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 757   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 758   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
 759   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
 760   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
 761   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
 762   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
 763   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
 764   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
 765   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
 766   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \

 767   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 768   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 769   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 770   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
 771   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
 772   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 773   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 774   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 775   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
 776   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
 777   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
 778   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 779   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
 780   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
 781   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
 782   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
 783   volatile_nonstatic_field(JavaThread,         _terminated,                                   JavaThread::TerminatedTypes)           \
 784   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
 785   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
 786                                                                                                                                      \
 787   /************/                                                                                                                     \
 788   /* OSThread */                                                                                                                     \
 789   /************/                                                                                                                     \
 790                                                                                                                                      \

 791   volatile_nonstatic_field(OSThread,           _state,                                        ThreadState)                           \
 792                                                                                                                                      \
 793   /************************/                                                                                                         \
 794   /* OopMap and OopMapSet */                                                                                                         \
 795   /************************/                                                                                                         \
 796                                                                                                                                      \
 797   nonstatic_field(OopMap,                      _pc_offset,                                    int)                                   \
 798   nonstatic_field(OopMap,                      _omv_count,                                    int)                                   \
 799   nonstatic_field(OopMap,                      _write_stream,                                 CompressedWriteStream*)                \
 800   nonstatic_field(OopMapSet,                   _om_count,                                     int)                                   \
 801   nonstatic_field(OopMapSet,                   _om_size,                                      int)                                   \
 802   nonstatic_field(OopMapSet,                   _om_data,                                      OopMap**)                              \
 803                                                                                                                                      \
 804   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
 805   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
 806                                                                                                                                      \
 807   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
 808   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
 809                                                                                                                                      \
 810   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
</pre>
<hr />
<pre>
 825   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
 826   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
 827                                                                                                                                      \
 828   /*********************************/                                                                                                \
 829   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
 830   /*********************************/                                                                                                \
 831                                                                                                                                      \
 832      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
 833      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
 834                                                                                                                                      \
 835   /*******************************/                                                                                                  \
 836   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
 837   /*******************************/                                                                                                  \
 838                                                                                                                                      \
 839   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
 840                                                                                                                                      \
 841   /**************/                                                                                                                   \
 842   /* CI */                                                                                                                           \
 843   /************/                                                                                                                     \
 844                                                                                                                                      \

 845   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
 846   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
 847   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
 848   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
 849   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
 850   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
 851                                                                                                                                      \
 852   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
 853                                                                                                                                      \
 854   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
 855   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
 856                                                                                                                                      \
 857   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
 858                                                                                                                                      \
 859   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
 860                                                                                                                                      \
 861   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
 862                                                                                                                                      \
 863   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
 864                                                                                                                                      \
</pre>
<hr />
<pre>
 891   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
 892   nonstatic_field(ciField,                     _offset,                                       int)                                   \
 893   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
 894   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
 895                                                                                                                                      \
 896   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
 897   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
 898   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
 899                                                                                                                                      \
 900   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
 901   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
 902   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
 903   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
 904   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
 905   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
 906                                                                                                                                      \
 907   /************/                                                                                                                     \
 908   /* Monitors */                                                                                                                     \
 909   /************/                                                                                                                     \
 910                                                                                                                                      \
<span class="line-modified"> 911   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markWord)                              \</span>
 912   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
 913   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
<span class="line-modified"> 914   volatile_nonstatic_field(ObjectMonitor,      _contentions,                                  jint)                                  \</span>
 915   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
<span class="line-modified"> 916   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intx)                                  \</span>
<span class="line-modified"> 917   nonstatic_field(ObjectMonitor,               _next_om,                                      ObjectMonitor*)                        \</span>
<span class="line-modified"> 918   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markWord)                              \</span>
 919   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
 920   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
<span class="line-modified"> 921   static_ptr_volatile_field(ObjectSynchronizer, g_block_list,                                 PaddedObjectMonitor*)                  \</span>
 922                                                                                                                                      \
 923   /*********************/                                                                                                            \
 924   /* Matcher (C2 only) */                                                                                                            \
 925   /*********************/                                                                                                            \
 926                                                                                                                                      \
 927   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
 928                                                                                                                                      \
 929   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
 930   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
 931   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
 932   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
 933   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
 934   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
 935   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
 936   c2_nonstatic_field(Node,                     _class_id,                                     jushort)                               \
 937   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
 938                                                                                                                                      \
 939   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
 940   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
 941   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
</pre>
<hr />
<pre>
1088   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1089   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1090   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1091                                                                                                                                      \
1092   /*********************************/                                                                                                \
1093   /* java_lang_Class fields        */                                                                                                \
1094   /*********************************/                                                                                                \
1095                                                                                                                                      \
1096      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1097      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1098      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1099      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1100                                                                                                                                      \
1101   /********************************************/                                                                                     \
1102   /* FileMapInfo fields (CDS archive related) */                                                                                     \
1103   /********************************************/                                                                                     \
1104                                                                                                                                      \
1105   CDS_ONLY(nonstatic_field(FileMapInfo,        _header,                   FileMapHeader*))                                           \
1106   CDS_ONLY(   static_field(FileMapInfo,        _current_info,             FileMapInfo*))                                             \
1107   CDS_ONLY(nonstatic_field(FileMapHeader,      _space[0],                 CDSFileMapRegion))                                         \
<span class="line-modified">1108   CDS_ONLY(nonstatic_field(FileMapHeader,      _cloned_vtables_offset,    size_t))                                                   \</span>
<span class="line-added">1109   CDS_ONLY(nonstatic_field(FileMapHeader,      _mapped_base_address,      char*))                                                    \</span>
<span class="line-added">1110   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _mapped_base,              char*))                                                    \</span>
1111   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _used,                     size_t))                                                   \
1112                                                                                                                                      \
1113   /******************/                                                                                                               \
1114   /* VMError fields */                                                                                                               \
1115   /******************/                                                                                                               \
1116                                                                                                                                      \
1117      static_field(VMError,                     _thread,                                       Thread*)                               \
1118                                                                                                                                      \
1119   /************************/                                                                                                         \
1120   /* Miscellaneous fields */                                                                                                         \
1121   /************************/                                                                                                         \
1122                                                                                                                                      \
1123   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1124   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1125   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1126   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1127   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1128   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1129   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1130                                                                                                                                      \
</pre>
<hr />
<pre>
1254   /*******************************************************************/   \
1255                                                                           \
1256   declare_unsigned_integer_type(size_t)                                   \
1257   declare_integer_type(ssize_t)                                           \
1258   declare_integer_type(intx)                                              \
1259   declare_integer_type(intptr_t)                                          \
1260   declare_unsigned_integer_type(uintx)                                    \
1261   declare_unsigned_integer_type(uintptr_t)                                \
1262   declare_unsigned_integer_type(uint8_t)                                  \
1263   declare_unsigned_integer_type(uint32_t)                                 \
1264   declare_unsigned_integer_type(uint64_t)                                 \
1265                                                                           \
1266   /******************************************/                            \
1267   /* OopDesc hierarchy (NOTE: some missing) */                            \
1268   /******************************************/                            \
1269                                                                           \
1270   declare_toplevel_type(oopDesc)                                          \
1271     declare_type(arrayOopDesc, oopDesc)                                   \
1272       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1273     declare_type(instanceOopDesc, oopDesc)                                \

1274                                                                           \
1275   /**************************************************/                    \
1276   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1277   /**************************************************/                    \
1278                                                                           \
1279   declare_toplevel_type(CompiledICHolder)                                 \
1280   declare_toplevel_type(MetaspaceObj)                                     \
1281     declare_type(Metadata, MetaspaceObj)                                  \
1282     declare_type(Klass, Metadata)                                         \
1283            declare_type(ArrayKlass, Klass)                                \
1284            declare_type(ObjArrayKlass, ArrayKlass)                        \
1285            declare_type(TypeArrayKlass, ArrayKlass)                       \
1286       declare_type(InstanceKlass, Klass)                                  \
1287         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1288         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1289         declare_type(InstanceRefKlass, InstanceKlass)                     \
1290     declare_type(ConstantPool, Metadata)                                  \
1291     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1292     declare_type(MethodData, Metadata)                                    \
1293     declare_type(Method, Metadata)                                        \
1294     declare_type(MethodCounters, MetaspaceObj)                            \
1295     declare_type(ConstMethod, MetaspaceObj)                               \
1296                                                                           \
1297   declare_toplevel_type(narrowKlass)                                      \
1298                                                                           \
1299   declare_toplevel_type(vtableEntry)                                      \
1300                                                                           \
1301            declare_toplevel_type(Symbol)                                  \
1302            declare_toplevel_type(Symbol*)                                 \
1303   declare_toplevel_type(volatile Metadata*)                               \
1304                                                                           \
1305   declare_toplevel_type(DataLayout)                                       \
1306                                                                           \
1307   /********/                                                              \
1308   /* Oops */                                                              \
1309   /********/                                                              \
1310                                                                           \

1311   declare_oop_type(objArrayOop)                                           \
1312   declare_oop_type(oop)                                                   \
1313   declare_oop_type(narrowOop)                                             \
1314   declare_oop_type(typeArrayOop)                                          \
1315                                                                           \
1316   declare_toplevel_type(OopHandle)                                        \
1317                                                                           \
1318   /*************************************/                                 \
1319   /* MethodOop-related data structures */                                 \
1320   /*************************************/                                 \
1321                                                                           \
1322   declare_toplevel_type(CheckedExceptionElement)                          \
1323   declare_toplevel_type(LocalVariableTableElement)                        \
1324   declare_toplevel_type(ExceptionTableElement)                            \
1325   declare_toplevel_type(MethodParametersElement)                          \
1326                                                                           \
1327   declare_toplevel_type(ClassLoaderData)                                  \
1328   declare_toplevel_type(ClassLoaderDataGraph)                             \
1329                                                                           \
1330   /************************/                                              \
</pre>
<hr />
<pre>
1353   declare_toplevel_type(vmSymbols)                                        \
1354                                                                           \
1355   declare_toplevel_type(GenericGrowableArray)                             \
1356   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1357   declare_toplevel_type(Arena)                                            \
1358     declare_type(ResourceArea, Arena)                                     \
1359                                                                           \
1360   /***********************************************************/           \
1361   /* Thread hierarchy (needed for run-time type information) */           \
1362   /***********************************************************/           \
1363                                                                           \
1364   declare_toplevel_type(Threads)                                          \
1365   declare_toplevel_type(ThreadShadow)                                     \
1366     declare_type(Thread, ThreadShadow)                                    \
1367       declare_type(NonJavaThread, Thread)                                 \
1368         declare_type(NamedThread, NonJavaThread)                          \
1369         declare_type(WatcherThread, NonJavaThread)                        \
1370       declare_type(JavaThread, Thread)                                    \
1371         declare_type(JvmtiAgentThread, JavaThread)                        \
1372         declare_type(ServiceThread, JavaThread)                           \
<span class="line-added">1373         declare_type(NotificationThread, JavaThread)                      \</span>
1374         declare_type(CompilerThread, JavaThread)                          \
1375         declare_type(CodeCacheSweeperThread, JavaThread)                  \
1376   declare_toplevel_type(OSThread)                                         \
1377   declare_toplevel_type(JavaFrameAnchor)                                  \
1378                                                                           \
<span class="line-added">1379   declare_toplevel_type(ThreadsSMRSupport)                                \</span>
<span class="line-added">1380   declare_toplevel_type(ThreadsList)                                      \</span>
<span class="line-added">1381                                                                           \</span>
1382   /***************/                                                       \
1383   /* Interpreter */                                                       \
1384   /***************/                                                       \
1385                                                                           \
1386   declare_toplevel_type(AbstractInterpreter)                              \
1387                                                                           \
1388   /*********/                                                             \
1389   /* Stubs */                                                             \
1390   /*********/                                                             \
1391                                                                           \
1392   declare_toplevel_type(StubQueue)                                        \
1393   declare_toplevel_type(StubRoutines)                                     \
1394   declare_toplevel_type(Stub)                                             \
1395            declare_type(InterpreterCodelet, Stub)                         \
1396                                                                           \
1397   /*************/                                                         \
1398   /* JavaCalls */                                                         \
1399   /*************/                                                         \
1400                                                                           \
1401   declare_toplevel_type(JavaCallWrapper)                                  \
</pre>
<hr />
<pre>
1580   declare_c2_type(ConINode, ConNode)                                      \
1581   declare_c2_type(ConPNode, ConNode)                                      \
1582   declare_c2_type(ConNNode, ConNode)                                      \
1583   declare_c2_type(ConLNode, ConNode)                                      \
1584   declare_c2_type(ConFNode, ConNode)                                      \
1585   declare_c2_type(ConDNode, ConNode)                                      \
1586   declare_c2_type(BinaryNode, Node)                                       \
1587   declare_c2_type(CMoveNode, TypeNode)                                    \
1588   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1589   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1590   declare_c2_type(CMoveINode, CMoveNode)                                  \
1591   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1592   declare_c2_type(CMovePNode, CMoveNode)                                  \
1593   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1594   declare_c2_type(EncodePNode, TypeNode)                                  \
1595   declare_c2_type(DecodeNNode, TypeNode)                                  \
1596   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1597   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1598   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1599   declare_c2_type(CastIINode, ConstraintCastNode)                         \
<span class="line-added">1600   declare_c2_type(CastLLNode, ConstraintCastNode)                         \</span>
1601   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1602   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1603   declare_c2_type(Conv2BNode, Node)                                       \
1604   declare_c2_type(ConvD2FNode, Node)                                      \
1605   declare_c2_type(ConvD2INode, Node)                                      \
1606   declare_c2_type(ConvD2LNode, Node)                                      \
1607   declare_c2_type(ConvF2DNode, Node)                                      \
1608   declare_c2_type(ConvF2INode, Node)                                      \
1609   declare_c2_type(ConvF2LNode, Node)                                      \
1610   declare_c2_type(ConvI2DNode, Node)                                      \
1611   declare_c2_type(ConvI2FNode, Node)                                      \
1612   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1613   declare_c2_type(ConvL2DNode, Node)                                      \
1614   declare_c2_type(ConvL2FNode, Node)                                      \
1615   declare_c2_type(ConvL2INode, Node)                                      \
1616   declare_c2_type(CastX2PNode, Node)                                      \
1617   declare_c2_type(CastP2XNode, Node)                                      \
1618   declare_c2_type(SetVectMaskINode, Node)                                 \
1619   declare_c2_type(MemBarNode, MultiNode)                                  \
1620   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
</pre>
<hr />
<pre>
1761   declare_c2_type(CmpFNode, CmpNode)                                      \
1762   declare_c2_type(CmpF3Node, CmpFNode)                                    \
1763   declare_c2_type(CmpDNode, CmpNode)                                      \
1764   declare_c2_type(CmpD3Node, CmpDNode)                                    \
1765   declare_c2_type(BoolNode, Node)                                         \
1766   declare_c2_type(AbsNode, Node)                                          \
1767   declare_c2_type(AbsINode, AbsNode)                                      \
1768   declare_c2_type(AbsFNode, AbsNode)                                      \
1769   declare_c2_type(AbsDNode, AbsNode)                                      \
1770   declare_c2_type(CmpLTMaskNode, Node)                                    \
1771   declare_c2_type(NegNode, Node)                                          \
1772   declare_c2_type(NegFNode, NegNode)                                      \
1773   declare_c2_type(NegDNode, NegNode)                                      \
1774   declare_c2_type(AtanDNode, Node)                                        \
1775   declare_c2_type(SqrtFNode, Node)                                        \
1776   declare_c2_type(SqrtDNode, Node)                                        \
1777   declare_c2_type(ReverseBytesINode, Node)                                \
1778   declare_c2_type(ReverseBytesLNode, Node)                                \
1779   declare_c2_type(ReductionNode, Node)                                    \
1780   declare_c2_type(VectorNode, Node)                                       \
<span class="line-added">1781   declare_c2_type(AbsVBNode, VectorNode)                                   \</span>
<span class="line-added">1782   declare_c2_type(AbsVSNode, VectorNode)                                   \</span>
<span class="line-added">1783   declare_c2_type(AbsVINode, VectorNode)                                   \</span>
<span class="line-added">1784   declare_c2_type(AbsVLNode, VectorNode)                                   \</span>
1785   declare_c2_type(AddVBNode, VectorNode)                                  \
1786   declare_c2_type(AddVSNode, VectorNode)                                  \
1787   declare_c2_type(AddVINode, VectorNode)                                  \
1788   declare_c2_type(AddReductionVINode, ReductionNode)                      \
1789   declare_c2_type(AddVLNode, VectorNode)                                  \
1790   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
1791   declare_c2_type(AddVFNode, VectorNode)                                  \
1792   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
1793   declare_c2_type(AddVDNode, VectorNode)                                  \
1794   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
1795   declare_c2_type(SubVBNode, VectorNode)                                  \
1796   declare_c2_type(SubVSNode, VectorNode)                                  \
1797   declare_c2_type(SubVINode, VectorNode)                                  \
1798   declare_c2_type(SubVLNode, VectorNode)                                  \
1799   declare_c2_type(SubVFNode, VectorNode)                                  \
1800   declare_c2_type(SubVDNode, VectorNode)                                  \
<span class="line-added">1801   declare_c2_type(MulVBNode, VectorNode)                                  \</span>
1802   declare_c2_type(MulVSNode, VectorNode)                                  \
1803   declare_c2_type(MulVLNode, VectorNode)                                  \
1804   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
1805   declare_c2_type(MulVINode, VectorNode)                                  \
1806   declare_c2_type(MulReductionVINode, ReductionNode)                      \
1807   declare_c2_type(MulVFNode, VectorNode)                                  \
1808   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
1809   declare_c2_type(MulVDNode, VectorNode)                                  \
<span class="line-added">1810   declare_c2_type(NegVFNode, VectorNode)                                  \</span>
<span class="line-added">1811   declare_c2_type(NegVDNode, VectorNode)                                  \</span>
1812   declare_c2_type(FmaVDNode, VectorNode)                                  \
1813   declare_c2_type(FmaVFNode, VectorNode)                                  \
1814   declare_c2_type(CMoveVFNode, VectorNode)                                \
1815   declare_c2_type(CMoveVDNode, VectorNode)                                \
1816   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
1817   declare_c2_type(DivVFNode, VectorNode)                                  \
1818   declare_c2_type(DivVDNode, VectorNode)                                  \
1819   declare_c2_type(PopCountVINode, VectorNode)                             \
1820   declare_c2_type(LShiftVBNode, VectorNode)                               \
1821   declare_c2_type(LShiftVSNode, VectorNode)                               \
1822   declare_c2_type(LShiftVINode, VectorNode)                               \
1823   declare_c2_type(LShiftVLNode, VectorNode)                               \
1824   declare_c2_type(RShiftVBNode, VectorNode)                               \
1825   declare_c2_type(RShiftVSNode, VectorNode)                               \
1826   declare_c2_type(RShiftVINode, VectorNode)                               \
1827   declare_c2_type(RShiftVLNode, VectorNode)                               \
1828   declare_c2_type(URShiftVBNode, VectorNode)                              \
1829   declare_c2_type(URShiftVSNode, VectorNode)                              \
1830   declare_c2_type(URShiftVINode, VectorNode)                              \
1831   declare_c2_type(URShiftVLNode, VectorNode)                              \
</pre>
<hr />
<pre>
1942    declare_integer_type(Bytecodes::Code)                                  \
1943    declare_integer_type(Generation::Name)                                 \
1944    declare_integer_type(InstanceKlass::ClassState)                        \
1945    declare_integer_type(JavaThreadState)                                  \
1946    declare_integer_type(ThreadState)                                      \
1947    declare_integer_type(Location::Type)                                   \
1948    declare_integer_type(Location::Where)                                  \
1949    declare_integer_type(JVMFlag::Flags)                                   \
1950    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
1951                                                                           \
1952    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
1953             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
1954             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
1955             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
1956             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
1957             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
1958                                                                           \
1959    declare_toplevel_type(BitMap)                                          \
1960             declare_type(BitMapView, BitMap)                              \
1961                                                                           \
<span class="line-modified">1962   declare_integer_type(markWord)                                          \</span>
<span class="line-added">1963   declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\</span>
1964   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
<span class="line-modified">1965   declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */ \</span>
1966   declare_toplevel_type(BreakpointInfo)                                   \
1967   declare_toplevel_type(BreakpointInfo*)                                  \
1968   declare_toplevel_type(CodeBlob*)                                        \
1969   declare_toplevel_type(RuntimeBlob*)                                     \
1970   declare_toplevel_type(CompressedWriteStream*)                           \
1971   declare_toplevel_type(ConstantPoolCacheEntry)                           \
1972   declare_toplevel_type(elapsedTimer)                                     \
1973   declare_toplevel_type(frame)                                            \
1974   declare_toplevel_type(intptr_t*)                                        \
1975    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
1976   declare_toplevel_type(JavaThread*)                                      \
<span class="line-added">1977   declare_toplevel_type(JavaThread *const *const)                         \</span>
1978   declare_toplevel_type(java_lang_Class)                                  \
1979   declare_integer_type(JavaThread::AsyncRequests)                         \
1980   declare_integer_type(JavaThread::TerminatedTypes)                       \
1981   declare_toplevel_type(jbyte*)                                           \
1982   declare_toplevel_type(jbyte**)                                          \
1983   declare_toplevel_type(jint*)                                            \
1984   declare_toplevel_type(jniIdMapBase*)                                    \
1985   declare_unsigned_integer_type(juint)                                    \
1986   declare_unsigned_integer_type(julong)                                   \
1987   declare_toplevel_type(JNIHandleBlock*)                                  \
1988   declare_toplevel_type(JNIid)                                            \
1989   declare_toplevel_type(JNIid*)                                           \
1990   declare_toplevel_type(jmethodID*)                                       \
1991   declare_toplevel_type(Mutex*)                                           \
1992   declare_toplevel_type(nmethod*)                                         \
1993   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
1994   declare_toplevel_type(ObjectMonitor*)                                   \
1995   declare_toplevel_type(PaddedObjectMonitor*)                             \
1996   declare_toplevel_type(oop*)                                             \
1997   declare_toplevel_type(OopMap**)                                         \
1998   declare_toplevel_type(OopMapCache*)                                     \
1999   declare_toplevel_type(OopMapSet*)                                       \
2000   declare_toplevel_type(VMReg)                                            \
2001   declare_toplevel_type(OSThread*)                                        \
2002    declare_integer_type(ReferenceType)                                    \
2003   declare_toplevel_type(StubQueue*)                                       \
2004   declare_toplevel_type(Thread*)                                          \
2005   declare_toplevel_type(Universe)                                         \
<span class="line-added">2006   declare_toplevel_type(CompressedOops)                                   \</span>
<span class="line-added">2007   declare_toplevel_type(CompressedKlassPointers)                          \</span>
2008   declare_toplevel_type(os)                                               \
2009   declare_toplevel_type(vframeArray)                                      \
2010   declare_toplevel_type(vframeArrayElement)                               \
2011   declare_toplevel_type(Annotations*)                                     \
2012   declare_type(OopMapValue, StackObj)                                     \
2013   declare_type(FileMapInfo, CHeapObj&lt;mtInternal&gt;)                         \
2014   declare_toplevel_type(FileMapHeader)                                    \
2015   declare_toplevel_type(CDSFileMapRegion)                                 \
2016                                                                           \
2017   /************/                                                          \
2018   /* GC types */                                                          \
2019   /************/                                                          \
2020                                                                           \
2021   VM_TYPES_GC(declare_type,                                               \
2022               declare_toplevel_type,                                      \
2023               declare_integer_type)
2024 
2025 //--------------------------------------------------------------------------------
2026 // VM_INT_CONSTANTS
2027 //
</pre>
<hr />
<pre>
2109   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2110   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2111   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2112                                                                           \
2113   declare_constant(JVM_CONSTANT_Utf8)                                     \
2114   declare_constant(JVM_CONSTANT_Unicode)                                  \
2115   declare_constant(JVM_CONSTANT_Integer)                                  \
2116   declare_constant(JVM_CONSTANT_Float)                                    \
2117   declare_constant(JVM_CONSTANT_Long)                                     \
2118   declare_constant(JVM_CONSTANT_Double)                                   \
2119   declare_constant(JVM_CONSTANT_Class)                                    \
2120   declare_constant(JVM_CONSTANT_String)                                   \
2121   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2122   declare_constant(JVM_CONSTANT_Methodref)                                \
2123   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2124   declare_constant(JVM_CONSTANT_NameAndType)                              \
2125   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2126   declare_constant(JVM_CONSTANT_MethodType)                               \
2127   declare_constant(JVM_CONSTANT_Dynamic)                                  \
2128   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
<span class="line-added">2129   declare_constant(JVM_CONSTANT_Module)                                   \</span>
<span class="line-added">2130   declare_constant(JVM_CONSTANT_Package)                                  \</span>
2131   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2132                                                                           \
2133   declare_constant(JVM_CONSTANT_Invalid)                                  \
2134   declare_constant(JVM_CONSTANT_InternalMin)                              \
2135   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2136   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2137   declare_constant(JVM_CONSTANT_StringIndex)                              \
2138   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2139   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2140   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2141   declare_constant(JVM_CONSTANT_DynamicInError)                           \
2142   declare_constant(JVM_CONSTANT_InternalMax)                              \
2143                                                                           \
2144   /*****************************/                                         \
2145   /* Thread::SuspendFlags enum */                                         \
2146   /*****************************/                                         \
2147                                                                           \
2148   declare_constant(Thread::_external_suspend)                             \
2149   declare_constant(Thread::_ext_suspended)                                \
2150   declare_constant(Thread::_has_async_exception)                          \
</pre>
<hr />
<pre>
2375   declare_constant(Location::addr)                                        \
2376   declare_constant(Location::invalid)                                     \
2377                                                                           \
2378   /* constants from Location::Where enum */                               \
2379                                                                           \
2380   declare_constant(Location::on_stack)                                    \
2381   declare_constant(Location::in_register)                                 \
2382                                                                           \
2383   declare_constant(Deoptimization::Reason_many)                           \
2384   declare_constant(Deoptimization::Reason_none)                           \
2385   declare_constant(Deoptimization::Reason_null_check)                     \
2386   declare_constant(Deoptimization::Reason_null_assert)                    \
2387   declare_constant(Deoptimization::Reason_range_check)                    \
2388   declare_constant(Deoptimization::Reason_class_check)                    \
2389   declare_constant(Deoptimization::Reason_array_check)                    \
2390   declare_constant(Deoptimization::Reason_intrinsic)                      \
2391   declare_constant(Deoptimization::Reason_bimorphic)                      \
2392   declare_constant(Deoptimization::Reason_profile_predicate)              \
2393   declare_constant(Deoptimization::Reason_unloaded)                       \
2394   declare_constant(Deoptimization::Reason_uninitialized)                  \
<span class="line-added">2395   declare_constant(Deoptimization::Reason_initialized)                    \</span>
2396   declare_constant(Deoptimization::Reason_unreached)                      \
2397   declare_constant(Deoptimization::Reason_unhandled)                      \
2398   declare_constant(Deoptimization::Reason_constraint)                     \
2399   declare_constant(Deoptimization::Reason_div0_check)                     \
2400   declare_constant(Deoptimization::Reason_age)                            \
2401   declare_constant(Deoptimization::Reason_predicate)                      \
2402   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2403   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2404   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2405   declare_constant(Deoptimization::Reason_speculate_null_assert)          \
2406   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2407   declare_constant(Deoptimization::Reason_unstable_if)                    \
2408   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2409   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_aliasing)))                       \
2410   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_transfer_to_interpreter)))        \
2411   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_not_compiled_exception_handler))) \
2412   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_unresolved)))                     \
2413   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_jsr_mismatch)))                   \
2414   declare_constant(Deoptimization::Reason_tenured)                        \
2415   declare_constant(Deoptimization::Reason_LIMIT)                          \
</pre>
<hr />
<pre>
2598   /****************/                                                      \
2599                                                                           \
2600   declare_preprocessor_constant(&quot;INCLUDE_JVMCI&quot;, INCLUDE_JVMCI)           \
2601                                                                           \
2602   /****************/                                                      \
2603   /*  VMRegImpl   */                                                      \
2604   /****************/                                                      \
2605   declare_constant(VMRegImpl::stack_slot_size)                            \
2606                                                                           \
2607   /******************************/                                        \
2608   /*  -XX flags (value origin)  */                                        \
2609   /******************************/                                        \
2610   declare_constant(JVMFlag::DEFAULT)                                      \
2611   declare_constant(JVMFlag::COMMAND_LINE)                                 \
2612   declare_constant(JVMFlag::ENVIRON_VAR)                                  \
2613   declare_constant(JVMFlag::CONFIG_FILE)                                  \
2614   declare_constant(JVMFlag::MANAGEMENT)                                   \
2615   declare_constant(JVMFlag::ERGONOMIC)                                    \
2616   declare_constant(JVMFlag::ATTACH_ON_DEMAND)                             \
2617   declare_constant(JVMFlag::INTERNAL)                                     \
<span class="line-added">2618   declare_constant(JVMFlag::JIMAGE_RESOURCE)                              \</span>
2619   declare_constant(JVMFlag::VALUE_ORIGIN_MASK)                            \
2620   declare_constant(JVMFlag::ORIG_COMMAND_LINE)
2621 
2622 //--------------------------------------------------------------------------------
2623 // VM_LONG_CONSTANTS
2624 //
2625 // This table contains long constants required over in the
2626 // serviceability agent. The &quot;declare_constant&quot; macro is used for all
2627 // enums, etc., while &quot;declare_preprocessor_constant&quot; must be used for
2628 // all #defined constants.
2629 
2630 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2631                                                                           \
2632   /****************/                                                      \
2633   /* GC constants */                                                      \
2634   /****************/                                                      \
2635                                                                           \
2636   VM_LONG_CONSTANTS_GC(declare_constant)                                  \
2637                                                                           \
2638   /*********************/                                                 \
<span class="line-modified">2639   /* markWord constants */                                                \</span>
2640   /*********************/                                                 \
2641                                                                           \
2642   /* Note: some of these are declared as long constants just for */       \
2643   /* consistency. The mask constants are the only ones requiring */       \
2644   /* 64 bits (on 64-bit platforms). */                                    \
2645                                                                           \
<span class="line-modified">2646   declare_constant(markWord::age_bits)                                    \</span>
<span class="line-modified">2647   declare_constant(markWord::lock_bits)                                   \</span>
<span class="line-modified">2648   declare_constant(markWord::biased_lock_bits)                            \</span>
<span class="line-modified">2649   declare_constant(markWord::max_hash_bits)                               \</span>
<span class="line-modified">2650   declare_constant(markWord::hash_bits)                                   \</span>
<span class="line-modified">2651                                                                           \</span>
<span class="line-modified">2652   declare_constant(markWord::lock_shift)                                  \</span>
<span class="line-modified">2653   declare_constant(markWord::biased_lock_shift)                           \</span>
<span class="line-modified">2654   declare_constant(markWord::age_shift)                                   \</span>
<span class="line-modified">2655   declare_constant(markWord::hash_shift)                                  \</span>
<span class="line-modified">2656                                                                           \</span>
<span class="line-modified">2657   declare_constant(markWord::lock_mask)                                   \</span>
<span class="line-modified">2658   declare_constant(markWord::lock_mask_in_place)                          \</span>
<span class="line-modified">2659   declare_constant(markWord::biased_lock_mask)                            \</span>
<span class="line-modified">2660   declare_constant(markWord::biased_lock_mask_in_place)                   \</span>
<span class="line-modified">2661   declare_constant(markWord::biased_lock_bit_in_place)                    \</span>
<span class="line-modified">2662   declare_constant(markWord::age_mask)                                    \</span>
<span class="line-modified">2663   declare_constant(markWord::age_mask_in_place)                           \</span>
<span class="line-modified">2664   declare_constant(markWord::epoch_mask)                                  \</span>
<span class="line-modified">2665   declare_constant(markWord::epoch_mask_in_place)                         \</span>
<span class="line-modified">2666   declare_constant(markWord::hash_mask)                                   \</span>
<span class="line-modified">2667   declare_constant(markWord::hash_mask_in_place)                          \</span>
<span class="line-modified">2668   declare_constant(markWord::biased_lock_alignment)                       \</span>
<span class="line-modified">2669                                                                           \</span>
<span class="line-modified">2670   declare_constant(markWord::locked_value)                                \</span>
<span class="line-modified">2671   declare_constant(markWord::unlocked_value)                              \</span>
<span class="line-modified">2672   declare_constant(markWord::monitor_value)                               \</span>
<span class="line-modified">2673   declare_constant(markWord::marked_value)                                \</span>
<span class="line-modified">2674   declare_constant(markWord::biased_lock_pattern)                         \</span>
<span class="line-modified">2675                                                                           \</span>
<span class="line-modified">2676   declare_constant(markWord::no_hash)                                     \</span>
<span class="line-modified">2677   declare_constant(markWord::no_hash_in_place)                            \</span>
<span class="line-modified">2678   declare_constant(markWord::no_lock_in_place)                            \</span>
<span class="line-modified">2679   declare_constant(markWord::max_age)                                     \</span>





2680                                                                           \
2681   /* InvocationCounter constants */                                       \
2682   declare_constant(InvocationCounter::count_increment)                    \
2683   declare_constant(InvocationCounter::count_shift)
2684 
2685 
2686 //--------------------------------------------------------------------------------
2687 //
2688 
2689 // Generate and check a nonstatic field in non-product builds
2690 #ifndef PRODUCT
2691 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2692 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2693 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2694 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2695 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2696 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2697 #else
2698 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2699 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
</pre>
</td>
</tr>
</table>
<center><a href="vmOperations.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmStructs.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>