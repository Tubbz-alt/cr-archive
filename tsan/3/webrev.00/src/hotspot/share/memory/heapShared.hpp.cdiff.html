<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/memory/heapShared.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="heapShared.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="heapShared.inline.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/memory/heapShared.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 27,11 ***</span>
  
  #include &quot;classfile/compactHashtable.hpp&quot;
  #include &quot;classfile/systemDictionary.hpp&quot;
  #include &quot;memory/allocation.hpp&quot;
  #include &quot;memory/metaspaceShared.hpp&quot;
<span class="line-modified">! #include &quot;memory/universe.hpp&quot;</span>
  #include &quot;oops/objArrayKlass.hpp&quot;
  #include &quot;oops/oop.hpp&quot;
  #include &quot;oops/typeArrayKlass.hpp&quot;
  #include &quot;utilities/bitMap.hpp&quot;
  #include &quot;utilities/growableArray.hpp&quot;
<span class="line-new-header">--- 27,11 ---</span>
  
  #include &quot;classfile/compactHashtable.hpp&quot;
  #include &quot;classfile/systemDictionary.hpp&quot;
  #include &quot;memory/allocation.hpp&quot;
  #include &quot;memory/metaspaceShared.hpp&quot;
<span class="line-modified">! #include &quot;oops/compressedOops.hpp&quot;</span>
  #include &quot;oops/objArrayKlass.hpp&quot;
  #include &quot;oops/oop.hpp&quot;
  #include &quot;oops/typeArrayKlass.hpp&quot;
  #include &quot;utilities/bitMap.hpp&quot;
  #include &quot;utilities/growableArray.hpp&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 123,11 ***</span>
    static bool _closed_archive_heap_region_mapped;
    static bool _open_archive_heap_region_mapped;
    static bool _archive_heap_region_fixed;
  
    static bool oop_equals(oop const&amp; p1, oop const&amp; p2) {
<span class="line-modified">!     return oopDesc::equals(p1, p2);</span>
    }
    static unsigned oop_hash(oop const&amp; p);
  
    typedef ResourceHashtable&lt;oop, oop,
        HeapShared::oop_hash,
<span class="line-new-header">--- 123,11 ---</span>
    static bool _closed_archive_heap_region_mapped;
    static bool _open_archive_heap_region_mapped;
    static bool _archive_heap_region_fixed;
  
    static bool oop_equals(oop const&amp; p1, oop const&amp; p2) {
<span class="line-modified">!     return p1 == p2;</span>
    }
    static unsigned oop_hash(oop const&amp; p);
  
    typedef ResourceHashtable&lt;oop, oop,
        HeapShared::oop_hash,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 284,20 ***</span>
    static bool is_heap_region(int idx) {
      CDS_JAVA_HEAP_ONLY(return (idx &gt;= MetaspaceShared::first_closed_archive_heap_region &amp;&amp;
                                 idx &lt;= MetaspaceShared::last_open_archive_heap_region));
      NOT_CDS_JAVA_HEAP_RETURN_(false);
    }
<span class="line-removed">-   static bool is_closed_archive_heap_region(int idx) {</span>
<span class="line-removed">-     CDS_JAVA_HEAP_ONLY(return (idx &gt;= MetaspaceShared::first_closed_archive_heap_region &amp;&amp;</span>
<span class="line-removed">-                                idx &lt;= MetaspaceShared::last_closed_archive_heap_region));</span>
<span class="line-removed">-     NOT_CDS_JAVA_HEAP_RETURN_(false);</span>
<span class="line-removed">-   }</span>
<span class="line-removed">-   static bool is_open_archive_heap_region(int idx) {</span>
<span class="line-removed">-     CDS_JAVA_HEAP_ONLY(return (idx &gt;= MetaspaceShared::first_open_archive_heap_region &amp;&amp;</span>
<span class="line-removed">-                                idx &lt;= MetaspaceShared::last_open_archive_heap_region));</span>
<span class="line-removed">-     NOT_CDS_JAVA_HEAP_RETURN_(false);</span>
<span class="line-removed">-   }</span>
  
    static void set_closed_archive_heap_region_mapped() {
      CDS_JAVA_HEAP_ONLY(_closed_archive_heap_region_mapped = true);
      NOT_CDS_JAVA_HEAP_RETURN;
    }
<span class="line-new-header">--- 284,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 319,11 ***</span>
    inline static bool is_archived_object(oop p) NOT_CDS_JAVA_HEAP_RETURN_(false);
  
    static void initialize_from_archived_subgraph(Klass* k) NOT_CDS_JAVA_HEAP_RETURN;
  
    // NarrowOops stored in the CDS archive may use a different encoding scheme
<span class="line-modified">!   // than Universe::narrow_oop_{base,shift} -- see FileMapInfo::map_heap_regions_impl.</span>
    // To decode them, do not use CompressedOops::decode_not_null. Use this
    // function instead.
    inline static oop decode_from_archive(narrowOop v) NOT_CDS_JAVA_HEAP_RETURN_(NULL);
  
    static void init_narrow_oop_decoding(address base, int shift) NOT_CDS_JAVA_HEAP_RETURN;
<span class="line-new-header">--- 309,11 ---</span>
    inline static bool is_archived_object(oop p) NOT_CDS_JAVA_HEAP_RETURN_(false);
  
    static void initialize_from_archived_subgraph(Klass* k) NOT_CDS_JAVA_HEAP_RETURN;
  
    // NarrowOops stored in the CDS archive may use a different encoding scheme
<span class="line-modified">!   // than CompressedOops::{base,shift} -- see FileMapInfo::map_heap_regions_impl.</span>
    // To decode them, do not use CompressedOops::decode_not_null. Use this
    // function instead.
    inline static oop decode_from_archive(narrowOop v) NOT_CDS_JAVA_HEAP_RETURN_(NULL);
  
    static void init_narrow_oop_decoding(address base, int shift) NOT_CDS_JAVA_HEAP_RETURN;
</pre>
<center><a href="heapShared.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="heapShared.inline.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>