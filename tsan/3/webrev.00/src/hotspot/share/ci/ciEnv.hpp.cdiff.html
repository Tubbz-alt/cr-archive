<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/ci/ciEnv.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="ciEnv.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ciExceptionHandler.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/ci/ciEnv.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 49,11 ***</span>
    friend class PrepareExtraDataClosure;
  
  private:
    Arena*           _arena;       // Alias for _ciEnv_arena except in init_shared_objects()
    Arena            _ciEnv_arena;
<span class="line-removed">-   int              _system_dictionary_modification_counter;</span>
    ciObjectFactory* _factory;
    OopRecorder*     _oop_recorder;
    DebugInformationRecorder* _debug_info;
    Dependencies*    _dependencies;
    const char*      _failure_reason;
<span class="line-new-header">--- 49,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 67,14 ***</span>
<span class="line-new-header">--- 66,16 ---</span>
  
    char* _name_buffer;
    int   _name_buffer_len;
  
    // Cache Jvmti state
<span class="line-added">+   uint64_t _jvmti_redefinition_count;</span>
    bool  _jvmti_can_hotswap_or_post_breakpoint;
    bool  _jvmti_can_access_local_variables;
    bool  _jvmti_can_post_on_exceptions;
    bool  _jvmti_can_pop_frame;
<span class="line-added">+   bool  _jvmti_can_get_owned_monitor_info; // includes can_get_owned_monitor_stack_depth_info</span>
  
    // Cache DTrace flags
    bool  _dtrace_extended_probes;
    bool  _dtrace_monitor_probes;
    bool  _dtrace_method_probes;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 289,21 ***</span>
    static bool is_in_vm();
  
    // Helper routine for determining the validity of a compilation with
    // respect to method dependencies (e.g. concurrent class loading).
    void validate_compile_task_dependencies(ciMethod* target);
<span class="line-removed">- </span>
<span class="line-removed">-   // Call internally when Compile_lock is already held.</span>
<span class="line-removed">-   bool system_dictionary_modification_counter_changed_locked();</span>
  public:
    enum {
      MethodCompilable,
      MethodCompilable_not_at_tier,
      MethodCompilable_never
    };
  
<span class="line-modified">!   ciEnv(CompileTask* task, int system_dictionary_modification_counter);</span>
    // Used only during initialization of the ci
    ciEnv(Arena* arena);
    ~ciEnv();
  
    OopRecorder* oop_recorder() { return _oop_recorder; }
<span class="line-new-header">--- 290,18 ---</span>
    static bool is_in_vm();
  
    // Helper routine for determining the validity of a compilation with
    // respect to method dependencies (e.g. concurrent class loading).
    void validate_compile_task_dependencies(ciMethod* target);
  public:
    enum {
      MethodCompilable,
      MethodCompilable_not_at_tier,
      MethodCompilable_never
    };
  
<span class="line-modified">!   ciEnv(CompileTask* task);</span>
    // Used only during initialization of the ci
    ciEnv(Arena* arena);
    ~ciEnv();
  
    OopRecorder* oop_recorder() { return _oop_recorder; }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 348,10 ***</span>
<span class="line-new-header">--- 346,11 ---</span>
    bool  should_retain_local_variables() const {
      return _jvmti_can_access_local_variables || _jvmti_can_pop_frame;
    }
    bool  jvmti_can_hotswap_or_post_breakpoint() const { return _jvmti_can_hotswap_or_post_breakpoint; }
    bool  jvmti_can_post_on_exceptions()         const { return _jvmti_can_post_on_exceptions; }
<span class="line-added">+   bool  jvmti_can_get_owned_monitor_info()     const { return _jvmti_can_get_owned_monitor_info; }</span>
  
    // Cache DTrace flags
    void  cache_dtrace_flags();
    bool  dtrace_extended_probes() const { return _dtrace_extended_probes; }
    bool  dtrace_monitor_probes()  const { return _dtrace_monitor_probes; }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 454,20 ***</span>
  
    // Output stream for logging compilation info.
    CompileLog* log() { return _log; }
    void set_log(CompileLog* log) { _log = log; }
  
<span class="line-removed">-   // Check for changes to the system dictionary during compilation</span>
<span class="line-removed">-   bool system_dictionary_modification_counter_changed();</span>
<span class="line-removed">- </span>
    void record_failure(const char* reason);      // Record failure and report later
    void report_failure(const char* reason);      // Report failure immediately
    void record_method_not_compilable(const char* reason, bool all_tiers = true);
    void record_out_of_memory_failure();
  
    // RedefineClasses support
<span class="line-modified">!   void metadata_do(void f(Metadata*)) { _factory-&gt;metadata_do(f); }</span>
  
    // Dump the compilation replay data for the ciEnv to the stream.
    void dump_replay_data(int compile_id);
    void dump_inline_data(int compile_id);
    void dump_replay_data(outputStream* out);
<span class="line-new-header">--- 453,17 ---</span>
  
    // Output stream for logging compilation info.
    CompileLog* log() { return _log; }
    void set_log(CompileLog* log) { _log = log; }
  
    void record_failure(const char* reason);      // Record failure and report later
    void report_failure(const char* reason);      // Report failure immediately
    void record_method_not_compilable(const char* reason, bool all_tiers = true);
    void record_out_of_memory_failure();
  
    // RedefineClasses support
<span class="line-modified">!   void metadata_do(MetadataClosure* f) { _factory-&gt;metadata_do(f); }</span>
  
    // Dump the compilation replay data for the ciEnv to the stream.
    void dump_replay_data(int compile_id);
    void dump_inline_data(int compile_id);
    void dump_replay_data(outputStream* out);
</pre>
<center><a href="ciEnv.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ciExceptionHandler.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>