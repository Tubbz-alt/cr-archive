<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/jfr/support/jfrThreadLocal.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jfrThreadLocal.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jfrTraceIdExtension.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/support/jfrThreadLocal.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 23,11 ***</span>
   */
  
  #ifndef SHARE_JFR_SUPPORT_JFRTHREADLOCAL_HPP
  #define SHARE_JFR_SUPPORT_JFRTHREADLOCAL_HPP
  
<span class="line-modified">! #include &quot;jfr/recorder/checkpoint/jfrCheckpointBlob.hpp&quot;</span>
  #include &quot;jfr/utilities/jfrTypes.hpp&quot;
  
  class JavaThread;
  class JfrBuffer;
  class JfrStackFrame;
<span class="line-new-header">--- 23,11 ---</span>
   */
  
  #ifndef SHARE_JFR_SUPPORT_JFRTHREADLOCAL_HPP
  #define SHARE_JFR_SUPPORT_JFRTHREADLOCAL_HPP
  
<span class="line-modified">! #include &quot;jfr/utilities/jfrBlob.hpp&quot;</span>
  #include &quot;jfr/utilities/jfrTypes.hpp&quot;
  
  class JavaThread;
  class JfrBuffer;
  class JfrStackFrame;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 39,25 ***</span>
    mutable JfrBuffer* _java_buffer;
    mutable JfrBuffer* _native_buffer;
    JfrBuffer* _shelved_buffer;
    mutable JfrStackFrame* _stackframes;
    mutable traceid _trace_id;
<span class="line-modified">!   JfrCheckpointBlobHandle _thread_cp;</span>
    u8 _data_lost;
    traceid _stack_trace_id;
    jlong _user_time;
    jlong _cpu_time;
    jlong _wallclock_time;
    unsigned int _stack_trace_hash;
    mutable u4 _stackdepth;
    volatile jint _entering_suspend_flag;
    bool _dead;
  
    JfrBuffer* install_native_buffer() const;
    JfrBuffer* install_java_buffer() const;
    JfrStackFrame* install_stackframes() const;
<span class="line-modified">! </span>
    static void release(JfrThreadLocal* tl, Thread* t);
  
   public:
    JfrThreadLocal();
  
<span class="line-new-header">--- 39,26 ---</span>
    mutable JfrBuffer* _java_buffer;
    mutable JfrBuffer* _native_buffer;
    JfrBuffer* _shelved_buffer;
    mutable JfrStackFrame* _stackframes;
    mutable traceid _trace_id;
<span class="line-modified">!   JfrBlobHandle _thread;</span>
    u8 _data_lost;
    traceid _stack_trace_id;
    jlong _user_time;
    jlong _cpu_time;
    jlong _wallclock_time;
    unsigned int _stack_trace_hash;
    mutable u4 _stackdepth;
    volatile jint _entering_suspend_flag;
<span class="line-added">+   bool _excluded;</span>
    bool _dead;
  
    JfrBuffer* install_native_buffer() const;
    JfrBuffer* install_java_buffer() const;
    JfrStackFrame* install_stackframes() const;
<span class="line-modified">!   void release(Thread* t);</span>
    static void release(JfrThreadLocal* tl, Thread* t);
  
   public:
    JfrThreadLocal();
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 111,13 ***</span>
  
    void set_stackframes(JfrStackFrame* frames) {
      _stackframes = frames;
    }
  
<span class="line-modified">!   u4 stackdepth() const {</span>
<span class="line-removed">-     return _stackdepth;</span>
<span class="line-removed">-   }</span>
  
    void set_stackdepth(u4 depth) {
      _stackdepth = depth;
    }
  
<span class="line-new-header">--- 112,11 ---</span>
  
    void set_stackframes(JfrStackFrame* frames) {
      _stackframes = frames;
    }
  
<span class="line-modified">!   u4 stackdepth() const;</span>
  
    void set_stackdepth(u4 depth) {
      _stackdepth = depth;
    }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 203,17 ***</span>
  
    void set_trace_id(traceid id) const {
      _trace_id = id;
    }
  
    bool is_dead() const {
      return _dead;
    }
  
<span class="line-modified">!   bool has_thread_checkpoint() const;</span>
<span class="line-modified">!   void set_thread_checkpoint(const JfrCheckpointBlobHandle&amp; handle);</span>
<span class="line-modified">!   const JfrCheckpointBlobHandle&amp; thread_checkpoint() const;</span>
  
    static void on_start(Thread* t);
    static void on_exit(Thread* t);
  
    // Code generation
<span class="line-new-header">--- 202,24 ---</span>
  
    void set_trace_id(traceid id) const {
      _trace_id = id;
    }
  
<span class="line-added">+   bool is_excluded() const {</span>
<span class="line-added">+     return _excluded;</span>
<span class="line-added">+   }</span>
<span class="line-added">+ </span>
    bool is_dead() const {
      return _dead;
    }
  
<span class="line-modified">!   bool has_thread_blob() const;</span>
<span class="line-modified">!   void set_thread_blob(const JfrBlobHandle&amp; handle);</span>
<span class="line-modified">!   const JfrBlobHandle&amp; thread_blob() const;</span>
<span class="line-added">+ </span>
<span class="line-added">+   static void exclude(Thread* t);</span>
<span class="line-added">+   static void include(Thread* t);</span>
  
    static void on_start(Thread* t);
    static void on_exit(Thread* t);
  
    // Code generation
</pre>
<center><a href="jfrThreadLocal.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jfrTraceIdExtension.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>