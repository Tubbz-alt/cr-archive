<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jfr/jni/jfrJavaCall.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jfrJavaCall.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jfrJavaSupport.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/jni/jfrJavaCall.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_JFR_JNI_JFRJAVACALL_HPP
 26 #define SHARE_JFR_JNI_JFRJAVACALL_HPP
 27 
 28 #include &quot;jni.h&quot;
 29 #include &quot;jfr/utilities/jfrAllocation.hpp&quot;
 30 #include &quot;utilities/exceptions.hpp&quot;

 31 
 32 class JavaCallArguments;
 33 class JavaThread;
 34 class JavaValue;
 35 class Klass;
 36 class Symbol;
 37 
 38 class JfrJavaArguments : public StackObj {
 39   friend class JfrJavaCall;
 40  public:
 41   JfrJavaArguments(JavaValue* result);
 42   JfrJavaArguments(JavaValue* result, const char* klass_name, const char* name, const char* signature, TRAPS);
 43   JfrJavaArguments(JavaValue* result, const Klass* klass, const Symbol* name, const Symbol* signature);
 44 
 45   Klass* klass() const;
 46   void set_klass(const char* klass_name, TRAPS);
 47   void set_klass(const Klass* klass);
 48 
 49   Symbol* name() const;
<span class="line-modified"> 50   void set_name(const char* name, TRAPS);</span>
 51   void set_name(const Symbol* name);
 52 
 53   Symbol* signature() const;
<span class="line-modified"> 54   void set_signature(const char* signature, TRAPS);</span>
 55   void set_signature(const Symbol* signature);
 56 
 57   int array_length() const;
 58   void set_array_length(int length);
 59 
 60   JavaValue* result() const;
 61 
 62   bool has_receiver() const;
 63   void set_receiver(const oop receiver);
 64   void set_receiver(Handle receiver);
 65   oop receiver() const;
 66 
 67   // parameters
 68   void push_oop(const oop obj);
 69   void push_oop(Handle h_obj);
 70   void push_jobject(jobject h);
 71   void push_int(jint i);
 72   void push_double(jdouble d);
 73   void push_long(jlong l);
 74   void push_float(jfloat f);
 75 
 76   int length() const;
 77   const JavaValue&amp; param(int idx) const;
 78 
 79  private:
 80   class Parameters {
 81     friend class JfrJavaArguments;
 82    private:
 83     enum { SIZE = 16};
 84     JavaValue _storage[SIZE];
 85     int _storage_index;
 86     int _java_stack_slots;
 87 
 88     Parameters();
<span class="line-modified"> 89     Parameters(const Parameters&amp;); // no impl</span>
<span class="line-removed"> 90     Parameters&amp; operator=(const Parameters&amp;); // no impl</span>
 91 
 92     void push(const JavaValue&amp; value);
 93     void push_large(const JavaValue&amp; value);
 94 
 95     void push_oop(const oop obj);
 96     void push_oop(Handle h_obj);
 97     void push_jobject(jobject h);
 98     void push_jint(jint i);
 99     void push_jdouble(jdouble d);
100     void push_jlong(jlong l);
101     void push_jfloat(jfloat f);
102 
103     bool has_receiver() const;
104     void set_receiver(const oop receiver);
105     void set_receiver(Handle receiver);
106     oop receiver() const;
107 
108     int length() const;
109     int java_stack_slots() const;
110 
</pre>
</td>
<td>
<hr />
<pre>
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 #ifndef SHARE_JFR_JNI_JFRJAVACALL_HPP
 26 #define SHARE_JFR_JNI_JFRJAVACALL_HPP
 27 
 28 #include &quot;jni.h&quot;
 29 #include &quot;jfr/utilities/jfrAllocation.hpp&quot;
 30 #include &quot;utilities/exceptions.hpp&quot;
<span class="line-added"> 31 #include &quot;utilities/globalDefinitions.hpp&quot;</span>
 32 
 33 class JavaCallArguments;
 34 class JavaThread;
 35 class JavaValue;
 36 class Klass;
 37 class Symbol;
 38 
 39 class JfrJavaArguments : public StackObj {
 40   friend class JfrJavaCall;
 41  public:
 42   JfrJavaArguments(JavaValue* result);
 43   JfrJavaArguments(JavaValue* result, const char* klass_name, const char* name, const char* signature, TRAPS);
 44   JfrJavaArguments(JavaValue* result, const Klass* klass, const Symbol* name, const Symbol* signature);
 45 
 46   Klass* klass() const;
 47   void set_klass(const char* klass_name, TRAPS);
 48   void set_klass(const Klass* klass);
 49 
 50   Symbol* name() const;
<span class="line-modified"> 51   void set_name(const char* name);</span>
 52   void set_name(const Symbol* name);
 53 
 54   Symbol* signature() const;
<span class="line-modified"> 55   void set_signature(const char* signature);</span>
 56   void set_signature(const Symbol* signature);
 57 
 58   int array_length() const;
 59   void set_array_length(int length);
 60 
 61   JavaValue* result() const;
 62 
 63   bool has_receiver() const;
 64   void set_receiver(const oop receiver);
 65   void set_receiver(Handle receiver);
 66   oop receiver() const;
 67 
 68   // parameters
 69   void push_oop(const oop obj);
 70   void push_oop(Handle h_obj);
 71   void push_jobject(jobject h);
 72   void push_int(jint i);
 73   void push_double(jdouble d);
 74   void push_long(jlong l);
 75   void push_float(jfloat f);
 76 
 77   int length() const;
 78   const JavaValue&amp; param(int idx) const;
 79 
 80  private:
 81   class Parameters {
 82     friend class JfrJavaArguments;
 83    private:
 84     enum { SIZE = 16};
 85     JavaValue _storage[SIZE];
 86     int _storage_index;
 87     int _java_stack_slots;
 88 
 89     Parameters();
<span class="line-modified"> 90     NONCOPYABLE(Parameters);</span>

 91 
 92     void push(const JavaValue&amp; value);
 93     void push_large(const JavaValue&amp; value);
 94 
 95     void push_oop(const oop obj);
 96     void push_oop(Handle h_obj);
 97     void push_jobject(jobject h);
 98     void push_jint(jint i);
 99     void push_jdouble(jdouble d);
100     void push_jlong(jlong l);
101     void push_jfloat(jfloat f);
102 
103     bool has_receiver() const;
104     void set_receiver(const oop receiver);
105     void set_receiver(Handle receiver);
106     oop receiver() const;
107 
108     int length() const;
109     int java_stack_slots() const;
110 
</pre>
</td>
</tr>
</table>
<center><a href="jfrJavaCall.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="jfrJavaSupport.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>