<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/jfr/writers/jfrWriterHost.inline.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="jfrStorageAdapter.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../jvmci/compilerRuntime.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jfr/writers/jfrWriterHost.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 112,14 ***</span>
  }
  
  template &lt;typename BE, typename IE, typename WriterPolicyImpl &gt;
  template &lt;typename T&gt;
  inline void WriterHost&lt;BE, IE, WriterPolicyImpl&gt;::be_write(T value) {
<span class="line-modified">!   u1* const pos = ensure_size(sizeof(T));</span>
<span class="line-removed">-   if (pos) {</span>
<span class="line-removed">-     this-&gt;set_current_pos(BE::be_write(&amp;value, 1, pos));</span>
<span class="line-removed">-   }</span>
  }
  
  template &lt;typename BE, typename IE, typename WriterPolicyImpl &gt;
  template &lt;typename T&gt;
  inline void WriterHost&lt;BE, IE, WriterPolicyImpl&gt;::be_write(const T* value, size_t len) {
<span class="line-new-header">--- 112,11 ---</span>
  }
  
  template &lt;typename BE, typename IE, typename WriterPolicyImpl &gt;
  template &lt;typename T&gt;
  inline void WriterHost&lt;BE, IE, WriterPolicyImpl&gt;::be_write(T value) {
<span class="line-modified">!   be_write(&amp;value, 1);</span>
  }
  
  template &lt;typename BE, typename IE, typename WriterPolicyImpl &gt;
  template &lt;typename T&gt;
  inline void WriterHost&lt;BE, IE, WriterPolicyImpl&gt;::be_write(const T* value, size_t len) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 168,11 ***</span>
      // cancelled
      return NULL;
    }
    if (this-&gt;available_size() &lt; requested + size_safety_cushion) {
      if (!this-&gt;accommodate(this-&gt;used_size(), requested + size_safety_cushion)) {
<span class="line-modified">!       this-&gt;cancel();</span>
        return NULL;
      }
    }
    assert(requested + size_safety_cushion &lt;= this-&gt;available_size(), &quot;invariant&quot;);
    return this-&gt;current_pos();
<span class="line-new-header">--- 165,11 ---</span>
      // cancelled
      return NULL;
    }
    if (this-&gt;available_size() &lt; requested + size_safety_cushion) {
      if (!this-&gt;accommodate(this-&gt;used_size(), requested + size_safety_cushion)) {
<span class="line-modified">!       assert(!this-&gt;is_valid(), &quot;invariant&quot;);</span>
        return NULL;
      }
    }
    assert(requested + size_safety_cushion &lt;= this-&gt;available_size(), &quot;invariant&quot;);
    return this-&gt;current_pos();
</pre>
<center><a href="jfrStorageAdapter.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../jvmci/compilerRuntime.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>