<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/sparc/templateTable_sparc.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="stubGenerator_sparc.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_ext_sparc.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/sparc/templateTable_sparc.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
3500       __ delayed()-&gt;subcc(Roffset, wordSize, Roffset);
3501     }
3502     __ ba_short(initialize_header);
3503   }
3504 
3505   // slow case
3506   __ bind(slow_case);
3507   __ get_2_byte_integer_at_bcp(1, G3_scratch, O2, InterpreterMacroAssembler::Unsigned);
3508   __ get_constant_pool(O1);
3509 
3510   call_VM(Otos_i, CAST_FROM_FN_PTR(address, InterpreterRuntime::_new), O1, O2);
3511 
3512   __ ba_short(done);
3513 
3514   // Initialize the header: mark, klass
3515   __ bind(initialize_header);
3516 
3517   if (UseBiasedLocking) {
3518     __ ld_ptr(RinstanceKlass, in_bytes(Klass::prototype_header_offset()), G4_scratch);
3519   } else {
<span class="line-modified">3520     __ set((intptr_t)markOopDesc::prototype(), G4_scratch);</span>
3521   }
3522   __ st_ptr(G4_scratch, RallocatedObject, oopDesc::mark_offset_in_bytes());       // mark
3523   __ store_klass_gap(G0, RallocatedObject);         // klass gap if compressed
3524   __ store_klass(RinstanceKlass, RallocatedObject); // klass (last for cms)
3525 
3526   {
3527     SkipIfEqual skip_if(
3528       _masm, G4_scratch, &amp;DTraceAllocProbes, Assembler::zero);
3529     // Trigger dtrace event
3530     __ push(atos);
3531     __ call_VM_leaf(noreg,
3532        CAST_FROM_FN_PTR(address, SharedRuntime::dtrace_object_alloc), O0);
3533     __ pop(atos);
3534   }
3535 
3536   // continue
3537   __ bind(done);
3538 }
3539 
3540 
</pre>
</td>
<td>
<hr />
<pre>
3500       __ delayed()-&gt;subcc(Roffset, wordSize, Roffset);
3501     }
3502     __ ba_short(initialize_header);
3503   }
3504 
3505   // slow case
3506   __ bind(slow_case);
3507   __ get_2_byte_integer_at_bcp(1, G3_scratch, O2, InterpreterMacroAssembler::Unsigned);
3508   __ get_constant_pool(O1);
3509 
3510   call_VM(Otos_i, CAST_FROM_FN_PTR(address, InterpreterRuntime::_new), O1, O2);
3511 
3512   __ ba_short(done);
3513 
3514   // Initialize the header: mark, klass
3515   __ bind(initialize_header);
3516 
3517   if (UseBiasedLocking) {
3518     __ ld_ptr(RinstanceKlass, in_bytes(Klass::prototype_header_offset()), G4_scratch);
3519   } else {
<span class="line-modified">3520     __ set((intptr_t)markWord::prototype().value(), G4_scratch);</span>
3521   }
3522   __ st_ptr(G4_scratch, RallocatedObject, oopDesc::mark_offset_in_bytes());       // mark
3523   __ store_klass_gap(G0, RallocatedObject);         // klass gap if compressed
3524   __ store_klass(RinstanceKlass, RallocatedObject); // klass (last for cms)
3525 
3526   {
3527     SkipIfEqual skip_if(
3528       _masm, G4_scratch, &amp;DTraceAllocProbes, Assembler::zero);
3529     // Trigger dtrace event
3530     __ push(atos);
3531     __ call_VM_leaf(noreg,
3532        CAST_FROM_FN_PTR(address, SharedRuntime::dtrace_object_alloc), O0);
3533     __ pop(atos);
3534   }
3535 
3536   // continue
3537   __ bind(done);
3538 }
3539 
3540 
</pre>
</td>
</tr>
</table>
<center><a href="stubGenerator_sparc.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_ext_sparc.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>