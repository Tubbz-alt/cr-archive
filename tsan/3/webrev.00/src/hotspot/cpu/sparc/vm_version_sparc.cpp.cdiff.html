<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/cpu/sparc/vm_version_sparc.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="vm_version_ext_sparc.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_sparc.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/sparc/vm_version_sparc.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 26,14 ***</span>
  #include &quot;jvm.h&quot;
  #include &quot;asm/macroAssembler.inline.hpp&quot;
  #include &quot;logging/log.hpp&quot;
  #include &quot;logging/logStream.hpp&quot;
  #include &quot;memory/resourceArea.hpp&quot;
  #include &quot;runtime/java.hpp&quot;
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/stubCodeGenerator.hpp&quot;
<span class="line-modified">! #include &quot;vm_version_sparc.hpp&quot;</span>
  
  #include &lt;sys/mman.h&gt;
  
  uint VM_Version::_L2_data_cache_line_size = 0;
  
<span class="line-new-header">--- 26,15 ---</span>
  #include &quot;jvm.h&quot;
  #include &quot;asm/macroAssembler.inline.hpp&quot;
  #include &quot;logging/log.hpp&quot;
  #include &quot;logging/logStream.hpp&quot;
  #include &quot;memory/resourceArea.hpp&quot;
<span class="line-added">+ #include &quot;oops/compressedOops.hpp&quot;</span>
  #include &quot;runtime/java.hpp&quot;
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/stubCodeGenerator.hpp&quot;
<span class="line-modified">! #include &quot;runtime/vm_version.hpp&quot;</span>
  
  #include &lt;sys/mman.h&gt;
  
  uint VM_Version::_L2_data_cache_line_size = 0;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 82,12 ***</span>
      FLAG_SET_DEFAULT(OptoLoopAlignment, VM_Version::insn_fetch_alignment);
    }
  
    // 32-bit oops don&#39;t make sense for the 64-bit VM on SPARC since the 32-bit
    // VM has the same registers and smaller objects.
<span class="line-modified">!   Universe::set_narrow_oop_shift(LogMinObjAlignmentInBytes);</span>
<span class="line-modified">!   Universe::set_narrow_klass_shift(LogKlassAlignmentInBytes);</span>
  
  #ifdef COMPILER2
    if (has_fast_ind_br() &amp;&amp; FLAG_IS_DEFAULT(UseJumpTables)) {
      // Indirect and direct branches are cost equivalent.
      FLAG_SET_DEFAULT(UseJumpTables, true);
<span class="line-new-header">--- 83,12 ---</span>
      FLAG_SET_DEFAULT(OptoLoopAlignment, VM_Version::insn_fetch_alignment);
    }
  
    // 32-bit oops don&#39;t make sense for the 64-bit VM on SPARC since the 32-bit
    // VM has the same registers and smaller objects.
<span class="line-modified">!   CompressedOops::set_shift(LogMinObjAlignmentInBytes);</span>
<span class="line-modified">!   CompressedKlassPointers::set_shift(LogKlassAlignmentInBytes);</span>
  
  #ifdef COMPILER2
    if (has_fast_ind_br() &amp;&amp; FLAG_IS_DEFAULT(UseJumpTables)) {
      // Indirect and direct branches are cost equivalent.
      FLAG_SET_DEFAULT(UseJumpTables, true);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 136,16 ***</span>
      // more conservative increase when running on more recent hardware that will
      // benefit from just a bit more aggressive prefetching.
      if (FLAG_IS_DEFAULT(AllocatePrefetchLines)) {
        const int ap_lns = AllocatePrefetchLines;
        const int ap_inc = cache_line_size &lt; 64 ? ap_lns : (ap_lns + 1) / 2;
<span class="line-modified">!       FLAG_SET_ERGO(intx, AllocatePrefetchLines, ap_lns + ap_inc);</span>
      }
      if (FLAG_IS_DEFAULT(AllocateInstancePrefetchLines)) {
        const int ip_lns = AllocateInstancePrefetchLines;
        const int ip_inc = cache_line_size &lt; 64 ? ip_lns : (ip_lns + 1) / 2;
<span class="line-modified">!       FLAG_SET_ERGO(intx, AllocateInstancePrefetchLines, ip_lns + ip_inc);</span>
      }
    }
  #endif /* COMPILER2 */
  
    // Use hardware population count instruction if available.
<span class="line-new-header">--- 137,16 ---</span>
      // more conservative increase when running on more recent hardware that will
      // benefit from just a bit more aggressive prefetching.
      if (FLAG_IS_DEFAULT(AllocatePrefetchLines)) {
        const int ap_lns = AllocatePrefetchLines;
        const int ap_inc = cache_line_size &lt; 64 ? ap_lns : (ap_lns + 1) / 2;
<span class="line-modified">!       FLAG_SET_ERGO(AllocatePrefetchLines, ap_lns + ap_inc);</span>
      }
      if (FLAG_IS_DEFAULT(AllocateInstancePrefetchLines)) {
        const int ip_lns = AllocateInstancePrefetchLines;
        const int ip_inc = cache_line_size &lt; 64 ? ip_lns : (ip_lns + 1) / 2;
<span class="line-modified">!       FLAG_SET_ERGO(AllocateInstancePrefetchLines, ip_lns + ip_inc);</span>
      }
    }
  #endif /* COMPILER2 */
  
    // Use hardware population count instruction if available.
</pre>
<center><a href="vm_version_ext_sparc.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_sparc.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>