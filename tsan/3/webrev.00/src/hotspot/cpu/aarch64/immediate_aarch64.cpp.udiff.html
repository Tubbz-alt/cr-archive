<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/cpu/aarch64/immediate_aarch64.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="icache_aarch64.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="interp_masm_aarch64.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/aarch64/immediate_aarch64.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -21,11 +21,10 @@</span>
   * questions.
   *
   */
  
  #include &lt;stdlib.h&gt;
<span class="udiff-line-removed">- #include &quot;decode_aarch64.hpp&quot;</span>
  #include &quot;immediate_aarch64.hpp&quot;
  
  // there are at most 2^13 possible logical immediate encodings
  // however, some combinations of immr and imms are invalid
  static const unsigned  LI_TABLE_SIZE = (1 &lt;&lt; 13);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -67,16 +66,61 @@</span>
  static inline u_int64_t ones(int N)
  {
    return (N == 64 ? (u_int64_t)-1UL : ((1UL &lt;&lt; N) - 1));
  }
  
<span class="udiff-line-added">+ /*</span>
<span class="udiff-line-added">+  * bit twiddling helpers for instruction decode</span>
<span class="udiff-line-added">+  */</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // 32 bit mask with bits [hi,...,lo] set</span>
<span class="udiff-line-added">+ static inline u_int32_t mask32(int hi = 31, int lo = 0)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   int nbits = (hi + 1) - lo;</span>
<span class="udiff-line-added">+   return ((1 &lt;&lt; nbits) - 1) &lt;&lt; lo;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ static inline u_int64_t mask64(int hi = 63, int lo = 0)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   int nbits = (hi + 1) - lo;</span>
<span class="udiff-line-added">+   return ((1L &lt;&lt; nbits) - 1) &lt;&lt; lo;</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // pick bits [hi,...,lo] from val</span>
<span class="udiff-line-added">+ static inline u_int32_t pick32(u_int32_t val, int hi = 31, int lo = 0)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   return (val &amp; mask32(hi, lo));</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // pick bits [hi,...,lo] from val</span>
<span class="udiff-line-added">+ static inline u_int64_t pick64(u_int64_t val, int hi = 31, int lo = 0)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   return (val &amp; mask64(hi, lo));</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // mask [hi,lo] and shift down to start at bit 0</span>
<span class="udiff-line-added">+ static inline u_int32_t pickbits32(u_int32_t val, int hi = 31, int lo = 0)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   return (pick32(val, hi, lo) &gt;&gt; lo);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ // mask [hi,lo] and shift down to start at bit 0</span>
<span class="udiff-line-added">+ static inline u_int64_t pickbits64(u_int64_t val, int hi = 63, int lo = 0)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   return (pick64(val, hi, lo) &gt;&gt; lo);</span>
<span class="udiff-line-added">+ }</span>
<span class="udiff-line-added">+ </span>
  // result&lt;0&gt; to val&lt;N&gt;
  static inline u_int64_t pickbit(u_int64_t val, int N)
  {
    return pickbits64(val, N, N);
  }
  
<span class="udiff-line-added">+ static inline u_int32_t uimm(u_int32_t val, int hi, int lo)</span>
<span class="udiff-line-added">+ {</span>
<span class="udiff-line-added">+   return pickbits32(val, hi, lo);</span>
<span class="udiff-line-added">+ }</span>
  
  // SPEC bits(M*N) Replicate(bits(M) x, integer N);
  // this is just an educated guess
  
  u_int64_t replicate(u_int64_t bits, int nbits, int count)
</pre>
<center><a href="icache_aarch64.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="interp_masm_aarch64.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>