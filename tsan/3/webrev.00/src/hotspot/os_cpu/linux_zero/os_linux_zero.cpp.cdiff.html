<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/os_cpu/linux_zero/os_linux_zero.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="orderAccess_linux_zero.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_linux_zero.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os_cpu/linux_zero/os_linux_zero.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * Copyright 2007, 2008, 2009, 2010 Red Hat, Inc.
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * Copyright 2007, 2008, 2009, 2010 Red Hat, Inc.
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
</pre>
<hr />
<pre>
<span class="line-old-header">*** 205,11 ***</span>
      }
  
      /*if (thread-&gt;thread_state() == _thread_in_Java) {
        ShouldNotCallThis();
      }
<span class="line-modified">!     else*/ if (thread-&gt;thread_state() == _thread_in_vm &amp;&amp;</span>
                 sig == SIGBUS &amp;&amp; thread-&gt;doing_unsafe_access()) {
        ShouldNotCallThis();
      }
  
      // jni_fast_Get&lt;Primitive&gt;Field can trap at certain pc&#39;s if a GC
<span class="line-new-header">--- 205,12 ---</span>
      }
  
      /*if (thread-&gt;thread_state() == _thread_in_Java) {
        ShouldNotCallThis();
      }
<span class="line-modified">!     else*/ if ((thread-&gt;thread_state() == _thread_in_vm ||</span>
<span class="line-added">+                thread-&gt;thread_state() == _thread_in_native) &amp;&amp;</span>
                 sig == SIGBUS &amp;&amp; thread-&gt;doing_unsafe_access()) {
        ShouldNotCallThis();
      }
  
      // jni_fast_Get&lt;Primitive&gt;Field can trap at certain pc&#39;s if a GC
</pre>
<hr />
<pre>
<span class="line-old-header">*** 407,69 ***</span>
    int SpinPause() {
        return -1; // silence compile warnings
    }
  
  
<span class="line-modified">!   void _Copy_conjoint_jshorts_atomic(jshort* from, jshort* to, size_t count) {</span>
      if (from &gt; to) {
<span class="line-modified">!       jshort *end = from + count;</span>
        while (from &lt; end)
          *(to++) = *(from++);
      }
      else if (from &lt; to) {
<span class="line-modified">!       jshort *end = from;</span>
        from += count - 1;
        to   += count - 1;
        while (from &gt;= end)
          *(to--) = *(from--);
      }
    }
<span class="line-modified">!   void _Copy_conjoint_jints_atomic(jint* from, jint* to, size_t count) {</span>
      if (from &gt; to) {
<span class="line-modified">!       jint *end = from + count;</span>
        while (from &lt; end)
          *(to++) = *(from++);
      }
      else if (from &lt; to) {
<span class="line-modified">!       jint *end = from;</span>
        from += count - 1;
        to   += count - 1;
        while (from &gt;= end)
          *(to--) = *(from--);
      }
    }
<span class="line-modified">!   void _Copy_conjoint_jlongs_atomic(jlong* from, jlong* to, size_t count) {</span>
      if (from &gt; to) {
<span class="line-modified">!       jlong *end = from + count;</span>
        while (from &lt; end)
          os::atomic_copy64(from++, to++);
      }
      else if (from &lt; to) {
<span class="line-modified">!       jlong *end = from;</span>
        from += count - 1;
        to   += count - 1;
        while (from &gt;= end)
          os::atomic_copy64(from--, to--);
      }
    }
  
<span class="line-modified">!   void _Copy_arrayof_conjoint_bytes(HeapWord* from,</span>
                                      HeapWord* to,
                                      size_t    count) {
      memmove(to, from, count);
    }
<span class="line-modified">!   void _Copy_arrayof_conjoint_jshorts(HeapWord* from,</span>
                                        HeapWord* to,
                                        size_t    count) {
      memmove(to, from, count * 2);
    }
<span class="line-modified">!   void _Copy_arrayof_conjoint_jints(HeapWord* from,</span>
                                      HeapWord* to,
                                      size_t    count) {
      memmove(to, from, count * 4);
    }
<span class="line-modified">!   void _Copy_arrayof_conjoint_jlongs(HeapWord* from,</span>
                                       HeapWord* to,
                                       size_t    count) {
      memmove(to, from, count * 8);
    }
  };
<span class="line-new-header">--- 408,69 ---</span>
    int SpinPause() {
        return -1; // silence compile warnings
    }
  
  
<span class="line-modified">!   void _Copy_conjoint_jshorts_atomic(const jshort* from, jshort* to, size_t count) {</span>
      if (from &gt; to) {
<span class="line-modified">!       const jshort *end = from + count;</span>
        while (from &lt; end)
          *(to++) = *(from++);
      }
      else if (from &lt; to) {
<span class="line-modified">!       const jshort *end = from;</span>
        from += count - 1;
        to   += count - 1;
        while (from &gt;= end)
          *(to--) = *(from--);
      }
    }
<span class="line-modified">!   void _Copy_conjoint_jints_atomic(const jint* from, jint* to, size_t count) {</span>
      if (from &gt; to) {
<span class="line-modified">!       const jint *end = from + count;</span>
        while (from &lt; end)
          *(to++) = *(from++);
      }
      else if (from &lt; to) {
<span class="line-modified">!       const jint *end = from;</span>
        from += count - 1;
        to   += count - 1;
        while (from &gt;= end)
          *(to--) = *(from--);
      }
    }
<span class="line-modified">!   void _Copy_conjoint_jlongs_atomic(const jlong* from, jlong* to, size_t count) {</span>
      if (from &gt; to) {
<span class="line-modified">!       const jlong *end = from + count;</span>
        while (from &lt; end)
          os::atomic_copy64(from++, to++);
      }
      else if (from &lt; to) {
<span class="line-modified">!       const jlong *end = from;</span>
        from += count - 1;
        to   += count - 1;
        while (from &gt;= end)
          os::atomic_copy64(from--, to--);
      }
    }
  
<span class="line-modified">!   void _Copy_arrayof_conjoint_bytes(const HeapWord* from,</span>
                                      HeapWord* to,
                                      size_t    count) {
      memmove(to, from, count);
    }
<span class="line-modified">!   void _Copy_arrayof_conjoint_jshorts(const HeapWord* from,</span>
                                        HeapWord* to,
                                        size_t    count) {
      memmove(to, from, count * 2);
    }
<span class="line-modified">!   void _Copy_arrayof_conjoint_jints(const HeapWord* from,</span>
                                      HeapWord* to,
                                      size_t    count) {
      memmove(to, from, count * 4);
    }
<span class="line-modified">!   void _Copy_arrayof_conjoint_jlongs(const HeapWord* from,</span>
                                       HeapWord* to,
                                       size_t    count) {
      memmove(to, from, count * 8);
    }
  };
</pre>
<center><a href="orderAccess_linux_zero.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_linux_zero.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>