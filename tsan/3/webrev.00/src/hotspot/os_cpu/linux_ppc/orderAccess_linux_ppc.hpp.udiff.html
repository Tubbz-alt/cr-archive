<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/os_cpu/linux_ppc/orderAccess_linux_ppc.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="atomic_linux_ppc.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="os_linux_ppc.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os_cpu/linux_ppc/orderAccess_linux_ppc.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -66,32 +66,23 @@</span>
  
  #define inlasm_sync()     __asm__ __volatile__ (&quot;sync&quot;   : : : &quot;memory&quot;);
  #define inlasm_lwsync()   __asm__ __volatile__ (&quot;lwsync&quot; : : : &quot;memory&quot;);
  #define inlasm_eieio()    __asm__ __volatile__ (&quot;eieio&quot;  : : : &quot;memory&quot;);
  #define inlasm_isync()    __asm__ __volatile__ (&quot;isync&quot;  : : : &quot;memory&quot;);
<span class="udiff-line-removed">- // Use twi-isync for load_acquire (faster than lwsync).</span>
<span class="udiff-line-removed">- #define inlasm_acquire_reg(X) __asm__ __volatile__ (&quot;twi 0,%0,0\n isync\n&quot; : : &quot;r&quot; (X) : &quot;memory&quot;);</span>
  
  inline void   OrderAccess::loadload()   { inlasm_lwsync(); }
  inline void   OrderAccess::storestore() { inlasm_lwsync(); }
  inline void   OrderAccess::loadstore()  { inlasm_lwsync(); }
  inline void   OrderAccess::storeload()  { inlasm_sync();   }
  
  inline void   OrderAccess::acquire()    { inlasm_lwsync(); }
  inline void   OrderAccess::release()    { inlasm_lwsync(); }
  inline void   OrderAccess::fence()      { inlasm_sync();   }
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-removed">- template&lt;size_t byte_size&gt;</span>
<span class="udiff-line-removed">- struct OrderAccess::PlatformOrderedLoad&lt;byte_size, X_ACQUIRE&gt;</span>
<span class="udiff-line-removed">- {</span>
<span class="udiff-line-removed">-   template &lt;typename T&gt;</span>
<span class="udiff-line-removed">-   T operator()(const volatile T* p) const { T t = Atomic::load(p); inlasm_acquire_reg(t); return t; }</span>
<span class="udiff-line-removed">- };</span>
<span class="udiff-line-modified-added">+ inline void   OrderAccess::cross_modify_fence()</span>
<span class="udiff-line-modified-added">+                                         { inlasm_isync();  }</span>
  
  #undef inlasm_sync
  #undef inlasm_lwsync
  #undef inlasm_eieio
  #undef inlasm_isync
<span class="udiff-line-removed">- #undef inlasm_acquire_reg</span>
  
  #endif // OS_CPU_LINUX_PPC_ORDERACCESS_LINUX_PPC_HPP
</pre>
<center><a href="atomic_linux_ppc.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="os_linux_ppc.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>