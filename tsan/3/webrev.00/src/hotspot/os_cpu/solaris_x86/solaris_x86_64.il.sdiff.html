<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/os_cpu/solaris_x86/solaris_x86_64.il</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="os_solaris_x86.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_solaris_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os_cpu/solaris_x86/solaris_x86_64.il</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 32 
 33   // Get current sp
 34       .inline _get_current_sp,0
 35       .volatile
 36       movq     %rsp, %rax
 37       .end
 38 
 39   // Get current fp
 40       .inline _get_current_fp,0
 41       .volatile
 42       movq     %rbp, %rax
 43       .end
 44 
 45   // Support for os::rdtsc()
 46       .inline _raw_rdtsc,0
 47       rdtsc
 48       salq     $32, %rdx
 49       orq      %rdx, %rax
 50       .end
 51 
<span class="line-modified"> 52   // Support for jint Atomic::add(jint add_value, volatile jint* dest)</span>

 53       .inline _Atomic_add,2
 54       movl     %edi, %eax      // save add_value for return
 55       lock
 56       xaddl    %edi, (%rsi)
 57       addl     %edi, %eax
 58       .end
 59 
<span class="line-modified"> 60   // Support for jlong Atomic::add(jlong add_value, volatile jlong* dest)</span>

 61       .inline _Atomic_add_long,2
 62       movq     %rdi, %rax      // save add_value for return
 63       lock
 64       xaddq    %rdi, (%rsi)
 65       addq     %rdi, %rax
 66       .end
 67 
<span class="line-modified"> 68   // Support for jint Atomic::xchg(jint exchange_value, volatile jint* dest).</span>

 69       .inline _Atomic_xchg,2
 70       xchgl    (%rsi), %edi
 71       movl     %edi, %eax
 72       .end
 73 
<span class="line-modified"> 74   // Support for jlong Atomic::xchg(jlong exchange_value, volatile jlong* dest).</span>

 75       .inline _Atomic_xchg_long,2
 76       xchgq    (%rsi), %rdi
 77       movq     %rdi, %rax
 78       .end
 79 
<span class="line-modified"> 80   // Support for jbyte Atomic::cmpxchg(jbyte exchange_value,</span>
<span class="line-modified"> 81   //                                   volatile jbyte *dest,</span>
<span class="line-modified"> 82   //                                   jbyte compare_value)</span>
 83       .inline _Atomic_cmpxchg_byte,3
 84       movb     %dl, %al      // compare_value
 85       lock
 86       cmpxchgb %dil, (%rsi)
 87       .end
 88 
<span class="line-modified"> 89   // Support for jint Atomic::cmpxchg(jint exchange_value,</span>
<span class="line-modified"> 90   //                                  volatile jint *dest,</span>
<span class="line-modified"> 91   //                                  jint compare_value)</span>
 92       .inline _Atomic_cmpxchg,3
 93       movl     %edx, %eax      // compare_value
 94       lock
 95       cmpxchgl %edi, (%rsi)
 96       .end
 97 
<span class="line-modified"> 98   // Support for jlong Atomic::cmpxchg(jlong exchange_value,</span>
<span class="line-modified"> 99   //                                   volatile jlong* dest,</span>
<span class="line-modified">100   //                                   jlong compare_value)</span>
101       .inline _Atomic_cmpxchg_long,3
102       movq     %rdx, %rax      // compare_value
103       lock
104       cmpxchgq %rdi, (%rsi)
105       .end
106 
107   // Support for u2 Bytes::swap_u2(u2 x)
108       .inline _raw_swap_u2,1
109       movw     %di, %ax
110       rorw     $8, %ax
111       .end
112 
113   // Support for u4 Bytes::swap_u4(u4 x)
114       .inline _raw_swap_u4,1
115       movl     %edi, %eax
116       bswapl   %eax
117       .end
118 
119   // Support for u8 Bytes::swap_u8(u8 x)
120       .inline _raw_swap_u8,1
</pre>
</td>
<td>
<hr />
<pre>
 32 
 33   // Get current sp
 34       .inline _get_current_sp,0
 35       .volatile
 36       movq     %rsp, %rax
 37       .end
 38 
 39   // Get current fp
 40       .inline _get_current_fp,0
 41       .volatile
 42       movq     %rbp, %rax
 43       .end
 44 
 45   // Support for os::rdtsc()
 46       .inline _raw_rdtsc,0
 47       rdtsc
 48       salq     $32, %rdx
 49       orq      %rdx, %rax
 50       .end
 51 
<span class="line-modified"> 52   // Implementation of jint _Atomic_add(jint add_value, volatile jint* dest)</span>
<span class="line-added"> 53   // used by Atomic::add(volatile jint* dest, jint add_value)</span>
 54       .inline _Atomic_add,2
 55       movl     %edi, %eax      // save add_value for return
 56       lock
 57       xaddl    %edi, (%rsi)
 58       addl     %edi, %eax
 59       .end
 60 
<span class="line-modified"> 61   // Implementation of jlong _Atomic_add(jlong add_value, volatile jlong* dest)</span>
<span class="line-added"> 62   // used by Atomic::add(volatile jlong* dest, jint add_value)</span>
 63       .inline _Atomic_add_long,2
 64       movq     %rdi, %rax      // save add_value for return
 65       lock
 66       xaddq    %rdi, (%rsi)
 67       addq     %rdi, %rax
 68       .end
 69 
<span class="line-modified"> 70   // Implementation of jint _Atomic_xchg(jint exchange_value, volatile jint* dest)</span>
<span class="line-added"> 71   // used by Atomic::xchg(volatile jint* dest, jint exchange_value)</span>
 72       .inline _Atomic_xchg,2
 73       xchgl    (%rsi), %edi
 74       movl     %edi, %eax
 75       .end
 76 
<span class="line-modified"> 77   // Implementation of jlong _Atomic_xchg(jlong exchange_value, volatile jlong* dest)</span>
<span class="line-added"> 78   // used by Atomic::xchg(volatile jlong* dest, jlong exchange_value)</span>
 79       .inline _Atomic_xchg_long,2
 80       xchgq    (%rsi), %rdi
 81       movq     %rdi, %rax
 82       .end
 83 
<span class="line-modified"> 84   // Support for jbyte Atomic::cmpxchg(volatile jbyte *dest,</span>
<span class="line-modified"> 85   //                                   jbyte compare_value,</span>
<span class="line-modified"> 86   //                                   jbyte exchange_value)</span>
 87       .inline _Atomic_cmpxchg_byte,3
 88       movb     %dl, %al      // compare_value
 89       lock
 90       cmpxchgb %dil, (%rsi)
 91       .end
 92 
<span class="line-modified"> 93   // Support for jint Atomic::cmpxchg(volatile jint *dest,</span>
<span class="line-modified"> 94   //                                  int compare_value,</span>
<span class="line-modified"> 95   //                                  jint exchange_value)</span>
 96       .inline _Atomic_cmpxchg,3
 97       movl     %edx, %eax      // compare_value
 98       lock
 99       cmpxchgl %edi, (%rsi)
100       .end
101 
<span class="line-modified">102   // Support for jlong Atomic::cmpxchg(volatile jlong* dest,</span>
<span class="line-modified">103   //                                   jlong compare_value,</span>
<span class="line-modified">104   //                                   jlong exchange_value)</span>
105       .inline _Atomic_cmpxchg_long,3
106       movq     %rdx, %rax      // compare_value
107       lock
108       cmpxchgq %rdi, (%rsi)
109       .end
110 
111   // Support for u2 Bytes::swap_u2(u2 x)
112       .inline _raw_swap_u2,1
113       movw     %di, %ax
114       rorw     $8, %ax
115       .end
116 
117   // Support for u4 Bytes::swap_u4(u4 x)
118       .inline _raw_swap_u4,1
119       movl     %edi, %eax
120       bswapl   %eax
121       .end
122 
123   // Support for u8 Bytes::swap_u8(u8 x)
124       .inline _raw_swap_u8,1
</pre>
</td>
</tr>
</table>
<center><a href="os_solaris_x86.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vm_version_solaris_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>