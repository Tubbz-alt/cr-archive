<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/os/bsd/os_perf_bsd.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="os_bsd.inline.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="perfMemory_bsd.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os/bsd/os_perf_bsd.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2012, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 24,11 ***</span>
  #include &quot;precompiled.hpp&quot;
  #include &quot;memory/allocation.inline.hpp&quot;
  #include &quot;memory/resourceArea.hpp&quot;
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/os_perf.hpp&quot;
<span class="line-modified">! #include &quot;vm_version_ext_x86.hpp&quot;</span>
  
  #ifdef __APPLE__
    #import &lt;libproc.h&gt;
    #include &lt;sys/time.h&gt;
    #include &lt;sys/sysctl.h&gt;
<span class="line-new-header">--- 24,12 ---</span>
  #include &quot;precompiled.hpp&quot;
  #include &quot;memory/allocation.inline.hpp&quot;
  #include &quot;memory/resourceArea.hpp&quot;
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/os_perf.hpp&quot;
<span class="line-modified">! #include &quot;utilities/globalDefinitions.hpp&quot;</span>
<span class="line-added">+ #include CPU_HEADER(vm_version_ext)</span>
  
  #ifdef __APPLE__
    #import &lt;libproc.h&gt;
    #include &lt;sys/time.h&gt;
    #include &lt;sys/sysctl.h&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 70,12 ***</span>
    int cpu_load(int which_logical_cpu, double* cpu_load);
    int context_switch_rate(double* rate);
    int cpu_load_total_process(double* cpu_load);
    int cpu_loads_process(double* pjvmUserLoad, double* pjvmKernelLoad, double* psystemTotalLoad);
  
<span class="line-modified">!   CPUPerformance(const CPUPerformance&amp; rhs); // no impl</span>
<span class="line-modified">!   CPUPerformance&amp; operator=(const CPUPerformance&amp; rhs); // no impl</span>
   public:
    CPUPerformance();
    bool initialize();
    ~CPUPerformance();
  };
<span class="line-new-header">--- 71,12 ---</span>
    int cpu_load(int which_logical_cpu, double* cpu_load);
    int context_switch_rate(double* rate);
    int cpu_load_total_process(double* cpu_load);
    int cpu_loads_process(double* pjvmUserLoad, double* pjvmKernelLoad, double* psystemTotalLoad);
  
<span class="line-modified">!   NONCOPYABLE(CPUPerformance);</span>
<span class="line-modified">! </span>
   public:
    CPUPerformance();
    bool initialize();
    ~CPUPerformance();
  };
</pre>
<hr />
<pre>
<span class="line-old-header">*** 232,11 ***</span>
    _impl = NULL;
  }
  
  bool CPUPerformanceInterface::initialize() {
    _impl = new CPUPerformanceInterface::CPUPerformance();
<span class="line-modified">!   return _impl != NULL &amp;&amp; _impl-&gt;initialize();</span>
  }
  
  CPUPerformanceInterface::~CPUPerformanceInterface() {
    if (_impl != NULL) {
      delete _impl;
<span class="line-new-header">--- 233,11 ---</span>
    _impl = NULL;
  }
  
  bool CPUPerformanceInterface::initialize() {
    _impl = new CPUPerformanceInterface::CPUPerformance();
<span class="line-modified">!   return _impl-&gt;initialize();</span>
  }
  
  CPUPerformanceInterface::~CPUPerformanceInterface() {
    if (_impl != NULL) {
      delete _impl;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 262,12 ***</span>
  class SystemProcessInterface::SystemProcesses : public CHeapObj&lt;mtInternal&gt; {
    friend class SystemProcessInterface;
   private:
    SystemProcesses();
    bool initialize();
<span class="line-modified">!   SystemProcesses(const SystemProcesses&amp; rhs); // no impl</span>
<span class="line-removed">-   SystemProcesses&amp; operator=(const SystemProcesses&amp; rhs); // no impl</span>
    ~SystemProcesses();
  
    //information about system processes
    int system_processes(SystemProcess** system_processes, int* no_of_sys_processes) const;
  };
<span class="line-new-header">--- 263,11 ---</span>
  class SystemProcessInterface::SystemProcesses : public CHeapObj&lt;mtInternal&gt; {
    friend class SystemProcessInterface;
   private:
    SystemProcesses();
    bool initialize();
<span class="line-modified">!   NONCOPYABLE(SystemProcesses);</span>
    ~SystemProcesses();
  
    //information about system processes
    int system_processes(SystemProcess** system_processes, int* no_of_sys_processes) const;
  };
</pre>
<hr />
<pre>
<span class="line-old-header">*** 353,11 ***</span>
    _impl = NULL;
  }
  
  bool SystemProcessInterface::initialize() {
    _impl = new SystemProcessInterface::SystemProcesses();
<span class="line-modified">!   return _impl != NULL &amp;&amp; _impl-&gt;initialize();</span>
  }
  
  SystemProcessInterface::~SystemProcessInterface() {
    if (_impl != NULL) {
      delete _impl;
<span class="line-new-header">--- 353,11 ---</span>
    _impl = NULL;
  }
  
  bool SystemProcessInterface::initialize() {
    _impl = new SystemProcessInterface::SystemProcesses();
<span class="line-modified">!   return _impl-&gt;initialize();</span>
  }
  
  SystemProcessInterface::~SystemProcessInterface() {
    if (_impl != NULL) {
      delete _impl;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 368,20 ***</span>
    _cpu_info = NULL;
  }
  
  bool CPUInformationInterface::initialize() {
    _cpu_info = new CPUInformation();
<span class="line-removed">- </span>
<span class="line-removed">-   if (NULL == _cpu_info) {</span>
<span class="line-removed">-     return false;</span>
<span class="line-removed">-   }</span>
    _cpu_info-&gt;set_number_of_hardware_threads(VM_Version_Ext::number_of_threads());
    _cpu_info-&gt;set_number_of_cores(VM_Version_Ext::number_of_cores());
    _cpu_info-&gt;set_number_of_sockets(VM_Version_Ext::number_of_sockets());
    _cpu_info-&gt;set_cpu_name(VM_Version_Ext::cpu_name());
    _cpu_info-&gt;set_cpu_description(VM_Version_Ext::cpu_description());
<span class="line-removed">- </span>
    return true;
  }
  
  CPUInformationInterface::~CPUInformationInterface() {
    if (_cpu_info != NULL) {
<span class="line-new-header">--- 368,15 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 410,12 ***</span>
  
  class NetworkPerformanceInterface::NetworkPerformance : public CHeapObj&lt;mtInternal&gt; {
    friend class NetworkPerformanceInterface;
   private:
    NetworkPerformance();
<span class="line-modified">!   NetworkPerformance(const NetworkPerformance&amp; rhs); // no impl</span>
<span class="line-removed">-   NetworkPerformance&amp; operator=(const NetworkPerformance&amp; rhs); // no impl</span>
    bool initialize();
    ~NetworkPerformance();
    int network_utilization(NetworkInterface** network_interfaces) const;
  };
  
<span class="line-new-header">--- 405,11 ---</span>
  
  class NetworkPerformanceInterface::NetworkPerformance : public CHeapObj&lt;mtInternal&gt; {
    friend class NetworkPerformanceInterface;
   private:
    NetworkPerformance();
<span class="line-modified">!   NONCOPYABLE(NetworkPerformance);</span>
    bool initialize();
    ~NetworkPerformance();
    int network_utilization(NetworkInterface** network_interfaces) const;
  };
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 481,11 ***</span>
    }
  }
  
  bool NetworkPerformanceInterface::initialize() {
    _impl = new NetworkPerformanceInterface::NetworkPerformance();
<span class="line-modified">!   return _impl != NULL &amp;&amp; _impl-&gt;initialize();</span>
  }
  
  int NetworkPerformanceInterface::network_utilization(NetworkInterface** network_interfaces) const {
    return _impl-&gt;network_utilization(network_interfaces);
  }
<span class="line-new-header">--- 475,11 ---</span>
    }
  }
  
  bool NetworkPerformanceInterface::initialize() {
    _impl = new NetworkPerformanceInterface::NetworkPerformance();
<span class="line-modified">!   return _impl-&gt;initialize();</span>
  }
  
  int NetworkPerformanceInterface::network_utilization(NetworkInterface** network_interfaces) const {
    return _impl-&gt;network_utilization(network_interfaces);
  }
</pre>
<center><a href="os_bsd.inline.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="perfMemory_bsd.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>