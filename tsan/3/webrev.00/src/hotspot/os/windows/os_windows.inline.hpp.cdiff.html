<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/os/windows/os_windows.inline.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="os_windows.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="perfMemory_windows.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os/windows/os_windows.inline.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 28,17 ***</span>
  #include &quot;runtime/os.hpp&quot;
  #include &quot;runtime/thread.hpp&quot;
  
  inline const char* os::dll_file_extension()            { return &quot;.dll&quot;; }
  
<span class="line-removed">- inline const int os::default_file_open_flags() { return O_BINARY | O_NOINHERIT;}</span>
<span class="line-removed">- </span>
<span class="line-removed">- // File names are case-insensitive on windows only</span>
<span class="line-removed">- inline int os::file_name_strncmp(const char* s, const char* t, size_t num) {</span>
<span class="line-removed">-   return _strnicmp(s, t, num);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  inline void  os::dll_unload(void *lib) {
    ::FreeLibrary((HMODULE)lib);
  }
  
  inline void* os::dll_lookup(void *lib, const char *name) {
<span class="line-new-header">--- 28,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 84,30 ***</span>
  
  inline void os::exit(int num) {
    win32::exit_process_or_thread(win32::EPT_PROCESS, num);
  }
  
<span class="line-modified">! // Platform Monitor implementation</span>
  
  inline os::PlatformMonitor::PlatformMonitor() {
    InitializeConditionVariable(&amp;_cond);
<span class="line-removed">-   InitializeCriticalSection(&amp;_mutex);</span>
  }
  
  inline os::PlatformMonitor::~PlatformMonitor() {
<span class="line-modified">!   DeleteCriticalSection(&amp;_mutex);</span>
  }
  
<span class="line-modified">! inline void os::PlatformMonitor::lock() {</span>
    EnterCriticalSection(&amp;_mutex);
  }
  
<span class="line-modified">! inline void os::PlatformMonitor::unlock() {</span>
    LeaveCriticalSection(&amp;_mutex);
  }
  
<span class="line-modified">! inline bool os::PlatformMonitor::try_lock() {</span>
    return TryEnterCriticalSection(&amp;_mutex);
  }
  
  inline void os::PlatformMonitor::notify() {
    WakeConditionVariable(&amp;_cond);
<span class="line-new-header">--- 77,37 ---</span>
  
  inline void os::exit(int num) {
    win32::exit_process_or_thread(win32::EPT_PROCESS, num);
  }
  
<span class="line-modified">! // Platform Mutex/Monitor implementation</span>
<span class="line-added">+ </span>
<span class="line-added">+ inline os::PlatformMutex::PlatformMutex() {</span>
<span class="line-added">+   InitializeCriticalSection(&amp;_mutex);</span>
<span class="line-added">+ }</span>
<span class="line-added">+ </span>
<span class="line-added">+ inline os::PlatformMutex::~PlatformMutex() {</span>
<span class="line-added">+   DeleteCriticalSection(&amp;_mutex);</span>
<span class="line-added">+ }</span>
  
  inline os::PlatformMonitor::PlatformMonitor() {
    InitializeConditionVariable(&amp;_cond);
  }
  
  inline os::PlatformMonitor::~PlatformMonitor() {
<span class="line-modified">!   // There is no DeleteConditionVariable API</span>
  }
  
<span class="line-modified">! inline void os::PlatformMutex::lock() {</span>
    EnterCriticalSection(&amp;_mutex);
  }
  
<span class="line-modified">! inline void os::PlatformMutex::unlock() {</span>
    LeaveCriticalSection(&amp;_mutex);
  }
  
<span class="line-modified">! inline bool os::PlatformMutex::try_lock() {</span>
    return TryEnterCriticalSection(&amp;_mutex);
  }
  
  inline void os::PlatformMonitor::notify() {
    WakeConditionVariable(&amp;_cond);
</pre>
<center><a href="os_windows.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="perfMemory_windows.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>