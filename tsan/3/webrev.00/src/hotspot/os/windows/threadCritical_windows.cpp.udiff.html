<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/os/windows/threadCritical_windows.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="semaphore_windows.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="version.rc.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/os/windows/threadCritical_windows.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -54,11 +54,11 @@</span>
  ThreadCritical::ThreadCritical() {
    DWORD current_thread = GetCurrentThreadId();
  
    if (lock_owner != current_thread) {
      // Grab the lock before doing anything.
<span class="udiff-line-modified-removed">-     while (Atomic::cmpxchg(0, &amp;lock_count, -1) != -1) {</span>
<span class="udiff-line-modified-added">+     while (Atomic::cmpxchg(&amp;lock_count, -1, 0) != -1) {</span>
        if (initialized) {
          DWORD ret = WaitForSingleObject(lock_event,  INFINITE);
          assert(ret == WAIT_OBJECT_0, &quot;unexpected return value from WaitForSingleObject&quot;);
        }
      }
</pre>
<center><a href="semaphore_windows.hpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="version.rc.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>