<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.crypto.ucrypto/solaris/classes/com/oracle/security/ucrypto/Config.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../jdk.crypto.mscapi/windows/native/libsunmscapi/security.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../module-info.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.crypto.ucrypto/solaris/classes/com/oracle/security/ucrypto/Config.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.oracle.security.ucrypto;
 27 
 28 import java.io.*;
<span class="line-removed"> 29 import static java.io.StreamTokenizer.*;</span>
 30 import java.math.BigInteger;
 31 import java.util.*;
<span class="line-removed"> 32 </span>
 33 import java.security.*;
 34 



 35 import sun.security.action.GetPropertyAction;
 36 import sun.security.util.PropertyExpander;
 37 

 38 /**
 39  * Configuration container and file parsing.
 40  *
 41  * Currently, there is only one supported entry &quot;disabledServices&quot;
 42  * for disabling crypto services. Its syntax is as follows:
 43  *
 44  * disabledServices = {
 45  * &lt;ServiceType&gt;.&lt;Algorithm&gt;
 46  * ...
 47  * }
 48  *
 49  * where &lt;Service&gt; can be &quot;MessageDigest&quot;, &quot;Cipher&quot;, etc. and &lt;Algorithm&gt;
 50  * reprepresents the value that&#39;s passed into the various getInstance() calls.
 51  *
 52  * @since   9
 53  */
 54 final class Config {
 55 
 56     // Reader and StringTokenizer used during parsing
 57     private Reader reader;
 58 
 59     private StreamTokenizer st;
 60 
 61     private Set&lt;String&gt; parsedKeywords;
 62 
 63     // set of disabled crypto services, e.g. MessageDigest.SHA1, or
 64     // Cipher.AES/ECB/PKCS5Padding
 65     private Set&lt;String&gt; disabledServices;
 66 
 67     Config(String filename) throws IOException {
 68         FileInputStream in = new FileInputStream(expand(filename));
<span class="line-modified"> 69         reader = new BufferedReader(new InputStreamReader(in, &quot;ISO-8859-1&quot;));</span>
<span class="line-modified"> 70         parsedKeywords = new HashSet&lt;String&gt;();</span>
 71         st = new StreamTokenizer(reader);
 72         setupTokenizer();
 73         parse();
 74     }
 75 
 76     String[] getDisabledServices() {
 77         if (disabledServices != null) {
 78             return disabledServices.toArray(new String[disabledServices.size()]);
 79         } else {
 80             return new String[0];
 81         }
 82     }
 83 
 84     private static String expand(final String s) throws IOException {
 85         try {
 86             return PropertyExpander.expand(s);
 87         } catch (Exception e) {
 88             throw new RuntimeException(e.getMessage());
 89         }
 90     }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.oracle.security.ucrypto;
 27 
 28 import java.io.*;

 29 import java.math.BigInteger;
 30 import java.util.*;

 31 import java.security.*;
 32 
<span class="line-added"> 33 import static java.io.StreamTokenizer.*;</span>
<span class="line-added"> 34 import static java.nio.charset.StandardCharsets.ISO_8859_1;</span>
<span class="line-added"> 35 </span>
 36 import sun.security.action.GetPropertyAction;
 37 import sun.security.util.PropertyExpander;
 38 
<span class="line-added"> 39 </span>
 40 /**
 41  * Configuration container and file parsing.
 42  *
 43  * Currently, there is only one supported entry &quot;disabledServices&quot;
 44  * for disabling crypto services. Its syntax is as follows:
 45  *
 46  * disabledServices = {
 47  * &lt;ServiceType&gt;.&lt;Algorithm&gt;
 48  * ...
 49  * }
 50  *
 51  * where &lt;Service&gt; can be &quot;MessageDigest&quot;, &quot;Cipher&quot;, etc. and &lt;Algorithm&gt;
 52  * reprepresents the value that&#39;s passed into the various getInstance() calls.
 53  *
 54  * @since   9
 55  */
 56 final class Config {
 57 
 58     // Reader and StringTokenizer used during parsing
 59     private Reader reader;
 60 
 61     private StreamTokenizer st;
 62 
 63     private Set&lt;String&gt; parsedKeywords;
 64 
 65     // set of disabled crypto services, e.g. MessageDigest.SHA1, or
 66     // Cipher.AES/ECB/PKCS5Padding
 67     private Set&lt;String&gt; disabledServices;
 68 
 69     Config(String filename) throws IOException {
 70         FileInputStream in = new FileInputStream(expand(filename));
<span class="line-modified"> 71         reader = new BufferedReader(new InputStreamReader(in, ISO_8859_1));</span>
<span class="line-modified"> 72         parsedKeywords = new HashSet&lt;&gt;();</span>
 73         st = new StreamTokenizer(reader);
 74         setupTokenizer();
 75         parse();
 76     }
 77 
 78     String[] getDisabledServices() {
 79         if (disabledServices != null) {
 80             return disabledServices.toArray(new String[disabledServices.size()]);
 81         } else {
 82             return new String[0];
 83         }
 84     }
 85 
 86     private static String expand(final String s) throws IOException {
 87         try {
 88             return PropertyExpander.expand(s);
 89         } catch (Exception e) {
 90             throw new RuntimeException(e.getMessage());
 91         }
 92     }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../jdk.crypto.mscapi/windows/native/libsunmscapi/security.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../module-info.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>