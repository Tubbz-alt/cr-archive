<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HelpWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
<a name="2" id="anc2"></a>

 28 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
 29 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
 30 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
 31 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
 32 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
 33 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 34 import jdk.javadoc.internal.doclets.toolkit.Content;
 35 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 36 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 37 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 38 
 39 
 40 /**
 41  * Generate the Help File for the generated API documentation. The help file
 42  * contents are helpful for browsing the generated documentation.
 43  *
 44  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 45  *  If you write code that depends on this, you do so at your own risk.
 46  *  This code and its internal interfaces are subject to change or
 47  *  deletion without notice.&lt;/b&gt;
<a name="3" id="anc3"></a><span class="line-removed"> 48  *</span>
<span class="line-removed"> 49  * @author Atul M Dambalkar</span>
 50  */
 51 public class HelpWriter extends HtmlDocletWriter {
 52 
<a name="4" id="anc4"></a><span class="line-removed"> 53     HtmlTree mainTree = HtmlTree.MAIN();</span>
<span class="line-removed"> 54 </span>
 55     private final Navigation navBar;
 56 
<a name="5" id="anc5"></a>





 57     /**
 58      * Constructor to construct HelpWriter object.
 59      * @param configuration the configuration
 60      * @param filename File to be generated.
 61      */
 62     public HelpWriter(HtmlConfiguration configuration,
 63                       DocPath filename) {
 64         super(configuration, filename);
<a name="6" id="anc6"></a><span class="line-modified"> 65         this.navBar = new Navigation(null, configuration, fixedNavDiv, PageMode.HELP, path);</span>
 66     }
 67 
 68     /**
 69      * Construct the HelpWriter object and then use it to generate the help
 70      * file. The name of the generated file is &quot;help-doc.html&quot;. The help file
 71      * will get generated if and only if &quot;-helpfile&quot; and &quot;-nohelp&quot; is not used
 72      * on the command line.
 73      *
 74      * @param configuration the configuration
 75      * @throws DocFileIOException if there is a problem while generating the documentation
 76      */
 77     public static void generate(HtmlConfiguration configuration) throws DocFileIOException {
 78         DocPath filename = DocPaths.HELP_DOC;
 79         HelpWriter helpgen = new HelpWriter(configuration, filename);
 80         helpgen.generateHelpFile();
 81     }
 82 
 83     /**
 84      * Generate the help file contents.
 85      *
 86      * @throws DocFileIOException if there is a problem while generating the documentation
 87      */
 88     protected void generateHelpFile() throws DocFileIOException {
 89         String title = resources.getText(&quot;doclet.Window_Help_title&quot;);
<a name="7" id="anc7"></a><span class="line-modified"> 90         HtmlTree body = getBody(true, getWindowTitle(title));</span>
<span class="line-modified"> 91         HtmlTree htmlTree = HtmlTree.HEADER();</span>
<span class="line-modified"> 92         addTop(htmlTree);</span>
 93         navBar.setUserHeader(getUserHeaderFooter(true));
<a name="8" id="anc8"></a><span class="line-modified"> 94         htmlTree.add(navBar.getContent(true));</span>
<span class="line-modified"> 95         body.add(htmlTree);</span>
<span class="line-modified"> 96         addHelpFileContents(body);</span>
<span class="line-modified"> 97         htmlTree = HtmlTree.FOOTER();</span>
 98         navBar.setUserFooter(getUserHeaderFooter(false));
<a name="9" id="anc9"></a><span class="line-modified"> 99         htmlTree.add(navBar.getContent(false));</span>
<span class="line-modified">100         addBottom(htmlTree);</span>
<span class="line-modified">101         body.add(htmlTree);</span>




102         printHtmlDocument(null, &quot;help&quot;, body);
103     }
104 
105     /**
106      * Add the help file contents from the resource file to the content tree. While adding the
107      * help file contents it also keeps track of user options. If &quot;-notree&quot;
108      * is used, then the &quot;overview-tree.html&quot; will not get added and hence
109      * help information also will not get added.
110      *
111      * @param contentTree the content tree to which the help file contents will be added
112      */
113     protected void addHelpFileContents(Content contentTree) {
114         // Heading
115         Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false, HtmlStyle.title,
116                 contents.getContent(&quot;doclet.help.main_heading&quot;));
117         Content div = HtmlTree.DIV(HtmlStyle.header, heading);
118         Content intro = HtmlTree.DIV(HtmlStyle.subTitle,
119                 contents.getContent(&quot;doclet.help.intro&quot;));
120         div.add(intro);
<a name="10" id="anc10"></a><span class="line-modified">121         mainTree.add(div);</span>
122         HtmlTree htmlTree;
123         HtmlTree ul = new HtmlTree(HtmlTag.UL);
124         ul.setStyle(HtmlStyle.blockList);
125 
126         // Overview
<a name="11" id="anc11"></a><span class="line-modified">127         if (configuration.createoverview) {</span>
128             Content overviewHeading = HtmlTree.HEADING(Headings.CONTENT_HEADING,
129                 contents.overviewLabel);
<a name="12" id="anc12"></a><span class="line-modified">130             htmlTree = HtmlTree.SECTION(overviewHeading);</span>
131             String overviewKey = configuration.showModules
132                     ? &quot;doclet.help.overview.modules.body&quot;
133                     : &quot;doclet.help.overview.packages.body&quot;;
134             Content overviewLink = links.createLink(
<a name="13" id="anc13"></a><span class="line-modified">135                     DocPaths.overviewSummary(configuration.frames),</span>
<span class="line-removed">136                     resources.getText(&quot;doclet.Overview&quot;));</span>
137             Content overviewBody = contents.getContent(overviewKey, overviewLink);
138             Content overviewPara = HtmlTree.P(overviewBody);
139             htmlTree.add(overviewPara);
140             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
141         }
142 
143         // Module
144         if (configuration.showModules) {
145             Content moduleHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
146                     contents.moduleLabel);
<a name="14" id="anc14"></a><span class="line-modified">147             htmlTree = HtmlTree.SECTION(moduleHead);</span>
148             Content moduleIntro = contents.getContent(&quot;doclet.help.module.intro&quot;);
149             Content modulePara = HtmlTree.P(moduleIntro);
150             htmlTree.add(modulePara);
151             HtmlTree ulModule = new HtmlTree(HtmlTag.UL);
152             ulModule.add(HtmlTree.LI(contents.packagesLabel));
153             ulModule.add(HtmlTree.LI(contents.modulesLabel));
154             ulModule.add(HtmlTree.LI(contents.servicesLabel));
155             htmlTree.add(ulModule);
156             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
157         }
158 
159         // Package
160         Content packageHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
161                 contents.packageLabel);
<a name="15" id="anc15"></a><span class="line-modified">162         htmlTree = HtmlTree.SECTION(packageHead);</span>
163         Content packageIntro = contents.getContent(&quot;doclet.help.package.intro&quot;);
164         Content packagePara = HtmlTree.P(packageIntro);
165         htmlTree.add(packagePara);
166         HtmlTree ulPackage = new HtmlTree(HtmlTag.UL);
167         ulPackage.add(HtmlTree.LI(contents.interfaces));
168         ulPackage.add(HtmlTree.LI(contents.classes));
169         ulPackage.add(HtmlTree.LI(contents.enums));
170         ulPackage.add(HtmlTree.LI(contents.exceptions));
171         ulPackage.add(HtmlTree.LI(contents.errors));
172         ulPackage.add(HtmlTree.LI(contents.annotationTypes));
173         htmlTree.add(ulPackage);
174         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
175 
176         // Class/interface
177         Content classHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
178                 contents.getContent(&quot;doclet.help.class_interface.head&quot;));
<a name="16" id="anc16"></a><span class="line-modified">179         htmlTree = HtmlTree.SECTION(classHead);</span>
180         Content classIntro = contents.getContent(&quot;doclet.help.class_interface.intro&quot;);
181         Content classPara = HtmlTree.P(classIntro);
182         htmlTree.add(classPara);
183         HtmlTree ul1 = new HtmlTree(HtmlTag.UL);
184         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.inheritance_diagram&quot;)));
185         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subclasses&quot;)));
186         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subinterfaces&quot;)));
187         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.implementations&quot;)));
188         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.declaration&quot;)));
189         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.description&quot;)));
190         htmlTree.add(ul1);
191         htmlTree.add(new HtmlTree(HtmlTag.BR));
192         HtmlTree ul2 = new HtmlTree(HtmlTag.UL);
193         ul2.add(HtmlTree.LI(contents.nestedClassSummary));
194         ul2.add(HtmlTree.LI(contents.fieldSummaryLabel));
195         ul2.add(HtmlTree.LI(contents.propertySummaryLabel));
196         ul2.add(HtmlTree.LI(contents.constructorSummaryLabel));
197         ul2.add(HtmlTree.LI(contents.methodSummary));
198         htmlTree.add(ul2);
199         htmlTree.add(new HtmlTree(HtmlTag.BR));
200         HtmlTree ul3 = new HtmlTree(HtmlTag.UL);
201         ul3.add(HtmlTree.LI(contents.fieldDetailsLabel));
202         ul3.add(HtmlTree.LI(contents.propertyDetailsLabel));
203         ul3.add(HtmlTree.LI(contents.constructorDetailsLabel));
204         ul3.add(HtmlTree.LI(contents.methodDetailLabel));
205         htmlTree.add(ul3);
206         Content classSummary = contents.getContent(&quot;doclet.help.class_interface.summary&quot;);
207         Content para = HtmlTree.P(classSummary);
208         htmlTree.add(para);
209         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
210 
211         // Annotation Types
212         Content aHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
213                 contents.annotationType);
<a name="17" id="anc17"></a><span class="line-modified">214         htmlTree = HtmlTree.SECTION(aHead);</span>
215         Content aIntro = contents.getContent(&quot;doclet.help.annotation_type.intro&quot;);
216         Content aPara = HtmlTree.P(aIntro);
217         htmlTree.add(aPara);
218         HtmlTree aul = new HtmlTree(HtmlTag.UL);
219         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.declaration&quot;)));
220         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.description&quot;)));
221         aul.add(HtmlTree.LI(contents.annotateTypeRequiredMemberSummaryLabel));
222         aul.add(HtmlTree.LI(contents.annotateTypeOptionalMemberSummaryLabel));
223         aul.add(HtmlTree.LI(contents.annotationTypeMemberDetail));
224         htmlTree.add(aul);
225         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
226 
227         // Enums
228         Content enumHead = HtmlTree.HEADING(Headings.CONTENT_HEADING, contents.enum_);
<a name="18" id="anc18"></a><span class="line-modified">229         htmlTree = HtmlTree.SECTION(enumHead);</span>
230         Content eIntro = contents.getContent(&quot;doclet.help.enum.intro&quot;);
231         Content enumPara = HtmlTree.P(eIntro);
232         htmlTree.add(enumPara);
233         HtmlTree eul = new HtmlTree(HtmlTag.UL);
234         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.declaration&quot;)));
235         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.definition&quot;)));
236         eul.add(HtmlTree.LI(contents.enumConstantSummary));
237         eul.add(HtmlTree.LI(contents.enumConstantDetailLabel));
238         htmlTree.add(eul);
239         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
240 
241         // Class Use
<a name="19" id="anc19"></a><span class="line-modified">242         if (configuration.classuse) {</span>
243             Content useHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
244                     contents.getContent(&quot;doclet.help.use.head&quot;));
<a name="20" id="anc20"></a><span class="line-modified">245             htmlTree = HtmlTree.SECTION(useHead);</span>
246             Content useBody = contents.getContent(&quot;doclet.help.use.body&quot;);
247             Content usePara = HtmlTree.P(useBody);
248             htmlTree.add(usePara);
249             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
250         }
251 
252         // Tree
<a name="21" id="anc21"></a><span class="line-modified">253         if (configuration.createtree) {</span>
254             Content treeHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
255                     contents.getContent(&quot;doclet.help.tree.head&quot;));
<a name="22" id="anc22"></a><span class="line-modified">256             htmlTree = HtmlTree.SECTION(treeHead);</span>
257             Content treeIntro = contents.getContent(&quot;doclet.help.tree.intro&quot;,
258                     links.createLink(DocPaths.OVERVIEW_TREE,
259                     resources.getText(&quot;doclet.Class_Hierarchy&quot;)),
260                     HtmlTree.CODE(new StringContent(&quot;java.lang.Object&quot;)));
261             Content treePara = HtmlTree.P(treeIntro);
262             htmlTree.add(treePara);
263             HtmlTree tul = new HtmlTree(HtmlTag.UL);
264             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.overview&quot;)));
265             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.package&quot;)));
266             htmlTree.add(tul);
267             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
268         }
269 
270         // Deprecated
<a name="23" id="anc23"></a><span class="line-modified">271         if (!(configuration.nodeprecatedlist || configuration.nodeprecated)) {</span>
272             Content dHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
273                     contents.deprecatedAPI);
<a name="24" id="anc24"></a><span class="line-modified">274             htmlTree = HtmlTree.SECTION(dHead);</span>
275             Content deprBody = contents.getContent(&quot;doclet.help.deprecated.body&quot;,
276                     links.createLink(DocPaths.DEPRECATED_LIST,
277                     resources.getText(&quot;doclet.Deprecated_API&quot;)));
278             Content dPara = HtmlTree.P(deprBody);
279             htmlTree.add(dPara);
280             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
281         }
282 
283         // Index
<a name="25" id="anc25"></a><span class="line-modified">284         if (configuration.createindex) {</span>
285             Content indexlink;
<a name="26" id="anc26"></a><span class="line-modified">286             if (configuration.splitindex) {</span>
287                 indexlink = links.createLink(DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1)),
288                         resources.getText(&quot;doclet.Index&quot;));
289             } else {
290                 indexlink = links.createLink(DocPaths.INDEX_ALL,
291                         resources.getText(&quot;doclet.Index&quot;));
292             }
293             Content indexHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
294                     contents.getContent(&quot;doclet.help.index.head&quot;));
<a name="27" id="anc27"></a><span class="line-modified">295             htmlTree = HtmlTree.SECTION(indexHead);</span>
296             Content indexBody = contents.getContent(&quot;doclet.help.index.body&quot;, indexlink);
297             Content indexPara = HtmlTree.P(indexBody);
298             htmlTree.add(indexPara);
299             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
300         }
301 
<a name="28" id="anc28"></a><span class="line-removed">302         // Frames</span>
<span class="line-removed">303         if (configuration.frames) {</span>
<span class="line-removed">304             Content frameHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-removed">305                     contents.getContent(&quot;doclet.help.frames.head&quot;));</span>
<span class="line-removed">306             htmlTree = HtmlTree.SECTION(frameHead);</span>
<span class="line-removed">307             Content framesBody = contents.getContent(&quot;doclet.help.frames.body&quot;);</span>
<span class="line-removed">308             Content framePara = HtmlTree.P(framesBody);</span>
<span class="line-removed">309             htmlTree.add(framePara);</span>
<span class="line-removed">310 </span>
<span class="line-removed">311             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
<span class="line-removed">312         }</span>
<span class="line-removed">313 </span>
314         // Serialized Form
315         Content sHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
316                 contents.serializedForm);
<a name="29" id="anc29"></a><span class="line-modified">317         htmlTree = HtmlTree.SECTION(sHead);</span>
318         Content serialBody = contents.getContent(&quot;doclet.help.serial_form.body&quot;);
319         Content serialPara = HtmlTree.P(serialBody);
320         htmlTree.add(serialPara);
321         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
322 
323         // Constant Field Values
324         Content constHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
325                 contents.constantsSummaryTitle);
<a name="30" id="anc30"></a><span class="line-modified">326         htmlTree = HtmlTree.SECTION(constHead);</span>
327         Content constantsBody = contents.getContent(&quot;doclet.help.constants.body&quot;,
328                 links.createLink(DocPaths.CONSTANT_VALUES,
329                 resources.getText(&quot;doclet.Constants_Summary&quot;)));
330         Content constPara = HtmlTree.P(constantsBody);
331         htmlTree.add(constPara);
332         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
333 
334         // Search
335         Content searchHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
336                 contents.getContent(&quot;doclet.help.search.head&quot;));
<a name="31" id="anc31"></a><span class="line-modified">337         htmlTree = HtmlTree.SECTION(searchHead);</span>
<span class="line-modified">338         Content searchBody = contents.getContent(&quot;doclet.help.search.body&quot;);</span>
<span class="line-modified">339         Content searchPara = HtmlTree.P(searchBody);</span>
<span class="line-modified">340         htmlTree.add(searchPara);</span>











341         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
342 
343         Content divContent = HtmlTree.DIV(HtmlStyle.contentContainer, ul);
344         divContent.add(new HtmlTree(HtmlTag.HR));
345         Content footnote = HtmlTree.SPAN(HtmlStyle.emphasizedPhrase,
346                 contents.getContent(&quot;doclet.help.footnote&quot;));
347         divContent.add(footnote);
<a name="32" id="anc32"></a><span class="line-modified">348         mainTree.add(divContent);</span>
<span class="line-removed">349         contentTree.add(mainTree);</span>
350     }
351 }
<a name="33" id="anc33"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="33" type="hidden" />
</body>
</html>