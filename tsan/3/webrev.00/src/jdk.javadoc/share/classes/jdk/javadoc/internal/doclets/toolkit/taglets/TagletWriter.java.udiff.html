<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/taglets/TagletWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TagletManager.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ThrowsTaglet.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/taglets/TagletWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -24,12 +24,13 @@</span>
   */
  
  package jdk.javadoc.internal.doclets.toolkit.taglets;
  
  import java.util.List;
<span class="udiff-line-removed">- </span>
  import javax.lang.model.element.Element;
<span class="udiff-line-added">+ import javax.lang.model.element.ElementKind;</span>
<span class="udiff-line-added">+ import javax.lang.model.element.TypeElement;</span>
  import javax.lang.model.element.VariableElement;
  import javax.lang.model.type.TypeMirror;
  
  import com.sun.source.doctree.DocTree;
  import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -43,12 +44,10 @@</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="udiff-line-removed">-  *</span>
<span class="udiff-line-removed">-  * @author Jamie Ho</span>
   */
  
  public abstract class TagletWriter {
  
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -73,11 +72,11 @@</span>
       * @return the output of the taglet.
       */
      protected abstract Content codeTagOutput(Element element, DocTree tag);
  
      /**
<span class="udiff-line-modified-removed">-      * Return the output for a {@index...} tag.</span>
<span class="udiff-line-modified-added">+      * Return the output for a {@code {@index...}} tag.</span>
       *
       * @param tag the tag.
       * @return the output of the taglet.
       */
      protected abstract Content indexTagOutput(Element element, DocTree tag);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -190,13 +189,14 @@</span>
      /**
       * Return the header for the throws tag.
       *
       * @param element
       * @param throwsTag the throws tag.
<span class="udiff-line-added">+      * @param substituteType instantiated type of a generic type-variable, or null.</span>
       * @return the output of the throws tag.
       */
<span class="udiff-line-modified-removed">-     protected abstract Content throwsTagOutput(Element element, DocTree throwsTag);</span>
<span class="udiff-line-modified-added">+     protected abstract Content throwsTagOutput(Element element, DocTree throwsTag, TypeMirror substituteType);</span>
  
      /**
       * Return the output for the throws tag.
       *
       * @param throwsType the throws type.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -214,31 +214,52 @@</span>
       * @return the output of the value tag.
       */
      protected abstract Content valueTagOutput(VariableElement field,
          String constantVal, boolean includeLink);
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Return the main type element of the current page or null for pages that don&#39;t have one.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @return the type element of the current page or null.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     protected abstract TypeElement getCurrentPageElement();</span>
<span class="udiff-line-added">+ </span>
      /**
       * Given an output object, append to it the tag documentation for
       * the given member.
       *
       * @param tagletManager the manager that manages the taglets.
<span class="udiff-line-modified-removed">-      * @param element the Doc that we are print tags for.</span>
<span class="udiff-line-modified-added">+      * @param element the element that we are print tags for.</span>
       * @param taglets the taglets to print.
       * @param writer the writer that will generate the output strings.
       * @param output the output buffer to store the output in.
       */
<span class="udiff-line-modified-removed">-     public static void genTagOutput(TagletManager tagletManager, Element element,</span>
<span class="udiff-line-modified-removed">-             List&lt;Taglet&gt; taglets, TagletWriter writer, Content output) {</span>
<span class="udiff-line-modified-added">+     public static void genTagOutput(TagletManager tagletManager,</span>
<span class="udiff-line-modified-added">+                                     Element element,</span>
<span class="udiff-line-added">+                                     List&lt;Taglet&gt; taglets,</span>
<span class="udiff-line-added">+                                     TagletWriter writer,</span>
<span class="udiff-line-added">+                                     Content output)</span>
<span class="udiff-line-added">+     {</span>
          Utils utils = writer.configuration().utils;
          tagletManager.checkTags(element, utils.getBlockTags(element), false);
          tagletManager.checkTags(element, utils.getFullBody(element), true);
          for (Taglet taglet : taglets) {
              if (utils.isTypeElement(element) &amp;&amp; taglet instanceof ParamTaglet) {
<span class="udiff-line-modified-removed">-                 //The type parameters are documented in a special section away</span>
<span class="udiff-line-modified-removed">-                 //from the tag info, so skip here.</span>
<span class="udiff-line-modified-added">+                 // The type parameters and state components are documented in a special</span>
<span class="udiff-line-modified-added">+                 // section away from the tag info, so skip here.</span>
                  continue;
              }
<span class="udiff-line-added">+             if (element.getKind() == ElementKind.MODULE &amp;&amp; taglet instanceof BaseTaglet) {</span>
<span class="udiff-line-added">+                 BaseTaglet t = (BaseTaglet) taglet;</span>
<span class="udiff-line-added">+                 switch (t.getTagKind()) {</span>
<span class="udiff-line-added">+                     // @uses and @provides are handled separately, so skip here.</span>
<span class="udiff-line-added">+                     // See ModuleWriterImpl.computeModulesData</span>
<span class="udiff-line-added">+                     case USES:</span>
<span class="udiff-line-added">+                     case PROVIDES:</span>
<span class="udiff-line-added">+                         continue;</span>
<span class="udiff-line-added">+                 }</span>
<span class="udiff-line-added">+             }</span>
              if (taglet instanceof DeprecatedTaglet) {
                  //Deprecated information is documented &quot;inline&quot;, not in tag info
                  //section.
                  continue;
              }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -250,11 +271,11 @@</span>
              try {
                  currentOutput = taglet.getTagletOutput(element, writer);
              } catch (UnsupportedTagletOperationException utoe) {
                  //The taglet does not take a member as an argument.  Let&#39;s try
                  //a single tag.
<span class="udiff-line-modified-removed">-                 List&lt;? extends DocTree&gt; tags = utils.getBlockTags(element, taglet.getName());</span>
<span class="udiff-line-modified-added">+                 List&lt;? extends DocTree&gt; tags = utils.getBlockTags(element, taglet);</span>
                  if (!tags.isEmpty()) {
                      currentOutput = taglet.getTagletOutput(element, tags.get(0), writer);
                  }
              }
              if (currentOutput != null) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -265,18 +286,22 @@</span>
      }
      /**
       * Given an inline tag, return its output.
       * @param holder
       * @param tagletManager The taglet manager for the current doclet.
<span class="udiff-line-modified-removed">-      * @param holderTag The tag this holds this inline tag.  Null if there</span>
<span class="udiff-line-modified-removed">-      * is no tag that holds it.</span>
<span class="udiff-line-modified-added">+      * @param holderTag The tag that holds this inline tag, or {@code null} if</span>
<span class="udiff-line-modified-added">+      *                  there is no tag that holds it.</span>
       * @param inlineTag The inline tag to be documented.
       * @param tagletWriter The taglet writer to write the output.
       * @return The output of the inline tag.
       */
<span class="udiff-line-modified-removed">-     public static Content getInlineTagOutput(Element holder, TagletManager tagletManager,</span>
<span class="udiff-line-modified-removed">-             DocTree holderTag, DocTree inlineTag, TagletWriter tagletWriter) {</span>
<span class="udiff-line-modified-added">+     public static Content getInlineTagOutput(Element holder,</span>
<span class="udiff-line-modified-added">+                                              TagletManager tagletManager,</span>
<span class="udiff-line-added">+                                              DocTree holderTag,</span>
<span class="udiff-line-added">+                                              DocTree inlineTag,</span>
<span class="udiff-line-added">+                                              TagletWriter tagletWriter)</span>
<span class="udiff-line-added">+     {</span>
          List&lt;Taglet&gt; definedTags = tagletManager.getInlineTaglets();
          CommentHelper ch = tagletWriter.configuration().utils.getCommentHelper(holder);
          final String inlineTagName = ch.getTagName(inlineTag);
          //This is a custom inline tag.
          for (Taglet definedTag : definedTags) {
</pre>
<center><a href="TagletManager.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ThrowsTaglet.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>