<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/TypeElementCatalog.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="StandardDocFileFactory.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="Utils.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/TypeElementCatalog.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2001, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2001, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -40,12 +40,10 @@</span>
   *
   * &lt;p&gt;
   * &lt;b&gt;This is NOT part of any supported API. If you write code that depends on this, you do so at
   * your own risk. This code and its internal interfaces are subject to change or deletion without
   * notice.&lt;/b&gt;
<span class="udiff-line-removed">-  *</span>
<span class="udiff-line-removed">-  * @author Jamie Ho</span>
   */
  public class TypeElementCatalog {
  
      /**
       * Stores the set of packages that the classes specified on the command line belong to. Note
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -71,10 +69,15 @@</span>
      /**
       * Stores enums for each package.
       */
      private final Map&lt;PackageElement, SortedSet&lt;TypeElement&gt;&gt; enums;
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Stores records for each package.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     private final Map&lt;PackageElement, SortedSet&lt;TypeElement&gt;&gt; records;</span>
<span class="udiff-line-added">+ </span>
      /**
       * Stores annotation types for each package.
       */
      private final Map&lt;PackageElement, SortedSet&lt;TypeElement&gt;&gt; annotationTypes;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -114,10 +117,11 @@</span>
          comparator = utils.makeGeneralPurposeComparator();
          allClasses = new HashMap&lt;&gt;();
          ordinaryClasses = new HashMap&lt;&gt;();
          exceptions = new HashMap&lt;&gt;();
          enums = new HashMap&lt;&gt;();
<span class="udiff-line-added">+         records = new HashMap&lt;&gt;();</span>
          annotationTypes = new HashMap&lt;&gt;();
          errors = new HashMap&lt;&gt;();
          interfaces = new HashMap&lt;&gt;();
          packageSet = new TreeSet&lt;&gt;(comparator);
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -136,10 +140,12 @@</span>
              addTypeElement(typeElement, ordinaryClasses);
          } else if (utils.isException(typeElement)) {
              addTypeElement(typeElement, exceptions);
          } else if (utils.isEnum(typeElement)) {
              addTypeElement(typeElement, enums);
<span class="udiff-line-added">+         } else if (utils.isRecord(typeElement)) {</span>
<span class="udiff-line-added">+             addTypeElement(typeElement, records);</span>
          } else if (utils.isAnnotationType(typeElement)) {
              addTypeElement(typeElement, annotationTypes);
          } else if (utils.isError(typeElement)) {
              addTypeElement(typeElement, errors);
          } else if (utils.isInterface(typeElement)) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -154,11 +160,11 @@</span>
       * @param map the Map to add the TypeElement to.
       */
      private void addTypeElement(TypeElement typeElement, Map&lt;PackageElement, SortedSet&lt;TypeElement&gt;&gt; map) {
  
          PackageElement pkg = utils.containingPackage(typeElement);
<span class="udiff-line-modified-removed">-         if (utils.isSpecified(pkg) || configuration.nodeprecated &amp;&amp; utils.isDeprecated(pkg)) {</span>
<span class="udiff-line-modified-added">+         if (utils.isSpecified(pkg) || configuration.getOptions().noDeprecated() &amp;&amp; utils.isDeprecated(pkg)) {</span>
              // No need to catalog this class if it&#39;s package is
              // specified on the command line or if -nodeprecated option is set
              return;
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -189,13 +195,11 @@</span>
                  ? utils.getTypeElementsAsSortedSet(utils.getEnclosedTypeElements(packageElement))
                  : getSet(allClasses, packageElement);
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Return all of the classes specified on the command-line that belong to the given package.</span>
<span class="udiff-line-removed">-      *</span>
<span class="udiff-line-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * Return all of the classes specified on the command-line that belong to the unnamed package.</span>
       */
      public SortedSet&lt;TypeElement&gt; allUnnamedClasses() {
          for (PackageElement pkg : allClasses.keySet()) {
              if (pkg.isUnnamed()) {
                  return allClasses.get(pkg);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -212,58 +216,67 @@</span>
      }
  
      /**
       * Return all of the errors specified on the command-line that belong to the given package.
       *
<span class="udiff-line-modified-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * @param pkg the name of the package specified on the command-line.</span>
       */
      public SortedSet&lt;TypeElement&gt; errors(PackageElement pkg) {
          return getSet(errors, pkg);
      }
  
      /**
       * Return all of the exceptions specified on the command-line that belong to the given package.
       *
<span class="udiff-line-modified-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * @param pkg the name of the package specified on the command-line.</span>
       */
      public SortedSet&lt;TypeElement&gt; exceptions(PackageElement pkg) {
          return getSet(exceptions, pkg);
      }
  
      /**
       * Return all of the enums specified on the command-line that belong to the given package.
       *
<span class="udiff-line-modified-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * @param pkg the name of the package specified on the command-line.</span>
       */
      public SortedSet&lt;TypeElement&gt; enums(PackageElement pkg) {
          return getSet(enums, pkg);
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Return all of the records specified on the command-line that belong to the given package.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @param pkg the name of the package specified on the command-line.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public SortedSet&lt;TypeElement&gt; records(PackageElement pkg) {</span>
<span class="udiff-line-added">+         return getSet(records, pkg);</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * Return all of the annotation types specified on the command-line that belong to the given
       * package.
       *
<span class="udiff-line-modified-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * @param pkg the name of the package specified on the command-line.</span>
       */
      public SortedSet&lt;TypeElement&gt; annotationTypes(PackageElement pkg) {
          return getSet(annotationTypes, pkg);
      }
  
      /**
       * Return all of the interfaces specified on the command-line that belong to the given package.
       *
<span class="udiff-line-modified-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * @param pkg the name of the package specified on the command-line.</span>
       */
      public SortedSet&lt;TypeElement&gt; interfaces(PackageElement pkg) {
          return getSet(interfaces, pkg);
      }
  
      /**
       * Return all of the ordinary classes specified on the command-line that belong to the given
       * package.
       *
<span class="udiff-line-modified-removed">-      * @param packageName the name of the package specified on the command-line.</span>
<span class="udiff-line-modified-added">+      * @param pkg the name of the package specified on the command-line.</span>
       */
      public SortedSet&lt;TypeElement&gt; ordinaryClasses(PackageElement pkg) {
          return getSet(ordinaryClasses, pkg);
      }
  }
</pre>
<center><a href="StandardDocFileFactory.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="Utils.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>