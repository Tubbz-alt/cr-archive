<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/MetaKeywords.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JavaScriptScanner.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="StandardDocFileFactory.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/MetaKeywords.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 31,10 ***</span>
<span class="line-new-header">--- 31,12 ---</span>
  import javax.lang.model.element.ModuleElement;
  import javax.lang.model.element.PackageElement;
  import javax.lang.model.element.TypeElement;
  
  import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
<span class="line-added">+ import jdk.javadoc.internal.doclets.toolkit.BaseOptions;</span>
<span class="line-added">+ import jdk.javadoc.internal.doclets.toolkit.Resources;</span>
  
  /**
   * Provides methods for creating an array of class, method and
   * field names to be included as meta keywords in the HTML header
   * of class pages.  These keywords improve search results
</pre>
<hr />
<pre>
<span class="line-old-header">*** 42,25 ***</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="line-removed">-  *</span>
<span class="line-removed">-  * @author Doug Kramer</span>
   */
  public class MetaKeywords {
  
<span class="line-modified">!     /**</span>
<span class="line-modified">!      * The global configuration information for this run.</span>
<span class="line-modified">!      */</span>
<span class="line-removed">-     private final BaseConfiguration config;</span>
  
      /**
       * Constructor
       */
      public MetaKeywords(BaseConfiguration configuration) {
<span class="line-modified">!         config = configuration;</span>
      }
  
      /**
       * Returns an array of strings where each element
       * is a class, method or field name.  This array is
<span class="line-new-header">--- 44,24 ---</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
   */
  public class MetaKeywords {
  
<span class="line-modified">!     private final BaseOptions options;</span>
<span class="line-modified">!     private final Resources resources;</span>
<span class="line-modified">!     private final Utils utils;</span>
  
      /**
       * Constructor
       */
      public MetaKeywords(BaseConfiguration configuration) {
<span class="line-modified">!         options = configuration.getOptions();</span>
<span class="line-added">+         resources = configuration.getDocResources();</span>
<span class="line-added">+         utils = configuration.utils;</span>
      }
  
      /**
       * Returns an array of strings where each element
       * is a class, method or field name.  This array is
</pre>
<hr />
<pre>
<span class="line-old-header">*** 75,14 ***</span>
       */
      public List&lt;String&gt; getMetaKeywords(TypeElement typeElement) {
          ArrayList&lt;String&gt; results = new ArrayList&lt;&gt;();
  
          // Add field and method keywords only if -keywords option is used
<span class="line-modified">!         if (config.keywords) {</span>
              results.addAll(getClassKeyword(typeElement));
<span class="line-modified">!             results.addAll(getMemberKeywords(config.utils.getFields(typeElement)));</span>
<span class="line-modified">!             results.addAll(getMemberKeywords(config.utils.getMethods(typeElement)));</span>
          }
          ((ArrayList)results).trimToSize();
          return results;
      }
  
<span class="line-new-header">--- 76,14 ---</span>
       */
      public List&lt;String&gt; getMetaKeywords(TypeElement typeElement) {
          ArrayList&lt;String&gt; results = new ArrayList&lt;&gt;();
  
          // Add field and method keywords only if -keywords option is used
<span class="line-modified">!         if (options.keywords()) {</span>
              results.addAll(getClassKeyword(typeElement));
<span class="line-modified">!             results.addAll(getMemberKeywords(utils.getFields(typeElement)));</span>
<span class="line-modified">!             results.addAll(getMemberKeywords(utils.getMethods(typeElement)));</span>
          }
          ((ArrayList)results).trimToSize();
          return results;
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 90,22 ***</span>
       * Get the current class for a meta tag keyword, as the first
       * and only element of an array list.
       */
      protected List&lt;String&gt; getClassKeyword(TypeElement typeElement) {
          ArrayList&lt;String&gt; metakeywords = new ArrayList&lt;&gt;(1);
<span class="line-modified">!         String cltypelower = config.utils.isInterface(typeElement) ? &quot;interface&quot; : &quot;class&quot;;</span>
<span class="line-modified">!         metakeywords.add(config.utils.getFullyQualifiedName(typeElement) + &quot; &quot; + cltypelower);</span>
          return metakeywords;
      }
  
      /**
       * Get the package keywords.
       */
      public List&lt;String&gt; getMetaKeywords(PackageElement packageElement) {
          List&lt;String&gt; result = new ArrayList&lt;&gt;(1);
<span class="line-modified">!         if (config.keywords) {</span>
<span class="line-modified">!             String pkgName = config.utils.getPackageName(packageElement);</span>
              result.add(pkgName + &quot; &quot; + &quot;package&quot;);
          }
          return result;
      }
  
<span class="line-new-header">--- 91,22 ---</span>
       * Get the current class for a meta tag keyword, as the first
       * and only element of an array list.
       */
      protected List&lt;String&gt; getClassKeyword(TypeElement typeElement) {
          ArrayList&lt;String&gt; metakeywords = new ArrayList&lt;&gt;(1);
<span class="line-modified">!         String cltypelower = utils.isInterface(typeElement) ? &quot;interface&quot; : &quot;class&quot;;</span>
<span class="line-modified">!         metakeywords.add(utils.getFullyQualifiedName(typeElement) + &quot; &quot; + cltypelower);</span>
          return metakeywords;
      }
  
      /**
       * Get the package keywords.
       */
      public List&lt;String&gt; getMetaKeywords(PackageElement packageElement) {
          List&lt;String&gt; result = new ArrayList&lt;&gt;(1);
<span class="line-modified">!         if (options.keywords()) {</span>
<span class="line-modified">!             String pkgName = utils.getPackageName(packageElement);</span>
              result.add(pkgName + &quot; &quot; + &quot;package&quot;);
          }
          return result;
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 113,11 ***</span>
       * Get the module keywords.
       *
       * @param mdle the module being documented
       */
      public List&lt;String&gt; getMetaKeywordsForModule(ModuleElement mdle) {
<span class="line-modified">!         if (config.keywords) {</span>
              return Arrays.asList(mdle.getQualifiedName() + &quot; &quot; + &quot;module&quot;);
          } else {
              return Collections.emptyList();
          }
      }
<span class="line-new-header">--- 114,11 ---</span>
       * Get the module keywords.
       *
       * @param mdle the module being documented
       */
      public List&lt;String&gt; getMetaKeywordsForModule(ModuleElement mdle) {
<span class="line-modified">!         if (options.keywords()) {</span>
              return Arrays.asList(mdle.getQualifiedName() + &quot; &quot; + &quot;module&quot;);
          } else {
              return Collections.emptyList();
          }
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 125,12 ***</span>
      /**
       * Get the overview keywords.
       */
      public List&lt;String&gt; getOverviewMetaKeywords(String title, String docTitle) {
           List&lt;String&gt; result = new ArrayList&lt;&gt;(1);
<span class="line-modified">!         if (config.keywords) {</span>
<span class="line-modified">!             String windowOverview = config.getResources().getText(title);</span>
              if (docTitle.length() &gt; 0) {
                  result.add(windowOverview + &quot;, &quot; + docTitle);
              } else {
                  result.add(windowOverview);
              }
<span class="line-new-header">--- 126,12 ---</span>
      /**
       * Get the overview keywords.
       */
      public List&lt;String&gt; getOverviewMetaKeywords(String title, String docTitle) {
           List&lt;String&gt; result = new ArrayList&lt;&gt;(1);
<span class="line-modified">!         if (options.keywords()) {</span>
<span class="line-modified">!             String windowOverview = resources.getText(title);</span>
              if (docTitle.length() &gt; 0) {
                  result.add(windowOverview + &quot;, &quot; + docTitle);
              } else {
                  result.add(windowOverview);
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 148,13 ***</span>
       * @param members  array of members to be added to keywords
       */
      protected List&lt;String&gt; getMemberKeywords(List&lt;? extends Element&gt; members) {
          ArrayList&lt;String&gt; results = new ArrayList&lt;&gt;();
          for (Element member : members) {
<span class="line-modified">!             String membername = config.utils.isMethod(member)</span>
<span class="line-modified">!                     ? config.utils.getSimpleName(member) + &quot;()&quot;</span>
<span class="line-modified">!                     : config.utils.getSimpleName(member);</span>
              if (!results.contains(membername)) {
                  results.add(membername);
              }
          }
          ((ArrayList)results).trimToSize();
<span class="line-new-header">--- 149,13 ---</span>
       * @param members  array of members to be added to keywords
       */
      protected List&lt;String&gt; getMemberKeywords(List&lt;? extends Element&gt; members) {
          ArrayList&lt;String&gt; results = new ArrayList&lt;&gt;();
          for (Element member : members) {
<span class="line-modified">!             String membername = utils.isMethod(member)</span>
<span class="line-modified">!                     ? utils.getSimpleName(member) + &quot;()&quot;</span>
<span class="line-modified">!                     : utils.getSimpleName(member);</span>
              if (!results.contains(membername)) {
                  results.add(membername);
              }
          }
          ((ArrayList)results).trimToSize();
</pre>
<center><a href="JavaScriptScanner.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="StandardDocFileFactory.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>