<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/DeprecatedListWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Contents.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DocFilesHandlerImpl.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/DeprecatedListWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 59,12 ***</span>
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
   *
   * @see java.util.List
<span class="line-removed">-  * @author Atul M Dambalkar</span>
<span class="line-removed">-  * @author Bhavesh Patel (Modified)</span>
   */
  public class DeprecatedListWriter extends SubWriterHolderWriter {
  
      private String getAnchorName(DeprElementKind kind) {
          switch (kind) {
<span class="line-new-header">--- 59,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 220,11 ***</span>
       */
  
      public DeprecatedListWriter(HtmlConfiguration configuration, DocPath filename) {
          super(configuration, filename);
          this.configuration = configuration;
<span class="line-modified">!         this.navBar = new Navigation(null, configuration, fixedNavDiv, PageMode.DEPRECATED, path);</span>
          NestedClassWriterImpl classW = new NestedClassWriterImpl(this);
          writerMap = new EnumMap&lt;&gt;(DeprElementKind.class);
          for (DeprElementKind kind : DeprElementKind.values()) {
              switch (kind) {
                  case REMOVAL:
<span class="line-new-header">--- 218,11 ---</span>
       */
  
      public DeprecatedListWriter(HtmlConfiguration configuration, DocPath filename) {
          super(configuration, filename);
          this.configuration = configuration;
<span class="line-modified">!         this.navBar = new Navigation(null, configuration, PageMode.DEPRECATED, path);</span>
          NestedClassWriterImpl classW = new NestedClassWriterImpl(this);
          writerMap = new EnumMap&lt;&gt;(DeprElementKind.class);
          for (DeprElementKind kind : DeprElementKind.values()) {
              switch (kind) {
                  case REMOVAL:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 259,11 ***</span>
          }
      }
  
      /**
       * Get list of all the deprecated classes and members in all the Packages
<span class="line-modified">!      * specified on the Command Line.</span>
       * Then instantiate DeprecatedListWriter and generate File.
       *
       * @param configuration the current configuration of the doclet.
       * @throws DocFileIOException if there is a problem writing the deprecated list
       */
<span class="line-new-header">--- 257,11 ---</span>
          }
      }
  
      /**
       * Get list of all the deprecated classes and members in all the Packages
<span class="line-modified">!      * specified on the command line.</span>
       * Then instantiate DeprecatedListWriter and generate File.
       *
       * @param configuration the current configuration of the doclet.
       * @throws DocFileIOException if there is a problem writing the deprecated list
       */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 281,43 ***</span>
       * @throws DocFileIOException if there is a problem writing the deprecated list
       */
      protected void generateDeprecatedListFile(DeprecatedAPIListBuilder deprapi)
              throws DocFileIOException {
          HtmlTree body = getHeader();
<span class="line-modified">!         HtmlTree htmlTree = HtmlTree.MAIN();</span>
<span class="line-removed">-         htmlTree.add(getContentsList(deprapi));</span>
          String memberTableSummary;
          HtmlTree div = new HtmlTree(HtmlTag.DIV);
          div.setStyle(HtmlStyle.contentContainer);
          for (DeprElementKind kind : DeprElementKind.values()) {
              if (deprapi.hasDocumentation(kind)) {
<span class="line-removed">-                 addAnchor(deprapi, kind, div);</span>
                  memberTableSummary = resources.getText(&quot;doclet.Member_Table_Summary&quot;,
                          resources.getText(getHeadingKey(kind)),
                          resources.getText(getSummaryKey(kind)));
                  TableHeader memberTableHeader = new TableHeader(
                          contents.getContent(getHeaderKey(kind)), contents.descriptionLabel);
<span class="line-modified">!                 addDeprecatedAPI(deprapi.getSet(kind),</span>
                              getHeadingKey(kind), memberTableSummary, memberTableHeader, div);
              }
          }
<span class="line-modified">!         htmlTree.add(div);</span>
<span class="line-modified">!         body.add(htmlTree);</span>
<span class="line-removed">-         htmlTree = HtmlTree.FOOTER();</span>
          navBar.setUserFooter(getUserHeaderFooter(false));
          htmlTree.add(navBar.getContent(false));
          addBottom(htmlTree);
<span class="line-modified">!         body.add(htmlTree);</span>
          String description = &quot;deprecated elements&quot;;
          printHtmlDocument(null, description, body);
      }
  
      /**
       * Add the index link.
       *
       * @param builder the deprecated list builder
<span class="line-modified">!      * @param type the type of list being documented</span>
       * @param contentTree the content tree to which the index link will be added
       */
      private void addIndexLink(DeprecatedAPIListBuilder builder,
              DeprElementKind kind, Content contentTree) {
          if (builder.hasDocumentation(kind)) {
<span class="line-new-header">--- 279,41 ---</span>
       * @throws DocFileIOException if there is a problem writing the deprecated list
       */
      protected void generateDeprecatedListFile(DeprecatedAPIListBuilder deprapi)
              throws DocFileIOException {
          HtmlTree body = getHeader();
<span class="line-modified">!         bodyContents.addMainContent(getContentsList(deprapi));</span>
          String memberTableSummary;
          HtmlTree div = new HtmlTree(HtmlTag.DIV);
          div.setStyle(HtmlStyle.contentContainer);
          for (DeprElementKind kind : DeprElementKind.values()) {
              if (deprapi.hasDocumentation(kind)) {
                  memberTableSummary = resources.getText(&quot;doclet.Member_Table_Summary&quot;,
                          resources.getText(getHeadingKey(kind)),
                          resources.getText(getSummaryKey(kind)));
                  TableHeader memberTableHeader = new TableHeader(
                          contents.getContent(getHeaderKey(kind)), contents.descriptionLabel);
<span class="line-modified">!                 addDeprecatedAPI(deprapi.getSet(kind), getAnchorName(kind),</span>
                              getHeadingKey(kind), memberTableSummary, memberTableHeader, div);
              }
          }
<span class="line-modified">!         bodyContents.addMainContent(div);</span>
<span class="line-modified">!         HtmlTree htmlTree = HtmlTree.FOOTER();</span>
          navBar.setUserFooter(getUserHeaderFooter(false));
          htmlTree.add(navBar.getContent(false));
          addBottom(htmlTree);
<span class="line-modified">!         bodyContents.setFooter(htmlTree);</span>
          String description = &quot;deprecated elements&quot;;
<span class="line-added">+         body.add(bodyContents.toContent());</span>
          printHtmlDocument(null, description, body);
      }
  
      /**
       * Add the index link.
       *
       * @param builder the deprecated list builder
<span class="line-modified">!      * @param kind the kind of list being documented</span>
       * @param contentTree the content tree to which the index link will be added
       */
      private void addIndexLink(DeprecatedAPIListBuilder builder,
              DeprElementKind kind, Content contentTree) {
          if (builder.hasDocumentation(kind)) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 347,55 ***</span>
          }
          div.add(ul);
          return div;
      }
  
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Add the anchor.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param builder the deprecated list builder</span>
<span class="line-removed">-      * @param type the type of list being documented</span>
<span class="line-removed">-      * @param htmlTree the content tree to which the anchor will be added</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     private void addAnchor(DeprecatedAPIListBuilder builder, DeprElementKind kind, Content htmlTree) {</span>
<span class="line-removed">-         if (builder.hasDocumentation(kind)) {</span>
<span class="line-removed">-             htmlTree.add(links.createAnchor(getAnchorName(kind)));</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
      /**
       * Get the header for the deprecated API Listing.
       *
       * @return a content tree for the header
       */
      public HtmlTree getHeader() {
          String title = resources.getText(&quot;doclet.Window_Deprecated_List&quot;);
<span class="line-modified">!         HtmlTree bodyTree = getBody(true, getWindowTitle(title));</span>
<span class="line-modified">!         HtmlTree htmlTree = HtmlTree.HEADER();</span>
<span class="line-modified">!         addTop(htmlTree);</span>
          navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified">!         htmlTree.add(navBar.getContent(true));</span>
<span class="line-modified">!         bodyTree.add(htmlTree);</span>
          return bodyTree;
      }
  
      /**
       * Add deprecated information to the documentation tree
       *
       * @param deprList list of deprecated API elements
       * @param headingKey the caption for the deprecated table
       * @param tableSummary the summary for the deprecated table
       * @param tableHeader table headers for the deprecated table
       * @param contentTree the content tree to which the deprecated table will be added
       */
<span class="line-modified">!     protected void addDeprecatedAPI(SortedSet&lt;Element&gt; deprList, String headingKey,</span>
              String tableSummary, TableHeader tableHeader, Content contentTree) {
          if (deprList.size() &gt; 0) {
              Content caption = contents.getContent(headingKey);
              Table table = new Table(HtmlStyle.deprecatedSummary)
                      .setCaption(caption)
                      .setHeader(tableHeader)
                      .setColumnStyles(HtmlStyle.colDeprecatedItemName, HtmlStyle.colLast);
              for (Element e : deprList) {
                  Content link;
                  switch (e.getKind()) {
                      case MODULE:
<span class="line-new-header">--- 343,44 ---</span>
          }
          div.add(ul);
          return div;
      }
  
      /**
       * Get the header for the deprecated API Listing.
       *
       * @return a content tree for the header
       */
      public HtmlTree getHeader() {
          String title = resources.getText(&quot;doclet.Window_Deprecated_List&quot;);
<span class="line-modified">!         HtmlTree bodyTree = getBody(getWindowTitle(title));</span>
<span class="line-modified">!         Content headerContent = new ContentBuilder();</span>
<span class="line-modified">!         addTop(headerContent);</span>
          navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified">!         headerContent.add(navBar.getContent(true));</span>
<span class="line-modified">!         bodyContents.setHeader(headerContent);</span>
          return bodyTree;
      }
  
      /**
       * Add deprecated information to the documentation tree
       *
       * @param deprList list of deprecated API elements
<span class="line-added">+      * @param id the id attribute of the table</span>
       * @param headingKey the caption for the deprecated table
       * @param tableSummary the summary for the deprecated table
       * @param tableHeader table headers for the deprecated table
       * @param contentTree the content tree to which the deprecated table will be added
       */
<span class="line-modified">!     protected void addDeprecatedAPI(SortedSet&lt;Element&gt; deprList, String id, String headingKey,</span>
              String tableSummary, TableHeader tableHeader, Content contentTree) {
          if (deprList.size() &gt; 0) {
              Content caption = contents.getContent(headingKey);
              Table table = new Table(HtmlStyle.deprecatedSummary)
                      .setCaption(caption)
                      .setHeader(tableHeader)
<span class="line-added">+                     .setId(id)</span>
                      .setColumnStyles(HtmlStyle.colDeprecatedItemName, HtmlStyle.colLast);
              for (Element e : deprList) {
                  Content link;
                  switch (e.getKind()) {
                      case MODULE:
</pre>
<center><a href="Contents.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="DocFilesHandlerImpl.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>