<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/IndexRedirectWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HtmlSerialMethodWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="LinkFactoryImpl.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/IndexRedirectWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2016, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 42,13 ***</span>
  import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
  
  /**
   * Writes a file that tries to redirect to an alternate page.
   * The redirect uses JavaScript, if enabled, falling back on
<span class="line-modified">!  * {@code &lt;meta http-eqiv=refresh content=&quot;0,&lt;uri&gt;&quot;&gt;}.</span>
   * If neither are supported/enabled in a browser, the page displays the
<span class="line-modified">!  * standard &quot;JavaScipt not enabled&quot; message, and a link to the alternate page.</span>
   */
  public class IndexRedirectWriter extends HtmlDocletWriter {
  
      public static void generate(HtmlConfiguration configuration)
              throws DocFileIOException {
<span class="line-new-header">--- 42,13 ---</span>
  import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
  
  /**
   * Writes a file that tries to redirect to an alternate page.
   * The redirect uses JavaScript, if enabled, falling back on
<span class="line-modified">!  * {@code &lt;meta http-equiv=refresh content=&quot;0,&lt;uri&gt;&quot;&gt;}.</span>
   * If neither are supported/enabled in a browser, the page displays the
<span class="line-modified">!  * standard &quot;JavaScript not enabled&quot; message, and a link to the alternate page.</span>
   */
  public class IndexRedirectWriter extends HtmlDocletWriter {
  
      public static void generate(HtmlConfiguration configuration)
              throws DocFileIOException {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 72,23 ***</span>
       * Generate an index file that redirects to an alternate file.
       * @throws DocFileIOException if there is a problem generating the file
       */
      private void generateIndexFile() throws DocFileIOException {
          Content htmlComment = contents.newPage;
<span class="line-modified">!         Head head = new Head(path, configuration.docletVersion)</span>
<span class="line-modified">!                 .setTimestamp(true)</span>
                  .setDescription(&quot;index redirect&quot;)
                  .setGenerator(getGenerator(getClass()))
                  .setStylesheets(configuration.getMainStylesheet(), Collections.emptyList()) // avoid reference to default stylesheet
                  .addDefaultScript(false);
  
<span class="line-modified">!         String title = (configuration.windowtitle.length() &gt; 0)</span>
<span class="line-modified">!                 ? configuration.windowtitle</span>
                  : resources.getText(&quot;doclet.Generated_Docs_Untitled&quot;);
  
          head.setTitle(title)
<span class="line-modified">!                 .setCharset(configuration.charset)</span>
                  .setCanonicalLink(target);
  
          String targetPath = target.getPath();
          Script script = new Script(&quot;window.location.replace(&quot;)
                  .appendStringLiteral(targetPath, &#39;\&#39;&#39;)
<span class="line-new-header">--- 72,23 ---</span>
       * Generate an index file that redirects to an alternate file.
       * @throws DocFileIOException if there is a problem generating the file
       */
      private void generateIndexFile() throws DocFileIOException {
          Content htmlComment = contents.newPage;
<span class="line-modified">!         Head head = new Head(path, configuration.docletVersion, configuration.startTime)</span>
<span class="line-modified">!                 .setTimestamp(!options.noTimestamp())</span>
                  .setDescription(&quot;index redirect&quot;)
                  .setGenerator(getGenerator(getClass()))
                  .setStylesheets(configuration.getMainStylesheet(), Collections.emptyList()) // avoid reference to default stylesheet
                  .addDefaultScript(false);
  
<span class="line-modified">!         String title = (options.windowTitle().length() &gt; 0)</span>
<span class="line-modified">!                 ? options.windowTitle()</span>
                  : resources.getText(&quot;doclet.Generated_Docs_Untitled&quot;);
  
          head.setTitle(title)
<span class="line-modified">!                 .setCharset(options.charset())</span>
                  .setCanonicalLink(target);
  
          String targetPath = target.getPath();
          Script script = new Script(&quot;window.location.replace(&quot;)
                  .appendStringLiteral(targetPath, &#39;\&#39;&#39;)
</pre>
<center><a href="HtmlSerialMethodWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="LinkFactoryImpl.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>