<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/ConstantsSummaryWriterImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ClassWriterImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ConstructorWriterImpl.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/ConstantsSummaryWriterImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2001, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
<span class="line-modified"> 28 import jdk.javadoc.internal.doclets.formats.html.markup.Table;</span>
<span class="line-modified"> 29 import jdk.javadoc.internal.doclets.formats.html.markup.TableHeader;</span>
<span class="line-removed"> 30 </span>
<span class="line-removed"> 31 import java.util.*;</span>
 32 
 33 import javax.lang.model.element.Modifier;
 34 import javax.lang.model.element.PackageElement;
 35 import javax.lang.model.element.TypeElement;
 36 import javax.lang.model.element.VariableElement;
 37 

 38 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;

 39 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
 40 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
 41 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
 42 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
 43 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
 44 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;


 45 import jdk.javadoc.internal.doclets.toolkit.ConstantsSummaryWriter;
 46 import jdk.javadoc.internal.doclets.toolkit.Content;
 47 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 48 import jdk.javadoc.internal.doclets.toolkit.util.DocLink;
 49 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 50 
 51 
 52 /**
 53  * Write the Constants Summary Page in HTML format.
 54  *
 55  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 56  *  If you write code that depends on this, you do so at your own risk.
 57  *  This code and its internal interfaces are subject to change or
 58  *  deletion without notice.&lt;/b&gt;
<span class="line-removed"> 59  *</span>
<span class="line-removed"> 60  * @author Jamie Ho</span>
<span class="line-removed"> 61  * @author Bhavesh Patel (Modified)</span>
 62  */
 63 public class ConstantsSummaryWriterImpl extends HtmlDocletWriter implements ConstantsSummaryWriter {
 64 
 65     /**
 66      * The configuration used in this run of the standard doclet.
 67      */
 68     HtmlConfiguration configuration;
 69 
 70     /**
 71      * The current class being documented.
 72      */
 73     private TypeElement currentTypeElement;
 74 
 75     private final TableHeader constantsTableHeader;
 76 
<span class="line-removed"> 77     /**</span>
<span class="line-removed"> 78      * The HTML tree for main tag.</span>
<span class="line-removed"> 79      */</span>
<span class="line-removed"> 80     private final HtmlTree mainTree = HtmlTree.MAIN();</span>
<span class="line-removed"> 81 </span>
 82     /**
 83      * The HTML tree for constant values summary.
 84      */
 85     private HtmlTree summaryTree;
 86 
 87     private final Navigation navBar;
 88 


 89     /**
 90      * Construct a ConstantsSummaryWriter.
 91      * @param configuration the configuration used in this run
 92      *        of the standard doclet.
 93      */
 94     public ConstantsSummaryWriterImpl(HtmlConfiguration configuration) {
 95         super(configuration, DocPaths.CONSTANT_VALUES);
 96         this.configuration = configuration;
 97         constantsTableHeader = new TableHeader(
 98                 contents.modifierAndTypeLabel, contents.constantFieldLabel, contents.valueLabel);
<span class="line-modified"> 99         this.navBar = new Navigation(null, configuration, fixedNavDiv, PageMode.CONSTANTVALUES, path);</span>
100     }
101 
<span class="line-removed">102     /**</span>
<span class="line-removed">103      * {@inheritDoc}</span>
<span class="line-removed">104      */</span>
105     @Override
106     public Content getHeader() {
107         String label = resources.getText(&quot;doclet.Constants_Summary&quot;);
<span class="line-modified">108         HtmlTree bodyTree = getBody(true, getWindowTitle(label));</span>
<span class="line-modified">109         HtmlTree htmlTree = HtmlTree.HEADER();</span>
<span class="line-modified">110         addTop(htmlTree);</span>
111         navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified">112         htmlTree.add(navBar.getContent(true));</span>
<span class="line-modified">113         bodyTree.add(htmlTree);</span>
114         return bodyTree;
115     }
116 
<span class="line-removed">117     /**</span>
<span class="line-removed">118      * {@inheritDoc}</span>
<span class="line-removed">119      */</span>
120     @Override
121     public Content getContentsHeader() {
122         return new HtmlTree(HtmlTag.UL);
123     }
124 
<span class="line-removed">125     /**</span>
<span class="line-removed">126      * {@inheritDoc}</span>
<span class="line-removed">127      */</span>
128     @Override
129     public void addLinkToPackageContent(PackageElement pkg,
130             Set&lt;PackageElement&gt; printedPackageHeaders, Content contentListTree) {
131         //add link to summary
132         Content link;
133         if (pkg.isUnnamed()) {
134             link = links.createLink(SectionName.UNNAMED_PACKAGE_ANCHOR,
135                     contents.defaultPackageLabel, &quot;&quot;, &quot;&quot;);
136         } else {
137             String parsedPackageName = utils.parsePackageName(pkg);
138             Content packageNameContent = getPackageLabel(parsedPackageName);
139             packageNameContent.add(&quot;.*&quot;);
140             link = links.createLink(DocLink.fragment(parsedPackageName),
141                     packageNameContent, &quot;&quot;, &quot;&quot;);
142             PackageElement abbrevPkg = configuration.workArounds.getAbbreviatedPackageElement(pkg);
143             printedPackageHeaders.add(abbrevPkg);
144         }
145         contentListTree.add(HtmlTree.LI(link));
146     }
147 
<span class="line-removed">148     /**</span>
<span class="line-removed">149      * {@inheritDoc}</span>
<span class="line-removed">150      */</span>
151     @Override
<span class="line-modified">152     public void addContentsList(Content contentTree, Content contentListTree) {</span>
153         Content titleContent = contents.constantsSummaryTitle;
154         Content pHeading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, true,
155                 HtmlStyle.title, titleContent);
156         Content div = HtmlTree.DIV(HtmlStyle.header, pHeading);
157         Content headingContent = contents.contentsHeading;
158         Content heading = HtmlTree.HEADING(Headings.CONTENT_HEADING, true,
159                 headingContent);
<span class="line-modified">160         HtmlTree section = HtmlTree.SECTION(heading);</span>
161         section.add(contentListTree);
162         div.add(section);
<span class="line-modified">163         mainTree.add(div);</span>
164     }
165 
<span class="line-removed">166     /**</span>
<span class="line-removed">167      * {@inheritDoc}</span>
<span class="line-removed">168      */</span>
169     @Override
170     public Content getConstantSummaries() {
171         HtmlTree summariesDiv = new HtmlTree(HtmlTag.DIV);
172         summariesDiv.setStyle(HtmlStyle.constantValuesContainer);
173         return summariesDiv;
174     }
175 
<span class="line-removed">176     /**</span>
<span class="line-removed">177      * {@inheritDoc}</span>
<span class="line-removed">178      */</span>
179     @Override
180     public void addPackageName(PackageElement pkg, Content summariesTree, boolean first) {
181         Content pkgNameContent;

182         if (!first) {
183             summariesTree.add(summaryTree);
184         }
185         if (pkg.isUnnamed()) {
<span class="line-modified">186             summariesTree.add(links.createAnchor(SectionName.UNNAMED_PACKAGE_ANCHOR));</span>
187             pkgNameContent = contents.defaultPackageLabel;
188         } else {
189             String parsedPackageName = utils.parsePackageName(pkg);
<span class="line-modified">190             summariesTree.add(links.createAnchor(parsedPackageName));</span>
191             pkgNameContent = getPackageLabel(parsedPackageName);
192         }
193         Content headingContent = new StringContent(&quot;.*&quot;);
194         Content heading = HtmlTree.HEADING(Headings.ConstantsSummary.PACKAGE_HEADING, true,
195                 pkgNameContent);
196         heading.add(headingContent);
<span class="line-modified">197         summaryTree = HtmlTree.SECTION(heading);</span>

198     }
199 
<span class="line-removed">200     /**</span>
<span class="line-removed">201      * {@inheritDoc}</span>
<span class="line-removed">202      */</span>
203     @Override
204     public Content getClassConstantHeader() {
205         HtmlTree ul = new HtmlTree(HtmlTag.UL);
206         ul.setStyle(HtmlStyle.blockList);
207         return ul;
208     }
209 
<span class="line-removed">210     /**</span>
<span class="line-removed">211      * {@inheritDoc}</span>
<span class="line-removed">212      */</span>
213     @Override
214     public void addClassConstant(Content summariesTree, Content classConstantTree) {
215         summaryTree.add(classConstantTree);
216     }
217 
<span class="line-removed">218     /**</span>
<span class="line-removed">219      * {@inheritDoc}</span>
<span class="line-removed">220      */</span>
221     @Override
222     public void addConstantMembers(TypeElement typeElement, Collection&lt;VariableElement&gt; fields,
223             Content classConstantTree) {
224         currentTypeElement = typeElement;
225 
226         //generate links backward only to public classes.
227         Content classlink = (utils.isPublic(typeElement) || utils.isProtected(typeElement)) ?
228             getLink(new LinkInfoImpl(configuration,
229                     LinkInfoImpl.Kind.CONSTANT_SUMMARY, typeElement)) :
230             new StringContent(utils.getFullyQualifiedName(typeElement));
231 
232         PackageElement enclosingPackage  = utils.containingPackage(typeElement);
233         Content caption = new ContentBuilder();
234         if (!enclosingPackage.isUnnamed()) {
235             caption.add(enclosingPackage.getQualifiedName());
236             caption.add(&quot;.&quot;);
237         }
238         caption.add(classlink);
239 
240         Table table = new Table(HtmlStyle.constantsSummary)
241                 .setCaption(caption)
242                 .setHeader(constantsTableHeader)
243                 .setRowScopeColumn(1)
244                 .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colSecond, HtmlStyle.colLast);
245 
246         for (VariableElement field : fields) {
247             table.addRow(getTypeColumn(field), getNameColumn(field), getValue(field));
248         }
249         Content li = HtmlTree.LI(HtmlStyle.blockList, table.toContent());
250         classConstantTree.add(li);
251     }
252 
253     /**
254      * Get the type column for the constant summary table row.
255      *
256      * @param member the field to be documented.
257      * @return the type column of the constant table row
258      */
259     private Content getTypeColumn(VariableElement member) {
<span class="line-removed">260         Content anchor = links.createAnchor(</span>
<span class="line-removed">261                 currentTypeElement.getQualifiedName() + &quot;.&quot; + member.getSimpleName());</span>
262         Content typeContent = new ContentBuilder();
<span class="line-modified">263         typeContent.add(anchor);</span>
<span class="line-modified">264         Content code = new HtmlTree(HtmlTag.CODE);</span>
265         for (Modifier mod : member.getModifiers()) {
266             Content modifier = new StringContent(mod.toString());
267             code.add(modifier);
<span class="line-modified">268             code.add(Contents.SPACE);</span>
269         }
270         Content type = getLink(new LinkInfoImpl(configuration,
271                 LinkInfoImpl.Kind.CONSTANT_SUMMARY, member.asType()));
272         code.add(type);
273         typeContent.add(code);
274         return typeContent;
275     }
276 
277     /**
278      * Get the name column for the constant summary table row.
279      *
280      * @param member the field to be documented.
281      * @return the name column of the constant table row
282      */
283     private Content getNameColumn(VariableElement member) {
284         Content nameContent = getDocLink(LinkInfoImpl.Kind.CONSTANT_SUMMARY,
285                 member, member.getSimpleName(), false);
286         return HtmlTree.CODE(nameContent);
287     }
288 
289     /**
290      * Get the value column for the constant summary table row.
291      *
292      * @param member the field to be documented.
293      * @return the value column of the constant table row
294      */
295     private Content getValue(VariableElement member) {
296         String value = utils.constantValueExpresion(member);
297         Content valueContent = new StringContent(value);
298         return HtmlTree.CODE(valueContent);
299     }
300 
<span class="line-removed">301     /**</span>
<span class="line-removed">302      * {@inheritDoc}</span>
<span class="line-removed">303      */</span>
304     @Override
<span class="line-modified">305     public void addConstantSummaries(Content contentTree, Content summariesTree) {</span>
306         if (summaryTree != null) {
307             summariesTree.add(summaryTree);
308         }
<span class="line-modified">309         mainTree.add(summariesTree);</span>
<span class="line-removed">310         contentTree.add(mainTree);</span>
311     }
312 
<span class="line-removed">313     /**</span>
<span class="line-removed">314      * {@inheritDoc}</span>
<span class="line-removed">315      */</span>
316     @Override
<span class="line-modified">317     public void addFooter(Content contentTree) {</span>
318         Content htmlTree = HtmlTree.FOOTER();
319         navBar.setUserFooter(getUserHeaderFooter(false));
320         htmlTree.add(navBar.getContent(false));
321         addBottom(htmlTree);
<span class="line-modified">322         contentTree.add(htmlTree);</span>
323     }
324 
<span class="line-removed">325     /**</span>
<span class="line-removed">326      * {@inheritDoc}</span>
<span class="line-removed">327      */</span>
328     @Override
329     public void printDocument(Content contentTree) throws DocFileIOException {

330         printHtmlDocument(null, &quot;summary of constants&quot;, contentTree);
331     }
332 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2001, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
<span class="line-modified"> 28 import java.util.Collection;</span>
<span class="line-modified"> 29 import java.util.Set;</span>


 30 
 31 import javax.lang.model.element.Modifier;
 32 import javax.lang.model.element.PackageElement;
 33 import javax.lang.model.element.TypeElement;
 34 import javax.lang.model.element.VariableElement;
 35 
<span class="line-added"> 36 import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;</span>
 37 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;
<span class="line-added"> 38 import jdk.javadoc.internal.doclets.formats.html.markup.Entity;</span>
 39 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
 40 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
 41 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
 42 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
 43 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
 44 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
<span class="line-added"> 45 import jdk.javadoc.internal.doclets.formats.html.markup.Table;</span>
<span class="line-added"> 46 import jdk.javadoc.internal.doclets.formats.html.markup.TableHeader;</span>
 47 import jdk.javadoc.internal.doclets.toolkit.ConstantsSummaryWriter;
 48 import jdk.javadoc.internal.doclets.toolkit.Content;
 49 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 50 import jdk.javadoc.internal.doclets.toolkit.util.DocLink;
 51 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 52 
 53 
 54 /**
 55  * Write the Constants Summary Page in HTML format.
 56  *
 57  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 58  *  If you write code that depends on this, you do so at your own risk.
 59  *  This code and its internal interfaces are subject to change or
 60  *  deletion without notice.&lt;/b&gt;



 61  */
 62 public class ConstantsSummaryWriterImpl extends HtmlDocletWriter implements ConstantsSummaryWriter {
 63 
 64     /**
 65      * The configuration used in this run of the standard doclet.
 66      */
 67     HtmlConfiguration configuration;
 68 
 69     /**
 70      * The current class being documented.
 71      */
 72     private TypeElement currentTypeElement;
 73 
 74     private final TableHeader constantsTableHeader;
 75 





 76     /**
 77      * The HTML tree for constant values summary.
 78      */
 79     private HtmlTree summaryTree;
 80 
 81     private final Navigation navBar;
 82 
<span class="line-added"> 83     private final BodyContents bodyContents = new BodyContents();</span>
<span class="line-added"> 84 </span>
 85     /**
 86      * Construct a ConstantsSummaryWriter.
 87      * @param configuration the configuration used in this run
 88      *        of the standard doclet.
 89      */
 90     public ConstantsSummaryWriterImpl(HtmlConfiguration configuration) {
 91         super(configuration, DocPaths.CONSTANT_VALUES);
 92         this.configuration = configuration;
 93         constantsTableHeader = new TableHeader(
 94                 contents.modifierAndTypeLabel, contents.constantFieldLabel, contents.valueLabel);
<span class="line-modified"> 95         this.navBar = new Navigation(null, configuration, PageMode.CONSTANTVALUES, path);</span>
 96     }
 97 



 98     @Override
 99     public Content getHeader() {
100         String label = resources.getText(&quot;doclet.Constants_Summary&quot;);
<span class="line-modified">101         HtmlTree bodyTree = getBody(getWindowTitle(label));</span>
<span class="line-modified">102         Content headerContent = new ContentBuilder();</span>
<span class="line-modified">103         addTop(headerContent);</span>
104         navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified">105         headerContent.add(navBar.getContent(true));</span>
<span class="line-modified">106         bodyContents.setHeader(headerContent);</span>
107         return bodyTree;
108     }
109 



110     @Override
111     public Content getContentsHeader() {
112         return new HtmlTree(HtmlTag.UL);
113     }
114 



115     @Override
116     public void addLinkToPackageContent(PackageElement pkg,
117             Set&lt;PackageElement&gt; printedPackageHeaders, Content contentListTree) {
118         //add link to summary
119         Content link;
120         if (pkg.isUnnamed()) {
121             link = links.createLink(SectionName.UNNAMED_PACKAGE_ANCHOR,
122                     contents.defaultPackageLabel, &quot;&quot;, &quot;&quot;);
123         } else {
124             String parsedPackageName = utils.parsePackageName(pkg);
125             Content packageNameContent = getPackageLabel(parsedPackageName);
126             packageNameContent.add(&quot;.*&quot;);
127             link = links.createLink(DocLink.fragment(parsedPackageName),
128                     packageNameContent, &quot;&quot;, &quot;&quot;);
129             PackageElement abbrevPkg = configuration.workArounds.getAbbreviatedPackageElement(pkg);
130             printedPackageHeaders.add(abbrevPkg);
131         }
132         contentListTree.add(HtmlTree.LI(link));
133     }
134 



135     @Override
<span class="line-modified">136     public void addContentsList(Content contentListTree) {</span>
137         Content titleContent = contents.constantsSummaryTitle;
138         Content pHeading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, true,
139                 HtmlStyle.title, titleContent);
140         Content div = HtmlTree.DIV(HtmlStyle.header, pHeading);
141         Content headingContent = contents.contentsHeading;
142         Content heading = HtmlTree.HEADING(Headings.CONTENT_HEADING, true,
143                 headingContent);
<span class="line-modified">144         HtmlTree section = HtmlTree.SECTION(HtmlStyle.packages, heading);</span>
145         section.add(contentListTree);
146         div.add(section);
<span class="line-modified">147         bodyContents.addMainContent(div);</span>
148     }
149 



150     @Override
151     public Content getConstantSummaries() {
152         HtmlTree summariesDiv = new HtmlTree(HtmlTag.DIV);
153         summariesDiv.setStyle(HtmlStyle.constantValuesContainer);
154         return summariesDiv;
155     }
156 



157     @Override
158     public void addPackageName(PackageElement pkg, Content summariesTree, boolean first) {
159         Content pkgNameContent;
<span class="line-added">160         String anchorName;</span>
161         if (!first) {
162             summariesTree.add(summaryTree);
163         }
164         if (pkg.isUnnamed()) {
<span class="line-modified">165             anchorName = SectionName.UNNAMED_PACKAGE_ANCHOR.getName();</span>
166             pkgNameContent = contents.defaultPackageLabel;
167         } else {
168             String parsedPackageName = utils.parsePackageName(pkg);
<span class="line-modified">169             anchorName = parsedPackageName;</span>
170             pkgNameContent = getPackageLabel(parsedPackageName);
171         }
172         Content headingContent = new StringContent(&quot;.*&quot;);
173         Content heading = HtmlTree.HEADING(Headings.ConstantsSummary.PACKAGE_HEADING, true,
174                 pkgNameContent);
175         heading.add(headingContent);
<span class="line-modified">176         summaryTree = HtmlTree.SECTION(HtmlStyle.constantsSummary, heading)</span>
<span class="line-added">177                 .setId(links.getName(anchorName));</span>
178     }
179 



180     @Override
181     public Content getClassConstantHeader() {
182         HtmlTree ul = new HtmlTree(HtmlTag.UL);
183         ul.setStyle(HtmlStyle.blockList);
184         return ul;
185     }
186 



187     @Override
188     public void addClassConstant(Content summariesTree, Content classConstantTree) {
189         summaryTree.add(classConstantTree);
190     }
191 



192     @Override
193     public void addConstantMembers(TypeElement typeElement, Collection&lt;VariableElement&gt; fields,
194             Content classConstantTree) {
195         currentTypeElement = typeElement;
196 
197         //generate links backward only to public classes.
198         Content classlink = (utils.isPublic(typeElement) || utils.isProtected(typeElement)) ?
199             getLink(new LinkInfoImpl(configuration,
200                     LinkInfoImpl.Kind.CONSTANT_SUMMARY, typeElement)) :
201             new StringContent(utils.getFullyQualifiedName(typeElement));
202 
203         PackageElement enclosingPackage  = utils.containingPackage(typeElement);
204         Content caption = new ContentBuilder();
205         if (!enclosingPackage.isUnnamed()) {
206             caption.add(enclosingPackage.getQualifiedName());
207             caption.add(&quot;.&quot;);
208         }
209         caption.add(classlink);
210 
211         Table table = new Table(HtmlStyle.constantsSummary)
212                 .setCaption(caption)
213                 .setHeader(constantsTableHeader)
214                 .setRowScopeColumn(1)
215                 .setColumnStyles(HtmlStyle.colFirst, HtmlStyle.colSecond, HtmlStyle.colLast);
216 
217         for (VariableElement field : fields) {
218             table.addRow(getTypeColumn(field), getNameColumn(field), getValue(field));
219         }
220         Content li = HtmlTree.LI(HtmlStyle.blockList, table.toContent());
221         classConstantTree.add(li);
222     }
223 
224     /**
225      * Get the type column for the constant summary table row.
226      *
227      * @param member the field to be documented.
228      * @return the type column of the constant table row
229      */
230     private Content getTypeColumn(VariableElement member) {


231         Content typeContent = new ContentBuilder();
<span class="line-modified">232         String id = currentTypeElement.getQualifiedName() + &quot;.&quot; + member.getSimpleName();</span>
<span class="line-modified">233         Content code = new HtmlTree(HtmlTag.CODE).setId(id);</span>
234         for (Modifier mod : member.getModifiers()) {
235             Content modifier = new StringContent(mod.toString());
236             code.add(modifier);
<span class="line-modified">237             code.add(Entity.NO_BREAK_SPACE);</span>
238         }
239         Content type = getLink(new LinkInfoImpl(configuration,
240                 LinkInfoImpl.Kind.CONSTANT_SUMMARY, member.asType()));
241         code.add(type);
242         typeContent.add(code);
243         return typeContent;
244     }
245 
246     /**
247      * Get the name column for the constant summary table row.
248      *
249      * @param member the field to be documented.
250      * @return the name column of the constant table row
251      */
252     private Content getNameColumn(VariableElement member) {
253         Content nameContent = getDocLink(LinkInfoImpl.Kind.CONSTANT_SUMMARY,
254                 member, member.getSimpleName(), false);
255         return HtmlTree.CODE(nameContent);
256     }
257 
258     /**
259      * Get the value column for the constant summary table row.
260      *
261      * @param member the field to be documented.
262      * @return the value column of the constant table row
263      */
264     private Content getValue(VariableElement member) {
265         String value = utils.constantValueExpresion(member);
266         Content valueContent = new StringContent(value);
267         return HtmlTree.CODE(valueContent);
268     }
269 



270     @Override
<span class="line-modified">271     public void addConstantSummaries(Content summariesTree) {</span>
272         if (summaryTree != null) {
273             summariesTree.add(summaryTree);
274         }
<span class="line-modified">275         bodyContents.addMainContent(summariesTree);</span>

276     }
277 



278     @Override
<span class="line-modified">279     public void addFooter() {</span>
280         Content htmlTree = HtmlTree.FOOTER();
281         navBar.setUserFooter(getUserHeaderFooter(false));
282         htmlTree.add(navBar.getContent(false));
283         addBottom(htmlTree);
<span class="line-modified">284         bodyContents.setFooter(htmlTree);</span>
285     }
286 



287     @Override
288     public void printDocument(Content contentTree) throws DocFileIOException {
<span class="line-added">289         contentTree.add(bodyContents.toContent());</span>
290         printHtmlDocument(null, &quot;summary of constants&quot;, contentTree);
291     }
292 }
</pre>
</td>
</tr>
</table>
<center><a href="ClassWriterImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ConstructorWriterImpl.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>