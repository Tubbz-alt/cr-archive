<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/PackageTreeWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="PackageIndexWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PackageUseWriter.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/PackageTreeWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,10 ***</span>
<span class="line-new-header">--- 25,12 ---</span>
  
  package jdk.javadoc.internal.doclets.formats.html;
  
  import javax.lang.model.element.PackageElement;
  
<span class="line-added">+ import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;</span>
<span class="line-added">+ import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;</span>
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
  import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
  import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 45,44 ***</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="line-removed">-  *</span>
<span class="line-removed">-  * @author Atul M Dambalkar</span>
<span class="line-removed">-  * @author Bhavesh Patel (Modified)</span>
   */
  public class PackageTreeWriter extends AbstractTreeWriter {
  
      /**
       * Package for which tree is to be generated.
       */
      protected PackageElement packageElement;
  
      private final Navigation navBar;
  
      /**
       * Constructor.
       * @param configuration the configuration
       * @param path the docpath to generate files into
       * @param packageElement the current package
       */
      public PackageTreeWriter(HtmlConfiguration configuration, DocPath path, PackageElement packageElement) {
          super(configuration, path,
                new ClassTree(configuration.typeElementCatalog.allClasses(packageElement), configuration));
          this.packageElement = packageElement;
<span class="line-modified">!         this.navBar = new Navigation(packageElement, configuration, fixedNavDiv, PageMode.TREE, path);</span>
      }
  
      /**
       * Construct a PackageTreeWriter object and then use it to generate the
       * package tree page.
       *
       * @param configuration the configuration for this run.
       * @param pkg      Package for which tree file is to be generated.
       * @param noDeprecated  If true, do not generate any information for
<span class="line-modified">!      * deprecated classe or interfaces.</span>
       * @throws DocFileIOException if there is a problem generating the package tree page
       */
      public static void generate(HtmlConfiguration configuration,
                                  PackageElement pkg, boolean noDeprecated)
              throws DocFileIOException {
<span class="line-new-header">--- 47,43 ---</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
   */
  public class PackageTreeWriter extends AbstractTreeWriter {
  
      /**
       * Package for which tree is to be generated.
       */
      protected PackageElement packageElement;
  
      private final Navigation navBar;
  
<span class="line-added">+     private final BodyContents bodyContents = new BodyContents();</span>
<span class="line-added">+ </span>
      /**
       * Constructor.
       * @param configuration the configuration
       * @param path the docpath to generate files into
       * @param packageElement the current package
       */
      public PackageTreeWriter(HtmlConfiguration configuration, DocPath path, PackageElement packageElement) {
          super(configuration, path,
                new ClassTree(configuration.typeElementCatalog.allClasses(packageElement), configuration));
          this.packageElement = packageElement;
<span class="line-modified">!         this.navBar = new Navigation(packageElement, configuration, PageMode.TREE, path);</span>
      }
  
      /**
       * Construct a PackageTreeWriter object and then use it to generate the
       * package tree page.
       *
       * @param configuration the configuration for this run.
       * @param pkg      Package for which tree file is to be generated.
       * @param noDeprecated  If true, do not generate any information for
<span class="line-modified">!      * deprecated classes or interfaces.</span>
       * @throws DocFileIOException if there is a problem generating the package tree page
       */
      public static void generate(HtmlConfiguration configuration,
                                  PackageElement pkg, boolean noDeprecated)
              throws DocFileIOException {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 95,33 ***</span>
       * Generate a separate tree file for each package.
       * @throws DocFileIOException if there is a problem generating the package tree file
       */
      protected void generatePackageTreeFile() throws DocFileIOException {
          HtmlTree body = getPackageTreeHeader();
<span class="line-modified">!         HtmlTree mainTree = HtmlTree.MAIN();</span>
          Content headContent = contents.getContent(&quot;doclet.Hierarchy_For_Package&quot;,
                  utils.getPackageName(packageElement));
          Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false,
                  HtmlStyle.title, headContent);
          Content div = HtmlTree.DIV(HtmlStyle.header, heading);
          if (configuration.packages.size() &gt; 1) {
              addLinkToMainTree(div);
          }
<span class="line-modified">!         mainTree.add(div);</span>
          HtmlTree divTree = new HtmlTree(HtmlTag.DIV);
          divTree.setStyle(HtmlStyle.contentContainer);
          addTree(classtree.baseClasses(), &quot;doclet.Class_Hierarchy&quot;, divTree);
          addTree(classtree.baseInterfaces(), &quot;doclet.Interface_Hierarchy&quot;, divTree);
          addTree(classtree.baseAnnotationTypes(), &quot;doclet.Annotation_Type_Hierarchy&quot;, divTree);
          addTree(classtree.baseEnums(), &quot;doclet.Enum_Hierarchy&quot;, divTree, true);
<span class="line-modified">!         mainTree.add(divTree);</span>
<span class="line-modified">!         body.add(mainTree);</span>
          HtmlTree footer = HtmlTree.FOOTER();
          navBar.setUserFooter(getUserHeaderFooter(false));
          footer.add(navBar.getContent(false));
          addBottom(footer);
<span class="line-modified">!         body.add(footer);</span>
          printHtmlDocument(null, getDescription(&quot;tree&quot;, packageElement), body);
      }
  
      /**
       * Get the package tree header.
<span class="line-new-header">--- 96,34 ---</span>
       * Generate a separate tree file for each package.
       * @throws DocFileIOException if there is a problem generating the package tree file
       */
      protected void generatePackageTreeFile() throws DocFileIOException {
          HtmlTree body = getPackageTreeHeader();
<span class="line-modified">!         Content mainContent = new ContentBuilder();</span>
          Content headContent = contents.getContent(&quot;doclet.Hierarchy_For_Package&quot;,
                  utils.getPackageName(packageElement));
          Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false,
                  HtmlStyle.title, headContent);
          Content div = HtmlTree.DIV(HtmlStyle.header, heading);
          if (configuration.packages.size() &gt; 1) {
              addLinkToMainTree(div);
          }
<span class="line-modified">!         mainContent.add(div);</span>
          HtmlTree divTree = new HtmlTree(HtmlTag.DIV);
          divTree.setStyle(HtmlStyle.contentContainer);
          addTree(classtree.baseClasses(), &quot;doclet.Class_Hierarchy&quot;, divTree);
          addTree(classtree.baseInterfaces(), &quot;doclet.Interface_Hierarchy&quot;, divTree);
          addTree(classtree.baseAnnotationTypes(), &quot;doclet.Annotation_Type_Hierarchy&quot;, divTree);
          addTree(classtree.baseEnums(), &quot;doclet.Enum_Hierarchy&quot;, divTree, true);
<span class="line-modified">!         mainContent.add(divTree);</span>
<span class="line-modified">!         bodyContents.addMainContent(mainContent);</span>
          HtmlTree footer = HtmlTree.FOOTER();
          navBar.setUserFooter(getUserHeaderFooter(false));
          footer.add(navBar.getContent(false));
          addBottom(footer);
<span class="line-modified">!         bodyContents.setFooter(footer);</span>
<span class="line-added">+         body.add(bodyContents.toContent());</span>
          printHtmlDocument(null, getDescription(&quot;tree&quot;, packageElement), body);
      }
  
      /**
       * Get the package tree header.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 129,19 ***</span>
       * @return a content tree for the header
       */
      protected HtmlTree getPackageTreeHeader() {
          String packageName = packageElement.isUnnamed() ? &quot;&quot; : utils.getPackageName(packageElement);
          String title = packageName + &quot; &quot; + resources.getText(&quot;doclet.Window_Class_Hierarchy&quot;);
<span class="line-modified">!         HtmlTree bodyTree = getBody(true, getWindowTitle(title));</span>
<span class="line-modified">!         HtmlTree htmlTree = HtmlTree.HEADER();</span>
<span class="line-modified">!         addTop(htmlTree);</span>
          Content linkContent = getModuleLink(utils.elementUtils.getModuleOf(packageElement),
                  contents.moduleLabel);
          navBar.setNavLinkModule(linkContent);
          navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified">!         htmlTree.add(navBar.getContent(true));</span>
<span class="line-modified">!         bodyTree.add(htmlTree);</span>
          return bodyTree;
      }
  
      /**
       * Add a link to the tree for all the packages.
<span class="line-new-header">--- 131,19 ---</span>
       * @return a content tree for the header
       */
      protected HtmlTree getPackageTreeHeader() {
          String packageName = packageElement.isUnnamed() ? &quot;&quot; : utils.getPackageName(packageElement);
          String title = packageName + &quot; &quot; + resources.getText(&quot;doclet.Window_Class_Hierarchy&quot;);
<span class="line-modified">!         HtmlTree bodyTree = getBody(getWindowTitle(title));</span>
<span class="line-modified">!         Content headerContent = new ContentBuilder();</span>
<span class="line-modified">!         addTop(headerContent);</span>
          Content linkContent = getModuleLink(utils.elementUtils.getModuleOf(packageElement),
                  contents.moduleLabel);
          navBar.setNavLinkModule(linkContent);
          navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified">!         headerContent.add(navBar.getContent(true));</span>
<span class="line-modified">!         bodyContents.setHeader(headerContent);</span>
          return bodyTree;
      }
  
      /**
       * Add a link to the tree for all the packages.
</pre>
<center><a href="PackageIndexWriter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PackageUseWriter.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>