<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/TreeWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TagletWriterImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WriterFactoryImpl.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/TreeWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -27,10 +27,12 @@</span>
  
  import java.util.SortedSet;
  
  import javax.lang.model.element.PackageElement;
  
<span class="udiff-line-added">+ import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;</span>
<span class="udiff-line-added">+ import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;</span>
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
  import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
  import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -49,13 +51,10 @@</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="udiff-line-removed">-  *</span>
<span class="udiff-line-removed">-  * @author Atul M Dambalkar</span>
<span class="udiff-line-removed">-  * @author Bhavesh Patel (Modified)</span>
   */
  public class TreeWriter extends AbstractTreeWriter {
  
      /**
       * Packages in this run.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -68,10 +67,12 @@</span>
       */
      private final boolean classesOnly;
  
      private final Navigation navBar;
  
<span class="udiff-line-added">+     protected BodyContents bodyContents;</span>
<span class="udiff-line-added">+ </span>
      /**
       * Constructor to construct TreeWriter object.
       *
       * @param configuration the current configuration of the doclet.
       * @param filename String filename
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -79,11 +80,12 @@</span>
       */
      public TreeWriter(HtmlConfiguration configuration, DocPath filename, ClassTree classtree) {
          super(configuration, filename, classtree);
          packages = configuration.packages;
          classesOnly = packages.isEmpty();
<span class="udiff-line-modified-removed">-         this.navBar = new Navigation(null, configuration, fixedNavDiv, PageMode.TREE, path);</span>
<span class="udiff-line-modified-added">+         this.navBar = new Navigation(null, configuration, PageMode.TREE, path);</span>
<span class="udiff-line-added">+         this.bodyContents = new BodyContents();</span>
      }
  
      /**
       * Create a TreeWriter object and use it to generate the
       * &quot;overview-tree.html&quot; file.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -109,25 +111,27 @@</span>
          Content headContent = contents.hierarchyForAllPackages;
          Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false,
                  HtmlStyle.title, headContent);
          Content div = HtmlTree.DIV(HtmlStyle.header, heading);
          addPackageTreeLinks(div);
<span class="udiff-line-modified-removed">-         HtmlTree htmlTree = HtmlTree.MAIN();</span>
<span class="udiff-line-modified-removed">-         htmlTree.add(div);</span>
<span class="udiff-line-modified-added">+         Content mainContent = new ContentBuilder();</span>
<span class="udiff-line-modified-added">+         mainContent.add(div);</span>
          HtmlTree divTree = new HtmlTree(HtmlTag.DIV);
          divTree.setStyle(HtmlStyle.contentContainer);
          addTree(classtree.baseClasses(), &quot;doclet.Class_Hierarchy&quot;, divTree);
          addTree(classtree.baseInterfaces(), &quot;doclet.Interface_Hierarchy&quot;, divTree);
          addTree(classtree.baseAnnotationTypes(), &quot;doclet.Annotation_Type_Hierarchy&quot;, divTree);
          addTree(classtree.baseEnums(), &quot;doclet.Enum_Hierarchy&quot;, divTree, true);
<span class="udiff-line-modified-removed">-         htmlTree.add(divTree);</span>
<span class="udiff-line-modified-removed">-         body.add(htmlTree);</span>
<span class="udiff-line-removed">-         htmlTree = HtmlTree.FOOTER();</span>
<span class="udiff-line-modified-added">+         mainContent.add(divTree);</span>
<span class="udiff-line-modified-added">+         HtmlTree footerTree = HtmlTree.FOOTER();</span>
          navBar.setUserFooter(getUserHeaderFooter(false));
<span class="udiff-line-modified-removed">-         htmlTree.add(navBar.getContent(false));</span>
<span class="udiff-line-modified-removed">-         addBottom(htmlTree);</span>
<span class="udiff-line-modified-removed">-         body.add(htmlTree);</span>
<span class="udiff-line-modified-added">+         footerTree.add(navBar.getContent(false));</span>
<span class="udiff-line-modified-added">+         addBottom(footerTree);</span>
<span class="udiff-line-modified-added">+         body.add(bodyContents</span>
<span class="udiff-line-added">+                 .addMainContent(mainContent)</span>
<span class="udiff-line-added">+                 .setFooter(footerTree)</span>
<span class="udiff-line-added">+                 .toContent());</span>
          printHtmlDocument(null, &quot;class tree&quot;, body);
      }
  
      /**
       * Add the links to all the package tree files.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -149,11 +153,11 @@</span>
              for (PackageElement pkg : packages) {
                  // If the package name length is 0 or if -nodeprecated option
                  // is set and the package is marked as deprecated, do not include
                  // the page in the list of package hierarchies.
                  if (pkg.isUnnamed() ||
<span class="udiff-line-modified-removed">-                         (configuration.nodeprecated &amp;&amp; utils.isDeprecated(pkg))) {</span>
<span class="udiff-line-modified-added">+                         (options.noDeprecated() &amp;&amp; utils.isDeprecated(pkg))) {</span>
                      i++;
                      continue;
                  }
                  DocPath link = pathString(pkg, DocPaths.PACKAGE_TREE);
                  Content li = HtmlTree.LI(links.createLink(link,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -173,16 +177,16 @@</span>
       *
       * @return a content tree for the tree header
       */
      protected HtmlTree getTreeHeader() {
          String title = resources.getText(&quot;doclet.Window_Class_Hierarchy&quot;);
<span class="udiff-line-modified-removed">-         HtmlTree bodyTree = getBody(true, getWindowTitle(title));</span>
<span class="udiff-line-modified-removed">-         HtmlTree htmlTree = HtmlTree.HEADER();</span>
<span class="udiff-line-modified-removed">-         addTop(htmlTree);</span>
<span class="udiff-line-modified-added">+         HtmlTree bodyTree = getBody(getWindowTitle(title));</span>
<span class="udiff-line-modified-added">+         Content headerContent = new ContentBuilder();</span>
<span class="udiff-line-modified-added">+         addTop(headerContent);</span>
          navBar.setUserHeader(getUserHeaderFooter(true));
<span class="udiff-line-modified-removed">-         htmlTree.add(navBar.getContent(true));</span>
<span class="udiff-line-modified-removed">-         bodyTree.add(htmlTree);</span>
<span class="udiff-line-modified-added">+         headerContent.add(navBar.getContent(true));</span>
<span class="udiff-line-modified-added">+         bodyContents.setHeader(headerContent);</span>
          return bodyTree;
      }
  
      private boolean isUnnamedPackage() {
          return packages.size() == 1 &amp;&amp; packages.first().isUnnamed();
</pre>
<center><a href="TagletWriterImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WriterFactoryImpl.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>