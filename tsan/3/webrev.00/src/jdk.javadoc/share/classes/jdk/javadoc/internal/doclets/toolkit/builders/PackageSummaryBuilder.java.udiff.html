<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/PackageSummaryBuilder.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ModuleSummaryBuilder.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PropertyBuilder.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/PackageSummaryBuilder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -42,13 +42,10 @@</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="udiff-line-removed">-  *</span>
<span class="udiff-line-removed">-  * @author Jamie Ho</span>
<span class="udiff-line-removed">-  * @author Bhavesh Patel (Modified)</span>
   */
  public class PackageSummaryBuilder extends AbstractBuilder {
  
      /**
       * The package being documented.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -58,15 +55,10 @@</span>
      /**
       * The doclet specific writer that will output the result.
       */
      private final PackageSummaryWriter packageWriter;
  
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * The content that will be added to the package summary documentation tree.</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     private Content contentTree;</span>
<span class="udiff-line-removed">- </span>
      /**
       * Construct a new PackageSummaryBuilder.
       *
       * @param context  the build context.
       * @param pkg the package being documented.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -105,47 +97,44 @@</span>
      public void build() throws DocletException {
          if (packageWriter == null) {
              //Doclet does not support this output.
              return;
          }
<span class="udiff-line-modified-removed">-         buildPackageDoc(contentTree);</span>
<span class="udiff-line-modified-added">+         buildPackageDoc();</span>
      }
  
      /**
       * Build the package documentation.
       *
<span class="udiff-line-removed">-      * @param contentTree the content tree to which the documentation will be added</span>
       * @throws DocletException if there is a problem while building the documentation
       */
<span class="udiff-line-modified-removed">-     protected void buildPackageDoc(Content contentTree) throws DocletException {</span>
<span class="udiff-line-modified-removed">-         contentTree = packageWriter.getPackageHeader(utils.getPackageName(packageElement));</span>
<span class="udiff-line-modified-added">+     protected void buildPackageDoc() throws DocletException {</span>
<span class="udiff-line-modified-added">+         Content contentTree = packageWriter.getPackageHeader(utils.getPackageName(packageElement));</span>
  
<span class="udiff-line-modified-removed">-         buildContent(contentTree);</span>
<span class="udiff-line-modified-added">+         buildContent();</span>
  
<span class="udiff-line-modified-removed">-         packageWriter.addPackageFooter(contentTree);</span>
<span class="udiff-line-modified-added">+         packageWriter.addPackageFooter();</span>
          packageWriter.printDocument(contentTree);
          DocFilesHandler docFilesHandler = configuration
                  .getWriterFactory()
                  .getDocFilesHandler(packageElement);
          docFilesHandler.copyDocFiles();
      }
  
      /**
       * Build the content for the package.
       *
<span class="udiff-line-removed">-      * @param contentTree the content tree to which the package contents</span>
<span class="udiff-line-removed">-      *                    will be added</span>
       * @throws DocletException if there is a problem while building the documentation
       */
<span class="udiff-line-modified-removed">-     protected void buildContent(Content contentTree) throws DocletException {</span>
<span class="udiff-line-modified-added">+     protected void buildContent() throws DocletException {</span>
          Content packageContentTree = packageWriter.getContentHeader();
  
          buildPackageDescription(packageContentTree);
          buildPackageTags(packageContentTree);
          buildSummary(packageContentTree);
  
<span class="udiff-line-modified-removed">-         packageWriter.addPackageContent(contentTree, packageContentTree);</span>
<span class="udiff-line-modified-added">+         packageWriter.addPackageContent(packageContentTree);</span>
      }
  
      /**
       * Build the package summary.
       *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -157,15 +146,16 @@</span>
          Content summaryContentTree = packageWriter.getSummaryHeader();
  
          buildInterfaceSummary(summaryContentTree);
          buildClassSummary(summaryContentTree);
          buildEnumSummary(summaryContentTree);
<span class="udiff-line-added">+         buildRecordSummary(summaryContentTree);</span>
          buildExceptionSummary(summaryContentTree);
          buildErrorSummary(summaryContentTree);
          buildAnnotationTypeSummary(summaryContentTree);
  
<span class="udiff-line-modified-removed">-         packageContentTree.add(summaryContentTree);</span>
<span class="udiff-line-modified-added">+         packageContentTree.add(packageWriter.getPackageSummary(summaryContentTree));</span>
      }
  
      /**
       * Build the summary for the interfaces in this package.
       *
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -174,11 +164,11 @@</span>
       */
      protected void buildInterfaceSummary(Content summaryContentTree) {
          SortedSet&lt;TypeElement&gt; ilist = utils.isSpecified(packageElement)
                          ? utils.getTypeElementsAsSortedSet(utils.getInterfaces(packageElement))
                          : configuration.typeElementCatalog.interfaces(packageElement);
<span class="udiff-line-modified-removed">-         SortedSet&lt;TypeElement&gt; interfaces = utils.filterOutPrivateClasses(ilist, configuration.javafx);</span>
<span class="udiff-line-modified-added">+         SortedSet&lt;TypeElement&gt; interfaces = utils.filterOutPrivateClasses(ilist, options.javafx());</span>
          if (!interfaces.isEmpty()) {
              packageWriter.addInterfaceSummary(interfaces, summaryContentTree);
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -190,11 +180,11 @@</span>
       */
      protected void buildClassSummary(Content summaryContentTree) {
          SortedSet&lt;TypeElement&gt; clist = utils.isSpecified(packageElement)
              ? utils.getTypeElementsAsSortedSet(utils.getOrdinaryClasses(packageElement))
              : configuration.typeElementCatalog.ordinaryClasses(packageElement);
<span class="udiff-line-modified-removed">-         SortedSet&lt;TypeElement&gt; classes = utils.filterOutPrivateClasses(clist, configuration.javafx);</span>
<span class="udiff-line-modified-added">+         SortedSet&lt;TypeElement&gt; classes = utils.filterOutPrivateClasses(clist, options.javafx());</span>
          if (!classes.isEmpty()) {
              packageWriter.addClassSummary(classes, summaryContentTree);
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -206,16 +196,32 @@</span>
       */
      protected void buildEnumSummary(Content summaryContentTree) {
          SortedSet&lt;TypeElement&gt; elist = utils.isSpecified(packageElement)
              ? utils.getTypeElementsAsSortedSet(utils.getEnums(packageElement))
              : configuration.typeElementCatalog.enums(packageElement);
<span class="udiff-line-modified-removed">-         SortedSet&lt;TypeElement&gt; enums = utils.filterOutPrivateClasses(elist, configuration.javafx);</span>
<span class="udiff-line-modified-added">+         SortedSet&lt;TypeElement&gt; enums = utils.filterOutPrivateClasses(elist, options.javafx());</span>
          if (!enums.isEmpty()) {
              packageWriter.addEnumSummary(enums, summaryContentTree);
          }
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Build the summary for the records in this package.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @param summaryContentTree the summary tree to which the record summary will</span>
<span class="udiff-line-added">+      *                           be added</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     protected void buildRecordSummary(Content summaryContentTree) {</span>
<span class="udiff-line-added">+         SortedSet&lt;TypeElement&gt; rlist = utils.isSpecified(packageElement)</span>
<span class="udiff-line-added">+                 ? utils.getTypeElementsAsSortedSet(utils.getRecords(packageElement))</span>
<span class="udiff-line-added">+                 : configuration.typeElementCatalog.records(packageElement);</span>
<span class="udiff-line-added">+         SortedSet&lt;TypeElement&gt; records = utils.filterOutPrivateClasses(rlist, options.javafx());</span>
<span class="udiff-line-added">+         if (!records.isEmpty()) {</span>
<span class="udiff-line-added">+             packageWriter.addRecordSummary(records, summaryContentTree);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      /**
       * Build the summary for the exceptions in this package.
       *
       * @param summaryContentTree the summary tree to which the exception summary will
       *                           be added
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -224,11 +230,11 @@</span>
          Set&lt;TypeElement&gt; iexceptions =
              utils.isSpecified(packageElement)
                  ? utils.getTypeElementsAsSortedSet(utils.getExceptions(packageElement))
                  : configuration.typeElementCatalog.exceptions(packageElement);
          SortedSet&lt;TypeElement&gt; exceptions = utils.filterOutPrivateClasses(iexceptions,
<span class="udiff-line-modified-removed">-                 configuration.javafx);</span>
<span class="udiff-line-modified-added">+                 options.javafx());</span>
          if (!exceptions.isEmpty()) {
              packageWriter.addExceptionSummary(exceptions, summaryContentTree);
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -241,11 +247,11 @@</span>
      protected void buildErrorSummary(Content summaryContentTree) {
          Set&lt;TypeElement&gt; ierrors =
              utils.isSpecified(packageElement)
                  ? utils.getTypeElementsAsSortedSet(utils.getErrors(packageElement))
                  : configuration.typeElementCatalog.errors(packageElement);
<span class="udiff-line-modified-removed">-         SortedSet&lt;TypeElement&gt; errors = utils.filterOutPrivateClasses(ierrors, configuration.javafx);</span>
<span class="udiff-line-modified-added">+         SortedSet&lt;TypeElement&gt; errors = utils.filterOutPrivateClasses(ierrors, options.javafx());</span>
          if (!errors.isEmpty()) {
              packageWriter.addErrorSummary(errors, summaryContentTree);
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -259,11 +265,11 @@</span>
          SortedSet&lt;TypeElement&gt; iannotationTypes =
              utils.isSpecified(packageElement)
                  ? utils.getTypeElementsAsSortedSet(utils.getAnnotationTypes(packageElement))
                  : configuration.typeElementCatalog.annotationTypes(packageElement);
          SortedSet&lt;TypeElement&gt; annotationTypes = utils.filterOutPrivateClasses(iannotationTypes,
<span class="udiff-line-modified-removed">-                 configuration.javafx);</span>
<span class="udiff-line-modified-added">+                 options.javafx());</span>
          if (!annotationTypes.isEmpty()) {
              packageWriter.addAnnotationTypeSummary(annotationTypes, summaryContentTree);
          }
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -272,11 +278,11 @@</span>
       *
       * @param packageContentTree the tree to which the package description will
       *                           be added
       */
      protected void buildPackageDescription(Content packageContentTree) {
<span class="udiff-line-modified-removed">-         if (configuration.nocomment) {</span>
<span class="udiff-line-modified-added">+         if (options.noComment()) {</span>
              return;
          }
          packageWriter.addPackageDescription(packageContentTree);
      }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -284,11 +290,11 @@</span>
       * Build the tags of the summary.
       *
       * @param packageContentTree the tree to which the package tags will be added
       */
      protected void buildPackageTags(Content packageContentTree) {
<span class="udiff-line-modified-removed">-         if (configuration.nocomment) {</span>
<span class="udiff-line-modified-added">+         if (options.noComment()) {</span>
              return;
          }
          packageWriter.addPackageTags(packageContentTree);
      }
  }
</pre>
<center><a href="ModuleSummaryBuilder.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PropertyBuilder.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>