<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/PackageIndexWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="NestedClassWriterImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PackageTreeWriter.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/PackageIndexWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -31,32 +31,31 @@</span>
  
  import javax.lang.model.element.PackageElement;
  
  import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
<span class="udiff-line-removed">- import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;</span>
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
  import jdk.javadoc.internal.doclets.toolkit.Content;
  import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
  import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
  import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
  import jdk.javadoc.internal.doclets.toolkit.util.Group;
  
  /**
<span class="udiff-line-modified-removed">-  * Generate the package index page &quot;overview-summary.html&quot; for the right-hand</span>
<span class="udiff-line-removed">-  * frame. A click on the package name on this page will update the same frame</span>
<span class="udiff-line-removed">-  * with the &quot;package-summary.html&quot; file for the clicked package.</span>
<span class="udiff-line-modified-added">+  * Generate the package index page &quot;index.html&quot;.</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="udiff-line-removed">-  *</span>
<span class="udiff-line-removed">-  * @author Atul M Dambalkar</span>
<span class="udiff-line-removed">-  * @author Bhavesh Patel (Modified)</span>
   */
<span class="udiff-line-modified-removed">- public class PackageIndexWriter extends AbstractPackageIndexWriter {</span>
<span class="udiff-line-modified-added">+ public class PackageIndexWriter extends AbstractOverviewIndexWriter {</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * A Set of Packages to be documented.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     protected SortedSet&lt;PackageElement&gt; packages;</span>
  
      /**
       * Construct the PackageIndexWriter. Also constructs the grouping
       * information as provided on the command line by &quot;-group&quot; option. Stores
       * the order of groups specified by the user.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -65,41 +64,32 @@</span>
       * @param filename the path of the page to be generated
       * @see Group
       */
      public PackageIndexWriter(HtmlConfiguration configuration, DocPath filename) {
          super(configuration, filename);
<span class="udiff-line-added">+         packages = configuration.packages;</span>
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Generate the package index page for the right-hand frame.</span>
<span class="udiff-line-modified-added">+      * Generate the package index page.</span>
       *
       * @param configuration the current configuration of the doclet.
       * @throws DocFileIOException if there is a problem generating the package index page
       */
      public static void generate(HtmlConfiguration configuration) throws DocFileIOException {
<span class="udiff-line-modified-removed">-         DocPath filename = DocPaths.overviewSummary(configuration.frames);</span>
<span class="udiff-line-modified-added">+         DocPath filename = DocPaths.INDEX;</span>
          PackageIndexWriter packgen = new PackageIndexWriter(configuration, filename);
<span class="udiff-line-modified-removed">-         packgen.buildPackageIndexFile(&quot;doclet.Window_Overview_Summary&quot;, &quot;package index&quot;, true);</span>
<span class="udiff-line-modified-added">+         packgen.buildOverviewIndexFile(&quot;doclet.Window_Overview_Summary&quot;, &quot;package index&quot;);</span>
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Depending upon the grouping information and their titles, add</span>
<span class="udiff-line-removed">-      * separate table indices for each package group.</span>
<span class="udiff-line-modified-added">+      * Adds the packages list to the documentation tree.</span>
       *
<span class="udiff-line-removed">-      * @param header the documentation tree to which the navigational links will be added</span>
       * @param main the documentation tree to which the packages list will be added
       */
      @Override
<span class="udiff-line-modified-removed">-     protected void addIndex(Content header, Content main) {</span>
<span class="udiff-line-removed">-         addIndexContents(header, main);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * {@inheritDoc}</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     @Override</span>
<span class="udiff-line-removed">-     protected void addPackagesList(Content main) {</span>
<span class="udiff-line-modified-added">+     protected void addIndex(Content main) {</span>
          Map&lt;String, SortedSet&lt;PackageElement&gt;&gt; groupPackageMap
                  = configuration.group.groupPackages(packages);
  
          if (!groupPackageMap.keySet().isEmpty()) {
              Table table =  new Table(HtmlStyle.overviewSummary)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -117,11 +107,11 @@</span>
                  }
              }
  
              for (PackageElement pkg : configuration.packages) {
                  if (!pkg.isUnnamed()) {
<span class="udiff-line-modified-removed">-                     if (!(configuration.nodeprecated &amp;&amp; utils.isDeprecated(pkg))) {</span>
<span class="udiff-line-modified-added">+                     if (!(options.noDeprecated() &amp;&amp; utils.isDeprecated(pkg))) {</span>
                          Content packageLinkContent = getPackageLink(pkg, getPackageName(pkg));
                          Content summaryContent = new ContentBuilder();
                          addSummaryComment(pkg, summaryContent);
                          table.addRow(pkg, packageLinkContent, summaryContent);
                      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -134,64 +124,6 @@</span>
              if (table.needsScript()) {
                  getMainBodyScript().append(table.getScript());
              }
          }
      }
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * Adds the overview summary comment for this documentation. Add one line</span>
<span class="udiff-line-removed">-      * summary at the top of the page and generate a link to the description,</span>
<span class="udiff-line-removed">-      * which is added at the end of this page.</span>
<span class="udiff-line-removed">-      *</span>
<span class="udiff-line-removed">-      * @param main the documentation tree to which the overview header will be added</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     @Override</span>
<span class="udiff-line-removed">-     protected void addOverviewHeader(Content main) {</span>
<span class="udiff-line-removed">-         addConfigurationTitle(main);</span>
<span class="udiff-line-removed">-         if (!utils.getFullBody(configuration.overviewElement).isEmpty()) {</span>
<span class="udiff-line-removed">-             HtmlTree div = new HtmlTree(HtmlTag.DIV);</span>
<span class="udiff-line-removed">-             div.setStyle(HtmlStyle.contentContainer);</span>
<span class="udiff-line-removed">-             addOverviewComment(div);</span>
<span class="udiff-line-removed">-             main.add(div);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * Adds the overview comment as provided in the file specified by the</span>
<span class="udiff-line-removed">-      * &quot;-overview&quot; option on the command line.</span>
<span class="udiff-line-removed">-      *</span>
<span class="udiff-line-removed">-      * @param htmltree the documentation tree to which the overview comment will</span>
<span class="udiff-line-removed">-      *                 be added</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     protected void addOverviewComment(Content htmltree) {</span>
<span class="udiff-line-removed">-         if (!utils.getFullBody(configuration.overviewElement).isEmpty()) {</span>
<span class="udiff-line-removed">-             addInlineComment(configuration.overviewElement, htmltree);</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * Adds the top text (from the -top option), the upper</span>
<span class="udiff-line-removed">-      * navigation bar, and then the title (from the&quot;-title&quot;</span>
<span class="udiff-line-removed">-      * option), at the top of page.</span>
<span class="udiff-line-removed">-      *</span>
<span class="udiff-line-removed">-      * @param header the documentation tree to which the navigation bar header will be added</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     @Override</span>
<span class="udiff-line-removed">-     protected void addNavigationBarHeader(Content header) {</span>
<span class="udiff-line-removed">-         addTop(header);</span>
<span class="udiff-line-removed">-         navBar.setUserHeader(getUserHeaderFooter(true));</span>
<span class="udiff-line-removed">-         header.add(navBar.getContent(true));</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * Adds the lower navigation bar and the bottom text</span>
<span class="udiff-line-removed">-      * (from the -bottom option) at the bottom of page.</span>
<span class="udiff-line-removed">-      *</span>
<span class="udiff-line-removed">-      * @param footer the documentation tree to which the navigation bar footer will be added</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     @Override</span>
<span class="udiff-line-removed">-     protected void addNavigationBarFooter(Content footer) {</span>
<span class="udiff-line-removed">-         navBar.setUserFooter(getUserHeaderFooter(false));</span>
<span class="udiff-line-removed">-         footer.add(navBar.getContent(false));</span>
<span class="udiff-line-removed">-         addBottom(footer);</span>
<span class="udiff-line-removed">-     }</span>
  }
</pre>
<center><a href="NestedClassWriterImpl.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="PackageTreeWriter.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>