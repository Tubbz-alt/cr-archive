<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/ConstantsSummaryBuilder.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ClassBuilder.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ConstructorBuilder.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/builders/ConstantsSummaryBuilder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 44,13 ***</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="line-removed">-  *</span>
<span class="line-removed">-  * @author Jamie Ho</span>
<span class="line-removed">-  * @author Bhavesh Patel (Modified)</span>
   */
  public class ConstantsSummaryBuilder extends AbstractBuilder {
  
      /**
       * The maximum number of package directories shown in the constant
<span class="line-new-header">--- 44,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 81,15 ***</span>
      /**
       * The current class being documented.
       */
      private TypeElement currentClass;
  
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * The content tree for the constant summary documentation.</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     private Content contentTree;</span>
<span class="line-removed">- </span>
      /**
       * True if first package is listed.
       */
      private boolean first = true;
  
<span class="line-new-header">--- 78,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 117,62 ***</span>
      public static ConstantsSummaryBuilder getInstance(Context context,
              ConstantsSummaryWriter writer) {
          return new ConstantsSummaryBuilder(context, writer);
      }
  
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * {@inheritDoc}</span>
<span class="line-removed">-      * @throws DocletException if there is a problem while building the documentation</span>
<span class="line-removed">-      */</span>
      @Override
      public void build() throws DocletException {
          if (writer == null) {
              //Doclet does not support this output.
              return;
          }
<span class="line-modified">!         buildConstantSummary(contentTree);</span>
      }
  
      /**
       * Build the constant summary.
       *
<span class="line-removed">-      * @param contentTree the content tree to which the documentation will be added</span>
       * @throws DocletException if there is a problem while building the documentation
       */
<span class="line-modified">!     protected void buildConstantSummary(Content contentTree) throws DocletException {</span>
<span class="line-modified">!         contentTree = writer.getHeader();</span>
  
<span class="line-modified">!         buildContents(contentTree);</span>
<span class="line-modified">!         buildConstantSummaries(contentTree);</span>
  
<span class="line-modified">!         writer.addFooter(contentTree);</span>
          writer.printDocument(contentTree);
      }
  
      /**
       * Build the list of packages.
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param contentTree the content tree to which the content list will be added</span>
       */
<span class="line-modified">!     protected void buildContents(Content contentTree) {</span>
          Content contentListTree = writer.getContentsHeader();
          printedPackageHeaders.clear();
          for (PackageElement pkg : configuration.packages) {
              if (hasConstantField(pkg) &amp;&amp; !hasPrintedPackageIndex(pkg)) {
                  writer.addLinkToPackageContent(pkg, printedPackageHeaders, contentListTree);
              }
          }
<span class="line-modified">!         writer.addContentsList(contentTree, contentListTree);</span>
      }
  
      /**
       * Build the summary for each documented package.
       *
<span class="line-removed">-      * @param contentTree the tree to which the summaries will be added</span>
       * @throws DocletException if there is a problem while building the documentation
       */
<span class="line-modified">!     protected void buildConstantSummaries(Content contentTree) throws DocletException {</span>
          printedPackageHeaders.clear();
          Content summariesTree = writer.getConstantSummaries();
          for (PackageElement aPackage : configuration.packages) {
              if (hasConstantField(aPackage)) {
                  currentPackage = aPackage;
<span class="line-new-header">--- 109,54 ---</span>
      public static ConstantsSummaryBuilder getInstance(Context context,
              ConstantsSummaryWriter writer) {
          return new ConstantsSummaryBuilder(context, writer);
      }
  
      @Override
      public void build() throws DocletException {
          if (writer == null) {
              //Doclet does not support this output.
              return;
          }
<span class="line-modified">!         buildConstantSummary();</span>
      }
  
      /**
       * Build the constant summary.
       *
       * @throws DocletException if there is a problem while building the documentation
       */
<span class="line-modified">!     protected void buildConstantSummary() throws DocletException {</span>
<span class="line-modified">!         Content contentTree = writer.getHeader();</span>
  
<span class="line-modified">!         buildContents();</span>
<span class="line-modified">!         buildConstantSummaries();</span>
  
<span class="line-modified">!         writer.addFooter();</span>
          writer.printDocument(contentTree);
      }
  
      /**
       * Build the list of packages.
       */
<span class="line-modified">!     protected void buildContents() {</span>
          Content contentListTree = writer.getContentsHeader();
          printedPackageHeaders.clear();
          for (PackageElement pkg : configuration.packages) {
              if (hasConstantField(pkg) &amp;&amp; !hasPrintedPackageIndex(pkg)) {
                  writer.addLinkToPackageContent(pkg, printedPackageHeaders, contentListTree);
              }
          }
<span class="line-modified">!         writer.addContentsList(contentListTree);</span>
      }
  
      /**
       * Build the summary for each documented package.
       *
       * @throws DocletException if there is a problem while building the documentation
       */
<span class="line-modified">!     protected void buildConstantSummaries() throws DocletException {</span>
          printedPackageHeaders.clear();
          Content summariesTree = writer.getConstantSummaries();
          for (PackageElement aPackage : configuration.packages) {
              if (hasConstantField(aPackage)) {
                  currentPackage = aPackage;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 182,11 ***</span>
                  buildClassConstantSummary(summariesTree);
  
                  first = false;
              }
          }
<span class="line-modified">!         writer.addConstantSummaries(contentTree, summariesTree);</span>
      }
  
      /**
       * Build the header for the given package.
       *
<span class="line-new-header">--- 166,11 ---</span>
                  buildClassConstantSummary(summariesTree);
  
                  first = false;
              }
          }
<span class="line-modified">!         writer.addConstantSummaries(summariesTree);</span>
      }
  
      /**
       * Build the header for the given package.
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 290,12 ***</span>
          return false;
      }
  
      /**
       * Print the table of constants.
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @author Jamie Ho</span>
       */
      private class ConstantFieldBuilder {
  
          /**
           * The typeElement that we are examining constants for.
<span class="line-new-header">--- 274,10 ---</span>
</pre>
<center><a href="ClassBuilder.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ConstructorBuilder.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>