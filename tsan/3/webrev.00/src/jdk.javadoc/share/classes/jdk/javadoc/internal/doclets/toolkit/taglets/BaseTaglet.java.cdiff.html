<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/taglets/BaseTaglet.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BasePropertyTaglet.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="CodeTaglet.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/taglets/BaseTaglet.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2003, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 27,132 ***</span>
  
  import java.util.Set;
  import javax.lang.model.element.Element;
  
  import com.sun.source.doctree.DocTree;
  import jdk.javadoc.internal.doclets.toolkit.Content;
  
  /**
   * A base class that implements the {@link Taglet} interface.
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="line-removed">-  *</span>
<span class="line-removed">-  * @author Jamie Ho</span>
   */
  public class BaseTaglet implements Taglet {
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * The different kinds of place where any given tag may be used.</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     enum Site {</span>
<span class="line-removed">-         OVERVIEW, MODULE, PACKAGE, TYPE, CONSTRUCTOR, METHOD, FIELD</span>
<span class="line-removed">-     }</span>
  
      protected final String name;
      private final boolean inline;
<span class="line-modified">!     private final Set&lt;Site&gt; sites;</span>
  
<span class="line-modified">!     BaseTaglet(String name, boolean inline, Set&lt;Site&gt; sites) {</span>
          this.name = name;
          this.inline = inline;
          this.sites = sites;
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in constructor documentation.
       * @return true if this {@code Taglet} can be used in constructor documentation and false
       * otherwise.
       */
      public final boolean inConstructor() {
<span class="line-modified">!         return sites.contains(Site.CONSTRUCTOR);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in field documentation.
       * @return true if this {@code Taglet} can be used in field documentation and false
       * otherwise.
       */
      public final boolean inField() {
<span class="line-modified">!         return  sites.contains(Site.FIELD);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in method documentation.
       * @return true if this {@code Taglet} can be used in method documentation and false
       * otherwise.
       */
      public final boolean inMethod() {
<span class="line-modified">!         return  sites.contains(Site.METHOD);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in overview documentation.
       * @return true if this {@code Taglet} can be used in method documentation and false
       * otherwise.
       */
      public final boolean inOverview() {
<span class="line-modified">!         return  sites.contains(Site.OVERVIEW);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in module documentation.
       * @return true if this {@code Taglet} can be used in module documentation and false
       * otherwise.
       */
      public final boolean inModule() {
<span class="line-modified">!         return  sites.contains(Site.MODULE);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in package documentation.
       * @return true if this {@code Taglet} can be used in package documentation and false
       * otherwise.
       */
      public final boolean inPackage() {
<span class="line-modified">!         return  sites.contains(Site.PACKAGE);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in type documentation (classes or interfaces).
       * @return true if this {@code Taglet} can be used in type documentation and false
       * otherwise.
       */
      public final boolean inType() {
<span class="line-modified">!         return  sites.contains(Site.TYPE);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} is an inline tag.
       * @return true if this {@code Taglet} represents an inline tag and false otherwise.
       */
      public final boolean isInlineTag() {
          return inline;
      }
  
      /**
       * Returns the name of this tag.
       * @return the name of this tag.
       */
      public String getName() {
          return name;
      }
  
      /**
       * {@inheritDoc}
<span class="line-modified">!      * @throws UnsupportedTagletOperationException thrown when the method is</span>
<span class="line-modified">!      *         not supported by the taglet.</span>
       */
      public Content getTagletOutput(Element element, DocTree tag, TagletWriter writer) {
          throw new UnsupportedTagletOperationException(&quot;Method not supported in taglet &quot; + getName() + &quot;.&quot;);
      }
  
      /**
       * {@inheritDoc}
<span class="line-modified">!      * @throws UnsupportedTagletOperationException thrown when the method is not</span>
<span class="line-modified">!      *         supported by the taglet.</span>
       */
      public Content getTagletOutput(Element holder, TagletWriter writer) {
          throw new UnsupportedTagletOperationException(&quot;Method not supported in taglet &quot; + getName() + &quot;.&quot;);
      }
  }
<span class="line-new-header">--- 27,184 ---</span>
  
  import java.util.Set;
  import javax.lang.model.element.Element;
  
  import com.sun.source.doctree.DocTree;
<span class="line-added">+ import com.sun.source.doctree.UnknownBlockTagTree;</span>
<span class="line-added">+ import jdk.javadoc.doclet.Taglet.Location;</span>
  import jdk.javadoc.internal.doclets.toolkit.Content;
  
  /**
   * A base class that implements the {@link Taglet} interface.
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
   */
  public class BaseTaglet implements Taglet {
  
<span class="line-added">+     protected final DocTree.Kind tagKind;</span>
      protected final String name;
      private final boolean inline;
<span class="line-modified">!     private final Set&lt;Location&gt; sites;</span>
  
<span class="line-modified">!     BaseTaglet(DocTree.Kind tagKind, boolean inline, Set&lt;Location&gt; sites) {</span>
<span class="line-added">+         this.tagKind = tagKind;</span>
<span class="line-added">+         this.name = tagKind.tagName;</span>
<span class="line-added">+         this.inline = inline;</span>
<span class="line-added">+         this.sites = sites;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     BaseTaglet(String name, boolean inline, Set&lt;Location&gt; sites) {</span>
<span class="line-added">+         this.tagKind = inline ? DocTree.Kind.UNKNOWN_INLINE_TAG : DocTree.Kind.UNKNOWN_BLOCK_TAG;</span>
          this.name = name;
          this.inline = inline;
          this.sites = sites;
      }
  
<span class="line-added">+     @Override</span>
<span class="line-added">+     public Set&lt;Location&gt; getAllowedLocations() {</span>
<span class="line-added">+         return sites;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      /**
       * Returns true if this {@code Taglet} can be used in constructor documentation.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in constructor documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inConstructor() {
<span class="line-modified">!         return sites.contains(Location.CONSTRUCTOR);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in field documentation.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in field documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inField() {
<span class="line-modified">!         return sites.contains(Location.FIELD);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in method documentation.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in method documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inMethod() {
<span class="line-modified">!         return sites.contains(Location.METHOD);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in overview documentation.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in method documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inOverview() {
<span class="line-modified">!         return sites.contains(Location.OVERVIEW);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in module documentation.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in module documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inModule() {
<span class="line-modified">!         return sites.contains(Location.MODULE);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in package documentation.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in package documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inPackage() {
<span class="line-modified">!         return sites.contains(Location.PACKAGE);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} can be used in type documentation (classes or interfaces).
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} can be used in type documentation and false
       * otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean inType() {
<span class="line-modified">!         return sites.contains(Location.TYPE);</span>
      }
  
      /**
       * Returns true if this {@code Taglet} is an inline tag.
<span class="line-added">+      *</span>
       * @return true if this {@code Taglet} represents an inline tag and false otherwise.
       */
<span class="line-added">+     @Override</span>
      public final boolean isInlineTag() {
          return inline;
      }
  
<span class="line-added">+     /**</span>
<span class="line-added">+      * Returns the kind of trees recognized by this taglet.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @return the kind of trees recognized by this taglet</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public DocTree.Kind getTagKind() {</span>
<span class="line-added">+         return tagKind;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      /**
       * Returns the name of this tag.
<span class="line-added">+      *</span>
       * @return the name of this tag.
       */
<span class="line-added">+     @Override</span>
      public String getName() {
          return name;
      }
  
<span class="line-added">+     /**</span>
<span class="line-added">+      * Returns whether or not this taglet accepts a {@code DocTree} node.</span>
<span class="line-added">+      * The taglet accepts a tree node if it has the same kind, and</span>
<span class="line-added">+      * if the kind is {@code UNKNOWN_BLOCK_TAG} the same tag name.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @param tree the tree node</span>
<span class="line-added">+      * @return {@code true} if this taglet accepts this tree node.</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public boolean accepts(DocTree tree) {</span>
<span class="line-added">+         return (tree.getKind() == DocTree.Kind.UNKNOWN_BLOCK_TAG</span>
<span class="line-added">+                     &amp;&amp; tagKind == DocTree.Kind.UNKNOWN_BLOCK_TAG)</span>
<span class="line-added">+                 ? ((UnknownBlockTagTree) tree).getTagName().equals(name)</span>
<span class="line-added">+                 : tree.getKind() == tagKind;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      /**
       * {@inheritDoc}
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @implSpec This implementation throws {@link UnsupportedTagletOperationException}.</span>
       */
<span class="line-added">+     @Override</span>
      public Content getTagletOutput(Element element, DocTree tag, TagletWriter writer) {
          throw new UnsupportedTagletOperationException(&quot;Method not supported in taglet &quot; + getName() + &quot;.&quot;);
      }
  
      /**
       * {@inheritDoc}
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @implSpec This implementation throws {@link UnsupportedTagletOperationException}</span>
       */
<span class="line-added">+     @Override</span>
      public Content getTagletOutput(Element holder, TagletWriter writer) {
          throw new UnsupportedTagletOperationException(&quot;Method not supported in taglet &quot; + getName() + &quot;.&quot;);
      }
  }
</pre>
<center><a href="BasePropertyTaglet.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="CodeTaglet.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>