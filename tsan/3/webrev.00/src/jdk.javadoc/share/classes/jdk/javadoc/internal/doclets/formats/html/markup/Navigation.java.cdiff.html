<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/markup/Navigation.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Links.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="RawHtml.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/markup/Navigation.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 22,16 ***</span>
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  package jdk.javadoc.internal.doclets.formats.html.markup;
  
<span class="line-removed">- import java.util.ArrayDeque;</span>
  import java.util.ArrayList;
<span class="line-removed">- import java.util.Deque;</span>
<span class="line-removed">- import java.util.HashMap;</span>
  import java.util.List;
<span class="line-removed">- import java.util.Map;</span>
  import java.util.Set;
  import java.util.SortedSet;
  
  import javax.lang.model.element.Element;
  import javax.lang.model.element.ElementKind;
<span class="line-new-header">--- 22,12 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 40,10 ***</span>
<span class="line-new-header">--- 36,11 ---</span>
  import javax.lang.model.element.TypeElement;
  
  import jdk.javadoc.internal.doclets.formats.html.AbstractMemberWriter;
  import jdk.javadoc.internal.doclets.formats.html.Contents;
  import jdk.javadoc.internal.doclets.formats.html.HtmlConfiguration;
<span class="line-added">+ import jdk.javadoc.internal.doclets.formats.html.HtmlOptions;</span>
  import jdk.javadoc.internal.doclets.formats.html.MarkerComments;
  import jdk.javadoc.internal.doclets.formats.html.SectionName;
  import jdk.javadoc.internal.doclets.toolkit.Content;
  import jdk.javadoc.internal.doclets.toolkit.builders.MemberSummaryBuilder;
  import jdk.javadoc.internal.doclets.toolkit.util.DocFile;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 63,33 ***</span>
   * notice.&lt;/b&gt;
   */
  public class Navigation {
  
      private final HtmlConfiguration configuration;
      private final Element element;
      private final Contents contents;
      private final DocPath path;
      private final DocPath pathToRoot;
      private final Links links;
<span class="line-removed">-     private final HtmlTree fixedNavDiv;</span>
      private final PageMode documentedPage;
      private Content navLinkModule;
      private Content navLinkPackage;
      private Content navLinkClass;
      private MemberSummaryBuilder memberSummaryBuilder;
      private boolean displaySummaryModuleDescLink;
      private boolean displaySummaryModulesLink;
      private boolean displaySummaryPackagesLink;
      private boolean displaySummaryServicesLink;
<span class="line-removed">-     private final Map&lt;Position, Deque&lt;Content&gt;&gt; topBottomNavContents;</span>
      private Content userHeader;
      private Content userFooter;
      private final String rowListTitle;
      private final Content searchLabel;
<span class="line-modified">!     private static final Script FIXED_NAV_SCRIPT = new Script(&quot;&lt;!--\n&quot;</span>
<span class="line-modified">!             + &quot;$(&#39;.navPadding&#39;).css(&#39;padding-top&#39;, $(&#39;.fixedNav&#39;).css(\&quot;height\&quot;));\n&quot;</span>
<span class="line-removed">-             + &quot;//--&gt;\n&quot;);</span>
  
      public enum PageMode {
          ALLCLASSES,
          ALLPACKAGES,
          CLASS,
<span class="line-new-header">--- 60,31 ---</span>
   * notice.&lt;/b&gt;
   */
  public class Navigation {
  
      private final HtmlConfiguration configuration;
<span class="line-added">+     private final HtmlOptions options;</span>
      private final Element element;
      private final Contents contents;
      private final DocPath path;
      private final DocPath pathToRoot;
      private final Links links;
      private final PageMode documentedPage;
      private Content navLinkModule;
      private Content navLinkPackage;
      private Content navLinkClass;
      private MemberSummaryBuilder memberSummaryBuilder;
      private boolean displaySummaryModuleDescLink;
      private boolean displaySummaryModulesLink;
      private boolean displaySummaryPackagesLink;
      private boolean displaySummaryServicesLink;
      private Content userHeader;
      private Content userFooter;
      private final String rowListTitle;
      private final Content searchLabel;
<span class="line-modified">! </span>
<span class="line-modified">!     private static final Content EMPTY_COMMENT = new Comment(&quot; &quot;);</span>
  
      public enum PageMode {
          ALLCLASSES,
          ALLPACKAGES,
          CLASS,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 100,10 ***</span>
<span class="line-new-header">--- 95,11 ---</span>
          INDEX,
          MODULE,
          OVERVIEW,
          PACKAGE,
          SERIALIZEDFORM,
<span class="line-added">+         SYSTEMPROPERTIES,</span>
          TREE,
          USE;
      }
  
      enum Position {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 131,59 ***</span>
       * Creates a {@code Navigation} object for a specific file, to be written in a specific HTML
       * version.
       *
       * @param element element being documented. null if its not an element documentation page
       * @param configuration the configuration object
<span class="line-removed">-      * @param fixedNavDiv the fixed navigation for the header navigation</span>
       * @param page the kind of page being documented
       * @param path the DocPath object
       */
<span class="line-modified">!     public Navigation(Element element, HtmlConfiguration configuration, HtmlTree fixedNavDiv,</span>
<span class="line-removed">-             PageMode page, DocPath path) {</span>
          this.configuration = configuration;
          this.element = element;
<span class="line-removed">-         this.fixedNavDiv = fixedNavDiv;</span>
          this.contents = configuration.contents;
          this.documentedPage = page;
          this.path = path;
          this.pathToRoot = path.parent().invert();
          this.links = new Links(path);
<span class="line-modified">!         this.topBottomNavContents = new HashMap&lt;&gt;();</span>
<span class="line-removed">-         this.rowListTitle = configuration.getResources().getText(&quot;doclet.Navigation&quot;);</span>
          this.searchLabel = contents.getContent(&quot;doclet.search&quot;);
<span class="line-removed">-         populateNavContents(Position.TOP);</span>
<span class="line-removed">-         populateNavContents(Position.BOTTOM);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Populate the navigation contents for top and bottom navigation</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param position the position of the navigation bar on the page</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     private void populateNavContents(Position position) {</span>
<span class="line-removed">-         Deque&lt;Content&gt; queue = new ArrayDeque&lt;&gt;();</span>
<span class="line-removed">-         Content skipNavLinks = contents.getContent(&quot;doclet.Skip_navigation_links&quot;);</span>
<span class="line-removed">-         switch (position) {</span>
<span class="line-removed">-             case TOP:</span>
<span class="line-removed">-                 queue.addLast(links.createAnchor(SectionName.NAVBAR_TOP));</span>
<span class="line-removed">-                 queue.addLast(links.createLink(SectionName.SKIP_NAVBAR_TOP, skipNavLinks,</span>
<span class="line-removed">-                         skipNavLinks.toString(), &quot;&quot;));</span>
<span class="line-removed">-                 queue.addLast(links.createAnchor(SectionName.NAVBAR_TOP_FIRSTROW));</span>
<span class="line-removed">-                 queue.addLast(links.createAnchor(SectionName.SKIP_NAVBAR_TOP));</span>
<span class="line-removed">-                 topBottomNavContents.put(position, queue);</span>
<span class="line-removed">-                 break;</span>
<span class="line-removed">-             case BOTTOM:</span>
<span class="line-removed">-                 queue.addLast(links.createAnchor(SectionName.NAVBAR_BOTTOM));</span>
<span class="line-removed">-                 queue.addLast(links.createLink(SectionName.SKIP_NAVBAR_BOTTOM, skipNavLinks,</span>
<span class="line-removed">-                         skipNavLinks.toString(), &quot;&quot;));</span>
<span class="line-removed">-                 queue.addLast(links.createAnchor(SectionName.NAVBAR_BOTTOM_FIRSTROW));</span>
<span class="line-removed">-                 queue.addLast(links.createAnchor(SectionName.SKIP_NAVBAR_BOTTOM));</span>
<span class="line-removed">-                 topBottomNavContents.put(position, queue);</span>
<span class="line-removed">-                 break;</span>
<span class="line-removed">-             default:</span>
<span class="line-removed">-                 break;</span>
<span class="line-removed">-         }</span>
      }
  
      public Navigation setNavLinkModule(Content navLinkModule) {
          this.navLinkModule = navLinkModule;
          return this;
<span class="line-new-header">--- 127,24 ---</span>
       * Creates a {@code Navigation} object for a specific file, to be written in a specific HTML
       * version.
       *
       * @param element element being documented. null if its not an element documentation page
       * @param configuration the configuration object
       * @param page the kind of page being documented
       * @param path the DocPath object
       */
<span class="line-modified">!     public Navigation(Element element, HtmlConfiguration configuration, PageMode page, DocPath path) {</span>
          this.configuration = configuration;
<span class="line-added">+         this.options = configuration.getOptions();</span>
          this.element = element;
          this.contents = configuration.contents;
          this.documentedPage = page;
          this.path = path;
          this.pathToRoot = path.parent().invert();
          this.links = new Links(path);
<span class="line-modified">!         this.rowListTitle = configuration.getDocResources().getText(&quot;doclet.Navigation&quot;);</span>
          this.searchLabel = contents.getContent(&quot;doclet.search&quot;);
      }
  
      public Navigation setNavLinkModule(Content navLinkModule) {
          this.navLinkModule = navLinkModule;
          return this;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 240,41 ***</span>
       * @param tree the content tree to which the main navigation will added
       */
      private void addMainNavLinks(Content tree) {
          switch (documentedPage) {
              case OVERVIEW:
<span class="line-modified">!                 addActivePageLink(tree, contents.overviewLabel, configuration.createoverview);</span>
                  addModuleLink(tree);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, configuration.classuse);</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case MODULE:
                  addOverviewLink(tree);
                  addActivePageLink(tree, contents.moduleLabel, configuration.showModules);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, configuration.classuse);</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case PACKAGE:
                  addOverviewLink(tree);
                  addModuleOfElementLink(tree);
                  addActivePageLink(tree, contents.packageLabel, true);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 if (configuration.classuse) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_USE,
                              contents.useLabel, &quot;&quot;, &quot;&quot;));
                  }
<span class="line-modified">!                 if (configuration.createtree) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_TREE,
                              contents.treeLabel, &quot;&quot;, &quot;&quot;));
                  }
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
<span class="line-new-header">--- 201,41 ---</span>
       * @param tree the content tree to which the main navigation will added
       */
      private void addMainNavLinks(Content tree) {
          switch (documentedPage) {
              case OVERVIEW:
<span class="line-modified">!                 addActivePageLink(tree, contents.overviewLabel, options.createOverview());</span>
                  addModuleLink(tree);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, options.classUse());</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case MODULE:
                  addOverviewLink(tree);
                  addActivePageLink(tree, contents.moduleLabel, configuration.showModules);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, options.classUse());</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case PACKAGE:
                  addOverviewLink(tree);
                  addModuleOfElementLink(tree);
                  addActivePageLink(tree, contents.packageLabel, true);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 if (options.classUse()) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_USE,
                              contents.useLabel, &quot;&quot;, &quot;&quot;));
                  }
<span class="line-modified">!                 if (options.createTree()) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_TREE,
                              contents.treeLabel, &quot;&quot;, &quot;&quot;));
                  }
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 283,15 ***</span>
              case CLASS:
                  addOverviewLink(tree);
                  addModuleOfElementLink(tree);
                  addPackageSummaryLink(tree);
                  addActivePageLink(tree, contents.classLabel, true);
<span class="line-modified">!                 if (configuration.classuse) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.CLASS_USE.resolve(path.basename()),
                              contents.useLabel));
                  }
<span class="line-modified">!                 if (configuration.createtree) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_TREE,
                              contents.treeLabel, &quot;&quot;, &quot;&quot;));
                  }
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
<span class="line-new-header">--- 244,15 ---</span>
              case CLASS:
                  addOverviewLink(tree);
                  addModuleOfElementLink(tree);
                  addPackageSummaryLink(tree);
                  addActivePageLink(tree, contents.classLabel, true);
<span class="line-modified">!                 if (options.classUse()) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.CLASS_USE.resolve(path.basename()),
                              contents.useLabel));
                  }
<span class="line-modified">!                 if (options.createTree()) {</span>
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_TREE,
                              contents.treeLabel, &quot;&quot;, &quot;&quot;));
                  }
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 305,11 ***</span>
                      addPageLabel(tree, contents.classLabel, true);
                  } else {
                      addPackageOfElementLink(tree);
                      addContentToTree(tree, navLinkClass);
                  }
<span class="line-modified">!                 addActivePageLink(tree, contents.useLabel, configuration.classuse);</span>
                  if (element instanceof PackageElement) {
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_TREE, contents.treeLabel));
                  } else {
                      addContentToTree(tree, configuration.utils.isEnclosingPackageIncluded((TypeElement) element)
                              ? links.createLink(DocPath.parent.resolve(DocPaths.PACKAGE_TREE), contents.treeLabel)
<span class="line-new-header">--- 266,11 ---</span>
                      addPageLabel(tree, contents.classLabel, true);
                  } else {
                      addPackageOfElementLink(tree);
                      addContentToTree(tree, navLinkClass);
                  }
<span class="line-modified">!                 addActivePageLink(tree, contents.useLabel, options.classUse());</span>
                  if (element instanceof PackageElement) {
                      addContentToTree(tree, links.createLink(DocPaths.PACKAGE_TREE, contents.treeLabel));
                  } else {
                      addContentToTree(tree, configuration.utils.isEnclosingPackageIncluded((TypeElement) element)
                              ? links.createLink(DocPath.parent.resolve(DocPaths.PACKAGE_TREE), contents.treeLabel)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 327,12 ***</span>
                  } else {
                      addModuleOfElementLink(tree);
                      addPackageSummaryLink(tree);
                  }
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, configuration.classuse);</span>
<span class="line-modified">!                 addActivePageLink(tree, contents.treeLabel, configuration.createtree);</span>
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case DEPRECATED:
<span class="line-new-header">--- 288,12 ---</span>
                  } else {
                      addModuleOfElementLink(tree);
                      addPackageSummaryLink(tree);
                  }
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, options.classUse());</span>
<span class="line-modified">!                 addActivePageLink(tree, contents.treeLabel, options.createTree());</span>
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case DEPRECATED:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 340,49 ***</span>
              case HELP:
                  addOverviewLink(tree);
                  addModuleLink(tree);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, configuration.classuse);</span>
                  addTreeLink(tree);
                  if (documentedPage == PageMode.DEPRECATED) {
<span class="line-modified">!                     addActivePageLink(tree, contents.deprecatedLabel, !(configuration.nodeprecated</span>
<span class="line-modified">!                             || configuration.nodeprecatedlist));</span>
                  } else {
                      addDeprecatedLink(tree);
                  }
                  if (documentedPage == PageMode.INDEX) {
<span class="line-modified">!                     addActivePageLink(tree, contents.indexLabel, configuration.createindex);</span>
                  } else {
                      addIndexLink(tree);
                  }
                  if (documentedPage == PageMode.HELP) {
<span class="line-modified">!                     addActivePageLink(tree, contents.helpLabel, !configuration.nohelp);</span>
                  } else {
                      addHelpLink(tree);
                  }
                  break;
              case ALLCLASSES:
              case ALLPACKAGES:
              case CONSTANTVALUES:
              case SERIALIZEDFORM:
                  addOverviewLink(tree);
                  addModuleLink(tree);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, configuration.classuse);</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case DOCFILE:
                  addOverviewLink(tree);
                  addModuleOfElementLink(tree);
                  addContentToTree(tree, navLinkPackage);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, configuration.classuse);</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
<span class="line-new-header">--- 301,50 ---</span>
              case HELP:
                  addOverviewLink(tree);
                  addModuleLink(tree);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, options.classUse());</span>
                  addTreeLink(tree);
                  if (documentedPage == PageMode.DEPRECATED) {
<span class="line-modified">!                     addActivePageLink(tree, contents.deprecatedLabel, !(options.noDeprecated()</span>
<span class="line-modified">!                             || options.noDeprecatedList()));</span>
                  } else {
                      addDeprecatedLink(tree);
                  }
                  if (documentedPage == PageMode.INDEX) {
<span class="line-modified">!                     addActivePageLink(tree, contents.indexLabel, options.createIndex());</span>
                  } else {
                      addIndexLink(tree);
                  }
                  if (documentedPage == PageMode.HELP) {
<span class="line-modified">!                     addActivePageLink(tree, contents.helpLabel, !options.noHelp());</span>
                  } else {
                      addHelpLink(tree);
                  }
                  break;
              case ALLCLASSES:
              case ALLPACKAGES:
              case CONSTANTVALUES:
              case SERIALIZEDFORM:
<span class="line-added">+             case SYSTEMPROPERTIES:</span>
                  addOverviewLink(tree);
                  addModuleLink(tree);
                  addPackageLink(tree);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, options.classUse());</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
              case DOCFILE:
                  addOverviewLink(tree);
                  addModuleOfElementLink(tree);
                  addContentToTree(tree, navLinkPackage);
                  addPageLabel(tree, contents.classLabel, true);
<span class="line-modified">!                 addPageLabel(tree, contents.useLabel, options.classUse());</span>
                  addTreeLink(tree);
                  addDeprecatedLink(tree);
                  addIndexLink(tree);
                  addHelpLink(tree);
                  break;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 427,11 ***</span>
                          }
                      }
                  }
                  if (!listContents.isEmpty()) {
                      Content li = HtmlTree.LI(contents.summaryLabel);
<span class="line-modified">!                     li.add(Contents.SPACE);</span>
                      tree.add(li);
                      addListToNav(listContents, tree);
                  }
                  break;
              case MODULE:
<span class="line-new-header">--- 389,11 ---</span>
                          }
                      }
                  }
                  if (!listContents.isEmpty()) {
                      Content li = HtmlTree.LI(contents.summaryLabel);
<span class="line-modified">!                     li.add(Entity.NO_BREAK_SPACE);</span>
                      tree.add(li);
                      addListToNav(listContents, tree);
                  }
                  break;
              case MODULE:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 459,11 ***</span>
                  } else {
                      addContentToList(listContents, contents.navServices);
                  }
                  if (!listContents.isEmpty()) {
                      Content li = HtmlTree.LI(contents.moduleSubNavLabel);
<span class="line-modified">!                     li.add(Contents.SPACE);</span>
                      tree.add(li);
                      addListToNav(listContents, tree);
                  }
                  break;
              default:
<span class="line-new-header">--- 421,11 ---</span>
                  } else {
                      addContentToList(listContents, contents.navServices);
                  }
                  if (!listContents.isEmpty()) {
                      Content li = HtmlTree.LI(contents.moduleSubNavLabel);
<span class="line-modified">!                     li.add(Entity.NO_BREAK_SPACE);</span>
                      tree.add(li);
                      addListToNav(listContents, tree);
                  }
                  break;
              default:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 663,11 ***</span>
                          }
                      }
                  }
                  if (!listContents.isEmpty()) {
                      Content li = HtmlTree.LI(contents.detailLabel);
<span class="line-modified">!                     li.add(Contents.SPACE);</span>
                      tree.add(li);
                      addListToNav(listContents, tree);
                  }
                  break;
              default:
<span class="line-new-header">--- 625,11 ---</span>
                          }
                      }
                  }
                  if (!listContents.isEmpty()) {
                      Content li = HtmlTree.LI(contents.detailLabel);
<span class="line-modified">!                     li.add(Entity.NO_BREAK_SPACE);</span>
                      tree.add(li);
                      addListToNav(listContents, tree);
                  }
                  break;
              default:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 799,13 ***</span>
  
      private void addListToNav(List&lt;Content&gt; listContents, Content tree) {
          int count = 0;
          for (Content liContent : listContents) {
              if (count &lt; listContents.size() - 1) {
<span class="line-modified">!                 liContent.add(Contents.SPACE);</span>
                  liContent.add(&quot;|&quot;);
<span class="line-modified">!                 liContent.add(Contents.SPACE);</span>
              }
              tree.add(liContent);
              count++;
          }
      }
<span class="line-new-header">--- 761,13 ---</span>
  
      private void addListToNav(List&lt;Content&gt; listContents, Content tree) {
          int count = 0;
          for (Content liContent : listContents) {
              if (count &lt; listContents.size() - 1) {
<span class="line-modified">!                 liContent.add(Entity.NO_BREAK_SPACE);</span>
                  liContent.add(&quot;|&quot;);
<span class="line-modified">!                 liContent.add(Entity.NO_BREAK_SPACE);</span>
              }
              tree.add(liContent);
              count++;
          }
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 821,12 ***</span>
              tree.add(HtmlTree.LI(label));
          }
      }
  
      private void addOverviewLink(Content tree) {
<span class="line-modified">!         if (configuration.createoverview) {</span>
<span class="line-modified">!             tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(DocPaths.overviewSummary(configuration.frames)),</span>
                      contents.overviewLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addModuleLink(Content tree) {
<span class="line-new-header">--- 783,12 ---</span>
              tree.add(HtmlTree.LI(label));
          }
      }
  
      private void addOverviewLink(Content tree) {
<span class="line-modified">!         if (options.createOverview()) {</span>
<span class="line-modified">!             tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(DocPaths.INDEX),</span>
                      contents.overviewLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addModuleLink(Content tree) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 887,39 ***</span>
      private void addPackageSummaryLink(Content tree) {
          tree.add(HtmlTree.LI(links.createLink(DocPaths.PACKAGE_SUMMARY, contents.packageLabel)));
      }
  
      private void addTreeLink(Content tree) {
<span class="line-modified">!         if (configuration.createtree) {</span>
              List&lt;PackageElement&gt; packages = new ArrayList&lt;&gt;(configuration.getSpecifiedPackageElements());
              DocPath docPath = packages.size() == 1 &amp;&amp; configuration.getSpecifiedTypeElements().isEmpty()
                      ? pathToRoot.resolve(configuration.docPaths.forPackage(packages.get(0)).resolve(DocPaths.PACKAGE_TREE))
                      : pathToRoot.resolve(DocPaths.OVERVIEW_TREE);
              tree.add(HtmlTree.LI(links.createLink(docPath, contents.treeLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addDeprecatedLink(Content tree) {
<span class="line-modified">!         if (!(configuration.nodeprecated || configuration.nodeprecatedlist)) {</span>
              tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(DocPaths.DEPRECATED_LIST),
                      contents.deprecatedLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addIndexLink(Content tree) {
<span class="line-modified">!         if (configuration.createindex) {</span>
              tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(
<span class="line-modified">!                     (configuration.splitindex</span>
                              ? DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1))
                              : DocPaths.INDEX_ALL)),
                      contents.indexLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addHelpLink(Content tree) {
<span class="line-modified">!         if (!configuration.nohelp) {</span>
<span class="line-modified">!             String helpfile = configuration.helpfile;</span>
              DocPath helpfilenm;
              if (helpfile.isEmpty()) {
                  helpfilenm = DocPaths.HELP_DOC;
              } else {
                  DocFile file = DocFile.createFileForInput(configuration, helpfile);
<span class="line-new-header">--- 849,39 ---</span>
      private void addPackageSummaryLink(Content tree) {
          tree.add(HtmlTree.LI(links.createLink(DocPaths.PACKAGE_SUMMARY, contents.packageLabel)));
      }
  
      private void addTreeLink(Content tree) {
<span class="line-modified">!         if (options.createTree()) {</span>
              List&lt;PackageElement&gt; packages = new ArrayList&lt;&gt;(configuration.getSpecifiedPackageElements());
              DocPath docPath = packages.size() == 1 &amp;&amp; configuration.getSpecifiedTypeElements().isEmpty()
                      ? pathToRoot.resolve(configuration.docPaths.forPackage(packages.get(0)).resolve(DocPaths.PACKAGE_TREE))
                      : pathToRoot.resolve(DocPaths.OVERVIEW_TREE);
              tree.add(HtmlTree.LI(links.createLink(docPath, contents.treeLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addDeprecatedLink(Content tree) {
<span class="line-modified">!         if (!(options.noDeprecated() || options.noDeprecatedList())) {</span>
              tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(DocPaths.DEPRECATED_LIST),
                      contents.deprecatedLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addIndexLink(Content tree) {
<span class="line-modified">!         if (options.createIndex()) {</span>
              tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(
<span class="line-modified">!                     (options.splitIndex()</span>
                              ? DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1))
                              : DocPaths.INDEX_ALL)),
                      contents.indexLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addHelpLink(Content tree) {
<span class="line-modified">!         if (!options.noHelp()) {</span>
<span class="line-modified">!             String helpfile = options.helpFile();</span>
              DocPath helpfilenm;
              if (helpfile.isEmpty()) {
                  helpfilenm = DocPaths.HELP_DOC;
              } else {
                  DocFile file = DocFile.createFileForInput(configuration, helpfile);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 928,124 ***</span>
              tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(helpfilenm),
                      contents.helpLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Add &quot;FRAMES&quot; link, to switch to the frame version of the output.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param tree the content tree to which the link will be added</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     private void addNavShowLists(Content tree) {</span>
<span class="line-removed">-         DocLink dl = new DocLink(pathToRoot.resolve(DocPaths.INDEX), path.getPath(), null);</span>
<span class="line-removed">-         Content framesContent = links.createLink(dl, contents.framesLabel, &quot;&quot;, &quot;_top&quot;);</span>
<span class="line-removed">-         tree.add(HtmlTree.LI(framesContent));</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Add &quot;NO FRAMES&quot; link, to switch to the non-frame version of the output.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param tree the content tree to which the link will be added</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     private void addNavHideLists(Content tree) {</span>
<span class="line-removed">-         Content noFramesContent = links.createLink(path.basename(), contents.noFramesLabel, &quot;&quot;, &quot;_top&quot;);</span>
<span class="line-removed">-         tree.add(HtmlTree.LI(noFramesContent));</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
      private void addSearch(Content tree) {
          String searchValueId = &quot;search&quot;;
          String reset = &quot;reset&quot;;
          HtmlTree inputText = HtmlTree.INPUT(&quot;text&quot;, searchValueId, searchValueId);
          HtmlTree inputReset = HtmlTree.INPUT(reset, reset, reset);
<span class="line-modified">!         HtmlTree liInput = HtmlTree.LI(HtmlTree.LABEL(searchValueId, searchLabel));</span>
<span class="line-modified">!         liInput.add(inputText);</span>
<span class="line-modified">!         liInput.add(inputReset);</span>
<span class="line-modified">!         HtmlTree ulSearch = HtmlTree.UL(HtmlStyle.navListSearch, liInput);</span>
<span class="line-removed">-         tree.add(ulSearch);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     private void addFixedNavScript(Content tree) {</span>
<span class="line-removed">-         tree.add(FIXED_NAV_SCRIPT.asContent());</span>
      }
  
      /**
       * Get the navigation content.
       *
       * @param top true if the top navigation bar is to be printed
       * @return the navigation contents
       */
      public Content getContent(boolean top) {
<span class="line-modified">!         Content contentTree = new ContentBuilder();</span>
<span class="line-modified">!         if (!configuration.nonavbar) {</span>
<span class="line-modified">!             Deque&lt;Content&gt; queue;</span>
<span class="line-modified">!             Content tree = HtmlTree.NAV();</span>
<span class="line-modified">!             HtmlTree navDiv = new HtmlTree(HtmlTag.DIV);</span>
<span class="line-modified">!             if (top) {</span>
<span class="line-modified">!                 queue = topBottomNavContents.get(Position.TOP);</span>
<span class="line-modified">!                 fixedNavDiv.add(Position.TOP.startOfNav());</span>
<span class="line-modified">!                 navDiv.setStyle(HtmlStyle.topNav);</span>
<span class="line-modified">!             } else {</span>
<span class="line-modified">!                 queue = topBottomNavContents.get(Position.BOTTOM);</span>
<span class="line-modified">!                 tree.add(Position.BOTTOM.startOfNav());</span>
<span class="line-modified">!                 navDiv.setStyle(HtmlStyle.bottomNav);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             navDiv.add(queue.poll());</span>
<span class="line-modified">!             HtmlTree skipLinkDiv = HtmlTree.DIV(HtmlStyle.skipNav, queue.poll());</span>
<span class="line-modified">!             navDiv.add(skipLinkDiv);</span>
<span class="line-modified">!             navDiv.add(queue.poll());</span>
<span class="line-modified">!             HtmlTree navList = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!             navList.setStyle(HtmlStyle.navList);</span>
<span class="line-modified">!             navList.put(HtmlAttr.TITLE, rowListTitle);</span>
<span class="line-modified">!             fixedNavDiv.setStyle(HtmlStyle.fixedNav);</span>
<span class="line-modified">!             addMainNavLinks(navList);</span>
<span class="line-modified">!             navDiv.add(navList);</span>
<span class="line-modified">!             Content aboutDiv = HtmlTree.DIV(HtmlStyle.aboutLanguage, top ? userHeader : userFooter);</span>
<span class="line-modified">!             navDiv.add(aboutDiv);</span>
<span class="line-modified">!             if (top) {</span>
<span class="line-modified">!                 fixedNavDiv.add(navDiv);</span>
<span class="line-modified">!             } else {</span>
<span class="line-modified">!                 tree.add(navDiv);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             HtmlTree subDiv = new HtmlTree(HtmlTag.DIV);</span>
<span class="line-modified">!             subDiv.setStyle(HtmlStyle.subNav);</span>
<span class="line-modified">!             HtmlTree div = new HtmlTree(HtmlTag.DIV);</span>
<span class="line-modified">!             // Add the summary links if present.</span>
<span class="line-modified">!             HtmlTree ulNavSummary = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!             ulNavSummary.setStyle(HtmlStyle.subNavList);</span>
<span class="line-modified">!             addSummaryLinks(ulNavSummary);</span>
<span class="line-modified">!             div.add(ulNavSummary);</span>
<span class="line-modified">!             // Add the detail links if present.</span>
<span class="line-modified">!             HtmlTree ulNavDetail = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!             ulNavDetail.setStyle(HtmlStyle.subNavList);</span>
<span class="line-modified">!             addDetailLinks(ulNavDetail);</span>
<span class="line-modified">!             div.add(ulNavDetail);</span>
<span class="line-modified">!             HtmlTree ulFrames = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!             ulFrames.setStyle(HtmlStyle.navList);</span>
<span class="line-modified">!             if (!configuration.nonavbar) {</span>
<span class="line-modified">!                 if (configuration.frames) {</span>
<span class="line-modified">!                     addNavShowLists(ulFrames);</span>
<span class="line-modified">!                     addNavHideLists(ulFrames);</span>
<span class="line-modified">!                 }</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             div.add(ulFrames);</span>
<span class="line-modified">!             subDiv.add(div);</span>
<span class="line-modified">!             if (top &amp;&amp; configuration.createindex) {</span>
<span class="line-modified">!                 addSearch(subDiv);</span>
<span class="line-modified">!             }</span>
<span class="line-removed">-             if (top) {</span>
<span class="line-removed">-                 fixedNavDiv.add(subDiv);</span>
<span class="line-removed">-                 fixedNavDiv.add(queue.poll());</span>
<span class="line-removed">-                 fixedNavDiv.add(Position.TOP.endOfNav());</span>
<span class="line-removed">-                 tree.add(fixedNavDiv);</span>
<span class="line-removed">-                 HtmlTree paddingDiv = HtmlTree.DIV(HtmlStyle.navPadding, Contents.SPACE);</span>
<span class="line-removed">-                 tree.add(paddingDiv);</span>
<span class="line-removed">-                 addFixedNavScript(tree);</span>
<span class="line-removed">-             } else {</span>
<span class="line-removed">-                 tree.add(subDiv);</span>
<span class="line-removed">-                 tree.add(queue.poll());</span>
<span class="line-removed">-                 tree.add(Position.BOTTOM.endOfNav());</span>
<span class="line-removed">-             }</span>
<span class="line-removed">-             return tree;</span>
          }
<span class="line-modified">!         return contentTree;</span>
      }
  }
<span class="line-new-header">--- 890,84 ---</span>
              tree.add(HtmlTree.LI(links.createLink(pathToRoot.resolve(helpfilenm),
                      contents.helpLabel, &quot;&quot;, &quot;&quot;)));
          }
      }
  
      private void addSearch(Content tree) {
          String searchValueId = &quot;search&quot;;
          String reset = &quot;reset&quot;;
          HtmlTree inputText = HtmlTree.INPUT(&quot;text&quot;, searchValueId, searchValueId);
          HtmlTree inputReset = HtmlTree.INPUT(reset, reset, reset);
<span class="line-modified">!         HtmlTree searchDiv = HtmlTree.DIV(HtmlStyle.navListSearch, HtmlTree.LABEL(searchValueId, searchLabel));</span>
<span class="line-modified">!         searchDiv.add(inputText);</span>
<span class="line-modified">!         searchDiv.add(inputReset);</span>
<span class="line-modified">!         tree.add(searchDiv);</span>
      }
  
      /**
       * Get the navigation content.
       *
       * @param top true if the top navigation bar is to be printed
       * @return the navigation contents
       */
      public Content getContent(boolean top) {
<span class="line-modified">!         if (options.noNavbar()) {</span>
<span class="line-modified">!             return new ContentBuilder();</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         Content tree = HtmlTree.NAV();</span>
<span class="line-modified">!         HtmlTree navDiv = new HtmlTree(HtmlTag.DIV);</span>
<span class="line-modified">!         Content skipNavLinks = contents.getContent(&quot;doclet.Skip_navigation_links&quot;);</span>
<span class="line-modified">!         if (top) {</span>
<span class="line-modified">!             tree.add(Position.TOP.startOfNav());</span>
<span class="line-modified">!             navDiv.setStyle(HtmlStyle.topNav)</span>
<span class="line-modified">!                     .setId(SectionName.NAVBAR_TOP.getName())</span>
<span class="line-modified">!                     .add(HtmlTree.DIV(HtmlStyle.skipNav,</span>
<span class="line-modified">!                             links.createLink(SectionName.SKIP_NAVBAR_TOP, skipNavLinks,</span>
<span class="line-modified">!                                     skipNavLinks.toString(), &quot;&quot;)));</span>
<span class="line-modified">!         } else {</span>
<span class="line-modified">!             tree.add(Position.BOTTOM.startOfNav());</span>
<span class="line-modified">!             navDiv.setStyle(HtmlStyle.bottomNav)</span>
<span class="line-modified">!                     .setId(SectionName.NAVBAR_BOTTOM.getName())</span>
<span class="line-modified">!                     .add(HtmlTree.DIV(HtmlStyle.skipNav,</span>
<span class="line-modified">!                             links.createLink(SectionName.SKIP_NAVBAR_BOTTOM, skipNavLinks,</span>
<span class="line-modified">!                                     skipNavLinks.toString(), &quot;&quot;)));</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         HtmlTree navList = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!         navList.setId(top ? SectionName.NAVBAR_TOP_FIRSTROW.getName()</span>
<span class="line-modified">!                           : SectionName.NAVBAR_BOTTOM_FIRSTROW.getName());</span>
<span class="line-modified">!         navList.setStyle(HtmlStyle.navList);</span>
<span class="line-modified">!         navList.put(HtmlAttr.TITLE, rowListTitle);</span>
<span class="line-modified">!         addMainNavLinks(navList);</span>
<span class="line-modified">!         navDiv.add(navList);</span>
<span class="line-modified">!         Content aboutDiv = HtmlTree.DIV(HtmlStyle.aboutLanguage, top ? userHeader : userFooter);</span>
<span class="line-modified">!         navDiv.add(aboutDiv);</span>
<span class="line-modified">!         tree.add(navDiv);</span>
<span class="line-modified">!         HtmlTree subDiv = new HtmlTree(HtmlTag.DIV);</span>
<span class="line-modified">!         subDiv.setStyle(HtmlStyle.subNav);</span>
<span class="line-modified">!         HtmlTree div = new HtmlTree(HtmlTag.DIV);</span>
<span class="line-modified">!         // Add the summary links if present.</span>
<span class="line-modified">!         HtmlTree ulNavSummary = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!         ulNavSummary.setStyle(HtmlStyle.subNavList);</span>
<span class="line-modified">!         addSummaryLinks(ulNavSummary);</span>
<span class="line-modified">!         div.add(ulNavSummary);</span>
<span class="line-modified">!         // Add the detail links if present.</span>
<span class="line-modified">!         HtmlTree ulNavDetail = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!         ulNavDetail.setStyle(HtmlStyle.subNavList);</span>
<span class="line-modified">!         addDetailLinks(ulNavDetail);</span>
<span class="line-modified">!         div.add(ulNavDetail);</span>
<span class="line-modified">!         subDiv.add(div);</span>
<span class="line-modified">!         if (top &amp;&amp; options.createIndex()) {</span>
<span class="line-modified">!             addSearch(subDiv);</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         tree.add(subDiv);</span>
<span class="line-modified">!         if (top) {</span>
<span class="line-modified">!             tree.add(Position.TOP.endOfNav());</span>
<span class="line-modified">!             tree.add(HtmlTree.SPAN(HtmlStyle.skipNav, EMPTY_COMMENT)</span>
<span class="line-modified">!                     .setId(SectionName.SKIP_NAVBAR_TOP.getName()));</span>
<span class="line-modified">!         } else {</span>
<span class="line-modified">!             tree.add(Position.BOTTOM.endOfNav());</span>
<span class="line-modified">!             tree.add(HtmlTree.SPAN(HtmlStyle.skipNav, EMPTY_COMMENT)</span>
<span class="line-modified">!                     .setId(SectionName.SKIP_NAVBAR_BOTTOM.getName()));</span>
          }
<span class="line-modified">!         return tree;</span>
      }
  }
</pre>
<center><a href="Links.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="RawHtml.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>