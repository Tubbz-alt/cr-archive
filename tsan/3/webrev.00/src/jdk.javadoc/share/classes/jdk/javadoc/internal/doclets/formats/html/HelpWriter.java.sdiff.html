<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HelpWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="FieldWriterImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlConfiguration.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/HelpWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 


 28 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
 29 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
 30 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
 31 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
 32 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
 33 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 34 import jdk.javadoc.internal.doclets.toolkit.Content;
 35 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 36 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 37 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 38 
 39 
 40 /**
 41  * Generate the Help File for the generated API documentation. The help file
 42  * contents are helpful for browsing the generated documentation.
 43  *
 44  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 45  *  If you write code that depends on this, you do so at your own risk.
 46  *  This code and its internal interfaces are subject to change or
 47  *  deletion without notice.&lt;/b&gt;
<span class="line-removed"> 48  *</span>
<span class="line-removed"> 49  * @author Atul M Dambalkar</span>
 50  */
 51 public class HelpWriter extends HtmlDocletWriter {
 52 
<span class="line-removed"> 53     HtmlTree mainTree = HtmlTree.MAIN();</span>
<span class="line-removed"> 54 </span>
 55     private final Navigation navBar;
 56 






 57     /**
 58      * Constructor to construct HelpWriter object.
 59      * @param configuration the configuration
 60      * @param filename File to be generated.
 61      */
 62     public HelpWriter(HtmlConfiguration configuration,
 63                       DocPath filename) {
 64         super(configuration, filename);
<span class="line-modified"> 65         this.navBar = new Navigation(null, configuration, fixedNavDiv, PageMode.HELP, path);</span>
 66     }
 67 
 68     /**
 69      * Construct the HelpWriter object and then use it to generate the help
 70      * file. The name of the generated file is &quot;help-doc.html&quot;. The help file
 71      * will get generated if and only if &quot;-helpfile&quot; and &quot;-nohelp&quot; is not used
 72      * on the command line.
 73      *
 74      * @param configuration the configuration
 75      * @throws DocFileIOException if there is a problem while generating the documentation
 76      */
 77     public static void generate(HtmlConfiguration configuration) throws DocFileIOException {
 78         DocPath filename = DocPaths.HELP_DOC;
 79         HelpWriter helpgen = new HelpWriter(configuration, filename);
 80         helpgen.generateHelpFile();
 81     }
 82 
 83     /**
 84      * Generate the help file contents.
 85      *
 86      * @throws DocFileIOException if there is a problem while generating the documentation
 87      */
 88     protected void generateHelpFile() throws DocFileIOException {
 89         String title = resources.getText(&quot;doclet.Window_Help_title&quot;);
<span class="line-modified"> 90         HtmlTree body = getBody(true, getWindowTitle(title));</span>
<span class="line-modified"> 91         HtmlTree htmlTree = HtmlTree.HEADER();</span>
<span class="line-modified"> 92         addTop(htmlTree);</span>
 93         navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified"> 94         htmlTree.add(navBar.getContent(true));</span>
<span class="line-modified"> 95         body.add(htmlTree);</span>
<span class="line-modified"> 96         addHelpFileContents(body);</span>
<span class="line-modified"> 97         htmlTree = HtmlTree.FOOTER();</span>
 98         navBar.setUserFooter(getUserHeaderFooter(false));
<span class="line-modified"> 99         htmlTree.add(navBar.getContent(false));</span>
<span class="line-modified">100         addBottom(htmlTree);</span>
<span class="line-modified">101         body.add(htmlTree);</span>




102         printHtmlDocument(null, &quot;help&quot;, body);
103     }
104 
105     /**
106      * Add the help file contents from the resource file to the content tree. While adding the
107      * help file contents it also keeps track of user options. If &quot;-notree&quot;
108      * is used, then the &quot;overview-tree.html&quot; will not get added and hence
109      * help information also will not get added.
110      *
111      * @param contentTree the content tree to which the help file contents will be added
112      */
113     protected void addHelpFileContents(Content contentTree) {
114         // Heading
115         Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false, HtmlStyle.title,
116                 contents.getContent(&quot;doclet.help.main_heading&quot;));
117         Content div = HtmlTree.DIV(HtmlStyle.header, heading);
118         Content intro = HtmlTree.DIV(HtmlStyle.subTitle,
119                 contents.getContent(&quot;doclet.help.intro&quot;));
120         div.add(intro);
<span class="line-modified">121         mainTree.add(div);</span>
122         HtmlTree htmlTree;
123         HtmlTree ul = new HtmlTree(HtmlTag.UL);
124         ul.setStyle(HtmlStyle.blockList);
125 
126         // Overview
<span class="line-modified">127         if (configuration.createoverview) {</span>
128             Content overviewHeading = HtmlTree.HEADING(Headings.CONTENT_HEADING,
129                 contents.overviewLabel);
<span class="line-modified">130             htmlTree = HtmlTree.SECTION(overviewHeading);</span>
131             String overviewKey = configuration.showModules
132                     ? &quot;doclet.help.overview.modules.body&quot;
133                     : &quot;doclet.help.overview.packages.body&quot;;
134             Content overviewLink = links.createLink(
<span class="line-modified">135                     DocPaths.overviewSummary(configuration.frames),</span>
<span class="line-removed">136                     resources.getText(&quot;doclet.Overview&quot;));</span>
137             Content overviewBody = contents.getContent(overviewKey, overviewLink);
138             Content overviewPara = HtmlTree.P(overviewBody);
139             htmlTree.add(overviewPara);
140             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
141         }
142 
143         // Module
144         if (configuration.showModules) {
145             Content moduleHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
146                     contents.moduleLabel);
<span class="line-modified">147             htmlTree = HtmlTree.SECTION(moduleHead);</span>
148             Content moduleIntro = contents.getContent(&quot;doclet.help.module.intro&quot;);
149             Content modulePara = HtmlTree.P(moduleIntro);
150             htmlTree.add(modulePara);
151             HtmlTree ulModule = new HtmlTree(HtmlTag.UL);
152             ulModule.add(HtmlTree.LI(contents.packagesLabel));
153             ulModule.add(HtmlTree.LI(contents.modulesLabel));
154             ulModule.add(HtmlTree.LI(contents.servicesLabel));
155             htmlTree.add(ulModule);
156             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
157         }
158 
159         // Package
160         Content packageHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
161                 contents.packageLabel);
<span class="line-modified">162         htmlTree = HtmlTree.SECTION(packageHead);</span>
163         Content packageIntro = contents.getContent(&quot;doclet.help.package.intro&quot;);
164         Content packagePara = HtmlTree.P(packageIntro);
165         htmlTree.add(packagePara);
166         HtmlTree ulPackage = new HtmlTree(HtmlTag.UL);
167         ulPackage.add(HtmlTree.LI(contents.interfaces));
168         ulPackage.add(HtmlTree.LI(contents.classes));
169         ulPackage.add(HtmlTree.LI(contents.enums));
170         ulPackage.add(HtmlTree.LI(contents.exceptions));
171         ulPackage.add(HtmlTree.LI(contents.errors));
172         ulPackage.add(HtmlTree.LI(contents.annotationTypes));
173         htmlTree.add(ulPackage);
174         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
175 
176         // Class/interface
177         Content classHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
178                 contents.getContent(&quot;doclet.help.class_interface.head&quot;));
<span class="line-modified">179         htmlTree = HtmlTree.SECTION(classHead);</span>
180         Content classIntro = contents.getContent(&quot;doclet.help.class_interface.intro&quot;);
181         Content classPara = HtmlTree.P(classIntro);
182         htmlTree.add(classPara);
183         HtmlTree ul1 = new HtmlTree(HtmlTag.UL);
184         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.inheritance_diagram&quot;)));
185         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subclasses&quot;)));
186         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subinterfaces&quot;)));
187         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.implementations&quot;)));
188         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.declaration&quot;)));
189         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.description&quot;)));
190         htmlTree.add(ul1);
191         htmlTree.add(new HtmlTree(HtmlTag.BR));
192         HtmlTree ul2 = new HtmlTree(HtmlTag.UL);
193         ul2.add(HtmlTree.LI(contents.nestedClassSummary));
194         ul2.add(HtmlTree.LI(contents.fieldSummaryLabel));
195         ul2.add(HtmlTree.LI(contents.propertySummaryLabel));
196         ul2.add(HtmlTree.LI(contents.constructorSummaryLabel));
197         ul2.add(HtmlTree.LI(contents.methodSummary));
198         htmlTree.add(ul2);
199         htmlTree.add(new HtmlTree(HtmlTag.BR));
200         HtmlTree ul3 = new HtmlTree(HtmlTag.UL);
201         ul3.add(HtmlTree.LI(contents.fieldDetailsLabel));
202         ul3.add(HtmlTree.LI(contents.propertyDetailsLabel));
203         ul3.add(HtmlTree.LI(contents.constructorDetailsLabel));
204         ul3.add(HtmlTree.LI(contents.methodDetailLabel));
205         htmlTree.add(ul3);
206         Content classSummary = contents.getContent(&quot;doclet.help.class_interface.summary&quot;);
207         Content para = HtmlTree.P(classSummary);
208         htmlTree.add(para);
209         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
210 
211         // Annotation Types
212         Content aHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
213                 contents.annotationType);
<span class="line-modified">214         htmlTree = HtmlTree.SECTION(aHead);</span>
215         Content aIntro = contents.getContent(&quot;doclet.help.annotation_type.intro&quot;);
216         Content aPara = HtmlTree.P(aIntro);
217         htmlTree.add(aPara);
218         HtmlTree aul = new HtmlTree(HtmlTag.UL);
219         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.declaration&quot;)));
220         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.description&quot;)));
221         aul.add(HtmlTree.LI(contents.annotateTypeRequiredMemberSummaryLabel));
222         aul.add(HtmlTree.LI(contents.annotateTypeOptionalMemberSummaryLabel));
223         aul.add(HtmlTree.LI(contents.annotationTypeMemberDetail));
224         htmlTree.add(aul);
225         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
226 
227         // Enums
228         Content enumHead = HtmlTree.HEADING(Headings.CONTENT_HEADING, contents.enum_);
<span class="line-modified">229         htmlTree = HtmlTree.SECTION(enumHead);</span>
230         Content eIntro = contents.getContent(&quot;doclet.help.enum.intro&quot;);
231         Content enumPara = HtmlTree.P(eIntro);
232         htmlTree.add(enumPara);
233         HtmlTree eul = new HtmlTree(HtmlTag.UL);
234         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.declaration&quot;)));
235         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.definition&quot;)));
236         eul.add(HtmlTree.LI(contents.enumConstantSummary));
237         eul.add(HtmlTree.LI(contents.enumConstantDetailLabel));
238         htmlTree.add(eul);
239         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
240 
241         // Class Use
<span class="line-modified">242         if (configuration.classuse) {</span>
243             Content useHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
244                     contents.getContent(&quot;doclet.help.use.head&quot;));
<span class="line-modified">245             htmlTree = HtmlTree.SECTION(useHead);</span>
246             Content useBody = contents.getContent(&quot;doclet.help.use.body&quot;);
247             Content usePara = HtmlTree.P(useBody);
248             htmlTree.add(usePara);
249             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
250         }
251 
252         // Tree
<span class="line-modified">253         if (configuration.createtree) {</span>
254             Content treeHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
255                     contents.getContent(&quot;doclet.help.tree.head&quot;));
<span class="line-modified">256             htmlTree = HtmlTree.SECTION(treeHead);</span>
257             Content treeIntro = contents.getContent(&quot;doclet.help.tree.intro&quot;,
258                     links.createLink(DocPaths.OVERVIEW_TREE,
259                     resources.getText(&quot;doclet.Class_Hierarchy&quot;)),
260                     HtmlTree.CODE(new StringContent(&quot;java.lang.Object&quot;)));
261             Content treePara = HtmlTree.P(treeIntro);
262             htmlTree.add(treePara);
263             HtmlTree tul = new HtmlTree(HtmlTag.UL);
264             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.overview&quot;)));
265             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.package&quot;)));
266             htmlTree.add(tul);
267             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
268         }
269 
270         // Deprecated
<span class="line-modified">271         if (!(configuration.nodeprecatedlist || configuration.nodeprecated)) {</span>
272             Content dHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
273                     contents.deprecatedAPI);
<span class="line-modified">274             htmlTree = HtmlTree.SECTION(dHead);</span>
275             Content deprBody = contents.getContent(&quot;doclet.help.deprecated.body&quot;,
276                     links.createLink(DocPaths.DEPRECATED_LIST,
277                     resources.getText(&quot;doclet.Deprecated_API&quot;)));
278             Content dPara = HtmlTree.P(deprBody);
279             htmlTree.add(dPara);
280             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
281         }
282 
283         // Index
<span class="line-modified">284         if (configuration.createindex) {</span>
285             Content indexlink;
<span class="line-modified">286             if (configuration.splitindex) {</span>
287                 indexlink = links.createLink(DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1)),
288                         resources.getText(&quot;doclet.Index&quot;));
289             } else {
290                 indexlink = links.createLink(DocPaths.INDEX_ALL,
291                         resources.getText(&quot;doclet.Index&quot;));
292             }
293             Content indexHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
294                     contents.getContent(&quot;doclet.help.index.head&quot;));
<span class="line-modified">295             htmlTree = HtmlTree.SECTION(indexHead);</span>
296             Content indexBody = contents.getContent(&quot;doclet.help.index.body&quot;, indexlink);
297             Content indexPara = HtmlTree.P(indexBody);
298             htmlTree.add(indexPara);
299             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
300         }
301 
<span class="line-removed">302         // Frames</span>
<span class="line-removed">303         if (configuration.frames) {</span>
<span class="line-removed">304             Content frameHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,</span>
<span class="line-removed">305                     contents.getContent(&quot;doclet.help.frames.head&quot;));</span>
<span class="line-removed">306             htmlTree = HtmlTree.SECTION(frameHead);</span>
<span class="line-removed">307             Content framesBody = contents.getContent(&quot;doclet.help.frames.body&quot;);</span>
<span class="line-removed">308             Content framePara = HtmlTree.P(framesBody);</span>
<span class="line-removed">309             htmlTree.add(framePara);</span>
<span class="line-removed">310 </span>
<span class="line-removed">311             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));</span>
<span class="line-removed">312         }</span>
<span class="line-removed">313 </span>
314         // Serialized Form
315         Content sHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
316                 contents.serializedForm);
<span class="line-modified">317         htmlTree = HtmlTree.SECTION(sHead);</span>
318         Content serialBody = contents.getContent(&quot;doclet.help.serial_form.body&quot;);
319         Content serialPara = HtmlTree.P(serialBody);
320         htmlTree.add(serialPara);
321         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
322 
323         // Constant Field Values
324         Content constHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
325                 contents.constantsSummaryTitle);
<span class="line-modified">326         htmlTree = HtmlTree.SECTION(constHead);</span>
327         Content constantsBody = contents.getContent(&quot;doclet.help.constants.body&quot;,
328                 links.createLink(DocPaths.CONSTANT_VALUES,
329                 resources.getText(&quot;doclet.Constants_Summary&quot;)));
330         Content constPara = HtmlTree.P(constantsBody);
331         htmlTree.add(constPara);
332         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
333 
334         // Search
335         Content searchHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
336                 contents.getContent(&quot;doclet.help.search.head&quot;));
<span class="line-modified">337         htmlTree = HtmlTree.SECTION(searchHead);</span>
<span class="line-modified">338         Content searchBody = contents.getContent(&quot;doclet.help.search.body&quot;);</span>
<span class="line-modified">339         Content searchPara = HtmlTree.P(searchBody);</span>
<span class="line-modified">340         htmlTree.add(searchPara);</span>











341         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
342 
343         Content divContent = HtmlTree.DIV(HtmlStyle.contentContainer, ul);
344         divContent.add(new HtmlTree(HtmlTag.HR));
345         Content footnote = HtmlTree.SPAN(HtmlStyle.emphasizedPhrase,
346                 contents.getContent(&quot;doclet.help.footnote&quot;));
347         divContent.add(footnote);
<span class="line-modified">348         mainTree.add(divContent);</span>
<span class="line-removed">349         contentTree.add(mainTree);</span>
350     }
351 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
<span class="line-added"> 28 import jdk.javadoc.internal.doclets.formats.html.markup.BodyContents;</span>
<span class="line-added"> 29 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;</span>
 30 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlStyle;
 31 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTag;
 32 import jdk.javadoc.internal.doclets.formats.html.markup.HtmlTree;
 33 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation;
 34 import jdk.javadoc.internal.doclets.formats.html.markup.Navigation.PageMode;
 35 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 36 import jdk.javadoc.internal.doclets.toolkit.Content;
 37 import jdk.javadoc.internal.doclets.toolkit.util.DocFileIOException;
 38 import jdk.javadoc.internal.doclets.toolkit.util.DocPath;
 39 import jdk.javadoc.internal.doclets.toolkit.util.DocPaths;
 40 
 41 
 42 /**
 43  * Generate the Help File for the generated API documentation. The help file
 44  * contents are helpful for browsing the generated documentation.
 45  *
 46  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 47  *  If you write code that depends on this, you do so at your own risk.
 48  *  This code and its internal interfaces are subject to change or
 49  *  deletion without notice.&lt;/b&gt;


 50  */
 51 public class HelpWriter extends HtmlDocletWriter {
 52 


 53     private final Navigation navBar;
 54 
<span class="line-added"> 55     private final String[][] SEARCH_EXAMPLES = {</span>
<span class="line-added"> 56             {&quot;j.l.obj&quot;, &quot;\&quot;java.lang.Object\&quot;&quot;},</span>
<span class="line-added"> 57             {&quot;InpStr&quot;, &quot;\&quot;java.io.InputStream\&quot;&quot;},</span>
<span class="line-added"> 58             {&quot;HM.cK&quot;, &quot;\&quot;java.util.HashMap.containsKey(Object)\&quot;&quot;}</span>
<span class="line-added"> 59     };</span>
<span class="line-added"> 60 </span>
 61     /**
 62      * Constructor to construct HelpWriter object.
 63      * @param configuration the configuration
 64      * @param filename File to be generated.
 65      */
 66     public HelpWriter(HtmlConfiguration configuration,
 67                       DocPath filename) {
 68         super(configuration, filename);
<span class="line-modified"> 69         this.navBar = new Navigation(null, configuration, PageMode.HELP, path);</span>
 70     }
 71 
 72     /**
 73      * Construct the HelpWriter object and then use it to generate the help
 74      * file. The name of the generated file is &quot;help-doc.html&quot;. The help file
 75      * will get generated if and only if &quot;-helpfile&quot; and &quot;-nohelp&quot; is not used
 76      * on the command line.
 77      *
 78      * @param configuration the configuration
 79      * @throws DocFileIOException if there is a problem while generating the documentation
 80      */
 81     public static void generate(HtmlConfiguration configuration) throws DocFileIOException {
 82         DocPath filename = DocPaths.HELP_DOC;
 83         HelpWriter helpgen = new HelpWriter(configuration, filename);
 84         helpgen.generateHelpFile();
 85     }
 86 
 87     /**
 88      * Generate the help file contents.
 89      *
 90      * @throws DocFileIOException if there is a problem while generating the documentation
 91      */
 92     protected void generateHelpFile() throws DocFileIOException {
 93         String title = resources.getText(&quot;doclet.Window_Help_title&quot;);
<span class="line-modified"> 94         HtmlTree body = getBody(getWindowTitle(title));</span>
<span class="line-modified"> 95         Content headerContent = new ContentBuilder();</span>
<span class="line-modified"> 96         addTop(headerContent);</span>
 97         navBar.setUserHeader(getUserHeaderFooter(true));
<span class="line-modified"> 98         headerContent.add(navBar.getContent(true));</span>
<span class="line-modified"> 99         ContentBuilder helpFileContent = new ContentBuilder();</span>
<span class="line-modified">100         addHelpFileContents(helpFileContent);</span>
<span class="line-modified">101         HtmlTree footer = HtmlTree.FOOTER();</span>
102         navBar.setUserFooter(getUserHeaderFooter(false));
<span class="line-modified">103         footer.add(navBar.getContent(false));</span>
<span class="line-modified">104         addBottom(footer);</span>
<span class="line-modified">105         body.add(new BodyContents()</span>
<span class="line-added">106                 .setHeader(headerContent)</span>
<span class="line-added">107                 .addMainContent(helpFileContent)</span>
<span class="line-added">108                 .setFooter(footer)</span>
<span class="line-added">109                 .toContent());</span>
110         printHtmlDocument(null, &quot;help&quot;, body);
111     }
112 
113     /**
114      * Add the help file contents from the resource file to the content tree. While adding the
115      * help file contents it also keeps track of user options. If &quot;-notree&quot;
116      * is used, then the &quot;overview-tree.html&quot; will not get added and hence
117      * help information also will not get added.
118      *
119      * @param contentTree the content tree to which the help file contents will be added
120      */
121     protected void addHelpFileContents(Content contentTree) {
122         // Heading
123         Content heading = HtmlTree.HEADING(Headings.PAGE_TITLE_HEADING, false, HtmlStyle.title,
124                 contents.getContent(&quot;doclet.help.main_heading&quot;));
125         Content div = HtmlTree.DIV(HtmlStyle.header, heading);
126         Content intro = HtmlTree.DIV(HtmlStyle.subTitle,
127                 contents.getContent(&quot;doclet.help.intro&quot;));
128         div.add(intro);
<span class="line-modified">129         contentTree.add(div);</span>
130         HtmlTree htmlTree;
131         HtmlTree ul = new HtmlTree(HtmlTag.UL);
132         ul.setStyle(HtmlStyle.blockList);
133 
134         // Overview
<span class="line-modified">135         if (options.createOverview()) {</span>
136             Content overviewHeading = HtmlTree.HEADING(Headings.CONTENT_HEADING,
137                 contents.overviewLabel);
<span class="line-modified">138             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, overviewHeading);</span>
139             String overviewKey = configuration.showModules
140                     ? &quot;doclet.help.overview.modules.body&quot;
141                     : &quot;doclet.help.overview.packages.body&quot;;
142             Content overviewLink = links.createLink(
<span class="line-modified">143                     DocPaths.INDEX, resources.getText(&quot;doclet.Overview&quot;));</span>

144             Content overviewBody = contents.getContent(overviewKey, overviewLink);
145             Content overviewPara = HtmlTree.P(overviewBody);
146             htmlTree.add(overviewPara);
147             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
148         }
149 
150         // Module
151         if (configuration.showModules) {
152             Content moduleHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
153                     contents.moduleLabel);
<span class="line-modified">154             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, moduleHead);</span>
155             Content moduleIntro = contents.getContent(&quot;doclet.help.module.intro&quot;);
156             Content modulePara = HtmlTree.P(moduleIntro);
157             htmlTree.add(modulePara);
158             HtmlTree ulModule = new HtmlTree(HtmlTag.UL);
159             ulModule.add(HtmlTree.LI(contents.packagesLabel));
160             ulModule.add(HtmlTree.LI(contents.modulesLabel));
161             ulModule.add(HtmlTree.LI(contents.servicesLabel));
162             htmlTree.add(ulModule);
163             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
164         }
165 
166         // Package
167         Content packageHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
168                 contents.packageLabel);
<span class="line-modified">169         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, packageHead);</span>
170         Content packageIntro = contents.getContent(&quot;doclet.help.package.intro&quot;);
171         Content packagePara = HtmlTree.P(packageIntro);
172         htmlTree.add(packagePara);
173         HtmlTree ulPackage = new HtmlTree(HtmlTag.UL);
174         ulPackage.add(HtmlTree.LI(contents.interfaces));
175         ulPackage.add(HtmlTree.LI(contents.classes));
176         ulPackage.add(HtmlTree.LI(contents.enums));
177         ulPackage.add(HtmlTree.LI(contents.exceptions));
178         ulPackage.add(HtmlTree.LI(contents.errors));
179         ulPackage.add(HtmlTree.LI(contents.annotationTypes));
180         htmlTree.add(ulPackage);
181         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
182 
183         // Class/interface
184         Content classHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
185                 contents.getContent(&quot;doclet.help.class_interface.head&quot;));
<span class="line-modified">186         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, classHead);</span>
187         Content classIntro = contents.getContent(&quot;doclet.help.class_interface.intro&quot;);
188         Content classPara = HtmlTree.P(classIntro);
189         htmlTree.add(classPara);
190         HtmlTree ul1 = new HtmlTree(HtmlTag.UL);
191         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.inheritance_diagram&quot;)));
192         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subclasses&quot;)));
193         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.subinterfaces&quot;)));
194         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.implementations&quot;)));
195         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.declaration&quot;)));
196         ul1.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.class_interface.description&quot;)));
197         htmlTree.add(ul1);
198         htmlTree.add(new HtmlTree(HtmlTag.BR));
199         HtmlTree ul2 = new HtmlTree(HtmlTag.UL);
200         ul2.add(HtmlTree.LI(contents.nestedClassSummary));
201         ul2.add(HtmlTree.LI(contents.fieldSummaryLabel));
202         ul2.add(HtmlTree.LI(contents.propertySummaryLabel));
203         ul2.add(HtmlTree.LI(contents.constructorSummaryLabel));
204         ul2.add(HtmlTree.LI(contents.methodSummary));
205         htmlTree.add(ul2);
206         htmlTree.add(new HtmlTree(HtmlTag.BR));
207         HtmlTree ul3 = new HtmlTree(HtmlTag.UL);
208         ul3.add(HtmlTree.LI(contents.fieldDetailsLabel));
209         ul3.add(HtmlTree.LI(contents.propertyDetailsLabel));
210         ul3.add(HtmlTree.LI(contents.constructorDetailsLabel));
211         ul3.add(HtmlTree.LI(contents.methodDetailLabel));
212         htmlTree.add(ul3);
213         Content classSummary = contents.getContent(&quot;doclet.help.class_interface.summary&quot;);
214         Content para = HtmlTree.P(classSummary);
215         htmlTree.add(para);
216         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
217 
218         // Annotation Types
219         Content aHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
220                 contents.annotationType);
<span class="line-modified">221         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, aHead);</span>
222         Content aIntro = contents.getContent(&quot;doclet.help.annotation_type.intro&quot;);
223         Content aPara = HtmlTree.P(aIntro);
224         htmlTree.add(aPara);
225         HtmlTree aul = new HtmlTree(HtmlTag.UL);
226         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.declaration&quot;)));
227         aul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.annotation_type.description&quot;)));
228         aul.add(HtmlTree.LI(contents.annotateTypeRequiredMemberSummaryLabel));
229         aul.add(HtmlTree.LI(contents.annotateTypeOptionalMemberSummaryLabel));
230         aul.add(HtmlTree.LI(contents.annotationTypeMemberDetail));
231         htmlTree.add(aul);
232         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
233 
234         // Enums
235         Content enumHead = HtmlTree.HEADING(Headings.CONTENT_HEADING, contents.enum_);
<span class="line-modified">236         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, enumHead);</span>
237         Content eIntro = contents.getContent(&quot;doclet.help.enum.intro&quot;);
238         Content enumPara = HtmlTree.P(eIntro);
239         htmlTree.add(enumPara);
240         HtmlTree eul = new HtmlTree(HtmlTag.UL);
241         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.declaration&quot;)));
242         eul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.enum.definition&quot;)));
243         eul.add(HtmlTree.LI(contents.enumConstantSummary));
244         eul.add(HtmlTree.LI(contents.enumConstantDetailLabel));
245         htmlTree.add(eul);
246         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
247 
248         // Class Use
<span class="line-modified">249         if (options.classUse()) {</span>
250             Content useHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
251                     contents.getContent(&quot;doclet.help.use.head&quot;));
<span class="line-modified">252             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, useHead);</span>
253             Content useBody = contents.getContent(&quot;doclet.help.use.body&quot;);
254             Content usePara = HtmlTree.P(useBody);
255             htmlTree.add(usePara);
256             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
257         }
258 
259         // Tree
<span class="line-modified">260         if (options.createTree()) {</span>
261             Content treeHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
262                     contents.getContent(&quot;doclet.help.tree.head&quot;));
<span class="line-modified">263             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, treeHead);</span>
264             Content treeIntro = contents.getContent(&quot;doclet.help.tree.intro&quot;,
265                     links.createLink(DocPaths.OVERVIEW_TREE,
266                     resources.getText(&quot;doclet.Class_Hierarchy&quot;)),
267                     HtmlTree.CODE(new StringContent(&quot;java.lang.Object&quot;)));
268             Content treePara = HtmlTree.P(treeIntro);
269             htmlTree.add(treePara);
270             HtmlTree tul = new HtmlTree(HtmlTag.UL);
271             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.overview&quot;)));
272             tul.add(HtmlTree.LI(contents.getContent(&quot;doclet.help.tree.package&quot;)));
273             htmlTree.add(tul);
274             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
275         }
276 
277         // Deprecated
<span class="line-modified">278         if (!(options.noDeprecatedList() || options.noDeprecated())) {</span>
279             Content dHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
280                     contents.deprecatedAPI);
<span class="line-modified">281             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, dHead);</span>
282             Content deprBody = contents.getContent(&quot;doclet.help.deprecated.body&quot;,
283                     links.createLink(DocPaths.DEPRECATED_LIST,
284                     resources.getText(&quot;doclet.Deprecated_API&quot;)));
285             Content dPara = HtmlTree.P(deprBody);
286             htmlTree.add(dPara);
287             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
288         }
289 
290         // Index
<span class="line-modified">291         if (options.createIndex()) {</span>
292             Content indexlink;
<span class="line-modified">293             if (options.splitIndex()) {</span>
294                 indexlink = links.createLink(DocPaths.INDEX_FILES.resolve(DocPaths.indexN(1)),
295                         resources.getText(&quot;doclet.Index&quot;));
296             } else {
297                 indexlink = links.createLink(DocPaths.INDEX_ALL,
298                         resources.getText(&quot;doclet.Index&quot;));
299             }
300             Content indexHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
301                     contents.getContent(&quot;doclet.help.index.head&quot;));
<span class="line-modified">302             htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, indexHead);</span>
303             Content indexBody = contents.getContent(&quot;doclet.help.index.body&quot;, indexlink);
304             Content indexPara = HtmlTree.P(indexBody);
305             htmlTree.add(indexPara);
306             ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
307         }
308 












309         // Serialized Form
310         Content sHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
311                 contents.serializedForm);
<span class="line-modified">312         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, sHead);</span>
313         Content serialBody = contents.getContent(&quot;doclet.help.serial_form.body&quot;);
314         Content serialPara = HtmlTree.P(serialBody);
315         htmlTree.add(serialPara);
316         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
317 
318         // Constant Field Values
319         Content constHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
320                 contents.constantsSummaryTitle);
<span class="line-modified">321         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, constHead);</span>
322         Content constantsBody = contents.getContent(&quot;doclet.help.constants.body&quot;,
323                 links.createLink(DocPaths.CONSTANT_VALUES,
324                 resources.getText(&quot;doclet.Constants_Summary&quot;)));
325         Content constPara = HtmlTree.P(constantsBody);
326         htmlTree.add(constPara);
327         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
328 
329         // Search
330         Content searchHead = HtmlTree.HEADING(Headings.CONTENT_HEADING,
331                 contents.getContent(&quot;doclet.help.search.head&quot;));
<span class="line-modified">332         htmlTree = HtmlTree.SECTION(HtmlStyle.helpSection, searchHead);</span>
<span class="line-modified">333         Content searchIntro = HtmlTree.P(contents.getContent(&quot;doclet.help.search.intro&quot;));</span>
<span class="line-modified">334         Content searchExamples = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">335         for (String[] example : SEARCH_EXAMPLES) {</span>
<span class="line-added">336             searchExamples.add(HtmlTree.LI(</span>
<span class="line-added">337                     contents.getContent(&quot;doclet.help.search.example&quot;,</span>
<span class="line-added">338                             HtmlTree.CODE(new StringContent(example[0])), example[1])));</span>
<span class="line-added">339         }</span>
<span class="line-added">340         Content searchSpecLink = HtmlTree.A(</span>
<span class="line-added">341                 resources.getText(&quot;doclet.help.search.spec.url&quot;, Runtime.version().feature()),</span>
<span class="line-added">342                 contents.getContent(&quot;doclet.help.search.spec.title&quot;));</span>
<span class="line-added">343         Content searchRefer = HtmlTree.P(contents.getContent(&quot;doclet.help.search.refer&quot;, searchSpecLink));</span>
<span class="line-added">344         htmlTree.add(searchIntro);</span>
<span class="line-added">345         htmlTree.add(searchExamples);</span>
<span class="line-added">346         htmlTree.add(searchRefer);</span>
347         ul.add(HtmlTree.LI(HtmlStyle.blockList, htmlTree));
348 
349         Content divContent = HtmlTree.DIV(HtmlStyle.contentContainer, ul);
350         divContent.add(new HtmlTree(HtmlTag.HR));
351         Content footnote = HtmlTree.SPAN(HtmlStyle.emphasizedPhrase,
352                 contents.getContent(&quot;doclet.help.footnote&quot;));
353         divContent.add(footnote);
<span class="line-modified">354         contentTree.add(divContent);</span>

355     }
356 }
</pre>
</td>
</tr>
</table>
<center><a href="FieldWriterImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HtmlConfiguration.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>