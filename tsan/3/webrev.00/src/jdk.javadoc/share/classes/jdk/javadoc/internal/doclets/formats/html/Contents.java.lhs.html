<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/Contents.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
 28 import java.util.EnumMap;
 29 import java.util.Objects;
 30 import java.util.regex.Matcher;
 31 import java.util.regex.Pattern;
 32 
 33 import jdk.javadoc.internal.doclets.formats.html.markup.Comment;
 34 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;
<a name="2" id="anc2"></a>
 35 import jdk.javadoc.internal.doclets.formats.html.markup.FixedStringContent;
<a name="3" id="anc3"></a><span class="line-removed"> 36 import jdk.javadoc.internal.doclets.formats.html.markup.RawHtml;</span>
 37 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 38 import jdk.javadoc.internal.doclets.toolkit.Content;
 39 import jdk.javadoc.internal.doclets.toolkit.Resources;
 40 import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;
 41 import jdk.javadoc.internal.doclets.toolkit.util.VisibleMemberTable;
 42 
 43 
 44 /**
 45  * Constants and factory methods for common fragments of content
 46  * used by HtmlDoclet. The string content of these fragments is
 47  * generally obtained from the {@link Resources resources} found
 48  * in the doclet&#39;s configuration.
 49  *
 50  * @implNote
 51  * Many constants are made available in this class, so that they are
 52  * only created once per doclet-instance, instead of once per generated page.
 53  */
 54 public class Contents {
<a name="4" id="anc4"></a><span class="line-removed"> 55     public static final Content SPACE = RawHtml.nbsp;</span>
<span class="line-removed"> 56     public static final Content ZERO_WIDTH_SPACE = RawHtml.zws;</span>
 57 
 58     public final Content allClassesLabel;
 59     public final Content allImplementedInterfacesLabel;
 60     public final Content allModulesLabel;
 61     public final Content allPackagesLabel;
 62     public final Content allSuperinterfacesLabel;
 63     public final Content also;
 64     public final Content annotationTypeOptionalMemberLabel;
 65     public final Content annotationTypeRequiredMemberLabel;
 66     public final Content annotateTypeOptionalMemberSummaryLabel;
 67     public final Content annotateTypeRequiredMemberSummaryLabel;
 68     public final Content annotationType;
 69     public final Content annotationTypeDetailsLabel;
 70     public final Content annotationTypeMemberDetail;
 71     public final Content annotationtypes;
 72     public final Content annotationTypes;
 73     public final Content classLabel;
 74     public final Content classes;
 75     public final Content constantFieldLabel;
 76     public final Content constantsSummaryTitle;
 77     public final Content constructorLabel;
 78     public final Content constructorDetailsLabel;
 79     public final Content constructorSummaryLabel;
 80     public final Content constructors;
 81     public final Content contentsHeading;
 82     public final Content defaultPackageLabel;
 83     public final Content default_;
 84     public final Content deprecatedAPI;
 85     public final Content deprecatedLabel;
 86     public final Content deprecatedPhrase;
 87     public final Content deprecatedForRemovalPhrase;
 88     public final Content descfrmClassLabel;
 89     public final Content descfrmInterfaceLabel;
 90     public final Content descriptionLabel;
 91     public final Content detailLabel;
 92     public final Content enclosingClassLabel;
 93     public final Content enclosingInterfaceLabel;
 94     public final Content enumConstantLabel;
 95     public final Content enumConstantDetailLabel;
 96     public final Content enumConstantSummary;
 97     public final Content enum_;
 98     public final Content enums;
 99     public final Content error;
100     public final Content errors;
101     public final Content exception;
102     public final Content exceptions;
103     public final Content exportedTo;
104     public final Content fieldLabel;
105     public final Content fieldDetailsLabel;
106     public final Content fieldSummaryLabel;
107     public final Content fields;
108     public final Content framesLabel;
109     public final Content fromLabel;
110     public final Content functionalInterface;
111     public final Content functionalInterfaceMessage;
112     public final Content helpLabel;
113     public final Content hierarchyForAllPackages;
114     public final Content implementation;
115     public final Content implementingClassesLabel;
116     public final Content inClass;
117     public final Content inInterface;
118     public final Content indexLabel;
119     public final Content interfaceLabel;
120     public final Content interfaces;
121     public final Content methodDetailLabel;
122     public final Content methodLabel;
123     public final Content methodSummary;
124     public final Content methods;
125     public final Content modifierAndTypeLabel;
126     public final Content modifierLabel;
127     public final Content moduleLabel;
128     public final Content module_;
129     public final Content moduleSubNavLabel;
130     public final Content modulesLabel;
131     public final Content navAnnotationTypeMember;
132     public final Content navAnnotationTypeOptionalMember;
133     public final Content navAnnotationTypeRequiredMember;
134     public final Content navConstructor;
135     public final Content navEnum;
136     public final Content navField;
137     public final Content navMethod;
138     public final Content navModuleDescription;
139     public final Content navModules;
140     public final Content navNested;
141     public final Content navPackages;
142     public final Content navProperty;
143     public final Content navServices;
144     public final Content nestedClassSummary;
145     public final Content newPage;
146     public final Content noFramesLabel;
147     public final Content noScriptMessage;
148     public final Content openModuleLabel;
149     public final Content openedTo;
150     public final Content overridesLabel;
151     public final Content overviewLabel;
152     public final Content packageHierarchies;
153     public final Content packageLabel;
154     public final Content package_;
155     public final Content packagesLabel;
156     public final Content properties;
157     public final Content propertyLabel;
158     public final Content propertyDetailsLabel;
159     public final Content propertySummaryLabel;
<a name="5" id="anc5"></a>

160     public final Content seeLabel;
161     public final Content serializedForm;
162     public final Content servicesLabel;
163     public final Content specifiedByLabel;
164     public final Content subclassesLabel;
165     public final Content subinterfacesLabel;
166     public final Content summaryLabel;
<a name="6" id="anc6"></a>

167     public final Content treeLabel;
168     public final Content typeLabel;
169     public final Content useLabel;
170     public final Content valueLabel;
171 
172     private final EnumMap&lt;VisibleMemberTable.Kind, Content&gt; navLinkLabels;
173 
174     private final Resources resources;
175 
176     /**
177      * Creates a {@code Contents} object.
178      *
179      * @param configuration the configuration in which to find the
180      * resources used to look up resource keys, and other details.
181      */
182     Contents(HtmlConfiguration configuration) {
<a name="7" id="anc7"></a><span class="line-modified">183         this.resources = configuration.getResources();</span>
184 
185         allClassesLabel = getNonBreakContent(&quot;doclet.All_Classes&quot;);
186         allImplementedInterfacesLabel = getContent(&quot;doclet.All_Implemented_Interfaces&quot;);
187         allModulesLabel = getNonBreakContent(&quot;doclet.All_Modules&quot;);
188         allPackagesLabel = getNonBreakContent(&quot;doclet.All_Packages&quot;);
189         allSuperinterfacesLabel = getContent(&quot;doclet.All_Superinterfaces&quot;);
190         also = getContent(&quot;doclet.also&quot;);
191         annotationTypeOptionalMemberLabel = getContent(&quot;doclet.Annotation_Type_Optional_Member&quot;);
192         annotationTypeRequiredMemberLabel = getContent(&quot;doclet.Annotation_Type_Required_Member&quot;);
193         annotateTypeOptionalMemberSummaryLabel = getContent(&quot;doclet.Annotation_Type_Optional_Member_Summary&quot;);
194         annotateTypeRequiredMemberSummaryLabel = getContent(&quot;doclet.Annotation_Type_Required_Member_Summary&quot;);
195         annotationType = getContent(&quot;doclet.AnnotationType&quot;);
196         annotationTypeDetailsLabel = getContent(&quot;doclet.Annotation_Type_Member_Detail&quot;);
197         annotationTypeMemberDetail = getContent(&quot;doclet.Annotation_Type_Member_Detail&quot;);
198         annotationTypes = getContent(&quot;doclet.AnnotationTypes&quot;);
199         annotationtypes = getContent(&quot;doclet.annotationtypes&quot;);
200         classLabel = getContent(&quot;doclet.Class&quot;);
201         classes = getContent(&quot;doclet.Classes&quot;);
202         constantFieldLabel = getContent(&quot;doclet.ConstantField&quot;);
203         constantsSummaryTitle = getContent(&quot;doclet.Constants_Summary&quot;);
204         constructorLabel = getContent(&quot;doclet.Constructor&quot;);
205         constructorDetailsLabel = getContent(&quot;doclet.Constructor_Detail&quot;);
206         constructorSummaryLabel = getContent(&quot;doclet.Constructor_Summary&quot;);
207         constructors = getContent(&quot;doclet.Constructors&quot;);
208         contentsHeading = getContent(&quot;doclet.Contents&quot;);
209         defaultPackageLabel = new StringContent(DocletConstants.DEFAULT_PACKAGE_NAME);
210         default_ = getContent(&quot;doclet.Default&quot;);
211         deprecatedAPI = getContent(&quot;doclet.Deprecated_API&quot;);
212         deprecatedLabel = getContent(&quot;doclet.navDeprecated&quot;);
213         deprecatedPhrase = getContent(&quot;doclet.Deprecated&quot;);
214         deprecatedForRemovalPhrase = getContent(&quot;doclet.DeprecatedForRemoval&quot;);
215         descfrmClassLabel = getContent(&quot;doclet.Description_From_Class&quot;);
216         descfrmInterfaceLabel = getContent(&quot;doclet.Description_From_Interface&quot;);
217         descriptionLabel = getContent(&quot;doclet.Description&quot;);
218         detailLabel = getContent(&quot;doclet.Detail&quot;);
219         enclosingClassLabel = getContent(&quot;doclet.Enclosing_Class&quot;);
220         enclosingInterfaceLabel = getContent(&quot;doclet.Enclosing_Interface&quot;);
221         enumConstantLabel = getContent(&quot;doclet.Enum_Constant&quot;);
222         enumConstantDetailLabel = getContent(&quot;doclet.Enum_Constant_Detail&quot;);
223         enumConstantSummary = getContent(&quot;doclet.Enum_Constant_Summary&quot;);
224         enum_ = getContent(&quot;doclet.Enum&quot;);
225         enums = getContent(&quot;doclet.Enums&quot;);
226         error = getContent(&quot;doclet.Error&quot;);
227         errors = getContent(&quot;doclet.Errors&quot;);
228         exception = getContent(&quot;doclet.Exception&quot;);
229         exceptions = getContent(&quot;doclet.Exceptions&quot;);
230         exportedTo = getContent(&quot;doclet.ExportedTo&quot;);
231         fieldDetailsLabel = getContent(&quot;doclet.Field_Detail&quot;);
232         fieldSummaryLabel = getContent(&quot;doclet.Field_Summary&quot;);
233         fieldLabel = getContent(&quot;doclet.Field&quot;);
234         fields = getContent(&quot;doclet.Fields&quot;);
235         framesLabel = getContent(&quot;doclet.Frames&quot;);
236         fromLabel = getContent(&quot;doclet.From&quot;);
237         functionalInterface = getContent(&quot;doclet.Functional_Interface&quot;);
238         functionalInterfaceMessage = getContent(&quot;doclet.Functional_Interface_Message&quot;);
239         helpLabel = getContent(&quot;doclet.Help&quot;);
240         hierarchyForAllPackages = getContent(&quot;doclet.Hierarchy_For_All_Packages&quot;);
241         implementation = getContent(&quot;doclet.Implementation&quot;);
242         implementingClassesLabel = getContent(&quot;doclet.Implementing_Classes&quot;);
243         inClass = getContent(&quot;doclet.in_class&quot;);
244         inInterface = getContent(&quot;doclet.in_interface&quot;);
245         indexLabel = getContent(&quot;doclet.Index&quot;);
246         interfaceLabel = getContent(&quot;doclet.Interface&quot;);
247         interfaces = getContent(&quot;doclet.Interfaces&quot;);
248         methodDetailLabel = getContent(&quot;doclet.Method_Detail&quot;);
249         methodSummary = getContent(&quot;doclet.Method_Summary&quot;);
250         methodLabel = getContent(&quot;doclet.Method&quot;);
251         methods = getContent(&quot;doclet.Methods&quot;);
252         modifierLabel = getContent(&quot;doclet.Modifier&quot;);
253         modifierAndTypeLabel = getContent(&quot;doclet.Modifier_and_Type&quot;);
254         moduleLabel = getContent(&quot;doclet.Module&quot;);
255         module_ = getContent(&quot;doclet.module&quot;);
256         moduleSubNavLabel = getContent(&quot;doclet.Module_Sub_Nav&quot;);
257         modulesLabel = getContent(&quot;doclet.Modules&quot;);
258         navAnnotationTypeMember = getContent(&quot;doclet.navAnnotationTypeMember&quot;);
259         navAnnotationTypeOptionalMember = getContent(&quot;doclet.navAnnotationTypeOptionalMember&quot;);
260         navAnnotationTypeRequiredMember = getContent(&quot;doclet.navAnnotationTypeRequiredMember&quot;);
261         navConstructor = getContent(&quot;doclet.navConstructor&quot;);
262         navEnum = getContent(&quot;doclet.navEnum&quot;);
263         navField = getContent(&quot;doclet.navField&quot;);
264         navMethod = getContent(&quot;doclet.navMethod&quot;);
265         navModuleDescription = getContent(&quot;doclet.navModuleDescription&quot;);
266         navModules = getContent(&quot;doclet.navModules&quot;);
267         navNested = getContent(&quot;doclet.navNested&quot;);
268         navPackages = getContent(&quot;doclet.navPackages&quot;);
269         navProperty = getContent(&quot;doclet.navProperty&quot;);
270         navServices = getContent(&quot;doclet.navServices&quot;);
271         nestedClassSummary = getContent(&quot;doclet.Nested_Class_Summary&quot;);
272         newPage = new Comment(resources.getText(&quot;doclet.New_Page&quot;));
273         noFramesLabel = getNonBreakContent(&quot;doclet.No_Frames&quot;);
274         noScriptMessage = getContent(&quot;doclet.No_Script_Message&quot;);
275         openedTo = getContent(&quot;doclet.OpenedTo&quot;);
276         openModuleLabel = getContent(&quot;doclet.Open_Module&quot;);
277         overridesLabel = getContent(&quot;doclet.Overrides&quot;);
278         overviewLabel = getContent(&quot;doclet.Overview&quot;);
279         packageHierarchies = getContent(&quot;doclet.Package_Hierarchies&quot;);
280         packageLabel = getContent(&quot;doclet.Package&quot;);
281         package_ = getContent(&quot;doclet.package&quot;);
282         packagesLabel = getContent(&quot;doclet.Packages&quot;);
283         properties = getContent(&quot;doclet.Properties&quot;);
284         propertyLabel = getContent(&quot;doclet.Property&quot;);
285         propertyDetailsLabel = getContent(&quot;doclet.Property_Detail&quot;);
286         propertySummaryLabel = getContent(&quot;doclet.Property_Summary&quot;);
<a name="8" id="anc8"></a>

287         seeLabel = getContent(&quot;doclet.See&quot;);
288         serializedForm = getContent(&quot;doclet.Serialized_Form&quot;);
289         servicesLabel = getContent(&quot;doclet.Services&quot;);
290         specifiedByLabel = getContent(&quot;doclet.Specified_By&quot;);
291         subclassesLabel = getContent(&quot;doclet.Subclasses&quot;);
292         subinterfacesLabel = getContent(&quot;doclet.Subinterfaces&quot;);
293         summaryLabel = getContent(&quot;doclet.Summary&quot;);
<a name="9" id="anc9"></a>

294         treeLabel = getContent(&quot;doclet.Tree&quot;);
295         typeLabel = getContent(&quot;doclet.Type&quot;);
296         useLabel = getContent(&quot;doclet.navClassUse&quot;);
297         valueLabel = getContent(&quot;doclet.Value&quot;);
298 
299         navLinkLabels = new EnumMap&lt;&gt;(VisibleMemberTable.Kind.class);
300         navLinkLabels.put(VisibleMemberTable.Kind.INNER_CLASSES, getContent(&quot;doclet.navNested&quot;));
301         navLinkLabels.put(VisibleMemberTable.Kind.ENUM_CONSTANTS, getContent(&quot;doclet.navEnum&quot;));
302         navLinkLabels.put(VisibleMemberTable.Kind.FIELDS, getContent(&quot;doclet.navField&quot;));
303         navLinkLabels.put(VisibleMemberTable.Kind.CONSTRUCTORS, getContent(&quot;doclet.navConstructor&quot;));
304         navLinkLabels.put(VisibleMemberTable.Kind.METHODS, getContent(&quot;doclet.navMethod&quot;));
305     }
306 
307     /**
308      * Gets a {@code Content} object, containing the string for
309      * a given key in the doclet&#39;s resources.
310      *
311      * @param key the key for the desired string
312      * @return a content tree for the string
313      */
314     public Content getContent(String key) {
315         return new FixedStringContent(resources.getText(key));
316     }
317 
318     /**
319      * Gets a {@code Content} object, containing the string for
320      * a given key in the doclet&#39;s resources, formatted with
321      * given arguments.
322      *
323      * @param key the key for the desired string
324      * @param o0  string or content argument to be formatted into the result
325      * @return a content tree for the text
326      */
327     public Content getContent(String key, Object o0) {
328         return getContent(key, o0, null, null);
329     }
330 
331     /**
332      * Gets a {@code Content} object, containing the string for
333      * a given key in the doclet&#39;s resources, formatted with
334      * given arguments.
335 
336      * @param key the key for the desired string
337      * @param o0  string or content argument to be formatted into the result
338      * @param o1  string or content argument to be formatted into the result
339      * @return a content tree for the text
340      */
341     public Content getContent(String key, Object o0, Object o1) {
342         return getContent(key, o0, o1, null);
343     }
344 
345     /**
346      * Gets a {@code Content} object, containing the string for
347      * a given key in the doclet&#39;s resources, formatted with
348      * given arguments.
349      *
350      * @param key the key for the desired string
351      * @param o0  string or content argument to be formatted into the result
352      * @param o1  string or content argument to be formatted into the result
353      * @param o2  string or content argument to be formatted into the result
354      * @return a content tree for the text
355      */
356     public Content getContent(String key, Object o0, Object o1, Object o2) {
357         Content c = new ContentBuilder();
358         Pattern p = Pattern.compile(&quot;\\{([012])\\}&quot;);
359         String text = resources.getText(key); // TODO: cache
360         Matcher m = p.matcher(text);
361         int start = 0;
362         while (m.find(start)) {
363             c.add(text.substring(start, m.start()));
364 
365             Object o = null;
366             switch (m.group(1).charAt(0)) {
367                 case &#39;0&#39;: o = o0; break;
368                 case &#39;1&#39;: o = o1; break;
369                 case &#39;2&#39;: o = o2; break;
370             }
371 
372             if (o == null) {
373                 c.add(&quot;{&quot; + m.group(1) + &quot;}&quot;);
374             } else if (o instanceof String) {
375                 c.add((String) o);
376             } else if (o instanceof Content) {
377                 c.add((Content) o);
378             }
379 
380             start = m.end();
381         }
382 
383         c.add(text.substring(start));
384         return c;
385     }
386 
387     /**
388      * Gets a {@code Content} object, containing the string for
389      * a given key in the doclet&#39;s resources, substituting
390      * &lt;code&gt;&amp;nbsp;&lt;/code&gt; for any space characters found in
391      * the named resource string.
392      *
393      * @param key the key for the desired string
394      * @return a content tree for the string
395      */
396     private Content getNonBreakContent(String key) {
397         String text = resources.getText(key); // TODO: cache
398         Content c = new ContentBuilder();
399         int start = 0;
400         int p;
401         while ((p = text.indexOf(&quot; &quot;, start)) != -1) {
402             c.add(text.substring(start, p));
<a name="10" id="anc10"></a><span class="line-modified">403             c.add(RawHtml.nbsp);</span>
404             start = p + 1;
405         }
406         c.add(text.substring(start));
407         return c; // TODO: should be made immutable
408     }
409 
410     /**
411      * Returns a content for a visible member kind.
412      * @param kind the visible member table kind.
413      * @return the string content
414      */
415     public Content getNavLinkLabelContent(VisibleMemberTable.Kind kind) {
416         return Objects.requireNonNull(navLinkLabels.get(kind));
417     }
418 }
<a name="11" id="anc11"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="11" type="hidden" />
</body>
</html>