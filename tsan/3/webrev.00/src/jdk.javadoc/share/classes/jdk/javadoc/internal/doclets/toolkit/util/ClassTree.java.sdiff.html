<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/ClassTree.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../taglets/package-info.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ClassUseMapper.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/toolkit/util/ClassTree.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 40 
 41 import javax.lang.model.element.Element;
 42 import javax.lang.model.element.TypeElement;
 43 import javax.lang.model.type.TypeMirror;
 44 
 45 import jdk.javadoc.doclet.DocletEnvironment;
 46 import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
 47 import jdk.javadoc.internal.doclets.toolkit.Messages;
 48 
 49 /**
 50  * Build Class Hierarchy for all the Classes. This class builds the Class
 51  * Tree and the Interface Tree separately.
 52  *
 53  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 54  *  If you write code that depends on this, you do so at your own risk.
 55  *  This code and its internal interfaces are subject to change or
 56  *  deletion without notice.&lt;/b&gt;
 57  *
 58  * @see java.util.HashMap
 59  * @see java.util.List
<span class="line-removed"> 60  * @author Atul M Dambalkar</span>
 61  */
 62 public class ClassTree {
 63 
 64     /**
 65      * List of base classes. Used to get the mapped listing of sub-classes.
 66      */
 67     private final SortedSet&lt;TypeElement&gt; baseClasses;
 68 
 69     /**
 70      * Mapping for each Class with their sub classes
 71      */
 72     private final Map&lt;TypeElement, SortedSet&lt;TypeElement&gt;&gt; subClasses = new HashMap&lt;&gt;();
 73 
 74     /**
 75      * List of base-interfaces. Contains set of all the interfaces who do not
 76      * have super-interfaces. Can be used to get the mapped listing of
 77      * sub-interfaces.
 78      */
 79     private final SortedSet&lt;TypeElement&gt; baseInterfaces;
 80 
</pre>
<hr />
<pre>
150         baseAnnotationTypes = new TreeSet&lt;&gt;(comparator);
151         baseEnums = new TreeSet&lt;&gt;(comparator);
152         baseClasses = new TreeSet&lt;&gt;(comparator);
153         baseInterfaces = new TreeSet&lt;&gt;(comparator);
154         buildTree(classesSet);
155     }
156 
157     /**
158      * Generate mapping for the sub-classes for every class in this run.
159      * Return the sub-class set for java.lang.Object which will be having
160      * sub-class listing for itself and also for each sub-class itself will
161      * have their own sub-class lists.
162      *
163      * @param classes all the classes in this run.
164      */
165     private void buildTree(Iterable&lt;TypeElement&gt; classes) {
166         for (TypeElement aClass : classes) {
167             // In the tree page (e.g overview-tree.html) do not include
168             // information of classes which are deprecated or are a part of a
169             // deprecated package.
<span class="line-modified">170             if (configuration.nodeprecated &amp;&amp;</span>
171                     (utils.isDeprecated(aClass) ||
172                     utils.isDeprecated(utils.containingPackage(aClass)))) {
173                 continue;
174             }
175 
176             if (utils.hasHiddenTag(aClass)) {
177                 continue;
178             }
179 
180             if (utils.isEnum(aClass)) {
181                 processType(aClass, configuration, baseEnums, subEnums);
182             } else if (utils.isClass(aClass)) {
183                 processType(aClass, configuration, baseClasses, subClasses);
184             } else if (utils.isInterface(aClass)) {
185                 processInterface(aClass);
186             } else if (utils.isAnnotationType(aClass)) {
187                 processType(aClass, configuration, baseAnnotationTypes,
188                     subAnnotationTypes);
189             }
190         }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 40 
 41 import javax.lang.model.element.Element;
 42 import javax.lang.model.element.TypeElement;
 43 import javax.lang.model.type.TypeMirror;
 44 
 45 import jdk.javadoc.doclet.DocletEnvironment;
 46 import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;
 47 import jdk.javadoc.internal.doclets.toolkit.Messages;
 48 
 49 /**
 50  * Build Class Hierarchy for all the Classes. This class builds the Class
 51  * Tree and the Interface Tree separately.
 52  *
 53  *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
 54  *  If you write code that depends on this, you do so at your own risk.
 55  *  This code and its internal interfaces are subject to change or
 56  *  deletion without notice.&lt;/b&gt;
 57  *
 58  * @see java.util.HashMap
 59  * @see java.util.List

 60  */
 61 public class ClassTree {
 62 
 63     /**
 64      * List of base classes. Used to get the mapped listing of sub-classes.
 65      */
 66     private final SortedSet&lt;TypeElement&gt; baseClasses;
 67 
 68     /**
 69      * Mapping for each Class with their sub classes
 70      */
 71     private final Map&lt;TypeElement, SortedSet&lt;TypeElement&gt;&gt; subClasses = new HashMap&lt;&gt;();
 72 
 73     /**
 74      * List of base-interfaces. Contains set of all the interfaces who do not
 75      * have super-interfaces. Can be used to get the mapped listing of
 76      * sub-interfaces.
 77      */
 78     private final SortedSet&lt;TypeElement&gt; baseInterfaces;
 79 
</pre>
<hr />
<pre>
149         baseAnnotationTypes = new TreeSet&lt;&gt;(comparator);
150         baseEnums = new TreeSet&lt;&gt;(comparator);
151         baseClasses = new TreeSet&lt;&gt;(comparator);
152         baseInterfaces = new TreeSet&lt;&gt;(comparator);
153         buildTree(classesSet);
154     }
155 
156     /**
157      * Generate mapping for the sub-classes for every class in this run.
158      * Return the sub-class set for java.lang.Object which will be having
159      * sub-class listing for itself and also for each sub-class itself will
160      * have their own sub-class lists.
161      *
162      * @param classes all the classes in this run.
163      */
164     private void buildTree(Iterable&lt;TypeElement&gt; classes) {
165         for (TypeElement aClass : classes) {
166             // In the tree page (e.g overview-tree.html) do not include
167             // information of classes which are deprecated or are a part of a
168             // deprecated package.
<span class="line-modified">169             if (configuration.getOptions().noDeprecated() &amp;&amp;</span>
170                     (utils.isDeprecated(aClass) ||
171                     utils.isDeprecated(utils.containingPackage(aClass)))) {
172                 continue;
173             }
174 
175             if (utils.hasHiddenTag(aClass)) {
176                 continue;
177             }
178 
179             if (utils.isEnum(aClass)) {
180                 processType(aClass, configuration, baseEnums, subEnums);
181             } else if (utils.isClass(aClass)) {
182                 processType(aClass, configuration, baseClasses, subClasses);
183             } else if (utils.isInterface(aClass)) {
184                 processInterface(aClass);
185             } else if (utils.isAnnotationType(aClass)) {
186                 processType(aClass, configuration, baseAnnotationTypes,
187                     subAnnotationTypes);
188             }
189         }
</pre>
</td>
</tr>
</table>
<center><a href="../taglets/package-info.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ClassUseMapper.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>