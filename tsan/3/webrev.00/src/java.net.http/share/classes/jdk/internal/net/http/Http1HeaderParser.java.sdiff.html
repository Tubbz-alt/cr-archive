<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.net.http/share/classes/jdk/internal/net/http/Http1HeaderParser.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ExchangeImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Http1Request.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.net.http/share/classes/jdk/internal/net/http/Http1HeaderParser.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
177         } else if (c == LF) {
178             state = State.STATUS_LINE_FOUND_LF;
179         }
180     }
181 
182     private void readStatusLineFeed(ByteBuffer input) throws ProtocolException {
183         char c = state == State.STATUS_LINE_FOUND_LF ? LF : (char)input.get();
184         if (c != LF) {
185             throw protocolException(&quot;Bad trailing char, \&quot;%s\&quot;, when parsing status line, \&quot;%s\&quot;&quot;,
186                                     c, sb.toString());
187         }
188 
189         statusLine = sb.toString();
190         sb = new StringBuilder();
191         if (!statusLine.startsWith(&quot;HTTP/1.&quot;)) {
192             throw protocolException(&quot;Invalid status line: \&quot;%s\&quot;&quot;, statusLine);
193         }
194         if (statusLine.length() &lt; 12) {
195             throw protocolException(&quot;Invalid status line: \&quot;%s\&quot;&quot;, statusLine);
196         }
<span class="line-modified">197         responseCode = Integer.parseInt(statusLine.substring(9, 12));</span>








198 
199         state = State.STATUS_LINE_END;
200     }
201 
202     private void maybeStartHeaders(ByteBuffer input) {
203         assert state == State.STATUS_LINE_END;
204         assert sb.length() == 0;
205         char c = (char)input.get();
206         if (c == CR) {
207             state = State.STATUS_LINE_END_CR;
208         } else if (c == LF) {
209             state = State.STATUS_LINE_END_LF;
210         } else {
211             sb.append(c);
212             state = State.HEADER;
213         }
214     }
215 
216     private void maybeEndHeaders(ByteBuffer input) throws ProtocolException {
217         assert state == State.STATUS_LINE_END_CR || state == State.STATUS_LINE_END_LF;
</pre>
</td>
<td>
<hr />
<pre>
177         } else if (c == LF) {
178             state = State.STATUS_LINE_FOUND_LF;
179         }
180     }
181 
182     private void readStatusLineFeed(ByteBuffer input) throws ProtocolException {
183         char c = state == State.STATUS_LINE_FOUND_LF ? LF : (char)input.get();
184         if (c != LF) {
185             throw protocolException(&quot;Bad trailing char, \&quot;%s\&quot;, when parsing status line, \&quot;%s\&quot;&quot;,
186                                     c, sb.toString());
187         }
188 
189         statusLine = sb.toString();
190         sb = new StringBuilder();
191         if (!statusLine.startsWith(&quot;HTTP/1.&quot;)) {
192             throw protocolException(&quot;Invalid status line: \&quot;%s\&quot;&quot;, statusLine);
193         }
194         if (statusLine.length() &lt; 12) {
195             throw protocolException(&quot;Invalid status line: \&quot;%s\&quot;&quot;, statusLine);
196         }
<span class="line-modified">197         try {</span>
<span class="line-added">198             responseCode = Integer.parseInt(statusLine.substring(9, 12));</span>
<span class="line-added">199         } catch (NumberFormatException nfe) {</span>
<span class="line-added">200             throw protocolException(&quot;Invalid status line: \&quot;%s\&quot;&quot;, statusLine);</span>
<span class="line-added">201         }</span>
<span class="line-added">202         // response code expected to be a 3-digit integer (RFC-2616, section 6.1.1)</span>
<span class="line-added">203         if (responseCode &lt; 100) {</span>
<span class="line-added">204             throw protocolException(&quot;Invalid status line: \&quot;%s\&quot;&quot;, statusLine);</span>
<span class="line-added">205         }</span>
206 
207         state = State.STATUS_LINE_END;
208     }
209 
210     private void maybeStartHeaders(ByteBuffer input) {
211         assert state == State.STATUS_LINE_END;
212         assert sb.length() == 0;
213         char c = (char)input.get();
214         if (c == CR) {
215             state = State.STATUS_LINE_END_CR;
216         } else if (c == LF) {
217             state = State.STATUS_LINE_END_LF;
218         } else {
219             sb.append(c);
220             state = State.HEADER;
221         }
222     }
223 
224     private void maybeEndHeaders(ByteBuffer input) throws ProtocolException {
225         assert state == State.STATUS_LINE_END_CR || state == State.STATUS_LINE_END_LF;
</pre>
</td>
</tr>
</table>
<center><a href="ExchangeImpl.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Http1Request.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>