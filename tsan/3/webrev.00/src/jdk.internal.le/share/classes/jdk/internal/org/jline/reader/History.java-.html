<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/jdk.internal.le/share/classes/jdk/internal/org/jline/reader/History.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2002-2018, the original author or authors.
  3  *
  4  * This software is distributable under the BSD license. See the terms of the
  5  * BSD license in the documentation provided with this software.
  6  *
  7  * http://www.opensource.org/licenses/bsd-license.php
  8  */
  9 package jdk.internal.org.jline.reader;
 10 
 11 import java.io.IOException;
 12 import java.time.Instant;
 13 import java.util.Iterator;
 14 import java.util.ListIterator;
 15 
 16 /**
 17  * Console history.
 18  *
 19  * @author &lt;a href=&quot;mailto:mwp1@cornell.edu&quot;&gt;Marc Prud&#39;hommeaux&lt;/a&gt;
 20  * @author &lt;a href=&quot;mailto:jason@planet57.com&quot;&gt;Jason Dillon&lt;/a&gt;
 21  * @since 2.3
 22  */
 23 public interface History extends Iterable&lt;History.Entry&gt;
 24 {
 25 
 26     /**
 27      * Initialize the history for the given reader.
 28      * @param reader the reader to attach to
 29      */
 30     void attach(LineReader reader);
 31 
 32     /**
 33      * Load history.
 34      * @throws IOException if a problem occurs
 35      */
 36     void load() throws IOException;
 37 
 38     /**
 39      * Save history.
 40      * @throws IOException if a problem occurs
 41      */
 42     void save() throws IOException;
 43 
 44     /**
 45      * Purge history.
 46      * @throws IOException if a problem occurs
 47      */
 48     void purge() throws IOException;
 49 
 50 
 51     int size();
 52 
 53     default boolean isEmpty() {
 54         return size() == 0;
 55     }
 56 
 57     int index();
 58 
 59     int first();
 60 
 61     int last();
 62 
 63     String get(int index);
 64 
 65     default void add(String line) {
 66         add(Instant.now(), line);
 67     }
 68 
 69     void add(Instant time, String line);
 70 
 71     /**
 72      * Check if an entry should be persisted or not.
 73      *
 74      * @param entry the entry to check
 75      * @return &lt;code&gt;true&lt;/code&gt; if the given entry should be persisted, &lt;code&gt;false&lt;/code&gt; otherwise
 76      */
 77     default boolean isPersistable(Entry entry) {
 78         return true;
 79     }
 80 
 81     //
 82     // Entries
 83     //
 84 
 85     interface Entry
 86     {
 87         int index();
 88 
 89         Instant time();
 90 
 91         String line();
 92     }
 93 
 94     ListIterator&lt;Entry&gt; iterator(int index);
 95 
 96     default ListIterator&lt;Entry&gt; iterator() {
 97         return iterator(first());
 98     }
 99 
100     default Iterator&lt;Entry&gt; reverseIterator() {
101         return reverseIterator(last());
102     }
103 
104     default Iterator&lt;Entry&gt; reverseIterator(int index) {
105         return new Iterator&lt;Entry&gt;() {
106             private final ListIterator&lt;Entry&gt; it = iterator(index + 1);
107             @Override
108             public boolean hasNext() {
109                 return it.hasPrevious();
110             }
111             @Override
112             public Entry next() {
113                 return it.previous();
114             }
115         };
116     }
117 
118     //
119     // Navigation
120     //
121 
122     /**
123      * Return the content of the current buffer.
124      *
125      * @return the content of the current buffer
126      */
127     String current();
128 
129     /**
130      * Move the pointer to the previous element in the buffer.
131      *
132      * @return true if we successfully went to the previous element
133      */
134     boolean previous();
135 
136     /**
137      * Move the pointer to the next element in the buffer.
138      *
139      * @return true if we successfully went to the next element
140      */
141     boolean next();
142 
143     /**
144      * Moves the history index to the first entry.
145      *
146      * @return Return false if there are no iterator in the history or if the
147      * history is already at the beginning.
148      */
149     boolean moveToFirst();
150 
151     /**
152      * This moves the history to the last entry. This entry is one position
153      * before the moveToEnd() position.
154      *
155      * @return Returns false if there were no history iterator or the history
156      * index was already at the last entry.
157      */
158     boolean moveToLast();
159 
160     /**
161      * Move to the specified index in the history
162      *
163      * @param index The index to move to.
164      * @return      Returns true if the index was moved.
165      */
166     boolean moveTo(int index);
167 
168     /**
169      * Move to the end of the history buffer. This will be a blank entry, after
170      * all of the other iterator.
171      */
172     void moveToEnd();
173 }
    </pre>
  </body>
</html>