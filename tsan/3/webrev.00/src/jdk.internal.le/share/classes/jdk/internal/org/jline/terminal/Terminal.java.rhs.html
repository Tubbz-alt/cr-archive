<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.internal.le/share/classes/jdk/internal/org/jline/terminal/Terminal.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2002-2018, the original author or authors.
  3  *
  4  * This software is distributable under the BSD license. See the terms of the
  5  * BSD license in the documentation provided with this software.
  6  *
<a name="1" id="anc1"></a><span class="line-modified">  7  * https://opensource.org/licenses/BSD-3-Clause</span>
  8  */
  9 package jdk.internal.org.jline.terminal;
 10 
 11 import java.io.Closeable;
 12 import java.io.Flushable;
 13 import java.io.InputStream;
 14 import java.io.OutputStream;
 15 import java.io.PrintWriter;
 16 import java.nio.charset.Charset;
 17 import java.util.function.IntConsumer;
 18 import java.util.function.IntSupplier;
 19 
 20 import jdk.internal.org.jline.terminal.impl.NativeSignalHandler;
 21 import jdk.internal.org.jline.utils.InfoCmp.Capability;
 22 import jdk.internal.org.jline.utils.NonBlockingReader;
 23 
 24 /**
 25  * A terminal representing a virtual terminal on the computer.
 26  *
 27  * Terminals should be closed by calling the {@link #close()} method
 28  * in order to restore their original state.
 29  */
 30 public interface Terminal extends Closeable, Flushable {
 31 
 32     /**
 33      * Type used for dumb terminals.
 34      */
 35     String TYPE_DUMB = &quot;dumb&quot;;
 36     String TYPE_DUMB_COLOR = &quot;dumb-color&quot;;
 37 
 38     String getName();
 39 
 40     //
 41     // Signal support
 42     //
 43 
 44     enum Signal {
 45         INT,
 46         QUIT,
 47         TSTP,
 48         CONT,
 49         INFO,
 50         WINCH
 51     }
 52 
 53     interface SignalHandler {
 54 
 55         SignalHandler SIG_DFL = NativeSignalHandler.SIG_DFL;
 56         SignalHandler SIG_IGN = NativeSignalHandler.SIG_IGN;
 57 
 58         void handle(Signal signal);
 59     }
 60 
 61     SignalHandler handle(Signal signal, SignalHandler handler);
 62 
 63     void raise(Signal signal);
 64 
 65     //
 66     // Input / output
 67     //
 68 
 69     /**
 70      * Retrieve the &lt;code&gt;Reader&lt;/code&gt; for this terminal.
 71      * This is the standard way to read input from this terminal.
 72      * The reader is non blocking.
 73      *
 74      * @return The non blocking reader
 75      */
 76     NonBlockingReader reader();
 77 
 78     /**
 79      * Retrieve the &lt;code&gt;Writer&lt;/code&gt; for this terminal.
 80      * This is the standard way to write to this terminal.
 81      *
 82      * @return The writer
 83      */
 84     PrintWriter writer();
 85 
 86     /**
 87      * Returns the {@link Charset} that should be used to encode characters
 88      * for {@link #input()} and {@link #output()}.
 89      *
 90      * @return The terminal encoding
 91      */
 92     Charset encoding();
 93 
 94     /**
 95      * Retrieve the input stream for this terminal.
 96      * In some rare cases, there may be a need to access the
 97      * terminal input stream directly. In the usual cases,
 98      * use the {@link #reader()} instead.
 99      *
100      * @return The input stream
101      *
102      * @see #reader()
103      */
104     InputStream input();
105 
106     /**
107      * Retrieve the output stream for this terminal.
108      * In some rare cases, there may be a need to access the
109      * terminal output stream directly. In the usual cases,
110      * use the {@link #writer()} instead.
111      *
112      * @return The output stream
113      *
<a name="2" id="anc2"></a><span class="line-modified">114      * @see #writer()</span>
115      */
116     OutputStream output();
117 
118     //
119     // Input control
120     //
121 
122     /**
123      * Whether this terminal supports {@link #pause()} and {@link #resume()} calls.
124      *
125      * @return whether this terminal supports {@link #pause()} and {@link #resume()} calls.
126      * @see #paused()
127      * @see #pause()
128      * @see #resume()
129      */
130     boolean canPauseResume();
131 
132     /**
133      * Stop reading the input stream.
134      *
135      * @see #resume()
136      * @see #paused()
137      */
138     void pause();
139 
140     /**
141      * Stop reading the input stream and optionally wait for the underlying threads to finish.
142      *
143      * @param wait &lt;code&gt;true&lt;/code&gt; to wait until the terminal is actually paused
144      * @throws InterruptedException if the call has been interrupted
145      */
146     void pause(boolean wait) throws InterruptedException;
147 
148     /**
149      * Resume reading the input stream.
150      *
151      * @see #pause()
152      * @see #paused()
153      */
154     void resume();
155 
156     /**
157      * Check whether the terminal is currently reading the input stream or not.
158      * In order to process signal as quickly as possible, the terminal need to read
159      * the input stream and buffer it internally so that it can detect specific
160      * characters in the input stream (Ctrl+C, Ctrl+D, etc...) and raise the
161      * appropriate signals.
162      * However, there are some cases where this processing should be disabled, for
163      * example when handing the terminal control to a subprocess.
164      *
165      * @return whether the terminal is currently reading the input stream or not
166      *
167      * @see #pause()
168      * @see #resume()
169      */
170     boolean paused();
171 
172     //
173     // Pty settings
174     //
175 
176     Attributes enterRawMode();
177 
178     boolean echo();
179 
180     boolean echo(boolean echo);
181 
182     Attributes getAttributes();
183 
184     void setAttributes(Attributes attr);
185 
<a name="3" id="anc3"></a><span class="line-added">186     /**</span>
<span class="line-added">187      * Retrieve the size of the visible window</span>
<span class="line-added">188      * @return the visible terminal size</span>
<span class="line-added">189      * @see #getBufferSize()</span>
<span class="line-added">190      */</span>
191     Size getSize();
192 
193     void setSize(Size size);
194 
195     default int getWidth() {
196         return getSize().getColumns();
197     }
198 
199     default int getHeight() {
200         return getSize().getRows();
201     }
202 
<a name="4" id="anc4"></a><span class="line-added">203     /**</span>
<span class="line-added">204      * Retrieve the size of the window buffer.</span>
<span class="line-added">205      * Some terminals can be configured to have a buffer size</span>
<span class="line-added">206      * larger than the visible window size and provide scroll bars.</span>
<span class="line-added">207      * In such cases, this method should attempt to return the size</span>
<span class="line-added">208      * of the whole buffer.  The &lt;code&gt;getBufferSize()&lt;/code&gt; method</span>
<span class="line-added">209      * can be used to avoid wrapping when using the terminal in a line</span>
<span class="line-added">210      * editing mode, while the {@link #getSize()} method should be</span>
<span class="line-added">211      * used when using full screen mode.</span>
<span class="line-added">212      * @return the terminal buffer size</span>
<span class="line-added">213      * @see #getSize()</span>
<span class="line-added">214      */</span>
<span class="line-added">215     default Size getBufferSize() {</span>
<span class="line-added">216         return getSize();</span>
<span class="line-added">217     }</span>
<span class="line-added">218 </span>
219     void flush();
220 
221     //
222     // Infocmp capabilities
223     //
224 
225     String getType();
226 
227     boolean puts(Capability capability, Object... params);
228 
229     boolean getBooleanCapability(Capability capability);
230 
231     Integer getNumericCapability(Capability capability);
232 
233     String getStringCapability(Capability capability);
234 
235     //
236     // Cursor support
237     //
238 
239     /**
240      * Query the terminal to report the cursor position.
241      *
242      * As the response is read from the input stream, some
243      * characters may be read before the cursor position is actually
244      * read. Those characters can be given back using
245      * &lt;code&gt;org.jline.keymap.BindingReader#runMacro(String)&lt;/code&gt;
246      *
247      * @param discarded a consumer receiving discarded characters
248      * @return &lt;code&gt;null&lt;/code&gt; if cursor position reporting
249      *                  is not supported or a valid cursor position
250      */
251     Cursor getCursorPosition(IntConsumer discarded);
252 
253     //
254     // Mouse support
255     //
256 
257     enum MouseTracking {
258         /**
259          * Disable mouse tracking
260          */
261         Off,
262         /**
263          * Track button press and release.
264          */
265         Normal,
266         /**
267          * Also report button-motion events.  Mouse movements are reported if the mouse pointer
268          * has moved to a different character cell.
269          */
270         Button,
271         /**
272          * Report all motions events, even if no mouse button is down.
273          */
274         Any
275     }
276 
277     /**
278      * Returns &lt;code&gt;true&lt;/code&gt; if the terminal has support for mouse.
279      * @return whether mouse is supported by the terminal
280      * @see #trackMouse(MouseTracking)
281      */
282     boolean hasMouseSupport();
283 
284     /**
285      * Change the mouse tracking mouse.
286      * To start mouse tracking, this method must be called with a valid mouse tracking mode.
287      * Mouse events will be reported by writing the {@link Capability#key_mouse} to the input stream.
288      * When this character sequence is detected, the {@link #readMouseEvent()} method can be
289      * called to actually read the corresponding mouse event.
290      *
291      * @param tracking the mouse tracking mode
292      * @return &lt;code&gt;true&lt;/code&gt; if mouse tracking is supported
293      */
294     boolean trackMouse(MouseTracking tracking);
295 
296     /**
297      * Read a MouseEvent from the terminal input stream.
298      * Such an event must have been detected by scanning the terminal&#39;s {@link Capability#key_mouse}
299      * in the stream immediately before reading the event.
300      *
301      * @return the decoded mouse event.
302      * @see #trackMouse(MouseTracking)
303      */
304     MouseEvent readMouseEvent();
305 
306     /**
307      * Read a MouseEvent from the given input stream.
308      *
309      * @param reader the input supplier
310      * @return the decoded mouse event
311      */
312     MouseEvent readMouseEvent(IntSupplier reader);
313 
314     /**
315      * Returns &lt;code&gt;true&lt;/code&gt; if the terminal has support for focus tracking.
316      * @return whether focus tracking is supported by the terminal
317      * @see #trackFocus(boolean)
318      */
319     boolean hasFocusSupport();
320 
321     /**
322      * Enable or disable focus tracking mode.
323      * When focus tracking has been activated, each time the terminal grabs the focus,
324      * the string &quot;\33[I&quot; will be sent to the input stream and each time the focus is lost,
325      * the string &quot;\33[O&quot; will be sent to the input stream.
326      *
327      * @param tracking whether the focus tracking mode should be enabled or not
328      * @return &lt;code&gt;true&lt;/code&gt; if focus tracking is supported
329      */
330     boolean trackFocus(boolean tracking);
331 }
<a name="5" id="anc5"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="5" type="hidden" />
</body>
</html>