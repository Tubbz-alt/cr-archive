<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.le/share/classes/jdk/internal/org/jline/utils/Curses.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Colors.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="DiffHelper.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.le/share/classes/jdk/internal/org/jline/utils/Curses.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
  2  * Copyright (c) 2002-2018, the original author or authors.
  3  *
  4  * This software is distributable under the BSD license. See the terms of the
  5  * BSD license in the documentation provided with this software.
  6  *
<span class="line-modified">  7  * http://www.opensource.org/licenses/bsd-license.php</span>
  8  */
  9 package jdk.internal.org.jline.utils;
 10 
 11 import java.io.Flushable;
 12 import java.io.IOError;
 13 import java.io.IOException;
 14 import java.io.StringWriter;
 15 import java.util.Stack;
 16 
 17 /**
 18  * Curses helper methods.
 19  *
 20  * @author &lt;a href=&quot;mailto:gnodet@gmail.com&quot;&gt;Guillaume Nodet&lt;/a&gt;
 21  */
 22 public final class Curses {
 23 
 24     private static Object[] sv = new Object[26];
 25     private static Object[] dv = new Object[26];
 26 
 27     private static final int IFTE_NONE = 0;
</pre>
<hr />
<pre>
 57      */
 58     public static void tputs(Appendable out, String str, Object... params) {
 59         try {
 60             doTputs(out, str, params);
 61         } catch (Exception e) {
 62             throw new IOError(e);
 63         }
 64     }
 65 
 66     private static void doTputs(Appendable out, String str, Object... params) throws IOException {
 67         int index = 0;
 68         int length = str.length();
 69         int ifte = IFTE_NONE;
 70         boolean exec = true;
 71         Stack&lt;Object&gt; stack = new Stack&lt;&gt;();
 72         while (index &lt; length) {
 73             char ch = str.charAt(index++);
 74             switch (ch) {
 75                 case &#39;\\&#39;:
 76                     ch = str.charAt(index++);
<span class="line-modified"> 77                     if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</span>
<span class="line-modified"> 78                         throw new UnsupportedOperationException(); // todo</span>








 79                     } else {
 80                         switch (ch) {
 81                             case &#39;e&#39;:
 82                             case &#39;E&#39;:
 83                                 if (exec) {
 84                                     out.append((char) 27); // escape
 85                                 }
 86                                 break;
 87                             case &#39;n&#39;:
 88                                 out.append(&#39;\n&#39;);
 89                                 break;
 90 //                        case &#39;l&#39;:
 91 //                            rawPrint(&#39;\l&#39;);
 92 //                            break;
 93                             case &#39;r&#39;:
 94                                 if (exec) {
 95                                     out.append(&#39;\r&#39;);
 96                                 }
 97                                 break;
 98                             case &#39;t&#39;:
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
  2  * Copyright (c) 2002-2018, the original author or authors.
  3  *
  4  * This software is distributable under the BSD license. See the terms of the
  5  * BSD license in the documentation provided with this software.
  6  *
<span class="line-modified">  7  * https://opensource.org/licenses/BSD-3-Clause</span>
  8  */
  9 package jdk.internal.org.jline.utils;
 10 
 11 import java.io.Flushable;
 12 import java.io.IOError;
 13 import java.io.IOException;
 14 import java.io.StringWriter;
 15 import java.util.Stack;
 16 
 17 /**
 18  * Curses helper methods.
 19  *
 20  * @author &lt;a href=&quot;mailto:gnodet@gmail.com&quot;&gt;Guillaume Nodet&lt;/a&gt;
 21  */
 22 public final class Curses {
 23 
 24     private static Object[] sv = new Object[26];
 25     private static Object[] dv = new Object[26];
 26 
 27     private static final int IFTE_NONE = 0;
</pre>
<hr />
<pre>
 57      */
 58     public static void tputs(Appendable out, String str, Object... params) {
 59         try {
 60             doTputs(out, str, params);
 61         } catch (Exception e) {
 62             throw new IOError(e);
 63         }
 64     }
 65 
 66     private static void doTputs(Appendable out, String str, Object... params) throws IOException {
 67         int index = 0;
 68         int length = str.length();
 69         int ifte = IFTE_NONE;
 70         boolean exec = true;
 71         Stack&lt;Object&gt; stack = new Stack&lt;&gt;();
 72         while (index &lt; length) {
 73             char ch = str.charAt(index++);
 74             switch (ch) {
 75                 case &#39;\\&#39;:
 76                     ch = str.charAt(index++);
<span class="line-modified"> 77                     if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;7&#39;) {</span>
<span class="line-modified"> 78                         int val = ch - &#39;0&#39;;</span>
<span class="line-added"> 79                         for (int i = 0; i &lt; 2; i++) {</span>
<span class="line-added"> 80                             ch = str.charAt(index++);</span>
<span class="line-added"> 81                             if (ch &lt; &#39;0&#39; || ch &gt; &#39;7&#39;) {</span>
<span class="line-added"> 82                                 throw new IllegalStateException();</span>
<span class="line-added"> 83                             }</span>
<span class="line-added"> 84                             val = val * 8 + (ch - &#39;0&#39;);</span>
<span class="line-added"> 85                         }</span>
<span class="line-added"> 86                         out.append((char) val);</span>
 87                     } else {
 88                         switch (ch) {
 89                             case &#39;e&#39;:
 90                             case &#39;E&#39;:
 91                                 if (exec) {
 92                                     out.append((char) 27); // escape
 93                                 }
 94                                 break;
 95                             case &#39;n&#39;:
 96                                 out.append(&#39;\n&#39;);
 97                                 break;
 98 //                        case &#39;l&#39;:
 99 //                            rawPrint(&#39;\l&#39;);
100 //                            break;
101                             case &#39;r&#39;:
102                                 if (exec) {
103                                     out.append(&#39;\r&#39;);
104                                 }
105                                 break;
106                             case &#39;t&#39;:
</pre>
</td>
</tr>
</table>
<center><a href="Colors.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="DiffHelper.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>