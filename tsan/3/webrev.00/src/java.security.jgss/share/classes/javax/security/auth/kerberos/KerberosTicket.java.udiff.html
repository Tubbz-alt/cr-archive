<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.security.jgss/share/classes/javax/security/auth/kerberos/KerberosTicket.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="KerberosPrincipal.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="KeyTab.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.security.jgss/share/classes/javax/security/auth/kerberos/KerberosTicket.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -27,15 +27,17 @@</span>
  
  import java.io.*;
  import java.util.Date;
  import java.util.Arrays;
  import java.net.InetAddress;
<span class="udiff-line-added">+ import java.util.Objects;</span>
  import javax.crypto.SecretKey;
  import javax.security.auth.Refreshable;
  import javax.security.auth.Destroyable;
  import javax.security.auth.RefreshFailedException;
  import javax.security.auth.DestroyFailedException;
<span class="udiff-line-added">+ </span>
  import sun.security.util.HexDumpEncoder;
  
  /**
   * This class encapsulates a Kerberos ticket and associated
   * information as viewed from the client&#39;s point of view. It captures all
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -188,15 +190,24 @@</span>
       * This field may be null when the ticket is usable from any address.
       *
       * @serial
       */
  
<span class="udiff-line-removed">- </span>
      private InetAddress[] clientAddresses;
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Evidence ticket if proxy_impersonator. This field can be accessed</span>
<span class="udiff-line-added">+      * by KerberosSecrets. It&#39;s serialized.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     KerberosTicket proxy = null;</span>
<span class="udiff-line-added">+ </span>
      private transient boolean destroyed = false;
  
<span class="udiff-line-added">+     transient KerberosPrincipal clientAlias = null;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     transient KerberosPrincipal serverAlias = null;</span>
<span class="udiff-line-added">+ </span>
      /**
       * Constructs a {@code KerberosTicket} using credentials information that a
       * client either receives from a KDC or reads from a cache.
       *
       * @param asn1Encoding the ASN.1 encoding of the ticket as defined by
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -589,11 +600,15 @@</span>
          sun.security.krb5.Credentials krb5Creds = null;
  
          try {
              krb5Creds = new sun.security.krb5.Credentials(asn1Encoding,
                                                      client.getName(),
<span class="udiff-line-added">+                                                     (clientAlias != null ?</span>
<span class="udiff-line-added">+                                                             clientAlias.getName() : null),</span>
                                                      server.getName(),
<span class="udiff-line-added">+                                                     (serverAlias != null ?</span>
<span class="udiff-line-added">+                                                             serverAlias.getName() : null),</span>
                                                      sessionKey.getEncoded(),
                                                      sessionKey.getKeyType(),
                                                      flags,
                                                      authTime,
                                                      startTime,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -701,10 +716,11 @@</span>
                  &quot;Start Time = &quot; + String.valueOf(startTime) + &quot;\n&quot; +
                  &quot;End Time = &quot; + endTime.toString() + &quot;\n&quot; +
                  &quot;Renew Till = &quot; + String.valueOf(renewTill) + &quot;\n&quot; +
                  &quot;Client Addresses &quot; +
                  (clientAddresses == null ? &quot; Null &quot; : caddrString.toString() +
<span class="udiff-line-added">+                 (proxy == null ? &quot;&quot; : &quot;\nwith a proxy ticket&quot;) +</span>
                  &quot;\n&quot;));
      }
  
      /**
       * Returns a hash code for this {@code KerberosTicket}.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -738,10 +754,14 @@</span>
              result = result * 37 + renewTill.hashCode();
          }
  
          // clientAddress may be null, the array&#39;s hashCode is 0
          result = result * 37 + Arrays.hashCode(clientAddresses);
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+         if (proxy != null) {</span>
<span class="udiff-line-added">+             result = result * 37 + proxy.hashCode();</span>
<span class="udiff-line-added">+         }</span>
          return result * 37 + Arrays.hashCode(flags);
      }
  
      /**
       * Compares the specified object with this {@code KerberosTicket} for equality.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -810,10 +830,14 @@</span>
              if (!renewTill.equals(otherTicket.getRenewTill())) {
                  return false;
              }
          }
  
<span class="udiff-line-added">+         if (!Objects.equals(proxy, otherTicket.proxy)) {</span>
<span class="udiff-line-added">+             return false;</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
          return true;
      }
  
      private void readObject(ObjectInputStream s)
              throws IOException, ClassNotFoundException {
</pre>
<center><a href="KerberosPrincipal.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="KeyTab.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>