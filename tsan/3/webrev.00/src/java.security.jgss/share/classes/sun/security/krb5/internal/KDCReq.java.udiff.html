<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/java.security.jgss/share/classes/sun/security/krb5/internal/KDCReq.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="KDCOptions.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="KRBError.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/java.security.jgss/share/classes/sun/security/krb5/internal/KDCReq.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -57,13 +57,13 @@</span>
   * http://www.ietf.org/rfc/rfc4120.txt&lt;/a&gt;.
   */
  public class KDCReq {
  
      public KDCReqBody reqBody;
<span class="udiff-line-added">+     public PAData[] pAData = null; //optional</span>
      private int pvno;
      private int msgType;
<span class="udiff-line-removed">-     private PAData[] pAData = null; //optional</span>
  
      public KDCReq(PAData[] new_pAData, KDCReqBody new_reqBody,
              int req_type) throws IOException {
          pvno = Krb5.PVNO;
          msgType = req_type;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -142,27 +142,11 @@</span>
                  throw new KrbApErrException(Krb5.KRB_AP_ERR_MSG_TYPE);
              }
          } else {
              throw new Asn1Exception(Krb5.ASN1_BAD_ID);
          }
<span class="udiff-line-modified-removed">-         if ((der.getData().peekByte() &amp; 0x1F) == 0x03) {</span>
<span class="udiff-line-removed">-             subDer = der.getData().getDerValue();</span>
<span class="udiff-line-removed">-             DerValue subsubDer = subDer.getData().getDerValue();</span>
<span class="udiff-line-removed">-             if (subsubDer.getTag() != DerValue.tag_SequenceOf) {</span>
<span class="udiff-line-removed">-                 throw new Asn1Exception(Krb5.ASN1_BAD_ID);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">-             Vector&lt;PAData&gt; v = new Vector&lt;&gt;();</span>
<span class="udiff-line-removed">-             while (subsubDer.getData().available() &gt; 0) {</span>
<span class="udiff-line-removed">-                 v.addElement(new PAData(subsubDer.getData().getDerValue()));</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">-             if (v.size() &gt; 0) {</span>
<span class="udiff-line-removed">-                 pAData = new PAData[v.size()];</span>
<span class="udiff-line-removed">-                 v.copyInto(pAData);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">-         } else {</span>
<span class="udiff-line-removed">-             pAData = null;</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-modified-added">+         pAData = PAData.parseSequence(der.getData(), (byte) 0x03, true);</span>
          subDer = der.getData().getDerValue();
          if ((subDer.getTag() &amp; 0x01F) == 0x04) {
              DerValue subsubDer = subDer.getData().getDerValue();
              reqBody = new KDCReqBody(subsubDer, msgType);
          } else {
</pre>
<center><a href="KDCOptions.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="KRBError.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>