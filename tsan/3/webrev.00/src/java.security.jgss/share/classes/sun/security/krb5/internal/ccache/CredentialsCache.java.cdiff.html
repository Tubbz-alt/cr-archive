<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.security.jgss/share/classes/sun/security/krb5/internal/ccache/CredentialsCache.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Credentials.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FileCredentialsCache.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.security.jgss/share/classes/sun/security/krb5/internal/ccache/CredentialsCache.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 30,29 ***</span>
  
  package sun.security.krb5.internal.ccache;
  
  import sun.security.krb5.*;
  import sun.security.krb5.internal.*;
<span class="line-modified">! import java.util.StringTokenizer;</span>
<span class="line-modified">! import java.util.Vector;</span>
  import java.io.IOException;
<span class="line-removed">- import java.io.File;</span>
<span class="line-removed">- import java.io.FileInputStream;</span>
<span class="line-removed">- import java.io.FileOutputStream;</span>
<span class="line-removed">- import java.io.BufferedReader;</span>
<span class="line-removed">- import java.io.InputStreamReader;</span>
  
  /**
   * CredentialsCache stores credentials(tickets, session keys, etc) in a semi-permanent store
   * for later use by different program.
   *
   * @author Yanni Zhang
   */
  public abstract class CredentialsCache {
      static CredentialsCache singleton = null;
      static String cacheName;
<span class="line-removed">-     private static boolean DEBUG = Krb5.DEBUG;</span>
  
      public static CredentialsCache getInstance(PrincipalName principal) {
          return FileCredentialsCache.acquireInstance(principal, null);
      }
  
<span class="line-new-header">--- 30,23 ---</span>
  
  package sun.security.krb5.internal.ccache;
  
  import sun.security.krb5.*;
  import sun.security.krb5.internal.*;
<span class="line-modified">! </span>
<span class="line-modified">! import java.util.List;</span>
  import java.io.IOException;
  
  /**
   * CredentialsCache stores credentials(tickets, session keys, etc) in a semi-permanent store
   * for later use by different program.
   *
   * @author Yanni Zhang
   */
  public abstract class CredentialsCache {
      static CredentialsCache singleton = null;
      static String cacheName;
  
      public static CredentialsCache getInstance(PrincipalName principal) {
          return FileCredentialsCache.acquireInstance(principal, null);
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 118,8 ***</span>
<span class="line-new-header">--- 112,64 ---</span>
      public abstract PrincipalName getPrimaryPrincipal();
      public abstract void update(Credentials c);
      public abstract void save() throws IOException, KrbException;
      public abstract Credentials[] getCredsList();
      public abstract Credentials getDefaultCreds();
<span class="line-added">+     public abstract sun.security.krb5.Credentials getInitialCreds();</span>
      public abstract Credentials getCreds(PrincipalName sname);
      public abstract Credentials getCreds(LoginOptions options, PrincipalName sname);
<span class="line-added">+     public abstract void addConfigEntry(ConfigEntry e);</span>
<span class="line-added">+     public abstract List&lt;ConfigEntry&gt; getConfigEntries();</span>
<span class="line-added">+ </span>
<span class="line-added">+     public ConfigEntry getConfigEntry(String name) {</span>
<span class="line-added">+         List&lt;ConfigEntry&gt; entries = getConfigEntries();</span>
<span class="line-added">+         if (entries != null) {</span>
<span class="line-added">+             for (ConfigEntry e : entries) {</span>
<span class="line-added">+                 if (e.getName().equals(name)) {</span>
<span class="line-added">+                     return e;</span>
<span class="line-added">+                 }</span>
<span class="line-added">+             }</span>
<span class="line-added">+         }</span>
<span class="line-added">+         return null;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     public static class ConfigEntry {</span>
<span class="line-added">+ </span>
<span class="line-added">+         public ConfigEntry(String name, PrincipalName princ, byte[] data) {</span>
<span class="line-added">+             this.name = name;</span>
<span class="line-added">+             this.princ = princ;</span>
<span class="line-added">+             this.data = data;</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         private final String name;</span>
<span class="line-added">+         private final PrincipalName princ;</span>
<span class="line-added">+         private final byte[] data; // not worth cloning</span>
<span class="line-added">+ </span>
<span class="line-added">+         public String getName() {</span>
<span class="line-added">+             return name;</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         public PrincipalName getPrinc() {</span>
<span class="line-added">+             return princ;</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         public byte[] getData() {</span>
<span class="line-added">+             return data;</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         @Override</span>
<span class="line-added">+         public String toString() {</span>
<span class="line-added">+             return name + (princ != null ? (&quot;.&quot; + princ) : &quot;&quot;)</span>
<span class="line-added">+                     + &quot;: &quot; + new String(data);</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         public PrincipalName getSName() {</span>
<span class="line-added">+             try {</span>
<span class="line-added">+                 return new PrincipalName(&quot;krb5_ccache_conf_data/&quot; + name</span>
<span class="line-added">+                         + (princ != null ? (&quot;/&quot; + princ) : &quot;&quot;)</span>
<span class="line-added">+                         + &quot;@X-CACHECONF:&quot;);</span>
<span class="line-added">+             } catch (RealmException e) {</span>
<span class="line-added">+                 throw new AssertionError(e);</span>
<span class="line-added">+             }</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
  }
</pre>
<center><a href="Credentials.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="FileCredentialsCache.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>