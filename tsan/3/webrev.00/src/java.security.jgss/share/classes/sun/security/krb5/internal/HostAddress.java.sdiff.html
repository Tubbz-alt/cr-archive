<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.security.jgss/share/classes/sun/security/krb5/internal/HostAddress.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="EncTGSRepPart.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HostAddresses.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.security.jgss/share/classes/sun/security/krb5/internal/HostAddress.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2006, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
148 
149     private int getAddrType(InetAddress inetAddress) {
150         int addressType = 0;
151         if (inetAddress instanceof Inet4Address)
152             addressType = Krb5.ADDRTYPE_INET;
153         else if (inetAddress instanceof Inet6Address)
154             addressType = Krb5.ADDRTYPE_INET6;
155         return (addressType);
156     }
157 
158     // implicit default not in Config.java
159     public HostAddress() throws UnknownHostException {
160         InetAddress inetAddress = getLocalInetAddress();
161         addrType = getAddrType(inetAddress);
162         address = inetAddress.getAddress();
163     }
164 
165     /**
166      * Creates a HostAddress from the specified address and address type.
167      *


168      * @param new_addrType the value of the address type which matches the defined
169      *                       address family constants in the Berkeley Standard
170      *                       Distributions of Unix.
171      * @param new_address network address.
172      * @exception KrbApErrException if address type and address length do not match defined value.
173      *
174      */
175     public HostAddress(int new_addrType, byte[] new_address)
176         throws KrbApErrException, UnknownHostException {
177         switch(new_addrType) {
178         case Krb5.ADDRTYPE_INET:        //Internet address
179             if (new_address.length != 4)
180                 throw new KrbApErrException(0, &quot;Invalid Internet address&quot;);
181             break;
182         case Krb5.ADDRTYPE_CHAOS:
183             if (new_address.length != 2) //CHAOSnet address
184                 throw new KrbApErrException(0, &quot;Invalid CHAOSnet address&quot;);
185             break;
186         case Krb5.ADDRTYPE_ISO:   // ISO address
187             break;
</pre>
<hr />
<pre>
192         case Krb5.ADDRTYPE_APPLETALK:  //AppleTalk DDP address
193             if (new_address.length != 3)
194                 throw new KrbApErrException(0, &quot;Invalid DDP address&quot;);
195             break;
196         case Krb5.ADDRTYPE_DECNET:    //DECnet Phase IV address
197             if (new_address.length != 2)
198                 throw new KrbApErrException(0, &quot;Invalid DECnet Phase IV address&quot;);
199             break;
200         case Krb5.ADDRTYPE_INET6:     //Internet IPv6 address
201             if (new_address.length != 16)
202                 throw new KrbApErrException(0, &quot;Invalid Internet IPv6 address&quot;);
203             break;
204         }
205 
206         addrType = new_addrType;
207         if (new_address != null) {
208            address = new_address.clone();
209         }
210         if (DEBUG) {
211             if (addrType == Krb5.ADDRTYPE_INET ||
<span class="line-modified">212                 addrType == Krb5.ADDRTYPE_INET6) {</span>
213                 System.out.println(&quot;Host address is &quot; +
214                         InetAddress.getByAddress(address));
215             }
216         }
217     }
218 
219     public HostAddress(InetAddress inetAddress) {
220         addrType = getAddrType(inetAddress);
221         address = inetAddress.getAddress();
222     }
223 
224     /**
225      * Constructs a host address from a single DER-encoded value.
226      * @param encoding a single DER-encoded value.
227      * @exception Asn1Exception if an error occurs while decoding an ASN1 encoded data.
228      * @exception IOException if an I/O error occurs while reading encoded data.
229      *
230      */
231     public HostAddress(DerValue encoding) throws Asn1Exception, IOException {
232         DerValue der = encoding.getData().getDerValue();
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
148 
149     private int getAddrType(InetAddress inetAddress) {
150         int addressType = 0;
151         if (inetAddress instanceof Inet4Address)
152             addressType = Krb5.ADDRTYPE_INET;
153         else if (inetAddress instanceof Inet6Address)
154             addressType = Krb5.ADDRTYPE_INET6;
155         return (addressType);
156     }
157 
158     // implicit default not in Config.java
159     public HostAddress() throws UnknownHostException {
160         InetAddress inetAddress = getLocalInetAddress();
161         addrType = getAddrType(inetAddress);
162         address = inetAddress.getAddress();
163     }
164 
165     /**
166      * Creates a HostAddress from the specified address and address type.
167      *
<span class="line-added">168      * Warning: called by nativeccache.c.</span>
<span class="line-added">169      *</span>
170      * @param new_addrType the value of the address type which matches the defined
171      *                       address family constants in the Berkeley Standard
172      *                       Distributions of Unix.
173      * @param new_address network address.
174      * @exception KrbApErrException if address type and address length do not match defined value.
175      *
176      */
177     public HostAddress(int new_addrType, byte[] new_address)
178         throws KrbApErrException, UnknownHostException {
179         switch(new_addrType) {
180         case Krb5.ADDRTYPE_INET:        //Internet address
181             if (new_address.length != 4)
182                 throw new KrbApErrException(0, &quot;Invalid Internet address&quot;);
183             break;
184         case Krb5.ADDRTYPE_CHAOS:
185             if (new_address.length != 2) //CHAOSnet address
186                 throw new KrbApErrException(0, &quot;Invalid CHAOSnet address&quot;);
187             break;
188         case Krb5.ADDRTYPE_ISO:   // ISO address
189             break;
</pre>
<hr />
<pre>
194         case Krb5.ADDRTYPE_APPLETALK:  //AppleTalk DDP address
195             if (new_address.length != 3)
196                 throw new KrbApErrException(0, &quot;Invalid DDP address&quot;);
197             break;
198         case Krb5.ADDRTYPE_DECNET:    //DECnet Phase IV address
199             if (new_address.length != 2)
200                 throw new KrbApErrException(0, &quot;Invalid DECnet Phase IV address&quot;);
201             break;
202         case Krb5.ADDRTYPE_INET6:     //Internet IPv6 address
203             if (new_address.length != 16)
204                 throw new KrbApErrException(0, &quot;Invalid Internet IPv6 address&quot;);
205             break;
206         }
207 
208         addrType = new_addrType;
209         if (new_address != null) {
210            address = new_address.clone();
211         }
212         if (DEBUG) {
213             if (addrType == Krb5.ADDRTYPE_INET ||
<span class="line-modified">214                     addrType == Krb5.ADDRTYPE_INET6) {</span>
215                 System.out.println(&quot;Host address is &quot; +
216                         InetAddress.getByAddress(address));
217             }
218         }
219     }
220 
221     public HostAddress(InetAddress inetAddress) {
222         addrType = getAddrType(inetAddress);
223         address = inetAddress.getAddress();
224     }
225 
226     /**
227      * Constructs a host address from a single DER-encoded value.
228      * @param encoding a single DER-encoded value.
229      * @exception Asn1Exception if an error occurs while decoding an ASN1 encoded data.
230      * @exception IOException if an I/O error occurs while reading encoded data.
231      *
232      */
233     public HostAddress(DerValue encoding) throws Asn1Exception, IOException {
234         DerValue der = encoding.getData().getDerValue();
</pre>
</td>
</tr>
</table>
<center><a href="EncTGSRepPart.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="HostAddresses.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>