<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.security.jgss/share/classes/org/ietf/jgss/GSSContext.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../javax/security/auth/kerberos/ServicePermission.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="package-info.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.security.jgss/share/classes/org/ietf/jgss/GSSContext.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 126,12 ***</span>
   * application data, and finally context deletion.
   *
   * &lt;pre&gt;
   *    // Create a context using default credentials
   *    // and the implementation specific default mechanism
<span class="line-modified">!  *    GSSManager manager ...</span>
<span class="line-modified">!  *    GSSName targetName ...</span>
   *    GSSContext context = manager.createContext(targetName, null, null,
   *                                           GSSContext.INDEFINITE_LIFETIME);
   *
   *    // set desired context options prior to context establishment
   *    context.requestConf(true);
<span class="line-new-header">--- 126,12 ---</span>
   * application data, and finally context deletion.
   *
   * &lt;pre&gt;
   *    // Create a context using default credentials
   *    // and the implementation specific default mechanism
<span class="line-modified">!  *    GSSManager manager = ...</span>
<span class="line-modified">!  *    GSSName targetName = ...</span>
   *    GSSContext context = manager.createContext(targetName, null, null,
   *                                           GSSContext.INDEFINITE_LIFETIME);
   *
   *    // set desired context options prior to context establishment
   *    context.requestConf(true);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 139,49 ***</span>
   *    context.requestReplayDet(true);
   *    context.requestSequenceDet(true);
   *
   *    // establish a context between peers
   *
<span class="line-modified">!  *    byte []inToken = new byte[0];</span>
   *
   *    // Loop while there still is a token to be processed
   *
   *    while (!context.isEstablished()) {
   *
<span class="line-modified">!  *        byte[] outToken</span>
<span class="line-removed">-  *            = context.initSecContext(inToken, 0, inToken.length);</span>
   *
   *        // send the output token if generated
<span class="line-modified">!  *        if (outToken != null)</span>
   *            sendToken(outToken);
   *
   *        if (!context.isEstablished()) {
   *            inToken = readToken();
   *    }
   *
   *     // display context information
   *     System.out.println(&quot;Remaining lifetime in seconds = &quot;
   *                                          + context.getLifetime());
   *     System.out.println(&quot;Context mechanism = &quot; + context.getMech());
   *     System.out.println(&quot;Initiator = &quot; + context.getSrcName());
   *     System.out.println(&quot;Acceptor = &quot; + context.getTargName());
   *
<span class="line-modified">!  *     if (context.getConfState())</span>
<span class="line-modified">!  *             System.out.println(&quot;Confidentiality (i.e., privacy) is available&quot;);</span>
   *
<span class="line-modified">!  *     if (context.getIntegState())</span>
<span class="line-modified">!  *             System.out.println(&quot;Integrity is available&quot;);</span>
   *
   *     // perform wrap on an application supplied message, appMsg,
   *     // using QOP = 0, and requesting privacy service
<span class="line-modified">!  *     byte [] appMsg ...</span>
   *
   *     MessageProp mProp = new MessageProp(0, true);
   *
<span class="line-modified">!  *     byte []tok = context.wrap(appMsg, 0, appMsg.length, mProp);</span>
   *
<span class="line-modified">!  *     sendToken(tok);</span>
   *
   *     // release the local-end of the context
   *     context.dispose();
   *
   * &lt;/pre&gt;
<span class="line-new-header">--- 139,70 ---</span>
   *    context.requestReplayDet(true);
   *    context.requestSequenceDet(true);
   *
   *    // establish a context between peers
   *
<span class="line-modified">!  *    byte[] inToken = new byte[0];</span>
<span class="line-added">+  *    byte[] outToken;</span>
   *
   *    // Loop while there still is a token to be processed
   *
   *    while (!context.isEstablished()) {
   *
<span class="line-modified">!  *        outToken = context.initSecContext(inToken, 0, inToken.length);</span>
   *
   *        // send the output token if generated
<span class="line-modified">!  *        if (outToken != null) {</span>
   *            sendToken(outToken);
<span class="line-added">+  *        }</span>
   *
   *        if (!context.isEstablished()) {
   *            inToken = readToken();
<span class="line-added">+  *        }</span>
   *    }
   *
   *     // display context information
   *     System.out.println(&quot;Remaining lifetime in seconds = &quot;
   *                                          + context.getLifetime());
   *     System.out.println(&quot;Context mechanism = &quot; + context.getMech());
   *     System.out.println(&quot;Initiator = &quot; + context.getSrcName());
   *     System.out.println(&quot;Acceptor = &quot; + context.getTargName());
   *
<span class="line-modified">!  *     if (context.getConfState()) {</span>
<span class="line-modified">!  *         System.out.println(&quot;Confidentiality (i.e., privacy) is available&quot;);</span>
<span class="line-added">+  *     }</span>
   *
<span class="line-modified">!  *     if (context.getIntegState()) {</span>
<span class="line-modified">!  *         System.out.println(&quot;Integrity is available&quot;);</span>
<span class="line-added">+  *     }</span>
   *
   *     // perform wrap on an application supplied message, appMsg,
   *     // using QOP = 0, and requesting privacy service
<span class="line-modified">!  *     byte[] appMsg = ...</span>
   *
   *     MessageProp mProp = new MessageProp(0, true);
   *
<span class="line-modified">!  *     outToken = context.wrap(appMsg, 0, appMsg.length, mProp);</span>
   *
<span class="line-modified">!  *     sendToken(outToken);</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *     // perform unwrap on an incoming application message, and check</span>
<span class="line-added">+  *     // its privacy state and supplementary information</span>
<span class="line-added">+  *     inToken = readToken();</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *     mProp = new MessageProp(0, true);</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *     appMsg = context.unwrap(inToken, 0, inToken.length, mProp);</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *     System.out.println(&quot;Was it encrypted? &quot; + mProp.getPrivacy());</span>
<span class="line-added">+  *     System.out.println(&quot;Duplicate Token? &quot; + mProp.isDuplicateToken());</span>
<span class="line-added">+  *     System.out.println(&quot;Old Token? &quot; + mProp.isOldToken());</span>
<span class="line-added">+  *     System.out.println(&quot;Unsequenced Token? &quot; + mProp.isUnseqToken());</span>
<span class="line-added">+  *     System.out.println(&quot;Gap Token? &quot; + mProp.isGapToken());</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *     // the application determines if the privacy state and supplementary</span>
<span class="line-added">+  *     // information are acceptable</span>
   *
   *     // release the local-end of the context
   *     context.dispose();
   *
   * &lt;/pre&gt;
</pre>
<center><a href="../../../javax/security/auth/kerberos/ServicePermission.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="package-info.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>