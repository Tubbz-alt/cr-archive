<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.sql.rowset/share/classes/com/sun/rowset/providers/RIXMLProvider.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.rowset.providers;
 27 
 28 import com.sun.rowset.JdbcRowSetResourceBundle;
 29 import java.io.IOException;
 30 import java.sql.*;
 31 import javax.sql.*;
 32 
 33 import javax.sql.rowset.spi.*;
 34 
 35 /**
 36  * A reference implementation of a JDBC RowSet synchronization provider
 37  * with the ability to read and write rowsets in well formed XML using the
 38  * standard WebRowSet schema.
 39  *
 40  * &lt;h2&gt;1.0 Background&lt;/h2&gt;
 41  * This synchronization provider is registered with the
 42  * &lt;code&gt;SyncFactory&lt;/code&gt; by default as the
 43  * &lt;code&gt;com.sun.rowset.providers.RIXMLProvider&lt;/code&gt;.
 44  * &lt;P&gt;
 45  * A &lt;code&gt;WebRowSet&lt;/code&gt; object uses an &lt;code&gt;RIXMLProvider&lt;/code&gt; implementation
 46  * to read an XML data source or to write itself in XML format using the
 47  * &lt;code&gt;WebRowSet&lt;/code&gt; XML schema definition available at
 48  * &lt;pre&gt;
<a name="1" id="anc1"></a><span class="line-modified"> 49  *     &lt;a href=&quot;http://java.sun.com/xml/ns/jdbc/webrowset.xsd&quot;&gt;http://java.sun.com/xml/ns/jdbc/webrowset.xsd&lt;/a&gt;</span>
 50  * &lt;/pre&gt;
 51  * The &lt;code&gt;RIXMLProvider&lt;/code&gt; implementation has a synchronization level of
 52  * GRADE_NONE, which means that it does no checking at all for conflicts.  It
 53  * simply writes a &lt;code&gt;WebRowSet&lt;/code&gt; object to a file.
 54  * &lt;h2&gt;2.0 Usage&lt;/h2&gt;
 55  * A &lt;code&gt;WebRowSet&lt;/code&gt; implementation is created with an &lt;code&gt;RIXMLProvider&lt;/code&gt;
 56  * by default.
 57  * &lt;pre&gt;
 58  *     WebRowSet wrs = new FooWebRowSetImpl();
 59  * &lt;/pre&gt;
 60  * The &lt;code&gt;SyncFactory&lt;/code&gt; always provides an instance of
 61  * &lt;code&gt;RIOptimisticProvider&lt;/code&gt; when no provider is specified,
 62  * but the implementation of the default constructor for &lt;code&gt;WebRowSet&lt;/code&gt; sets the
 63  * provider to be the &lt;code&gt;RIXMLProvider&lt;/code&gt; implementation.  Therefore,
 64  * the following line of code is executed behind the scenes as part of the
 65  * implementation of the default constructor.
 66  * &lt;pre&gt;
 67  *     wrs.setSyncProvider(&quot;com.sun.rowset.providers.RIXMLProvider&quot;);
 68  * &lt;/pre&gt;
 69  * See the standard &lt;code&gt;RowSet&lt;/code&gt; reference implementations in the
 70  * &lt;code&gt;com.sun.rowset&lt;/code&gt; package for more details.
 71  *
 72  * @author  Jonathan Bruce
 73  * @see javax.sql.rowset.spi.SyncProvider
 74  * @see javax.sql.rowset.spi.SyncProviderException
 75  * @see javax.sql.rowset.spi.SyncFactory
 76  * @see javax.sql.rowset.spi.SyncFactoryException
 77  */
 78 public final class RIXMLProvider extends SyncProvider {
 79 
 80     /**
 81      * The unique provider identifier.
 82      */
 83     private String providerID = &quot;com.sun.rowset.providers.RIXMLProvider&quot;;
 84 
 85     /**
 86      * The vendor name of this SyncProvider implementation.
 87      */
 88     private String vendorName = &quot;Oracle Corporation&quot;;
 89 
 90     /**
 91      * The version number of this SyncProvider implementation.
 92      */
 93     private String versionNumber = &quot;1.0&quot;;
 94 
 95     private JdbcRowSetResourceBundle resBundle;
 96 
 97     private XmlReader xmlReader;
 98     private XmlWriter xmlWriter;
 99 
100     /**
101      * This provider is available to all JDBC &lt;code&gt;RowSet&lt;/code&gt; implementations as the
102      * default persistence provider.
103      */
104     public RIXMLProvider() {
105         providerID = this.getClass().getName();
106         try {
107            resBundle = JdbcRowSetResourceBundle.getJdbcRowSetResourceBundle();
108         } catch(IOException ioe) {
109             throw new RuntimeException(ioe);
110         }
111     }
112 
113     /**
114      * Returns &lt;code&gt;&quot;javax.sql.rowset.providers.RIXMLProvider&quot;&lt;/code&gt;, which is
115      * the fully qualified class name of this provider implementation.
116      *
117      * @return a &lt;code&gt;String&lt;/code&gt; object with the fully specified class name of
118      *           this &lt;code&gt;RIOptimisticProvider&lt;/code&gt; implementation
119      */
120     public String getProviderID() {
121         return providerID;
122     }
123 
124     // additional methods that sit on top of reader/writer methods back to
125     // original datasource. Allow XML state to be written out and in
126 
127     /**
128      * Sets this &lt;code&gt;WebRowSet&lt;/code&gt; object&#39;s reader to the given
129      * &lt;code&gt;XmlReader&lt;/code&gt; object.
130      *
131      * @throws SQLException if a database access error occurs
132      */
133     public void setXmlReader(XmlReader reader) throws SQLException {
134         xmlReader = reader;
135     }
136 
137     /**
138      * Sets this &lt;code&gt;WebRowSet&lt;/code&gt; object&#39;s writer to the given
139      * &lt;code&gt;XmlWriter&lt;/code&gt; object.
140      *
141      * @throws SQLException if a database access error occurs
142      */
143     public void setXmlWriter(XmlWriter writer) throws SQLException {
144         xmlWriter = writer;
145     }
146 
147     /**
148      * Retrieves the reader that this &lt;code&gt;WebRowSet&lt;/code&gt; object
149      * will call when its &lt;code&gt;readXml&lt;/code&gt; method is called.
150      *
151      * @return the &lt;code&gt;XmlReader&lt;/code&gt; object for this SyncProvider
152      * @throws SQLException if a database access error occurs
153      */
154     public XmlReader getXmlReader() throws SQLException {
155         return xmlReader;
156     }
157 
158     /**
159      * Retrieves the writer that this &lt;code&gt;WebRowSet&lt;/code&gt; object
160      * will call when its &lt;code&gt;writeXml&lt;/code&gt; method is called.
161      *
162      * @return the &lt;code&gt;XmlWriter&lt;/code&gt; for this SyncProvider
163      * @throws SQLException if a database access error occurs
164      */
165     public XmlWriter getXmlWriter() throws SQLException {
166         return xmlWriter;
167     }
168 
169     /**
170      * Returns the &lt;code&gt;SyncProvider&lt;/code&gt; grade of syncrhonization that
171      * &lt;code&gt;RowSet&lt;/code&gt; object instances can expect when using this
172      * implementation. As this implementation provides no synchonization
173      * facilities to the XML data source, the lowest grade is returned.
174      *
175      * @return the &lt;code&gt;SyncProvider&lt;/code&gt; syncronization grade of this
176      *     provider; must be one of the following constants:
177      *       &lt;PRE&gt;
178      *          SyncProvider.GRADE_NONE,
179      *          SyncProvider.GRADE_MODIFIED_AT_COMMIT,
180      *          SyncProvider.GRADE_CHECK_ALL_AT_COMMIT,
181      *          SyncProvider.GRADE_LOCK_WHEN_MODIFIED,
182      *          SyncProvider.GRADE_LOCK_WHEN_LOADED
183      *       &lt;/PRE&gt;
184      *
185      */
186     public int getProviderGrade() {
187         return SyncProvider.GRADE_NONE;
188     }
189 
190     /**
191      * Returns the default UPDATABLE_VIEW behavior of this reader
192      *
193      */
194     public int supportsUpdatableView() {
195         return SyncProvider.NONUPDATABLE_VIEW_SYNC;
196     }
197 
198     /**
199      * Returns the default DATASOURCE_LOCK behavior of this reader
200      */
201     public int getDataSourceLock() throws SyncProviderException {
202         return SyncProvider.DATASOURCE_NO_LOCK;
203     }
204 
205     /**
206      * Throws an unsupported operation exception as this method does
207      * function with non-locking XML data sources.
208      */
209     public void setDataSourceLock(int lock) throws SyncProviderException {
210         throw new UnsupportedOperationException(resBundle.handleGetObject(&quot;rixml.unsupp&quot;).toString());
211     }
212 
213     /**
214      * Returns a null object as RowSetWriters are not returned by this SyncProvider
215      */
216     public RowSetWriter getRowSetWriter() {
217         return null;
218     }
219 
220     /**
221      * Returns a null object as RowSetWriter objects are not returned by this
222      * SyncProvider
223      */
224     public RowSetReader getRowSetReader() {
225         return null;
226     }
227 
228   /**
229      * Returns the release version ID of the Reference Implementation Optimistic
230      * Synchronization Provider.
231      *
232      * @return the &lt;code&gt;String&lt;/code&gt; detailing the version number of this SyncProvider
233      */
234     public String getVersion() {
235         return this.versionNumber;
236     }
237 
238     /**
239      * Returns the vendor name of the Reference Implemntation Optimistic
240      * Syncchronication Provider
241      *
242      * @return the &lt;code&gt;String&lt;/code&gt; detailing the vendor name of this
243      *      SyncProvider
244      */
245     public String getVendor() {
246         return this.vendorName;
247     }
248 }
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>