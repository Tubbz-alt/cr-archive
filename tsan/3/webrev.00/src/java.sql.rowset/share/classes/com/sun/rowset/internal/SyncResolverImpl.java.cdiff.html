<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.sql.rowset/share/classes/com/sun/rowset/internal/SyncResolverImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../CachedRowSetImpl.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../package-info.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.sql.rowset/share/classes/com/sun/rowset/internal/SyncResolverImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 121,20 ***</span>
       }
  
  
      /**
       * Retrieves the conflict status of the current row of this
<span class="line-modified">!      * {@code SyncResolver}, which indicates the operationthe {@code RowSet}</span>
       * object was attempting when the conflict occurred.
       *
       * @return one of the following constants:
       *         {@code SyncResolver.UPDATE_ROW_CONFLICT},
       *         {@code SyncResolver.DELETE_ROW_CONFLICT}, or
       *         {@code SyncResolver.INSERT_ROW_CONFLICT}
       */
      public int getStatus() {
<span class="line-modified">!         return ((Integer)stats.get(rowStatus-1)).intValue();</span>
      }
  
      /**
       * Retrieves the value in the designated column in the current row of this
       * {@code SyncResolver} object, which is the value that caused a conflict.
<span class="line-new-header">--- 121,21 ---</span>
       }
  
  
      /**
       * Retrieves the conflict status of the current row of this
<span class="line-modified">!      * {@code SyncResolver}, which indicates the operation the {@code RowSet}</span>
       * object was attempting when the conflict occurred.
       *
       * @return one of the following constants:
       *         {@code SyncResolver.UPDATE_ROW_CONFLICT},
       *         {@code SyncResolver.DELETE_ROW_CONFLICT}, or
       *         {@code SyncResolver.INSERT_ROW_CONFLICT}
       */
      public int getStatus() {
<span class="line-modified">!         return stats != null ? (Integer) stats.get(rowStatus - 1) :</span>
<span class="line-added">+                 SyncResolver.NO_ROW_CONFLICT;</span>
      }
  
      /**
       * Retrieves the value in the designated column in the current row of this
       * {@code SyncResolver} object, which is the value that caused a conflict.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,10 ***</span>
<span class="line-new-header">--- 147,12 ---</span>
      public Object getConflictValue(int index) throws SQLException {
          try {
               return crsRes.getObject(index);
          } catch(SQLException sqle) {
              throw new SQLException(sqle.getMessage());
<span class="line-added">+         } catch (Exception e ) {</span>
<span class="line-added">+             throw new SQLException(&quot;Problem obtaining conflicted value!&quot;, e);</span>
          }
      }
  
      /**
       * Retrieves the value in the designated column in the current row of this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 162,10 ***</span>
<span class="line-new-header">--- 165,12 ---</span>
      public Object getConflictValue(String columnName) throws SQLException {
          try {
               return crsRes.getObject(columnName);
          } catch(SQLException sqle) {
               throw new SQLException(sqle.getMessage());
<span class="line-added">+         } catch (Exception e ) {</span>
<span class="line-added">+             throw new SQLException(&quot;Problem obtaining conflicted value!&quot;, e);</span>
          }
      }
  
      /**
       * Sets &lt;i&gt;obj&lt;/i&gt; as the value in column &lt;i&gt;index&lt;/i&gt; in the current row of the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 187,12 ***</span>
           * check for the last resolved value of the current row
           * (Note: it can be resolved randomly for same row)
           * then sync back immediately.
           **/
          try {
              // check whether the index is in range
<span class="line-modified">!             if(index&lt;=0 || index &gt; crsSync.getMetaData().getColumnCount() ) {</span>
                  throw new SQLException(resBundle.handleGetObject(&quot;syncrsimpl.indexval&quot;).toString()+ index);
              }
               // check whether index col is in conflict
              if(crsRes.getObject(index) == null) {
                  throw new SQLException(resBundle.handleGetObject(&quot;syncrsimpl.noconflict&quot;).toString());
<span class="line-new-header">--- 192,13 ---</span>
           * check for the last resolved value of the current row
           * (Note: it can be resolved randomly for same row)
           * then sync back immediately.
           **/
          try {
<span class="line-added">+             ResultSetMetaData rsmd = crsSync.getMetaData();</span>
              // check whether the index is in range
<span class="line-modified">!             if(index&lt;=0 || rsmd == null || index &gt; rsmd.getColumnCount() ) {</span>
                  throw new SQLException(resBundle.handleGetObject(&quot;syncrsimpl.indexval&quot;).toString()+ index);
              }
               // check whether index col is in conflict
              if(crsRes.getObject(index) == null) {
                  throw new SQLException(resBundle.handleGetObject(&quot;syncrsimpl.noconflict&quot;).toString());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 391,12 ***</span>
       * @param columnName a {@code String} object giving the name of the column
       *        into which to set the value to be persisted
       * @param obj an {@code Object} that is the value to be set in the data source
       */
      public void setResolvedValue(String columnName, Object obj) throws SQLException {
<span class="line-modified">!        // modify method to throw SQLException in spec</span>
<span class="line-modified">!        // %%% Missing implementation!</span>
      }
  
      /**
       * This function is package private,
       * i.e. cannot be accesses outside this package.
<span class="line-new-header">--- 397,12 ---</span>
       * @param columnName a {@code String} object giving the name of the column
       *        into which to set the value to be persisted
       * @param obj an {@code Object} that is the value to be set in the data source
       */
      public void setResolvedValue(String columnName, Object obj) throws SQLException {
<span class="line-modified">!         // %%% Missing implementation!</span>
<span class="line-modified">!         throw new SQLException(&quot;Method not supported&quot;);</span>
      }
  
      /**
       * This function is package private,
       * i.e. cannot be accesses outside this package.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 501,11 ***</span>
       *     if it is off the result set
       * @throws SQLException if a database access error occurs or the result set type
       *     is TYPE_FORWARD_ONLY
       */
     public boolean previousConflict() throws SQLException {
<span class="line-modified">!        throw new UnsupportedOperationException();</span>
     }
  
      //-----------------------------------------------------------------------
      // Properties
      //-----------------------------------------------------------------------
<span class="line-new-header">--- 507,11 ---</span>
       *     if it is off the result set
       * @throws SQLException if a database access error occurs or the result set type
       *     is TYPE_FORWARD_ONLY
       */
     public boolean previousConflict() throws SQLException {
<span class="line-modified">!        return false;</span>
     }
  
      //-----------------------------------------------------------------------
      // Properties
      //-----------------------------------------------------------------------
</pre>
<center><a href="../CachedRowSetImpl.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../package-info.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>