<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.sql.rowset/share/classes/javax/sql/rowset/WebRowSet.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package javax.sql.rowset;
 27 
 28 import java.sql.*;
 29 import javax.sql.*;
 30 import javax.naming.*;
 31 import java.io.*;
 32 import java.math.*;
 33 import org.xml.sax.*;
 34 
 35 /**
 36  * The standard interface that all implementations of a {@code WebRowSet}
 37  * must implement.
 38  *
 39  * &lt;h2&gt;1.0 Overview&lt;/h2&gt;
 40  * The {@code WebRowSetImpl} provides the standard
 41  * reference implementation, which may be extended if required.
 42  * &lt;P&gt;
 43  * The standard WebRowSet XML Schema definition is available at the following
 44  * URI:
 45  * &lt;ul&gt;
 46  * &lt;li&gt;
<a name="1" id="anc1"></a><span class="line-modified"> 47  * &lt;a href=&quot;http://java.sun.com/xml/ns/jdbc/webrowset.xsd&quot;&gt;http://java.sun.com/xml/ns/jdbc/webrowset.xsd&lt;/a&gt;</span>
 48  * &lt;/li&gt;
 49  * &lt;/ul&gt;
 50  * It describes the standard XML document format required when describing a
 51  * {@code RowSet} object in XML and must be used be all standard implementations
 52  * of the {@code WebRowSet} interface to ensure interoperability. In addition,
 53  * the {@code WebRowSet} schema uses specific SQL/XML Schema annotations,
 54  * thus ensuring greater cross
 55  * platform interoperability. This is an effort currently under way at the ISO
 56  * organization. The SQL/XML definition is available at the following URI:
 57  * &lt;ul&gt;
 58  * &lt;li&gt;
 59  * &lt;a href=&quot;http://standards.iso.org/iso/9075/2002/12/sqlxml.xsd&quot;&gt;http://standards.iso.org/iso/9075/2002/12/sqlxml.xsd&lt;/a&gt;
 60  * &lt;/li&gt;
 61  * &lt;/ul&gt;
 62  * The schema definition describes the internal data of a {@code RowSet} object
 63  * in three distinct areas:
 64  * &lt;UL&gt;
 65  * &lt;li&gt;properties - These properties describe the standard synchronization
 66  * provider properties in addition to the more general {@code RowSet} properties.
 67  * &lt;/li&gt;
 68  * &lt;li&gt;metadata - This describes the metadata associated with the tabular structure governed by a
 69  * {@code WebRowSet} object. The metadata described is closely aligned with the
 70  * metadata accessible in the underlying {@code java.sql.ResultSet} interface.
 71  * &lt;/li&gt;
 72  * &lt;li&gt;data - This describes the original data (the state of data since the
 73  * last population
 74  * or last synchronization of the {@code WebRowSet} object) and the current
 75  * data. By keeping track of the delta between the original data and the current data,
 76  * a {@code WebRowSet} maintains the ability to synchronize changes
 77  * in its data back to the originating data source.
 78  * &lt;/li&gt;
 79  * &lt;/ul&gt;
 80  *
 81  * &lt;h2&gt;2.0 WebRowSet States&lt;/h2&gt;
 82  * The following sections demonstrates how a {@code WebRowSet} implementation
 83  * should use the XML Schema to describe update, insert, and delete operations
 84  * and to describe the state of a {@code WebRowSet} object in XML.
 85  *
 86  * &lt;h2&gt;2.1 State 1 - Outputting a {@code WebRowSet} Object to XML&lt;/h2&gt;
 87  * In this example, a {@code WebRowSet} object is created and populated with a simple 2 column,
 88  * 5 row table from a data source. Having the 5 rows in a {@code WebRowSet} object
 89  * makes it possible to describe them in XML. The
 90  * metadata describing the various standard JavaBeans properties as defined
 91  * in the RowSet interface plus the standard properties defined in
 92  * the {@code CachedRowSet}&amp;trade; interface
 93  * provide key details that describe WebRowSet
 94  * properties. Outputting the WebRowSet object to XML using the standard
 95  * {@code writeXml} methods describes the internal properties as follows:
 96  * &lt;PRE&gt;
 97  * {@code
 98  * &lt;properties&gt;
 99  *       &lt;command&gt;select co1, col2 from test_table&lt;/command&gt;
100  *      &lt;concurrency&gt;1&lt;/concurrency&gt;
101  *      &lt;datasource/&gt;
102  *      &lt;escape-processing&gt;true&lt;/escape-processing&gt;
103  *      &lt;fetch-direction&gt;0&lt;/fetch-direction&gt;
104  *      &lt;fetch-size&gt;0&lt;/fetch-size&gt;
105  *      &lt;isolation-level&gt;1&lt;/isolation-level&gt;
106  *      &lt;key-columns/&gt;
107  *      &lt;map/&gt;
108  *      &lt;max-field-size&gt;0&lt;/max-field-size&gt;
109  *      &lt;max-rows&gt;0&lt;/max-rows&gt;
110  *      &lt;query-timeout&gt;0&lt;/query-timeout&gt;
111  *      &lt;read-only&gt;false&lt;/read-only&gt;
112  *      &lt;rowset-type&gt;TRANSACTION_READ_UNCOMMITTED&lt;/rowset-type&gt;
113  *      &lt;show-deleted&gt;false&lt;/show-deleted&gt;
114  *      &lt;table-name/&gt;
115  *      &lt;url&gt;jdbc:thin:oracle&lt;/url&gt;
116  *      &lt;sync-provider&gt;
117  *              &lt;sync-provider-name&gt;.com.rowset.provider.RIOptimisticProvider&lt;/sync-provider-name&gt;
118  *              &lt;sync-provider-vendor&gt;Oracle Corporation&lt;/sync-provider-vendor&gt;
119  *              &lt;sync-provider-version&gt;1.0&lt;/sync-provider-name&gt;
120  *              &lt;sync-provider-grade&gt;LOW&lt;/sync-provider-grade&gt;
121  *              &lt;data-source-lock&gt;NONE&lt;/data-source-lock&gt;
122  *      &lt;/sync-provider&gt;
123  * &lt;/properties&gt;
124  * } &lt;/PRE&gt;
125  * The meta-data describing the make up of the WebRowSet is described
126  * in XML as detailed below. Note both columns are described between the
127  * {@code column-definition} tags.
128  * &lt;PRE&gt;
129  * {@code
130  * &lt;metadata&gt;
131  *      &lt;column-count&gt;2&lt;/column-count&gt;
132  *      &lt;column-definition&gt;
133  *              &lt;column-index&gt;1&lt;/column-index&gt;
134  *              &lt;auto-increment&gt;false&lt;/auto-increment&gt;
135  *              &lt;case-sensitive&gt;true&lt;/case-sensitive&gt;
136  *              &lt;currency&gt;false&lt;/currency&gt;
137  *              &lt;nullable&gt;1&lt;/nullable&gt;
138  *              &lt;signed&gt;false&lt;/signed&gt;
139  *              &lt;searchable&gt;true&lt;/searchable&gt;
140  *              &lt;column-display-size&gt;10&lt;/column-display-size&gt;
141  *              &lt;column-label&gt;COL1&lt;/column-label&gt;
142  *              &lt;column-name&gt;COL1&lt;/column-name&gt;
143  *              &lt;schema-name/&gt;
144  *              &lt;column-precision&gt;10&lt;/column-precision&gt;
145  *              &lt;column-scale&gt;0&lt;/column-scale&gt;
146  *              &lt;table-name/&gt;
147  *              &lt;catalog-name/&gt;
148  *              &lt;column-type&gt;1&lt;/column-type&gt;
149  *              &lt;column-type-name&gt;CHAR&lt;/column-type-name&gt;
150  *      &lt;/column-definition&gt;
151  *      &lt;column-definition&gt;
152  *              &lt;column-index&gt;2&lt;/column-index&gt;
153  *              &lt;auto-increment&gt;false&lt;/auto-increment&gt;
154  *              &lt;case-sensitive&gt;false&lt;/case-sensitive&gt;
155  *              &lt;currency&gt;false&lt;/currency&gt;
156  *              &lt;nullable&gt;1&lt;/nullable&gt;
157  *              &lt;signed&gt;true&lt;/signed&gt;
158  *              &lt;searchable&gt;true&lt;/searchable&gt;
159  *              &lt;column-display-size&gt;39&lt;/column-display-size&gt;
160  *              &lt;column-label&gt;COL2&lt;/column-label&gt;
161  *              &lt;column-name&gt;COL2&lt;/column-name&gt;
162  *              &lt;schema-name/&gt;
163  *              &lt;column-precision&gt;38&lt;/column-precision&gt;
164  *              &lt;column-scale&gt;0&lt;/column-scale&gt;
165  *              &lt;table-name/&gt;
166  *              &lt;catalog-name/&gt;
167  *              &lt;column-type&gt;3&lt;/column-type&gt;
168  *              &lt;column-type-name&gt;NUMBER&lt;/column-type-name&gt;
169  *      &lt;/column-definition&gt;
170  * &lt;/metadata&gt;
171  * }&lt;/PRE&gt;
172  * Having detailed how the properties and metadata are described, the following details
173  * how the contents of a {@code WebRowSet} object is described in XML. Note, that
174  * this describes a {@code WebRowSet} object that has not undergone any
175  * modifications since its instantiation.
176  * A {@code currentRow} tag is mapped to each row of the table structure that the
177  * {@code WebRowSet} object provides. A {@code columnValue} tag may contain
178  * either the {@code stringData} or {@code binaryData} tag, according to
179  * the SQL type that
180  * the XML value is mapping back to. The {@code binaryData} tag contains data in the
181  * Base64 encoding and is typically used for {@code BLOB} and {@code CLOB} type data.
182  * &lt;PRE&gt;
183  * {@code
184  * &lt;data&gt;
185  *      &lt;currentRow&gt;
186  *              &lt;columnValue&gt;
187  *                      firstrow
188  *              &lt;/columnValue&gt;
189  *              &lt;columnValue&gt;
190  *                      1
191  *              &lt;/columnValue&gt;
192  *      &lt;/currentRow&gt;
193  *      &lt;currentRow&gt;
194  *              &lt;columnValue&gt;
195  *                      secondrow
196  *              &lt;/columnValue&gt;
197  *              &lt;columnValue&gt;
198  *                      2
199  *              &lt;/columnValue&gt;
200  *      &lt;/currentRow&gt;
201  *      &lt;currentRow&gt;
202  *              &lt;columnValue&gt;
203  *                      thirdrow
204  *              &lt;/columnValue&gt;
205  *              &lt;columnValue&gt;
206  *                      3
207  *              &lt;/columnValue&gt;
208  *      &lt;/currentRow&gt;
209  *      &lt;currentRow&gt;
210  *              &lt;columnValue&gt;
211  *                      fourthrow
212  *              &lt;/columnValue&gt;
213  *              &lt;columnValue&gt;
214  *                      4
215  *              &lt;/columnValue&gt;
216  *      &lt;/currentRow&gt;
217  * &lt;/data&gt;
218  * }&lt;/PRE&gt;
219  * &lt;h2&gt;2.2 State 2 - Deleting a Row&lt;/h2&gt;
220  * Deleting a row in a {@code WebRowSet} object involves simply moving to the row
221  * to be deleted and then calling the method {@code deleteRow}, as in any other
222  * {@code RowSet} object.  The following
223  * two lines of code, in which &lt;i&gt;wrs&lt;/i&gt; is a {@code WebRowSet} object, delete
224  * the third row.
225  * &lt;PRE&gt;
226  *     wrs.absolute(3);
227  *     wrs.deleteRow();
228  * &lt;/PRE&gt;
229  * The XML description shows the third row is marked as a {@code deleteRow},
230  *  which eliminates the third row in the {@code WebRowSet} object.
231  * &lt;PRE&gt;
232  * {@code
233  * &lt;data&gt;
234  *      &lt;currentRow&gt;
235  *              &lt;columnValue&gt;
236  *                      firstrow
237  *              &lt;/columnValue&gt;
238  *              &lt;columnValue&gt;
239  *                      1
240  *              &lt;/columnValue&gt;
241  *      &lt;/currentRow&gt;
242  *      &lt;currentRow&gt;
243  *              &lt;columnValue&gt;
244  *                      secondrow
245  *              &lt;/columnValue&gt;
246  *              &lt;columnValue&gt;
247  *                      2
248  *              &lt;/columnValue&gt;
249  *      &lt;/currentRow&gt;
250  *      &lt;deleteRow&gt;
251  *              &lt;columnValue&gt;
252  *                      thirdrow
253  *              &lt;/columnValue&gt;
254  *              &lt;columnValue&gt;
255  *                      3
256  *              &lt;/columnValue&gt;
257  *      &lt;/deleteRow&gt;
258  *      &lt;currentRow&gt;
259  *              &lt;columnValue&gt;
260  *                      fourthrow
261  *              &lt;/columnValue&gt;
262  *              &lt;columnValue&gt;
263  *                      4
264  *              &lt;/columnValue&gt;
265  *      &lt;/currentRow&gt;
266  * &lt;/data&gt;
267  *} &lt;/PRE&gt;
268  * &lt;h2&gt;2.3 State 3 - Inserting a Row&lt;/h2&gt;
269  * A {@code WebRowSet} object can insert a new row by moving to the insert row,
270  * calling the appropriate updater methods for each column in the row, and then
271  * calling the method {@code insertRow}.
272  * &lt;PRE&gt;
273  * {@code
274  * wrs.moveToInsertRow();
275  * wrs.updateString(1, &quot;fifththrow&quot;);
276  * wrs.updateString(2, &quot;5&quot;);
277  * wrs.insertRow();
278  * }&lt;/PRE&gt;
279  * The following code fragment changes the second column value in the row just inserted.
280  * Note that this code applies when new rows are inserted right after the current row,
281  * which is why the method {@code next} moves the cursor to the correct row.
282  * Calling the method {@code acceptChanges} writes the change to the data source.
283  *
284  * &lt;PRE&gt;
285  * {@code wrs.moveToCurrentRow();
286  * wrs.next();
287  * wrs.updateString(2, &quot;V&quot;);
288  * wrs.acceptChanges();
289  * }&lt;/PRE&gt;
290  * Describing this in XML demonstrates where the Java code inserts a new row and then
291  * performs an update on the newly inserted row on an individual field.
292  * &lt;PRE&gt;
293  * {@code
294  * &lt;data&gt;
295  *      &lt;currentRow&gt;
296  *              &lt;columnValue&gt;
297  *                      firstrow
298  *              &lt;/columnValue&gt;
299  *              &lt;columnValue&gt;
300  *                      1
301  *              &lt;/columnValue&gt;
302  *      &lt;/currentRow&gt;
303  *      &lt;currentRow&gt;
304  *              &lt;columnValue&gt;
305  *                      secondrow
306  *              &lt;/columnValue&gt;
307  *              &lt;columnValue&gt;
308  *                      2
309  *              &lt;/columnValue&gt;
310  *      &lt;/currentRow&gt;
311  *      &lt;currentRow&gt;
312  *              &lt;columnValue&gt;
313  *                      newthirdrow
314  *              &lt;/columnValue&gt;
315  *              &lt;columnValue&gt;
316  *                      III
317  *              &lt;/columnValue&gt;
318  *      &lt;/currentRow&gt;
319  *      &lt;insertRow&gt;
320  *              &lt;columnValue&gt;
321  *                      fifthrow
322  *              &lt;/columnValue&gt;
323  *              &lt;columnValue&gt;
324  *                      5
325  *              &lt;/columnValue&gt;
326  *              &lt;updateValue&gt;
327  *                      V
328  *              &lt;/updateValue&gt;
329  *      &lt;/insertRow&gt;
330  *      &lt;currentRow&gt;
331  *              &lt;columnValue&gt;
332  *                      fourthrow
333  *              &lt;/columnValue&gt;
334  *              &lt;columnValue&gt;
335  *                      4
336  *              &lt;/columnValue&gt;
337  *      &lt;/currentRow&gt;
338  * &lt;/date&gt;
339  *} &lt;/PRE&gt;
340  * &lt;h2&gt;2.4 State 4 - Modifying a Row&lt;/h2&gt;
341  * Modifying a row produces specific XML that records both the new value and the
342  * value that was replaced.  The value that was replaced becomes the original value,
343  * and the new value becomes the current value. The following
344  * code moves the cursor to a specific row, performs some modifications, and updates
345  * the row when complete.
346  * &lt;PRE&gt;
347  *{@code
348  * wrs.absolute(5);
349  * wrs.updateString(1, &quot;new4thRow&quot;);
350  * wrs.updateString(2, &quot;IV&quot;);
351  * wrs.updateRow();
352  * }&lt;/PRE&gt;
353  * In XML, this is described by the {@code modifyRow} tag. Both the original and new
354  * values are contained within the tag for original row tracking purposes.
355  * &lt;PRE&gt;
356  * {@code
357  * &lt;data&gt;
358  *      &lt;currentRow&gt;
359  *              &lt;columnValue&gt;
360  *                      firstrow
361  *              &lt;/columnValue&gt;
362  *              &lt;columnValue&gt;
363  *                      1
364  *              &lt;/columnValue&gt;
365  *      &lt;/currentRow&gt;
366  *      &lt;currentRow&gt;
367  *              &lt;columnValue&gt;
368  *                      secondrow
369  *              &lt;/columnValue&gt;
370  *              &lt;columnValue&gt;
371  *                      2
372  *              &lt;/columnValue&gt;
373  *      &lt;/currentRow&gt;
374  *      &lt;currentRow&gt;
375  *              &lt;columnValue&gt;
376  *                      newthirdrow
377  *              &lt;/columnValue&gt;
378  *              &lt;columnValue&gt;
379  *                      III
380  *              &lt;/columnValue&gt;
381  *      &lt;/currentRow&gt;
382  *      &lt;currentRow&gt;
383  *              &lt;columnValue&gt;
384  *                      fifthrow
385  *              &lt;/columnValue&gt;
386  *              &lt;columnValue&gt;
387  *                      5
388  *              &lt;/columnValue&gt;
389  *      &lt;/currentRow&gt;
390  *      &lt;modifyRow&gt;
391  *              &lt;columnValue&gt;
392  *                      fourthrow
393  *              &lt;/columnValue&gt;
394  *              &lt;updateValue&gt;
395  *                      new4thRow
396  *              &lt;/updateValue&gt;
397  *              &lt;columnValue&gt;
398  *                      4
399  *              &lt;/columnValue&gt;
400  *              &lt;updateValue&gt;
401  *                      IV
402  *              &lt;/updateValue&gt;
403  *      &lt;/modifyRow&gt;
404  * &lt;/data&gt;
405  * }&lt;/PRE&gt;
406  *
407  * @see javax.sql.rowset.JdbcRowSet
408  * @see javax.sql.rowset.CachedRowSet
409  * @see javax.sql.rowset.FilteredRowSet
410  * @see javax.sql.rowset.JoinRowSet
411  * @since 1.5
412  */
413 
414 public interface WebRowSet extends CachedRowSet {
415 
416    /**
417     * Reads a {@code WebRowSet} object in its XML format from the given
418     * {@code Reader} object.
419     *
420     * @param reader the {@code java.io.Reader} stream from which this
421     *        {@code WebRowSet} object will be populated
422 
423     * @throws SQLException if a database access error occurs
424     */
425     public void readXml(java.io.Reader reader) throws SQLException;
426 
427     /**
428      * Reads a stream based XML input to populate this {@code WebRowSet}
429      * object.
430      *
431      * @param iStream the {@code java.io.InputStream} from which this
432      *        {@code WebRowSet} object will be populated
433      * @throws SQLException if a data source access error occurs
434      * @throws IOException if an IO exception occurs
435      */
436     public void readXml(java.io.InputStream iStream) throws SQLException, IOException;
437 
438    /**
439     * Populates this {@code WebRowSet} object with
440     * the contents of the given {@code ResultSet} object and writes its
441     * data, properties, and metadata
442     * to the given {@code Writer} object in XML format.
443     * &lt;p&gt;
444     * NOTE: The {@code WebRowSet} cursor may be moved to write out the
445     * contents to the XML data source. If implemented in this way, the cursor &lt;b&gt;must&lt;/b&gt;
446     * be returned to its position just prior to the {@code writeXml()} call.
447     *
448     * @param rs the {@code ResultSet} object with which to populate this
449     *        {@code WebRowSet} object
450     * @param writer the {@code java.io.Writer} object to write to.
451     * @throws SQLException if an error occurs writing out the rowset
452     *          contents in XML format
453     */
454     public void writeXml(ResultSet rs, java.io.Writer writer) throws SQLException;
455 
456    /**
457     * Populates this {@code WebRowSet} object with
458     * the contents of the given {@code ResultSet} object and writes its
459     * data, properties, and metadata
460     * to the given {@code OutputStream} object in XML format.
461     * &lt;p&gt;
462     * NOTE: The {@code WebRowSet} cursor may be moved to write out the
463     * contents to the XML data source. If implemented in this way, the cursor &lt;b&gt;must&lt;/b&gt;
464     * be returned to its position just prior to the {@code writeXml()} call.
465     *
466     * @param rs the {@code ResultSet} object with which to populate this
467     *        {@code WebRowSet} object
468     * @param oStream the {@code java.io.OutputStream} to write to
469     * @throws SQLException if a data source access error occurs
470     * @throws IOException if a IO exception occurs
471     */
472     public void writeXml(ResultSet rs, java.io.OutputStream oStream) throws SQLException, IOException;
473 
474    /**
475     * Writes the data, properties, and metadata for this {@code WebRowSet} object
476     * to the given {@code Writer} object in XML format.
477     *
478     * @param writer the {@code java.io.Writer} stream to write to
479     * @throws SQLException if an error occurs writing out the rowset
480     *          contents to XML
481     */
482     public void writeXml(java.io.Writer writer) throws SQLException;
483 
484     /**
485      * Writes the data, properties, and metadata for this {@code WebRowSet} object
486      * to the given {@code OutputStream} object in XML format.
487      *
488      * @param oStream the {@code java.io.OutputStream} stream to write to
489      * @throws SQLException if a data source access error occurs
490      * @throws IOException if a IO exception occurs
491      */
492     public void writeXml(java.io.OutputStream oStream) throws SQLException, IOException;
493 
494     /**
495      * The public identifier for the XML Schema definition that defines the XML
496      * tags and their valid values for a {@code WebRowSet} implementation.
497      */
498     public static String PUBLIC_XML_SCHEMA =
499         &quot;--//Oracle Corporation//XSD Schema//EN&quot;;
500 
501     /**
502      * The URL for the XML Schema definition file that defines the XML tags and
503      * their valid values for a {@code WebRowSet} implementation.
504      */
505     public static String SCHEMA_SYSTEM_ID = &quot;http://java.sun.com/xml/ns/jdbc/webrowset.xsd&quot;;
506 }
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>