<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/java.sql.rowset/share/classes/javax/sql/rowset/spi/package-info.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /**
 27  * The standard classes and interfaces that a third party vendor has to
 28  * use in its implementation of a synchronization provider. These classes and
 29  * interfaces are referred to as the Service Provider Interface (SPI).  To make it possible
<a name="2" id="anc2"></a><span class="line-modified"> 30  * for a &lt;code&gt;RowSet&lt;/code&gt; object to use an implementation, the vendor must register</span>
<span class="line-modified"> 31  * it with the &lt;code&gt;SyncFactory&lt;/code&gt; singleton. (See the class comment for</span>
<span class="line-modified"> 32  * &lt;code&gt;SyncProvider&lt;/code&gt; for a full explanation of the registration process and</span>
 33  * the naming convention to be used.)
 34  *
 35  * &lt;h2&gt;Table of Contents&lt;/h2&gt;
 36  * &lt;ul&gt;
 37  * &lt;li&gt;&lt;a href=&quot;#pkgspec&quot;&gt;1.0 Package Specification&lt;/a&gt;
 38  * &lt;li&gt;&lt;a href=&quot;#arch&quot;&gt;2.0 Service Provider Architecture&lt;/a&gt;
 39  * &lt;li&gt;&lt;a href=&quot;#impl&quot;&gt;3.0 Implementer&#39;s Guide&lt;/a&gt;
 40  * &lt;li&gt;&lt;a href=&quot;#resolving&quot;&gt;4.0 Resolving Synchronization Conflicts&lt;/a&gt;
 41  * &lt;li&gt;&lt;a href=&quot;#relspec&quot;&gt;5.0 Related Specifications&lt;/a&gt;
 42  * &lt;li&gt;&lt;a href=&quot;#reldocs&quot;&gt;6.0 Related Documentation&lt;/a&gt;
 43  * &lt;/ul&gt;
 44  *
 45  * &lt;h3&gt;&lt;a id=&quot;pkgspec&quot;&gt;1.0 Package Specification&lt;/a&gt;&lt;/h3&gt;
 46  * &lt;P&gt;
<a name="3" id="anc3"></a><span class="line-modified"> 47  * The following classes and interfaces make up the &lt;code&gt;javax.sql.rowset.spi&lt;/code&gt;</span>
 48  * package:
 49  * &lt;UL&gt;
<a name="4" id="anc4"></a><span class="line-modified"> 50  *  &lt;LI&gt;&lt;code&gt;SyncFactory&lt;/code&gt;</span>
<span class="line-modified"> 51  *  &lt;LI&gt;&lt;code&gt;SyncProvider&lt;/code&gt;</span>
<span class="line-modified"> 52  *  &lt;LI&gt;&lt;code&gt;SyncFactoryException&lt;/code&gt;</span>
<span class="line-modified"> 53  *  &lt;LI&gt;&lt;code&gt;SyncProviderException&lt;/code&gt;</span>
<span class="line-modified"> 54  *  &lt;LI&gt;&lt;code&gt;SyncResolver&lt;/code&gt;</span>
<span class="line-modified"> 55  *  &lt;LI&gt;&lt;code&gt;XmlReader&lt;/code&gt;</span>
<span class="line-modified"> 56  *  &lt;LI&gt;&lt;code&gt;XmlWriter&lt;/code&gt;</span>
<span class="line-modified"> 57  *  &lt;LI&gt;&lt;code&gt;TransactionalWriter&lt;/code&gt;</span>
 58  * &lt;/UL&gt;
<a name="5" id="anc5"></a><span class="line-modified"> 59  * The following interfaces, in the &lt;code&gt;javax.sql&lt;/code&gt; package, are also part of the SPI:</span>
 60  * &lt;UL&gt;
<a name="6" id="anc6"></a><span class="line-modified"> 61  *  &lt;LI&gt;&lt;code&gt;RowSetReader&lt;/code&gt;</span>
<span class="line-modified"> 62  *  &lt;LI&gt;&lt;code&gt;RowSetWriter&lt;/code&gt;</span>
 63  * &lt;/UL&gt;
 64  * &lt;P&gt;
<a name="7" id="anc7"></a><span class="line-modified"> 65  * A &lt;code&gt;SyncProvider&lt;/code&gt; implementation provides a disconnected &lt;code&gt;RowSet&lt;/code&gt;</span>
 66  * object with the mechanisms for reading data into it and for writing data that has been
 67  * modified in it
<a name="8" id="anc8"></a><span class="line-modified"> 68  * back to the underlying data source.  A &lt;i&gt;reader&lt;/i&gt;, a &lt;code&gt;RowSetReader&lt;/code&gt; or</span>
<span class="line-modified"> 69  * &lt;code&gt;XMLReader&lt;/code&gt; object, reads data into a &lt;code&gt;RowSet&lt;/code&gt; object when the</span>
<span class="line-modified"> 70  * &lt;code&gt;CachedRowSet&lt;/code&gt; methods &lt;code&gt;execute&lt;/code&gt; or &lt;code&gt;populate&lt;/code&gt;</span>
<span class="line-modified"> 71  * are called.  A &lt;i&gt;writer&lt;/i&gt;, a &lt;code&gt;RowSetWriter&lt;/code&gt; or &lt;code&gt;XMLWriter&lt;/code&gt;</span>
 72  * object, writes changes back to the underlying data source when the
<a name="9" id="anc9"></a><span class="line-modified"> 73  * &lt;code&gt;CachedRowSet&lt;/code&gt; method &lt;code&gt;acceptChanges&lt;/code&gt; is called.</span>
 74  * &lt;P&gt;
<a name="10" id="anc10"></a><span class="line-modified"> 75  * The process of writing changes in a &lt;code&gt;RowSet&lt;/code&gt; object to its data source</span>
<span class="line-modified"> 76  * is known as &lt;i&gt;synchronization&lt;/i&gt;.  The &lt;code&gt;SyncProvider&lt;/code&gt; implementation that a</span>
<span class="line-modified"> 77  * &lt;code&gt;RowSet&lt;/code&gt; object is using determines the level of synchronization that the</span>
<span class="line-modified"> 78  * &lt;code&gt;RowSet&lt;/code&gt; object&#39;s writer uses. The various levels of synchronization are</span>
 79  * referred to as &lt;i&gt;grades&lt;/i&gt;.
 80  * &lt;P&gt;
 81  * The lower grades of synchronization are
 82  * known as &lt;i&gt;optimistic&lt;/i&gt; concurrency levels because they optimistically
 83  * assume that there will be no conflicts or very few conflicts.  A conflict exists when
<a name="11" id="anc11"></a><span class="line-modified"> 84  * the same data modified in the &lt;code&gt;RowSet&lt;/code&gt; object has also been modified</span>
 85  * in the data source. Using the optimistic concurrency model means that if there
<a name="12" id="anc12"></a><span class="line-modified"> 86  * is a conflict, modifications to either the data source or the &lt;code&gt;RowSet&lt;/code&gt;</span>
 87  * object will be lost.
 88  * &lt;P&gt;
 89  * Higher grades of synchronization are called &lt;i&gt;pessimistic&lt;/i&gt; because they assume
 90  * that others will be accessing the data source and making modifications.  These
 91  * grades set varying levels of locks to increase the chances that no conflicts
 92  * occur.
 93  * &lt;P&gt;
 94  * The lowest level of synchronization is simply writing any changes made to the
<a name="13" id="anc13"></a><span class="line-modified"> 95  * &lt;code&gt;RowSet&lt;/code&gt; object to its underlying data source.  The writer does</span>
 96  * nothing to check for conflicts.
 97  * If there is a conflict and the data
 98  * source values are overwritten, the changes other parties have made by to the data
 99  * source are lost.
100  * &lt;P&gt;
<a name="14" id="anc14"></a><span class="line-modified">101  * The &lt;code&gt;RIXMLProvider&lt;/code&gt; implementation uses the lowest level</span>
<span class="line-modified">102  * of synchronization and just writes &lt;code&gt;RowSet&lt;/code&gt; changes to the data source.</span>
103  *
104  * &lt;P&gt;
105  * For the next level up, the
106  * writer checks to see if there are any conflicts, and if there are,
107  * it does not write anything to the data source.  The problem with this concurrency
108  * level is that if another party has modified the corresponding data in the data source
<a name="15" id="anc15"></a><span class="line-modified">109  * since the &lt;code&gt;RowSet&lt;/code&gt; object got its data,</span>
<span class="line-modified">110  * the changes made to the &lt;code&gt;RowSet&lt;/code&gt; object are lost. The</span>
<span class="line-modified">111  * &lt;code&gt;RIOptimisticProvider&lt;/code&gt; implementation uses this level of synchronization.</span>
112  * &lt;P&gt;
113  * At higher levels of synchronization, referred to as pessimistic concurrency,
114  * the writer take steps to avoid conflicts by setting locks. Setting locks
115  * can vary from setting a lock on a single row to setting a lock on a table
116  * or the entire data source. The level of synchronization is therefore a tradeoff
117  * between the ability of users to access the data source concurrently and the  ability
<a name="16" id="anc16"></a><span class="line-modified">118  * of the writer to keep the data in the &lt;code&gt;RowSet&lt;/code&gt; object and its data source</span>
119  * synchronized.
120  * &lt;P&gt;
<a name="17" id="anc17"></a><span class="line-modified">121  * It is a requirement that all disconnected &lt;code&gt;RowSet&lt;/code&gt; objects</span>
<span class="line-modified">122  * (&lt;code&gt;CachedRowSet&lt;/code&gt;, &lt;code&gt;FilteredRowSet&lt;/code&gt;, &lt;code&gt;JoinRowSet&lt;/code&gt;,</span>
<span class="line-modified">123  * and &lt;code&gt;WebRowSet&lt;/code&gt; objects) obtain their &lt;code&gt;SyncProvider&lt;/code&gt; objects</span>
<span class="line-modified">124  * from the &lt;code&gt;SyncFactory&lt;/code&gt; mechanism.</span>
125  * &lt;P&gt;
126  * The reference implementation (RI) provides two synchronization providers.
127  *    &lt;UL&gt;
<a name="18" id="anc18"></a><span class="line-modified">128  *       &lt;LI&gt;&lt;b&gt;&lt;code&gt;RIOptimisticProvider&lt;/code&gt;&lt;/b&gt; &lt;br&gt;</span>
<span class="line-modified">129  *            The default provider that the &lt;code&gt;SyncFactory&lt;/code&gt; instance will</span>
<span class="line-modified">130  *            supply to a disconnected &lt;code&gt;RowSet&lt;/code&gt; object when no provider</span>
131  *            implementation is specified.&lt;BR&gt;
132  *            This synchronization provider uses an optimistic concurrency model,
133  *            assuming that there will be few conflicts among users
134  *            who are accessing the same data in a database.  It avoids
135  *            using locks; rather, it checks to see if there is a conflict
<a name="19" id="anc19"></a><span class="line-modified">136  *            before trying to synchronize the &lt;code&gt;RowSet&lt;/code&gt; object and the</span>
137  *            data source. If there is a conflict, it does nothing, meaning that
<a name="20" id="anc20"></a><span class="line-modified">138  *            changes to the &lt;code&gt;RowSet&lt;/code&gt; object are not persisted to the data</span>
139  *            source.
<a name="21" id="anc21"></a><span class="line-modified">140  *        &lt;LI&gt;&lt;B&gt;&lt;code&gt;RIXMLProvider&lt;/code&gt;&lt;/B&gt; &lt;BR&gt;</span>
141  *             A synchronization provider that can be used with a
<a name="22" id="anc22"></a><span class="line-modified">142  *             &lt;code&gt;WebRowSet&lt;/code&gt; object, which is a rowset that can be written</span>
143  *             in XML format or read from XML format. The
<a name="23" id="anc23"></a><span class="line-modified">144  *             &lt;code&gt;RIXMLProvider&lt;/code&gt; implementation does no checking at all for</span>
145  *             conflicts and simply writes any updated data in the
<a name="24" id="anc24"></a><span class="line-modified">146  *             &lt;code&gt;WebRowSet&lt;/code&gt; object to the underlying data source.</span>
<span class="line-modified">147  *             &lt;code&gt;WebRowSet&lt;/code&gt; objects use this provider when they are</span>
148  *             dealing with XML data.
149  *     &lt;/UL&gt;
150  *
<a name="25" id="anc25"></a><span class="line-modified">151  *  These &lt;code&gt;SyncProvider&lt;/code&gt; implementations</span>
152  *  are bundled with the reference implementation, which makes them always available to
<a name="26" id="anc26"></a><span class="line-modified">153  *  &lt;code&gt;RowSet&lt;/code&gt; implementations.</span>
<span class="line-modified">154  *  &lt;code&gt;SyncProvider&lt;/code&gt; implementations make themselves available by being</span>
<span class="line-modified">155  *  registered with the &lt;code&gt;SyncFactory&lt;/code&gt; singleton.  When a &lt;code&gt;RowSet&lt;/code&gt;</span>
156  *  object requests a provider, by specifying it in the constructor or as an argument to the
<a name="27" id="anc27"></a><span class="line-modified">157  *  &lt;code&gt;CachedRowSet&lt;/code&gt; method &lt;code&gt;setSyncProvider&lt;/code&gt;,</span>
<span class="line-modified">158  *  the &lt;code&gt;SyncFactory&lt;/code&gt; singleton</span>
159  *  checks to see if the requested provider has been registered with it.
<a name="28" id="anc28"></a><span class="line-modified">160  *  If it has, the &lt;code&gt;SyncFactory&lt;/code&gt; creates an instance of it and passes it to the</span>
<span class="line-modified">161  *  requesting &lt;code&gt;RowSet&lt;/code&gt; object.</span>
<span class="line-modified">162  *  If the &lt;code&gt;SyncProvider&lt;/code&gt; implementation that is specified has not been registered,</span>
<span class="line-modified">163  *  the &lt;code&gt;SyncFactory&lt;/code&gt; singleton causes a &lt;code&gt;SyncFactoryException&lt;/code&gt; object</span>
164  *  to be thrown.  If no provider is specified,
<a name="29" id="anc29"></a><span class="line-modified">165  *  the &lt;code&gt;SyncFactory&lt;/code&gt; singleton will create an instance of the default</span>
<span class="line-modified">166  *  provider implementation, &lt;code&gt;RIOptimisticProvider&lt;/code&gt;,</span>
<span class="line-modified">167  *  and pass it to the requesting &lt;code&gt;RowSet&lt;/code&gt; object.</span>
168  *
169  * &lt;P&gt;
<a name="30" id="anc30"></a><span class="line-modified">170  * If a &lt;code&gt;WebRowSet&lt;/code&gt; object does not specify a provider in its constructor, the</span>
<span class="line-modified">171  * &lt;code&gt;SyncFactory&lt;/code&gt; will give it an instance of &lt;code&gt;RIOptimisticProvider&lt;/code&gt;.</span>
<span class="line-modified">172  * However, the constructor for &lt;code&gt;WebRowSet&lt;/code&gt; is implemented to set the provider</span>
<span class="line-modified">173  * to the &lt;code&gt;RIXMLProvider&lt;/code&gt;, which reads and writes a &lt;code&gt;RowSet&lt;/code&gt; object</span>
174  *  in XML format.
175  *  &lt;P&gt;
176  * See the &lt;a href=&quot;SyncProvider.html&quot;&gt;SyncProvider&lt;/a&gt; class
177  *  specification for further details.
178  * &lt;p&gt;
<a name="31" id="anc31"></a><span class="line-modified">179  * Vendors may develop a &lt;code&gt;SyncProvider&lt;/code&gt; implementation with any one of the possible</span>
<span class="line-modified">180  * levels of synchronization, thus giving &lt;code&gt;RowSet&lt;/code&gt; objects a choice of</span>
181  * synchronization mechanisms.
182  *
183  * &lt;h3&gt;&lt;a id=&quot;arch&quot;&gt;2.0 Service Provider Interface Architecture&lt;/a&gt;&lt;/h3&gt;
184  * &lt;b&gt;2.1 Overview&lt;/b&gt;
185  * &lt;p&gt;
186  * The Service Provider Interface provides a pluggable mechanism by which
<a name="32" id="anc32"></a><span class="line-modified">187  * &lt;code&gt;SyncProvider&lt;/code&gt; implementations can be registered and then generated when</span>
<span class="line-modified">188  * required. The lazy reference mechanism employed by the &lt;code&gt;SyncFactory&lt;/code&gt; limits</span>
189  * unnecessary resource consumption by not creating an instance until it is
190  * required by a disconnected
<a name="33" id="anc33"></a><span class="line-modified">191  * &lt;code&gt;RowSet&lt;/code&gt; object. The &lt;code&gt;SyncFactory&lt;/code&gt; class also provides</span>
192  * a standard API to configure logging options and streams that &lt;b&gt;may&lt;/b&gt; be provided
<a name="34" id="anc34"></a><span class="line-modified">193  * by a particular &lt;code&gt;SyncProvider&lt;/code&gt; implementation.</span>
194  * &lt;p&gt;
<a name="35" id="anc35"></a><span class="line-modified">195  * &lt;b&gt;2.2 Registering with the &lt;code&gt;SyncFactory&lt;/code&gt;&lt;/b&gt;</span>
196  * &lt;p&gt;
<a name="36" id="anc36"></a><span class="line-modified">197  * A third party &lt;code&gt;SyncProvider&lt;/code&gt; implementation must be registered with the</span>
<span class="line-modified">198  * &lt;code&gt;SyncFactory&lt;/code&gt; in order for a disconnected &lt;code&gt;RowSet&lt;/code&gt; object</span>
<span class="line-modified">199  * to obtain it and thereby use its &lt;code&gt;javax.sql.RowSetReader&lt;/code&gt; and</span>
<span class="line-modified">200  * &lt;code&gt;javax.sql.RowSetWriter&lt;/code&gt;</span>
201  * implementations. The following registration mechanisms are available to all
<a name="37" id="anc37"></a><span class="line-modified">202  * &lt;code&gt;SyncProvider&lt;/code&gt; implementations:</span>
203  * &lt;ul&gt;
204  * &lt;li&gt;&lt;b&gt;System properties&lt;/b&gt; - Properties set at the command line. These
205  * properties are set at run time and apply system-wide per invocation of the Java
206  * application. See the section &lt;a href=&quot;#reldocs&quot;&gt;&quot;Related Documentation&quot;&lt;/a&gt;
207  * further related information.
208  *
209  * &lt;li&gt;&lt;b&gt;Property Files&lt;/b&gt; - Properties specified in a standard property file.
210  * This can be specified using a System Property or by modifying a standard
211  * property file located in the platform run-time. The
212  * reference implementation of this technology includes a standard property
<a name="38" id="anc38"></a><span class="line-modified">213  * file than can be edited to add additional &lt;code&gt;SyncProvider&lt;/code&gt; objects.</span>
214  *
215  * &lt;li&gt;&lt;b&gt;JNDI Context&lt;/b&gt; - Available providers can be registered on a JNDI
<a name="39" id="anc39"></a><span class="line-modified">216  * context. The &lt;code&gt;SyncFactory&lt;/code&gt; will attempt to load &lt;code&gt;SyncProvider&lt;/code&gt;</span>
217  * objects bound to the context and register them with the factory. This
<a name="40" id="anc40"></a><span class="line-modified">218  * context must be supplied to the &lt;code&gt;SyncFactory&lt;/code&gt; for the mechanism to</span>
219  * function correctly.
220  * &lt;/ul&gt;
221  * &lt;p&gt;
222  * Details on how to specify the system properties or properties in a property file
223  * and how to configure the JNDI Context are explained in detail in the
<a name="41" id="anc41"></a><span class="line-modified">224  * &lt;a href=&quot;SyncFactory.html&quot;&gt;&lt;code&gt;SyncFactory&lt;/code&gt;&lt;/a&gt; class description.</span>
225  * &lt;p&gt;
226  * &lt;b&gt;2.3 SyncFactory Provider Instance Generation Policies&lt;/b&gt;
227  * &lt;p&gt;
<a name="42" id="anc42"></a><span class="line-modified">228  * The &lt;code&gt;SyncFactory&lt;/code&gt; generates a requested &lt;code&gt;SyncProvider&lt;/code&gt;</span>
229  * object if the provider has been correctly registered.  The
<a name="43" id="anc43"></a><span class="line-modified">230  * following policies are adhered to when either a disconnected &lt;code&gt;RowSet&lt;/code&gt; object</span>
<span class="line-modified">231  * is instantiated with a specified &lt;code&gt;SyncProvider&lt;/code&gt; implementation or is</span>
<span class="line-modified">232  * reconfigured at runtime with an alternative &lt;code&gt;SyncProvider&lt;/code&gt; object.</span>
233  * &lt;ul&gt;
<a name="44" id="anc44"></a><span class="line-modified">234  * &lt;li&gt; If a &lt;code&gt;SyncProvider&lt;/code&gt; object is specified and the &lt;code&gt;SyncFactory&lt;/code&gt;</span>
<span class="line-modified">235  * contains &lt;i&gt;no&lt;/i&gt; reference to the provider, a &lt;code&gt;SyncFactoryException&lt;/code&gt; is</span>
236  * thrown.
237  *
<a name="45" id="anc45"></a><span class="line-modified">238  * &lt;li&gt; If a &lt;code&gt;SyncProvider&lt;/code&gt; object is specified and the &lt;code&gt;SyncFactory&lt;/code&gt;</span>
239  * contains a reference to the provider, the requested provider is supplied.
240  *
<a name="46" id="anc46"></a><span class="line-modified">241  * &lt;li&gt; If no &lt;code&gt;SyncProvider&lt;/code&gt; object is specified, the reference</span>
<span class="line-modified">242  * implementation provider &lt;code&gt;RIOptimisticProvider&lt;/code&gt; is supplied.</span>
243  * &lt;/ul&gt;
244  * &lt;p&gt;
245  * These policies are explored in more detail in the &lt;a href=&quot;SyncFactory.html&quot;&gt;
<a name="47" id="anc47"></a><span class="line-modified">246  * &lt;code&gt;SyncFactory&lt;/code&gt;&lt;/a&gt; class.</span>
247  *
248  * &lt;h3&gt;&lt;a id=&quot;impl&quot;&gt;3.0 SyncProvider Implementer&#39;s Guide&lt;/a&gt;&lt;/h3&gt;
249  *
250  * &lt;b&gt;3.1 Requirements&lt;/b&gt;
251  * &lt;p&gt;
<a name="48" id="anc48"></a><span class="line-modified">252  * A compliant &lt;code&gt;SyncProvider&lt;/code&gt; implementation that is fully pluggable</span>
<span class="line-modified">253  * into the &lt;code&gt;SyncFactory&lt;/code&gt; &lt;b&gt;must&lt;/b&gt; extend and implement all</span>
<span class="line-modified">254  * abstract methods in the &lt;a href=&quot;SyncProvider.html&quot;&gt;&lt;code&gt;SyncProvider&lt;/code&gt;&lt;/a&gt;</span>
255  * class. In addition, an implementation &lt;b&gt;must&lt;/b&gt; determine the
256  * grade, locking and updatable view capabilities defined in the
<a name="49" id="anc49"></a><span class="line-modified">257  * &lt;code&gt;SyncProvider&lt;/code&gt; class definition. One or more of the</span>
<span class="line-modified">258  * &lt;code&gt;SyncProvider&lt;/code&gt; description criteria &lt;b&gt;must&lt;/b&gt; be supported. It</span>
259  * is expected that vendor implementations will offer a range of grade, locking, and
260  * updatable view capabilities.
261  * &lt;p&gt;
<a name="50" id="anc50"></a><span class="line-modified">262  * Furthermore, the &lt;code&gt;SyncProvider&lt;/code&gt; naming convention &lt;b&gt;must&lt;/b&gt; be followed as</span>
<span class="line-modified">263  * detailed in the &lt;a href=&quot;SyncProvider.html&quot;&gt;&lt;code&gt;SyncProvider&lt;/code&gt;&lt;/a&gt; class</span>
264  * description.
265  * &lt;p&gt;
266  * &lt;b&gt;3.2 Grades&lt;/b&gt;
267  * &lt;p&gt;
268  * JSR 114 defines a set of grades to describe the quality of synchronization
<a name="51" id="anc51"></a><span class="line-modified">269  * a &lt;code&gt;SyncProvider&lt;/code&gt; object can offer a disconnected &lt;code&gt;RowSet&lt;/code&gt;</span>
270  * object. These grades are listed from the lowest quality of service to the highest.
271  * &lt;ul&gt;
272  * &lt;li&gt;&lt;b&gt;GRADE_NONE&lt;/b&gt; - No synchronization with the originating data source is
<a name="52" id="anc52"></a><span class="line-modified">273  * provided. A &lt;code&gt;SyncProvider&lt;/code&gt; implementation returning this grade will simply</span>
<span class="line-modified">274  * attempt to write any data that has changed in the &lt;code&gt;RowSet&lt;/code&gt; object to the</span>
275  *underlying data source, overwriting whatever is there. No attempt is made to compare
276  * original values with current values to see if there is a conflict. The
<a name="53" id="anc53"></a><span class="line-modified">277  * &lt;code&gt;RIXMLProvider&lt;/code&gt; is implemented with this grade.</span>
278  *
279  * &lt;li&gt;&lt;b&gt;GRADE_CHECK_MODIFIED_AT_COMMIT&lt;/b&gt; - A low grade of optimistic synchronization.
<a name="54" id="anc54"></a><span class="line-modified">280  * A &lt;code&gt;SyncProvider&lt;/code&gt; implementation returning this grade</span>
281  * will check for conflicts in rows that have changed between the last synchronization
282  * and the current synchronization under way. Any changes in the originating data source
<a name="55" id="anc55"></a><span class="line-modified">283  * that have been modified will not be reflected in the disconnected &lt;code&gt;RowSet&lt;/code&gt;</span>
<span class="line-modified">284  * object. If there are no conflicts, changes in the &lt;code&gt;RowSet&lt;/code&gt; object will be</span>
285  * written to the data source. If there are conflicts, no changes are written.
<a name="56" id="anc56"></a><span class="line-modified">286  * The &lt;code&gt;RIOptimisticProvider&lt;/code&gt; implementation uses this grade.</span>
287  *
288  * &lt;li&gt;&lt;b&gt;GRADE_CHECK_ALL_AT_COMMIT&lt;/b&gt; - A high grade of optimistic synchronization.
<a name="57" id="anc57"></a><span class="line-modified">289  * A &lt;code&gt;SyncProvider&lt;/code&gt; implementation   returning this grade</span>
290  * will check all rows, including rows that have not changed in the disconnected
<a name="58" id="anc58"></a><span class="line-modified">291  * &lt;code&gt;RowSet&lt;/code&gt; object. In this way, any changes to rows in the underlying</span>
<span class="line-modified">292  * data source will be reflected in the disconnected &lt;code&gt;RowSet&lt;/code&gt; object</span>
293  * when the synchronization finishes successfully.
294  *
295  * &lt;li&gt;&lt;b&gt;GRADE_LOCK_WHEN_MODIFIED&lt;/b&gt; - A pessimistic grade of synchronization.
<a name="59" id="anc59"></a><span class="line-modified">296  * &lt;code&gt;SyncProvider&lt;/code&gt; implementations returning this grade will lock</span>
297  * the row in the originating  data source that corresponds to the row being changed
<a name="60" id="anc60"></a><span class="line-modified">298  * in the &lt;code&gt;RowSet&lt;/code&gt; object to reduce the possibility of other</span>
299  * processes modifying the same data in the data source.
300  *
301  * &lt;li&gt;&lt;b&gt;GRADE_LOCK_WHEN_LOADED&lt;/b&gt; - A higher pessimistic synchronization grade.
<a name="61" id="anc61"></a><span class="line-modified">302  * A &lt;code&gt;SyncProvider&lt;/code&gt; implementation returning this grade will lock</span>
303  * the entire view and/or  table affected by the original query used to
<a name="62" id="anc62"></a><span class="line-modified">304  * populate a &lt;code&gt;RowSet&lt;/code&gt; object.</span>
305  * &lt;/ul&gt;
306  * &lt;p&gt;
307  * &lt;b&gt;3.3 Locks&lt;/b&gt;
308  * &lt;p&gt;
309  * JSR 114 defines a set of constants that specify whether any locks have been
<a name="63" id="anc63"></a><span class="line-modified">310  * placed on a &lt;code&gt;RowSet&lt;/code&gt; object&#39;s underlying data source and, if so,</span>
311  * on which constructs the locks are placed.  These locks will remain on the data
<a name="64" id="anc64"></a><span class="line-modified">312  * source while the &lt;code&gt;RowSet&lt;/code&gt; object is disconnected from the data source.</span>
313  * &lt;P&gt;
314  * These constants &lt;b&gt;should&lt;/b&gt; be considered complementary to the
315  * grade constants. The default setting for the majority of grade settings requires
<a name="65" id="anc65"></a><span class="line-modified">316  * that no data source locks remain when a &lt;code&gt;RowSet&lt;/code&gt; object is disconnected</span>
317  * from its data source.
<a name="66" id="anc66"></a><span class="line-modified">318  * The grades &lt;code&gt;GRADE_LOCK_WHEN_MODIFIED&lt;/code&gt; and</span>
<span class="line-modified">319  * &lt;code&gt;GRADE_LOCK_WHEN_LOADED&lt;/code&gt; allow a disconnected &lt;code&gt;RowSet&lt;/code&gt; object</span>
320  * to have a fine-grained control over the degree of locking.
321  * &lt;ul&gt;
322  * &lt;li&gt;&lt;b&gt;DATASOURCE_NO_LOCK&lt;/b&gt; - No locks remain on the originating data source.
<a name="67" id="anc67"></a><span class="line-modified">323  * This is the default lock setting for all &lt;code&gt;SyncProvider&lt;/code&gt; implementations</span>
<span class="line-modified">324  * unless otherwise directed by a &lt;code&gt;RowSet&lt;/code&gt; object.</span>
325  *
326  * &lt;li&gt;&lt;b&gt;DATASOURCE_ROW_LOCK&lt;/b&gt; - A lock is placed on the rows that are touched by
<a name="68" id="anc68"></a><span class="line-modified">327  * the original SQL query used to populate the &lt;code&gt;RowSet&lt;/code&gt; object.</span>
328  *
329  * &lt;li&gt;&lt;b&gt;DATASOURCE_TABLE_LOCK&lt;/b&gt; - A lock is placed on all tables that are touched
<a name="69" id="anc69"></a><span class="line-modified">330  * by the query that was used to populate the &lt;code&gt;RowSet&lt;/code&gt; object.</span>
331  *
332  * &lt;li&gt;&lt;b&gt;DATASOURCE_DB_LOCK&lt;/b&gt;
<a name="70" id="anc70"></a><span class="line-modified">333  * A lock is placed on the entire data source that is used by the &lt;code&gt;RowSet&lt;/code&gt;</span>
334  * object.
335  * &lt;/ul&gt;
336  * &lt;p&gt;
337  * &lt;b&gt;3.4 Updatable Views&lt;/b&gt;
338  * &lt;p&gt;
<a name="71" id="anc71"></a><span class="line-modified">339  * A &lt;code&gt;RowSet&lt;/code&gt; object may be populated with data from an SQL &lt;code&gt;VIEW&lt;/code&gt;.</span>
<span class="line-modified">340  * The following constants indicate whether a &lt;code&gt;SyncProvider&lt;/code&gt; object can</span>
<span class="line-modified">341  * update data in the table or tables from which the &lt;code&gt;VIEW&lt;/code&gt; was derived.</span>
342  * &lt;ul&gt;
343  * &lt;li&gt;&lt;b&gt;UPDATABLE_VIEW_SYNC&lt;/b&gt;
<a name="72" id="anc72"></a><span class="line-modified">344  * Indicates that a &lt;code&gt;SyncProvider&lt;/code&gt; implementation  supports synchronization</span>
<span class="line-modified">345  * to the table or tables from which the SQL &lt;code&gt;VIEW&lt;/code&gt; used to populate</span>
<span class="line-modified">346  * a &lt;code&gt;RowSet&lt;/code&gt; object is derived.</span>
347  *
348  * &lt;li&gt;&lt;b&gt;NONUPDATABLE_VIEW_SYNC&lt;/b&gt;
<a name="73" id="anc73"></a><span class="line-modified">349  * Indicates that a &lt;code&gt;SyncProvider&lt;/code&gt; implementation  does &lt;b&gt;not&lt;/b&gt; support</span>
<span class="line-modified">350  * synchronization to the table or tables from which the SQL &lt;code&gt;VIEW&lt;/code&gt;</span>
<span class="line-modified">351  * used to populate  a &lt;code&gt;RowSet&lt;/code&gt; object is derived.</span>
352  * &lt;/ul&gt;
353  * &lt;p&gt;
<a name="74" id="anc74"></a><span class="line-modified">354  * &lt;b&gt;3.5 Usage of &lt;code&gt;SyncProvider&lt;/code&gt; Grading and Locking&lt;/b&gt;</span>
355  * &lt;p&gt;
<a name="75" id="anc75"></a><span class="line-modified">356  * In the example below, the reference &lt;code&gt;CachedRowSetImpl&lt;/code&gt; implementation</span>
<span class="line-modified">357  * reconfigures its current &lt;code&gt;SyncProvider&lt;/code&gt; object by calling the</span>
<span class="line-modified">358  * &lt;code&gt;setSyncProvider&lt;/code&gt; method.&lt;br&gt;</span>
359  *
360  * &lt;PRE&gt;
361  *   CachedRowSetImpl crs = new CachedRowSetImpl();
362  *   crs.setSyncProvider(&quot;com.foo.bar.HASyncProvider&quot;);
363  * &lt;/PRE&gt;
<a name="76" id="anc76"></a><span class="line-modified">364  *   An application can retrieve the &lt;code&gt;SyncProvider&lt;/code&gt; object currently in use</span>
<span class="line-modified">365  * by a disconnected &lt;code&gt;RowSet&lt;/code&gt; object. It can also retrieve the</span>
366  * grade of synchronization with which the provider was implemented and the degree of
367  * locking currently in use.  In addition, an application has the flexibility to set
368  * the degree of locking to be used, which can increase the possibilities for successful
369  * synchronization.  These operation are shown in the following code fragment.
370  * &lt;PRE&gt;
371  *   SyncProvider sync = crs.getSyncProvider();
372  *
373  *   switch (sync.getProviderGrade()) {
374  *   case: SyncProvider.GRADE_CHECK_ALL_AT_COMMIT
375  *         //A high grade of optimistic synchronization
376  *    break;
377  *    case: SyncProvider.GRADE_CHECK_MODIFIED_AT_COMMIT
378  *         //A low grade of optimistic synchronization
379  *    break;
380  *    case: SyncProvider.GRADE_LOCK_WHEN_LOADED
381  *         // A pessimistic synchronization grade
382  *    break;
383  *    case: SyncProvider.GRADE_LOCK_WHEN_MODIFIED
384  *         // A pessimistic synchronization grade
385  *    break;
386  *    case: SyncProvider.GRADE_NONE
387  *      // No synchronization with the originating data source provided
388  *    break;
389  *    }
390  *
<a name="77" id="anc77"></a><span class="line-modified">391  *    switch (sync.getDataSourcLock() {</span>
392  *      case: SyncProvider.DATASOURCE_DB_LOCK
393  *       // A lock is placed on the entire datasource that is used by the
<a name="78" id="anc78"></a><span class="line-modified">394  *       // &lt;code&gt;RowSet&lt;/code&gt; object</span>
395  *       break;
396  *
397  *      case: SyncProvider.DATASOURCE_NO_LOCK
398  *       // No locks remain on the  originating data source.
399  *      break;
400  *
401  *      case: SyncProvider.DATASOURCE_ROW_LOCK
402  *       // A lock is placed on the rows that are  touched by the original
403  *       // SQL statement used to populate
404  *       // the RowSet object that is using the SyncProvider
405  *       break;
406  *
407  *      case: DATASOURCE_TABLE_LOCK
408  *       // A lock is placed on  all tables that are touched by the original
409  *       // SQL statement used to populated
410  *       // the RowSet object that is using the SyncProvider
411  *      break;
412  *
413  * &lt;/PRE&gt;
414  *    It is also possible using the static utility method in the
<a name="79" id="anc79"></a><span class="line-modified">415  * &lt;code&gt;SyncFactory&lt;/code&gt; class to determine the list of &lt;code&gt;SyncProvider&lt;/code&gt;</span>
<span class="line-modified">416  * implementations currently registered with the &lt;code&gt;SyncFactory&lt;/code&gt;.</span>
417  *
418  * &lt;pre&gt;
419  *       Enumeration e = SyncFactory.getRegisteredProviders();
420  * &lt;/pre&gt;
421  *
422  *
423  * &lt;h3&gt;&lt;a id=&quot;resolving&quot;&gt;4.0 Resolving Synchronization Conflicts&lt;/a&gt;&lt;/h3&gt;
424  *
<a name="80" id="anc80"></a><span class="line-modified">425  * The interface &lt;code&gt;SyncResolver&lt;/code&gt; provides a way for an application to</span>
<span class="line-modified">426  * decide manually what to do when a conflict occurs. When the &lt;code&gt;CachedRowSet&lt;/code&gt;</span>
<span class="line-modified">427  * method &lt;code&gt;acceptChanges&lt;/code&gt; finishes and has detected one or more conflicts,</span>
<span class="line-modified">428  * it throws a &lt;code&gt;SyncProviderException&lt;/code&gt; object.  An application can</span>
429  * catch the exception and
<a name="81" id="anc81"></a><span class="line-modified">430  * have it retrieve a &lt;code&gt;SyncResolver&lt;/code&gt; object by calling the method</span>
<span class="line-modified">431  * &lt;code&gt;SyncProviderException.getSyncResolver()&lt;/code&gt;.</span>
432  * &lt;P&gt;
<a name="82" id="anc82"></a><span class="line-modified">433  * A &lt;code&gt;SyncResolver&lt;/code&gt; object, which is a special kind of</span>
<span class="line-modified">434  * &lt;code&gt;CachedRowSet&lt;/code&gt; object or</span>
<span class="line-modified">435  * a &lt;code&gt;JdbcRowSet&lt;/code&gt; object that has implemented the &lt;code&gt;SyncResolver&lt;/code&gt;</span>
436  * interface,  examines the conflicts row by row. It is a duplicate of the
<a name="83" id="anc83"></a><span class="line-modified">437  * &lt;code&gt;RowSet&lt;/code&gt; object being synchronized except that it contains only the data</span>
438  * from the data source this is causing a conflict. All of the other column values are
<a name="84" id="anc84"></a><span class="line-modified">439  * set to &lt;code&gt;null&lt;/code&gt;. To navigate from one conflict value to another, a</span>
<span class="line-modified">440  * &lt;code&gt;SyncResolver&lt;/code&gt; object provides the methods &lt;code&gt;nextConflict&lt;/code&gt; and</span>
<span class="line-modified">441  * &lt;code&gt;previousConflict&lt;/code&gt;.</span>
442  * &lt;P&gt;
<a name="85" id="anc85"></a><span class="line-modified">443  * The &lt;code&gt;SyncResolver&lt;/code&gt; interface also</span>
444  * provides methods for doing the following:
445  * &lt;UL&gt;
446  *  &lt;LI&gt;finding out whether the conflict involved an update, a delete, or an insert
447  *  &lt;LI&gt;getting the value in the data source that caused the conflict
448  *  &lt;LI&gt;setting the value that should be in the data source if it needs to be changed
<a name="86" id="anc86"></a><span class="line-modified">449  *      or setting the value that should be in the &lt;code&gt;RowSet&lt;/code&gt; object if it needs</span>
450  *      to be changed
451  * &lt;/UL&gt;
452  * &lt;P&gt;
<a name="87" id="anc87"></a><span class="line-modified">453  * When the &lt;code&gt;CachedRowSet&lt;/code&gt; method &lt;code&gt;acceptChanges&lt;/code&gt; is called, it</span>
<span class="line-modified">454  * delegates to the &lt;code&gt;RowSet&lt;/code&gt; object&#39;s  &lt;code&gt;SyncProvider&lt;/code&gt; object.</span>
<span class="line-modified">455  * How the writer provided by that &lt;code&gt;SyncProvider&lt;/code&gt; object is implemented</span>
456  * determines what level (grade) of checking for conflicts will be done.  After all
457  * checking for conflicts is completed and one or more conflicts has been found, the method
<a name="88" id="anc88"></a><span class="line-modified">458  * &lt;code&gt;acceptChanges&lt;/code&gt; throws a &lt;code&gt;SyncProviderException&lt;/code&gt; object. The</span>
<span class="line-modified">459  * application can catch the exception and use it to obtain a &lt;code&gt;SyncResolver&lt;/code&gt; object.</span>
460  * &lt;P&gt;
<a name="89" id="anc89"></a><span class="line-modified">461  * The application can then use &lt;code&gt;SyncResolver&lt;/code&gt; methods to get information</span>
462  * about each conflict and decide what to do.  If the application logic or the user
<a name="90" id="anc90"></a><span class="line-modified">463  * decides that a value in the &lt;code&gt;RowSet&lt;/code&gt; object should be the one to</span>
464  * persist, the application or user can overwrite the data source value with it.
465  * &lt;P&gt;
<a name="91" id="anc91"></a><span class="line-modified">466  * The comment for the &lt;code&gt;SyncResolver&lt;/code&gt; interface has more detail.</span>
467  *
468  * &lt;h3&gt;&lt;a id=&quot;relspec&quot;&gt;5.0 Related Specifications&lt;/a&gt;&lt;/h3&gt;
469  * &lt;ul&gt;
470  * &lt;li&gt;&lt;a href=&quot;http://docs.oracle.com/javase/jndi/tutorial/index.html&quot;&gt;JNDI&lt;/a&gt;
471  * &lt;li&gt;&lt;a href=&quot;{@docRoot}/java.logging/java/util/logging/package-summary.html&quot;&gt;Java Logging
472  * APIs&lt;/a&gt;
473  * &lt;/ul&gt;
474  * &lt;h3&gt;&lt;a id=&quot;reldocs&quot;&gt;6.0 Related Documentation&lt;/a&gt;&lt;/h3&gt;
475  * &lt;ul&gt;
476  * &lt;li&gt;&lt;a href=&quot;http://docs.oracle.com/javase/tutorial/jdbc/&quot;&gt;DataSource for JDBC
477  * Connections&lt;/a&gt;
478  * &lt;/ul&gt;
479  */
480 package javax.sql.rowset.spi;
<a name="92" id="anc92"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="92" type="hidden" />
</body>
</html>