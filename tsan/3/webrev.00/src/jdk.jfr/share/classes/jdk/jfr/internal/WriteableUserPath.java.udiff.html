<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.jfr/share/classes/jdk/jfr/internal/WriteableUserPath.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="Utils.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="consumer/ChunkHeader.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jfr/share/classes/jdk/jfr/internal/WriteableUserPath.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -48,11 +48,12 @@</span>
   */
  public final class WriteableUserPath {
      private final AccessControlContext controlContext;
      private final Path original;
      private final Path real;
<span class="udiff-line-modified-removed">-     private final String text;</span>
<span class="udiff-line-modified-added">+     private final String realPathText;</span>
<span class="udiff-line-added">+     private final String originalText;</span>
  
      // Not to ensure security, but to help
      // against programming errors
      private volatile boolean inPrivileged;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -66,12 +67,13 @@</span>
          }
          // will throw if non-writeable
          BufferedWriter fw = Files.newBufferedWriter(path);
          fw.close();
          this.original = path;
<span class="udiff-line-added">+         this.originalText = path.toString();</span>
          this.real = path.toRealPath();
<span class="udiff-line-modified-removed">-         this.text = real.toString();</span>
<span class="udiff-line-modified-added">+         this.realPathText = real.toString();</span>
      }
  
      /**
       * Returns a potentially malicious path where the user may have implemented
       * their own version of Path. This method should never be called in an
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -83,18 +85,28 @@</span>
      public Path getPotentiallyMaliciousOriginal() {
          return original;
      }
  
      /**
<span class="udiff-line-modified-removed">-      * Returns a string representation of the path.</span>
<span class="udiff-line-modified-added">+      * Returns a string representation of the real path.</span>
       *
       * @return path as text
       */
<span class="udiff-line-modified-removed">-     public String getText() {</span>
<span class="udiff-line-modified-removed">-         return text;</span>
<span class="udiff-line-modified-added">+     public String getRealPathText() {</span>
<span class="udiff-line-modified-added">+         return realPathText;</span>
      }
  
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Returns a string representation of the original path.</span>
<span class="udiff-line-added">+      *</span>
<span class="udiff-line-added">+      * @return path as text</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     public String getOriginalText() {</span>
<span class="udiff-line-added">+         return originalText;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
      /**
       * Returns a potentially malicious path where the user may have implemented
       * their own version of Path. This method should never be called in an
       * unsafe context and the Path value should never be passed along to other
       * methods.
</pre>
<center><a href="Utils.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="consumer/ChunkHeader.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>