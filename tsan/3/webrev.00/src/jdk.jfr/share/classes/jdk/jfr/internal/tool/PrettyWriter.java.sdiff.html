<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jfr/share/classes/jdk/jfr/internal/tool/PrettyWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Metadata.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Print.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jfr/share/classes/jdk/jfr/internal/tool/PrettyWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2016, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
533         }
534         return descriptors;
535     }
536 
537     private void printThread(RecordedThread thread, String postFix) {
538         long javaThreadId = thread.getJavaThreadId();
539         if (javaThreadId &gt; 0) {
540             println(&quot;\&quot;&quot; + thread.getJavaName() + &quot;\&quot; (javaThreadId = &quot; + thread.getJavaThreadId() + &quot;)&quot; + postFix);
541         } else {
542             println(&quot;\&quot;&quot; + thread.getOSName() + &quot;\&quot; (osThreadId = &quot; + thread.getOSThreadId() + &quot;)&quot; + postFix);
543         }
544     }
545 
546     private boolean printFormatted(ValueDescriptor field, Object value) {
547         if (value instanceof Duration) {
548             Duration d = (Duration) value;
549             if (d.getSeconds() == Long.MIN_VALUE &amp;&amp; d.getNano() == 0)  {
550                 println(&quot;N/A&quot;);
551                 return true;
552             }
<span class="line-modified">553             double s = d.toNanosPart() / 1000_000_000.0 + d.toSecondsPart();</span>
<span class="line-removed">554             if (s &lt; 1.0) {</span>
<span class="line-removed">555                 if (s &lt; 0.001) {</span>
<span class="line-removed">556                     println(String.format(&quot;%.3f&quot;, s * 1_000_000) + &quot; us&quot;);</span>
<span class="line-removed">557                 } else {</span>
<span class="line-removed">558                     println(String.format(&quot;%.3f&quot;, s * 1_000) + &quot; ms&quot;);</span>
<span class="line-removed">559                 }</span>
<span class="line-removed">560             } else {</span>
<span class="line-removed">561                 if (s &lt; 1000.0) {</span>
<span class="line-removed">562                     println(String.format(&quot;%.3f&quot;, s) + &quot; s&quot;);</span>
<span class="line-removed">563                 } else {</span>
<span class="line-removed">564                     println(String.format(&quot;%.0f&quot;, s) + &quot; s&quot;);</span>
<span class="line-removed">565                 }</span>
<span class="line-removed">566             }</span>
567             return true;
568         }
569         if (value instanceof OffsetDateTime) {
570             OffsetDateTime odt = (OffsetDateTime) value;
571             if (odt.equals(OffsetDateTime.MIN))  {
572                 println(&quot;N/A&quot;);
573                 return true;
574             }
575             println(TIME_FORMAT.format(odt));
576             return true;
577         }
578         Percentage percentage = field.getAnnotation(Percentage.class);
579         if (percentage != null) {
580             if (value instanceof Number) {
581                 double d = ((Number) value).doubleValue();
582                 println(String.format(&quot;%.2f&quot;, d * 100) + &quot;%&quot;);
583                 return true;
584             }
585         }
586         DataAmount dataAmount = field.getAnnotation(DataAmount.class);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
533         }
534         return descriptors;
535     }
536 
537     private void printThread(RecordedThread thread, String postFix) {
538         long javaThreadId = thread.getJavaThreadId();
539         if (javaThreadId &gt; 0) {
540             println(&quot;\&quot;&quot; + thread.getJavaName() + &quot;\&quot; (javaThreadId = &quot; + thread.getJavaThreadId() + &quot;)&quot; + postFix);
541         } else {
542             println(&quot;\&quot;&quot; + thread.getOSName() + &quot;\&quot; (osThreadId = &quot; + thread.getOSThreadId() + &quot;)&quot; + postFix);
543         }
544     }
545 
546     private boolean printFormatted(ValueDescriptor field, Object value) {
547         if (value instanceof Duration) {
548             Duration d = (Duration) value;
549             if (d.getSeconds() == Long.MIN_VALUE &amp;&amp; d.getNano() == 0)  {
550                 println(&quot;N/A&quot;);
551                 return true;
552             }
<span class="line-modified">553             println(Utils.formatDuration(d));</span>













554             return true;
555         }
556         if (value instanceof OffsetDateTime) {
557             OffsetDateTime odt = (OffsetDateTime) value;
558             if (odt.equals(OffsetDateTime.MIN))  {
559                 println(&quot;N/A&quot;);
560                 return true;
561             }
562             println(TIME_FORMAT.format(odt));
563             return true;
564         }
565         Percentage percentage = field.getAnnotation(Percentage.class);
566         if (percentage != null) {
567             if (value instanceof Number) {
568                 double d = ((Number) value).doubleValue();
569                 println(String.format(&quot;%.2f&quot;, d * 100) + &quot;%&quot;);
570                 return true;
571             }
572         }
573         DataAmount dataAmount = field.getAnnotation(DataAmount.class);
</pre>
</td>
</tr>
</table>
<center><a href="Metadata.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="Print.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>