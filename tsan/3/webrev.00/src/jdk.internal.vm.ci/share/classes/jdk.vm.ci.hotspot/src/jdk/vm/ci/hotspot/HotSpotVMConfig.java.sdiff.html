<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotVMConfig.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HotSpotSpeculationLog.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HotSpotVMConfigAccess.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotVMConfig.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package jdk.vm.ci.hotspot;
 24 
 25 import static jdk.vm.ci.hotspot.HotSpotJVMCIRuntime.runtime;
 26 import static jdk.vm.ci.hotspot.UnsafeAccess.UNSAFE;
 27 

 28 import jdk.internal.misc.Unsafe;
 29 
 30 /**
 31  * Used to access native configuration details.
 32  *
 33  * All non-static, public fields in this class are so that they can be compiled as constants.
 34  */
 35 class HotSpotVMConfig extends HotSpotVMConfigAccess {
 36 
 37     /**
 38      * Gets the configuration associated with the singleton {@link HotSpotJVMCIRuntime}.
 39      */
 40     static HotSpotVMConfig config() {
 41         return runtime().getConfig();
 42     }
 43 
 44     private final String osArch = getHostArchitectureName();
 45 
 46     HotSpotVMConfig(HotSpotVMConfigStore store) {
 47         super(store);
 48     }
 49 
 50     /**
 51      * Gets the host architecture name for the purpose of finding the corresponding
 52      * {@linkplain HotSpotJVMCIBackendFactory backend}.
 53      */
 54     String getHostArchitectureName() {
<span class="line-modified"> 55         String arch = System.getProperty(&quot;os.arch&quot;);</span>
 56         switch (arch) {
 57             case &quot;x86_64&quot;:
 58                 return &quot;amd64&quot;;
 59 
 60             case &quot;sparcv9&quot;:
 61                 return &quot;sparc&quot;;
 62             default:
 63                 return arch;
 64         }
 65     }
 66 
 67     final boolean useDeferredInitBarriers = getFlag(&quot;ReduceInitialCardMarks&quot;, Boolean.class);
 68 
 69     final boolean useCompressedOops = getFlag(&quot;UseCompressedOops&quot;, Boolean.class);
 70 
 71     final int objectAlignment = getFlag(&quot;ObjectAlignmentInBytes&quot;, Integer.class);
 72 
<span class="line-modified"> 73     final int prototypeMarkWordOffset = getFieldOffset(&quot;Klass::_prototype_header&quot;, Integer.class, &quot;markOop&quot;);</span>


 74     final int subklassOffset = getFieldOffset(&quot;Klass::_subklass&quot;, Integer.class, &quot;Klass*&quot;);

 75     final int nextSiblingOffset = getFieldOffset(&quot;Klass::_next_sibling&quot;, Integer.class, &quot;Klass*&quot;);
 76     final int superCheckOffsetOffset = getFieldOffset(&quot;Klass::_super_check_offset&quot;, Integer.class, &quot;juint&quot;);
 77     final int secondarySuperCacheOffset = getFieldOffset(&quot;Klass::_secondary_super_cache&quot;, Integer.class, &quot;Klass*&quot;);
 78 


 79     /**
 80      * The offset of the _java_mirror field (of type {@link Class}) in a Klass.
 81      */
<span class="line-modified"> 82     final int classMirrorHandleOffset = getFieldOffset(&quot;Klass::_java_mirror&quot;, Integer.class, &quot;OopHandle&quot;);</span>
 83 
 84     final int klassAccessFlagsOffset = getFieldOffset(&quot;Klass::_access_flags&quot;, Integer.class, &quot;AccessFlags&quot;);
 85     final int klassLayoutHelperOffset = getFieldOffset(&quot;Klass::_layout_helper&quot;, Integer.class, &quot;jint&quot;);
 86 
 87     final int klassLayoutHelperNeutralValue = getConstant(&quot;Klass::_lh_neutral_value&quot;, Integer.class);
 88     final int klassLayoutHelperInstanceSlowPathBit = getConstant(&quot;Klass::_lh_instance_slow_path_bit&quot;, Integer.class);
 89 
 90     final int vtableEntrySize = getFieldValue(&quot;CompilerToVM::Data::sizeof_vtableEntry&quot;, Integer.class, &quot;int&quot;);
 91     final int vtableEntryMethodOffset = getFieldOffset(&quot;vtableEntry::_method&quot;, Integer.class, &quot;Method*&quot;);
 92 
 93     final int instanceKlassSourceFileNameIndexOffset = getFieldOffset(&quot;InstanceKlass::_source_file_name_index&quot;, Integer.class, &quot;u2&quot;);
 94     final int instanceKlassInitStateOffset = getFieldOffset(&quot;InstanceKlass::_init_state&quot;, Integer.class, &quot;u1&quot;);
 95     final int instanceKlassConstantsOffset = getFieldOffset(&quot;InstanceKlass::_constants&quot;, Integer.class, &quot;ConstantPool*&quot;);
 96     final int instanceKlassFieldsOffset = getFieldOffset(&quot;InstanceKlass::_fields&quot;, Integer.class, &quot;Array&lt;u2&gt;*&quot;);
 97     final int instanceKlassAnnotationsOffset = getFieldOffset(&quot;InstanceKlass::_annotations&quot;, Integer.class, &quot;Annotations*&quot;);
<span class="line-modified"> 98     final int instanceKlassMiscFlagsOffset = getFieldOffset(&quot;InstanceKlass::_misc_flags&quot;, Integer.class, &quot;u2&quot;);</span>
 99     final int klassVtableStartOffset = getFieldValue(&quot;CompilerToVM::Data::Klass_vtable_start_offset&quot;, Integer.class, &quot;int&quot;);
100     final int klassVtableLengthOffset = getFieldValue(&quot;CompilerToVM::Data::Klass_vtable_length_offset&quot;, Integer.class, &quot;int&quot;);
101 
102     final int instanceKlassStateLinked = getConstant(&quot;InstanceKlass::linked&quot;, Integer.class);
103     final int instanceKlassStateFullyInitialized = getConstant(&quot;InstanceKlass::fully_initialized&quot;, Integer.class);

104     final int instanceKlassMiscIsUnsafeAnonymous = getConstant(&quot;InstanceKlass::_misc_is_unsafe_anonymous&quot;, Integer.class);
105 
106     final int annotationsFieldAnnotationsOffset = getFieldOffset(&quot;Annotations::_fields_annotations&quot;, Integer.class, &quot;Array&lt;AnnotationArray*&gt;*&quot;);
107     final int fieldsAnnotationsBaseOffset = getFieldValue(&quot;CompilerToVM::Data::_fields_annotations_base_offset&quot;, Integer.class, &quot;int&quot;);
108 
109     final int arrayU1LengthOffset = getFieldOffset(&quot;Array&lt;int&gt;::_length&quot;, Integer.class, &quot;int&quot;);
110     final int arrayU1DataOffset = getFieldOffset(&quot;Array&lt;u1&gt;::_data&quot;, Integer.class);
111     final int arrayU2DataOffset = getFieldOffset(&quot;Array&lt;u2&gt;::_data&quot;, Integer.class);
112 
113     final int fieldInfoAccessFlagsOffset = getConstant(&quot;FieldInfo::access_flags_offset&quot;, Integer.class);
114     final int fieldInfoNameIndexOffset = getConstant(&quot;FieldInfo::name_index_offset&quot;, Integer.class);
115     final int fieldInfoSignatureIndexOffset = getConstant(&quot;FieldInfo::signature_index_offset&quot;, Integer.class);
116     final int fieldInfoLowPackedOffset = getConstant(&quot;FieldInfo::low_packed_offset&quot;, Integer.class);
117     final int fieldInfoHighPackedOffset = getConstant(&quot;FieldInfo::high_packed_offset&quot;, Integer.class);
118     final int fieldInfoFieldSlots = getConstant(&quot;FieldInfo::field_slots&quot;, Integer.class);
119 
120     final int fieldInfoTagSize = getConstant(&quot;FIELDINFO_TAG_SIZE&quot;, Integer.class);
121 
122     final int jvmAccHasFinalizer = getConstant(&quot;JVM_ACC_HAS_FINALIZER&quot;, Integer.class);
123     final int jvmAccFieldInternal = getConstant(&quot;JVM_ACC_FIELD_INTERNAL&quot;, Integer.class);
124     final int jvmAccFieldStable = getConstant(&quot;JVM_ACC_FIELD_STABLE&quot;, Integer.class);
125     final int jvmAccFieldHasGenericSignature = getConstant(&quot;JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE&quot;, Integer.class);
126     final int jvmAccIsCloneableFast = getConstant(&quot;JVM_ACC_IS_CLONEABLE_FAST&quot;, Integer.class);
127 
128     // These modifiers are not public in Modifier so we get them via vmStructs.
129     final int jvmAccSynthetic = getConstant(&quot;JVM_ACC_SYNTHETIC&quot;, Integer.class);
130     final int jvmAccAnnotation = getConstant(&quot;JVM_ACC_ANNOTATION&quot;, Integer.class);
131     final int jvmAccBridge = getConstant(&quot;JVM_ACC_BRIDGE&quot;, Integer.class);
132     final int jvmAccVarargs = getConstant(&quot;JVM_ACC_VARARGS&quot;, Integer.class);
133     final int jvmAccEnum = getConstant(&quot;JVM_ACC_ENUM&quot;, Integer.class);

134 
135     // This is only valid on AMD64.
136     final int runtimeCallStackSize = getConstant(&quot;frame::arg_reg_save_area_bytes&quot;, Integer.class, osArch.equals(&quot;amd64&quot;) ? null : 0);
137 
<span class="line-modified">138     private final int markWordNoHashInPlace = getConstant(&quot;markOopDesc::no_hash_in_place&quot;, Integer.class);</span>
<span class="line-modified">139     private final int markWordNoLockInPlace = getConstant(&quot;markOopDesc::no_lock_in_place&quot;, Integer.class);</span>
140 
141     /**
<span class="line-modified">142      * See {@code markOopDesc::prototype()}.</span>
143      */
144     long arrayPrototypeMarkWord() {
145         return markWordNoHashInPlace | markWordNoLockInPlace;
146     }
147 
148     final int methodAccessFlagsOffset = getFieldOffset(&quot;Method::_access_flags&quot;, Integer.class, &quot;AccessFlags&quot;);
149     final int methodConstMethodOffset = getFieldOffset(&quot;Method::_constMethod&quot;, Integer.class, &quot;ConstMethod*&quot;);
150     final int methodIntrinsicIdOffset = getFieldOffset(&quot;Method::_intrinsic_id&quot;, Integer.class, &quot;u2&quot;);
151     final int methodFlagsOffset = getFieldOffset(&quot;Method::_flags&quot;, Integer.class, &quot;u2&quot;);
152     final int methodVtableIndexOffset = getFieldOffset(&quot;Method::_vtable_index&quot;, Integer.class, &quot;int&quot;);
153 
154     final int methodDataOffset = getFieldOffset(&quot;Method::_method_data&quot;, Integer.class, &quot;MethodData*&quot;);
155     final int methodCodeOffset = getFieldOffset(&quot;Method::_code&quot;, Integer.class, &quot;CompiledMethod*&quot;);
156 
157     final int methodFlagsCallerSensitive = getConstant(&quot;Method::_caller_sensitive&quot;, Integer.class);
158     final int methodFlagsForceInline = getConstant(&quot;Method::_force_inline&quot;, Integer.class);
159     final int methodFlagsIntrinsicCandidate = getConstant(&quot;Method::_intrinsic_candidate&quot;, Integer.class);
160     final int methodFlagsDontInline = getConstant(&quot;Method::_dont_inline&quot;, Integer.class);
161     final int methodFlagsReservedStackAccess = getConstant(&quot;Method::_reserved_stack_access&quot;, Integer.class);
162     final int nonvirtualVtableIndex = getConstant(&quot;Method::nonvirtual_vtable_index&quot;, Integer.class);
</pre>
<hr />
<pre>
327 
328     final int deoptActionNone = getConstant(&quot;Deoptimization::Action_none&quot;, Integer.class);
329     final int deoptActionMaybeRecompile = getConstant(&quot;Deoptimization::Action_maybe_recompile&quot;, Integer.class);
330     final int deoptActionReinterpret = getConstant(&quot;Deoptimization::Action_reinterpret&quot;, Integer.class);
331     final int deoptActionMakeNotEntrant = getConstant(&quot;Deoptimization::Action_make_not_entrant&quot;, Integer.class);
332     final int deoptActionMakeNotCompilable = getConstant(&quot;Deoptimization::Action_make_not_compilable&quot;, Integer.class);
333 
334     final int deoptimizationActionBits = getConstant(&quot;Deoptimization::_action_bits&quot;, Integer.class);
335     final int deoptimizationReasonBits = getConstant(&quot;Deoptimization::_reason_bits&quot;, Integer.class);
336     final int deoptimizationDebugIdBits = getConstant(&quot;Deoptimization::_debug_id_bits&quot;, Integer.class);
337     final int deoptimizationActionShift = getConstant(&quot;Deoptimization::_action_shift&quot;, Integer.class);
338     final int deoptimizationReasonShift = getConstant(&quot;Deoptimization::_reason_shift&quot;, Integer.class);
339     final int deoptimizationDebugIdShift = getConstant(&quot;Deoptimization::_debug_id_shift&quot;, Integer.class);
340 
341     final int vmIntrinsicInvokeBasic = getConstant(&quot;vmIntrinsics::_invokeBasic&quot;, Integer.class);
342     final int vmIntrinsicLinkToVirtual = getConstant(&quot;vmIntrinsics::_linkToVirtual&quot;, Integer.class);
343     final int vmIntrinsicLinkToStatic = getConstant(&quot;vmIntrinsics::_linkToStatic&quot;, Integer.class);
344     final int vmIntrinsicLinkToSpecial = getConstant(&quot;vmIntrinsics::_linkToSpecial&quot;, Integer.class);
345     final int vmIntrinsicLinkToInterface = getConstant(&quot;vmIntrinsics::_linkToInterface&quot;, Integer.class);
346 
<span class="line-modified">347     final int codeInstallResultOk = getConstant(&quot;JVMCIEnv::ok&quot;, Integer.class);</span>
<span class="line-modified">348     final int codeInstallResultDependenciesFailed = getConstant(&quot;JVMCIEnv::dependencies_failed&quot;, Integer.class);</span>
<span class="line-modified">349     final int codeInstallResultDependenciesInvalid = getConstant(&quot;JVMCIEnv::dependencies_invalid&quot;, Integer.class);</span>
<span class="line-modified">350     final int codeInstallResultCacheFull = getConstant(&quot;JVMCIEnv::cache_full&quot;, Integer.class);</span>
<span class="line-removed">351     final int codeInstallResultCodeTooLarge = getConstant(&quot;JVMCIEnv::code_too_large&quot;, Integer.class);</span>
352 
353     String getCodeInstallResultDescription(int codeInstallResult) {
354         if (codeInstallResult == codeInstallResultOk) {
355             return &quot;ok&quot;;
356         }
357         if (codeInstallResult == codeInstallResultDependenciesFailed) {
358             return &quot;dependencies failed&quot;;
359         }
<span class="line-removed">360         if (codeInstallResult == codeInstallResultDependenciesInvalid) {</span>
<span class="line-removed">361             return &quot;dependencies invalid&quot;;</span>
<span class="line-removed">362         }</span>
363         if (codeInstallResult == codeInstallResultCacheFull) {
364             return &quot;code cache is full&quot;;
365         }
366         if (codeInstallResult == codeInstallResultCodeTooLarge) {
367             return &quot;code is too large&quot;;
368         }
369         assert false : codeInstallResult;
370         return &quot;unknown&quot;;
371     }
372 
373     final int bitDataExceptionSeenFlag = getConstant(&quot;BitData::exception_seen_flag&quot;, Integer.class);
374     final int bitDataNullSeenFlag = getConstant(&quot;BitData::null_seen_flag&quot;, Integer.class);
375     final int methodDataCountOffset = getConstant(&quot;CounterData::count_off&quot;, Integer.class);
376     final int jumpDataTakenOffset = getConstant(&quot;JumpData::taken_off_set&quot;, Integer.class);
377     final int jumpDataDisplacementOffset = getConstant(&quot;JumpData::displacement_off_set&quot;, Integer.class);
378     final int receiverTypeDataNonprofiledCountOffset = getConstant(&quot;ReceiverTypeData::nonprofiled_count_off_set&quot;, Integer.class);
379     final int receiverTypeDataReceiverTypeRowCellCount = getConstant(&quot;ReceiverTypeData::receiver_type_row_cell_count&quot;, Integer.class);
380     final int receiverTypeDataReceiver0Offset = getConstant(&quot;ReceiverTypeData::receiver0_offset&quot;, Integer.class);
381     final int receiverTypeDataCount0Offset = getConstant(&quot;ReceiverTypeData::count0_offset&quot;, Integer.class);
382     final int branchDataNotTakenOffset = getConstant(&quot;BranchData::not_taken_off_set&quot;, Integer.class);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package jdk.vm.ci.hotspot;
 24 
 25 import static jdk.vm.ci.hotspot.HotSpotJVMCIRuntime.runtime;
 26 import static jdk.vm.ci.hotspot.UnsafeAccess.UNSAFE;
 27 
<span class="line-added"> 28 import jdk.vm.ci.services.Services;</span>
 29 import jdk.internal.misc.Unsafe;
 30 
 31 /**
 32  * Used to access native configuration details.
 33  *
 34  * All non-static, public fields in this class are so that they can be compiled as constants.
 35  */
 36 class HotSpotVMConfig extends HotSpotVMConfigAccess {
 37 
 38     /**
 39      * Gets the configuration associated with the singleton {@link HotSpotJVMCIRuntime}.
 40      */
 41     static HotSpotVMConfig config() {
 42         return runtime().getConfig();
 43     }
 44 
 45     private final String osArch = getHostArchitectureName();
 46 
 47     HotSpotVMConfig(HotSpotVMConfigStore store) {
 48         super(store);
 49     }
 50 
 51     /**
 52      * Gets the host architecture name for the purpose of finding the corresponding
 53      * {@linkplain HotSpotJVMCIBackendFactory backend}.
 54      */
 55     String getHostArchitectureName() {
<span class="line-modified"> 56         String arch = Services.getSavedProperty(&quot;os.arch&quot;);</span>
 57         switch (arch) {
 58             case &quot;x86_64&quot;:
 59                 return &quot;amd64&quot;;
 60 
 61             case &quot;sparcv9&quot;:
 62                 return &quot;sparc&quot;;
 63             default:
 64                 return arch;
 65         }
 66     }
 67 
 68     final boolean useDeferredInitBarriers = getFlag(&quot;ReduceInitialCardMarks&quot;, Boolean.class);
 69 
 70     final boolean useCompressedOops = getFlag(&quot;UseCompressedOops&quot;, Boolean.class);
 71 
 72     final int objectAlignment = getFlag(&quot;ObjectAlignmentInBytes&quot;, Integer.class);
 73 
<span class="line-modified"> 74     final int hubOffset = getFieldOffset(&quot;oopDesc::_metadata._klass&quot;, Integer.class, &quot;Klass*&quot;);</span>
<span class="line-added"> 75 </span>
<span class="line-added"> 76     final int prototypeMarkWordOffset = getFieldOffset(&quot;Klass::_prototype_header&quot;, Integer.class, &quot;markWord&quot;);</span>
 77     final int subklassOffset = getFieldOffset(&quot;Klass::_subklass&quot;, Integer.class, &quot;Klass*&quot;);
<span class="line-added"> 78     final int superOffset = getFieldOffset(&quot;Klass::_super&quot;, Integer.class, &quot;Klass*&quot;);</span>
 79     final int nextSiblingOffset = getFieldOffset(&quot;Klass::_next_sibling&quot;, Integer.class, &quot;Klass*&quot;);
 80     final int superCheckOffsetOffset = getFieldOffset(&quot;Klass::_super_check_offset&quot;, Integer.class, &quot;juint&quot;);
 81     final int secondarySuperCacheOffset = getFieldOffset(&quot;Klass::_secondary_super_cache&quot;, Integer.class, &quot;Klass*&quot;);
 82 
<span class="line-added"> 83     final int classLoaderDataOffset = getFieldOffset(&quot;Klass::_class_loader_data&quot;, Integer.class, &quot;ClassLoaderData*&quot;);</span>
<span class="line-added"> 84 </span>
 85     /**
 86      * The offset of the _java_mirror field (of type {@link Class}) in a Klass.
 87      */
<span class="line-modified"> 88     final int javaMirrorOffset = getFieldOffset(&quot;Klass::_java_mirror&quot;, Integer.class, &quot;OopHandle&quot;);</span>
 89 
 90     final int klassAccessFlagsOffset = getFieldOffset(&quot;Klass::_access_flags&quot;, Integer.class, &quot;AccessFlags&quot;);
 91     final int klassLayoutHelperOffset = getFieldOffset(&quot;Klass::_layout_helper&quot;, Integer.class, &quot;jint&quot;);
 92 
 93     final int klassLayoutHelperNeutralValue = getConstant(&quot;Klass::_lh_neutral_value&quot;, Integer.class);
 94     final int klassLayoutHelperInstanceSlowPathBit = getConstant(&quot;Klass::_lh_instance_slow_path_bit&quot;, Integer.class);
 95 
 96     final int vtableEntrySize = getFieldValue(&quot;CompilerToVM::Data::sizeof_vtableEntry&quot;, Integer.class, &quot;int&quot;);
 97     final int vtableEntryMethodOffset = getFieldOffset(&quot;vtableEntry::_method&quot;, Integer.class, &quot;Method*&quot;);
 98 
 99     final int instanceKlassSourceFileNameIndexOffset = getFieldOffset(&quot;InstanceKlass::_source_file_name_index&quot;, Integer.class, &quot;u2&quot;);
100     final int instanceKlassInitStateOffset = getFieldOffset(&quot;InstanceKlass::_init_state&quot;, Integer.class, &quot;u1&quot;);
101     final int instanceKlassConstantsOffset = getFieldOffset(&quot;InstanceKlass::_constants&quot;, Integer.class, &quot;ConstantPool*&quot;);
102     final int instanceKlassFieldsOffset = getFieldOffset(&quot;InstanceKlass::_fields&quot;, Integer.class, &quot;Array&lt;u2&gt;*&quot;);
103     final int instanceKlassAnnotationsOffset = getFieldOffset(&quot;InstanceKlass::_annotations&quot;, Integer.class, &quot;Annotations*&quot;);
<span class="line-modified">104     final int instanceKlassMiscFlagsOffset = getFieldOffset(&quot;InstanceKlass::_misc_flags&quot;, Integer.class, &quot;u4&quot;);</span>
105     final int klassVtableStartOffset = getFieldValue(&quot;CompilerToVM::Data::Klass_vtable_start_offset&quot;, Integer.class, &quot;int&quot;);
106     final int klassVtableLengthOffset = getFieldValue(&quot;CompilerToVM::Data::Klass_vtable_length_offset&quot;, Integer.class, &quot;int&quot;);
107 
108     final int instanceKlassStateLinked = getConstant(&quot;InstanceKlass::linked&quot;, Integer.class);
109     final int instanceKlassStateFullyInitialized = getConstant(&quot;InstanceKlass::fully_initialized&quot;, Integer.class);
<span class="line-added">110     final int instanceKlassStateBeingInitialized = getConstant(&quot;InstanceKlass::being_initialized&quot;, Integer.class);</span>
111     final int instanceKlassMiscIsUnsafeAnonymous = getConstant(&quot;InstanceKlass::_misc_is_unsafe_anonymous&quot;, Integer.class);
112 
113     final int annotationsFieldAnnotationsOffset = getFieldOffset(&quot;Annotations::_fields_annotations&quot;, Integer.class, &quot;Array&lt;AnnotationArray*&gt;*&quot;);
114     final int fieldsAnnotationsBaseOffset = getFieldValue(&quot;CompilerToVM::Data::_fields_annotations_base_offset&quot;, Integer.class, &quot;int&quot;);
115 
116     final int arrayU1LengthOffset = getFieldOffset(&quot;Array&lt;int&gt;::_length&quot;, Integer.class, &quot;int&quot;);
117     final int arrayU1DataOffset = getFieldOffset(&quot;Array&lt;u1&gt;::_data&quot;, Integer.class);
118     final int arrayU2DataOffset = getFieldOffset(&quot;Array&lt;u2&gt;::_data&quot;, Integer.class);
119 
120     final int fieldInfoAccessFlagsOffset = getConstant(&quot;FieldInfo::access_flags_offset&quot;, Integer.class);
121     final int fieldInfoNameIndexOffset = getConstant(&quot;FieldInfo::name_index_offset&quot;, Integer.class);
122     final int fieldInfoSignatureIndexOffset = getConstant(&quot;FieldInfo::signature_index_offset&quot;, Integer.class);
123     final int fieldInfoLowPackedOffset = getConstant(&quot;FieldInfo::low_packed_offset&quot;, Integer.class);
124     final int fieldInfoHighPackedOffset = getConstant(&quot;FieldInfo::high_packed_offset&quot;, Integer.class);
125     final int fieldInfoFieldSlots = getConstant(&quot;FieldInfo::field_slots&quot;, Integer.class);
126 
127     final int fieldInfoTagSize = getConstant(&quot;FIELDINFO_TAG_SIZE&quot;, Integer.class);
128 
129     final int jvmAccHasFinalizer = getConstant(&quot;JVM_ACC_HAS_FINALIZER&quot;, Integer.class);
130     final int jvmAccFieldInternal = getConstant(&quot;JVM_ACC_FIELD_INTERNAL&quot;, Integer.class);
131     final int jvmAccFieldStable = getConstant(&quot;JVM_ACC_FIELD_STABLE&quot;, Integer.class);
132     final int jvmAccFieldHasGenericSignature = getConstant(&quot;JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE&quot;, Integer.class);
133     final int jvmAccIsCloneableFast = getConstant(&quot;JVM_ACC_IS_CLONEABLE_FAST&quot;, Integer.class);
134 
135     // These modifiers are not public in Modifier so we get them via vmStructs.
136     final int jvmAccSynthetic = getConstant(&quot;JVM_ACC_SYNTHETIC&quot;, Integer.class);
137     final int jvmAccAnnotation = getConstant(&quot;JVM_ACC_ANNOTATION&quot;, Integer.class);
138     final int jvmAccBridge = getConstant(&quot;JVM_ACC_BRIDGE&quot;, Integer.class);
139     final int jvmAccVarargs = getConstant(&quot;JVM_ACC_VARARGS&quot;, Integer.class);
140     final int jvmAccEnum = getConstant(&quot;JVM_ACC_ENUM&quot;, Integer.class);
<span class="line-added">141     final int jvmAccInterface = getConstant(&quot;JVM_ACC_INTERFACE&quot;, Integer.class);</span>
142 
143     // This is only valid on AMD64.
144     final int runtimeCallStackSize = getConstant(&quot;frame::arg_reg_save_area_bytes&quot;, Integer.class, osArch.equals(&quot;amd64&quot;) ? null : 0);
145 
<span class="line-modified">146     private final int markWordNoHashInPlace = getConstant(&quot;markWord::no_hash_in_place&quot;, Integer.class);</span>
<span class="line-modified">147     private final int markWordNoLockInPlace = getConstant(&quot;markWord::no_lock_in_place&quot;, Integer.class);</span>
148 
149     /**
<span class="line-modified">150      * See {@code markWord::prototype()}.</span>
151      */
152     long arrayPrototypeMarkWord() {
153         return markWordNoHashInPlace | markWordNoLockInPlace;
154     }
155 
156     final int methodAccessFlagsOffset = getFieldOffset(&quot;Method::_access_flags&quot;, Integer.class, &quot;AccessFlags&quot;);
157     final int methodConstMethodOffset = getFieldOffset(&quot;Method::_constMethod&quot;, Integer.class, &quot;ConstMethod*&quot;);
158     final int methodIntrinsicIdOffset = getFieldOffset(&quot;Method::_intrinsic_id&quot;, Integer.class, &quot;u2&quot;);
159     final int methodFlagsOffset = getFieldOffset(&quot;Method::_flags&quot;, Integer.class, &quot;u2&quot;);
160     final int methodVtableIndexOffset = getFieldOffset(&quot;Method::_vtable_index&quot;, Integer.class, &quot;int&quot;);
161 
162     final int methodDataOffset = getFieldOffset(&quot;Method::_method_data&quot;, Integer.class, &quot;MethodData*&quot;);
163     final int methodCodeOffset = getFieldOffset(&quot;Method::_code&quot;, Integer.class, &quot;CompiledMethod*&quot;);
164 
165     final int methodFlagsCallerSensitive = getConstant(&quot;Method::_caller_sensitive&quot;, Integer.class);
166     final int methodFlagsForceInline = getConstant(&quot;Method::_force_inline&quot;, Integer.class);
167     final int methodFlagsIntrinsicCandidate = getConstant(&quot;Method::_intrinsic_candidate&quot;, Integer.class);
168     final int methodFlagsDontInline = getConstant(&quot;Method::_dont_inline&quot;, Integer.class);
169     final int methodFlagsReservedStackAccess = getConstant(&quot;Method::_reserved_stack_access&quot;, Integer.class);
170     final int nonvirtualVtableIndex = getConstant(&quot;Method::nonvirtual_vtable_index&quot;, Integer.class);
</pre>
<hr />
<pre>
335 
336     final int deoptActionNone = getConstant(&quot;Deoptimization::Action_none&quot;, Integer.class);
337     final int deoptActionMaybeRecompile = getConstant(&quot;Deoptimization::Action_maybe_recompile&quot;, Integer.class);
338     final int deoptActionReinterpret = getConstant(&quot;Deoptimization::Action_reinterpret&quot;, Integer.class);
339     final int deoptActionMakeNotEntrant = getConstant(&quot;Deoptimization::Action_make_not_entrant&quot;, Integer.class);
340     final int deoptActionMakeNotCompilable = getConstant(&quot;Deoptimization::Action_make_not_compilable&quot;, Integer.class);
341 
342     final int deoptimizationActionBits = getConstant(&quot;Deoptimization::_action_bits&quot;, Integer.class);
343     final int deoptimizationReasonBits = getConstant(&quot;Deoptimization::_reason_bits&quot;, Integer.class);
344     final int deoptimizationDebugIdBits = getConstant(&quot;Deoptimization::_debug_id_bits&quot;, Integer.class);
345     final int deoptimizationActionShift = getConstant(&quot;Deoptimization::_action_shift&quot;, Integer.class);
346     final int deoptimizationReasonShift = getConstant(&quot;Deoptimization::_reason_shift&quot;, Integer.class);
347     final int deoptimizationDebugIdShift = getConstant(&quot;Deoptimization::_debug_id_shift&quot;, Integer.class);
348 
349     final int vmIntrinsicInvokeBasic = getConstant(&quot;vmIntrinsics::_invokeBasic&quot;, Integer.class);
350     final int vmIntrinsicLinkToVirtual = getConstant(&quot;vmIntrinsics::_linkToVirtual&quot;, Integer.class);
351     final int vmIntrinsicLinkToStatic = getConstant(&quot;vmIntrinsics::_linkToStatic&quot;, Integer.class);
352     final int vmIntrinsicLinkToSpecial = getConstant(&quot;vmIntrinsics::_linkToSpecial&quot;, Integer.class);
353     final int vmIntrinsicLinkToInterface = getConstant(&quot;vmIntrinsics::_linkToInterface&quot;, Integer.class);
354 
<span class="line-modified">355     final int codeInstallResultOk = getConstant(&quot;JVMCI::ok&quot;, Integer.class);</span>
<span class="line-modified">356     final int codeInstallResultDependenciesFailed = getConstant(&quot;JVMCI::dependencies_failed&quot;, Integer.class);</span>
<span class="line-modified">357     final int codeInstallResultCacheFull = getConstant(&quot;JVMCI::cache_full&quot;, Integer.class);</span>
<span class="line-modified">358     final int codeInstallResultCodeTooLarge = getConstant(&quot;JVMCI::code_too_large&quot;, Integer.class);</span>

359 
360     String getCodeInstallResultDescription(int codeInstallResult) {
361         if (codeInstallResult == codeInstallResultOk) {
362             return &quot;ok&quot;;
363         }
364         if (codeInstallResult == codeInstallResultDependenciesFailed) {
365             return &quot;dependencies failed&quot;;
366         }



367         if (codeInstallResult == codeInstallResultCacheFull) {
368             return &quot;code cache is full&quot;;
369         }
370         if (codeInstallResult == codeInstallResultCodeTooLarge) {
371             return &quot;code is too large&quot;;
372         }
373         assert false : codeInstallResult;
374         return &quot;unknown&quot;;
375     }
376 
377     final int bitDataExceptionSeenFlag = getConstant(&quot;BitData::exception_seen_flag&quot;, Integer.class);
378     final int bitDataNullSeenFlag = getConstant(&quot;BitData::null_seen_flag&quot;, Integer.class);
379     final int methodDataCountOffset = getConstant(&quot;CounterData::count_off&quot;, Integer.class);
380     final int jumpDataTakenOffset = getConstant(&quot;JumpData::taken_off_set&quot;, Integer.class);
381     final int jumpDataDisplacementOffset = getConstant(&quot;JumpData::displacement_off_set&quot;, Integer.class);
382     final int receiverTypeDataNonprofiledCountOffset = getConstant(&quot;ReceiverTypeData::nonprofiled_count_off_set&quot;, Integer.class);
383     final int receiverTypeDataReceiverTypeRowCellCount = getConstant(&quot;ReceiverTypeData::receiver_type_row_cell_count&quot;, Integer.class);
384     final int receiverTypeDataReceiver0Offset = getConstant(&quot;ReceiverTypeData::receiver0_offset&quot;, Integer.class);
385     final int receiverTypeDataCount0Offset = getConstant(&quot;ReceiverTypeData::count0_offset&quot;, Integer.class);
386     final int branchDataNotTakenOffset = getConstant(&quot;BranchData::not_taken_off_set&quot;, Integer.class);
</pre>
</td>
</tr>
</table>
<center><a href="HotSpotSpeculationLog.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HotSpotVMConfigAccess.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>