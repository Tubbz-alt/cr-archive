<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/MetaAccessProvider.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package jdk.vm.ci.meta;
 24 
 25 import java.lang.reflect.Constructor;
 26 import java.lang.reflect.Executable;
 27 import java.lang.reflect.Field;
 28 import java.lang.reflect.Method;
 29 
 30 import jdk.vm.ci.meta.SpeculationLog.Speculation;
 31 
 32 /**
 33  * Provides access to the metadata of a class typically provided in a class file.
 34  */
 35 public interface MetaAccessProvider {
 36 
 37     /**
 38      * Returns the resolved Java type representing a given Java class.
 39      *
 40      * @param clazz the Java class object
 41      * @return the resolved Java type object
 42      */
 43     ResolvedJavaType lookupJavaType(Class&lt;?&gt; clazz);
 44 
 45     /**
 46      * Returns the resolved Java types representing some given Java classes.
 47      *
 48      * @param classes the Java class objects
 49      * @return the resolved Java type objects
 50      */
 51     default ResolvedJavaType[] lookupJavaTypes(Class&lt;?&gt;[] classes) {
 52         ResolvedJavaType[] result = new ResolvedJavaType[classes.length];
 53         for (int i = 0; i &lt; result.length; i++) {
 54             result[i] = lookupJavaType(classes[i]);
 55         }
 56         return result;
 57     }
 58 
 59     /**
 60      * Provides the {@link ResolvedJavaMethod} for a {@link Method} or {@link Constructor} obtained
 61      * via reflection.
 62      */
 63     ResolvedJavaMethod lookupJavaMethod(Executable reflectionMethod);
 64 
 65     /**
 66      * Provides the {@link ResolvedJavaField} for a {@link Field} obtained via reflection.
 67      */
 68     ResolvedJavaField lookupJavaField(Field reflectionField);
 69 
 70     /**
 71      * Returns the resolved Java type of the given {@link JavaConstant} object.
 72      *
 73      * @return {@code null} if {@code constant.isNull() || !constant.kind.isObject()}
 74      */
 75     ResolvedJavaType lookupJavaType(JavaConstant constant);
 76 
 77     /**
 78      * Returns the number of bytes occupied by this constant value or constant object.
 79      *
 80      * @param constant the constant whose bytes should be measured
 81      * @return the number of bytes occupied by this constant
 82      */
 83     long getMemorySize(JavaConstant constant);
 84 
 85     /**
 86      * Parses a
 87      * &lt;a href=&quot;http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3&quot;&gt;method
 88      * descriptor&lt;/a&gt; into a {@link Signature}.
 89      *
 90      * @throws IllegalArgumentException if the method descriptor is not well formed
 91      */
 92     Signature parseMethodDescriptor(String methodDescriptor);
 93 
 94     /**
 95      * Encodes a deoptimization action and a deoptimization reason in an integer value.
 96      *
 97      * @param debugId an integer that can be used to track the origin of a deoptimization at
 98      *            runtime. There is no guarantee that the runtime will use this value. The runtime
 99      *            may even keep fewer than 32 bits.
100      *
101      * @return the encoded value as an integer
102      */
103     JavaConstant encodeDeoptActionAndReason(DeoptimizationAction action, DeoptimizationReason reason, int debugId);
104 
<a name="2" id="anc2"></a><span class="line-added">105     /**</span>
<span class="line-added">106      * Gets a constant that denotes {@code speculation}. The constant can passed to the</span>
<span class="line-added">107      * deoptimization handler (e.g., through a thread local) to indicate a failed speculation.</span>
<span class="line-added">108      */</span>
109     JavaConstant encodeSpeculation(Speculation speculation);
110 
<a name="3" id="anc3"></a><span class="line-added">111     /**</span>
<span class="line-added">112      * Decodes {@code constant} back to a {@link Speculation} object.</span>
<span class="line-added">113      *</span>
<span class="line-added">114      * @throws IllegalArgumentException if {@code constant} can only be decoded through a</span>
<span class="line-added">115      *             {@link SpeculationLog} and {@code speculationLog} does not contain the</span>
<span class="line-added">116      *             speculation denoted by {@code constant}</span>
<span class="line-added">117      */</span>
<span class="line-added">118     Speculation decodeSpeculation(JavaConstant constant, SpeculationLog speculationLog);</span>
<span class="line-added">119 </span>
120     DeoptimizationReason decodeDeoptReason(JavaConstant constant);
121 
122     DeoptimizationAction decodeDeoptAction(JavaConstant constant);
123 
<a name="4" id="anc4"></a>

124     int decodeDebugId(JavaConstant constant);
125 
126     int getArrayBaseOffset(JavaKind elementKind);
127 
128     int getArrayIndexScale(JavaKind elementKind);
129 }
<a name="5" id="anc5"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="5" type="hidden" />
</body>
</html>