<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.nodes/src/org/graalvm/compiler/nodes/SimplifyingGraphDecoder.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ProxyNode.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="StartNode.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.nodes/src/org/graalvm/compiler/nodes/SimplifyingGraphDecoder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 42,11 ***</span>
  import org.graalvm.compiler.nodes.extended.GuardingNode;
  import org.graalvm.compiler.nodes.extended.IntegerSwitchNode;
  import org.graalvm.compiler.nodes.java.ArrayLengthNode;
  import org.graalvm.compiler.nodes.java.LoadFieldNode;
  import org.graalvm.compiler.nodes.java.LoadIndexedNode;
<span class="line-modified">! import org.graalvm.compiler.nodes.spi.StampProvider;</span>
  import org.graalvm.compiler.nodes.util.GraphUtil;
  import org.graalvm.compiler.options.OptionValues;
  
  import jdk.vm.ci.code.Architecture;
  import jdk.vm.ci.meta.Assumptions;
<span class="line-new-header">--- 42,11 ---</span>
  import org.graalvm.compiler.nodes.extended.GuardingNode;
  import org.graalvm.compiler.nodes.extended.IntegerSwitchNode;
  import org.graalvm.compiler.nodes.java.ArrayLengthNode;
  import org.graalvm.compiler.nodes.java.LoadFieldNode;
  import org.graalvm.compiler.nodes.java.LoadIndexedNode;
<span class="line-modified">! import org.graalvm.compiler.nodes.spi.CoreProviders;</span>
  import org.graalvm.compiler.nodes.util.GraphUtil;
  import org.graalvm.compiler.options.OptionValues;
  
  import jdk.vm.ci.code.Architecture;
  import jdk.vm.ci.meta.Assumptions;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 59,14 ***</span>
   * during decoding. Additionally, {@link IfNode branches} and {@link IntegerSwitchNode switches}
   * with constant conditions are simplified.
   */
  public class SimplifyingGraphDecoder extends GraphDecoder {
  
<span class="line-modified">!     protected final MetaAccessProvider metaAccess;</span>
<span class="line-removed">-     protected final ConstantReflectionProvider constantReflection;</span>
<span class="line-removed">-     protected final ConstantFieldProvider constantFieldProvider;</span>
<span class="line-removed">-     protected final StampProvider stampProvider;</span>
      protected final boolean canonicalizeReads;
      protected final CanonicalizerTool canonicalizerTool;
  
      protected class PECanonicalizerTool implements CanonicalizerTool {
  
<span class="line-new-header">--- 59,11 ---</span>
   * during decoding. Additionally, {@link IfNode branches} and {@link IntegerSwitchNode switches}
   * with constant conditions are simplified.
   */
  public class SimplifyingGraphDecoder extends GraphDecoder {
  
<span class="line-modified">!     protected final CoreProviders providers;</span>
      protected final boolean canonicalizeReads;
      protected final CanonicalizerTool canonicalizerTool;
  
      protected class PECanonicalizerTool implements CanonicalizerTool {
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 83,21 ***</span>
              return options;
          }
  
          @Override
          public MetaAccessProvider getMetaAccess() {
<span class="line-modified">!             return metaAccess;</span>
          }
  
          @Override
          public ConstantReflectionProvider getConstantReflection() {
<span class="line-modified">!             return constantReflection;</span>
          }
  
          @Override
          public ConstantFieldProvider getConstantFieldProvider() {
<span class="line-modified">!             return constantFieldProvider;</span>
          }
  
          @Override
          public boolean canonicalizeReads() {
              return canonicalizeReads;
<span class="line-new-header">--- 80,21 ---</span>
              return options;
          }
  
          @Override
          public MetaAccessProvider getMetaAccess() {
<span class="line-modified">!             return providers.getMetaAccess();</span>
          }
  
          @Override
          public ConstantReflectionProvider getConstantReflection() {
<span class="line-modified">!             return providers.getConstantReflection();</span>
          }
  
          @Override
          public ConstantFieldProvider getConstantFieldProvider() {
<span class="line-modified">!             return providers.getConstantFieldProvider();</span>
          }
  
          @Override
          public boolean canonicalizeReads() {
              return canonicalizeReads;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 133,18 ***</span>
          public Node canonical(CanonicalizerTool tool) {
              return null;
          }
      }
  
<span class="line-modified">!     public SimplifyingGraphDecoder(Architecture architecture, StructuredGraph graph, MetaAccessProvider metaAccess, ConstantReflectionProvider constantReflection,</span>
<span class="line-removed">-                     ConstantFieldProvider constantFieldProvider, StampProvider stampProvider,</span>
<span class="line-removed">-                     boolean canonicalizeReads) {</span>
          super(architecture, graph);
<span class="line-modified">!         this.metaAccess = metaAccess;</span>
<span class="line-removed">-         this.constantReflection = constantReflection;</span>
<span class="line-removed">-         this.constantFieldProvider = constantFieldProvider;</span>
<span class="line-removed">-         this.stampProvider = stampProvider;</span>
          this.canonicalizeReads = canonicalizeReads;
          this.canonicalizerTool = new PECanonicalizerTool(graph.getAssumptions(), graph.getOptions());
      }
  
      @Override
<span class="line-new-header">--- 130,13 ---</span>
          public Node canonical(CanonicalizerTool tool) {
              return null;
          }
      }
  
<span class="line-modified">!     public SimplifyingGraphDecoder(Architecture architecture, StructuredGraph graph, CoreProviders providers, boolean canonicalizeReads) {</span>
          super(architecture, graph);
<span class="line-modified">!         this.providers = providers;</span>
          this.canonicalizeReads = canonicalizeReads;
          this.canonicalizerTool = new PECanonicalizerTool(graph.getAssumptions(), graph.getOptions());
      }
  
      @Override
</pre>
<center><a href="ProxyNode.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="StartNode.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>