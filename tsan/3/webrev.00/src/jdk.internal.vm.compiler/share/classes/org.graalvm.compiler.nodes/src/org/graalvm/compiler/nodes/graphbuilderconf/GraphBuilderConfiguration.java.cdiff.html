<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.nodes/src/org/graalvm/compiler/nodes/graphbuilderconf/GraphBuilderConfiguration.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="GeneratedInvocationPlugin.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="GraphBuilderContext.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.nodes/src/org/graalvm/compiler/nodes/graphbuilderconf/GraphBuilderConfiguration.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 199,11 ***</span>
<span class="line-new-header">--- 199,13 ---</span>
      private final BytecodeExceptionMode bytecodeExceptionMode;
      private final boolean omitAssertions;
      private final List&lt;ResolvedJavaType&gt; skippedExceptionTypes;
      private final boolean insertFullInfopoints;
      private final boolean trackNodeSourcePosition;
<span class="line-added">+     private final boolean retainLocalVariables;</span>
      private final Plugins plugins;
<span class="line-added">+     private final boolean replaceLocalsWithConstants;</span>
  
      public enum BytecodeExceptionMode {
          /**
           * This mode always explicitly checks for exceptions.
           */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 227,18 ***</span>
<span class="line-new-header">--- 229,22 ---</span>
                      boolean unresolvedIsError,
                      BytecodeExceptionMode bytecodeExceptionMode,
                      boolean omitAssertions,
                      boolean insertFullInfopoints,
                      boolean trackNodeSourcePosition,
<span class="line-added">+                     boolean retainLocalVariables,</span>
<span class="line-added">+                     boolean replaceLocalsWithConstants,</span>
                      List&lt;ResolvedJavaType&gt; skippedExceptionTypes,
                      Plugins plugins) {
          this.eagerResolving = eagerResolving;
          this.unresolvedIsError = unresolvedIsError;
          this.bytecodeExceptionMode = bytecodeExceptionMode;
          this.omitAssertions = omitAssertions;
          this.insertFullInfopoints = insertFullInfopoints;
          this.trackNodeSourcePosition = trackNodeSourcePosition;
<span class="line-added">+         this.retainLocalVariables = retainLocalVariables;</span>
<span class="line-added">+         this.replaceLocalsWithConstants = replaceLocalsWithConstants;</span>
          this.skippedExceptionTypes = skippedExceptionTypes;
          this.plugins = plugins;
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 253,10 ***</span>
<span class="line-new-header">--- 259,12 ---</span>
                          unresolvedIsError,
                          bytecodeExceptionMode,
                          omitAssertions,
                          insertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          newPlugins);
          return result;
      }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 272,10 ***</span>
<span class="line-new-header">--- 280,12 ---</span>
                          newUnresolvedIsError,
                          bytecodeExceptionMode,
                          omitAssertions,
                          insertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          plugins);
      }
  
      public GraphBuilderConfiguration withEagerResolving(boolean newEagerResolving) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 284,10 ***</span>
<span class="line-new-header">--- 294,12 ---</span>
                          unresolvedIsError,
                          bytecodeExceptionMode,
                          omitAssertions,
                          insertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          plugins);
      }
  
      public GraphBuilderConfiguration withSkippedExceptionTypes(ResolvedJavaType[] newSkippedExceptionTypes) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 296,10 ***</span>
<span class="line-new-header">--- 308,12 ---</span>
                          unresolvedIsError,
                          bytecodeExceptionMode,
                          omitAssertions,
                          insertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          Collections.unmodifiableList(Arrays.asList(newSkippedExceptionTypes)),
                          plugins);
      }
  
      public GraphBuilderConfiguration withBytecodeExceptionMode(BytecodeExceptionMode newBytecodeExceptionMode) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 307,10 ***</span>
<span class="line-new-header">--- 321,12 ---</span>
                          unresolvedIsError,
                          newBytecodeExceptionMode,
                          omitAssertions,
                          insertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          plugins);
      }
  
      public GraphBuilderConfiguration withOmitAssertions(boolean newOmitAssertions) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 319,10 ***</span>
<span class="line-new-header">--- 335,12 ---</span>
                          unresolvedIsError,
                          bytecodeExceptionMode,
                          newOmitAssertions,
                          insertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          plugins);
      }
  
      public GraphBuilderConfiguration withFullInfopoints(boolean newInsertFullInfopoints) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 331,10 ***</span>
<span class="line-new-header">--- 349,12 ---</span>
                          unresolvedIsError,
                          bytecodeExceptionMode,
                          omitAssertions,
                          newInsertFullInfopoints,
                          trackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          plugins);
      }
  
      public GraphBuilderConfiguration withNodeSourcePosition(boolean newTrackNodeSourcePosition) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 343,10 ***</span>
<span class="line-new-header">--- 363,40 ---</span>
                          unresolvedIsError,
                          bytecodeExceptionMode,
                          omitAssertions,
                          insertFullInfopoints,
                          newTrackNodeSourcePosition,
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
<span class="line-added">+                         skippedExceptionTypes,</span>
<span class="line-added">+                         plugins);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     public GraphBuilderConfiguration withRetainLocalVariables(boolean newRetainLocalVariables) {</span>
<span class="line-added">+         return new GraphBuilderConfiguration(</span>
<span class="line-added">+                         eagerResolving,</span>
<span class="line-added">+                         unresolvedIsError,</span>
<span class="line-added">+                         bytecodeExceptionMode,</span>
<span class="line-added">+                         omitAssertions,</span>
<span class="line-added">+                         insertFullInfopoints,</span>
<span class="line-added">+                         trackNodeSourcePosition,</span>
<span class="line-added">+                         newRetainLocalVariables,</span>
<span class="line-added">+                         replaceLocalsWithConstants,</span>
<span class="line-added">+                         skippedExceptionTypes,</span>
<span class="line-added">+                         plugins);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     public GraphBuilderConfiguration withReplaceLocalsWithConstants(boolean newReplaceLocalsWithConstants) {</span>
<span class="line-added">+         return new GraphBuilderConfiguration(</span>
<span class="line-added">+                         eagerResolving,</span>
<span class="line-added">+                         unresolvedIsError,</span>
<span class="line-added">+                         bytecodeExceptionMode,</span>
<span class="line-added">+                         omitAssertions,</span>
<span class="line-added">+                         insertFullInfopoints,</span>
<span class="line-added">+                         trackNodeSourcePosition,</span>
<span class="line-added">+                         retainLocalVariables,</span>
<span class="line-added">+                         newReplaceLocalsWithConstants,</span>
                          skippedExceptionTypes,
                          plugins);
      }
  
      public List&lt;ResolvedJavaType&gt; getSkippedExceptionTypes() {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 367,22 ***</span>
<span class="line-new-header">--- 417,32 ---</span>
  
      public boolean trackNodeSourcePosition() {
          return trackNodeSourcePosition;
      }
  
<span class="line-added">+     public boolean retainLocalVariables() {</span>
<span class="line-added">+         return retainLocalVariables;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      public boolean insertFullInfopoints() {
          return insertFullInfopoints;
      }
  
<span class="line-added">+     public boolean replaceLocalsWithConstants() {</span>
<span class="line-added">+         return this.replaceLocalsWithConstants;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      public static GraphBuilderConfiguration getDefault(Plugins plugins) {
          return new GraphBuilderConfiguration(
                          /* eagerResolving: */ false,
                          /* unresolvedIsError: */ false,
                          BytecodeExceptionMode.Profile,
                          /* omitAssertions: */ false,
                          /* insertFullInfopoints: */ false,
                          /* trackNodeSourcePosition: */ false,
<span class="line-added">+                         /* retainLocalVariables */ false,</span>
<span class="line-added">+                         /* replaceLocalsWithConstants */ false,</span>
                          Collections.emptyList(),
                          plugins);
      }
  
      public static GraphBuilderConfiguration getSnippetDefault(Plugins plugins) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 391,10 ***</span>
<span class="line-new-header">--- 451,12 ---</span>
                          /* unresolvedIsError: */ true,
                          BytecodeExceptionMode.OmitAll,
                          /* omitAssertions: */ false,
                          /* insertFullInfopoints: */ false,
                          /* trackNodeSourcePosition: */ false,
<span class="line-added">+                         /* retainLocalVariables */ false,</span>
<span class="line-added">+                         /* replaceLocalsWithConstants */ false,</span>
                          Collections.emptyList(),
                          plugins);
      }
  
      /** Returns {@code true} if it is an error for a class/field/method resolution to fail. */
</pre>
<center><a href="GeneratedInvocationPlugin.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="GraphBuilderContext.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>