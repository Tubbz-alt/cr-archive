<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.nodes/src/org/graalvm/compiler/nodes/calc/IntegerLowerThanNode.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="IntegerLessThanNode.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="IntegerMulHighNode.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.nodes/src/org/graalvm/compiler/nodes/calc/IntegerLowerThanNode.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
272                 return null;
273             }
274             long yResidue = 0;
275             ValueNode right = null;
276             JavaConstant rightCst = null;
277             if (forY instanceof AddNode) {
278                 AddNode yAdd = (AddNode) forY;
279                 if (yAdd.getY().isJavaConstant() &amp;&amp; !yAdd.getY().asJavaConstant().isDefaultForKind()) {
280                     long yCst = yAdd.getY().asJavaConstant().asLong();
281                     yResidue = yCst - min;
282                     right = yAdd.getX();
283                 }
284             } else if (forY.isJavaConstant()) {
285                 rightCst = forY.asJavaConstant();
286             }
287             if (right == null &amp;&amp; rightCst == null) {
288                 return null;
289             }
290             if ((xResidue == 0 &amp;&amp; left != null) || (yResidue == 0 &amp;&amp; right != null)) {
291                 if (left == null) {



292                     left = ConstantNode.forIntegerBits(bits, leftCst.asLong() - min);
293                 } else if (xResidue != 0) {
294                     left = AddNode.create(left, ConstantNode.forIntegerBits(bits, xResidue), view);
295                 }
296                 if (right == null) {



297                     right = ConstantNode.forIntegerBits(bits, rightCst.asLong() - min);
298                 } else if (yResidue != 0) {
299                     right = AddNode.create(right, ConstantNode.forIntegerBits(bits, yResidue), view);
300                 }
301                 if (signed) {
302                     return new IntegerBelowNode(left, right);
303                 } else {
304                     return new IntegerLessThanNode(left, right);
305                 }
306             }
307             return null;
308         }
309 
310         private LogicNode canonicalizeXLowerXPlusA(ValueNode forX, AddNode addNode, boolean mirrored, boolean strict, NodeView view) {
311             // x &lt; x + a
312             // x |&lt;| x + a
313             IntegerStamp xStamp = (IntegerStamp) forX.stamp(view);
314             IntegerStamp succeedingXStamp;
315             boolean exact;
316             if (addNode.getX() == forX &amp;&amp; addNode.getY().stamp(view) instanceof IntegerStamp) {
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
272                 return null;
273             }
274             long yResidue = 0;
275             ValueNode right = null;
276             JavaConstant rightCst = null;
277             if (forY instanceof AddNode) {
278                 AddNode yAdd = (AddNode) forY;
279                 if (yAdd.getY().isJavaConstant() &amp;&amp; !yAdd.getY().asJavaConstant().isDefaultForKind()) {
280                     long yCst = yAdd.getY().asJavaConstant().asLong();
281                     yResidue = yCst - min;
282                     right = yAdd.getX();
283                 }
284             } else if (forY.isJavaConstant()) {
285                 rightCst = forY.asJavaConstant();
286             }
287             if (right == null &amp;&amp; rightCst == null) {
288                 return null;
289             }
290             if ((xResidue == 0 &amp;&amp; left != null) || (yResidue == 0 &amp;&amp; right != null)) {
291                 if (left == null) {
<span class="line-added">292                     // Fortify: Suppress Null Dereference false positive</span>
<span class="line-added">293                     assert leftCst != null;</span>
<span class="line-added">294 </span>
295                     left = ConstantNode.forIntegerBits(bits, leftCst.asLong() - min);
296                 } else if (xResidue != 0) {
297                     left = AddNode.create(left, ConstantNode.forIntegerBits(bits, xResidue), view);
298                 }
299                 if (right == null) {
<span class="line-added">300                     // Fortify: Suppress Null Dereference false positive</span>
<span class="line-added">301                     assert rightCst != null;</span>
<span class="line-added">302 </span>
303                     right = ConstantNode.forIntegerBits(bits, rightCst.asLong() - min);
304                 } else if (yResidue != 0) {
305                     right = AddNode.create(right, ConstantNode.forIntegerBits(bits, yResidue), view);
306                 }
307                 if (signed) {
308                     return new IntegerBelowNode(left, right);
309                 } else {
310                     return new IntegerLessThanNode(left, right);
311                 }
312             }
313             return null;
314         }
315 
316         private LogicNode canonicalizeXLowerXPlusA(ValueNode forX, AddNode addNode, boolean mirrored, boolean strict, NodeView view) {
317             // x &lt; x + a
318             // x |&lt;| x + a
319             IntegerStamp xStamp = (IntegerStamp) forX.stamp(view);
320             IntegerStamp succeedingXStamp;
321             boolean exact;
322             if (addNode.getX() == forX &amp;&amp; addNode.getY().stamp(view) instanceof IntegerStamp) {
</pre>
</td>
</tr>
</table>
<center><a href="IntegerLessThanNode.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="IntegerMulHighNode.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>