<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.asm.sparc/src/org/graalvm/compiler/asm/sparc/SPARCAssembler.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../org.graalvm.compiler.asm.amd64/src/org/graalvm/compiler/asm/amd64/AVXKind.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../org.graalvm.compiler.asm.test/src/org/graalvm/compiler/asm/test/AssemblerTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.asm.sparc/src/org/graalvm/compiler/asm/sparc/SPARCAssembler.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2009, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2009, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -626,10 +626,17 @@</span>
  
          public int getValue() {
              return value;
          }
  
<span class="udiff-line-added">+         public int getOpfCCValue() {</span>
<span class="udiff-line-added">+             /*</span>
<span class="udiff-line-added">+              * In the opf_cc encoding for FMOVcc, the third bit is set to indicate icc/xcc.</span>
<span class="udiff-line-added">+              */</span>
<span class="udiff-line-added">+             return (isFloat ? value : (value | 0x4));</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+ </span>
          public String getOperator() {
              return operator;
          }
  
          public static CC forKind(PlatformKind kind) {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1611,11 +1618,11 @@</span>
          public void emit(SPARCMacroAssembler masm, ConditionFlag condition, CC cc, Register rs2, Register rd) {
              int inst = setBits(0);
              inst = BitSpec.rd.setBits(inst, rd.encoding());
              inst = BitSpec.op3.setBits(inst, opfLow.op3.value);
              inst = BitSpec.opfCond.setBits(inst, condition.value);
<span class="udiff-line-modified-removed">-             inst = BitSpec.opfCC.setBits(inst, cc.value);</span>
<span class="udiff-line-modified-added">+             inst = BitSpec.opfCC.setBits(inst, cc.getOpfCCValue());</span>
              inst = BitSpec.opfLow.setBits(inst, opfLow.value);
              inst = BitSpec.rs2.setBits(inst, rs2.encoding());
              masm.emitInt(inst);
          }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1849,11 +1856,11 @@</span>
              nop();
          }
      }
  
      protected int patchUnbound(Label label) {
<span class="udiff-line-modified-removed">-         label.addPatchAt(position());</span>
<span class="udiff-line-modified-added">+         label.addPatchAt(position(), this);</span>
          return 0;
      }
  
      // @formatter:off
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -2191,11 +2198,11 @@</span>
      public void fmovscc(ConditionFlag cond, CC cc, Register rs2, Register rd) {
          fmovcc(cond, cc, rs2, rd, OpfLow.Fmovscc.value);
      }
  
      private void fmovcc(ConditionFlag cond, CC cc, Register rs2, Register rd, int opfLow) {
<span class="udiff-line-modified-removed">-         int opfCC = cc.value;</span>
<span class="udiff-line-modified-added">+         int opfCC = cc.getOpfCCValue();</span>
          int a = opfCC &lt;&lt; 11 | opfLow &lt;&lt; 5 | rs2.encoding;
          fmt10(rd.encoding, Fpop2.value, cond.value, a);
      }
  
      public void movcc(ConditionFlag conditionFlag, CC cc, Register rs2, Register rd) {
</pre>
<center><a href="../../../../../../../org.graalvm.compiler.asm.amd64/src/org/graalvm/compiler/asm/amd64/AVXKind.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../org.graalvm.compiler.asm.test/src/org/graalvm/compiler/asm/test/AssemblerTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>