<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.hotspot/src/org/graalvm/compiler/hotspot/JVMCIVersionCheck.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="IsGraalPredicate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="SymbolicSnippetEncoder.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.hotspot/src/org/graalvm/compiler/hotspot/JVMCIVersionCheck.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2016, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 package org.graalvm.compiler.hotspot;
 26 
 27 import java.util.Formatter;





 28 
 29 /**
 30  * Mechanism for checking that the current Java runtime environment supports the minimum JVMCI API
 31  * required by Graal. The {@code JVMCI_VERSION_CHECK} environment variable can be used to ignore a
 32  * failed check ({@code JVMCI_VERSION_CHECK=ignore}) or print a warning (
 33  * {@code JVMCI_VERSION_CHECK=warn}) and continue. Otherwise, a failed check results in an
 34  * {@link InternalError} being raised or, if called from {@link #main(String[])}, the VM exiting
 35  * with a result code of {@code -1}
 36  *
 37  * This class only depends on the JDK so that it can be used without building Graal.
 38  */
<span class="line-modified"> 39 class JVMCIVersionCheck {</span>
 40 
<span class="line-modified"> 41     // 0.55 introduces new HotSpotSpeculationLog API</span>
<span class="line-removed"> 42     private static final int JVMCI8_MIN_MAJOR_VERSION = 0;</span>
<span class="line-removed"> 43     private static final int JVMCI8_MIN_MINOR_VERSION = 55;</span>
 44 
<span class="line-modified"> 45     private static void failVersionCheck(boolean exit, String reason, Object... args) {</span>




































































































 46         Formatter errorMessage = new Formatter().format(reason, args);
<span class="line-modified"> 47         String javaHome = System.getProperty(&quot;java.home&quot;);</span>
<span class="line-modified"> 48         String vmName = System.getProperty(&quot;java.vm.name&quot;);</span>
 49         errorMessage.format(&quot;Set the JVMCI_VERSION_CHECK environment variable to \&quot;ignore\&quot; to suppress &quot;);
 50         errorMessage.format(&quot;this error or to \&quot;warn\&quot; to emit a warning and continue execution.%n&quot;);
 51         errorMessage.format(&quot;Currently used Java home directory is %s.%n&quot;, javaHome);
 52         errorMessage.format(&quot;Currently used VM configuration is: %s%n&quot;, vmName);
<span class="line-modified"> 53         if (System.getProperty(&quot;java.specification.version&quot;).compareTo(&quot;1.9&quot;) &lt; 0) {</span>
<span class="line-modified"> 54             errorMessage.format(&quot;Download the latest JVMCI JDK 8 from http://www.oracle.com/technetwork/oracle-labs/program-languages/downloads/index.html&quot;);</span>
 55         } else {
<span class="line-modified"> 56             errorMessage.format(&quot;Download JDK 11 or later.&quot;);</span>




 57         }
 58         String value = System.getenv(&quot;JVMCI_VERSION_CHECK&quot;);
 59         if (&quot;warn&quot;.equals(value)) {
 60             System.err.println(errorMessage.toString());
 61         } else if (&quot;ignore&quot;.equals(value)) {
 62             return;
 63         } else if (exit) {
 64             System.err.println(errorMessage.toString());
 65             System.exit(-1);
 66         } else {
 67             throw new InternalError(errorMessage.toString());
 68         }
 69     }
 70 
<span class="line-modified"> 71     static void check(boolean exitOnFailure) {</span>
<span class="line-modified"> 72         // Don&#39;t use regular expressions to minimize Graal startup time</span>
<span class="line-modified"> 73         String javaSpecVersion = System.getProperty(&quot;java.specification.version&quot;);</span>
<span class="line-modified"> 74         String vmVersion = System.getProperty(&quot;java.vm.version&quot;);</span>























 75         if (javaSpecVersion.compareTo(&quot;1.9&quot;) &lt; 0) {
<span class="line-modified"> 76             int start = vmVersion.indexOf(&quot;-jvmci-&quot;);</span>
<span class="line-modified"> 77             if (start &gt;= 0) {</span>
<span class="line-modified"> 78                 start += &quot;-jvmci-&quot;.length();</span>
<span class="line-modified"> 79                 int end = vmVersion.indexOf(&#39;.&#39;, start);</span>
<span class="line-removed"> 80                 if (end &gt; 0) {</span>
<span class="line-removed"> 81                     int major;</span>
<span class="line-removed"> 82                     try {</span>
<span class="line-removed"> 83                         major = Integer.parseInt(vmVersion.substring(start, end));</span>
<span class="line-removed"> 84                     } catch (NumberFormatException e) {</span>
<span class="line-removed"> 85                         failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal.%n&quot; +</span>
<span class="line-removed"> 86                                         &quot;Cannot read JVMCI major version from java.vm.version property: %s.%n&quot;, vmVersion);</span>
<span class="line-removed"> 87                         return;</span>
<span class="line-removed"> 88                     }</span>
<span class="line-removed"> 89                     start = end + 1;</span>
<span class="line-removed"> 90                     end = start;</span>
<span class="line-removed"> 91                     while (end &lt; vmVersion.length() &amp;&amp; Character.isDigit(vmVersion.charAt(end))) {</span>
<span class="line-removed"> 92                         end++;</span>
<span class="line-removed"> 93                     }</span>
<span class="line-removed"> 94                     int minor;</span>
<span class="line-removed"> 95                     try {</span>
<span class="line-removed"> 96                         minor = Integer.parseInt(vmVersion.substring(start, end));</span>
<span class="line-removed"> 97                     } catch (NumberFormatException e) {</span>
<span class="line-removed"> 98                         failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal.%n&quot; +</span>
<span class="line-removed"> 99                                         &quot;Cannot read JVMCI minor version from java.vm.version property: %s.%n&quot;, vmVersion);</span>
<span class="line-removed">100                         return;</span>
<span class="line-removed">101                     }</span>
<span class="line-removed">102                     if (major &gt;= JVMCI8_MIN_MAJOR_VERSION &amp;&amp; minor &gt;= JVMCI8_MIN_MINOR_VERSION) {</span>
<span class="line-removed">103                         return;</span>
<span class="line-removed">104                     }</span>
<span class="line-removed">105                     failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal: %d.%d &lt; %d.%d.%n&quot;,</span>
<span class="line-removed">106                                     major, minor, JVMCI8_MIN_MAJOR_VERSION, JVMCI8_MIN_MINOR_VERSION);</span>
<span class="line-removed">107                     return;</span>
108                 }

109             }
110             failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal.%n&quot; +
111                             &quot;Cannot read JVMCI version from java.vm.version property: %s.%n&quot;, vmVersion);
112         } else if (javaSpecVersion.compareTo(&quot;11&quot;) &lt; 0) {
113             failVersionCheck(exitOnFailure, &quot;Graal is not compatible with the JVMCI API in JDK 9 and 10.%n&quot;);
114         } else {
115             if (vmVersion.contains(&quot;SNAPSHOT&quot;)) {
116                 return;
117             }
118             if (vmVersion.contains(&quot;internal&quot;)) {
119                 // Allow local builds
120                 return;
121             }
<span class="line-modified">122             if (vmVersion.startsWith(&quot;11-ea+&quot;)) {</span>
<span class="line-modified">123                 String buildString = vmVersion.substring(&quot;11-ea+&quot;.length());</span>
<span class="line-modified">124                 try {</span>
<span class="line-modified">125                     int build = Integer.parseInt(buildString);</span>
<span class="line-modified">126                     if (build &lt; 20) {</span>
<span class="line-modified">127                         failVersionCheck(exitOnFailure, &quot;Graal requires build 20 or later of JDK 11 early access binary, got build %d.%n&quot;, build);</span>
<span class="line-removed">128                         return;</span>
129                     }
<span class="line-removed">130                 } catch (NumberFormatException e) {</span>
<span class="line-removed">131                     failVersionCheck(exitOnFailure, &quot;Could not parse the JDK 11 early access build number from java.vm.version property: %s.%n&quot;, vmVersion);</span>
132                     return;
133                 }


134             } else {
135                 // Graal is compatible with all JDK versions as of 11 GA.
136             }
137         }
138     }
139 
140     /**
141      * Command line interface for performing the check.
142      */
143     public static void main(String[] args) {
<span class="line-modified">144         check(true);</span>





145     }
146 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 package org.graalvm.compiler.hotspot;
 26 
 27 import java.util.Formatter;
<span class="line-added"> 28 import java.util.HashMap;</span>
<span class="line-added"> 29 import java.util.Map;</span>
<span class="line-added"> 30 import java.util.Properties;</span>
<span class="line-added"> 31 import java.util.regex.Matcher;</span>
<span class="line-added"> 32 import java.util.regex.Pattern;</span>
 33 
 34 /**
 35  * Mechanism for checking that the current Java runtime environment supports the minimum JVMCI API
 36  * required by Graal. The {@code JVMCI_VERSION_CHECK} environment variable can be used to ignore a
 37  * failed check ({@code JVMCI_VERSION_CHECK=ignore}) or print a warning (
 38  * {@code JVMCI_VERSION_CHECK=warn}) and continue. Otherwise, a failed check results in an
 39  * {@link InternalError} being raised or, if called from {@link #main(String[])}, the VM exiting
 40  * with a result code of {@code -1}
 41  *
 42  * This class only depends on the JDK so that it can be used without building Graal.
 43  */
<span class="line-modified"> 44 public final class JVMCIVersionCheck {</span>
 45 
<span class="line-modified"> 46     private static final Version JVMCI_MIN_VERSION = new Version3(19, 3, 4);</span>


 47 
<span class="line-modified"> 48     public interface Version {</span>
<span class="line-added"> 49         boolean isLessThan(Version other);</span>
<span class="line-added"> 50 </span>
<span class="line-added"> 51         static Version parse(String vmVersion) {</span>
<span class="line-added"> 52             Matcher m = Pattern.compile(&quot;.*-jvmci-(\\d+)\\.(\\d+)-b(\\d+).*&quot;).matcher(vmVersion);</span>
<span class="line-added"> 53             if (m.matches()) {</span>
<span class="line-added"> 54                 try {</span>
<span class="line-added"> 55                     int major = Integer.parseInt(m.group(1));</span>
<span class="line-added"> 56                     int minor = Integer.parseInt(m.group(2));</span>
<span class="line-added"> 57                     int build = Integer.parseInt(m.group(3));</span>
<span class="line-added"> 58                     return new Version3(major, minor, build);</span>
<span class="line-added"> 59                 } catch (NumberFormatException e) {</span>
<span class="line-added"> 60                     // ignore</span>
<span class="line-added"> 61                 }</span>
<span class="line-added"> 62             }</span>
<span class="line-added"> 63             m = Pattern.compile(&quot;.*-jvmci-(\\d+)(?:\\.|-b)(\\d+).*&quot;).matcher(vmVersion);</span>
<span class="line-added"> 64             if (m.matches()) {</span>
<span class="line-added"> 65                 try {</span>
<span class="line-added"> 66                     int major = Integer.parseInt(m.group(1));</span>
<span class="line-added"> 67                     int minor = Integer.parseInt(m.group(2));</span>
<span class="line-added"> 68                     return new Version2(major, minor);</span>
<span class="line-added"> 69                 } catch (NumberFormatException e) {</span>
<span class="line-added"> 70                     // ignore</span>
<span class="line-added"> 71                 }</span>
<span class="line-added"> 72             }</span>
<span class="line-added"> 73             return null;</span>
<span class="line-added"> 74         }</span>
<span class="line-added"> 75     }</span>
<span class="line-added"> 76 </span>
<span class="line-added"> 77     public static class Version2 implements Version {</span>
<span class="line-added"> 78         private final int major;</span>
<span class="line-added"> 79         private final int minor;</span>
<span class="line-added"> 80 </span>
<span class="line-added"> 81         public Version2(int major, int minor) {</span>
<span class="line-added"> 82             this.major = major;</span>
<span class="line-added"> 83             this.minor = minor;</span>
<span class="line-added"> 84         }</span>
<span class="line-added"> 85 </span>
<span class="line-added"> 86         @Override</span>
<span class="line-added"> 87         public boolean isLessThan(Version other) {</span>
<span class="line-added"> 88             if (other.getClass() == Version3.class) {</span>
<span class="line-added"> 89                 return true;</span>
<span class="line-added"> 90             }</span>
<span class="line-added"> 91             Version2 o = (Version2) other;</span>
<span class="line-added"> 92             if (this.major &lt; o.major) {</span>
<span class="line-added"> 93                 return true;</span>
<span class="line-added"> 94             }</span>
<span class="line-added"> 95             if (this.major == o.major &amp;&amp; this.minor &lt; o.minor) {</span>
<span class="line-added"> 96                 return true;</span>
<span class="line-added"> 97             }</span>
<span class="line-added"> 98             return false;</span>
<span class="line-added"> 99         }</span>
<span class="line-added">100 </span>
<span class="line-added">101         @Override</span>
<span class="line-added">102         public String toString() {</span>
<span class="line-added">103             if (major &gt;= 19) {</span>
<span class="line-added">104                 return String.format(&quot;%d-b%02d&quot;, major, minor);</span>
<span class="line-added">105             } else {</span>
<span class="line-added">106                 return String.format(&quot;%d.%d&quot;, major, minor);</span>
<span class="line-added">107             }</span>
<span class="line-added">108         }</span>
<span class="line-added">109     }</span>
<span class="line-added">110 </span>
<span class="line-added">111     public static class Version3 implements Version {</span>
<span class="line-added">112         private final int major;</span>
<span class="line-added">113         private final int minor;</span>
<span class="line-added">114         private final int build;</span>
<span class="line-added">115 </span>
<span class="line-added">116         public Version3(int major, int minor, int build) {</span>
<span class="line-added">117             this.major = major;</span>
<span class="line-added">118             this.minor = minor;</span>
<span class="line-added">119             this.build = build;</span>
<span class="line-added">120         }</span>
<span class="line-added">121 </span>
<span class="line-added">122         @Override</span>
<span class="line-added">123         public boolean isLessThan(Version other) {</span>
<span class="line-added">124             if (other.getClass() == Version2.class) {</span>
<span class="line-added">125                 return false;</span>
<span class="line-added">126             }</span>
<span class="line-added">127             Version3 o = (Version3) other;</span>
<span class="line-added">128             if (this.major &lt; o.major) {</span>
<span class="line-added">129                 return true;</span>
<span class="line-added">130             }</span>
<span class="line-added">131             if (this.major == o.major) {</span>
<span class="line-added">132                 if (this.minor &lt; o.minor) {</span>
<span class="line-added">133                     return true;</span>
<span class="line-added">134                 }</span>
<span class="line-added">135                 if (this.minor == o.minor &amp;&amp; this.build &lt; o.build) {</span>
<span class="line-added">136                     return true;</span>
<span class="line-added">137                 }</span>
<span class="line-added">138             }</span>
<span class="line-added">139             return false;</span>
<span class="line-added">140         }</span>
<span class="line-added">141 </span>
<span class="line-added">142         @Override</span>
<span class="line-added">143         public String toString() {</span>
<span class="line-added">144             return String.format(&quot;%d.%d-b%02d&quot;, major, minor, build);</span>
<span class="line-added">145         }</span>
<span class="line-added">146     }</span>
<span class="line-added">147 </span>
<span class="line-added">148     private void failVersionCheck(boolean exit, String reason, Object... args) {</span>
149         Formatter errorMessage = new Formatter().format(reason, args);
<span class="line-modified">150         String javaHome = props.get(&quot;java.home&quot;);</span>
<span class="line-modified">151         String vmName = props.get(&quot;java.vm.name&quot;);</span>
152         errorMessage.format(&quot;Set the JVMCI_VERSION_CHECK environment variable to \&quot;ignore\&quot; to suppress &quot;);
153         errorMessage.format(&quot;this error or to \&quot;warn\&quot; to emit a warning and continue execution.%n&quot;);
154         errorMessage.format(&quot;Currently used Java home directory is %s.%n&quot;, javaHome);
155         errorMessage.format(&quot;Currently used VM configuration is: %s%n&quot;, vmName);
<span class="line-modified">156         if (javaSpecVersion.compareTo(&quot;1.9&quot;) &lt; 0) {</span>
<span class="line-modified">157             errorMessage.format(&quot;Download the latest JVMCI JDK 8 from https://github.com/graalvm/openjdk8-jvmci-builder/releases&quot;);</span>
158         } else {
<span class="line-modified">159             if (javaSpecVersion.compareTo(&quot;11&quot;) == 0 &amp;&amp; vmVersion.contains(&quot;-jvmci-&quot;)) {</span>
<span class="line-added">160                 errorMessage.format(&quot;Download the latest Labs OpenJDK 11 from https://github.com/graalvm/labs-openjdk-11/releases&quot;);</span>
<span class="line-added">161             } else {</span>
<span class="line-added">162                 errorMessage.format(&quot;Download JDK 11 or later.&quot;);</span>
<span class="line-added">163             }</span>
164         }
165         String value = System.getenv(&quot;JVMCI_VERSION_CHECK&quot;);
166         if (&quot;warn&quot;.equals(value)) {
167             System.err.println(errorMessage.toString());
168         } else if (&quot;ignore&quot;.equals(value)) {
169             return;
170         } else if (exit) {
171             System.err.println(errorMessage.toString());
172             System.exit(-1);
173         } else {
174             throw new InternalError(errorMessage.toString());
175         }
176     }
177 
<span class="line-modified">178     private final String javaSpecVersion;</span>
<span class="line-modified">179     private final String vmVersion;</span>
<span class="line-modified">180     private final Map&lt;String, String&gt; props;</span>
<span class="line-modified">181 </span>
<span class="line-added">182     private JVMCIVersionCheck(Map&lt;String, String&gt; props, String javaSpecVersion, String vmVersion) {</span>
<span class="line-added">183         this.props = props;</span>
<span class="line-added">184         this.javaSpecVersion = javaSpecVersion;</span>
<span class="line-added">185         this.vmVersion = vmVersion;</span>
<span class="line-added">186     }</span>
<span class="line-added">187 </span>
<span class="line-added">188     static void check(Map&lt;String, String&gt; props, boolean exitOnFailure) {</span>
<span class="line-added">189         JVMCIVersionCheck checker = new JVMCIVersionCheck(props, props.get(&quot;java.specification.version&quot;), props.get(&quot;java.vm.version&quot;));</span>
<span class="line-added">190         checker.run(exitOnFailure, JVMCI_MIN_VERSION);</span>
<span class="line-added">191     }</span>
<span class="line-added">192 </span>
<span class="line-added">193     /**</span>
<span class="line-added">194      * Entry point for testing.</span>
<span class="line-added">195      */</span>
<span class="line-added">196     public static void check(Map&lt;String, String&gt; props,</span>
<span class="line-added">197                     Version minVersion,</span>
<span class="line-added">198                     String javaSpecVersion,</span>
<span class="line-added">199                     String javaVmVersion, boolean exitOnFailure) {</span>
<span class="line-added">200         JVMCIVersionCheck checker = new JVMCIVersionCheck(props, javaSpecVersion, javaVmVersion);</span>
<span class="line-added">201         checker.run(exitOnFailure, minVersion);</span>
<span class="line-added">202     }</span>
<span class="line-added">203 </span>
<span class="line-added">204     private void run(boolean exitOnFailure, Version minVersion) {</span>
205         if (javaSpecVersion.compareTo(&quot;1.9&quot;) &lt; 0) {
<span class="line-modified">206             Version v = Version.parse(vmVersion);</span>
<span class="line-modified">207             if (v != null) {</span>
<span class="line-modified">208                 if (v.isLessThan(minVersion)) {</span>
<span class="line-modified">209                     failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal: %s &lt; %s.%n&quot;, v, minVersion);</span>




























210                 }
<span class="line-added">211                 return;</span>
212             }
213             failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal.%n&quot; +
214                             &quot;Cannot read JVMCI version from java.vm.version property: %s.%n&quot;, vmVersion);
215         } else if (javaSpecVersion.compareTo(&quot;11&quot;) &lt; 0) {
216             failVersionCheck(exitOnFailure, &quot;Graal is not compatible with the JVMCI API in JDK 9 and 10.%n&quot;);
217         } else {
218             if (vmVersion.contains(&quot;SNAPSHOT&quot;)) {
219                 return;
220             }
221             if (vmVersion.contains(&quot;internal&quot;)) {
222                 // Allow local builds
223                 return;
224             }
<span class="line-modified">225             if (vmVersion.contains(&quot;-jvmci-&quot;)) {</span>
<span class="line-modified">226                 // A &quot;labsjdk&quot;</span>
<span class="line-modified">227                 Version v = Version.parse(vmVersion);</span>
<span class="line-modified">228                 if (v != null) {</span>
<span class="line-modified">229                     if (v.isLessThan(minVersion)) {</span>
<span class="line-modified">230                         failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal: %s &lt; %s.%n&quot;, v, minVersion);</span>

231                     }


232                     return;
233                 }
<span class="line-added">234                 failVersionCheck(exitOnFailure, &quot;The VM does not support the minimum JVMCI API version required by Graal.%n&quot; +</span>
<span class="line-added">235                                 &quot;Cannot read JVMCI version from java.vm.version property: %s.%n&quot;, vmVersion);</span>
236             } else {
237                 // Graal is compatible with all JDK versions as of 11 GA.
238             }
239         }
240     }
241 
242     /**
243      * Command line interface for performing the check.
244      */
245     public static void main(String[] args) {
<span class="line-modified">246         Properties sprops = System.getProperties();</span>
<span class="line-added">247         Map&lt;String, String&gt; props = new HashMap&lt;&gt;(sprops.size());</span>
<span class="line-added">248         for (String name : sprops.stringPropertyNames()) {</span>
<span class="line-added">249             props.put(name, sprops.getProperty(name));</span>
<span class="line-added">250         }</span>
<span class="line-added">251         check(props, true);</span>
252     }
253 }
</pre>
</td>
</tr>
</table>
<center><a href="IsGraalPredicate.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="SymbolicSnippetEncoder.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>