<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.replacements.amd64/src/org/graalvm/compiler/replacements/amd64/AMD64GraphBuilderPlugins.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 package org.graalvm.compiler.replacements.amd64;
 26 
 27 import static org.graalvm.compiler.replacements.StandardGraphBuilderPlugins.registerPlatformSpecificUnsafePlugins;
 28 import static org.graalvm.compiler.replacements.nodes.BinaryMathIntrinsicNode.BinaryOperation.POW;
 29 import static org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation.COS;
 30 import static org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation.EXP;
 31 import static org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation.LOG;
 32 import static org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation.LOG10;
 33 import static org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation.SIN;
 34 import static org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation.TAN;
<a name="2" id="anc2"></a><span class="line-removed"> 35 import static org.graalvm.compiler.serviceprovider.JavaVersionUtil.JAVA_SPECIFICATION_VERSION;</span>
<span class="line-removed"> 36 import static org.graalvm.compiler.serviceprovider.JavaVersionUtil.Java11OrEarlier;</span>
<span class="line-removed"> 37 import static org.graalvm.compiler.serviceprovider.JavaVersionUtil.Java8OrEarlier;</span>
 38 
 39 import java.util.Arrays;
 40 
<a name="3" id="anc3"></a><span class="line-removed"> 41 import org.graalvm.compiler.bytecode.BytecodeProvider;</span>
 42 import org.graalvm.compiler.lir.amd64.AMD64ArithmeticLIRGeneratorTool.RoundingMode;
 43 import org.graalvm.compiler.nodes.PauseNode;
 44 import org.graalvm.compiler.nodes.ValueNode;
 45 import org.graalvm.compiler.nodes.graphbuilderconf.GraphBuilderConfiguration.Plugins;
 46 import org.graalvm.compiler.nodes.graphbuilderconf.GraphBuilderContext;
 47 import org.graalvm.compiler.nodes.graphbuilderconf.InvocationPlugin;
 48 import org.graalvm.compiler.nodes.graphbuilderconf.InvocationPlugin.Receiver;
 49 import org.graalvm.compiler.nodes.graphbuilderconf.InvocationPlugins;
 50 import org.graalvm.compiler.nodes.graphbuilderconf.InvocationPlugins.Registration;
 51 import org.graalvm.compiler.nodes.java.AtomicReadAndAddNode;
 52 import org.graalvm.compiler.nodes.java.AtomicReadAndWriteNode;
 53 import org.graalvm.compiler.nodes.memory.address.OffsetAddressNode;
<a name="4" id="anc4"></a>
 54 import org.graalvm.compiler.replacements.ArraysSubstitutions;
<a name="5" id="anc5"></a><span class="line-removed"> 55 import org.graalvm.compiler.replacements.IntegerSubstitutions;</span>
<span class="line-removed"> 56 import org.graalvm.compiler.replacements.LongSubstitutions;</span>
 57 import org.graalvm.compiler.replacements.StandardGraphBuilderPlugins.UnsafeAccessPlugin;
 58 import org.graalvm.compiler.replacements.StandardGraphBuilderPlugins.UnsafeGetPlugin;
 59 import org.graalvm.compiler.replacements.StandardGraphBuilderPlugins.UnsafePutPlugin;
<a name="6" id="anc6"></a>
 60 import org.graalvm.compiler.replacements.nodes.BinaryMathIntrinsicNode;
 61 import org.graalvm.compiler.replacements.nodes.BinaryMathIntrinsicNode.BinaryOperation;
 62 import org.graalvm.compiler.replacements.nodes.BitCountNode;
<a name="7" id="anc7"></a>
 63 import org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode;
 64 import org.graalvm.compiler.replacements.nodes.UnaryMathIntrinsicNode.UnaryOperation;
<a name="8" id="anc8"></a>
 65 
 66 import jdk.vm.ci.amd64.AMD64;
 67 import jdk.vm.ci.amd64.AMD64.CPUFeature;
<a name="9" id="anc9"></a>
 68 import jdk.vm.ci.meta.JavaKind;
 69 import jdk.vm.ci.meta.ResolvedJavaMethod;
 70 import sun.misc.Unsafe;
 71 
<a name="10" id="anc10"></a><span class="line-modified"> 72 public class AMD64GraphBuilderPlugins {</span>





 73 
<a name="11" id="anc11"></a><span class="line-modified"> 74     public static void register(Plugins plugins, BytecodeProvider replacementsBytecodeProvider, AMD64 arch, boolean explicitUnsafeNullChecks) {</span>


 75         InvocationPlugins invocationPlugins = plugins.getInvocationPlugins();
 76         invocationPlugins.defer(new Runnable() {
 77             @Override
 78             public void run() {
 79                 registerThreadPlugins(invocationPlugins, arch);
<a name="12" id="anc12"></a><span class="line-modified"> 80                 registerIntegerLongPlugins(invocationPlugins, IntegerSubstitutions.class, JavaKind.Int, arch, replacementsBytecodeProvider);</span>
<span class="line-modified"> 81                 registerIntegerLongPlugins(invocationPlugins, LongSubstitutions.class, JavaKind.Long, arch, replacementsBytecodeProvider);</span>
<span class="line-modified"> 82                 registerPlatformSpecificUnsafePlugins(invocationPlugins, replacementsBytecodeProvider, explicitUnsafeNullChecks,</span>
 83                                 new JavaKind[]{JavaKind.Int, JavaKind.Long, JavaKind.Object, JavaKind.Boolean, JavaKind.Byte, JavaKind.Short, JavaKind.Char, JavaKind.Float, JavaKind.Double});
<a name="13" id="anc13"></a><span class="line-modified"> 84                 registerUnsafePlugins(invocationPlugins, replacementsBytecodeProvider, explicitUnsafeNullChecks);</span>
<span class="line-modified"> 85                 registerStringPlugins(invocationPlugins, replacementsBytecodeProvider);</span>
<span class="line-modified"> 86                 registerStringLatin1Plugins(invocationPlugins, replacementsBytecodeProvider);</span>
<span class="line-modified"> 87                 registerStringUTF16Plugins(invocationPlugins, replacementsBytecodeProvider);</span>
<span class="line-modified"> 88                 registerMathPlugins(invocationPlugins, arch, replacementsBytecodeProvider);</span>
<span class="line-modified"> 89                 registerArraysEqualsPlugins(invocationPlugins, replacementsBytecodeProvider);</span>


 90             }
 91         });
 92     }
 93 
 94     private static void registerThreadPlugins(InvocationPlugins plugins, AMD64 arch) {
<a name="14" id="anc14"></a><span class="line-modified"> 95         if (!Java8OrEarlier) {</span>
 96             // Pause instruction introduced with SSE2
<a name="15" id="anc15"></a><span class="line-modified"> 97             if (arch.getFeatures().contains(AMD64.CPUFeature.SSE2)) {</span>
<span class="line-modified"> 98                 Registration r = new Registration(plugins, Thread.class);</span>
<span class="line-modified"> 99                 r.register0(&quot;onSpinWait&quot;, new InvocationPlugin() {</span>
<span class="line-removed">100                     @Override</span>
<span class="line-removed">101                     public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver) {</span>
<span class="line-removed">102                         b.append(new PauseNode());</span>
<span class="line-removed">103                         return true;</span>
<span class="line-removed">104                     }</span>
<span class="line-removed">105                 });</span>
<span class="line-removed">106             }</span>
<span class="line-removed">107         }</span>
<span class="line-removed">108     }</span>
<span class="line-removed">109 </span>
<span class="line-removed">110     private static void registerIntegerLongPlugins(InvocationPlugins plugins, Class&lt;?&gt; substituteDeclaringClass, JavaKind kind, AMD64 arch, BytecodeProvider bytecodeProvider) {</span>
<span class="line-removed">111         Class&lt;?&gt; declaringClass = kind.toBoxedJavaClass();</span>
<span class="line-removed">112         Class&lt;?&gt; type = kind.toJavaClass();</span>
<span class="line-removed">113         Registration r = new Registration(plugins, declaringClass, bytecodeProvider);</span>
<span class="line-removed">114         if (arch.getFeatures().contains(AMD64.CPUFeature.LZCNT) &amp;&amp; arch.getFlags().contains(AMD64.Flag.UseCountLeadingZerosInstruction)) {</span>
<span class="line-removed">115             r.register1(&quot;numberOfLeadingZeros&quot;, type, new InvocationPlugin() {</span>
<span class="line-removed">116                 @Override</span>
<span class="line-removed">117                 public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode value) {</span>
<span class="line-removed">118                     ValueNode folded = AMD64CountLeadingZerosNode.tryFold(value);</span>
<span class="line-removed">119                     if (folded != null) {</span>
<span class="line-removed">120                         b.addPush(JavaKind.Int, folded);</span>
<span class="line-removed">121                     } else {</span>
<span class="line-removed">122                         b.addPush(JavaKind.Int, new AMD64CountLeadingZerosNode(value));</span>
<span class="line-removed">123                     }</span>
<span class="line-removed">124                     return true;</span>
<span class="line-removed">125                 }</span>
<span class="line-removed">126             });</span>
<span class="line-removed">127         } else {</span>
<span class="line-removed">128             r.registerMethodSubstitution(substituteDeclaringClass, &quot;numberOfLeadingZeros&quot;, type);</span>
<span class="line-removed">129         }</span>
<span class="line-removed">130         if (arch.getFeatures().contains(AMD64.CPUFeature.BMI1) &amp;&amp; arch.getFlags().contains(AMD64.Flag.UseCountTrailingZerosInstruction)) {</span>
<span class="line-removed">131             r.register1(&quot;numberOfTrailingZeros&quot;, type, new InvocationPlugin() {</span>
132                 @Override
<a name="16" id="anc16"></a><span class="line-modified">133                 public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode value) {</span>
<span class="line-modified">134                     ValueNode folded = AMD64CountTrailingZerosNode.tryFold(value);</span>
<span class="line-removed">135                     if (folded != null) {</span>
<span class="line-removed">136                         b.addPush(JavaKind.Int, folded);</span>
<span class="line-removed">137                     } else {</span>
<span class="line-removed">138                         b.addPush(JavaKind.Int, new AMD64CountTrailingZerosNode(value));</span>
<span class="line-removed">139                     }</span>
140                     return true;
141                 }
142             });
<a name="17" id="anc17"></a><span class="line-removed">143         } else {</span>
<span class="line-removed">144             r.registerMethodSubstitution(substituteDeclaringClass, &quot;numberOfTrailingZeros&quot;, type);</span>
145         }
<a name="18" id="anc18"></a>
146 
<a name="19" id="anc19"></a><span class="line-modified">147         if (arch.getFeatures().contains(AMD64.CPUFeature.POPCNT)) {</span>
<span class="line-modified">148             r.register1(&quot;bitCount&quot;, type, new InvocationPlugin() {</span>
<span class="line-modified">149                 @Override</span>
<span class="line-modified">150                 public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode value) {</span>
<span class="line-modified">151                     b.push(JavaKind.Int, b.append(new BitCountNode(value).canonical(null)));</span>
<span class="line-modified">152                     return true;</span>
<span class="line-modified">153                 }</span>
<span class="line-modified">154             });</span>
<span class="line-modified">155         }</span>






156     }
157 
<a name="20" id="anc20"></a><span class="line-modified">158     private static void registerMathPlugins(InvocationPlugins plugins, AMD64 arch, BytecodeProvider bytecodeProvider) {</span>
<span class="line-modified">159         Registration r = new Registration(plugins, Math.class, bytecodeProvider);</span>
160         registerUnaryMath(r, &quot;log&quot;, LOG);
161         registerUnaryMath(r, &quot;log10&quot;, LOG10);
162         registerUnaryMath(r, &quot;exp&quot;, EXP);
163         registerBinaryMath(r, &quot;pow&quot;, POW);
164         registerUnaryMath(r, &quot;sin&quot;, SIN);
165         registerUnaryMath(r, &quot;cos&quot;, COS);
166         registerUnaryMath(r, &quot;tan&quot;, TAN);
167 
<a name="21" id="anc21"></a><span class="line-modified">168         if (arch.getFeatures().contains(CPUFeature.SSE4_1)) {</span>
<span class="line-modified">169             registerRound(r, &quot;rint&quot;, RoundingMode.NEAREST);</span>
<span class="line-modified">170             registerRound(r, &quot;ceil&quot;, RoundingMode.UP);</span>
<span class="line-modified">171             registerRound(r, &quot;floor&quot;, RoundingMode.DOWN);</span>



172         }
173     }
174 
<a name="22" id="anc22"></a>


































175     private static void registerUnaryMath(Registration r, String name, UnaryOperation operation) {
176         r.register1(name, Double.TYPE, new InvocationPlugin() {
177             @Override
178             public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode value) {
179                 b.push(JavaKind.Double, b.append(UnaryMathIntrinsicNode.create(value, operation)));
180                 return true;
181             }
182         });
183     }
184 
185     private static void registerBinaryMath(Registration r, String name, BinaryOperation operation) {
186         r.register2(name, Double.TYPE, Double.TYPE, new InvocationPlugin() {
187             @Override
188             public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode x, ValueNode y) {
189                 b.push(JavaKind.Double, b.append(BinaryMathIntrinsicNode.create(x, y, operation)));
190                 return true;
191             }
192         });
193     }
194 
<a name="23" id="anc23"></a><span class="line-modified">195     private static void registerRound(Registration r, String name, RoundingMode mode) {</span>
<span class="line-modified">196         r.register1(name, Double.TYPE, new InvocationPlugin() {</span>
197             @Override
198             public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode arg) {
199                 b.push(JavaKind.Double, b.append(new AMD64RoundNode(arg, mode)));
200                 return true;
201             }
202         });
203     }
204 
<a name="24" id="anc24"></a><span class="line-modified">205     private static void registerStringPlugins(InvocationPlugins plugins, BytecodeProvider replacementsBytecodeProvider) {</span>
<span class="line-modified">206         if (Java8OrEarlier) {</span>
207             Registration r;
<a name="25" id="anc25"></a><span class="line-modified">208             r = new Registration(plugins, String.class, replacementsBytecodeProvider);</span>
209             r.setAllowOverwrite(true);
210             r.registerMethodSubstitution(AMD64StringSubstitutions.class, &quot;indexOf&quot;, char[].class, int.class,
211                             int.class, char[].class, int.class, int.class, int.class);
212             r.registerMethodSubstitution(AMD64StringSubstitutions.class, &quot;indexOf&quot;, Receiver.class, int.class, int.class);
213             r.registerMethodSubstitution(AMD64StringSubstitutions.class, &quot;compareTo&quot;, Receiver.class, String.class);
214         }
215     }
216 
<a name="26" id="anc26"></a><span class="line-modified">217     private static void registerStringLatin1Plugins(InvocationPlugins plugins, BytecodeProvider replacementsBytecodeProvider) {</span>
<span class="line-modified">218         if (JAVA_SPECIFICATION_VERSION &gt;= 9) {</span>
<span class="line-modified">219             Registration r = new Registration(plugins, &quot;java.lang.StringLatin1&quot;, replacementsBytecodeProvider);</span>
<span class="line-modified">220             r.setAllowOverwrite(true);</span>
<span class="line-modified">221             r.registerMethodSubstitution(AMD64StringLatin1Substitutions.class, &quot;compareTo&quot;, byte[].class, byte[].class);</span>
<span class="line-modified">222             r.registerMethodSubstitution(AMD64StringLatin1Substitutions.class, &quot;compareToUTF16&quot;, byte[].class, byte[].class);</span>
<span class="line-modified">223             r.registerMethodSubstitution(AMD64StringLatin1Substitutions.class, &quot;inflate&quot;, byte[].class, int.class, char[].class, int.class, int.class);</span>
<span class="line-modified">224             r.registerMethodSubstitution(AMD64StringLatin1Substitutions.class, &quot;inflate&quot;, byte[].class, int.class, byte[].class, int.class, int.class);</span>
<span class="line-modified">225             r.registerMethodSubstitution(AMD64StringLatin1Substitutions.class, &quot;indexOf&quot;, byte[].class, int.class, int.class);</span>
<span class="line-removed">226             r.registerMethodSubstitution(AMD64StringLatin1Substitutions.class, &quot;indexOf&quot;, byte[].class, int.class, byte[].class, int.class, int.class);</span>
<span class="line-removed">227         }</span>
228     }
229 
<a name="27" id="anc27"></a><span class="line-modified">230     private static void registerStringUTF16Plugins(InvocationPlugins plugins, BytecodeProvider replacementsBytecodeProvider) {</span>
<span class="line-modified">231         if (JAVA_SPECIFICATION_VERSION &gt;= 9) {</span>
<span class="line-modified">232             Registration r = new Registration(plugins, &quot;java.lang.StringUTF16&quot;, replacementsBytecodeProvider);</span>
<span class="line-modified">233             r.setAllowOverwrite(true);</span>
<span class="line-modified">234             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;compareTo&quot;, byte[].class, byte[].class);</span>
<span class="line-modified">235             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;compareToLatin1&quot;, byte[].class, byte[].class);</span>
<span class="line-modified">236             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;compress&quot;, char[].class, int.class, byte[].class, int.class, int.class);</span>
<span class="line-modified">237             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;compress&quot;, byte[].class, int.class, byte[].class, int.class, int.class);</span>
<span class="line-modified">238             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;indexOfCharUnsafe&quot;, byte[].class, int.class, int.class, int.class);</span>
<span class="line-modified">239             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;indexOfUnsafe&quot;, byte[].class, int.class, byte[].class, int.class, int.class);</span>
<span class="line-removed">240             r.registerMethodSubstitution(AMD64StringUTF16Substitutions.class, &quot;indexOfLatin1Unsafe&quot;, byte[].class, int.class, byte[].class, int.class, int.class);</span>
<span class="line-removed">241         }</span>
242     }
243 
<a name="28" id="anc28"></a><span class="line-modified">244     private static void registerUnsafePlugins(InvocationPlugins plugins, BytecodeProvider replacementsBytecodeProvider, boolean explicitUnsafeNullChecks) {</span>
245         registerUnsafePlugins(new Registration(plugins, Unsafe.class), explicitUnsafeNullChecks, new JavaKind[]{JavaKind.Int, JavaKind.Long, JavaKind.Object}, true);
<a name="29" id="anc29"></a><span class="line-modified">246         if (!Java8OrEarlier) {</span>
<span class="line-modified">247             registerUnsafePlugins(new Registration(plugins, &quot;jdk.internal.misc.Unsafe&quot;, replacementsBytecodeProvider), explicitUnsafeNullChecks,</span>
<span class="line-modified">248                             new JavaKind[]{JavaKind.Boolean, JavaKind.Byte, JavaKind.Char, JavaKind.Short, JavaKind.Int, JavaKind.Long, JavaKind.Object}, Java11OrEarlier);</span>

249         }
250     }
251 
252     private static void registerUnsafePlugins(Registration r, boolean explicitUnsafeNullChecks, JavaKind[] unsafeJavaKinds, boolean java11OrEarlier) {
253         for (JavaKind kind : unsafeJavaKinds) {
254             Class&lt;?&gt; javaClass = kind == JavaKind.Object ? Object.class : kind.toJavaClass();
255             String kindName = (kind == JavaKind.Object &amp;&amp; !java11OrEarlier) ? &quot;Reference&quot; : kind.name();
256             r.register4(&quot;getAndSet&quot; + kindName, Receiver.class, Object.class, long.class, javaClass, new UnsafeAccessPlugin(kind, explicitUnsafeNullChecks) {
257                 @Override
258                 public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver unsafe, ValueNode object, ValueNode offset, ValueNode value) {
259                     // Emits a null-check for the otherwise unused receiver
260                     unsafe.get();
261                     createUnsafeAccess(object, b, (obj, loc) -&gt; new AtomicReadAndWriteNode(obj, offset, value, kind, loc));
262                     return true;
263                 }
264             });
265             if (kind != JavaKind.Boolean &amp;&amp; kind.isNumericInteger()) {
266                 r.register4(&quot;getAndAdd&quot; + kindName, Receiver.class, Object.class, long.class, javaClass, new UnsafeAccessPlugin(kind, explicitUnsafeNullChecks) {
267                     @Override
268                     public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver unsafe, ValueNode object, ValueNode offset, ValueNode delta) {
269                         // Emits a null-check for the otherwise unused receiver
270                         unsafe.get();
271                         createUnsafeAccess(object, b, (obj, loc) -&gt; new AtomicReadAndAddNode(b.add(new OffsetAddressNode(obj, offset)), delta, kind, loc));
272                         return true;
273                     }
274                 });
275             }
276         }
277 
278         for (JavaKind kind : new JavaKind[]{JavaKind.Char, JavaKind.Short, JavaKind.Int, JavaKind.Long}) {
279             Class&lt;?&gt; javaClass = kind.toJavaClass();
280             r.registerOptional3(&quot;get&quot; + kind.name() + &quot;Unaligned&quot;, Receiver.class, Object.class, long.class, new UnsafeGetPlugin(kind, explicitUnsafeNullChecks));
281             r.registerOptional4(&quot;put&quot; + kind.name() + &quot;Unaligned&quot;, Receiver.class, Object.class, long.class, javaClass, new UnsafePutPlugin(kind, explicitUnsafeNullChecks));
282         }
283     }
284 
<a name="30" id="anc30"></a><span class="line-modified">285     private static void registerArraysEqualsPlugins(InvocationPlugins plugins, BytecodeProvider bytecodeProvider) {</span>
<span class="line-modified">286         Registration r = new Registration(plugins, Arrays.class, bytecodeProvider);</span>
287         r.registerMethodSubstitution(ArraysSubstitutions.class, &quot;equals&quot;, float[].class, float[].class);
288         r.registerMethodSubstitution(ArraysSubstitutions.class, &quot;equals&quot;, double[].class, double[].class);
289     }
290 }
<a name="31" id="anc31"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="31" type="hidden" />
</body>
</html>