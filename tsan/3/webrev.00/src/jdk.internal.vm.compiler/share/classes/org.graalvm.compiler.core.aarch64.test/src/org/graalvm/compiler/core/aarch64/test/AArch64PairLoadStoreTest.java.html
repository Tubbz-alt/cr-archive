<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.core.aarch64.test/src/org/graalvm/compiler/core/aarch64/test/AArch64PairLoadStoreTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.
 3  * Copyright (c) 2019, Arm Limited and affiliates. All rights reserved.
 4  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 5  *
 6  * This code is free software; you can redistribute it and/or modify it
 7  * under the terms of the GNU General Public License version 2 only, as
 8  * published by the Free Software Foundation.
 9  *
10  * This code is distributed in the hope that it will be useful, but WITHOUT
11  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
12  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
13  * version 2 for more details (a copy is included in the LICENSE file that
14  * accompanied this code).
15  *
16  * You should have received a copy of the GNU General Public License version
17  * 2 along with this work; if not, write to the Free Software Foundation,
18  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
19  *
20  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
21  * or visit www.oracle.com if you need additional information or have any
22  * questions.
23  */
24 
25 
26 
27 package org.graalvm.compiler.core.aarch64.test;
28 
29 import jdk.vm.ci.aarch64.AArch64;
30 import jdk.vm.ci.runtime.JVMCI;
31 import org.graalvm.compiler.core.test.GraalCompilerTest;
32 import org.junit.Before;
33 import org.junit.Test;
34 
35 import static org.junit.Assume.assumeTrue;
36 
37 public class AArch64PairLoadStoreTest extends GraalCompilerTest {
38 
39     @Before
40     public void checkAArch64() {
41         assumeTrue(&quot;skipping AArch64 specific test&quot;, JVMCI.getRuntime().getHostJVMCIBackend().getTarget().arch instanceof AArch64);
42     }
43 
44     public static long parameterSpill(long v1, long v2, long v3, long v4, long v5, long v6, long v7, long v8, long v9, long v10) {
45         long value0 = v1 + v2 + v3 + v4 + v5 + v6 + v7 + v8;
46         long value1 = v9 + v10;
47         return value0 + value1;
48     }
49 
50     @Test
51     public void testParameterSpill() {
52         test(&quot;parameterSpill&quot;, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L);
53     }
54 
55     static class A {
56         static String a = &quot;adsaf&quot;;
57 
58         static String b = &quot;asfgsfd&quot;;
59 
60         static int c;
61 
62         static int d;
63     }
64 
65     public static int pairLoadStaticFields() {
66         if (A.a == null || A.a != A.b) {
67             return A.b.length();
68         }
69         return A.a.length();
70     }
71 
72     @Test
73     public void testPairLoadStaticFields() {
74         test(&quot;pairLoadStaticFields&quot;);
75     }
76 
77     public static int pairStoreStaticFields(int m, int n) {
78         A.c = m;
79         A.d = n;
80         return A.c + A.d;
81     }
82 
83     @Test
84     public void testPairStoreStaticFields() {
85         test(&quot;pairStoreStaticFields&quot;, 1, 2);
86     }
87 }
    </pre>
  </body>
</html>