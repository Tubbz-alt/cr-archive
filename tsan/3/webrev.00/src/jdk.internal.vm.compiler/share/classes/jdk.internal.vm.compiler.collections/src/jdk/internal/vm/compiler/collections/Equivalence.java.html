<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New src/jdk.internal.vm.compiler/share/classes/jdk.internal.vm.compiler.collections/src/jdk/internal/vm/compiler/collections/Equivalence.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 
 26 
 27 
 28 
 29 
 30 
 31 
 32 
 33 
 34 
 35 
 36 
 37 
 38 
 39 
 40 
 41 package jdk.internal.vm.compiler.collections;
 42 
 43 /**
 44  * Strategy for comparing two objects. Default predefined strategies are {@link #DEFAULT},
 45  * {@link #IDENTITY}, and {@link #IDENTITY_WITH_SYSTEM_HASHCODE}.
 46  *
 47  * @since 19.0
 48  */
 49 public abstract class Equivalence {
 50 
 51     /**
 52      * Default equivalence calling {@link #equals(Object)} to check equality and {@link #hashCode()}
 53      * for obtaining hash values. Do not change the logic of this class as it may be inlined in
 54      * other places.
 55      *
 56      * @since 19.0
 57      */
 58     public static final Equivalence DEFAULT = new Equivalence() {
 59 
 60         @Override
 61         public boolean equals(Object a, Object b) {
 62             return a.equals(b);
 63         }
 64 
 65         @Override
 66         public int hashCode(Object o) {
 67             return o.hashCode();
 68         }
 69     };
 70 
 71     /**
 72      * Identity equivalence using {@code ==} to check equality and {@link #hashCode()} for obtaining
 73      * hash values. Do not change the logic of this class as it may be inlined in other places.
 74      *
 75      * @since 19.0
 76      */
 77     public static final Equivalence IDENTITY = new Equivalence() {
 78 
 79         @Override
 80         public boolean equals(Object a, Object b) {
 81             return a == b;
 82         }
 83 
 84         @Override
 85         public int hashCode(Object o) {
 86             return o.hashCode();
 87         }
 88     };
 89 
 90     /**
 91      * Identity equivalence using {@code ==} to check equality and
 92      * {@link System#identityHashCode(Object)} for obtaining hash values. Do not change the logic of
 93      * this class as it may be inlined in other places.
 94      *
 95      * @since 19.0
 96      */
 97     public static final Equivalence IDENTITY_WITH_SYSTEM_HASHCODE = new Equivalence() {
 98 
 99         @Override
100         public boolean equals(Object a, Object b) {
101             return a == b;
102         }
103 
104         @Override
105         public int hashCode(Object o) {
106             return System.identityHashCode(o);
107         }
108     };
109 
110     /**
111      * Subclass for creating custom equivalence definitions.
112      *
113      * @since 19.0
114      */
115     protected Equivalence() {
116     }
117 
118     /**
119      * Returns {@code true} if the non-{@code null} arguments are equal to each other and
120      * {@code false} otherwise.
121      *
122      * @since 19.0
123      */
124     public abstract boolean equals(Object a, Object b);
125 
126     /**
127      * Returns the hash code of a non-{@code null} argument {@code o}.
128      *
129      * @since 19.0
130      */
131     public abstract int hashCode(Object o);
132 }
    </pre>
  </body>
</html>