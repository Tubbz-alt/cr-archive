<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.core.test/src/org/graalvm/compiler/core/test/ReassociateAndCanonicalTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
<a name="1" id="anc1"></a><span class="line-modified">  2  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 package org.graalvm.compiler.core.test;
 26 
<a name="2" id="anc2"></a>

 27 import org.graalvm.compiler.graph.IterableNodeType;
 28 import org.graalvm.compiler.graph.Node;
 29 import org.graalvm.compiler.nodes.StructuredGraph;
 30 import org.graalvm.compiler.nodes.StructuredGraph.AllowAssumptions;
<a name="3" id="anc3"></a><span class="line-modified"> 31 import org.junit.Test;</span>

 32 
 33 public class ReassociateAndCanonicalTest extends GraalCompilerTest {
 34 
 35     public static int rnd = (int) (Math.random() * 100);
 36 
 37     @Test
 38     public void test1() {
 39         test(&quot;test1Snippet&quot;, &quot;ref1Snippet&quot;);
 40     }
 41 
 42     public static int test1Snippet() {
 43         return 1 + (rnd + 2);
 44     }
 45 
 46     public static int ref1Snippet() {
 47         return rnd + 3;
 48     }
 49 
 50     @Test
 51     public void test2() {
 52         test(&quot;test2Snippet&quot;, &quot;ref2Snippet&quot;);
 53     }
 54 
 55     public static int test2Snippet() {
 56         return rnd + 3;
 57     }
 58 
 59     public static int ref2Snippet() {
 60         return (rnd + 2) + 1;
 61     }
 62 
 63     @Test
 64     public void test3() {
 65         test(&quot;test3Snippet&quot;, &quot;ref3Snippet&quot;);
 66     }
 67 
 68     public static int test3Snippet() {
 69         return rnd + 3;
 70     }
 71 
 72     public static int ref3Snippet() {
 73         return 1 + (2 + rnd);
 74     }
 75 
 76     @Test
 77     public void test4() {
 78         test(&quot;test4Snippet&quot;, &quot;ref4Snippet&quot;);
 79     }
 80 
 81     public static int test4Snippet() {
 82         return rnd + 3;
 83     }
 84 
 85     public static int ref4Snippet() {
 86         return (2 + rnd) + 1;
 87     }
 88 
 89     @Test
 90     public void test5() {
 91         test(&quot;test5Snippet&quot;, &quot;ref5Snippet&quot;);
 92     }
 93 
 94     public static int test5Snippet() {
 95         return -1 - rnd;
 96     }
 97 
 98     public static int ref5Snippet() {
 99         return 1 - (rnd + 2);
100     }
101 
102     @Test
103     public void test6() {
104         test(&quot;test6Snippet&quot;, &quot;ref6Snippet&quot;);
105     }
106 
107     public static int test6Snippet() {
108         return rnd + 1;
109     }
110 
111     public static int ref6Snippet() {
112         return (rnd + 2) - 1;
113     }
114 
115     @Test
116     public void test7() {
117         test(&quot;test7Snippet&quot;, &quot;ref7Snippet&quot;);
118     }
119 
120     public static int test7Snippet() {
121         return -1 - rnd;
122     }
123 
124     public static int ref7Snippet() {
125         return 1 - (2 + rnd);
126     }
127 
128     @Test
129     public void test8() {
130         test(&quot;test8Snippet&quot;, &quot;ref8Snippet&quot;);
131     }
132 
133     public static int test8Snippet() {
134         return rnd + 1;
135     }
136 
137     public static int ref8Snippet() {
138         return (2 + rnd) - 1;
139     }
140 
141     @Test
142     public void test9() {
143         test(&quot;test9Snippet&quot;, &quot;ref9Snippet&quot;);
144     }
145 
146     public static int test9Snippet() {
147         return rnd - 1;
148     }
149 
150     public static int ref9Snippet() {
151         return 1 + (rnd - 2);
152     }
153 
154     @Test
155     public void test10() {
156         test(&quot;test10Snippet&quot;, &quot;ref10Snippet&quot;);
157     }
158 
159     public static int test10Snippet() {
160         return rnd - 1;
161     }
162 
163     public static int ref10Snippet() {
164         return (rnd - 2) + 1;
165     }
166 
167     @Test
168     public void test11() {
169         test(&quot;test11Snippet&quot;, &quot;ref11Snippet&quot;);
170     }
171 
172     public static int test11Snippet() {
173         return -rnd + 3;
174     }
175 
176     public static int ref11Snippet() {
177         return 1 + (2 - rnd);
178     }
179 
180     @Test
181     public void test12() {
182         test(&quot;test12Snippet&quot;, &quot;ref12Snippet&quot;);
183     }
184 
185     public static int test12Snippet() {
186         return -rnd + 3;
187     }
188 
189     public static int ref12Snippet() {
190         return (2 - rnd) + 1;
191     }
192 
193     @Test
194     public void test13() {
195         test(&quot;test13Snippet&quot;, &quot;ref13Snippet&quot;);
196     }
197 
198     public static int test13Snippet() {
199         return -rnd + 3;
200     }
201 
202     public static int ref13Snippet() {
203         return 1 - (rnd - 2);
204     }
205 
206     @Test
207     public void test14() {
208         test(&quot;test14Snippet&quot;, &quot;ref14Snippet&quot;);
209     }
210 
211     public static int test14Snippet() {
212         return rnd - 3;
213     }
214 
215     public static int ref14Snippet() {
216         return (rnd - 2) - 1;
217     }
218 
219     @Test
220     public void test15() {
221         test(&quot;test15Snippet&quot;, &quot;ref15Snippet&quot;);
222     }
223 
224     public static int test15Snippet() {
225         return rnd + -1;
226     }
227 
228     public static int ref15Snippet() {
229         return 1 - (2 - rnd);
230     }
231 
232     @Test
233     public void test16() {
234         test(&quot;test16Snippet&quot;, &quot;ref16Snippet&quot;);
235     }
236 
237     public static int test16Snippet() {
238         return -rnd + 1;
239     }
240 
241     public static int ref16Snippet() {
242         return (2 - rnd) - 1;
243     }
244 
245     private &lt;T extends Node &amp; IterableNodeType&gt; void test(String test, String ref) {
246         StructuredGraph testGraph = parseEager(test, AllowAssumptions.NO);
<a name="4" id="anc4"></a><span class="line-modified">247         createCanonicalizerPhase().apply(testGraph, getProviders());</span>
248         StructuredGraph refGraph = parseEager(ref, AllowAssumptions.NO);
<a name="5" id="anc5"></a><span class="line-modified">249         createCanonicalizerPhase().apply(refGraph, getProviders());</span>
250         assertEquals(testGraph, refGraph);
251     }
252 }
<a name="6" id="anc6"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="6" type="hidden" />
</body>
</html>