<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.replacements.test/src/org/graalvm/compiler/replacements/test/ArrayStoreBytecodeExceptionTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../org.graalvm.compiler.replacements.sparc/src/org/graalvm/compiler/replacements/sparc/SPARCGraphBuilderPlugins.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ArraysSubstitutionsTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.replacements.test/src/org/graalvm/compiler/replacements/test/ArrayStoreBytecodeExceptionTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -31,43 +31,15 @@</span>
  import org.junit.runner.RunWith;
  import org.junit.runners.Parameterized;
  import org.junit.runners.Parameterized.Parameter;
  import org.junit.runners.Parameterized.Parameters;
  
<span class="udiff-line-removed">- import org.graalvm.compiler.nodes.ValueNode;</span>
<span class="udiff-line-removed">- import org.graalvm.compiler.nodes.extended.BytecodeExceptionNode.BytecodeExceptionKind;</span>
<span class="udiff-line-removed">- import org.graalvm.compiler.nodes.graphbuilderconf.GraphBuilderContext;</span>
<span class="udiff-line-removed">- import org.graalvm.compiler.nodes.graphbuilderconf.InvocationPlugin;</span>
<span class="udiff-line-removed">- import org.graalvm.compiler.nodes.graphbuilderconf.InvocationPlugins;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- import jdk.vm.ci.meta.ResolvedJavaMethod;</span>
<span class="udiff-line-removed">- </span>
  @RunWith(Parameterized.class)
  public class ArrayStoreBytecodeExceptionTest extends BytecodeExceptionTest {
  
<span class="udiff-line-modified-removed">-     private static class Exceptions {</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-removed">-         private static Object[] array = new Exceptions[1];</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-         public static void throwArrayStore(Object obj) {</span>
<span class="udiff-line-removed">-             array[0] = obj;</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     @Override</span>
<span class="udiff-line-removed">-     protected void registerInvocationPlugins(InvocationPlugins invocationPlugins) {</span>
<span class="udiff-line-removed">-         invocationPlugins.register(new InvocationPlugin() {</span>
<span class="udiff-line-removed">-             @Override</span>
<span class="udiff-line-removed">-             public boolean apply(GraphBuilderContext b, ResolvedJavaMethod targetMethod, Receiver receiver, ValueNode obj) {</span>
<span class="udiff-line-removed">-                 return throwBytecodeException(b, BytecodeExceptionKind.ARRAY_STORE, obj);</span>
<span class="udiff-line-removed">-             }</span>
<span class="udiff-line-removed">-         }, Exceptions.class, &quot;throwArrayStore&quot;, Object.class);</span>
<span class="udiff-line-removed">-         super.registerInvocationPlugins(invocationPlugins);</span>
<span class="udiff-line-removed">-     }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     public static void arrayStoreSnippet(Object obj) {</span>
<span class="udiff-line-removed">-         Exceptions.throwArrayStore(obj);</span>
<span class="udiff-line-modified-added">+     public static void arrayStoreSnippet(Object[] array, Object obj) {</span>
<span class="udiff-line-modified-added">+         array[0] = obj;</span>
      }
  
      @Parameter(0) public Object object;
      @Parameter(1) public Class&lt;?&gt; cls;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -82,8 +54,8 @@</span>
          return ret;
      }
  
      @Test
      public void testArrayStoreException() {
<span class="udiff-line-modified-removed">-         test(&quot;arrayStoreSnippet&quot;, object);</span>
<span class="udiff-line-modified-added">+         test(&quot;arrayStoreSnippet&quot;, new ArrayStoreBytecodeExceptionTest[1], object);</span>
      }
  }
</pre>
<center><a href="../../../../../../../org.graalvm.compiler.replacements.sparc/src/org/graalvm/compiler/replacements/sparc/SPARCGraphBuilderPlugins.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="ArraysSubstitutionsTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>