<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.graphio/src/org/graalvm/graphio/GraphOutput.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="DefaultGraphTypes.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="GraphProtocol.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.graphio/src/org/graalvm/graphio/GraphOutput.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 package org.graalvm.graphio;
 26 
 27 import java.io.Closeable;
 28 import java.io.IOException;
 29 import java.net.URI;
 30 import java.net.URISyntaxException;
 31 import java.nio.ByteBuffer;
 32 import java.nio.channels.WritableByteChannel;
 33 import java.util.Collections;
 34 import java.util.Map;
 35 
 36 /**
 37  * Instance of output to dump informations about a compiler compilations.
 38  *
 39  * @param &lt;G&gt; the type of graph this instance handles
 40  * @param &lt;M&gt; the type of methods this instance handles
<span class="line-modified"> 41  * @since 1.0 a {@link WritableByteChannel} is implemented</span>
 42  */
 43 public final class GraphOutput&lt;G, M&gt; implements Closeable, WritableByteChannel {
 44     private final GraphProtocol&lt;G, ?, ?, ?, ?, M, ?, ?, ?, ?&gt; printer;
 45 
 46     private GraphOutput(GraphProtocol&lt;G, ?, ?, ?, ?, M, ?, ?, ?, ?&gt; p) {
 47         this.printer = p;
 48     }
 49 
 50     /**
 51      * Creates new builder to configure a future instance of {@link GraphOutput}.
 52      *
 53      * @param &lt;G&gt; the type of the graph
 54      * @param &lt;N&gt; the type of the nodes
 55      * @param &lt;C&gt; the type of the node classes
 56      * @param &lt;P&gt; the type of the ports
 57      *
 58      * @param structure description of the structure of the graph
 59      * @return the builder to configure
 60      */
 61     public static &lt;G, N, C, P&gt; Builder&lt;G, N, ?&gt; newBuilder(GraphStructure&lt;G, N, C, P&gt; structure) {
</pre>
<hr />
<pre>
 95      * Ends compilation group.
 96      *
 97      * @throws IOException
 98      */
 99     public void endGroup() throws IOException {
100         printer.endGroup();
101     }
102 
103     /**
104      * Closes the output. Closes allocated resources and associated output channel.
105      */
106     @Override
107     public void close() {
108         printer.close();
109     }
110 
111     /**
112      * Checks if the {@link GraphOutput} is open.
113      *
114      * @return true if the {@link GraphOutput} is open.
<span class="line-modified">115      * @since 1.0</span>
116      */
117     @Override
118     public boolean isOpen() {
119         return printer.isOpen();
120     }
121 
122     /**
123      * Writes raw bytes into {@link GraphOutput}.
124      *
125      * @param src the bytes to write
126      * @return the number of bytes written, possibly zero
127      * @throws IOException in case of IO error
<span class="line-modified">128      * @since 1.0</span>
129      */
130     @Override
131     public int write(ByteBuffer src) throws IOException {
132         return printer.write(src);
133     }
134 
135     /**
136      * Builder to configure and create an instance of {@link GraphOutput}.
137      *
138      * @param &lt;G&gt; the type of the (root element of) graph
139      * @param &lt;N&gt; the type of the nodes
140      * @param &lt;M&gt; the type of the methods
141      */
142     public static final class Builder&lt;G, N, M&gt; {
143         private final GraphStructure&lt;G, N, ?, ?&gt; structure;
144         private ElementsAndLocations&lt;M, ?, ?&gt; elementsAndLocations;
145 
146         private GraphTypes types = DefaultGraphTypes.DEFAULT;
147         private GraphBlocks&lt;G, ?, N&gt; blocks = DefaultGraphBlocks.empty();
148         private int major = 4;
</pre>
<hr />
<pre>
161          * @param majorVersion by default 4, newer version may be known
162          * @param minorVersion usually 0
163          * @return this builder
164          * @since 0.28
165          */
166         public Builder&lt;G, N, M&gt; protocolVersion(int majorVersion, int minorVersion) {
167             this.major = majorVersion;
168             this.minor = minorVersion;
169             return this;
170         }
171 
172         /**
173          * Sets {@link GraphOutput} as embedded. The embedded {@link GraphOutput} shares
174          * {@link WritableByteChannel channel} with another already open non parent
175          * {@link GraphOutput}. The embedded {@link GraphOutput} flushes data after each
176          * {@link GraphOutput#print print}, {@link GraphOutput#beginGroup beginGroup} and
177          * {@link GraphOutput#endGroup endGroup} call.
178          *
179          * @param embedded if {@code true} the builder creates an embedded {@link GraphOutput}
180          * @return this builder
<span class="line-modified">181          * @since 1.0</span>
182          */
183         public Builder&lt;G, N, M&gt; embedded(boolean embedded) {
184             this.embeddedGraphOutput = embedded;
185             return this;
186         }
187 
188         /**
189          * Associates different implementation of types.
190          *
191          * @param graphTypes implementation of types and enum recognition
192          * @return this builder
193          */
194         public Builder&lt;G, N, M&gt; types(GraphTypes graphTypes) {
195             this.types = graphTypes;
196             return this;
197         }
198 
199         /**
200          * Associates implementation of blocks.
201          *
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 
 25 package org.graalvm.graphio;
 26 
 27 import java.io.Closeable;
 28 import java.io.IOException;
 29 import java.net.URI;
 30 import java.net.URISyntaxException;
 31 import java.nio.ByteBuffer;
 32 import java.nio.channels.WritableByteChannel;
 33 import java.util.Collections;
 34 import java.util.Map;
 35 
 36 /**
 37  * Instance of output to dump informations about a compiler compilations.
 38  *
 39  * @param &lt;G&gt; the type of graph this instance handles
 40  * @param &lt;M&gt; the type of methods this instance handles
<span class="line-modified"> 41  * @since 19.0 a {@link WritableByteChannel} is implemented</span>
 42  */
 43 public final class GraphOutput&lt;G, M&gt; implements Closeable, WritableByteChannel {
 44     private final GraphProtocol&lt;G, ?, ?, ?, ?, M, ?, ?, ?, ?&gt; printer;
 45 
 46     private GraphOutput(GraphProtocol&lt;G, ?, ?, ?, ?, M, ?, ?, ?, ?&gt; p) {
 47         this.printer = p;
 48     }
 49 
 50     /**
 51      * Creates new builder to configure a future instance of {@link GraphOutput}.
 52      *
 53      * @param &lt;G&gt; the type of the graph
 54      * @param &lt;N&gt; the type of the nodes
 55      * @param &lt;C&gt; the type of the node classes
 56      * @param &lt;P&gt; the type of the ports
 57      *
 58      * @param structure description of the structure of the graph
 59      * @return the builder to configure
 60      */
 61     public static &lt;G, N, C, P&gt; Builder&lt;G, N, ?&gt; newBuilder(GraphStructure&lt;G, N, C, P&gt; structure) {
</pre>
<hr />
<pre>
 95      * Ends compilation group.
 96      *
 97      * @throws IOException
 98      */
 99     public void endGroup() throws IOException {
100         printer.endGroup();
101     }
102 
103     /**
104      * Closes the output. Closes allocated resources and associated output channel.
105      */
106     @Override
107     public void close() {
108         printer.close();
109     }
110 
111     /**
112      * Checks if the {@link GraphOutput} is open.
113      *
114      * @return true if the {@link GraphOutput} is open.
<span class="line-modified">115      * @since 19.0</span>
116      */
117     @Override
118     public boolean isOpen() {
119         return printer.isOpen();
120     }
121 
122     /**
123      * Writes raw bytes into {@link GraphOutput}.
124      *
125      * @param src the bytes to write
126      * @return the number of bytes written, possibly zero
127      * @throws IOException in case of IO error
<span class="line-modified">128      * @since 19.0</span>
129      */
130     @Override
131     public int write(ByteBuffer src) throws IOException {
132         return printer.write(src);
133     }
134 
135     /**
136      * Builder to configure and create an instance of {@link GraphOutput}.
137      *
138      * @param &lt;G&gt; the type of the (root element of) graph
139      * @param &lt;N&gt; the type of the nodes
140      * @param &lt;M&gt; the type of the methods
141      */
142     public static final class Builder&lt;G, N, M&gt; {
143         private final GraphStructure&lt;G, N, ?, ?&gt; structure;
144         private ElementsAndLocations&lt;M, ?, ?&gt; elementsAndLocations;
145 
146         private GraphTypes types = DefaultGraphTypes.DEFAULT;
147         private GraphBlocks&lt;G, ?, N&gt; blocks = DefaultGraphBlocks.empty();
148         private int major = 4;
</pre>
<hr />
<pre>
161          * @param majorVersion by default 4, newer version may be known
162          * @param minorVersion usually 0
163          * @return this builder
164          * @since 0.28
165          */
166         public Builder&lt;G, N, M&gt; protocolVersion(int majorVersion, int minorVersion) {
167             this.major = majorVersion;
168             this.minor = minorVersion;
169             return this;
170         }
171 
172         /**
173          * Sets {@link GraphOutput} as embedded. The embedded {@link GraphOutput} shares
174          * {@link WritableByteChannel channel} with another already open non parent
175          * {@link GraphOutput}. The embedded {@link GraphOutput} flushes data after each
176          * {@link GraphOutput#print print}, {@link GraphOutput#beginGroup beginGroup} and
177          * {@link GraphOutput#endGroup endGroup} call.
178          *
179          * @param embedded if {@code true} the builder creates an embedded {@link GraphOutput}
180          * @return this builder
<span class="line-modified">181          * @since 19.0</span>
182          */
183         public Builder&lt;G, N, M&gt; embedded(boolean embedded) {
184             this.embeddedGraphOutput = embedded;
185             return this;
186         }
187 
188         /**
189          * Associates different implementation of types.
190          *
191          * @param graphTypes implementation of types and enum recognition
192          * @return this builder
193          */
194         public Builder&lt;G, N, M&gt; types(GraphTypes graphTypes) {
195             this.types = graphTypes;
196             return this;
197         }
198 
199         /**
200          * Associates implementation of blocks.
201          *
</pre>
</td>
</tr>
</table>
<center><a href="DefaultGraphTypes.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="GraphProtocol.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>