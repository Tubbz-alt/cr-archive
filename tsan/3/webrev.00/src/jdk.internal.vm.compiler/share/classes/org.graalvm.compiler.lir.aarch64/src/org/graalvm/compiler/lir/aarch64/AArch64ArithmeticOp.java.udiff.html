<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.lir.aarch64/src/org/graalvm/compiler/lir/aarch64/AArch64ArithmeticOp.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AArch64ArithmeticLIRGeneratorTool.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="AArch64BitManipulationOp.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.compiler/share/classes/org.graalvm.compiler.lir.aarch64/src/org/graalvm/compiler/lir/aarch64/AArch64ArithmeticOp.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2013, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2013, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -56,10 +56,17 @@</span>
      MULVS,
      MNEG,
      DIV,
      SMULH,
      UMULH,
<span class="udiff-line-added">+     SMULL,</span>
<span class="udiff-line-added">+     SMNEGL,</span>
<span class="udiff-line-added">+     MADD,</span>
<span class="udiff-line-added">+     MSUB,</span>
<span class="udiff-line-added">+     FMADD,</span>
<span class="udiff-line-added">+     SMADDL,</span>
<span class="udiff-line-added">+     SMSUBL,</span>
      REM,
      UDIV,
      UREM,
      AND(LOGICAL),
      ANDS(LOGICAL),
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -277,10 +284,16 @@</span>
                      masm.smulh(size, dst, src1, src2);
                      break;
                  case MNEG:
                      masm.mneg(size, dst, src1, src2);
                      break;
<span class="udiff-line-added">+                 case SMULL:</span>
<span class="udiff-line-added">+                     masm.smull(size, dst, src1, src2);</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case SMNEGL:</span>
<span class="udiff-line-added">+                     masm.smnegl(size, dst, src1, src2);</span>
<span class="udiff-line-added">+                     break;</span>
                  case DIV:
                      masm.sdiv(size, dst, src1, src2);
                      break;
                  case UDIV:
                      masm.udiv(size, dst, src1, src2);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -475,15 +488,14 @@</span>
          @Use(REG) protected AllocatableValue src1;
          @Use(REG) protected AllocatableValue src2;
          @Use(REG) protected AllocatableValue src3;
  
          /**
<span class="udiff-line-modified-removed">-          * Computes &lt;code&gt;result = src3 &lt;op&gt; src1 * src2&lt;/code&gt;.</span>
<span class="udiff-line-modified-added">+          * Computes &lt;code&gt;result = src3 +/- src1 * src2&lt;/code&gt;.</span>
           */
          public MultiplyAddSubOp(AArch64ArithmeticOp op, AllocatableValue result, AllocatableValue src1, AllocatableValue src2, AllocatableValue src3) {
              super(TYPE);
<span class="udiff-line-removed">-             assert op == ADD || op == SUB;</span>
              this.op = op;
              this.result = result;
              this.src1 = src1;
              this.src2 = src2;
              this.src3 = src3;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -491,16 +503,27 @@</span>
  
          @Override
          public void emitCode(CompilationResultBuilder crb, AArch64MacroAssembler masm) {
              int size = result.getPlatformKind().getSizeInBytes() * Byte.SIZE;
              switch (op) {
<span class="udiff-line-modified-removed">-                 case ADD:</span>
<span class="udiff-line-modified-added">+                 case MADD:</span>
                      masm.madd(size, asRegister(result), asRegister(src1), asRegister(src2), asRegister(src3));
                      break;
<span class="udiff-line-modified-removed">-                 case SUB:</span>
<span class="udiff-line-modified-added">+                 case MSUB:</span>
                      masm.msub(size, asRegister(result), asRegister(src1), asRegister(src2), asRegister(src3));
                      break;
<span class="udiff-line-added">+                 case FMADD:</span>
<span class="udiff-line-added">+                     masm.fmadd(size, asRegister(result), asRegister(src1), asRegister(src2), asRegister(src3));</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case SMADDL:</span>
<span class="udiff-line-added">+                     assert size == 64;</span>
<span class="udiff-line-added">+                     masm.smaddl(size, asRegister(result), asRegister(src1), asRegister(src2), asRegister(src3));</span>
<span class="udiff-line-added">+                     break;</span>
<span class="udiff-line-added">+                 case SMSUBL:</span>
<span class="udiff-line-added">+                     assert size == 64;</span>
<span class="udiff-line-added">+                     masm.smsubl(size, asRegister(result), asRegister(src1), asRegister(src2), asRegister(src3));</span>
<span class="udiff-line-added">+                     break;</span>
                  default:
                      throw GraalError.shouldNotReachHere();
              }
          }
      }
</pre>
<center><a href="AArch64ArithmeticLIRGeneratorTool.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="AArch64BitManipulationOp.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>