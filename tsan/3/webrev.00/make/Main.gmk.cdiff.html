<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/Main.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="MacBundles.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="MainSupport.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/Main.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 64,37 ***</span>
  ################################################################################
  
  ################################################################################
  # Interim/build tools targets, compiling tools used during the build
  
<span class="line-modified">! # When creating a BUILDJDK, the buildtools and interim targets have already</span>
<span class="line-removed">- # been built and should not be built again.</span>
<span class="line-removed">- ifneq ($(CREATING_BUILDJDK), true)</span>
<span class="line-removed">-   buildtools-langtools:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f ToolsLangtools.gmk)
  
<span class="line-modified">!   interim-langtools:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileInterimLangtools.gmk)
  
<span class="line-modified">!   interim-rmic:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileInterimRmic.gmk)
  
<span class="line-modified">!   interim-cldrconverter:</span>
<span class="line-modified">! 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CopyInterimCLDRConverter.gmk)</span>
  
<span class="line-modified">!   buildtools-jdk:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileToolsJdk.gmk)
  
<span class="line-modified">!   buildtools-modules:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileModuleTools.gmk)
  
<span class="line-modified">!   buildtools-hotspot:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileToolsHotspot.gmk)
<span class="line-removed">- endif</span>
  
  ALL_TARGETS += buildtools-langtools interim-langtools \
<span class="line-modified">!     interim-rmic interim-cldrconverter buildtools-jdk buildtools-modules \</span>
      buildtools-hotspot
  
  ################################################################################
  # Special targets for certain modules
  
<span class="line-new-header">--- 64,34 ---</span>
  ################################################################################
  
  ################################################################################
  # Interim/build tools targets, compiling tools used during the build
  
<span class="line-modified">! buildtools-langtools:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f ToolsLangtools.gmk)
  
<span class="line-modified">! interim-langtools:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileInterimLangtools.gmk)
  
<span class="line-modified">! interim-rmic:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileInterimRmic.gmk)
  
<span class="line-modified">! interim-tzdb:</span>
<span class="line-modified">! 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CopyInterimTZDB.gmk)</span>
  
<span class="line-modified">! </span>
<span class="line-added">+ buildtools-jdk:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileToolsJdk.gmk)
  
<span class="line-modified">! buildtools-modules:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileModuleTools.gmk)
  
<span class="line-modified">! buildtools-hotspot:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileToolsHotspot.gmk)
  
  ALL_TARGETS += buildtools-langtools interim-langtools \
<span class="line-modified">!     interim-rmic interim-tzdb buildtools-jdk buildtools-modules \</span>
      buildtools-hotspot
  
  ################################################################################
  # Special targets for certain modules
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 104,47 ***</span>
  ALL_TARGETS += generate-exported-symbols
  
  ################################################################################
  # Gensrc targets, generating source before java compilation can be done
  #
<span class="line-modified">! # When creating a BUILDJDK, the java targets have already been built and copied</span>
<span class="line-modified">! # into the buildjdk so no need to generate sources.</span>
<span class="line-modified">! ifneq ($(CREATING_BUILDJDK), true)</span>
<span class="line-modified">!   $(eval $(call DeclareRecipesForPhase, GENSRC, \</span>
<span class="line-modified">!       TARGET_SUFFIX := gensrc-src, \</span>
<span class="line-modified">!       FILE_PREFIX := Gensrc, \</span>
<span class="line-modified">!       MAKE_SUBDIR := gensrc, \</span>
<span class="line-modified">!       CHECK_MODULES := $(ALL_MODULES), \</span>
<span class="line-modified">!   ))</span>
<span class="line-modified">! </span>
<span class="line-modified">!   $(foreach m, $(GENSRC_MODULES), $(eval $m-gensrc: $m-gensrc-src))</span>
<span class="line-modified">! </span>
<span class="line-modified">!   LANGTOOLS_GENSRC_TARGETS := $(filter $(addsuffix -%, $(LANGTOOLS_MODULES)), $(GENSRC_TARGETS))</span>
<span class="line-modified">!   INTERIM_LANGTOOLS_GENSRC_TARGETS := $(filter $(addsuffix -%, \</span>
<span class="line-modified">!       $(INTERIM_LANGTOOLS_BASE_MODULES)), $(GENSRC_TARGETS))</span>
<span class="line-modified">!   HOTSPOT_GENSRC_TARGETS := $(filter $(addsuffix -%, $(HOTSPOT_MODULES)), $(GENSRC_TARGETS))</span>
<span class="line-modified">!   JDK_GENSRC_TARGETS := $(filter-out $(LANGTOOLS_GENSRC_TARGETS) \</span>
<span class="line-modified">!       $(HOTSPOT_GENSRC_TARGETS), $(GENSRC_TARGETS))</span>
<span class="line-modified">! </span>
<span class="line-modified">!   GENSRC_MODULEINFO_MODULES := $(ALL_MODULES)</span>
<span class="line-modified">!   GENSRC_MODULEINFO_TARGETS := $(addsuffix -gensrc-moduleinfo, \</span>
<span class="line-modified">!       $(GENSRC_MODULEINFO_MODULES))</span>
<span class="line-modified">! </span>
<span class="line-modified">!   GENSRC_MODULES := $(GENSRC_MODULEINFO_MODULES)</span>
<span class="line-modified">!   GENSRC_TARGETS += $(sort $(GENSRC_MODULEINFO_TARGETS) \</span>
<span class="line-modified">!       $(addsuffix -gensrc, $(GENSRC_MODULES)))</span>
<span class="line-removed">- </span>
<span class="line-removed">-   define DeclareModuleInfoRecipe</span>
<span class="line-removed">-     $1-gensrc-moduleinfo:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
<span class="line-modified">! 	    -f GensrcModuleInfo.gmk MODULE=$1)</span>
  
<span class="line-modified">!     $1-gensrc: $1-gensrc-moduleinfo</span>
<span class="line-modified">!   endef</span>
  
<span class="line-modified">!   $(foreach m, $(GENSRC_MODULEINFO_MODULES), $(eval $(call DeclareModuleInfoRecipe,$m)))</span>
<span class="line-removed">- endif</span>
  
  ALL_TARGETS += $(GENSRC_TARGETS)
  
  ################################################################################
  # Generate data targets
<span class="line-new-header">--- 101,43 ---</span>
  ALL_TARGETS += generate-exported-symbols
  
  ################################################################################
  # Gensrc targets, generating source before java compilation can be done
  #
<span class="line-modified">! $(eval $(call DeclareRecipesForPhase, GENSRC, \</span>
<span class="line-modified">!     TARGET_SUFFIX := gensrc-src, \</span>
<span class="line-modified">!     FILE_PREFIX := Gensrc, \</span>
<span class="line-modified">!     MAKE_SUBDIR := gensrc, \</span>
<span class="line-modified">!     CHECK_MODULES := $(ALL_MODULES), \</span>
<span class="line-modified">! ))</span>
<span class="line-modified">! </span>
<span class="line-modified">! $(foreach m, $(GENSRC_MODULES), $(eval $m-gensrc: $m-gensrc-src))</span>
<span class="line-modified">! </span>
<span class="line-modified">! LANGTOOLS_GENSRC_TARGETS := $(filter $(addsuffix -%, $(LANGTOOLS_MODULES)), $(GENSRC_TARGETS))</span>
<span class="line-modified">! INTERIM_LANGTOOLS_GENSRC_TARGETS := $(filter $(addsuffix -%, \</span>
<span class="line-modified">!     $(INTERIM_LANGTOOLS_BASE_MODULES)), $(GENSRC_TARGETS))</span>
<span class="line-modified">! HOTSPOT_GENSRC_TARGETS := $(filter $(addsuffix -%, $(HOTSPOT_MODULES)), $(GENSRC_TARGETS))</span>
<span class="line-modified">! JDK_GENSRC_TARGETS := $(filter-out $(LANGTOOLS_GENSRC_TARGETS) \</span>
<span class="line-modified">!     $(HOTSPOT_GENSRC_TARGETS), $(GENSRC_TARGETS))</span>
<span class="line-modified">! </span>
<span class="line-modified">! GENSRC_MODULEINFO_MODULES := $(ALL_MODULES)</span>
<span class="line-modified">! GENSRC_MODULEINFO_TARGETS := $(addsuffix -gensrc-moduleinfo, \</span>
<span class="line-modified">!     $(GENSRC_MODULEINFO_MODULES))</span>
<span class="line-modified">! </span>
<span class="line-modified">! GENSRC_MODULES := $(GENSRC_MODULEINFO_MODULES)</span>
<span class="line-modified">! GENSRC_TARGETS += $(sort $(GENSRC_MODULEINFO_TARGETS) \</span>
<span class="line-modified">!     $(addsuffix -gensrc, $(GENSRC_MODULES)))</span>
<span class="line-modified">! </span>
<span class="line-modified">! define DeclareModuleInfoRecipe</span>
<span class="line-modified">!   $1-gensrc-moduleinfo:</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
<span class="line-modified">! 	    -f gensrc/GensrcModuleInfo.gmk MODULE=$1)</span>
  
<span class="line-modified">!   $1-gensrc: $1-gensrc-moduleinfo</span>
<span class="line-modified">! endef</span>
  
<span class="line-modified">! $(foreach m, $(GENSRC_MODULEINFO_MODULES), $(eval $(call DeclareModuleInfoRecipe,$m)))</span>
  
  ALL_TARGETS += $(GENSRC_TARGETS)
  
  ################################################################################
  # Generate data targets
</pre>
<hr />
<pre>
<span class="line-old-header">*** 219,10 ***</span>
<span class="line-new-header">--- 212,25 ---</span>
      CHECK_MODULES := $(ALL_MODULES), \
      USE_WRAPPER := true))
  
  ALL_TARGETS += $(LIBS_TARGETS)
  
<span class="line-added">+ ################################################################################</span>
<span class="line-added">+ # Targets for compiling static versions of certain native libraries. These do</span>
<span class="line-added">+ # not end up in the jmods or the normal JDK image, but are instead bundled into</span>
<span class="line-added">+ # a special deliverable.</span>
<span class="line-added">+ $(eval $(call DeclareRecipesForPhase, STATIC_LIBS, \</span>
<span class="line-added">+     TARGET_SUFFIX := static-libs, \</span>
<span class="line-added">+     FILE_PREFIX := Lib, \</span>
<span class="line-added">+     MAKE_SUBDIR := lib, \</span>
<span class="line-added">+     CHECK_MODULES := $(STATIC_LIBS_MODULES), \</span>
<span class="line-added">+     USE_WRAPPER := true, \</span>
<span class="line-added">+     EXTRA_ARGS := STATIC_LIBS=true, \</span>
<span class="line-added">+ ))</span>
<span class="line-added">+ </span>
<span class="line-added">+ ALL_TARGETS += $(STATIC_LIBS_TARGETS)</span>
<span class="line-added">+ </span>
  ################################################################################
  # Targets for compiling native executables
  $(eval $(call DeclareRecipesForPhase, LAUNCHER, \
      TARGET_SUFFIX := launchers, \
      FILE_PREFIX := Launcher, \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 285,10 ***</span>
<span class="line-new-header">--- 293,31 ---</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileCommands.gmk)
  
  ALL_TARGETS += $(COMPILE_COMMANDS_TARGETS_HOTSPOT) $(COMPILE_COMMANDS_TARGETS_JDK)
  ALL_TARGETS += compile-commands compile-commands-hotspot
  
<span class="line-added">+ ################################################################################</span>
<span class="line-added">+ # VS Code projects</span>
<span class="line-added">+ vscode-project:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make/vscode &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CreateVSCodeProject.gmk \</span>
<span class="line-added">+       VSCODE_INDEXER=cpptools)</span>
<span class="line-added">+ </span>
<span class="line-added">+ vscode-project-clangd:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make/vscode &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CreateVSCodeProject.gmk \</span>
<span class="line-added">+       VSCODE_INDEXER=clangd)</span>
<span class="line-added">+ </span>
<span class="line-added">+ vscode-project-rtags:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make/vscode &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CreateVSCodeProject.gmk \</span>
<span class="line-added">+       VSCODE_INDEXER=rtags)</span>
<span class="line-added">+ </span>
<span class="line-added">+ vscode-project-ccls:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make/vscode &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CreateVSCodeProject.gmk \</span>
<span class="line-added">+       VSCODE_INDEXER=ccls)</span>
<span class="line-added">+ </span>
<span class="line-added">+ ALL_TARGETS += vscode-project vscode-project-clangd vscode-project-rtags \</span>
<span class="line-added">+   vscode-project-ccls</span>
<span class="line-added">+ </span>
  ################################################################################
  # Build demos targets
  
  demos-jdk:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CompileDemos.gmk)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 333,12 ***</span>
  
  BOOTCYCLE_TARGET := product-images
  bootcycle-images:
          ifneq ($(COMPILE_TYPE), cross)
  	  $(call LogWarn, Boot cycle build step 2: Building a new JDK image using previously built image)
  	  +$(MAKE) $(MAKE_ARGS) -f $(TOPDIR)/make/Init.gmk PARALLEL_TARGETS=$(BOOTCYCLE_TARGET) \
<span class="line-modified">! 	      JOBS= SPEC=$(dir $(SPEC))bootcycle-spec.gmk main</span>
          else
  	  $(call LogWarn, Boot cycle build disabled when cross compiling)
          endif
  
  zip-security:
<span class="line-new-header">--- 362,13 ---</span>
  
  BOOTCYCLE_TARGET := product-images
  bootcycle-images:
          ifneq ($(COMPILE_TYPE), cross)
  	  $(call LogWarn, Boot cycle build step 2: Building a new JDK image using previously built image)
<span class="line-added">+ 	  $(call MakeDir, $(OUTPUTDIR)/bootcycle-build)</span>
  	  +$(MAKE) $(MAKE_ARGS) -f $(TOPDIR)/make/Init.gmk PARALLEL_TARGETS=$(BOOTCYCLE_TARGET) \
<span class="line-modified">! 	      LOG_PREFIX=&quot;[bootcycle] &quot; JOBS= SPEC=$(dir $(SPEC))bootcycle-spec.gmk main</span>
          else
  	  $(call LogWarn, Boot cycle build disabled when cross compiling)
          endif
  
  zip-security:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 357,10 ***</span>
<span class="line-new-header">--- 387,13 ---</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Images.gmk jre)
  
  symbols-image:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Images.gmk symbols)
  
<span class="line-added">+ static-libs-image:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f StaticLibsImage.gmk)</span>
<span class="line-added">+ </span>
  mac-jdk-bundle:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f MacBundles.gmk jdk-bundle)
  
  mac-legacy-jre-bundle:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f MacBundles.gmk jre-bundle)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 369,19 ***</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f ReleaseFile.gmk)
  
  exploded-image-optimize:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f ExplodedImageOptimize.gmk)
  
  ifeq ($(JCOV_ENABLED), true)
    jcov-image:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Coverage.gmk jcov-image)
  endif
  
  ALL_TARGETS += store-source-revision create-source-revision-tracker bootcycle-images zip-security \
      zip-source jrtfs-jar jdk-image legacy-jre-image \
<span class="line-modified">!     symbols-image mac-jdk-bundle mac-legacy-jre-bundle \</span>
<span class="line-modified">!     release-file exploded-image-optimize jcov-image</span>
  
  ################################################################################
  # Docs targets
  
  # If building full docs, to complete docs-*-api we need both the javadoc and
<span class="line-new-header">--- 402,22 ---</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f ReleaseFile.gmk)
  
  exploded-image-optimize:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f ExplodedImageOptimize.gmk)
  
<span class="line-added">+ graal-builder-image:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f GraalBuilderImage.gmk)</span>
<span class="line-added">+ </span>
  ifeq ($(JCOV_ENABLED), true)
    jcov-image:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Coverage.gmk jcov-image)
  endif
  
  ALL_TARGETS += store-source-revision create-source-revision-tracker bootcycle-images zip-security \
      zip-source jrtfs-jar jdk-image legacy-jre-image \
<span class="line-modified">!     symbols-image static-libs-image mac-jdk-bundle mac-legacy-jre-bundle \</span>
<span class="line-modified">!     release-file exploded-image-optimize graal-builder-image jcov-image</span>
  
  ################################################################################
  # Docs targets
  
  # If building full docs, to complete docs-*-api we need both the javadoc and
</pre>
<hr />
<pre>
<span class="line-old-header">*** 411,39 ***</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Docs.gmk docs-jdk-index)
  
  docs-zip:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Docs.gmk docs-zip)
  
  update-build-docs:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f UpdateBuildDocs.gmk)
  
  update-x11wrappers:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f UpdateX11Wrappers.gmk)
  
  ALL_TARGETS += docs-jdk-api-javadoc docs-jdk-api-modulegraph \
      docs-javase-api-javadoc docs-javase-api-modulegraph \
      docs-reference-api-javadoc docs-reference-api-modulegraph docs-jdk-specs \
<span class="line-modified">!     docs-jdk-index docs-zip update-build-docs update-x11wrappers</span>
  
  ################################################################################
  # Cross compilation support
  
  ifeq ($(CREATING_BUILDJDK), true)
    # This target is only called by the recursive call below.
    create-buildjdk-interim-image-helper: interim-image jdk.jlink-launchers \
        java.base-copy jdk.jdeps-launchers
  endif
  
<span class="line-modified">! create-buildjdk-copy:</span>
<span class="line-modified">! 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f CreateBuildJdkCopy.gmk)</span>
  
  create-buildjdk-interim-image:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Main.gmk \
  	    $@-helper \
  	    SPEC=$(dir $(SPEC))buildjdk-spec.gmk \
  	    HOTSPOT_SPEC=$(dir $(SPEC))buildjdk-spec.gmk \
<span class="line-modified">! 	    CREATING_BUILDJDK=true)</span>
  
  ALL_TARGETS += create-buildjdk-copy create-buildjdk-interim-image
  
  ################################################################################
  # The interim-image is a small jlinked image that is used to generate artifacts
<span class="line-new-header">--- 447,45 ---</span>
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Docs.gmk docs-jdk-index)
  
  docs-zip:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Docs.gmk docs-zip)
  
<span class="line-added">+ docs-specs-zip:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Docs.gmk docs-specs-zip)</span>
<span class="line-added">+ </span>
  update-build-docs:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f UpdateBuildDocs.gmk)
  
  update-x11wrappers:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f UpdateX11Wrappers.gmk)
  
  ALL_TARGETS += docs-jdk-api-javadoc docs-jdk-api-modulegraph \
      docs-javase-api-javadoc docs-javase-api-modulegraph \
      docs-reference-api-javadoc docs-reference-api-modulegraph docs-jdk-specs \
<span class="line-modified">!     docs-jdk-index docs-zip docs-specs-zip update-build-docs update-x11wrappers</span>
  
  ################################################################################
  # Cross compilation support
  
  ifeq ($(CREATING_BUILDJDK), true)
    # This target is only called by the recursive call below.
    create-buildjdk-interim-image-helper: interim-image jdk.jlink-launchers \
        java.base-copy jdk.jdeps-launchers
  endif
  
<span class="line-modified">! BUILDJDK_MODULES := $(sort $(foreach m, jdk.jlink $(INTERIM_IMAGE_MODULES), \</span>
<span class="line-modified">!     $(call FindTransitiveDepsForModule, $m) $m))</span>
  
  create-buildjdk-interim-image:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Main.gmk \
  	    $@-helper \
  	    SPEC=$(dir $(SPEC))buildjdk-spec.gmk \
  	    HOTSPOT_SPEC=$(dir $(SPEC))buildjdk-spec.gmk \
<span class="line-modified">! 	    CREATING_BUILDJDK=true \</span>
<span class="line-added">+ 	    LOG_PREFIX=&quot;[buildjdk] &quot; \</span>
<span class="line-added">+ 	    JAVA_MODULES=&quot;$(BUILDJDK_MODULES)&quot; \</span>
<span class="line-added">+ 	)</span>
  
  ALL_TARGETS += create-buildjdk-copy create-buildjdk-interim-image
  
  ################################################################################
  # The interim-image is a small jlinked image that is used to generate artifacts
</pre>
<hr />
<pre>
<span class="line-old-header">*** 579,22 ***</span>
  # Bundles
  
  product-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk product-bundles)
  
  test-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk test-bundles)
  
  docs-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk docs-bundles)
  
  ifeq ($(JCOV_ENABLED), true)
    jcov-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk jcov-bundles)
  endif
  
<span class="line-modified">! ALL_TARGETS += product-bundles test-bundles docs-bundles jcov-bundles</span>
  
  ################################################################################
  # Install targets
  
  install:
<span class="line-new-header">--- 621,29 ---</span>
  # Bundles
  
  product-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk product-bundles)
  
<span class="line-added">+ legacy-bundles:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk legacy-bundles)</span>
<span class="line-added">+ </span>
  test-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk test-bundles)
  
  docs-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk docs-bundles)
  
<span class="line-added">+ static-libs-bundles:</span>
<span class="line-added">+ 	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk static-libs-bundles)</span>
<span class="line-added">+ </span>
  ifeq ($(JCOV_ENABLED), true)
    jcov-bundles:
  	+($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) -f Bundles.gmk jcov-bundles)
  endif
  
<span class="line-modified">! ALL_TARGETS += product-bundles legacy-bundles test-bundles docs-bundles \</span>
<span class="line-added">+     static-libs-bundles jcov-bundles</span>
  
  ################################################################################
  # Install targets
  
  install:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 623,11 ***</span>
  else
    $(LANGTOOLS_GENSRC_TARGETS): buildtools-langtools
  
    interim-langtools: $(INTERIM_LANGTOOLS_GENSRC_TARGETS)
  
<span class="line-modified">!   buildtools-jdk: interim-langtools interim-cldrconverter</span>
  
    buildtools-hotspot: interim-langtools
  
    buildtools-modules: exploded-image-base
  
<span class="line-new-header">--- 672,11 ---</span>
  else
    $(LANGTOOLS_GENSRC_TARGETS): buildtools-langtools
  
    interim-langtools: $(INTERIM_LANGTOOLS_GENSRC_TARGETS)
  
<span class="line-modified">!   buildtools-jdk: interim-langtools interim-tzdb</span>
  
    buildtools-hotspot: interim-langtools
  
    buildtools-modules: exploded-image-base
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 645,11 ***</span>
  
    $(JAVA_TARGETS): interim-langtools
  
    # Declare dependencies between hotspot-&lt;variant&gt;* targets
    $(foreach v, $(JVM_VARIANTS), \
<span class="line-removed">-       $(eval hotspot-$v: hotspot-$v-gensrc hotspot-$v-libs) \</span>
        $(eval hotspot-$v-gensrc: java.base-copy) \
        $(eval hotspot-$v-libs: hotspot-$v-gensrc java.base-copy) \
    )
  
    hotspot-ide-project: hotspot exploded-image
<span class="line-new-header">--- 694,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 669,31 ***</span>
    endif
  
    # The demos are currently linking to libjvm and libjava, just like all other
    # jdk libs, even though they don&#39;t need to. To avoid warnings, make sure they
    # aren&#39;t built until after libjava and libjvm are available to link to.
<span class="line-modified">!   demos-jdk: java.base-libs exploded-image-optimize</span>
    test-image-demos-jdk: demos-jdk
  
    # Declare dependency from &lt;module&gt;-java to &lt;module&gt;-gensrc
    $(foreach m, $(GENSRC_MODULES), $(eval $m-java: $m-gensrc))
  
    # Declare dependencies between java modules
    $(foreach m, $(JAVA_MODULES), \
        $(eval $m-java: $(addsuffix -java, $(filter $(JAVA_MODULES), \
        $(call FindDepsForModule,$m)))))
  
    # Declare dependencies between &lt;module&gt;-rmic to &lt;module&gt;-java
    $(foreach m, $(RMIC_MODULES), $(eval $m-rmic: $m-java))
  
    # Declare dependencies from &lt;module&gt;-lib to &lt;module&gt;-java
    # Skip modules that do not have java source.
<span class="line-modified">!   # When creating a BUILDJDK, the java compilation has already been done by the</span>
<span class="line-removed">-   # normal build and copied in.</span>
<span class="line-removed">-   ifneq ($(CREATING_BUILDJDK), true)</span>
<span class="line-removed">-     $(foreach m, $(filter $(JAVA_MODULES), $(LIBS_MODULES)), $(eval $m-libs: $m-java))</span>
<span class="line-removed">-   endif</span>
  
    # Declare dependencies from all other &lt;module&gt;-lib to java.base-lib
    $(foreach t, $(filter-out java.base-libs, $(LIBS_TARGETS)), \
        $(eval $t: java.base-libs))
  
<span class="line-new-header">--- 717,29 ---</span>
    endif
  
    # The demos are currently linking to libjvm and libjava, just like all other
    # jdk libs, even though they don&#39;t need to. To avoid warnings, make sure they
    # aren&#39;t built until after libjava and libjvm are available to link to.
<span class="line-modified">!   demos-jdk: java.base-libs exploded-image</span>
    test-image-demos-jdk: demos-jdk
  
    # Declare dependency from &lt;module&gt;-java to &lt;module&gt;-gensrc
    $(foreach m, $(GENSRC_MODULES), $(eval $m-java: $m-gensrc))
  
    # Declare dependencies between java modules
    $(foreach m, $(JAVA_MODULES), \
        $(eval $m-java: $(addsuffix -java, $(filter $(JAVA_MODULES), \
        $(call FindDepsForModule,$m)))))
<span class="line-added">+   # Declare dependencies between the module meta targets</span>
<span class="line-added">+   $(foreach m, $(ALL_MODULES), $(eval $m: $(call FindDepsForModule,$m)))</span>
  
    # Declare dependencies between &lt;module&gt;-rmic to &lt;module&gt;-java
    $(foreach m, $(RMIC_MODULES), $(eval $m-rmic: $m-java))
  
    # Declare dependencies from &lt;module&gt;-lib to &lt;module&gt;-java
    # Skip modules that do not have java source.
<span class="line-modified">!   $(foreach m, $(filter $(JAVA_MODULES), $(LIBS_MODULES)), $(eval $m-libs: $m-java))</span>
  
    # Declare dependencies from all other &lt;module&gt;-lib to java.base-lib
    $(foreach t, $(filter-out java.base-libs, $(LIBS_TARGETS)), \
        $(eval $t: java.base-libs))
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 727,11 ***</span>
    # The ct.sym generation uses all the moduleinfos as input
    jdk.compiler-gendata: $(GENSRC_MODULEINFO_TARGETS)
  
    # Declare dependencies between jmod targets.
    # java.base jmod needs jrt-fs.jar and access to the other jmods to be built.
<span class="line-modified">!   # When creating a BUILDJDK, we don&#39;t need to add hashes to java.base, thus</span>
    # we don&#39;t need to depend on all other jmods
    ifneq ($(CREATING_BUILDJDK), true)
      java.base-jmod: jrtfs-jar $(filter-out java.base-jmod, $(JMOD_TARGETS))
    endif
  
<span class="line-new-header">--- 773,11 ---</span>
    # The ct.sym generation uses all the moduleinfos as input
    jdk.compiler-gendata: $(GENSRC_MODULEINFO_TARGETS)
  
    # Declare dependencies between jmod targets.
    # java.base jmod needs jrt-fs.jar and access to the other jmods to be built.
<span class="line-modified">!   # When creating the BUILDJDK, we don&#39;t need to add hashes to java.base, thus</span>
    # we don&#39;t need to depend on all other jmods
    ifneq ($(CREATING_BUILDJDK), true)
      java.base-jmod: jrtfs-jar $(filter-out java.base-jmod, $(JMOD_TARGETS))
    endif
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 740,15 ***</span>
  
    # Building java.base-jmod requires all of VM (ie hotspot) to be built.
    java.base-jmod: $(JVM_MAIN_TARGETS)
  
    # Declare dependencies from &lt;module&gt;-jmod to all other module targets
<span class="line-modified">!   # When creating a BUILDJDK, the java compilation has already been done by the</span>
<span class="line-removed">-   # normal build and copied in.</span>
<span class="line-removed">-   ifneq ($(CREATING_BUILDJDK), true)</span>
<span class="line-removed">-     $(foreach m, $(JAVA_MODULES), $(eval $m_JMOD_DEPS += $m-java))</span>
<span class="line-removed">-   endif</span>
    $(foreach m, $(GENDATA_MODULES), $(eval $m_JMOD_DEPS += $m-gendata))
    $(foreach m, $(RMIC_MODULES), $(eval $m_JMOD_DEPS += $m-rmic))
    $(foreach m, $(LIBS_MODULES), $(eval $m_JMOD_DEPS += $m-libs))
    $(foreach m, $(LAUNCHER_MODULES), $(eval $m_JMOD_DEPS += $m-launchers))
    $(foreach m, $(COPY_MODULES), $(eval $m_JMOD_DEPS += $m-copy))
<span class="line-new-header">--- 786,11 ---</span>
  
    # Building java.base-jmod requires all of VM (ie hotspot) to be built.
    java.base-jmod: $(JVM_MAIN_TARGETS)
  
    # Declare dependencies from &lt;module&gt;-jmod to all other module targets
<span class="line-modified">!   $(foreach m, $(JAVA_MODULES), $(eval $m_JMOD_DEPS += $m-java))</span>
    $(foreach m, $(GENDATA_MODULES), $(eval $m_JMOD_DEPS += $m-gendata))
    $(foreach m, $(RMIC_MODULES), $(eval $m_JMOD_DEPS += $m-rmic))
    $(foreach m, $(LIBS_MODULES), $(eval $m_JMOD_DEPS += $m-libs))
    $(foreach m, $(LAUNCHER_MODULES), $(eval $m_JMOD_DEPS += $m-launchers))
    $(foreach m, $(COPY_MODULES), $(eval $m_JMOD_DEPS += $m-copy))
</pre>
<hr />
<pre>
<span class="line-old-header">*** 769,38 ***</span>
    $(COMPILE_COMMANDS_TARGETS_HOTSPOT): clean-compile-commands
    $(COMPILE_COMMANDS_TARGETS_JDK): clean-compile-commands
    compile-commands-hotspot: $(COMPILE_COMMANDS_TARGETS_HOTSPOT)
    compile-commands: $(COMPILE_COMMANDS_TARGETS_HOTSPOT) $(COMPILE_COMMANDS_TARGETS_JDK)
  
    # Jmods cannot be created until we have the jmod tool ready to run. During
    # a normal build we run it from the exploded image, but when cross compiling
    # it&#39;s run from the buildjdk, which is either created at build time or user
    # supplied.
<span class="line-removed">-   #</span>
<span class="line-removed">-   # For the exploded image to be runnable, all java modules and</span>
<span class="line-removed">-   # jdk.jlink-launchers need to be built. We also need to copy jvm.cfg (done</span>
<span class="line-removed">-   # in java.base-copy) and tzdb.dat (done in java.base-gendata) to the</span>
<span class="line-removed">-   # appropriate location otherwise jimage, jlink and jmod won&#39;t start. This</span>
<span class="line-removed">-   # also applies when creating the buildjdk.</span>
<span class="line-removed">-   DEFAULT_JMOD_DEPS += java.base-libs java.base-copy java.base-gendata \</span>
<span class="line-removed">-       jdk.jlink-launchers</span>
<span class="line-removed">-   # When cross compiling and buildjdk is to be created, depend on creating the</span>
<span class="line-removed">-   # buildjdk instead of the default dependencies.</span>
    ifeq ($(CREATE_BUILDJDK), true)
<span class="line-removed">-     # Avoid calling create-buildjdk from within a create-buildjdk call.</span>
      ifneq ($(CREATING_BUILDJDK), true)
        $(JMOD_TARGETS): create-buildjdk
        buildtools-modules: create-buildjdk
      else
<span class="line-modified">!       # While actually creating the buildjdk, the default deps applies.</span>
<span class="line-modified">!       $(JMOD_TARGETS) $(INTERIM_JMOD_TARGETS): $(DEFAULT_JMOD_DEPS)</span>
      endif
    else
<span class="line-modified">!     # The normal non cross compilation case uses the default deps.</span>
<span class="line-modified">!     # To avoid races with the optimize target, that also needs to happen first.</span>
<span class="line-modified">!     $(JMOD_TARGETS) $(INTERIM_JMOD_TARGETS): $(DEFAULT_JMOD_DEPS) \</span>
<span class="line-removed">-         exploded-image-optimize</span>
    endif
  
    # All modules include the main license files from java.base.
    $(JMOD_TARGETS): java.base-copy
  
<span class="line-new-header">--- 811,45 ---</span>
    $(COMPILE_COMMANDS_TARGETS_HOTSPOT): clean-compile-commands
    $(COMPILE_COMMANDS_TARGETS_JDK): clean-compile-commands
    compile-commands-hotspot: $(COMPILE_COMMANDS_TARGETS_HOTSPOT)
    compile-commands: $(COMPILE_COMMANDS_TARGETS_HOTSPOT) $(COMPILE_COMMANDS_TARGETS_JDK)
  
<span class="line-added">+   vscode-project: compile-commands</span>
<span class="line-added">+   vscode-project-clangd: compile-commands</span>
<span class="line-added">+   vscode-project-rtags: compile-commands</span>
<span class="line-added">+   vscode-project-ccls: compile-commands</span>
<span class="line-added">+ </span>
<span class="line-added">+   # The -static-libs targets depend on -java as well as java.base-copy.</span>
<span class="line-added">+   $(foreach m, $(filter $(JAVA_MODULES), $(STATIC_LIBS_MODULES)), \</span>
<span class="line-added">+     $(eval $m-static-libs: $m-java java.base-copy))</span>
<span class="line-added">+ </span>
    # Jmods cannot be created until we have the jmod tool ready to run. During
    # a normal build we run it from the exploded image, but when cross compiling
    # it&#39;s run from the buildjdk, which is either created at build time or user
    # supplied.
    ifeq ($(CREATE_BUILDJDK), true)
      ifneq ($(CREATING_BUILDJDK), true)
<span class="line-added">+       # When cross compiling and buildjdk is to be created, simply depend on</span>
<span class="line-added">+       # creating the buildjdk.</span>
        $(JMOD_TARGETS): create-buildjdk
        buildtools-modules: create-buildjdk
      else
<span class="line-modified">!       # While actually creating the buildjdk, we need to list the bare</span>
<span class="line-modified">!       # minimum dependencies needed before running jmod, to avoid building</span>
<span class="line-added">+       # more than necessary. This includes:</span>
<span class="line-added">+       # * all java modules</span>
<span class="line-added">+       # * jdk.jlink-launchers</span>
<span class="line-added">+       # * copy jvm.cfg (done in java.base-copy)</span>
<span class="line-added">+       # * tzdb.dat (done in java.base-gendata)</span>
<span class="line-added">+       # Without all of these jimage, jlink and jmod won&#39;t start.</span>
<span class="line-added">+       $(JMOD_TARGETS) $(INTERIM_JMOD_TARGETS): java.base-libs java.base-copy \</span>
<span class="line-added">+           java.base-gendata jdk.jlink-launchers java</span>
      endif
    else
<span class="line-modified">!     # The normal non cross compilation case uses needs to wait for the full</span>
<span class="line-modified">!     # exploded-image to avoid a race with the optimize target.</span>
<span class="line-modified">!     $(JMOD_TARGETS) $(INTERIM_JMOD_TARGETS): exploded-image</span>
    endif
  
    # All modules include the main license files from java.base.
    $(JMOD_TARGETS): java.base-copy
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 833,10 ***</span>
<span class="line-new-header">--- 882,14 ---</span>
  
    jdk-image: jmods zip-source demos release-file
    legacy-jre-image: jmods release-file
    symbols-image: $(LIBS_TARGETS) $(LAUNCHER_TARGETS)
  
<span class="line-added">+   static-libs-image: $(STATIC_LIBS_TARGETS)</span>
<span class="line-added">+ </span>
<span class="line-added">+   graal-builder-image: jdk-image static-libs-image</span>
<span class="line-added">+ </span>
    mac-jdk-bundle: jdk-image
    mac-legacy-jre-bundle: legacy-jre-image
  
    ifeq ($(JCOV_INPUT_JDK), )
      jcov-image: jdk-image
</pre>
<hr />
<pre>
<span class="line-old-header">*** 864,15 ***</span>
  
    # If not already set, then set the JVM specific docs targets
    JVM_DOCS_TARGETS ?= hotspot-$(JVM_VARIANT_MAIN)-gensrc
  
    # The gensrc steps for hotspot and jdk.jdi create html spec files.
<span class="line-modified">!   docs-jdk-specs: $(JVM_DOCS_TARGETS) jdk.jdi-gensrc \</span>
        docs-jdk-index
  
    docs-zip: docs-jdk
  
    # Tests
    test: jdk-image test-image
  
    exploded-test: exploded-image test-image
  
<span class="line-new-header">--- 917,17 ---</span>
  
    # If not already set, then set the JVM specific docs targets
    JVM_DOCS_TARGETS ?= hotspot-$(JVM_VARIANT_MAIN)-gensrc
  
    # The gensrc steps for hotspot and jdk.jdi create html spec files.
<span class="line-modified">!   docs-jdk-specs: buildtools-jdk $(JVM_DOCS_TARGETS) jdk.jdi-gensrc \</span>
        docs-jdk-index
  
    docs-zip: docs-jdk
  
<span class="line-added">+   docs-specs-zip: docs-jdk-specs</span>
<span class="line-added">+ </span>
    # Tests
    test: jdk-image test-image
  
    exploded-test: exploded-image test-image
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 884,29 ***</span>
  
    # Declare dependency for all generated test targets
    $(foreach t, $(filter-out test-make%, $(ALL_TEST_TARGETS)), $(eval $t: jdk-image test-image))
    $(foreach t, $(ALL_EXPLODED_TEST_TARGETS), $(eval $t: exploded-image test-image))
  
<span class="line-removed">-   create-buildjdk-copy: jdk.jlink-java java.base-gendata \</span>
<span class="line-removed">-       $(addsuffix -java, $(INTERIM_IMAGE_MODULES))</span>
<span class="line-removed">- </span>
<span class="line-removed">-   create-buildjdk-interim-image: create-buildjdk-copy</span>
<span class="line-removed">- </span>
    interim-image: $(INTERIM_JMOD_TARGETS)
  
<span class="line-modified">!   build-test-lib: exploded-image-optimize</span>
  
    build-test-failure-handler: interim-langtools
  
    test-image-failure-handler: build-test-failure-handler
  
    build-test-hotspot-jtreg-native: buildtools-jdk \
        hotspot-$(JVM_VARIANT_MAIN)-libs
  
    build-test-jdk-jtreg-native: buildtools-jdk java.base-libs
  
<span class="line-modified">!   build-test-hotspot-jtreg-graal: exploded-image-optimize</span>
  
    test-image-hotspot-jtreg-native: build-test-hotspot-jtreg-native
  
    test-image-jdk-jtreg-native: build-test-jdk-jtreg-native
  
<span class="line-new-header">--- 939,24 ---</span>
  
    # Declare dependency for all generated test targets
    $(foreach t, $(filter-out test-make%, $(ALL_TEST_TARGETS)), $(eval $t: jdk-image test-image))
    $(foreach t, $(ALL_EXPLODED_TEST_TARGETS), $(eval $t: exploded-image test-image))
  
    interim-image: $(INTERIM_JMOD_TARGETS)
  
<span class="line-modified">!   build-test-lib: exploded-image</span>
  
    build-test-failure-handler: interim-langtools
  
    test-image-failure-handler: build-test-failure-handler
  
    build-test-hotspot-jtreg-native: buildtools-jdk \
        hotspot-$(JVM_VARIANT_MAIN)-libs
  
    build-test-jdk-jtreg-native: buildtools-jdk java.base-libs
  
<span class="line-modified">!   build-test-hotspot-jtreg-graal: exploded-image</span>
  
    test-image-hotspot-jtreg-native: build-test-hotspot-jtreg-native
  
    test-image-jdk-jtreg-native: build-test-jdk-jtreg-native
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 916,16 ***</span>
<span class="line-new-header">--- 966,20 ---</span>
  
    install: product-images
  
    product-bundles: product-images
  
<span class="line-added">+   legacy-bundles: legacy-images</span>
<span class="line-added">+ </span>
    test-bundles: test-image
  
    docs-bundles: docs-image
  
    jcov-bundles: jcov-image
  
<span class="line-added">+   static-libs-bundles: static-libs-image</span>
<span class="line-added">+ </span>
    generate-summary: jmods buildtools-modules
  
    update-x11wrappers: java.base-copy buildtools-jdk
  
  endif
</pre>
<hr />
<pre>
<span class="line-old-header">*** 936,10 ***</span>
<span class="line-new-header">--- 990,14 ---</span>
  # If not already set, set the JVM specific tools targets
  JVM_TOOLS_TARGETS ?= buildtools-hotspot
  buildtools: buildtools-langtools interim-langtools interim-rmic \
      buildtools-jdk $(JVM_TOOLS_TARGETS)
  
<span class="line-added">+ # Declare dependencies from hotspot-&lt;variant&gt; targets</span>
<span class="line-added">+ $(foreach v, $(JVM_VARIANTS), \</span>
<span class="line-added">+   $(eval hotspot-$v: hotspot-$v-gensrc hotspot-$v-libs) \</span>
<span class="line-added">+ )</span>
  hotspot: $(HOTSPOT_VARIANT_TARGETS)
  
  # Create targets hotspot-libs and hotspot-gensrc.
  $(foreach v, $(JVM_VARIANTS), \
    $(eval hotspot-libs: hotspot-$v-libs) \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 956,10 ***</span>
<span class="line-new-header">--- 1014,12 ---</span>
  
  rmic: $(RMIC_TARGETS)
  
  libs: $(LIBS_TARGETS)
  
<span class="line-added">+ static-libs: $(STATIC_LIBS_TARGETS)</span>
<span class="line-added">+ </span>
  launchers: $(LAUNCHER_TARGETS)
  
  jmods: $(JMOD_TARGETS)
  
  # Explicitly declare dependency for virtual target jdk.jdwp.agent-gensrc which
</pre>
<hr />
<pre>
<span class="line-old-header">*** 988,11 ***</span>
  # be runnable on the host platform anyway.
  ifneq ($(COMPILE_TYPE), cross)
    exploded-image: exploded-image-optimize
  endif
  
<span class="line-modified">! create-buildjdk: create-buildjdk-copy create-buildjdk-interim-image</span>
  
  docs-jdk-api: docs-jdk-api-javadoc
  docs-javase-api: docs-javase-api-javadoc
  docs-reference-api: docs-reference-api-javadoc
  
<span class="line-new-header">--- 1048,11 ---</span>
  # be runnable on the host platform anyway.
  ifneq ($(COMPILE_TYPE), cross)
    exploded-image: exploded-image-optimize
  endif
  
<span class="line-modified">! create-buildjdk: create-buildjdk-interim-image</span>
  
  docs-jdk-api: docs-jdk-api-javadoc
  docs-javase-api: docs-javase-api-javadoc
  docs-reference-api: docs-reference-api-javadoc
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1018,10 ***</span>
<span class="line-new-header">--- 1078,13 ---</span>
  
  # This target builds the product images, e.g. the JDK image
  # (and possibly other, more specific versions)
  product-images: jdk-image symbols-image exploded-image
  
<span class="line-added">+ # This target builds the legacy images, e.g. the legacy JRE image</span>
<span class="line-added">+ legacy-images: legacy-jre-image</span>
<span class="line-added">+ </span>
  # zip-security is actually a bundle, but for now it needs to be considered
  # an image until this can be cleaned up properly.
  product-images: zip-security
  
  # The module summary cannot be run when:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1034,10 ***</span>
<span class="line-new-header">--- 1097,12 ---</span>
    endif
  endif
  
  ifeq ($(call isTargetOs, macosx), true)
    product-images: mac-jdk-bundle
<span class="line-added">+ </span>
<span class="line-added">+   legacy-images: mac-legacy-jre-bundle</span>
  endif
  
  # This target builds the documentation image
  docs-image: docs-jdk
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1061,18 ***</span>
  
  # all-images builds all our deliverables as images.
  all-images: product-images test-image docs-image
  
  # all-bundles packages all our deliverables as tar.gz bundles.
<span class="line-modified">! all-bundles: product-bundles test-bundles docs-bundles</span>
  
  ALL_TARGETS += buildtools hotspot hotspot-libs hotspot-gensrc gensrc gendata \
<span class="line-modified">!     copy java rmic libs launchers jmods \</span>
      jdk.jdwp.agent-gensrc $(ALL_MODULES) demos \
      exploded-image-base exploded-image \
      create-buildjdk docs-jdk-api docs-javase-api docs-reference-api docs-jdk \
<span class="line-modified">!     docs-javase docs-reference docs-javadoc mac-bundles product-images \</span>
      docs-image test-image all-images \
      all-bundles
  
  ################################################################################
  
<span class="line-new-header">--- 1126,18 ---</span>
  
  # all-images builds all our deliverables as images.
  all-images: product-images test-image docs-image
  
  # all-bundles packages all our deliverables as tar.gz bundles.
<span class="line-modified">! all-bundles: product-bundles test-bundles docs-bundles static-libs-bundles</span>
  
  ALL_TARGETS += buildtools hotspot hotspot-libs hotspot-gensrc gensrc gendata \
<span class="line-modified">!     copy java rmic libs static-libs launchers jmods \</span>
      jdk.jdwp.agent-gensrc $(ALL_MODULES) demos \
      exploded-image-base exploded-image \
      create-buildjdk docs-jdk-api docs-javase-api docs-reference-api docs-jdk \
<span class="line-modified">!     docs-javase docs-reference docs-javadoc mac-bundles product-images legacy-images \</span>
      docs-image test-image all-images \
      all-bundles
  
  ################################################################################
  
</pre>
<center><a href="MacBundles.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="MainSupport.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>