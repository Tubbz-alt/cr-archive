<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/Init.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="Images.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="InitSupport.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/Init.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2012, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -45,11 +45,11 @@</span>
    # Include our helper functions.
    include $(topdir)/make/InitSupport.gmk
  
    # Here are &quot;global&quot; targets, i.e. targets that can be executed without having
    # a configuration. This will define ALL_GLOBAL_TARGETS.
<span class="udiff-line-modified-removed">-   include $(topdir)/make/Help.gmk</span>
<span class="udiff-line-modified-added">+   include $(topdir)/make/Global.gmk</span>
  
    # Targets provided by Init.gmk.
    ALL_INIT_TARGETS := print-modules print-targets print-configuration \
        print-tests reconfigure pre-compare-build post-compare-build
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -236,15 +236,17 @@</span>
    endif
  
    ifeq ($(LOG_NOFILE), true)
      # Disable build log if LOG=[level,]nofile was given
      override BUILD_LOG_PIPE :=
<span class="udiff-line-added">+     override BUILD_LOG_PIPE_SIMPLE :=</span>
    endif
  
    ifeq ($(filter dist-clean, $(SEQUENTIAL_TARGETS)), dist-clean)
      # We can&#39;t have a log file if we&#39;re about to remove it.
      override BUILD_LOG_PIPE :=
<span class="udiff-line-added">+     override BUILD_LOG_PIPE_SIMPLE :=</span>
    endif
  
    ifeq ($(OUTPUT_SYNC_SUPPORTED), true)
      OUTPUT_SYNC_FLAG := -O$(OUTPUT_SYNC)
    endif
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -275,11 +277,11 @@</span>
          ifneq ($(CONFIGURE_COMMAND_LINE), )
  	  $(ECHO) &quot;Re-running configure using arguments &#39;$(CONFIGURE_COMMAND_LINE)&#39;&quot;
          else
  	  $(ECHO) &quot;Re-running configure using default settings&quot;
          endif
<span class="udiff-line-modified-removed">- 	( cd $(OUTPUTDIR) &amp;&amp; PATH=&quot;$(ORIGINAL_PATH)&quot; AUTOCONF=&quot;$(AUTOCONF)&quot; \</span>
<span class="udiff-line-modified-added">+ 	( cd $(CONFIGURE_START_DIR) &amp;&amp; PATH=&quot;$(ORIGINAL_PATH)&quot; AUTOCONF=&quot;$(AUTOCONF)&quot; \</span>
  	    CUSTOM_ROOT=&quot;$(CUSTOM_ROOT)&quot; \
  	    CUSTOM_CONFIG_DIR=&quot;$(CUSTOM_CONFIG_DIR)&quot; \
  	    $(BASH) $(TOPDIR)/configure $(CONFIGURE_COMMAND_LINE) )
  
    ##############################################################################
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -301,11 +303,11 @@</span>
    main: MAKEOVERRIDES :=
  
    main: $(INIT_TARGETS)
          ifneq ($(SEQUENTIAL_TARGETS)$(PARALLEL_TARGETS), )
  	  $(call RotateLogFiles)
<span class="udiff-line-modified-removed">- 	  $(PRINTF) &quot;Building $(TARGET_DESCRIPTION)\n&quot; $(BUILD_LOG_PIPE)</span>
<span class="udiff-line-modified-added">+ 	  $(PRINTF) &quot;Building $(TARGET_DESCRIPTION)\n&quot; $(BUILD_LOG_PIPE_SIMPLE)</span>
            ifneq ($(SEQUENTIAL_TARGETS), )
              # Don&#39;t touch build output dir since we might be cleaning. That
              # means no log pipe.
  	    ( cd $(TOPDIR) &amp;&amp; \
  	        $(MAKE) $(MAKE_ARGS) -j 1 -f make/Main.gmk $(USER_MAKE_VARS) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -323,22 +325,22 @@</span>
                      $(if $(JOBS), -j $(JOBS)) \
  	            -f make/Main.gmk $(USER_MAKE_VARS) \
  	            $(PARALLEL_TARGETS) $(COMPARE_BUILD_MAKE) $(BUILD_LOG_PIPE) || \
  	        ( exitcode=$$? &amp;&amp; \
  	        $(PRINTF) &quot;\nERROR: Build failed for $(TARGET_DESCRIPTION) (exit code $$exitcode) \n&quot; \
<span class="udiff-line-modified-removed">- 	            $(BUILD_LOG_PIPE) &amp;&amp; \</span>
<span class="udiff-line-modified-added">+ 	            $(BUILD_LOG_PIPE_SIMPLE) &amp;&amp; \</span>
  	        cd $(TOPDIR) &amp;&amp; $(MAKE) $(MAKE_ARGS) -j 1 -f make/Init.gmk \
  	            HAS_SPEC=true on-failure ; \
  	        exit $$exitcode ) )
  	    $(call CleanupSmartJavac)
  	    $(call StopGlobalTimer)
  	    $(call ReportBuildTimes)
            endif
  	  if test -f $(MAKESUPPORT_OUTPUTDIR)/exit-with-error ; then \
  	    exit 1 ; \
  	  fi
<span class="udiff-line-modified-removed">- 	  $(PRINTF) &quot;Finished building $(TARGET_DESCRIPTION)\n&quot; $(BUILD_LOG_PIPE)</span>
<span class="udiff-line-modified-added">+ 	  $(PRINTF) &quot;Finished building $(TARGET_DESCRIPTION)\n&quot; $(BUILD_LOG_PIPE_SIMPLE)</span>
  	  $(call ReportProfileTimes)
          endif
  
      on-failure:
  	$(call CleanupSmartJavac)
</pre>
<center><a href="Images.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="InitSupport.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>