<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/MainSupport.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="Main.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="ModuleWrapper.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/MainSupport.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 131,20 ***</span>
  	  +($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
  	      -f ModuleWrapper.gmk \
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
  	          $$(addsuffix /$$($1_MAKE_SUBDIR), $$(PHASE_MAKEDIRS)) \
  	      ) \
<span class="line-modified">! 	      MODULE=$2 MAKEFILE_PREFIX=$$($1_FILE_PREFIX))</span>
          else
  	  +($(CD) $$(dir $$(firstword $$(wildcard $$(addsuffix \
  	      /$$($1_MAKE_SUBDIR)/$$($1_FILE_PREFIX)-$2.gmk, $$(PHASE_MAKEDIRS))))) \
  	  &amp;&amp; $(MAKE) $(MAKE_ARGS) \
  	      -f $$($1_FILE_PREFIX)-$2.gmk \
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
  	          $$(addsuffix /$$($1_MAKE_SUBDIR), $$(PHASE_MAKEDIRS)) \
  	      ) \
<span class="line-modified">! 	      MODULE=$2 \</span>
  	  )
          endif
  
  endef
  
<span class="line-new-header">--- 131,20 ---</span>
  	  +($(CD) $(TOPDIR)/make &amp;&amp; $(MAKE) $(MAKE_ARGS) \
  	      -f ModuleWrapper.gmk \
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
  	          $$(addsuffix /$$($1_MAKE_SUBDIR), $$(PHASE_MAKEDIRS)) \
  	      ) \
<span class="line-modified">! 	      MODULE=$2 MAKEFILE_PREFIX=$$($1_FILE_PREFIX) $$($1_EXTRA_ARGS))</span>
          else
  	  +($(CD) $$(dir $$(firstword $$(wildcard $$(addsuffix \
  	      /$$($1_MAKE_SUBDIR)/$$($1_FILE_PREFIX)-$2.gmk, $$(PHASE_MAKEDIRS))))) \
  	  &amp;&amp; $(MAKE) $(MAKE_ARGS) \
  	      -f $$($1_FILE_PREFIX)-$2.gmk \
  	      $$(addprefix -I, $$(PHASE_MAKEDIRS) \
  	          $$(addsuffix /$$($1_MAKE_SUBDIR), $$(PHASE_MAKEDIRS)) \
  	      ) \
<span class="line-modified">! 	      MODULE=$2 $$($1_EXTRA_ARGS) \</span>
  	  )
          endif
  
  endef
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 180,16 ***</span>
  # FILE_PREFIX : File prefix for this build phase
  # USE_WRAPPER : Set to true to use ModuleWrapper.gmk
  # CHECK_MODULES : List of modules to try
  # MULTIPLE_MAKEFILES : Set to true to handle makefiles for the same module and
  #                      phase in multiple repos
  # Exported variables:
  # $1_MODULES : All modules that had rules generated
  # $1_TARGETS : All targets generated
  define DeclareRecipesForPhase
<span class="line-modified">!   $(foreach i,2 3 4 5 6 7, $(if $(strip $($i)),$(strip $1)_$(strip $($i)))$(NEWLINE))</span>
<span class="line-modified">!   $(if $(8),$(error Internal makefile error: Too many arguments to \</span>
        DeclareRecipesForPhase, please update MakeHelper.gmk))
  
    $$(foreach m, $$($(strip $1)_CHECK_MODULES), \
        $$(eval $$(call DeclareRecipesForPhaseAndModule,$(strip $1),$$m)))
  
<span class="line-new-header">--- 180,17 ---</span>
  # FILE_PREFIX : File prefix for this build phase
  # USE_WRAPPER : Set to true to use ModuleWrapper.gmk
  # CHECK_MODULES : List of modules to try
  # MULTIPLE_MAKEFILES : Set to true to handle makefiles for the same module and
  #                      phase in multiple repos
<span class="line-added">+ # EXTRA_ARGS : Add extra make args to each makefile call</span>
  # Exported variables:
  # $1_MODULES : All modules that had rules generated
  # $1_TARGETS : All targets generated
  define DeclareRecipesForPhase
<span class="line-modified">!   $(foreach i,2 3 4 5 6 7 8, $(if $(strip $($i)),$(strip $1)_$(strip $($i)))$(NEWLINE))</span>
<span class="line-modified">!   $(if $(9),$(error Internal makefile error: Too many arguments to \</span>
        DeclareRecipesForPhase, please update MakeHelper.gmk))
  
    $$(foreach m, $$($(strip $1)_CHECK_MODULES), \
        $$(eval $$(call DeclareRecipesForPhaseAndModule,$(strip $1),$$m)))
  
</pre>
<center><a href="Main.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="ModuleWrapper.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>