<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames make/scripts/compare.sh</title>
    <link rel="stylesheet" href="../../style.css" />
    <script type="text/javascript" src="../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 #!/bin/bash
   2 #
<a name="1" id="anc1"></a><span class="line-modified">   3 # Copyright (c) 2012, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   4 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   5 #
   6 # This code is free software; you can redistribute it and/or modify it
   7 # under the terms of the GNU General Public License version 2 only, as
   8 # published by the Free Software Foundation.
   9 #
  10 # This code is distributed in the hope that it will be useful, but WITHOUT
  11 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  12 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  13 # version 2 for more details (a copy is included in the LICENSE file that
  14 # accompanied this code).
  15 #
  16 # You should have received a copy of the GNU General Public License version
  17 # 2 along with this work; if not, write to the Free Software Foundation,
  18 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  19 #
  20 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  21 # or visit www.oracle.com if you need additional information or have any
  22 # questions.
  23 #
  24 
  25 # This script is processed by configure before it&#39;s usable. It is run from
  26 # the root of the build directory.
  27 
  28 
  29 ################################################################################
  30 
  31 # Check that we are run via the wrapper generated by configure
  32 if [ -z &quot;$TOPDIR&quot; ]; then
  33     echo &quot;Error: You must run this script using build/[conf]/compare.sh&quot;
  34     exit 1
  35 fi
  36 
<a name="2" id="anc2"></a>


  37 if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
  38     FULLDUMP_CMD=&quot;$OTOOL -v -V -h -X -d&quot;
  39     LDD_CMD=&quot;$OTOOL -L&quot;
  40     DIS_CMD=&quot;$OTOOL -v -V -t&quot;
  41     STAT_PRINT_SIZE=&quot;-f %z&quot;
  42 elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
  43     FULLDUMP_CMD=&quot;$DUMPBIN -all&quot;
  44     LDD_CMD=&quot;$DUMPBIN -dependents&quot;
  45     DIS_CMD=&quot;$DUMPBIN -disasm:nobytes&quot;
  46     STAT_PRINT_SIZE=&quot;-c %s&quot;
  47 elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;aix&quot; ]; then
  48     FULLDUMP_CMD=&quot;dump -h -r -t -n -X64&quot;
  49     LDD_CMD=&quot;$LDD&quot;
  50     DIS_CMD=&quot;$OBJDUMP -d&quot;
  51     STAT_PRINT_SIZE=&quot;-c %s&quot;
  52 else
  53     FULLDUMP_CMD=&quot;$READELF -a&quot;
  54     LDD_CMD=&quot;$LDD&quot;
  55     DIS_CMD=&quot;$OBJDUMP -d&quot;
  56     STAT_PRINT_SIZE=&quot;-c %s&quot;
  57 fi
  58 
  59 COMPARE_EXCEPTIONS_INCLUDE=&quot;$TOPDIR/make/scripts/compare_exceptions.sh.incl&quot;
  60 if [ ! -e &quot;$COMPARE_EXCEPTIONS_INCLUDE&quot; ]; then
  61     echo &quot;Error: Cannot locate the exceptions file, it should have been here: $COMPARE_EXCEPTIONS_INCLUDE&quot;
  62     exit 1
  63 fi
  64 # Include exception definitions
  65 . &quot;$COMPARE_EXCEPTIONS_INCLUDE&quot;
  66 
  67 ################################################################################
  68 #
  69 # Disassembly diff filters. These filters try to filter out ephemeral parts of the
  70 # disassembly, such as hard-coded addresses, to be able to catch &quot;actual&quot; differences.
  71 
  72 if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;solaris&quot; ]; then
  73   if [ &quot;$OPENJDK_TARGET_CPU&quot; = &quot;sparcv9&quot; ]; then
  74     DIS_DIFF_FILTER=&quot;$SED \
  75         -e &#39;s/^[0-9a-f]\{16\}/&lt;ADDR&gt;:/&#39; \
  76         -e &#39;s/^ *[0-9a-f]\{3,12\}:/  &lt;ADDR&gt;:/&#39; \
  77         -e &#39;s/:	[0-9a-f][0-9a-f]\( [0-9a-f][0-9a-f]\)\{2,10\}/:	&lt;NUMS&gt;/&#39; \
  78         -e &#39;s/\$[a-zA-Z0-9_\$]\{15\}\./&lt;SYM&gt;./&#39; \
  79         -e &#39;s/, [0-9a-fx\-]\{1,8\}/, &lt;ADDR&gt;/g&#39; \
  80         -e &#39;s/0x[0-9a-f]\{1,8\}/&lt;HEX&gt;/g&#39; \
  81         -e &#39;s/\! [0-9a-f]\{1,8\} /! &lt;ADDR&gt; /&#39; \
  82         -e &#39;s/call  [0-9a-f]\{4,7\}/call  &lt;ADDR&gt;/&#39; \
  83         -e &#39;s/%hi(0),/%hi(&lt;HEX&gt;),/&#39; \
  84         &quot;
  85   elif [ &quot;$OPENJDK_TARGET_CPU&quot; = &quot;x86_64&quot; ]; then
  86     # Random strings looking like this differ: &lt;.XAKoKoPIac2W0OA.
  87     DIS_DIFF_FILTER=&quot;$SED \
  88         -e &#39;s/&lt;\.[A-Za-z0-9]\{\15}\./&lt;.SYM./&#39; \
  89         &quot;
  90   fi
  91 elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
  92   if [ &quot;$OPENJDK_TARGET_CPU&quot; = &quot;x86&quot; ]; then
  93     DIS_DIFF_FILTER=&quot;$SED -r \
  94         -e &#39;s/^  [0-9A-F]{16}: //&#39; \
  95         -e &#39;s/^  [0-9A-F]{8}: /  &lt;ADDR&gt;: /&#39; \
  96         -e &#39;s/(offset \?\?)_C@_.*/\1&lt;SYM&gt;/&#39; \
  97         -e &#39;s/[@?][A-Za-z0-9_]{1,25}/&lt;SYM&gt;/&#39; \
  98         -e &#39;s/([-,+])[0-9A-F]{2,16}/\1&lt;HEXSTR&gt;/g&#39; \
  99         -e &#39;s/\[[0-9A-F]{4,16}h\]/[&lt;HEXSTR&gt;]/&#39; \
 100         -e &#39;s/: ([a-z]{2}[a-z ]{2})        [0-9A-F]{2,16}h?$/: \1        &lt;HEXSTR&gt;/&#39; \
 101         -e &#39;s/_20[0-9]{2}_[0-1][0-9]_[0-9]{2}/_&lt;DATE&gt;/&#39; \
 102         &quot;
 103   elif [ &quot;$OPENJDK_TARGET_CPU&quot; = &quot;x86_64&quot; ]; then
 104     DIS_DIFF_FILTER=&quot;$SED -r \
 105         -e &#39;s/^  [0-9A-F]{16}: //&#39; \
 106         -e &#39;s/\[[0-9A-F]{4,16}h\]/[&lt;HEXSTR&gt;]/&#39; \
 107         -e &#39;s/([,+])[0-9A-F]{2,16}h/\1&lt;HEXSTR&gt;/&#39; \
 108         -e &#39;s/([a-z]{2}[a-z ]{2})        [0-9A-F]{4,16}$/\1        &lt;HEXSTR&gt;/&#39; \
 109         -e &#39;s/\[\?\?_C@_.*/[&lt;SYM&gt;]/&#39; \
 110         &quot;
 111   fi
 112 elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
<a name="3" id="anc3"></a><span class="line-modified"> 113   DIS_DIFF_FILTER=&quot;LANG=C $SED \</span>
 114       -e &#39;s/0x[0-9a-f]\{3,16\}/&lt;HEXSTR&gt;/g&#39; -e &#39;s/^[0-9a-f]\{12,20\}/&lt;ADDR&gt;/&#39; \
 115       -e &#39;s/-20[0-9][0-9]-[0-1][0-9]-[0-3][0-9]-[0-2][0-9]\{5\}/&lt;DATE&gt;/g&#39; \
 116       -e &#39;s/), built on .*/), &lt;DATE&gt;/&#39; \
 117       &quot;
 118 fi
 119 
 120 ################################################################################
 121 # Compare text files and ignore specific differences:
 122 #
 123 #  * Timestamps in Java sources generated by idl2java
 124 #  * Sorting order and cleanup style in .properties files
 125 
 126 diff_text() {
 127     OTHER_FILE=$1
 128     THIS_FILE=$2
 129 
 130     SUFFIX=&quot;${THIS_FILE##*.}&quot;
 131     NAME=&quot;${THIS_FILE##*/}&quot;
 132 
 133     TMP=1
 134 
 135     if [[ &quot;$THIS_FILE&quot; = *&quot;META-INF/MANIFEST.MF&quot; ]]; then
 136         # Filter out date string, ant version and java version differences.
<a name="4" id="anc4"></a><span class="line-modified"> 137         TMP=$(LC_ALL=C $DIFF $OTHER_FILE $THIS_FILE | \</span>
 138             $GREP &#39;^[&lt;&gt;]&#39; | \
 139             $SED -e &#39;/[&lt;&gt;] Ant-Version: Apache Ant .*/d&#39; \
 140                  -e &#39;/[&lt;&gt;] Created-By: .* (Oracle [Corpatin)]*/d&#39; \
 141                  -e &#39;/[&lt;&gt;]  [Corpatin]*)/d&#39; \
 142                  -e &#39;/[&lt;&gt;].*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39;)
 143     fi
 144     if test &quot;x$SUFFIX&quot; = &quot;xjava&quot;; then
<a name="5" id="anc5"></a><span class="line-modified"> 145         TMP=$(LC_ALL=C $DIFF $OTHER_FILE $THIS_FILE | \</span>
 146             $GREP &#39;^[&lt;&gt;]&#39; | \
 147             $SED -e &#39;/[&lt;&gt;] \* from.*\.idl/d&#39; \
 148                  -e &#39;/[&lt;&gt;] .*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39; \
 149                  -e &#39;/[&lt;&gt;] .*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39; \
 150                  -e &#39;/[&lt;&gt;] \*.*[0-9]\{4\} \(at \)*[0-9][0-9]*:[0-9]\{2\}:[0-9]\{2\}.*/d&#39; \
 151                  -e &#39;/\/\/ Generated from input file.*/d&#39; \
 152                  -e &#39;/\/\/ This file was generated AUTOMATICALLY from a template file.*/d&#39; \
 153                  -e &#39;/\/\/ java GenerateCharacter.*/d&#39;)
 154     fi
 155     # Ignore date strings in class files.
 156     # Anonymous lambda classes get randomly assigned counters in their names.
 157     if test &quot;x$SUFFIX&quot; = &quot;xclass&quot;; then
 158         if [ &quot;$NAME&quot; = &quot;SystemModules\$all.class&quot; ] \
 159            || [ &quot;$NAME&quot; = &quot;SystemModules\$default.class&quot; ]; then
 160             # The SystemModules\$*.classes are not comparable as they contain the
 161             # module hashes which would require a whole other level of
 162             # reproducible builds to get reproducible. There is also random
 163             # order of map initialization.
 164             TMP=&quot;&quot;
 165         elif [ &quot;$NAME&quot; = &quot;module-info.class&quot; ]; then
 166             # The module-info.class have several issues with random ordering of
 167             # elements in HashSets.
 168             MODULES_CLASS_FILTER=&quot;$SED \
 169                 -e &#39;s/,$//&#39; \
 170                 -e &#39;s/;$//&#39; \
 171                 -e &#39;s/^ *[0-9]*://&#39; \
 172                 -e &#39;s/#[0-9]* */#/&#39; \
 173                 -e &#39;s/ *\/\// \/\//&#39; \
 174                 -e &#39;s/aload *[0-9]*/aload X/&#39; \
 175                 -e &#39;s/ldc_w/ldc  /&#39; \
 176                 | $SORT \
 177                 &quot;
 178             $JAVAP -c -constants -l -p &quot;${OTHER_FILE}&quot; \
 179                 | eval &quot;$MODULES_CLASS_FILTER&quot; &gt;  ${OTHER_FILE}.javap &amp;
 180             $JAVAP -c -constants -l -p &quot;${THIS_FILE}&quot; \
 181                 | eval &quot;$MODULES_CLASS_FILTER&quot; &gt; ${THIS_FILE}.javap &amp;
 182             wait
 183             TMP=$($DIFF ${OTHER_FILE}.javap ${THIS_FILE}.javap)
 184         # To improve performance when large diffs are found, do a rough filtering of classes
 185         # elibeble for these exceptions
 186         elif $GREP -R -e &#39;[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}&#39; \
 187                 -e &#39;lambda\$[a-zA-Z0-9]*\$[0-9]&#39; ${THIS_FILE} &gt; /dev/null
 188         then
 189             $JAVAP -c -constants -l -p &quot;${OTHER_FILE}&quot; &gt;  ${OTHER_FILE}.javap &amp;
 190             $JAVAP -c -constants -l -p &quot;${THIS_FILE}&quot; &gt; ${THIS_FILE}.javap &amp;
 191             wait
 192             TMP=$($DIFF ${OTHER_FILE}.javap ${THIS_FILE}.javap | \
 193                 $GREP &#39;^[&lt;&gt;]&#39; | \
 194                 $SED -e &#39;/[&lt;&gt;].*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39; \
 195                      -e &#39;/[&lt;&gt;].*lambda\$[a-zA-Z0-9]*\$[0-9]*/d&#39;)
 196         fi
 197     fi
 198     if test &quot;x$SUFFIX&quot; = &quot;xproperties&quot;; then
 199         # Filter out date string differences.
<a name="6" id="anc6"></a><span class="line-modified"> 200         TMP=$(LC_ALL=C $DIFF $OTHER_FILE $THIS_FILE | \</span>
 201             $GREP &#39;^[&lt;&gt;]&#39; | \
 202             $SED -e &#39;/[&lt;&gt;].*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39;)
 203     fi
 204     if test &quot;x$SUFFIX&quot; = &quot;xhtml&quot;; then
<a name="7" id="anc7"></a><span class="line-modified"> 205 	# Some javadoc versions do not put quotes around font size</span>
<span class="line-modified"> 206 	HTML_FILTER=&quot;$SED \</span>
 207             -e &#39;s/&lt;font size=-1&gt;/&lt;font size=\&quot;-1\&quot;&gt;/g&#39;&quot;
<a name="8" id="anc8"></a><span class="line-modified"> 208 	$CAT $THIS_FILE | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE.filtered</span>
<span class="line-modified"> 209 	$CAT $OTHER_FILE | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE.filtered</span>
<span class="line-modified"> 210         TMP=$(LC_ALL=C $DIFF $OTHER_FILE.filtered $THIS_FILE.filtered | \</span>
 211             $GREP &#39;^[&lt;&gt;]&#39; | \
 212             $SED -e &#39;/[&lt;&gt;] &lt;!-- Generated by javadoc .* on .* --&gt;/d&#39; \
<a name="9" id="anc9"></a><span class="line-modified"> 213 	         -e &#39;/[&lt;&gt;] &lt;meta name=&quot;date&quot; content=&quot;.*&quot;&gt;/d&#39; )</span>





 214     fi
 215     if test -n &quot;$TMP&quot;; then
 216         echo Files $OTHER_FILE and $THIS_FILE differ
 217         return 1
 218     fi
 219 
 220     return 0
 221 }
 222 
 223 ################################################################################
 224 # Compare directory structure
 225 
 226 compare_dirs() {
 227     THIS_DIR=$1
 228     OTHER_DIR=$2
 229     WORK_DIR=$3
 230 
 231     mkdir -p $WORK_DIR
 232 
 233     (cd $OTHER_DIR &amp;&amp; $FIND . -type d | $SORT &gt; $WORK_DIR/dirs_other)
 234     (cd $THIS_DIR &amp;&amp; $FIND . -type d | $SORT &gt; $WORK_DIR/dirs_this)
 235 
 236     $DIFF $WORK_DIR/dirs_other $WORK_DIR/dirs_this &gt; $WORK_DIR/dirs_diff
 237 
 238     echo -n Directory structure...
 239     if [ -s $WORK_DIR/dirs_diff ]; then
 240         echo Differences found.
 241         REGRESSIONS=true
 242         # Differences in directories found.
 243         ONLY_OTHER=$($GREP &#39;&lt;&#39; $WORK_DIR/dirs_diff)
 244         if [ &quot;$ONLY_OTHER&quot; ]; then
 245             echo Only in $OTHER
 246             $GREP &#39;&lt;&#39; $WORK_DIR/dirs_diff | $SED &#39;s|&lt; ./|    |g&#39;
 247         fi
 248         ONLY_THIS=$($GREP &#39;&gt;&#39; $WORK_DIR/dirs_diff)
 249         if [ &quot;$ONLY_THIS&quot; ]; then
 250             echo Only in $THIS
 251             $GREP &#39;&gt;&#39; $WORK_DIR/dirs_diff | $SED &#39;s|&gt; ./|    |g&#39;
 252         fi
 253     else
 254         echo Identical!
 255     fi
 256 }
 257 
 258 
 259 ################################################################################
 260 # Compare file structure
 261 
 262 compare_files() {
 263     THIS_DIR=$1
 264     OTHER_DIR=$2
 265     WORK_DIR=$3
 266 
 267     $MKDIR -p $WORK_DIR
 268 
 269     (cd $OTHER_DIR &amp;&amp; $FIND . ! -type d | $SORT &gt; $WORK_DIR/files_other)
 270     (cd $THIS_DIR &amp;&amp; $FIND . ! -type d | $SORT &gt; $WORK_DIR/files_this)
 271 
 272     $DIFF $WORK_DIR/files_other $WORK_DIR/files_this &gt; $WORK_DIR/files_diff
 273 
 274     echo -n File names...
 275     if [ -s $WORK_DIR/files_diff ]; then
 276         echo Differences found.
 277         REGRESSIONS=true
 278         # Differences in files found.
 279         ONLY_OTHER=$($GREP &#39;&lt;&#39; $WORK_DIR/files_diff)
 280         if [ &quot;$ONLY_OTHER&quot; ]; then
 281             echo Only in $OTHER
 282             $GREP &#39;&lt;&#39; $WORK_DIR/files_diff | $SED &#39;s|&lt; ./|    |g&#39;
 283         fi
 284         ONLY_THIS=$($GREP &#39;&gt;&#39; $WORK_DIR/files_diff)
 285         if [ &quot;$ONLY_THIS&quot; ]; then
 286             echo Only in $THIS
 287             $GREP &#39;&gt;&#39; $WORK_DIR/files_diff | $SED &#39;s|&gt; ./|    |g&#39;
 288         fi
 289     else
 290         echo Identical!
 291     fi
 292 }
 293 
 294 
 295 ################################################################################
 296 # Compare permissions
 297 
 298 compare_permissions() {
 299     THIS_DIR=$1
 300     OTHER_DIR=$2
 301     WORK_DIR=$3
 302 
 303     mkdir -p $WORK_DIR
 304 
 305     echo -n Permissions...
 306     found=&quot;&quot;
 307     for f in `cd $OTHER_DIR &amp;&amp; $FIND . -type f`
 308     do
 309         if [ ! -f ${OTHER_DIR}/$f ]; then continue; fi
 310         if [ ! -f ${THIS_DIR}/$f ]; then continue; fi
 311         OP=`ls -l ${OTHER_DIR}/$f | awk &#39;{printf(&quot;%.10s\n&quot;, $1);}&#39;`
 312         TP=`ls -l ${THIS_DIR}/$f | awk &#39;{printf(&quot;%.10s\n&quot;, $1);}&#39;`
 313         if [ &quot;$OP&quot; != &quot;$TP&quot; ]
 314         then
 315             if [ -z &quot;$found&quot; ]; then echo ; found=&quot;yes&quot;; fi
 316             $PRINTF &quot;\tother: ${OP} this: ${TP}\t$f\n&quot;
 317         fi
 318     done
 319     if [ -z &quot;$found&quot; ]; then
 320         echo &quot;Identical!&quot;
 321     else
 322         REGRESSIONS=true
 323     fi
 324 }
 325 
 326 ################################################################################
 327 # Compare file command output
 328 
 329 compare_file_types() {
 330     THIS_DIR=$1
 331     OTHER_DIR=$2
 332     WORK_DIR=$3
 333 
 334     $MKDIR -p $WORK_DIR
 335 
 336     FILE_TYPES_FILTER=&quot;$SED \
 337         -e &#39;s/BuildID[^,]*//&#39; \
 338         -e &#39;s/last modified: .*//&#39; \
 339         &quot;
 340 
 341     echo -n File types...
 342     found=&quot;&quot;
 343     # The file command does not know about jmod files and this sometimes results
 344     # in different types being detected more or less randomly.
 345     for f in $(cd $OTHER_DIR &amp;&amp; $FIND . ! -type d -a ! -name &quot;*.jmod&quot;)
 346     do
 347         if [ ! -f ${OTHER_DIR}/$f ]; then continue; fi
 348         if [ ! -f ${THIS_DIR}/$f ]; then continue; fi
 349         OF=$(cd ${OTHER_DIR} &amp;&amp; $FILE -h $f | eval $FILE_TYPES_FILTER)
 350         TF=$(cd ${THIS_DIR} &amp;&amp; $FILE -h $f | eval $FILE_TYPES_FILTER)
 351         if [ &quot;$OF&quot; != &quot;$TF&quot; ]
 352         then
 353             if [ &quot;`echo $OF | $GREP -c &#39;Zip archive data&#39;`&quot; -gt 0 ] \
 354                 &amp;&amp; [ &quot;`echo $TF | $GREP -c &#39;Zip archive data&#39;`&quot; -gt 0 ]
 355             then
 356                 # the way we produce zip-files make it so that directories are stored in
 357                 # old file but not in new (only files with full-path) this makes file
 358                 # report them as different
 359                 continue
<a name="10" id="anc10"></a>





 360             else
 361                 if [ -z &quot;$found&quot; ]; then echo ; found=&quot;yes&quot;; fi
 362                 $PRINTF &quot;\tother: ${OF}\n\tthis : ${TF}\n&quot;
 363             fi
 364         fi
 365     done
 366     if [ -z &quot;$found&quot; ]; then
 367         echo &quot;Identical!&quot;
 368     else
 369         REGRESSIONS=true
 370     fi
 371 }
 372 
 373 ################################################################################
 374 # Compare the rest of the files
 375 
 376 compare_general_files() {
 377     THIS_DIR=$1
 378     OTHER_DIR=$2
 379     WORK_DIR=$3
 380 
 381     GENERAL_FILES=$(cd $THIS_DIR &amp;&amp; $FIND . -type f ! -name &quot;*.so&quot; ! -name &quot;*.jar&quot; \
 382         ! -name &quot;*.zip&quot; ! -name &quot;*.debuginfo&quot; ! -name &quot;*.dylib&quot; ! -name &quot;jexec&quot; \
 383         ! -name &quot;modules&quot; ! -name &quot;ct.sym&quot; ! -name &quot;*.diz&quot; ! -name &quot;*.dll&quot; \
 384         ! -name &quot;*.cpl&quot; ! -name &quot;*.pdb&quot; ! -name &quot;*.exp&quot; ! -name &quot;*.ilk&quot; \
<a name="11" id="anc11"></a><span class="line-modified"> 385         ! -name &quot;*.lib&quot; ! -name &quot;*.war&quot; ! -name &quot;JavaControlPanel&quot; ! -name &quot;*.jmod&quot; \</span>
<span class="line-modified"> 386         ! -name &quot;*.obj&quot; ! -name &quot;*.o&quot; ! -name &quot;JavaControlPanelHelper&quot; \</span>
<span class="line-modified"> 387         ! -name &quot;JavaUpdater&quot; ! -name &quot;JavaWSApplicationStub&quot; \</span>
<span class="line-modified"> 388         ! -name &quot;jspawnhelper&quot; ! -name &quot;JavawsLauncher&quot; ! -name &quot;*.a&quot; \</span>
<span class="line-removed"> 389         ! -name &quot;finish_installation&quot; ! -name &quot;Sparkle&quot; ! -name &quot;*.tar.gz&quot; \</span>
<span class="line-removed"> 390         ! -name &quot;classes.jsa&quot; \</span>
 391         | $GREP -v &quot;./bin/&quot;  | $SORT | $FILTER)
 392 
 393     echo Other files with binary differences...
 394     for f in $GENERAL_FILES
 395     do
<a name="12" id="anc12"></a>



 396         if [ -e $OTHER_DIR/$f ]; then
 397             SUFFIX=&quot;${f##*.}&quot;
 398             if [ &quot;$(basename $f)&quot; = &quot;release&quot; ]; then
 399                 # In release file, ignore differences in change numbers and order
 400                 # of modules in list.
 401                 OTHER_FILE=$WORK_DIR/$f.other
 402                 THIS_FILE=$WORK_DIR/$f.this
 403                 $MKDIR -p $(dirname $OTHER_FILE)
 404                 $MKDIR -p $(dirname $THIS_FILE)
 405                 RELEASE_FILTER=&quot;$SED \
 406                     -e &#39;s/\:[0-9a-f]\{12,12\}/:CHANGE/g&#39; \
 407                     -e &#39;s/[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}/&lt;DATE&gt;/g&#39; \
 408                     -e &#39;s/^#.*/#COMMENT/g&#39; \
 409                     -e &#39;s/MODULES=/MODULES=\&#39;$&#39;\n/&#39; \
 410                     -e &#39;s/,/\&#39;$&#39;\n/g&#39; \
 411                     | $SORT
 412                     &quot;
 413                 $CAT $OTHER_DIR/$f | eval &quot;$RELEASE_FILTER&quot; &gt; $OTHER_FILE
 414                 $CAT $THIS_DIR/$f  | eval &quot;$RELEASE_FILTER&quot; &gt; $THIS_FILE
 415             elif [ &quot;x$SUFFIX&quot; = &quot;xhtml&quot; ]; then
 416                 # Ignore time stamps in docs files
 417                 OTHER_FILE=$WORK_DIR/$f.other
 418                 THIS_FILE=$WORK_DIR/$f.this
 419                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
 420                 # Older versions of compare might have left soft links with
 421                 # these names.
 422                 $RM $OTHER_FILE $THIS_FILE
 423                 #Note that | doesn&#39;t work on mac sed.
 424                 HTML_FILTER=&quot;$SED \
 425                     -e &#39;s/20[0-9]\{2\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6,7\}/&lt;DATE&gt;/g&#39; \
 426                     -e &#39;s/20[0-9]\{2\}-[0-9]\{2\}-[0-9]\{2\}/&lt;DATE&gt;/g&#39; \
 427                     -e &#39;s/\(-- Generated by javadoc \).*\( --\)/\1(removed)\2/&#39; \
 428                     -e &#39;s/[A-Z][a-z]*, [A-Z][a-z]* [0-9][0-9]*, [0-9]\{4\} [0-9][0-9:]* [AMP]\{2,2\} [A-Z][A-Z]*/&lt;DATE&gt;/&#39; \
 429                     -e &#39;s/from .*\.idl/\.idl/&#39; \
 430                     &quot;
 431                 $CAT $OTHER_DIR/$f | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE &amp;
 432                 $CAT $THIS_DIR/$f  | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE &amp;
 433                 wait
<a name="13" id="anc13"></a><span class="line-modified"> 434             elif [[ &quot;$f&quot; = *&quot;/lib/classlist&quot; ]]; then</span>










 435                 # The classlist files may have some lines in random order
 436                 OTHER_FILE=$WORK_DIR/$f.other
 437                 THIS_FILE=$WORK_DIR/$f.this
 438                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
 439                 $RM $OTHER_FILE $THIS_FILE
 440                 $CAT $OTHER_DIR/$f | $SORT &gt; $OTHER_FILE
 441                 $CAT $THIS_DIR/$f  | $SORT &gt; $THIS_FILE
 442             else
 443                 OTHER_FILE=$OTHER_DIR/$f
 444                 THIS_FILE=$THIS_DIR/$f
 445             fi
 446             DIFF_OUT=$($DIFF $OTHER_FILE $THIS_FILE 2&gt;&amp;1)
 447             if [ -n &quot;$DIFF_OUT&quot; ]; then
 448                 echo $f
 449                 REGRESSIONS=true
 450                 if [ &quot;$SHOW_DIFFS&quot; = &quot;true&quot; ]; then
 451                     echo &quot;$DIFF_OUT&quot;
 452                 fi
 453             fi
 454         fi
 455     done
 456 
 457 
 458 }
 459 
 460 ################################################################################
 461 # Compare zip file
 462 
 463 compare_zip_file() {
 464     THIS_DIR=$1
 465     OTHER_DIR=$2
 466     WORK_DIR=$3
 467     ZIP_FILE=$4
 468     # Optionally provide different name for other zipfile
 469     OTHER_ZIP_FILE=$5
 470 
 471     THIS_ZIP=$THIS_DIR/$ZIP_FILE
 472     if [ -n &quot;$OTHER_ZIP_FILE&quot; ]; then
 473         OTHER_ZIP=$OTHER_DIR/$OTHER_ZIP_FILE
 474     else
 475         OTHER_ZIP=$OTHER_DIR/$ZIP_FILE
 476     fi
 477 
 478     THIS_SUFFIX=&quot;${THIS_ZIP##*.}&quot;
 479     OTHER_SUFFIX=&quot;${OTHER_ZIP##*.}&quot;
 480     if [ &quot;$THIS_SUFFIX&quot; != &quot;$OTHER_SUFFIX&quot; ]; then
 481         echo &quot;The files do not have the same suffix type! ($THIS_SUFFIX != $OTHER_SUFFIX)&quot;
 482         return 2
 483     fi
 484 
 485     TYPE=&quot;$THIS_SUFFIX&quot;
 486 
 487     if $CMP $OTHER_ZIP $THIS_ZIP &gt; /dev/null
 488     then
 489         return 0
 490     fi
 491     # Not quite identical, the might still contain the same data.
 492     # Unpack the jar/zip files in temp dirs
 493 
 494     THIS_UNZIPDIR=$WORK_DIR/$ZIP_FILE.this
 495     OTHER_UNZIPDIR=$WORK_DIR/$ZIP_FILE.other
 496     $RM -rf $THIS_UNZIPDIR $OTHER_UNZIPDIR
 497     $MKDIR -p $THIS_UNZIPDIR
 498     $MKDIR -p $OTHER_UNZIPDIR
 499     if [ &quot;$TYPE&quot; = &quot;jar&quot; -o &quot;$TYPE&quot; = &quot;war&quot; -o &quot;$TYPE&quot; = &quot;zip&quot; ]
 500     then
 501         (cd $THIS_UNZIPDIR &amp;&amp; $UNARCHIVE $THIS_ZIP)
 502         (cd $OTHER_UNZIPDIR &amp;&amp; $UNARCHIVE $OTHER_ZIP)
 503     elif [ &quot;$TYPE&quot; = &quot;gz&quot; ]
 504     then
 505         (cd $THIS_UNZIPDIR &amp;&amp; $GUNZIP -c $THIS_ZIP | $TAR xf -)
 506         (cd $OTHER_UNZIPDIR &amp;&amp; $GUNZIP -c $OTHER_ZIP | $TAR xf -)
 507     elif [ &quot;$TYPE&quot; = &quot;jmod&quot; ]
 508     then
 509         (cd $THIS_UNZIPDIR &amp;&amp; $JMOD extract $THIS_ZIP)
 510         (cd $OTHER_UNZIPDIR &amp;&amp; $JMOD extract $OTHER_ZIP)
 511     else
 512         (cd $THIS_UNZIPDIR &amp;&amp; $JIMAGE extract $THIS_ZIP)
 513         (cd $OTHER_UNZIPDIR &amp;&amp; $JIMAGE extract $OTHER_ZIP)
 514     fi
 515 
<a name="14" id="anc14"></a><span class="line-removed"> 516     # Find all archives inside and unzip them as well to compare the contents rather than</span>
<span class="line-removed"> 517     # the archives. pie.jar.pack.gz i app3.war is corrupt, skip it.</span>
<span class="line-removed"> 518     EXCEPTIONS=&quot;pie.jar.pack.gz jdk.pack&quot;</span>
<span class="line-removed"> 519     for pack in $($FIND $THIS_UNZIPDIR \( -name &quot;*.pack&quot; -o -name &quot;*.pack.gz&quot; \) -a \</span>
<span class="line-removed"> 520                         ! -name pie.jar.pack.gz -a ! -name jdk.pack); do</span>
<span class="line-removed"> 521         ($UNPACK200 $pack $pack.jar)</span>
<span class="line-removed"> 522         # Filter out the unzipped archives from the diff below.</span>
<span class="line-removed"> 523         EXCEPTIONS=&quot;$EXCEPTIONS $pack $pack.jar&quot;</span>
<span class="line-removed"> 524     done</span>
<span class="line-removed"> 525     for pack in $($FIND $OTHER_UNZIPDIR \( -name &quot;*.pack&quot; -o -name &quot;*.pack.gz&quot; \) -a \</span>
<span class="line-removed"> 526                         ! -name pie.jar.pack.gz -a ! -name jdk.pack); do</span>
<span class="line-removed"> 527         ($UNPACK200 $pack $pack.jar)</span>
<span class="line-removed"> 528         EXCEPTIONS=&quot;$EXCEPTIONS $pack $pack.jar&quot;</span>
<span class="line-removed"> 529     done</span>
<span class="line-removed"> 530     for zip in $($FIND $THIS_UNZIPDIR -name &quot;*.jar&quot; -o -name &quot;*.zip&quot;); do</span>
<span class="line-removed"> 531         $MKDIR $zip.unzip</span>
<span class="line-removed"> 532         (cd $zip.unzip &amp;&amp; $UNARCHIVE $zip)</span>
<span class="line-removed"> 533         EXCEPTIONS=&quot;$EXCEPTIONS $zip&quot;</span>
<span class="line-removed"> 534     done</span>
<span class="line-removed"> 535     for zip in $($FIND $OTHER_UNZIPDIR -name &quot;*.jar&quot; -o -name &quot;*.zip&quot;); do</span>
<span class="line-removed"> 536         $MKDIR $zip.unzip</span>
<span class="line-removed"> 537         (cd $zip.unzip &amp;&amp; $UNARCHIVE $zip)</span>
<span class="line-removed"> 538         EXCEPTIONS=&quot;$EXCEPTIONS $zip&quot;</span>
<span class="line-removed"> 539     done</span>
<span class="line-removed"> 540 </span>
 541     CONTENTS_DIFF_FILE=$WORK_DIR/$ZIP_FILE.diff
 542     # On solaris, there is no -q option.
 543     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;solaris&quot; ]; then
<a name="15" id="anc15"></a><span class="line-modified"> 544         LC_ALL=C $DIFF -r $OTHER_UNZIPDIR $THIS_UNZIPDIR \</span>
 545             | $GREP -v -e &quot;^&lt;&quot; -e &quot;^&gt;&quot; -e &quot;^Common subdirectories:&quot; \
 546             &gt; $CONTENTS_DIFF_FILE
 547     else
<a name="16" id="anc16"></a><span class="line-modified"> 548         LC_ALL=C $DIFF -rq $OTHER_UNZIPDIR $THIS_UNZIPDIR &gt; $CONTENTS_DIFF_FILE</span>
 549     fi
 550 
 551     ONLY_OTHER=$($GREP &quot;^Only in $OTHER_UNZIPDIR&quot; $CONTENTS_DIFF_FILE)
 552     ONLY_THIS=$($GREP &quot;^Only in $THIS_UNZIPDIR&quot; $CONTENTS_DIFF_FILE)
 553 
 554     return_value=0
 555 
 556     if [ -n &quot;$ONLY_OTHER&quot; ]; then
 557         echo &quot;        Only OTHER $ZIP_FILE contains:&quot;
 558         echo &quot;$ONLY_OTHER&quot; | sed &quot;s|Only in $OTHER_UNZIPDIR|            |&quot;g | sed &#39;s|: |/|g&#39;
 559         return_value=1
 560     fi
 561 
 562     if [ -n &quot;$ONLY_THIS&quot; ]; then
 563         echo &quot;        Only THIS $ZIP_FILE contains:&quot;
 564         echo &quot;$ONLY_THIS&quot; | sed &quot;s|Only in $THIS_UNZIPDIR|            |&quot;g | sed &#39;s|: |/|g&#39;
 565         return_value=1
 566     fi
 567 
 568     if [ &quot;$CMP_ZIPS_CONTENTS&quot; = &quot;true&quot; ]; then
 569         if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;solaris&quot; ]; then
 570             DIFFING_FILES=$($GREP -e &#39;differ$&#39; -e &#39;^diff &#39; $CONTENTS_DIFF_FILE \
 571                 | $SED -e &#39;s/^Files //g&#39; -e &#39;s/diff -r //g&#39; | $CUT -f 1 -d &#39; &#39; \
 572                 | $SED &quot;s|$OTHER_UNZIPDIR/||g&quot;)
 573         else
 574             DIFFING_FILES=$($GREP -e &quot;differ$&quot; $CONTENTS_DIFF_FILE \
 575                 | $CUT -f 2 -d &#39; &#39; | $SED &quot;s|$OTHER_UNZIPDIR/||g&quot;)
 576         fi
 577 
<a name="17" id="anc17"></a><span class="line-modified"> 578         $RM -f $WORK_DIR/$ZIP_FILE.diffs</span>


 579         for file in $DIFFING_FILES; do
<a name="18" id="anc18"></a>










 580             if [[ &quot;$ACCEPTED_JARZIP_CONTENTS $EXCEPTIONS&quot; != *&quot;$file&quot;* ]]; then
 581                 diff_text $OTHER_UNZIPDIR/$file $THIS_UNZIPDIR/$file &gt;&gt; $WORK_DIR/$ZIP_FILE.diffs
 582             fi
 583         done
 584 
 585         if [ -s &quot;$WORK_DIR/$ZIP_FILE.diffs&quot; ]; then
 586             return_value=1
 587             echo &quot;        Differing files in $ZIP_FILE&quot;
 588             $CAT $WORK_DIR/$ZIP_FILE.diffs | $GREP &#39;differ$&#39; | cut -f 2 -d &#39; &#39; | \
 589                 $SED &quot;s|$OTHER_UNZIPDIR|            |g&quot; &gt; $WORK_DIR/$ZIP_FILE.difflist
 590             $CAT $WORK_DIR/$ZIP_FILE.difflist
 591 
 592             if [ -n &quot;$SHOW_DIFFS&quot; ]; then
 593                 for i in $(cat $WORK_DIR/$ZIP_FILE.difflist) ; do
 594                     if [ -f &quot;${OTHER_UNZIPDIR}/$i.javap&quot; ]; then
<a name="19" id="anc19"></a><span class="line-modified"> 595                         LC_ALL=C $DIFF ${OTHER_UNZIPDIR}/$i.javap ${THIS_UNZIPDIR}/$i.javap</span>
 596                     elif [ -f &quot;${OTHER_UNZIPDIR}/$i.cleaned&quot; ]; then
<a name="20" id="anc20"></a><span class="line-modified"> 597                         LC_ALL=C $DIFF ${OTHER_UNZIPDIR}/$i.cleaned ${THIS_UNZIPDIR}/$i</span>
 598                     else
<a name="21" id="anc21"></a><span class="line-modified"> 599                         LC_ALL=C $DIFF ${OTHER_UNZIPDIR}/$i ${THIS_UNZIPDIR}/$i</span>
 600                     fi
 601                 done
 602             fi
 603         fi
<a name="22" id="anc22"></a>








 604     fi
 605 
 606     return $return_value
 607 }
 608 
 609 ################################################################################
 610 # Compare jmod file
 611 
 612 compare_jmod_file() {
 613     THIS_DIR=$1
 614     OTHER_DIR=$2
 615     WORK_DIR=$3
 616     JMOD_FILE=$4
 617 
 618     THIS_JMOD=$THIS_DIR/$JMOD_FILE
 619     OTHER_JMOD=$OTHER_DIR/$JMOD_FILE
 620 
 621     if $CMP $OTHER_JMOD $THIS_JMOD &gt; /dev/null; then
 622         return 0
 623     fi
 624 
 625     THIS_JMOD_LIST=$WORK_DIR/$JMOD_FILE.list.this
 626     OTHER_JMOD_LIST=$WORK_DIR/$JMOD_FILE.list.other
 627     mkdir -p $(dirname $THIS_JMOD_LIST) $(dirname $OTHER_JMOD_LIST)
 628 
 629     $JMOD list $THIS_JMOD | sort &gt; $THIS_JMOD_LIST
 630     $JMOD list $OTHER_JMOD | sort &gt; $OTHER_JMOD_LIST
 631     JMOD_LIST_DIFF_FILE=$WORK_DIR/$JMOD_FILE.list.diff
<a name="23" id="anc23"></a><span class="line-modified"> 632     LC_ALL=C $DIFF $THIS_JMOD_LIST $OTHER_JMOD_LIST &gt; $JMOD_LIST_DIFF_FILE</span>
 633 
 634     ONLY_THIS=$($GREP &quot;^&lt;&quot; $JMOD_LIST_DIFF_FILE)
 635     ONLY_OTHER=$($GREP &quot;^&gt;&quot; $JMOD_LIST_DIFF_FILE)
 636 
 637     if [ -n &quot;$ONLY_OTHER&quot; ]; then
 638         echo &quot;        Only OTHER $JMOD_FILE contains:&quot;
 639         echo &quot;$ONLY_OTHER&quot; | sed &quot;s|^&gt;|            |&quot;g | sed &#39;s|: |/|g&#39;
 640         return_value=1
 641     fi
 642 
 643     if [ -n &quot;$ONLY_THIS&quot; ]; then
 644         echo &quot;        Only THIS $JMOD_FILE contains:&quot;
 645         echo &quot;$ONLY_THIS&quot; | sed &quot;s|^&lt;|            |&quot;g | sed &#39;s|: |/|g&#39;
 646         return_value=1
 647     fi
 648 
 649     return $return_value
 650 }
 651 
 652 ################################################################################
 653 # Compare all zip files
 654 
 655 compare_all_zip_files() {
 656     THIS_DIR=$1
 657     OTHER_DIR=$2
 658     WORK_DIR=$3
 659 
 660     ZIPS=$(cd $THIS_DIR &amp;&amp; $FIND . -type f -name &quot;*.zip&quot; -o -name &quot;*.tar.gz&quot; \
 661         | $SORT | $FILTER )
 662 
 663     if [ -n &quot;$ZIPS&quot; ]; then
 664         echo Zip/tar.gz files...
 665 
 666         return_value=0
 667         for f in $ZIPS; do
 668             if [ -f &quot;$OTHER_DIR/$f&quot; ]; then
 669                 compare_zip_file $THIS_DIR $OTHER_DIR $WORK_DIR $f
 670                 if [ &quot;$?&quot; != &quot;0&quot; ]; then
 671                     return_value=1
 672                     REGRESSIONS=true
 673                 fi
 674             fi
 675         done
 676     fi
 677 
 678     return $return_value
 679 }
 680 
 681 ################################################################################
 682 # Compare all jmod files
 683 
 684 compare_all_jmod_files() {
 685     THIS_DIR=$1
 686     OTHER_DIR=$2
 687     WORK_DIR=$3
 688 
 689     JMODS=$(cd $THIS_DIR &amp;&amp; $FIND . -type f -name &quot;*.jmod&quot; | $SORT | $FILTER )
 690 
 691     if [ -n &quot;$JMODS&quot; ]; then
 692         echo Jmod files...
 693 
 694         return_value=0
 695         for f in $JMODS; do
 696             if [ -f &quot;$OTHER_DIR/$f&quot; ]; then
 697                 compare_jmod_file $THIS_DIR $OTHER_DIR $WORK_DIR $f
 698                 if [ &quot;$?&quot; != &quot;0&quot; ]; then
 699                     return_value=1
 700                     REGRESSIONS=true
 701                 fi
 702             fi
 703         done
 704     fi
 705 
 706     return $return_value
 707 }
 708 
 709 ################################################################################
 710 # Compare all jar files
 711 
 712 compare_all_jar_files() {
 713     THIS_DIR=$1
 714     OTHER_DIR=$2
 715     WORK_DIR=$3
 716 
 717     # TODO filter?
 718     ZIPS=$(cd $THIS_DIR &amp;&amp; $FIND . -type f -name &quot;*.jar&quot; -o -name &quot;*.war&quot; \
 719         -o -name &quot;modules&quot; | $SORT | $FILTER)
 720 
 721     if [ -n &quot;$ZIPS&quot; ]; then
 722         echo Jar files...
 723 
 724         return_value=0
 725         for f in $ZIPS; do
 726             if [ -f &quot;$OTHER_DIR/$f&quot; ]; then
 727                 compare_zip_file $THIS_DIR $OTHER_DIR $WORK_DIR $f
 728                 if [ &quot;$?&quot; != &quot;0&quot; ]; then
 729                     return_value=1
 730                     REGRESSIONS=true
 731                 fi
 732             fi
 733         done
 734     fi
 735 
 736     return $return_value
 737 }
 738 
 739 ################################################################################
 740 # Compare binary (executable/library) file
 741 
 742 compare_bin_file() {
 743     THIS_DIR=$1
 744     OTHER_DIR=$2
 745     WORK_DIR=$3
 746     BIN_FILE=$4
 747     OTHER_BIN_FILE=$5
 748 
 749     THIS_FILE=$THIS_DIR/$BIN_FILE
 750     if [ -n &quot;$OTHER_BIN_FILE&quot; ]; then
 751         OTHER_FILE=$OTHER_DIR/$OTHER_BIN_FILE
 752     else
 753         OTHER_FILE=$OTHER_DIR/$BIN_FILE
 754     fi
 755     NAME=$(basename $BIN_FILE)
 756     WORK_FILE_BASE=$WORK_DIR/$BIN_FILE
 757     FILE_WORK_DIR=$(dirname $WORK_FILE_BASE)
 758 
 759     $MKDIR -p $FILE_WORK_DIR
 760 
 761     # Make soft links to original files from work dir to facilitate debugging
 762     $LN -f -s $THIS_FILE $WORK_FILE_BASE.this
 763     $LN -f -s $OTHER_FILE $WORK_FILE_BASE.other
 764 
 765     ORIG_THIS_FILE=&quot;$THIS_FILE&quot;
 766     ORIG_OTHER_FILE=&quot;$OTHER_FILE&quot;
 767 
 768     if [ &quot;$STRIP_ALL&quot; = &quot;true&quot; ] || [[ &quot;$STRIP_BEFORE_COMPARE&quot; = *&quot;$BIN_FILE&quot;* ]]; then
 769         THIS_STRIPPED_FILE=$FILE_WORK_DIR/this/$NAME
 770         OTHER_STRIPPED_FILE=$FILE_WORK_DIR/other/$NAME
 771         $MKDIR -p $FILE_WORK_DIR/this $FILE_WORK_DIR/other
 772         $CP $THIS_FILE $THIS_STRIPPED_FILE
 773         $CP $OTHER_FILE $OTHER_STRIPPED_FILE
 774         $STRIP $THIS_STRIPPED_FILE
 775         $STRIP $OTHER_STRIPPED_FILE
 776         THIS_FILE=&quot;$THIS_STRIPPED_FILE&quot;
 777         OTHER_FILE=&quot;$OTHER_STRIPPED_FILE&quot;
 778     fi
 779 
 780     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
 781         unset _NT_SYMBOL_PATH
 782         if [ &quot;$(uname -o)&quot; = &quot;Cygwin&quot; ]; then
 783             THIS=$(cygpath -msa $THIS)
 784             OTHER=$(cygpath -msa $OTHER)
 785         fi
 786         # Build an _NT_SYMBOL_PATH that contains all known locations for
 787         # pdb files.
 788         PDB_DIRS=&quot;$(ls -d \
 789             {$OTHER,$THIS}/support/modules_{cmds,libs}/{*,*/*} \
 790             {$OTHER,$THIS}/support/native/java.base/java_objs \
<a name="24" id="anc24"></a>
 791             )&quot;
 792         export _NT_SYMBOL_PATH=&quot;$(echo $PDB_DIRS | tr &#39; &#39; &#39;;&#39;)&quot;
 793     fi
 794 
<a name="25" id="anc25"></a><span class="line-modified"> 795     if [ -z &quot;$SKIP_BIN_DIFF&quot; ]; then</span>
<span class="line-removed"> 796         if cmp $OTHER_FILE $THIS_FILE &gt; /dev/null; then</span>
 797         # The files were bytewise identical.
<a name="26" id="anc26"></a><span class="line-modified"> 798             if [ -n &quot;$VERBOSE&quot; ]; then</span>
<span class="line-modified"> 799                 echo &quot;        :           :         :         :          :          : $BIN_FILE&quot;</span>
<span class="line-removed"> 800             fi</span>
<span class="line-removed"> 801             return 0</span>
 802         fi
<a name="27" id="anc27"></a>


 803         BIN_MSG=&quot; diff &quot;
 804         if [[ &quot;$ACCEPTED_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 805             DIFF_BIN=true
 806             if [[ &quot;$KNOWN_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 807                 BIN_MSG=&quot;*$BIN_MSG*&quot;
 808                 REGRESSIONS=true
 809             else
 810                 BIN_MSG=&quot; $BIN_MSG &quot;
 811             fi
 812         else
 813             BIN_MSG=&quot;($BIN_MSG)&quot;
 814             DIFF_BIN=
 815         fi
<a name="28" id="anc28"></a>


 816     fi
 817 
 818     if [ -n &quot;$STAT&quot; ]; then
 819         THIS_SIZE=$($STAT $STAT_PRINT_SIZE &quot;$THIS_FILE&quot;)
 820         OTHER_SIZE=$($STAT $STAT_PRINT_SIZE &quot;$OTHER_FILE&quot;)
 821     else
 822         THIS_SIZE=$(ls -l &quot;$THIS_FILE&quot; | awk &#39;{ print $5 }&#39;)
 823         OTHER_SIZE=$(ls -l &quot;$OTHER_FILE&quot; | awk &#39;{ print $5 }&#39;)
 824     fi
 825     if [ $THIS_SIZE -ne $OTHER_SIZE ]; then
 826         DIFF_SIZE_NUM=$($EXPR $THIS_SIZE - $OTHER_SIZE)
 827         DIFF_SIZE_REL=$($EXPR $THIS_SIZE \* 100 / $OTHER_SIZE)
 828         SIZE_MSG=$($PRINTF &quot;%3d%% %4d&quot; $DIFF_SIZE_REL $DIFF_SIZE_NUM)
<a name="29" id="anc29"></a><span class="line-modified"> 829         if [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] &amp;&amp; [ &quot;$DIFF_SIZE_REL&quot; -gt 98 ] \</span>

 830             &amp;&amp; [ &quot;$DIFF_SIZE_REL&quot; -lt 102 ]; then
 831             SIZE_MSG=&quot;($SIZE_MSG)&quot;
 832             DIFF_SIZE=
 833         elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ] \
 834             &amp;&amp; [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] \
 835             &amp;&amp; [ &quot;$DIFF_SIZE_NUM&quot; = 512 ]; then
 836             # On windows, size of binaries increase in 512 increments.
 837             SIZE_MSG=&quot;($SIZE_MSG)&quot;
 838             DIFF_SIZE=
 839         elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ] \
 840             &amp;&amp; [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] \
 841             &amp;&amp; [ &quot;$DIFF_SIZE_NUM&quot; = -512 ]; then
 842             # On windows, size of binaries increase in 512 increments.
 843             SIZE_MSG=&quot;($SIZE_MSG)&quot;
 844             DIFF_SIZE=
 845         else
 846             if [[ &quot;$ACCEPTED_SIZE_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 847                 DIFF_SIZE=true
 848                 if [[ &quot;$KNOWN_SIZE_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 849                     SIZE_MSG=&quot;*$SIZE_MSG*&quot;
 850                     REGRESSIONS=true
 851                 else
 852                     SIZE_MSG=&quot; $SIZE_MSG &quot;
 853                 fi
 854             else
 855                 SIZE_MSG=&quot;($SIZE_MSG)&quot;
 856                 DIFF_SIZE=
 857             fi
 858         fi
 859     else
 860         SIZE_MSG=&quot;           &quot;
 861         DIFF_SIZE=
 862         if [[ &quot;$KNOWN_SIZE_DIFF $ACCEPTED_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]]; then
 863             SIZE_MSG=&quot;     !     &quot;
 864         fi
 865     fi
 866 
 867     if [ &quot;$SORT_ALL_SYMBOLS&quot; = &quot;true&quot; ] || [[ &quot;$SORT_SYMBOLS&quot; = *&quot;$BIN_FILE&quot;* ]]; then
 868         SYM_SORT_CMD=&quot;sort&quot;
 869     else
 870         SYM_SORT_CMD=&quot;cat&quot;
 871     fi
 872 
 873     if [ -n &quot;$SYMBOLS_DIFF_FILTER&quot; ] &amp;&amp; [ -z &quot;$NEED_SYMBOLS_DIFF_FILTER&quot; ] \
 874             || [[ &quot;$NEED_SYMBOLS_DIFF_FILTER&quot; = *&quot;$BIN_FILE&quot;* ]]; then
 875         this_SYMBOLS_DIFF_FILTER=&quot;$SYMBOLS_DIFF_FILTER&quot;
 876     else
 877         this_SYMBOLS_DIFF_FILTER=&quot;$CAT&quot;
 878     fi
 879 
 880     # Check symbols
 881     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
 882         # The output from dumpbin on windows differs depending on if the debug symbol
 883         # files are still around at the location the binary is pointing too. Need
 884         # to filter out that extra information.
 885         $DUMPBIN -exports $OTHER_FILE | $GREP  -E &#39;^ +[0-9A-F]+ +[0-9A-F]+ [0-9A-F]+&#39; | sed &#39;s/ = .*//g&#39; | cut -c27- | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.other
 886         $DUMPBIN -exports $THIS_FILE  | $GREP  -E &#39;^ +[0-9A-F]+ +[0-9A-F]+ [0-9A-F]+&#39; | sed &#39;s/ = .*//g&#39; | cut -c27- | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.this
 887     elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;solaris&quot; ]; then
 888         # Some symbols get seemingly random 15 character prefixes. Filter them out.
 889         $NM -a $ORIG_OTHER_FILE 2&gt; /dev/null | $GREP -v $NAME | $AWK &#39;{print $2, $3, $4, $5}&#39; | $SED &#39;s/^\([a-zA-Z] [\.\$]\)[a-zA-Z0-9_\$]\{15,15\}\./\1./g&#39; | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.other
 890         $NM -a $ORIG_THIS_FILE  2&gt; /dev/null | $GREP -v $NAME | $AWK &#39;{print $2, $3, $4, $5}&#39; | $SED &#39;s/^\([a-zA-Z] [\.\$]\)[a-zA-Z0-9_\$]\{15,15\}\./\1./g&#39; | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.this
 891     elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;aix&quot; ]; then
 892         $OBJDUMP -T $ORIG_OTHER_FILE 2&gt; /dev/null | $GREP -v $NAME | $AWK &#39;{print $2, $3, $4, $5}&#39; | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.other
 893         $OBJDUMP -T $ORIG_THIS_FILE  2&gt; /dev/null | $GREP -v $NAME | $AWK &#39;{print $2, $3, $4, $5}&#39; | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.this
 894     elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
 895         $NM -j $ORIG_OTHER_FILE 2&gt; /dev/null | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.other
 896         $NM -j $ORIG_THIS_FILE  2&gt; /dev/null | $SYM_SORT_CMD &gt; $WORK_FILE_BASE.symbols.this
 897     else
 898         $NM -a $ORIG_OTHER_FILE 2&gt; /dev/null | $GREP -v $NAME \
 899             | $AWK &#39;{print $2, $3, $4, $5}&#39; \
 900             | eval &quot;$this_SYMBOLS_DIFF_FILTER&quot; \
 901             | $SYM_SORT_CMD \
 902             &gt; $WORK_FILE_BASE.symbols.other
 903         $NM -a $ORIG_THIS_FILE  2&gt; /dev/null | $GREP -v $NAME \
 904             | $AWK &#39;{print $2, $3, $4, $5}&#39; \
 905             | eval &quot;$this_SYMBOLS_DIFF_FILTER&quot; \
 906             | $SYM_SORT_CMD \
 907             &gt; $WORK_FILE_BASE.symbols.this
 908     fi
 909 
<a name="30" id="anc30"></a><span class="line-modified"> 910     LC_ALL=C $DIFF $WORK_FILE_BASE.symbols.other $WORK_FILE_BASE.symbols.this &gt; $WORK_FILE_BASE.symbols.diff</span>
 911     if [ -s $WORK_FILE_BASE.symbols.diff ]; then
 912         SYM_MSG=&quot; diff  &quot;
 913         if [[ &quot;$ACCEPTED_SYM_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 914             DIFF_SYM=true
 915             if [[ &quot;$KNOWN_SYM_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 916                 SYM_MSG=&quot;*$SYM_MSG*&quot;
 917                 REGRESSIONS=true
 918             else
 919                 SYM_MSG=&quot; $SYM_MSG &quot;
 920             fi
 921         else
 922             SYM_MSG=&quot;($SYM_MSG)&quot;
 923             DIFF_SYM=
 924         fi
 925     else
 926         SYM_MSG=&quot;         &quot;
 927         DIFF_SYM=
 928         if [[ &quot;$KNOWN_SYM_DIFF $ACCEPTED_SYM_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]]; then
 929             SYM_MSG=&quot;    !    &quot;
 930         fi
 931     fi
 932 
 933     # Check dependencies
 934     if [ -n &quot;$LDD_CMD&quot; ]; then
 935         if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
 936             LDD_FILTER=&quot;$GREP \.dll&quot;
 937         else
 938             LDD_FILTER=&quot;$CAT&quot;
 939         fi
 940         (cd $FILE_WORK_DIR &amp;&amp; $CP $OTHER_FILE . &amp;&amp; $LDD_CMD $NAME 2&gt;/dev/null \
 941                     | $LDD_FILTER | $AWK &#39;{ print $1;}&#39; | $SORT \
 942                     | $TEE $WORK_FILE_BASE.deps.other \
 943                     | $UNIQ &gt; $WORK_FILE_BASE.deps.other.uniq)
 944         (cd $FILE_WORK_DIR &amp;&amp; $CP $THIS_FILE . &amp;&amp; $LDD_CMD $NAME 2&lt;/dev/null \
 945                     | $LDD_FILTER | $AWK &#39;{ print $1;}&#39; | $SORT \
 946                     | $TEE $WORK_FILE_BASE.deps.this \
 947                     | $UNIQ &gt; $WORK_FILE_BASE.deps.this.uniq)
 948         (cd $FILE_WORK_DIR &amp;&amp; $RM -f $NAME)
 949 
<a name="31" id="anc31"></a><span class="line-modified"> 950         LC_ALL=C $DIFF $WORK_FILE_BASE.deps.other $WORK_FILE_BASE.deps.this \</span>
 951               &gt; $WORK_FILE_BASE.deps.diff
<a name="32" id="anc32"></a><span class="line-modified"> 952         LC_ALL=C $DIFF $WORK_FILE_BASE.deps.other.uniq $WORK_FILE_BASE.deps.this.uniq \</span>
 953               &gt; $WORK_FILE_BASE.deps.diff.uniq
 954 
 955         if [ -s $WORK_FILE_BASE.deps.diff ]; then
 956             if [ -s $WORK_FILE_BASE.deps.diff.uniq ]; then
 957                 DEP_MSG=&quot; diff  &quot;
 958             else
 959                 DEP_MSG=&quot; redun &quot;
 960             fi
 961             if [[ &quot;$ACCEPTED_DEP_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 962                 DIFF_DEP=true
 963                 if [[ &quot;$KNOWN_DEP_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
 964                     DEP_MSG=&quot;*$DEP_MSG*&quot;
 965                     REGRESSIONS=true
 966                 else
 967                     DEP_MSG=&quot; $DEP_MSG &quot;
 968                 fi
 969             else
 970                 DEP_MSG=&quot;($DEP_MSG)&quot;
 971                 DIFF_DEP=
 972             fi
 973         else
 974             DEP_MSG=&quot;         &quot;
 975             DIFF_DEP=
 976             if [[ &quot;$KNOWN_DEP_DIFF $ACCEPTED_DEP_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]]; then
 977                 DEP_MSG=&quot;     !      &quot;
 978             fi
 979         fi
 980     else
 981         DEP_MSG=&quot;    -    &quot;
 982     fi
 983 
 984     # Some linux compilers add a unique Build ID
 985     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;linux&quot; ]; then
 986       BUILD_ID_FILTER=&quot;$SED -r &#39;s/(Build ID:) [0-9a-f]{40}/\1/&#39;&quot;
 987     else
 988       BUILD_ID_FILTER=&quot;$CAT&quot;
 989     fi
 990 
 991     # Compare fulldump output
 992     if [ -n &quot;$FULLDUMP_CMD&quot; ] &amp;&amp; [ -z &quot;$SKIP_FULLDUMP_DIFF&quot; ]; then
 993         if [ -z &quot;$FULLDUMP_DIFF_FILTER&quot; ]; then
 994             FULLDUMP_DIFF_FILTER=&quot;$CAT&quot;
 995         fi
 996         $FULLDUMP_CMD $OTHER_FILE | eval &quot;$BUILD_ID_FILTER&quot; | eval &quot;$FULLDUMP_DIFF_FILTER&quot; \
 997             &gt; $WORK_FILE_BASE.fulldump.other 2&gt;&amp;1 &amp;
 998         $FULLDUMP_CMD $THIS_FILE  | eval &quot;$BUILD_ID_FILTER&quot; | eval &quot;$FULLDUMP_DIFF_FILTER&quot; \
 999             &gt; $WORK_FILE_BASE.fulldump.this  2&gt;&amp;1 &amp;
1000         wait
1001 
<a name="33" id="anc33"></a><span class="line-modified">1002         LC_ALL=C $DIFF $WORK_FILE_BASE.fulldump.other $WORK_FILE_BASE.fulldump.this \</span>
1003             &gt; $WORK_FILE_BASE.fulldump.diff
1004 
1005         if [ -s $WORK_FILE_BASE.fulldump.diff ]; then
1006             FULLDUMP_DIFF_SIZE=$(ls -n $WORK_FILE_BASE.fulldump.diff | awk &#39;{print $5}&#39;)
1007             FULLDUMP_MSG=$($PRINTF &quot;%8d&quot; $FULLDUMP_DIFF_SIZE)
1008             if [[ &quot;$ACCEPTED_FULLDUMP_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
1009                 DIFF_FULLDUMP=true
1010                 if [[ &quot;$KNOWN_FULLDUMP_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
1011                     FULLDUMP_MSG=&quot;*$FULLDUMP_MSG*&quot;
1012                     REGRESSIONS=true
1013                 else
1014                     FULLDUMP_MSG=&quot; $FULLDUMP_MSG &quot;
1015                 fi
1016             else
1017                 FULLDUMP_MSG=&quot;($FULLDUMP_MSG)&quot;
1018                 DIFF_FULLDUMP=
1019             fi
1020         else
1021             FULLDUMP_MSG=&quot;          &quot;
1022             DIFF_FULLDUMP=
1023             if [[ &quot;$KNOWN_FULLDUMP_DIFF $ACCEPTED_FULLDUMP_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]]; then
1024                 FULLDUMP_MSG=&quot;    !    &quot;
1025             fi
1026         fi
1027     fi
1028 
1029     # Compare disassemble output
1030     if [ -n &quot;$DIS_CMD&quot; ] &amp;&amp; [ -z &quot;$SKIP_DIS_DIFF&quot; ]; then
1031         this_DIS_DIFF_FILTER=&quot;$CAT&quot;
1032         if [ -n &quot;$DIS_DIFF_FILTER&quot; ]; then
1033             if [ -z &quot;$NEED_DIS_DIFF_FILTER&quot; ] \
1034                 || [[ &quot;$NEED_DIS_DIFF_FILTER&quot; = *&quot;$BIN_FILE&quot;* ]]; then
1035                 this_DIS_DIFF_FILTER=&quot;$DIS_DIFF_FILTER&quot;
1036             fi
1037         fi
1038         if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
1039             DIS_GREP_ARG=-a
1040         else
1041             DIS_GREP_ARG=
1042         fi
1043         $DIS_CMD $OTHER_FILE | $GREP $DIS_GREP_ARG -v $NAME \
1044             | eval &quot;$this_DIS_DIFF_FILTER&quot; &gt; $WORK_FILE_BASE.dis.other 2&gt;&amp;1 &amp;
1045         $DIS_CMD $THIS_FILE  | $GREP $DIS_GREP_ARG -v $NAME \
1046             | eval &quot;$this_DIS_DIFF_FILTER&quot; &gt; $WORK_FILE_BASE.dis.this  2&gt;&amp;1 &amp;
1047         wait
1048 
<a name="34" id="anc34"></a><span class="line-modified">1049         LC_ALL=C $DIFF $WORK_FILE_BASE.dis.other $WORK_FILE_BASE.dis.this &gt; $WORK_FILE_BASE.dis.diff</span>
1050 
1051         if [ -s $WORK_FILE_BASE.dis.diff ]; then
1052             DIS_DIFF_SIZE=$(ls -n $WORK_FILE_BASE.dis.diff | awk &#39;{print $5}&#39;)
1053             DIS_MSG=$($PRINTF &quot;%8d&quot; $DIS_DIFF_SIZE)
1054             if [[ &quot;$ACCEPTED_DIS_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
1055                 DIFF_DIS=true
1056                 if [ &quot;$MAX_KNOWN_DIS_DIFF_SIZE&quot; = &quot;&quot; ]; then
1057                     MAX_KNOWN_DIS_DIFF_SIZE=&quot;0&quot;
1058                 fi
1059                 if [[ &quot;$KNOWN_DIS_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] \
1060                     &amp;&amp; [ &quot;$DIS_DIFF_SIZE&quot; -lt &quot;$MAX_KNOWN_DIS_DIFF_SIZE&quot; ]; then
1061                     DIS_MSG=&quot; $DIS_MSG &quot;
1062                 else
1063                     DIS_MSG=&quot;*$DIS_MSG*&quot;
1064                     REGRESSIONS=true
1065                 fi
1066             else
1067                 DIS_MSG=&quot;($DIS_MSG)&quot;
1068                 DIFF_DIS=
1069             fi
1070         else
1071             DIS_MSG=&quot;          &quot;
1072             DIFF_DIS=
1073             if [[ &quot;$KNOWN_DEP_DIFF $ACCEPTED_DEP_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]]; then
1074                 DIS_MSG=&quot;    !    &quot;
1075             fi
1076         fi
1077     fi
1078 
1079 
1080     if [ -n &quot;$DIFF_BIN$DIFF_SIZE$DIFF_SYM$DIFF_DEP$DIFF_FULLDUMP$DIFF_DIS&quot; ] || [ -n &quot;$VERBOSE&quot; ]; then
1081         if [ -n &quot;$BIN_MSG&quot; ]; then echo -n &quot;$BIN_MSG:&quot;; fi
1082         if [ -n &quot;$SIZE_MSG&quot; ]; then echo -n &quot;$SIZE_MSG:&quot;; fi
1083         if [ -n &quot;$SYM_MSG&quot; ]; then echo -n &quot;$SYM_MSG:&quot;; fi
1084         if [ -n &quot;$DEP_MSG&quot; ]; then echo -n &quot;$DEP_MSG:&quot;; fi
1085         if [ -n &quot;$FULLDUMP_MSG&quot; ]; then echo -n &quot;$FULLDUMP_MSG:&quot;; fi
1086         if [ -n &quot;$DIS_MSG&quot; ]; then echo -n &quot;$DIS_MSG:&quot;; fi
1087         echo &quot; $BIN_FILE&quot;
1088         if [ &quot;$SHOW_DIFFS&quot; = &quot;true&quot; ]; then
1089             if [ -s &quot;$WORK_FILE_BASE.symbols.diff&quot; ]; then
1090                 echo &quot;Symbols diff:&quot;
1091                 $CAT $WORK_FILE_BASE.symbols.diff
1092             fi
1093             if [ -s &quot;$WORK_FILE_BASE.deps.diff&quot; ]; then
1094                 echo &quot;Deps diff:&quot;
1095                 $CAT $WORK_FILE_BASE.deps.diff
1096             fi
1097             if [ -s &quot;$WORK_FILE_BASE.fulldump.diff&quot; ]; then
1098                 echo &quot;Fulldump diff:&quot;
1099                 $CAT $WORK_FILE_BASE.fulldump.diff
1100             fi
1101             if [ -s &quot;$WORK_FILE_BASE.dis.diff&quot; ]; then
1102                 echo &quot;Disassembly diff:&quot;
1103                 $CAT $WORK_FILE_BASE.dis.diff
1104             fi
1105         fi
1106         return 1
1107     fi
1108     return 0
1109 }
1110 
1111 ################################################################################
1112 # Print binary diff header
1113 
1114 print_binary_diff_header() {
1115     if [ -z &quot;$SKIP_BIN_DIFF&quot; ]; then echo -n &quot; Binary :&quot;; fi
1116     if [ -z &quot;$SKIP_SIZE_DIFF&quot; ]; then echo -n &quot;   Size    :&quot;; fi
1117     if [ -z &quot;$SKIP_SYM_DIFF&quot; ]; then echo -n &quot; Symbols :&quot;; fi
1118     if [ -z &quot;$SKIP_DEP_DIFF&quot; ]; then echo -n &quot;  Deps   :&quot;; fi
1119     if [ -z &quot;$SKIP_FULLDUMP_DIFF&quot; ]; then echo -n &quot; Fulldump :&quot;; fi
1120     if [ -z &quot;$SKIP_DIS_DIFF&quot; ]; then echo -n &quot; Disass   :&quot;; fi
1121     echo
1122 }
1123 
1124 ################################################################################
1125 # Compare all libraries
1126 
1127 compare_all_libs() {
1128     THIS_DIR=$1
1129     OTHER_DIR=$2
1130     WORK_DIR=$3
1131 
1132     LIBS=$(cd $THIS_DIR &amp;&amp; $FIND . -type f \( -name &#39;lib*.so&#39; -o -name &#39;*.dylib&#39; \
1133         -o -name &#39;*.dll&#39; -o -name &#39;*.obj&#39; -o -name &#39;*.o&#39; -o -name &#39;*.a&#39; \
1134         -o -name &#39;*.cpl&#39; \) | $SORT | $FILTER)
1135 
1136     # On macos, filter out the dSYM debug symbols files as they are also
1137     # named *.dylib.
1138     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
1139         LIBS=$(echo &quot;$LIBS&quot; | $GREP -v &#39;\.dSYM/&#39;)
1140     fi
1141 
1142     if [ -n &quot;$LIBS&quot; ]; then
1143         echo Libraries...
1144         print_binary_diff_header
1145         for l in $LIBS; do
1146             if [ -f &quot;$OTHER_DIR/$l&quot; ]; then
1147                 compare_bin_file $THIS_DIR $OTHER_DIR $WORK_DIR $l
1148                 if [ &quot;$?&quot; != &quot;0&quot; ]; then
1149                     return_value=1
1150                 fi
1151             fi
1152         done
1153     fi
1154 
1155     return $return_value
1156 }
1157 
1158 ################################################################################
1159 # Compare all executables
1160 
1161 compare_all_execs() {
1162     THIS_DIR=$1
1163     OTHER_DIR=$2
1164     WORK_DIR=$3
1165 
1166     if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
1167         EXECS=$(cd $THIS_DIR &amp;&amp; $FIND . -type f -name &#39;*.exe&#39; | $SORT | $FILTER)
1168     else
1169         EXECS=$(cd $THIS_DIR &amp;&amp; $FIND . -name db -prune -o -type f -perm -100 \! \
1170             \( -name &#39;*.so&#39; -o -name &#39;*.dylib&#39; -o -name &#39;*.dll&#39; -o -name &#39;*.cgi&#39; \
1171             -o -name &#39;*.jar&#39; -o -name &#39;*.diz&#39; -o -name &#39;jcontrol&#39; -o -name &#39;*.properties&#39; \
1172             -o -name &#39;*.data&#39; -o -name &#39;*.bfc&#39; -o -name &#39;*.src&#39; -o -name &#39;*.txt&#39; \
1173             -o -name &#39;*.cfg&#39; -o -name &#39;meta-index&#39; -o -name &#39;*.properties.ja&#39; \
1174             -o -name &#39;*.xml&#39; -o -name &#39;*.html&#39; -o -name &#39;*.png&#39; -o -name &#39;README&#39; \
1175             -o -name &#39;*.zip&#39; -o -name &#39;*.jimage&#39; -o -name &#39;*.java&#39; -o -name &#39;*.mf&#39; \
1176             -o -name &#39;*.jpg&#39; -o -name &#39;*.wsdl&#39; -o -name &#39;*.js&#39; -o -name &#39;*.sh&#39; \
1177             -o -name &#39;*.bat&#39; -o -name &#39;*LICENSE&#39; -o -name &#39;*.d&#39; -o -name &#39;*store&#39; \
1178             -o -name &#39;blacklist&#39; -o -name &#39;*certs&#39; -o -name &#39;*.ttf&#39; \
1179             -o -name &#39;*.jfc&#39; -o -name &#39;*.dat&#39;  -o -name &#39;release&#39; -o -name &#39;*.dir&#39;\
1180             -o -name &#39;*.sym&#39; -o -name &#39;*.idl&#39; -o -name &#39;*.h&#39; -o -name &#39;*.access&#39; \
1181             -o -name &#39;*.template&#39; -o -name &#39;*.policy&#39; -o -name &#39;*.security&#39; \
1182             -o -name &#39;COPYRIGHT&#39; -o -name &#39;*.1&#39; -o -name &#39;*.debuginfo&#39; \
1183             -o -name &#39;classlist&#39; \) | $SORT | $FILTER)
1184     fi
1185 
1186     if [ -n &quot;$EXECS&quot; ]; then
1187         echo Executables...
1188         print_binary_diff_header
1189         for e in $EXECS; do
1190             if [ -f &quot;$OTHER_DIR/$e&quot; ]; then
1191                 compare_bin_file $THIS_DIR $OTHER_DIR $WORK_DIR $e
1192                 if [ &quot;$?&quot; != &quot;0&quot; ]; then
1193                     return_value=1
1194                 fi
1195             fi
1196         done
1197     fi
1198 
1199     return $return_value
1200 }
1201 
1202 ################################################################################
1203 # Initiate configuration
1204 
1205 THIS=&quot;$SCRIPT_DIR&quot;
1206 echo &quot;$THIS&quot;
1207 THIS_SCRIPT=&quot;$0&quot;
1208 
1209 if [ -z &quot;$1&quot; ] || [ &quot;$1&quot; = &quot;-h&quot; ] || [ &quot;$1&quot; = &quot;-?&quot; ] || [ &quot;$1&quot; = &quot;/h&quot; ] || [ &quot;$1&quot; = &quot;/?&quot; ] || [ &quot;$1&quot; = &quot;-help&quot; ] || [ &quot;$1&quot; = &quot;--help&quot; ]; then
1210     echo &quot;bash ./compare.sh [OPTIONS] [FILTER]&quot;
1211     echo &quot;&quot;
1212     echo &quot;-all                Compare all files in all known ways&quot;
1213     echo &quot;-names              Compare the file names and directory structure&quot;
1214     echo &quot;-perms              Compare the permission bits on all files and directories&quot;
1215     echo &quot;-types              Compare the output of the file command on all files&quot;
1216     echo &quot;-general            Compare the files not convered by the specialized comparisons&quot;
1217     echo &quot;-zips               Compare the contents of all zip files and files in them&quot;
1218     echo &quot;-zips-names         Compare the file names inside all zip files&quot;
1219     echo &quot;-jars               Compare the contents of all jar files&quot;
1220     echo &quot;-jmods              Compare the listings of all jmod files&quot;
1221     echo &quot;-libs               Compare all native libraries&quot;
1222     echo &quot;-execs              Compare all executables&quot;
1223     echo &quot;-v                  Verbose output, does not hide known differences&quot;
1224     echo &quot;-vv                 More verbose output, shows diff output of all comparisons&quot;
1225     echo &quot;-o [OTHER]          Compare with build in other directory. Will default to the old build directory&quot;
1226     echo &quot;&quot;
1227     echo &quot;--sort-symbols      Sort all symbols before comparing&quot;
1228     echo &quot;--strip             Strip all binaries before comparing&quot;
1229     echo &quot;--clean             Clean all previous comparison results first&quot;
1230     echo &quot;&quot;
1231     echo &quot;[FILTER]            List filenames in the image to compare, works for jars, zips, libs and execs&quot;
1232     echo &quot;Example:&quot;
1233     echo &quot;bash ./make/scripts/compareimages.sh CodePointIM.jar&quot;
1234     echo &quot;&quot;
1235     echo &quot;-2zips &lt;file1&gt; &lt;file2&gt; Compare two zip files only&quot;
1236     echo &quot;-2bins &lt;file1&gt; &lt;file2&gt; Compare two binary files only&quot;
1237     echo &quot;-2dirs &lt;dir1&gt; &lt;dir2&gt; Compare two directories as if they were images&quot;
1238     echo &quot;&quot;
1239     exit 10
1240 fi
1241 
1242 CMP_NAMES=false
1243 CMP_PERMS=false
1244 CMP_TYPES=false
1245 CMP_GENERAL=false
1246 CMP_ZIPS=false
1247 CMP_ZIPS_CONTENTS=true
1248 CMP_JARS=false
1249 CMP_JMODS=false
1250 CMP_LIBS=false
1251 CMP_EXECS=false
1252 
1253 while [ -n &quot;$1&quot; ]; do
1254     case &quot;$1&quot; in
1255         -v)
1256             VERBOSE=true
1257             ;;
1258         -vv)
1259             VERBOSE=true
1260             SHOW_DIFFS=true
1261             ;;
1262         -o)
1263             OTHER=&quot;$2&quot;
1264             shift
1265             ;;
1266         -all)
1267             CMP_NAMES=true
1268             if [ &quot;$OPENJDK_TARGET_OS&quot; != &quot;windows&quot; ]; then
1269                 CMP_PERMS=true
1270             fi
1271             CMP_TYPES=true
1272             CMP_GENERAL=true
1273             CMP_ZIPS=true
1274             CMP_JARS=true
1275             CMP_JMODS=true
1276             CMP_LIBS=true
1277             CMP_EXECS=true
1278             ;;
1279         -names)
1280             CMP_NAMES=true
1281             ;;
1282         -perms)
1283             CMP_PERMS=true
1284             ;;
1285         -types)
1286             CMP_TYPES=true
1287             ;;
1288         -general)
1289             CMP_GENERAL=true
1290             ;;
1291         -zips)
1292             CMP_ZIPS=true
1293             CMP_ZIPS_CONTENTS=true
1294             ;;
1295         -zips-names)
1296             CMP_ZIPS=true
1297             CMP_ZIPS_CONTENTS=false
1298             ;;
1299         -jars)
1300             CMP_JARS=true
1301             ;;
1302         -jmods)
1303             CMP_JMODS=true
1304             ;;
1305         -libs)
1306             CMP_LIBS=true
1307             ;;
1308         -execs)
1309             CMP_EXECS=true
1310             ;;
1311         -2dirs)
1312             THIS=&quot;$(cd &quot;$2&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1313             OTHER=&quot;$(cd &quot;$3&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1314             THIS_BASE_DIR=&quot;$THIS&quot;
1315             OTHER_BASE_DIR=&quot;$OTHER&quot;
1316             SKIP_DEFAULT=true
1317             shift
1318             shift
1319             ;;
1320         -2zips)
1321             CMP_2_ZIPS=true
1322             THIS_FILE=$2
1323             OTHER_FILE=$3
1324             shift
1325             shift
1326             ;;
1327         -2bins)
1328             CMP_2_BINS=true
1329             THIS_FILE=$2
1330             OTHER_FILE=$3
1331             shift
1332             shift
1333             ;;
1334         --sort-symbols)
1335             SORT_ALL_SYMBOLS=true
1336             ;;
1337         --strip)
1338             STRIP_ALL=true
1339             ;;
1340         --clean)
1341             CLEAN_OUTPUT=true
1342             ;;
1343         *)
1344             CMP_NAMES=false
1345             CMP_PERMS=false
1346             CMP_TYPES=false
1347             CMP_ZIPS=true
1348             CMP_JARS=true
1349             CMP_JMODS=true
1350             CMP_LIBS=true
1351             CMP_EXECS=true
1352 
1353             if [ -z &quot;$FILTER&quot; ]; then
1354                 FILTER=&quot;$GREP&quot;
1355             fi
1356             FILTER=&quot;$FILTER -e $1&quot;
1357             ;;
1358     esac
1359     shift
1360 done
1361 
1362 if [ &quot;$STRIP_ALL&quot; = &quot;true&quot; ] &amp;&amp; [ -z &quot;$STRIP&quot; ]; then
1363   echo Warning: Not stripping even with --strip, since strip is missing on this platform
1364   STRIP_ALL=false
1365 fi
1366 
1367 COMPARE_ROOT=$OUTPUTDIR/compare-support
1368 if [ &quot;$CLEAN_OUTPUT&quot; = &quot;true&quot; ]; then
1369     echo Cleaning old output in $COMPARE_ROOT.
1370     $RM -rf $COMPARE_ROOT
1371 fi
1372 $MKDIR -p $COMPARE_ROOT
1373 if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
1374     if [ &quot;$(uname -o)&quot; = &quot;Cygwin&quot; ]; then
1375         COMPARE_ROOT=$(cygpath -msa $COMPARE_ROOT)
1376     fi
1377 fi
1378 
1379 if [ &quot;$CMP_2_ZIPS&quot; = &quot;true&quot; ]; then
1380     THIS_DIR=&quot;$(dirname $THIS_FILE)&quot;
1381     THIS_DIR=&quot;$(cd &quot;$THIS_DIR&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1382     OTHER_DIR=&quot;$(dirname $OTHER_FILE)&quot;
1383     OTHER_DIR=&quot;$(cd &quot;$OTHER_DIR&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1384     THIS_FILE_NAME=&quot;$(basename $THIS_FILE)&quot;
1385     OTHER_FILE_NAME=&quot;$(basename $OTHER_FILE)&quot;
1386     echo Comparing $THIS_DIR/$THIS_FILE_NAME and $OTHER_DIR/$OTHER_FILE_NAME
1387     compare_zip_file $THIS_DIR $OTHER_DIR $COMPARE_ROOT/2zips $THIS_FILE_NAME $OTHER_FILE_NAME
1388     exit
1389 fi
1390 
1391 if [ &quot;$CMP_2_BINS&quot; = &quot;true&quot; ]; then
1392     THIS_DIR=&quot;$(dirname $THIS_FILE)&quot;
1393     THIS_DIR=&quot;$(cd &quot;$THIS_DIR&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1394     OTHER_DIR=&quot;$(dirname $OTHER_FILE)&quot;
1395     OTHER_DIR=&quot;$(cd &quot;$OTHER_DIR&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1396     THIS_FILE_NAME=&quot;$(basename $THIS_FILE)&quot;
1397     OTHER_FILE_NAME=&quot;$(basename $OTHER_FILE)&quot;
1398     echo Comparing $THIS_DIR/$THIS_FILE_NAME and $OTHER_DIR/$OTHER_FILE_NAME
1399     compare_bin_file $THIS_DIR $OTHER_DIR $COMPARE_ROOT/2bins $THIS_FILE_NAME $OTHER_FILE_NAME
1400     exit
1401 fi
1402 
1403 if [ &quot;$CMP_NAMES&quot; = &quot;false&quot; ] \
1404        &amp;&amp; [ &quot;$CMP_TYPES&quot; = &quot;false&quot; ] \
1405        &amp;&amp; [ &quot;$CMP_PERMS&quot; = &quot;false&quot; ] \
1406        &amp;&amp; [ &quot;$CMP_GENERAL&quot; = &quot;false&quot; ] \
1407        &amp;&amp; [ &quot;$CMP_ZIPS&quot; = &quot;false&quot; ] \
1408        &amp;&amp; [ &quot;$CMP_JARS&quot; = &quot;false&quot; ] \
1409        &amp;&amp; [ &quot;$CMP_JMODS&quot; = &quot;false&quot; ] \
1410        &amp;&amp; [ &quot;$CMP_LIBS&quot; = &quot;false&quot; ] \
1411        &amp;&amp; [ &quot;$CMP_EXECS&quot; = &quot;false&quot; ]; then
1412     CMP_NAMES=true
1413     CMP_PERMS=true
1414     CMP_TYPES=true
1415     CMP_GENERAL=true
1416     CMP_ZIPS=true
1417     CMP_JARS=true
1418     CMP_JMODS=true
1419     CMP_LIBS=true
1420     CMP_EXECS=true
1421 fi
1422 
1423 if [ -z &quot;$FILTER&quot; ]; then
1424     FILTER=&quot;$CAT&quot;
1425 fi
1426 
1427 if [ &quot;$SKIP_DEFAULT&quot; != &quot;true&quot; ]; then
1428     if [ -z &quot;$OTHER&quot; ]; then
1429         echo &quot;Nothing to compare to, set with -o&quot;
1430         exit 1
1431     else
1432         if [ ! -d &quot;$OTHER&quot; ]; then
1433             echo &quot;Other build directory does not exist:&quot;
1434             echo &quot;$OTHER&quot;
1435             exit 1
1436         fi
1437         OTHER=&quot;$( cd &quot;$OTHER&quot; &gt; /dev/null &amp;&amp; pwd )&quot;
1438         echo &quot;Comparing to:&quot;
1439         echo &quot;$OTHER&quot;
1440         echo
1441     fi
1442 
<a name="35" id="anc35"></a><span class="line-removed">1443 </span>
1444     # Find the common images to compare, prioritizing later build stages
<a name="36" id="anc36"></a><span class="line-modified">1445     if [ -d &quot;$THIS/install/jdk&quot; ] &amp;&amp; [ -d &quot;$OTHER/install/jdk&quot; ]; then</span>
<span class="line-removed">1446         THIS_JDK=&quot;$THIS/install/jdk&quot;</span>
<span class="line-removed">1447         OTHER_JDK=&quot;$OTHER/install/jdk&quot;</span>
<span class="line-removed">1448         echo &quot;Selecting install images for JDK compare&quot;</span>
<span class="line-removed">1449     elif [ -d &quot;$THIS/images/jdk&quot; ] &amp;&amp; [ -d &quot;$OTHER/images/jdk&quot; ]; then</span>
1450         THIS_JDK=&quot;$THIS/images/jdk&quot;
1451         OTHER_JDK=&quot;$OTHER/images/jdk&quot;
1452         echo &quot;Selecting normal images for JDK compare&quot;
1453     elif [ -d &quot;$(ls -d $THIS/licensee-src/build/*/images/jdk 2&gt; /dev/null)&quot; ] \
1454         &amp;&amp; [ -d &quot;$(ls -d $OTHER/licensee-src/build/*/images/jdk 2&gt; /dev/null)&quot; ]
1455     then
1456         echo &quot;Selecting licensee images for compare&quot;
1457         # Simply override the THIS and OTHER dir with the build dir from
1458         # the nested licensee source build for the rest of the script
1459         # execution.
1460         OLD_THIS=&quot;$THIS&quot;
1461         OLD_OTHER=&quot;$OTHER&quot;
1462         THIS=&quot;$(ls -d $THIS/licensee-src/build/*)&quot;
1463         OTHER=&quot;$(ls -d $OTHER/licensee-src/build/*)&quot;
1464         THIS_JDK=&quot;$THIS/images/jdk&quot;
1465         OTHER_JDK=&quot;$OTHER/images/jdk&quot;
1466         # Rewrite the path to tools that are used from the build
1467         JIMAGE=&quot;$(echo &quot;$JIMAGE&quot; | $SED &quot;s|$OLD_THIS|$THIS|g&quot;)&quot;
1468         JMOD=&quot;$(echo &quot;$JMOD&quot; | $SED &quot;s|$OLD_THIS|$THIS|g&quot;)&quot;
1469         JAVAP=&quot;$(echo &quot;$JAVAP&quot; | $SED &quot;s|$OLD_THIS|$THIS|g&quot;)&quot;
1470     else
1471         echo &quot;No common images found.&quot;
1472         exit 1
1473     fi
1474     echo &quot;  $THIS_JDK&quot;
1475     echo &quot;  $OTHER_JDK&quot;
1476 
1477     if [ -d &quot;$THIS/images/jdk-bundle&quot; -o -d &quot;$THIS/deploy/images/jdk-bundle&quot; ] \
<a name="37" id="anc37"></a><span class="line-modified">1478 	     &amp;&amp; [ -d &quot;$OTHER/images/jdk-bundle&quot; -o -d &quot;$OTHER/deploy/images/jdk-bundle&quot; ]; then</span>
<span class="line-modified">1479 	if [ -d &quot;$THIS/deploy/images/jdk-bundle&quot; ]; then</span>
1480             THIS_JDK_BUNDLE=&quot;$THIS/deploy/images/jdk-bundle&quot;
<a name="38" id="anc38"></a><span class="line-modified">1481 	else</span>
1482             THIS_JDK_BUNDLE=&quot;$THIS/images/jdk-bundle&quot;
<a name="39" id="anc39"></a><span class="line-modified">1483 	fi</span>
<span class="line-modified">1484 	if [ -d &quot;$OTHER/deploy/images/jdk-bundle&quot; ]; then</span>
1485             OTHER_JDK_BUNDLE=&quot;$OTHER/deploy/images/jdk-bundle&quot;
<a name="40" id="anc40"></a><span class="line-modified">1486 	else</span>
1487             OTHER_JDK_BUNDLE=&quot;$OTHER/images/jdk-bundle&quot;
<a name="41" id="anc41"></a><span class="line-modified">1488 	fi</span>
1489         echo &quot;Also comparing jdk macosx bundles&quot;
1490         echo &quot;  $THIS_JDK_BUNDLE&quot;
1491         echo &quot;  $OTHER_JDK_BUNDLE&quot;
1492     fi
1493 
<a name="42" id="anc42"></a><span class="line-removed">1494     if [ -d &quot;$THIS/deploy/bundles&quot; -o -d &quot;$THIS/deploy/images/bundles&quot; ] \</span>
<span class="line-removed">1495 	     &amp;&amp; [ -d &quot;$OTHER/deploy/bundles&quot; -o -d &quot;$OTHER/deploy/images/bundles&quot; ]; then</span>
<span class="line-removed">1496 	if [ -d &quot;$THIS/deploy/images/bundles&quot; ]; then</span>
<span class="line-removed">1497             THIS_DEPLOY_BUNDLE_DIR=&quot;$THIS/deploy/images/bundles&quot;</span>
<span class="line-removed">1498 	else</span>
<span class="line-removed">1499             THIS_DEPLOY_BUNDLE_DIR=&quot;$THIS/deploy/bundles&quot;</span>
<span class="line-removed">1500 	fi</span>
<span class="line-removed">1501 	if [ -d &quot;$OTHER/deploy/images/bundles&quot; ]; then</span>
<span class="line-removed">1502             OTHER_DEPLOY_BUNDLE_DIR=&quot;$OTHER/deploy/images/bundles&quot;</span>
<span class="line-removed">1503 	else</span>
<span class="line-removed">1504             OTHER_DEPLOY_BUNDLE_DIR=&quot;$OTHER/deploy/bundles&quot;</span>
<span class="line-removed">1505 	fi</span>
<span class="line-removed">1506         echo &quot;Also comparing deploy javadoc bundles&quot;</span>
<span class="line-removed">1507     fi</span>
<span class="line-removed">1508 </span>
<span class="line-removed">1509     if [ -d &quot;$THIS/images/JavaAppletPlugin.plugin&quot; ] \</span>
<span class="line-removed">1510 	     &amp;&amp; [ -d &quot;$OTHER/images/JavaAppletPlugin.plugin&quot; -o -d &quot;$OTHER/deploy/images/JavaAppletPlugin.plugin&quot; ]; then</span>
<span class="line-removed">1511 	if [ -d &quot;$THIS/images/JavaAppletPlugin.plugin&quot; ]; then</span>
<span class="line-removed">1512             THIS_DEPLOY_APPLET_PLUGIN_DIR=&quot;$THIS/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">1513 	else</span>
<span class="line-removed">1514             THIS_DEPLOY_APPLET_PLUGIN_DIR=&quot;$THIS/deploy/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">1515 	fi</span>
<span class="line-removed">1516 	if [ -d &quot;$OTHER/images/JavaAppletPlugin.plugin&quot; ]; then</span>
<span class="line-removed">1517             OTHER_DEPLOY_APPLET_PLUGIN_DIR=&quot;$OTHER/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">1518 	else</span>
<span class="line-removed">1519             OTHER_DEPLOY_APPLET_PLUGIN_DIR=&quot;$OTHER/deploy/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">1520 	fi</span>
<span class="line-removed">1521         echo &quot;Also comparing deploy applet image&quot;</span>
<span class="line-removed">1522         echo &quot;  $THIS_DEPLOY_APPLET_PLUGIN_DIR&quot;</span>
<span class="line-removed">1523         echo &quot;  $OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot;</span>
<span class="line-removed">1524     fi</span>
<span class="line-removed">1525 </span>
<span class="line-removed">1526     if [ -d &quot;$THIS/install/sparkle/Sparkle.framework&quot; ] \</span>
<span class="line-removed">1527            &amp;&amp; [ -d &quot;$OTHER/install/sparkle/Sparkle.framework&quot; ]; then</span>
<span class="line-removed">1528         THIS_SPARKLE_DIR=&quot;$THIS/install/sparkle/Sparkle.framework&quot;</span>
<span class="line-removed">1529         OTHER_SPARKLE_DIR=&quot;$OTHER/install/sparkle/Sparkle.framework&quot;</span>
<span class="line-removed">1530         echo &quot;Also comparing install sparkle framework&quot;</span>
<span class="line-removed">1531         echo &quot;  $THIS_SPARKLE_DIR&quot;</span>
<span class="line-removed">1532         echo &quot;  $OTHER_SPARKLE_DIR&quot;</span>
<span class="line-removed">1533     fi</span>
<span class="line-removed">1534 </span>
1535     THIS_SEC_DIR=&quot;$THIS/images&quot;
1536     OTHER_SEC_DIR=&quot;$OTHER/images&quot;
1537     if [ -f &quot;$THIS_SEC_DIR/sec-bin.zip&quot; ] &amp;&amp; [ -f &quot;$OTHER_SEC_DIR/sec-bin.zip&quot; ]; then
1538         OTHER_SEC_BIN=&quot;$OTHER_SEC_DIR/sec-bin.zip&quot;
1539         THIS_SEC_BIN=&quot;$THIS_SEC_DIR/sec-bin.zip&quot;
1540         if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ]; then
1541             if [ &quot;$OPENJDK_TARGET_CPU&quot; = &quot;x86_64&quot; ]; then
1542                 JGSS_WINDOWS_BIN=&quot;jgss-windows-x64-bin.zip&quot;
1543             else
1544                 JGSS_WINDOWS_BIN=&quot;jgss-windows-i586-bin.zip&quot;
1545             fi
1546             OTHER_SEC_WINDOWS_BIN=&quot;$OTHER_SEC_DIR/sec-windows-bin.zip&quot;
1547             OTHER_JGSS_WINDOWS_BIN=&quot;$OTHER_SEC_DIR/$JGSS_WINDOWS_BIN&quot;
1548             THIS_SEC_WINDOWS_BIN=&quot;$THIS_SEC_DIR/sec-windows-bin.zip&quot;
1549             THIS_JGSS_WINDOWS_BIN=&quot;$THIS_SEC_DIR/$JGSS_WINDOWS_BIN&quot;
1550         fi
1551     fi
1552 
1553     if [ -d &quot;$THIS/images/docs&quot; ] &amp;&amp; [ -d &quot;$OTHER/images/docs&quot; ]; then
1554         THIS_DOCS=&quot;$THIS/images/docs&quot;
1555         OTHER_DOCS=&quot;$OTHER/images/docs&quot;
1556         echo &quot;Also comparing docs&quot;
1557     else
1558         echo &quot;WARNING! Docs haven&#39;t been built and won&#39;t be compared.&quot;
1559     fi
<a name="43" id="anc43"></a>







1560 fi
1561 
1562 ################################################################################
1563 # Do the work
1564 
1565 if [ &quot;$CMP_NAMES&quot; = &quot;true&quot; ]; then
1566     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
1567         echo -n &quot;JDK &quot;
1568         compare_dirs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1569         echo -n &quot;JDK &quot;
1570         compare_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1571     fi
1572     if [ -n &quot;$THIS_JDK_BUNDLE&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK_BUNDLE&quot; ]; then
1573         echo -n &quot;JDK Bundle &quot;
1574         compare_dirs $THIS_JDK_BUNDLE $OTHER_JDK_BUNDLE $COMPARE_ROOT/jdk-bundle
1575 
1576         echo -n &quot;JDK Bundle &quot;
1577         compare_files $THIS_JDK_BUNDLE $OTHER_JDK_BUNDLE $COMPARE_ROOT/jdk-bundle
1578     fi
1579     if [ -n &quot;$THIS_DOCS&quot; ] &amp;&amp; [ -n &quot;$OTHER_DOCS&quot; ]; then
1580         echo -n &quot;Docs &quot;
1581         compare_dirs $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
1582         echo -n &quot;Docs &quot;
1583         compare_files $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
1584     fi
<a name="44" id="anc44"></a>





1585     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1586         compare_dirs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1587         compare_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1588     fi
<a name="45" id="anc45"></a><span class="line-removed">1589     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1590         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1591         compare_dirs $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1592         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1593         compare_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1594     fi</span>
<span class="line-removed">1595     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">1596         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1597         compare_dirs $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1598         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1599         compare_files $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1600     fi</span>
1601 fi
1602 
1603 if [ &quot;$CMP_LIBS&quot; = &quot;true&quot; ]; then
1604     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
1605         echo -n &quot;JDK &quot;
1606         compare_all_libs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1607     fi
<a name="46" id="anc46"></a>








1608     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1609         compare_all_libs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1610     fi
<a name="47" id="anc47"></a><span class="line-removed">1611     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1612         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1613         compare_all_libs $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1614     fi</span>
<span class="line-removed">1615     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">1616         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1617         compare_all_libs $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1618     fi</span>
1619 fi
1620 
1621 if [ &quot;$CMP_EXECS&quot; = &quot;true&quot; ]; then
1622     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
<a name="48" id="anc48"></a>
1623         compare_all_execs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1624     fi
<a name="49" id="anc49"></a>








1625     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1626         compare_all_execs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1627     fi
<a name="50" id="anc50"></a><span class="line-removed">1628     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1629         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1630         compare_all_execs $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1631     fi</span>
<span class="line-removed">1632     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">1633         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1634         compare_all_execs $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1635     fi</span>
1636 fi
1637 
1638 if [ &quot;$CMP_GENERAL&quot; = &quot;true&quot; ]; then
1639     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
1640         echo -n &quot;JDK &quot;
1641         compare_general_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1642     fi
1643     if [ -n &quot;$THIS_JDK_BUNDLE&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK_BUNDLE&quot; ]; then
1644         echo -n &quot;JDK Bundle &quot;
1645         compare_general_files $THIS_JDK_BUNDLE $OTHER_JDK_BUNDLE $COMPARE_ROOT/jdk-bundle
1646     fi
1647     if [ -n &quot;$THIS_DOCS&quot; ] &amp;&amp; [ -n &quot;$OTHER_DOCS&quot; ]; then
1648         echo -n &quot;Docs &quot;
1649         compare_general_files $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
1650     fi
<a name="51" id="anc51"></a>



1651     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1652         compare_general_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1653     fi
<a name="52" id="anc52"></a><span class="line-removed">1654     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1655         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1656         compare_general_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1657     fi</span>
<span class="line-removed">1658     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">1659         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1660         compare_general_files $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1661     fi</span>
1662 fi
1663 
1664 if [ &quot;$CMP_ZIPS&quot; = &quot;true&quot; ]; then
1665     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
<a name="53" id="anc53"></a>
1666         compare_all_zip_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1667     fi
<a name="54" id="anc54"></a>



1668     if [ -n &quot;$THIS_SEC_BIN&quot; ] &amp;&amp; [ -n &quot;$OTHER_SEC_BIN&quot; ]; then
1669         if [ -n &quot;$(echo $THIS_SEC_BIN | $FILTER)&quot; ]; then
1670             echo &quot;sec-bin.zip...&quot;
1671             compare_zip_file $THIS_SEC_DIR $OTHER_SEC_DIR $COMPARE_ROOT/sec-bin sec-bin.zip
1672         fi
1673     fi
1674     if [ -n &quot;$THIS_SEC_WINDOWS_BIN&quot; ] &amp;&amp; [ -n &quot;$OTHER_SEC_WINDOWS_BIN&quot; ]; then
1675         if [ -n &quot;$(echo $THIS_SEC_WINDOWS_BIN | $FILTER)&quot; ]; then
1676             echo &quot;sec-windows-bin.zip...&quot;
1677             compare_zip_file $THIS_SEC_DIR $OTHER_SEC_DIR $COMPARE_ROOT/sec-bin sec-windows-bin.zip
1678         fi
1679     fi
1680     if [ -n &quot;$THIS_JGSS_WINDOWS_BIN&quot; ] &amp;&amp; [ -n &quot;$OTHER_JGSS_WINDOWS_BIN&quot; ]; then
1681         if [ -n &quot;$(echo $THIS_JGSS_WINDOWS_BIN | $FILTER)&quot; ]; then
1682             echo &quot;$JGSS_WINDOWS_BIN...&quot;
1683             compare_zip_file $THIS_SEC_DIR $OTHER_SEC_DIR $COMPARE_ROOT/sec-bin $JGSS_WINDOWS_BIN
1684         fi
1685     fi
1686     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1687         compare_all_zip_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1688     fi
<a name="55" id="anc55"></a><span class="line-removed">1689     if [ -n &quot;$THIS_DEPLOY_BUNDLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_BUNDLE_DIR&quot; ]; then</span>
<span class="line-removed">1690         compare_all_zip_files $THIS_DEPLOY_BUNDLE_DIR $OTHER_DEPLOY_BUNDLE_DIR $COMPARE_ROOT/deploy-bundle</span>
<span class="line-removed">1691     fi</span>
<span class="line-removed">1692     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1693         compare_all_zip_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1694     fi</span>
1695 fi
1696 
1697 if [ &quot;$CMP_JARS&quot; = &quot;true&quot; ]; then
1698     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
<a name="56" id="anc56"></a>
1699         compare_all_jar_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1700     fi
<a name="57" id="anc57"></a>



1701     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1702         compare_all_jar_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1703     fi
<a name="58" id="anc58"></a><span class="line-removed">1704     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1705         compare_all_jar_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1706     fi</span>
1707 fi
1708 
1709 if [ &quot;$CMP_JMODS&quot; = &quot;true&quot; ]; then
1710     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
1711         compare_all_jmod_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1712     fi
1713     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1714         compare_all_jmod_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1715     fi
1716 fi
1717 
1718 if [ &quot;$CMP_PERMS&quot; = &quot;true&quot; ]; then
1719     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
1720         echo -n &quot;JDK &quot;
1721         compare_permissions $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1722     fi
1723     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1724         compare_permissions $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1725     fi
<a name="59" id="anc59"></a><span class="line-removed">1726     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1727         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1728         compare_permissions $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1729     fi</span>
<span class="line-removed">1730     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">1731         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1732         compare_permissions $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1733     fi</span>
1734 fi
1735 
1736 if [ &quot;$CMP_TYPES&quot; = &quot;true&quot; ]; then
1737     if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
1738         echo -n &quot;JDK &quot;
1739         compare_file_types $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
1740     fi
1741     if [ -n &quot;$THIS_JDK_BUNDLE&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK_BUNDLE&quot; ]; then
1742         echo -n &quot;JDK Bundle &quot;
1743         compare_file_types $THIS_JDK_BUNDLE $OTHER_JDK_BUNDLE $COMPARE_ROOT/jdk-bundle
1744     fi
<a name="60" id="anc60"></a>



1745     if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
1746         compare_file_types $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
1747     fi
<a name="61" id="anc61"></a><span class="line-removed">1748     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">1749         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">1750         compare_file_types $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">1751     fi</span>
<span class="line-removed">1752     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">1753         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">1754         compare_file_types $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">1755     fi</span>
1756 fi
1757 
1758 echo
1759 
1760 if [ -n &quot;$REGRESSIONS&quot; ]; then
1761     echo &quot;REGRESSIONS FOUND!&quot;
1762     echo
1763     exit 1
1764 else
1765     echo &quot;No regressions found&quot;
1766     echo
1767     exit 0
1768 fi
<a name="62" id="anc62"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="62" type="hidden" />
</body>
</html>