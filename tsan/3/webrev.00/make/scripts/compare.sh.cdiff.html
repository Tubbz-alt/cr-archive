<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/scripts/compare.sh</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../rmic/Rmic-java.management.rmi.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="compare_exceptions.sh.incl.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/scripts/compare.sh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,8 ***</span>
  #!/bin/bash
  #
<span class="line-modified">! # Copyright (c) 2012, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.
<span class="line-new-header">--- 1,8 ---</span>
  #!/bin/bash
  #
<span class="line-modified">! # Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 32,10 ***</span>
<span class="line-new-header">--- 32,13 ---</span>
  if [ -z &quot;$TOPDIR&quot; ]; then
      echo &quot;Error: You must run this script using build/[conf]/compare.sh&quot;
      exit 1
  fi
  
<span class="line-added">+ # Make sure all shell commands are executed with the C locale</span>
<span class="line-added">+ export LC_ALL=C</span>
<span class="line-added">+ </span>
  if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
      FULLDUMP_CMD=&quot;$OTOOL -v -V -h -X -d&quot;
      LDD_CMD=&quot;$OTOOL -L&quot;
      DIS_CMD=&quot;$OTOOL -v -V -t&quot;
      STAT_PRINT_SIZE=&quot;-f %z&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 108,11 ***</span>
          -e &#39;s/([a-z]{2}[a-z ]{2})        [0-9A-F]{4,16}$/\1        &lt;HEXSTR&gt;/&#39; \
          -e &#39;s/\[\?\?_C@_.*/[&lt;SYM&gt;]/&#39; \
          &quot;
    fi
  elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
<span class="line-modified">!   DIS_DIFF_FILTER=&quot;LANG=C $SED \</span>
        -e &#39;s/0x[0-9a-f]\{3,16\}/&lt;HEXSTR&gt;/g&#39; -e &#39;s/^[0-9a-f]\{12,20\}/&lt;ADDR&gt;/&#39; \
        -e &#39;s/-20[0-9][0-9]-[0-1][0-9]-[0-3][0-9]-[0-2][0-9]\{5\}/&lt;DATE&gt;/g&#39; \
        -e &#39;s/), built on .*/), &lt;DATE&gt;/&#39; \
        &quot;
  fi
<span class="line-new-header">--- 111,11 ---</span>
          -e &#39;s/([a-z]{2}[a-z ]{2})        [0-9A-F]{4,16}$/\1        &lt;HEXSTR&gt;/&#39; \
          -e &#39;s/\[\?\?_C@_.*/[&lt;SYM&gt;]/&#39; \
          &quot;
    fi
  elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;macosx&quot; ]; then
<span class="line-modified">!   DIS_DIFF_FILTER=&quot;$SED \</span>
        -e &#39;s/0x[0-9a-f]\{3,16\}/&lt;HEXSTR&gt;/g&#39; -e &#39;s/^[0-9a-f]\{12,20\}/&lt;ADDR&gt;/&#39; \
        -e &#39;s/-20[0-9][0-9]-[0-1][0-9]-[0-3][0-9]-[0-2][0-9]\{5\}/&lt;DATE&gt;/g&#39; \
        -e &#39;s/), built on .*/), &lt;DATE&gt;/&#39; \
        &quot;
  fi
</pre>
<hr />
<pre>
<span class="line-old-header">*** 132,19 ***</span>
  
      TMP=1
  
      if [[ &quot;$THIS_FILE&quot; = *&quot;META-INF/MANIFEST.MF&quot; ]]; then
          # Filter out date string, ant version and java version differences.
<span class="line-modified">!         TMP=$(LC_ALL=C $DIFF $OTHER_FILE $THIS_FILE | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;] Ant-Version: Apache Ant .*/d&#39; \
                   -e &#39;/[&lt;&gt;] Created-By: .* (Oracle [Corpatin)]*/d&#39; \
                   -e &#39;/[&lt;&gt;]  [Corpatin]*)/d&#39; \
                   -e &#39;/[&lt;&gt;].*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39;)
      fi
      if test &quot;x$SUFFIX&quot; = &quot;xjava&quot;; then
<span class="line-modified">!         TMP=$(LC_ALL=C $DIFF $OTHER_FILE $THIS_FILE | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;] \* from.*\.idl/d&#39; \
                   -e &#39;/[&lt;&gt;] .*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39; \
                   -e &#39;/[&lt;&gt;] .*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39; \
                   -e &#39;/[&lt;&gt;] \*.*[0-9]\{4\} \(at \)*[0-9][0-9]*:[0-9]\{2\}:[0-9]\{2\}.*/d&#39; \
<span class="line-new-header">--- 135,19 ---</span>
  
      TMP=1
  
      if [[ &quot;$THIS_FILE&quot; = *&quot;META-INF/MANIFEST.MF&quot; ]]; then
          # Filter out date string, ant version and java version differences.
<span class="line-modified">!         TMP=$($DIFF $OTHER_FILE $THIS_FILE | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;] Ant-Version: Apache Ant .*/d&#39; \
                   -e &#39;/[&lt;&gt;] Created-By: .* (Oracle [Corpatin)]*/d&#39; \
                   -e &#39;/[&lt;&gt;]  [Corpatin]*)/d&#39; \
                   -e &#39;/[&lt;&gt;].*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39;)
      fi
      if test &quot;x$SUFFIX&quot; = &quot;xjava&quot;; then
<span class="line-modified">!         TMP=$($DIFF $OTHER_FILE $THIS_FILE | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;] \* from.*\.idl/d&#39; \
                   -e &#39;/[&lt;&gt;] .*[0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}_[0-9]\{2\}-b[0-9]\{2\}.*/d&#39; \
                   -e &#39;/[&lt;&gt;] .*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39; \
                   -e &#39;/[&lt;&gt;] \*.*[0-9]\{4\} \(at \)*[0-9][0-9]*:[0-9]\{2\}:[0-9]\{2\}.*/d&#39; \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 195,24 ***</span>
                       -e &#39;/[&lt;&gt;].*lambda\$[a-zA-Z0-9]*\$[0-9]*/d&#39;)
          fi
      fi
      if test &quot;x$SUFFIX&quot; = &quot;xproperties&quot;; then
          # Filter out date string differences.
<span class="line-modified">!         TMP=$(LC_ALL=C $DIFF $OTHER_FILE $THIS_FILE | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;].*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39;)
      fi
      if test &quot;x$SUFFIX&quot; = &quot;xhtml&quot;; then
<span class="line-modified">! 	# Some javadoc versions do not put quotes around font size</span>
<span class="line-modified">! 	HTML_FILTER=&quot;$SED \</span>
              -e &#39;s/&lt;font size=-1&gt;/&lt;font size=\&quot;-1\&quot;&gt;/g&#39;&quot;
<span class="line-modified">! 	$CAT $THIS_FILE | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE.filtered</span>
<span class="line-modified">! 	$CAT $OTHER_FILE | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE.filtered</span>
<span class="line-modified">!         TMP=$(LC_ALL=C $DIFF $OTHER_FILE.filtered $THIS_FILE.filtered | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;] &lt;!-- Generated by javadoc .* on .* --&gt;/d&#39; \
<span class="line-modified">! 	         -e &#39;/[&lt;&gt;] &lt;meta name=&quot;date&quot; content=&quot;.*&quot;&gt;/d&#39; )</span>
      fi
      if test -n &quot;$TMP&quot;; then
          echo Files $OTHER_FILE and $THIS_FILE differ
          return 1
      fi
<span class="line-new-header">--- 198,29 ---</span>
                       -e &#39;/[&lt;&gt;].*lambda\$[a-zA-Z0-9]*\$[0-9]*/d&#39;)
          fi
      fi
      if test &quot;x$SUFFIX&quot; = &quot;xproperties&quot;; then
          # Filter out date string differences.
<span class="line-modified">!         TMP=$($DIFF $OTHER_FILE $THIS_FILE | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;].*[0-9]\{4\}-[0-9]\{2\}-[0-9]\{2\}-[0-9]\{6\}.*/d&#39;)
      fi
      if test &quot;x$SUFFIX&quot; = &quot;xhtml&quot;; then
<span class="line-modified">!         # Some javadoc versions do not put quotes around font size</span>
<span class="line-modified">!         HTML_FILTER=&quot;$SED \</span>
              -e &#39;s/&lt;font size=-1&gt;/&lt;font size=\&quot;-1\&quot;&gt;/g&#39;&quot;
<span class="line-modified">!         $CAT $THIS_FILE | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE.filtered</span>
<span class="line-modified">!         $CAT $OTHER_FILE | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE.filtered</span>
<span class="line-modified">!         TMP=$($DIFF $OTHER_FILE.filtered $THIS_FILE.filtered | \</span>
              $GREP &#39;^[&lt;&gt;]&#39; | \
              $SED -e &#39;/[&lt;&gt;] &lt;!-- Generated by javadoc .* on .* --&gt;/d&#39; \
<span class="line-modified">!                  -e &#39;/[&lt;&gt;] &lt;meta name=&quot;date&quot; content=&quot;.*&quot;&gt;/d&#39; )</span>
<span class="line-added">+     fi</span>
<span class="line-added">+     if test &quot;$NAME&quot; = &quot;BenchmarkList&quot;; then</span>
<span class="line-added">+         $SORT $THIS_FILE &gt; $THIS_FILE.sorted</span>
<span class="line-added">+         $SORT $OTHER_FILE &gt; $OTHER_FILE.sorted</span>
<span class="line-added">+         TMP=$($DIFF $THIS_FILE.sorted $OTHER_FILE.sorted)</span>
      fi
      if test -n &quot;$TMP&quot;; then
          echo Files $OTHER_FILE and $THIS_FILE differ
          return 1
      fi
</pre>
<hr />
<pre>
<span class="line-old-header">*** 355,10 ***</span>
<span class="line-new-header">--- 363,16 ---</span>
              then
                  # the way we produce zip-files make it so that directories are stored in
                  # old file but not in new (only files with full-path) this makes file
                  # report them as different
                  continue
<span class="line-added">+             elif [ &quot;`echo $OF | $GREP -c &#39;MSVC program database ver 7.00&#39;`&quot; -gt 0 ] \</span>
<span class="line-added">+                      &amp;&amp; [ &quot;`echo $TF | $GREP -c &#39;MSVC program database ver 7.00&#39;`&quot; -gt 0 ]</span>
<span class="line-added">+             then</span>
<span class="line-added">+                 # For Windows pdb files the file command reports some kind of size data</span>
<span class="line-added">+                 # which may sometimes come out randomly different.</span>
<span class="line-added">+                 continue</span>
              else
                  if [ -z &quot;$found&quot; ]; then echo ; found=&quot;yes&quot;; fi
                  $PRINTF &quot;\tother: ${OF}\n\tthis : ${TF}\n&quot;
              fi
          fi
</pre>
<hr />
<pre>
<span class="line-old-header">*** 380,21 ***</span>
  
      GENERAL_FILES=$(cd $THIS_DIR &amp;&amp; $FIND . -type f ! -name &quot;*.so&quot; ! -name &quot;*.jar&quot; \
          ! -name &quot;*.zip&quot; ! -name &quot;*.debuginfo&quot; ! -name &quot;*.dylib&quot; ! -name &quot;jexec&quot; \
          ! -name &quot;modules&quot; ! -name &quot;ct.sym&quot; ! -name &quot;*.diz&quot; ! -name &quot;*.dll&quot; \
          ! -name &quot;*.cpl&quot; ! -name &quot;*.pdb&quot; ! -name &quot;*.exp&quot; ! -name &quot;*.ilk&quot; \
<span class="line-modified">!         ! -name &quot;*.lib&quot; ! -name &quot;*.war&quot; ! -name &quot;JavaControlPanel&quot; ! -name &quot;*.jmod&quot; \</span>
<span class="line-modified">!         ! -name &quot;*.obj&quot; ! -name &quot;*.o&quot; ! -name &quot;JavaControlPanelHelper&quot; \</span>
<span class="line-modified">!         ! -name &quot;JavaUpdater&quot; ! -name &quot;JavaWSApplicationStub&quot; \</span>
<span class="line-modified">!         ! -name &quot;jspawnhelper&quot; ! -name &quot;JavawsLauncher&quot; ! -name &quot;*.a&quot; \</span>
<span class="line-removed">-         ! -name &quot;finish_installation&quot; ! -name &quot;Sparkle&quot; ! -name &quot;*.tar.gz&quot; \</span>
<span class="line-removed">-         ! -name &quot;classes.jsa&quot; \</span>
          | $GREP -v &quot;./bin/&quot;  | $SORT | $FILTER)
  
      echo Other files with binary differences...
      for f in $GENERAL_FILES
      do
          if [ -e $OTHER_DIR/$f ]; then
              SUFFIX=&quot;${f##*.}&quot;
              if [ &quot;$(basename $f)&quot; = &quot;release&quot; ]; then
                  # In release file, ignore differences in change numbers and order
                  # of modules in list.
<span class="line-new-header">--- 394,23 ---</span>
  
      GENERAL_FILES=$(cd $THIS_DIR &amp;&amp; $FIND . -type f ! -name &quot;*.so&quot; ! -name &quot;*.jar&quot; \
          ! -name &quot;*.zip&quot; ! -name &quot;*.debuginfo&quot; ! -name &quot;*.dylib&quot; ! -name &quot;jexec&quot; \
          ! -name &quot;modules&quot; ! -name &quot;ct.sym&quot; ! -name &quot;*.diz&quot; ! -name &quot;*.dll&quot; \
          ! -name &quot;*.cpl&quot; ! -name &quot;*.pdb&quot; ! -name &quot;*.exp&quot; ! -name &quot;*.ilk&quot; \
<span class="line-modified">!         ! -name &quot;*.lib&quot; ! -name &quot;*.war&quot; ! -name &quot;*.jmod&quot; ! -name &quot;*.exe&quot; \</span>
<span class="line-modified">!         ! -name &quot;*.obj&quot; ! -name &quot;*.o&quot; ! -name &quot;jspawnhelper&quot; ! -name &quot;*.a&quot; \</span>
<span class="line-modified">!         ! -name &quot;*.tar.gz&quot; ! -name &quot;classes.jsa&quot; ! -name &quot;gtestLauncher&quot; \</span>
<span class="line-modified">!         ! -name &quot;*.map&quot; \</span>
          | $GREP -v &quot;./bin/&quot;  | $SORT | $FILTER)
  
      echo Other files with binary differences...
      for f in $GENERAL_FILES
      do
<span class="line-added">+         # Skip all files in test/*/native</span>
<span class="line-added">+         if [[ &quot;$f&quot; == */native/* ]]; then</span>
<span class="line-added">+             continue</span>
<span class="line-added">+         fi</span>
          if [ -e $OTHER_DIR/$f ]; then
              SUFFIX=&quot;${f##*.}&quot;
              if [ &quot;$(basename $f)&quot; = &quot;release&quot; ]; then
                  # In release file, ignore differences in change numbers and order
                  # of modules in list.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 429,11 ***</span>
                      -e &#39;s/from .*\.idl/\.idl/&#39; \
                      &quot;
                  $CAT $OTHER_DIR/$f | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE &amp;
                  $CAT $THIS_DIR/$f  | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE &amp;
                  wait
<span class="line-modified">!             elif [[ &quot;$f&quot; = *&quot;/lib/classlist&quot; ]]; then</span>
                  # The classlist files may have some lines in random order
                  OTHER_FILE=$WORK_DIR/$f.other
                  THIS_FILE=$WORK_DIR/$f.this
                  $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
                  $RM $OTHER_FILE $THIS_FILE
<span class="line-new-header">--- 445,21 ---</span>
                      -e &#39;s/from .*\.idl/\.idl/&#39; \
                      &quot;
                  $CAT $OTHER_DIR/$f | eval &quot;$HTML_FILTER&quot; &gt; $OTHER_FILE &amp;
                  $CAT $THIS_DIR/$f  | eval &quot;$HTML_FILTER&quot; &gt; $THIS_FILE &amp;
                  wait
<span class="line-modified">!             elif [ &quot;$SUFFIX&quot; = &quot;svg&quot; ]; then</span>
<span class="line-added">+                 # GraphViz has non-determinism when generating svg files</span>
<span class="line-added">+                 OTHER_FILE=$WORK_DIR/$f.other</span>
<span class="line-added">+                 THIS_FILE=$WORK_DIR/$f.this</span>
<span class="line-added">+                 $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)</span>
<span class="line-added">+                 SVG_FILTER=&quot;$SED \</span>
<span class="line-added">+                     -e &#39;s/edge[0-9][0-9]*/edgeX/g&#39;</span>
<span class="line-added">+                     &quot;</span>
<span class="line-added">+                 $CAT $OTHER_DIR/$f | eval &quot;$SVG_FILTER&quot; &gt; $OTHER_FILE</span>
<span class="line-added">+                 $CAT $THIS_DIR/$f | eval &quot;$SVG_FILTER&quot; &gt; $THIS_FILE</span>
<span class="line-added">+             elif [[ &quot;$f&quot; = *&quot;/lib/classlist&quot; ]] || [ &quot;$SUFFIX&quot; = &quot;jar_contents&quot; ]; then</span>
                  # The classlist files may have some lines in random order
                  OTHER_FILE=$WORK_DIR/$f.other
                  THIS_FILE=$WORK_DIR/$f.this
                  $MKDIR -p $(dirname $OTHER_FILE) $(dirname $THIS_FILE)
                  $RM $OTHER_FILE $THIS_FILE
</pre>
<hr />
<pre>
<span class="line-old-header">*** 511,43 ***</span>
      else
          (cd $THIS_UNZIPDIR &amp;&amp; $JIMAGE extract $THIS_ZIP)
          (cd $OTHER_UNZIPDIR &amp;&amp; $JIMAGE extract $OTHER_ZIP)
      fi
  
<span class="line-removed">-     # Find all archives inside and unzip them as well to compare the contents rather than</span>
<span class="line-removed">-     # the archives. pie.jar.pack.gz i app3.war is corrupt, skip it.</span>
<span class="line-removed">-     EXCEPTIONS=&quot;pie.jar.pack.gz jdk.pack&quot;</span>
<span class="line-removed">-     for pack in $($FIND $THIS_UNZIPDIR \( -name &quot;*.pack&quot; -o -name &quot;*.pack.gz&quot; \) -a \</span>
<span class="line-removed">-                         ! -name pie.jar.pack.gz -a ! -name jdk.pack); do</span>
<span class="line-removed">-         ($UNPACK200 $pack $pack.jar)</span>
<span class="line-removed">-         # Filter out the unzipped archives from the diff below.</span>
<span class="line-removed">-         EXCEPTIONS=&quot;$EXCEPTIONS $pack $pack.jar&quot;</span>
<span class="line-removed">-     done</span>
<span class="line-removed">-     for pack in $($FIND $OTHER_UNZIPDIR \( -name &quot;*.pack&quot; -o -name &quot;*.pack.gz&quot; \) -a \</span>
<span class="line-removed">-                         ! -name pie.jar.pack.gz -a ! -name jdk.pack); do</span>
<span class="line-removed">-         ($UNPACK200 $pack $pack.jar)</span>
<span class="line-removed">-         EXCEPTIONS=&quot;$EXCEPTIONS $pack $pack.jar&quot;</span>
<span class="line-removed">-     done</span>
<span class="line-removed">-     for zip in $($FIND $THIS_UNZIPDIR -name &quot;*.jar&quot; -o -name &quot;*.zip&quot;); do</span>
<span class="line-removed">-         $MKDIR $zip.unzip</span>
<span class="line-removed">-         (cd $zip.unzip &amp;&amp; $UNARCHIVE $zip)</span>
<span class="line-removed">-         EXCEPTIONS=&quot;$EXCEPTIONS $zip&quot;</span>
<span class="line-removed">-     done</span>
<span class="line-removed">-     for zip in $($FIND $OTHER_UNZIPDIR -name &quot;*.jar&quot; -o -name &quot;*.zip&quot;); do</span>
<span class="line-removed">-         $MKDIR $zip.unzip</span>
<span class="line-removed">-         (cd $zip.unzip &amp;&amp; $UNARCHIVE $zip)</span>
<span class="line-removed">-         EXCEPTIONS=&quot;$EXCEPTIONS $zip&quot;</span>
<span class="line-removed">-     done</span>
<span class="line-removed">- </span>
      CONTENTS_DIFF_FILE=$WORK_DIR/$ZIP_FILE.diff
      # On solaris, there is no -q option.
      if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;solaris&quot; ]; then
<span class="line-modified">!         LC_ALL=C $DIFF -r $OTHER_UNZIPDIR $THIS_UNZIPDIR \</span>
              | $GREP -v -e &quot;^&lt;&quot; -e &quot;^&gt;&quot; -e &quot;^Common subdirectories:&quot; \
              &gt; $CONTENTS_DIFF_FILE
      else
<span class="line-modified">!         LC_ALL=C $DIFF -rq $OTHER_UNZIPDIR $THIS_UNZIPDIR &gt; $CONTENTS_DIFF_FILE</span>
      fi
  
      ONLY_OTHER=$($GREP &quot;^Only in $OTHER_UNZIPDIR&quot; $CONTENTS_DIFF_FILE)
      ONLY_THIS=$($GREP &quot;^Only in $THIS_UNZIPDIR&quot; $CONTENTS_DIFF_FILE)
  
<span class="line-new-header">--- 537,18 ---</span>
      else
          (cd $THIS_UNZIPDIR &amp;&amp; $JIMAGE extract $THIS_ZIP)
          (cd $OTHER_UNZIPDIR &amp;&amp; $JIMAGE extract $OTHER_ZIP)
      fi
  
      CONTENTS_DIFF_FILE=$WORK_DIR/$ZIP_FILE.diff
      # On solaris, there is no -q option.
      if [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;solaris&quot; ]; then
<span class="line-modified">!         $DIFF -r $OTHER_UNZIPDIR $THIS_UNZIPDIR \</span>
              | $GREP -v -e &quot;^&lt;&quot; -e &quot;^&gt;&quot; -e &quot;^Common subdirectories:&quot; \
              &gt; $CONTENTS_DIFF_FILE
      else
<span class="line-modified">!         $DIFF -rq $OTHER_UNZIPDIR $THIS_UNZIPDIR &gt; $CONTENTS_DIFF_FILE</span>
      fi
  
      ONLY_OTHER=$($GREP &quot;^Only in $OTHER_UNZIPDIR&quot; $CONTENTS_DIFF_FILE)
      ONLY_THIS=$($GREP &quot;^Only in $THIS_UNZIPDIR&quot; $CONTENTS_DIFF_FILE)
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 573,12 ***</span>
          else
              DIFFING_FILES=$($GREP -e &quot;differ$&quot; $CONTENTS_DIFF_FILE \
                  | $CUT -f 2 -d &#39; &#39; | $SED &quot;s|$OTHER_UNZIPDIR/||g&quot;)
          fi
  
<span class="line-modified">!         $RM -f $WORK_DIR/$ZIP_FILE.diffs</span>
          for file in $DIFFING_FILES; do
              if [[ &quot;$ACCEPTED_JARZIP_CONTENTS $EXCEPTIONS&quot; != *&quot;$file&quot;* ]]; then
                  diff_text $OTHER_UNZIPDIR/$file $THIS_UNZIPDIR/$file &gt;&gt; $WORK_DIR/$ZIP_FILE.diffs
              fi
          done
  
<span class="line-new-header">--- 574,25 ---</span>
          else
              DIFFING_FILES=$($GREP -e &quot;differ$&quot; $CONTENTS_DIFF_FILE \
                  | $CUT -f 2 -d &#39; &#39; | $SED &quot;s|$OTHER_UNZIPDIR/||g&quot;)
          fi
  
<span class="line-modified">!         # Separate executable/library files from other files in zip.</span>
<span class="line-added">+         DIFFING_TEXT_FILES=</span>
<span class="line-added">+         DIFFING_EXEC_FILES=</span>
          for file in $DIFFING_FILES; do
<span class="line-added">+             SUFFIX=&quot;${file##*.}&quot;</span>
<span class="line-added">+             if [ &quot;$SUFFIX&quot; = &quot;exe&quot; -o &quot;$SUFFIX&quot; = &quot;dll&quot; -o &quot;$SUFFIX&quot; = &quot;so&quot; \</span>
<span class="line-added">+                  -o &quot;$SUFFIX&quot; = &quot;dylib&quot; ]; then</span>
<span class="line-added">+                 DIFFING_EXEC_FILES=&quot;$DIFFING_EXEC_FILES $file&quot;</span>
<span class="line-added">+             else</span>
<span class="line-added">+                 DIFFING_TEXT_FILES=&quot;$DIFFING_TEXT_FILES $file&quot;</span>
<span class="line-added">+             fi</span>
<span class="line-added">+         done</span>
<span class="line-added">+ </span>
<span class="line-added">+         $RM -f $WORK_DIR/$ZIP_FILE.diffs</span>
<span class="line-added">+         for file in $DIFFING_TEXT_FILES; do</span>
              if [[ &quot;$ACCEPTED_JARZIP_CONTENTS $EXCEPTIONS&quot; != *&quot;$file&quot;* ]]; then
                  diff_text $OTHER_UNZIPDIR/$file $THIS_UNZIPDIR/$file &gt;&gt; $WORK_DIR/$ZIP_FILE.diffs
              fi
          done
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 590,19 ***</span>
              $CAT $WORK_DIR/$ZIP_FILE.difflist
  
              if [ -n &quot;$SHOW_DIFFS&quot; ]; then
                  for i in $(cat $WORK_DIR/$ZIP_FILE.difflist) ; do
                      if [ -f &quot;${OTHER_UNZIPDIR}/$i.javap&quot; ]; then
<span class="line-modified">!                         LC_ALL=C $DIFF ${OTHER_UNZIPDIR}/$i.javap ${THIS_UNZIPDIR}/$i.javap</span>
                      elif [ -f &quot;${OTHER_UNZIPDIR}/$i.cleaned&quot; ]; then
<span class="line-modified">!                         LC_ALL=C $DIFF ${OTHER_UNZIPDIR}/$i.cleaned ${THIS_UNZIPDIR}/$i</span>
                      else
<span class="line-modified">!                         LC_ALL=C $DIFF ${OTHER_UNZIPDIR}/$i ${THIS_UNZIPDIR}/$i</span>
                      fi
                  done
              fi
          fi
      fi
  
      return $return_value
  }
  
<span class="line-new-header">--- 604,28 ---</span>
              $CAT $WORK_DIR/$ZIP_FILE.difflist
  
              if [ -n &quot;$SHOW_DIFFS&quot; ]; then
                  for i in $(cat $WORK_DIR/$ZIP_FILE.difflist) ; do
                      if [ -f &quot;${OTHER_UNZIPDIR}/$i.javap&quot; ]; then
<span class="line-modified">!                         $DIFF ${OTHER_UNZIPDIR}/$i.javap ${THIS_UNZIPDIR}/$i.javap</span>
                      elif [ -f &quot;${OTHER_UNZIPDIR}/$i.cleaned&quot; ]; then
<span class="line-modified">!                         $DIFF ${OTHER_UNZIPDIR}/$i.cleaned ${THIS_UNZIPDIR}/$i</span>
                      else
<span class="line-modified">!                         $DIFF ${OTHER_UNZIPDIR}/$i ${THIS_UNZIPDIR}/$i</span>
                      fi
                  done
              fi
          fi
<span class="line-added">+ </span>
<span class="line-added">+         # Use the compare_bin_file function for comparing the executable files.</span>
<span class="line-added">+         for file in $DIFFING_EXEC_FILES; do</span>
<span class="line-added">+             compare_bin_file $THIS_UNZIPDIR $OTHER_UNZIPDIR $WORK_DIR/$ZIP_FILE.bin \</span>
<span class="line-added">+                              $file</span>
<span class="line-added">+             if [ &quot;$?&quot; != &quot;0&quot; ]; then</span>
<span class="line-added">+                 return_value=1</span>
<span class="line-added">+             fi</span>
<span class="line-added">+         done</span>
      fi
  
      return $return_value
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 627,11 ***</span>
      mkdir -p $(dirname $THIS_JMOD_LIST) $(dirname $OTHER_JMOD_LIST)
  
      $JMOD list $THIS_JMOD | sort &gt; $THIS_JMOD_LIST
      $JMOD list $OTHER_JMOD | sort &gt; $OTHER_JMOD_LIST
      JMOD_LIST_DIFF_FILE=$WORK_DIR/$JMOD_FILE.list.diff
<span class="line-modified">!     LC_ALL=C $DIFF $THIS_JMOD_LIST $OTHER_JMOD_LIST &gt; $JMOD_LIST_DIFF_FILE</span>
  
      ONLY_THIS=$($GREP &quot;^&lt;&quot; $JMOD_LIST_DIFF_FILE)
      ONLY_OTHER=$($GREP &quot;^&gt;&quot; $JMOD_LIST_DIFF_FILE)
  
      if [ -n &quot;$ONLY_OTHER&quot; ]; then
<span class="line-new-header">--- 650,11 ---</span>
      mkdir -p $(dirname $THIS_JMOD_LIST) $(dirname $OTHER_JMOD_LIST)
  
      $JMOD list $THIS_JMOD | sort &gt; $THIS_JMOD_LIST
      $JMOD list $OTHER_JMOD | sort &gt; $OTHER_JMOD_LIST
      JMOD_LIST_DIFF_FILE=$WORK_DIR/$JMOD_FILE.list.diff
<span class="line-modified">!     $DIFF $THIS_JMOD_LIST $OTHER_JMOD_LIST &gt; $JMOD_LIST_DIFF_FILE</span>
  
      ONLY_THIS=$($GREP &quot;^&lt;&quot; $JMOD_LIST_DIFF_FILE)
      ONLY_OTHER=$($GREP &quot;^&gt;&quot; $JMOD_LIST_DIFF_FILE)
  
      if [ -n &quot;$ONLY_OTHER&quot; ]; then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 786,22 ***</span>
          # Build an _NT_SYMBOL_PATH that contains all known locations for
          # pdb files.
          PDB_DIRS=&quot;$(ls -d \
              {$OTHER,$THIS}/support/modules_{cmds,libs}/{*,*/*} \
              {$OTHER,$THIS}/support/native/java.base/java_objs \
              )&quot;
          export _NT_SYMBOL_PATH=&quot;$(echo $PDB_DIRS | tr &#39; &#39; &#39;;&#39;)&quot;
      fi
  
<span class="line-modified">!     if [ -z &quot;$SKIP_BIN_DIFF&quot; ]; then</span>
<span class="line-removed">-         if cmp $OTHER_FILE $THIS_FILE &gt; /dev/null; then</span>
          # The files were bytewise identical.
<span class="line-modified">!             if [ -n &quot;$VERBOSE&quot; ]; then</span>
<span class="line-modified">!                 echo &quot;        :           :         :         :          :          : $BIN_FILE&quot;</span>
<span class="line-removed">-             fi</span>
<span class="line-removed">-             return 0</span>
          fi
          BIN_MSG=&quot; diff &quot;
          if [[ &quot;$ACCEPTED_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
              DIFF_BIN=true
              if [[ &quot;$KNOWN_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
                  BIN_MSG=&quot;*$BIN_MSG*&quot;
<span class="line-new-header">--- 809,23 ---</span>
          # Build an _NT_SYMBOL_PATH that contains all known locations for
          # pdb files.
          PDB_DIRS=&quot;$(ls -d \
              {$OTHER,$THIS}/support/modules_{cmds,libs}/{*,*/*} \
              {$OTHER,$THIS}/support/native/java.base/java_objs \
<span class="line-added">+             {$OTHER,$THIS}/support/native/jdk.incubator.jpackage/* \</span>
              )&quot;
          export _NT_SYMBOL_PATH=&quot;$(echo $PDB_DIRS | tr &#39; &#39; &#39;;&#39;)&quot;
      fi
  
<span class="line-modified">!     if cmp $OTHER_FILE $THIS_FILE &gt; /dev/null; then</span>
          # The files were bytewise identical.
<span class="line-modified">!         if [ -n &quot;$VERBOSE&quot; ]; then</span>
<span class="line-modified">!             echo &quot;        :           :         :         :          :          : $BIN_FILE&quot;</span>
          fi
<span class="line-added">+         return 0</span>
<span class="line-added">+     fi</span>
<span class="line-added">+     if [ -z &quot;$SKIP_BIN_DIFF&quot; ]; then</span>
          BIN_MSG=&quot; diff &quot;
          if [[ &quot;$ACCEPTED_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
              DIFF_BIN=true
              if [[ &quot;$KNOWN_BIN_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
                  BIN_MSG=&quot;*$BIN_MSG*&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 811,10 ***</span>
<span class="line-new-header">--- 835,13 ---</span>
              fi
          else
              BIN_MSG=&quot;($BIN_MSG)&quot;
              DIFF_BIN=
          fi
<span class="line-added">+     else</span>
<span class="line-added">+         BIN_MSG=</span>
<span class="line-added">+         DIFF_BIN=</span>
      fi
  
      if [ -n &quot;$STAT&quot; ]; then
          THIS_SIZE=$($STAT $STAT_PRINT_SIZE &quot;$THIS_FILE&quot;)
          OTHER_SIZE=$($STAT $STAT_PRINT_SIZE &quot;$OTHER_FILE&quot;)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 824,11 ***</span>
      fi
      if [ $THIS_SIZE -ne $OTHER_SIZE ]; then
          DIFF_SIZE_NUM=$($EXPR $THIS_SIZE - $OTHER_SIZE)
          DIFF_SIZE_REL=$($EXPR $THIS_SIZE \* 100 / $OTHER_SIZE)
          SIZE_MSG=$($PRINTF &quot;%3d%% %4d&quot; $DIFF_SIZE_REL $DIFF_SIZE_NUM)
<span class="line-modified">!         if [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] &amp;&amp; [ &quot;$DIFF_SIZE_REL&quot; -gt 98 ] \</span>
              &amp;&amp; [ &quot;$DIFF_SIZE_REL&quot; -lt 102 ]; then
              SIZE_MSG=&quot;($SIZE_MSG)&quot;
              DIFF_SIZE=
          elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ] \
              &amp;&amp; [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] \
<span class="line-new-header">--- 851,12 ---</span>
      fi
      if [ $THIS_SIZE -ne $OTHER_SIZE ]; then
          DIFF_SIZE_NUM=$($EXPR $THIS_SIZE - $OTHER_SIZE)
          DIFF_SIZE_REL=$($EXPR $THIS_SIZE \* 100 / $OTHER_SIZE)
          SIZE_MSG=$($PRINTF &quot;%3d%% %4d&quot; $DIFF_SIZE_REL $DIFF_SIZE_NUM)
<span class="line-modified">!         if [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* || &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = &quot;true&quot; ]] \</span>
<span class="line-added">+             &amp;&amp; [ &quot;$DIFF_SIZE_REL&quot; -gt 98 ] \</span>
              &amp;&amp; [ &quot;$DIFF_SIZE_REL&quot; -lt 102 ]; then
              SIZE_MSG=&quot;($SIZE_MSG)&quot;
              DIFF_SIZE=
          elif [ &quot;$OPENJDK_TARGET_OS&quot; = &quot;windows&quot; ] \
              &amp;&amp; [[ &quot;$ACCEPTED_SMALL_SIZE_DIFF&quot; = *&quot;$BIN_FILE&quot;* ]] \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 905,11 ***</span>
              | eval &quot;$this_SYMBOLS_DIFF_FILTER&quot; \
              | $SYM_SORT_CMD \
              &gt; $WORK_FILE_BASE.symbols.this
      fi
  
<span class="line-modified">!     LC_ALL=C $DIFF $WORK_FILE_BASE.symbols.other $WORK_FILE_BASE.symbols.this &gt; $WORK_FILE_BASE.symbols.diff</span>
      if [ -s $WORK_FILE_BASE.symbols.diff ]; then
          SYM_MSG=&quot; diff  &quot;
          if [[ &quot;$ACCEPTED_SYM_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
              DIFF_SYM=true
              if [[ &quot;$KNOWN_SYM_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
<span class="line-new-header">--- 933,11 ---</span>
              | eval &quot;$this_SYMBOLS_DIFF_FILTER&quot; \
              | $SYM_SORT_CMD \
              &gt; $WORK_FILE_BASE.symbols.this
      fi
  
<span class="line-modified">!     $DIFF $WORK_FILE_BASE.symbols.other $WORK_FILE_BASE.symbols.this &gt; $WORK_FILE_BASE.symbols.diff</span>
      if [ -s $WORK_FILE_BASE.symbols.diff ]; then
          SYM_MSG=&quot; diff  &quot;
          if [[ &quot;$ACCEPTED_SYM_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
              DIFF_SYM=true
              if [[ &quot;$KNOWN_SYM_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 945,13 ***</span>
                      | $LDD_FILTER | $AWK &#39;{ print $1;}&#39; | $SORT \
                      | $TEE $WORK_FILE_BASE.deps.this \
                      | $UNIQ &gt; $WORK_FILE_BASE.deps.this.uniq)
          (cd $FILE_WORK_DIR &amp;&amp; $RM -f $NAME)
  
<span class="line-modified">!         LC_ALL=C $DIFF $WORK_FILE_BASE.deps.other $WORK_FILE_BASE.deps.this \</span>
                &gt; $WORK_FILE_BASE.deps.diff
<span class="line-modified">!         LC_ALL=C $DIFF $WORK_FILE_BASE.deps.other.uniq $WORK_FILE_BASE.deps.this.uniq \</span>
                &gt; $WORK_FILE_BASE.deps.diff.uniq
  
          if [ -s $WORK_FILE_BASE.deps.diff ]; then
              if [ -s $WORK_FILE_BASE.deps.diff.uniq ]; then
                  DEP_MSG=&quot; diff  &quot;
<span class="line-new-header">--- 973,13 ---</span>
                      | $LDD_FILTER | $AWK &#39;{ print $1;}&#39; | $SORT \
                      | $TEE $WORK_FILE_BASE.deps.this \
                      | $UNIQ &gt; $WORK_FILE_BASE.deps.this.uniq)
          (cd $FILE_WORK_DIR &amp;&amp; $RM -f $NAME)
  
<span class="line-modified">!         $DIFF $WORK_FILE_BASE.deps.other $WORK_FILE_BASE.deps.this \</span>
                &gt; $WORK_FILE_BASE.deps.diff
<span class="line-modified">!         $DIFF $WORK_FILE_BASE.deps.other.uniq $WORK_FILE_BASE.deps.this.uniq \</span>
                &gt; $WORK_FILE_BASE.deps.diff.uniq
  
          if [ -s $WORK_FILE_BASE.deps.diff ]; then
              if [ -s $WORK_FILE_BASE.deps.diff.uniq ]; then
                  DEP_MSG=&quot; diff  &quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 997,11 ***</span>
              &gt; $WORK_FILE_BASE.fulldump.other 2&gt;&amp;1 &amp;
          $FULLDUMP_CMD $THIS_FILE  | eval &quot;$BUILD_ID_FILTER&quot; | eval &quot;$FULLDUMP_DIFF_FILTER&quot; \
              &gt; $WORK_FILE_BASE.fulldump.this  2&gt;&amp;1 &amp;
          wait
  
<span class="line-modified">!         LC_ALL=C $DIFF $WORK_FILE_BASE.fulldump.other $WORK_FILE_BASE.fulldump.this \</span>
              &gt; $WORK_FILE_BASE.fulldump.diff
  
          if [ -s $WORK_FILE_BASE.fulldump.diff ]; then
              FULLDUMP_DIFF_SIZE=$(ls -n $WORK_FILE_BASE.fulldump.diff | awk &#39;{print $5}&#39;)
              FULLDUMP_MSG=$($PRINTF &quot;%8d&quot; $FULLDUMP_DIFF_SIZE)
<span class="line-new-header">--- 1025,11 ---</span>
              &gt; $WORK_FILE_BASE.fulldump.other 2&gt;&amp;1 &amp;
          $FULLDUMP_CMD $THIS_FILE  | eval &quot;$BUILD_ID_FILTER&quot; | eval &quot;$FULLDUMP_DIFF_FILTER&quot; \
              &gt; $WORK_FILE_BASE.fulldump.this  2&gt;&amp;1 &amp;
          wait
  
<span class="line-modified">!         $DIFF $WORK_FILE_BASE.fulldump.other $WORK_FILE_BASE.fulldump.this \</span>
              &gt; $WORK_FILE_BASE.fulldump.diff
  
          if [ -s $WORK_FILE_BASE.fulldump.diff ]; then
              FULLDUMP_DIFF_SIZE=$(ls -n $WORK_FILE_BASE.fulldump.diff | awk &#39;{print $5}&#39;)
              FULLDUMP_MSG=$($PRINTF &quot;%8d&quot; $FULLDUMP_DIFF_SIZE)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1044,11 ***</span>
              | eval &quot;$this_DIS_DIFF_FILTER&quot; &gt; $WORK_FILE_BASE.dis.other 2&gt;&amp;1 &amp;
          $DIS_CMD $THIS_FILE  | $GREP $DIS_GREP_ARG -v $NAME \
              | eval &quot;$this_DIS_DIFF_FILTER&quot; &gt; $WORK_FILE_BASE.dis.this  2&gt;&amp;1 &amp;
          wait
  
<span class="line-modified">!         LC_ALL=C $DIFF $WORK_FILE_BASE.dis.other $WORK_FILE_BASE.dis.this &gt; $WORK_FILE_BASE.dis.diff</span>
  
          if [ -s $WORK_FILE_BASE.dis.diff ]; then
              DIS_DIFF_SIZE=$(ls -n $WORK_FILE_BASE.dis.diff | awk &#39;{print $5}&#39;)
              DIS_MSG=$($PRINTF &quot;%8d&quot; $DIS_DIFF_SIZE)
              if [[ &quot;$ACCEPTED_DIS_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
<span class="line-new-header">--- 1072,11 ---</span>
              | eval &quot;$this_DIS_DIFF_FILTER&quot; &gt; $WORK_FILE_BASE.dis.other 2&gt;&amp;1 &amp;
          $DIS_CMD $THIS_FILE  | $GREP $DIS_GREP_ARG -v $NAME \
              | eval &quot;$this_DIS_DIFF_FILTER&quot; &gt; $WORK_FILE_BASE.dis.this  2&gt;&amp;1 &amp;
          wait
  
<span class="line-modified">!         $DIFF $WORK_FILE_BASE.dis.other $WORK_FILE_BASE.dis.this &gt; $WORK_FILE_BASE.dis.diff</span>
  
          if [ -s $WORK_FILE_BASE.dis.diff ]; then
              DIS_DIFF_SIZE=$(ls -n $WORK_FILE_BASE.dis.diff | awk &#39;{print $5}&#39;)
              DIS_MSG=$($PRINTF &quot;%8d&quot; $DIS_DIFF_SIZE)
              if [[ &quot;$ACCEPTED_DIS_DIFF&quot; != *&quot;$BIN_FILE&quot;* ]]; then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1438,17 ***</span>
          echo &quot;Comparing to:&quot;
          echo &quot;$OTHER&quot;
          echo
      fi
  
<span class="line-removed">- </span>
      # Find the common images to compare, prioritizing later build stages
<span class="line-modified">!     if [ -d &quot;$THIS/install/jdk&quot; ] &amp;&amp; [ -d &quot;$OTHER/install/jdk&quot; ]; then</span>
<span class="line-removed">-         THIS_JDK=&quot;$THIS/install/jdk&quot;</span>
<span class="line-removed">-         OTHER_JDK=&quot;$OTHER/install/jdk&quot;</span>
<span class="line-removed">-         echo &quot;Selecting install images for JDK compare&quot;</span>
<span class="line-removed">-     elif [ -d &quot;$THIS/images/jdk&quot; ] &amp;&amp; [ -d &quot;$OTHER/images/jdk&quot; ]; then</span>
          THIS_JDK=&quot;$THIS/images/jdk&quot;
          OTHER_JDK=&quot;$OTHER/images/jdk&quot;
          echo &quot;Selecting normal images for JDK compare&quot;
      elif [ -d &quot;$(ls -d $THIS/licensee-src/build/*/images/jdk 2&gt; /dev/null)&quot; ] \
          &amp;&amp; [ -d &quot;$(ls -d $OTHER/licensee-src/build/*/images/jdk 2&gt; /dev/null)&quot; ]
<span class="line-new-header">--- 1466,12 ---</span>
          echo &quot;Comparing to:&quot;
          echo &quot;$OTHER&quot;
          echo
      fi
  
      # Find the common images to compare, prioritizing later build stages
<span class="line-modified">!     if [ -d &quot;$THIS/images/jdk&quot; ] &amp;&amp; [ -d &quot;$OTHER/images/jdk&quot; ]; then</span>
          THIS_JDK=&quot;$THIS/images/jdk&quot;
          OTHER_JDK=&quot;$OTHER/images/jdk&quot;
          echo &quot;Selecting normal images for JDK compare&quot;
      elif [ -d &quot;$(ls -d $THIS/licensee-src/build/*/images/jdk 2&gt; /dev/null)&quot; ] \
          &amp;&amp; [ -d &quot;$(ls -d $OTHER/licensee-src/build/*/images/jdk 2&gt; /dev/null)&quot; ]
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1473,67 ***</span>
      fi
      echo &quot;  $THIS_JDK&quot;
      echo &quot;  $OTHER_JDK&quot;
  
      if [ -d &quot;$THIS/images/jdk-bundle&quot; -o -d &quot;$THIS/deploy/images/jdk-bundle&quot; ] \
<span class="line-modified">! 	     &amp;&amp; [ -d &quot;$OTHER/images/jdk-bundle&quot; -o -d &quot;$OTHER/deploy/images/jdk-bundle&quot; ]; then</span>
<span class="line-modified">! 	if [ -d &quot;$THIS/deploy/images/jdk-bundle&quot; ]; then</span>
              THIS_JDK_BUNDLE=&quot;$THIS/deploy/images/jdk-bundle&quot;
<span class="line-modified">! 	else</span>
              THIS_JDK_BUNDLE=&quot;$THIS/images/jdk-bundle&quot;
<span class="line-modified">! 	fi</span>
<span class="line-modified">! 	if [ -d &quot;$OTHER/deploy/images/jdk-bundle&quot; ]; then</span>
              OTHER_JDK_BUNDLE=&quot;$OTHER/deploy/images/jdk-bundle&quot;
<span class="line-modified">! 	else</span>
              OTHER_JDK_BUNDLE=&quot;$OTHER/images/jdk-bundle&quot;
<span class="line-modified">! 	fi</span>
          echo &quot;Also comparing jdk macosx bundles&quot;
          echo &quot;  $THIS_JDK_BUNDLE&quot;
          echo &quot;  $OTHER_JDK_BUNDLE&quot;
      fi
  
<span class="line-removed">-     if [ -d &quot;$THIS/deploy/bundles&quot; -o -d &quot;$THIS/deploy/images/bundles&quot; ] \</span>
<span class="line-removed">- 	     &amp;&amp; [ -d &quot;$OTHER/deploy/bundles&quot; -o -d &quot;$OTHER/deploy/images/bundles&quot; ]; then</span>
<span class="line-removed">- 	if [ -d &quot;$THIS/deploy/images/bundles&quot; ]; then</span>
<span class="line-removed">-             THIS_DEPLOY_BUNDLE_DIR=&quot;$THIS/deploy/images/bundles&quot;</span>
<span class="line-removed">- 	else</span>
<span class="line-removed">-             THIS_DEPLOY_BUNDLE_DIR=&quot;$THIS/deploy/bundles&quot;</span>
<span class="line-removed">- 	fi</span>
<span class="line-removed">- 	if [ -d &quot;$OTHER/deploy/images/bundles&quot; ]; then</span>
<span class="line-removed">-             OTHER_DEPLOY_BUNDLE_DIR=&quot;$OTHER/deploy/images/bundles&quot;</span>
<span class="line-removed">- 	else</span>
<span class="line-removed">-             OTHER_DEPLOY_BUNDLE_DIR=&quot;$OTHER/deploy/bundles&quot;</span>
<span class="line-removed">- 	fi</span>
<span class="line-removed">-         echo &quot;Also comparing deploy javadoc bundles&quot;</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">- </span>
<span class="line-removed">-     if [ -d &quot;$THIS/images/JavaAppletPlugin.plugin&quot; ] \</span>
<span class="line-removed">- 	     &amp;&amp; [ -d &quot;$OTHER/images/JavaAppletPlugin.plugin&quot; -o -d &quot;$OTHER/deploy/images/JavaAppletPlugin.plugin&quot; ]; then</span>
<span class="line-removed">- 	if [ -d &quot;$THIS/images/JavaAppletPlugin.plugin&quot; ]; then</span>
<span class="line-removed">-             THIS_DEPLOY_APPLET_PLUGIN_DIR=&quot;$THIS/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">- 	else</span>
<span class="line-removed">-             THIS_DEPLOY_APPLET_PLUGIN_DIR=&quot;$THIS/deploy/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">- 	fi</span>
<span class="line-removed">- 	if [ -d &quot;$OTHER/images/JavaAppletPlugin.plugin&quot; ]; then</span>
<span class="line-removed">-             OTHER_DEPLOY_APPLET_PLUGIN_DIR=&quot;$OTHER/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">- 	else</span>
<span class="line-removed">-             OTHER_DEPLOY_APPLET_PLUGIN_DIR=&quot;$OTHER/deploy/images/JavaAppletPlugin.plugin&quot;</span>
<span class="line-removed">- 	fi</span>
<span class="line-removed">-         echo &quot;Also comparing deploy applet image&quot;</span>
<span class="line-removed">-         echo &quot;  $THIS_DEPLOY_APPLET_PLUGIN_DIR&quot;</span>
<span class="line-removed">-         echo &quot;  $OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot;</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">- </span>
<span class="line-removed">-     if [ -d &quot;$THIS/install/sparkle/Sparkle.framework&quot; ] \</span>
<span class="line-removed">-            &amp;&amp; [ -d &quot;$OTHER/install/sparkle/Sparkle.framework&quot; ]; then</span>
<span class="line-removed">-         THIS_SPARKLE_DIR=&quot;$THIS/install/sparkle/Sparkle.framework&quot;</span>
<span class="line-removed">-         OTHER_SPARKLE_DIR=&quot;$OTHER/install/sparkle/Sparkle.framework&quot;</span>
<span class="line-removed">-         echo &quot;Also comparing install sparkle framework&quot;</span>
<span class="line-removed">-         echo &quot;  $THIS_SPARKLE_DIR&quot;</span>
<span class="line-removed">-         echo &quot;  $OTHER_SPARKLE_DIR&quot;</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">- </span>
      THIS_SEC_DIR=&quot;$THIS/images&quot;
      OTHER_SEC_DIR=&quot;$OTHER/images&quot;
      if [ -f &quot;$THIS_SEC_DIR/sec-bin.zip&quot; ] &amp;&amp; [ -f &quot;$OTHER_SEC_DIR/sec-bin.zip&quot; ]; then
          OTHER_SEC_BIN=&quot;$OTHER_SEC_DIR/sec-bin.zip&quot;
          THIS_SEC_BIN=&quot;$THIS_SEC_DIR/sec-bin.zip&quot;
<span class="line-new-header">--- 1496,26 ---</span>
      fi
      echo &quot;  $THIS_JDK&quot;
      echo &quot;  $OTHER_JDK&quot;
  
      if [ -d &quot;$THIS/images/jdk-bundle&quot; -o -d &quot;$THIS/deploy/images/jdk-bundle&quot; ] \
<span class="line-modified">!              &amp;&amp; [ -d &quot;$OTHER/images/jdk-bundle&quot; -o -d &quot;$OTHER/deploy/images/jdk-bundle&quot; ]; then</span>
<span class="line-modified">!         if [ -d &quot;$THIS/deploy/images/jdk-bundle&quot; ]; then</span>
              THIS_JDK_BUNDLE=&quot;$THIS/deploy/images/jdk-bundle&quot;
<span class="line-modified">!         else</span>
              THIS_JDK_BUNDLE=&quot;$THIS/images/jdk-bundle&quot;
<span class="line-modified">!         fi</span>
<span class="line-modified">!         if [ -d &quot;$OTHER/deploy/images/jdk-bundle&quot; ]; then</span>
              OTHER_JDK_BUNDLE=&quot;$OTHER/deploy/images/jdk-bundle&quot;
<span class="line-modified">!         else</span>
              OTHER_JDK_BUNDLE=&quot;$OTHER/images/jdk-bundle&quot;
<span class="line-modified">!         fi</span>
          echo &quot;Also comparing jdk macosx bundles&quot;
          echo &quot;  $THIS_JDK_BUNDLE&quot;
          echo &quot;  $OTHER_JDK_BUNDLE&quot;
      fi
  
      THIS_SEC_DIR=&quot;$THIS/images&quot;
      OTHER_SEC_DIR=&quot;$OTHER/images&quot;
      if [ -f &quot;$THIS_SEC_DIR/sec-bin.zip&quot; ] &amp;&amp; [ -f &quot;$OTHER_SEC_DIR/sec-bin.zip&quot; ]; then
          OTHER_SEC_BIN=&quot;$OTHER_SEC_DIR/sec-bin.zip&quot;
          THIS_SEC_BIN=&quot;$THIS_SEC_DIR/sec-bin.zip&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1555,10 ***</span>
<span class="line-new-header">--- 1537,18 ---</span>
          OTHER_DOCS=&quot;$OTHER/images/docs&quot;
          echo &quot;Also comparing docs&quot;
      else
          echo &quot;WARNING! Docs haven&#39;t been built and won&#39;t be compared.&quot;
      fi
<span class="line-added">+ </span>
<span class="line-added">+     if [ -d &quot;$THIS/images/test&quot; ] &amp;&amp; [ -d &quot;$OTHER/images/test&quot; ]; then</span>
<span class="line-added">+         THIS_TEST=&quot;$THIS/images/test&quot;</span>
<span class="line-added">+         OTHER_TEST=&quot;$OTHER/images/test&quot;</span>
<span class="line-added">+         echo &quot;Also comparing test image&quot;</span>
<span class="line-added">+     else</span>
<span class="line-added">+         echo &quot;WARNING! Test haven&#39;t been built and won&#39;t be compared.&quot;</span>
<span class="line-added">+     fi</span>
  fi
  
  ################################################################################
  # Do the work
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1580,61 ***</span>
          echo -n &quot;Docs &quot;
          compare_dirs $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
          echo -n &quot;Docs &quot;
          compare_files $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_dirs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
          compare_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_dirs $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_dirs $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_files $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_LIBS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          echo -n &quot;JDK &quot;
          compare_all_libs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_libs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_all_libs $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_all_libs $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_EXECS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          compare_all_execs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_execs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_all_execs $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_all_execs $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_GENERAL&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          echo -n &quot;JDK &quot;
<span class="line-new-header">--- 1570,58 ---</span>
          echo -n &quot;Docs &quot;
          compare_dirs $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
          echo -n &quot;Docs &quot;
          compare_files $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         compare_dirs $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         compare_files $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_dirs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
          compare_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  if [ &quot;$CMP_LIBS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          echo -n &quot;JDK &quot;
          compare_all_libs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         STRIP_ALL_bak=&quot;$STRIP_ALL&quot;</span>
<span class="line-added">+         if [ &quot;$STRIP_TESTS_BEFORE_COMPARE&quot; = &quot;true&quot; ]; then</span>
<span class="line-added">+           STRIP_ALL=&quot;true&quot;</span>
<span class="line-added">+         fi</span>
<span class="line-added">+         compare_all_libs $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+         STRIP_ALL=&quot;$STRIP_ALL_bak&quot;</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_libs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  if [ &quot;$CMP_EXECS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
<span class="line-added">+         echo -n &quot;JDK &quot;</span>
          compare_all_execs $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         STRIP_ALL_bak=&quot;$STRIP_ALL&quot;</span>
<span class="line-added">+         if [ &quot;$STRIP_TESTS_BEFORE_COMPARE&quot; = &quot;true&quot; ]; then</span>
<span class="line-added">+           STRIP_ALL=&quot;true&quot;</span>
<span class="line-added">+         fi</span>
<span class="line-added">+         compare_all_execs $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+         STRIP_ALL=&quot;$STRIP_ALL_bak&quot;</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_execs $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  if [ &quot;$CMP_GENERAL&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          echo -n &quot;JDK &quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1646,27 ***</span>
      fi
      if [ -n &quot;$THIS_DOCS&quot; ] &amp;&amp; [ -n &quot;$OTHER_DOCS&quot; ]; then
          echo -n &quot;Docs &quot;
          compare_general_files $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_general_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_general_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_general_files $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_ZIPS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          compare_all_zip_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
      if [ -n &quot;$THIS_SEC_BIN&quot; ] &amp;&amp; [ -n &quot;$OTHER_SEC_BIN&quot; ]; then
          if [ -n &quot;$(echo $THIS_SEC_BIN | $FILTER)&quot; ]; then
              echo &quot;sec-bin.zip...&quot;
              compare_zip_file $THIS_SEC_DIR $OTHER_SEC_DIR $COMPARE_ROOT/sec-bin sec-bin.zip
          fi
<span class="line-new-header">--- 1633,28 ---</span>
      fi
      if [ -n &quot;$THIS_DOCS&quot; ] &amp;&amp; [ -n &quot;$OTHER_DOCS&quot; ]; then
          echo -n &quot;Docs &quot;
          compare_general_files $THIS_DOCS $OTHER_DOCS $COMPARE_ROOT/docs
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         compare_general_files $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_general_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  if [ &quot;$CMP_ZIPS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
<span class="line-added">+         echo -n &quot;JDK &quot;</span>
          compare_all_zip_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         compare_all_zip_files $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_SEC_BIN&quot; ] &amp;&amp; [ -n &quot;$OTHER_SEC_BIN&quot; ]; then
          if [ -n &quot;$(echo $THIS_SEC_BIN | $FILTER)&quot; ]; then
              echo &quot;sec-bin.zip...&quot;
              compare_zip_file $THIS_SEC_DIR $OTHER_SEC_DIR $COMPARE_ROOT/sec-bin sec-bin.zip
          fi
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1684,28 ***</span>
          fi
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_zip_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_BUNDLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_BUNDLE_DIR&quot; ]; then</span>
<span class="line-removed">-         compare_all_zip_files $THIS_DEPLOY_BUNDLE_DIR $OTHER_DEPLOY_BUNDLE_DIR $COMPARE_ROOT/deploy-bundle</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         compare_all_zip_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_JARS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          compare_all_jar_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_jar_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         compare_all_jar_files $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_JMODS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          compare_all_jmod_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
<span class="line-new-header">--- 1672,24 ---</span>
          fi
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_zip_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  if [ &quot;$CMP_JARS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
<span class="line-added">+         echo -n &quot;JDK &quot;</span>
          compare_all_jar_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         compare_all_jar_files $THIS_TEST $OTHER_TEST $COMPARE_ROOT/test</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_all_jar_files $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  if [ &quot;$CMP_JMODS&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          compare_all_jmod_files $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1721,18 ***</span>
          compare_permissions $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_permissions $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_permissions $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_permissions $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-     fi</span>
  fi
  
  if [ &quot;$CMP_TYPES&quot; = &quot;true&quot; ]; then
      if [ -n &quot;$THIS_JDK&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK&quot; ]; then
          echo -n &quot;JDK &quot;
<span class="line-new-header">--- 1705,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1740,21 ***</span>
      fi
      if [ -n &quot;$THIS_JDK_BUNDLE&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK_BUNDLE&quot; ]; then
          echo -n &quot;JDK Bundle &quot;
          compare_file_types $THIS_JDK_BUNDLE $OTHER_JDK_BUNDLE $COMPARE_ROOT/jdk-bundle
      fi
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_file_types $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
<span class="line-removed">-     if [ -n &quot;$THIS_DEPLOY_APPLET_PLUGIN_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_DEPLOY_APPLET_PLUGIN_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;JavaAppletPlugin &quot;</span>
<span class="line-removed">-         compare_file_types $THIS_DEPLOY_APPLET_PLUGIN_DIR $OTHER_DEPLOY_APPLET_PLUGIN_DIR $COMPARE_ROOT/plugin</span>
<span class="line-removed">-     fi</span>
<span class="line-removed">-     if [ -n &quot;$THIS_SPARKLE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_SPARKLE_DIR&quot; ]; then</span>
<span class="line-removed">-         echo -n &quot;Sparkle.framework &quot;</span>
<span class="line-removed">-         compare_file_types $THIS_SPARKLE_DIR $OTHER_SPARKLE_DIR $COMPARE_ROOT/sparkle</span>
<span class="line-removed">-     fi</span>
  fi
  
  echo
  
  if [ -n &quot;$REGRESSIONS&quot; ]; then
<span class="line-new-header">--- 1716,17 ---</span>
      fi
      if [ -n &quot;$THIS_JDK_BUNDLE&quot; ] &amp;&amp; [ -n &quot;$OTHER_JDK_BUNDLE&quot; ]; then
          echo -n &quot;JDK Bundle &quot;
          compare_file_types $THIS_JDK_BUNDLE $OTHER_JDK_BUNDLE $COMPARE_ROOT/jdk-bundle
      fi
<span class="line-added">+     if [ -n &quot;$THIS_TEST&quot; ] &amp;&amp; [ -n &quot;$OTHER_TEST&quot; ]; then</span>
<span class="line-added">+         echo -n &quot;Test &quot;</span>
<span class="line-added">+         compare_file_types $THIS_JDK $OTHER_JDK $COMPARE_ROOT/jdk</span>
<span class="line-added">+     fi</span>
      if [ -n &quot;$THIS_BASE_DIR&quot; ] &amp;&amp; [ -n &quot;$OTHER_BASE_DIR&quot; ]; then
          compare_file_types $THIS_BASE_DIR $OTHER_BASE_DIR $COMPARE_ROOT/base_dir
      fi
  fi
  
  echo
  
  if [ -n &quot;$REGRESSIONS&quot; ]; then
</pre>
<center><a href="../rmic/Rmic-java.management.rmi.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="compare_exceptions.sh.incl.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>