<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/copy/Copy-java.base.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../conf/jib-profiles.js.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="Copy-jdk.crypto.cryptoki.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/copy/Copy-java.base.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2014, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
145 
146 ifeq ($(call isTargetOs, windows solaris), true)
147   DEF_POLICY_SRC_LIST += $(TOPDIR)/src/java.base/$(OPENJDK_TARGET_OS)/lib/security/default.policy
148 endif
149 
150 # Allow imported modules to modify the java.policy
151 ifneq ($(IMPORT_MODULES_CONF), )
152   DEF_POLICY_SRC_LIST += $(wildcard $(IMPORT_MODULES_CONF)/java.base/security/java.policy.extra)
153 endif
154 
155 $(DEF_POLICY_DST): $(DEF_POLICY_SRC_LIST)
156 	$(call MakeTargetDir)
157 	$(RM) $@ $@.tmp
158 	$(foreach f,$(DEF_POLICY_SRC_LIST),$(CAT) $(f) &gt;&gt; $@.tmp;)
159 	$(MV) $@.tmp $@
160 
161 TARGETS += $(DEF_POLICY_DST)
162 
163 ################################################################################
164 
<span class="line-modified">165 ifeq ($(CACERTS_FILE), )</span>
<span class="line-modified">166   CACERTS_FILE := $(TOPDIR)/src/java.base/share/lib/security/cacerts</span>
<span class="line-removed">167 endif</span>
<span class="line-removed">168 </span>
169 CACERTS_DST := $(LIB_DST_DIR)/security/cacerts
170 
171 $(CACERTS_DST): $(CACERTS_FILE)
172 	$(call LogInfo, Copying $(patsubst $(OUTPUTDIR)/%, %, $@))
173 	$(call install-file)
174 
<span class="line-modified">175 TARGETS += $(CACERTS_DST)</span>


176 
177 ################################################################################
178 
179 $(eval $(call SetupCopyFiles, COPY_NET_PROPERTIES, \
180     FILES := $(TOPDIR)/src/java.base/share/conf/net.properties, \
181     DEST := $(CONF_DST_DIR), \
182 ))
183 
184 TARGETS += $(COPY_NET_PROPERTIES)
185 
186 ifeq ($(call isTargetOs, solaris linux), true)
187   $(eval $(call SetupCopyFiles, COPY_SDP_CONF, \
188       FILES := $(TOPDIR)/src/java.base/$(OPENJDK_TARGET_OS_TYPE)/conf/sdp/sdp.conf.template, \
189       DEST := $(CONF_DST_DIR)/sdp, \
190   ))
191 
192   TARGETS += $(COPY_SDP_CONF)
193 endif
194 
195 ################################################################################
</pre>
</td>
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
145 
146 ifeq ($(call isTargetOs, windows solaris), true)
147   DEF_POLICY_SRC_LIST += $(TOPDIR)/src/java.base/$(OPENJDK_TARGET_OS)/lib/security/default.policy
148 endif
149 
150 # Allow imported modules to modify the java.policy
151 ifneq ($(IMPORT_MODULES_CONF), )
152   DEF_POLICY_SRC_LIST += $(wildcard $(IMPORT_MODULES_CONF)/java.base/security/java.policy.extra)
153 endif
154 
155 $(DEF_POLICY_DST): $(DEF_POLICY_SRC_LIST)
156 	$(call MakeTargetDir)
157 	$(RM) $@ $@.tmp
158 	$(foreach f,$(DEF_POLICY_SRC_LIST),$(CAT) $(f) &gt;&gt; $@.tmp;)
159 	$(MV) $@.tmp $@
160 
161 TARGETS += $(DEF_POLICY_DST)
162 
163 ################################################################################
164 
<span class="line-modified">165 # CACERTS_FILE is optionally set in configure to override the default cacerts</span>
<span class="line-modified">166 # which is otherwise generated in Gendata-java.base.gmk</span>


167 CACERTS_DST := $(LIB_DST_DIR)/security/cacerts
168 
169 $(CACERTS_DST): $(CACERTS_FILE)
170 	$(call LogInfo, Copying $(patsubst $(OUTPUTDIR)/%, %, $@))
171 	$(call install-file)
172 
<span class="line-modified">173 ifneq ($(CACERTS_FILE), )</span>
<span class="line-added">174   TARGETS += $(CACERTS_DST)</span>
<span class="line-added">175 endif</span>
176 
177 ################################################################################
178 
179 $(eval $(call SetupCopyFiles, COPY_NET_PROPERTIES, \
180     FILES := $(TOPDIR)/src/java.base/share/conf/net.properties, \
181     DEST := $(CONF_DST_DIR), \
182 ))
183 
184 TARGETS += $(COPY_NET_PROPERTIES)
185 
186 ifeq ($(call isTargetOs, solaris linux), true)
187   $(eval $(call SetupCopyFiles, COPY_SDP_CONF, \
188       FILES := $(TOPDIR)/src/java.base/$(OPENJDK_TARGET_OS_TYPE)/conf/sdp/sdp.conf.template, \
189       DEST := $(CONF_DST_DIR)/sdp, \
190   ))
191 
192   TARGETS += $(COPY_SDP_CONF)
193 endif
194 
195 ################################################################################
</pre>
</td>
</tr>
</table>
<center><a href="../conf/jib-profiles.js.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="Copy-jdk.crypto.cryptoki.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>