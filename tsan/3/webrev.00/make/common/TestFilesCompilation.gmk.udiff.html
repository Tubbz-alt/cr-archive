<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/common/TestFilesCompilation.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="SetupJavaCompilers.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="TextFileProcessing.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/common/TestFilesCompilation.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -60,11 +60,11 @@</span>
    ifeq ($$($1_TYPE), LIBRARY)
      $1_PREFIX = lib
      $1_OUTPUT_SUBDIR := lib
      $1_BASE_CFLAGS := $(CFLAGS_JDKLIB)
      $1_BASE_CXXFLAGS := $(CXXFLAGS_JDKLIB)
<span class="udiff-line-modified-removed">-     $1_LDFLAGS := $(LDFLAGS_JDKLIB) $(call SET_SHARED_LIBRARY_ORIGIN)</span>
<span class="udiff-line-modified-added">+     $1_LDFLAGS := $(LDFLAGS_JDKLIB) $$(call SET_SHARED_LIBRARY_ORIGIN)</span>
      $1_COMPILATION_TYPE := LIBRARY
    else ifeq ($$($1_TYPE), PROGRAM)
      $1_PREFIX = exe
      $1_OUTPUT_SUBDIR := bin
      $1_BASE_CFLAGS := $(CFLAGS_JDKEXE)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -75,12 +75,11 @@</span>
      $$(error Unknown type: $$($1_TYPE))
    endif
  
    # Locate all files with the matching prefix
    $1_FILE_LIST := \
<span class="udiff-line-modified-removed">-       $$(shell $$(FIND) $$($1_SOURCE_DIRS) -type f \( -name &quot;$$($1_PREFIX)*.c&quot; \</span>
<span class="udiff-line-removed">-           -o -name &quot;$$($1_PREFIX)*.cpp&quot; \))</span>
<span class="udiff-line-modified-added">+       $$(call FindFiles, $$($1_SOURCE_DIRS), $$($1_PREFIX)*.c $$($1_PREFIX)*.cpp)</span>
  
    $1_EXCLUDE_PATTERN := $$(addprefix %/, $$($1_EXCLUDE))
    $1_FILTERED_FILE_LIST := $$(filter-out $$($1_EXCLUDE_PATTERN), $$($1_FILE_LIST))
  
    # Setup a compilation for each and every one of them
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -97,16 +96,16 @@</span>
          CXXFLAGS := $$($1_BASE_CXXFLAGS) $$($1_CFLAGS) $$($1_CFLAGS_$$(name)), \
          LDFLAGS := $$($1_LDFLAGS) $$($1_LDFLAGS_$$(name)), \
          DISABLED_WARNINGS_gcc := format undef unused-function unused-value, \
          DISABLED_WARNINGS_clang := undef format-nonliteral \
              missing-field-initializers sometimes-uninitialized, \
<span class="udiff-line-modified-removed">-         DISABLED_WARNINGS_CXX_solstudio := wvarhidenmem, \</span>
<span class="udiff-line-modified-added">+         DISABLED_WARNINGS_CXX_solstudio := wvarhidenmem doubunder, \</span>
          LIBS := $$($1_LIBS_$$(name)), \
          TOOLCHAIN := $(if $$(filter %.cpp, $$(file)), TOOLCHAIN_LINK_CXX, TOOLCHAIN_DEFAULT), \
          OPTIMIZATION := $$(if $$($1_OPTIMIZATION_$$(name)),$$($1_OPTIMIZATION_$$(name)),LOW), \
          COPY_DEBUG_SYMBOLS := false, \
<span class="udiff-line-modified-removed">-         STRIP_SYMBOLS := false, \</span>
<span class="udiff-line-modified-added">+         STRIP_SYMBOLS := $$(if $$($1_STRIP_SYMBOLS_$$(name)),$$($1_STRIP_SYMBOLS_$$(name)),false), \</span>
      )) \
      $$(eval $1 += $$(BUILD_TEST_$$(name)) )  \
    )
  
  endef
</pre>
<center><a href="SetupJavaCompilers.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="TextFileProcessing.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>