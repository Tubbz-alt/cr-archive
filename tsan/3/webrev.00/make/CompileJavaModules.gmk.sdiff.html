<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/CompileJavaModules.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="CompileInterimLangtools.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="CompileToolsJdk.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/CompileJavaModules.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
 23 # questions.
 24 #
 25 
 26 # This must be the first rule
 27 default: all
 28 
 29 include $(SPEC)
 30 include MakeBase.gmk
 31 include Modules.gmk
 32 include JavaCompilation.gmk
 33 include SetupJavaCompilers.gmk
 34 
 35 # Hook to include the corresponding custom file, if present.
 36 $(eval $(call IncludeCustomExtension, CompileJavaModules.gmk))
 37 
 38 ################################################################################
 39 # Module specific build settings
 40 
 41 java.base_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39; -XDstringConcat=inline
<span class="line-modified"> 42 java.base_COPY += .icu .dat .spp content-types.properties hijrah-config-islamic-umalqura.properties</span>
 43 java.base_CLEAN += intrinsic.properties
 44 
 45 java.base_EXCLUDE_FILES += \
 46   $(TOPDIR)/src/java.base/share/classes/jdk/internal/module/ModuleLoaderMap.java
 47 
 48 java.base_EXCLUDES += java/lang/doc-files
 49 
 50 # Exclude BreakIterator classes that are just used in compile process to generate
 51 # data files and shouldn&#39;t go in the product
 52 java.base_EXCLUDE_FILES += sun/text/resources/BreakIteratorRules.java
 53 
 54 ifeq ($(call isTargetOs, solaris), false)
 55   java.base_EXCLUDE_FILES += \
 56       SolarisLoginModule.java \
 57       SolarisSystem.java \
 58       #
 59 endif
 60 
 61 ifeq ($(call isTargetOs, solaris macosx aix), false)
 62   java.base_EXCLUDE_FILES += sun/nio/fs/PollingWatchService.java
 63 endif
 64 
 65 ifeq ($(call isTargetOs, windows), true)
 66   java.base_EXCLUDE_FILES += \
 67       sun/nio/ch/SimpleAsynchronousFileChannelImpl.java \
 68       #
 69 endif
 70 
 71 ################################################################################
 72 
<span class="line-modified"> 73 java.compiler_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
 74 
 75 ################################################################################
 76 
 77 java.datatransfer_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference &#39;-Xdoclint/package:java.*,javax.*&#39;
 78 java.datatransfer_COPY += flavormap.properties
 79 
 80 ################################################################################
 81 
<span class="line-modified"> 82 java.desktop_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference,-accessibility \</span>
 83     &#39;-Xdoclint/package:java.*,javax.*&#39; -Xlint:exports \
 84     --doclint-format html4
 85 java.desktop_COPY += .gif .png .wav .txt .xml .css .pf
 86 java.desktop_CLEAN += iio-plugin.properties cursors.properties
 87 
 88 java.desktop_EXCLUDES += \
 89     java/awt/doc-files \
 90     javax/swing/doc-files \
 91     javax/swing/text/doc-files \
 92     javax/swing/plaf/synth/doc-files \
 93     javax/swing/undo/doc-files \
 94     sun/awt/X11/doc-files \
 95     #
 96 
 97 java.desktop_EXCLUDE_FILES += \
 98     javax/swing/plaf/nimbus/InternalFrameTitlePanePainter.java \
 99     javax/swing/plaf/nimbus/OptionPaneMessageAreaPainter.java \
100     javax/swing/plaf/nimbus/ScrollBarPainter.java \
101     javax/swing/plaf/nimbus/SliderPainter.java \
102     javax/swing/plaf/nimbus/SpinnerPainter.java \
</pre>
<hr />
<pre>
363     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/PeerAddrChange.java \
364     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/ResultContainer.java \
365     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpChannelImpl.java \
366     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpMultiChannelImpl.java \
367     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpNet.java \
368     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpNotification.java \
369     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpServerChannelImpl.java \
370     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SendFailed.java \
371     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/Shutdown.java
372 
373 ifeq ($(call isTargetOs, macosx), true)
374   jdk.sctp_EXCLUDE_FILES += $(SCTP_IMPL_CLASSES)
375 endif
376 
377 ifeq ($(call isTargetOs, aix), true)
378   jdk.sctp_EXCLUDE_FILES += $(SCTP_IMPL_CLASSES)
379 endif
380 
381 ################################################################################
382 







383 jdk.jconsole_COPY += .gif .png
384 
385 jdk.jconsole_CLEAN_FILES += $(wildcard \
386     $(TOPDIR)/src/jdk.jconsole/share/classes/sun/tools/jconsole/resources/*.properties)
387 
388 ################################################################################
389 
390 jdk.jdeps_COPY += .txt
391 
392 jdk.jdeps_CLEAN_FILES += $(wildcard \
393     $(TOPDIR)/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/resources/*.properties \
394     $(TOPDIR)/src/jdk.jdeps/share/classes/com/sun/tools/javap/resources/*.properties)
395 
396 ################################################################################
397 
398 jdk.jdi_EXCLUDES += \
399     com/sun/tools/example/debug/bdi \
400     com/sun/tools/example/debug/event \
401     com/sun/tools/example/debug/gui \
402     com/sun/jdi/doc-files \
</pre>
<hr />
<pre>
443     --add-exports jdk.internal.vm.ci/jdk.vm.ci.runtime=jdk.internal.vm.compiler \
444     --add-exports jdk.internal.vm.ci/jdk.vm.ci.sparc=jdk.internal.vm.compiler \
445     #
446 
447 jdk.internal.vm.compiler_EXCLUDES += \
448     jdk.internal.vm.compiler.collections.test \
449     jdk.tools.jaotc.test \
450     org.graalvm.compiler.api.directives.test \
451     org.graalvm.compiler.api.test \
452     org.graalvm.compiler.asm.aarch64.test \
453     org.graalvm.compiler.asm.amd64.test \
454     org.graalvm.compiler.asm.sparc.test \
455     org.graalvm.compiler.asm.test \
456     org.graalvm.compiler.core.aarch64.test \
457     org.graalvm.compiler.core.amd64.test \
458     org.graalvm.compiler.core.jdk9.test \
459     org.graalvm.compiler.core.match.processor \
460     org.graalvm.compiler.core.test \
461     org.graalvm.compiler.debug.test \
462     org.graalvm.compiler.graph.test \

463     org.graalvm.compiler.hotspot.amd64.test \
464     org.graalvm.compiler.hotspot.jdk9.test \
465     org.graalvm.compiler.hotspot.lir.test \
466     org.graalvm.compiler.hotspot.sparc.test \
467     org.graalvm.compiler.hotspot.test \
468     org.graalvm.compiler.jtt \
469     org.graalvm.compiler.lir.jtt \
470     org.graalvm.compiler.lir.test \
471     org.graalvm.compiler.loop.test \
472     org.graalvm.compiler.microbenchmarks \
473     org.graalvm.compiler.nodeinfo.processor \
474     org.graalvm.compiler.nodes.test \
475     org.graalvm.compiler.options.processor \
476     org.graalvm.compiler.options.test \
477     org.graalvm.compiler.phases.common.test \
478     org.graalvm.compiler.processor \
479     org.graalvm.compiler.replacements.jdk12.test \
480     org.graalvm.compiler.replacements.jdk9.test \
481     org.graalvm.compiler.replacements.processor \
482     org.graalvm.compiler.replacements.test \
</pre>
<hr />
<pre>
636             $(subst _zh_TW,_zh_HK, $(filter %_zh_TW.properties, $1)) \
637          ) \
638        ), \
639        .properties \
640     )
641 
642 ifeq ($(MODULE), java.sql.rowset)
643   TARGETS += $(call CreateHkTargets, $(java.sql.rowset_CLEAN_FILES))
644 endif
645 
646 ifeq ($(MODULE), java.rmi)
647   TARGETS += $(call CreateHkTargets, $(java.rmi_CLEAN_FILES))
648 endif
649 
650 ################################################################################
651 # If this is an imported module, copy the pre built classes and resources into
652 # the modules output dir
653 
654 ifneq ($(wildcard $(IMPORT_MODULE_DIR)), )
655   $(JDK_OUTPUTDIR)/modules/$(MODULE)/_imported.marker: \
<span class="line-modified">656       $(call CacheFind, $(IMPORT_MODULE_DIR))</span>
657 	$(call MakeDir, $(@D))
658         # Do not delete marker and build meta data files
659 	$(RM) -r $(filter-out $(@D)/_%, $(wildcard $(@D)/*))
660 	$(CP) -R $(IMPORT_MODULE_DIR)/* $(@D)/
661 	$(TOUCH) $@
662 
663   TARGETS += $(JDK_OUTPUTDIR)/modules/$(MODULE)/_imported.marker
664 
665   # Add this dependency to avoid a race between compiling module-info.java and
666   # importing the classes.
667   $($(MODULE)_COMPILE_TARGET): $(JDK_OUTPUTDIR)/modules/$(MODULE)/_imported.marker
668 endif
669 
670 ################################################################################
671 
672 ifeq ($(MODULE), jdk.scripting.nashorn)
673   include CompileJavaModulesNashorn.gmk
674 endif
675 
676 ################################################################################
</pre>
</td>
<td>
<hr />
<pre>
  1 #
<span class="line-modified">  2 # Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
 23 # questions.
 24 #
 25 
 26 # This must be the first rule
 27 default: all
 28 
 29 include $(SPEC)
 30 include MakeBase.gmk
 31 include Modules.gmk
 32 include JavaCompilation.gmk
 33 include SetupJavaCompilers.gmk
 34 
 35 # Hook to include the corresponding custom file, if present.
 36 $(eval $(call IncludeCustomExtension, CompileJavaModules.gmk))
 37 
 38 ################################################################################
 39 # Module specific build settings
 40 
 41 java.base_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference,-accessibility &#39;-Xdoclint/package:java.*,javax.*&#39; -XDstringConcat=inline
<span class="line-modified"> 42 java.base_COPY += .icu .dat .spp .nrm content-types.properties hijrah-config-Hijrah-umalqura_islamic-umalqura.properties</span>
 43 java.base_CLEAN += intrinsic.properties
 44 
 45 java.base_EXCLUDE_FILES += \
 46   $(TOPDIR)/src/java.base/share/classes/jdk/internal/module/ModuleLoaderMap.java
 47 
 48 java.base_EXCLUDES += java/lang/doc-files
 49 
 50 # Exclude BreakIterator classes that are just used in compile process to generate
 51 # data files and shouldn&#39;t go in the product
 52 java.base_EXCLUDE_FILES += sun/text/resources/BreakIteratorRules.java
 53 
 54 ifeq ($(call isTargetOs, solaris), false)
 55   java.base_EXCLUDE_FILES += \
 56       SolarisLoginModule.java \
 57       SolarisSystem.java \
 58       #
 59 endif
 60 
 61 ifeq ($(call isTargetOs, solaris macosx aix), false)
 62   java.base_EXCLUDE_FILES += sun/nio/fs/PollingWatchService.java
 63 endif
 64 
 65 ifeq ($(call isTargetOs, windows), true)
 66   java.base_EXCLUDE_FILES += \
 67       sun/nio/ch/SimpleAsynchronousFileChannelImpl.java \
 68       #
 69 endif
 70 
 71 ################################################################################
 72 
<span class="line-modified"> 73 java.compiler_ADD_JAVAC_FLAGS += -Xdoclint:all/protected &#39;-Xdoclint/package:java.*,javax.*&#39;</span>
 74 
 75 ################################################################################
 76 
 77 java.datatransfer_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference &#39;-Xdoclint/package:java.*,javax.*&#39;
 78 java.datatransfer_COPY += flavormap.properties
 79 
 80 ################################################################################
 81 
<span class="line-modified"> 82 java.desktop_ADD_JAVAC_FLAGS += -Xdoclint:all/protected,-reference \</span>
 83     &#39;-Xdoclint/package:java.*,javax.*&#39; -Xlint:exports \
 84     --doclint-format html4
 85 java.desktop_COPY += .gif .png .wav .txt .xml .css .pf
 86 java.desktop_CLEAN += iio-plugin.properties cursors.properties
 87 
 88 java.desktop_EXCLUDES += \
 89     java/awt/doc-files \
 90     javax/swing/doc-files \
 91     javax/swing/text/doc-files \
 92     javax/swing/plaf/synth/doc-files \
 93     javax/swing/undo/doc-files \
 94     sun/awt/X11/doc-files \
 95     #
 96 
 97 java.desktop_EXCLUDE_FILES += \
 98     javax/swing/plaf/nimbus/InternalFrameTitlePanePainter.java \
 99     javax/swing/plaf/nimbus/OptionPaneMessageAreaPainter.java \
100     javax/swing/plaf/nimbus/ScrollBarPainter.java \
101     javax/swing/plaf/nimbus/SliderPainter.java \
102     javax/swing/plaf/nimbus/SpinnerPainter.java \
</pre>
<hr />
<pre>
363     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/PeerAddrChange.java \
364     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/ResultContainer.java \
365     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpChannelImpl.java \
366     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpMultiChannelImpl.java \
367     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpNet.java \
368     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpNotification.java \
369     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SctpServerChannelImpl.java \
370     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/SendFailed.java \
371     $(TOPDIR)/src/jdk.sctp/unix/classes/sun/nio/ch/sctp/Shutdown.java
372 
373 ifeq ($(call isTargetOs, macosx), true)
374   jdk.sctp_EXCLUDE_FILES += $(SCTP_IMPL_CLASSES)
375 endif
376 
377 ifeq ($(call isTargetOs, aix), true)
378   jdk.sctp_EXCLUDE_FILES += $(SCTP_IMPL_CLASSES)
379 endif
380 
381 ################################################################################
382 
<span class="line-added">383 jdk.incubator.jpackage_COPY += .gif .png .txt .spec .script .prerm .preinst .postrm .postinst .list .sh \</span>
<span class="line-added">384     .desktop .copyright .control .plist .template .icns .scpt .entitlements .wxs .wxl .wxi .ico .bmp .tiff</span>
<span class="line-added">385 </span>
<span class="line-added">386 jdk.incubator.jpackage_CLEAN += .properties</span>
<span class="line-added">387 </span>
<span class="line-added">388 ################################################################################</span>
<span class="line-added">389 </span>
390 jdk.jconsole_COPY += .gif .png
391 
392 jdk.jconsole_CLEAN_FILES += $(wildcard \
393     $(TOPDIR)/src/jdk.jconsole/share/classes/sun/tools/jconsole/resources/*.properties)
394 
395 ################################################################################
396 
397 jdk.jdeps_COPY += .txt
398 
399 jdk.jdeps_CLEAN_FILES += $(wildcard \
400     $(TOPDIR)/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/resources/*.properties \
401     $(TOPDIR)/src/jdk.jdeps/share/classes/com/sun/tools/javap/resources/*.properties)
402 
403 ################################################################################
404 
405 jdk.jdi_EXCLUDES += \
406     com/sun/tools/example/debug/bdi \
407     com/sun/tools/example/debug/event \
408     com/sun/tools/example/debug/gui \
409     com/sun/jdi/doc-files \
</pre>
<hr />
<pre>
450     --add-exports jdk.internal.vm.ci/jdk.vm.ci.runtime=jdk.internal.vm.compiler \
451     --add-exports jdk.internal.vm.ci/jdk.vm.ci.sparc=jdk.internal.vm.compiler \
452     #
453 
454 jdk.internal.vm.compiler_EXCLUDES += \
455     jdk.internal.vm.compiler.collections.test \
456     jdk.tools.jaotc.test \
457     org.graalvm.compiler.api.directives.test \
458     org.graalvm.compiler.api.test \
459     org.graalvm.compiler.asm.aarch64.test \
460     org.graalvm.compiler.asm.amd64.test \
461     org.graalvm.compiler.asm.sparc.test \
462     org.graalvm.compiler.asm.test \
463     org.graalvm.compiler.core.aarch64.test \
464     org.graalvm.compiler.core.amd64.test \
465     org.graalvm.compiler.core.jdk9.test \
466     org.graalvm.compiler.core.match.processor \
467     org.graalvm.compiler.core.test \
468     org.graalvm.compiler.debug.test \
469     org.graalvm.compiler.graph.test \
<span class="line-added">470     org.graalvm.compiler.hotspot.aarch64.test \</span>
471     org.graalvm.compiler.hotspot.amd64.test \
472     org.graalvm.compiler.hotspot.jdk9.test \
473     org.graalvm.compiler.hotspot.lir.test \
474     org.graalvm.compiler.hotspot.sparc.test \
475     org.graalvm.compiler.hotspot.test \
476     org.graalvm.compiler.jtt \
477     org.graalvm.compiler.lir.jtt \
478     org.graalvm.compiler.lir.test \
479     org.graalvm.compiler.loop.test \
480     org.graalvm.compiler.microbenchmarks \
481     org.graalvm.compiler.nodeinfo.processor \
482     org.graalvm.compiler.nodes.test \
483     org.graalvm.compiler.options.processor \
484     org.graalvm.compiler.options.test \
485     org.graalvm.compiler.phases.common.test \
486     org.graalvm.compiler.processor \
487     org.graalvm.compiler.replacements.jdk12.test \
488     org.graalvm.compiler.replacements.jdk9.test \
489     org.graalvm.compiler.replacements.processor \
490     org.graalvm.compiler.replacements.test \
</pre>
<hr />
<pre>
644             $(subst _zh_TW,_zh_HK, $(filter %_zh_TW.properties, $1)) \
645          ) \
646        ), \
647        .properties \
648     )
649 
650 ifeq ($(MODULE), java.sql.rowset)
651   TARGETS += $(call CreateHkTargets, $(java.sql.rowset_CLEAN_FILES))
652 endif
653 
654 ifeq ($(MODULE), java.rmi)
655   TARGETS += $(call CreateHkTargets, $(java.rmi_CLEAN_FILES))
656 endif
657 
658 ################################################################################
659 # If this is an imported module, copy the pre built classes and resources into
660 # the modules output dir
661 
662 ifneq ($(wildcard $(IMPORT_MODULE_DIR)), )
663   $(JDK_OUTPUTDIR)/modules/$(MODULE)/_imported.marker: \
<span class="line-modified">664       $(call FindFiles, $(IMPORT_MODULE_DIR))</span>
665 	$(call MakeDir, $(@D))
666         # Do not delete marker and build meta data files
667 	$(RM) -r $(filter-out $(@D)/_%, $(wildcard $(@D)/*))
668 	$(CP) -R $(IMPORT_MODULE_DIR)/* $(@D)/
669 	$(TOUCH) $@
670 
671   TARGETS += $(JDK_OUTPUTDIR)/modules/$(MODULE)/_imported.marker
672 
673   # Add this dependency to avoid a race between compiling module-info.java and
674   # importing the classes.
675   $($(MODULE)_COMPILE_TARGET): $(JDK_OUTPUTDIR)/modules/$(MODULE)/_imported.marker
676 endif
677 
678 ################################################################################
679 
680 ifeq ($(MODULE), jdk.scripting.nashorn)
681   include CompileJavaModulesNashorn.gmk
682 endif
683 
684 ################################################################################
</pre>
</td>
</tr>
</table>
<center><a href="CompileInterimLangtools.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="CompileToolsJdk.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>