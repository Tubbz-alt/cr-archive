<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/gendata/Gendata-jdk.compiler.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="Gendata-java.base.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="GendataBlacklistedCerts.gmk.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/gendata/Gendata-jdk.compiler.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 28 include Modules.gmk
 29 include SetupJavaCompilers.gmk
 30 
 31 ################################################################################
 32 
 33 # Hook to include the corresponding custom file, if present.
 34 $(eval $(call IncludeCustomExtension, gendata/Gendata-jdk.compiler-pre.gmk))
 35 
 36 # This is needed to properly setup DOCS_MODULES.
 37 $(eval $(call ReadImportMetaData))
 38 
 39 # Modules that should be visible for 9 - the documented modules:
 40 CT_MODULES := $(DOCS_MODULES)
 41 
 42 # Get the complete module source path:
 43 CT_MODULESOURCEPATH := $(call GetModuleSrcPath)
 44 
 45 CT_DATA_DESCRIPTION += $(TOPDIR)/make/data/symbols/symbols
 46 
 47 COMPILECREATESYMBOLS_ADD_EXPORTS := \

 48     --add-exports jdk.compiler.interim/com.sun.tools.javac.api=ALL-UNNAMED \
 49     --add-exports jdk.compiler.interim/com.sun.tools.javac.code=ALL-UNNAMED \
 50     --add-exports jdk.compiler.interim/com.sun.tools.javac.util=ALL-UNNAMED \
 51     --add-exports jdk.compiler.interim/com.sun.tools.javac.jvm=ALL-UNNAMED \
 52     #
 53 
 54 $(eval $(call SetupJavaCompilation, COMPILE_CREATE_SYMBOLS, \
 55     SETUP := GENERATE_OLDBYTECODE, \
 56     SRC := $(TOPDIR)/make/langtools/src/classes \
 57         $(TOPDIR)/src/jdk.jdeps/share/classes, \
 58     INCLUDES := build/tools/symbolgenerator com/sun/tools/classfile, \
 59     BIN := $(BUILDTOOLS_OUTPUTDIR)/create_symbols, \
 60     ADD_JAVAC_FLAGS := $(INTERIM_LANGTOOLS_ARGS) \

 61         $(COMPILECREATESYMBOLS_ADD_EXPORTS), \
 62 ))
 63 
 64 $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files/_the.symbols: \
 65     $(COMPILE_CREATE_SYMBOLS) \
 66     $(wildcard $(TOPDIR)/make/data/symbols/*) \
 67     $(MODULE_INFOS)
 68 	$(RM) -r $(@D)
 69 	$(MKDIR) -p $(@D)
 70 	$(ECHO) Creating ct.sym classes
 71 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
 72 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
 73 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
 74 	    build.tools.symbolgenerator.CreateSymbols \
 75 	    build-ctsym \
 76 	    $(CT_DATA_DESCRIPTION) \
 77 	    $(@D)
 78 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
 79 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
 80 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
</pre>
</td>
<td>
<hr />
<pre>
 28 include Modules.gmk
 29 include SetupJavaCompilers.gmk
 30 
 31 ################################################################################
 32 
 33 # Hook to include the corresponding custom file, if present.
 34 $(eval $(call IncludeCustomExtension, gendata/Gendata-jdk.compiler-pre.gmk))
 35 
 36 # This is needed to properly setup DOCS_MODULES.
 37 $(eval $(call ReadImportMetaData))
 38 
 39 # Modules that should be visible for 9 - the documented modules:
 40 CT_MODULES := $(DOCS_MODULES)
 41 
 42 # Get the complete module source path:
 43 CT_MODULESOURCEPATH := $(call GetModuleSrcPath)
 44 
 45 CT_DATA_DESCRIPTION += $(TOPDIR)/make/data/symbols/symbols
 46 
 47 COMPILECREATESYMBOLS_ADD_EXPORTS := \
<span class="line-added"> 48     --add-exports java.base/jdk.internal=java.compiler.interim,jdk.compiler.interim \</span>
 49     --add-exports jdk.compiler.interim/com.sun.tools.javac.api=ALL-UNNAMED \
 50     --add-exports jdk.compiler.interim/com.sun.tools.javac.code=ALL-UNNAMED \
 51     --add-exports jdk.compiler.interim/com.sun.tools.javac.util=ALL-UNNAMED \
 52     --add-exports jdk.compiler.interim/com.sun.tools.javac.jvm=ALL-UNNAMED \
 53     #
 54 
 55 $(eval $(call SetupJavaCompilation, COMPILE_CREATE_SYMBOLS, \
 56     SETUP := GENERATE_OLDBYTECODE, \
 57     SRC := $(TOPDIR)/make/langtools/src/classes \
 58         $(TOPDIR)/src/jdk.jdeps/share/classes, \
 59     INCLUDES := build/tools/symbolgenerator com/sun/tools/classfile, \
 60     BIN := $(BUILDTOOLS_OUTPUTDIR)/create_symbols, \
 61     ADD_JAVAC_FLAGS := $(INTERIM_LANGTOOLS_ARGS) \
<span class="line-added"> 62         --patch-module java.base=$(BUILDTOOLS_OUTPUTDIR)/gensrc/java.base.interim \</span>
 63         $(COMPILECREATESYMBOLS_ADD_EXPORTS), \
 64 ))
 65 
 66 $(SUPPORT_OUTPUTDIR)/symbols/ct.sym-files/_the.symbols: \
 67     $(COMPILE_CREATE_SYMBOLS) \
 68     $(wildcard $(TOPDIR)/make/data/symbols/*) \
 69     $(MODULE_INFOS)
 70 	$(RM) -r $(@D)
 71 	$(MKDIR) -p $(@D)
 72 	$(ECHO) Creating ct.sym classes
 73 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
 74 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
 75 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
 76 	    build.tools.symbolgenerator.CreateSymbols \
 77 	    build-ctsym \
 78 	    $(CT_DATA_DESCRIPTION) \
 79 	    $(@D)
 80 	$(JAVA_SMALL) $(INTERIM_LANGTOOLS_ARGS) \
 81 	    $(COMPILECREATESYMBOLS_ADD_EXPORTS) \
 82 	    -classpath $(BUILDTOOLS_OUTPUTDIR)/create_symbols \
</pre>
</td>
</tr>
</table>
<center><a href="Gendata-java.base.gmk.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="GendataBlacklistedCerts.gmk.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>