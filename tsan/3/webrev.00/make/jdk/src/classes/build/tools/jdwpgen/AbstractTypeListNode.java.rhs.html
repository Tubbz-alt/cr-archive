<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames make/jdk/src/classes/build/tools/jdwpgen/AbstractTypeListNode.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 1998, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package build.tools.jdwpgen;
 27 
 28 import java.util.*;
 29 import java.io.*;
 30 
 31 abstract class AbstractTypeListNode extends AbstractNamedNode {
 32 
 33     void constrainComponent(Context ctx, Node node) {
 34         if (node instanceof TypeNode) {
 35             node.constrain(ctx);
 36         } else {
 37             error(&quot;Expected type descriptor item, got: &quot; + node);
 38         }
 39     }
 40 
 41     void document(PrintWriter writer) {
 42         writer.println(&quot;&lt;dt&gt;&quot; + name() + &quot; Data&quot;);
<a name="1" id="anc1"></a><span class="line-added"> 43         writer.println(&quot;&lt;dd&gt;&quot;);</span>
 44         if (components.isEmpty()) {
<a name="2" id="anc2"></a><span class="line-modified"> 45             writer.println(&quot;(None)&quot;);</span>
 46         } else {
<a name="3" id="anc3"></a><span class="line-modified"> 47             writer.println(&quot;&lt;table&gt;&lt;tr&gt;&quot;);</span>
<span class="line-modified"> 48             writer.println(&quot;&lt;th class=\&quot;bold\&quot; style=\&quot;width: 20%\&quot; scope=\&quot;col\&quot;&gt;Type&quot;);</span>
<span class="line-modified"> 49             writer.println(&quot;&lt;th class=\&quot;bold\&quot; style=\&quot;width: 15%\&quot; scope=\&quot;col\&quot;&gt;Name&quot;);</span>
<span class="line-modified"> 50             writer.println(&quot;&lt;th class=\&quot;bold\&quot; style=\&quot;width: 65%\&quot; scope=\&quot;col\&quot;&gt;Description&quot;);</span>
<span class="line-modified"> 51             writer.println(&quot;&lt;/tr&gt;&quot;);</span>

 52             for (Node node : components) {
 53                 node.document(writer);
 54             }
 55             writer.println(&quot;&lt;/table&gt;&quot;);
 56         }
<a name="4" id="anc4"></a><span class="line-added"> 57         writer.println(&quot;&lt;/dd&gt;&quot;);</span>
 58     }
 59 
 60     void genJavaClassBodyComponents(PrintWriter writer, int depth) {
 61         for (Node node : components) {
 62             TypeNode tn = (TypeNode)node;
 63 
 64             tn.genJavaDeclaration(writer, depth);
 65         }
 66     }
 67 
 68     void genJavaReads(PrintWriter writer, int depth) {
 69         for (Node node : components) {
 70             TypeNode tn = (TypeNode)node;
 71             tn.genJavaRead(writer, depth, tn.name());
 72         }
 73     }
 74 
 75     void genJavaReadingClassBody(PrintWriter writer, int depth,
 76                                  String className) {
 77         genJavaClassBodyComponents(writer, depth);
 78         writer.println();
 79         indent(writer, depth);
 80         if (!context.inEvent()) {
 81             writer.print(&quot;private &quot;);
 82         }
 83         writer.println(className +
 84                        &quot;(VirtualMachineImpl vm, PacketStream ps) {&quot;);
 85         genJavaReads(writer, depth+1);
 86         indent(writer, depth);
 87         writer.println(&quot;}&quot;);
 88     }
 89 
 90     String javaParams() {
 91         StringBuffer sb = new StringBuffer();
 92         for (Iterator&lt;Node&gt; it = components.iterator(); it.hasNext();) {
 93             TypeNode tn = (TypeNode)it.next();
 94             sb.append(tn.javaParam());
 95             if (it.hasNext()) {
 96                 sb.append(&quot;, &quot;);
 97             }
 98         }
 99         return sb.toString();
100     }
101 
102     void genJavaWrites(PrintWriter writer, int depth) {
103         for (Node node : components) {
104             TypeNode tn = (TypeNode)node;
105             tn.genJavaWrite(writer, depth, tn.name());
106         }
107     }
108 
109     void genJavaWritingClassBody(PrintWriter writer, int depth,
110                                  String className) {
111         genJavaClassBodyComponents(writer, depth);
112         writer.println();
113         indent(writer, depth);
114         writer.println(className + &quot;(&quot; + javaParams() + &quot;) {&quot;);
115         for (Node node : components) {
116             TypeNode tn = (TypeNode)node;
117             indent(writer, depth+1);
118             writer.println(&quot;this.&quot; + tn.name() + &quot; = &quot; + tn.name() + &quot;;&quot;);
119         }
120         indent(writer, depth);
121         writer.println(&quot;}&quot;);
122     }
123 }
<a name="5" id="anc5"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="5" type="hidden" />
</body>
</html>