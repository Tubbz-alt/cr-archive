<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames make/jdk/src/classes/build/tools/jdwpgen/AltNode.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 1998, 2013, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package build.tools.jdwpgen;
 27 
 28 import java.util.*;
 29 import java.io.*;
 30 
 31 class AltNode extends AbstractGroupNode implements TypeNode {
 32 
 33     SelectNode select = null;
 34 
 35     void constrain(Context ctx) {
 36         super.constrain(ctx);
 37 
 38         if (!(nameNode instanceof NameValueNode)) {
 39             error(&quot;Alt name must have value: &quot; + nameNode);
 40         }
 41         if (parent instanceof SelectNode) {
 42             select = (SelectNode)parent;
 43         } else {
 44             error(&quot;Alt must be in Select&quot;);
 45         }
 46     }
 47 
 48     void document(PrintWriter writer) {
<a name="1" id="anc1"></a><span class="line-modified"> 49         docRowStart(writer);</span>
<span class="line-modified"> 50         writer.println(&quot;&lt;td colspan=&quot; +</span>
<span class="line-modified"> 51                        (maxStructIndent - structIndent + 1) + &quot;&gt;&quot;);</span>
<span class="line-modified"> 52         writer.println(&quot;Case &quot; + nameNode.name + &quot; - if &lt;i&gt;&quot; +</span>
<span class="line-modified"> 53                        ((SelectNode)parent).typeNode.name +</span>
<span class="line-modified"> 54                        &quot;&lt;/i&gt; is &quot; + nameNode.value() + &quot;:&quot;);</span>
 55         writer.println(&quot;&lt;td&gt;&quot; + comment() + &quot;&amp;nbsp;&quot;);
<a name="2" id="anc2"></a>

 56         ++structIndent;
 57         super.document(writer);
 58         --structIndent;
 59     }
 60 
 61     String javaClassImplements() {
 62         return &quot; extends &quot; + select.commonBaseClass();
 63     }
 64 
 65     void genJavaClassSpecifics(PrintWriter writer, int depth) {
 66         indent(writer, depth);
 67         writer.print(&quot;static final &quot; + select.typeNode.javaType());
 68         writer.println(&quot; ALT_ID = &quot; + nameNode.value() + &quot;;&quot;);
 69         if (context.isWritingCommand()) {
 70             genJavaCreateMethod(writer, depth);
 71         } else {
 72             indent(writer, depth);
 73             writer.println(select.typeNode.javaParam() + &quot;() {&quot;);
 74             indent(writer, depth+1);
 75             writer.println(&quot;return ALT_ID;&quot;);
 76             indent(writer, depth);
 77             writer.println(&quot;}&quot;);
 78         }
 79         super.genJavaClassSpecifics(writer, depth);
 80     }
 81 
 82     void genJavaWriteMethod(PrintWriter writer, int depth) {
 83         genJavaWriteMethod(writer, depth, &quot;&quot;);
 84     }
 85 
 86     void genJavaReadsSelectCase(PrintWriter writer, int depth, String common) {
 87         indent(writer, depth);
 88         writer.println(&quot;case &quot; + nameNode.value() + &quot;:&quot;);
 89         indent(writer, depth+1);
 90         writer.println(common + &quot; = new &quot; + name + &quot;(vm, ps);&quot;);
 91         indent(writer, depth+1);
 92         writer.println(&quot;break;&quot;);
 93     }
 94 
 95     void genJavaCreateMethod(PrintWriter writer, int depth) {
 96         indent(writer, depth);
 97         writer.print(&quot;static &quot; + select.name() + &quot; create(&quot;);
 98         writer.print(javaParams());
 99         writer.println(&quot;) {&quot;);
100         indent(writer, depth+1);
101         writer.print(&quot;return new &quot; + select.name() + &quot;(&quot;);
102         writer.print(&quot;ALT_ID, new &quot; + javaClassName() + &quot;(&quot;);
103         for (Iterator&lt;Node&gt; it = components.iterator(); it.hasNext();) {
104             TypeNode tn = (TypeNode)it.next();
105             writer.print(tn.name());
106             if (it.hasNext()) {
107                 writer.print(&quot;, &quot;);
108             }
109         }
110         writer.println(&quot;));&quot;);
111         indent(writer, depth);
112         writer.println(&quot;}&quot;);
113     }
114 
115 }
<a name="3" id="anc3"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="3" type="hidden" />
</body>
</html>