<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/jdk/src/classes/build/tools/generatecharacter/GenerateCharacter.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../cldrconverter/StringListEntry.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PropList.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/jdk/src/classes/build/tools/generatecharacter/GenerateCharacter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2015, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2002, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 71,10 ***</span>
<span class="line-new-header">--- 71,11 ---</span>
      final static String commandMarker = &quot;$$&quot;;
      static String ROOT                        = &quot;&quot;;
      static String DefaultUnicodeSpecFileName  = ROOT + &quot;UnicodeData.txt&quot;;
      static String DefaultSpecialCasingFileName = ROOT + &quot;SpecialCasing.txt&quot;;
      static String DefaultPropListFileName     = ROOT + &quot;PropList.txt&quot;;
<span class="line-added">+     static String DefaultDerivedPropsFileName = ROOT + &quot;DerivedCoreProperties.txt&quot;;</span>
      static String DefaultJavaTemplateFileName = ROOT + &quot;Character.java.template&quot;;
      static String DefaultJavaOutputFileName   = ROOT + &quot;Character.java&quot;;
      static String DefaultCTemplateFileName    = ROOT + &quot;Character.c.template&quot;;
      static String DefaultCOutputFileName      = ROOT + &quot;Character.c&quot;;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 157,10 ***</span>
<span class="line-new-header">--- 158,12 ---</span>
      1 bit Other_Uppercase property
      1 bit Other_Alphabetic property
      1 bit Other_Math property
      1 bit Ideographic property
      1 bit Noncharacter codepoint property
<span class="line-added">+     1 bit ID_Start property</span>
<span class="line-added">+     1 bit ID_Continue property</span>
      */
  
  
      // bit masks identify each component of a 32-bit property field described
      // above.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 188,19 ***</span>
          shiftPlane          = 16,       maskPlane = 0xFF0000;
  
      // maskMirrored needs to be long, if up 16-bit
      private static final long maskMirrored          = 0x80000000L;
  
<span class="line-modified">!     // bit masks identify the 16-bit priperty field described above, in B</span>
      // table
      private static final long
          maskOtherLowercase  = 0x100000000L,
          maskOtherUppercase  = 0x200000000L,
          maskOtherAlphabetic = 0x400000000L,
          maskOtherMath       = 0x800000000L,
          maskIdeographic     = 0x1000000000L,
<span class="line-modified">!         maskNoncharacterCP  = 0x2000000000L;</span>
  
      // Can compare masked values with these to determine
      // numeric or lexical types.
      public static int
          valueNotNumeric             = 0x0000,
<span class="line-new-header">--- 191,21 ---</span>
          shiftPlane          = 16,       maskPlane = 0xFF0000;
  
      // maskMirrored needs to be long, if up 16-bit
      private static final long maskMirrored          = 0x80000000L;
  
<span class="line-modified">!     // bit masks identify the 16-bit property field described above, in B</span>
      // table
      private static final long
          maskOtherLowercase  = 0x100000000L,
          maskOtherUppercase  = 0x200000000L,
          maskOtherAlphabetic = 0x400000000L,
          maskOtherMath       = 0x800000000L,
          maskIdeographic     = 0x1000000000L,
<span class="line-modified">!         maskNoncharacterCP  = 0x2000000000L,</span>
<span class="line-added">+         maskIDStart         = 0x4000000000L,</span>
<span class="line-added">+         maskIDContinue      = 0x8000000000L;</span>
  
      // Can compare masked values with these to determine
      // numeric or lexical types.
      public static int
          valueNotNumeric             = 0x0000,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 365,10 ***</span>
<span class="line-new-header">--- 370,12 ---</span>
          addExProp(result, propList, &quot;Other_Uppercase&quot;, maskOtherUppercase);
          addExProp(result, propList, &quot;Other_Alphabetic&quot;, maskOtherAlphabetic);
          addExProp(result, propList, &quot;Ideographic&quot;, maskIdeographic);
          //addExProp(result, propList, &quot;Other_Math&quot;, maskOtherMath);
          //addExProp(result, propList, &quot;Noncharacter_CodePoint&quot;, maskNoncharacterCP);
<span class="line-added">+         addExProp(result, propList, &quot;ID_Start&quot;, maskIDStart);</span>
<span class="line-added">+         addExProp(result, propList, &quot;ID_Continue&quot;, maskIDContinue);</span>
  
          return result;
      }
  
      // The maximum and minimum offsets found while scanning the database
</pre>
<hr />
<pre>
<span class="line-old-header">*** 778,10 ***</span>
<span class="line-new-header">--- 785,12 ---</span>
          if (x.equals(&quot;maskTitleCase&quot;)) return &quot;0x&quot; + hex8(maskTitleCase);
          if (x.equals(&quot;maskOtherLowercase&quot;)) return &quot;0x&quot; + hex4(maskOtherLowercase &gt;&gt; 32);
          if (x.equals(&quot;maskOtherUppercase&quot;)) return &quot;0x&quot; + hex4(maskOtherUppercase &gt;&gt; 32);
          if (x.equals(&quot;maskOtherAlphabetic&quot;)) return &quot;0x&quot; + hex4(maskOtherAlphabetic &gt;&gt; 32);
          if (x.equals(&quot;maskIdeographic&quot;)) return &quot;0x&quot; + hex4(maskIdeographic &gt;&gt; 32);
<span class="line-added">+         if (x.equals(&quot;maskIDStart&quot;)) return &quot;0x&quot; + hex4(maskIDStart &gt;&gt; 32);</span>
<span class="line-added">+         if (x.equals(&quot;maskIDContinue&quot;)) return &quot;0x&quot; + hex4(maskIDContinue &gt;&gt; 32);</span>
          if (x.equals(&quot;valueIgnorable&quot;)) return &quot;0x&quot; + hex8(valueIgnorable);
          if (x.equals(&quot;valueJavaUnicodeStart&quot;)) return &quot;0x&quot; + hex8(valueJavaUnicodeStart);
          if (x.equals(&quot;valueJavaOnlyStart&quot;)) return &quot;0x&quot; + hex8(valueJavaOnlyStart);
          if (x.equals(&quot;valueJavaUnicodePart&quot;)) return &quot;0x&quot; + hex8(valueJavaUnicodePart);
          if (x.equals(&quot;valueJavaOnlyPart&quot;)) return &quot;0x&quot; + hex8(valueJavaOnlyPart);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1610,10 ***</span>
<span class="line-new-header">--- 1619,11 ---</span>
      static String TemplateFileName = null;
      static String OutputFileName = null;
      static String UnicodeSpecFileName = null; // liu
      static String SpecialCasingFileName = null;
      static String PropListFileName = null;
<span class="line-added">+     static String DerivedPropsFileName = null;</span>
      static boolean useCharForByte = false;
      static int[] sizes;
      static int bins = 0; // liu; if &gt; 0, then perform search
      static boolean tableAsString = false;
      static boolean bLatin1 = false;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1737,10 ***</span>
<span class="line-new-header">--- 1747,18 ---</span>
                  }
                  else {
                      PropListFileName = args[++j];
                  }
              }
<span class="line-added">+             else if (args[j].equals(&quot;-derivedprops&quot;)) {</span>
<span class="line-added">+                 if (j == args.length -1) {</span>
<span class="line-added">+                     FAIL(&quot;File name missing after -derivedprops&quot;);</span>
<span class="line-added">+                 }</span>
<span class="line-added">+                 else {</span>
<span class="line-added">+                     DerivedPropsFileName = args[++j];</span>
<span class="line-added">+                 }</span>
<span class="line-added">+             }</span>
              else if (args[j].equals(&quot;-plane&quot;)) {
                  if (j == args.length -1) {
                      FAIL(&quot;Plane number missing after -plane&quot;);
                  }
                  else {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1801,10 ***</span>
<span class="line-new-header">--- 1819,14 ---</span>
          }
          if (PropListFileName == null) {
              PropListFileName = DefaultPropListFileName;
              desc.append(&quot; [-proplist &quot; + PropListFileName + &#39;]&#39;);
          }
<span class="line-added">+         if (DerivedPropsFileName == null) {</span>
<span class="line-added">+             DerivedPropsFileName = DefaultDerivedPropsFileName;</span>
<span class="line-added">+             desc.append(&quot; [-derivedprops &quot; + DerivedPropsFileName + &#39;]&#39;);</span>
<span class="line-added">+         }</span>
          if (TemplateFileName == null) {
              TemplateFileName = (Csyntax ? DefaultCTemplateFileName
                    : DefaultJavaTemplateFileName);
              desc.append(&quot; [-template &quot; + TemplateFileName + &#39;]&#39;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1952,10 ***</span>
<span class="line-new-header">--- 1974,11 ---</span>
          try {
  
              UnicodeSpec[] data = UnicodeSpec.readSpecFile(new File(UnicodeSpecFileName), plane);
              specialCaseMaps = SpecialCaseMap.readSpecFile(new File(SpecialCasingFileName), plane);
              PropList propList = PropList.readSpecFile(new File(PropListFileName), plane);
<span class="line-added">+             propList.putAll(PropList.readSpecFile(new File(DerivedPropsFileName), plane));</span>
  
              if (verbose) {
                  System.out.println(data.length + &quot; items read from Unicode spec file &quot; + UnicodeSpecFileName); // liu
              }
              long[] map = buildMap(data, specialCaseMaps, propList);
</pre>
<center><a href="../cldrconverter/StringListEntry.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="PropList.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>