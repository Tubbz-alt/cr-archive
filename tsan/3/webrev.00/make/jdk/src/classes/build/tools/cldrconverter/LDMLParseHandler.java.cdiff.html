<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/jdk/src/classes/build/tools/cldrconverter/LDMLParseHandler.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CLDRConverter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ResourceBundleGenerator.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/jdk/src/classes/build/tools/cldrconverter/LDMLParseHandler.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2012, 2018, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2012, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 27,10 ***</span>
<span class="line-new-header">--- 27,11 ---</span>
  
  import java.io.File;
  import java.io.IOException;
  import java.text.DateFormatSymbols;
  import java.util.ArrayList;
<span class="line-added">+ import java.util.Arrays;</span>
  import java.util.HashMap;
  import java.util.HashSet;
  import java.util.List;
  import java.util.Locale;
  import java.util.Map;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 51,11 ***</span>
      private String zonePrefix;
      private final String id;
      private String currentContext = &quot;&quot;; // &quot;format&quot;/&quot;stand-alone&quot;
      private String currentWidth = &quot;&quot;; // &quot;wide&quot;/&quot;narrow&quot;/&quot;abbreviated&quot;
      private String currentStyle = &quot;&quot;; // short, long for decimalFormat
<span class="line-removed">-     private String compactCount = &quot;&quot;; // one or other for decimalFormat</span>
  
      LDMLParseHandler(String id) {
          this.id = id;
      }
  
<span class="line-new-header">--- 52,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 506,11 ***</span>
          //
          case &quot;decimalFormatLength&quot;:
              String type = attributes.getValue(&quot;type&quot;);
              if (null == type) {
                  // format data for decimal number format
<span class="line-modified">!                 pushStringEntry(qName, attributes, &quot;NumberPatterns/decimal&quot;);</span>
                  currentStyle = type;
              } else {
                  switch (type) {
                      case &quot;short&quot;:
                      case &quot;long&quot;:
<span class="line-new-header">--- 506,12 ---</span>
          //
          case &quot;decimalFormatLength&quot;:
              String type = attributes.getValue(&quot;type&quot;);
              if (null == type) {
                  // format data for decimal number format
<span class="line-modified">!                 pushStringEntry(qName, attributes,</span>
<span class="line-added">+                     currentNumberingSystem + &quot;NumberPatterns/decimal&quot;);</span>
                  currentStyle = type;
              } else {
                  switch (type) {
                      case &quot;short&quot;:
                      case &quot;long&quot;:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 529,62 ***</span>
              if(currentStyle == null) {
                  pushContainer(qName, attributes);
              } else {
                  switch (currentStyle) {
                      case &quot;short&quot;:
<span class="line-removed">-                         pushStringListEntry(qName, attributes,</span>
<span class="line-removed">-                                 currentStyle+&quot;.CompactNumberPatterns&quot;);</span>
<span class="line-removed">-                         break;</span>
                      case &quot;long&quot;:
                          pushStringListEntry(qName, attributes,
                                  currentStyle+&quot;.CompactNumberPatterns&quot;);
                          break;
                      default:
                          pushIgnoredContainer(qName);
                          break;
                  }
              }
              break;
          case &quot;pattern&quot;:
              String containerName = currentContainer.getqName();
<span class="line-modified">!             if (containerName.equals(&quot;decimalFormat&quot;)) {</span>
<span class="line-modified">!                 if (currentStyle == null) {</span>
<span class="line-modified">!                     pushContainer(qName, attributes);</span>
<span class="line-modified">!                 } else {</span>
<span class="line-modified">!                     // The compact number patterns parsing assumes that the order</span>
<span class="line-modified">!                     // of patterns are always in the increasing order of their</span>
<span class="line-modified">!                     // type attribute i.e. type = 1000...</span>
<span class="line-modified">!                     // Between the inflectional forms for a type (e.g.</span>
<span class="line-modified">!                     // count = &quot;one&quot; and count = &quot;other&quot; for type = 1000), it is</span>
<span class="line-modified">!                     // assumed that the count = &quot;one&quot; always appears before</span>
<span class="line-modified">!                     // count = &quot;other&quot;</span>
<span class="line-modified">!                     switch (currentStyle) {</span>
<span class="line-modified">!                         case &quot;short&quot;:</span>
<span class="line-modified">!                         case &quot;long&quot;:</span>
<span class="line-modified">!                             String count = attributes.getValue(&quot;count&quot;);</span>
<span class="line-modified">!                             // first pattern of count = &quot;one&quot; or count = &quot;other&quot;</span>
<span class="line-modified">!                             if ((count.equals(&quot;one&quot;) || count.equals(&quot;other&quot;))</span>
<span class="line-modified">!                                     &amp;&amp; compactCount.equals(&quot;&quot;)) {</span>
<span class="line-modified">!                                 compactCount = count;</span>
<span class="line-modified">!                                 pushStringListElement(qName, attributes,</span>
<span class="line-modified">!                                         (int) Math.log10(Double.parseDouble(attributes.getValue(&quot;type&quot;))));</span>
<span class="line-modified">!                             } else if ((count.equals(&quot;one&quot;) || count.equals(&quot;other&quot;))</span>
<span class="line-modified">!                                     &amp;&amp; compactCount.equals(count)) {</span>
<span class="line-modified">!                                 // extract patterns with similar &quot;count&quot;</span>
<span class="line-modified">!                                 // attribute value</span>
                                  pushStringListElement(qName, attributes,
<span class="line-modified">!                                         (int) Math.log10(Double.parseDouble(attributes.getValue(&quot;type&quot;))));</span>
<span class="line-modified">!                             } else {</span>
                                  pushIgnoredContainer(qName);
<span class="line-modified">!                             }</span>
<span class="line-modified">!                             break;</span>
<span class="line-removed">-                         default:</span>
<span class="line-removed">-                             pushIgnoredContainer(qName);</span>
<span class="line-removed">-                             break;</span>
                      }
                  }
<span class="line-removed">-             } else {</span>
                  pushContainer(qName, attributes);
              }
              break;
          case &quot;currencyFormatLength&quot;:
              if (attributes.getValue(&quot;type&quot;) == null) {
<span class="line-new-header">--- 530,81 ---</span>
              if(currentStyle == null) {
                  pushContainer(qName, attributes);
              } else {
                  switch (currentStyle) {
                      case &quot;short&quot;:
                      case &quot;long&quot;:
                          pushStringListEntry(qName, attributes,
                                  currentStyle+&quot;.CompactNumberPatterns&quot;);
                          break;
                      default:
                          pushIgnoredContainer(qName);
                          break;
                  }
              }
              break;
<span class="line-added">+         case &quot;currencyFormat&quot;:</span>
<span class="line-added">+         case &quot;percentFormat&quot;:</span>
<span class="line-added">+             pushKeyContainer(qName, attributes, attributes.getValue(&quot;type&quot;));</span>
<span class="line-added">+             break;</span>
<span class="line-added">+ </span>
          case &quot;pattern&quot;:
              String containerName = currentContainer.getqName();
<span class="line-modified">!             switch (containerName) {</span>
<span class="line-modified">!                 case &quot;currencyFormat&quot;:</span>
<span class="line-modified">!                 case &quot;percentFormat&quot;:</span>
<span class="line-modified">!                 {</span>
<span class="line-modified">!                     // for FormatData</span>
<span class="line-modified">!                     // copy string for later assembly into NumberPatterns</span>
<span class="line-modified">!                     if (currentContainer instanceof KeyContainer) {</span>
<span class="line-modified">!                         String fStyle = ((KeyContainer)currentContainer).getKey();</span>
<span class="line-modified">!                         if (fStyle.equals(&quot;standard&quot;)) {</span>
<span class="line-modified">!                             pushStringEntry(qName, attributes,</span>
<span class="line-modified">!                                     currentNumberingSystem + &quot;NumberPatterns/&quot; + containerName.replaceFirst(&quot;Format&quot;, &quot;&quot;));</span>
<span class="line-modified">!                         } else if (fStyle.equals(&quot;accounting&quot;) &amp;&amp; containerName.equals(&quot;currencyFormat&quot;)) {</span>
<span class="line-modified">!                             pushStringEntry(qName, attributes,</span>
<span class="line-modified">!                                     currentNumberingSystem + &quot;NumberPatterns/accounting&quot;);</span>
<span class="line-modified">!                         } else {</span>
<span class="line-modified">!                             pushIgnoredContainer(qName);</span>
<span class="line-modified">!                         }</span>
<span class="line-modified">!                     } else {</span>
<span class="line-modified">!                         pushIgnoredContainer(qName);</span>
<span class="line-modified">!                     }</span>
<span class="line-modified">!                 }</span>
<span class="line-modified">!                 break;</span>
<span class="line-modified">! </span>
<span class="line-modified">!                 case &quot;decimalFormat&quot;:</span>
<span class="line-modified">!                     if (currentStyle == null) {</span>
<span class="line-added">+                         pushContainer(qName, attributes);</span>
<span class="line-added">+                     } else {</span>
<span class="line-added">+                         switch (currentStyle) {</span>
<span class="line-added">+                             case &quot;short&quot;:</span>
<span class="line-added">+                             case &quot;long&quot;:</span>
                                  pushStringListElement(qName, attributes,
<span class="line-modified">!                                     (int) Math.log10(Double.parseDouble(attributes.getValue(&quot;type&quot;))),</span>
<span class="line-modified">!                                     attributes.getValue(&quot;count&quot;));</span>
<span class="line-added">+                                 break;</span>
<span class="line-added">+                             default:</span>
                                  pushIgnoredContainer(qName);
<span class="line-modified">!                                 break;</span>
<span class="line-modified">!                         }</span>
                      }
<span class="line-added">+                     break;</span>
<span class="line-added">+                 default:</span>
<span class="line-added">+                     pushContainer(qName, attributes);</span>
<span class="line-added">+                     break;</span>
<span class="line-added">+             }</span>
<span class="line-added">+             break;</span>
<span class="line-added">+         case &quot;currencyFormats&quot;:</span>
<span class="line-added">+         case &quot;decimalFormats&quot;:</span>
<span class="line-added">+         case &quot;percentFormats&quot;:</span>
<span class="line-added">+             {</span>
<span class="line-added">+                 String script = attributes.getValue(&quot;numberSystem&quot;);</span>
<span class="line-added">+                 if (script != null) {</span>
<span class="line-added">+                     addNumberingScript(script);</span>
<span class="line-added">+                     currentNumberingSystem = script + &quot;.&quot;;</span>
                  }
                  pushContainer(qName, attributes);
              }
              break;
          case &quot;currencyFormatLength&quot;:
              if (attributes.getValue(&quot;type&quot;) == null) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 593,28 ***</span>
                  pushContainer(qName, attributes);
              } else {
                  pushIgnoredContainer(qName);
              }
              break;
<span class="line-removed">-         case &quot;currencyFormat&quot;:</span>
<span class="line-removed">-             // for FormatData</span>
<span class="line-removed">-             // copy string for later assembly into NumberPatterns</span>
<span class="line-removed">-             if (attributes.getValue(&quot;type&quot;).equals(&quot;standard&quot;)) {</span>
<span class="line-removed">-             pushStringEntry(qName, attributes, &quot;NumberPatterns/currency&quot;);</span>
<span class="line-removed">-             } else {</span>
<span class="line-removed">-                 pushIgnoredContainer(qName);</span>
<span class="line-removed">-             }</span>
<span class="line-removed">-             break;</span>
<span class="line-removed">-         case &quot;percentFormat&quot;:</span>
<span class="line-removed">-             // for FormatData</span>
<span class="line-removed">-             // copy string for later assembly into NumberPatterns</span>
<span class="line-removed">-             if (attributes.getValue(&quot;type&quot;).equals(&quot;standard&quot;)) {</span>
<span class="line-removed">-             pushStringEntry(qName, attributes, &quot;NumberPatterns/percent&quot;);</span>
<span class="line-removed">-             } else {</span>
<span class="line-removed">-                 pushIgnoredContainer(qName);</span>
<span class="line-removed">-             }</span>
<span class="line-removed">-             break;</span>
          case &quot;defaultNumberingSystem&quot;:
              // default numbering system if multiple numbering systems are used.
              pushStringEntry(qName, attributes, &quot;DefaultNumberingSystem&quot;);
              break;
          case &quot;symbols&quot;:
<span class="line-new-header">--- 613,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 634,35 ***</span>
                  if (digits == null) {
                      pushIgnoredContainer(qName);
                      break;
                  }
  
<span class="line-modified">!                 @SuppressWarnings(&quot;unchecked&quot;)</span>
<span class="line-removed">-                 List&lt;String&gt; numberingScripts = (List&lt;String&gt;) get(&quot;numberingScripts&quot;);</span>
<span class="line-removed">-                 if (numberingScripts == null) {</span>
<span class="line-removed">-                     numberingScripts = new ArrayList&lt;&gt;();</span>
<span class="line-removed">-                     put(&quot;numberingScripts&quot;, numberingScripts);</span>
<span class="line-removed">-                 }</span>
<span class="line-removed">-                 numberingScripts.add(script);</span>
                  put(currentNumberingSystem + &quot;NumberElements/zero&quot;, digits.substring(0, 1));
                  pushContainer(qName, attributes);
              }
              break;
          case &quot;decimal&quot;:
<span class="line-removed">-             // for FormatData</span>
<span class="line-removed">-             // copy string for later assembly into NumberElements</span>
<span class="line-removed">-             if (currentContainer.getqName().equals(&quot;symbols&quot;)) {</span>
<span class="line-removed">-                 pushStringEntry(qName, attributes, currentNumberingSystem + &quot;NumberElements/decimal&quot;);</span>
<span class="line-removed">-             } else {</span>
<span class="line-removed">-                 pushIgnoredContainer(qName);</span>
<span class="line-removed">-             }</span>
<span class="line-removed">-             break;</span>
          case &quot;group&quot;:
              // for FormatData
              // copy string for later assembly into NumberElements
              if (currentContainer.getqName().equals(&quot;symbols&quot;)) {
<span class="line-modified">!                 pushStringEntry(qName, attributes, currentNumberingSystem + &quot;NumberElements/group&quot;);</span>
              } else {
                  pushIgnoredContainer(qName);
              }
              break;
          case &quot;list&quot;:
<span class="line-new-header">--- 636,23 ---</span>
                  if (digits == null) {
                      pushIgnoredContainer(qName);
                      break;
                  }
  
<span class="line-modified">!                 addNumberingScript(script);</span>
                  put(currentNumberingSystem + &quot;NumberElements/zero&quot;, digits.substring(0, 1));
                  pushContainer(qName, attributes);
              }
              break;
          case &quot;decimal&quot;:
          case &quot;group&quot;:
<span class="line-added">+         case &quot;currencyDecimal&quot;:</span>
<span class="line-added">+         case &quot;currencyGroup&quot;:</span>
              // for FormatData
              // copy string for later assembly into NumberElements
              if (currentContainer.getqName().equals(&quot;symbols&quot;)) {
<span class="line-modified">!                 pushStringEntry(qName, attributes, currentNumberingSystem + &quot;NumberElements/&quot; + qName);</span>
              } else {
                  pushIgnoredContainer(qName);
              }
              break;
          case &quot;list&quot;:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 750,10 ***</span>
<span class="line-new-header">--- 740,12 ---</span>
          // &quot;alias&quot; for root
          case &quot;alias&quot;:
              {
                  if (id.equals(&quot;root&quot;) &amp;&amp; !isIgnored(attributes)
                          &amp;&amp; ((currentContainer.getqName().equals(&quot;decimalFormatLength&quot;))
<span class="line-added">+                         || (currentContainer.getqName().equals(&quot;currencyFormat&quot;))</span>
<span class="line-added">+                         || (currentContainer.getqName().equals(&quot;percentFormat&quot;))</span>
                          || (currentCalendarType != null &amp;&amp; !currentCalendarType.lname().startsWith(&quot;islamic-&quot;)))) { // ignore islamic variants
                      pushAliasEntry(qName, attributes, attributes.getValue(&quot;path&quot;));
                  } else {
                      pushIgnoredContainer(qName);
                  }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 905,10 ***</span>
<span class="line-new-header">--- 897,16 ---</span>
          case &quot;eras&quot;:
              break;
          case &quot;decimalFormatLength&quot;: // used for compact number formatting patterns
              keyName = type + &quot;.CompactNumberPatterns&quot;;
              break;
<span class="line-added">+         case &quot;currencyFormat&quot;:</span>
<span class="line-added">+         case &quot;percentFormat&quot;:</span>
<span class="line-added">+             keyName = currentNumberingSystem +</span>
<span class="line-added">+                     &quot;NumberPatterns/&quot; +</span>
<span class="line-added">+                     (type.equals(&quot;standard&quot;) ? containerqName.replaceFirst(&quot;Format&quot;, &quot;&quot;) : type);</span>
<span class="line-added">+             break;</span>
          default:
              keyName = &quot;&quot;;
              break;
          }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 951,10 ***</span>
<span class="line-new-header">--- 949,26 ---</span>
          if (start != -1) {
              String style = path.substring(start + typeKey.length(), path.indexOf(&quot;&#39;]&quot;, start));
              return toJDKKey(qName, &quot;&quot;, style);
          }
  
<span class="line-added">+         // currencyFormat</span>
<span class="line-added">+         typeKey = &quot;currencyFormat[@type=&#39;&quot;;</span>
<span class="line-added">+         start = path.indexOf(typeKey);</span>
<span class="line-added">+         if (start != -1) {</span>
<span class="line-added">+             String style = path.substring(start + typeKey.length(), path.indexOf(&quot;&#39;]&quot;, start));</span>
<span class="line-added">+             return toJDKKey(qName, &quot;&quot;, style);</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         // percentFormat</span>
<span class="line-added">+         typeKey = &quot;percentFormat[@type=&#39;&quot;;</span>
<span class="line-added">+         start = path.indexOf(typeKey);</span>
<span class="line-added">+         if (start != -1) {</span>
<span class="line-added">+             String style = path.substring(start + typeKey.length(), path.indexOf(&quot;&#39;]&quot;, start));</span>
<span class="line-added">+             return toJDKKey(qName, &quot;&quot;, style);</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
          return calType + &quot;.&quot; + toJDKKey(qName, context, width);
      }
  
      @Override
      public void endElement(String uri, String localName, String qName) throws SAXException {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 965,13 ***</span>
              currentCalendarType = null;
              break;
  
          case &quot;defaultNumberingSystem&quot;:
              if (currentContainer instanceof StringEntry) {
<span class="line-modified">!                 defaultNumberingSystem = ((StringEntry) currentContainer).getValue();</span>
<span class="line-removed">-                 assert defaultNumberingSystem != null;</span>
<span class="line-removed">-                 put(((StringEntry) currentContainer).getKey(), defaultNumberingSystem);</span>
              } else {
                  defaultNumberingSystem = null;
              }
              break;
  
<span class="line-new-header">--- 979,11 ---</span>
              currentCalendarType = null;
              break;
  
          case &quot;defaultNumberingSystem&quot;:
              if (currentContainer instanceof StringEntry) {
<span class="line-modified">!                 defaultNumberingSystem = (String) putIfEntry();</span>
              } else {
                  defaultNumberingSystem = null;
              }
              break;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1010,27 ***</span>
              currentContext = &quot;&quot;;
              putIfEntry();
              break;
          case &quot;decimalFormatLength&quot;:
              currentStyle = &quot;&quot;;
<span class="line-modified">!             compactCount = &quot;&quot;;</span>
              putIfEntry();
              break;
          default:
              putIfEntry();
          }
          currentContainer = currentContainer.getParent();
      }
  
<span class="line-modified">!     private void putIfEntry() {</span>
          if (currentContainer instanceof AliasEntry) {
              Entry&lt;?&gt; entry = (Entry&lt;?&gt;) currentContainer;
              String containerqName = entry.getParent().getqName();
              if (containerqName.equals(&quot;decimalFormatLength&quot;)) {
                  String srcKey = toJDKKey(containerqName, &quot;&quot;, currentStyle);
                  String targetKey = getTarget(entry.getKey(), &quot;&quot;, &quot;&quot;, &quot;&quot;);
                  CLDRConverter.aliases.put(srcKey, targetKey);
              } else {
                  Set&lt;String&gt; keyNames = populateAliasKeys(containerqName, currentContext, currentWidth);
                  if (!keyNames.isEmpty()) {
                      for (String keyName : keyNames) {
                          String[] tmp = keyName.split(&quot;,&quot;, 3);
<span class="line-new-header">--- 1022,40 ---</span>
              currentContext = &quot;&quot;;
              putIfEntry();
              break;
          case &quot;decimalFormatLength&quot;:
              currentStyle = &quot;&quot;;
<span class="line-modified">!             putIfEntry();</span>
<span class="line-added">+             break;</span>
<span class="line-added">+         case &quot;currencyFormats&quot;:</span>
<span class="line-added">+         case &quot;decimalFormats&quot;:</span>
<span class="line-added">+         case &quot;percentFormats&quot;:</span>
<span class="line-added">+         case &quot;symbols&quot;:</span>
<span class="line-added">+             currentNumberingSystem = &quot;&quot;;</span>
              putIfEntry();
              break;
          default:
              putIfEntry();
          }
          currentContainer = currentContainer.getParent();
      }
  
<span class="line-modified">!     private Object putIfEntry() {</span>
          if (currentContainer instanceof AliasEntry) {
              Entry&lt;?&gt; entry = (Entry&lt;?&gt;) currentContainer;
              String containerqName = entry.getParent().getqName();
              if (containerqName.equals(&quot;decimalFormatLength&quot;)) {
                  String srcKey = toJDKKey(containerqName, &quot;&quot;, currentStyle);
                  String targetKey = getTarget(entry.getKey(), &quot;&quot;, &quot;&quot;, &quot;&quot;);
                  CLDRConverter.aliases.put(srcKey, targetKey);
<span class="line-added">+             } else if (containerqName.equals(&quot;currencyFormat&quot;) ||</span>
<span class="line-added">+                         containerqName.equals(&quot;percentFormat&quot;)) {</span>
<span class="line-added">+                 KeyContainer kc = (KeyContainer)entry.getParent();</span>
<span class="line-added">+                 CLDRConverter.aliases.put(</span>
<span class="line-added">+                         toJDKKey(containerqName, &quot;&quot;, kc.getKey()),</span>
<span class="line-added">+                         getTarget(entry.getKey(), &quot;&quot;, &quot;&quot;, &quot;&quot;)</span>
<span class="line-added">+                 );</span>
              } else {
                  Set&lt;String&gt; keyNames = populateAliasKeys(containerqName, currentContext, currentWidth);
                  if (!keyNames.isEmpty()) {
                      for (String keyName : keyNames) {
                          String[] tmp = keyName.split(&quot;,&quot;, 3);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1057,13 ***</span>
                  // Tweak for MonthNames for the root locale, Needed for
                  // SimpleDateFormat.format()/parse() roundtrip.
                  if (id.equals(&quot;root&quot;) &amp;&amp; key.startsWith(&quot;MonthNames&quot;)) {
                      value = new DateFormatSymbols(Locale.US).getShortMonths();
                  }
<span class="line-modified">!                 put(entry.getKey(), value);</span>
              }
          }
      }
  
      public String convertOldKeyName(String key) {
          // Explicitly obtained from &quot;alias&quot; attribute in each &quot;key&quot; element.
          switch (key) {
<span class="line-new-header">--- 1082,14 ---</span>
                  // Tweak for MonthNames for the root locale, Needed for
                  // SimpleDateFormat.format()/parse() roundtrip.
                  if (id.equals(&quot;root&quot;) &amp;&amp; key.startsWith(&quot;MonthNames&quot;)) {
                      value = new DateFormatSymbols(Locale.US).getShortMonths();
                  }
<span class="line-modified">!                 return put(entry.getKey(), value);</span>
              }
          }
<span class="line-added">+         return null;</span>
      }
  
      public String convertOldKeyName(String key) {
          // Explicitly obtained from &quot;alias&quot; attribute in each &quot;key&quot; element.
          switch (key) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1079,6 ***</span>
<span class="line-new-header">--- 1105,18 ---</span>
                  return &quot;tz&quot;;
              default:
                  return key;
          }
      }
<span class="line-added">+ </span>
<span class="line-added">+     private void addNumberingScript(String script) {</span>
<span class="line-added">+         @SuppressWarnings(&quot;unchecked&quot;)</span>
<span class="line-added">+         List&lt;String&gt; numberingScripts = (List&lt;String&gt;) get(&quot;numberingScripts&quot;);</span>
<span class="line-added">+         if (numberingScripts == null) {</span>
<span class="line-added">+             numberingScripts = new ArrayList&lt;&gt;();</span>
<span class="line-added">+             put(&quot;numberingScripts&quot;, numberingScripts);</span>
<span class="line-added">+         }</span>
<span class="line-added">+         if (!numberingScripts.contains(script)) {</span>
<span class="line-added">+             numberingScripts.add(script);</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
  }
</pre>
<center><a href="CLDRConverter.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="ResourceBundleGenerator.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>