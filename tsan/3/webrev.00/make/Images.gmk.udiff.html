<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/Images.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="GenerateLinkOptData.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="Init.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/Images.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -100,11 +100,11 @@</span>
  
  $(eval $(call SetupExecute, jlink_jre, \
      WARN := Creating legacy jre image, \
      DEPS := $(JMODS) $(BASE_RELEASE_FILE) \
          $(call DependOnVariable, JDK_MODULES_LIST), \
<span class="udiff-line-modified-removed">-     OUTPUT_DIR := $(JDK_IMAGE_DIR), \</span>
<span class="udiff-line-modified-added">+     OUTPUT_DIR := $(JRE_IMAGE_DIR), \</span>
      SUPPORT_DIR := $(SUPPORT_OUTPUTDIR)/images/jre, \
      PRE_COMMAND := $(RM) -r $(JRE_IMAGE_DIR), \
      COMMAND := $(JLINK_TOOL) --add-modules $(JRE_MODULES_LIST) \
          $(JLINK_JRE_EXTRA_OPTS) --output $(JRE_IMAGE_DIR), \
  ))
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -136,11 +136,11 @@</span>
        SUPPORT_DIR := $(SUPPORT_OUTPUTDIR)/images/jre, \
        COMMAND := $(FIXPATH) $(JRE_IMAGE_DIR)/bin/java -Xshare:dump \
            -Xmx128M -Xms128M $(LOG_INFO), \
    ))
  
<span class="udiff-line-modified-removed">-   JDK_TARGETS += $(gen_cds_archive_jdk)</span>
<span class="udiff-line-modified-added">+   JRE_TARGETS += $(gen_cds_archive_jre)</span>
  endif
  
  ################################################################################
  # src.zip
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -181,25 +181,18 @@</span>
  ################################################################################
  # Code coverage data files
  
  ifeq ($(GCOV_ENABLED), true)
  
<span class="udiff-line-modified-removed">-   GCOV_FIND_EXPR := -type f -name &quot;*.gcno&quot;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   $(eval $(call SetupCopyFiles,COPY_HOTSPOT_GCOV_GCNO, \</span>
<span class="udiff-line-removed">-       SRC := $(OUTPUTDIR), \</span>
<span class="udiff-line-removed">-       DEST := $(SYMBOLS_IMAGE_DIR)/gcov, \</span>
<span class="udiff-line-removed">-       FILES := $(shell $(FIND) $(HOTSPOT_OUTPUTDIR) $(GCOV_FIND_EXPR))))</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   SYMBOLS_TARGETS += $(COPY_HOTSPOT_GCOV_GCNO)</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-   $(eval $(call SetupCopyFiles,COPY_JDK_GCOV_GCNO, \</span>
<span class="udiff-line-modified-added">+   $(eval $(call SetupCopyFiles,COPY_GCOV_GCNO, \</span>
        SRC := $(OUTPUTDIR), \
        DEST := $(SYMBOLS_IMAGE_DIR)/gcov, \
<span class="udiff-line-modified-removed">-       FILES := $(shell $(FIND) $(SUPPORT_OUTPUTDIR)/native $(GCOV_FIND_EXPR))))</span>
<span class="udiff-line-modified-added">+       FILES := $(call FindFiles, $(HOTSPOT_OUTPUTDIR) \</span>
<span class="udiff-line-added">+           $(SUPPORT_OUTPUTDIR)/native, *.gcno) \</span>
<span class="udiff-line-added">+   ))</span>
  
<span class="udiff-line-modified-removed">-   SYMBOLS_TARGETS += $(COPY_JDK_GCOV_GCNO)</span>
<span class="udiff-line-modified-added">+   SYMBOLS_TARGETS += $(COPY_GCOV_GCNO)</span>
  
  endif
  
  ################################################################################
  # Debug symbols
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -228,14 +221,14 @@</span>
  else
    DEBUGINFO_SUFFIXES := .debuginfo .pdb .map
    # On Macosx, if debug symbols have not been zipped, find all files inside *.dSYM
    # dirs.
    ifeq ($(call isTargetOs, macosx), true)
<span class="udiff-line-modified-removed">-     $(eval $(call FillCacheFind, \</span>
<span class="udiff-line-modified-removed">-         $(SUPPORT_OUTPUTDIR)/modules_cmds $(SUPPORT_OUTPUTDIR)/modules_libs))</span>
<span class="udiff-line-modified-added">+     $(call FillFindCache, \</span>
<span class="udiff-line-modified-added">+         $(SUPPORT_OUTPUTDIR)/modules_cmds $(SUPPORT_OUTPUTDIR)/modules_libs)</span>
      FindDebuginfoFiles = \
<span class="udiff-line-modified-removed">-         $(if $(wildcard $1), $(call containing, .dSYM/, $(call CacheFind, $1)))</span>
<span class="udiff-line-modified-added">+         $(if $(wildcard $1), $(call containing, .dSYM/, $(call FindFiles, $1)))</span>
    endif
  endif
  
  # Param 1 - either JDK or JRE
  SetupCopyDebuginfo = \
</pre>
<center><a href="GenerateLinkOptData.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="Init.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>