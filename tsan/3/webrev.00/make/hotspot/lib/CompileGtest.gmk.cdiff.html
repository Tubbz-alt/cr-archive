<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/hotspot/lib/CompileGtest.gmk</title>
    <link rel="stylesheet" href="../../../style.css" />
  </head>
<body>
<center><a href="CompileDtraceLibraries.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="CompileJvm.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/hotspot/lib/CompileGtest.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2016, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 62,38 ***</span>
      OBJECT_DIR := $(JVM_OUTPUTDIR)/gtest/objs, \
      SRC := $(GTEST_TEST_SRC), \
      EXCLUDES := $(JVM_EXCLUDES), \
      EXCLUDE_FILES := gtestLauncher.cpp, \
      EXCLUDE_PATTERNS := $(JVM_EXCLUDE_PATTERNS), \
<span class="line-modified">!     EXTRA_FILES := $(GTEST_FRAMEWORK_SRC)/src/gtest-all.cc, \</span>
      EXTRA_OBJECT_FILES := $(filter-out %/operator_new$(OBJ_SUFFIX), \
          $(BUILD_LIBJVM_ALL_OBJS)), \
<span class="line-modified">!     CFLAGS := $(JVM_CFLAGS) -I$(GTEST_FRAMEWORK_SRC) \</span>
<span class="line-modified">!         -I$(GTEST_FRAMEWORK_SRC)/include \</span>
          $(addprefix -I,$(GTEST_TEST_SRC)), \
      CFLAGS_windows := -EHsc, \
      CFLAGS_solaris := -DGTEST_HAS_EXCEPTIONS=0 -library=stlport4, \
      CFLAGS_macosx := -DGTEST_OS_MAC=1, \
      DISABLED_WARNINGS_gcc := $(DISABLED_WARNINGS_gcc) \
          undef, \
      DISABLED_WARNINGS_clang := $(DISABLED_WARNINGS_clang) \
<span class="line-modified">!         undef switch format-nonliteral tautological-undefined-compare, \</span>
      DISABLED_WARNINGS_solstudio := $(DISABLED_WARNINGS_solstudio) \
          identexpected, \
<span class="line-removed">-     DISABLED_WARNINGS_microsoft := $(DISABLED_WARNINGS_microsoft) \</span>
<span class="line-removed">-         4996, \</span>
      LDFLAGS := $(JVM_LDFLAGS), \
      LDFLAGS_solaris := -library=stlport4 $(call SET_SHARED_LIBRARY_ORIGIN), \
      LIBS := $(JVM_LIBS), \
      OPTIMIZATION := $(JVM_OPTIMIZATION), \
      MAPFILE := $(GTEST_JVM_MAPFILE), \
      USE_MAPFILE_FOR_SYMBOLS := true, \
      COPY_DEBUG_SYMBOLS := $(GTEST_COPY_DEBUG_SYMBOLS), \
      ZIP_EXTERNAL_DEBUG_SYMBOLS := false, \
      STRIP_SYMBOLS := false, \
      PRECOMPILED_HEADER := $(JVM_PRECOMPILED_HEADER), \
<span class="line-modified">!     PRECOMPILED_HEADER_EXCLUDE := gtest-all.cc gtestMain.cpp, \</span>
  ))
  
  TARGETS += $(BUILD_GTEST_LIBJVM)
  
  ################################################################################
<span class="line-new-header">--- 62,43 ---</span>
      OBJECT_DIR := $(JVM_OUTPUTDIR)/gtest/objs, \
      SRC := $(GTEST_TEST_SRC), \
      EXCLUDES := $(JVM_EXCLUDES), \
      EXCLUDE_FILES := gtestLauncher.cpp, \
      EXCLUDE_PATTERNS := $(JVM_EXCLUDE_PATTERNS), \
<span class="line-modified">!     EXTRA_FILES := \</span>
<span class="line-added">+         $(GTEST_FRAMEWORK_SRC)/googletest/src/gtest-all.cc \</span>
<span class="line-added">+         $(GTEST_FRAMEWORK_SRC)/googlemock/src/gmock-all.cc, \</span>
      EXTRA_OBJECT_FILES := $(filter-out %/operator_new$(OBJ_SUFFIX), \
          $(BUILD_LIBJVM_ALL_OBJS)), \
<span class="line-modified">!     CFLAGS := $(JVM_CFLAGS) \</span>
<span class="line-modified">!         -I$(GTEST_FRAMEWORK_SRC)/googletest \</span>
<span class="line-added">+         -I$(GTEST_FRAMEWORK_SRC)/googletest/include \</span>
<span class="line-added">+         -I$(GTEST_FRAMEWORK_SRC)/googlemock \</span>
<span class="line-added">+         -I$(GTEST_FRAMEWORK_SRC)/googlemock/include \</span>
          $(addprefix -I,$(GTEST_TEST_SRC)), \
      CFLAGS_windows := -EHsc, \
      CFLAGS_solaris := -DGTEST_HAS_EXCEPTIONS=0 -library=stlport4, \
      CFLAGS_macosx := -DGTEST_OS_MAC=1, \
      DISABLED_WARNINGS_gcc := $(DISABLED_WARNINGS_gcc) \
          undef, \
      DISABLED_WARNINGS_clang := $(DISABLED_WARNINGS_clang) \
<span class="line-modified">!         undef switch format-nonliteral tautological-undefined-compare \</span>
<span class="line-added">+         self-assign-overloaded, \</span>
      DISABLED_WARNINGS_solstudio := $(DISABLED_WARNINGS_solstudio) \
          identexpected, \
      LDFLAGS := $(JVM_LDFLAGS), \
      LDFLAGS_solaris := -library=stlport4 $(call SET_SHARED_LIBRARY_ORIGIN), \
      LIBS := $(JVM_LIBS), \
      OPTIMIZATION := $(JVM_OPTIMIZATION), \
      MAPFILE := $(GTEST_JVM_MAPFILE), \
      USE_MAPFILE_FOR_SYMBOLS := true, \
      COPY_DEBUG_SYMBOLS := $(GTEST_COPY_DEBUG_SYMBOLS), \
      ZIP_EXTERNAL_DEBUG_SYMBOLS := false, \
      STRIP_SYMBOLS := false, \
      PRECOMPILED_HEADER := $(JVM_PRECOMPILED_HEADER), \
<span class="line-modified">!     PRECOMPILED_HEADER_EXCLUDE := gtest-all.cc gmock-all.cc gtestMain.cpp, \</span>
<span class="line-added">+     DEFINE_THIS_FILE := false, \</span>
  ))
  
  TARGETS += $(BUILD_GTEST_LIBJVM)
  
  ################################################################################
</pre>
<hr />
<pre>
<span class="line-old-header">*** 103,20 ***</span>
      NAME := gtestLauncher, \
      TYPE := EXECUTABLE, \
      OUTPUT_DIR := $(JVM_OUTPUTDIR)/gtest, \
      EXTRA_FILES := $(GTEST_LAUNCHER_SRC), \
      OBJECT_DIR := $(JVM_OUTPUTDIR)/gtest/launcher-objs, \
<span class="line-modified">!     CFLAGS := $(JVM_CFLAGS) -I$(GTEST_FRAMEWORK_SRC) \</span>
<span class="line-modified">!         -I$(GTEST_FRAMEWORK_SRC)/include, \</span>
      LDFLAGS := $(LDFLAGS_JDKEXE), \
      LDFLAGS_unix := -L$(JVM_OUTPUTDIR)/gtest $(call SET_SHARED_LIBRARY_ORIGIN), \
      LDFLAGS_solaris := -library=stlport4, \
      LIBS_linux := $(LIBCXX), \
      LIBS_unix := -ljvm, \
      LIBS_windows := $(JVM_OUTPUTDIR)/gtest/objs/jvm.lib, \
      COPY_DEBUG_SYMBOLS := $(GTEST_COPY_DEBUG_SYMBOLS), \
      ZIP_EXTERNAL_DEBUG_SYMBOLS := false, \
  ))
  
  $(BUILD_GTEST_LAUNCHER): $(BUILD_GTEST_LIBJVM)
  
  TARGETS += $(BUILD_GTEST_LAUNCHER)
<span class="line-new-header">--- 108,24 ---</span>
      NAME := gtestLauncher, \
      TYPE := EXECUTABLE, \
      OUTPUT_DIR := $(JVM_OUTPUTDIR)/gtest, \
      EXTRA_FILES := $(GTEST_LAUNCHER_SRC), \
      OBJECT_DIR := $(JVM_OUTPUTDIR)/gtest/launcher-objs, \
<span class="line-modified">!     CFLAGS := $(JVM_CFLAGS) \</span>
<span class="line-modified">!         -I$(GTEST_FRAMEWORK_SRC)/googletest \</span>
<span class="line-added">+         -I$(GTEST_FRAMEWORK_SRC)/googletest/include \</span>
<span class="line-added">+         -I$(GTEST_FRAMEWORK_SRC)/googlemock \</span>
<span class="line-added">+         -I$(GTEST_FRAMEWORK_SRC)/googlemock/include, \</span>
      LDFLAGS := $(LDFLAGS_JDKEXE), \
      LDFLAGS_unix := -L$(JVM_OUTPUTDIR)/gtest $(call SET_SHARED_LIBRARY_ORIGIN), \
      LDFLAGS_solaris := -library=stlport4, \
      LIBS_linux := $(LIBCXX), \
      LIBS_unix := -ljvm, \
      LIBS_windows := $(JVM_OUTPUTDIR)/gtest/objs/jvm.lib, \
      COPY_DEBUG_SYMBOLS := $(GTEST_COPY_DEBUG_SYMBOLS), \
      ZIP_EXTERNAL_DEBUG_SYMBOLS := false, \
<span class="line-added">+     DEFINE_THIS_FILE := false, \</span>
  ))
  
  $(BUILD_GTEST_LAUNCHER): $(BUILD_GTEST_LIBJVM)
  
  TARGETS += $(BUILD_GTEST_LAUNCHER)
</pre>
<center><a href="CompileDtraceLibraries.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../../index.html" target="_top">index</a> <a href="CompileJvm.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>