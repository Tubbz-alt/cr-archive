<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/MacBundles.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="InitSupport.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="Main.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/MacBundles.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -50,30 +50,28 @@</span>
    endif
  
    $(eval $(call SetupCopyFiles, COPY_JDK_IMAGE, \
        SRC := $(JDK_IMAGE_DIR), \
        DEST := $(JDK_MACOSX_CONTENTS_DIR)/Home, \
<span class="udiff-line-modified-removed">-       FILES := $(call CacheFind, $(JDK_IMAGE_DIR)), \</span>
<span class="udiff-line-modified-added">+       FILES := $(call FindFiles, $(JDK_IMAGE_DIR)), \</span>
    ))
  
    $(eval $(call SetupCopyFiles, COPY_JRE_IMAGE, \
        SRC := $(JRE_IMAGE_DIR), \
        DEST := $(JRE_MACOSX_CONTENTS_DIR)/Home, \
<span class="udiff-line-modified-removed">-       FILES := $(call CacheFind, $(JRE_IMAGE_DIR)), \</span>
<span class="udiff-line-modified-added">+       FILES := $(call FindFiles, $(JRE_IMAGE_DIR)), \</span>
    ))
  
<span class="udiff-line-modified-removed">-   $(JDK_MACOSX_CONTENTS_DIR)/MacOS/libjli.dylib:</span>
<span class="udiff-line-modified-removed">- 	$(call LogInfo, Creating link $(patsubst $(OUTPUTDIR)/%,%,$@))</span>
<span class="udiff-line-modified-removed">- 	$(call MakeTargetDir)</span>
<span class="udiff-line-modified-removed">- 	$(RM) $@</span>
<span class="udiff-line-removed">- 	$(LN) -s ../Home/lib/libjli.dylib $@</span>
<span class="udiff-line-modified-added">+   $(eval $(call SetupCopyFiles, COPY_LIBJLI_JDK, \</span>
<span class="udiff-line-modified-added">+       FILES := $(JDK_IMAGE_DIR)/lib/libjli.dylib, \</span>
<span class="udiff-line-modified-added">+       DEST := $(JDK_MACOSX_CONTENTS_DIR)/MacOS, \</span>
<span class="udiff-line-modified-added">+   ))</span>
  
<span class="udiff-line-modified-removed">-   $(JRE_MACOSX_CONTENTS_DIR)/MacOS/libjli.dylib:</span>
<span class="udiff-line-modified-removed">- 	$(call LogInfo, Creating link $(patsubst $(OUTPUTDIR)/%,%,$@))</span>
<span class="udiff-line-modified-removed">- 	$(call MakeTargetDir)</span>
<span class="udiff-line-modified-removed">- 	$(RM) $@</span>
<span class="udiff-line-removed">- 	$(LN) -s ../Home/lib/libjli.dylib $@</span>
<span class="udiff-line-modified-added">+   $(eval $(call SetupCopyFiles, COPY_LIBJLI_JRE, \</span>
<span class="udiff-line-modified-added">+       FILES := $(JRE_IMAGE_DIR)/lib/libjli.dylib, \</span>
<span class="udiff-line-modified-added">+       DEST := $(JRE_MACOSX_CONTENTS_DIR)/MacOS, \</span>
<span class="udiff-line-modified-added">+   ))</span>
  
    $(eval $(call SetupTextFileProcessing, BUILD_JDK_PLIST, \
        SOURCE_FILES := $(MACOSX_PLIST_SRC)/JDK-Info.plist, \
        OUTPUT_FILE := $(JDK_MACOSX_CONTENTS_DIR)/Info.plist, \
        REPLACEMENTS := \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -95,17 +93,23 @@</span>
            @@PLATFORM_VERSION@@ =&gt; $(BUNDLE_PLATFORM_VERSION) ; \
            @@VERSION@@ =&gt; $(BUNDLE_VERSION) ; \
            @@VENDOR@@ =&gt; $(BUNDLE_VENDOR) , \
    ))
  
<span class="udiff-line-modified-removed">-   jdk-bundle: $(COPY_JDK_IMAGE) $(JDK_MACOSX_CONTENTS_DIR)/MacOS/libjli.dylib \</span>
<span class="udiff-line-removed">-       $(BUILD_JDK_PLIST)</span>
<span class="udiff-line-modified-added">+   $(SUPPORT_OUTPUTDIR)/images/_jdk_bundle_attribute_set: $(COPY_JDK_IMAGE)</span>
  	$(SETFILE) -a B $(dir $(JDK_MACOSX_CONTENTS_DIR))
<span class="udiff-line-added">+ 	$(TOUCH) $@</span>
  
<span class="udiff-line-modified-removed">-   jre-bundle: $(COPY_JRE_IMAGE) $(JRE_MACOSX_CONTENTS_DIR)/MacOS/libjli.dylib \</span>
<span class="udiff-line-removed">-       $(BUILD_JRE_PLIST)</span>
<span class="udiff-line-modified-added">+   $(SUPPORT_OUTPUTDIR)/images/_jre_bundle_attribute_set: $(COPY_JRE_IMAGE)</span>
  	$(SETFILE) -a B $(dir $(JRE_MACOSX_CONTENTS_DIR))
<span class="udiff-line-added">+ 	$(TOUCH) $@</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   jdk-bundle: $(COPY_JDK_IMAGE) $(COPY_LIBJLI_JDK) \</span>
<span class="udiff-line-added">+       $(BUILD_JDK_PLIST) $(SUPPORT_OUTPUTDIR)/images/_jdk_bundle_attribute_set</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   jre-bundle: $(COPY_JRE_IMAGE) $(COPY_LIBJLI_JRE) \</span>
<span class="udiff-line-added">+       $(BUILD_JRE_PLIST) $(SUPPORT_OUTPUTDIR)/images/_jre_bundle_attribute_set</span>
  
  else # Not macosx
  
    bundles:
  	$(ECHO) &quot;No bundles defined for $(OPENJDK_TARGET_OS)&quot;
</pre>
<center><a href="InitSupport.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="Main.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>