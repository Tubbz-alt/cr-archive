<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/basics_windows.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="basics.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="boot-jdk.m4.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/basics_windows.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 146,10 ***</span>
<span class="line-new-header">--- 146,12 ---</span>
    # Input might be given as Windows format, start by converting to
    # unix format.
    path=&quot;[$]$1&quot;
    new_path=`$CYGPATH -u &quot;$path&quot;`
  
<span class="line-added">+   BASIC_ABSOLUTE_PATH(new_path)</span>
<span class="line-added">+ </span>
    # Cygwin tries to hide some aspects of the Windows file system, such that binaries are
    # named .exe but called without that suffix. Therefore, &quot;foo&quot; and &quot;foo.exe&quot; are considered
    # the same file, most of the time (as in &quot;test -f&quot;). But not when running cygpath -s, then
    # &quot;foo.exe&quot; is OK but &quot;foo&quot; is an error.
    #
</pre>
<hr />
<pre>
<span class="line-old-header">*** 179,10 ***</span>
<span class="line-new-header">--- 181,12 ---</span>
    if test &quot;x$has_colon&quot; = x; then
      # Not in mixed or Windows style, start by that.
      new_path=`cmd //c echo $path`
    fi
  
<span class="line-added">+   BASIC_ABSOLUTE_PATH(new_path)</span>
<span class="line-added">+ </span>
    BASIC_MAKE_WINDOWS_SPACE_SAFE_MSYS([$new_path])
    BASIC_WINDOWS_REWRITE_AS_UNIX_PATH(new_path)
    if test &quot;x$path&quot; != &quot;x$new_path&quot;; then
      $1=&quot;$new_path&quot;
      AC_MSG_NOTICE([Rewriting $1 to &quot;$new_path&quot;])
</pre>
<hr />
<pre>
<span class="line-old-header">*** 197,10 ***</span>
<span class="line-new-header">--- 201,12 ---</span>
    # Input might be given as Windows format, start by converting to
    # unix format.
    new_path=&quot;[$]$1&quot;
    BASIC_WINDOWS_REWRITE_AS_UNIX_PATH([new_path])
  
<span class="line-added">+   BASIC_ABSOLUTE_PATH(new_path)</span>
<span class="line-added">+ </span>
    # Call helper function which possibly converts this using DOS-style short mode.
    # If so, the updated path is stored in $new_path.
    BASIC_MAKE_WINDOWS_SPACE_SAFE_WSL([$new_path])
  
    if test &quot;x$path&quot; != &quot;x$new_path&quot;; then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 549,11 ***</span>
      BASIC_WINDOWS_REWRITE_AS_WINDOWS_MIXED_PATH([FIXPATH_BIN_W])
      $RM -rf $FIXPATH_BIN $FIXPATH_DIR
      $MKDIR -p $FIXPATH_DIR $CONFIGURESUPPORT_OUTPUTDIR/bin
      cd $FIXPATH_DIR
      $CC $FIXPATH_SRC_W -Fe$FIXPATH_BIN_W &gt; $FIXPATH_DIR/fixpath1.log 2&gt;&amp;1
<span class="line-modified">!     cd $CURDIR</span>
  
      if test ! -x $FIXPATH_BIN; then
        AC_MSG_RESULT([no])
        cat $FIXPATH_DIR/fixpath1.log
        AC_MSG_ERROR([Could not create $FIXPATH_BIN])
<span class="line-new-header">--- 555,11 ---</span>
      BASIC_WINDOWS_REWRITE_AS_WINDOWS_MIXED_PATH([FIXPATH_BIN_W])
      $RM -rf $FIXPATH_BIN $FIXPATH_DIR
      $MKDIR -p $FIXPATH_DIR $CONFIGURESUPPORT_OUTPUTDIR/bin
      cd $FIXPATH_DIR
      $CC $FIXPATH_SRC_W -Fe$FIXPATH_BIN_W &gt; $FIXPATH_DIR/fixpath1.log 2&gt;&amp;1
<span class="line-modified">!     cd $CONFIGURE_START_DIR</span>
  
      if test ! -x $FIXPATH_BIN; then
        AC_MSG_RESULT([no])
        cat $FIXPATH_DIR/fixpath1.log
        AC_MSG_ERROR([Could not create $FIXPATH_BIN])
</pre>
<hr />
<pre>
<span class="line-old-header">*** 572,11 ***</span>
  
      AC_MSG_CHECKING([if fixpath.exe works])
      cd $FIXPATH_DIR
      $FIXPATH $CC $FIXPATH_SRC -Fe$FIXPATH_DIR/fixpath2.exe \
          &gt; $FIXPATH_DIR/fixpath2.log 2&gt;&amp;1
<span class="line-modified">!     cd $CURDIR</span>
      if test ! -x $FIXPATH_DIR/fixpath2.exe; then
        AC_MSG_RESULT([no])
        cat $FIXPATH_DIR/fixpath2.log
        AC_MSG_ERROR([fixpath did not work!])
      fi
<span class="line-new-header">--- 578,11 ---</span>
  
      AC_MSG_CHECKING([if fixpath.exe works])
      cd $FIXPATH_DIR
      $FIXPATH $CC $FIXPATH_SRC -Fe$FIXPATH_DIR/fixpath2.exe \
          &gt; $FIXPATH_DIR/fixpath2.log 2&gt;&amp;1
<span class="line-modified">!     cd $CONFIGURE_START_DIR</span>
      if test ! -x $FIXPATH_DIR/fixpath2.exe; then
        AC_MSG_RESULT([no])
        cat $FIXPATH_DIR/fixpath2.log
        AC_MSG_ERROR([fixpath did not work!])
      fi
</pre>
<center><a href="basics.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="boot-jdk.m4.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>