<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/spec.gmk.in</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="platform.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/spec.gmk.in</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -30,10 +30,12 @@</span>
  #   (called @OPENJDK_BUILD_AUTOCONF_NAME@ by autoconf)
  # using &#39;configure @CONFIGURE_COMMAND_LINE@&#39;
  
  # The command line given to configure.
  CONFIGURE_COMMAND_LINE:=@CONFIGURE_COMMAND_LINE@
<span class="udiff-line-added">+ # The current directory when configure was run</span>
<span class="udiff-line-added">+ CONFIGURE_START_DIR:=@CONFIGURE_START_DIR@</span>
  
  # A self-referential reference to this file.
  SPEC:=@SPEC@
  
  # Path to autoconf if overriden by the user, to be used by &quot;make reconfigure&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -47,10 +49,13 @@</span>
  COMMA:=,
  
  # What make to use for main processing, after bootstrapping top-level Makefile.
  MAKE := @MAKE@
  
<span class="udiff-line-added">+ # Make sure all shell commands are executed with the C locale</span>
<span class="udiff-line-added">+ export LC_ALL := C</span>
<span class="udiff-line-added">+ </span>
  # The default make arguments
  MAKE_ARGS = $(MAKE_LOG_FLAGS) -r -R -I $(TOPDIR)/make/common SPEC=$(SPEC) \
      MAKE_LOG_FLAGS=&quot;$(MAKE_LOG_FLAGS)&quot; $(MAKE_LOG_VARS)
  
  OUTPUT_SYNC_SUPPORTED:=@OUTPUT_SYNC_SUPPORTED@
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -136,12 +141,13 @@</span>
  SYSROOT_CFLAGS := @SYSROOT_CFLAGS@
  SYSROOT_LDFLAGS := @SYSROOT_LDFLAGS@
  
  # The top-level directory of the source repository
  TOPDIR:=@TOPDIR@
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-added">+ # Usually the top level directory, but could be something else if a custom</span>
<span class="udiff-line-modified-added">+ # root is defined.</span>
<span class="udiff-line-added">+ WORKSPACE_ROOT:=@WORKSPACE_ROOT@</span>
  IMPORT_MODULES_CLASSES:=@IMPORT_MODULES_CLASSES@
  IMPORT_MODULES_CMDS:=@IMPORT_MODULES_CMDS@
  IMPORT_MODULES_LIBS:=@IMPORT_MODULES_LIBS@
  IMPORT_MODULES_CONF:=@IMPORT_MODULES_CONF@
  IMPORT_MODULES_LEGAL:=@IMPORT_MODULES_LEGAL@
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -154,10 +160,11 @@</span>
  # Platform naming variables
  LAUNCHER_NAME:=@LAUNCHER_NAME@
  PRODUCT_NAME:=@PRODUCT_NAME@
  PRODUCT_SUFFIX:=@PRODUCT_SUFFIX@
  JDK_RC_PLATFORM_NAME:=@JDK_RC_PLATFORM_NAME@
<span class="udiff-line-added">+ JDK_RC_NAME:=@JDK_RC_NAME@</span>
  COMPANY_NAME:=@COMPANY_NAME@
  HOTSPOT_VM_DISTRO:=@HOTSPOT_VM_DISTRO@
  MACOSX_BUNDLE_NAME_BASE=@MACOSX_BUNDLE_NAME_BASE@
  MACOSX_BUNDLE_ID_BASE=@MACOSX_BUNDLE_ID_BASE@
  USERNAME:=@USERNAME@
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -206,10 +213,12 @@</span>
  
  # Class-file version
  VERSION_CLASSFILE_MAJOR := @VERSION_CLASSFILE_MAJOR@
  VERSION_CLASSFILE_MINOR := @VERSION_CLASSFILE_MINOR@
  
<span class="udiff-line-added">+ JDK_SOURCE_TARGET_VERSION := @JDK_SOURCE_TARGET_VERSION@</span>
<span class="udiff-line-added">+ </span>
  # Convenience CFLAGS settings for passing version information into native programs.
  VERSION_CFLAGS := \
      -DVERSION_FEATURE=$(VERSION_FEATURE) \
      -DVERSION_INTERIM=$(VERSION_INTERIM) \
      -DVERSION_UPDATE=$(VERSION_UPDATE) \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -278,11 +287,11 @@</span>
  
  # Used for make-time verifications
  VALID_JVM_FEATURES := @VALID_JVM_FEATURES@
  VALID_JVM_VARIANTS := @VALID_JVM_VARIANTS@
  
<span class="udiff-line-modified-removed">- # Control wether Hotspot builds gtest tests</span>
<span class="udiff-line-modified-added">+ # Control whether Hotspot builds gtest tests</span>
  BUILD_GTEST := @BUILD_GTEST@
  
  # Allow overriding the default hotspot library path
  HOTSPOT_OVERRIDE_LIBPATH := @HOTSPOT_OVERRIDE_LIBPATH@
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -290,10 +299,12 @@</span>
  USE_PRECOMPILED_HEADER := @USE_PRECOMPILED_HEADER@
  
  # Only build headless support or not
  ENABLE_HEADLESS_ONLY := @ENABLE_HEADLESS_ONLY@
  
<span class="udiff-line-added">+ ENABLE_LINKTIME_GC := @ENABLE_LINKTIME_GC@</span>
<span class="udiff-line-added">+ </span>
  ENABLE_FULL_DOCS := @ENABLE_FULL_DOCS@
  
  # JDK_OUTPUTDIR specifies where a working jvm is built.
  # You can run $(JDK_OUTPUTDIR)/bin/java
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -365,10 +376,12 @@</span>
  LIBFFI_CFLAGS:=@LIBFFI_CFLAGS@
  ENABLE_LIBFFI_BUNDLING:=@ENABLE_LIBFFI_BUNDLING@
  LIBFFI_LIB_FILE:=@LIBFFI_LIB_FILE@
  GRAALUNIT_LIB := @GRAALUNIT_LIB@
  
<span class="udiff-line-added">+ STATIC_LIBS_CFLAGS := @STATIC_LIBS_CFLAGS@</span>
<span class="udiff-line-added">+ </span>
  JMH_CORE_JAR := @JMH_CORE_JAR@
  JMH_GENERATOR_JAR := @JMH_GENERATOR_JAR@
  JMH_JOPT_SIMPLE_JAR := @JMH_JOPT_SIMPLE_JAR@
  JMH_COMMONS_MATH_JAR := @JMH_COMMONS_MATH_JAR@
  JMH_VERSION := @JMH_VERSION@
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -381,16 +394,17 @@</span>
  
  GCOV_ENABLED=@GCOV_ENABLED@
  JCOV_ENABLED=@JCOV_ENABLED@
  JCOV_HOME=@JCOV_HOME@
  JCOV_INPUT_JDK=@JCOV_INPUT_JDK@
<span class="udiff-line-added">+ JCOV_FILTERS=@JCOV_FILTERS@</span>
  
  # AddressSanitizer
  export ASAN_ENABLED:=@ASAN_ENABLED@
  export DEVKIT_LIB_DIR:=@DEVKIT_LIB_DIR@
  ifeq ($(ASAN_ENABLED), yes)
<span class="udiff-line-modified-removed">-   export ASAN_OPTIONS=&quot;handle_segv=0 detect_leaks=0&quot;</span>
<span class="udiff-line-modified-added">+   export ASAN_OPTIONS=handle_segv=0 detect_leaks=0</span>
    ifneq ($(DEVKIT_LIB_DIR),)
      export LD_LIBRARY_PATH:=$(LD_LIBRARY_PATH):$(DEVKIT_LIB_DIR)
    endif
  endif
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -401,10 +415,13 @@</span>
  # The lowest required version of macosx
  MACOSX_VERSION_MIN=@MACOSX_VERSION_MIN@
  # The highest allowed version of macosx
  MACOSX_VERSION_MAX=@MACOSX_VERSION_MAX@
  
<span class="udiff-line-added">+ # The macosx code signing identity to use</span>
<span class="udiff-line-added">+ MACOSX_CODESIGN_IDENTITY=@MACOSX_CODESIGN_IDENTITY@</span>
<span class="udiff-line-added">+ </span>
  # Toolchain type: gcc, clang, solstudio, lxc, microsoft...
  TOOLCHAIN_TYPE:=@TOOLCHAIN_TYPE@
  TOOLCHAIN_VERSION := @TOOLCHAIN_VERSION@
  CC_VERSION_NUMBER := @CC_VERSION_NUMBER@
  CXX_VERSION_NUMBER := @CXX_VERSION_NUMBER@
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -480,10 +497,11 @@</span>
  
  # These flags might contain variables set by a custom extension that is included later.
  EXTRA_CFLAGS = @EXTRA_CFLAGS@
  EXTRA_CXXFLAGS = @EXTRA_CXXFLAGS@
  EXTRA_LDFLAGS = @EXTRA_LDFLAGS@
<span class="udiff-line-added">+ EXTRA_ASFLAGS = @EXTRA_ASFLAGS@</span>
  
  CXX:=@FIXPATH@ @CCACHE@ @ICECC@ @CXX@
  
  CPP:=@FIXPATH@ @CPP@
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -752,10 +770,11 @@</span>
  JTREGEXE:=@JTREGEXE@
  JIB_HOME:=@JIB_HOME@
  XCODEBUILD=@XCODEBUILD@
  DTRACE := @DTRACE@
  FIXPATH:=@FIXPATH@
<span class="udiff-line-added">+ ULIMIT:=@ULIMIT@</span>
  
  TAR_TYPE:=@TAR_TYPE@
  TAR_CREATE_EXTRA_PARAM:=@TAR_CREATE_EXTRA_PARAM@
  TAR_INCLUDE_PARAM:=@TAR_INCLUDE_PARAM@
  TAR_SUPPORTS_TRANSFORM:=@TAR_SUPPORTS_TRANSFORM@
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -880,17 +899,31 @@</span>
  DOCS_IMAGE_SUBDIR := docs
  DOCS_IMAGE_DIR = $(IMAGES_OUTPUTDIR)/$(DOCS_IMAGE_SUBDIR)
  # Output docs directly into image
  DOCS_OUTPUTDIR := $(DOCS_IMAGE_DIR)
  
<span class="udiff-line-added">+ # Static libs image</span>
<span class="udiff-line-added">+ STATIC_LIBS_IMAGE_SUBDIR := static-libs</span>
<span class="udiff-line-added">+ STATIC_LIBS_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(STATIC_LIBS_IMAGE_SUBDIR)</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ # Graal builder image</span>
<span class="udiff-line-added">+ GRAAL_BUILDER_IMAGE_SUBDIR := graal-builder-jdk</span>
<span class="udiff-line-added">+ GRAAL_BUILDER_IMAGE_DIR := $(IMAGES_OUTPUTDIR)/$(GRAAL_BUILDER_IMAGE_SUBDIR)</span>
<span class="udiff-line-added">+ </span>
  # Macosx bundles directory definitions
  JDK_MACOSX_BUNDLE_SUBDIR=jdk-bundle
  JRE_MACOSX_BUNDLE_SUBDIR=jre-bundle
<span class="udiff-line-added">+ JDK_MACOSX_BUNDLE_SUBDIR_SIGNED=jdk-bundle-signed</span>
<span class="udiff-line-added">+ JRE_MACOSX_BUNDLE_SUBDIR_SIGNED=jre-bundle-signed</span>
  JDK_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR)
  JRE_MACOSX_BUNDLE_DIR=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR)
<span class="udiff-line-modified-removed">- JDK_MACOSX_CONTENTS_SUBDIR=jdk-$(VERSION_NUMBER).jdk/Contents</span>
<span class="udiff-line-modified-removed">- JRE_MACOSX_CONTENTS_SUBDIR=jre-$(VERSION_NUMBER).jre/Contents</span>
<span class="udiff-line-modified-added">+ JDK_MACOSX_BUNDLE_DIR_SIGNED=$(IMAGES_OUTPUTDIR)/$(JDK_MACOSX_BUNDLE_SUBDIR_SIGNED)</span>
<span class="udiff-line-modified-added">+ JRE_MACOSX_BUNDLE_DIR_SIGNED=$(IMAGES_OUTPUTDIR)/$(JRE_MACOSX_BUNDLE_SUBDIR_SIGNED)</span>
<span class="udiff-line-added">+ JDK_MACOSX_BUNDLE_TOP_DIR=jdk-$(VERSION_NUMBER).jdk</span>
<span class="udiff-line-added">+ JRE_MACOSX_BUNDLE_TOP_DIR=jre-$(VERSION_NUMBER).jre</span>
<span class="udiff-line-added">+ JDK_MACOSX_CONTENTS_SUBDIR=$(JDK_MACOSX_BUNDLE_TOP_DIR)/Contents</span>
<span class="udiff-line-added">+ JRE_MACOSX_CONTENTS_SUBDIR=$(JRE_MACOSX_BUNDLE_TOP_DIR)/Contents</span>
  JDK_MACOSX_CONTENTS_DIR=$(JDK_MACOSX_BUNDLE_DIR)/$(JDK_MACOSX_CONTENTS_SUBDIR)
  JRE_MACOSX_CONTENTS_DIR=$(JRE_MACOSX_BUNDLE_DIR)/$(JRE_MACOSX_CONTENTS_SUBDIR)
  
  # Bundle names
  BASE_NAME := $(VERSION_SHORT)+$(VERSION_BUILD)_$(OPENJDK_TARGET_BUNDLE_PLATFORM)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -903,17 +936,20 @@</span>
    JDK_BUNDLE_EXTENSION := zip
  else
    JDK_BUNDLE_EXTENSION := tar.gz
  endif
  JDK_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
<span class="udiff-line-added">+ JRE_BUNDLE_NAME := jre-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)</span>
  JDK_SYMBOLS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin$(DEBUG_PART)-symbols.tar.gz
  TEST_DEMOS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests-demos$(DEBUG_PART).tar.gz
  TEST_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-tests$(DEBUG_PART).tar.gz
  DOCS_BUNDLE_NAME := jdk-$(BASE_NAME)_doc-api-spec$(DEBUG_PART).tar.gz
<span class="udiff-line-added">+ STATIC_LIBS_BUNDLE_NAME := jdk-$(BASE_NAME)_bin-static-libs$(DEBUG_PART).tar.gz</span>
  JCOV_BUNDLE_NAME := jdk-jcov-$(BASE_NAME)_bin$(DEBUG_PART).$(JDK_BUNDLE_EXTENSION)
  
  JDK_BUNDLE := $(BUNDLES_OUTPUTDIR)/$(JDK_BUNDLE_NAME)
<span class="udiff-line-added">+ JRE_BUNDLE :=  $(BUNDLES_OUTPUTDIR)/$(JRE_BUNDLE_NAME)</span>
  JDK_SYMBOLS_BUNDLE :=  $(BUNDLES_OUTPUTDIR)/$(JDK_SYMBOLS_BUNDLE_NAME)
  TEST_DEMOS_BUNDLE := $(BUNDLES_OUTPUTDIR)/$(TEST_DEMOS_BUNDLE_NAME)
  TEST_BUNDLE :=  $(BUNDLES_OUTPUTDIR)/$(TEST_BUNDLE_NAME)
  DOCS_BUNDLE :=  $(BUNDLES_OUTPUTDIR)/$(DOCS_BUNDLE_NAME)
  JCOV_BUNDLE := $(BUNDLES_OUTPUTDIR)/$(JCOV_BUNDLE_NAME)
</pre>
<center><a href="platform.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="toolchain.m4.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>