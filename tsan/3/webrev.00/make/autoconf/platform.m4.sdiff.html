<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/platform.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="libraries.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/platform.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
541   AC_SUBST(OPENJDK_MODULE_TARGET_PLATFORM)
542 ])
543 
544 #%%% Build and target systems %%%
545 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_AND_TARGET],
546 [
547   # Figure out the build and target systems. # Note that in autoconf terminology, &quot;build&quot; is obvious, but &quot;target&quot;
548   # is confusing; it assumes you are cross-compiling a cross-compiler (!)  and &quot;target&quot; is thus the target of the
549   # product you&#39;re building. The target of this build is called &quot;host&quot;. Since this is confusing to most people, we
550   # have not adopted that system, but use &quot;target&quot; as the platform we are building for. In some places though we need
551   # to use the configure naming style.
552   AC_CANONICAL_BUILD
553   AC_CANONICAL_HOST
554   AC_CANONICAL_TARGET
555 
556   PLATFORM_EXTRACT_TARGET_AND_BUILD
557   PLATFORM_SETUP_TARGET_CPU_BITS
558   PLATFORM_SET_MODULE_TARGET_OS_VALUES
559   PLATFORM_SET_RELEASE_FILE_OS_VALUES
560   PLATFORM_SETUP_LEGACY_VARS
















561 ])
562 
563 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
564 [
565   ###############################################################################
566 
567   # Note that this is the build platform OS version!
568 
569   OS_VERSION=&quot;`uname -r | ${SED} &#39;s!\.! !g&#39; | ${SED} &#39;s!-! !g&#39;`&quot;
570   OS_VERSION_MAJOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 1 -d &#39; &#39;`&quot;
571   OS_VERSION_MINOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 2 -d &#39; &#39;`&quot;
572   OS_VERSION_MICRO=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 3 -d &#39; &#39;`&quot;
573   AC_SUBST(OS_VERSION_MAJOR)
574   AC_SUBST(OS_VERSION_MINOR)
575   AC_SUBST(OS_VERSION_MICRO)
576 ])
577 
578 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_TARGET_BITS],
579 [
580   ###############################################################################
</pre>
</td>
<td>
<hr />
<pre>
541   AC_SUBST(OPENJDK_MODULE_TARGET_PLATFORM)
542 ])
543 
544 #%%% Build and target systems %%%
545 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_AND_TARGET],
546 [
547   # Figure out the build and target systems. # Note that in autoconf terminology, &quot;build&quot; is obvious, but &quot;target&quot;
548   # is confusing; it assumes you are cross-compiling a cross-compiler (!)  and &quot;target&quot; is thus the target of the
549   # product you&#39;re building. The target of this build is called &quot;host&quot;. Since this is confusing to most people, we
550   # have not adopted that system, but use &quot;target&quot; as the platform we are building for. In some places though we need
551   # to use the configure naming style.
552   AC_CANONICAL_BUILD
553   AC_CANONICAL_HOST
554   AC_CANONICAL_TARGET
555 
556   PLATFORM_EXTRACT_TARGET_AND_BUILD
557   PLATFORM_SETUP_TARGET_CPU_BITS
558   PLATFORM_SET_MODULE_TARGET_OS_VALUES
559   PLATFORM_SET_RELEASE_FILE_OS_VALUES
560   PLATFORM_SETUP_LEGACY_VARS
<span class="line-added">561   PLATFORM_CHECK_DEPRECATION</span>
<span class="line-added">562 ])</span>
<span class="line-added">563 </span>
<span class="line-added">564 AC_DEFUN([PLATFORM_CHECK_DEPRECATION],</span>
<span class="line-added">565 [</span>
<span class="line-added">566   AC_ARG_ENABLE(deprecated-ports, [AS_HELP_STRING([--enable-deprecated-ports@&lt;:@=yes/no@:&gt;@],</span>
<span class="line-added">567        [Suppress the error when configuring for a deprecated port @&lt;:@no@:&gt;@])])</span>
<span class="line-added">568 </span>
<span class="line-added">569   if test &quot;x$OPENJDK_TARGET_OS&quot; = xsolaris || (test &quot;x$OPENJDK_TARGET_CPU_ARCH&quot; = xsparc &amp;&amp; test &quot;x$with_jvm_variants&quot; != xzero); then</span>
<span class="line-added">570     if test &quot;x$enable_deprecated_ports&quot; = &quot;xyes&quot;; then</span>
<span class="line-added">571       AC_MSG_WARN([The Solaris and SPARC ports are deprecated and may be removed in a future release.])</span>
<span class="line-added">572     else</span>
<span class="line-added">573       AC_MSG_ERROR(m4_normalize([The Solaris and SPARC ports are deprecated and may be removed in a</span>
<span class="line-added">574         future release. Use --enable-deprecated-ports=yes to suppress this error.]))</span>
<span class="line-added">575     fi</span>
<span class="line-added">576   fi</span>
577 ])
578 
579 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_BUILD_OS_VERSION],
580 [
581   ###############################################################################
582 
583   # Note that this is the build platform OS version!
584 
585   OS_VERSION=&quot;`uname -r | ${SED} &#39;s!\.! !g&#39; | ${SED} &#39;s!-! !g&#39;`&quot;
586   OS_VERSION_MAJOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 1 -d &#39; &#39;`&quot;
587   OS_VERSION_MINOR=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 2 -d &#39; &#39;`&quot;
588   OS_VERSION_MICRO=&quot;`${ECHO} ${OS_VERSION} | ${CUT} -f 3 -d &#39; &#39;`&quot;
589   AC_SUBST(OS_VERSION_MAJOR)
590   AC_SUBST(OS_VERSION_MINOR)
591   AC_SUBST(OS_VERSION_MICRO)
592 ])
593 
594 AC_DEFUN_ONCE([PLATFORM_SETUP_OPENJDK_TARGET_BITS],
595 [
596   ###############################################################################
</pre>
</td>
</tr>
</table>
<center><a href="libraries.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>