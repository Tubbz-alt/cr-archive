<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/autoconf/jdk-version.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="jdk-options.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-bundled.m4.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/jdk-version.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2015, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 64,13 ***</span>
<span class="line-new-header">--- 64,56 ---</span>
    AC_SUBST(LAUNCHER_NAME)
    AC_SUBST(PRODUCT_NAME)
    AC_SUBST(PRODUCT_SUFFIX)
    AC_SUBST(JDK_RC_PLATFORM_NAME)
    AC_SUBST(HOTSPOT_VM_DISTRO)
<span class="line-added">+ </span>
<span class="line-added">+   # Set the MACOSX Bundle Name base</span>
<span class="line-added">+   AC_ARG_WITH(macosx-bundle-name-base, [AS_HELP_STRING([--with-macosx-bundle-name-base],</span>
<span class="line-added">+       [Set the MacOSX Bundle Name base. This is the base name for calculating MacOSX Bundle Names.</span>
<span class="line-added">+       @&lt;:@not specified@:&gt;@])])</span>
<span class="line-added">+   if test &quot;x$with_macosx_bundle_name_base&quot; = xyes; then</span>
<span class="line-added">+     AC_MSG_ERROR([--with-macosx-bundle-name-base must have a value])</span>
<span class="line-added">+   elif [ ! [[ $with_macosx_bundle_name_base =~ ^[[:print:]]*$ ]] ]; then</span>
<span class="line-added">+     AC_MSG_ERROR([--with-macosx-bundle-name-base contains non-printing characters: $with_macosx_bundle_name_base])</span>
<span class="line-added">+   elif test &quot;x$with_macosx_bundle_name_base&quot; != x; then</span>
<span class="line-added">+     # Set MACOSX_BUNDLE_NAME_BASE to the configured value.</span>
<span class="line-added">+     MACOSX_BUNDLE_NAME_BASE=&quot;$with_macosx_bundle_name_base&quot;</span>
<span class="line-added">+   fi</span>
    AC_SUBST(MACOSX_BUNDLE_NAME_BASE)
<span class="line-added">+ </span>
<span class="line-added">+   # Set the MACOSX Bundle ID base</span>
<span class="line-added">+   AC_ARG_WITH(macosx-bundle-id-base, [AS_HELP_STRING([--with-macosx-bundle-id-base],</span>
<span class="line-added">+       [Set the MacOSX Bundle ID base. This is the base ID for calculating MacOSX Bundle IDs.</span>
<span class="line-added">+       @&lt;:@not specified@:&gt;@])])</span>
<span class="line-added">+   if test &quot;x$with_macosx_bundle_id_base&quot; = xyes; then</span>
<span class="line-added">+     AC_MSG_ERROR([--with-macosx-bundle-id-base must have a value])</span>
<span class="line-added">+   elif [ ! [[ $with_macosx_bundle_id_base =~ ^[[:print:]]*$ ]] ]; then</span>
<span class="line-added">+     AC_MSG_ERROR([--with-macosx-bundle-id-base contains non-printing characters: $with_macosx_bundle_id_base])</span>
<span class="line-added">+   elif test &quot;x$with_macosx_bundle_id_base&quot; != x; then</span>
<span class="line-added">+     # Set MACOSX_BUNDLE_ID_BASE to the configured value.</span>
<span class="line-added">+     MACOSX_BUNDLE_ID_BASE=&quot;$with_macosx_bundle_id_base&quot;</span>
<span class="line-added">+   fi</span>
    AC_SUBST(MACOSX_BUNDLE_ID_BASE)
  
<span class="line-added">+   # Set the JDK RC name</span>
<span class="line-added">+   AC_ARG_WITH(jdk-rc-name, [AS_HELP_STRING([--with-jdk-rc-name],</span>
<span class="line-added">+       [Set JDK RC name. This is used for FileDescription and ProductName properties</span>
<span class="line-added">+        of MS Windows binaries. @&lt;:@not specified@:&gt;@])])</span>
<span class="line-added">+   if test &quot;x$with_jdk_rc_name&quot; = xyes; then</span>
<span class="line-added">+     AC_MSG_ERROR([--with-jdk-rc-name must have a value])</span>
<span class="line-added">+   elif [ ! [[ $with_jdk_rc_name =~ ^[[:print:]]*$ ]] ]; then</span>
<span class="line-added">+     AC_MSG_ERROR([--with-jdk-rc-name contains non-printing characters: $with_jdk_rc_name])</span>
<span class="line-added">+   elif test &quot;x$with_jdk_rc_name&quot; != x; then</span>
<span class="line-added">+     # Set JDK_RC_NAME to a custom value if &#39;--with-jdk-rc-name&#39; was used and is not empty.</span>
<span class="line-added">+     JDK_RC_NAME=&quot;$with_jdk_rc_name&quot;</span>
<span class="line-added">+   else</span>
<span class="line-added">+     # Otherwise calculate from &quot;version-numbers&quot; included above.</span>
<span class="line-added">+     JDK_RC_NAME=&quot;$PRODUCT_NAME $JDK_RC_PLATFORM_NAME&quot;</span>
<span class="line-added">+   fi</span>
<span class="line-added">+   AC_SUBST(JDK_RC_NAME)</span>
<span class="line-added">+ </span>
    # The vendor name, if any
    AC_ARG_WITH(vendor-name, [AS_HELP_STRING([--with-vendor-name],
        [Set vendor name. Among others, used to set the &#39;java.vendor&#39;
         and &#39;java.vm.vendor&#39; system properties. @&lt;:@not specified@:&gt;@])])
    if test &quot;x$with_vendor_name&quot; = xyes; then
</pre>
<hr />
<pre>
<span class="line-old-header">*** 117,11 ***</span>
        [Sets the bug URL which will be displayed when the VM crashes @&lt;:@not specified@:&gt;@])])
    if test &quot;x$with_vendor_vm_bug_url&quot; = xyes; then
      AC_MSG_ERROR([--with-vendor-vm-bug-url must have a value])
    elif [ ! [[ $with_vendor_vm_bug_url =~ ^[[:print:]]*$ ]] ]; then
      AC_MSG_ERROR([--with-vendor-vm-bug-url contains non-printing characters: $with_vendor_vm_bug_url])
<span class="line-modified">!   else</span>
      VENDOR_URL_VM_BUG=&quot;$with_vendor_vm_bug_url&quot;
    fi
    AC_SUBST(VENDOR_URL_VM_BUG)
  
    # Override version from arguments
<span class="line-new-header">--- 160,13 ---</span>
        [Sets the bug URL which will be displayed when the VM crashes @&lt;:@not specified@:&gt;@])])
    if test &quot;x$with_vendor_vm_bug_url&quot; = xyes; then
      AC_MSG_ERROR([--with-vendor-vm-bug-url must have a value])
    elif [ ! [[ $with_vendor_vm_bug_url =~ ^[[:print:]]*$ ]] ]; then
      AC_MSG_ERROR([--with-vendor-vm-bug-url contains non-printing characters: $with_vendor_vm_bug_url])
<span class="line-modified">!   elif test &quot;x$with_vendor_vm_bug_url&quot; != x; then</span>
<span class="line-added">+     # Only set VENDOR_URL_VM_BUG if &#39;--with-vendor-vm-bug-url&#39; was used and is not empty.</span>
<span class="line-added">+     # Otherwise we will use the value from &quot;version-numbers&quot; included above.</span>
      VENDOR_URL_VM_BUG=&quot;$with_vendor_vm_bug_url&quot;
    fi
    AC_SUBST(VENDOR_URL_VM_BUG)
  
    # Override version from arguments
</pre>
<hr />
<pre>
<span class="line-old-header">*** 458,10 ***</span>
<span class="line-new-header">--- 503,11 ---</span>
    fi
  
    # We could define --with flags for these, if really needed
    VERSION_CLASSFILE_MAJOR=&quot;$DEFAULT_VERSION_CLASSFILE_MAJOR&quot;
    VERSION_CLASSFILE_MINOR=&quot;$DEFAULT_VERSION_CLASSFILE_MINOR&quot;
<span class="line-added">+   JDK_SOURCE_TARGET_VERSION=&quot;$DEFAULT_JDK_SOURCE_TARGET_VERSION&quot;</span>
  
    AC_MSG_CHECKING([for version string])
    AC_MSG_RESULT([$VERSION_STRING])
  
    AC_SUBST(VERSION_FEATURE)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 481,7 ***</span>
    AC_SUBST(VERSION_IS_GA)
    AC_SUBST(VERSION_DATE)
    AC_SUBST(VENDOR_VERSION_STRING)
    AC_SUBST(VERSION_CLASSFILE_MAJOR)
    AC_SUBST(VERSION_CLASSFILE_MINOR)
<span class="line-modified">! </span>
  ])
<span class="line-new-header">--- 527,7 ---</span>
    AC_SUBST(VERSION_IS_GA)
    AC_SUBST(VERSION_DATE)
    AC_SUBST(VENDOR_VERSION_STRING)
    AC_SUBST(VERSION_CLASSFILE_MAJOR)
    AC_SUBST(VERSION_CLASSFILE_MINOR)
<span class="line-modified">!   AC_SUBST(JDK_SOURCE_TARGET_VERSION)</span>
  ])
</pre>
<center><a href="jdk-options.m4.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="lib-bundled.m4.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>