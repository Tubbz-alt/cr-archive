<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/autoconf/lib-x11.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="lib-bundled.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="libraries.m4.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/lib-x11.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
102     HEADERS_TO_CHECK=&quot;X11/extensions/shape.h X11/extensions/Xrender.h X11/extensions/XTest.h X11/Intrinsic.h&quot;
103     # There is no Xrandr extension on AIX
104     if test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then
105       X_CFLAGS=&quot;$X_CFLAGS -DNO_XRANDR&quot;
106     else
107       HEADERS_TO_CHECK=&quot;$HEADERS_TO_CHECK X11/extensions/Xrandr.h&quot;
108     fi
109 
110     # Need to include Xlib.h and Xutil.h to avoid &quot;present but cannot be compiled&quot; warnings on Solaris 10
111     AC_CHECK_HEADERS([$HEADERS_TO_CHECK],
112         [X11_HEADERS_OK=yes],
113         [X11_HEADERS_OK=no; break],
114         [
115           # include &lt;X11/Xlib.h&gt;
116           # include &lt;X11/Xutil.h&gt;
117         ]
118     )
119 
120     if test &quot;x$X11_HEADERS_OK&quot; = xno; then
121       HELP_MSG_MISSING_DEPENDENCY([x11])
<span class="line-modified">122       AC_MSG_ERROR([Could not find all X11 headers (shape.h Xrender.h Xrander.h XTest.h Intrinsic.h). $HELP_MSG])</span>
123     fi
124 
125     # If XLinearGradient isn&#39;t available in Xrender.h, signal that it needs to be
126     # defined in libawt_xawt.
127     AC_MSG_CHECKING([if XlinearGradient is defined in Xrender.h])
128     AC_COMPILE_IFELSE(
129         [AC_LANG_PROGRAM([[#include &lt;X11/extensions/Xrender.h&gt;]],
130             [[XLinearGradient x;]])],
131         [AC_MSG_RESULT([yes])],
132         [AC_MSG_RESULT([no])
133          X_CFLAGS=&quot;$X_CFLAGS -DSOLARIS10_NO_XRENDER_STRUCTS&quot;])
134 
135     CFLAGS=&quot;$OLD_CFLAGS&quot;
136     AC_LANG_POP(C)
137   fi # NEEDS_LIB_X11
138 
139   AC_SUBST(X_CFLAGS)
140   AC_SUBST(X_LIBS)
141 ])
</pre>
</td>
<td>
<hr />
<pre>
102     HEADERS_TO_CHECK=&quot;X11/extensions/shape.h X11/extensions/Xrender.h X11/extensions/XTest.h X11/Intrinsic.h&quot;
103     # There is no Xrandr extension on AIX
104     if test &quot;x$OPENJDK_TARGET_OS&quot; = xaix; then
105       X_CFLAGS=&quot;$X_CFLAGS -DNO_XRANDR&quot;
106     else
107       HEADERS_TO_CHECK=&quot;$HEADERS_TO_CHECK X11/extensions/Xrandr.h&quot;
108     fi
109 
110     # Need to include Xlib.h and Xutil.h to avoid &quot;present but cannot be compiled&quot; warnings on Solaris 10
111     AC_CHECK_HEADERS([$HEADERS_TO_CHECK],
112         [X11_HEADERS_OK=yes],
113         [X11_HEADERS_OK=no; break],
114         [
115           # include &lt;X11/Xlib.h&gt;
116           # include &lt;X11/Xutil.h&gt;
117         ]
118     )
119 
120     if test &quot;x$X11_HEADERS_OK&quot; = xno; then
121       HELP_MSG_MISSING_DEPENDENCY([x11])
<span class="line-modified">122       AC_MSG_ERROR([Could not find all X11 headers (shape.h Xrender.h Xrandr.h XTest.h Intrinsic.h). $HELP_MSG])</span>
123     fi
124 
125     # If XLinearGradient isn&#39;t available in Xrender.h, signal that it needs to be
126     # defined in libawt_xawt.
127     AC_MSG_CHECKING([if XlinearGradient is defined in Xrender.h])
128     AC_COMPILE_IFELSE(
129         [AC_LANG_PROGRAM([[#include &lt;X11/extensions/Xrender.h&gt;]],
130             [[XLinearGradient x;]])],
131         [AC_MSG_RESULT([yes])],
132         [AC_MSG_RESULT([no])
133          X_CFLAGS=&quot;$X_CFLAGS -DSOLARIS10_NO_XRENDER_STRUCTS&quot;])
134 
135     CFLAGS=&quot;$OLD_CFLAGS&quot;
136     AC_LANG_POP(C)
137   fi # NEEDS_LIB_X11
138 
139   AC_SUBST(X_CFLAGS)
140   AC_SUBST(X_LIBS)
141 ])
</pre>
</td>
</tr>
</table>
<center><a href="lib-bundled.m4.sdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="libraries.m4.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>