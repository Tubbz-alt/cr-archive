<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames make/autoconf/help.m4</title>
    <link rel="stylesheet" href="../../style.css" />
    <script type="text/javascript" src="../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 #
  2 # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.
  3 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4 #
  5 # This code is free software; you can redistribute it and/or modify it
  6 # under the terms of the GNU General Public License version 2 only, as
  7 # published by the Free Software Foundation.  Oracle designates this
  8 # particular file as subject to the &quot;Classpath&quot; exception as provided
  9 # by Oracle in the LICENSE file that accompanied this code.
 10 #
 11 # This code is distributed in the hope that it will be useful, but WITHOUT
 12 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14 # version 2 for more details (a copy is included in the LICENSE file that
 15 # accompanied this code).
 16 #
 17 # You should have received a copy of the GNU General Public License version
 18 # 2 along with this work; if not, write to the Free Software Foundation,
 19 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20 #
 21 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22 # or visit www.oracle.com if you need additional information or have any
 23 # questions.
 24 #
 25 
 26 AC_DEFUN_ONCE([HELP_SETUP_DEPENDENCY_HELP],
 27 [
 28   AC_CHECK_PROGS(PKGHANDLER, zypper apt-get yum brew port pkgutil pkgadd)
 29 ])
 30 
 31 AC_DEFUN([HELP_MSG_MISSING_DEPENDENCY],
 32 [
 33   # Print a helpful message on how to acquire the necessary build dependency.
 34   # $1 is the help tag: cups, alsa etc
 35   MISSING_DEPENDENCY=$1
 36 
<a name="1" id="anc1"></a><span class="line-modified"> 37   if test &quot;x$OPENJDK_BUILD_OS_ENV&quot; = &quot;xwindows.cygwin&quot;; then</span>


 38     cygwin_help $MISSING_DEPENDENCY
 39   elif test &quot;x$OPENJDK_BUILD_OS_ENV&quot; = &quot;xwindows.msys&quot;; then
 40     msys_help $MISSING_DEPENDENCY
 41   else
 42     PKGHANDLER_COMMAND=
 43 
 44     case $PKGHANDLER in
 45       apt-get)
 46         apt_help     $MISSING_DEPENDENCY ;;
 47       yum)
 48         yum_help     $MISSING_DEPENDENCY ;;
 49       brew)
 50         brew_help    $MISSING_DEPENDENCY ;;
 51       port)
 52         port_help    $MISSING_DEPENDENCY ;;
 53       pkgutil)
 54         pkgutil_help $MISSING_DEPENDENCY ;;
 55       pkgadd)
 56         pkgadd_help  $MISSING_DEPENDENCY ;;
 57       zypper)
 58         zypper_help  $MISSING_DEPENDENCY ;;
 59     esac
 60 
 61     if test &quot;x$PKGHANDLER_COMMAND&quot; != x; then
 62       HELP_MSG=&quot;You might be able to fix this by running &#39;$PKGHANDLER_COMMAND&#39;.&quot;
 63     fi
 64   fi
 65 ])
 66 
 67 cygwin_help() {
 68   case $1 in
 69     unzip)
 70       PKGHANDLER_COMMAND=&quot;( cd &lt;location of cygwin setup.exe&gt; &amp;&amp; cmd /c setup -q -P unzip )&quot;
 71       HELP_MSG=&quot;You might be able to fix this by running &#39;$PKGHANDLER_COMMAND&#39;.&quot;
 72       ;;
 73     zip)
 74       PKGHANDLER_COMMAND=&quot;( cd &lt;location of cygwin setup.exe&gt; &amp;&amp; cmd /c setup -q -P zip )&quot;
 75       HELP_MSG=&quot;You might be able to fix this by running &#39;$PKGHANDLER_COMMAND&#39;.&quot;
 76       ;;
 77     make)
 78       PKGHANDLER_COMMAND=&quot;( cd &lt;location of cygwin setup.exe&gt; &amp;&amp; cmd /c setup -q -P make )&quot;
 79       HELP_MSG=&quot;You might be able to fix this by running &#39;$PKGHANDLER_COMMAND&#39;.&quot;
 80       ;;
 81   esac
 82 }
 83 
 84 msys_help() {
 85   PKGHANDLER_COMMAND=&quot;&quot;
 86 }
 87 
 88 apt_help() {
 89   case $1 in
 90     reduced)
 91       PKGHANDLER_COMMAND=&quot;sudo apt-get install gcc-multilib g++-multilib&quot; ;;
 92     devkit)
 93       PKGHANDLER_COMMAND=&quot;sudo apt-get install build-essential&quot; ;;
<a name="2" id="anc2"></a><span class="line-removed"> 94     openjdk)</span>
<span class="line-removed"> 95       PKGHANDLER_COMMAND=&quot;sudo apt-get install openjdk-8-jdk&quot; ;;</span>
 96     alsa)
 97       PKGHANDLER_COMMAND=&quot;sudo apt-get install libasound2-dev&quot; ;;
 98     cups)
 99       PKGHANDLER_COMMAND=&quot;sudo apt-get install libcups2-dev&quot; ;;
100     fontconfig)
101       PKGHANDLER_COMMAND=&quot;sudo apt-get install libfontconfig1-dev&quot; ;;
102     freetype)
103       PKGHANDLER_COMMAND=&quot;sudo apt-get install libfreetype6-dev&quot; ;;
104     ffi)
105       PKGHANDLER_COMMAND=&quot;sudo apt-get install libffi-dev&quot; ;;
106     x11)
107       PKGHANDLER_COMMAND=&quot;sudo apt-get install libx11-dev libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev&quot; ;;
108     ccache)
109       PKGHANDLER_COMMAND=&quot;sudo apt-get install ccache&quot; ;;
110     dtrace)
111       PKGHANDLER_COMMAND=&quot;sudo apt-get install systemtap-sdt-dev&quot; ;;
112   esac
113 }
114 
115 zypper_help() {
116   case $1 in
117     devkit)
118       PKGHANDLER_COMMAND=&quot;sudo zypper install gcc gcc-c++&quot; ;;
119     alsa)
120       PKGHANDLER_COMMAND=&quot;sudo zypper install alsa-devel&quot; ;;
121     cups)
122       PKGHANDLER_COMMAND=&quot;sudo zypper install cups-devel&quot; ;;
123     fontconfig)
124       PKGHANDLER_COMMAND=&quot;sudo zypper install fontconfig-devel&quot; ;;
125     freetype)
126       PKGHANDLER_COMMAND=&quot;sudo zypper install freetype-devel&quot; ;;
127     x11)
128       PKGHANDLER_COMMAND=&quot;sudo zypper install libX11-devel libXext-devel libXrender-devel libXrandr-devel libXtst-devel libXt-devel libXi-devel&quot; ;;
129     ccache)
130       PKGHANDLER_COMMAND=&quot;sudo zypper install ccache&quot; ;;
131   esac
132 }
133 
134 yum_help() {
135   case $1 in
136     devkit)
137       PKGHANDLER_COMMAND=&quot;sudo yum groupinstall \&quot;Development Tools\&quot;&quot; ;;
<a name="3" id="anc3"></a><span class="line-removed">138     openjdk)</span>
<span class="line-removed">139       PKGHANDLER_COMMAND=&quot;sudo yum install java-1.8.0-openjdk-devel&quot; ;;</span>
140     alsa)
141       PKGHANDLER_COMMAND=&quot;sudo yum install alsa-lib-devel&quot; ;;
142     cups)
143       PKGHANDLER_COMMAND=&quot;sudo yum install cups-devel&quot; ;;
144     fontconfig)
145       PKGHANDLER_COMMAND=&quot;sudo yum install fontconfig-devel&quot; ;;
146     freetype)
147       PKGHANDLER_COMMAND=&quot;sudo yum install freetype-devel&quot; ;;
148     x11)
149       PKGHANDLER_COMMAND=&quot;sudo yum install libXtst-devel libXt-devel libXrender-devel libXrandr-devel libXi-devel&quot; ;;
150     ccache)
151       PKGHANDLER_COMMAND=&quot;sudo yum install ccache&quot; ;;
152   esac
153 }
154 
155 brew_help() {
156   case $1 in
<a name="4" id="anc4"></a><span class="line-removed">157     openjdk)</span>
<span class="line-removed">158       PKGHANDLER_COMMAND=&quot;brew cask install java&quot; ;;</span>
159     freetype)
160       PKGHANDLER_COMMAND=&quot;brew install freetype&quot; ;;
161     ccache)
162       PKGHANDLER_COMMAND=&quot;brew install ccache&quot; ;;
163   esac
164 }
165 
166 port_help() {
167   PKGHANDLER_COMMAND=&quot;&quot;
168 }
169 
170 pkgutil_help() {
171   PKGHANDLER_COMMAND=&quot;&quot;
172 }
173 
174 pkgadd_help() {
175   PKGHANDLER_COMMAND=&quot;&quot;
176 }
177 
178 # This function will check if we&#39;re called from the &quot;configure&quot; wrapper while
179 # printing --help. If so, we will print out additional information that can
180 # only be extracted within the autoconf script, and then exit. This must be
181 # called at the very beginning in configure.ac.
182 AC_DEFUN_ONCE([HELP_PRINT_ADDITIONAL_HELP_AND_EXIT],
183 [
184   if test &quot;x$CONFIGURE_PRINT_ADDITIONAL_HELP&quot; != x; then
185 
186     # Print available toolchains
187     $PRINTF &quot;The following toolchains are available as arguments to --with-toolchain-type.\n&quot;
188     $PRINTF &quot;Which are valid to use depends on the build platform.\n&quot;
189     for toolchain in $VALID_TOOLCHAINS_all; do
190       # Use indirect variable referencing
191       toolchain_var_name=TOOLCHAIN_DESCRIPTION_$toolchain
192       TOOLCHAIN_DESCRIPTION=${!toolchain_var_name}
193       $PRINTF &quot;  %-10s  %s\n&quot; $toolchain &quot;$TOOLCHAIN_DESCRIPTION&quot;
194     done
195     $PRINTF &quot;\n&quot;
196 
197     # Print available jvm features
198     $PRINTF &quot;The following JVM features are available as arguments to --with-jvm-features.\n&quot;
199     $PRINTF &quot;Which are valid to use depends on the target platform.\n  &quot;
200     $PRINTF &quot;%s &quot; $VALID_JVM_FEATURES
201     $PRINTF &quot;\n&quot;
202 
203     # And now exit directly
204     exit 0
205   fi
206 ])
207 
208 AC_DEFUN_ONCE([HELP_PRINT_SUMMARY_AND_WARNINGS],
209 [
210   # Finally output some useful information to the user
211 
212   printf &quot;\n&quot;
213   printf &quot;====================================================\n&quot;
214   if test &quot;x$no_create&quot; != &quot;xyes&quot;; then
215     if test &quot;x$IS_RECONFIGURE&quot; != &quot;xyes&quot;; then
216       printf &quot;A new configuration has been successfully created in\n%s\n&quot; &quot;$OUTPUTDIR&quot;
217     else
218       printf &quot;The existing configuration has been successfully updated in\n%s\n&quot; &quot;$OUTPUTDIR&quot;
219     fi
220   else
221     if test &quot;x$IS_RECONFIGURE&quot; != &quot;xyes&quot;; then
222       printf &quot;A configuration has been successfully checked but not created\n&quot;
223     else
224       printf &quot;The existing configuration has been successfully checked in\n%s\n&quot; &quot;$OUTPUTDIR&quot;
225     fi
226   fi
227   if test &quot;x$CONFIGURE_COMMAND_LINE&quot; != x; then
228     printf &quot;using configure arguments &#39;$CONFIGURE_COMMAND_LINE&#39;.\n&quot;
229   else
230     printf &quot;using default settings.\n&quot;
231   fi
232 
233   printf &quot;\n&quot;
234   printf &quot;Configuration summary:\n&quot;
235   printf &quot;* Debug level:    $DEBUG_LEVEL\n&quot;
236   printf &quot;* HS debug level: $HOTSPOT_DEBUG_LEVEL\n&quot;
237   printf &quot;* JVM variants:   $JVM_VARIANTS\n&quot;
238   printf &quot;* JVM features:   &quot;
239 
240   for variant in $JVM_VARIANTS; do
241     features_var_name=JVM_FEATURES_$variant
242     JVM_FEATURES_FOR_VARIANT=${!features_var_name}
243     printf &quot;$variant: \&#39;$JVM_FEATURES_FOR_VARIANT\&#39; &quot;
244   done
245   printf &quot;\n&quot;
246 
247   printf &quot;* OpenJDK target: OS: $OPENJDK_TARGET_OS, CPU architecture: $OPENJDK_TARGET_CPU_ARCH, address length: $OPENJDK_TARGET_CPU_BITS\n&quot;
248   printf &quot;* Version string: $VERSION_STRING ($VERSION_SHORT)\n&quot;
249 
250   printf &quot;\n&quot;
251   printf &quot;Tools summary:\n&quot;
252   if test &quot;x$OPENJDK_BUILD_OS&quot; = &quot;xwindows&quot;; then
253     printf &quot;* Environment:    $WINDOWS_ENV_VENDOR version $WINDOWS_ENV_VERSION (root at $WINDOWS_ENV_ROOT_PATH)\n&quot;
254   fi
255   printf &quot;* Boot JDK:       $BOOT_JDK_VERSION (at $BOOT_JDK)\n&quot;
256   printf &quot;* Toolchain:      $TOOLCHAIN_TYPE ($TOOLCHAIN_DESCRIPTION)\n&quot;
257   printf &quot;* C Compiler:     Version $CC_VERSION_NUMBER (at $CC)\n&quot;
258   printf &quot;* C++ Compiler:   Version $CXX_VERSION_NUMBER (at $CXX)\n&quot;
259 
260   printf &quot;\n&quot;
261   printf &quot;Build performance summary:\n&quot;
262   printf &quot;* Cores to use:   $JOBS\n&quot;
263   printf &quot;* Memory limit:   $MEMORY_SIZE MB\n&quot;
264   if test &quot;x$CCACHE_STATUS&quot; != &quot;x&quot;; then
265     printf &quot;* ccache status:  $CCACHE_STATUS\n&quot;
266   fi
267   printf &quot;\n&quot;
268 
269   if test &quot;x$BUILDING_MULTIPLE_JVM_VARIANTS&quot; = &quot;xtrue&quot;; then
270     printf &quot;NOTE: You have requested to build more than one version of the JVM, which\n&quot;
271     printf &quot;will result in longer build times.\n&quot;
272     printf &quot;\n&quot;
273   fi
274 
275   if test &quot;x$FOUND_ALT_VARIABLES&quot; != &quot;x&quot;; then
276     printf &quot;WARNING: You have old-style ALT_ environment variables set.\n&quot;
277     printf &quot;These are not respected, and will be ignored. It is recommended\n&quot;
278     printf &quot;that you clean your environment. The following variables are set:\n&quot;
279     printf &quot;$FOUND_ALT_VARIABLES\n&quot;
280     printf &quot;\n&quot;
281   fi
282 
283   if test &quot;x$OUTPUT_DIR_IS_LOCAL&quot; != &quot;xyes&quot;; then
284     printf &quot;WARNING: Your build output directory is not on a local disk.\n&quot;
285     printf &quot;This will severely degrade build performance!\n&quot;
286     printf &quot;It is recommended that you create an output directory on a local disk,\n&quot;
287     printf &quot;and run the configure script again from that directory.\n&quot;
288     printf &quot;\n&quot;
289   fi
290 
291   if test &quot;x$IS_RECONFIGURE&quot; = &quot;xyes&quot; &amp;&amp; test &quot;x$no_create&quot; != &quot;xyes&quot;; then
292     printf &quot;WARNING: The result of this configuration has overridden an older\n&quot;
293     printf &quot;configuration. You *should* run &#39;make clean&#39; to make sure you get a\n&quot;
294     printf &quot;proper build. Failure to do so might result in strange build problems.\n&quot;
295     printf &quot;\n&quot;
296   fi
297 
298   if test &quot;x$IS_RECONFIGURE&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$no_create&quot; = &quot;xyes&quot;; then
299     printf &quot;WARNING: The result of this configuration was not saved.\n&quot;
300     printf &quot;You should run without &#39;--no-create | -n&#39; to create the configuration.\n&quot;
301     printf &quot;\n&quot;
302   fi
303 
304   if test &quot;x$UNSUPPORTED_TOOLCHAIN_VERSION&quot; = &quot;xyes&quot;; then
305     printf &quot;WARNING: The toolchain version used is known to have issues. Please\n&quot;
306     printf &quot;consider using a supported version unless you know what you are doing.\n&quot;
307     printf &quot;\n&quot;
308   fi
309 ])
310 
311 AC_DEFUN_ONCE([HELP_REPEAT_WARNINGS],
312 [
313   # Locate config.log.
314   if test -e &quot;$CONFIGURESUPPORT_OUTPUTDIR/config.log&quot;; then
315     CONFIG_LOG_PATH=&quot;$CONFIGURESUPPORT_OUTPUTDIR&quot;
316   elif test -e &quot;./config.log&quot;; then
317     CONFIG_LOG_PATH=&quot;.&quot;
318   fi
319 
320   if test -e &quot;$CONFIG_LOG_PATH/config.log&quot;; then
321     $GREP &#39;^configure:.*: WARNING:&#39; &quot;$CONFIG_LOG_PATH/config.log&quot; &gt; /dev/null 2&gt;&amp;1
322     if test $? -eq 0; then
323       printf &quot;The following warnings were produced. Repeated here for convenience:\n&quot;
324       # We must quote sed expression (using []) to stop m4 from eating the [].
325       $GREP &#39;^configure:.*: WARNING:&#39; &quot;$CONFIG_LOG_PATH/config.log&quot; | $SED -e [ &#39;s/^configure:[0-9]*: //&#39; ]
326       printf &quot;\n&quot;
327     fi
328   fi
329 ])
<a name="5" id="anc5"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="5" type="hidden" />
</body>
</html>