<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/devkit/Tools.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="Makefile.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="createWindowsDevkit2017.sh.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/devkit/Tools.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2013, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2013, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 49,13 ***</span>
    ARCH=armhfp
  endif
  
  $(info ARCH=$(ARCH))
  
<span class="line-modified">! ifeq ($(BASE_OS), OEL6)</span>
<span class="line-modified">!   BASE_URL := http://yum.oracle.com/repo/OracleLinux/OL6/4/base/$(ARCH)/</span>
<span class="line-modified">!   LINUX_VERSION := OEL6.4</span>
  else ifeq ($(BASE_OS), Fedora)
    DEFAULT_OS_VERSION := 27
    ifeq ($(BASE_OS_VERSION), )
      BASE_OS_VERSION := $(DEFAULT_OS_VERSION)
    endif
<span class="line-new-header">--- 49,21 ---</span>
    ARCH=armhfp
  endif
  
  $(info ARCH=$(ARCH))
  
<span class="line-modified">! KERNEL_HEADERS_RPM := kernel-headers</span>
<span class="line-modified">! </span>
<span class="line-modified">! ifeq ($(BASE_OS), OL)</span>
<span class="line-added">+   ifeq ($(ARCH), aarch64)</span>
<span class="line-added">+     BASE_URL := http://yum.oracle.com/repo/OracleLinux/OL7/6/base/$(ARCH)/</span>
<span class="line-added">+     LINUX_VERSION := OL7.6</span>
<span class="line-added">+     KERNEL_HEADERS_RPM := kernel-uek-headers</span>
<span class="line-added">+   else</span>
<span class="line-added">+     BASE_URL := http://yum.oracle.com/repo/OracleLinux/OL6/4/base/$(ARCH)/</span>
<span class="line-added">+     LINUX_VERSION := OL6.4</span>
<span class="line-added">+   endif</span>
  else ifeq ($(BASE_OS), Fedora)
    DEFAULT_OS_VERSION := 27
    ifeq ($(BASE_OS_VERSION), )
      BASE_OS_VERSION := $(DEFAULT_OS_VERSION)
    endif
</pre>
<hr />
<pre>
<span class="line-old-header">*** 77,42 ***</span>
  
  ##########################################################################################
  # Define external dependencies
  
  # Latest that could be made to work.
<span class="line-modified">! GCC_VER := 7.3.0</span>
<span class="line-modified">! ifeq ($(GCC_VER), 7.3.0)</span>
    gcc_ver := gcc-7.3.0
    binutils_ver := binutils-2.30
<span class="line-modified">!   ccache_ver := ccache-3.3.6</span>
    mpfr_ver := mpfr-3.1.5
    gmp_ver := gmp-6.1.2
    mpc_ver := mpc-1.0.3
    gdb_ver := gdb-8.1
  else ifeq ($(GCC_VER), 4.9.2)
    gcc_ver := gcc-4.9.2
    binutils_ver := binutils-2.25
<span class="line-modified">!   ccache_ver := ccache-3.2.1</span>
    mpfr_ver := mpfr-3.0.1
    gmp_ver := gmp-4.3.2
    mpc_ver := mpc-1.0.1
    gdb_ver := gdb-7.12.1
  else
    $(error Unsupported GCC version)
  endif
  
  GCC := http://ftp.gnu.org/pub/gnu/gcc/$(gcc_ver)/$(gcc_ver).tar.xz
  BINUTILS := http://ftp.gnu.org/pub/gnu/binutils/$(binutils_ver).tar.xz
<span class="line-modified">! CCACHE := https://samba.org/ftp/ccache/$(ccache_ver).tar.xz</span>
  MPFR := https://www.mpfr.org/${mpfr_ver}/${mpfr_ver}.tar.bz2
  GMP := http://ftp.gnu.org/pub/gnu/gmp/${gmp_ver}.tar.bz2
  MPC := http://ftp.gnu.org/pub/gnu/mpc/${mpc_ver}.tar.gz
  GDB := http://ftp.gnu.org/gnu/gdb/${gdb_ver}.tar.xz
  
  # RPMs used by all BASE_OS
  RPM_LIST := \
<span class="line-modified">!     kernel-headers \</span>
      glibc glibc-headers glibc-devel \
      cups-libs cups-devel \
      libX11 libX11-devel \
      xorg-x11-proto-devel \
      alsa-lib alsa-lib-devel \
<span class="line-new-header">--- 85,50 ---</span>
  
  ##########################################################################################
  # Define external dependencies
  
  # Latest that could be made to work.
<span class="line-modified">! GCC_VER := 8.3.0</span>
<span class="line-modified">! ifeq ($(GCC_VER), 8.3.0)</span>
<span class="line-added">+   gcc_ver := gcc-8.3.0</span>
<span class="line-added">+   binutils_ver := binutils-2.32</span>
<span class="line-added">+   ccache_ver := 3.7.3</span>
<span class="line-added">+   mpfr_ver := mpfr-3.1.5</span>
<span class="line-added">+   gmp_ver := gmp-6.1.2</span>
<span class="line-added">+   mpc_ver := mpc-1.0.3</span>
<span class="line-added">+   gdb_ver := gdb-8.3</span>
<span class="line-added">+ else ifeq ($(GCC_VER), 7.3.0)</span>
    gcc_ver := gcc-7.3.0
    binutils_ver := binutils-2.30
<span class="line-modified">!   ccache_ver := 3.3.6</span>
    mpfr_ver := mpfr-3.1.5
    gmp_ver := gmp-6.1.2
    mpc_ver := mpc-1.0.3
    gdb_ver := gdb-8.1
  else ifeq ($(GCC_VER), 4.9.2)
    gcc_ver := gcc-4.9.2
    binutils_ver := binutils-2.25
<span class="line-modified">!   ccache_ver := 3.2.1</span>
    mpfr_ver := mpfr-3.0.1
    gmp_ver := gmp-4.3.2
    mpc_ver := mpc-1.0.1
    gdb_ver := gdb-7.12.1
  else
    $(error Unsupported GCC version)
  endif
  
  GCC := http://ftp.gnu.org/pub/gnu/gcc/$(gcc_ver)/$(gcc_ver).tar.xz
  BINUTILS := http://ftp.gnu.org/pub/gnu/binutils/$(binutils_ver).tar.xz
<span class="line-modified">! CCACHE := https://github.com/ccache/ccache/releases/download/v$(ccache_ver)/ccache-$(ccache_ver).tar.xz</span>
  MPFR := https://www.mpfr.org/${mpfr_ver}/${mpfr_ver}.tar.bz2
  GMP := http://ftp.gnu.org/pub/gnu/gmp/${gmp_ver}.tar.bz2
  MPC := http://ftp.gnu.org/pub/gnu/mpc/${mpc_ver}.tar.gz
  GDB := http://ftp.gnu.org/gnu/gdb/${gdb_ver}.tar.xz
  
  # RPMs used by all BASE_OS
  RPM_LIST := \
<span class="line-modified">!     $(KERNEL_HEADERS_RPM) \</span>
      glibc glibc-headers glibc-devel \
      cups-libs cups-devel \
      libX11 libX11-devel \
      xorg-x11-proto-devel \
      alsa-lib alsa-lib-devel \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 172,18 ***</span>
  ##########################################################################################
  # Unpack source packages
  
  # Generate downloading + unpacking of sources.
  define Download
<span class="line-modified">!   $(1)_DIR = $(abspath $(SRCDIR)/$(basename $(basename $(notdir $($(1))))))</span>
    $(1)_CFG = $$($(1)_DIR)/configure
    $(1)_FILE = $(DOWNLOAD)/$(notdir $($(1)))
  
    $$($(1)_CFG) : $$($(1)_FILE)
  	mkdir -p $$(SRCDIR)
  	tar -C $$(SRCDIR) -xf $$&lt;
<span class="line-modified">! 	$$(foreach p,$$(abspath $$(wildcard $$(notdir $$($(1)_DIR)).patch)), \</span>
  	  echo PATCHING $$(p) ; \
  	  patch -d $$($(1)_DIR) -p1 -i $$(p) ; \
  	)
  	touch $$@
  
<span class="line-new-header">--- 188,20 ---</span>
  ##########################################################################################
  # Unpack source packages
  
  # Generate downloading + unpacking of sources.
  define Download
<span class="line-modified">!   # Allow override</span>
<span class="line-added">+   $(1)_DIRNAME ?= $(basename $(basename $(notdir $($(1)))))</span>
<span class="line-added">+   $(1)_DIR = $(abspath $(SRCDIR)/$$($(1)_DIRNAME))</span>
    $(1)_CFG = $$($(1)_DIR)/configure
    $(1)_FILE = $(DOWNLOAD)/$(notdir $($(1)))
  
    $$($(1)_CFG) : $$($(1)_FILE)
  	mkdir -p $$(SRCDIR)
  	tar -C $$(SRCDIR) -xf $$&lt;
<span class="line-modified">! 	$$(foreach p,$$(abspath $$(wildcard patches/$$(notdir $$($(1)_DIR)).patch)), \</span>
  	  echo PATCHING $$(p) ; \
  	  patch -d $$($(1)_DIR) -p1 -i $$(p) ; \
  	)
  	touch $$@
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 368,11 ***</span>
  	      $(CONFIG) \
  	      --with-sysroot=$(SYSROOT) \
  	      --disable-nls \
  	      --program-prefix=$(TARGET)- \
  	      --enable-multilib \
<span class="line-modified">! 	      --enable-gold \</span>
  	      --enable-threads \
  	      --enable-plugins \
  	) &gt; $(@D)/log.config 2&gt;&amp;1
  	@echo &#39;done&#39;
  
<span class="line-new-header">--- 386,11 ---</span>
  	      $(CONFIG) \
  	      --with-sysroot=$(SYSROOT) \
  	      --disable-nls \
  	      --program-prefix=$(TARGET)- \
  	      --enable-multilib \
<span class="line-modified">! 	      --enable-gold=default \</span>
  	      --enable-threads \
  	      --enable-plugins \
  	) &gt; $(@D)/log.config 2&gt;&amp;1
  	@echo &#39;done&#39;
  
</pre>
<center><a href="Makefile.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="createWindowsDevkit2017.sh.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>