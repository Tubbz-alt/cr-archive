<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/conf/jib-profiles.js</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="../common/ZipArchive.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../copy/Copy-java.base.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/conf/jib-profiles.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -245,11 +245,11 @@</span>
      ];
  
      // These are the base setttings for all the main build profiles.
      common.main_profile_base = {
          dependencies: [&quot;boot_jdk&quot;, &quot;gnumake&quot;, &quot;jtreg&quot;, &quot;jib&quot;, &quot;autoconf&quot;, &quot;jmh&quot;, &quot;jcov&quot;],
<span class="udiff-line-modified-removed">-         default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;],</span>
<span class="udiff-line-modified-added">+         default_make_targets: [&quot;product-bundles&quot;, &quot;test-bundles&quot;, &quot;static-libs-bundles&quot;],</span>
          configure_args: concat([&quot;--enable-jtreg-failure-handler&quot;],
              &quot;--with-exclude-translations=de,es,fr,it,ko,pt_BR,sv,ca,tr,cs,sk,ja_JP_A,ja_JP_HA,ja_JP_HI,ja_JP_I,zh_TW,zh_HK&quot;,
              &quot;--disable-manpages&quot;,
              &quot;--with-jvm-features=-shenandoahgc&quot;,
              versionArgs(input, common))
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -318,10 +318,18 @@</span>
                          &quot;bundles/&quot; + pf + &quot;/\\1&quot;
                      ],
                      subdir: jdk_subdir,
                      exploded: &quot;images/jdk&quot;
                  },
<span class="udiff-line-added">+                 static_libs: {</span>
<span class="udiff-line-added">+                     local: &quot;bundles/\\(jdk.*bin-static-libs.tar.gz\\)&quot;,</span>
<span class="udiff-line-added">+                     remote: [</span>
<span class="udiff-line-added">+                         &quot;bundles/&quot; + pf + &quot;/jdk-&quot; + data.version + &quot;_&quot; + pf + &quot;_bin-static-libs.tar.gz&quot;,</span>
<span class="udiff-line-added">+                         &quot;bundles/&quot; + pf + &quot;/\\1&quot;</span>
<span class="udiff-line-added">+                     ],</span>
<span class="udiff-line-added">+                     subdir: jdk_subdir,</span>
<span class="udiff-line-added">+                 },</span>
              }
          };
      };
  
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -359,15 +367,24 @@</span>
                          &quot;bundles/&quot; + pf + &quot;/\\1&quot;
                      ],
                      subdir: jdk_subdir,
                      exploded: &quot;images/jdk&quot;
                  },
<span class="udiff-line-added">+                 static_libs: {</span>
<span class="udiff-line-added">+                     local: &quot;bundles/\\(jdk.*bin-static-libs-debug.tar.gz\\)&quot;,</span>
<span class="udiff-line-added">+                     remote: [</span>
<span class="udiff-line-added">+                         &quot;bundles/&quot; + pf + &quot;/jdk-&quot; + data.version + &quot;_&quot; + pf + &quot;_bin-static-libs-debug.tar.gz&quot;,</span>
<span class="udiff-line-added">+                         &quot;bundles/&quot; + pf + &quot;/\\1&quot;</span>
<span class="udiff-line-added">+                     ],</span>
<span class="udiff-line-added">+                     subdir: jdk_subdir,</span>
<span class="udiff-line-added">+                 },</span>
              }
          };
      };
  
<span class="udiff-line-modified-removed">-     common.boot_jdk_version = &quot;11&quot;;</span>
<span class="udiff-line-modified-added">+     common.boot_jdk_version = &quot;13&quot;;</span>
<span class="udiff-line-added">+     common.boot_jdk_build_number = &quot;33&quot;;</span>
      common.boot_jdk_home = input.get(&quot;boot_jdk&quot;, &quot;install_path&quot;) + &quot;/jdk-&quot;
          + common.boot_jdk_version
          + (input.build_os == &quot;macosx&quot; ? &quot;.jdk/Contents/Home&quot; : &quot;&quot;);
  
      return common;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -415,19 +432,19 @@</span>
          &quot;solaris-x64&quot;: {
              target_os: &quot;solaris&quot;,
              target_cpu: &quot;x64&quot;,
              dependencies: [&quot;devkit&quot;, &quot;cups&quot;],
              configure_args: concat(common.configure_args_64bit,
<span class="udiff-line-modified-removed">-                 &quot;--with-zlib=system&quot;, &quot;--enable-dtrace&quot;),</span>
<span class="udiff-line-modified-added">+                 &quot;--with-zlib=system&quot;, &quot;--enable-dtrace&quot;, &quot;--enable-deprecated-ports=yes&quot;),</span>
          },
  
          &quot;solaris-sparcv9&quot;: {
              target_os: &quot;solaris&quot;,
              target_cpu: &quot;sparcv9&quot;,
              dependencies: [&quot;devkit&quot;, &quot;cups&quot;],
              configure_args: concat(common.configure_args_64bit,
<span class="udiff-line-modified-removed">-                 &quot;--with-zlib=system&quot;, &quot;--enable-dtrace&quot;),</span>
<span class="udiff-line-modified-added">+                 &quot;--with-zlib=system&quot;, &quot;--enable-dtrace&quot;, &quot;--enable-deprecated-ports=yes&quot;),</span>
          },
  
          &quot;windows-x64&quot;: {
              target_os: &quot;windows&quot;,
              target_cpu: &quot;x64&quot;,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -752,11 +769,15 @@</span>
          [ &quot;&quot;, common.open_suffix ].forEach(function (suffix) {
              var cmpBaselineName = name + suffix + &quot;-cmp-baseline&quot;;
              profiles[cmpBaselineName] = clone(profiles[name + suffix]);
              // Only compare the images target. This should pressumably be expanded
              // to include more build targets when possible.
<span class="udiff-line-modified-removed">-             profiles[cmpBaselineName].default_make_targets = [ &quot;images&quot; ];</span>
<span class="udiff-line-modified-added">+             profiles[cmpBaselineName].default_make_targets = [ &quot;images&quot;, &quot;test-image&quot; ];</span>
<span class="udiff-line-added">+             if (name == &quot;linux-x64&quot;) {</span>
<span class="udiff-line-added">+                 profiles[cmpBaselineName].default_make_targets</span>
<span class="udiff-line-added">+                     = concat(profiles[cmpBaselineName].default_make_targets, &quot;docs&quot;);</span>
<span class="udiff-line-added">+             }</span>
              profiles[cmpBaselineName].make_args = [ &quot;COMPARE_BUILD=CONF=&quot; ];
              // Do not inherit artifact definitions from base profile
              delete profiles[cmpBaselineName].artifacts;
          });
      });
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -832,53 +853,62 @@</span>
      // Profiles used to run tests using Jib for internal dependencies.
      var testedProfile = input.testedProfile;
      if (testedProfile == null) {
          testedProfile = input.build_os + &quot;-&quot; + input.build_cpu;
      }
<span class="udiff-line-modified-removed">-     var testedProfileJDK = testedProfile + &quot;.jdk&quot;;</span>
<span class="udiff-line-modified-removed">-     var testedProfileTest = &quot;&quot;</span>
<span class="udiff-line-modified-removed">-     if (testedProfile.endsWith(&quot;-jcov&quot;)) {</span>
<span class="udiff-line-modified-removed">-         testedProfileTest = testedProfile.substring(0, testedProfile.length - &quot;-jcov&quot;.length) + &quot;.test&quot;;</span>
<span class="udiff-line-modified-added">+     var testedProfileJdk = testedProfile + &quot;.jdk&quot;;</span>
<span class="udiff-line-modified-added">+     // Make it possible to use the test image from a different profile</span>
<span class="udiff-line-modified-added">+     var testImageProfile;</span>
<span class="udiff-line-modified-added">+     if (input.testImageProfile != null) {</span>
<span class="udiff-line-added">+         testImageProfile = input.testImageProfile;</span>
<span class="udiff-line-added">+     } else if (testedProfile.endsWith(&quot;-jcov&quot;)) {</span>
<span class="udiff-line-added">+         testImageProfile = testedProfile.substring(0, testedProfile.length - &quot;-jcov&quot;.length);</span>
      } else {
<span class="udiff-line-modified-removed">-         testedProfileTest = testedProfile + &quot;.test&quot;;</span>
<span class="udiff-line-modified-added">+         testImageProfile = testedProfile;</span>
      }
<span class="udiff-line-modified-removed">-     var testOnlyMake = [ &quot;run-test-prebuilt&quot;, &quot;LOG_CMDLINES=true&quot;, &quot;JTREG_VERBOSE=fail,error,time&quot; ];</span>
<span class="udiff-line-modified-added">+     var testedProfileTest = testImageProfile + &quot;.test&quot;</span>
<span class="udiff-line-added">+     var testOnlyMake = [ &quot;test-prebuilt&quot;, &quot;LOG_CMDLINES=true&quot;, &quot;JTREG_VERBOSE=fail,error,time&quot; ];</span>
      if (testedProfile.endsWith(&quot;-gcov&quot;)) {
          testOnlyMake = concat(testOnlyMake, &quot;GCOV_ENABLED=true&quot;)
      }
      var testOnlyProfilesPrebuilt = {
          &quot;run-test-prebuilt&quot;: {
              target_os: input.build_os,
              target_cpu: input.build_cpu,
              dependencies: [
<span class="udiff-line-modified-removed">-                 &quot;jtreg&quot;, &quot;gnumake&quot;, &quot;boot_jdk&quot;, &quot;devkit&quot;, &quot;jib&quot;, &quot;jcov&quot;, testedProfileJDK,</span>
<span class="udiff-line-modified-added">+                 &quot;jtreg&quot;, &quot;gnumake&quot;, &quot;boot_jdk&quot;, &quot;devkit&quot;, &quot;jib&quot;, &quot;jcov&quot;, testedProfileJdk,</span>
                  testedProfileTest
              ],
              src: &quot;src.conf&quot;,
              make_args: testOnlyMake,
              environment: {
                  &quot;BOOT_JDK&quot;: common.boot_jdk_home,
<span class="udiff-line-modified-removed">-                 &quot;JDK_IMAGE_DIR&quot;: input.get(testedProfileJDK, &quot;home_path&quot;),</span>
<span class="udiff-line-modified-added">+                 &quot;JDK_IMAGE_DIR&quot;: input.get(testedProfileJdk, &quot;home_path&quot;),</span>
                  &quot;TEST_IMAGE_DIR&quot;: input.get(testedProfileTest, &quot;home_path&quot;)
              },
              labels: &quot;test&quot;
          }
      };
  
      // If actually running the run-test-prebuilt profile, verify that the input
      // variable is valid and if so, add the appropriate target_* values from
<span class="udiff-line-modified-removed">-     // the tested profile.</span>
<span class="udiff-line-modified-added">+     // the tested profile. Use testImageProfile value as backup.</span>
      if (input.profile == &quot;run-test-prebuilt&quot;) {
<span class="udiff-line-modified-removed">-         if (profiles[testedProfile] == null) {</span>
<span class="udiff-line-modified-removed">-             error(&quot;testedProfile is not defined: &quot; + testedProfile);</span>
<span class="udiff-line-modified-added">+         if (profiles[testedProfile] == null &amp;&amp; profiles[testImageProfile] == null) {</span>
<span class="udiff-line-modified-added">+             error(&quot;testedProfile is not defined: &quot; + testedProfile + &quot; &quot; + testImageProfile);</span>
          }
      }
      if (profiles[testedProfile] != null) {
          testOnlyProfilesPrebuilt[&quot;run-test-prebuilt&quot;][&quot;target_os&quot;]
              = profiles[testedProfile][&quot;target_os&quot;];
          testOnlyProfilesPrebuilt[&quot;run-test-prebuilt&quot;][&quot;target_cpu&quot;]
              = profiles[testedProfile][&quot;target_cpu&quot;];
<span class="udiff-line-added">+     } else if (profiles[testImageProfile] != null) {</span>
<span class="udiff-line-added">+         testOnlyProfilesPrebuilt[&quot;run-test-prebuilt&quot;][&quot;target_os&quot;]</span>
<span class="udiff-line-added">+             = profiles[testImageProfile][&quot;target_os&quot;];</span>
<span class="udiff-line-added">+         testOnlyProfilesPrebuilt[&quot;run-test-prebuilt&quot;][&quot;target_cpu&quot;]</span>
<span class="udiff-line-added">+             = profiles[testImageProfile][&quot;target_cpu&quot;];</span>
      }
      profiles = concatObjects(profiles, testOnlyProfilesPrebuilt);
  
      // On macosx add the devkit bin dir to the path in all the run-test profiles.
      // This gives us a guaranteed working version of lldb for the jtreg failure handler.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -937,25 +967,31 @@</span>
   * @returns {{}} Dependencies part of configuration
   */
  var getJibProfilesDependencies = function (input, common) {
  
      var devkit_platform_revisions = {
<span class="udiff-line-modified-removed">-         linux_x64: &quot;gcc7.3.0-OEL6.4+1.2&quot;,</span>
<span class="udiff-line-modified-added">+         linux_x64: &quot;gcc8.3.0-OL6.4+1.0&quot;,</span>
          macosx_x64: &quot;Xcode10.1-MacOSX10.14+1.0&quot;,
          solaris_x64: &quot;SS12u4-Solaris11u1+1.0&quot;,
          solaris_sparcv9: &quot;SS12u6-Solaris11u3+1.0&quot;,
<span class="udiff-line-modified-removed">-         windows_x64: &quot;VS2017-15.9.6+1.0&quot;,</span>
<span class="udiff-line-modified-removed">-         linux_aarch64: &quot;gcc7.3.0-Fedora27+1.2&quot;,</span>
<span class="udiff-line-modified-removed">-         linux_arm: &quot;gcc7.3.0-Fedora27+1.2&quot;,</span>
<span class="udiff-line-modified-removed">-         linux_ppc64le: &quot;gcc7.3.0-Fedora27+1.0&quot;,</span>
<span class="udiff-line-modified-removed">-         linux_s390x: &quot;gcc7.3.0-Fedora27+1.0&quot;</span>
<span class="udiff-line-modified-added">+         windows_x64: &quot;VS2017-15.9.16+1.0&quot;,</span>
<span class="udiff-line-modified-added">+         linux_aarch64: &quot;gcc8.3.0-OL7.6+1.0&quot;,</span>
<span class="udiff-line-modified-added">+         linux_arm: &quot;gcc8.2.0-Fedora27+1.0&quot;,</span>
<span class="udiff-line-modified-added">+         linux_ppc64le: &quot;gcc8.2.0-Fedora27+1.0&quot;,</span>
<span class="udiff-line-modified-added">+         linux_s390x: &quot;gcc8.2.0-Fedora27+1.0&quot;</span>
      };
  
      var devkit_platform = (input.target_cpu == &quot;x86&quot;
          ? input.target_os + &quot;_x64&quot;
          : input.target_platform);
  
<span class="udiff-line-added">+     var devkit_cross_prefix = &quot;&quot;;</span>
<span class="udiff-line-added">+     if (input.build_platform != input.target_platform</span>
<span class="udiff-line-added">+        &amp;&amp; input.build_platform != devkit_platform) {</span>
<span class="udiff-line-added">+         devkit_cross_prefix = input.build_platform + &quot;-to-&quot;;</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      var boot_jdk_platform = (input.build_os == &quot;macosx&quot; ? &quot;osx&quot; : input.build_os)
          + &quot;-&quot; + input.build_cpu;
      var boot_jdk_ext = (input.build_os == &quot;windows&quot; ? &quot;.zip&quot; : &quot;.tar.gz&quot;)
      // If running in WSL and building for Windows, it will look like Linux,
      // but we need a Windows boot JDK.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -966,27 +1002,39 @@</span>
  
      var makeBinDir = (input.build_os == &quot;windows&quot;
          ? input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/cygwin/bin&quot;
          : input.get(&quot;gnumake&quot;, &quot;install_path&quot;) + &quot;/bin&quot;);
  
<span class="udiff-line-modified-removed">-     var dependencies = {</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-         boot_jdk: {</span>
<span class="udiff-line-modified-added">+     if (input.build_cpu == &#39;aarch64&#39;) {</span>
<span class="udiff-line-modified-added">+ 	boot_jdk = {</span>
<span class="udiff-line-modified-added">+             organization: common.organization,</span>
<span class="udiff-line-added">+             ext: &quot;tar.gz&quot;,</span>
<span class="udiff-line-added">+             module: &quot;jdk-linux_aarch64&quot;,</span>
<span class="udiff-line-added">+             revision: &quot;13+1.0&quot;,</span>
<span class="udiff-line-added">+             configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,</span>
<span class="udiff-line-added">+             environment_path: common.boot_jdk_home + &quot;/bin&quot;</span>
<span class="udiff-line-added">+ 	}</span>
<span class="udiff-line-added">+     } else {</span>
<span class="udiff-line-added">+ 	boot_jdk = {</span>
              server: &quot;jpg&quot;,
              product: &quot;jdk&quot;,
              version: common.boot_jdk_version,
<span class="udiff-line-modified-removed">-             build_number: &quot;28&quot;,</span>
<span class="udiff-line-modified-added">+             build_number: common.boot_jdk_build_number,</span>
              file: &quot;bundles/&quot; + boot_jdk_platform + &quot;/jdk-&quot; + common.boot_jdk_version + &quot;_&quot;
                  + boot_jdk_platform + &quot;_bin&quot; + boot_jdk_ext,
              configure_args: &quot;--with-boot-jdk=&quot; + common.boot_jdk_home,
              environment_path: common.boot_jdk_home + &quot;/bin&quot;
<span class="udiff-line-modified-removed">-         },</span>
<span class="udiff-line-modified-added">+ 	}</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     var dependencies = {</span>
<span class="udiff-line-added">+         boot_jdk: boot_jdk,</span>
  
          devkit: {
              organization: common.organization,
              ext: &quot;tar.gz&quot;,
<span class="udiff-line-modified-removed">-             module: &quot;devkit-&quot; + devkit_platform,</span>
<span class="udiff-line-modified-added">+             module: &quot;devkit-&quot; + devkit_cross_prefix + devkit_platform,</span>
              revision: devkit_platform_revisions[devkit_platform],
              environment: {
                  &quot;DEVKIT_HOME&quot;: input.get(&quot;devkit&quot;, &quot;home_path&quot;),
              }
          },
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1005,11 +1053,11 @@</span>
          },
  
          jtreg: {
              server: &quot;javare&quot;,
              revision: &quot;4.2&quot;,
<span class="udiff-line-modified-removed">-             build_number: &quot;b14&quot;,</span>
<span class="udiff-line-modified-added">+             build_number: &quot;b16&quot;,</span>
              checksum_file: &quot;MD5_VALUES&quot;,
              file: &quot;jtreg_bin-4.2.zip&quot;,
              environment_name: &quot;JT_HOME&quot;,
              environment_path: input.get(&quot;jtreg&quot;, &quot;install_path&quot;) + &quot;/jtreg/bin&quot;
          },
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1028,11 +1076,11 @@</span>
              // product: &quot;jcov&quot;,
              // version: &quot;3.0&quot;,
              // build_number: &quot;b07&quot;,
              // file: &quot;bundles/jcov-3_0.zip&quot;,
              organization: common.organization,
<span class="udiff-line-modified-removed">-             revision: &quot;3.0-57-support+1.0&quot;,</span>
<span class="udiff-line-modified-added">+             revision: &quot;3.0-59-support+1.0&quot;,</span>
              ext: &quot;zip&quot;,
              environment_name: &quot;JCOV_HOME&quot;,
          },
  
          gnumake: {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1270,11 +1318,14 @@</span>
  var getVersion = function (feature, interim, update, patch) {
      var version_numbers = getVersionNumbers();
      var version = (feature != null ? feature : version_numbers.get(&quot;DEFAULT_VERSION_FEATURE&quot;))
          + &quot;.&quot; + (interim != null ? interim : version_numbers.get(&quot;DEFAULT_VERSION_INTERIM&quot;))
          + &quot;.&quot; + (update != null ? update :  version_numbers.get(&quot;DEFAULT_VERSION_UPDATE&quot;))
<span class="udiff-line-modified-removed">-         + &quot;.&quot; + (patch != null ? patch : version_numbers.get(&quot;DEFAULT_VERSION_PATCH&quot;));</span>
<span class="udiff-line-modified-added">+         + &quot;.&quot; + (patch != null ? patch : version_numbers.get(&quot;DEFAULT_VERSION_PATCH&quot;))</span>
<span class="udiff-line-added">+         + &quot;.&quot; + version_numbers.get(&quot;DEFAULT_VERSION_EXTRA1&quot;)</span>
<span class="udiff-line-added">+         + &quot;.&quot; + version_numbers.get(&quot;DEFAULT_VERSION_EXTRA2&quot;)</span>
<span class="udiff-line-added">+         + &quot;.&quot; + version_numbers.get(&quot;DEFAULT_VERSION_EXTRA3&quot;);</span>
      while (version.match(&quot;.*\\.0$&quot;)) {
          version = version.substring(0, version.length - 2);
      }
      return version;
  };
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1285,14 +1336,20 @@</span>
   */
  var versionArgs = function(input, common) {
      var args = [&quot;--with-version-build=&quot; + common.build_number];
      if (input.build_type == &quot;promoted&quot;) {
          args = concat(args,
<span class="udiff-line-modified-removed">-                       // This needs to be changed when we start building release candidates</span>
<span class="udiff-line-removed">-                       // with-version-pre must be set to ea for &#39;ea&#39; and empty for fcs build</span>
<span class="udiff-line-removed">-                       &quot;--with-version-pre=ea&quot;,</span>
<span class="udiff-line-modified-added">+                       &quot;--with-version-pre=&quot; + version_numbers.get(&quot;DEFAULT_PROMOTED_VERSION_PRE&quot;),</span>
                        &quot;--without-version-opt&quot;);
<span class="udiff-line-added">+     } else if (input.build_type == &quot;ci&quot;) {</span>
<span class="udiff-line-added">+         var optString = input.build_id_data.ciBuildNumber;</span>
<span class="udiff-line-added">+         var preString = input.build_id_data.projectName;</span>
<span class="udiff-line-added">+         if (preString == &quot;jdk&quot;) {</span>
<span class="udiff-line-added">+             preString = version_numbers.get(&quot;DEFAULT_PROMOTED_VERSION_PRE&quot;);</span>
<span class="udiff-line-added">+         }</span>
<span class="udiff-line-added">+         args = concat(args, &quot;--with-version-pre=&quot; + preString,</span>
<span class="udiff-line-added">+                      &quot;--with-version-opt=&quot; + optString);</span>
      } else {
          args = concat(args, &quot;--with-version-opt=&quot; + common.build_id);
      }
      return args;
  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1324,5 +1381,10 @@</span>
  var isWsl = function (input) {
      return ( input.build_osenv == &quot;wsl&quot;
               || (input.build_os == &quot;linux&quot;
                   &amp;&amp; java.lang.System.getProperty(&quot;os.version&quot;).contains(&quot;Microsoft&quot;)));
  }
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ var error = function (s) {</span>
<span class="udiff-line-added">+     java.lang.System.err.println(&quot;[ERROR] &quot; + s);</span>
<span class="udiff-line-added">+     exit(1);</span>
<span class="udiff-line-added">+ };</span>
</pre>
<center><a href="../common/ZipArchive.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="../copy/Copy-java.base.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>