<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff make/lib/Lib-java.base.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="CoreLibraries.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="Lib-java.desktop.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>make/lib/Lib-java.base.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2011, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 27,11 ***</span>
  
  # Hook to include the corresponding custom file, if present.
  $(eval $(call IncludeCustomExtension, lib/Lib-java.base.gmk))
  
  # Prepare the find cache.
<span class="line-modified">! $(eval $(call FillCacheFind, $(wildcard $(TOPDIR)/src/java.base/*/native)))</span>
  
  ################################################################################
  # Create all the core libraries
  
  include CoreLibraries.gmk
<span class="line-new-header">--- 27,11 ---</span>
  
  # Hook to include the corresponding custom file, if present.
  $(eval $(call IncludeCustomExtension, lib/Lib-java.base.gmk))
  
  # Prepare the find cache.
<span class="line-modified">! $(call FillFindCache, $(wildcard $(TOPDIR)/src/java.base/*/native))</span>
  
  ################################################################################
  # Create all the core libraries
  
  include CoreLibraries.gmk
</pre>
<hr />
<pre>
<span class="line-old-header">*** 54,11 ***</span>
      LIBS_unix := -ljvm -ljava, \
      LIBS_linux := $(LIBDL) -lpthread, \
      LIBS_solaris := -lnsl -lsocket $(LIBDL), \
      LIBS_aix := $(LIBDL),\
      LIBS_windows := ws2_32.lib jvm.lib secur32.lib iphlpapi.lib winhttp.lib \
<span class="line-modified">!         urlmon.lib delayimp.lib $(WIN_JAVA_LIB) advapi32.lib, \</span>
      LIBS_macosx := -framework CoreFoundation -framework CoreServices, \
  ))
  
  $(BUILD_LIBNET): $(BUILD_LIBJAVA)
  
<span class="line-new-header">--- 54,11 ---</span>
      LIBS_unix := -ljvm -ljava, \
      LIBS_linux := $(LIBDL) -lpthread, \
      LIBS_solaris := -lnsl -lsocket $(LIBDL), \
      LIBS_aix := $(LIBDL),\
      LIBS_windows := ws2_32.lib jvm.lib secur32.lib iphlpapi.lib winhttp.lib \
<span class="line-modified">!         delayimp.lib $(WIN_JAVA_LIB) advapi32.lib, \</span>
      LIBS_macosx := -framework CoreFoundation -framework CoreServices, \
  ))
  
  $(BUILD_LIBNET): $(BUILD_LIBJAVA)
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,30 ***</span>
  
      TARGETS += $(BUILD_LIBJSIG)
  
      ############################################################################
      # Create symlinks to libjsig in each JVM variant sub dir
<span class="line-modified">!     LIB_OUTPUTDIR := $(call FindLibDirForModule, java.base)</span>
<span class="line-modified">! </span>
<span class="line-modified">!     # $1 variant subdir</span>
<span class="line-modified">!     define CreateSymlinks</span>
<span class="line-modified">!       # Always symlink from libdir/variant/libjsig.so -&gt; ../libjsig.so.</span>
<span class="line-modified">!       $(LIB_OUTPUTDIR)/$1/$(call SHARED_LIBRARY,jsig): \</span>
<span class="line-modified">!           $(LIB_OUTPUTDIR)/$(call SHARED_LIBRARY,jsig)</span>
  		$$(call MakeDir, $$(@D))
  		$(RM) $$@
  		$(LN) -s ../$$(@F) $$@
  
<span class="line-modified">!       TARGETS += $(LIB_OUTPUTDIR)/$1/$(call SHARED_LIBRARY,jsig)</span>
<span class="line-modified">!     endef</span>
<span class="line-removed">- </span>
<span class="line-removed">-     # The subdir is the same as the variant for client and minimal, for all</span>
<span class="line-removed">-     # others it&#39;s server.</span>
<span class="line-removed">-     VARIANT_SUBDIRS := $(filter client minimal, $(JVM_VARIANTS)) \</span>
<span class="line-removed">-         $(if $(filter-out client minimal, $(JVM_VARIANTS)), server)</span>
<span class="line-removed">-     $(foreach v, $(VARIANT_SUBDIRS), $(eval $(call CreateSymlinks,$v)))</span>
  
      ############################################################################
  
    endif
  endif
  
<span class="line-new-header">--- 146,31 ---</span>
  
      TARGETS += $(BUILD_LIBJSIG)
  
      ############################################################################
      # Create symlinks to libjsig in each JVM variant sub dir
<span class="line-modified">!     ifneq ($(STATIC_LIBS), true)</span>
<span class="line-modified">!       LIB_OUTPUTDIR := $(call FindLibDirForModule, java.base)</span>
<span class="line-modified">! </span>
<span class="line-modified">!       # $1 variant subdir</span>
<span class="line-modified">!       define CreateSymlinks</span>
<span class="line-modified">!         # Always symlink from libdir/variant/libjsig.so -&gt; ../libjsig.so.</span>
<span class="line-modified">!         $(LIB_OUTPUTDIR)/$1/$(call SHARED_LIBRARY,jsig): \</span>
<span class="line-added">+             $(LIB_OUTPUTDIR)/$(call SHARED_LIBRARY,jsig)</span>
  		$$(call MakeDir, $$(@D))
  		$(RM) $$@
  		$(LN) -s ../$$(@F) $$@
  
<span class="line-modified">!         TARGETS += $(LIB_OUTPUTDIR)/$1/$(call SHARED_LIBRARY,jsig)</span>
<span class="line-modified">!       endef</span>
  
<span class="line-added">+       # The subdir is the same as the variant for client and minimal, for all</span>
<span class="line-added">+       # others it&#39;s server.</span>
<span class="line-added">+       VARIANT_SUBDIRS := $(filter client minimal, $(JVM_VARIANTS)) \</span>
<span class="line-added">+           $(if $(filter-out client minimal, $(JVM_VARIANTS)), server)</span>
<span class="line-added">+       $(foreach v, $(VARIANT_SUBDIRS), $(eval $(call CreateSymlinks,$v)))</span>
<span class="line-added">+     endif</span>
      ############################################################################
  
    endif
  endif
  
</pre>
<center><a href="CoreLibraries.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="Lib-java.desktop.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>