<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/test/JtregGraalUnit.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="BuildMicrobenchmark.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="JtregNativeHotspot.gmk.udiff.html" target="_top">next &gt;</a></center>    <h2>make/test/JtregGraalUnit.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  #
<span class="udiff-line-modified-removed">- # Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+ # Copyright (c) 2018, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -63,10 +63,11 @@</span>
        TEST_JAVAC_FLAGS := \
            -Xlint:none \
            -processorpath $(BUILDTOOLS_OUTPUTDIR)/jdk.vm.compiler.replacements.verifier.jar \
            --add-exports jdk.unsupported/sun.misc=ALL-UNNAMED \
            --add-exports java.base/jdk.internal.misc=ALL-UNNAMED \
<span class="udiff-line-added">+           --add-exports java.base/jdk.internal.module=ALL-UNNAMED \</span>
  
        ### Copy 3rd party libs
        $(eval $(call SetupCopyFiles, COPY_GRAALUNIT_LIBS, \
            FILES := $(wildcard $(GRAALUNIT_LIB)/*.jar), \
            DEST := $(LIB_OUTPUTDIR), \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -89,10 +90,11 @@</span>
                $(SRC_DIR)/org.graalvm.compiler.core.amd64.test/src \
                $(SRC_DIR)/org.graalvm.compiler.core.jdk9.test/src \
                $(SRC_DIR)/org.graalvm.compiler.core.test/src \
                $(SRC_DIR)/org.graalvm.compiler.debug.test/src \
                $(SRC_DIR)/org.graalvm.compiler.graph.test/src \
<span class="udiff-line-added">+               $(SRC_DIR)/org.graalvm.compiler.hotspot.aarch64.test/src \</span>
                $(SRC_DIR)/org.graalvm.compiler.hotspot.amd64.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.jdk9.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.lir.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.sparc.test/src \
                $(SRC_DIR)/org.graalvm.compiler.hotspot.test/src \
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -111,10 +113,11 @@</span>
                , \
            EXCLUDE_FILES := org/graalvm/compiler/core/test/VerifyDebugUsageTest.java, \
            BIN := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \
            CLASSPATH := $(TEST_COMPILE_CP), \
            ADD_JAVAC_FLAGS := $(TEST_JAVAC_FLAGS), \
<span class="udiff-line-added">+           COPY := .input, \</span>
        ))
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS)
  
        ### Compile graalunit tests which require -XDstringConcat=inline
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -138,10 +141,11 @@</span>
  
        ### Generate jdk.vm.compiler.tests.jar
        $(eval $(call SetupJarArchive, BUILD_VM_COMPILER_TESTS_JAR, \
            DEPENDENCIES := $(BUILD_VM_COMPILER_TESTS) $(BUILD_VM_COMPILER_TESTS_SET2), \
            SRCS := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests, \
<span class="udiff-line-added">+           SUFFIXES:=.class .input, \</span>
            JAR := $(COMPILE_OUTPUTDIR)/jdk.vm.compiler.tests.jar, \
        ))
  
        TARGETS_BUILD += $(BUILD_VM_COMPILER_TESTS_JAR)
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -170,12 +174,10 @@</span>
          DEST := $(LIB_OUTPUTDIR), \
          FILES := jdk.vm.compiler.tests.jar com.oracle.mxtool.junit.jar, \
      ))
  
      TARGETS_IMAGE += $(COPY_HOTSPOT_JTREG_GRAAL)
<span class="udiff-line-removed">-   else</span>
<span class="udiff-line-removed">-     $(info Skip building of Graal unit tests because 3rd party libraries directory is not specified)</span>
    endif
  endif
  
  build-test-hotspot-jtreg-graal: $(TARGETS_BUILD)
  test-image-hotspot-jtreg-graal: $(TARGETS_IMAGE)
</pre>
<center><a href="BuildMicrobenchmark.gmk.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="JtregNativeHotspot.gmk.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>