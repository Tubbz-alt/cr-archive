<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/nashorn/src/jdk/nashorn/internal/runtime/doubleconv/test/FixedDtoaTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BignumDtoaTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="IeeeDoubleTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/nashorn/src/jdk/nashorn/internal/runtime/doubleconv/test/FixedDtoaTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
607 
608         assertTrue(DoubleConversion.fixedDtoa(9.1193616301674545152000000e+19, 0, buffer));
609         assertEquals(&quot;91193616301674545152&quot;, buffer.getRawDigits());
610         assertEquals(20, buffer.getDecimalPoint());
611         buffer.reset();
612 
613         assertTrue(DoubleConversion.fixedDtoa(4.8184662102767651659096515e-04, 19, buffer));
614         assertEquals(&quot;4818466210276765&quot;, buffer.getRawDigits());
615         assertEquals(-3, buffer.getDecimalPoint());
616         buffer.reset();
617 
618         assertTrue(DoubleConversion.fixedDtoa(1.9023164229540652612705182e-23, 8, buffer));
619         assertEquals(&quot;&quot;, buffer.getRawDigits());
620         assertEquals(-8, buffer.getDecimalPoint());
621         buffer.reset();
622 
623         assertTrue(DoubleConversion.fixedDtoa(1000000000000000128.0, 0, buffer));
624         assertEquals(&quot;1000000000000000128&quot;, buffer.getRawDigits());
625         assertEquals(19, buffer.getDecimalPoint());
626         buffer.reset();





627     }
628 
629 
630 
631     @Test
632     public void testFastFixed() {
633         final AtomicInteger total = new AtomicInteger();
634         final AtomicInteger succeeded = new AtomicInteger();
635 
636         new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;resources/gay-fixed.txt&quot;)))
637                 .lines()
638                 .forEach(line -&gt; {
639                     if (line.isEmpty() || line.startsWith(&quot;//&quot;)) {
640                         return; // comment or empty line
641                     }
642                     final String[] tokens = line.split(&quot;,\\s+&quot;);
643                     assertEquals(tokens.length, 4);
644                     final double v = Double.parseDouble(tokens[0]);
645                     final int digits = Integer.parseInt(tokens[1]);
646                     final String str = tokens[2].replace(&#39;&quot;&#39;, &#39; &#39;).trim();;
</pre>
</td>
<td>
<hr />
<pre>
607 
608         assertTrue(DoubleConversion.fixedDtoa(9.1193616301674545152000000e+19, 0, buffer));
609         assertEquals(&quot;91193616301674545152&quot;, buffer.getRawDigits());
610         assertEquals(20, buffer.getDecimalPoint());
611         buffer.reset();
612 
613         assertTrue(DoubleConversion.fixedDtoa(4.8184662102767651659096515e-04, 19, buffer));
614         assertEquals(&quot;4818466210276765&quot;, buffer.getRawDigits());
615         assertEquals(-3, buffer.getDecimalPoint());
616         buffer.reset();
617 
618         assertTrue(DoubleConversion.fixedDtoa(1.9023164229540652612705182e-23, 8, buffer));
619         assertEquals(&quot;&quot;, buffer.getRawDigits());
620         assertEquals(-8, buffer.getDecimalPoint());
621         buffer.reset();
622 
623         assertTrue(DoubleConversion.fixedDtoa(1000000000000000128.0, 0, buffer));
624         assertEquals(&quot;1000000000000000128&quot;, buffer.getRawDigits());
625         assertEquals(19, buffer.getDecimalPoint());
626         buffer.reset();
<span class="line-added">627 </span>
<span class="line-added">628         assertTrue(DoubleConversion.fixedDtoa(2.10861548515811875e+15, 17, buffer));</span>
<span class="line-added">629         assertEquals(&quot;210861548515811875&quot;, buffer.getRawDigits());</span>
<span class="line-added">630         assertEquals(16, buffer.getDecimalPoint());</span>
<span class="line-added">631         buffer.reset();</span>
632     }
633 
634 
635 
636     @Test
637     public void testFastFixed() {
638         final AtomicInteger total = new AtomicInteger();
639         final AtomicInteger succeeded = new AtomicInteger();
640 
641         new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(&quot;resources/gay-fixed.txt&quot;)))
642                 .lines()
643                 .forEach(line -&gt; {
644                     if (line.isEmpty() || line.startsWith(&quot;//&quot;)) {
645                         return; // comment or empty line
646                     }
647                     final String[] tokens = line.split(&quot;,\\s+&quot;);
648                     assertEquals(tokens.length, 4);
649                     final double v = Double.parseDouble(tokens[0]);
650                     final int digits = Integer.parseInt(tokens[1]);
651                     final String str = tokens[2].replace(&#39;&quot;&#39;, &#39; &#39;).trim();;
</pre>
</td>
</tr>
</table>
<center><a href="BignumDtoaTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="IeeeDoubleTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>