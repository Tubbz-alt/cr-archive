diff a/test/jdk/javax/swing/JInternalFrame/5066752/bug5066752.java b/test/jdk/javax/swing/JInternalFrame/5066752/bug5066752.java
--- a/test/jdk/javax/swing/JInternalFrame/5066752/bug5066752.java
+++ b/test/jdk/javax/swing/JInternalFrame/5066752/bug5066752.java
@@ -37,24 +37,28 @@
 public class bug5066752
 {
     private static JFrame frame;
 
     public static void main(String[] args) throws Exception {
-        Robot r = new Robot();
-        SwingUtilities.invokeAndWait(new Runnable() {
-            public void run() {
-                createAndShowGUI();
-            }
-        });
-        r.waitForIdle();
+        try {
+            Robot r = new Robot();
+            SwingUtilities.invokeAndWait(new Runnable() {
+                public void run() {
+                    createAndShowGUI();
+                }
+            });
+            r.waitForIdle();
 
-        r.delay(600);
+            r.delay(600);
 
-        Point p = Util.getCenterPoint(frame);
-        Color color =  r.getPixelColor((int) p.getX(), (int) p.getY());
-        if (!color.equals(Color.RED)) {
-            throw new Exception("Test failed: JDesktopPane isn't transparent. Expected color is (red color): " + Color.RED + ", actual color is: " + color);
+            Point p = Util.getCenterPoint(frame);
+            Color color =  r.getPixelColor((int) p.getX(), (int) p.getY());
+            if (!color.equals(Color.RED)) {
+                throw new Exception("Test failed: JDesktopPane isn't transparent. Expected color is (red color): " + Color.RED + ", actual color is: " + color);
+            }
+        } finally {
+            if (frame != null) SwingUtilities.invokeAndWait(() -> frame.dispose());
         }
     }
 
     private static void createAndShowGUI() {
         frame = new JFrame();
