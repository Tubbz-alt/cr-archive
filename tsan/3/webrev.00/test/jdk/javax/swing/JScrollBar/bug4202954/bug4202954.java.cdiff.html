<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/javax/swing/JScrollBar/bug4202954/bug4202954.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../6542335/bug6542335.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../JSpinner/4973721/bug4973721.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/javax/swing/JScrollBar/bug4202954/bug4202954.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 38,54 ***</span>
  import jdk.test.lib.Platform;
  
  public class bug4202954 {
      static JScrollPane buttonScrollPane;
      static Robot robot;
      public static void main(String[] args) throws Exception {
<span class="line-modified">!         if (Platform.isOSX()) {</span>
<span class="line-modified">!             UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());</span>
<span class="line-modified">!         }</span>
<span class="line-removed">- </span>
<span class="line-removed">-         SwingUtilities.invokeAndWait(new Runnable() {</span>
<span class="line-removed">-             public void run() {</span>
<span class="line-removed">-                 createAndShowGUI();</span>
              }
<span class="line-removed">-         });</span>
<span class="line-removed">-         Point centerOfScrollPane = Util.getCenterPoint(buttonScrollPane);</span>
<span class="line-removed">-         JButton rightScrollButton = findJButton(buttonScrollPane.getHorizontalScrollBar(), centerOfScrollPane.x, centerOfScrollPane.y);</span>
<span class="line-removed">-         JButton bottomScrollButton = findJButton(buttonScrollPane.getVerticalScrollBar(), centerOfScrollPane.x, centerOfScrollPane.y);</span>
  
<span class="line-modified">!         if (rightScrollButton == null || bottomScrollButton == null) {</span>
<span class="line-modified">!             String errMessage = &quot;Test can&#39;t be executed: &quot;;</span>
<span class="line-modified">!             errMessage = errMessage + (rightScrollButton == null ? &quot;can&#39;t find right button for horizontal scroll bar; &quot; : &quot;&quot;</span>
                      + (bottomScrollButton == null ? &quot;can&#39;t find bottom scroll button for vertical scroll bar&quot; : &quot;&quot;));
<span class="line-modified">!             throw new RuntimeException(errMessage);</span>
<span class="line-modified">!         }</span>
  
<span class="line-modified">!         robot = new Robot();</span>
<span class="line-modified">!         robot.setAutoDelay(50);</span>
  
<span class="line-modified">!         // test right, left and middle mouse buttons for horizontal scroll bar</span>
<span class="line-modified">!         if (!doTest(rightScrollButton, InputEvent.BUTTON1_DOWN_MASK, true)) {</span>
<span class="line-modified">!             throw new RuntimeException(&quot;Test failed: right arrow button didn&#39;t respond on left mouse button.&quot;);</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         if (!doTest(rightScrollButton, InputEvent.BUTTON2_DOWN_MASK, false)) {</span>
<span class="line-modified">!             throw new RuntimeException(&quot;Test failed: right arrow button respond on right mouse button.&quot;);</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         if (!doTest(rightScrollButton, InputEvent.BUTTON3_DOWN_MASK, false)) {</span>
<span class="line-modified">!             throw new RuntimeException(&quot;Test failed: right arrow button respond on middle mouse button.&quot;);</span>
<span class="line-modified">!         }</span>
  
<span class="line-modified">!         // test right, left and middle mouse buttons for vertical scroll bar</span>
<span class="line-modified">!         if (!doTest(bottomScrollButton, InputEvent.BUTTON1_DOWN_MASK, true)) {</span>
<span class="line-modified">!             throw new RuntimeException(&quot;Test failed: bottom arrow button didn&#39;t respond on left mouse button.&quot;);</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         if (!doTest(bottomScrollButton, InputEvent.BUTTON2_DOWN_MASK, false)) {</span>
<span class="line-modified">!             throw new RuntimeException(&quot;Test failed: bottom arrow button respond on right mouse button.&quot;);</span>
<span class="line-modified">!         }</span>
<span class="line-modified">!         if (!doTest(bottomScrollButton, InputEvent.BUTTON3_DOWN_MASK, false)) {</span>
<span class="line-modified">!             throw new RuntimeException(&quot;Test failed: bottom arrow button respond on middle mouse button.&quot;);</span>
          }
      }
      public static void createAndShowGUI() {
          JPanel buttonPanel = new JPanel();
          buttonPanel.setLayout(new GridLayout(5,5, 15,15));
<span class="line-new-header">--- 38,59 ---</span>
  import jdk.test.lib.Platform;
  
  public class bug4202954 {
      static JScrollPane buttonScrollPane;
      static Robot robot;
<span class="line-added">+     static JFrame testFrame;</span>
      public static void main(String[] args) throws Exception {
<span class="line-modified">!         try {</span>
<span class="line-modified">!             if (Platform.isOSX()) {</span>
<span class="line-modified">!                 UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());</span>
              }
  
<span class="line-modified">!             SwingUtilities.invokeAndWait(new Runnable() {</span>
<span class="line-modified">!                 public void run() {</span>
<span class="line-modified">!                     createAndShowGUI();</span>
<span class="line-added">+                 }</span>
<span class="line-added">+             });</span>
<span class="line-added">+             Point centerOfScrollPane = Util.getCenterPoint(buttonScrollPane);</span>
<span class="line-added">+             JButton rightScrollButton = findJButton(buttonScrollPane.getHorizontalScrollBar(), centerOfScrollPane.x, centerOfScrollPane.y);</span>
<span class="line-added">+             JButton bottomScrollButton = findJButton(buttonScrollPane.getVerticalScrollBar(), centerOfScrollPane.x, centerOfScrollPane.y);</span>
<span class="line-added">+ </span>
<span class="line-added">+             if (rightScrollButton == null || bottomScrollButton == null) {</span>
<span class="line-added">+                 String errMessage = &quot;Test can&#39;t be executed: &quot;;</span>
<span class="line-added">+                 errMessage = errMessage + (rightScrollButton == null ? &quot;can&#39;t find right button for horizontal scroll bar; &quot; : &quot;&quot;</span>
                      + (bottomScrollButton == null ? &quot;can&#39;t find bottom scroll button for vertical scroll bar&quot; : &quot;&quot;));
<span class="line-modified">!                 throw new RuntimeException(errMessage);</span>
<span class="line-modified">!             }</span>
  
<span class="line-modified">!             robot = new Robot();</span>
<span class="line-modified">!             robot.setAutoDelay(50);</span>
  
<span class="line-modified">!             // test right, left and middle mouse buttons for horizontal scroll bar</span>
<span class="line-modified">!             if (!doTest(rightScrollButton, InputEvent.BUTTON1_DOWN_MASK, true)) {</span>
<span class="line-modified">!                 throw new RuntimeException(&quot;Test failed: right arrow button didn&#39;t respond on left mouse button.&quot;);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             if (!doTest(rightScrollButton, InputEvent.BUTTON2_DOWN_MASK, false)) {</span>
<span class="line-modified">!                 throw new RuntimeException(&quot;Test failed: right arrow button respond on right mouse button.&quot;);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             if (!doTest(rightScrollButton, InputEvent.BUTTON3_DOWN_MASK, false)) {</span>
<span class="line-modified">!                 throw new RuntimeException(&quot;Test failed: right arrow button respond on middle mouse button.&quot;);</span>
<span class="line-modified">!             }</span>
  
<span class="line-modified">!             // test right, left and middle mouse buttons for vertical scroll bar</span>
<span class="line-modified">!             if (!doTest(bottomScrollButton, InputEvent.BUTTON1_DOWN_MASK, true)) {</span>
<span class="line-modified">!                 throw new RuntimeException(&quot;Test failed: bottom arrow button didn&#39;t respond on left mouse button.&quot;);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             if (!doTest(bottomScrollButton, InputEvent.BUTTON2_DOWN_MASK, false)) {</span>
<span class="line-modified">!                 throw new RuntimeException(&quot;Test failed: bottom arrow button respond on right mouse button.&quot;);</span>
<span class="line-modified">!             }</span>
<span class="line-modified">!             if (!doTest(bottomScrollButton, InputEvent.BUTTON3_DOWN_MASK, false)) {</span>
<span class="line-modified">!                 throw new RuntimeException(&quot;Test failed: bottom arrow button respond on middle mouse button.&quot;);</span>
<span class="line-added">+             }</span>
<span class="line-added">+         } finally {</span>
<span class="line-added">+                 if (testFrame != null) SwingUtilities.invokeAndWait(() -&gt; testFrame.dispose());</span>
          }
      }
      public static void createAndShowGUI() {
          JPanel buttonPanel = new JPanel();
          buttonPanel.setLayout(new GridLayout(5,5, 15,15));
</pre>
<hr />
<pre>
<span class="line-old-header">*** 95,11 ***</span>
              buttonCount++;
          }
          buttonScrollPane = new JScrollPane();
          buttonScrollPane.setViewportView(buttonPanel);
  
<span class="line-modified">!         JFrame testFrame = new JFrame(&quot;bug4202954&quot;);</span>
          testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
          testFrame.setLayout(new BorderLayout());
          testFrame.add(BorderLayout.CENTER, buttonScrollPane);
          testFrame.setSize(450, 100);
          testFrame.setVisible(true);
<span class="line-new-header">--- 100,11 ---</span>
              buttonCount++;
          }
          buttonScrollPane = new JScrollPane();
          buttonScrollPane.setViewportView(buttonPanel);
  
<span class="line-modified">!         testFrame = new JFrame(&quot;bug4202954&quot;);</span>
          testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
          testFrame.setLayout(new BorderLayout());
          testFrame.add(BorderLayout.CENTER, buttonScrollPane);
          testFrame.setSize(450, 100);
          testFrame.setVisible(true);
</pre>
<center><a href="../6542335/bug6542335.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../JSpinner/4973721/bug4973721.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>