diff a/test/jdk/javax/swing/JScrollBar/4865918/bug4865918.java b/test/jdk/javax/swing/JScrollBar/4865918/bug4865918.java
--- a/test/jdk/javax/swing/JScrollBar/4865918/bug4865918.java
+++ b/test/jdk/javax/swing/JScrollBar/4865918/bug4865918.java
@@ -36,37 +36,41 @@
 import java.util.*;
 
 public class bug4865918 {
 
     private static TestScrollBar sbar;
+    private static JFrame frame;
 
     public static void main(String[] argv) throws Exception {
+        try {
+            Robot robot = new Robot();
+            SwingUtilities.invokeAndWait(new Runnable() {
 
-        Robot robot = new Robot();
-        SwingUtilities.invokeAndWait(new Runnable() {
+                public void run() {
+                    createAndShowGUI();
+                }
+            });
 
-            public void run() {
-                createAndShowGUI();
-            }
-        });
+            robot.waitForIdle();
 
-        robot.waitForIdle();
+            SwingUtilities.invokeAndWait(new Runnable() {
 
-        SwingUtilities.invokeAndWait(new Runnable() {
+                @Override
+                public void run() {
+                    sbar.pressMouse();
+                }
+            });
 
-            @Override
-            public void run() {
-                sbar.pressMouse();
-            }
-        });
+            robot.waitForIdle();
 
-        robot.waitForIdle();
+            int value = getValue();
 
-        int value = getValue();
-
-        if (value != 9) {
-            throw new Error("The scrollbar block increment is incorect");
+            if (value != 9) {
+                throw new Error("The scrollbar block increment is incorect");
+            }
+        } finally {
+            if (frame != null) SwingUtilities.invokeAndWait(() -> frame.dispose());
         }
     }
 
     private static int getValue() throws Exception {
         final int[] result = new int[1];
@@ -80,11 +84,11 @@
 
         return result[0];
     }
 
     private static void createAndShowGUI() {
-        JFrame frame = new JFrame("bug4865918");
+        frame = new JFrame("bug4865918");
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
 
         sbar = new TestScrollBar(JScrollBar.HORIZONTAL, -1, 10, -100, 100);
         sbar.setPreferredSize(new Dimension(200, 20));
         sbar.setBlockIncrement(10);
