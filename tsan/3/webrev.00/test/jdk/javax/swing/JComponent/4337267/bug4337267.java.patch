diff a/test/jdk/javax/swing/JComponent/4337267/bug4337267.java b/test/jdk/javax/swing/JComponent/4337267/bug4337267.java
--- a/test/jdk/javax/swing/JComponent/4337267/bug4337267.java
+++ b/test/jdk/javax/swing/JComponent/4337267/bug4337267.java
@@ -46,11 +46,11 @@
 
 public class bug4337267 {
     TestJPanel p1, p2;
     TestBufferedImage i1, i2;
     JComponent[] printq;
-    JFrame window;
+    static JFrame window;
     static boolean testFailed = false;
     static boolean done = false;
 
     String shaped =
             "000 (E) 111 (A) \u0641\u0642\u0643 \u0662\u0662\u0662 (E) 333";
@@ -244,35 +244,38 @@
 
         public void paint(Graphics g) {
             Graphics g0 = image.getGraphics();
             super.paint(g0);
             g.drawImage(image, 0, 0, this);
-        }
-    }
+        } }
 
 
 
     public static void main(String[] args) throws Throwable {
-        final bug4337267 test = new bug4337267();
-        SwingUtilities.invokeLater(new Runnable() {
-            public void run() {
-                test.run();
+        try {
+            final bug4337267 test = new bug4337267();
+            SwingUtilities.invokeLater(new Runnable() {
+                public void run() {
+                    test.run();
+                }
+            });
+
+             synchronized(test) {
+                while (!done) {
+                    try {
+                        test.wait();
+                    } catch (InterruptedException ex) {
+                        // do nothing
+                    }
+                }
             }
-        });
 
-         synchronized(test) {
-            while (!done) {
-                try {
-                    test.wait();
-                } catch (InterruptedException ex) {
-                    // do nothing
-                }
+            if (testFailed) {
+                throw new RuntimeException("FAIL");
             }
-        }
 
-        if (testFailed) {
-            throw new RuntimeException("FAIL");
+            System.out.println("OK");
+        } finally {
+            if (window != null) SwingUtilities.invokeAndWait(() -> window.dispose());
         }
-
-        System.out.println("OK");
     }
 }
