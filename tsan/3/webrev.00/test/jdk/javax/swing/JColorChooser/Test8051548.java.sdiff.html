<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/javax/swing/JColorChooser/Test8051548.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../JButton/4796987/bug4796987.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../JComboBox/4523758/bug4523758.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/javax/swing/JColorChooser/Test8051548.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 39  * @test
 40  * @key headful
 41  * @bug 8051548
 42  * @summary JColorChooser should have a way to disable transparency controls
 43  * @author Alexandr Scherbatiy
 44  * @run main Test8051548
 45  */
 46 
 47 public class Test8051548 {
 48 
 49     private static final String[][] TABS = {
 50         {&quot;HSV&quot;, &quot;0&quot;},
 51         {&quot;HSL&quot;, &quot;0&quot;},
 52         {&quot;RGB&quot;, &quot;255&quot;},
 53         {&quot;CMYK&quot;, &quot;255&quot;}
 54     };
 55 
 56     private static JColorChooser colorChooser;
 57     private static boolean propertyChangeListenerInvoked;
 58     private static volatile Color color;

 59 
 60     public static void main(String[] args) throws Exception {
<span class="line-modified"> 61         testColorPanels();</span>
<span class="line-modified"> 62         testShowDialog(true);</span>
<span class="line-modified"> 63         testShowDialog(false);</span>




 64     }
 65 
 66     private static void testColorPanels() throws Exception {
 67         SwingUtilities.invokeAndWait(() -&gt; createAndShowGUI());
 68 
 69         Robot robot = new Robot();
 70         robot.setAutoDelay(50);
 71         robot.waitForIdle();
 72 
 73         for (String[] tabs : TABS) {
 74             final String tab = tabs[0];
 75             final String initialValue = tabs[1];
 76 
 77             SwingUtilities.invokeAndWait(() -&gt; {
 78 
 79                 colorChooser.setColor(new Color(50, 100, 85));
 80                 JTabbedPane tabbedPane =
 81                         (JTabbedPane) findComponent(colorChooser, &quot;JTabbedPane&quot;);
 82                 int index = tabbedPane.indexOfTab(tab);
 83                 tabbedPane.setSelectedIndex(index);
</pre>
<hr />
<pre>
165         robot.keyPress(KeyEvent.VK_ENTER);
166         robot.keyRelease(KeyEvent.VK_ENTER);
167         robot.waitForIdle();
168 
169         if (colorTransparencySelectionEnabled) {
170             if (color.getAlpha() != alphaValue) {
171                 throw new RuntimeException(&quot;Color alpha has not bee reseted!&quot;);
172             }
173         } else {
174             if (color.getAlpha() != 255) {
175                 throw new RuntimeException(&quot;Color alpha has not bee reseted!&quot;);
176             }
177         }
178     }
179 
180     private static boolean colorHasAlpha(){
181         return colorChooser.getColor().getAlpha() != 255;
182     }
183 
184     private static void createAndShowGUI() {
<span class="line-modified">185         JFrame frame = new JFrame();</span>
186         frame.setSize(700, 500);
187         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
188         colorChooser = new JColorChooser();
189         frame.getContentPane().add(colorChooser);
190         frame.setVisible(true);
191     }
192 
193     private static Component findComponent(Component component, String name) {
194         return findComponent(component,
195                 (comp) -&gt; comp.getClass().getName().contains(name));
196     }
197 
198     private static Component findTextField(Component component, String value) {
199         return findComponent(component, (comp) -&gt; {
200 
201             if (comp instanceof JFormattedTextField) {
202                 JFormattedTextField textField = (JFormattedTextField) comp;
203                 return value.equals(textField.getText());
204             }
205             return false;
</pre>
</td>
<td>
<hr />
<pre>
 39  * @test
 40  * @key headful
 41  * @bug 8051548
 42  * @summary JColorChooser should have a way to disable transparency controls
 43  * @author Alexandr Scherbatiy
 44  * @run main Test8051548
 45  */
 46 
 47 public class Test8051548 {
 48 
 49     private static final String[][] TABS = {
 50         {&quot;HSV&quot;, &quot;0&quot;},
 51         {&quot;HSL&quot;, &quot;0&quot;},
 52         {&quot;RGB&quot;, &quot;255&quot;},
 53         {&quot;CMYK&quot;, &quot;255&quot;}
 54     };
 55 
 56     private static JColorChooser colorChooser;
 57     private static boolean propertyChangeListenerInvoked;
 58     private static volatile Color color;
<span class="line-added"> 59     private static JFrame frame;</span>
 60 
 61     public static void main(String[] args) throws Exception {
<span class="line-modified"> 62         try {</span>
<span class="line-modified"> 63             testColorPanels();</span>
<span class="line-modified"> 64             testShowDialog(true);</span>
<span class="line-added"> 65             testShowDialog(false);</span>
<span class="line-added"> 66         } finally {</span>
<span class="line-added"> 67             if(frame != null) SwingUtilities.invokeAndWait(() -&gt; frame.dispose());</span>
<span class="line-added"> 68         }</span>
 69     }
 70 
 71     private static void testColorPanels() throws Exception {
 72         SwingUtilities.invokeAndWait(() -&gt; createAndShowGUI());
 73 
 74         Robot robot = new Robot();
 75         robot.setAutoDelay(50);
 76         robot.waitForIdle();
 77 
 78         for (String[] tabs : TABS) {
 79             final String tab = tabs[0];
 80             final String initialValue = tabs[1];
 81 
 82             SwingUtilities.invokeAndWait(() -&gt; {
 83 
 84                 colorChooser.setColor(new Color(50, 100, 85));
 85                 JTabbedPane tabbedPane =
 86                         (JTabbedPane) findComponent(colorChooser, &quot;JTabbedPane&quot;);
 87                 int index = tabbedPane.indexOfTab(tab);
 88                 tabbedPane.setSelectedIndex(index);
</pre>
<hr />
<pre>
170         robot.keyPress(KeyEvent.VK_ENTER);
171         robot.keyRelease(KeyEvent.VK_ENTER);
172         robot.waitForIdle();
173 
174         if (colorTransparencySelectionEnabled) {
175             if (color.getAlpha() != alphaValue) {
176                 throw new RuntimeException(&quot;Color alpha has not bee reseted!&quot;);
177             }
178         } else {
179             if (color.getAlpha() != 255) {
180                 throw new RuntimeException(&quot;Color alpha has not bee reseted!&quot;);
181             }
182         }
183     }
184 
185     private static boolean colorHasAlpha(){
186         return colorChooser.getColor().getAlpha() != 255;
187     }
188 
189     private static void createAndShowGUI() {
<span class="line-modified">190         frame = new JFrame();</span>
191         frame.setSize(700, 500);
192         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
193         colorChooser = new JColorChooser();
194         frame.getContentPane().add(colorChooser);
195         frame.setVisible(true);
196     }
197 
198     private static Component findComponent(Component component, String name) {
199         return findComponent(component,
200                 (comp) -&gt; comp.getClass().getName().contains(name));
201     }
202 
203     private static Component findTextField(Component component, String value) {
204         return findComponent(component, (comp) -&gt; {
205 
206             if (comp instanceof JFormattedTextField) {
207                 JFormattedTextField textField = (JFormattedTextField) comp;
208                 return value.equals(textField.getText());
209             }
210             return false;
</pre>
</td>
</tr>
</table>
<center><a href="../JButton/4796987/bug4796987.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../JComboBox/4523758/bug4523758.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>