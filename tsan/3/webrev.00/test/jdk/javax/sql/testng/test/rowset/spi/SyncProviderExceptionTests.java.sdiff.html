<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/javax/sql/testng/test/rowset/spi/SyncProviderExceptionTests.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../security/auth/kerberos/DelegationPermissionHash.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../swing/AbstractButton/6711682/bug6711682.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/javax/sql/testng/test/rowset/spi/SyncProviderExceptionTests.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package test.rowset.spi;
 24 
 25 import com.sun.rowset.internal.SyncResolverImpl;
 26 import java.sql.SQLException;
 27 import javax.sql.rowset.spi.SyncProviderException;


 28 import static org.testng.Assert.*;
 29 import org.testng.annotations.AfterClass;
 30 import org.testng.annotations.BeforeClass;

 31 import org.testng.annotations.Test;
 32 import util.BaseTest;
 33 import util.StubSyncResolver;
 34 
 35 public class SyncProviderExceptionTests extends BaseTest {




 36     @BeforeClass
 37     public static void setUpClass() throws Exception {
 38         System.out.println(System.getProperty(&quot;java.naming.factory.initial&quot;));
 39     }
 40 
 41     @AfterClass
 42     public static void tearDownClass() throws Exception {
 43     }






 44     /*
 45      * Create SyncProviderException with no-arg constructor
 46      */
 47     @Test
 48     public void test() {
 49         SyncProviderException ex = new SyncProviderException();
 50         assertTrue(ex.getMessage() == null
 51                 &amp;&amp; ex.getSQLState() == null
 52                 &amp;&amp; ex.getCause() == null
 53                 &amp;&amp; ex.getErrorCode() == 0
 54                 &amp;&amp; ex.getSyncResolver() instanceof SyncResolverImpl);
 55     }
 56 
 57     /*
 58      * Create SyncProviderException with no-arg constructor and
 59      * call setSyncResolver to indicate the SyncResolver to use
 60      */
 61     @Test
 62     public void test01() {
 63         SyncProviderException ex = new SyncProviderException();
</pre>
<hr />
<pre>
167                 &amp;&amp; ex1.getCause() == null
168                 &amp;&amp; ex1.getErrorCode() == 0
169                 &amp;&amp; ex1.getSyncResolver() instanceof SyncResolverImpl, ex1.getSyncResolver().getClass().getName());
170     }
171 
172     /*
173      * Serialize a SyncProviderException and make sure you can read it back properly
174      */
175     @Test
176     public void test08() throws Exception {
177         SyncProviderException e = new SyncProviderException(reason);
178         e.setSyncResolver(new StubSyncResolver());
179 
180         SyncProviderException ex1 = createSerializedException(e);
181         assertTrue(ex1.getMessage().equals(reason)
182                 &amp;&amp; ex1.getSQLState() == null
183                 &amp;&amp; ex1.getCause() == null
184                 &amp;&amp; ex1.getErrorCode() == 0
185                 &amp;&amp; ex1.getSyncResolver() instanceof StubSyncResolver);
186     }
























































187 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package test.rowset.spi;
 24 
 25 import com.sun.rowset.internal.SyncResolverImpl;
 26 import java.sql.SQLException;
 27 import javax.sql.rowset.spi.SyncProviderException;
<span class="line-added"> 28 import javax.sql.rowset.spi.SyncResolver;</span>
<span class="line-added"> 29 </span>
 30 import static org.testng.Assert.*;
 31 import org.testng.annotations.AfterClass;
 32 import org.testng.annotations.BeforeClass;
<span class="line-added"> 33 import org.testng.annotations.BeforeMethod;</span>
 34 import org.testng.annotations.Test;
 35 import util.BaseTest;
 36 import util.StubSyncResolver;
 37 
 38 public class SyncProviderExceptionTests extends BaseTest {
<span class="line-added"> 39 </span>
<span class="line-added"> 40     // Used by SyncProviderException::getSyncResolver tests</span>
<span class="line-added"> 41     private SyncResolver resolver;</span>
<span class="line-added"> 42 </span>
 43     @BeforeClass
 44     public static void setUpClass() throws Exception {
 45         System.out.println(System.getProperty(&quot;java.naming.factory.initial&quot;));
 46     }
 47 
 48     @AfterClass
 49     public static void tearDownClass() throws Exception {
 50     }
<span class="line-added"> 51 </span>
<span class="line-added"> 52     @BeforeMethod</span>
<span class="line-added"> 53     public void setupTest() {</span>
<span class="line-added"> 54         resolver = new SyncProviderException().getSyncResolver();</span>
<span class="line-added"> 55     }</span>
<span class="line-added"> 56 </span>
 57     /*
 58      * Create SyncProviderException with no-arg constructor
 59      */
 60     @Test
 61     public void test() {
 62         SyncProviderException ex = new SyncProviderException();
 63         assertTrue(ex.getMessage() == null
 64                 &amp;&amp; ex.getSQLState() == null
 65                 &amp;&amp; ex.getCause() == null
 66                 &amp;&amp; ex.getErrorCode() == 0
 67                 &amp;&amp; ex.getSyncResolver() instanceof SyncResolverImpl);
 68     }
 69 
 70     /*
 71      * Create SyncProviderException with no-arg constructor and
 72      * call setSyncResolver to indicate the SyncResolver to use
 73      */
 74     @Test
 75     public void test01() {
 76         SyncProviderException ex = new SyncProviderException();
</pre>
<hr />
<pre>
180                 &amp;&amp; ex1.getCause() == null
181                 &amp;&amp; ex1.getErrorCode() == 0
182                 &amp;&amp; ex1.getSyncResolver() instanceof SyncResolverImpl, ex1.getSyncResolver().getClass().getName());
183     }
184 
185     /*
186      * Serialize a SyncProviderException and make sure you can read it back properly
187      */
188     @Test
189     public void test08() throws Exception {
190         SyncProviderException e = new SyncProviderException(reason);
191         e.setSyncResolver(new StubSyncResolver());
192 
193         SyncProviderException ex1 = createSerializedException(e);
194         assertTrue(ex1.getMessage().equals(reason)
195                 &amp;&amp; ex1.getSQLState() == null
196                 &amp;&amp; ex1.getCause() == null
197                 &amp;&amp; ex1.getErrorCode() == 0
198                 &amp;&amp; ex1.getSyncResolver() instanceof StubSyncResolver);
199     }
<span class="line-added">200 </span>
<span class="line-added">201     /*</span>
<span class="line-added">202      * Validate SyncResolver::getStatus() succeeds</span>
<span class="line-added">203      */</span>
<span class="line-added">204     @Test</span>
<span class="line-added">205     public void testgetStatus() {</span>
<span class="line-added">206         int status = resolver.getStatus();</span>
<span class="line-added">207     }</span>
<span class="line-added">208 </span>
<span class="line-added">209     /*</span>
<span class="line-added">210      * Validate SyncResolver::nextConflict() succeeds</span>
<span class="line-added">211      */</span>
<span class="line-added">212     @Test</span>
<span class="line-added">213     public void testnextConflict() throws SQLException {</span>
<span class="line-added">214          boolean result = resolver.nextConflict();</span>
<span class="line-added">215     }</span>
<span class="line-added">216 </span>
<span class="line-added">217     /*</span>
<span class="line-added">218      * Validate SyncResolver::previousConflict() succeeds</span>
<span class="line-added">219      */</span>
<span class="line-added">220     @Test</span>
<span class="line-added">221     public void testPreviousConflict() throws SQLException {</span>
<span class="line-added">222         boolean result =  resolver.previousConflict();</span>
<span class="line-added">223     }</span>
<span class="line-added">224 </span>
<span class="line-added">225     /*</span>
<span class="line-added">226      * Validate SyncResolver::getConflictValue() throws a SQLException</span>
<span class="line-added">227      */</span>
<span class="line-added">228     @Test</span>
<span class="line-added">229     public void testConflictedValueByInt() throws SQLException {</span>
<span class="line-added">230         assertThrows(SQLException.class, () -&gt;resolver.getConflictValue(1));</span>
<span class="line-added">231     }</span>
<span class="line-added">232 </span>
<span class="line-added">233     /*</span>
<span class="line-added">234      * Validate SyncResolver::getConflictValue() throws a SQLException</span>
<span class="line-added">235      */</span>
<span class="line-added">236     @Test</span>
<span class="line-added">237     public void testConflictedValueByName() throws SQLException {</span>
<span class="line-added">238         assertThrows(SQLException.class, () -&gt; resolver.getConflictValue(&quot;foo&quot;));</span>
<span class="line-added">239     }</span>
<span class="line-added">240 </span>
<span class="line-added">241     /*</span>
<span class="line-added">242      * Validate SyncResolver::setResolvedValue() throws a SQLException</span>
<span class="line-added">243      */</span>
<span class="line-added">244     @Test</span>
<span class="line-added">245     public void testSetResolvedValueByInt() throws SQLException {</span>
<span class="line-added">246         assertThrows(SQLException.class, () -&gt; resolver.setResolvedValue(1, &quot;foo&quot;));</span>
<span class="line-added">247     }</span>
<span class="line-added">248 </span>
<span class="line-added">249     /*</span>
<span class="line-added">250      * Validate SyncResolver::getConflictValue() throws a SQLException</span>
<span class="line-added">251      */</span>
<span class="line-added">252     @Test</span>
<span class="line-added">253     public void testSetResolvedValueByName() throws SQLException {</span>
<span class="line-added">254         assertThrows(SQLException.class, () -&gt; resolver.setResolvedValue(&quot;foo&quot;, &quot;bar&quot;));</span>
<span class="line-added">255     }</span>
256 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../security/auth/kerberos/DelegationPermissionHash.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../swing/AbstractButton/6711682/bug6711682.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>