<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/jdk/tools/jpackage/junit/run_junit.sh</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 #!/bin/bash
 2 
 3 set -x
 4 
 5 set -e
 6 if [ -z &quot;$BASH&quot; ]; then
 7   # The script relies on Bash arrays, rerun in Bash.
 8   /bin/bash $0 $@
 9   exit
10 fi
11 
12 sources=()
13 classes=()
14 for s in $(find &quot;${TESTSRC}&quot; -name  &quot;*.java&quot; | grep -v junit.java); do
15   sources+=( &quot;$s&quot; )
16   classes+=( $(echo &quot;$s&quot; | sed -e &quot;s|${TESTSRC}/||&quot; -e &#39;s|/|.|g&#39; -e &#39;s/.java$//&#39;) )
17 done
18 
19 common_args=(\
20   --add-modules jdk.incubator.jpackage \
21   --patch-module jdk.incubator.jpackage=&quot;${TESTSRC}${PS}${TESTCLASSES}&quot; \
22   --add-reads jdk.incubator.jpackage=ALL-UNNAMED \
23   --add-exports jdk.incubator.jpackage/jdk.incubator.jpackage.internal=ALL-UNNAMED \
24   -classpath &quot;${TESTCLASSPATH}&quot; \
25 )
26 
27 # Compile classes for junit
28 &quot;${COMPILEJAVA}/bin/javac&quot; ${TESTTOOLVMOPTS} ${TESTJAVACOPTS} \
29   &quot;${common_args[@]}&quot; -d &quot;${TESTCLASSES}&quot; &quot;${sources[@]}&quot;
30 
31 # Run junit
32 &quot;${TESTJAVA}/bin/java&quot; ${TESTVMOPTS} ${TESTJAVAOPTS} \
33   &quot;${common_args[@]}&quot; org.junit.runner.JUnitCore &quot;${classes[@]}&quot;
    </pre>
  </body>
</html>