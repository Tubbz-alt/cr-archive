<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/sanity/client/SwingSet/src/ColorChooserDemoTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="ButtonDemoScreenshotTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="EditorPaneDemoTest.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sanity/client/SwingSet/src/ColorChooserDemoTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 66,263 ***</span>
  * @run testng ColorChooserDemoTest
  */
  @Listeners(GuiTestListener.class)
  public class ColorChooserDemoTest {
  
<span class="line-modified">! private static final String OK_BUTTON_TITLE = &quot;OK&quot;;</span>
<span class="line-modified">! private static final String CANCEL_BUTTON_TITLE = &quot;Cancel&quot;;</span>
<span class="line-modified">! private static final String RESET_BUTTON_TITLE = &quot;Reset&quot;;</span>
<span class="line-modified">! private static final String HSV = &quot;HSV&quot;;</span>
<span class="line-modified">! private static final String RGB = &quot;RGB&quot;;</span>
<span class="line-modified">! private static final String HSL = &quot;HSL&quot;;</span>
<span class="line-modified">! private static final String CMYK = &quot;CMYK&quot;;</span>
<span class="line-modified">! private static final int HSV_NUMBER_OF_SLIDERS_AND_SPINNERS = 4;</span>
<span class="line-modified">! private static final int RGB_NUMBER_OF_SLIDERS_AND_SPINNERS = 4;</span>
<span class="line-modified">! private static final int HSL_NUMBER_OF_SLIDERS_AND_SPINNERS = 4;</span>
<span class="line-modified">! private static final int CMYK_NUMBER_OF_SLIDERS_AND_SPINNERS = 5;</span>
<span class="line-modified">! private static final int HSV_HUE_INDEX = 0;</span>
<span class="line-modified">! private static final int HSV_SATURATION_INDEX = 1;</span>
<span class="line-modified">! private static final int HSV_VALUE_INDEX = 2;</span>
<span class="line-modified">! private static final int HSV_TRANSPARENCY_INDEX = 3;</span>
<span class="line-modified">! private static final int HSL_HUE_INDEX = 0;</span>
<span class="line-modified">! private static final int HSL_SATURATION_INDEX = 1;</span>
<span class="line-modified">! private static final int HSL_LIGHTNESS_INDEX = 2;</span>
<span class="line-modified">! private static final int HSL_TRANSPARENCY_INDEX = 3;</span>
<span class="line-modified">! private static final int RGB_RED_INDEX = 0;</span>
<span class="line-modified">! private static final int RGB_GREEN_INDEX = 1;</span>
<span class="line-modified">! private static final int RGB_BLUE_INDEX = 2;</span>
<span class="line-modified">! private static final int RGB_ALPHA_INDEX = 3;</span>
<span class="line-modified">! private static final int RGB_COLORCODE_TEXT_FIELD_INDEX = 4;</span>
<span class="line-modified">! private static final int CMYK_CYAN_INDEX = 0;</span>
<span class="line-modified">! private static final int CMYK_MAGENTA_INDEX = 1;</span>
<span class="line-modified">! private static final int CMYK_YELLOW_INDEX = 2;</span>
<span class="line-modified">! private static final int CMYK_BLACK_INDEX = 3;</span>
<span class="line-modified">! private static final int CMYK_ALPHA_INDEX = 4;</span>
<span class="line-modified">! </span>
<span class="line-modified">! private final Color resetColor = new Color(125, 125, 125);</span>
<span class="line-modified">! </span>
<span class="line-modified">! private JDialogOperator colorChooserDialog;</span>
<span class="line-modified">! private JButtonOperator okButton;</span>
<span class="line-modified">! private JButtonOperator cancelButton;</span>
<span class="line-modified">! private JButtonOperator resetButton;</span>
<span class="line-modified">! private JColorChooserOperator colorChooser;</span>
<span class="line-modified">! private JButtonOperator backgroundButton;</span>
<span class="line-modified">! private JButtonOperator gradient1Button;</span>
<span class="line-modified">! private JButtonOperator gradient2Button;</span>
<span class="line-modified">! private JButtonOperator perimeterButton;</span>
<span class="line-modified">! private JTabbedPaneOperator tabOperator;</span>
<span class="line-modified">! private JComponentOperator bezierAnimationPanel;</span>
<span class="line-modified">! private JSliderOperator[] sliders = new JSliderOperator[5];</span>
<span class="line-modified">! private JSpinnerOperator[] spinners = new JSpinnerOperator[5];</span>
<span class="line-modified">! private JButtonOperator lastFocusedButton;</span>
<span class="line-modified">! </span>
<span class="line-modified">! @Test</span>
<span class="line-modified">! public void test() throws Exception {</span>
<span class="line-modified">! new ClassReference(ColorChooserDemo.class.getCanonicalName()).startApplication();</span>
<span class="line-modified">! JFrameOperator frame = new JFrameOperator(DEMO_TITLE);</span>
<span class="line-modified">! bezierAnimationPanel = new JComponentOperator(frame, new ByClassChooser(BezierAnimationPanel.class));</span>
<span class="line-modified">! initializePanelButtons(frame);</span>
<span class="line-modified">! checkBackgroundColorChooser();</span>
<span class="line-modified">! checkGradient1ColorChooser();</span>
<span class="line-modified">! checkGradient2ColorChooser();</span>
<span class="line-modified">! checkPerimeterColorChooser();</span>
  }
  
<span class="line-removed">- private void checkBackgroundColorChooser() throws Exception {</span>
<span class="line-removed">- basicCheck(backgroundButton, BezierColor.BACKGROUND);</span>
<span class="line-removed">- checkAllColorChoosers(backgroundButton);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkGradient1ColorChooser() throws Exception {</span>
<span class="line-removed">- basicCheck(gradient1Button, BezierColor.GRADIENT_A);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkGradient2ColorChooser() throws Exception {</span>
<span class="line-removed">- basicCheck(gradient2Button, BezierColor.GRADIENT_B);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkPerimeterColorChooser() throws Exception {</span>
<span class="line-removed">- basicCheck(perimeterButton, BezierColor.OUTER);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void pushButtonAndInitialize(JButtonOperator jbo) throws InterruptedException {</span>
<span class="line-removed">- // Wait for focus to return to last focused button</span>
<span class="line-removed">- lastFocusedButton.waitHasFocus();</span>
<span class="line-removed">- jbo.pushNoBlock();</span>
<span class="line-removed">- lastFocusedButton = jbo;</span>
<span class="line-removed">- // Wait till the ColorChooserDemo Dialog Opens</span>
<span class="line-removed">- new DialogWaiter().waitDialog(CHOOSER_TITLE, false, false);</span>
<span class="line-removed">- initializeDialog();</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void initializePanelButtons(JFrameOperator frame) {</span>
<span class="line-removed">- backgroundButton = new JButtonOperator(frame, BACKGROUND);</span>
<span class="line-removed">- gradient1Button = new JButtonOperator(frame, GRADIENT_1);</span>
<span class="line-removed">- gradient2Button = new JButtonOperator(frame, GRADIENT_2);</span>
<span class="line-removed">- perimeterButton = new JButtonOperator(frame, PERIMETER);</span>
<span class="line-removed">- lastFocusedButton = backgroundButton;</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void initializeDialog() {</span>
<span class="line-removed">- colorChooserDialog = new JDialogOperator(CHOOSER_TITLE);</span>
<span class="line-removed">- tabOperator = new JTabbedPaneOperator(colorChooserDialog);</span>
<span class="line-removed">- colorChooser = new JColorChooserOperator(colorChooserDialog);</span>
<span class="line-removed">- okButton = new JButtonOperator(colorChooserDialog, OK_BUTTON_TITLE);</span>
<span class="line-removed">- cancelButton = new JButtonOperator(colorChooserDialog, CANCEL_BUTTON_TITLE);</span>
<span class="line-removed">- resetButton = new JButtonOperator(colorChooserDialog, RESET_BUTTON_TITLE);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void basicCheck(JButtonOperator jbo, BezierColor bezierColor) throws Exception {</span>
<span class="line-removed">- Color testColor = new Color(100, 26, 155);</span>
<span class="line-removed">- Color testColor2 = new Color(10, 40, 50);</span>
<span class="line-removed">- checkDefaultColorChooser(jbo, testColor, bezierColor);</span>
<span class="line-removed">- checkCancelButton(jbo, testColor2);</span>
<span class="line-removed">- checkResetButton(jbo, testColor2);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkDefaultColorChooser(JButtonOperator jbo, Color testColor, BezierColor bezierColor)</span>
<span class="line-removed">- throws Exception {</span>
<span class="line-removed">- BezierAnimationPanel bezierPanel;</span>
<span class="line-removed">- pushButtonAndInitialize(jbo);</span>
<span class="line-removed">- // Check ColorChooser color is being set and used accordingly</span>
<span class="line-removed">- // in the animation panel</span>
<span class="line-removed">- setAndWaitColor(testColor);</span>
<span class="line-removed">- pushButtonAndWaitDialogClosed(okButton);</span>
<span class="line-removed">- bezierPanel = (BezierAnimationPanel) bezierAnimationPanel.getSource();</span>
<span class="line-removed">- colorChooser.waitStateOnQueue(jColorChooser -&gt; (bezierPanel.getBezierColor(bezierColor).equals(testColor)));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkCancelButton(JButtonOperator jbo, Color testColor) throws Exception {</span>
<span class="line-removed">- pushButtonAndInitialize(jbo);</span>
<span class="line-removed">- setAndWaitColor(testColor);</span>
<span class="line-removed">- pushButtonAndWaitDialogClosed(cancelButton);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkResetButton(JButtonOperator jbo, Color testColor) throws Exception {</span>
<span class="line-removed">- pushButtonAndInitialize(jbo);</span>
<span class="line-removed">- Color initialColor = colorChooser.getColor();</span>
<span class="line-removed">- setAndWaitColor(testColor);</span>
<span class="line-removed">- resetButton.push();</span>
<span class="line-removed">- waitJColorChooserColor(initialColor);</span>
<span class="line-removed">- pushButtonAndWaitDialogClosed(okButton);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkAllColorChoosers(JButtonOperator jbo) throws Exception {</span>
<span class="line-removed">- pushButtonAndInitialize(jbo);</span>
<span class="line-removed">- checkHSV();</span>
<span class="line-removed">- checkHSL();</span>
<span class="line-removed">- checkRGB();</span>
<span class="line-removed">- checkCMYK();</span>
<span class="line-removed">- pushButtonAndWaitDialogClosed(okButton);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void waitJColorChooserColor(Color expectedColor) {</span>
<span class="line-removed">- colorChooser.waitStateOnQueue(jColorChooser -&gt; colorChooser.getColor().equals(expectedColor));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void setAndWaitColor(Color color) {</span>
<span class="line-removed">- colorChooser.setColor(color);</span>
<span class="line-removed">- // Wait for the Color to be set</span>
<span class="line-removed">- waitJColorChooserColor(color);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void resetColor() {</span>
<span class="line-removed">- colorChooser.setColor(resetColor);</span>
<span class="line-removed">- // Wait for the Color to be reset</span>
<span class="line-removed">- waitJColorChooserColor(resetColor);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkHSV() {</span>
<span class="line-removed">- tabOperator.selectPage(HSV);</span>
<span class="line-removed">- initializeSliderAndSpinner(HSV_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-removed">- resetColor();</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSV_SATURATION_INDEX], 50, new Color(125, 62, 62));</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSV_VALUE_INDEX], 80, new Color(204, 102, 102));</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSV_HUE_INDEX], 50, new Color(204, 187, 102));</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSV_TRANSPARENCY_INDEX], 50, new Color(204, 187, 102, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSV_SATURATION_INDEX], 25, new Color(204, 195, 153, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSV_VALUE_INDEX], 40, new Color(102, 97, 76, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSV_HUE_INDEX], 25, new Color(102, 87, 76, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSV_TRANSPARENCY_INDEX], 100, new Color(102, 87, 76, 0));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkHSL() {</span>
<span class="line-removed">- tabOperator.selectPage(HSL);</span>
<span class="line-removed">- initializeSliderAndSpinner(HSL_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-removed">- resetColor();</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSL_SATURATION_INDEX], 50, new Color(187, 62, 62));</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSL_LIGHTNESS_INDEX], 80, new Color(229, 178, 178));</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSL_HUE_INDEX], 180, new Color(178, 229, 229));</span>
<span class="line-removed">- setAndCheckSlider(sliders[HSL_TRANSPARENCY_INDEX], 50, new Color(178, 229, 229, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSL_SATURATION_INDEX], 25, new Color(191, 216, 216, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSL_LIGHTNESS_INDEX], 40, new Color(76, 127, 127, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSL_HUE_INDEX], 25, new Color(127, 97, 76, 127));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[HSL_TRANSPARENCY_INDEX], 50, new Color(127, 97, 76, 127));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkRGB() {</span>
<span class="line-removed">- String sampleColor = &quot;111111&quot;;</span>
<span class="line-removed">- tabOperator.selectPage(RGB);</span>
<span class="line-removed">- initializeSliderAndSpinner(RGB_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-removed">- JTextFieldOperator colorCode = new JTextFieldOperator(colorChooserDialog, RGB_COLORCODE_TEXT_FIELD_INDEX);</span>
<span class="line-removed">- resetColor();</span>
<span class="line-removed">- setAndCheckSlider(sliders[RGB_GREEN_INDEX], 50, new Color(125, 50, 125, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[RGB_BLUE_INDEX], 80, new Color(125, 50, 80, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[RGB_RED_INDEX], 50, new Color(50, 50, 80, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[RGB_ALPHA_INDEX], 125, new Color(50, 50, 80, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[RGB_GREEN_INDEX], 25, new Color(50, 25, 80, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[RGB_BLUE_INDEX], 40, new Color(50, 25, 40, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[RGB_RED_INDEX], 25, new Color(25, 25, 40, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[RGB_ALPHA_INDEX], 255, new Color(25, 25, 40, 255));</span>
<span class="line-removed">- </span>
<span class="line-removed">- colorCode.setText(sampleColor);</span>
<span class="line-removed">- // Wait for the sampleColor to be set in the color code text field.</span>
<span class="line-removed">- colorCode.waitText(sampleColor);</span>
<span class="line-removed">- colorCode.getFocus();</span>
<span class="line-removed">- colorCode.pressKey(KeyEvent.VK_TAB);</span>
<span class="line-removed">- // Wait for the color to be set</span>
<span class="line-removed">- waitJColorChooserColor(new Color(17, 17, 17, 255));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void checkCMYK() {</span>
<span class="line-removed">- tabOperator.selectPage(CMYK);</span>
<span class="line-removed">- initializeSliderAndSpinner(CMYK_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-removed">- resetColor();</span>
<span class="line-removed">- setAndCheckSlider(sliders[CMYK_MAGENTA_INDEX], 50, new Color(125, 100, 125, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[CMYK_YELLOW_INDEX], 80, new Color(125, 100, 85, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[CMYK_CYAN_INDEX], 50, new Color(100, 100, 85, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[CMYK_BLACK_INDEX], 50, new Color(164, 164, 140, 255));</span>
<span class="line-removed">- setAndCheckSlider(sliders[CMYK_ALPHA_INDEX], 125, new Color(164, 164, 140, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[CMYK_MAGENTA_INDEX], 25, new Color(164, 184, 140, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[CMYK_YELLOW_INDEX], 40, new Color(164, 184, 172, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[CMYK_CYAN_INDEX], 25, new Color(184, 184, 172, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[CMYK_BLACK_INDEX], 100, new Color(139, 139, 130, 125));</span>
<span class="line-removed">- setAndCheckSpinner(spinners[CMYK_ALPHA_INDEX], 255, new Color(139, 139, 130, 255));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void setAndCheckSlider(JSliderOperator slider, int sliderValue, Color expectedColor) {</span>
<span class="line-removed">- slider.setValue(sliderValue);</span>
<span class="line-removed">- // Wait for slider to attain the specified value</span>
<span class="line-removed">- slider.waitStateOnQueue(jSlider -&gt; slider.getValue() == sliderValue);</span>
<span class="line-removed">- colorChooser.waitStateOnQueue(jColorChooser -&gt; (colorChooser.getColor().equals(expectedColor)));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void setAndCheckSpinner(JSpinnerOperator spinner, int spinnerValue, Color expectedColor) {</span>
<span class="line-removed">- spinner.setValue(spinnerValue);</span>
<span class="line-removed">- // Wait for spinner to attain the specified value</span>
<span class="line-removed">- spinner.waitStateOnQueue(jSpinner -&gt; (int) spinner.getValue() == spinnerValue);</span>
<span class="line-removed">- colorChooser.waitStateOnQueue(jColorChooser -&gt; (colorChooser.getColor().equals(expectedColor)));</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void initializeSliderAndSpinner(int numberOfSlidersAndSpinners) {</span>
<span class="line-removed">- for (int i = 0; i &lt; numberOfSlidersAndSpinners; i++) {</span>
<span class="line-removed">- sliders[i] = new JSliderOperator(colorChooserDialog, i);</span>
<span class="line-removed">- spinners[i] = new JSpinnerOperator(colorChooserDialog, i);</span>
<span class="line-removed">- }</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
<span class="line-removed">- private void pushButtonAndWaitDialogClosed(JButtonOperator button) {</span>
<span class="line-removed">- button.push();</span>
<span class="line-removed">- // Wait for the color chooser dialog to close.</span>
<span class="line-removed">- colorChooserDialog.waitClosed();</span>
<span class="line-removed">- }</span>
<span class="line-removed">- }</span>
<span class="line-new-header">--- 66,264 ---</span>
  * @run testng ColorChooserDemoTest
  */
  @Listeners(GuiTestListener.class)
  public class ColorChooserDemoTest {
  
<span class="line-modified">!     private static final String OK_BUTTON_TITLE = &quot;OK&quot;;</span>
<span class="line-modified">!     private static final String CANCEL_BUTTON_TITLE = &quot;Cancel&quot;;</span>
<span class="line-modified">!     private static final String RESET_BUTTON_TITLE = &quot;Reset&quot;;</span>
<span class="line-modified">!     private static final String HSV = &quot;HSV&quot;;</span>
<span class="line-modified">!     private static final String RGB = &quot;RGB&quot;;</span>
<span class="line-modified">!     private static final String HSL = &quot;HSL&quot;;</span>
<span class="line-modified">!     private static final String CMYK = &quot;CMYK&quot;;</span>
<span class="line-modified">!     private static final int HSV_NUMBER_OF_SLIDERS_AND_SPINNERS = 4;</span>
<span class="line-modified">!     private static final int RGB_NUMBER_OF_SLIDERS_AND_SPINNERS = 4;</span>
<span class="line-modified">!     private static final int HSL_NUMBER_OF_SLIDERS_AND_SPINNERS = 4;</span>
<span class="line-modified">!     private static final int CMYK_NUMBER_OF_SLIDERS_AND_SPINNERS = 5;</span>
<span class="line-modified">!     private static final int HSV_HUE_INDEX = 0;</span>
<span class="line-modified">!     private static final int HSV_SATURATION_INDEX = 1;</span>
<span class="line-modified">!     private static final int HSV_VALUE_INDEX = 2;</span>
<span class="line-modified">!     private static final int HSV_TRANSPARENCY_INDEX = 3;</span>
<span class="line-modified">!     private static final int HSL_HUE_INDEX = 0;</span>
<span class="line-modified">!     private static final int HSL_SATURATION_INDEX = 1;</span>
<span class="line-modified">!     private static final int HSL_LIGHTNESS_INDEX = 2;</span>
<span class="line-modified">!     private static final int HSL_TRANSPARENCY_INDEX = 3;</span>
<span class="line-modified">!     private static final int RGB_RED_INDEX = 0;</span>
<span class="line-modified">!     private static final int RGB_GREEN_INDEX = 1;</span>
<span class="line-modified">!     private static final int RGB_BLUE_INDEX = 2;</span>
<span class="line-modified">!     private static final int RGB_ALPHA_INDEX = 3;</span>
<span class="line-modified">!     private static final int RGB_COLORCODE_TEXT_FIELD_INDEX = 4;</span>
<span class="line-modified">!     private static final int CMYK_CYAN_INDEX = 0;</span>
<span class="line-modified">!     private static final int CMYK_MAGENTA_INDEX = 1;</span>
<span class="line-modified">!     private static final int CMYK_YELLOW_INDEX = 2;</span>
<span class="line-modified">!     private static final int CMYK_BLACK_INDEX = 3;</span>
<span class="line-modified">!     private static final int CMYK_ALPHA_INDEX = 4;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     private final Color resetColor = new Color(125, 125, 125);</span>
<span class="line-modified">! </span>
<span class="line-modified">!     private JDialogOperator colorChooserDialog;</span>
<span class="line-modified">!     private JButtonOperator okButton;</span>
<span class="line-modified">!     private JButtonOperator cancelButton;</span>
<span class="line-modified">!     private JButtonOperator resetButton;</span>
<span class="line-modified">!     private JColorChooserOperator colorChooser;</span>
<span class="line-modified">!     private JButtonOperator backgroundButton;</span>
<span class="line-modified">!     private JButtonOperator gradient1Button;</span>
<span class="line-modified">!     private JButtonOperator gradient2Button;</span>
<span class="line-modified">!     private JButtonOperator perimeterButton;</span>
<span class="line-modified">!     private JTabbedPaneOperator tabOperator;</span>
<span class="line-modified">!     private JComponentOperator bezierAnimationPanel;</span>
<span class="line-modified">!     private JSliderOperator[] sliders = new JSliderOperator[5];</span>
<span class="line-modified">!     private JSpinnerOperator[] spinners = new JSpinnerOperator[5];</span>
<span class="line-modified">!     private JButtonOperator lastFocusedButton;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     @Test</span>
<span class="line-modified">!     public void test() throws Exception {</span>
<span class="line-modified">!         new ClassReference(ColorChooserDemo.class.getCanonicalName()).startApplication();</span>
<span class="line-modified">!         JFrameOperator frame = new JFrameOperator(DEMO_TITLE);</span>
<span class="line-modified">!         bezierAnimationPanel = new JComponentOperator(frame, new ByClassChooser(BezierAnimationPanel.class));</span>
<span class="line-modified">!         initializePanelButtons(frame);</span>
<span class="line-modified">!         checkBackgroundColorChooser();</span>
<span class="line-modified">!         checkGradient1ColorChooser();</span>
<span class="line-modified">!         checkGradient2ColorChooser();</span>
<span class="line-modified">!         checkPerimeterColorChooser();</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkBackgroundColorChooser() throws Exception {</span>
<span class="line-added">+         basicCheck(backgroundButton, BezierColor.BACKGROUND);</span>
<span class="line-added">+         checkAllColorChoosers(backgroundButton);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkGradient1ColorChooser() throws Exception {</span>
<span class="line-added">+         basicCheck(gradient1Button, BezierColor.GRADIENT_A);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkGradient2ColorChooser() throws Exception {</span>
<span class="line-added">+         basicCheck(gradient2Button, BezierColor.GRADIENT_B);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkPerimeterColorChooser() throws Exception {</span>
<span class="line-added">+         basicCheck(perimeterButton, BezierColor.OUTER);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void pushButtonAndInitialize(JButtonOperator jbo) throws InterruptedException {</span>
<span class="line-added">+         // Wait for focus to return to last focused button</span>
<span class="line-added">+         lastFocusedButton.waitHasFocus();</span>
<span class="line-added">+         jbo.pushNoBlock();</span>
<span class="line-added">+         lastFocusedButton = jbo;</span>
<span class="line-added">+         // Wait till the ColorChooserDemo Dialog Opens</span>
<span class="line-added">+         new DialogWaiter().waitDialog(CHOOSER_TITLE, false, false);</span>
<span class="line-added">+         initializeDialog();</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void initializePanelButtons(JFrameOperator frame) {</span>
<span class="line-added">+         backgroundButton = new JButtonOperator(frame, BACKGROUND);</span>
<span class="line-added">+         gradient1Button = new JButtonOperator(frame, GRADIENT_1);</span>
<span class="line-added">+         gradient2Button = new JButtonOperator(frame, GRADIENT_2);</span>
<span class="line-added">+         perimeterButton = new JButtonOperator(frame, PERIMETER);</span>
<span class="line-added">+         lastFocusedButton = backgroundButton;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void initializeDialog() {</span>
<span class="line-added">+         colorChooserDialog = new JDialogOperator(CHOOSER_TITLE);</span>
<span class="line-added">+         tabOperator = new JTabbedPaneOperator(colorChooserDialog);</span>
<span class="line-added">+         colorChooser = new JColorChooserOperator(colorChooserDialog);</span>
<span class="line-added">+         okButton = new JButtonOperator(colorChooserDialog, OK_BUTTON_TITLE);</span>
<span class="line-added">+         cancelButton = new JButtonOperator(colorChooserDialog, CANCEL_BUTTON_TITLE);</span>
<span class="line-added">+         resetButton = new JButtonOperator(colorChooserDialog, RESET_BUTTON_TITLE);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void basicCheck(JButtonOperator jbo, BezierColor bezierColor) throws Exception {</span>
<span class="line-added">+         Color testColor = new Color(100, 26, 155);</span>
<span class="line-added">+         Color testColor2 = new Color(10, 40, 50);</span>
<span class="line-added">+         checkDefaultColorChooser(jbo, testColor, bezierColor);</span>
<span class="line-added">+         checkCancelButton(jbo, testColor2);</span>
<span class="line-added">+         checkResetButton(jbo, testColor2);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkDefaultColorChooser(JButtonOperator jbo, Color testColor, BezierColor bezierColor)</span>
<span class="line-added">+             throws Exception {</span>
<span class="line-added">+         BezierAnimationPanel bezierPanel;</span>
<span class="line-added">+         pushButtonAndInitialize(jbo);</span>
<span class="line-added">+         // Check ColorChooser color is being set and used accordingly</span>
<span class="line-added">+         // in the animation panel</span>
<span class="line-added">+         setAndWaitColor(testColor);</span>
<span class="line-added">+         pushButtonAndWaitDialogClosed(okButton);</span>
<span class="line-added">+         bezierPanel = (BezierAnimationPanel) bezierAnimationPanel.getSource();</span>
<span class="line-added">+         colorChooser.waitStateOnQueue(jColorChooser -&gt; (bezierPanel.getBezierColor(bezierColor).equals(testColor)));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkCancelButton(JButtonOperator jbo, Color testColor) throws Exception {</span>
<span class="line-added">+         pushButtonAndInitialize(jbo);</span>
<span class="line-added">+         setAndWaitColor(testColor);</span>
<span class="line-added">+         pushButtonAndWaitDialogClosed(cancelButton);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkResetButton(JButtonOperator jbo, Color testColor) throws Exception {</span>
<span class="line-added">+         pushButtonAndInitialize(jbo);</span>
<span class="line-added">+         Color initialColor = colorChooser.getColor();</span>
<span class="line-added">+         setAndWaitColor(testColor);</span>
<span class="line-added">+         resetButton.push();</span>
<span class="line-added">+         waitJColorChooserColor(initialColor);</span>
<span class="line-added">+         pushButtonAndWaitDialogClosed(okButton);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkAllColorChoosers(JButtonOperator jbo) throws Exception {</span>
<span class="line-added">+         pushButtonAndInitialize(jbo);</span>
<span class="line-added">+         checkHSV();</span>
<span class="line-added">+         checkHSL();</span>
<span class="line-added">+         checkRGB();</span>
<span class="line-added">+         checkCMYK();</span>
<span class="line-added">+         pushButtonAndWaitDialogClosed(okButton);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void waitJColorChooserColor(Color expectedColor) {</span>
<span class="line-added">+         colorChooser.waitStateOnQueue(jColorChooser -&gt; colorChooser.getColor().equals(expectedColor));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void setAndWaitColor(Color color) {</span>
<span class="line-added">+         colorChooser.setColor(color);</span>
<span class="line-added">+         // Wait for the Color to be set</span>
<span class="line-added">+         waitJColorChooserColor(color);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void resetColor() {</span>
<span class="line-added">+         colorChooser.setColor(resetColor);</span>
<span class="line-added">+         // Wait for the Color to be reset</span>
<span class="line-added">+         waitJColorChooserColor(resetColor);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkHSV() {</span>
<span class="line-added">+         tabOperator.selectPage(HSV);</span>
<span class="line-added">+         initializeSliderAndSpinner(HSV_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-added">+         resetColor();</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSV_SATURATION_INDEX], 50, new Color(125, 62, 62));</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSV_VALUE_INDEX], 80, new Color(204, 102, 102));</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSV_HUE_INDEX], 50, new Color(204, 187, 102));</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSV_TRANSPARENCY_INDEX], 50, new Color(204, 187, 102, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSV_SATURATION_INDEX], 25, new Color(204, 195, 153, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSV_VALUE_INDEX], 40, new Color(102, 97, 76, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSV_HUE_INDEX], 25, new Color(102, 87, 76, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSV_TRANSPARENCY_INDEX], 100, new Color(102, 87, 76, 0));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkHSL() {</span>
<span class="line-added">+         tabOperator.selectPage(HSL);</span>
<span class="line-added">+         initializeSliderAndSpinner(HSL_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-added">+         resetColor();</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSL_SATURATION_INDEX], 50, new Color(187, 62, 62));</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSL_LIGHTNESS_INDEX], 80, new Color(229, 178, 178));</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSL_HUE_INDEX], 180, new Color(178, 229, 229));</span>
<span class="line-added">+         setAndCheckSlider(sliders[HSL_TRANSPARENCY_INDEX], 50, new Color(178, 229, 229, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSL_SATURATION_INDEX], 25, new Color(191, 216, 216, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSL_LIGHTNESS_INDEX], 40, new Color(76, 127, 127, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSL_HUE_INDEX], 25, new Color(127, 97, 76, 127));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[HSL_TRANSPARENCY_INDEX], 50, new Color(127, 97, 76, 127));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkRGB() {</span>
<span class="line-added">+         String sampleColor = &quot;111111&quot;;</span>
<span class="line-added">+         tabOperator.selectPage(RGB);</span>
<span class="line-added">+         initializeSliderAndSpinner(RGB_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-added">+         JTextFieldOperator colorCode = new JTextFieldOperator(colorChooserDialog, RGB_COLORCODE_TEXT_FIELD_INDEX);</span>
<span class="line-added">+         resetColor();</span>
<span class="line-added">+         setAndCheckSlider(sliders[RGB_GREEN_INDEX], 50, new Color(125, 50, 125, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[RGB_BLUE_INDEX], 80, new Color(125, 50, 80, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[RGB_RED_INDEX], 50, new Color(50, 50, 80, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[RGB_ALPHA_INDEX], 125, new Color(50, 50, 80, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[RGB_GREEN_INDEX], 25, new Color(50, 25, 80, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[RGB_BLUE_INDEX], 40, new Color(50, 25, 40, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[RGB_RED_INDEX], 25, new Color(25, 25, 40, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[RGB_ALPHA_INDEX], 255, new Color(25, 25, 40, 255));</span>
<span class="line-added">+ </span>
<span class="line-added">+         colorCode.setText(sampleColor);</span>
<span class="line-added">+         // Wait for the sampleColor to be set in the color code text field.</span>
<span class="line-added">+         colorCode.waitText(sampleColor);</span>
<span class="line-added">+         colorCode.getFocus();</span>
<span class="line-added">+         colorCode.pressKey(KeyEvent.VK_TAB);</span>
<span class="line-added">+         // Wait for the color to be set</span>
<span class="line-added">+         waitJColorChooserColor(new Color(17, 17, 17, 255));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void checkCMYK() {</span>
<span class="line-added">+         tabOperator.selectPage(CMYK);</span>
<span class="line-added">+         initializeSliderAndSpinner(CMYK_NUMBER_OF_SLIDERS_AND_SPINNERS);</span>
<span class="line-added">+         resetColor();</span>
<span class="line-added">+         setAndCheckSlider(sliders[CMYK_MAGENTA_INDEX], 50, new Color(125, 100, 125, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[CMYK_YELLOW_INDEX], 80, new Color(125, 100, 85, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[CMYK_CYAN_INDEX], 50, new Color(100, 100, 85, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[CMYK_BLACK_INDEX], 50, new Color(164, 164, 140, 255));</span>
<span class="line-added">+         setAndCheckSlider(sliders[CMYK_ALPHA_INDEX], 125, new Color(164, 164, 140, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[CMYK_MAGENTA_INDEX], 25, new Color(164, 184, 140, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[CMYK_YELLOW_INDEX], 40, new Color(164, 184, 172, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[CMYK_CYAN_INDEX], 25, new Color(184, 184, 172, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[CMYK_BLACK_INDEX], 100, new Color(139, 139, 130, 125));</span>
<span class="line-added">+         setAndCheckSpinner(spinners[CMYK_ALPHA_INDEX], 255, new Color(139, 139, 130, 255));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void setAndCheckSlider(JSliderOperator slider, int sliderValue, Color expectedColor) {</span>
<span class="line-added">+         slider.setValue(sliderValue);</span>
<span class="line-added">+         // Wait for slider to attain the specified value</span>
<span class="line-added">+         slider.waitStateOnQueue(jSlider -&gt; slider.getValue() == sliderValue);</span>
<span class="line-added">+         colorChooser.waitStateOnQueue(jColorChooser -&gt; (colorChooser.getColor().equals(expectedColor)));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void setAndCheckSpinner(JSpinnerOperator spinner, int spinnerValue, Color expectedColor) {</span>
<span class="line-added">+         spinner.setValue(spinnerValue);</span>
<span class="line-added">+         // Wait for spinner to attain the specified value</span>
<span class="line-added">+         spinner.waitStateOnQueue(jSpinner -&gt; (int) spinner.getValue() == spinnerValue);</span>
<span class="line-added">+         colorChooser.waitStateOnQueue(jColorChooser -&gt; (colorChooser.getColor().equals(expectedColor)));</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void initializeSliderAndSpinner(int numberOfSlidersAndSpinners) {</span>
<span class="line-added">+         for (int i = 0; i &lt; numberOfSlidersAndSpinners; i++) {</span>
<span class="line-added">+             sliders[i] = new JSliderOperator(colorChooserDialog, i);</span>
<span class="line-added">+             spinners[i] = new JSpinnerOperator(colorChooserDialog, i);</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     private void pushButtonAndWaitDialogClosed(JButtonOperator button) {</span>
<span class="line-added">+         button.push();</span>
<span class="line-added">+         // Wait for the color chooser dialog to close.</span>
<span class="line-added">+         colorChooserDialog.waitClosed();</span>
<span class="line-added">+     }</span>
  }
  
</pre>
<center><a href="ButtonDemoScreenshotTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="EditorPaneDemoTest.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>