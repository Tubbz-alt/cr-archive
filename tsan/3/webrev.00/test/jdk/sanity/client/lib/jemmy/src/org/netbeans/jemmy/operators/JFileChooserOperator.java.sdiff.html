<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/sanity/client/lib/jemmy/src/org/netbeans/jemmy/operators/JFileChooserOperator.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../drivers/DefaultDriverInstaller.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="JInternalFrameOperator.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sanity/client/lib/jemmy/src/org/netbeans/jemmy/operators/JFileChooserOperator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1997, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation. Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
  26 
  27 import java.awt.Component;
  28 import java.awt.Container;
  29 import java.awt.Rectangle;
  30 import java.awt.Window;
  31 import java.awt.event.ActionListener;
  32 import java.io.File;
  33 
  34 import javax.swing.ComboBoxModel;
  35 import javax.swing.Icon;
  36 import javax.swing.JButton;
  37 import javax.swing.JComboBox;
  38 import javax.swing.JComponent;
  39 import javax.swing.JDialog;
  40 import javax.swing.JFileChooser;
  41 import javax.swing.JList;
  42 import javax.swing.JTable;
  43 import javax.swing.JTextField;
  44 import javax.swing.JToggleButton;
  45 import javax.swing.ListModel;
<span class="line-removed">  46 import javax.swing.UIManager;</span>
  47 import javax.swing.filechooser.FileFilter;
  48 import javax.swing.filechooser.FileSystemView;
  49 import javax.swing.filechooser.FileView;
  50 import javax.swing.plaf.FileChooserUI;
  51 import javax.swing.table.TableModel;
  52 
  53 import org.netbeans.jemmy.ComponentChooser;
  54 import org.netbeans.jemmy.ComponentSearcher;
  55 import org.netbeans.jemmy.JemmyException;
  56 import org.netbeans.jemmy.JemmyProperties;
  57 import org.netbeans.jemmy.Outputable;
  58 import org.netbeans.jemmy.TestOut;
  59 import org.netbeans.jemmy.Timeoutable;
  60 import org.netbeans.jemmy.Timeouts;
  61 import org.netbeans.jemmy.Waitable;
  62 import org.netbeans.jemmy.Waiter;

  63 
  64 /**
  65  *
  66  * Class provides methods to cover main JFileChooser component functionality.
  67  * Supports choosers using either JList or JTable as the component showing files.
  68  *
  69  * @author Alexandre Iline (alexandre.iline@oracle.com)
  70  *
  71  */
  72 public class JFileChooserOperator extends JComponentOperator
  73         implements Timeoutable, Outputable {
  74 
  75     private final static long WAIT_LIST_PAINTED_TIMEOUT = 60000;
  76 
  77     private Timeouts timeouts;
  78     private TestOut output;
  79     private ComponentSearcher innerSearcher;
  80 
  81     /**
  82      * Constructor.
</pre>
<hr />
<pre>
 327                     public String getDescription() {
 328                         return &quot;JTextField&quot;;
 329                     }
 330 
 331                     @Override
 332                     public String toString() {
 333                         return &quot;JFileChooserOperator.getPathField.ComponentChooser{description = &quot; + getDescription() + &#39;}&#39;;
 334                     }
 335                 }));
 336     }
 337 
 338     /**
 339      * Returns either a JList or JTable, depending on the implementation.
 340      *
 341      * @return a component being used to display directory content.
 342      */
 343     public Component getFileList() {
 344         int index = 0;
 345         // In GTK and Motif L&amp;F, there are two JLists, one is to list folders
 346         // and second one one is to list files
<span class="line-modified"> 347         if (UIManager.getLookAndFeel().getID().equals(&quot;Motif&quot;)</span>
<span class="line-removed"> 348                 || UIManager.getLookAndFeel().getID().equals(&quot;GTK&quot;)) {</span>
 349             index =1;
 350         }
 351         return innerSearcher.
 352                 findComponent(new ComponentChooser() {
 353                     @Override
 354                     public boolean checkComponent(Component comp) {
 355                         return (comp != null
 356                                 &amp;&amp; (comp instanceof JList || comp instanceof JTable));
 357                     }
 358 
 359                     @Override
 360                     public String getDescription() {
 361                         return &quot;JList or JTable used to show list of files&quot;;
 362                     }
 363 
 364                     @Override
 365                     public String toString() {
 366                         return &quot;JFileChooserOperator.getFileList.ComponentChooser{description = &quot; + getDescription() + &#39;}&#39;;
 367                     }
 368                 }, index);
</pre>
<hr />
<pre>
 428         //upOper.copyEnvironment(this);
 429         //upOper.setOutput(output.createErrorOutput());
 430         //upOper.push();
 431         waitPainted(-1);
 432         return getCurrentDirectory();
 433     }
 434 
 435     /**
 436      * Pushes &quot;Home&quot; button.
 437      *
 438      * @return new current directory
 439      */
 440     public File goHome() {
 441         getQueueTool().waitEmpty();
 442         output.printTrace(&quot;Go home in JFileChooser\n    : &quot;
 443                 + toStringSource());
 444         AbstractButtonOperator homeOper;
 445         // In Windows and Windows Classic L&amp;F, there is no &#39;Go Home&#39; button,
 446         // but there is a toggle button to go desktop. In Windows platform
 447         // &#39;Go Home&#39; button usually navigates to Desktop only.
<span class="line-modified"> 448         if(UIManager.getLookAndFeel().getID().equals(&quot;Windows&quot;)) {</span>
 449             homeOper =new JToggleButtonOperator(this, 1);
 450         } else {
 451             homeOper = new JButtonOperator(getHomeButton());
 452         }
 453         homeOper.copyEnvironment(this);
 454         homeOper.setOutput(output.createErrorOutput());
 455         homeOper.push();
 456         waitPainted(-1);
 457         return getCurrentDirectory();
 458     }
 459 
 460     /**
 461      * Clicks on file in the list.
 462      *
 463      * @param index Ordinal file index.
 464      * @param clickCount click count
 465      */
 466     public void clickOnFile(int index, int clickCount) {
 467         getQueueTool().waitEmpty();
 468         output.printTrace(&quot;Click &quot; + Integer.toString(clickCount)
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation. Oracle designates this
   8  * particular file as subject to the &quot;Classpath&quot; exception as provided
   9  * by Oracle in the LICENSE file that accompanied this code.
  10  *
  11  * This code is distributed in the hope that it will be useful, but WITHOUT
  12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  14  * version 2 for more details (a copy is included in the LICENSE file that
  15  * accompanied this code).
  16  *
  17  * You should have received a copy of the GNU General Public License version
  18  * 2 along with this work; if not, write to the Free Software Foundation,
  19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  20  *
  21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
  26 
  27 import java.awt.Component;
  28 import java.awt.Container;
  29 import java.awt.Rectangle;
  30 import java.awt.Window;
  31 import java.awt.event.ActionListener;
  32 import java.io.File;
  33 
  34 import javax.swing.ComboBoxModel;
  35 import javax.swing.Icon;
  36 import javax.swing.JButton;
  37 import javax.swing.JComboBox;
  38 import javax.swing.JComponent;
  39 import javax.swing.JDialog;
  40 import javax.swing.JFileChooser;
  41 import javax.swing.JList;
  42 import javax.swing.JTable;
  43 import javax.swing.JTextField;
  44 import javax.swing.JToggleButton;
  45 import javax.swing.ListModel;

  46 import javax.swing.filechooser.FileFilter;
  47 import javax.swing.filechooser.FileSystemView;
  48 import javax.swing.filechooser.FileView;
  49 import javax.swing.plaf.FileChooserUI;
  50 import javax.swing.table.TableModel;
  51 
  52 import org.netbeans.jemmy.ComponentChooser;
  53 import org.netbeans.jemmy.ComponentSearcher;
  54 import org.netbeans.jemmy.JemmyException;
  55 import org.netbeans.jemmy.JemmyProperties;
  56 import org.netbeans.jemmy.Outputable;
  57 import org.netbeans.jemmy.TestOut;
  58 import org.netbeans.jemmy.Timeoutable;
  59 import org.netbeans.jemmy.Timeouts;
  60 import org.netbeans.jemmy.Waitable;
  61 import org.netbeans.jemmy.Waiter;
<span class="line-added">  62 import org.netbeans.jemmy.util.LookAndFeel;</span>
  63 
  64 /**
  65  *
  66  * Class provides methods to cover main JFileChooser component functionality.
  67  * Supports choosers using either JList or JTable as the component showing files.
  68  *
  69  * @author Alexandre Iline (alexandre.iline@oracle.com)
  70  *
  71  */
  72 public class JFileChooserOperator extends JComponentOperator
  73         implements Timeoutable, Outputable {
  74 
  75     private final static long WAIT_LIST_PAINTED_TIMEOUT = 60000;
  76 
  77     private Timeouts timeouts;
  78     private TestOut output;
  79     private ComponentSearcher innerSearcher;
  80 
  81     /**
  82      * Constructor.
</pre>
<hr />
<pre>
 327                     public String getDescription() {
 328                         return &quot;JTextField&quot;;
 329                     }
 330 
 331                     @Override
 332                     public String toString() {
 333                         return &quot;JFileChooserOperator.getPathField.ComponentChooser{description = &quot; + getDescription() + &#39;}&#39;;
 334                     }
 335                 }));
 336     }
 337 
 338     /**
 339      * Returns either a JList or JTable, depending on the implementation.
 340      *
 341      * @return a component being used to display directory content.
 342      */
 343     public Component getFileList() {
 344         int index = 0;
 345         // In GTK and Motif L&amp;F, there are two JLists, one is to list folders
 346         // and second one one is to list files
<span class="line-modified"> 347         if (LookAndFeel.isMotif() || LookAndFeel.isGTK()) {</span>

 348             index =1;
 349         }
 350         return innerSearcher.
 351                 findComponent(new ComponentChooser() {
 352                     @Override
 353                     public boolean checkComponent(Component comp) {
 354                         return (comp != null
 355                                 &amp;&amp; (comp instanceof JList || comp instanceof JTable));
 356                     }
 357 
 358                     @Override
 359                     public String getDescription() {
 360                         return &quot;JList or JTable used to show list of files&quot;;
 361                     }
 362 
 363                     @Override
 364                     public String toString() {
 365                         return &quot;JFileChooserOperator.getFileList.ComponentChooser{description = &quot; + getDescription() + &#39;}&#39;;
 366                     }
 367                 }, index);
</pre>
<hr />
<pre>
 427         //upOper.copyEnvironment(this);
 428         //upOper.setOutput(output.createErrorOutput());
 429         //upOper.push();
 430         waitPainted(-1);
 431         return getCurrentDirectory();
 432     }
 433 
 434     /**
 435      * Pushes &quot;Home&quot; button.
 436      *
 437      * @return new current directory
 438      */
 439     public File goHome() {
 440         getQueueTool().waitEmpty();
 441         output.printTrace(&quot;Go home in JFileChooser\n    : &quot;
 442                 + toStringSource());
 443         AbstractButtonOperator homeOper;
 444         // In Windows and Windows Classic L&amp;F, there is no &#39;Go Home&#39; button,
 445         // but there is a toggle button to go desktop. In Windows platform
 446         // &#39;Go Home&#39; button usually navigates to Desktop only.
<span class="line-modified"> 447         if(LookAndFeel.isWindows() || LookAndFeel.isWindowsClassic()) {</span>
 448             homeOper =new JToggleButtonOperator(this, 1);
 449         } else {
 450             homeOper = new JButtonOperator(getHomeButton());
 451         }
 452         homeOper.copyEnvironment(this);
 453         homeOper.setOutput(output.createErrorOutput());
 454         homeOper.push();
 455         waitPainted(-1);
 456         return getCurrentDirectory();
 457     }
 458 
 459     /**
 460      * Clicks on file in the list.
 461      *
 462      * @param index Ordinal file index.
 463      * @param clickCount click count
 464      */
 465     public void clickOnFile(int index, int clickCount) {
 466         getQueueTool().waitEmpty();
 467         output.printTrace(&quot;Click &quot; + Integer.toString(clickCount)
</pre>
</td>
</tr>
</table>
<center><a href="../drivers/DefaultDriverInstaller.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="JInternalFrameOperator.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>