<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/lang/String/LiteralReplace.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../StrictMath/ExactArithTests.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="SpecialCasingTest.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/lang/String/LiteralReplace.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 20,11 ***</span>
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
  /* @test
<span class="line-modified">!  * @bug 8058779 8054307</span>
   * @library /test/lib
   * @build jdk.test.lib.RandomFactory
   * @run testng LiteralReplace
   * @summary Basic tests of String.replace(CharSequence, CharSequence)
   * @key randomness
<span class="line-new-header">--- 20,11 ---</span>
   * or visit www.oracle.com if you need additional information or have any
   * questions.
   */
  
  /* @test
<span class="line-modified">!  * @bug 8058779 8054307 8222955</span>
   * @library /test/lib
   * @build jdk.test.lib.RandomFactory
   * @run testng LiteralReplace
   * @summary Basic tests of String.replace(CharSequence, CharSequence)
   * @key randomness
</pre>
<hr />
<pre>
<span class="line-old-header">*** 77,10 ***</span>
<span class="line-new-header">--- 77,14 ---</span>
              expectedExceptions = {NullPointerException.class})
      public void testNPE(String source, String target, String replacement) {
          source.replace(target, replacement);
      }
  
<span class="line-added">+     @Test(expectedExceptions = {OutOfMemoryError.class})</span>
<span class="line-added">+     public void testOOM() {</span>
<span class="line-added">+         &quot;1&quot;.repeat(65537).replace(&quot;1&quot;, &quot;2&quot;.repeat(65537));</span>
<span class="line-added">+     }</span>
  
      @DataProvider
      public static Object[][] sourceTargetReplacementExpected() {
          return new Object[][] {
              {&quot;aaa&quot;, &quot;aa&quot;, &quot;b&quot;, &quot;ba&quot;},
</pre>
<hr />
<pre>
<span class="line-old-header">*** 102,10 ***</span>
<span class="line-new-header">--- 106,18 ---</span>
              {&quot;aaaaaaaaa&quot;, &quot;aa&quot;, &quot;aa&quot;, &quot;aaaaaaaaa&quot;},
              {&quot;a.c.e.g.&quot;, &quot;.&quot;, &quot;-&quot;, &quot;a-c-e-g-&quot;},
              {&quot;abcdefgh&quot;, &quot;[a-h]&quot;, &quot;X&quot;, &quot;abcdefgh&quot;},
              {&quot;aa+&quot;, &quot;a+&quot;, &quot;&quot;, &quot;a&quot;},
              {&quot;^abc$&quot;, &quot;abc&quot;, &quot;x&quot;, &quot;^x$&quot;},
<span class="line-added">+             {&quot;abc&quot;, &quot;b&quot;, &quot;_&quot;, &quot;a_c&quot;},</span>
<span class="line-added">+             {&quot;abc&quot;, &quot;bc&quot;, &quot;_&quot;, &quot;a_&quot;},</span>
<span class="line-added">+             {&quot;abc&quot;.repeat(65537) + &quot;end&quot;, &quot;b&quot;, &quot;_XYZ_&quot;, &quot;a_XYZ_c&quot;.repeat(65537) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;abc&quot;.repeat(65537) + &quot;end&quot;, &quot;a&quot;, &quot;_&quot;, &quot;_bc&quot;.repeat(65537) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;a&quot;.repeat(65537), &quot;a&quot;, &quot;&quot;, &quot;&quot;},</span>
<span class="line-added">+             {&quot;ab&quot;.repeat(65537), &quot;a&quot;, &quot;&quot;, &quot;b&quot;.repeat(65537)},</span>
<span class="line-added">+             {&quot;ab&quot;.repeat(65537), &quot;ab&quot;, &quot;&quot;, &quot;&quot;},</span>
<span class="line-added">+             {&quot;b&quot; + &quot;ab&quot;.repeat(65537), &quot;ab&quot;, &quot;&quot;, &quot;b&quot;},</span>
  
              // more with non-latin1 characters
              {&quot;\u4e00\u4e00\u4e00&quot;,
               &quot;\u4e00\u4e00&quot;,
               &quot;\u4e01&quot;,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 205,10 ***</span>
<span class="line-new-header">--- 217,46 ---</span>
  
              {&quot;\u4e00\u4e01\u4e02\u4e03\u4e04\u4e05&quot;,
               &quot;\u4e00\u4e01\u4e02\u4e03\u4e04\u4e05&quot;,
               &quot;&quot;,
               &quot;&quot;},
<span class="line-added">+ </span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02&quot;, &quot;\u4e02&quot;, &quot;\u4e01\u4e02\u4e03&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02&quot;, &quot;\u4e04&quot;, &quot;\u4e01\u4e04\u4e03&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02&quot;, &quot;_&quot;, &quot;\u4e01_\u4e03&quot;},</span>
<span class="line-added">+             {&quot;a\u4e02c&quot;, &quot;\u4e02&quot;, &quot;_&quot;, &quot;a_c&quot;},</span>
<span class="line-added">+             {&quot;\u4e01@\u4e03&quot;, &quot;@&quot;, &quot;_&quot;, &quot;\u4e01_\u4e03&quot;},</span>
<span class="line-added">+             {&quot;\u4e01@\u4e03&quot;, &quot;@&quot;, &quot;\u4e02&quot;, &quot;\u4e01\u4e02\u4e03&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02\u4e03&quot;, &quot;\u4e02\u4e03&quot;, &quot;\u4e01\u4e02\u4e03&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02\u4e03&quot;, &quot;\u4e04\u4e05&quot;, &quot;\u4e01\u4e04\u4e05&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02\u4e03&quot;, &quot;\u4e06&quot;, &quot;\u4e01\u4e06&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;, &quot;\u4e02\u4e03&quot;, &quot;&lt;&gt;&quot;, &quot;\u4e01&lt;&gt;&quot;},</span>
<span class="line-added">+             {&quot;@\u4e02\u4e03&quot;, &quot;\u4e02\u4e03&quot;, &quot;&lt;&gt;&quot;, &quot;@&lt;&gt;&quot;},</span>
<span class="line-added">+             {&quot;\u4e01@@&quot;, &quot;\u4e01@&quot;, &quot;&quot;, &quot;@&quot;},</span>
<span class="line-added">+             {&quot;\u4e01@@&quot;, &quot;\u4e01@&quot;, &quot;#&quot;, &quot;#@&quot;},</span>
<span class="line-added">+             {&quot;\u4e01@@&quot;, &quot;\u4e01@&quot;, &quot;\u4e09&quot;, &quot;\u4e09@&quot;},</span>
<span class="line-added">+             {&quot;\u4e01@@&quot;, &quot;\u4e01@&quot;, &quot;#\u4e09&quot;, &quot;#\u4e09@&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;\u4e02&quot;, &quot;\u4e02&quot;, &quot;\u4e01\u4e02\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;\u4e02&quot;, &quot;\u4e04&quot;, &quot;\u4e01\u4e04\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;\u4e02&quot;, &quot;\u4e04\u4e05&quot;, &quot;\u4e01\u4e04\u4e05\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e01\u4e02\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;\u4e02&quot;, &quot;_&quot;, &quot;\u4e01_\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e01_\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;_&quot;, &quot;_&quot;, &quot;\u4e01_\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e01_\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;_&quot;, &quot;\u4e06&quot;, &quot;\u4e01\u4e06\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e01_\u4e03&quot;.repeat(32771) + &quot;end&quot;, &quot;_&quot;, &quot;\u4e06\u4e06&quot;, &quot;\u4e01\u4e06\u4e06\u4e03&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;X_Y&quot;.repeat(32771) + &quot;end&quot;, &quot;_&quot;, &quot;\u4e07&quot;, &quot;X\u4e07Y&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;X_Y&quot;.repeat(32771) + &quot;end&quot;, &quot;_&quot;, &quot;\u4e07\u4e08&quot;, &quot;X\u4e07\u4e08Y&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;X_Y&quot;.repeat(32771) + &quot;end&quot;, &quot;_&quot;, &quot;.\u4e08.&quot;, &quot;X.\u4e08.Y&quot;.repeat(32771) + &quot;end&quot;},</span>
<span class="line-added">+             {&quot;\u4e0a&quot;.repeat(32771), &quot;\u4e0a&quot;, &quot;&quot;, &quot;&quot;},</span>
<span class="line-added">+             {&quot;\u4e0a\u4e0b&quot;.repeat(32771), &quot;\u4e0a&quot;, &quot;&quot;, &quot;\u4e0b&quot;.repeat(32771)},</span>
<span class="line-added">+             {&quot;\u4e0a\u4e0b&quot;.repeat(32771), &quot;\u4e0b&quot;, &quot;&quot;, &quot;\u4e0a&quot;.repeat(32771)},</span>
<span class="line-added">+             {&quot;\u4e0a\u4e0b&quot;.repeat(32771), &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;&quot;},</span>
<span class="line-added">+             {&quot;\u4e0b&quot; + &quot;\u4e0a\u4e0b&quot;.repeat(32771), &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;\u4e0b&quot;},</span>
<span class="line-added">+             {&quot;\u4e0a\u4e0b&quot;.repeat(32771) + &quot;\u4e0a&quot;, &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;\u4e0a&quot;},</span>
<span class="line-added">+             {&quot;\u4e0b&quot; + &quot;\u4e0a\u4e0b&quot;.repeat(32771) + &quot;\u4e0a&quot;, &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;\u4e0b\u4e0a&quot;},</span>
<span class="line-added">+             {&quot;b&quot; + &quot;\u4e0a\u4e0b&quot;.repeat(32771), &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;b&quot;},</span>
<span class="line-added">+             {&quot;\u4e0a\u4e0b&quot;.repeat(32771) + &quot;a&quot;, &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;a&quot;},</span>
<span class="line-added">+             {&quot;b&quot; + &quot;\u4e0a\u4e0b&quot;.repeat(32771) + &quot;a&quot;, &quot;\u4e0a\u4e0b&quot;, &quot;&quot;, &quot;ba&quot;},</span>
          };
      }
  
      @DataProvider
      public static Iterator&lt;Object[]&gt; sourceTargetReplacement() {
</pre>
<center><a href="../StrictMath/ExactArithTests.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="SpecialCasingTest.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>