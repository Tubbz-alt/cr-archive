<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/lang/annotation/AnnotationToStringTest.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../System/LoggerFinder/jdk/DefaultPlatformLoggerTest/DefaultPlatformLoggerTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ParameterAnnotations.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/lang/annotation/AnnotationToStringTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2016, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 25,10 ***</span>
<span class="line-new-header">--- 25,13 ---</span>
   * @test
   * @bug 8162817 8168921
   * @summary Test of toString on normal annotations
   */
  
<span class="line-added">+ // See also the sibling compile-time test</span>
<span class="line-added">+ // test/langtools/tools/javac/processing/model/element/AnnotationToStringTest.java</span>
<span class="line-added">+ </span>
  import java.lang.annotation.*;
  import java.lang.reflect.*;
  import java.util.*;
  
  /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 60,26 ***</span>
      }
  
      @ExpectedString(
          &quot;@MostlyPrimitive(c0=&#39;a&#39;, &quot;+
          &quot;c1=&#39;\\&#39;&#39;, &quot; +
          &quot;i0=1, &quot; +
          &quot;i1=2, &quot; +
          &quot;f0=1.0f, &quot; +
          &quot;f1=0.0f/0.0f, &quot; +
          &quot;d0=0.0, &quot; +
          &quot;d1=1.0/0.0, &quot; +
<span class="line-modified">!         &quot;l0=5, &quot; +</span>
          &quot;l1=9223372036854775807L, &quot; +
          &quot;l2=-9223372036854775808L, &quot; +
<span class="line-modified">!         &quot;l3=-2147483648, &quot; +</span>
          &quot;s0=\&quot;Hello world.\&quot;, &quot; +
          &quot;s1=\&quot;a\\\&quot;b\&quot;, &quot; +
<span class="line-modified">!         &quot;class0=Obj[].class)&quot;)</span>
      @MostlyPrimitive(
          c0=&#39;a&#39;,
          c1=&#39;\&#39;&#39;,
          i0=1,
          i1=2,
          f0=1.0f,
          f1=Float.NaN,
          d0=0.0,
<span class="line-new-header">--- 63,29 ---</span>
      }
  
      @ExpectedString(
          &quot;@MostlyPrimitive(c0=&#39;a&#39;, &quot;+
          &quot;c1=&#39;\\&#39;&#39;, &quot; +
<span class="line-added">+         &quot;b0=(byte)0x01, &quot; +</span>
          &quot;i0=1, &quot; +
          &quot;i1=2, &quot; +
          &quot;f0=1.0f, &quot; +
          &quot;f1=0.0f/0.0f, &quot; +
          &quot;d0=0.0, &quot; +
          &quot;d1=1.0/0.0, &quot; +
<span class="line-modified">!         &quot;l0=5L, &quot; +</span>
          &quot;l1=9223372036854775807L, &quot; +
          &quot;l2=-9223372036854775808L, &quot; +
<span class="line-modified">!         &quot;l3=-2147483648L, &quot; +</span>
          &quot;s0=\&quot;Hello world.\&quot;, &quot; +
          &quot;s1=\&quot;a\\\&quot;b\&quot;, &quot; +
<span class="line-modified">!         &quot;class0=Obj[].class, &quot; +</span>
<span class="line-added">+         &quot;classArray={Obj[].class})&quot;)</span>
      @MostlyPrimitive(
          c0=&#39;a&#39;,
          c1=&#39;\&#39;&#39;,
<span class="line-added">+         b0=1,</span>
          i0=1,
          i1=2,
          f0=1.0f,
          f1=Float.NaN,
          d0=0.0,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 88,11 ***</span>
          l1=Long.MAX_VALUE,
          l2=Long.MIN_VALUE,
          l3=Integer.MIN_VALUE,
          s0=&quot;Hello world.&quot;,
          s1=&quot;a\&quot;b&quot;,
<span class="line-modified">!         class0=Obj[].class</span>
      )
      static class PrimHost{}
  
      private static int classyTest() {
          int failures = 0;
<span class="line-new-header">--- 94,12 ---</span>
          l1=Long.MAX_VALUE,
          l2=Long.MIN_VALUE,
          l3=Integer.MIN_VALUE,
          s0=&quot;Hello world.&quot;,
          s1=&quot;a\&quot;b&quot;,
<span class="line-modified">!         class0=Obj[].class,</span>
<span class="line-added">+         classArray={Obj[].class}</span>
      )
      static class PrimHost{}
  
      private static int classyTest() {
          int failures = 0;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 105,37 ***</span>
          return failures;
      }
  
      static class AnnotationHost {
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(value=Obj.class)&quot;)</span>
<span class="line-modified">!         @Classy(value=Obj.class)</span>
          public int f0;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(value=Obj[].class)&quot;)</span>
<span class="line-modified">!         @Classy(value=Obj[].class)</span>
          public int f1;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(value=Obj[][].class)&quot;)</span>
<span class="line-modified">!         @Classy(value=Obj[][].class)</span>
          public int f2;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(value=Obj[][][].class)&quot;)</span>
<span class="line-modified">!         @Classy(value=Obj[][][].class)</span>
          public int f3;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(value=int.class)&quot;)</span>
<span class="line-modified">!         @Classy(value=int.class)</span>
          public int f4;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(value=int[][][].class)&quot;)</span>
<span class="line-modified">!         @Classy(value=int[][][].class)</span>
          public int f5;
      }
  
      /**
       * Each field should have two annotations, the first being
<span class="line-new-header">--- 112,37 ---</span>
          return failures;
      }
  
      static class AnnotationHost {
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(Obj.class)&quot;)</span>
<span class="line-modified">!         @Classy(Obj.class)</span>
          public int f0;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(Obj[].class)&quot;)</span>
<span class="line-modified">!         @Classy(Obj[].class)</span>
          public int f1;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(Obj[][].class)&quot;)</span>
<span class="line-modified">!         @Classy(Obj[][].class)</span>
          public int f2;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(Obj[][][].class)&quot;)</span>
<span class="line-modified">!         @Classy(Obj[][][].class)</span>
          public int f3;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(int.class)&quot;)</span>
<span class="line-modified">!         @Classy(int.class)</span>
          public int f4;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@Classy(int[][][].class)&quot;)</span>
<span class="line-modified">!         @Classy(int[][][].class)</span>
          public int f5;
      }
  
      /**
       * Each field should have two annotations, the first being
</pre>
<hr />
<pre>
<span class="line-old-header">*** 152,64 ***</span>
          return failures;
      }
  
      static class ArrayAnnotationHost {
          @ExpectedString(
<span class="line-modified">!        &quot;@BooleanArray(value={true, false, true})&quot;)</span>
<span class="line-modified">!         @BooleanArray(value={true, false, true})</span>
          public boolean[]   f0;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@FloatArray(value={3.0f, 4.0f, 0.0f/0.0f, -1.0f/0.0f, 1.0f/0.0f})&quot;)</span>
<span class="line-modified">!         @FloatArray(value={3.0f, 4.0f, Float.NaN, Float.NEGATIVE_INFINITY, Float.POSITIVE_INFINITY})</span>
          public float[]     f1;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@DoubleArray(value={1.0, 2.0, 0.0/0.0, 1.0/0.0, -1.0/0.0})&quot;)</span>
<span class="line-modified">!         @DoubleArray(value={1.0, 2.0, Double.NaN, Double.POSITIVE_INFINITY, Double.NEGATIVE_INFINITY,})</span>
          public double[]    f2;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@ByteArray(value={10, 11, 12})&quot;)</span>
<span class="line-modified">!         @ByteArray(value={10, 11, 12})</span>
          public byte[]      f3;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@ShortArray(value={0, 4, 5})&quot;)</span>
<span class="line-modified">!         @ShortArray(value={0, 4, 5})</span>
          public short[]     f4;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@CharArray(value={&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;\\&#39;&#39;})&quot;)</span>
<span class="line-modified">!         @CharArray(value={&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;\&#39;&#39;})</span>
          public char[]      f5;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@IntArray(value={1})&quot;)</span>
<span class="line-modified">!         @IntArray(value={1})</span>
          public int[]       f6;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@LongArray(value={-9223372036854775808L, -2147483649L, -2147483648,&quot; +</span>
<span class="line-modified">!                 &quot; -2147483647, 2147483648L, 9223372036854775807L})&quot;)</span>
<span class="line-modified">!         @LongArray(value={Long.MIN_VALUE, Integer.MIN_VALUE-1L, Integer.MIN_VALUE,</span>
                  -Integer.MAX_VALUE, Integer.MAX_VALUE+1L, Long.MAX_VALUE})
          public long[]      f7;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@StringArray(value={\&quot;A\&quot;, \&quot;B\&quot;, \&quot;C\&quot;, \&quot;\\\&quot;Quote\\\&quot;\&quot;})&quot;)</span>
<span class="line-modified">!         @StringArray(value={&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;\&quot;Quote\&quot;&quot;})</span>
          public String[]    f8;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@ClassArray(value={int.class, Obj[].class})&quot;)</span>
<span class="line-modified">!         @ClassArray(value={int.class, Obj[].class})</span>
          public Class&lt;?&gt;[]  f9;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@EnumArray(value={SOURCE})&quot;)</span>
<span class="line-modified">!         @EnumArray(value={RetentionPolicy.SOURCE})</span>
          public RetentionPolicy[]  f10;
      }
  }
  
  // ------------ Supporting types ------------
<span class="line-new-header">--- 159,64 ---</span>
          return failures;
      }
  
      static class ArrayAnnotationHost {
          @ExpectedString(
<span class="line-modified">!        &quot;@BooleanArray({true, false, true})&quot;)</span>
<span class="line-modified">!         @BooleanArray({true, false, true})</span>
          public boolean[]   f0;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@FloatArray({3.0f, 4.0f, 0.0f/0.0f, -1.0f/0.0f, 1.0f/0.0f})&quot;)</span>
<span class="line-modified">!         @FloatArray({3.0f, 4.0f, Float.NaN, Float.NEGATIVE_INFINITY, Float.POSITIVE_INFINITY})</span>
          public float[]     f1;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@DoubleArray({1.0, 2.0, 0.0/0.0, 1.0/0.0, -1.0/0.0})&quot;)</span>
<span class="line-modified">!         @DoubleArray({1.0, 2.0, Double.NaN, Double.POSITIVE_INFINITY, Double.NEGATIVE_INFINITY,})</span>
          public double[]    f2;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@ByteArray({(byte)0x0a, (byte)0x0b, (byte)0x0c})&quot;)</span>
<span class="line-modified">!         @ByteArray({10, 11, 12})</span>
          public byte[]      f3;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@ShortArray({0, 4, 5})&quot;)</span>
<span class="line-modified">!         @ShortArray({0, 4, 5})</span>
          public short[]     f4;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@CharArray({&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;\\&#39;&#39;})&quot;)</span>
<span class="line-modified">!         @CharArray({&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;\&#39;&#39;})</span>
          public char[]      f5;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@IntArray({1})&quot;)</span>
<span class="line-modified">!         @IntArray({1})</span>
          public int[]       f6;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@LongArray({-9223372036854775808L, -2147483649L, -2147483648L,&quot; +</span>
<span class="line-modified">!                 &quot; -2147483647L, 2147483648L, 9223372036854775807L})&quot;)</span>
<span class="line-modified">!         @LongArray({Long.MIN_VALUE, Integer.MIN_VALUE-1L, Integer.MIN_VALUE,</span>
                  -Integer.MAX_VALUE, Integer.MAX_VALUE+1L, Long.MAX_VALUE})
          public long[]      f7;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@StringArray({\&quot;A\&quot;, \&quot;B\&quot;, \&quot;C\&quot;, \&quot;\\\&quot;Quote\\\&quot;\&quot;})&quot;)</span>
<span class="line-modified">!         @StringArray({&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;\&quot;Quote\&quot;&quot;})</span>
          public String[]    f8;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@ClassArray({int.class, Obj[].class})&quot;)</span>
<span class="line-modified">!         @ClassArray({int.class, Obj[].class})</span>
          public Class&lt;?&gt;[]  f9;
  
          @ExpectedString(
<span class="line-modified">!        &quot;@EnumArray({SOURCE})&quot;)</span>
<span class="line-modified">!         @EnumArray({RetentionPolicy.SOURCE})</span>
          public RetentionPolicy[]  f10;
      }
  }
  
  // ------------ Supporting types ------------
</pre>
<hr />
<pre>
<span class="line-old-header">*** 283,10 ***</span>
<span class="line-new-header">--- 290,11 ---</span>
  
  @Retention(RetentionPolicy.RUNTIME)
  @interface MostlyPrimitive {
      char   c0();
      char   c1();
<span class="line-added">+     byte   b0();</span>
      int    i0();
      int    i1();
      float  f0();
      float  f1();
      double d0();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 296,6 ***</span>
<span class="line-new-header">--- 304,7 ---</span>
      long   l2();
      long   l3();
      String s0();
      String s1();
      Class&lt;?&gt; class0();
<span class="line-added">+     Class&lt;?&gt;[] classArray();</span>
  }
</pre>
<center><a href="../System/LoggerFinder/jdk/DefaultPlatformLoggerTest/DefaultPlatformLoggerTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ParameterAnnotations.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>