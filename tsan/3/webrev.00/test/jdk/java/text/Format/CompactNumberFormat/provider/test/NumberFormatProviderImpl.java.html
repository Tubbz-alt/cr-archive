<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/jdk/java/text/Format/CompactNumberFormat/provider/test/NumberFormatProviderImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 package test;
 24 
 25 import java.text.CompactNumberFormat;
 26 import java.text.DecimalFormatSymbols;
 27 import java.text.NumberFormat;
 28 import java.text.spi.NumberFormatProvider;
 29 import java.util.Locale;
 30 
 31 public class NumberFormatProviderImpl extends NumberFormatProvider {
 32     private static final Locale QAA = Locale.forLanguageTag(&quot;qaa&quot;);
 33     private static final Locale QAB = Locale.forLanguageTag(&quot;qab&quot;);
 34     private static final Locale[] locales = {QAA, QAB};
 35 
 36     private static final String[] oldPattern = {
 37         // old US short compact format
 38         &quot;&quot;,
 39         &quot;&quot;,
 40         &quot;&quot;,
 41         &quot;0K&quot;,
 42         &quot;00K&quot;,
 43         &quot;000K&quot;,
 44         &quot;0M&quot;,
 45         &quot;00M&quot;,
 46         &quot;000M&quot;,
 47         &quot;0B&quot;,
 48         &quot;00B&quot;,
 49         &quot;000B&quot;,
 50         &quot;0T&quot;,
 51         &quot;00T&quot;,
 52         &quot;000T&quot;
 53     };
 54 
 55     private static final String[] newPattern = {
 56         &quot;&quot;,
 57         &quot;&quot;,
 58         &quot;&quot;,
 59         &quot;{one:0K;(0K) two:0KK few:0KKK other:0KKKK}&quot;,
 60         &quot;&quot;,
 61         &quot;&quot;,
 62         &quot;{one:0&#39; &#39;M;(0&#39; &#39;M) two:0&#39; &#39;MM;(0&#39; &#39;MM) few:0&#39; &#39;MMM other:0&#39; &#39;MMMM}&quot;
 63     };
 64 
 65     @Override
 66     public NumberFormat getCurrencyInstance(Locale locale) {
 67         return null;
 68     }
 69 
 70     @Override
 71     public NumberFormat getIntegerInstance(Locale locale) {
 72         return null;
 73     }
 74 
 75     @Override
 76     public NumberFormat getNumberInstance(Locale locale) {
 77         return null;
 78     }
 79 
 80     @Override
 81     public NumberFormat getPercentInstance(Locale locale) {
 82         return null;
 83     }
 84 
 85     @Override
 86     public NumberFormat getCompactNumberInstance(Locale locale,
 87                             NumberFormat.Style style) {
 88         if (locale.equals(QAB)) {
 89             return new CompactNumberFormat(
 90                 &quot;#&quot;,
 91                 DecimalFormatSymbols.getInstance(locale),
 92                 newPattern,
 93                 &quot;one:v = 0 and i % 100 = 1;&quot; +
 94                 &quot;two:v = 0 and i % 100 = 2;&quot; +
 95                 &quot;few:v = 0 and i % 100 = 3..4 or v != 0;&quot; +
 96                 &quot;other:&quot;);
 97         } else if (locale.equals(QAA)) {
 98             return new CompactNumberFormat(
 99                 &quot;#&quot;,
100                 DecimalFormatSymbols.getInstance(locale),
101                 oldPattern);
102         } else {
103             throw new RuntimeException(&quot;unsupported locale&quot;);
104         }
105     }
106 
107     @Override
108     public Locale[] getAvailableLocales() {
109         return locales;
110     }
111 }
    </pre>
  </body>
</html>