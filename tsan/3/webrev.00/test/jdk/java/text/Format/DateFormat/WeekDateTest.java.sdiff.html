<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/text/Format/DateFormat/WeekDateTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../CompactNumberFormat/TestUExtensionOverride.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../DecimalFormat/FormatMicroBenchmark.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/text/Format/DateFormat/WeekDateTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2010, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
120     // Non-lenient mode test
121     private static void nonLenientTest(String[] data) {
122         ywdFormat.setLenient(false);
123         for (String date : data) {
124             try {
125                 Date d = ywdFormat.parse(date);
126                 throw new RuntimeException(&quot;No ParseException thrown with &quot; + date);
127             } catch (ParseException e) {
128                 // OK
129             }
130         }
131         ywdFormat.setLenient(true);
132     }
133 
134 
135     private static void noWeekDateSupport() throws Exception {
136         // Tests with Japanese Imperial Calendar that doesn&#39;t support week dates.
137         Calendar jcal = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;),
138                                              new Locale(&quot;ja&quot;, &quot;JP&quot;, &quot;JP&quot;));
139 
<span class="line-modified">140         String format = &quot;2-W01-2&quot;; // 2019-12-31 == N1-12-31</span>
141         int expectedYear = 2019;
<span class="line-modified">142         // Check the current era, Heisei or NewEra</span>
143         if (System.currentTimeMillis() &lt; 1556668800000L) {
144             format = &quot;21-W01-3&quot;; // 2008-12-31 == H20-12-31
145             expectedYear = 2008;
146         }
147         jcal.setFirstDayOfWeek(MONDAY);
148         jcal.setMinimalDaysInFirstWeek(4);
149         SimpleDateFormat sdf = new SimpleDateFormat(&quot;Y-&#39;W&#39;ww-u&quot;);
150         sdf.setCalendar(jcal);
151         Date d = sdf.parse(format);
152         GregorianCalendar gcal = newCalendar();
153         gcal.setTime(d);
154         if (gcal.get(YEAR) != expectedYear
155             || gcal.get(MONTH) != DECEMBER
156             || gcal.get(DAY_OF_MONTH) != 31) {
157             String s = String.format(&quot;noWeekDateSupport: got %04d-%02d-%02d, expected %4d-12-31%n&quot;,
158                                      gcal.get(YEAR),
159                                      gcal.get(MONTH)+1,
160                                      gcal.get(DAY_OF_MONTH),
161                                      expectedYear);
162             throw new RuntimeException(s);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2010, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
120     // Non-lenient mode test
121     private static void nonLenientTest(String[] data) {
122         ywdFormat.setLenient(false);
123         for (String date : data) {
124             try {
125                 Date d = ywdFormat.parse(date);
126                 throw new RuntimeException(&quot;No ParseException thrown with &quot; + date);
127             } catch (ParseException e) {
128                 // OK
129             }
130         }
131         ywdFormat.setLenient(true);
132     }
133 
134 
135     private static void noWeekDateSupport() throws Exception {
136         // Tests with Japanese Imperial Calendar that doesn&#39;t support week dates.
137         Calendar jcal = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;),
138                                              new Locale(&quot;ja&quot;, &quot;JP&quot;, &quot;JP&quot;));
139 
<span class="line-modified">140         String format = &quot;2-W01-2&quot;; // 2019-12-31 == R1-12-31</span>
141         int expectedYear = 2019;
<span class="line-modified">142         // Check the current era, Heisei or Reiwa</span>
143         if (System.currentTimeMillis() &lt; 1556668800000L) {
144             format = &quot;21-W01-3&quot;; // 2008-12-31 == H20-12-31
145             expectedYear = 2008;
146         }
147         jcal.setFirstDayOfWeek(MONDAY);
148         jcal.setMinimalDaysInFirstWeek(4);
149         SimpleDateFormat sdf = new SimpleDateFormat(&quot;Y-&#39;W&#39;ww-u&quot;);
150         sdf.setCalendar(jcal);
151         Date d = sdf.parse(format);
152         GregorianCalendar gcal = newCalendar();
153         gcal.setTime(d);
154         if (gcal.get(YEAR) != expectedYear
155             || gcal.get(MONTH) != DECEMBER
156             || gcal.get(DAY_OF_MONTH) != 31) {
157             String s = String.format(&quot;noWeekDateSupport: got %04d-%02d-%02d, expected %4d-12-31%n&quot;,
158                                      gcal.get(YEAR),
159                                      gcal.get(MONTH)+1,
160                                      gcal.get(DAY_OF_MONTH),
161                                      expectedYear);
162             throw new RuntimeException(s);
</pre>
</td>
</tr>
</table>
<center><a href="../CompactNumberFormat/TestUExtensionOverride.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../DecimalFormat/FormatMicroBenchmark.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>