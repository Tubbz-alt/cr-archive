<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/text/Format/CompactNumberFormat/TestCompactNumber.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../Bidi/Bug7051769.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestEquality.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/text/Format/CompactNumberFormat/TestCompactNumber.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 /*
 24  * @test
<span class="line-modified"> 25  * @bug 8177552 8217721</span>
 26  * @summary Checks the functioning of compact number format
 27  * @modules jdk.localedata
 28  * @run testng/othervm TestCompactNumber
 29  */
 30 import java.math.BigDecimal;
 31 import java.math.BigInteger;
 32 import java.text.FieldPosition;
 33 import java.text.Format;
 34 import java.text.NumberFormat;
 35 import java.text.ParseException;
 36 import java.text.ParsePosition;
 37 import java.util.Locale;
 38 import java.util.stream.Stream;
 39 import static org.testng.Assert.*;
 40 import org.testng.annotations.DataProvider;
 41 import org.testng.annotations.Test;
 42 
 43 public class TestCompactNumber {
 44 
 45     private static final NumberFormat FORMAT_DZ_LONG = NumberFormat
</pre>
<hr />
<pre>
 58             .getCompactNumberInstance(Locale.JAPAN, NumberFormat.Style.SHORT);
 59 
 60     private static final NumberFormat FORMAT_IT_SHORT = NumberFormat
 61             .getCompactNumberInstance(new Locale(&quot;it&quot;), NumberFormat.Style.SHORT);
 62 
 63     private static final NumberFormat FORMAT_CA_LONG = NumberFormat
 64             .getCompactNumberInstance(new Locale(&quot;ca&quot;), NumberFormat.Style.LONG);
 65 
 66     private static final NumberFormat FORMAT_AS_LONG = NumberFormat
 67             .getCompactNumberInstance(new Locale(&quot;as&quot;), NumberFormat.Style.LONG);
 68 
 69     private static final NumberFormat FORMAT_BRX_SHORT = NumberFormat
 70             .getCompactNumberInstance(new Locale(&quot;brx&quot;), NumberFormat.Style.SHORT);
 71 
 72     private static final NumberFormat FORMAT_SW_LONG = NumberFormat
 73             .getCompactNumberInstance(new Locale(&quot;sw&quot;), NumberFormat.Style.LONG);
 74 
 75     private static final NumberFormat FORMAT_SE_SHORT = NumberFormat
 76             .getCompactNumberInstance(new Locale(&quot;se&quot;), NumberFormat.Style.SHORT);
 77 






 78     @DataProvider(name = &quot;format&quot;)
 79     Object[][] compactFormatData() {
 80         return new Object[][]{
 81             // compact number format instance, number to format, formatted output
 82             {FORMAT_DZ_LONG, 1000.09, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55&quot;
 83                 + &quot;\u0FB2\u0F42 \u0F21&quot;},
 84             {FORMAT_DZ_LONG, -999.99, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55&quot;
 85                 + &quot;\u0FB2\u0F42 \u0F21&quot;},
 86             {FORMAT_DZ_LONG, -0.0, &quot;-\u0F20&quot;},
 87             {FORMAT_DZ_LONG, 3000L, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55&quot;
 88                 + &quot;\u0FB2\u0F42 \u0F23&quot;},
 89             {FORMAT_DZ_LONG, new BigInteger(&quot;12345678901234567890&quot;), &quot;\u0F51&quot;
 90                 + &quot;\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62\u0F0B\u0F66&quot;
 91                 + &quot;\u0F0B\u0F61\u0F0B \u0F21\u0F22\u0F23\u0F24\u0F25\u0F27&quot;},
 92             // negative
 93             {FORMAT_DZ_LONG, new BigInteger(&quot;-12345678901234567890&quot;), &quot;-\u0F51&quot;
 94                 + &quot;\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62\u0F0B\u0F66&quot;
 95                 + &quot;\u0F0B\u0F61\u0F0B \u0F21\u0F22\u0F23\u0F24\u0F25\u0F27&quot;},
 96             {FORMAT_DZ_LONG, new BigDecimal(&quot;12345678901234567890.89&quot;), &quot;\u0F51&quot;
 97                 + &quot;\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62\u0F0B\u0F66&quot;
</pre>
<hr />
<pre>
231             {FORMAT_JA_JP_SHORT, new BigDecimal(&quot;12345678901234567890.89&quot;),
232                 &quot;12345679\u5146&quot;},
233             // less than 1000 no suffix
234             {FORMAT_IT_SHORT, 499, &quot;499&quot;},
235             // Boundary number
236             {FORMAT_IT_SHORT, 1000, &quot;1.000&quot;},
237             // Long path
238             {FORMAT_IT_SHORT, 3000000L, &quot;3\u00a0Mln&quot;},
239             // Double path
240             {FORMAT_IT_SHORT, 3000000.0, &quot;3\u00a0Mln&quot;},
241             // BigInteger path
242             {FORMAT_IT_SHORT, new BigInteger(&quot;12345678901234567890&quot;),
243                 &quot;12345679\u00a0Bln&quot;},
244             // BigDecimal path
245             {FORMAT_IT_SHORT, new BigDecimal(&quot;12345678901234567890.89&quot;),
246                 &quot;12345679\u00a0Bln&quot;},
247             {FORMAT_CA_LONG, 999, &quot;999&quot;},
248             {FORMAT_CA_LONG, 999.99, &quot;1 miler&quot;},
249             {FORMAT_CA_LONG, 99000, &quot;99 milers&quot;},
250             {FORMAT_CA_LONG, 330000, &quot;330 milers&quot;},
<span class="line-modified">251             {FORMAT_CA_LONG, 3000.90, &quot;3 miler&quot;},</span>
252             {FORMAT_CA_LONG, 1000000, &quot;1 mili\u00f3&quot;},
253             {FORMAT_CA_LONG, new BigInteger(&quot;12345678901234567890&quot;),
254                 &quot;12345679 bilions&quot;},
255             {FORMAT_CA_LONG, new BigDecimal(&quot;12345678901234567890.89&quot;),
256                 &quot;12345679 bilions&quot;},
257             {FORMAT_AS_LONG, 5000.0, &quot;\u09eb \u09b9\u09be\u099c\u09be\u09f0&quot;},
258             {FORMAT_AS_LONG, 50000.0, &quot;\u09eb\u09e6 \u09b9\u09be\u099c\u09be\u09f0&quot;},
259             {FORMAT_AS_LONG, 500000.0, &quot;\u09eb \u09b2\u09be\u0996&quot;},
260             {FORMAT_AS_LONG, 5000000.0, &quot;\u09eb \u09a8\u09bf\u09af\u09c1\u09a4&quot;},
261             {FORMAT_AS_LONG, 50000000.0, &quot;\u09eb\u09e6 \u09a8\u09bf\u09af\u09c1\u09a4&quot;},
262             {FORMAT_AS_LONG, 500000000.0, &quot;\u09eb\u09e6\u09e6 \u09a8\u09bf\u09af\u09c1\u09a4&quot;},
263             {FORMAT_AS_LONG, 5000000000.0, &quot;\u09eb \u09b6\u09a4 \u0995\u09cb\u099f\u09bf&quot;},
264             {FORMAT_AS_LONG, 50000000000.0, &quot;\u09eb\u09e6 \u09b6\u09a4 \u0995\u09cb\u099f\u09bf&quot;},
265             {FORMAT_AS_LONG, 500000000000.0, &quot;\u09eb\u09e6\u09e6 \u09b6\u09a4 \u0995\u09cb\u099f\u09bf&quot;},
266             {FORMAT_AS_LONG, 5000000000000.0, &quot;\u09eb \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
267             {FORMAT_AS_LONG, 50000000000000.0, &quot;\u09eb\u09e6 \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
268             {FORMAT_AS_LONG, 500000000000000.0, &quot;\u09eb\u09e6\u09e6 \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
269             {FORMAT_AS_LONG, 5000000000000000.0, &quot;\u09eb\u09e6\u09e6\u09e6 \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
270             {FORMAT_AS_LONG, new BigInteger(&quot;12345678901234567890&quot;),
271                 &quot;\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ef \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
</pre>
<hr />
<pre>
303             // No compact form
304             {FORMAT_SE_SHORT, 999, &quot;999&quot;},
305             // Long
306             {FORMAT_SE_SHORT, 8000000L, &quot;8\u00a0mn&quot;},
307             // Double
308             {FORMAT_SE_SHORT, 8000.98, &quot;8\u00a0dt&quot;},
309             // Big integer
310             {FORMAT_SE_SHORT, new BigInteger(&quot;12345678901234567890&quot;), &quot;12345679\u00a0bn&quot;},
311             // Big decimal
312             {FORMAT_SE_SHORT, new BigDecimal(&quot;12345678901234567890.98&quot;), &quot;12345679\u00a0bn&quot;},
313             // Negatives
314             // No compact form
315             {FORMAT_SE_SHORT, -999, &quot;\u2212999&quot;},
316             // Long
317             {FORMAT_SE_SHORT, -8000000L, &quot;\u22128\u00a0mn&quot;},
318             // Double
319             {FORMAT_SE_SHORT, -8000.98, &quot;\u22128\u00a0dt&quot;},
320             // BigInteger
321             {FORMAT_SE_SHORT, new BigInteger(&quot;-12345678901234567890&quot;), &quot;\u221212345679\u00a0bn&quot;},
322             // BigDecimal
<span class="line-modified">323             {FORMAT_SE_SHORT, new BigDecimal(&quot;-12345678901234567890.98&quot;), &quot;\u221212345679\u00a0bn&quot;},};</span>













324     }
325 
326     @DataProvider(name = &quot;parse&quot;)
327     Object[][] compactParseData() {
328         return new Object[][]{
329                 // compact number format instance, string to parse, parsed number, return type
330                 {FORMAT_DZ_LONG, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
331                         + &quot;\u0F42 \u0F21&quot;, 1000L, Long.class},
332                 {FORMAT_DZ_LONG, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
333                         + &quot;\u0F42 \u0F23&quot;, -3000L, Long.class},
334                 {FORMAT_DZ_LONG, &quot;\u0F51\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62&quot;
335                         + &quot;\u0F0B\u0F66\u0F0B\u0F61\u0F0B \u0F21&quot;
336                         + &quot;\u0F22\u0F23\u0F24\u0F25\u0F27&quot;, 1.23457E19, Double.class},
337                 {FORMAT_DZ_LONG, &quot;-\u0F51\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62&quot;
338                         + &quot;\u0F0B\u0F66\u0F0B\u0F61\u0F0B \u0F21&quot;
339                         + &quot;\u0F22\u0F23\u0F24\u0F25\u0F27&quot;, -1.23457E19, Double.class},
340                 {FORMAT_EN_US_SHORT, &quot;-0.0&quot;, -0.0, Double.class},
341                 {FORMAT_EN_US_SHORT, &quot;-0&quot;, -0.0, Double.class},
342                 {FORMAT_EN_US_SHORT, &quot;0&quot;, 0L, Long.class},
343                 {FORMAT_EN_US_SHORT, &quot;499&quot;, 499L, Long.class},
</pre>
<hr />
<pre>
392                 {FORMAT_SW_LONG, &quot;elfu -3&quot;, -3000L, Long.class},
393                 {FORMAT_SW_LONG, &quot;499&quot;, 499L, Long.class},
394                 {FORMAT_SW_LONG, &quot;-499&quot;, -499L, Long.class},
395                 {FORMAT_SW_LONG, &quot;elfu 1&quot;, 1000L, Long.class},
396                 {FORMAT_SW_LONG, &quot;elfu 3&quot;, 3000L, Long.class},
397                 {FORMAT_SW_LONG, &quot;elfu -3&quot;, -3000L, Long.class},
398                 {FORMAT_SW_LONG, &quot;elfu 17&quot;, 17000L, Long.class},
399                 {FORMAT_SW_LONG, &quot;trilioni 12345679&quot;, 1.2345679E19, Double.class},
400                 {FORMAT_SW_LONG, &quot;trilioni -12345679&quot;, -1.2345679E19, Double.class},
401                 {FORMAT_SW_LONG, &quot;elfu 599.01&quot;, 599010L, Long.class},
402                 {FORMAT_SW_LONG, &quot;elfu -599.01&quot;, -599010L, Long.class},
403                 {FORMAT_SE_SHORT, &quot;999&quot;, 999L, Long.class},
404                 {FORMAT_SE_SHORT, &quot;8\u00a0mn&quot;, 8000000L, Long.class},
405                 {FORMAT_SE_SHORT, &quot;8\u00a0dt&quot;, 8000L, Long.class},
406                 {FORMAT_SE_SHORT, &quot;12345679\u00a0bn&quot;, 1.2345679E19, Double.class},
407                 {FORMAT_SE_SHORT, &quot;12345679,89\u00a0bn&quot;, 1.2345679890000001E19, Double.class},
408                 {FORMAT_SE_SHORT, &quot;\u2212999&quot;, -999L, Long.class},
409                 {FORMAT_SE_SHORT, &quot;\u22128\u00a0mn&quot;, -8000000L, Long.class},
410                 {FORMAT_SE_SHORT, &quot;\u22128\u00a0dt&quot;, -8000L, Long.class},
411                 {FORMAT_SE_SHORT, &quot;\u221212345679\u00a0bn&quot;, -1.2345679E19, Double.class},
<span class="line-modified">412                 {FORMAT_SE_SHORT, &quot;\u221212345679,89\u00a0bn&quot;, -1.2345679890000001E19, Double.class},};</span>













413     }
414 
415     @DataProvider(name = &quot;exceptionParse&quot;)
416     Object[][] exceptionParseData() {
417         return new Object[][]{
418             // compact number instance, string to parse, null (no o/p; must throws exception)
419             // no number
420             {FORMAT_DZ_LONG, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
421                 + &quot;\u0F42&quot;, null},
422             // Invalid prefix
423             {FORMAT_DZ_LONG, &quot;-\u0F66\u0F9F\u0F7C\u0F44,\u0F0B\u0F55\u0FB2&quot;
424                 + &quot;\u0F42 \u0F23&quot;, null},
425             // Invalid prefix for en_US
426             {FORMAT_EN_US_SHORT, &quot;K12,347&quot;, null},
427             // Invalid prefix for ja_JP
428             {FORMAT_JA_JP_SHORT, &quot;\u4E071&quot;, null},
429             // Localized minus sign should be used
430             {FORMAT_SE_SHORT, &quot;-8\u00a0mn&quot;, null},};
431     }
432 
433     @DataProvider(name = &quot;invalidParse&quot;)
434     Object[][] invalidParseData() {
435         return new Object[][]{
436             // compact number instance, string to parse, parsed number
437             // Prefix and suffix do not match
438             {FORMAT_DZ_LONG, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
439                 + &quot;\u0F42 \u0F21 KM&quot;, 1000L},
440             // Exponents are unparseable
441             {FORMAT_EN_US_SHORT, &quot;-1.05E4K&quot;, -1.05},
442             // Default instance does not allow grouping
443             {FORMAT_EN_US_SHORT, &quot;12,347&quot;, 12L},
444             // Take partial suffix &quot;K&quot; as 1000 for en_US_SHORT patterns
445             {FORMAT_EN_US_SHORT, &quot;12KM&quot;, 12000L},
446             // Invalid suffix
<span class="line-modified">447             {FORMAT_HI_IN_LONG, &quot;-1 \u00a0\u0915.&quot;, -1L},};</span>













448     }
449 
450     @DataProvider(name = &quot;fieldPosition&quot;)
451     Object[][] formatFieldPositionData() {
452         return new Object[][]{
453             //compact number instance, number to format, field, start position, end position, formatted string
454             {FORMAT_DZ_LONG, -3500, NumberFormat.Field.SIGN, 0, 1, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
455             {FORMAT_DZ_LONG, 3500, NumberFormat.Field.INTEGER, 9, 10, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
456             {FORMAT_DZ_LONG, -3500, NumberFormat.Field.INTEGER, 10, 11, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
457             {FORMAT_DZ_LONG, 999, NumberFormat.Field.INTEGER, 0, 3, &quot;\u0F29\u0F29\u0F29&quot;},
458             {FORMAT_DZ_LONG, -999, NumberFormat.Field.INTEGER, 1, 4, &quot;-\u0F29\u0F29\u0F29&quot;},
459             {FORMAT_DZ_LONG, 3500, NumberFormat.Field.PREFIX, 0, 9, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
460             {FORMAT_DZ_LONG, -3500, NumberFormat.Field.PREFIX, 0, 10, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
461             {FORMAT_DZ_LONG, 999, NumberFormat.Field.PREFIX, 0, 0, &quot;\u0F29\u0F29\u0F29&quot;},
462             {FORMAT_EN_US_SHORT, -3500, NumberFormat.Field.SIGN, 0, 1, &quot;-4K&quot;},
463             {FORMAT_EN_US_SHORT, 3500, NumberFormat.Field.INTEGER, 0, 1, &quot;4K&quot;},
464             {FORMAT_EN_US_SHORT, 14900000067L, NumberFormat.Field.INTEGER, 0, 2, &quot;15B&quot;},
465             {FORMAT_EN_US_SHORT, -1000, NumberFormat.Field.PREFIX, 0, 1, &quot;-1K&quot;},
466             {FORMAT_EN_US_SHORT, 3500, NumberFormat.Field.SUFFIX, 1, 2, &quot;4K&quot;},
467             {FORMAT_EN_US_SHORT, 14900000067L, NumberFormat.Field.SUFFIX, 2, 3, &quot;15B&quot;},
</pre>
</td>
<td>
<hr />
<pre>
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 /*
 24  * @test
<span class="line-modified"> 25  * @bug 8177552 8217721 8222756</span>
 26  * @summary Checks the functioning of compact number format
 27  * @modules jdk.localedata
 28  * @run testng/othervm TestCompactNumber
 29  */
 30 import java.math.BigDecimal;
 31 import java.math.BigInteger;
 32 import java.text.FieldPosition;
 33 import java.text.Format;
 34 import java.text.NumberFormat;
 35 import java.text.ParseException;
 36 import java.text.ParsePosition;
 37 import java.util.Locale;
 38 import java.util.stream.Stream;
 39 import static org.testng.Assert.*;
 40 import org.testng.annotations.DataProvider;
 41 import org.testng.annotations.Test;
 42 
 43 public class TestCompactNumber {
 44 
 45     private static final NumberFormat FORMAT_DZ_LONG = NumberFormat
</pre>
<hr />
<pre>
 58             .getCompactNumberInstance(Locale.JAPAN, NumberFormat.Style.SHORT);
 59 
 60     private static final NumberFormat FORMAT_IT_SHORT = NumberFormat
 61             .getCompactNumberInstance(new Locale(&quot;it&quot;), NumberFormat.Style.SHORT);
 62 
 63     private static final NumberFormat FORMAT_CA_LONG = NumberFormat
 64             .getCompactNumberInstance(new Locale(&quot;ca&quot;), NumberFormat.Style.LONG);
 65 
 66     private static final NumberFormat FORMAT_AS_LONG = NumberFormat
 67             .getCompactNumberInstance(new Locale(&quot;as&quot;), NumberFormat.Style.LONG);
 68 
 69     private static final NumberFormat FORMAT_BRX_SHORT = NumberFormat
 70             .getCompactNumberInstance(new Locale(&quot;brx&quot;), NumberFormat.Style.SHORT);
 71 
 72     private static final NumberFormat FORMAT_SW_LONG = NumberFormat
 73             .getCompactNumberInstance(new Locale(&quot;sw&quot;), NumberFormat.Style.LONG);
 74 
 75     private static final NumberFormat FORMAT_SE_SHORT = NumberFormat
 76             .getCompactNumberInstance(new Locale(&quot;se&quot;), NumberFormat.Style.SHORT);
 77 
<span class="line-added"> 78     private static final NumberFormat FORMAT_DE_LONG = NumberFormat</span>
<span class="line-added"> 79             .getCompactNumberInstance(Locale.GERMAN, NumberFormat.Style.LONG);</span>
<span class="line-added"> 80 </span>
<span class="line-added"> 81     private static final NumberFormat FORMAT_SL_LONG = NumberFormat</span>
<span class="line-added"> 82             .getCompactNumberInstance(new Locale(&quot;sl&quot;), NumberFormat.Style.LONG);</span>
<span class="line-added"> 83 </span>
 84     @DataProvider(name = &quot;format&quot;)
 85     Object[][] compactFormatData() {
 86         return new Object[][]{
 87             // compact number format instance, number to format, formatted output
 88             {FORMAT_DZ_LONG, 1000.09, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55&quot;
 89                 + &quot;\u0FB2\u0F42 \u0F21&quot;},
 90             {FORMAT_DZ_LONG, -999.99, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55&quot;
 91                 + &quot;\u0FB2\u0F42 \u0F21&quot;},
 92             {FORMAT_DZ_LONG, -0.0, &quot;-\u0F20&quot;},
 93             {FORMAT_DZ_LONG, 3000L, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55&quot;
 94                 + &quot;\u0FB2\u0F42 \u0F23&quot;},
 95             {FORMAT_DZ_LONG, new BigInteger(&quot;12345678901234567890&quot;), &quot;\u0F51&quot;
 96                 + &quot;\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62\u0F0B\u0F66&quot;
 97                 + &quot;\u0F0B\u0F61\u0F0B \u0F21\u0F22\u0F23\u0F24\u0F25\u0F27&quot;},
 98             // negative
 99             {FORMAT_DZ_LONG, new BigInteger(&quot;-12345678901234567890&quot;), &quot;-\u0F51&quot;
100                 + &quot;\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62\u0F0B\u0F66&quot;
101                 + &quot;\u0F0B\u0F61\u0F0B \u0F21\u0F22\u0F23\u0F24\u0F25\u0F27&quot;},
102             {FORMAT_DZ_LONG, new BigDecimal(&quot;12345678901234567890.89&quot;), &quot;\u0F51&quot;
103                 + &quot;\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62\u0F0B\u0F66&quot;
</pre>
<hr />
<pre>
237             {FORMAT_JA_JP_SHORT, new BigDecimal(&quot;12345678901234567890.89&quot;),
238                 &quot;12345679\u5146&quot;},
239             // less than 1000 no suffix
240             {FORMAT_IT_SHORT, 499, &quot;499&quot;},
241             // Boundary number
242             {FORMAT_IT_SHORT, 1000, &quot;1.000&quot;},
243             // Long path
244             {FORMAT_IT_SHORT, 3000000L, &quot;3\u00a0Mln&quot;},
245             // Double path
246             {FORMAT_IT_SHORT, 3000000.0, &quot;3\u00a0Mln&quot;},
247             // BigInteger path
248             {FORMAT_IT_SHORT, new BigInteger(&quot;12345678901234567890&quot;),
249                 &quot;12345679\u00a0Bln&quot;},
250             // BigDecimal path
251             {FORMAT_IT_SHORT, new BigDecimal(&quot;12345678901234567890.89&quot;),
252                 &quot;12345679\u00a0Bln&quot;},
253             {FORMAT_CA_LONG, 999, &quot;999&quot;},
254             {FORMAT_CA_LONG, 999.99, &quot;1 miler&quot;},
255             {FORMAT_CA_LONG, 99000, &quot;99 milers&quot;},
256             {FORMAT_CA_LONG, 330000, &quot;330 milers&quot;},
<span class="line-modified">257             {FORMAT_CA_LONG, 3000.90, &quot;3 milers&quot;},</span>
258             {FORMAT_CA_LONG, 1000000, &quot;1 mili\u00f3&quot;},
259             {FORMAT_CA_LONG, new BigInteger(&quot;12345678901234567890&quot;),
260                 &quot;12345679 bilions&quot;},
261             {FORMAT_CA_LONG, new BigDecimal(&quot;12345678901234567890.89&quot;),
262                 &quot;12345679 bilions&quot;},
263             {FORMAT_AS_LONG, 5000.0, &quot;\u09eb \u09b9\u09be\u099c\u09be\u09f0&quot;},
264             {FORMAT_AS_LONG, 50000.0, &quot;\u09eb\u09e6 \u09b9\u09be\u099c\u09be\u09f0&quot;},
265             {FORMAT_AS_LONG, 500000.0, &quot;\u09eb \u09b2\u09be\u0996&quot;},
266             {FORMAT_AS_LONG, 5000000.0, &quot;\u09eb \u09a8\u09bf\u09af\u09c1\u09a4&quot;},
267             {FORMAT_AS_LONG, 50000000.0, &quot;\u09eb\u09e6 \u09a8\u09bf\u09af\u09c1\u09a4&quot;},
268             {FORMAT_AS_LONG, 500000000.0, &quot;\u09eb\u09e6\u09e6 \u09a8\u09bf\u09af\u09c1\u09a4&quot;},
269             {FORMAT_AS_LONG, 5000000000.0, &quot;\u09eb \u09b6\u09a4 \u0995\u09cb\u099f\u09bf&quot;},
270             {FORMAT_AS_LONG, 50000000000.0, &quot;\u09eb\u09e6 \u09b6\u09a4 \u0995\u09cb\u099f\u09bf&quot;},
271             {FORMAT_AS_LONG, 500000000000.0, &quot;\u09eb\u09e6\u09e6 \u09b6\u09a4 \u0995\u09cb\u099f\u09bf&quot;},
272             {FORMAT_AS_LONG, 5000000000000.0, &quot;\u09eb \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
273             {FORMAT_AS_LONG, 50000000000000.0, &quot;\u09eb\u09e6 \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
274             {FORMAT_AS_LONG, 500000000000000.0, &quot;\u09eb\u09e6\u09e6 \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
275             {FORMAT_AS_LONG, 5000000000000000.0, &quot;\u09eb\u09e6\u09e6\u09e6 \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
276             {FORMAT_AS_LONG, new BigInteger(&quot;12345678901234567890&quot;),
277                 &quot;\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ef \u09b6\u09a4 \u09aa\u09f0\u09be\u09f0\u09cd\u09a6\u09cd\u09a7&quot;},
</pre>
<hr />
<pre>
309             // No compact form
310             {FORMAT_SE_SHORT, 999, &quot;999&quot;},
311             // Long
312             {FORMAT_SE_SHORT, 8000000L, &quot;8\u00a0mn&quot;},
313             // Double
314             {FORMAT_SE_SHORT, 8000.98, &quot;8\u00a0dt&quot;},
315             // Big integer
316             {FORMAT_SE_SHORT, new BigInteger(&quot;12345678901234567890&quot;), &quot;12345679\u00a0bn&quot;},
317             // Big decimal
318             {FORMAT_SE_SHORT, new BigDecimal(&quot;12345678901234567890.98&quot;), &quot;12345679\u00a0bn&quot;},
319             // Negatives
320             // No compact form
321             {FORMAT_SE_SHORT, -999, &quot;\u2212999&quot;},
322             // Long
323             {FORMAT_SE_SHORT, -8000000L, &quot;\u22128\u00a0mn&quot;},
324             // Double
325             {FORMAT_SE_SHORT, -8000.98, &quot;\u22128\u00a0dt&quot;},
326             // BigInteger
327             {FORMAT_SE_SHORT, new BigInteger(&quot;-12345678901234567890&quot;), &quot;\u221212345679\u00a0bn&quot;},
328             // BigDecimal
<span class="line-modified">329             {FORMAT_SE_SHORT, new BigDecimal(&quot;-12345678901234567890.98&quot;), &quot;\u221212345679\u00a0bn&quot;},</span>
<span class="line-added">330 </span>
<span class="line-added">331             // Plurals</span>
<span class="line-added">332             // DE: one:i = 1 and v = 0</span>
<span class="line-added">333             {FORMAT_DE_LONG, 1_000_000, &quot;1 Million&quot;},</span>
<span class="line-added">334             {FORMAT_DE_LONG, 2_000_000, &quot;2 Millionen&quot;},</span>
<span class="line-added">335             // SL: one:v = 0 and i % 100 = 1</span>
<span class="line-added">336             //     two:v = 0 and i % 100 = 2</span>
<span class="line-added">337             //     few:v = 0 and i % 100 = 3..4 or v != 0</span>
<span class="line-added">338             {FORMAT_SL_LONG, 1_000_000, &quot;1 milijon&quot;},</span>
<span class="line-added">339             {FORMAT_SL_LONG, 2_000_000, &quot;2 milijona&quot;},</span>
<span class="line-added">340             {FORMAT_SL_LONG, 3_000_000, &quot;3 milijone&quot;},</span>
<span class="line-added">341             {FORMAT_SL_LONG, 5_000_000, &quot;5 milijonov&quot;},</span>
<span class="line-added">342         };</span>
343     }
344 
345     @DataProvider(name = &quot;parse&quot;)
346     Object[][] compactParseData() {
347         return new Object[][]{
348                 // compact number format instance, string to parse, parsed number, return type
349                 {FORMAT_DZ_LONG, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
350                         + &quot;\u0F42 \u0F21&quot;, 1000L, Long.class},
351                 {FORMAT_DZ_LONG, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
352                         + &quot;\u0F42 \u0F23&quot;, -3000L, Long.class},
353                 {FORMAT_DZ_LONG, &quot;\u0F51\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62&quot;
354                         + &quot;\u0F0B\u0F66\u0F0B\u0F61\u0F0B \u0F21&quot;
355                         + &quot;\u0F22\u0F23\u0F24\u0F25\u0F27&quot;, 1.23457E19, Double.class},
356                 {FORMAT_DZ_LONG, &quot;-\u0F51\u0F74\u0F44\u0F0B\u0F55\u0FB1\u0F74\u0F62&quot;
357                         + &quot;\u0F0B\u0F66\u0F0B\u0F61\u0F0B \u0F21&quot;
358                         + &quot;\u0F22\u0F23\u0F24\u0F25\u0F27&quot;, -1.23457E19, Double.class},
359                 {FORMAT_EN_US_SHORT, &quot;-0.0&quot;, -0.0, Double.class},
360                 {FORMAT_EN_US_SHORT, &quot;-0&quot;, -0.0, Double.class},
361                 {FORMAT_EN_US_SHORT, &quot;0&quot;, 0L, Long.class},
362                 {FORMAT_EN_US_SHORT, &quot;499&quot;, 499L, Long.class},
</pre>
<hr />
<pre>
411                 {FORMAT_SW_LONG, &quot;elfu -3&quot;, -3000L, Long.class},
412                 {FORMAT_SW_LONG, &quot;499&quot;, 499L, Long.class},
413                 {FORMAT_SW_LONG, &quot;-499&quot;, -499L, Long.class},
414                 {FORMAT_SW_LONG, &quot;elfu 1&quot;, 1000L, Long.class},
415                 {FORMAT_SW_LONG, &quot;elfu 3&quot;, 3000L, Long.class},
416                 {FORMAT_SW_LONG, &quot;elfu -3&quot;, -3000L, Long.class},
417                 {FORMAT_SW_LONG, &quot;elfu 17&quot;, 17000L, Long.class},
418                 {FORMAT_SW_LONG, &quot;trilioni 12345679&quot;, 1.2345679E19, Double.class},
419                 {FORMAT_SW_LONG, &quot;trilioni -12345679&quot;, -1.2345679E19, Double.class},
420                 {FORMAT_SW_LONG, &quot;elfu 599.01&quot;, 599010L, Long.class},
421                 {FORMAT_SW_LONG, &quot;elfu -599.01&quot;, -599010L, Long.class},
422                 {FORMAT_SE_SHORT, &quot;999&quot;, 999L, Long.class},
423                 {FORMAT_SE_SHORT, &quot;8\u00a0mn&quot;, 8000000L, Long.class},
424                 {FORMAT_SE_SHORT, &quot;8\u00a0dt&quot;, 8000L, Long.class},
425                 {FORMAT_SE_SHORT, &quot;12345679\u00a0bn&quot;, 1.2345679E19, Double.class},
426                 {FORMAT_SE_SHORT, &quot;12345679,89\u00a0bn&quot;, 1.2345679890000001E19, Double.class},
427                 {FORMAT_SE_SHORT, &quot;\u2212999&quot;, -999L, Long.class},
428                 {FORMAT_SE_SHORT, &quot;\u22128\u00a0mn&quot;, -8000000L, Long.class},
429                 {FORMAT_SE_SHORT, &quot;\u22128\u00a0dt&quot;, -8000L, Long.class},
430                 {FORMAT_SE_SHORT, &quot;\u221212345679\u00a0bn&quot;, -1.2345679E19, Double.class},
<span class="line-modified">431                 {FORMAT_SE_SHORT, &quot;\u221212345679,89\u00a0bn&quot;, -1.2345679890000001E19, Double.class},</span>
<span class="line-added">432 </span>
<span class="line-added">433                 // Plurals</span>
<span class="line-added">434                 // DE: one:i = 1 and v = 0</span>
<span class="line-added">435                 {FORMAT_DE_LONG, &quot;1 Million&quot;,   1_000_000L, Long.class},</span>
<span class="line-added">436                 {FORMAT_DE_LONG, &quot;2 Millionen&quot;, 2_000_000L, Long.class},</span>
<span class="line-added">437                 // SL: one:v = 0 and i % 100 = 1</span>
<span class="line-added">438                 //     two:v = 0 and i % 100 = 2</span>
<span class="line-added">439                 //     few:v = 0 and i % 100 = 3..4 or v != 0</span>
<span class="line-added">440                 {FORMAT_SL_LONG, &quot;1 milijon&quot;,   1_000_000L, Long.class},</span>
<span class="line-added">441                 {FORMAT_SL_LONG, &quot;2 milijona&quot;,  2_000_000L, Long.class},</span>
<span class="line-added">442                 {FORMAT_SL_LONG, &quot;3 milijone&quot;,  3_000_000L, Long.class},</span>
<span class="line-added">443                 {FORMAT_SL_LONG, &quot;5 milijonov&quot;, 5_000_000L, Long.class},</span>
<span class="line-added">444         };</span>
445     }
446 
447     @DataProvider(name = &quot;exceptionParse&quot;)
448     Object[][] exceptionParseData() {
449         return new Object[][]{
450             // compact number instance, string to parse, null (no o/p; must throws exception)
451             // no number
452             {FORMAT_DZ_LONG, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
453                 + &quot;\u0F42&quot;, null},
454             // Invalid prefix
455             {FORMAT_DZ_LONG, &quot;-\u0F66\u0F9F\u0F7C\u0F44,\u0F0B\u0F55\u0FB2&quot;
456                 + &quot;\u0F42 \u0F23&quot;, null},
457             // Invalid prefix for en_US
458             {FORMAT_EN_US_SHORT, &quot;K12,347&quot;, null},
459             // Invalid prefix for ja_JP
460             {FORMAT_JA_JP_SHORT, &quot;\u4E071&quot;, null},
461             // Localized minus sign should be used
462             {FORMAT_SE_SHORT, &quot;-8\u00a0mn&quot;, null},};
463     }
464 
465     @DataProvider(name = &quot;invalidParse&quot;)
466     Object[][] invalidParseData() {
467         return new Object[][]{
468             // compact number instance, string to parse, parsed number
469             // Prefix and suffix do not match
470             {FORMAT_DZ_LONG, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2&quot;
471                 + &quot;\u0F42 \u0F21 KM&quot;, 1000L},
472             // Exponents are unparseable
473             {FORMAT_EN_US_SHORT, &quot;-1.05E4K&quot;, -1.05},
474             // Default instance does not allow grouping
475             {FORMAT_EN_US_SHORT, &quot;12,347&quot;, 12L},
476             // Take partial suffix &quot;K&quot; as 1000 for en_US_SHORT patterns
477             {FORMAT_EN_US_SHORT, &quot;12KM&quot;, 12000L},
478             // Invalid suffix
<span class="line-modified">479             {FORMAT_HI_IN_LONG, &quot;-1 \u00a0\u0915.&quot;, -1L},</span>
<span class="line-added">480 </span>
<span class="line-added">481             // invalid plurals</span>
<span class="line-added">482             {FORMAT_DE_LONG, &quot;2 Million&quot;, 2L},</span>
<span class="line-added">483             {FORMAT_SL_LONG, &quot;2 milijon&quot;, 2L},</span>
<span class="line-added">484             {FORMAT_SL_LONG, &quot;2 milijone&quot;, 2L},</span>
<span class="line-added">485             {FORMAT_SL_LONG, &quot;2 milijonv&quot;, 2L},</span>
<span class="line-added">486             {FORMAT_SL_LONG, &quot;3 milijon&quot;, 3L},</span>
<span class="line-added">487             {FORMAT_SL_LONG, &quot;3 milijona&quot;, 3L},</span>
<span class="line-added">488             {FORMAT_SL_LONG, &quot;3 milijonv&quot;, 3L},</span>
<span class="line-added">489             {FORMAT_SL_LONG, &quot;5 milijon&quot;, 5L},</span>
<span class="line-added">490             {FORMAT_SL_LONG, &quot;5 milijona&quot;, 5L},</span>
<span class="line-added">491             {FORMAT_SL_LONG, &quot;5 milijone&quot;, 5L},</span>
<span class="line-added">492         };</span>
493     }
494 
495     @DataProvider(name = &quot;fieldPosition&quot;)
496     Object[][] formatFieldPositionData() {
497         return new Object[][]{
498             //compact number instance, number to format, field, start position, end position, formatted string
499             {FORMAT_DZ_LONG, -3500, NumberFormat.Field.SIGN, 0, 1, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
500             {FORMAT_DZ_LONG, 3500, NumberFormat.Field.INTEGER, 9, 10, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
501             {FORMAT_DZ_LONG, -3500, NumberFormat.Field.INTEGER, 10, 11, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
502             {FORMAT_DZ_LONG, 999, NumberFormat.Field.INTEGER, 0, 3, &quot;\u0F29\u0F29\u0F29&quot;},
503             {FORMAT_DZ_LONG, -999, NumberFormat.Field.INTEGER, 1, 4, &quot;-\u0F29\u0F29\u0F29&quot;},
504             {FORMAT_DZ_LONG, 3500, NumberFormat.Field.PREFIX, 0, 9, &quot;\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
505             {FORMAT_DZ_LONG, -3500, NumberFormat.Field.PREFIX, 0, 10, &quot;-\u0F66\u0F9F\u0F7C\u0F44\u0F0B\u0F55\u0FB2\u0F42 \u0F24&quot;},
506             {FORMAT_DZ_LONG, 999, NumberFormat.Field.PREFIX, 0, 0, &quot;\u0F29\u0F29\u0F29&quot;},
507             {FORMAT_EN_US_SHORT, -3500, NumberFormat.Field.SIGN, 0, 1, &quot;-4K&quot;},
508             {FORMAT_EN_US_SHORT, 3500, NumberFormat.Field.INTEGER, 0, 1, &quot;4K&quot;},
509             {FORMAT_EN_US_SHORT, 14900000067L, NumberFormat.Field.INTEGER, 0, 2, &quot;15B&quot;},
510             {FORMAT_EN_US_SHORT, -1000, NumberFormat.Field.PREFIX, 0, 1, &quot;-1K&quot;},
511             {FORMAT_EN_US_SHORT, 3500, NumberFormat.Field.SUFFIX, 1, 2, &quot;4K&quot;},
512             {FORMAT_EN_US_SHORT, 14900000067L, NumberFormat.Field.SUFFIX, 2, 3, &quot;15B&quot;},
</pre>
</td>
</tr>
</table>
<center><a href="../../Bidi/Bug7051769.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestEquality.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>