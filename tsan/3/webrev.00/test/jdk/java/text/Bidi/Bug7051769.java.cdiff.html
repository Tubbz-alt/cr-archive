<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/text/Bidi/Bug7051769.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="Bug6850113.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../Format/CompactNumberFormat/TestCompactNumber.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/text/Bidi/Bug7051769.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2011, 2016, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 21,11 ***</span>
   * questions.
   */
  
  /*
   * @test
<span class="line-modified">!  * @bug 7051769 8038092</span>
   * @summary verify that Bidi.toString() returns the corect result.
   *     The second run is intended to test lazy SharedSectets init for 8038092
   * @modules java.desktop
   * @run main Bug7051769
   * @run main/othervm -DpreloadBidi=true Bug7051769
<span class="line-new-header">--- 21,11 ---</span>
   * questions.
   */
  
  /*
   * @test
<span class="line-modified">!  * @bug 7051769 8038092 8174270</span>
   * @summary verify that Bidi.toString() returns the corect result.
   *     The second run is intended to test lazy SharedSectets init for 8038092
   * @modules java.desktop
   * @run main Bug7051769
   * @run main/othervm -DpreloadBidi=true Bug7051769
</pre>
<hr />
<pre>
<span class="line-old-header">*** 38,11 ***</span>
  
      static {
          if (System.getProperty(&quot;preloadBidi&quot;, &quot;&quot;).equals(&quot;true&quot;)) {
              // Make sure the SharedSecret is lazily initialized correctly
              try {
<span class="line-modified">!                 Class.forName(&quot;sun.text.bidi.BidiBase&quot;);</span>
                  System.out.println(&quot;BidiBase class has been pre-loaded.&quot;);
              } catch (ClassNotFoundException e) {
                  System.out.println(&quot;BidiBase class could not be pre-loaded.&quot;);
              }
          }
<span class="line-new-header">--- 38,11 ---</span>
  
      static {
          if (System.getProperty(&quot;preloadBidi&quot;, &quot;&quot;).equals(&quot;true&quot;)) {
              // Make sure the SharedSecret is lazily initialized correctly
              try {
<span class="line-modified">!                 Class.forName(&quot;jdk.internal.icu.text.BidiBase&quot;);</span>
                  System.out.println(&quot;BidiBase class has been pre-loaded.&quot;);
              } catch (ClassNotFoundException e) {
                  System.out.println(&quot;BidiBase class could not be pre-loaded.&quot;);
              }
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 66,11 ***</span>
                     NumericShaper.getContextualShaper(NumericShaper.ARABIC));
          attrNS.put(TextAttribute.RUN_DIRECTION,
                     TextAttribute.RUN_DIRECTION_RTL);
  
          String text = &quot;\u0623\u0643\u062a\u0648\u0628\u0631 10&quot;;
<span class="line-modified">!         String expected = &quot;sun.text.bidi.BidiBase[dir: 2 baselevel: 1 length: 9 runs: [1 1 1 1 1 1 1 2 2] text: [0x623 0x643 0x62a 0x648 0x628 0x631 0x20 0x661 0x660]]&quot;;</span>
  
          AttributedString as = new AttributedString(text, attrNS);
          AttributedCharacterIterator itr = as.getIterator();
          itr.last();
          itr.next();
<span class="line-new-header">--- 66,11 ---</span>
                     NumericShaper.getContextualShaper(NumericShaper.ARABIC));
          attrNS.put(TextAttribute.RUN_DIRECTION,
                     TextAttribute.RUN_DIRECTION_RTL);
  
          String text = &quot;\u0623\u0643\u062a\u0648\u0628\u0631 10&quot;;
<span class="line-modified">!         String expected = &quot;jdk.internal.icu.text.BidiBase[dir: 2 baselevel: 1 length: 9 runs: [1 1 1 1 1 1 1 2 2] text: [0x623 0x643 0x62a 0x648 0x628 0x631 0x20 0x661 0x660]]&quot;;</span>
  
          AttributedString as = new AttributedString(text, attrNS);
          AttributedCharacterIterator itr = as.getIterator();
          itr.last();
          itr.next();
</pre>
<center><a href="Bug6850113.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../Format/CompactNumberFormat/TestCompactNumber.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>