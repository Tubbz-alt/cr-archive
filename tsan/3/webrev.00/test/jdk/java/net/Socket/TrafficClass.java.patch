diff a/test/jdk/java/net/Socket/TrafficClass.java b/test/jdk/java/net/Socket/TrafficClass.java
--- a/test/jdk/java/net/Socket/TrafficClass.java
+++ b/test/jdk/java/net/Socket/TrafficClass.java
@@ -22,18 +22,20 @@
  */
 
 /*
  * @test
  * @bug 4511783
+ * @library /test/lib
  * @summary Test that setTrafficClass/getTraffiClass don't
  *          throw an exception
  * @run main TrafficClass
  * @run main/othervm -Djava.net.preferIPv4Stack=true TrafficClass
  */
 import java.net.*;
 import java.nio.*;
 import java.nio.channels.*;
+import jdk.test.lib.net.IPSupport;
 
 public class TrafficClass {
 
     static final int IPTOS_RELIABILITY = 0x4;
 
@@ -59,10 +61,11 @@
         }
 
     }
 
     public static void main(String args[]) throws Exception {
+        IPSupport.throwSkippedExceptionIfNonOperational();
 
         DatagramSocket ds = new DatagramSocket();
         testDatagramSocket(ds);
 
         DatagramChannel dc = DatagramChannel.open();
