diff a/test/jdk/java/net/Socket/TestTcpNoDelay.java b/test/jdk/java/net/Socket/TestTcpNoDelay.java
--- a/test/jdk/java/net/Socket/TestTcpNoDelay.java
+++ b/test/jdk/java/net/Socket/TestTcpNoDelay.java
@@ -22,21 +22,25 @@
  */
 
 /**
  * @test
  * @bug 6404388
+ * @library /test/lib
  * @summary VISTA: Socket setTcpNoDelay & setKeepAlive working incorrectly
  * @run main TestTcpNoDelay
  * @run main/othervm -Djava.net.preferIPv4Stack=true TestTcpNoDelay
  */
 
 import java.net.*;
 import java.io.IOException;
+import jdk.test.lib.net.IPSupport;
 
 public class TestTcpNoDelay
 {
     public static void main(String[] args) {
+        IPSupport.throwSkippedExceptionIfNonOperational();
+
         try {
             Socket socket = new Socket();
             boolean on = socket.getTcpNoDelay();
             System.out.println("Get TCP_NODELAY = " + on);
 
