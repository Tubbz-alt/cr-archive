diff a/test/jdk/java/net/Socket/InheritHandle.java b/test/jdk/java/net/Socket/InheritHandle.java
--- a/test/jdk/java/net/Socket/InheritHandle.java
+++ b/test/jdk/java/net/Socket/InheritHandle.java
@@ -21,20 +21,22 @@
  * questions.
  */
 
 /* @test
  * @bug  6598160
+ * @library /test/lib
  * @summary Windows IPv6 Socket implementation doesn't set the handle to not inherit
  * @author Chris Hegarty
  * @run main InheritHandle
  * @run main/othervm -Djava.net.preferIPv4Stack=true InheritHandle
  */
 
 import java.net.BindException;
 import java.net.ServerSocket;
 import java.io.File;
 import java.io.IOException;
+import jdk.test.lib.net.IPSupport;
 
 /**
  * This test is only really applicable to Windows machines that are running IPv6, but
  * it should still pass on other platforms so we can just run it.
  */
@@ -43,10 +45,12 @@
 {
     static String java = System.getProperty("java.home") + File.separator +
                          "bin" + File.separator + "java";
 
     public static void main(String[] args) {
+        IPSupport.throwSkippedExceptionIfNonOperational();
+
         if (args.length == 1) {
             doWait();
         } else {
             startTest();
         }
