diff a/test/jdk/java/net/SocketOption/MinimumRcvBufferSize.java b/test/jdk/java/net/SocketOption/MinimumRcvBufferSize.java
--- a/test/jdk/java/net/SocketOption/MinimumRcvBufferSize.java
+++ b/test/jdk/java/net/SocketOption/MinimumRcvBufferSize.java
@@ -21,21 +21,25 @@
  * questions.
  */
 
 /*
  * @test
+ * @library /test/lib
  * @bug 8170920
  * @run main MinimumRcvBufferSize
  * @run main/othervm -Djava.net.preferIPv4Stack=true MinimumRcvBufferSize
  */
 
 import java.nio.channels.*;
 import java.net.*;
+import jdk.test.lib.net.IPSupport;
 
 public class MinimumRcvBufferSize {
 
     public static void main(String args[]) throws Exception {
+        IPSupport.throwSkippedExceptionIfNonOperational();
+
         boolean error = false;
         ServerSocketChannel channel = ServerSocketChannel.open();
         int before = channel.getOption(StandardSocketOptions.SO_RCVBUF);
         channel.setOption(StandardSocketOptions.SO_RCVBUF, Integer.MAX_VALUE);
         int after = channel.getOption(StandardSocketOptions.SO_RCVBUF);
