diff a/test/jdk/java/net/SocketOption/ImmutableOptions.java b/test/jdk/java/net/SocketOption/ImmutableOptions.java
--- a/test/jdk/java/net/SocketOption/ImmutableOptions.java
+++ b/test/jdk/java/net/SocketOption/ImmutableOptions.java
@@ -22,27 +22,31 @@
  */
 
  /*
  * @test
  * @bug 8148609
+ * @library /test/lib
  * @summary Assert that the set of socket options are immutable
  * @run testng/othervm ImmutableOptions
  * @run testng/othervm -Djava.net.preferIPv4Stack=true ImmutableOptions
  */
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import java.net.*;
 import java.util.Set;
 
+import jdk.test.lib.net.IPSupport;
+
 import org.testng.annotations.BeforeTest;
 import org.testng.annotations.Test;
 
 public class ImmutableOptions {
 
     @BeforeTest
     void setupServerSocketFactory() throws IOException {
+        IPSupport.throwSkippedExceptionIfNonOperational();
         ServerSocket.setSocketFactory(new ServerSocketImplFactory());
     }
 
     @Test(expectedExceptions = UnsupportedOperationException.class)
     public void socketThrows() throws IOException {
