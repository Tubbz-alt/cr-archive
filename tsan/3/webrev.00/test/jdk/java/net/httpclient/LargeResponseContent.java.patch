diff a/test/jdk/java/net/httpclient/LargeResponseContent.java b/test/jdk/java/net/httpclient/LargeResponseContent.java
--- a/test/jdk/java/net/httpclient/LargeResponseContent.java
+++ b/test/jdk/java/net/httpclient/LargeResponseContent.java
@@ -37,14 +37,16 @@
 import java.nio.charset.StandardCharsets;
 import java.util.List;
 import java.util.concurrent.CompletableFuture;
 import java.util.concurrent.CompletionStage;
 import java.util.concurrent.Flow;
+import jdk.test.lib.net.URIBuilder;
 
 /**
  * @test
  * @bug 8212926
+ * @library /test/lib
  * @summary Basic tests for response timeouts
  * @run main/othervm LargeResponseContent
  */
 
 public class LargeResponseContent {
@@ -58,11 +60,17 @@
         port = server.getLocalPort();
         serverThread.start();
     }
 
     void runClient() throws IOException, InterruptedException {
-        URI uri = URI.create("http://127.0.0.1:" + Integer.toString(port) + "/foo");
+        URI uri = URIBuilder.newBuilder()
+            .scheme("http")
+            .loopback()
+            .port(port)
+            .path("/foo")
+            .buildUnchecked();
+        System.out.println("URI: " + uri);
         HttpClient client = HttpClient.newHttpClient();
         HttpRequest request = HttpRequest.newBuilder(uri)
                 .GET()
                 .build();
         HttpResponse<Long> response = client.send(request, new ClientHandler());
