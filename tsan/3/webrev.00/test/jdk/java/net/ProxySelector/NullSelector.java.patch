diff a/test/jdk/java/net/ProxySelector/NullSelector.java b/test/jdk/java/net/ProxySelector/NullSelector.java
--- a/test/jdk/java/net/ProxySelector/NullSelector.java
+++ b/test/jdk/java/net/ProxySelector/NullSelector.java
@@ -21,19 +21,27 @@
  * questions.
  */
 
 /* @test
  * @bug 6215885
+ * @library /test/lib
  * @summary URLConnection.openConnection NPE if ProxySelector.setDefault is set to null
+ * @run main/othervm NullSelector
  */
 
 import java.net.*;
 import java.io.*;
+import jdk.test.lib.net.URIBuilder;
 
 public class NullSelector {
     public static void main(String[] args) throws Exception {
-        URL url = new URL("http://127.0.0.1/");
+        URL url = URIBuilder.newBuilder()
+            .scheme("http")
+            .loopback()
+            .path("/")
+            .toURLUnchecked();
+        System.out.println("URL: " + url);
         ProxySelector.setDefault(null);
         URLConnection con = url.openConnection();
         con.setConnectTimeout(500);
         try {
             // Will throw a NullPointerException if bug still there
