<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/io/Serializable/InvalidClassException/noargctor/Serialize/SubclassAcrossPackage.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../DefaultPackage.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../NPEProvoker/NPEProvoker.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/io/Serializable/InvalidClassException/noargctor/Serialize/SubclassAcrossPackage.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @bug 4093279
 26  * REMOVED test, build and run tag since could not get this to work.
 27  * Test is run via shell script, run.sh.
 28  */
 29 
 30 package Serialize;
 31 
 32 import java.io.*;
 33 
 34 class PublicSerializable
 35 extends NonSerializable.PublicCtor implements Serializable
 36 {


 37     int field1 = 5;
 38 };
 39 
 40 class ProtectedSerializable
 41 extends NonSerializable.ProtectedCtor implements Serializable
 42 {


 43     int field1 = 5;
 44 };
 45 
 46 class DifferentPackageSerializable
 47 extends NonSerializable.PackageCtor implements Serializable
 48 {


 49     int field1 = 5;
 50     DifferentPackageSerializable() {
 51         super(1);
 52     }
 53 };
 54 
 55 class SamePackageSerializable
 56 extends Serialize.SamePackageCtor implements Serializable
 57 {


 58     SamePackageSerializable() {
 59     }
 60 };
 61 
 62 class SamePackageProtectedCtor {


 63     protected SamePackageProtectedCtor() {
 64     }
 65 };
 66 
 67 class SamePackageProtectedSerializable
 68 extends Serialize.SamePackageProtectedCtor implements Serializable
 69 {


 70     SamePackageProtectedSerializable() {
 71     }
 72 };
 73 
 74 
 75 class SamePackagePrivateCtor {


 76     private SamePackagePrivateCtor() {
 77     }
 78     public SamePackagePrivateCtor(int l) {
 79     }
 80 };
 81 
 82 class SamePackagePrivateSerializable
 83 extends Serialize.SamePackagePrivateCtor implements Serializable
 84 {


 85     SamePackagePrivateSerializable() {
 86         super(1);
 87     }
 88 };
 89 
 90 class PrivateSerializable
 91 extends NonSerializable.PrivateCtor implements Serializable
 92 {


 93     int field1 = 5;
 94 
 95     PrivateSerializable() {
 96         super(1);
 97     }
 98 };
 99 
100 class ExternalizablePublicCtor implements Externalizable {


101     public ExternalizablePublicCtor() {
102     }
103     public void writeExternal(ObjectOutput out) throws IOException {
104     }
105     public void readExternal(ObjectInput in)
106         throws IOException, ClassNotFoundException
107         {
108         }
109 };
110 

111 class ExternalizableProtectedCtor implements Externalizable {


112     protected ExternalizableProtectedCtor() {
113     }
114     public void writeExternal(ObjectOutput out) throws IOException {
115     }
116     public void readExternal(ObjectInput in)
117         throws IOException, ClassNotFoundException
118         {
119         }
120 };
121 

122 class ExternalizablePackageCtor implements Externalizable {


123     ExternalizablePackageCtor() {
124     }
125     public void writeExternal(ObjectOutput out) throws IOException {
126     }
127     public void readExternal(ObjectInput in)
128         throws IOException, ClassNotFoundException
129         {
130         }
131 };
132 

133 class ExternalizablePrivateCtor implements Externalizable {


134     private ExternalizablePrivateCtor() {
135     }
136     public ExternalizablePrivateCtor(int i) {
137     }
138     public void writeExternal(ObjectOutput out) throws IOException {
139     }
140     public void readExternal(ObjectInput in)
141         throws IOException, ClassNotFoundException
142         {
143         }
144 };
145 
146 
147 public class SubclassAcrossPackage {
148     public static void main(String args[])
149         throws IOException, ClassNotFoundException
150         {
151             ByteArrayOutputStream baos = new ByteArrayOutputStream();
152             ObjectOutputStream out =   new ObjectOutputStream(baos);
153             out.writeObject(new PublicSerializable());
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1998, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @bug 4093279
 26  * REMOVED test, build and run tag since could not get this to work.
 27  * Test is run via shell script, run.sh.
 28  */
 29 
 30 package Serialize;
 31 
 32 import java.io.*;
 33 
 34 class PublicSerializable
 35 extends NonSerializable.PublicCtor implements Serializable
 36 {
<span class="line-added"> 37     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 38 </span>
 39     int field1 = 5;
 40 };
 41 
 42 class ProtectedSerializable
 43 extends NonSerializable.ProtectedCtor implements Serializable
 44 {
<span class="line-added"> 45     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 46 </span>
 47     int field1 = 5;
 48 };
 49 
 50 class DifferentPackageSerializable
 51 extends NonSerializable.PackageCtor implements Serializable
 52 {
<span class="line-added"> 53     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 54 </span>
 55     int field1 = 5;
 56     DifferentPackageSerializable() {
 57         super(1);
 58     }
 59 };
 60 
 61 class SamePackageSerializable
 62 extends Serialize.SamePackageCtor implements Serializable
 63 {
<span class="line-added"> 64     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 65 </span>
 66     SamePackageSerializable() {
 67     }
 68 };
 69 
 70 class SamePackageProtectedCtor {
<span class="line-added"> 71     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 72 </span>
 73     protected SamePackageProtectedCtor() {
 74     }
 75 };
 76 
 77 class SamePackageProtectedSerializable
 78 extends Serialize.SamePackageProtectedCtor implements Serializable
 79 {
<span class="line-added"> 80     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 81 </span>
 82     SamePackageProtectedSerializable() {
 83     }
 84 };
 85 
 86 
 87 class SamePackagePrivateCtor {
<span class="line-added"> 88     private static final long serialVersionUID = 1L;</span>
<span class="line-added"> 89 </span>
 90     private SamePackagePrivateCtor() {
 91     }
 92     public SamePackagePrivateCtor(int l) {
 93     }
 94 };
 95 
 96 class SamePackagePrivateSerializable
 97 extends Serialize.SamePackagePrivateCtor implements Serializable
 98 {
<span class="line-added"> 99     private static final long serialVersionUID = 1L;</span>
<span class="line-added">100 </span>
101     SamePackagePrivateSerializable() {
102         super(1);
103     }
104 };
105 
106 class PrivateSerializable
107 extends NonSerializable.PrivateCtor implements Serializable
108 {
<span class="line-added">109     private static final long serialVersionUID = 1L;</span>
<span class="line-added">110 </span>
111     int field1 = 5;
112 
113     PrivateSerializable() {
114         super(1);
115     }
116 };
117 
118 class ExternalizablePublicCtor implements Externalizable {
<span class="line-added">119     private static final long serialVersionUID = 1L;</span>
<span class="line-added">120 </span>
121     public ExternalizablePublicCtor() {
122     }
123     public void writeExternal(ObjectOutput out) throws IOException {
124     }
125     public void readExternal(ObjectInput in)
126         throws IOException, ClassNotFoundException
127         {
128         }
129 };
130 
<span class="line-added">131 @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested */</span>
132 class ExternalizableProtectedCtor implements Externalizable {
<span class="line-added">133     private static final long serialVersionUID = 1L;</span>
<span class="line-added">134 </span>
135     protected ExternalizableProtectedCtor() {
136     }
137     public void writeExternal(ObjectOutput out) throws IOException {
138     }
139     public void readExternal(ObjectInput in)
140         throws IOException, ClassNotFoundException
141         {
142         }
143 };
144 
<span class="line-added">145 @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested */</span>
146 class ExternalizablePackageCtor implements Externalizable {
<span class="line-added">147     private static final long serialVersionUID = 1L;</span>
<span class="line-added">148 </span>
149     ExternalizablePackageCtor() {
150     }
151     public void writeExternal(ObjectOutput out) throws IOException {
152     }
153     public void readExternal(ObjectInput in)
154         throws IOException, ClassNotFoundException
155         {
156         }
157 };
158 
<span class="line-added">159 @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested */</span>
160 class ExternalizablePrivateCtor implements Externalizable {
<span class="line-added">161     private static final long serialVersionUID = 1L;</span>
<span class="line-added">162 </span>
163     private ExternalizablePrivateCtor() {
164     }
165     public ExternalizablePrivateCtor(int i) {
166     }
167     public void writeExternal(ObjectOutput out) throws IOException {
168     }
169     public void readExternal(ObjectInput in)
170         throws IOException, ClassNotFoundException
171         {
172         }
173 };
174 
175 
176 public class SubclassAcrossPackage {
177     public static void main(String args[])
178         throws IOException, ClassNotFoundException
179         {
180             ByteArrayOutputStream baos = new ByteArrayOutputStream();
181             ObjectOutputStream out =   new ObjectOutputStream(baos);
182             out.writeObject(new PublicSerializable());
</pre>
</td>
</tr>
</table>
<center><a href="../DefaultPackage.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../NPEProvoker/NPEProvoker.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>