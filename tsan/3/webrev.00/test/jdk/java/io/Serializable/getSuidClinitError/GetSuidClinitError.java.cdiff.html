<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/io/Serializable/getSuidClinitError/GetSuidClinitError.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../finalFields/FinalFields.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../lookupInterfaceDesc/LookupInterfaceDesc.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/io/Serializable/getSuidClinitError/GetSuidClinitError.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2001, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2001, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 28,10 ***</span>
<span class="line-new-header">--- 28,11 ---</span>
   *          static initializer method.
   */
  
  import java.io.*;
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class A implements Serializable {
      static {
          // compiler prohibits direct throw
          throwMe(new RuntimeException(&quot;blargh&quot;));
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 39,34 ***</span>
      static void throwMe(RuntimeException ex) throws RuntimeException {
          throw ex;
      }
  }
  
  class B implements Serializable {
  }
  
  class C implements Serializable {
      static { System.out.println(&quot;C.&lt;clinit&gt;&quot;); }
  }
  
  class B1 extends B {
  }
  
  class B2 extends B {
      static { System.out.println(&quot;B2.&lt;clinit&gt;&quot;); }
  }
  
  class C1 extends C {
  }
  
  class C2 extends C {
      static { System.out.println(&quot;C2.&lt;clinit&gt;&quot;); }
  }
  
  public class GetSuidClinitError {
      public static void main(String[] args) throws Exception {
<span class="line-modified">!         Class cl = Class.forName(</span>
              &quot;A&quot;, false, GetSuidClinitError.class.getClassLoader());
          for (int i = 0; i &lt; 2; i++) {
              try {
                  ObjectStreamClass.lookup(cl).getSerialVersionUID();
                  throw new Error();
<span class="line-new-header">--- 40,40 ---</span>
      static void throwMe(RuntimeException ex) throws RuntimeException {
          throw ex;
      }
  }
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class B implements Serializable {
  }
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class C implements Serializable {
      static { System.out.println(&quot;C.&lt;clinit&gt;&quot;); }
  }
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class B1 extends B {
  }
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class B2 extends B {
      static { System.out.println(&quot;B2.&lt;clinit&gt;&quot;); }
  }
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class C1 extends C {
  }
  
<span class="line-added">+ @SuppressWarnings(&quot;serial&quot;) /* Incorrect declarations are being tested. */</span>
  class C2 extends C {
      static { System.out.println(&quot;C2.&lt;clinit&gt;&quot;); }
  }
  
  public class GetSuidClinitError {
      public static void main(String[] args) throws Exception {
<span class="line-modified">!         Class&lt;?&gt; cl = Class.forName(</span>
              &quot;A&quot;, false, GetSuidClinitError.class.getClassLoader());
          for (int i = 0; i &lt; 2; i++) {
              try {
                  ObjectStreamClass.lookup(cl).getSerialVersionUID();
                  throw new Error();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 81,11 ***</span>
                  System.out.println(&quot;warning: caught &quot; + er +
                      &quot; instead of ExceptionInInitializerError&quot;);
              }
          }
  
<span class="line-modified">!         Class[] cls = new Class[] {</span>
              B.class, B1.class, B2.class,
              C.class, C1.class, C2.class
          };
          long[] suids = new long[] {     // 1.3.1 default serialVersionUIDs
              369445310364440919L, 7585771686008346939L, -8952923334200087495L,
<span class="line-new-header">--- 88,11 ---</span>
                  System.out.println(&quot;warning: caught &quot; + er +
                      &quot; instead of ExceptionInInitializerError&quot;);
              }
          }
  
<span class="line-modified">!         Class&lt;?&gt;[] cls = {</span>
              B.class, B1.class, B2.class,
              C.class, C1.class, C2.class
          };
          long[] suids = new long[] {     // 1.3.1 default serialVersionUIDs
              369445310364440919L, 7585771686008346939L, -8952923334200087495L,
</pre>
<center><a href="../finalFields/FinalFields.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../lookupInterfaceDesc/LookupInterfaceDesc.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>