<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/io/Serializable/oldTests/ArraysOfArrays.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="ArrayTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="BinaryTree.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/io/Serializable/oldTests/ArraysOfArrays.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2005, 2010, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2005, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 40,156 ***</span>
          FileOutputStream ostream = null;
          try {
              ostream = new FileOutputStream(&quot;piotest5.tmp&quot;);
              ObjectOutputStream p = new ObjectOutputStream(ostream);
  
<span class="line-modified">!             byte b[][] = {{ 0, 1}, {2,3}};</span>
<span class="line-modified">!             p.writeObject((Object)b);</span>
  
<span class="line-modified">!             short s[][] = {{ 0, 1, 2}, {3,4,5}};</span>
<span class="line-modified">!             p.writeObject((Object)s);</span>
  
<span class="line-modified">!             char c[][] = {{ 0, 1, 2, 3}, {4, 5, 6, 7}};</span>
<span class="line-modified">!             p.writeObject((Object)c);</span>
  
<span class="line-modified">!             int i[][] = {{ 0, 1, 2, 3, 4}, {5, 6, 7, 8, 9}};</span>
<span class="line-modified">!             p.writeObject((Object)i);</span>
  
<span class="line-modified">!             long l[][] = {{ 0, 1, 2, 3, 4, 5}, {6,7,8,9,10,11}};</span>
              p.writeObject((Object)l);
  
<span class="line-modified">!             boolean z[][] = new boolean[2][2];</span>
  
              z[0][0] = true;
              z[0][1] = false;
              z[1] = z[0];        // Use first row same as second
  
<span class="line-modified">!             p.writeObject((Object)z);</span>
  
<span class="line-modified">!             float f[][] = {{ 1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 6.0f},</span>
                  { 1.1f, 2.1f, 3.1f, 4.1f, 5.1f, 6.1f}};
<span class="line-modified">!             p.writeObject((Object)f);</span>
  
<span class="line-modified">!             double d[][] = {{ 1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 6.0f, 7.0d},</span>
                  { 1.1f, 2.1f, 3.1f, 4.1f, 5.1f, 6.1f, 7.1d}};
<span class="line-modified">!             p.writeObject((Object)d);</span>
  
<span class="line-modified">!             Integer Int[][] = {{ new Integer(3), new Integer(2)},</span>
<span class="line-modified">!                 { new Integer(1), new Integer(0)}};</span>
<span class="line-modified">!             p.writeObject((Object)Int);</span>
  
              p.flush();
  
              /* Now read them back and verify
               */
              istream = new FileInputStream(&quot;piotest5.tmp&quot;);
              ObjectInputStream q = new ObjectInputStream(istream);
  
<span class="line-modified">!             byte b_u[][] = (byte [][]) (q.readObject());</span>
              for (int ix = 0; ix &lt; b_u.length; ix++) {
                  for(int iy = 0; iy &lt; b_u[ix].length; iy++) {
                      if (b[ix][iy] != b_u[ix][iy]) {
                          System.err.println(&quot;\nByte array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
                              &quot; actual = &quot; + b_u[ix][iy]);
                          throw new Error();
                      }
                  }
              }
  
  
<span class="line-modified">!             short s_u[][] = (short [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nshort array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             char c_u[][] = (char [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nchar array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             int i_u[][] = (int [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nint array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             long l_u[][] = (long [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nlong array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             boolean z_u[][] = (boolean [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nboolean array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             float f_u[][] = (float [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nfloat array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             double d_u[][] = (double [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\ndouble array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             Integer Int_u[][] = (Integer [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; b_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; b_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (b[ix][iy] != b_u[ix][iy]) {</span>
                          System.err.println(&quot;\nInteger array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot; expected &quot; + b[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + b_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
              System.err.println(&quot;\nTEST PASSED&quot;);
<span class="line-new-header">--- 40,156 ---</span>
          FileOutputStream ostream = null;
          try {
              ostream = new FileOutputStream(&quot;piotest5.tmp&quot;);
              ObjectOutputStream p = new ObjectOutputStream(ostream);
  
<span class="line-modified">!             byte[][] b = {{ 0, 1}, {2,3}};</span>
<span class="line-modified">!             p.writeObject(b);</span>
  
<span class="line-modified">!             short[][] s = {{ 0, 1, 2}, {3,4,5}};</span>
<span class="line-modified">!             p.writeObject(s);</span>
  
<span class="line-modified">!             char[][] c = {{ 0, 1, 2, 3}, {4, 5, 6, 7}};</span>
<span class="line-modified">!             p.writeObject(c);</span>
  
<span class="line-modified">!             int[][] i = {{ 0, 1, 2, 3, 4}, {5, 6, 7, 8, 9}};</span>
<span class="line-modified">!             p.writeObject(i);</span>
  
<span class="line-modified">!             long[][] l = {{ 0, 1, 2, 3, 4, 5}, {6,7,8,9,10,11}};</span>
              p.writeObject((Object)l);
  
<span class="line-modified">!             boolean[][] z = new boolean[2][2];</span>
  
              z[0][0] = true;
              z[0][1] = false;
              z[1] = z[0];        // Use first row same as second
  
<span class="line-modified">!             p.writeObject(z);</span>
  
<span class="line-modified">!             float[][] f = {{ 1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 6.0f},</span>
                  { 1.1f, 2.1f, 3.1f, 4.1f, 5.1f, 6.1f}};
<span class="line-modified">!             p.writeObject(f);</span>
  
<span class="line-modified">!             double[][] d = {{ 1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 6.0f, 7.0d},</span>
                  { 1.1f, 2.1f, 3.1f, 4.1f, 5.1f, 6.1f, 7.1d}};
<span class="line-modified">!             p.writeObject(d);</span>
  
<span class="line-modified">!             Integer Int[][] = {{ 3, 2},</span>
<span class="line-modified">!                                { 1, 0}};</span>
<span class="line-modified">!             p.writeObject(Int);</span>
  
              p.flush();
  
              /* Now read them back and verify
               */
              istream = new FileInputStream(&quot;piotest5.tmp&quot;);
              ObjectInputStream q = new ObjectInputStream(istream);
  
<span class="line-modified">!             byte[][] b_u = (byte [][]) (q.readObject());</span>
              for (int ix = 0; ix &lt; b_u.length; ix++) {
                  for(int iy = 0; iy &lt; b_u[ix].length; iy++) {
                      if (b[ix][iy] != b_u[ix][iy]) {
                          System.err.println(&quot;\nByte array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + b[ix][iy] +</span>
                              &quot; actual = &quot; + b_u[ix][iy]);
                          throw new Error();
                      }
                  }
              }
  
  
<span class="line-modified">!             short[][] s_u = (short [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; s_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; s_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (s[ix][iy] != s_u[ix][iy]) {</span>
                          System.err.println(&quot;\nshort array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + s[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + s_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             char[][] c_u = (char [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; c_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; c_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (c[ix][iy] != c_u[ix][iy]) {</span>
                          System.err.println(&quot;\nchar array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + c[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + c_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             int[][] i_u = (int [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; i_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; i_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (i[ix][iy] != i_u[ix][iy]) {</span>
                          System.err.println(&quot;\nint array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + i[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + i_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             long[][] l_u = (long [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; l_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; l_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (l[ix][iy] != l_u[ix][iy]) {</span>
                          System.err.println(&quot;\nlong array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + l[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + l_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             boolean[][] z_u = (boolean [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; z_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; z_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (z[ix][iy] != z_u[ix][iy]) {</span>
                          System.err.println(&quot;\nboolean array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + z[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + z_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             float[][] f_u = (float [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; f_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; f_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (f[ix][iy] != f_u[ix][iy]) {</span>
                          System.err.println(&quot;\nfloat array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + f[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + f_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             double[][] d_u = (double [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; d_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; d_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (d[ix][iy] != d_u[ix][iy]) {</span>
                          System.err.println(&quot;\ndouble array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + d[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + d_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
  
<span class="line-modified">!             Integer[][] Int_u = (Integer [][])(q.readObject());</span>
<span class="line-modified">!             for (int ix = 0; ix &lt; Int_u.length; ix++) {</span>
<span class="line-modified">!                 for(int iy = 0; iy &lt; Int_u[ix].length; iy++) {</span>
<span class="line-modified">!                     if (!Int[ix][iy].equals(Int_u[ix][iy])) {</span>
                          System.err.println(&quot;\nInteger array mismatch [&quot; +
<span class="line-modified">!                             ix + &quot;][&quot; + iy + &quot;] expected &quot; + Int[ix][iy] +</span>
<span class="line-modified">!                             &quot; actual = &quot; + Int_u[ix][iy]);</span>
                          throw new Error();
                      }
                  }
              }
              System.err.println(&quot;\nTEST PASSED&quot;);
</pre>
<center><a href="ArrayTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="BinaryTree.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>