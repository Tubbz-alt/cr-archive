<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/jdk/java/util/Arrays/Sorting.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
    <script type="text/javascript" src="../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
<a name="1" id="anc1"></a><span class="line-modified">   2  * Copyright (c) 2009, 2011, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /*
  25  * @test
<a name="2" id="anc2"></a><span class="line-modified">  26  * @bug 6880672 6896573 6899694 6976036 7013585 7018258</span>
<span class="line-modified">  27  * @summary Exercise Arrays.sort</span>
  28  * @build Sorting
  29  * @run main Sorting -shortrun
<a name="3" id="anc3"></a>
  30  *
  31  * @author Vladimir Yaroslavskiy
  32  * @author Jon Bentley
  33  * @author Josh Bloch
  34  */
  35 
<a name="4" id="anc4"></a><span class="line-removed">  36 import java.util.Arrays;</span>
<span class="line-removed">  37 import java.util.Random;</span>
  38 import java.io.PrintStream;
<a name="5" id="anc5"></a>


  39 
  40 public class Sorting {
<a name="6" id="anc6"></a>
  41     private static final PrintStream out = System.out;
  42     private static final PrintStream err = System.err;
  43 
  44     // Array lengths used in a long run (default)
  45     private static final int[] LONG_RUN_LENGTHS = {
<a name="7" id="anc7"></a><span class="line-modified">  46         1, 2, 3, 5, 8, 13, 21, 34, 55, 100, 1000, 10000, 100000, 1000000 };</span>
  47 
  48     // Array lengths used in a short run
  49     private static final int[] SHORT_RUN_LENGTHS = {
<a name="8" id="anc8"></a><span class="line-modified">  50         1, 2, 3, 21, 55, 1000, 10000 };</span>
  51 
  52     // Random initial values used in a long run (default)
<a name="9" id="anc9"></a><span class="line-modified">  53     private static final long[] LONG_RUN_RANDOMS = { 666, 0xC0FFEE, 999 };</span>

  54 
  55     // Random initial values used in a short run
<a name="10" id="anc10"></a><span class="line-modified">  56     private static final long[] SHORT_RUN_RANDOMS = { 666 };</span>











  57 
  58     public static void main(String[] args) {
<a name="11" id="anc11"></a><span class="line-removed">  59         boolean shortRun = args.length &gt; 0 &amp;&amp; args[0].equals(&quot;-shortrun&quot;);</span>
  60         long start = System.currentTimeMillis();
<a name="12" id="anc12"></a>









  61 
<a name="13" id="anc13"></a><span class="line-removed">  62         if (shortRun) {</span>
<span class="line-removed">  63             testAndCheck(SHORT_RUN_LENGTHS, SHORT_RUN_RANDOMS);</span>
<span class="line-removed">  64         } else {</span>
<span class="line-removed">  65             testAndCheck(LONG_RUN_LENGTHS, LONG_RUN_RANDOMS);</span>
<span class="line-removed">  66         }</span>
  67         long end = System.currentTimeMillis();
<a name="14" id="anc14"></a>

















































  68 
<a name="15" id="anc15"></a><span class="line-modified">  69         out.format(&quot;PASSED in %d sec.\n&quot;, Math.round((end - start) / 1E3));</span>






  70     }
  71 
<a name="16" id="anc16"></a><span class="line-modified">  72     private static void testAndCheck(int[] lengths, long[] randoms) {</span>
  73         testEmptyAndNullIntArray();
  74         testEmptyAndNullLongArray();
<a name="17" id="anc17"></a><span class="line-removed">  75         testEmptyAndNullShortArray();</span>
<span class="line-removed">  76         testEmptyAndNullCharArray();</span>
  77         testEmptyAndNullByteArray();
<a name="18" id="anc18"></a>

  78         testEmptyAndNullFloatArray();
  79         testEmptyAndNullDoubleArray();
<a name="19" id="anc19"></a>
  80 
<a name="20" id="anc20"></a><span class="line-modified">  81         for (int length : lengths) {</span>
<span class="line-modified">  82             testMergeSort(length);</span>
<span class="line-modified">  83             testAndCheckRange(length);</span>
<span class="line-modified">  84             testAndCheckSubArray(length);</span>
<span class="line-modified">  85         }</span>
<span class="line-modified">  86         for (long seed : randoms) {</span>
<span class="line-modified">  87             for (int length : lengths) {</span>
<span class="line-modified">  88                 testAndCheckWithInsertionSort(length, new MyRandom(seed));</span>
<span class="line-modified">  89                 testAndCheckWithCheckSum(length, new MyRandom(seed));</span>
<span class="line-modified">  90                 testAndCheckWithScrambling(length, new MyRandom(seed));</span>
<span class="line-modified">  91                 testAndCheckFloat(length, new MyRandom(seed));</span>
<span class="line-modified">  92                 testAndCheckDouble(length, new MyRandom(seed));</span>
<span class="line-modified">  93                 testStable(length, new MyRandom(seed));</span>
<span class="line-modified">  94             }</span>
<span class="line-removed">  95         }</span>
  96     }
  97 
<a name="21" id="anc21"></a><span class="line-modified">  98     private static void testEmptyAndNullIntArray() {</span>
<span class="line-modified">  99         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 100         Arrays.sort(new int[] {});</span>
<span class="line-removed"> 101         Arrays.sort(new int[] {}, 0, 0);</span>
 102 
 103         try {
<a name="22" id="anc22"></a><span class="line-modified"> 104             Arrays.sort((int[]) null);</span>
 105         } catch (NullPointerException expected) {
 106             try {
<a name="23" id="anc23"></a><span class="line-modified"> 107                 Arrays.sort((int[]) null, 0, 0);</span>
 108             } catch (NullPointerException expected2) {
 109                 return;
 110             }
<a name="24" id="anc24"></a><span class="line-modified"> 111             failed(&quot;Arrays.sort(int[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 112                 &quot;catch null array&quot;);
 113         }
<a name="25" id="anc25"></a><span class="line-modified"> 114         failed(&quot;Arrays.sort(int[]) shouldn&#39;t catch null array&quot;);</span>
 115     }
 116 
<a name="26" id="anc26"></a><span class="line-modified"> 117     private static void testEmptyAndNullLongArray() {</span>
<span class="line-modified"> 118         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 119         Arrays.sort(new long[] {});</span>
<span class="line-removed"> 120         Arrays.sort(new long[] {}, 0, 0);</span>
 121 
 122         try {
<a name="27" id="anc27"></a><span class="line-modified"> 123             Arrays.sort((long[]) null);</span>
 124         } catch (NullPointerException expected) {
 125             try {
<a name="28" id="anc28"></a><span class="line-modified"> 126                 Arrays.sort((long[]) null, 0, 0);</span>
 127             } catch (NullPointerException expected2) {
 128                 return;
 129             }
<a name="29" id="anc29"></a><span class="line-modified"> 130             failed(&quot;Arrays.sort(long[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 131                 &quot;catch null array&quot;);
 132         }
<a name="30" id="anc30"></a><span class="line-modified"> 133         failed(&quot;Arrays.sort(long[]) shouldn&#39;t catch null array&quot;);</span>
 134     }
 135 
<a name="31" id="anc31"></a><span class="line-modified"> 136     private static void testEmptyAndNullShortArray() {</span>
<span class="line-modified"> 137         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 138         Arrays.sort(new short[] {});</span>
<span class="line-removed"> 139         Arrays.sort(new short[] {}, 0, 0);</span>
 140 
 141         try {
<a name="32" id="anc32"></a><span class="line-modified"> 142             Arrays.sort((short[]) null);</span>
 143         } catch (NullPointerException expected) {
 144             try {
<a name="33" id="anc33"></a><span class="line-modified"> 145                 Arrays.sort((short[]) null, 0, 0);</span>
 146             } catch (NullPointerException expected2) {
 147                 return;
 148             }
<a name="34" id="anc34"></a><span class="line-modified"> 149             failed(&quot;Arrays.sort(short[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 150                 &quot;catch null array&quot;);
 151         }
<a name="35" id="anc35"></a><span class="line-modified"> 152         failed(&quot;Arrays.sort(short[]) shouldn&#39;t catch null array&quot;);</span>
 153     }
 154 
<a name="36" id="anc36"></a><span class="line-modified"> 155     private static void testEmptyAndNullCharArray() {</span>
<span class="line-modified"> 156         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 157         Arrays.sort(new char[] {});</span>
<span class="line-removed"> 158         Arrays.sort(new char[] {}, 0, 0);</span>
 159 
 160         try {
<a name="37" id="anc37"></a><span class="line-modified"> 161             Arrays.sort((char[]) null);</span>
 162         } catch (NullPointerException expected) {
 163             try {
<a name="38" id="anc38"></a><span class="line-modified"> 164                 Arrays.sort((char[]) null, 0, 0);</span>
 165             } catch (NullPointerException expected2) {
 166                 return;
 167             }
<a name="39" id="anc39"></a><span class="line-modified"> 168             failed(&quot;Arrays.sort(char[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 169                 &quot;catch null array&quot;);
 170         }
<a name="40" id="anc40"></a><span class="line-modified"> 171         failed(&quot;Arrays.sort(char[]) shouldn&#39;t catch null array&quot;);</span>
 172     }
 173 
<a name="41" id="anc41"></a><span class="line-modified"> 174     private static void testEmptyAndNullByteArray() {</span>
<span class="line-modified"> 175         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 176         Arrays.sort(new byte[] {});</span>
<span class="line-removed"> 177         Arrays.sort(new byte[] {}, 0, 0);</span>
 178 
 179         try {
<a name="42" id="anc42"></a><span class="line-modified"> 180             Arrays.sort((byte[]) null);</span>
 181         } catch (NullPointerException expected) {
 182             try {
<a name="43" id="anc43"></a><span class="line-modified"> 183                 Arrays.sort((byte[]) null, 0, 0);</span>
 184             } catch (NullPointerException expected2) {
 185                 return;
 186             }
<a name="44" id="anc44"></a><span class="line-modified"> 187             failed(&quot;Arrays.sort(byte[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 188                 &quot;catch null array&quot;);
 189         }
<a name="45" id="anc45"></a><span class="line-modified"> 190         failed(&quot;Arrays.sort(byte[]) shouldn&#39;t catch null array&quot;);</span>
 191     }
 192 
<a name="46" id="anc46"></a><span class="line-modified"> 193     private static void testEmptyAndNullFloatArray() {</span>
<span class="line-modified"> 194         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 195         Arrays.sort(new float[] {});</span>
<span class="line-removed"> 196         Arrays.sort(new float[] {}, 0, 0);</span>
 197 
 198         try {
<a name="47" id="anc47"></a><span class="line-modified"> 199             Arrays.sort((float[]) null);</span>
 200         } catch (NullPointerException expected) {
 201             try {
<a name="48" id="anc48"></a><span class="line-modified"> 202                 Arrays.sort((float[]) null, 0, 0);</span>
 203             } catch (NullPointerException expected2) {
 204                 return;
 205             }
<a name="49" id="anc49"></a><span class="line-modified"> 206             failed(&quot;Arrays.sort(float[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 207                 &quot;catch null array&quot;);
 208         }
<a name="50" id="anc50"></a><span class="line-modified"> 209         failed(&quot;Arrays.sort(float[]) shouldn&#39;t catch null array&quot;);</span>
 210     }
 211 
<a name="51" id="anc51"></a><span class="line-modified"> 212     private static void testEmptyAndNullDoubleArray() {</span>
<span class="line-modified"> 213         ourDescription = &quot;Check empty and null array&quot;;</span>
<span class="line-modified"> 214         Arrays.sort(new double[] {});</span>
<span class="line-removed"> 215         Arrays.sort(new double[] {}, 0, 0);</span>
 216 
 217         try {
<a name="52" id="anc52"></a><span class="line-modified"> 218             Arrays.sort((double[]) null);</span>
 219         } catch (NullPointerException expected) {
 220             try {
<a name="53" id="anc53"></a><span class="line-modified"> 221                 Arrays.sort((double[]) null, 0, 0);</span>
 222             } catch (NullPointerException expected2) {
 223                 return;
 224             }
<a name="54" id="anc54"></a><span class="line-modified"> 225             failed(&quot;Arrays.sort(double[],fromIndex,toIndex) shouldn&#39;t &quot; +</span>
 226                 &quot;catch null array&quot;);
 227         }
<a name="55" id="anc55"></a><span class="line-modified"> 228         failed(&quot;Arrays.sort(double[]) shouldn&#39;t catch null array&quot;);</span>
 229     }
 230 
<a name="56" id="anc56"></a><span class="line-modified"> 231     private static void testAndCheckSubArray(int length) {</span>
<span class="line-modified"> 232         ourDescription = &quot;Check sorting of subarray&quot;;</span>
<span class="line-modified"> 233         int[] golden = new int[length];</span>
<span class="line-modified"> 234         boolean newLine = false;</span>
<span class="line-modified"> 235 </span>
<span class="line-removed"> 236         for (int m = 1; m &lt; length / 2; m *= 2) {</span>
<span class="line-removed"> 237             newLine = true;</span>
 238             int fromIndex = m;
 239             int toIndex = length - m;
 240 
<a name="57" id="anc57"></a><span class="line-modified"> 241             prepareSubArray(golden, fromIndex, toIndex, m);</span>
<span class="line-modified"> 242             int[] test = golden.clone();</span>
 243 
<a name="58" id="anc58"></a><span class="line-modified"> 244             for (TypeConverter converter : TypeConverter.values()) {</span>
<span class="line-modified"> 245                 out.println(&quot;Test &#39;subarray&#39;: &quot; + converter +</span>
<span class="line-modified"> 246                    &quot; length = &quot; + length + &quot;, m = &quot; + m);</span>
<span class="line-modified"> 247                 Object convertedGolden = converter.convert(golden);</span>
<span class="line-modified"> 248                 Object convertedTest = converter.convert(test);</span>
<span class="line-removed"> 249                 sortSubArray(convertedTest, fromIndex, toIndex);</span>
<span class="line-removed"> 250                 checkSubArray(convertedTest, fromIndex, toIndex, m);</span>
 251             }
 252         }
<a name="59" id="anc59"></a><span class="line-modified"> 253         if (newLine) {</span>
<span class="line-removed"> 254             out.println();</span>
<span class="line-removed"> 255         }</span>
 256     }
 257 
<a name="60" id="anc60"></a><span class="line-modified"> 258     private static void testAndCheckRange(int length) {</span>
<span class="line-modified"> 259         ourDescription = &quot;Check range check&quot;;</span>
<span class="line-modified"> 260         int[] golden = new int[length];</span>
<span class="line-modified"> 261 </span>
<span class="line-modified"> 262         for (int m = 1; m &lt; 2 * length; m *= 2) {</span>
 263             for (int i = 1; i &lt;= length; i++) {
<a name="61" id="anc61"></a><span class="line-modified"> 264                 golden[i - 1] = i % m + m % i;</span>
 265             }
<a name="62" id="anc62"></a><span class="line-modified"> 266             for (TypeConverter converter : TypeConverter.values()) {</span>
<span class="line-modified"> 267                 out.println(&quot;Test &#39;range&#39;: &quot; + converter +</span>
<span class="line-modified"> 268                    &quot;, length = &quot; + length + &quot;, m = &quot; + m);</span>
<span class="line-modified"> 269                 Object convertedGolden = converter.convert(golden);</span>
<span class="line-modified"> 270                 checkRange(convertedGolden, m);</span>

 271             }
 272         }
 273         out.println();
 274     }
 275 
<a name="63" id="anc63"></a><span class="line-modified"> 276     private static void testStable(int length, MyRandom random) {</span>
<span class="line-removed"> 277         ourDescription = &quot;Check if sorting is stable&quot;;</span>
<span class="line-removed"> 278         Pair[] a = build(length, random);</span>
<span class="line-removed"> 279 </span>
<span class="line-removed"> 280         out.println(&quot;Test &#39;stable&#39;: &quot; + &quot;random = &quot; + random.getSeed() +</span>
<span class="line-removed"> 281             &quot;, length = &quot; + length);</span>
<span class="line-removed"> 282         Arrays.sort(a);</span>
<span class="line-removed"> 283         checkSorted(a);</span>
<span class="line-removed"> 284         checkStable(a);</span>
<span class="line-removed"> 285         out.println();</span>
<span class="line-removed"> 286     }</span>
<span class="line-removed"> 287 </span>
<span class="line-removed"> 288     private static void checkSorted(Pair[] a) {</span>
 289         for (int i = 0; i &lt; a.length - 1; i++) {
 290             if (a[i].getKey() &gt; a[i + 1].getKey()) {
<a name="64" id="anc64"></a><span class="line-modified"> 291                 failedSort(i, &quot;&quot; + a[i].getKey(), &quot;&quot; + a[i + 1].getKey());</span>

 292             }
 293         }
 294     }
 295 
<a name="65" id="anc65"></a><span class="line-modified"> 296     private static void checkStable(Pair[] a) {</span>
 297         for (int i = 0; i &lt; a.length / 4; ) {
 298             int key1 = a[i].getKey();
 299             int value1 = a[i++].getValue();
 300             int key2 = a[i].getKey();
 301             int value2 = a[i++].getValue();
 302             int key3 = a[i].getKey();
 303             int value3 = a[i++].getValue();
 304             int key4 = a[i].getKey();
 305             int value4 = a[i++].getValue();
 306 
 307             if (!(key1 == key2 &amp;&amp; key2 == key3 &amp;&amp; key3 == key4)) {
<a name="66" id="anc66"></a><span class="line-modified"> 308                 failed(&quot;On position &quot; + i + &quot; keys are different &quot; +</span>
<span class="line-modified"> 309                     key1 + &quot;, &quot; + key2 + &quot;, &quot; + key3 + &quot;, &quot; + key4);</span>
 310             }
 311             if (!(value1 &lt; value2 &amp;&amp; value2 &lt; value3 &amp;&amp; value3 &lt; value4)) {
<a name="67" id="anc67"></a><span class="line-modified"> 312                 failed(&quot;Sorting is not stable at position &quot; + i +</span>
<span class="line-modified"> 313                     &quot;. Second values have been changed: &quot; +  value1 + &quot;, &quot; +</span>
 314                     value2 + &quot;, &quot; + value3 + &quot;, &quot; + value4);
 315             }
 316         }
 317     }
 318 
<a name="68" id="anc68"></a><span class="line-modified"> 319     private static Pair[] build(int length, Random random) {</span>
 320         Pair[] a = new Pair[length * 4];
 321 
 322         for (int i = 0; i &lt; a.length; ) {
 323             int key = random.nextInt();
 324             a[i++] = new Pair(key, 1);
 325             a[i++] = new Pair(key, 2);
 326             a[i++] = new Pair(key, 3);
 327             a[i++] = new Pair(key, 4);
 328         }
 329         return a;
 330     }
 331 
<a name="69" id="anc69"></a><span class="line-modified"> 332     private static final class Pair implements Comparable&lt;Pair&gt; {</span>
<span class="line-removed"> 333         Pair(int key, int value) {</span>
<span class="line-removed"> 334             myKey = key;</span>
<span class="line-removed"> 335             myValue = value;</span>
<span class="line-removed"> 336         }</span>
<span class="line-removed"> 337 </span>
<span class="line-removed"> 338         int getKey() {</span>
<span class="line-removed"> 339             return myKey;</span>
<span class="line-removed"> 340         }</span>
<span class="line-removed"> 341 </span>
<span class="line-removed"> 342         int getValue() {</span>
<span class="line-removed"> 343             return myValue;</span>
<span class="line-removed"> 344         }</span>
<span class="line-removed"> 345 </span>
<span class="line-removed"> 346         public int compareTo(Pair pair) {</span>
<span class="line-removed"> 347             if (myKey &lt; pair.myKey) {</span>
<span class="line-removed"> 348                 return -1;</span>
<span class="line-removed"> 349             }</span>
<span class="line-removed"> 350             if (myKey &gt; pair.myKey) {</span>
<span class="line-removed"> 351                 return 1;</span>
<span class="line-removed"> 352             }</span>
<span class="line-removed"> 353             return 0;</span>
<span class="line-removed"> 354         }</span>
<span class="line-removed"> 355 </span>
<span class="line-removed"> 356         @Override</span>
<span class="line-removed"> 357         public String toString() {</span>
<span class="line-removed"> 358             return &quot;(&quot; + myKey + &quot;, &quot; + myValue + &quot;)&quot;;</span>
<span class="line-removed"> 359         }</span>
<span class="line-removed"> 360 </span>
<span class="line-removed"> 361         private int myKey;</span>
<span class="line-removed"> 362         private int myValue;</span>
<span class="line-removed"> 363     }</span>
<span class="line-removed"> 364 </span>
<span class="line-removed"> 365 </span>
<span class="line-removed"> 366     private static void testAndCheckWithInsertionSort(int length, MyRandom random) {</span>
 367         if (length &gt; 1000) {
 368             return;
 369         }
<a name="70" id="anc70"></a><span class="line-modified"> 370         ourDescription = &quot;Check sorting with insertion sort&quot;;</span>
<span class="line-removed"> 371         int[] golden = new int[length];</span>
<span class="line-removed"> 372 </span>
<span class="line-removed"> 373         for (int m = 1; m &lt; 2 * length; m *= 2) {</span>
 374             for (UnsortedBuilder builder : UnsortedBuilder.values()) {
<a name="71" id="anc71"></a><span class="line-modified"> 375                 builder.build(golden, m, random);</span>
<span class="line-modified"> 376                 int[] test = golden.clone();</span>
<span class="line-modified"> 377 </span>
<span class="line-modified"> 378                 for (TypeConverter converter : TypeConverter.values()) {</span>
<span class="line-modified"> 379                     out.println(&quot;Test &#39;insertion sort&#39;: &quot; + converter +</span>
<span class="line-modified"> 380                         &quot; &quot; + builder + &quot;random = &quot; + random.getSeed() +</span>
<span class="line-modified"> 381                         &quot;, length = &quot; + length + &quot;, m = &quot; + m);</span>
<span class="line-modified"> 382                     Object convertedGolden = converter.convert(golden);</span>
<span class="line-modified"> 383                     Object convertedTest1 = converter.convert(test);</span>
<span class="line-removed"> 384                     Object convertedTest2 = converter.convert(test);</span>
<span class="line-removed"> 385                     sort(convertedTest1);</span>
<span class="line-removed"> 386                     sortByInsertionSort(convertedTest2);</span>
<span class="line-removed"> 387                     compare(convertedTest1, convertedTest2);</span>
 388                 }
 389             }
 390         }
 391         out.println();
 392     }
 393 
<a name="72" id="anc72"></a><span class="line-modified"> 394     private static void testMergeSort(int length) {</span>
<span class="line-modified"> 395         if (length &lt; 1000) {</span>
 396             return;
 397         }
<a name="73" id="anc73"></a><span class="line-modified"> 398         ourDescription = &quot;Check merge sorting&quot;;</span>
<span class="line-modified"> 399         int[] golden = new int[length];</span>
<span class="line-modified"> 400         int period = 67; // java.util.DualPivotQuicksort.MAX_RUN_COUNT</span>
<span class="line-modified"> 401 </span>
<span class="line-modified"> 402         for (int m = period - 2; m &lt;= period + 2; m++) {</span>
<span class="line-modified"> 403             for (MergeBuilder builder : MergeBuilder.values()) {</span>
<span class="line-modified"> 404                 builder.build(golden, m);</span>
<span class="line-modified"> 405                 int[] test = golden.clone();</span>
<span class="line-modified"> 406 </span>
<span class="line-modified"> 407                 for (TypeConverter converter : TypeConverter.values()) {</span>
<span class="line-modified"> 408                     out.println(&quot;Test &#39;merge sort&#39;: &quot; + converter + &quot; &quot; +</span>
<span class="line-modified"> 409                         builder + &quot;length = &quot; + length + &quot;, m = &quot; + m);</span>
<span class="line-removed"> 410                     Object convertedGolden = converter.convert(golden);</span>
<span class="line-removed"> 411                     sort(convertedGolden);</span>
<span class="line-removed"> 412                     checkSorted(convertedGolden);</span>
 413                 }
 414             }
 415         }
 416         out.println();
 417     }
 418 
<a name="74" id="anc74"></a><span class="line-modified"> 419     private static void testAndCheckWithCheckSum(int length, MyRandom random) {</span>
<span class="line-modified"> 420         ourDescription = &quot;Check sorting with check sum&quot;;</span>
<span class="line-removed"> 421         int[] golden = new int[length];</span>
<span class="line-removed"> 422 </span>
<span class="line-removed"> 423         for (int m = 1; m &lt; 2 * length; m *= 2) {</span>
 424             for (UnsortedBuilder builder : UnsortedBuilder.values()) {
<a name="75" id="anc75"></a><span class="line-modified"> 425                 builder.build(golden, m, random);</span>
<span class="line-modified"> 426                 int[] test = golden.clone();</span>
<span class="line-modified"> 427 </span>
<span class="line-modified"> 428                 for (TypeConverter converter : TypeConverter.values()) {</span>
<span class="line-modified"> 429                     out.println(&quot;Test &#39;check sum&#39;: &quot; + converter +</span>
<span class="line-modified"> 430                         &quot; &quot; + builder + &quot;random = &quot; + random.getSeed() +</span>
<span class="line-modified"> 431                         &quot;, length = &quot; + length + &quot;, m = &quot; + m);</span>
<span class="line-modified"> 432                     Object convertedGolden = converter.convert(golden);</span>
<span class="line-removed"> 433                     Object convertedTest = converter.convert(test);</span>
<span class="line-removed"> 434                     sort(convertedTest);</span>
<span class="line-removed"> 435                     checkWithCheckSum(convertedTest, convertedGolden);</span>
 436                 }
 437             }
 438         }
 439         out.println();
 440     }
 441 
<a name="76" id="anc76"></a><span class="line-modified"> 442     private static void testAndCheckWithScrambling(int length, MyRandom random) {</span>
<span class="line-modified"> 443         ourDescription = &quot;Check sorting with scrambling&quot;;</span>
<span class="line-removed"> 444         int[] golden = new int[length];</span>
<span class="line-removed"> 445 </span>
<span class="line-removed"> 446         for (int m = 1; m &lt;= 7; m++) {</span>
<span class="line-removed"> 447             if (m &gt; length) {</span>
<span class="line-removed"> 448                 break;</span>
<span class="line-removed"> 449             }</span>
 450             for (SortedBuilder builder : SortedBuilder.values()) {
<a name="77" id="anc77"></a><span class="line-modified"> 451                 builder.build(golden, m);</span>
<span class="line-modified"> 452                 int[] test = golden.clone();</span>
<span class="line-modified"> 453                 scramble(test, random);</span>
<span class="line-modified"> 454 </span>
<span class="line-modified"> 455                 for (TypeConverter converter : TypeConverter.values()) {</span>
<span class="line-modified"> 456                     out.println(&quot;Test &#39;scrambling&#39;: &quot; + converter +</span>
<span class="line-modified"> 457                        &quot; &quot; + builder + &quot;random = &quot; + random.getSeed() +</span>
<span class="line-modified"> 458                        &quot;, length = &quot; + length + &quot;, m = &quot; + m);</span>
<span class="line-modified"> 459                     Object convertedGolden = converter.convert(golden);</span>
<span class="line-removed"> 460                     Object convertedTest = converter.convert(test);</span>
<span class="line-removed"> 461                     sort(convertedTest);</span>
<span class="line-removed"> 462                     compare(convertedTest, convertedGolden);</span>
 463                 }
 464             }
 465         }
 466         out.println();
 467     }
 468 
<a name="78" id="anc78"></a><span class="line-modified"> 469     private static void testAndCheckFloat(int length, MyRandom random) {</span>
<span class="line-modified"> 470         ourDescription = &quot;Check float sorting&quot;;</span>
<span class="line-modified"> 471         float[] golden = new float[length];</span>
<span class="line-removed"> 472         final int MAX = 10;</span>
<span class="line-removed"> 473         boolean newLine = false;</span>
 474 
<a name="79" id="anc79"></a><span class="line-modified"> 475         for (int a = 0; a &lt;= MAX; a++) {</span>
<span class="line-modified"> 476             for (int g = 0; g &lt;= MAX; g++) {</span>
<span class="line-modified"> 477                 for (int z = 0; z &lt;= MAX; z++) {</span>
<span class="line-modified"> 478                     for (int n = 0; n &lt;= MAX; n++) {</span>
<span class="line-modified"> 479                         for (int p = 0; p &lt;= MAX; p++) {</span>
<span class="line-removed"> 480                             if (a + g + z + n + p &gt; length) {</span>
<span class="line-removed"> 481                                 continue;</span>
<span class="line-removed"> 482                             }</span>
<span class="line-removed"> 483                             if (a + g + z + n + p &lt; length) {</span>
<span class="line-removed"> 484                                 continue;</span>
<span class="line-removed"> 485                             }</span>
<span class="line-removed"> 486                             for (FloatBuilder builder : FloatBuilder.values()) {</span>
<span class="line-removed"> 487                                 out.println(&quot;Test &#39;float&#39;: random = &quot; + random.getSeed() +</span>
<span class="line-removed"> 488                                    &quot;, length = &quot; + length + &quot;, a = &quot; + a + &quot;, g = &quot; +</span>
<span class="line-removed"> 489                                    g + &quot;, z = &quot; + z + &quot;, n = &quot; + n + &quot;, p = &quot; + p);</span>
<span class="line-removed"> 490                                 builder.build(golden, a, g, z, n, p, random);</span>
<span class="line-removed"> 491                                 float[] test = golden.clone();</span>
<span class="line-removed"> 492                                 scramble(test, random);</span>
<span class="line-removed"> 493                                 sort(test);</span>
<span class="line-removed"> 494                                 compare(test, golden, a, n, g);</span>
<span class="line-removed"> 495                             }</span>
<span class="line-removed"> 496                             newLine = true;</span>
<span class="line-removed"> 497                         }</span>
<span class="line-removed"> 498                     }</span>
<span class="line-removed"> 499                 }</span>
<span class="line-removed"> 500             }</span>
<span class="line-removed"> 501         }</span>
<span class="line-removed"> 502         if (newLine) {</span>
<span class="line-removed"> 503             out.println();</span>
 504         }
<a name="80" id="anc80"></a>
 505     }
 506 
<a name="81" id="anc81"></a><span class="line-modified"> 507     private static void testAndCheckDouble(int length, MyRandom random) {</span>
<span class="line-modified"> 508         ourDescription = &quot;Check double sorting&quot;;</span>
<span class="line-modified"> 509         double[] golden = new double[length];</span>
<span class="line-modified"> 510         final int MAX = 10;</span>
<span class="line-modified"> 511         boolean newLine = false;</span>
 512 
<a name="82" id="anc82"></a><span class="line-modified"> 513         for (int a = 0; a &lt;= MAX; a++) {</span>
<span class="line-modified"> 514             for (int g = 0; g &lt;= MAX; g++) {</span>
<span class="line-modified"> 515                 for (int z = 0; z &lt;= MAX; z++) {</span>
<span class="line-modified"> 516                     for (int n = 0; n &lt;= MAX; n++) {</span>
<span class="line-modified"> 517                         for (int p = 0; p &lt;= MAX; p++) {</span>
<span class="line-modified"> 518                             if (a + g + z + n + p &gt; length) {</span>
<span class="line-removed"> 519                                 continue;</span>
<span class="line-removed"> 520                             }</span>
<span class="line-removed"> 521                             if (a + g + z + n + p &lt; length) {</span>
 522                                 continue;
 523                             }
<a name="83" id="anc83"></a><span class="line-modified"> 524                             for (DoubleBuilder builder : DoubleBuilder.values()) {</span>
<span class="line-modified"> 525                                 out.println(&quot;Test &#39;double&#39;: random = &quot; + random.getSeed() +</span>
<span class="line-modified"> 526                                    &quot;, length = &quot; + length + &quot;, a = &quot; + a + &quot;, g = &quot; +</span>
<span class="line-modified"> 527                                    g + &quot;, z = &quot; + z + &quot;, n = &quot; + n + &quot;, p = &quot; + p);</span>
<span class="line-modified"> 528                                 builder.build(golden, a, g, z, n, p, random);</span>
<span class="line-modified"> 529                                 double[] test = golden.clone();</span>
<span class="line-modified"> 530                                 scramble(test, random);</span>
<span class="line-modified"> 531                                 sort(test);</span>
<span class="line-modified"> 532                                 compare(test, golden, a, n, g);</span>

 533                             }
<a name="84" id="anc84"></a><span class="line-removed"> 534                             newLine = true;</span>
 535                         }
 536                     }
 537                 }
 538             }
 539         }
<a name="85" id="anc85"></a><span class="line-modified"> 540         if (newLine) {</span>
<span class="line-modified"> 541             out.println();</span>















 542         }
<a name="86" id="anc86"></a>
 543     }
 544 
<a name="87" id="anc87"></a><span class="line-modified"> 545     private static void prepareSubArray(int[] a, int fromIndex, int toIndex, int m) {</span>
 546         for (int i = 0; i &lt; fromIndex; i++) {
<a name="88" id="anc88"></a><span class="line-modified"> 547             a[i] = 0xDEDA;</span>
 548         }
 549         int middle = (fromIndex + toIndex) &gt;&gt;&gt; 1;
 550         int k = 0;
 551 
 552         for (int i = fromIndex; i &lt; middle; i++) {
 553             a[i] = k++;
 554         }
<a name="89" id="anc89"></a>
 555         for (int i = middle; i &lt; toIndex; i++) {
 556             a[i] = k--;
 557         }
<a name="90" id="anc90"></a>
 558         for (int i = toIndex; i &lt; a.length; i++) {
<a name="91" id="anc91"></a><span class="line-modified"> 559             a[i] = 0xBABA;</span>




















 560         }
 561     }
 562 
<a name="92" id="anc92"></a><span class="line-modified"> 563     private static void scramble(int[] a, Random random) {</span>
 564         for (int i = 0; i &lt; a.length * 7; i++) {
 565             swap(a, random.nextInt(a.length), random.nextInt(a.length));
 566         }
 567     }
 568 
<a name="93" id="anc93"></a><span class="line-modified"> 569     private static void scramble(float[] a, Random random) {</span>
 570         for (int i = 0; i &lt; a.length * 7; i++) {
 571             swap(a, random.nextInt(a.length), random.nextInt(a.length));
 572         }
 573     }
 574 
<a name="94" id="anc94"></a><span class="line-modified"> 575     private static void scramble(double[] a, Random random) {</span>
 576         for (int i = 0; i &lt; a.length * 7; i++) {
 577             swap(a, random.nextInt(a.length), random.nextInt(a.length));
 578         }
 579     }
 580 
<a name="95" id="anc95"></a><span class="line-modified"> 581     private static void swap(int[] a, int i, int j) {</span>
<span class="line-modified"> 582         int t = a[i];</span>
<span class="line-modified"> 583         a[i] = a[j];</span>
<span class="line-modified"> 584         a[j] = t;</span>
 585     }
 586 
<a name="96" id="anc96"></a><span class="line-modified"> 587     private static void swap(float[] a, int i, int j) {</span>
<span class="line-modified"> 588         float t = a[i];</span>
<span class="line-modified"> 589         a[i] = a[j];</span>
<span class="line-modified"> 590         a[j] = t;</span>
 591     }
 592 
<a name="97" id="anc97"></a><span class="line-modified"> 593     private static void swap(double[] a, int i, int j) {</span>
<span class="line-modified"> 594         double t = a[i];</span>
<span class="line-modified"> 595         a[i] = a[j];</span>
<span class="line-modified"> 596         a[j] = t;</span>
 597     }
 598 
<a name="98" id="anc98"></a><span class="line-modified"> 599     private static enum TypeConverter {</span>
<span class="line-modified"> 600         INT {</span>
<span class="line-modified"> 601             Object convert(int[] a) {</span>
<span class="line-modified"> 602                 return a.clone();</span>
<span class="line-modified"> 603             }</span>
<span class="line-removed"> 604         },</span>
<span class="line-removed"> 605         LONG {</span>
<span class="line-removed"> 606             Object convert(int[] a) {</span>
<span class="line-removed"> 607                 long[] b = new long[a.length];</span>
 608 
<a name="99" id="anc99"></a><span class="line-modified"> 609                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 610                     b[i] = (long) a[i];</span>
<span class="line-modified"> 611                 }</span>
<span class="line-removed"> 612                 return b;</span>
<span class="line-removed"> 613             }</span>
<span class="line-removed"> 614         },</span>
<span class="line-removed"> 615         BYTE {</span>
<span class="line-removed"> 616             Object convert(int[] a) {</span>
<span class="line-removed"> 617                 byte[] b = new byte[a.length];</span>
 618 
<a name="100" id="anc100"></a><span class="line-modified"> 619                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 620                     b[i] = (byte) a[i];</span>
<span class="line-modified"> 621                 }</span>
<span class="line-removed"> 622                 return b;</span>
<span class="line-removed"> 623             }</span>
<span class="line-removed"> 624         },</span>
<span class="line-removed"> 625         SHORT {</span>
<span class="line-removed"> 626             Object convert(int[] a) {</span>
<span class="line-removed"> 627                 short[] b = new short[a.length];</span>
 628 
<a name="101" id="anc101"></a><span class="line-modified"> 629                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 630                     b[i] = (short) a[i];</span>
<span class="line-modified"> 631                 }</span>
<span class="line-removed"> 632                 return b;</span>
<span class="line-removed"> 633             }</span>
<span class="line-removed"> 634         },</span>
<span class="line-removed"> 635         CHAR {</span>
<span class="line-removed"> 636             Object convert(int[] a) {</span>
<span class="line-removed"> 637                 char[] b = new char[a.length];</span>
 638 
<a name="102" id="anc102"></a><span class="line-modified"> 639                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 640                     b[i] = (char) a[i];</span>
<span class="line-modified"> 641                 }</span>
<span class="line-removed"> 642                 return b;</span>
<span class="line-removed"> 643             }</span>
<span class="line-removed"> 644         },</span>
<span class="line-removed"> 645         FLOAT {</span>
<span class="line-removed"> 646             Object convert(int[] a) {</span>
<span class="line-removed"> 647                 float[] b = new float[a.length];</span>
 648 
<a name="103" id="anc103"></a><span class="line-modified"> 649                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 650                     b[i] = (float) a[i];</span>
<span class="line-modified"> 651                 }</span>
<span class="line-removed"> 652                 return b;</span>
<span class="line-removed"> 653             }</span>
<span class="line-removed"> 654         },</span>
<span class="line-removed"> 655         DOUBLE {</span>
<span class="line-removed"> 656             Object convert(int[] a) {</span>
<span class="line-removed"> 657                 double[] b = new double[a.length];</span>
 658 
<a name="104" id="anc104"></a><span class="line-modified"> 659                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 660                     b[i] = (double) a[i];</span>
<span class="line-modified"> 661                 }</span>
<span class="line-removed"> 662                 return b;</span>
<span class="line-removed"> 663             }</span>
<span class="line-removed"> 664         },</span>
<span class="line-removed"> 665         INTEGER {</span>
<span class="line-removed"> 666             Object convert(int[] a) {</span>
<span class="line-removed"> 667                 Integer[] b = new Integer[a.length];</span>
 668 
<a name="105" id="anc105"></a><span class="line-modified"> 669                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified"> 670                     b[i] = new Integer(a[i]);</span>
<span class="line-modified"> 671                 }</span>
<span class="line-removed"> 672                 return b;</span>
<span class="line-removed"> 673             }</span>
<span class="line-removed"> 674         };</span>
 675 
<a name="106" id="anc106"></a><span class="line-modified"> 676         abstract Object convert(int[] a);</span>



 677 
<a name="107" id="anc107"></a><span class="line-modified"> 678         @Override public String toString() {</span>
<span class="line-modified"> 679             String name = name();</span>


 680 
<a name="108" id="anc108"></a><span class="line-modified"> 681             for (int i = name.length(); i &lt; 9; i++) {</span>
<span class="line-modified"> 682                 name += &quot; &quot;;</span>
<span class="line-modified"> 683             }</span>
<span class="line-modified"> 684             return name;</span>



 685         }
 686     }
 687 
<a name="109" id="anc109"></a><span class="line-modified"> 688     private static enum FloatBuilder {</span>
<span class="line-modified"> 689         SIMPLE {</span>
<span class="line-modified"> 690             void build(float[] x, int a, int g, int z, int n, int p, Random random) {</span>
<span class="line-modified"> 691                 int fromIndex = 0;</span>
<span class="line-removed"> 692                 float negativeValue = -random.nextFloat();</span>
<span class="line-removed"> 693                 float positiveValue =  random.nextFloat();</span>
<span class="line-removed"> 694 </span>
<span class="line-removed"> 695                 writeValue(x, negativeValue, fromIndex, n);</span>
<span class="line-removed"> 696                 fromIndex += n;</span>
<span class="line-removed"> 697 </span>
<span class="line-removed"> 698                 writeValue(x, -0.0f, fromIndex, g);</span>
<span class="line-removed"> 699                 fromIndex += g;</span>
<span class="line-removed"> 700 </span>
<span class="line-removed"> 701                 writeValue(x, 0.0f, fromIndex, z);</span>
<span class="line-removed"> 702                 fromIndex += z;</span>
<span class="line-removed"> 703 </span>
<span class="line-removed"> 704                 writeValue(x, positiveValue, fromIndex, p);</span>
<span class="line-removed"> 705                 fromIndex += p;</span>
<span class="line-removed"> 706 </span>
<span class="line-removed"> 707                 writeValue(x, Float.NaN, fromIndex, a);</span>
 708             }
<a name="110" id="anc110"></a><span class="line-modified"> 709         };</span>
<span class="line-removed"> 710 </span>
<span class="line-removed"> 711         abstract void build(float[] x, int a, int g, int z, int n, int p, Random random);</span>
 712     }
 713 
<a name="111" id="anc111"></a><span class="line-modified"> 714     private static enum DoubleBuilder {</span>
<span class="line-modified"> 715         SIMPLE {</span>
<span class="line-modified"> 716             void build(double[] x, int a, int g, int z, int n, int p, Random random) {</span>
<span class="line-modified"> 717                 int fromIndex = 0;</span>
<span class="line-removed"> 718                 double negativeValue = -random.nextFloat();</span>
<span class="line-removed"> 719                 double positiveValue =  random.nextFloat();</span>
<span class="line-removed"> 720 </span>
<span class="line-removed"> 721                 writeValue(x, negativeValue, fromIndex, n);</span>
<span class="line-removed"> 722                 fromIndex += n;</span>
<span class="line-removed"> 723 </span>
<span class="line-removed"> 724                 writeValue(x, -0.0d, fromIndex, g);</span>
<span class="line-removed"> 725                 fromIndex += g;</span>
<span class="line-removed"> 726 </span>
<span class="line-removed"> 727                 writeValue(x, 0.0d, fromIndex, z);</span>
<span class="line-removed"> 728                 fromIndex += z;</span>
<span class="line-removed"> 729 </span>
<span class="line-removed"> 730                 writeValue(x, positiveValue, fromIndex, p);</span>
<span class="line-removed"> 731                 fromIndex += p;</span>
<span class="line-removed"> 732 </span>
<span class="line-removed"> 733                 writeValue(x, Double.NaN, fromIndex, a);</span>
 734             }
<a name="112" id="anc112"></a><span class="line-modified"> 735         };</span>
<span class="line-removed"> 736 </span>
<span class="line-removed"> 737         abstract void build(double[] x, int a, int g, int z, int n, int p, Random random);</span>
 738     }
 739 
<a name="113" id="anc113"></a><span class="line-modified"> 740     private static void writeValue(float[] a, float value, int fromIndex, int count) {</span>
<span class="line-modified"> 741         for (int i = fromIndex; i &lt; fromIndex + count; i++) {</span>
<span class="line-modified"> 742             a[i] = value;</span>




 743         }
 744     }
 745 
<a name="114" id="anc114"></a><span class="line-modified"> 746     private static void compare(float[] a, float[] b, int numNaN, int numNeg, int numNegZero) {</span>
 747         for (int i = a.length - numNaN; i &lt; a.length; i++) {
 748             if (a[i] == a[i]) {
<a name="115" id="anc115"></a><span class="line-modified"> 749                 failed(&quot;On position &quot; + i + &quot; must be NaN instead of &quot; + a[i]);</span>
 750             }
 751         }
 752         final int NEGATIVE_ZERO = Float.floatToIntBits(-0.0f);
 753 
 754         for (int i = numNeg; i &lt; numNeg + numNegZero; i++) {
 755             if (NEGATIVE_ZERO != Float.floatToIntBits(a[i])) {
<a name="116" id="anc116"></a><span class="line-modified"> 756                 failed(&quot;On position &quot; + i + &quot; must be -0.0 instead of &quot; + a[i]);</span>
 757             }
 758         }
<a name="117" id="anc117"></a>
 759         for (int i = 0; i &lt; a.length - numNaN; i++) {
 760             if (a[i] != b[i]) {
<a name="118" id="anc118"></a><span class="line-modified"> 761                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
 762             }
 763         }
 764     }
 765 
<a name="119" id="anc119"></a><span class="line-modified"> 766     private static void writeValue(double[] a, double value, int fromIndex, int count) {</span>
<span class="line-removed"> 767         for (int i = fromIndex; i &lt; fromIndex + count; i++) {</span>
<span class="line-removed"> 768             a[i] = value;</span>
<span class="line-removed"> 769         }</span>
<span class="line-removed"> 770     }</span>
<span class="line-removed"> 771 </span>
<span class="line-removed"> 772     private static void compare(double[] a, double[] b, int numNaN, int numNeg, int numNegZero) {</span>
 773         for (int i = a.length - numNaN; i &lt; a.length; i++) {
 774             if (a[i] == a[i]) {
<a name="120" id="anc120"></a><span class="line-modified"> 775                 failed(&quot;On position &quot; + i + &quot; must be NaN instead of &quot; + a[i]);</span>
 776             }
 777         }
 778         final long NEGATIVE_ZERO = Double.doubleToLongBits(-0.0d);
 779 
 780         for (int i = numNeg; i &lt; numNeg + numNegZero; i++) {
 781             if (NEGATIVE_ZERO != Double.doubleToLongBits(a[i])) {
<a name="121" id="anc121"></a><span class="line-modified"> 782                 failed(&quot;On position &quot; + i + &quot; must be -0.0 instead of &quot; + a[i]);</span>
 783             }
 784         }
<a name="122" id="anc122"></a>
 785         for (int i = 0; i &lt; a.length - numNaN; i++) {
 786             if (a[i] != b[i]) {
<a name="123" id="anc123"></a><span class="line-modified"> 787                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
<span class="line-modified"> 788             }</span>




















 789         }
 790     }
 791 
<a name="124" id="anc124"></a><span class="line-modified"> 792     private static enum SortedBuilder {</span>
<span class="line-modified"> 793         REPEATED {</span>
<span class="line-modified"> 794             void build(int[] a, int m) {</span>
<span class="line-modified"> 795                 int period = a.length / m;</span>
<span class="line-modified"> 796                 int i = 0;</span>
<span class="line-modified"> 797                 int k = 0;</span>

 798 
<a name="125" id="anc125"></a><span class="line-modified"> 799                 while (true) {</span>
<span class="line-modified"> 800                     for (int t = 1; t &lt;= period; t++) {</span>
<span class="line-modified"> 801                         if (i &gt;= a.length) {</span>
<span class="line-modified"> 802                             return;</span>
<span class="line-removed"> 803                         }</span>
<span class="line-removed"> 804                         a[i++] = k;</span>
<span class="line-removed"> 805                     }</span>
<span class="line-removed"> 806                     if (i &gt;= a.length) {</span>
<span class="line-removed"> 807                         return;</span>
<span class="line-removed"> 808                     }</span>
<span class="line-removed"> 809                     k++;</span>
<span class="line-removed"> 810                 }</span>
 811             }
<a name="126" id="anc126"></a><span class="line-modified"> 812         },</span>
<span class="line-modified"> 813         ORGAN_PIPES {</span>
<span class="line-removed"> 814             void build(int[] a, int m) {</span>
<span class="line-removed"> 815                 int i = 0;</span>
<span class="line-removed"> 816                 int k = m;</span>
 817 
<a name="127" id="anc127"></a><span class="line-modified"> 818                 while (true) {</span>
<span class="line-removed"> 819                     for (int t = 1; t &lt;= m; t++) {</span>
<span class="line-removed"> 820                         if (i &gt;= a.length) {</span>
<span class="line-removed"> 821                             return;</span>
<span class="line-removed"> 822                         }</span>
<span class="line-removed"> 823                         a[i++] = k;</span>
<span class="line-removed"> 824                     }</span>
<span class="line-removed"> 825                 }</span>
<span class="line-removed"> 826             }</span>
<span class="line-removed"> 827         };</span>
<span class="line-removed"> 828 </span>
<span class="line-removed"> 829         abstract void build(int[] a, int m);</span>
<span class="line-removed"> 830 </span>
<span class="line-removed"> 831         @Override public String toString() {</span>
<span class="line-removed"> 832             String name = name();</span>
<span class="line-removed"> 833 </span>
<span class="line-removed"> 834             for (int i = name.length(); i &lt; 12; i++) {</span>
<span class="line-removed"> 835                 name += &quot; &quot;;</span>
<span class="line-removed"> 836             }</span>
<span class="line-removed"> 837             return name;</span>
<span class="line-removed"> 838         }</span>
<span class="line-removed"> 839     }</span>
<span class="line-removed"> 840 </span>
<span class="line-removed"> 841     private static enum MergeBuilder {</span>
<span class="line-removed"> 842         ASCENDING {</span>
<span class="line-removed"> 843             void build(int[] a, int m) {</span>
<span class="line-removed"> 844                 int period = a.length / m;</span>
<span class="line-removed"> 845                 int v = 1, i = 0;</span>
<span class="line-removed"> 846 </span>
<span class="line-removed"> 847                 for (int k = 0; k &lt; m; k++) {</span>
<span class="line-removed"> 848                     v = 1;</span>
<span class="line-removed"> 849                     for (int p = 0; p &lt; period; p++) {</span>
<span class="line-removed"> 850                         a[i++] = v++;</span>
<span class="line-removed"> 851                     }</span>
<span class="line-removed"> 852                 }</span>
<span class="line-removed"> 853                 for (int j = i; j &lt; a.length - 1; j++) {</span>
<span class="line-removed"> 854                     a[j] = v++;</span>
<span class="line-removed"> 855                 }</span>
<span class="line-removed"> 856                 a[a.length - 1] = 0;</span>
<span class="line-removed"> 857             }</span>
<span class="line-removed"> 858         },</span>
<span class="line-removed"> 859         DESCENDING {</span>
<span class="line-removed"> 860             void build(int[] a, int m) {</span>
<span class="line-removed"> 861                 int period = a.length / m;</span>
<span class="line-removed"> 862                 int v = -1, i = 0;</span>
<span class="line-removed"> 863 </span>
<span class="line-removed"> 864                 for (int k = 0; k &lt; m; k++) {</span>
<span class="line-removed"> 865                     v = -1;</span>
<span class="line-removed"> 866                     for (int p = 0; p &lt; period; p++) {</span>
<span class="line-removed"> 867                         a[i++] = v--;</span>
<span class="line-removed"> 868                     }</span>
<span class="line-removed"> 869                 }</span>
<span class="line-removed"> 870                 for (int j = i; j &lt; a.length - 1; j++) {</span>
<span class="line-removed"> 871                     a[j] = v--;</span>
<span class="line-removed"> 872                 }</span>
<span class="line-removed"> 873                 a[a.length - 1] = 0;</span>
<span class="line-removed"> 874             }</span>
<span class="line-removed"> 875         };</span>
<span class="line-removed"> 876 </span>
<span class="line-removed"> 877         abstract void build(int[] a, int m);</span>
<span class="line-removed"> 878 </span>
<span class="line-removed"> 879         @Override public String toString() {</span>
<span class="line-removed"> 880             String name = name();</span>
<span class="line-removed"> 881 </span>
<span class="line-removed"> 882             for (int i = name.length(); i &lt; 12; i++) {</span>
<span class="line-removed"> 883                 name += &quot; &quot;;</span>
<span class="line-removed"> 884             }</span>
<span class="line-removed"> 885             return name;</span>
<span class="line-removed"> 886         }</span>
<span class="line-removed"> 887     }</span>
<span class="line-removed"> 888 </span>
<span class="line-removed"> 889     private static enum UnsortedBuilder {</span>
<span class="line-removed"> 890         RANDOM {</span>
<span class="line-removed"> 891             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 892                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 893                     a[i] = random.nextInt();</span>
<span class="line-removed"> 894                 }</span>
<span class="line-removed"> 895             }</span>
<span class="line-removed"> 896         },</span>
<span class="line-removed"> 897         ASCENDING {</span>
<span class="line-removed"> 898             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 899                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 900                     a[i] = m + i;</span>
<span class="line-removed"> 901                 }</span>
<span class="line-removed"> 902             }</span>
<span class="line-removed"> 903         },</span>
<span class="line-removed"> 904         DESCENDING {</span>
<span class="line-removed"> 905             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 906                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 907                     a[i] = a.length - m - i;</span>
<span class="line-removed"> 908                 }</span>
<span class="line-removed"> 909             }</span>
<span class="line-removed"> 910         },</span>
<span class="line-removed"> 911         ALL_EQUAL {</span>
<span class="line-removed"> 912             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 913                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 914                     a[i] = m;</span>
<span class="line-removed"> 915                 }</span>
<span class="line-removed"> 916             }</span>
<span class="line-removed"> 917         },</span>
<span class="line-removed"> 918         SAW {</span>
<span class="line-removed"> 919             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 920                 int incCount = 1;</span>
<span class="line-removed"> 921                 int decCount = a.length;</span>
<span class="line-removed"> 922                 int i = 0;</span>
<span class="line-removed"> 923                 int period = m--;</span>
<span class="line-removed"> 924 </span>
<span class="line-removed"> 925                 while (true) {</span>
<span class="line-removed"> 926                     for (int k = 1; k &lt;= period; k++) {</span>
<span class="line-removed"> 927                         if (i &gt;= a.length) {</span>
<span class="line-removed"> 928                             return;</span>
<span class="line-removed"> 929                         }</span>
<span class="line-removed"> 930                         a[i++] = incCount++;</span>
<span class="line-removed"> 931                     }</span>
<span class="line-removed"> 932                     period += m;</span>
<span class="line-removed"> 933 </span>
<span class="line-removed"> 934                     for (int k = 1; k &lt;= period; k++) {</span>
<span class="line-removed"> 935                         if (i &gt;= a.length) {</span>
<span class="line-removed"> 936                             return;</span>
<span class="line-removed"> 937                         }</span>
<span class="line-removed"> 938                         a[i++] = decCount--;</span>
<span class="line-removed"> 939                     }</span>
<span class="line-removed"> 940                     period += m;</span>
<span class="line-removed"> 941                 }</span>
<span class="line-removed"> 942             }</span>
<span class="line-removed"> 943         },</span>
<span class="line-removed"> 944         REPEATED {</span>
<span class="line-removed"> 945             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 946                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 947                     a[i] = i % m;</span>
<span class="line-removed"> 948                 }</span>
<span class="line-removed"> 949             }</span>
<span class="line-removed"> 950         },</span>
<span class="line-removed"> 951         DUPLICATED {</span>
<span class="line-removed"> 952             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 953                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 954                     a[i] = random.nextInt(m);</span>
<span class="line-removed"> 955                 }</span>
<span class="line-removed"> 956             }</span>
<span class="line-removed"> 957         },</span>
<span class="line-removed"> 958         ORGAN_PIPES {</span>
<span class="line-removed"> 959             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 960                 int middle = a.length / (m + 1);</span>
<span class="line-removed"> 961 </span>
<span class="line-removed"> 962                 for (int i = 0; i &lt; middle; i++) {</span>
<span class="line-removed"> 963                     a[i] = i;</span>
<span class="line-removed"> 964                 }</span>
<span class="line-removed"> 965                 for (int i = middle; i &lt; a.length; i++) {</span>
<span class="line-removed"> 966                     a[i] = a.length - i - 1;</span>
<span class="line-removed"> 967                 }</span>
<span class="line-removed"> 968             }</span>
<span class="line-removed"> 969         },</span>
<span class="line-removed"> 970         STAGGER {</span>
<span class="line-removed"> 971             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 972                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 973                     a[i] = (i * m + i) % a.length;</span>
<span class="line-removed"> 974                 }</span>
<span class="line-removed"> 975             }</span>
<span class="line-removed"> 976         },</span>
<span class="line-removed"> 977         PLATEAU {</span>
<span class="line-removed"> 978             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 979                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 980                     a[i] = Math.min(i, m);</span>
<span class="line-removed"> 981                 }</span>
<span class="line-removed"> 982             }</span>
<span class="line-removed"> 983         },</span>
<span class="line-removed"> 984         SHUFFLE {</span>
<span class="line-removed"> 985             void build(int[] a, int m, Random random) {</span>
<span class="line-removed"> 986                 int x = 0, y = 0;</span>
<span class="line-removed"> 987                 for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed"> 988                     a[i] = random.nextBoolean() ? (x += 2) : (y += 2);</span>
<span class="line-removed"> 989                 }</span>
<span class="line-removed"> 990             }</span>
<span class="line-removed"> 991         };</span>
<span class="line-removed"> 992 </span>
<span class="line-removed"> 993         abstract void build(int[] a, int m, Random random);</span>
<span class="line-removed"> 994 </span>
<span class="line-removed"> 995         @Override public String toString() {</span>
<span class="line-removed"> 996             String name = name();</span>
<span class="line-removed"> 997 </span>
<span class="line-removed"> 998             for (int i = name.length(); i &lt; 12; i++) {</span>
<span class="line-removed"> 999                 name += &quot; &quot;;</span>
<span class="line-removed">1000             }</span>
<span class="line-removed">1001             return name;</span>
<span class="line-removed">1002         }</span>
<span class="line-removed">1003     }</span>
<span class="line-removed">1004 </span>
<span class="line-removed">1005     private static void checkWithCheckSum(Object test, Object golden) {</span>
<span class="line-removed">1006         checkSorted(test);</span>
<span class="line-removed">1007         checkCheckSum(test, golden);</span>
<span class="line-removed">1008     }</span>
<span class="line-removed">1009 </span>
<span class="line-removed">1010     private static void failed(String message) {</span>
<span class="line-removed">1011         err.format(&quot;\n*** TEST FAILED - %s.\n\n%s.\n\n&quot;, ourDescription, message);</span>
<span class="line-removed">1012         throw new RuntimeException(&quot;Test failed - see log file for details&quot;);</span>
<span class="line-removed">1013     }</span>
<span class="line-removed">1014 </span>
<span class="line-removed">1015     private static void failedSort(int index, String value1, String value2) {</span>
<span class="line-removed">1016         failed(&quot;Array is not sorted at &quot; + index + &quot;-th position: &quot; +</span>
<span class="line-removed">1017             value1 + &quot; and &quot; + value2);</span>
<span class="line-removed">1018     }</span>
<span class="line-removed">1019 </span>
<span class="line-removed">1020     private static void failedCompare(int index, String value1, String value2) {</span>
<span class="line-removed">1021         failed(&quot;On position &quot; + index + &quot; must be &quot; + value2 + &quot; instead of &quot; + value1);</span>
<span class="line-removed">1022     }</span>
<span class="line-removed">1023 </span>
<span class="line-removed">1024     private static void compare(Object test, Object golden) {</span>
<span class="line-removed">1025         if (test instanceof int[]) {</span>
<span class="line-removed">1026             compare((int[]) test, (int[]) golden);</span>
<span class="line-removed">1027         } else if (test instanceof long[]) {</span>
<span class="line-removed">1028             compare((long[]) test, (long[]) golden);</span>
<span class="line-removed">1029         } else if (test instanceof short[]) {</span>
<span class="line-removed">1030             compare((short[]) test, (short[]) golden);</span>
<span class="line-removed">1031         } else if (test instanceof byte[]) {</span>
<span class="line-removed">1032             compare((byte[]) test, (byte[]) golden);</span>
<span class="line-removed">1033         } else if (test instanceof char[]) {</span>
<span class="line-removed">1034             compare((char[]) test, (char[]) golden);</span>
<span class="line-removed">1035         } else if (test instanceof float[]) {</span>
<span class="line-removed">1036             compare((float[]) test, (float[]) golden);</span>
<span class="line-removed">1037         } else if (test instanceof double[]) {</span>
<span class="line-removed">1038             compare((double[]) test, (double[]) golden);</span>
<span class="line-removed">1039         } else if (test instanceof Integer[]) {</span>
<span class="line-removed">1040             compare((Integer[]) test, (Integer[]) golden);</span>
<span class="line-removed">1041         } else {</span>
<span class="line-removed">1042             failed(&quot;Unknow type of array: &quot; + test + &quot; of class &quot; +</span>
<span class="line-removed">1043                 test.getClass().getName());</span>
<span class="line-removed">1044         }</span>
<span class="line-removed">1045     }</span>
<span class="line-removed">1046 </span>
<span class="line-removed">1047     private static void compare(int[] a, int[] b) {</span>
1048         for (int i = 0; i &lt; a.length; i++) {
1049             if (a[i] != b[i]) {
<a name="128" id="anc128"></a><span class="line-modified">1050                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
1051             }
1052         }
1053     }
1054 
<a name="129" id="anc129"></a><span class="line-modified">1055     private static void compare(long[] a, long[] b) {</span>
1056         for (int i = 0; i &lt; a.length; i++) {
1057             if (a[i] != b[i]) {
<a name="130" id="anc130"></a><span class="line-modified">1058                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
1059             }
1060         }
1061     }
1062 
<a name="131" id="anc131"></a><span class="line-modified">1063     private static void compare(short[] a, short[] b) {</span>
1064         for (int i = 0; i &lt; a.length; i++) {
1065             if (a[i] != b[i]) {
<a name="132" id="anc132"></a><span class="line-modified">1066                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
1067             }
1068         }
1069     }
1070 
<a name="133" id="anc133"></a><span class="line-modified">1071     private static void compare(byte[] a, byte[] b) {</span>
1072         for (int i = 0; i &lt; a.length; i++) {
1073             if (a[i] != b[i]) {
<a name="134" id="anc134"></a><span class="line-modified">1074                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
1075             }
1076         }
1077     }
1078 
<a name="135" id="anc135"></a><span class="line-modified">1079     private static void compare(char[] a, char[] b) {</span>
1080         for (int i = 0; i &lt; a.length; i++) {
1081             if (a[i] != b[i]) {
<a name="136" id="anc136"></a><span class="line-modified">1082                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
1083             }
1084         }
1085     }
1086 
<a name="137" id="anc137"></a><span class="line-modified">1087     private static void compare(float[] a, float[] b) {</span>
<span class="line-modified">1088         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-removed">1089             if (a[i] != b[i]) {</span>
<span class="line-removed">1090                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
<span class="line-removed">1091             }</span>
<span class="line-removed">1092         }</span>
<span class="line-removed">1093     }</span>
1094 
<a name="138" id="anc138"></a><span class="line-modified">1095     private static void compare(double[] a, double[] b) {</span>
<span class="line-modified">1096         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified">1097             if (a[i] != b[i]) {</span>
<span class="line-modified">1098                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
<span class="line-modified">1099             }</span>






1100         }
<a name="139" id="anc139"></a>










1101     }
1102 
<a name="140" id="anc140"></a><span class="line-modified">1103     private static void compare(Integer[] a, Integer[] b) {</span>
<span class="line-modified">1104         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified">1105             if (a[i].compareTo(b[i]) != 0) {</span>
<span class="line-modified">1106                 failedCompare(i, &quot;&quot; + a[i], &quot;&quot; + b[i]);</span>
<span class="line-modified">1107             }</span>
<span class="line-modified">1108         }</span>
<span class="line-modified">1109     }</span>
<span class="line-modified">1110 </span>
<span class="line-modified">1111     private static void checkSorted(Object object) {</span>
<span class="line-modified">1112         if (object instanceof int[]) {</span>
<span class="line-modified">1113             checkSorted((int[]) object);</span>
<span class="line-modified">1114         } else if (object instanceof long[]) {</span>
<span class="line-modified">1115             checkSorted((long[]) object);</span>
<span class="line-modified">1116         } else if (object instanceof short[]) {</span>
<span class="line-modified">1117             checkSorted((short[]) object);</span>
<span class="line-removed">1118         } else if (object instanceof byte[]) {</span>
<span class="line-removed">1119             checkSorted((byte[]) object);</span>
<span class="line-removed">1120         } else if (object instanceof char[]) {</span>
<span class="line-removed">1121             checkSorted((char[]) object);</span>
<span class="line-removed">1122         } else if (object instanceof float[]) {</span>
<span class="line-removed">1123             checkSorted((float[]) object);</span>
<span class="line-removed">1124         } else if (object instanceof double[]) {</span>
<span class="line-removed">1125             checkSorted((double[]) object);</span>
<span class="line-removed">1126         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1127             checkSorted((Integer[]) object);</span>
1128         } else {
<a name="141" id="anc141"></a><span class="line-modified">1129             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1130                 object.getClass().getName());</span>
1131         }
1132     }
1133 
<a name="142" id="anc142"></a><span class="line-modified">1134     private static void checkSorted(int[] a) {</span>
1135         for (int i = 0; i &lt; a.length - 1; i++) {
1136             if (a[i] &gt; a[i + 1]) {
<a name="143" id="anc143"></a><span class="line-modified">1137                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1138             }
1139         }
1140     }
1141 
<a name="144" id="anc144"></a><span class="line-modified">1142     private static void checkSorted(long[] a) {</span>
1143         for (int i = 0; i &lt; a.length - 1; i++) {
1144             if (a[i] &gt; a[i + 1]) {
<a name="145" id="anc145"></a><span class="line-modified">1145                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1146             }
1147         }
1148     }
1149 
<a name="146" id="anc146"></a><span class="line-modified">1150     private static void checkSorted(short[] a) {</span>
1151         for (int i = 0; i &lt; a.length - 1; i++) {
1152             if (a[i] &gt; a[i + 1]) {
<a name="147" id="anc147"></a><span class="line-modified">1153                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1154             }
1155         }
1156     }
1157 
<a name="148" id="anc148"></a><span class="line-modified">1158     private static void checkSorted(byte[] a) {</span>
1159         for (int i = 0; i &lt; a.length - 1; i++) {
1160             if (a[i] &gt; a[i + 1]) {
<a name="149" id="anc149"></a><span class="line-modified">1161                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1162             }
1163         }
1164     }
1165 
<a name="150" id="anc150"></a><span class="line-modified">1166     private static void checkSorted(char[] a) {</span>
1167         for (int i = 0; i &lt; a.length - 1; i++) {
1168             if (a[i] &gt; a[i + 1]) {
<a name="151" id="anc151"></a><span class="line-modified">1169                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1170             }
1171         }
1172     }
1173 
<a name="152" id="anc152"></a><span class="line-modified">1174     private static void checkSorted(float[] a) {</span>
1175         for (int i = 0; i &lt; a.length - 1; i++) {
1176             if (a[i] &gt; a[i + 1]) {
<a name="153" id="anc153"></a><span class="line-modified">1177                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1178             }
1179         }
1180     }
1181 
<a name="154" id="anc154"></a><span class="line-modified">1182     private static void checkSorted(double[] a) {</span>
1183         for (int i = 0; i &lt; a.length - 1; i++) {
1184             if (a[i] &gt; a[i + 1]) {
<a name="155" id="anc155"></a><span class="line-modified">1185                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1186             }
1187         }
1188     }
1189 
<a name="156" id="anc156"></a><span class="line-modified">1190     private static void checkSorted(Integer[] a) {</span>
<span class="line-modified">1191         for (int i = 0; i &lt; a.length - 1; i++) {</span>
<span class="line-modified">1192             if (a[i].intValue() &gt; a[i + 1].intValue()) {</span>
<span class="line-modified">1193                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
<span class="line-modified">1194             }</span>

1195         }
1196     }
1197 
<a name="157" id="anc157"></a><span class="line-modified">1198     private static void checkCheckSum(Object test, Object golden) {</span>
<span class="line-modified">1199         if (checkSumXor(test) != checkSumXor(golden)) {</span>
<span class="line-modified">1200             failed(&quot;Original and sorted arrays are not identical [xor]&quot;);</span>
1201         }
<a name="158" id="anc158"></a><span class="line-modified">1202         if (checkSumPlus(test) != checkSumPlus(golden)) {</span>
<span class="line-modified">1203             failed(&quot;Original and sorted arrays are not identical [plus]&quot;);</span>
1204         }
<a name="159" id="anc159"></a><span class="line-modified">1205     }</span>
<span class="line-modified">1206 </span>
<span class="line-removed">1207     private static int checkSumXor(Object object) {</span>
<span class="line-removed">1208         if (object instanceof int[]) {</span>
<span class="line-removed">1209             return checkSumXor((int[]) object);</span>
<span class="line-removed">1210         } else if (object instanceof long[]) {</span>
<span class="line-removed">1211             return checkSumXor((long[]) object);</span>
<span class="line-removed">1212         } else if (object instanceof short[]) {</span>
<span class="line-removed">1213             return checkSumXor((short[]) object);</span>
<span class="line-removed">1214         } else if (object instanceof byte[]) {</span>
<span class="line-removed">1215             return checkSumXor((byte[]) object);</span>
<span class="line-removed">1216         } else if (object instanceof char[]) {</span>
<span class="line-removed">1217             return checkSumXor((char[]) object);</span>
<span class="line-removed">1218         } else if (object instanceof float[]) {</span>
<span class="line-removed">1219             return checkSumXor((float[]) object);</span>
<span class="line-removed">1220         } else if (object instanceof double[]) {</span>
<span class="line-removed">1221             return checkSumXor((double[]) object);</span>
<span class="line-removed">1222         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1223             return checkSumXor((Integer[]) object);</span>
<span class="line-removed">1224         } else {</span>
<span class="line-removed">1225             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1226                 object.getClass().getName());</span>
<span class="line-removed">1227             return -1;</span>
1228         }
<a name="160" id="anc160"></a><span class="line-modified">1229     }</span>
<span class="line-modified">1230 </span>
<span class="line-removed">1231     private static int checkSumXor(Integer[] a) {</span>
<span class="line-removed">1232         int checkSum = 0;</span>
<span class="line-removed">1233 </span>
<span class="line-removed">1234         for (Integer e : a) {</span>
<span class="line-removed">1235             checkSum ^= e.intValue();</span>
1236         }
<a name="161" id="anc161"></a><span class="line-modified">1237         return checkSum;</span>










1238     }
1239 
<a name="162" id="anc162"></a><span class="line-modified">1240     private static int checkSumXor(int[] a) {</span>
1241         int checkSum = 0;
1242 
1243         for (int e : a) {
1244             checkSum ^= e;
1245         }
1246         return checkSum;
1247     }
1248 
<a name="163" id="anc163"></a><span class="line-modified">1249     private static int checkSumXor(long[] a) {</span>
1250         long checkSum = 0;
1251 
1252         for (long e : a) {
1253             checkSum ^= e;
1254         }
1255         return (int) checkSum;
1256     }
1257 
<a name="164" id="anc164"></a><span class="line-modified">1258     private static int checkSumXor(short[] a) {</span>
<span class="line-modified">1259         short checkSum = 0;</span>
1260 
<a name="165" id="anc165"></a><span class="line-modified">1261         for (short e : a) {</span>
1262             checkSum ^= e;
1263         }
1264         return (int) checkSum;
1265     }
1266 
<a name="166" id="anc166"></a><span class="line-modified">1267     private static int checkSumXor(byte[] a) {</span>
<span class="line-modified">1268         byte checkSum = 0;</span>
1269 
<a name="167" id="anc167"></a><span class="line-modified">1270         for (byte e : a) {</span>
1271             checkSum ^= e;
1272         }
1273         return (int) checkSum;
1274     }
1275 
<a name="168" id="anc168"></a><span class="line-modified">1276     private static int checkSumXor(char[] a) {</span>
<span class="line-modified">1277         char checkSum = 0;</span>
1278 
<a name="169" id="anc169"></a><span class="line-modified">1279         for (char e : a) {</span>
1280             checkSum ^= e;
1281         }
1282         return (int) checkSum;
1283     }
1284 
<a name="170" id="anc170"></a><span class="line-modified">1285     private static int checkSumXor(float[] a) {</span>
1286         int checkSum = 0;
1287 
1288         for (float e : a) {
1289             checkSum ^= (int) e;
1290         }
1291         return checkSum;
1292     }
1293 
<a name="171" id="anc171"></a><span class="line-modified">1294     private static int checkSumXor(double[] a) {</span>
1295         int checkSum = 0;
1296 
1297         for (double e : a) {
1298             checkSum ^= (int) e;
1299         }
1300         return checkSum;
1301     }
1302 
<a name="172" id="anc172"></a><span class="line-modified">1303     private static int checkSumPlus(Object object) {</span>
<span class="line-modified">1304         if (object instanceof int[]) {</span>
<span class="line-modified">1305             return checkSumPlus((int[]) object);</span>
<span class="line-modified">1306         } else if (object instanceof long[]) {</span>
<span class="line-modified">1307             return checkSumPlus((long[]) object);</span>
<span class="line-modified">1308         } else if (object instanceof short[]) {</span>
<span class="line-removed">1309             return checkSumPlus((short[]) object);</span>
<span class="line-removed">1310         } else if (object instanceof byte[]) {</span>
<span class="line-removed">1311             return checkSumPlus((byte[]) object);</span>
<span class="line-removed">1312         } else if (object instanceof char[]) {</span>
<span class="line-removed">1313             return checkSumPlus((char[]) object);</span>
<span class="line-removed">1314         } else if (object instanceof float[]) {</span>
<span class="line-removed">1315             return checkSumPlus((float[]) object);</span>
<span class="line-removed">1316         } else if (object instanceof double[]) {</span>
<span class="line-removed">1317             return checkSumPlus((double[]) object);</span>
<span class="line-removed">1318         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1319             return checkSumPlus((Integer[]) object);</span>
<span class="line-removed">1320         } else {</span>
<span class="line-removed">1321             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1322                 object.getClass().getName());</span>
<span class="line-removed">1323             return -1;</span>
1324         }
<a name="173" id="anc173"></a>
















1325     }
1326 
<a name="174" id="anc174"></a><span class="line-modified">1327     private static int checkSumPlus(int[] a) {</span>
1328         int checkSum = 0;
1329 
1330         for (int e : a) {
1331             checkSum += e;
1332         }
1333         return checkSum;
1334     }
1335 
<a name="175" id="anc175"></a><span class="line-modified">1336     private static int checkSumPlus(long[] a) {</span>
1337         long checkSum = 0;
1338 
1339         for (long e : a) {
1340             checkSum += e;
1341         }
1342         return (int) checkSum;
1343     }
1344 
<a name="176" id="anc176"></a><span class="line-modified">1345     private static int checkSumPlus(short[] a) {</span>
<span class="line-modified">1346         short checkSum = 0;</span>
1347 
<a name="177" id="anc177"></a><span class="line-modified">1348         for (short e : a) {</span>
1349             checkSum += e;
1350         }
1351         return (int) checkSum;
1352     }
1353 
<a name="178" id="anc178"></a><span class="line-modified">1354     private static int checkSumPlus(byte[] a) {</span>
<span class="line-modified">1355         byte checkSum = 0;</span>
1356 
<a name="179" id="anc179"></a><span class="line-modified">1357         for (byte e : a) {</span>
1358             checkSum += e;
1359         }
1360         return (int) checkSum;
1361     }
1362 
<a name="180" id="anc180"></a><span class="line-modified">1363     private static int checkSumPlus(char[] a) {</span>
<span class="line-modified">1364         char checkSum = 0;</span>
1365 
<a name="181" id="anc181"></a><span class="line-modified">1366         for (char e : a) {</span>
1367             checkSum += e;
1368         }
1369         return (int) checkSum;
1370     }
1371 
<a name="182" id="anc182"></a><span class="line-modified">1372     private static int checkSumPlus(float[] a) {</span>
1373         int checkSum = 0;
1374 
1375         for (float e : a) {
1376             checkSum += (int) e;
1377         }
1378         return checkSum;
1379     }
1380 
<a name="183" id="anc183"></a><span class="line-modified">1381     private static int checkSumPlus(double[] a) {</span>
1382         int checkSum = 0;
1383 
1384         for (double e : a) {
1385             checkSum += (int) e;
1386         }
1387         return checkSum;
1388     }
1389 
<a name="184" id="anc184"></a><span class="line-modified">1390     private static int checkSumPlus(Integer[] a) {</span>
<span class="line-modified">1391         int checkSum = 0;</span>
<span class="line-modified">1392 </span>
<span class="line-modified">1393         for (Integer e : a) {</span>
<span class="line-modified">1394             checkSum += e.intValue();</span>
<span class="line-modified">1395         }</span>
<span class="line-modified">1396         return checkSum;</span>
<span class="line-modified">1397     }</span>
<span class="line-modified">1398 </span>
<span class="line-modified">1399     private static void sortByInsertionSort(Object object) {</span>
<span class="line-modified">1400         if (object instanceof int[]) {</span>
<span class="line-modified">1401             sortByInsertionSort((int[]) object);</span>
<span class="line-modified">1402         } else if (object instanceof long[]) {</span>
<span class="line-modified">1403             sortByInsertionSort((long[]) object);</span>
<span class="line-modified">1404         } else if (object instanceof short[]) {</span>
<span class="line-removed">1405             sortByInsertionSort((short[]) object);</span>
<span class="line-removed">1406         } else if (object instanceof byte[]) {</span>
<span class="line-removed">1407             sortByInsertionSort((byte[]) object);</span>
<span class="line-removed">1408         } else if (object instanceof char[]) {</span>
<span class="line-removed">1409             sortByInsertionSort((char[]) object);</span>
<span class="line-removed">1410         } else if (object instanceof float[]) {</span>
<span class="line-removed">1411             sortByInsertionSort((float[]) object);</span>
<span class="line-removed">1412         } else if (object instanceof double[]) {</span>
<span class="line-removed">1413             sortByInsertionSort((double[]) object);</span>
<span class="line-removed">1414         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1415             sortByInsertionSort((Integer[]) object);</span>
1416         } else {
<a name="185" id="anc185"></a><span class="line-modified">1417             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1418                 object.getClass().getName());</span>
1419         }
1420     }
1421 
<a name="186" id="anc186"></a><span class="line-modified">1422     private static void sortByInsertionSort(int[] a) {</span>
1423         for (int j, i = 1; i &lt; a.length; i++) {
1424             int ai = a[i];
<a name="187" id="anc187"></a>
1425             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1426                 a[j + 1] = a[j];
1427             }
1428             a[j + 1] = ai;
1429         }
1430     }
1431 
<a name="188" id="anc188"></a><span class="line-modified">1432     private static void sortByInsertionSort(long[] a) {</span>
1433         for (int j, i = 1; i &lt; a.length; i++) {
1434             long ai = a[i];
<a name="189" id="anc189"></a>
1435             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1436                 a[j + 1] = a[j];
1437             }
1438             a[j + 1] = ai;
1439         }
1440     }
1441 
<a name="190" id="anc190"></a><span class="line-modified">1442     private static void sortByInsertionSort(short[] a) {</span>
1443         for (int j, i = 1; i &lt; a.length; i++) {
<a name="191" id="anc191"></a><span class="line-modified">1444             short ai = a[i];</span>

1445             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1446                 a[j + 1] = a[j];
1447             }
1448             a[j + 1] = ai;
1449         }
1450     }
1451 
<a name="192" id="anc192"></a><span class="line-modified">1452     private static void sortByInsertionSort(byte[] a) {</span>
1453         for (int j, i = 1; i &lt; a.length; i++) {
<a name="193" id="anc193"></a><span class="line-modified">1454             byte ai = a[i];</span>

1455             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1456                 a[j + 1] = a[j];
1457             }
1458             a[j + 1] = ai;
1459         }
1460     }
1461 
<a name="194" id="anc194"></a><span class="line-modified">1462     private static void sortByInsertionSort(char[] a) {</span>
1463         for (int j, i = 1; i &lt; a.length; i++) {
<a name="195" id="anc195"></a><span class="line-modified">1464             char ai = a[i];</span>

1465             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1466                 a[j + 1] = a[j];
1467             }
1468             a[j + 1] = ai;
1469         }
1470     }
1471 
<a name="196" id="anc196"></a><span class="line-modified">1472     private static void sortByInsertionSort(float[] a) {</span>
1473         for (int j, i = 1; i &lt; a.length; i++) {
1474             float ai = a[i];
<a name="197" id="anc197"></a>
1475             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1476                 a[j + 1] = a[j];
1477             }
1478             a[j + 1] = ai;
1479         }
1480     }
1481 
<a name="198" id="anc198"></a><span class="line-modified">1482     private static void sortByInsertionSort(double[] a) {</span>
1483         for (int j, i = 1; i &lt; a.length; i++) {
1484             double ai = a[i];
<a name="199" id="anc199"></a><span class="line-removed">1485             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {</span>
<span class="line-removed">1486                 a[j + 1] = a[j];</span>
<span class="line-removed">1487             }</span>
<span class="line-removed">1488             a[j + 1] = ai;</span>
<span class="line-removed">1489         }</span>
<span class="line-removed">1490     }</span>
1491 
<a name="200" id="anc200"></a><span class="line-removed">1492     private static void sortByInsertionSort(Integer[] a) {</span>
<span class="line-removed">1493         for (int j, i = 1; i &lt; a.length; i++) {</span>
<span class="line-removed">1494             Integer ai = a[i];</span>
1495             for (j = i - 1; j &gt;= 0 &amp;&amp; ai &lt; a[j]; j--) {
1496                 a[j + 1] = a[j];
1497             }
1498             a[j + 1] = ai;
1499         }
1500     }
1501 
<a name="201" id="anc201"></a><span class="line-modified">1502     private static void sort(Object object) {</span>
<span class="line-modified">1503         if (object instanceof int[]) {</span>
<span class="line-modified">1504             Arrays.sort((int[]) object);</span>
<span class="line-modified">1505         } else if (object instanceof long[]) {</span>
<span class="line-modified">1506             Arrays.sort((long[]) object);</span>
<span class="line-modified">1507         } else if (object instanceof short[]) {</span>
<span class="line-modified">1508             Arrays.sort((short[]) object);</span>
<span class="line-modified">1509         } else if (object instanceof byte[]) {</span>
<span class="line-modified">1510             Arrays.sort((byte[]) object);</span>
<span class="line-modified">1511         } else if (object instanceof char[]) {</span>
<span class="line-modified">1512             Arrays.sort((char[]) object);</span>
<span class="line-modified">1513         } else if (object instanceof float[]) {</span>
<span class="line-modified">1514             Arrays.sort((float[]) object);</span>
<span class="line-modified">1515         } else if (object instanceof double[]) {</span>
<span class="line-modified">1516             Arrays.sort((double[]) object);</span>
<span class="line-removed">1517         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1518             Arrays.sort((Integer[]) object);</span>
1519         } else {
<a name="202" id="anc202"></a><span class="line-modified">1520             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1521                 object.getClass().getName());</span>
<span class="line-removed">1522         }</span>
<span class="line-removed">1523     }</span>
<span class="line-removed">1524 </span>
<span class="line-removed">1525     private static void sortSubArray(Object object, int fromIndex, int toIndex) {</span>
<span class="line-removed">1526         if (object instanceof int[]) {</span>
<span class="line-removed">1527             Arrays.sort((int[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1528         } else if (object instanceof long[]) {</span>
<span class="line-removed">1529             Arrays.sort((long[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1530         } else if (object instanceof short[]) {</span>
<span class="line-removed">1531             Arrays.sort((short[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1532         } else if (object instanceof byte[]) {</span>
<span class="line-removed">1533             Arrays.sort((byte[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1534         } else if (object instanceof char[]) {</span>
<span class="line-removed">1535             Arrays.sort((char[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1536         } else if (object instanceof float[]) {</span>
<span class="line-removed">1537             Arrays.sort((float[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1538         } else if (object instanceof double[]) {</span>
<span class="line-removed">1539             Arrays.sort((double[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1540         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1541             Arrays.sort((Integer[]) object, fromIndex, toIndex);</span>
<span class="line-removed">1542         } else {</span>
<span class="line-removed">1543             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1544                 object.getClass().getName());</span>
<span class="line-removed">1545         }</span>
<span class="line-removed">1546     }</span>
<span class="line-removed">1547 </span>
<span class="line-removed">1548     private static void checkSubArray(Object object, int fromIndex, int toIndex, int m) {</span>
<span class="line-removed">1549         if (object instanceof int[]) {</span>
<span class="line-removed">1550             checkSubArray((int[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1551         } else if (object instanceof long[]) {</span>
<span class="line-removed">1552             checkSubArray((long[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1553         } else if (object instanceof short[]) {</span>
<span class="line-removed">1554             checkSubArray((short[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1555         } else if (object instanceof byte[]) {</span>
<span class="line-removed">1556             checkSubArray((byte[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1557         } else if (object instanceof char[]) {</span>
<span class="line-removed">1558             checkSubArray((char[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1559         } else if (object instanceof float[]) {</span>
<span class="line-removed">1560             checkSubArray((float[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1561         } else if (object instanceof double[]) {</span>
<span class="line-removed">1562             checkSubArray((double[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1563         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1564             checkSubArray((Integer[]) object, fromIndex, toIndex, m);</span>
<span class="line-removed">1565         } else {</span>
<span class="line-removed">1566             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1567                 object.getClass().getName());</span>
1568         }
1569     }
1570 
<a name="203" id="anc203"></a><span class="line-modified">1571     private static void checkSubArray(Integer[] a, int fromIndex, int toIndex, int m) {</span>
1572         for (int i = 0; i &lt; fromIndex; i++) {
<a name="204" id="anc204"></a><span class="line-modified">1573             if (a[i].intValue() != 0xDEDA) {</span>
<span class="line-modified">1574                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1575                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1576             }
1577         }
1578 
1579         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
<a name="205" id="anc205"></a><span class="line-modified">1580             if (a[i].intValue() &gt; a[i + 1].intValue()) {</span>
<span class="line-modified">1581                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1582             }
1583         }
1584 
1585         for (int i = toIndex; i &lt; a.length; i++) {
<a name="206" id="anc206"></a><span class="line-modified">1586             if (a[i].intValue() != 0xBABA) {</span>
<span class="line-modified">1587                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-removed">1588                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
1589             }
1590         }
1591     }
1592 
<a name="207" id="anc207"></a><span class="line-modified">1593     private static void checkSubArray(int[] a, int fromIndex, int toIndex, int m) {</span>
1594         for (int i = 0; i &lt; fromIndex; i++) {
<a name="208" id="anc208"></a><span class="line-modified">1595             if (a[i] != 0xDEDA) {</span>
<span class="line-modified">1596                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1597                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1598             }
1599         }
1600 
1601         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
1602             if (a[i] &gt; a[i + 1]) {
<a name="209" id="anc209"></a><span class="line-modified">1603                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1604             }
1605         }
1606 
1607         for (int i = toIndex; i &lt; a.length; i++) {
<a name="210" id="anc210"></a><span class="line-modified">1608             if (a[i] != 0xBABA) {</span>
<span class="line-modified">1609                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-removed">1610                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
1611             }
1612         }
1613     }
1614 
<a name="211" id="anc211"></a><span class="line-modified">1615     private static void checkSubArray(byte[] a, int fromIndex, int toIndex, int m) {</span>
1616         for (int i = 0; i &lt; fromIndex; i++) {
<a name="212" id="anc212"></a><span class="line-modified">1617             if (a[i] != (byte) 0xDEDA) {</span>
<span class="line-modified">1618                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1619                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1620             }
1621         }
1622 
1623         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
1624             if (a[i] &gt; a[i + 1]) {
<a name="213" id="anc213"></a><span class="line-modified">1625                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1626             }
1627         }
1628 
1629         for (int i = toIndex; i &lt; a.length; i++) {
<a name="214" id="anc214"></a><span class="line-modified">1630             if (a[i] != (byte) 0xBABA) {</span>
<span class="line-modified">1631                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-removed">1632                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
1633             }
1634         }
1635     }
1636 
<a name="215" id="anc215"></a><span class="line-modified">1637     private static void checkSubArray(long[] a, int fromIndex, int toIndex, int m) {</span>
1638         for (int i = 0; i &lt; fromIndex; i++) {
<a name="216" id="anc216"></a><span class="line-modified">1639             if (a[i] != (long) 0xDEDA) {</span>
<span class="line-modified">1640                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1641                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1642             }
1643         }
1644 
1645         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
1646             if (a[i] &gt; a[i + 1]) {
<a name="217" id="anc217"></a><span class="line-modified">1647                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1648             }
1649         }
1650 
1651         for (int i = toIndex; i &lt; a.length; i++) {
<a name="218" id="anc218"></a><span class="line-modified">1652             if (a[i] != (long) 0xBABA) {</span>
<span class="line-modified">1653                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-removed">1654                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
1655             }
1656         }
1657     }
1658 
<a name="219" id="anc219"></a><span class="line-modified">1659     private static void checkSubArray(char[] a, int fromIndex, int toIndex, int m) {</span>
1660         for (int i = 0; i &lt; fromIndex; i++) {
<a name="220" id="anc220"></a><span class="line-modified">1661             if (a[i] != (char) 0xDEDA) {</span>
<span class="line-modified">1662                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1663                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1664             }
1665         }
1666 
1667         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
1668             if (a[i] &gt; a[i + 1]) {
<a name="221" id="anc221"></a><span class="line-modified">1669                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1670             }
1671         }
1672 
1673         for (int i = toIndex; i &lt; a.length; i++) {
<a name="222" id="anc222"></a><span class="line-modified">1674             if (a[i] != (char) 0xBABA) {</span>
<span class="line-modified">1675                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-removed">1676                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
1677             }
1678         }
1679     }
1680 
<a name="223" id="anc223"></a><span class="line-modified">1681     private static void checkSubArray(short[] a, int fromIndex, int toIndex, int m) {</span>
1682         for (int i = 0; i &lt; fromIndex; i++) {
<a name="224" id="anc224"></a><span class="line-modified">1683             if (a[i] != (short) 0xDEDA) {</span>
<span class="line-modified">1684                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1685                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1686             }
1687         }
1688 
1689         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
1690             if (a[i] &gt; a[i + 1]) {
<a name="225" id="anc225"></a><span class="line-modified">1691                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1692             }
1693         }
1694 
1695         for (int i = toIndex; i &lt; a.length; i++) {
<a name="226" id="anc226"></a><span class="line-modified">1696             if (a[i] != (short) 0xBABA) {</span>
<span class="line-modified">1697                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-removed">1698                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
1699             }
1700         }
1701     }
1702 
<a name="227" id="anc227"></a><span class="line-modified">1703     private static void checkSubArray(float[] a, int fromIndex, int toIndex, int m) {</span>
1704         for (int i = 0; i &lt; fromIndex; i++) {
<a name="228" id="anc228"></a><span class="line-modified">1705             if (a[i] != (float) 0xDEDA) {</span>
<span class="line-modified">1706                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-removed">1707                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>
1708             }
1709         }
1710 
1711         for (int i = fromIndex; i &lt; toIndex - 1; i++) {
1712             if (a[i] &gt; a[i + 1]) {
<a name="229" id="anc229"></a><span class="line-modified">1713                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>
1714             }
1715         }
1716 
1717         for (int i = toIndex; i &lt; a.length; i++) {
<a name="230" id="anc230"></a><span class="line-modified">1718             if (a[i] != (float) 0xBABA) {</span>
<span class="line-modified">1719                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-modified">1720                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
<span class="line-modified">1721             }</span>



















1722         }
1723     }
1724 
<a name="231" id="anc231"></a><span class="line-modified">1725     private static void checkSubArray(double[] a, int fromIndex, int toIndex, int m) {</span>
<span class="line-modified">1726         for (int i = 0; i &lt; fromIndex; i++) {</span>
<span class="line-modified">1727             if (a[i] != (double) 0xDEDA) {</span>
<span class="line-modified">1728                 failed(&quot;Range sort changes left element on position &quot; + i +</span>
<span class="line-modified">1729                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xDEDA);</span>











1730             }
1731         }
<a name="232" id="anc232"></a>
1732 
<a name="233" id="anc233"></a><span class="line-modified">1733         for (int i = fromIndex; i &lt; toIndex - 1; i++) {</span>
<span class="line-modified">1734             if (a[i] &gt; a[i + 1]) {</span>
<span class="line-modified">1735                 failedSort(i, &quot;&quot; + a[i], &quot;&quot; + a[i + 1]);</span>













1736             }
1737         }
<a name="234" id="anc234"></a>
1738 
<a name="235" id="anc235"></a><span class="line-modified">1739         for (int i = toIndex; i &lt; a.length; i++) {</span>
<span class="line-modified">1740             if (a[i] != (double) 0xBABA) {</span>
<span class="line-modified">1741                 failed(&quot;Range sort changes right element on position &quot; + i +</span>
<span class="line-modified">1742                     &quot;: &quot; + a[i] + &quot;, must be &quot; + 0xBABA);</span>
<span class="line-modified">1743             }</span>
<span class="line-modified">1744         }</span>
<span class="line-modified">1745     }</span>
<span class="line-modified">1746 </span>
<span class="line-modified">1747     private static void checkRange(Object object, int m) {</span>
<span class="line-modified">1748         if (object instanceof int[]) {</span>
<span class="line-modified">1749             checkRange((int[]) object, m);</span>
<span class="line-modified">1750         } else if (object instanceof long[]) {</span>
<span class="line-modified">1751             checkRange((long[]) object, m);</span>
<span class="line-modified">1752         } else if (object instanceof short[]) {</span>
<span class="line-modified">1753             checkRange((short[]) object, m);</span>
<span class="line-modified">1754         } else if (object instanceof byte[]) {</span>
<span class="line-modified">1755             checkRange((byte[]) object, m);</span>
<span class="line-removed">1756         } else if (object instanceof char[]) {</span>
<span class="line-removed">1757             checkRange((char[]) object, m);</span>
<span class="line-removed">1758         } else if (object instanceof float[]) {</span>
<span class="line-removed">1759             checkRange((float[]) object, m);</span>
<span class="line-removed">1760         } else if (object instanceof double[]) {</span>
<span class="line-removed">1761             checkRange((double[]) object, m);</span>
<span class="line-removed">1762         } else if (object instanceof Integer[]) {</span>
<span class="line-removed">1763             checkRange((Integer[]) object, m);</span>
<span class="line-removed">1764         } else {</span>
<span class="line-removed">1765             failed(&quot;Unknow type of array: &quot; + object + &quot; of class &quot; +</span>
<span class="line-removed">1766                 object.getClass().getName());</span>
1767         }
1768     }
1769 
<a name="236" id="anc236"></a><span class="line-modified">1770     private static void checkRange(Integer[] a, int m) {</span>
1771         try {
<a name="237" id="anc237"></a><span class="line-modified">1772             Arrays.sort(a, m + 1, m);</span>
<span class="line-modified">1773 </span>
<span class="line-modified">1774             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1775                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-removed">1776                 &quot; toIndex = &quot; + m);</span>
<span class="line-removed">1777         }</span>
<span class="line-removed">1778         catch (IllegalArgumentException iae) {</span>
1779             try {
<a name="238" id="anc238"></a><span class="line-modified">1780                 Arrays.sort(a, -m, a.length);</span>
<span class="line-modified">1781 </span>
<span class="line-modified">1782                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1783                     &quot; as expected: fromIndex = &quot; + (-m));</span>





1784             }
<a name="239" id="anc239"></a><span class="line-modified">1785             catch (ArrayIndexOutOfBoundsException aoe) {</span>













1786                 try {
<a name="240" id="anc240"></a><span class="line-modified">1787                     Arrays.sort(a, 0, a.length + m);</span>






1788 
<a name="241" id="anc241"></a><span class="line-modified">1789                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1790                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>
<span class="line-modified">1791                 }</span>
<span class="line-modified">1792                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1793                     return;</span>
<span class="line-modified">1794                 }</span>










1795             }
1796         }
1797     }
1798 
<a name="242" id="anc242"></a><span class="line-modified">1799     private static void checkRange(int[] a, int m) {</span>
1800         try {
<a name="243" id="anc243"></a><span class="line-modified">1801             Arrays.sort(a, m + 1, m);</span>
















1802 
<a name="244" id="anc244"></a><span class="line-modified">1803             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1804                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1805                 &quot; toIndex = &quot; + m);</span>




1806         }
<a name="245" id="anc245"></a><span class="line-modified">1807         catch (IllegalArgumentException iae) {</span>
<span class="line-removed">1808             try {</span>
<span class="line-removed">1809                 Arrays.sort(a, -m, a.length);</span>
1810 
<a name="246" id="anc246"></a><span class="line-modified">1811                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1812                     &quot; as expected: fromIndex = &quot; + (-m));</span>
<span class="line-modified">1813             }</span>
<span class="line-modified">1814             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-modified">1815                 try {</span>
<span class="line-modified">1816                     Arrays.sort(a, 0, a.length + m);</span>


































1817 
<a name="247" id="anc247"></a><span class="line-modified">1818                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1819                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>










1820                 }
<a name="248" id="anc248"></a><span class="line-modified">1821                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1822                     return;</span>







1823                 }
1824             }
<a name="249" id="anc249"></a><span class="line-modified">1825         }</span>
<span class="line-removed">1826     }</span>
1827 
<a name="250" id="anc250"></a><span class="line-modified">1828     private static void checkRange(long[] a, int m) {</span>
<span class="line-modified">1829         try {</span>
<span class="line-modified">1830             Arrays.sort(a, m + 1, m);</span>
1831 
<a name="251" id="anc251"></a><span class="line-modified">1832             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1833                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1834                 &quot; toIndex = &quot; + m);</span>
<span class="line-modified">1835         }</span>
<span class="line-modified">1836         catch (IllegalArgumentException iae) {</span>
<span class="line-modified">1837             try {</span>
<span class="line-modified">1838                 Arrays.sort(a, -m, a.length);</span>


1839 
<a name="252" id="anc252"></a><span class="line-modified">1840                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1841                     &quot; as expected: fromIndex = &quot; + (-m));</span>

1842             }
<a name="253" id="anc253"></a><span class="line-modified">1843             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-removed">1844                 try {</span>
<span class="line-removed">1845                     Arrays.sort(a, 0, a.length + m);</span>
1846 
<a name="254" id="anc254"></a><span class="line-modified">1847                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1848                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>




1849                 }
<a name="255" id="anc255"></a><span class="line-modified">1850                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1851                     return;</span>







1852                 }
1853             }
<a name="256" id="anc256"></a><span class="line-modified">1854         }</span>


1855     }
1856 
<a name="257" id="anc257"></a><span class="line-modified">1857     private static void checkRange(byte[] a, int m) {</span>
<span class="line-modified">1858         try {</span>
<span class="line-modified">1859             Arrays.sort(a, m + 1, m);</span>



1860 
<a name="258" id="anc258"></a><span class="line-modified">1861             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1862                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1863                 &quot; toIndex = &quot; + m);</span>
<span class="line-modified">1864         }</span>
<span class="line-modified">1865         catch (IllegalArgumentException iae) {</span>
<span class="line-removed">1866             try {</span>
<span class="line-removed">1867                 Arrays.sort(a, -m, a.length);</span>
1868 
<a name="259" id="anc259"></a><span class="line-modified">1869                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1870                     &quot; as expected: fromIndex = &quot; + (-m));</span>







1871             }
<a name="260" id="anc260"></a><span class="line-modified">1872             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-removed">1873                 try {</span>
<span class="line-removed">1874                     Arrays.sort(a, 0, a.length + m);</span>
1875 
<a name="261" id="anc261"></a><span class="line-modified">1876                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1877                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>


1878                 }
<a name="262" id="anc262"></a><span class="line-modified">1879                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1880                     return;</span>





1881                 }
1882             }
<a name="263" id="anc263"></a><span class="line-modified">1883         }</span>
<span class="line-removed">1884     }</span>
1885 
<a name="264" id="anc264"></a><span class="line-modified">1886     private static void checkRange(short[] a, int m) {</span>
<span class="line-modified">1887         try {</span>
<span class="line-modified">1888             Arrays.sort(a, m + 1, m);</span>




1889 
<a name="265" id="anc265"></a><span class="line-modified">1890             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1891                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1892                 &quot; toIndex = &quot; + m);</span>
<span class="line-modified">1893         }</span>
<span class="line-modified">1894         catch (IllegalArgumentException iae) {</span>
<span class="line-modified">1895             try {</span>
<span class="line-removed">1896                 Arrays.sort(a, -m, a.length);</span>
1897 
<a name="266" id="anc266"></a><span class="line-modified">1898                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1899                     &quot; as expected: fromIndex = &quot; + (-m));</span>















1900             }
<a name="267" id="anc267"></a><span class="line-modified">1901             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-removed">1902                 try {</span>
<span class="line-removed">1903                     Arrays.sort(a, 0, a.length + m);</span>
1904 
<a name="268" id="anc268"></a><span class="line-modified">1905                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1906                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>


1907                 }
<a name="269" id="anc269"></a><span class="line-modified">1908                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1909                     return;</span>





1910                 }
1911             }
<a name="270" id="anc270"></a><span class="line-modified">1912         }</span>
<span class="line-removed">1913     }</span>
1914 
<a name="271" id="anc271"></a><span class="line-modified">1915     private static void checkRange(char[] a, int m) {</span>
<span class="line-modified">1916         try {</span>
<span class="line-modified">1917             Arrays.sort(a, m + 1, m);</span>
1918 
<a name="272" id="anc272"></a><span class="line-modified">1919             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1920                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1921                 &quot; toIndex = &quot; + m);</span>
<span class="line-removed">1922         }</span>
<span class="line-removed">1923         catch (IllegalArgumentException iae) {</span>
<span class="line-removed">1924             try {</span>
<span class="line-removed">1925                 Arrays.sort(a, -m, a.length);</span>
1926 
<a name="273" id="anc273"></a><span class="line-modified">1927                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1928                     &quot; as expected: fromIndex = &quot; + (-m));</span>

1929             }
<a name="274" id="anc274"></a><span class="line-modified">1930             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-removed">1931                 try {</span>
<span class="line-removed">1932                     Arrays.sort(a, 0, a.length + m);</span>
1933 
<a name="275" id="anc275"></a><span class="line-modified">1934                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1935                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>


1936                 }
<a name="276" id="anc276"></a><span class="line-modified">1937                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1938                     return;</span>





1939                 }
1940             }
<a name="277" id="anc277"></a><span class="line-modified">1941         }</span>























1942     }
1943 
<a name="278" id="anc278"></a><span class="line-modified">1944     private static void checkRange(float[] a, int m) {</span>
<span class="line-modified">1945         try {</span>
<span class="line-modified">1946             Arrays.sort(a, m + 1, m);</span>


1947 
<a name="279" id="anc279"></a><span class="line-modified">1948             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1949                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1950                 &quot; toIndex = &quot; + m);</span>
<span class="line-modified">1951         }</span>
<span class="line-modified">1952         catch (IllegalArgumentException iae) {</span>
<span class="line-modified">1953             try {</span>
<span class="line-modified">1954                 Arrays.sort(a, -m, a.length);</span>
1955 
<a name="280" id="anc280"></a><span class="line-modified">1956                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1957                     &quot; as expected: fromIndex = &quot; + (-m));</span>



1958             }
<a name="281" id="anc281"></a><span class="line-modified">1959             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-removed">1960                 try {</span>
<span class="line-removed">1961                     Arrays.sort(a, 0, a.length + m);</span>
1962 
<a name="282" id="anc282"></a><span class="line-modified">1963                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1964                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>









1965                 }
<a name="283" id="anc283"></a><span class="line-modified">1966                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1967                     return;</span>

1968                 }
<a name="284" id="anc284"></a>

1969             }
<a name="285" id="anc285"></a><span class="line-modified">1970         }</span>
<span class="line-removed">1971     }</span>
1972 
<a name="286" id="anc286"></a><span class="line-modified">1973     private static void checkRange(double[] a, int m) {</span>
<span class="line-modified">1974         try {</span>
<span class="line-modified">1975             Arrays.sort(a, m + 1, m);</span>





1976 
<a name="287" id="anc287"></a><span class="line-modified">1977             failed(&quot;Sort does not throw IllegalArgumentException &quot; +</span>
<span class="line-modified">1978                 &quot; as expected: fromIndex = &quot; + (m + 1) +</span>
<span class="line-modified">1979                 &quot; toIndex = &quot; + m);</span>
<span class="line-modified">1980         }</span>
<span class="line-modified">1981         catch (IllegalArgumentException iae) {</span>
<span class="line-modified">1982             try {</span>
<span class="line-modified">1983                 Arrays.sort(a, -m, a.length);</span>

1984 
<a name="288" id="anc288"></a><span class="line-modified">1985                 failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1986                     &quot; as expected: fromIndex = &quot; + (-m));</span>




1987             }
<a name="289" id="anc289"></a><span class="line-modified">1988             catch (ArrayIndexOutOfBoundsException aoe) {</span>
<span class="line-modified">1989                 try {</span>
<span class="line-modified">1990                     Arrays.sort(a, 0, a.length + m);</span>




1991 
<a name="290" id="anc290"></a><span class="line-modified">1992                     failed(&quot;Sort does not throw ArrayIndexOutOfBoundsException &quot; +</span>
<span class="line-modified">1993                         &quot; as expected: toIndex = &quot; + (a.length + m));</span>
1994                 }
<a name="291" id="anc291"></a><span class="line-modified">1995                 catch (ArrayIndexOutOfBoundsException aie) {</span>
<span class="line-modified">1996                     return;</span>





1997                 }
1998             }
<a name="292" id="anc292"></a>









1999         }
2000     }
2001 
<a name="293" id="anc293"></a><span class="line-modified">2002     private static void outArray(Object[] a) {</span>
<span class="line-modified">2003         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified">2004             out.print(a[i] + &quot; &quot;);</span>
<span class="line-modified">2005         }</span>
<span class="line-modified">2006         out.println();</span>

















2007     }
2008 
<a name="294" id="anc294"></a><span class="line-modified">2009     private static void outArray(int[] a) {</span>
<span class="line-modified">2010         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified">2011             out.print(a[i] + &quot; &quot;);</span>


















































2012         }
<a name="295" id="anc295"></a><span class="line-removed">2013         out.println();</span>
<span class="line-removed">2014     }</span>
2015 
<a name="296" id="anc296"></a><span class="line-modified">2016     private static void outArray(float[] a) {</span>
<span class="line-modified">2017         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified">2018             out.print(a[i] + &quot; &quot;);</span>

2019         }
<a name="297" id="anc297"></a><span class="line-removed">2020         out.println();</span>
2021     }
2022 
<a name="298" id="anc298"></a><span class="line-modified">2023     private static void outArray(double[] a) {</span>
<span class="line-modified">2024         for (int i = 0; i &lt; a.length; i++) {</span>
<span class="line-modified">2025             out.print(a[i] + &quot; &quot;);</span>


2026         }
<a name="299" id="anc299"></a><span class="line-modified">2027         out.println();</span>




























2028     }
2029 
<a name="300" id="anc300"></a><span class="line-modified">2030     private static class MyRandom extends Random {</span>
<span class="line-modified">2031         MyRandom(long seed) {</span>





2032             super(seed);
<a name="301" id="anc301"></a><span class="line-modified">2033             mySeed = seed;</span>
2034         }
2035 
<a name="302" id="anc302"></a><span class="line-modified">2036         long getSeed() {</span>
<span class="line-modified">2037             return mySeed;</span>

2038         }
2039 
<a name="303" id="anc303"></a><span class="line-modified">2040         private long mySeed;</span>
2041     }
<a name="304" id="anc304"></a><span class="line-removed">2042 </span>
<span class="line-removed">2043     private static String ourDescription;</span>
2044 }
<a name="305" id="anc305"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="305" type="hidden" />
</body>
</html>