<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/util/concurrent/FutureTask/BlockingTaskExecutor.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../Executors/PrivilegedCallables.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="CancelledFutureLoops.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/util/concurrent/FutureTask/BlockingTaskExecutor.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 86 
 87         // Wait for the invocation thread to complete.
 88         thread.join(LONG_DELAY_MS);
 89         if (thread.isAlive()) {
 90             thread.interrupt();
 91             thread.join(LONG_DELAY_MS);
 92             throw new Error(
 93                 String.format(&quot;invokeAll timed out after %d ms&quot;,
 94                               LONG_DELAY_MS));
 95         }
 96     }
 97 
 98     /**
 99      * A helper class with a method to wait for a notification.
100      *
101      * The notification is received via the
102      * {@code sendNotification} method.
103      */
104     static class NotificationReceiver {
105         /** Has the notifiee been notified? */
<span class="line-modified">106         boolean notified = false;</span>
107 
108         /**
109          * Notify the notification receiver.
110          */
111         public synchronized void sendNotification() {
112             notified = true;
113             notifyAll();
114         }
115 
116         /**
117          * Waits until a notification has been received.
118          *
119          * @throws InterruptedException if the wait is interrupted
120          */
121         public synchronized void waitForNotification()
122             throws InterruptedException {
123             while (! notified)
124                 wait();
125         }
126     }
</pre>
</td>
<td>
<hr />
<pre>
 86 
 87         // Wait for the invocation thread to complete.
 88         thread.join(LONG_DELAY_MS);
 89         if (thread.isAlive()) {
 90             thread.interrupt();
 91             thread.join(LONG_DELAY_MS);
 92             throw new Error(
 93                 String.format(&quot;invokeAll timed out after %d ms&quot;,
 94                               LONG_DELAY_MS));
 95         }
 96     }
 97 
 98     /**
 99      * A helper class with a method to wait for a notification.
100      *
101      * The notification is received via the
102      * {@code sendNotification} method.
103      */
104     static class NotificationReceiver {
105         /** Has the notifiee been notified? */
<span class="line-modified">106         boolean notified;</span>
107 
108         /**
109          * Notify the notification receiver.
110          */
111         public synchronized void sendNotification() {
112             notified = true;
113             notifyAll();
114         }
115 
116         /**
117          * Waits until a notification has been received.
118          *
119          * @throws InterruptedException if the wait is interrupted
120          */
121         public synchronized void waitForNotification()
122             throws InterruptedException {
123             while (! notified)
124                 wait();
125         }
126     }
</pre>
</td>
</tr>
</table>
<center><a href="../Executors/PrivilegedCallables.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="CancelledFutureLoops.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>