<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/jdk/java/util/Locale/bcp47u/CurrencyFormatTests.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  *
 26  * @test
 27  * @bug 8215181 8230284 8231273
 28  * @summary Tests the &quot;u-cf&quot; extension
 29  * @modules jdk.localedata
 30  * @run testng/othervm -Djava.locale.providers=CLDR CurrencyFormatTests
 31  */
 32 
 33 import static org.testng.Assert.assertEquals;
 34 
 35 import java.text.NumberFormat;
 36 import java.util.Locale;
 37 
 38 import org.testng.annotations.DataProvider;
 39 import org.testng.annotations.Test;
 40 
 41 /**
 42  * Test NumberFormat with BCP47 u-cf extensions. Note that this test depends
 43  * on the particular CLDR release. Results may vary on other CLDR releases.
 44  */
 45 @Test
 46 public class CurrencyFormatTests {
 47 
 48     @DataProvider(name=&quot;getInstanceData&quot;)
 49     Object[][] getInstanceData() {
 50         return new Object[][] {
 51             // Locale, amount, expected
 52             // US dollar
 53             {Locale.US, -100, &quot;-$100.00&quot;},
 54             {Locale.forLanguageTag(&quot;en-US-u-cf-standard&quot;), -100, &quot;-$100.00&quot;},
 55             {Locale.forLanguageTag(&quot;en-US-u-cf-account&quot;), -100, &quot;($100.00)&quot;},
 56             {Locale.forLanguageTag(&quot;en-US-u-cf-bogus&quot;), -100, &quot;-$100.00&quot;},
 57 
 58             // Euro
 59             {Locale.forLanguageTag(&quot;en-AT&quot;), -100, &quot;-\u20ac\u00a0100,00&quot;},
 60             {Locale.forLanguageTag(&quot;en-AT-u-cf-standard&quot;), -100, &quot;-\u20ac\u00a0100,00&quot;},
 61             {Locale.forLanguageTag(&quot;en-AT-u-cf-account&quot;), -100, &quot;-\u20ac\u00a0100,00&quot;},
 62             {Locale.forLanguageTag(&quot;en-AT-u-cf-bogus&quot;), -100, &quot;-\u20ac\u00a0100,00&quot;},
 63 
 64             // Rupee
 65             {Locale.forLanguageTag(&quot;en-IN&quot;), -100, &quot;-\u20b9100.00&quot;},
 66             {Locale.forLanguageTag(&quot;en-IN-u-cf-standard&quot;), -100, &quot;-\u20b9100.00&quot;},
 67             {Locale.forLanguageTag(&quot;en-IN-u-cf-account&quot;), -100, &quot;(\u20b9100.00)&quot;},
 68             {Locale.forLanguageTag(&quot;en-IN-u-cf-bogus&quot;), -100, &quot;-\u20b9100.00&quot;},
 69 
 70             // Swiss franc
 71             {Locale.forLanguageTag(&quot;en-CH&quot;), -100, &quot;CHF-100.00&quot;},
 72             {Locale.forLanguageTag(&quot;en-CH-u-cf-standard&quot;), -100, &quot;CHF-100.00&quot;},
 73             {Locale.forLanguageTag(&quot;en-CH-u-cf-account&quot;), -100, &quot;CHF-100.00&quot;},
 74             {Locale.forLanguageTag(&quot;en-CH-u-cf-bogus&quot;), -100, &quot;CHF-100.00&quot;},
 75 
 76             // Region override
 77             {Locale.forLanguageTag(&quot;en-US-u-rg-CHZZZZ&quot;), -100, &quot;CHF-100.00&quot;},
 78             {Locale.forLanguageTag(&quot;en-US-u-rg-CHZZZZ-cf-standard&quot;), -100, &quot;CHF-100.00&quot;},
 79             {Locale.forLanguageTag(&quot;en-US-u-rg-CHZZZZ-cf-account&quot;), -100, &quot;CHF-100.00&quot;},
 80             {Locale.forLanguageTag(&quot;en-US-u-rg-CHZZZZ-cf-bogus&quot;), -100, &quot;CHF-100.00&quot;},
 81 
 82             // Numbering systems
 83             // explicit
 84             {Locale.forLanguageTag(&quot;zh-CN-u-nu-arab&quot;), -100, &quot;\u061c-\u00a5\u0661\u0660\u0660\u066b\u0660\u0660&quot;},
 85             {Locale.forLanguageTag(&quot;zh-CN-u-nu-arab-cf-standard&quot;), -100, &quot;\u061c-\u00a5\u0661\u0660\u0660\u066b\u0660\u0660&quot;},
 86             {Locale.forLanguageTag(&quot;zh-CN-u-nu-arab-cf-account&quot;), -100, &quot;\u061c-\u00a5\u0661\u0660\u0660\u066b\u0660\u0660&quot;},
 87             {Locale.forLanguageTag(&quot;zh-CN-u-nu-arab-cf-bogus&quot;), -100, &quot;\u061c-\u00a5\u0661\u0660\u0660\u066b\u0660\u0660&quot;},
 88             // implicit
 89             {Locale.forLanguageTag(&quot;zh-CN&quot;), -100, &quot;-\u00a5100.00&quot;},
 90             {Locale.forLanguageTag(&quot;zh-CN-u-cf-standard&quot;), -100, &quot;-\u00a5100.00&quot;},
 91             {Locale.forLanguageTag(&quot;zh-CN-u-cf-account&quot;), -100, &quot;(\u00a5100.00)&quot;},
 92             {Locale.forLanguageTag(&quot;zh-CN-u-cf-bogus&quot;), -100, &quot;-\u00a5100.00&quot;},
 93             {Locale.forLanguageTag(&quot;ar-SA&quot;), -100, &quot;\u061c-\u0661\u0660\u0660\u066b\u0660\u0660\u00a0\u0631.\u0633.\u200f&quot;},
 94             {Locale.forLanguageTag(&quot;ar-SA-u-cf-standard&quot;), -100, &quot;\u061c-\u0661\u0660\u0660\u066b\u0660\u0660\u00a0\u0631.\u0633.\u200f&quot;},
 95             {Locale.forLanguageTag(&quot;ar-SA-u-cf-account&quot;), -100, &quot;\u061c-\u0661\u0660\u0660\u066b\u0660\u0660\u00a0\u0631.\u0633.\u200f&quot;},
 96             {Locale.forLanguageTag(&quot;ar-SA-u-cf-bogus&quot;), -100, &quot;\u061c-\u0661\u0660\u0660\u066b\u0660\u0660\u00a0\u0631.\u0633.\u200f&quot;},
 97         };
 98     }
 99 
100     @Test(dataProvider=&quot;getInstanceData&quot;)
101     public void test_getInstance(Locale locale, int amount, String expected) {
102         assertEquals(NumberFormat.getCurrencyInstance(locale).format(amount), expected);
103     }
104 }
    </pre>
  </body>
</html>