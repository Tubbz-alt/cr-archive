<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/util/Scanner/ScanTest.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../ResourceBundle/modules/visibility/VisibilityTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../TimeZone/Bug8066652Run.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/util/Scanner/ScanTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2003, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /**
  25  * @test
  26  * @bug 4313885 4926319 4927634 5032610 5032622 5049968 5059533 6223711 6277261 6269946 6288823
<span class="line-modified">  27  *      8072722 8139414 8166261</span>
  28  * @summary Basic tests of java.util.Scanner methods
  29  * @key randomness
  30  * @modules jdk.localedata
  31  * @run main/othervm ScanTest
  32  */
  33 
  34 import java.io.*;
  35 import java.math.*;
  36 import java.nio.*;
  37 import java.text.*;
  38 import java.util.*;
  39 import java.util.function.BiConsumer;
  40 import java.util.function.Consumer;
  41 import java.util.regex.*;
  42 import java.util.stream.*;
  43 
  44 public class ScanTest {
  45 
  46     private static boolean failure = false;
  47     private static int failCount = 0;
  48     private static int NUM_SOURCE_TYPES = 2;
  49     private static File inputFile = new File(System.getProperty(&quot;test.src&quot;, &quot;.&quot;), &quot;input.txt&quot;);
  50 
  51     public static void main(String[] args) throws Exception {
<span class="line-modified">  52 </span>
<span class="line-removed">  53         Locale reservedLocale = Locale.getDefault();</span>
<span class="line-removed">  54         String lang = reservedLocale.getLanguage();</span>
  55         try {
<span class="line-modified">  56             if (!&quot;en&quot;.equals(lang) &amp;&amp;</span>
<span class="line-modified">  57                 !&quot;zh&quot;.equals(lang) &amp;&amp;</span>
<span class="line-modified">  58                 !&quot;ko&quot;.equals(lang) &amp;&amp;</span>
<span class="line-modified">  59                 !&quot;ja&quot;.equals(lang)) {</span>
<span class="line-removed">  60                 //Before we have resource to improve the test to be ready for</span>
<span class="line-removed">  61                 //arbitrary locale, force the default locale to be &quot;English&quot;</span>
<span class="line-removed">  62                 //for now. First we check whether the &quot;English&quot; locale is</span>
<span class="line-removed">  63                 //available on the system as it could be absent due to varying</span>
<span class="line-removed">  64                 //configurations.</span>
<span class="line-removed">  65                 if (!Arrays.asList(Locale.getAvailableLocales())</span>
<span class="line-removed">  66                     .contains(Locale.ENGLISH)) {</span>
<span class="line-removed">  67                     throw new RuntimeException</span>
<span class="line-removed">  68                        (&quot;The \&quot;English\&quot; Locale is unavailable on this system&quot;);</span>
<span class="line-removed">  69                 }</span>
<span class="line-removed">  70                 Locale.setDefault(Locale.ENGLISH);</span>
<span class="line-removed">  71             }</span>
  72             skipTest();
  73             findInLineTest();
  74             findWithinHorizonTest();
  75             findInEmptyLineTest();
  76             removeTest();
  77             fromFileTest();
  78             ioExceptionTest();
  79             matchTest();
  80             delimiterTest();
  81             boundaryDelimTest();
  82             useLocaleTest();
  83             closeTest();
  84             cacheTest();
  85             cacheTest2();
  86             nonASCIITest();
  87             resetTest();
  88             streamCloseTest();
  89             streamComodTest();
  90             outOfRangeRadixTest();
  91 
</pre>
<hr />
<pre>
 111             }
 112 
 113             // Examples
 114             //example1();
 115             //example2();
 116             //example3();
 117 
 118             // Usage cases
 119             useCase1();
 120             useCase2();
 121             useCase3();
 122             useCase4();
 123             useCase5();
 124 
 125             if (failure)
 126                 throw new RuntimeException(&quot;Failure in the scanning tests.&quot;);
 127             else
 128                 System.err.println(&quot;OKAY: All tests passed.&quot;);
 129         } finally {
 130             // restore the default locale
<span class="line-modified"> 131             Locale.setDefault(reservedLocale);</span>
 132         }
 133     }
 134 
 135     public static void useCase1() throws Exception {
 136         try (Scanner sc = new Scanner(inputFile)) {
 137             sc.findWithinHorizon(&quot;usage case 1&quot;, 0);
 138             String[] names = new String[4];
 139             for (int i=0; i&lt;4; i++) {
 140                 while (sc.hasNextFloat())
 141                     sc.nextFloat();
 142                 names[i] = sc.next();
 143                 sc.nextLine();
 144             }
 145             if (!names[0].equals(&quot;Frank&quot;))
 146                 failCount++;
 147             if (!names[1].equals(&quot;Joe&quot;))
 148                 failCount++;
 149             if (!names[2].equals(&quot;Mary&quot;))
 150                 failCount++;
 151             if (!names[3].equals(&quot;Michelle&quot;))
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /**
  25  * @test
  26  * @bug 4313885 4926319 4927634 5032610 5032622 5049968 5059533 6223711 6277261 6269946 6288823
<span class="line-modified">  27  *      8072722 8139414 8166261 8172695</span>
  28  * @summary Basic tests of java.util.Scanner methods
  29  * @key randomness
  30  * @modules jdk.localedata
  31  * @run main/othervm ScanTest
  32  */
  33 
  34 import java.io.*;
  35 import java.math.*;
  36 import java.nio.*;
  37 import java.text.*;
  38 import java.util.*;
  39 import java.util.function.BiConsumer;
  40 import java.util.function.Consumer;
  41 import java.util.regex.*;
  42 import java.util.stream.*;
  43 
  44 public class ScanTest {
  45 
  46     private static boolean failure = false;
  47     private static int failCount = 0;
  48     private static int NUM_SOURCE_TYPES = 2;
  49     private static File inputFile = new File(System.getProperty(&quot;test.src&quot;, &quot;.&quot;), &quot;input.txt&quot;);
  50 
  51     public static void main(String[] args) throws Exception {
<span class="line-modified">  52         Locale defaultLocale = Locale.getDefault();</span>


  53         try {
<span class="line-modified">  54             // Before we have resource to improve the test to be ready for</span>
<span class="line-modified">  55             // arbitrary locale, force the default locale to be ROOT for now.</span>
<span class="line-modified">  56             Locale.setDefault(Locale.US);</span>
<span class="line-modified">  57 </span>












  58             skipTest();
  59             findInLineTest();
  60             findWithinHorizonTest();
  61             findInEmptyLineTest();
  62             removeTest();
  63             fromFileTest();
  64             ioExceptionTest();
  65             matchTest();
  66             delimiterTest();
  67             boundaryDelimTest();
  68             useLocaleTest();
  69             closeTest();
  70             cacheTest();
  71             cacheTest2();
  72             nonASCIITest();
  73             resetTest();
  74             streamCloseTest();
  75             streamComodTest();
  76             outOfRangeRadixTest();
  77 
</pre>
<hr />
<pre>
  97             }
  98 
  99             // Examples
 100             //example1();
 101             //example2();
 102             //example3();
 103 
 104             // Usage cases
 105             useCase1();
 106             useCase2();
 107             useCase3();
 108             useCase4();
 109             useCase5();
 110 
 111             if (failure)
 112                 throw new RuntimeException(&quot;Failure in the scanning tests.&quot;);
 113             else
 114                 System.err.println(&quot;OKAY: All tests passed.&quot;);
 115         } finally {
 116             // restore the default locale
<span class="line-modified"> 117             Locale.setDefault(defaultLocale);</span>
 118         }
 119     }
 120 
 121     public static void useCase1() throws Exception {
 122         try (Scanner sc = new Scanner(inputFile)) {
 123             sc.findWithinHorizon(&quot;usage case 1&quot;, 0);
 124             String[] names = new String[4];
 125             for (int i=0; i&lt;4; i++) {
 126                 while (sc.hasNextFloat())
 127                     sc.nextFloat();
 128                 names[i] = sc.next();
 129                 sc.nextLine();
 130             }
 131             if (!names[0].equals(&quot;Frank&quot;))
 132                 failCount++;
 133             if (!names[1].equals(&quot;Joe&quot;))
 134                 failCount++;
 135             if (!names[2].equals(&quot;Mary&quot;))
 136                 failCount++;
 137             if (!names[3].equals(&quot;Michelle&quot;))
</pre>
</td>
</tr>
</table>
<center><a href="../ResourceBundle/modules/visibility/VisibilityTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../TimeZone/Bug8066652Run.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>