<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/jdk/java/util/Formatter/Basic-X.java.template</title>
    <link rel="stylesheet" href="../../../../../style.css" />
    <script type="text/javascript" src="../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /*
<a name="1" id="anc1"></a><span class="line-modified">   2  * Copyright (c) 2003, 2016, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 /* Type-specific source code for unit test
  25  *
  26  * Regenerate the BasicX classes via genBasic.sh whenever this file changes.
  27  * We check in the generated source files so that the test tree can be used
  28  * independently of the rest of the source tree.
  29  */
  30 
  31 #warn This file is preprocessed before being compiled
  32 
  33 import java.io.*;
  34 import java.math.BigDecimal;
  35 import java.math.BigInteger;
  36 import java.text.DateFormatSymbols;
  37 import java.util.*;
  38 
  39 import static java.util.Calendar.*;
  40 #if[datetime]
  41 import static java.util.SimpleTimeZone.*;
  42 import java.util.regex.Pattern;
  43 #end[datetime]
  44 
  45 public class Basic$Type$ extends Basic {
  46 
  47     private static void test(String fs, String exp, Object ... args) {
  48         Formatter f = new Formatter(new StringBuilder(), Locale.US);
  49         f.format(fs, args);
  50         ck(fs, exp, f.toString());
  51 
  52         f = new Formatter(new StringBuilder(), Locale.US);
  53         f.format(&quot;foo &quot; + fs + &quot; bar&quot;, args);
  54         ck(fs, &quot;foo &quot; + exp + &quot; bar&quot;, f.toString());
  55     }
  56 
  57     private static void test(Locale l, String fs, String exp, Object ... args)
  58     {
  59         Formatter f = new Formatter(new StringBuilder(), l);
  60         f.format(fs, args);
  61         ck(fs, exp, f.toString());
  62 
  63         f = new Formatter(new StringBuilder(), l);
  64         f.format(&quot;foo &quot; + fs + &quot; bar&quot;, args);
  65         ck(fs, &quot;foo &quot; + exp + &quot; bar&quot;, f.toString());
  66     }
  67 
  68     private static void test(String fs, Object ... args) {
  69         Formatter f = new Formatter(new StringBuilder(), Locale.US);
  70         f.format(fs, args);
  71         ck(fs, &quot;fail&quot;, f.toString());
  72     }
  73 
  74     private static void test(String fs) {
  75         Formatter f = new Formatter(new StringBuilder(), Locale.US);
  76         f.format(fs, &quot;fail&quot;);
  77         ck(fs, &quot;fail&quot;, f.toString());
  78     }
  79 
  80     private static void testSysOut(String fs, String exp, Object ... args) {
  81         FileOutputStream fos = null;
  82         FileInputStream fis = null;
  83         try {
  84             PrintStream saveOut = System.out;
  85             fos = new FileOutputStream(&quot;testSysOut&quot;);
  86             System.setOut(new PrintStream(fos));
  87             System.out.format(Locale.US, fs, args);
  88             fos.close();
  89 
  90             fis = new FileInputStream(&quot;testSysOut&quot;);
  91             byte [] ba = new byte[exp.length()];
  92             int len = fis.read(ba);
  93             String got = new String(ba);
  94             if (len != ba.length)
  95                 fail(fs, exp, got);
  96             ck(fs, exp, got);
  97 
  98             System.setOut(saveOut);
  99         } catch (FileNotFoundException ex) {
 100             fail(fs, ex.getClass());
 101         } catch (IOException ex) {
 102             fail(fs, ex.getClass());
 103         } finally {
 104             try {
 105                 if (fos != null)
 106                     fos.close();
 107                 if (fis != null)
 108                     fis.close();
 109             } catch (IOException ex) {
 110                 fail(fs, ex.getClass());
 111             }
 112         }
 113     }
 114 
 115     private static void tryCatch(String fs, Class&lt;?&gt; ex) {
 116         boolean caught = false;
 117         try {
 118             test(fs);
 119         } catch (Throwable x) {
 120             if (ex.isAssignableFrom(x.getClass()))
 121                 caught = true;
 122         }
 123         if (!caught)
 124             fail(fs, ex);
 125         else
 126             pass();
 127     }
 128 
 129     private static void tryCatch(String fs, Class&lt;?&gt; ex, Object ... args) {
 130         boolean caught = false;
 131         try {
 132             test(fs, args);
 133         } catch (Throwable x) {
 134             if (ex.isAssignableFrom(x.getClass()))
 135                 caught = true;
 136         }
 137         if (!caught)
 138             fail(fs, ex);
 139         else
 140             pass();
 141     }
 142 
 143 #if[datetime]
 144     private static void testDateTime(String fs, String exp, Calendar c) {
 145         testDateTime(fs, exp, c, true);
 146     }
 147 
 148     private static void testDateTime(String fs, String exp, Calendar c, boolean upper) {
 149         //---------------------------------------------------------------------
 150         // Date/Time conversions applicable to Calendar, Date, and long.
 151         //---------------------------------------------------------------------
 152 
 153         // Calendar
 154         test(fs, exp, c);
 155         test((Locale)null, fs, exp, c);
 156         test(Locale.US, fs, exp, c);
 157 
 158         // Date/long do not have timezone information so they will always use
 159         // the default timezone.
 160         String nexp = (fs.equals(&quot;%tZ&quot;) || fs.equals(&quot;%TZ&quot;)
 161                        || fs.equals(&quot;%tc&quot;) || fs.equals(&quot;%Tc&quot;)
 162                        ? exp.replace(&quot;PST&quot;, &quot;GMT-08:00&quot;)
 163                        : exp);
 164 
 165         // Date (implemented via conversion to Calendar)
 166         Date d = c.getTime();
 167         test(fs, nexp, d);
 168         test((Locale)null, fs, nexp, d);
 169         test(Locale.US, fs, nexp, d);
 170 
 171         // long (implemented via conversion to Calendar)
 172         long l = c.getTimeInMillis();
 173         test(fs, nexp, l);
 174         test((Locale)null, fs, nexp, l);
 175         test(Locale.US, fs, nexp, l);
 176 
 177         if (upper)
 178             // repeat all tests for upper case variant (%T)
 179             testDateTime(Pattern.compile(&quot;t&quot;).matcher(fs).replaceFirst(&quot;T&quot;),
 180                          exp.toUpperCase(), c, false);
 181     }
 182 
 183     private static void testHours() {
 184         for (int i = 0; i &lt; 24; i++) {
 185             // GregorianCalendar(int year, int month, int dayOfMonth,
 186             //    int hourOfDay, int minute, int second);
 187             Calendar c = new GregorianCalendar(1995, MAY, 23, i, 48, 34);
 188 
 189             //-----------------------------------------------------------------
 190             // DateTime.HOUR_OF_DAY - &#39;k&#39; (0 - 23) -- like H
 191             //-----------------------------------------------------------------
 192             String exp = Integer.toString(i);
 193             testDateTime(&quot;%tk&quot;, exp, c);
 194 
 195             //-----------------------------------------------------------------
 196             // DateTime.HOUR - &#39;l&#39; (1 - 12) -- like I
 197             //-----------------------------------------------------------------
 198             int v = i % 12;
 199             v = (v == 0 ? 12 : v);
 200             String exp2 = Integer.toString(v);
 201             testDateTime(&quot;%tl&quot;, exp2, c);
 202 
 203             //-----------------------------------------------------------------
 204             // DateTime.HOUR_OF_DAY_0 - &#39;H&#39; (00 - 23) [zero padded]
 205             //-----------------------------------------------------------------
 206             if (exp.length() &lt; 2) exp = &quot;0&quot; + exp;
 207             testDateTime(&quot;%tH&quot;, exp, c);
 208 
 209             //-----------------------------------------------------------------
 210             // DateTime.HOUR_0 - &#39;I&#39; (01 - 12)
 211             //-----------------------------------------------------------------
 212             if (exp2.length() &lt; 2) exp2 = &quot;0&quot; + exp2;
 213             testDateTime(&quot;%tI&quot;, exp2, c);
 214 
 215             //-----------------------------------------------------------------
 216             // DateTime.AM_PM - (am or pm)
 217             //-----------------------------------------------------------------
 218             testDateTime(&quot;%tp&quot;, (i &lt;12 ? &quot;am&quot; : &quot;pm&quot;), c);
 219         }
 220     }
 221 #end[datetime]
 222 
 223 #if[dec]
 224 #if[prim]
 225     private static $type$ negate($type$ v) {
 226         return ($type$) -v;
 227     }
 228 #end[prim]
 229 #end[dec]
 230 #if[Byte]
 231     private static $type$ negate($type$ v) {
 232         return new $type$((byte) -v.byteValue());
 233     }
 234 #end[Byte]
 235 #if[Short]
 236     private static $type$ negate($type$ v) {
 237         return new $type$((short) -v.shortValue());
 238     }
 239 #end[Short]
 240 #if[Integer]
 241     private static $type$ negate($type$ v) {
 242         return new $type$(-v.intValue());
 243     }
 244 #end[Integer]
 245 #if[Long]
 246     private static $type$ negate($type$ v) {
 247         return new $type$(-v.longValue());
 248     }
 249 #end[Long]
 250 
 251 #if[BigDecimal]
 252     private static $type$ create(double v) {
 253         return new $type$(v);
 254     }
 255 
 256     private static $type$ negate($type$ v) {
 257         return v.negate();
 258     }
 259 
 260     private static $type$ mult($type$ v, double mul) {
 261         return v.multiply(new $type$(mul));
 262     }
 263 
 264     private static $type$ recip($type$ v) {
 265         return BigDecimal.ONE.divide(v);
 266     }
 267 #end[BigDecimal]
 268 #if[float]
 269     private static $type$ create(double v) {
 270         return ($type$) v;
 271     }
 272 
 273     private static $type$ negate(double v) {
 274         return ($type$) -v;
 275     }
 276 
 277     private static $type$ mult($type$ v, double mul) {
 278         return v * ($type$) mul;
 279     }
 280 
 281     private static $type$ recip($type$ v) {
 282         return 1.0f / v;
 283     }
 284 #end[float]
 285 #if[Float]
 286     private static $type$ create(double v) {
 287         return new $type$(v);
 288     }
 289 
 290     private static $type$ negate($type$ v) {
 291         return new $type$(-v.floatValue());
 292     }
 293 
 294     private static $type$ mult($type$ v, double mul) {
 295         return new $type$(v.floatValue() * (float) mul);
 296     }
 297 
 298     private static $type$ recip($type$ v) {
 299         return new $type$(1.0f / v.floatValue());
 300     }
 301 #end[Float]
 302 #if[double]
 303     private static $type$ create(double v) {
 304         return ($type$) v;
 305     }
 306 
 307 
 308     private static $type$ negate(double v) {
 309         return -v;
 310     }
 311 
 312     private static $type$ mult($type$ v, double mul) {
 313         return v * mul;
 314     }
 315 
 316     private static $type$ recip($type$ v) {
 317         return 1.0 / v;
 318     }
 319 #end[double]
 320 #if[Double]
 321     private static $type$ create(double v) {
 322         return new $type$(v);
 323     }
 324 
 325     private static $type$ negate($type$ v) {
 326         return new $type$(-v.doubleValue());
 327     }
 328 
 329     private static $type$ mult($type$ v, double mul) {
 330         return new $type$(v.doubleValue() * mul);
 331     }
 332 
 333     private static $type$ recip($type$ v) {
 334         return new $type$(1.0 / v.doubleValue());
 335     }
 336 #end[Double]
 337 
 338     public static void test() {
 339         TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT-0800&quot;));
 340 
 341         // Any characters not explicitly defined as conversions, date/time
 342         // conversion suffixes, or flags are illegal and are reserved for
 343         // future extensions.  Use of such a character in a format string will
 344         // cause an UnknownFormatConversionException or
 345         // UnknownFormatFlagsException to be thrown.
 346         tryCatch(&quot;%q&quot;, UnknownFormatConversionException.class);
 347         tryCatch(&quot;%t&amp;&quot;, UnknownFormatConversionException.class);
 348         tryCatch(&quot;%&amp;d&quot;, UnknownFormatConversionException.class);
 349         tryCatch(&quot;%^b&quot;, UnknownFormatConversionException.class);
 350 
 351         //---------------------------------------------------------------------
 352         // Formatter.java class javadoc examples
 353         //---------------------------------------------------------------------
 354         test(Locale.FRANCE, &quot;e = %+10.4f&quot;, &quot;e =    +2,7183&quot;, Math.E);
 355         test(&quot;%4$2s %3$2s %2$2s %1$2s&quot;, &quot; d  c  b  a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);
 356         test(&quot;Amount gained or lost since last statement: $ %,(.2f&quot;,
 357              &quot;Amount gained or lost since last statement: $ (6,217.58)&quot;,
 358              (new BigDecimal(&quot;-6217.58&quot;)));
 359         Calendar c = new GregorianCalendar(1969, JULY, 20, 16, 17, 0);
 360         testSysOut(&quot;Local time: %tT&quot;, &quot;Local time: 16:17:00&quot;, c);
 361 
 362         test(&quot;Unable to open file &#39;%1$s&#39;: %2$s&quot;,
 363              &quot;Unable to open file &#39;food&#39;: No such file or directory&quot;,
 364              &quot;food&quot;, &quot;No such file or directory&quot;);
 365         Calendar duke = new GregorianCalendar(1995, MAY, 23, 19, 48, 34);
 366         duke.set(Calendar.MILLISECOND, 584);
 367         test(&quot;Duke&#39;s Birthday: %1$tB %1$te, %1$tY&quot;,
 368              &quot;Duke&#39;s Birthday: May 23, 1995&quot;,
 369              duke);
 370         test(&quot;Duke&#39;s Birthday: %1$tB %1$te, %1$tY&quot;,
 371              &quot;Duke&#39;s Birthday: May 23, 1995&quot;,
 372              duke.getTime());
 373         test(&quot;Duke&#39;s Birthday: %1$tB %1$te, %1$tY&quot;,
 374              &quot;Duke&#39;s Birthday: May 23, 1995&quot;,
 375              duke.getTimeInMillis());
 376 
 377         test(&quot;%4$s %3$s %2$s %1$s %4$s %3$s %2$s %1$s&quot;,
 378              &quot;d c b a d c b a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);
 379         test(&quot;%s %s %&lt;s %&lt;s&quot;, &quot;a b b b&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);
 380         test(&quot;%s %s %s %s&quot;, &quot;a b c d&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);
 381         test(&quot;%2$s %s %&lt;s %s&quot;, &quot;b a a b&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);
 382 
 383         //---------------------------------------------------------------------
 384         // %b
 385         //
 386         // General conversion applicable to any argument.
 387         //---------------------------------------------------------------------
 388         test(&quot;%b&quot;, &quot;true&quot;, true);
 389         test(&quot;%b&quot;, &quot;false&quot;, false);
 390         test(&quot;%B&quot;, &quot;TRUE&quot;, true);
 391         test(&quot;%B&quot;, &quot;FALSE&quot;, false);
 392         test(&quot;%b&quot;, &quot;true&quot;, Boolean.TRUE);
 393         test(&quot;%b&quot;, &quot;false&quot;, Boolean.FALSE);
 394         test(&quot;%B&quot;, &quot;TRUE&quot;, Boolean.TRUE);
 395         test(&quot;%B&quot;, &quot;FALSE&quot;, Boolean.FALSE);
 396         test(&quot;%14b&quot;, &quot;          true&quot;, true);
 397         test(&quot;%-14b&quot;, &quot;true          &quot;, true);
 398         test(&quot;%5.1b&quot;, &quot;    f&quot;, false);
 399         test(&quot;%-5.1b&quot;, &quot;f    &quot;, false);
 400 
 401         test(&quot;%b&quot;, &quot;true&quot;, &quot;foo&quot;);
 402         test(&quot;%b&quot;, &quot;false&quot;, (Object)null);
 403 
 404         // Boolean.java hardcodes the Strings for &quot;true&quot; and &quot;false&quot;, so no
 405         // localization is possible.
 406         test(Locale.FRANCE, &quot;%b&quot;, &quot;true&quot;, true);
 407         test(Locale.FRANCE, &quot;%b&quot;, &quot;false&quot;, false);
 408 
 409         // If you pass in a single array to a varargs method, the compiler
 410         // uses it as the array of arguments rather than treating it as a
 411         // single array-type argument.
 412         test(&quot;%b&quot;, &quot;false&quot;, (Object[])new String[2]);
 413         test(&quot;%b&quot;, &quot;true&quot;, new String[2], new String[2]);
 414 
 415         int [] ia = { 1, 2, 3 };
 416         test(&quot;%b&quot;, &quot;true&quot;, ia);
 417 
 418         //---------------------------------------------------------------------
 419         // %b - errors
 420         //---------------------------------------------------------------------
 421         tryCatch(&quot;%#b&quot;, FormatFlagsConversionMismatchException.class);
 422         tryCatch(&quot;%-b&quot;, MissingFormatWidthException.class);
 423         // correct or side-effect of implementation?
 424         tryCatch(&quot;%.b&quot;, UnknownFormatConversionException.class);
 425         tryCatch(&quot;%,b&quot;, FormatFlagsConversionMismatchException.class);
 426 
 427         //---------------------------------------------------------------------
 428         // %c
 429         //
 430         // General conversion applicable to any argument.
 431         //---------------------------------------------------------------------
 432         test(&quot;%c&quot;, &quot;i&quot;, &#39;i&#39;);
 433         test(&quot;%C&quot;, &quot;I&quot;, &#39;i&#39;);
 434         test(&quot;%4c&quot;,  &quot;   i&quot;, &#39;i&#39;);
 435         test(&quot;%-4c&quot;, &quot;i   &quot;, &#39;i&#39;);
 436         test(&quot;%4C&quot;,  &quot;   I&quot;, &#39;i&#39;);
 437         test(&quot;%-4C&quot;, &quot;I   &quot;, &#39;i&#39;);
 438         test(&quot;%c&quot;, &quot;i&quot;, new Character(&#39;i&#39;));
 439         test(&quot;%c&quot;, &quot;H&quot;, (byte) 72);
 440         test(&quot;%c&quot;, &quot;i&quot;, (short) 105);
 441         test(&quot;%c&quot;, &quot;!&quot;, (int) 33);
 442         test(&quot;%c&quot;, &quot;\u007F&quot;, Byte.MAX_VALUE);
 443         test(&quot;%c&quot;, new String(Character.toChars(Short.MAX_VALUE)),
 444              Short.MAX_VALUE);
 445         test(&quot;%c&quot;, &quot;null&quot;, (Object) null);
 446 
 447         //---------------------------------------------------------------------
 448         // %c - errors
 449         //---------------------------------------------------------------------
 450         tryCatch(&quot;%c&quot;, IllegalFormatConversionException.class,
 451                  Boolean.TRUE);
 452         tryCatch(&quot;%c&quot;, IllegalFormatConversionException.class,
 453                  (float) 0.1);
 454         tryCatch(&quot;%c&quot;, IllegalFormatConversionException.class,
 455                  new Object());
 456         tryCatch(&quot;%c&quot;, IllegalFormatCodePointException.class,
 457                  Byte.MIN_VALUE);
 458         tryCatch(&quot;%c&quot;, IllegalFormatCodePointException.class,
 459                  Short.MIN_VALUE);
 460         tryCatch(&quot;%c&quot;, IllegalFormatCodePointException.class,
 461                  Integer.MIN_VALUE);
 462         tryCatch(&quot;%c&quot;, IllegalFormatCodePointException.class,
 463                  Integer.MAX_VALUE);
 464 
 465         tryCatch(&quot;%#c&quot;, FormatFlagsConversionMismatchException.class);
 466         tryCatch(&quot;%,c&quot;, FormatFlagsConversionMismatchException.class);
 467         tryCatch(&quot;%(c&quot;, FormatFlagsConversionMismatchException.class);
 468         tryCatch(&quot;%$c&quot;, UnknownFormatConversionException.class);
 469         tryCatch(&quot;%.2c&quot;, IllegalFormatPrecisionException.class);
 470 
 471         //---------------------------------------------------------------------
 472         // %s
 473         //
 474         // General conversion applicable to any argument.
 475         //---------------------------------------------------------------------
 476         test(&quot;%s&quot;, &quot;Hello, Duke&quot;, &quot;Hello, Duke&quot;);
 477         test(&quot;%S&quot;, &quot;HELLO, DUKE&quot;, &quot;Hello, Duke&quot;);
 478         test(&quot;%20S&quot;, &quot;         HELLO, DUKE&quot;, &quot;Hello, Duke&quot;);
 479         test(&quot;%20s&quot;, &quot;         Hello, Duke&quot;, &quot;Hello, Duke&quot;);
 480         test(&quot;%-20s&quot;, &quot;Hello, Duke         &quot;, &quot;Hello, Duke&quot;);
 481         test(&quot;%-20.5s&quot;, &quot;Hello               &quot;, &quot;Hello, Duke&quot;);
 482         test(&quot;%s&quot;, &quot;null&quot;, (Object)null);
 483 
 484         StringBuffer sb = new StringBuffer(&quot;foo bar&quot;);
 485         test(&quot;%s&quot;, sb.toString(), sb);
 486         test(&quot;%S&quot;, sb.toString().toUpperCase(), sb);
 487 
 488         //---------------------------------------------------------------------
 489         // %s - errors
 490         //---------------------------------------------------------------------
 491         tryCatch(&quot;%-s&quot;, MissingFormatWidthException.class);
 492         tryCatch(&quot;%--s&quot;, DuplicateFormatFlagsException.class);
 493         tryCatch(&quot;%#s&quot;, FormatFlagsConversionMismatchException.class, 0);
 494         tryCatch(&quot;%#s&quot;, FormatFlagsConversionMismatchException.class, 0.5f);
 495         tryCatch(&quot;%#s&quot;, FormatFlagsConversionMismatchException.class, &quot;hello&quot;);
 496         tryCatch(&quot;%#s&quot;, FormatFlagsConversionMismatchException.class, null);
 497 
 498         //---------------------------------------------------------------------
 499         // %h
 500         //
 501         // General conversion applicable to any argument.
 502         //---------------------------------------------------------------------
 503         test(&quot;%h&quot;, Integer.toHexString(&quot;Hello, Duke&quot;.hashCode()),
 504              &quot;Hello, Duke&quot;);
 505         test(&quot;%10h&quot;, &quot;  ddf63471&quot;, &quot;Hello, Duke&quot;);
 506         test(&quot;%-10h&quot;, &quot;ddf63471  &quot;, &quot;Hello, Duke&quot;);
 507         test(&quot;%-10H&quot;, &quot;DDF63471  &quot;, &quot;Hello, Duke&quot;);
 508         test(&quot;%10h&quot;, &quot;  402e0000&quot;, 15.0);
 509         test(&quot;%10H&quot;, &quot;  402E0000&quot;, 15.0);
 510 
 511         //---------------------------------------------------------------------
 512         // %h - errors
 513         //---------------------------------------------------------------------
 514         tryCatch(&quot;%#h&quot;, FormatFlagsConversionMismatchException.class);
 515 
 516         //---------------------------------------------------------------------
 517         // flag/conversion errors
 518         //---------------------------------------------------------------------
 519         tryCatch(&quot;%F&quot;, UnknownFormatConversionException.class);
 520 
 521         tryCatch(&quot;%#g&quot;, FormatFlagsConversionMismatchException.class);
 522 
 523 #if[dec]
 524 
 525 #if[prim]
 526         $type$ minByte = Byte.MIN_VALUE;   // -128
 527 #else[prim]
 528         $type$ minByte = new $type$(Byte.MIN_VALUE);
 529 #end[prim]
 530 
 531         //---------------------------------------------------------------------
 532         // %d
 533         //
 534         // Numeric conversion applicable to byte, short, int, long, and
 535         // BigInteger.
 536         //---------------------------------------------------------------------
 537         test(&quot;%d&quot;, &quot;null&quot;, (Object)null);
 538 
 539 #if[byte]
 540 #if[prim]
 541         //---------------------------------------------------------------------
 542         // %d - byte
 543         //---------------------------------------------------------------------
 544         $type$ seventeen = ($type$) 17;
 545         test(&quot;%d&quot;, &quot;17&quot;, seventeen);
 546         test(&quot;%,d&quot;, &quot;17&quot;, seventeen);
 547         test(&quot;%,d&quot;, &quot;-17&quot;, negate(seventeen));
 548         test(&quot;%(d&quot;, &quot;17&quot;, seventeen);
 549         test(&quot;%(d&quot;, &quot;(17)&quot;, negate(seventeen));
 550         test(&quot;% d&quot;, &quot; 17&quot;, seventeen);
 551         test(&quot;% d&quot;, &quot;-17&quot;, negate(seventeen));
 552         test(&quot;%+d&quot;, &quot;+17&quot;, seventeen);
 553         test(&quot;%+d&quot;, &quot;-17&quot;, negate(seventeen));
 554         test(&quot;%010d&quot;, &quot;0000000017&quot;, seventeen);
 555         test(&quot;%010d&quot;, &quot;-000000017&quot;, negate(seventeen));
 556         test(&quot;%(10d&quot;, &quot;      (17)&quot;, negate(seventeen));
 557         test(&quot;%-10d&quot;, &quot;17        &quot;, seventeen);
 558         test(&quot;%-10d&quot;, &quot;-17       &quot;, negate(seventeen));
 559 #end[prim]
 560 #else[byte]
 561 #if[short]
 562         //---------------------------------------------------------------------
 563         // %d - short
 564         //---------------------------------------------------------------------
 565         $type$ oneToFive = ($type$) 12345;
 566         test(&quot;%d&quot;, &quot;12345&quot;, oneToFive);
 567         test(&quot;%,d&quot;, &quot;12,345&quot;, oneToFive);
 568         test(&quot;%,d&quot;, &quot;-12,345&quot;, negate(oneToFive));
 569         test(&quot;%(d&quot;, &quot;12345&quot;, oneToFive);
 570         test(&quot;%(d&quot;, &quot;(12345)&quot;, negate(oneToFive));
 571         test(&quot;% d&quot;, &quot; 12345&quot;, oneToFive);
 572         test(&quot;% d&quot;, &quot;-12345&quot;, negate(oneToFive));
 573         test(&quot;%+d&quot;, &quot;+12345&quot;, oneToFive);
 574         test(&quot;%+d&quot;, &quot;-12345&quot;, negate(oneToFive));
 575         test(&quot;%010d&quot;, &quot;0000012345&quot;, oneToFive);
 576         test(&quot;%010d&quot;, &quot;-000012345&quot;, negate(oneToFive));
 577         test(&quot;%(10d&quot;, &quot;   (12345)&quot;, negate(oneToFive));
 578         test(&quot;%-10d&quot;, &quot;12345     &quot;, oneToFive);
 579         test(&quot;%-10d&quot;, &quot;-12345    &quot;, negate(oneToFive));
 580         // , variations:
 581         test(&quot;% ,d&quot;, &quot; 12,345&quot;, oneToFive);
 582         test(&quot;% ,d&quot;, &quot;-12,345&quot;, negate(oneToFive));
 583         test(&quot;%0,10d&quot;, &quot;000012,345&quot;, oneToFive);
 584         test(&quot;%0,10d&quot;, &quot;-00012,345&quot;, negate(oneToFive));
 585         test(&quot;%(,10d&quot;, &quot;  (12,345)&quot;, negate(oneToFive));
 586         test(&quot;%-,10d&quot;, &quot;12,345    &quot;, oneToFive);
 587         test(&quot;%-,10d&quot;, &quot;-12,345   &quot;, negate(oneToFive));
 588 
 589 #else[short]
 590 #if[prim]
 591         //---------------------------------------------------------------------
 592         // %d - int and long
 593         //---------------------------------------------------------------------
 594         $type$ oneToSeven = ($type$) 1234567;
 595         test(&quot;%d&quot;, &quot;1234567&quot;, oneToSeven);
 596         test(&quot;%,d&quot;, &quot;1,234,567&quot;, oneToSeven);
<a name="2" id="anc2"></a><span class="line-modified"> 597         test(Locale.FRANCE, &quot;%,d&quot;, &quot;1\u00a0234\u00a0567&quot;, oneToSeven);</span>
 598         test(&quot;%,d&quot;, &quot;-1,234,567&quot;, negate(oneToSeven));
 599         test(&quot;%(d&quot;, &quot;1234567&quot;, oneToSeven);
 600         test(&quot;%(d&quot;, &quot;(1234567)&quot;, negate(oneToSeven));
 601         test(&quot;% d&quot;, &quot; 1234567&quot;, oneToSeven);
 602         test(&quot;% d&quot;, &quot;-1234567&quot;, negate(oneToSeven));
 603         test(&quot;%+d&quot;, &quot;+1234567&quot;, oneToSeven);
 604         test(&quot;%+d&quot;, &quot;-1234567&quot;, negate(oneToSeven));
 605         test(&quot;%010d&quot;, &quot;0001234567&quot;, oneToSeven);
 606         test(&quot;%010d&quot;, &quot;-001234567&quot;, negate(oneToSeven));
 607         test(&quot;%(10d&quot;, &quot; (1234567)&quot;, negate(oneToSeven));
 608         test(&quot;%-10d&quot;, &quot;1234567   &quot;, oneToSeven);
 609         test(&quot;%-10d&quot;, &quot;-1234567  &quot;, negate(oneToSeven));
 610         // , variations:
 611         test(&quot;% ,d&quot;, &quot; 1,234,567&quot;, oneToSeven);
 612         test(&quot;% ,d&quot;, &quot;-1,234,567&quot;, negate(oneToSeven));
 613         test(&quot;%+,10d&quot;, &quot;+1,234,567&quot;, oneToSeven);
 614         test(&quot;%0,10d&quot;, &quot;01,234,567&quot;, oneToSeven);
 615         test(&quot;%0,10d&quot;, &quot;-1,234,567&quot;, negate(oneToSeven));
 616         test(&quot;%(,10d&quot;, &quot;(1,234,567)&quot;, negate(oneToSeven));
 617         test(&quot;%-,10d&quot;, &quot;1,234,567 &quot;, oneToSeven);
 618         test(&quot;%-,10d&quot;, &quot;-1,234,567&quot;, negate(oneToSeven));
 619 
 620 #end[prim]
 621 #end[short]
 622 #end[byte]
 623         //---------------------------------------------------------------------
 624         // %d - errors
 625         //---------------------------------------------------------------------
 626         tryCatch(&quot;%#d&quot;, FormatFlagsConversionMismatchException.class);
 627         tryCatch(&quot;%D&quot;, UnknownFormatConversionException.class);
 628         tryCatch(&quot;%0d&quot;, MissingFormatWidthException.class);
 629         tryCatch(&quot;%-d&quot;, MissingFormatWidthException.class);
 630         tryCatch(&quot;%7.3d&quot;, IllegalFormatPrecisionException.class);
 631 
 632         //---------------------------------------------------------------------
 633         // %o
 634         //
 635         // Numeric conversion applicable to byte, short, int, long, and
 636         // BigInteger.
 637         //---------------------------------------------------------------------
 638         test(&quot;%o&quot;, &quot;null&quot;, (Object)null);
 639 
 640 #if[byte]
 641         //---------------------------------------------------------------------
 642         // %o - byte
 643         //---------------------------------------------------------------------
 644         test(&quot;%010o&quot;, &quot;0000000200&quot;, minByte);
 645         test(&quot;%-10o&quot;, &quot;200       &quot;, minByte);
 646         test(&quot;%#10o&quot;, &quot;      0200&quot;, minByte);
 647 #end[byte]
 648 #if[short]
 649         //---------------------------------------------------------------------
 650         // %o - short
 651         //---------------------------------------------------------------------
 652 
 653         test(&quot;%010o&quot;, &quot;0000177600&quot;, minByte);
 654         test(&quot;%-10o&quot;, &quot;177600    &quot;, minByte);
 655         test(&quot;%#10o&quot;, &quot;   0177600&quot;, minByte);
 656 #end[short]
 657 #if[int]
 658         //---------------------------------------------------------------------
 659         // %o - int
 660         //---------------------------------------------------------------------
 661         test(&quot;%014o&quot;, &quot;00037777777600&quot;, minByte);
 662         test(&quot;%-14o&quot;, &quot;37777777600   &quot;, minByte);
 663         test(&quot;%#14o&quot;, &quot;  037777777600&quot;, minByte);
 664 
 665         $type$ oneToSevenOct = ($type$) 1234567;
 666         test(&quot;%o&quot;, &quot;4553207&quot;, oneToSevenOct);
 667         test(&quot;%010o&quot;, &quot;0004553207&quot;, oneToSevenOct);
 668         test(&quot;%-10o&quot;, &quot;4553207   &quot;, oneToSevenOct);
 669         test(&quot;%#10o&quot;, &quot;  04553207&quot;, oneToSevenOct);
 670 #end[int]
 671 #if[long]
 672         //---------------------------------------------------------------------
 673         // %o - long
 674         //---------------------------------------------------------------------
 675         test(&quot;%024o&quot;, &quot;001777777777777777777600&quot;, minByte);
 676         test(&quot;%-24o&quot;, &quot;1777777777777777777600  &quot;, minByte);
 677         test(&quot;%#24o&quot;, &quot; 01777777777777777777600&quot;, minByte);
 678 
 679         $type$ oneToSevenOct = ($type$) 1234567;
 680         test(&quot;%o&quot;, &quot;4553207&quot;, oneToSevenOct);
 681         test(&quot;%010o&quot;, &quot;0004553207&quot;, oneToSevenOct);
 682         test(&quot;%-10o&quot;, &quot;4553207   &quot;, oneToSevenOct);
 683         test(&quot;%#10o&quot;, &quot;  04553207&quot;, oneToSevenOct);
 684 #end[long]
 685 
 686         //---------------------------------------------------------------------
 687         // %o - errors
 688         //---------------------------------------------------------------------
 689         tryCatch(&quot;%(o&quot;, FormatFlagsConversionMismatchException.class,
 690                  minByte);
 691         tryCatch(&quot;%+o&quot;, FormatFlagsConversionMismatchException.class,
 692                  minByte);
 693         tryCatch(&quot;% o&quot;, FormatFlagsConversionMismatchException.class,
 694                  minByte);
 695         tryCatch(&quot;%0o&quot;, MissingFormatWidthException.class);
 696         tryCatch(&quot;%-o&quot;, MissingFormatWidthException.class);
 697         tryCatch(&quot;%,o&quot;, FormatFlagsConversionMismatchException.class);
 698         tryCatch(&quot;%O&quot;, UnknownFormatConversionException.class);
 699 
 700         //---------------------------------------------------------------------
 701         // %x
 702         //
 703         // Numeric conversion applicable to byte, short, int, long, and
 704         // BigInteger.
 705         //---------------------------------------------------------------------
 706         test(&quot;%x&quot;, &quot;null&quot;, (Object)null);
 707 
 708 #if[byte]
 709         //---------------------------------------------------------------------
 710         // %x - byte
 711         //---------------------------------------------------------------------
 712         test(&quot;%010x&quot;, &quot;0000000080&quot;, minByte);
 713         test(&quot;%-10x&quot;, &quot;80        &quot;, minByte);
 714         test(&quot;%#10x&quot;, &quot;      0x80&quot;, minByte);
 715         test(&quot;%0#10x&quot;,&quot;0x00000080&quot;, minByte);
 716         test(&quot;%#10X&quot;, &quot;      0X80&quot;, minByte);
 717         test(&quot;%X&quot;, &quot;80&quot;, minByte);
 718 #end[byte]
 719 #if[short]
 720         //---------------------------------------------------------------------
 721         // %x - short
 722         //---------------------------------------------------------------------
 723         test(&quot;%010x&quot;, &quot;000000ff80&quot;, minByte);
 724         test(&quot;%-10x&quot;, &quot;ff80      &quot;, minByte);
 725         test(&quot;%#10x&quot;, &quot;    0xff80&quot;, minByte);
 726         test(&quot;%0#10x&quot;,&quot;0x0000ff80&quot;, minByte);
 727         test(&quot;%#10X&quot;, &quot;    0XFF80&quot;, minByte);
 728         test(&quot;%X&quot;, &quot;FF80&quot;, minByte);
 729 #end[short]
 730 #if[int]
 731         //---------------------------------------------------------------------
 732         // %x - int
 733         //---------------------------------------------------------------------
 734         $type$ oneToSevenHex = ($type$)1234567;
 735         test(&quot;%x&quot;, &quot;null&quot;, (Object)null);
 736         test(&quot;%x&quot;, &quot;12d687&quot;, oneToSevenHex);
 737         test(&quot;%010x&quot;, &quot;000012d687&quot;, oneToSevenHex);
 738         test(&quot;%-10x&quot;, &quot;12d687    &quot;, oneToSevenHex);
 739         test(&quot;%#10x&quot;, &quot;  0x12d687&quot;, oneToSevenHex);
 740         test(&quot;%#10X&quot;, &quot;  0X12D687&quot;,oneToSevenHex);
 741         test(&quot;%X&quot;, &quot;12D687&quot;, oneToSevenHex);
 742 
 743         test(&quot;%010x&quot;, &quot;00ffffff80&quot;, minByte);
 744         test(&quot;%-10x&quot;, &quot;ffffff80  &quot;, minByte);
 745         test(&quot;%#10x&quot;, &quot;0xffffff80&quot;, minByte);
 746         test(&quot;%0#12x&quot;,&quot;0x00ffffff80&quot;, minByte);
 747         test(&quot;%#12X&quot;, &quot;  0XFFFFFF80&quot;, minByte);
 748         test(&quot;%X&quot;, &quot;FFFFFF80&quot;, minByte);
 749 #end[int]
 750 #if[long]
 751         //---------------------------------------------------------------------
 752         // %x - long
 753         //---------------------------------------------------------------------
 754         $type$ oneToSevenHex = ($type$)1234567;
 755         test(&quot;%x&quot;, &quot;null&quot;, (Object)null);
 756         test(&quot;%x&quot;, &quot;12d687&quot;, oneToSevenHex);
 757         test(&quot;%010x&quot;, &quot;000012d687&quot;, oneToSevenHex);
 758         test(&quot;%-10x&quot;, &quot;12d687    &quot;, oneToSevenHex);
 759         test(&quot;%#10x&quot;, &quot;  0x12d687&quot;, oneToSevenHex);
 760         test(&quot;%#10X&quot;, &quot;  0X12D687&quot;,oneToSevenHex);
 761         test(&quot;%X&quot;, &quot;12D687&quot;, oneToSevenHex);
 762 
 763         test(&quot;%018x&quot;,    &quot;00ffffffffffffff80&quot;, minByte);
 764         test(&quot;%-18x&quot;,      &quot;ffffffffffffff80  &quot;, minByte);
 765         test(&quot;%#20x&quot;,  &quot;  0xffffffffffffff80&quot;, minByte);
 766         test(&quot;%0#20x&quot;, &quot;0x00ffffffffffffff80&quot;, minByte);
 767         test(&quot;%#20X&quot;, &quot;  0XFFFFFFFFFFFFFF80&quot;, minByte);
 768         test(&quot;%X&quot;,        &quot;FFFFFFFFFFFFFF80&quot;, minByte);
 769 #end[long]
 770         //---------------------------------------------------------------------
 771         // %x - errors
 772         //---------------------------------------------------------------------
 773         tryCatch(&quot;%,x&quot;, FormatFlagsConversionMismatchException.class);
 774         tryCatch(&quot;%0x&quot;, MissingFormatWidthException.class);
 775         tryCatch(&quot;%-x&quot;, MissingFormatWidthException.class);
 776 
 777 #end[dec]
 778 
 779 #if[BigInteger]
 780         //---------------------------------------------------------------------
 781         // BigInteger - errors
 782         //---------------------------------------------------------------------
 783         tryCatch(&quot;%f&quot;, IllegalFormatConversionException.class,
 784                  new BigInteger(&quot;1&quot;));
 785 
 786         //---------------------------------------------------------------------
 787         // %d - BigInteger
 788         //---------------------------------------------------------------------
 789         test(&quot;%d&quot;, &quot;null&quot;, (Object)null);
 790         test(&quot;%d&quot;, &quot;1234567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 791         test(&quot;%,d&quot;, &quot;1,234,567&quot;, new BigInteger(&quot;1234567&quot;, 10));
<a name="3" id="anc3"></a><span class="line-modified"> 792         test(Locale.FRANCE, &quot;%,d&quot;, &quot;1\u00a0234\u00a0567&quot;, new BigInteger(&quot;1234567&quot;, 10));</span>
 793         test(&quot;%,d&quot;, &quot;-1,234,567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 794         test(&quot;%(d&quot;, &quot;1234567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 795         test(&quot;%(d&quot;, &quot;(1234567)&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 796         test(&quot;% d&quot;, &quot; 1234567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 797         test(&quot;% d&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 798         test(&quot;%+d&quot;, &quot;+1234567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 799         test(&quot;%+d&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 800         test(&quot;%010d&quot;, &quot;0001234567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 801         test(&quot;%010d&quot;, &quot;-001234567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 802         test(&quot;%(10d&quot;, &quot; (1234567)&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 803         test(&quot;%+d&quot;, &quot;+1234567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 804         test(&quot;%+d&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 805         test(&quot;%-10d&quot;, &quot;1234567   &quot;, new BigInteger(&quot;1234567&quot;, 10));
 806         test(&quot;%-10d&quot;, &quot;-1234567  &quot;, new BigInteger(&quot;-1234567&quot;, 10));
 807         // , variations:
 808         test(&quot;%0,10d&quot;, &quot;01,234,567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 809         test(&quot;%0,10d&quot;, &quot;-1,234,567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 810         test(&quot;%(,10d&quot;, &quot;(1,234,567)&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 811         test(&quot;%+,d&quot;, &quot;+1,234,567&quot;, new BigInteger(&quot;1234567&quot;, 10));
 812         test(&quot;%+,d&quot;, &quot;-1,234,567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 813         test(&quot;%-,10d&quot;, &quot;1,234,567 &quot;, new BigInteger(&quot;1234567&quot;, 10));
 814         test(&quot;%-,10d&quot;, &quot;-1,234,567&quot;, new BigInteger(&quot;-1234567&quot;, 10));
 815 
 816         //---------------------------------------------------------------------
 817         // %o - BigInteger
 818         //---------------------------------------------------------------------
 819         test(&quot;%o&quot;, &quot;null&quot;, (Object)null);
 820         test(&quot;%o&quot;, &quot;1234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 821         test(&quot;%(o&quot;, &quot;1234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 822         test(&quot;%(o&quot;, &quot;(1234567)&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 823         test(&quot;% o&quot;, &quot; 1234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 824         test(&quot;% o&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 825         test(&quot;%+o&quot;, &quot;+1234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 826         test(&quot;%+o&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 827         test(&quot;%010o&quot;, &quot;0001234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 828         test(&quot;%010o&quot;, &quot;-001234567&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 829         test(&quot;%(10o&quot;, &quot; (1234567)&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 830         test(&quot;%+o&quot;, &quot;+1234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 831         test(&quot;%+o&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 832         test(&quot;%-10o&quot;, &quot;1234567   &quot;, new BigInteger(&quot;1234567&quot;, 8));
 833         test(&quot;%-10o&quot;, &quot;-1234567  &quot;, new BigInteger(&quot;-1234567&quot;, 8));
 834         test(&quot;%#10o&quot;, &quot;  01234567&quot;, new BigInteger(&quot;1234567&quot;, 8));
 835         test(&quot;%#10o&quot;, &quot; -01234567&quot;, new BigInteger(&quot;-1234567&quot;, 8));
 836 
 837         //---------------------------------------------------------------------
 838         // %x - BigInteger
 839         //---------------------------------------------------------------------
 840         test(&quot;%x&quot;, &quot;null&quot;, (Object)null);
 841         test(&quot;%x&quot;, &quot;1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 842         test(&quot;%(x&quot;, &quot;1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 843         test(&quot;%(x&quot;, &quot;(1234567)&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 844         test(&quot;% x&quot;, &quot; 1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 845         test(&quot;% x&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 846         test(&quot;%+x&quot;, &quot;+1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 847         test(&quot;%+x&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 848         test(&quot;%010x&quot;, &quot;0001234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 849         test(&quot;%010x&quot;, &quot;-001234567&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 850         test(&quot;%(10x&quot;, &quot; (1234567)&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 851         test(&quot;%+x&quot;, &quot;+1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 852         test(&quot;%+x&quot;, &quot;-1234567&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 853         test(&quot;%-10x&quot;, &quot;1234567   &quot;, new BigInteger(&quot;1234567&quot;, 16));
 854         test(&quot;%-10x&quot;, &quot;-1234567  &quot;, new BigInteger(&quot;-1234567&quot;, 16));
 855         test(&quot;%#10x&quot;, &quot; 0x1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 856         test(&quot;%#10x&quot;, &quot;-0x1234567&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 857         test(&quot;%#10X&quot;, &quot; 0X1234567&quot;, new BigInteger(&quot;1234567&quot;, 16));
 858         test(&quot;%#10X&quot;, &quot;-0X1234567&quot;, new BigInteger(&quot;-1234567&quot;, 16));
 859         test(&quot;%X&quot;, &quot;1234567A&quot;, new BigInteger(&quot;1234567a&quot;, 16));
 860         test(&quot;%X&quot;, &quot;-1234567A&quot;, new BigInteger(&quot;-1234567a&quot;, 16));
 861 #end[BigInteger]
 862 
 863 #if[fp]
 864 #if[BigDecimal]
 865         //---------------------------------------------------------------------
 866         // %s - BigDecimal
 867         //---------------------------------------------------------------------
 868         $type$ one = BigDecimal.ONE;
 869         $type$ ten = BigDecimal.TEN;
 870         $type$ pi  = new $type$(Math.PI);
 871         $type$ piToThe300 = pi.pow(300);
 872 
 873         test(&quot;%s&quot;, &quot;3.141592653589793115997963468544185161590576171875&quot;, pi);
 874 #end[BigDecimal]
 875 #if[float]
 876         //---------------------------------------------------------------------
 877         // %s - float
 878         //---------------------------------------------------------------------
 879         $type$ one = 1.0f;
 880         $type$ ten = 10.0f;
 881         $type$ pi  = (float) Math.PI;
 882 
 883         test(&quot;%s&quot;, &quot;3.1415927&quot;, pi);
 884 #end[float]
 885 #if[Float]
 886         //---------------------------------------------------------------------
 887         // %s - Float
 888         //---------------------------------------------------------------------
 889         $type$ one = new $type$(1.0f);
 890         $type$ ten = new $type$(10.0f);
 891         $type$ pi  = new $type$(Math.PI);
 892 
 893         test(&quot;%s&quot;, &quot;3.1415927&quot;, pi);
 894 #end[Float]
 895 #if[double]
 896         //---------------------------------------------------------------------
 897         // %s - double
 898         //---------------------------------------------------------------------
 899         $type$ one = 1.0;
 900         $type$ ten = 10.0;
 901         $type$ pi  = Math.PI;
 902 
 903         test(&quot;%s&quot;, &quot;3.141592653589793&quot;, pi);
 904 #end[double]
 905 #if[Double]
 906         //---------------------------------------------------------------------
 907         // %s - Double
 908         //---------------------------------------------------------------------
 909         $type$ one = new $type$(1.0);
 910         $type$ ten = new $type$(10.0);
 911         $type$ pi  = new $type$(Math.PI);
 912 
 913         test(&quot;%s&quot;, &quot;3.141592653589793&quot;, pi);
 914 #end[Double]
 915 
 916         //---------------------------------------------------------------------
 917         // flag/conversion errors
 918         //---------------------------------------------------------------------
 919         tryCatch(&quot;%d&quot;, IllegalFormatConversionException.class, one);
 920         tryCatch(&quot;%,.4e&quot;, FormatFlagsConversionMismatchException.class, one);
 921 
 922         //---------------------------------------------------------------------
 923         // %e
 924         //
 925         // Floating-point conversions applicable to float, double, and
 926         // BigDecimal.
 927         //---------------------------------------------------------------------
 928         test(&quot;%e&quot;, &quot;null&quot;, (Object)null);
 929 
 930         //---------------------------------------------------------------------
 931         // %e - float and double
 932         //---------------------------------------------------------------------
 933         // double PI = 3.141 592 653 589 793 238 46;
 934         test(&quot;%e&quot;, &quot;3.141593e+00&quot;, pi);
 935         test(&quot;%.0e&quot;, &quot;1e+01&quot;, ten);
 936         test(&quot;%#.0e&quot;, &quot;1.e+01&quot;, ten);
 937         test(&quot;%E&quot;, &quot;3.141593E+00&quot;, pi);
 938         test(&quot;%10.3e&quot;, &quot; 3.142e+00&quot;, pi);
 939         test(&quot;%10.3e&quot;, &quot;-3.142e+00&quot;, negate(pi));
 940         test(&quot;%010.3e&quot;, &quot;03.142e+00&quot;, pi);
 941         test(&quot;%010.3e&quot;, &quot;-3.142e+00&quot;, negate(pi));
 942         test(&quot;%-12.3e&quot;, &quot;3.142e+00   &quot;, pi);
 943         test(&quot;%-12.3e&quot;, &quot;-3.142e+00  &quot;, negate(pi));
 944         test(&quot;%.3e&quot;, &quot;3.142e+00&quot;, pi);
 945         test(&quot;%.3e&quot;, &quot;-3.142e+00&quot;, negate(pi));
 946         test(&quot;%.3e&quot;, &quot;3.142e+06&quot;, mult(pi, 1000000.0));
 947         test(&quot;%.3e&quot;, &quot;-3.142e+06&quot;, mult(pi, -1000000.0));
 948 
 949         test(Locale.FRANCE, &quot;%e&quot;, &quot;3,141593e+00&quot;, pi);
 950 
 951         // double PI^300
 952         //    = 13962455701329742638131355433930076081862072808 ... e+149
 953 #if[BigDecimal]
 954         //---------------------------------------------------------------------
 955         // %e - BigDecimal
 956         //---------------------------------------------------------------------
 957         test(&quot;%.3e&quot;, &quot;1.396e+149&quot;, piToThe300);
 958         test(&quot;%.3e&quot;, &quot;-1.396e+149&quot;, piToThe300.negate());
 959         test(&quot;%.3e&quot;, &quot;1.000e-100&quot;, recip(ten.pow(100)));
 960         test(&quot;%.3e&quot;, &quot;-1.000e-100&quot;, negate(recip(ten.pow(100))));
 961 
 962         test(&quot;%3.0e&quot;, &quot;1e-06&quot;, new BigDecimal(&quot;0.000001&quot;));
 963         test(&quot;%3.0e&quot;, &quot;1e-05&quot;, new BigDecimal(&quot;0.00001&quot;));
 964         test(&quot;%3.0e&quot;, &quot;1e-04&quot;, new BigDecimal(&quot;0.0001&quot;));
 965         test(&quot;%3.0e&quot;, &quot;1e-03&quot;, new BigDecimal(&quot;0.001&quot;));
 966         test(&quot;%3.0e&quot;, &quot;1e-02&quot;, new BigDecimal(&quot;0.01&quot;));
 967         test(&quot;%3.0e&quot;, &quot;1e-01&quot;, new BigDecimal(&quot;0.1&quot;));
 968         test(&quot;%3.0e&quot;, &quot;9e-01&quot;, new BigDecimal(&quot;0.9&quot;));
 969         test(&quot;%3.1e&quot;, &quot;9.0e-01&quot;, new BigDecimal(&quot;0.9&quot;));
 970         test(&quot;%3.0e&quot;, &quot;1e+00&quot;, new BigDecimal(&quot;1.00&quot;));
 971         test(&quot;%3.0e&quot;, &quot;1e+01&quot;, new BigDecimal(&quot;10.00&quot;));
 972         test(&quot;%3.0e&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;99.19&quot;));
 973         test(&quot;%3.1e&quot;, &quot;9.9e+01&quot;, new BigDecimal(&quot;99.19&quot;));
 974         test(&quot;%3.0e&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;99.99&quot;));
 975         test(&quot;%3.0e&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;100.00&quot;));
 976         test(&quot;%#3.0e&quot;, &quot;1.e+03&quot;,    new BigDecimal(&quot;1000.00&quot;));
 977         test(&quot;%3.0e&quot;, &quot;1e+04&quot;,     new BigDecimal(&quot;10000.00&quot;));
 978         test(&quot;%3.0e&quot;, &quot;1e+05&quot;,    new BigDecimal(&quot;100000.00&quot;));
 979         test(&quot;%3.0e&quot;, &quot;1e+06&quot;,   new BigDecimal(&quot;1000000.00&quot;));
 980         test(&quot;%3.0e&quot;, &quot;1e+07&quot;,  new BigDecimal(&quot;10000000.00&quot;));
 981         test(&quot;%3.0e&quot;, &quot;1e+08&quot;, new BigDecimal(&quot;100000000.00&quot;));
 982 #end[BigDecimal]
 983 
 984         test(&quot;%10.3e&quot;, &quot; 1.000e+00&quot;, one);
 985         test(&quot;%+.3e&quot;, &quot;+3.142e+00&quot;, pi);
 986         test(&quot;%+.3e&quot;, &quot;-3.142e+00&quot;, negate(pi));
 987         test(&quot;% .3e&quot;, &quot; 3.142e+00&quot;, pi);
 988         test(&quot;% .3e&quot;, &quot;-3.142e+00&quot;, negate(pi));
 989         test(&quot;%#.0e&quot;, &quot;3.e+00&quot;, create(3.0));
 990         test(&quot;%#.0e&quot;, &quot;-3.e+00&quot;, create(-3.0));
 991         test(&quot;%.0e&quot;, &quot;3e+00&quot;, create(3.0));
 992         test(&quot;%.0e&quot;, &quot;-3e+00&quot;, create(-3.0));
 993 
 994         test(&quot;%(.4e&quot;, &quot;3.1416e+06&quot;, mult(pi, 1000000.0));
 995         test(&quot;%(.4e&quot;, &quot;(3.1416e+06)&quot;, mult(pi, -1000000.0));
 996 
 997         //---------------------------------------------------------------------
 998         // %e - boundary problems
 999         //---------------------------------------------------------------------
1000         test(&quot;%3.0e&quot;, &quot;1e-06&quot;, 0.000001);
1001         test(&quot;%3.0e&quot;, &quot;1e-05&quot;, 0.00001);
1002         test(&quot;%3.0e&quot;, &quot;1e-04&quot;, 0.0001);
1003         test(&quot;%3.0e&quot;, &quot;1e-03&quot;, 0.001);
1004         test(&quot;%3.0e&quot;, &quot;1e-02&quot;, 0.01);
1005         test(&quot;%3.0e&quot;, &quot;1e-01&quot;, 0.1);
1006         test(&quot;%3.0e&quot;, &quot;9e-01&quot;, 0.9);
1007         test(&quot;%3.1e&quot;, &quot;9.0e-01&quot;, 0.9);
1008         test(&quot;%3.0e&quot;, &quot;1e+00&quot;, 1.00);
1009         test(&quot;%3.0e&quot;, &quot;1e+01&quot;, 10.00);
1010         test(&quot;%3.0e&quot;, &quot;1e+02&quot;, 99.19);
1011         test(&quot;%3.1e&quot;, &quot;9.9e+01&quot;, 99.19);
1012         test(&quot;%3.0e&quot;, &quot;1e+02&quot;, 99.99);
1013         test(&quot;%3.0e&quot;, &quot;1e+02&quot;, 100.00);
1014         test(&quot;%#3.0e&quot;, &quot;1.e+03&quot;,     1000.00);
1015         test(&quot;%3.0e&quot;, &quot;1e+04&quot;,     10000.00);
1016         test(&quot;%3.0e&quot;, &quot;1e+05&quot;,    100000.00);
1017         test(&quot;%3.0e&quot;, &quot;1e+06&quot;,   1000000.00);
1018         test(&quot;%3.0e&quot;, &quot;1e+07&quot;,  10000000.00);
1019         test(&quot;%3.0e&quot;, &quot;1e+08&quot;, 100000000.00);
1020 
1021         //---------------------------------------------------------------------
1022         // %f
1023         //
1024         // Floating-point conversions applicable to float, double, and
1025         // BigDecimal.
1026         //---------------------------------------------------------------------
1027         test(&quot;%f&quot;, &quot;null&quot;, (Object)null);
1028         test(&quot;%f&quot;, &quot;3.141593&quot;, pi);
1029         test(Locale.FRANCE, &quot;%f&quot;, &quot;3,141593&quot;, pi);
1030         test(&quot;%10.3f&quot;, &quot;     3.142&quot;, pi);
1031         test(&quot;%10.3f&quot;, &quot;    -3.142&quot;, negate(pi));
1032         test(&quot;%010.3f&quot;, &quot;000003.142&quot;, pi);
1033         test(&quot;%010.3f&quot;, &quot;-00003.142&quot;, negate(pi));
1034         test(&quot;%-10.3f&quot;, &quot;3.142     &quot;, pi);
1035         test(&quot;%-10.3f&quot;, &quot;-3.142    &quot;, negate(pi));
1036         test(&quot;%.3f&quot;, &quot;3.142&quot;, pi);
1037         test(&quot;%.3f&quot;, &quot;-3.142&quot;, negate(pi));
1038         test(&quot;%+.3f&quot;, &quot;+3.142&quot;, pi);
1039         test(&quot;%+.3f&quot;, &quot;-3.142&quot;, negate(pi));
1040         test(&quot;% .3f&quot;, &quot; 3.142&quot;, pi);
1041         test(&quot;% .3f&quot;, &quot;-3.142&quot;, negate(pi));
1042         test(&quot;%#.0f&quot;, &quot;3.&quot;, create(3.0));
1043         test(&quot;%#.0f&quot;, &quot;-3.&quot;, create(-3.0));
1044         test(&quot;%.0f&quot;, &quot;3&quot;, create(3.0));
1045         test(&quot;%.0f&quot;, &quot;-3&quot;, create(-3.0));
1046         test(&quot;%.3f&quot;, &quot;10.000&quot;, ten);
1047         test(&quot;%.3f&quot;, &quot;1.000&quot;, one);
1048         test(&quot;%10.3f&quot;, &quot;     1.000&quot;, one);
1049 
1050         //---------------------------------------------------------------------
1051         // %f - boundary problems
1052         //---------------------------------------------------------------------
1053         test(&quot;%3.0f&quot;, &quot;  0&quot;, 0.000001);
1054         test(&quot;%3.0f&quot;, &quot;  0&quot;, 0.00001);
1055         test(&quot;%3.0f&quot;, &quot;  0&quot;, 0.0001);
1056         test(&quot;%3.0f&quot;, &quot;  0&quot;, 0.001);
1057         test(&quot;%3.0f&quot;, &quot;  0&quot;, 0.01);
1058         test(&quot;%3.0f&quot;, &quot;  0&quot;, 0.1);
1059         test(&quot;%3.0f&quot;, &quot;  1&quot;, 0.9);
1060         test(&quot;%3.1f&quot;, &quot;0.9&quot;, 0.9);
1061         test(&quot;%3.0f&quot;, &quot;  1&quot;, 1.00);
1062         test(&quot;%3.0f&quot;, &quot; 10&quot;, 10.00);
1063         test(&quot;%3.0f&quot;, &quot; 99&quot;, 99.19);
1064         test(&quot;%3.1f&quot;, &quot;99.2&quot;, 99.19);
1065         test(&quot;%3.0f&quot;, &quot;100&quot;, 99.99);
1066         test(&quot;%3.0f&quot;, &quot;100&quot;, 100.00);
1067         test(&quot;%#3.0f&quot;, &quot;1000.&quot;,     1000.00);
1068         test(&quot;%3.0f&quot;, &quot;10000&quot;,     10000.00);
1069         test(&quot;%3.0f&quot;, &quot;100000&quot;,    100000.00);
1070         test(&quot;%3.0f&quot;, &quot;1000000&quot;,   1000000.00);
1071         test(&quot;%3.0f&quot;, &quot;10000000&quot;,  10000000.00);
1072         test(&quot;%3.0f&quot;, &quot;100000000&quot;, 100000000.00);
1073         test(&quot;%10.0f&quot;, &quot;   1000000&quot;,   1000000.00);
1074         test(&quot;%,10.0f&quot;, &quot; 1,000,000&quot;,   1000000.00);
1075         test(&quot;%,10.1f&quot;, &quot;1,000,000.0&quot;,   1000000.00);
1076         test(&quot;%,3.0f&quot;, &quot;1,000,000&quot;,   1000000.00);
1077         test(&quot;%,3.0f&quot;, &quot;10,000,000&quot;,  10000000.00);
1078         test(&quot;%,3.0f&quot;, &quot;100,000,000&quot;, 100000000.00);
1079         test(&quot;%,3.0f&quot;, &quot;10,000,000&quot;,  10000000.00);
1080         test(&quot;%,3.0f&quot;, &quot;100,000,000&quot;, 100000000.00);
1081 #if[BigDecimal]
1082         //---------------------------------------------------------------------
1083         // %f - BigDecimal
1084         //---------------------------------------------------------------------
1085         test(&quot;%4.0f&quot;, &quot;  99&quot;, new BigDecimal(&quot;99.19&quot;));
1086         test(&quot;%4.1f&quot;, &quot;99.2&quot;, new BigDecimal(&quot;99.19&quot;));
1087 
1088         BigDecimal val = new BigDecimal(&quot;99.95&quot;);
1089         test(&quot;%4.0f&quot;, &quot; 100&quot;, val);
1090         test(&quot;%#4.0f&quot;, &quot;100.&quot;, val);
1091         test(&quot;%4.1f&quot;, &quot;100.0&quot;, val);
1092         test(&quot;%4.2f&quot;, &quot;99.95&quot;, val);
1093         test(&quot;%4.3f&quot;, &quot;99.950&quot;, val);
1094 
1095         val = new BigDecimal(&quot;.99&quot;);
1096         test(&quot;%4.1f&quot;, &quot; 1.0&quot;, val);
1097         test(&quot;%4.2f&quot;, &quot;0.99&quot;, val);
1098         test(&quot;%4.3f&quot;, &quot;0.990&quot;, val);
1099 
1100         // #6476425
1101         val = new BigDecimal(&quot;0.00001&quot;);
1102         test(&quot;%.0f&quot;, &quot;0&quot;, val);
1103         test(&quot;%.1f&quot;, &quot;0.0&quot;, val);
1104         test(&quot;%.2f&quot;, &quot;0.00&quot;, val);
1105         test(&quot;%.3f&quot;, &quot;0.000&quot;, val);
1106         test(&quot;%.4f&quot;, &quot;0.0000&quot;, val);
1107         test(&quot;%.5f&quot;, &quot;0.00001&quot;, val);
1108 
1109         val = new BigDecimal(&quot;1.00001&quot;);
1110         test(&quot;%.0f&quot;, &quot;1&quot;, val);
1111         test(&quot;%.1f&quot;, &quot;1.0&quot;, val);
1112         test(&quot;%.2f&quot;, &quot;1.00&quot;, val);
1113         test(&quot;%.3f&quot;, &quot;1.000&quot;, val);
1114         test(&quot;%.4f&quot;, &quot;1.0000&quot;, val);
1115         test(&quot;%.5f&quot;, &quot;1.00001&quot;, val);
1116 
1117         val = new BigDecimal(&quot;1.23456&quot;);
1118         test(&quot;%.0f&quot;, &quot;1&quot;, val);
1119         test(&quot;%.1f&quot;, &quot;1.2&quot;, val);
1120         test(&quot;%.2f&quot;, &quot;1.23&quot;, val);
1121         test(&quot;%.3f&quot;, &quot;1.235&quot;, val);
1122         test(&quot;%.4f&quot;, &quot;1.2346&quot;, val);
1123         test(&quot;%.5f&quot;, &quot;1.23456&quot;, val);
1124         test(&quot;%.6f&quot;, &quot;1.234560&quot;, val);
1125 
1126         val = new BigDecimal(&quot;9.99999&quot;);
1127         test(&quot;%.0f&quot;, &quot;10&quot;, val);
1128         test(&quot;%.1f&quot;, &quot;10.0&quot;, val);
1129         test(&quot;%.2f&quot;, &quot;10.00&quot;, val);
1130         test(&quot;%.3f&quot;, &quot;10.000&quot;, val);
1131         test(&quot;%.4f&quot;, &quot;10.0000&quot;, val);
1132         test(&quot;%.5f&quot;, &quot;9.99999&quot;, val);
1133         test(&quot;%.6f&quot;, &quot;9.999990&quot;, val);
1134 
1135 
1136         val = new BigDecimal(&quot;1.99999&quot;);
1137         test(&quot;%.0f&quot;, &quot;2&quot;, val);
1138         test(&quot;%.1f&quot;, &quot;2.0&quot;, val);
1139         test(&quot;%.2f&quot;, &quot;2.00&quot;, val);
1140         test(&quot;%.3f&quot;, &quot;2.000&quot;, val);
1141         test(&quot;%.4f&quot;, &quot;2.0000&quot;, val);
1142         test(&quot;%.5f&quot;, &quot;1.99999&quot;, val);
1143         test(&quot;%.6f&quot;, &quot;1.999990&quot;, val);
1144 
1145         val = new BigDecimal(0.9996);
1146         test(&quot;%.0f&quot;, &quot;1&quot;, val);
1147         test(&quot;%.1f&quot;, &quot;1.0&quot;, val);
1148         test(&quot;%.2f&quot;, &quot;1.00&quot;, val);
1149         test(&quot;%.3f&quot;, &quot;1.000&quot;, val);
1150         test(&quot;%.4f&quot;, &quot;0.9996&quot;, val);
1151         test(&quot;%.5f&quot;, &quot;0.99960&quot;, val);
1152         test(&quot;%.6f&quot;, &quot;0.999600&quot;, val);
1153 
1154         val = new BigDecimal(BigInteger.ZERO, 6);
1155         test(&quot;%.4f&quot;, &quot;0.0000&quot;, val);
1156         val = new BigDecimal(BigInteger.ZERO, -6);
1157         test(&quot;%.4f&quot;, &quot;0.0000&quot;, val);
1158 #end[BigDecimal]
1159 
1160 #if[float]
1161         //---------------------------------------------------------------------
1162         // %f - float
1163         //---------------------------------------------------------------------
1164         // Float can not accurately store 1e6 * PI.
1165         test(&quot;%.3f&quot;, &quot;3141.593&quot;, mult(pi, 1000.0));
1166         test(&quot;%.3f&quot;, &quot;-3141.593&quot;, mult(pi, -1000.0));
1167 
1168         test(&quot;%,.2f&quot;, &quot;3,141.59&quot;, mult(pi, 1000.0));
<a name="4" id="anc4"></a><span class="line-modified">1169         test(Locale.FRANCE, &quot;%,.2f&quot;, &quot;3\u00a0141,59&quot;, mult(pi, 1000.0));</span>
1170         test(&quot;%,.2f&quot;, &quot;-3,141.59&quot;, mult(pi, -1000.0));
1171         test(&quot;%(.2f&quot;, &quot;3141.59&quot;, mult(pi, 1000.0));
1172         test(&quot;%(.2f&quot;, &quot;(3141.59)&quot;, mult(pi, -1000.0));
1173         test(&quot;%(,.2f&quot;, &quot;3,141.59&quot;, mult(pi, 1000.0));
1174         test(&quot;%(,.2f&quot;, &quot;(3,141.59)&quot;, mult(pi, -1000.0));
1175 
1176 #else[float]
1177 #if[!Float]
1178         //---------------------------------------------------------------------
1179         // %f - float, double, Double, BigDecimal
1180         //---------------------------------------------------------------------
1181         test(&quot;%.3f&quot;, &quot;3141592.654&quot;, mult(pi, 1000000.0));
1182         test(&quot;%.3f&quot;, &quot;-3141592.654&quot;, mult(pi, -1000000.0));
1183         test(&quot;%,.4f&quot;, &quot;3,141,592.6536&quot;, mult(pi, 1000000.0));
<a name="5" id="anc5"></a><span class="line-modified">1184         test(Locale.FRANCE, &quot;%,.4f&quot;, &quot;3\u00a0141\u00a0592,6536&quot;, mult(pi, 1000000.0));</span>
1185         test(&quot;%,.4f&quot;, &quot;-3,141,592.6536&quot;, mult(pi, -1000000.0));
1186         test(&quot;%(.4f&quot;, &quot;3141592.6536&quot;, mult(pi, 1000000.0));
1187         test(&quot;%(.4f&quot;, &quot;(3141592.6536)&quot;, mult(pi, -1000000.0));
1188         test(&quot;%(,.4f&quot;, &quot;3,141,592.6536&quot;, mult(pi, 1000000.0));
1189         test(&quot;%(,.4f&quot;, &quot;(3,141,592.6536)&quot;, mult(pi, -1000000.0));
1190 #end[!Float]
1191 #end[float]
1192 
1193 
1194         //---------------------------------------------------------------------
1195         // %g
1196         //
1197         // Floating-point conversions applicable to float, double, and
1198         // BigDecimal.
1199         //---------------------------------------------------------------------
1200         test(&quot;%g&quot;, &quot;null&quot;, (Object)null);
1201         test(&quot;%g&quot;, &quot;3.14159&quot;, pi);
1202         test(Locale.FRANCE, &quot;%g&quot;, &quot;3,14159&quot;, pi);
1203         test(&quot;%.0g&quot;, &quot;1e+01&quot;, ten);
1204         test(&quot;%G&quot;, &quot;3.14159&quot;, pi);
1205         test(&quot;%10.3g&quot;, &quot;      3.14&quot;, pi);
1206         test(&quot;%10.3g&quot;, &quot;     -3.14&quot;, negate(pi));
1207         test(&quot;%010.3g&quot;, &quot;0000003.14&quot;, pi);
1208         test(&quot;%010.3g&quot;, &quot;-000003.14&quot;, negate(pi));
1209         test(&quot;%-12.3g&quot;, &quot;3.14        &quot;, pi);
1210         test(&quot;%-12.3g&quot;, &quot;-3.14       &quot;, negate(pi));
1211         test(&quot;%.3g&quot;, &quot;3.14&quot;, pi);
1212         test(&quot;%.3g&quot;, &quot;-3.14&quot;, negate(pi));
1213         test(&quot;%.3g&quot;, &quot;3.14e+08&quot;, mult(pi, 100000000.0));
1214         test(&quot;%.3g&quot;, &quot;-3.14e+08&quot;, mult(pi, -100000000.0));
1215 
1216         test(&quot;%.3g&quot;, &quot;1.00e-05&quot;, recip(create(100000.0)));
1217         test(&quot;%.3g&quot;, &quot;-1.00e-05&quot;, recip(create(-100000.0)));
1218         test(&quot;%.0g&quot;, &quot;-1e-05&quot;, recip(create(-100000.0)));
1219         test(&quot;%.0g&quot;, &quot;1e+05&quot;, create(100000.0));
1220         test(&quot;%.3G&quot;, &quot;1.00E-05&quot;, recip(create(100000.0)));
1221         test(&quot;%.3G&quot;, &quot;-1.00E-05&quot;, recip(create(-100000.0)));
1222 
1223         test(&quot;%.1g&quot;, &quot;-0&quot;, -0.0);
1224         test(&quot;%3.0g&quot;, &quot; -0&quot;, -0.0);
1225         test(&quot;%.1g&quot;, &quot;0&quot;, 0.0);
1226         test(&quot;%3.0g&quot;, &quot;  0&quot;, 0.0);
1227         test(&quot;%.1g&quot;, &quot;0&quot;, +0.0);
1228         test(&quot;%3.0g&quot;, &quot;  0&quot;, +0.0);
1229 
1230         test(&quot;%3.0g&quot;, &quot;1e-06&quot;, 0.000001);
1231         test(&quot;%3.0g&quot;, &quot;1e-05&quot;, 0.00001);
1232         test(&quot;%3.0g&quot;, &quot;1e-05&quot;, 0.0000099);
1233         test(&quot;%3.1g&quot;, &quot;1e-05&quot;, 0.0000099);
1234         test(&quot;%3.2g&quot;, &quot;9.9e-06&quot;, 0.0000099);
1235         test(&quot;%3.0g&quot;, &quot;0.0001&quot;, 0.0001);
1236         test(&quot;%3.0g&quot;, &quot;9e-05&quot;,  0.00009);
1237         test(&quot;%3.0g&quot;, &quot;0.0001&quot;, 0.000099);
1238         test(&quot;%3.1g&quot;, &quot;0.0001&quot;, 0.000099);
1239         test(&quot;%3.2g&quot;, &quot;9.9e-05&quot;, 0.000099);
1240         test(&quot;%3.0g&quot;, &quot;0.001&quot;, 0.001);
1241         test(&quot;%3.0g&quot;, &quot;0.001&quot;, 0.00099);
1242         test(&quot;%3.1g&quot;, &quot;0.001&quot;, 0.00099);
1243         test(&quot;%3.2g&quot;, &quot;0.00099&quot;, 0.00099);
1244         test(&quot;%3.3g&quot;, &quot;0.00100&quot;, 0.001);
1245         test(&quot;%3.4g&quot;, &quot;0.001000&quot;, 0.001);
1246         test(&quot;%3.0g&quot;, &quot;0.01&quot;, 0.01);
1247         test(&quot;%3.0g&quot;, &quot;0.1&quot;, 0.1);
1248         test(&quot;%3.0g&quot;, &quot;0.9&quot;, 0.9);
1249         test(&quot;%3.1g&quot;, &quot;0.9&quot;, 0.9);
1250         test(&quot;%3.0g&quot;, &quot;  1&quot;, 1.00);
1251         test(&quot;%3.2g&quot;, &quot; 10&quot;, 10.00);
1252         test(&quot;%3.0g&quot;, &quot;1e+01&quot;, 10.00);
1253         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, 99.19);
1254         test(&quot;%3.1g&quot;, &quot;1e+02&quot;, 99.19);
1255         test(&quot;%3.2g&quot;, &quot; 99&quot;, 99.19);
1256         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, 99.9);
1257         test(&quot;%3.1g&quot;, &quot;1e+02&quot;, 99.9);
1258         test(&quot;%3.2g&quot;, &quot;1.0e+02&quot;, 99.9);
1259         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, 99.99);
1260         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, 100.00);
1261         test(&quot;%3.0g&quot;, &quot;1e+03&quot;, 999.9);
1262         test(&quot;%3.1g&quot;, &quot;1e+03&quot;, 999.9);
1263         test(&quot;%3.2g&quot;, &quot;1.0e+03&quot;, 999.9);
1264         test(&quot;%3.3g&quot;, &quot;1.00e+03&quot;, 999.9);
1265         test(&quot;%3.4g&quot;, &quot;999.9&quot;, 999.9);
1266         test(&quot;%3.4g&quot;, &quot;1000&quot;, 999.99);
1267         test(&quot;%3.0g&quot;, &quot;1e+03&quot;, 1000.00);
1268         test(&quot;%3.0g&quot;, &quot;1e+04&quot;,     10000.00);
1269         test(&quot;%3.0g&quot;, &quot;1e+05&quot;,    100000.00);
1270         test(&quot;%3.0g&quot;, &quot;1e+06&quot;,   1000000.00);
1271         test(&quot;%3.0g&quot;, &quot;1e+07&quot;,  10000000.00);
1272         test(&quot;%3.9g&quot;, &quot;100000000&quot;,  100000000.00);
1273         test(&quot;%3.10g&quot;, &quot;100000000.0&quot;, 100000000.00);
1274 
1275         tryCatch(&quot;%#3.0g&quot;, FormatFlagsConversionMismatchException.class, 1000.00);
1276 
1277         // double PI^300
1278         //    = 13962455701329742638131355433930076081862072808 ... e+149
1279 #if[BigDecimal]
1280         //---------------------------------------------------------------------
1281         // %g - BigDecimal
1282         //---------------------------------------------------------------------
1283         test(&quot;%.3g&quot;, &quot;1.40e+149&quot;, piToThe300);
1284         test(&quot;%.3g&quot;, &quot;-1.40e+149&quot;, piToThe300.negate());
1285         test(Locale.FRANCE, &quot;%.3g&quot;, &quot;-1,40e+149&quot;, piToThe300.negate());
1286         test(&quot;%.3g&quot;, &quot;1.00e-100&quot;, recip(ten.pow(100)));
1287         test(&quot;%.3g&quot;, &quot;-1.00e-100&quot;, negate(recip(ten.pow(100))));
1288 
1289         test(&quot;%3.0g&quot;, &quot;1e-06&quot;, new BigDecimal(&quot;0.000001&quot;));
1290         test(&quot;%3.0g&quot;, &quot;1e-05&quot;, new BigDecimal(&quot;0.00001&quot;));
1291         test(&quot;%3.0g&quot;, &quot;0.0001&quot;, new BigDecimal(&quot;0.0001&quot;));
1292         test(&quot;%3.0g&quot;, &quot;0.001&quot;, new BigDecimal(&quot;0.001&quot;));
1293         test(&quot;%3.3g&quot;, &quot;0.00100&quot;, new BigDecimal(&quot;0.001&quot;));
1294         test(&quot;%3.4g&quot;, &quot;0.001000&quot;, new BigDecimal(&quot;0.001&quot;));
1295         test(&quot;%3.0g&quot;, &quot;0.01&quot;, new BigDecimal(&quot;0.01&quot;));
1296         test(&quot;%3.0g&quot;, &quot;0.1&quot;, new BigDecimal(&quot;0.1&quot;));
1297         test(&quot;%3.0g&quot;, &quot;0.9&quot;, new BigDecimal(&quot;0.9&quot;));
1298         test(&quot;%3.1g&quot;, &quot;0.9&quot;, new BigDecimal(&quot;0.9&quot;));
1299         test(&quot;%3.0g&quot;, &quot;  1&quot;, new BigDecimal(&quot;1.00&quot;));
1300         test(&quot;%3.2g&quot;, &quot; 10&quot;, new BigDecimal(&quot;10.00&quot;));
1301         test(&quot;%3.0g&quot;, &quot;1e+01&quot;, new BigDecimal(&quot;10.00&quot;));
1302         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;99.19&quot;));
1303         test(&quot;%3.1g&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;99.19&quot;));
1304         test(&quot;%3.2g&quot;, &quot; 99&quot;, new BigDecimal(&quot;99.19&quot;));
1305         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;99.99&quot;));
1306         test(&quot;%3.0g&quot;, &quot;1e+02&quot;, new BigDecimal(&quot;100.00&quot;));
1307         test(&quot;%3.0g&quot;, &quot;1e+03&quot;, new BigDecimal(&quot;1000.00&quot;));
1308         test(&quot;%3.0g&quot;, &quot;1e+04&quot;,      new BigDecimal(&quot;10000.00&quot;));
1309         test(&quot;%3.0g&quot;, &quot;1e+05&quot;,      new BigDecimal(&quot;100000.00&quot;));
1310         test(&quot;%3.0g&quot;, &quot;1e+06&quot;,      new BigDecimal(&quot;1000000.00&quot;));
1311         test(&quot;%3.0g&quot;, &quot;1e+07&quot;,      new BigDecimal(&quot;10000000.00&quot;));
1312         test(&quot;%3.9g&quot;, &quot;100000000&quot;,  new BigDecimal(&quot;100000000.00&quot;));
1313         test(&quot;%3.10g&quot;, &quot;100000000.0&quot;, new BigDecimal(&quot;100000000.00&quot;));
1314 #end[BigDecimal]
1315 
1316         test(&quot;%.3g&quot;, &quot;10.0&quot;, ten);
1317         test(&quot;%.3g&quot;, &quot;1.00&quot;, one);
1318         test(&quot;%10.3g&quot;, &quot;      1.00&quot;, one);
1319         test(&quot;%+10.3g&quot;, &quot;     +3.14&quot;, pi);
1320         test(&quot;%+10.3g&quot;, &quot;     -3.14&quot;, negate(pi));
1321         test(&quot;% .3g&quot;, &quot; 3.14&quot;, pi);
1322         test(&quot;% .3g&quot;, &quot;-3.14&quot;, negate(pi));
1323         test(&quot;%.0g&quot;, &quot;3&quot;, create(3.0));
1324         test(&quot;%.0g&quot;, &quot;-3&quot;, create(-3.0));
1325 
1326         test(&quot;%(.4g&quot;, &quot;3.142e+08&quot;, mult(pi, 100000000.0));
1327         test(&quot;%(.4g&quot;, &quot;(3.142e+08)&quot;, mult(pi, -100000000.0));
1328 
1329 #if[float]
1330         // Float can not accurately store 1e6 * PI.
1331         test(&quot;%,.6g&quot;, &quot;3,141.59&quot;, mult(pi, 1000.0));
1332         test(&quot;%(,.6g&quot;, &quot;(3,141.59)&quot;, mult(pi, -1000.0));
1333 #else[float]
1334 #if[!Float]
1335         test(&quot;%,.11g&quot;, &quot;3,141,592.6536&quot;, mult(pi, 1000000.0));
1336         test(&quot;%(,.11g&quot;, &quot;(3,141,592.6536)&quot;, mult(pi, -1000000.0));
1337 #end[!Float]
1338 #end[float]
1339 
1340 #if[double]
1341         //---------------------------------------------------------------------
1342         // %a
1343         //
1344         // Floating-point conversions applicable to float, double, and
1345         // BigDecimal.
1346         //---------------------------------------------------------------------
1347         test(&quot;%a&quot;, &quot;null&quot;, (Object)null);
1348         test(&quot;%.11a&quot;, &quot;0x0.00000000000p0&quot;, 0.0);
1349         test(Locale.FRANCE, &quot;%.11a&quot;, &quot;0x0.00000000000p0&quot;, 0.0); // no localization
1350         test(&quot;%.1a&quot;, &quot;0x0.0p0&quot;, 0.0);
1351         test(&quot;%.11a&quot;, &quot;-0x0.00000000000p0&quot;, -0.0);
1352         test(&quot;%.1a&quot;, &quot;-0x0.0p0&quot;, -0.0);
1353         test(&quot;%.11a&quot;, &quot;0x1.00000000000p0&quot;, 1.0);
1354         test(&quot;%.1a&quot;, &quot;0x1.0p0&quot;, 1.0);
1355         test(&quot;%.11a&quot;, &quot;-0x1.00000000000p0&quot;, -1.0);
1356         test(&quot;%.1a&quot;, &quot;-0x1.0p0&quot;, -1.0);
1357         test(&quot;%.11a&quot;, &quot;0x1.80000000000p1&quot;, 3.0);
1358         test(&quot;%.1a&quot;, &quot;0x1.8p1&quot;, 3.0);
1359         test(&quot;%.11a&quot;, &quot;0x1.00000000000p-1022&quot;, Double.MIN_NORMAL);
1360         test(&quot;%.1a&quot;, &quot;0x1.0p-1022&quot;, Double.MIN_NORMAL);
1361         test(&quot;%.11a&quot;, &quot;0x1.00000000000p-1022&quot;,
1362              Math.nextDown(Double.MIN_NORMAL));
1363         test(&quot;%.1a&quot;, &quot;0x1.0p-1022&quot;,
1364              Math.nextDown(Double.MIN_NORMAL));
1365         test(&quot;%.11a&quot;, &quot;0x1.ffffffffffep-1023&quot;, 0x0.fffffffffffp-1022);
1366         test(&quot;%.1a&quot;, &quot;0x1.0p-1022&quot;, 0x0.fffffffffffp-1022);
1367         test(&quot;%.30a&quot;, &quot;0x0.000000000000100000000000000000p-1022&quot;, Double.MIN_VALUE);
1368         test(&quot;%.13a&quot;, &quot;0x0.0000000000001p-1022&quot;, Double.MIN_VALUE);
1369         test(&quot;%.11a&quot;, &quot;0x1.00000000000p-1074&quot;, Double.MIN_VALUE);
1370         test(&quot;%.1a&quot;, &quot;0x1.0p-1074&quot;, Double.MIN_VALUE);
1371 
1372         test(&quot;%.11a&quot;, &quot;0x1.08000000000p-1069&quot;,
1373              Double.MIN_VALUE + Double.MIN_VALUE*32);
1374         test(&quot;%.1a&quot;, &quot;0x1.0p-1069&quot;,
1375              Double.MIN_VALUE + Double.MIN_VALUE*32);
1376         test(&quot;%.30a&quot;, &quot;0x1.fffffffffffff00000000000000000p1023&quot;, Double.MAX_VALUE);
1377         test(&quot;%.13a&quot;, &quot;0x1.fffffffffffffp1023&quot;, Double.MAX_VALUE);
1378         test(&quot;%.11a&quot;, &quot;0x1.00000000000p1024&quot;, Double.MAX_VALUE);
1379         test(&quot;%.1a&quot;, &quot;0x1.0p1024&quot;, Double.MAX_VALUE);
1380         test(&quot;%.11a&quot;, &quot;0x1.18000000000p0&quot;, 0x1.18p0);
1381         test(&quot;%.1a&quot;, &quot;0x1.2p0&quot;, 0x1.18p0);
1382 
1383         test(&quot;%.11a&quot;, &quot;0x1.18000000000p0&quot;, 0x1.180000000001p0);
1384         test(&quot;%.1a&quot;, &quot;0x1.2p0&quot;, 0x1.180000000001p0);
1385         test(&quot;%.11a&quot;, &quot;0x1.28000000000p0&quot;, 0x1.28p0);
1386         test(&quot;%.1a&quot;, &quot;0x1.2p0&quot;, 0x1.28p0);
1387 
1388         test(&quot;%.11a&quot;, &quot;0x1.28000000000p0&quot;, 0x1.280000000001p0);
1389         test(&quot;%.1a&quot;, &quot;0x1.3p0&quot;, 0x1.280000000001p0);
1390 
1391         test(&quot;%a&quot;, &quot;0x0.123p-1022&quot;, 0x0.123p-1022);
1392         test(&quot;%1.3a&quot;, &quot;0x1.230p-1026&quot;, 0x0.123p-1022);
1393         test(&quot;%1.12a&quot;, &quot;0x1.230000000000p-1026&quot;, 0x0.123p-1022);
1394         test(&quot;%1.15a&quot;, &quot;0x0.123000000000000p-1022&quot;, 0x0.123p-1022);
1395         test(&quot;%1.5a&quot;, &quot;0x1.00000p-1074&quot;, 0x0.0000000000001p-1022);
1396         test(&quot;%1.7a&quot;, &quot;0x1.0000000p-1022&quot;, 0x0.fffffffffffffp-1022);
1397 
1398         test(&quot;%1.6a&quot;, &quot;0x1.230000p-1026&quot;, 0x0.123000057p-1022);
1399         test(&quot;%1.7a&quot;, &quot;0x1.2300005p-1026&quot;, 0x0.123000057p-1022);
1400         test(&quot;%1.8a&quot;, &quot;0x1.23000057p-1026&quot;, 0x0.123000057p-1022);
1401         test(&quot;%1.9a&quot;, &quot;0x1.230000570p-1026&quot;, 0x0.123000057p-1022);
1402 
1403         test(&quot;%1.6a&quot;, &quot;0x1.230000p-1026&quot;, 0x0.123000058p-1022);
1404         test(&quot;%1.7a&quot;, &quot;0x1.2300006p-1026&quot;, 0x0.123000058p-1022);
1405         test(&quot;%1.8a&quot;, &quot;0x1.23000058p-1026&quot;, 0x0.123000058p-1022);
1406         test(&quot;%1.9a&quot;, &quot;0x1.230000580p-1026&quot;, 0x0.123000058p-1022);
1407 
1408         test(&quot;%1.6a&quot;, &quot;0x1.230000p-1026&quot;, 0x0.123000059p-1022);
1409         test(&quot;%1.7a&quot;, &quot;0x1.2300006p-1026&quot;, 0x0.123000059p-1022);
1410         test(&quot;%1.8a&quot;, &quot;0x1.23000059p-1026&quot;, 0x0.123000059p-1022);
1411         test(&quot;%1.9a&quot;, &quot;0x1.230000590p-1026&quot;, 0x0.123000059p-1022);
1412 
1413         test(&quot;%1.4a&quot;, &quot;0x1.0000p-1022&quot;, Math.nextDown(Double.MIN_NORMAL));
1414 
1415         test(&quot;%a&quot;, &quot;0x1.fffffffffffffp1023&quot;, Double.MAX_VALUE);
1416         test(&quot;%1.1a&quot;, &quot;0x1.0p1024&quot;, Double.MAX_VALUE);
1417         test(&quot;%1.2a&quot;, &quot;0x1.00p1024&quot;, Double.MAX_VALUE);
1418         test(&quot;%1.6a&quot;, &quot;0x1.000000p1024&quot;, Double.MAX_VALUE);
1419         test(&quot;%1.9a&quot;, &quot;0x1.000000000p1024&quot;, Double.MAX_VALUE);
1420         test(&quot;%1.11a&quot;, &quot;0x1.00000000000p1024&quot;, Double.MAX_VALUE);
1421         test(&quot;%1.12a&quot;, &quot;0x1.000000000000p1024&quot;, Double.MAX_VALUE);
1422         test(&quot;%1.13a&quot;, &quot;0x1.fffffffffffffp1023&quot;, Double.MAX_VALUE);
1423 
1424 #end[double]
1425 
1426         //---------------------------------------------------------------------
1427         // %f, %e, %g, %a - Boundaries
1428         //---------------------------------------------------------------------
1429 #if[float]
1430         //---------------------------------------------------------------------
1431         // %f, %e, %g, %a - NaN
1432         //---------------------------------------------------------------------
1433         test(&quot;%f&quot;, &quot;NaN&quot;, Float.NaN);
1434         // s
1435         test(&quot;%+f&quot;, &quot;NaN&quot;, Float.NaN);
1436 //      test(&quot;%F&quot;, &quot;NAN&quot;, Float.NaN);
1437         test(&quot;%e&quot;, &quot;NaN&quot;, Float.NaN);
1438         test(&quot;%+e&quot;, &quot;NaN&quot;, Float.NaN);
1439         test(&quot;%E&quot;, &quot;NAN&quot;, Float.NaN);
1440         test(&quot;%g&quot;, &quot;NaN&quot;, Float.NaN);
1441         test(&quot;%+g&quot;, &quot;NaN&quot;, Float.NaN);
1442         test(&quot;%G&quot;, &quot;NAN&quot;, Float.NaN);
1443         test(&quot;%a&quot;, &quot;NaN&quot;, Float.NaN);
1444         test(&quot;%+a&quot;, &quot;NaN&quot;, Float.NaN);
1445         test(&quot;%A&quot;, &quot;NAN&quot;, Float.NaN);
1446 
1447         //---------------------------------------------------------------------
1448         // %f, %e, %g, %a - +0.0
1449         //---------------------------------------------------------------------
1450         test(&quot;%f&quot;, &quot;0.000000&quot;, +0.0);
1451         test(&quot;%+f&quot;, &quot;+0.000000&quot;, +0.0);
1452         test(&quot;% f&quot;, &quot; 0.000000&quot;, +0.0);
1453 //      test(&quot;%F&quot;, &quot;0.000000&quot;, +0.0);
1454         test(&quot;%e&quot;, &quot;0.000000e+00&quot;, 0e0);
1455         test(&quot;%e&quot;, &quot;0.000000e+00&quot;, +0.0);
1456         test(&quot;%+e&quot;, &quot;+0.000000e+00&quot;, +0.0);
1457         test(&quot;% e&quot;, &quot; 0.000000e+00&quot;, +0.0);
1458         test(&quot;%E&quot;, &quot;0.000000E+00&quot;, 0e0);
1459         test(&quot;%E&quot;, &quot;0.000000E+00&quot;, +0.0);
1460         test(&quot;%+E&quot;, &quot;+0.000000E+00&quot;, +0.0);
1461         test(&quot;% E&quot;, &quot; 0.000000E+00&quot;, +0.0);
1462         test(&quot;%g&quot;, &quot;0.00000&quot;, +0.0);
1463         test(&quot;%+g&quot;, &quot;+0.00000&quot;, +0.0);
1464         test(&quot;% g&quot;, &quot; 0.00000&quot;, +0.0);
1465         test(&quot;%G&quot;, &quot;0.00000&quot;, +0.0);
1466         test(&quot;% G&quot;, &quot; 0.00000&quot;, +0.0);
1467         test(&quot;%a&quot;, &quot;0x0.0p0&quot;, +0.0);
1468         test(&quot;%+a&quot;, &quot;+0x0.0p0&quot;, +0.0);
1469         test(&quot;% a&quot;, &quot; 0x0.0p0&quot;, +0.0);
1470         test(&quot;%A&quot;, &quot;0X0.0P0&quot;, +0.0);
1471         test(&quot;% A&quot;, &quot; 0X0.0P0&quot;, +0.0);
1472 
1473         //---------------------------------------------------------------------
1474         // %f, %e, %g, %a - -0.0
1475         //---------------------------------------------------------------------
1476         test(&quot;%f&quot;, &quot;-0.000000&quot;, -0.0);
1477         test(&quot;%+f&quot;, &quot;-0.000000&quot;, -0.0);
1478 //      test(&quot;%F&quot;, &quot;-0.000000&quot;, -0.0);
1479         test(&quot;%e&quot;, &quot;-0.000000e+00&quot;, -0.0);
1480         test(&quot;%+e&quot;, &quot;-0.000000e+00&quot;, -0.0);
1481         test(&quot;%E&quot;, &quot;-0.000000E+00&quot;, -0.0);
1482         test(&quot;%+E&quot;, &quot;-0.000000E+00&quot;, -0.0);
1483         test(&quot;%g&quot;, &quot;-0.00000&quot;, -0.0);
1484         test(&quot;%+g&quot;, &quot;-0.00000&quot;, -0.0);
1485         test(&quot;%G&quot;, &quot;-0.00000&quot;, -0.0);
1486         test(&quot;%a&quot;, &quot;-0x0.0p0&quot;, -0.0);
1487         test(&quot;%+a&quot;, &quot;-0x0.0p0&quot;, -0.0);
1488         test(&quot;%+A&quot;, &quot;-0X0.0P0&quot;, -0.0);
1489 
1490         //---------------------------------------------------------------------
1491         // %f, %e, %g, %a - +Infinity
1492         //---------------------------------------------------------------------
1493         test(&quot;%f&quot;, &quot;Infinity&quot;, Float.POSITIVE_INFINITY);
1494         test(&quot;%+f&quot;, &quot;+Infinity&quot;, Float.POSITIVE_INFINITY);
1495         test(&quot;% f&quot;, &quot; Infinity&quot;, Float.POSITIVE_INFINITY);
1496 //      test(&quot;%F&quot;, &quot;INFINITY&quot;, Float.POSITIVE_INFINITY);
1497         test(&quot;%e&quot;, &quot;Infinity&quot;, Float.POSITIVE_INFINITY);
1498         test(&quot;%+e&quot;, &quot;+Infinity&quot;, Float.POSITIVE_INFINITY);
1499         test(&quot;% e&quot;, &quot; Infinity&quot;, Float.POSITIVE_INFINITY);
1500         test(&quot;%E&quot;, &quot;INFINITY&quot;, Float.POSITIVE_INFINITY);
1501         test(&quot;%+E&quot;, &quot;+INFINITY&quot;, Float.POSITIVE_INFINITY);
1502         test(&quot;% E&quot;, &quot; INFINITY&quot;, Float.POSITIVE_INFINITY);
1503         test(&quot;%g&quot;, &quot;Infinity&quot;, Float.POSITIVE_INFINITY);
1504         test(&quot;%+g&quot;, &quot;+Infinity&quot;, Float.POSITIVE_INFINITY);
1505         test(&quot;%G&quot;, &quot;INFINITY&quot;, Float.POSITIVE_INFINITY);
1506         test(&quot;% G&quot;, &quot; INFINITY&quot;, Float.POSITIVE_INFINITY);
1507         test(&quot;%+G&quot;, &quot;+INFINITY&quot;, Float.POSITIVE_INFINITY);
1508         test(&quot;%a&quot;, &quot;Infinity&quot;, Float.POSITIVE_INFINITY);
1509         test(&quot;%+a&quot;, &quot;+Infinity&quot;, Float.POSITIVE_INFINITY);
1510         test(&quot;% a&quot;, &quot; Infinity&quot;, Float.POSITIVE_INFINITY);
1511         test(&quot;%A&quot;, &quot;INFINITY&quot;, Float.POSITIVE_INFINITY);
1512         test(&quot;%+A&quot;, &quot;+INFINITY&quot;, Float.POSITIVE_INFINITY);
1513         test(&quot;% A&quot;, &quot; INFINITY&quot;, Float.POSITIVE_INFINITY);
1514 
1515         //---------------------------------------------------------------------
1516         // %f, %e, %g, %a - -Infinity
1517         //---------------------------------------------------------------------
1518         test(&quot;%f&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1519         test(&quot;%+f&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1520         test(&quot;%(f&quot;, &quot;(Infinity)&quot;, Float.NEGATIVE_INFINITY);
1521 //      test(&quot;%F&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1522         test(&quot;%e&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1523         test(&quot;%+e&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1524         test(&quot;%E&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1525         test(&quot;%+E&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1526         test(&quot;%g&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1527         test(&quot;%+g&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1528         test(&quot;%G&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1529         test(&quot;%+G&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1530         test(&quot;%a&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1531         test(&quot;%+a&quot;, &quot;-Infinity&quot;, Float.NEGATIVE_INFINITY);
1532         test(&quot;%A&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1533         test(&quot;%+A&quot;, &quot;-INFINITY&quot;, Float.NEGATIVE_INFINITY);
1534 
1535         //---------------------------------------------------------------------
1536         // %f, %e, %g, %a - Float.MIN_VALUE
1537         //---------------------------------------------------------------------
1538         test(&quot;%f&quot;, &quot;0.000000&quot;, Float.MIN_VALUE);
1539         test(&quot;%,f&quot;, &quot;0.000000&quot;, Float.MIN_VALUE);
1540         test(&quot;%(f&quot;, &quot;(0.000000)&quot;, -Float.MIN_VALUE);
1541         test(&quot;%30.0f&quot;,  &quot;                             0&quot;, Float.MIN_VALUE);
1542         test(&quot;%30.5f&quot;,  &quot;                       0.00000&quot;, Float.MIN_VALUE);
1543         test(&quot;%30.13f&quot;, &quot;               0.0000000000000&quot;, Float.MIN_VALUE);
1544         test(&quot;%30.20f&quot;, &quot;        0.00000000000000000000&quot;, Float.MIN_VALUE);
1545         test(&quot;%e&quot;, &quot;1.401298e-45&quot;, Float.MIN_VALUE);
1546         test(&quot;%E&quot;, &quot;1.401298E-45&quot;, Float.MIN_VALUE);
1547         test(&quot;%(.1e&quot;, &quot;1.4e-45&quot;, Float.MIN_VALUE);
1548         test(&quot;%(E&quot;, &quot;(1.401298E-45)&quot;, -Float.MIN_VALUE);
1549         test(&quot;%30.5e&quot;,  &quot;                   1.40130e-45&quot;, Float.MIN_VALUE);
1550         test(&quot;%30.13e&quot;, &quot;           1.4012984643248e-45&quot;, Float.MIN_VALUE);
1551         test(&quot;%30.20e&quot;, &quot;    1.40129846432481700000e-45&quot;, Float.MIN_VALUE);
1552         test(&quot;%g&quot;, &quot;1.40130e-45&quot;, Float.MIN_VALUE);
1553         test(&quot;%G&quot;, &quot;1.40130E-45&quot;, Float.MIN_VALUE);
1554         test(&quot;%(g&quot;, &quot;1.40130e-45&quot;, Float.MIN_VALUE);
1555         test(&quot;%,g&quot;, &quot;1.40130e-45&quot;, Float.MIN_VALUE);
1556         test(&quot;%(G&quot;, &quot;(1.40130E-45)&quot;, -Float.MIN_VALUE);
1557         test(&quot;%30.5g&quot;,  &quot;                    1.4013e-45&quot;, Float.MIN_VALUE);
1558         test(&quot;%30.13g&quot;, &quot;            1.401298464325e-45&quot;, Float.MIN_VALUE);
1559         test(&quot;%30.20g&quot;, &quot;     1.4012984643248170000e-45&quot;, Float.MIN_VALUE);
1560         test(&quot;%a&quot;, &quot;0x1.0p-149&quot;, Float.MIN_VALUE);
1561         test(&quot;%A&quot;, &quot;0X1.0P-149&quot;, Float.MIN_VALUE);
1562         test(&quot;%20a&quot;, &quot;          0x1.0p-149&quot;, Float.MIN_VALUE);
1563 
1564         //---------------------------------------------------------------------
1565         // %f, %e, %g, %a - Float.MAX_VALUE
1566         //---------------------------------------------------------------------
1567         test(&quot;%f&quot;, &quot;340282346638528860000000000000000000000.000000&quot;, Float.MAX_VALUE);
1568         test(&quot;%,f&quot;,&quot;340,282,346,638,528,860,000,000,000,000,000,000,000.000000&quot;,
1569              Float.MAX_VALUE);
1570         test(&quot;%(f&quot;, &quot;(340282346638528860000000000000000000000.000000)&quot;, -Float.MAX_VALUE);
1571         test(&quot;%60.5f&quot;,  &quot;               340282346638528860000000000000000000000.00000&quot;,
1572              Float.MAX_VALUE);
1573         test(&quot;%60.13f&quot;, &quot;       340282346638528860000000000000000000000.0000000000000&quot;,
1574              Float.MAX_VALUE);
1575         test(&quot;%61.20f&quot;, &quot; 340282346638528860000000000000000000000.00000000000000000000&quot;,
1576              Float.MAX_VALUE);
1577         test(&quot;%e&quot;, &quot;3.402823e+38&quot;, Float.MAX_VALUE);
1578         test(&quot;%E&quot;, &quot;3.402823E+38&quot;, Float.MAX_VALUE);
1579         test(&quot;%(e&quot;, &quot;3.402823e+38&quot;, Float.MAX_VALUE);
1580         test(&quot;%(e&quot;, &quot;(3.402823e+38)&quot;, -Float.MAX_VALUE);
1581         test(&quot;%30.5e&quot;,  &quot;                   3.40282e+38&quot;, Float.MAX_VALUE);
1582         test(&quot;%30.13e&quot;, &quot;           3.4028234663853e+38&quot;, Float.MAX_VALUE);
1583         test(&quot;%30.20e&quot;, &quot;    3.40282346638528860000e+38&quot;, Float.MAX_VALUE);
1584         test(&quot;%g&quot;, &quot;3.40282e+38&quot;, Float.MAX_VALUE);
1585         test(&quot;%G&quot;, &quot;3.40282E+38&quot;, Float.MAX_VALUE);
1586         test(&quot;%,g&quot;, &quot;3.40282e+38&quot;, Float.MAX_VALUE);
1587         test(&quot;%(g&quot;, &quot;(3.40282e+38)&quot;, -Float.MAX_VALUE);
1588         test(&quot;%30.5g&quot;,  &quot;                    3.4028e+38&quot;, Float.MAX_VALUE);
1589         test(&quot;%30.13g&quot;, &quot;            3.402823466385e+38&quot;, Float.MAX_VALUE);
1590         test(&quot;%30.20G&quot;, &quot;     3.4028234663852886000E+38&quot;, Float.MAX_VALUE);
1591         test(&quot;%a&quot;, &quot;0x1.fffffep127&quot;, Float.MAX_VALUE);
1592         test(&quot;%A&quot;, &quot;0X1.FFFFFEP127&quot;, Float.MAX_VALUE);
1593         test(&quot;%20a&quot;,&quot;      0x1.fffffep127&quot;, Float.MAX_VALUE);
1594 
1595 #end[float]
1596 
1597 #if[double]
1598         //---------------------------------------------------------------------
1599         // %f, %e, %g, %a - Double.MIN_VALUE
1600         //---------------------------------------------------------------------
1601         test(&quot;%f&quot;, &quot;0.000000&quot;, Double.MIN_VALUE);
1602         test(&quot;%,f&quot;, &quot;0.000000&quot;, Double.MIN_VALUE);
1603         test(&quot;%(f&quot;, &quot;(0.000000)&quot;, -Double.MIN_VALUE);
1604         test(&quot;%30.0f&quot;,  &quot;                             0&quot;, Double.MIN_VALUE);
1605         test(&quot;%30.5f&quot;,  &quot;                       0.00000&quot;, Double.MIN_VALUE);
1606         test(&quot;%30.13f&quot;, &quot;               0.0000000000000&quot;, Double.MIN_VALUE);
1607         test(&quot;%30.20f&quot;, &quot;        0.00000000000000000000&quot;, Double.MIN_VALUE);
1608         test(&quot;%30.350f&quot;,&quot;0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000490000000000000000000000000&quot;,
1609              Double.MIN_VALUE);
1610         test(&quot;%e&quot;, &quot;4.900000e-324&quot;, Double.MIN_VALUE);
1611         test(&quot;%E&quot;, &quot;4.900000E-324&quot;, Double.MIN_VALUE);
1612         test(&quot;%(.1e&quot;, &quot;4.9e-324&quot;, Double.MIN_VALUE);
1613         test(&quot;%(E&quot;, &quot;(4.900000E-324)&quot;, -Double.MIN_VALUE);
1614         test(&quot;%30.5e&quot;,  &quot;                  4.90000e-324&quot;, Double.MIN_VALUE);
1615         test(&quot;%30.13e&quot;, &quot;          4.9000000000000e-324&quot;, Double.MIN_VALUE);
1616         test(&quot;%30.20e&quot;, &quot;   4.90000000000000000000e-324&quot;, Double.MIN_VALUE);
1617         test(&quot;%g&quot;, &quot;4.90000e-324&quot;, Double.MIN_VALUE);
1618         test(&quot;%G&quot;, &quot;4.90000E-324&quot;, Double.MIN_VALUE);
1619         test(&quot;%(g&quot;, &quot;4.90000e-324&quot;, Double.MIN_VALUE);
1620         test(&quot;%,g&quot;, &quot;4.90000e-324&quot;, Double.MIN_VALUE);
1621         test(&quot;%30.5g&quot;,  &quot;                   4.9000e-324&quot;, Double.MIN_VALUE);
1622         test(&quot;%30.13g&quot;, &quot;           4.900000000000e-324&quot;, Double.MIN_VALUE);
1623         test(&quot;%30.20g&quot;, &quot;    4.9000000000000000000e-324&quot;, Double.MIN_VALUE);
1624         test(&quot;%a&quot;, &quot;0x0.0000000000001p-1022&quot;, Double.MIN_VALUE);
1625         test(&quot;%A&quot;, &quot;0X0.0000000000001P-1022&quot;, Double.MIN_VALUE);
1626         test(&quot;%30a&quot;,    &quot;       0x0.0000000000001p-1022&quot;, Double.MIN_VALUE);
1627 
1628         //---------------------------------------------------------------------
1629         // %f, %e, %g, %a - Double.MAX_VALUE
1630         //---------------------------------------------------------------------
1631         test(&quot;%f&quot;, &quot;179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.000000&quot;,
1632              Double.MAX_VALUE);
1633         test(&quot;%,f&quot;, &quot;179,769,313,486,231,570,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000.000000&quot;,
1634              Double.MAX_VALUE);
1635         test(&quot;%,(f&quot;, &quot;(179,769,313,486,231,570,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000.000000)&quot;,
1636              -Double.MAX_VALUE);
1637         test(&quot;%,30.5f&quot;, &quot;179,769,313,486,231,570,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000.00000&quot;,
1638              Double.MAX_VALUE);
1639         test(&quot;%30.13f&quot;, &quot;179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.0000000000000&quot;,
1640              Double.MAX_VALUE);
1641         test(&quot;%30.20f&quot;, &quot;179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.00000000000000000000&quot;,
1642              Double.MAX_VALUE);
1643         test(&quot;%e&quot;, &quot;1.797693e+308&quot;, Double.MAX_VALUE);
1644         test(&quot;%E&quot;, &quot;1.797693E+308&quot;, Double.MAX_VALUE);
1645         test(&quot;%(e&quot;, &quot;1.797693e+308&quot;, Double.MAX_VALUE);
1646         test(&quot;%(e&quot;, &quot;(1.797693e+308)&quot;, -Double.MAX_VALUE);
1647         test(&quot;%30.5e&quot;,  &quot;                  1.79769e+308&quot;, Double.MAX_VALUE);
1648         test(&quot;%30.13e&quot;, &quot;          1.7976931348623e+308&quot;, Double.MAX_VALUE);
1649         test(&quot;%30.20e&quot;, &quot;   1.79769313486231570000e+308&quot;, Double.MAX_VALUE);
1650         test(&quot;%g&quot;, &quot;1.79769e+308&quot;, Double.MAX_VALUE);
1651         test(&quot;%G&quot;, &quot;1.79769E+308&quot;, Double.MAX_VALUE);
1652         test(&quot;%,g&quot;, &quot;1.79769e+308&quot;, Double.MAX_VALUE);
1653         test(&quot;%(g&quot;, &quot;(1.79769e+308)&quot;, -Double.MAX_VALUE);
1654         test(&quot;%30.5g&quot;,  &quot;                   1.7977e+308&quot;, Double.MAX_VALUE);
1655         test(&quot;%30.13g&quot;, &quot;           1.797693134862e+308&quot;, Double.MAX_VALUE);
1656         test(&quot;%30.20g&quot;, &quot;    1.7976931348623157000e+308&quot;, Double.MAX_VALUE);
1657         test(&quot;%a&quot;, &quot;0x1.fffffffffffffp1023&quot;, Double.MAX_VALUE);
1658         test(&quot;%A&quot;, &quot;0X1.FFFFFFFFFFFFFP1023&quot;, Double.MAX_VALUE);
1659         test(&quot;%30a&quot;,    &quot;        0x1.fffffffffffffp1023&quot;, Double.MAX_VALUE);
1660 #end[double]
1661 
1662 #end[fp]
1663 
1664         //---------------------------------------------------------------------
1665         // %t
1666         //
1667         // Date/Time conversions applicable to Calendar, Date, and long.
1668         //---------------------------------------------------------------------
1669         test(&quot;%tA&quot;, &quot;null&quot;, (Object)null);
1670         test(&quot;%TA&quot;, &quot;NULL&quot;, (Object)null);
1671 
1672         //---------------------------------------------------------------------
1673         // %t - errors
1674         //---------------------------------------------------------------------
1675         tryCatch(&quot;%t&quot;, UnknownFormatConversionException.class);
1676         tryCatch(&quot;%T&quot;, UnknownFormatConversionException.class);
1677         tryCatch(&quot;%tP&quot;, UnknownFormatConversionException.class);
1678         tryCatch(&quot;%TP&quot;, UnknownFormatConversionException.class);
1679         tryCatch(&quot;%.5tB&quot;, IllegalFormatPrecisionException.class);
1680         tryCatch(&quot;%#tB&quot;, FormatFlagsConversionMismatchException.class);
1681         tryCatch(&quot;%-tB&quot;, MissingFormatWidthException.class);
1682 
1683 #if[datetime]
1684         //---------------------------------------------------------------------
1685         // %t - create test Calendar
1686         //---------------------------------------------------------------------
1687 
1688         // Get the supported ids for GMT-08:00 (Pacific Standard Time)
1689         String[] ids = TimeZone.getAvailableIDs(-8 * 60 * 60 * 1000);
1690         // Create a Pacific Standard Time time zone
1691         SimpleTimeZone tz = new SimpleTimeZone(-8 * 60 * 60 * 1000, ids[0]);
1692         // public GregorianCalendar(TimeZone zone, Locale aLocale);
1693         Calendar c0 = new GregorianCalendar(tz, Locale.US);
1694         // public final void set(int year, int month, int date,
1695         //     int hourOfDay, int minute, int second);
1696         c0.set(1995, MAY, 23, 19, 48, 34);
1697         c0.set(Calendar.MILLISECOND, 584);
1698 
1699         //---------------------------------------------------------------------
1700         // %t - Minutes, {nano,milli}*seconds
1701         //
1702         // testDateTime() verifies the expected output for all applicable types
1703         // (Calendar, Date, and long).  It also verifies output for &quot;%t&quot; and
1704         // &quot;%T&quot;. Thus it is sufficient to invoke that method once per
1705         // conversion/expected output.
1706         //---------------------------------------------------------------------
1707         testDateTime(&quot;%tM&quot;, &quot;48&quot;, c0);
1708         testDateTime(&quot;%tN&quot;, &quot;584000000&quot;, c0);
1709         testDateTime(&quot;%tL&quot;, &quot;584&quot;, c0);
1710 //      testDateTime(&quot;%tQ&quot;, &quot;801283714584&quot;, c0);
1711 
1712         testDateTime(&quot;%ts&quot;, String.valueOf(c0.getTimeInMillis() / 1000), c0);
1713         testDateTime(&quot;%tS&quot;, &quot;34&quot;, c0);
1714         testDateTime(&quot;%tT&quot;, &quot;19:48:34&quot;, c0);
1715 
1716         //---------------------------------------------------------------------
1717         // %t - Hours, morning/afternoon markers
1718         //
1719         // testHours() iterates through all twenty-four hours to verify
1720         // numeric return value and morning/afternoon markers.
1721         //---------------------------------------------------------------------
1722         testHours();
1723 
1724         //---------------------------------------------------------------------
1725         // %t - Portions of date [ day, month, dates, weeks ]
1726         //---------------------------------------------------------------------
1727         testDateTime(&quot;%ta&quot;, &quot;Tue&quot;, c0);
1728         testDateTime(&quot;%tA&quot;, &quot;Tuesday&quot;, c0);
1729         testDateTime(&quot;%tb&quot;, &quot;May&quot;, c0);
1730         testDateTime(&quot;%tB&quot;, &quot;May&quot;, c0);
1731         testDateTime(&quot;%tC&quot;, &quot;19&quot;, c0);
1732         testDateTime(&quot;%td&quot;, &quot;23&quot;, c0);
1733         testDateTime(&quot;%te&quot;, &quot;23&quot;, c0);
1734         testDateTime(&quot;%th&quot;, &quot;May&quot;, c0);
1735         testDateTime(&quot;%tj&quot;, &quot;143&quot;, c0);
1736         testDateTime(&quot;%tm&quot;, &quot;05&quot;, c0);
1737         testDateTime(&quot;%ty&quot;, &quot;95&quot;, c0);
1738         testDateTime(&quot;%tY&quot;, &quot;1995&quot;, c0);
1739 
1740         //---------------------------------------------------------------------
1741         // %t - TimeZone
1742         //---------------------------------------------------------------------
1743         testDateTime(&quot;%tz&quot;, &quot;-0800&quot;, c0);
1744         testDateTime(&quot;%tZ&quot;, &quot;PST&quot;, c0);
1745 
1746         //---------------------------------------------------------------------
1747         // %tz should always adjust for DST
1748         //---------------------------------------------------------------------
1749         TimeZone dtz = TimeZone.getDefault();
1750 
1751         // Artificial TimeZone based on PST with 3:15 DST always in effect
1752         TimeZone atz = new SimpleTimeZone(-8 * 60 * 60 * 1000, &quot;AlwaysDST&quot;,
1753             JANUARY, 1, 0, 0, STANDARD_TIME,
1754             // 24hrs - 1m = 60 * 60 * 1000 * 24 - 1
1755             DECEMBER, 31, 0, 60 * 60 * 1000 * 24 - 1, STANDARD_TIME,
1756             (int)(60 * 60 * 1000 * 3.25));
1757         TimeZone.setDefault(atz);
1758         testDateTime(&quot;%tz&quot;, &quot;-0445&quot;, Calendar.getInstance(atz));
1759 
1760         // Restore the TimeZone and verify
1761         TimeZone.setDefault(dtz);
1762         if (atz.hasSameRules(TimeZone.getDefault()))
1763             throw new RuntimeException(&quot;Default TimeZone not restored&quot;);
1764 
1765         //---------------------------------------------------------------------
1766         // %t - Composites
1767         //---------------------------------------------------------------------
1768         testDateTime(&quot;%tr&quot;, &quot;07:48:34 PM&quot;, c0);
1769         testDateTime(&quot;%tR&quot;, &quot;19:48&quot;, c0);
1770         testDateTime(&quot;%tc&quot;, &quot;Tue May 23 19:48:34 PST 1995&quot;, c0);
1771         testDateTime(&quot;%tD&quot;, &quot;05/23/95&quot;, c0);
1772         testDateTime(&quot;%tF&quot;, &quot;1995-05-23&quot;, c0);
1773         testDateTime(&quot;%-12tF&quot;, &quot;1995-05-23  &quot;, c0);
1774         testDateTime(&quot;%12tF&quot;, &quot;  1995-05-23&quot;, c0);
1775 #end[datetime]
1776 
1777         //---------------------------------------------------------------------
1778         // %n
1779         //---------------------------------------------------------------------
1780         test(&quot;%n&quot;, System.getProperty(&quot;line.separator&quot;), (Object)null);
1781         test(&quot;%n&quot;, System.getProperty(&quot;line.separator&quot;), &quot;&quot;);
1782 
1783         tryCatch(&quot;%,n&quot;, IllegalFormatFlagsException.class);
1784         tryCatch(&quot;%.n&quot;, UnknownFormatConversionException.class);
1785         tryCatch(&quot;%5.n&quot;, UnknownFormatConversionException.class);
1786         tryCatch(&quot;%5n&quot;, IllegalFormatWidthException.class);
1787         tryCatch(&quot;%.7n&quot;, IllegalFormatPrecisionException.class);
1788         tryCatch(&quot;%&lt;n&quot;, IllegalFormatFlagsException.class);
1789 
1790         //---------------------------------------------------------------------
1791         // %%
1792         //---------------------------------------------------------------------
1793         test(&quot;%%&quot;, &quot;%&quot;, (Object)null);
1794         test(&quot;%%&quot;, &quot;%&quot;, &quot;&quot;);
1795 
1796         test(&quot;%5%&quot;, &quot;    %&quot;, (Object)null);
1797         test(&quot;%5%&quot;, &quot;    %&quot;, &quot;&quot;);
1798         test(&quot;%-5%&quot;, &quot;%    &quot;, (Object)null);
1799         test(&quot;%-5%&quot;, &quot;%    &quot;, &quot;&quot;);
1800 
1801         tryCatch(&quot;%.5%&quot;, IllegalFormatPrecisionException.class);
1802         tryCatch(&quot;%5.5%&quot;, IllegalFormatPrecisionException.class);
1803 
1804         tryCatch(&quot;%%%&quot;, UnknownFormatConversionException.class);
1805         // perhaps an IllegalFormatArgumentIndexException should be defined?
1806         tryCatch(&quot;%&lt;%&quot;, IllegalFormatFlagsException.class);
1807     }
1808 }
<a name="6" id="anc6"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="6" type="hidden" />
</body>
</html>