<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/awt/Window/FullWindowContentTest/FullWindowContentTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../AlwaysOnTop/AutoTestOnTop.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../HandleWindowDestroyTest/HandleWindowDestroyTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/awt/Window/FullWindowContentTest/FullWindowContentTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /**
 27  * @test
 28  * @key headful
 29  * @bug 8211301
 30  * @summary [macosx] support full window content options
 31  * @author Alan Snyder
 32  * @run main FullWindowContentTest
 33  * @requires (os.family == &quot;mac&quot;)
<span class="line-modified"> 34 */</span>
 35 
 36 import java.awt.AWTException;
 37 import java.awt.Color;
 38 import java.awt.Rectangle;
 39 import java.awt.Robot;
 40 import java.awt.image.BufferedImage;
 41 import java.lang.reflect.InvocationTargetException;
 42 import javax.swing.JComponent;
 43 import javax.swing.JFrame;
 44 import javax.swing.JRootPane;
 45 import javax.swing.SwingUtilities;
 46 
 47 public class FullWindowContentTest
 48 {
 49     static FullWindowContentTest theTest;
 50     private Robot robot;
 51     private JFrame frame;
 52     private JRootPane rootPane;
 53     static boolean isTransparentSupported = getOSVersion() &gt;= 1010;
 54 
</pre>
<hr />
<pre>
103         frame = null;
104         rootPane = null;
105     }
106 
107     private void checkTransparent() {
108         if (isTransparentSupported) {
109             Color c = getTestPixel();
110             int delta = c.getRed() - c.getBlue();
111             if (delta &lt; 200) {
112                 throw new RuntimeException(&quot;Test failed: did not find transparent title bar color&quot;);
113             }
114             checkContent();
115         } else {
116             checkTranslucent();
117         }
118     }
119 
120     private void checkTranslucent() {
121         Color c = getTestPixel();
122         int delta = c.getRed() - c.getBlue();
<span class="line-modified">123         if (delta &lt; 50 || delta &gt; 150) {</span>
124             throw new RuntimeException(&quot;Test failed: did not find translucent title bar color&quot;);
125         }
126         checkContent();
127     }
128 
129     private void checkNormal() {
130         Color c = getTestPixel();
131         int delta = c.getRed() - c.getBlue();
<span class="line-modified">132         if (delta &lt; -50 || delta &gt; 50) {</span>
133             throw new RuntimeException(&quot;Test failed: did not find normal title bar color&quot;);
134         }
135         checkContent();
136     }
137 
138     private void checkContent() {
139         // Check the bottom of the content area to make sure the insets were changed.
140         Color c = getContentPixel();
141         int delta = c.getRed() - c.getBlue();
142         if (delta &lt; 200) {
143             throw new RuntimeException(&quot;Test failed: did not find content color&quot;);
144         }
145     }
146 
147     private Color getContentPixel() {
148         Rectangle bounds = frame.getBounds();
149         Color c = robot.getPixelColor(bounds.x + 80, bounds.y + bounds.height - 10);
150         return c;
151     }
152 
</pre>
<hr />
<pre>
185     }
186 
187     private static void runSwing(Runnable r) {
188         try {
189             SwingUtilities.invokeAndWait(r);
190         } catch (InterruptedException e) {
191         } catch (InvocationTargetException e) {
192             throw new RuntimeException(e);
193         }
194     }
195 
196     public static void main(String[] args) {
197         if (!System.getProperty(&quot;os.name&quot;).contains(&quot;OS X&quot;)) {
198             System.out.println(&quot;This test is for MacOS only. Automatically passed on other platforms.&quot;);
199             return;
200         }
201 
202         try {
203             runSwing(() -&gt; theTest = new FullWindowContentTest());
204             theTest.performTest();
<span class="line-removed">205             ;</span>
206         } finally {
207             if (theTest != null) {
208                 runSwing(() -&gt; theTest.dispose());
209             }
210         }
211     }
212 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 /**
 27  * @test
 28  * @key headful
 29  * @bug 8211301
 30  * @summary [macosx] support full window content options
 31  * @author Alan Snyder
 32  * @run main FullWindowContentTest
 33  * @requires (os.family == &quot;mac&quot;)
<span class="line-modified"> 34  */</span>
 35 
 36 import java.awt.AWTException;
 37 import java.awt.Color;
 38 import java.awt.Rectangle;
 39 import java.awt.Robot;
 40 import java.awt.image.BufferedImage;
 41 import java.lang.reflect.InvocationTargetException;
 42 import javax.swing.JComponent;
 43 import javax.swing.JFrame;
 44 import javax.swing.JRootPane;
 45 import javax.swing.SwingUtilities;
 46 
 47 public class FullWindowContentTest
 48 {
 49     static FullWindowContentTest theTest;
 50     private Robot robot;
 51     private JFrame frame;
 52     private JRootPane rootPane;
 53     static boolean isTransparentSupported = getOSVersion() &gt;= 1010;
 54 
</pre>
<hr />
<pre>
103         frame = null;
104         rootPane = null;
105     }
106 
107     private void checkTransparent() {
108         if (isTransparentSupported) {
109             Color c = getTestPixel();
110             int delta = c.getRed() - c.getBlue();
111             if (delta &lt; 200) {
112                 throw new RuntimeException(&quot;Test failed: did not find transparent title bar color&quot;);
113             }
114             checkContent();
115         } else {
116             checkTranslucent();
117         }
118     }
119 
120     private void checkTranslucent() {
121         Color c = getTestPixel();
122         int delta = c.getRed() - c.getBlue();
<span class="line-modified">123         if (delta &lt; 40 || delta &gt; 150) {</span>
124             throw new RuntimeException(&quot;Test failed: did not find translucent title bar color&quot;);
125         }
126         checkContent();
127     }
128 
129     private void checkNormal() {
130         Color c = getTestPixel();
131         int delta = c.getRed() - c.getBlue();
<span class="line-modified">132         if (delta &lt; -40 || delta &gt; 40) {</span>
133             throw new RuntimeException(&quot;Test failed: did not find normal title bar color&quot;);
134         }
135         checkContent();
136     }
137 
138     private void checkContent() {
139         // Check the bottom of the content area to make sure the insets were changed.
140         Color c = getContentPixel();
141         int delta = c.getRed() - c.getBlue();
142         if (delta &lt; 200) {
143             throw new RuntimeException(&quot;Test failed: did not find content color&quot;);
144         }
145     }
146 
147     private Color getContentPixel() {
148         Rectangle bounds = frame.getBounds();
149         Color c = robot.getPixelColor(bounds.x + 80, bounds.y + bounds.height - 10);
150         return c;
151     }
152 
</pre>
<hr />
<pre>
185     }
186 
187     private static void runSwing(Runnable r) {
188         try {
189             SwingUtilities.invokeAndWait(r);
190         } catch (InterruptedException e) {
191         } catch (InvocationTargetException e) {
192             throw new RuntimeException(e);
193         }
194     }
195 
196     public static void main(String[] args) {
197         if (!System.getProperty(&quot;os.name&quot;).contains(&quot;OS X&quot;)) {
198             System.out.println(&quot;This test is for MacOS only. Automatically passed on other platforms.&quot;);
199             return;
200         }
201 
202         try {
203             runSwing(() -&gt; theTest = new FullWindowContentTest());
204             theTest.performTest();

205         } finally {
206             if (theTest != null) {
207                 runSwing(() -&gt; theTest.dispose());
208             }
209         }
210     }
211 }
</pre>
</td>
</tr>
</table>
<center><a href="../AlwaysOnTop/AutoTestOnTop.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../HandleWindowDestroyTest/HandleWindowDestroyTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>