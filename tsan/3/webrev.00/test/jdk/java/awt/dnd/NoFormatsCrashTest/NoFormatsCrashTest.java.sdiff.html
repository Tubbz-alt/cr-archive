<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/awt/dnd/NoFormatsCrashTest/NoFormatsCrashTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../InterJVMGetDropSuccessTest/InterJVMGetDropSuccessTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../RemoveDropTargetCrashTest/RemoveDropTargetCrashTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/awt/dnd/NoFormatsCrashTest/NoFormatsCrashTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
<span class="line-modified"> 25   test</span>

 26   @bug 4870762
 27   @summary tests that a drop target JVM doesn&#39;t crash if the source doesn&#39;t export
 28            data in native formats.
<span class="line-modified"> 29   @author das@sparc.spb.su area=dnd</span>
<span class="line-removed"> 30   @compile NoFormatsCrashTest.java</span>
<span class="line-removed"> 31   @run applet NoFormatsCrashTest.html</span>
 32 */
 33 
<span class="line-removed"> 34 // Note there is no @ in front of test above.  This is so that the</span>
<span class="line-removed"> 35 //  harness will not mistake this file as a test file.  It should</span>
<span class="line-removed"> 36 //  only see the html file as a test file. (the harness runs all</span>
<span class="line-removed"> 37 //  valid test files, so it would run this test twice if this file</span>
<span class="line-removed"> 38 //  were valid as well as the html file.)</span>
<span class="line-removed"> 39 // Also, note the area= after Your Name in the author tag.  Here, you</span>
<span class="line-removed"> 40 //  should put which functional area the test falls in.  See the</span>
<span class="line-removed"> 41 //  AWT-core home page -&gt; test areas and/or -&gt; AWT team  for a list of</span>
<span class="line-removed"> 42 //  areas.</span>
<span class="line-removed"> 43 // Note also the &#39;NoFormatsCrashTest.html&#39; in the run tag.  This should</span>
<span class="line-removed"> 44 //  be changed to the name of the test.</span>
<span class="line-removed"> 45 </span>
<span class="line-removed"> 46 </span>
<span class="line-removed"> 47 /**</span>
<span class="line-removed"> 48  * NoFormatsCrashTest.java</span>
<span class="line-removed"> 49  *</span>
<span class="line-removed"> 50  * summary: tests that a drop target JVM doesn&#39;t crash if the source doesn&#39;t export</span>
<span class="line-removed"> 51  *          data in native formats.</span>
<span class="line-removed"> 52  */</span>
<span class="line-removed"> 53 </span>
<span class="line-removed"> 54 import java.applet.Applet;</span>
 55 import java.awt.*;
 56 import java.awt.datatransfer.*;
 57 import java.awt.dnd.*;
 58 import java.awt.event.*;
 59 import java.io.*;
 60 
<span class="line-modified"> 61 </span>
<span class="line-removed"> 62 //Automated tests should run as applet tests if possible because they</span>
<span class="line-removed"> 63 // get their environments cleaned up, including AWT threads, any</span>
<span class="line-removed"> 64 // test created threads, and any system resources used by the test</span>
<span class="line-removed"> 65 // such as file descriptors.  (This is normally not a problem as</span>
<span class="line-removed"> 66 // main tests usually run in a separate VM, however on some platforms</span>
<span class="line-removed"> 67 // such as the Mac, separate VMs are not possible and non-applet</span>
<span class="line-removed"> 68 // tests will cause problems).  Also, you don&#39;t have to worry about</span>
<span class="line-removed"> 69 // synchronisation stuff in Applet tests they way you do in main</span>
<span class="line-removed"> 70 // tests...</span>
<span class="line-removed"> 71 </span>
<span class="line-removed"> 72 </span>
<span class="line-removed"> 73 public class NoFormatsCrashTest extends Applet {</span>
 74 
 75     final Frame frame = new Frame();
 76     private volatile Process process;
 77 
 78     static final int FRAME_ACTIVATION_TIMEOUT = 2000;
 79 
 80     public static void main(String[] args) {







 81         NoFormatsCrashTest test = new NoFormatsCrashTest();
 82         test.run(args);
 83     }
 84 
 85     public void run(String[] args) {
 86         try {
 87             if (args.length != 4) {
 88                 throw new RuntimeException(&quot;Incorrect command line arguments.&quot;);
 89             }
 90 
 91             int x = Integer.parseInt(args[0]);
 92             int y = Integer.parseInt(args[1]);
 93             int w = Integer.parseInt(args[2]);
 94             int h = Integer.parseInt(args[3]);
 95 
 96             Panel panel = new DragSourcePanel();
 97 
 98             frame.setTitle(&quot;Drag source frame&quot;);
 99             frame.setLocation(500, 200);
100             frame.add(panel);
</pre>
</td>
<td>
<hr />
<pre>
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
<span class="line-modified"> 25   @test</span>
<span class="line-added"> 26   @key headful</span>
 27   @bug 4870762
 28   @summary tests that a drop target JVM doesn&#39;t crash if the source doesn&#39;t export
 29            data in native formats.
<span class="line-modified"> 30   @run main NoFormatsCrashTest main</span>


 31 */
 32 





















 33 import java.awt.*;
 34 import java.awt.datatransfer.*;
 35 import java.awt.dnd.*;
 36 import java.awt.event.*;
 37 import java.io.*;
 38 
<span class="line-modified"> 39 public class NoFormatsCrashTest {</span>












 40 
 41     final Frame frame = new Frame();
 42     private volatile Process process;
 43 
 44     static final int FRAME_ACTIVATION_TIMEOUT = 2000;
 45 
 46     public static void main(String[] args) {
<span class="line-added"> 47         if (args.length &gt; 0 &amp;&amp; args[0].equals(&quot;main&quot;)) {</span>
<span class="line-added"> 48             NoFormatsCrashTest test = new NoFormatsCrashTest();</span>
<span class="line-added"> 49             test.init();</span>
<span class="line-added"> 50             test.start();</span>
<span class="line-added"> 51             return;</span>
<span class="line-added"> 52         }</span>
<span class="line-added"> 53 </span>
 54         NoFormatsCrashTest test = new NoFormatsCrashTest();
 55         test.run(args);
 56     }
 57 
 58     public void run(String[] args) {
 59         try {
 60             if (args.length != 4) {
 61                 throw new RuntimeException(&quot;Incorrect command line arguments.&quot;);
 62             }
 63 
 64             int x = Integer.parseInt(args[0]);
 65             int y = Integer.parseInt(args[1]);
 66             int w = Integer.parseInt(args[2]);
 67             int h = Integer.parseInt(args[3]);
 68 
 69             Panel panel = new DragSourcePanel();
 70 
 71             frame.setTitle(&quot;Drag source frame&quot;);
 72             frame.setLocation(500, 200);
 73             frame.add(panel);
</pre>
</td>
</tr>
</table>
<center><a href="../InterJVMGetDropSuccessTest/InterJVMGetDropSuccessTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../RemoveDropTargetCrashTest/RemoveDropTargetCrashTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>