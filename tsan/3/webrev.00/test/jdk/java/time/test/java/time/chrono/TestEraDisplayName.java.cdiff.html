<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/jdk/java/time/test/java/time/chrono/TestEraDisplayName.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../TestZonedDateTime.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TestJapaneseChronology.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/java/time/test/java/time/chrono/TestEraDisplayName.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 26,28 ***</span>
  package test.java.time.chrono;
  
  import java.time.*;
  import java.time.chrono.*;
  import java.time.format.*;
  import java.util.Locale;
  
  import org.testng.annotations.DataProvider;
  import org.testng.annotations.Test;
  import static org.testng.Assert.assertEquals;
  
  /**
   * Tests Era.getDisplayName() correctly returns the name based on each
   * chrono implementation.
   * Note: The exact result may depend on locale data provider&#39;s implementation.
   *
<span class="line-modified">!  * @bug 8171049</span>
   */
  @Test
  public class TestEraDisplayName {
      private static final Locale THAI = Locale.forLanguageTag(&quot;th-TH&quot;);
      private static final Locale EGYPT = Locale.forLanguageTag(&quot;ar-EG&quot;);
  
      @DataProvider(name=&quot;eraDisplayName&quot;)
      Object[][] eraDisplayName() {
          return new Object[][] {
              // Era, text style, displyay locale, expected name
              // IsoEra
<span class="line-new-header">--- 26,35 ---</span>
  package test.java.time.chrono;
  
  import java.time.*;
  import java.time.chrono.*;
  import java.time.format.*;
<span class="line-added">+ import java.util.Arrays;</span>
  import java.util.Locale;
<span class="line-added">+ import java.util.stream.Stream;</span>
  
  import org.testng.annotations.DataProvider;
  import org.testng.annotations.Test;
  import static org.testng.Assert.assertEquals;
  
  /**
   * Tests Era.getDisplayName() correctly returns the name based on each
   * chrono implementation.
   * Note: The exact result may depend on locale data provider&#39;s implementation.
   *
<span class="line-modified">!  * @bug 8171049 8224105</span>
   */
  @Test
  public class TestEraDisplayName {
      private static final Locale THAI = Locale.forLanguageTag(&quot;th-TH&quot;);
      private static final Locale EGYPT = Locale.forLanguageTag(&quot;ar-EG&quot;);
  
<span class="line-added">+     private static final LocalDate REIWA_1ST = LocalDate.of(2019, 5, 1);</span>
<span class="line-added">+     private static final DateTimeFormatter JAPANESE_FORMATTER =</span>
<span class="line-added">+          DateTimeFormatter.ofPattern(&quot;yyyy MM dd GGGG G GGGGG&quot;)</span>
<span class="line-added">+             .withChronology(JapaneseChronology.INSTANCE);</span>
<span class="line-added">+ </span>
      @DataProvider(name=&quot;eraDisplayName&quot;)
      Object[][] eraDisplayName() {
          return new Object[][] {
              // Era, text style, displyay locale, expected name
              // IsoEra
</pre>
<hr />
<pre>
<span class="line-old-header">*** 64,45 ***</span>
              { IsoEra.BCE,   TextStyle.NARROW,   Locale.JAPAN,   &quot;BC&quot; },
              { IsoEra.CE,    TextStyle.NARROW,   Locale.JAPAN,   &quot;AD&quot; },
  
              // JapaneseEra
              { JapaneseEra.MEIJI,    TextStyle.FULL,     Locale.US,      &quot;Meiji&quot; },
<span class="line-modified">!             { JapaneseEra.TAISHO,   TextStyle.FULL,     Locale.US,      &quot;Taisho&quot; },</span>
<span class="line-modified">!             { JapaneseEra.SHOWA,    TextStyle.FULL,     Locale.US,      &quot;Showa&quot; },</span>
              { JapaneseEra.HEISEI,   TextStyle.FULL,     Locale.US,      &quot;Heisei&quot; },
              { JapaneseEra.MEIJI,    TextStyle.FULL,     Locale.JAPAN,   &quot;\u660e\u6cbb&quot; },
              { JapaneseEra.TAISHO,   TextStyle.FULL,     Locale.JAPAN,   &quot;\u5927\u6b63&quot; },
              { JapaneseEra.SHOWA,    TextStyle.FULL,     Locale.JAPAN,   &quot;\u662d\u548c&quot; },
              { JapaneseEra.HEISEI,   TextStyle.FULL,     Locale.JAPAN,   &quot;\u5e73\u6210&quot; },
              { JapaneseEra.MEIJI,    TextStyle.SHORT,    Locale.US,      &quot;Meiji&quot; },
<span class="line-modified">!             { JapaneseEra.TAISHO,   TextStyle.SHORT,    Locale.US,      &quot;Taisho&quot; },</span>
<span class="line-modified">!             { JapaneseEra.SHOWA,    TextStyle.SHORT,    Locale.US,      &quot;Showa&quot; },</span>
              { JapaneseEra.HEISEI,   TextStyle.SHORT,    Locale.US,      &quot;Heisei&quot; },
              { JapaneseEra.MEIJI,    TextStyle.SHORT,    Locale.JAPAN,   &quot;\u660e\u6cbb&quot; },
              { JapaneseEra.TAISHO,   TextStyle.SHORT,    Locale.JAPAN,   &quot;\u5927\u6b63&quot; },
              { JapaneseEra.SHOWA,    TextStyle.SHORT,    Locale.JAPAN,   &quot;\u662d\u548c&quot; },
              { JapaneseEra.HEISEI,   TextStyle.SHORT,    Locale.JAPAN,   &quot;\u5e73\u6210&quot; },
              { JapaneseEra.MEIJI,    TextStyle.NARROW,   Locale.US,      &quot;M&quot; },
              { JapaneseEra.TAISHO,   TextStyle.NARROW,   Locale.US,      &quot;T&quot; },
              { JapaneseEra.SHOWA,    TextStyle.NARROW,   Locale.US,      &quot;S&quot; },
              { JapaneseEra.HEISEI,   TextStyle.NARROW,   Locale.US,      &quot;H&quot; },
              { JapaneseEra.MEIJI,    TextStyle.NARROW,   Locale.JAPAN,   &quot;M&quot; },
              { JapaneseEra.TAISHO,   TextStyle.NARROW,   Locale.JAPAN,   &quot;T&quot; },
              { JapaneseEra.SHOWA,    TextStyle.NARROW,   Locale.JAPAN,   &quot;S&quot; },
              { JapaneseEra.HEISEI,   TextStyle.NARROW,   Locale.JAPAN,   &quot;H&quot; },
  
              // ThaiBuddhistEra
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.FULL, Locale.US,      &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.FULL, Locale.US,      &quot;BE&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.FULL, THAI,           &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.FULL, THAI,
                  &quot;\u0e1e\u0e38\u0e17\u0e18\u0e28\u0e31\u0e01\u0e23\u0e32\u0e0a&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.SHORT, Locale.US,     &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.SHORT, Locale.US,     &quot;BE&quot; },
<span class="line-modified">!             { ThaiBuddhistEra.BEFORE_BE,    TextStyle.SHORT, THAI,</span>
<span class="line-removed">-                 &quot;\u0e1b\u0e35\u0e01\u0e48\u0e2d\u0e19\u0e04\u0e23\u0e34\u0e2a&quot; +</span>
<span class="line-removed">-                 &quot;\u0e15\u0e4c\u0e01\u0e32\u0e25\u0e17\u0e35\u0e48&quot; },</span>
              { ThaiBuddhistEra.BE,           TextStyle.SHORT, THAI,  &quot;\u0e1e.\u0e28.&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.NARROW, Locale.US,    &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.NARROW, Locale.US,    &quot;BE&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.NARROW, THAI,         &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.NARROW, THAI,         &quot;\u0e1e.\u0e28.&quot; },
<span class="line-new-header">--- 71,49 ---</span>
              { IsoEra.BCE,   TextStyle.NARROW,   Locale.JAPAN,   &quot;BC&quot; },
              { IsoEra.CE,    TextStyle.NARROW,   Locale.JAPAN,   &quot;AD&quot; },
  
              // JapaneseEra
              { JapaneseEra.MEIJI,    TextStyle.FULL,     Locale.US,      &quot;Meiji&quot; },
<span class="line-modified">!             { JapaneseEra.TAISHO,   TextStyle.FULL,     Locale.US,      &quot;Taish\u014d&quot; },</span>
<span class="line-modified">!             { JapaneseEra.SHOWA,    TextStyle.FULL,     Locale.US,      &quot;Sh\u014dwa&quot; },</span>
              { JapaneseEra.HEISEI,   TextStyle.FULL,     Locale.US,      &quot;Heisei&quot; },
<span class="line-added">+             { JapaneseEra.REIWA,    TextStyle.FULL,     Locale.US,      &quot;Reiwa&quot; },</span>
              { JapaneseEra.MEIJI,    TextStyle.FULL,     Locale.JAPAN,   &quot;\u660e\u6cbb&quot; },
              { JapaneseEra.TAISHO,   TextStyle.FULL,     Locale.JAPAN,   &quot;\u5927\u6b63&quot; },
              { JapaneseEra.SHOWA,    TextStyle.FULL,     Locale.JAPAN,   &quot;\u662d\u548c&quot; },
              { JapaneseEra.HEISEI,   TextStyle.FULL,     Locale.JAPAN,   &quot;\u5e73\u6210&quot; },
<span class="line-added">+             { JapaneseEra.REIWA,    TextStyle.FULL,     Locale.JAPAN,   &quot;\u4ee4\u548c&quot; },</span>
              { JapaneseEra.MEIJI,    TextStyle.SHORT,    Locale.US,      &quot;Meiji&quot; },
<span class="line-modified">!             { JapaneseEra.TAISHO,   TextStyle.SHORT,    Locale.US,      &quot;Taish\u014d&quot; },</span>
<span class="line-modified">!             { JapaneseEra.SHOWA,    TextStyle.SHORT,    Locale.US,      &quot;Sh\u014dwa&quot; },</span>
              { JapaneseEra.HEISEI,   TextStyle.SHORT,    Locale.US,      &quot;Heisei&quot; },
<span class="line-added">+             { JapaneseEra.REIWA,    TextStyle.SHORT,    Locale.US,      &quot;Reiwa&quot; },</span>
              { JapaneseEra.MEIJI,    TextStyle.SHORT,    Locale.JAPAN,   &quot;\u660e\u6cbb&quot; },
              { JapaneseEra.TAISHO,   TextStyle.SHORT,    Locale.JAPAN,   &quot;\u5927\u6b63&quot; },
              { JapaneseEra.SHOWA,    TextStyle.SHORT,    Locale.JAPAN,   &quot;\u662d\u548c&quot; },
              { JapaneseEra.HEISEI,   TextStyle.SHORT,    Locale.JAPAN,   &quot;\u5e73\u6210&quot; },
<span class="line-added">+             { JapaneseEra.REIWA,    TextStyle.SHORT,    Locale.JAPAN,   &quot;\u4ee4\u548c&quot; },</span>
              { JapaneseEra.MEIJI,    TextStyle.NARROW,   Locale.US,      &quot;M&quot; },
              { JapaneseEra.TAISHO,   TextStyle.NARROW,   Locale.US,      &quot;T&quot; },
              { JapaneseEra.SHOWA,    TextStyle.NARROW,   Locale.US,      &quot;S&quot; },
              { JapaneseEra.HEISEI,   TextStyle.NARROW,   Locale.US,      &quot;H&quot; },
<span class="line-added">+             { JapaneseEra.REIWA,    TextStyle.NARROW,   Locale.US,      &quot;R&quot; },</span>
              { JapaneseEra.MEIJI,    TextStyle.NARROW,   Locale.JAPAN,   &quot;M&quot; },
              { JapaneseEra.TAISHO,   TextStyle.NARROW,   Locale.JAPAN,   &quot;T&quot; },
              { JapaneseEra.SHOWA,    TextStyle.NARROW,   Locale.JAPAN,   &quot;S&quot; },
              { JapaneseEra.HEISEI,   TextStyle.NARROW,   Locale.JAPAN,   &quot;H&quot; },
<span class="line-added">+             { JapaneseEra.REIWA,    TextStyle.NARROW,   Locale.JAPAN,   &quot;R&quot; },</span>
  
              // ThaiBuddhistEra
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.FULL, Locale.US,      &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.FULL, Locale.US,      &quot;BE&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.FULL, THAI,           &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.FULL, THAI,
                  &quot;\u0e1e\u0e38\u0e17\u0e18\u0e28\u0e31\u0e01\u0e23\u0e32\u0e0a&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.SHORT, Locale.US,     &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.SHORT, Locale.US,     &quot;BE&quot; },
<span class="line-modified">!             { ThaiBuddhistEra.BEFORE_BE,    TextStyle.SHORT, THAI,          &quot;BC&quot; },</span>
              { ThaiBuddhistEra.BE,           TextStyle.SHORT, THAI,  &quot;\u0e1e.\u0e28.&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.NARROW, Locale.US,    &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.NARROW, Locale.US,    &quot;BE&quot; },
              { ThaiBuddhistEra.BEFORE_BE,    TextStyle.NARROW, THAI,         &quot;BC&quot; },
              { ThaiBuddhistEra.BE,           TextStyle.NARROW, THAI,         &quot;\u0e1e.\u0e28.&quot; },
</pre>
<hr />
<pre>
<span class="line-old-header">*** 129,10 ***</span>
<span class="line-new-header">--- 140,24 ---</span>
              { HijrahEra.AH, TextStyle.NARROW,   Locale.US,  &quot;AH&quot; },
              { HijrahEra.AH, TextStyle.NARROW,   EGYPT,      &quot;\u0647\u0640&quot; },
          };
      }
  
<span class="line-added">+     @DataProvider</span>
<span class="line-added">+     Object[][] allLocales() {</span>
<span class="line-added">+         return Arrays.stream(Locale.getAvailableLocales())</span>
<span class="line-added">+             .map(Stream::of)</span>
<span class="line-added">+             .map(Stream::toArray)</span>
<span class="line-added">+             .toArray(Object[][]::new);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      @Test(dataProvider=&quot;eraDisplayName&quot;)
      public void test_eraDisplayName(Era era, TextStyle style, Locale locale, String expected) {
          assertEquals(era.getDisplayName(style, locale), expected);
      }
<span class="line-added">+ </span>
<span class="line-added">+     @Test(dataProvider=&quot;allLocales&quot;)</span>
<span class="line-added">+     public void test_reiwaNames(Locale locale) throws DateTimeParseException {</span>
<span class="line-added">+         DateTimeFormatter f = JAPANESE_FORMATTER.withLocale(locale);</span>
<span class="line-added">+         assertEquals(LocalDate.parse(REIWA_1ST.format(f), f), REIWA_1ST);</span>
<span class="line-added">+     }</span>
  }
</pre>
<center><a href="../TestZonedDateTime.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TestJapaneseChronology.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>