<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/jdk/nio/zipfs/Basic.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../net/Sockets/QuickAckTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="Demo.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/jdk/nio/zipfs/Basic.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 52 
 53 public class Basic {
 54     public static void main(String[] args) throws Exception {
 55         // Test: zip should should be returned in provider list
 56         boolean found = false;
 57         for (FileSystemProvider provider: FileSystemProvider.installedProviders()) {
 58             if (provider.getScheme().equalsIgnoreCase(&quot;jar&quot;)) {
 59                 found = true;
 60                 break;
 61             }
 62         }
 63         if (!found)
 64             throw new RuntimeException(&quot;&#39;jar&#39; provider not installed&quot;);
 65 
 66         // create JAR file for test
 67         Path jarFile = Utils.createJarFile(&quot;basic.jar&quot;,
 68                 &quot;META-INF/services/java.nio.file.spi.FileSystemProvider&quot;);
 69 
 70         // Test: FileSystems#newFileSystem(Path)
 71         Map&lt;String,?&gt; env = Collections.emptyMap();
<span class="line-modified"> 72         FileSystems.newFileSystem(jarFile, null).close();</span>
 73 
 74         // Test: FileSystems#newFileSystem(URI)
 75         URI uri = new URI(&quot;jar&quot;, jarFile.toUri().toString(), null);
 76         FileSystem fs = FileSystems.newFileSystem(uri, env, null);
 77 
 78         // Test: exercise toUri method
 79         String expected = uri.toString() + &quot;!/foo&quot;;
 80         String actual = fs.getPath(&quot;/foo&quot;).toUri().toString();
 81         if (!actual.equals(expected)) {
 82             throw new RuntimeException(&quot;toUri returned &#39;&quot; + actual +
 83                 &quot;&#39;, expected &#39;&quot; + expected + &quot;&#39;&quot;);
 84         }
 85 
 86         // Test: exercise directory iterator and retrieval of basic attributes
 87         Files.walkFileTree(fs.getPath(&quot;/&quot;), new FileTreePrinter());
 88 
 89         // Test: copy file from zip file to current (scratch) directory
 90         Path source = fs.getPath(&quot;/META-INF/services/java.nio.file.spi.FileSystemProvider&quot;);
 91         if (Files.exists(source)) {
 92             Path target = Paths.get(source.getFileName().toString());
</pre>
</td>
<td>
<hr />
<pre>
 52 
 53 public class Basic {
 54     public static void main(String[] args) throws Exception {
 55         // Test: zip should should be returned in provider list
 56         boolean found = false;
 57         for (FileSystemProvider provider: FileSystemProvider.installedProviders()) {
 58             if (provider.getScheme().equalsIgnoreCase(&quot;jar&quot;)) {
 59                 found = true;
 60                 break;
 61             }
 62         }
 63         if (!found)
 64             throw new RuntimeException(&quot;&#39;jar&#39; provider not installed&quot;);
 65 
 66         // create JAR file for test
 67         Path jarFile = Utils.createJarFile(&quot;basic.jar&quot;,
 68                 &quot;META-INF/services/java.nio.file.spi.FileSystemProvider&quot;);
 69 
 70         // Test: FileSystems#newFileSystem(Path)
 71         Map&lt;String,?&gt; env = Collections.emptyMap();
<span class="line-modified"> 72         FileSystems.newFileSystem(jarFile).close();</span>
 73 
 74         // Test: FileSystems#newFileSystem(URI)
 75         URI uri = new URI(&quot;jar&quot;, jarFile.toUri().toString(), null);
 76         FileSystem fs = FileSystems.newFileSystem(uri, env, null);
 77 
 78         // Test: exercise toUri method
 79         String expected = uri.toString() + &quot;!/foo&quot;;
 80         String actual = fs.getPath(&quot;/foo&quot;).toUri().toString();
 81         if (!actual.equals(expected)) {
 82             throw new RuntimeException(&quot;toUri returned &#39;&quot; + actual +
 83                 &quot;&#39;, expected &#39;&quot; + expected + &quot;&#39;&quot;);
 84         }
 85 
 86         // Test: exercise directory iterator and retrieval of basic attributes
 87         Files.walkFileTree(fs.getPath(&quot;/&quot;), new FileTreePrinter());
 88 
 89         // Test: copy file from zip file to current (scratch) directory
 90         Path source = fs.getPath(&quot;/META-INF/services/java.nio.file.spi.FileSystemProvider&quot;);
 91         if (Files.exists(source)) {
 92             Path target = Paths.get(source.getFileName().toString());
</pre>
</td>
</tr>
</table>
<center><a href="../../net/Sockets/QuickAckTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="Demo.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>