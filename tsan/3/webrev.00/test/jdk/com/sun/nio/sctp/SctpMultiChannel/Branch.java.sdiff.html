<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/com/sun/nio/sctp/SctpMultiChannel/Branch.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../SctpChannel/SocketOptionTests.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="Send.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/com/sun/nio/sctp/SctpMultiChannel/Branch.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
193                     }
194                 } while (!info.isComplete());
195 
196                 buffer.flip();
197                 check(info != null, &quot;info is null&quot;);
198                 check(info.streamNumber() == 0,
199                         &quot;message not sent on the correct stream&quot;);
200                 check(info.bytes() == Util.SMALL_MESSAGE.getBytes(&quot;ISO-8859-1&quot;).
201                       length, &quot;bytes received not equal to message length&quot;);
202                 check(info.bytes() == buffer.remaining(), &quot;bytes != remaining&quot;);
203                 check(Util.compare(buffer, Util.SMALL_MESSAGE),
204                   &quot;received message not the same as sent message&quot;);
205 
206                 check(info != null, &quot;info is null&quot;);
207                 Set&lt;Association&gt; assocs = serverChannel.associations();
208                 check(assocs.size() == 1, &quot;there should be only one association&quot;);
209 
210                 /* echo the message */
211                 debug(&quot;Server: echoing first message&quot;);
212                 buffer.flip();
<span class="line-modified">213                 int bytes = serverChannel.send(buffer, info);</span>

214                 debug(&quot;Server: sent &quot; + bytes + &quot;bytes&quot;);
215 
216                 clientFinishedLatch.await(10L, TimeUnit.SECONDS);
217                 serverFinishedLatch.countDown();
218             } catch (IOException ioe) {
219                 unexpected(ioe);
220             } catch (InterruptedException ie) {
221                 unexpected(ie);
222             } finally {
223                 try { if (serverChannel != null) serverChannel.close(); }
224                 catch (IOException  unused) {}
225             }
226         }
227     }
228 
229     class BranchNotificationHandler extends AbstractNotificationHandler&lt;Object&gt;
230     {
231         boolean receivedCommUp;  // false
232 
233         boolean receivedCommUp() {
</pre>
</td>
<td>
<hr />
<pre>
193                     }
194                 } while (!info.isComplete());
195 
196                 buffer.flip();
197                 check(info != null, &quot;info is null&quot;);
198                 check(info.streamNumber() == 0,
199                         &quot;message not sent on the correct stream&quot;);
200                 check(info.bytes() == Util.SMALL_MESSAGE.getBytes(&quot;ISO-8859-1&quot;).
201                       length, &quot;bytes received not equal to message length&quot;);
202                 check(info.bytes() == buffer.remaining(), &quot;bytes != remaining&quot;);
203                 check(Util.compare(buffer, Util.SMALL_MESSAGE),
204                   &quot;received message not the same as sent message&quot;);
205 
206                 check(info != null, &quot;info is null&quot;);
207                 Set&lt;Association&gt; assocs = serverChannel.associations();
208                 check(assocs.size() == 1, &quot;there should be only one association&quot;);
209 
210                 /* echo the message */
211                 debug(&quot;Server: echoing first message&quot;);
212                 buffer.flip();
<span class="line-modified">213                 MessageInfo sendInfo = MessageInfo.createOutgoing(info.association(), null, 0);</span>
<span class="line-added">214                 int bytes = serverChannel.send(buffer, sendInfo);</span>
215                 debug(&quot;Server: sent &quot; + bytes + &quot;bytes&quot;);
216 
217                 clientFinishedLatch.await(10L, TimeUnit.SECONDS);
218                 serverFinishedLatch.countDown();
219             } catch (IOException ioe) {
220                 unexpected(ioe);
221             } catch (InterruptedException ie) {
222                 unexpected(ie);
223             } finally {
224                 try { if (serverChannel != null) serverChannel.close(); }
225                 catch (IOException  unused) {}
226             }
227         }
228     }
229 
230     class BranchNotificationHandler extends AbstractNotificationHandler&lt;Object&gt;
231     {
232         boolean receivedCommUp;  // false
233 
234         boolean receivedCommUp() {
</pre>
</td>
</tr>
</table>
<center><a href="../SctpChannel/SocketOptionTests.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="Send.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>