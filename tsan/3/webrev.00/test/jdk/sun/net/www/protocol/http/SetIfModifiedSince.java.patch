diff a/test/jdk/sun/net/www/protocol/http/SetIfModifiedSince.java b/test/jdk/sun/net/www/protocol/http/SetIfModifiedSince.java
--- a/test/jdk/sun/net/www/protocol/http/SetIfModifiedSince.java
+++ b/test/jdk/sun/net/www/protocol/http/SetIfModifiedSince.java
@@ -1,7 +1,7 @@
 /*
- * Copyright (c) 1999, 2000, Oracle and/or its affiliates. All rights reserved.
+ * Copyright (c) 1999, 2019, Oracle and/or its affiliates. All rights reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License version 2 only, as
  * published by the Free Software Foundation.
@@ -20,17 +20,19 @@
  * or visit www.oracle.com if you need additional information or have any
  * questions.
  */
 
 /* @test
-   @bug 4213164 8172253
-   @summary setIfModifiedSince mehtod in HttpURLConnection sometimes fails
-   */
+ * @bug 4213164 8172253
+ * @library /test/lib
+ * @summary setIfModifiedSince method in HttpURLConnection sometimes fails
+ */
 import java.util.*;
 import java.io.*;
 import java.net.*;
-import java.text.*;
+
+import jdk.test.lib.net.URIBuilder;
 
 public class SetIfModifiedSince implements Runnable {
 
   ServerSocket serverSock;
 
@@ -73,23 +75,28 @@
   }
 
 
   public SetIfModifiedSince() throws Exception {
 
-     serverSock = new ServerSocket(0);
+      serverSock = new ServerSocket();
+      serverSock.bind(new InetSocketAddress(InetAddress.getLoopbackAddress(), 0));
      int port = serverSock.getLocalPort();
 
      Thread thr = new Thread(this);
      thr.start();
 
      Date date = new Date(new Date().getTime()-1440000); // this time yesterday
      URL url;
      HttpURLConnection con;
 
      //url = new URL(args[0]);
-     url = new URL("http://localhost:" + String.valueOf(port) +
-                   "/anything");
+      url = URIBuilder.newBuilder()
+              .scheme("http")
+              .loopback()
+              .port(port)
+              .path("/anything")
+              .toURL();
      con = (HttpURLConnection)url.openConnection(Proxy.NO_PROXY);
 
      con.setIfModifiedSince(date.getTime());
      con.connect();
      int ret = con.getResponseCode();
