<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/sun/net/www/protocol/https/HttpsURLConnection/TunnelProxy.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="RetryHttps.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../NewImpl/JavaxHTTPSConnection.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/net/www/protocol/https/HttpsURLConnection/TunnelProxy.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 68         this (threads, cperthread, 0);
 69     }
 70 
 71     /**
 72      * Create a &lt;code&gt;TunnelProxy&lt;code&gt; instance with the specified number
 73      * of threads and maximum number of connections per thread and running on
 74      * the specified port. The specified number of threads are created to
 75      * handle incoming requests, and each thread is allowed
 76      * to handle a number of simultaneous TCP connections.
 77      * @param cb the callback object which is invoked to handle
 78      *  each incoming request
 79      * @param threads the number of threads to create to handle
 80      *  requests in parallel
 81      * @param cperthread the number of simultaneous TCP connections
 82      *  to handle per thread
 83      * @param port the port number to bind the server to. &lt;code&gt;Zero&lt;/code&gt;
 84      *  means choose any free port.
 85      */
 86 
 87     public TunnelProxy (int threads, int cperthread, int port)





















 88         throws IOException {
 89         schan = ServerSocketChannel.open ();
<span class="line-modified"> 90         InetSocketAddress addr = new InetSocketAddress (port);</span>
 91         schan.socket().bind (addr);
 92         this.threads = threads;
 93         this.cperthread = cperthread;
 94         servers = new Server [threads];
 95         for (int i=0; i&lt;threads; i++) {
 96             servers[i] = new Server (schan, cperthread);
 97             servers[i].start();
 98         }
 99     }
100 
101     /** Tell all threads in the server to exit within 5 seconds.
102      *  This is an abortive termination. Just prior to the thread exiting
103      *  all channels in that thread waiting to be closed are forceably closed.
104      */
105 
106     public void terminate () {
107         for (int i=0; i&lt;threads; i++) {
108             servers[i].terminate ();
109         }
110     }
</pre>
</td>
<td>
<hr />
<pre>
 68         this (threads, cperthread, 0);
 69     }
 70 
 71     /**
 72      * Create a &lt;code&gt;TunnelProxy&lt;code&gt; instance with the specified number
 73      * of threads and maximum number of connections per thread and running on
 74      * the specified port. The specified number of threads are created to
 75      * handle incoming requests, and each thread is allowed
 76      * to handle a number of simultaneous TCP connections.
 77      * @param cb the callback object which is invoked to handle
 78      *  each incoming request
 79      * @param threads the number of threads to create to handle
 80      *  requests in parallel
 81      * @param cperthread the number of simultaneous TCP connections
 82      *  to handle per thread
 83      * @param port the port number to bind the server to. &lt;code&gt;Zero&lt;/code&gt;
 84      *  means choose any free port.
 85      */
 86 
 87     public TunnelProxy (int threads, int cperthread, int port)
<span class="line-added"> 88         throws IOException {</span>
<span class="line-added"> 89         this(threads, cperthread, null, 0);</span>
<span class="line-added"> 90     }</span>
<span class="line-added"> 91 </span>
<span class="line-added"> 92     /**</span>
<span class="line-added"> 93      * Create a &lt;code&gt;TunnelProxy&lt;code&gt; instance with the specified number</span>
<span class="line-added"> 94      * of threads and maximum number of connections per thread and running on</span>
<span class="line-added"> 95      * the specified port. The specified number of threads are created to</span>
<span class="line-added"> 96      * handle incoming requests, and each thread is allowed</span>
<span class="line-added"> 97      * to handle a number of simultaneous TCP connections.</span>
<span class="line-added"> 98      * @param cb the callback object which is invoked to handle</span>
<span class="line-added"> 99      *  each incoming request</span>
<span class="line-added">100      * @param threads the number of threads to create to handle</span>
<span class="line-added">101      *  requests in parallel</span>
<span class="line-added">102      * @param cperthread the number of simultaneous TCP connections</span>
<span class="line-added">103      *  to handle per thread</span>
<span class="line-added">104      * @param address the address to bind to. null means all addresses.</span>
<span class="line-added">105      * @param port the port number to bind the server to. &lt;code&gt;Zero&lt;/code&gt;</span>
<span class="line-added">106      *  means choose any free port.</span>
<span class="line-added">107      */</span>
<span class="line-added">108     public TunnelProxy (int threads, int cperthread, InetAddress address, int port)</span>
109         throws IOException {
110         schan = ServerSocketChannel.open ();
<span class="line-modified">111         InetSocketAddress addr = new InetSocketAddress (address, port);</span>
112         schan.socket().bind (addr);
113         this.threads = threads;
114         this.cperthread = cperthread;
115         servers = new Server [threads];
116         for (int i=0; i&lt;threads; i++) {
117             servers[i] = new Server (schan, cperthread);
118             servers[i].start();
119         }
120     }
121 
122     /** Tell all threads in the server to exit within 5 seconds.
123      *  This is an abortive termination. Just prior to the thread exiting
124      *  all channels in that thread waiting to be closed are forceably closed.
125      */
126 
127     public void terminate () {
128         for (int i=0; i&lt;threads; i++) {
129             servers[i].terminate ();
130         }
131     }
</pre>
</td>
</tr>
</table>
<center><a href="RetryHttps.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../NewImpl/JavaxHTTPSConnection.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>