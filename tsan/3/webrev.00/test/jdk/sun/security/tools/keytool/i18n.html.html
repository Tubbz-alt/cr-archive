<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/jdk/sun/security/tools/keytool/i18n.html</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 &lt;html&gt;
  2 &lt;body&gt;
  3 
  4 This is a multi-stage test.  For each instruction, make sure the output
  5 from keytool is correct (you can read everything in english fine).
  6 
  7 &lt;ol&gt;
  8 &lt;li&gt;    rm ~/.keystore
  9         If you are on a Windows platform, delete the .keystore file in
 10         your home directory.
 11 &lt;li&gt;	keytool -help
 12 &lt;li&gt;	keytool -genkey -keyalg DSA -v -keysize 512
 13 	Enter &quot;a&quot; for the keystore password.  Check error (password too short).
 14 	Enter &quot;password&quot; for the keystore password.
 15         Re-enter &quot;password&quot; to confirm.
 16 	Hit &#39;return&#39; for &quot;first and last name&quot;, &quot;organizational unit&quot;,
 17 	&quot;organization&quot;, &quot;City&quot;, &quot;State&quot;, and &quot;Country Code&quot;.
 18 	Type &quot;yes&quot; when they ask you if everything is correct.
 19 	Type &#39;return&#39; for new key password.
 20 &lt;li&gt;	keytool -list -v -storepass password
 21 &lt;li&gt;	keytool -list -v
 22 	Type &quot;a&quot; for the keystore password.
 23 	Check error (wrong keystore password).
 24 &lt;li&gt;	keytool -genkey -keyalg DSA -v -keysize 512
 25 	Enter &quot;password&quot; as the password.
 26 	Check error (alias &#39;mykey&#39; already exists).
 27 &lt;li&gt;	keytool -genkey -keyalg DSA -v -keysize 512 -alias mykey2 -storepass password
 28 	Hit &#39;return&#39; for &quot;first and last name&quot;, &quot;organizational unit&quot;,
 29 	&quot;organization&quot;, &quot;City&quot;, &quot;State&quot;, and &quot;Country Code&quot;.
 30 	Type &quot;yes&quot; when they ask you if everything is correct.
 31 	Type &#39;return&#39; for new key password.
 32 &lt;li&gt;	keytool -list -v
 33 	Type &#39;password&#39; for the store password.
 34 &lt;li&gt;	keytool -keypasswd -v -alias mykey2 -storepass password
 35 	Type &quot;a&quot; for the new key password.
 36 	Type &quot;aaaaaa&quot; for the new key password.
 37 	Type &quot;bbbbbb&quot; when re-entering the new key password.
 38 	Type &quot;a&quot; for the new key password.
 39 	Check Error (too many failures).
 40 &lt;li&gt;	keytool -keypasswd -v -alias mykey2 -storepass password
 41 	Type &quot;aaaaaa&quot; for the new key password.
 42 	Type &quot;aaaaaa&quot; when re-entering the new key password.
 43 &lt;li&gt;	keytool -selfcert -v -alias mykey -storepass password
 44 &lt;li&gt;	keytool -list -v -storepass password
 45 &lt;li&gt;	keytool -export -v -alias mykey -file /tmp/cert -storepass password
 46 &lt;li&gt;	keytool -import -v -file /tmp/cert -storepass password
 47 	Check error (Certificate reply and cert are the same)
 48 &lt;li&gt;	keytool -printcert -file /tmp/cert
 49 &lt;li&gt;	keytool -list -storepass password -addprovider SUN
 50 &lt;/ol&gt;
 51 
 52 Error tests
 53 
 54 &lt;ol&gt;
 55 &lt;li&gt;	keytool -storepasswd -storepass password -new abc
 56 	Check error (password too short)
 57 &lt;!--li&gt;	keytool -list -storetype PKCS11
 58 	Check error (-keystore must be NONE)--&gt;
 59 &lt;li&gt;	keytool -storepasswd -storetype PKCS11 -keystore NONE
 60 	Check error (unsupported operation)
 61 &lt;li&gt;	keytool -keypasswd -storetype PKCS11 -keystore NONE
 62 	Check error (unsupported operation)
 63 &lt;li&gt;	keytool -list -protected -storepass password
 64 	Check error (password can not be specified with -protected)
 65 &lt;li&gt;	keytool -keypasswd -protected -keypass password
 66 	Check error (password can not be specified with -protected)
 67 &lt;li&gt;	keytool -keypasswd -protected -new password
 68 	Check error (password can not be specified with -protected)
 69 &lt;/ol&gt;
 70 
 71 MSCAPI tests (Only run on Windows)
 72 
 73 &lt;ol&gt;
 74     &lt;li&gt;keytool -storetype Windows-MY -list
 75     should list entries (may be 0) without asking for password
 76     should not show ****** WARNING WARNING WARNING ****** lines
 77     &lt;li&gt;keytool -storetype Windows-MY -list -keystore NONE
 78     should list entries without asking for password
 79     &lt;li&gt;keytool -storetype Windows-MY -list -keystore other
 80     Error: storetype must be NONE
 81     &lt;li&gt;keytool -storetype Windows-MY -list -storepass changeit
 82     Error: storepass cannot be specfied
 83     &lt;li&gt;keytool -storetype Windows-MY -list -storepasswd
 84     Error: storepasswd not supported
 85 &lt;/ol&gt;
 86 
 87 PKCS#11 tests
 88 
 89 &lt;ol&gt;
 90 &lt;li&gt;	sccs edit cert8.db key3.db
 91 
 92 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -genkey -alias genkey -dname cn=genkey -keysize 512 -keyalg rsa
 93 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -list
 94 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -list -alias genkey
 95 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -certreq -alias genkey -file genkey.certreq
 96 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -export -alias genkey -file genkey.cert
 97 &lt;li&gt;	keytool -printcert -file genkey.cert
 98 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -selfcert -alias genkey -dname cn=selfCert
 99 
100 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -list -alias genkey -v
101 (check that cert subject DN is [cn=selfCert])
102 
103 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -delete -alias genkey
104 &lt;li&gt;	keytool -keystore NONE -storepass test12 -storetype PKCS11 -providerName SunPKCS11-nss -addprovider SunPKCS11 -providerArg p11-nss.txt -list
105 (check for empty database listing)
106 
107 &lt;li&gt;	sccs unedit cert8.db key3.db
108 
109 &lt;/ol&gt;
110 
111 If all the output (english) is correct, then the test passed.
112 Otherwise, the test failed.
113 
114 &lt;/body&gt;
115 &lt;/html&gt;
    </pre>
  </body>
</html>