<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/sun/security/tools/jarsigner/compatibility/README</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="JdkUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../multiRelease/MVJarSigningTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/security/tools/jarsigner/compatibility/README</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 # Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
  2 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  3 #
  4 # This code is free software; you can redistribute it and/or modify it
  5 # under the terms of the GNU General Public License version 2 only, as
  6 # published by the Free Software Foundation.
  7 #
  8 # This code is distributed in the hope that it will be useful, but WITHOUT
  9 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 10 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 11 # version 2 for more details (a copy is included in the LICENSE file that
 12 # accompanied this code).
 13 #
 14 # You should have received a copy of the GNU General Public License version
 15 # 2 along with this work; if not, write to the Free Software Foundation,
 16 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 17 #
 18 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 19 # or visit www.oracle.com if you need additional information or have any
 20 # questions.
 21 
 22 ##### Summary #####
 23 This test is used to verify the compatibility on jarsigner cross different JDK
 24 releases. It also can be used to check jar signing (w/ and w/o TSA) and verifying
 25 on some specific key algorithms and digest algorithms.
 26 
 27 ##### Output #####
 28 The test will generate a report, at JTwork/scratch/report.html, to display the
 29 key parameters for signing and the status of signing and verifying. And it will
 30 generate another report, at JTwork/scratch/failedReport.html, to collect all of
 31 failed cases.
 32 
 33 Please note that, the test may output a great deal of logs if the jdk list and
 34 TSA list are big, and that would lead to jtreg output overflow. So, it redirects
 35 stdout and stderr to file JTwork/scratch/details.out.
 36 
 37 ##### Report Columns #####




 38 Certificate
 39     Certificate identifier. The identifier consists of specific attributes of
 40     the certificate. Generally, the naming convention is:
 41     KeyAlgorithm_DigestAlgorithm_[KeySize][_Expired]
 42 
 43 Signer JDK
 44     The JDK version that signs jar.
 45 
 46 Signature Algorithm
<span class="line-modified"> 47     The signature algorithm used by signing.</span>











 48 
<span class="line-modified"> 49 TSA Digest</span>
<span class="line-modified"> 50     The timestamp digest algorithm used by signing.</span>


 51 
 52 TSA
 53     TSA URL index. All of TSA URLs and their indices can be found at the top
 54     of this report.
 55 
 56 Signing Status
 57     Signing process result status. The status are the followings:
 58     [1]NONE, no action.
 59     [2]NORMAL, no any error and warning.
 60     [3]WARNING, no any error but some warnings raise.
 61     [4]ERROR, some errors raise.
 62 
 63 Verifier JDK
 64     The JDK version that verifies signed jars.
 65 
 66 Verifying Status
 67     Verifying process result status. The status are the same as those for
 68     &quot;Status of Signing&quot;.
 69 
 70 Delay Verifying Status
 71     Delay verifying process result status. The status are the same as those
 72     for &quot;Status of Signing&quot;.
 73 
 74 Failed
 75     It highlights which case fails. The failed cases (rows) are marked with
 76     letter X.
 77 
 78 ##### Usages #####
 79 jtreg [-options] \
 80     -jdk:&lt;path/to/testing/JDK&gt;
 81     [-DproxyHost=&lt;host&gt; \
 82      -DproxyPort=&lt;port&gt; \

 83      -DtsaListFile=&lt;/url/to/tsaListFile&gt; \
<span class="line-modified"> 84      -DtsaList=&lt;/path/to/tsa1#/path/to/tsa2#/path/to/tsa3#...&gt; \</span>
 85      -DjdkListFile=&lt;/path/to/jdkListFile&gt; \
 86      -DjdkList=&lt;/path/to/jdk1#/path/to/jdk2#/path/to/jdk3#...&gt; \
 87      -DjavaSecurityFile=&lt;/path/to/java/security/properties/file&gt; \
 88      -DdelayVerify=&lt;true|false&gt; \
 89      -DcertValidity=&lt;[1, 1440]&gt;] \
<span class="line-modified"> 90     &lt;JDK_REPO&gt;/jdk/test/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
 91 
 92 Besides the common jtreg options, like -jdk, this test introduces a set of
 93 properties for receiving users&#39; inputs and making the test more flexible. These
<span class="line-modified"> 94 properties are:</span>

 95 proxyHost=&lt;host&gt;
 96     This property indicates proxy host.
 97 
 98 proxyPort=&lt;port&gt;
 99     This property indicates proxy port. The default value is 80.
100 












101 tsaListFile=&lt;/path/to/tsaListFile&gt;
102     This property indicates a local file, which contains a set of TSA URLs and
103     the supported digest algorithms (by optional parameter digests). The format
104     of the file content looks like the below,
105     http://path/to/tsa1
106     http://path/to/tsa2;digests=SHA-1,SHA-256
107     https://path/to/tsa3
108     ...
109 
110     If a TSA line does not list the supported digest algorithms, that means
111     the TSA supports SHA-1, SHA-256 and SHA-512. Because the test only focus
112     on SHA-1, SHA-256 and SHA-512. So, if other digest algorithms, like SHA-224
113     and SHA-384, are listed, they just be ignored.
114 
<span class="line-modified">115 tsaList=&lt;/path/to/tsa1#/path/to/tsa2;digests=SHA-1,SHA-256#...&gt;</span>
116     This property directly lists a set of TSAs in command. &quot;#&quot; is the delimiter.
117     Note that, if both of tsaListFile and tsaList are specified, only property
<span class="line-modified">118     jdkListFile is selected. If neither of tsaListFile and tsaList is specified,</span>
<span class="line-modified">119     the test will fails immediately.</span>

120 
121 jdkListFile=&lt;/path/to/jdkListFile&gt;
122     This property indicates a local file, which contains a set of local JDK
123     paths. The style of the file content looks like the below,
124     /path/to/jdk1
125     /path/to/jdk2
126     /path/to/jdk3
127     ...
128 
129 jdkList=&lt;/path/to/jdk1#/path/to/jdk2#/path/to/jdk3#...&gt;
130     This property directly lists a set of local JDK paths in command. &quot;#&quot; is
131     the delimiter.









132     Note that, if both of jdkListFile and jdkList are specified, only property
133     jdkListFile is selected. If neither of jdkListFile nor jdkList is specified,
<span class="line-modified">134     the testing JDK, which is specified by jtreg option -jdk will be used as</span>
135     the only one JDK in the JDK list.
136 






















137 javaSecurityFile=&lt;/path/to/java/security/properties/file&gt;
138     This property indicates an alternative java security properties file. The
139     default file is the path of file java.scurity that is distributed with
140     this test.
141 
142 delayVerify=&lt;true|false&gt;
143     This property indicates if doing an additional verifying after all of valid
144     certificates expire. The default value is false.
145 





146 certValidity=&lt;[1, 1440]&gt;
147     This property indicates the remaining validity period in minutes for valid
148     certificates. The value range is [1, 1440]. The default value is 1440.
149     Note that, if delayVerify is false, this property doesn&#39;t take effect.
150 
<span class="line-modified">151 The testing JDK, which is specified by jtreg option &quot;-jdk&quot;, should include the</span>
<span class="line-modified">152 fix for JDK-8163304. Otherwise, the signature algorithm and timestamp digest</span>
<span class="line-modified">153 algorithm cannot be extracted from verification output. And this JDK should</span>
<span class="line-modified">154 support as many as possible signature algorithms. Anyway the latest JDK build</span>
<span class="line-modified">155 is always recommended.</span>















156 
157 ##### Examples #####
158 $ cat /path/to/jdkList
159 /path/to/jdk6u171-b05
160 /path/to/jdk7u161-b05
161 /path/to/jdk8u144-b01
162 /path/to/jdk9-179 
163 
164 $ cat /path/to/tsaList
165 http://timestamp.comodoca.com/rfc3161
166 http://sha256timestamp.ws.symantec.com/sha256/timestamp
167 http://tsa.starfieldtech.com
168 http://timestamp.entrust.net/TSS/RFC3161sha1TS;digests=SHA-1,SHA-256
169 http://timestamp.entrust.net/TSS/RFC3161sha2TS;digests=SHA-1,SHA-256
170 http://rfc3161timestamp.globalsign.com/advanced;digests=SHA-256,SHA-512
171 http://rfc3161timestamp.globalsign.com/standard
172 http://timestamp.globalsign.com/scripts/timstamp.dll
173 http://timestamp.globalsign.com/?signature=sha2;digests=SHA-256,SHA-512
174 http://timestamp.digicert.com
175 http://time.certum.pl
176 http://tsa.swisssign.net
177 http://zeitstempel.dfn.de
178 https://tsp.iaik.tugraz.at/tsp/TspRequest
179 
<span class="line-modified">180 $ jtreg -va -nr -timeout:100 \</span>
181     -jdk:/path/to/latest/jdk \
182     -DproxyHost=&lt;proxy&gt; -DproxyPort=&lt;port&gt; \
183     -DjdkListFile=/path/to/jdkList \
184     -DtsaListFile=/path/to/tsaList \
185     -DdelayVerify=true -DcertValidity=60 \
<span class="line-modified">186     &lt;JDK_REPO&gt;/jdk/test/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
187 
188 The above is a comprehensive usage example. File &quot;jdkList&quot; lists the paths of
189 testing JDK builds, and file &quot;tsaList&quot; lists the URLs of TSA services. Some TSAs,
190 like http://timestamp.entrust.net/TSS/RFC3161sha1TS, specify the supported digest
191 algorithms. Other TSAs, which don&#39;t specify parameter digests, are regarded to
192 support SHA-1, SHA-256 and SHA-512. The test uses a proxy to access TSA services.
193 And it enables delay verifying and set the certificate validity period to 60
194 minutes. So, after the first verification is done, the test will wait for all
195 of valid certificates expire and then does verification again.
196 
197 If don&#39;t want to provide such JDK list and TSA list files, the test allows to
198 specify JDKs and TSAs (via properties jdkList and tsaList respectively) in the
199 command directly, like the below style,
<span class="line-modified">200 $ jtreg -va -nr -timeout:100 \</span>
201     -jdk:/path/to/latest/jdk \
202     -DproxyHost=&lt;proxy&gt; -DproxyPort=&lt;port&gt; \
203     -DjdkList=/path/to/jdk6u171-b05#/path/to/jdk7u161-b05#/path/to/jdk8u144-b01#/path/to/jdk9-179 \
204     -DtsaList=http://timestamp.comodoca.com/rfc3161#http://timestamp.entrust.net/TSS/RFC3161sha1TS;digests=SHA-1,SHA-256 \
205     -DdelayVerify=true -DcertValidity=60 \
<span class="line-modified">206     &lt;JDK_REPO&gt;/jdk/test/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
207 
208 Furthermore, here introduces one of the simplest usages. It doesn&#39;t specify any
209 JDK list, so the testing JDK, which is specified by jtreg option &quot;-jdk&quot;, will
210 be tested. And it doesn&#39;t apply delay verifying, and no proxy is used, and use
211 only one TSA. Now, the command is pretty simple and looks like the followings,
<span class="line-modified">212 $ jtreg -va -nr -timeout:100 \</span>
213     -jdk:/path/to/latest/jdk \
214     -DtsaList=http://timestamp.comodoca.com/rfc3161 \
<span class="line-modified">215     &lt;JDK_REPO&gt;/jdk/test/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>









</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 # Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  2 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  3 #
  4 # This code is free software; you can redistribute it and/or modify it
  5 # under the terms of the GNU General Public License version 2 only, as
  6 # published by the Free Software Foundation.
  7 #
  8 # This code is distributed in the hope that it will be useful, but WITHOUT
  9 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 10 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 11 # version 2 for more details (a copy is included in the LICENSE file that
 12 # accompanied this code).
 13 #
 14 # You should have received a copy of the GNU General Public License version
 15 # 2 along with this work; if not, write to the Free Software Foundation,
 16 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 17 #
 18 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 19 # or visit www.oracle.com if you need additional information or have any
 20 # questions.
 21 
 22 ##### Summary #####
 23 This test is used to verify the compatibility on jarsigner cross different JDK
 24 releases. It also can be used to check jar signing (w/ and w/o TSA) and verifying
 25 on some specific key algorithms and digest algorithms.
 26 
 27 ##### Output #####
 28 The test will generate a report, at JTwork/scratch/report.html, to display the
 29 key parameters for signing and the status of signing and verifying. And it will
 30 generate another report, at JTwork/scratch/failedReport.html, to collect all of
 31 failed cases.
 32 
 33 Please note that, the test may output a great deal of logs if the jdk list and
 34 TSA list are big, and that would lead to jtreg output overflow. So, it redirects
 35 stdout and stderr to file JTwork/scratch/details.out.
 36 
 37 ##### Report Columns #####
<span class="line-added"> 38 </span>
<span class="line-added"> 39 Jarfile</span>
<span class="line-added"> 40     The filenames used in the tests</span>
<span class="line-added"> 41 </span>
 42 Certificate
 43     Certificate identifier. The identifier consists of specific attributes of
 44     the certificate. Generally, the naming convention is:
 45     KeyAlgorithm_DigestAlgorithm_[KeySize][_Expired]
 46 
 47 Signer JDK
 48     The JDK version that signs jar.
 49 
 50 Signature Algorithm
<span class="line-modified"> 51     The signature algorithm used to sign the key as in &#39;keytool -sigalg&#39;.</span>
<span class="line-added"> 52 </span>
<span class="line-added"> 53     Note: The values displayed in this column are specified to jarsigner only</span>
<span class="line-added"> 54     in case a test does not work with a default value.</span>
<span class="line-added"> 55     In any case the specified value or expected default value is compared in</span>
<span class="line-added"> 56     verifying phase against jarsigner&#39;s output and the test fails if it does</span>
<span class="line-added"> 57     not match.</span>
<span class="line-added"> 58 </span>
<span class="line-added"> 59 Jar Digest Algorithm</span>
<span class="line-added"> 60     The digest algorithm used to digest the files contained in the JAR file and</span>
<span class="line-added"> 61     the manifest and signature files as in &#39;jarsigner -digestalg&#39;.</span>
<span class="line-added"> 62     See also note above about default values for Signature Algorithm.</span>
 63 
<span class="line-modified"> 64 TSA Digest Algorithm</span>
<span class="line-modified"> 65     The timestamp digest algorithm used by TSA as in &#39;jarsigner -tsadigestalg&#39;.</span>
<span class="line-added"> 66     Shows no value if no TSA used.</span>
<span class="line-added"> 67     See also note above about default values for Signature Algorithm.</span>
 68 
 69 TSA
 70     TSA URL index. All of TSA URLs and their indices can be found at the top
 71     of this report.
 72 
 73 Signing Status
 74     Signing process result status. The status are the followings:
 75     [1]NONE, no action.
 76     [2]NORMAL, no any error and warning.
 77     [3]WARNING, no any error but some warnings raise.
 78     [4]ERROR, some errors raise.
 79 
 80 Verifier JDK
 81     The JDK version that verifies signed jars.
 82 
 83 Verifying Status
 84     Verifying process result status. The status are the same as those for
 85     &quot;Status of Signing&quot;.
 86 
 87 Delay Verifying Status
 88     Delay verifying process result status. The status are the same as those
 89     for &quot;Status of Signing&quot;.
 90 
 91 Failed
 92     It highlights which case fails. The failed cases (rows) are marked with
 93     letter X.
 94 
 95 ##### Usages #####
 96 jtreg [-options] \
 97     -jdk:&lt;path/to/testing/JDK&gt;
 98     [-DproxyHost=&lt;host&gt; \
 99      -DproxyPort=&lt;port&gt; \
<span class="line-added">100      -Dteeout=filename \</span>
101      -DtsaListFile=&lt;/url/to/tsaListFile&gt; \
<span class="line-modified">102      -DtsaList=&lt;/path/to/tsa1#/path/to/tsa2#/path/to/tsa3#...|notsa&gt; \</span>
103      -DjdkListFile=&lt;/path/to/jdkListFile&gt; \
104      -DjdkList=&lt;/path/to/jdk1#/path/to/jdk2#/path/to/jdk3#...&gt; \
105      -DjavaSecurityFile=&lt;/path/to/java/security/properties/file&gt; \
106      -DdelayVerify=&lt;true|false&gt; \
107      -DcertValidity=&lt;[1, 1440]&gt;] \
<span class="line-modified">108     &lt;JDK_REPO&gt;/test/jdk/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
109 
110 Besides the common jtreg options, like -jdk, this test introduces a set of
111 properties for receiving users&#39; inputs and making the test more flexible. These
<span class="line-modified">112 properties are (all to specify after -D as system properties):</span>
<span class="line-added">113 </span>
114 proxyHost=&lt;host&gt;
115     This property indicates proxy host.
116 
117 proxyPort=&lt;port&gt;
118     This property indicates proxy port. The default value is 80.
119 
<span class="line-added">120 o=filename</span>
<span class="line-added">121     Redirects a copy of what is written to stdout into the specified file which</span>
<span class="line-added">122     allows for observing progress or problems during a longer running test.</span>
<span class="line-added">123     (Compatibility test replaces System.out to collect the output but even if</span>
<span class="line-added">124     it didn&#39;t jtreg would not print anything until the test would have ended.)</span>
<span class="line-added">125     Note that relative paths resolve relatively to some temporary working</span>
<span class="line-added">126     directory created by jtreg. Defaults to JTwork/scratch/details.out.</span>
<span class="line-added">127     The specified file is not deleted or emptied and the output is appended</span>
<span class="line-added">128     though jtreg deletes the default file with the whole directory if this</span>
<span class="line-added">129     option is not specified or the file point into JTwork/scratch.</span>
<span class="line-added">130     Example (Bash style): tail -F log &amp; jtreg ... -Do=$(pwd)/log ...</span>
<span class="line-added">131 </span>
132 tsaListFile=&lt;/path/to/tsaListFile&gt;
133     This property indicates a local file, which contains a set of TSA URLs and
134     the supported digest algorithms (by optional parameter digests). The format
135     of the file content looks like the below,
136     http://path/to/tsa1
137     http://path/to/tsa2;digests=SHA-1,SHA-256
138     https://path/to/tsa3
139     ...
140 
141     If a TSA line does not list the supported digest algorithms, that means
142     the TSA supports SHA-1, SHA-256 and SHA-512. Because the test only focus
143     on SHA-1, SHA-256 and SHA-512. So, if other digest algorithms, like SHA-224
144     and SHA-384, are listed, they just be ignored.
145 
<span class="line-modified">146 tsaList=&lt;/path/to/tsa1#/path/to/tsa2;digests=SHA-1,SHA-256#...|notsa&gt;</span>
147     This property directly lists a set of TSAs in command. &quot;#&quot; is the delimiter.
148     Note that, if both of tsaListFile and tsaList are specified, only property
<span class="line-modified">149     tsaListFile is selected. If neither of tsaListFile and tsaList is specified,</span>
<span class="line-modified">150     the test fails immediately.</span>
<span class="line-added">151     If tsaList has a value of &quot;notsa&quot;, no tsa is used.</span>
152 
153 jdkListFile=&lt;/path/to/jdkListFile&gt;
154     This property indicates a local file, which contains a set of local JDK
155     paths. The style of the file content looks like the below,
156     /path/to/jdk1
157     /path/to/jdk2
158     /path/to/jdk3
159     ...
160 
161 jdkList=&lt;/path/to/jdk1#/path/to/jdk2#/path/to/jdk3#...&gt;
162     This property directly lists a set of local JDK paths in command. &quot;#&quot; is
163     the delimiter.
<span class="line-added">164     An element &quot;TEST_JDK&quot; as in</span>
<span class="line-added">165 jdkList=&lt;/path/to/jdk1#/path/to/jdk2#TEST_JDK#...&gt;</span>
<span class="line-added">166     adds the testing JDK, which is specified by jtreg option -jdk, to the jdk</span>
<span class="line-added">167     list. All signed jars are verified with the current testing JDK, which is</span>
<span class="line-added">168     specified by jtreg option -jdk, by default in addition to the JDKs given</span>
<span class="line-added">169     in jdkList but it is not used to also sign jars by default.</span>
<span class="line-added">170     If neither jdkList nor jdkListFile are specified, the current testing JDK,</span>
<span class="line-added">171     which is specified by jtreg option -jdk, is used to sign the jars, like:</span>
<span class="line-added">172 jdkList=TEST_JDK</span>
173     Note that, if both of jdkListFile and jdkList are specified, only property
174     jdkListFile is selected. If neither of jdkListFile nor jdkList is specified,
<span class="line-modified">175     the testing JDK, which is specified by jtreg option -jdk, will be used as</span>
176     the only one JDK in the JDK list.
177 
<span class="line-added">178     The testing JDK, which is specified by jtreg option &quot;-jdk&quot;, should include</span>
<span class="line-added">179     the fix for JDK-8163304. Otherwise, the signature algorithm and timestamp</span>
<span class="line-added">180     digest algorithm cannot be extracted from verification output. And this JDK</span>
<span class="line-added">181     should support as many as possible signature algorithms. Anyway the latest</span>
<span class="line-added">182     JDK build is always recommended.</span>
<span class="line-added">183 </span>
<span class="line-added">184 testComprehensiveJarContents=&lt;false|true&gt;</span>
<span class="line-added">185     If false, all tests are executed with only one typical JAR file. Otherwise,</span>
<span class="line-added">186     if true, a whole bunch of JAR files with several edge case contents are</span>
<span class="line-added">187     fed through the tests such as empty manifest or manifests with non-default</span>
<span class="line-added">188     line breaks. Default is false.</span>
<span class="line-added">189 </span>
<span class="line-added">190 testJarUpdate=&lt;false|true&gt;</span>
<span class="line-added">191     If false, all tested JAR files are signed with one JDK and verified with</span>
<span class="line-added">192     each JDK, same or other. If true, in addition, all JAR files are modified</span>
<span class="line-added">193     after having been signed, and are then each signed again with each JDK and</span>
<span class="line-added">194     verified each JDK, same or other. Default is false.</span>
<span class="line-added">195 </span>
<span class="line-added">196 strict=&lt;false|true&gt;</span>
<span class="line-added">197     If true, &#39;-strict&#39; option is specified to jarsigner along with &#39;-verify&#39;.</span>
<span class="line-added">198     Default is false.</span>
<span class="line-added">199 </span>
200 javaSecurityFile=&lt;/path/to/java/security/properties/file&gt;
201     This property indicates an alternative java security properties file. The
202     default file is the path of file java.scurity that is distributed with
203     this test.
204 
205 delayVerify=&lt;true|false&gt;
206     This property indicates if doing an additional verifying after all of valid
207     certificates expire. The default value is false.
208 
<span class="line-added">209 expired=&lt;false|true&gt;</span>
<span class="line-added">210     This property indicates whether or not all tests should be repeated with an</span>
<span class="line-added">211     expired certificate. Refers to the certificate validity period and not to</span>
<span class="line-added">212     TSA. The default value is true.</span>
<span class="line-added">213 </span>
214 certValidity=&lt;[1, 1440]&gt;
215     This property indicates the remaining validity period in minutes for valid
216     certificates. The value range is [1, 1440]. The default value is 1440.
217     Note that, if delayVerify is false, this property doesn&#39;t take effect.
218 
<span class="line-modified">219 keyAlgs=RSA;1024;2048;#DSA;1024;2048;#EC;384;521;</span>
<span class="line-modified">220     Specifies key algorithms to use in the test. For each key algorithm the</span>
<span class="line-modified">221     sizes it should be tested with can be specified after semicolons and</span>
<span class="line-modified">222     otherwise default values are used. An empty keysize denotes the default</span>
<span class="line-modified">223     keysize and invokes keytool without a keysize specified. On JDK 6 and</span>
<span class="line-added">224     earlier, EC is not supported and always skipped.</span>
<span class="line-added">225 </span>
<span class="line-added">226 digestAlgs=SHA-1#SHA-256#SHA-384#SHA-512#</span>
<span class="line-added">227     Specifies the digest algorithms used for both digesting files contained in</span>
<span class="line-added">228     the JAR file, manifests and signature files as well as certificates (keys)</span>
<span class="line-added">229     and for TSA.</span>
<span class="line-added">230     Ignored with TSA for jarsigner versions that don&#39;t support &#39;-tsadigestalg&#39;</span>
<span class="line-added">231     parameter, for digest algorithms specified not to be supported by a TSA</span>
<span class="line-added">232     server (&#39;digests&#39; sub-option is given to a tsaList item where digest</span>
<span class="line-added">233     algorithm is not contained in list), or in cases no TSA is used at all</span>
<span class="line-added">234     (&#39;tsaList=notsa&#39;).</span>
<span class="line-added">235     Note that the same set of digest algorithms is used in all three places</span>
<span class="line-added">236     (signing the key, digesting the JAR, and for the TSA) and cannot be</span>
<span class="line-added">237     specified individually except that some TSAs may exclude some digest</span>
<span class="line-added">238     algorithms.</span>
239 
240 ##### Examples #####
241 $ cat /path/to/jdkList
242 /path/to/jdk6u171-b05
243 /path/to/jdk7u161-b05
244 /path/to/jdk8u144-b01
245 /path/to/jdk9-179 
246 
247 $ cat /path/to/tsaList
248 http://timestamp.comodoca.com/rfc3161
249 http://sha256timestamp.ws.symantec.com/sha256/timestamp
250 http://tsa.starfieldtech.com
251 http://timestamp.entrust.net/TSS/RFC3161sha1TS;digests=SHA-1,SHA-256
252 http://timestamp.entrust.net/TSS/RFC3161sha2TS;digests=SHA-1,SHA-256
253 http://rfc3161timestamp.globalsign.com/advanced;digests=SHA-256,SHA-512
254 http://rfc3161timestamp.globalsign.com/standard
255 http://timestamp.globalsign.com/scripts/timstamp.dll
256 http://timestamp.globalsign.com/?signature=sha2;digests=SHA-256,SHA-512
257 http://timestamp.digicert.com
258 http://time.certum.pl
259 http://tsa.swisssign.net
260 http://zeitstempel.dfn.de
261 https://tsp.iaik.tugraz.at/tsp/TspRequest
262 
<span class="line-modified">263 $ jtreg -va -nr \</span>
264     -jdk:/path/to/latest/jdk \
265     -DproxyHost=&lt;proxy&gt; -DproxyPort=&lt;port&gt; \
266     -DjdkListFile=/path/to/jdkList \
267     -DtsaListFile=/path/to/tsaList \
268     -DdelayVerify=true -DcertValidity=60 \
<span class="line-modified">269     &lt;JDK_REPO&gt;/test/jdk/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
270 
271 The above is a comprehensive usage example. File &quot;jdkList&quot; lists the paths of
272 testing JDK builds, and file &quot;tsaList&quot; lists the URLs of TSA services. Some TSAs,
273 like http://timestamp.entrust.net/TSS/RFC3161sha1TS, specify the supported digest
274 algorithms. Other TSAs, which don&#39;t specify parameter digests, are regarded to
275 support SHA-1, SHA-256 and SHA-512. The test uses a proxy to access TSA services.
276 And it enables delay verifying and set the certificate validity period to 60
277 minutes. So, after the first verification is done, the test will wait for all
278 of valid certificates expire and then does verification again.
279 
280 If don&#39;t want to provide such JDK list and TSA list files, the test allows to
281 specify JDKs and TSAs (via properties jdkList and tsaList respectively) in the
282 command directly, like the below style,
<span class="line-modified">283 $ jtreg -va -nr \</span>
284     -jdk:/path/to/latest/jdk \
285     -DproxyHost=&lt;proxy&gt; -DproxyPort=&lt;port&gt; \
286     -DjdkList=/path/to/jdk6u171-b05#/path/to/jdk7u161-b05#/path/to/jdk8u144-b01#/path/to/jdk9-179 \
287     -DtsaList=http://timestamp.comodoca.com/rfc3161#http://timestamp.entrust.net/TSS/RFC3161sha1TS;digests=SHA-1,SHA-256 \
288     -DdelayVerify=true -DcertValidity=60 \
<span class="line-modified">289     &lt;JDK_REPO&gt;/test/jdk/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
290 
291 Furthermore, here introduces one of the simplest usages. It doesn&#39;t specify any
292 JDK list, so the testing JDK, which is specified by jtreg option &quot;-jdk&quot;, will
293 be tested. And it doesn&#39;t apply delay verifying, and no proxy is used, and use
294 only one TSA. Now, the command is pretty simple and looks like the followings,
<span class="line-modified">295 $ jtreg -va -nr \</span>
296     -jdk:/path/to/latest/jdk \
297     -DtsaList=http://timestamp.comodoca.com/rfc3161 \
<span class="line-modified">298     &lt;JDK_REPO&gt;/test/jdk/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
<span class="line-added">299 </span>
<span class="line-added">300 It also works without a tsaList but not without the tsaList argument present</span>
<span class="line-added">301 in order to prevent it going missing or ignored unnoticed. May be useful for</span>
<span class="line-added">302 local tests but not recommended for real regression tests. Together with other</span>
<span class="line-added">303 arguments, a very short running test could be started for example with:</span>
<span class="line-added">304 $ jtreg -va -nr \</span>
<span class="line-added">305     -jdk:/path/to/latest/jdk \</span>
<span class="line-added">306     -DtsaList=notsa &quot;-DkeyAlgs=EC;&quot; -DdigestAlgs=SHA-256 -Dexpired=false</span>
<span class="line-added">307     &lt;JDK_REPO&gt;/test/jdk/sun/security/tools/jarsigner/compatibility/Compatibility.java</span>
</pre>
</td>
</tr>
</table>
<center><a href="JdkUtils.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../multiRelease/MVJarSigningTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>