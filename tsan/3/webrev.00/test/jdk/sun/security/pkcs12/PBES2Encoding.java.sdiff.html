<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/sun/security/pkcs12/PBES2Encoding.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../pkcs11/tls/TestKeyMaterial.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ParamsTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/security/pkcs12/PBES2Encoding.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8202837
 27  * @summary PBES2 AlgorithmId encoding error in PKCS12 KeyStore
 28  */
 29 
 30 import java.io.ByteArrayInputStream;
 31 import java.security.KeyStore;
 32 
 33 public class PBES2Encoding {
 34 
 35     // This is a PKCS 12 file using PBES2 to encrypt the cert and key. It is
 36     // generated with these commands:
 37     //
<span class="line-modified"> 38     // keytool -keystore ks -genkeypair -storepass changeit -alias a -dname CN=A</span>
 39     // openssl pkcs12 -in ks -nodes -out kandc -passin pass:changeit
 40     // openssl pkcs12 -export -in kandc -out p12 -name a -passout pass:changeit
 41     //         -certpbe AES-128-CBC -keypbe AES-128-CBC
 42 
 43     static final String P12_FILE =
 44             &quot;308208860201033082084c06092a864886f70d010701a082083d048208393082&quot; +
 45             &quot;08353082050406092a864886f70d010706a08204f5308204f1020100308204ea&quot; +
 46             &quot;06092a864886f70d010701304906092a864886f70d01050d303c301b06092a86&quot; +
 47             &quot;4886f70d01050c300e040879e103dcdf95bd3e02020800301d06096086480165&quot; +
 48             &quot;0304010204108afe09885014c1315a431956bf051cd1808204909af1a5964e45&quot; +
 49             &quot;fa24887c963d422500a54576bda5b79beba0a97ec61fd7f68e1d7acca9c7a2ff&quot; +
 50             &quot;fa90cc161d1e930a8315158089ce5e842ae758f63d723bd02b82120e663c2965&quot; +
 51             &quot;a32101d27f268f7101d9b8786ddeeb8ddfa57d63c7b110ad9015b6279f8c5adf&quot; +
 52             &quot;d2a78f82d6641bbb4c363bfe6d5be78993c54a1a52d83acba21f70a70c104c18&quot; +
 53             &quot;1968df3009896fb3af534661a8a3d25a09974adfd6dd587f067fd5a2017f0d34&quot; +
 54             &quot;99ca0dfd9950f555e950ceb3120408fb9b72e3b43020e4cde2f1c7726901328d&quot; +
 55             &quot;78471d7825ce6c9968d9f8e3ae2f2963cfc7d81bd1facfa55f56d711f3568673&quot; +
 56             &quot;6c75bc6ae67beee1a70355bf1daa17aba7cdc4fe35b06881503b7a99d1c3efeb&quot; +
 57             &quot;e036217042e2f7918c038dc5505447acbe84db6ac10527dd65597b25c8d5f68a&quot; +
 58             &quot;349ca4da866b76934aa7c1f4c452b6c45bd97d991c35d3ce63e20342817f7874&quot; +
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8202837
 27  * @summary PBES2 AlgorithmId encoding error in PKCS12 KeyStore
 28  */
 29 
 30 import java.io.ByteArrayInputStream;
 31 import java.security.KeyStore;
 32 
 33 public class PBES2Encoding {
 34 
 35     // This is a PKCS 12 file using PBES2 to encrypt the cert and key. It is
 36     // generated with these commands:
 37     //
<span class="line-modified"> 38     // keytool -keystore ks -genkeypair -keyalg DSA -storepass changeit -alias a -dname CN=A</span>
 39     // openssl pkcs12 -in ks -nodes -out kandc -passin pass:changeit
 40     // openssl pkcs12 -export -in kandc -out p12 -name a -passout pass:changeit
 41     //         -certpbe AES-128-CBC -keypbe AES-128-CBC
 42 
 43     static final String P12_FILE =
 44             &quot;308208860201033082084c06092a864886f70d010701a082083d048208393082&quot; +
 45             &quot;08353082050406092a864886f70d010706a08204f5308204f1020100308204ea&quot; +
 46             &quot;06092a864886f70d010701304906092a864886f70d01050d303c301b06092a86&quot; +
 47             &quot;4886f70d01050c300e040879e103dcdf95bd3e02020800301d06096086480165&quot; +
 48             &quot;0304010204108afe09885014c1315a431956bf051cd1808204909af1a5964e45&quot; +
 49             &quot;fa24887c963d422500a54576bda5b79beba0a97ec61fd7f68e1d7acca9c7a2ff&quot; +
 50             &quot;fa90cc161d1e930a8315158089ce5e842ae758f63d723bd02b82120e663c2965&quot; +
 51             &quot;a32101d27f268f7101d9b8786ddeeb8ddfa57d63c7b110ad9015b6279f8c5adf&quot; +
 52             &quot;d2a78f82d6641bbb4c363bfe6d5be78993c54a1a52d83acba21f70a70c104c18&quot; +
 53             &quot;1968df3009896fb3af534661a8a3d25a09974adfd6dd587f067fd5a2017f0d34&quot; +
 54             &quot;99ca0dfd9950f555e950ceb3120408fb9b72e3b43020e4cde2f1c7726901328d&quot; +
 55             &quot;78471d7825ce6c9968d9f8e3ae2f2963cfc7d81bd1facfa55f56d711f3568673&quot; +
 56             &quot;6c75bc6ae67beee1a70355bf1daa17aba7cdc4fe35b06881503b7a99d1c3efeb&quot; +
 57             &quot;e036217042e2f7918c038dc5505447acbe84db6ac10527dd65597b25c8d5f68a&quot; +
 58             &quot;349ca4da866b76934aa7c1f4c452b6c45bd97d991c35d3ce63e20342817f7874&quot; +
</pre>
</td>
</tr>
</table>
<center><a href="../pkcs11/tls/TestKeyMaterial.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ParamsTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>