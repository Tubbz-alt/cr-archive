<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/jdk/sun/tools/jps/JpsHelper.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../jinfo/JInfoTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="LingeredApp.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/sun/tools/jps/JpsHelper.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2014, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -91,25 +91,24 @@</span>
              return list.toArray(new String[list.size()]);
          }
  
      }
  
<span class="udiff-line-removed">-     /**</span>
<span class="udiff-line-removed">-      * VM arguments to start test application with.</span>
<span class="udiff-line-removed">-      * -XX:+UsePerfData is required for running the tests on embedded platforms.</span>
<span class="udiff-line-removed">-      */</span>
<span class="udiff-line-removed">-     public static final String[] VM_ARGS = {</span>
<span class="udiff-line-removed">-         &quot;-XX:+UsePerfData&quot;, &quot;-Xmx512m&quot;, &quot;-Xlog:gc&quot;,</span>
<span class="udiff-line-removed">-         &quot;-Dmultiline.prop=value1\nvalue2\r\nvalue3&quot;</span>
<span class="udiff-line-removed">-     };</span>
      /**
       * VM flag to start test application with
       */
      public static final String VM_FLAG = &quot;+DisableExplicitGC&quot;;
  
      private static File vmFlagsFile = null;
<span class="udiff-line-modified-removed">-     private static List&lt;String&gt; testVmArgs = null;</span>
<span class="udiff-line-modified-added">+     /**</span>
<span class="udiff-line-added">+      * VM arguments to start test application with.</span>
<span class="udiff-line-added">+      * -XX:+UsePerfData is required for running the tests on embedded platforms.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     private static String[] testVmArgs = {</span>
<span class="udiff-line-added">+       &quot;-XX:+UsePerfData&quot;, &quot;-Xmx512m&quot;, &quot;-Xlog:gc&quot;,</span>
<span class="udiff-line-added">+       &quot;-Dmultiline.prop=value1\nvalue2\r\nvalue3&quot;,</span>
<span class="udiff-line-added">+       null /* lazily initialized -XX:Flags */};</span>
      private static File manifestFile = null;
  
      /**
       * Create a file containing VM_FLAG in the working directory
       */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -125,15 +124,13 @@</span>
      }
  
      /**
       * Return a list of VM arguments
       */
<span class="udiff-line-modified-removed">-     public static List&lt;String&gt; getVmArgs() throws IOException {</span>
<span class="udiff-line-modified-removed">-         if (testVmArgs == null) {</span>
<span class="udiff-line-modified-removed">-             testVmArgs = new ArrayList&lt;&gt;();</span>
<span class="udiff-line-removed">-             testVmArgs.addAll(Arrays.asList(VM_ARGS));</span>
<span class="udiff-line-removed">-             testVmArgs.add(&quot;-XX:Flags=&quot; + getVmFlagsFile().getAbsolutePath());</span>
<span class="udiff-line-modified-added">+     public static String[] getVmArgs() throws IOException {</span>
<span class="udiff-line-modified-added">+         if (testVmArgs[testVmArgs.length - 1] == null) {</span>
<span class="udiff-line-modified-added">+             testVmArgs[testVmArgs.length - 1] = &quot;-XX:Flags=&quot; + getVmFlagsFile().getAbsolutePath();</span>
          }
          return testVmArgs;
      }
  
      /**
</pre>
<center><a href="../jinfo/JInfoTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="LingeredApp.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>