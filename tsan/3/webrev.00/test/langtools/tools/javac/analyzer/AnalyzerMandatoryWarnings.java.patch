diff a/test/langtools/tools/javac/analyzer/AnalyzerMandatoryWarnings.java b/test/langtools/tools/javac/analyzer/AnalyzerMandatoryWarnings.java
--- /dev/null
+++ b/test/langtools/tools/javac/analyzer/AnalyzerMandatoryWarnings.java
@@ -0,0 +1,16 @@
+/**
+ * @test
+ * @bug 8230105
+ * @summary Verify analyzers work reasonably in combination with mandatory warnings
+ * @compile/ref=AnalyzerMandatoryWarnings.out -Xlint:deprecation -XDrawDiagnostics -Xmaxwarns 1 -XDfind=lambda AnalyzerMandatoryWarnings.java
+ */
+public class AnalyzerMandatoryWarnings {
+    private void test() {
+        Runnable r = new Runnable() {
+            public void run() {
+                Depr r;
+            }
+        };
+    }
+}
+@Deprecated class Depr {}
