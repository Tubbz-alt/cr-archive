diff a/test/langtools/tools/javac/classfiles/attributes/ConstantValue/BrokenConstantValue.java b/test/langtools/tools/javac/classfiles/attributes/ConstantValue/BrokenConstantValue.java
--- /dev/null
+++ b/test/langtools/tools/javac/classfiles/attributes/ConstantValue/BrokenConstantValue.java
@@ -0,0 +1,9 @@
+/* @test /nodynamiccopyright/
+ * @compile HasBrokenConstantValue.jcod
+ * @compile/fail/ref=BrokenConstantValue.out -XDrawDiagnostics BrokenConstantValue.java
+ */
+public class BrokenConstantValue {
+     void t() {
+         String s = HasBrokenConstantValue.VALUE;
+     }
+}
