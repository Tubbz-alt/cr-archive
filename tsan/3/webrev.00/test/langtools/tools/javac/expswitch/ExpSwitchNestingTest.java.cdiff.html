<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/langtools/tools/javac/expswitch/ExpSwitchNestingTest.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../enum/EnumMembersOrder.out.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../failover/CheckAttributedTree.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/tools/javac/expswitch/ExpSwitchNestingTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,16 ***</span>
  import java.util.List;
  
  import org.testng.ITestResult;
  import org.testng.annotations.AfterMethod;
  import org.testng.annotations.Test;
  import tools.javac.combo.JavacTemplateTestBase;
  
  import static java.util.stream.Collectors.toList;
  
  @Test
<span class="line-modified">! public class ExpSwitchNestingTest extends JavacTemplateTestBase {</span>
      private static final String RUNNABLE = &quot;Runnable r = () -&gt; { # };&quot;;
      private static final String INT_FN = &quot;java.util.function.IntSupplier r = () -&gt; { # };&quot;;
      private static final String LABEL = &quot;label: #&quot;;
      private static final String DEF_LABEL_VAR = &quot;int label = 0; { # }&quot;;
      private static final String FOR = &quot;for (int i=0; i&lt;10; i++) { # }&quot;;
<span class="line-new-header">--- 25,17 ---</span>
  import java.util.List;
  
  import org.testng.ITestResult;
  import org.testng.annotations.AfterMethod;
  import org.testng.annotations.Test;
<span class="line-added">+ import tools.javac.combo.CompilationTestCase;</span>
  import tools.javac.combo.JavacTemplateTestBase;
  
  import static java.util.stream.Collectors.toList;
  
  @Test
<span class="line-modified">! public class ExpSwitchNestingTest extends CompilationTestCase {</span>
      private static final String RUNNABLE = &quot;Runnable r = () -&gt; { # };&quot;;
      private static final String INT_FN = &quot;java.util.function.IntSupplier r = () -&gt; { # };&quot;;
      private static final String LABEL = &quot;label: #&quot;;
      private static final String DEF_LABEL_VAR = &quot;int label = 0; { # }&quot;;
      private static final String FOR = &quot;for (int i=0; i&lt;10; i++) { # }&quot;;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 46,15 ***</span>
      private static final String ESWITCH_S = &quot;String res_string = switch (x) { case 0 -&gt; { # } default -&gt; \&quot;default\&quot;; };&quot;;
      private static final String INT_FN_ESWITCH = &quot;java.util.function.IntSupplier r = switch (x) { case 0 -&gt; { # } default -&gt; null; };&quot;;
      private static final String INT_ESWITCH_DEFAULT = &quot;int res = switch (x) { default -&gt; { # } };&quot;;
      private static final String IF = &quot;if (cond) { # } else throw new RuntimeException();&quot;;
      private static final String BLOCK = &quot;{ # }&quot;;
<span class="line-modified">!     private static final String BREAK_Z = &quot;break 0;&quot;;</span>
<span class="line-modified">!     private static final String BREAK_S = &quot;break \&quot;hello world\&quot;;&quot;;</span>
<span class="line-modified">!     private static final String BREAK_INT_FN = &quot;break () -&gt; 0 ;&quot;;</span>
      private static final String BREAK_N = &quot;break;&quot;;
      private static final String BREAK_L = &quot;break label;&quot;;
      private static final String RETURN_Z = &quot;return 0;&quot;;
      private static final String RETURN_N = &quot;return;&quot;;
      private static final String RETURN_S = &quot;return \&quot;Hello\&quot;;&quot;;
      private static final String CONTINUE_N = &quot;continue;&quot;;
      private static final String CONTINUE_L = &quot;continue label;&quot;;
<span class="line-new-header">--- 47,16 ---</span>
      private static final String ESWITCH_S = &quot;String res_string = switch (x) { case 0 -&gt; { # } default -&gt; \&quot;default\&quot;; };&quot;;
      private static final String INT_FN_ESWITCH = &quot;java.util.function.IntSupplier r = switch (x) { case 0 -&gt; { # } default -&gt; null; };&quot;;
      private static final String INT_ESWITCH_DEFAULT = &quot;int res = switch (x) { default -&gt; { # } };&quot;;
      private static final String IF = &quot;if (cond) { # } else throw new RuntimeException();&quot;;
      private static final String BLOCK = &quot;{ # }&quot;;
<span class="line-modified">!     private static final String YIELD_Z = &quot;yield 0;&quot;;</span>
<span class="line-modified">!     private static final String YIELD_S = &quot;yield \&quot;hello world\&quot;;&quot;;</span>
<span class="line-modified">!     private static final String YIELD_INT_FN = &quot;yield () -&gt; 0 ;&quot;;</span>
      private static final String BREAK_N = &quot;break;&quot;;
      private static final String BREAK_L = &quot;break label;&quot;;
<span class="line-added">+     private static final String YIELD_L = &quot;yield label;&quot;;</span>
      private static final String RETURN_Z = &quot;return 0;&quot;;
      private static final String RETURN_N = &quot;return;&quot;;
      private static final String RETURN_S = &quot;return \&quot;Hello\&quot;;&quot;;
      private static final String CONTINUE_N = &quot;continue;&quot;;
      private static final String CONTINUE_L = &quot;continue label;&quot;;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 65,65 ***</span>
              = List.of(RUNNABLE, FOR, WHILE, DO, SSWITCH, IF, BLOCK);
      // containers that do not require exhaustiveness that are statements
      private static final List&lt;String&gt; CONTAINER_STATEMENTS
              = List.of(FOR, WHILE, DO, SSWITCH, IF, BLOCK);
  
<span class="line-modified">!     @AfterMethod</span>
<span class="line-modified">!     public void dumpTemplateIfError(ITestResult result) {</span>
<span class="line-removed">-         // Make sure offending template ends up in log file on failure</span>
<span class="line-removed">-         if (!result.isSuccess()) {</span>
<span class="line-removed">-             System.err.printf(&quot;Diagnostics: %s%nTemplate: %s%n&quot;, diags.errorKeys(), sourceFiles.stream().map(p -&gt; p.snd).collect(toList()));</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     private static String[] PREVIEW_OPTIONS = {&quot;--enable-preview&quot;, &quot;-source&quot;,</span>
<span class="line-removed">-                                                Integer.toString(Runtime.version().feature())};</span>
<span class="line-removed">- </span>
<span class="line-removed">-     private void program(String... constructs) {</span>
<span class="line-removed">-         String s = &quot;class C { static boolean cond = false; static int x = 0; void m() { # } }&quot;;</span>
<span class="line-removed">-         for (String c : constructs)</span>
<span class="line-removed">-             s = s.replace(&quot;#&quot;, c);</span>
<span class="line-removed">-         addSourceFile(&quot;C.java&quot;, new StringTemplate(s));</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     private void assertOK(String... constructs) {</span>
<span class="line-removed">-         reset();</span>
<span class="line-removed">-         addCompileOptions(PREVIEW_OPTIONS);</span>
<span class="line-removed">-         program(constructs);</span>
<span class="line-removed">-         try {</span>
<span class="line-removed">-             compile();</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         catch (IOException e) {</span>
<span class="line-removed">-             throw new RuntimeException(e);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         assertCompileSucceeded();</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     private void assertOKWithWarning(String warning, String... constructs) {</span>
<span class="line-removed">-         reset();</span>
<span class="line-removed">-         addCompileOptions(PREVIEW_OPTIONS);</span>
<span class="line-removed">-         program(constructs);</span>
<span class="line-removed">-         try {</span>
<span class="line-removed">-             compile();</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         catch (IOException e) {</span>
<span class="line-removed">-             throw new RuntimeException(e);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         assertCompileSucceededWithWarning(warning);</span>
<span class="line-removed">-     }</span>
  
<span class="line-modified">!     private void assertFail(String expectedDiag, String... constructs) {</span>
<span class="line-modified">!         reset();</span>
<span class="line-modified">!         addCompileOptions(PREVIEW_OPTIONS);</span>
<span class="line-removed">-         program(constructs);</span>
<span class="line-removed">-         try {</span>
<span class="line-removed">-             compile();</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         catch (IOException e) {</span>
<span class="line-removed">-             throw new RuntimeException(e);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         assertCompileFailed(expectedDiag);</span>
      }
  
      public void testReallySimpleCases() {
          for (String s : CONTAINERS)
              assertOK(s, NOTHING);
<span class="line-new-header">--- 67,16 ---</span>
              = List.of(RUNNABLE, FOR, WHILE, DO, SSWITCH, IF, BLOCK);
      // containers that do not require exhaustiveness that are statements
      private static final List&lt;String&gt; CONTAINER_STATEMENTS
              = List.of(FOR, WHILE, DO, SSWITCH, IF, BLOCK);
  
<span class="line-modified">!     // @@@ When expression switch becomes a permanent feature, we don&#39;t need these any more</span>
<span class="line-modified">!     private static final String SHELL = &quot;class C { static boolean cond = false; static int x = 0; void m() { # } }&quot;;</span>
  
<span class="line-modified">!     {</span>
<span class="line-modified">!         setDefaultFilename(&quot;C.java&quot;);</span>
<span class="line-modified">!         setProgramShell(SHELL);</span>
      }
  
      public void testReallySimpleCases() {
          for (String s : CONTAINERS)
              assertOK(s, NOTHING);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 134,15 ***</span>
      public void testLambda() {
          assertOK(RUNNABLE, RETURN_N);
          assertOK(RUNNABLE, NOTHING);
          assertOK(INT_FN, RETURN_Z);
          assertFail(&quot;compiler.err.break.outside.switch.loop&quot;, RUNNABLE, BREAK_N);
<span class="line-modified">!         assertFail(&quot;compiler.err.break.complex.value.no.switch.expression&quot;, RUNNABLE, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.complex.value.no.switch.expression&quot;, RUNNABLE, BREAK_S);</span>
          assertFail(&quot;compiler.err.break.outside.switch.loop&quot;, INT_FN, BREAK_N);
<span class="line-modified">!         assertFail(&quot;compiler.err.break.complex.value.no.switch.expression&quot;, INT_FN, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.complex.value.no.switch.expression&quot;, INT_FN, BREAK_S);</span>
          assertFail(&quot;compiler.err.cont.outside.loop&quot;, RUNNABLE, CONTINUE_N);
          assertFail(&quot;compiler.err.undef.label&quot;, RUNNABLE, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, RUNNABLE, CONTINUE_L);
          assertFail(&quot;compiler.err.cont.outside.loop&quot;, INT_FN, CONTINUE_N);
          assertFail(&quot;compiler.err.undef.label&quot;, INT_FN, BREAK_L);
<span class="line-new-header">--- 87,15 ---</span>
      public void testLambda() {
          assertOK(RUNNABLE, RETURN_N);
          assertOK(RUNNABLE, NOTHING);
          assertOK(INT_FN, RETURN_Z);
          assertFail(&quot;compiler.err.break.outside.switch.loop&quot;, RUNNABLE, BREAK_N);
<span class="line-modified">!         assertFail(&quot;compiler.err.no.switch.expression&quot;, RUNNABLE, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.no.switch.expression&quot;, RUNNABLE, YIELD_S);</span>
          assertFail(&quot;compiler.err.break.outside.switch.loop&quot;, INT_FN, BREAK_N);
<span class="line-modified">!         assertFail(&quot;compiler.err.no.switch.expression&quot;, INT_FN, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.no.switch.expression&quot;, INT_FN, YIELD_S);</span>
          assertFail(&quot;compiler.err.cont.outside.loop&quot;, RUNNABLE, CONTINUE_N);
          assertFail(&quot;compiler.err.undef.label&quot;, RUNNABLE, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, RUNNABLE, CONTINUE_L);
          assertFail(&quot;compiler.err.cont.outside.loop&quot;, INT_FN, CONTINUE_N);
          assertFail(&quot;compiler.err.undef.label&quot;, INT_FN, BREAK_L);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 153,96 ***</span>
          assertFail(&quot;compiler.err.undef.label&quot;, LABEL, BLOCK, INT_FN, CONTINUE_L);
      }
  
      public void testEswitch() {
          //Int-valued switch expressions
<span class="line-modified">!         assertOK(ESWITCH_Z, BREAK_Z);</span>
<span class="line-modified">!         assertOK(LABEL, BLOCK, ESWITCH_Z, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.missing.value&quot;, ESWITCH_Z, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, ESWITCH_Z, BREAK_S);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.cant.resolve.location&quot;, ESWITCH_Z, BREAK_L);</span>
          assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, BLOCK, ESWITCH_Z, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, ESWITCH_Z, CONTINUE_L);
<span class="line-modified">!         assertFail(&quot;compiler.err.cont.outside.loop&quot;, ESWITCH_Z, CONTINUE_N);</span>
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_Z, RETURN_N);
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_Z, RETURN_Z);
  
<span class="line-modified">!         assertOK(INT_ESWITCH_DEFAULT, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.missing.value&quot;, INT_ESWITCH_DEFAULT, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, INT_ESWITCH_DEFAULT, BREAK_S);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.cant.resolve.location&quot;, INT_ESWITCH_DEFAULT, BREAK_L);</span>
  
  
          // String-valued switch expressions
<span class="line-modified">!         assertOK(ESWITCH_S, BREAK_S);</span>
<span class="line-modified">!         assertOK(LABEL, BLOCK, ESWITCH_S, BREAK_S);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.missing.value&quot;, ESWITCH_S, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, ESWITCH_S, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.cant.resolve.location&quot;, ESWITCH_S, BREAK_L);</span>
          assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, BLOCK, ESWITCH_S, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, ESWITCH_S, CONTINUE_L);
<span class="line-modified">!         assertFail(&quot;compiler.err.cont.outside.loop&quot;, ESWITCH_S, CONTINUE_N);</span>
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_S, RETURN_N);
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_S, RETURN_S);
          // Function-valued switch expression
<span class="line-modified">!         assertOK(INT_FN_ESWITCH, BREAK_INT_FN);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.missing.value&quot;, INT_FN_ESWITCH, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, INT_FN_ESWITCH, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, INT_FN_ESWITCH, BREAK_S);</span>
  
<span class="line-modified">!         assertFail(&quot;compiler.err.cant.resolve.location&quot;, INT_FN_ESWITCH, BREAK_L);</span>
          assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, BLOCK, INT_FN_ESWITCH, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, INT_FN_ESWITCH, CONTINUE_L);
<span class="line-modified">!         assertFail(&quot;compiler.err.cont.outside.loop&quot;, INT_FN_ESWITCH, CONTINUE_N);</span>
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, INT_FN_ESWITCH, RETURN_N);
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, INT_FN_ESWITCH, RETURN_S);
  
      }
  
      public void testNestedInExpSwitch() {
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BREAK_Z);</span>
          //
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BLOCK,  BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BLOCK,  BREAK_Z);</span>
          //
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     IF,     IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     IF,     BLOCK,  BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BLOCK,  IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BLOCK,  BLOCK,  BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  IF,     IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  IF,     BLOCK,  BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BLOCK,  IF,     BREAK_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BLOCK,  BLOCK,  BREAK_Z);</span>
          //
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, SSWITCH, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, FOR, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, WHILE, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, DO, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.complex.value.no.switch.expression&quot;, ESWITCH_Z, INT_FN, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, SSWITCH, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, FOR, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, WHILE, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, DO, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, BLOCK, SSWITCH, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, BLOCK, FOR, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, BLOCK, WHILE, IF, BREAK_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.expr.not.immediate&quot;, ESWITCH_Z, BLOCK, DO, IF, BREAK_Z);</span>
      }
  
      public void testBreakExpressionLabelDisambiguation() {
<span class="line-modified">!         assertOK(DEF_LABEL_VAR, ESWITCH_Z, BREAK_L);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.ambiguous.target&quot;, LABEL, FOR, BLOCK, DEF_LABEL_VAR, ESWITCH_Z, BREAK_L);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.ambiguous.target&quot;, DEF_LABEL_VAR, ESWITCH_Z, LABEL, FOR, BREAK_L); //label break</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.ambiguous.target&quot;, DEF_LABEL_VAR, LABEL, BLOCK, ESWITCH_Z, BREAK_L); //expression break</span>
          //
      }
  
      public void testFunReturningSwitchExp() {
<span class="line-modified">!         assertOK(INT_FN_ESWITCH, BREAK_INT_FN);</span>
      }
  
      public void testContinueLoops() {
          assertOK(LABEL, FOR, CONTINUE_L);
          assertOK(LABEL, FOR_EACH, CONTINUE_L);
<span class="line-new-header">--- 106,98 ---</span>
          assertFail(&quot;compiler.err.undef.label&quot;, LABEL, BLOCK, INT_FN, CONTINUE_L);
      }
  
      public void testEswitch() {
          //Int-valued switch expressions
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z);</span>
<span class="line-modified">!         assertOK(LABEL, BLOCK, ESWITCH_Z, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, ESWITCH_Z, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, ESWITCH_Z, YIELD_S);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.undef.label&quot;, ESWITCH_Z, BREAK_L);</span>
          assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, BLOCK, ESWITCH_Z, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, ESWITCH_Z, CONTINUE_L);
<span class="line-modified">!         assertFail(&quot;compiler.err.continue.outside.switch.expression&quot;, ESWITCH_Z, CONTINUE_N);</span>
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_Z, RETURN_N);
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_Z, RETURN_Z);
  
<span class="line-modified">!         assertOK(INT_ESWITCH_DEFAULT, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, INT_ESWITCH_DEFAULT, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, INT_ESWITCH_DEFAULT, YIELD_S);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.undef.label&quot;, INT_ESWITCH_DEFAULT, BREAK_L);</span>
  
  
          // String-valued switch expressions
<span class="line-modified">!         assertOK(ESWITCH_S, YIELD_S);</span>
<span class="line-modified">!         assertOK(LABEL, BLOCK, ESWITCH_S, YIELD_S);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, ESWITCH_S, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, ESWITCH_S, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.undef.label&quot;, ESWITCH_S, BREAK_L);</span>
          assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, BLOCK, ESWITCH_S, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, ESWITCH_S, CONTINUE_L);
<span class="line-modified">!         assertFail(&quot;compiler.err.continue.outside.switch.expression&quot;, ESWITCH_S, CONTINUE_N);</span>
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_S, RETURN_N);
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, ESWITCH_S, RETURN_S);
          // Function-valued switch expression
<span class="line-modified">!         assertOK(INT_FN_ESWITCH, YIELD_INT_FN);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, INT_FN_ESWITCH, BREAK_N);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, INT_FN_ESWITCH, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.prob.found.req&quot;, INT_FN_ESWITCH, YIELD_S);</span>
  
<span class="line-modified">!         assertFail(&quot;compiler.err.undef.label&quot;, INT_FN_ESWITCH, BREAK_L);</span>
          assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, BLOCK, INT_FN_ESWITCH, BREAK_L);
          assertFail(&quot;compiler.err.undef.label&quot;, INT_FN_ESWITCH, CONTINUE_L);
<span class="line-modified">!         assertFail(&quot;compiler.err.continue.outside.switch.expression&quot;, INT_FN_ESWITCH, CONTINUE_N);</span>
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, INT_FN_ESWITCH, RETURN_N);
          assertFail(&quot;compiler.err.return.outside.switch.expression&quot;, INT_FN_ESWITCH, RETURN_S);
  
      }
  
      public void testNestedInExpSwitch() {
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  YIELD_Z);</span>
          //
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BLOCK,  YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BLOCK,  YIELD_Z);</span>
          //
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     IF,     IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     IF,     BLOCK,  YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BLOCK,  IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, IF,     BLOCK,  BLOCK,  YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  IF,     IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  IF,     BLOCK,  YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BLOCK,  IF,     YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, BLOCK,  BLOCK,  BLOCK,  YIELD_Z);</span>
          //
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, SSWITCH, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, FOR, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, WHILE, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, DO, YIELD_Z);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.no.switch.expression&quot;, ESWITCH_Z, INT_FN, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, SSWITCH, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, FOR, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, WHILE, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, DO, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, BLOCK, SSWITCH, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, BLOCK, FOR, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, BLOCK, WHILE, IF, YIELD_Z);</span>
<span class="line-modified">!         assertOK(ESWITCH_Z, YIELD_Z, BLOCK, DO, IF, YIELD_Z);</span>
      }
  
      public void testBreakExpressionLabelDisambiguation() {
<span class="line-modified">!         assertOK(DEF_LABEL_VAR, ESWITCH_Z, YIELD_L);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.undef.label&quot;, DEF_LABEL_VAR, ESWITCH_Z, BREAK_L);</span>
<span class="line-modified">!         assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, LABEL, FOR, BLOCK, DEF_LABEL_VAR, ESWITCH_Z, BREAK_L);</span>
<span class="line-modified">!         assertOK(DEF_LABEL_VAR, ESWITCH_Z, YIELD_Z, LABEL, FOR, BREAK_L); //label break</span>
<span class="line-added">+         assertFail(&quot;compiler.err.break.outside.switch.expression&quot;, DEF_LABEL_VAR, LABEL, BLOCK, ESWITCH_Z, BREAK_L);</span>
<span class="line-added">+         assertOK(DEF_LABEL_VAR, LABEL, BLOCK, ESWITCH_Z, YIELD_L); //expression break</span>
          //
      }
  
      public void testFunReturningSwitchExp() {
<span class="line-modified">!         assertOK(INT_FN_ESWITCH, YIELD_INT_FN);</span>
      }
  
      public void testContinueLoops() {
          assertOK(LABEL, FOR, CONTINUE_L);
          assertOK(LABEL, FOR_EACH, CONTINUE_L);
</pre>
<center><a href="../enum/EnumMembersOrder.out.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../failover/CheckAttributedTree.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>