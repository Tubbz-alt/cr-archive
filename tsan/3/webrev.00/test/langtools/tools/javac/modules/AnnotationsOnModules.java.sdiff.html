<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/langtools/tools/javac/modules/AnnotationsOnModules.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="AnnotationProcessing.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="AutomaticModules.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/tools/javac/modules/AnnotationsOnModules.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2016, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
592     @Test
593     public void testAttributeValues(Path base) throws Exception {
594         class TestCase {
595             public final String extraDecl;
596             public final String decl;
597             public final String use;
598             public final String expectedAnnotations;
599 
600             public TestCase(String extraDecl, String decl, String use, String expectedAnnotations) {
601                 this.extraDecl = extraDecl;
602                 this.decl = decl;
603                 this.use = use;
604                 this.expectedAnnotations = expectedAnnotations;
605             }
606         }
607 
608         TestCase[] testCases = new TestCase[] {
609             new TestCase(&quot;package test; public enum E {A, B;}&quot;,
610                          &quot;public E value();&quot;,
611                          &quot;test.E.A&quot;,
<span class="line-modified">612                          &quot;@test.A(test.E.A)&quot;),</span>
613             new TestCase(&quot;package test; public enum E {A, B;}&quot;,
614                          &quot;public E[] value();&quot;,
615                          &quot;{test.E.A, test.E.B}&quot;,
<span class="line-modified">616                          &quot;@test.A({test.E.A, test.E.B})&quot;),</span>
617             new TestCase(&quot;package test; public class Extra {}&quot;,
618                          &quot;public Class value();&quot;,
619                          &quot;test.Extra.class&quot;,
620                          &quot;@test.A(test.Extra.class)&quot;),
621             new TestCase(&quot;package test; public class Extra {}&quot;,
622                          &quot;public Class[] value();&quot;,
623                          &quot;{test.Extra.class, String.class}&quot;,
624                          &quot;@test.A({test.Extra.class, java.lang.String.class})&quot;),
625             new TestCase(&quot;package test; public @interface Extra { public Class value(); }&quot;,
626                          &quot;public test.Extra value();&quot;,
627                          &quot;@test.Extra(String.class)&quot;,
628                          &quot;@test.A(@test.Extra(java.lang.String.class))&quot;),
629             new TestCase(&quot;package test; public @interface Extra { public Class value(); }&quot;,
630                          &quot;public test.Extra[] value();&quot;,
631                          &quot;{@test.Extra(String.class), @test.Extra(Integer.class)}&quot;,
632                          &quot;@test.A({@test.Extra(java.lang.String.class), @test.Extra(java.lang.Integer.class)})&quot;),
633             new TestCase(&quot;package test; public class Any { }&quot;,
634                          &quot;public int value();&quot;,
635                          &quot;1&quot;,
636                          &quot;@test.A(1)&quot;),
637             new TestCase(&quot;package test; public class Any { }&quot;,
638                          &quot;public int[] value();&quot;,
639                          &quot;{1, 2}&quot;,
640                          &quot;@test.A({1, 2})&quot;),
641             new TestCase(&quot;package test; public enum E {A;}&quot;,
642                         &quot;int integer(); boolean flag(); double value(); String string(); E enumeration(); &quot;,
643                         &quot;enumeration = test.E.A, integer = 42, flag = true, value = 3.5, string = \&quot;Text\&quot;&quot;,
<span class="line-modified">644                         &quot;@test.A(enumeration=test.E.A, integer=42, flag=true, value=3.5, string=\&quot;Text\&quot;)&quot;),</span>
645         };
646 
647         Path extraSrc = base.resolve(&quot;extra-src&quot;);
648         tb.writeJavaFiles(extraSrc,
649                           &quot;class Any {}&quot;);
650 
651         int count = 0;
652 
653         for (TestCase tc : testCases) {
654             Path testBase = base.resolve(String.valueOf(count));
655             Path moduleSrc = testBase.resolve(&quot;module-src&quot;);
656             Path m = moduleSrc.resolve(&quot;m&quot;);
657 
658             tb.writeJavaFiles(m,
659                               &quot;@test.A(&quot; + tc.use + &quot;) module m { }&quot;,
660                               &quot;package test; @java.lang.annotation.Target(java.lang.annotation.ElementType.MODULE) public @interface A { &quot; + tc.decl + &quot;}&quot;,
661                               tc.extraDecl);
662 
663             Path modulePath = testBase.resolve(&quot;module-path&quot;);
664 
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
592     @Test
593     public void testAttributeValues(Path base) throws Exception {
594         class TestCase {
595             public final String extraDecl;
596             public final String decl;
597             public final String use;
598             public final String expectedAnnotations;
599 
600             public TestCase(String extraDecl, String decl, String use, String expectedAnnotations) {
601                 this.extraDecl = extraDecl;
602                 this.decl = decl;
603                 this.use = use;
604                 this.expectedAnnotations = expectedAnnotations;
605             }
606         }
607 
608         TestCase[] testCases = new TestCase[] {
609             new TestCase(&quot;package test; public enum E {A, B;}&quot;,
610                          &quot;public E value();&quot;,
611                          &quot;test.E.A&quot;,
<span class="line-modified">612                          &quot;@test.A(A)&quot;),</span>
613             new TestCase(&quot;package test; public enum E {A, B;}&quot;,
614                          &quot;public E[] value();&quot;,
615                          &quot;{test.E.A, test.E.B}&quot;,
<span class="line-modified">616                          &quot;@test.A({A, B})&quot;),</span>
617             new TestCase(&quot;package test; public class Extra {}&quot;,
618                          &quot;public Class value();&quot;,
619                          &quot;test.Extra.class&quot;,
620                          &quot;@test.A(test.Extra.class)&quot;),
621             new TestCase(&quot;package test; public class Extra {}&quot;,
622                          &quot;public Class[] value();&quot;,
623                          &quot;{test.Extra.class, String.class}&quot;,
624                          &quot;@test.A({test.Extra.class, java.lang.String.class})&quot;),
625             new TestCase(&quot;package test; public @interface Extra { public Class value(); }&quot;,
626                          &quot;public test.Extra value();&quot;,
627                          &quot;@test.Extra(String.class)&quot;,
628                          &quot;@test.A(@test.Extra(java.lang.String.class))&quot;),
629             new TestCase(&quot;package test; public @interface Extra { public Class value(); }&quot;,
630                          &quot;public test.Extra[] value();&quot;,
631                          &quot;{@test.Extra(String.class), @test.Extra(Integer.class)}&quot;,
632                          &quot;@test.A({@test.Extra(java.lang.String.class), @test.Extra(java.lang.Integer.class)})&quot;),
633             new TestCase(&quot;package test; public class Any { }&quot;,
634                          &quot;public int value();&quot;,
635                          &quot;1&quot;,
636                          &quot;@test.A(1)&quot;),
637             new TestCase(&quot;package test; public class Any { }&quot;,
638                          &quot;public int[] value();&quot;,
639                          &quot;{1, 2}&quot;,
640                          &quot;@test.A({1, 2})&quot;),
641             new TestCase(&quot;package test; public enum E {A;}&quot;,
642                         &quot;int integer(); boolean flag(); double value(); String string(); E enumeration(); &quot;,
643                         &quot;enumeration = test.E.A, integer = 42, flag = true, value = 3.5, string = \&quot;Text\&quot;&quot;,
<span class="line-modified">644                         &quot;@test.A(enumeration=A, integer=42, flag=true, value=3.5, string=\&quot;Text\&quot;)&quot;),</span>
645         };
646 
647         Path extraSrc = base.resolve(&quot;extra-src&quot;);
648         tb.writeJavaFiles(extraSrc,
649                           &quot;class Any {}&quot;);
650 
651         int count = 0;
652 
653         for (TestCase tc : testCases) {
654             Path testBase = base.resolve(String.valueOf(count));
655             Path moduleSrc = testBase.resolve(&quot;module-src&quot;);
656             Path m = moduleSrc.resolve(&quot;m&quot;);
657 
658             tb.writeJavaFiles(m,
659                               &quot;@test.A(&quot; + tc.use + &quot;) module m { }&quot;,
660                               &quot;package test; @java.lang.annotation.Target(java.lang.annotation.ElementType.MODULE) public @interface A { &quot; + tc.decl + &quot;}&quot;,
661                               tc.extraDecl);
662 
663             Path modulePath = testBase.resolve(&quot;module-path&quot;);
664 
</pre>
</td>
</tr>
</table>
<center><a href="AnnotationProcessing.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="AutomaticModules.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>