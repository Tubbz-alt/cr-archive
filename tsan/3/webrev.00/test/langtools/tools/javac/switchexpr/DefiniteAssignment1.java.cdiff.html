<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/langtools/tools/javac/switchexpr/DefiniteAssignment1.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="CRT.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="DefiniteAssignment2.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/tools/javac/switchexpr/DefiniteAssignment1.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 21,26 ***</span>
   * questions.
   */
  
  /**
   * @test
<span class="line-modified">!  * @bug 8214031</span>
   * @summary Verify that definite assignment when true works (legal code)
<span class="line-modified">!  * @compile --enable-preview --source ${jdk.version} DefiniteAssignment1.java</span>
<span class="line-modified">!  * @run main/othervm --enable-preview DefiniteAssignment1</span>
   */
  public class DefiniteAssignment1 {
      public static void main(String[] args) {
          int a = 0;
          boolean b = true;
  
          {
          int x;
  
          boolean t1 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 21,26 ---</span>
   * questions.
   */
  
  /**
   * @test
<span class="line-modified">!  * @bug 8214031 8221413</span>
   * @summary Verify that definite assignment when true works (legal code)
<span class="line-modified">!  * @compile DefiniteAssignment1.java</span>
<span class="line-modified">!  * @run main DefiniteAssignment1</span>
   */
  public class DefiniteAssignment1 {
      public static void main(String[] args) {
          int a = 0;
          boolean b = true;
  
          {
          int x;
  
          boolean t1 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 48,12 ***</span>
  
          {
          int x;
  
          boolean t1 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 48,12 ---</span>
  
          {
          int x;
  
          boolean t1 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 61,12 ***</span>
  
          {
          int x;
  
          boolean t1a = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1a) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 61,12 ---</span>
  
          {
          int x;
  
          boolean t1a = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1a) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 74,12 ***</span>
  
          {
          int x;
  
          boolean t1b = (switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1b) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 74,12 ---</span>
  
          {
          int x;
  
          boolean t1b = (switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t1b) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 87,12 ***</span>
  
          {
          int x;
  
          boolean t2 = !(b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) || x == 1;
  
          if (!t2) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 87,12 ---</span>
  
          {
          int x;
  
          boolean t2 = !(b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) || x == 1;
  
          if (!t2) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 100,12 ***</span>
  
          {
          int x;
  
          boolean t2 = !(b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) || x == 1;
  
          if (!t2) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 100,12 ---</span>
  
          {
          int x;
  
          boolean t2 = !(b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) || x == 1;
  
          if (!t2) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 113,12 ***</span>
  
          {
          int x;
  
          boolean t3 = !(switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) || x == 2;
  
          if (t3) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 113,12 ---</span>
  
          {
          int x;
  
          boolean t3 = !(switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) || x == 2;
  
          if (t3) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 126,12 ***</span>
  
          {
          int x;
  
          boolean t3 = !(switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) || x == 2;
  
          if (t3) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 126,12 ---</span>
  
          {
          int x;
  
          boolean t3 = !(switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) || x == 2;
  
          if (t3) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 139,11 ***</span>
  
          {
          int x;
  
          boolean t4 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || true;</span>
              default: throw new IllegalStateException();
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t4) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
<span class="line-new-header">--- 139,11 ---</span>
  
          {
          int x;
  
          boolean t4 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || true;</span>
              default: throw new IllegalStateException();
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t4) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 153,11 ***</span>
  
          {
          int x;
  
          boolean t4 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: break (x = 1) == 1 || isTrue();</span>
              default: throw new IllegalStateException();
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t4) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
<span class="line-new-header">--- 153,11 ---</span>
  
          {
          int x;
  
          boolean t4 = (b &amp;&amp; switch(a) {
<span class="line-modified">!             case 0: yield (x = 1) == 1 || isTrue();</span>
              default: throw new IllegalStateException();
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t4) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 168,12 ***</span>
          int x;
  
          String s = &quot;a&quot;;
  
          boolean t5 = (switch(s) {
<span class="line-modified">!             case &quot;a&quot;: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t5) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 168,12 ---</span>
          int x;
  
          String s = &quot;a&quot;;
  
          boolean t5 = (switch(s) {
<span class="line-modified">!             case &quot;a&quot;: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t5) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 183,12 ***</span>
          int x;
  
          String s = &quot;a&quot;;
  
          boolean t5 = (switch(s) {
<span class="line-modified">!             case &quot;a&quot;: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t5) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 183,12 ---</span>
          int x;
  
          String s = &quot;a&quot;;
  
          boolean t5 = (switch(s) {
<span class="line-modified">!             case &quot;a&quot;: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t5) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 197,12 ***</span>
          {
          int x;
          E e = E.B;
  
          boolean t6 = (switch(e) {
<span class="line-modified">!             case B: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t6) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 197,12 ---</span>
          {
          int x;
          E e = E.B;
  
          boolean t6 = (switch(e) {
<span class="line-modified">!             case B: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t6) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 211,12 ***</span>
          {
          int x;
          E e = E.B;
  
          boolean t6 = (switch(e) {
<span class="line-modified">!             case B: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t6) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 211,12 ---</span>
          {
          int x;
          E e = E.B;
  
          boolean t6 = (switch(e) {
<span class="line-modified">!             case B: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t6) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 249,13 ***</span>
          {
          int x;
          E e = E.B;
  
          boolean t8 = (switch(e) {
<span class="line-modified">!             case A: x = 1; break true;</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t8) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 249,13 ---</span>
          {
          int x;
          E e = E.B;
  
          boolean t8 = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield true;</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t8) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 264,13 ***</span>
          {
          int x;
          E e = E.B;
  
          boolean t8 = (switch(e) {
<span class="line-modified">!             case A: x = 1; break isTrue();</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t8) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 264,13 ---</span>
          {
          int x;
          E e = E.B;
  
          boolean t8 = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield isTrue();</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t8) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 279,13 ***</span>
          {
          int x;
          E e = E.A;
  
          boolean t9 = (switch(e) {
<span class="line-modified">!             case A: x = 1; break true;</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t9) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 279,13 ---</span>
          {
          int x;
          E e = E.A;
  
          boolean t9 = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield true;</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t9) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 294,13 ***</span>
          {
          int x;
          E e = E.A;
  
          boolean t9 = (switch(e) {
<span class="line-modified">!             case A: x = 1; break isTrue();</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t9) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 294,13 ---</span>
          {
          int x;
          E e = E.A;
  
          boolean t9 = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield isTrue();</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!t9) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 309,13 ***</span>
          {
          int x;
          E e = E.C;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: x = 1; break true;</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 309,13 ---</span>
          {
          int x;
          E e = E.C;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield true;</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 324,13 ***</span>
          {
          int x;
          E e = E.C;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: x = 1; break isTrue();</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 324,13 ---</span>
          {
          int x;
          E e = E.C;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield isTrue();</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 339,13 ***</span>
          {
          final int x;
          E e = E.C;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: x = 1; break true;</span>
<span class="line-modified">!             case B: break (x = 2) == 2 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) || (x = 3) == 3; //x is definitelly unassigned here
  
          if (x != 3) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 339,13 ---</span>
          {
          final int x;
          E e = E.C;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: x = 1; yield true;</span>
<span class="line-modified">!             case B: yield (x = 2) == 2 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) || (x = 3) == 3; //x is definitelly unassigned here
  
          if (x != 3) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 354,13 ***</span>
          {
          int x;
          E e = E.A;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: break isTrue() &amp;&amp; (x = 1) == 1;</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 354,13 ---</span>
          {
          int x;
          E e = E.A;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: yield isTrue() &amp;&amp; (x = 1) == 1;</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 369,13 ***</span>
          {
          int x;
          E e = E.A;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: break isTrue() &amp;&amp; e != E.C ? (x = 1) == 1 &amp;&amp; e != E.B : false;</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 369,13 ---</span>
          {
          int x;
          E e = E.A;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: yield isTrue() &amp;&amp; e != E.C ? (x = 1) == 1 &amp;&amp; e != E.B : false;</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || true;</span>
<span class="line-modified">!             default: yield false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 384,13 ***</span>
          {
          int x;
          E e = E.A;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: break isTrue() &amp;&amp; e != E.C ? (x = 1) == 1 &amp;&amp; e != E.B : false;</span>
<span class="line-modified">!             case B: break (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: break false;</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
<span class="line-new-header">--- 384,43 ---</span>
          {
          int x;
          E e = E.A;
  
          boolean tA = (switch(e) {
<span class="line-modified">!             case A: yield isTrue() &amp;&amp; e != E.C ? (x = 1) == 1 &amp;&amp; e != E.B : false;</span>
<span class="line-modified">!             case B: yield (x = 1) == 1 || isTrue();</span>
<span class="line-modified">!             default: yield false;</span>
<span class="line-added">+         }) &amp;&amp; x == 1; //x is definitelly assigned here</span>
<span class="line-added">+ </span>
<span class="line-added">+         if (!tA) {</span>
<span class="line-added">+             throw new IllegalStateException(&quot;Unexpected result.&quot;);</span>
<span class="line-added">+         }</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         { //JDK-8221413: definite assignment for implicit default in switch expressions</span>
<span class="line-added">+         int x;</span>
<span class="line-added">+         E e = E.A;</span>
<span class="line-added">+ </span>
<span class="line-added">+         int v = (switch(e) {</span>
<span class="line-added">+             case A -&gt; x = 0;</span>
<span class="line-added">+             case B -&gt; x = 0;</span>
<span class="line-added">+             case C -&gt; x = 0;</span>
<span class="line-added">+         });</span>
<span class="line-added">+ </span>
<span class="line-added">+         if (x != 0 || v != 0) {</span>
<span class="line-added">+             throw new IllegalStateException(&quot;Unexpected result.&quot;);</span>
<span class="line-added">+         }</span>
<span class="line-added">+         }</span>
<span class="line-added">+ </span>
<span class="line-added">+         { //JDK-8221413: definite assignment for implicit default in switch expressions</span>
<span class="line-added">+         int x;</span>
<span class="line-added">+         E e = E.A;</span>
<span class="line-added">+ </span>
<span class="line-added">+         boolean tA = (switch(e) {</span>
<span class="line-added">+             case A -&gt; { x = 1; yield true; }</span>
<span class="line-added">+             case B -&gt; { x = 1; yield true; }</span>
<span class="line-added">+             case C -&gt; { x = 1; yield true; }</span>
          }) &amp;&amp; x == 1; //x is definitelly assigned here
  
          if (!tA) {
              throw new IllegalStateException(&quot;Unexpected result.&quot;);
          }
</pre>
<center><a href="CRT.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="DefiniteAssignment2.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>