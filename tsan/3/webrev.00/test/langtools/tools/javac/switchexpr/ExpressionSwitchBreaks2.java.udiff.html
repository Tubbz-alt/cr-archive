<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/langtools/tools/javac/switchexpr/ExpressionSwitchBreaks2.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="ExpressionSwitchBreaks1.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ExpressionSwitchBreaks2.out.udiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/tools/javac/switchexpr/ExpressionSwitchBreaks2.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,51 +1,53 @@</span>
  /*
   * @test /nodynamiccopyright/
   * @bug 8206986
   * @summary Check behavior for invalid breaks.
<span class="udiff-line-modified-removed">-  * @compile/fail/ref=ExpressionSwitchBreaks2.out -XDrawDiagnostics --enable-preview -source ${jdk.version} ExpressionSwitchBreaks2.java</span>
<span class="udiff-line-modified-added">+  * @compile/fail/ref=ExpressionSwitchBreaks2.out -XDrawDiagnostics ExpressionSwitchBreaks2.java</span>
   */
  
  public class ExpressionSwitchBreaks2 {
      private String print(int i, int j) {
          LOOP: while (true) {
          OUTER: switch (i) {
              case 0:
                  return switch (j) {
                      case 0:
<span class="udiff-line-modified-removed">-                         break &quot;0-0&quot;;</span>
<span class="udiff-line-modified-added">+                         yield &quot;0-0&quot;;</span>
                      case 1:
                          break ; //error: missing value
                      case 2:
                          break OUTER; //error: jumping outside of the switch expression
                      case 3: {
                          int x = -1;
                          x: switch (i + j) {
<span class="udiff-line-modified-removed">-                             case 0: break x; //error: cannot disambiguate, wrong type as well</span>
<span class="udiff-line-modified-added">+                             case 0: break x;</span>
                          }
<span class="udiff-line-modified-removed">-                         break &quot;X&quot;;</span>
<span class="udiff-line-modified-added">+                         yield &quot;X&quot;;</span>
                      }
                      case 4: return &quot;X&quot;; //error: no returns from inside of the switch expression
                      case 5: continue;   //error: no continue out of the switch expression
                      case 6: continue LOOP; //error: dtto, but with a label
                      case 7: continue UNKNOWN; //error: unknown label
                      default: {
                          String x = &quot;X&quot;;
                          x: switch (i + j) {
<span class="udiff-line-modified-removed">-                             case 0: break &quot;&quot;; //error: cannot break from switch expression that is not immediatelly enclosing</span>
<span class="udiff-line-modified-added">+                             case 0: yield &quot;&quot;; //error: cannot yield from switch expression that is not immediatelly enclosing</span>
                          }
<span class="udiff-line-modified-removed">-                         break &quot;X&quot;;</span>
<span class="udiff-line-modified-added">+                         yield &quot;X&quot;;</span>
                      }
                  };
              case 1:
<span class="udiff-line-modified-removed">-                 break &quot;1&quot; + undef; //error: complex value and no switch expression</span>
<span class="udiff-line-modified-added">+                 yield &quot;1&quot; + undef; //error: complex value and no switch expression</span>
          }
          }
          j: print(switch (i) {
<span class="udiff-line-modified-removed">-             default: break j; //error: &quot;j&quot; is ambiguous (expression/label)</span>
<span class="udiff-line-modified-added">+             case 0: yield 0;</span>
<span class="udiff-line-added">+             default: break j;</span>
          }, 0);
          j2: print(switch (i) {
<span class="udiff-line-added">+             case 0: yield 0;</span>
              default: break j2;
          }, 0);
          return null;
      }
  
</pre>
<center><a href="ExpressionSwitchBreaks1.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ExpressionSwitchBreaks2.out.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>