<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/langtools/tools/javac/switchexpr/ExpressionSwitchBreaks2.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="ExpressionSwitchBreaks1.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ExpressionSwitchBreaks2.out.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/tools/javac/switchexpr/ExpressionSwitchBreaks2.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 1 /*
 2  * @test /nodynamiccopyright/
 3  * @bug 8206986
 4  * @summary Check behavior for invalid breaks.
<span class="line-modified"> 5  * @compile/fail/ref=ExpressionSwitchBreaks2.out -XDrawDiagnostics --enable-preview -source ${jdk.version} ExpressionSwitchBreaks2.java</span>
 6  */
 7 
 8 public class ExpressionSwitchBreaks2 {
 9     private String print(int i, int j) {
10         LOOP: while (true) {
11         OUTER: switch (i) {
12             case 0:
13                 return switch (j) {
14                     case 0:
<span class="line-modified">15                         break &quot;0-0&quot;;</span>
16                     case 1:
17                         break ; //error: missing value
18                     case 2:
19                         break OUTER; //error: jumping outside of the switch expression
20                     case 3: {
21                         int x = -1;
22                         x: switch (i + j) {
<span class="line-modified">23                             case 0: break x; //error: cannot disambiguate, wrong type as well</span>
24                         }
<span class="line-modified">25                         break &quot;X&quot;;</span>
26                     }
27                     case 4: return &quot;X&quot;; //error: no returns from inside of the switch expression
28                     case 5: continue;   //error: no continue out of the switch expression
29                     case 6: continue LOOP; //error: dtto, but with a label
30                     case 7: continue UNKNOWN; //error: unknown label
31                     default: {
32                         String x = &quot;X&quot;;
33                         x: switch (i + j) {
<span class="line-modified">34                             case 0: break &quot;&quot;; //error: cannot break from switch expression that is not immediatelly enclosing</span>
35                         }
<span class="line-modified">36                         break &quot;X&quot;;</span>
37                     }
38                 };
39             case 1:
<span class="line-modified">40                 break &quot;1&quot; + undef; //error: complex value and no switch expression</span>
41         }
42         }
43         j: print(switch (i) {
<span class="line-modified">44             default: break j; //error: &quot;j&quot; is ambiguous (expression/label)</span>

45         }, 0);
46         j2: print(switch (i) {

47             default: break j2;
48         }, 0);
49         return null;
50     }
51 
52 }
</pre>
</td>
<td>
<hr />
<pre>
 1 /*
 2  * @test /nodynamiccopyright/
 3  * @bug 8206986
 4  * @summary Check behavior for invalid breaks.
<span class="line-modified"> 5  * @compile/fail/ref=ExpressionSwitchBreaks2.out -XDrawDiagnostics ExpressionSwitchBreaks2.java</span>
 6  */
 7 
 8 public class ExpressionSwitchBreaks2 {
 9     private String print(int i, int j) {
10         LOOP: while (true) {
11         OUTER: switch (i) {
12             case 0:
13                 return switch (j) {
14                     case 0:
<span class="line-modified">15                         yield &quot;0-0&quot;;</span>
16                     case 1:
17                         break ; //error: missing value
18                     case 2:
19                         break OUTER; //error: jumping outside of the switch expression
20                     case 3: {
21                         int x = -1;
22                         x: switch (i + j) {
<span class="line-modified">23                             case 0: break x;</span>
24                         }
<span class="line-modified">25                         yield &quot;X&quot;;</span>
26                     }
27                     case 4: return &quot;X&quot;; //error: no returns from inside of the switch expression
28                     case 5: continue;   //error: no continue out of the switch expression
29                     case 6: continue LOOP; //error: dtto, but with a label
30                     case 7: continue UNKNOWN; //error: unknown label
31                     default: {
32                         String x = &quot;X&quot;;
33                         x: switch (i + j) {
<span class="line-modified">34                             case 0: yield &quot;&quot;; //error: cannot yield from switch expression that is not immediatelly enclosing</span>
35                         }
<span class="line-modified">36                         yield &quot;X&quot;;</span>
37                     }
38                 };
39             case 1:
<span class="line-modified">40                 yield &quot;1&quot; + undef; //error: complex value and no switch expression</span>
41         }
42         }
43         j: print(switch (i) {
<span class="line-modified">44             case 0: yield 0;</span>
<span class="line-added">45             default: break j;</span>
46         }, 0);
47         j2: print(switch (i) {
<span class="line-added">48             case 0: yield 0;</span>
49             default: break j2;
50         }, 0);
51         return null;
52     }
53 
54 }
</pre>
</td>
</tr>
</table>
<center><a href="ExpressionSwitchBreaks1.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="ExpressionSwitchBreaks2.out.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>