diff a/test/langtools/tools/javac/switchexpr/DefiniteAssignment1.java b/test/langtools/tools/javac/switchexpr/DefiniteAssignment1.java
--- a/test/langtools/tools/javac/switchexpr/DefiniteAssignment1.java
+++ b/test/langtools/tools/javac/switchexpr/DefiniteAssignment1.java
@@ -21,26 +21,26 @@
  * questions.
  */
 
 /**
  * @test
- * @bug 8214031
+ * @bug 8214031 8221413
  * @summary Verify that definite assignment when true works (legal code)
- * @compile --enable-preview --source ${jdk.version} DefiniteAssignment1.java
- * @run main/othervm --enable-preview DefiniteAssignment1
+ * @compile DefiniteAssignment1.java
+ * @run main DefiniteAssignment1
  */
 public class DefiniteAssignment1 {
     public static void main(String[] args) {
         int a = 0;
         boolean b = true;
 
         {
         int x;
 
         boolean t1 = (b && switch(a) {
-            case 0: break (x = 1) == 1 || true;
-            default: break false;
+            case 0: yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t1) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -48,12 +48,12 @@
 
         {
         int x;
 
         boolean t1 = (b && switch(a) {
-            case 0: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case 0: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t1) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -61,12 +61,12 @@
 
         {
         int x;
 
         boolean t1a = (b && switch(a) {
-            case 0: break (x = 1) == 1;
-            default: break false;
+            case 0: yield (x = 1) == 1;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t1a) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -74,12 +74,12 @@
 
         {
         int x;
 
         boolean t1b = (switch(a) {
-            case 0: break (x = 1) == 1;
-            default: break false;
+            case 0: yield (x = 1) == 1;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t1b) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -87,12 +87,12 @@
 
         {
         int x;
 
         boolean t2 = !(b && switch(a) {
-            case 0: break (x = 1) == 1 || true;
-            default: break false;
+            case 0: yield (x = 1) == 1 || true;
+            default: yield false;
         }) || x == 1;
 
         if (!t2) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -100,12 +100,12 @@
 
         {
         int x;
 
         boolean t2 = !(b && switch(a) {
-            case 0: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case 0: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) || x == 1;
 
         if (!t2) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -113,12 +113,12 @@
 
         {
         int x;
 
         boolean t3 = !(switch(a) {
-            case 0: break (x = 1) == 1 || true;
-            default: break false;
+            case 0: yield (x = 1) == 1 || true;
+            default: yield false;
         }) || x == 2;
 
         if (t3) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -126,12 +126,12 @@
 
         {
         int x;
 
         boolean t3 = !(switch(a) {
-            case 0: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case 0: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) || x == 2;
 
         if (t3) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -139,11 +139,11 @@
 
         {
         int x;
 
         boolean t4 = (b && switch(a) {
-            case 0: break (x = 1) == 1 || true;
+            case 0: yield (x = 1) == 1 || true;
             default: throw new IllegalStateException();
         }) && x == 1; //x is definitelly assigned here
 
         if (!t4) {
             throw new IllegalStateException("Unexpected result.");
@@ -153,11 +153,11 @@
 
         {
         int x;
 
         boolean t4 = (b && switch(a) {
-            case 0: break (x = 1) == 1 || isTrue();
+            case 0: yield (x = 1) == 1 || isTrue();
             default: throw new IllegalStateException();
         }) && x == 1; //x is definitelly assigned here
 
         if (!t4) {
             throw new IllegalStateException("Unexpected result.");
@@ -168,12 +168,12 @@
         int x;
 
         String s = "a";
 
         boolean t5 = (switch(s) {
-            case "a": break (x = 1) == 1 || true;
-            default: break false;
+            case "a": yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t5) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -183,12 +183,12 @@
         int x;
 
         String s = "a";
 
         boolean t5 = (switch(s) {
-            case "a": break (x = 1) == 1 || isTrue();
-            default: break false;
+            case "a": yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t5) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -197,12 +197,12 @@
         {
         int x;
         E e = E.B;
 
         boolean t6 = (switch(e) {
-            case B: break (x = 1) == 1 || true;
-            default: break false;
+            case B: yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t6) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -211,12 +211,12 @@
         {
         int x;
         E e = E.B;
 
         boolean t6 = (switch(e) {
-            case B: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case B: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t6) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -249,13 +249,13 @@
         {
         int x;
         E e = E.B;
 
         boolean t8 = (switch(e) {
-            case A: x = 1; break true;
-            case B: break (x = 1) == 1 || true;
-            default: break false;
+            case A: x = 1; yield true;
+            case B: yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t8) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -264,13 +264,13 @@
         {
         int x;
         E e = E.B;
 
         boolean t8 = (switch(e) {
-            case A: x = 1; break isTrue();
-            case B: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case A: x = 1; yield isTrue();
+            case B: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t8) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -279,13 +279,13 @@
         {
         int x;
         E e = E.A;
 
         boolean t9 = (switch(e) {
-            case A: x = 1; break true;
-            case B: break (x = 1) == 1 || true;
-            default: break false;
+            case A: x = 1; yield true;
+            case B: yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t9) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -294,13 +294,13 @@
         {
         int x;
         E e = E.A;
 
         boolean t9 = (switch(e) {
-            case A: x = 1; break isTrue();
-            case B: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case A: x = 1; yield isTrue();
+            case B: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!t9) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -309,13 +309,13 @@
         {
         int x;
         E e = E.C;
 
         boolean tA = (switch(e) {
-            case A: x = 1; break true;
-            case B: break (x = 1) == 1 || true;
-            default: break false;
+            case A: x = 1; yield true;
+            case B: yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (tA) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -324,13 +324,13 @@
         {
         int x;
         E e = E.C;
 
         boolean tA = (switch(e) {
-            case A: x = 1; break isTrue();
-            case B: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case A: x = 1; yield isTrue();
+            case B: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (tA) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -339,13 +339,13 @@
         {
         final int x;
         E e = E.C;
 
         boolean tA = (switch(e) {
-            case A: x = 1; break true;
-            case B: break (x = 2) == 2 || true;
-            default: break false;
+            case A: x = 1; yield true;
+            case B: yield (x = 2) == 2 || true;
+            default: yield false;
         }) || (x = 3) == 3; //x is definitelly unassigned here
 
         if (x != 3) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -354,13 +354,13 @@
         {
         int x;
         E e = E.A;
 
         boolean tA = (switch(e) {
-            case A: break isTrue() && (x = 1) == 1;
-            case B: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case A: yield isTrue() && (x = 1) == 1;
+            case B: yield (x = 1) == 1 || isTrue();
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!tA) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -369,13 +369,13 @@
         {
         int x;
         E e = E.A;
 
         boolean tA = (switch(e) {
-            case A: break isTrue() && e != E.C ? (x = 1) == 1 && e != E.B : false;
-            case B: break (x = 1) == 1 || true;
-            default: break false;
+            case A: yield isTrue() && e != E.C ? (x = 1) == 1 && e != E.B : false;
+            case B: yield (x = 1) == 1 || true;
+            default: yield false;
         }) && x == 1; //x is definitelly assigned here
 
         if (!tA) {
             throw new IllegalStateException("Unexpected result.");
         }
@@ -384,13 +384,43 @@
         {
         int x;
         E e = E.A;
 
         boolean tA = (switch(e) {
-            case A: break isTrue() && e != E.C ? (x = 1) == 1 && e != E.B : false;
-            case B: break (x = 1) == 1 || isTrue();
-            default: break false;
+            case A: yield isTrue() && e != E.C ? (x = 1) == 1 && e != E.B : false;
+            case B: yield (x = 1) == 1 || isTrue();
+            default: yield false;
+        }) && x == 1; //x is definitelly assigned here
+
+        if (!tA) {
+            throw new IllegalStateException("Unexpected result.");
+        }
+        }
+
+        { //JDK-8221413: definite assignment for implicit default in switch expressions
+        int x;
+        E e = E.A;
+
+        int v = (switch(e) {
+            case A -> x = 0;
+            case B -> x = 0;
+            case C -> x = 0;
+        });
+
+        if (x != 0 || v != 0) {
+            throw new IllegalStateException("Unexpected result.");
+        }
+        }
+
+        { //JDK-8221413: definite assignment for implicit default in switch expressions
+        int x;
+        E e = E.A;
+
+        boolean tA = (switch(e) {
+            case A -> { x = 1; yield true; }
+            case B -> { x = 1; yield true; }
+            case C -> { x = 1; yield true; }
         }) && x == 1; //x is definitelly assigned here
 
         if (!tA) {
             throw new IllegalStateException("Unexpected result.");
         }
