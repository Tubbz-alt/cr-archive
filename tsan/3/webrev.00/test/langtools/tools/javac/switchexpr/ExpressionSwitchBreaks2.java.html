<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/langtools/tools/javac/switchexpr/ExpressionSwitchBreaks2.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * @test /nodynamiccopyright/
 3  * @bug 8206986
 4  * @summary Check behavior for invalid breaks.
 5  * @compile/fail/ref=ExpressionSwitchBreaks2.out -XDrawDiagnostics ExpressionSwitchBreaks2.java
 6  */
 7 
 8 public class ExpressionSwitchBreaks2 {
 9     private String print(int i, int j) {
10         LOOP: while (true) {
11         OUTER: switch (i) {
12             case 0:
13                 return switch (j) {
14                     case 0:
15                         yield &quot;0-0&quot;;
16                     case 1:
17                         break ; //error: missing value
18                     case 2:
19                         break OUTER; //error: jumping outside of the switch expression
20                     case 3: {
21                         int x = -1;
22                         x: switch (i + j) {
23                             case 0: break x;
24                         }
25                         yield &quot;X&quot;;
26                     }
27                     case 4: return &quot;X&quot;; //error: no returns from inside of the switch expression
28                     case 5: continue;   //error: no continue out of the switch expression
29                     case 6: continue LOOP; //error: dtto, but with a label
30                     case 7: continue UNKNOWN; //error: unknown label
31                     default: {
32                         String x = &quot;X&quot;;
33                         x: switch (i + j) {
34                             case 0: yield &quot;&quot;; //error: cannot yield from switch expression that is not immediatelly enclosing
35                         }
36                         yield &quot;X&quot;;
37                     }
38                 };
39             case 1:
40                 yield &quot;1&quot; + undef; //error: complex value and no switch expression
41         }
42         }
43         j: print(switch (i) {
44             case 0: yield 0;
45             default: break j;
46         }, 0);
47         j2: print(switch (i) {
48             case 0: yield 0;
49             default: break j2;
50         }, 0);
51         return null;
52     }
53 
54 }
    </pre>
  </body>
</html>