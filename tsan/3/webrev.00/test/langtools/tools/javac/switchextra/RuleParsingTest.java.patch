diff a/test/langtools/tools/javac/switchextra/RuleParsingTest.java b/test/langtools/tools/javac/switchextra/RuleParsingTest.java
--- a/test/langtools/tools/javac/switchextra/RuleParsingTest.java
+++ b/test/langtools/tools/javac/switchextra/RuleParsingTest.java
@@ -93,11 +93,11 @@
         assert tool != null;
         DiagnosticListener<JavaFileObject> noErrors = d -> { throw new AssertionError(d.getMessage(null)); };
 
         StringWriter out = new StringWriter();
         JavacTask ct = (JavacTask) tool.getTask(out, null, noErrors,
-            List.of("--enable-preview", "-source", sourceVersion), null,
+            List.of(), null,
             Arrays.asList(new MyFileObject(code.toString())));
         CompilationUnitTree cut = ct.parse().iterator().next();
         Trees trees = Trees.instance(ct);
         new TreePathScanner<Void, Void>() {
             @Override
