<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/langtools/tools/javac/annotations/repeatingAnnotations/combo/ReflectionTest.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../NoTargetOnContainer2.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="TargetAnnoCombo.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/tools/javac/annotations/repeatingAnnotations/combo/ReflectionTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2013, 2016, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
</pre>
<hr />
<pre>
 176                     error(&quot;Could not load className = &quot; + c);
 177                 }
 178             }
 179         }
 180 
 181         if (getNumErrors() &gt; 0) {
 182             System.err.println(&quot;Test failed with &quot; + getNumErrors() + &quot; errors&quot;);
 183             throw new RuntimeException();
 184         }
 185     }
 186 
 187     /*
 188      *  Each test case in this enum has the following:
 189      *  - Define each test case with its @ExpectedBase and @ExpectedContainer annotations
 190      *  - Override getTestFiles() that creates list of JavaFileObjects for each case
 191      *    based on the src type.
 192      */
 193     enum TestCase {
 194         BasicNonRepeatable_Legacy(
 195         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 196                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
<span class="line-modified"> 197                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 198                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 199                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
<span class="line-modified"> 200                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 201                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;}) &quot;,</span>
 202         &quot;@ExpectedContainer&quot;) {
 203 
 204             @Override
 205             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 206                     String className) {
 207                 String anno = &quot;&quot;;
 208                 String replaceVal = &quot;&quot;;
 209                 String testSrc = &quot;&quot;;
 210                 String pkgInfoContents = &quot;&quot;;
 211                 String contents = &quot;&quot;;
 212 
 213                 JavaFileObject pkgFileObj = null;
 214                 JavaFileObject srcFileObj = null;
 215                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 216 
 217                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 218                         + getExpectedContainer() + &quot;\n&quot;;
 219                 StringBuilder commonStmts = new StringBuilder();
 220                 anno = Helper.ContentVars.BASEANNO.getVal();
 221                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
 257                         @Retention(RetentionPolicy.RUNTIME)
 258                         @interface Foo {int value() default Integer.MAX_VALUE;}
 259 
 260                         @ExpectedBase
 261                         @ExpectedContainer
 262                         @Foo(0)
 263                         class A {}
 264                          */
 265                         replaceVal = expectedVals + anno;
 266                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
 267                                 .replace(&quot;#REPLACE&quot;, replaceVal);
 268                         contents = commonStmts + testSrc;
 269                         srcFileObj = Helper.getFile(className, contents);
 270                         files = Arrays.asList(srcFileObj);
 271                 }
 272                 return files;
 273             }
 274         },
 275         SingleAnnoInherited_Legacy(
 276         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 277                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
<span class="line-modified"> 278                 + &quot;getAnnotationsVals = {\&quot;@Foo(value=0)\&quot;, \&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;</span>
 279                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
 280                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified"> 281                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;}, &quot;</span>
 282                 + &quot;getDeclAnnosArgs = {})&quot;,
 283         &quot;@ExpectedContainer&quot;) {
 284 
 285             @Override
 286             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 287                     String className) {
 288                 String anno = &quot;&quot;;
 289                 String replaceVal = &quot;&quot;;
 290                 String contents = &quot;&quot;;
 291                 JavaFileObject srcFileObj = null;
 292                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 293 
 294                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 295                         + getExpectedContainer() + &quot;\n&quot;;
 296                 StringBuilder commonStmts = new StringBuilder();
 297 
 298                 /*
 299                 Sample testSrc:
 300                 @Retention(RetentionPolicy.RUNTIME)
 301                 @Inherited
</pre>
<hr />
<pre>
 384                     replaceVal = commonStmts + &quot;\n&quot; + anno;
 385                     String interfaceContents = SrcType.INTERFACE.getTemplate()
 386                             .replace(&quot;#IN&quot;, TESTINTERFACE)
 387                             .replace(&quot;#REPLACE&quot;, replaceVal);
 388 
 389                     // Contents for class implementing TestInterface
 390                     replaceVal = expectedVals;
 391                     String classContents = SrcType.INTERFACEIMPL.getTemplate()
 392                             .replace(&quot;#CN&quot;, className).replace(&quot;#IN&quot;, TESTINTERFACE)
 393                             .replace(&quot;#REPLACE&quot;, replaceVal);
 394 
 395                     contents = interfaceContents + classContents;
 396                     srcFileObj = Helper.getFile(className, contents);
 397                     files = Arrays.asList(srcFileObj);
 398                 }
 399                 return files;
 400             }
 401         },
 402         AnnoOnSuperAndSubClass_Inherited_Legacy(
 403         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 404                 + &quot;getAnnotationVal = \&quot;@Foo(value=2)\&quot;, &quot;</span>
<span class="line-modified"> 405                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
 406                 + // override every annotation on superClass
<span class="line-modified"> 407                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
 408                 + // ignores inherited annotations
<span class="line-modified"> 409                 &quot;getDeclAnnoVal = \&quot;@Foo(value=2)\&quot;, &quot; // ignores inherited</span>
<span class="line-modified"> 410                 + &quot;getAnnosArgs = {\&quot;@Foo(value=2)\&quot;}, &quot;</span>
<span class="line-modified"> 411                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(value=2)\&quot; })&quot;, // ignores inherited</span>
 412         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
 413                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified"> 414                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
<span class="line-modified"> 415                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
 416                 + // ignores inherited annotations
 417                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot; + // ignores inherited
 418                 &quot;getAnnosArgs = {}, &quot; + &quot;getDeclAnnosArgs = {})&quot;) { // ignores inherited
 419 
 420             @Override
 421             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 422                     String className) {
 423                 String anno = &quot;&quot;;
 424                 String replaceVal = &quot;&quot;;
 425                 String contents = &quot;&quot;;
 426                 JavaFileObject srcFileObj = null;
 427                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 428 
 429                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 430                         + getExpectedContainer() + &quot;\n&quot;;
 431                 StringBuilder commonStmts = new StringBuilder();
 432 
 433                 /*
 434                 Sample test src
 435                 @Retention(RetentionPolicy.RUNTIME)
</pre>
<hr />
<pre>
 464                     anno = &quot;@Foo(1)&quot;;
 465                     replaceVal = commonStmts + &quot;\n&quot; + anno;
 466                     String superClassContents = srcType.getTemplate()
 467                             .replace(&quot;#CN&quot;, SUPERCLASS).replace(&quot;#REPLACE&quot;, replaceVal);
 468 
 469                     // Contents for SubClass that extends SuperClass
 470                     anno = &quot;@Foo(2)&quot;;
 471                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 472                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 473                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
 474                             .replace(&quot;#REPLACE&quot;, replaceVal);
 475 
 476                     contents = superClassContents + subClassContents;
 477                     srcFileObj = Helper.getFile(className, contents);
 478                     files = Arrays.asList(srcFileObj);
 479                 }
 480                 return files;
 481             }
 482         },
 483         BasicContainer_Legacy(
<span class="line-modified"> 484         &quot;@ExpectedBase(value = Foo.class, &quot;</span>
 485                 + &quot;getAnnotationVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 486                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 487                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
 488                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot; + &quot;getAnnosArgs = {}, &quot;
 489                 + &quot;getDeclAnnosArgs = {} )&quot;,
 490         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 491                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
<span class="line-modified"> 492                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 493                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 494                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
<span class="line-modified"> 495                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 496                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;} )&quot;) {</span>
 497 
 498             @Override
 499             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 500                     String className) {
 501                 String anno = &quot;&quot;;
 502                 String replaceVal = &quot;&quot;;
 503                 String testSrc = &quot;&quot;;
 504                 String pkgInfoContents = &quot;&quot;;
 505                 String contents = &quot;&quot;;
 506 
 507                 JavaFileObject pkgFileObj = null;
 508                 JavaFileObject srcFileObj = null;
 509                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 510 
 511                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 512                         + getExpectedContainer() + &quot;\n&quot;;
 513                 StringBuilder commonStmts = new StringBuilder();
 514 
 515                 anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
 516                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
 563                         @interface FooContainer {
 564                         Foo[] value();
 565                         }
 566 
 567                         @ExpectedBase
 568                         @ExpectedContainer
 569                         @FooContainer(value = {@Foo(1), @Foo(2)})
 570                         class A {}
 571                          */
 572                         replaceVal = expectedVals + anno;
 573                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
 574                                 .replace(&quot;#REPLACE&quot;, replaceVal);
 575                         contents = commonStmts + testSrc;
 576                         srcFileObj = Helper.getFile(className, contents);
 577                         files = Arrays.asList(srcFileObj);
 578                 }
 579                 return files;
 580             }
 581         },
 582         SingleAndContainerOnSuper_Legacy(
<span class="line-modified"> 583         &quot;@ExpectedBase(value = Foo.class, &quot;</span>
<span class="line-modified"> 584                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;,&quot;</span>
 585                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 586                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
 587                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified"> 588                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 589                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
<span class="line-modified"> 590                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 591                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;} )&quot;,</span>
 592         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 593                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
 594                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 595                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
 596                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified"> 597                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 598                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
<span class="line-modified"> 599                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 600                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;} )&quot;) {</span>
 601 
 602             @Override
 603             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 604                     String className) {
 605                 String anno = &quot;&quot;;
 606                 String replaceVal = &quot;&quot;;
 607                 String testSrc = &quot;&quot;;
 608                 String pkgInfoContents = &quot;&quot;;
 609                 String contents = &quot;&quot;;
 610 
 611                 JavaFileObject pkgFileObj = null;
 612                 JavaFileObject srcFileObj = null;
 613                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 614 
 615                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 616                         + getExpectedContainer() + &quot;\n&quot;;
 617                 StringBuilder commonStmts = new StringBuilder();
 618 
 619                 anno = Helper.ContentVars.BASEANNO.getVal() +
 620                        Helper.ContentVars.LEGACYCONTAINER.getVal();
</pre>
<hr />
<pre>
 672                         }
 673 
 674                         @ExpectedBase
 675                         @ExpectedContainer
 676                         @Foo(0)
 677                         @FooContainer(value = {@Foo(1), @Foo(2)})
 678                         class A {}
 679                          */
 680                         replaceVal = expectedVals + anno;
 681                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
 682                                 .replace(&quot;#REPLACE&quot;, replaceVal);
 683                         contents = commonStmts + testSrc;
 684 
 685                         srcFileObj = Helper.getFile(className, contents);
 686                         files = Arrays.asList(srcFileObj);
 687                 }
 688                 return files;
 689             }
 690         },
 691         BasicContainer_Inherited_Legacy(
<span class="line-modified"> 692         &quot;@ExpectedBase(value = Foo.class, &quot;</span>
 693                 + &quot;getAnnotationVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 694                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
 695                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
 696                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
 697                 + &quot;getAnnosArgs = {}, &quot;
 698                 + &quot;getDeclAnnosArgs = {} )&quot;,
 699         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 700                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
<span class="line-modified"> 701                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
 702                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
 703                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified"> 704                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
 705                 + &quot;getDeclAnnosArgs = {} )&quot;) {
 706 
 707             @Override
 708             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 709                     String className) {
 710                 String anno = &quot;&quot;;
 711                 String replaceVal = &quot;&quot;;
 712                 String contents = &quot;&quot;;
 713                 JavaFileObject srcFileObj = null;
 714                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 715 
 716                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 717                         + getExpectedContainer() + &quot;\n&quot;;
 718                 StringBuilder commonStmts = getCommonStmts(false);
 719 
 720                 /*
 721                 Sample testSrc:
 722                 @Retention(RetentionPolicy.RUNTIME)
 723                 @Inherited
 724                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 746                     String superClassContents = srcType.getTemplate()
 747                             .replace(&quot;#CN&quot;, SUPERCLASS)
 748                             .replace(&quot;#REPLACE&quot;, replaceVal);
 749 
 750                     // Contents for SubClass that extends SuperClass
 751                     replaceVal = expectedVals;
 752                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 753                             .replace(&quot;#CN&quot;, className)
 754                             .replace(&quot;#SN&quot;, SUPERCLASS)
 755                             .replace(&quot;#REPLACE&quot;, replaceVal);
 756 
 757                     contents = superClassContents + subClassContents;
 758                     srcFileObj = Helper.getFile(className, contents);
 759                     files = Arrays.asList(srcFileObj);
 760                 }
 761                 return files;
 762             }
 763         },
 764         ContainerOnSuperSingleOnSub_Inherited_Legacy(
 765         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 766                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
 767                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 768                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 769                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified"> 770                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;,&quot;</span>
<span class="line-modified"> 771                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified"> 772                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;})&quot;,</span>
 773         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 774                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
 775                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 776                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 777                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
 778                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 779                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
 780                 + &quot;getDeclAnnosArgs = {})&quot;) {
 781 
 782             @Override
 783             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 784                     String className) {
 785                 String anno = &quot;&quot;;
 786                 String replaceVal = &quot;&quot;;
 787                 String contents = &quot;&quot;;
 788                 JavaFileObject srcFileObj = null;
 789                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 790 
 791                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 792                         + getExpectedContainer() + &quot;\n&quot;;
 793                 StringBuilder commonStmts = getCommonStmts(false);
 794 
 795                 /*
 796                 Sample testSrc:
 797                 @Retention(RetentionPolicy.RUNTIME)
 798                 @Inherited
 799                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 825 
 826                     // Contents for SubClass that extends SuperClass
 827                     anno = Helper.ContentVars.BASEANNO.getVal();
 828                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 829                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 830                             .replace(&quot;#CN&quot;, className)
 831                             .replace(&quot;#SN&quot;, SUPERCLASS)
 832                             .replace(&quot;#REPLACE&quot;, replaceVal);
 833 
 834                     contents = superClassContents + subClassContents;
 835                     srcFileObj = Helper.getFile(className, contents);
 836                     files = Arrays.asList(srcFileObj);
 837                 }
 838                 return files;
 839             }
 840         },
 841         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
 842         // fail with ordering issues
 843         ContainerAndSingleOnSuperSingleOnSub_Inherited_Legacy(
 844         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 845                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
 846                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 847                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 848                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified"> 849                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;,&quot;</span>
<span class="line-modified"> 850                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified"> 851                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;})&quot;,</span>
 852         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 853                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
 854                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 855                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=0)\&quot;}, &quot;</span>
<span class="line-modified"> 856                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
 857                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 858                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
 859                 + &quot;getDeclAnnosArgs = {})&quot;) {
 860 
 861             @Override
 862             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 863                     String className) {
 864                 String anno = &quot;&quot;;
 865                 String replaceVal = &quot;&quot;;
 866                 String contents = &quot;&quot;;
 867                 JavaFileObject srcFileObj = null;
 868                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 869 
 870                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 871                         + getExpectedContainer() + &quot;\n&quot;;
 872                 StringBuilder commonStmts = getCommonStmts(false);
 873 
 874                 /*
 875                 Sample testSrc:
 876                 @Retention(RetentionPolicy.RUNTIME)
 877                 @Inherited
 878                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 904                             .replace(&quot;#REPLACE&quot;, replaceVal);
 905 
 906                     // Contents for SubClass that extends SuperClass
 907                     anno = Helper.ContentVars.BASEANNO.getVal();
 908                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 909                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 910                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
 911                             .replace(&quot;#REPLACE&quot;, replaceVal);
 912 
 913                     contents = superClassContents + subClassContents;
 914                     srcFileObj = Helper.getFile(className, contents);
 915                     files = Arrays.asList(srcFileObj);
 916                 }
 917                 return files;
 918             }
 919         },
 920         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
 921         // fail with ordering issues
 922         SingleOnSuperContainerOnSub_Inherited_Legacy(
 923         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 924                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
 925                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 926                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 927                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
 928                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 929                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;},&quot;</span>
 930                 + &quot;getDeclAnnosArgs = {})&quot;,
 931         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 932                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
 933                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 934                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified"> 935                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified"> 936                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified"> 937                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified"> 938                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;})&quot;) {</span>
 939 
 940             @Override
 941             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 942                     String className) {
 943                 String anno = &quot;&quot;;
 944                 String replaceVal = &quot;&quot;;
 945                 String contents = &quot;&quot;;
 946 
 947                 JavaFileObject srcFileObj = null;
 948                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 949 
 950                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 951                         + getExpectedContainer() + &quot;\n&quot;;
 952                 StringBuilder commonStmts = getCommonStmts(false);
 953 
 954                 /*
 955                 Sample testSrc:
 956                 @Retention(RetentionPolicy.RUNTIME)
 957                 @Inherited
 958                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 981                             .replace(&quot;#REPLACE&quot;, replaceVal);
 982 
 983                     //Contents for SubClass that extends SuperClass
 984                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
 985                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 986                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 987                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
 988                             .replace(&quot;#REPLACE&quot;, replaceVal);
 989 
 990                     contents = superClassContents + subClassContents;
 991                     srcFileObj = Helper.getFile(className, contents);
 992                     files = Arrays.asList(srcFileObj);
 993                 }
 994                 return files;
 995             }
 996         },
 997         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
 998         // fail with ordering issues
 999         SingleOnSuperContainerAndSingleOnSub_Inherited_Legacy(
1000         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1001                 + &quot;getAnnotationVal = \&quot;@Foo(value=3)\&quot;, &quot;</span>
1002                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1003                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;}, &quot;</span>
1004                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1005                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;},&quot;</span>
<span class="line-modified">1006                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=3)\&quot;,&quot;</span>
<span class="line-modified">1007                 + &quot;getAnnosArgs = {\&quot;@Foo(value=3)\&quot;},&quot;</span>
<span class="line-modified">1008                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=3)\&quot;})&quot;,</span>
1009         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1010                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1011                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1012                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;}, &quot;</span>
1013                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1014                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;},&quot;</span>
<span class="line-modified">1015                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1016                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1017                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;})&quot;) {</span>
1018 
1019             @Override
1020             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1021                     String className) {
1022                 String anno = &quot;&quot;;
1023                 String replaceVal = &quot;&quot;;
1024                 String contents = &quot;&quot;;
1025 
1026                 JavaFileObject srcFileObj = null;
1027                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1028 
1029                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1030                         + getExpectedContainer() + &quot;\n&quot;;
1031                 StringBuilder commonStmts = getCommonStmts(false);
1032 
1033                 /*
1034                 Sample testSrc:
1035                 @Retention(RetentionPolicy.RUNTIME)
1036                 @Inherited
1037                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1060                             .replace(&quot;#REPLACE&quot;, replaceVal);
1061 
1062                     //Contents for SubClass that extends SuperClass
1063                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal()
1064                             + &quot;@Foo(3)&quot;;
1065                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1066                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1067                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
1068                             .replace(&quot;#REPLACE&quot;, replaceVal);
1069 
1070                     contents = superClassContents + subClassContents;
1071                     srcFileObj = Helper.getFile(className, contents);
1072                     files = Arrays.asList(srcFileObj);
1073                 }
1074                 return files;
1075             }
1076         },
1077         BasicRepeatable(
1078         &quot;@ExpectedBase(value=Foo.class, &quot;
1079                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1080                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot; }, &quot;</span>
<span class="line-modified">1081                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1082                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1083                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;},&quot;</span>
<span class="line-modified">1084                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;})&quot;,</span>
1085         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1086                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1087                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1088                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1089                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1090                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1091                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;} )&quot;) {</span>
1092 
1093             @Override
1094             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1095                     String className) {
1096                 String anno = &quot;&quot;;
1097                 String replaceVal = &quot;&quot;;
1098                 String testSrc = &quot;&quot;;
1099                 String pkgInfoContents = &quot;&quot;;
1100                 String contents = &quot;&quot;;
1101 
1102                 JavaFileObject pkgFileObj = null;
1103                 JavaFileObject srcFileObj = null;
1104                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1105 
1106                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1107                         + getExpectedContainer() + &quot;\n&quot;;
1108                 StringBuilder commonStmts = new StringBuilder();
1109 
1110                 anno = Helper.ContentVars.REPEATABLEANNO.getVal();
1111                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
1162 
1163                         @ExpectedBase
1164                         @ExpectedContainer
1165                         @Foo(1) @Foo(2)
1166                         class A { }
1167                          */
1168                         replaceVal = expectedVals + anno;
1169                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
1170                                 .replace(&quot;#REPLACE&quot;, replaceVal);
1171                         contents = commonStmts + testSrc;
1172                         srcFileObj = Helper.getFile(className, contents);
1173                         files = Arrays.asList(srcFileObj);
1174                 }
1175                 return files;
1176             }
1177         },
1178         BasicContainerRepeatable(
1179         &quot;@ExpectedBase(value=Foo.class, &quot;
1180                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
1181                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1182                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1183                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1184                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1185                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1186                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;},&quot;</span>
<span class="line-modified">1187                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;})&quot;,</span>
1188         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1189                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
1190                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1191                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1192                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1193                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1194                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1195                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1196                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;} )&quot;) {</span>
1197 
1198             @Override
1199             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1200                     String className) {
1201                 String anno = &quot;&quot;;
1202                 String replaceVal = &quot;&quot;;
1203                 String testSrc = &quot;&quot;;
1204                 String pkgInfoContents = &quot;&quot;;
1205                 String contents = &quot;&quot;;
1206 
1207                 JavaFileObject pkgFileObj = null;
1208                 JavaFileObject srcFileObj = null;
1209                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1210 
1211                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1212                         + getExpectedContainer() + &quot;\n&quot;;
1213                 StringBuilder commonStmts = new StringBuilder();
1214 
1215                 anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
1216                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
1266                         }
1267 
1268                         @ExpectedBase
1269                         @ExpectedContainer
1270                         @FooContainer(value = {@Foo(1), @Foo(2)})
1271                         class A { }
1272                          */
1273                         replaceVal = expectedVals + anno;
1274                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
1275                                 .replace(&quot;#REPLACE&quot;, replaceVal);
1276                         contents = commonStmts + testSrc;
1277                         srcFileObj = Helper.getFile(className, contents);
1278                         files = Arrays.asList(srcFileObj);
1279                 }
1280                 return files;
1281             }
1282         },
1283         BasicContainerRepeatable_Inherited(
1284         &quot;@ExpectedBase(value=Foo.class, &quot;
1285                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1286                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1287                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1288                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1289                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
1290                 + &quot;getDeclAnnosArgs = {})&quot;,
1291         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1292                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
<span class="line-modified">1293                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1294                 + &quot;getDeclAnnosVals = { \&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1295                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1296                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1297                 + &quot;getDeclAnnosArgs = {})&quot;) {
1298 
1299             @Override
1300             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1301                     String className) {
1302                 String anno = &quot;&quot;;
1303                 String replaceVal = &quot;&quot;;
1304                 String contents = &quot;&quot;;
1305                 JavaFileObject srcFileObj = null;
1306                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1307 
1308                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1309                         + getExpectedContainer() + &quot;\n&quot;;
1310                 StringBuilder commonStmts = getCommonStmts(true);
1311                 /*
1312                 Sample testSrc:
1313                 @Retention(RetentionPolicy.RUNTIME)
1314                 @Inherited
1315                 @Repeatable(FooContainer.class)
1316                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1339                             .replace(&quot;#CN&quot;, SUPERCLASS)
1340                             .replace(&quot;#REPLACE&quot;, replaceVal);
1341 
1342                     // Contents for SubClass that extends SuperClass
1343                     replaceVal = expectedVals;
1344                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1345                             .replace(&quot;#CN&quot;, className)
1346                             .replace(&quot;#SN&quot;, SUPERCLASS)
1347                             .replace(&quot;#REPLACE&quot;, replaceVal);
1348 
1349                     contents = superClassContents + subClassContents;
1350                     srcFileObj = Helper.getFile(className, contents);
1351                     files = Arrays.asList(srcFileObj);
1352                 }
1353                 return files;
1354             }
1355         },
1356         RepeatableAnnoInherited(
1357         &quot;@ExpectedBase(value=Foo.class, &quot;
1358                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1359                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1360                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1361                 + // ignores inherited annotations
1362                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
1363                 + // ignores inherited
<span class="line-modified">1364                 &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
1365                 + &quot;getDeclAnnosArgs = {})&quot;, // ignores inherited
1366         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1367                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
<span class="line-modified">1368                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1369                 + &quot;getDeclAnnosVals = { \&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1370                 + // ignores inherited annotations
1371                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
1372                 + // ignores inherited
<span class="line-modified">1373                 &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1374                 + &quot;getDeclAnnosArgs = {})&quot;) { // ignores inherited
1375 
1376             @Override
1377             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1378                     String className) {
1379                 String anno = &quot;&quot;;
1380                 String replaceVal = &quot;&quot;;
1381                 String contents = &quot;&quot;;
1382                 JavaFileObject srcFileObj = null;
1383                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1384 
1385                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1386                         + getExpectedContainer() + &quot;\n&quot;;
1387                 StringBuilder commonStmts = getCommonStmts(true);
1388                 /*
1389                 Sample testSrc:
1390                 @Retention(RetentionPolicy.RUNTIME)
1391                 @Inherited
1392                 @Repeatable(FooContainer.class)
1393                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1417                             .replace(&quot;#REPLACE&quot;, replaceVal);
1418 
1419                     // Contents for SubClass that extends SuperClass
1420                     replaceVal = expectedVals;
1421                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1422                             .replace(&quot;#CN&quot;, className)
1423                             .replace(&quot;#SN&quot;, SUPERCLASS)
1424                             .replace(&quot;#REPLACE&quot;, replaceVal);
1425 
1426                     contents = superClassContents + subClassContents;
1427                     srcFileObj = Helper.getFile(className, contents);
1428                     files = Arrays.asList(srcFileObj);
1429                 }
1430                 return files;
1431             }
1432         },
1433         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1434         // fail with ordering issues
1435         SingleAnnoWithContainer(
1436         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1437                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
1438                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1439                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1440                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1441                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1442                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;,&quot;</span>
<span class="line-modified">1443                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;, \&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;},&quot;</span>
<span class="line-modified">1444                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;, \&quot;@Foo(value=1)\&quot;,\&quot;@Foo(value=2)\&quot;})&quot;,</span>
1445         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1446                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1447                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1448                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1449                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1450                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1451                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1452                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1453                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;})&quot;) {</span>
1454 
1455             @Override
1456             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1457                     String className) {
1458                 String anno = &quot;&quot;;
1459                 String replaceVal = &quot;&quot;;
1460                 String testSrc = &quot;&quot;;
1461                 String pkgInfoContents = &quot;&quot;;
1462                 String contents = &quot;&quot;;
1463 
1464                 JavaFileObject pkgFileObj = null;
1465                 JavaFileObject srcFileObj = null;
1466                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1467 
1468                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1469                         + getExpectedContainer() + &quot;\n&quot;;
1470                 StringBuilder commonStmts = new StringBuilder();
1471 
1472                 anno = Helper.ContentVars.BASEANNO.getVal() + &quot; &quot;
1473                         + Helper.ContentVars.LEGACYCONTAINER.getVal();
</pre>
<hr />
<pre>
1526                         }
1527 
1528                         @ExpectedBase
1529                         @ExpectedContainer
1530                         @Foo(0) @FooContainer(value = {@Foo(1), @Foo(2)})
1531                         class A { }
1532                          */
1533                         replaceVal = expectedVals + anno;
1534                         testSrc = srcType.getTemplate()
1535                                 .replace(&quot;#CN&quot;, className)
1536                                 .replace(&quot;#REPLACE&quot;, replaceVal);
1537                         contents = commonStmts + testSrc;
1538                         srcFileObj = Helper.getFile(className, contents);
1539                         files = Arrays.asList(srcFileObj);
1540                 }
1541                 return files;
1542             }
1543         },
1544         AnnoOnSuperAndSubClass_Inherited(
1545         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1546                 + &quot;getAnnotationVal = \&quot;@Foo(value=1)\&quot;, &quot;</span>
<span class="line-modified">1547                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=1)\&quot; }, &quot;</span>
1548                 + // override every annotation on superClass
<span class="line-modified">1549                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=1)\&quot;}, &quot;</span>
1550                 + // ignores inherited annotations
<span class="line-modified">1551                 &quot;getDeclAnnoVal = \&quot;@Foo(value=1)\&quot;, &quot; // ignores inherited</span>
<span class="line-modified">1552                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;}, &quot;</span>
<span class="line-modified">1553                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(value=1)\&quot; })&quot;, // ignores inherited</span>
1554         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
1555                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1556                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=1)\&quot; }, &quot;</span>
<span class="line-modified">1557                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=1)\&quot;}, &quot;</span>
1558                 + // ignores inherited annotations
1559                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot; + // ignores inherited
1560                 &quot;getAnnosArgs = {}, &quot; + &quot;getDeclAnnosArgs = {})&quot;) {
1561 
1562             @Override
1563             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1564                     String className) {
1565                 String anno = &quot;&quot;;
1566                 String replaceVal = &quot;&quot;;
1567                 String contents = &quot;&quot;;
1568                 JavaFileObject srcFileObj = null;
1569                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1570 
1571                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1572                         + getExpectedContainer() + &quot;\n&quot;;
1573                 StringBuilder commonStmts = getCommonStmts(true);
1574 
1575                 /*
1576                 Sample testSrc:
1577                 @Retention(RetentionPolicy.RUNTIME)
</pre>
<hr />
<pre>
1605                             .replace(&quot;#REPLACE&quot;, replaceVal);
1606 
1607                     // Contents for SubClass that extends SuperClass
1608                     replaceVal = expectedVals + &quot;\n&quot; + &quot;@Foo(1)&quot;;
1609                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1610                             .replace(&quot;#CN&quot;, className)
1611                             .replace(&quot;#SN&quot;, SUPERCLASS)
1612                             .replace(&quot;#REPLACE&quot;, replaceVal);
1613 
1614                     contents = superClassContents + subClassContents;
1615                     srcFileObj = Helper.getFile(className, contents);
1616                     files = Arrays.asList(srcFileObj);
1617                 }
1618                 return files;
1619             }
1620         },
1621         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1622         // fail with ordering issues
1623         RepeatableOnSuperSingleOnSub_Inherited(
1624         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1625                 + &quot;getAnnotationVal = \&quot;@Foo(value=3)\&quot;, &quot;</span>
1626                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1627                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=3)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1628                 + //override every annotation on superClass
<span class="line-modified">1629                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=3)\&quot;}, &quot;</span>
1630                 + // ignores inherited annotations
<span class="line-modified">1631                 &quot;getDeclAnnoVal = \&quot;@Foo(value=3)\&quot;, &quot; // ignores inherited</span>
<span class="line-modified">1632                 + &quot;getAnnosArgs = {\&quot;@Foo(value=3)\&quot;}, &quot;</span>
<span class="line-modified">1633                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(value=3)\&quot; })&quot;, // ignores inherited</span>
1634         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1635                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1636                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1637                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=3)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1638                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=3)\&quot;}, &quot;</span>
1639                 + // ignores inherited annotations
1640                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1641                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1642                 + &quot;getDeclAnnosArgs = {}) // ignores inherited &quot;) {
1643 
1644             @Override
1645             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1646                     String className) {
1647                 String anno = &quot;&quot;;
1648                 String replaceVal = &quot;&quot;;
1649                 String contents = &quot;&quot;;
1650                 JavaFileObject srcFileObj = null;
1651                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1652 
1653                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1654                         + getExpectedContainer() + &quot;\n&quot;;
1655                 StringBuilder commonStmts = getCommonStmts(true);
1656 
1657                 /*
1658                  Sample testSrc:
1659                  @Retention(RetentionPolicy.RUNTIME)
1660                  @Inherited
1661                  @Repeatable(FooContainer.class)
</pre>
<hr />
<pre>
1685                             .replace(&quot;#REPLACE&quot;, replaceVal);
1686 
1687                     //Contents for SubClass that extends SuperClass
1688                     anno = &quot;@Foo(3)&quot;;
1689                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1690                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1691                             .replace(&quot;#CN&quot;, className)
1692                             .replace(&quot;#SN&quot;, SUPERCLASS)
1693                             .replace(&quot;#REPLACE&quot;, replaceVal);
1694                     contents = superClassContents + subClassContents;
1695                     srcFileObj = Helper.getFile(className, contents);
1696                     files = Arrays.asList(srcFileObj);
1697                 }
1698                 return files;
1699             }
1700         },
1701         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1702         // fail with ordering issues
1703         SingleOnSuperRepeatableOnSub_Inherited(
1704         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1705                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
1706                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1707                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1708                 + //override every annotation on superClass
<span class="line-modified">1709                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1710                 + // ignores inherited annotations
1711                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;// ignores inherited
<span class="line-modified">1712                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;}, &quot;</span>
<span class="line-modified">1713                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;})&quot;,</span>
1714         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1715                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1716                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1717                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1718                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
1719                 + // ignores inherited annotations
<span class="line-modified">1720                 &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;// ignores inherited</span>
<span class="line-modified">1721                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1722                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;})&quot;) {</span>
1723 
1724             @Override
1725             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1726                     String className) {
1727                 String anno = &quot;&quot;;
1728                 String replaceVal = &quot;&quot;;
1729                 String contents = &quot;&quot;;
1730                 JavaFileObject srcFileObj = null;
1731                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1732 
1733                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1734                         + getExpectedContainer() + &quot;\n&quot;;
1735                 StringBuilder commonStmts = getCommonStmts(true);
1736 
1737                 /*
1738                  Sample testSrc:
1739                  @Retention(RetentionPolicy.RUNTIME)
1740                  @Inherited
1741                  @Repeatable(FooContainer.class)
1742                  @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1766 
1767                     //Contents for SubClass that extends SuperClass
1768                     anno = Helper.ContentVars.REPEATABLEANNO.getVal();
1769                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1770                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1771                             .replace(&quot;#CN&quot;, className)
1772                             .replace(&quot;#SN&quot;, SUPERCLASS)
1773                             .replace(&quot;#REPLACE&quot;, replaceVal);
1774 
1775                     contents = superClassContents + subClassContents;
1776                     srcFileObj = Helper.getFile(className, contents);
1777                     files = Arrays.asList(srcFileObj);
1778                 }
1779                 return files;
1780             }
1781         },
1782         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1783         // fail with ordering issues
1784         ContainerOnSuperSingleOnSub_Inherited(
1785         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1786                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
1787                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1788                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1789                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified">1790                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;,&quot;</span>
<span class="line-modified">1791                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified">1792                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;})&quot;,</span>
1793         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1794                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1795                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1796                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1797                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
1798                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1799                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1800                 + &quot;getDeclAnnosArgs = {})&quot;) {
1801 
1802             @Override
1803             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1804                     String className) {
1805                 String anno = &quot;&quot;;
1806                 String replaceVal = &quot;&quot;;
1807                 String contents = &quot;&quot;;
1808                 JavaFileObject srcFileObj = null;
1809                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1810 
1811                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1812                         + getExpectedContainer() + &quot;\n&quot;;
1813                 StringBuilder commonStmts = getCommonStmts(true);
1814 
1815                 /*
1816                  Sample testSrc:
1817                  @Retention(RetentionPolicy.RUNTIME)
1818                  @Inherited
1819                  @Repeatable(FooContainer.class)
</pre>
<hr />
<pre>
1844 
1845                     //Contents for SubClass that extends SuperClass
1846                     anno = Helper.ContentVars.BASEANNO.getVal();
1847                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1848                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1849                             .replace(&quot;#CN&quot;, className)
1850                             .replace(&quot;#SN&quot;, SUPERCLASS)
1851                             .replace(&quot;#REPLACE&quot;, replaceVal);
1852 
1853                     contents = superClassContents + subClassContents;
1854                     srcFileObj = Helper.getFile(className, contents);
1855                     files = Arrays.asList(srcFileObj);
1856                 }
1857                 return files;
1858             }
1859         },
1860         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1861         // fail with ordering issues
1862         SingleOnSuperContainerOnSub_Inherited(
1863         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1864                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
1865                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1866                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1867                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
1868                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1869                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;},&quot;</span>
<span class="line-modified">1870                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;})&quot;,</span>
1871         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1872                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1873                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1874                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">1875                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1876                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1877                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1878                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;})&quot;) {</span>
1879 
1880             @Override
1881             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1882                      String className) {
1883                 String anno = &quot;&quot;;
1884                 String replaceVal = &quot;&quot;;
1885                 String contents = &quot;&quot;;
1886                 JavaFileObject srcFileObj = null;
1887                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1888 
1889                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1890                         + getExpectedContainer() + &quot;\n&quot;;
1891                 StringBuilder commonStmts = getCommonStmts(true);
1892 
1893                 /*
1894                  Sample testSrc:
1895                  @Retention(RetentionPolicy.RUNTIME)
1896                  @Inherited
1897                  @Repeatable(FooContainer.class)
1898                  @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1922 
1923                     //Contents for SubClass that extends SuperClass
1924                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
1925                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1926                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1927                             .replace(&quot;#CN&quot;, className)
1928                             .replace(&quot;#SN&quot;, SUPERCLASS)
1929                             .replace(&quot;#REPLACE&quot;, replaceVal);
1930 
1931                     contents = superClassContents + subClassContents;
1932                     srcFileObj = Helper.getFile(className, contents);
1933                     files = Arrays.asList(srcFileObj);
1934                 }
1935                 return files;
1936             }
1937         },
1938         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1939         // fail with ordering issues
1940         SingleOnSuperContainerAndSingleOnSub_Inherited(
1941         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1942                 + &quot;getAnnotationVal = \&quot;@Foo(value=3)\&quot;, &quot;</span>
1943                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1944                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;}, &quot;</span>
1945                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1946                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;},&quot;</span>
<span class="line-modified">1947                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=3)\&quot;,&quot;</span>
<span class="line-modified">1948                 + &quot;getAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;, \&quot;@Foo(value=3)\&quot;},&quot;</span>
<span class="line-modified">1949                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=1)\&quot;, \&quot;@Foo(value=2)\&quot;, \&quot;@Foo(value=3)\&quot;})&quot;,</span>
1950         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1951                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
1952                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1953                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;}, &quot;</span>
1954                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1955                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, \&quot;@Foo(value=3)\&quot;},&quot;</span>
<span class="line-modified">1956                 + &quot;getDeclAnnoVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;,&quot;</span>
<span class="line-modified">1957                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
<span class="line-modified">1958                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;})&quot;) {</span>
1959 
1960             @Override
1961             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1962                     String className) {
1963                 String anno = &quot;&quot;;
1964                 String replaceVal = &quot;&quot;;
1965                 String contents = &quot;&quot;;
1966                 JavaFileObject srcFileObj = null;
1967                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1968                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1969                         + getExpectedContainer() + &quot;\n&quot;;
1970                 StringBuilder commonStmts = getCommonStmts(true);
1971 
1972                 /*
1973                 Sample testSrc:
1974                 @Retention(RetentionPolicy.RUNTIME)
1975                 @Inherited
1976                 @interface Foo {int value() default Integer.MAX_VALUE;}
1977 
1978                 @Retention(RetentionPolicy.RUNTIME)
</pre>
<hr />
<pre>
2002                     //Contents for SubClass that extends SuperClass
2003                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal()
2004                             + &quot;@Foo(3)&quot;;
2005                     replaceVal = expectedVals + &quot;\n&quot; + anno;
2006                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
2007                             .replace(&quot;#CN&quot;, className)
2008                             .replace(&quot;#SN&quot;, SUPERCLASS)
2009                             .replace(&quot;#REPLACE&quot;, replaceVal);
2010 
2011                     contents = superClassContents + subClassContents;
2012                     srcFileObj = Helper.getFile(className, contents);
2013                     files = Arrays.asList(srcFileObj);
2014                 }
2015                 return files;
2016             }
2017         },
2018         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
2019         // fail with ordering issues
2020         ContainerAndSingleOnSuperSingleOnSub_Inherited(
2021         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">2022                 + &quot;getAnnotationVal = \&quot;@Foo(value=0)\&quot;, &quot;</span>
2023                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">2024                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">2025                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified">2026                 + &quot;getDeclAnnoVal = \&quot;@Foo(value=0)\&quot;,&quot;</span>
<span class="line-modified">2027                 + &quot;getAnnosArgs = {\&quot;@Foo(value=0)\&quot;},&quot;</span>
<span class="line-modified">2028                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(value=0)\&quot;})&quot;,</span>
2029         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">2030                 + &quot;getAnnotationVal = \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;, &quot;</span>
2031                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">2032                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;, \&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;}, &quot;</span>
<span class="line-modified">2033                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(value=0)\&quot;},&quot;</span>
2034                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">2035                 + &quot;getAnnosArgs = {\&quot;@FooContainer(value={@Foo(value=1), @Foo(value=2)})\&quot;},&quot;</span>
2036                 + &quot;getDeclAnnosArgs = {})&quot;) {
2037 
2038             @Override
2039             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
2040                     String className) {
2041                 String anno = &quot;&quot;;
2042                 String replaceVal = &quot;&quot;;
2043                 String contents = &quot;&quot;;
2044                 JavaFileObject srcFileObj = null;
2045                 Iterable&lt;? extends JavaFileObject&gt; files = null;
2046 
2047                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
2048                         + getExpectedContainer() + &quot;\n&quot;;
2049                 StringBuilder commonStmts = getCommonStmts(true);
2050 
2051                 /*
2052                  Sample testSrc:
2053                  @Retention(RetentionPolicy.RUNTIME)
2054                  @Inherited
2055                  @Repeatable(FooContainer.class)
</pre>
</td>
<td>
<hr />
<pre>
   1 /*
<span class="line-modified">   2  * Copyright (c) 2013, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
</pre>
<hr />
<pre>
 176                     error(&quot;Could not load className = &quot; + c);
 177                 }
 178             }
 179         }
 180 
 181         if (getNumErrors() &gt; 0) {
 182             System.err.println(&quot;Test failed with &quot; + getNumErrors() + &quot; errors&quot;);
 183             throw new RuntimeException();
 184         }
 185     }
 186 
 187     /*
 188      *  Each test case in this enum has the following:
 189      *  - Define each test case with its @ExpectedBase and @ExpectedContainer annotations
 190      *  - Override getTestFiles() that creates list of JavaFileObjects for each case
 191      *    based on the src type.
 192      */
 193     enum TestCase {
 194         BasicNonRepeatable_Legacy(
 195         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 196                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
<span class="line-modified"> 197                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 198                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 199                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;, &quot;</span>
<span class="line-modified"> 200                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 201                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;}) &quot;,</span>
 202         &quot;@ExpectedContainer&quot;) {
 203 
 204             @Override
 205             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 206                     String className) {
 207                 String anno = &quot;&quot;;
 208                 String replaceVal = &quot;&quot;;
 209                 String testSrc = &quot;&quot;;
 210                 String pkgInfoContents = &quot;&quot;;
 211                 String contents = &quot;&quot;;
 212 
 213                 JavaFileObject pkgFileObj = null;
 214                 JavaFileObject srcFileObj = null;
 215                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 216 
 217                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 218                         + getExpectedContainer() + &quot;\n&quot;;
 219                 StringBuilder commonStmts = new StringBuilder();
 220                 anno = Helper.ContentVars.BASEANNO.getVal();
 221                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
 257                         @Retention(RetentionPolicy.RUNTIME)
 258                         @interface Foo {int value() default Integer.MAX_VALUE;}
 259 
 260                         @ExpectedBase
 261                         @ExpectedContainer
 262                         @Foo(0)
 263                         class A {}
 264                          */
 265                         replaceVal = expectedVals + anno;
 266                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
 267                                 .replace(&quot;#REPLACE&quot;, replaceVal);
 268                         contents = commonStmts + testSrc;
 269                         srcFileObj = Helper.getFile(className, contents);
 270                         files = Arrays.asList(srcFileObj);
 271                 }
 272                 return files;
 273             }
 274         },
 275         SingleAnnoInherited_Legacy(
 276         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 277                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
<span class="line-modified"> 278                 + &quot;getAnnotationsVals = {\&quot;@Foo(0)\&quot;, \&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;</span>
 279                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
 280                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified"> 281                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;}, &quot;</span>
 282                 + &quot;getDeclAnnosArgs = {})&quot;,
 283         &quot;@ExpectedContainer&quot;) {
 284 
 285             @Override
 286             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 287                     String className) {
 288                 String anno = &quot;&quot;;
 289                 String replaceVal = &quot;&quot;;
 290                 String contents = &quot;&quot;;
 291                 JavaFileObject srcFileObj = null;
 292                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 293 
 294                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 295                         + getExpectedContainer() + &quot;\n&quot;;
 296                 StringBuilder commonStmts = new StringBuilder();
 297 
 298                 /*
 299                 Sample testSrc:
 300                 @Retention(RetentionPolicy.RUNTIME)
 301                 @Inherited
</pre>
<hr />
<pre>
 384                     replaceVal = commonStmts + &quot;\n&quot; + anno;
 385                     String interfaceContents = SrcType.INTERFACE.getTemplate()
 386                             .replace(&quot;#IN&quot;, TESTINTERFACE)
 387                             .replace(&quot;#REPLACE&quot;, replaceVal);
 388 
 389                     // Contents for class implementing TestInterface
 390                     replaceVal = expectedVals;
 391                     String classContents = SrcType.INTERFACEIMPL.getTemplate()
 392                             .replace(&quot;#CN&quot;, className).replace(&quot;#IN&quot;, TESTINTERFACE)
 393                             .replace(&quot;#REPLACE&quot;, replaceVal);
 394 
 395                     contents = interfaceContents + classContents;
 396                     srcFileObj = Helper.getFile(className, contents);
 397                     files = Arrays.asList(srcFileObj);
 398                 }
 399                 return files;
 400             }
 401         },
 402         AnnoOnSuperAndSubClass_Inherited_Legacy(
 403         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 404                 + &quot;getAnnotationVal = \&quot;@Foo(2)\&quot;, &quot;</span>
<span class="line-modified"> 405                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
 406                 + // override every annotation on superClass
<span class="line-modified"> 407                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
 408                 + // ignores inherited annotations
<span class="line-modified"> 409                 &quot;getDeclAnnoVal = \&quot;@Foo(2)\&quot;, &quot; // ignores inherited</span>
<span class="line-modified"> 410                 + &quot;getAnnosArgs = {\&quot;@Foo(2)\&quot;}, &quot;</span>
<span class="line-modified"> 411                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(2)\&quot; })&quot;, // ignores inherited</span>
 412         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
 413                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified"> 414                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
<span class="line-modified"> 415                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
 416                 + // ignores inherited annotations
 417                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot; + // ignores inherited
 418                 &quot;getAnnosArgs = {}, &quot; + &quot;getDeclAnnosArgs = {})&quot;) { // ignores inherited
 419 
 420             @Override
 421             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 422                     String className) {
 423                 String anno = &quot;&quot;;
 424                 String replaceVal = &quot;&quot;;
 425                 String contents = &quot;&quot;;
 426                 JavaFileObject srcFileObj = null;
 427                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 428 
 429                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 430                         + getExpectedContainer() + &quot;\n&quot;;
 431                 StringBuilder commonStmts = new StringBuilder();
 432 
 433                 /*
 434                 Sample test src
 435                 @Retention(RetentionPolicy.RUNTIME)
</pre>
<hr />
<pre>
 464                     anno = &quot;@Foo(1)&quot;;
 465                     replaceVal = commonStmts + &quot;\n&quot; + anno;
 466                     String superClassContents = srcType.getTemplate()
 467                             .replace(&quot;#CN&quot;, SUPERCLASS).replace(&quot;#REPLACE&quot;, replaceVal);
 468 
 469                     // Contents for SubClass that extends SuperClass
 470                     anno = &quot;@Foo(2)&quot;;
 471                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 472                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 473                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
 474                             .replace(&quot;#REPLACE&quot;, replaceVal);
 475 
 476                     contents = superClassContents + subClassContents;
 477                     srcFileObj = Helper.getFile(className, contents);
 478                     files = Arrays.asList(srcFileObj);
 479                 }
 480                 return files;
 481             }
 482         },
 483         BasicContainer_Legacy(
<span class="line-modified"> 484         &quot;@ExpectedBase(value=Foo.class, &quot;</span>
 485                 + &quot;getAnnotationVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 486                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 487                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
 488                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot; + &quot;getAnnosArgs = {}, &quot;
 489                 + &quot;getDeclAnnosArgs = {} )&quot;,
 490         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 491                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
<span class="line-modified"> 492                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 493                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 494                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
<span class="line-modified"> 495                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 496                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;} )&quot;) {</span>
 497 
 498             @Override
 499             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 500                     String className) {
 501                 String anno = &quot;&quot;;
 502                 String replaceVal = &quot;&quot;;
 503                 String testSrc = &quot;&quot;;
 504                 String pkgInfoContents = &quot;&quot;;
 505                 String contents = &quot;&quot;;
 506 
 507                 JavaFileObject pkgFileObj = null;
 508                 JavaFileObject srcFileObj = null;
 509                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 510 
 511                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 512                         + getExpectedContainer() + &quot;\n&quot;;
 513                 StringBuilder commonStmts = new StringBuilder();
 514 
 515                 anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
 516                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
 563                         @interface FooContainer {
 564                         Foo[] value();
 565                         }
 566 
 567                         @ExpectedBase
 568                         @ExpectedContainer
 569                         @FooContainer(value = {@Foo(1), @Foo(2)})
 570                         class A {}
 571                          */
 572                         replaceVal = expectedVals + anno;
 573                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
 574                                 .replace(&quot;#REPLACE&quot;, replaceVal);
 575                         contents = commonStmts + testSrc;
 576                         srcFileObj = Helper.getFile(className, contents);
 577                         files = Arrays.asList(srcFileObj);
 578                 }
 579                 return files;
 580             }
 581         },
 582         SingleAndContainerOnSuper_Legacy(
<span class="line-modified"> 583         &quot;@ExpectedBase(value=Foo.class, &quot;</span>
<span class="line-modified"> 584                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;,&quot;</span>
 585                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 586                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
 587                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified"> 588                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 589                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;, &quot;</span>
<span class="line-modified"> 590                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 591                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;} )&quot;,</span>
 592         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 593                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
 594                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 595                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
 596                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified"> 597                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 598                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
<span class="line-modified"> 599                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 600                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;} )&quot;) {</span>
 601 
 602             @Override
 603             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 604                     String className) {
 605                 String anno = &quot;&quot;;
 606                 String replaceVal = &quot;&quot;;
 607                 String testSrc = &quot;&quot;;
 608                 String pkgInfoContents = &quot;&quot;;
 609                 String contents = &quot;&quot;;
 610 
 611                 JavaFileObject pkgFileObj = null;
 612                 JavaFileObject srcFileObj = null;
 613                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 614 
 615                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 616                         + getExpectedContainer() + &quot;\n&quot;;
 617                 StringBuilder commonStmts = new StringBuilder();
 618 
 619                 anno = Helper.ContentVars.BASEANNO.getVal() +
 620                        Helper.ContentVars.LEGACYCONTAINER.getVal();
</pre>
<hr />
<pre>
 672                         }
 673 
 674                         @ExpectedBase
 675                         @ExpectedContainer
 676                         @Foo(0)
 677                         @FooContainer(value = {@Foo(1), @Foo(2)})
 678                         class A {}
 679                          */
 680                         replaceVal = expectedVals + anno;
 681                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
 682                                 .replace(&quot;#REPLACE&quot;, replaceVal);
 683                         contents = commonStmts + testSrc;
 684 
 685                         srcFileObj = Helper.getFile(className, contents);
 686                         files = Arrays.asList(srcFileObj);
 687                 }
 688                 return files;
 689             }
 690         },
 691         BasicContainer_Inherited_Legacy(
<span class="line-modified"> 692         &quot;@ExpectedBase(value=Foo.class, &quot;</span>
 693                 + &quot;getAnnotationVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 694                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
 695                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
 696                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
 697                 + &quot;getAnnosArgs = {}, &quot;
 698                 + &quot;getDeclAnnosArgs = {} )&quot;,
 699         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 700                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
<span class="line-modified"> 701                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
 702                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
 703                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified"> 704                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
 705                 + &quot;getDeclAnnosArgs = {} )&quot;) {
 706 
 707             @Override
 708             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 709                     String className) {
 710                 String anno = &quot;&quot;;
 711                 String replaceVal = &quot;&quot;;
 712                 String contents = &quot;&quot;;
 713                 JavaFileObject srcFileObj = null;
 714                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 715 
 716                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 717                         + getExpectedContainer() + &quot;\n&quot;;
 718                 StringBuilder commonStmts = getCommonStmts(false);
 719 
 720                 /*
 721                 Sample testSrc:
 722                 @Retention(RetentionPolicy.RUNTIME)
 723                 @Inherited
 724                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 746                     String superClassContents = srcType.getTemplate()
 747                             .replace(&quot;#CN&quot;, SUPERCLASS)
 748                             .replace(&quot;#REPLACE&quot;, replaceVal);
 749 
 750                     // Contents for SubClass that extends SuperClass
 751                     replaceVal = expectedVals;
 752                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 753                             .replace(&quot;#CN&quot;, className)
 754                             .replace(&quot;#SN&quot;, SUPERCLASS)
 755                             .replace(&quot;#REPLACE&quot;, replaceVal);
 756 
 757                     contents = superClassContents + subClassContents;
 758                     srcFileObj = Helper.getFile(className, contents);
 759                     files = Arrays.asList(srcFileObj);
 760                 }
 761                 return files;
 762             }
 763         },
 764         ContainerOnSuperSingleOnSub_Inherited_Legacy(
 765         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 766                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
 767                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 768                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 769                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified"> 770                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;,&quot;</span>
<span class="line-modified"> 771                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified"> 772                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;})&quot;,</span>
 773         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 774                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
 775                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 776                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 777                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
 778                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 779                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
 780                 + &quot;getDeclAnnosArgs = {})&quot;) {
 781 
 782             @Override
 783             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 784                     String className) {
 785                 String anno = &quot;&quot;;
 786                 String replaceVal = &quot;&quot;;
 787                 String contents = &quot;&quot;;
 788                 JavaFileObject srcFileObj = null;
 789                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 790 
 791                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 792                         + getExpectedContainer() + &quot;\n&quot;;
 793                 StringBuilder commonStmts = getCommonStmts(false);
 794 
 795                 /*
 796                 Sample testSrc:
 797                 @Retention(RetentionPolicy.RUNTIME)
 798                 @Inherited
 799                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 825 
 826                     // Contents for SubClass that extends SuperClass
 827                     anno = Helper.ContentVars.BASEANNO.getVal();
 828                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 829                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 830                             .replace(&quot;#CN&quot;, className)
 831                             .replace(&quot;#SN&quot;, SUPERCLASS)
 832                             .replace(&quot;#REPLACE&quot;, replaceVal);
 833 
 834                     contents = superClassContents + subClassContents;
 835                     srcFileObj = Helper.getFile(className, contents);
 836                     files = Arrays.asList(srcFileObj);
 837                 }
 838                 return files;
 839             }
 840         },
 841         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
 842         // fail with ordering issues
 843         ContainerAndSingleOnSuperSingleOnSub_Inherited_Legacy(
 844         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 845                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
 846                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 847                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 848                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified"> 849                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;,&quot;</span>
<span class="line-modified"> 850                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified"> 851                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;})&quot;,</span>
 852         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 853                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
 854                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 855                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(0)\&quot;}, &quot;</span>
<span class="line-modified"> 856                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
 857                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 858                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
 859                 + &quot;getDeclAnnosArgs = {})&quot;) {
 860 
 861             @Override
 862             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 863                     String className) {
 864                 String anno = &quot;&quot;;
 865                 String replaceVal = &quot;&quot;;
 866                 String contents = &quot;&quot;;
 867                 JavaFileObject srcFileObj = null;
 868                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 869 
 870                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 871                         + getExpectedContainer() + &quot;\n&quot;;
 872                 StringBuilder commonStmts = getCommonStmts(false);
 873 
 874                 /*
 875                 Sample testSrc:
 876                 @Retention(RetentionPolicy.RUNTIME)
 877                 @Inherited
 878                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 904                             .replace(&quot;#REPLACE&quot;, replaceVal);
 905 
 906                     // Contents for SubClass that extends SuperClass
 907                     anno = Helper.ContentVars.BASEANNO.getVal();
 908                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 909                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 910                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
 911                             .replace(&quot;#REPLACE&quot;, replaceVal);
 912 
 913                     contents = superClassContents + subClassContents;
 914                     srcFileObj = Helper.getFile(className, contents);
 915                     files = Arrays.asList(srcFileObj);
 916                 }
 917                 return files;
 918             }
 919         },
 920         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
 921         // fail with ordering issues
 922         SingleOnSuperContainerOnSub_Inherited_Legacy(
 923         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified"> 924                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
 925                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 926                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 927                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
 928                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified"> 929                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;},&quot;</span>
 930                 + &quot;getDeclAnnosArgs = {})&quot;,
 931         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified"> 932                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
 933                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified"> 934                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified"> 935                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified"> 936                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified"> 937                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified"> 938                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;})&quot;) {</span>
 939 
 940             @Override
 941             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
 942                     String className) {
 943                 String anno = &quot;&quot;;
 944                 String replaceVal = &quot;&quot;;
 945                 String contents = &quot;&quot;;
 946 
 947                 JavaFileObject srcFileObj = null;
 948                 Iterable&lt;? extends JavaFileObject&gt; files = null;
 949 
 950                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
 951                         + getExpectedContainer() + &quot;\n&quot;;
 952                 StringBuilder commonStmts = getCommonStmts(false);
 953 
 954                 /*
 955                 Sample testSrc:
 956                 @Retention(RetentionPolicy.RUNTIME)
 957                 @Inherited
 958                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
 981                             .replace(&quot;#REPLACE&quot;, replaceVal);
 982 
 983                     //Contents for SubClass that extends SuperClass
 984                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
 985                     replaceVal = expectedVals + &quot;\n&quot; + anno;
 986                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
 987                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
 988                             .replace(&quot;#REPLACE&quot;, replaceVal);
 989 
 990                     contents = superClassContents + subClassContents;
 991                     srcFileObj = Helper.getFile(className, contents);
 992                     files = Arrays.asList(srcFileObj);
 993                 }
 994                 return files;
 995             }
 996         },
 997         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
 998         // fail with ordering issues
 999         SingleOnSuperContainerAndSingleOnSub_Inherited_Legacy(
1000         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1001                 + &quot;getAnnotationVal = \&quot;@Foo(3)\&quot;, &quot;</span>
1002                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1003                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;}, &quot;</span>
1004                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1005                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;},&quot;</span>
<span class="line-modified">1006                 + &quot;getDeclAnnoVal = \&quot;@Foo(3)\&quot;,&quot;</span>
<span class="line-modified">1007                 + &quot;getAnnosArgs = {\&quot;@Foo(3)\&quot;},&quot;</span>
<span class="line-modified">1008                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(3)\&quot;})&quot;,</span>
1009         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1010                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1011                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1012                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;}, &quot;</span>
1013                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1014                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;},&quot;</span>
<span class="line-modified">1015                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1016                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1017                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;})&quot;) {</span>
1018 
1019             @Override
1020             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1021                     String className) {
1022                 String anno = &quot;&quot;;
1023                 String replaceVal = &quot;&quot;;
1024                 String contents = &quot;&quot;;
1025 
1026                 JavaFileObject srcFileObj = null;
1027                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1028 
1029                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1030                         + getExpectedContainer() + &quot;\n&quot;;
1031                 StringBuilder commonStmts = getCommonStmts(false);
1032 
1033                 /*
1034                 Sample testSrc:
1035                 @Retention(RetentionPolicy.RUNTIME)
1036                 @Inherited
1037                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1060                             .replace(&quot;#REPLACE&quot;, replaceVal);
1061 
1062                     //Contents for SubClass that extends SuperClass
1063                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal()
1064                             + &quot;@Foo(3)&quot;;
1065                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1066                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1067                             .replace(&quot;#CN&quot;, className).replace(&quot;#SN&quot;, SUPERCLASS)
1068                             .replace(&quot;#REPLACE&quot;, replaceVal);
1069 
1070                     contents = superClassContents + subClassContents;
1071                     srcFileObj = Helper.getFile(className, contents);
1072                     files = Arrays.asList(srcFileObj);
1073                 }
1074                 return files;
1075             }
1076         },
1077         BasicRepeatable(
1078         &quot;@ExpectedBase(value=Foo.class, &quot;
1079                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1080                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot; }, &quot;</span>
<span class="line-modified">1081                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1082                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1083                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;},&quot;</span>
<span class="line-modified">1084                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;})&quot;,</span>
1085         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1086                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1087                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1088                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1089                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1090                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1091                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;} )&quot;) {</span>
1092 
1093             @Override
1094             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1095                     String className) {
1096                 String anno = &quot;&quot;;
1097                 String replaceVal = &quot;&quot;;
1098                 String testSrc = &quot;&quot;;
1099                 String pkgInfoContents = &quot;&quot;;
1100                 String contents = &quot;&quot;;
1101 
1102                 JavaFileObject pkgFileObj = null;
1103                 JavaFileObject srcFileObj = null;
1104                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1105 
1106                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1107                         + getExpectedContainer() + &quot;\n&quot;;
1108                 StringBuilder commonStmts = new StringBuilder();
1109 
1110                 anno = Helper.ContentVars.REPEATABLEANNO.getVal();
1111                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
1162 
1163                         @ExpectedBase
1164                         @ExpectedContainer
1165                         @Foo(1) @Foo(2)
1166                         class A { }
1167                          */
1168                         replaceVal = expectedVals + anno;
1169                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
1170                                 .replace(&quot;#REPLACE&quot;, replaceVal);
1171                         contents = commonStmts + testSrc;
1172                         srcFileObj = Helper.getFile(className, contents);
1173                         files = Arrays.asList(srcFileObj);
1174                 }
1175                 return files;
1176             }
1177         },
1178         BasicContainerRepeatable(
1179         &quot;@ExpectedBase(value=Foo.class, &quot;
1180                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
1181                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1182                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1183                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1184                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1185                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1186                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;},&quot;</span>
<span class="line-modified">1187                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;})&quot;,</span>
1188         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1189                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
1190                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1191                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1192                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1193                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1194                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1195                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1196                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;} )&quot;) {</span>
1197 
1198             @Override
1199             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1200                     String className) {
1201                 String anno = &quot;&quot;;
1202                 String replaceVal = &quot;&quot;;
1203                 String testSrc = &quot;&quot;;
1204                 String pkgInfoContents = &quot;&quot;;
1205                 String contents = &quot;&quot;;
1206 
1207                 JavaFileObject pkgFileObj = null;
1208                 JavaFileObject srcFileObj = null;
1209                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1210 
1211                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1212                         + getExpectedContainer() + &quot;\n&quot;;
1213                 StringBuilder commonStmts = new StringBuilder();
1214 
1215                 anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
1216                 commonStmts.append(Helper.ContentVars.IMPORTEXPECTED.getVal())
</pre>
<hr />
<pre>
1266                         }
1267 
1268                         @ExpectedBase
1269                         @ExpectedContainer
1270                         @FooContainer(value = {@Foo(1), @Foo(2)})
1271                         class A { }
1272                          */
1273                         replaceVal = expectedVals + anno;
1274                         testSrc = srcType.getTemplate().replace(&quot;#CN&quot;, className)
1275                                 .replace(&quot;#REPLACE&quot;, replaceVal);
1276                         contents = commonStmts + testSrc;
1277                         srcFileObj = Helper.getFile(className, contents);
1278                         files = Arrays.asList(srcFileObj);
1279                 }
1280                 return files;
1281             }
1282         },
1283         BasicContainerRepeatable_Inherited(
1284         &quot;@ExpectedBase(value=Foo.class, &quot;
1285                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1286                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1287                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1288                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1289                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
1290                 + &quot;getDeclAnnosArgs = {})&quot;,
1291         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1292                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
<span class="line-modified">1293                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1294                 + &quot;getDeclAnnosVals = { \&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1295                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1296                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1297                 + &quot;getDeclAnnosArgs = {})&quot;) {
1298 
1299             @Override
1300             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1301                     String className) {
1302                 String anno = &quot;&quot;;
1303                 String replaceVal = &quot;&quot;;
1304                 String contents = &quot;&quot;;
1305                 JavaFileObject srcFileObj = null;
1306                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1307 
1308                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1309                         + getExpectedContainer() + &quot;\n&quot;;
1310                 StringBuilder commonStmts = getCommonStmts(true);
1311                 /*
1312                 Sample testSrc:
1313                 @Retention(RetentionPolicy.RUNTIME)
1314                 @Inherited
1315                 @Repeatable(FooContainer.class)
1316                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1339                             .replace(&quot;#CN&quot;, SUPERCLASS)
1340                             .replace(&quot;#REPLACE&quot;, replaceVal);
1341 
1342                     // Contents for SubClass that extends SuperClass
1343                     replaceVal = expectedVals;
1344                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1345                             .replace(&quot;#CN&quot;, className)
1346                             .replace(&quot;#SN&quot;, SUPERCLASS)
1347                             .replace(&quot;#REPLACE&quot;, replaceVal);
1348 
1349                     contents = superClassContents + subClassContents;
1350                     srcFileObj = Helper.getFile(className, contents);
1351                     files = Arrays.asList(srcFileObj);
1352                 }
1353                 return files;
1354             }
1355         },
1356         RepeatableAnnoInherited(
1357         &quot;@ExpectedBase(value=Foo.class, &quot;
1358                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1359                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1360                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1361                 + // ignores inherited annotations
1362                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
1363                 + // ignores inherited
<span class="line-modified">1364                 &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
1365                 + &quot;getDeclAnnosArgs = {})&quot;, // ignores inherited
1366         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1367                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
<span class="line-modified">1368                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1369                 + &quot;getDeclAnnosVals = { \&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;}, &quot;
1370                 + // ignores inherited annotations
1371                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
1372                 + // ignores inherited
<span class="line-modified">1373                 &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1374                 + &quot;getDeclAnnosArgs = {})&quot;) { // ignores inherited
1375 
1376             @Override
1377             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1378                     String className) {
1379                 String anno = &quot;&quot;;
1380                 String replaceVal = &quot;&quot;;
1381                 String contents = &quot;&quot;;
1382                 JavaFileObject srcFileObj = null;
1383                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1384 
1385                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1386                         + getExpectedContainer() + &quot;\n&quot;;
1387                 StringBuilder commonStmts = getCommonStmts(true);
1388                 /*
1389                 Sample testSrc:
1390                 @Retention(RetentionPolicy.RUNTIME)
1391                 @Inherited
1392                 @Repeatable(FooContainer.class)
1393                 @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1417                             .replace(&quot;#REPLACE&quot;, replaceVal);
1418 
1419                     // Contents for SubClass that extends SuperClass
1420                     replaceVal = expectedVals;
1421                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1422                             .replace(&quot;#CN&quot;, className)
1423                             .replace(&quot;#SN&quot;, SUPERCLASS)
1424                             .replace(&quot;#REPLACE&quot;, replaceVal);
1425 
1426                     contents = superClassContents + subClassContents;
1427                     srcFileObj = Helper.getFile(className, contents);
1428                     files = Arrays.asList(srcFileObj);
1429                 }
1430                 return files;
1431             }
1432         },
1433         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1434         // fail with ordering issues
1435         SingleAnnoWithContainer(
1436         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1437                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
1438                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1439                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1440                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1441                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1442                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;,&quot;</span>
<span class="line-modified">1443                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;, \&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;},&quot;</span>
<span class="line-modified">1444                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;, \&quot;@Foo(1)\&quot;,\&quot;@Foo(2)\&quot;})&quot;,</span>
1445         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1446                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1447                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1448                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1449                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1450                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1451                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1452                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1453                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;})&quot;) {</span>
1454 
1455             @Override
1456             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1457                     String className) {
1458                 String anno = &quot;&quot;;
1459                 String replaceVal = &quot;&quot;;
1460                 String testSrc = &quot;&quot;;
1461                 String pkgInfoContents = &quot;&quot;;
1462                 String contents = &quot;&quot;;
1463 
1464                 JavaFileObject pkgFileObj = null;
1465                 JavaFileObject srcFileObj = null;
1466                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1467 
1468                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1469                         + getExpectedContainer() + &quot;\n&quot;;
1470                 StringBuilder commonStmts = new StringBuilder();
1471 
1472                 anno = Helper.ContentVars.BASEANNO.getVal() + &quot; &quot;
1473                         + Helper.ContentVars.LEGACYCONTAINER.getVal();
</pre>
<hr />
<pre>
1526                         }
1527 
1528                         @ExpectedBase
1529                         @ExpectedContainer
1530                         @Foo(0) @FooContainer(value = {@Foo(1), @Foo(2)})
1531                         class A { }
1532                          */
1533                         replaceVal = expectedVals + anno;
1534                         testSrc = srcType.getTemplate()
1535                                 .replace(&quot;#CN&quot;, className)
1536                                 .replace(&quot;#REPLACE&quot;, replaceVal);
1537                         contents = commonStmts + testSrc;
1538                         srcFileObj = Helper.getFile(className, contents);
1539                         files = Arrays.asList(srcFileObj);
1540                 }
1541                 return files;
1542             }
1543         },
1544         AnnoOnSuperAndSubClass_Inherited(
1545         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1546                 + &quot;getAnnotationVal = \&quot;@Foo(1)\&quot;, &quot;</span>
<span class="line-modified">1547                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(1)\&quot; }, &quot;</span>
1548                 + // override every annotation on superClass
<span class="line-modified">1549                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(1)\&quot;}, &quot;</span>
1550                 + // ignores inherited annotations
<span class="line-modified">1551                 &quot;getDeclAnnoVal = \&quot;@Foo(1)\&quot;, &quot; // ignores inherited</span>
<span class="line-modified">1552                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;}, &quot;</span>
<span class="line-modified">1553                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(1)\&quot; })&quot;, // ignores inherited</span>
1554         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
1555                 + &quot;getAnnotationVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1556                 + &quot;getAnnotationsVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(1)\&quot; }, &quot;</span>
<span class="line-modified">1557                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(1)\&quot;}, &quot;</span>
1558                 + // ignores inherited annotations
1559                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot; + // ignores inherited
1560                 &quot;getAnnosArgs = {}, &quot; + &quot;getDeclAnnosArgs = {})&quot;) {
1561 
1562             @Override
1563             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1564                     String className) {
1565                 String anno = &quot;&quot;;
1566                 String replaceVal = &quot;&quot;;
1567                 String contents = &quot;&quot;;
1568                 JavaFileObject srcFileObj = null;
1569                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1570 
1571                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1572                         + getExpectedContainer() + &quot;\n&quot;;
1573                 StringBuilder commonStmts = getCommonStmts(true);
1574 
1575                 /*
1576                 Sample testSrc:
1577                 @Retention(RetentionPolicy.RUNTIME)
</pre>
<hr />
<pre>
1605                             .replace(&quot;#REPLACE&quot;, replaceVal);
1606 
1607                     // Contents for SubClass that extends SuperClass
1608                     replaceVal = expectedVals + &quot;\n&quot; + &quot;@Foo(1)&quot;;
1609                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1610                             .replace(&quot;#CN&quot;, className)
1611                             .replace(&quot;#SN&quot;, SUPERCLASS)
1612                             .replace(&quot;#REPLACE&quot;, replaceVal);
1613 
1614                     contents = superClassContents + subClassContents;
1615                     srcFileObj = Helper.getFile(className, contents);
1616                     files = Arrays.asList(srcFileObj);
1617                 }
1618                 return files;
1619             }
1620         },
1621         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1622         // fail with ordering issues
1623         RepeatableOnSuperSingleOnSub_Inherited(
1624         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1625                 + &quot;getAnnotationVal = \&quot;@Foo(3)\&quot;, &quot;</span>
1626                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1627                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(3)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1628                 + //override every annotation on superClass
<span class="line-modified">1629                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(3)\&quot;}, &quot;</span>
1630                 + // ignores inherited annotations
<span class="line-modified">1631                 &quot;getDeclAnnoVal = \&quot;@Foo(3)\&quot;, &quot; // ignores inherited</span>
<span class="line-modified">1632                 + &quot;getAnnosArgs = {\&quot;@Foo(3)\&quot;}, &quot;</span>
<span class="line-modified">1633                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(3)\&quot; })&quot;, // ignores inherited</span>
1634         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1635                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1636                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1637                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(3)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1638                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(3)\&quot;}, &quot;</span>
1639                 + // ignores inherited annotations
1640                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;, &quot;
<span class="line-modified">1641                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1642                 + &quot;getDeclAnnosArgs = {}) // ignores inherited &quot;) {
1643 
1644             @Override
1645             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1646                     String className) {
1647                 String anno = &quot;&quot;;
1648                 String replaceVal = &quot;&quot;;
1649                 String contents = &quot;&quot;;
1650                 JavaFileObject srcFileObj = null;
1651                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1652 
1653                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1654                         + getExpectedContainer() + &quot;\n&quot;;
1655                 StringBuilder commonStmts = getCommonStmts(true);
1656 
1657                 /*
1658                  Sample testSrc:
1659                  @Retention(RetentionPolicy.RUNTIME)
1660                  @Inherited
1661                  @Repeatable(FooContainer.class)
</pre>
<hr />
<pre>
1685                             .replace(&quot;#REPLACE&quot;, replaceVal);
1686 
1687                     //Contents for SubClass that extends SuperClass
1688                     anno = &quot;@Foo(3)&quot;;
1689                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1690                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1691                             .replace(&quot;#CN&quot;, className)
1692                             .replace(&quot;#SN&quot;, SUPERCLASS)
1693                             .replace(&quot;#REPLACE&quot;, replaceVal);
1694                     contents = superClassContents + subClassContents;
1695                     srcFileObj = Helper.getFile(className, contents);
1696                     files = Arrays.asList(srcFileObj);
1697                 }
1698                 return files;
1699             }
1700         },
1701         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1702         // fail with ordering issues
1703         SingleOnSuperRepeatableOnSub_Inherited(
1704         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1705                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
1706                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1707                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1708                 + //override every annotation on superClass
<span class="line-modified">1709                 &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1710                 + // ignores inherited annotations
1711                 &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;// ignores inherited
<span class="line-modified">1712                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;}, &quot;</span>
<span class="line-modified">1713                 + &quot;getDeclAnnosArgs = { \&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;})&quot;,</span>
1714         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1715                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1716                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1717                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1718                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
1719                 + // ignores inherited annotations
<span class="line-modified">1720                 &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;// ignores inherited</span>
<span class="line-modified">1721                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1722                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;})&quot;) {</span>
1723 
1724             @Override
1725             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1726                     String className) {
1727                 String anno = &quot;&quot;;
1728                 String replaceVal = &quot;&quot;;
1729                 String contents = &quot;&quot;;
1730                 JavaFileObject srcFileObj = null;
1731                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1732 
1733                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1734                         + getExpectedContainer() + &quot;\n&quot;;
1735                 StringBuilder commonStmts = getCommonStmts(true);
1736 
1737                 /*
1738                  Sample testSrc:
1739                  @Retention(RetentionPolicy.RUNTIME)
1740                  @Inherited
1741                  @Repeatable(FooContainer.class)
1742                  @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1766 
1767                     //Contents for SubClass that extends SuperClass
1768                     anno = Helper.ContentVars.REPEATABLEANNO.getVal();
1769                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1770                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1771                             .replace(&quot;#CN&quot;, className)
1772                             .replace(&quot;#SN&quot;, SUPERCLASS)
1773                             .replace(&quot;#REPLACE&quot;, replaceVal);
1774 
1775                     contents = superClassContents + subClassContents;
1776                     srcFileObj = Helper.getFile(className, contents);
1777                     files = Arrays.asList(srcFileObj);
1778                 }
1779                 return files;
1780             }
1781         },
1782         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1783         // fail with ordering issues
1784         ContainerOnSuperSingleOnSub_Inherited(
1785         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1786                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
1787                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1788                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1789                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified">1790                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;,&quot;</span>
<span class="line-modified">1791                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified">1792                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;})&quot;,</span>
1793         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1794                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1795                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1796                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1797                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
1798                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1799                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1800                 + &quot;getDeclAnnosArgs = {})&quot;) {
1801 
1802             @Override
1803             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1804                     String className) {
1805                 String anno = &quot;&quot;;
1806                 String replaceVal = &quot;&quot;;
1807                 String contents = &quot;&quot;;
1808                 JavaFileObject srcFileObj = null;
1809                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1810 
1811                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1812                         + getExpectedContainer() + &quot;\n&quot;;
1813                 StringBuilder commonStmts = getCommonStmts(true);
1814 
1815                 /*
1816                  Sample testSrc:
1817                  @Retention(RetentionPolicy.RUNTIME)
1818                  @Inherited
1819                  @Repeatable(FooContainer.class)
</pre>
<hr />
<pre>
1844 
1845                     //Contents for SubClass that extends SuperClass
1846                     anno = Helper.ContentVars.BASEANNO.getVal();
1847                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1848                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1849                             .replace(&quot;#CN&quot;, className)
1850                             .replace(&quot;#SN&quot;, SUPERCLASS)
1851                             .replace(&quot;#REPLACE&quot;, replaceVal);
1852 
1853                     contents = superClassContents + subClassContents;
1854                     srcFileObj = Helper.getFile(className, contents);
1855                     files = Arrays.asList(srcFileObj);
1856                 }
1857                 return files;
1858             }
1859         },
1860         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1861         // fail with ordering issues
1862         SingleOnSuperContainerOnSub_Inherited(
1863         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1864                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
1865                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1866                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1867                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
1868                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">1869                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;},&quot;</span>
<span class="line-modified">1870                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;})&quot;,</span>
1871         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1872                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1873                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1874                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">1875                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1876                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1877                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1878                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;})&quot;) {</span>
1879 
1880             @Override
1881             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1882                      String className) {
1883                 String anno = &quot;&quot;;
1884                 String replaceVal = &quot;&quot;;
1885                 String contents = &quot;&quot;;
1886                 JavaFileObject srcFileObj = null;
1887                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1888 
1889                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1890                         + getExpectedContainer() + &quot;\n&quot;;
1891                 StringBuilder commonStmts = getCommonStmts(true);
1892 
1893                 /*
1894                  Sample testSrc:
1895                  @Retention(RetentionPolicy.RUNTIME)
1896                  @Inherited
1897                  @Repeatable(FooContainer.class)
1898                  @interface Foo {int value() default Integer.MAX_VALUE;}
</pre>
<hr />
<pre>
1922 
1923                     //Contents for SubClass that extends SuperClass
1924                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal();
1925                     replaceVal = expectedVals + &quot;\n&quot; + anno;
1926                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
1927                             .replace(&quot;#CN&quot;, className)
1928                             .replace(&quot;#SN&quot;, SUPERCLASS)
1929                             .replace(&quot;#REPLACE&quot;, replaceVal);
1930 
1931                     contents = superClassContents + subClassContents;
1932                     srcFileObj = Helper.getFile(className, contents);
1933                     files = Arrays.asList(srcFileObj);
1934                 }
1935                 return files;
1936             }
1937         },
1938         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
1939         // fail with ordering issues
1940         SingleOnSuperContainerAndSingleOnSub_Inherited(
1941         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">1942                 + &quot;getAnnotationVal = \&quot;@Foo(3)\&quot;, &quot;</span>
1943                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1944                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;}, &quot;</span>
1945                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1946                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;},&quot;</span>
<span class="line-modified">1947                 + &quot;getDeclAnnoVal = \&quot;@Foo(3)\&quot;,&quot;</span>
<span class="line-modified">1948                 + &quot;getAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;, \&quot;@Foo(3)\&quot;},&quot;</span>
<span class="line-modified">1949                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(1)\&quot;, \&quot;@Foo(2)\&quot;, \&quot;@Foo(3)\&quot;})&quot;,</span>
1950         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">1951                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
1952                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">1953                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;}, &quot;</span>
1954                 + &quot;getDeclAnnosVals = {&quot;
<span class="line-modified">1955                 +       &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, \&quot;@Foo(3)\&quot;},&quot;</span>
<span class="line-modified">1956                 + &quot;getDeclAnnoVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;,&quot;</span>
<span class="line-modified">1957                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
<span class="line-modified">1958                 + &quot;getDeclAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;})&quot;) {</span>
1959 
1960             @Override
1961             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
1962                     String className) {
1963                 String anno = &quot;&quot;;
1964                 String replaceVal = &quot;&quot;;
1965                 String contents = &quot;&quot;;
1966                 JavaFileObject srcFileObj = null;
1967                 Iterable&lt;? extends JavaFileObject&gt; files = null;
1968                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
1969                         + getExpectedContainer() + &quot;\n&quot;;
1970                 StringBuilder commonStmts = getCommonStmts(true);
1971 
1972                 /*
1973                 Sample testSrc:
1974                 @Retention(RetentionPolicy.RUNTIME)
1975                 @Inherited
1976                 @interface Foo {int value() default Integer.MAX_VALUE;}
1977 
1978                 @Retention(RetentionPolicy.RUNTIME)
</pre>
<hr />
<pre>
2002                     //Contents for SubClass that extends SuperClass
2003                     anno = Helper.ContentVars.LEGACYCONTAINER.getVal()
2004                             + &quot;@Foo(3)&quot;;
2005                     replaceVal = expectedVals + &quot;\n&quot; + anno;
2006                     String subClassContents = SrcType.CLASSEXTENDS.getTemplate()
2007                             .replace(&quot;#CN&quot;, className)
2008                             .replace(&quot;#SN&quot;, SUPERCLASS)
2009                             .replace(&quot;#REPLACE&quot;, replaceVal);
2010 
2011                     contents = superClassContents + subClassContents;
2012                     srcFileObj = Helper.getFile(className, contents);
2013                     files = Arrays.asList(srcFileObj);
2014                 }
2015                 return files;
2016             }
2017         },
2018         // @ignore 8025924: Several test cases in repeatingAnnotations/combo/ReflectionTest
2019         // fail with ordering issues
2020         ContainerAndSingleOnSuperSingleOnSub_Inherited(
2021         &quot;@ExpectedBase(value=Foo.class, &quot;
<span class="line-modified">2022                 + &quot;getAnnotationVal = \&quot;@Foo(0)\&quot;, &quot;</span>
2023                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">2024                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">2025                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified">2026                 + &quot;getDeclAnnoVal = \&quot;@Foo(0)\&quot;,&quot;</span>
<span class="line-modified">2027                 + &quot;getAnnosArgs = {\&quot;@Foo(0)\&quot;},&quot;</span>
<span class="line-modified">2028                 + &quot;getDeclAnnosArgs = {\&quot;@Foo(0)\&quot;})&quot;,</span>
2029         &quot;@ExpectedContainer(value=FooContainer.class, &quot;
<span class="line-modified">2030                 + &quot;getAnnotationVal = \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;, &quot;</span>
2031                 + &quot;getAnnotationsVals = {&quot;
<span class="line-modified">2032                 + &quot;\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;, \&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;}, &quot;</span>
<span class="line-modified">2033                 + &quot;getDeclAnnosVals = {\&quot;ExpectedBase\&quot;, \&quot;ExpectedContainer\&quot;, \&quot;@Foo(0)\&quot;},&quot;</span>
2034                 + &quot;getDeclAnnoVal = \&quot;NULL\&quot;,&quot;
<span class="line-modified">2035                 + &quot;getAnnosArgs = {\&quot;@FooContainer({@Foo(1), @Foo(2)})\&quot;},&quot;</span>
2036                 + &quot;getDeclAnnosArgs = {})&quot;) {
2037 
2038             @Override
2039             public Iterable&lt;? extends JavaFileObject&gt; getTestFiles(SrcType srcType,
2040                     String className) {
2041                 String anno = &quot;&quot;;
2042                 String replaceVal = &quot;&quot;;
2043                 String contents = &quot;&quot;;
2044                 JavaFileObject srcFileObj = null;
2045                 Iterable&lt;? extends JavaFileObject&gt; files = null;
2046 
2047                 String expectedVals = &quot;\n&quot; + getExpectedBase() + &quot;\n&quot;
2048                         + getExpectedContainer() + &quot;\n&quot;;
2049                 StringBuilder commonStmts = getCommonStmts(true);
2050 
2051                 /*
2052                  Sample testSrc:
2053                  @Retention(RetentionPolicy.RUNTIME)
2054                  @Inherited
2055                  @Repeatable(FooContainer.class)
</pre>
</td>
</tr>
</table>
<center><a href="../NoTargetOnContainer2.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="TargetAnnoCombo.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>