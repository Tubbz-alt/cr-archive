<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/langtools/jdk/javadoc/doclet/testGeneratedBy/TestGeneratedBy.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (c) 2012, 2019, Oracle and/or its affiliates. All rights reserved.
 3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4  *
 5  * This code is free software; you can redistribute it and/or modify it
 6  * under the terms of the GNU General Public License version 2 only, as
 7  * published by the Free Software Foundation.
 8  *
 9  * This code is distributed in the hope that it will be useful, but WITHOUT
10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
12  * version 2 for more details (a copy is included in the LICENSE file that
13  * accompanied this code).
14  *
15  * You should have received a copy of the GNU General Public License version
16  * 2 along with this work; if not, write to the Free Software Foundation,
17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
18  *
19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
20  * or visit www.oracle.com if you need additional information or have any
21  * questions.
22  */
23 
24 /*
25  * @test
26  * @bug 8000418 8024288 8196202
27  * @summary Verify that files use a common Generated By string
28  * @library ../../lib
29  * @modules jdk.javadoc/jdk.javadoc.internal.tool
30  * @build javadoc.tester.*
31  * @run main TestGeneratedBy
32  */
33 
34 import javadoc.tester.JavadocTester;
35 
36 public class TestGeneratedBy extends JavadocTester {
37 
38     public static void main(String... args) throws Exception {
39         TestGeneratedBy tester = new TestGeneratedBy();
40         tester.runTests();
41     }
42 
43     @Test
44     public void testTimestamp() {
45         javadoc(&quot;-d&quot;, &quot;out-timestamp&quot;,
46             &quot;-sourcepath&quot;, testSrc,
47             &quot;pkg&quot;);
48         checkExit(Exit.OK);
49         checkFiles(false, &quot;allclasses-noframe.html&quot;);
50 
51         checkTimestamps(true);
52     }
53 
54     @Test
55     public void testNoTimestamp() {
56         javadoc(&quot;-d&quot;, &quot;out-notimestamp&quot;,
57             &quot;-notimestamp&quot;,
58             &quot;-sourcepath&quot;, testSrc,
59             &quot;pkg&quot;);
60         checkExit(Exit.OK);
61         checkFiles(false, &quot;allclasses-noframe.html&quot;);
62 
63         checkTimestamps(false);
64     }
65 
66     void checkTimestamps(boolean timestamp) {
67         checkTimestamps(timestamp,
68         &quot;pkg/MyClass.html&quot;,
69         &quot;pkg/package-summary.html&quot;,
70         &quot;pkg/package-tree.html&quot;,
71         &quot;constant-values.html&quot;,
72         &quot;overview-tree.html&quot;,
73         &quot;deprecated-list.html&quot;,
74         &quot;serialized-form.html&quot;,
75         &quot;help-doc.html&quot;,
76         &quot;index-all.html&quot;,
77         &quot;index.html&quot;);
78 
79     }
80 
81     void checkTimestamps(boolean timestamp, String... files) {
82         String version = System.getProperty(&quot;java.version&quot;);
83         String genBy = &quot;Generated by javadoc&quot;;
84         if (timestamp) genBy += &quot; (&quot; + version + &quot;) on &quot;;
85 
86         for (String file: files) {
87             // genBy is the current standard &quot;Generated by&quot; text
88             checkOutput(file, true, genBy);
89 
90             // These are older versions of the &quot;Generated by&quot; text
91             checkOutput(file, false,
92                 (timestamp
93                     ? &quot;Generated by javadoc (version&quot;
94                     : &quot;Generated by javadoc (&quot;),
95                 &quot;Generated by javadoc on&quot;);
96         }
97     }
98 }
99 
    </pre>
  </body>
</html>