<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/langtools/jdk/javadoc/doclet/testModules/TestModuleServices.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8178067 8192007 8182765 8184205
 27  * @summary tests the module&#39;s services, such as provides and uses
 28  * @modules jdk.javadoc/jdk.javadoc.internal.api
 29  *          jdk.javadoc/jdk.javadoc.internal.tool
 30  *          jdk.compiler/com.sun.tools.javac.api
 31  *          jdk.compiler/com.sun.tools.javac.main
 32  * @library ../../lib /tools/lib
 33  * @build toolbox.ToolBox toolbox.ModuleBuilder javadoc.tester.*
 34  * @run main TestModuleServices
 35  */
 36 
 37 import java.nio.file.Files;
 38 import java.nio.file.Path;
 39 import java.nio.file.Paths;
 40 
 41 import javadoc.tester.JavadocTester;
 42 import toolbox.ModuleBuilder;
 43 import toolbox.ToolBox;
 44 
 45 public class TestModuleServices extends JavadocTester {
 46 
 47     public final ToolBox tb;
 48     public static void main(String... args) throws Exception {
 49         TestModuleServices tester = new TestModuleServices();
 50         tester.runTests(m -&gt; new Object[] { Paths.get(m.getName()) });
 51     }
 52 
 53     public TestModuleServices() {
 54         tb = new ToolBox();
 55     }
 56 
 57     @Test
 58     public void checkModuleServicesDescription(Path base) throws Exception {
 59         Path src = Files.createDirectories(base.resolve(&quot;src&quot;));
 60         ModuleBuilder mb = new ModuleBuilder(tb, &quot;moduleService&quot;)
 61                 .comment(&quot;This module exports a package containing the declaration of a service type.&quot;)
 62                 .exports(&quot;pkgService&quot;)
 63                 .classes(&quot;/**A Package that has a service.*/ package pkgService;&quot;)
 64                 .classes(&quot;package pkgService; /**A service Interface for service providers.*/ &quot;
 65                         + &quot;public interface Service {\n&quot;
 66                         + &quot;    /**\n&quot;
 67                         + &quot;     * A test method for the service.\n&quot;
 68                         + &quot;     */\n&quot;
 69                         + &quot;    void testMethod1();\n&quot;
 70                         + &quot;    /**\n&quot;
 71                         + &quot;     * Another test method for the service.\n&quot;
 72                         + &quot;     */\n&quot;
 73                         + &quot;    void testMethod2();\n&quot;
 74                         + &quot;}&quot;);
 75         mb.write(src);
 76         mb = new ModuleBuilder(tb, &quot;moduleServiceProvider&quot;)
 77                 .comment(&quot;This module provides an implementation of a service.\n&quot; +
 78                         &quot;@provides pkgService.Service Provides a service whose name is ServiceProvider.&quot;)
 79                 .requires(&quot;moduleService&quot;)
 80                 .provides(&quot;pkgService.Service&quot;, &quot;pkgServiceProvider.ServiceProvider&quot;)
 81                 .classes(&quot;/**A Package that has a service provider.*/ package pkgServiceProvider;&quot;)
 82                 .classes(&quot;package pkgServiceProvider;\n&quot;
 83                         + &quot;public class ServiceProvider implements pkgService.Service {\n&quot;
 84                         + &quot;    /**\n&quot;
 85                         + &quot;     * {@inheritDoc}\n&quot;
 86                         + &quot;     */\n&quot;
 87                         + &quot;    public void testMethod1() {}\n&quot;
 88                         + &quot;    /**\n&quot;
 89                         + &quot;     * This is an internal implementation so the documentation will not be seen.\n&quot;
 90                         + &quot;     */\n&quot;
 91                         + &quot;    public void testMethod2() {}\n&quot;
 92                         + &quot;}&quot;);
 93         mb.write(src);
 94         mb = new ModuleBuilder(tb, &quot;moduleServiceUser&quot;)
 95                 .comment(&quot;This module uses a service defined in another module.\n&quot;
 96                         + &quot;@uses pkgService.Service If no other provider is found, a default internal implementation will be used.&quot;)
 97                 .requires(&quot;moduleService&quot;)
 98                 .uses(&quot;pkgService.Service&quot;)
 99                 .classes(&quot;/**A Package that has a service user.*/ package pkgServiceUser;&quot;)
100                 .classes(&quot;package pkgServiceUser;\n&quot;
101                         + &quot;/**\n&quot;
102                         + &quot; * A service user class.\n&quot;
103                         + &quot; */\n&quot;
104                         + &quot;public class ServiceUser {\n&quot;
105                         + &quot;}&quot;);
106         mb.write(src);
107         mb = new ModuleBuilder(tb, &quot;moduleServiceUserNoDescription&quot;)
108                 .comment(&quot;This is another module that uses a service defined in another module.\n&quot;
109                         + &quot;@uses pkgService.Service&quot;)
110                 .requires(&quot;moduleService&quot;)
111                 .uses(&quot;pkgService.Service&quot;)
112                 .classes(&quot;/**A Package that has a service user with no description.*/ package pkgServiceUserNoDescription;&quot;)
113                 .classes(&quot;package pkgServiceUserNoDescription;\n&quot;
114                         + &quot;/**\n&quot;
115                         + &quot; * A service user class.\n&quot;
116                         + &quot; */\n&quot;
117                         + &quot;public class ServiceUserNoDescription {\n&quot;
118                         + &quot;}&quot;);
119         mb.write(src);
120 
121         javadoc(&quot;-d&quot;, base.resolve(&quot;out&quot;).toString(),
122                 &quot;-quiet&quot;,
123                 &quot;-noindex&quot;,
124                 &quot;--module-source-path&quot;, src.toString(),
125                 &quot;--module&quot;, &quot;moduleService,moduleServiceProvider,moduleServiceUser,moduleServiceUserNoDescription&quot;,
126                 &quot;pkgService&quot;, &quot;moduleServiceProvider/pkgServiceProvider&quot;, &quot;moduleServiceUser/pkgServiceUser&quot;,
127                 &quot;moduleServiceUserNoDescription/pkgServiceUserNoDescription&quot;);
128         checkExit(Exit.OK);
129 
130         checkOutput(&quot;moduleServiceProvider/module-summary.html&quot;, true,
131                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot;
132                 + &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;../moduleService/pkgService/Service.html\&quot; &quot;
133                 + &quot;title=\&quot;interface in pkgService\&quot;&gt;Service&lt;/a&gt;&lt;/th&gt;\n&quot;
134                 + &quot;&lt;td class=\&quot;colLast\&quot;&gt;\n&quot;
135                 + &quot;&lt;div class=\&quot;block\&quot;&gt;Provides a service whose name is ServiceProvider.&lt;/div&gt;\n&quot;
136                 + &quot;&lt;/td&gt;\n&quot;
137                 + &quot;&lt;/tr&gt;&quot;);
138         checkOutput(&quot;moduleServiceUser/module-summary.html&quot;, true,
139                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot;
140                 + &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;../moduleService/pkgService/Service.html\&quot; title=\&quot;interface in pkgService\&quot;&gt;Service&lt;/a&gt;&lt;/th&gt;\n&quot;
141                 + &quot;&lt;td class=\&quot;colLast\&quot;&gt;\n&quot;
142                 + &quot;&lt;div class=\&quot;block\&quot;&gt;If no other provider is found, a default internal implementation will be used.&lt;/div&gt;\n&quot;
143                 + &quot;&lt;/td&gt;\n&quot;
144                 + &quot;&lt;/tr&gt;&quot;);
145         checkOutput(&quot;moduleServiceUserNoDescription/module-summary.html&quot;, true,
146                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot;
147                 + &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;../moduleService/pkgService/Service.html\&quot; title=\&quot;interface in pkgService\&quot;&gt;Service&lt;/a&gt;&lt;/th&gt;\n&quot;
148                 + &quot;&lt;td class=\&quot;colLast\&quot;&gt;\n&quot;
149                 + &quot;&lt;div class=\&quot;block\&quot;&gt;A service Interface for service providers.&lt;/div&gt;\n&quot;
150                 + &quot;&lt;/td&gt;\n&quot;
151                 + &quot;&lt;/tr&gt;&quot;);
152         checkOutput(&quot;moduleServiceProvider/module-summary.html&quot;, false,
153                 &quot;A service Interface for service providers.&quot;);
154         checkOutput(&quot;moduleServiceUser/module-summary.html&quot;, false,
155                 &quot;A service Interface for service providers.&quot;);
156     }
157 
158     @Test
159     public void checkUsesNoApiTagModuleModeDefault(Path base) throws Exception {
160         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
161                 .comment(&quot;module m.\n@provides p1.A abc&quot;) // bogus tag
162                 .uses(&quot;p1.A&quot;)
163                 .uses(&quot;p1.B&quot;)
164                 .exports(&quot;p1&quot;)
165                 .classes(&quot;package p1; public class A {}&quot;)
166                 .classes(&quot;package p1; public class B {}&quot;);
167                 mb.write(base);
168 
169         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
170                 &quot;-quiet&quot;,
171                 &quot;--module-source-path&quot;, base.toString(),
172                 &quot;--module&quot;, &quot;m&quot;);
173         checkExit(Exit.OK);
174 
175         checkOutput(&quot;m/module-summary.html&quot;, false,
176                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
177     }
178 
179     @Test
180     public void checkUsesNoApiTagModuleModeAll(Path base) throws Exception {
181         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
182                 .uses(&quot;p1.A&quot;)
183                 .uses(&quot;p1.B&quot;)
184                 .exports(&quot;p1&quot;)
185                 .classes(&quot;package p1; public class A {}&quot;)
186                 .classes(&quot;package p1; public class B {}&quot;);
187         mb.write(base);
188 
189         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
190                 &quot;-quiet&quot;,
191                 &quot;--show-module-contents&quot;, &quot;all&quot;,
192                 &quot;--module-source-path&quot;, base.toString(),
193                 &quot;--module&quot;, &quot;m&quot;);
194         checkExit(Exit.OK);
195 
196         checkOutput(&quot;m/module-summary.html&quot;, true,
197                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
198 
199         checkOutput(&quot;m/module-summary.html&quot;, true,
200                 &quot;&lt;div class=\&quot;usesSummary\&quot;&gt;\n&lt;table&gt;\n&quot; +
201                 &quot;&lt;caption&gt;&lt;span&gt;Uses&lt;/span&gt;&lt;span class=\&quot;tabEnd\&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/caption&gt;\n&quot; +
202                 &quot;&lt;tr&gt;\n&quot; +
203                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;col\&quot;&gt;Type&lt;/th&gt;\n&quot; +
204                 &quot;&lt;th class=\&quot;colLast\&quot; scope=\&quot;col\&quot;&gt;Description&lt;/th&gt;\n&quot; +
205                 &quot;&lt;/tr&gt;\n&quot; +
206                 &quot;&lt;tbody&gt;\n&quot; +
207                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot; +
208                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p1/A.html\&quot; title=\&quot;class in p1\&quot;&gt;A&lt;/a&gt;&lt;/th&gt;\n&quot; +
209                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&amp;nbsp;&lt;/td&gt;\n&quot; +
210                 &quot;&lt;/tr&gt;\n&quot; +
211                 &quot;&lt;tr class=\&quot;rowColor\&quot;&gt;\n&quot; +
212                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p1/B.html\&quot; title=\&quot;class in p1\&quot;&gt;B&lt;/a&gt;&lt;/th&gt;\n&quot; +
213                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&amp;nbsp;&lt;/td&gt;\n&quot; +
214                 &quot;&lt;/tr&gt;\n&quot; +
215                 &quot;&lt;/tbody&gt;\n&quot; +
216                 &quot;&lt;/table&gt;\n&quot;);
217 
218     }
219 
220     @Test
221     public void checkUsesWithApiTagModuleModeDefault(Path base) throws Exception {
222         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
223                 .comment(&quot;module m.\n@uses p1.A&quot;)
224                 .uses(&quot;p1.A&quot;)
225                 .uses(&quot;p1.B&quot;)
226                 .exports(&quot;p1&quot;)
227                 .classes(&quot;package p1; public class A {}&quot;)
228                 .classes(&quot;package p1; public class B {}&quot;);
229         mb.write(base);
230 
231         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
232                 &quot;-quiet&quot;,
233                 &quot;--module-source-path&quot;, base.toString(),
234                 &quot;--module&quot;, &quot;m&quot;);
235         checkExit(Exit.OK);
236 
237         checkOutput(&quot;m/module-summary.html&quot;, true,
238                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
239 
240         checkOutput(&quot;m/module-summary.html&quot;, true,
241                 &quot;&lt;div class=\&quot;usesSummary\&quot;&gt;\n&lt;table&gt;\n&quot; +
242                 &quot;&lt;caption&gt;&lt;span&gt;Uses&lt;/span&gt;&lt;span class=\&quot;tabEnd\&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/caption&gt;\n&quot; +
243                 &quot;&lt;tr&gt;\n&quot; +
244                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;col\&quot;&gt;Type&lt;/th&gt;\n&quot; +
245                 &quot;&lt;th class=\&quot;colLast\&quot; scope=\&quot;col\&quot;&gt;Description&lt;/th&gt;\n&quot; +
246                 &quot;&lt;/tr&gt;\n&quot; +
247                 &quot;&lt;tbody&gt;\n&quot; +
248                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot; +
249                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p1/A.html\&quot; title=\&quot;class in p1\&quot;&gt;A&lt;/a&gt;&lt;/th&gt;\n&quot; +
250                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&amp;nbsp;&lt;/td&gt;\n&quot; +
251                 &quot;&lt;/tr&gt;\n&quot; +
252                 &quot;&lt;/tbody&gt;\n&quot; +
253                 &quot;&lt;/table&gt;\n&quot;);
254 
255     }
256 
257     @Test
258     public void checkProvidesNoApiTagModuleModeDefault(Path base) throws Exception {
259         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
260                 .comment(&quot;module m.\n@uses p1.A&quot;)
261                 .provides(&quot;p1.A&quot;, &quot;p1.B&quot;)
262                 .exports(&quot;p1&quot;)
263                 .classes(&quot;package p1; public interface A {}&quot;)
264                 .classes(&quot;package p1; public class B implements A {}&quot;)
265                 .provides(&quot;p2.A&quot;, &quot;p2.B&quot;)
266                 .exports(&quot;p2&quot;)
267                 .classes(&quot;package p2; public interface A {}&quot;)
268                 .classes(&quot;package p2; public class B implements A {}&quot;);
269         mb.write(base);
270 
271         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
272                 &quot;-quiet&quot;,
273                 &quot;--module-source-path&quot;, base.toString(),
274                 &quot;--module&quot;, &quot;m&quot;);
275 
276         checkExit(Exit.OK);
277 
278         checkOutput(&quot;m/module-summary.html&quot;, false,
279                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
280     }
281 
282     @Test
283     public void checkProvidesNoApiTagModuleModeAll(Path base) throws Exception {
284         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
285                 .comment(&quot;module m.\n@uses p1.A&quot;) // bogus uses tag
286                 .provides(&quot;p1.A&quot;, &quot;p1.B&quot;)
287                 .exports(&quot;p1&quot;)
288                 .classes(&quot;package p1; public interface A {}&quot;)
289                 .classes(&quot;package p1; public class B implements A {}&quot;)
290                 .provides(&quot;p2.A&quot;, &quot;p2.B&quot;)
291                 .exports(&quot;p2&quot;)
292                 .classes(&quot;package p2; public interface A {}&quot;)
293                 .classes(&quot;package p2; public class B implements A {}&quot;);
294         mb.write(base);
295 
296         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
297                 &quot;-quiet&quot;,
298                 &quot;--show-module-contents&quot;, &quot;all&quot;,
299                 &quot;--module-source-path&quot;, base.toString(),
300                 &quot;--module&quot;, &quot;m&quot;);
301 
302         checkExit(Exit.OK);
303 
304         checkOutput(&quot;m/module-summary.html&quot;, true,
305                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
306 
307         checkOutput(&quot;m/module-summary.html&quot;, true,
308                 &quot;&lt;div class=\&quot;providesSummary\&quot;&gt;\n&lt;table&gt;\n&quot; +
309                 &quot;&lt;caption&gt;&lt;span&gt;Provides&lt;/span&gt;&lt;span class=\&quot;tabEnd\&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/caption&gt;\n&quot; +
310                 &quot;&lt;tr&gt;\n&quot; +
311                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;col\&quot;&gt;Type&lt;/th&gt;\n&quot; +
312                 &quot;&lt;th class=\&quot;colLast\&quot; scope=\&quot;col\&quot;&gt;Description&lt;/th&gt;\n&quot; +
313                 &quot;&lt;/tr&gt;\n&quot; +
314                 &quot;&lt;tbody&gt;\n&quot; +
315                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot; +
316                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p1/A.html\&quot; title=\&quot;interface in p1\&quot;&gt;A&lt;/a&gt;&lt;/th&gt;\n&quot; +
317                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&amp;nbsp;&lt;br&gt;(&lt;span class=\&quot;implementationLabel\&quot;&gt;Implementation(s):&lt;/span&gt;&amp;nbsp;&lt;a href=\&quot;p1/B.html\&quot; title=\&quot;class in p1\&quot;&gt;B&lt;/a&gt;)&lt;/td&gt;\n&quot; +
318                 &quot;&lt;/tr&gt;\n&quot; +
319                 &quot;&lt;tr class=\&quot;rowColor\&quot;&gt;\n&quot; +
320                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p2/A.html\&quot; title=\&quot;interface in p2\&quot;&gt;A&lt;/a&gt;&lt;/th&gt;\n&quot; +
321                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&amp;nbsp;&lt;br&gt;(&lt;span class=\&quot;implementationLabel\&quot;&gt;Implementation(s):&lt;/span&gt;&amp;nbsp;&lt;a href=\&quot;p2/B.html\&quot; title=\&quot;class in p2\&quot;&gt;B&lt;/a&gt;)&lt;/td&gt;\n&quot; +
322                 &quot;&lt;/tr&gt;\n&quot; +
323                 &quot;&lt;/tbody&gt;\n&quot;);
324 
325     }
326 
327     @Test
328     public void checkProvidesWithApiTagModuleModeDefault(Path base) throws Exception {
329         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
330                 .comment(&quot;module m.\n@provides p1.A abc&quot;)
331                 .provides(&quot;p1.A&quot;, &quot;p1.B&quot;)
332                 .exports(&quot;p1&quot;)
333                 .classes(&quot;package p1; public interface A {}&quot;)
334                 .classes(&quot;package p1; public class B implements A {}&quot;)
335                 .provides(&quot;p2.A&quot;, &quot;p2.B&quot;)
336                 .exports(&quot;p2&quot;)
337                 .classes(&quot;package p2; public interface A {}&quot;)
338                 .classes(&quot;package p2; public class B implements A {}&quot;);
339         mb.write(base);
340 
341         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
342                 &quot;-quiet&quot;,
343                 &quot;--module-source-path&quot;, base.toString(),
344                 &quot;--module&quot;, &quot;m&quot;);
345 
346         checkExit(Exit.OK);
347 
348         checkOutput(&quot;m/module-summary.html&quot;, true,
349                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
350 
351         checkOutput(&quot;m/module-summary.html&quot;, true,
352                 &quot;&lt;div class=\&quot;providesSummary\&quot;&gt;\n&lt;table&gt;\n&quot; +
353                 &quot;&lt;caption&gt;&lt;span&gt;Provides&lt;/span&gt;&lt;span class=\&quot;tabEnd\&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/caption&gt;\n&quot; +
354                 &quot;&lt;tr&gt;\n&quot; +
355                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;col\&quot;&gt;Type&lt;/th&gt;\n&quot; +
356                 &quot;&lt;th class=\&quot;colLast\&quot; scope=\&quot;col\&quot;&gt;Description&lt;/th&gt;\n&quot; +
357                 &quot;&lt;/tr&gt;\n&quot; +
358                 &quot;&lt;tbody&gt;\n&quot; +
359                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot; +
360                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p1/A.html\&quot; title=\&quot;interface in p1\&quot;&gt;A&lt;/a&gt;&lt;/th&gt;\n&quot; +
361                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;\n&quot; +
362                 &quot;&lt;div class=\&quot;block\&quot;&gt;abc&lt;/div&gt;\n&lt;/td&gt;\n&quot; +
363                 &quot;&lt;/tr&gt;\n&quot; +
364                 &quot;&lt;/tbody&gt;\n&quot; +
365                 &quot;&lt;/table&gt;\n&quot;);
366 
367     }
368 
369     @Test
370     public void checkUsesProvidesWithApiTagsModeDefault(Path base) throws Exception {
371         ModuleBuilder mb = new ModuleBuilder(tb, &quot;m&quot;)
372                 .comment(&quot;module m.\n@provides p1.A abc\n@uses p2.B def&quot;)
373                 .provides(&quot;p1.A&quot;, &quot;p1.B&quot;)
374                 .exports(&quot;p1&quot;)
375                 .classes(&quot;package p1; public interface A {}&quot;)
376                 .classes(&quot;package p1; public class B implements A {}&quot;)
377                 .provides(&quot;p2.A&quot;, &quot;p2.B&quot;)
378                 .uses(&quot;p2.B&quot;)
379                 .exports(&quot;p2&quot;)
380                 .classes(&quot;package p2; public interface A {}&quot;)
381                 .classes(&quot;package p2; public class B implements A {}&quot;);
382         mb.write(base);
383 
384         javadoc(&quot;-d&quot;, base.toString() + &quot;/out&quot;,
385                 &quot;-quiet&quot;,
386                 &quot;--module-source-path&quot;, base.toString(),
387                 &quot;--module&quot;, &quot;m&quot;);
388 
389         checkExit(Exit.OK);
390 
391         checkOutput(&quot;m/module-summary.html&quot;, true,
392                 &quot;&lt;h2&gt;Services&lt;/h2&gt;&quot;);
393 
394         checkOutput(&quot;m/module-summary.html&quot;, true,
395                 &quot;&lt;div class=\&quot;providesSummary\&quot;&gt;\n&lt;table&gt;\n&quot; +
396                 &quot;&lt;caption&gt;&lt;span&gt;Provides&lt;/span&gt;&lt;span class=\&quot;tabEnd\&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/caption&gt;\n&quot; +
397                 &quot;&lt;tr&gt;\n&quot; +
398                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;col\&quot;&gt;Type&lt;/th&gt;\n&quot; +
399                 &quot;&lt;th class=\&quot;colLast\&quot; scope=\&quot;col\&quot;&gt;Description&lt;/th&gt;\n&quot; +
400                 &quot;&lt;/tr&gt;\n&quot; +
401                 &quot;&lt;tbody&gt;\n&quot; +
402                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot; +
403                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p1/A.html\&quot; title=\&quot;interface in p1\&quot;&gt;A&lt;/a&gt;&lt;/th&gt;\n&quot; +
404                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;\n&quot; +
405                 &quot;&lt;div class=\&quot;block\&quot;&gt;abc&lt;/div&gt;\n&lt;/td&gt;\n&quot; +
406                 &quot;&lt;/tr&gt;\n&quot; +
407                 &quot;&lt;/tbody&gt;\n&quot; +
408                 &quot;&lt;/table&gt;&quot;,
409                 &quot;&lt;div class=\&quot;usesSummary\&quot;&gt;\n&lt;table&gt;\n&quot; +
410                 &quot;&lt;caption&gt;&lt;span&gt;Uses&lt;/span&gt;&lt;span class=\&quot;tabEnd\&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/caption&gt;\n&quot; +
411                 &quot;&lt;tr&gt;\n&quot; +
412                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;col\&quot;&gt;Type&lt;/th&gt;\n&quot; +
413                 &quot;&lt;th class=\&quot;colLast\&quot; scope=\&quot;col\&quot;&gt;Description&lt;/th&gt;\n&quot; +
414                 &quot;&lt;/tr&gt;\n&quot; +
415                 &quot;&lt;tbody&gt;\n&quot; +
416                 &quot;&lt;tr class=\&quot;altColor\&quot;&gt;\n&quot; +
417                 &quot;&lt;th class=\&quot;colFirst\&quot; scope=\&quot;row\&quot;&gt;&lt;a href=\&quot;p2/B.html\&quot; title=\&quot;class in p2\&quot;&gt;B&lt;/a&gt;&lt;/th&gt;\n&quot; +
418                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;\n&quot; +
419                 &quot;&lt;div class=\&quot;block\&quot;&gt;def&lt;/div&gt;\n&lt;/td&gt;\n&quot; +
420                 &quot;&lt;/tr&gt;\n&quot; +
421                 &quot;&lt;/tbody&gt;\n&quot; +
422                 &quot;&lt;/table&gt;\n&quot;);
423 
424     }
425 
426 }
    </pre>
  </body>
</html>