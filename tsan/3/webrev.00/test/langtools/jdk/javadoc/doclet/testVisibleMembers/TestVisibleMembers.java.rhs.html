<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames test/langtools/jdk/javadoc/doclet/testVisibleMembers/TestVisibleMembers.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>  1 /*
  2  * Copyright (c) 2002, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8025091 8198890
 27  * @summary Verify the presence visible members in the case of
 28  *          member hiding and overridding.
 29  * @library /tools/lib ../../lib
 30  * @modules jdk.javadoc/jdk.javadoc.internal.tool
 31  * @build javadoc.tester.* toolbox.ToolBox builder.ClassBuilder
 32  * @run main TestVisibleMembers
 33  */
 34 
 35 import java.nio.file.Path;
 36 import java.nio.file.Paths;
 37 
 38 import builder.AbstractBuilder;
 39 import builder.AbstractBuilder.Comment.Kind;
 40 import builder.ClassBuilder;
 41 import builder.ClassBuilder.*;
 42 
 43 import toolbox.ToolBox;
 44 import builder.ClassBuilder;
 45 
 46 import javadoc.tester.JavadocTester;
 47 
 48 public class TestVisibleMembers extends JavadocTester {
 49 
 50     final ToolBox tb;
 51     public static void main(String... args) throws Exception {
 52         TestVisibleMembers tester = new TestVisibleMembers();
 53         tester.runTests(m -&gt; new Object[] { Paths.get(m.getName()) });
 54     }
 55 
 56     TestVisibleMembers() {
 57         tb = new ToolBox();
 58     }
 59 
 60     @Test
 61     public void testChronoDiamondLeafDetail(Path base) throws Exception {
 62         Path srcDir = base.resolve(&quot;src&quot;);
 63         emitChronoDiamondLeaf(srcDir);
 64 
 65         Path outDir = base.resolve(&quot;out&quot;);
 66         javadoc(&quot;-d&quot;, outDir.toString(),
 67                 &quot;-html5&quot;,
 68                 &quot;--override-methods=detail&quot;,
 69                 &quot;-sourcepath&quot;, srcDir.toString(),
 70                 &quot;p&quot;);
 71         checkExit(Exit.OK);
 72 
 73         checkOrder(&quot;p/C.html&quot;, &quot;METHOD SUMMARY&quot;,
 74                 &quot;boolean&quot;, &quot;equals&quot;, &quot;java.lang.Object&quot;, &quot;Method equals in p.C&quot;,
 75                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;obj&quot;,  &quot;Method with in p.C&quot;,
 76                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;obj&quot;, &quot;long&quot;, &quot;lvalue&quot;, &quot;Method with in p.C&quot;,
 77                 &quot;METHOD DETAIL&quot;);
 78         checkOutput(&quot;p/C.html&quot;, false, &quot;BImpl&quot;);
 79 
 80         checkOrder(&quot;p/E.html&quot;, &quot;METHOD SUMMARY&quot;,
 81                 &quot;boolean&quot;, &quot;equals&quot;, &quot;java.lang.Object&quot;, &quot;Method equals in p.E&quot;,
 82                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;Method with in p.E&quot;,
 83                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;obj&quot;, &quot;long&quot;, &quot;lvalue&quot;, &quot;Method with in p.E&quot;,
 84                 &quot;METHOD DETAIL&quot;);
 85         checkOutput(&quot;p/E.html&quot;, false, &quot;EImpl&quot;);
 86     }
 87 
 88     @Test
 89     public void testChronoDiamondLeafSummary(Path base) throws Exception {
 90         Path srcDir = base.resolve(&quot;src&quot;);
 91         emitChronoDiamondLeaf(srcDir);
 92 
 93         Path outDir = base.resolve(&quot;out-member&quot;);
 94         javadoc(&quot;-d&quot;, outDir.toString(),
 95                 &quot;-html5&quot;,
 96                 &quot;--override-methods=summary&quot;,
 97                 &quot;-sourcepath&quot;, srcDir.toString(),
 98                 &quot;p&quot;);
 99         checkExit(Exit.OK);
100 
101         checkOrder(&quot;p/C.html&quot;, &quot;METHOD SUMMARY&quot;,
102                 &quot;boolean&quot;, &quot;equals&quot;, &quot;java.lang.Object&quot;, &quot;Method equals in p.C&quot;,
103                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;obj&quot;, &quot;Method with in p.C&quot;,
104                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;obj&quot;, &quot;long&quot;, &quot;lvalue&quot;, &quot;Method with in p.C&quot;,
105                 &quot;METHOD DETAIL&quot;);
106         checkOutput(&quot;p/C.html&quot;, false, &quot;BImpl&quot;);
107 
108         checkOrder(&quot;p/E.html&quot;, &quot;METHOD SUMMARY&quot;,
109                 &quot;boolean&quot;, &quot;equals&quot;, &quot;java.lang.Object&quot;, &quot;Method equals in p.E&quot;,
110                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;Method with in p.E&quot;,
111                 &quot;C&quot;, &quot;with&quot;, &quot;java.lang.Object&quot;, &quot;long&quot;, &quot;lvalue&quot;, &quot;Method with in p.E&quot;,
112                 &quot;METHOD DETAIL&quot;);
113         checkOutput(&quot;p/E.html&quot;, false, &quot;EImpl&quot;);
114     }
115 
116     // see j.t.TemporalAdjuster
117     void emitChronoDiamondLeaf(Path srcDir) throws Exception {
118 
119         // Interface A
120         MethodBuilder mbWith1 = MethodBuilder
121                 .parse(&quot;default Object with(Object obj) {return null;}&quot;);
122         MethodBuilder mbWith2 = MethodBuilder
123                 .parse(&quot;default Object with(Object obj, long lvalue) {return null;}&quot;);
124 
125         new ClassBuilder(tb, &quot;p.A&quot;)
126                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
127                 .addMembers(mbWith1, mbWith2)
128                 .write(srcDir);
129 
130         // Interface B
131         mbWith1.setComments(&quot;{@inheritDoc}&quot;, &quot;@param obj an object&quot;,
132                 &quot;@return something&quot;);
133 
134         mbWith2.setComments(&quot;{@inheritDoc}&quot;, &quot;@param obj an object&quot;,
135                 &quot;@param lvalue an lvalue&quot;, &quot;@return something&quot;);
136 
137         new ClassBuilder(tb, &quot;p.B&quot;)
138                 .setModifiers( &quot;public&quot;, &quot;interface&quot;)
139                 .setExtends(&quot;A&quot;)
140                 .addMembers(mbWith1, mbWith2)
141                 .write(srcDir);
142 
143         // Class BImpl
144         MethodBuilder mb31 = MethodBuilder.parse(&quot;C with(Object obj) {return null;}&quot;);
145         MethodBuilder mb32 = MethodBuilder.parse(&quot;C with(Object obj, Long lobj) {return null;}&quot;);
146         new ClassBuilder(tb, &quot;p.BImpl&lt;C extends B&gt;&quot;)
147                 .setModifiers( &quot;abstract&quot;, &quot;class&quot;)
148                 .addImplements(&quot;B&quot;)
149                 .addMembers(mb31, mb32)
150                 .write(srcDir);
151 
152         // Class C
153         new ClassBuilder(tb, &quot;p.C&quot;)
154                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
155                 .setExtends(&quot;BImpl&quot;)
156                 .addMembers(mbWith1.setReturn(&quot;C&quot;)
157                         .setModifiers(&quot;public&quot;)
158                         .setComments(AbstractBuilder.Comment.Kind.AUTO))
159                 .addMembers(mbWith2.setReturn(&quot;C&quot;)
160                         .setModifiers(&quot;public&quot;)
161                         .setComments(AbstractBuilder.Comment.Kind.AUTO))
162                 .addMembers(MethodBuilder.parse(&quot;public boolean equals(Object obj) { return false;}&quot;))
163                 .write(srcDir);
164 
165         // Class EImpl
166         MethodBuilder mb41 = MethodBuilder.parse(&quot;C with(Object obj) {return null;}&quot;)
167                 .setComments(Kind.NO_API_COMMENT);
168         MethodBuilder mb42 = MethodBuilder.parse(&quot;C with(Object obj, Long lobj) {return null;}&quot;);
169         new ClassBuilder(tb, &quot;p.EImpl&lt;C extends B&gt;&quot;)
170                 .setModifiers( &quot;abstract&quot;, &quot;class&quot;)
171                 .addImplements(&quot;B&quot;)
172                 .addMembers(mb41, mb42)
173                 .write(srcDir);
174 
175         // Class E
176         MethodBuilder mb51 = MethodBuilder.parse(&quot;public C with(Object obj) {return null;}&quot;);
177         MethodBuilder mb52 = MethodBuilder.parse(&quot;public C with(Object obj, long lvalue) {return null;}&quot;);
178         MethodBuilder mb53 = MethodBuilder.parse(&quot;public boolean equals(Object obj) { return false;}&quot;);
179         new ClassBuilder(tb, &quot;p.E&quot;)
180                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
181                 .setExtends(&quot;EImpl&quot;)
182                 .addMembers(mb51, mb52, mb53)
183                 .write(srcDir);
184     }
185 
186     @Test
187     public void testNestedInterfaceDetail(Path base) throws Exception {
188         Path srcDir = base.resolve(&quot;src&quot;);
189         emitNestedInterface(srcDir);
190 
191         Path outDir = base.resolve(&quot;out&quot;);
192         javadoc(&quot;-d&quot;, outDir.toString(),
193                 &quot;-html5&quot;,
194                 &quot;--override-methods=detail&quot;,
195                 &quot;-sourcepath&quot;, srcDir.toString(),
196                 &quot;p&quot;);
197         checkExit(Exit.OK);
198 
199         checkOutput(&quot;p/TA.html&quot;, false, &quot;getTA&quot;);
200 
201         checkOrder(&quot;p/Bar.html&quot;,
202                 &quot;doSomething()&quot;,
203                 &quot;getTA()&quot;);
204     }
205 
206     @Test
207     public void testNestedInterfaceSummary(Path base) throws Exception {
208         Path srcDir = base.resolve(&quot;src&quot;);
209         emitNestedInterface(srcDir);
210 
211         Path outDir = base.resolve(&quot;out&quot;);
212         javadoc(&quot;-d&quot;, outDir.toString(),
213                 &quot;-html5&quot;,
214                 &quot;--override-methods=summary&quot;,
215                 &quot;-sourcepath&quot;, srcDir.toString(),
216                 &quot;p&quot;);
217         checkExit(Exit.OK);
218 
219         checkOutput(&quot;p/TA.html&quot;, false, &quot;getTA&quot;);
220 
221         checkOrder(&quot;p/Bar.html&quot;,
222                 &quot;doSomething()&quot;,
223                 &quot;getTA()&quot;);
224 
225         checkOrder(&quot;p/Foo.html&quot;,
226                 &quot;Methods declared in&quot;,
227                 &quot;Bar.html&quot;,
228                 &quot;getTA&quot;);
229     }
230 
231     // See jx.s.TransferHandler
232     void emitNestedInterface(Path srcDir) throws Exception {
233 
234         ClassBuilder innerI = new ClassBuilder(tb, &quot;HasTA&quot;)
235                 .setModifiers(&quot;interface&quot;);
236         MethodBuilder interfaceMethod = MethodBuilder.parse(&quot;public TA getTa();&quot;)
237                 .setComments(Kind.NO_API_COMMENT);
238         innerI.addMembers(interfaceMethod);
239 
240         new ClassBuilder(tb, &quot;p.TA&quot;)
241                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
242                 .addImplements(&quot;java.io.Serializable&quot;)
243                 .addNestedClasses(innerI)
244                 .write(srcDir);
245 
246         new ClassBuilder(tb, &quot;p.Foo&quot;)
247                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
248                 .setExtends(&quot;Bar&quot;)
249                 .write(srcDir);
250 
251         new ClassBuilder(tb, &quot;p.Bar&quot;)
252                 .setModifiers(&quot;public&quot;, &quot;abstract&quot;, &quot;class&quot;)
253                 .addImplements(&quot;TA.HasTA&quot;)
254                 .addMembers(
255                     MethodBuilder.parse(&quot;public void doSomething(){}&quot;),
256                     MethodBuilder.parse(&quot;public TA getTA(){return null;}&quot;)
257                 ).write(srcDir);
258     }
259 
260     @Test
261     public void testStreamsMissingLinksDetail(Path base) throws Exception {
262         Path srcDir = base.resolve(&quot;src&quot;);
263         emitStreamsMissingLinks(srcDir);
264 
265         Path outDir = base.resolve(&quot;out&quot;);
266         javadoc(&quot;-d&quot;, outDir.toString(),
267                 &quot;-html5&quot;,
268                 &quot;--override-methods=detail&quot;,
269                 &quot;-sourcepath&quot;, srcDir.toString(),
270                 &quot;p&quot;);
271         checkExit(Exit.OK);
272 
273         checkOrder(&quot;p/C.html&quot;,
274                 &quot;METHOD DETAIL&quot;,
<a name="1" id="anc1"></a><span class="line-modified">275                 &quot;public&quot;, &quot;void&quot;, &quot;method&quot;,</span>
276                 &quot;See Also:&quot;,
277                 &quot;sub()&quot;,
278                 &quot;sub1()&quot;);
279 
280         checkOrder(&quot;p/ILong.html&quot;,
281                 &quot;METHOD DETAIL&quot;,
282                 &quot;default&quot;, &quot;void&quot;, &quot;forEach&quot;, &quot;java.util.function.Consumer&quot;,
283                 &quot;java.lang.Long&quot;, &quot;action&quot;,
284                 &quot;Do you see me&quot;, &quot;#forEach(java.util.function.LongConsumer)&quot;,
285                 &quot;forEach(LongConsumer)&quot;,
286                 &quot;END OF CLASS DATA&quot;);
287 
288         checkOrder(&quot;p/IImpl.html&quot;,
289                 &quot;METHOD DETAIL&quot;,
290                 &quot;Method sub in p.IImpl&quot;,
291                 &quot;Specified by:&quot;, &quot;I.html&quot;, &quot;II.html&quot;,
292                 &quot;END OF CLASS DATA&quot;);
293     }
294 
295     @Test
296     public void testStreamsMissingLinksSummary(Path base) throws Exception {
297         Path srcDir = base.resolve(&quot;src&quot;);
298         emitStreamsMissingLinks(srcDir);
299 
300         Path outDir = base.resolve(&quot;out&quot;);
301         javadoc(&quot;-d&quot;, outDir.toString(),
302                 &quot;-html5&quot;,
303                 &quot;--override-methods=summary&quot;,
304                 &quot;-sourcepath&quot;, srcDir.toString(),
305                 &quot;p&quot;);
306         checkExit(Exit.OK);
307 
308         checkOrder(&quot;p/C.html&quot;,
309                 &quot;METHOD DETAIL&quot;,
<a name="2" id="anc2"></a><span class="line-modified">310                 &quot;public&quot;, &quot;void&quot;, &quot;method&quot;, &quot;See Also:&quot;, &quot;sub()&quot;, &quot;I.sub1()&quot;,</span>
311                 &quot;public&quot;, &quot;void&quot;, &quot;m&quot;, &quot;Method in C. See&quot;, &quot;I.length()&quot;
312                 );
313 
314         checkOrder(&quot;p/ILong.html&quot;,
315                 &quot;METHOD DETAIL&quot;,
316                 &quot;default&quot;, &quot;void&quot;, &quot;forEach&quot;, &quot;java.util.function.Consumer&quot;,
317                 &quot;java.lang.Long&quot;, &quot;action&quot;,
318                 &quot;Do you see me&quot;, &quot;QLong.html#forEach(Q)&quot;,
319                 &quot;QLong.forEach(LongConsumer)&quot;,
320                 &quot;END OF CLASS DATA&quot;);
321 
322         checkOrder(&quot;p/IImpl.html&quot;,
323                 &quot;METHOD DETAIL&quot;,
324                 &quot;Method sub in p.IImpl&quot;,
325                 &quot;Specified by:&quot;, &quot;I.html&quot;,
326                 &quot;END OF CLASS DATA&quot;);
327 
328         checkUnique(&quot;p/IImpl.html&quot;, &quot;Specified by:&quot;);
329     }
330 
331     // see j.u.Spliterator
332     void emitStreamsMissingLinks(Path srcDir) throws Exception {
333         new ClassBuilder(tb, &quot;p.I&quot;)
334                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
335                 .addMembers(
336                         MethodBuilder.parse(&quot;public I sub();&quot;),
337                         MethodBuilder.parse(&quot;public I sub1();&quot;),
338                         MethodBuilder.parse(&quot;public int length();&quot;)
339                 ).write(srcDir);
340 
341         new ClassBuilder(tb, &quot;p.A&quot;)
342                 .setModifiers(&quot;abstract&quot;, &quot;class&quot;)
343                 .addImplements(&quot;I&quot;)
344                 .addMembers(
345                         MethodBuilder.parse(&quot;public I sub() {}&quot;),
346                         MethodBuilder.parse(&quot;public I sub1() {}&quot;),
347                         MethodBuilder.parse(&quot;public int length(){return 0;}&quot;)
348                                 .setComments(Kind.NO_API_COMMENT),
349                         MethodBuilder.parse(&quot;public void m(){}&quot;)
350                         .setComments(&quot;Method in C. See {@link #length()}.&quot;)
351                 ).write(srcDir);
352 
353         new ClassBuilder(tb, &quot;p.C&quot;)
354                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
355                 .setExtends(&quot;A&quot;).addImplements(&quot;I&quot;)
356                 .addMembers(
357                         MethodBuilder.parse(&quot;public I sub() {return null;}&quot;),
358                         MethodBuilder.parse(&quot;public I sub1() {return null;}&quot;)
359                                 .setComments(Kind.INHERIT_DOC),
360                         MethodBuilder.parse(&quot; public void method() {}&quot;)
361                                 .setComments(&quot;A method &quot;, &quot;@see #sub&quot;, &quot;@see #sub1&quot;),
362                         MethodBuilder.parse(&quot;public int length(){return 1;}&quot;)
363                                 .setComments(Kind.NO_API_COMMENT)
364                 ).write(srcDir);
365 
366         new ClassBuilder(tb, &quot;p.II&quot;)
367                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
368                 .setExtends(&quot;I&quot;)
369                 .addMembers(
370                         MethodBuilder.parse(&quot;default public I sub() {return null;}&quot;)
371                             .setComments(Kind.NO_API_COMMENT)
372                 ).write(srcDir);
373 
374         new ClassBuilder(tb, &quot;p.IImpl&quot;)
375                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
376                 .addImplements(&quot;II&quot;)
377                 .addMembers(
378                     MethodBuilder.parse(&quot;public I sub() {return null;}&quot;)
379                 ).write(srcDir);
380 
381         new ClassBuilder(tb, &quot;p.QLong&lt;P, Q, R&gt;&quot;)
382                 .setModifiers(&quot;public interface&quot;)
383                 .addMembers(
384                         MethodBuilder.parse(&quot;default void forEach(Q action) {}&quot;)
385                 ).write(srcDir);
386 
387         new ClassBuilder(tb, &quot;p.ILong&quot;)
388                 .addImports(&quot;java.util.function.*&quot;)
389                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
390                 .setExtends(&quot;QLong&lt;Long, LongConsumer, Object&gt;&quot;)
391                 .addMembers(
392                         MethodBuilder.parse(&quot;default void forEach(LongConsumer action) {}&quot;)
393                             .setComments(Kind.NO_API_COMMENT),
394                         MethodBuilder.parse(&quot;default void forEach(Consumer&lt;Long&gt; action) {}&quot;)
395                             .setComments(&quot;Do you see me {@link #forEach(LongConsumer)} ?&quot;)
396                 ).write(srcDir);
397     }
398 
399     @Test
400     public void testVisibleMemberTableDetail(Path base) throws Exception {
401         Path srcDir = base.resolve(&quot;src&quot;);
402         emitVisibleMemberTable(srcDir);
403 
404         Path outDir = base.resolve(&quot;out&quot;);
405         javadoc(&quot;-d&quot;, outDir.toString(),
406                 &quot;-html5&quot;,
407                 &quot;--override-methods=detail&quot;,
408                 &quot;-sourcepath&quot;, srcDir.toString(),
409                 &quot;p&quot;);
410         checkExit(Exit.OK);
411 
412         checkOrder(&quot;p/C.html&quot;,
413                 &quot;METHOD DETAIL&quot;,
<a name="3" id="anc3"></a><span class="line-modified">414                 &quot;public&quot;, &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.B&quot;,</span>
<span class="line-modified">415                 &quot;public&quot;, &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.A&quot;,</span>
<span class="line-modified">416                 &quot;public&quot;, &quot;void&quot;, &quot;o&quot;, &quot;Description copied from class:&quot;, &quot;&gt;A&lt;&quot;, &quot;Method o in p.A&quot;,</span>
<span class="line-modified">417                 &quot;public&quot;, &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.B&quot;,</span>
418                 &quot;END OF CLASS DATA&quot;);
419 
420         checkOutput(&quot;p/C.html&quot;, false,
421                 &quot;Overrides&quot;,
422                 &quot;Methods declared in class p&quot;);
423 
424         checkOrder(&quot;p/D.html&quot;,
425                 &quot;METHOD SUMMARY&quot;,
426                 &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.D&quot;,
427                 &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.D&quot;,
428                 &quot;void&quot;, &quot;o&quot;, &quot;Method o in p.D&quot;,
429                 &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.D&quot;,
430                 &quot;CONSTRUCTOR DETAIL&quot;);
431 
432         checkOutput(&quot;p/D.html&quot;, false,
433                 &quot;Description copied from class:&quot;,
434                 &quot;Overrides&quot;,
435                 &quot;Methods declared in class p&quot;);
436 
437         checkOrder(&quot;p/E.html&quot;,
438                 &quot;METHOD SUMMARY&quot;,
439                 &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.B&quot;,
440                 &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.A&quot;,
441                 &quot;void&quot;, &quot;o&quot;, &quot;Method o in p.A&quot;,
442                 &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.B&quot;,
443                 &quot;CONSTRUCTOR DETAIL&quot;);
444 
445         checkOutput(&quot;p/E.html&quot;, false,
446                 &quot;Description copied from class:&quot;,
447                 &quot;Overrides&quot;,
448                 &quot;Methods declared in class p&quot;);
449     }
450 
451     @Test
452     public void testVisibleMemberTableSummary(Path base) throws Exception {
453         Path srcDir = base.resolve(&quot;src&quot;);
454         emitVisibleMemberTable(srcDir);
455 
456         Path outDir = base.resolve(&quot;out&quot;);
457         javadoc(&quot;-d&quot;, outDir.toString(),
458                 &quot;-html5&quot;,
459                 &quot;--override-methods=summary&quot;,
460                 &quot;-sourcepath&quot;, srcDir.toString(),
461                 &quot;p&quot;);
462         checkExit(Exit.OK);
463 
464         checkOrder(&quot;p/C.html&quot;,
465                 &quot;METHOD SUMMARY&quot;,
466                 &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.B&quot;,
467                 &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.A&quot;,
468                 &quot;void&quot;, &quot;o&quot;, &quot;Method o in p.A&quot;,
469                 &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.B&quot;,
470                 &quot;CONSTRUCTOR DETAIL&quot;);
471 
472         checkOrder(&quot;p/C.html&quot;,
473                 &quot;METHOD DETAIL&quot;,
<a name="4" id="anc4"></a><span class="line-modified">474                 &quot;public&quot;, &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.B&quot;,</span>
<span class="line-modified">475                 &quot;public&quot;, &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.A&quot;,</span>
<span class="line-modified">476                 &quot;public&quot;, &quot;void&quot;, &quot;o&quot;, &quot;Description copied from class:&quot;, &quot;&gt;A&lt;&quot;, &quot;Method o in p.A&quot;,</span>
<span class="line-modified">477                 &quot;public&quot;, &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.B&quot;,</span>
478                 &quot;END OF CLASS DATA&quot;);
479 
480         checkOutput(&quot;p/C.html&quot;, false,
481                 &quot;Overrides&quot;,
482                 &quot;Methods declared in class p&quot;);
483 
484         checkOrder(&quot;p/D.html&quot;,
485                 &quot;METHOD SUMMARY&quot;,
486                 &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.D&quot;,
487                 &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.D&quot;,
488                 &quot;void&quot;, &quot;o&quot;, &quot;Method o in p.D&quot;,
489                 &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.D&quot;,
490                 &quot;CONSTRUCTOR DETAIL&quot;);
491 
492         checkOutput(&quot;p/D.html&quot;, false,
493                 &quot;Description copied from class:&quot;,
494                 &quot;Overrides&quot;,
495                 &quot;Methods declared in class p&quot;);
496 
497         checkOrder(&quot;p/E.html&quot;,
498                 &quot;METHOD SUMMARY&quot;,
499                 &quot;void&quot;, &quot;m&quot;, &quot;Method m in p.B&quot;,
500                 &quot;void&quot;, &quot;n&quot;, &quot;Method n in p.A&quot;,
501                 &quot;void&quot;, &quot;o&quot;, &quot;Method o in p.A&quot;,
502                 &quot;void&quot;, &quot;p&quot;, &quot;Method p in p.B&quot;,
503                 &quot;CONSTRUCTOR DETAIL&quot;);
504 
505         checkOutput(&quot;p/E.html&quot;, false,
506                 &quot;Description copied from class:&quot;,
507                 &quot;Overrides&quot;,
508                 &quot;Methods declared in class p&quot;);
509 
510     }
511 
512     // emit a matrix of method variants
513     void emitVisibleMemberTable(Path srcDir) throws Exception {
514         new ClassBuilder(tb, &quot;p.A&quot;)
515                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
516                 .addMembers(
517                         MethodBuilder.parse(&quot;public void m() {}&quot;),
518                         MethodBuilder.parse(&quot;public void n() {}&quot;),
519                         MethodBuilder.parse(&quot;public void o() {}&quot;)
520                 ).write(srcDir);
521 
522         new ClassBuilder(tb, &quot;p.B&quot;)
523                 .setModifiers(&quot;class&quot;)
524                 .setExtends(&quot;A&quot;)
525                 .addMembers(
526                         MethodBuilder.parse(&quot;public void m() {}&quot;),
527                         MethodBuilder.parse(&quot;public void n() {}&quot;)
528                                 .setComments(Kind.INHERIT_DOC),
529                         MethodBuilder.parse(&quot;public void o() {}&quot;)
530                         .setComments(Kind.NO_API_COMMENT),
531                         MethodBuilder.parse(&quot;public void p() {}&quot;)
532                 ).write(srcDir);
533 
534         new ClassBuilder(tb, &quot;p.C&quot;)
535                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
536                 .setExtends(&quot;B&quot;)
537                 .addMembers(
538                         MethodBuilder.parse(&quot;public void m() {}&quot;)
539                                 .setComments(Kind.NO_API_COMMENT),
540                         MethodBuilder.parse(&quot;public void n() {}&quot;)
541                                 .setComments(Kind.NO_API_COMMENT),
542                         MethodBuilder.parse(&quot;public void o() {}&quot;)
543                                 .setComments(Kind.NO_API_COMMENT),
544                         MethodBuilder.parse(&quot;public void p() {}&quot;)
545                                 .setComments(Kind.NO_API_COMMENT)
546                 ).write(srcDir);
547 
548         new ClassBuilder(tb, &quot;p.D&quot;)
549                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
550                 .setExtends(&quot;B&quot;)
551                 .addMembers(
552                         MethodBuilder.parse(&quot;public void m() {}&quot;),
553                         MethodBuilder.parse(&quot;public void n() {}&quot;),
554                         MethodBuilder.parse(&quot;public void o() {}&quot;),
555                         MethodBuilder.parse(&quot;public void p() {}&quot;)
556                 ).write(srcDir);
557 
558         new ClassBuilder(tb, &quot;p.E&quot;)
559                 .setModifiers(&quot;public&quot;, &quot;class&quot;)
560                 .setExtends(&quot;B&quot;)
561                 .addMembers(
562                         MethodBuilder.parse(&quot;public void m() {}&quot;)
563                                 .setComments(Kind.INHERIT_DOC),
564                         MethodBuilder.parse(&quot;public void n() {}&quot;)
565                                 .setComments(Kind.INHERIT_DOC),
566                         MethodBuilder.parse(&quot;public void o() {}&quot;)
567                                 .setComments(Kind.INHERIT_DOC),
568                         MethodBuilder.parse(&quot;public void p() {}&quot;)
569                                 .setComments(Kind.INHERIT_DOC)
570                 ).write(srcDir);
571     }
572 
573     @Test
574     public void testHiddenMembersDetail(Path base) throws Exception {
575         Path srcDir = base.resolve(&quot;src&quot;);
576         emitHiddenMembers(srcDir);
577 
578         Path outDir = base.resolve(&quot;out&quot;);
579         javadoc(&quot;-d&quot;, outDir.toString(),
580                 &quot;-html5&quot;,
581                 &quot;--override-methods=detail&quot;,
582                 &quot;-sourcepath&quot;, srcDir.toString(),
583                 &quot;p&quot;);
584         checkExit(Exit.OK);
585 
586         checkOrder(&quot;p/C1.html&quot;,
587                 &quot;FIELD SUMMARY&quot;,
588                 &quot;Fields inherited from interface&quot;, &quot;I1&quot;, &quot;field2&quot;,
589                 &quot;Fields inherited from interface&quot;, &quot;I2&quot;, &quot;field2&quot;,
590                 &quot;Fields inherited from interface&quot;, &quot;I3&quot;, &quot;field&quot;,
591                 &quot;METHOD SUMMARY&quot;,
592                 &quot;Methods inherited from interface&quot;, &quot;I1&quot;, &quot;method2&quot;,
593                 &quot;Methods inherited from interface&quot;, &quot;I2&quot;, &quot;method2&quot;,
594                 &quot;Methods inherited from interface&quot;, &quot;I3&quot;, &quot;method&quot;,
595                 &quot;CONSTRUCTOR DETAIL&quot;);
596 
597         checkOrder(&quot;p/C2.html&quot;,
598                 &quot;FIELD SUMMARY&quot;,
599                 &quot;int&quot;, &quot;field&quot;, &quot;Field field in p.C2&quot;,
600                 &quot;Fields inherited from interface&quot;, &quot;I1&quot;, &quot;field2&quot;,
601                 &quot;Fields inherited from interface&quot;, &quot;I2&quot;, &quot;field2&quot;,
602                 &quot;METHOD SUMMARY&quot;,
603                 &quot;void&quot;, &quot;method&quot;, &quot;Method method in p.C2&quot;,
604                 &quot;void&quot;, &quot;method2&quot;, &quot;Method method2 in p.C2&quot;);
605 
606     }
607 
608     @Test
609     public void testHiddenMembersSummary(Path base) throws Exception {
610         Path srcDir = base.resolve(&quot;src&quot;);
611         emitHiddenMembers(srcDir);
612 
613         Path outDir = base.resolve(&quot;out&quot;);
614         javadoc(&quot;-d&quot;, outDir.toString(),
615                 &quot;-html5&quot;,
616                 &quot;--override-methods=summary&quot;,
617                 &quot;-sourcepath&quot;, srcDir.toString(),
618                 &quot;p&quot;);
619         checkExit(Exit.OK);
620 
621         checkOrder(&quot;p/C1.html&quot;,
622                 &quot;Field Summary&quot;,
623                 &quot;Fields declared in interface&quot;, &quot;I1&quot;, &quot;field2&quot;,
624                 &quot;Fields declared in interface&quot;, &quot;I2&quot;, &quot;field2&quot;,
625                 &quot;Fields declared in interface&quot;, &quot;I3&quot;, &quot;field&quot;,
626                 &quot;Method Summary&quot;,
627                 &quot;Methods declared in interface&quot;, &quot;I1&quot;, &quot;method2&quot;,
628                 &quot;Methods declared in interface&quot;, &quot;I2&quot;, &quot;method2&quot;,
629                 &quot;Methods declared in interface&quot;, &quot;I3&quot;, &quot;method&quot;,
630                 &quot;Constructor Detail&quot;);
631 
632         checkOrder(&quot;p/C2.html&quot;,
633                 &quot;Field Summary&quot;,
634                 &quot;int&quot;, &quot;field&quot;, &quot;Field field in p.C2&quot;,
635                 &quot;Fields declared in interface&quot;, &quot;I1&quot;, &quot;field2&quot;,
636                 &quot;Fields declared in interface&quot;, &quot;I2&quot;, &quot;field2&quot;,
637                 &quot;Method Summary&quot;,
638                 &quot;void&quot;, &quot;method&quot;, &quot;Method method in p.C2&quot;,
639                 &quot;void&quot;, &quot;method2&quot;, &quot;Method method2 in p.C2&quot;);
640 
641     }
642 
643     void emitHiddenMembers(Path srcDir) throws Exception {
644         new ClassBuilder(tb, &quot;p.I1&quot;)
645                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
646                 .addMembers(
647                         FieldBuilder.parse(&quot;public static int field = 3;&quot;),
648                         FieldBuilder.parse(&quot;public static int field2 = 3;&quot;),
649                         MethodBuilder.parse(&quot;public void method();&quot;),
650                         MethodBuilder.parse(&quot;public void method2();&quot;),
651                         MethodBuilder.parse(&quot;public static void staticMethod() {}&quot;)
652                 ).write(srcDir);
653 
654         new ClassBuilder(tb, &quot;p.I2&quot;)
655                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
656                 .addMembers(
657                         FieldBuilder.parse(&quot;public static int field = 3;&quot;),
658                         FieldBuilder.parse(&quot;public static int field2 = 3;&quot;),
659                         MethodBuilder.parse(&quot;public void method();&quot;),
660                         MethodBuilder.parse(&quot;public void method2();&quot;),
661                         MethodBuilder.parse(&quot;public static void staticMethod() {}&quot;)
662                 ).write(srcDir);
663 
664         new ClassBuilder(tb, &quot;p.I3&quot;)
665                 .setExtends(&quot;I1, I2&quot;)
666                 .setModifiers(&quot;public&quot;, &quot;interface&quot;)
667                 .addMembers(
668                         FieldBuilder.parse(&quot;public static int field = 3;&quot;),
669                         MethodBuilder.parse(&quot;public void method();&quot;),
670                         MethodBuilder.parse(&quot;public static void staticMethod() {}&quot;)
671                 ).write(srcDir);
672 
673         new ClassBuilder(tb, &quot;p.C1&quot;)
674                 .setModifiers(&quot;public&quot;, &quot;abstract&quot;, &quot;class&quot;)
675                 .addImplements(&quot;I3&quot;)
676                 .write(srcDir);
677 
678         new ClassBuilder(tb, &quot;p.C2&quot;)
679                 .setExtends(&quot;C1&quot;)
680                 .setModifiers(&quot;public&quot;, &quot;abstract&quot;, &quot;class&quot;)
681                 .addMembers(
682                         FieldBuilder.parse(&quot;public int field;&quot;),
683                         MethodBuilder.parse(&quot;public void method(){}&quot;),
684                         MethodBuilder.parse(&quot;public void method2(){}&quot;)
685                 ).write(srcDir);
686     }
687 }
<a name="5" id="anc5"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="5" type="hidden" />
</body>
</html>