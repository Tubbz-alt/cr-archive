<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/langtools/jdk/javadoc/doclet/testWindowTitle/TestWindowTitle.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2013, 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8016675 8026736 8196202
 27  * @summary Test for window title.
 28  * @author Bhavesh Patel
 29  * @library ../../lib
 30  * @modules jdk.javadoc/jdk.javadoc.internal.tool
 31  * @build javadoc.tester.*
 32  * @run main TestWindowTitle
 33  */
 34 import javadoc.tester.JavadocTester;
 35 
 36 public class TestWindowTitle extends JavadocTester {
 37 
 38     public static void main(String... args) throws Exception {
 39         TestWindowTitle tester = new TestWindowTitle();
 40         tester.runTests();
 41         tester.printSummary();
 42     }
 43 
 44     @Test
 45     public void testJavaScriptChars() {
 46         // Window title with JavaScript special characters.
 47         String title = &quot;Testing \&quot;Window &#39;Title&#39;\&quot; with a \\ backslash and a / &quot;
 48                 + &quot;forward slash and a \u00e8 unicode char also a    tab and also a &quot;
 49                 + &quot;\t special character another \u0002 unicode)&quot;;
 50 
 51         javadoc(&quot;-d&quot;, &quot;out-js-chars&quot;,
 52                 &quot;-windowtitle&quot;, title,
 53                 &quot;--frames&quot;,
 54                 &quot;-sourcepath&quot;, testSrc,
 55                 &quot;p1&quot;, &quot;p2&quot;);
 56         checkExit(Exit.OK);
 57 
 58         checkOutput(&quot;overview-summary.html&quot;, true,
 59                 &quot;parent.document.title=\&quot;Overview (Testing \\\&quot;Window \\\&#39;Title\\\&#39;\\\&quot; &quot;
 60                 + &quot;with a \\\\ backslash and a / forward slash and a \\u00E8 unicode char &quot;
 61                 + &quot;also a    tab and also a \\t special character another \\u0002 unicode))\&quot;;&quot;
 62         );
 63 
 64         checkOutput(&quot;overview-summary.html&quot;, false,
 65                 &quot;parent.document.title=\&quot;Overview (Testing \&quot;Window \&#39;Title\&#39;\&quot; &quot;
 66                 + &quot;with a \\ backslash and a / forward slash and a \u00E8 unicode char &quot;
 67                 + &quot;also a    tab and also a \t special character another \u0002 unicode))\&quot;;&quot;
 68         );
 69     }
 70 
 71     @Test
 72     public void testScriptTag() {
 73         // Window title with a script tag.
 74         String title = &quot;Testing script tag in title &lt;/title&gt;&lt;script&gt;alert(\&quot;Should not pop up\&quot;)&lt;/script&gt;.&quot;;
 75 
 76         javadoc(&quot;-d&quot;, &quot;out-script&quot;,
 77                 &quot;-windowtitle&quot;, title,
 78                 &quot;--frames&quot;,
 79                 &quot;-sourcepath&quot;, testSrc,
 80                 &quot;p1&quot;, &quot;p2&quot;);
 81         checkExit(Exit.OK);
 82 
 83         checkOutput(&quot;overview-summary.html&quot;, true,
 84                 &quot;parent.document.title=\&quot;Overview (Testing script tag in title alert&quot;
 85                 + &quot;(\\\&quot;Should not pop up\\\&quot;).)\&quot;;&quot;
 86         );
 87 
 88         checkOutput(&quot;p2/C2.html&quot;, true,
 89                 &quot;parent.document.title=\&quot;C2 (Testing script tag in title alert&quot;
 90                 + &quot;(\\\&quot;Should not pop up\\\&quot;).)\&quot;;&quot;
 91         );
 92 
 93         checkOutput(&quot;overview-summary.html&quot;, false,
 94                 &quot;parent.document.title=\&quot;Overview (Testing script tag in title &lt;/title&gt;&lt;script&gt;&quot;
 95                 + &quot;alert(\\\&quot;Should not pop up\\\&quot;)&lt;/script&gt;.)\&quot;;&quot;
 96         );
 97 
 98         checkOutput(&quot;p2/C2.html&quot;, false,
 99                 &quot;parent.document.title=\&quot;C2 (Testing script tag in title &lt;/title&gt;&lt;script&gt;&quot;
100                 + &quot;alert(\\\&quot;Should not pop up\\\&quot;)&lt;/script&gt;.)\&quot;;&quot;
101         );
102     }
103 
104     @Test
105     public void testHtmlTags() {
106         // Window title with other HTML tags.
107         String title = &quot;Testing another &lt;p&gt;HTML&lt;/p&gt; tag. Another &lt;h1&gt;tag&lt;/h1&gt;. A &quot;
108                 + &quot;&lt;span id=\&quot;testTag\&quot;&gt;tag with attributes&lt;/span&gt;. &lt;script and &lt;/p are not tags.&quot;;
109 
110         javadoc(&quot;-d&quot;, &quot;out-html-tags&quot;,
111                 &quot;-windowtitle&quot;, title,
112                 &quot;--frames&quot;,
113                 &quot;-sourcepath&quot;, testSrc,
114                 &quot;p1&quot;, &quot;p2&quot;);
115         checkExit(Exit.OK);
116 
117         checkOutput(&quot;overview-summary.html&quot;, true,
118             &quot;parent.document.title=\&quot;Overview (Testing another HTML tag. Another tag. A &quot;
119             + &quot;tag with attributes. &lt;script and &lt;/p are not tags.)\&quot;;&quot;
120         );
121 
122         checkOutput(&quot;overview-summary.html&quot;, false,
123             &quot;parent.document.title=\&quot;Overview (Testing another &lt;p&gt;HTML&lt;/p&gt; tag. Another &quot;
124             + &quot;&lt;h1&gt;tag&lt;/h1&gt;. A &lt;span id=\&quot;testTag\&quot;&gt;tag with attributes&lt;/span&gt;. &lt;script and &quot;
125             + &quot;&lt;/p are not tags.)\&quot;;&quot;
126         );
127     }
128 
129     @Test
130     public void testHtmlEntities() {
131         // Window title using entities.
132         String title = &quot;Testing entities &amp;lt;script&amp;gt;alert(\&quot;Should not pop up\&quot;)&amp;lt;/script&amp;gt;.&quot;;
133 
134         javadoc(&quot;-d&quot;, &quot;out-html-entities&quot;,
135                 &quot;-windowtitle&quot;, title,
136                 &quot;--frames&quot;,
137                 &quot;-sourcepath&quot;, testSrc,
138                 &quot;p1&quot;, &quot;p2&quot;);
139 
140         checkOutput(&quot;overview-summary.html&quot;, true,
141             &quot;parent.document.title=\&quot;Overview (Testing entities &amp;lt;script&amp;gt;alert(\\\&quot;Should &quot;
142             + &quot;not pop up\\\&quot;)&amp;lt;/script&amp;gt;.)\&quot;;&quot;
143         );
144 
145         checkOutput(&quot;overview-summary.html&quot;, false,
146             &quot;parent.document.title=\&quot;Overview (Testing entities alert(\\\&quot;Should not pop up\\\&quot;).)\&quot;;&quot;
147         );
148     }
149 
150     @Test
151     public void testEmptyTags() {
152         // Window title with just empty HTML tags.
153         String title = &quot;&lt;/title&gt;&lt;script&gt;&lt;/script&gt;&quot;;
154 
155         javadoc(&quot;-d&quot;, &quot;out-empty-tags&quot;,
156                 &quot;-windowtitle&quot;, title,
157                 &quot;--frames&quot;,
158                 &quot;-sourcepath&quot;, testSrc,
159                 &quot;p1&quot;, &quot;p2&quot;);
160 
161         checkOutput(&quot;overview-summary.html&quot;, true,
162             &quot;parent.document.title=\&quot;Overview\&quot;;&quot;
163         );
164 
165         checkOutput(&quot;overview-summary.html&quot;, false,
166             &quot;parent.document.title=\&quot;Overview (&lt;/title&gt;&lt;script&gt;&lt;/script&gt;)\&quot;;&quot;
167         );
168     }
169 
170     @Test
171     public void testUnicode() {
172         //Window title with unicode characters.
173         String title = &quot;Testing unicode \u003cscript\u003ealert(\&quot;Should not pop up\&quot;)\u003c/script\u003e.&quot;;
174 
175         javadoc(&quot;-d&quot;, &quot;out-unicode&quot;,
176                 &quot;-windowtitle&quot;, title,
177                 &quot;--frames&quot;,
178                 &quot;-sourcepath&quot;, testSrc,
179                 &quot;p1&quot;, &quot;p2&quot;);
180         checkExit(Exit.OK);
181 
182         checkOutput(&quot;overview-summary.html&quot;, true,
183             &quot;parent.document.title=\&quot;Overview (Testing unicode alert(\\\&quot;Should &quot;
184             + &quot;not pop up\\\&quot;).)\&quot;;&quot;
185         );
186 
187         checkOutput(&quot;overview-summary.html&quot;, false,
188             &quot;parent.document.title=\&quot;Overview (Testing unicode &lt;script&gt;alert(\\\&quot;Should not pop up\\\&quot;)&quot;
189             + &quot;&lt;/script&gt;.)\&quot;;&quot;
190         );
191     }
192 
193     @Test
194     public void testEmpty() {
195         // An empty window title.
196         String title = &quot;&quot;;
197         javadoc(&quot;-d&quot;, &quot;out-empty&quot;,
198                 &quot;-windowtitle&quot;, title,
199                 &quot;--frames&quot;,
200                 &quot;-sourcepath&quot;, testSrc, &quot;p1&quot;, &quot;p2&quot;);
201         checkExit(Exit.OK);
202 
203         checkOutput(&quot;overview-summary.html&quot;, true,
204                 &quot;parent.document.title=\&quot;Overview\&quot;;&quot;
205         );
206     }
207 
208     @Test
209     public void testDocTitle() {
210         // Window title with JavaScript special characters, specified with -doctitle
211         String title = &quot;Testing \&quot;Window &#39;Title&#39;\&quot; with a \\ backslash and a / &quot;
212                 + &quot;forward slash and a \u00e8 unicode char also a    tab and also a &quot;
213                 + &quot;\t special character another \u0002 unicode)&quot;;
214 
215         javadoc(&quot;-d&quot;, &quot;out-doctitle&quot;,
216                 &quot;-doctitle&quot;, title,
217                 &quot;--frames&quot;,
218                 &quot;-sourcepath&quot;, testSrc,
219                 &quot;p1&quot;, &quot;p2&quot;);
220         checkExit(Exit.OK);
221 
222         checkOutput(&quot;overview-summary.html&quot;, false,
223             &quot;parent.document.title=\&quot;Overview (Testing \\\&quot;Window \\\&#39;Title\\\&#39;\\\&quot; &quot;
224             + &quot;with a \\\\ backslash and a / forward slash and a \\u00E8 unicode char &quot;
225             + &quot;also a    tab and also a \\t special character another \\u0002 unicode)\&quot;;&quot;
226         );
227     }
228 }
    </pre>
  </body>
</html>