<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/langtools/jdk/javadoc/doclet/testPrivateClasses/TestPrivateClasses.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug      4780441 4874845 4978816 8014017 8016328 8025633 8026567 8175200 8182765
 27  * @summary  Make sure that when the -private flag is not used, members
 28  *           inherited from package private class are documented in the child.
 29  *
 30  *           Make sure that when a method inherits documentation from a method
 31  *           in a non-public class/interface, the non-public class/interface
 32  *           is not mentioned anywhere (not even in the signature or tree).
 33  *
 34  *           Make sure that when a private interface method with generic parameters
 35  *           is implemented, the comments can be inherited properly.
 36  *
 37  *           Make sure when no modifier appear in the class signature, the
 38  *           signature is displayed correctly without extra space at the beginning.
 39  * @author   jamieh
 40  * @library  ../../lib
 41  * @modules jdk.javadoc/jdk.javadoc.internal.tool
 42  * @build    javadoc.tester.*
 43  * @run main TestPrivateClasses
 44  */
 45 import javadoc.tester.JavadocTester;
 46 
 47 public class TestPrivateClasses extends JavadocTester {
 48 
 49     public static void main(String... args) throws Exception {
 50         TestPrivateClasses tester = new TestPrivateClasses();
 51         tester.runTests();
 52     }
 53 
 54     @Test
 55     public void testDefault() {
 56         javadoc(&quot;-d&quot;, &quot;out-default&quot;,
 57                 &quot;-sourcepath&quot;, testSrc,
 58                 &quot;pkg&quot;, &quot;pkg2&quot;);
 59         checkExit(Exit.OK);
 60 
 61         checkOutput(&quot;pkg/PublicChild.html&quot;, true,
 62                 // Field inheritence from non-public superclass.
 63                 &quot;&lt;a href=\&quot;#fieldInheritedFromParent\&quot;&gt;&quot;
 64                 + &quot;fieldInheritedFromParent&lt;/a&gt;&quot;,
 65                 // Method inheritance from non-public superclass.
 66                 &quot;&lt;a href=\&quot;#methodInheritedFromParent(int)\&quot;&gt;&quot;
 67                 + &quot;methodInheritedFromParent&lt;/a&gt;&quot;,
 68                 // private class does not show up in tree
 69                 &quot;&lt;ul class=\&quot;inheritance\&quot;&gt;\n&quot;
 70                 + &quot;&lt;li&gt;java.lang.Object&lt;/li&gt;\n&quot;
 71                 + &quot;&lt;li&gt;\n&quot;
 72                 + &quot;&lt;ul class=\&quot;inheritance\&quot;&gt;\n&quot;
 73                 + &quot;&lt;li&gt;pkg.PublicChild&lt;/li&gt;\n&quot;
 74                 + &quot;&lt;/ul&gt;\n&quot;
 75                 + &quot;&lt;/li&gt;\n&quot;
 76                 + &quot;&lt;/ul&gt;&quot;,
 77                 // Method is documented as though it is declared in the inheriting method.
 78                 &quot;&lt;pre class=\&quot;methodSignature\&quot;&gt;public&amp;nbsp;void&amp;nbsp;methodInheritedFromParent&amp;#8203;(int&amp;nbsp;p1)&quot;,
 79                 &quot;&lt;dl&gt;\n&quot;
 80                 + &quot;&lt;dt&gt;All Implemented Interfaces:&lt;/dt&gt;\n&quot;
 81                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;PublicInterface.html\&quot; title=\&quot;interface in pkg\&quot;&gt;&quot;
 82                 + &quot;PublicInterface&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;\n&quot;
 83                 + &quot;&lt;/dl&gt;&quot;);
 84 
 85         checkOutput(&quot;pkg/PublicChild.html&quot;, false,
 86                 // Should not document that a method overrides method from private class.
 87                 &quot;&lt;span class=\&quot;overrideSpecifyLabel\&quot;&gt;Overrides:&lt;/span&gt;&quot;,
 88                 // Should not document that a method specified by private interface.
 89                 &quot;&lt;span class=\&quot;overrideSpecifyLabel\&quot;&gt;Specified by:&lt;/span&gt;&quot;,
 90                 // Should not mention that any documentation was copied.
 91                 &quot;Description copied from&quot;,
 92                 // Don&#39;t extend private classes or interfaces
 93                 &quot;PrivateParent&quot;,
 94                 &quot;PrivateInterface&quot;);
 95 
 96         checkOutput(&quot;pkg/PublicChild.html&quot;, false,
 97                 // Should not document comments from private inherited interfaces
 98                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;memberNameLink\&quot;&gt;&quot;
 99                 + &quot;&lt;a href=\&quot;#methodInterface(int)\&quot;&gt;&quot;
100                 + &quot;methodInterface&lt;/a&gt;&lt;/span&gt;&amp;#8203;(int&amp;nbsp;p1)&lt;/code&gt;\n&quot;
101                 + &quot;&lt;div class=\&quot;block\&quot;&gt;Comment from interface.&lt;/div&gt;\n&lt;/td&gt;&quot;,
102                 // and similarly one more
103                 &quot;&lt;td class=\&quot;colLast\&quot;&gt;&lt;code&gt;&lt;span class=\&quot;memberNameLink\&quot;&gt;&quot;
104                 + &quot;&lt;a href=\&quot;#methodInterface2(int)\&quot;&gt;&quot;
105                 + &quot;methodInterface2&lt;/a&gt;&lt;/span&gt;&amp;#8203;(int&amp;nbsp;p1)&lt;/code&gt;\n&quot;
106                 + &quot;&lt;div class=\&quot;block\&quot;&gt;Comment from interface.&lt;/div&gt;\n&lt;/td&gt;&quot;
107         );
108 
109         checkOutput(&quot;pkg/PublicInterface.html&quot;, true,
110                 // Field inheritance from non-public superinterface.
111                 &quot;&lt;a href=\&quot;#fieldInheritedFromInterface\&quot;&gt;&quot;
112                 + &quot;fieldInheritedFromInterface&lt;/a&gt;&quot;,
113                 // Method inheritance from non-public superinterface.
114                 &quot;&lt;a href=\&quot;#methodInterface(int)\&quot;&gt;&quot;
115                 + &quot;methodInterface&lt;/a&gt;&quot;,
116                 //Make sure implemented interfaces from private superclass are inherited
117                 &quot;&lt;dl&gt;\n&quot;
118                 + &quot;&lt;dt&gt;All Known Implementing Classes:&lt;/dt&gt;\n&quot;
119                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;PublicChild.html\&quot; title=\&quot;class in pkg\&quot;&gt;&quot;
120                 + &quot;PublicChild&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;\n&quot;
121                 + &quot;&lt;/dl&gt;&quot;);
122 
123         checkOutput(&quot;pkg/PublicInterface.html&quot;, false,
124                 &quot;&lt;span class=\&quot;overrideSpecifyLabel\&quot;&gt;Specified by:&lt;/span&gt;&quot;,
125                 &quot;Description copied from&quot;,
126                 &quot;PrivateInterface&quot;,
127                 &quot;All Superinterfaces&quot;);
128 
129         checkOutput(&quot;pkg2/C.html&quot;, false,
130                 //Generic interface method test.
131                 &quot;This comment should get copied to the implementing class&quot;);
132 
133         checkOutput(&quot;pkg2/C.html&quot;, false,
134                 //Do not inherit private interface method with generic parameters.
135                 //This method has been implemented.
136                 &quot;&lt;span class=\&quot;memberNameLink\&quot;&gt;&lt;a href=\&quot;I.html#hello(T)\&quot;&gt;hello&lt;/a&gt;&lt;/span&gt;&quot;);
137 
138         checkOutput(&quot;constant-values.html&quot;, false,
139                 // Make inherited constant are documented correctly.
140                 &quot;PrivateInterface&quot;);
141     }
142 
143     @Test
144     public void testPrivate() {
145         javadoc(&quot;-d&quot;, &quot;out-private&quot;,
146                 &quot;-sourcepath&quot;, testSrc,
147                 &quot;-private&quot;,
148                 &quot;pkg&quot;, &quot;pkg2&quot;);
149         checkExit(Exit.OK);
150 
151         checkOutput(&quot;pkg/PublicChild.html&quot;, true,
152                 // Field inheritence from non-public superclass.
153                 &quot;Fields inherited from class&amp;nbsp;pkg.&quot;
154                 + &quot;&lt;a href=\&quot;PrivateParent.html\&quot; title=\&quot;class in pkg\&quot;&gt;&quot;
155                 + &quot;PrivateParent&lt;/a&gt;&quot;,
156                 &quot;&lt;a href=\&quot;PrivateParent.html#fieldInheritedFromParent\&quot;&gt;&quot;
157                 + &quot;fieldInheritedFromParent&lt;/a&gt;&quot;,
158                 // Method inheritence from non-public superclass.
159                 &quot;Methods inherited from class&amp;nbsp;pkg.&quot;
160                 + &quot;&lt;a href=\&quot;PrivateParent.html\&quot; title=\&quot;class in pkg\&quot;&gt;&quot;
161                 + &quot;PrivateParent&lt;/a&gt;&quot;,
162                 &quot;&lt;a href=\&quot;PrivateParent.html#methodInheritedFromParent(int)\&quot;&gt;&quot;
163                 + &quot;methodInheritedFromParent&lt;/a&gt;&quot;,
164                 // Should document that a method overrides method from private class.
165                 &quot;&lt;dt&gt;&lt;span class=\&quot;overrideSpecifyLabel\&quot;&gt;Overrides:&lt;/span&gt;&lt;/dt&gt;\n&quot;
166                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;PrivateParent.html#methodOverridenFromParent(char%5B%5D,int,T,V,java.util.List)\&quot;&gt;&quot;
167                 + &quot;methodOverridenFromParent&lt;/a&gt;&lt;/code&gt;&amp;nbsp;in class&amp;nbsp;&lt;code&gt;&quot;
168                 + &quot;&lt;a href=\&quot;PrivateParent.html\&quot; title=\&quot;class in pkg\&quot;&gt;&quot;
169                 + &quot;PrivateParent&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;&quot;,
170                 // Should document that a method is specified by private interface.
171                 &quot;&lt;dt&gt;&lt;span class=\&quot;overrideSpecifyLabel\&quot;&gt;Specified by:&lt;/span&gt;&lt;/dt&gt;\n&quot;
172                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;PrivateInterface.html#methodInterface(int)\&quot;&gt;&quot;
173                 + &quot;methodInterface&lt;/a&gt;&lt;/code&gt;&amp;nbsp;in interface&amp;nbsp;&lt;code&gt;&quot;
174                 + &quot;&lt;a href=\&quot;PrivateInterface.html\&quot; title=\&quot;interface in pkg\&quot;&gt;&quot;
175                 + &quot;PrivateInterface&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;&quot;,
176                 // Should mention that any documentation was copied.
177                 &quot;Description copied from&quot;,
178                 // Extend documented private classes or interfaces
179                 &quot;extends&quot;,
180                 &quot;&lt;dl&gt;\n&quot;
181                 + &quot;&lt;dt&gt;All Implemented Interfaces:&lt;/dt&gt;\n&quot;
182                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;PrivateInterface.html\&quot; title=\&quot;interface in pkg\&quot;&gt;&quot;
183                 + &quot;PrivateInterface&lt;/a&gt;&lt;/code&gt;, &quot;
184                 + &quot;&lt;code&gt;&lt;a href=\&quot;PublicInterface.html\&quot; title=\&quot;interface in pkg\&quot;&gt;&quot;
185                 + &quot;PublicInterface&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;\n&quot;
186                 + &quot;&lt;/dl&gt;&quot;,
187                 &quot;&lt;pre&gt;public class &lt;span class=\&quot;typeNameLabel\&quot;&gt;PublicChild&lt;/span&gt;&quot;);
188 
189         checkOutput(&quot;pkg/PublicInterface.html&quot;, true,
190                 // Field inheritence from non-public superinterface.
191                 &quot;Fields inherited from interface&amp;nbsp;pkg.&quot;
192                 + &quot;&lt;a href=\&quot;PrivateInterface.html\&quot; title=\&quot;interface in pkg\&quot;&gt;&quot;
193                 + &quot;PrivateInterface&lt;/a&gt;&quot;,
194                 &quot;&lt;a href=\&quot;PrivateInterface.html#fieldInheritedFromInterface\&quot;&gt;&quot;
195                 + &quot;fieldInheritedFromInterface&lt;/a&gt;&quot;,
196                 // Method inheritance from non-public superinterface.
197                 &quot;Methods inherited from interface&amp;nbsp;pkg.&quot;
198                 + &quot;&lt;a href=\&quot;PrivateInterface.html\&quot; title=\&quot;interface in pkg\&quot;&gt;&quot;
199                 + &quot;PrivateInterface&lt;/a&gt;&quot;,
200                 // Extend documented private classes or interfaces
201                 &quot;extends&quot;,
202                 &quot;All Superinterfaces&quot;,
203                 //Make sure implemented interfaces from private superclass are inherited
204                 &quot;&lt;dl&gt;\n&quot;
205                 + &quot;&lt;dt&gt;All Known Implementing Classes:&lt;/dt&gt;\n&quot;
206                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;PrivateParent.html\&quot; title=\&quot;class in pkg\&quot;&gt;&quot;
207                 + &quot;PrivateParent&lt;/a&gt;&lt;/code&gt;, &quot;
208                 + &quot;&lt;code&gt;&lt;a href=\&quot;PublicChild.html\&quot; title=\&quot;class in pkg\&quot;&gt;PublicChild&quot;
209                 + &quot;&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;\n&quot;
210                 + &quot;&lt;/dl&gt;&quot;);
211 
212         checkOutput(&quot;pkg/PrivateInterface.html&quot;, true,
213                 &quot;&lt;a href=\&quot;#methodInterface(int)\&quot;&gt;&quot;
214                 + &quot;methodInterface&lt;/a&gt;&quot;
215         );
216 
217         checkOutput(&quot;pkg2/C.html&quot;, true,
218                 //Since private flag is used, we can document that private interface method
219                 //with generic parameters has been implemented.
220                 &quot;&lt;span class=\&quot;descfrmTypeLabel\&quot;&gt;Description copied from interface:&amp;nbsp;&lt;code&gt;&quot;
221                 + &quot;&lt;a href=\&quot;I.html#hello(T)\&quot;&gt;I&lt;/a&gt;&lt;/code&gt;&lt;/span&gt;&quot;,
222                 &quot;&lt;dt&gt;&lt;span class=\&quot;overrideSpecifyLabel\&quot;&gt;Specified by:&lt;/span&gt;&lt;/dt&gt;\n&quot;
223                 + &quot;&lt;dd&gt;&lt;code&gt;&lt;a href=\&quot;I.html#hello(T)\&quot;&gt;hello&lt;/a&gt;&lt;/code&gt;&quot;
224                 + &quot;&amp;nbsp;in interface&amp;nbsp;&lt;code&gt;&quot;
225                 + &quot;&lt;a href=\&quot;I.html\&quot; title=\&quot;interface in pkg2\&quot;&gt;I&lt;/a&gt;&quot;
226                 + &quot;&amp;lt;java.lang.String&amp;gt;&lt;/code&gt;&lt;/dd&gt;&quot;);
227 
228         checkOutput(&quot;pkg/PrivateParent.html&quot;, true,
229                 //Make sure when no modifier appear in the class signature, the
230                 //signature is displayed correctly without extra space at the beginning.
231                 &quot;&lt;pre&gt;class &lt;span class=\&quot;typeNameLabel\&quot;&gt;PrivateParent&lt;/span&gt;&quot;);
232 
233         checkOutput(&quot;pkg/PrivateParent.html&quot;, false,
234                 &quot;&lt;pre&gt; class &lt;span class=\&quot;typeNameLabel\&quot;&gt;PrivateParent&lt;/span&gt;&quot;);
235     }
236 }
    </pre>
  </body>
</html>