<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/langtools/jdk/javadoc/doclet/testSearchScript/javadoc-search.js</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 var moduleSearchIndex;
 25 var packageSearchIndex;
 26 var typeSearchIndex;
 27 var memberSearchIndex;
 28 var tagSearchIndex;
 29 
 30 var clargs = arguments;
 31 var search;
 32 
 33 function loadIndexFiles(docsPath) {
 34     tryLoad(docsPath, &quot;module-search-index.js&quot;);
 35     tryLoad(docsPath, &quot;package-search-index.js&quot;);
 36     tryLoad(docsPath, &quot;type-search-index.js&quot;);
 37     tryLoad(docsPath, &quot;member-search-index.js&quot;);
 38     tryLoad(docsPath, &quot;tag-search-index.js&quot;);
 39     load(docsPath + &quot;/search.js&quot;);
 40 }
 41 
 42 function tryLoad(docsPath, file) {
 43     try {
 44         load(docsPath + &quot;/&quot; + file);
 45     } catch (e) {
 46         print(e);
 47     }
 48 }
 49 
 50 var $ = function(f) {
 51     if (typeof f === &quot;function&quot;) {
 52         f();
 53     } else {
 54         return {
 55             val: function() {
 56                 return this;
 57             },
 58             prop: function() {
 59                 return this;
 60             },
 61             addClass: function() {
 62                 return this;
 63             },
 64             removeClass: function() {
 65                 return this;
 66             },
 67             on: function() {
 68                 return this;
 69             },
 70             focus: function() {
 71                 return this;
 72             },
 73             blur: function() {
 74                 return this;
 75             },
 76             click: function() {
 77                 return this;
 78             },
 79             catcomplete: function(o) {
 80                 o.close = function() {};
 81                 search = function(term) {
 82                     var resultList = null;
 83                     o.source({
 84                             term: term
 85                         },
 86                         function(result) {
 87                             resultList = renderMenu(result);
 88                         }
 89                     );
 90                     return resultList;
 91                 };
 92                 for (var i = 0; i &lt; clargs.length; i++) {
 93                     search(clargs[i]);
 94                 }
 95             },
 96             &quot;0&quot;: {
 97                 setSelectionRange: function() {
 98                     return this;
 99                 }
100             }
101         }
102     }
103 };
104 
105 $.each = function(arr, f) {
106     for (var i = 0; i &lt; arr.length; i++) {
107         f(i, arr[i]);
108     }
109 };
110 
111 $.widget = function(a, b, c) {
112 };
113 
114 $.ui = {
115     autocomplete: {
116         escapeRegex: function(re) {
117             return re.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, &#39;\\$&amp;&#39;);
118         }
119     }
120 };
121 
122 var console = {
123     log: function() {
124         print.apply(this, arguments);
125     }
126 };
127 
128 var renderMenu = function(items) {
129     var result = new java.util.ArrayList();
130     var currentCategory = &quot;&quot;;
131     $.each(items, function(index, item) {
132         var li;
133         if (item.l !== noResult.l &amp;&amp; item.category !== currentCategory) {
134             // print(item.category);
135             currentCategory = item.category;
136         }
137         result.add(renderItem(item));
138     });
139     return result;
140 };
141 
142 var renderItem = function(item) {
143     var label;
144     if (item.category === catModules) {
145         label = item.l;
146     } else if (item.category === catPackages) {
147         label = (item.m)
148                 ? item.m + &quot;/&quot; + item.l
149                 : item.l;
150     } else if (item.category === catTypes) {
151         label = (item.p)
152                 ? item.p + &quot;.&quot; + item.l
153                 : item.l;
154     } else if (item.category === catMembers) {
155         label = item.p + &quot;.&quot; + item.c + &quot;.&quot; + item.l;
156     } else if (item.category === catSearchTags) {
157         label = item.l;
158     } else {
159         label = item.l;
160     }
161     return label;
162 };
163 
164 
    </pre>
  </body>
</html>