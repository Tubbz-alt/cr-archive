<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/langtools/jdk/javadoc/tool/T4696488.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="NoStar.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="T4994049/T4994049.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/jdk/javadoc/tool/T4696488.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2012, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2012, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 23,20 ***</span>
  
  /**
   * @test
   * @bug     4696488
   * @summary javadoc doesn&#39;t handle UNC paths for destination directory
<span class="line-modified">!  * @author  Jesse Glick</span>
<span class="line-removed">-  * @modules jdk.javadoc/jdk.javadoc.internal.doclets.toolkit</span>
   * @run main T4696488 T4696488.java
   */
  
<span class="line-modified">! import jdk.javadoc.internal.doclets.toolkit.BaseConfiguration;</span>
  
  public class T4696488 {
  
<span class="line-modified">!     public static void main(String... args) {</span>
          System.setProperty(&quot;file.separator&quot;, &quot;/&quot;);
          assertAddTrailingFileSep(&quot;/path/to/dir&quot;, &quot;/path/to/dir/&quot;);
          assertAddTrailingFileSep(&quot;/path/to/dir/&quot;, &quot;/path/to/dir/&quot;);
          assertAddTrailingFileSep(&quot;/path/to/dir//&quot;, &quot;/path/to/dir/&quot;);
          System.setProperty(&quot;file.separator&quot;, &quot;\\&quot;);
<span class="line-new-header">--- 23,20 ---</span>
  
  /**
   * @test
   * @bug     4696488
   * @summary javadoc doesn&#39;t handle UNC paths for destination directory
<span class="line-modified">!  * @modules jdk.javadoc/jdk.javadoc.internal.doclets.toolkit:+open</span>
   * @run main T4696488 T4696488.java
   */
  
<span class="line-modified">! import java.lang.reflect.Method;</span>
<span class="line-added">+ import jdk.javadoc.internal.doclets.toolkit.BaseOptions;</span>
  
  public class T4696488 {
  
<span class="line-modified">!     public static void main(String... args) throws Exception {</span>
          System.setProperty(&quot;file.separator&quot;, &quot;/&quot;);
          assertAddTrailingFileSep(&quot;/path/to/dir&quot;, &quot;/path/to/dir/&quot;);
          assertAddTrailingFileSep(&quot;/path/to/dir/&quot;, &quot;/path/to/dir/&quot;);
          assertAddTrailingFileSep(&quot;/path/to/dir//&quot;, &quot;/path/to/dir/&quot;);
          System.setProperty(&quot;file.separator&quot;, &quot;\\&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 46,12 ***</span>
          assertAddTrailingFileSep(&quot;\\\\server\\share\\path\\to\\dir&quot;, &quot;\\\\server\\share\\path\\to\\dir\\&quot;);
          assertAddTrailingFileSep(&quot;\\\\server\\share\\path\\to\\dir\\&quot;, &quot;\\\\server\\share\\path\\to\\dir\\&quot;);
          assertAddTrailingFileSep(&quot;\\\\server\\share\\path\\to\\dir\\\\&quot;, &quot;\\\\server\\share\\path\\to\\dir\\&quot;);
      }
  
<span class="line-modified">!     private static void assertAddTrailingFileSep(String input, String expectedOutput) {</span>
<span class="line-modified">!         String output = BaseConfiguration.addTrailingFileSep(input);</span>
          if (!expectedOutput.equals(output)) {
              throw new Error(&quot;expected &quot; + expectedOutput + &quot; but was &quot; + output);
          }
      }
  }
<span class="line-new-header">--- 46,15 ---</span>
          assertAddTrailingFileSep(&quot;\\\\server\\share\\path\\to\\dir&quot;, &quot;\\\\server\\share\\path\\to\\dir\\&quot;);
          assertAddTrailingFileSep(&quot;\\\\server\\share\\path\\to\\dir\\&quot;, &quot;\\\\server\\share\\path\\to\\dir\\&quot;);
          assertAddTrailingFileSep(&quot;\\\\server\\share\\path\\to\\dir\\\\&quot;, &quot;\\\\server\\share\\path\\to\\dir\\&quot;);
      }
  
<span class="line-modified">!     private static void assertAddTrailingFileSep(String input, String expectedOutput) throws Exception {</span>
<span class="line-modified">!         //String output = BaseOptions.addTrailingFileSep(input);</span>
<span class="line-added">+         Method m = BaseOptions.class.getDeclaredMethod(&quot;addTrailingFileSep&quot;, String.class);</span>
<span class="line-added">+         m.setAccessible(true);</span>
<span class="line-added">+         String output = (String) m.invoke(null, input);</span>
          if (!expectedOutput.equals(output)) {
              throw new Error(&quot;expected &quot; + expectedOutput + &quot; but was &quot; + output);
          }
      }
  }
</pre>
<center><a href="NoStar.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="T4994049/T4994049.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>