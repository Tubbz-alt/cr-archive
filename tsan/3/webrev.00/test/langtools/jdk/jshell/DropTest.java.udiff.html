<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/langtools/jdk/jshell/DropTest.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="CustomEditor.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ExceptionsTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/jdk/jshell/DropTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -21,18 +21,19 @@</span>
   * questions.
   */
  
  /*
   * @test
<span class="udiff-line-modified-removed">-  * @bug 8081431 8080069 8167128</span>
<span class="udiff-line-modified-added">+  * @bug 8081431 8080069 8167128 8199623</span>
   * @summary Test of JShell#drop().
   * @build KullaTesting TestingInputStream
   * @run testng DropTest
   */
  
  import jdk.jshell.DeclarationSnippet;
  import jdk.jshell.Snippet;
<span class="udiff-line-added">+ import jdk.jshell.MethodSnippet;</span>
  import jdk.jshell.VarSnippet;
  import org.testng.annotations.Test;
  
  import static jdk.jshell.Snippet.Status.*;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -223,6 +224,19 @@</span>
                  ste(ax, VALID, OVERWRITTEN, false, MAIN_SNIPPET)));
          assertEval(as1,
                  ste(MAIN_SNIPPET, VALID, VALID, true, null),
                  ste(ax, VALID, OVERWRITTEN, false, MAIN_SNIPPET));
      }
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     // 8199623</span>
<span class="udiff-line-added">+     public void testTwoForkedDrop() {</span>
<span class="udiff-line-added">+         MethodSnippet p = methodKey(assertEval(&quot;void p() throws Exception { ((String) null).toString(); }&quot;));</span>
<span class="udiff-line-added">+         MethodSnippet n = methodKey(assertEval(&quot;void n() throws Exception { try { p(); } catch (Exception ex) { throw new RuntimeException(\&quot;bar\&quot;, ex); }}&quot;));</span>
<span class="udiff-line-added">+         MethodSnippet m = methodKey(assertEval(&quot;void m() { try { n(); } catch (Exception ex) { throw new RuntimeException(\&quot;foo\&quot;, ex); }}&quot;));</span>
<span class="udiff-line-added">+         MethodSnippet c = methodKey(assertEval(&quot;void c() throws Throwable { p(); }&quot;));</span>
<span class="udiff-line-added">+         assertDrop(p,</span>
<span class="udiff-line-added">+                 ste(p, VALID, DROPPED, true, null),</span>
<span class="udiff-line-added">+                 ste(n, VALID, RECOVERABLE_DEFINED, false, p),</span>
<span class="udiff-line-added">+                 ste(c, VALID, RECOVERABLE_DEFINED, false, p));</span>
<span class="udiff-line-added">+         assertActiveKeys();</span>
<span class="udiff-line-added">+     }</span>
  }
</pre>
<center><a href="CustomEditor.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ExceptionsTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>