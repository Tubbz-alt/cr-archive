<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/langtools/jdk/jshell/CompletenessTest.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="ClassesTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="CompletionSuggestionTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/jdk/jshell/CompletenessTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
<span class="line-modified"> 26  * @bug 8149524 8131024 8165211 8080071 8130454 8167343 8129559 8114842 8182268</span>
 27  * @summary Test SourceCodeAnalysis
 28  * @build KullaTesting TestingInputStream
 29  * @run testng CompletenessTest
 30  */
 31 
 32 import java.util.Map;
 33 import java.util.HashMap;



 34 
 35 import org.testng.annotations.Test;
 36 import jdk.jshell.SourceCodeAnalysis.Completeness;
 37 
 38 import static jdk.jshell.SourceCodeAnalysis.Completeness.*;

 39 
 40 @Test
 41 public class CompletenessTest extends KullaTesting {
 42 
 43     // Add complete units that end with semicolon to complete_with_semi (without
 44     // the semicolon).  Both cases will be tested.
 45     static final String[] complete = new String[] {
 46         &quot;{ x= 4; }&quot;,
 47         &quot;int mm(int x) {kll}&quot;,
 48         &quot;if (t) { ddd; }&quot;,
 49         &quot;for (int i = 0; i &lt; lines.length(); ++i) { foo }&quot;,
 50         &quot;while (ct == null) { switch (current.kind) { case EOF: { } } }&quot;,
 51         &quot;if (match.kind == BRACES &amp;&amp; (prevCT.kind == ARROW || prevCT.kind == NEW_MIDDLE)) { new CT(UNMATCHED, current, \&quot;Unmatched \&quot; + unmatched); }&quot;,
 52         &quot;enum TK { EOF(TokenKind.EOF, 0), NEW_MIDDLE(XEXPR1|XTERM); }&quot;,
 53         &quot;List&lt;T&gt; f() { return null; }&quot;,
 54         &quot;List&lt;?&gt; f() { return null; }&quot;,
 55         &quot;List&lt;? extends Object&gt; f() { return null; }&quot;,
 56         &quot;Map&lt;? extends Object, ? super Object&gt; f() { return null; }&quot;,
 57         &quot;class C { int z; }&quot;,
 58         &quot;synchronized (r) { f(); }&quot;,
 59         &quot;try { } catch (Exception ex) { }&quot;,
 60         &quot;try { } catch (Exception ex) { } finally { }&quot;,
 61         &quot;try { } finally { }&quot;,
 62         &quot;try (java.util.zip.ZipFile zf = new java.util.zip.ZipFile(zipFileName)) { }&quot;,
 63         &quot;foo: while (true) { printf(\&quot;Innn\&quot;); break foo; }&quot;,
 64         &quot;class Case&lt;E1 extends Enum&lt;E1&gt;, E2 extends Enum&lt;E2&gt;, E3 extends Enum&lt;E3&gt;&gt; {}&quot;,
 65         &quot;;&quot;,
<span class="line-modified"> 66         &quot;enum Tt { FOO, BAR, BAZ,; }&quot;</span>


 67     };
 68 
 69     static final String[] expression = new String[] {
 70         &quot;test&quot;,
 71         &quot;x + y&quot;,
 72         &quot;x + y ++&quot;,
 73         &quot;p = 9&quot;,
 74         &quot;match(BRACKETS, TokenKind.LBRACKET)&quot;,
 75         &quot;new C()&quot;,
 76         &quot;new C() { public String toString() { return \&quot;Hi\&quot;; } }&quot;,
 77         &quot;new int[]&quot;,
 78         &quot;new int[] {1, 2,3}&quot;,
 79         &quot;new Foo() {}&quot;,
 80         &quot;i &gt;= 0 &amp;&amp; Character.isWhitespace(s.charAt(i))&quot;,
 81         &quot;int.class&quot;,
 82         &quot;String.class&quot;,




 83     };
 84 
 85     static final String[] complete_with_semi = new String[] {
 86         &quot;int mm&quot;,
 87         &quot;if (t) ddd&quot;,
 88         &quot;int p = 9&quot;,
 89         &quot;int p&quot;,
 90         &quot;Deque&lt;Token&gt; stack = new ArrayDeque&lt;&gt;()&quot;,
 91         &quot;final Deque&lt;Token&gt; stack = new ArrayDeque&lt;&gt;()&quot;,
 92         &quot;java.util.Scanner input = new java.util.Scanner(System.in)&quot;,
 93         &quot;java.util.Scanner input = new java.util.Scanner(System.in) { }&quot;,
 94         &quot;int j = -i&quot;,
 95         &quot;String[] a = { \&quot;AAA\&quot; }&quot;,
 96         &quot;assert true&quot;,
 97         &quot;int path[]&quot;,
 98         &quot;int path[][]&quot;,
 99         &quot;int path[][] = new int[22][]&quot;,
100         &quot;int path[] = new int[22]&quot;,
101         &quot;int path[] = new int[] {1, 2, 3}&quot;,
102         &quot;int[] path&quot;,
</pre>
<hr />
<pre>
174         &quot;class C implements D, E&quot;,
175         &quot;interface I extends D&quot;,
176         &quot;interface I extends D, E&quot;,
177         &quot;enum E&quot;,
178         &quot;enum E implements I1&quot;,
179         &quot;enum E implements I1, I2&quot;,
180         &quot;@interface Anno&quot;,
181         &quot;void f()&quot;,
182         &quot;void f() throws E&quot;,
183         &quot;@A(&quot;,
184         &quot;int n = 4,&quot;,
185         &quot;int n,&quot;,
186         &quot;int[] m = {1, 2},&quot;,
187         &quot;int[] m = {1, 2}, n = {3, 4},&quot;,
188         &quot;Map&lt;String,&quot;,
189         &quot;switch (x) {&quot;,
190         &quot;var v = switch (x) {&quot;,
191         &quot;var v = switch (x) { case &quot;,
192         &quot;var v = switch (x) { case 0:&quot;,
193         &quot;var v = switch (x) { case 0: break 12; &quot;,






















194     };
195 
196     static final String[] unknown = new String[] {
197         &quot;new ;&quot;
198     };
199 
200     static final Map&lt;Completeness, String[]&gt; statusToCases = new HashMap&lt;&gt;();
201     static {
202         statusToCases.put(COMPLETE, complete);
203         statusToCases.put(COMPLETE_WITH_SEMI, complete_with_semi);
204         statusToCases.put(CONSIDERED_INCOMPLETE, considered_incomplete);
205         statusToCases.put(DEFINITELY_INCOMPLETE, definitely_incomplete);
206     }
207 
208     private void assertStatus(String input, Completeness status, String source) {
209         String augSrc;
210         switch (status) {
211             case COMPLETE_WITH_SEMI:
212                 augSrc = source + &quot;;&quot;;
213                 break;
</pre>
<hr />
<pre>
222 
223             case EMPTY:
224             case COMPLETE:
225             case UNKNOWN:
226                 augSrc = source;
227                 break;
228 
229             default:
230                 throw new AssertionError();
231         }
232         assertAnalyze(input, status, augSrc);
233     }
234 
235     private void assertStatus(String[] ins, Completeness status) {
236         for (String input : ins) {
237             assertStatus(input, status, input);
238         }
239     }
240 
241     public void test_complete() {
<span class="line-modified">242         assertStatus(complete, COMPLETE);</span>
243     }
244 
245     public void test_expression() {
246         assertStatus(expression, COMPLETE);
247     }
248 
249     public void test_complete_with_semi() {
250         assertStatus(complete_with_semi, COMPLETE_WITH_SEMI);
251     }
252 
253     public void test_considered_incomplete() {
254         assertStatus(considered_incomplete, CONSIDERED_INCOMPLETE);
255     }
256 
257     public void test_definitely_incomplete() {
258         assertStatus(definitely_incomplete, DEFINITELY_INCOMPLETE);
259     }
260 
261     public void test_unknown() {
262         assertStatus(definitely_incomplete, DEFINITELY_INCOMPLETE);
</pre>
<hr />
<pre>
311             assertSourceByStatus(input);
312         }
313     }
314 
315     public void testCompleteSource_considered_incomplete() {
316         for (String in : considered_incomplete) {
317             String input = in + &quot;;&quot;;
318             assertSourceByStatus(input);
319         }
320     }
321 
322     public void testTrailingSlash() {
323         assertStatus(&quot;\&quot;abc\\&quot;, UNKNOWN, &quot;\&quot;abc\\&quot;);
324     }
325 
326     public void testOpenComment() {
327         assertStatus(&quot;int xx; /* hello&quot;, DEFINITELY_INCOMPLETE, null);
328         assertStatus(&quot;/**  test&quot;, DEFINITELY_INCOMPLETE, null);
329     }
330 












331     public void testMiscSource() {
332         assertStatus(&quot;if (t) if &quot;, DEFINITELY_INCOMPLETE, &quot;if (t) if&quot;); //Bug
333         assertStatus(&quot;int m() {} dfd&quot;, COMPLETE, &quot;int m() {}&quot;);
334         assertStatus(&quot;int p = &quot;, DEFINITELY_INCOMPLETE, &quot;int p =&quot;); //Bug
335         assertStatus(&quot;int[] m = {1, 2}, n = new int[0];  int i;&quot;, COMPLETE,
336                      &quot;int[] m = {1, 2}, n = new int[0];&quot;);
337     }






338 }
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
<span class="line-modified"> 26  * @bug 8149524 8131024 8165211 8080071 8130454 8167343 8129559 8114842 8182268 8223782 8235474</span>
 27  * @summary Test SourceCodeAnalysis
 28  * @build KullaTesting TestingInputStream
 29  * @run testng CompletenessTest
 30  */
 31 
 32 import java.util.Map;
 33 import java.util.HashMap;
<span class="line-added"> 34 import java.util.function.Consumer;</span>
<span class="line-added"> 35 import javax.lang.model.SourceVersion;</span>
<span class="line-added"> 36 import jdk.jshell.JShell;</span>
 37 
 38 import org.testng.annotations.Test;
 39 import jdk.jshell.SourceCodeAnalysis.Completeness;
 40 
 41 import static jdk.jshell.SourceCodeAnalysis.Completeness.*;
<span class="line-added"> 42 import org.testng.annotations.BeforeMethod;</span>
 43 
 44 @Test
 45 public class CompletenessTest extends KullaTesting {
 46 
 47     // Add complete units that end with semicolon to complete_with_semi (without
 48     // the semicolon).  Both cases will be tested.
 49     static final String[] complete = new String[] {
 50         &quot;{ x= 4; }&quot;,
 51         &quot;int mm(int x) {kll}&quot;,
 52         &quot;if (t) { ddd; }&quot;,
 53         &quot;for (int i = 0; i &lt; lines.length(); ++i) { foo }&quot;,
 54         &quot;while (ct == null) { switch (current.kind) { case EOF: { } } }&quot;,
 55         &quot;if (match.kind == BRACES &amp;&amp; (prevCT.kind == ARROW || prevCT.kind == NEW_MIDDLE)) { new CT(UNMATCHED, current, \&quot;Unmatched \&quot; + unmatched); }&quot;,
 56         &quot;enum TK { EOF(TokenKind.EOF, 0), NEW_MIDDLE(XEXPR1|XTERM); }&quot;,
 57         &quot;List&lt;T&gt; f() { return null; }&quot;,
 58         &quot;List&lt;?&gt; f() { return null; }&quot;,
 59         &quot;List&lt;? extends Object&gt; f() { return null; }&quot;,
 60         &quot;Map&lt;? extends Object, ? super Object&gt; f() { return null; }&quot;,
 61         &quot;class C { int z; }&quot;,
 62         &quot;synchronized (r) { f(); }&quot;,
 63         &quot;try { } catch (Exception ex) { }&quot;,
 64         &quot;try { } catch (Exception ex) { } finally { }&quot;,
 65         &quot;try { } finally { }&quot;,
 66         &quot;try (java.util.zip.ZipFile zf = new java.util.zip.ZipFile(zipFileName)) { }&quot;,
 67         &quot;foo: while (true) { printf(\&quot;Innn\&quot;); break foo; }&quot;,
 68         &quot;class Case&lt;E1 extends Enum&lt;E1&gt;, E2 extends Enum&lt;E2&gt;, E3 extends Enum&lt;E3&gt;&gt; {}&quot;,
 69         &quot;;&quot;,
<span class="line-modified"> 70         &quot;enum Tt { FOO, BAR, BAZ,; }&quot;,</span>
<span class="line-added"> 71         &quot;record D(int i) {}&quot;,</span>
<span class="line-added"> 72         &quot;static record D(int i) {}&quot;,</span>
 73     };
 74 
 75     static final String[] expression = new String[] {
 76         &quot;test&quot;,
 77         &quot;x + y&quot;,
 78         &quot;x + y ++&quot;,
 79         &quot;p = 9&quot;,
 80         &quot;match(BRACKETS, TokenKind.LBRACKET)&quot;,
 81         &quot;new C()&quot;,
 82         &quot;new C() { public String toString() { return \&quot;Hi\&quot;; } }&quot;,
 83         &quot;new int[]&quot;,
 84         &quot;new int[] {1, 2,3}&quot;,
 85         &quot;new Foo() {}&quot;,
 86         &quot;i &gt;= 0 &amp;&amp; Character.isWhitespace(s.charAt(i))&quot;,
 87         &quot;int.class&quot;,
 88         &quot;String.class&quot;,
<span class="line-added"> 89         &quot;record.any&quot;,</span>
<span class="line-added"> 90         &quot;record()&quot;,</span>
<span class="line-added"> 91         &quot;record(1)&quot;,</span>
<span class="line-added"> 92         &quot;record.length()&quot;</span>
 93     };
 94 
 95     static final String[] complete_with_semi = new String[] {
 96         &quot;int mm&quot;,
 97         &quot;if (t) ddd&quot;,
 98         &quot;int p = 9&quot;,
 99         &quot;int p&quot;,
100         &quot;Deque&lt;Token&gt; stack = new ArrayDeque&lt;&gt;()&quot;,
101         &quot;final Deque&lt;Token&gt; stack = new ArrayDeque&lt;&gt;()&quot;,
102         &quot;java.util.Scanner input = new java.util.Scanner(System.in)&quot;,
103         &quot;java.util.Scanner input = new java.util.Scanner(System.in) { }&quot;,
104         &quot;int j = -i&quot;,
105         &quot;String[] a = { \&quot;AAA\&quot; }&quot;,
106         &quot;assert true&quot;,
107         &quot;int path[]&quot;,
108         &quot;int path[][]&quot;,
109         &quot;int path[][] = new int[22][]&quot;,
110         &quot;int path[] = new int[22]&quot;,
111         &quot;int path[] = new int[] {1, 2, 3}&quot;,
112         &quot;int[] path&quot;,
</pre>
<hr />
<pre>
184         &quot;class C implements D, E&quot;,
185         &quot;interface I extends D&quot;,
186         &quot;interface I extends D, E&quot;,
187         &quot;enum E&quot;,
188         &quot;enum E implements I1&quot;,
189         &quot;enum E implements I1, I2&quot;,
190         &quot;@interface Anno&quot;,
191         &quot;void f()&quot;,
192         &quot;void f() throws E&quot;,
193         &quot;@A(&quot;,
194         &quot;int n = 4,&quot;,
195         &quot;int n,&quot;,
196         &quot;int[] m = {1, 2},&quot;,
197         &quot;int[] m = {1, 2}, n = {3, 4},&quot;,
198         &quot;Map&lt;String,&quot;,
199         &quot;switch (x) {&quot;,
200         &quot;var v = switch (x) {&quot;,
201         &quot;var v = switch (x) { case &quot;,
202         &quot;var v = switch (x) { case 0:&quot;,
203         &quot;var v = switch (x) { case 0: break 12; &quot;,
<span class="line-added">204         &quot;record D&quot;,</span>
<span class="line-added">205         &quot;record D(&quot;,</span>
<span class="line-added">206         &quot;record D(String&quot;,</span>
<span class="line-added">207         &quot;record D(String i&quot;,</span>
<span class="line-added">208         &quot;record D(String i,&quot;,</span>
<span class="line-added">209         &quot;record D(String i, String&quot;,</span>
<span class="line-added">210         &quot;record D(String i, String j&quot;,</span>
<span class="line-added">211         &quot;record D(String i)&quot;,</span>
<span class="line-added">212         &quot;record D(String i, String j)&quot;,</span>
<span class="line-added">213         &quot;record D(String i) {&quot;,</span>
<span class="line-added">214         &quot;record D(String i, String j) {&quot;,</span>
<span class="line-added">215         &quot;static record D&quot;,</span>
<span class="line-added">216         &quot;static record D(&quot;,</span>
<span class="line-added">217         &quot;static record D(String&quot;,</span>
<span class="line-added">218         &quot;static record D(String i&quot;,</span>
<span class="line-added">219         &quot;static record D(String i,&quot;,</span>
<span class="line-added">220         &quot;static record D(String i, String&quot;,</span>
<span class="line-added">221         &quot;static record D(String i, String j&quot;,</span>
<span class="line-added">222         &quot;static record D(String i)&quot;,</span>
<span class="line-added">223         &quot;static record D(String i, String j)&quot;,</span>
<span class="line-added">224         &quot;static record D(String i) {&quot;,</span>
<span class="line-added">225         &quot;static record D(String i, String j) {&quot;,</span>
226     };
227 
228     static final String[] unknown = new String[] {
229         &quot;new ;&quot;
230     };
231 
232     static final Map&lt;Completeness, String[]&gt; statusToCases = new HashMap&lt;&gt;();
233     static {
234         statusToCases.put(COMPLETE, complete);
235         statusToCases.put(COMPLETE_WITH_SEMI, complete_with_semi);
236         statusToCases.put(CONSIDERED_INCOMPLETE, considered_incomplete);
237         statusToCases.put(DEFINITELY_INCOMPLETE, definitely_incomplete);
238     }
239 
240     private void assertStatus(String input, Completeness status, String source) {
241         String augSrc;
242         switch (status) {
243             case COMPLETE_WITH_SEMI:
244                 augSrc = source + &quot;;&quot;;
245                 break;
</pre>
<hr />
<pre>
254 
255             case EMPTY:
256             case COMPLETE:
257             case UNKNOWN:
258                 augSrc = source;
259                 break;
260 
261             default:
262                 throw new AssertionError();
263         }
264         assertAnalyze(input, status, augSrc);
265     }
266 
267     private void assertStatus(String[] ins, Completeness status) {
268         for (String input : ins) {
269             assertStatus(input, status, input);
270         }
271     }
272 
273     public void test_complete() {
<span class="line-modified">274          assertStatus(complete, COMPLETE);</span>
275     }
276 
277     public void test_expression() {
278         assertStatus(expression, COMPLETE);
279     }
280 
281     public void test_complete_with_semi() {
282         assertStatus(complete_with_semi, COMPLETE_WITH_SEMI);
283     }
284 
285     public void test_considered_incomplete() {
286         assertStatus(considered_incomplete, CONSIDERED_INCOMPLETE);
287     }
288 
289     public void test_definitely_incomplete() {
290         assertStatus(definitely_incomplete, DEFINITELY_INCOMPLETE);
291     }
292 
293     public void test_unknown() {
294         assertStatus(definitely_incomplete, DEFINITELY_INCOMPLETE);
</pre>
<hr />
<pre>
343             assertSourceByStatus(input);
344         }
345     }
346 
347     public void testCompleteSource_considered_incomplete() {
348         for (String in : considered_incomplete) {
349             String input = in + &quot;;&quot;;
350             assertSourceByStatus(input);
351         }
352     }
353 
354     public void testTrailingSlash() {
355         assertStatus(&quot;\&quot;abc\\&quot;, UNKNOWN, &quot;\&quot;abc\\&quot;);
356     }
357 
358     public void testOpenComment() {
359         assertStatus(&quot;int xx; /* hello&quot;, DEFINITELY_INCOMPLETE, null);
360         assertStatus(&quot;/**  test&quot;, DEFINITELY_INCOMPLETE, null);
361     }
362 
<span class="line-added">363     public void testTextBlocks() {</span>
<span class="line-added">364         assertStatus(&quot;\&quot;\&quot;\&quot;&quot;, DEFINITELY_INCOMPLETE, null);</span>
<span class="line-added">365         assertStatus(&quot;\&quot;\&quot;\&quot;broken&quot;, DEFINITELY_INCOMPLETE, null);</span>
<span class="line-added">366         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext&quot;, DEFINITELY_INCOMPLETE, null);</span>
<span class="line-added">367         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext\&quot;\&quot;&quot;, DEFINITELY_INCOMPLETE, &quot;\&quot;\&quot;\&quot;\ntext\&quot;\&quot;\&quot;&quot;);</span>
<span class="line-added">368         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext\&quot;\&quot;\&quot;&quot;, COMPLETE, &quot;\&quot;\&quot;\&quot;\ntext\&quot;\&quot;\&quot;&quot;);</span>
<span class="line-added">369         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext\\\&quot;\&quot;\&quot;\&quot;&quot;, COMPLETE, &quot;\&quot;\&quot;\&quot;\ntext\\\&quot;\&quot;\&quot;\&quot;&quot;);</span>
<span class="line-added">370         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext\\\&quot;\&quot;\&quot;&quot;, DEFINITELY_INCOMPLETE, null);</span>
<span class="line-added">371         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext\\\&quot;\&quot;\&quot;\\\&quot;\&quot;\&quot;&quot;, DEFINITELY_INCOMPLETE, null);</span>
<span class="line-added">372         assertStatus(&quot;\&quot;\&quot;\&quot;\ntext\\\&quot;\&quot;\&quot;\\\&quot;\&quot;\&quot;\&quot;\&quot;\&quot;&quot;, COMPLETE, &quot;\&quot;\&quot;\&quot;\ntext\\\&quot;\&quot;\&quot;\\\&quot;\&quot;\&quot;\&quot;\&quot;\&quot;&quot;);</span>
<span class="line-added">373     }</span>
<span class="line-added">374 </span>
375     public void testMiscSource() {
376         assertStatus(&quot;if (t) if &quot;, DEFINITELY_INCOMPLETE, &quot;if (t) if&quot;); //Bug
377         assertStatus(&quot;int m() {} dfd&quot;, COMPLETE, &quot;int m() {}&quot;);
378         assertStatus(&quot;int p = &quot;, DEFINITELY_INCOMPLETE, &quot;int p =&quot;); //Bug
379         assertStatus(&quot;int[] m = {1, 2}, n = new int[0];  int i;&quot;, COMPLETE,
380                      &quot;int[] m = {1, 2}, n = new int[0];&quot;);
381     }
<span class="line-added">382 </span>
<span class="line-added">383     @BeforeMethod</span>
<span class="line-added">384     public void setUp() {</span>
<span class="line-added">385         setUp(b -&gt; b.compilerOptions(&quot;--enable-preview&quot;, &quot;-source&quot;, String.valueOf(SourceVersion.latest().ordinal())));</span>
<span class="line-added">386     }</span>
<span class="line-added">387 </span>
388 }
</pre>
</td>
</tr>
</table>
<center><a href="ClassesTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="CompletionSuggestionTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>