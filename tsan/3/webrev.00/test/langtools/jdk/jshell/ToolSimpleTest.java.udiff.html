<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/langtools/jdk/jshell/ToolSimpleTest.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="ToolLocalSimpleTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ToolTabSnippetTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/langtools/jdk/jshell/ToolSimpleTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2016, 2018, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2016, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -21,11 +21,11 @@</span>
   * questions.
   */
  
  /*
   * @test
<span class="udiff-line-modified-removed">-  * @bug 8153716 8143955 8151754 8150382 8153920 8156910 8131024 8160089 8153897 8167128 8154513 8170015 8170368 8172102 8172103  8165405 8173073 8173848 8174041 8173916 8174028 8174262 8174797 8177079 8180508 8177466 8172154 8192979 8191842 8198573 8198801 8210596 8210959 8215099</span>
<span class="udiff-line-modified-added">+  * @bug 8153716 8143955 8151754 8150382 8153920 8156910 8131024 8160089 8153897 8167128 8154513 8170015 8170368 8172102 8172103  8165405 8173073 8173848 8174041 8173916 8174028 8174262 8174797 8177079 8180508 8177466 8172154 8192979 8191842 8198573 8198801 8210596 8210959 8215099 8199623 8236715</span>
   * @summary Simple jshell tool tests
   * @modules jdk.compiler/com.sun.tools.javac.api
   *          jdk.compiler/com.sun.tools.javac.main
   *          jdk.jdeps/com.sun.tools.javap
   *          jdk.jshell/jdk.internal.jshell.tool
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -268,10 +268,37 @@</span>
                          &quot;|  created method g(), however, it cannot be invoked until variable x is declared&quot;),
                  (a) -&gt; assertCommand(a, &quot;g()&quot;, &quot;|  attempted to call method g() which cannot be invoked until variable x is declared&quot;)
          );
      }
  
<span class="udiff-line-added">+     // 8199623</span>
<span class="udiff-line-added">+     @Test</span>
<span class="udiff-line-added">+     public void testTwoForkedDrop() {</span>
<span class="udiff-line-added">+         test(</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;void p() throws Exception { ((String) null).toString(); }&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  created method p()&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;void n() throws Exception { try { p(); } catch (Exception ex) { throw new IOException(\&quot;bar\&quot;, ex); }} &quot;,</span>
<span class="udiff-line-added">+                         &quot;|  created method n()&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;void m() { try { n(); } catch (Exception ex) { throw new RuntimeException(\&quot;foo\&quot;, ex); }}&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  created method m()&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;void c() throws Throwable { p(); }&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  created method c()&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;/drop p&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  dropped method p()&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;m()&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  attempted to call method n() which cannot be invoked until method p() is declared&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;/meth n&quot;,</span>
<span class="udiff-line-added">+                         &quot;|    void n()\n&quot; +</span>
<span class="udiff-line-added">+                         &quot;|       which cannot be invoked until method p() is declared&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;/meth m&quot;,</span>
<span class="udiff-line-added">+                         &quot;|    void m()&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommand(a, &quot;/meth c&quot;,</span>
<span class="udiff-line-added">+                         &quot;|    void c()\n&quot; +</span>
<span class="udiff-line-added">+                                 &quot;|       which cannot be invoked until method p() is declared&quot;)</span>
<span class="udiff-line-added">+         );</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+ </span>
      @Test
      public void testUnknownCommand() {
          test((a) -&gt; assertCommand(a, &quot;/unknown&quot;,
                  &quot;|  Invalid command: /unknown\n&quot; +
                  &quot;|  Type /help for help.&quot;));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -873,6 +900,16 @@</span>
                  a -&gt; assertVariable(a, &quot;A&quot;, &quot;a&quot;, &quot;new A()&quot;, &quot;A@.+&quot;),
                  a -&gt; assertVariable(a, &quot;int&quot;, &quot;error&quot;, &quot;4711&quot;, &quot;4711&quot;),
                  a -&gt; assertCommandOutputContains(a, &quot;a&quot;, &quot;A@&quot;)
          );
      }
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     @Test</span>
<span class="udiff-line-added">+     public void testRecords() {</span>
<span class="udiff-line-added">+         test(new String[] {&quot;--enable-preview&quot;},</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommandOutputContains(a, &quot;record R(int i) { public int g() { return j; } }&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  created record R, however, it cannot be instantiated or its methods invoked until variable j is declared&quot;),</span>
<span class="udiff-line-added">+                 (a) -&gt; assertCommandOutputContains(a, &quot;new R(0)&quot;,</span>
<span class="udiff-line-added">+                         &quot;|  attempted to use record R which cannot be instantiated or its methods invoked until variable j is declared&quot;)</span>
<span class="udiff-line-added">+         );</span>
<span class="udiff-line-added">+     }</span>
  }
</pre>
<center><a href="ToolLocalSimpleTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ToolTabSnippetTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>