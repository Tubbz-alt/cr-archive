<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/lib/jdk/test/lib/containers/docker/DockerfileConfig.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * Copyright (c) 2019, Oracle and/or its affiliates. All rights reserved.
 3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 4  *
 5  * This code is free software; you can redistribute it and/or modify it
 6  * under the terms of the GNU General Public License version 2 only, as
 7  * published by the Free Software Foundation.
 8  *
 9  * This code is distributed in the hope that it will be useful, but WITHOUT
10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
12  * version 2 for more details (a copy is included in the LICENSE file that
13  * accompanied this code).
14  *
15  * You should have received a copy of the GNU General Public License version
16  * 2 along with this work; if not, write to the Free Software Foundation,
17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
18  *
19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
20  * or visit www.oracle.com if you need additional information or have any
21  * questions.
22  */
23 
24 package jdk.test.lib.containers.docker;
25 
26 import jdk.test.lib.Platform;
27 
28 // Use the following properties to specify docker base image at test execution time:
29 // Image name: jdk.test.docker.image.name
30 // Image version: jdk.test.docker.image.version
31 // Usage:
32 //     jtreg -Djdk.test.docker.image.name=&lt;BASE_IMAGE_NAME&gt; -Djdk.test.docker.image.version=&lt;BASE_IMAGE_VERSION&gt; test/hotspot/jtreg/runtime/containers/docker/
33 // E.g.:
34 //     jtreg -Djdk.test.docker.image.name=ubuntu -Djdk.test.docker.image.version=latest test/hotspot/jtreg/runtime/containers/docker/
35 // Using make:
36 //     make test TEST=&quot;test/hotspot/jtreg/runtime/containers/docker&quot; JTREG=&quot;JAVA_OPTIONS=-Djdk.test.docker.image.name=ubuntu -Djdk.test.docker.image.version=latest&quot;
37 // Note: base image version should not be an empty string. Use &quot;latest&quot; to get the latest version.
38 
39 public class DockerfileConfig {
40     static String getBaseImageName() {
41         String name = System.getProperty(&quot;jdk.test.docker.image.name&quot;);
42         if (name != null) {
43             System.out.println(&quot;DockerfileConfig: using custom image name: &quot; + name);
44             return name;
45         }
46 
47         switch (Platform.getOsArch()) {
48             case &quot;aarch64&quot;:
49                 return &quot;arm64v8/ubuntu&quot;;
50             case &quot;ppc64le&quot;:
51                 return &quot;ppc64le/ubuntu&quot;;
52             case &quot;s390x&quot;:
53                 return &quot;s390x/ubuntu&quot;;
54             default:
55                 return &quot;oraclelinux&quot;;
56         }
57     }
58 
59     static String getBaseImageVersion() {
60         String version = System.getProperty(&quot;jdk.test.docker.image.version&quot;);
61         if (version != null) {
62             System.out.println(&quot;DockerfileConfig: using custom image version: &quot; + version);
63             return version;
64         }
65 
66         switch (Platform.getOsArch()) {
67             case &quot;aarch64&quot;:
68             case &quot;ppc64le&quot;:
69             case &quot;s390x&quot;:
70                 return &quot;latest&quot;;
71             default:
72                 return &quot;7.6&quot;;
73         }
74     }
75 }
    </pre>
  </body>
</html>