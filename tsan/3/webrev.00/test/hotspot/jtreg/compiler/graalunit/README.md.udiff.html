<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/compiler/graalunit/README.md</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="PhasesCommonTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="Replacements12Test.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/graalunit/README.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -19,18 +19,27 @@</span>
  
   hamcrest-core-1.3.jar:
   https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/hamcrest-core-1.3.jar
  
   java-allocation-instrumenter.jar:
<span class="udiff-line-modified-removed">-  https://lafo.ssw.uni-linz.ac.at/pub/java-allocation-instrumenter/java-allocation-instrumenter-8f0db117e64e.jar</span>
<span class="udiff-line-modified-added">+  https://lafo.ssw.uni-linz.ac.at/pub/java-allocation-instrumenter/java-allocation-instrumenter.jar</span>
  
  Before running the tests you need to download these jars from above locations in build/&lt;platform&gt;/images/test/hotspot/jtreg/graal/
<span class="udiff-line-modified-removed">- directory. Then you can pass it to jtreg as java option by using &quot;-vmoptions:-Dgraalunit.libs=&quot;  or as environment variable</span>
<span class="udiff-line-modified-removed">- by using &quot;-e:TEST_IMAGE_GRAAL_DIR=...&quot;</span>
<span class="udiff-line-modified-added">+ directory. You can use &#39;downloadLibs.sh&#39; script which will try to download all these libs using wget.</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ Then you can run Graal unit test(s) using &#39;make run-test&#39;:</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ &gt; make run-test TEST=&quot;compiler/graalunit/ApiTest.java&quot; TEST_VM_OPTS=&quot;-server -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI&quot;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ If you want to use jtreg directly you need to say jtreg where to find external jars.</span>
<span class="udiff-line-added">+ You can do it by passing additional option &quot;-vmoptions:-Dgraalunit.libs=&quot; or setting environment variable by using &quot;-e:TEST_IMAGE_GRAAL_DIR=...&quot;</span>
  
  Example:
<span class="udiff-line-modified-removed">- &gt; jtreg -vt -jdk:&lt;TESTED_JDK&gt; -vmoptions:&quot;-Dgraalunit.libs=build/&lt;platform&gt;/images/test/hotspot/jtreg/graal&quot;</span>
<span class="udiff-line-modified-added">+ &gt; jtreg -vt -jdk:&lt;TESTED_JDK&gt; -vmoptions:&quot;-server -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI&quot;</span>
<span class="udiff-line-added">+         -vmoptions:&quot;-Dgraalunit.libs=build/&lt;platform&gt;/images/test/hotspot/jtreg/graal&quot;</span>
          compiler/graalunit/UtilTest.java
  
  To run Graal unit tests in Graal as JIT mode pass additional -vmoptions to jtreg:
   -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+TieredCompilation -XX:+UseJVMCICompiler -Djvmci.Compiler=graal
  
</pre>
<center><a href="PhasesCommonTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="Replacements12Test.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>