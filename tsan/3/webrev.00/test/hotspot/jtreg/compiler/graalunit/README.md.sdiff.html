<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/compiler/graalunit/README.md</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="PhasesCommonTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="Replacements12Test.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/graalunit/README.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 4 tests as it is done by &quot;mx unittest&quot; command from Graal project.
 5 
 6 All compiler/graalunit/*.java tests were automatically generated by generateTests.sh script which reads
 7 &quot;testName -&gt; testPrefix [requiresStatement]&quot; mapping from TestPackages.txt file and generates corresponding &lt;testName&gt;Test.java
 8 tests. The mapping takes into account tests execution time to avoid very long test runs.
 9 
10 Graal unit tests depends on following external jar files:
11  asm-5.0.4.jar:
12  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/asm-5.0.4.jar
13 
14  asm-tree-5.0.4.jar:
15  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/asm-tree-5.0.4.jar
16 
17  junit-4.12.jar:
18  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/junit-4.12.jar
19 
20  hamcrest-core-1.3.jar:
21  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/hamcrest-core-1.3.jar
22 
23  java-allocation-instrumenter.jar:
<span class="line-modified">24  https://lafo.ssw.uni-linz.ac.at/pub/java-allocation-instrumenter/java-allocation-instrumenter-8f0db117e64e.jar</span>
25 
26 Before running the tests you need to download these jars from above locations in build/&lt;platform&gt;/images/test/hotspot/jtreg/graal/
<span class="line-modified">27 directory. Then you can pass it to jtreg as java option by using &quot;-vmoptions:-Dgraalunit.libs=&quot;  or as environment variable</span>
<span class="line-modified">28 by using &quot;-e:TEST_IMAGE_GRAAL_DIR=...&quot;</span>








29 
30 Example:
<span class="line-modified">31 &gt; jtreg -vt -jdk:&lt;TESTED_JDK&gt; -vmoptions:&quot;-Dgraalunit.libs=build/&lt;platform&gt;/images/test/hotspot/jtreg/graal&quot;</span>

32         compiler/graalunit/UtilTest.java
33 
34 To run Graal unit tests in Graal as JIT mode pass additional -vmoptions to jtreg:
35  -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+TieredCompilation -XX:+UseJVMCICompiler -Djvmci.Compiler=graal
36 
</pre>
</td>
<td>
<hr />
<pre>
 4 tests as it is done by &quot;mx unittest&quot; command from Graal project.
 5 
 6 All compiler/graalunit/*.java tests were automatically generated by generateTests.sh script which reads
 7 &quot;testName -&gt; testPrefix [requiresStatement]&quot; mapping from TestPackages.txt file and generates corresponding &lt;testName&gt;Test.java
 8 tests. The mapping takes into account tests execution time to avoid very long test runs.
 9 
10 Graal unit tests depends on following external jar files:
11  asm-5.0.4.jar:
12  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/asm-5.0.4.jar
13 
14  asm-tree-5.0.4.jar:
15  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/asm-tree-5.0.4.jar
16 
17  junit-4.12.jar:
18  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/junit-4.12.jar
19 
20  hamcrest-core-1.3.jar:
21  https://lafo.ssw.uni-linz.ac.at/pub/graal-external-deps/hamcrest-core-1.3.jar
22 
23  java-allocation-instrumenter.jar:
<span class="line-modified">24  https://lafo.ssw.uni-linz.ac.at/pub/java-allocation-instrumenter/java-allocation-instrumenter.jar</span>
25 
26 Before running the tests you need to download these jars from above locations in build/&lt;platform&gt;/images/test/hotspot/jtreg/graal/
<span class="line-modified">27 directory. You can use &#39;downloadLibs.sh&#39; script which will try to download all these libs using wget.</span>
<span class="line-modified">28 </span>
<span class="line-added">29 </span>
<span class="line-added">30 Then you can run Graal unit test(s) using &#39;make run-test&#39;:</span>
<span class="line-added">31 </span>
<span class="line-added">32 &gt; make run-test TEST=&quot;compiler/graalunit/ApiTest.java&quot; TEST_VM_OPTS=&quot;-server -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI&quot;</span>
<span class="line-added">33 </span>
<span class="line-added">34 </span>
<span class="line-added">35 If you want to use jtreg directly you need to say jtreg where to find external jars.</span>
<span class="line-added">36 You can do it by passing additional option &quot;-vmoptions:-Dgraalunit.libs=&quot; or setting environment variable by using &quot;-e:TEST_IMAGE_GRAAL_DIR=...&quot;</span>
37 
38 Example:
<span class="line-modified">39 &gt; jtreg -vt -jdk:&lt;TESTED_JDK&gt; -vmoptions:&quot;-server -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI&quot;</span>
<span class="line-added">40         -vmoptions:&quot;-Dgraalunit.libs=build/&lt;platform&gt;/images/test/hotspot/jtreg/graal&quot;</span>
41         compiler/graalunit/UtilTest.java
42 
43 To run Graal unit tests in Graal as JIT mode pass additional -vmoptions to jtreg:
44  -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+TieredCompilation -XX:+UseJVMCICompiler -Djvmci.Compiler=graal
45 
</pre>
</td>
</tr>
</table>
<center><a href="PhasesCommonTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="Replacements12Test.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>