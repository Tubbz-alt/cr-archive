<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/compiler/aot/cli/SingleAOTOptionTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="SingleAOTLibraryTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="jaotc/JaotcTestHelper.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/aot/cli/SingleAOTOptionTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 2016, 2017, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 2016, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -31,21 +31,21 @@</span>
   * @run driver compiler.aot.AotCompiler -libname libSingleAOTOptionTest.so
   *      -class compiler.aot.HelloWorldPrinter
   *      -compile compiler.aot.HelloWorldPrinter.print()V
   *      -extraopt -XX:+UseCompressedOops
   * @run driver compiler.aot.cli.SingleAOTOptionTest -XX:+UseCompressedOops
<span class="udiff-line-modified-removed">-  *      -XX:AOTLibrary=./libSingleAOTOptionTest.so</span>
<span class="udiff-line-modified-added">+  *      -XX:+UnlockExperimentalVMOptions -XX:AOTLibrary=./libSingleAOTOptionTest.so</span>
   * @run main compiler.aot.cli.SingleAOTOptionTest
<span class="udiff-line-modified-removed">-  *      -XX:+UseCompressedOops -XX:+UseAOT</span>
<span class="udiff-line-modified-added">+  *      -XX:+UseCompressedOops -XX:+UnlockExperimentalVMOptions -XX:+UseAOT</span>
   * @run driver compiler.aot.AotCompiler -libname libSingleAOTOptionTest.so
   *      -class compiler.aot.HelloWorldPrinter
   *      -compile compiler.aot.HelloWorldPrinter.print()V
   *      -extraopt -XX:-UseCompressedOops
   * @run driver compiler.aot.cli.SingleAOTOptionTest -XX:-UseCompressedOops
<span class="udiff-line-modified-removed">-  *      -XX:AOTLibrary=./libSingleAOTOptionTest.so</span>
<span class="udiff-line-modified-added">+  *      -XX:+UnlockExperimentalVMOptions -XX:AOTLibrary=./libSingleAOTOptionTest.so</span>
   * @run driver compiler.aot.cli.SingleAOTOptionTest
<span class="udiff-line-modified-removed">-  *      -XX:-UseCompressedOops -XX:+UseAOT</span>
<span class="udiff-line-modified-added">+  *      -XX:-UseCompressedOops -XX:+UnlockExperimentalVMOptions -XX:+UseAOT</span>
   * @summary check if specifying only one aot option handled properly
   */
  
  package compiler.aot.cli;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -58,28 +58,28 @@</span>
          HelloWorldPrinter.MESSAGE
      };
      private static final String[] UNEXPECTED_MESSAGES = null;
  
      public static void main(String args[]) {
<span class="udiff-line-modified-removed">-         if (args.length == 2) {</span>
<span class="udiff-line-modified-removed">-             new SingleAOTOptionTest().runTest(args[0], args[1]);</span>
<span class="udiff-line-modified-added">+         if (args.length == 3) {</span>
<span class="udiff-line-modified-added">+             new SingleAOTOptionTest().runTest(args[0], args[1], args[2]);</span>
          } else {
              throw new Error(&quot;Test expects 2 parameters&quot;);
          }
      }
  
<span class="udiff-line-modified-removed">-     private void runTest(String arg1, String arg2) {</span>
<span class="udiff-line-modified-added">+     private void runTest(String arg1, String arg2, String arg3) {</span>
          try {
              String exitCodeErrorMessage = String.format(&quot;Unexpected exit code &quot;
<span class="udiff-line-modified-removed">-                     + &quot;using %s and %s&quot;, arg1, arg2);</span>
<span class="udiff-line-modified-added">+                     + &quot;using %s %s %s&quot;, arg1, arg2, arg3);</span>
              String outputErrorMessage = String.format(&quot;Unexpected output using&quot;
<span class="udiff-line-modified-removed">-                     + &quot; %s and %s&quot;, arg1, arg2);</span>
<span class="udiff-line-modified-added">+                     + &quot; %s %s&quot;, arg1, arg2, arg3);</span>
              boolean addTestVMOptions = true;
              CommandLineOptionTest.verifyJVMStartup(EXPECTED_MESSAGES,
                      UNEXPECTED_MESSAGES, exitCodeErrorMessage,
                      outputErrorMessage, ExitCode.OK, addTestVMOptions, arg1,
<span class="udiff-line-modified-removed">-                     arg2, HelloWorldPrinter.class.getName());</span>
<span class="udiff-line-modified-added">+                     arg2, arg3, HelloWorldPrinter.class.getName());</span>
          } catch (Throwable t) {
              throw new Error(&quot;Problems executing test: &quot; + t, t);
          }
      }
  
</pre>
<center><a href="SingleAOTLibraryTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="jaotc/JaotcTestHelper.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>