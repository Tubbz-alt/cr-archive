<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/compiler/aot/scripts/build-bootmodules.sh</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../fingerprint/SuperChanged.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="java.base-list.txt.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/aot/scripts/build-bootmodules.sh</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
<span class="line-modified">  1 # Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span>
  2 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  3 #
  4 # This code is free software; you can redistribute it and/or modify it
  5 # under the terms of the GNU General Public License version 2 only, as
  6 # published by the Free Software Foundation.
  7 #
  8 # This code is distributed in the hope that it will be useful, but WITHOUT
  9 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 10 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 11 # version 2 for more details (a copy is included in the LICENSE file that
 12 # accompanied this code).
 13 #
 14 # You should have received a copy of the GNU General Public License version
 15 # 2 along with this work; if not, write to the Free Software Foundation,
 16 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 17 #
 18 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 19 # or visit www.oracle.com if you need additional information or have any
 20 # questions.
 21 
 22 pushd `dirname $0` &gt; /dev/null
 23 DIR=`pwd`
 24 popd &gt; /dev/null
 25 
 26 # set env variables
 27 . $DIR/test-env.sh
 28 
 29 MODULES=&quot;java.base&quot;
 30 
 31 TEST=HelloWorld
 32 
 33 for m in $MODULES; do
 34     rm -f $JAVA_HOME/lib/lib$m*.$SO_TYPE
 35 done
 36 
 37 $JAVA_HOME/bin/javac -d . $DIR/$TEST.java
 38 
 39 JAOTC_OPTS=&quot;-J-ea -J-Xmx4g --compile-for-tiered --info&quot;
<span class="line-modified"> 40 JAVA_OPTS=&quot;-Xmx4g -XX:+UseAOT -XX:+UnlockDiagnosticVMOptions -XX:+UseAOTStrictLoading&quot;</span>
 41 
 42 # Compile with: +UseCompressedOops +UseG1GC
 43 LIBRARIES=&quot;&quot;
 44 for m in $MODULES; do
 45     if [ -f $DIR/$m-list.txt ]; then
 46 	LIST=&quot;--compile-commands $DIR/$m-list.txt&quot;
 47     else
 48 	LIST=&quot;&quot;
 49     fi
 50     $JAVA_HOME/bin/jaotc -J-XX:+UseCompressedOops -J-XX:+UseG1GC $JAOTC_OPTS $LIST --output lib$m-coop.$SO_TYPE --module $m || exit 1
 51     LIBRARIES=&quot;$LIBRARIES$PWD/lib$m-coop.$SO_TYPE:&quot;
 52 done
 53 $JAVA_HOME/bin/java $JAVA_OPTS -XX:+UseCompressedOops -XX:+UseG1GC -XX:AOTLibrary=$LIBRARIES $TEST || exit 1
 54 
 55 # Compile with: +UseCompressedOops +UseParallelGC
 56 LIBRARIES=&quot;&quot;
 57 for m in $MODULES; do
 58     if [ -f $DIR/$m-list.txt ]; then
 59 	LIST=&quot;--compile-commands $DIR/$m-list.txt&quot;
 60     else
</pre>
</td>
<td>
<hr />
<pre>
<span class="line-modified">  1 # Copyright (c) 2017, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  2 # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  3 #
  4 # This code is free software; you can redistribute it and/or modify it
  5 # under the terms of the GNU General Public License version 2 only, as
  6 # published by the Free Software Foundation.
  7 #
  8 # This code is distributed in the hope that it will be useful, but WITHOUT
  9 # ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 10 # FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 11 # version 2 for more details (a copy is included in the LICENSE file that
 12 # accompanied this code).
 13 #
 14 # You should have received a copy of the GNU General Public License version
 15 # 2 along with this work; if not, write to the Free Software Foundation,
 16 # Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 17 #
 18 # Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 19 # or visit www.oracle.com if you need additional information or have any
 20 # questions.
 21 
 22 pushd `dirname $0` &gt; /dev/null
 23 DIR=`pwd`
 24 popd &gt; /dev/null
 25 
 26 # set env variables
 27 . $DIR/test-env.sh
 28 
 29 MODULES=&quot;java.base&quot;
 30 
 31 TEST=HelloWorld
 32 
 33 for m in $MODULES; do
 34     rm -f $JAVA_HOME/lib/lib$m*.$SO_TYPE
 35 done
 36 
 37 $JAVA_HOME/bin/javac -d . $DIR/$TEST.java
 38 
 39 JAOTC_OPTS=&quot;-J-ea -J-Xmx4g --compile-for-tiered --info&quot;
<span class="line-modified"> 40 JAVA_OPTS=&quot;-Xmx4g -XX:+UnlockExperimentalVMOptions -XX:+UseAOT -XX:+UnlockDiagnosticVMOptions -XX:+UseAOTStrictLoading&quot;</span>
 41 
 42 # Compile with: +UseCompressedOops +UseG1GC
 43 LIBRARIES=&quot;&quot;
 44 for m in $MODULES; do
 45     if [ -f $DIR/$m-list.txt ]; then
 46 	LIST=&quot;--compile-commands $DIR/$m-list.txt&quot;
 47     else
 48 	LIST=&quot;&quot;
 49     fi
 50     $JAVA_HOME/bin/jaotc -J-XX:+UseCompressedOops -J-XX:+UseG1GC $JAOTC_OPTS $LIST --output lib$m-coop.$SO_TYPE --module $m || exit 1
 51     LIBRARIES=&quot;$LIBRARIES$PWD/lib$m-coop.$SO_TYPE:&quot;
 52 done
 53 $JAVA_HOME/bin/java $JAVA_OPTS -XX:+UseCompressedOops -XX:+UseG1GC -XX:AOTLibrary=$LIBRARIES $TEST || exit 1
 54 
 55 # Compile with: +UseCompressedOops +UseParallelGC
 56 LIBRARIES=&quot;&quot;
 57 for m in $MODULES; do
 58     if [ -f $DIR/$m-list.txt ]; then
 59 	LIST=&quot;--compile-commands $DIR/$m-list.txt&quot;
 60     else
</pre>
</td>
</tr>
</table>
<center><a href="../fingerprint/SuperChanged.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="java.base-list.txt.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>