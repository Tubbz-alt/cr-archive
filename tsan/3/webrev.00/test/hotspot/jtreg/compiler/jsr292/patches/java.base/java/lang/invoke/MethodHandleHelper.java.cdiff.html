<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/hotspot/jtreg/compiler/jsr292/patches/java.base/java/lang/invoke/MethodHandleHelper.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../NonInlinedCall/RedefineTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jvmci/SecurityRestrictionsTest.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/jsr292/patches/java.base/java/lang/invoke/MethodHandleHelper.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2015, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 24,15 ***</span>
  package java.lang.invoke;
  
  import java.lang.invoke.MethodHandles.Lookup;
  import jdk.internal.vm.annotation.DontInline;
  import jdk.internal.vm.annotation.ForceInline;
  /**
   * Helper class to inject into java.lang.invoke that provides access to
   * package-private methods in this package.
   */
<span class="line-removed">- </span>
  public class MethodHandleHelper {
  
      private MethodHandleHelper() { }
  
      public static final Lookup IMPL_LOOKUP = Lookup.IMPL_LOOKUP;
<span class="line-new-header">--- 24,15 ---</span>
  package java.lang.invoke;
  
  import java.lang.invoke.MethodHandles.Lookup;
  import jdk.internal.vm.annotation.DontInline;
  import jdk.internal.vm.annotation.ForceInline;
<span class="line-added">+ </span>
  /**
   * Helper class to inject into java.lang.invoke that provides access to
   * package-private methods in this package.
   */
  public class MethodHandleHelper {
  
      private MethodHandleHelper() { }
  
      public static final Lookup IMPL_LOOKUP = Lookup.IMPL_LOOKUP;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 77,31 ***</span>
      }
  
      public static LambdaForm getLambdaForm(MethodHandle mh) {
          return mh.form;
      }
<span class="line-removed">- </span>
<span class="line-removed">-     public static class NonInlinedReinvoker extends DelegatingMethodHandle {</span>
<span class="line-removed">-         private final MethodHandle target;</span>
<span class="line-removed">- </span>
<span class="line-removed">-         private NonInlinedReinvoker(MethodHandle target, LambdaForm lf) {</span>
<span class="line-removed">-             super(target.type(), lf);</span>
<span class="line-removed">-             this.target = target;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         @Override</span>
<span class="line-removed">-         public MethodHandle getTarget() {</span>
<span class="line-removed">-             return target;</span>
<span class="line-removed">-         }</span>
<span class="line-removed">- </span>
<span class="line-removed">-         @Override</span>
<span class="line-removed">-         public MethodHandle asTypeUncached(MethodType newType) {</span>
<span class="line-removed">-             return asTypeCache = target.asType(newType);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">- </span>
<span class="line-removed">-         public static MethodHandle make(MethodHandle target) {</span>
<span class="line-removed">-             LambdaForm lform = DelegatingMethodHandle.makeReinvokerForm(</span>
<span class="line-removed">-                     target, -1, DelegatingMethodHandle.class,</span>
<span class="line-removed">-                 /*forceInline=*/false, DelegatingMethodHandle.NF_getTarget, null);</span>
<span class="line-removed">-             return new NonInlinedReinvoker(target, lform);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-     }</span>
  }
<span class="line-new-header">--- 77,6 ---</span>
</pre>
<center><a href="../../../../../NonInlinedCall/RedefineTest.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jvmci/SecurityRestrictionsTest.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>