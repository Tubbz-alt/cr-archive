<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/runtime/Nestmates/membership/TestNestmateMembership.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../NMT/SafepointPollingPages.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../privateConstructors/TestConstructorHierarchy.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/Nestmates/membership/TestNestmateMembership.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 654             test_WrongPackageHostPutField();
 655             break;
 656         default:
 657             throw new Error(&quot;Uknown mode: &quot; + args[0] +
 658                             &quot;. Must be one of: method, constructor, getField or putField&quot;);
 659         }
 660     }
 661 
 662     static void test_GoodInvoke(){
 663         try {
 664             Caller.invokeTarget();
 665         }
 666         catch (Exception e) {
 667             throw new Error(&quot;Unexpected exception on good invocation &quot; + e);
 668         }
 669     }
 670 
 671     static void test_NoHostInvoke() throws Throwable {
 672         System.out.println(&quot;Testing for missing nest-host attribute&quot;);
 673         String msg = &quot;class TestNestmateMembership$Caller tried to access &quot; +
<span class="line-modified"> 674             &quot;private method TestNestmateMembership$TargetNoHost.m()V&quot;;</span>
 675         try {
 676             Caller.invokeTargetNoHost();
 677             throw new Error(&quot;Missing IllegalAccessError: &quot; + msg);
 678         }
 679         catch (IllegalAccessError expected) {
 680             check_expected(expected, msg);
 681         }
 682         msg = &quot;TestNestmateMembership$Caller cannot access a member of class &quot; +
 683             &quot;TestNestmateMembership$TargetNoHost with modifiers \&quot;private static\&quot;&quot;;
 684         try {
 685             Caller.invokeTargetNoHostReflectively();
 686             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 687         }
 688         catch (IllegalAccessException expected) {
 689             check_expected(expected, msg);
 690         }
 691         msg = &quot;no such method: TestNestmateMembership$TargetNoHost.m()void/invokeStatic&quot;;
 692         try {
 693             Caller.invokeTargetNoHostMH();
 694             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 695         }
 696         catch (IllegalAccessException expected) {
 697             check_expected(expected, msg);
 698         }
 699 
 700         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access &quot; +
<span class="line-modified"> 701             &quot;private method TestNestmateMembership$Target.m()V&quot;;</span>
 702         try {
 703             CallerNoHost.invokeTarget();
 704             throw new Error(&quot;Missing IllegalAccessError: &quot; + msg);
 705         }
 706         catch (IllegalAccessError expected) {
 707             check_expected(expected, msg);
 708         }
 709         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access private &quot; +
<span class="line-modified"> 710             &quot;method TestNestmateMembership$TargetNoHost.m()V&quot;;</span>
 711         try {
 712             CallerNoHost.invokeTargetNoHost();
 713             throw new Error(&quot;Missing IllegalAccessError: &quot; + msg);
 714         }
 715         catch (IllegalAccessError expected) {
 716             check_expected(expected, msg);
 717         }
 718     }
 719 
 720     static void test_SelfHostInvoke() throws Throwable {
 721         System.out.println(&quot;Testing for class that lists itself as nest-host&quot;);
 722         String msg = &quot;Type TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;) is not a nest member&quot; +
 723             &quot; of TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;): current type is not listed as a nest member&quot;;
 724         try {
 725             Caller.invokeTargetSelfHost();
 726             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 727         }
 728         catch (IncompatibleClassChangeError expected) {
 729             check_expected(expected, msg);
 730         }
</pre>
<hr />
<pre>
 933         }
 934         catch (IncompatibleClassChangeError expected) {
 935             check_expected(expected, msg);
 936         }
 937     }
 938 
 939     // constructor tests
 940 
 941    static void test_GoodConstruct(){
 942         try {
 943             Caller.newTarget();
 944         }
 945         catch (Exception e) {
 946             throw new Error(&quot;Unexpected exception on good construction: &quot; + e);
 947         }
 948     }
 949 
 950     static void test_NoHostConstruct() throws Throwable {
 951         System.out.println(&quot;Testing for missing nest-host attribute&quot;);
 952         String msg = &quot;class TestNestmateMembership$Caller tried to access private &quot; +
<span class="line-modified"> 953             &quot;method TestNestmateMembership$TargetNoHost.&lt;init&gt;()V&quot;;</span>
 954         try {
 955             Caller.newTargetNoHost();
 956             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 957         }
 958         catch (IncompatibleClassChangeError expected) {
 959             check_expected(expected, msg);
 960         }
 961         msg = &quot;class TestNestmateMembership$Caller cannot access a member of class &quot; +
 962             &quot;TestNestmateMembership$TargetNoHost with modifiers \&quot;private\&quot;&quot;;
 963         try {
 964             Caller.newTargetNoHostReflectively();
 965             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 966         }
 967         catch (IllegalAccessException expected) {
 968             check_expected(expected, msg);
 969         }
 970         msg = &quot;no such constructor: TestNestmateMembership$TargetNoHost.&lt;init&gt;()void/newInvokeSpecial&quot;;
 971         try {
 972             Caller.newTargetNoHostMH();
 973             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 974         }
 975         catch (IllegalAccessException expected) {
 976             check_expected(expected, msg);
 977         }
 978 
 979         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access private &quot; +
<span class="line-modified"> 980             &quot;method TestNestmateMembership$Target.&lt;init&gt;()V&quot;;</span>
 981         try {
 982             CallerNoHost.newTarget();
 983             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 984         }
 985         catch (IncompatibleClassChangeError expected) {
 986             check_expected(expected, msg);
 987         }
 988         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access private &quot; +
<span class="line-modified"> 989             &quot;method TestNestmateMembership$TargetNoHost.&lt;init&gt;()V&quot;;</span>
 990         try {
 991             CallerNoHost.newTargetNoHost();
 992             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 993         }
 994         catch (IncompatibleClassChangeError expected) {
 995             check_expected(expected, msg);
 996         }
 997     }
 998 
 999     static void test_SelfHostConstruct() throws Throwable {
1000         System.out.println(&quot;Testing for class that lists itself as nest-host&quot;);
1001         String msg = &quot;Type TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;) is not a nest member&quot; +
1002             &quot; of TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;): current type is not listed as a nest member&quot;;
1003         try {
1004             Caller.newTargetSelfHost();
1005             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
1006         }
1007         catch (IncompatibleClassChangeError expected) {
1008             check_expected(expected, msg);
1009         }
</pre>
</td>
<td>
<hr />
<pre>
 654             test_WrongPackageHostPutField();
 655             break;
 656         default:
 657             throw new Error(&quot;Uknown mode: &quot; + args[0] +
 658                             &quot;. Must be one of: method, constructor, getField or putField&quot;);
 659         }
 660     }
 661 
 662     static void test_GoodInvoke(){
 663         try {
 664             Caller.invokeTarget();
 665         }
 666         catch (Exception e) {
 667             throw new Error(&quot;Unexpected exception on good invocation &quot; + e);
 668         }
 669     }
 670 
 671     static void test_NoHostInvoke() throws Throwable {
 672         System.out.println(&quot;Testing for missing nest-host attribute&quot;);
 673         String msg = &quot;class TestNestmateMembership$Caller tried to access &quot; +
<span class="line-modified"> 674             &quot;private method &#39;void TestNestmateMembership$TargetNoHost.m()&#39;&quot;;</span>
 675         try {
 676             Caller.invokeTargetNoHost();
 677             throw new Error(&quot;Missing IllegalAccessError: &quot; + msg);
 678         }
 679         catch (IllegalAccessError expected) {
 680             check_expected(expected, msg);
 681         }
 682         msg = &quot;TestNestmateMembership$Caller cannot access a member of class &quot; +
 683             &quot;TestNestmateMembership$TargetNoHost with modifiers \&quot;private static\&quot;&quot;;
 684         try {
 685             Caller.invokeTargetNoHostReflectively();
 686             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 687         }
 688         catch (IllegalAccessException expected) {
 689             check_expected(expected, msg);
 690         }
 691         msg = &quot;no such method: TestNestmateMembership$TargetNoHost.m()void/invokeStatic&quot;;
 692         try {
 693             Caller.invokeTargetNoHostMH();
 694             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 695         }
 696         catch (IllegalAccessException expected) {
 697             check_expected(expected, msg);
 698         }
 699 
 700         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access &quot; +
<span class="line-modified"> 701             &quot;private method &#39;void TestNestmateMembership$Target.m()&#39;&quot;;</span>
 702         try {
 703             CallerNoHost.invokeTarget();
 704             throw new Error(&quot;Missing IllegalAccessError: &quot; + msg);
 705         }
 706         catch (IllegalAccessError expected) {
 707             check_expected(expected, msg);
 708         }
 709         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access private &quot; +
<span class="line-modified"> 710             &quot;method &#39;void TestNestmateMembership$TargetNoHost.m()&#39;&quot;;</span>
 711         try {
 712             CallerNoHost.invokeTargetNoHost();
 713             throw new Error(&quot;Missing IllegalAccessError: &quot; + msg);
 714         }
 715         catch (IllegalAccessError expected) {
 716             check_expected(expected, msg);
 717         }
 718     }
 719 
 720     static void test_SelfHostInvoke() throws Throwable {
 721         System.out.println(&quot;Testing for class that lists itself as nest-host&quot;);
 722         String msg = &quot;Type TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;) is not a nest member&quot; +
 723             &quot; of TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;): current type is not listed as a nest member&quot;;
 724         try {
 725             Caller.invokeTargetSelfHost();
 726             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 727         }
 728         catch (IncompatibleClassChangeError expected) {
 729             check_expected(expected, msg);
 730         }
</pre>
<hr />
<pre>
 933         }
 934         catch (IncompatibleClassChangeError expected) {
 935             check_expected(expected, msg);
 936         }
 937     }
 938 
 939     // constructor tests
 940 
 941    static void test_GoodConstruct(){
 942         try {
 943             Caller.newTarget();
 944         }
 945         catch (Exception e) {
 946             throw new Error(&quot;Unexpected exception on good construction: &quot; + e);
 947         }
 948     }
 949 
 950     static void test_NoHostConstruct() throws Throwable {
 951         System.out.println(&quot;Testing for missing nest-host attribute&quot;);
 952         String msg = &quot;class TestNestmateMembership$Caller tried to access private &quot; +
<span class="line-modified"> 953             &quot;method &#39;void TestNestmateMembership$TargetNoHost.&lt;init&gt;()&#39;&quot;;</span>
 954         try {
 955             Caller.newTargetNoHost();
 956             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 957         }
 958         catch (IncompatibleClassChangeError expected) {
 959             check_expected(expected, msg);
 960         }
 961         msg = &quot;class TestNestmateMembership$Caller cannot access a member of class &quot; +
 962             &quot;TestNestmateMembership$TargetNoHost with modifiers \&quot;private\&quot;&quot;;
 963         try {
 964             Caller.newTargetNoHostReflectively();
 965             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 966         }
 967         catch (IllegalAccessException expected) {
 968             check_expected(expected, msg);
 969         }
 970         msg = &quot;no such constructor: TestNestmateMembership$TargetNoHost.&lt;init&gt;()void/newInvokeSpecial&quot;;
 971         try {
 972             Caller.newTargetNoHostMH();
 973             throw new Error(&quot;Missing IllegalAccessException: &quot; + msg);
 974         }
 975         catch (IllegalAccessException expected) {
 976             check_expected(expected, msg);
 977         }
 978 
 979         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access private &quot; +
<span class="line-modified"> 980             &quot;method &#39;void TestNestmateMembership$Target.&lt;init&gt;()&#39;&quot;;</span>
 981         try {
 982             CallerNoHost.newTarget();
 983             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 984         }
 985         catch (IncompatibleClassChangeError expected) {
 986             check_expected(expected, msg);
 987         }
 988         msg = &quot;class TestNestmateMembership$CallerNoHost tried to access private &quot; +
<span class="line-modified"> 989             &quot;method &#39;void TestNestmateMembership$TargetNoHost.&lt;init&gt;()&#39;&quot;;</span>
 990         try {
 991             CallerNoHost.newTargetNoHost();
 992             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
 993         }
 994         catch (IncompatibleClassChangeError expected) {
 995             check_expected(expected, msg);
 996         }
 997     }
 998 
 999     static void test_SelfHostConstruct() throws Throwable {
1000         System.out.println(&quot;Testing for class that lists itself as nest-host&quot;);
1001         String msg = &quot;Type TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;) is not a nest member&quot; +
1002             &quot; of TestNestmateMembership$TargetSelfHost (loader: &#39;app&#39;): current type is not listed as a nest member&quot;;
1003         try {
1004             Caller.newTargetSelfHost();
1005             throw new Error(&quot;Missing IncompatibleClassChangeError: &quot; + msg);
1006         }
1007         catch (IncompatibleClassChangeError expected) {
1008             check_expected(expected, msg);
1009         }
</pre>
</td>
</tr>
</table>
<center><a href="../../NMT/SafepointPollingPages.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../privateConstructors/TestConstructorHierarchy.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>