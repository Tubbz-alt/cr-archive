diff a/test/hotspot/jtreg/gc/cslocker/TestCSLocker.java b/test/hotspot/jtreg/gc/cslocker/TestCSLocker.java
--- a/test/hotspot/jtreg/gc/cslocker/TestCSLocker.java
+++ b/test/hotspot/jtreg/gc/cslocker/TestCSLocker.java
@@ -21,16 +21,17 @@
  * questions.
  */
 
 package gc.cslocker;
 
-import static java.lang.ref.Reference.reachabilityFence;
+import static gc.testlibrary.Allocation.blackHole;
 
 /*
  * @test TestCSLocker
  * @key gc
  * @bug 6186200
+ * @library /
  * @summary This short test check RFE 6186200 changes. One thread locked
  * @summary completely in JNI CS, while other is trying to allocate memory
  * @summary provoking GC. OOM means FAIL, deadlock means PASS.
  * @run main/native/othervm -Xmx256m gc.cslocker.TestCSLocker
  */
@@ -73,11 +74,11 @@
     public void run() {
         boolean isRunning = true;
 
         while (isRunning) {
             try {
-                reachabilityFence(new int[size]);
+                blackHole(new int[size]);
                 sleep(sleepTime);
             } catch (InterruptedException e) {
                 isRunning = false;
             }
         }
