<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/nsk/jvmti/unit/GetLocalVariable/getlocal003/getlocal003.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../getlocal003.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../monitoring/ThreadMXBean/GetThreadAllocatedBytes/BaseBehaviorTest.README.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/jvmti/unit/GetLocalVariable/getlocal003/getlocal003.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
 50   printf(&quot;, signature: %s\n&quot;, lvt_elem-&gt;signature);
 51 }
 52 
 53 static void
 54 test_locals(jvmtiEnv *jvmti, jthread thr, jlocation location) {
 55     jvmtiError err;
 56     jint intVal;
 57     jlong longVal;
 58     jfloat floatVal;
 59     jdouble doubleVal;
 60     jobject obj;
 61     jint i;
 62 
 63     for (i = 0; i &lt; entryCount; i++) {
 64         if (table[i].start_location &gt; location ||
 65             table[i].start_location + table[i].length &lt; location) {
 66             continue;  /* The local variable is not visible */
 67         }
 68         print_LocalVariableEntry(&amp;table[i]);
 69         char sig = table[i].signature[0];

 70 
 71         if (sig == &#39;Z&#39; || sig == &#39;B&#39; || sig == &#39;C&#39; || sig == &#39;S&#39;) {
 72             sig = &#39;I&#39;; // covered by GetLocalInt
 73         }
<span class="line-modified"> 74         err = jvmti-&gt;GetLocalInt(thr, 0, table[i].slot, &amp;intVal);</span>
 75         printf(&quot; GetLocalInt:     %s (%d)\n&quot;, TranslateError(err), err);
 76         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;I&#39;) {
 77             printf(&quot;FAIL: GetLocalInt failed to get value of int\n&quot;);
 78             result = STATUS_FAILED;
 79         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; sig != &#39;I&#39;) {
 80             printf(&quot;FAIL: GetLocalInt did not return JVMTI_ERROR_TYPE_MISMATCH for non-int\n&quot;);
 81             result = STATUS_FAILED;
 82         }
 83 
<span class="line-modified"> 84         err = jvmti-&gt;GetLocalLong(thr, 0, table[i].slot, &amp;longVal);</span>
 85         printf(&quot; GetLocalLong:    %s (%d)\n&quot;, TranslateError(err), err);
 86         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;J&#39;) {
 87             printf(&quot;FAIL: GetLocalLong failed to get value of long\n&quot;);
 88             result = STATUS_FAILED;
<span class="line-modified"> 89         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; sig != &#39;J&#39;) {</span>
<span class="line-modified"> 90             printf(&quot;FAIL: GetLocalLong did not return JVMTI_ERROR_TYPE_MISMATCH for non-long\n&quot;);</span>



 91             result = STATUS_FAILED;
 92         }
 93 
<span class="line-modified"> 94         err = jvmti-&gt;GetLocalFloat(thr, 0, table[i].slot, &amp;floatVal);</span>
 95         printf(&quot; GetLocalFloat:   %s (%d)\n&quot;, TranslateError(err), err);
<span class="line-modified"> 96         if (err != JVMTI_ERROR_NONE &amp;&amp; table[i].signature[0] == &#39;F&#39;) {</span>
 97             printf(&quot;FAIL: GetLocalFloat failed to get value of float\n&quot;);
 98             result = STATUS_FAILED;
<span class="line-modified"> 99         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; table[i].signature[0] != &#39;F&#39;) {</span>
100             printf(&quot;FAIL: GetLocalFloat did not return JVMTI_ERROR_TYPE_MISMATCH for non-float\n&quot;);
101             result = STATUS_FAILED;
102         }
103 
<span class="line-modified">104         err = jvmti-&gt;GetLocalDouble(thr, 0, table[i].slot, &amp;doubleVal);</span>
105         printf(&quot; GetLocalDouble:  %s (%d)\n&quot;, TranslateError(err), err);
<span class="line-modified">106         if (err != JVMTI_ERROR_NONE &amp;&amp; table[i].signature[0] == &#39;D&#39;) {</span>
107             printf(&quot;FAIL: GetLocalDouble failed to get value of double\n&quot;);
108             result = STATUS_FAILED;
<span class="line-modified">109         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; table[i].signature[0] != &#39;D&#39;) {</span>
<span class="line-modified">110             printf(&quot;FAIL: GetLocalDouble did not return JVMTI_ERROR_TYPE_MISMATCH for non-double\n&quot;);</span>



111             result = STATUS_FAILED;
112         }
113 
<span class="line-modified">114         err = jvmti-&gt;GetLocalObject(thr, 0, table[i].slot, &amp;obj);</span>
115         printf(&quot; GetLocalObject:  %s (%d)\n&quot;, TranslateError(err), err);
<span class="line-modified">116         if (err != JVMTI_ERROR_NONE &amp;&amp; table[i].signature[0] == &#39;L&#39;) {</span>
117             printf(&quot;FAIL: GetLocalObject failed to get value of object\n&quot;);
118             result = STATUS_FAILED;
<span class="line-modified">119         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; table[i].signature[0] != &#39;L&#39;) {</span>
120             printf(&quot;FAIL: GetLocalObject did not return JVMTI_ERROR_TYPE_MISMATCH for non-object\n&quot;);
121             result = STATUS_FAILED;
122         }
123     }
124 }
125 
126 static void JNICALL
127 MethodExit(jvmtiEnv *jvmti_env,
128            JNIEnv *env,
129            jthread thr,
130            jmethodID method,
131            jboolean was_poped_by_exception,
132            jvalue return_value) {
133 
134     jvmtiError err;
135     jlocation location;
136     jmethodID frame_method = NULL;
137 
138     if (mid != method) {
139         return;
</pre>
<hr />
<pre>
206     }
207 
208     if (!caps.can_access_local_variables) {
209         printf(&quot;Warning: Access to local variables is not implemented\n&quot;);
210         return JNI_ERR;
211     }
212     if (!caps.can_generate_method_exit_events) {
213         printf(&quot;Warning: MethodExit event is not implemented\n&quot;);
214         return JNI_ERR;
215     }
216     callbacks.MethodExit = &amp;MethodExit;
217     err = jvmti-&gt;SetEventCallbacks(&amp;callbacks, sizeof(callbacks));
218     if (err != JVMTI_ERROR_NONE) {
219         printf(&quot;(SetEventCallbacks) unexpected error: %s (%d)\n&quot;,
220                TranslateError(err), err);
221         return JNI_ERR;
222     }
223     return JNI_OK;
224 }
225 

































226 JNIEXPORT void JNICALL
227 Java_nsk_jvmti_unit_GetLocalVariable_getlocal003_getMeth(JNIEnv *env, jclass cls) {
228     jvmtiError err;



229 
230     if (jvmti == NULL) {
231         printf(&quot;JVMTI client was not properly loaded!\n&quot;);
232         result = STATUS_FAILED;
233         return;
234     }
235 
236     mid = env-&gt;GetStaticMethodID(cls, &quot;staticMeth&quot;, &quot;(I)I&quot;);
237     if (mid == NULL) {
238         printf(&quot;Cannot find Method ID for staticMeth\n&quot;);
239         result = STATUS_FAILED;
240         return;
241     }
242 
243     err = jvmti-&gt;GetLocalVariableTable(mid, &amp;entryCount, &amp;table);
244     if (err != JVMTI_ERROR_NONE) {
245         printf(&quot;(GetLocalVariableTable) unexpected error: %s (%d)\n&quot;,
246                TranslateError(err), err);
247         result = STATUS_FAILED;
248         return;
249     }
250 
251     err = jvmti-&gt;SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_METHOD_EXIT, NULL);
252     if (err != JVMTI_ERROR_NONE) {
253         printf(&quot;Failed to enable metod exit event: %s (%d)\n&quot;,
254                TranslateError(err), err);
255         result = STATUS_FAILED;
256     }


















257     fflush(stdout);
258 }
259 
260 JNIEXPORT void JNICALL
261 Java_nsk_jvmti_unit_GetLocalVariable_getlocal003_checkLoc(JNIEnv *env,
262         jclass cls, jthread thr) {
263     jvmtiError err;
264     jvmtiLocalVariableEntry *table;
265     jint entryCount;
266     jmethodID mid;
267     jint locVar;
268     jint i, j;
269     int  overlap = 0;
270 
271     if (jvmti == NULL) {
272         printf(&quot;JVMTI client was not properly loaded!\n&quot;);
273         result = STATUS_FAILED;
274         return;
275     }
276     printf(&quot;\n checkLoc: START\n&quot;);
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2003, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
</pre>
<hr />
<pre>
 50   printf(&quot;, signature: %s\n&quot;, lvt_elem-&gt;signature);
 51 }
 52 
 53 static void
 54 test_locals(jvmtiEnv *jvmti, jthread thr, jlocation location) {
 55     jvmtiError err;
 56     jint intVal;
 57     jlong longVal;
 58     jfloat floatVal;
 59     jdouble doubleVal;
 60     jobject obj;
 61     jint i;
 62 
 63     for (i = 0; i &lt; entryCount; i++) {
 64         if (table[i].start_location &gt; location ||
 65             table[i].start_location + table[i].length &lt; location) {
 66             continue;  /* The local variable is not visible */
 67         }
 68         print_LocalVariableEntry(&amp;table[i]);
 69         char sig = table[i].signature[0];
<span class="line-added"> 70         int slot = table[i].slot;</span>
 71 
 72         if (sig == &#39;Z&#39; || sig == &#39;B&#39; || sig == &#39;C&#39; || sig == &#39;S&#39;) {
 73             sig = &#39;I&#39;; // covered by GetLocalInt
 74         }
<span class="line-modified"> 75         err = jvmti-&gt;GetLocalInt(thr, 0, slot, &amp;intVal);</span>
 76         printf(&quot; GetLocalInt:     %s (%d)\n&quot;, TranslateError(err), err);
 77         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;I&#39;) {
 78             printf(&quot;FAIL: GetLocalInt failed to get value of int\n&quot;);
 79             result = STATUS_FAILED;
 80         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; sig != &#39;I&#39;) {
 81             printf(&quot;FAIL: GetLocalInt did not return JVMTI_ERROR_TYPE_MISMATCH for non-int\n&quot;);
 82             result = STATUS_FAILED;
 83         }
 84 
<span class="line-modified"> 85         err = jvmti-&gt;GetLocalLong(thr, 0, slot, &amp;longVal);</span>
 86         printf(&quot; GetLocalLong:    %s (%d)\n&quot;, TranslateError(err), err);
 87         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;J&#39;) {
 88             printf(&quot;FAIL: GetLocalLong failed to get value of long\n&quot;);
 89             result = STATUS_FAILED;
<span class="line-modified"> 90         } else if (err != JVMTI_ERROR_INVALID_SLOT &amp;&amp;</span>
<span class="line-modified"> 91                    err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp;</span>
<span class="line-added"> 92                    sig != &#39;J&#39;) {</span>
<span class="line-added"> 93             printf(&quot;FAIL: GetLocalLong did not return JVMTI_ERROR_INVALID_SLOT&quot;</span>
<span class="line-added"> 94                    &quot; nor JVMTI_ERROR_TYPE_MISMATCH for non-long\n&quot;);</span>
 95             result = STATUS_FAILED;
 96         }
 97 
<span class="line-modified"> 98         err = jvmti-&gt;GetLocalFloat(thr, 0, slot, &amp;floatVal);</span>
 99         printf(&quot; GetLocalFloat:   %s (%d)\n&quot;, TranslateError(err), err);
<span class="line-modified">100         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;F&#39;) {</span>
101             printf(&quot;FAIL: GetLocalFloat failed to get value of float\n&quot;);
102             result = STATUS_FAILED;
<span class="line-modified">103         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; sig != &#39;F&#39;) {</span>
104             printf(&quot;FAIL: GetLocalFloat did not return JVMTI_ERROR_TYPE_MISMATCH for non-float\n&quot;);
105             result = STATUS_FAILED;
106         }
107 
<span class="line-modified">108         err = jvmti-&gt;GetLocalDouble(thr, 0, slot, &amp;doubleVal);</span>
109         printf(&quot; GetLocalDouble:  %s (%d)\n&quot;, TranslateError(err), err);
<span class="line-modified">110         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;D&#39;) {</span>
111             printf(&quot;FAIL: GetLocalDouble failed to get value of double\n&quot;);
112             result = STATUS_FAILED;
<span class="line-modified">113         } else if (err != JVMTI_ERROR_INVALID_SLOT &amp;&amp;</span>
<span class="line-modified">114                    err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp;</span>
<span class="line-added">115                    sig != &#39;D&#39;) {</span>
<span class="line-added">116             printf(&quot;FAIL: GetLocalDouble did not return JVMTI_ERROR_INVALID_SLOT&quot;</span>
<span class="line-added">117                    &quot; nor JVMTI_ERROR_TYPE_MISMATCH for non-double\n&quot;);</span>
118             result = STATUS_FAILED;
119         }
120 
<span class="line-modified">121         err = jvmti-&gt;GetLocalObject(thr, 0, slot, &amp;obj);</span>
122         printf(&quot; GetLocalObject:  %s (%d)\n&quot;, TranslateError(err), err);
<span class="line-modified">123         if (err != JVMTI_ERROR_NONE &amp;&amp; sig == &#39;L&#39;) {</span>
124             printf(&quot;FAIL: GetLocalObject failed to get value of object\n&quot;);
125             result = STATUS_FAILED;
<span class="line-modified">126         } else if (err != JVMTI_ERROR_TYPE_MISMATCH &amp;&amp; sig != &#39;L&#39;) {</span>
127             printf(&quot;FAIL: GetLocalObject did not return JVMTI_ERROR_TYPE_MISMATCH for non-object\n&quot;);
128             result = STATUS_FAILED;
129         }
130     }
131 }
132 
133 static void JNICALL
134 MethodExit(jvmtiEnv *jvmti_env,
135            JNIEnv *env,
136            jthread thr,
137            jmethodID method,
138            jboolean was_poped_by_exception,
139            jvalue return_value) {
140 
141     jvmtiError err;
142     jlocation location;
143     jmethodID frame_method = NULL;
144 
145     if (mid != method) {
146         return;
</pre>
<hr />
<pre>
213     }
214 
215     if (!caps.can_access_local_variables) {
216         printf(&quot;Warning: Access to local variables is not implemented\n&quot;);
217         return JNI_ERR;
218     }
219     if (!caps.can_generate_method_exit_events) {
220         printf(&quot;Warning: MethodExit event is not implemented\n&quot;);
221         return JNI_ERR;
222     }
223     callbacks.MethodExit = &amp;MethodExit;
224     err = jvmti-&gt;SetEventCallbacks(&amp;callbacks, sizeof(callbacks));
225     if (err != JVMTI_ERROR_NONE) {
226         printf(&quot;(SetEventCallbacks) unexpected error: %s (%d)\n&quot;,
227                TranslateError(err), err);
228         return JNI_ERR;
229     }
230     return JNI_OK;
231 }
232 
<span class="line-added">233 JNIEXPORT void JNICALL</span>
<span class="line-added">234 Java_nsk_jvmti_unit_GetLocalVariable_getlocal003_instMeth(JNIEnv *env, jobject inst) {</span>
<span class="line-added">235     jvmtiError err;</span>
<span class="line-added">236     jobject obj = NULL;</span>
<span class="line-added">237 </span>
<span class="line-added">238     printf(&quot;\n Native instMeth: started\n&quot;);</span>
<span class="line-added">239 </span>
<span class="line-added">240     // Test GetLocalInstance with native instance method instMeth() frame</span>
<span class="line-added">241     err = jvmti-&gt;GetLocalInstance(NULL, 0, &amp;obj);</span>
<span class="line-added">242     printf(&quot; Native instMeth: GetLocalInstance: %s (%d)\n&quot;, TranslateError(err), err);</span>
<span class="line-added">243     if (err != JVMTI_ERROR_NONE) {</span>
<span class="line-added">244         printf(&quot;FAIL: GetLocalInstance failed to get instance for native instance method frame\n&quot;);</span>
<span class="line-added">245         result = STATUS_FAILED;</span>
<span class="line-added">246     }</span>
<span class="line-added">247     if (env-&gt;IsSameObject(inst, obj) == JNI_FALSE) {</span>
<span class="line-added">248         printf(&quot;FAIL: GetLocalInstance returned unexpected instance for native instance method frame\n&quot;);</span>
<span class="line-added">249         result = STATUS_FAILED;</span>
<span class="line-added">250     }</span>
<span class="line-added">251 </span>
<span class="line-added">252     // Test GetLocalInstance with java instance method meth01() frame</span>
<span class="line-added">253     err = jvmti-&gt;GetLocalInstance(NULL, 1, &amp;obj);</span>
<span class="line-added">254     printf(&quot; Native instMeth: GetLocalInstance: %s (%d)\n&quot;, TranslateError(err), err);</span>
<span class="line-added">255     if (err != JVMTI_ERROR_NONE) {</span>
<span class="line-added">256         printf(&quot;FAIL: GetLocalInstance failed to get instance for java instance method frame\n&quot;);</span>
<span class="line-added">257         result = STATUS_FAILED;</span>
<span class="line-added">258     }</span>
<span class="line-added">259     if (env-&gt;IsSameObject(inst, obj) == JNI_FALSE) {</span>
<span class="line-added">260         printf(&quot;FAIL: GetLocalInstance returned unexpected instance for java instance method frame\n&quot;);</span>
<span class="line-added">261         result = STATUS_FAILED;</span>
<span class="line-added">262     }</span>
<span class="line-added">263     printf(&quot; Native instMeth: finished\n\n&quot;);</span>
<span class="line-added">264 }</span>
<span class="line-added">265 </span>
266 JNIEXPORT void JNICALL
267 Java_nsk_jvmti_unit_GetLocalVariable_getlocal003_getMeth(JNIEnv *env, jclass cls) {
268     jvmtiError err;
<span class="line-added">269     jobject obj = NULL;</span>
<span class="line-added">270 </span>
<span class="line-added">271     printf(&quot;\n Native getMeth: started\n&quot;);</span>
272 
273     if (jvmti == NULL) {
274         printf(&quot;JVMTI client was not properly loaded!\n&quot;);
275         result = STATUS_FAILED;
276         return;
277     }
278 
279     mid = env-&gt;GetStaticMethodID(cls, &quot;staticMeth&quot;, &quot;(I)I&quot;);
280     if (mid == NULL) {
281         printf(&quot;Cannot find Method ID for staticMeth\n&quot;);
282         result = STATUS_FAILED;
283         return;
284     }
285 
286     err = jvmti-&gt;GetLocalVariableTable(mid, &amp;entryCount, &amp;table);
287     if (err != JVMTI_ERROR_NONE) {
288         printf(&quot;(GetLocalVariableTable) unexpected error: %s (%d)\n&quot;,
289                TranslateError(err), err);
290         result = STATUS_FAILED;
291         return;
292     }
293 
294     err = jvmti-&gt;SetEventNotificationMode(JVMTI_ENABLE, JVMTI_EVENT_METHOD_EXIT, NULL);
295     if (err != JVMTI_ERROR_NONE) {
296         printf(&quot;Failed to enable metod exit event: %s (%d)\n&quot;,
297                TranslateError(err), err);
298         result = STATUS_FAILED;
299     }
<span class="line-added">300 </span>
<span class="line-added">301     // Test GetLocalInstance with native static method getMeth() frame</span>
<span class="line-added">302     err = jvmti-&gt;GetLocalInstance(NULL, 0, &amp;obj);</span>
<span class="line-added">303     printf(&quot; Native getMeth: GetLocalInstance: %s (%d)\n&quot;, TranslateError(err), err);</span>
<span class="line-added">304     if (err != JVMTI_ERROR_INVALID_SLOT) {</span>
<span class="line-added">305         printf(&quot;FAIL: GetLocalInstance failed to return JVMTI_ERROR_INVALID_SLOT for native static method frame\n&quot;);</span>
<span class="line-added">306         result = STATUS_FAILED;</span>
<span class="line-added">307     }</span>
<span class="line-added">308 </span>
<span class="line-added">309     // Test GetLocalInstance with java static method run() frame</span>
<span class="line-added">310     err = jvmti-&gt;GetLocalInstance(NULL, 1, &amp;obj);</span>
<span class="line-added">311     printf(&quot; Native getMeth: GetLocalInstance: %s (%d)\n&quot;, TranslateError(err), err);</span>
<span class="line-added">312     if (err != JVMTI_ERROR_INVALID_SLOT) {</span>
<span class="line-added">313         printf(&quot;FAIL: GetLocalInstance failed to return JVMTI_ERROR_INVALID_SLOT for java static method frame\n&quot;);</span>
<span class="line-added">314         result = STATUS_FAILED;</span>
<span class="line-added">315     }</span>
<span class="line-added">316 </span>
<span class="line-added">317     printf(&quot; Native getMeth: finished\n\n&quot;);</span>
318     fflush(stdout);
319 }
320 
321 JNIEXPORT void JNICALL
322 Java_nsk_jvmti_unit_GetLocalVariable_getlocal003_checkLoc(JNIEnv *env,
323         jclass cls, jthread thr) {
324     jvmtiError err;
325     jvmtiLocalVariableEntry *table;
326     jint entryCount;
327     jmethodID mid;
328     jint locVar;
329     jint i, j;
330     int  overlap = 0;
331 
332     if (jvmti == NULL) {
333         printf(&quot;JVMTI client was not properly loaded!\n&quot;);
334         result = STATUS_FAILED;
335         return;
336     }
337     printf(&quot;\n checkLoc: START\n&quot;);
</pre>
</td>
</tr>
</table>
<center><a href="../getlocal003.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../monitoring/ThreadMXBean/GetThreadAllocatedBytes/BaseBehaviorTest.README.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>