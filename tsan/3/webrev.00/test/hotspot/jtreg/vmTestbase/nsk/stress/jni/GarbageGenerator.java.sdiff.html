<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/nsk/stress/jni/GarbageGenerator.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../share/runner/ThreadsRunner.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../stack/stack001.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/stress/jni/GarbageGenerator.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 67                     head.setNext(g);
 68                 }
 69             } else
 70                 attachment.setNext(g);
 71         }
 72 
 73         void discard() {
 74             attachment.setNext(null);
 75         }
 76 
 77         private byte[] memory;
 78         private Garbage attachment;
 79     }
 80 
 81     public void run() {
 82         GarbageRing gr = new GarbageRing();
 83         int g = 0;
 84         while (!done) {
 85             for (g = 0; g &lt; ringSize; g++) {
 86                 gr.add(allocSize);
<span class="line-modified"> 87                 yield();</span>
 88             }
 89             gr.discard();
 90             try {
 91                 sleep(interval);
 92             } catch (InterruptedException e) {
 93             }
 94         }
 95         if (DEBUG) System.out.println(&quot;GarbageRing::run(): done&quot;);
 96     }
 97 
 98     public void setAllocSize(int i) {
 99         allocSize = i;
100     }
101 
102     public int getAllocSize() {
103         return allocSize;
104     }
105 
106     public void setInterval(int i) {
107         interval = i;
</pre>
</td>
<td>
<hr />
<pre>
 67                     head.setNext(g);
 68                 }
 69             } else
 70                 attachment.setNext(g);
 71         }
 72 
 73         void discard() {
 74             attachment.setNext(null);
 75         }
 76 
 77         private byte[] memory;
 78         private Garbage attachment;
 79     }
 80 
 81     public void run() {
 82         GarbageRing gr = new GarbageRing();
 83         int g = 0;
 84         while (!done) {
 85             for (g = 0; g &lt; ringSize; g++) {
 86                 gr.add(allocSize);
<span class="line-modified"> 87                 Thread.yield();</span>
 88             }
 89             gr.discard();
 90             try {
 91                 sleep(interval);
 92             } catch (InterruptedException e) {
 93             }
 94         }
 95         if (DEBUG) System.out.println(&quot;GarbageRing::run(): done&quot;);
 96     }
 97 
 98     public void setAllocSize(int i) {
 99         allocSize = i;
100     }
101 
102     public int getAllocSize() {
103         return allocSize;
104     }
105 
106     public void setInterval(int i) {
107         interval = i;
</pre>
</td>
</tr>
</table>
<center><a href="../../share/runner/ThreadsRunner.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../stack/stack001.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>