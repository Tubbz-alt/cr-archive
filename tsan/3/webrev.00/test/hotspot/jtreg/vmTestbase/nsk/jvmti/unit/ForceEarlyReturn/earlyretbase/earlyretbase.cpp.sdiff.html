<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/nsk/jvmti/unit/ForceEarlyReturn/earlyretbase/earlyretbase.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../FollowReferences/followref003/followref003.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../GetLocalVariable/getlocal003.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/jvmti/unit/ForceEarlyReturn/earlyretbase/earlyretbase.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 79 Java_nsk_jvmti_unit_ForceEarlyReturn_earlyretbase_suspThread(JNIEnv *env,
 80         jclass cls, jobject earlyretThr) {
 81 
 82     if (!caps.can_force_early_return || !caps.can_suspend) {
 83         return PASSED;
 84     }
 85 
 86     jclass clazz = env-&gt;GetObjectClass(earlyretThr);
 87     if (clazz == NULL) {
 88         printf(&quot;Cannot get class of thread object\n&quot;);
 89         RETURN_FAILED;
 90     }
 91 
 92     midActiveMethod = env-&gt;GetMethodID(clazz, name_exp, sig_exp);
 93     if (midActiveMethod == NULL) {
 94         printf(&quot;Cannot find Method ID for method %s\n&quot;, name_exp);
 95         RETURN_FAILED;
 96     }
 97 
 98     int result = suspendThreadAtMethod(jvmti, cls, earlyretThr, midActiveMethod);
<span class="line-modified"> 99     if( result == NSK_TRUE) {</span>
100         return PASSED;
101     } else {
102         RETURN_FAILED;
103     }
104 }
105 
106 JNIEXPORT jint JNICALL
107 Java_nsk_jvmti_unit_ForceEarlyReturn_earlyretbase_resThread(JNIEnv *env,
108         jclass cls, jobject earlyretThr) {
109     jvmtiError err;
110 
111     if (!caps.can_force_early_return || !caps.can_suspend) {
112         return PASSED;
113     }
114 
115     printf(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Invoke ResumeThread()\n&quot;);
116     err = jvmti-&gt;ResumeThread(earlyretThr);
117     if (err != JVMTI_ERROR_NONE) {
118         printf(&quot;%s: Failed to call ResumeThread(): error=%d: %s\n&quot;,
119             __FILE__, err, TranslateError(err));
</pre>
</td>
<td>
<hr />
<pre>
 79 Java_nsk_jvmti_unit_ForceEarlyReturn_earlyretbase_suspThread(JNIEnv *env,
 80         jclass cls, jobject earlyretThr) {
 81 
 82     if (!caps.can_force_early_return || !caps.can_suspend) {
 83         return PASSED;
 84     }
 85 
 86     jclass clazz = env-&gt;GetObjectClass(earlyretThr);
 87     if (clazz == NULL) {
 88         printf(&quot;Cannot get class of thread object\n&quot;);
 89         RETURN_FAILED;
 90     }
 91 
 92     midActiveMethod = env-&gt;GetMethodID(clazz, name_exp, sig_exp);
 93     if (midActiveMethod == NULL) {
 94         printf(&quot;Cannot find Method ID for method %s\n&quot;, name_exp);
 95         RETURN_FAILED;
 96     }
 97 
 98     int result = suspendThreadAtMethod(jvmti, cls, earlyretThr, midActiveMethod);
<span class="line-modified"> 99     if (result) {</span>
100         return PASSED;
101     } else {
102         RETURN_FAILED;
103     }
104 }
105 
106 JNIEXPORT jint JNICALL
107 Java_nsk_jvmti_unit_ForceEarlyReturn_earlyretbase_resThread(JNIEnv *env,
108         jclass cls, jobject earlyretThr) {
109     jvmtiError err;
110 
111     if (!caps.can_force_early_return || !caps.can_suspend) {
112         return PASSED;
113     }
114 
115     printf(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Invoke ResumeThread()\n&quot;);
116     err = jvmti-&gt;ResumeThread(earlyretThr);
117     if (err != JVMTI_ERROR_NONE) {
118         printf(&quot;%s: Failed to call ResumeThread(): error=%d: %s\n&quot;,
119             __FILE__, err, TranslateError(err));
</pre>
</td>
</tr>
</table>
<center><a href="../../FollowReferences/followref003/followref003.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../GetLocalVariable/getlocal003.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>