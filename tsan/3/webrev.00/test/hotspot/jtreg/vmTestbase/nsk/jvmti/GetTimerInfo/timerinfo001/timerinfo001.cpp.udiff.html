<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/vmTestbase/nsk/jvmti/GetTimerInfo/timerinfo001/timerinfo001.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../GetTime/gettime001/gettime001.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../RawMonitorWait/rawmnwait005/rawmnwait005.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/jvmti/GetTimerInfo/timerinfo001/timerinfo001.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -47,22 +47,22 @@</span>
  
  /* ============================================================================= */
  
  /**
   * Get timer info and optionally compares it with initial one.
<span class="udiff-line-modified-removed">-  * @returns NSK_FALSE if any error occured.</span>
<span class="udiff-line-modified-added">+  * @returns false if any error occured.</span>
   */
<span class="udiff-line-modified-removed">- static int checkTimerInfo(jvmtiEnv* jvmti, jvmtiTimerInfo* info,</span>
<span class="udiff-line-modified-removed">-                             jvmtiTimerInfo* initInfo, const char where[]) {</span>
<span class="udiff-line-modified-added">+ static bool checkTimerInfo(jvmtiEnv* jvmti, jvmtiTimerInfo* info,</span>
<span class="udiff-line-modified-added">+                            jvmtiTimerInfo* initInfo, const char where[]) {</span>
  
      char buf[32], buf2[32];
<span class="udiff-line-modified-removed">-     int success = NSK_TRUE;</span>
<span class="udiff-line-modified-added">+     bool success = true;</span>
  
      NSK_DISPLAY0(&quot;GetTimerInfo() for current JVMTI env\n&quot;);
      if (!NSK_JVMTI_VERIFY(
              jvmti-&gt;GetTimerInfo(info))) {
<span class="udiff-line-modified-removed">-         return NSK_FALSE;</span>
<span class="udiff-line-modified-added">+         return false;</span>
      }
      NSK_DISPLAY0(&quot;Got timer info:\n&quot;);
  
      NSK_DISPLAY1(&quot;    max_value:         %s\n&quot;,
                   julong_to_string((julong)info-&gt;max_value, buf));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -77,31 +77,31 @@</span>
                            &quot;#   got value: %s\n&quot;
                            &quot;#   initial:   %s\n&quot;,
                            where, &quot;max_value&quot;,
                            julong_to_string((julong)info-&gt;max_value, buf),
                            julong_to_string((julong)initInfo-&gt;max_value, buf2));
<span class="udiff-line-modified-removed">-             success = NSK_FALSE;</span>
<span class="udiff-line-modified-added">+             success = false;</span>
          }
          if (info-&gt;may_skip_forward != initInfo-&gt;may_skip_forward) {
              NSK_COMPLAIN4(&quot;In %s GetTimerInfo() returned different info:\n&quot;
                            &quot;#   field:     %s\n&quot;
                            &quot;#   got value: %d\n&quot;
                            &quot;#   initial:   %d\n&quot;,
                              where, &quot;may_skip_forward&quot;,
                              (int)info-&gt;may_skip_forward,
                              (int)initInfo-&gt;may_skip_forward);
<span class="udiff-line-modified-removed">-             success = NSK_FALSE;</span>
<span class="udiff-line-modified-added">+             success = false;</span>
          }
          if (info-&gt;may_skip_backward != initInfo-&gt;may_skip_backward) {
              NSK_COMPLAIN4(&quot;In %s GetTimerInfo() returned different info:\n&quot;
                            &quot;#   field:     %s\n&quot;
                            &quot;#   got value: %d\n&quot;
                            &quot;#   initial:   %d\n&quot;,
                              where, &quot;may_skip_backward&quot;,
                              (int)info-&gt;may_skip_backward,
                              (int)initInfo-&gt;may_skip_backward);
<span class="udiff-line-modified-removed">-             success = NSK_FALSE;</span>
<span class="udiff-line-modified-added">+             success = false;</span>
          }
      }
  
      return success;
  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -147,26 +147,26 @@</span>
  /**
   * Callback for VM_DEATH event.
   */
  JNIEXPORT void JNICALL
  callbackVMDeath(jvmtiEnv* jvmti, JNIEnv* jni) {
<span class="udiff-line-modified-removed">-     int success = NSK_TRUE;</span>
<span class="udiff-line-modified-added">+     bool success = true;</span>
  
      NSK_DISPLAY0(&quot;&gt;&gt;&gt; Testcase #4: Check timer info in VM_DEATH callback\n&quot;);
      {
          jvmtiTimerInfo info;
          success = checkTimerInfo(jvmti, &amp;info, &amp;initInfo, &quot;VM_DEATH callback&quot;);
      }
  
      NSK_DISPLAY1(&quot;Disable events: %d events\n&quot;, EVENTS_COUNT);
      if (!nsk_jvmti_enableEvents(JVMTI_DISABLE, EVENTS_COUNT, events, NULL)) {
<span class="udiff-line-modified-removed">-         success = NSK_FALSE;</span>
<span class="udiff-line-modified-added">+         success = false;</span>
      } else {
          NSK_DISPLAY0(&quot;  ... disabled\n&quot;);
      }
  
<span class="udiff-line-modified-removed">-     if (success != NSK_TRUE) {</span>
<span class="udiff-line-modified-added">+     if (!success) {</span>
          NSK_DISPLAY1(&quot;Exit with FAIL exit status: %d\n&quot;, STATUS_FAIL);
          NSK_BEFORE_TRACE(exit(STATUS_FAIL));
      }
  }
  
</pre>
<center><a href="../../GetTime/gettime001/gettime001.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../RawMonitorWait/rawmnwait005/rawmnwait005.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>