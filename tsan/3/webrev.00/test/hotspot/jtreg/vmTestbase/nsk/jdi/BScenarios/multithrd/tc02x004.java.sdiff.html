<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/nsk/jdi/BScenarios/multithrd/tc02x004.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../AttachingConnector/attach/attach004/TestDriver.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../BooleanType/_itself_/booleantype001.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/jdi/BScenarios/multithrd/tc02x004.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2002, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 package nsk.jdi.BScenarios.multithrd;
 25 

 26 import nsk.share.*;
 27 import nsk.share.jpda.*;
 28 import nsk.share.jdi.*;
 29 
 30 import com.sun.jdi.*;
 31 import com.sun.jdi.request.*;
 32 import com.sun.jdi.event.*;
 33 
 34 import java.util.*;
 35 import java.io.*;
 36 
 37 /**
 38  * This test is from the group of so-called Borland&#39;s scenarios and
 39  * implements the following test case:                                  &lt;br&gt;
 40  *     Suite 2 - Breakpoints (multiple threads)                         &lt;br&gt;
 41  *     Test case:      TC2                                              &lt;br&gt;
 42  *     Description:    Class breakpoint                                 &lt;br&gt;
 43  *     Steps:          1.Add class breakpoint: singlethread.Class1      &lt;br&gt;
 44  *                     2.Debug Main                                     &lt;br&gt;
 45  *                       X. Stops on line 13 in Class1.java             &lt;br&gt;
</pre>
<hr />
<pre>
 78         log.display(msg);
 79     }
 80 
 81     private static void complain(String msg) {
 82         log.complain(&quot;debugger FAILURE&gt; &quot; + msg + &quot;\n&quot;);
 83     }
 84 
 85     public static void main(String argv[]) {
 86         System.exit(Consts.JCK_STATUS_BASE + run(argv, System.out));
 87     }
 88 
 89     public static int run(String argv[], PrintStream out) {
 90 
 91         exitStatus = Consts.TEST_PASSED;
 92 
 93         tc02x004 thisTest = new tc02x004();
 94 
 95         ArgumentHandler argHandler = new ArgumentHandler(argv);
 96         log = new Log(out, argHandler);
 97 
<span class="line-modified"> 98         waitTime = argHandler.getWaitTime() * 60000;</span>
 99 
100         Binder binder = new Binder(argHandler, log);
101         debugee = binder.bindToDebugee(debugeeName);
102         debugee.redirectStderr(log.getOutStream());
103         thisTest.evm = debugee.getEventRequestManager();
104 
105         try {
106             thisTest.execTest();
107         } catch (Throwable e) {
108             complain(&quot;Unexpected &quot; + e);
109             exitStatus = Consts.TEST_FAILED;
110             e.printStackTrace();
111             thisTest.evm.deleteEventRequest(thisTest.mthdReq);
112         } finally {
113             debugee.resume();
114         }
115         display(&quot;Test finished. exitStatus = &quot; + exitStatus);
116 

117         return exitStatus;
118     }
119 
120     private void execTest() throws Failure {
121 
122         display(&quot;\nTEST BEGINS&quot;);
123         display(&quot;===========&quot;);
124         debugee.resume();
125 
126         EventSet eventSet = null;
127         EventIterator eventIterator = null;
128         Event event;
129         long totalTime = waitTime;
130         long tmp, begin = System.currentTimeMillis(),
131              delta = 0;
132         boolean exit = false;
133 
134         mthdReq = evm.createMethodEntryRequest();
135         mthdReq.addClassFilter(testedClassName);
136         mthdReq.enable();
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2002, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 package nsk.jdi.BScenarios.multithrd;
 25 
<span class="line-added"> 26 import jdk.test.lib.Utils;</span>
 27 import nsk.share.*;
 28 import nsk.share.jpda.*;
 29 import nsk.share.jdi.*;
 30 
 31 import com.sun.jdi.*;
 32 import com.sun.jdi.request.*;
 33 import com.sun.jdi.event.*;
 34 
 35 import java.util.*;
 36 import java.io.*;
 37 
 38 /**
 39  * This test is from the group of so-called Borland&#39;s scenarios and
 40  * implements the following test case:                                  &lt;br&gt;
 41  *     Suite 2 - Breakpoints (multiple threads)                         &lt;br&gt;
 42  *     Test case:      TC2                                              &lt;br&gt;
 43  *     Description:    Class breakpoint                                 &lt;br&gt;
 44  *     Steps:          1.Add class breakpoint: singlethread.Class1      &lt;br&gt;
 45  *                     2.Debug Main                                     &lt;br&gt;
 46  *                       X. Stops on line 13 in Class1.java             &lt;br&gt;
</pre>
<hr />
<pre>
 79         log.display(msg);
 80     }
 81 
 82     private static void complain(String msg) {
 83         log.complain(&quot;debugger FAILURE&gt; &quot; + msg + &quot;\n&quot;);
 84     }
 85 
 86     public static void main(String argv[]) {
 87         System.exit(Consts.JCK_STATUS_BASE + run(argv, System.out));
 88     }
 89 
 90     public static int run(String argv[], PrintStream out) {
 91 
 92         exitStatus = Consts.TEST_PASSED;
 93 
 94         tc02x004 thisTest = new tc02x004();
 95 
 96         ArgumentHandler argHandler = new ArgumentHandler(argv);
 97         log = new Log(out, argHandler);
 98 
<span class="line-modified"> 99         waitTime = Utils.adjustTimeout(argHandler.getWaitTime() * 60000);</span>
100 
101         Binder binder = new Binder(argHandler, log);
102         debugee = binder.bindToDebugee(debugeeName);
103         debugee.redirectStderr(log.getOutStream());
104         thisTest.evm = debugee.getEventRequestManager();
105 
106         try {
107             thisTest.execTest();
108         } catch (Throwable e) {
109             complain(&quot;Unexpected &quot; + e);
110             exitStatus = Consts.TEST_FAILED;
111             e.printStackTrace();
112             thisTest.evm.deleteEventRequest(thisTest.mthdReq);
113         } finally {
114             debugee.resume();
115         }
116         display(&quot;Test finished. exitStatus = &quot; + exitStatus);
117 
<span class="line-added">118         debugee.endDebugee();</span>
119         return exitStatus;
120     }
121 
122     private void execTest() throws Failure {
123 
124         display(&quot;\nTEST BEGINS&quot;);
125         display(&quot;===========&quot;);
126         debugee.resume();
127 
128         EventSet eventSet = null;
129         EventIterator eventIterator = null;
130         Event event;
131         long totalTime = waitTime;
132         long tmp, begin = System.currentTimeMillis(),
133              delta = 0;
134         boolean exit = false;
135 
136         mthdReq = evm.createMethodEntryRequest();
137         mthdReq.addClassFilter(testedClassName);
138         mthdReq.enable();
</pre>
</td>
</tr>
</table>
<center><a href="../../AttachingConnector/attach/attach004/TestDriver.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../BooleanType/_itself_/booleantype001.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>