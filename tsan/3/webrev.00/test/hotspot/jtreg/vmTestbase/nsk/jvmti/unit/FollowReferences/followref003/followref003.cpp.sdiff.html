<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/vmTestbase/nsk/jvmti/unit/FollowReferences/followref003/followref003.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../followref001/followref001.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../ForceEarlyReturn/earlyretbase/earlyretbase.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/vmTestbase/nsk/jvmti/unit/FollowReferences/followref003/followref003.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 793                     }
 794                 }
 795                if (length == 0
 796                     &amp;&amp; reference_info-&gt;stack_local.slot != ARGV_STRING_ARR_SLOT
 797                     &amp;&amp; reference_info-&gt;stack_local.slot &lt; FIRST_PRIM_ARR_SLOT
 798                     &amp;&amp; reference_info-&gt;stack_local.slot &gt; DUMMY_STRING_ARR_SLOT) {
 799                    NSK_COMPLAIN1(&quot;Wrong length of the local variable:&quot;
 800                                  &quot; expected: -1, found: %-d\n\n&quot;, length);
 801                    nsk_jvmti_setFailStatus();
 802                }
 803             }
 804             break;
 805         case JVMTI_HEAP_REFERENCE_JNI_LOCAL:
 806             // Skip JNI local references from non-main (e.g. compiler) threads.
 807             if (thr_tag == TARG_THREAD_TAG) {
 808                 thr_idx  = registerThread(thr_id, thr_tag);
 809                 meth_idx = registerFrame(thr_id, depth, method, ref_kind);
 810             }
 811             break;
 812 
<span class="line-modified"> 813         case JVMTI_REFERENCE_ARRAY_ELEMENT:</span>
 814         case JVMTI_HEAP_REFERENCE_JNI_GLOBAL:
 815         case JVMTI_HEAP_REFERENCE_SYSTEM_CLASS:
 816         case JVMTI_HEAP_REFERENCE_MONITOR:
 817         case JVMTI_HEAP_REFERENCE_OTHER:
 818             /* These reference kinds are expected */
 819             break;
 820 
 821         default: {
 822             NSK_COMPLAIN1(&quot;This reference kind was not expected: %s\n\n&quot;,
 823                            ref_kind_str[ref_kind]);
 824             fflush(0);
 825             nsk_jvmti_setFailStatus();
 826             break;
 827         }
 828     }
 829     return 0;
 830 }
 831 
 832 jint JNICALL primitiveFieldCallback
 833     (jvmtiHeapReferenceKind        ref_kind,
</pre>
</td>
<td>
<hr />
<pre>
 793                     }
 794                 }
 795                if (length == 0
 796                     &amp;&amp; reference_info-&gt;stack_local.slot != ARGV_STRING_ARR_SLOT
 797                     &amp;&amp; reference_info-&gt;stack_local.slot &lt; FIRST_PRIM_ARR_SLOT
 798                     &amp;&amp; reference_info-&gt;stack_local.slot &gt; DUMMY_STRING_ARR_SLOT) {
 799                    NSK_COMPLAIN1(&quot;Wrong length of the local variable:&quot;
 800                                  &quot; expected: -1, found: %-d\n\n&quot;, length);
 801                    nsk_jvmti_setFailStatus();
 802                }
 803             }
 804             break;
 805         case JVMTI_HEAP_REFERENCE_JNI_LOCAL:
 806             // Skip JNI local references from non-main (e.g. compiler) threads.
 807             if (thr_tag == TARG_THREAD_TAG) {
 808                 thr_idx  = registerThread(thr_id, thr_tag);
 809                 meth_idx = registerFrame(thr_id, depth, method, ref_kind);
 810             }
 811             break;
 812 
<span class="line-modified"> 813         case JVMTI_HEAP_REFERENCE_ARRAY_ELEMENT:</span>
 814         case JVMTI_HEAP_REFERENCE_JNI_GLOBAL:
 815         case JVMTI_HEAP_REFERENCE_SYSTEM_CLASS:
 816         case JVMTI_HEAP_REFERENCE_MONITOR:
 817         case JVMTI_HEAP_REFERENCE_OTHER:
 818             /* These reference kinds are expected */
 819             break;
 820 
 821         default: {
 822             NSK_COMPLAIN1(&quot;This reference kind was not expected: %s\n\n&quot;,
 823                            ref_kind_str[ref_kind]);
 824             fflush(0);
 825             nsk_jvmti_setFailStatus();
 826             break;
 827         }
 828     }
 829     return 0;
 830 }
 831 
 832 jint JNICALL primitiveFieldCallback
 833     (jvmtiHeapReferenceKind        ref_kind,
</pre>
</td>
</tr>
</table>
<center><a href="../followref001/followref001.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../ForceEarlyReturn/earlyretbase/earlyretbase.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>