<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/testlibrary/ctw/src/sun/hotspot/tools/ctw/Compiler.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CompileTheWorld.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="CtwRunner.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/testlibrary/ctw/src/sun/hotspot/tools/ctw/Compiler.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
133          * @param classId   id of class
134          * @param method    compiled for compilation
135          */
136         public CompileMethodCommand(long classId, Executable method) {
137             this.classId = classId;
138             this.className = method.getDeclaringClass().getName();
139             this.method = method;
140         }
141 
142         @Override
143         public final void run() {
144             int compLevel = Utils.INITIAL_COMP_LEVEL;
145             if (Utils.TIERED_COMPILATION) {
146                 for (int i = compLevel; i &lt;= Utils.TIERED_STOP_AT_LEVEL; ++i) {
147                     WHITE_BOX.deoptimizeMethod(method);
148                     compileAtLevel(i);
149                 }
150             } else {
151                 compileAtLevel(compLevel);
152             }



153         }
154 
155         private void waitCompilation() {
156             if (!Utils.BACKGROUND_COMPILATION) {
157                 return;
158             }
159             final Object obj = new Object();
160             synchronized (obj) {
161                 for (int i = 0;
162                      i &lt; 10 &amp;&amp; WHITE_BOX.isMethodQueuedForCompilation(method);
163                      ++i) {
164                     try {
165                         obj.wait(1000);
166                     } catch (InterruptedException e) {
167                         Thread.currentThread().interrupt();
168                     }
169                 }
170             }
171         }
172 
</pre>
</td>
<td>
<hr />
<pre>
133          * @param classId   id of class
134          * @param method    compiled for compilation
135          */
136         public CompileMethodCommand(long classId, Executable method) {
137             this.classId = classId;
138             this.className = method.getDeclaringClass().getName();
139             this.method = method;
140         }
141 
142         @Override
143         public final void run() {
144             int compLevel = Utils.INITIAL_COMP_LEVEL;
145             if (Utils.TIERED_COMPILATION) {
146                 for (int i = compLevel; i &lt;= Utils.TIERED_STOP_AT_LEVEL; ++i) {
147                     WHITE_BOX.deoptimizeMethod(method);
148                     compileAtLevel(i);
149                 }
150             } else {
151                 compileAtLevel(compLevel);
152             }
<span class="line-added">153 </span>
<span class="line-added">154             // Make the method eligible for sweeping sooner</span>
<span class="line-added">155             WHITE_BOX.deoptimizeMethod(method);</span>
156         }
157 
158         private void waitCompilation() {
159             if (!Utils.BACKGROUND_COMPILATION) {
160                 return;
161             }
162             final Object obj = new Object();
163             synchronized (obj) {
164                 for (int i = 0;
165                      i &lt; 10 &amp;&amp; WHITE_BOX.isMethodQueuedForCompilation(method);
166                      ++i) {
167                     try {
168                         obj.wait(1000);
169                     } catch (InterruptedException e) {
170                         Thread.currentThread().interrupt();
171                     }
172                 }
173             }
174         }
175 
</pre>
</td>
</tr>
</table>
<center><a href="CompileTheWorld.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="CtwRunner.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>