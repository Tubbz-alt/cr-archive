<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/make/TestMakeBase.gmk</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="TestMake.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="UtilsForTests.gmk.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/make/TestMakeBase.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  #
<span class="line-modified">! # Copyright (c) 2014, 2018, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  #
<span class="line-modified">! # Copyright (c) 2014, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  # DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  #
  # This code is free software; you can redistribute it and/or modify it
  # under the terms of the GNU General Public License version 2 only, as
  # published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 138,17 ***</span>
  #$(eval $(call assert-equals, $(call Or,  non-boolean  ), $(error ...)))
  
  ################################################################################
  # Test remove-prefixes
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call remove-prefixes, pre, prefix postfix), fix postfix, \
<span class="line-modified">!     Prefixes not properly removed))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call remove-prefixes, pre post, prefix postfix), fix fix, \
<span class="line-modified">!     Prefixes not properly removed))</span>
  
  ################################################################################
  # Test ShellQuote
  
  SHELL_QUOTE_VALUE := foo &#39;&quot;&quot;&#39; &quot;&#39;&#39;&quot; bar
<span class="line-new-header">--- 138,17 ---</span>
  #$(eval $(call assert-equals, $(call Or,  non-boolean  ), $(error ...)))
  
  ################################################################################
  # Test remove-prefixes
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call remove-prefixes, pre, prefix postfix), fix postfix, \
<span class="line-modified">!     Prefixes not properly removed)</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call remove-prefixes, pre post, prefix postfix), fix fix, \
<span class="line-modified">!     Prefixes not properly removed)</span>
  
  ################################################################################
  # Test ShellQuote
  
  SHELL_QUOTE_VALUE := foo &#39;&quot;&quot;&#39; &quot;&#39;&#39;&quot; bar
</pre>
<hr />
<pre>
<span class="line-old-header">*** 237,23 ***</span>
  # Test specifying a specific value file to store variable in
  VARDEP_VALUE_FILE := $(VARDEP_DIR)/value-file
  VARDEP_TEST_VAR2 := value3
  
  VARDEP_RETURN_VALUE := $(call DependOnVariable, VARDEP_TEST_VAR2, $(VARDEP_VALUE_FILE))
<span class="line-modified">! $(eval $(call assert-equals, $(VARDEP_RETURN_VALUE), $(VARDEP_VALUE_FILE), \</span>
<span class="line-modified">!     Wrong filename returned))</span>
  -include $(VARDEP_VALUE_FILE)
<span class="line-modified">! $(eval $(call assert-equals, $(VARDEP_TEST_VAR2_old), $(VARDEP_TEST_VAR2), \</span>
<span class="line-modified">!     Wrong contents in vardeps file))</span>
  
  # Test with a variable value containing some problematic characters
  VARDEP_TEST_VAR3 := foo &#39;&quot;&quot;&#39; &quot;&#39;&#39;&quot; bar \$$ORIGIN &amp;\#x00a9
  VARDEP_VALUE_FILE := $(call DependOnVariable, VARDEP_TEST_VAR3)
  -include $(VARDEP_VALUE_FILE)
<span class="line-modified">! $(eval $(call assert-equals, $(call EscapeHash,$(VARDEP_TEST_VAR3_old)), \</span>
      $(call EscapeHash,$(VARDEP_TEST_VAR3)), \
<span class="line-modified">!     Wrong contents in vardep file))</span>
  
  TEST_TARGETS += test-vardep
  
  ################################################################################
  # Test sequence
<span class="line-new-header">--- 237,23 ---</span>
  # Test specifying a specific value file to store variable in
  VARDEP_VALUE_FILE := $(VARDEP_DIR)/value-file
  VARDEP_TEST_VAR2 := value3
  
  VARDEP_RETURN_VALUE := $(call DependOnVariable, VARDEP_TEST_VAR2, $(VARDEP_VALUE_FILE))
<span class="line-modified">! $(call AssertEquals, $(VARDEP_RETURN_VALUE), $(VARDEP_VALUE_FILE), \</span>
<span class="line-modified">!     Wrong filename returned)</span>
  -include $(VARDEP_VALUE_FILE)
<span class="line-modified">! $(call AssertEquals, $(VARDEP_TEST_VAR2_old), $(VARDEP_TEST_VAR2), \</span>
<span class="line-modified">!     Wrong contents in vardeps file)</span>
  
  # Test with a variable value containing some problematic characters
  VARDEP_TEST_VAR3 := foo &#39;&quot;&quot;&#39; &quot;&#39;&#39;&quot; bar \$$ORIGIN &amp;\#x00a9
  VARDEP_VALUE_FILE := $(call DependOnVariable, VARDEP_TEST_VAR3)
  -include $(VARDEP_VALUE_FILE)
<span class="line-modified">! $(call AssertEquals, $(call EscapeHash,$(VARDEP_TEST_VAR3_old)), \</span>
      $(call EscapeHash,$(VARDEP_TEST_VAR3)), \
<span class="line-modified">!     Wrong contents in vardep file)</span>
  
  TEST_TARGETS += test-vardep
  
  ################################################################################
  # Test sequence
</pre>
<hr />
<pre>
<span class="line-old-header">*** 278,89 ***</span>
  ################################################################################
  # Test that PathList is safe when called multiple nested times.
  
  PATHLIST_INPUT := foo bar baz
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call PathList, $(call PathList, $(PATHLIST_INPUT))), \
      $(call PathList, $(PATHLIST_INPUT)), \
<span class="line-modified">!     PathList call not safe for calling twice))</span>
  
  ################################################################################
  # Test FindCommonPathPrefix
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call FindCommonPathPrefix, /foo/bar/baz, /foo/bar/banan), \
      /foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call FindCommonPathPrefix, /foo/bar/baz, /foo/bar), \
      /foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call FindCommonPathPrefix, /foo/bar/baz, /foo/bar/), \
      /foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call FindCommonPathPrefix, foo/bar/baz, foo/bar/banan), \
      foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call FindCommonPathPrefix, foo/bar/baz, /foo/bar/banan), \
      , \
      FindCommonPathPrefix, \
<span class="line-modified">! ))</span>
  
  ################################################################################
  # DirToDotDot
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call DirToDotDot, foo/bar/baz/), \
      ../../.., \
      DirToDotDot, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call DirToDotDot, foo/bar), \
      ../.., \
      DirToDotDot, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call DirToDotDot, /foo), \
      .., \
      DirToDotDot, \
<span class="line-modified">! ))</span>
  
  ################################################################################
  # RelativePath
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call RelativePath, foo/bar/baz, foo/bar/banan), \
      ../baz, \
      RelativePath, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call RelativePath, foo/bar/baz/banan/kung, foo/bar/banan/kung), \
      ../../baz/banan/kung, \
      RelativePath, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(call RelativePath, /foo/bar/baz/banan/kung, /foo/bar/banan/kung/), \
      ../../baz/banan/kung, \
      RelativePath, \
<span class="line-modified">! ))</span>
  
  ################################################################################
  # Test ParseKeywordVariable
  
  KWBASE := APA=banan;GURKA=tomat;COUNT=1%202%203%204%205;SUM=1+2+3+4+5;MANY_WORDS=I have the best words.
<span class="line-new-header">--- 278,102 ---</span>
  ################################################################################
  # Test that PathList is safe when called multiple nested times.
  
  PATHLIST_INPUT := foo bar baz
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call PathList, $(call PathList, $(PATHLIST_INPUT))), \
      $(call PathList, $(PATHLIST_INPUT)), \
<span class="line-modified">!     PathList call not safe for calling twice, \</span>
<span class="line-added">+ )</span>
  
  ################################################################################
  # Test FindCommonPathPrefix
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call FindCommonPathPrefix, /foo/bar/baz, /foo/bar/banan), \
      /foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call FindCommonPathPrefix, /foo/bar/baz, /foo/bar), \
      /foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call FindCommonPathPrefix, /foo/bar/baz, /foo/bar/), \
      /foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call FindCommonPathPrefix, foo/bar/baz, foo/bar/banan), \
      foo/bar, \
      FindCommonPathPrefix, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call FindCommonPathPrefix, foo/bar/baz, /foo/bar/banan), \
      , \
      FindCommonPathPrefix, \
<span class="line-modified">! )</span>
  
  ################################################################################
  # DirToDotDot
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call DirToDotDot, foo/bar/baz/), \
      ../../.., \
      DirToDotDot, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call DirToDotDot, foo/bar), \
      ../.., \
      DirToDotDot, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call DirToDotDot, /foo), \
      .., \
      DirToDotDot, \
<span class="line-modified">! )</span>
  
  ################################################################################
  # RelativePath
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call RelativePath, foo/bar/baz, foo/bar/banan), \
      ../baz, \
      RelativePath, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call RelativePath, foo/bar/baz/banan/kung, foo/bar/banan/kung), \
      ../../baz/banan/kung, \
      RelativePath, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(call RelativePath, /foo/bar/baz/banan/kung, /foo/bar/banan/kung/), \
      ../../baz/banan/kung, \
      RelativePath, \
<span class="line-modified">! )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(call RelativePath, /foo/bar/baz/banan/kung, /foo/bar/baz), \</span>
<span class="line-added">+     ./banan/kung, \</span>
<span class="line-added">+     RelativePath, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(call RelativePath, /foo/bar/baz/banan/kung, /foo/bar/baz/), \</span>
<span class="line-added">+     ./banan/kung, \</span>
<span class="line-added">+     RelativePath, \</span>
<span class="line-added">+ )</span>
  
  ################################################################################
  # Test ParseKeywordVariable
  
  KWBASE := APA=banan;GURKA=tomat;COUNT=1%202%203%204%205;SUM=1+2+3+4+5;MANY_WORDS=I have the best words.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 368,53 ***</span>
  $(eval $(call ParseKeywordVariable, KWBASE, \
      SINGLE_KEYWORDS := APA GURKA SUM, \
      STRING_KEYWORDS := COUNT MANY_WORDS, \
  ))
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(KWBASE_APA), \
      banan, \
      ParseKeywordVariable failed to parse APA, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(KWBASE_COUNT), \
      1 2 3 4 5, \
      ParseKeywordVariable failed to parse COUNT, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(KWBASE_SUM), \
      1+2+3+4+5, \
      ParseKeywordVariable failed to parse SUM, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(KWBASE_MANY_WORDS), \
      I have the best words., \
      ParseKeywordVariable failed to parse MANY_WORDS, \
<span class="line-modified">! ))</span>
  
  # Simulate variable set from command line by using &quot;override&quot;
  override KWBASE_WEIRD_GURKA := paprika
  KWBASE_WEIRD := ;;APA=banan;;;GURKA=apelsin;APA=skansen;;
  
  $(eval $(call ParseKeywordVariable, KWBASE_WEIRD, \
      SINGLE_KEYWORDS := APA GURKA SUM, \
      STRING_KEYWORDS := COUNT, \
  ))
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(KWBASE_WEIRD_APA), \
      skansen, \
      ParseKeywordVariable failed to overwrite APA, \
<span class="line-modified">! ))</span>
  
<span class="line-modified">! $(eval $(call assert-equals, \</span>
      $(KWBASE_WEIRD_GURKA), \
      paprika, \
      ParseKeywordVariable failed to preserve GURKA, \
<span class="line-modified">! ))</span>
  
  ################################################################################
  
  all: $(TEST_TARGETS)
<span class="line-new-header">--- 381,247 ---</span>
  $(eval $(call ParseKeywordVariable, KWBASE, \
      SINGLE_KEYWORDS := APA GURKA SUM, \
      STRING_KEYWORDS := COUNT MANY_WORDS, \
  ))
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(KWBASE_APA), \
      banan, \
      ParseKeywordVariable failed to parse APA, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(KWBASE_COUNT), \
      1 2 3 4 5, \
      ParseKeywordVariable failed to parse COUNT, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(KWBASE_SUM), \
      1+2+3+4+5, \
      ParseKeywordVariable failed to parse SUM, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(KWBASE_MANY_WORDS), \
      I have the best words., \
      ParseKeywordVariable failed to parse MANY_WORDS, \
<span class="line-modified">! )</span>
  
  # Simulate variable set from command line by using &quot;override&quot;
  override KWBASE_WEIRD_GURKA := paprika
  KWBASE_WEIRD := ;;APA=banan;;;GURKA=apelsin;APA=skansen;;
  
  $(eval $(call ParseKeywordVariable, KWBASE_WEIRD, \
      SINGLE_KEYWORDS := APA GURKA SUM, \
      STRING_KEYWORDS := COUNT, \
  ))
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(KWBASE_WEIRD_APA), \
      skansen, \
      ParseKeywordVariable failed to overwrite APA, \
<span class="line-modified">! )</span>
  
<span class="line-modified">! $(call AssertEquals, \</span>
      $(KWBASE_WEIRD_GURKA), \
      paprika, \
      ParseKeywordVariable failed to preserve GURKA, \
<span class="line-modified">! )</span>
<span class="line-added">+ </span>
<span class="line-added">+ ################################################################################</span>
<span class="line-added">+ # Test recursive wildcard</span>
<span class="line-added">+ </span>
<span class="line-added">+ A_FOOBAR := $(OUTPUT_DIR)/wildcard/a/foo.bar</span>
<span class="line-added">+ A_B_DOOBAR := $(OUTPUT_DIR)/wildcard/a/b/doo.bar</span>
<span class="line-added">+ A_B_FOOBAR := $(OUTPUT_DIR)/wildcard/a/b/foo.bar</span>
<span class="line-added">+ A_B_FOOBAZ := $(OUTPUT_DIR)/wildcard/a/b/foo.baz</span>
<span class="line-added">+ X_Y_FOOBAR := $(OUTPUT_DIR)/wildcard/x/y/foo.bar</span>
<span class="line-added">+ X_Y_FOOBAZ := $(OUTPUT_DIR)/wildcard/x/y/foo.baz</span>
<span class="line-added">+ X_Y_FOODOLLAR := $(OUTPUT_DIR)/wildcard/x/y/foo$$foo</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call MakeDir, $(OUTPUT_DIR)/wildcard/a/b)</span>
<span class="line-added">+ $(call MakeDir, $(OUTPUT_DIR)/wildcard/x/y)</span>
<span class="line-added">+ $(shell $(TOUCH) $(A_FOOBAR) $(A_B_FOOBAR) $(A_B_DOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+     $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(call ShellQuote, $(X_Y_FOODOLLAR)))</span>
<span class="line-added">+ </span>
<span class="line-added">+ ifeq ($(RWILDCARD_WORKS), true)</span>
<span class="line-added">+   $(call AssertEquals, \</span>
<span class="line-added">+       $(sort $(call rwildcard, $(OUTPUT_DIR)/wildcard, *.bar)), \</span>
<span class="line-added">+       $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_FOOBAR) $(X_Y_FOOBAR)), \</span>
<span class="line-added">+       Wrong files returned from rwildcard, \</span>
<span class="line-added">+   )</span>
<span class="line-added">+ </span>
<span class="line-added">+   $(call AssertEquals, \</span>
<span class="line-added">+       $(sort $(call rwildcard, $(OUTPUT_DIR)/wildcard, doo.*)), \</span>
<span class="line-added">+       $(A_B_DOOBAR), \</span>
<span class="line-added">+       Wrong files returned from rwildcard, \</span>
<span class="line-added">+   )</span>
<span class="line-added">+ </span>
<span class="line-added">+   $(call AssertEquals, \</span>
<span class="line-added">+       $(sort $(call rwildcard, $(OUTPUT_DIR)/wildcard, *.bar *.baz)), \</span>
<span class="line-added">+       $(sort $(A_B_DOOBAR) $(A_FOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+       $(X_Y_FOOBAR) $(X_Y_FOOBAZ)), \</span>
<span class="line-added">+       Wrong files returned from rwildcard, \</span>
<span class="line-added">+   )</span>
<span class="line-added">+ </span>
<span class="line-added">+   $(call AssertEquals, \</span>
<span class="line-added">+       $(sort $(call WildcardFindFiles, $(OUTPUT_DIR)/wildcard)), \</span>
<span class="line-added">+       $(sort $(A_B_DOOBAR) $(A_FOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+       $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+       Wrong files returned from WildcardFindFiles, \</span>
<span class="line-added">+   )</span>
<span class="line-added">+ </span>
<span class="line-added">+   $(call AssertEquals, \</span>
<span class="line-added">+       $(sort $(call WildcardFindFiles, $(OUTPUT_DIR)/wildcard/x/y)), \</span>
<span class="line-added">+       $(sort $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+       Wrong files returned from WildcardFindFiles, \</span>
<span class="line-added">+   )</span>
<span class="line-added">+ </span>
<span class="line-added">+   $(call AssertEquals, \</span>
<span class="line-added">+       $(sort $(call WildcardFindFiles, $(OUTPUT_DIR)/wildcard/a/b $(OUTPUT_DIR)/wildcard/x)), \</span>
<span class="line-added">+       $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+       $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+       Wrong files returned from WildcardFindFiles, \</span>
<span class="line-added">+   )</span>
<span class="line-added">+ endif</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call ShellFindFiles, $(OUTPUT_DIR)/wildcard)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_FOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+     $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     Wrong files returned from ShellFindFiles, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call ShellFindFiles, $(OUTPUT_DIR)/wildcard/x/y)), \</span>
<span class="line-added">+     $(sort $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     Wrong files returned from ShellFindFiles, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call ShellFindFiles, $(OUTPUT_DIR)/wildcard/a/b $(OUTPUT_DIR)/wildcard/x)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+     $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     Wrong files returned from ShellFindFiles, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call ShellFindFiles, $(OUTPUT_DIR)/wildcard, *.bar)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_FOOBAR) $(X_Y_FOOBAR)), \</span>
<span class="line-added">+     Wrong files returned from ShellFindFiles, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call ShellFindFiles, $(OUTPUT_DIR)/wildcard, doo.*)), \</span>
<span class="line-added">+     $(A_B_DOOBAR), \</span>
<span class="line-added">+     Wrong files returned from ShellFindFiles, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call ShellFindFiles, $(OUTPUT_DIR)/wildcard, *.bar *.baz)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_FOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) \</span>
<span class="line-added">+     $(X_Y_FOOBAR) $(X_Y_FOOBAZ)), \</span>
<span class="line-added">+     Wrong files returned from ShellFindFiles, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ ################################################################################</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/a/b)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ)), \</span>
<span class="line-added">+     CacheFindFiles test 1, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call FillFindCache, $(OUTPUT_DIR)/wildcard/a/b)</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(CacheFindFiles_CACHED_DIRS), $(OUTPUT_DIR)/wildcard/a/b, \</span>
<span class="line-added">+     Wrong files in find cache dirs, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(CacheFindFiles_CACHED_FILES)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ)), \</span>
<span class="line-added">+     Wrong files in find cache files, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/a/b)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ)), \</span>
<span class="line-added">+     CacheFindFiles test 1, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/a)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) $(A_FOOBAR)), \</span>
<span class="line-added">+     CacheFindFiles test 2, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call FillFindCache, $(OUTPUT_DIR)/wildcard/a)</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(CacheFindFiles_CACHED_DIRS), \</span>
<span class="line-added">+     $(OUTPUT_DIR)/wildcard/a/b $(OUTPUT_DIR)/wildcard/a, \</span>
<span class="line-added">+     Wrong files in find cache dirs, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(CacheFindFiles_CACHED_FILES)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) $(A_FOOBAR)), \</span>
<span class="line-added">+     Wrong files in find cache files, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(words $(CacheFindFiles_CACHED_FILES)), 4, \</span>
<span class="line-added">+     Wrong files in find cache files &gt;$(CacheFindFiles_CACHED_FILES)&lt;, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/a)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) $(A_FOOBAR)), \</span>
<span class="line-added">+     CacheFindFiles test 2, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/x)), \</span>
<span class="line-added">+     $(sort $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     CacheFindFiles test 3, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call FillFindCache, $(OUTPUT_DIR)/wildcard/x)</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(CacheFindFiles_CACHED_DIRS), \</span>
<span class="line-added">+     $(OUTPUT_DIR)/wildcard/a/b $(OUTPUT_DIR)/wildcard/a $(OUTPUT_DIR)/wildcard/x, \</span>
<span class="line-added">+     Wrong files in find cache dirs, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(CacheFindFiles_CACHED_FILES)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) $(A_FOOBAR) \</span>
<span class="line-added">+         $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     Wrong files in find cache files, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(words $(CacheFindFiles_CACHED_FILES)), 7, \</span>
<span class="line-added">+     Wrong files in find cache files, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/x)), \</span>
<span class="line-added">+     $(sort $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     CacheFindFiles test 3, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ </span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(call CacheFindFiles, $(OUTPUT_DIR)/wildcard/x/y)), \</span>
<span class="line-added">+     $(sort $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     CacheFindFiles test 4, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call FillFindCache, $(OUTPUT_DIR)/wildcard/x/y)</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(CacheFindFiles_CACHED_DIRS), \</span>
<span class="line-added">+     $(OUTPUT_DIR)/wildcard/a/b $(OUTPUT_DIR)/wildcard/a $(OUTPUT_DIR)/wildcard/x, \</span>
<span class="line-added">+     Wrong files in find cache dirs, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(sort $(CacheFindFiles_CACHED_FILES)), \</span>
<span class="line-added">+     $(sort $(A_B_DOOBAR) $(A_B_FOOBAR) $(A_B_FOOBAZ) $(A_FOOBAR) \</span>
<span class="line-added">+         $(X_Y_FOOBAR) $(X_Y_FOOBAZ) $(X_Y_FOODOLLAR)), \</span>
<span class="line-added">+     Wrong files in find cache files, \</span>
<span class="line-added">+ )</span>
<span class="line-added">+ $(call AssertEquals, \</span>
<span class="line-added">+     $(words $(CacheFindFiles_CACHED_FILES)), 7, \</span>
<span class="line-added">+     Wrong files in find cache files, \</span>
<span class="line-added">+ )</span>
  
  ################################################################################
  
  all: $(TEST_TARGETS)
</pre>
<center><a href="TestMake.gmk.cdiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="UtilsForTests.gmk.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>