<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/unix/native/libjli/java_md_solinux.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../../share/native/libjli/java.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/java.base/unix/native/libjli/java_md_solinux.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
610         dlsym(libjvm, &quot;JNI_CreateJavaVM&quot;);
611     if (ifn-&gt;CreateJavaVM == NULL) {
612         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());
613         return JNI_FALSE;
614     }
615 
616     ifn-&gt;GetDefaultJavaVMInitArgs = (GetDefaultJavaVMInitArgs_t)
617         dlsym(libjvm, &quot;JNI_GetDefaultJavaVMInitArgs&quot;);
618     if (ifn-&gt;GetDefaultJavaVMInitArgs == NULL) {
619         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());
620         return JNI_FALSE;
621     }
622 
623     ifn-&gt;GetCreatedJavaVMs = (GetCreatedJavaVMs_t)
624         dlsym(libjvm, &quot;JNI_GetCreatedJavaVMs&quot;);
625     if (ifn-&gt;GetCreatedJavaVMs == NULL) {
626         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());
627         return JNI_FALSE;
628     }
629 









630     return JNI_TRUE;
631 }
632 
633 /*
634  * Compute the name of the executable
635  *
636  * In order to re-exec securely we need the absolute path of the
637  * executable. On Solaris getexecname(3c) may not return an absolute
638  * path so we use dladdr to get the filename of the executable and
639  * then use realpath to derive an absolute path. From Solaris 9
640  * onwards the filename returned in DL_info structure from dladdr is
641  * an absolute pathname so technically realpath isn&#39;t required.
642  * On Linux we read the executable name from /proc/self/exe.
643  * As a fallback, and for platforms other than Solaris and Linux,
644  * we use FindExecName to compute the executable name.
645  */
646 const char*
647 SetExecname(char **argv)
648 {
649     char* exec_path = NULL;
</pre>
</td>
<td>
<hr />
<pre>
610         dlsym(libjvm, &quot;JNI_CreateJavaVM&quot;);
611     if (ifn-&gt;CreateJavaVM == NULL) {
612         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());
613         return JNI_FALSE;
614     }
615 
616     ifn-&gt;GetDefaultJavaVMInitArgs = (GetDefaultJavaVMInitArgs_t)
617         dlsym(libjvm, &quot;JNI_GetDefaultJavaVMInitArgs&quot;);
618     if (ifn-&gt;GetDefaultJavaVMInitArgs == NULL) {
619         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());
620         return JNI_FALSE;
621     }
622 
623     ifn-&gt;GetCreatedJavaVMs = (GetCreatedJavaVMs_t)
624         dlsym(libjvm, &quot;JNI_GetCreatedJavaVMs&quot;);
625     if (ifn-&gt;GetCreatedJavaVMs == NULL) {
626         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());
627         return JNI_FALSE;
628     }
629 
<span class="line-added">630 #ifdef INCLUDE_TSAN</span>
<span class="line-added">631     ifn-&gt;TsanSymbolize = (TsanSymbolize_t)</span>
<span class="line-added">632         dlsym(libjvm, &quot;TsanSymbolize&quot;);</span>
<span class="line-added">633     if (ifn-&gt;TsanSymbolize == NULL) {</span>
<span class="line-added">634         JLI_ReportErrorMessage(DLL_ERROR2, jvmpath, dlerror());</span>
<span class="line-added">635         return JNI_FALSE;</span>
<span class="line-added">636     }</span>
<span class="line-added">637 #endif</span>
<span class="line-added">638 </span>
639     return JNI_TRUE;
640 }
641 
642 /*
643  * Compute the name of the executable
644  *
645  * In order to re-exec securely we need the absolute path of the
646  * executable. On Solaris getexecname(3c) may not return an absolute
647  * path so we use dladdr to get the filename of the executable and
648  * then use realpath to derive an absolute path. From Solaris 9
649  * onwards the filename returned in DL_info structure from dladdr is
650  * an absolute pathname so technically realpath isn&#39;t required.
651  * On Linux we read the executable name from /proc/self/exe.
652  * As a fallback, and for platforms other than Solaris and Linux,
653  * we use FindExecName to compute the executable name.
654  */
655 const char*
656 SetExecname(char **argv)
657 {
658     char* exec_path = NULL;
</pre>
</td>
</tr>
</table>
<center><a href="../../../share/native/libjli/java.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>