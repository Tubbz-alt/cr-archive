<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/classes/com/sun/tdk/jcov/runtime/JCovSESocketSaver.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="CollectDetect.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JCovServerSocketSaver.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/classes/com/sun/tdk/jcov/runtime/JCovSESocketSaver.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2014, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2014, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 41,14 ***</span>
      public static final String NETWORK_DEF_PROPERTIES_FILENAME = &quot;jcov_network_default.properties&quot;;
      public static final String PORT_PROPERTIES_NAME = &quot;port&quot;;
      public static final String HOST_PROPERTIES_NAME = &quot;host&quot;;
  
      static {
<span class="line-modified">! </span>
          File file = null;
          String urlString = &quot;&quot;;
<span class="line-modified">!         URL url = ClassLoader.getSystemClassLoader().getResource(JCovSESocketSaver.class.getCanonicalName().replaceAll(&quot;\\.&quot;, &quot;/&quot;) + &quot;.class&quot;);</span>
          if (url != null) {
              urlString = url.toString();
              if (urlString.contains(&quot;file:&quot;) &amp;&amp; urlString.contains(&quot;!&quot;)) {
                  urlString = urlString.substring(urlString.indexOf(&quot;file:&quot;), urlString.indexOf(&#39;!&#39;));
              }
<span class="line-new-header">--- 41,20 ---</span>
      public static final String NETWORK_DEF_PROPERTIES_FILENAME = &quot;jcov_network_default.properties&quot;;
      public static final String PORT_PROPERTIES_NAME = &quot;port&quot;;
      public static final String HOST_PROPERTIES_NAME = &quot;host&quot;;
  
      static {
<span class="line-modified">!         URL url = null;</span>
          File file = null;
          String urlString = &quot;&quot;;
<span class="line-modified">!         try {</span>
<span class="line-added">+             url = ClassLoader.getSystemClassLoader().getResource(</span>
<span class="line-added">+                     JCovSESocketSaver.class.</span>
<span class="line-added">+                             getCanonicalName().</span>
<span class="line-added">+                             replace(&#39;.&#39;, &#39;/&#39;) + &quot;.class&quot;);</span>
<span class="line-added">+         } catch( Exception ignore ) {</span>
<span class="line-added">+         }</span>
          if (url != null) {
              urlString = url.toString();
              if (urlString.contains(&quot;file:&quot;) &amp;&amp; urlString.contains(&quot;!&quot;)) {
                  urlString = urlString.substring(urlString.indexOf(&quot;file:&quot;), urlString.indexOf(&#39;!&#39;));
              }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 59,17 ***</span>
              } catch (Exception e) {
                  System.err.println(&quot;Error while finding &quot; + urlString + &quot; file: &quot; + e);
              }
          }
  
<span class="line-modified">!         if (file == null){</span>
<span class="line-modified">!             file = new File(System.getProperty(&quot;java.home&quot;)+File.separator + NETWORK_DEF_PROPERTIES_FILENAME);</span>
          }
  
          if (file != null &amp;&amp; file.exists()) {
  
<span class="line-modified">!             File defProperties = new File(file.getParent() + File.separator + NETWORK_DEF_PROPERTIES_FILENAME);</span>
  
              if (defProperties.exists()) {
  
                  Properties prop = new Properties();
  
<span class="line-new-header">--- 65,24 ---</span>
              } catch (Exception e) {
                  System.err.println(&quot;Error while finding &quot; + urlString + &quot; file: &quot; + e);
              }
          }
  
<span class="line-modified">!         if (file == null) {</span>
<span class="line-modified">!             try {</span>
<span class="line-added">+                 file = new File(System.getProperty(&quot;java.home&quot;) +</span>
<span class="line-added">+                         File.separator +</span>
<span class="line-added">+                         NETWORK_DEF_PROPERTIES_FILENAME);</span>
<span class="line-added">+             } catch( Exception ignore ) {</span>
<span class="line-added">+             }</span>
          }
  
          if (file != null &amp;&amp; file.exists()) {
  
<span class="line-modified">!             File defProperties = new File(file.getParent() +</span>
<span class="line-added">+                     File.separator +</span>
<span class="line-added">+                     NETWORK_DEF_PROPERTIES_FILENAME);</span>
  
              if (defProperties.exists()) {
  
                  Properties prop = new Properties();
  
</pre>
<center><a href="CollectDetect.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="JCovServerSocketSaver.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>