<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/javaStyleGuide.md</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../index.html" target="_top">index</a> next &gt;</center>    <h2>src/javaStyleGuide.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  55 Not using the name of the class as filename can be confusing. Also, unless the file is given explicitly to the compiler, the class it contains may not be resolved correctly.
  56 :::
  57 
  58 ### Special Characters
  59 ::: conventions
  60 - Apart from `LF` the only allowed white space character is Space (ASCII value 32). Note that this implies that other white space characters (in, for instance, string and character literals) must be written in escaped form.
  61 - `\&#39;`, `\&quot;`, `\\`, `\t`, `\b`, `\r`, `\f`, and `\n` should be preferred over corresponding octal (e.g. `\047`) or Unicode (e.g. `\u0027`) escaped characters.
  62 - Should there be a need to go against the above rules for the sake of testing, the test should generate the required source.
  63 :::
  64 
  65 ::: box
  66 [Motivation]{.boxheader}
  67 Having any white space character but space and `LF` in the source code can be a source of confusion.
  68 
  69 The short forms (e.g. `\t`) are commonly used and easier to recognize than the corresponding longer forms (`\011`, `\u0009`).
  70 :::
  71 
  72 ## Formatting
  73 ::: conventions
  74 - A Java source file should be structured as follows:
<span class="line-modified">  75   1. The copyright notice</span>
<span class="line-modified">  76   1. Package declaration</span>
<span class="line-modified">  77   1. Import statements</span>
<span class="line-modified">  78   1. Class declaration</span>
  79 - There may be only one top level class declaration per file.
  80 :::
  81 
  82 ### Copyright notice
  83 ::: conventions
  84 - All source files should have an appropriate copyright notice at the top of the file.
  85 
  86 - For files under Oracle copyright, the copyright notice must follow the standard wording and format. In particular the first two lines should be
  87 
  88   ~~~java
  89   /*
  90    * Copyright (c) 2011, Oracle and/or its affiliates. All rights reserved.
  91   ~~~
  92 
  93   or
  94 
  95   ~~~java
  96   /*
  97    * Copyright (c) 2011, 2015, Oracle and/or its affiliates. All rights reserved.
  98   ~~~
</pre>
<hr />
<pre>
 123 
 124 #### Wildcard Imports
 125 ::: conventions
 126 - Wildcard imports should in general not be used.
 127 - When importing a large number of closely-related classes (such as implementing a visitor over a tree with dozens of distinct “node” classes), a wildcard import may be used.
 128 - In any case, no more than one wildcard import per file should be used.
 129 :::
 130 
 131 ::: box
 132 [Motivation]{.boxheader}
 133 Wildcard imports makes it unclear what actually needs to be imported.
 134 
 135 Having more than one wildcard import makes the code fragile since adding a new class in one of the imported packages can introduce a name clash.
 136 
 137 An unused import gives a false impression of a dependency. Also, many IDEs list such import statements as warnings which clutters the list of problems.
 138 :::
 139 
 140 ### Class Structure
 141 ::: conventions
 142 - The recommended order of class members is the following:
<span class="line-modified"> 143   1. Fields</span>
<span class="line-modified"> 144   1. Constructors</span>
<span class="line-modified"> 145   1. Factory methods</span>
<span class="line-modified"> 146   1. Other Methods</span>
 147 - Related fields should be grouped together. Ordering fields primarily according to access modifiers or identifier is not required. The same applies to methods.
 148 - Nested types should be grouped at the top of the class, or else defined before first use.
 149 :::
 150 
 151 #### Order of Constructors and Overloaded Methods
 152 ::: conventions
 153 - Constructors and overloaded methods should be grouped together by functionality and ordered with increasing arity. This implies that delegation among these constructs flow downward in the code.
 154 - Constructors and overloaded methods should generally not be split apart by other members.
 155 :::
 156 
 157 ::: leftcol
 158 ::: box
 159 [Dos]{.boxheader .dos}
 160 
 161 ~~~java
 162 public HashSet() {
 163     this(DEFAULT_INITIAL_CAPACITY);
 164 }
 165 
 166 public HashSet(int capacity) {
</pre>
<hr />
<pre>
 192 void logValue(double d) {
 193     log(&quot;Double: %.2d&quot;, d);
 194 }
 195 
 196 void setValue(double d) {
 197     val = d;
 198 }
 199 ~~~
 200 
 201 :::
 202 :::
 203 
 204 ::: box
 205 [Motivation]{.boxheader}
 206 This order puts the most generally applicable versions first. Also, making sure delegation is always done downwards in the file makes the code easier to follow.
 207 :::
 208 
 209 ### Modifiers
 210 ::: conventions
 211 - Modifiers should go in the following order
<span class="line-modified"> 212   1. Access modifier (`public` / `private` / `protected`)</span>
<span class="line-modified"> 213   1. `abstract`</span>
<span class="line-modified"> 214   1. `static`</span>
<span class="line-modified"> 215   1. `final`</span>
<span class="line-modified"> 216   1. `transient`</span>
<span class="line-modified"> 217   1. `volatile`</span>
<span class="line-modified"> 218   1. `default`</span>
<span class="line-modified"> 219   1. `synchronized`</span>
<span class="line-modified"> 220   1. `native`</span>
<span class="line-modified"> 221   1. `strictfp`</span>
 222 - Modifiers should not be written out when they are implicit. For example, interface methods should neither be declared public nor abstract, and nested enums and interfaces should not be declared static.
 223 - Method parameters and local variables should not be declared final unless it improves readability or documents an actual design decision.
 224 - Fields should be declared final unless there is a compelling reason to make them mutable.
 225 :::
 226 
 227 ::: box
 228 [Motivation]{.boxheader}
 229 Writing out modifiers where they are implicit clutters the code and learning which modifiers are implicit where is easy.
 230 
 231 Although method parameters should typically not be mutated, consistently marking all parameters in every methods as `final` is an exaggeration.
 232 
 233 Making fields immutable where possible is good programming practice. Refer to *Effective Java, Item 15: Minimize Mutability* for details.
 234 :::
 235 
 236 ### Braces
 237 ::: conventions
 238 - Opening braces should be put on the end of the current line rather than on a line by its own.
 239 - There should be a new line in front of a closing brace unless the block is empty (see [Short Forms](#short-forms) below)
 240 - Braces are recommended even where the language makes them optional, such as single-line if and loop bodies.
 241   - If a block spans more than one line (including comments) it must have braces.
</pre>
<hr />
<pre>
1498  * &lt;blockquote&gt;&lt;pre&gt;
1499  *     List&lt;String&gt; names;
1500  * &lt;/pre&gt;&lt;/blockquote&gt;
1501  */
1502 ~~~
1503 
1504 :::
1505 :::
1506 
1507 For a complete Javadoc reference refer to &amp;nbsp;[How to Write Doc Comments for the Javadoc Tool](http://www.oracle.com/technetwork/articles/java/index-137868.html).
1508 
1509 ## When to reformat code
1510 ::: conventions
1511 - Do not reformat code in files unrelated to the current changeset, even if the code doesn’t adhere to the guidelines.
1512 - Minor cleanups in files that are already touched for other reasons are fine. Put the cleanups in a separate patch if you think it will simplify the review process. Large cleanups should always go in a separate changeset.
1513 :::
1514 
1515 ::: box
1516 [Motivation]{.boxheader}
1517 Cleaning up code that’s unrelated to the patch may…

1518 - Complicate the review of the patch in which case correctness may suffer
1519 - Run the risk of breaking existing code
1520 - Have a downstream impact, e.g. affect ports to other versions.
1521 - Trigger an unnecessary debate (perhaps the original formatting was intentional).
1522 :::
1523 
1524 ## Cases not covered
1525 ::: conventions
1526 - If some aspect is not covered by these guidelines one should fall back on the style of the surrounding code within the same file, within the package or within the project in that order.
1527 :::
1528 
1529 ::: {.NavBit}
1530 [« Previous](mailinglists.html) • [TOC](index.html) • [Next »](changePlanning.html)
1531 :::
</pre>
</td>
<td>
<hr />
<pre>
  55 Not using the name of the class as filename can be confusing. Also, unless the file is given explicitly to the compiler, the class it contains may not be resolved correctly.
  56 :::
  57 
  58 ### Special Characters
  59 ::: conventions
  60 - Apart from `LF` the only allowed white space character is Space (ASCII value 32). Note that this implies that other white space characters (in, for instance, string and character literals) must be written in escaped form.
  61 - `\&#39;`, `\&quot;`, `\\`, `\t`, `\b`, `\r`, `\f`, and `\n` should be preferred over corresponding octal (e.g. `\047`) or Unicode (e.g. `\u0027`) escaped characters.
  62 - Should there be a need to go against the above rules for the sake of testing, the test should generate the required source.
  63 :::
  64 
  65 ::: box
  66 [Motivation]{.boxheader}
  67 Having any white space character but space and `LF` in the source code can be a source of confusion.
  68 
  69 The short forms (e.g. `\t`) are commonly used and easier to recognize than the corresponding longer forms (`\011`, `\u0009`).
  70 :::
  71 
  72 ## Formatting
  73 ::: conventions
  74 - A Java source file should be structured as follows:
<span class="line-modified">  75   #. The copyright notice</span>
<span class="line-modified">  76   #. Package declaration</span>
<span class="line-modified">  77   #. Import statements</span>
<span class="line-modified">  78   #. Class declaration</span>
  79 - There may be only one top level class declaration per file.
  80 :::
  81 
  82 ### Copyright notice
  83 ::: conventions
  84 - All source files should have an appropriate copyright notice at the top of the file.
  85 
  86 - For files under Oracle copyright, the copyright notice must follow the standard wording and format. In particular the first two lines should be
  87 
  88   ~~~java
  89   /*
  90    * Copyright (c) 2011, Oracle and/or its affiliates. All rights reserved.
  91   ~~~
  92 
  93   or
  94 
  95   ~~~java
  96   /*
  97    * Copyright (c) 2011, 2015, Oracle and/or its affiliates. All rights reserved.
  98   ~~~
</pre>
<hr />
<pre>
 123 
 124 #### Wildcard Imports
 125 ::: conventions
 126 - Wildcard imports should in general not be used.
 127 - When importing a large number of closely-related classes (such as implementing a visitor over a tree with dozens of distinct “node” classes), a wildcard import may be used.
 128 - In any case, no more than one wildcard import per file should be used.
 129 :::
 130 
 131 ::: box
 132 [Motivation]{.boxheader}
 133 Wildcard imports makes it unclear what actually needs to be imported.
 134 
 135 Having more than one wildcard import makes the code fragile since adding a new class in one of the imported packages can introduce a name clash.
 136 
 137 An unused import gives a false impression of a dependency. Also, many IDEs list such import statements as warnings which clutters the list of problems.
 138 :::
 139 
 140 ### Class Structure
 141 ::: conventions
 142 - The recommended order of class members is the following:
<span class="line-modified"> 143   #. Fields</span>
<span class="line-modified"> 144   #. Constructors</span>
<span class="line-modified"> 145   #. Factory methods</span>
<span class="line-modified"> 146   #. Other Methods</span>
 147 - Related fields should be grouped together. Ordering fields primarily according to access modifiers or identifier is not required. The same applies to methods.
 148 - Nested types should be grouped at the top of the class, or else defined before first use.
 149 :::
 150 
 151 #### Order of Constructors and Overloaded Methods
 152 ::: conventions
 153 - Constructors and overloaded methods should be grouped together by functionality and ordered with increasing arity. This implies that delegation among these constructs flow downward in the code.
 154 - Constructors and overloaded methods should generally not be split apart by other members.
 155 :::
 156 
 157 ::: leftcol
 158 ::: box
 159 [Dos]{.boxheader .dos}
 160 
 161 ~~~java
 162 public HashSet() {
 163     this(DEFAULT_INITIAL_CAPACITY);
 164 }
 165 
 166 public HashSet(int capacity) {
</pre>
<hr />
<pre>
 192 void logValue(double d) {
 193     log(&quot;Double: %.2d&quot;, d);
 194 }
 195 
 196 void setValue(double d) {
 197     val = d;
 198 }
 199 ~~~
 200 
 201 :::
 202 :::
 203 
 204 ::: box
 205 [Motivation]{.boxheader}
 206 This order puts the most generally applicable versions first. Also, making sure delegation is always done downwards in the file makes the code easier to follow.
 207 :::
 208 
 209 ### Modifiers
 210 ::: conventions
 211 - Modifiers should go in the following order
<span class="line-modified"> 212   #. Access modifier (`public` / `private` / `protected`)</span>
<span class="line-modified"> 213   #. `abstract`</span>
<span class="line-modified"> 214   #. `static`</span>
<span class="line-modified"> 215   #. `final`</span>
<span class="line-modified"> 216   #. `transient`</span>
<span class="line-modified"> 217   #. `volatile`</span>
<span class="line-modified"> 218   #. `default`</span>
<span class="line-modified"> 219   #. `synchronized`</span>
<span class="line-modified"> 220   #. `native`</span>
<span class="line-modified"> 221   #. `strictfp`</span>
 222 - Modifiers should not be written out when they are implicit. For example, interface methods should neither be declared public nor abstract, and nested enums and interfaces should not be declared static.
 223 - Method parameters and local variables should not be declared final unless it improves readability or documents an actual design decision.
 224 - Fields should be declared final unless there is a compelling reason to make them mutable.
 225 :::
 226 
 227 ::: box
 228 [Motivation]{.boxheader}
 229 Writing out modifiers where they are implicit clutters the code and learning which modifiers are implicit where is easy.
 230 
 231 Although method parameters should typically not be mutated, consistently marking all parameters in every methods as `final` is an exaggeration.
 232 
 233 Making fields immutable where possible is good programming practice. Refer to *Effective Java, Item 15: Minimize Mutability* for details.
 234 :::
 235 
 236 ### Braces
 237 ::: conventions
 238 - Opening braces should be put on the end of the current line rather than on a line by its own.
 239 - There should be a new line in front of a closing brace unless the block is empty (see [Short Forms](#short-forms) below)
 240 - Braces are recommended even where the language makes them optional, such as single-line if and loop bodies.
 241   - If a block spans more than one line (including comments) it must have braces.
</pre>
<hr />
<pre>
1498  * &lt;blockquote&gt;&lt;pre&gt;
1499  *     List&lt;String&gt; names;
1500  * &lt;/pre&gt;&lt;/blockquote&gt;
1501  */
1502 ~~~
1503 
1504 :::
1505 :::
1506 
1507 For a complete Javadoc reference refer to &amp;nbsp;[How to Write Doc Comments for the Javadoc Tool](http://www.oracle.com/technetwork/articles/java/index-137868.html).
1508 
1509 ## When to reformat code
1510 ::: conventions
1511 - Do not reformat code in files unrelated to the current changeset, even if the code doesn’t adhere to the guidelines.
1512 - Minor cleanups in files that are already touched for other reasons are fine. Put the cleanups in a separate patch if you think it will simplify the review process. Large cleanups should always go in a separate changeset.
1513 :::
1514 
1515 ::: box
1516 [Motivation]{.boxheader}
1517 Cleaning up code that’s unrelated to the patch may…
<span class="line-added">1518 </span>
1519 - Complicate the review of the patch in which case correctness may suffer
1520 - Run the risk of breaking existing code
1521 - Have a downstream impact, e.g. affect ports to other versions.
1522 - Trigger an unnecessary debate (perhaps the original formatting was intentional).
1523 :::
1524 
1525 ## Cases not covered
1526 ::: conventions
1527 - If some aspect is not covered by these guidelines one should fall back on the style of the surrounding code within the same file, within the package or within the project in that order.
1528 :::
1529 
1530 ::: {.NavBit}
1531 [« Previous](mailinglists.html) • [TOC](index.html) • [Next »](changePlanning.html)
1532 :::
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>