<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/producingChangeset.md</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="hgHelp.md.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="repositories.md.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/producingChangeset.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 44,36 ***</span>
  Each repository in the forest is managed independently. After editing files in
  the individual cloned repositories of the forest, the `hg
  status` command may be used to see the changes in a single
  repository.
  
<span class="line-modified">! &gt;     $ hg root</span>
<span class="line-modified">! &gt;     /u/iris/sandbox/box</span>
<span class="line-modified">! &gt;     $ hg status</span>
<span class="line-modified">! &gt;     ? duke/images/DukeTubbingSmall.png</span>
<span class="line-modified">! &gt;     $ hg add duke/images/DukeTubbingSmall.png</span>
<span class="line-modified">! &gt;     $ hg status</span>
<span class="line-modified">! &gt;     A duke/images/DukeTubbingSmall.png</span>
  
  To see changes made to the repositories use _**`hg`**_ `status`:
  
<span class="line-modified">! &gt;     $ hg status</span>
<span class="line-modified">! &gt;     [.]</span>
<span class="line-modified">! &gt;     A duke/images/DukeTubbingSmall.png</span>
  
  In this example, the repository was previously cloned as described in
  [Cloning a Sandbox Repository](repositories.html#cloneSandbox). A new file
  `DukeTubbingSmall.png` was added to a new subdirectory.
  
  #### Formatting a Changeset Comment
  
  A single change is described by a block of text of the following form:
  
<span class="line-modified">! &gt;     &lt;bugid&gt;: &lt;synopsis-of-symptom&gt;</span>
<span class="line-modified">! &gt;     Summary: &lt;summary-of-code-change&gt;</span>
<span class="line-modified">! &gt;     Reviewed-by: &lt;reviewer&gt;+</span>
<span class="line-modified">! &gt;     Contributed-by: &lt;contributor-email&gt;</span>
  
  There may be more than one _bugid_ line, but there
  must be at least one.
  
  The _summary_ line is optional, but authors are
<span class="line-new-header">--- 44,36 ---</span>
  Each repository in the forest is managed independently. After editing files in
  the individual cloned repositories of the forest, the `hg
  status` command may be used to see the changes in a single
  repository.
  
<span class="line-modified">!     $ hg root</span>
<span class="line-modified">!     /u/iris/sandbox/box</span>
<span class="line-modified">!     $ hg status</span>
<span class="line-modified">!     ? duke/images/DukeTubbingSmall.png</span>
<span class="line-modified">!     $ hg add duke/images/DukeTubbingSmall.png</span>
<span class="line-modified">!     $ hg status</span>
<span class="line-modified">!     A duke/images/DukeTubbingSmall.png</span>
  
  To see changes made to the repositories use _**`hg`**_ `status`:
  
<span class="line-modified">!     $ hg status</span>
<span class="line-modified">!     [.]</span>
<span class="line-modified">!     A duke/images/DukeTubbingSmall.png</span>
  
  In this example, the repository was previously cloned as described in
  [Cloning a Sandbox Repository](repositories.html#cloneSandbox). A new file
  `DukeTubbingSmall.png` was added to a new subdirectory.
  
  #### Formatting a Changeset Comment
  
  A single change is described by a block of text of the following form:
  
<span class="line-modified">!     &lt;bugid&gt;: &lt;synopsis-of-symptom&gt;</span>
<span class="line-modified">!     Summary: &lt;summary-of-code-change&gt;</span>
<span class="line-modified">!     Reviewed-by: &lt;reviewer&gt;+</span>
<span class="line-modified">!     Contributed-by: &lt;contributor-email&gt;</span>
  
  There may be more than one _bugid_ line, but there
  must be at least one.
  
  The _summary_ line is optional, but authors are
</pre>
<hr />
<pre>
<span class="line-old-header">*** 94,14 ***</span>
  
  There will be exceptions for merge changesets, tag changesets, etc.
  
  Example:
  
<span class="line-modified">! &gt;     1234567: NPE thrown on FileInputStream(&quot;&quot;)</span>
<span class="line-modified">! &gt;     Summary: Rewrite precondition-checking code in io.c</span>
<span class="line-modified">! &gt;     Reviewed-by: mr</span>
<span class="line-modified">! &gt;     Contributed-by: Ben Bitdiddle &lt;ben at bits.org&gt;</span>
  
  If a changeset contains multiple unrelated changes (this is frowned upon, but
  may happen from time to time) then its comment will contain multiple blocks of
  the above form, separated by blank lines.
  
<span class="line-new-header">--- 94,14 ---</span>
  
  There will be exceptions for merge changesets, tag changesets, etc.
  
  Example:
  
<span class="line-modified">!     1234567: NPE thrown on FileInputStream(&quot;&quot;)</span>
<span class="line-modified">!     Summary: Rewrite precondition-checking code in io.c</span>
<span class="line-modified">!     Reviewed-by: mr</span>
<span class="line-modified">!     Contributed-by: Ben Bitdiddle &lt;ben at bits.org&gt;</span>
  
  If a changeset contains multiple unrelated changes (this is frowned upon, but
  may happen from time to time) then its comment will contain multiple blocks of
  the above form, separated by blank lines.
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 113,24 ***</span>
  #### Committing a Changeset
  
  The following commands commit all of the changes in a repository to a
  changeset.
  
<span class="line-modified">! &gt;     $ cat ../message</span>
<span class="line-modified">! &gt;     1111111: Missing Duke gif</span>
<span class="line-modified">! &gt;     Summary:  Add missing file</span>
<span class="line-modified">! &gt;     Reviewed-by: iag</span>
<span class="line-modified">! &gt;     $ hg commit -l ../message</span>
<span class="line-modified">! &gt;     $ hg toutgoing</span>
<span class="line-modified">! &gt;     [.]</span>
<span class="line-modified">! &gt;     comparing with http://hg.openjdk.java.net/sandbox/box</span>
<span class="line-modified">! &gt;     searching for changes</span>
<span class="line-modified">! &gt;     changeset:   23:fb12953f3a35</span>
<span class="line-modified">! &gt;     tag:         tip</span>
<span class="line-modified">! &gt;     user:        iris</span>
<span class="line-modified">! &gt;     date:        Wed Dec 12 21:05:59 2007 -0800</span>
<span class="line-modified">! &gt;     summary:     1111111: Missing Duke gif</span>
  
  ## Merging
  
  It is often necessary to merge local changes with those made in the parent
  repositories. The first step in a merge process is to retrieve (or pull) the
<span class="line-new-header">--- 113,24 ---</span>
  #### Committing a Changeset
  
  The following commands commit all of the changes in a repository to a
  changeset.
  
<span class="line-modified">!     $ cat ../message</span>
<span class="line-modified">!     1111111: Missing Duke gif</span>
<span class="line-modified">!     Summary:  Add missing file</span>
<span class="line-modified">!     Reviewed-by: iag</span>
<span class="line-modified">!     $ hg commit -l ../message</span>
<span class="line-modified">!     $ hg toutgoing</span>
<span class="line-modified">!     [.]</span>
<span class="line-modified">!     comparing with http://hg.openjdk.java.net/sandbox/box</span>
<span class="line-modified">!     searching for changes</span>
<span class="line-modified">!     changeset:   23:fb12953f3a35</span>
<span class="line-modified">!     tag:         tip</span>
<span class="line-modified">!     user:        iris</span>
<span class="line-modified">!     date:        Wed Dec 12 21:05:59 2007 -0800</span>
<span class="line-modified">!     summary:     1111111: Missing Duke gif</span>
  
  ## Merging
  
  It is often necessary to merge local changes with those made in the parent
  repositories. The first step in a merge process is to retrieve (or pull) the
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,15 ***</span>
  
  &gt; One way to merge the parent repository with the working set of files is to use
  &gt; _**`hg`**_ `pull` all by itself. This option allows merging off-line or at a
  &gt; later time.
  &gt;
<span class="line-modified">! &gt;&gt;     $ hg pull</span>
<span class="line-modified">! &gt;&gt;     [.]</span>
<span class="line-modified">! &gt;&gt;     pulling from http://hg.openjdk.java.net/sandbox/box</span>
<span class="line-modified">! &gt;&gt;     searching for changes</span>
<span class="line-modified">! &gt;&gt;     no changes found</span>
  &gt;
  &gt; In Mercurial, pulling changesets will not update or merge into the working set
  &gt; of files. To update the clone, run _**`hg`**_ `update`. If the update
  &gt; reports conflicts, run _**`hg`**_ `merge` to resolve them.
  
<span class="line-new-header">--- 146,15 ---</span>
  
  &gt; One way to merge the parent repository with the working set of files is to use
  &gt; _**`hg`**_ `pull` all by itself. This option allows merging off-line or at a
  &gt; later time.
  &gt;
<span class="line-modified">! &gt;     $ hg pull</span>
<span class="line-modified">! &gt;     [.]</span>
<span class="line-modified">! &gt;     pulling from http://hg.openjdk.java.net/sandbox/box</span>
<span class="line-modified">! &gt;     searching for changes</span>
<span class="line-modified">! &gt;     no changes found</span>
  &gt;
  &gt; In Mercurial, pulling changesets will not update or merge into the working set
  &gt; of files. To update the clone, run _**`hg`**_ `update`. If the update
  &gt; reports conflicts, run _**`hg`**_ `merge` to resolve them.
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 163,20 ***</span>
  &gt; Alternatively, use _**`hg`**_ `fetch` to pull the changes, update the
  &gt; working set files, and create simple merge changesets as necessary. The
  &gt; fetch extension is distributed with Mercurial but needs to be enabled. Edit
  &gt; the `.hgrc` to include the following entries:
  &gt;
<span class="line-modified">! &gt;&gt;     [extensions]</span>
<span class="line-modified">! &gt;&gt;     fetch=</span>
  &gt;
  &gt; Once the fetch extension has been enabled, _**`hg`**_ `fetch` may be invoked as follows:
  &gt;
<span class="line-modified">! &gt;&gt;     $ hg fetch</span>
<span class="line-modified">! &gt;&gt;     [.]</span>
<span class="line-modified">! &gt;&gt;     pulling from http://hg.openjdk.java.net/sandbox/box</span>
<span class="line-modified">! &gt;&gt;     searching for changes</span>
<span class="line-modified">! &gt;&gt;     no changes found</span>
  
  &gt; ---
  &gt; Actual file merging will be done with the selected Mercurial merging tool see
  &gt; [MergeProgram](https://www.selenic.com/mercurial/wiki/index.cgi/MergeProgram)
  &gt; for the details on how to define the selected merge tool in ` ~/.hgrc`.
<span class="line-new-header">--- 163,20 ---</span>
  &gt; Alternatively, use _**`hg`**_ `fetch` to pull the changes, update the
  &gt; working set files, and create simple merge changesets as necessary. The
  &gt; fetch extension is distributed with Mercurial but needs to be enabled. Edit
  &gt; the `.hgrc` to include the following entries:
  &gt;
<span class="line-modified">! &gt;     [extensions]</span>
<span class="line-modified">! &gt;     fetch=</span>
  &gt;
  &gt; Once the fetch extension has been enabled, _**`hg`**_ `fetch` may be invoked as follows:
  &gt;
<span class="line-modified">! &gt;     $ hg fetch</span>
<span class="line-modified">! &gt;     [.]</span>
<span class="line-modified">! &gt;     pulling from http://hg.openjdk.java.net/sandbox/box</span>
<span class="line-modified">! &gt;     searching for changes</span>
<span class="line-modified">! &gt;     no changes found</span>
  
  &gt; ---
  &gt; Actual file merging will be done with the selected Mercurial merging tool see
  &gt; [MergeProgram](https://www.selenic.com/mercurial/wiki/index.cgi/MergeProgram)
  &gt; for the details on how to define the selected merge tool in ` ~/.hgrc`.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 198,31 ***</span>
  2048 bits is recommended. While it is possible to use ssh without a passphrase,
  this is **strongly** discouraged. Empty or
  insecure passphrases may be reset using `ssh-keygen
  -p`; this does not change the keys.
  
<span class="line-modified">! &gt;     $ ssh-keygen -t rsa -b 4096</span>
<span class="line-modified">! &gt;     Enter file in which to save the key(/u/iris/.ssh/id_rsa):</span>
<span class="line-modified">! &gt;     Generating public/private rsa key pair.</span>
<span class="line-modified">! &gt;     Enter passphrase(empty for no passphrase):</span>
<span class="line-modified">! &gt;     Enter same passphrase again:</span>
<span class="line-modified">! &gt;     Your identification has been saved in /u/iris/.ssh/id_rsa.</span>
<span class="line-modified">! &gt;     Your public key has been saved in /u/iris/.ssh/id_rsa.pub.</span>
<span class="line-modified">! &gt;     The key fingerprint is:</span>
<span class="line-modified">! &gt;     md5 4096 c2:b7:00:e6:4b:da:ea:ec:32:30:f5:bd:12:26:04:83 iris@duke</span>
<span class="line-modified">! &gt;     The key&#39;s randomart image is:</span>
<span class="line-modified">! &gt;     +--[ RSA 4096]----+</span>
<span class="line-modified">! &gt;     |    E.=          |</span>
<span class="line-modified">! &gt;     |     . *         |</span>
<span class="line-modified">! &gt;     |      o .   .    |</span>
<span class="line-modified">! &gt;     |         + o     |</span>
<span class="line-modified">! &gt;     |        S + .    |</span>
<span class="line-modified">! &gt;     |       .   + .   |</span>
<span class="line-modified">! &gt;     |        + + +..  |</span>
<span class="line-modified">! &gt;     |       * . oo+.  |</span>
<span class="line-modified">! &gt;     |      o . .o..   |</span>
<span class="line-modified">! &gt;     +-----------------+</span>
  
  The `~/.ssh/id_rsa.pub` is a text file
  containing the public ssh key. This file should be mailed as an attachment
  along with the JDK username to
  [keys(at)openjdk.java.net](mailto:keys-at-openjdk.java.net).
<span class="line-new-header">--- 198,31 ---</span>
  2048 bits is recommended. While it is possible to use ssh without a passphrase,
  this is **strongly** discouraged. Empty or
  insecure passphrases may be reset using `ssh-keygen
  -p`; this does not change the keys.
  
<span class="line-modified">!     $ ssh-keygen -t rsa -b 4096</span>
<span class="line-modified">!     Enter file in which to save the key(/u/iris/.ssh/id_rsa):</span>
<span class="line-modified">!     Generating public/private rsa key pair.</span>
<span class="line-modified">!     Enter passphrase(empty for no passphrase):</span>
<span class="line-modified">!     Enter same passphrase again:</span>
<span class="line-modified">!     Your identification has been saved in /u/iris/.ssh/id_rsa.</span>
<span class="line-modified">!     Your public key has been saved in /u/iris/.ssh/id_rsa.pub.</span>
<span class="line-modified">!     The key fingerprint is:</span>
<span class="line-modified">!     md5 4096 c2:b7:00:e6:4b:da:ea:ec:32:30:f5:bd:12:26:04:83 iris@duke</span>
<span class="line-modified">!     The key&#39;s randomart image is:</span>
<span class="line-modified">!     +--[ RSA 4096]----+</span>
<span class="line-modified">!     |    E.=          |</span>
<span class="line-modified">!     |     . *         |</span>
<span class="line-modified">!     |      o .   .    |</span>
<span class="line-modified">!     |         + o     |</span>
<span class="line-modified">!     |        S + .    |</span>
<span class="line-modified">!     |       .   + .   |</span>
<span class="line-modified">!     |        + + +..  |</span>
<span class="line-modified">!     |       * . oo+.  |</span>
<span class="line-modified">!     |      o . .o..   |</span>
<span class="line-modified">!     +-----------------+</span>
  
  The `~/.ssh/id_rsa.pub` is a text file
  containing the public ssh key. This file should be mailed as an attachment
  along with the JDK username to
  [keys(at)openjdk.java.net](mailto:keys-at-openjdk.java.net).
</pre>
<hr />
<pre>
<span class="line-old-header">*** 232,12 ***</span>
  &gt; ---
  &gt; Users behind a SOCKS firewall can add a directive to the
  &gt; `~/.ssh/config` file to connect to the OpenJDK
  &gt; Mercurial server:
  &gt; 
<span class="line-modified">! &gt;&gt;     Host *.openjdk.java.net</span>
<span class="line-modified">! &gt;&gt;     ProxyCommand /usr/lib/ssh/ssh-socks5-proxy-connect -h [socks_proxy_address] %h %p</span>
  &gt;
  &gt; See the `ssh-socks5-proxy-connect` man page and
  &gt; `ssh-config` man page for more information. Other
  &gt; systems may require proxy access via other programs. Some Linux distributions
  &gt; provide the `corkscrew` package which provides ssh
<span class="line-new-header">--- 232,12 ---</span>
  &gt; ---
  &gt; Users behind a SOCKS firewall can add a directive to the
  &gt; `~/.ssh/config` file to connect to the OpenJDK
  &gt; Mercurial server:
  &gt; 
<span class="line-modified">! &gt;     Host *.openjdk.java.net</span>
<span class="line-modified">! &gt;     ProxyCommand /usr/lib/ssh/ssh-socks5-proxy-connect -h [socks_proxy_address] %h %p</span>
  &gt;
  &gt; See the `ssh-socks5-proxy-connect` man page and
  &gt; `ssh-config` man page for more information. Other
  &gt; systems may require proxy access via other programs. Some Linux distributions
  &gt; provide the `corkscrew` package which provides ssh
</pre>
<hr />
<pre>
<span class="line-old-header">*** 258,39 ***</span>
  * _Using SSH in multiple shells_
  
    To avoid having to constantly type in the passphrase, use the ssh-agent on your
    local client to cache your pashphrase:
  
<span class="line-modified">!   &gt;     $ eval `ssh-agent`</span>
<span class="line-modified">!   &gt;     Agent pid 17450</span>
<span class="line-modified">!   &gt;     $ ssh-add</span>
<span class="line-modified">!   &gt;     Enter passphrase for /u/iris/.ssh/id_rsa:</span>
<span class="line-modified">!   &gt;     Identity added: /u/iris/.ssh/id_rsa(/u/iris/.ssh/id_rsa)</span>
  
    The same ssh-agent process can be shared with multiple shells. There are
    various ways to do this. Bash users can accomplish this with the following code
    in `.bashrc`:
  
<span class="line-modified">!   &gt;     if [ &quot;$PS1&quot; -a -d $HOME/.ssh ]; then</span>
<span class="line-modified">!   &gt;       if [ &quot;x$SSH_AUTH_SOCK&quot; = x ]; then</span>
<span class="line-modified">!   &gt;         eval `ssh-agent | grep -v &#39;echo Agent pid&#39;`</span>
<span class="line-modified">!   &gt;         ssh-add</span>
<span class="line-modified">!   &gt;         trap &quot;echo Killing SSH agent $SSH_AGENT_PID; kill $SSH_AGENT_PID&quot; 0</span>
<span class="line-modified">!   &gt;       fi</span>
<span class="line-modified">!   &gt;     fi</span>
  
    For secure operation, only start an ssh-agent when needed and kill it off when
    the shell completes. Test this by running `ssh &#39;hostname&#39; echo
    hello` multiple times.
  
  * _Logging in without a password_
  
    To avoid needing to constantly type in the password, add the public key to the
    list of ssh authorized keys.
  
<span class="line-modified">!   &gt;     $ cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span>
<span class="line-modified">!   &gt;     $ chmod 600 ~/.ssh/authorized_keys</span>
  
  #### Setting the `default-push` Path to the Server Repositories
  
  &lt;!-- 
  #. Option 1: Add default-push path to every &lt;code&gt;.hg/hgrc&lt;/code&gt;
<span class="line-new-header">--- 258,39 ---</span>
  * _Using SSH in multiple shells_
  
    To avoid having to constantly type in the passphrase, use the ssh-agent on your
    local client to cache your pashphrase:
  
<span class="line-modified">!       $ eval `ssh-agent`</span>
<span class="line-modified">!       Agent pid 17450</span>
<span class="line-modified">!       $ ssh-add</span>
<span class="line-modified">!       Enter passphrase for /u/iris/.ssh/id_rsa:</span>
<span class="line-modified">!       Identity added: /u/iris/.ssh/id_rsa(/u/iris/.ssh/id_rsa)</span>
  
    The same ssh-agent process can be shared with multiple shells. There are
    various ways to do this. Bash users can accomplish this with the following code
    in `.bashrc`:
  
<span class="line-modified">!       if [ &quot;$PS1&quot; -a -d $HOME/.ssh ]; then</span>
<span class="line-modified">!         if [ &quot;x$SSH_AUTH_SOCK&quot; = x ]; then</span>
<span class="line-modified">!           eval `ssh-agent | grep -v &#39;echo Agent pid&#39;`</span>
<span class="line-modified">!           ssh-add</span>
<span class="line-modified">!           trap &quot;echo Killing SSH agent $SSH_AGENT_PID; kill $SSH_AGENT_PID&quot; 0</span>
<span class="line-modified">!         fi</span>
<span class="line-modified">!       fi</span>
  
    For secure operation, only start an ssh-agent when needed and kill it off when
    the shell completes. Test this by running `ssh &#39;hostname&#39; echo
    hello` multiple times.
  
  * _Logging in without a password_
  
    To avoid needing to constantly type in the password, add the public key to the
    list of ssh authorized keys.
  
<span class="line-modified">!       $ cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span>
<span class="line-modified">!       $ chmod 600 ~/.ssh/authorized_keys</span>
  
  #### Setting the `default-push` Path to the Server Repositories
  
  &lt;!-- 
  #. Option 1: Add default-push path to every &lt;code&gt;.hg/hgrc&lt;/code&gt;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 308,39 ***</span>
  path in every repository&#39;s `.hg/hgrc` file. The
  `.hg/hgrc` file in is not a managed file - it is
  private to the repository. The following example defines the &quot;default&quot; and
  &quot;default-push&quot; paths for clones of the jdk9/dev team repository.
  
<span class="line-modified">! &gt;     [paths]</span>
<span class="line-modified">! &gt;     default = http://hg.openjdk.java.net/jdk9/dev</span>
<span class="line-modified">! &gt;     default-push = ssh://&lt;JDK_username&gt;@hg.openjdk.java.net/jdk9/dev</span>
  
  Given a `JDK_username` this simple script will
  attempt to do this for all the repositories:
  
<span class="line-modified">! &gt;     #!/bin/sh</span>
<span class="line-modified">! &gt;     username=$1</span>
<span class="line-modified">! &gt;     hgdirs=&quot;`find . -type d -name .hg`&quot;</span>
<span class="line-modified">! &gt;     for i in ${hgdirs}; do</span>
<span class="line-modified">! &gt;       d=&quot;`dirname ${i}`&quot;</span>
<span class="line-modified">! &gt;       defpush=&quot;`(cd ${d} &amp;&amp; hg paths default-push 2&gt; /dev/null)`&quot;</span>
<span class="line-modified">! &gt;       if [ &quot;${defpush}&quot; = &quot;&quot; ] ; then</span>
<span class="line-modified">! &gt;         defpath=&quot;`(cd ${d} &amp;&amp; hg paths default 2&gt; /dev/null)`&quot;</span>
<span class="line-modified">! &gt;         if [ &quot;${defpath}&quot; != &quot;&quot; ] ; then</span>
<span class="line-modified">! &gt;           defpush=&quot;`echo ${defpath} | sed -e &#39;s@http://\([^/]*/[^/]*/[^/]*\)/\(.*\)@ssh://$username\@\1/\2@&#39;`&quot;</span>
<span class="line-modified">! &gt;           cp ${i}/hgrc ${i}/hgrc.orig</span>
<span class="line-modified">! &gt;           echo &quot;default-push = ${defpush}&quot; &gt;&gt; ${i}/hgrc</span>
<span class="line-modified">! &gt;           echo &quot;Added default-push: ${defpush}&quot;</span>
<span class="line-modified">! &gt;         fi</span>
<span class="line-modified">! &gt;       fi</span>
<span class="line-modified">! &gt;     done</span>
<span class="line-modified">! &gt;     for i in ${hgdirs}; do</span>
<span class="line-modified">! &gt;       d=&quot;`dirname ${i}`&quot;</span>
<span class="line-modified">! &gt;       echo &quot;(cd ${d} &amp;&amp; hg paths)&quot;</span>
<span class="line-modified">! &gt;       (cd ${d} &amp;&amp; hg paths)</span>
<span class="line-modified">! &gt;     done</span>
<span class="line-modified">! &gt;     exit 0</span>
  
  &lt;!--
  #. Option 2: Use the &lt;code&gt;defpath&lt;/code&gt; ExtensionAnother way to setup the default-push path is to use the Mercurial defpath
      extension, which is available in /java/jdk/lib/hgext/defpath.py. To enable
      this extension add the following to the &lt;code&gt;~/hgrc&lt;/code&gt; file:
<span class="line-new-header">--- 308,39 ---</span>
  path in every repository&#39;s `.hg/hgrc` file. The
  `.hg/hgrc` file in is not a managed file - it is
  private to the repository. The following example defines the &quot;default&quot; and
  &quot;default-push&quot; paths for clones of the jdk9/dev team repository.
  
<span class="line-modified">!     [paths]</span>
<span class="line-modified">!     default = http://hg.openjdk.java.net/jdk9/dev</span>
<span class="line-modified">!     default-push = ssh://&lt;JDK_username&gt;@hg.openjdk.java.net/jdk9/dev</span>
  
  Given a `JDK_username` this simple script will
  attempt to do this for all the repositories:
  
<span class="line-modified">!     #!/bin/sh</span>
<span class="line-modified">!     username=$1</span>
<span class="line-modified">!     hgdirs=&quot;`find . -type d -name .hg`&quot;</span>
<span class="line-modified">!     for i in ${hgdirs}; do</span>
<span class="line-modified">!       d=&quot;`dirname ${i}`&quot;</span>
<span class="line-modified">!       defpush=&quot;`(cd ${d} &amp;&amp; hg paths default-push 2&gt; /dev/null)`&quot;</span>
<span class="line-modified">!       if [ &quot;${defpush}&quot; = &quot;&quot; ] ; then</span>
<span class="line-modified">!         defpath=&quot;`(cd ${d} &amp;&amp; hg paths default 2&gt; /dev/null)`&quot;</span>
<span class="line-modified">!         if [ &quot;${defpath}&quot; != &quot;&quot; ] ; then</span>
<span class="line-modified">!           defpush=&quot;`echo ${defpath} | sed -e &#39;s@http://\([^/]*/[^/]*/[^/]*\)/\(.*\)@ssh://$username\@\1/\2@&#39;`&quot;</span>
<span class="line-modified">!           cp ${i}/hgrc ${i}/hgrc.orig</span>
<span class="line-modified">!           echo &quot;default-push = ${defpush}&quot; &gt;&gt; ${i}/hgrc</span>
<span class="line-modified">!           echo &quot;Added default-push: ${defpush}&quot;</span>
<span class="line-modified">!         fi</span>
<span class="line-modified">!       fi</span>
<span class="line-modified">!     done</span>
<span class="line-modified">!     for i in ${hgdirs}; do</span>
<span class="line-modified">!       d=&quot;`dirname ${i}`&quot;</span>
<span class="line-modified">!       echo &quot;(cd ${d} &amp;&amp; hg paths)&quot;</span>
<span class="line-modified">!       (cd ${d} &amp;&amp; hg paths)</span>
<span class="line-modified">!     done</span>
<span class="line-modified">!     exit 0</span>
  
  &lt;!--
  #. Option 2: Use the &lt;code&gt;defpath&lt;/code&gt; ExtensionAnother way to setup the default-push path is to use the Mercurial defpath
      extension, which is available in /java/jdk/lib/hgext/defpath.py. To enable
      this extension add the following to the &lt;code&gt;~/hgrc&lt;/code&gt; file:
</pre>
<hr />
<pre>
<span class="line-old-header">*** 370,11 ***</span>
  Most developers will only find a need to create changesets in one or two
  repositories. However, it is important that before any changesets are pushed,
  the corresponding forest pull and merge with the destination forest be
  performed; otherwise there is a risk of breaking the build.
  
<span class="line-modified">! &gt;     $ hg push</span>
  
  After the push has been accepted, an automatic e-mail notification will be sent
  to the [mailing list](https://mail.openjdk.java.net) associated with the
  repository. In most cases notifications
  are sent to the Project&#39;s _-dev_ mailing list. Some
<span class="line-new-header">--- 370,11 ---</span>
  Most developers will only find a need to create changesets in one or two
  repositories. However, it is important that before any changesets are pushed,
  the corresponding forest pull and merge with the destination forest be
  performed; otherwise there is a risk of breaking the build.
  
<span class="line-modified">!     $ hg push</span>
  
  After the push has been accepted, an automatic e-mail notification will be sent
  to the [mailing list](https://mail.openjdk.java.net) associated with the
  repository. In most cases notifications
  are sent to the Project&#39;s _-dev_ mailing list. Some
</pre>
<center><a href="hgHelp.md.cdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="repositories.md.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>