<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/producingChangeset.md</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="mailingLists.md.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="repositories.md.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/producingChangeset.md</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 13 required format of a changeset comment and describes how to commit files to a
 14 changeset.
 15 * [Merging](#merging) describes how to pull changes
 16 from a parent forest or clone and incorporate the changes into the current
 17 working set of files.
 18 * [Pushing](#pushing) covers configuring ssh, setting
 19 the `default-push` path, and pushing changesets.
 20 
 21 ## Setting a JDK User Name
 22 
 23 Ensure that _ui.username_ has a value in the
 24 `~/.hgrc` file as described in
 25 [Verifying the Configuration](repositories.html#verify).
 26 
 27 ## Creating
 28 
 29 The timing for creating a changeset is important. Creating the changeset long
 30 before it gets pushed into the parent repository may require complex merges. If
 31 a changeset is created before sufficient review or testing, a rollback may be
 32 required and a new changeset may be required to correct previous mistakes. The
<span class="line-modified"> 33 [mq extension](http://hgbook.red-bean.com/hgbookch12.html#x16-26500012) is</span>
 34 recommended for managing changes before they become
 35 committed to a changeset.
 36 
 37 In the examples below, the script
 38 `common/bin/hgforest.sh` can be used to apply the
 39 Mercurial command to all the repositories in the forest. So when you see
 40 _**`hg`**_, if you are dealing with one repository, just use
 41 &quot;`hg`&quot;, if it&#39;s a forest, use &quot;`sh common/bin/hgforest.sh`&quot;.
 42 
 43 
 44 Each repository in the forest is managed independently. After editing files in
 45 the individual cloned repositories of the forest, the `hg
 46 status` command may be used to see the changes in a single
 47 repository.
 48 
 49 &gt;     $ hg root
 50 &gt;     /u/iris/sandbox/box
 51 &gt;     $ hg status
 52 &gt;     ? duke/images/DukeTubbingSmall.png
 53 &gt;     $ hg add duke/images/DukeTubbingSmall.png
</pre>
<hr />
<pre>
119 &gt;     1111111: Missing Duke gif
120 &gt;     Summary:  Add missing file
121 &gt;     Reviewed-by: iag
122 &gt;     $ hg commit -l ../message
123 &gt;     $ hg toutgoing
124 &gt;     [.]
125 &gt;     comparing with http://hg.openjdk.java.net/sandbox/box
126 &gt;     searching for changes
127 &gt;     changeset:   23:fb12953f3a35
128 &gt;     tag:         tip
129 &gt;     user:        iris
130 &gt;     date:        Wed Dec 12 21:05:59 2007 -0800
131 &gt;     summary:     1111111: Missing Duke gif
132 
133 ## Merging
134 
135 It is often necessary to merge local changes with those made in the parent
136 repositories. The first step in a merge process is to retrieve (or pull) the
137 collection of changesets which have been pushed since the last merge or initial
138 clone. If there if there are merge conflicts, then they must be resolved.
<span class="line-modified">139 [Chapter 3](http://hgbook.red-bean.com/hgbookch3.html#x7-530003) of</span>
140 the Mercurial book contains detailed information on the
141 merging process.
142 
143 There are two basic ways to update the working set files in the repositories:
144 
145 Option 1: _**`hg`**_ `pull`
146 
147 &gt; One way to merge the parent repository with the working set of files is to use
148 &gt; _**`hg`**_ `pull` all by itself. This option allows merging off-line or at a
149 &gt; later time.
150 &gt;
151 &gt;&gt;     $ hg pull
152 &gt;&gt;     [.]
153 &gt;&gt;     pulling from http://hg.openjdk.java.net/sandbox/box
154 &gt;&gt;     searching for changes
155 &gt;&gt;     no changes found
156 &gt;
157 &gt; In Mercurial, pulling changesets will not update or merge into the working set
158 &gt; of files. To update the clone, run _**`hg`**_ `update`. If the update
159 &gt; reports conflicts, run _**`hg`**_ `merge` to resolve them.
</pre>
<hr />
<pre>
161 Option 2: _**`hg`**_ `fetch`
162 
163 &gt; Alternatively, use _**`hg`**_ `fetch` to pull the changes, update the
164 &gt; working set files, and create simple merge changesets as necessary. The
165 &gt; fetch extension is distributed with Mercurial but needs to be enabled. Edit
166 &gt; the `.hgrc` to include the following entries:
167 &gt;
168 &gt;&gt;     [extensions]
169 &gt;&gt;     fetch=
170 &gt;
171 &gt; Once the fetch extension has been enabled, _**`hg`**_ `fetch` may be invoked as follows:
172 &gt;
173 &gt;&gt;     $ hg fetch
174 &gt;&gt;     [.]
175 &gt;&gt;     pulling from http://hg.openjdk.java.net/sandbox/box
176 &gt;&gt;     searching for changes
177 &gt;&gt;     no changes found
178 
179 &gt; ---
180 &gt; Actual file merging will be done with the selected Mercurial merging tool see
<span class="line-modified">181 &gt; [MergeProgram](http://www.selenic.com/mercurial/wiki/index.cgi/MergeProgram)</span>
182 &gt; for the details on how to define the selected merge tool in ` ~/.hgrc`.
183 
184 &gt; ---
185 
186 ## Pushing
187 
188 In order to push changesets into the parent repository, some additional
189 configuration is required. The following sections describe the operations that
190 will be performed by users with push access.
191 
192 #### Generating an SSH Key
193 
194 All pushes require an ssh key which must be installed on the Mercurial server.
195 The `ssh-keygen` command generates an ssh key. The
196 `-b` option overrides the default number of bits
197 for the key. Allow a few minutes to generate a 4096 bit key; a key of at least
198 2048 bits is recommended. While it is possible to use ssh without a passphrase,
199 this is **strongly** discouraged. Empty or
200 insecure passphrases may be reset using `ssh-keygen
201 -p`; this does not change the keys.
</pre>
<hr />
<pre>
347 &lt;blockquote&gt;&lt;pre&gt;
348 [extensions]
349 defpath = /java/jdk/lib/hgext/defpath.py  # Or the pathname of a local copy
350 &lt;/pre&gt;&lt;/blockquote&gt;
351      The defpath extension actually adds two new Mercurial subcommands:
352     defpath to operate upon a single repository and fdefpath for an entire
353     forest. hg help defpath or hg help fdefpath will tell you more. For a
354     freshly cloned open/closed forest the command you probably want is
355 &lt;blockquote&gt;&lt;pre&gt;
356 $ hg fdefpath -dgv
357 &lt;/pre&gt;&lt;/blockquote&gt;
358      Be sure to try this with the -n flag first to see if it will do what
359     you actually expect. If your OpenJDK username differs from your Oracle
360     username then add -u name to the command line.
361      The defpath extension defines the default-push path, which is the path
362     that Mercurial uses by default in push operations.
363 --&gt;
364 
365 #### Pushing a Changeset
366 
<span class="line-modified">367 [Committers](http://openjdk.java.net/bylaws#committer)</span>
368 can use the _**hg**_ `push` command to propagate changesets into the repositories.
369 
370 Most developers will only find a need to create changesets in one or two
371 repositories. However, it is important that before any changesets are pushed,
372 the corresponding forest pull and merge with the destination forest be
373 performed; otherwise there is a risk of breaking the build.
374 
375 &gt;     $ hg push
376 
377 After the push has been accepted, an automatic e-mail notification will be sent
<span class="line-modified">378 to the [mailing list](http://mail.openjdk.java.net) associated with the</span>
379 repository. In most cases notifications
380 are sent to the Project&#39;s _-dev_ mailing list. Some
381 Projects with high traffic _-dev_ mailing lists use a
382 dedicated _-changes_ list for notifications.
383 
384 &gt; ---
385 &gt; Who has push access?
386 &gt;
<span class="line-modified">387 &gt; All of a Project&#39;s [Committers](http://openjdk.java.net/bylaws#committer)</span>
388 &gt; can push to all of the the Project&#39;s repositories.
389 &gt;
390 &gt; Some Projects may chose to restrict the set of Committers with push to key
391 &gt; repositories. For instance, JDK Release Projects restrict push access to MASTER
392 &gt; repositories to Committers who are either integrators or members of the Release
393 &gt; Engineering Team.
394 &gt;
395 &gt; Refer to the
396 &gt; [Nominating a Contributor or Author to be a Committer](../projects/index.html#project-committer)
397 &gt; section of the [Project](../projects/index.html) page for
398 &gt; information about becoming a Project Committer.
399 
400 &gt; ---
401 
402 ::: {.NavBit}
403 [« Previous](jckAcquisition.html) • [TOC](index.html) • [Next »](next.html)
404 :::
</pre>
</td>
<td>
<hr />
<pre>
 13 required format of a changeset comment and describes how to commit files to a
 14 changeset.
 15 * [Merging](#merging) describes how to pull changes
 16 from a parent forest or clone and incorporate the changes into the current
 17 working set of files.
 18 * [Pushing](#pushing) covers configuring ssh, setting
 19 the `default-push` path, and pushing changesets.
 20 
 21 ## Setting a JDK User Name
 22 
 23 Ensure that _ui.username_ has a value in the
 24 `~/.hgrc` file as described in
 25 [Verifying the Configuration](repositories.html#verify).
 26 
 27 ## Creating
 28 
 29 The timing for creating a changeset is important. Creating the changeset long
 30 before it gets pushed into the parent repository may require complex merges. If
 31 a changeset is created before sufficient review or testing, a rollback may be
 32 required and a new changeset may be required to correct previous mistakes. The
<span class="line-modified"> 33 [mq extension](https://hgbook.red-bean.com/hgbookch12.html#x16-26500012) is</span>
 34 recommended for managing changes before they become
 35 committed to a changeset.
 36 
 37 In the examples below, the script
 38 `common/bin/hgforest.sh` can be used to apply the
 39 Mercurial command to all the repositories in the forest. So when you see
 40 _**`hg`**_, if you are dealing with one repository, just use
 41 &quot;`hg`&quot;, if it&#39;s a forest, use &quot;`sh common/bin/hgforest.sh`&quot;.
 42 
 43 
 44 Each repository in the forest is managed independently. After editing files in
 45 the individual cloned repositories of the forest, the `hg
 46 status` command may be used to see the changes in a single
 47 repository.
 48 
 49 &gt;     $ hg root
 50 &gt;     /u/iris/sandbox/box
 51 &gt;     $ hg status
 52 &gt;     ? duke/images/DukeTubbingSmall.png
 53 &gt;     $ hg add duke/images/DukeTubbingSmall.png
</pre>
<hr />
<pre>
119 &gt;     1111111: Missing Duke gif
120 &gt;     Summary:  Add missing file
121 &gt;     Reviewed-by: iag
122 &gt;     $ hg commit -l ../message
123 &gt;     $ hg toutgoing
124 &gt;     [.]
125 &gt;     comparing with http://hg.openjdk.java.net/sandbox/box
126 &gt;     searching for changes
127 &gt;     changeset:   23:fb12953f3a35
128 &gt;     tag:         tip
129 &gt;     user:        iris
130 &gt;     date:        Wed Dec 12 21:05:59 2007 -0800
131 &gt;     summary:     1111111: Missing Duke gif
132 
133 ## Merging
134 
135 It is often necessary to merge local changes with those made in the parent
136 repositories. The first step in a merge process is to retrieve (or pull) the
137 collection of changesets which have been pushed since the last merge or initial
138 clone. If there if there are merge conflicts, then they must be resolved.
<span class="line-modified">139 [Chapter 3](https://hgbook.red-bean.com/hgbookch3.html#x7-530003) of</span>
140 the Mercurial book contains detailed information on the
141 merging process.
142 
143 There are two basic ways to update the working set files in the repositories:
144 
145 Option 1: _**`hg`**_ `pull`
146 
147 &gt; One way to merge the parent repository with the working set of files is to use
148 &gt; _**`hg`**_ `pull` all by itself. This option allows merging off-line or at a
149 &gt; later time.
150 &gt;
151 &gt;&gt;     $ hg pull
152 &gt;&gt;     [.]
153 &gt;&gt;     pulling from http://hg.openjdk.java.net/sandbox/box
154 &gt;&gt;     searching for changes
155 &gt;&gt;     no changes found
156 &gt;
157 &gt; In Mercurial, pulling changesets will not update or merge into the working set
158 &gt; of files. To update the clone, run _**`hg`**_ `update`. If the update
159 &gt; reports conflicts, run _**`hg`**_ `merge` to resolve them.
</pre>
<hr />
<pre>
161 Option 2: _**`hg`**_ `fetch`
162 
163 &gt; Alternatively, use _**`hg`**_ `fetch` to pull the changes, update the
164 &gt; working set files, and create simple merge changesets as necessary. The
165 &gt; fetch extension is distributed with Mercurial but needs to be enabled. Edit
166 &gt; the `.hgrc` to include the following entries:
167 &gt;
168 &gt;&gt;     [extensions]
169 &gt;&gt;     fetch=
170 &gt;
171 &gt; Once the fetch extension has been enabled, _**`hg`**_ `fetch` may be invoked as follows:
172 &gt;
173 &gt;&gt;     $ hg fetch
174 &gt;&gt;     [.]
175 &gt;&gt;     pulling from http://hg.openjdk.java.net/sandbox/box
176 &gt;&gt;     searching for changes
177 &gt;&gt;     no changes found
178 
179 &gt; ---
180 &gt; Actual file merging will be done with the selected Mercurial merging tool see
<span class="line-modified">181 &gt; [MergeProgram](https://www.selenic.com/mercurial/wiki/index.cgi/MergeProgram)</span>
182 &gt; for the details on how to define the selected merge tool in ` ~/.hgrc`.
183 
184 &gt; ---
185 
186 ## Pushing
187 
188 In order to push changesets into the parent repository, some additional
189 configuration is required. The following sections describe the operations that
190 will be performed by users with push access.
191 
192 #### Generating an SSH Key
193 
194 All pushes require an ssh key which must be installed on the Mercurial server.
195 The `ssh-keygen` command generates an ssh key. The
196 `-b` option overrides the default number of bits
197 for the key. Allow a few minutes to generate a 4096 bit key; a key of at least
198 2048 bits is recommended. While it is possible to use ssh without a passphrase,
199 this is **strongly** discouraged. Empty or
200 insecure passphrases may be reset using `ssh-keygen
201 -p`; this does not change the keys.
</pre>
<hr />
<pre>
347 &lt;blockquote&gt;&lt;pre&gt;
348 [extensions]
349 defpath = /java/jdk/lib/hgext/defpath.py  # Or the pathname of a local copy
350 &lt;/pre&gt;&lt;/blockquote&gt;
351      The defpath extension actually adds two new Mercurial subcommands:
352     defpath to operate upon a single repository and fdefpath for an entire
353     forest. hg help defpath or hg help fdefpath will tell you more. For a
354     freshly cloned open/closed forest the command you probably want is
355 &lt;blockquote&gt;&lt;pre&gt;
356 $ hg fdefpath -dgv
357 &lt;/pre&gt;&lt;/blockquote&gt;
358      Be sure to try this with the -n flag first to see if it will do what
359     you actually expect. If your OpenJDK username differs from your Oracle
360     username then add -u name to the command line.
361      The defpath extension defines the default-push path, which is the path
362     that Mercurial uses by default in push operations.
363 --&gt;
364 
365 #### Pushing a Changeset
366 
<span class="line-modified">367 [Committers](https://openjdk.java.net/bylaws#committer)</span>
368 can use the _**hg**_ `push` command to propagate changesets into the repositories.
369 
370 Most developers will only find a need to create changesets in one or two
371 repositories. However, it is important that before any changesets are pushed,
372 the corresponding forest pull and merge with the destination forest be
373 performed; otherwise there is a risk of breaking the build.
374 
375 &gt;     $ hg push
376 
377 After the push has been accepted, an automatic e-mail notification will be sent
<span class="line-modified">378 to the [mailing list](https://mail.openjdk.java.net) associated with the</span>
379 repository. In most cases notifications
380 are sent to the Project&#39;s _-dev_ mailing list. Some
381 Projects with high traffic _-dev_ mailing lists use a
382 dedicated _-changes_ list for notifications.
383 
384 &gt; ---
385 &gt; Who has push access?
386 &gt;
<span class="line-modified">387 &gt; All of a Project&#39;s [Committers](https://openjdk.java.net/bylaws#committer)</span>
388 &gt; can push to all of the the Project&#39;s repositories.
389 &gt;
390 &gt; Some Projects may chose to restrict the set of Committers with push to key
391 &gt; repositories. For instance, JDK Release Projects restrict push access to MASTER
392 &gt; repositories to Committers who are either integrators or members of the Release
393 &gt; Engineering Team.
394 &gt;
395 &gt; Refer to the
396 &gt; [Nominating a Contributor or Author to be a Committer](../projects/index.html#project-committer)
397 &gt; section of the [Project](../projects/index.html) page for
398 &gt; information about becoming a Project Committer.
399 
400 &gt; ---
401 
402 ::: {.NavBit}
403 [« Previous](jckAcquisition.html) • [TOC](index.html) • [Next »](next.html)
404 :::
</pre>
</td>
</tr>
</table>
<center><a href="mailingLists.md.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="repositories.md.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>