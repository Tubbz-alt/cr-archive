<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff application/org.openjdk.jmc.flightrecorder.flameview/src/main/java/org/openjdk/jmc/flightrecorder/flameview/views/FlameGraphView.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>application/org.openjdk.jmc.flightrecorder.flameview/src/main/java/org/openjdk/jmc/flightrecorder/flameview/views/FlameGraphView.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 396,11 ***</span>
  	@Override
  	public void selectionChanged(IWorkbenchPart part, ISelection selection) {
  		if (selection instanceof IStructuredSelection) {
  			Object first = ((IStructuredSelection) selection).getFirstElement();
  			IItemCollection items = AdapterUtil.getAdapter(first, IItemCollection.class);
<span class="line-modified">! 			if (items != null &amp;&amp; !items.equals(currentItems)) {</span>
  				setItems(items);
  			}
  		}
  	}
  
<span class="line-new-header">--- 396,13 ---</span>
  	@Override
  	public void selectionChanged(IWorkbenchPart part, ISelection selection) {
  		if (selection instanceof IStructuredSelection) {
  			Object first = ((IStructuredSelection) selection).getFirstElement();
  			IItemCollection items = AdapterUtil.getAdapter(first, IItemCollection.class);
<span class="line-modified">! 			if (items == null) {</span>
<span class="line-added">+ 				setItems(ItemCollectionToolkit.build(Stream.empty()));</span>
<span class="line-added">+ 			} else if (!items.equals(currentItems)) {</span>
  				setItems(items);
  			}
  		}
  	}
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 412,10 ***</span>
<span class="line-new-header">--- 414,11 ---</span>
  
  	private void rebuildModel() {
  		if (modelCalculationActive.get()) {
  			modelCalculationActive.set(false);
  		}
<span class="line-added">+ </span>
  		final CompletableFuture&lt;ModelsContainer&gt; currentModelCalculator = getModelPreparer(createStacktraceModel(),
  				true);
  		currentModelCalculator.thenAcceptAsync(this::setModel, DisplayToolkit.inDisplayThread())
  				.exceptionally(FlameGraphView::handleModelBuildException);
  	}
</pre>
<hr />
<pre>
<span class="line-old-header">*** 446,13 ***</span>
  		}, MODEL_EXECUTOR);
  	}
  
  	private void setModel(ModelsContainer container) {
  		// Check that the models are prepared and up to date 
<span class="line-modified">! 		if (container.isReady() &amp;&amp; container.isEqualStacktraceModel(createStacktraceModel()) &amp;&amp; !browser.isDisposed()) {</span>
  			setViewerInput(container.root());
<span class="line-modified">! 		}</span>
  	}
  
  	private void setViewerInput(TraceNode root) {
  		Stream.of(exportActions).forEach((action) -&gt; action.setEnabled(false));
  		browser.setText(HTML_PAGE);
<span class="line-new-header">--- 449,13 ---</span>
  		}, MODEL_EXECUTOR);
  	}
  
  	private void setModel(ModelsContainer container) {
  		// Check that the models are prepared and up to date 
<span class="line-modified">! 		if (container.isReady() &amp;&amp; !browser.isDisposed() &amp;&amp; container.isEqualStacktraceModel(createStacktraceModel())) {</span>
  			setViewerInput(container.root());
<span class="line-modified">! 		} </span>
  	}
  
  	private void setViewerInput(TraceNode root) {
  		Stream.of(exportActions).forEach((action) -&gt; action.setEnabled(false));
  		browser.setText(HTML_PAGE);
</pre>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>