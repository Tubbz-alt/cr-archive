<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff agent/src/main/java/org/openjdk/jmc/agent/jmx/AgentManagementFactory.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="AgentController.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/jmc/agent/test/TestDefineEventProbes.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>agent/src/main/java/org/openjdk/jmc/agent/jmx/AgentManagementFactory.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
33 package org.openjdk.jmc.agent.jmx;
34 
35 import java.lang.instrument.Instrumentation;
36 import java.lang.management.ManagementFactory;
37 import java.util.logging.Level;
38 import java.util.logging.Logger;
39 
40 import javax.management.InstanceAlreadyExistsException;
41 import javax.management.MBeanException;
42 import javax.management.MalformedObjectNameException;
43 import javax.management.NotCompliantMBeanException;
44 import javax.management.ObjectName;
45 
46 import org.openjdk.jmc.agent.TransformRegistry;
47 
48 public final class AgentManagementFactory {
49 	private static final String AGENT_OBJECT_NAME = &quot;org.openjdk.jmc.jfr.agent:type=AgentController&quot;; //$NON-NLS-1$
50 
51 	private static AgentController agentControllerMBean;
52 
<span class="line-modified">53 	public static AgentControllerMBean getAgentControllerBean() {</span>
54 		return agentControllerMBean;
55 	}
56 
57 	public static void createAndRegisterAgentControllerMBean(
58 		Instrumentation instrumentation, TransformRegistry registry) {
59 		agentControllerMBean = new AgentController(instrumentation, registry);
60 		try {
61 			ManagementFactory.getPlatformMBeanServer().registerMBean(agentControllerMBean,
62 					getObjectName(AGENT_OBJECT_NAME));
63 		} catch (InstanceAlreadyExistsException | NotCompliantMBeanException | MBeanException e) {
64 			Logger.getLogger(AgentManagementFactory.class.getName()).log(Level.SEVERE, &quot;Failed to register Tank MBean&quot;, //$NON-NLS-1$
65 					e);
66 		}
67 	}
68 
69 	private static ObjectName getObjectName(String objectName) {
70 		try {
71 			return new ObjectName(objectName);
72 		} catch (MalformedObjectNameException e) {
73 			// Will never feed it malformed ObjectNames
</pre>
</td>
<td>
<hr />
<pre>
33 package org.openjdk.jmc.agent.jmx;
34 
35 import java.lang.instrument.Instrumentation;
36 import java.lang.management.ManagementFactory;
37 import java.util.logging.Level;
38 import java.util.logging.Logger;
39 
40 import javax.management.InstanceAlreadyExistsException;
41 import javax.management.MBeanException;
42 import javax.management.MalformedObjectNameException;
43 import javax.management.NotCompliantMBeanException;
44 import javax.management.ObjectName;
45 
46 import org.openjdk.jmc.agent.TransformRegistry;
47 
48 public final class AgentManagementFactory {
49 	private static final String AGENT_OBJECT_NAME = &quot;org.openjdk.jmc.jfr.agent:type=AgentController&quot;; //$NON-NLS-1$
50 
51 	private static AgentController agentControllerMBean;
52 
<span class="line-modified">53 	public static AgentControllerMXBean getAgentControllerBean() {</span>
54 		return agentControllerMBean;
55 	}
56 
57 	public static void createAndRegisterAgentControllerMBean(
58 		Instrumentation instrumentation, TransformRegistry registry) {
59 		agentControllerMBean = new AgentController(instrumentation, registry);
60 		try {
61 			ManagementFactory.getPlatformMBeanServer().registerMBean(agentControllerMBean,
62 					getObjectName(AGENT_OBJECT_NAME));
63 		} catch (InstanceAlreadyExistsException | NotCompliantMBeanException | MBeanException e) {
64 			Logger.getLogger(AgentManagementFactory.class.getName()).log(Level.SEVERE, &quot;Failed to register Tank MBean&quot;, //$NON-NLS-1$
65 					e);
66 		}
67 	}
68 
69 	private static ObjectName getObjectName(String objectName) {
70 		try {
71 			return new ObjectName(objectName);
72 		} catch (MalformedObjectNameException e) {
73 			// Will never feed it malformed ObjectNames
</pre>
</td>
</tr>
</table>
<center><a href="AgentController.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/jmc/agent/test/TestDefineEventProbes.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>