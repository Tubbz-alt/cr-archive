<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff application/org.openjdk.jmc.alert/src/main/java/org/openjdk/jmc/alert/AlertPlugin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../org.openjdk.jmc.browser/build.properties.cdiff.html" target="_top">next &gt;</a></center>    <h2>application/org.openjdk.jmc.alert/src/main/java/org/openjdk/jmc/alert/AlertPlugin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 41,10 ***</span>
<span class="line-new-header">--- 41,11 ---</span>
  import org.eclipse.osgi.util.NLS;
  import org.eclipse.swt.SWT;
  import org.eclipse.swt.graphics.Image;
  import org.eclipse.swt.widgets.Display;
  import org.eclipse.swt.widgets.Shell;
<span class="line-added">+ import org.eclipse.ui.PlatformUI;</span>
  import org.openjdk.jmc.rjmx.IConnectionHandle;
  import org.openjdk.jmc.rjmx.triggers.TriggerEvent;
  import org.openjdk.jmc.rjmx.triggers.TriggerRule;
  import org.openjdk.jmc.ui.MCAbstractUIPlugin;
  import org.openjdk.jmc.ui.UIPlugin;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 118,11 ***</span>
  		if (UIPlugin.getDefault().getTrayManager() != null) {
  			final String message = createTrayMessage(ao);
  			final String title = Messages.AlertPlugin_TRIGGER_ALERT_TEXT;
  			final int style = SWT.BALLOON | SWT.ICON_WARNING;
  
<span class="line-modified">! 			DisplayToolkit.safeAsyncExec(getDefault().getWorkbench().getDisplay(), new Runnable() {</span>
  				@Override
  				public void run() {
  					UIPlugin.getDefault().getTrayManager().showTooltip(title, message, style);
  				}
  			});
<span class="line-new-header">--- 119,11 ---</span>
  		if (UIPlugin.getDefault().getTrayManager() != null) {
  			final String message = createTrayMessage(ao);
  			final String title = Messages.AlertPlugin_TRIGGER_ALERT_TEXT;
  			final int style = SWT.BALLOON | SWT.ICON_WARNING;
  
<span class="line-modified">! 			DisplayToolkit.safeAsyncExec(PlatformUI.getWorkbench().getDisplay(), new Runnable() {</span>
  				@Override
  				public void run() {
  					UIPlugin.getDefault().getTrayManager().showTooltip(title, message, style);
  				}
  			});
</pre>
<hr />
<pre>
<span class="line-old-header">*** 177,14 ***</span>
  		return getPreferenceStore().getBoolean(PREF_KEY_POPUP);
  	}
  
  	public void showDialog(boolean alwaysShow) {
  		if (getPopup() || alwaysShow || hasDialog()) {
<span class="line-modified">! 			DisplayToolkit.safeAsyncExec(getDefault().getWorkbench().getDisplay(), new Runnable() {</span>
  				@Override
  				public void run() {
<span class="line-modified">! 					Display display = getDefault().getWorkbench().getDisplay();</span>
  					Shell shell = display.getActiveShell();
  					if (shell != null &amp;&amp; !shell.isDisposed()) {
  						if (!hasDialog()) {
  							dialog = createDialog(shell);
  						}
<span class="line-new-header">--- 178,14 ---</span>
  		return getPreferenceStore().getBoolean(PREF_KEY_POPUP);
  	}
  
  	public void showDialog(boolean alwaysShow) {
  		if (getPopup() || alwaysShow || hasDialog()) {
<span class="line-modified">! 			DisplayToolkit.safeAsyncExec(PlatformUI.getWorkbench().getDisplay(), new Runnable() {</span>
  				@Override
  				public void run() {
<span class="line-modified">! 					Display display = PlatformUI.getWorkbench().getDisplay();</span>
  					Shell shell = display.getActiveShell();
  					if (shell != null &amp;&amp; !shell.isDisposed()) {
  						if (!hasDialog()) {
  							dialog = createDialog(shell);
  						}
</pre>
<hr />
<pre>
<span class="line-old-header">*** 210,11 ***</span>
  		}
  		return true;
  	}
  
  	public static AlertDialog createDialog(Shell shell) {
<span class="line-modified">! 		Display display = getDefault().getWorkbench().getDisplay();</span>
  		if (display != null &amp;&amp; !display.isDisposed() &amp;&amp; display.getActiveShell() != null
  				&amp;&amp; !display.getActiveShell().isDisposed()) {
  			return new AlertDialog(display.getActiveShell());
  		} else {
  			return null;
<span class="line-new-header">--- 211,11 ---</span>
  		}
  		return true;
  	}
  
  	public static AlertDialog createDialog(Shell shell) {
<span class="line-modified">! 		Display display = PlatformUI.getWorkbench().getDisplay();</span>
  		if (display != null &amp;&amp; !display.isDisposed() &amp;&amp; display.getActiveShell() != null
  				&amp;&amp; !display.getActiveShell().isDisposed()) {
  			return new AlertDialog(display.getActiveShell());
  		} else {
  			return null;
</pre>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../org.openjdk.jmc.browser/build.properties.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>