<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/org.openjdk.jmc.ui/src/main/java/org/openjdk/jmc/ui/formpage/commands/internal/ContextLookup.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../CoreImages.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../misc/ImageDescriptorAdapterFactory.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>application/org.openjdk.jmc.ui/src/main/java/org/openjdk/jmc/ui/formpage/commands/internal/ContextLookup.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
21  * 3. Neither the name of the copyright holder nor the names of its contributors may be used to
22  * endorse or promote products derived from this software without specific prior written permission.
23  * 
24  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR
25  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
26  * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
27  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
28  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
29  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
30  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
31  * WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
32  */
33 package org.openjdk.jmc.ui.formpage.commands.internal;
34 
35 import java.io.PrintStream;
36 
37 import org.eclipse.ui.IEditorPart;
38 import org.eclipse.ui.IWorkbenchPage;
39 import org.eclipse.ui.IWorkbenchPart;
40 import org.eclipse.ui.IWorkbenchWindow;

41 import org.eclipse.ui.forms.editor.FormEditor;
42 import org.eclipse.ui.forms.editor.IFormPage;
43 
<span class="line-removed">44 import org.openjdk.jmc.ui.UIPlugin;</span>
<span class="line-removed">45 </span>
46 public class ContextLookup {
47 	public static Object getContext(PrintStream out) {
48 		IWorkbenchPart p = getActiveEditor();
49 		if (p instanceof IFormPage) {
50 			return ((IFormPage) p).getPartControl();
51 		}
52 		return null;
53 	}
54 
55 	final static IEditorPart getActiveMainEditor() {
<span class="line-modified">56 		IWorkbenchWindow ww = UIPlugin.getDefault().getWorkbench().getActiveWorkbenchWindow();</span>
57 		if (ww != null) {
58 			IWorkbenchPage wp = ww.getActivePage();
59 			if (wp == null) {
60 				return null;
61 			}
62 			return wp.getActiveEditor();
63 		}
64 		return null;
65 	}
66 
67 	final static IEditorPart getActiveEditor() {
68 		IEditorPart part = getActiveMainEditor();
69 
70 		if (part instanceof FormEditor) {
71 			FormEditor mpep = (FormEditor) part;
72 			return mpep.getActiveEditor();
73 		}
74 		return null;
75 	}
76 }
</pre>
</td>
<td>
<hr />
<pre>
21  * 3. Neither the name of the copyright holder nor the names of its contributors may be used to
22  * endorse or promote products derived from this software without specific prior written permission.
23  * 
24  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR
25  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
26  * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
27  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
28  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
29  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
30  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
31  * WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
32  */
33 package org.openjdk.jmc.ui.formpage.commands.internal;
34 
35 import java.io.PrintStream;
36 
37 import org.eclipse.ui.IEditorPart;
38 import org.eclipse.ui.IWorkbenchPage;
39 import org.eclipse.ui.IWorkbenchPart;
40 import org.eclipse.ui.IWorkbenchWindow;
<span class="line-added">41 import org.eclipse.ui.PlatformUI;</span>
42 import org.eclipse.ui.forms.editor.FormEditor;
43 import org.eclipse.ui.forms.editor.IFormPage;
44 


45 public class ContextLookup {
46 	public static Object getContext(PrintStream out) {
47 		IWorkbenchPart p = getActiveEditor();
48 		if (p instanceof IFormPage) {
49 			return ((IFormPage) p).getPartControl();
50 		}
51 		return null;
52 	}
53 
54 	final static IEditorPart getActiveMainEditor() {
<span class="line-modified">55 		IWorkbenchWindow ww = PlatformUI.getWorkbench().getActiveWorkbenchWindow();</span>
56 		if (ww != null) {
57 			IWorkbenchPage wp = ww.getActivePage();
58 			if (wp == null) {
59 				return null;
60 			}
61 			return wp.getActiveEditor();
62 		}
63 		return null;
64 	}
65 
66 	final static IEditorPart getActiveEditor() {
67 		IEditorPart part = getActiveMainEditor();
68 
69 		if (part instanceof FormEditor) {
70 			FormEditor mpep = (FormEditor) part;
71 			return mpep.getActiveEditor();
72 		}
73 		return null;
74 	}
75 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../CoreImages.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../misc/ImageDescriptorAdapterFactory.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>