<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/org.openjdk.jmc.flightrecorder.ui/src/main/java/org/openjdk/jmc/flightrecorder/ui/common/LabeledPageFactory.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ItemList.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../overview/ResultReportUi.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>application/org.openjdk.jmc.flightrecorder.ui/src/main/java/org/openjdk/jmc/flightrecorder/ui/common/LabeledPageFactory.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 59 	public String getName(IState state) {
 60 		String name = state.getAttribute(ATTRIBUTE_NAME);
 61 		return name != null ? name : getDefaultName(state);
 62 	}
 63 
 64 	protected String getDefaultName(IState state) {
 65 		return Messages.PAGE_UNNAMED;
 66 	}
 67 
 68 	@Override
 69 	public String getDescription(IState state) {
 70 		return state.getAttribute(ATTRIBUTE_DESCRIPTION);
 71 	}
 72 
 73 	@Override
 74 	public ImageDescriptor getImageDescriptor(IState state) {
 75 		String iconStr = state.getAttribute(ATTRIBUTE_ICON);
 76 		if (iconStr != null) {
 77 			byte[] pngData = Base64.getDecoder().decode(iconStr);
 78 			try {
<span class="line-modified"> 79 				return ImageDescriptor.createFromImageData(new ImageData(new ByteArrayInputStream(pngData)));</span>

 80 			} catch (Exception e) {
 81 				FlightRecorderUI.getDefault().getLogger().log(Level.WARNING,
 82 						&quot;Could not load icon for page: &quot; + getName(state), e); //$NON-NLS-1$
 83 			}
 84 		}
 85 		return getDefaultImageDescriptor(state);
 86 	}
 87 
 88 	protected ImageDescriptor getDefaultImageDescriptor(IState state) {
 89 		return CoreImages.HELP;
 90 	}
 91 
 92 	public static void writeLabel(IWritableState to, String name, String description, ImageDescriptor image) {
 93 		to.putString(ATTRIBUTE_NAME, name);
 94 		to.putString(ATTRIBUTE_DESCRIPTION, description);
 95 		if (image != null) {
 96 			try {
 97 				ImageLoader loader = new ImageLoader();
 98 				ByteArrayOutputStream out = new ByteArrayOutputStream();
<span class="line-modified"> 99 				loader.data = new ImageData[] {image.getImageData()};</span>
100 				loader.save(out, SWT.IMAGE_PNG);
101 				String iconStr = Base64.getEncoder().encodeToString(out.toByteArray());
102 				to.putString(LabeledPageFactory.ATTRIBUTE_ICON, iconStr);
103 			} catch (Exception e) {
104 				FlightRecorderUI.getDefault().getLogger().log(Level.WARNING, &quot;Could not persist icon&quot;, e); //$NON-NLS-1$
105 			}
106 		}
107 	}
108 
109 }
</pre>
</td>
<td>
<hr />
<pre>
 59 	public String getName(IState state) {
 60 		String name = state.getAttribute(ATTRIBUTE_NAME);
 61 		return name != null ? name : getDefaultName(state);
 62 	}
 63 
 64 	protected String getDefaultName(IState state) {
 65 		return Messages.PAGE_UNNAMED;
 66 	}
 67 
 68 	@Override
 69 	public String getDescription(IState state) {
 70 		return state.getAttribute(ATTRIBUTE_DESCRIPTION);
 71 	}
 72 
 73 	@Override
 74 	public ImageDescriptor getImageDescriptor(IState state) {
 75 		String iconStr = state.getAttribute(ATTRIBUTE_ICON);
 76 		if (iconStr != null) {
 77 			byte[] pngData = Base64.getDecoder().decode(iconStr);
 78 			try {
<span class="line-modified"> 79 				return ImageDescriptor</span>
<span class="line-added"> 80 						.createFromImageDataProvider((zoom) -&gt; new ImageData(new ByteArrayInputStream(pngData)));</span>
 81 			} catch (Exception e) {
 82 				FlightRecorderUI.getDefault().getLogger().log(Level.WARNING,
 83 						&quot;Could not load icon for page: &quot; + getName(state), e); //$NON-NLS-1$
 84 			}
 85 		}
 86 		return getDefaultImageDescriptor(state);
 87 	}
 88 
 89 	protected ImageDescriptor getDefaultImageDescriptor(IState state) {
 90 		return CoreImages.HELP;
 91 	}
 92 
 93 	public static void writeLabel(IWritableState to, String name, String description, ImageDescriptor image) {
 94 		to.putString(ATTRIBUTE_NAME, name);
 95 		to.putString(ATTRIBUTE_DESCRIPTION, description);
 96 		if (image != null) {
 97 			try {
 98 				ImageLoader loader = new ImageLoader();
 99 				ByteArrayOutputStream out = new ByteArrayOutputStream();
<span class="line-modified">100 				loader.data = new ImageData[] {image.getImageData(100)};</span>
101 				loader.save(out, SWT.IMAGE_PNG);
102 				String iconStr = Base64.getEncoder().encodeToString(out.toByteArray());
103 				to.putString(LabeledPageFactory.ATTRIBUTE_ICON, iconStr);
104 			} catch (Exception e) {
105 				FlightRecorderUI.getDefault().getLogger().log(Level.WARNING, &quot;Could not persist icon&quot;, e); //$NON-NLS-1$
106 			}
107 		}
108 	}
109 
110 }
</pre>
</td>
</tr>
</table>
<center><a href="ItemList.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../overview/ResultReportUi.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>