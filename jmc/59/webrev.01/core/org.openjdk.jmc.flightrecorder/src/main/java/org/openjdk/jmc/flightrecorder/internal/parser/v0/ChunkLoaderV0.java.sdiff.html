<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/internal/parser/v0/ChunkLoaderV0.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ArrayReader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="ReaderFactory.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/internal/parser/v0/ChunkLoaderV0.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 42 import org.openjdk.jmc.flightrecorder.internal.parser.LoaderContext;
 43 
 44 public class ChunkLoaderV0 implements IChunkLoader {
 45 	private final ChunkStructure structure;
 46 	private final byte[] data;
 47 	private final LoaderContext context;
 48 	private final ChunkMetadata metadata;
 49 
 50 	private ChunkLoaderV0(ChunkStructure structure, byte[] data, LoaderContext context)
 51 			throws CouldNotLoadRecordingException {
 52 		this.structure = structure;
 53 		this.data = data;
 54 		this.context = context;
 55 		// Read metadata
 56 		metadata = new ChunkMetadata(data, structure.getMetadataOffset());
 57 	}
 58 
 59 	@Override
 60 	public byte[] call() throws Exception {
 61 		// Read constants
<span class="line-modified"> 62 		ReaderFactory readerFactory = new ReaderFactory(metadata, data, context);</span>
 63 
 64 		// Read events
 65 		EventParserManager eventParser = new EventParserManager(readerFactory, context, metadata.getProducers());
 66 		int nextEventIndex = structure.getBodyStartOffset();
 67 		while (nextEventIndex &lt; structure.getMetadataOffset()) {
 68 			Offset offset = new Offset(data, nextEventIndex);
 69 			nextEventIndex = offset.getEnd();
 70 			int eventTypeId = NumberReaders.readInt(data, offset);
 71 			if (eventTypeId == EventParserManager.METADATA_EVENT_TYPE_INDEX
 72 					|| eventTypeId == EventParserManager.CHECK_POINT_EVENT_TYPE_INDEX) {
 73 				// Metadata event || Checkpoint event
 74 			} else {
 75 				// Data event
 76 				eventParser.loadEvent(data, offset, eventTypeId);
 77 			}
 78 		}
 79 		return data;
 80 	}
 81 
 82 	public static IChunkLoader create(Chunk input, LoaderContext context)
</pre>
</td>
<td>
<hr />
<pre>
 42 import org.openjdk.jmc.flightrecorder.internal.parser.LoaderContext;
 43 
 44 public class ChunkLoaderV0 implements IChunkLoader {
 45 	private final ChunkStructure structure;
 46 	private final byte[] data;
 47 	private final LoaderContext context;
 48 	private final ChunkMetadata metadata;
 49 
 50 	private ChunkLoaderV0(ChunkStructure structure, byte[] data, LoaderContext context)
 51 			throws CouldNotLoadRecordingException {
 52 		this.structure = structure;
 53 		this.data = data;
 54 		this.context = context;
 55 		// Read metadata
 56 		metadata = new ChunkMetadata(data, structure.getMetadataOffset());
 57 	}
 58 
 59 	@Override
 60 	public byte[] call() throws Exception {
 61 		// Read constants
<span class="line-modified"> 62 		ReaderFactory readerFactory = new ReaderFactory(metadata, data, context, structure);</span>
 63 
 64 		// Read events
 65 		EventParserManager eventParser = new EventParserManager(readerFactory, context, metadata.getProducers());
 66 		int nextEventIndex = structure.getBodyStartOffset();
 67 		while (nextEventIndex &lt; structure.getMetadataOffset()) {
 68 			Offset offset = new Offset(data, nextEventIndex);
 69 			nextEventIndex = offset.getEnd();
 70 			int eventTypeId = NumberReaders.readInt(data, offset);
 71 			if (eventTypeId == EventParserManager.METADATA_EVENT_TYPE_INDEX
 72 					|| eventTypeId == EventParserManager.CHECK_POINT_EVENT_TYPE_INDEX) {
 73 				// Metadata event || Checkpoint event
 74 			} else {
 75 				// Data event
 76 				eventParser.loadEvent(data, offset, eventTypeId);
 77 			}
 78 		}
 79 		return data;
 80 	}
 81 
 82 	public static IChunkLoader create(Chunk input, LoaderContext context)
</pre>
</td>
</tr>
</table>
<center><a href="ArrayReader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="ReaderFactory.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>