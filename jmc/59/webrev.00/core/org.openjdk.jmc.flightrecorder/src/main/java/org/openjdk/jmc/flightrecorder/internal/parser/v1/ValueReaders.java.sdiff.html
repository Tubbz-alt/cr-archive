<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/internal/parser/v1/ValueReaders.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="TypeManager.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/internal/parser/v1/ValueReaders.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 99 		public void skip(IDataInput in) throws IOException, InvalidJfrFileException {
100 			in.readLong();
101 		}
102 
103 		@Override
104 		public Object resolve(Object value) throws InvalidJfrFileException {
105 			if (value instanceof ConstantReference) {
106 				return constantPool.get(((ConstantReference) value).key);
107 			}
108 			return value;
109 		}
110 
111 		@Override
112 		public ContentType&lt;?&gt; getContentType() {
113 			return contentType;
114 		}
115 	}
116 
117 	static class ArrayReader implements IValueReader {
118 		private final IValueReader elementReader;

119 
<span class="line-modified">120 		ArrayReader(IValueReader elementReader) {</span>
121 			this.elementReader = elementReader;

122 		}
123 
124 		@Override
125 		public Object read(IDataInput in, boolean allowUnresolvedReference)
126 				throws IOException, InvalidJfrFileException {
127 			int size = in.readInt();



128 			Object[] values = new Object[size];
129 			for (int i = 0; i &lt; values.length; i++) {
130 				values[i] = elementReader.read(in, allowUnresolvedReference);
131 			}
132 			return values;
133 		}
134 
135 		@Override
136 		public void skip(IDataInput in) throws IOException, InvalidJfrFileException {
137 			int size = in.readInt();
138 			for (int i = 0; i &lt; size; i++) {
139 				elementReader.skip(in);
140 			}
141 		}
142 
143 		@Override
144 		public Object resolve(Object value) throws InvalidJfrFileException {
145 			Object[] valueArray = (Object[]) value;
146 			for (int i = 0; i &lt; valueArray.length; i++) {
147 				valueArray[i] = elementReader.resolve(valueArray[i]);
</pre>
</td>
<td>
<hr />
<pre>
 99 		public void skip(IDataInput in) throws IOException, InvalidJfrFileException {
100 			in.readLong();
101 		}
102 
103 		@Override
104 		public Object resolve(Object value) throws InvalidJfrFileException {
105 			if (value instanceof ConstantReference) {
106 				return constantPool.get(((ConstantReference) value).key);
107 			}
108 			return value;
109 		}
110 
111 		@Override
112 		public ContentType&lt;?&gt; getContentType() {
113 			return contentType;
114 		}
115 	}
116 
117 	static class ArrayReader implements IValueReader {
118 		private final IValueReader elementReader;
<span class="line-added">119 		private final ChunkStructure header;</span>
120 
<span class="line-modified">121 		ArrayReader(IValueReader elementReader, ChunkStructure header) {</span>
122 			this.elementReader = elementReader;
<span class="line-added">123 			this.header = header;</span>
124 		}
125 
126 		@Override
127 		public Object read(IDataInput in, boolean allowUnresolvedReference)
128 				throws IOException, InvalidJfrFileException {
129 			int size = in.readInt();
<span class="line-added">130 			if (size &gt; header.getChunkSize()) {</span>
<span class="line-added">131 				throw new InvalidJfrFileException(&quot;Found array larger than chunk size&quot;); //$NON-NLS-1$</span>
<span class="line-added">132 			}</span>
133 			Object[] values = new Object[size];
134 			for (int i = 0; i &lt; values.length; i++) {
135 				values[i] = elementReader.read(in, allowUnresolvedReference);
136 			}
137 			return values;
138 		}
139 
140 		@Override
141 		public void skip(IDataInput in) throws IOException, InvalidJfrFileException {
142 			int size = in.readInt();
143 			for (int i = 0; i &lt; size; i++) {
144 				elementReader.skip(in);
145 			}
146 		}
147 
148 		@Override
149 		public Object resolve(Object value) throws InvalidJfrFileException {
150 			Object[] valueArray = (Object[]) value;
151 			for (int i = 0; i &lt; valueArray.length; i++) {
152 				valueArray[i] = elementReader.resolve(valueArray[i]);
</pre>
</td>
</tr>
</table>
<center><a href="TypeManager.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>