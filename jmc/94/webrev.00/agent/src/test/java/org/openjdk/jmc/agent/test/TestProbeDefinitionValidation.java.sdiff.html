<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff agent/src/test/java/org/openjdk/jmc/agent/test/TestProbeDefinitionValidation.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../main/resources/org/openjdk/jmc/agent/impl/jfrprobes_schema.xsd.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>agent/src/test/java/org/openjdk/jmc/agent/test/TestProbeDefinitionValidation.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 25 
 26 		DefaultTransformRegistry.validateProbeDefinition(GLOBAL_PREFIX + probe + GLOBAL_POSTFIX);
 27 	}
 28 
 29 	@Test
 30 	public void testValidatingFullyDefinedProbe() throws XMLStreamException {
 31 		// a fully defined event with all optional elements set
 32 		String probe = &quot;&lt;event id=\&quot;demo.event1\&quot;&gt;\n&quot; + &quot;            &lt;name&gt;Event 1&lt;/name&gt;\n&quot;
 33 				+ &quot;            &lt;class&gt;com.company.project.MyDemoClass&lt;/class&gt;\n&quot;
 34 				+ &quot;            &lt;description&gt;demo event #1&lt;/description&gt;\n&quot; + &quot;            &lt;path&gt;demo&lt;/path&gt;\n&quot;
 35 				+ &quot;            &lt;stacktrace&gt;true&lt;/stacktrace&gt;\n&quot; + &quot;            &lt;method&gt;\n&quot;
 36 				+ &quot;                &lt;name&gt;targetFunction&lt;/name&gt;\n&quot;
 37 				+ &quot;                &lt;descriptor&gt;(Ljava/lang/String;)I&lt;/descriptor&gt;\n&quot; + &quot;                &lt;parameters&gt;\n&quot;
 38 				+ &quot;                    &lt;parameter index=\&quot;0\&quot;&gt;\n&quot; + &quot;                        &lt;name&gt;param 0&lt;/name&gt;\n&quot;
 39 				+ &quot;                        &lt;description&gt;the first parameter&lt;/description&gt;\n&quot;
 40 				+ &quot;                        &lt;contenttype&gt;None&lt;/contenttype&gt;\n&quot;
 41 				+ &quot;                        &lt;relationkey&gt;http://project.company.com/relation_id/parameter#0&lt;/relationkey&gt;\n&quot;
 42 				+ &quot;                        &lt;converter&gt;com.company.project.MyConverter&lt;/converter&gt;\n&quot;
 43 				+ &quot;                    &lt;/parameter&gt;\n&quot; + &quot;                &lt;/parameters&gt;\n&quot;
 44 				+ &quot;                &lt;returnvalue&gt;\n&quot;

 45 				+ &quot;                    &lt;description&gt;the return value&lt;/description&gt;\n&quot;
 46 				+ &quot;                    &lt;contenttype&gt;None&lt;/contenttype&gt;\n&quot;
 47 				+ &quot;                    &lt;relationkey&gt;http://project.company.com/relation_id/parameter#0&lt;/relationkey&gt;\n&quot;
 48 				+ &quot;                    &lt;converter&gt;com.company.project.MyConverter&lt;/converter&gt;\n&quot;
 49 				+ &quot;                &lt;/returnvalue&gt;\n&quot; + &quot;            &lt;/method&gt;\n&quot;
 50 				+ &quot;            &lt;location&gt;WRAP&lt;/location&gt;\n&quot; + &quot;            &lt;fields&gt;\n&quot; + &quot;                &lt;field&gt;\n&quot;
 51 				+ &quot;                    &lt;name&gt;count&lt;/name&gt;\n&quot;
 52 				+ &quot;                    &lt;description&gt;current value of &#39;count&#39; member variable&lt;/description&gt;\n&quot;
 53 				+ &quot;                    &lt;expression&gt;com.company.product.MyClass.this&lt;/expression&gt;\n&quot;
 54 				+ &quot;                    &lt;contenttype&gt;None&lt;/contenttype&gt;\n&quot;
 55 				+ &quot;                    &lt;relationkey&gt;http://project.company.com/relation_id/field#0&lt;/relationkey&gt;\n&quot;
 56 				+ &quot;                    &lt;converter&gt;com.company.project.MyConverter&lt;/converter&gt;\n&quot;
 57 				+ &quot;                &lt;/field&gt;\n&quot; + &quot;            &lt;/fields&gt;\n&quot; + &quot;        &lt;/event&gt;&quot;;
 58 
 59 		DefaultTransformRegistry.validateProbeDefinition(GLOBAL_PREFIX + probe + GLOBAL_POSTFIX);
 60 	}
 61 
 62 	@Test(expected = XMLStreamException.class)
 63 	public void testValidatingEmptyString() throws XMLStreamException {
 64 		DefaultTransformRegistry.validateProbeDefinition(&quot;&quot;);
</pre>
</td>
<td>
<hr />
<pre>
 25 
 26 		DefaultTransformRegistry.validateProbeDefinition(GLOBAL_PREFIX + probe + GLOBAL_POSTFIX);
 27 	}
 28 
 29 	@Test
 30 	public void testValidatingFullyDefinedProbe() throws XMLStreamException {
 31 		// a fully defined event with all optional elements set
 32 		String probe = &quot;&lt;event id=\&quot;demo.event1\&quot;&gt;\n&quot; + &quot;            &lt;name&gt;Event 1&lt;/name&gt;\n&quot;
 33 				+ &quot;            &lt;class&gt;com.company.project.MyDemoClass&lt;/class&gt;\n&quot;
 34 				+ &quot;            &lt;description&gt;demo event #1&lt;/description&gt;\n&quot; + &quot;            &lt;path&gt;demo&lt;/path&gt;\n&quot;
 35 				+ &quot;            &lt;stacktrace&gt;true&lt;/stacktrace&gt;\n&quot; + &quot;            &lt;method&gt;\n&quot;
 36 				+ &quot;                &lt;name&gt;targetFunction&lt;/name&gt;\n&quot;
 37 				+ &quot;                &lt;descriptor&gt;(Ljava/lang/String;)I&lt;/descriptor&gt;\n&quot; + &quot;                &lt;parameters&gt;\n&quot;
 38 				+ &quot;                    &lt;parameter index=\&quot;0\&quot;&gt;\n&quot; + &quot;                        &lt;name&gt;param 0&lt;/name&gt;\n&quot;
 39 				+ &quot;                        &lt;description&gt;the first parameter&lt;/description&gt;\n&quot;
 40 				+ &quot;                        &lt;contenttype&gt;None&lt;/contenttype&gt;\n&quot;
 41 				+ &quot;                        &lt;relationkey&gt;http://project.company.com/relation_id/parameter#0&lt;/relationkey&gt;\n&quot;
 42 				+ &quot;                        &lt;converter&gt;com.company.project.MyConverter&lt;/converter&gt;\n&quot;
 43 				+ &quot;                    &lt;/parameter&gt;\n&quot; + &quot;                &lt;/parameters&gt;\n&quot;
 44 				+ &quot;                &lt;returnvalue&gt;\n&quot;
<span class="line-added"> 45 				+ &quot;                    &lt;name&gt;returnValue&lt;/name&gt;\n&quot;</span>
 46 				+ &quot;                    &lt;description&gt;the return value&lt;/description&gt;\n&quot;
 47 				+ &quot;                    &lt;contenttype&gt;None&lt;/contenttype&gt;\n&quot;
 48 				+ &quot;                    &lt;relationkey&gt;http://project.company.com/relation_id/parameter#0&lt;/relationkey&gt;\n&quot;
 49 				+ &quot;                    &lt;converter&gt;com.company.project.MyConverter&lt;/converter&gt;\n&quot;
 50 				+ &quot;                &lt;/returnvalue&gt;\n&quot; + &quot;            &lt;/method&gt;\n&quot;
 51 				+ &quot;            &lt;location&gt;WRAP&lt;/location&gt;\n&quot; + &quot;            &lt;fields&gt;\n&quot; + &quot;                &lt;field&gt;\n&quot;
 52 				+ &quot;                    &lt;name&gt;count&lt;/name&gt;\n&quot;
 53 				+ &quot;                    &lt;description&gt;current value of &#39;count&#39; member variable&lt;/description&gt;\n&quot;
 54 				+ &quot;                    &lt;expression&gt;com.company.product.MyClass.this&lt;/expression&gt;\n&quot;
 55 				+ &quot;                    &lt;contenttype&gt;None&lt;/contenttype&gt;\n&quot;
 56 				+ &quot;                    &lt;relationkey&gt;http://project.company.com/relation_id/field#0&lt;/relationkey&gt;\n&quot;
 57 				+ &quot;                    &lt;converter&gt;com.company.project.MyConverter&lt;/converter&gt;\n&quot;
 58 				+ &quot;                &lt;/field&gt;\n&quot; + &quot;            &lt;/fields&gt;\n&quot; + &quot;        &lt;/event&gt;&quot;;
 59 
 60 		DefaultTransformRegistry.validateProbeDefinition(GLOBAL_PREFIX + probe + GLOBAL_POSTFIX);
 61 	}
 62 
 63 	@Test(expected = XMLStreamException.class)
 64 	public void testValidatingEmptyString() throws XMLStreamException {
 65 		DefaultTransformRegistry.validateProbeDefinition(&quot;&quot;);
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../main/resources/org/openjdk/jmc/agent/impl/jfrprobes_schema.xsd.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>