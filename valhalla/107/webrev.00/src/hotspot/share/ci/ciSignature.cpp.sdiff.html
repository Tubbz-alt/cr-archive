<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/ci/ciSignature.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="ciReplay.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ciType.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/ci/ciSignature.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 45   _symbol = symbol;
 46 
 47   ciEnv* env = CURRENT_ENV;
 48   Arena* arena = env-&gt;arena();
 49   _types = new (arena) GrowableArray&lt;ciType*&gt;(arena, 8, 0, NULL);
 50 
 51   int size = 0;
 52   int count = 0;
 53   ResourceMark rm(THREAD);
 54   Symbol* sh = symbol-&gt;get_symbol();
 55   SignatureStream ss(sh);
 56   for (; ; ss.next()) {
 57     // Process one element of the signature
 58     ciType* type;
 59     if (!ss.is_reference()) {
 60       type = ciType::make(ss.type());
 61     } else {
 62       ciSymbol* klass_name = env-&gt;get_symbol(ss.as_symbol());
 63       type = env-&gt;get_klass_by_name_impl(_accessing_klass, cpool, klass_name, false);
 64     }
<span class="line-modified"> 65     if (type-&gt;is_valuetype() &amp;&amp; ss.type() == T_VALUETYPE) {</span>
 66       type = env-&gt;make_never_null_wrapper(type);
 67     }
 68     _types-&gt;append(type);
 69     if (ss.at_return_type()) {
 70       // Done processing the return type; do not add it into the count.
 71       break;
 72     }
 73     size += type-&gt;size();
 74     count++;
 75   }
 76   _size = size;
 77   _count = count;
 78 }
 79 
 80 // ------------------------------------------------------------------
 81 // ciSignature::ciSignature
 82 ciSignature::ciSignature(ciKlass* accessing_klass, ciSymbol* symbol, ciMethodType* method_type) :
 83   _symbol(symbol),
 84   _accessing_klass(accessing_klass),
 85   _size( method_type-&gt;ptype_slot_count()),
</pre>
</td>
<td>
<hr />
<pre>
 45   _symbol = symbol;
 46 
 47   ciEnv* env = CURRENT_ENV;
 48   Arena* arena = env-&gt;arena();
 49   _types = new (arena) GrowableArray&lt;ciType*&gt;(arena, 8, 0, NULL);
 50 
 51   int size = 0;
 52   int count = 0;
 53   ResourceMark rm(THREAD);
 54   Symbol* sh = symbol-&gt;get_symbol();
 55   SignatureStream ss(sh);
 56   for (; ; ss.next()) {
 57     // Process one element of the signature
 58     ciType* type;
 59     if (!ss.is_reference()) {
 60       type = ciType::make(ss.type());
 61     } else {
 62       ciSymbol* klass_name = env-&gt;get_symbol(ss.as_symbol());
 63       type = env-&gt;get_klass_by_name_impl(_accessing_klass, cpool, klass_name, false);
 64     }
<span class="line-modified"> 65     if (type-&gt;is_valuetype() &amp;&amp; ss.type() == T_INLINE_TYPE) {</span>
 66       type = env-&gt;make_never_null_wrapper(type);
 67     }
 68     _types-&gt;append(type);
 69     if (ss.at_return_type()) {
 70       // Done processing the return type; do not add it into the count.
 71       break;
 72     }
 73     size += type-&gt;size();
 74     count++;
 75   }
 76   _size = size;
 77   _count = count;
 78 }
 79 
 80 // ------------------------------------------------------------------
 81 // ciSignature::ciSignature
 82 ciSignature::ciSignature(ciKlass* accessing_klass, ciSymbol* symbol, ciMethodType* method_type) :
 83   _symbol(symbol),
 84   _accessing_klass(accessing_klass),
 85   _size( method_type-&gt;ptype_slot_count()),
</pre>
</td>
</tr>
</table>
<center><a href="ciReplay.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ciType.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>