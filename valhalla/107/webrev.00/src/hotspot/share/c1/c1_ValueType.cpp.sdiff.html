<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/c1/c1_ValueType.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="c1_LIRGenerator.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../ci/ciConstant.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/c1/c1_ValueType.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
118   return constant_value()-&gt;is_loaded();
119 }
120 
121 ciObject* ObjectConstant::constant_value() const                   { return _value; }
122 ciObject* ArrayConstant::constant_value() const                    { return _value; }
123 ciObject* InstanceConstant::constant_value() const                 { return _value; }
124 
125 ValueType* as_ValueType(BasicType type) {
126   switch (type) {
127     case T_VOID   : return voidType;
128     case T_BYTE   : // fall through
129     case T_CHAR   : // fall through
130     case T_SHORT  : // fall through
131     case T_BOOLEAN: // fall through
132     case T_INT    : return intType;
133     case T_LONG   : return longType;
134     case T_FLOAT  : return floatType;
135     case T_DOUBLE : return doubleType;
136     case T_ARRAY  : return arrayType;
137     case T_OBJECT : return objectType;
<span class="line-modified">138     case T_VALUETYPE: return objectType;</span>
139     case T_ADDRESS: return addressType;
140     case T_ILLEGAL: return illegalType;
141     default       : ShouldNotReachHere();
142                     return illegalType;
143   }
144 }
145 
146 
147 ValueType* as_ValueType(ciConstant value) {
148   switch (value.basic_type()) {
149     case T_BYTE   : // fall through
150     case T_CHAR   : // fall through
151     case T_SHORT  : // fall through
152     case T_BOOLEAN: // fall through
153     case T_INT    : return new IntConstant   (value.as_int   ());
154     case T_LONG   : return new LongConstant  (value.as_long  ());
155     case T_FLOAT  : return new FloatConstant (value.as_float ());
156     case T_DOUBLE : return new DoubleConstant(value.as_double());
157     case T_ARRAY  : // fall through (ciConstant doesn&#39;t have an array accessor)
<span class="line-modified">158     case T_VALUETYPE: // fall through</span>
159     case T_OBJECT : {
160       // TODO: Common the code with GraphBuilder::load_constant?
161       ciObject* obj = value.as_object();
162       if (obj-&gt;is_null_object())
163         return objectNull;
164       if (obj-&gt;is_loaded()) {
165         if (obj-&gt;is_array())
166           return new ArrayConstant(obj-&gt;as_array());
167         else if (obj-&gt;is_instance())
168           return new InstanceConstant(obj-&gt;as_instance());
169       }
170       return new ObjectConstant(obj);
171     }
172     default       : ShouldNotReachHere();
173                     return illegalType;
174   }
175 }
176 
177 
178 BasicType as_BasicType(ValueType* type) {
</pre>
</td>
<td>
<hr />
<pre>
118   return constant_value()-&gt;is_loaded();
119 }
120 
121 ciObject* ObjectConstant::constant_value() const                   { return _value; }
122 ciObject* ArrayConstant::constant_value() const                    { return _value; }
123 ciObject* InstanceConstant::constant_value() const                 { return _value; }
124 
125 ValueType* as_ValueType(BasicType type) {
126   switch (type) {
127     case T_VOID   : return voidType;
128     case T_BYTE   : // fall through
129     case T_CHAR   : // fall through
130     case T_SHORT  : // fall through
131     case T_BOOLEAN: // fall through
132     case T_INT    : return intType;
133     case T_LONG   : return longType;
134     case T_FLOAT  : return floatType;
135     case T_DOUBLE : return doubleType;
136     case T_ARRAY  : return arrayType;
137     case T_OBJECT : return objectType;
<span class="line-modified">138     case T_INLINE_TYPE: return objectType;</span>
139     case T_ADDRESS: return addressType;
140     case T_ILLEGAL: return illegalType;
141     default       : ShouldNotReachHere();
142                     return illegalType;
143   }
144 }
145 
146 
147 ValueType* as_ValueType(ciConstant value) {
148   switch (value.basic_type()) {
149     case T_BYTE   : // fall through
150     case T_CHAR   : // fall through
151     case T_SHORT  : // fall through
152     case T_BOOLEAN: // fall through
153     case T_INT    : return new IntConstant   (value.as_int   ());
154     case T_LONG   : return new LongConstant  (value.as_long  ());
155     case T_FLOAT  : return new FloatConstant (value.as_float ());
156     case T_DOUBLE : return new DoubleConstant(value.as_double());
157     case T_ARRAY  : // fall through (ciConstant doesn&#39;t have an array accessor)
<span class="line-modified">158     case T_INLINE_TYPE: // fall through</span>
159     case T_OBJECT : {
160       // TODO: Common the code with GraphBuilder::load_constant?
161       ciObject* obj = value.as_object();
162       if (obj-&gt;is_null_object())
163         return objectNull;
164       if (obj-&gt;is_loaded()) {
165         if (obj-&gt;is_array())
166           return new ArrayConstant(obj-&gt;as_array());
167         else if (obj-&gt;is_instance())
168           return new InstanceConstant(obj-&gt;as_instance());
169       }
170       return new ObjectConstant(obj);
171     }
172     default       : ShouldNotReachHere();
173                     return illegalType;
174   }
175 }
176 
177 
178 BasicType as_BasicType(ValueType* type) {
</pre>
</td>
</tr>
</table>
<center><a href="c1_LIRGenerator.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../ci/ciConstant.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>