<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/prims/jvmtiEnv.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmtiCodeBlobEvents.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmtiImpl.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/prims/jvmtiEnv.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2577     return JVMTI_ERROR_NONE;
2578   }
2579 
2580 
2581   InstanceKlass* ik = InstanceKlass::cast(k);
2582 
2583   int result_count = 0;
2584   // First, count the fields.
2585   FilteredFieldStream flds(ik, true, true);
2586   result_count = flds.field_count();
2587 
2588   // Allocate the result and fill it in
2589   jfieldID* result_list = (jfieldID*) jvmtiMalloc(result_count * sizeof(jfieldID));
2590   // The JVMTI spec requires fields in the order they occur in the class file,
2591   // this is the reverse order of what FieldStream hands out.
2592   int id_index = (result_count - 1);
2593 
2594   for (FilteredFieldStream src_st(ik, true, true); !src_st.eos(); src_st.next()) {
2595     result_list[id_index--] = jfieldIDWorkaround::to_jfieldID(
2596                                             ik, src_st.offset(),
<span class="line-modified">2597                                             src_st.access_flags().is_static());</span>

2598   }
2599   assert(id_index == -1, &quot;just checking&quot;);
2600   // Fill in the results
2601   *field_count_ptr = result_count;
2602   *fields_ptr = result_list;
2603 
2604   return JVMTI_ERROR_NONE;
2605 } /* end GetClassFields */
2606 
2607 
2608 // k_mirror - may be primitive, this must be checked
2609 // interface_count_ptr - pre-checked for NULL
2610 // interfaces_ptr - pre-checked for NULL
2611 jvmtiError
2612 JvmtiEnv::GetImplementedInterfaces(oop k_mirror, jint* interface_count_ptr, jclass** interfaces_ptr) {
2613   {
2614     if (java_lang_Class::is_primitive(k_mirror)) {
2615       *interface_count_ptr = 0;
2616       *interfaces_ptr = (jclass*) jvmtiMalloc(0 * sizeof(jclass));
2617       return JVMTI_ERROR_NONE;
</pre>
</td>
<td>
<hr />
<pre>
2577     return JVMTI_ERROR_NONE;
2578   }
2579 
2580 
2581   InstanceKlass* ik = InstanceKlass::cast(k);
2582 
2583   int result_count = 0;
2584   // First, count the fields.
2585   FilteredFieldStream flds(ik, true, true);
2586   result_count = flds.field_count();
2587 
2588   // Allocate the result and fill it in
2589   jfieldID* result_list = (jfieldID*) jvmtiMalloc(result_count * sizeof(jfieldID));
2590   // The JVMTI spec requires fields in the order they occur in the class file,
2591   // this is the reverse order of what FieldStream hands out.
2592   int id_index = (result_count - 1);
2593 
2594   for (FilteredFieldStream src_st(ik, true, true); !src_st.eos(); src_st.next()) {
2595     result_list[id_index--] = jfieldIDWorkaround::to_jfieldID(
2596                                             ik, src_st.offset(),
<span class="line-modified">2597                                             src_st.access_flags().is_static(),</span>
<span class="line-added">2598                                             src_st.field_descriptor().is_inlined());</span>
2599   }
2600   assert(id_index == -1, &quot;just checking&quot;);
2601   // Fill in the results
2602   *field_count_ptr = result_count;
2603   *fields_ptr = result_list;
2604 
2605   return JVMTI_ERROR_NONE;
2606 } /* end GetClassFields */
2607 
2608 
2609 // k_mirror - may be primitive, this must be checked
2610 // interface_count_ptr - pre-checked for NULL
2611 // interfaces_ptr - pre-checked for NULL
2612 jvmtiError
2613 JvmtiEnv::GetImplementedInterfaces(oop k_mirror, jint* interface_count_ptr, jclass** interfaces_ptr) {
2614   {
2615     if (java_lang_Class::is_primitive(k_mirror)) {
2616       *interface_count_ptr = 0;
2617       *interfaces_ptr = (jclass*) jvmtiMalloc(0 * sizeof(jclass));
2618       return JVMTI_ERROR_NONE;
</pre>
</td>
</tr>
</table>
<center><a href="jvmtiCodeBlobEvents.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmtiImpl.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>