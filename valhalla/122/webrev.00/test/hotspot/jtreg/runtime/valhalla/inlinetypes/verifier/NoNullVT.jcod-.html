<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old test/hotspot/jtreg/runtime/valhalla/inlinetypes/verifier/NoNullVT.jcod</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
 23  */
 24 
 25 // Test that a VerifyError exception is thrown when trying to pass a null
 26 // when the formal parameter is an inline type.
 27 //
 28 // // Java program emulating the jcod contents.
 29 // public inline final class NoNullVT {
 30 //     final int x;
 31 //     final int y;
 32 //
 33 //     private NoNullVT() {
 34 //         x = 0;
 35 //         y = 0;
 36 //     }
 37 //
 38 //     public int getX() { return x; }
 39 //     public int getY() { return y; }
 40 //
 41 //     public boolean isSameNoNullVT(NoNullVT that) {
 42 //         return this.getX() == that.getX() &amp;&amp; this.getY() == that.getY();
 43 //     }
 44 //
 45 //     public boolean equals(Object o) {
 46 //         if(o instanceof NoNullVT) {
 47 //             return ((NoNullVT)o).x == x &amp;&amp;  ((NoNullVT)o).y == y;
 48 //         } else {
 49 //             return false;
 50 //         }
 51 //     }
 52 //
 53 //     public static NoNullVT createNoNullVT(int x, int y) {
 54 //         NoNullVT p = NoNullVT.default;
 55 //         p = __WithField(p.x, x);
 56 //         p = __WithField(p.y, y);
 57 //         return p;
 58 //     }
 59 //
 60 //     public static void main(String[] args) {
 61 //         String str = null;
 62 //         NoNullVT a = createNoNullVT(3, 4);
 63 //         NoNullVT b = createNoNullVT(2, 4);
 64 //         boolean res = a.isSameNoNullVT(null); // Should throw VerifyError
 65 //     }
 66 // }
 67 
 68 class NoNullVT {
 69   0xCAFEBABE;
 70   0; // minor version
 71   60; // version
 72   [63] { // Constant Pool
 73     ; // first element is empty
 74     class #36; // #1     at 0x0A
 75     Field #1 #37; // #2     at 0x0D
 76     Field #1 #38; // #3     at 0x12
 77     Method #1 #39; // #4     at 0x17
 78     Method #1 #40; // #5     at 0x1C
 79     class #41; // #6     at 0x21
 80     Method #1 #42; // #7     at 0x24
 81     Method #1 #43; // #8     at 0x29
 82     InvokeDynamic 0s #46; // #9     at 0x2E
 83     InvokeDynamic 0s #47; // #10     at 0x33
 84     class #48; // #11     at 0x38
 85     Utf8 &quot;x&quot;; // #12     at 0x3B
 86     Utf8 &quot;I&quot;; // #13     at 0x3F
 87     Utf8 &quot;y&quot;; // #14     at 0x43
 88     Utf8 &quot;getX&quot;; // #15     at 0x47
 89     Utf8 &quot;()I&quot;; // #16     at 0x4E
 90     Utf8 &quot;Code&quot;; // #17     at 0x54
 91     Utf8 &quot;LineNumberTable&quot;; // #18     at 0x5B
 92     Utf8 &quot;getY&quot;; // #19     at 0x6D
 93     Utf8 &quot;isSameNoNullVT&quot;; // #20     at 0x74
 94     Utf8 &quot;(QNoNullVT;)Z&quot;; // #21     at 0x85
 95     Utf8 &quot;StackMapTable&quot;; // #22     at 0x95
 96     Utf8 &quot;equals&quot;; // #23     at 0xA5
 97     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #24     at 0xAE
 98     Utf8 &quot;createNoNullVT&quot;; // #25     at 0xC6
 99     Utf8 &quot;(II)QNoNullVT;&quot;; // #26     at 0xD7
100     Utf8 &quot;main&quot;; // #27     at 0xE8
101     Utf8 &quot;([Ljava/lang/String;)V&quot;; // #28     at 0xEF
102     Utf8 &quot;hashCode&quot;; // #29     at 0x0108
103     Utf8 &quot;toString&quot;; // #30     at 0x0113
104     Utf8 &quot;()Ljava/lang/String;&quot;; // #31     at 0x011E
105     Utf8 &quot;&lt;init&gt;&quot;; // #32     at 0x0135
106     Utf8 &quot;()QNoNullVT;&quot;; // #33     at 0x013E
107     Utf8 &quot;SourceFile&quot;; // #34     at 0x014D
108     Utf8 &quot;NoNullVT.java&quot;; // #35     at 0x015A
109     Utf8 &quot;NoNullVT&quot;; // #36     at 0x016A
110     NameAndType #12 #13; // #37     at 0x0175
111     NameAndType #14 #13; // #38     at 0x017A
112     NameAndType #15 #16; // #39     at 0x017F
113     NameAndType #19 #16; // #40     at 0x0184
114     Utf8 &quot;QNoNullVT;&quot;; // #41     at 0x0189
115     NameAndType #25 #26; // #42     at 0x0196
116     NameAndType #20 #21; // #43     at 0x019B
117     Utf8 &quot;BootstrapMethods&quot;; // #44     at 0x01A0
118     MethodHandle 6b #49; // #45     at 0x01B3
119     NameAndType #29 #50; // #46     at 0x01B7
120     NameAndType #30 #51; // #47     at 0x01BC
121     Utf8 &quot;java/lang/Object&quot;; // #48     at 0x01C1
122     Method #52 #53; // #49     at 0x01D4
123     Utf8 &quot;(QNoNullVT;)I&quot;; // #50     at 0x01D9
124     Utf8 &quot;(QNoNullVT;)Ljava/lang/String;&quot;; // #51     at 0x01E9
125     class #54; // #52     at 0x020A
126     NameAndType #55 #59; // #53     at 0x020D
127     Utf8 &quot;java/lang/invoke/ValueBootstrapMethods&quot;; // #54     at 0x0212
128     Utf8 &quot;makeBootstrapMethod&quot;; // #55     at 0x023B
129     class #61; // #56     at 0x0251
130     Utf8 &quot;Lookup&quot;; // #57     at 0x0254
131     Utf8 &quot;InnerClasses&quot;; // #58     at 0x025D
132     Utf8 &quot;(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;&quot;; // #59     at 0x026C
133     class #62; // #60     at 0x02E2
134     Utf8 &quot;java/lang/invoke/MethodHandles$Lookup&quot;; // #61     at 0x02E5
135     Utf8 &quot;java/lang/invoke/MethodHandles&quot;; // #62     at 0x030D
136   } // Constant Pool
137 
138   0x0131; // access [ ACC_PUBLIC ACC_SUPER ACC_FINAL ]
139   #1;// this_cpx
140   #11;// super_cpx
141 
142   [0] { // Interfaces
143   } // Interfaces
144 
145   [2] { // fields
146     { // Member at 0x0338
147       0x0010; // access
148       #12; // name_cpx
149       #13; // sig_cpx
150       [0] { // Attributes
151       } // Attributes
152     } // Member
153     ;
154     { // Member at 0x0340
155       0x0010; // access
156       #14; // name_cpx
157       #13; // sig_cpx
158       [0] { // Attributes
159       } // Attributes
160     } // Member
161   } // fields
162 
163   [9] { // methods
164     { // Member at 0x034A
165       0x0001; // access
166       #15; // name_cpx
167       #16; // sig_cpx
168       [1] { // Attributes
169         Attr(#17, 29) { // Code at 0x0352
170           1; // max_stack
171           1; // max_locals
172           Bytes[5]{
173             0x2AB40002AC;
174           };
175           [0] { // Traps
176           } // end Traps
177           [1] { // Attributes
178             Attr(#18, 6) { // LineNumberTable at 0x0369
179               [1] { // LineNumberTable
180                 0  10; //  at 0x0375
181               }
182             } // end LineNumberTable
183           } // Attributes
184         } // end Code
185       } // Attributes
186     } // Member
187     ;
188     { // Member at 0x0375
189       0x0001; // access
190       #19; // name_cpx
191       #16; // sig_cpx
192       [1] { // Attributes
193         Attr(#17, 29) { // Code at 0x037D
194           1; // max_stack
195           1; // max_locals
196           Bytes[5]{
197             0x2AB40003AC;
198           };
199           [0] { // Traps
200           } // end Traps
201           [1] { // Attributes
202             Attr(#18, 6) { // LineNumberTable at 0x0394
203               [1] { // LineNumberTable
204                 0  11; //  at 0x03A0
205               }
206             } // end LineNumberTable
207           } // Attributes
208         } // end Code
209       } // Attributes
210     } // Member
211     ;
212     { // Member at 0x03A0
213       0x0001; // access
214       #20; // name_cpx
215       #21; // sig_cpx
216       [1] { // Attributes
217         Attr(#17, 63) { // Code at 0x03A8
218           2; // max_stack
219           2; // max_locals
220           Bytes[28]{
221             0x2AB600042BB60004;
222             0xA000122AB600052B;
223             0xB60005A0000704A7;
224             0x000403AC;
225           };
226           [0] { // Traps
227           } // end Traps
228           [2] { // Attributes
229             Attr(#18, 6) { // LineNumberTable at 0x03D6
230               [1] { // LineNumberTable
231                 0  14; //  at 0x03E2
232               }
233             } // end LineNumberTable
234             ;
235             Attr(#22, 5) { // StackMapTable at 0x03E2
236               [2] { // 
237                 26b; // same_frame
238                 64b, [1]z{1b}; // same_locals_1_stack_item_frame
239               }
240             } // end StackMapTable
241           } // Attributes
242         } // end Code
243       } // Attributes
244     } // Member
245     ;
246     { // Member at 0x03ED
247       0x0001; // access
248       #23; // name_cpx
249       #24; // sig_cpx
250       [1] { // Attributes
251         Attr(#17, 87) { // Code at 0x03F5
252           2; // max_stack
253           2; // max_locals
254           Bytes[43]{
255             0x2BC100019900252B;
256             0xC00006B400022AB4;
257             0x0002A000152BC000;
258             0x06B400032AB40003;
259             0xA0000704A7000403;
260             0xAC03AC;
261           };
262           [0] { // Traps
263           } // end Traps
264           [2] { // Attributes
265             Attr(#18, 14) { // LineNumberTable at 0x0432
266               [3] { // LineNumberTable
267                 0  18; //  at 0x043E
268                 7  19; //  at 0x0442
269                 41  21; //  at 0x0446
270               }
271             } // end LineNumberTable
272             ;
273             Attr(#22, 6) { // StackMapTable at 0x0446
274               [3] { // 
275                 39b; // same_frame
276                 64b, [1]z{1b}; // same_locals_1_stack_item_frame
277                 0b; // same_frame
278               }
279             } // end StackMapTable
280           } // Attributes
281         } // end Code
282       } // Attributes
283     } // Member
284     ;
285     { // Member at 0x0452
286       0x0009; // access
287       #25; // name_cpx
288       #26; // sig_cpx
289       [1] { // Attributes
290         Attr(#17, 56) { // Code at 0x045A
291           2; // max_stack
292           3; // max_locals
293           Bytes[20]{
294             0xCB00014D1A2C5FCC;
295             0x00024D1B2C5FCC00;
296             0x034D2CB0;
297           };
298           [0] { // Traps
299           } // end Traps
300           [1] { // Attributes
301             Attr(#18, 18) { // LineNumberTable at 0x0480
302               [4] { // LineNumberTable
303                 0  26; //  at 0x048C
304                 4  27; //  at 0x0490
305                 11  28; //  at 0x0494
306                 18  29; //  at 0x0498
307               }
308             } // end LineNumberTable
309           } // Attributes
310         } // end Code
311       } // Attributes
312     } // Member
313     ;
314     { // Member at 0x0498
315       0x0009; // access
316       #27; // name_cpx
317       #28; // sig_cpx
318       [1] { // Attributes
319         Attr(#17, 62) { // Code at 0x04A0
320           2; // max_stack
321           5; // max_locals
322           Bytes[22]{
323             0x014C0607B800074D;
324             0x0507B800074E2C2B; // Change last nibble from C to B to load null
325             0xB600083604B1;
326           };
327           [0] { // Traps
328           } // end Traps
329           [1] { // Attributes
330             Attr(#18, 22) { // LineNumberTable at 0x04C8
331               [5] { // LineNumberTable
332                 0  33; //  at 0x04D4
333                 2  34; //  at 0x04D8
334                 8  35; //  at 0x04DC
335                 14  36; //  at 0x04E0
336                 21  37; //  at 0x04E4
337               }
338             } // end LineNumberTable
339           } // Attributes
340         } // end Code
341       } // Attributes
342     } // Member
343     ;
344     { // Member at 0x04E4
345       0x0011; // access
346       #29; // name_cpx
347       #16; // sig_cpx
348       [1] { // Attributes
349         Attr(#17, 31) { // Code at 0x04EC
350           1; // max_stack
351           1; // max_locals
352           Bytes[7]{
353             0x2ABA00090000AC;
354           };
355           [0] { // Traps
356           } // end Traps
357           [1] { // Attributes
358             Attr(#18, 6) { // LineNumberTable at 0x0505
359               [1] { // LineNumberTable
360                 0  1; //  at 0x0511
361               }
362             } // end LineNumberTable
363           } // Attributes
364         } // end Code
365       } // Attributes
366     } // Member
367     ;
368     { // Member at 0x0511
369       0x0011; // access
370       #30; // name_cpx
371       #31; // sig_cpx
372       [1] { // Attributes
373         Attr(#17, 31) { // Code at 0x0519
374           1; // max_stack
375           1; // max_locals
376           Bytes[7]{
377             0x2ABA000A0000B0;
378           };
379           [0] { // Traps
380           } // end Traps
381           [1] { // Attributes
382             Attr(#18, 6) { // LineNumberTable at 0x0532
383               [1] { // LineNumberTable
384                 0  1; //  at 0x053E
385               }
386             } // end LineNumberTable
387           } // Attributes
388         } // end Code
389       } // Attributes
390     } // Member
391     ;
392     { // Member at 0x053E
393       0x000A; // access
394       #32; // name_cpx
395       #33; // sig_cpx
396       [1] { // Attributes
397         Attr(#17, 56) { // Code at 0x0546
398           2; // max_stack
399           1; // max_locals
400           Bytes[20]{
401             0xCB00014B032A5FCC;
402             0x00024B032A5FCC00;
403             0x034B2AB0;
404           };
405           [0] { // Traps
406           } // end Traps
407           [1] { // Attributes
408             Attr(#18, 18) { // LineNumberTable at 0x056C
409               [4] { // LineNumberTable
410                 0  5; //  at 0x0578
411                 4  6; //  at 0x057C
412                 11  7; //  at 0x0580
413                 18  8; //  at 0x0584
414               }
415             } // end LineNumberTable
416           } // Attributes
417         } // end Code
418       } // Attributes
419     } // Member
420   } // methods
421 
422   [3] { // Attributes
423     Attr(#34, 2) { // SourceFile at 0x0586
424       #35;
425     } // end SourceFile
426     ;
427     Attr(#58, 10) { // InnerClasses at 0x058E
428       [1] { // InnerClasses
429         #56 #60 #57 25; //  at 0x059E
430       }
431     } // end InnerClasses
432     ;
433     Attr(#44, 6) { // BootstrapMethods at 0x059E
434       [1] { // bootstrap_methods
435         {  //  bootstrap_method
436           #45; // bootstrap_method_ref
437           [0] { // bootstrap_arguments
438           }  //  bootstrap_arguments
439         }  //  bootstrap_method
440       }
441     } // end BootstrapMethods
442   } // Attributes
443 } // end class NoNullVT
    </pre>
  </body>
</html>