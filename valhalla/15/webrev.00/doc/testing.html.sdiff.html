<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff doc/testing.html</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="building.md.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="testing.md.sdiff.html" target="_top">next &gt;</a></center>    <h2>doc/testing.html</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
110 &lt;p&gt;(Other ways are possible, e.g. using backslash: &lt;code&gt;JTREG=JOBS=1\;TIMEOUT_FACTOR=8&lt;/code&gt;. Also, as a special technique, the string &lt;code&gt;%20&lt;/code&gt; will be replaced with space for certain options, e.g. &lt;code&gt;JTREG=VM_OPTIONS=-XshowSettings%20-Xlog:gc+ref=debug&lt;/code&gt;. This can be useful if you have layers of scripts and have trouble getting proper quoting of command line arguments through.)&lt;/p&gt;
111 &lt;p&gt;As far as possible, the names of the keywords have been standardized between test suites.&lt;/p&gt;
112 &lt;h3 id=&quot;general-keywords-test_opts&quot;&gt;General keywords (TEST_OPTS)&lt;/h3&gt;
113 &lt;p&gt;Some keywords are valid across different test suites. If you want to run tests from multiple test suites, or just don&#39;t want to care which test suite specific control variable to use, then you can use the general TEST_OPTS control variable.&lt;/p&gt;
114 &lt;p&gt;There are also some keywords that applies globally to the test runner system, not to any specific test suites. These are also available as TEST_OPTS keywords.&lt;/p&gt;
115 &lt;h4 id=&quot;jobs&quot;&gt;JOBS&lt;/h4&gt;
116 &lt;p&gt;Currently only applies to JTReg.&lt;/p&gt;
117 &lt;h4 id=&quot;timeout_factor&quot;&gt;TIMEOUT_FACTOR&lt;/h4&gt;
118 &lt;p&gt;Currently only applies to JTReg.&lt;/p&gt;
119 &lt;h4 id=&quot;vm_options&quot;&gt;VM_OPTIONS&lt;/h4&gt;
120 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
121 &lt;h4 id=&quot;java_options&quot;&gt;JAVA_OPTIONS&lt;/h4&gt;
122 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
123 &lt;h4 id=&quot;aot_modules&quot;&gt;AOT_MODULES&lt;/h4&gt;
124 &lt;p&gt;Applies to JTReg and GTest.&lt;/p&gt;
125 &lt;h4 id=&quot;jcov&quot;&gt;JCOV&lt;/h4&gt;
126 &lt;p&gt;This keywords applies globally to the test runner system. If set to &lt;code&gt;true&lt;/code&gt;, it enables JCov coverage reporting for all tests run. To be useful, the JDK under test must be run with a JDK built with JCov instrumentation (&lt;code&gt;configure --with-jcov=&amp;lt;path to directory containing lib/jcov.jar&amp;gt;&lt;/code&gt;, &lt;code&gt;make jcov-image&lt;/code&gt;).&lt;/p&gt;
127 &lt;p&gt;The simplest way to run tests with JCov coverage report is to use the special target &lt;code&gt;jcov-test&lt;/code&gt; instead of &lt;code&gt;test&lt;/code&gt;, e.g. &lt;code&gt;make jcov-test TEST=jdk_lang&lt;/code&gt;. This will make sure the JCov image is built, and that JCov reporting is enabled.&lt;/p&gt;
128 &lt;p&gt;The JCov report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output&lt;/code&gt;.&lt;/p&gt;
129 &lt;p&gt;Please note that running with JCov reporting can be very memory intensive.&lt;/p&gt;



130 &lt;h3 id=&quot;jtreg-keywords&quot;&gt;JTReg keywords&lt;/h3&gt;
131 &lt;h4 id=&quot;jobs-1&quot;&gt;JOBS&lt;/h4&gt;
132 &lt;p&gt;The test concurrency (&lt;code&gt;-concurrency&lt;/code&gt;).&lt;/p&gt;
133 &lt;p&gt;Defaults to TEST_JOBS (if set by &lt;code&gt;--with-test-jobs=&lt;/code&gt;), otherwise it defaults to JOBS, except for Hotspot, where the default is &lt;em&gt;number of CPU cores/2&lt;/em&gt; (for sparc, if more than 16 cpus, then &lt;em&gt;number of CPU cores/5&lt;/em&gt;, otherwise &lt;em&gt;number of CPU cores/4&lt;/em&gt;), but never more than &lt;em&gt;memory size in GB/2&lt;/em&gt;.&lt;/p&gt;
134 &lt;h4 id=&quot;timeout_factor-1&quot;&gt;TIMEOUT_FACTOR&lt;/h4&gt;
135 &lt;p&gt;The timeout factor (&lt;code&gt;-timeoutFactor&lt;/code&gt;).&lt;/p&gt;
136 &lt;p&gt;Defaults to 4.&lt;/p&gt;
137 &lt;h4 id=&quot;test_mode&quot;&gt;TEST_MODE&lt;/h4&gt;
138 &lt;p&gt;The test mode (&lt;code&gt;agentvm&lt;/code&gt; or &lt;code&gt;othervm&lt;/code&gt;).&lt;/p&gt;
139 &lt;p&gt;Defaults to &lt;code&gt;agentvm&lt;/code&gt;.&lt;/p&gt;
140 &lt;h4 id=&quot;assert&quot;&gt;ASSERT&lt;/h4&gt;
141 &lt;p&gt;Enable asserts (&lt;code&gt;-ea -esa&lt;/code&gt;, or none).&lt;/p&gt;
142 &lt;p&gt;Set to &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;. If true, adds &lt;code&gt;-ea -esa&lt;/code&gt;. Defaults to true, except for hotspot.&lt;/p&gt;
143 &lt;h4 id=&quot;verbose&quot;&gt;VERBOSE&lt;/h4&gt;
144 &lt;p&gt;The verbosity level (&lt;code&gt;-verbose&lt;/code&gt;).&lt;/p&gt;
145 &lt;p&gt;Defaults to &lt;code&gt;fail,error,summary&lt;/code&gt;.&lt;/p&gt;
146 &lt;h4 id=&quot;retain&quot;&gt;RETAIN&lt;/h4&gt;
147 &lt;p&gt;What test data to retain (&lt;code&gt;-retain&lt;/code&gt;).&lt;/p&gt;
148 &lt;p&gt;Defaults to &lt;code&gt;fail,error&lt;/code&gt;.&lt;/p&gt;
149 &lt;h4 id=&quot;max_mem&quot;&gt;MAX_MEM&lt;/h4&gt;
</pre>
</td>
<td>
<hr />
<pre>
110 &lt;p&gt;(Other ways are possible, e.g. using backslash: &lt;code&gt;JTREG=JOBS=1\;TIMEOUT_FACTOR=8&lt;/code&gt;. Also, as a special technique, the string &lt;code&gt;%20&lt;/code&gt; will be replaced with space for certain options, e.g. &lt;code&gt;JTREG=VM_OPTIONS=-XshowSettings%20-Xlog:gc+ref=debug&lt;/code&gt;. This can be useful if you have layers of scripts and have trouble getting proper quoting of command line arguments through.)&lt;/p&gt;
111 &lt;p&gt;As far as possible, the names of the keywords have been standardized between test suites.&lt;/p&gt;
112 &lt;h3 id=&quot;general-keywords-test_opts&quot;&gt;General keywords (TEST_OPTS)&lt;/h3&gt;
113 &lt;p&gt;Some keywords are valid across different test suites. If you want to run tests from multiple test suites, or just don&#39;t want to care which test suite specific control variable to use, then you can use the general TEST_OPTS control variable.&lt;/p&gt;
114 &lt;p&gt;There are also some keywords that applies globally to the test runner system, not to any specific test suites. These are also available as TEST_OPTS keywords.&lt;/p&gt;
115 &lt;h4 id=&quot;jobs&quot;&gt;JOBS&lt;/h4&gt;
116 &lt;p&gt;Currently only applies to JTReg.&lt;/p&gt;
117 &lt;h4 id=&quot;timeout_factor&quot;&gt;TIMEOUT_FACTOR&lt;/h4&gt;
118 &lt;p&gt;Currently only applies to JTReg.&lt;/p&gt;
119 &lt;h4 id=&quot;vm_options&quot;&gt;VM_OPTIONS&lt;/h4&gt;
120 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
121 &lt;h4 id=&quot;java_options&quot;&gt;JAVA_OPTIONS&lt;/h4&gt;
122 &lt;p&gt;Applies to JTReg, GTest and Micro.&lt;/p&gt;
123 &lt;h4 id=&quot;aot_modules&quot;&gt;AOT_MODULES&lt;/h4&gt;
124 &lt;p&gt;Applies to JTReg and GTest.&lt;/p&gt;
125 &lt;h4 id=&quot;jcov&quot;&gt;JCOV&lt;/h4&gt;
126 &lt;p&gt;This keywords applies globally to the test runner system. If set to &lt;code&gt;true&lt;/code&gt;, it enables JCov coverage reporting for all tests run. To be useful, the JDK under test must be run with a JDK built with JCov instrumentation (&lt;code&gt;configure --with-jcov=&amp;lt;path to directory containing lib/jcov.jar&amp;gt;&lt;/code&gt;, &lt;code&gt;make jcov-image&lt;/code&gt;).&lt;/p&gt;
127 &lt;p&gt;The simplest way to run tests with JCov coverage report is to use the special target &lt;code&gt;jcov-test&lt;/code&gt; instead of &lt;code&gt;test&lt;/code&gt;, e.g. &lt;code&gt;make jcov-test TEST=jdk_lang&lt;/code&gt;. This will make sure the JCov image is built, and that JCov reporting is enabled.&lt;/p&gt;
128 &lt;p&gt;The JCov report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output&lt;/code&gt;.&lt;/p&gt;
129 &lt;p&gt;Please note that running with JCov reporting can be very memory intensive.&lt;/p&gt;
<span class="line-added">130 &lt;h4 id=&quot;jcov_diff_changeset&quot;&gt;JCOV_DIFF_CHANGESET&lt;/h4&gt;</span>
<span class="line-added">131 &lt;p&gt;While collecting code coverage with JCov, it is also possible to find coverage for only recently changed code. JCOV_DIFF_CHANGESET specifies a source revision. A textual report will be generated showing coverage of the diff between the specified revision and the repository tip.&lt;/p&gt;</span>
<span class="line-added">132 &lt;p&gt;The report is stored in &lt;code&gt;build/$BUILD/test-results/jcov-output/diff_coverage_report&lt;/code&gt; file.&lt;/p&gt;</span>
133 &lt;h3 id=&quot;jtreg-keywords&quot;&gt;JTReg keywords&lt;/h3&gt;
134 &lt;h4 id=&quot;jobs-1&quot;&gt;JOBS&lt;/h4&gt;
135 &lt;p&gt;The test concurrency (&lt;code&gt;-concurrency&lt;/code&gt;).&lt;/p&gt;
136 &lt;p&gt;Defaults to TEST_JOBS (if set by &lt;code&gt;--with-test-jobs=&lt;/code&gt;), otherwise it defaults to JOBS, except for Hotspot, where the default is &lt;em&gt;number of CPU cores/2&lt;/em&gt; (for sparc, if more than 16 cpus, then &lt;em&gt;number of CPU cores/5&lt;/em&gt;, otherwise &lt;em&gt;number of CPU cores/4&lt;/em&gt;), but never more than &lt;em&gt;memory size in GB/2&lt;/em&gt;.&lt;/p&gt;
137 &lt;h4 id=&quot;timeout_factor-1&quot;&gt;TIMEOUT_FACTOR&lt;/h4&gt;
138 &lt;p&gt;The timeout factor (&lt;code&gt;-timeoutFactor&lt;/code&gt;).&lt;/p&gt;
139 &lt;p&gt;Defaults to 4.&lt;/p&gt;
140 &lt;h4 id=&quot;test_mode&quot;&gt;TEST_MODE&lt;/h4&gt;
141 &lt;p&gt;The test mode (&lt;code&gt;agentvm&lt;/code&gt; or &lt;code&gt;othervm&lt;/code&gt;).&lt;/p&gt;
142 &lt;p&gt;Defaults to &lt;code&gt;agentvm&lt;/code&gt;.&lt;/p&gt;
143 &lt;h4 id=&quot;assert&quot;&gt;ASSERT&lt;/h4&gt;
144 &lt;p&gt;Enable asserts (&lt;code&gt;-ea -esa&lt;/code&gt;, or none).&lt;/p&gt;
145 &lt;p&gt;Set to &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt;. If true, adds &lt;code&gt;-ea -esa&lt;/code&gt;. Defaults to true, except for hotspot.&lt;/p&gt;
146 &lt;h4 id=&quot;verbose&quot;&gt;VERBOSE&lt;/h4&gt;
147 &lt;p&gt;The verbosity level (&lt;code&gt;-verbose&lt;/code&gt;).&lt;/p&gt;
148 &lt;p&gt;Defaults to &lt;code&gt;fail,error,summary&lt;/code&gt;.&lt;/p&gt;
149 &lt;h4 id=&quot;retain&quot;&gt;RETAIN&lt;/h4&gt;
150 &lt;p&gt;What test data to retain (&lt;code&gt;-retain&lt;/code&gt;).&lt;/p&gt;
151 &lt;p&gt;Defaults to &lt;code&gt;fail,error&lt;/code&gt;.&lt;/p&gt;
152 &lt;h4 id=&quot;max_mem&quot;&gt;MAX_MEM&lt;/h4&gt;
</pre>
</td>
</tr>
</table>
<center><a href="building.md.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="testing.md.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>