<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/jdk/internal/icu/impl/CharTrie.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../access/JavaLangAccess.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ICUBinary.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/jdk/internal/icu/impl/CharTrie.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 50,20 ***</span>
  public class CharTrie extends Trie
  {
      // public constructors ---------------------------------------------
  
      /**
<span class="line-modified">!     * &lt;p&gt;Creates a new Trie with the settings for the trie data.&lt;/p&gt;</span>
<span class="line-modified">!     * &lt;p&gt;Unserialize the 32-bit-aligned input stream and use the data for the</span>
<span class="line-modified">!     * trie.&lt;/p&gt;</span>
<span class="line-modified">!     * @param inputStream file input stream to a ICU data file, containing</span>
<span class="line-modified">!     *                    the trie</span>
<span class="line-modified">!     * @param dataManipulate object which provides methods to parse the char</span>
<span class="line-modified">!     *                        data</span>
<span class="line-modified">!     * @throws IOException thrown when data reading fails</span>
<span class="line-modified">!     * @draft 2.1</span>
<span class="line-modified">!     */</span>
      public CharTrie(InputStream inputStream,
                      DataManipulate dataManipulate) throws IOException
      {
          super(inputStream, dataManipulate);
  
<span class="line-new-header">--- 50,20 ---</span>
  public class CharTrie extends Trie
  {
      // public constructors ---------------------------------------------
  
      /**
<span class="line-modified">!      * &lt;p&gt;Creates a new Trie with the settings for the trie data.&lt;/p&gt;</span>
<span class="line-modified">!      * &lt;p&gt;Unserialize the 32-bit-aligned input stream and use the data for the</span>
<span class="line-modified">!      * trie.&lt;/p&gt;</span>
<span class="line-modified">!      * @param inputStream file input stream to a ICU data file, containing</span>
<span class="line-modified">!      *                    the trie</span>
<span class="line-modified">!      * @param dataManipulate object which provides methods to parse the char</span>
<span class="line-modified">!      *                        data</span>
<span class="line-modified">!      * @throws IOException thrown when data reading fails</span>
<span class="line-modified">!      * @draft 2.1</span>
<span class="line-modified">!      */</span>
      public CharTrie(InputStream inputStream,
                      DataManipulate dataManipulate) throws IOException
      {
          super(inputStream, dataManipulate);
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 101,31 ***</span>
          // value: m_initialValue_
          return (offset &gt;= 0) ? m_data_[offset] : m_initialValue_;
      }
  
      /**
<span class="line-modified">!     * Gets the value to the data which this lead surrogate character points</span>
<span class="line-modified">!     * to.</span>
<span class="line-modified">!     * Returned data may contain folding offset information for the next</span>
<span class="line-modified">!     * trailing surrogate character.</span>
<span class="line-modified">!     * This method does not guarantee correct results for trail surrogates.</span>
<span class="line-modified">!     * @param ch lead surrogate character</span>
<span class="line-modified">!     * @return data value</span>
<span class="line-modified">!     */</span>
      public final char getLeadValue(char ch)
      {
         return m_data_[getLeadOffset(ch)];
      }
  
      // protected methods -----------------------------------------------
  
      /**
<span class="line-modified">!     * &lt;p&gt;Parses the input stream and stores its trie content into a index and</span>
<span class="line-modified">!     * data array&lt;/p&gt;</span>
<span class="line-modified">!     * @param inputStream data input stream containing trie data</span>
<span class="line-modified">!     * @exception IOException thrown when data reading fails</span>
<span class="line-modified">!     */</span>
      protected final void unserialize(InputStream inputStream)
                                                  throws IOException
      {
          DataInputStream input = new DataInputStream(inputStream);
          int indexDataLength = m_dataOffset_ + m_dataLength_;
<span class="line-new-header">--- 101,31 ---</span>
          // value: m_initialValue_
          return (offset &gt;= 0) ? m_data_[offset] : m_initialValue_;
      }
  
      /**
<span class="line-modified">!      * Gets the value to the data which this lead surrogate character points</span>
<span class="line-modified">!      * to.</span>
<span class="line-modified">!      * Returned data may contain folding offset information for the next</span>
<span class="line-modified">!      * trailing surrogate character.</span>
<span class="line-modified">!      * This method does not guarantee correct results for trail surrogates.</span>
<span class="line-modified">!      * @param ch lead surrogate character</span>
<span class="line-modified">!      * @return data value</span>
<span class="line-modified">!      */</span>
      public final char getLeadValue(char ch)
      {
         return m_data_[getLeadOffset(ch)];
      }
  
      // protected methods -----------------------------------------------
  
      /**
<span class="line-modified">!      * &lt;p&gt;Parses the input stream and stores its trie content into a index and</span>
<span class="line-modified">!      * data array&lt;/p&gt;</span>
<span class="line-modified">!      * @param inputStream data input stream containing trie data</span>
<span class="line-modified">!      * @exception IOException thrown when data reading fails</span>
<span class="line-modified">!      */</span>
      protected final void unserialize(InputStream inputStream)
                                                  throws IOException
      {
          DataInputStream input = new DataInputStream(inputStream);
          int indexDataLength = m_dataOffset_ + m_dataLength_;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 136,16 ***</span>
          m_data_           = m_index_;
          m_initialValue_   = m_data_[m_dataOffset_];
      }
  
      /**
<span class="line-modified">!     * Gets the offset to the data which the surrogate pair points to.</span>
<span class="line-modified">!     * @param lead lead surrogate</span>
<span class="line-modified">!     * @param trail trailing surrogate</span>
<span class="line-modified">!     * @return offset to data</span>
<span class="line-modified">!     * @draft 2.1</span>
<span class="line-modified">!     */</span>
      protected final int getSurrogateOffset(char lead, char trail)
      {
          if (m_dataManipulate_ == null) {
              throw new NullPointerException(
                               &quot;The field DataManipulate in this Trie is null&quot;);
<span class="line-new-header">--- 136,16 ---</span>
          m_data_           = m_index_;
          m_initialValue_   = m_data_[m_dataOffset_];
      }
  
      /**
<span class="line-modified">!      * Gets the offset to the data which the surrogate pair points to.</span>
<span class="line-modified">!      * @param lead lead surrogate</span>
<span class="line-modified">!      * @param trail trailing surrogate</span>
<span class="line-modified">!      * @return offset to data</span>
<span class="line-modified">!      * @draft 2.1</span>
<span class="line-modified">!      */</span>
      protected final int getSurrogateOffset(char lead, char trail)
      {
          if (m_dataManipulate_ == null) {
              throw new NullPointerException(
                               &quot;The field DataManipulate in this Trie is null&quot;);
</pre>
<center><a href="../../access/JavaLangAccess.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="ICUBinary.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>