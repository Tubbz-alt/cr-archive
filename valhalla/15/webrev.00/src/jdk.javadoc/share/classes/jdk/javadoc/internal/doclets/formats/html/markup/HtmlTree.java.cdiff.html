<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/markup/HtmlTree.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="HtmlStyle.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="RawHtml.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/markup/HtmlTree.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 25,174 ***</span>
  
  package jdk.javadoc.internal.doclets.formats.html.markup;
  
  import java.io.IOException;
  import java.io.Writer;
<span class="line-modified">! import java.nio.charset.Charset;</span>
  import java.util.ArrayList;
  import java.util.BitSet;
<span class="line-removed">- import java.util.Collections;</span>
  import java.util.Iterator;
  import java.util.LinkedHashMap;
  import java.util.List;
  import java.util.Map;
  
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr.Role;
  import jdk.javadoc.internal.doclets.toolkit.Content;
  import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;
  
  /**
<span class="line-modified">!  * Class for generating HTML tree for javadoc output.</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
   */
  public class HtmlTree extends Content {
  
<span class="line-modified">!     public final HtmlTag htmlTag;</span>
<span class="line-modified">!     private Map&lt;HtmlAttr,String&gt; attrs = Collections.emptyMap();</span>
<span class="line-modified">!     private List&lt;Content&gt; content = Collections.emptyList();</span>
<span class="line-modified">!     public static final Content EMPTY = new StringContent(&quot;&quot;);</span>
  
      /**
<span class="line-modified">!      * Constructor to construct HtmlTree object.</span>
<span class="line-modified">!      *</span>
<span class="line-removed">-      * @param tag HTML tag for the HtmlTree object</span>
       */
<span class="line-modified">!     public HtmlTree(HtmlTag tag) {</span>
<span class="line-removed">-         htmlTag = nullCheck(tag);</span>
<span class="line-removed">-     }</span>
  
      /**
<span class="line-modified">!      * Constructor to construct HtmlTree object.</span>
<span class="line-modified">!      *</span>
<span class="line-removed">-      * @param tag HTML tag for the HtmlTree object</span>
<span class="line-removed">-      * @param contents contents to be added to the tree</span>
       */
<span class="line-modified">!     public HtmlTree(HtmlTag tag, Content... contents) {</span>
<span class="line-removed">-         this(tag);</span>
<span class="line-removed">-         for (Content c: contents)</span>
<span class="line-removed">-             add(c);</span>
<span class="line-removed">-     }</span>
  
      /**
<span class="line-modified">!      * Constructor to construct HtmlTree object.</span>
       *
<span class="line-modified">!      * @param tag HTML tag for the HtmlTree object</span>
<span class="line-removed">-      * @param contents contents to be added to the tree</span>
       */
<span class="line-modified">!     public HtmlTree(HtmlTag tag, List&lt;Content&gt; contents) {</span>
<span class="line-modified">!         this(tag);</span>
<span class="line-removed">-         for (Content c: contents)</span>
<span class="line-removed">-             add(c);</span>
      }
  
      /**
<span class="line-modified">!      * Adds an attribute for the HTML tag.</span>
       *
<span class="line-modified">!      * @param attrName name of the attribute</span>
<span class="line-modified">!      * @param attrValue value of the attribute</span>
       * @return this object
       */
      public HtmlTree put(HtmlAttr attrName, String attrValue) {
          if (attrs.isEmpty())
              attrs = new LinkedHashMap&lt;&gt;(3);
<span class="line-modified">!         attrs.put(nullCheck(attrName), Entity.escapeHtmlChars(attrValue));</span>
          return this;
      }
  
      /**
<span class="line-modified">!      * Sets the &quot;id&quot; attribute for this tag.</span>
       *
<span class="line-modified">!      * @param id the value for the id attribute</span>
       * @return this object
       */
      public HtmlTree setId(String id) {
<span class="line-modified">!         put(HtmlAttr.ID, id);</span>
<span class="line-removed">-         return this;</span>
      }
  
      /**
<span class="line-modified">!      * Sets the &quot;title&quot; attribute for this tag.</span>
<span class="line-modified">!      * Any HTML tags in the content will be removed.</span>
       *
       * @param body the content for the title attribute
       * @return this object
       */
      public HtmlTree setTitle(Content body) {
<span class="line-modified">!         put(HtmlAttr.TITLE, stripHtml(body));</span>
<span class="line-removed">-         return this;</span>
      }
  
      /**
<span class="line-modified">!      * Sets the &quot;role&quot; attribute for this tag.</span>
       *
       * @param role the role
       * @return this object
       */
      public HtmlTree setRole(Role role) {
<span class="line-modified">!         put(HtmlAttr.ROLE, role.toString());</span>
<span class="line-removed">-         return this;</span>
      }
  
      /**
<span class="line-modified">!      * Sets the style for the HTML tag.</span>
       *
<span class="line-modified">!      * @param style style to be added</span>
       * @return this object
       */
      public HtmlTree setStyle(HtmlStyle style) {
<span class="line-modified">!         put(HtmlAttr.CLASS, style.toString());</span>
<span class="line-removed">-         return this;</span>
      }
  
      /**
<span class="line-modified">!      * Adds content for the HTML tag.</span>
       *
<span class="line-modified">!      * @param tagContent tag content to be added</span>
       */
      @Override
<span class="line-modified">!     public void add(Content tagContent) {</span>
<span class="line-modified">!         if (tagContent instanceof ContentBuilder) {</span>
<span class="line-modified">!             for (Content c: ((ContentBuilder)tagContent).contents) {</span>
<span class="line-removed">-                 add(c);</span>
<span class="line-removed">-             }</span>
          }
<span class="line-modified">!         else if (tagContent == HtmlTree.EMPTY || tagContent.isValid()) {</span>
<span class="line-modified">!             if (content.isEmpty())</span>
<span class="line-modified">!                 content = new ArrayList&lt;&gt;();</span>
<span class="line-modified">!             content.add(tagContent);</span>
          }
      }
  
      /**
<span class="line-modified">!      * Adds String content to the HTML tree. If the last content member</span>
<span class="line-modified">!      * added is a StringContent, append the string to that StringContent or else</span>
<span class="line-modified">!      * create a new StringContent and add it to the HTML tree.</span>
       *
       * @param stringContent string content that needs to be added
       */
      @Override
<span class="line-modified">!     public void add(CharSequence stringContent) {</span>
          if (!content.isEmpty()) {
              Content lastContent = content.get(content.size() - 1);
              if (lastContent instanceof StringContent)
                  lastContent.add(stringContent);
<span class="line-modified">!             else</span>
                  add(new StringContent(stringContent));
          }
<span class="line-modified">!         else</span>
              add(new StringContent(stringContent));
      }
  
      @Override
      public int charCount() {
          int n = 0;
<span class="line-modified">!         for (Content c : content)</span>
              n += c.charCount();
          return n;
      }
  
      /*
       * The sets of ASCII URI characters to be left unencoded.
<span class="line-new-header">--- 25,198 ---</span>
  
  package jdk.javadoc.internal.doclets.formats.html.markup;
  
  import java.io.IOException;
  import java.io.Writer;
<span class="line-modified">! import java.nio.charset.StandardCharsets;</span>
  import java.util.ArrayList;
  import java.util.BitSet;
  import java.util.Iterator;
  import java.util.LinkedHashMap;
  import java.util.List;
  import java.util.Map;
<span class="line-added">+ import java.util.Objects;</span>
  
  import jdk.javadoc.internal.doclets.formats.html.markup.HtmlAttr.Role;
  import jdk.javadoc.internal.doclets.toolkit.Content;
  import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;
  
  /**
<span class="line-modified">!  * A tree node representing an HTML element, containing the name of the element,</span>
<span class="line-added">+  * a collection of attributes, and content.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Except where otherwise stated, all methods in this class will throw</span>
<span class="line-added">+  * {@code NullPointerException} for any arguments that are {@code null}</span>
<span class="line-added">+  * or that are arrays or collections that contain {@code null}.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Many methods in this class return {@code this}, to enable a series</span>
<span class="line-added">+  * of chained method calls on a single object.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Terminology: An HTML element is typically composed of a start tag, some</span>
<span class="line-added">+  * enclosed content and typically an end tag. The start tag contains any</span>
<span class="line-added">+  * attributes for the element. See:</span>
<span class="line-added">+  * &lt;a href=&quot;https://en.wikipedia.org/wiki/HTML_element&quot;&gt;HTML element&lt;/a&gt;.</span>
   *
   *  &lt;p&gt;&lt;b&gt;This is NOT part of any supported API.
   *  If you write code that depends on this, you do so at your own risk.
   *  This code and its internal interfaces are subject to change or
   *  deletion without notice.&lt;/b&gt;
<span class="line-added">+  *</span>
<span class="line-added">+  * @see &lt;a href=&quot;https://html.spec.whatwg.org/multipage/syntax.html#normal-elements&quot;&gt;WhatWG: Normal Elements&lt;/a&gt;</span>
<span class="line-added">+  * @see &lt;a href=&quot;https://www.w3.org/TR/html51/syntax.html#writing-html-documents-elements&quot;&gt;HTML 5.1: Elements&lt;/a&gt;</span>
   */
  public class HtmlTree extends Content {
  
<span class="line-modified">!     /**</span>
<span class="line-modified">!      * The name of the HTML element.</span>
<span class="line-modified">!      * This value is never {@code null}.</span>
<span class="line-modified">!      */</span>
<span class="line-added">+     public final TagName tagName;</span>
  
      /**
<span class="line-modified">!      * The attributes for the HTML element.</span>
<span class="line-modified">!      * The keys and values in this map are never {@code null}.</span>
       */
<span class="line-modified">!     private Map&lt;HtmlAttr, String&gt; attrs = Map.of();</span>
  
      /**
<span class="line-modified">!      * The enclosed content (&quot;inner HTML&quot;) for this HTML element.</span>
<span class="line-modified">!      * The items in this list are never null.</span>
       */
<span class="line-modified">!     private List&lt;Content&gt; content = List.of();</span>
  
      /**
<span class="line-modified">!      * A sentinel value to explicitly indicate empty content.</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public static final Content EMPTY = new StringContent(&quot;&quot;);</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Creates an {@code HTMLTree} object representing an HTML element</span>
<span class="line-added">+      * with the given name.</span>
       *
<span class="line-modified">!      * @param tagName the name</span>
       */
<span class="line-modified">!     public HtmlTree(TagName tagName) {</span>
<span class="line-modified">!         this.tagName = Objects.requireNonNull(tagName);</span>
      }
  
      /**
<span class="line-modified">!      * Adds an attribute.</span>
       *
<span class="line-modified">!      * @param attrName  the name of the attribute</span>
<span class="line-modified">!      * @param attrValue the value of the attribute</span>
       * @return this object
       */
      public HtmlTree put(HtmlAttr attrName, String attrValue) {
          if (attrs.isEmpty())
              attrs = new LinkedHashMap&lt;&gt;(3);
<span class="line-modified">!         attrs.put(Objects.requireNonNull(attrName), Entity.escapeHtmlChars(attrValue));</span>
          return this;
      }
  
      /**
<span class="line-modified">!      * Sets the {@code id} attribute.</span>
       *
<span class="line-modified">!      * @param id the value for the attribute</span>
       * @return this object
       */
      public HtmlTree setId(String id) {
<span class="line-modified">!         return put(HtmlAttr.ID, id);</span>
      }
  
      /**
<span class="line-modified">!      * Sets the {@code title} attribute.</span>
<span class="line-modified">!      * Any nested start or end tags in the content will be removed.</span>
       *
       * @param body the content for the title attribute
       * @return this object
       */
      public HtmlTree setTitle(Content body) {
<span class="line-modified">!         return put(HtmlAttr.TITLE, stripHtml(body));</span>
      }
  
      /**
<span class="line-modified">!      * Sets the {@code role} attribute.</span>
       *
       * @param role the role
       * @return this object
       */
      public HtmlTree setRole(Role role) {
<span class="line-modified">!         return put(HtmlAttr.ROLE, role.toString());</span>
      }
  
      /**
<span class="line-modified">!      * Sets the {@code class} attribute.</span>
       *
<span class="line-modified">!      * @param style the value for the attribute</span>
       * @return this object
       */
      public HtmlTree setStyle(HtmlStyle style) {
<span class="line-modified">!         return put(HtmlAttr.CLASS, style.cssName());</span>
      }
  
      /**
<span class="line-modified">!      * Adds additional content for the HTML element.</span>
       *
<span class="line-modified">!      * @param content the content</span>
       */
      @Override
<span class="line-modified">!     public HtmlTree add(Content content) {</span>
<span class="line-modified">!         if (content instanceof ContentBuilder) {</span>
<span class="line-modified">!             ((ContentBuilder) content).contents.forEach(this::add);</span>
          }
<span class="line-modified">!         else if (content == HtmlTree.EMPTY || content.isValid()) {</span>
<span class="line-modified">!             // quietly avoid adding empty or invalid nodes (except EMPTY)</span>
<span class="line-modified">!             if (this.content.isEmpty())</span>
<span class="line-modified">!                 this.content = new ArrayList&lt;&gt;();</span>
<span class="line-added">+             this.content.add(content);</span>
          }
<span class="line-added">+         return this;</span>
      }
  
      /**
<span class="line-modified">!      * Adds text content for the HTML element.</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * If the last content member that was added is a {@code StringContent},</span>
<span class="line-added">+      * appends the string to that item; otherwise, creates and uses a new {@code StringContent}</span>
<span class="line-added">+      * for the new text content.</span>
       *
       * @param stringContent string content that needs to be added
       */
      @Override
<span class="line-modified">!     public HtmlTree add(CharSequence stringContent) {</span>
          if (!content.isEmpty()) {
              Content lastContent = content.get(content.size() - 1);
              if (lastContent instanceof StringContent)
                  lastContent.add(stringContent);
<span class="line-modified">!             else {</span>
                  add(new StringContent(stringContent));
<span class="line-added">+             }</span>
          }
<span class="line-modified">!         else {</span>
              add(new StringContent(stringContent));
<span class="line-added">+         }</span>
<span class="line-added">+         return this;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Adds each of a list of content items.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @param list the list</span>
<span class="line-added">+      * @return this object</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public HtmlTree add(List&lt;? extends Content&gt; list) {</span>
<span class="line-added">+         list.forEach(this::add);</span>
<span class="line-added">+         return this;</span>
      }
  
      @Override
      public int charCount() {
          int n = 0;
<span class="line-modified">!         for (Content c : content) {</span>
              n += c.charCount();
<span class="line-added">+         }</span>
          return n;
      }
  
      /*
       * The sets of ASCII URI characters to be left unencoded.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 245,11 ***</span>
       * @return a percent-encoded string.
       */
      public static String encodeURL(String url) {
          BitSet nonEncodingChars = MAIN_CHARS;
          StringBuilder sb = new StringBuilder();
<span class="line-modified">!         for (byte c : url.getBytes(Charset.forName(&quot;UTF-8&quot;))) {</span>
              if (c == &#39;?&#39; || c == &#39;#&#39;) {
                  sb.append((char) c);
                  // switch to the more restrictive set inside
                  // the query and/or fragment
                  nonEncodingChars = QUERY_FRAGMENT_CHARS;
<span class="line-new-header">--- 269,11 ---</span>
       * @return a percent-encoded string.
       */
      public static String encodeURL(String url) {
          BitSet nonEncodingChars = MAIN_CHARS;
          StringBuilder sb = new StringBuilder();
<span class="line-modified">!         for (byte c : url.getBytes(StandardCharsets.UTF_8)) {</span>
              if (c == &#39;?&#39; || c == &#39;#&#39;) {
                  sb.append((char) c);
                  // switch to the more restrictive set inside
                  // the query and/or fragment
                  nonEncodingChars = QUERY_FRAGMENT_CHARS;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 261,618 ***</span>
          }
          return sb.toString();
      }
  
      /**
<span class="line-modified">!      * Generates an HTML anchor tag.</span>
       *
<span class="line-modified">!      * @param ref reference url for the anchor tag</span>
<span class="line-modified">!      * @param body content for the anchor tag</span>
<span class="line-modified">!      * @return an HtmlTree object</span>
       */
      public static HtmlTree A(String ref, Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.A, nullCheck(body));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.HREF, encodeURL(ref));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a CAPTION tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the CAPTION tag</span>
       */
      public static HtmlTree CAPTION(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.CAPTION, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a CODE tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the CODE tag</span>
       */
      public static HtmlTree CODE(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.CODE, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a DD tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the DD tag</span>
       */
      public static HtmlTree DD(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.DD, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a DL tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the DL tag</span>
       */
<span class="line-modified">!     public static HtmlTree DL(Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.DL, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a DIV tag with the style class attributes. It also encloses</span>
<span class="line-removed">-      * a content.</span>
       *
<span class="line-modified">!      * @param styleClass stylesheet class for the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the DIV tag</span>
       */
<span class="line-modified">!     public static HtmlTree DIV(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.DIV, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null)</span>
<span class="line-modified">!             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a DIV tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the DIV tag</span>
       */
      public static HtmlTree DIV(Content body) {
<span class="line-modified">!         return DIV(null, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a DT tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the DT tag</span>
       */
      public static HtmlTree DT(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.DT, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a FOOTER tag with role attribute.</span>
       *
<span class="line-modified">!      * @return an HtmlTree object for the FOOTER tag</span>
       */
      public static HtmlTree FOOTER() {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.FOOTER);</span>
<span class="line-modified">!         htmltree.setRole(Role.CONTENTINFO);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a HEADER tag with role attribute.</span>
       *
<span class="line-modified">!      * @return an HtmlTree object for the HEADER tag</span>
       */
      public static HtmlTree HEADER() {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.HEADER);</span>
<span class="line-modified">!         htmltree.setRole(Role.BANNER);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a heading tag (h1 to h6) with the title and style class attributes. It also encloses</span>
<span class="line-removed">-      * a content.</span>
       *
<span class="line-modified">!      * @param headingTag the heading tag to be generated</span>
<span class="line-modified">!      * @param printTitle true if title for the tag needs to be printed else false</span>
<span class="line-modified">!      * @param styleClass stylesheet class for the tag</span>
<span class="line-removed">-      * @param body content for the tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the tag</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING(HtmlTag headingTag, boolean printTitle,</span>
<span class="line-modified">!             HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(headingTag, nullCheck(body));</span>
<span class="line-removed">-         if (printTitle)</span>
<span class="line-removed">-             htmltree.setTitle(body);</span>
<span class="line-removed">-         if (styleClass != null)</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a heading tag (h1 to h6) with style class attribute. It also encloses</span>
<span class="line-removed">-      * a content.</span>
       *
<span class="line-modified">!      * @param headingTag the heading tag to be generated</span>
<span class="line-modified">!      * @param styleClass stylesheet class for the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the tag</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING(HtmlTag headingTag, HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         return HEADING(headingTag, false, styleClass, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a heading tag (h1 to h6) with the title attribute. It also encloses</span>
<span class="line-modified">!      * a content.</span>
       *
<span class="line-modified">!      * @param headingTag the heading tag to be generated</span>
<span class="line-modified">!      * @param printTitle true if the title for the tag needs to be printed else false</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the tag</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING(HtmlTag headingTag, boolean printTitle, Content body) {</span>
<span class="line-modified">!         return HEADING(headingTag, printTitle, null, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a heading tag (h1 to h6)  with some content.</span>
       *
<span class="line-modified">!      * @param headingTag the heading tag to be generated</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the tag</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING(HtmlTag headingTag, Content body) {</span>
<span class="line-modified">!         return HEADING(headingTag, false, null, body);</span>
      }
  
<span class="line-modified">!     /**</span>
<span class="line-modified">!      * Generates an HTML tag with lang attribute. It also adds head and body</span>
<span class="line-modified">!      * content to the HTML tree.</span>
<span class="line-modified">!      *</span>
<span class="line-modified">!      * @param lang language for the HTML document</span>
<span class="line-modified">!      * @param head head for the HTML tag</span>
<span class="line-modified">!      * @param body body for the HTML tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the HTML tag</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     public static HtmlTree HTML(String lang, Content head, Content body) {</span>
<span class="line-removed">-         HtmlTree htmltree = new HtmlTree(HtmlTag.HTML, nullCheck(head), nullCheck(body));</span>
<span class="line-removed">-         htmltree.put(HtmlAttr.LANG, nullCheck(lang));</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a IFRAME tag.</span>
       *
<span class="line-modified">!      * @param src the url of the document to be shown in the frame</span>
<span class="line-modified">!      * @param name specifies the name of the frame</span>
<span class="line-modified">!      * @param title the title for the frame</span>
<span class="line-modified">!      * @return an HtmlTree object for the IFRAME tag</span>
       */
<span class="line-modified">!     public static HtmlTree IFRAME(String src, String name, String title) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.IFRAME);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.SRC, nullCheck(src));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.NAME, nullCheck(name));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.TITLE, nullCheck(title));</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a INPUT tag with some id.</span>
       *
<span class="line-modified">!      * @param type the type of input</span>
<span class="line-modified">!      * @param id id for the tag</span>
<span class="line-modified">!      * @param value value for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the INPUT tag</span>
       */
      public static HtmlTree INPUT(String type, String id, String value) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.INPUT);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.TYPE, nullCheck(type));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.ID, nullCheck(id));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.VALUE, nullCheck(value));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.DISABLED, &quot;disabled&quot;);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a LABEL tag with some content.</span>
       *
<span class="line-modified">!      * @param forLabel value of &quot;for&quot; attribute of the LABEL tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the LABEL tag</span>
       */
      public static HtmlTree LABEL(String forLabel, Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.LABEL, nullCheck(body));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.FOR, nullCheck(forLabel));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a LI tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the LI tag</span>
       */
      public static HtmlTree LI(Content body) {
<span class="line-modified">!         return LI(null, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a LI tag with some content.</span>
       *
<span class="line-modified">!      * @param styleClass style for the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the LI tag</span>
       */
<span class="line-modified">!     public static HtmlTree LI(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.LI, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null)</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a LINK tag with the rel, type, href and title attributes.</span>
       *
<span class="line-modified">!      * @param rel relevance of the link</span>
<span class="line-modified">!      * @param type type of link</span>
<span class="line-modified">!      * @param href the path for the link</span>
<span class="line-modified">!      * @param title title for the link</span>
<span class="line-modified">!      * @return an HtmlTree object for the LINK tag</span>
       */
      public static HtmlTree LINK(String rel, String type, String href, String title) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.LINK);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.REL, nullCheck(rel));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.TYPE, nullCheck(type));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.HREF, nullCheck(href));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.TITLE, nullCheck(title));</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a MAIN tag with role attribute.</span>
       *
<span class="line-modified">!      * @return an HtmlTree object for the MAIN tag</span>
       */
      public static HtmlTree MAIN() {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.MAIN);</span>
<span class="line-modified">!         htmltree.setRole(Role.MAIN);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a MAIN tag with role attribute and some content.</span>
       *
<span class="line-modified">!      * @param body content of the MAIN tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the MAIN tag</span>
       */
      public static HtmlTree MAIN(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.MAIN, nullCheck(body));</span>
<span class="line-modified">!         htmltree.setRole(Role.MAIN);</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a META tag with the http-equiv, content and charset attributes.</span>
       *
<span class="line-modified">!      * @param httpEquiv http equiv attribute for the META tag</span>
<span class="line-modified">!      * @param content type of content</span>
<span class="line-modified">!      * @param charSet character set used</span>
<span class="line-modified">!      * @return an HtmlTree object for the META tag</span>
       */
<span class="line-modified">!     public static HtmlTree META(String httpEquiv, String content, String charSet) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.META);</span>
<span class="line-modified">!         String contentCharset = content + &quot;; charset=&quot; + charSet;</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.HTTP_EQUIV, nullCheck(httpEquiv));</span>
<span class="line-removed">-         htmltree.put(HtmlAttr.CONTENT, contentCharset);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a META tag with the name and content attributes.</span>
       *
<span class="line-modified">!      * @param name name attribute</span>
<span class="line-modified">!      * @param content type of content</span>
<span class="line-modified">!      * @return an HtmlTree object for the META tag</span>
       */
      public static HtmlTree META(String name, String content) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.META);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.NAME, nullCheck(name));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.CONTENT, nullCheck(content));</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a NAV tag with the role attribute.</span>
       *
<span class="line-modified">!      * @return an HtmlTree object for the NAV tag</span>
       */
      public static HtmlTree NAV() {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.NAV);</span>
<span class="line-modified">!         htmltree.setRole(Role.NAVIGATION);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a NOSCRIPT tag with some content.</span>
       *
<span class="line-modified">!      * @param body content of the noscript tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the NOSCRIPT tag</span>
       */
      public static HtmlTree NOSCRIPT(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.NOSCRIPT, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a P tag with some content.</span>
       *
<span class="line-modified">!      * @param body content of the Paragraph tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the P tag</span>
       */
      public static HtmlTree P(Content body) {
<span class="line-modified">!         return P(null, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a P tag with some content.</span>
       *
<span class="line-modified">!      * @param styleClass style of the Paragraph tag</span>
<span class="line-modified">!      * @param body content of the Paragraph tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the P tag</span>
       */
<span class="line-modified">!     public static HtmlTree P(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.P, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null)</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a SCRIPT tag with the type and src attributes.</span>
       *
<span class="line-modified">!      * @param src the path for the script</span>
<span class="line-modified">!      * @return an HtmlTree object for the SCRIPT tag</span>
       */
      public static HtmlTree SCRIPT(String src) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.SCRIPT);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.TYPE, &quot;text/javascript&quot;);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.SRC, nullCheck(src));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a SECTION tag with style class attribute.</span>
       *
<span class="line-modified">!      * @param styleClass the style class for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the SECTION tag</span>
       */
<span class="line-modified">!     public static HtmlTree SECTION(HtmlStyle styleClass) {</span>
<span class="line-modified">!         HtmlTree htmlTree = new HtmlTree(HtmlTag.SECTION);</span>
<span class="line-modified">!         htmlTree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmlTree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a SECTION tag with style class attribute and some content.</span>
       *
<span class="line-modified">!      * @param styleClass the style class for the tag</span>
<span class="line-modified">!      * @param body content of the section tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the SECTION tag</span>
       */
<span class="line-modified">!     public static HtmlTree SECTION(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         HtmlTree htmlTree = new HtmlTree(HtmlTag.SECTION, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null) {</span>
<span class="line-modified">!             htmlTree.setStyle(styleClass);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         return htmlTree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a SMALL tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the SMALL tag</span>
       */
      public static HtmlTree SMALL(Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.SMALL, nullCheck(body));</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a SPAN tag with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the SPAN tag</span>
       */
      public static HtmlTree SPAN(Content body) {
<span class="line-modified">!         return SPAN(null, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a SPAN tag with style class attribute and some content.</span>
       *
<span class="line-modified">!      * @param styleClass style class for the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the SPAN tag</span>
       */
      public static HtmlTree SPAN(HtmlStyle styleClass, Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.SPAN, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null)</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates an SPAN tag with id attribute and a body.</span>
       *
<span class="line-modified">!      * @param id id for the tag</span>
<span class="line-modified">!      * @param body body for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the SPAN tag</span>
       */
      public static HtmlTree SPAN_ID(String id, Content body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.SPAN, nullCheck(body));</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.ID, nullCheck(id));</span>
<span class="line-modified">!         return htmltree;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Generates a SPAN tag with id and style class attributes. It also encloses</span>
<span class="line-removed">-      * a content.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param id the id for the tag</span>
<span class="line-removed">-      * @param styleClass stylesheet class for the tag</span>
<span class="line-removed">-      * @param body content for the tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the SPAN tag</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     public static HtmlTree SPAN(String id, HtmlStyle styleClass, Content body) {</span>
<span class="line-removed">-         HtmlTree htmltree = new HtmlTree(HtmlTag.SPAN, nullCheck(body));</span>
<span class="line-removed">-         htmltree.put(HtmlAttr.ID, nullCheck(id));</span>
<span class="line-removed">-         if (styleClass != null)</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         return htmltree;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Generates a Table tag with style class and summary attributes and some content.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param styleClass style of the table</span>
<span class="line-removed">-      * @param summary summary for the table</span>
<span class="line-removed">-      * @param body content for the table</span>
<span class="line-removed">-      * @return an HtmlTree object for the TABLE tag</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     public static HtmlTree TABLE(HtmlStyle styleClass, String summary, Content body) {</span>
<span class="line-removed">-         HtmlTree htmltree = new HtmlTree(HtmlTag.TABLE, nullCheck(body));</span>
<span class="line-removed">-         if (styleClass != null)</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         htmltree.put(HtmlAttr.SUMMARY, nullCheck(summary));</span>
<span class="line-removed">-         return htmltree;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Generates a Table tag with style class attribute and some content.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param styleClass style of the table</span>
<span class="line-removed">-      * @param body content for the table</span>
<span class="line-removed">-      * @return an HtmlTree object for the TABLE tag</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     public static HtmlTree TABLE(HtmlStyle styleClass, Content body) {</span>
<span class="line-removed">-         HtmlTree htmltree = new HtmlTree(HtmlTag.TABLE, nullCheck(body));</span>
<span class="line-removed">-         if (styleClass != null) {</span>
<span class="line-removed">-             htmltree.setStyle(styleClass);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a TD tag with style class attribute and some content.</span>
       *
<span class="line-modified">!      * @param styleClass style for the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the TD tag</span>
       */
<span class="line-modified">!     public static HtmlTree TD(HtmlStyle styleClass, Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.TD, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null)</span>
<span class="line-modified">!             htmltree.setStyle(styleClass);</span>
<span class="line-modified">!         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a TD tag for an HTML table with some content.</span>
       *
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the TD tag</span>
       */
<span class="line-modified">!     public static HtmlTree TD(Content body) {</span>
<span class="line-modified">!         return TD(null, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a TH tag with style class and scope attributes and some content.</span>
       *
<span class="line-modified">!      * @param styleClass style for the tag</span>
<span class="line-modified">!      * @param scope scope of the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the TH tag</span>
       */
<span class="line-modified">!     public static HtmlTree TH(HtmlStyle styleClass, String scope, Content body) {</span>
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.TH, nullCheck(body));</span>
<span class="line-modified">!         if (styleClass != null)</span>
<span class="line-modified">!             htmltree.setStyle(styleClass);</span>
<span class="line-modified">!         htmltree.put(HtmlAttr.SCOPE, nullCheck(scope));</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a TH tag with scope attribute and some content.</span>
       *
<span class="line-modified">!      * @param scope scope of the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-modified">!      * @return an HtmlTree object for the TH tag</span>
       */
      public static HtmlTree TH(String scope, Content body) {
<span class="line-modified">!         return TH(null, scope, body);</span>
      }
  
      /**
<span class="line-modified">!      * Generates a TH tag with style class, scope attribute and some content.</span>
       *
<span class="line-modified">!      * @param styleClass style for the tag</span>
<span class="line-modified">!      * @param body content for the tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the TH tag</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     public static HtmlTree TH_ROW_SCOPE(HtmlStyle styleClass, Content body) {</span>
<span class="line-removed">-         return TH(styleClass, &quot;row&quot;, body);</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Generates a TITLE tag with some content.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param body content for the tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the TITLE tag</span>
       */
      public static HtmlTree TITLE(String body) {
<span class="line-modified">!         HtmlTree htmltree = new HtmlTree(HtmlTag.TITLE, new StringContent(body));</span>
<span class="line-modified">!         return htmltree;</span>
<span class="line-removed">-     }</span>
<span class="line-removed">- </span>
<span class="line-removed">-     /**</span>
<span class="line-removed">-      * Generates a TR tag for an HTML table with some content.</span>
<span class="line-removed">-      *</span>
<span class="line-removed">-      * @param body content for the tag</span>
<span class="line-removed">-      * @return an HtmlTree object for the TR tag</span>
<span class="line-removed">-      */</span>
<span class="line-removed">-     public static HtmlTree TR(Content body) {</span>
<span class="line-removed">-         HtmlTree htmltree = new HtmlTree(HtmlTag.TR, nullCheck(body));</span>
<span class="line-removed">-         return htmltree;</span>
      }
  
      /**
<span class="line-modified">!      * Generates a UL tag with the style class attribute and some content.</span>
       *
<span class="line-modified">!      * @param styleClass style for the tag</span>
<span class="line-modified">!      * @param first initial content to be added</span>
<span class="line-modified">!      * @param more a series of additional content nodes to be added</span>
<span class="line-modified">!      * @return an HtmlTree object for the UL tag</span>
       */
<span class="line-modified">!     public static HtmlTree UL(HtmlStyle styleClass, Content first, Content... more) {</span>
<span class="line-modified">!         HtmlTree htmlTree = new HtmlTree(HtmlTag.UL);</span>
<span class="line-modified">!         htmlTree.add(nullCheck(first));</span>
          for (Content c : more) {
<span class="line-modified">!             htmlTree.add(nullCheck(c));</span>
          }
<span class="line-removed">-         htmlTree.setStyle(nullCheck(styleClass));</span>
          return htmlTree;
      }
  
      @Override
      public boolean isEmpty() {
<span class="line-new-header">--- 285,561 ---</span>
          }
          return sb.toString();
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code A} element.</span>
       *
<span class="line-modified">!      * @param ref the value for the {@code href} attribute}</span>
<span class="line-modified">!      * @param body the content for element</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree A(String ref, Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.A)</span>
<span class="line-modified">!                 .put(HtmlAttr.HREF, encodeURL(ref))</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code CAPTION} element with the given content.</span>
       *
<span class="line-modified">!      * @param body content for the element</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree CAPTION(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.CAPTION)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code CODE} element with the given content.</span>
       *
<span class="line-modified">!      * @param body content for the element</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree CODE(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.CODE)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code DD} element with the given content.</span>
       *
<span class="line-modified">!      * @param body content for the element</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree DD(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.DD)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code DL} element with the given style.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree DL(HtmlStyle style) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.DL)</span>
<span class="line-modified">!                 .setStyle(style);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code DL} element with the given style and content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree DL(HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.DL)</span>
<span class="line-modified">!                 .setStyle(style)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code DIV} element with the given style.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @return the element</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public static HtmlTree DIV(HtmlStyle style) {</span>
<span class="line-added">+         return new HtmlTree(TagName.DIV)</span>
<span class="line-added">+                 .setStyle(style);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Creates an HTML {@code DIV} element with the given style and content.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @param style the style</span>
<span class="line-added">+      * @param body  the content</span>
<span class="line-added">+      * @return the element</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public static HtmlTree DIV(HtmlStyle style, Content body) {</span>
<span class="line-added">+         return new HtmlTree(TagName.DIV)</span>
<span class="line-added">+                 .setStyle(style)</span>
<span class="line-added">+                 .add(body);</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Creates an HTML {@code DIV} element with the given content.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @param body the content</span>
<span class="line-added">+      * @return the element</span>
       */
      public static HtmlTree DIV(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.DIV)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code DT} element with the given content.</span>
       *
<span class="line-modified">!      * @param body the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree DT(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.DT)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code FOOTER} element.</span>
<span class="line-added">+      * The role is set to {@code contentinfo}.</span>
       *
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree FOOTER() {
<span class="line-modified">!         return new HtmlTree(TagName.FOOTER)</span>
<span class="line-modified">!                 .setRole(Role.CONTENTINFO);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code HEADER} element.</span>
<span class="line-added">+      * The role is set to {@code banner}.</span>
       *
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree HEADER() {
<span class="line-modified">!         return new HtmlTree(TagName.HEADER)</span>
<span class="line-modified">!                 .setRole(Role.BANNER);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML heading element with the given content.</span>
       *
<span class="line-modified">!      * @param headingTag the tag for the heading</span>
<span class="line-modified">!      * @param body       the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING(TagName headingTag, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML heading element with the given style and content.</span>
       *
<span class="line-modified">!      * @param headingTag the tag for the heading</span>
<span class="line-modified">!      * @param style      the stylesheet class</span>
<span class="line-modified">!      * @param body       the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING(TagName headingTag, HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-added">+                 .setStyle(style)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML heading element with the given style and content.</span>
<span class="line-modified">!      * The {@code title} attribute is set from the content.</span>
       *
<span class="line-modified">!      * @param headingTag the tag for the heading</span>
<span class="line-modified">!      * @param style      the stylesheet class</span>
<span class="line-modified">!      * @param body       the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING_TITLE(TagName headingTag,</span>
<span class="line-modified">!                                          HtmlStyle style, Content body) {</span>
<span class="line-added">+         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-added">+                 .setTitle(body)</span>
<span class="line-added">+                 .setStyle(style)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML heading element with the given style and content.</span>
<span class="line-added">+      * The {@code title} attribute is set from the content.</span>
       *
<span class="line-modified">!      * @param headingTag the tag for the heading</span>
<span class="line-modified">!      * @param body       the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree HEADING_TITLE(TagName headingTag, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(checkHeading(headingTag))</span>
<span class="line-added">+                 .setTitle(body)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
<span class="line-modified">!     private static TagName checkHeading(TagName headingTag) {</span>
<span class="line-modified">!         switch (headingTag) {</span>
<span class="line-modified">!             case H1: case H2: case H3: case H4: case H5: case H6:</span>
<span class="line-modified">!                 return headingTag;</span>
<span class="line-modified">!             default:</span>
<span class="line-modified">!                 throw new IllegalArgumentException(headingTag.toString());</span>
<span class="line-modified">!         }</span>
      }
  
      /**
<span class="line-modified">!      * Craetes an HTML {@code HTML} element with the given {@code lang} attribute,</span>
<span class="line-added">+      * and {@code HEAD} and {@code BODY} contents.</span>
       *
<span class="line-modified">!      * @param lang the value for the {@code lang} attribute</span>
<span class="line-modified">!      * @param head the {@code HEAD} element</span>
<span class="line-modified">!      * @param body the {@code BODY} element</span>
<span class="line-modified">!      * @return the {@code HTML} element</span>
       */
<span class="line-modified">!     public static HtmlTree HTML(String lang, Content head, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.HTML)</span>
<span class="line-modified">!                 .put(HtmlAttr.LANG, lang)</span>
<span class="line-modified">!                 .add(head)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code INPUT} element with the given id and initial value.</span>
<span class="line-added">+      * The element as marked as initially disabled.</span>
       *
<span class="line-modified">!      * @param type  the type of input</span>
<span class="line-modified">!      * @param id    the id</span>
<span class="line-modified">!      * @param value the initial value</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree INPUT(String type, String id, String value) {
<span class="line-modified">!         return new HtmlTree(TagName.INPUT)</span>
<span class="line-modified">!                 .put(HtmlAttr.TYPE, type)</span>
<span class="line-modified">!                 .put(HtmlAttr.ID, id)</span>
<span class="line-modified">!                 .put(HtmlAttr.VALUE, value)</span>
<span class="line-modified">!                 .put(HtmlAttr.DISABLED, &quot;disabled&quot;);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code LABEL} element with the given content.</span>
       *
<span class="line-modified">!      * @param forLabel the value of the {@code for} attribute</span>
<span class="line-modified">!      * @param body     the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree LABEL(String forLabel, Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.LABEL)</span>
<span class="line-modified">!                 .put(HtmlAttr.FOR, forLabel)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code LI} element with the given content.</span>
       *
<span class="line-modified">!      * @param body the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree LI(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.LI)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code LI} element with the given style and the given content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree LI(HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return LI(body)</span>
<span class="line-modified">!                 .setStyle(style);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code LINK} tag with the given attributes.</span>
       *
<span class="line-modified">!      * @param rel   the relevance of the link: the {@code rel} attribute</span>
<span class="line-modified">!      * @param type  the type of link: the {@code type} attribute</span>
<span class="line-modified">!      * @param href  the path for the link: the {@code href} attribute</span>
<span class="line-modified">!      * @param title title for the link: the {@code title} attribute</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree LINK(String rel, String type, String href, String title) {
<span class="line-modified">!         return new HtmlTree(TagName.LINK)</span>
<span class="line-modified">!                 .put(HtmlAttr.REL, rel)</span>
<span class="line-modified">!                 .put(HtmlAttr.TYPE, type)</span>
<span class="line-modified">!                 .put(HtmlAttr.HREF, href)</span>
<span class="line-modified">!                 .put(HtmlAttr.TITLE, title);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code MAIN} element.</span>
<span class="line-added">+      * The role is set to {@code main}.</span>
       *
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree MAIN() {
<span class="line-modified">!         return new HtmlTree(TagName.MAIN)</span>
<span class="line-modified">!                 .setRole(Role.MAIN);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code MAIN} element with the given content.</span>
<span class="line-added">+      * The role is set to {@code main}.</span>
       *
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree MAIN(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.MAIN)</span>
<span class="line-modified">!                 .setRole(Role.MAIN)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code META} element with {@code http-equiv} and {@code content} attributes.</span>
       *
<span class="line-modified">!      * @param httpEquiv the value for the {@code http-equiv} attribute</span>
<span class="line-modified">!      * @param content   the type of content, to be used in the {@code content} attribute</span>
<span class="line-modified">!      * @param charset   the character set for the document, to be used in the {@code content} attribute</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree META(String httpEquiv, String content, String charset) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.META)</span>
<span class="line-modified">!                 .put(HtmlAttr.HTTP_EQUIV, httpEquiv)</span>
<span class="line-modified">!                 .put(HtmlAttr.CONTENT, content + &quot;; charset=&quot; + charset);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code META} element with {@code name} and {@code content} attributes.</span>
       *
<span class="line-modified">!      * @param name    the value for the {@code name} attribute</span>
<span class="line-modified">!      * @param content the value for the {@code content} attribute</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree META(String name, String content) {
<span class="line-modified">!         return new HtmlTree(TagName.META)</span>
<span class="line-modified">!                 .put(HtmlAttr.NAME, name)</span>
<span class="line-modified">!                 .put(HtmlAttr.CONTENT, content);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code NAV} element.</span>
<span class="line-added">+      * The role is set to {@code navigation}.</span>
       *
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree NAV() {
<span class="line-modified">!         return new HtmlTree(TagName.NAV)</span>
<span class="line-modified">!                 .setRole(Role.NAVIGATION);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code NOSCRIPT} element with some content.</span>
       *
<span class="line-modified">!      * @param body the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree NOSCRIPT(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.NOSCRIPT)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code P} element with some content.</span>
       *
<span class="line-modified">!      * @param body the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree P(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.P)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code P} element with the given style and some content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree P(HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return P(body)</span>
<span class="line-modified">!                 .setStyle(style);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SCRIPT} element with some script content.</span>
<span class="line-added">+      * The type of the script is set to {@code text/javascript}.</span>
       *
<span class="line-modified">!      * @param src the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree SCRIPT(String src) {
<span class="line-modified">!         return new HtmlTree(TagName.SCRIPT)</span>
<span class="line-modified">!                 .put(HtmlAttr.TYPE, &quot;text/javascript&quot;)</span>
<span class="line-modified">!                 .put(HtmlAttr.SRC, src);</span>
<span class="line-modified">! </span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SECTION} element with the given style.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree SECTION(HtmlStyle style) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.SECTION)</span>
<span class="line-modified">!                 .setStyle(style);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SECTION} element with the given style and some content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree SECTION(HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.SECTION)</span>
<span class="line-modified">!                 .setStyle(style)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SMALL} element with some content.</span>
       *
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree SMALL(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.SMALL)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SPAN} element with some content.</span>
       *
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree SPAN(Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.SPAN)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SPAN} element with the given style and some content.</span>
       *
<span class="line-modified">!      * @param styleClass the style</span>
<span class="line-modified">!      * @param body       the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree SPAN(HtmlStyle styleClass, Content body) {
<span class="line-modified">!         return SPAN(body)</span>
<span class="line-modified">!                 .setStyle(styleClass);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SPAN} element with the given id and some content.</span>
       *
<span class="line-modified">!      * @param id    the id</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree SPAN_ID(String id, Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.SPAN)</span>
<span class="line-modified">!                 .setId(id)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code SPAN} element with the given id and style, and some content.</span>
       *
<span class="line-modified">!      * @param id    the id</span>
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-added">+      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree SPAN(String id, HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.SPAN)</span>
<span class="line-modified">!                 .setId(id)</span>
<span class="line-modified">!                 .setStyle(style)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code TD} element with the given style and some content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-added">+      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree TD(HtmlStyle style, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.TD)</span>
<span class="line-added">+                 .setStyle(style)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code TH} element with the given style and scope, and some content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param scope the value for the {@code scope} attribute</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree TH(HtmlStyle style, String scope, Content body) {</span>
<span class="line-modified">!         return new HtmlTree(TagName.TH)</span>
<span class="line-modified">!                 .setStyle(style)</span>
<span class="line-modified">!                 .put(HtmlAttr.SCOPE, scope)</span>
<span class="line-modified">!                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code TH} element with the given scope, and some content.</span>
       *
<span class="line-modified">!      * @param scope the value for the {@code scope} attribute</span>
<span class="line-modified">!      * @param body  the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree TH(String scope, Content body) {
<span class="line-modified">!         return new HtmlTree(TagName.TH)</span>
<span class="line-added">+                 .put(HtmlAttr.SCOPE, scope)</span>
<span class="line-added">+                 .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code TITLE} element with some content.</span>
       *
<span class="line-modified">!      * @param body the content</span>
<span class="line-modified">!      * @return the element</span>
       */
      public static HtmlTree TITLE(String body) {
<span class="line-modified">!         return new HtmlTree(TagName.TITLE)</span>
<span class="line-modified">!             .add(body);</span>
      }
  
      /**
<span class="line-modified">!      * Creates an HTML {@code UL} element with the given style and some content.</span>
       *
<span class="line-modified">!      * @param style the style</span>
<span class="line-modified">!      * @param first the initial content</span>
<span class="line-modified">!      * @param more  additional content</span>
<span class="line-modified">!      * @return the element</span>
       */
<span class="line-modified">!     public static HtmlTree UL(HtmlStyle style, Content first, Content... more) {</span>
<span class="line-modified">!         HtmlTree htmlTree = new HtmlTree(TagName.UL)</span>
<span class="line-modified">!                 .setStyle(style);</span>
<span class="line-added">+         htmlTree.add(first);</span>
          for (Content c : more) {
<span class="line-modified">!             htmlTree.add(c);</span>
          }
          return htmlTree;
      }
  
      @Override
      public boolean isEmpty() {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 914,50 ***</span>
       *
       * @return true if the HTML tree is valid
       */
      @Override
      public boolean isValid() {
<span class="line-modified">!         switch (htmlTag) {</span>
<span class="line-modified">!             case A :</span>
<span class="line-modified">!                 return (hasAttr(HtmlAttr.NAME) || hasAttr(HtmlAttr.ID) || (hasAttr(HtmlAttr.HREF) &amp;&amp; hasContent()));</span>
<span class="line-modified">!             case BR :</span>
                  return (!hasContent() &amp;&amp; (!hasAttrs() || hasAttr(HtmlAttr.CLEAR)));
<span class="line-modified">!             case IFRAME :</span>
<span class="line-removed">-                 return (hasAttr(HtmlAttr.SRC) &amp;&amp; !hasContent());</span>
<span class="line-removed">-             case HR :</span>
              case INPUT:
                  return (!hasContent());
<span class="line-modified">!             case IMG :</span>
                  return (hasAttr(HtmlAttr.SRC) &amp;&amp; hasAttr(HtmlAttr.ALT) &amp;&amp; !hasContent());
<span class="line-modified">!             case LINK :</span>
                  return (hasAttr(HtmlAttr.HREF) &amp;&amp; !hasContent());
<span class="line-modified">!             case META :</span>
                  return (hasAttr(HtmlAttr.CONTENT) &amp;&amp; !hasContent());
<span class="line-modified">!             case SCRIPT :</span>
                  return ((hasAttr(HtmlAttr.TYPE) &amp;&amp; hasAttr(HtmlAttr.SRC) &amp;&amp; !hasContent()) ||
                          (hasAttr(HtmlAttr.TYPE) &amp;&amp; hasContent()));
<span class="line-modified">!             case SPAN :</span>
                  return (hasAttr(HtmlAttr.ID) || hasContent());
              default :
                  return hasContent();
          }
      }
  
      /**
<span class="line-modified">!      * Returns true if the element is an inline element.</span>
       *
       * @return true if the HTML tag is an inline element
       */
      public boolean isInline() {
<span class="line-modified">!         return (htmlTag.blockType == HtmlTag.BlockType.INLINE);</span>
      }
  
      @Override
      public boolean write(Writer out, boolean atNewline) throws IOException {
<span class="line-modified">!         if (!isInline() &amp;&amp; !atNewline)</span>
              out.write(DocletConstants.NL);
<span class="line-modified">!         String tagString = htmlTag.toString();</span>
          out.write(&quot;&lt;&quot;);
          out.write(tagString);
          Iterator&lt;HtmlAttr&gt; iterator = attrs.keySet().iterator();
          HtmlAttr key;
          String value;
<span class="line-new-header">--- 881,73 ---</span>
       *
       * @return true if the HTML tree is valid
       */
      @Override
      public boolean isValid() {
<span class="line-modified">!         switch (tagName) {</span>
<span class="line-modified">!             case A:</span>
<span class="line-modified">!                 return (hasAttr(HtmlAttr.ID) || (hasAttr(HtmlAttr.HREF) &amp;&amp; hasContent()));</span>
<span class="line-modified">!             case BR:</span>
                  return (!hasContent() &amp;&amp; (!hasAttrs() || hasAttr(HtmlAttr.CLEAR)));
<span class="line-modified">!             case HR:</span>
              case INPUT:
                  return (!hasContent());
<span class="line-modified">!             case IMG:</span>
                  return (hasAttr(HtmlAttr.SRC) &amp;&amp; hasAttr(HtmlAttr.ALT) &amp;&amp; !hasContent());
<span class="line-modified">!             case LINK:</span>
                  return (hasAttr(HtmlAttr.HREF) &amp;&amp; !hasContent());
<span class="line-modified">!             case META:</span>
                  return (hasAttr(HtmlAttr.CONTENT) &amp;&amp; !hasContent());
<span class="line-modified">!             case SCRIPT:</span>
                  return ((hasAttr(HtmlAttr.TYPE) &amp;&amp; hasAttr(HtmlAttr.SRC) &amp;&amp; !hasContent()) ||
                          (hasAttr(HtmlAttr.TYPE) &amp;&amp; hasContent()));
<span class="line-modified">!             case SPAN:</span>
                  return (hasAttr(HtmlAttr.ID) || hasContent());
              default :
                  return hasContent();
          }
      }
  
      /**
<span class="line-modified">!      * Returns true if the element is a normal element that is &lt;em&gt;phrasing content&lt;/em&gt;.</span>
       *
       * @return true if the HTML tag is an inline element
<span class="line-added">+      *</span>
<span class="line-added">+      * @see &lt;a href=&quot;https://www.w3.org/TR/html51/dom.html#kinds-of-content-phrasing-content&quot;&gt;Phrasing Content&lt;/a&gt;</span>
       */
      public boolean isInline() {
<span class="line-modified">!         switch (tagName) {</span>
<span class="line-added">+             case A: case BUTTON: case BR: case CODE: case EM: case I: case IMG:</span>
<span class="line-added">+             case LABEL: case SMALL: case SPAN: case STRONG: case SUB:</span>
<span class="line-added">+                 return true;</span>
<span class="line-added">+             default:</span>
<span class="line-added">+                 return false;</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
<span class="line-added">+     /**</span>
<span class="line-added">+      * Returns whether or not this is a &lt;em&gt;void&lt;/em&gt; element.</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @return whether or not this is a void element</span>
<span class="line-added">+      *</span>
<span class="line-added">+      * @see &lt;a href=&quot;https://www.w3.org/TR/html51/syntax.html#void-elements&quot;&gt;Void Elements&lt;/a&gt;</span>
<span class="line-added">+      */</span>
<span class="line-added">+     public boolean isVoid() {</span>
<span class="line-added">+         switch (tagName) {</span>
<span class="line-added">+             case BR: case HR: case IMG: case INPUT: case LINK: case META:</span>
<span class="line-added">+                 return true;</span>
<span class="line-added">+             default:</span>
<span class="line-added">+                 return false;</span>
<span class="line-added">+         }</span>
      }
  
      @Override
      public boolean write(Writer out, boolean atNewline) throws IOException {
<span class="line-modified">!         boolean isInline = isInline();</span>
<span class="line-added">+         if (!isInline &amp;&amp; !atNewline)</span>
              out.write(DocletConstants.NL);
<span class="line-modified">!         String tagString = tagName.toString();</span>
          out.write(&quot;&lt;&quot;);
          out.write(tagString);
          Iterator&lt;HtmlAttr&gt; iterator = attrs.keySet().iterator();
          HtmlAttr key;
          String value;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 974,16 ***</span>
          }
          out.write(&quot;&gt;&quot;);
          boolean nl = false;
          for (Content c : content)
              nl = c.write(out, nl);
<span class="line-modified">!         if (htmlTag.endTagRequired()) {</span>
              out.write(&quot;&lt;/&quot;);
              out.write(tagString);
              out.write(&quot;&gt;&quot;);
          }
<span class="line-modified">!         if (!isInline()) {</span>
              out.write(DocletConstants.NL);
              return true;
          } else {
              return false;
          }
<span class="line-new-header">--- 964,16 ---</span>
          }
          out.write(&quot;&gt;&quot;);
          boolean nl = false;
          for (Content c : content)
              nl = c.write(out, nl);
<span class="line-modified">!         if (!isVoid()) {</span>
              out.write(&quot;&lt;/&quot;);
              out.write(tagString);
              out.write(&quot;&gt;&quot;);
          }
<span class="line-modified">!         if (!isInline) {</span>
              out.write(DocletConstants.NL);
              return true;
          } else {
              return false;
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 998,11 ***</span>
       *
       */
      private static String stripHtml(Content body) {
          String rawString = body.toString();
          // remove HTML tags
<span class="line-modified">!         rawString = rawString.replaceAll(&quot;\\&lt;.*?&gt;&quot;, &quot; &quot;);</span>
          // consolidate multiple spaces between a word to a single space
          rawString = rawString.replaceAll(&quot;\\b\\s{2,}\\b&quot;, &quot; &quot;);
          // remove extra whitespaces
          return rawString.trim();
      }
<span class="line-new-header">--- 988,11 ---</span>
       *
       */
      private static String stripHtml(Content body) {
          String rawString = body.toString();
          // remove HTML tags
<span class="line-modified">!         rawString = rawString.replaceAll(&quot;&lt;.*?&gt;&quot;, &quot; &quot;);</span>
          // consolidate multiple spaces between a word to a single space
          rawString = rawString.replaceAll(&quot;\\b\\s{2,}\\b&quot;, &quot; &quot;);
          // remove extra whitespaces
          return rawString.trim();
      }
</pre>
<center><a href="HtmlStyle.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="RawHtml.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>