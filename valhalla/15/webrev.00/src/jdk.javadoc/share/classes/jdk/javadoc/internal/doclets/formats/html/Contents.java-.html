<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old src/jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/Contents.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 1998, 2020, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package jdk.javadoc.internal.doclets.formats.html;
 27 
 28 import java.util.EnumMap;
 29 import java.util.Objects;
 30 import java.util.regex.Matcher;
 31 import java.util.regex.Pattern;
 32 
 33 import jdk.javadoc.internal.doclets.formats.html.markup.Comment;
 34 import jdk.javadoc.internal.doclets.formats.html.markup.ContentBuilder;
 35 import jdk.javadoc.internal.doclets.formats.html.markup.Entity;
 36 import jdk.javadoc.internal.doclets.formats.html.markup.FixedStringContent;
 37 import jdk.javadoc.internal.doclets.formats.html.markup.StringContent;
 38 import jdk.javadoc.internal.doclets.toolkit.Content;
 39 import jdk.javadoc.internal.doclets.toolkit.Resources;
 40 import jdk.javadoc.internal.doclets.toolkit.util.DocletConstants;
 41 import jdk.javadoc.internal.doclets.toolkit.util.VisibleMemberTable;
 42 
 43 
 44 /**
 45  * Constants and factory methods for common fragments of content
 46  * used by HtmlDoclet. The string content of these fragments is
 47  * generally obtained from the {@link Resources resources} found
 48  * in the doclet&#39;s configuration.
 49  *
 50  * @implNote
 51  * Many constants are made available in this class, so that they are
 52  * only created once per doclet-instance, instead of once per generated page.
 53  */
 54 public class Contents {
 55 
 56     public final Content allClassesLabel;
 57     public final Content allImplementedInterfacesLabel;
 58     public final Content allModulesLabel;
 59     public final Content allPackagesLabel;
 60     public final Content allSuperinterfacesLabel;
 61     public final Content also;
 62     public final Content annotationTypeOptionalMemberLabel;
 63     public final Content annotationTypeRequiredMemberLabel;
 64     public final Content annotateTypeOptionalMemberSummaryLabel;
 65     public final Content annotateTypeRequiredMemberSummaryLabel;
 66     public final Content annotationType;
 67     public final Content annotationTypeDetailsLabel;
 68     public final Content annotationTypeMemberDetail;
 69     public final Content annotationtypes;
 70     public final Content annotationTypes;
 71     public final Content classLabel;
 72     public final Content classes;
 73     public final Content constantFieldLabel;
 74     public final Content constantsSummaryTitle;
 75     public final Content constructorLabel;
 76     public final Content constructorDetailsLabel;
 77     public final Content constructorSummaryLabel;
 78     public final Content constructors;
 79     public final Content contentsHeading;
 80     public final Content defaultPackageLabel;
 81     public final Content default_;
 82     public final Content deprecatedAPI;
 83     public final Content deprecatedLabel;
 84     public final Content deprecatedPhrase;
 85     public final Content deprecatedForRemovalPhrase;
 86     public final Content descfrmClassLabel;
 87     public final Content descfrmInterfaceLabel;
 88     public final Content descriptionLabel;
 89     public final Content detailLabel;
 90     public final Content enclosingClassLabel;
 91     public final Content enclosingInterfaceLabel;
 92     public final Content enumConstantLabel;
 93     public final Content enumConstantDetailLabel;
 94     public final Content enumConstantSummary;
 95     public final Content enum_;
 96     public final Content enums;
 97     public final Content error;
 98     public final Content errors;
 99     public final Content exception;
100     public final Content exceptions;
101     public final Content exportedTo;
102     public final Content fieldLabel;
103     public final Content fieldDetailsLabel;
104     public final Content fieldSummaryLabel;
105     public final Content fields;
106     public final Content framesLabel;
107     public final Content fromLabel;
108     public final Content functionalInterface;
109     public final Content functionalInterfaceMessage;
110     public final Content helpLabel;
111     public final Content hierarchyForAllPackages;
112     public final Content implementation;
113     public final Content implementingClassesLabel;
114     public final Content inClass;
115     public final Content inInterface;
116     public final Content indexLabel;
117     public final Content interfaceLabel;
118     public final Content interfaces;
119     public final Content methodDetailLabel;
120     public final Content methodLabel;
121     public final Content methodSummary;
122     public final Content methods;
123     public final Content modifierAndTypeLabel;
124     public final Content modifierLabel;
125     public final Content moduleLabel;
126     public final Content module_;
127     public final Content moduleSubNavLabel;
128     public final Content modulesLabel;
129     public final Content navAnnotationTypeMember;
130     public final Content navAnnotationTypeOptionalMember;
131     public final Content navAnnotationTypeRequiredMember;
132     public final Content navConstructor;
133     public final Content navEnum;
134     public final Content navField;
135     public final Content navMethod;
136     public final Content navModuleDescription;
137     public final Content navModules;
138     public final Content navNested;
139     public final Content navPackages;
140     public final Content navProperty;
141     public final Content navServices;
142     public final Content nestedClassSummary;
143     public final Content newPage;
144     public final Content noFramesLabel;
145     public final Content noScriptMessage;
146     public final Content openModuleLabel;
147     public final Content openedTo;
148     public final Content overridesLabel;
149     public final Content overviewLabel;
150     public final Content packageHierarchies;
151     public final Content packageLabel;
152     public final Content package_;
153     public final Content packagesLabel;
154     public final Content properties;
155     public final Content propertyLabel;
156     public final Content propertyDetailsLabel;
157     public final Content propertySummaryLabel;
158     public final Content record;
159     public final Content referencedIn;
160     public final Content seeLabel;
161     public final Content serializedForm;
162     public final Content servicesLabel;
163     public final Content specifiedByLabel;
164     public final Content subclassesLabel;
165     public final Content subinterfacesLabel;
166     public final Content summaryLabel;
167     public final Content systemPropertiesLabel;
168     public final Content systemPropertiesSummaryLabel;
169     public final Content treeLabel;
170     public final Content typeLabel;
171     public final Content useLabel;
172     public final Content valueLabel;
173 
174     private final EnumMap&lt;VisibleMemberTable.Kind, Content&gt; navLinkLabels;
175 
176     private final Resources resources;
177 
178     /**
179      * Creates a {@code Contents} object.
180      *
181      * @param configuration the configuration in which to find the
182      * resources used to look up resource keys, and other details.
183      */
184     Contents(HtmlConfiguration configuration) {
185         this.resources = configuration.getDocResources();
186 
187         allClassesLabel = getNonBreakContent(&quot;doclet.All_Classes&quot;);
188         allImplementedInterfacesLabel = getContent(&quot;doclet.All_Implemented_Interfaces&quot;);
189         allModulesLabel = getNonBreakContent(&quot;doclet.All_Modules&quot;);
190         allPackagesLabel = getNonBreakContent(&quot;doclet.All_Packages&quot;);
191         allSuperinterfacesLabel = getContent(&quot;doclet.All_Superinterfaces&quot;);
192         also = getContent(&quot;doclet.also&quot;);
193         annotationTypeOptionalMemberLabel = getContent(&quot;doclet.Annotation_Type_Optional_Member&quot;);
194         annotationTypeRequiredMemberLabel = getContent(&quot;doclet.Annotation_Type_Required_Member&quot;);
195         annotateTypeOptionalMemberSummaryLabel = getContent(&quot;doclet.Annotation_Type_Optional_Member_Summary&quot;);
196         annotateTypeRequiredMemberSummaryLabel = getContent(&quot;doclet.Annotation_Type_Required_Member_Summary&quot;);
197         annotationType = getContent(&quot;doclet.AnnotationType&quot;);
198         annotationTypeDetailsLabel = getContent(&quot;doclet.Annotation_Type_Member_Detail&quot;);
199         annotationTypeMemberDetail = getContent(&quot;doclet.Annotation_Type_Member_Detail&quot;);
200         annotationTypes = getContent(&quot;doclet.AnnotationTypes&quot;);
201         annotationtypes = getContent(&quot;doclet.annotationtypes&quot;);
202         classLabel = getContent(&quot;doclet.Class&quot;);
203         classes = getContent(&quot;doclet.Classes&quot;);
204         constantFieldLabel = getContent(&quot;doclet.ConstantField&quot;);
205         constantsSummaryTitle = getContent(&quot;doclet.Constants_Summary&quot;);
206         constructorLabel = getContent(&quot;doclet.Constructor&quot;);
207         constructorDetailsLabel = getContent(&quot;doclet.Constructor_Detail&quot;);
208         constructorSummaryLabel = getContent(&quot;doclet.Constructor_Summary&quot;);
209         constructors = getContent(&quot;doclet.Constructors&quot;);
210         contentsHeading = getContent(&quot;doclet.Contents&quot;);
211         defaultPackageLabel = new StringContent(DocletConstants.DEFAULT_PACKAGE_NAME);
212         default_ = getContent(&quot;doclet.Default&quot;);
213         deprecatedAPI = getContent(&quot;doclet.Deprecated_API&quot;);
214         deprecatedLabel = getContent(&quot;doclet.navDeprecated&quot;);
215         deprecatedPhrase = getContent(&quot;doclet.Deprecated&quot;);
216         deprecatedForRemovalPhrase = getContent(&quot;doclet.DeprecatedForRemoval&quot;);
217         descfrmClassLabel = getContent(&quot;doclet.Description_From_Class&quot;);
218         descfrmInterfaceLabel = getContent(&quot;doclet.Description_From_Interface&quot;);
219         descriptionLabel = getContent(&quot;doclet.Description&quot;);
220         detailLabel = getContent(&quot;doclet.Detail&quot;);
221         enclosingClassLabel = getContent(&quot;doclet.Enclosing_Class&quot;);
222         enclosingInterfaceLabel = getContent(&quot;doclet.Enclosing_Interface&quot;);
223         enumConstantLabel = getContent(&quot;doclet.Enum_Constant&quot;);
224         enumConstantDetailLabel = getContent(&quot;doclet.Enum_Constant_Detail&quot;);
225         enumConstantSummary = getContent(&quot;doclet.Enum_Constant_Summary&quot;);
226         enum_ = getContent(&quot;doclet.Enum&quot;);
227         enums = getContent(&quot;doclet.Enums&quot;);
228         error = getContent(&quot;doclet.Error&quot;);
229         errors = getContent(&quot;doclet.Errors&quot;);
230         exception = getContent(&quot;doclet.Exception&quot;);
231         exceptions = getContent(&quot;doclet.Exceptions&quot;);
232         exportedTo = getContent(&quot;doclet.ExportedTo&quot;);
233         fieldDetailsLabel = getContent(&quot;doclet.Field_Detail&quot;);
234         fieldSummaryLabel = getContent(&quot;doclet.Field_Summary&quot;);
235         fieldLabel = getContent(&quot;doclet.Field&quot;);
236         fields = getContent(&quot;doclet.Fields&quot;);
237         framesLabel = getContent(&quot;doclet.Frames&quot;);
238         fromLabel = getContent(&quot;doclet.From&quot;);
239         functionalInterface = getContent(&quot;doclet.Functional_Interface&quot;);
240         functionalInterfaceMessage = getContent(&quot;doclet.Functional_Interface_Message&quot;);
241         helpLabel = getContent(&quot;doclet.Help&quot;);
242         hierarchyForAllPackages = getContent(&quot;doclet.Hierarchy_For_All_Packages&quot;);
243         implementation = getContent(&quot;doclet.Implementation&quot;);
244         implementingClassesLabel = getContent(&quot;doclet.Implementing_Classes&quot;);
245         inClass = getContent(&quot;doclet.in_class&quot;);
246         inInterface = getContent(&quot;doclet.in_interface&quot;);
247         indexLabel = getContent(&quot;doclet.Index&quot;);
248         interfaceLabel = getContent(&quot;doclet.Interface&quot;);
249         interfaces = getContent(&quot;doclet.Interfaces&quot;);
250         methodDetailLabel = getContent(&quot;doclet.Method_Detail&quot;);
251         methodSummary = getContent(&quot;doclet.Method_Summary&quot;);
252         methodLabel = getContent(&quot;doclet.Method&quot;);
253         methods = getContent(&quot;doclet.Methods&quot;);
254         modifierLabel = getContent(&quot;doclet.Modifier&quot;);
255         modifierAndTypeLabel = getContent(&quot;doclet.Modifier_and_Type&quot;);
256         moduleLabel = getContent(&quot;doclet.Module&quot;);
257         module_ = getContent(&quot;doclet.module&quot;);
258         moduleSubNavLabel = getContent(&quot;doclet.Module_Sub_Nav&quot;);
259         modulesLabel = getContent(&quot;doclet.Modules&quot;);
260         navAnnotationTypeMember = getContent(&quot;doclet.navAnnotationTypeMember&quot;);
261         navAnnotationTypeOptionalMember = getContent(&quot;doclet.navAnnotationTypeOptionalMember&quot;);
262         navAnnotationTypeRequiredMember = getContent(&quot;doclet.navAnnotationTypeRequiredMember&quot;);
263         navConstructor = getContent(&quot;doclet.navConstructor&quot;);
264         navEnum = getContent(&quot;doclet.navEnum&quot;);
265         navField = getContent(&quot;doclet.navField&quot;);
266         navMethod = getContent(&quot;doclet.navMethod&quot;);
267         navModuleDescription = getContent(&quot;doclet.navModuleDescription&quot;);
268         navModules = getContent(&quot;doclet.navModules&quot;);
269         navNested = getContent(&quot;doclet.navNested&quot;);
270         navPackages = getContent(&quot;doclet.navPackages&quot;);
271         navProperty = getContent(&quot;doclet.navProperty&quot;);
272         navServices = getContent(&quot;doclet.navServices&quot;);
273         nestedClassSummary = getContent(&quot;doclet.Nested_Class_Summary&quot;);
274         newPage = new Comment(resources.getText(&quot;doclet.New_Page&quot;));
275         noFramesLabel = getNonBreakContent(&quot;doclet.No_Frames&quot;);
276         noScriptMessage = getContent(&quot;doclet.No_Script_Message&quot;);
277         openedTo = getContent(&quot;doclet.OpenedTo&quot;);
278         openModuleLabel = getContent(&quot;doclet.Open_Module&quot;);
279         overridesLabel = getContent(&quot;doclet.Overrides&quot;);
280         overviewLabel = getContent(&quot;doclet.Overview&quot;);
281         packageHierarchies = getContent(&quot;doclet.Package_Hierarchies&quot;);
282         packageLabel = getContent(&quot;doclet.Package&quot;);
283         package_ = getContent(&quot;doclet.package&quot;);
284         packagesLabel = getContent(&quot;doclet.Packages&quot;);
285         properties = getContent(&quot;doclet.Properties&quot;);
286         propertyLabel = getContent(&quot;doclet.Property&quot;);
287         propertyDetailsLabel = getContent(&quot;doclet.Property_Detail&quot;);
288         propertySummaryLabel = getContent(&quot;doclet.Property_Summary&quot;);
289         record = getContent(&quot;doclet.Record&quot;);
290         referencedIn = getContent(&quot;doclet.ReferencedIn&quot;);
291         seeLabel = getContent(&quot;doclet.See&quot;);
292         serializedForm = getContent(&quot;doclet.Serialized_Form&quot;);
293         servicesLabel = getContent(&quot;doclet.Services&quot;);
294         specifiedByLabel = getContent(&quot;doclet.Specified_By&quot;);
295         subclassesLabel = getContent(&quot;doclet.Subclasses&quot;);
296         subinterfacesLabel = getContent(&quot;doclet.Subinterfaces&quot;);
297         summaryLabel = getContent(&quot;doclet.Summary&quot;);
298         systemPropertiesLabel = getContent(&quot;doclet.systemProperties&quot;);
299         systemPropertiesSummaryLabel = getContent(&quot;doclet.systemPropertiesSummary&quot;);
300         treeLabel = getContent(&quot;doclet.Tree&quot;);
301         typeLabel = getContent(&quot;doclet.Type&quot;);
302         useLabel = getContent(&quot;doclet.navClassUse&quot;);
303         valueLabel = getContent(&quot;doclet.Value&quot;);
304 
305         navLinkLabels = new EnumMap&lt;&gt;(VisibleMemberTable.Kind.class);
306         navLinkLabels.put(VisibleMemberTable.Kind.INNER_CLASSES, getContent(&quot;doclet.navNested&quot;));
307         navLinkLabels.put(VisibleMemberTable.Kind.ENUM_CONSTANTS, getContent(&quot;doclet.navEnum&quot;));
308         navLinkLabels.put(VisibleMemberTable.Kind.FIELDS, getContent(&quot;doclet.navField&quot;));
309         navLinkLabels.put(VisibleMemberTable.Kind.CONSTRUCTORS, getContent(&quot;doclet.navConstructor&quot;));
310         navLinkLabels.put(VisibleMemberTable.Kind.METHODS, getContent(&quot;doclet.navMethod&quot;));
311     }
312 
313     /**
314      * Gets a {@code Content} object, containing the string for
315      * a given key in the doclet&#39;s resources.
316      *
317      * @param key the key for the desired string
318      * @return a content tree for the string
319      */
320     public Content getContent(String key) {
321         return new FixedStringContent(resources.getText(key));
322     }
323 
324     /**
325      * Gets a {@code Content} object, containing the string for
326      * a given key in the doclet&#39;s resources, formatted with
327      * given arguments.
328      *
329      * @param key the key for the desired string
330      * @param o0  string or content argument to be formatted into the result
331      * @return a content tree for the text
332      */
333     public Content getContent(String key, Object o0) {
334         return getContent(key, o0, null, null);
335     }
336 
337     /**
338      * Gets a {@code Content} object, containing the string for
339      * a given key in the doclet&#39;s resources, formatted with
340      * given arguments.
341 
342      * @param key the key for the desired string
343      * @param o0  string or content argument to be formatted into the result
344      * @param o1  string or content argument to be formatted into the result
345      * @return a content tree for the text
346      */
347     public Content getContent(String key, Object o0, Object o1) {
348         return getContent(key, o0, o1, null);
349     }
350 
351     /**
352      * Gets a {@code Content} object, containing the string for
353      * a given key in the doclet&#39;s resources, formatted with
354      * given arguments.
355      *
356      * @param key the key for the desired string
357      * @param o0  string or content argument to be formatted into the result
358      * @param o1  string or content argument to be formatted into the result
359      * @param o2  string or content argument to be formatted into the result
360      * @return a content tree for the text
361      */
362     public Content getContent(String key, Object o0, Object o1, Object o2) {
363         Content c = new ContentBuilder();
364         Pattern p = Pattern.compile(&quot;\\{([012])\\}&quot;);
365         String text = resources.getText(key); // TODO: cache
366         Matcher m = p.matcher(text);
367         int start = 0;
368         while (m.find(start)) {
369             c.add(text.substring(start, m.start()));
370 
371             Object o = null;
372             switch (m.group(1).charAt(0)) {
373                 case &#39;0&#39;: o = o0; break;
374                 case &#39;1&#39;: o = o1; break;
375                 case &#39;2&#39;: o = o2; break;
376             }
377 
378             if (o == null) {
379                 c.add(&quot;{&quot; + m.group(1) + &quot;}&quot;);
380             } else if (o instanceof String) {
381                 c.add((String) o);
382             } else if (o instanceof Content) {
383                 c.add((Content) o);
384             }
385 
386             start = m.end();
387         }
388 
389         c.add(text.substring(start));
390         return c;
391     }
392 
393     /**
394      * Gets a {@code Content} object, containing the string for
395      * a given key in the doclet&#39;s resources, substituting
396      * &lt;code&gt;&amp;nbsp;&lt;/code&gt; for any space characters found in
397      * the named resource string.
398      *
399      * @param key the key for the desired string
400      * @return a content tree for the string
401      */
402     private Content getNonBreakContent(String key) {
403         String text = resources.getText(key); // TODO: cache
404         Content c = new ContentBuilder();
405         int start = 0;
406         int p;
407         while ((p = text.indexOf(&quot; &quot;, start)) != -1) {
408             c.add(text.substring(start, p));
409             c.add(Entity.NO_BREAK_SPACE);
410             start = p + 1;
411         }
412         c.add(text.substring(start));
413         return c; // TODO: should be made immutable
414     }
415 
416     /**
417      * Returns a content for a visible member kind.
418      * @param kind the visible member table kind.
419      * @return the string content
420      */
421     public Content getNavLinkLabelContent(VisibleMemberTable.Kind kind) {
422         return Objects.requireNonNull(navLinkLabels.get(kind));
423     }
424 }
    </pre>
  </body>
</html>