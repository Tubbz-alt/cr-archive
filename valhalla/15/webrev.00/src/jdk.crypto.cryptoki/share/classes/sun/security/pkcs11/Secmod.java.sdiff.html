<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.crypto.cryptoki/share/classes/sun/security/pkcs11/Secmod.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../jdk.compiler/share/classes/com/sun/tools/javac/processing/JavacProcessingEnvironment.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.crypto.ec/share/classes/sun/security/ec/ECDHKeyAgreement.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.crypto.cryptoki/share/classes/sun/security/pkcs11/Secmod.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
397 
398             if ((libraryName == null) || (libraryName.length() == 0)) {
399                 // must be softtoken
400                 libraryName = System.mapLibraryName(SOFTTOKEN_LIB_NAME);
401                 if (fips == false) {
402                     type = (slot == 0) ? ModuleType.CRYPTO : ModuleType.KEYSTORE;
403                 } else {
404                     type = ModuleType.FIPS;
405                     if (slot != 0) {
406                         throw new RuntimeException
407                             (&quot;Slot index should be 0 for FIPS slot&quot;);
408                     }
409                 }
410             } else {
411                 if (libraryName.endsWith(System.mapLibraryName(TRUST_LIB_NAME))
412                         || commonName.equals(&quot;Builtin Roots Module&quot;)) {
413                     type = ModuleType.TRUSTANCHOR;
414                 } else {
415                     type = ModuleType.EXTERNAL;
416                 }
<span class="line-removed">417                 if (fips) {</span>
<span class="line-removed">418                     throw new RuntimeException(&quot;FIPS flag set for non-internal &quot;</span>
<span class="line-removed">419                         + &quot;module: &quot; + libraryName + &quot;, &quot; + commonName);</span>
<span class="line-removed">420                 }</span>
421             }
422             // On Ubuntu the libsoftokn3 library is located in a subdirectory
423             // of the system libraries directory. (Since Ubuntu 11.04.)
424             File libraryFile = new File(libraryDir, libraryName);
425             if (!libraryFile.isFile()) {
426                File failover = new File(libraryDir, &quot;nss/&quot; + libraryName);
427                if (failover.isFile()) {
428                    libraryFile = failover;
429                }
430             }
431             this.libraryName = libraryFile.getPath();
432             this.commonName = commonName;
433             this.slot = slot;
434             this.type = type;
435             initConfiguration();
436         }
437 
438         private void initConfiguration() {
439             switch (type) {
440             case EXTERNAL:
</pre>
</td>
<td>
<hr />
<pre>
397 
398             if ((libraryName == null) || (libraryName.length() == 0)) {
399                 // must be softtoken
400                 libraryName = System.mapLibraryName(SOFTTOKEN_LIB_NAME);
401                 if (fips == false) {
402                     type = (slot == 0) ? ModuleType.CRYPTO : ModuleType.KEYSTORE;
403                 } else {
404                     type = ModuleType.FIPS;
405                     if (slot != 0) {
406                         throw new RuntimeException
407                             (&quot;Slot index should be 0 for FIPS slot&quot;);
408                     }
409                 }
410             } else {
411                 if (libraryName.endsWith(System.mapLibraryName(TRUST_LIB_NAME))
412                         || commonName.equals(&quot;Builtin Roots Module&quot;)) {
413                     type = ModuleType.TRUSTANCHOR;
414                 } else {
415                     type = ModuleType.EXTERNAL;
416                 }




417             }
418             // On Ubuntu the libsoftokn3 library is located in a subdirectory
419             // of the system libraries directory. (Since Ubuntu 11.04.)
420             File libraryFile = new File(libraryDir, libraryName);
421             if (!libraryFile.isFile()) {
422                File failover = new File(libraryDir, &quot;nss/&quot; + libraryName);
423                if (failover.isFile()) {
424                    libraryFile = failover;
425                }
426             }
427             this.libraryName = libraryFile.getPath();
428             this.commonName = commonName;
429             this.slot = slot;
430             this.type = type;
431             initConfiguration();
432         }
433 
434         private void initConfiguration() {
435             switch (type) {
436             case EXTERNAL:
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../jdk.compiler/share/classes/com/sun/tools/javac/processing/JavacProcessingEnvironment.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../jdk.crypto.ec/share/classes/sun/security/ec/ECDHKeyAgreement.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>