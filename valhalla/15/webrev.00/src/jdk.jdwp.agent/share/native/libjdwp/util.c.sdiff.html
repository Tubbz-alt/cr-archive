<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jdwp.agent/share/native/libjdwp/util.c</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="eventHandler.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="util.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdwp.agent/share/native/libjdwp/util.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1728     return value;
1729 }
1730 
1731 jboolean
1732 isMethodObsolete(jmethodID method)
1733 {
1734     jvmtiError error;
1735     jboolean obsolete = JNI_TRUE;
1736 
1737     if ( method != NULL ) {
1738         error = JVMTI_FUNC_PTR(gdata-&gt;jvmti,IsMethodObsolete)
1739                     (gdata-&gt;jvmti, method, &amp;obsolete);
1740         if (error != JVMTI_ERROR_NONE) {
1741             obsolete = JNI_TRUE;
1742         }
1743     }
1744     return obsolete;
1745 }
1746 
1747 /* Get the jvmti environment to be used with tags */
<span class="line-modified">1748 static jvmtiEnv *</span>
1749 getSpecialJvmti(void)
1750 {
1751     jvmtiEnv  *jvmti;
1752     jvmtiError error;
1753     int        rc;
1754 
1755     /* Get one time use JVMTI Env */
1756     jvmtiCapabilities caps;
1757 
1758     rc = JVM_FUNC_PTR(gdata-&gt;jvm,GetEnv)
1759                      (gdata-&gt;jvm, (void **)&amp;jvmti, JVMTI_VERSION_1);
1760     if (rc != JNI_OK) {
1761         return NULL;
1762     }
1763     (void)memset(&amp;caps, 0, (int)sizeof(caps));
1764     caps.can_tag_objects = 1;
1765     error = JVMTI_FUNC_PTR(jvmti,AddCapabilities)(jvmti, &amp;caps);
1766     if ( error != JVMTI_ERROR_NONE ) {
1767         return NULL;
1768     }
</pre>
</td>
<td>
<hr />
<pre>
1728     return value;
1729 }
1730 
1731 jboolean
1732 isMethodObsolete(jmethodID method)
1733 {
1734     jvmtiError error;
1735     jboolean obsolete = JNI_TRUE;
1736 
1737     if ( method != NULL ) {
1738         error = JVMTI_FUNC_PTR(gdata-&gt;jvmti,IsMethodObsolete)
1739                     (gdata-&gt;jvmti, method, &amp;obsolete);
1740         if (error != JVMTI_ERROR_NONE) {
1741             obsolete = JNI_TRUE;
1742         }
1743     }
1744     return obsolete;
1745 }
1746 
1747 /* Get the jvmti environment to be used with tags */
<span class="line-modified">1748 jvmtiEnv *</span>
1749 getSpecialJvmti(void)
1750 {
1751     jvmtiEnv  *jvmti;
1752     jvmtiError error;
1753     int        rc;
1754 
1755     /* Get one time use JVMTI Env */
1756     jvmtiCapabilities caps;
1757 
1758     rc = JVM_FUNC_PTR(gdata-&gt;jvm,GetEnv)
1759                      (gdata-&gt;jvm, (void **)&amp;jvmti, JVMTI_VERSION_1);
1760     if (rc != JNI_OK) {
1761         return NULL;
1762     }
1763     (void)memset(&amp;caps, 0, (int)sizeof(caps));
1764     caps.can_tag_objects = 1;
1765     error = JVMTI_FUNC_PTR(jvmti,AddCapabilities)(jvmti, &amp;caps);
1766     if ( error != JVMTI_ERROR_NONE ) {
1767         return NULL;
1768     }
</pre>
</td>
</tr>
</table>
<center><a href="eventHandler.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="util.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>