<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.desktop/share/classes/javax/swing/plaf/basic/BasicMenuItemUI.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../colorchooser/ColorPanel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../text/WrappedPlainView.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.desktop/share/classes/javax/swing/plaf/basic/BasicMenuItemUI.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 211         }
 212         if (acceleratorForeground == null ||
 213             acceleratorForeground instanceof UIResource) {
 214             acceleratorForeground =
 215                 UIManager.getColor(prefix + &quot;.acceleratorForeground&quot;);
 216         }
 217         if (acceleratorSelectionForeground == null ||
 218             acceleratorSelectionForeground instanceof UIResource) {
 219             acceleratorSelectionForeground =
 220                 UIManager.getColor(prefix + &quot;.acceleratorSelectionForeground&quot;);
 221         }
 222         // Get accelerator delimiter
 223         acceleratorDelimiter =
 224             UIManager.getString(&quot;MenuItem.acceleratorDelimiter&quot;);
 225         if (acceleratorDelimiter == null) { acceleratorDelimiter = &quot;+&quot;; }
 226         // Icons
 227         if (arrowIcon == null ||
 228             arrowIcon instanceof UIResource) {
 229             arrowIcon = UIManager.getIcon(prefix + &quot;.arrowIcon&quot;);
 230         }
<span class="line-removed"> 231         updateCheckIcon();</span>
<span class="line-removed"> 232     }</span>
<span class="line-removed"> 233 </span>
<span class="line-removed"> 234     /**</span>
<span class="line-removed"> 235      * Updates check Icon based on column layout</span>
<span class="line-removed"> 236      */</span>
<span class="line-removed"> 237     private void updateCheckIcon() {</span>
<span class="line-removed"> 238         String prefix = getPropertyPrefix();</span>
 239 
 240         if (checkIcon == null ||
 241             checkIcon instanceof UIResource) {
 242             checkIcon = UIManager.getIcon(prefix + &quot;.checkIcon&quot;);
 243             //In case of column layout, .checkIconFactory is defined for this UI,
 244             //the icon is compatible with it and useCheckAndArrow() is true,
 245             //then the icon is handled by the checkIcon.
 246             boolean isColumnLayout = MenuItemLayoutHelper.isColumnLayout(
 247                     BasicGraphicsUtils.isLeftToRight(menuItem), menuItem);
 248             if (isColumnLayout) {
 249                 MenuItemCheckIconFactory iconFactory =
 250                         (MenuItemCheckIconFactory) UIManager.get(prefix
 251                                 + &quot;.checkIconFactory&quot;);
 252                 if (iconFactory != null
 253                         &amp;&amp; MenuItemLayoutHelper.useCheckAndArrow(menuItem)
 254                         &amp;&amp; iconFactory.isCompatible(checkIcon, prefix)) {
 255                     checkIcon = iconFactory.getIcon(menuItem);
 256                 }
 257             }
 258         }
</pre>
<hr />
<pre>
1138 
1139         //
1140         // PropertyChangeListener
1141         //
1142         public void propertyChange(PropertyChangeEvent e) {
1143             String name = e.getPropertyName();
1144 
1145             if (name == &quot;labelFor&quot; || name == &quot;displayedMnemonic&quot; ||
1146                 name == &quot;accelerator&quot;) {
1147                 updateAcceleratorBinding();
1148             } else if (name == &quot;text&quot; || &quot;font&quot; == name || &quot;foreground&quot; == name
1149                     || SwingUtilities2.isScaleChanged(e)) {
1150                 // remove the old html view client property if one
1151                 // existed, and install a new one if the text installed
1152                 // into the JLabel is html source.
1153                 JMenuItem lbl = ((JMenuItem) e.getSource());
1154                 String text = lbl.getText();
1155                 BasicHTML.updateRenderer(lbl, text);
1156             } else if (name  == &quot;iconTextGap&quot;) {
1157                 defaultTextIconGap = ((Number)e.getNewValue()).intValue();
<span class="line-removed">1158             } else if (name == &quot;horizontalTextPosition&quot;) {</span>
<span class="line-removed">1159                 updateCheckIcon();</span>
1160             }
1161         }
1162     }
1163 }
</pre>
</td>
<td>
<hr />
<pre>
 211         }
 212         if (acceleratorForeground == null ||
 213             acceleratorForeground instanceof UIResource) {
 214             acceleratorForeground =
 215                 UIManager.getColor(prefix + &quot;.acceleratorForeground&quot;);
 216         }
 217         if (acceleratorSelectionForeground == null ||
 218             acceleratorSelectionForeground instanceof UIResource) {
 219             acceleratorSelectionForeground =
 220                 UIManager.getColor(prefix + &quot;.acceleratorSelectionForeground&quot;);
 221         }
 222         // Get accelerator delimiter
 223         acceleratorDelimiter =
 224             UIManager.getString(&quot;MenuItem.acceleratorDelimiter&quot;);
 225         if (acceleratorDelimiter == null) { acceleratorDelimiter = &quot;+&quot;; }
 226         // Icons
 227         if (arrowIcon == null ||
 228             arrowIcon instanceof UIResource) {
 229             arrowIcon = UIManager.getIcon(prefix + &quot;.arrowIcon&quot;);
 230         }








 231 
 232         if (checkIcon == null ||
 233             checkIcon instanceof UIResource) {
 234             checkIcon = UIManager.getIcon(prefix + &quot;.checkIcon&quot;);
 235             //In case of column layout, .checkIconFactory is defined for this UI,
 236             //the icon is compatible with it and useCheckAndArrow() is true,
 237             //then the icon is handled by the checkIcon.
 238             boolean isColumnLayout = MenuItemLayoutHelper.isColumnLayout(
 239                     BasicGraphicsUtils.isLeftToRight(menuItem), menuItem);
 240             if (isColumnLayout) {
 241                 MenuItemCheckIconFactory iconFactory =
 242                         (MenuItemCheckIconFactory) UIManager.get(prefix
 243                                 + &quot;.checkIconFactory&quot;);
 244                 if (iconFactory != null
 245                         &amp;&amp; MenuItemLayoutHelper.useCheckAndArrow(menuItem)
 246                         &amp;&amp; iconFactory.isCompatible(checkIcon, prefix)) {
 247                     checkIcon = iconFactory.getIcon(menuItem);
 248                 }
 249             }
 250         }
</pre>
<hr />
<pre>
1130 
1131         //
1132         // PropertyChangeListener
1133         //
1134         public void propertyChange(PropertyChangeEvent e) {
1135             String name = e.getPropertyName();
1136 
1137             if (name == &quot;labelFor&quot; || name == &quot;displayedMnemonic&quot; ||
1138                 name == &quot;accelerator&quot;) {
1139                 updateAcceleratorBinding();
1140             } else if (name == &quot;text&quot; || &quot;font&quot; == name || &quot;foreground&quot; == name
1141                     || SwingUtilities2.isScaleChanged(e)) {
1142                 // remove the old html view client property if one
1143                 // existed, and install a new one if the text installed
1144                 // into the JLabel is html source.
1145                 JMenuItem lbl = ((JMenuItem) e.getSource());
1146                 String text = lbl.getText();
1147                 BasicHTML.updateRenderer(lbl, text);
1148             } else if (name  == &quot;iconTextGap&quot;) {
1149                 defaultTextIconGap = ((Number)e.getNewValue()).intValue();


1150             }
1151         }
1152     }
1153 }
</pre>
</td>
</tr>
</table>
<center><a href="../../colorchooser/ColorPanel.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../text/WrappedPlainView.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>