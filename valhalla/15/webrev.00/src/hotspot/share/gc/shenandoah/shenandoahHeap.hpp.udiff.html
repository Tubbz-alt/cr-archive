<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/gc/shenandoah/shenandoahHeap.hpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="shenandoahHeap.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahHeap.inline.hpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/shenandoah/shenandoahHeap.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -30,18 +30,18 @@</span>
  #include &quot;gc/shared/collectedHeap.hpp&quot;
  #include &quot;gc/shenandoah/shenandoahAsserts.hpp&quot;
  #include &quot;gc/shenandoah/shenandoahAllocRequest.hpp&quot;
  #include &quot;gc/shenandoah/shenandoahLock.hpp&quot;
  #include &quot;gc/shenandoah/shenandoahEvacOOMHandler.hpp&quot;
<span class="udiff-line-added">+ #include &quot;gc/shenandoah/shenandoahPadding.hpp&quot;</span>
  #include &quot;gc/shenandoah/shenandoahSharedVariables.hpp&quot;
  #include &quot;gc/shenandoah/shenandoahUnload.hpp&quot;
  #include &quot;services/memoryManager.hpp&quot;
  #include &quot;utilities/globalDefinitions.hpp&quot;
  
  class ConcurrentGCTimer;
  class ReferenceProcessor;
<span class="udiff-line-removed">- class ShenandoahAllocTracker;</span>
  class ShenandoahCollectorPolicy;
  class ShenandoahControlThread;
  class ShenandoahGCSession;
  class ShenandoahGCStateResetter;
  class ShenandoahHeuristics;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -65,13 +65,13 @@</span>
  
  class ShenandoahRegionIterator : public StackObj {
  private:
    ShenandoahHeap* _heap;
  
<span class="udiff-line-modified-removed">-   DEFINE_PAD_MINUS_SIZE(0, DEFAULT_CACHE_LINE_SIZE, sizeof(volatile size_t));</span>
<span class="udiff-line-modified-added">+   shenandoah_padding(0);</span>
    volatile size_t _index;
<span class="udiff-line-modified-removed">-   DEFINE_PAD_MINUS_SIZE(1, DEFAULT_CACHE_LINE_SIZE, 0);</span>
<span class="udiff-line-modified-added">+   shenandoah_padding(1);</span>
  
    // No implicit copying: iterators should be passed by reference to capture the state
    NONCOPYABLE(ShenandoahRegionIterator);
  
  public:
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -128,19 +128,17 @@</span>
  public:
    ShenandoahHeapLock* lock() {
      return &amp;_lock;
    }
  
<span class="udiff-line-removed">-   void assert_heaplock_owned_by_current_thread()     NOT_DEBUG_RETURN;</span>
<span class="udiff-line-removed">-   void assert_heaplock_not_owned_by_current_thread() NOT_DEBUG_RETURN;</span>
<span class="udiff-line-removed">-   void assert_heaplock_or_safepoint()                NOT_DEBUG_RETURN;</span>
<span class="udiff-line-removed">- </span>
  // ---------- Initialization, termination, identification, printing routines
  //
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+   static ShenandoahHeap* _heap;</span>
<span class="udiff-line-added">+ </span>
  public:
    static ShenandoahHeap* heap();
<span class="udiff-line-removed">-   static ShenandoahHeap* heap_no_check();</span>
  
    const char* name()          const { return &quot;Shenandoah&quot;; }
    ShenandoahHeap::Name kind() const { return CollectedHeap::Shenandoah; }
  
    ShenandoahHeap(ShenandoahCollectorPolicy* policy);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -164,15 +162,15 @@</span>
  // ---------- Heap counters and metrics
  //
  private:
             size_t _initial_size;
             size_t _minimum_size;
<span class="udiff-line-modified-removed">-   DEFINE_PAD_MINUS_SIZE(0, DEFAULT_CACHE_LINE_SIZE, sizeof(volatile size_t));</span>
<span class="udiff-line-modified-added">+   shenandoah_padding(0);</span>
    volatile size_t _used;
    volatile size_t _committed;
    volatile size_t _bytes_allocated_since_gc_start;
<span class="udiff-line-modified-removed">-   DEFINE_PAD_MINUS_SIZE(1, DEFAULT_CACHE_LINE_SIZE, 0);</span>
<span class="udiff-line-modified-added">+   shenandoah_padding(1);</span>
  
  public:
    void increase_used(size_t bytes);
    void decrease_used(size_t bytes);
    void set_used(size_t bytes);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -375,11 +373,10 @@</span>
  public:
    // Entry points to STW GC operations, these cause a related safepoint, that then
    // call the entry method below
    void vmop_entry_init_mark();
    void vmop_entry_final_mark();
<span class="udiff-line-removed">-   void vmop_entry_final_evac();</span>
    void vmop_entry_init_updaterefs();
    void vmop_entry_final_updaterefs();
    void vmop_entry_init_traversal();
    void vmop_entry_final_traversal();
    void vmop_entry_full(GCCause::Cause cause);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -387,11 +384,10 @@</span>
  
    // Entry methods to normally STW GC operations. These set up logging, monitoring
    // and workers for net VM operation
    void entry_init_mark();
    void entry_final_mark();
<span class="udiff-line-removed">-   void entry_final_evac();</span>
    void entry_init_updaterefs();
    void entry_final_updaterefs();
    void entry_init_traversal();
    void entry_final_traversal();
    void entry_full(GCCause::Cause cause);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -411,11 +407,10 @@</span>
  
  private:
    // Actual work for the phases
    void op_init_mark();
    void op_final_mark();
<span class="udiff-line-removed">-   void op_final_evac();</span>
    void op_init_updaterefs();
    void op_final_updaterefs();
    void op_init_traversal();
    void op_final_traversal();
    void op_full(GCCause::Cause cause);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -456,11 +451,10 @@</span>
    ShenandoahTraversalGC*     _traversal_gc;
    ShenandoahMarkCompact*     _full_gc;
    ShenandoahPacer*           _pacer;
    ShenandoahVerifier*        _verifier;
  
<span class="udiff-line-removed">-   ShenandoahAllocTracker*    _alloc_tracker;</span>
    ShenandoahPhaseTimings*    _phase_timings;
  
    ShenandoahControlThread*   control_thread()          { return _control_thread;    }
    ShenandoahMarkCompact*     full_gc()                 { return _full_gc;           }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -472,11 +466,10 @@</span>
    ShenandoahTraversalGC*     traversal_gc()      const { return _traversal_gc;      }
    bool                       is_traversal_mode() const { return _traversal_gc != NULL; }
    ShenandoahPacer*           pacer()             const { return _pacer;             }
  
    ShenandoahPhaseTimings*    phase_timings()     const { return _phase_timings;     }
<span class="udiff-line-removed">-   ShenandoahAllocTracker*    alloc_tracker()     const { return _alloc_tracker;     }</span>
  
    ShenandoahVerifier*        verifier();
  
  // ---------- VM subsystem bindings
  //
</pre>
<center><a href="shenandoahHeap.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="shenandoahHeap.inline.hpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>