<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/jvmci/vmStructs_jvmci.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmci_globals.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmStructs_jvmci.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/jvmci/vmStructs_jvmci.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  53                                                                                                                                      \
  54   static_field(CompilerToVM::Data,             ThreadLocalAllocBuffer_alignment_reserve, size_t)                                     \
  55                                                                                                                                      \
  56   static_field(CompilerToVM::Data,             Universe_collectedHeap,                 CollectedHeap*)                               \
  57   static_field(CompilerToVM::Data,             Universe_base_vtable_size,              int)                                          \
  58   static_field(CompilerToVM::Data,             Universe_narrow_oop_base,               address)                                      \
  59   static_field(CompilerToVM::Data,             Universe_narrow_oop_shift,              int)                                          \
  60   static_field(CompilerToVM::Data,             Universe_narrow_klass_base,             address)                                      \
  61   static_field(CompilerToVM::Data,             Universe_narrow_klass_shift,            int)                                          \
  62   static_field(CompilerToVM::Data,             Universe_non_oop_bits,                  void*)                                        \
  63   static_field(CompilerToVM::Data,             Universe_verify_oop_mask,               uintptr_t)                                    \
  64   static_field(CompilerToVM::Data,             Universe_verify_oop_bits,               uintptr_t)                                    \
  65                                                                                                                                      \
  66   static_field(CompilerToVM::Data,             _supports_inline_contig_alloc,          bool)                                         \
  67   static_field(CompilerToVM::Data,             _heap_end_addr,                         HeapWord**)                                   \
  68   static_field(CompilerToVM::Data,             _heap_top_addr,                         HeapWord* volatile*)                          \
  69                                                                                                                                      \
  70   static_field(CompilerToVM::Data,             _max_oop_map_stack_offset,              int)                                          \
  71   static_field(CompilerToVM::Data,             _fields_annotations_base_offset,        int)                                          \
  72                                                                                                                                      \
<span class="line-modified">  73   static_field(CompilerToVM::Data,             cardtable_start_address,                jbyte*)                                       \</span>
  74   static_field(CompilerToVM::Data,             cardtable_shift,                        int)                                          \
  75                                                                                                                                      \
  76   static_field(CompilerToVM::Data,             vm_page_size,                           int)                                          \
  77                                                                                                                                      \
  78   static_field(CompilerToVM::Data,             sizeof_vtableEntry,                     int)                                          \
  79   static_field(CompilerToVM::Data,             sizeof_ExceptionTableElement,           int)                                          \
  80   static_field(CompilerToVM::Data,             sizeof_LocalVariableTableElement,       int)                                          \
  81   static_field(CompilerToVM::Data,             sizeof_ConstantPool,                    int)                                          \
  82   static_field(CompilerToVM::Data,             sizeof_narrowKlass,                     int)                                          \
  83   static_field(CompilerToVM::Data,             sizeof_arrayOopDesc,                    int)                                          \
  84   static_field(CompilerToVM::Data,             sizeof_BasicLock,                       int)                                          \
  85                                                                                                                                      \
  86   static_field(CompilerToVM::Data,             dsin,                                   address)                                      \
  87   static_field(CompilerToVM::Data,             dcos,                                   address)                                      \
  88   static_field(CompilerToVM::Data,             dtan,                                   address)                                      \
  89   static_field(CompilerToVM::Data,             dexp,                                   address)                                      \
  90   static_field(CompilerToVM::Data,             dlog,                                   address)                                      \
  91   static_field(CompilerToVM::Data,             dlog10,                                 address)                                      \
  92   static_field(CompilerToVM::Data,             dpow,                                   address)                                      \
  93                                                                                                                                      \
</pre>
<hr />
<pre>
 140   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                           intptr_t*)                                    \
 141   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                             address*)                                     \
 142   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                          intptr_t)                                     \
 143   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                           int)                                          \
 144                                                                                                                                      \
 145   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 146   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 147   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 148   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 149                                                                                                                                      \
 150   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
 151   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
 152   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*))                         \
 153   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
 154   static_field(JVMFlag,                        flags,                                         JVMFlag*)                              \
 155                                                                                                                                      \
 156   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 157   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 158   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 159   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \

 160   nonstatic_field(InstanceKlass,               _misc_flags,                                   u4)                                    \
 161   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 162                                                                                                                                      \
 163   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 164   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 165                                                                                                                                      \
 166   nonstatic_field(JVMCICompileState,           _jvmti_can_hotswap_or_post_breakpoint,         jbyte)                                 \
 167   nonstatic_field(JVMCICompileState,           _jvmti_can_access_local_variables,             jbyte)                                 \
 168   nonstatic_field(JVMCICompileState,           _jvmti_can_post_on_exceptions,                 jbyte)                                 \
 169   nonstatic_field(JVMCICompileState,           _jvmti_can_pop_frame,                          jbyte)                                 \
 170                                                                                                                                      \
 171   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 172   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 173   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 174   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 175   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 176   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 177   volatile_nonstatic_field(JavaThread,         _doing_unsafe_access,                          bool)                                  \
 178   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 179   nonstatic_field(JavaThread,                  _pending_deoptimization,                       int)                                   \
 180   nonstatic_field(JavaThread,                  _pending_failed_speculation,                   jlong)                                 \
 181   nonstatic_field(JavaThread,                  _pending_transfer_to_interpreter,              bool)                                  \
 182   nonstatic_field(JavaThread,                  _jvmci_counters,                               jlong*)                                \
 183   nonstatic_field(JavaThread,                  _should_post_on_exceptions_flag,               int)                                   \
 184   nonstatic_field(JavaThread,                  _jni_environment,                              JNIEnv)                                \
 185   nonstatic_field(JavaThread,                  _reserved_stack_activation,                    address)                               \
 186                                                                                                                                      \
 187   static_field(java_lang_Class,                _klass_offset,                                 int)                                   \
 188   static_field(java_lang_Class,                _array_klass_offset,                           int)                                   \
 189                                                                                                                                      \
 190   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
 191                                                                                                                                      \
 192   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 193   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 194   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 195   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
<span class="line-modified"> 196   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \</span>
 197   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 198   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 199   nonstatic_field(Klass,                       _prototype_header,                             markWord)                              \
<span class="line-modified"> 200   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \</span>
 201   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 202   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 203   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 204   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 205                                                                                                                                      \
 206   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 207   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 208   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 209   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 210   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 211   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 212                                                                                                                                      \
 213   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 214   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 215   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 216   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 217   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 218   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 219   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 220   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
</pre>
<hr />
<pre>
 238   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 239   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 240   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 241   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 242   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 243   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 244   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 245   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 246   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 247   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 248   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 249   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 250   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 251   nonstatic_field(MethodData,                  _jvmci_ir_size,                                int)                                   \
 252                                                                                                                                      \
 253   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 254   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 255                                                                                                                                      \
 256   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 257                                                                                                                                      \
<span class="line-modified"> 258   volatile_nonstatic_field(ObjectMonitor,      _cxq,                                   ObjectWaiter*)                                \</span>
<span class="line-modified"> 259   volatile_nonstatic_field(ObjectMonitor,      _EntryList,                             ObjectWaiter*)                                \</span>
<span class="line-modified"> 260   volatile_nonstatic_field(ObjectMonitor,      _succ,                                  Thread*)                                      \</span>


 261                                                                                                                                      \
 262   volatile_nonstatic_field(oopDesc,            _mark,                                         markWord)                              \
 263   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 264                                                                                                                                      \
 265   static_field(os,                             _polling_page,                                 address)                               \
 266                                                                                                                                      \
 267   static_field(StubRoutines,                _verify_oop_count,                                jint)                                  \
 268                                                                                                                                      \
 269   static_field(StubRoutines,                _throw_delayed_StackOverflowError_entry,          address)                               \
 270                                                                                                                                      \
 271   static_field(StubRoutines,                _jbyte_arraycopy,                                 address)                               \
 272   static_field(StubRoutines,                _jshort_arraycopy,                                address)                               \
 273   static_field(StubRoutines,                _jint_arraycopy,                                  address)                               \
 274   static_field(StubRoutines,                _jlong_arraycopy,                                 address)                               \
 275   static_field(StubRoutines,                _oop_arraycopy,                                   address)                               \
 276   static_field(StubRoutines,                _oop_arraycopy_uninit,                            address)                               \
 277   static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                        address)                               \
 278   static_field(StubRoutines,                _jshort_disjoint_arraycopy,                       address)                               \
 279   static_field(StubRoutines,                _jint_disjoint_arraycopy,                         address)                               \
 280   static_field(StubRoutines,                _jlong_disjoint_arraycopy,                        address)                               \
</pre>
<hr />
<pre>
 311   static_field(StubRoutines,                _sha256_implCompress,                             address)                               \
 312   static_field(StubRoutines,                _sha256_implCompressMB,                           address)                               \
 313   static_field(StubRoutines,                _sha512_implCompress,                             address)                               \
 314   static_field(StubRoutines,                _sha512_implCompressMB,                           address)                               \
 315   static_field(StubRoutines,                _updateBytesCRC32,                                address)                               \
 316   static_field(StubRoutines,                _crc_table_adr,                                   address)                               \
 317   static_field(StubRoutines,                _crc32c_table_addr,                               address)                               \
 318   static_field(StubRoutines,                _updateBytesCRC32C,                               address)                               \
 319   static_field(StubRoutines,                _updateBytesAdler32,                              address)                               \
 320   static_field(StubRoutines,                _multiplyToLen,                                   address)                               \
 321   static_field(StubRoutines,                _squareToLen,                                     address)                               \
 322   static_field(StubRoutines,                _mulAdd,                                          address)                               \
 323   static_field(StubRoutines,                _montgomeryMultiply,                              address)                               \
 324   static_field(StubRoutines,                _montgomerySquare,                                address)                               \
 325   static_field(StubRoutines,                _vectorizedMismatch,                              address)                               \
 326   static_field(StubRoutines,                _bigIntegerRightShiftWorker,                      address)                               \
 327   static_field(StubRoutines,                _bigIntegerLeftShiftWorker,                       address)                               \
 328                                                                                                                                      \
 329   nonstatic_field(Thread,                   _tlab,                                            ThreadLocalAllocBuffer)                \
 330   nonstatic_field(Thread,                   _allocated_bytes,                                 jlong)                                 \
<span class="line-modified"> 331   nonstatic_field(Thread,                   _polling_page,                                    address)                               \</span>
 332                                                                                                                                      \
 333   nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           HeapWord*)                             \
 334   nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             HeapWord*)                             \
 335   nonstatic_field(ThreadLocalAllocBuffer,   _end,                                             HeapWord*)                             \
 336   nonstatic_field(ThreadLocalAllocBuffer,   _pf_top,                                          HeapWord*)                             \
 337   nonstatic_field(ThreadLocalAllocBuffer,   _desired_size,                                    size_t)                                \
 338   nonstatic_field(ThreadLocalAllocBuffer,   _refill_waste_limit,                              size_t)                                \
 339   nonstatic_field(ThreadLocalAllocBuffer,   _number_of_refills,                               unsigned)                              \
 340   nonstatic_field(ThreadLocalAllocBuffer,   _fast_refill_waste,                               unsigned)                              \
 341   nonstatic_field(ThreadLocalAllocBuffer,   _slow_allocations,                                unsigned)                              \
 342                                                                                                                                      \
 343   nonstatic_field(ThreadShadow,             _pending_exception,                               oop)                                   \
 344                                                                                                                                      \
 345   static_field(vmSymbols,                   _symbols[0],                                      Symbol*)                               \
 346                                                                                                                                      \
 347   nonstatic_field(vtableEntry,              _method,                                          Method*)                               \
 348 
 349 #define VM_TYPES(declare_type, declare_toplevel_type, declare_integer_type, declare_unsigned_integer_type) \
 350   declare_integer_type(bool)                                              \
 351   declare_unsigned_integer_type(size_t)                                   \
</pre>
<hr />
<pre>
 431   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
 432   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
 433   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
 434   declare_constant(JVM_CONSTANT_DynamicInError)                           \
 435   declare_constant(JVM_CONSTANT_InternalMax)                              \
 436                                                                           \
 437   declare_constant(ArrayData::array_len_off_set)                          \
 438   declare_constant(ArrayData::array_start_off_set)                        \
 439                                                                           \
 440   declare_constant(BitData::exception_seen_flag)                          \
 441   declare_constant(BitData::null_seen_flag)                               \
 442   declare_constant(BranchData::not_taken_off_set)                         \
 443                                                                           \
 444   declare_constant_with_value(&quot;CardTable::dirty_card&quot;, CardTable::dirty_card_val()) \
 445                                                                           \
 446   declare_constant(CodeInstaller::VERIFIED_ENTRY)                         \
 447   declare_constant(CodeInstaller::UNVERIFIED_ENTRY)                       \
 448   declare_constant(CodeInstaller::OSR_ENTRY)                              \
 449   declare_constant(CodeInstaller::EXCEPTION_HANDLER_ENTRY)                \
 450   declare_constant(CodeInstaller::DEOPT_HANDLER_ENTRY)                    \

 451   declare_constant(CodeInstaller::INVOKEINTERFACE)                        \
 452   declare_constant(CodeInstaller::INVOKEVIRTUAL)                          \
 453   declare_constant(CodeInstaller::INVOKESTATIC)                           \
 454   declare_constant(CodeInstaller::INVOKESPECIAL)                          \
 455   declare_constant(CodeInstaller::INLINE_INVOKE)                          \
 456   declare_constant(CodeInstaller::POLL_NEAR)                              \
 457   declare_constant(CodeInstaller::POLL_RETURN_NEAR)                       \
 458   declare_constant(CodeInstaller::POLL_FAR)                               \
 459   declare_constant(CodeInstaller::POLL_RETURN_FAR)                        \
 460   declare_constant(CodeInstaller::CARD_TABLE_SHIFT)                       \
 461   declare_constant(CodeInstaller::CARD_TABLE_ADDRESS)                     \
 462   declare_constant(CodeInstaller::HEAP_TOP_ADDRESS)                       \
 463   declare_constant(CodeInstaller::HEAP_END_ADDRESS)                       \
 464   declare_constant(CodeInstaller::NARROW_KLASS_BASE_ADDRESS)              \
 465   declare_constant(CodeInstaller::NARROW_OOP_BASE_ADDRESS)                \
 466   declare_constant(CodeInstaller::CRC_TABLE_ADDRESS)                      \
 467   declare_constant(CodeInstaller::LOG_OF_HEAP_REGION_GRAIN_BYTES)         \
 468   declare_constant(CodeInstaller::INLINE_CONTIGUOUS_ALLOCATION_SUPPORTED) \
 469   declare_constant(CodeInstaller::INVOKE_INVALID)                         \
 470                                                                           \
</pre>
<hr />
<pre>
 591                                                                           \
 592   declare_constant(ReceiverTypeData::nonprofiled_count_off_set)           \
 593   declare_constant(ReceiverTypeData::receiver_type_row_cell_count)        \
 594   declare_constant(ReceiverTypeData::receiver0_offset)                    \
 595   declare_constant(ReceiverTypeData::count0_offset)                       \
 596                                                                           \
 597   declare_constant(vmIntrinsics::_invokeBasic)                            \
 598   declare_constant(vmIntrinsics::_linkToVirtual)                          \
 599   declare_constant(vmIntrinsics::_linkToStatic)                           \
 600   declare_constant(vmIntrinsics::_linkToSpecial)                          \
 601   declare_constant(vmIntrinsics::_linkToInterface)                        \
 602                                                                           \
 603   declare_constant(vmSymbols::FIRST_SID)                                  \
 604   declare_constant(vmSymbols::SID_LIMIT)                                  \
 605 
 606 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant) \
 607   declare_constant(InvocationCounter::count_increment)                    \
 608   declare_constant(InvocationCounter::count_shift)                        \
 609                                                                           \
 610   declare_constant(markWord::hash_shift)                                  \

 611                                                                           \
 612   declare_constant(markWord::biased_lock_mask_in_place)                   \
 613   declare_constant(markWord::age_mask_in_place)                           \
 614   declare_constant(markWord::epoch_mask_in_place)                         \
 615   declare_constant(markWord::hash_mask)                                   \
 616   declare_constant(markWord::hash_mask_in_place)                          \
 617                                                                           \
 618   declare_constant(markWord::unlocked_value)                              \
 619   declare_constant(markWord::biased_lock_pattern)                         \
 620                                                                           \
 621   declare_constant(markWord::no_hash_in_place)                            \
 622   declare_constant(markWord::no_lock_in_place)                            \
 623 
 624 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
 625   declare_function(SharedRuntime::register_finalizer)                     \
 626   declare_function(SharedRuntime::exception_handler_for_return_address)   \
 627   declare_function(SharedRuntime::OSR_migration_end)                      \
 628   declare_function(SharedRuntime::enable_stack_reserved_zone)             \
 629   declare_function(SharedRuntime::frem)                                   \
 630   declare_function(SharedRuntime::drem)                                   \
</pre>
<hr />
<pre>
 712 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 713   declare_constant(VM_Version::CPU_FP)                  \
 714   declare_constant(VM_Version::CPU_ASIMD)               \
 715   declare_constant(VM_Version::CPU_EVTSTRM)             \
 716   declare_constant(VM_Version::CPU_AES)                 \
 717   declare_constant(VM_Version::CPU_PMULL)               \
 718   declare_constant(VM_Version::CPU_SHA1)                \
 719   declare_constant(VM_Version::CPU_SHA2)                \
 720   declare_constant(VM_Version::CPU_CRC32)               \
 721   declare_constant(VM_Version::CPU_LSE)                 \
 722   declare_constant(VM_Version::CPU_STXR_PREFETCH)       \
 723   declare_constant(VM_Version::CPU_A53MAC)              \
 724   declare_constant(VM_Version::CPU_DMB_ATOMICS)
 725 
 726 #endif
 727 
 728 
 729 #ifdef X86
 730 
 731 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
<span class="line-modified"> 732   volatile_nonstatic_field(JavaFrameAnchor, _last_Java_fp, intptr_t*)</span>

 733 
 734 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 735   LP64_ONLY(declare_constant(frame::arg_reg_save_area_bytes))       \
 736   declare_constant(frame::interpreter_frame_sender_sp_offset)       \
 737   declare_constant(frame::interpreter_frame_last_sp_offset)         \
 738   declare_constant(VM_Version::CPU_CX8)                             \
 739   declare_constant(VM_Version::CPU_CMOV)                            \
 740   declare_constant(VM_Version::CPU_FXSR)                            \
 741   declare_constant(VM_Version::CPU_HT)                              \
 742   declare_constant(VM_Version::CPU_MMX)                             \
 743   declare_constant(VM_Version::CPU_3DNOW_PREFETCH)                  \
 744   declare_constant(VM_Version::CPU_SSE)                             \
 745   declare_constant(VM_Version::CPU_SSE2)                            \
 746   declare_constant(VM_Version::CPU_SSE3)                            \
 747   declare_constant(VM_Version::CPU_SSSE3)                           \
 748   declare_constant(VM_Version::CPU_SSE4A)                           \
 749   declare_constant(VM_Version::CPU_SSE4_1)                          \
 750   declare_constant(VM_Version::CPU_SSE4_2)                          \
 751   declare_constant(VM_Version::CPU_POPCNT)                          \
 752   declare_constant(VM_Version::CPU_LZCNT)                           \
</pre>
<hr />
<pre>
 755   declare_constant(VM_Version::CPU_AVX)                             \
 756   declare_constant(VM_Version::CPU_AVX2)                            \
 757   declare_constant(VM_Version::CPU_AES)                             \
 758   declare_constant(VM_Version::CPU_ERMS)                            \
 759   declare_constant(VM_Version::CPU_CLMUL)                           \
 760   declare_constant(VM_Version::CPU_BMI1)                            \
 761   declare_constant(VM_Version::CPU_BMI2)                            \
 762   declare_constant(VM_Version::CPU_RTM)                             \
 763   declare_constant(VM_Version::CPU_ADX)                             \
 764   declare_constant(VM_Version::CPU_AVX512F)                         \
 765   declare_constant(VM_Version::CPU_AVX512DQ)                        \
 766   declare_constant(VM_Version::CPU_AVX512PF)                        \
 767   declare_constant(VM_Version::CPU_AVX512ER)                        \
 768   declare_constant(VM_Version::CPU_AVX512CD)
 769 
 770 #define VM_LONG_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 771   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512BW&quot;, CPU_AVX512BW) \
 772   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512VL&quot;, CPU_AVX512VL) \
 773   declare_preprocessor_constant(&quot;VM_Version::CPU_SHA&quot;, CPU_SHA)           \
 774   declare_preprocessor_constant(&quot;VM_Version::CPU_FMA&quot;, CPU_FMA)           \
<span class="line-modified"> 775   declare_preprocessor_constant(&quot;VM_Version::CPU_VZEROUPPER&quot;, CPU_VZEROUPPER)</span>









 776 
 777 #endif
 778 
 779 
 780 #ifdef SPARC
 781 
 782 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
 783   volatile_nonstatic_field(JavaFrameAnchor, _flags, int)
 784 
 785 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 786   declare_constant(VM_Version::ISA_V9)                  \
 787   declare_constant(VM_Version::ISA_POPC)                \
 788   declare_constant(VM_Version::ISA_VIS1)                \
 789   declare_constant(VM_Version::ISA_VIS2)                \
 790   declare_constant(VM_Version::ISA_BLK_INIT)            \
 791   declare_constant(VM_Version::ISA_FMAF)                \
 792   declare_constant(VM_Version::ISA_VIS3)                \
 793   declare_constant(VM_Version::ISA_HPC)                 \
 794   declare_constant(VM_Version::ISA_IMA)                 \
 795   declare_constant(VM_Version::ISA_AES)                 \
</pre>
<hr />
<pre>
 821   declare_constant(VM_Version::ISA_VIS3C)               \
 822   declare_constant(VM_Version::ISA_SPARC5B)             \
 823   declare_constant(VM_Version::ISA_MME)                 \
 824   declare_constant(VM_Version::CPU_FAST_IDIV)           \
 825   declare_constant(VM_Version::CPU_FAST_RDPC)           \
 826   declare_constant(VM_Version::CPU_FAST_BIS)            \
 827   declare_constant(VM_Version::CPU_FAST_LD)             \
 828   declare_constant(VM_Version::CPU_FAST_CMOVE)          \
 829   declare_constant(VM_Version::CPU_FAST_IND_BR)         \
 830   declare_constant(VM_Version::CPU_BLK_ZEROING)
 831 #endif
 832 
 833 
 834 /*
 835  * Dummy defines for architectures that don&#39;t use these.
 836  */
 837 #ifndef VM_STRUCTS_CPU
 838 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field)
 839 #endif
 840 
<span class="line-removed"> 841 #ifndef VM_TYPES_CPU</span>
<span class="line-removed"> 842 #define VM_TYPES_CPU(declare_type, declare_toplevel_type, declare_oop_type, declare_integer_type, declare_unsigned_integer_type, declare_c1_toplevel_type, declare_c2_type, declare_c2_toplevel_type)</span>
<span class="line-removed"> 843 #endif</span>
<span class="line-removed"> 844 </span>
 845 #ifndef VM_INT_CONSTANTS_CPU
 846 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 847 #endif
 848 
 849 #ifndef VM_LONG_CONSTANTS_CPU
 850 #define VM_LONG_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 851 #endif
 852 
<span class="line-removed"> 853 #ifndef VM_STRUCTS_OS</span>
<span class="line-removed"> 854 #define VM_STRUCTS_OS(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field)</span>
<span class="line-removed"> 855 #endif</span>
<span class="line-removed"> 856 </span>
<span class="line-removed"> 857 #ifndef VM_TYPES_OS</span>
<span class="line-removed"> 858 #define VM_TYPES_OS(declare_type, declare_toplevel_type, declare_oop_type, declare_integer_type, declare_unsigned_integer_type, declare_c1_toplevel_type, declare_c2_type, declare_c2_toplevel_type)</span>
<span class="line-removed"> 859 #endif</span>
<span class="line-removed"> 860 </span>
<span class="line-removed"> 861 #ifndef VM_INT_CONSTANTS_OS</span>
<span class="line-removed"> 862 #define VM_INT_CONSTANTS_OS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)</span>
<span class="line-removed"> 863 #endif</span>
<span class="line-removed"> 864 </span>
<span class="line-removed"> 865 #ifndef VM_LONG_CONSTANTS_OS</span>
<span class="line-removed"> 866 #define VM_LONG_CONSTANTS_OS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)</span>
<span class="line-removed"> 867 #endif</span>
<span class="line-removed"> 868 </span>
 869 #ifndef VM_ADDRESSES_OS
 870 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function)
 871 #endif
 872 
 873 
 874 //
 875 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
 876 //
 877 
 878 // These initializers are allowed to access private fields in classes
 879 // as long as class VMStructs is a friend
 880 VMStructEntry JVMCIVMStructs::localHotSpotVMStructs[] = {
 881   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 882              GENERATE_STATIC_VM_STRUCT_ENTRY,
 883              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 884              GENERATE_NONSTATIC_VM_STRUCT_ENTRY)
 885 
<span class="line-removed"> 886   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 887                 GENERATE_STATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 888                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 889                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 890                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 891                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 892                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,</span>
<span class="line-removed"> 893                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)</span>
<span class="line-removed"> 894 </span>
 895   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 896                  GENERATE_STATIC_VM_STRUCT_ENTRY,
 897                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 898                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 899                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
 900                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
 901                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
 902                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
 903 
 904 #if INCLUDE_G1GC
 905   VM_STRUCTS_JVMCI_G1GC(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 906                         GENERATE_STATIC_VM_STRUCT_ENTRY)
 907 #endif
 908 
 909   GENERATE_VM_STRUCT_LAST_ENTRY()
 910 };
 911 
 912 VMTypeEntry JVMCIVMStructs::localHotSpotVMTypes[] = {
 913   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
 914            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
 915            GENERATE_INTEGER_VM_TYPE_ENTRY,
 916            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY)
 917 
<span class="line-removed"> 918   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 919               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 920               GENERATE_OOP_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 921               GENERATE_INTEGER_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 922               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 923               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 924               GENERATE_C2_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 925               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)</span>
<span class="line-removed"> 926 </span>
<span class="line-removed"> 927   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 928                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 929                GENERATE_OOP_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 930                GENERATE_INTEGER_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 931                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 932                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 933                GENERATE_C2_VM_TYPE_ENTRY,</span>
<span class="line-removed"> 934                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)</span>
<span class="line-removed"> 935 </span>
 936   GENERATE_VM_TYPE_LAST_ENTRY()
 937 };
 938 
 939 VMIntConstantEntry JVMCIVMStructs::localHotSpotVMIntConstants[] = {
 940   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
 941                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
 942                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 943 
<span class="line-removed"> 944   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,</span>
<span class="line-removed"> 945                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,</span>
<span class="line-removed"> 946                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,</span>
<span class="line-removed"> 947                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,</span>
<span class="line-removed"> 948                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)</span>
<span class="line-removed"> 949 </span>
 950   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
 951                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
 952                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
 953                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
 954                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 955 
 956 #if INCLUDE_G1GC
 957   VM_INT_CONSTANTS_JVMCI_G1GC(GENERATE_VM_INT_CONSTANT_ENTRY,
 958                               GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
 959                               GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 960 #endif
 961 
 962   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
 963 };
 964 
 965 VMLongConstantEntry JVMCIVMStructs::localHotSpotVMLongConstants[] = {
 966   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
 967                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 968 
<span class="line-removed"> 969   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,</span>
<span class="line-removed"> 970                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,</span>
<span class="line-removed"> 971                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,</span>
<span class="line-removed"> 972                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,</span>
<span class="line-removed"> 973                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)</span>
<span class="line-removed"> 974 </span>
 975   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
 976                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
 977                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
 978                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
 979                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 980 
 981   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
 982 };
 983 
 984 VMAddressEntry JVMCIVMStructs::localHotSpotVMAddresses[] = {
 985   VM_ADDRESSES(GENERATE_VM_ADDRESS_ENTRY,
 986                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 987                GENERATE_VM_FUNCTION_ENTRY)
 988   VM_ADDRESSES_COMPILER_RUNTIME(GENERATE_VM_ADDRESS_ENTRY,
 989                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 990                GENERATE_VM_FUNCTION_ENTRY)
 991   VM_ADDRESSES_OS(GENERATE_VM_ADDRESS_ENTRY,
 992                   GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 993                   GENERATE_VM_FUNCTION_ENTRY)
 994 
</pre>
<hr />
<pre>
1006 int JVMCIVMStructs::localHotSpotVMIntConstants_count() {
1007   // Ignore sentinel entry at the end
1008   return (sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry)) - 1;
1009 }
1010 int JVMCIVMStructs::localHotSpotVMLongConstants_count() {
1011   // Ignore sentinel entry at the end
1012   return (sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry)) - 1;
1013 }
1014 int JVMCIVMStructs::localHotSpotVMAddresses_count() {
1015   // Ignore sentinel entry at the end
1016   return (sizeof(localHotSpotVMAddresses) / sizeof(VMAddressEntry)) - 1;
1017 }
1018 
1019 extern &quot;C&quot; {
1020 JNIEXPORT VMStructEntry* jvmciHotSpotVMStructs = JVMCIVMStructs::localHotSpotVMStructs;
1021 JNIEXPORT VMTypeEntry* jvmciHotSpotVMTypes = JVMCIVMStructs::localHotSpotVMTypes;
1022 JNIEXPORT VMIntConstantEntry* jvmciHotSpotVMIntConstants = JVMCIVMStructs::localHotSpotVMIntConstants;
1023 JNIEXPORT VMLongConstantEntry* jvmciHotSpotVMLongConstants = JVMCIVMStructs::localHotSpotVMLongConstants;
1024 JNIEXPORT VMAddressEntry* jvmciHotSpotVMAddresses = JVMCIVMStructs::localHotSpotVMAddresses;
1025 }




































</pre>
</td>
<td>
<hr />
<pre>
  53                                                                                                                                      \
  54   static_field(CompilerToVM::Data,             ThreadLocalAllocBuffer_alignment_reserve, size_t)                                     \
  55                                                                                                                                      \
  56   static_field(CompilerToVM::Data,             Universe_collectedHeap,                 CollectedHeap*)                               \
  57   static_field(CompilerToVM::Data,             Universe_base_vtable_size,              int)                                          \
  58   static_field(CompilerToVM::Data,             Universe_narrow_oop_base,               address)                                      \
  59   static_field(CompilerToVM::Data,             Universe_narrow_oop_shift,              int)                                          \
  60   static_field(CompilerToVM::Data,             Universe_narrow_klass_base,             address)                                      \
  61   static_field(CompilerToVM::Data,             Universe_narrow_klass_shift,            int)                                          \
  62   static_field(CompilerToVM::Data,             Universe_non_oop_bits,                  void*)                                        \
  63   static_field(CompilerToVM::Data,             Universe_verify_oop_mask,               uintptr_t)                                    \
  64   static_field(CompilerToVM::Data,             Universe_verify_oop_bits,               uintptr_t)                                    \
  65                                                                                                                                      \
  66   static_field(CompilerToVM::Data,             _supports_inline_contig_alloc,          bool)                                         \
  67   static_field(CompilerToVM::Data,             _heap_end_addr,                         HeapWord**)                                   \
  68   static_field(CompilerToVM::Data,             _heap_top_addr,                         HeapWord* volatile*)                          \
  69                                                                                                                                      \
  70   static_field(CompilerToVM::Data,             _max_oop_map_stack_offset,              int)                                          \
  71   static_field(CompilerToVM::Data,             _fields_annotations_base_offset,        int)                                          \
  72                                                                                                                                      \
<span class="line-modified">  73   static_field(CompilerToVM::Data,             cardtable_start_address,                CardTable::CardValue*)                        \</span>
  74   static_field(CompilerToVM::Data,             cardtable_shift,                        int)                                          \
  75                                                                                                                                      \
  76   static_field(CompilerToVM::Data,             vm_page_size,                           int)                                          \
  77                                                                                                                                      \
  78   static_field(CompilerToVM::Data,             sizeof_vtableEntry,                     int)                                          \
  79   static_field(CompilerToVM::Data,             sizeof_ExceptionTableElement,           int)                                          \
  80   static_field(CompilerToVM::Data,             sizeof_LocalVariableTableElement,       int)                                          \
  81   static_field(CompilerToVM::Data,             sizeof_ConstantPool,                    int)                                          \
  82   static_field(CompilerToVM::Data,             sizeof_narrowKlass,                     int)                                          \
  83   static_field(CompilerToVM::Data,             sizeof_arrayOopDesc,                    int)                                          \
  84   static_field(CompilerToVM::Data,             sizeof_BasicLock,                       int)                                          \
  85                                                                                                                                      \
  86   static_field(CompilerToVM::Data,             dsin,                                   address)                                      \
  87   static_field(CompilerToVM::Data,             dcos,                                   address)                                      \
  88   static_field(CompilerToVM::Data,             dtan,                                   address)                                      \
  89   static_field(CompilerToVM::Data,             dexp,                                   address)                                      \
  90   static_field(CompilerToVM::Data,             dlog,                                   address)                                      \
  91   static_field(CompilerToVM::Data,             dlog10,                                 address)                                      \
  92   static_field(CompilerToVM::Data,             dpow,                                   address)                                      \
  93                                                                                                                                      \
</pre>
<hr />
<pre>
 140   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                           intptr_t*)                                    \
 141   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                             address*)                                     \
 142   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                          intptr_t)                                     \
 143   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                           int)                                          \
 144                                                                                                                                      \
 145   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 146   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 147   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 148   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 149                                                                                                                                      \
 150   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
 151   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
 152   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*))                         \
 153   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
 154   static_field(JVMFlag,                        flags,                                         JVMFlag*)                              \
 155                                                                                                                                      \
 156   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 157   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 158   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 159   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
<span class="line-added"> 160   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \</span>
 161   nonstatic_field(InstanceKlass,               _misc_flags,                                   u4)                                    \
 162   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 163                                                                                                                                      \
 164   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 165   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 166                                                                                                                                      \
 167   nonstatic_field(JVMCICompileState,           _jvmti_can_hotswap_or_post_breakpoint,         jbyte)                                 \
 168   nonstatic_field(JVMCICompileState,           _jvmti_can_access_local_variables,             jbyte)                                 \
 169   nonstatic_field(JVMCICompileState,           _jvmti_can_post_on_exceptions,                 jbyte)                                 \
 170   nonstatic_field(JVMCICompileState,           _jvmti_can_pop_frame,                          jbyte)                                 \
 171                                                                                                                                      \
 172   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 173   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 174   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 175   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 176   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 177   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 178   volatile_nonstatic_field(JavaThread,         _doing_unsafe_access,                          bool)                                  \
 179   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 180   nonstatic_field(JavaThread,                  _pending_deoptimization,                       int)                                   \
 181   nonstatic_field(JavaThread,                  _pending_failed_speculation,                   jlong)                                 \
 182   nonstatic_field(JavaThread,                  _pending_transfer_to_interpreter,              bool)                                  \
 183   nonstatic_field(JavaThread,                  _jvmci_counters,                               jlong*)                                \
 184   nonstatic_field(JavaThread,                  _should_post_on_exceptions_flag,               int)                                   \
 185   nonstatic_field(JavaThread,                  _jni_environment,                              JNIEnv)                                \
 186   nonstatic_field(JavaThread,                  _reserved_stack_activation,                    address)                               \
 187                                                                                                                                      \
 188   static_field(java_lang_Class,                _klass_offset,                                 int)                                   \
 189   static_field(java_lang_Class,                _array_klass_offset,                           int)                                   \
 190                                                                                                                                      \
 191   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
 192                                                                                                                                      \
 193   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 194   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 195   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 196   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
<span class="line-modified"> 197   volatile_nonstatic_field(Klass,              _subklass,                                     Klass*)                                \</span>
 198   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 199   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 200   nonstatic_field(Klass,                       _prototype_header,                             markWord)                              \
<span class="line-modified"> 201   volatile_nonstatic_field(Klass,              _next_sibling,                                 Klass*)                                \</span>
 202   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 203   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 204   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 205   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 206                                                                                                                                      \
 207   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 208   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 209   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 210   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 211   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 212   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 213                                                                                                                                      \
 214   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 215   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 216   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 217   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 218   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 219   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 220   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 221   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
</pre>
<hr />
<pre>
 239   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 240   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 241   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 242   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 243   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 244   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 245   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 246   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 247   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 248   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 249   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 250   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 251   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 252   nonstatic_field(MethodData,                  _jvmci_ir_size,                                int)                                   \
 253                                                                                                                                      \
 254   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 255   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 256                                                                                                                                      \
 257   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 258                                                                                                                                      \
<span class="line-modified"> 259   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \</span>
<span class="line-modified"> 260   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intptr_t)                              \</span>
<span class="line-modified"> 261   volatile_nonstatic_field(ObjectMonitor,      _cxq,                                          ObjectWaiter*)                         \</span>
<span class="line-added"> 262   volatile_nonstatic_field(ObjectMonitor,      _EntryList,                                    ObjectWaiter*)                         \</span>
<span class="line-added"> 263   volatile_nonstatic_field(ObjectMonitor,      _succ,                                         Thread*)                               \</span>
 264                                                                                                                                      \
 265   volatile_nonstatic_field(oopDesc,            _mark,                                         markWord)                              \
 266   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 267                                                                                                                                      \
 268   static_field(os,                             _polling_page,                                 address)                               \
 269                                                                                                                                      \
 270   static_field(StubRoutines,                _verify_oop_count,                                jint)                                  \
 271                                                                                                                                      \
 272   static_field(StubRoutines,                _throw_delayed_StackOverflowError_entry,          address)                               \
 273                                                                                                                                      \
 274   static_field(StubRoutines,                _jbyte_arraycopy,                                 address)                               \
 275   static_field(StubRoutines,                _jshort_arraycopy,                                address)                               \
 276   static_field(StubRoutines,                _jint_arraycopy,                                  address)                               \
 277   static_field(StubRoutines,                _jlong_arraycopy,                                 address)                               \
 278   static_field(StubRoutines,                _oop_arraycopy,                                   address)                               \
 279   static_field(StubRoutines,                _oop_arraycopy_uninit,                            address)                               \
 280   static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                        address)                               \
 281   static_field(StubRoutines,                _jshort_disjoint_arraycopy,                       address)                               \
 282   static_field(StubRoutines,                _jint_disjoint_arraycopy,                         address)                               \
 283   static_field(StubRoutines,                _jlong_disjoint_arraycopy,                        address)                               \
</pre>
<hr />
<pre>
 314   static_field(StubRoutines,                _sha256_implCompress,                             address)                               \
 315   static_field(StubRoutines,                _sha256_implCompressMB,                           address)                               \
 316   static_field(StubRoutines,                _sha512_implCompress,                             address)                               \
 317   static_field(StubRoutines,                _sha512_implCompressMB,                           address)                               \
 318   static_field(StubRoutines,                _updateBytesCRC32,                                address)                               \
 319   static_field(StubRoutines,                _crc_table_adr,                                   address)                               \
 320   static_field(StubRoutines,                _crc32c_table_addr,                               address)                               \
 321   static_field(StubRoutines,                _updateBytesCRC32C,                               address)                               \
 322   static_field(StubRoutines,                _updateBytesAdler32,                              address)                               \
 323   static_field(StubRoutines,                _multiplyToLen,                                   address)                               \
 324   static_field(StubRoutines,                _squareToLen,                                     address)                               \
 325   static_field(StubRoutines,                _mulAdd,                                          address)                               \
 326   static_field(StubRoutines,                _montgomeryMultiply,                              address)                               \
 327   static_field(StubRoutines,                _montgomerySquare,                                address)                               \
 328   static_field(StubRoutines,                _vectorizedMismatch,                              address)                               \
 329   static_field(StubRoutines,                _bigIntegerRightShiftWorker,                      address)                               \
 330   static_field(StubRoutines,                _bigIntegerLeftShiftWorker,                       address)                               \
 331                                                                                                                                      \
 332   nonstatic_field(Thread,                   _tlab,                                            ThreadLocalAllocBuffer)                \
 333   nonstatic_field(Thread,                   _allocated_bytes,                                 jlong)                                 \
<span class="line-modified"> 334   nonstatic_field(Thread,                   _polling_page,                                    volatile void*)                        \</span>
 335                                                                                                                                      \
 336   nonstatic_field(ThreadLocalAllocBuffer,   _start,                                           HeapWord*)                             \
 337   nonstatic_field(ThreadLocalAllocBuffer,   _top,                                             HeapWord*)                             \
 338   nonstatic_field(ThreadLocalAllocBuffer,   _end,                                             HeapWord*)                             \
 339   nonstatic_field(ThreadLocalAllocBuffer,   _pf_top,                                          HeapWord*)                             \
 340   nonstatic_field(ThreadLocalAllocBuffer,   _desired_size,                                    size_t)                                \
 341   nonstatic_field(ThreadLocalAllocBuffer,   _refill_waste_limit,                              size_t)                                \
 342   nonstatic_field(ThreadLocalAllocBuffer,   _number_of_refills,                               unsigned)                              \
 343   nonstatic_field(ThreadLocalAllocBuffer,   _fast_refill_waste,                               unsigned)                              \
 344   nonstatic_field(ThreadLocalAllocBuffer,   _slow_allocations,                                unsigned)                              \
 345                                                                                                                                      \
 346   nonstatic_field(ThreadShadow,             _pending_exception,                               oop)                                   \
 347                                                                                                                                      \
 348   static_field(vmSymbols,                   _symbols[0],                                      Symbol*)                               \
 349                                                                                                                                      \
 350   nonstatic_field(vtableEntry,              _method,                                          Method*)                               \
 351 
 352 #define VM_TYPES(declare_type, declare_toplevel_type, declare_integer_type, declare_unsigned_integer_type) \
 353   declare_integer_type(bool)                                              \
 354   declare_unsigned_integer_type(size_t)                                   \
</pre>
<hr />
<pre>
 434   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
 435   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
 436   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
 437   declare_constant(JVM_CONSTANT_DynamicInError)                           \
 438   declare_constant(JVM_CONSTANT_InternalMax)                              \
 439                                                                           \
 440   declare_constant(ArrayData::array_len_off_set)                          \
 441   declare_constant(ArrayData::array_start_off_set)                        \
 442                                                                           \
 443   declare_constant(BitData::exception_seen_flag)                          \
 444   declare_constant(BitData::null_seen_flag)                               \
 445   declare_constant(BranchData::not_taken_off_set)                         \
 446                                                                           \
 447   declare_constant_with_value(&quot;CardTable::dirty_card&quot;, CardTable::dirty_card_val()) \
 448                                                                           \
 449   declare_constant(CodeInstaller::VERIFIED_ENTRY)                         \
 450   declare_constant(CodeInstaller::UNVERIFIED_ENTRY)                       \
 451   declare_constant(CodeInstaller::OSR_ENTRY)                              \
 452   declare_constant(CodeInstaller::EXCEPTION_HANDLER_ENTRY)                \
 453   declare_constant(CodeInstaller::DEOPT_HANDLER_ENTRY)                    \
<span class="line-added"> 454   declare_constant(CodeInstaller::FRAME_COMPLETE)                         \</span>
 455   declare_constant(CodeInstaller::INVOKEINTERFACE)                        \
 456   declare_constant(CodeInstaller::INVOKEVIRTUAL)                          \
 457   declare_constant(CodeInstaller::INVOKESTATIC)                           \
 458   declare_constant(CodeInstaller::INVOKESPECIAL)                          \
 459   declare_constant(CodeInstaller::INLINE_INVOKE)                          \
 460   declare_constant(CodeInstaller::POLL_NEAR)                              \
 461   declare_constant(CodeInstaller::POLL_RETURN_NEAR)                       \
 462   declare_constant(CodeInstaller::POLL_FAR)                               \
 463   declare_constant(CodeInstaller::POLL_RETURN_FAR)                        \
 464   declare_constant(CodeInstaller::CARD_TABLE_SHIFT)                       \
 465   declare_constant(CodeInstaller::CARD_TABLE_ADDRESS)                     \
 466   declare_constant(CodeInstaller::HEAP_TOP_ADDRESS)                       \
 467   declare_constant(CodeInstaller::HEAP_END_ADDRESS)                       \
 468   declare_constant(CodeInstaller::NARROW_KLASS_BASE_ADDRESS)              \
 469   declare_constant(CodeInstaller::NARROW_OOP_BASE_ADDRESS)                \
 470   declare_constant(CodeInstaller::CRC_TABLE_ADDRESS)                      \
 471   declare_constant(CodeInstaller::LOG_OF_HEAP_REGION_GRAIN_BYTES)         \
 472   declare_constant(CodeInstaller::INLINE_CONTIGUOUS_ALLOCATION_SUPPORTED) \
 473   declare_constant(CodeInstaller::INVOKE_INVALID)                         \
 474                                                                           \
</pre>
<hr />
<pre>
 595                                                                           \
 596   declare_constant(ReceiverTypeData::nonprofiled_count_off_set)           \
 597   declare_constant(ReceiverTypeData::receiver_type_row_cell_count)        \
 598   declare_constant(ReceiverTypeData::receiver0_offset)                    \
 599   declare_constant(ReceiverTypeData::count0_offset)                       \
 600                                                                           \
 601   declare_constant(vmIntrinsics::_invokeBasic)                            \
 602   declare_constant(vmIntrinsics::_linkToVirtual)                          \
 603   declare_constant(vmIntrinsics::_linkToStatic)                           \
 604   declare_constant(vmIntrinsics::_linkToSpecial)                          \
 605   declare_constant(vmIntrinsics::_linkToInterface)                        \
 606                                                                           \
 607   declare_constant(vmSymbols::FIRST_SID)                                  \
 608   declare_constant(vmSymbols::SID_LIMIT)                                  \
 609 
 610 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant) \
 611   declare_constant(InvocationCounter::count_increment)                    \
 612   declare_constant(InvocationCounter::count_shift)                        \
 613                                                                           \
 614   declare_constant(markWord::hash_shift)                                  \
<span class="line-added"> 615   declare_constant(markWord::monitor_value)                               \</span>
 616                                                                           \
 617   declare_constant(markWord::biased_lock_mask_in_place)                   \
 618   declare_constant(markWord::age_mask_in_place)                           \
 619   declare_constant(markWord::epoch_mask_in_place)                         \
 620   declare_constant(markWord::hash_mask)                                   \
 621   declare_constant(markWord::hash_mask_in_place)                          \
 622                                                                           \
 623   declare_constant(markWord::unlocked_value)                              \
 624   declare_constant(markWord::biased_lock_pattern)                         \
 625                                                                           \
 626   declare_constant(markWord::no_hash_in_place)                            \
 627   declare_constant(markWord::no_lock_in_place)                            \
 628 
 629 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
 630   declare_function(SharedRuntime::register_finalizer)                     \
 631   declare_function(SharedRuntime::exception_handler_for_return_address)   \
 632   declare_function(SharedRuntime::OSR_migration_end)                      \
 633   declare_function(SharedRuntime::enable_stack_reserved_zone)             \
 634   declare_function(SharedRuntime::frem)                                   \
 635   declare_function(SharedRuntime::drem)                                   \
</pre>
<hr />
<pre>
 717 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 718   declare_constant(VM_Version::CPU_FP)                  \
 719   declare_constant(VM_Version::CPU_ASIMD)               \
 720   declare_constant(VM_Version::CPU_EVTSTRM)             \
 721   declare_constant(VM_Version::CPU_AES)                 \
 722   declare_constant(VM_Version::CPU_PMULL)               \
 723   declare_constant(VM_Version::CPU_SHA1)                \
 724   declare_constant(VM_Version::CPU_SHA2)                \
 725   declare_constant(VM_Version::CPU_CRC32)               \
 726   declare_constant(VM_Version::CPU_LSE)                 \
 727   declare_constant(VM_Version::CPU_STXR_PREFETCH)       \
 728   declare_constant(VM_Version::CPU_A53MAC)              \
 729   declare_constant(VM_Version::CPU_DMB_ATOMICS)
 730 
 731 #endif
 732 
 733 
 734 #ifdef X86
 735 
 736 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
<span class="line-modified"> 737   volatile_nonstatic_field(JavaFrameAnchor, _last_Java_fp, intptr_t*) \</span>
<span class="line-added"> 738   static_field(VM_Version, _has_intel_jcc_erratum, bool)</span>
 739 
 740 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 741   LP64_ONLY(declare_constant(frame::arg_reg_save_area_bytes))       \
 742   declare_constant(frame::interpreter_frame_sender_sp_offset)       \
 743   declare_constant(frame::interpreter_frame_last_sp_offset)         \
 744   declare_constant(VM_Version::CPU_CX8)                             \
 745   declare_constant(VM_Version::CPU_CMOV)                            \
 746   declare_constant(VM_Version::CPU_FXSR)                            \
 747   declare_constant(VM_Version::CPU_HT)                              \
 748   declare_constant(VM_Version::CPU_MMX)                             \
 749   declare_constant(VM_Version::CPU_3DNOW_PREFETCH)                  \
 750   declare_constant(VM_Version::CPU_SSE)                             \
 751   declare_constant(VM_Version::CPU_SSE2)                            \
 752   declare_constant(VM_Version::CPU_SSE3)                            \
 753   declare_constant(VM_Version::CPU_SSSE3)                           \
 754   declare_constant(VM_Version::CPU_SSE4A)                           \
 755   declare_constant(VM_Version::CPU_SSE4_1)                          \
 756   declare_constant(VM_Version::CPU_SSE4_2)                          \
 757   declare_constant(VM_Version::CPU_POPCNT)                          \
 758   declare_constant(VM_Version::CPU_LZCNT)                           \
</pre>
<hr />
<pre>
 761   declare_constant(VM_Version::CPU_AVX)                             \
 762   declare_constant(VM_Version::CPU_AVX2)                            \
 763   declare_constant(VM_Version::CPU_AES)                             \
 764   declare_constant(VM_Version::CPU_ERMS)                            \
 765   declare_constant(VM_Version::CPU_CLMUL)                           \
 766   declare_constant(VM_Version::CPU_BMI1)                            \
 767   declare_constant(VM_Version::CPU_BMI2)                            \
 768   declare_constant(VM_Version::CPU_RTM)                             \
 769   declare_constant(VM_Version::CPU_ADX)                             \
 770   declare_constant(VM_Version::CPU_AVX512F)                         \
 771   declare_constant(VM_Version::CPU_AVX512DQ)                        \
 772   declare_constant(VM_Version::CPU_AVX512PF)                        \
 773   declare_constant(VM_Version::CPU_AVX512ER)                        \
 774   declare_constant(VM_Version::CPU_AVX512CD)
 775 
 776 #define VM_LONG_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 777   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512BW&quot;, CPU_AVX512BW) \
 778   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512VL&quot;, CPU_AVX512VL) \
 779   declare_preprocessor_constant(&quot;VM_Version::CPU_SHA&quot;, CPU_SHA)           \
 780   declare_preprocessor_constant(&quot;VM_Version::CPU_FMA&quot;, CPU_FMA)           \
<span class="line-modified"> 781   declare_preprocessor_constant(&quot;VM_Version::CPU_VZEROUPPER&quot;, CPU_VZEROUPPER) \</span>
<span class="line-added"> 782   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512_VPOPCNTDQ&quot;, CPU_AVX512_VPOPCNTDQ) \</span>
<span class="line-added"> 783   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512_VPCLMULQDQ&quot;, CPU_AVX512_VPCLMULQDQ) \</span>
<span class="line-added"> 784   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512_VAES&quot;, CPU_AVX512_VAES) \</span>
<span class="line-added"> 785   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512_VNNI&quot;, CPU_AVX512_VNNI) \</span>
<span class="line-added"> 786   declare_preprocessor_constant(&quot;VM_Version::CPU_FLUSH&quot;, CPU_FLUSH) \</span>
<span class="line-added"> 787   declare_preprocessor_constant(&quot;VM_Version::CPU_FLUSHOPT&quot;, CPU_FLUSHOPT) \</span>
<span class="line-added"> 788   declare_preprocessor_constant(&quot;VM_Version::CPU_CLWB&quot;, CPU_CLWB) \</span>
<span class="line-added"> 789   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512_VBMI2&quot;, CPU_AVX512_VBMI2) \</span>
<span class="line-added"> 790   declare_preprocessor_constant(&quot;VM_Version::CPU_AVX512_VBMI&quot;, CPU_AVX512_VBMI)</span>
 791 
 792 #endif
 793 
 794 
 795 #ifdef SPARC
 796 
 797 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field) \
 798   volatile_nonstatic_field(JavaFrameAnchor, _flags, int)
 799 
 800 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
 801   declare_constant(VM_Version::ISA_V9)                  \
 802   declare_constant(VM_Version::ISA_POPC)                \
 803   declare_constant(VM_Version::ISA_VIS1)                \
 804   declare_constant(VM_Version::ISA_VIS2)                \
 805   declare_constant(VM_Version::ISA_BLK_INIT)            \
 806   declare_constant(VM_Version::ISA_FMAF)                \
 807   declare_constant(VM_Version::ISA_VIS3)                \
 808   declare_constant(VM_Version::ISA_HPC)                 \
 809   declare_constant(VM_Version::ISA_IMA)                 \
 810   declare_constant(VM_Version::ISA_AES)                 \
</pre>
<hr />
<pre>
 836   declare_constant(VM_Version::ISA_VIS3C)               \
 837   declare_constant(VM_Version::ISA_SPARC5B)             \
 838   declare_constant(VM_Version::ISA_MME)                 \
 839   declare_constant(VM_Version::CPU_FAST_IDIV)           \
 840   declare_constant(VM_Version::CPU_FAST_RDPC)           \
 841   declare_constant(VM_Version::CPU_FAST_BIS)            \
 842   declare_constant(VM_Version::CPU_FAST_LD)             \
 843   declare_constant(VM_Version::CPU_FAST_CMOVE)          \
 844   declare_constant(VM_Version::CPU_FAST_IND_BR)         \
 845   declare_constant(VM_Version::CPU_BLK_ZEROING)
 846 #endif
 847 
 848 
 849 /*
 850  * Dummy defines for architectures that don&#39;t use these.
 851  */
 852 #ifndef VM_STRUCTS_CPU
 853 #define VM_STRUCTS_CPU(nonstatic_field, static_field, unchecked_nonstatic_field, volatile_nonstatic_field, nonproduct_nonstatic_field, c2_nonstatic_field, unchecked_c1_static_field, unchecked_c2_static_field)
 854 #endif
 855 




 856 #ifndef VM_INT_CONSTANTS_CPU
 857 #define VM_INT_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 858 #endif
 859 
 860 #ifndef VM_LONG_CONSTANTS_CPU
 861 #define VM_LONG_CONSTANTS_CPU(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant)
 862 #endif
 863 
















 864 #ifndef VM_ADDRESSES_OS
 865 #define VM_ADDRESSES_OS(declare_address, declare_preprocessor_address, declare_function)
 866 #endif
 867 
 868 
 869 //
 870 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
 871 //
 872 
 873 // These initializers are allowed to access private fields in classes
 874 // as long as class VMStructs is a friend
 875 VMStructEntry JVMCIVMStructs::localHotSpotVMStructs[] = {
 876   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 877              GENERATE_STATIC_VM_STRUCT_ENTRY,
 878              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 879              GENERATE_NONSTATIC_VM_STRUCT_ENTRY)
 880 









 881   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 882                  GENERATE_STATIC_VM_STRUCT_ENTRY,
 883                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
 884                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 885                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
 886                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
 887                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
 888                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
 889 
 890 #if INCLUDE_G1GC
 891   VM_STRUCTS_JVMCI_G1GC(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
 892                         GENERATE_STATIC_VM_STRUCT_ENTRY)
 893 #endif
 894 
 895   GENERATE_VM_STRUCT_LAST_ENTRY()
 896 };
 897 
 898 VMTypeEntry JVMCIVMStructs::localHotSpotVMTypes[] = {
 899   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
 900            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
 901            GENERATE_INTEGER_VM_TYPE_ENTRY,
 902            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY)
 903 


















 904   GENERATE_VM_TYPE_LAST_ENTRY()
 905 };
 906 
 907 VMIntConstantEntry JVMCIVMStructs::localHotSpotVMIntConstants[] = {
 908   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
 909                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
 910                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 911 






 912   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
 913                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
 914                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
 915                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
 916                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 917 
 918 #if INCLUDE_G1GC
 919   VM_INT_CONSTANTS_JVMCI_G1GC(GENERATE_VM_INT_CONSTANT_ENTRY,
 920                               GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
 921                               GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
 922 #endif
 923 
 924   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
 925 };
 926 
 927 VMLongConstantEntry JVMCIVMStructs::localHotSpotVMLongConstants[] = {
 928   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
 929                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 930 






 931   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
 932                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
 933                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
 934                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
 935                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
 936 
 937   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
 938 };
 939 
 940 VMAddressEntry JVMCIVMStructs::localHotSpotVMAddresses[] = {
 941   VM_ADDRESSES(GENERATE_VM_ADDRESS_ENTRY,
 942                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 943                GENERATE_VM_FUNCTION_ENTRY)
 944   VM_ADDRESSES_COMPILER_RUNTIME(GENERATE_VM_ADDRESS_ENTRY,
 945                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 946                GENERATE_VM_FUNCTION_ENTRY)
 947   VM_ADDRESSES_OS(GENERATE_VM_ADDRESS_ENTRY,
 948                   GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
 949                   GENERATE_VM_FUNCTION_ENTRY)
 950 
</pre>
<hr />
<pre>
 962 int JVMCIVMStructs::localHotSpotVMIntConstants_count() {
 963   // Ignore sentinel entry at the end
 964   return (sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry)) - 1;
 965 }
 966 int JVMCIVMStructs::localHotSpotVMLongConstants_count() {
 967   // Ignore sentinel entry at the end
 968   return (sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry)) - 1;
 969 }
 970 int JVMCIVMStructs::localHotSpotVMAddresses_count() {
 971   // Ignore sentinel entry at the end
 972   return (sizeof(localHotSpotVMAddresses) / sizeof(VMAddressEntry)) - 1;
 973 }
 974 
 975 extern &quot;C&quot; {
 976 JNIEXPORT VMStructEntry* jvmciHotSpotVMStructs = JVMCIVMStructs::localHotSpotVMStructs;
 977 JNIEXPORT VMTypeEntry* jvmciHotSpotVMTypes = JVMCIVMStructs::localHotSpotVMTypes;
 978 JNIEXPORT VMIntConstantEntry* jvmciHotSpotVMIntConstants = JVMCIVMStructs::localHotSpotVMIntConstants;
 979 JNIEXPORT VMLongConstantEntry* jvmciHotSpotVMLongConstants = JVMCIVMStructs::localHotSpotVMLongConstants;
 980 JNIEXPORT VMAddressEntry* jvmciHotSpotVMAddresses = JVMCIVMStructs::localHotSpotVMAddresses;
 981 }
<span class="line-added"> 982 </span>
<span class="line-added"> 983 #ifdef ASSERT</span>
<span class="line-added"> 984 // This is used both to check the types of referenced fields and</span>
<span class="line-added"> 985 // to ensure that all of the field types are present.</span>
<span class="line-added"> 986 void JVMCIVMStructs::init() {</span>
<span class="line-added"> 987   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 988              CHECK_STATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 989              CHECK_NO_OP,</span>
<span class="line-added"> 990              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY);</span>
<span class="line-added"> 991 </span>
<span class="line-added"> 992 </span>
<span class="line-added"> 993   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 994                  CHECK_STATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 995                  CHECK_NO_OP,</span>
<span class="line-added"> 996                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 997                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 998                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added"> 999                  CHECK_NO_OP,</span>
<span class="line-added">1000                  CHECK_NO_OP);</span>
<span class="line-added">1001 </span>
<span class="line-added">1002 #if INCLUDE_G1GC</span>
<span class="line-added">1003   VM_STRUCTS_JVMCI_G1GC(CHECK_NONSTATIC_VM_STRUCT_ENTRY,</span>
<span class="line-added">1004                         CHECK_STATIC_VM_STRUCT_ENTRY)</span>
<span class="line-added">1005 #endif</span>
<span class="line-added">1006 </span>
<span class="line-added">1007   VM_TYPES(CHECK_VM_TYPE_ENTRY,</span>
<span class="line-added">1008            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,</span>
<span class="line-added">1009            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,</span>
<span class="line-added">1010            CHECK_SINGLE_ARG_VM_TYPE_NO_OP);</span>
<span class="line-added">1011 }</span>
<span class="line-added">1012 </span>
<span class="line-added">1013 void jvmci_vmStructs_init() {</span>
<span class="line-added">1014   JVMCIVMStructs::init();</span>
<span class="line-added">1015 }</span>
<span class="line-added">1016 #endif // ASSERT</span>
<span class="line-added">1017 </span>
</pre>
</td>
</tr>
</table>
<center><a href="jvmci_globals.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="vmStructs_jvmci.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>