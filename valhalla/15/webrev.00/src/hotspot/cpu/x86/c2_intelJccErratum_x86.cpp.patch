diff a/src/hotspot/cpu/x86/c2_intelJccErratum_x86.cpp b/src/hotspot/cpu/x86/c2_intelJccErratum_x86.cpp
--- a/src/hotspot/cpu/x86/c2_intelJccErratum_x86.cpp
+++ b/src/hotspot/cpu/x86/c2_intelJccErratum_x86.cpp
@@ -27,10 +27,11 @@
 #include "c2_intelJccErratum_x86.hpp"
 #include "opto/cfgnode.hpp"
 #include "opto/compile.hpp"
 #include "opto/machnode.hpp"
 #include "opto/node.hpp"
+#include "opto/output.hpp"
 #include "opto/regalloc.hpp"
 #include "utilities/align.hpp"
 #include "utilities/debug.hpp"
 
 // Compute which 32 byte boundary an address corresponds to
@@ -124,11 +125,11 @@
     _start_pc(pc()) {
   if (!VM_Version::has_intel_jcc_erratum()) {
     return;
   }
 
-  if (Compile::current()->in_scratch_emit_size()) {
+  if (Compile::current()->output()->in_scratch_emit_size()) {
     // When we measure the size of this 32 byte alignment, we apply a conservative guess.
     __ nop(jcc_size);
   } else if (IntelJccErratum::is_crossing_or_ending_at_32_byte_boundary(_start_pc, _start_pc + jcc_size)) {
     // The affected branch might get slowed down by micro code mitigations
     // as it could be susceptible to the erratum. Place nops until the next
@@ -139,11 +140,11 @@
   }
 }
 
 IntelJccErratumAlignment::~IntelJccErratumAlignment() {
   if (!VM_Version::has_intel_jcc_erratum() ||
-      Compile::current()->in_scratch_emit_size()) {
+      Compile::current()->output()->in_scratch_emit_size()) {
     return;
   }
 
   assert(!IntelJccErratum::is_crossing_or_ending_at_32_byte_boundary(_start_pc, pc()), "Invalid jcc_size estimate");
 }
