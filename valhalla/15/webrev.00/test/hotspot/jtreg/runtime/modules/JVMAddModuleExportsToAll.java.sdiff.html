<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/runtime/modules/JVMAddModuleExportsToAll.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="AccessCheckAllUnnamed.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../serviceability/dcmd/gc/ClassHistogramTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/modules/JVMAddModuleExportsToAll.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 69             ModuleHelper.AddModuleExportsToAll((Module)null, &quot;p2&quot;);
 70             throw new RuntimeException(&quot;Failed to get the expected NPE for null module&quot;);
 71         } catch(NullPointerException e) {
 72             // Expected
 73         }
 74 
 75         try {
 76             ModuleHelper.AddModuleExportsToAll(m2x, null);
 77             throw new RuntimeException(&quot;Failed to get the expected NPE for null package&quot;);
 78         } catch(NullPointerException e) {
 79             // Expected
 80         }
 81 
 82         try { // Expect IAE when passing a ClassLoader object instead of a java.lang.Module object.
 83             ModuleHelper.AddModuleExportsToAll(this_cldr, &quot;p2&quot;);
 84             throw new RuntimeException(&quot;Failed to get the expected IAE for bad module&quot;);
 85         } catch(IllegalArgumentException e) {
 86             // Expected
 87         }
 88 
<span class="line-removed"> 89         try {</span>
<span class="line-removed"> 90             ModuleHelper.AddModuleExportsToAll(m2x, &quot;p3&quot;);</span>
<span class="line-removed"> 91             throw new RuntimeException(&quot;Failed to get the expected IAE for package that is in another module&quot;);</span>
<span class="line-removed"> 92         } catch(IllegalArgumentException e) {</span>
<span class="line-removed"> 93             // Expected</span>
<span class="line-removed"> 94         }</span>
<span class="line-removed"> 95 </span>
 96         try {
 97             ModuleHelper.AddModuleExportsToAll(m2x, &quot;p4&quot;);
 98             throw new RuntimeException(&quot;Failed to get the expected IAE for package not in any module&quot;);
 99         } catch(IllegalArgumentException e) {
100             // Expected
101         }
102 
103         // Export package p2 in m2x unqualifiedly. Then, do a qualified export
104         // of p2 in m2x to m3x.  This should not affect the unqualified export.
105         m3x = ModuleHelper.ModuleObject(&quot;module_three&quot;, this_cldr, new String[] { &quot;p4&quot; });
106         assertNotNull(m3x, &quot;Module m3x should not be null&quot;);
107         ModuleHelper.DefineModule(m3x, false, &quot;9.0&quot;, &quot;m3x/there&quot;, new String[] { &quot;p4&quot; });
108         ModuleHelper.AddModuleExportsToAll(m2x, &quot;p2&quot;);
109         ModuleHelper.AddModuleExports(m2x, &quot;p2&quot;, m3x);
110 
111         // p1.c1&#39;s ctor tries to call a method in p2.c2.  This should succeed because
112         // p1 is in an unnamed module and p2.c2 is exported unqualifiedly.
113         Class p1_c1_class = Class.forName(&quot;p1.c1&quot;);
114         try {
115             Object c1_obj = p1_c1_class.newInstance();
</pre>
</td>
<td>
<hr />
<pre>
 69             ModuleHelper.AddModuleExportsToAll((Module)null, &quot;p2&quot;);
 70             throw new RuntimeException(&quot;Failed to get the expected NPE for null module&quot;);
 71         } catch(NullPointerException e) {
 72             // Expected
 73         }
 74 
 75         try {
 76             ModuleHelper.AddModuleExportsToAll(m2x, null);
 77             throw new RuntimeException(&quot;Failed to get the expected NPE for null package&quot;);
 78         } catch(NullPointerException e) {
 79             // Expected
 80         }
 81 
 82         try { // Expect IAE when passing a ClassLoader object instead of a java.lang.Module object.
 83             ModuleHelper.AddModuleExportsToAll(this_cldr, &quot;p2&quot;);
 84             throw new RuntimeException(&quot;Failed to get the expected IAE for bad module&quot;);
 85         } catch(IllegalArgumentException e) {
 86             // Expected
 87         }
 88 







 89         try {
 90             ModuleHelper.AddModuleExportsToAll(m2x, &quot;p4&quot;);
 91             throw new RuntimeException(&quot;Failed to get the expected IAE for package not in any module&quot;);
 92         } catch(IllegalArgumentException e) {
 93             // Expected
 94         }
 95 
 96         // Export package p2 in m2x unqualifiedly. Then, do a qualified export
 97         // of p2 in m2x to m3x.  This should not affect the unqualified export.
 98         m3x = ModuleHelper.ModuleObject(&quot;module_three&quot;, this_cldr, new String[] { &quot;p4&quot; });
 99         assertNotNull(m3x, &quot;Module m3x should not be null&quot;);
100         ModuleHelper.DefineModule(m3x, false, &quot;9.0&quot;, &quot;m3x/there&quot;, new String[] { &quot;p4&quot; });
101         ModuleHelper.AddModuleExportsToAll(m2x, &quot;p2&quot;);
102         ModuleHelper.AddModuleExports(m2x, &quot;p2&quot;, m3x);
103 
104         // p1.c1&#39;s ctor tries to call a method in p2.c2.  This should succeed because
105         // p1 is in an unnamed module and p2.c2 is exported unqualifiedly.
106         Class p1_c1_class = Class.forName(&quot;p1.c1&quot;);
107         try {
108             Object c1_obj = p1_c1_class.newInstance();
</pre>
</td>
</tr>
</table>
<center><a href="AccessCheckAllUnnamed.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../../serviceability/dcmd/gc/ClassHistogramTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>