<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/runtime/modules/AccessCheckAllUnnamed.java</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../logging/loadLibraryTest/libLoadLibraryClass.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="JVMAddModuleExportsToAll.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/runtime/modules/AccessCheckAllUnnamed.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 69             ModuleHelper.AddModuleExportsToAllUnnamed((Module)null, &quot;p2&quot;);
 70             throw new RuntimeException(&quot;Failed to get the expected NPE for null module&quot;);
 71         } catch(NullPointerException e) {
 72             // Expected
 73         }
 74 
 75         try {
 76             ModuleHelper.AddModuleExportsToAllUnnamed(m2x, null);
 77             throw new RuntimeException(&quot;Failed to get the expected NPE for null package&quot;);
 78         } catch(NullPointerException e) {
 79             // Expected
 80         }
 81 
 82         try {
 83             ModuleHelper.AddModuleExportsToAllUnnamed(this_cldr, &quot;p2&quot;);
 84             throw new RuntimeException(&quot;Failed to get the expected IAE for bad module&quot;);
 85         } catch(IllegalArgumentException e) {
 86             // Expected
 87         }
 88 
<span class="line-removed"> 89         try {</span>
<span class="line-removed"> 90             ModuleHelper.AddModuleExportsToAllUnnamed(m2x, &quot;p3&quot;);</span>
<span class="line-removed"> 91             throw new RuntimeException(&quot;Failed to get the expected IAE for package in other module&quot;);</span>
<span class="line-removed"> 92         } catch(IllegalArgumentException e) {</span>
<span class="line-removed"> 93             // Expected</span>
<span class="line-removed"> 94         }</span>
<span class="line-removed"> 95 </span>
 96         try {
 97             ModuleHelper.AddModuleExportsToAllUnnamed(m2x, &quot;p4&quot;);
 98             throw new RuntimeException(&quot;Failed to get the expected IAE for package not in module&quot;);
 99         } catch(IllegalArgumentException e) {
100             // Expected
101         }
102 
103         // Export package p2 in m2x to allUnnamed.
104         ModuleHelper.AddModuleExportsToAllUnnamed(m2x, &quot;p2&quot;);
105 
106         // p1.c1&#39;s ctor tries to call a method in p2.c2.  This should succeed because
107         // p1 is in an unnamed module and p2.c2 is exported to all unnamed modules.
108         Class p1_c1_class = Class.forName(&quot;p1.c1&quot;);
109         try {
110             Object c1_obj = p1_c1_class.newInstance();
111         } catch (IllegalAccessError f) {
112             throw new RuntimeException(
113                 &quot;Class in unnamed module could not access package p2 exported to all unnamed modules&quot;);
114         }
115     }
</pre>
</td>
<td>
<hr />
<pre>
 69             ModuleHelper.AddModuleExportsToAllUnnamed((Module)null, &quot;p2&quot;);
 70             throw new RuntimeException(&quot;Failed to get the expected NPE for null module&quot;);
 71         } catch(NullPointerException e) {
 72             // Expected
 73         }
 74 
 75         try {
 76             ModuleHelper.AddModuleExportsToAllUnnamed(m2x, null);
 77             throw new RuntimeException(&quot;Failed to get the expected NPE for null package&quot;);
 78         } catch(NullPointerException e) {
 79             // Expected
 80         }
 81 
 82         try {
 83             ModuleHelper.AddModuleExportsToAllUnnamed(this_cldr, &quot;p2&quot;);
 84             throw new RuntimeException(&quot;Failed to get the expected IAE for bad module&quot;);
 85         } catch(IllegalArgumentException e) {
 86             // Expected
 87         }
 88 







 89         try {
 90             ModuleHelper.AddModuleExportsToAllUnnamed(m2x, &quot;p4&quot;);
 91             throw new RuntimeException(&quot;Failed to get the expected IAE for package not in module&quot;);
 92         } catch(IllegalArgumentException e) {
 93             // Expected
 94         }
 95 
 96         // Export package p2 in m2x to allUnnamed.
 97         ModuleHelper.AddModuleExportsToAllUnnamed(m2x, &quot;p2&quot;);
 98 
 99         // p1.c1&#39;s ctor tries to call a method in p2.c2.  This should succeed because
100         // p1 is in an unnamed module and p2.c2 is exported to all unnamed modules.
101         Class p1_c1_class = Class.forName(&quot;p1.c1&quot;);
102         try {
103             Object c1_obj = p1_c1_class.newInstance();
104         } catch (IllegalAccessError f) {
105             throw new RuntimeException(
106                 &quot;Class in unnamed module could not access package p2 exported to all unnamed modules&quot;);
107         }
108     }
</pre>
</td>
</tr>
</table>
<center><a href="../logging/loadLibraryTest/libLoadLibraryClass.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="JVMAddModuleExportsToAll.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>