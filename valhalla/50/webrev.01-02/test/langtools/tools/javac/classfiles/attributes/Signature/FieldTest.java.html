<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/langtools/tools/javac/classfiles/attributes/Signature/FieldTest.java</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
  <body>
    <pre>
  1 /*
  2  * Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  */
 23 
 24 /*
 25  * @test
 26  * @bug 8049238
 27  * @summary Checks Signature attribute for fields.
 28  * @library /tools/lib /tools/javac/lib ../lib
 29  * @modules jdk.compiler/com.sun.tools.javac.api
 30  *          jdk.compiler/com.sun.tools.javac.main
 31  *          jdk.jdeps/com.sun.tools.classfile
 32  * @build toolbox.ToolBox InMemoryFileManager TestResult TestBase
 33  * @build FieldTest Driver ExpectedSignature ExpectedSignatureContainer
 34  * @run main Driver FieldTest
 35  */
 36 
 37 import java.util.Comparator;
 38 import java.util.List;
 39 import java.util.Map;
 40 
 41 @ExpectedSignature(descriptor = &quot;FieldTest&quot;, signature = &quot;&lt;T:Ljava/lang/Object;&gt;Ljava/lang/Object;&quot;)
 42 public class FieldTest&lt;T&gt; {
 43 
 44     @ExpectedSignature(descriptor = &quot;typeInList&quot;, signature = &quot;Ljava/util/List&lt;TT;&gt;;&quot;)
 45     List&lt;T&gt; typeInList;
 46 
 47     @ExpectedSignature(descriptor = &quot;boundsType&quot;, signature = &quot;Ljava/util/List&lt;Ljava/util/Map&lt;+TT;-TT;&gt;;&gt;;&quot;)
 48     List&lt;Map&lt;? extends T, ? super T&gt;&gt; boundsType;
 49 
 50     @ExpectedSignature(descriptor = &quot;type&quot;, signature = &quot;TT;&quot;)
 51     T type;
 52 
 53     @ExpectedSignature(descriptor = &quot;typeInArray&quot;, signature = &quot;[TT;&quot;)
 54     T[] typeInArray;
 55 
 56     @ExpectedSignature(descriptor = &quot;byteArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[B&gt;;&quot;)
 57     List&lt;byte[]&gt; byteArrayInList;
 58 
 59     @ExpectedSignature(descriptor = &quot;shortArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[S&gt;;&quot;)
 60     List&lt;short[]&gt; shortArrayInList;
 61 
 62     @ExpectedSignature(descriptor = &quot;intArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[I&gt;;&quot;)
 63     List&lt;int[]&gt; intArrayInList;
 64 
 65     @ExpectedSignature(descriptor = &quot;longArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[J&gt;;&quot;)
 66     List&lt;long[]&gt; longArrayInList;
 67 
 68     @ExpectedSignature(descriptor = &quot;charArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[C&gt;;&quot;)
 69     List&lt;char[]&gt; charArrayInList;
 70 
 71     @ExpectedSignature(descriptor = &quot;booleanArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[Z&gt;;&quot;)
 72     List&lt;boolean[]&gt; booleanArrayInList;
 73 
 74     @ExpectedSignature(descriptor = &quot;floatArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[F&gt;;&quot;)
 75     List&lt;float[]&gt; floatArrayInList;
 76 
 77     @ExpectedSignature(descriptor = &quot;doubleArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[D&gt;;&quot;)
 78     List&lt;double[]&gt; doubleArrayInList;
 79 
 80     @ExpectedSignature(descriptor = &quot;integerInList&quot;, signature = &quot;Ljava/util/List&lt;Ljava/lang/Integer;&gt;;&quot;)
 81     List&lt;Integer&gt; integerInList;
 82 
 83     @ExpectedSignature(descriptor = &quot;typeInMultiArray&quot;, signature = &quot;[[TT;&quot;)
 84     T[][] typeInMultiArray;
 85 
 86     @ExpectedSignature(descriptor = &quot;arrayOfClasses&quot;, signature = &quot;[Ljava/util/List&lt;TT;&gt;;&quot;)
 87     List&lt;T&gt;[] arrayOfClasses;
 88 
 89     @ExpectedSignature(descriptor = &quot;extendsWildCard&quot;, signature = &quot;Ljava/util/List&lt;+TT;&gt;;&quot;)
 90     List&lt;? extends T&gt; extendsWildCard;
 91 
 92     @ExpectedSignature(descriptor = &quot;superWildCard&quot;, signature = &quot;Ljava/util/Comparator&lt;-TT;&gt;;&quot;)
 93     Comparator&lt;? super T&gt; superWildCard;
 94 
 95     @ExpectedSignature(descriptor = &quot;extendsSuperWildCard&quot;,
 96             signature = &quot;Ljava/util/List&lt;+Ljava/util/Comparator&lt;-TT;&gt;;&gt;;&quot;)
 97     List&lt;? extends Comparator&lt;? super T&gt;&gt; extendsSuperWildCard;
 98 
 99     @ExpectedSignature(descriptor = &quot;wildCard&quot;, signature = &quot;Ljava/util/Comparator&lt;*&gt;;&quot;)
100     Comparator&lt;?&gt; wildCard;
101 
102     @ExpectedSignature(descriptor = &quot;boundsBooleanArray&quot;, signature = &quot;Ljava/util/Map&lt;+[Z-[Z&gt;;&quot;)
103     Map&lt;? extends boolean[], ? super boolean[]&gt; boundsBooleanArray;
104 
105     @ExpectedSignature(descriptor = &quot;boundsByteArray&quot;, signature = &quot;Ljava/util/Map&lt;+[B-[B&gt;;&quot;)
106     Map&lt;? extends byte[], ? super byte[]&gt; boundsByteArray;
107 
108     @ExpectedSignature(descriptor = &quot;boundsShortArray&quot;, signature = &quot;Ljava/util/Map&lt;+[S-[S&gt;;&quot;)
109     Map&lt;? extends short[], ? super short[]&gt; boundsShortArray;
110 
111     @ExpectedSignature(descriptor = &quot;boundsIntArray&quot;, signature = &quot;Ljava/util/Map&lt;+[I-[I&gt;;&quot;)
112     Map&lt;? extends int[], ? super int[]&gt; boundsIntArray;
113 
114     @ExpectedSignature(descriptor = &quot;boundsLongArray&quot;, signature = &quot;Ljava/util/Map&lt;+[J-[J&gt;;&quot;)
115     Map&lt;? extends long[], ? super long[]&gt; boundsLongArray;
116 
117     @ExpectedSignature(descriptor = &quot;boundsCharArray&quot;, signature = &quot;Ljava/util/Map&lt;+[C-[C&gt;;&quot;)
118     Map&lt;? extends char[], ? super char[]&gt; boundsCharArray;
119 
120     @ExpectedSignature(descriptor = &quot;boundsFloatArray&quot;, signature = &quot;Ljava/util/Map&lt;+[F-[F&gt;;&quot;)
121     Map&lt;? extends float[], ? super float[]&gt; boundsFloatArray;
122 
123     @ExpectedSignature(descriptor = &quot;boundsDoubleArray&quot;, signature = &quot;Ljava/util/Map&lt;+[D-[D&gt;;&quot;)
124     Map&lt;? extends double[], ? super double[]&gt; boundsDoubleArray;
125 
126     @ExpectedSignature(descriptor = &quot;boundsObjectArray&quot;,
127             signature = &quot;Ljava/util/Map&lt;+[Ljava/lang/Object;-[Ljava/lang/Object;&gt;;&quot;)
128     Map&lt;? extends Object[], ? super Object[]&gt; boundsObjectArray;
129 
130     boolean booleanNoSignatureAttribute;
131     byte byteNoSignatureAttribute;
132     char charNoSignatureAttribute;
133     short shortNoSignatureAttribute;
134     int intNoSignatureAttribute;
135     long longNoSignatureAttribute;
136     float floatNoSignatureAttribute;
137     double doubleNoSignatureAttribute;
138 
139     List listNoSignatureAttribute;
140 
141     @ExpectedSignature(descriptor = &quot;staticByteArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[B&gt;;&quot;)
142     static List&lt;byte[]&gt; staticByteArrayInList;
143 
144     @ExpectedSignature(descriptor = &quot;staticShortArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[S&gt;;&quot;)
145     static List&lt;short[]&gt; staticShortArrayInList;
146 
147     @ExpectedSignature(descriptor = &quot;staticIntArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[I&gt;;&quot;)
148     static List&lt;int[]&gt; staticIntArrayInList;
149 
150     @ExpectedSignature(descriptor = &quot;staticLongArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[J&gt;;&quot;)
151     static List&lt;long[]&gt; staticLongArrayInList;
152 
153     @ExpectedSignature(descriptor = &quot;staticCharArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[C&gt;;&quot;)
154     static List&lt;char[]&gt; staticCharArrayInList;
155 
156     @ExpectedSignature(descriptor = &quot;staticBooleanArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[Z&gt;;&quot;)
157     static List&lt;boolean[]&gt; staticBooleanArrayInList;
158 
159     @ExpectedSignature(descriptor = &quot;staticFloatArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[F&gt;;&quot;)
160     static List&lt;float[]&gt; staticFloatArrayInList;
161 
162     @ExpectedSignature(descriptor = &quot;staticDoubleArrayInList&quot;, signature = &quot;Ljava/util/List&lt;[D&gt;;&quot;)
163     static List&lt;double[]&gt; staticDoubleArrayInList;
164 
165     @ExpectedSignature(descriptor = &quot;staticIntegerInList&quot;, signature = &quot;Ljava/util/List&lt;Ljava/lang/Integer;&gt;;&quot;)
166     static List&lt;Integer&gt; staticIntegerInList;
167 
168     @ExpectedSignature(descriptor = &quot;staticWildCard&quot;, signature = &quot;Ljava/util/Comparator&lt;*&gt;;&quot;)
169     static Comparator&lt;?&gt; staticWildCard;
170 
171     @ExpectedSignature(descriptor = &quot;staticBoundsBooleanArray&quot;, signature = &quot;Ljava/util/Map&lt;+[Z-[Z&gt;;&quot;)
172     static Map&lt;? extends boolean[], ? super boolean[]&gt; staticBoundsBooleanArray;
173 
174     @ExpectedSignature(descriptor = &quot;staticBoundsByteArray&quot;, signature = &quot;Ljava/util/Map&lt;+[B-[B&gt;;&quot;)
175     static Map&lt;? extends byte[], ? super byte[]&gt; staticBoundsByteArray;
176 
177     @ExpectedSignature(descriptor = &quot;staticBoundsShortArray&quot;, signature = &quot;Ljava/util/Map&lt;+[S-[S&gt;;&quot;)
178     static Map&lt;? extends short[], ? super short[]&gt; staticBoundsShortArray;
179 
180     @ExpectedSignature(descriptor = &quot;staticBoundsIntArray&quot;, signature = &quot;Ljava/util/Map&lt;+[I-[I&gt;;&quot;)
181     static Map&lt;? extends int[], ? super int[]&gt; staticBoundsIntArray;
182 
183     @ExpectedSignature(descriptor = &quot;staticBoundsLongArray&quot;, signature = &quot;Ljava/util/Map&lt;+[J-[J&gt;;&quot;)
184     static Map&lt;? extends long[], ? super long[]&gt; staticBoundsLongArray;
185 
186     @ExpectedSignature(descriptor = &quot;staticBoundsCharArray&quot;, signature = &quot;Ljava/util/Map&lt;+[C-[C&gt;;&quot;)
187     static Map&lt;? extends char[], ? super char[]&gt; staticBoundsCharArray;
188 
189     @ExpectedSignature(descriptor = &quot;staticBoundsFloatArray&quot;, signature = &quot;Ljava/util/Map&lt;+[F-[F&gt;;&quot;)
190     static Map&lt;? extends float[], ? super float[]&gt; staticBoundsFloatArray;
191 
192     @ExpectedSignature(descriptor = &quot;staticBoundsDoubleArray&quot;, signature = &quot;Ljava/util/Map&lt;+[D-[D&gt;;&quot;)
193     static Map&lt;? extends double[], ? super double[]&gt; staticBoundsDoubleArray;
194 
195     @ExpectedSignature(descriptor = &quot;staticBoundsObjectArray&quot;,
196             signature = &quot;Ljava/util/Map&lt;+[Ljava/lang/Object;-[Ljava/lang/Object;&gt;;&quot;)
197     static Map&lt;? extends Object[], ? super Object[]&gt; staticBoundsObjectArray;
198 
199     static boolean staticBooleanNoSignatureAttribute;
200     static byte staticByteNoSignatureAttribute;
201     static char staticCharNoSignatureAttribute;
202     static short staticShortNoSignatureAttribute;
203     static int staticIntNoSignatureAttribute;
204     static long staticLongNoSignatureAttribute;
205     static float staticFloatNoSignatureAttribute;
206     static double staticDoubleNoSignatureAttribute;
207 
208     static List staticListNoSignatureAttribute;
209 }
    </pre>
  </body>
</html>