<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/valhalla/valuetypes/SubstitutabilityTest.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="StreamTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ValueArray.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/jdk/valhalla/valuetypes/SubstitutabilityTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 22  */
 23 
 24 /*
 25  * @test
 26  * @summary test MethodHandle/VarHandle on inline types
 27  * @run testng/othervm SubstitutabilityTest
 28  */
 29 
 30 import java.lang.invoke.ValueBootstrapMethods;
 31 import java.util.List;
 32 
 33 import org.testng.annotations.DataProvider;
 34 import org.testng.annotations.Test;
 35 import static org.testng.Assert.*;
 36 
 37 public class SubstitutabilityTest {
 38     @DataProvider(name=&quot;substitutable&quot;)
 39     Object[][] substitutableCases() {
 40         Point p1 = Point.makePoint(10, 10);
 41         Point p2 = Point.makePoint(20, 20);
<span class="line-modified"> 42         Point? box1 = p1;</span>
<span class="line-modified"> 43         Point? box2 = p2;</span>
 44         Line l1 = Line.makeLine(p1, p2);
 45         var mpath = MutablePath.makePath(10, 20, 30, 40);
 46         var mixedValues = new MixedValues(p1, l1, mpath, &quot;value&quot;);
 47         var number = Value.Number.intValue(99);
 48         var list = List.of(&quot;list&quot;);
 49         return new Object[][] {
 50             new Object[] { p1, Point.makePoint(10, 10) },
 51             new Object[] { l1, Line.makeLine(10,10, 20,20) },
 52             new Object[] { box1, Point.makePoint(10, 10) },
 53             new Object[] { mpath, mpath},
 54             new Object[] { mixedValues, mixedValues},
 55             new Object[] { valueBuilder().setPoint(p1).build(),
 56                            valueBuilder().setPoint(Point.makePoint(10, 10)).build() },
 57             new Object[] { valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setPoint(p1).build(),
 58                            valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setPoint(l1.p1).build() },
 59             new Object[] { valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setNumber(number).build(),
 60                            valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setNumber(Value.Number.intValue(99)).build() },
 61             new Object[] { valueBuilder().setFloat(+0.0f).setDouble(+0.0).setReference(list).build(),
 62                            valueBuilder().setFloat(+0.0f).setDouble(+0.0).setReference(list).build() },
 63             new Object[] { valueBuilder().setNumber(Value.Number.intValue(100)).build(),
</pre>
</td>
<td>
<hr />
<pre>
 22  */
 23 
 24 /*
 25  * @test
 26  * @summary test MethodHandle/VarHandle on inline types
 27  * @run testng/othervm SubstitutabilityTest
 28  */
 29 
 30 import java.lang.invoke.ValueBootstrapMethods;
 31 import java.util.List;
 32 
 33 import org.testng.annotations.DataProvider;
 34 import org.testng.annotations.Test;
 35 import static org.testng.Assert.*;
 36 
 37 public class SubstitutabilityTest {
 38     @DataProvider(name=&quot;substitutable&quot;)
 39     Object[][] substitutableCases() {
 40         Point p1 = Point.makePoint(10, 10);
 41         Point p2 = Point.makePoint(20, 20);
<span class="line-modified"> 42         Point.ref box1 = p1;</span>
<span class="line-modified"> 43         Point.ref box2 = p2;</span>
 44         Line l1 = Line.makeLine(p1, p2);
 45         var mpath = MutablePath.makePath(10, 20, 30, 40);
 46         var mixedValues = new MixedValues(p1, l1, mpath, &quot;value&quot;);
 47         var number = Value.Number.intValue(99);
 48         var list = List.of(&quot;list&quot;);
 49         return new Object[][] {
 50             new Object[] { p1, Point.makePoint(10, 10) },
 51             new Object[] { l1, Line.makeLine(10,10, 20,20) },
 52             new Object[] { box1, Point.makePoint(10, 10) },
 53             new Object[] { mpath, mpath},
 54             new Object[] { mixedValues, mixedValues},
 55             new Object[] { valueBuilder().setPoint(p1).build(),
 56                            valueBuilder().setPoint(Point.makePoint(10, 10)).build() },
 57             new Object[] { valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setPoint(p1).build(),
 58                            valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setPoint(l1.p1).build() },
 59             new Object[] { valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setNumber(number).build(),
 60                            valueBuilder().setFloat(Float.NaN).setDouble(Double.NaN).setNumber(Value.Number.intValue(99)).build() },
 61             new Object[] { valueBuilder().setFloat(+0.0f).setDouble(+0.0).setReference(list).build(),
 62                            valueBuilder().setFloat(+0.0f).setDouble(+0.0).setReference(list).build() },
 63             new Object[] { valueBuilder().setNumber(Value.Number.intValue(100)).build(),
</pre>
</td>
</tr>
</table>
<center><a href="StreamTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="ValueArray.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>