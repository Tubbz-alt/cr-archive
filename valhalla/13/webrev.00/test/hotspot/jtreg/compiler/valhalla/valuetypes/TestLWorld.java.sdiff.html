<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/compiler/valhalla/valuetypes/TestLWorld.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="TestArrays.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestLWorldProfiling.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/valhalla/valuetypes/TestLWorld.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2307 
2308     @DontCompile
2309     public void test93_verifier(boolean warmup) {
2310         if (warmup) {
2311             Object[] array = new Object[1];
2312             array[0] = 0x42;
2313             Object result = test93(array);
2314             Asserts.assertEquals(result, 0x42);
2315         } else {
2316             Object[] array = new Test92Value[1];
2317             Method m = tests.get(&quot;TestLWorld::test93&quot;);
2318             int extra = 3;
2319             for (int j = 0; j &lt; extra; j++) {
2320                 for (int i = 0; i &lt; 10; i++) {
2321                     try {
2322                         test93(array);
2323                     } catch (ClassCastException cce) {
2324                     }
2325                 }
2326                 boolean compiled = isCompiledByC2(m);
<span class="line-modified">2327                 Asserts.assertTrue(!USE_COMPILER || XCOMP || TEST_C1 || compiled || (j != extra-1));</span>
2328                 if (!compiled) {
2329                     enqueueMethodForCompilation(m, COMP_LEVEL_FULL_OPTIMIZATION);
2330                 }
2331             }
2332         }
2333     }
2334 
2335     @Warmup(10000)
2336     @Test(match = { CLASS_CHECK_TRAP, LOOP }, matchCount = { 2, 1 }, failOn = LOAD_UNKNOWN_VALUE + ALLOC_G)
2337     public int test94(Object[] array) {
2338         int res = 0;
2339         for (int i = 1; i &lt; 4; i *= 2) {
2340             Object v = array[i];
2341             res += (Integer)v;
2342         }
2343         return res;
2344     }
2345 
2346     @DontCompile
2347     public void test94_verifier(boolean warmup) {
</pre>
</td>
<td>
<hr />
<pre>
2307 
2308     @DontCompile
2309     public void test93_verifier(boolean warmup) {
2310         if (warmup) {
2311             Object[] array = new Object[1];
2312             array[0] = 0x42;
2313             Object result = test93(array);
2314             Asserts.assertEquals(result, 0x42);
2315         } else {
2316             Object[] array = new Test92Value[1];
2317             Method m = tests.get(&quot;TestLWorld::test93&quot;);
2318             int extra = 3;
2319             for (int j = 0; j &lt; extra; j++) {
2320                 for (int i = 0; i &lt; 10; i++) {
2321                     try {
2322                         test93(array);
2323                     } catch (ClassCastException cce) {
2324                     }
2325                 }
2326                 boolean compiled = isCompiledByC2(m);
<span class="line-modified">2327                 Asserts.assertTrue(!USE_COMPILER || XCOMP || STRESS_CC || TEST_C1 || compiled || (j != extra-1));</span>
2328                 if (!compiled) {
2329                     enqueueMethodForCompilation(m, COMP_LEVEL_FULL_OPTIMIZATION);
2330                 }
2331             }
2332         }
2333     }
2334 
2335     @Warmup(10000)
2336     @Test(match = { CLASS_CHECK_TRAP, LOOP }, matchCount = { 2, 1 }, failOn = LOAD_UNKNOWN_VALUE + ALLOC_G)
2337     public int test94(Object[] array) {
2338         int res = 0;
2339         for (int i = 1; i &lt; 4; i *= 2) {
2340             Object v = array[i];
2341             res += (Integer)v;
2342         }
2343         return res;
2344     }
2345 
2346     @DontCompile
2347     public void test94_verifier(boolean warmup) {
</pre>
</td>
</tr>
</table>
<center><a href="TestArrays.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="TestLWorldProfiling.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>