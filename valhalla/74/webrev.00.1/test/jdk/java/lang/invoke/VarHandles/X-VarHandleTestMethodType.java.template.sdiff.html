<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/java/lang/invoke/VarHandles/X-VarHandleTestMethodType.java.template</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="VarHandleTestMethodTypeString.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/jdk/java/lang/invoke/VarHandles/X-VarHandleTestMethodType.java.template</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 










  24 /*
  25  * @test
  26  * @bug 8156486
  27  * @run testng/othervm VarHandleTestMethodType$Type$
  28  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=true -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=true VarHandleTestMethodType$Type$
  29  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=false VarHandleTestMethodType$Type$
  30  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=true VarHandleTestMethodType$Type$
  31  */

  32 
  33 import org.testng.annotations.BeforeClass;
  34 import org.testng.annotations.DataProvider;
  35 import org.testng.annotations.Test;
  36 
  37 import java.lang.invoke.MethodHandles;
  38 import java.lang.invoke.VarHandle;
  39 import java.util.ArrayList;
  40 import java.util.Arrays;
  41 import java.util.List;
  42 
  43 import static org.testng.Assert.*;
  44 
  45 import static java.lang.invoke.MethodType.*;
  46 
  47 public class VarHandleTestMethodType$Type$ extends VarHandleBaseTest {
  48     static final $type$ static_final_v = $value1$;
  49 
  50     static $type$ static_v = $value1$;
  51 
</pre>
<hr />
<pre>
 121         int iters = atc.requiresLoop() ? ITERS : 1;
 122         for (int c = 0; c &lt; iters; c++) {
 123             atc.testAccess(t);
 124         }
 125     }
 126 
 127 
 128     static void testInstanceFieldWrongMethodType(VarHandleTestMethodType$Type$ recv, VarHandle vh) throws Throwable {
 129         // Get
 130         // Incorrect argument types
 131         checkNPE(() -&gt; { // null receiver
 132             $type$ x = ($type$) vh.get(null);
 133         });
 134         checkCCE(() -&gt; { // receiver reference class
 135             $type$ x = ($type$) vh.get(Void.class);
 136         });
 137         checkWMTE(() -&gt; { // receiver primitive class
 138             $type$ x = ($type$) vh.get(0);
 139         });
 140         // Incorrect return type
<span class="line-modified"> 141         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 142             Void x = (Void) vh.get(recv);
 143         });
 144         checkWMTE(() -&gt; { // primitive class
 145             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.get(recv);
 146         });
 147         // Incorrect arity
 148         checkWMTE(() -&gt; { // 0
 149             $type$ x = ($type$) vh.get();
 150         });
 151         checkWMTE(() -&gt; { // &gt;
 152             $type$ x = ($type$) vh.get(recv, Void.class);
 153         });
 154 
 155 
 156         // Set
 157         // Incorrect argument types
 158         checkNPE(() -&gt; { // null receiver
 159             vh.set(null, $value1$);
 160         });
 161         checkCCE(() -&gt; { // receiver reference class
 162             vh.set(Void.class, $value1$);
 163         });
<span class="line-modified"> 164         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 165             vh.set(recv, Void.class);
 166         });
 167         checkWMTE(() -&gt; { // receiver primitive class
 168             vh.set(0, $value1$);
 169         });
 170         // Incorrect arity
 171         checkWMTE(() -&gt; { // 0
 172             vh.set();
 173         });
 174         checkWMTE(() -&gt; { // &gt;
 175             vh.set(recv, $value1$, Void.class);
 176         });
 177 
 178 
 179         // GetVolatile
 180         // Incorrect argument types
 181         checkNPE(() -&gt; { // null receiver
 182             $type$ x = ($type$) vh.getVolatile(null);
 183         });
 184         checkCCE(() -&gt; { // receiver reference class
 185             $type$ x = ($type$) vh.getVolatile(Void.class);
 186         });
 187         checkWMTE(() -&gt; { // receiver primitive class
 188             $type$ x = ($type$) vh.getVolatile(0);
 189         });
 190         // Incorrect return type
<span class="line-modified"> 191         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 192             Void x = (Void) vh.getVolatile(recv);
 193         });
 194         checkWMTE(() -&gt; { // primitive class
 195             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getVolatile(recv);
 196         });
 197         // Incorrect arity
 198         checkWMTE(() -&gt; { // 0
 199             $type$ x = ($type$) vh.getVolatile();
 200         });
 201         checkWMTE(() -&gt; { // &gt;
 202             $type$ x = ($type$) vh.getVolatile(recv, Void.class);
 203         });
 204 
 205 
 206         // SetVolatile
 207         // Incorrect argument types
 208         checkNPE(() -&gt; { // null receiver
 209             vh.setVolatile(null, $value1$);
 210         });
 211         checkCCE(() -&gt; { // receiver reference class
 212             vh.setVolatile(Void.class, $value1$);
 213         });
<span class="line-modified"> 214         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 215             vh.setVolatile(recv, Void.class);
 216         });
 217         checkWMTE(() -&gt; { // receiver primitive class
 218             vh.setVolatile(0, $value1$);
 219         });
 220         // Incorrect arity
 221         checkWMTE(() -&gt; { // 0
 222             vh.setVolatile();
 223         });
 224         checkWMTE(() -&gt; { // &gt;
 225             vh.setVolatile(recv, $value1$, Void.class);
 226         });
 227 
 228 
 229         // GetOpaque
 230         // Incorrect argument types
 231         checkNPE(() -&gt; { // null receiver
 232             $type$ x = ($type$) vh.getOpaque(null);
 233         });
 234         checkCCE(() -&gt; { // receiver reference class
 235             $type$ x = ($type$) vh.getOpaque(Void.class);
 236         });
 237         checkWMTE(() -&gt; { // receiver primitive class
 238             $type$ x = ($type$) vh.getOpaque(0);
 239         });
 240         // Incorrect return type
<span class="line-modified"> 241         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 242             Void x = (Void) vh.getOpaque(recv);
 243         });
 244         checkWMTE(() -&gt; { // primitive class
 245             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getOpaque(recv);
 246         });
 247         // Incorrect arity
 248         checkWMTE(() -&gt; { // 0
 249             $type$ x = ($type$) vh.getOpaque();
 250         });
 251         checkWMTE(() -&gt; { // &gt;
 252             $type$ x = ($type$) vh.getOpaque(recv, Void.class);
 253         });
 254 
 255 
 256         // SetOpaque
 257         // Incorrect argument types
 258         checkNPE(() -&gt; { // null receiver
 259             vh.setOpaque(null, $value1$);
 260         });
 261         checkCCE(() -&gt; { // receiver reference class
 262             vh.setOpaque(Void.class, $value1$);
 263         });
<span class="line-modified"> 264         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 265             vh.setOpaque(recv, Void.class);
 266         });
 267         checkWMTE(() -&gt; { // receiver primitive class
 268             vh.setOpaque(0, $value1$);
 269         });
 270         // Incorrect arity
 271         checkWMTE(() -&gt; { // 0
 272             vh.setOpaque();
 273         });
 274         checkWMTE(() -&gt; { // &gt;
 275             vh.setOpaque(recv, $value1$, Void.class);
 276         });
 277 
 278 
 279         // GetAcquire
 280         // Incorrect argument types
 281         checkNPE(() -&gt; { // null receiver
 282             $type$ x = ($type$) vh.getAcquire(null);
 283         });
 284         checkCCE(() -&gt; { // receiver reference class
 285             $type$ x = ($type$) vh.getAcquire(Void.class);
 286         });
 287         checkWMTE(() -&gt; { // receiver primitive class
 288             $type$ x = ($type$) vh.getAcquire(0);
 289         });
 290         // Incorrect return type
<span class="line-modified"> 291         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 292             Void x = (Void) vh.getAcquire(recv);
 293         });
 294         checkWMTE(() -&gt; { // primitive class
 295             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAcquire(recv);
 296         });
 297         // Incorrect arity
 298         checkWMTE(() -&gt; { // 0
 299             $type$ x = ($type$) vh.getAcquire();
 300         });
 301         checkWMTE(() -&gt; { // &gt;
 302             $type$ x = ($type$) vh.getAcquire(recv, Void.class);
 303         });
 304 
 305 
 306         // SetRelease
 307         // Incorrect argument types
 308         checkNPE(() -&gt; { // null receiver
 309             vh.setRelease(null, $value1$);
 310         });
 311         checkCCE(() -&gt; { // receiver reference class
 312             vh.setRelease(Void.class, $value1$);
 313         });
<span class="line-modified"> 314         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 315             vh.setRelease(recv, Void.class);
 316         });
 317         checkWMTE(() -&gt; { // receiver primitive class
 318             vh.setRelease(0, $value1$);
 319         });
 320         // Incorrect arity
 321         checkWMTE(() -&gt; { // 0
 322             vh.setRelease();
 323         });
 324         checkWMTE(() -&gt; { // &gt;
 325             vh.setRelease(recv, $value1$, Void.class);
 326         });
 327 
 328 
 329 #if[CAS]
 330         // CompareAndSet
 331         // Incorrect argument types
 332         checkNPE(() -&gt; { // null receiver
 333             boolean r = vh.compareAndSet(null, $value1$, $value1$);
 334         });
 335         checkCCE(() -&gt; { // receiver reference class
 336             boolean r = vh.compareAndSet(Void.class, $value1$, $value1$);
 337         });
<span class="line-modified"> 338         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 339             boolean r = vh.compareAndSet(recv, Void.class, $value1$);
 340         });
<span class="line-modified"> 341         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 342             boolean r = vh.compareAndSet(recv, $value1$, Void.class);
 343         });
 344         checkWMTE(() -&gt; { // receiver primitive class
 345             boolean r = vh.compareAndSet(0, $value1$, $value1$);
 346         });
 347         // Incorrect arity
 348         checkWMTE(() -&gt; { // 0
 349             boolean r = vh.compareAndSet();
 350         });
 351         checkWMTE(() -&gt; { // &gt;
 352             boolean r = vh.compareAndSet(recv, $value1$, $value1$, Void.class);
 353         });
 354 
 355 
 356         // WeakCompareAndSet
 357         // Incorrect argument types
 358         checkNPE(() -&gt; { // null receiver
 359             boolean r = vh.weakCompareAndSetPlain(null, $value1$, $value1$);
 360         });
 361         checkCCE(() -&gt; { // receiver reference class
 362             boolean r = vh.weakCompareAndSetPlain(Void.class, $value1$, $value1$);
 363         });
<span class="line-modified"> 364         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 365             boolean r = vh.weakCompareAndSetPlain(recv, Void.class, $value1$);
 366         });
<span class="line-modified"> 367         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 368             boolean r = vh.weakCompareAndSetPlain(recv, $value1$, Void.class);
 369         });
 370         checkWMTE(() -&gt; { // receiver primitive class
 371             boolean r = vh.weakCompareAndSetPlain(0, $value1$, $value1$);
 372         });
 373         // Incorrect arity
 374         checkWMTE(() -&gt; { // 0
 375             boolean r = vh.weakCompareAndSetPlain();
 376         });
 377         checkWMTE(() -&gt; { // &gt;
 378             boolean r = vh.weakCompareAndSetPlain(recv, $value1$, $value1$, Void.class);
 379         });
 380 
 381 
 382         // WeakCompareAndSetVolatile
 383         // Incorrect argument types
 384         checkNPE(() -&gt; { // null receiver
 385             boolean r = vh.weakCompareAndSet(null, $value1$, $value1$);
 386         });
 387         checkCCE(() -&gt; { // receiver reference class
 388             boolean r = vh.weakCompareAndSet(Void.class, $value1$, $value1$);
 389         });
<span class="line-modified"> 390         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 391             boolean r = vh.weakCompareAndSet(recv, Void.class, $value1$);
 392         });
<span class="line-modified"> 393         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 394             boolean r = vh.weakCompareAndSet(recv, $value1$, Void.class);
 395         });
 396         checkWMTE(() -&gt; { // receiver primitive class
 397             boolean r = vh.weakCompareAndSet(0, $value1$, $value1$);
 398         });
 399         // Incorrect arity
 400         checkWMTE(() -&gt; { // 0
 401             boolean r = vh.weakCompareAndSet();
 402         });
 403         checkWMTE(() -&gt; { // &gt;
 404             boolean r = vh.weakCompareAndSet(recv, $value1$, $value1$, Void.class);
 405         });
 406 
 407 
 408         // WeakCompareAndSetAcquire
 409         // Incorrect argument types
 410         checkNPE(() -&gt; { // null receiver
 411             boolean r = vh.weakCompareAndSetAcquire(null, $value1$, $value1$);
 412         });
 413         checkCCE(() -&gt; { // receiver reference class
 414             boolean r = vh.weakCompareAndSetAcquire(Void.class, $value1$, $value1$);
 415         });
<span class="line-modified"> 416         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 417             boolean r = vh.weakCompareAndSetAcquire(recv, Void.class, $value1$);
 418         });
<span class="line-modified"> 419         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 420             boolean r = vh.weakCompareAndSetAcquire(recv, $value1$, Void.class);
 421         });
 422         checkWMTE(() -&gt; { // receiver primitive class
 423             boolean r = vh.weakCompareAndSetAcquire(0, $value1$, $value1$);
 424         });
 425         // Incorrect arity
 426         checkWMTE(() -&gt; { // 0
 427             boolean r = vh.weakCompareAndSetAcquire();
 428         });
 429         checkWMTE(() -&gt; { // &gt;
 430             boolean r = vh.weakCompareAndSetAcquire(recv, $value1$, $value1$, Void.class);
 431         });
 432 
 433 
 434         // WeakCompareAndSetRelease
 435         // Incorrect argument types
 436         checkNPE(() -&gt; { // null receiver
 437             boolean r = vh.weakCompareAndSetRelease(null, $value1$, $value1$);
 438         });
 439         checkCCE(() -&gt; { // receiver reference class
 440             boolean r = vh.weakCompareAndSetRelease(Void.class, $value1$, $value1$);
 441         });
<span class="line-modified"> 442         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 443             boolean r = vh.weakCompareAndSetRelease(recv, Void.class, $value1$);
 444         });
<span class="line-modified"> 445         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 446             boolean r = vh.weakCompareAndSetRelease(recv, $value1$, Void.class);
 447         });
 448         checkWMTE(() -&gt; { // receiver primitive class
 449             boolean r = vh.weakCompareAndSetRelease(0, $value1$, $value1$);
 450         });
 451         // Incorrect arity
 452         checkWMTE(() -&gt; { // 0
 453             boolean r = vh.weakCompareAndSetRelease();
 454         });
 455         checkWMTE(() -&gt; { // &gt;
 456             boolean r = vh.weakCompareAndSetRelease(recv, $value1$, $value1$, Void.class);
 457         });
 458 
 459 
 460         // CompareAndExchange
 461         // Incorrect argument types
 462         checkNPE(() -&gt; { // null receiver
 463             $type$ x = ($type$) vh.compareAndExchange(null, $value1$, $value1$);
 464         });
 465         checkCCE(() -&gt; { // receiver reference class
 466             $type$ x = ($type$) vh.compareAndExchange(Void.class, $value1$, $value1$);
 467         });
<span class="line-modified"> 468         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 469             $type$ x = ($type$) vh.compareAndExchange(recv, Void.class, $value1$);
 470         });
<span class="line-modified"> 471         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 472             $type$ x = ($type$) vh.compareAndExchange(recv, $value1$, Void.class);
 473         });
 474         checkWMTE(() -&gt; { // reciever primitive class
 475             $type$ x = ($type$) vh.compareAndExchange(0, $value1$, $value1$);
 476         });
 477         // Incorrect return type
<span class="line-modified"> 478         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 479             Void r = (Void) vh.compareAndExchange(recv, $value1$, $value1$);
 480         });
 481         checkWMTE(() -&gt; { // primitive class
 482             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchange(recv, $value1$, $value1$);
 483         });
 484         // Incorrect arity
 485         checkWMTE(() -&gt; { // 0
 486             $type$ x = ($type$) vh.compareAndExchange();
 487         });
 488         checkWMTE(() -&gt; { // &gt;
 489             $type$ x = ($type$) vh.compareAndExchange(recv, $value1$, $value1$, Void.class);
 490         });
 491 
 492 
 493         // CompareAndExchangeAcquire
 494         // Incorrect argument types
 495         checkNPE(() -&gt; { // null receiver
 496             $type$ x = ($type$) vh.compareAndExchangeAcquire(null, $value1$, $value1$);
 497         });
 498         checkCCE(() -&gt; { // receiver reference class
 499             $type$ x = ($type$) vh.compareAndExchangeAcquire(Void.class, $value1$, $value1$);
 500         });
<span class="line-modified"> 501         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 502             $type$ x = ($type$) vh.compareAndExchangeAcquire(recv, Void.class, $value1$);
 503         });
<span class="line-modified"> 504         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 505             $type$ x = ($type$) vh.compareAndExchangeAcquire(recv, $value1$, Void.class);
 506         });
 507         checkWMTE(() -&gt; { // reciever primitive class
 508             $type$ x = ($type$) vh.compareAndExchangeAcquire(0, $value1$, $value1$);
 509         });
 510         // Incorrect return type
<span class="line-modified"> 511         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 512             Void r = (Void) vh.compareAndExchangeAcquire(recv, $value1$, $value1$);
 513         });
 514         checkWMTE(() -&gt; { // primitive class
 515             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeAcquire(recv, $value1$, $value1$);
 516         });
 517         // Incorrect arity
 518         checkWMTE(() -&gt; { // 0
 519             $type$ x = ($type$) vh.compareAndExchangeAcquire();
 520         });
 521         checkWMTE(() -&gt; { // &gt;
 522             $type$ x = ($type$) vh.compareAndExchangeAcquire(recv, $value1$, $value1$, Void.class);
 523         });
 524 
 525 
 526         // CompareAndExchangeRelease
 527         // Incorrect argument types
 528         checkNPE(() -&gt; { // null receiver
 529             $type$ x = ($type$) vh.compareAndExchangeRelease(null, $value1$, $value1$);
 530         });
 531         checkCCE(() -&gt; { // receiver reference class
 532             $type$ x = ($type$) vh.compareAndExchangeRelease(Void.class, $value1$, $value1$);
 533         });
<span class="line-modified"> 534         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 535             $type$ x = ($type$) vh.compareAndExchangeRelease(recv, Void.class, $value1$);
 536         });
<span class="line-modified"> 537         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 538             $type$ x = ($type$) vh.compareAndExchangeRelease(recv, $value1$, Void.class);
 539         });
 540         checkWMTE(() -&gt; { // reciever primitive class
 541             $type$ x = ($type$) vh.compareAndExchangeRelease(0, $value1$, $value1$);
 542         });
 543         // Incorrect return type
<span class="line-modified"> 544         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 545             Void r = (Void) vh.compareAndExchangeRelease(recv, $value1$, $value1$);
 546         });
 547         checkWMTE(() -&gt; { // primitive class
 548             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeRelease(recv, $value1$, $value1$);
 549         });
 550         // Incorrect arity
 551         checkWMTE(() -&gt; { // 0
 552             $type$ x = ($type$) vh.compareAndExchangeRelease();
 553         });
 554         checkWMTE(() -&gt; { // &gt;
 555             $type$ x = ($type$) vh.compareAndExchangeRelease(recv, $value1$, $value1$, Void.class);
 556         });
 557 
 558 
 559         // GetAndSet
 560         // Incorrect argument types
 561         checkNPE(() -&gt; { // null receiver
 562             $type$ x = ($type$) vh.getAndSet(null, $value1$);
 563         });
 564         checkCCE(() -&gt; { // receiver reference class
 565             $type$ x = ($type$) vh.getAndSet(Void.class, $value1$);
 566         });
<span class="line-modified"> 567         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 568             $type$ x = ($type$) vh.getAndSet(recv, Void.class);
 569         });
 570         checkWMTE(() -&gt; { // reciever primitive class
 571             $type$ x = ($type$) vh.getAndSet(0, $value1$);
 572         });
 573         // Incorrect return type
<span class="line-modified"> 574         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 575             Void r = (Void) vh.getAndSet(recv, $value1$);
 576         });
 577         checkWMTE(() -&gt; { // primitive class
 578             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSet(recv, $value1$);
 579         });
 580         // Incorrect arity
 581         checkWMTE(() -&gt; { // 0
 582             $type$ x = ($type$) vh.getAndSet();
 583         });
 584         checkWMTE(() -&gt; { // &gt;
 585             $type$ x = ($type$) vh.getAndSet(recv, $value1$, Void.class);
 586         });
 587 
 588         // GetAndSetAcquire
 589         // Incorrect argument types
 590         checkNPE(() -&gt; { // null receiver
 591             $type$ x = ($type$) vh.getAndSetAcquire(null, $value1$);
 592         });
 593         checkCCE(() -&gt; { // receiver reference class
 594             $type$ x = ($type$) vh.getAndSetAcquire(Void.class, $value1$);
 595         });
<span class="line-modified"> 596         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 597             $type$ x = ($type$) vh.getAndSetAcquire(recv, Void.class);
 598         });
 599         checkWMTE(() -&gt; { // reciever primitive class
 600             $type$ x = ($type$) vh.getAndSetAcquire(0, $value1$);
 601         });
 602         // Incorrect return type
<span class="line-modified"> 603         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 604             Void r = (Void) vh.getAndSetAcquire(recv, $value1$);
 605         });
 606         checkWMTE(() -&gt; { // primitive class
 607             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetAcquire(recv, $value1$);
 608         });
 609         // Incorrect arity
 610         checkWMTE(() -&gt; { // 0
 611             $type$ x = ($type$) vh.getAndSetAcquire();
 612         });
 613         checkWMTE(() -&gt; { // &gt;
 614             $type$ x = ($type$) vh.getAndSetAcquire(recv, $value1$, Void.class);
 615         });
 616 
 617         // GetAndSetRelease
 618         // Incorrect argument types
 619         checkNPE(() -&gt; { // null receiver
 620             $type$ x = ($type$) vh.getAndSetRelease(null, $value1$);
 621         });
 622         checkCCE(() -&gt; { // receiver reference class
 623             $type$ x = ($type$) vh.getAndSetRelease(Void.class, $value1$);
 624         });
<span class="line-modified"> 625         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 626             $type$ x = ($type$) vh.getAndSetRelease(recv, Void.class);
 627         });
 628         checkWMTE(() -&gt; { // reciever primitive class
 629             $type$ x = ($type$) vh.getAndSetRelease(0, $value1$);
 630         });
 631         // Incorrect return type
<span class="line-modified"> 632         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 633             Void r = (Void) vh.getAndSetRelease(recv, $value1$);
 634         });
 635         checkWMTE(() -&gt; { // primitive class
 636             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetRelease(recv, $value1$);
 637         });
 638         // Incorrect arity
 639         checkWMTE(() -&gt; { // 0
 640             $type$ x = ($type$) vh.getAndSetRelease();
 641         });
 642         checkWMTE(() -&gt; { // &gt;
 643             $type$ x = ($type$) vh.getAndSetRelease(recv, $value1$, Void.class);
 644         });
 645 #end[CAS]
 646 
 647 #if[AtomicAdd]
 648         // GetAndAdd
 649         // Incorrect argument types
 650         checkNPE(() -&gt; { // null receiver
 651             $type$ x = ($type$) vh.getAndAdd(null, $value1$);
 652         });
 653         checkCCE(() -&gt; { // receiver reference class
 654             $type$ x = ($type$) vh.getAndAdd(Void.class, $value1$);
 655         });
<span class="line-modified"> 656         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 657             $type$ x = ($type$) vh.getAndAdd(recv, Void.class);
 658         });
 659         checkWMTE(() -&gt; { // reciever primitive class
 660             $type$ x = ($type$) vh.getAndAdd(0, $value1$);
 661         });
 662         // Incorrect return type
<span class="line-modified"> 663         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 664             Void r = (Void) vh.getAndAdd(recv, $value1$);
 665         });
 666         checkWMTE(() -&gt; { // primitive class
 667             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAdd(recv, $value1$);
 668         });
 669         // Incorrect arity
 670         checkWMTE(() -&gt; { // 0
 671             $type$ x = ($type$) vh.getAndAdd();
 672         });
 673         checkWMTE(() -&gt; { // &gt;
 674             $type$ x = ($type$) vh.getAndAdd(recv, $value1$, Void.class);
 675         });
 676 
 677         // GetAndAddAcquire
 678         // Incorrect argument types
 679         checkNPE(() -&gt; { // null receiver
 680             $type$ x = ($type$) vh.getAndAddAcquire(null, $value1$);
 681         });
 682         checkCCE(() -&gt; { // receiver reference class
 683             $type$ x = ($type$) vh.getAndAddAcquire(Void.class, $value1$);
 684         });
<span class="line-modified"> 685         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 686             $type$ x = ($type$) vh.getAndAddAcquire(recv, Void.class);
 687         });
 688         checkWMTE(() -&gt; { // reciever primitive class
 689             $type$ x = ($type$) vh.getAndAddAcquire(0, $value1$);
 690         });
 691         // Incorrect return type
<span class="line-modified"> 692         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 693             Void r = (Void) vh.getAndAddAcquire(recv, $value1$);
 694         });
 695         checkWMTE(() -&gt; { // primitive class
 696             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddAcquire(recv, $value1$);
 697         });
 698         // Incorrect arity
 699         checkWMTE(() -&gt; { // 0
 700             $type$ x = ($type$) vh.getAndAddAcquire();
 701         });
 702         checkWMTE(() -&gt; { // &gt;
 703             $type$ x = ($type$) vh.getAndAddAcquire(recv, $value1$, Void.class);
 704         });
 705 
 706         // GetAndAddRelease
 707         // Incorrect argument types
 708         checkNPE(() -&gt; { // null receiver
 709             $type$ x = ($type$) vh.getAndAddRelease(null, $value1$);
 710         });
 711         checkCCE(() -&gt; { // receiver reference class
 712             $type$ x = ($type$) vh.getAndAddRelease(Void.class, $value1$);
 713         });
<span class="line-modified"> 714         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 715             $type$ x = ($type$) vh.getAndAddRelease(recv, Void.class);
 716         });
 717         checkWMTE(() -&gt; { // reciever primitive class
 718             $type$ x = ($type$) vh.getAndAddRelease(0, $value1$);
 719         });
 720         // Incorrect return type
<span class="line-modified"> 721         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 722             Void r = (Void) vh.getAndAddRelease(recv, $value1$);
 723         });
 724         checkWMTE(() -&gt; { // primitive class
 725             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddRelease(recv, $value1$);
 726         });
 727         // Incorrect arity
 728         checkWMTE(() -&gt; { // 0
 729             $type$ x = ($type$) vh.getAndAddRelease();
 730         });
 731         checkWMTE(() -&gt; { // &gt;
 732             $type$ x = ($type$) vh.getAndAddRelease(recv, $value1$, Void.class);
 733         });
 734 #end[AtomicAdd]
 735 
 736 #if[Bitwise]
 737         // GetAndBitwiseOr
 738         // Incorrect argument types
 739         checkNPE(() -&gt; { // null receiver
 740             $type$ x = ($type$) vh.getAndBitwiseOr(null, $value1$);
 741         });
 742         checkCCE(() -&gt; { // receiver reference class
 743             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class, $value1$);
 744         });
<span class="line-modified"> 745         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 746             $type$ x = ($type$) vh.getAndBitwiseOr(recv, Void.class);
 747         });
 748         checkWMTE(() -&gt; { // reciever primitive class
 749             $type$ x = ($type$) vh.getAndBitwiseOr(0, $value1$);
 750         });
 751         // Incorrect return type
<span class="line-modified"> 752         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 753             Void r = (Void) vh.getAndBitwiseOr(recv, $value1$);
 754         });
 755         checkWMTE(() -&gt; { // primitive class
 756             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr(recv, $value1$);
 757         });
 758         // Incorrect arity
 759         checkWMTE(() -&gt; { // 0
 760             $type$ x = ($type$) vh.getAndBitwiseOr();
 761         });
 762         checkWMTE(() -&gt; { // &gt;
 763             $type$ x = ($type$) vh.getAndBitwiseOr(recv, $value1$, Void.class);
 764         });
 765 
 766 
 767         // GetAndBitwiseOrAcquire
 768         // Incorrect argument types
 769         checkNPE(() -&gt; { // null receiver
 770             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(null, $value1$);
 771         });
 772         checkCCE(() -&gt; { // receiver reference class
 773             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(Void.class, $value1$);
 774         });
<span class="line-modified"> 775         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 776             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(recv, Void.class);
 777         });
 778         checkWMTE(() -&gt; { // reciever primitive class
 779             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(0, $value1$);
 780         });
 781         // Incorrect return type
<span class="line-modified"> 782         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 783             Void r = (Void) vh.getAndBitwiseOrAcquire(recv, $value1$);
 784         });
 785         checkWMTE(() -&gt; { // primitive class
 786             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrAcquire(recv, $value1$);
 787         });
 788         // Incorrect arity
 789         checkWMTE(() -&gt; { // 0
 790             $type$ x = ($type$) vh.getAndBitwiseOrAcquire();
 791         });
 792         checkWMTE(() -&gt; { // &gt;
 793             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(recv, $value1$, Void.class);
 794         });
 795 
 796 
 797         // GetAndBitwiseOrRelease
 798         // Incorrect argument types
 799         checkNPE(() -&gt; { // null receiver
 800             $type$ x = ($type$) vh.getAndBitwiseOrRelease(null, $value1$);
 801         });
 802         checkCCE(() -&gt; { // receiver reference class
 803             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class, $value1$);
 804         });
<span class="line-modified"> 805         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 806             $type$ x = ($type$) vh.getAndBitwiseOr(recv, Void.class);
 807         });
 808         checkWMTE(() -&gt; { // reciever primitive class
 809             $type$ x = ($type$) vh.getAndBitwiseOr(0, $value1$);
 810         });
 811         // Incorrect return type
<span class="line-modified"> 812         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 813             Void r = (Void) vh.getAndBitwiseOr(recv, $value1$);
 814         });
 815         checkWMTE(() -&gt; { // primitive class
 816             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr(recv, $value1$);
 817         });
 818         // Incorrect arity
 819         checkWMTE(() -&gt; { // 0
 820             $type$ x = ($type$) vh.getAndBitwiseOr();
 821         });
 822         checkWMTE(() -&gt; { // &gt;
 823             $type$ x = ($type$) vh.getAndBitwiseOr(recv, $value1$, Void.class);
 824         });
 825 
 826 
 827         // GetAndBitwiseAnd
 828         // Incorrect argument types
 829         checkNPE(() -&gt; { // null receiver
 830             $type$ x = ($type$) vh.getAndBitwiseAnd(null, $value1$);
 831         });
 832         checkCCE(() -&gt; { // receiver reference class
 833             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class, $value1$);
 834         });
<span class="line-modified"> 835         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 836             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, Void.class);
 837         });
 838         checkWMTE(() -&gt; { // reciever primitive class
 839             $type$ x = ($type$) vh.getAndBitwiseAnd(0, $value1$);
 840         });
 841         // Incorrect return type
<span class="line-modified"> 842         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 843             Void r = (Void) vh.getAndBitwiseAnd(recv, $value1$);
 844         });
 845         checkWMTE(() -&gt; { // primitive class
 846             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd(recv, $value1$);
 847         });
 848         // Incorrect arity
 849         checkWMTE(() -&gt; { // 0
 850             $type$ x = ($type$) vh.getAndBitwiseAnd();
 851         });
 852         checkWMTE(() -&gt; { // &gt;
 853             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, $value1$, Void.class);
 854         });
 855 
 856 
 857         // GetAndBitwiseAndAcquire
 858         // Incorrect argument types
 859         checkNPE(() -&gt; { // null receiver
 860             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(null, $value1$);
 861         });
 862         checkCCE(() -&gt; { // receiver reference class
 863             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(Void.class, $value1$);
 864         });
<span class="line-modified"> 865         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 866             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(recv, Void.class);
 867         });
 868         checkWMTE(() -&gt; { // reciever primitive class
 869             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(0, $value1$);
 870         });
 871         // Incorrect return type
<span class="line-modified"> 872         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 873             Void r = (Void) vh.getAndBitwiseAndAcquire(recv, $value1$);
 874         });
 875         checkWMTE(() -&gt; { // primitive class
 876             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndAcquire(recv, $value1$);
 877         });
 878         // Incorrect arity
 879         checkWMTE(() -&gt; { // 0
 880             $type$ x = ($type$) vh.getAndBitwiseAndAcquire();
 881         });
 882         checkWMTE(() -&gt; { // &gt;
 883             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(recv, $value1$, Void.class);
 884         });
 885 
 886 
 887         // GetAndBitwiseAndRelease
 888         // Incorrect argument types
 889         checkNPE(() -&gt; { // null receiver
 890             $type$ x = ($type$) vh.getAndBitwiseAndRelease(null, $value1$);
 891         });
 892         checkCCE(() -&gt; { // receiver reference class
 893             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class, $value1$);
 894         });
<span class="line-modified"> 895         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 896             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, Void.class);
 897         });
 898         checkWMTE(() -&gt; { // reciever primitive class
 899             $type$ x = ($type$) vh.getAndBitwiseAnd(0, $value1$);
 900         });
 901         // Incorrect return type
<span class="line-modified"> 902         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 903             Void r = (Void) vh.getAndBitwiseAnd(recv, $value1$);
 904         });
 905         checkWMTE(() -&gt; { // primitive class
 906             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd(recv, $value1$);
 907         });
 908         // Incorrect arity
 909         checkWMTE(() -&gt; { // 0
 910             $type$ x = ($type$) vh.getAndBitwiseAnd();
 911         });
 912         checkWMTE(() -&gt; { // &gt;
 913             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, $value1$, Void.class);
 914         });
 915 
 916 
 917         // GetAndBitwiseXor
 918         // Incorrect argument types
 919         checkNPE(() -&gt; { // null receiver
 920             $type$ x = ($type$) vh.getAndBitwiseXor(null, $value1$);
 921         });
 922         checkCCE(() -&gt; { // receiver reference class
 923             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class, $value1$);
 924         });
<span class="line-modified"> 925         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 926             $type$ x = ($type$) vh.getAndBitwiseXor(recv, Void.class);
 927         });
 928         checkWMTE(() -&gt; { // reciever primitive class
 929             $type$ x = ($type$) vh.getAndBitwiseXor(0, $value1$);
 930         });
 931         // Incorrect return type
<span class="line-modified"> 932         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 933             Void r = (Void) vh.getAndBitwiseXor(recv, $value1$);
 934         });
 935         checkWMTE(() -&gt; { // primitive class
 936             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor(recv, $value1$);
 937         });
 938         // Incorrect arity
 939         checkWMTE(() -&gt; { // 0
 940             $type$ x = ($type$) vh.getAndBitwiseXor();
 941         });
 942         checkWMTE(() -&gt; { // &gt;
 943             $type$ x = ($type$) vh.getAndBitwiseXor(recv, $value1$, Void.class);
 944         });
 945 
 946 
 947         // GetAndBitwiseXorAcquire
 948         // Incorrect argument types
 949         checkNPE(() -&gt; { // null receiver
 950             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(null, $value1$);
 951         });
 952         checkCCE(() -&gt; { // receiver reference class
 953             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(Void.class, $value1$);
 954         });
<span class="line-modified"> 955         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 956             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(recv, Void.class);
 957         });
 958         checkWMTE(() -&gt; { // reciever primitive class
 959             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(0, $value1$);
 960         });
 961         // Incorrect return type
<span class="line-modified"> 962         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 963             Void r = (Void) vh.getAndBitwiseXorAcquire(recv, $value1$);
 964         });
 965         checkWMTE(() -&gt; { // primitive class
 966             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorAcquire(recv, $value1$);
 967         });
 968         // Incorrect arity
 969         checkWMTE(() -&gt; { // 0
 970             $type$ x = ($type$) vh.getAndBitwiseXorAcquire();
 971         });
 972         checkWMTE(() -&gt; { // &gt;
 973             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(recv, $value1$, Void.class);
 974         });
 975 
 976 
 977         // GetAndBitwiseXorRelease
 978         // Incorrect argument types
 979         checkNPE(() -&gt; { // null receiver
 980             $type$ x = ($type$) vh.getAndBitwiseXorRelease(null, $value1$);
 981         });
 982         checkCCE(() -&gt; { // receiver reference class
 983             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class, $value1$);
 984         });
<span class="line-modified"> 985         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
 986             $type$ x = ($type$) vh.getAndBitwiseXor(recv, Void.class);
 987         });
 988         checkWMTE(() -&gt; { // reciever primitive class
 989             $type$ x = ($type$) vh.getAndBitwiseXor(0, $value1$);
 990         });
 991         // Incorrect return type
<span class="line-modified"> 992         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
 993             Void r = (Void) vh.getAndBitwiseXor(recv, $value1$);
 994         });
 995         checkWMTE(() -&gt; { // primitive class
 996             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor(recv, $value1$);
 997         });
 998         // Incorrect arity
 999         checkWMTE(() -&gt; { // 0
1000             $type$ x = ($type$) vh.getAndBitwiseXor();
1001         });
1002         checkWMTE(() -&gt; { // &gt;
1003             $type$ x = ($type$) vh.getAndBitwiseXor(recv, $value1$, Void.class);
1004         });
1005 #end[Bitwise]
1006     }
1007 
1008     static void testInstanceFieldWrongMethodType(VarHandleTestMethodType$Type$ recv, Handles hs) throws Throwable {
1009         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1010             // Incorrect argument types
1011             checkNPE(() -&gt; { // null receiver
1012                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class)).
1013                     invokeExact((VarHandleTestMethodType$Type$) null);
1014             });
1015             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1016                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1017                     invokeExact(Void.class);
1018             });
1019             checkWMTE(() -&gt; { // receiver primitive class
1020                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class)).
1021                     invokeExact(0);
1022             });
1023             // Incorrect return type
<span class="line-modified">1024             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1025                 Void x = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class)).
1026                     invokeExact(recv);
1027             });
1028             checkWMTE(() -&gt; { // primitive class
1029                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class)).
1030                     invokeExact(recv);
1031             });
1032             // Incorrect arity
1033             checkWMTE(() -&gt; { // 0
1034                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1035                     invokeExact();
1036             });
1037             checkWMTE(() -&gt; { // &gt;
1038                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1039                     invokeExact(recv, Void.class);
1040             });
1041         }
1042 
1043         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
1044             // Incorrect argument types
1045             checkNPE(() -&gt; { // null receiver
1046                 hs.get(am, methodType(void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1047                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1048             });
1049             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1050                 hs.get(am, methodType(void.class, Class.class, $type$.class)).
1051                     invokeExact(Void.class, $value1$);
1052             });
<span class="line-modified">1053             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1054                 hs.get(am, methodType(void.class, VarHandleTestMethodType$Type$.class, Class.class)).
1055                     invokeExact(recv, Void.class);
1056             });
1057             checkWMTE(() -&gt; { // receiver primitive class
1058                 hs.get(am, methodType(void.class, int.class, $type$.class)).
1059                     invokeExact(0, $value1$);
1060             });
1061             // Incorrect arity
1062             checkWMTE(() -&gt; { // 0
1063                 hs.get(am, methodType(void.class)).
1064                     invokeExact();
1065             });
1066             checkWMTE(() -&gt; { // &gt;
1067                 hs.get(am, methodType(void.class, VarHandleTestMethodType$Type$.class, $type$.class, Class.class)).
1068                     invokeExact(recv, $value1$, Void.class);
1069             });
1070         }
1071 
1072 #if[CAS]
1073         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1074             // Incorrect argument types
1075             checkNPE(() -&gt; { // null receiver
1076                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class)).
1077                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$, $value1$);
1078             });
1079             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1080                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, $type$.class, $type$.class)).
1081                     invokeExact(Void.class, $value1$, $value1$);
1082             });
<span class="line-modified">1083             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1084                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, Class.class, $type$.class)).
1085                     invokeExact(recv, Void.class, $value1$);
1086             });
<span class="line-modified">1087             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1088                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, $type$.class, Class.class)).
1089                     invokeExact(recv, $value1$, Void.class);
1090             });
1091             checkWMTE(() -&gt; { // receiver primitive class
1092                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class , $type$.class, $type$.class)).
1093                     invokeExact(0, $value1$, $value1$);
1094             });
1095             // Incorrect arity
1096             checkWMTE(() -&gt; { // 0
1097                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1098                     invokeExact();
1099             });
1100             checkWMTE(() -&gt; { // &gt;
1101                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class, Class.class)).
1102                     invokeExact(recv, $value1$, $value1$, Void.class);
1103             });
1104         }
1105 
1106         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1107             checkNPE(() -&gt; { // null receiver
1108                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class)).
1109                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$, $value1$);
1110             });
1111             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1112                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class, $type$.class)).
1113                     invokeExact(Void.class, $value1$, $value1$);
1114             });
<span class="line-modified">1115             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1116                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class, $type$.class)).
1117                     invokeExact(recv, Void.class, $value1$);
1118             });
<span class="line-modified">1119             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1120                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class, Class.class)).
1121                     invokeExact(recv, $value1$, Void.class);
1122             });
1123             checkWMTE(() -&gt; { // reciever primitive class
1124                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class , $type$.class, $type$.class)).
1125                     invokeExact(0, $value1$, $value1$);
1126             });
1127             // Incorrect return type
<span class="line-modified">1128             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1129                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class , $type$.class, $type$.class)).
1130                     invokeExact(recv, $value1$, $value1$);
1131             });
1132             checkWMTE(() -&gt; { // primitive class
1133                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class , $type$.class, $type$.class)).
1134                     invokeExact(recv, $value1$, $value1$);
1135             });
1136             // Incorrect arity
1137             checkWMTE(() -&gt; { // 0
1138                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1139                     invokeExact();
1140             });
1141             checkWMTE(() -&gt; { // &gt;
1142                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class, Class.class)).
1143                     invokeExact(recv, $value1$, $value1$, Void.class);
1144             });
1145         }
1146 
1147         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1148             checkNPE(() -&gt; { // null receiver
1149                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1150                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1151             });
1152             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1153                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1154                     invokeExact(Void.class, $value1$);
1155             });
<span class="line-modified">1156             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1157                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1158                     invokeExact(recv, Void.class);
1159             });
1160             checkWMTE(() -&gt; { // reciever primitive class
1161                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, $type$.class)).
1162                     invokeExact(0, $value1$);
1163             });
1164             // Incorrect return type
<span class="line-modified">1165             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1166                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1167                     invokeExact(recv, $value1$);
1168             });
1169             checkWMTE(() -&gt; { // primitive class
1170                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1171                     invokeExact(recv, $value1$);
1172             });
1173             // Incorrect arity
1174             checkWMTE(() -&gt; { // 0
1175                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1176                     invokeExact();
1177             });
1178             checkWMTE(() -&gt; { // &gt;
1179                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1180                     invokeExact(recv, $value1$, Void.class);
1181             });
1182         }
1183 #end[CAS]
1184 
1185 #if[AtomicAdd]
1186         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1187             checkNPE(() -&gt; { // null receiver
1188                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1189                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1190             });
1191             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1192                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1193                     invokeExact(Void.class, $value1$);
1194             });
<span class="line-modified">1195             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1196                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1197                     invokeExact(recv, Void.class);
1198             });
1199             checkWMTE(() -&gt; { // reciever primitive class
1200                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, $type$.class)).
1201                     invokeExact(0, $value1$);
1202             });
1203             // Incorrect return type
<span class="line-modified">1204             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1205                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1206                     invokeExact(recv, $value1$);
1207             });
1208             checkWMTE(() -&gt; { // primitive class
1209                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1210                     invokeExact(recv, $value1$);
1211             });
1212             // Incorrect arity
1213             checkWMTE(() -&gt; { // 0
1214                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1215                     invokeExact();
1216             });
1217             checkWMTE(() -&gt; { // &gt;
1218                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1219                     invokeExact(recv, $value1$, Void.class);
1220             });
1221         }
1222 #end[AtomicAdd]
1223 
1224 #if[Bitwise]
1225         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
1226             checkNPE(() -&gt; { // null receiver
1227                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1228                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1229             });
1230             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1231                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1232                     invokeExact(Void.class, $value1$);
1233             });
<span class="line-modified">1234             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1235                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1236                     invokeExact(recv, Void.class);
1237             });
1238             checkWMTE(() -&gt; { // reciever primitive class
1239                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, $type$.class)).
1240                     invokeExact(0, $value1$);
1241             });
1242             // Incorrect return type
<span class="line-modified">1243             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1244                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1245                     invokeExact(recv, $value1$);
1246             });
1247             checkWMTE(() -&gt; { // primitive class
1248                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1249                     invokeExact(recv, $value1$);
1250             });
1251             // Incorrect arity
1252             checkWMTE(() -&gt; { // 0
1253                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1254                     invokeExact();
1255             });
1256             checkWMTE(() -&gt; { // &gt;
1257                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1258                     invokeExact(recv, $value1$, Void.class);
1259             });
1260         }
1261 #end[Bitwise]
1262     }
1263 
1264 
1265     static void testStaticFieldWrongMethodType(VarHandle vh) throws Throwable {
1266         // Get
1267         // Incorrect return type
<span class="line-modified">1268         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1269             Void x = (Void) vh.get();
1270         });
1271         checkWMTE(() -&gt; { // primitive class
1272             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.get();
1273         });
1274         // Incorrect arity
1275         checkWMTE(() -&gt; { // &gt;
1276             $type$ x = ($type$) vh.get(Void.class);
1277         });
1278 
1279 
1280         // Set
1281         // Incorrect argument types
<span class="line-modified">1282         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1283             vh.set(Void.class);
1284         });
1285         // Incorrect arity
1286         checkWMTE(() -&gt; { // 0
1287             vh.set();
1288         });
1289         checkWMTE(() -&gt; { // &gt;
1290             vh.set($value1$, Void.class);
1291         });
1292 
1293 
1294         // GetVolatile
1295         // Incorrect return type
<span class="line-modified">1296         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1297             Void x = (Void) vh.getVolatile();
1298         });
1299         checkWMTE(() -&gt; { // primitive class
1300             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getVolatile();
1301         });
1302         checkWMTE(() -&gt; { // &gt;
1303             $type$ x = ($type$) vh.getVolatile(Void.class);
1304         });
1305 
1306 
1307         // SetVolatile
1308         // Incorrect argument types
<span class="line-modified">1309         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1310             vh.setVolatile(Void.class);
1311         });
1312         // Incorrect arity
1313         checkWMTE(() -&gt; { // 0
1314             vh.setVolatile();
1315         });
1316         checkWMTE(() -&gt; { // &gt;
1317             vh.setVolatile($value1$, Void.class);
1318         });
1319 
1320 
1321         // GetOpaque
1322         // Incorrect return type
<span class="line-modified">1323         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1324             Void x = (Void) vh.getOpaque();
1325         });
1326         checkWMTE(() -&gt; { // primitive class
1327             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getOpaque();
1328         });
1329         checkWMTE(() -&gt; { // &gt;
1330             $type$ x = ($type$) vh.getOpaque(Void.class);
1331         });
1332 
1333 
1334         // SetOpaque
1335         // Incorrect argument types
<span class="line-modified">1336         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1337             vh.setOpaque(Void.class);
1338         });
1339         // Incorrect arity
1340         checkWMTE(() -&gt; { // 0
1341             vh.setOpaque();
1342         });
1343         checkWMTE(() -&gt; { // &gt;
1344             vh.setOpaque($value1$, Void.class);
1345         });
1346 
1347 
1348         // GetAcquire
1349         // Incorrect return type
<span class="line-modified">1350         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1351             Void x = (Void) vh.getAcquire();
1352         });
1353         checkWMTE(() -&gt; { // primitive class
1354             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAcquire();
1355         });
1356         checkWMTE(() -&gt; { // &gt;
1357             $type$ x = ($type$) vh.getAcquire(Void.class);
1358         });
1359 
1360 
1361         // SetRelease
1362         // Incorrect argument types
<span class="line-modified">1363         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1364             vh.setRelease(Void.class);
1365         });
1366         // Incorrect arity
1367         checkWMTE(() -&gt; { // 0
1368             vh.setRelease();
1369         });
1370         checkWMTE(() -&gt; { // &gt;
1371             vh.setRelease($value1$, Void.class);
1372         });
1373 
1374 
1375 #if[CAS]
1376         // CompareAndSet
1377         // Incorrect argument types
<span class="line-modified">1378         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1379             boolean r = vh.compareAndSet(Void.class, $value1$);
1380         });
<span class="line-modified">1381         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1382             boolean r = vh.compareAndSet($value1$, Void.class);
1383         });
1384         // Incorrect arity
1385         checkWMTE(() -&gt; { // 0
1386             boolean r = vh.compareAndSet();
1387         });
1388         checkWMTE(() -&gt; { // &gt;
1389             boolean r = vh.compareAndSet($value1$, $value1$, Void.class);
1390         });
1391 
1392 
1393         // WeakCompareAndSet
1394         // Incorrect argument types
<span class="line-modified">1395         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1396             boolean r = vh.weakCompareAndSetPlain(Void.class, $value1$);
1397         });
<span class="line-modified">1398         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1399             boolean r = vh.weakCompareAndSetPlain($value1$, Void.class);
1400         });
1401         // Incorrect arity
1402         checkWMTE(() -&gt; { // 0
1403             boolean r = vh.weakCompareAndSetPlain();
1404         });
1405         checkWMTE(() -&gt; { // &gt;
1406             boolean r = vh.weakCompareAndSetPlain($value1$, $value1$, Void.class);
1407         });
1408 
1409 
1410         // WeakCompareAndSetVolatile
1411         // Incorrect argument types
<span class="line-modified">1412         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1413             boolean r = vh.weakCompareAndSet(Void.class, $value1$);
1414         });
<span class="line-modified">1415         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1416             boolean r = vh.weakCompareAndSet($value1$, Void.class);
1417         });
1418         // Incorrect arity
1419         checkWMTE(() -&gt; { // 0
1420             boolean r = vh.weakCompareAndSet();
1421         });
1422         checkWMTE(() -&gt; { // &gt;
1423             boolean r = vh.weakCompareAndSet($value1$, $value1$, Void.class);
1424         });
1425 
1426 
1427         // WeakCompareAndSetAcquire
1428         // Incorrect argument types
<span class="line-modified">1429         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1430             boolean r = vh.weakCompareAndSetAcquire(Void.class, $value1$);
1431         });
<span class="line-modified">1432         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1433             boolean r = vh.weakCompareAndSetAcquire($value1$, Void.class);
1434         });
1435         // Incorrect arity
1436         checkWMTE(() -&gt; { // 0
1437             boolean r = vh.weakCompareAndSetAcquire();
1438         });
1439         checkWMTE(() -&gt; { // &gt;
1440             boolean r = vh.weakCompareAndSetAcquire($value1$, $value1$, Void.class);
1441         });
1442 
1443 
1444         // WeakCompareAndSetRelease
1445         // Incorrect argument types
<span class="line-modified">1446         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1447             boolean r = vh.weakCompareAndSetRelease(Void.class, $value1$);
1448         });
<span class="line-modified">1449         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1450             boolean r = vh.weakCompareAndSetRelease($value1$, Void.class);
1451         });
1452         // Incorrect arity
1453         checkWMTE(() -&gt; { // 0
1454             boolean r = vh.weakCompareAndSetRelease();
1455         });
1456         checkWMTE(() -&gt; { // &gt;
1457             boolean r = vh.weakCompareAndSetRelease($value1$, $value1$, Void.class);
1458         });
1459 
1460 
1461         // CompareAndExchange
1462         // Incorrect argument types
<span class="line-modified">1463         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1464             $type$ x = ($type$) vh.compareAndExchange(Void.class, $value1$);
1465         });
<span class="line-modified">1466         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1467             $type$ x = ($type$) vh.compareAndExchange($value1$, Void.class);
1468         });
1469         // Incorrect return type
<span class="line-modified">1470         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1471             Void r = (Void) vh.compareAndExchange($value1$, $value1$);
1472         });
1473         checkWMTE(() -&gt; { // primitive class
1474             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchange($value1$, $value1$);
1475         });
1476         // Incorrect arity
1477         checkWMTE(() -&gt; { // 0
1478             $type$ x = ($type$) vh.compareAndExchange();
1479         });
1480         checkWMTE(() -&gt; { // &gt;
1481             $type$ x = ($type$) vh.compareAndExchange($value1$, $value1$, Void.class);
1482         });
1483 
1484 
1485         // CompareAndExchangeAcquire
1486         // Incorrect argument types
<span class="line-modified">1487         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1488             $type$ x = ($type$) vh.compareAndExchangeAcquire(Void.class, $value1$);
1489         });
<span class="line-modified">1490         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1491             $type$ x = ($type$) vh.compareAndExchangeAcquire($value1$, Void.class);
1492         });
1493         // Incorrect return type
<span class="line-modified">1494         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1495             Void r = (Void) vh.compareAndExchangeAcquire($value1$, $value1$);
1496         });
1497         checkWMTE(() -&gt; { // primitive class
1498             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeAcquire($value1$, $value1$);
1499         });
1500         // Incorrect arity
1501         checkWMTE(() -&gt; { // 0
1502             $type$ x = ($type$) vh.compareAndExchangeAcquire();
1503         });
1504         checkWMTE(() -&gt; { // &gt;
1505             $type$ x = ($type$) vh.compareAndExchangeAcquire($value1$, $value1$, Void.class);
1506         });
1507 
1508 
1509         // CompareAndExchangeRelease
1510         // Incorrect argument types
<span class="line-modified">1511         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1512             $type$ x = ($type$) vh.compareAndExchangeRelease(Void.class, $value1$);
1513         });
<span class="line-modified">1514         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1515             $type$ x = ($type$) vh.compareAndExchangeRelease($value1$, Void.class);
1516         });
1517         // Incorrect return type
<span class="line-modified">1518         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1519             Void r = (Void) vh.compareAndExchangeRelease($value1$, $value1$);
1520         });
1521         checkWMTE(() -&gt; { // primitive class
1522             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeRelease($value1$, $value1$);
1523         });
1524         // Incorrect arity
1525         checkWMTE(() -&gt; { // 0
1526             $type$ x = ($type$) vh.compareAndExchangeRelease();
1527         });
1528         checkWMTE(() -&gt; { // &gt;
1529             $type$ x = ($type$) vh.compareAndExchangeRelease($value1$, $value1$, Void.class);
1530         });
1531 
1532 
1533         // GetAndSet
1534         // Incorrect argument types
<span class="line-modified">1535         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1536             $type$ x = ($type$) vh.getAndSet(Void.class);
1537         });
1538         // Incorrect return type
<span class="line-modified">1539         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1540             Void r = (Void) vh.getAndSet($value1$);
1541         });
1542         checkWMTE(() -&gt; { // primitive class
1543             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSet($value1$);
1544         });
1545         // Incorrect arity
1546         checkWMTE(() -&gt; { // 0
1547             $type$ x = ($type$) vh.getAndSet();
1548         });
1549         checkWMTE(() -&gt; { // &gt;
1550             $type$ x = ($type$) vh.getAndSet($value1$, Void.class);
1551         });
1552 
1553 
1554         // GetAndSetAcquire
1555         // Incorrect argument types
<span class="line-modified">1556         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1557             $type$ x = ($type$) vh.getAndSetAcquire(Void.class);
1558         });
1559         // Incorrect return type
<span class="line-modified">1560         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1561             Void r = (Void) vh.getAndSetAcquire($value1$);
1562         });
1563         checkWMTE(() -&gt; { // primitive class
1564             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetAcquire($value1$);
1565         });
1566         // Incorrect arity
1567         checkWMTE(() -&gt; { // 0
1568             $type$ x = ($type$) vh.getAndSetAcquire();
1569         });
1570         checkWMTE(() -&gt; { // &gt;
1571             $type$ x = ($type$) vh.getAndSetAcquire($value1$, Void.class);
1572         });
1573 
1574 
1575         // GetAndSetRelease
1576         // Incorrect argument types
<span class="line-modified">1577         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1578             $type$ x = ($type$) vh.getAndSetRelease(Void.class);
1579         });
1580         // Incorrect return type
<span class="line-modified">1581         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1582             Void r = (Void) vh.getAndSetRelease($value1$);
1583         });
1584         checkWMTE(() -&gt; { // primitive class
1585             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetRelease($value1$);
1586         });
1587         // Incorrect arity
1588         checkWMTE(() -&gt; { // 0
1589             $type$ x = ($type$) vh.getAndSetRelease();
1590         });
1591         checkWMTE(() -&gt; { // &gt;
1592             $type$ x = ($type$) vh.getAndSetRelease($value1$, Void.class);
1593         });
1594 #end[CAS]
1595 
1596 #if[AtomicAdd]
1597         // GetAndAdd
1598         // Incorrect argument types
<span class="line-modified">1599         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1600             $type$ x = ($type$) vh.getAndAdd(Void.class);
1601         });
1602         // Incorrect return type
<span class="line-modified">1603         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1604             Void r = (Void) vh.getAndAdd($value1$);
1605         });
1606         checkWMTE(() -&gt; { // primitive class
1607             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAdd($value1$);
1608         });
1609         // Incorrect arity
1610         checkWMTE(() -&gt; { // 0
1611             $type$ x = ($type$) vh.getAndAdd();
1612         });
1613         checkWMTE(() -&gt; { // &gt;
1614             $type$ x = ($type$) vh.getAndAdd($value1$, Void.class);
1615         });
1616 
1617 
1618         // GetAndAddAcquire
1619         // Incorrect argument types
<span class="line-modified">1620         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1621             $type$ x = ($type$) vh.getAndAddAcquire(Void.class);
1622         });
1623         // Incorrect return type
<span class="line-modified">1624         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1625             Void r = (Void) vh.getAndAddAcquire($value1$);
1626         });
1627         checkWMTE(() -&gt; { // primitive class
1628             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddAcquire($value1$);
1629         });
1630         // Incorrect arity
1631         checkWMTE(() -&gt; { // 0
1632             $type$ x = ($type$) vh.getAndAddAcquire();
1633         });
1634         checkWMTE(() -&gt; { // &gt;
1635             $type$ x = ($type$) vh.getAndAddAcquire($value1$, Void.class);
1636         });
1637 
1638 
1639         // GetAndAddRelease
1640         // Incorrect argument types
<span class="line-modified">1641         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1642             $type$ x = ($type$) vh.getAndAddRelease(Void.class);
1643         });
1644         // Incorrect return type
<span class="line-modified">1645         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1646             Void r = (Void) vh.getAndAddRelease($value1$);
1647         });
1648         checkWMTE(() -&gt; { // primitive class
1649             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddRelease($value1$);
1650         });
1651         // Incorrect arity
1652         checkWMTE(() -&gt; { // 0
1653             $type$ x = ($type$) vh.getAndAddRelease();
1654         });
1655         checkWMTE(() -&gt; { // &gt;
1656             $type$ x = ($type$) vh.getAndAddRelease($value1$, Void.class);
1657         });
1658 #end[AtomicAdd]
1659 
1660 #if[Bitwise]
1661         // GetAndBitwiseOr
1662         // Incorrect argument types
<span class="line-modified">1663         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1664             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class);
1665         });
1666         // Incorrect return type
<span class="line-modified">1667         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1668             Void r = (Void) vh.getAndBitwiseOr($value1$);
1669         });
1670         checkWMTE(() -&gt; { // primitive class
1671             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr($value1$);
1672         });
1673         // Incorrect arity
1674         checkWMTE(() -&gt; { // 0
1675             $type$ x = ($type$) vh.getAndBitwiseOr();
1676         });
1677         checkWMTE(() -&gt; { // &gt;
1678             $type$ x = ($type$) vh.getAndBitwiseOr($value1$, Void.class);
1679         });
1680 
1681 
1682         // GetAndBitwiseOrAcquire
1683         // Incorrect argument types
<span class="line-modified">1684         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1685             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(Void.class);
1686         });
1687         // Incorrect return type
<span class="line-modified">1688         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1689             Void r = (Void) vh.getAndBitwiseOrAcquire($value1$);
1690         });
1691         checkWMTE(() -&gt; { // primitive class
1692             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrAcquire($value1$);
1693         });
1694         // Incorrect arity
1695         checkWMTE(() -&gt; { // 0
1696             $type$ x = ($type$) vh.getAndBitwiseOrAcquire();
1697         });
1698         checkWMTE(() -&gt; { // &gt;
1699             $type$ x = ($type$) vh.getAndBitwiseOrAcquire($value1$, Void.class);
1700         });
1701 
1702 
1703         // GetAndBitwiseOrReleaseRelease
1704         // Incorrect argument types
<span class="line-modified">1705         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1706             $type$ x = ($type$) vh.getAndBitwiseOrRelease(Void.class);
1707         });
1708         // Incorrect return type
<span class="line-modified">1709         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1710             Void r = (Void) vh.getAndBitwiseOrRelease($value1$);
1711         });
1712         checkWMTE(() -&gt; { // primitive class
1713             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrRelease($value1$);
1714         });
1715         // Incorrect arity
1716         checkWMTE(() -&gt; { // 0
1717             $type$ x = ($type$) vh.getAndBitwiseOrRelease();
1718         });
1719         checkWMTE(() -&gt; { // &gt;
1720             $type$ x = ($type$) vh.getAndBitwiseOrRelease($value1$, Void.class);
1721         });
1722 
1723 
1724         // GetAndBitwiseAnd
1725         // Incorrect argument types
<span class="line-modified">1726         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1727             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class);
1728         });
1729         // Incorrect return type
<span class="line-modified">1730         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1731             Void r = (Void) vh.getAndBitwiseAnd($value1$);
1732         });
1733         checkWMTE(() -&gt; { // primitive class
1734             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd($value1$);
1735         });
1736         // Incorrect arity
1737         checkWMTE(() -&gt; { // 0
1738             $type$ x = ($type$) vh.getAndBitwiseAnd();
1739         });
1740         checkWMTE(() -&gt; { // &gt;
1741             $type$ x = ($type$) vh.getAndBitwiseAnd($value1$, Void.class);
1742         });
1743 
1744 
1745         // GetAndBitwiseAndAcquire
1746         // Incorrect argument types
<span class="line-modified">1747         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1748             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(Void.class);
1749         });
1750         // Incorrect return type
<span class="line-modified">1751         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1752             Void r = (Void) vh.getAndBitwiseAndAcquire($value1$);
1753         });
1754         checkWMTE(() -&gt; { // primitive class
1755             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndAcquire($value1$);
1756         });
1757         // Incorrect arity
1758         checkWMTE(() -&gt; { // 0
1759             $type$ x = ($type$) vh.getAndBitwiseAndAcquire();
1760         });
1761         checkWMTE(() -&gt; { // &gt;
1762             $type$ x = ($type$) vh.getAndBitwiseAndAcquire($value1$, Void.class);
1763         });
1764 
1765 
1766         // GetAndBitwiseAndReleaseRelease
1767         // Incorrect argument types
<span class="line-modified">1768         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1769             $type$ x = ($type$) vh.getAndBitwiseAndRelease(Void.class);
1770         });
1771         // Incorrect return type
<span class="line-modified">1772         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1773             Void r = (Void) vh.getAndBitwiseAndRelease($value1$);
1774         });
1775         checkWMTE(() -&gt; { // primitive class
1776             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndRelease($value1$);
1777         });
1778         // Incorrect arity
1779         checkWMTE(() -&gt; { // 0
1780             $type$ x = ($type$) vh.getAndBitwiseAndRelease();
1781         });
1782         checkWMTE(() -&gt; { // &gt;
1783             $type$ x = ($type$) vh.getAndBitwiseAndRelease($value1$, Void.class);
1784         });
1785 
1786 
1787         // GetAndBitwiseXor
1788         // Incorrect argument types
<span class="line-modified">1789         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1790             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class);
1791         });
1792         // Incorrect return type
<span class="line-modified">1793         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1794             Void r = (Void) vh.getAndBitwiseXor($value1$);
1795         });
1796         checkWMTE(() -&gt; { // primitive class
1797             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor($value1$);
1798         });
1799         // Incorrect arity
1800         checkWMTE(() -&gt; { // 0
1801             $type$ x = ($type$) vh.getAndBitwiseXor();
1802         });
1803         checkWMTE(() -&gt; { // &gt;
1804             $type$ x = ($type$) vh.getAndBitwiseXor($value1$, Void.class);
1805         });
1806 
1807 
1808         // GetAndBitwiseXorAcquire
1809         // Incorrect argument types
<span class="line-modified">1810         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1811             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(Void.class);
1812         });
1813         // Incorrect return type
<span class="line-modified">1814         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1815             Void r = (Void) vh.getAndBitwiseXorAcquire($value1$);
1816         });
1817         checkWMTE(() -&gt; { // primitive class
1818             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorAcquire($value1$);
1819         });
1820         // Incorrect arity
1821         checkWMTE(() -&gt; { // 0
1822             $type$ x = ($type$) vh.getAndBitwiseXorAcquire();
1823         });
1824         checkWMTE(() -&gt; { // &gt;
1825             $type$ x = ($type$) vh.getAndBitwiseXorAcquire($value1$, Void.class);
1826         });
1827 
1828 
1829         // GetAndBitwiseXorReleaseRelease
1830         // Incorrect argument types
<span class="line-modified">1831         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1832             $type$ x = ($type$) vh.getAndBitwiseXorRelease(Void.class);
1833         });
1834         // Incorrect return type
<span class="line-modified">1835         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1836             Void r = (Void) vh.getAndBitwiseXorRelease($value1$);
1837         });
1838         checkWMTE(() -&gt; { // primitive class
1839             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorRelease($value1$);
1840         });
1841         // Incorrect arity
1842         checkWMTE(() -&gt; { // 0
1843             $type$ x = ($type$) vh.getAndBitwiseXorRelease();
1844         });
1845         checkWMTE(() -&gt; { // &gt;
1846             $type$ x = ($type$) vh.getAndBitwiseXorRelease($value1$, Void.class);
1847         });
1848 #end[Bitwise]
1849     }
1850 
1851     static void testStaticFieldWrongMethodType(Handles hs) throws Throwable {
1852         int i = 0;
1853 
1854         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1855             // Incorrect return type
<span class="line-modified">1856             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1857                 Void x = (Void) hs.get(am, methodType(Void.class)).
1858                     invokeExact();
1859             });
1860             checkWMTE(() -&gt; { // primitive class
1861                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class)).
1862                     invokeExact();
1863             });
1864             // Incorrect arity
1865             checkWMTE(() -&gt; { // &gt;
1866                 $type$ x = ($type$) hs.get(am, methodType(Class.class)).
1867                     invokeExact(Void.class);
1868             });
1869         }
1870 
1871         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
<span class="line-modified">1872             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1873                 hs.get(am, methodType(void.class, Class.class)).
1874                     invokeExact(Void.class);
1875             });
1876             // Incorrect arity
1877             checkWMTE(() -&gt; { // 0
1878                 hs.get(am, methodType(void.class)).
1879                     invokeExact();
1880             });
1881             checkWMTE(() -&gt; { // &gt;
1882                 hs.get(am, methodType(void.class, $type$.class, Class.class)).
1883                     invokeExact($value1$, Void.class);
1884             });
1885         }
1886 #if[CAS]
1887         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1888             // Incorrect argument types
<span class="line-modified">1889             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1890                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, $type$.class)).
1891                     invokeExact(Void.class, $value1$);
1892             });
<span class="line-modified">1893             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1894                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$.class, Class.class)).
1895                     invokeExact($value1$, Void.class);
1896             });
1897             // Incorrect arity
1898             checkWMTE(() -&gt; { // 0
1899                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1900                     invokeExact();
1901             });
1902             checkWMTE(() -&gt; { // &gt;
1903                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$.class, $type$.class, Class.class)).
1904                     invokeExact($value1$, $value1$, Void.class);
1905             });
1906         }
1907 
1908         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1909             // Incorrect argument types
<span class="line-modified">1910             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1911                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1912                     invokeExact(Void.class, $value1$);
1913             });
<span class="line-modified">1914             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1915                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
1916                     invokeExact($value1$, Void.class);
1917             });
1918             // Incorrect return type
<span class="line-modified">1919             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1920                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class, $type$.class)).
1921                     invokeExact($value1$, $value1$);
1922             });
1923             checkWMTE(() -&gt; { // primitive class
1924                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class, $type$.class)).
1925                     invokeExact($value1$, $value1$);
1926             });
1927             // Incorrect arity
1928             checkWMTE(() -&gt; { // 0
1929                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1930                     invokeExact();
1931             });
1932             checkWMTE(() -&gt; { // &gt;
1933                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, $type$.class, Class.class)).
1934                     invokeExact($value1$, $value1$, Void.class);
1935             });
1936         }
1937 
1938         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1939             // Incorrect argument types
<span class="line-modified">1940             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1941                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1942                     invokeExact(Void.class);
1943             });
1944             // Incorrect return type
<span class="line-modified">1945             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1946                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class)).
1947                     invokeExact($value1$);
1948             });
1949             checkWMTE(() -&gt; { // primitive class
1950                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class)).
1951                     invokeExact($value1$);
1952             });
1953             // Incorrect arity
1954             checkWMTE(() -&gt; { // 0
1955                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1956                     invokeExact();
1957             });
1958             checkWMTE(() -&gt; { // &gt;
1959                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
1960                     invokeExact($value1$, Void.class);
1961             });
1962         }
1963 #end[CAS]
1964 
1965 #if[AtomicAdd]
1966         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1967             // Incorrect argument types
<span class="line-modified">1968             check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1969                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1970                     invokeExact(Void.class);
1971             });
1972             // Incorrect return type
<span class="line-modified">1973             check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
1974                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class)).
1975                     invokeExact($value1$);
1976             });
1977             checkWMTE(() -&gt; { // primitive class
1978                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class)).
1979                     invokeExact($value1$);
1980             });
1981             // Incorrect arity
1982             checkWMTE(() -&gt; { // 0
1983                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1984                     invokeExact();
1985             });
1986             checkWMTE(() -&gt; { // &gt;
1987                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
1988                     invokeExact($value1$, Void.class);
1989             });
1990         }
1991 #end[AtomicAdd]
1992 
1993 #if[Bitwise]
1994         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
1995             // Incorrect argument types
<span class="line-modified">1996             check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
1997                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1998                     invokeExact(Void.class);
1999             });
2000             // Incorrect return type
<span class="line-modified">2001             check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2002                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class)).
2003                     invokeExact($value1$);
2004             });
2005             checkWMTE(() -&gt; { // primitive class
2006                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class)).
2007                     invokeExact($value1$);
2008             });
2009             // Incorrect arity
2010             checkWMTE(() -&gt; { // 0
2011                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
2012                     invokeExact();
2013             });
2014             checkWMTE(() -&gt; { // &gt;
2015                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
2016                     invokeExact($value1$, Void.class);
2017             });
2018         }
2019 #end[Bitwise]
2020     }
2021 
2022 
2023     static void testArrayWrongMethodType(VarHandle vh) throws Throwable {
2024         $type$[] array = new $type$[10];
2025         Arrays.fill(array, $value1$);
2026 
2027         // Get
2028         // Incorrect argument types
2029         checkNPE(() -&gt; { // null array
2030             $type$ x = ($type$) vh.get(null, 0);
2031         });
2032         checkCCE(() -&gt; { // array reference class
2033             $type$ x = ($type$) vh.get(Void.class, 0);
2034         });
2035         checkWMTE(() -&gt; { // array primitive class
2036             $type$ x = ($type$) vh.get(0, 0);
2037         });
2038         checkWMTE(() -&gt; { // index reference class
2039             $type$ x = ($type$) vh.get(array, Void.class);
2040         });
2041         // Incorrect return type
<span class="line-modified">2042         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2043             Void x = (Void) vh.get(array, 0);
2044         });
2045         checkWMTE(() -&gt; { // primitive class
2046             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.get(array, 0);
2047         });
2048         // Incorrect arity
2049         checkWMTE(() -&gt; { // 0
2050             $type$ x = ($type$) vh.get();
2051         });
2052         checkWMTE(() -&gt; { // &gt;
2053             $type$ x = ($type$) vh.get(array, 0, Void.class);
2054         });
2055 
2056 
2057         // Set
2058         // Incorrect argument types
2059         checkNPE(() -&gt; { // null array
2060             vh.set(null, 0, $value1$);
2061         });
2062         checkCCE(() -&gt; { // array reference class
2063             vh.set(Void.class, 0, $value1$);
2064         });
<span class="line-modified">2065         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2066             vh.set(array, 0, Void.class);
2067         });
2068         checkWMTE(() -&gt; { // receiver primitive class
2069             vh.set(0, 0, $value1$);
2070         });
2071         checkWMTE(() -&gt; { // index reference class
2072             vh.set(array, Void.class, $value1$);
2073         });
2074         // Incorrect arity
2075         checkWMTE(() -&gt; { // 0
2076             vh.set();
2077         });
2078         checkWMTE(() -&gt; { // &gt;
2079             vh.set(array, 0, $value1$, Void.class);
2080         });
2081 
2082 
2083         // GetVolatile
2084         // Incorrect argument types
2085         checkNPE(() -&gt; { // null array
2086             $type$ x = ($type$) vh.getVolatile(null, 0);
2087         });
2088         checkCCE(() -&gt; { // array reference class
2089             $type$ x = ($type$) vh.getVolatile(Void.class, 0);
2090         });
2091         checkWMTE(() -&gt; { // array primitive class
2092             $type$ x = ($type$) vh.getVolatile(0, 0);
2093         });
2094         checkWMTE(() -&gt; { // index reference class
2095             $type$ x = ($type$) vh.getVolatile(array, Void.class);
2096         });
2097         // Incorrect return type
<span class="line-modified">2098         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2099             Void x = (Void) vh.getVolatile(array, 0);
2100         });
2101         checkWMTE(() -&gt; { // primitive class
2102             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getVolatile(array, 0);
2103         });
2104         // Incorrect arity
2105         checkWMTE(() -&gt; { // 0
2106             $type$ x = ($type$) vh.getVolatile();
2107         });
2108         checkWMTE(() -&gt; { // &gt;
2109             $type$ x = ($type$) vh.getVolatile(array, 0, Void.class);
2110         });
2111 
2112 
2113         // SetVolatile
2114         // Incorrect argument types
2115         checkNPE(() -&gt; { // null array
2116             vh.setVolatile(null, 0, $value1$);
2117         });
2118         checkCCE(() -&gt; { // array reference class
2119             vh.setVolatile(Void.class, 0, $value1$);
2120         });
<span class="line-modified">2121         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2122             vh.setVolatile(array, 0, Void.class);
2123         });
2124         checkWMTE(() -&gt; { // receiver primitive class
2125             vh.setVolatile(0, 0, $value1$);
2126         });
2127         checkWMTE(() -&gt; { // index reference class
2128             vh.setVolatile(array, Void.class, $value1$);
2129         });
2130         // Incorrect arity
2131         checkWMTE(() -&gt; { // 0
2132             vh.setVolatile();
2133         });
2134         checkWMTE(() -&gt; { // &gt;
2135             vh.setVolatile(array, 0, $value1$, Void.class);
2136         });
2137 
2138 
2139         // GetOpaque
2140         // Incorrect argument types
2141         checkNPE(() -&gt; { // null array
2142             $type$ x = ($type$) vh.getOpaque(null, 0);
2143         });
2144         checkCCE(() -&gt; { // array reference class
2145             $type$ x = ($type$) vh.getOpaque(Void.class, 0);
2146         });
2147         checkWMTE(() -&gt; { // array primitive class
2148             $type$ x = ($type$) vh.getOpaque(0, 0);
2149         });
2150         checkWMTE(() -&gt; { // index reference class
2151             $type$ x = ($type$) vh.getOpaque(array, Void.class);
2152         });
2153         // Incorrect return type
<span class="line-modified">2154         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2155             Void x = (Void) vh.getOpaque(array, 0);
2156         });
2157         checkWMTE(() -&gt; { // primitive class
2158             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getOpaque(array, 0);
2159         });
2160         // Incorrect arity
2161         checkWMTE(() -&gt; { // 0
2162             $type$ x = ($type$) vh.getOpaque();
2163         });
2164         checkWMTE(() -&gt; { // &gt;
2165             $type$ x = ($type$) vh.getOpaque(array, 0, Void.class);
2166         });
2167 
2168 
2169         // SetOpaque
2170         // Incorrect argument types
2171         checkNPE(() -&gt; { // null array
2172             vh.setOpaque(null, 0, $value1$);
2173         });
2174         checkCCE(() -&gt; { // array reference class
2175             vh.setOpaque(Void.class, 0, $value1$);
2176         });
<span class="line-modified">2177         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2178             vh.setOpaque(array, 0, Void.class);
2179         });
2180         checkWMTE(() -&gt; { // receiver primitive class
2181             vh.setOpaque(0, 0, $value1$);
2182         });
2183         checkWMTE(() -&gt; { // index reference class
2184             vh.setOpaque(array, Void.class, $value1$);
2185         });
2186         // Incorrect arity
2187         checkWMTE(() -&gt; { // 0
2188             vh.setOpaque();
2189         });
2190         checkWMTE(() -&gt; { // &gt;
2191             vh.setOpaque(array, 0, $value1$, Void.class);
2192         });
2193 
2194 
2195         // GetAcquire
2196         // Incorrect argument types
2197         checkNPE(() -&gt; { // null array
2198             $type$ x = ($type$) vh.getAcquire(null, 0);
2199         });
2200         checkCCE(() -&gt; { // array reference class
2201             $type$ x = ($type$) vh.getAcquire(Void.class, 0);
2202         });
2203         checkWMTE(() -&gt; { // array primitive class
2204             $type$ x = ($type$) vh.getAcquire(0, 0);
2205         });
2206         checkWMTE(() -&gt; { // index reference class
2207             $type$ x = ($type$) vh.getAcquire(array, Void.class);
2208         });
2209         // Incorrect return type
<span class="line-modified">2210         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2211             Void x = (Void) vh.getAcquire(array, 0);
2212         });
2213         checkWMTE(() -&gt; { // primitive class
2214             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAcquire(array, 0);
2215         });
2216         // Incorrect arity
2217         checkWMTE(() -&gt; { // 0
2218             $type$ x = ($type$) vh.getAcquire();
2219         });
2220         checkWMTE(() -&gt; { // &gt;
2221             $type$ x = ($type$) vh.getAcquire(array, 0, Void.class);
2222         });
2223 
2224 
2225         // SetRelease
2226         // Incorrect argument types
2227         checkNPE(() -&gt; { // null array
2228             vh.setRelease(null, 0, $value1$);
2229         });
2230         checkCCE(() -&gt; { // array reference class
2231             vh.setRelease(Void.class, 0, $value1$);
2232         });
<span class="line-modified">2233         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2234             vh.setRelease(array, 0, Void.class);
2235         });
2236         checkWMTE(() -&gt; { // receiver primitive class
2237             vh.setRelease(0, 0, $value1$);
2238         });
2239         checkWMTE(() -&gt; { // index reference class
2240             vh.setRelease(array, Void.class, $value1$);
2241         });
2242         // Incorrect arity
2243         checkWMTE(() -&gt; { // 0
2244             vh.setRelease();
2245         });
2246         checkWMTE(() -&gt; { // &gt;
2247             vh.setRelease(array, 0, $value1$, Void.class);
2248         });
2249 
2250 
2251 #if[CAS]
2252         // CompareAndSet
2253         // Incorrect argument types
2254         checkNPE(() -&gt; { // null receiver
2255             boolean r = vh.compareAndSet(null, 0, $value1$, $value1$);
2256         });
2257         checkCCE(() -&gt; { // receiver reference class
2258             boolean r = vh.compareAndSet(Void.class, 0, $value1$, $value1$);
2259         });
<span class="line-modified">2260         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2261             boolean r = vh.compareAndSet(array, 0, Void.class, $value1$);
2262         });
<span class="line-modified">2263         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2264             boolean r = vh.compareAndSet(array, 0, $value1$, Void.class);
2265         });
2266         checkWMTE(() -&gt; { // receiver primitive class
2267             boolean r = vh.compareAndSet(0, 0, $value1$, $value1$);
2268         });
2269         checkWMTE(() -&gt; { // index reference class
2270             boolean r = vh.compareAndSet(array, Void.class, $value1$, $value1$);
2271         });
2272         // Incorrect arity
2273         checkWMTE(() -&gt; { // 0
2274             boolean r = vh.compareAndSet();
2275         });
2276         checkWMTE(() -&gt; { // &gt;
2277             boolean r = vh.compareAndSet(array, 0, $value1$, $value1$, Void.class);
2278         });
2279 
2280 
2281         // WeakCompareAndSet
2282         // Incorrect argument types
2283         checkNPE(() -&gt; { // null receiver
2284             boolean r = vh.weakCompareAndSetPlain(null, 0, $value1$, $value1$);
2285         });
2286         checkCCE(() -&gt; { // receiver reference class
2287             boolean r = vh.weakCompareAndSetPlain(Void.class, 0, $value1$, $value1$);
2288         });
<span class="line-modified">2289         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2290             boolean r = vh.weakCompareAndSetPlain(array, 0, Void.class, $value1$);
2291         });
<span class="line-modified">2292         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2293             boolean r = vh.weakCompareAndSetPlain(array, 0, $value1$, Void.class);
2294         });
2295         checkWMTE(() -&gt; { // receiver primitive class
2296             boolean r = vh.weakCompareAndSetPlain(0, 0, $value1$, $value1$);
2297         });
2298         checkWMTE(() -&gt; { // index reference class
2299             boolean r = vh.weakCompareAndSetPlain(array, Void.class, $value1$, $value1$);
2300         });
2301         // Incorrect arity
2302         checkWMTE(() -&gt; { // 0
2303             boolean r = vh.weakCompareAndSetPlain();
2304         });
2305         checkWMTE(() -&gt; { // &gt;
2306             boolean r = vh.weakCompareAndSetPlain(array, 0, $value1$, $value1$, Void.class);
2307         });
2308 
2309 
2310         // WeakCompareAndSetVolatile
2311         // Incorrect argument types
2312         checkNPE(() -&gt; { // null receiver
2313             boolean r = vh.weakCompareAndSet(null, 0, $value1$, $value1$);
2314         });
2315         checkCCE(() -&gt; { // receiver reference class
2316             boolean r = vh.weakCompareAndSet(Void.class, 0, $value1$, $value1$);
2317         });
<span class="line-modified">2318         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2319             boolean r = vh.weakCompareAndSet(array, 0, Void.class, $value1$);
2320         });
<span class="line-modified">2321         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2322             boolean r = vh.weakCompareAndSet(array, 0, $value1$, Void.class);
2323         });
2324         checkWMTE(() -&gt; { // receiver primitive class
2325             boolean r = vh.weakCompareAndSet(0, 0, $value1$, $value1$);
2326         });
2327         checkWMTE(() -&gt; { // index reference class
2328             boolean r = vh.weakCompareAndSet(array, Void.class, $value1$, $value1$);
2329         });
2330         // Incorrect arity
2331         checkWMTE(() -&gt; { // 0
2332             boolean r = vh.weakCompareAndSet();
2333         });
2334         checkWMTE(() -&gt; { // &gt;
2335             boolean r = vh.weakCompareAndSet(array, 0, $value1$, $value1$, Void.class);
2336         });
2337 
2338 
2339         // WeakCompareAndSetAcquire
2340         // Incorrect argument types
2341         checkNPE(() -&gt; { // null receiver
2342             boolean r = vh.weakCompareAndSetAcquire(null, 0, $value1$, $value1$);
2343         });
2344         checkCCE(() -&gt; { // receiver reference class
2345             boolean r = vh.weakCompareAndSetAcquire(Void.class, 0, $value1$, $value1$);
2346         });
<span class="line-modified">2347         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2348             boolean r = vh.weakCompareAndSetAcquire(array, 0, Void.class, $value1$);
2349         });
<span class="line-modified">2350         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2351             boolean r = vh.weakCompareAndSetAcquire(array, 0, $value1$, Void.class);
2352         });
2353         checkWMTE(() -&gt; { // receiver primitive class
2354             boolean r = vh.weakCompareAndSetAcquire(0, 0, $value1$, $value1$);
2355         });
2356         checkWMTE(() -&gt; { // index reference class
2357             boolean r = vh.weakCompareAndSetAcquire(array, Void.class, $value1$, $value1$);
2358         });
2359         // Incorrect arity
2360         checkWMTE(() -&gt; { // 0
2361             boolean r = vh.weakCompareAndSetAcquire();
2362         });
2363         checkWMTE(() -&gt; { // &gt;
2364             boolean r = vh.weakCompareAndSetAcquire(array, 0, $value1$, $value1$, Void.class);
2365         });
2366 
2367 
2368         // WeakCompareAndSetRelease
2369         // Incorrect argument types
2370         checkNPE(() -&gt; { // null receiver
2371             boolean r = vh.weakCompareAndSetRelease(null, 0, $value1$, $value1$);
2372         });
2373         checkCCE(() -&gt; { // receiver reference class
2374             boolean r = vh.weakCompareAndSetRelease(Void.class, 0, $value1$, $value1$);
2375         });
<span class="line-modified">2376         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2377             boolean r = vh.weakCompareAndSetRelease(array, 0, Void.class, $value1$);
2378         });
<span class="line-modified">2379         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2380             boolean r = vh.weakCompareAndSetRelease(array, 0, $value1$, Void.class);
2381         });
2382         checkWMTE(() -&gt; { // receiver primitive class
2383             boolean r = vh.weakCompareAndSetRelease(0, 0, $value1$, $value1$);
2384         });
2385         checkWMTE(() -&gt; { // index reference class
2386             boolean r = vh.weakCompareAndSetRelease(array, Void.class, $value1$, $value1$);
2387         });
2388         // Incorrect arity
2389         checkWMTE(() -&gt; { // 0
2390             boolean r = vh.weakCompareAndSetRelease();
2391         });
2392         checkWMTE(() -&gt; { // &gt;
2393             boolean r = vh.weakCompareAndSetRelease(array, 0, $value1$, $value1$, Void.class);
2394         });
2395 
2396 
2397         // CompareAndExchange
2398         // Incorrect argument types
2399         checkNPE(() -&gt; { // null receiver
2400             $type$ x = ($type$) vh.compareAndExchange(null, 0, $value1$, $value1$);
2401         });
2402         checkCCE(() -&gt; { // array reference class
2403             $type$ x = ($type$) vh.compareAndExchange(Void.class, 0, $value1$, $value1$);
2404         });
<span class="line-modified">2405         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2406             $type$ x = ($type$) vh.compareAndExchange(array, 0, Void.class, $value1$);
2407         });
<span class="line-modified">2408         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2409             $type$ x = ($type$) vh.compareAndExchange(array, 0, $value1$, Void.class);
2410         });
2411         checkWMTE(() -&gt; { // array primitive class
2412             $type$ x = ($type$) vh.compareAndExchange(0, 0, $value1$, $value1$);
2413         });
2414         checkWMTE(() -&gt; { // index reference class
2415             $type$ x = ($type$) vh.compareAndExchange(array, Void.class, $value1$, $value1$);
2416         });
2417         // Incorrect return type
<span class="line-modified">2418         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2419             Void r = (Void) vh.compareAndExchange(array, 0, $value1$, $value1$);
2420         });
2421         checkWMTE(() -&gt; { // primitive class
2422             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchange(array, 0, $value1$, $value1$);
2423         });
2424         // Incorrect arity
2425         checkWMTE(() -&gt; { // 0
2426             $type$ x = ($type$) vh.compareAndExchange();
2427         });
2428         checkWMTE(() -&gt; { // &gt;
2429             $type$ x = ($type$) vh.compareAndExchange(array, 0, $value1$, $value1$, Void.class);
2430         });
2431 
2432 
2433         // CompareAndExchangeAcquire
2434         // Incorrect argument types
2435         checkNPE(() -&gt; { // null receiver
2436             $type$ x = ($type$) vh.compareAndExchangeAcquire(null, 0, $value1$, $value1$);
2437         });
2438         checkCCE(() -&gt; { // array reference class
2439             $type$ x = ($type$) vh.compareAndExchangeAcquire(Void.class, 0, $value1$, $value1$);
2440         });
<span class="line-modified">2441         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2442             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, 0, Void.class, $value1$);
2443         });
<span class="line-modified">2444         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2445             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, 0, $value1$, Void.class);
2446         });
2447         checkWMTE(() -&gt; { // array primitive class
2448             $type$ x = ($type$) vh.compareAndExchangeAcquire(0, 0, $value1$, $value1$);
2449         });
2450         checkWMTE(() -&gt; { // index reference class
2451             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, Void.class, $value1$, $value1$);
2452         });
2453         // Incorrect return type
<span class="line-modified">2454         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2455             Void r = (Void) vh.compareAndExchangeAcquire(array, 0, $value1$, $value1$);
2456         });
2457         checkWMTE(() -&gt; { // primitive class
2458             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeAcquire(array, 0, $value1$, $value1$);
2459         });
2460         // Incorrect arity
2461         checkWMTE(() -&gt; { // 0
2462             $type$ x = ($type$) vh.compareAndExchangeAcquire();
2463         });
2464         checkWMTE(() -&gt; { // &gt;
2465             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, 0, $value1$, $value1$, Void.class);
2466         });
2467 
2468 
2469         // CompareAndExchangeRelease
2470         // Incorrect argument types
2471         checkNPE(() -&gt; { // null receiver
2472             $type$ x = ($type$) vh.compareAndExchangeRelease(null, 0, $value1$, $value1$);
2473         });
2474         checkCCE(() -&gt; { // array reference class
2475             $type$ x = ($type$) vh.compareAndExchangeRelease(Void.class, 0, $value1$, $value1$);
2476         });
<span class="line-modified">2477         check{#if[String]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2478             $type$ x = ($type$) vh.compareAndExchangeRelease(array, 0, Void.class, $value1$);
2479         });
<span class="line-modified">2480         check{#if[String]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2481             $type$ x = ($type$) vh.compareAndExchangeRelease(array, 0, $value1$, Void.class);
2482         });
2483         checkWMTE(() -&gt; { // array primitive class
2484             $type$ x = ($type$) vh.compareAndExchangeRelease(0, 0, $value1$, $value1$);
2485         });
2486         checkWMTE(() -&gt; { // index reference class
2487             $type$ x = ($type$) vh.compareAndExchangeRelease(array, Void.class, $value1$, $value1$);
2488         });
2489         // Incorrect return type
<span class="line-modified">2490         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2491             Void r = (Void) vh.compareAndExchangeRelease(array, 0, $value1$, $value1$);
2492         });
2493         checkWMTE(() -&gt; { // primitive class
2494             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeRelease(array, 0, $value1$, $value1$);
2495         });
2496         // Incorrect arity
2497         checkWMTE(() -&gt; { // 0
2498             $type$ x = ($type$) vh.compareAndExchangeRelease();
2499         });
2500         checkWMTE(() -&gt; { // &gt;
2501             $type$ x = ($type$) vh.compareAndExchangeRelease(array, 0, $value1$, $value1$, Void.class);
2502         });
2503 
2504 
2505         // GetAndSet
2506         // Incorrect argument types
2507         checkNPE(() -&gt; { // null array
2508             $type$ x = ($type$) vh.getAndSet(null, 0, $value1$);
2509         });
2510         checkCCE(() -&gt; { // array reference class
2511             $type$ x = ($type$) vh.getAndSet(Void.class, 0, $value1$);
2512         });
<span class="line-modified">2513         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2514             $type$ x = ($type$) vh.getAndSet(array, 0, Void.class);
2515         });
2516         checkWMTE(() -&gt; { // reciarrayever primitive class
2517             $type$ x = ($type$) vh.getAndSet(0, 0, $value1$);
2518         });
2519         checkWMTE(() -&gt; { // index reference class
2520             $type$ x = ($type$) vh.getAndSet(array, Void.class, $value1$);
2521         });
2522         // Incorrect return type
<span class="line-modified">2523         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2524             Void r = (Void) vh.getAndSet(array, 0, $value1$);
2525         });
2526         checkWMTE(() -&gt; { // primitive class
2527             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSet(array, 0, $value1$);
2528         });
2529         // Incorrect arity
2530         checkWMTE(() -&gt; { // 0
2531             $type$ x = ($type$) vh.getAndSet();
2532         });
2533         checkWMTE(() -&gt; { // &gt;
2534             $type$ x = ($type$) vh.getAndSet(array, 0, $value1$, Void.class);
2535         });
2536 
2537 
2538         // GetAndSetAcquire
2539         // Incorrect argument types
2540         checkNPE(() -&gt; { // null array
2541             $type$ x = ($type$) vh.getAndSetAcquire(null, 0, $value1$);
2542         });
2543         checkCCE(() -&gt; { // array reference class
2544             $type$ x = ($type$) vh.getAndSetAcquire(Void.class, 0, $value1$);
2545         });
<span class="line-modified">2546         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2547             $type$ x = ($type$) vh.getAndSetAcquire(array, 0, Void.class);
2548         });
2549         checkWMTE(() -&gt; { // reciarrayever primitive class
2550             $type$ x = ($type$) vh.getAndSetAcquire(0, 0, $value1$);
2551         });
2552         checkWMTE(() -&gt; { // index reference class
2553             $type$ x = ($type$) vh.getAndSetAcquire(array, Void.class, $value1$);
2554         });
2555         // Incorrect return type
<span class="line-modified">2556         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2557             Void r = (Void) vh.getAndSetAcquire(array, 0, $value1$);
2558         });
2559         checkWMTE(() -&gt; { // primitive class
2560             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetAcquire(array, 0, $value1$);
2561         });
2562         // Incorrect arity
2563         checkWMTE(() -&gt; { // 0
2564             $type$ x = ($type$) vh.getAndSetAcquire();
2565         });
2566         checkWMTE(() -&gt; { // &gt;
2567             $type$ x = ($type$) vh.getAndSetAcquire(array, 0, $value1$, Void.class);
2568         });
2569 
2570 
2571         // GetAndSetRelease
2572         // Incorrect argument types
2573         checkNPE(() -&gt; { // null array
2574             $type$ x = ($type$) vh.getAndSetRelease(null, 0, $value1$);
2575         });
2576         checkCCE(() -&gt; { // array reference class
2577             $type$ x = ($type$) vh.getAndSetRelease(Void.class, 0, $value1$);
2578         });
<span class="line-modified">2579         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2580             $type$ x = ($type$) vh.getAndSetRelease(array, 0, Void.class);
2581         });
2582         checkWMTE(() -&gt; { // reciarrayever primitive class
2583             $type$ x = ($type$) vh.getAndSetRelease(0, 0, $value1$);
2584         });
2585         checkWMTE(() -&gt; { // index reference class
2586             $type$ x = ($type$) vh.getAndSetRelease(array, Void.class, $value1$);
2587         });
2588         // Incorrect return type
<span class="line-modified">2589         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2590             Void r = (Void) vh.getAndSetRelease(array, 0, $value1$);
2591         });
2592         checkWMTE(() -&gt; { // primitive class
2593             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetRelease(array, 0, $value1$);
2594         });
2595         // Incorrect arity
2596         checkWMTE(() -&gt; { // 0
2597             $type$ x = ($type$) vh.getAndSetRelease();
2598         });
2599         checkWMTE(() -&gt; { // &gt;
2600             $type$ x = ($type$) vh.getAndSetRelease(array, 0, $value1$, Void.class);
2601         });
2602 #end[CAS]
2603 
2604 #if[AtomicAdd]
2605         // GetAndAdd
2606         // Incorrect argument types
2607         checkNPE(() -&gt; { // null array
2608             $type$ x = ($type$) vh.getAndAdd(null, 0, $value1$);
2609         });
2610         checkCCE(() -&gt; { // array reference class
2611             $type$ x = ($type$) vh.getAndAdd(Void.class, 0, $value1$);
2612         });
<span class="line-modified">2613         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2614             $type$ x = ($type$) vh.getAndAdd(array, 0, Void.class);
2615         });
2616         checkWMTE(() -&gt; { // array primitive class
2617             $type$ x = ($type$) vh.getAndAdd(0, 0, $value1$);
2618         });
2619         checkWMTE(() -&gt; { // index reference class
2620             $type$ x = ($type$) vh.getAndAdd(array, Void.class, $value1$);
2621         });
2622         // Incorrect return type
<span class="line-modified">2623         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2624             Void r = (Void) vh.getAndAdd(array, 0, $value1$);
2625         });
2626         checkWMTE(() -&gt; { // primitive class
2627             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAdd(array, 0, $value1$);
2628         });
2629         // Incorrect arity
2630         checkWMTE(() -&gt; { // 0
2631             $type$ x = ($type$) vh.getAndAdd();
2632         });
2633         checkWMTE(() -&gt; { // &gt;
2634             $type$ x = ($type$) vh.getAndAdd(array, 0, $value1$, Void.class);
2635         });
2636 
2637 
2638         // GetAndAddAcquire
2639         // Incorrect argument types
2640         checkNPE(() -&gt; { // null array
2641             $type$ x = ($type$) vh.getAndAddAcquire(null, 0, $value1$);
2642         });
2643         checkCCE(() -&gt; { // array reference class
2644             $type$ x = ($type$) vh.getAndAddAcquire(Void.class, 0, $value1$);
2645         });
<span class="line-modified">2646         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2647             $type$ x = ($type$) vh.getAndAddAcquire(array, 0, Void.class);
2648         });
2649         checkWMTE(() -&gt; { // array primitive class
2650             $type$ x = ($type$) vh.getAndAddAcquire(0, 0, $value1$);
2651         });
2652         checkWMTE(() -&gt; { // index reference class
2653             $type$ x = ($type$) vh.getAndAddAcquire(array, Void.class, $value1$);
2654         });
2655         // Incorrect return type
<span class="line-modified">2656         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2657             Void r = (Void) vh.getAndAddAcquire(array, 0, $value1$);
2658         });
2659         checkWMTE(() -&gt; { // primitive class
2660             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddAcquire(array, 0, $value1$);
2661         });
2662         // Incorrect arity
2663         checkWMTE(() -&gt; { // 0
2664             $type$ x = ($type$) vh.getAndAddAcquire();
2665         });
2666         checkWMTE(() -&gt; { // &gt;
2667             $type$ x = ($type$) vh.getAndAddAcquire(array, 0, $value1$, Void.class);
2668         });
2669 
2670 
2671         // GetAndAddRelease
2672         // Incorrect argument types
2673         checkNPE(() -&gt; { // null array
2674             $type$ x = ($type$) vh.getAndAddRelease(null, 0, $value1$);
2675         });
2676         checkCCE(() -&gt; { // array reference class
2677             $type$ x = ($type$) vh.getAndAddRelease(Void.class, 0, $value1$);
2678         });
<span class="line-modified">2679         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2680             $type$ x = ($type$) vh.getAndAddRelease(array, 0, Void.class);
2681         });
2682         checkWMTE(() -&gt; { // array primitive class
2683             $type$ x = ($type$) vh.getAndAddRelease(0, 0, $value1$);
2684         });
2685         checkWMTE(() -&gt; { // index reference class
2686             $type$ x = ($type$) vh.getAndAddRelease(array, Void.class, $value1$);
2687         });
2688         // Incorrect return type
<span class="line-modified">2689         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2690             Void r = (Void) vh.getAndAddRelease(array, 0, $value1$);
2691         });
2692         checkWMTE(() -&gt; { // primitive class
2693             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddRelease(array, 0, $value1$);
2694         });
2695         // Incorrect arity
2696         checkWMTE(() -&gt; { // 0
2697             $type$ x = ($type$) vh.getAndAddRelease();
2698         });
2699         checkWMTE(() -&gt; { // &gt;
2700             $type$ x = ($type$) vh.getAndAddRelease(array, 0, $value1$, Void.class);
2701         });
2702 #end[AtomicAdd]
2703 
2704 #if[Bitwise]
2705         // GetAndBitwiseOr
2706         // Incorrect argument types
2707         checkNPE(() -&gt; { // null array
2708             $type$ x = ($type$) vh.getAndBitwiseOr(null, 0, $value1$);
2709         });
2710         checkCCE(() -&gt; { // array reference class
2711             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class, 0, $value1$);
2712         });
<span class="line-modified">2713         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2714             $type$ x = ($type$) vh.getAndBitwiseOr(array, 0, Void.class);
2715         });
2716         checkWMTE(() -&gt; { // array primitive class
2717             $type$ x = ($type$) vh.getAndBitwiseOr(0, 0, $value1$);
2718         });
2719         checkWMTE(() -&gt; { // index reference class
2720             $type$ x = ($type$) vh.getAndBitwiseOr(array, Void.class, $value1$);
2721         });
2722         // Incorrect return type
<span class="line-modified">2723         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2724             Void r = (Void) vh.getAndBitwiseOr(array, 0, $value1$);
2725         });
2726         checkWMTE(() -&gt; { // primitive class
2727             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr(array, 0, $value1$);
2728         });
2729         // Incorrect arity
2730         checkWMTE(() -&gt; { // 0
2731             $type$ x = ($type$) vh.getAndBitwiseOr();
2732         });
2733         checkWMTE(() -&gt; { // &gt;
2734             $type$ x = ($type$) vh.getAndBitwiseOr(array, 0, $value1$, Void.class);
2735         });
2736 
2737 
2738         // GetAndBitwiseOrAcquire
2739         // Incorrect argument types
2740         checkNPE(() -&gt; { // null array
2741             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(null, 0, $value1$);
2742         });
2743         checkCCE(() -&gt; { // array reference class
2744             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(Void.class, 0, $value1$);
2745         });
<span class="line-modified">2746         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2747             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(array, 0, Void.class);
2748         });
2749         checkWMTE(() -&gt; { // array primitive class
2750             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(0, 0, $value1$);
2751         });
2752         checkWMTE(() -&gt; { // index reference class
2753             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(array, Void.class, $value1$);
2754         });
2755         // Incorrect return type
<span class="line-modified">2756         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2757             Void r = (Void) vh.getAndBitwiseOrAcquire(array, 0, $value1$);
2758         });
2759         checkWMTE(() -&gt; { // primitive class
2760             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrAcquire(array, 0, $value1$);
2761         });
2762         // Incorrect arity
2763         checkWMTE(() -&gt; { // 0
2764             $type$ x = ($type$) vh.getAndBitwiseOrAcquire();
2765         });
2766         checkWMTE(() -&gt; { // &gt;
2767             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(array, 0, $value1$, Void.class);
2768         });
2769 
2770 
2771         // GetAndBitwiseOrRelease
2772         // Incorrect argument types
2773         checkNPE(() -&gt; { // null array
2774             $type$ x = ($type$) vh.getAndBitwiseOrRelease(null, 0, $value1$);
2775         });
2776         checkCCE(() -&gt; { // array reference class
2777             $type$ x = ($type$) vh.getAndBitwiseOrRelease(Void.class, 0, $value1$);
2778         });
<span class="line-modified">2779         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2780             $type$ x = ($type$) vh.getAndBitwiseOrRelease(array, 0, Void.class);
2781         });
2782         checkWMTE(() -&gt; { // array primitive class
2783             $type$ x = ($type$) vh.getAndBitwiseOrRelease(0, 0, $value1$);
2784         });
2785         checkWMTE(() -&gt; { // index reference class
2786             $type$ x = ($type$) vh.getAndBitwiseOrRelease(array, Void.class, $value1$);
2787         });
2788         // Incorrect return type
<span class="line-modified">2789         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2790             Void r = (Void) vh.getAndBitwiseOrRelease(array, 0, $value1$);
2791         });
2792         checkWMTE(() -&gt; { // primitive class
2793             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrRelease(array, 0, $value1$);
2794         });
2795         // Incorrect arity
2796         checkWMTE(() -&gt; { // 0
2797             $type$ x = ($type$) vh.getAndBitwiseOrRelease();
2798         });
2799         checkWMTE(() -&gt; { // &gt;
2800             $type$ x = ($type$) vh.getAndBitwiseOrRelease(array, 0, $value1$, Void.class);
2801         });
2802 
2803 
2804         // GetAndBitwiseAnd
2805         // Incorrect argument types
2806         checkNPE(() -&gt; { // null array
2807             $type$ x = ($type$) vh.getAndBitwiseAnd(null, 0, $value1$);
2808         });
2809         checkCCE(() -&gt; { // array reference class
2810             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class, 0, $value1$);
2811         });
<span class="line-modified">2812         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2813             $type$ x = ($type$) vh.getAndBitwiseAnd(array, 0, Void.class);
2814         });
2815         checkWMTE(() -&gt; { // array primitive class
2816             $type$ x = ($type$) vh.getAndBitwiseAnd(0, 0, $value1$);
2817         });
2818         checkWMTE(() -&gt; { // index reference class
2819             $type$ x = ($type$) vh.getAndBitwiseAnd(array, Void.class, $value1$);
2820         });
2821         // Incorrect return type
<span class="line-modified">2822         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2823             Void r = (Void) vh.getAndBitwiseAnd(array, 0, $value1$);
2824         });
2825         checkWMTE(() -&gt; { // primitive class
2826             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd(array, 0, $value1$);
2827         });
2828         // Incorrect arity
2829         checkWMTE(() -&gt; { // 0
2830             $type$ x = ($type$) vh.getAndBitwiseAnd();
2831         });
2832         checkWMTE(() -&gt; { // &gt;
2833             $type$ x = ($type$) vh.getAndBitwiseAnd(array, 0, $value1$, Void.class);
2834         });
2835 
2836 
2837         // GetAndBitwiseAndAcquire
2838         // Incorrect argument types
2839         checkNPE(() -&gt; { // null array
2840             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(null, 0, $value1$);
2841         });
2842         checkCCE(() -&gt; { // array reference class
2843             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(Void.class, 0, $value1$);
2844         });
<span class="line-modified">2845         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2846             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(array, 0, Void.class);
2847         });
2848         checkWMTE(() -&gt; { // array primitive class
2849             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(0, 0, $value1$);
2850         });
2851         checkWMTE(() -&gt; { // index reference class
2852             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(array, Void.class, $value1$);
2853         });
2854         // Incorrect return type
<span class="line-modified">2855         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2856             Void r = (Void) vh.getAndBitwiseAndAcquire(array, 0, $value1$);
2857         });
2858         checkWMTE(() -&gt; { // primitive class
2859             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndAcquire(array, 0, $value1$);
2860         });
2861         // Incorrect arity
2862         checkWMTE(() -&gt; { // 0
2863             $type$ x = ($type$) vh.getAndBitwiseAndAcquire();
2864         });
2865         checkWMTE(() -&gt; { // &gt;
2866             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(array, 0, $value1$, Void.class);
2867         });
2868 
2869 
2870         // GetAndBitwiseAndRelease
2871         // Incorrect argument types
2872         checkNPE(() -&gt; { // null array
2873             $type$ x = ($type$) vh.getAndBitwiseAndRelease(null, 0, $value1$);
2874         });
2875         checkCCE(() -&gt; { // array reference class
2876             $type$ x = ($type$) vh.getAndBitwiseAndRelease(Void.class, 0, $value1$);
2877         });
<span class="line-modified">2878         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2879             $type$ x = ($type$) vh.getAndBitwiseAndRelease(array, 0, Void.class);
2880         });
2881         checkWMTE(() -&gt; { // array primitive class
2882             $type$ x = ($type$) vh.getAndBitwiseAndRelease(0, 0, $value1$);
2883         });
2884         checkWMTE(() -&gt; { // index reference class
2885             $type$ x = ($type$) vh.getAndBitwiseAndRelease(array, Void.class, $value1$);
2886         });
2887         // Incorrect return type
<span class="line-modified">2888         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2889             Void r = (Void) vh.getAndBitwiseAndRelease(array, 0, $value1$);
2890         });
2891         checkWMTE(() -&gt; { // primitive class
2892             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndRelease(array, 0, $value1$);
2893         });
2894         // Incorrect arity
2895         checkWMTE(() -&gt; { // 0
2896             $type$ x = ($type$) vh.getAndBitwiseAndRelease();
2897         });
2898         checkWMTE(() -&gt; { // &gt;
2899             $type$ x = ($type$) vh.getAndBitwiseAndRelease(array, 0, $value1$, Void.class);
2900         });
2901 
2902 
2903         // GetAndBitwiseXor
2904         // Incorrect argument types
2905         checkNPE(() -&gt; { // null array
2906             $type$ x = ($type$) vh.getAndBitwiseXor(null, 0, $value1$);
2907         });
2908         checkCCE(() -&gt; { // array reference class
2909             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class, 0, $value1$);
2910         });
<span class="line-modified">2911         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2912             $type$ x = ($type$) vh.getAndBitwiseXor(array, 0, Void.class);
2913         });
2914         checkWMTE(() -&gt; { // array primitive class
2915             $type$ x = ($type$) vh.getAndBitwiseXor(0, 0, $value1$);
2916         });
2917         checkWMTE(() -&gt; { // index reference class
2918             $type$ x = ($type$) vh.getAndBitwiseXor(array, Void.class, $value1$);
2919         });
2920         // Incorrect return type
<span class="line-modified">2921         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2922             Void r = (Void) vh.getAndBitwiseXor(array, 0, $value1$);
2923         });
2924         checkWMTE(() -&gt; { // primitive class
2925             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor(array, 0, $value1$);
2926         });
2927         // Incorrect arity
2928         checkWMTE(() -&gt; { // 0
2929             $type$ x = ($type$) vh.getAndBitwiseXor();
2930         });
2931         checkWMTE(() -&gt; { // &gt;
2932             $type$ x = ($type$) vh.getAndBitwiseXor(array, 0, $value1$, Void.class);
2933         });
2934 
2935 
2936         // GetAndBitwiseXorAcquire
2937         // Incorrect argument types
2938         checkNPE(() -&gt; { // null array
2939             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(null, 0, $value1$);
2940         });
2941         checkCCE(() -&gt; { // array reference class
2942             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(Void.class, 0, $value1$);
2943         });
<span class="line-modified">2944         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2945             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(array, 0, Void.class);
2946         });
2947         checkWMTE(() -&gt; { // array primitive class
2948             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(0, 0, $value1$);
2949         });
2950         checkWMTE(() -&gt; { // index reference class
2951             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(array, Void.class, $value1$);
2952         });
2953         // Incorrect return type
<span class="line-modified">2954         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2955             Void r = (Void) vh.getAndBitwiseXorAcquire(array, 0, $value1$);
2956         });
2957         checkWMTE(() -&gt; { // primitive class
2958             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorAcquire(array, 0, $value1$);
2959         });
2960         // Incorrect arity
2961         checkWMTE(() -&gt; { // 0
2962             $type$ x = ($type$) vh.getAndBitwiseXorAcquire();
2963         });
2964         checkWMTE(() -&gt; { // &gt;
2965             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(array, 0, $value1$, Void.class);
2966         });
2967 
2968 
2969         // GetAndBitwiseXorRelease
2970         // Incorrect argument types
2971         checkNPE(() -&gt; { // null array
2972             $type$ x = ($type$) vh.getAndBitwiseXorRelease(null, 0, $value1$);
2973         });
2974         checkCCE(() -&gt; { // array reference class
2975             $type$ x = ($type$) vh.getAndBitwiseXorRelease(Void.class, 0, $value1$);
2976         });
<span class="line-modified">2977         check{#if[String]?CCE:WMTE}(() -&gt; { // value reference class</span>
2978             $type$ x = ($type$) vh.getAndBitwiseXorRelease(array, 0, Void.class);
2979         });
2980         checkWMTE(() -&gt; { // array primitive class
2981             $type$ x = ($type$) vh.getAndBitwiseXorRelease(0, 0, $value1$);
2982         });
2983         checkWMTE(() -&gt; { // index reference class
2984             $type$ x = ($type$) vh.getAndBitwiseXorRelease(array, Void.class, $value1$);
2985         });
2986         // Incorrect return type
<span class="line-modified">2987         check{#if[String]?CCE:WMTE}(() -&gt; { // reference class</span>
2988             Void r = (Void) vh.getAndBitwiseXorRelease(array, 0, $value1$);
2989         });
2990         checkWMTE(() -&gt; { // primitive class
2991             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorRelease(array, 0, $value1$);
2992         });
2993         // Incorrect arity
2994         checkWMTE(() -&gt; { // 0
2995             $type$ x = ($type$) vh.getAndBitwiseXorRelease();
2996         });
2997         checkWMTE(() -&gt; { // &gt;
2998             $type$ x = ($type$) vh.getAndBitwiseXorRelease(array, 0, $value1$, Void.class);
2999         });
3000 #end[Bitwise]
3001     }
3002 
3003     static void testArrayWrongMethodType(Handles hs) throws Throwable {
3004         $type$[] array = new $type$[10];
3005         Arrays.fill(array, $value1$);
3006 
3007         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
3008             // Incorrect argument types
3009             checkNPE(() -&gt; { // null array
3010                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class)).
3011                     invokeExact(($type$[]) null, 0);
3012             });
3013             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3014                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class)).
3015                     invokeExact(Void.class, 0);
3016             });
3017             checkWMTE(() -&gt; { // array primitive class
3018                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class)).
3019                     invokeExact(0, 0);
3020             });
3021             checkWMTE(() -&gt; { // index reference class
3022                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class)).
3023                     invokeExact(array, Void.class);
3024             });
3025             // Incorrect return type
<span class="line-modified">3026             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3027                 Void x = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class)).
3028                     invokeExact(array, 0);
3029             });
3030             checkWMTE(() -&gt; { // primitive class
3031                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class)).
3032                     invokeExact(array, 0);
3033             });
3034             // Incorrect arity
3035             checkWMTE(() -&gt; { // 0
3036                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3037                     invokeExact();
3038             });
3039             checkWMTE(() -&gt; { // &gt;
3040                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3041                     invokeExact(array, 0, Void.class);
3042             });
3043         }
3044 
3045         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
3046             // Incorrect argument types
3047             checkNPE(() -&gt; { // null array
3048                 hs.get(am, methodType(void.class, $type$[].class, int.class, $type$.class)).
3049                     invokeExact(($type$[]) null, 0, $value1$);
3050             });
3051             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3052                 hs.get(am, methodType(void.class, Class.class, int.class, $type$.class)).
3053                     invokeExact(Void.class, 0, $value1$);
3054             });
<span class="line-modified">3055             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3056                 hs.get(am, methodType(void.class, $type$[].class, int.class, Class.class)).
3057                     invokeExact(array, 0, Void.class);
3058             });
3059             checkWMTE(() -&gt; { // receiver primitive class
3060                 hs.get(am, methodType(void.class, int.class, int.class, $type$.class)).
3061                     invokeExact(0, 0, $value1$);
3062             });
3063             checkWMTE(() -&gt; { // index reference class
3064                 hs.get(am, methodType(void.class, $type$[].class, Class.class, $type$.class)).
3065                     invokeExact(array, Void.class, $value1$);
3066             });
3067             // Incorrect arity
3068             checkWMTE(() -&gt; { // 0
3069                 hs.get(am, methodType(void.class)).
3070                     invokeExact();
3071             });
3072             checkWMTE(() -&gt; { // &gt;
3073                 hs.get(am, methodType(void.class, $type$[].class, int.class, Class.class)).
3074                     invokeExact(array, 0, $value1$, Void.class);
3075             });
3076         }
3077 #if[CAS]
3078         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
3079             // Incorrect argument types
3080             checkNPE(() -&gt; { // null receiver
3081                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, $type$.class, $type$.class)).
3082                     invokeExact(($type$[]) null, 0, $value1$, $value1$);
3083             });
3084             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
3085                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, int.class, $type$.class, $type$.class)).
3086                     invokeExact(Void.class, 0, $value1$, $value1$);
3087             });
<span class="line-modified">3088             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
3089                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, Class.class, $type$.class)).
3090                     invokeExact(array, 0, Void.class, $value1$);
3091             });
<span class="line-modified">3092             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
3093                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, $type$.class, Class.class)).
3094                     invokeExact(array, 0, $value1$, Void.class);
3095             });
3096             checkWMTE(() -&gt; { // receiver primitive class
3097                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class, int.class, $type$.class, $type$.class)).
3098                     invokeExact(0, 0, $value1$, $value1$);
3099             });
3100             checkWMTE(() -&gt; { // index reference class
3101                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, Class.class, $type$.class, $type$.class)).
3102                     invokeExact(array, Void.class, $value1$, $value1$);
3103             });
3104             // Incorrect arity
3105             checkWMTE(() -&gt; { // 0
3106                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
3107                     invokeExact();
3108             });
3109             checkWMTE(() -&gt; { // &gt;
3110                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, $type$.class, $type$.class, Class.class)).
3111                     invokeExact(array, 0, $value1$, $value1$, Void.class);
3112             });
3113         }
3114 
3115         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
3116             // Incorrect argument types
3117             checkNPE(() -&gt; { // null receiver
3118                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, $type$.class)).
3119                     invokeExact(($type$[]) null, 0, $value1$, $value1$);
3120             });
3121             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3122                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class, $type$.class)).
3123                     invokeExact(Void.class, 0, $value1$, $value1$);
3124             });
<span class="line-modified">3125             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
3126                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class, $type$.class)).
3127                     invokeExact(array, 0, Void.class, $value1$);
3128             });
<span class="line-modified">3129             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
3130                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3131                     invokeExact(array, 0, $value1$, Void.class);
3132             });
3133             checkWMTE(() -&gt; { // array primitive class
3134                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class, $type$.class)).
3135                     invokeExact(0, 0, $value1$, $value1$);
3136             });
3137             checkWMTE(() -&gt; { // index reference class
3138                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class, $type$.class)).
3139                     invokeExact(array, Void.class, $value1$, $value1$);
3140             });
3141             // Incorrect return type
<span class="line-modified">3142             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3143                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class, $type$.class)).
3144                     invokeExact(array, 0, $value1$, $value1$);
3145             });
3146             checkWMTE(() -&gt; { // primitive class
3147                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class, $type$.class)).
3148                     invokeExact(array, 0, $value1$, $value1$);
3149             });
3150             // Incorrect arity
3151             checkWMTE(() -&gt; { // 0
3152                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3153                     invokeExact();
3154             });
3155             checkWMTE(() -&gt; { // &gt;
3156                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, $type$.class, Class.class)).
3157                     invokeExact(array, 0, $value1$, $value1$, Void.class);
3158             });
3159         }
3160 
3161         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
3162             // Incorrect argument types
3163             checkNPE(() -&gt; { // null array
3164                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class)).
3165                     invokeExact(($type$[]) null, 0, $value1$);
3166             });
3167             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3168                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class)).
3169                     invokeExact(Void.class, 0, $value1$);
3170             });
<span class="line-modified">3171             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3172                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3173                     invokeExact(array, 0, Void.class);
3174             });
3175             checkWMTE(() -&gt; { // array primitive class
3176                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class)).
3177                     invokeExact(0, 0, $value1$);
3178             });
3179             checkWMTE(() -&gt; { // index reference class
3180                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class)).
3181                     invokeExact(array, Void.class, $value1$);
3182             });
3183             // Incorrect return type
<span class="line-modified">3184             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3185                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class)).
3186                     invokeExact(array, 0, $value1$);
3187             });
3188             checkWMTE(() -&gt; { // primitive class
3189                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class)).
3190                     invokeExact(array, 0, $value1$);
3191             });
3192             // Incorrect arity
3193             checkWMTE(() -&gt; { // 0
3194                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3195                     invokeExact();
3196             });
3197             checkWMTE(() -&gt; { // &gt;
3198                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3199                     invokeExact(array, 0, $value1$, Void.class);
3200             });
3201         }
3202 #end[CAS]
3203 
3204 #if[AtomicAdd]
3205         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
3206             // Incorrect argument types
3207             checkNPE(() -&gt; { // null array
3208                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class)).
3209                     invokeExact(($type$[]) null, 0, $value1$);
3210             });
3211             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3212                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class)).
3213                     invokeExact(Void.class, 0, $value1$);
3214             });
<span class="line-modified">3215             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3216                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3217                     invokeExact(array, 0, Void.class);
3218             });
3219             checkWMTE(() -&gt; { // array primitive class
3220                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class)).
3221                     invokeExact(0, 0, $value1$);
3222             });
3223             checkWMTE(() -&gt; { // index reference class
3224                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class)).
3225                     invokeExact(array, Void.class, $value1$);
3226             });
3227             // Incorrect return type
<span class="line-modified">3228             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3229                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class)).
3230                     invokeExact(array, 0, $value1$);
3231             });
3232             checkWMTE(() -&gt; { // primitive class
3233                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class)).
3234                     invokeExact(array, 0, $value1$);
3235             });
3236             // Incorrect arity
3237             checkWMTE(() -&gt; { // 0
3238                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3239                     invokeExact();
3240             });
3241             checkWMTE(() -&gt; { // &gt;
3242                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3243                     invokeExact(array, 0, $value1$, Void.class);
3244             });
3245         }
3246 #end[AtomicAdd]
3247 
3248 #if[Bitwise]
3249         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
3250             // Incorrect argument types
3251             checkNPE(() -&gt; { // null array
3252                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class)).
3253                     invokeExact(($type$[]) null, 0, $value1$);
3254             });
3255             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3256                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class)).
3257                     invokeExact(Void.class, 0, $value1$);
3258             });
<span class="line-modified">3259             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3260                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3261                     invokeExact(array, 0, Void.class);
3262             });
3263             checkWMTE(() -&gt; { // array primitive class
3264                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class)).
3265                     invokeExact(0, 0, $value1$);
3266             });
3267             checkWMTE(() -&gt; { // index reference class
3268                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class)).
3269                     invokeExact(array, Void.class, $value1$);
3270             });
3271             // Incorrect return type
<span class="line-modified">3272             {#if[String]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3273                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class)).
3274                     invokeExact(array, 0, $value1$);
3275             });
3276             checkWMTE(() -&gt; { // primitive class
3277                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class)).
3278                     invokeExact(array, 0, $value1$);
3279             });
3280             // Incorrect arity
3281             checkWMTE(() -&gt; { // 0
3282                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3283                     invokeExact();
3284             });
3285             checkWMTE(() -&gt; { // &gt;
3286                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3287                     invokeExact(array, 0, $value1$, Void.class);
3288             });
3289         }
3290 #end[Bitwise]
3291     }
3292 }
</pre>
</td>
<td>
<hr />
<pre>
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
<span class="line-added">  24 #warn</span>
<span class="line-added">  25 </span>
<span class="line-added">  26 #if[Value]</span>
<span class="line-added">  27 /*</span>
<span class="line-added">  28  * @test</span>
<span class="line-added">  29  * @bug 8156486</span>
<span class="line-added">  30  * @run testng/othervm VarHandleTestMethodType$Type$</span>
<span class="line-added">  31  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false VarHandleTestMethodType$Type$</span>
<span class="line-added">  32  */</span>
<span class="line-added">  33 #else[Value]</span>
  34 /*
  35  * @test
  36  * @bug 8156486
  37  * @run testng/othervm VarHandleTestMethodType$Type$
  38  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=true -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=true VarHandleTestMethodType$Type$
  39  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=false VarHandleTestMethodType$Type$
  40  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=true VarHandleTestMethodType$Type$
  41  */
<span class="line-added">  42 #end[Value]</span>
  43 
  44 import org.testng.annotations.BeforeClass;
  45 import org.testng.annotations.DataProvider;
  46 import org.testng.annotations.Test;
  47 
  48 import java.lang.invoke.MethodHandles;
  49 import java.lang.invoke.VarHandle;
  50 import java.util.ArrayList;
  51 import java.util.Arrays;
  52 import java.util.List;
  53 
  54 import static org.testng.Assert.*;
  55 
  56 import static java.lang.invoke.MethodType.*;
  57 
  58 public class VarHandleTestMethodType$Type$ extends VarHandleBaseTest {
  59     static final $type$ static_final_v = $value1$;
  60 
  61     static $type$ static_v = $value1$;
  62 
</pre>
<hr />
<pre>
 132         int iters = atc.requiresLoop() ? ITERS : 1;
 133         for (int c = 0; c &lt; iters; c++) {
 134             atc.testAccess(t);
 135         }
 136     }
 137 
 138 
 139     static void testInstanceFieldWrongMethodType(VarHandleTestMethodType$Type$ recv, VarHandle vh) throws Throwable {
 140         // Get
 141         // Incorrect argument types
 142         checkNPE(() -&gt; { // null receiver
 143             $type$ x = ($type$) vh.get(null);
 144         });
 145         checkCCE(() -&gt; { // receiver reference class
 146             $type$ x = ($type$) vh.get(Void.class);
 147         });
 148         checkWMTE(() -&gt; { // receiver primitive class
 149             $type$ x = ($type$) vh.get(0);
 150         });
 151         // Incorrect return type
<span class="line-modified"> 152         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 153             Void x = (Void) vh.get(recv);
 154         });
 155         checkWMTE(() -&gt; { // primitive class
 156             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.get(recv);
 157         });
 158         // Incorrect arity
 159         checkWMTE(() -&gt; { // 0
 160             $type$ x = ($type$) vh.get();
 161         });
 162         checkWMTE(() -&gt; { // &gt;
 163             $type$ x = ($type$) vh.get(recv, Void.class);
 164         });
 165 
 166 
 167         // Set
 168         // Incorrect argument types
 169         checkNPE(() -&gt; { // null receiver
 170             vh.set(null, $value1$);
 171         });
 172         checkCCE(() -&gt; { // receiver reference class
 173             vh.set(Void.class, $value1$);
 174         });
<span class="line-modified"> 175         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 176             vh.set(recv, Void.class);
 177         });
 178         checkWMTE(() -&gt; { // receiver primitive class
 179             vh.set(0, $value1$);
 180         });
 181         // Incorrect arity
 182         checkWMTE(() -&gt; { // 0
 183             vh.set();
 184         });
 185         checkWMTE(() -&gt; { // &gt;
 186             vh.set(recv, $value1$, Void.class);
 187         });
 188 
 189 
 190         // GetVolatile
 191         // Incorrect argument types
 192         checkNPE(() -&gt; { // null receiver
 193             $type$ x = ($type$) vh.getVolatile(null);
 194         });
 195         checkCCE(() -&gt; { // receiver reference class
 196             $type$ x = ($type$) vh.getVolatile(Void.class);
 197         });
 198         checkWMTE(() -&gt; { // receiver primitive class
 199             $type$ x = ($type$) vh.getVolatile(0);
 200         });
 201         // Incorrect return type
<span class="line-modified"> 202         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 203             Void x = (Void) vh.getVolatile(recv);
 204         });
 205         checkWMTE(() -&gt; { // primitive class
 206             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getVolatile(recv);
 207         });
 208         // Incorrect arity
 209         checkWMTE(() -&gt; { // 0
 210             $type$ x = ($type$) vh.getVolatile();
 211         });
 212         checkWMTE(() -&gt; { // &gt;
 213             $type$ x = ($type$) vh.getVolatile(recv, Void.class);
 214         });
 215 
 216 
 217         // SetVolatile
 218         // Incorrect argument types
 219         checkNPE(() -&gt; { // null receiver
 220             vh.setVolatile(null, $value1$);
 221         });
 222         checkCCE(() -&gt; { // receiver reference class
 223             vh.setVolatile(Void.class, $value1$);
 224         });
<span class="line-modified"> 225         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 226             vh.setVolatile(recv, Void.class);
 227         });
 228         checkWMTE(() -&gt; { // receiver primitive class
 229             vh.setVolatile(0, $value1$);
 230         });
 231         // Incorrect arity
 232         checkWMTE(() -&gt; { // 0
 233             vh.setVolatile();
 234         });
 235         checkWMTE(() -&gt; { // &gt;
 236             vh.setVolatile(recv, $value1$, Void.class);
 237         });
 238 
 239 
 240         // GetOpaque
 241         // Incorrect argument types
 242         checkNPE(() -&gt; { // null receiver
 243             $type$ x = ($type$) vh.getOpaque(null);
 244         });
 245         checkCCE(() -&gt; { // receiver reference class
 246             $type$ x = ($type$) vh.getOpaque(Void.class);
 247         });
 248         checkWMTE(() -&gt; { // receiver primitive class
 249             $type$ x = ($type$) vh.getOpaque(0);
 250         });
 251         // Incorrect return type
<span class="line-modified"> 252         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 253             Void x = (Void) vh.getOpaque(recv);
 254         });
 255         checkWMTE(() -&gt; { // primitive class
 256             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getOpaque(recv);
 257         });
 258         // Incorrect arity
 259         checkWMTE(() -&gt; { // 0
 260             $type$ x = ($type$) vh.getOpaque();
 261         });
 262         checkWMTE(() -&gt; { // &gt;
 263             $type$ x = ($type$) vh.getOpaque(recv, Void.class);
 264         });
 265 
 266 
 267         // SetOpaque
 268         // Incorrect argument types
 269         checkNPE(() -&gt; { // null receiver
 270             vh.setOpaque(null, $value1$);
 271         });
 272         checkCCE(() -&gt; { // receiver reference class
 273             vh.setOpaque(Void.class, $value1$);
 274         });
<span class="line-modified"> 275         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 276             vh.setOpaque(recv, Void.class);
 277         });
 278         checkWMTE(() -&gt; { // receiver primitive class
 279             vh.setOpaque(0, $value1$);
 280         });
 281         // Incorrect arity
 282         checkWMTE(() -&gt; { // 0
 283             vh.setOpaque();
 284         });
 285         checkWMTE(() -&gt; { // &gt;
 286             vh.setOpaque(recv, $value1$, Void.class);
 287         });
 288 
 289 
 290         // GetAcquire
 291         // Incorrect argument types
 292         checkNPE(() -&gt; { // null receiver
 293             $type$ x = ($type$) vh.getAcquire(null);
 294         });
 295         checkCCE(() -&gt; { // receiver reference class
 296             $type$ x = ($type$) vh.getAcquire(Void.class);
 297         });
 298         checkWMTE(() -&gt; { // receiver primitive class
 299             $type$ x = ($type$) vh.getAcquire(0);
 300         });
 301         // Incorrect return type
<span class="line-modified"> 302         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 303             Void x = (Void) vh.getAcquire(recv);
 304         });
 305         checkWMTE(() -&gt; { // primitive class
 306             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAcquire(recv);
 307         });
 308         // Incorrect arity
 309         checkWMTE(() -&gt; { // 0
 310             $type$ x = ($type$) vh.getAcquire();
 311         });
 312         checkWMTE(() -&gt; { // &gt;
 313             $type$ x = ($type$) vh.getAcquire(recv, Void.class);
 314         });
 315 
 316 
 317         // SetRelease
 318         // Incorrect argument types
 319         checkNPE(() -&gt; { // null receiver
 320             vh.setRelease(null, $value1$);
 321         });
 322         checkCCE(() -&gt; { // receiver reference class
 323             vh.setRelease(Void.class, $value1$);
 324         });
<span class="line-modified"> 325         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 326             vh.setRelease(recv, Void.class);
 327         });
 328         checkWMTE(() -&gt; { // receiver primitive class
 329             vh.setRelease(0, $value1$);
 330         });
 331         // Incorrect arity
 332         checkWMTE(() -&gt; { // 0
 333             vh.setRelease();
 334         });
 335         checkWMTE(() -&gt; { // &gt;
 336             vh.setRelease(recv, $value1$, Void.class);
 337         });
 338 
 339 
 340 #if[CAS]
 341         // CompareAndSet
 342         // Incorrect argument types
 343         checkNPE(() -&gt; { // null receiver
 344             boolean r = vh.compareAndSet(null, $value1$, $value1$);
 345         });
 346         checkCCE(() -&gt; { // receiver reference class
 347             boolean r = vh.compareAndSet(Void.class, $value1$, $value1$);
 348         });
<span class="line-modified"> 349         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 350             boolean r = vh.compareAndSet(recv, Void.class, $value1$);
 351         });
<span class="line-modified"> 352         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 353             boolean r = vh.compareAndSet(recv, $value1$, Void.class);
 354         });
 355         checkWMTE(() -&gt; { // receiver primitive class
 356             boolean r = vh.compareAndSet(0, $value1$, $value1$);
 357         });
 358         // Incorrect arity
 359         checkWMTE(() -&gt; { // 0
 360             boolean r = vh.compareAndSet();
 361         });
 362         checkWMTE(() -&gt; { // &gt;
 363             boolean r = vh.compareAndSet(recv, $value1$, $value1$, Void.class);
 364         });
 365 
 366 
 367         // WeakCompareAndSet
 368         // Incorrect argument types
 369         checkNPE(() -&gt; { // null receiver
 370             boolean r = vh.weakCompareAndSetPlain(null, $value1$, $value1$);
 371         });
 372         checkCCE(() -&gt; { // receiver reference class
 373             boolean r = vh.weakCompareAndSetPlain(Void.class, $value1$, $value1$);
 374         });
<span class="line-modified"> 375         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 376             boolean r = vh.weakCompareAndSetPlain(recv, Void.class, $value1$);
 377         });
<span class="line-modified"> 378         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 379             boolean r = vh.weakCompareAndSetPlain(recv, $value1$, Void.class);
 380         });
 381         checkWMTE(() -&gt; { // receiver primitive class
 382             boolean r = vh.weakCompareAndSetPlain(0, $value1$, $value1$);
 383         });
 384         // Incorrect arity
 385         checkWMTE(() -&gt; { // 0
 386             boolean r = vh.weakCompareAndSetPlain();
 387         });
 388         checkWMTE(() -&gt; { // &gt;
 389             boolean r = vh.weakCompareAndSetPlain(recv, $value1$, $value1$, Void.class);
 390         });
 391 
 392 
 393         // WeakCompareAndSetVolatile
 394         // Incorrect argument types
 395         checkNPE(() -&gt; { // null receiver
 396             boolean r = vh.weakCompareAndSet(null, $value1$, $value1$);
 397         });
 398         checkCCE(() -&gt; { // receiver reference class
 399             boolean r = vh.weakCompareAndSet(Void.class, $value1$, $value1$);
 400         });
<span class="line-modified"> 401         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 402             boolean r = vh.weakCompareAndSet(recv, Void.class, $value1$);
 403         });
<span class="line-modified"> 404         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 405             boolean r = vh.weakCompareAndSet(recv, $value1$, Void.class);
 406         });
 407         checkWMTE(() -&gt; { // receiver primitive class
 408             boolean r = vh.weakCompareAndSet(0, $value1$, $value1$);
 409         });
 410         // Incorrect arity
 411         checkWMTE(() -&gt; { // 0
 412             boolean r = vh.weakCompareAndSet();
 413         });
 414         checkWMTE(() -&gt; { // &gt;
 415             boolean r = vh.weakCompareAndSet(recv, $value1$, $value1$, Void.class);
 416         });
 417 
 418 
 419         // WeakCompareAndSetAcquire
 420         // Incorrect argument types
 421         checkNPE(() -&gt; { // null receiver
 422             boolean r = vh.weakCompareAndSetAcquire(null, $value1$, $value1$);
 423         });
 424         checkCCE(() -&gt; { // receiver reference class
 425             boolean r = vh.weakCompareAndSetAcquire(Void.class, $value1$, $value1$);
 426         });
<span class="line-modified"> 427         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 428             boolean r = vh.weakCompareAndSetAcquire(recv, Void.class, $value1$);
 429         });
<span class="line-modified"> 430         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 431             boolean r = vh.weakCompareAndSetAcquire(recv, $value1$, Void.class);
 432         });
 433         checkWMTE(() -&gt; { // receiver primitive class
 434             boolean r = vh.weakCompareAndSetAcquire(0, $value1$, $value1$);
 435         });
 436         // Incorrect arity
 437         checkWMTE(() -&gt; { // 0
 438             boolean r = vh.weakCompareAndSetAcquire();
 439         });
 440         checkWMTE(() -&gt; { // &gt;
 441             boolean r = vh.weakCompareAndSetAcquire(recv, $value1$, $value1$, Void.class);
 442         });
 443 
 444 
 445         // WeakCompareAndSetRelease
 446         // Incorrect argument types
 447         checkNPE(() -&gt; { // null receiver
 448             boolean r = vh.weakCompareAndSetRelease(null, $value1$, $value1$);
 449         });
 450         checkCCE(() -&gt; { // receiver reference class
 451             boolean r = vh.weakCompareAndSetRelease(Void.class, $value1$, $value1$);
 452         });
<span class="line-modified"> 453         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 454             boolean r = vh.weakCompareAndSetRelease(recv, Void.class, $value1$);
 455         });
<span class="line-modified"> 456         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 457             boolean r = vh.weakCompareAndSetRelease(recv, $value1$, Void.class);
 458         });
 459         checkWMTE(() -&gt; { // receiver primitive class
 460             boolean r = vh.weakCompareAndSetRelease(0, $value1$, $value1$);
 461         });
 462         // Incorrect arity
 463         checkWMTE(() -&gt; { // 0
 464             boolean r = vh.weakCompareAndSetRelease();
 465         });
 466         checkWMTE(() -&gt; { // &gt;
 467             boolean r = vh.weakCompareAndSetRelease(recv, $value1$, $value1$, Void.class);
 468         });
 469 
 470 
 471         // CompareAndExchange
 472         // Incorrect argument types
 473         checkNPE(() -&gt; { // null receiver
 474             $type$ x = ($type$) vh.compareAndExchange(null, $value1$, $value1$);
 475         });
 476         checkCCE(() -&gt; { // receiver reference class
 477             $type$ x = ($type$) vh.compareAndExchange(Void.class, $value1$, $value1$);
 478         });
<span class="line-modified"> 479         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 480             $type$ x = ($type$) vh.compareAndExchange(recv, Void.class, $value1$);
 481         });
<span class="line-modified"> 482         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 483             $type$ x = ($type$) vh.compareAndExchange(recv, $value1$, Void.class);
 484         });
 485         checkWMTE(() -&gt; { // reciever primitive class
 486             $type$ x = ($type$) vh.compareAndExchange(0, $value1$, $value1$);
 487         });
 488         // Incorrect return type
<span class="line-modified"> 489         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 490             Void r = (Void) vh.compareAndExchange(recv, $value1$, $value1$);
 491         });
 492         checkWMTE(() -&gt; { // primitive class
 493             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchange(recv, $value1$, $value1$);
 494         });
 495         // Incorrect arity
 496         checkWMTE(() -&gt; { // 0
 497             $type$ x = ($type$) vh.compareAndExchange();
 498         });
 499         checkWMTE(() -&gt; { // &gt;
 500             $type$ x = ($type$) vh.compareAndExchange(recv, $value1$, $value1$, Void.class);
 501         });
 502 
 503 
 504         // CompareAndExchangeAcquire
 505         // Incorrect argument types
 506         checkNPE(() -&gt; { // null receiver
 507             $type$ x = ($type$) vh.compareAndExchangeAcquire(null, $value1$, $value1$);
 508         });
 509         checkCCE(() -&gt; { // receiver reference class
 510             $type$ x = ($type$) vh.compareAndExchangeAcquire(Void.class, $value1$, $value1$);
 511         });
<span class="line-modified"> 512         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 513             $type$ x = ($type$) vh.compareAndExchangeAcquire(recv, Void.class, $value1$);
 514         });
<span class="line-modified"> 515         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 516             $type$ x = ($type$) vh.compareAndExchangeAcquire(recv, $value1$, Void.class);
 517         });
 518         checkWMTE(() -&gt; { // reciever primitive class
 519             $type$ x = ($type$) vh.compareAndExchangeAcquire(0, $value1$, $value1$);
 520         });
 521         // Incorrect return type
<span class="line-modified"> 522         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 523             Void r = (Void) vh.compareAndExchangeAcquire(recv, $value1$, $value1$);
 524         });
 525         checkWMTE(() -&gt; { // primitive class
 526             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeAcquire(recv, $value1$, $value1$);
 527         });
 528         // Incorrect arity
 529         checkWMTE(() -&gt; { // 0
 530             $type$ x = ($type$) vh.compareAndExchangeAcquire();
 531         });
 532         checkWMTE(() -&gt; { // &gt;
 533             $type$ x = ($type$) vh.compareAndExchangeAcquire(recv, $value1$, $value1$, Void.class);
 534         });
 535 
 536 
 537         // CompareAndExchangeRelease
 538         // Incorrect argument types
 539         checkNPE(() -&gt; { // null receiver
 540             $type$ x = ($type$) vh.compareAndExchangeRelease(null, $value1$, $value1$);
 541         });
 542         checkCCE(() -&gt; { // receiver reference class
 543             $type$ x = ($type$) vh.compareAndExchangeRelease(Void.class, $value1$, $value1$);
 544         });
<span class="line-modified"> 545         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
 546             $type$ x = ($type$) vh.compareAndExchangeRelease(recv, Void.class, $value1$);
 547         });
<span class="line-modified"> 548         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
 549             $type$ x = ($type$) vh.compareAndExchangeRelease(recv, $value1$, Void.class);
 550         });
 551         checkWMTE(() -&gt; { // reciever primitive class
 552             $type$ x = ($type$) vh.compareAndExchangeRelease(0, $value1$, $value1$);
 553         });
 554         // Incorrect return type
<span class="line-modified"> 555         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 556             Void r = (Void) vh.compareAndExchangeRelease(recv, $value1$, $value1$);
 557         });
 558         checkWMTE(() -&gt; { // primitive class
 559             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeRelease(recv, $value1$, $value1$);
 560         });
 561         // Incorrect arity
 562         checkWMTE(() -&gt; { // 0
 563             $type$ x = ($type$) vh.compareAndExchangeRelease();
 564         });
 565         checkWMTE(() -&gt; { // &gt;
 566             $type$ x = ($type$) vh.compareAndExchangeRelease(recv, $value1$, $value1$, Void.class);
 567         });
 568 
 569 
 570         // GetAndSet
 571         // Incorrect argument types
 572         checkNPE(() -&gt; { // null receiver
 573             $type$ x = ($type$) vh.getAndSet(null, $value1$);
 574         });
 575         checkCCE(() -&gt; { // receiver reference class
 576             $type$ x = ($type$) vh.getAndSet(Void.class, $value1$);
 577         });
<span class="line-modified"> 578         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 579             $type$ x = ($type$) vh.getAndSet(recv, Void.class);
 580         });
 581         checkWMTE(() -&gt; { // reciever primitive class
 582             $type$ x = ($type$) vh.getAndSet(0, $value1$);
 583         });
 584         // Incorrect return type
<span class="line-modified"> 585         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 586             Void r = (Void) vh.getAndSet(recv, $value1$);
 587         });
 588         checkWMTE(() -&gt; { // primitive class
 589             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSet(recv, $value1$);
 590         });
 591         // Incorrect arity
 592         checkWMTE(() -&gt; { // 0
 593             $type$ x = ($type$) vh.getAndSet();
 594         });
 595         checkWMTE(() -&gt; { // &gt;
 596             $type$ x = ($type$) vh.getAndSet(recv, $value1$, Void.class);
 597         });
 598 
 599         // GetAndSetAcquire
 600         // Incorrect argument types
 601         checkNPE(() -&gt; { // null receiver
 602             $type$ x = ($type$) vh.getAndSetAcquire(null, $value1$);
 603         });
 604         checkCCE(() -&gt; { // receiver reference class
 605             $type$ x = ($type$) vh.getAndSetAcquire(Void.class, $value1$);
 606         });
<span class="line-modified"> 607         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 608             $type$ x = ($type$) vh.getAndSetAcquire(recv, Void.class);
 609         });
 610         checkWMTE(() -&gt; { // reciever primitive class
 611             $type$ x = ($type$) vh.getAndSetAcquire(0, $value1$);
 612         });
 613         // Incorrect return type
<span class="line-modified"> 614         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 615             Void r = (Void) vh.getAndSetAcquire(recv, $value1$);
 616         });
 617         checkWMTE(() -&gt; { // primitive class
 618             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetAcquire(recv, $value1$);
 619         });
 620         // Incorrect arity
 621         checkWMTE(() -&gt; { // 0
 622             $type$ x = ($type$) vh.getAndSetAcquire();
 623         });
 624         checkWMTE(() -&gt; { // &gt;
 625             $type$ x = ($type$) vh.getAndSetAcquire(recv, $value1$, Void.class);
 626         });
 627 
 628         // GetAndSetRelease
 629         // Incorrect argument types
 630         checkNPE(() -&gt; { // null receiver
 631             $type$ x = ($type$) vh.getAndSetRelease(null, $value1$);
 632         });
 633         checkCCE(() -&gt; { // receiver reference class
 634             $type$ x = ($type$) vh.getAndSetRelease(Void.class, $value1$);
 635         });
<span class="line-modified"> 636         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 637             $type$ x = ($type$) vh.getAndSetRelease(recv, Void.class);
 638         });
 639         checkWMTE(() -&gt; { // reciever primitive class
 640             $type$ x = ($type$) vh.getAndSetRelease(0, $value1$);
 641         });
 642         // Incorrect return type
<span class="line-modified"> 643         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 644             Void r = (Void) vh.getAndSetRelease(recv, $value1$);
 645         });
 646         checkWMTE(() -&gt; { // primitive class
 647             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetRelease(recv, $value1$);
 648         });
 649         // Incorrect arity
 650         checkWMTE(() -&gt; { // 0
 651             $type$ x = ($type$) vh.getAndSetRelease();
 652         });
 653         checkWMTE(() -&gt; { // &gt;
 654             $type$ x = ($type$) vh.getAndSetRelease(recv, $value1$, Void.class);
 655         });
 656 #end[CAS]
 657 
 658 #if[AtomicAdd]
 659         // GetAndAdd
 660         // Incorrect argument types
 661         checkNPE(() -&gt; { // null receiver
 662             $type$ x = ($type$) vh.getAndAdd(null, $value1$);
 663         });
 664         checkCCE(() -&gt; { // receiver reference class
 665             $type$ x = ($type$) vh.getAndAdd(Void.class, $value1$);
 666         });
<span class="line-modified"> 667         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 668             $type$ x = ($type$) vh.getAndAdd(recv, Void.class);
 669         });
 670         checkWMTE(() -&gt; { // reciever primitive class
 671             $type$ x = ($type$) vh.getAndAdd(0, $value1$);
 672         });
 673         // Incorrect return type
<span class="line-modified"> 674         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 675             Void r = (Void) vh.getAndAdd(recv, $value1$);
 676         });
 677         checkWMTE(() -&gt; { // primitive class
 678             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAdd(recv, $value1$);
 679         });
 680         // Incorrect arity
 681         checkWMTE(() -&gt; { // 0
 682             $type$ x = ($type$) vh.getAndAdd();
 683         });
 684         checkWMTE(() -&gt; { // &gt;
 685             $type$ x = ($type$) vh.getAndAdd(recv, $value1$, Void.class);
 686         });
 687 
 688         // GetAndAddAcquire
 689         // Incorrect argument types
 690         checkNPE(() -&gt; { // null receiver
 691             $type$ x = ($type$) vh.getAndAddAcquire(null, $value1$);
 692         });
 693         checkCCE(() -&gt; { // receiver reference class
 694             $type$ x = ($type$) vh.getAndAddAcquire(Void.class, $value1$);
 695         });
<span class="line-modified"> 696         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 697             $type$ x = ($type$) vh.getAndAddAcquire(recv, Void.class);
 698         });
 699         checkWMTE(() -&gt; { // reciever primitive class
 700             $type$ x = ($type$) vh.getAndAddAcquire(0, $value1$);
 701         });
 702         // Incorrect return type
<span class="line-modified"> 703         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 704             Void r = (Void) vh.getAndAddAcquire(recv, $value1$);
 705         });
 706         checkWMTE(() -&gt; { // primitive class
 707             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddAcquire(recv, $value1$);
 708         });
 709         // Incorrect arity
 710         checkWMTE(() -&gt; { // 0
 711             $type$ x = ($type$) vh.getAndAddAcquire();
 712         });
 713         checkWMTE(() -&gt; { // &gt;
 714             $type$ x = ($type$) vh.getAndAddAcquire(recv, $value1$, Void.class);
 715         });
 716 
 717         // GetAndAddRelease
 718         // Incorrect argument types
 719         checkNPE(() -&gt; { // null receiver
 720             $type$ x = ($type$) vh.getAndAddRelease(null, $value1$);
 721         });
 722         checkCCE(() -&gt; { // receiver reference class
 723             $type$ x = ($type$) vh.getAndAddRelease(Void.class, $value1$);
 724         });
<span class="line-modified"> 725         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 726             $type$ x = ($type$) vh.getAndAddRelease(recv, Void.class);
 727         });
 728         checkWMTE(() -&gt; { // reciever primitive class
 729             $type$ x = ($type$) vh.getAndAddRelease(0, $value1$);
 730         });
 731         // Incorrect return type
<span class="line-modified"> 732         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 733             Void r = (Void) vh.getAndAddRelease(recv, $value1$);
 734         });
 735         checkWMTE(() -&gt; { // primitive class
 736             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddRelease(recv, $value1$);
 737         });
 738         // Incorrect arity
 739         checkWMTE(() -&gt; { // 0
 740             $type$ x = ($type$) vh.getAndAddRelease();
 741         });
 742         checkWMTE(() -&gt; { // &gt;
 743             $type$ x = ($type$) vh.getAndAddRelease(recv, $value1$, Void.class);
 744         });
 745 #end[AtomicAdd]
 746 
 747 #if[Bitwise]
 748         // GetAndBitwiseOr
 749         // Incorrect argument types
 750         checkNPE(() -&gt; { // null receiver
 751             $type$ x = ($type$) vh.getAndBitwiseOr(null, $value1$);
 752         });
 753         checkCCE(() -&gt; { // receiver reference class
 754             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class, $value1$);
 755         });
<span class="line-modified"> 756         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 757             $type$ x = ($type$) vh.getAndBitwiseOr(recv, Void.class);
 758         });
 759         checkWMTE(() -&gt; { // reciever primitive class
 760             $type$ x = ($type$) vh.getAndBitwiseOr(0, $value1$);
 761         });
 762         // Incorrect return type
<span class="line-modified"> 763         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 764             Void r = (Void) vh.getAndBitwiseOr(recv, $value1$);
 765         });
 766         checkWMTE(() -&gt; { // primitive class
 767             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr(recv, $value1$);
 768         });
 769         // Incorrect arity
 770         checkWMTE(() -&gt; { // 0
 771             $type$ x = ($type$) vh.getAndBitwiseOr();
 772         });
 773         checkWMTE(() -&gt; { // &gt;
 774             $type$ x = ($type$) vh.getAndBitwiseOr(recv, $value1$, Void.class);
 775         });
 776 
 777 
 778         // GetAndBitwiseOrAcquire
 779         // Incorrect argument types
 780         checkNPE(() -&gt; { // null receiver
 781             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(null, $value1$);
 782         });
 783         checkCCE(() -&gt; { // receiver reference class
 784             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(Void.class, $value1$);
 785         });
<span class="line-modified"> 786         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 787             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(recv, Void.class);
 788         });
 789         checkWMTE(() -&gt; { // reciever primitive class
 790             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(0, $value1$);
 791         });
 792         // Incorrect return type
<span class="line-modified"> 793         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 794             Void r = (Void) vh.getAndBitwiseOrAcquire(recv, $value1$);
 795         });
 796         checkWMTE(() -&gt; { // primitive class
 797             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrAcquire(recv, $value1$);
 798         });
 799         // Incorrect arity
 800         checkWMTE(() -&gt; { // 0
 801             $type$ x = ($type$) vh.getAndBitwiseOrAcquire();
 802         });
 803         checkWMTE(() -&gt; { // &gt;
 804             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(recv, $value1$, Void.class);
 805         });
 806 
 807 
 808         // GetAndBitwiseOrRelease
 809         // Incorrect argument types
 810         checkNPE(() -&gt; { // null receiver
 811             $type$ x = ($type$) vh.getAndBitwiseOrRelease(null, $value1$);
 812         });
 813         checkCCE(() -&gt; { // receiver reference class
 814             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class, $value1$);
 815         });
<span class="line-modified"> 816         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 817             $type$ x = ($type$) vh.getAndBitwiseOr(recv, Void.class);
 818         });
 819         checkWMTE(() -&gt; { // reciever primitive class
 820             $type$ x = ($type$) vh.getAndBitwiseOr(0, $value1$);
 821         });
 822         // Incorrect return type
<span class="line-modified"> 823         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 824             Void r = (Void) vh.getAndBitwiseOr(recv, $value1$);
 825         });
 826         checkWMTE(() -&gt; { // primitive class
 827             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr(recv, $value1$);
 828         });
 829         // Incorrect arity
 830         checkWMTE(() -&gt; { // 0
 831             $type$ x = ($type$) vh.getAndBitwiseOr();
 832         });
 833         checkWMTE(() -&gt; { // &gt;
 834             $type$ x = ($type$) vh.getAndBitwiseOr(recv, $value1$, Void.class);
 835         });
 836 
 837 
 838         // GetAndBitwiseAnd
 839         // Incorrect argument types
 840         checkNPE(() -&gt; { // null receiver
 841             $type$ x = ($type$) vh.getAndBitwiseAnd(null, $value1$);
 842         });
 843         checkCCE(() -&gt; { // receiver reference class
 844             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class, $value1$);
 845         });
<span class="line-modified"> 846         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 847             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, Void.class);
 848         });
 849         checkWMTE(() -&gt; { // reciever primitive class
 850             $type$ x = ($type$) vh.getAndBitwiseAnd(0, $value1$);
 851         });
 852         // Incorrect return type
<span class="line-modified"> 853         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 854             Void r = (Void) vh.getAndBitwiseAnd(recv, $value1$);
 855         });
 856         checkWMTE(() -&gt; { // primitive class
 857             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd(recv, $value1$);
 858         });
 859         // Incorrect arity
 860         checkWMTE(() -&gt; { // 0
 861             $type$ x = ($type$) vh.getAndBitwiseAnd();
 862         });
 863         checkWMTE(() -&gt; { // &gt;
 864             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, $value1$, Void.class);
 865         });
 866 
 867 
 868         // GetAndBitwiseAndAcquire
 869         // Incorrect argument types
 870         checkNPE(() -&gt; { // null receiver
 871             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(null, $value1$);
 872         });
 873         checkCCE(() -&gt; { // receiver reference class
 874             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(Void.class, $value1$);
 875         });
<span class="line-modified"> 876         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 877             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(recv, Void.class);
 878         });
 879         checkWMTE(() -&gt; { // reciever primitive class
 880             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(0, $value1$);
 881         });
 882         // Incorrect return type
<span class="line-modified"> 883         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 884             Void r = (Void) vh.getAndBitwiseAndAcquire(recv, $value1$);
 885         });
 886         checkWMTE(() -&gt; { // primitive class
 887             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndAcquire(recv, $value1$);
 888         });
 889         // Incorrect arity
 890         checkWMTE(() -&gt; { // 0
 891             $type$ x = ($type$) vh.getAndBitwiseAndAcquire();
 892         });
 893         checkWMTE(() -&gt; { // &gt;
 894             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(recv, $value1$, Void.class);
 895         });
 896 
 897 
 898         // GetAndBitwiseAndRelease
 899         // Incorrect argument types
 900         checkNPE(() -&gt; { // null receiver
 901             $type$ x = ($type$) vh.getAndBitwiseAndRelease(null, $value1$);
 902         });
 903         checkCCE(() -&gt; { // receiver reference class
 904             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class, $value1$);
 905         });
<span class="line-modified"> 906         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 907             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, Void.class);
 908         });
 909         checkWMTE(() -&gt; { // reciever primitive class
 910             $type$ x = ($type$) vh.getAndBitwiseAnd(0, $value1$);
 911         });
 912         // Incorrect return type
<span class="line-modified"> 913         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 914             Void r = (Void) vh.getAndBitwiseAnd(recv, $value1$);
 915         });
 916         checkWMTE(() -&gt; { // primitive class
 917             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd(recv, $value1$);
 918         });
 919         // Incorrect arity
 920         checkWMTE(() -&gt; { // 0
 921             $type$ x = ($type$) vh.getAndBitwiseAnd();
 922         });
 923         checkWMTE(() -&gt; { // &gt;
 924             $type$ x = ($type$) vh.getAndBitwiseAnd(recv, $value1$, Void.class);
 925         });
 926 
 927 
 928         // GetAndBitwiseXor
 929         // Incorrect argument types
 930         checkNPE(() -&gt; { // null receiver
 931             $type$ x = ($type$) vh.getAndBitwiseXor(null, $value1$);
 932         });
 933         checkCCE(() -&gt; { // receiver reference class
 934             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class, $value1$);
 935         });
<span class="line-modified"> 936         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 937             $type$ x = ($type$) vh.getAndBitwiseXor(recv, Void.class);
 938         });
 939         checkWMTE(() -&gt; { // reciever primitive class
 940             $type$ x = ($type$) vh.getAndBitwiseXor(0, $value1$);
 941         });
 942         // Incorrect return type
<span class="line-modified"> 943         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 944             Void r = (Void) vh.getAndBitwiseXor(recv, $value1$);
 945         });
 946         checkWMTE(() -&gt; { // primitive class
 947             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor(recv, $value1$);
 948         });
 949         // Incorrect arity
 950         checkWMTE(() -&gt; { // 0
 951             $type$ x = ($type$) vh.getAndBitwiseXor();
 952         });
 953         checkWMTE(() -&gt; { // &gt;
 954             $type$ x = ($type$) vh.getAndBitwiseXor(recv, $value1$, Void.class);
 955         });
 956 
 957 
 958         // GetAndBitwiseXorAcquire
 959         // Incorrect argument types
 960         checkNPE(() -&gt; { // null receiver
 961             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(null, $value1$);
 962         });
 963         checkCCE(() -&gt; { // receiver reference class
 964             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(Void.class, $value1$);
 965         });
<span class="line-modified"> 966         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 967             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(recv, Void.class);
 968         });
 969         checkWMTE(() -&gt; { // reciever primitive class
 970             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(0, $value1$);
 971         });
 972         // Incorrect return type
<span class="line-modified"> 973         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
 974             Void r = (Void) vh.getAndBitwiseXorAcquire(recv, $value1$);
 975         });
 976         checkWMTE(() -&gt; { // primitive class
 977             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorAcquire(recv, $value1$);
 978         });
 979         // Incorrect arity
 980         checkWMTE(() -&gt; { // 0
 981             $type$ x = ($type$) vh.getAndBitwiseXorAcquire();
 982         });
 983         checkWMTE(() -&gt; { // &gt;
 984             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(recv, $value1$, Void.class);
 985         });
 986 
 987 
 988         // GetAndBitwiseXorRelease
 989         // Incorrect argument types
 990         checkNPE(() -&gt; { // null receiver
 991             $type$ x = ($type$) vh.getAndBitwiseXorRelease(null, $value1$);
 992         });
 993         checkCCE(() -&gt; { // receiver reference class
 994             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class, $value1$);
 995         });
<span class="line-modified"> 996         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
 997             $type$ x = ($type$) vh.getAndBitwiseXor(recv, Void.class);
 998         });
 999         checkWMTE(() -&gt; { // reciever primitive class
1000             $type$ x = ($type$) vh.getAndBitwiseXor(0, $value1$);
1001         });
1002         // Incorrect return type
<span class="line-modified">1003         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1004             Void r = (Void) vh.getAndBitwiseXor(recv, $value1$);
1005         });
1006         checkWMTE(() -&gt; { // primitive class
1007             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor(recv, $value1$);
1008         });
1009         // Incorrect arity
1010         checkWMTE(() -&gt; { // 0
1011             $type$ x = ($type$) vh.getAndBitwiseXor();
1012         });
1013         checkWMTE(() -&gt; { // &gt;
1014             $type$ x = ($type$) vh.getAndBitwiseXor(recv, $value1$, Void.class);
1015         });
1016 #end[Bitwise]
1017     }
1018 
1019     static void testInstanceFieldWrongMethodType(VarHandleTestMethodType$Type$ recv, Handles hs) throws Throwable {
1020         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1021             // Incorrect argument types
1022             checkNPE(() -&gt; { // null receiver
1023                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class)).
1024                     invokeExact((VarHandleTestMethodType$Type$) null);
1025             });
1026             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1027                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1028                     invokeExact(Void.class);
1029             });
1030             checkWMTE(() -&gt; { // receiver primitive class
1031                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class)).
1032                     invokeExact(0);
1033             });
1034             // Incorrect return type
<span class="line-modified">1035             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1036                 Void x = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class)).
1037                     invokeExact(recv);
1038             });
1039             checkWMTE(() -&gt; { // primitive class
1040                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class)).
1041                     invokeExact(recv);
1042             });
1043             // Incorrect arity
1044             checkWMTE(() -&gt; { // 0
1045                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1046                     invokeExact();
1047             });
1048             checkWMTE(() -&gt; { // &gt;
1049                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1050                     invokeExact(recv, Void.class);
1051             });
1052         }
1053 
1054         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
1055             // Incorrect argument types
1056             checkNPE(() -&gt; { // null receiver
1057                 hs.get(am, methodType(void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1058                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1059             });
1060             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1061                 hs.get(am, methodType(void.class, Class.class, $type$.class)).
1062                     invokeExact(Void.class, $value1$);
1063             });
<span class="line-modified">1064             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1065                 hs.get(am, methodType(void.class, VarHandleTestMethodType$Type$.class, Class.class)).
1066                     invokeExact(recv, Void.class);
1067             });
1068             checkWMTE(() -&gt; { // receiver primitive class
1069                 hs.get(am, methodType(void.class, int.class, $type$.class)).
1070                     invokeExact(0, $value1$);
1071             });
1072             // Incorrect arity
1073             checkWMTE(() -&gt; { // 0
1074                 hs.get(am, methodType(void.class)).
1075                     invokeExact();
1076             });
1077             checkWMTE(() -&gt; { // &gt;
1078                 hs.get(am, methodType(void.class, VarHandleTestMethodType$Type$.class, $type$.class, Class.class)).
1079                     invokeExact(recv, $value1$, Void.class);
1080             });
1081         }
1082 
1083 #if[CAS]
1084         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1085             // Incorrect argument types
1086             checkNPE(() -&gt; { // null receiver
1087                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class)).
1088                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$, $value1$);
1089             });
1090             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1091                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, $type$.class, $type$.class)).
1092                     invokeExact(Void.class, $value1$, $value1$);
1093             });
<span class="line-modified">1094             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1095                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, Class.class, $type$.class)).
1096                     invokeExact(recv, Void.class, $value1$);
1097             });
<span class="line-modified">1098             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1099                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, $type$.class, Class.class)).
1100                     invokeExact(recv, $value1$, Void.class);
1101             });
1102             checkWMTE(() -&gt; { // receiver primitive class
1103                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class , $type$.class, $type$.class)).
1104                     invokeExact(0, $value1$, $value1$);
1105             });
1106             // Incorrect arity
1107             checkWMTE(() -&gt; { // 0
1108                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1109                     invokeExact();
1110             });
1111             checkWMTE(() -&gt; { // &gt;
1112                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class, Class.class)).
1113                     invokeExact(recv, $value1$, $value1$, Void.class);
1114             });
1115         }
1116 
1117         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1118             checkNPE(() -&gt; { // null receiver
1119                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class)).
1120                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$, $value1$);
1121             });
1122             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1123                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class, $type$.class)).
1124                     invokeExact(Void.class, $value1$, $value1$);
1125             });
<span class="line-modified">1126             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1127                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class, $type$.class)).
1128                     invokeExact(recv, Void.class, $value1$);
1129             });
<span class="line-modified">1130             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1131                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class, Class.class)).
1132                     invokeExact(recv, $value1$, Void.class);
1133             });
1134             checkWMTE(() -&gt; { // reciever primitive class
1135                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class , $type$.class, $type$.class)).
1136                     invokeExact(0, $value1$, $value1$);
1137             });
1138             // Incorrect return type
<span class="line-modified">1139             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1140                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class , $type$.class, $type$.class)).
1141                     invokeExact(recv, $value1$, $value1$);
1142             });
1143             checkWMTE(() -&gt; { // primitive class
1144                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class , $type$.class, $type$.class)).
1145                     invokeExact(recv, $value1$, $value1$);
1146             });
1147             // Incorrect arity
1148             checkWMTE(() -&gt; { // 0
1149                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1150                     invokeExact();
1151             });
1152             checkWMTE(() -&gt; { // &gt;
1153                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class, $type$.class, Class.class)).
1154                     invokeExact(recv, $value1$, $value1$, Void.class);
1155             });
1156         }
1157 
1158         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1159             checkNPE(() -&gt; { // null receiver
1160                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1161                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1162             });
1163             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1164                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1165                     invokeExact(Void.class, $value1$);
1166             });
<span class="line-modified">1167             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1168                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1169                     invokeExact(recv, Void.class);
1170             });
1171             checkWMTE(() -&gt; { // reciever primitive class
1172                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, $type$.class)).
1173                     invokeExact(0, $value1$);
1174             });
1175             // Incorrect return type
<span class="line-modified">1176             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1177                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1178                     invokeExact(recv, $value1$);
1179             });
1180             checkWMTE(() -&gt; { // primitive class
1181                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1182                     invokeExact(recv, $value1$);
1183             });
1184             // Incorrect arity
1185             checkWMTE(() -&gt; { // 0
1186                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1187                     invokeExact();
1188             });
1189             checkWMTE(() -&gt; { // &gt;
1190                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1191                     invokeExact(recv, $value1$, Void.class);
1192             });
1193         }
1194 #end[CAS]
1195 
1196 #if[AtomicAdd]
1197         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1198             checkNPE(() -&gt; { // null receiver
1199                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1200                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1201             });
1202             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1203                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1204                     invokeExact(Void.class, $value1$);
1205             });
<span class="line-modified">1206             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1207                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1208                     invokeExact(recv, Void.class);
1209             });
1210             checkWMTE(() -&gt; { // reciever primitive class
1211                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, $type$.class)).
1212                     invokeExact(0, $value1$);
1213             });
1214             // Incorrect return type
<span class="line-modified">1215             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1216                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1217                     invokeExact(recv, $value1$);
1218             });
1219             checkWMTE(() -&gt; { // primitive class
1220                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1221                     invokeExact(recv, $value1$);
1222             });
1223             // Incorrect arity
1224             checkWMTE(() -&gt; { // 0
1225                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1226                     invokeExact();
1227             });
1228             checkWMTE(() -&gt; { // &gt;
1229                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1230                     invokeExact(recv, $value1$, Void.class);
1231             });
1232         }
1233 #end[AtomicAdd]
1234 
1235 #if[Bitwise]
1236         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
1237             checkNPE(() -&gt; { // null receiver
1238                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1239                     invokeExact((VarHandleTestMethodType$Type$) null, $value1$);
1240             });
1241             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
1242                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1243                     invokeExact(Void.class, $value1$);
1244             });
<span class="line-modified">1245             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1246                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, Class.class)).
1247                     invokeExact(recv, Void.class);
1248             });
1249             checkWMTE(() -&gt; { // reciever primitive class
1250                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, $type$.class)).
1251                     invokeExact(0, $value1$);
1252             });
1253             // Incorrect return type
<span class="line-modified">1254             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1255                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1256                     invokeExact(recv, $value1$);
1257             });
1258             checkWMTE(() -&gt; { // primitive class
1259                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1260                     invokeExact(recv, $value1$);
1261             });
1262             // Incorrect arity
1263             checkWMTE(() -&gt; { // 0
1264                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1265                     invokeExact();
1266             });
1267             checkWMTE(() -&gt; { // &gt;
1268                 $type$ x = ($type$) hs.get(am, methodType($type$.class, VarHandleTestMethodType$Type$.class, $type$.class)).
1269                     invokeExact(recv, $value1$, Void.class);
1270             });
1271         }
1272 #end[Bitwise]
1273     }
1274 
1275 
1276     static void testStaticFieldWrongMethodType(VarHandle vh) throws Throwable {
1277         // Get
1278         // Incorrect return type
<span class="line-modified">1279         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1280             Void x = (Void) vh.get();
1281         });
1282         checkWMTE(() -&gt; { // primitive class
1283             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.get();
1284         });
1285         // Incorrect arity
1286         checkWMTE(() -&gt; { // &gt;
1287             $type$ x = ($type$) vh.get(Void.class);
1288         });
1289 
1290 
1291         // Set
1292         // Incorrect argument types
<span class="line-modified">1293         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1294             vh.set(Void.class);
1295         });
1296         // Incorrect arity
1297         checkWMTE(() -&gt; { // 0
1298             vh.set();
1299         });
1300         checkWMTE(() -&gt; { // &gt;
1301             vh.set($value1$, Void.class);
1302         });
1303 
1304 
1305         // GetVolatile
1306         // Incorrect return type
<span class="line-modified">1307         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1308             Void x = (Void) vh.getVolatile();
1309         });
1310         checkWMTE(() -&gt; { // primitive class
1311             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getVolatile();
1312         });
1313         checkWMTE(() -&gt; { // &gt;
1314             $type$ x = ($type$) vh.getVolatile(Void.class);
1315         });
1316 
1317 
1318         // SetVolatile
1319         // Incorrect argument types
<span class="line-modified">1320         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1321             vh.setVolatile(Void.class);
1322         });
1323         // Incorrect arity
1324         checkWMTE(() -&gt; { // 0
1325             vh.setVolatile();
1326         });
1327         checkWMTE(() -&gt; { // &gt;
1328             vh.setVolatile($value1$, Void.class);
1329         });
1330 
1331 
1332         // GetOpaque
1333         // Incorrect return type
<span class="line-modified">1334         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1335             Void x = (Void) vh.getOpaque();
1336         });
1337         checkWMTE(() -&gt; { // primitive class
1338             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getOpaque();
1339         });
1340         checkWMTE(() -&gt; { // &gt;
1341             $type$ x = ($type$) vh.getOpaque(Void.class);
1342         });
1343 
1344 
1345         // SetOpaque
1346         // Incorrect argument types
<span class="line-modified">1347         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1348             vh.setOpaque(Void.class);
1349         });
1350         // Incorrect arity
1351         checkWMTE(() -&gt; { // 0
1352             vh.setOpaque();
1353         });
1354         checkWMTE(() -&gt; { // &gt;
1355             vh.setOpaque($value1$, Void.class);
1356         });
1357 
1358 
1359         // GetAcquire
1360         // Incorrect return type
<span class="line-modified">1361         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1362             Void x = (Void) vh.getAcquire();
1363         });
1364         checkWMTE(() -&gt; { // primitive class
1365             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAcquire();
1366         });
1367         checkWMTE(() -&gt; { // &gt;
1368             $type$ x = ($type$) vh.getAcquire(Void.class);
1369         });
1370 
1371 
1372         // SetRelease
1373         // Incorrect argument types
<span class="line-modified">1374         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1375             vh.setRelease(Void.class);
1376         });
1377         // Incorrect arity
1378         checkWMTE(() -&gt; { // 0
1379             vh.setRelease();
1380         });
1381         checkWMTE(() -&gt; { // &gt;
1382             vh.setRelease($value1$, Void.class);
1383         });
1384 
1385 
1386 #if[CAS]
1387         // CompareAndSet
1388         // Incorrect argument types
<span class="line-modified">1389         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1390             boolean r = vh.compareAndSet(Void.class, $value1$);
1391         });
<span class="line-modified">1392         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1393             boolean r = vh.compareAndSet($value1$, Void.class);
1394         });
1395         // Incorrect arity
1396         checkWMTE(() -&gt; { // 0
1397             boolean r = vh.compareAndSet();
1398         });
1399         checkWMTE(() -&gt; { // &gt;
1400             boolean r = vh.compareAndSet($value1$, $value1$, Void.class);
1401         });
1402 
1403 
1404         // WeakCompareAndSet
1405         // Incorrect argument types
<span class="line-modified">1406         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1407             boolean r = vh.weakCompareAndSetPlain(Void.class, $value1$);
1408         });
<span class="line-modified">1409         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1410             boolean r = vh.weakCompareAndSetPlain($value1$, Void.class);
1411         });
1412         // Incorrect arity
1413         checkWMTE(() -&gt; { // 0
1414             boolean r = vh.weakCompareAndSetPlain();
1415         });
1416         checkWMTE(() -&gt; { // &gt;
1417             boolean r = vh.weakCompareAndSetPlain($value1$, $value1$, Void.class);
1418         });
1419 
1420 
1421         // WeakCompareAndSetVolatile
1422         // Incorrect argument types
<span class="line-modified">1423         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1424             boolean r = vh.weakCompareAndSet(Void.class, $value1$);
1425         });
<span class="line-modified">1426         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1427             boolean r = vh.weakCompareAndSet($value1$, Void.class);
1428         });
1429         // Incorrect arity
1430         checkWMTE(() -&gt; { // 0
1431             boolean r = vh.weakCompareAndSet();
1432         });
1433         checkWMTE(() -&gt; { // &gt;
1434             boolean r = vh.weakCompareAndSet($value1$, $value1$, Void.class);
1435         });
1436 
1437 
1438         // WeakCompareAndSetAcquire
1439         // Incorrect argument types
<span class="line-modified">1440         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1441             boolean r = vh.weakCompareAndSetAcquire(Void.class, $value1$);
1442         });
<span class="line-modified">1443         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1444             boolean r = vh.weakCompareAndSetAcquire($value1$, Void.class);
1445         });
1446         // Incorrect arity
1447         checkWMTE(() -&gt; { // 0
1448             boolean r = vh.weakCompareAndSetAcquire();
1449         });
1450         checkWMTE(() -&gt; { // &gt;
1451             boolean r = vh.weakCompareAndSetAcquire($value1$, $value1$, Void.class);
1452         });
1453 
1454 
1455         // WeakCompareAndSetRelease
1456         // Incorrect argument types
<span class="line-modified">1457         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1458             boolean r = vh.weakCompareAndSetRelease(Void.class, $value1$);
1459         });
<span class="line-modified">1460         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1461             boolean r = vh.weakCompareAndSetRelease($value1$, Void.class);
1462         });
1463         // Incorrect arity
1464         checkWMTE(() -&gt; { // 0
1465             boolean r = vh.weakCompareAndSetRelease();
1466         });
1467         checkWMTE(() -&gt; { // &gt;
1468             boolean r = vh.weakCompareAndSetRelease($value1$, $value1$, Void.class);
1469         });
1470 
1471 
1472         // CompareAndExchange
1473         // Incorrect argument types
<span class="line-modified">1474         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1475             $type$ x = ($type$) vh.compareAndExchange(Void.class, $value1$);
1476         });
<span class="line-modified">1477         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1478             $type$ x = ($type$) vh.compareAndExchange($value1$, Void.class);
1479         });
1480         // Incorrect return type
<span class="line-modified">1481         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1482             Void r = (Void) vh.compareAndExchange($value1$, $value1$);
1483         });
1484         checkWMTE(() -&gt; { // primitive class
1485             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchange($value1$, $value1$);
1486         });
1487         // Incorrect arity
1488         checkWMTE(() -&gt; { // 0
1489             $type$ x = ($type$) vh.compareAndExchange();
1490         });
1491         checkWMTE(() -&gt; { // &gt;
1492             $type$ x = ($type$) vh.compareAndExchange($value1$, $value1$, Void.class);
1493         });
1494 
1495 
1496         // CompareAndExchangeAcquire
1497         // Incorrect argument types
<span class="line-modified">1498         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1499             $type$ x = ($type$) vh.compareAndExchangeAcquire(Void.class, $value1$);
1500         });
<span class="line-modified">1501         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1502             $type$ x = ($type$) vh.compareAndExchangeAcquire($value1$, Void.class);
1503         });
1504         // Incorrect return type
<span class="line-modified">1505         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1506             Void r = (Void) vh.compareAndExchangeAcquire($value1$, $value1$);
1507         });
1508         checkWMTE(() -&gt; { // primitive class
1509             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeAcquire($value1$, $value1$);
1510         });
1511         // Incorrect arity
1512         checkWMTE(() -&gt; { // 0
1513             $type$ x = ($type$) vh.compareAndExchangeAcquire();
1514         });
1515         checkWMTE(() -&gt; { // &gt;
1516             $type$ x = ($type$) vh.compareAndExchangeAcquire($value1$, $value1$, Void.class);
1517         });
1518 
1519 
1520         // CompareAndExchangeRelease
1521         // Incorrect argument types
<span class="line-modified">1522         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
1523             $type$ x = ($type$) vh.compareAndExchangeRelease(Void.class, $value1$);
1524         });
<span class="line-modified">1525         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
1526             $type$ x = ($type$) vh.compareAndExchangeRelease($value1$, Void.class);
1527         });
1528         // Incorrect return type
<span class="line-modified">1529         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1530             Void r = (Void) vh.compareAndExchangeRelease($value1$, $value1$);
1531         });
1532         checkWMTE(() -&gt; { // primitive class
1533             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeRelease($value1$, $value1$);
1534         });
1535         // Incorrect arity
1536         checkWMTE(() -&gt; { // 0
1537             $type$ x = ($type$) vh.compareAndExchangeRelease();
1538         });
1539         checkWMTE(() -&gt; { // &gt;
1540             $type$ x = ($type$) vh.compareAndExchangeRelease($value1$, $value1$, Void.class);
1541         });
1542 
1543 
1544         // GetAndSet
1545         // Incorrect argument types
<span class="line-modified">1546         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1547             $type$ x = ($type$) vh.getAndSet(Void.class);
1548         });
1549         // Incorrect return type
<span class="line-modified">1550         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1551             Void r = (Void) vh.getAndSet($value1$);
1552         });
1553         checkWMTE(() -&gt; { // primitive class
1554             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSet($value1$);
1555         });
1556         // Incorrect arity
1557         checkWMTE(() -&gt; { // 0
1558             $type$ x = ($type$) vh.getAndSet();
1559         });
1560         checkWMTE(() -&gt; { // &gt;
1561             $type$ x = ($type$) vh.getAndSet($value1$, Void.class);
1562         });
1563 
1564 
1565         // GetAndSetAcquire
1566         // Incorrect argument types
<span class="line-modified">1567         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1568             $type$ x = ($type$) vh.getAndSetAcquire(Void.class);
1569         });
1570         // Incorrect return type
<span class="line-modified">1571         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1572             Void r = (Void) vh.getAndSetAcquire($value1$);
1573         });
1574         checkWMTE(() -&gt; { // primitive class
1575             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetAcquire($value1$);
1576         });
1577         // Incorrect arity
1578         checkWMTE(() -&gt; { // 0
1579             $type$ x = ($type$) vh.getAndSetAcquire();
1580         });
1581         checkWMTE(() -&gt; { // &gt;
1582             $type$ x = ($type$) vh.getAndSetAcquire($value1$, Void.class);
1583         });
1584 
1585 
1586         // GetAndSetRelease
1587         // Incorrect argument types
<span class="line-modified">1588         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1589             $type$ x = ($type$) vh.getAndSetRelease(Void.class);
1590         });
1591         // Incorrect return type
<span class="line-modified">1592         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1593             Void r = (Void) vh.getAndSetRelease($value1$);
1594         });
1595         checkWMTE(() -&gt; { // primitive class
1596             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetRelease($value1$);
1597         });
1598         // Incorrect arity
1599         checkWMTE(() -&gt; { // 0
1600             $type$ x = ($type$) vh.getAndSetRelease();
1601         });
1602         checkWMTE(() -&gt; { // &gt;
1603             $type$ x = ($type$) vh.getAndSetRelease($value1$, Void.class);
1604         });
1605 #end[CAS]
1606 
1607 #if[AtomicAdd]
1608         // GetAndAdd
1609         // Incorrect argument types
<span class="line-modified">1610         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1611             $type$ x = ($type$) vh.getAndAdd(Void.class);
1612         });
1613         // Incorrect return type
<span class="line-modified">1614         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1615             Void r = (Void) vh.getAndAdd($value1$);
1616         });
1617         checkWMTE(() -&gt; { // primitive class
1618             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAdd($value1$);
1619         });
1620         // Incorrect arity
1621         checkWMTE(() -&gt; { // 0
1622             $type$ x = ($type$) vh.getAndAdd();
1623         });
1624         checkWMTE(() -&gt; { // &gt;
1625             $type$ x = ($type$) vh.getAndAdd($value1$, Void.class);
1626         });
1627 
1628 
1629         // GetAndAddAcquire
1630         // Incorrect argument types
<span class="line-modified">1631         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1632             $type$ x = ($type$) vh.getAndAddAcquire(Void.class);
1633         });
1634         // Incorrect return type
<span class="line-modified">1635         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1636             Void r = (Void) vh.getAndAddAcquire($value1$);
1637         });
1638         checkWMTE(() -&gt; { // primitive class
1639             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddAcquire($value1$);
1640         });
1641         // Incorrect arity
1642         checkWMTE(() -&gt; { // 0
1643             $type$ x = ($type$) vh.getAndAddAcquire();
1644         });
1645         checkWMTE(() -&gt; { // &gt;
1646             $type$ x = ($type$) vh.getAndAddAcquire($value1$, Void.class);
1647         });
1648 
1649 
1650         // GetAndAddRelease
1651         // Incorrect argument types
<span class="line-modified">1652         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1653             $type$ x = ($type$) vh.getAndAddRelease(Void.class);
1654         });
1655         // Incorrect return type
<span class="line-modified">1656         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1657             Void r = (Void) vh.getAndAddRelease($value1$);
1658         });
1659         checkWMTE(() -&gt; { // primitive class
1660             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddRelease($value1$);
1661         });
1662         // Incorrect arity
1663         checkWMTE(() -&gt; { // 0
1664             $type$ x = ($type$) vh.getAndAddRelease();
1665         });
1666         checkWMTE(() -&gt; { // &gt;
1667             $type$ x = ($type$) vh.getAndAddRelease($value1$, Void.class);
1668         });
1669 #end[AtomicAdd]
1670 
1671 #if[Bitwise]
1672         // GetAndBitwiseOr
1673         // Incorrect argument types
<span class="line-modified">1674         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1675             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class);
1676         });
1677         // Incorrect return type
<span class="line-modified">1678         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1679             Void r = (Void) vh.getAndBitwiseOr($value1$);
1680         });
1681         checkWMTE(() -&gt; { // primitive class
1682             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr($value1$);
1683         });
1684         // Incorrect arity
1685         checkWMTE(() -&gt; { // 0
1686             $type$ x = ($type$) vh.getAndBitwiseOr();
1687         });
1688         checkWMTE(() -&gt; { // &gt;
1689             $type$ x = ($type$) vh.getAndBitwiseOr($value1$, Void.class);
1690         });
1691 
1692 
1693         // GetAndBitwiseOrAcquire
1694         // Incorrect argument types
<span class="line-modified">1695         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1696             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(Void.class);
1697         });
1698         // Incorrect return type
<span class="line-modified">1699         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1700             Void r = (Void) vh.getAndBitwiseOrAcquire($value1$);
1701         });
1702         checkWMTE(() -&gt; { // primitive class
1703             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrAcquire($value1$);
1704         });
1705         // Incorrect arity
1706         checkWMTE(() -&gt; { // 0
1707             $type$ x = ($type$) vh.getAndBitwiseOrAcquire();
1708         });
1709         checkWMTE(() -&gt; { // &gt;
1710             $type$ x = ($type$) vh.getAndBitwiseOrAcquire($value1$, Void.class);
1711         });
1712 
1713 
1714         // GetAndBitwiseOrReleaseRelease
1715         // Incorrect argument types
<span class="line-modified">1716         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1717             $type$ x = ($type$) vh.getAndBitwiseOrRelease(Void.class);
1718         });
1719         // Incorrect return type
<span class="line-modified">1720         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1721             Void r = (Void) vh.getAndBitwiseOrRelease($value1$);
1722         });
1723         checkWMTE(() -&gt; { // primitive class
1724             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrRelease($value1$);
1725         });
1726         // Incorrect arity
1727         checkWMTE(() -&gt; { // 0
1728             $type$ x = ($type$) vh.getAndBitwiseOrRelease();
1729         });
1730         checkWMTE(() -&gt; { // &gt;
1731             $type$ x = ($type$) vh.getAndBitwiseOrRelease($value1$, Void.class);
1732         });
1733 
1734 
1735         // GetAndBitwiseAnd
1736         // Incorrect argument types
<span class="line-modified">1737         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1738             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class);
1739         });
1740         // Incorrect return type
<span class="line-modified">1741         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1742             Void r = (Void) vh.getAndBitwiseAnd($value1$);
1743         });
1744         checkWMTE(() -&gt; { // primitive class
1745             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd($value1$);
1746         });
1747         // Incorrect arity
1748         checkWMTE(() -&gt; { // 0
1749             $type$ x = ($type$) vh.getAndBitwiseAnd();
1750         });
1751         checkWMTE(() -&gt; { // &gt;
1752             $type$ x = ($type$) vh.getAndBitwiseAnd($value1$, Void.class);
1753         });
1754 
1755 
1756         // GetAndBitwiseAndAcquire
1757         // Incorrect argument types
<span class="line-modified">1758         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1759             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(Void.class);
1760         });
1761         // Incorrect return type
<span class="line-modified">1762         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1763             Void r = (Void) vh.getAndBitwiseAndAcquire($value1$);
1764         });
1765         checkWMTE(() -&gt; { // primitive class
1766             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndAcquire($value1$);
1767         });
1768         // Incorrect arity
1769         checkWMTE(() -&gt; { // 0
1770             $type$ x = ($type$) vh.getAndBitwiseAndAcquire();
1771         });
1772         checkWMTE(() -&gt; { // &gt;
1773             $type$ x = ($type$) vh.getAndBitwiseAndAcquire($value1$, Void.class);
1774         });
1775 
1776 
1777         // GetAndBitwiseAndReleaseRelease
1778         // Incorrect argument types
<span class="line-modified">1779         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1780             $type$ x = ($type$) vh.getAndBitwiseAndRelease(Void.class);
1781         });
1782         // Incorrect return type
<span class="line-modified">1783         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1784             Void r = (Void) vh.getAndBitwiseAndRelease($value1$);
1785         });
1786         checkWMTE(() -&gt; { // primitive class
1787             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndRelease($value1$);
1788         });
1789         // Incorrect arity
1790         checkWMTE(() -&gt; { // 0
1791             $type$ x = ($type$) vh.getAndBitwiseAndRelease();
1792         });
1793         checkWMTE(() -&gt; { // &gt;
1794             $type$ x = ($type$) vh.getAndBitwiseAndRelease($value1$, Void.class);
1795         });
1796 
1797 
1798         // GetAndBitwiseXor
1799         // Incorrect argument types
<span class="line-modified">1800         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1801             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class);
1802         });
1803         // Incorrect return type
<span class="line-modified">1804         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1805             Void r = (Void) vh.getAndBitwiseXor($value1$);
1806         });
1807         checkWMTE(() -&gt; { // primitive class
1808             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor($value1$);
1809         });
1810         // Incorrect arity
1811         checkWMTE(() -&gt; { // 0
1812             $type$ x = ($type$) vh.getAndBitwiseXor();
1813         });
1814         checkWMTE(() -&gt; { // &gt;
1815             $type$ x = ($type$) vh.getAndBitwiseXor($value1$, Void.class);
1816         });
1817 
1818 
1819         // GetAndBitwiseXorAcquire
1820         // Incorrect argument types
<span class="line-modified">1821         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1822             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(Void.class);
1823         });
1824         // Incorrect return type
<span class="line-modified">1825         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1826             Void r = (Void) vh.getAndBitwiseXorAcquire($value1$);
1827         });
1828         checkWMTE(() -&gt; { // primitive class
1829             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorAcquire($value1$);
1830         });
1831         // Incorrect arity
1832         checkWMTE(() -&gt; { // 0
1833             $type$ x = ($type$) vh.getAndBitwiseXorAcquire();
1834         });
1835         checkWMTE(() -&gt; { // &gt;
1836             $type$ x = ($type$) vh.getAndBitwiseXorAcquire($value1$, Void.class);
1837         });
1838 
1839 
1840         // GetAndBitwiseXorReleaseRelease
1841         // Incorrect argument types
<span class="line-modified">1842         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1843             $type$ x = ($type$) vh.getAndBitwiseXorRelease(Void.class);
1844         });
1845         // Incorrect return type
<span class="line-modified">1846         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1847             Void r = (Void) vh.getAndBitwiseXorRelease($value1$);
1848         });
1849         checkWMTE(() -&gt; { // primitive class
1850             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorRelease($value1$);
1851         });
1852         // Incorrect arity
1853         checkWMTE(() -&gt; { // 0
1854             $type$ x = ($type$) vh.getAndBitwiseXorRelease();
1855         });
1856         checkWMTE(() -&gt; { // &gt;
1857             $type$ x = ($type$) vh.getAndBitwiseXorRelease($value1$, Void.class);
1858         });
1859 #end[Bitwise]
1860     }
1861 
1862     static void testStaticFieldWrongMethodType(Handles hs) throws Throwable {
1863         int i = 0;
1864 
1865         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1866             // Incorrect return type
<span class="line-modified">1867             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1868                 Void x = (Void) hs.get(am, methodType(Void.class)).
1869                     invokeExact();
1870             });
1871             checkWMTE(() -&gt; { // primitive class
1872                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class)).
1873                     invokeExact();
1874             });
1875             // Incorrect arity
1876             checkWMTE(() -&gt; { // &gt;
1877                 $type$ x = ($type$) hs.get(am, methodType(Class.class)).
1878                     invokeExact(Void.class);
1879             });
1880         }
1881 
1882         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
<span class="line-modified">1883             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1884                 hs.get(am, methodType(void.class, Class.class)).
1885                     invokeExact(Void.class);
1886             });
1887             // Incorrect arity
1888             checkWMTE(() -&gt; { // 0
1889                 hs.get(am, methodType(void.class)).
1890                     invokeExact();
1891             });
1892             checkWMTE(() -&gt; { // &gt;
1893                 hs.get(am, methodType(void.class, $type$.class, Class.class)).
1894                     invokeExact($value1$, Void.class);
1895             });
1896         }
1897 #if[CAS]
1898         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1899             // Incorrect argument types
<span class="line-modified">1900             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1901                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, $type$.class)).
1902                     invokeExact(Void.class, $value1$);
1903             });
<span class="line-modified">1904             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1905                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$.class, Class.class)).
1906                     invokeExact($value1$, Void.class);
1907             });
1908             // Incorrect arity
1909             checkWMTE(() -&gt; { // 0
1910                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1911                     invokeExact();
1912             });
1913             checkWMTE(() -&gt; { // &gt;
1914                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$.class, $type$.class, Class.class)).
1915                     invokeExact($value1$, $value1$, Void.class);
1916             });
1917         }
1918 
1919         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1920             // Incorrect argument types
<span class="line-modified">1921             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
1922                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, $type$.class)).
1923                     invokeExact(Void.class, $value1$);
1924             });
<span class="line-modified">1925             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
1926                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
1927                     invokeExact($value1$, Void.class);
1928             });
1929             // Incorrect return type
<span class="line-modified">1930             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1931                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class, $type$.class)).
1932                     invokeExact($value1$, $value1$);
1933             });
1934             checkWMTE(() -&gt; { // primitive class
1935                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class, $type$.class)).
1936                     invokeExact($value1$, $value1$);
1937             });
1938             // Incorrect arity
1939             checkWMTE(() -&gt; { // 0
1940                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1941                     invokeExact();
1942             });
1943             checkWMTE(() -&gt; { // &gt;
1944                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, $type$.class, Class.class)).
1945                     invokeExact($value1$, $value1$, Void.class);
1946             });
1947         }
1948 
1949         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1950             // Incorrect argument types
<span class="line-modified">1951             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
1952                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1953                     invokeExact(Void.class);
1954             });
1955             // Incorrect return type
<span class="line-modified">1956             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
1957                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class)).
1958                     invokeExact($value1$);
1959             });
1960             checkWMTE(() -&gt; { // primitive class
1961                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class)).
1962                     invokeExact($value1$);
1963             });
1964             // Incorrect arity
1965             checkWMTE(() -&gt; { // 0
1966                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1967                     invokeExact();
1968             });
1969             checkWMTE(() -&gt; { // &gt;
1970                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
1971                     invokeExact($value1$, Void.class);
1972             });
1973         }
1974 #end[CAS]
1975 
1976 #if[AtomicAdd]
1977         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1978             // Incorrect argument types
<span class="line-modified">1979             check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
1980                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
1981                     invokeExact(Void.class);
1982             });
1983             // Incorrect return type
<span class="line-modified">1984             check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
1985                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class)).
1986                     invokeExact($value1$);
1987             });
1988             checkWMTE(() -&gt; { // primitive class
1989                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class)).
1990                     invokeExact($value1$);
1991             });
1992             // Incorrect arity
1993             checkWMTE(() -&gt; { // 0
1994                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
1995                     invokeExact();
1996             });
1997             checkWMTE(() -&gt; { // &gt;
1998                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
1999                     invokeExact($value1$, Void.class);
2000             });
2001         }
2002 #end[AtomicAdd]
2003 
2004 #if[Bitwise]
2005         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
2006             // Incorrect argument types
<span class="line-modified">2007             check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2008                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class)).
2009                     invokeExact(Void.class);
2010             });
2011             // Incorrect return type
<span class="line-modified">2012             check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2013                 Void r = (Void) hs.get(am, methodType(Void.class, $type$.class)).
2014                     invokeExact($value1$);
2015             });
2016             checkWMTE(() -&gt; { // primitive class
2017                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$.class)).
2018                     invokeExact($value1$);
2019             });
2020             // Incorrect arity
2021             checkWMTE(() -&gt; { // 0
2022                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
2023                     invokeExact();
2024             });
2025             checkWMTE(() -&gt; { // &gt;
2026                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$.class, Class.class)).
2027                     invokeExact($value1$, Void.class);
2028             });
2029         }
2030 #end[Bitwise]
2031     }
2032 
2033 
2034     static void testArrayWrongMethodType(VarHandle vh) throws Throwable {
2035         $type$[] array = new $type$[10];
2036         Arrays.fill(array, $value1$);
2037 
2038         // Get
2039         // Incorrect argument types
2040         checkNPE(() -&gt; { // null array
2041             $type$ x = ($type$) vh.get(null, 0);
2042         });
2043         checkCCE(() -&gt; { // array reference class
2044             $type$ x = ($type$) vh.get(Void.class, 0);
2045         });
2046         checkWMTE(() -&gt; { // array primitive class
2047             $type$ x = ($type$) vh.get(0, 0);
2048         });
2049         checkWMTE(() -&gt; { // index reference class
2050             $type$ x = ($type$) vh.get(array, Void.class);
2051         });
2052         // Incorrect return type
<span class="line-modified">2053         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2054             Void x = (Void) vh.get(array, 0);
2055         });
2056         checkWMTE(() -&gt; { // primitive class
2057             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.get(array, 0);
2058         });
2059         // Incorrect arity
2060         checkWMTE(() -&gt; { // 0
2061             $type$ x = ($type$) vh.get();
2062         });
2063         checkWMTE(() -&gt; { // &gt;
2064             $type$ x = ($type$) vh.get(array, 0, Void.class);
2065         });
2066 
2067 
2068         // Set
2069         // Incorrect argument types
2070         checkNPE(() -&gt; { // null array
2071             vh.set(null, 0, $value1$);
2072         });
2073         checkCCE(() -&gt; { // array reference class
2074             vh.set(Void.class, 0, $value1$);
2075         });
<span class="line-modified">2076         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2077             vh.set(array, 0, Void.class);
2078         });
2079         checkWMTE(() -&gt; { // receiver primitive class
2080             vh.set(0, 0, $value1$);
2081         });
2082         checkWMTE(() -&gt; { // index reference class
2083             vh.set(array, Void.class, $value1$);
2084         });
2085         // Incorrect arity
2086         checkWMTE(() -&gt; { // 0
2087             vh.set();
2088         });
2089         checkWMTE(() -&gt; { // &gt;
2090             vh.set(array, 0, $value1$, Void.class);
2091         });
2092 
2093 
2094         // GetVolatile
2095         // Incorrect argument types
2096         checkNPE(() -&gt; { // null array
2097             $type$ x = ($type$) vh.getVolatile(null, 0);
2098         });
2099         checkCCE(() -&gt; { // array reference class
2100             $type$ x = ($type$) vh.getVolatile(Void.class, 0);
2101         });
2102         checkWMTE(() -&gt; { // array primitive class
2103             $type$ x = ($type$) vh.getVolatile(0, 0);
2104         });
2105         checkWMTE(() -&gt; { // index reference class
2106             $type$ x = ($type$) vh.getVolatile(array, Void.class);
2107         });
2108         // Incorrect return type
<span class="line-modified">2109         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2110             Void x = (Void) vh.getVolatile(array, 0);
2111         });
2112         checkWMTE(() -&gt; { // primitive class
2113             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getVolatile(array, 0);
2114         });
2115         // Incorrect arity
2116         checkWMTE(() -&gt; { // 0
2117             $type$ x = ($type$) vh.getVolatile();
2118         });
2119         checkWMTE(() -&gt; { // &gt;
2120             $type$ x = ($type$) vh.getVolatile(array, 0, Void.class);
2121         });
2122 
2123 
2124         // SetVolatile
2125         // Incorrect argument types
2126         checkNPE(() -&gt; { // null array
2127             vh.setVolatile(null, 0, $value1$);
2128         });
2129         checkCCE(() -&gt; { // array reference class
2130             vh.setVolatile(Void.class, 0, $value1$);
2131         });
<span class="line-modified">2132         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2133             vh.setVolatile(array, 0, Void.class);
2134         });
2135         checkWMTE(() -&gt; { // receiver primitive class
2136             vh.setVolatile(0, 0, $value1$);
2137         });
2138         checkWMTE(() -&gt; { // index reference class
2139             vh.setVolatile(array, Void.class, $value1$);
2140         });
2141         // Incorrect arity
2142         checkWMTE(() -&gt; { // 0
2143             vh.setVolatile();
2144         });
2145         checkWMTE(() -&gt; { // &gt;
2146             vh.setVolatile(array, 0, $value1$, Void.class);
2147         });
2148 
2149 
2150         // GetOpaque
2151         // Incorrect argument types
2152         checkNPE(() -&gt; { // null array
2153             $type$ x = ($type$) vh.getOpaque(null, 0);
2154         });
2155         checkCCE(() -&gt; { // array reference class
2156             $type$ x = ($type$) vh.getOpaque(Void.class, 0);
2157         });
2158         checkWMTE(() -&gt; { // array primitive class
2159             $type$ x = ($type$) vh.getOpaque(0, 0);
2160         });
2161         checkWMTE(() -&gt; { // index reference class
2162             $type$ x = ($type$) vh.getOpaque(array, Void.class);
2163         });
2164         // Incorrect return type
<span class="line-modified">2165         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2166             Void x = (Void) vh.getOpaque(array, 0);
2167         });
2168         checkWMTE(() -&gt; { // primitive class
2169             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getOpaque(array, 0);
2170         });
2171         // Incorrect arity
2172         checkWMTE(() -&gt; { // 0
2173             $type$ x = ($type$) vh.getOpaque();
2174         });
2175         checkWMTE(() -&gt; { // &gt;
2176             $type$ x = ($type$) vh.getOpaque(array, 0, Void.class);
2177         });
2178 
2179 
2180         // SetOpaque
2181         // Incorrect argument types
2182         checkNPE(() -&gt; { // null array
2183             vh.setOpaque(null, 0, $value1$);
2184         });
2185         checkCCE(() -&gt; { // array reference class
2186             vh.setOpaque(Void.class, 0, $value1$);
2187         });
<span class="line-modified">2188         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2189             vh.setOpaque(array, 0, Void.class);
2190         });
2191         checkWMTE(() -&gt; { // receiver primitive class
2192             vh.setOpaque(0, 0, $value1$);
2193         });
2194         checkWMTE(() -&gt; { // index reference class
2195             vh.setOpaque(array, Void.class, $value1$);
2196         });
2197         // Incorrect arity
2198         checkWMTE(() -&gt; { // 0
2199             vh.setOpaque();
2200         });
2201         checkWMTE(() -&gt; { // &gt;
2202             vh.setOpaque(array, 0, $value1$, Void.class);
2203         });
2204 
2205 
2206         // GetAcquire
2207         // Incorrect argument types
2208         checkNPE(() -&gt; { // null array
2209             $type$ x = ($type$) vh.getAcquire(null, 0);
2210         });
2211         checkCCE(() -&gt; { // array reference class
2212             $type$ x = ($type$) vh.getAcquire(Void.class, 0);
2213         });
2214         checkWMTE(() -&gt; { // array primitive class
2215             $type$ x = ($type$) vh.getAcquire(0, 0);
2216         });
2217         checkWMTE(() -&gt; { // index reference class
2218             $type$ x = ($type$) vh.getAcquire(array, Void.class);
2219         });
2220         // Incorrect return type
<span class="line-modified">2221         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2222             Void x = (Void) vh.getAcquire(array, 0);
2223         });
2224         checkWMTE(() -&gt; { // primitive class
2225             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAcquire(array, 0);
2226         });
2227         // Incorrect arity
2228         checkWMTE(() -&gt; { // 0
2229             $type$ x = ($type$) vh.getAcquire();
2230         });
2231         checkWMTE(() -&gt; { // &gt;
2232             $type$ x = ($type$) vh.getAcquire(array, 0, Void.class);
2233         });
2234 
2235 
2236         // SetRelease
2237         // Incorrect argument types
2238         checkNPE(() -&gt; { // null array
2239             vh.setRelease(null, 0, $value1$);
2240         });
2241         checkCCE(() -&gt; { // array reference class
2242             vh.setRelease(Void.class, 0, $value1$);
2243         });
<span class="line-modified">2244         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2245             vh.setRelease(array, 0, Void.class);
2246         });
2247         checkWMTE(() -&gt; { // receiver primitive class
2248             vh.setRelease(0, 0, $value1$);
2249         });
2250         checkWMTE(() -&gt; { // index reference class
2251             vh.setRelease(array, Void.class, $value1$);
2252         });
2253         // Incorrect arity
2254         checkWMTE(() -&gt; { // 0
2255             vh.setRelease();
2256         });
2257         checkWMTE(() -&gt; { // &gt;
2258             vh.setRelease(array, 0, $value1$, Void.class);
2259         });
2260 
2261 
2262 #if[CAS]
2263         // CompareAndSet
2264         // Incorrect argument types
2265         checkNPE(() -&gt; { // null receiver
2266             boolean r = vh.compareAndSet(null, 0, $value1$, $value1$);
2267         });
2268         checkCCE(() -&gt; { // receiver reference class
2269             boolean r = vh.compareAndSet(Void.class, 0, $value1$, $value1$);
2270         });
<span class="line-modified">2271         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2272             boolean r = vh.compareAndSet(array, 0, Void.class, $value1$);
2273         });
<span class="line-modified">2274         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2275             boolean r = vh.compareAndSet(array, 0, $value1$, Void.class);
2276         });
2277         checkWMTE(() -&gt; { // receiver primitive class
2278             boolean r = vh.compareAndSet(0, 0, $value1$, $value1$);
2279         });
2280         checkWMTE(() -&gt; { // index reference class
2281             boolean r = vh.compareAndSet(array, Void.class, $value1$, $value1$);
2282         });
2283         // Incorrect arity
2284         checkWMTE(() -&gt; { // 0
2285             boolean r = vh.compareAndSet();
2286         });
2287         checkWMTE(() -&gt; { // &gt;
2288             boolean r = vh.compareAndSet(array, 0, $value1$, $value1$, Void.class);
2289         });
2290 
2291 
2292         // WeakCompareAndSet
2293         // Incorrect argument types
2294         checkNPE(() -&gt; { // null receiver
2295             boolean r = vh.weakCompareAndSetPlain(null, 0, $value1$, $value1$);
2296         });
2297         checkCCE(() -&gt; { // receiver reference class
2298             boolean r = vh.weakCompareAndSetPlain(Void.class, 0, $value1$, $value1$);
2299         });
<span class="line-modified">2300         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2301             boolean r = vh.weakCompareAndSetPlain(array, 0, Void.class, $value1$);
2302         });
<span class="line-modified">2303         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2304             boolean r = vh.weakCompareAndSetPlain(array, 0, $value1$, Void.class);
2305         });
2306         checkWMTE(() -&gt; { // receiver primitive class
2307             boolean r = vh.weakCompareAndSetPlain(0, 0, $value1$, $value1$);
2308         });
2309         checkWMTE(() -&gt; { // index reference class
2310             boolean r = vh.weakCompareAndSetPlain(array, Void.class, $value1$, $value1$);
2311         });
2312         // Incorrect arity
2313         checkWMTE(() -&gt; { // 0
2314             boolean r = vh.weakCompareAndSetPlain();
2315         });
2316         checkWMTE(() -&gt; { // &gt;
2317             boolean r = vh.weakCompareAndSetPlain(array, 0, $value1$, $value1$, Void.class);
2318         });
2319 
2320 
2321         // WeakCompareAndSetVolatile
2322         // Incorrect argument types
2323         checkNPE(() -&gt; { // null receiver
2324             boolean r = vh.weakCompareAndSet(null, 0, $value1$, $value1$);
2325         });
2326         checkCCE(() -&gt; { // receiver reference class
2327             boolean r = vh.weakCompareAndSet(Void.class, 0, $value1$, $value1$);
2328         });
<span class="line-modified">2329         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2330             boolean r = vh.weakCompareAndSet(array, 0, Void.class, $value1$);
2331         });
<span class="line-modified">2332         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2333             boolean r = vh.weakCompareAndSet(array, 0, $value1$, Void.class);
2334         });
2335         checkWMTE(() -&gt; { // receiver primitive class
2336             boolean r = vh.weakCompareAndSet(0, 0, $value1$, $value1$);
2337         });
2338         checkWMTE(() -&gt; { // index reference class
2339             boolean r = vh.weakCompareAndSet(array, Void.class, $value1$, $value1$);
2340         });
2341         // Incorrect arity
2342         checkWMTE(() -&gt; { // 0
2343             boolean r = vh.weakCompareAndSet();
2344         });
2345         checkWMTE(() -&gt; { // &gt;
2346             boolean r = vh.weakCompareAndSet(array, 0, $value1$, $value1$, Void.class);
2347         });
2348 
2349 
2350         // WeakCompareAndSetAcquire
2351         // Incorrect argument types
2352         checkNPE(() -&gt; { // null receiver
2353             boolean r = vh.weakCompareAndSetAcquire(null, 0, $value1$, $value1$);
2354         });
2355         checkCCE(() -&gt; { // receiver reference class
2356             boolean r = vh.weakCompareAndSetAcquire(Void.class, 0, $value1$, $value1$);
2357         });
<span class="line-modified">2358         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2359             boolean r = vh.weakCompareAndSetAcquire(array, 0, Void.class, $value1$);
2360         });
<span class="line-modified">2361         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2362             boolean r = vh.weakCompareAndSetAcquire(array, 0, $value1$, Void.class);
2363         });
2364         checkWMTE(() -&gt; { // receiver primitive class
2365             boolean r = vh.weakCompareAndSetAcquire(0, 0, $value1$, $value1$);
2366         });
2367         checkWMTE(() -&gt; { // index reference class
2368             boolean r = vh.weakCompareAndSetAcquire(array, Void.class, $value1$, $value1$);
2369         });
2370         // Incorrect arity
2371         checkWMTE(() -&gt; { // 0
2372             boolean r = vh.weakCompareAndSetAcquire();
2373         });
2374         checkWMTE(() -&gt; { // &gt;
2375             boolean r = vh.weakCompareAndSetAcquire(array, 0, $value1$, $value1$, Void.class);
2376         });
2377 
2378 
2379         // WeakCompareAndSetRelease
2380         // Incorrect argument types
2381         checkNPE(() -&gt; { // null receiver
2382             boolean r = vh.weakCompareAndSetRelease(null, 0, $value1$, $value1$);
2383         });
2384         checkCCE(() -&gt; { // receiver reference class
2385             boolean r = vh.weakCompareAndSetRelease(Void.class, 0, $value1$, $value1$);
2386         });
<span class="line-modified">2387         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2388             boolean r = vh.weakCompareAndSetRelease(array, 0, Void.class, $value1$);
2389         });
<span class="line-modified">2390         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2391             boolean r = vh.weakCompareAndSetRelease(array, 0, $value1$, Void.class);
2392         });
2393         checkWMTE(() -&gt; { // receiver primitive class
2394             boolean r = vh.weakCompareAndSetRelease(0, 0, $value1$, $value1$);
2395         });
2396         checkWMTE(() -&gt; { // index reference class
2397             boolean r = vh.weakCompareAndSetRelease(array, Void.class, $value1$, $value1$);
2398         });
2399         // Incorrect arity
2400         checkWMTE(() -&gt; { // 0
2401             boolean r = vh.weakCompareAndSetRelease();
2402         });
2403         checkWMTE(() -&gt; { // &gt;
2404             boolean r = vh.weakCompareAndSetRelease(array, 0, $value1$, $value1$, Void.class);
2405         });
2406 
2407 
2408         // CompareAndExchange
2409         // Incorrect argument types
2410         checkNPE(() -&gt; { // null receiver
2411             $type$ x = ($type$) vh.compareAndExchange(null, 0, $value1$, $value1$);
2412         });
2413         checkCCE(() -&gt; { // array reference class
2414             $type$ x = ($type$) vh.compareAndExchange(Void.class, 0, $value1$, $value1$);
2415         });
<span class="line-modified">2416         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2417             $type$ x = ($type$) vh.compareAndExchange(array, 0, Void.class, $value1$);
2418         });
<span class="line-modified">2419         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2420             $type$ x = ($type$) vh.compareAndExchange(array, 0, $value1$, Void.class);
2421         });
2422         checkWMTE(() -&gt; { // array primitive class
2423             $type$ x = ($type$) vh.compareAndExchange(0, 0, $value1$, $value1$);
2424         });
2425         checkWMTE(() -&gt; { // index reference class
2426             $type$ x = ($type$) vh.compareAndExchange(array, Void.class, $value1$, $value1$);
2427         });
2428         // Incorrect return type
<span class="line-modified">2429         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2430             Void r = (Void) vh.compareAndExchange(array, 0, $value1$, $value1$);
2431         });
2432         checkWMTE(() -&gt; { // primitive class
2433             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchange(array, 0, $value1$, $value1$);
2434         });
2435         // Incorrect arity
2436         checkWMTE(() -&gt; { // 0
2437             $type$ x = ($type$) vh.compareAndExchange();
2438         });
2439         checkWMTE(() -&gt; { // &gt;
2440             $type$ x = ($type$) vh.compareAndExchange(array, 0, $value1$, $value1$, Void.class);
2441         });
2442 
2443 
2444         // CompareAndExchangeAcquire
2445         // Incorrect argument types
2446         checkNPE(() -&gt; { // null receiver
2447             $type$ x = ($type$) vh.compareAndExchangeAcquire(null, 0, $value1$, $value1$);
2448         });
2449         checkCCE(() -&gt; { // array reference class
2450             $type$ x = ($type$) vh.compareAndExchangeAcquire(Void.class, 0, $value1$, $value1$);
2451         });
<span class="line-modified">2452         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2453             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, 0, Void.class, $value1$);
2454         });
<span class="line-modified">2455         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2456             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, 0, $value1$, Void.class);
2457         });
2458         checkWMTE(() -&gt; { // array primitive class
2459             $type$ x = ($type$) vh.compareAndExchangeAcquire(0, 0, $value1$, $value1$);
2460         });
2461         checkWMTE(() -&gt; { // index reference class
2462             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, Void.class, $value1$, $value1$);
2463         });
2464         // Incorrect return type
<span class="line-modified">2465         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2466             Void r = (Void) vh.compareAndExchangeAcquire(array, 0, $value1$, $value1$);
2467         });
2468         checkWMTE(() -&gt; { // primitive class
2469             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeAcquire(array, 0, $value1$, $value1$);
2470         });
2471         // Incorrect arity
2472         checkWMTE(() -&gt; { // 0
2473             $type$ x = ($type$) vh.compareAndExchangeAcquire();
2474         });
2475         checkWMTE(() -&gt; { // &gt;
2476             $type$ x = ($type$) vh.compareAndExchangeAcquire(array, 0, $value1$, $value1$, Void.class);
2477         });
2478 
2479 
2480         // CompareAndExchangeRelease
2481         // Incorrect argument types
2482         checkNPE(() -&gt; { // null receiver
2483             $type$ x = ($type$) vh.compareAndExchangeRelease(null, 0, $value1$, $value1$);
2484         });
2485         checkCCE(() -&gt; { // array reference class
2486             $type$ x = ($type$) vh.compareAndExchangeRelease(Void.class, 0, $value1$, $value1$);
2487         });
<span class="line-modified">2488         check{#if[Object]?CCE:WMTE}(() -&gt; { // expected reference class</span>
2489             $type$ x = ($type$) vh.compareAndExchangeRelease(array, 0, Void.class, $value1$);
2490         });
<span class="line-modified">2491         check{#if[Object]?CCE:WMTE}(() -&gt; { // actual reference class</span>
2492             $type$ x = ($type$) vh.compareAndExchangeRelease(array, 0, $value1$, Void.class);
2493         });
2494         checkWMTE(() -&gt; { // array primitive class
2495             $type$ x = ($type$) vh.compareAndExchangeRelease(0, 0, $value1$, $value1$);
2496         });
2497         checkWMTE(() -&gt; { // index reference class
2498             $type$ x = ($type$) vh.compareAndExchangeRelease(array, Void.class, $value1$, $value1$);
2499         });
2500         // Incorrect return type
<span class="line-modified">2501         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2502             Void r = (Void) vh.compareAndExchangeRelease(array, 0, $value1$, $value1$);
2503         });
2504         checkWMTE(() -&gt; { // primitive class
2505             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.compareAndExchangeRelease(array, 0, $value1$, $value1$);
2506         });
2507         // Incorrect arity
2508         checkWMTE(() -&gt; { // 0
2509             $type$ x = ($type$) vh.compareAndExchangeRelease();
2510         });
2511         checkWMTE(() -&gt; { // &gt;
2512             $type$ x = ($type$) vh.compareAndExchangeRelease(array, 0, $value1$, $value1$, Void.class);
2513         });
2514 
2515 
2516         // GetAndSet
2517         // Incorrect argument types
2518         checkNPE(() -&gt; { // null array
2519             $type$ x = ($type$) vh.getAndSet(null, 0, $value1$);
2520         });
2521         checkCCE(() -&gt; { // array reference class
2522             $type$ x = ($type$) vh.getAndSet(Void.class, 0, $value1$);
2523         });
<span class="line-modified">2524         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2525             $type$ x = ($type$) vh.getAndSet(array, 0, Void.class);
2526         });
2527         checkWMTE(() -&gt; { // reciarrayever primitive class
2528             $type$ x = ($type$) vh.getAndSet(0, 0, $value1$);
2529         });
2530         checkWMTE(() -&gt; { // index reference class
2531             $type$ x = ($type$) vh.getAndSet(array, Void.class, $value1$);
2532         });
2533         // Incorrect return type
<span class="line-modified">2534         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2535             Void r = (Void) vh.getAndSet(array, 0, $value1$);
2536         });
2537         checkWMTE(() -&gt; { // primitive class
2538             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSet(array, 0, $value1$);
2539         });
2540         // Incorrect arity
2541         checkWMTE(() -&gt; { // 0
2542             $type$ x = ($type$) vh.getAndSet();
2543         });
2544         checkWMTE(() -&gt; { // &gt;
2545             $type$ x = ($type$) vh.getAndSet(array, 0, $value1$, Void.class);
2546         });
2547 
2548 
2549         // GetAndSetAcquire
2550         // Incorrect argument types
2551         checkNPE(() -&gt; { // null array
2552             $type$ x = ($type$) vh.getAndSetAcquire(null, 0, $value1$);
2553         });
2554         checkCCE(() -&gt; { // array reference class
2555             $type$ x = ($type$) vh.getAndSetAcquire(Void.class, 0, $value1$);
2556         });
<span class="line-modified">2557         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2558             $type$ x = ($type$) vh.getAndSetAcquire(array, 0, Void.class);
2559         });
2560         checkWMTE(() -&gt; { // reciarrayever primitive class
2561             $type$ x = ($type$) vh.getAndSetAcquire(0, 0, $value1$);
2562         });
2563         checkWMTE(() -&gt; { // index reference class
2564             $type$ x = ($type$) vh.getAndSetAcquire(array, Void.class, $value1$);
2565         });
2566         // Incorrect return type
<span class="line-modified">2567         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2568             Void r = (Void) vh.getAndSetAcquire(array, 0, $value1$);
2569         });
2570         checkWMTE(() -&gt; { // primitive class
2571             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetAcquire(array, 0, $value1$);
2572         });
2573         // Incorrect arity
2574         checkWMTE(() -&gt; { // 0
2575             $type$ x = ($type$) vh.getAndSetAcquire();
2576         });
2577         checkWMTE(() -&gt; { // &gt;
2578             $type$ x = ($type$) vh.getAndSetAcquire(array, 0, $value1$, Void.class);
2579         });
2580 
2581 
2582         // GetAndSetRelease
2583         // Incorrect argument types
2584         checkNPE(() -&gt; { // null array
2585             $type$ x = ($type$) vh.getAndSetRelease(null, 0, $value1$);
2586         });
2587         checkCCE(() -&gt; { // array reference class
2588             $type$ x = ($type$) vh.getAndSetRelease(Void.class, 0, $value1$);
2589         });
<span class="line-modified">2590         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2591             $type$ x = ($type$) vh.getAndSetRelease(array, 0, Void.class);
2592         });
2593         checkWMTE(() -&gt; { // reciarrayever primitive class
2594             $type$ x = ($type$) vh.getAndSetRelease(0, 0, $value1$);
2595         });
2596         checkWMTE(() -&gt; { // index reference class
2597             $type$ x = ($type$) vh.getAndSetRelease(array, Void.class, $value1$);
2598         });
2599         // Incorrect return type
<span class="line-modified">2600         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2601             Void r = (Void) vh.getAndSetRelease(array, 0, $value1$);
2602         });
2603         checkWMTE(() -&gt; { // primitive class
2604             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndSetRelease(array, 0, $value1$);
2605         });
2606         // Incorrect arity
2607         checkWMTE(() -&gt; { // 0
2608             $type$ x = ($type$) vh.getAndSetRelease();
2609         });
2610         checkWMTE(() -&gt; { // &gt;
2611             $type$ x = ($type$) vh.getAndSetRelease(array, 0, $value1$, Void.class);
2612         });
2613 #end[CAS]
2614 
2615 #if[AtomicAdd]
2616         // GetAndAdd
2617         // Incorrect argument types
2618         checkNPE(() -&gt; { // null array
2619             $type$ x = ($type$) vh.getAndAdd(null, 0, $value1$);
2620         });
2621         checkCCE(() -&gt; { // array reference class
2622             $type$ x = ($type$) vh.getAndAdd(Void.class, 0, $value1$);
2623         });
<span class="line-modified">2624         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2625             $type$ x = ($type$) vh.getAndAdd(array, 0, Void.class);
2626         });
2627         checkWMTE(() -&gt; { // array primitive class
2628             $type$ x = ($type$) vh.getAndAdd(0, 0, $value1$);
2629         });
2630         checkWMTE(() -&gt; { // index reference class
2631             $type$ x = ($type$) vh.getAndAdd(array, Void.class, $value1$);
2632         });
2633         // Incorrect return type
<span class="line-modified">2634         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2635             Void r = (Void) vh.getAndAdd(array, 0, $value1$);
2636         });
2637         checkWMTE(() -&gt; { // primitive class
2638             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAdd(array, 0, $value1$);
2639         });
2640         // Incorrect arity
2641         checkWMTE(() -&gt; { // 0
2642             $type$ x = ($type$) vh.getAndAdd();
2643         });
2644         checkWMTE(() -&gt; { // &gt;
2645             $type$ x = ($type$) vh.getAndAdd(array, 0, $value1$, Void.class);
2646         });
2647 
2648 
2649         // GetAndAddAcquire
2650         // Incorrect argument types
2651         checkNPE(() -&gt; { // null array
2652             $type$ x = ($type$) vh.getAndAddAcquire(null, 0, $value1$);
2653         });
2654         checkCCE(() -&gt; { // array reference class
2655             $type$ x = ($type$) vh.getAndAddAcquire(Void.class, 0, $value1$);
2656         });
<span class="line-modified">2657         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2658             $type$ x = ($type$) vh.getAndAddAcquire(array, 0, Void.class);
2659         });
2660         checkWMTE(() -&gt; { // array primitive class
2661             $type$ x = ($type$) vh.getAndAddAcquire(0, 0, $value1$);
2662         });
2663         checkWMTE(() -&gt; { // index reference class
2664             $type$ x = ($type$) vh.getAndAddAcquire(array, Void.class, $value1$);
2665         });
2666         // Incorrect return type
<span class="line-modified">2667         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2668             Void r = (Void) vh.getAndAddAcquire(array, 0, $value1$);
2669         });
2670         checkWMTE(() -&gt; { // primitive class
2671             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddAcquire(array, 0, $value1$);
2672         });
2673         // Incorrect arity
2674         checkWMTE(() -&gt; { // 0
2675             $type$ x = ($type$) vh.getAndAddAcquire();
2676         });
2677         checkWMTE(() -&gt; { // &gt;
2678             $type$ x = ($type$) vh.getAndAddAcquire(array, 0, $value1$, Void.class);
2679         });
2680 
2681 
2682         // GetAndAddRelease
2683         // Incorrect argument types
2684         checkNPE(() -&gt; { // null array
2685             $type$ x = ($type$) vh.getAndAddRelease(null, 0, $value1$);
2686         });
2687         checkCCE(() -&gt; { // array reference class
2688             $type$ x = ($type$) vh.getAndAddRelease(Void.class, 0, $value1$);
2689         });
<span class="line-modified">2690         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2691             $type$ x = ($type$) vh.getAndAddRelease(array, 0, Void.class);
2692         });
2693         checkWMTE(() -&gt; { // array primitive class
2694             $type$ x = ($type$) vh.getAndAddRelease(0, 0, $value1$);
2695         });
2696         checkWMTE(() -&gt; { // index reference class
2697             $type$ x = ($type$) vh.getAndAddRelease(array, Void.class, $value1$);
2698         });
2699         // Incorrect return type
<span class="line-modified">2700         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2701             Void r = (Void) vh.getAndAddRelease(array, 0, $value1$);
2702         });
2703         checkWMTE(() -&gt; { // primitive class
2704             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndAddRelease(array, 0, $value1$);
2705         });
2706         // Incorrect arity
2707         checkWMTE(() -&gt; { // 0
2708             $type$ x = ($type$) vh.getAndAddRelease();
2709         });
2710         checkWMTE(() -&gt; { // &gt;
2711             $type$ x = ($type$) vh.getAndAddRelease(array, 0, $value1$, Void.class);
2712         });
2713 #end[AtomicAdd]
2714 
2715 #if[Bitwise]
2716         // GetAndBitwiseOr
2717         // Incorrect argument types
2718         checkNPE(() -&gt; { // null array
2719             $type$ x = ($type$) vh.getAndBitwiseOr(null, 0, $value1$);
2720         });
2721         checkCCE(() -&gt; { // array reference class
2722             $type$ x = ($type$) vh.getAndBitwiseOr(Void.class, 0, $value1$);
2723         });
<span class="line-modified">2724         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2725             $type$ x = ($type$) vh.getAndBitwiseOr(array, 0, Void.class);
2726         });
2727         checkWMTE(() -&gt; { // array primitive class
2728             $type$ x = ($type$) vh.getAndBitwiseOr(0, 0, $value1$);
2729         });
2730         checkWMTE(() -&gt; { // index reference class
2731             $type$ x = ($type$) vh.getAndBitwiseOr(array, Void.class, $value1$);
2732         });
2733         // Incorrect return type
<span class="line-modified">2734         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2735             Void r = (Void) vh.getAndBitwiseOr(array, 0, $value1$);
2736         });
2737         checkWMTE(() -&gt; { // primitive class
2738             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOr(array, 0, $value1$);
2739         });
2740         // Incorrect arity
2741         checkWMTE(() -&gt; { // 0
2742             $type$ x = ($type$) vh.getAndBitwiseOr();
2743         });
2744         checkWMTE(() -&gt; { // &gt;
2745             $type$ x = ($type$) vh.getAndBitwiseOr(array, 0, $value1$, Void.class);
2746         });
2747 
2748 
2749         // GetAndBitwiseOrAcquire
2750         // Incorrect argument types
2751         checkNPE(() -&gt; { // null array
2752             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(null, 0, $value1$);
2753         });
2754         checkCCE(() -&gt; { // array reference class
2755             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(Void.class, 0, $value1$);
2756         });
<span class="line-modified">2757         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2758             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(array, 0, Void.class);
2759         });
2760         checkWMTE(() -&gt; { // array primitive class
2761             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(0, 0, $value1$);
2762         });
2763         checkWMTE(() -&gt; { // index reference class
2764             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(array, Void.class, $value1$);
2765         });
2766         // Incorrect return type
<span class="line-modified">2767         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2768             Void r = (Void) vh.getAndBitwiseOrAcquire(array, 0, $value1$);
2769         });
2770         checkWMTE(() -&gt; { // primitive class
2771             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrAcquire(array, 0, $value1$);
2772         });
2773         // Incorrect arity
2774         checkWMTE(() -&gt; { // 0
2775             $type$ x = ($type$) vh.getAndBitwiseOrAcquire();
2776         });
2777         checkWMTE(() -&gt; { // &gt;
2778             $type$ x = ($type$) vh.getAndBitwiseOrAcquire(array, 0, $value1$, Void.class);
2779         });
2780 
2781 
2782         // GetAndBitwiseOrRelease
2783         // Incorrect argument types
2784         checkNPE(() -&gt; { // null array
2785             $type$ x = ($type$) vh.getAndBitwiseOrRelease(null, 0, $value1$);
2786         });
2787         checkCCE(() -&gt; { // array reference class
2788             $type$ x = ($type$) vh.getAndBitwiseOrRelease(Void.class, 0, $value1$);
2789         });
<span class="line-modified">2790         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2791             $type$ x = ($type$) vh.getAndBitwiseOrRelease(array, 0, Void.class);
2792         });
2793         checkWMTE(() -&gt; { // array primitive class
2794             $type$ x = ($type$) vh.getAndBitwiseOrRelease(0, 0, $value1$);
2795         });
2796         checkWMTE(() -&gt; { // index reference class
2797             $type$ x = ($type$) vh.getAndBitwiseOrRelease(array, Void.class, $value1$);
2798         });
2799         // Incorrect return type
<span class="line-modified">2800         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2801             Void r = (Void) vh.getAndBitwiseOrRelease(array, 0, $value1$);
2802         });
2803         checkWMTE(() -&gt; { // primitive class
2804             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseOrRelease(array, 0, $value1$);
2805         });
2806         // Incorrect arity
2807         checkWMTE(() -&gt; { // 0
2808             $type$ x = ($type$) vh.getAndBitwiseOrRelease();
2809         });
2810         checkWMTE(() -&gt; { // &gt;
2811             $type$ x = ($type$) vh.getAndBitwiseOrRelease(array, 0, $value1$, Void.class);
2812         });
2813 
2814 
2815         // GetAndBitwiseAnd
2816         // Incorrect argument types
2817         checkNPE(() -&gt; { // null array
2818             $type$ x = ($type$) vh.getAndBitwiseAnd(null, 0, $value1$);
2819         });
2820         checkCCE(() -&gt; { // array reference class
2821             $type$ x = ($type$) vh.getAndBitwiseAnd(Void.class, 0, $value1$);
2822         });
<span class="line-modified">2823         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2824             $type$ x = ($type$) vh.getAndBitwiseAnd(array, 0, Void.class);
2825         });
2826         checkWMTE(() -&gt; { // array primitive class
2827             $type$ x = ($type$) vh.getAndBitwiseAnd(0, 0, $value1$);
2828         });
2829         checkWMTE(() -&gt; { // index reference class
2830             $type$ x = ($type$) vh.getAndBitwiseAnd(array, Void.class, $value1$);
2831         });
2832         // Incorrect return type
<span class="line-modified">2833         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2834             Void r = (Void) vh.getAndBitwiseAnd(array, 0, $value1$);
2835         });
2836         checkWMTE(() -&gt; { // primitive class
2837             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAnd(array, 0, $value1$);
2838         });
2839         // Incorrect arity
2840         checkWMTE(() -&gt; { // 0
2841             $type$ x = ($type$) vh.getAndBitwiseAnd();
2842         });
2843         checkWMTE(() -&gt; { // &gt;
2844             $type$ x = ($type$) vh.getAndBitwiseAnd(array, 0, $value1$, Void.class);
2845         });
2846 
2847 
2848         // GetAndBitwiseAndAcquire
2849         // Incorrect argument types
2850         checkNPE(() -&gt; { // null array
2851             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(null, 0, $value1$);
2852         });
2853         checkCCE(() -&gt; { // array reference class
2854             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(Void.class, 0, $value1$);
2855         });
<span class="line-modified">2856         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2857             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(array, 0, Void.class);
2858         });
2859         checkWMTE(() -&gt; { // array primitive class
2860             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(0, 0, $value1$);
2861         });
2862         checkWMTE(() -&gt; { // index reference class
2863             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(array, Void.class, $value1$);
2864         });
2865         // Incorrect return type
<span class="line-modified">2866         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2867             Void r = (Void) vh.getAndBitwiseAndAcquire(array, 0, $value1$);
2868         });
2869         checkWMTE(() -&gt; { // primitive class
2870             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndAcquire(array, 0, $value1$);
2871         });
2872         // Incorrect arity
2873         checkWMTE(() -&gt; { // 0
2874             $type$ x = ($type$) vh.getAndBitwiseAndAcquire();
2875         });
2876         checkWMTE(() -&gt; { // &gt;
2877             $type$ x = ($type$) vh.getAndBitwiseAndAcquire(array, 0, $value1$, Void.class);
2878         });
2879 
2880 
2881         // GetAndBitwiseAndRelease
2882         // Incorrect argument types
2883         checkNPE(() -&gt; { // null array
2884             $type$ x = ($type$) vh.getAndBitwiseAndRelease(null, 0, $value1$);
2885         });
2886         checkCCE(() -&gt; { // array reference class
2887             $type$ x = ($type$) vh.getAndBitwiseAndRelease(Void.class, 0, $value1$);
2888         });
<span class="line-modified">2889         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2890             $type$ x = ($type$) vh.getAndBitwiseAndRelease(array, 0, Void.class);
2891         });
2892         checkWMTE(() -&gt; { // array primitive class
2893             $type$ x = ($type$) vh.getAndBitwiseAndRelease(0, 0, $value1$);
2894         });
2895         checkWMTE(() -&gt; { // index reference class
2896             $type$ x = ($type$) vh.getAndBitwiseAndRelease(array, Void.class, $value1$);
2897         });
2898         // Incorrect return type
<span class="line-modified">2899         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2900             Void r = (Void) vh.getAndBitwiseAndRelease(array, 0, $value1$);
2901         });
2902         checkWMTE(() -&gt; { // primitive class
2903             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseAndRelease(array, 0, $value1$);
2904         });
2905         // Incorrect arity
2906         checkWMTE(() -&gt; { // 0
2907             $type$ x = ($type$) vh.getAndBitwiseAndRelease();
2908         });
2909         checkWMTE(() -&gt; { // &gt;
2910             $type$ x = ($type$) vh.getAndBitwiseAndRelease(array, 0, $value1$, Void.class);
2911         });
2912 
2913 
2914         // GetAndBitwiseXor
2915         // Incorrect argument types
2916         checkNPE(() -&gt; { // null array
2917             $type$ x = ($type$) vh.getAndBitwiseXor(null, 0, $value1$);
2918         });
2919         checkCCE(() -&gt; { // array reference class
2920             $type$ x = ($type$) vh.getAndBitwiseXor(Void.class, 0, $value1$);
2921         });
<span class="line-modified">2922         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2923             $type$ x = ($type$) vh.getAndBitwiseXor(array, 0, Void.class);
2924         });
2925         checkWMTE(() -&gt; { // array primitive class
2926             $type$ x = ($type$) vh.getAndBitwiseXor(0, 0, $value1$);
2927         });
2928         checkWMTE(() -&gt; { // index reference class
2929             $type$ x = ($type$) vh.getAndBitwiseXor(array, Void.class, $value1$);
2930         });
2931         // Incorrect return type
<span class="line-modified">2932         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2933             Void r = (Void) vh.getAndBitwiseXor(array, 0, $value1$);
2934         });
2935         checkWMTE(() -&gt; { // primitive class
2936             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXor(array, 0, $value1$);
2937         });
2938         // Incorrect arity
2939         checkWMTE(() -&gt; { // 0
2940             $type$ x = ($type$) vh.getAndBitwiseXor();
2941         });
2942         checkWMTE(() -&gt; { // &gt;
2943             $type$ x = ($type$) vh.getAndBitwiseXor(array, 0, $value1$, Void.class);
2944         });
2945 
2946 
2947         // GetAndBitwiseXorAcquire
2948         // Incorrect argument types
2949         checkNPE(() -&gt; { // null array
2950             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(null, 0, $value1$);
2951         });
2952         checkCCE(() -&gt; { // array reference class
2953             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(Void.class, 0, $value1$);
2954         });
<span class="line-modified">2955         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2956             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(array, 0, Void.class);
2957         });
2958         checkWMTE(() -&gt; { // array primitive class
2959             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(0, 0, $value1$);
2960         });
2961         checkWMTE(() -&gt; { // index reference class
2962             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(array, Void.class, $value1$);
2963         });
2964         // Incorrect return type
<span class="line-modified">2965         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2966             Void r = (Void) vh.getAndBitwiseXorAcquire(array, 0, $value1$);
2967         });
2968         checkWMTE(() -&gt; { // primitive class
2969             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorAcquire(array, 0, $value1$);
2970         });
2971         // Incorrect arity
2972         checkWMTE(() -&gt; { // 0
2973             $type$ x = ($type$) vh.getAndBitwiseXorAcquire();
2974         });
2975         checkWMTE(() -&gt; { // &gt;
2976             $type$ x = ($type$) vh.getAndBitwiseXorAcquire(array, 0, $value1$, Void.class);
2977         });
2978 
2979 
2980         // GetAndBitwiseXorRelease
2981         // Incorrect argument types
2982         checkNPE(() -&gt; { // null array
2983             $type$ x = ($type$) vh.getAndBitwiseXorRelease(null, 0, $value1$);
2984         });
2985         checkCCE(() -&gt; { // array reference class
2986             $type$ x = ($type$) vh.getAndBitwiseXorRelease(Void.class, 0, $value1$);
2987         });
<span class="line-modified">2988         check{#if[Object]?CCE:WMTE}(() -&gt; { // value reference class</span>
2989             $type$ x = ($type$) vh.getAndBitwiseXorRelease(array, 0, Void.class);
2990         });
2991         checkWMTE(() -&gt; { // array primitive class
2992             $type$ x = ($type$) vh.getAndBitwiseXorRelease(0, 0, $value1$);
2993         });
2994         checkWMTE(() -&gt; { // index reference class
2995             $type$ x = ($type$) vh.getAndBitwiseXorRelease(array, Void.class, $value1$);
2996         });
2997         // Incorrect return type
<span class="line-modified">2998         check{#if[Object]?CCE:WMTE}(() -&gt; { // reference class</span>
2999             Void r = (Void) vh.getAndBitwiseXorRelease(array, 0, $value1$);
3000         });
3001         checkWMTE(() -&gt; { // primitive class
3002             $wrong_primitive_type$ x = ($wrong_primitive_type$) vh.getAndBitwiseXorRelease(array, 0, $value1$);
3003         });
3004         // Incorrect arity
3005         checkWMTE(() -&gt; { // 0
3006             $type$ x = ($type$) vh.getAndBitwiseXorRelease();
3007         });
3008         checkWMTE(() -&gt; { // &gt;
3009             $type$ x = ($type$) vh.getAndBitwiseXorRelease(array, 0, $value1$, Void.class);
3010         });
3011 #end[Bitwise]
3012     }
3013 
3014     static void testArrayWrongMethodType(Handles hs) throws Throwable {
3015         $type$[] array = new $type$[10];
3016         Arrays.fill(array, $value1$);
3017 
3018         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
3019             // Incorrect argument types
3020             checkNPE(() -&gt; { // null array
3021                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class)).
3022                     invokeExact(($type$[]) null, 0);
3023             });
3024             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3025                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class)).
3026                     invokeExact(Void.class, 0);
3027             });
3028             checkWMTE(() -&gt; { // array primitive class
3029                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class)).
3030                     invokeExact(0, 0);
3031             });
3032             checkWMTE(() -&gt; { // index reference class
3033                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class)).
3034                     invokeExact(array, Void.class);
3035             });
3036             // Incorrect return type
<span class="line-modified">3037             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3038                 Void x = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class)).
3039                     invokeExact(array, 0);
3040             });
3041             checkWMTE(() -&gt; { // primitive class
3042                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class)).
3043                     invokeExact(array, 0);
3044             });
3045             // Incorrect arity
3046             checkWMTE(() -&gt; { // 0
3047                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3048                     invokeExact();
3049             });
3050             checkWMTE(() -&gt; { // &gt;
3051                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3052                     invokeExact(array, 0, Void.class);
3053             });
3054         }
3055 
3056         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
3057             // Incorrect argument types
3058             checkNPE(() -&gt; { // null array
3059                 hs.get(am, methodType(void.class, $type$[].class, int.class, $type$.class)).
3060                     invokeExact(($type$[]) null, 0, $value1$);
3061             });
3062             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3063                 hs.get(am, methodType(void.class, Class.class, int.class, $type$.class)).
3064                     invokeExact(Void.class, 0, $value1$);
3065             });
<span class="line-modified">3066             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3067                 hs.get(am, methodType(void.class, $type$[].class, int.class, Class.class)).
3068                     invokeExact(array, 0, Void.class);
3069             });
3070             checkWMTE(() -&gt; { // receiver primitive class
3071                 hs.get(am, methodType(void.class, int.class, int.class, $type$.class)).
3072                     invokeExact(0, 0, $value1$);
3073             });
3074             checkWMTE(() -&gt; { // index reference class
3075                 hs.get(am, methodType(void.class, $type$[].class, Class.class, $type$.class)).
3076                     invokeExact(array, Void.class, $value1$);
3077             });
3078             // Incorrect arity
3079             checkWMTE(() -&gt; { // 0
3080                 hs.get(am, methodType(void.class)).
3081                     invokeExact();
3082             });
3083             checkWMTE(() -&gt; { // &gt;
3084                 hs.get(am, methodType(void.class, $type$[].class, int.class, Class.class)).
3085                     invokeExact(array, 0, $value1$, Void.class);
3086             });
3087         }
3088 #if[CAS]
3089         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
3090             // Incorrect argument types
3091             checkNPE(() -&gt; { // null receiver
3092                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, $type$.class, $type$.class)).
3093                     invokeExact(($type$[]) null, 0, $value1$, $value1$);
3094             });
3095             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
3096                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, int.class, $type$.class, $type$.class)).
3097                     invokeExact(Void.class, 0, $value1$, $value1$);
3098             });
<span class="line-modified">3099             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
3100                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, Class.class, $type$.class)).
3101                     invokeExact(array, 0, Void.class, $value1$);
3102             });
<span class="line-modified">3103             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
3104                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, $type$.class, Class.class)).
3105                     invokeExact(array, 0, $value1$, Void.class);
3106             });
3107             checkWMTE(() -&gt; { // receiver primitive class
3108                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class, int.class, $type$.class, $type$.class)).
3109                     invokeExact(0, 0, $value1$, $value1$);
3110             });
3111             checkWMTE(() -&gt; { // index reference class
3112                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, Class.class, $type$.class, $type$.class)).
3113                     invokeExact(array, Void.class, $value1$, $value1$);
3114             });
3115             // Incorrect arity
3116             checkWMTE(() -&gt; { // 0
3117                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
3118                     invokeExact();
3119             });
3120             checkWMTE(() -&gt; { // &gt;
3121                 boolean r = (boolean) hs.get(am, methodType(boolean.class, $type$[].class, int.class, $type$.class, $type$.class, Class.class)).
3122                     invokeExact(array, 0, $value1$, $value1$, Void.class);
3123             });
3124         }
3125 
3126         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
3127             // Incorrect argument types
3128             checkNPE(() -&gt; { // null receiver
3129                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, $type$.class)).
3130                     invokeExact(($type$[]) null, 0, $value1$, $value1$);
3131             });
3132             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3133                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class, $type$.class)).
3134                     invokeExact(Void.class, 0, $value1$, $value1$);
3135             });
<span class="line-modified">3136             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // expected reference class</span>
3137                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class, $type$.class)).
3138                     invokeExact(array, 0, Void.class, $value1$);
3139             });
<span class="line-modified">3140             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // actual reference class</span>
3141                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3142                     invokeExact(array, 0, $value1$, Void.class);
3143             });
3144             checkWMTE(() -&gt; { // array primitive class
3145                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class, $type$.class)).
3146                     invokeExact(0, 0, $value1$, $value1$);
3147             });
3148             checkWMTE(() -&gt; { // index reference class
3149                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class, $type$.class)).
3150                     invokeExact(array, Void.class, $value1$, $value1$);
3151             });
3152             // Incorrect return type
<span class="line-modified">3153             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3154                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class, $type$.class)).
3155                     invokeExact(array, 0, $value1$, $value1$);
3156             });
3157             checkWMTE(() -&gt; { // primitive class
3158                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class, $type$.class)).
3159                     invokeExact(array, 0, $value1$, $value1$);
3160             });
3161             // Incorrect arity
3162             checkWMTE(() -&gt; { // 0
3163                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3164                     invokeExact();
3165             });
3166             checkWMTE(() -&gt; { // &gt;
3167                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, $type$.class, Class.class)).
3168                     invokeExact(array, 0, $value1$, $value1$, Void.class);
3169             });
3170         }
3171 
3172         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
3173             // Incorrect argument types
3174             checkNPE(() -&gt; { // null array
3175                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class)).
3176                     invokeExact(($type$[]) null, 0, $value1$);
3177             });
3178             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3179                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class)).
3180                     invokeExact(Void.class, 0, $value1$);
3181             });
<span class="line-modified">3182             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3183                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3184                     invokeExact(array, 0, Void.class);
3185             });
3186             checkWMTE(() -&gt; { // array primitive class
3187                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class)).
3188                     invokeExact(0, 0, $value1$);
3189             });
3190             checkWMTE(() -&gt; { // index reference class
3191                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class)).
3192                     invokeExact(array, Void.class, $value1$);
3193             });
3194             // Incorrect return type
<span class="line-modified">3195             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3196                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class)).
3197                     invokeExact(array, 0, $value1$);
3198             });
3199             checkWMTE(() -&gt; { // primitive class
3200                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class)).
3201                     invokeExact(array, 0, $value1$);
3202             });
3203             // Incorrect arity
3204             checkWMTE(() -&gt; { // 0
3205                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3206                     invokeExact();
3207             });
3208             checkWMTE(() -&gt; { // &gt;
3209                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3210                     invokeExact(array, 0, $value1$, Void.class);
3211             });
3212         }
3213 #end[CAS]
3214 
3215 #if[AtomicAdd]
3216         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
3217             // Incorrect argument types
3218             checkNPE(() -&gt; { // null array
3219                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class)).
3220                     invokeExact(($type$[]) null, 0, $value1$);
3221             });
3222             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3223                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class)).
3224                     invokeExact(Void.class, 0, $value1$);
3225             });
<span class="line-modified">3226             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3227                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3228                     invokeExact(array, 0, Void.class);
3229             });
3230             checkWMTE(() -&gt; { // array primitive class
3231                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class)).
3232                     invokeExact(0, 0, $value1$);
3233             });
3234             checkWMTE(() -&gt; { // index reference class
3235                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class)).
3236                     invokeExact(array, Void.class, $value1$);
3237             });
3238             // Incorrect return type
<span class="line-modified">3239             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3240                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class)).
3241                     invokeExact(array, 0, $value1$);
3242             });
3243             checkWMTE(() -&gt; { // primitive class
3244                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class)).
3245                     invokeExact(array, 0, $value1$);
3246             });
3247             // Incorrect arity
3248             checkWMTE(() -&gt; { // 0
3249                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3250                     invokeExact();
3251             });
3252             checkWMTE(() -&gt; { // &gt;
3253                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3254                     invokeExact(array, 0, $value1$, Void.class);
3255             });
3256         }
3257 #end[AtomicAdd]
3258 
3259 #if[Bitwise]
3260         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_BITWISE)) {
3261             // Incorrect argument types
3262             checkNPE(() -&gt; { // null array
3263                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class)).
3264                     invokeExact(($type$[]) null, 0, $value1$);
3265             });
3266             hs.checkWMTEOrCCE(() -&gt; { // array reference class
3267                 $type$ x = ($type$) hs.get(am, methodType($type$.class, Class.class, int.class, $type$.class)).
3268                     invokeExact(Void.class, 0, $value1$);
3269             });
<span class="line-modified">3270             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // value reference class</span>
3271                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, Class.class)).
3272                     invokeExact(array, 0, Void.class);
3273             });
3274             checkWMTE(() -&gt; { // array primitive class
3275                 $type$ x = ($type$) hs.get(am, methodType($type$.class, int.class, int.class, $type$.class)).
3276                     invokeExact(0, 0, $value1$);
3277             });
3278             checkWMTE(() -&gt; { // index reference class
3279                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, Class.class, $type$.class)).
3280                     invokeExact(array, Void.class, $value1$);
3281             });
3282             // Incorrect return type
<span class="line-modified">3283             {#if[Object]?hs.checkWMTEOrCCE:checkWMTE}(() -&gt; { // reference class</span>
3284                 Void r = (Void) hs.get(am, methodType(Void.class, $type$[].class, int.class, $type$.class)).
3285                     invokeExact(array, 0, $value1$);
3286             });
3287             checkWMTE(() -&gt; { // primitive class
3288                 $wrong_primitive_type$ x = ($wrong_primitive_type$) hs.get(am, methodType($wrong_primitive_type$.class, $type$[].class, int.class, $type$.class)).
3289                     invokeExact(array, 0, $value1$);
3290             });
3291             // Incorrect arity
3292             checkWMTE(() -&gt; { // 0
3293                 $type$ x = ($type$) hs.get(am, methodType($type$.class)).
3294                     invokeExact();
3295             });
3296             checkWMTE(() -&gt; { // &gt;
3297                 $type$ x = ($type$) hs.get(am, methodType($type$.class, $type$[].class, int.class, $type$.class, Class.class)).
3298                     invokeExact(array, 0, $value1$, Void.class);
3299             });
3300         }
3301 #end[Bitwise]
3302     }
3303 }
</pre>
</td>
</tr>
</table>
<center><a href="VarHandleTestMethodTypeString.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>