<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/jdk/java/lang/invoke/VarHandles/VarHandleTestMethodTypeFloat.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
   1 /*
   2  * Copyright (c) 2015, 2020, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  */
  23 
  24 // -- This file was mechanically generated: Do not edit! -- //
  25 
  26 /*
  27  * @test
  28  * @bug 8156486
  29  * @run testng/othervm VarHandleTestMethodTypeFloat
  30  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=true -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=true VarHandleTestMethodTypeFloat
  31  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=false VarHandleTestMethodTypeFloat
  32  * @run testng/othervm -Djava.lang.invoke.VarHandle.VAR_HANDLE_GUARDS=false -Djava.lang.invoke.VarHandle.VAR_HANDLE_IDENTITY_ADAPT=true VarHandleTestMethodTypeFloat
  33  */
  34 
  35 import org.testng.annotations.BeforeClass;
  36 import org.testng.annotations.DataProvider;
  37 import org.testng.annotations.Test;
  38 
  39 import java.lang.invoke.MethodHandles;
  40 import java.lang.invoke.VarHandle;
  41 import java.util.ArrayList;
  42 import java.util.Arrays;
  43 import java.util.List;
  44 
  45 import static org.testng.Assert.*;
  46 
  47 import static java.lang.invoke.MethodType.*;
  48 
  49 public class VarHandleTestMethodTypeFloat extends VarHandleBaseTest {
  50     static final float static_final_v = 1.0f;
  51 
  52     static float static_v = 1.0f;
  53 
  54     final float final_v = 1.0f;
  55 
  56     float v = 1.0f;
  57 
  58     VarHandle vhFinalField;
  59 
  60     VarHandle vhField;
  61 
  62     VarHandle vhStaticField;
  63 
  64     VarHandle vhStaticFinalField;
  65 
  66     VarHandle vhArray;
  67 
  68     @BeforeClass
  69     public void setup() throws Exception {
  70         vhFinalField = MethodHandles.lookup().findVarHandle(
  71                 VarHandleTestMethodTypeFloat.class, &quot;final_v&quot;, float.class);
  72 
  73         vhField = MethodHandles.lookup().findVarHandle(
  74                 VarHandleTestMethodTypeFloat.class, &quot;v&quot;, float.class);
  75 
  76         vhStaticFinalField = MethodHandles.lookup().findStaticVarHandle(
  77             VarHandleTestMethodTypeFloat.class, &quot;static_final_v&quot;, float.class);
  78 
  79         vhStaticField = MethodHandles.lookup().findStaticVarHandle(
  80             VarHandleTestMethodTypeFloat.class, &quot;static_v&quot;, float.class);
  81 
  82         vhArray = MethodHandles.arrayElementVarHandle(float[].class);
  83     }
  84 
  85     @DataProvider
  86     public Object[][] accessTestCaseProvider() throws Exception {
  87         List&lt;AccessTestCase&lt;?&gt;&gt; cases = new ArrayList&lt;&gt;();
  88 
  89         cases.add(new VarHandleAccessTestCase(&quot;Instance field&quot;,
  90                                               vhField, vh -&gt; testInstanceFieldWrongMethodType(this, vh),
  91                                               false));
  92 
  93         cases.add(new VarHandleAccessTestCase(&quot;Static field&quot;,
  94                                               vhStaticField, VarHandleTestMethodTypeFloat::testStaticFieldWrongMethodType,
  95                                               false));
  96 
  97         cases.add(new VarHandleAccessTestCase(&quot;Array&quot;,
  98                                               vhArray, VarHandleTestMethodTypeFloat::testArrayWrongMethodType,
  99                                               false));
 100 
 101         for (VarHandleToMethodHandle f : VarHandleToMethodHandle.values()) {
 102             cases.add(new MethodHandleAccessTestCase(&quot;Instance field&quot;,
 103                                                      vhField, f, hs -&gt; testInstanceFieldWrongMethodType(this, hs),
 104                                                      false));
 105 
 106             cases.add(new MethodHandleAccessTestCase(&quot;Static field&quot;,
 107                                                      vhStaticField, f, VarHandleTestMethodTypeFloat::testStaticFieldWrongMethodType,
 108                                                      false));
 109 
 110             cases.add(new MethodHandleAccessTestCase(&quot;Array&quot;,
 111                                                      vhArray, f, VarHandleTestMethodTypeFloat::testArrayWrongMethodType,
 112                                                      false));
 113         }
 114         // Work around issue with jtreg summary reporting which truncates
 115         // the String result of Object.toString to 30 characters, hence
 116         // the first dummy argument
 117         return cases.stream().map(tc -&gt; new Object[]{tc.toString(), tc}).toArray(Object[][]::new);
 118     }
 119 
 120     @Test(dataProvider = &quot;accessTestCaseProvider&quot;)
 121     public &lt;T&gt; void testAccess(String desc, AccessTestCase&lt;T&gt; atc) throws Throwable {
 122         T t = atc.get();
 123         int iters = atc.requiresLoop() ? ITERS : 1;
 124         for (int c = 0; c &lt; iters; c++) {
 125             atc.testAccess(t);
 126         }
 127     }
 128 
 129 
 130     static void testInstanceFieldWrongMethodType(VarHandleTestMethodTypeFloat recv, VarHandle vh) throws Throwable {
 131         // Get
 132         // Incorrect argument types
 133         checkNPE(() -&gt; { // null receiver
 134             float x = (float) vh.get(null);
 135         });
 136         checkCCE(() -&gt; { // receiver reference class
 137             float x = (float) vh.get(Void.class);
 138         });
 139         checkWMTE(() -&gt; { // receiver primitive class
 140             float x = (float) vh.get(0);
 141         });
 142         // Incorrect return type
 143         checkWMTE(() -&gt; { // reference class
 144             Void x = (Void) vh.get(recv);
 145         });
 146         checkWMTE(() -&gt; { // primitive class
 147             boolean x = (boolean) vh.get(recv);
 148         });
 149         // Incorrect arity
 150         checkWMTE(() -&gt; { // 0
 151             float x = (float) vh.get();
 152         });
 153         checkWMTE(() -&gt; { // &gt;
 154             float x = (float) vh.get(recv, Void.class);
 155         });
 156 
 157 
 158         // Set
 159         // Incorrect argument types
 160         checkNPE(() -&gt; { // null receiver
 161             vh.set(null, 1.0f);
 162         });
 163         checkCCE(() -&gt; { // receiver reference class
 164             vh.set(Void.class, 1.0f);
 165         });
 166         checkWMTE(() -&gt; { // value reference class
 167             vh.set(recv, Void.class);
 168         });
 169         checkWMTE(() -&gt; { // receiver primitive class
 170             vh.set(0, 1.0f);
 171         });
 172         // Incorrect arity
 173         checkWMTE(() -&gt; { // 0
 174             vh.set();
 175         });
 176         checkWMTE(() -&gt; { // &gt;
 177             vh.set(recv, 1.0f, Void.class);
 178         });
 179 
 180 
 181         // GetVolatile
 182         // Incorrect argument types
 183         checkNPE(() -&gt; { // null receiver
 184             float x = (float) vh.getVolatile(null);
 185         });
 186         checkCCE(() -&gt; { // receiver reference class
 187             float x = (float) vh.getVolatile(Void.class);
 188         });
 189         checkWMTE(() -&gt; { // receiver primitive class
 190             float x = (float) vh.getVolatile(0);
 191         });
 192         // Incorrect return type
 193         checkWMTE(() -&gt; { // reference class
 194             Void x = (Void) vh.getVolatile(recv);
 195         });
 196         checkWMTE(() -&gt; { // primitive class
 197             boolean x = (boolean) vh.getVolatile(recv);
 198         });
 199         // Incorrect arity
 200         checkWMTE(() -&gt; { // 0
 201             float x = (float) vh.getVolatile();
 202         });
 203         checkWMTE(() -&gt; { // &gt;
 204             float x = (float) vh.getVolatile(recv, Void.class);
 205         });
 206 
 207 
 208         // SetVolatile
 209         // Incorrect argument types
 210         checkNPE(() -&gt; { // null receiver
 211             vh.setVolatile(null, 1.0f);
 212         });
 213         checkCCE(() -&gt; { // receiver reference class
 214             vh.setVolatile(Void.class, 1.0f);
 215         });
 216         checkWMTE(() -&gt; { // value reference class
 217             vh.setVolatile(recv, Void.class);
 218         });
 219         checkWMTE(() -&gt; { // receiver primitive class
 220             vh.setVolatile(0, 1.0f);
 221         });
 222         // Incorrect arity
 223         checkWMTE(() -&gt; { // 0
 224             vh.setVolatile();
 225         });
 226         checkWMTE(() -&gt; { // &gt;
 227             vh.setVolatile(recv, 1.0f, Void.class);
 228         });
 229 
 230 
 231         // GetOpaque
 232         // Incorrect argument types
 233         checkNPE(() -&gt; { // null receiver
 234             float x = (float) vh.getOpaque(null);
 235         });
 236         checkCCE(() -&gt; { // receiver reference class
 237             float x = (float) vh.getOpaque(Void.class);
 238         });
 239         checkWMTE(() -&gt; { // receiver primitive class
 240             float x = (float) vh.getOpaque(0);
 241         });
 242         // Incorrect return type
 243         checkWMTE(() -&gt; { // reference class
 244             Void x = (Void) vh.getOpaque(recv);
 245         });
 246         checkWMTE(() -&gt; { // primitive class
 247             boolean x = (boolean) vh.getOpaque(recv);
 248         });
 249         // Incorrect arity
 250         checkWMTE(() -&gt; { // 0
 251             float x = (float) vh.getOpaque();
 252         });
 253         checkWMTE(() -&gt; { // &gt;
 254             float x = (float) vh.getOpaque(recv, Void.class);
 255         });
 256 
 257 
 258         // SetOpaque
 259         // Incorrect argument types
 260         checkNPE(() -&gt; { // null receiver
 261             vh.setOpaque(null, 1.0f);
 262         });
 263         checkCCE(() -&gt; { // receiver reference class
 264             vh.setOpaque(Void.class, 1.0f);
 265         });
 266         checkWMTE(() -&gt; { // value reference class
 267             vh.setOpaque(recv, Void.class);
 268         });
 269         checkWMTE(() -&gt; { // receiver primitive class
 270             vh.setOpaque(0, 1.0f);
 271         });
 272         // Incorrect arity
 273         checkWMTE(() -&gt; { // 0
 274             vh.setOpaque();
 275         });
 276         checkWMTE(() -&gt; { // &gt;
 277             vh.setOpaque(recv, 1.0f, Void.class);
 278         });
 279 
 280 
 281         // GetAcquire
 282         // Incorrect argument types
 283         checkNPE(() -&gt; { // null receiver
 284             float x = (float) vh.getAcquire(null);
 285         });
 286         checkCCE(() -&gt; { // receiver reference class
 287             float x = (float) vh.getAcquire(Void.class);
 288         });
 289         checkWMTE(() -&gt; { // receiver primitive class
 290             float x = (float) vh.getAcquire(0);
 291         });
 292         // Incorrect return type
 293         checkWMTE(() -&gt; { // reference class
 294             Void x = (Void) vh.getAcquire(recv);
 295         });
 296         checkWMTE(() -&gt; { // primitive class
 297             boolean x = (boolean) vh.getAcquire(recv);
 298         });
 299         // Incorrect arity
 300         checkWMTE(() -&gt; { // 0
 301             float x = (float) vh.getAcquire();
 302         });
 303         checkWMTE(() -&gt; { // &gt;
 304             float x = (float) vh.getAcquire(recv, Void.class);
 305         });
 306 
 307 
 308         // SetRelease
 309         // Incorrect argument types
 310         checkNPE(() -&gt; { // null receiver
 311             vh.setRelease(null, 1.0f);
 312         });
 313         checkCCE(() -&gt; { // receiver reference class
 314             vh.setRelease(Void.class, 1.0f);
 315         });
 316         checkWMTE(() -&gt; { // value reference class
 317             vh.setRelease(recv, Void.class);
 318         });
 319         checkWMTE(() -&gt; { // receiver primitive class
 320             vh.setRelease(0, 1.0f);
 321         });
 322         // Incorrect arity
 323         checkWMTE(() -&gt; { // 0
 324             vh.setRelease();
 325         });
 326         checkWMTE(() -&gt; { // &gt;
 327             vh.setRelease(recv, 1.0f, Void.class);
 328         });
 329 
 330 
 331         // CompareAndSet
 332         // Incorrect argument types
 333         checkNPE(() -&gt; { // null receiver
 334             boolean r = vh.compareAndSet(null, 1.0f, 1.0f);
 335         });
 336         checkCCE(() -&gt; { // receiver reference class
 337             boolean r = vh.compareAndSet(Void.class, 1.0f, 1.0f);
 338         });
 339         checkWMTE(() -&gt; { // expected reference class
 340             boolean r = vh.compareAndSet(recv, Void.class, 1.0f);
 341         });
 342         checkWMTE(() -&gt; { // actual reference class
 343             boolean r = vh.compareAndSet(recv, 1.0f, Void.class);
 344         });
 345         checkWMTE(() -&gt; { // receiver primitive class
 346             boolean r = vh.compareAndSet(0, 1.0f, 1.0f);
 347         });
 348         // Incorrect arity
 349         checkWMTE(() -&gt; { // 0
 350             boolean r = vh.compareAndSet();
 351         });
 352         checkWMTE(() -&gt; { // &gt;
 353             boolean r = vh.compareAndSet(recv, 1.0f, 1.0f, Void.class);
 354         });
 355 
 356 
 357         // WeakCompareAndSet
 358         // Incorrect argument types
 359         checkNPE(() -&gt; { // null receiver
 360             boolean r = vh.weakCompareAndSetPlain(null, 1.0f, 1.0f);
 361         });
 362         checkCCE(() -&gt; { // receiver reference class
 363             boolean r = vh.weakCompareAndSetPlain(Void.class, 1.0f, 1.0f);
 364         });
 365         checkWMTE(() -&gt; { // expected reference class
 366             boolean r = vh.weakCompareAndSetPlain(recv, Void.class, 1.0f);
 367         });
 368         checkWMTE(() -&gt; { // actual reference class
 369             boolean r = vh.weakCompareAndSetPlain(recv, 1.0f, Void.class);
 370         });
 371         checkWMTE(() -&gt; { // receiver primitive class
 372             boolean r = vh.weakCompareAndSetPlain(0, 1.0f, 1.0f);
 373         });
 374         // Incorrect arity
 375         checkWMTE(() -&gt; { // 0
 376             boolean r = vh.weakCompareAndSetPlain();
 377         });
 378         checkWMTE(() -&gt; { // &gt;
 379             boolean r = vh.weakCompareAndSetPlain(recv, 1.0f, 1.0f, Void.class);
 380         });
 381 
 382 
 383         // WeakCompareAndSetVolatile
 384         // Incorrect argument types
 385         checkNPE(() -&gt; { // null receiver
 386             boolean r = vh.weakCompareAndSet(null, 1.0f, 1.0f);
 387         });
 388         checkCCE(() -&gt; { // receiver reference class
 389             boolean r = vh.weakCompareAndSet(Void.class, 1.0f, 1.0f);
 390         });
 391         checkWMTE(() -&gt; { // expected reference class
 392             boolean r = vh.weakCompareAndSet(recv, Void.class, 1.0f);
 393         });
 394         checkWMTE(() -&gt; { // actual reference class
 395             boolean r = vh.weakCompareAndSet(recv, 1.0f, Void.class);
 396         });
 397         checkWMTE(() -&gt; { // receiver primitive class
 398             boolean r = vh.weakCompareAndSet(0, 1.0f, 1.0f);
 399         });
 400         // Incorrect arity
 401         checkWMTE(() -&gt; { // 0
 402             boolean r = vh.weakCompareAndSet();
 403         });
 404         checkWMTE(() -&gt; { // &gt;
 405             boolean r = vh.weakCompareAndSet(recv, 1.0f, 1.0f, Void.class);
 406         });
 407 
 408 
 409         // WeakCompareAndSetAcquire
 410         // Incorrect argument types
 411         checkNPE(() -&gt; { // null receiver
 412             boolean r = vh.weakCompareAndSetAcquire(null, 1.0f, 1.0f);
 413         });
 414         checkCCE(() -&gt; { // receiver reference class
 415             boolean r = vh.weakCompareAndSetAcquire(Void.class, 1.0f, 1.0f);
 416         });
 417         checkWMTE(() -&gt; { // expected reference class
 418             boolean r = vh.weakCompareAndSetAcquire(recv, Void.class, 1.0f);
 419         });
 420         checkWMTE(() -&gt; { // actual reference class
 421             boolean r = vh.weakCompareAndSetAcquire(recv, 1.0f, Void.class);
 422         });
 423         checkWMTE(() -&gt; { // receiver primitive class
 424             boolean r = vh.weakCompareAndSetAcquire(0, 1.0f, 1.0f);
 425         });
 426         // Incorrect arity
 427         checkWMTE(() -&gt; { // 0
 428             boolean r = vh.weakCompareAndSetAcquire();
 429         });
 430         checkWMTE(() -&gt; { // &gt;
 431             boolean r = vh.weakCompareAndSetAcquire(recv, 1.0f, 1.0f, Void.class);
 432         });
 433 
 434 
 435         // WeakCompareAndSetRelease
 436         // Incorrect argument types
 437         checkNPE(() -&gt; { // null receiver
 438             boolean r = vh.weakCompareAndSetRelease(null, 1.0f, 1.0f);
 439         });
 440         checkCCE(() -&gt; { // receiver reference class
 441             boolean r = vh.weakCompareAndSetRelease(Void.class, 1.0f, 1.0f);
 442         });
 443         checkWMTE(() -&gt; { // expected reference class
 444             boolean r = vh.weakCompareAndSetRelease(recv, Void.class, 1.0f);
 445         });
 446         checkWMTE(() -&gt; { // actual reference class
 447             boolean r = vh.weakCompareAndSetRelease(recv, 1.0f, Void.class);
 448         });
 449         checkWMTE(() -&gt; { // receiver primitive class
 450             boolean r = vh.weakCompareAndSetRelease(0, 1.0f, 1.0f);
 451         });
 452         // Incorrect arity
 453         checkWMTE(() -&gt; { // 0
 454             boolean r = vh.weakCompareAndSetRelease();
 455         });
 456         checkWMTE(() -&gt; { // &gt;
 457             boolean r = vh.weakCompareAndSetRelease(recv, 1.0f, 1.0f, Void.class);
 458         });
 459 
 460 
 461         // CompareAndExchange
 462         // Incorrect argument types
 463         checkNPE(() -&gt; { // null receiver
 464             float x = (float) vh.compareAndExchange(null, 1.0f, 1.0f);
 465         });
 466         checkCCE(() -&gt; { // receiver reference class
 467             float x = (float) vh.compareAndExchange(Void.class, 1.0f, 1.0f);
 468         });
 469         checkWMTE(() -&gt; { // expected reference class
 470             float x = (float) vh.compareAndExchange(recv, Void.class, 1.0f);
 471         });
 472         checkWMTE(() -&gt; { // actual reference class
 473             float x = (float) vh.compareAndExchange(recv, 1.0f, Void.class);
 474         });
 475         checkWMTE(() -&gt; { // reciever primitive class
 476             float x = (float) vh.compareAndExchange(0, 1.0f, 1.0f);
 477         });
 478         // Incorrect return type
 479         checkWMTE(() -&gt; { // reference class
 480             Void r = (Void) vh.compareAndExchange(recv, 1.0f, 1.0f);
 481         });
 482         checkWMTE(() -&gt; { // primitive class
 483             boolean x = (boolean) vh.compareAndExchange(recv, 1.0f, 1.0f);
 484         });
 485         // Incorrect arity
 486         checkWMTE(() -&gt; { // 0
 487             float x = (float) vh.compareAndExchange();
 488         });
 489         checkWMTE(() -&gt; { // &gt;
 490             float x = (float) vh.compareAndExchange(recv, 1.0f, 1.0f, Void.class);
 491         });
 492 
 493 
 494         // CompareAndExchangeAcquire
 495         // Incorrect argument types
 496         checkNPE(() -&gt; { // null receiver
 497             float x = (float) vh.compareAndExchangeAcquire(null, 1.0f, 1.0f);
 498         });
 499         checkCCE(() -&gt; { // receiver reference class
 500             float x = (float) vh.compareAndExchangeAcquire(Void.class, 1.0f, 1.0f);
 501         });
 502         checkWMTE(() -&gt; { // expected reference class
 503             float x = (float) vh.compareAndExchangeAcquire(recv, Void.class, 1.0f);
 504         });
 505         checkWMTE(() -&gt; { // actual reference class
 506             float x = (float) vh.compareAndExchangeAcquire(recv, 1.0f, Void.class);
 507         });
 508         checkWMTE(() -&gt; { // reciever primitive class
 509             float x = (float) vh.compareAndExchangeAcquire(0, 1.0f, 1.0f);
 510         });
 511         // Incorrect return type
 512         checkWMTE(() -&gt; { // reference class
 513             Void r = (Void) vh.compareAndExchangeAcquire(recv, 1.0f, 1.0f);
 514         });
 515         checkWMTE(() -&gt; { // primitive class
 516             boolean x = (boolean) vh.compareAndExchangeAcquire(recv, 1.0f, 1.0f);
 517         });
 518         // Incorrect arity
 519         checkWMTE(() -&gt; { // 0
 520             float x = (float) vh.compareAndExchangeAcquire();
 521         });
 522         checkWMTE(() -&gt; { // &gt;
 523             float x = (float) vh.compareAndExchangeAcquire(recv, 1.0f, 1.0f, Void.class);
 524         });
 525 
 526 
 527         // CompareAndExchangeRelease
 528         // Incorrect argument types
 529         checkNPE(() -&gt; { // null receiver
 530             float x = (float) vh.compareAndExchangeRelease(null, 1.0f, 1.0f);
 531         });
 532         checkCCE(() -&gt; { // receiver reference class
 533             float x = (float) vh.compareAndExchangeRelease(Void.class, 1.0f, 1.0f);
 534         });
 535         checkWMTE(() -&gt; { // expected reference class
 536             float x = (float) vh.compareAndExchangeRelease(recv, Void.class, 1.0f);
 537         });
 538         checkWMTE(() -&gt; { // actual reference class
 539             float x = (float) vh.compareAndExchangeRelease(recv, 1.0f, Void.class);
 540         });
 541         checkWMTE(() -&gt; { // reciever primitive class
 542             float x = (float) vh.compareAndExchangeRelease(0, 1.0f, 1.0f);
 543         });
 544         // Incorrect return type
 545         checkWMTE(() -&gt; { // reference class
 546             Void r = (Void) vh.compareAndExchangeRelease(recv, 1.0f, 1.0f);
 547         });
 548         checkWMTE(() -&gt; { // primitive class
 549             boolean x = (boolean) vh.compareAndExchangeRelease(recv, 1.0f, 1.0f);
 550         });
 551         // Incorrect arity
 552         checkWMTE(() -&gt; { // 0
 553             float x = (float) vh.compareAndExchangeRelease();
 554         });
 555         checkWMTE(() -&gt; { // &gt;
 556             float x = (float) vh.compareAndExchangeRelease(recv, 1.0f, 1.0f, Void.class);
 557         });
 558 
 559 
 560         // GetAndSet
 561         // Incorrect argument types
 562         checkNPE(() -&gt; { // null receiver
 563             float x = (float) vh.getAndSet(null, 1.0f);
 564         });
 565         checkCCE(() -&gt; { // receiver reference class
 566             float x = (float) vh.getAndSet(Void.class, 1.0f);
 567         });
 568         checkWMTE(() -&gt; { // value reference class
 569             float x = (float) vh.getAndSet(recv, Void.class);
 570         });
 571         checkWMTE(() -&gt; { // reciever primitive class
 572             float x = (float) vh.getAndSet(0, 1.0f);
 573         });
 574         // Incorrect return type
 575         checkWMTE(() -&gt; { // reference class
 576             Void r = (Void) vh.getAndSet(recv, 1.0f);
 577         });
 578         checkWMTE(() -&gt; { // primitive class
 579             boolean x = (boolean) vh.getAndSet(recv, 1.0f);
 580         });
 581         // Incorrect arity
 582         checkWMTE(() -&gt; { // 0
 583             float x = (float) vh.getAndSet();
 584         });
 585         checkWMTE(() -&gt; { // &gt;
 586             float x = (float) vh.getAndSet(recv, 1.0f, Void.class);
 587         });
 588 
 589         // GetAndSetAcquire
 590         // Incorrect argument types
 591         checkNPE(() -&gt; { // null receiver
 592             float x = (float) vh.getAndSetAcquire(null, 1.0f);
 593         });
 594         checkCCE(() -&gt; { // receiver reference class
 595             float x = (float) vh.getAndSetAcquire(Void.class, 1.0f);
 596         });
 597         checkWMTE(() -&gt; { // value reference class
 598             float x = (float) vh.getAndSetAcquire(recv, Void.class);
 599         });
 600         checkWMTE(() -&gt; { // reciever primitive class
 601             float x = (float) vh.getAndSetAcquire(0, 1.0f);
 602         });
 603         // Incorrect return type
 604         checkWMTE(() -&gt; { // reference class
 605             Void r = (Void) vh.getAndSetAcquire(recv, 1.0f);
 606         });
 607         checkWMTE(() -&gt; { // primitive class
 608             boolean x = (boolean) vh.getAndSetAcquire(recv, 1.0f);
 609         });
 610         // Incorrect arity
 611         checkWMTE(() -&gt; { // 0
 612             float x = (float) vh.getAndSetAcquire();
 613         });
 614         checkWMTE(() -&gt; { // &gt;
 615             float x = (float) vh.getAndSetAcquire(recv, 1.0f, Void.class);
 616         });
 617 
 618         // GetAndSetRelease
 619         // Incorrect argument types
 620         checkNPE(() -&gt; { // null receiver
 621             float x = (float) vh.getAndSetRelease(null, 1.0f);
 622         });
 623         checkCCE(() -&gt; { // receiver reference class
 624             float x = (float) vh.getAndSetRelease(Void.class, 1.0f);
 625         });
 626         checkWMTE(() -&gt; { // value reference class
 627             float x = (float) vh.getAndSetRelease(recv, Void.class);
 628         });
 629         checkWMTE(() -&gt; { // reciever primitive class
 630             float x = (float) vh.getAndSetRelease(0, 1.0f);
 631         });
 632         // Incorrect return type
 633         checkWMTE(() -&gt; { // reference class
 634             Void r = (Void) vh.getAndSetRelease(recv, 1.0f);
 635         });
 636         checkWMTE(() -&gt; { // primitive class
 637             boolean x = (boolean) vh.getAndSetRelease(recv, 1.0f);
 638         });
 639         // Incorrect arity
 640         checkWMTE(() -&gt; { // 0
 641             float x = (float) vh.getAndSetRelease();
 642         });
 643         checkWMTE(() -&gt; { // &gt;
 644             float x = (float) vh.getAndSetRelease(recv, 1.0f, Void.class);
 645         });
 646 
 647         // GetAndAdd
 648         // Incorrect argument types
 649         checkNPE(() -&gt; { // null receiver
 650             float x = (float) vh.getAndAdd(null, 1.0f);
 651         });
 652         checkCCE(() -&gt; { // receiver reference class
 653             float x = (float) vh.getAndAdd(Void.class, 1.0f);
 654         });
 655         checkWMTE(() -&gt; { // value reference class
 656             float x = (float) vh.getAndAdd(recv, Void.class);
 657         });
 658         checkWMTE(() -&gt; { // reciever primitive class
 659             float x = (float) vh.getAndAdd(0, 1.0f);
 660         });
 661         // Incorrect return type
 662         checkWMTE(() -&gt; { // reference class
 663             Void r = (Void) vh.getAndAdd(recv, 1.0f);
 664         });
 665         checkWMTE(() -&gt; { // primitive class
 666             boolean x = (boolean) vh.getAndAdd(recv, 1.0f);
 667         });
 668         // Incorrect arity
 669         checkWMTE(() -&gt; { // 0
 670             float x = (float) vh.getAndAdd();
 671         });
 672         checkWMTE(() -&gt; { // &gt;
 673             float x = (float) vh.getAndAdd(recv, 1.0f, Void.class);
 674         });
 675 
 676         // GetAndAddAcquire
 677         // Incorrect argument types
 678         checkNPE(() -&gt; { // null receiver
 679             float x = (float) vh.getAndAddAcquire(null, 1.0f);
 680         });
 681         checkCCE(() -&gt; { // receiver reference class
 682             float x = (float) vh.getAndAddAcquire(Void.class, 1.0f);
 683         });
 684         checkWMTE(() -&gt; { // value reference class
 685             float x = (float) vh.getAndAddAcquire(recv, Void.class);
 686         });
 687         checkWMTE(() -&gt; { // reciever primitive class
 688             float x = (float) vh.getAndAddAcquire(0, 1.0f);
 689         });
 690         // Incorrect return type
 691         checkWMTE(() -&gt; { // reference class
 692             Void r = (Void) vh.getAndAddAcquire(recv, 1.0f);
 693         });
 694         checkWMTE(() -&gt; { // primitive class
 695             boolean x = (boolean) vh.getAndAddAcquire(recv, 1.0f);
 696         });
 697         // Incorrect arity
 698         checkWMTE(() -&gt; { // 0
 699             float x = (float) vh.getAndAddAcquire();
 700         });
 701         checkWMTE(() -&gt; { // &gt;
 702             float x = (float) vh.getAndAddAcquire(recv, 1.0f, Void.class);
 703         });
 704 
 705         // GetAndAddRelease
 706         // Incorrect argument types
 707         checkNPE(() -&gt; { // null receiver
 708             float x = (float) vh.getAndAddRelease(null, 1.0f);
 709         });
 710         checkCCE(() -&gt; { // receiver reference class
 711             float x = (float) vh.getAndAddRelease(Void.class, 1.0f);
 712         });
 713         checkWMTE(() -&gt; { // value reference class
 714             float x = (float) vh.getAndAddRelease(recv, Void.class);
 715         });
 716         checkWMTE(() -&gt; { // reciever primitive class
 717             float x = (float) vh.getAndAddRelease(0, 1.0f);
 718         });
 719         // Incorrect return type
 720         checkWMTE(() -&gt; { // reference class
 721             Void r = (Void) vh.getAndAddRelease(recv, 1.0f);
 722         });
 723         checkWMTE(() -&gt; { // primitive class
 724             boolean x = (boolean) vh.getAndAddRelease(recv, 1.0f);
 725         });
 726         // Incorrect arity
 727         checkWMTE(() -&gt; { // 0
 728             float x = (float) vh.getAndAddRelease();
 729         });
 730         checkWMTE(() -&gt; { // &gt;
 731             float x = (float) vh.getAndAddRelease(recv, 1.0f, Void.class);
 732         });
 733 
 734     }
 735 
 736     static void testInstanceFieldWrongMethodType(VarHandleTestMethodTypeFloat recv, Handles hs) throws Throwable {
 737         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
 738             // Incorrect argument types
 739             checkNPE(() -&gt; { // null receiver
 740                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class)).
 741                     invokeExact((VarHandleTestMethodTypeFloat) null);
 742             });
 743             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
 744                 float x = (float) hs.get(am, methodType(float.class, Class.class)).
 745                     invokeExact(Void.class);
 746             });
 747             checkWMTE(() -&gt; { // receiver primitive class
 748                 float x = (float) hs.get(am, methodType(float.class, int.class)).
 749                     invokeExact(0);
 750             });
 751             // Incorrect return type
 752             checkWMTE(() -&gt; { // reference class
 753                 Void x = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeFloat.class)).
 754                     invokeExact(recv);
 755             });
 756             checkWMTE(() -&gt; { // primitive class
 757                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class)).
 758                     invokeExact(recv);
 759             });
 760             // Incorrect arity
 761             checkWMTE(() -&gt; { // 0
 762                 float x = (float) hs.get(am, methodType(float.class)).
 763                     invokeExact();
 764             });
 765             checkWMTE(() -&gt; { // &gt;
 766                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, Class.class)).
 767                     invokeExact(recv, Void.class);
 768             });
 769         }
 770 
 771         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
 772             // Incorrect argument types
 773             checkNPE(() -&gt; { // null receiver
 774                 hs.get(am, methodType(void.class, VarHandleTestMethodTypeFloat.class, float.class)).
 775                     invokeExact((VarHandleTestMethodTypeFloat) null, 1.0f);
 776             });
 777             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
 778                 hs.get(am, methodType(void.class, Class.class, float.class)).
 779                     invokeExact(Void.class, 1.0f);
 780             });
 781             checkWMTE(() -&gt; { // value reference class
 782                 hs.get(am, methodType(void.class, VarHandleTestMethodTypeFloat.class, Class.class)).
 783                     invokeExact(recv, Void.class);
 784             });
 785             checkWMTE(() -&gt; { // receiver primitive class
 786                 hs.get(am, methodType(void.class, int.class, float.class)).
 787                     invokeExact(0, 1.0f);
 788             });
 789             // Incorrect arity
 790             checkWMTE(() -&gt; { // 0
 791                 hs.get(am, methodType(void.class)).
 792                     invokeExact();
 793             });
 794             checkWMTE(() -&gt; { // &gt;
 795                 hs.get(am, methodType(void.class, VarHandleTestMethodTypeFloat.class, float.class, Class.class)).
 796                     invokeExact(recv, 1.0f, Void.class);
 797             });
 798         }
 799 
 800         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
 801             // Incorrect argument types
 802             checkNPE(() -&gt; { // null receiver
 803                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class, float.class, float.class)).
 804                     invokeExact((VarHandleTestMethodTypeFloat) null, 1.0f, 1.0f);
 805             });
 806             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
 807                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, float.class, float.class)).
 808                     invokeExact(Void.class, 1.0f, 1.0f);
 809             });
 810             checkWMTE(() -&gt; { // expected reference class
 811                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class, Class.class, float.class)).
 812                     invokeExact(recv, Void.class, 1.0f);
 813             });
 814             checkWMTE(() -&gt; { // actual reference class
 815                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class, float.class, Class.class)).
 816                     invokeExact(recv, 1.0f, Void.class);
 817             });
 818             checkWMTE(() -&gt; { // receiver primitive class
 819                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class , float.class, float.class)).
 820                     invokeExact(0, 1.0f, 1.0f);
 821             });
 822             // Incorrect arity
 823             checkWMTE(() -&gt; { // 0
 824                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
 825                     invokeExact();
 826             });
 827             checkWMTE(() -&gt; { // &gt;
 828                 boolean r = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class, float.class, float.class, Class.class)).
 829                     invokeExact(recv, 1.0f, 1.0f, Void.class);
 830             });
 831         }
 832 
 833         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
 834             checkNPE(() -&gt; { // null receiver
 835                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class, float.class)).
 836                     invokeExact((VarHandleTestMethodTypeFloat) null, 1.0f, 1.0f);
 837             });
 838             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
 839                 float x = (float) hs.get(am, methodType(float.class, Class.class, float.class, float.class)).
 840                     invokeExact(Void.class, 1.0f, 1.0f);
 841             });
 842             checkWMTE(() -&gt; { // expected reference class
 843                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, Class.class, float.class)).
 844                     invokeExact(recv, Void.class, 1.0f);
 845             });
 846             checkWMTE(() -&gt; { // actual reference class
 847                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class, Class.class)).
 848                     invokeExact(recv, 1.0f, Void.class);
 849             });
 850             checkWMTE(() -&gt; { // reciever primitive class
 851                 float x = (float) hs.get(am, methodType(float.class, int.class , float.class, float.class)).
 852                     invokeExact(0, 1.0f, 1.0f);
 853             });
 854             // Incorrect return type
 855             checkWMTE(() -&gt; { // reference class
 856                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeFloat.class , float.class, float.class)).
 857                     invokeExact(recv, 1.0f, 1.0f);
 858             });
 859             checkWMTE(() -&gt; { // primitive class
 860                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class , float.class, float.class)).
 861                     invokeExact(recv, 1.0f, 1.0f);
 862             });
 863             // Incorrect arity
 864             checkWMTE(() -&gt; { // 0
 865                 float x = (float) hs.get(am, methodType(float.class)).
 866                     invokeExact();
 867             });
 868             checkWMTE(() -&gt; { // &gt;
 869                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class, float.class, Class.class)).
 870                     invokeExact(recv, 1.0f, 1.0f, Void.class);
 871             });
 872         }
 873 
 874         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
 875             checkNPE(() -&gt; { // null receiver
 876                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class)).
 877                     invokeExact((VarHandleTestMethodTypeFloat) null, 1.0f);
 878             });
 879             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
 880                 float x = (float) hs.get(am, methodType(float.class, Class.class, float.class)).
 881                     invokeExact(Void.class, 1.0f);
 882             });
 883             checkWMTE(() -&gt; { // value reference class
 884                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, Class.class)).
 885                     invokeExact(recv, Void.class);
 886             });
 887             checkWMTE(() -&gt; { // reciever primitive class
 888                 float x = (float) hs.get(am, methodType(float.class, int.class, float.class)).
 889                     invokeExact(0, 1.0f);
 890             });
 891             // Incorrect return type
 892             checkWMTE(() -&gt; { // reference class
 893                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeFloat.class, float.class)).
 894                     invokeExact(recv, 1.0f);
 895             });
 896             checkWMTE(() -&gt; { // primitive class
 897                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class, float.class)).
 898                     invokeExact(recv, 1.0f);
 899             });
 900             // Incorrect arity
 901             checkWMTE(() -&gt; { // 0
 902                 float x = (float) hs.get(am, methodType(float.class)).
 903                     invokeExact();
 904             });
 905             checkWMTE(() -&gt; { // &gt;
 906                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class)).
 907                     invokeExact(recv, 1.0f, Void.class);
 908             });
 909         }
 910 
 911         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
 912             checkNPE(() -&gt; { // null receiver
 913                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class)).
 914                     invokeExact((VarHandleTestMethodTypeFloat) null, 1.0f);
 915             });
 916             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
 917                 float x = (float) hs.get(am, methodType(float.class, Class.class, float.class)).
 918                     invokeExact(Void.class, 1.0f);
 919             });
 920             checkWMTE(() -&gt; { // value reference class
 921                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, Class.class)).
 922                     invokeExact(recv, Void.class);
 923             });
 924             checkWMTE(() -&gt; { // reciever primitive class
 925                 float x = (float) hs.get(am, methodType(float.class, int.class, float.class)).
 926                     invokeExact(0, 1.0f);
 927             });
 928             // Incorrect return type
 929             checkWMTE(() -&gt; { // reference class
 930                 Void r = (Void) hs.get(am, methodType(Void.class, VarHandleTestMethodTypeFloat.class, float.class)).
 931                     invokeExact(recv, 1.0f);
 932             });
 933             checkWMTE(() -&gt; { // primitive class
 934                 boolean x = (boolean) hs.get(am, methodType(boolean.class, VarHandleTestMethodTypeFloat.class, float.class)).
 935                     invokeExact(recv, 1.0f);
 936             });
 937             // Incorrect arity
 938             checkWMTE(() -&gt; { // 0
 939                 float x = (float) hs.get(am, methodType(float.class)).
 940                     invokeExact();
 941             });
 942             checkWMTE(() -&gt; { // &gt;
 943                 float x = (float) hs.get(am, methodType(float.class, VarHandleTestMethodTypeFloat.class, float.class)).
 944                     invokeExact(recv, 1.0f, Void.class);
 945             });
 946         }
 947 
 948     }
 949 
 950 
 951     static void testStaticFieldWrongMethodType(VarHandle vh) throws Throwable {
 952         // Get
 953         // Incorrect return type
 954         checkWMTE(() -&gt; { // reference class
 955             Void x = (Void) vh.get();
 956         });
 957         checkWMTE(() -&gt; { // primitive class
 958             boolean x = (boolean) vh.get();
 959         });
 960         // Incorrect arity
 961         checkWMTE(() -&gt; { // &gt;
 962             float x = (float) vh.get(Void.class);
 963         });
 964 
 965 
 966         // Set
 967         // Incorrect argument types
 968         checkWMTE(() -&gt; { // value reference class
 969             vh.set(Void.class);
 970         });
 971         // Incorrect arity
 972         checkWMTE(() -&gt; { // 0
 973             vh.set();
 974         });
 975         checkWMTE(() -&gt; { // &gt;
 976             vh.set(1.0f, Void.class);
 977         });
 978 
 979 
 980         // GetVolatile
 981         // Incorrect return type
 982         checkWMTE(() -&gt; { // reference class
 983             Void x = (Void) vh.getVolatile();
 984         });
 985         checkWMTE(() -&gt; { // primitive class
 986             boolean x = (boolean) vh.getVolatile();
 987         });
 988         checkWMTE(() -&gt; { // &gt;
 989             float x = (float) vh.getVolatile(Void.class);
 990         });
 991 
 992 
 993         // SetVolatile
 994         // Incorrect argument types
 995         checkWMTE(() -&gt; { // value reference class
 996             vh.setVolatile(Void.class);
 997         });
 998         // Incorrect arity
 999         checkWMTE(() -&gt; { // 0
1000             vh.setVolatile();
1001         });
1002         checkWMTE(() -&gt; { // &gt;
1003             vh.setVolatile(1.0f, Void.class);
1004         });
1005 
1006 
1007         // GetOpaque
1008         // Incorrect return type
1009         checkWMTE(() -&gt; { // reference class
1010             Void x = (Void) vh.getOpaque();
1011         });
1012         checkWMTE(() -&gt; { // primitive class
1013             boolean x = (boolean) vh.getOpaque();
1014         });
1015         checkWMTE(() -&gt; { // &gt;
1016             float x = (float) vh.getOpaque(Void.class);
1017         });
1018 
1019 
1020         // SetOpaque
1021         // Incorrect argument types
1022         checkWMTE(() -&gt; { // value reference class
1023             vh.setOpaque(Void.class);
1024         });
1025         // Incorrect arity
1026         checkWMTE(() -&gt; { // 0
1027             vh.setOpaque();
1028         });
1029         checkWMTE(() -&gt; { // &gt;
1030             vh.setOpaque(1.0f, Void.class);
1031         });
1032 
1033 
1034         // GetAcquire
1035         // Incorrect return type
1036         checkWMTE(() -&gt; { // reference class
1037             Void x = (Void) vh.getAcquire();
1038         });
1039         checkWMTE(() -&gt; { // primitive class
1040             boolean x = (boolean) vh.getAcquire();
1041         });
1042         checkWMTE(() -&gt; { // &gt;
1043             float x = (float) vh.getAcquire(Void.class);
1044         });
1045 
1046 
1047         // SetRelease
1048         // Incorrect argument types
1049         checkWMTE(() -&gt; { // value reference class
1050             vh.setRelease(Void.class);
1051         });
1052         // Incorrect arity
1053         checkWMTE(() -&gt; { // 0
1054             vh.setRelease();
1055         });
1056         checkWMTE(() -&gt; { // &gt;
1057             vh.setRelease(1.0f, Void.class);
1058         });
1059 
1060 
1061         // CompareAndSet
1062         // Incorrect argument types
1063         checkWMTE(() -&gt; { // expected reference class
1064             boolean r = vh.compareAndSet(Void.class, 1.0f);
1065         });
1066         checkWMTE(() -&gt; { // actual reference class
1067             boolean r = vh.compareAndSet(1.0f, Void.class);
1068         });
1069         // Incorrect arity
1070         checkWMTE(() -&gt; { // 0
1071             boolean r = vh.compareAndSet();
1072         });
1073         checkWMTE(() -&gt; { // &gt;
1074             boolean r = vh.compareAndSet(1.0f, 1.0f, Void.class);
1075         });
1076 
1077 
1078         // WeakCompareAndSet
1079         // Incorrect argument types
1080         checkWMTE(() -&gt; { // expected reference class
1081             boolean r = vh.weakCompareAndSetPlain(Void.class, 1.0f);
1082         });
1083         checkWMTE(() -&gt; { // actual reference class
1084             boolean r = vh.weakCompareAndSetPlain(1.0f, Void.class);
1085         });
1086         // Incorrect arity
1087         checkWMTE(() -&gt; { // 0
1088             boolean r = vh.weakCompareAndSetPlain();
1089         });
1090         checkWMTE(() -&gt; { // &gt;
1091             boolean r = vh.weakCompareAndSetPlain(1.0f, 1.0f, Void.class);
1092         });
1093 
1094 
1095         // WeakCompareAndSetVolatile
1096         // Incorrect argument types
1097         checkWMTE(() -&gt; { // expected reference class
1098             boolean r = vh.weakCompareAndSet(Void.class, 1.0f);
1099         });
1100         checkWMTE(() -&gt; { // actual reference class
1101             boolean r = vh.weakCompareAndSet(1.0f, Void.class);
1102         });
1103         // Incorrect arity
1104         checkWMTE(() -&gt; { // 0
1105             boolean r = vh.weakCompareAndSet();
1106         });
1107         checkWMTE(() -&gt; { // &gt;
1108             boolean r = vh.weakCompareAndSet(1.0f, 1.0f, Void.class);
1109         });
1110 
1111 
1112         // WeakCompareAndSetAcquire
1113         // Incorrect argument types
1114         checkWMTE(() -&gt; { // expected reference class
1115             boolean r = vh.weakCompareAndSetAcquire(Void.class, 1.0f);
1116         });
1117         checkWMTE(() -&gt; { // actual reference class
1118             boolean r = vh.weakCompareAndSetAcquire(1.0f, Void.class);
1119         });
1120         // Incorrect arity
1121         checkWMTE(() -&gt; { // 0
1122             boolean r = vh.weakCompareAndSetAcquire();
1123         });
1124         checkWMTE(() -&gt; { // &gt;
1125             boolean r = vh.weakCompareAndSetAcquire(1.0f, 1.0f, Void.class);
1126         });
1127 
1128 
1129         // WeakCompareAndSetRelease
1130         // Incorrect argument types
1131         checkWMTE(() -&gt; { // expected reference class
1132             boolean r = vh.weakCompareAndSetRelease(Void.class, 1.0f);
1133         });
1134         checkWMTE(() -&gt; { // actual reference class
1135             boolean r = vh.weakCompareAndSetRelease(1.0f, Void.class);
1136         });
1137         // Incorrect arity
1138         checkWMTE(() -&gt; { // 0
1139             boolean r = vh.weakCompareAndSetRelease();
1140         });
1141         checkWMTE(() -&gt; { // &gt;
1142             boolean r = vh.weakCompareAndSetRelease(1.0f, 1.0f, Void.class);
1143         });
1144 
1145 
1146         // CompareAndExchange
1147         // Incorrect argument types
1148         checkWMTE(() -&gt; { // expected reference class
1149             float x = (float) vh.compareAndExchange(Void.class, 1.0f);
1150         });
1151         checkWMTE(() -&gt; { // actual reference class
1152             float x = (float) vh.compareAndExchange(1.0f, Void.class);
1153         });
1154         // Incorrect return type
1155         checkWMTE(() -&gt; { // reference class
1156             Void r = (Void) vh.compareAndExchange(1.0f, 1.0f);
1157         });
1158         checkWMTE(() -&gt; { // primitive class
1159             boolean x = (boolean) vh.compareAndExchange(1.0f, 1.0f);
1160         });
1161         // Incorrect arity
1162         checkWMTE(() -&gt; { // 0
1163             float x = (float) vh.compareAndExchange();
1164         });
1165         checkWMTE(() -&gt; { // &gt;
1166             float x = (float) vh.compareAndExchange(1.0f, 1.0f, Void.class);
1167         });
1168 
1169 
1170         // CompareAndExchangeAcquire
1171         // Incorrect argument types
1172         checkWMTE(() -&gt; { // expected reference class
1173             float x = (float) vh.compareAndExchangeAcquire(Void.class, 1.0f);
1174         });
1175         checkWMTE(() -&gt; { // actual reference class
1176             float x = (float) vh.compareAndExchangeAcquire(1.0f, Void.class);
1177         });
1178         // Incorrect return type
1179         checkWMTE(() -&gt; { // reference class
1180             Void r = (Void) vh.compareAndExchangeAcquire(1.0f, 1.0f);
1181         });
1182         checkWMTE(() -&gt; { // primitive class
1183             boolean x = (boolean) vh.compareAndExchangeAcquire(1.0f, 1.0f);
1184         });
1185         // Incorrect arity
1186         checkWMTE(() -&gt; { // 0
1187             float x = (float) vh.compareAndExchangeAcquire();
1188         });
1189         checkWMTE(() -&gt; { // &gt;
1190             float x = (float) vh.compareAndExchangeAcquire(1.0f, 1.0f, Void.class);
1191         });
1192 
1193 
1194         // CompareAndExchangeRelease
1195         // Incorrect argument types
1196         checkWMTE(() -&gt; { // expected reference class
1197             float x = (float) vh.compareAndExchangeRelease(Void.class, 1.0f);
1198         });
1199         checkWMTE(() -&gt; { // actual reference class
1200             float x = (float) vh.compareAndExchangeRelease(1.0f, Void.class);
1201         });
1202         // Incorrect return type
1203         checkWMTE(() -&gt; { // reference class
1204             Void r = (Void) vh.compareAndExchangeRelease(1.0f, 1.0f);
1205         });
1206         checkWMTE(() -&gt; { // primitive class
1207             boolean x = (boolean) vh.compareAndExchangeRelease(1.0f, 1.0f);
1208         });
1209         // Incorrect arity
1210         checkWMTE(() -&gt; { // 0
1211             float x = (float) vh.compareAndExchangeRelease();
1212         });
1213         checkWMTE(() -&gt; { // &gt;
1214             float x = (float) vh.compareAndExchangeRelease(1.0f, 1.0f, Void.class);
1215         });
1216 
1217 
1218         // GetAndSet
1219         // Incorrect argument types
1220         checkWMTE(() -&gt; { // value reference class
1221             float x = (float) vh.getAndSet(Void.class);
1222         });
1223         // Incorrect return type
1224         checkWMTE(() -&gt; { // reference class
1225             Void r = (Void) vh.getAndSet(1.0f);
1226         });
1227         checkWMTE(() -&gt; { // primitive class
1228             boolean x = (boolean) vh.getAndSet(1.0f);
1229         });
1230         // Incorrect arity
1231         checkWMTE(() -&gt; { // 0
1232             float x = (float) vh.getAndSet();
1233         });
1234         checkWMTE(() -&gt; { // &gt;
1235             float x = (float) vh.getAndSet(1.0f, Void.class);
1236         });
1237 
1238 
1239         // GetAndSetAcquire
1240         // Incorrect argument types
1241         checkWMTE(() -&gt; { // value reference class
1242             float x = (float) vh.getAndSetAcquire(Void.class);
1243         });
1244         // Incorrect return type
1245         checkWMTE(() -&gt; { // reference class
1246             Void r = (Void) vh.getAndSetAcquire(1.0f);
1247         });
1248         checkWMTE(() -&gt; { // primitive class
1249             boolean x = (boolean) vh.getAndSetAcquire(1.0f);
1250         });
1251         // Incorrect arity
1252         checkWMTE(() -&gt; { // 0
1253             float x = (float) vh.getAndSetAcquire();
1254         });
1255         checkWMTE(() -&gt; { // &gt;
1256             float x = (float) vh.getAndSetAcquire(1.0f, Void.class);
1257         });
1258 
1259 
1260         // GetAndSetRelease
1261         // Incorrect argument types
1262         checkWMTE(() -&gt; { // value reference class
1263             float x = (float) vh.getAndSetRelease(Void.class);
1264         });
1265         // Incorrect return type
1266         checkWMTE(() -&gt; { // reference class
1267             Void r = (Void) vh.getAndSetRelease(1.0f);
1268         });
1269         checkWMTE(() -&gt; { // primitive class
1270             boolean x = (boolean) vh.getAndSetRelease(1.0f);
1271         });
1272         // Incorrect arity
1273         checkWMTE(() -&gt; { // 0
1274             float x = (float) vh.getAndSetRelease();
1275         });
1276         checkWMTE(() -&gt; { // &gt;
1277             float x = (float) vh.getAndSetRelease(1.0f, Void.class);
1278         });
1279 
1280         // GetAndAdd
1281         // Incorrect argument types
1282         checkWMTE(() -&gt; { // value reference class
1283             float x = (float) vh.getAndAdd(Void.class);
1284         });
1285         // Incorrect return type
1286         checkWMTE(() -&gt; { // reference class
1287             Void r = (Void) vh.getAndAdd(1.0f);
1288         });
1289         checkWMTE(() -&gt; { // primitive class
1290             boolean x = (boolean) vh.getAndAdd(1.0f);
1291         });
1292         // Incorrect arity
1293         checkWMTE(() -&gt; { // 0
1294             float x = (float) vh.getAndAdd();
1295         });
1296         checkWMTE(() -&gt; { // &gt;
1297             float x = (float) vh.getAndAdd(1.0f, Void.class);
1298         });
1299 
1300 
1301         // GetAndAddAcquire
1302         // Incorrect argument types
1303         checkWMTE(() -&gt; { // value reference class
1304             float x = (float) vh.getAndAddAcquire(Void.class);
1305         });
1306         // Incorrect return type
1307         checkWMTE(() -&gt; { // reference class
1308             Void r = (Void) vh.getAndAddAcquire(1.0f);
1309         });
1310         checkWMTE(() -&gt; { // primitive class
1311             boolean x = (boolean) vh.getAndAddAcquire(1.0f);
1312         });
1313         // Incorrect arity
1314         checkWMTE(() -&gt; { // 0
1315             float x = (float) vh.getAndAddAcquire();
1316         });
1317         checkWMTE(() -&gt; { // &gt;
1318             float x = (float) vh.getAndAddAcquire(1.0f, Void.class);
1319         });
1320 
1321 
1322         // GetAndAddRelease
1323         // Incorrect argument types
1324         checkWMTE(() -&gt; { // value reference class
1325             float x = (float) vh.getAndAddRelease(Void.class);
1326         });
1327         // Incorrect return type
1328         checkWMTE(() -&gt; { // reference class
1329             Void r = (Void) vh.getAndAddRelease(1.0f);
1330         });
1331         checkWMTE(() -&gt; { // primitive class
1332             boolean x = (boolean) vh.getAndAddRelease(1.0f);
1333         });
1334         // Incorrect arity
1335         checkWMTE(() -&gt; { // 0
1336             float x = (float) vh.getAndAddRelease();
1337         });
1338         checkWMTE(() -&gt; { // &gt;
1339             float x = (float) vh.getAndAddRelease(1.0f, Void.class);
1340         });
1341 
1342     }
1343 
1344     static void testStaticFieldWrongMethodType(Handles hs) throws Throwable {
1345         int i = 0;
1346 
1347         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
1348             // Incorrect return type
1349             checkWMTE(() -&gt; { // reference class
1350                 Void x = (Void) hs.get(am, methodType(Void.class)).
1351                     invokeExact();
1352             });
1353             checkWMTE(() -&gt; { // primitive class
1354                 boolean x = (boolean) hs.get(am, methodType(boolean.class)).
1355                     invokeExact();
1356             });
1357             // Incorrect arity
1358             checkWMTE(() -&gt; { // &gt;
1359                 float x = (float) hs.get(am, methodType(Class.class)).
1360                     invokeExact(Void.class);
1361             });
1362         }
1363 
1364         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
1365             checkWMTE(() -&gt; { // value reference class
1366                 hs.get(am, methodType(void.class, Class.class)).
1367                     invokeExact(Void.class);
1368             });
1369             // Incorrect arity
1370             checkWMTE(() -&gt; { // 0
1371                 hs.get(am, methodType(void.class)).
1372                     invokeExact();
1373             });
1374             checkWMTE(() -&gt; { // &gt;
1375                 hs.get(am, methodType(void.class, float.class, Class.class)).
1376                     invokeExact(1.0f, Void.class);
1377             });
1378         }
1379         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
1380             // Incorrect argument types
1381             checkWMTE(() -&gt; { // expected reference class
1382                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, float.class)).
1383                     invokeExact(Void.class, 1.0f);
1384             });
1385             checkWMTE(() -&gt; { // actual reference class
1386                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float.class, Class.class)).
1387                     invokeExact(1.0f, Void.class);
1388             });
1389             // Incorrect arity
1390             checkWMTE(() -&gt; { // 0
1391                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
1392                     invokeExact();
1393             });
1394             checkWMTE(() -&gt; { // &gt;
1395                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float.class, float.class, Class.class)).
1396                     invokeExact(1.0f, 1.0f, Void.class);
1397             });
1398         }
1399 
1400         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
1401             // Incorrect argument types
1402             checkWMTE(() -&gt; { // expected reference class
1403                 float x = (float) hs.get(am, methodType(float.class, Class.class, float.class)).
1404                     invokeExact(Void.class, 1.0f);
1405             });
1406             checkWMTE(() -&gt; { // actual reference class
1407                 float x = (float) hs.get(am, methodType(float.class, float.class, Class.class)).
1408                     invokeExact(1.0f, Void.class);
1409             });
1410             // Incorrect return type
1411             checkWMTE(() -&gt; { // reference class
1412                 Void r = (Void) hs.get(am, methodType(Void.class, float.class, float.class)).
1413                     invokeExact(1.0f, 1.0f);
1414             });
1415             checkWMTE(() -&gt; { // primitive class
1416                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float.class, float.class)).
1417                     invokeExact(1.0f, 1.0f);
1418             });
1419             // Incorrect arity
1420             checkWMTE(() -&gt; { // 0
1421                 float x = (float) hs.get(am, methodType(float.class)).
1422                     invokeExact();
1423             });
1424             checkWMTE(() -&gt; { // &gt;
1425                 float x = (float) hs.get(am, methodType(float.class, float.class, float.class, Class.class)).
1426                     invokeExact(1.0f, 1.0f, Void.class);
1427             });
1428         }
1429 
1430         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
1431             // Incorrect argument types
1432             checkWMTE(() -&gt; { // value reference class
1433                 float x = (float) hs.get(am, methodType(float.class, Class.class)).
1434                     invokeExact(Void.class);
1435             });
1436             // Incorrect return type
1437             checkWMTE(() -&gt; { // reference class
1438                 Void r = (Void) hs.get(am, methodType(Void.class, float.class)).
1439                     invokeExact(1.0f);
1440             });
1441             checkWMTE(() -&gt; { // primitive class
1442                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float.class)).
1443                     invokeExact(1.0f);
1444             });
1445             // Incorrect arity
1446             checkWMTE(() -&gt; { // 0
1447                 float x = (float) hs.get(am, methodType(float.class)).
1448                     invokeExact();
1449             });
1450             checkWMTE(() -&gt; { // &gt;
1451                 float x = (float) hs.get(am, methodType(float.class, float.class, Class.class)).
1452                     invokeExact(1.0f, Void.class);
1453             });
1454         }
1455 
1456         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
1457             // Incorrect argument types
1458             checkWMTE(() -&gt; { // value reference class
1459                 float x = (float) hs.get(am, methodType(float.class, Class.class)).
1460                     invokeExact(Void.class);
1461             });
1462             // Incorrect return type
1463             checkWMTE(() -&gt; { // reference class
1464                 Void r = (Void) hs.get(am, methodType(Void.class, float.class)).
1465                     invokeExact(1.0f);
1466             });
1467             checkWMTE(() -&gt; { // primitive class
1468                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float.class)).
1469                     invokeExact(1.0f);
1470             });
1471             // Incorrect arity
1472             checkWMTE(() -&gt; { // 0
1473                 float x = (float) hs.get(am, methodType(float.class)).
1474                     invokeExact();
1475             });
1476             checkWMTE(() -&gt; { // &gt;
1477                 float x = (float) hs.get(am, methodType(float.class, float.class, Class.class)).
1478                     invokeExact(1.0f, Void.class);
1479             });
1480         }
1481 
1482     }
1483 
1484 
1485     static void testArrayWrongMethodType(VarHandle vh) throws Throwable {
1486         float[] array = new float[10];
1487         Arrays.fill(array, 1.0f);
1488 
1489         // Get
1490         // Incorrect argument types
1491         checkNPE(() -&gt; { // null array
1492             float x = (float) vh.get(null, 0);
1493         });
1494         checkCCE(() -&gt; { // array reference class
1495             float x = (float) vh.get(Void.class, 0);
1496         });
1497         checkWMTE(() -&gt; { // array primitive class
1498             float x = (float) vh.get(0, 0);
1499         });
1500         checkWMTE(() -&gt; { // index reference class
1501             float x = (float) vh.get(array, Void.class);
1502         });
1503         // Incorrect return type
1504         checkWMTE(() -&gt; { // reference class
1505             Void x = (Void) vh.get(array, 0);
1506         });
1507         checkWMTE(() -&gt; { // primitive class
1508             boolean x = (boolean) vh.get(array, 0);
1509         });
1510         // Incorrect arity
1511         checkWMTE(() -&gt; { // 0
1512             float x = (float) vh.get();
1513         });
1514         checkWMTE(() -&gt; { // &gt;
1515             float x = (float) vh.get(array, 0, Void.class);
1516         });
1517 
1518 
1519         // Set
1520         // Incorrect argument types
1521         checkNPE(() -&gt; { // null array
1522             vh.set(null, 0, 1.0f);
1523         });
1524         checkCCE(() -&gt; { // array reference class
1525             vh.set(Void.class, 0, 1.0f);
1526         });
1527         checkWMTE(() -&gt; { // value reference class
1528             vh.set(array, 0, Void.class);
1529         });
1530         checkWMTE(() -&gt; { // receiver primitive class
1531             vh.set(0, 0, 1.0f);
1532         });
1533         checkWMTE(() -&gt; { // index reference class
1534             vh.set(array, Void.class, 1.0f);
1535         });
1536         // Incorrect arity
1537         checkWMTE(() -&gt; { // 0
1538             vh.set();
1539         });
1540         checkWMTE(() -&gt; { // &gt;
1541             vh.set(array, 0, 1.0f, Void.class);
1542         });
1543 
1544 
1545         // GetVolatile
1546         // Incorrect argument types
1547         checkNPE(() -&gt; { // null array
1548             float x = (float) vh.getVolatile(null, 0);
1549         });
1550         checkCCE(() -&gt; { // array reference class
1551             float x = (float) vh.getVolatile(Void.class, 0);
1552         });
1553         checkWMTE(() -&gt; { // array primitive class
1554             float x = (float) vh.getVolatile(0, 0);
1555         });
1556         checkWMTE(() -&gt; { // index reference class
1557             float x = (float) vh.getVolatile(array, Void.class);
1558         });
1559         // Incorrect return type
1560         checkWMTE(() -&gt; { // reference class
1561             Void x = (Void) vh.getVolatile(array, 0);
1562         });
1563         checkWMTE(() -&gt; { // primitive class
1564             boolean x = (boolean) vh.getVolatile(array, 0);
1565         });
1566         // Incorrect arity
1567         checkWMTE(() -&gt; { // 0
1568             float x = (float) vh.getVolatile();
1569         });
1570         checkWMTE(() -&gt; { // &gt;
1571             float x = (float) vh.getVolatile(array, 0, Void.class);
1572         });
1573 
1574 
1575         // SetVolatile
1576         // Incorrect argument types
1577         checkNPE(() -&gt; { // null array
1578             vh.setVolatile(null, 0, 1.0f);
1579         });
1580         checkCCE(() -&gt; { // array reference class
1581             vh.setVolatile(Void.class, 0, 1.0f);
1582         });
1583         checkWMTE(() -&gt; { // value reference class
1584             vh.setVolatile(array, 0, Void.class);
1585         });
1586         checkWMTE(() -&gt; { // receiver primitive class
1587             vh.setVolatile(0, 0, 1.0f);
1588         });
1589         checkWMTE(() -&gt; { // index reference class
1590             vh.setVolatile(array, Void.class, 1.0f);
1591         });
1592         // Incorrect arity
1593         checkWMTE(() -&gt; { // 0
1594             vh.setVolatile();
1595         });
1596         checkWMTE(() -&gt; { // &gt;
1597             vh.setVolatile(array, 0, 1.0f, Void.class);
1598         });
1599 
1600 
1601         // GetOpaque
1602         // Incorrect argument types
1603         checkNPE(() -&gt; { // null array
1604             float x = (float) vh.getOpaque(null, 0);
1605         });
1606         checkCCE(() -&gt; { // array reference class
1607             float x = (float) vh.getOpaque(Void.class, 0);
1608         });
1609         checkWMTE(() -&gt; { // array primitive class
1610             float x = (float) vh.getOpaque(0, 0);
1611         });
1612         checkWMTE(() -&gt; { // index reference class
1613             float x = (float) vh.getOpaque(array, Void.class);
1614         });
1615         // Incorrect return type
1616         checkWMTE(() -&gt; { // reference class
1617             Void x = (Void) vh.getOpaque(array, 0);
1618         });
1619         checkWMTE(() -&gt; { // primitive class
1620             boolean x = (boolean) vh.getOpaque(array, 0);
1621         });
1622         // Incorrect arity
1623         checkWMTE(() -&gt; { // 0
1624             float x = (float) vh.getOpaque();
1625         });
1626         checkWMTE(() -&gt; { // &gt;
1627             float x = (float) vh.getOpaque(array, 0, Void.class);
1628         });
1629 
1630 
1631         // SetOpaque
1632         // Incorrect argument types
1633         checkNPE(() -&gt; { // null array
1634             vh.setOpaque(null, 0, 1.0f);
1635         });
1636         checkCCE(() -&gt; { // array reference class
1637             vh.setOpaque(Void.class, 0, 1.0f);
1638         });
1639         checkWMTE(() -&gt; { // value reference class
1640             vh.setOpaque(array, 0, Void.class);
1641         });
1642         checkWMTE(() -&gt; { // receiver primitive class
1643             vh.setOpaque(0, 0, 1.0f);
1644         });
1645         checkWMTE(() -&gt; { // index reference class
1646             vh.setOpaque(array, Void.class, 1.0f);
1647         });
1648         // Incorrect arity
1649         checkWMTE(() -&gt; { // 0
1650             vh.setOpaque();
1651         });
1652         checkWMTE(() -&gt; { // &gt;
1653             vh.setOpaque(array, 0, 1.0f, Void.class);
1654         });
1655 
1656 
1657         // GetAcquire
1658         // Incorrect argument types
1659         checkNPE(() -&gt; { // null array
1660             float x = (float) vh.getAcquire(null, 0);
1661         });
1662         checkCCE(() -&gt; { // array reference class
1663             float x = (float) vh.getAcquire(Void.class, 0);
1664         });
1665         checkWMTE(() -&gt; { // array primitive class
1666             float x = (float) vh.getAcquire(0, 0);
1667         });
1668         checkWMTE(() -&gt; { // index reference class
1669             float x = (float) vh.getAcquire(array, Void.class);
1670         });
1671         // Incorrect return type
1672         checkWMTE(() -&gt; { // reference class
1673             Void x = (Void) vh.getAcquire(array, 0);
1674         });
1675         checkWMTE(() -&gt; { // primitive class
1676             boolean x = (boolean) vh.getAcquire(array, 0);
1677         });
1678         // Incorrect arity
1679         checkWMTE(() -&gt; { // 0
1680             float x = (float) vh.getAcquire();
1681         });
1682         checkWMTE(() -&gt; { // &gt;
1683             float x = (float) vh.getAcquire(array, 0, Void.class);
1684         });
1685 
1686 
1687         // SetRelease
1688         // Incorrect argument types
1689         checkNPE(() -&gt; { // null array
1690             vh.setRelease(null, 0, 1.0f);
1691         });
1692         checkCCE(() -&gt; { // array reference class
1693             vh.setRelease(Void.class, 0, 1.0f);
1694         });
1695         checkWMTE(() -&gt; { // value reference class
1696             vh.setRelease(array, 0, Void.class);
1697         });
1698         checkWMTE(() -&gt; { // receiver primitive class
1699             vh.setRelease(0, 0, 1.0f);
1700         });
1701         checkWMTE(() -&gt; { // index reference class
1702             vh.setRelease(array, Void.class, 1.0f);
1703         });
1704         // Incorrect arity
1705         checkWMTE(() -&gt; { // 0
1706             vh.setRelease();
1707         });
1708         checkWMTE(() -&gt; { // &gt;
1709             vh.setRelease(array, 0, 1.0f, Void.class);
1710         });
1711 
1712 
1713         // CompareAndSet
1714         // Incorrect argument types
1715         checkNPE(() -&gt; { // null receiver
1716             boolean r = vh.compareAndSet(null, 0, 1.0f, 1.0f);
1717         });
1718         checkCCE(() -&gt; { // receiver reference class
1719             boolean r = vh.compareAndSet(Void.class, 0, 1.0f, 1.0f);
1720         });
1721         checkWMTE(() -&gt; { // expected reference class
1722             boolean r = vh.compareAndSet(array, 0, Void.class, 1.0f);
1723         });
1724         checkWMTE(() -&gt; { // actual reference class
1725             boolean r = vh.compareAndSet(array, 0, 1.0f, Void.class);
1726         });
1727         checkWMTE(() -&gt; { // receiver primitive class
1728             boolean r = vh.compareAndSet(0, 0, 1.0f, 1.0f);
1729         });
1730         checkWMTE(() -&gt; { // index reference class
1731             boolean r = vh.compareAndSet(array, Void.class, 1.0f, 1.0f);
1732         });
1733         // Incorrect arity
1734         checkWMTE(() -&gt; { // 0
1735             boolean r = vh.compareAndSet();
1736         });
1737         checkWMTE(() -&gt; { // &gt;
1738             boolean r = vh.compareAndSet(array, 0, 1.0f, 1.0f, Void.class);
1739         });
1740 
1741 
1742         // WeakCompareAndSet
1743         // Incorrect argument types
1744         checkNPE(() -&gt; { // null receiver
1745             boolean r = vh.weakCompareAndSetPlain(null, 0, 1.0f, 1.0f);
1746         });
1747         checkCCE(() -&gt; { // receiver reference class
1748             boolean r = vh.weakCompareAndSetPlain(Void.class, 0, 1.0f, 1.0f);
1749         });
1750         checkWMTE(() -&gt; { // expected reference class
1751             boolean r = vh.weakCompareAndSetPlain(array, 0, Void.class, 1.0f);
1752         });
1753         checkWMTE(() -&gt; { // actual reference class
1754             boolean r = vh.weakCompareAndSetPlain(array, 0, 1.0f, Void.class);
1755         });
1756         checkWMTE(() -&gt; { // receiver primitive class
1757             boolean r = vh.weakCompareAndSetPlain(0, 0, 1.0f, 1.0f);
1758         });
1759         checkWMTE(() -&gt; { // index reference class
1760             boolean r = vh.weakCompareAndSetPlain(array, Void.class, 1.0f, 1.0f);
1761         });
1762         // Incorrect arity
1763         checkWMTE(() -&gt; { // 0
1764             boolean r = vh.weakCompareAndSetPlain();
1765         });
1766         checkWMTE(() -&gt; { // &gt;
1767             boolean r = vh.weakCompareAndSetPlain(array, 0, 1.0f, 1.0f, Void.class);
1768         });
1769 
1770 
1771         // WeakCompareAndSetVolatile
1772         // Incorrect argument types
1773         checkNPE(() -&gt; { // null receiver
1774             boolean r = vh.weakCompareAndSet(null, 0, 1.0f, 1.0f);
1775         });
1776         checkCCE(() -&gt; { // receiver reference class
1777             boolean r = vh.weakCompareAndSet(Void.class, 0, 1.0f, 1.0f);
1778         });
1779         checkWMTE(() -&gt; { // expected reference class
1780             boolean r = vh.weakCompareAndSet(array, 0, Void.class, 1.0f);
1781         });
1782         checkWMTE(() -&gt; { // actual reference class
1783             boolean r = vh.weakCompareAndSet(array, 0, 1.0f, Void.class);
1784         });
1785         checkWMTE(() -&gt; { // receiver primitive class
1786             boolean r = vh.weakCompareAndSet(0, 0, 1.0f, 1.0f);
1787         });
1788         checkWMTE(() -&gt; { // index reference class
1789             boolean r = vh.weakCompareAndSet(array, Void.class, 1.0f, 1.0f);
1790         });
1791         // Incorrect arity
1792         checkWMTE(() -&gt; { // 0
1793             boolean r = vh.weakCompareAndSet();
1794         });
1795         checkWMTE(() -&gt; { // &gt;
1796             boolean r = vh.weakCompareAndSet(array, 0, 1.0f, 1.0f, Void.class);
1797         });
1798 
1799 
1800         // WeakCompareAndSetAcquire
1801         // Incorrect argument types
1802         checkNPE(() -&gt; { // null receiver
1803             boolean r = vh.weakCompareAndSetAcquire(null, 0, 1.0f, 1.0f);
1804         });
1805         checkCCE(() -&gt; { // receiver reference class
1806             boolean r = vh.weakCompareAndSetAcquire(Void.class, 0, 1.0f, 1.0f);
1807         });
1808         checkWMTE(() -&gt; { // expected reference class
1809             boolean r = vh.weakCompareAndSetAcquire(array, 0, Void.class, 1.0f);
1810         });
1811         checkWMTE(() -&gt; { // actual reference class
1812             boolean r = vh.weakCompareAndSetAcquire(array, 0, 1.0f, Void.class);
1813         });
1814         checkWMTE(() -&gt; { // receiver primitive class
1815             boolean r = vh.weakCompareAndSetAcquire(0, 0, 1.0f, 1.0f);
1816         });
1817         checkWMTE(() -&gt; { // index reference class
1818             boolean r = vh.weakCompareAndSetAcquire(array, Void.class, 1.0f, 1.0f);
1819         });
1820         // Incorrect arity
1821         checkWMTE(() -&gt; { // 0
1822             boolean r = vh.weakCompareAndSetAcquire();
1823         });
1824         checkWMTE(() -&gt; { // &gt;
1825             boolean r = vh.weakCompareAndSetAcquire(array, 0, 1.0f, 1.0f, Void.class);
1826         });
1827 
1828 
1829         // WeakCompareAndSetRelease
1830         // Incorrect argument types
1831         checkNPE(() -&gt; { // null receiver
1832             boolean r = vh.weakCompareAndSetRelease(null, 0, 1.0f, 1.0f);
1833         });
1834         checkCCE(() -&gt; { // receiver reference class
1835             boolean r = vh.weakCompareAndSetRelease(Void.class, 0, 1.0f, 1.0f);
1836         });
1837         checkWMTE(() -&gt; { // expected reference class
1838             boolean r = vh.weakCompareAndSetRelease(array, 0, Void.class, 1.0f);
1839         });
1840         checkWMTE(() -&gt; { // actual reference class
1841             boolean r = vh.weakCompareAndSetRelease(array, 0, 1.0f, Void.class);
1842         });
1843         checkWMTE(() -&gt; { // receiver primitive class
1844             boolean r = vh.weakCompareAndSetRelease(0, 0, 1.0f, 1.0f);
1845         });
1846         checkWMTE(() -&gt; { // index reference class
1847             boolean r = vh.weakCompareAndSetRelease(array, Void.class, 1.0f, 1.0f);
1848         });
1849         // Incorrect arity
1850         checkWMTE(() -&gt; { // 0
1851             boolean r = vh.weakCompareAndSetRelease();
1852         });
1853         checkWMTE(() -&gt; { // &gt;
1854             boolean r = vh.weakCompareAndSetRelease(array, 0, 1.0f, 1.0f, Void.class);
1855         });
1856 
1857 
1858         // CompareAndExchange
1859         // Incorrect argument types
1860         checkNPE(() -&gt; { // null receiver
1861             float x = (float) vh.compareAndExchange(null, 0, 1.0f, 1.0f);
1862         });
1863         checkCCE(() -&gt; { // array reference class
1864             float x = (float) vh.compareAndExchange(Void.class, 0, 1.0f, 1.0f);
1865         });
1866         checkWMTE(() -&gt; { // expected reference class
1867             float x = (float) vh.compareAndExchange(array, 0, Void.class, 1.0f);
1868         });
1869         checkWMTE(() -&gt; { // actual reference class
1870             float x = (float) vh.compareAndExchange(array, 0, 1.0f, Void.class);
1871         });
1872         checkWMTE(() -&gt; { // array primitive class
1873             float x = (float) vh.compareAndExchange(0, 0, 1.0f, 1.0f);
1874         });
1875         checkWMTE(() -&gt; { // index reference class
1876             float x = (float) vh.compareAndExchange(array, Void.class, 1.0f, 1.0f);
1877         });
1878         // Incorrect return type
1879         checkWMTE(() -&gt; { // reference class
1880             Void r = (Void) vh.compareAndExchange(array, 0, 1.0f, 1.0f);
1881         });
1882         checkWMTE(() -&gt; { // primitive class
1883             boolean x = (boolean) vh.compareAndExchange(array, 0, 1.0f, 1.0f);
1884         });
1885         // Incorrect arity
1886         checkWMTE(() -&gt; { // 0
1887             float x = (float) vh.compareAndExchange();
1888         });
1889         checkWMTE(() -&gt; { // &gt;
1890             float x = (float) vh.compareAndExchange(array, 0, 1.0f, 1.0f, Void.class);
1891         });
1892 
1893 
1894         // CompareAndExchangeAcquire
1895         // Incorrect argument types
1896         checkNPE(() -&gt; { // null receiver
1897             float x = (float) vh.compareAndExchangeAcquire(null, 0, 1.0f, 1.0f);
1898         });
1899         checkCCE(() -&gt; { // array reference class
1900             float x = (float) vh.compareAndExchangeAcquire(Void.class, 0, 1.0f, 1.0f);
1901         });
1902         checkWMTE(() -&gt; { // expected reference class
1903             float x = (float) vh.compareAndExchangeAcquire(array, 0, Void.class, 1.0f);
1904         });
1905         checkWMTE(() -&gt; { // actual reference class
1906             float x = (float) vh.compareAndExchangeAcquire(array, 0, 1.0f, Void.class);
1907         });
1908         checkWMTE(() -&gt; { // array primitive class
1909             float x = (float) vh.compareAndExchangeAcquire(0, 0, 1.0f, 1.0f);
1910         });
1911         checkWMTE(() -&gt; { // index reference class
1912             float x = (float) vh.compareAndExchangeAcquire(array, Void.class, 1.0f, 1.0f);
1913         });
1914         // Incorrect return type
1915         checkWMTE(() -&gt; { // reference class
1916             Void r = (Void) vh.compareAndExchangeAcquire(array, 0, 1.0f, 1.0f);
1917         });
1918         checkWMTE(() -&gt; { // primitive class
1919             boolean x = (boolean) vh.compareAndExchangeAcquire(array, 0, 1.0f, 1.0f);
1920         });
1921         // Incorrect arity
1922         checkWMTE(() -&gt; { // 0
1923             float x = (float) vh.compareAndExchangeAcquire();
1924         });
1925         checkWMTE(() -&gt; { // &gt;
1926             float x = (float) vh.compareAndExchangeAcquire(array, 0, 1.0f, 1.0f, Void.class);
1927         });
1928 
1929 
1930         // CompareAndExchangeRelease
1931         // Incorrect argument types
1932         checkNPE(() -&gt; { // null receiver
1933             float x = (float) vh.compareAndExchangeRelease(null, 0, 1.0f, 1.0f);
1934         });
1935         checkCCE(() -&gt; { // array reference class
1936             float x = (float) vh.compareAndExchangeRelease(Void.class, 0, 1.0f, 1.0f);
1937         });
1938         checkWMTE(() -&gt; { // expected reference class
1939             float x = (float) vh.compareAndExchangeRelease(array, 0, Void.class, 1.0f);
1940         });
1941         checkWMTE(() -&gt; { // actual reference class
1942             float x = (float) vh.compareAndExchangeRelease(array, 0, 1.0f, Void.class);
1943         });
1944         checkWMTE(() -&gt; { // array primitive class
1945             float x = (float) vh.compareAndExchangeRelease(0, 0, 1.0f, 1.0f);
1946         });
1947         checkWMTE(() -&gt; { // index reference class
1948             float x = (float) vh.compareAndExchangeRelease(array, Void.class, 1.0f, 1.0f);
1949         });
1950         // Incorrect return type
1951         checkWMTE(() -&gt; { // reference class
1952             Void r = (Void) vh.compareAndExchangeRelease(array, 0, 1.0f, 1.0f);
1953         });
1954         checkWMTE(() -&gt; { // primitive class
1955             boolean x = (boolean) vh.compareAndExchangeRelease(array, 0, 1.0f, 1.0f);
1956         });
1957         // Incorrect arity
1958         checkWMTE(() -&gt; { // 0
1959             float x = (float) vh.compareAndExchangeRelease();
1960         });
1961         checkWMTE(() -&gt; { // &gt;
1962             float x = (float) vh.compareAndExchangeRelease(array, 0, 1.0f, 1.0f, Void.class);
1963         });
1964 
1965 
1966         // GetAndSet
1967         // Incorrect argument types
1968         checkNPE(() -&gt; { // null array
1969             float x = (float) vh.getAndSet(null, 0, 1.0f);
1970         });
1971         checkCCE(() -&gt; { // array reference class
1972             float x = (float) vh.getAndSet(Void.class, 0, 1.0f);
1973         });
1974         checkWMTE(() -&gt; { // value reference class
1975             float x = (float) vh.getAndSet(array, 0, Void.class);
1976         });
1977         checkWMTE(() -&gt; { // reciarrayever primitive class
1978             float x = (float) vh.getAndSet(0, 0, 1.0f);
1979         });
1980         checkWMTE(() -&gt; { // index reference class
1981             float x = (float) vh.getAndSet(array, Void.class, 1.0f);
1982         });
1983         // Incorrect return type
1984         checkWMTE(() -&gt; { // reference class
1985             Void r = (Void) vh.getAndSet(array, 0, 1.0f);
1986         });
1987         checkWMTE(() -&gt; { // primitive class
1988             boolean x = (boolean) vh.getAndSet(array, 0, 1.0f);
1989         });
1990         // Incorrect arity
1991         checkWMTE(() -&gt; { // 0
1992             float x = (float) vh.getAndSet();
1993         });
1994         checkWMTE(() -&gt; { // &gt;
1995             float x = (float) vh.getAndSet(array, 0, 1.0f, Void.class);
1996         });
1997 
1998 
1999         // GetAndSetAcquire
2000         // Incorrect argument types
2001         checkNPE(() -&gt; { // null array
2002             float x = (float) vh.getAndSetAcquire(null, 0, 1.0f);
2003         });
2004         checkCCE(() -&gt; { // array reference class
2005             float x = (float) vh.getAndSetAcquire(Void.class, 0, 1.0f);
2006         });
2007         checkWMTE(() -&gt; { // value reference class
2008             float x = (float) vh.getAndSetAcquire(array, 0, Void.class);
2009         });
2010         checkWMTE(() -&gt; { // reciarrayever primitive class
2011             float x = (float) vh.getAndSetAcquire(0, 0, 1.0f);
2012         });
2013         checkWMTE(() -&gt; { // index reference class
2014             float x = (float) vh.getAndSetAcquire(array, Void.class, 1.0f);
2015         });
2016         // Incorrect return type
2017         checkWMTE(() -&gt; { // reference class
2018             Void r = (Void) vh.getAndSetAcquire(array, 0, 1.0f);
2019         });
2020         checkWMTE(() -&gt; { // primitive class
2021             boolean x = (boolean) vh.getAndSetAcquire(array, 0, 1.0f);
2022         });
2023         // Incorrect arity
2024         checkWMTE(() -&gt; { // 0
2025             float x = (float) vh.getAndSetAcquire();
2026         });
2027         checkWMTE(() -&gt; { // &gt;
2028             float x = (float) vh.getAndSetAcquire(array, 0, 1.0f, Void.class);
2029         });
2030 
2031 
2032         // GetAndSetRelease
2033         // Incorrect argument types
2034         checkNPE(() -&gt; { // null array
2035             float x = (float) vh.getAndSetRelease(null, 0, 1.0f);
2036         });
2037         checkCCE(() -&gt; { // array reference class
2038             float x = (float) vh.getAndSetRelease(Void.class, 0, 1.0f);
2039         });
2040         checkWMTE(() -&gt; { // value reference class
2041             float x = (float) vh.getAndSetRelease(array, 0, Void.class);
2042         });
2043         checkWMTE(() -&gt; { // reciarrayever primitive class
2044             float x = (float) vh.getAndSetRelease(0, 0, 1.0f);
2045         });
2046         checkWMTE(() -&gt; { // index reference class
2047             float x = (float) vh.getAndSetRelease(array, Void.class, 1.0f);
2048         });
2049         // Incorrect return type
2050         checkWMTE(() -&gt; { // reference class
2051             Void r = (Void) vh.getAndSetRelease(array, 0, 1.0f);
2052         });
2053         checkWMTE(() -&gt; { // primitive class
2054             boolean x = (boolean) vh.getAndSetRelease(array, 0, 1.0f);
2055         });
2056         // Incorrect arity
2057         checkWMTE(() -&gt; { // 0
2058             float x = (float) vh.getAndSetRelease();
2059         });
2060         checkWMTE(() -&gt; { // &gt;
2061             float x = (float) vh.getAndSetRelease(array, 0, 1.0f, Void.class);
2062         });
2063 
2064         // GetAndAdd
2065         // Incorrect argument types
2066         checkNPE(() -&gt; { // null array
2067             float x = (float) vh.getAndAdd(null, 0, 1.0f);
2068         });
2069         checkCCE(() -&gt; { // array reference class
2070             float x = (float) vh.getAndAdd(Void.class, 0, 1.0f);
2071         });
2072         checkWMTE(() -&gt; { // value reference class
2073             float x = (float) vh.getAndAdd(array, 0, Void.class);
2074         });
2075         checkWMTE(() -&gt; { // array primitive class
2076             float x = (float) vh.getAndAdd(0, 0, 1.0f);
2077         });
2078         checkWMTE(() -&gt; { // index reference class
2079             float x = (float) vh.getAndAdd(array, Void.class, 1.0f);
2080         });
2081         // Incorrect return type
2082         checkWMTE(() -&gt; { // reference class
2083             Void r = (Void) vh.getAndAdd(array, 0, 1.0f);
2084         });
2085         checkWMTE(() -&gt; { // primitive class
2086             boolean x = (boolean) vh.getAndAdd(array, 0, 1.0f);
2087         });
2088         // Incorrect arity
2089         checkWMTE(() -&gt; { // 0
2090             float x = (float) vh.getAndAdd();
2091         });
2092         checkWMTE(() -&gt; { // &gt;
2093             float x = (float) vh.getAndAdd(array, 0, 1.0f, Void.class);
2094         });
2095 
2096 
2097         // GetAndAddAcquire
2098         // Incorrect argument types
2099         checkNPE(() -&gt; { // null array
2100             float x = (float) vh.getAndAddAcquire(null, 0, 1.0f);
2101         });
2102         checkCCE(() -&gt; { // array reference class
2103             float x = (float) vh.getAndAddAcquire(Void.class, 0, 1.0f);
2104         });
2105         checkWMTE(() -&gt; { // value reference class
2106             float x = (float) vh.getAndAddAcquire(array, 0, Void.class);
2107         });
2108         checkWMTE(() -&gt; { // array primitive class
2109             float x = (float) vh.getAndAddAcquire(0, 0, 1.0f);
2110         });
2111         checkWMTE(() -&gt; { // index reference class
2112             float x = (float) vh.getAndAddAcquire(array, Void.class, 1.0f);
2113         });
2114         // Incorrect return type
2115         checkWMTE(() -&gt; { // reference class
2116             Void r = (Void) vh.getAndAddAcquire(array, 0, 1.0f);
2117         });
2118         checkWMTE(() -&gt; { // primitive class
2119             boolean x = (boolean) vh.getAndAddAcquire(array, 0, 1.0f);
2120         });
2121         // Incorrect arity
2122         checkWMTE(() -&gt; { // 0
2123             float x = (float) vh.getAndAddAcquire();
2124         });
2125         checkWMTE(() -&gt; { // &gt;
2126             float x = (float) vh.getAndAddAcquire(array, 0, 1.0f, Void.class);
2127         });
2128 
2129 
2130         // GetAndAddRelease
2131         // Incorrect argument types
2132         checkNPE(() -&gt; { // null array
2133             float x = (float) vh.getAndAddRelease(null, 0, 1.0f);
2134         });
2135         checkCCE(() -&gt; { // array reference class
2136             float x = (float) vh.getAndAddRelease(Void.class, 0, 1.0f);
2137         });
2138         checkWMTE(() -&gt; { // value reference class
2139             float x = (float) vh.getAndAddRelease(array, 0, Void.class);
2140         });
2141         checkWMTE(() -&gt; { // array primitive class
2142             float x = (float) vh.getAndAddRelease(0, 0, 1.0f);
2143         });
2144         checkWMTE(() -&gt; { // index reference class
2145             float x = (float) vh.getAndAddRelease(array, Void.class, 1.0f);
2146         });
2147         // Incorrect return type
2148         checkWMTE(() -&gt; { // reference class
2149             Void r = (Void) vh.getAndAddRelease(array, 0, 1.0f);
2150         });
2151         checkWMTE(() -&gt; { // primitive class
2152             boolean x = (boolean) vh.getAndAddRelease(array, 0, 1.0f);
2153         });
2154         // Incorrect arity
2155         checkWMTE(() -&gt; { // 0
2156             float x = (float) vh.getAndAddRelease();
2157         });
2158         checkWMTE(() -&gt; { // &gt;
2159             float x = (float) vh.getAndAddRelease(array, 0, 1.0f, Void.class);
2160         });
2161 
2162     }
2163 
2164     static void testArrayWrongMethodType(Handles hs) throws Throwable {
2165         float[] array = new float[10];
2166         Arrays.fill(array, 1.0f);
2167 
2168         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET)) {
2169             // Incorrect argument types
2170             checkNPE(() -&gt; { // null array
2171                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class)).
2172                     invokeExact((float[]) null, 0);
2173             });
2174             hs.checkWMTEOrCCE(() -&gt; { // array reference class
2175                 float x = (float) hs.get(am, methodType(float.class, Class.class, int.class)).
2176                     invokeExact(Void.class, 0);
2177             });
2178             checkWMTE(() -&gt; { // array primitive class
2179                 float x = (float) hs.get(am, methodType(float.class, int.class, int.class)).
2180                     invokeExact(0, 0);
2181             });
2182             checkWMTE(() -&gt; { // index reference class
2183                 float x = (float) hs.get(am, methodType(float.class, float[].class, Class.class)).
2184                     invokeExact(array, Void.class);
2185             });
2186             // Incorrect return type
2187             checkWMTE(() -&gt; { // reference class
2188                 Void x = (Void) hs.get(am, methodType(Void.class, float[].class, int.class)).
2189                     invokeExact(array, 0);
2190             });
2191             checkWMTE(() -&gt; { // primitive class
2192                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class)).
2193                     invokeExact(array, 0);
2194             });
2195             // Incorrect arity
2196             checkWMTE(() -&gt; { // 0
2197                 float x = (float) hs.get(am, methodType(float.class)).
2198                     invokeExact();
2199             });
2200             checkWMTE(() -&gt; { // &gt;
2201                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, Class.class)).
2202                     invokeExact(array, 0, Void.class);
2203             });
2204         }
2205 
2206         for (TestAccessMode am : testAccessModesOfType(TestAccessType.SET)) {
2207             // Incorrect argument types
2208             checkNPE(() -&gt; { // null array
2209                 hs.get(am, methodType(void.class, float[].class, int.class, float.class)).
2210                     invokeExact((float[]) null, 0, 1.0f);
2211             });
2212             hs.checkWMTEOrCCE(() -&gt; { // array reference class
2213                 hs.get(am, methodType(void.class, Class.class, int.class, float.class)).
2214                     invokeExact(Void.class, 0, 1.0f);
2215             });
2216             checkWMTE(() -&gt; { // value reference class
2217                 hs.get(am, methodType(void.class, float[].class, int.class, Class.class)).
2218                     invokeExact(array, 0, Void.class);
2219             });
2220             checkWMTE(() -&gt; { // receiver primitive class
2221                 hs.get(am, methodType(void.class, int.class, int.class, float.class)).
2222                     invokeExact(0, 0, 1.0f);
2223             });
2224             checkWMTE(() -&gt; { // index reference class
2225                 hs.get(am, methodType(void.class, float[].class, Class.class, float.class)).
2226                     invokeExact(array, Void.class, 1.0f);
2227             });
2228             // Incorrect arity
2229             checkWMTE(() -&gt; { // 0
2230                 hs.get(am, methodType(void.class)).
2231                     invokeExact();
2232             });
2233             checkWMTE(() -&gt; { // &gt;
2234                 hs.get(am, methodType(void.class, float[].class, int.class, Class.class)).
2235                     invokeExact(array, 0, 1.0f, Void.class);
2236             });
2237         }
2238         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_SET)) {
2239             // Incorrect argument types
2240             checkNPE(() -&gt; { // null receiver
2241                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, float.class, float.class)).
2242                     invokeExact((float[]) null, 0, 1.0f, 1.0f);
2243             });
2244             hs.checkWMTEOrCCE(() -&gt; { // receiver reference class
2245                 boolean r = (boolean) hs.get(am, methodType(boolean.class, Class.class, int.class, float.class, float.class)).
2246                     invokeExact(Void.class, 0, 1.0f, 1.0f);
2247             });
2248             checkWMTE(() -&gt; { // expected reference class
2249                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, Class.class, float.class)).
2250                     invokeExact(array, 0, Void.class, 1.0f);
2251             });
2252             checkWMTE(() -&gt; { // actual reference class
2253                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, float.class, Class.class)).
2254                     invokeExact(array, 0, 1.0f, Void.class);
2255             });
2256             checkWMTE(() -&gt; { // receiver primitive class
2257                 boolean r = (boolean) hs.get(am, methodType(boolean.class, int.class, int.class, float.class, float.class)).
2258                     invokeExact(0, 0, 1.0f, 1.0f);
2259             });
2260             checkWMTE(() -&gt; { // index reference class
2261                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float[].class, Class.class, float.class, float.class)).
2262                     invokeExact(array, Void.class, 1.0f, 1.0f);
2263             });
2264             // Incorrect arity
2265             checkWMTE(() -&gt; { // 0
2266                 boolean r = (boolean) hs.get(am, methodType(boolean.class)).
2267                     invokeExact();
2268             });
2269             checkWMTE(() -&gt; { // &gt;
2270                 boolean r = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, float.class, float.class, Class.class)).
2271                     invokeExact(array, 0, 1.0f, 1.0f, Void.class);
2272             });
2273         }
2274 
2275         for (TestAccessMode am : testAccessModesOfType(TestAccessType.COMPARE_AND_EXCHANGE)) {
2276             // Incorrect argument types
2277             checkNPE(() -&gt; { // null receiver
2278                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class, float.class)).
2279                     invokeExact((float[]) null, 0, 1.0f, 1.0f);
2280             });
2281             hs.checkWMTEOrCCE(() -&gt; { // array reference class
2282                 float x = (float) hs.get(am, methodType(float.class, Class.class, int.class, float.class, float.class)).
2283                     invokeExact(Void.class, 0, 1.0f, 1.0f);
2284             });
2285             checkWMTE(() -&gt; { // expected reference class
2286                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, Class.class, float.class)).
2287                     invokeExact(array, 0, Void.class, 1.0f);
2288             });
2289             checkWMTE(() -&gt; { // actual reference class
2290                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class, Class.class)).
2291                     invokeExact(array, 0, 1.0f, Void.class);
2292             });
2293             checkWMTE(() -&gt; { // array primitive class
2294                 float x = (float) hs.get(am, methodType(float.class, int.class, int.class, float.class, float.class)).
2295                     invokeExact(0, 0, 1.0f, 1.0f);
2296             });
2297             checkWMTE(() -&gt; { // index reference class
2298                 float x = (float) hs.get(am, methodType(float.class, float[].class, Class.class, float.class, float.class)).
2299                     invokeExact(array, Void.class, 1.0f, 1.0f);
2300             });
2301             // Incorrect return type
2302             checkWMTE(() -&gt; { // reference class
2303                 Void r = (Void) hs.get(am, methodType(Void.class, float[].class, int.class, float.class, float.class)).
2304                     invokeExact(array, 0, 1.0f, 1.0f);
2305             });
2306             checkWMTE(() -&gt; { // primitive class
2307                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, float.class, float.class)).
2308                     invokeExact(array, 0, 1.0f, 1.0f);
2309             });
2310             // Incorrect arity
2311             checkWMTE(() -&gt; { // 0
2312                 float x = (float) hs.get(am, methodType(float.class)).
2313                     invokeExact();
2314             });
2315             checkWMTE(() -&gt; { // &gt;
2316                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class, float.class, Class.class)).
2317                     invokeExact(array, 0, 1.0f, 1.0f, Void.class);
2318             });
2319         }
2320 
2321         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_SET)) {
2322             // Incorrect argument types
2323             checkNPE(() -&gt; { // null array
2324                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class)).
2325                     invokeExact((float[]) null, 0, 1.0f);
2326             });
2327             hs.checkWMTEOrCCE(() -&gt; { // array reference class
2328                 float x = (float) hs.get(am, methodType(float.class, Class.class, int.class, float.class)).
2329                     invokeExact(Void.class, 0, 1.0f);
2330             });
2331             checkWMTE(() -&gt; { // value reference class
2332                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, Class.class)).
2333                     invokeExact(array, 0, Void.class);
2334             });
2335             checkWMTE(() -&gt; { // array primitive class
2336                 float x = (float) hs.get(am, methodType(float.class, int.class, int.class, float.class)).
2337                     invokeExact(0, 0, 1.0f);
2338             });
2339             checkWMTE(() -&gt; { // index reference class
2340                 float x = (float) hs.get(am, methodType(float.class, float[].class, Class.class, float.class)).
2341                     invokeExact(array, Void.class, 1.0f);
2342             });
2343             // Incorrect return type
2344             checkWMTE(() -&gt; { // reference class
2345                 Void r = (Void) hs.get(am, methodType(Void.class, float[].class, int.class, float.class)).
2346                     invokeExact(array, 0, 1.0f);
2347             });
2348             checkWMTE(() -&gt; { // primitive class
2349                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, float.class)).
2350                     invokeExact(array, 0, 1.0f);
2351             });
2352             // Incorrect arity
2353             checkWMTE(() -&gt; { // 0
2354                 float x = (float) hs.get(am, methodType(float.class)).
2355                     invokeExact();
2356             });
2357             checkWMTE(() -&gt; { // &gt;
2358                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class, Class.class)).
2359                     invokeExact(array, 0, 1.0f, Void.class);
2360             });
2361         }
2362 
2363         for (TestAccessMode am : testAccessModesOfType(TestAccessType.GET_AND_ADD)) {
2364             // Incorrect argument types
2365             checkNPE(() -&gt; { // null array
2366                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class)).
2367                     invokeExact((float[]) null, 0, 1.0f);
2368             });
2369             hs.checkWMTEOrCCE(() -&gt; { // array reference class
2370                 float x = (float) hs.get(am, methodType(float.class, Class.class, int.class, float.class)).
2371                     invokeExact(Void.class, 0, 1.0f);
2372             });
2373             checkWMTE(() -&gt; { // value reference class
2374                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, Class.class)).
2375                     invokeExact(array, 0, Void.class);
2376             });
2377             checkWMTE(() -&gt; { // array primitive class
2378                 float x = (float) hs.get(am, methodType(float.class, int.class, int.class, float.class)).
2379                     invokeExact(0, 0, 1.0f);
2380             });
2381             checkWMTE(() -&gt; { // index reference class
2382                 float x = (float) hs.get(am, methodType(float.class, float[].class, Class.class, float.class)).
2383                     invokeExact(array, Void.class, 1.0f);
2384             });
2385             // Incorrect return type
2386             checkWMTE(() -&gt; { // reference class
2387                 Void r = (Void) hs.get(am, methodType(Void.class, float[].class, int.class, float.class)).
2388                     invokeExact(array, 0, 1.0f);
2389             });
2390             checkWMTE(() -&gt; { // primitive class
2391                 boolean x = (boolean) hs.get(am, methodType(boolean.class, float[].class, int.class, float.class)).
2392                     invokeExact(array, 0, 1.0f);
2393             });
2394             // Incorrect arity
2395             checkWMTE(() -&gt; { // 0
2396                 float x = (float) hs.get(am, methodType(float.class)).
2397                     invokeExact();
2398             });
2399             checkWMTE(() -&gt; { // &gt;
2400                 float x = (float) hs.get(am, methodType(float.class, float[].class, int.class, float.class, Class.class)).
2401                     invokeExact(array, 0, 1.0f, Void.class);
2402             });
2403         }
2404 
2405     }
2406 }
    </pre>
  </body>
</html>