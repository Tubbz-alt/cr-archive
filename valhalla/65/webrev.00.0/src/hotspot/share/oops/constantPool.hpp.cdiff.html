<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/oops/constantPool.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="constantPool.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="instanceKlass.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/oops/constantPool.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 108,19 ***</span>
  
    // Consider using an array of compressed klass pointers to
    // save space on 64-bit platforms.
    Array&lt;Klass*&gt;*       _resolved_klasses;
  
    enum {
      _has_preresolution    = 1,       // Flags
      _on_stack             = 2,
      _is_shared            = 4,
      _has_dynamic_constant = 8
    };
  
<span class="line-modified">!   int                  _flags;  // old fashioned bit twiddling</span>
<span class="line-modified">!   int                  _length; // number of elements in the array</span>
  
    union {
      // set for CDS to restore resolved references
      int                _resolved_reference_length;
      // keeps version number for redefined classes (used in backtrace)
<span class="line-new-header">--- 108,30 ---</span>
  
    // Consider using an array of compressed klass pointers to
    // save space on 64-bit platforms.
    Array&lt;Klass*&gt;*       _resolved_klasses;
  
<span class="line-added">+   u2              _major_version;        // major version number of class file</span>
<span class="line-added">+   u2              _minor_version;        // minor version number of class file</span>
<span class="line-added">+ </span>
<span class="line-added">+   // Constant pool index to the utf8 entry of the Generic signature,</span>
<span class="line-added">+   // or 0 if none.</span>
<span class="line-added">+   u2              _generic_signature_index;</span>
<span class="line-added">+   // Constant pool index to the utf8 entry for the name of source file</span>
<span class="line-added">+   // containing this klass, 0 if not specified.</span>
<span class="line-added">+   u2              _source_file_name_index;</span>
<span class="line-added">+ </span>
    enum {
      _has_preresolution    = 1,       // Flags
      _on_stack             = 2,
      _is_shared            = 4,
      _has_dynamic_constant = 8
    };
  
<span class="line-modified">!   u2              _flags;  // old fashioned bit twiddling</span>
<span class="line-modified">! </span>
<span class="line-added">+   int             _length; // number of elements in the array</span>
  
    union {
      // set for CDS to restore resolved references
      int                _resolved_reference_length;
      // keeps version number for redefined classes (used in backtrace)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 133,12 ***</span>
  
    u1* tag_addr_at(int which) const             { return tags()-&gt;adr_at(which); }
  
    void set_operands(Array&lt;u2&gt;* operands)       { _operands = operands; }
  
<span class="line-modified">!   int flags() const                            { return _flags; }</span>
<span class="line-modified">!   void set_flags(int f)                        { _flags = f; }</span>
  
   private:
    intptr_t* base() const { return (intptr_t*) (((char*) this) + sizeof(ConstantPool)); }
  
    CPSlot slot_at(int which) const;
<span class="line-new-header">--- 144,12 ---</span>
  
    u1* tag_addr_at(int which) const             { return tags()-&gt;adr_at(which); }
  
    void set_operands(Array&lt;u2&gt;* operands)       { _operands = operands; }
  
<span class="line-modified">!   u2 flags() const                             { return _flags; }</span>
<span class="line-modified">!   void set_flags(u2 f)                         { _flags = f; }</span>
  
   private:
    intptr_t* base() const { return (intptr_t*) (((char*) this) + sizeof(ConstantPool)); }
  
    CPSlot slot_at(int which) const;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 187,10 ***</span>
<span class="line-new-header">--- 198,34 ---</span>
    void set_has_preresolution() {
      assert(!is_shared(), &quot;should never be called on shared ConstantPools&quot;);
      _flags |= _has_preresolution;
    }
  
<span class="line-added">+   // minor and major version numbers of class file</span>
<span class="line-added">+   u2 major_version() const                 { return _major_version; }</span>
<span class="line-added">+   void set_major_version(u2 major_version) { _major_version = major_version; }</span>
<span class="line-added">+   u2 minor_version() const                 { return _minor_version; }</span>
<span class="line-added">+   void set_minor_version(u2 minor_version) { _minor_version = minor_version; }</span>
<span class="line-added">+ </span>
<span class="line-added">+   // generics support</span>
<span class="line-added">+   Symbol* generic_signature() const {</span>
<span class="line-added">+     return (_generic_signature_index == 0) ?</span>
<span class="line-added">+       (Symbol*)NULL : symbol_at(_generic_signature_index);</span>
<span class="line-added">+   }</span>
<span class="line-added">+   u2 generic_signature_index() const                   { return _generic_signature_index; }</span>
<span class="line-added">+   void set_generic_signature_index(u2 sig_index)       { _generic_signature_index = sig_index; }</span>
<span class="line-added">+ </span>
<span class="line-added">+   // source file name</span>
<span class="line-added">+   Symbol* source_file_name() const {</span>
<span class="line-added">+     return (_source_file_name_index == 0) ?</span>
<span class="line-added">+       (Symbol*)NULL : symbol_at(_source_file_name_index);</span>
<span class="line-added">+   }</span>
<span class="line-added">+   u2 source_file_name_index() const                    { return _source_file_name_index; }</span>
<span class="line-added">+   void set_source_file_name_index(u2 sourcefile_index) { _source_file_name_index = sourcefile_index; }</span>
<span class="line-added">+ </span>
<span class="line-added">+   void copy_fields(const ConstantPool* orig);</span>
<span class="line-added">+ </span>
    // Redefine classes support.  If a method refering to this constant pool
    // is on the executing stack, or as a handle in vm code, this constant pool
    // can&#39;t be removed from the set of previous versions saved in the instance
    // class.
    bool on_stack() const                      { return (_flags &amp;_on_stack) != 0; }
</pre>
<center><a href="constantPool.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="instanceKlass.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>