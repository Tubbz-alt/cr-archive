<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotResolvedObjectTypeImpl.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../java.base/share/classes/java/lang/invoke/MethodHandles.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HotSpotVMConfig.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotResolvedObjectTypeImpl.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 801         }
 802 
 803         // Fields of the current class can be interleaved with fields of its super-classes
 804         // but the array of fields to be returned must be sorted by increasing offset
 805         // This code populates the array, then applies the sorting function
 806         int resultIndex = prependLength;
 807         for (int i = 0; i &lt; index; ++i) {
 808             FieldInfo field = new FieldInfo(i);
 809             if (field.isStatic() == retrieveStaticFields) {
 810                 int offset = field.getOffset();
 811                 HotSpotResolvedJavaField resolvedJavaField = createField(field.getType(), offset, field.getAccessFlags(), i);
 812                 result[resultIndex++] = resolvedJavaField;
 813             }
 814         }
 815         Arrays.sort(result, fieldSortingMethod);
 816         return result;
 817     }
 818 
 819     @Override
 820     public String getSourceFileName() {
<span class="line-modified"> 821         HotSpotVMConfig config = config();</span>
<span class="line-modified"> 822         final int sourceFileNameIndex = UNSAFE.getChar(getMetaspaceKlass() + config.instanceKlassSourceFileNameIndexOffset);</span>
<span class="line-removed"> 823         if (sourceFileNameIndex == 0) {</span>
<span class="line-removed"> 824             return null;</span>
 825         }
<span class="line-modified"> 826         return getConstantPool().lookupUtf8(sourceFileNameIndex);</span>
 827     }
 828 
 829     @Override
 830     public Annotation[] getAnnotations() {
 831         return runtime().reflection.getAnnotations(this);
 832     }
 833 
 834     @Override
 835     public Annotation[] getDeclaredAnnotations() {
 836         return runtime().reflection.getDeclaredAnnotations(this);
 837     }
 838 
 839     @Override
 840     public &lt;T extends Annotation&gt; T getAnnotation(Class&lt;T&gt; annotationClass) {
 841         return runtime().reflection.getAnnotation(this, annotationClass);
 842     }
 843 
 844     /**
 845      * Performs a fast-path check that this type is resolved in the context of a given accessing
 846      * class. A negative result does not mean this type is not resolved with respect to
</pre>
</td>
<td>
<hr />
<pre>
 801         }
 802 
 803         // Fields of the current class can be interleaved with fields of its super-classes
 804         // but the array of fields to be returned must be sorted by increasing offset
 805         // This code populates the array, then applies the sorting function
 806         int resultIndex = prependLength;
 807         for (int i = 0; i &lt; index; ++i) {
 808             FieldInfo field = new FieldInfo(i);
 809             if (field.isStatic() == retrieveStaticFields) {
 810                 int offset = field.getOffset();
 811                 HotSpotResolvedJavaField resolvedJavaField = createField(field.getType(), offset, field.getAccessFlags(), i);
 812                 result[resultIndex++] = resolvedJavaField;
 813             }
 814         }
 815         Arrays.sort(result, fieldSortingMethod);
 816         return result;
 817     }
 818 
 819     @Override
 820     public String getSourceFileName() {
<span class="line-modified"> 821         if (isArray()) {</span>
<span class="line-modified"> 822             throw new JVMCIError(&quot;Cannot call getSourceFileName() on an array klass type: %s&quot;, this);</span>


 823         }
<span class="line-modified"> 824         return getConstantPool().getSourceFileName();</span>
 825     }
 826 
 827     @Override
 828     public Annotation[] getAnnotations() {
 829         return runtime().reflection.getAnnotations(this);
 830     }
 831 
 832     @Override
 833     public Annotation[] getDeclaredAnnotations() {
 834         return runtime().reflection.getDeclaredAnnotations(this);
 835     }
 836 
 837     @Override
 838     public &lt;T extends Annotation&gt; T getAnnotation(Class&lt;T&gt; annotationClass) {
 839         return runtime().reflection.getAnnotation(this, annotationClass);
 840     }
 841 
 842     /**
 843      * Performs a fast-path check that this type is resolved in the context of a given accessing
 844      * class. A negative result does not mean this type is not resolved with respect to
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../java.base/share/classes/java/lang/invoke/MethodHandles.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="HotSpotVMConfig.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>