<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/TestResolvedJavaType.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../ProblemList.txt.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../tiered/ConstantGettersTransitionsTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/jvmci/jdk.vm.ci.runtime.test/src/jdk/vm/ci/runtime/test/TestResolvedJavaType.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 903     }
 904 
 905     @Test
 906     public void getAnnotationsTest() {
 907         for (Class&lt;?&gt; c : classes) {
 908             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 909             assertArrayEquals(c.getAnnotations(), type.getAnnotations());
 910         }
 911     }
 912 
 913     @Test
 914     public void getAnnotationTest() {
 915         for (Class&lt;?&gt; c : classes) {
 916             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 917             for (Annotation a : c.getAnnotations()) {
 918                 assertEquals(a, type.getAnnotation(a.annotationType()));
 919             }
 920         }
 921     }
 922 







 923     @Test
 924     public void memberClassesTest() {
 925         for (Class&lt;?&gt; c : classes) {
 926             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 927             assertEquals(c.isLocalClass(), type.isLocal());
 928             assertEquals(c.isMemberClass(), type.isMember());
 929             Class&lt;?&gt; enclc = c.getEnclosingClass();
 930             ResolvedJavaType enclt = type.getEnclosingType();
 931             assertFalse(enclc == null ^ enclt == null);
 932             if (enclc != null) {
 933                 assertEquals(enclt, metaAccess.lookupJavaType(enclc));
 934             }
 935         }
 936     }
 937 
 938     @Test
 939     public void isLeafTest() {
 940         for (Class&lt;?&gt; c : classes) {
 941             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 942             ResolvedJavaType arrayType = c != void.class ? metaAccess.lookupJavaType(getArrayClass(c)) : null;
</pre>
<hr />
<pre>
1005         for (Method m : getClass().getDeclaredMethods()) {
1006             if (m.getName().equals(testName) &amp;&amp; m.getAnnotation(Test.class) != null) {
1007                 return m;
1008             }
1009         }
1010         return null;
1011     }
1012 
1013     // @formatter:off
1014     private static final String[] untestedApiMethods = {
1015         &quot;initialize&quot;,
1016         &quot;isPrimitive&quot;,
1017         &quot;newArray&quot;,
1018         &quot;getDeclaredConstructors&quot;,
1019         &quot;isInitialized&quot;,
1020         &quot;isLinked&quot;,
1021         &quot;getJavaClass&quot;,
1022         &quot;getObjectHub&quot;,
1023         &quot;hasFinalizableSubclass&quot;,
1024         &quot;hasFinalizer&quot;,
<span class="line-removed">1025         &quot;getSourceFileName&quot;,</span>
1026         &quot;isLocal&quot;,
1027         &quot;isJavaLangObject&quot;,
1028         &quot;isMember&quot;,
1029         &quot;getElementalType&quot;,
1030         &quot;getEnclosingType&quot;,
1031         &quot;lookupType&quot;,
1032         &quot;resolveField&quot;,
1033         &quot;$jacocoInit&quot;
1034     };
1035     // @formatter:on
1036 
1037     /**
1038      * Ensures that any new methods added to {@link ResolvedJavaMethod} either have a test written
1039      * for them or are added to {@link #untestedApiMethods}.
1040      */
1041     @Test
1042     public void testCoverage() {
1043         Set&lt;String&gt; known = new HashSet&lt;&gt;(Arrays.asList(untestedApiMethods));
1044         for (Method m : ResolvedJavaType.class.getDeclaredMethods()) {
1045             if (findTestMethod(m) == null) {
</pre>
</td>
<td>
<hr />
<pre>
 903     }
 904 
 905     @Test
 906     public void getAnnotationsTest() {
 907         for (Class&lt;?&gt; c : classes) {
 908             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 909             assertArrayEquals(c.getAnnotations(), type.getAnnotations());
 910         }
 911     }
 912 
 913     @Test
 914     public void getAnnotationTest() {
 915         for (Class&lt;?&gt; c : classes) {
 916             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 917             for (Annotation a : c.getAnnotations()) {
 918                 assertEquals(a, type.getAnnotation(a.annotationType()));
 919             }
 920         }
 921     }
 922 
<span class="line-added"> 923     @Test</span>
<span class="line-added"> 924     public void getSourceFileNameTest() {</span>
<span class="line-added"> 925         Class&lt;?&gt; c = Object.class;</span>
<span class="line-added"> 926         ResolvedJavaType type = metaAccess.lookupJavaType(c);</span>
<span class="line-added"> 927         assertEquals(type.getSourceFileName(), &quot;Object.java&quot;);</span>
<span class="line-added"> 928     }</span>
<span class="line-added"> 929 </span>
 930     @Test
 931     public void memberClassesTest() {
 932         for (Class&lt;?&gt; c : classes) {
 933             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 934             assertEquals(c.isLocalClass(), type.isLocal());
 935             assertEquals(c.isMemberClass(), type.isMember());
 936             Class&lt;?&gt; enclc = c.getEnclosingClass();
 937             ResolvedJavaType enclt = type.getEnclosingType();
 938             assertFalse(enclc == null ^ enclt == null);
 939             if (enclc != null) {
 940                 assertEquals(enclt, metaAccess.lookupJavaType(enclc));
 941             }
 942         }
 943     }
 944 
 945     @Test
 946     public void isLeafTest() {
 947         for (Class&lt;?&gt; c : classes) {
 948             ResolvedJavaType type = metaAccess.lookupJavaType(c);
 949             ResolvedJavaType arrayType = c != void.class ? metaAccess.lookupJavaType(getArrayClass(c)) : null;
</pre>
<hr />
<pre>
1012         for (Method m : getClass().getDeclaredMethods()) {
1013             if (m.getName().equals(testName) &amp;&amp; m.getAnnotation(Test.class) != null) {
1014                 return m;
1015             }
1016         }
1017         return null;
1018     }
1019 
1020     // @formatter:off
1021     private static final String[] untestedApiMethods = {
1022         &quot;initialize&quot;,
1023         &quot;isPrimitive&quot;,
1024         &quot;newArray&quot;,
1025         &quot;getDeclaredConstructors&quot;,
1026         &quot;isInitialized&quot;,
1027         &quot;isLinked&quot;,
1028         &quot;getJavaClass&quot;,
1029         &quot;getObjectHub&quot;,
1030         &quot;hasFinalizableSubclass&quot;,
1031         &quot;hasFinalizer&quot;,

1032         &quot;isLocal&quot;,
1033         &quot;isJavaLangObject&quot;,
1034         &quot;isMember&quot;,
1035         &quot;getElementalType&quot;,
1036         &quot;getEnclosingType&quot;,
1037         &quot;lookupType&quot;,
1038         &quot;resolveField&quot;,
1039         &quot;$jacocoInit&quot;
1040     };
1041     // @formatter:on
1042 
1043     /**
1044      * Ensures that any new methods added to {@link ResolvedJavaMethod} either have a test written
1045      * for them or are added to {@link #untestedApiMethods}.
1046      */
1047     @Test
1048     public void testCoverage() {
1049         Set&lt;String&gt; known = new HashSet&lt;&gt;(Arrays.asList(untestedApiMethods));
1050         for (Method m : ResolvedJavaType.class.getDeclaredMethods()) {
1051             if (findTestMethod(m) == null) {
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../ProblemList.txt.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../tiered/ConstantGettersTransitionsTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>