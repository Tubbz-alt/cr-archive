<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/jdk/valhalla/valuetypes/Reflection.java</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="InlineTypeConversionTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/jdk/valhalla/valuetypes/Reflection.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 60     @Test
 61     public static void testNonFlattenValue() throws Exception {
 62         NonFlattenValue nfv = NonFlattenValue.make(10, 20);
 63         Reflection test = new Reflection(NonFlattenValue.class, &quot;NonFlattenValue&quot;, nfv);
 64         test.checkField(&quot;final Point$ref NonFlattenValue.nfp&quot;, &quot;nfp&quot;, Point.ref.class);
 65         test.checkMethod(&quot;public Point NonFlattenValue.pointValue()&quot;, &quot;pointValue&quot;, Point.class);
 66         test.checkMethod(&quot;public Point$ref NonFlattenValue.point()&quot;, &quot;point&quot;, Point.ref.class);
 67         test.checkMethod(&quot;public boolean NonFlattenValue.has(Point,Point$ref)&quot;, &quot;has&quot;, boolean.class, Point.class, Point.ref.class);
 68     }
 69 
 70     /*
 71      * Tests reflection APIs with the value and reference projection type
 72      */
 73     @Test
 74     public static void testMirrors() throws Exception {
 75         Class&lt;?&gt; inlineClass = Point.class;
 76         assertTrue(inlineClass.isInlineClass());
 77         assertFalse(Point.ref.class.isInlineClass());
 78         assertEquals(inlineClass.valueType().get(), Point.class);
 79         assertEquals(inlineClass.referenceType().get(), Point.ref.class);
<span class="line-modified"> 80 </span>

 81 
 82         Point o = Point.makePoint(10, 20);
 83         assertTrue(Point.class.isInstance(o));
 84         assertTrue(Point.ref.class.isInstance(o));
 85 
 86     }
 87 
 88     @Test
 89     public static void testAssignableFrom() {
 90         // V &lt;: V? and V &lt;: Object
 91         assertTrue(Point.ref.class.isAssignableFrom(Point.class));
 92         assertTrue(Object.class.isAssignableFrom(Point.class));
 93         assertFalse(Point.class.isAssignableFrom(Point.ref.class));
 94         assertTrue(Object.class.isAssignableFrom(Point.ref.class));
 95 
 96         assertEquals(Point.class, Point.class.asSubclass(Point.ref.class));
 97         try {
 98             Class&lt;?&gt; c = Point.ref.class.asSubclass(Point.class);
 99             assertTrue(false);
100         } catch (ClassCastException e) { }
</pre>
</td>
<td>
<hr />
<pre>
 60     @Test
 61     public static void testNonFlattenValue() throws Exception {
 62         NonFlattenValue nfv = NonFlattenValue.make(10, 20);
 63         Reflection test = new Reflection(NonFlattenValue.class, &quot;NonFlattenValue&quot;, nfv);
 64         test.checkField(&quot;final Point$ref NonFlattenValue.nfp&quot;, &quot;nfp&quot;, Point.ref.class);
 65         test.checkMethod(&quot;public Point NonFlattenValue.pointValue()&quot;, &quot;pointValue&quot;, Point.class);
 66         test.checkMethod(&quot;public Point$ref NonFlattenValue.point()&quot;, &quot;point&quot;, Point.ref.class);
 67         test.checkMethod(&quot;public boolean NonFlattenValue.has(Point,Point$ref)&quot;, &quot;has&quot;, boolean.class, Point.class, Point.ref.class);
 68     }
 69 
 70     /*
 71      * Tests reflection APIs with the value and reference projection type
 72      */
 73     @Test
 74     public static void testMirrors() throws Exception {
 75         Class&lt;?&gt; inlineClass = Point.class;
 76         assertTrue(inlineClass.isInlineClass());
 77         assertFalse(Point.ref.class.isInlineClass());
 78         assertEquals(inlineClass.valueType().get(), Point.class);
 79         assertEquals(inlineClass.referenceType().get(), Point.ref.class);
<span class="line-modified"> 80         assertEquals(Point.ref.class.valueType().get(), Point.class);</span>
<span class="line-added"> 81         assertEquals(Point.ref.class.referenceType().get(), Point.ref.class);</span>
 82 
 83         Point o = Point.makePoint(10, 20);
 84         assertTrue(Point.class.isInstance(o));
 85         assertTrue(Point.ref.class.isInstance(o));
 86 
 87     }
 88 
 89     @Test
 90     public static void testAssignableFrom() {
 91         // V &lt;: V? and V &lt;: Object
 92         assertTrue(Point.ref.class.isAssignableFrom(Point.class));
 93         assertTrue(Object.class.isAssignableFrom(Point.class));
 94         assertFalse(Point.class.isAssignableFrom(Point.ref.class));
 95         assertTrue(Object.class.isAssignableFrom(Point.ref.class));
 96 
 97         assertEquals(Point.class, Point.class.asSubclass(Point.ref.class));
 98         try {
 99             Class&lt;?&gt; c = Point.ref.class.asSubclass(Point.class);
100             assertTrue(false);
101         } catch (ClassCastException e) { }
</pre>
</td>
</tr>
</table>
<center><a href="InlineTypeConversionTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>