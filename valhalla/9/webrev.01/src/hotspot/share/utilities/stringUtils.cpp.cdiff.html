<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/utilities/stringUtils.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>src/hotspot/share/utilities/stringUtils.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 73,12 ***</span>
  
   private:
    // These do not get properly inlined.
    // For full performance, this should be a template class
    // parameterized by two function arguments.
<span class="line-modified">!   const getc_function_t* _pattern_getc;</span>
<span class="line-modified">!   const getc_function_t* _string_getc;</span>
  
   public:
    StringMatcher(getc_function_t pattern_getc,
                  getc_function_t string_getc)
      : _pattern_getc(pattern_getc),
<span class="line-new-header">--- 73,12 ---</span>
  
   private:
    // These do not get properly inlined.
    // For full performance, this should be a template class
    // parameterized by two function arguments.
<span class="line-modified">!   getc_function_t* _pattern_getc;</span>
<span class="line-modified">!   getc_function_t* _string_getc;</span>
  
   public:
    StringMatcher(getc_function_t pattern_getc,
                  getc_function_t string_getc)
      : _pattern_getc(pattern_getc),
</pre>
<hr />
<pre>
<span class="line-old-header">*** 271,11 ***</span>
      }
      return ch;  // plain character
    }
  };
  
<span class="line-modified">! static bool class_list_match_sane();</span>
  
  bool StringUtils::class_list_match(const char* class_pattern_list,
                                     const char* class_name) {
    assert(class_list_match_sane(), &quot;&quot;);
    if (class_pattern_list == NULL || class_name == NULL || class_name[0] == &#39;\0&#39;)
<span class="line-new-header">--- 271,11 ---</span>
      }
      return ch;  // plain character
    }
  };
  
<span class="line-modified">! DEBUG_ONLY(static bool class_list_match_sane();)</span>
  
  bool StringUtils::class_list_match(const char* class_pattern_list,
                                     const char* class_name) {
    assert(class_list_match_sane(), &quot;&quot;);
    if (class_pattern_list == NULL || class_name == NULL || class_name[0] == &#39;\0&#39;)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 283,21 ***</span>
    ClassListMatcher clm;
    return clm.string_match(class_pattern_list, class_name);
  }
  
  #ifdef ASSERT
<span class="line-modified">! static void</span>
<span class="line-removed">- class_list_match_sane(const char* pat, const char* str, bool result = true) {</span>
    if (result) {
      assert(StringUtils::class_list_match(pat, str), &quot;%s ~ %s&quot;, pat, str);
    } else {
      assert(!StringUtils::class_list_match(pat, str), &quot;%s !~ %s&quot;, pat, str);
    }
  }
  
<span class="line-modified">! static bool</span>
<span class="line-removed">- class_list_match_sane() {</span>
    static bool done = false;
    if (done)  return true;
    done = true;
    class_list_match_sane(&quot;foo&quot;, &quot;foo&quot;);
    class_list_match_sane(&quot;foo,&quot;, &quot;foo&quot;);
<span class="line-new-header">--- 283,19 ---</span>
    ClassListMatcher clm;
    return clm.string_match(class_pattern_list, class_name);
  }
  
  #ifdef ASSERT
<span class="line-modified">! static void class_list_match_sane(const char* pat, const char* str, bool result = true) {</span>
    if (result) {
      assert(StringUtils::class_list_match(pat, str), &quot;%s ~ %s&quot;, pat, str);
    } else {
      assert(!StringUtils::class_list_match(pat, str), &quot;%s !~ %s&quot;, pat, str);
    }
  }
  
<span class="line-modified">! static bool class_list_match_sane() {</span>
    static bool done = false;
    if (done)  return true;
    done = true;
    class_list_match_sane(&quot;foo&quot;, &quot;foo&quot;);
    class_list_match_sane(&quot;foo,&quot;, &quot;foo&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 309,11 ***</span>
    class_list_match_sane(&quot;foo/bar&quot;, &quot;foo.bar&quot;);
    class_list_match_sane(&quot;\\foo&quot;, &quot;foo&quot;);
    class_list_match_sane(&quot;\\*foo&quot;, &quot;*foo&quot;);
    const char* foo = &quot;foo!&quot;;
    char buf[100], buf2[100];
<span class="line-modified">!   const int m = strlen(foo);</span>
    for (int n = 0; n &lt;= 1; n++) {  // neg: 0=&gt;pos
      for (int a = -1; a &lt;= 1; a++) {  // alt: -1/X,T 0/T 1/T,Y
        for (int i = 0; i &lt;= m; i++) {  // 1st substring [i:j]
          for (int j = i; j &lt;= m; j++) {
            if (j == i &amp;&amp; j &gt; 0)  continue; // only take 1st empty
<span class="line-new-header">--- 307,11 ---</span>
    class_list_match_sane(&quot;foo/bar&quot;, &quot;foo.bar&quot;);
    class_list_match_sane(&quot;\\foo&quot;, &quot;foo&quot;);
    class_list_match_sane(&quot;\\*foo&quot;, &quot;*foo&quot;);
    const char* foo = &quot;foo!&quot;;
    char buf[100], buf2[100];
<span class="line-modified">!   const int m = (int)strlen(foo);</span>
    for (int n = 0; n &lt;= 1; n++) {  // neg: 0=&gt;pos
      for (int a = -1; a &lt;= 1; a++) {  // alt: -1/X,T 0/T 1/T,Y
        for (int i = 0; i &lt;= m; i++) {  // 1st substring [i:j]
          for (int j = i; j &lt;= m; j++) {
            if (j == i &amp;&amp; j &gt; 0)  continue; // only take 1st empty
</pre>
<center>&lt; prev <a href="../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>