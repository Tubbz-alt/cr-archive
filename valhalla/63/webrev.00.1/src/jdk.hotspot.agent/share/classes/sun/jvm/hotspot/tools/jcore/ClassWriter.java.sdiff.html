<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/tools/jcore/ClassWriter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../jdk.compiler/share/classes/com/sun/tools/javac/jvm/Target.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../jdk.jdi/share/classes/com/sun/tools/jdi/JNITypeParser.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.hotspot.agent/share/classes/sun/jvm/hotspot/tools/jcore/ClassWriter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
343         if (superKlass != null) { // is not java.lang.Object
344             String superName = superKlass.getName().asString();
345             Short index = (Short) classToIndex.get(superName);
346             if (DEBUG) debugMessage(&quot;super class = &quot; + index);
347             dos.writeShort(index.shortValue());
348         } else {
349             dos.writeShort(0); // no super class
350         }
351     }
352     protected void writeInterfaces() throws IOException {
353         KlassArray interfaces = klass.getLocalInterfaces();
354         final int len = interfaces.length();
355 
356         if (DEBUG) debugMessage(&quot;number of interfaces = &quot; + len);
357 
358         // write interfaces count
359         dos.writeShort((short) len);
360         for (int i = 0; i &lt; len; i++) {
361            Klass k = interfaces.getAt(i);
362            Short index = (Short) classToIndex.get(k.getName().asString());
<span class="line-modified">363            dos.writeShort(index.shortValue());</span>
<span class="line-modified">364            if (DEBUG) debugMessage(&quot;\t&quot; + index);</span>


365         }
366     }
367 
368     protected void writeFields() throws IOException {
369         final int javaFieldsCount = klass.getJavaFieldsCount();
370 
371         // write number of fields
372         dos.writeShort((short) javaFieldsCount);
373 
374         if (DEBUG) debugMessage(&quot;number of fields = &quot; + javaFieldsCount);
375 
376         for (int index = 0; index &lt; javaFieldsCount; index++) {
377             short accessFlags    = klass.getFieldAccessFlags(index);
378             dos.writeShort(accessFlags &amp; (short) JVM_RECOGNIZED_FIELD_MODIFIERS);
379 
380             short nameIndex    = klass.getFieldNameIndex(index);
381             dos.writeShort(nameIndex);
382 
383             short signatureIndex = klass.getFieldSignatureIndex(index);
384             dos.writeShort(signatureIndex);
</pre>
</td>
<td>
<hr />
<pre>
343         if (superKlass != null) { // is not java.lang.Object
344             String superName = superKlass.getName().asString();
345             Short index = (Short) classToIndex.get(superName);
346             if (DEBUG) debugMessage(&quot;super class = &quot; + index);
347             dos.writeShort(index.shortValue());
348         } else {
349             dos.writeShort(0); // no super class
350         }
351     }
352     protected void writeInterfaces() throws IOException {
353         KlassArray interfaces = klass.getLocalInterfaces();
354         final int len = interfaces.length();
355 
356         if (DEBUG) debugMessage(&quot;number of interfaces = &quot; + len);
357 
358         // write interfaces count
359         dos.writeShort((short) len);
360         for (int i = 0; i &lt; len; i++) {
361            Klass k = interfaces.getAt(i);
362            Short index = (Short) classToIndex.get(k.getName().asString());
<span class="line-modified">363            if (index != null) { // Injected interfaces have no constant pool entry</span>
<span class="line-modified">364                dos.writeShort(index.shortValue());</span>
<span class="line-added">365                if (DEBUG) debugMessage(&quot;\t&quot; + index);</span>
<span class="line-added">366            }</span>
367         }
368     }
369 
370     protected void writeFields() throws IOException {
371         final int javaFieldsCount = klass.getJavaFieldsCount();
372 
373         // write number of fields
374         dos.writeShort((short) javaFieldsCount);
375 
376         if (DEBUG) debugMessage(&quot;number of fields = &quot; + javaFieldsCount);
377 
378         for (int index = 0; index &lt; javaFieldsCount; index++) {
379             short accessFlags    = klass.getFieldAccessFlags(index);
380             dos.writeShort(accessFlags &amp; (short) JVM_RECOGNIZED_FIELD_MODIFIERS);
381 
382             short nameIndex    = klass.getFieldNameIndex(index);
383             dos.writeShort(nameIndex);
384 
385             short signatureIndex = klass.getFieldSignatureIndex(index);
386             dos.writeShort(signatureIndex);
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../jdk.compiler/share/classes/com/sun/tools/javac/jvm/Target.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../jdk.jdi/share/classes/com/sun/tools/jdi/JNITypeParser.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>