<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/java.base/share/classes/jdk/internal/org/objectweb/asm/Type.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Opcodes.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="commons/AnalyzerAdapter.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/jdk/internal/org/objectweb/asm/Type.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 57,10 ***</span>
<span class="line-new-header">--- 57,11 ---</span>
   * THE POSSIBILITY OF SUCH DAMAGE.
   */
  package jdk.internal.org.objectweb.asm;
  
  import java.lang.reflect.Constructor;
<span class="line-added">+ import java.lang.reflect.InvocationTargetException;</span>
  import java.lang.reflect.Method;
  
  /**
   * A Java field or method type. This class can be used to make it easier to manipulate type and
   * method descriptors.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 332,11 ***</span>
          // Parse the argument types, one at a each loop iteration.
          while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {
              while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                  currentOffset++;
              }
<span class="line-modified">!             if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</span>
                  // Skip the argument descriptor content.
                  int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                  currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
              }
              ++numArgumentTypes;
<span class="line-new-header">--- 333,12 ---</span>
          // Parse the argument types, one at a each loop iteration.
          while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {
              while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                  currentOffset++;
              }
<span class="line-modified">!             char c = methodDescriptor.charAt(currentOffset++);</span>
<span class="line-added">+             if (c == &#39;L&#39; || c == &#39;Q&#39;) {</span>
                  // Skip the argument descriptor content.
                  int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                  currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
              }
              ++numArgumentTypes;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 351,11 ***</span>
          while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {
              final int currentArgumentTypeOffset = currentOffset;
              while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                  currentOffset++;
              }
<span class="line-modified">!             if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</span>
                  // Skip the argument descriptor content.
                  int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                  currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
              }
              argumentTypes[currentArgumentTypeIndex++] =
<span class="line-new-header">--- 353,12 ---</span>
          while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {
              final int currentArgumentTypeOffset = currentOffset;
              while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                  currentOffset++;
              }
<span class="line-modified">!             char c = methodDescriptor.charAt(currentOffset++);</span>
<span class="line-added">+             if (c == &#39;L&#39; || c == &#39;Q&#39;) {</span>
                  // Skip the argument descriptor content.
                  int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                  currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
              }
              argumentTypes[currentArgumentTypeIndex++] =
</pre>
<hr />
<pre>
<span class="line-old-header">*** 422,11 ***</span>
          // Skip the argument types, one at a each loop iteration.
          while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {
              while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                  currentOffset++;
              }
<span class="line-modified">!             if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</span>
                  // Skip the argument descriptor content.
                  int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                  currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
              }
          }
<span class="line-new-header">--- 425,12 ---</span>
          // Skip the argument types, one at a each loop iteration.
          while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {
              while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                  currentOffset++;
              }
<span class="line-modified">!             char c = methodDescriptor.charAt(currentOffset++);</span>
<span class="line-added">+             if (c == &#39;L&#39; || c == &#39;Q&#39;) {</span>
                  // Skip the argument descriptor content.
                  int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                  currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
              }
          }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 465,10 ***</span>
<span class="line-new-header">--- 469,11 ---</span>
              case &#39;D&#39;:
                  return DOUBLE_TYPE;
              case &#39;[&#39;:
                  return new Type(ARRAY, descriptorBuffer, descriptorBegin, descriptorEnd);
              case &#39;L&#39;:
<span class="line-added">+             case &#39;Q&#39;:</span>
                  return new Type(OBJECT, descriptorBuffer, descriptorBegin + 1, descriptorEnd - 1);
              case &#39;(&#39;:
                  return new Type(METHOD, descriptorBuffer, descriptorBegin, descriptorEnd);
              default:
                  throw new IllegalArgumentException();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 670,14 ***</span>
              } else {
                  throw new AssertionError();
              }
              stringBuilder.append(descriptor);
          } else {
<span class="line-modified">!             stringBuilder.append(&#39;L&#39;).append(getInternalName(currentClass)).append(&#39;;&#39;);</span>
          }
      }
  
      // -----------------------------------------------------------------------------------------------
      // Methods to get the sort, dimension, size, and opcodes corresponding to a Type or descriptor.
      // -----------------------------------------------------------------------------------------------
  
      /**
<span class="line-new-header">--- 675,19 ---</span>
              } else {
                  throw new AssertionError();
              }
              stringBuilder.append(descriptor);
          } else {
<span class="line-modified">!             stringBuilder.append(isInlineClass(currentClass) ? &#39;Q&#39; : &#39;L&#39;).append(getInternalName(currentClass)).append(&#39;;&#39;);</span>
          }
      }
  
<span class="line-added">+     static boolean isInlineClass(Class&lt;?&gt; clazz) {</span>
<span class="line-added">+         int mods = clazz.getModifiers();</span>
<span class="line-added">+         return (mods &amp; 0x00000100) != 0;</span>
<span class="line-added">+     }</span>
<span class="line-added">+ </span>
      // -----------------------------------------------------------------------------------------------
      // Methods to get the sort, dimension, size, and opcodes corresponding to a Type or descriptor.
      // -----------------------------------------------------------------------------------------------
  
      /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 767,11 ***</span>
                  argumentsSize += 2;
              } else {
                  while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                      currentOffset++;
                  }
<span class="line-modified">!                 if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</span>
                      // Skip the argument descriptor content.
                      int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                      currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
                  }
                  argumentsSize += 1;
<span class="line-new-header">--- 777,12 ---</span>
                  argumentsSize += 2;
              } else {
                  while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {
                      currentOffset++;
                  }
<span class="line-modified">!                 char c = methodDescriptor.charAt(currentOffset++);</span>
<span class="line-added">+                 if (c == &#39;L&#39; || c == &#39;Q&#39;) {</span>
                      // Skip the argument descriptor content.
                      int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);
                      currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
                  }
                  argumentsSize += 1;
</pre>
<center><a href="Opcodes.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="commons/AnalyzerAdapter.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>