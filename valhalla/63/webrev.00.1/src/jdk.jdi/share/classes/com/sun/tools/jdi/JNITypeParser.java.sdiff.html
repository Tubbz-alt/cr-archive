<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.jdi/share/classes/com/sun/tools/jdi/JNITypeParser.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/tools/jcore/ClassWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../jdk.jdwp.agent/share/native/libjdwp/util.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.jdi/share/classes/com/sun/tools/jdi/JNITypeParser.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
146             while(currentIndex &lt; signature.length()) {
147                 elem = nextTypeName();
148                 typeNameList.add(elem);
149             }
150             if (typeNameList.size() == 0) {
151                 throw new IllegalArgumentException(&quot;Invalid JNI signature &#39;&quot; +
152                                                    signature + &quot;&#39;&quot;);
153             }
154         }
155         return typeNameList;
156     }
157 
158     private String nextSignature() {
159         char key = signature.charAt(currentIndex++);
160 
161         switch(key) {
162             case (JDWP.Tag.ARRAY):
163                 return  key + nextSignature();
164 
165             case (JDWP.Tag.OBJECT):

166                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
167                                                  currentIndex);
168                 String retVal = signature.substring(currentIndex - 1,
169                                                     endClass + 1);
170                 currentIndex = endClass + 1;
171                 return retVal;
172 
173             case (JDWP.Tag.VOID):
174             case (JDWP.Tag.BOOLEAN):
175             case (JDWP.Tag.BYTE):
176             case (JDWP.Tag.CHAR):
177             case (JDWP.Tag.SHORT):
178             case (JDWP.Tag.INT):
179             case (JDWP.Tag.LONG):
180             case (JDWP.Tag.FLOAT):
181             case (JDWP.Tag.DOUBLE):
182                 return String.valueOf(key);
183 
184             case SIGNATURE_ENDFUNC:
185             case SIGNATURE_FUNC:
</pre>
<hr />
<pre>
189                 throw new IllegalArgumentException(
190                     &quot;Invalid JNI signature character &#39;&quot; + key + &quot;&#39;&quot;);
191 
192         }
193     }
194 
195     private String nextTypeName() {
196         char key = signature.charAt(currentIndex++);
197 
198         switch(key) {
199             case (JDWP.Tag.ARRAY):
200                 return  nextTypeName() + &quot;[]&quot;;
201 
202             case (JDWP.Tag.BYTE):
203                 return &quot;byte&quot;;
204 
205             case (JDWP.Tag.CHAR):
206                 return &quot;char&quot;;
207 
208             case (JDWP.Tag.OBJECT):

209                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
210                                                  currentIndex);
211                 String retVal = signature.substring(currentIndex,
212                                                     endClass);
213                 int index = retVal.indexOf(&quot;.&quot;);
214                 if (index &lt; 0) {
215                     retVal = retVal.replace(&#39;/&#39;, &#39;.&#39;);
216                 } else {
217                     // hidden class
218                     retVal = retVal.substring(0, index).replace(&#39;/&#39;, &#39;.&#39;)
219                                 + &quot;/&quot; + retVal.substring(index + 1);
220                 }
221                 currentIndex = endClass + 1;
222                 return retVal;
223 
224             case (JDWP.Tag.FLOAT):
225                 return &quot;float&quot;;
226 
227             case (JDWP.Tag.DOUBLE):
228                 return &quot;double&quot;;
</pre>
</td>
<td>
<hr />
<pre>
146             while(currentIndex &lt; signature.length()) {
147                 elem = nextTypeName();
148                 typeNameList.add(elem);
149             }
150             if (typeNameList.size() == 0) {
151                 throw new IllegalArgumentException(&quot;Invalid JNI signature &#39;&quot; +
152                                                    signature + &quot;&#39;&quot;);
153             }
154         }
155         return typeNameList;
156     }
157 
158     private String nextSignature() {
159         char key = signature.charAt(currentIndex++);
160 
161         switch(key) {
162             case (JDWP.Tag.ARRAY):
163                 return  key + nextSignature();
164 
165             case (JDWP.Tag.OBJECT):
<span class="line-added">166             case (JDWP.Tag.INLINE_OBJECT):</span>
167                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
168                                                  currentIndex);
169                 String retVal = signature.substring(currentIndex - 1,
170                                                     endClass + 1);
171                 currentIndex = endClass + 1;
172                 return retVal;
173 
174             case (JDWP.Tag.VOID):
175             case (JDWP.Tag.BOOLEAN):
176             case (JDWP.Tag.BYTE):
177             case (JDWP.Tag.CHAR):
178             case (JDWP.Tag.SHORT):
179             case (JDWP.Tag.INT):
180             case (JDWP.Tag.LONG):
181             case (JDWP.Tag.FLOAT):
182             case (JDWP.Tag.DOUBLE):
183                 return String.valueOf(key);
184 
185             case SIGNATURE_ENDFUNC:
186             case SIGNATURE_FUNC:
</pre>
<hr />
<pre>
190                 throw new IllegalArgumentException(
191                     &quot;Invalid JNI signature character &#39;&quot; + key + &quot;&#39;&quot;);
192 
193         }
194     }
195 
196     private String nextTypeName() {
197         char key = signature.charAt(currentIndex++);
198 
199         switch(key) {
200             case (JDWP.Tag.ARRAY):
201                 return  nextTypeName() + &quot;[]&quot;;
202 
203             case (JDWP.Tag.BYTE):
204                 return &quot;byte&quot;;
205 
206             case (JDWP.Tag.CHAR):
207                 return &quot;char&quot;;
208 
209             case (JDWP.Tag.OBJECT):
<span class="line-added">210             case (JDWP.Tag.INLINE_OBJECT):</span>
211                 int endClass = signature.indexOf(SIGNATURE_ENDCLASS,
212                                                  currentIndex);
213                 String retVal = signature.substring(currentIndex,
214                                                     endClass);
215                 int index = retVal.indexOf(&quot;.&quot;);
216                 if (index &lt; 0) {
217                     retVal = retVal.replace(&#39;/&#39;, &#39;.&#39;);
218                 } else {
219                     // hidden class
220                     retVal = retVal.substring(0, index).replace(&#39;/&#39;, &#39;.&#39;)
221                                 + &quot;/&quot; + retVal.substring(index + 1);
222                 }
223                 currentIndex = endClass + 1;
224                 return retVal;
225 
226             case (JDWP.Tag.FLOAT):
227                 return &quot;float&quot;;
228 
229             case (JDWP.Tag.DOUBLE):
230                 return &quot;double&quot;;
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../jdk.hotspot.agent/share/classes/sun/jvm/hotspot/tools/jcore/ClassWriter.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../jdk.jdwp.agent/share/native/libjdwp/util.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>