<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/classfile/javaClasses.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="javaClasses.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="systemDictionary.cpp.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/javaClasses.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -1,7 +1,7 @@</span>
  /*
<span class="udiff-line-modified-removed">-  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
<span class="udiff-line-modified-added">+  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -167,10 +167,12 @@</span>
    static int utf8_length(oop java_string);
    static int utf8_length(oop java_string, typeArrayOop string_value);
  
    // String converters
    static char*  as_utf8_string(oop java_string);
<span class="udiff-line-added">+   static char*  as_utf8_string(oop java_string, int&amp; length);</span>
<span class="udiff-line-added">+   static char*  as_utf8_string_full(oop java_string, char* buf, int buflen, int&amp; length);</span>
    static char*  as_utf8_string(oop java_string, char* buf, int buflen);
    static char*  as_utf8_string(oop java_string, int start, int len);
    static char*  as_utf8_string(oop java_string, typeArrayOop value, char* buf, int buflen);
    static char*  as_utf8_string(oop java_string, typeArrayOop value, int start, int len, char* buf, int buflen);
    static char*  as_platform_dependent_str(Handle java_string, TRAPS);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -264,10 +266,11 @@</span>
    static int _component_mirror_offset;
    static int _name_offset;
    static int _source_file_offset;
    static int _val_type_mirror_offset;
    static int _ref_type_mirror_offset;
<span class="udiff-line-added">+   static int _classData_offset;</span>
  
    static bool offsets_computed;
    static int classRedefinedCount_offset;
  
    static GrowableArray&lt;Klass*&gt;* _fixup_mirror_list;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -275,19 +278,20 @@</span>
  
    static void set_init_lock(oop java_class, oop init_lock);
    static void set_protection_domain(oop java_class, oop protection_domain);
    static void set_class_loader(oop java_class, oop class_loader);
    static void set_component_mirror(oop java_class, oop comp_mirror);
<span class="udiff-line-modified-removed">-   static void initialize_mirror_fields(Klass* k, Handle mirror, Handle protection_domain, TRAPS);</span>
<span class="udiff-line-modified-added">+   static void initialize_mirror_fields(Klass* k, Handle mirror, Handle protection_domain,</span>
<span class="udiff-line-added">+                                        Handle classData, TRAPS);</span>
    static void set_mirror_module_field(Klass* K, Handle mirror, Handle module, TRAPS);
   public:
    static void allocate_fixup_lists();
    static void compute_offsets();
  
    // Instance creation
    static void create_mirror(Klass* k, Handle class_loader, Handle module,
<span class="udiff-line-modified-removed">-                             Handle protection_domain, TRAPS);</span>
<span class="udiff-line-modified-added">+                             Handle protection_domain, Handle classData, TRAPS);</span>
    static void fixup_mirror(Klass* k, TRAPS);
    static oop  create_basic_type_mirror(const char* basic_type_name, BasicType type, TRAPS);
    static void update_archived_primitive_mirror_native_pointers(oop archived_mirror) NOT_CDS_JAVA_HEAP_RETURN;
    static void update_archived_mirror_native_pointers(oop archived_mirror) NOT_CDS_JAVA_HEAP_RETURN;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -332,10 +336,12 @@</span>
    static oop  protection_domain(oop java_class);
    static oop  init_lock(oop java_class);
    static oop  component_mirror(oop java_class);
    static objArrayOop  signers(oop java_class);
    static void set_signers(oop java_class, objArrayOop signers);
<span class="udiff-line-added">+   static oop  class_data(oop java_class);</span>
<span class="udiff-line-added">+   static void set_class_data(oop java_class, oop classData);</span>
  
    static oop class_loader(oop java_class);
    static void set_module(oop java_class, oop module);
    static oop module(oop java_class);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1150,20 +1156,24 @@</span>
  
    static bool is_method(oop obj);
  
    // Relevant integer codes (keep these in synch. with MethodHandleNatives.Constants):
    enum {
<span class="udiff-line-modified-removed">-     MN_IS_METHOD             = 0x00010000, // method (not object constructor)</span>
<span class="udiff-line-modified-removed">-     MN_IS_OBJECT_CONSTRUCTOR = 0x00020000, // object constructor</span>
<span class="udiff-line-modified-added">+     MN_IS_METHOD             = 0x00010000, // method (not constructor)</span>
<span class="udiff-line-modified-added">+     MN_IS_OBJECT_CONSTRUCTOR = 0x00020000, // constructor</span>
      MN_IS_FIELD              = 0x00040000, // field
      MN_IS_TYPE               = 0x00080000, // nested type
      MN_CALLER_SENSITIVE      = 0x00100000, // @CallerSensitive annotation detected
      MN_REFERENCE_KIND_SHIFT  = 24, // refKind
      MN_REFERENCE_KIND_MASK   = 0x0F000000 &gt;&gt; MN_REFERENCE_KIND_SHIFT,
      // The SEARCH_* bits are not for MN.flags but for the matchFlags argument of MHN.getMembers:
      MN_SEARCH_SUPERCLASSES   = 0x00100000, // walk super classes
<span class="udiff-line-modified-removed">-     MN_SEARCH_INTERFACES     = 0x00200000  // walk implemented interfaces</span>
<span class="udiff-line-modified-added">+     MN_SEARCH_INTERFACES     = 0x00200000, // walk implemented interfaces</span>
<span class="udiff-line-added">+     MN_NESTMATE_CLASS        = 0x00000001,</span>
<span class="udiff-line-added">+     MN_HIDDEN_CLASS          = 0x00000002,</span>
<span class="udiff-line-added">+     MN_STRONG_LOADER_LINK    = 0x00000004,</span>
<span class="udiff-line-added">+     MN_ACCESS_VM_ANNOTATIONS = 0x00000008</span>
    };
  
    // Accessors for code generation:
    static int clazz_offset_in_bytes()            { return _clazz_offset; }
    static int type_offset_in_bytes()             { return _type_offset; }
</pre>
<center><a href="javaClasses.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="systemDictionary.cpp.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>