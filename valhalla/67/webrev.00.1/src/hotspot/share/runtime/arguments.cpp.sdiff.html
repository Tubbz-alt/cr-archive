<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/arguments.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../prims/jvm.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="globals.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/arguments.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2108   status = CompilerConfig::check_args_consistency(status);
2109 #if INCLUDE_JVMCI
2110   if (status &amp;&amp; EnableJVMCI) {
2111     PropertyList_unique_add(&amp;_system_properties, &quot;jdk.internal.vm.ci.enabled&quot;, &quot;true&quot;,
2112         AddProperty, UnwriteableProperty, InternalProperty);
2113     if (!create_numbered_property(&quot;jdk.module.addmods&quot;, &quot;jdk.internal.vm.ci&quot;, addmods_count++)) {
2114       return false;
2115     }
2116   }
2117 #endif
2118 
2119 #ifndef SUPPORT_RESERVED_STACK_AREA
2120   if (StackReservedPages != 0) {
2121     FLAG_SET_CMDLINE(StackReservedPages, 0);
2122     warning(&quot;Reserved Stack Area not supported on this platform&quot;);
2123   }
2124 #endif
2125 
2126   status = status &amp;&amp; GCArguments::check_args_consistency();
2127 










2128   return status;
2129 }
2130 
2131 bool Arguments::is_bad_option(const JavaVMOption* option, jboolean ignore,
2132   const char* option_type) {
2133   if (ignore) return false;
2134 
2135   const char* spacer = &quot; &quot;;
2136   if (option_type == NULL) {
2137     option_type = ++spacer; // Set both to the empty string.
2138   }
2139 
2140   jio_fprintf(defaultStream::error_stream(),
2141               &quot;Unrecognized %s%soption: %s\n&quot;, option_type, spacer,
2142               option-&gt;optionString);
2143   return true;
2144 }
2145 
2146 static const char* user_assertion_options[] = {
2147   &quot;-da&quot;, &quot;-ea&quot;, &quot;-disableassertions&quot;, &quot;-enableassertions&quot;, 0
</pre>
<hr />
<pre>
3014 #endif // INCLUDE_JVMCI
3015 #if INCLUDE_JFR
3016     } else if (match_jfr_option(&amp;option)) {
3017       return JNI_EINVAL;
3018 #endif
3019     } else if (match_option(option, &quot;-XX:&quot;, &amp;tail)) { // -XX:xxxx
3020       // Skip -XX:Flags= and -XX:VMOptionsFile= since those cases have
3021       // already been handled
3022       if ((strncmp(tail, &quot;Flags=&quot;, strlen(&quot;Flags=&quot;)) != 0) &amp;&amp;
3023           (strncmp(tail, &quot;VMOptionsFile=&quot;, strlen(&quot;VMOptionsFile=&quot;)) != 0)) {
3024         if (!process_argument(tail, args-&gt;ignoreUnrecognized, origin)) {
3025           return JNI_EINVAL;
3026         }
3027       }
3028     // Unknown option
3029     } else if (is_bad_option(option, args-&gt;ignoreUnrecognized)) {
3030       return JNI_ERR;
3031     }
3032   }
3033 






3034   // PrintSharedArchiveAndExit will turn on
3035   //   -Xshare:on
3036   //   -Xlog:class+path=info
3037   if (PrintSharedArchiveAndExit) {
3038     if (FLAG_SET_CMDLINE(UseSharedSpaces, true) != JVMFlag::SUCCESS) {
3039       return JNI_EINVAL;
3040     }
3041     if (FLAG_SET_CMDLINE(RequireSharedSpaces, true) != JVMFlag::SUCCESS) {
3042       return JNI_EINVAL;
3043     }
3044     LogConfiguration::configure_stdout(LogLevel::Info, true, LOG_TAGS(class, path));
3045   }
3046 
3047   fix_appclasspath();
3048 
3049   return JNI_OK;
3050 }
3051 
3052 void Arguments::add_patch_mod_prefix(const char* module_name, const char* path, bool* patch_mod_javabase) {
3053   // For java.base check for duplicate --patch-module options being specified on the command line.
</pre>
<hr />
<pre>
4105   FLAG_SET_DEFAULT(UseBiasedLocking, false);
4106   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedOops, false));
4107   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedClassPointers, false));
4108 #endif // CC_INTERP
4109 
4110   if (PrintAssembly &amp;&amp; FLAG_IS_DEFAULT(DebugNonSafepoints)) {
4111     warning(&quot;PrintAssembly is enabled; turning on DebugNonSafepoints to gain additional output&quot;);
4112     DebugNonSafepoints = true;
4113   }
4114 
4115   if (FLAG_IS_CMDLINE(CompressedClassSpaceSize) &amp;&amp; !UseCompressedClassPointers) {
4116     warning(&quot;Setting CompressedClassSpaceSize has no effect when compressed class pointers are not used&quot;);
4117   }
4118 
4119   // Treat the odd case where local verification is enabled but remote
4120   // verification is not as if both were enabled.
4121   if (BytecodeVerificationLocal &amp;&amp; !BytecodeVerificationRemote) {
4122     log_info(verification)(&quot;Turning on remote verification because local verification is on&quot;);
4123     FLAG_SET_DEFAULT(BytecodeVerificationRemote, true);
4124   }





4125 
4126 #ifndef PRODUCT
4127   if (!LogVMOutput &amp;&amp; FLAG_IS_DEFAULT(LogVMOutput)) {
4128     if (use_vm_log()) {
4129       LogVMOutput = true;
4130     }
4131   }
4132 #endif // PRODUCT
4133 
4134   if (PrintCommandLineFlags) {
4135     JVMFlag::printSetFlags(tty);
4136   }
4137 
4138   // Apply CPU specific policy for the BiasedLocking
4139   if (UseBiasedLocking) {
4140     if (!VM_Version::use_biased_locking() &amp;&amp;
4141         !(FLAG_IS_CMDLINE(UseBiasedLocking))) {
4142       UseBiasedLocking = false;
4143     }
4144   }
</pre>
</td>
<td>
<hr />
<pre>
2108   status = CompilerConfig::check_args_consistency(status);
2109 #if INCLUDE_JVMCI
2110   if (status &amp;&amp; EnableJVMCI) {
2111     PropertyList_unique_add(&amp;_system_properties, &quot;jdk.internal.vm.ci.enabled&quot;, &quot;true&quot;,
2112         AddProperty, UnwriteableProperty, InternalProperty);
2113     if (!create_numbered_property(&quot;jdk.module.addmods&quot;, &quot;jdk.internal.vm.ci&quot;, addmods_count++)) {
2114       return false;
2115     }
2116   }
2117 #endif
2118 
2119 #ifndef SUPPORT_RESERVED_STACK_AREA
2120   if (StackReservedPages != 0) {
2121     FLAG_SET_CMDLINE(StackReservedPages, 0);
2122     warning(&quot;Reserved Stack Area not supported on this platform&quot;);
2123   }
2124 #endif
2125 
2126   status = status &amp;&amp; GCArguments::check_args_consistency();
2127 
<span class="line-added">2128   if (AMD64_ONLY(false &amp;&amp;) !FLAG_IS_DEFAULT(InlineTypePassFieldsAsArgs)) {</span>
<span class="line-added">2129     FLAG_SET_CMDLINE(InlineTypePassFieldsAsArgs, false);</span>
<span class="line-added">2130     warning(&quot;InlineTypePassFieldsAsArgs is not supported on this platform&quot;);</span>
<span class="line-added">2131   }</span>
<span class="line-added">2132 </span>
<span class="line-added">2133   if (AMD64_ONLY(false &amp;&amp;) !FLAG_IS_DEFAULT(InlineTypeReturnedAsFields)) {</span>
<span class="line-added">2134     FLAG_SET_CMDLINE(InlineTypeReturnedAsFields, false);</span>
<span class="line-added">2135     warning(&quot;InlineTypeReturnedAsFields is not supported on this platform&quot;);</span>
<span class="line-added">2136   }</span>
<span class="line-added">2137 </span>
2138   return status;
2139 }
2140 
2141 bool Arguments::is_bad_option(const JavaVMOption* option, jboolean ignore,
2142   const char* option_type) {
2143   if (ignore) return false;
2144 
2145   const char* spacer = &quot; &quot;;
2146   if (option_type == NULL) {
2147     option_type = ++spacer; // Set both to the empty string.
2148   }
2149 
2150   jio_fprintf(defaultStream::error_stream(),
2151               &quot;Unrecognized %s%soption: %s\n&quot;, option_type, spacer,
2152               option-&gt;optionString);
2153   return true;
2154 }
2155 
2156 static const char* user_assertion_options[] = {
2157   &quot;-da&quot;, &quot;-ea&quot;, &quot;-disableassertions&quot;, &quot;-enableassertions&quot;, 0
</pre>
<hr />
<pre>
3024 #endif // INCLUDE_JVMCI
3025 #if INCLUDE_JFR
3026     } else if (match_jfr_option(&amp;option)) {
3027       return JNI_EINVAL;
3028 #endif
3029     } else if (match_option(option, &quot;-XX:&quot;, &amp;tail)) { // -XX:xxxx
3030       // Skip -XX:Flags= and -XX:VMOptionsFile= since those cases have
3031       // already been handled
3032       if ((strncmp(tail, &quot;Flags=&quot;, strlen(&quot;Flags=&quot;)) != 0) &amp;&amp;
3033           (strncmp(tail, &quot;VMOptionsFile=&quot;, strlen(&quot;VMOptionsFile=&quot;)) != 0)) {
3034         if (!process_argument(tail, args-&gt;ignoreUnrecognized, origin)) {
3035           return JNI_EINVAL;
3036         }
3037       }
3038     // Unknown option
3039     } else if (is_bad_option(option, args-&gt;ignoreUnrecognized)) {
3040       return JNI_ERR;
3041     }
3042   }
3043 
<span class="line-added">3044   if (EnableValhalla) {</span>
<span class="line-added">3045     if (!create_property(&quot;valhalla.enableValhalla&quot;, &quot;true&quot;, InternalProperty)) {</span>
<span class="line-added">3046       return JNI_ENOMEM;</span>
<span class="line-added">3047     }</span>
<span class="line-added">3048   }</span>
<span class="line-added">3049 </span>
3050   // PrintSharedArchiveAndExit will turn on
3051   //   -Xshare:on
3052   //   -Xlog:class+path=info
3053   if (PrintSharedArchiveAndExit) {
3054     if (FLAG_SET_CMDLINE(UseSharedSpaces, true) != JVMFlag::SUCCESS) {
3055       return JNI_EINVAL;
3056     }
3057     if (FLAG_SET_CMDLINE(RequireSharedSpaces, true) != JVMFlag::SUCCESS) {
3058       return JNI_EINVAL;
3059     }
3060     LogConfiguration::configure_stdout(LogLevel::Info, true, LOG_TAGS(class, path));
3061   }
3062 
3063   fix_appclasspath();
3064 
3065   return JNI_OK;
3066 }
3067 
3068 void Arguments::add_patch_mod_prefix(const char* module_name, const char* path, bool* patch_mod_javabase) {
3069   // For java.base check for duplicate --patch-module options being specified on the command line.
</pre>
<hr />
<pre>
4121   FLAG_SET_DEFAULT(UseBiasedLocking, false);
4122   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedOops, false));
4123   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedClassPointers, false));
4124 #endif // CC_INTERP
4125 
4126   if (PrintAssembly &amp;&amp; FLAG_IS_DEFAULT(DebugNonSafepoints)) {
4127     warning(&quot;PrintAssembly is enabled; turning on DebugNonSafepoints to gain additional output&quot;);
4128     DebugNonSafepoints = true;
4129   }
4130 
4131   if (FLAG_IS_CMDLINE(CompressedClassSpaceSize) &amp;&amp; !UseCompressedClassPointers) {
4132     warning(&quot;Setting CompressedClassSpaceSize has no effect when compressed class pointers are not used&quot;);
4133   }
4134 
4135   // Treat the odd case where local verification is enabled but remote
4136   // verification is not as if both were enabled.
4137   if (BytecodeVerificationLocal &amp;&amp; !BytecodeVerificationRemote) {
4138     log_info(verification)(&quot;Turning on remote verification because local verification is on&quot;);
4139     FLAG_SET_DEFAULT(BytecodeVerificationRemote, true);
4140   }
<span class="line-added">4141   if (!EnableValhalla || (is_interpreter_only() &amp;&amp; !is_dumping_archive())) {</span>
<span class="line-added">4142     // Disable calling convention optimizations if value types are not supported</span>
<span class="line-added">4143     InlineTypePassFieldsAsArgs = false;</span>
<span class="line-added">4144     InlineTypeReturnedAsFields = false;</span>
<span class="line-added">4145   }</span>
4146 
4147 #ifndef PRODUCT
4148   if (!LogVMOutput &amp;&amp; FLAG_IS_DEFAULT(LogVMOutput)) {
4149     if (use_vm_log()) {
4150       LogVMOutput = true;
4151     }
4152   }
4153 #endif // PRODUCT
4154 
4155   if (PrintCommandLineFlags) {
4156     JVMFlag::printSetFlags(tty);
4157   }
4158 
4159   // Apply CPU specific policy for the BiasedLocking
4160   if (UseBiasedLocking) {
4161     if (!VM_Version::use_biased_locking() &amp;&amp;
4162         !(FLAG_IS_CMDLINE(UseBiasedLocking))) {
4163       UseBiasedLocking = false;
4164     }
4165   }
</pre>
</td>
</tr>
</table>
<center><a href="../prims/jvm.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="globals.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>