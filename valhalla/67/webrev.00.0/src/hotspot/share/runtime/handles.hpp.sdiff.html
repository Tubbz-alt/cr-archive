<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/handles.hpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="globals.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="safepoint.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/handles.hpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
</pre>
<hr />
<pre>
 64 // used operators for ease of use.
 65 
 66 class Handle {
 67  private:
 68   oop* _handle;
 69 
 70  protected:
 71   oop     obj() const                            { return _handle == NULL ? (oop)NULL : *_handle; }
 72   oop     non_null_obj() const                   { assert(_handle != NULL, &quot;resolving NULL handle&quot;); return *_handle; }
 73 
 74  public:
 75   // Constructors
 76   Handle()                                       { _handle = NULL; }
 77   inline Handle(Thread* thread, oop obj);
 78 
 79   // General access
 80   oop     operator () () const                   { return obj(); }
 81   oop     operator -&gt; () const                   { return non_null_obj(); }
 82 
 83   bool operator == (oop o) const                 { return obj() == o; }

 84   bool operator == (const Handle&amp; h) const       { return obj() == h.obj(); }

 85 
 86   // Null checks
 87   bool    is_null() const                        { return _handle == NULL; }
 88   bool    not_null() const                       { return _handle != NULL; }
 89 
 90   // Debugging
 91   void    print()                                { obj()-&gt;print(); }
 92 
 93   // Direct interface, use very sparingly.
 94   // Used by JavaCalls to quickly convert handles and to create handles static data structures.
 95   // Constructor takes a dummy argument to prevent unintentional type conversion in C++.
 96   Handle(oop *handle, bool dummy)                { _handle = handle; }
 97 
 98   // Raw handle access. Allows easy duplication of Handles. This can be very unsafe
 99   // since duplicates is only valid as long as original handle is alive.
100   oop* raw_value()                               { return _handle; }
101   static oop raw_resolve(oop *handle)            { return handle == NULL ? (oop)NULL : *handle; }
102 };
103 
104 // Specific Handles for different oop types
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.
  8  *
  9  * This code is distributed in the hope that it will be useful, but WITHOUT
 10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 12  * version 2 for more details (a copy is included in the LICENSE file that
 13  * accompanied this code).
 14  *
 15  * You should have received a copy of the GNU General Public License version
 16  * 2 along with this work; if not, write to the Free Software Foundation,
 17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 18  *
 19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 20  * or visit www.oracle.com if you need additional information or have any
 21  * questions.
 22  *
</pre>
<hr />
<pre>
 64 // used operators for ease of use.
 65 
 66 class Handle {
 67  private:
 68   oop* _handle;
 69 
 70  protected:
 71   oop     obj() const                            { return _handle == NULL ? (oop)NULL : *_handle; }
 72   oop     non_null_obj() const                   { assert(_handle != NULL, &quot;resolving NULL handle&quot;); return *_handle; }
 73 
 74  public:
 75   // Constructors
 76   Handle()                                       { _handle = NULL; }
 77   inline Handle(Thread* thread, oop obj);
 78 
 79   // General access
 80   oop     operator () () const                   { return obj(); }
 81   oop     operator -&gt; () const                   { return non_null_obj(); }
 82 
 83   bool operator == (oop o) const                 { return obj() == o; }
<span class="line-added"> 84   bool operator != (oop o) const                 { return obj() != o; }</span>
 85   bool operator == (const Handle&amp; h) const       { return obj() == h.obj(); }
<span class="line-added"> 86   bool operator != (const Handle&amp; h) const       { return obj() != h.obj(); }</span>
 87 
 88   // Null checks
 89   bool    is_null() const                        { return _handle == NULL; }
 90   bool    not_null() const                       { return _handle != NULL; }
 91 
 92   // Debugging
 93   void    print()                                { obj()-&gt;print(); }
 94 
 95   // Direct interface, use very sparingly.
 96   // Used by JavaCalls to quickly convert handles and to create handles static data structures.
 97   // Constructor takes a dummy argument to prevent unintentional type conversion in C++.
 98   Handle(oop *handle, bool dummy)                { _handle = handle; }
 99 
100   // Raw handle access. Allows easy duplication of Handles. This can be very unsafe
101   // since duplicates is only valid as long as original handle is alive.
102   oop* raw_value()                               { return _handle; }
103   static oop raw_resolve(oop *handle)            { return handle == NULL ? (oop)NULL : *handle; }
104 };
105 
106 // Specific Handles for different oop types
</pre>
</td>
</tr>
</table>
<center><a href="globals.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="safepoint.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>