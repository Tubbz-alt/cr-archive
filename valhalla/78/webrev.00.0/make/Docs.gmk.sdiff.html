<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff make/Docs.gmk</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
<body>
<center><a href="../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="conf/jib-profiles.js.sdiff.html" target="_top">next &gt;</a></center>    <h2>make/Docs.gmk</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
594             DEST := $(DOCS_OUTPUTDIR)/specs/, \
595             CSS := $(GLOBAL_SPECS_DEFAULT_CSS_FILE), \
596             OPTIONS := -V include-before=&#39;$(SPECS_TOP)&#39; -V include-after=&#39;$(SPECS_BOTTOM_$($m_$f_NOF_SUBDIRS))&#39;, \
597             REPLACEMENTS := \
598 		@@VERSION_SPECIFICATION@@ =&gt; $(VERSION_SPECIFICATION) ; \
599 		@@VERSION_STRING@@ =&gt; $(VERSION_STRING), \
600             POST_PROCESS := $(TOOL_FIXUPPANDOC), \
601         )) \
602         $(eval JDK_SPECS_TARGETS += $($($m_$f_NAME))) \
603       ) \
604     ) \
605   )
606 
607   # For all markdown files in $module/share/man directories, convert them to
608   # html.
609 
610   # Create dynamic man pages from markdown using pandoc. We need
611   # PANDOC_HTML_MANPAGE_FILTER, a wrapper around
612   # PANDOC_HTML_MANPAGE_FILTER_JAVASCRIPT. This is created by buildtools-jdk.
613 
<span class="line-modified">614   # We should also depend on the source javascript filter</span>
<span class="line-modified">615   PANDOC_HTML_MANPAGE_FILTER_JAVASCRIPT := \</span>
<span class="line-modified">616       $(TOPDIR)/make/scripts/pandoc-html-manpage-filter.js</span>
617 
618   $(foreach m, $(ALL_MODULES), \
619     $(eval MAN_$m := $(call FindModuleManDirs, $m)) \
620     $(foreach d, $(MAN_$m), \
621       $(foreach f, $(call ApplySpecFilter, $(filter %.md, $(call FindFiles, $d))), \
622         $(eval $m_$f_NAME := MAN_TO_HTML_$m_$(strip $(call RelativePath, $f, $(TOPDIR)))) \
623         $(eval $(call SetupProcessMarkdown, $($m_$f_NAME), \
624             SRC := $d, \
625             FILES := $f, \
626             DEST := $(DOCS_OUTPUTDIR)/specs/man, \
627             FILTER := $(PANDOC_HTML_MANPAGE_FILTER), \
628             CSS := $(GLOBAL_SPECS_DEFAULT_CSS_FILE), \
629             REPLACEMENTS := \
630 		@@COPYRIGHT_YEAR@@ =&gt; $(COPYRIGHT_YEAR) ; \
631 		@@VERSION_SHORT@@ =&gt; $(VERSION_SHORT) ; \
632 		@@VERSION_SPECIFICATION@@ =&gt; $(VERSION_SPECIFICATION), \
633             OPTIONS := --toc -V include-before=&#39;$(SPECS_TOP)&#39; -V include-after=&#39;$(SPECS_BOTTOM_1)&#39;, \
634             POST_PROCESS := $(TOOL_FIXUPPANDOC), \
635             EXTRA_DEPS := $(PANDOC_HTML_MANPAGE_FILTER) \
<span class="line-modified">636                 $(PANDOC_HTML_MANPAGE_FILTER_JAVASCRIPT), \</span>
637         )) \
638         $(eval JDK_SPECS_TARGETS += $($($m_$f_NAME))) \
639       ) \
640     ) \
641   )
642 
643   # The html generated from markdown also needs the css file
644   JDK_SPECS_TARGETS += $(COPY_GLOBAL_RESOURCES)
645 endif
646 
647 # Special treatment for generated documentation
648 
649 JDWP_PROTOCOL := $(SUPPORT_OUTPUTDIR)/gensrc/jdk.jdi/jdwp-protocol.html
650 ifneq ($(call ApplySpecFilter, $(JDWP_PROTOCOL)), )
651   $(eval $(call SetupTextFileProcessing, PROCESS_JDWP_PROTOCOL, \
652       SOURCE_FILES := $(JDWP_PROTOCOL), \
653       OUTPUT_DIR := $(DOCS_OUTPUTDIR)/specs/jdwp, \
654       REPLACEMENTS := \
655           &lt;body&gt; =&gt; &lt;body&gt;$(SPECS_TOP) ; \
656           &lt;/body&gt; =&gt; $(SPECS_BOTTOM_1)&lt;/body&gt;, \
</pre>
</td>
<td>
<hr />
<pre>
594             DEST := $(DOCS_OUTPUTDIR)/specs/, \
595             CSS := $(GLOBAL_SPECS_DEFAULT_CSS_FILE), \
596             OPTIONS := -V include-before=&#39;$(SPECS_TOP)&#39; -V include-after=&#39;$(SPECS_BOTTOM_$($m_$f_NOF_SUBDIRS))&#39;, \
597             REPLACEMENTS := \
598 		@@VERSION_SPECIFICATION@@ =&gt; $(VERSION_SPECIFICATION) ; \
599 		@@VERSION_STRING@@ =&gt; $(VERSION_STRING), \
600             POST_PROCESS := $(TOOL_FIXUPPANDOC), \
601         )) \
602         $(eval JDK_SPECS_TARGETS += $($($m_$f_NAME))) \
603       ) \
604     ) \
605   )
606 
607   # For all markdown files in $module/share/man directories, convert them to
608   # html.
609 
610   # Create dynamic man pages from markdown using pandoc. We need
611   # PANDOC_HTML_MANPAGE_FILTER, a wrapper around
612   # PANDOC_HTML_MANPAGE_FILTER_JAVASCRIPT. This is created by buildtools-jdk.
613 
<span class="line-modified">614   # We should also depend on the source code for the filter</span>
<span class="line-modified">615   PANDOC_HTML_MANPAGE_FILTER_SOURCE := $(call FindFiles, \</span>
<span class="line-modified">616       $(TOPDIR)/make/jdk/src/classes/build/tools/pandocfilter)</span>
617 
618   $(foreach m, $(ALL_MODULES), \
619     $(eval MAN_$m := $(call FindModuleManDirs, $m)) \
620     $(foreach d, $(MAN_$m), \
621       $(foreach f, $(call ApplySpecFilter, $(filter %.md, $(call FindFiles, $d))), \
622         $(eval $m_$f_NAME := MAN_TO_HTML_$m_$(strip $(call RelativePath, $f, $(TOPDIR)))) \
623         $(eval $(call SetupProcessMarkdown, $($m_$f_NAME), \
624             SRC := $d, \
625             FILES := $f, \
626             DEST := $(DOCS_OUTPUTDIR)/specs/man, \
627             FILTER := $(PANDOC_HTML_MANPAGE_FILTER), \
628             CSS := $(GLOBAL_SPECS_DEFAULT_CSS_FILE), \
629             REPLACEMENTS := \
630 		@@COPYRIGHT_YEAR@@ =&gt; $(COPYRIGHT_YEAR) ; \
631 		@@VERSION_SHORT@@ =&gt; $(VERSION_SHORT) ; \
632 		@@VERSION_SPECIFICATION@@ =&gt; $(VERSION_SPECIFICATION), \
633             OPTIONS := --toc -V include-before=&#39;$(SPECS_TOP)&#39; -V include-after=&#39;$(SPECS_BOTTOM_1)&#39;, \
634             POST_PROCESS := $(TOOL_FIXUPPANDOC), \
635             EXTRA_DEPS := $(PANDOC_HTML_MANPAGE_FILTER) \
<span class="line-modified">636                 $(PANDOC_HTML_MANPAGE_FILTER_SOURCE), \</span>
637         )) \
638         $(eval JDK_SPECS_TARGETS += $($($m_$f_NAME))) \
639       ) \
640     ) \
641   )
642 
643   # The html generated from markdown also needs the css file
644   JDK_SPECS_TARGETS += $(COPY_GLOBAL_RESOURCES)
645 endif
646 
647 # Special treatment for generated documentation
648 
649 JDWP_PROTOCOL := $(SUPPORT_OUTPUTDIR)/gensrc/jdk.jdi/jdwp-protocol.html
650 ifneq ($(call ApplySpecFilter, $(JDWP_PROTOCOL)), )
651   $(eval $(call SetupTextFileProcessing, PROCESS_JDWP_PROTOCOL, \
652       SOURCE_FILES := $(JDWP_PROTOCOL), \
653       OUTPUT_DIR := $(DOCS_OUTPUTDIR)/specs/jdwp, \
654       REPLACEMENTS := \
655           &lt;body&gt; =&gt; &lt;body&gt;$(SPECS_TOP) ; \
656           &lt;/body&gt; =&gt; $(SPECS_BOTTOM_1)&lt;/body&gt;, \
</pre>
</td>
</tr>
</table>
<center><a href="../.hgtags.sdiff.html" target="_top">&lt; prev</a> <a href="../index.html" target="_top">index</a> <a href="conf/jib-profiles.js.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>