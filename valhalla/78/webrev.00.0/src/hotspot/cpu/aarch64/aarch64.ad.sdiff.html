<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/aarch64/aarch64.ad</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../../../../make/data/jdwp/jdwp.spec.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../x86/macroAssembler_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/aarch64/aarch64.ad</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
13178              as_FloatRegister($src$$reg));
13179   %}
13180 
13181   ins_pipe(fp_uop_s);
13182 %}
13183 
13184 instruct negD_reg_reg(vRegD dst, vRegD src) %{
13185   match(Set dst (NegD src));
13186 
13187   ins_cost(INSN_COST * 3);
13188   format %{ &quot;fnegd   $dst, $src&quot; %}
13189 
13190   ins_encode %{
13191     __ fnegd(as_FloatRegister($dst$$reg),
13192              as_FloatRegister($src$$reg));
13193   %}
13194 
13195   ins_pipe(fp_uop_d);
13196 %}
13197 


































13198 instruct absF_reg(vRegF dst, vRegF src) %{
13199   match(Set dst (AbsF src));
13200 
13201   ins_cost(INSN_COST * 3);
13202   format %{ &quot;fabss   $dst, $src&quot; %}
13203   ins_encode %{
13204     __ fabss(as_FloatRegister($dst$$reg),
13205              as_FloatRegister($src$$reg));
13206   %}
13207 
13208   ins_pipe(fp_uop_s);
13209 %}
13210 
13211 instruct absD_reg(vRegD dst, vRegD src) %{
13212   match(Set dst (AbsD src));
13213 
13214   ins_cost(INSN_COST * 3);
13215   format %{ &quot;fabsd   $dst, $src&quot; %}
13216   ins_encode %{
13217     __ fabsd(as_FloatRegister($dst$$reg),
</pre>
<hr />
<pre>
17051   ins_encode %{
17052     __ fsqrt(as_FloatRegister($dst$$reg), __ T4S, as_FloatRegister($src$$reg));
17053   %}
17054   ins_pipe(vsqrt_fp128);
17055 %}
17056 
17057 instruct vsqrt2D(vecX dst, vecX src)
17058 %{
17059   predicate(n-&gt;as_Vector()-&gt;length() == 2);
17060   match(Set dst (SqrtVD src));
17061   format %{ &quot;fsqrt  $dst, $src\t# vector (2D)&quot; %}
17062   ins_encode %{
17063     __ fsqrt(as_FloatRegister($dst$$reg), __ T2D,
17064              as_FloatRegister($src$$reg));
17065   %}
17066   ins_pipe(vsqrt_fp128);
17067 %}
17068 
17069 // --------------------------------- ABS --------------------------------------
17070 





















































































17071 instruct vabs2F(vecD dst, vecD src)
17072 %{
17073   predicate(n-&gt;as_Vector()-&gt;length() == 2);
17074   match(Set dst (AbsVF src));
17075   ins_cost(INSN_COST * 3);
17076   format %{ &quot;fabs  $dst,$src\t# vector (2S)&quot; %}
17077   ins_encode %{
17078     __ fabs(as_FloatRegister($dst$$reg), __ T2S,
17079             as_FloatRegister($src$$reg));
17080   %}
17081   ins_pipe(vunop_fp64);
17082 %}
17083 
17084 instruct vabs4F(vecX dst, vecX src)
17085 %{
17086   predicate(n-&gt;as_Vector()-&gt;length() == 4);
17087   match(Set dst (AbsVF src));
17088   ins_cost(INSN_COST * 3);
17089   format %{ &quot;fabs  $dst,$src\t# vector (4S)&quot; %}
17090   ins_encode %{
</pre>
</td>
<td>
<hr />
<pre>
13178              as_FloatRegister($src$$reg));
13179   %}
13180 
13181   ins_pipe(fp_uop_s);
13182 %}
13183 
13184 instruct negD_reg_reg(vRegD dst, vRegD src) %{
13185   match(Set dst (NegD src));
13186 
13187   ins_cost(INSN_COST * 3);
13188   format %{ &quot;fnegd   $dst, $src&quot; %}
13189 
13190   ins_encode %{
13191     __ fnegd(as_FloatRegister($dst$$reg),
13192              as_FloatRegister($src$$reg));
13193   %}
13194 
13195   ins_pipe(fp_uop_d);
13196 %}
13197 
<span class="line-added">13198 instruct absI_reg(iRegINoSp dst, iRegIorL2I src, rFlagsReg cr)</span>
<span class="line-added">13199 %{</span>
<span class="line-added">13200   match(Set dst (AbsI src));</span>
<span class="line-added">13201 </span>
<span class="line-added">13202   effect(KILL cr);</span>
<span class="line-added">13203   ins_cost(INSN_COST * 2);</span>
<span class="line-added">13204   format %{ &quot;cmpw  $src, zr\n\t&quot;</span>
<span class="line-added">13205             &quot;cnegw $dst, $src, Assembler::LT\t# int abs&quot;</span>
<span class="line-added">13206   %}</span>
<span class="line-added">13207 </span>
<span class="line-added">13208   ins_encode %{</span>
<span class="line-added">13209     __ cmpw(as_Register($src$$reg), zr);</span>
<span class="line-added">13210     __ cnegw(as_Register($dst$$reg), as_Register($src$$reg), Assembler::LT);</span>
<span class="line-added">13211   %}</span>
<span class="line-added">13212   ins_pipe(pipe_class_default);</span>
<span class="line-added">13213 %}</span>
<span class="line-added">13214 </span>
<span class="line-added">13215 instruct absL_reg(iRegLNoSp dst, iRegL src, rFlagsReg cr)</span>
<span class="line-added">13216 %{</span>
<span class="line-added">13217   match(Set dst (AbsL src));</span>
<span class="line-added">13218 </span>
<span class="line-added">13219   effect(KILL cr);</span>
<span class="line-added">13220   ins_cost(INSN_COST * 2);</span>
<span class="line-added">13221   format %{ &quot;cmp  $src, zr\n\t&quot;</span>
<span class="line-added">13222             &quot;cneg $dst, $src, Assembler::LT\t# long abs&quot;</span>
<span class="line-added">13223   %}</span>
<span class="line-added">13224 </span>
<span class="line-added">13225   ins_encode %{</span>
<span class="line-added">13226     __ cmp(as_Register($src$$reg), zr);</span>
<span class="line-added">13227     __ cneg(as_Register($dst$$reg), as_Register($src$$reg), Assembler::LT);</span>
<span class="line-added">13228   %}</span>
<span class="line-added">13229   ins_pipe(pipe_class_default);</span>
<span class="line-added">13230 %}</span>
<span class="line-added">13231 </span>
13232 instruct absF_reg(vRegF dst, vRegF src) %{
13233   match(Set dst (AbsF src));
13234 
13235   ins_cost(INSN_COST * 3);
13236   format %{ &quot;fabss   $dst, $src&quot; %}
13237   ins_encode %{
13238     __ fabss(as_FloatRegister($dst$$reg),
13239              as_FloatRegister($src$$reg));
13240   %}
13241 
13242   ins_pipe(fp_uop_s);
13243 %}
13244 
13245 instruct absD_reg(vRegD dst, vRegD src) %{
13246   match(Set dst (AbsD src));
13247 
13248   ins_cost(INSN_COST * 3);
13249   format %{ &quot;fabsd   $dst, $src&quot; %}
13250   ins_encode %{
13251     __ fabsd(as_FloatRegister($dst$$reg),
</pre>
<hr />
<pre>
17085   ins_encode %{
17086     __ fsqrt(as_FloatRegister($dst$$reg), __ T4S, as_FloatRegister($src$$reg));
17087   %}
17088   ins_pipe(vsqrt_fp128);
17089 %}
17090 
17091 instruct vsqrt2D(vecX dst, vecX src)
17092 %{
17093   predicate(n-&gt;as_Vector()-&gt;length() == 2);
17094   match(Set dst (SqrtVD src));
17095   format %{ &quot;fsqrt  $dst, $src\t# vector (2D)&quot; %}
17096   ins_encode %{
17097     __ fsqrt(as_FloatRegister($dst$$reg), __ T2D,
17098              as_FloatRegister($src$$reg));
17099   %}
17100   ins_pipe(vsqrt_fp128);
17101 %}
17102 
17103 // --------------------------------- ABS --------------------------------------
17104 
<span class="line-added">17105 instruct vabs8B(vecD dst, vecD src)</span>
<span class="line-added">17106 %{</span>
<span class="line-added">17107   predicate(n-&gt;as_Vector()-&gt;length() == 4 ||</span>
<span class="line-added">17108             n-&gt;as_Vector()-&gt;length() == 8);</span>
<span class="line-added">17109   match(Set dst (AbsVB src));</span>
<span class="line-added">17110   ins_cost(INSN_COST);</span>
<span class="line-added">17111   format %{ &quot;abs  $dst, $src\t# vector (8B)&quot; %}</span>
<span class="line-added">17112   ins_encode %{</span>
<span class="line-added">17113     __ absr(as_FloatRegister($dst$$reg), __ T8B, as_FloatRegister($src$$reg));</span>
<span class="line-added">17114   %}</span>
<span class="line-added">17115   ins_pipe(vlogical64);</span>
<span class="line-added">17116 %}</span>
<span class="line-added">17117 </span>
<span class="line-added">17118 instruct vabs16B(vecX dst, vecX src)</span>
<span class="line-added">17119 %{</span>
<span class="line-added">17120   predicate(n-&gt;as_Vector()-&gt;length() == 16);</span>
<span class="line-added">17121   match(Set dst (AbsVB src));</span>
<span class="line-added">17122   ins_cost(INSN_COST);</span>
<span class="line-added">17123   format %{ &quot;abs  $dst, $src\t# vector (16B)&quot; %}</span>
<span class="line-added">17124   ins_encode %{</span>
<span class="line-added">17125     __ absr(as_FloatRegister($dst$$reg), __ T16B, as_FloatRegister($src$$reg));</span>
<span class="line-added">17126   %}</span>
<span class="line-added">17127   ins_pipe(vlogical128);</span>
<span class="line-added">17128 %}</span>
<span class="line-added">17129 </span>
<span class="line-added">17130 instruct vabs4S(vecD dst, vecD src)</span>
<span class="line-added">17131 %{</span>
<span class="line-added">17132   predicate(n-&gt;as_Vector()-&gt;length() == 4);</span>
<span class="line-added">17133   match(Set dst (AbsVS src));</span>
<span class="line-added">17134   ins_cost(INSN_COST);</span>
<span class="line-added">17135   format %{ &quot;abs  $dst, $src\t# vector (4H)&quot; %}</span>
<span class="line-added">17136   ins_encode %{</span>
<span class="line-added">17137     __ absr(as_FloatRegister($dst$$reg), __ T4H, as_FloatRegister($src$$reg));</span>
<span class="line-added">17138   %}</span>
<span class="line-added">17139   ins_pipe(vlogical64);</span>
<span class="line-added">17140 %}</span>
<span class="line-added">17141 </span>
<span class="line-added">17142 instruct vabs8S(vecX dst, vecX src)</span>
<span class="line-added">17143 %{</span>
<span class="line-added">17144   predicate(n-&gt;as_Vector()-&gt;length() == 8);</span>
<span class="line-added">17145   match(Set dst (AbsVS src));</span>
<span class="line-added">17146   ins_cost(INSN_COST);</span>
<span class="line-added">17147   format %{ &quot;abs  $dst, $src\t# vector (8H)&quot; %}</span>
<span class="line-added">17148   ins_encode %{</span>
<span class="line-added">17149     __ absr(as_FloatRegister($dst$$reg), __ T8H, as_FloatRegister($src$$reg));</span>
<span class="line-added">17150   %}</span>
<span class="line-added">17151   ins_pipe(vlogical128);</span>
<span class="line-added">17152 %}</span>
<span class="line-added">17153 </span>
<span class="line-added">17154 instruct vabs2I(vecD dst, vecD src)</span>
<span class="line-added">17155 %{</span>
<span class="line-added">17156   predicate(n-&gt;as_Vector()-&gt;length() == 2);</span>
<span class="line-added">17157   match(Set dst (AbsVI src));</span>
<span class="line-added">17158   ins_cost(INSN_COST);</span>
<span class="line-added">17159   format %{ &quot;abs  $dst, $src\t# vector (2S)&quot; %}</span>
<span class="line-added">17160   ins_encode %{</span>
<span class="line-added">17161     __ absr(as_FloatRegister($dst$$reg), __ T2S, as_FloatRegister($src$$reg));</span>
<span class="line-added">17162   %}</span>
<span class="line-added">17163   ins_pipe(vlogical64);</span>
<span class="line-added">17164 %}</span>
<span class="line-added">17165 </span>
<span class="line-added">17166 instruct vabs4I(vecX dst, vecX src)</span>
<span class="line-added">17167 %{</span>
<span class="line-added">17168   predicate(n-&gt;as_Vector()-&gt;length() == 4);</span>
<span class="line-added">17169   match(Set dst (AbsVI src));</span>
<span class="line-added">17170   ins_cost(INSN_COST);</span>
<span class="line-added">17171   format %{ &quot;abs  $dst, $src\t# vector (4S)&quot; %}</span>
<span class="line-added">17172   ins_encode %{</span>
<span class="line-added">17173     __ absr(as_FloatRegister($dst$$reg), __ T4S, as_FloatRegister($src$$reg));</span>
<span class="line-added">17174   %}</span>
<span class="line-added">17175   ins_pipe(vlogical128);</span>
<span class="line-added">17176 %}</span>
<span class="line-added">17177 </span>
<span class="line-added">17178 instruct vabs2L(vecX dst, vecX src)</span>
<span class="line-added">17179 %{</span>
<span class="line-added">17180   predicate(n-&gt;as_Vector()-&gt;length() == 2);</span>
<span class="line-added">17181   match(Set dst (AbsVL src));</span>
<span class="line-added">17182   ins_cost(INSN_COST);</span>
<span class="line-added">17183   format %{ &quot;abs  $dst, $src\t# vector (2D)&quot; %}</span>
<span class="line-added">17184   ins_encode %{</span>
<span class="line-added">17185     __ absr(as_FloatRegister($dst$$reg), __ T2D, as_FloatRegister($src$$reg));</span>
<span class="line-added">17186   %}</span>
<span class="line-added">17187   ins_pipe(vlogical128);</span>
<span class="line-added">17188 %}</span>
<span class="line-added">17189 </span>
17190 instruct vabs2F(vecD dst, vecD src)
17191 %{
17192   predicate(n-&gt;as_Vector()-&gt;length() == 2);
17193   match(Set dst (AbsVF src));
17194   ins_cost(INSN_COST * 3);
17195   format %{ &quot;fabs  $dst,$src\t# vector (2S)&quot; %}
17196   ins_encode %{
17197     __ fabs(as_FloatRegister($dst$$reg), __ T2S,
17198             as_FloatRegister($src$$reg));
17199   %}
17200   ins_pipe(vunop_fp64);
17201 %}
17202 
17203 instruct vabs4F(vecX dst, vecX src)
17204 %{
17205   predicate(n-&gt;as_Vector()-&gt;length() == 4);
17206   match(Set dst (AbsVF src));
17207   ins_cost(INSN_COST * 3);
17208   format %{ &quot;fabs  $dst,$src\t# vector (4S)&quot; %}
17209   ins_encode %{
</pre>
</td>
</tr>
</table>
<center><a href="../../../../make/data/jdwp/jdwp.spec.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../x86/macroAssembler_x86.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>