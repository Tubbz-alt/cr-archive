<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/gc/parallel/psParallelCompact.cpp</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
<body>
<center><a href="../../compiler/compileBroker.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../shared/collectedHeap.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/gc/parallel/psParallelCompact.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 47,10 ***</span>
<span class="line-new-header">--- 47,12 ---</span>
  #include &quot;gc/shared/gcLocker.hpp&quot;
  #include &quot;gc/shared/gcTimer.hpp&quot;
  #include &quot;gc/shared/gcTrace.hpp&quot;
  #include &quot;gc/shared/gcTraceTime.inline.hpp&quot;
  #include &quot;gc/shared/isGCActiveMark.hpp&quot;
<span class="line-added">+ #include &quot;gc/shared/oopStorage.inline.hpp&quot;</span>
<span class="line-added">+ #include &quot;gc/shared/oopStorageSet.hpp&quot;</span>
  #include &quot;gc/shared/referencePolicy.hpp&quot;
  #include &quot;gc/shared/referenceProcessor.hpp&quot;
  #include &quot;gc/shared/referenceProcessorPhaseTimes.hpp&quot;
  #include &quot;gc/shared/spaceDecorator.inline.hpp&quot;
  #include &quot;gc/shared/taskTerminator.hpp&quot;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2028,12 ***</span>
  
      case ParallelRootType::jvmti:
        JvmtiExport::oops_do(&amp;mark_and_push_closure);
        break;
  
<span class="line-modified">!     case ParallelRootType::system_dictionary:</span>
<span class="line-modified">!       SystemDictionary::oops_do(&amp;mark_and_push_closure);</span>
        break;
  
      case ParallelRootType::class_loader_data:
        {
          CLDToOopClosure cld_closure(&amp;mark_and_push_closure, ClassLoaderData::_claim_strong);
<span class="line-new-header">--- 2030,12 ---</span>
  
      case ParallelRootType::jvmti:
        JvmtiExport::oops_do(&amp;mark_and_push_closure);
        break;
  
<span class="line-modified">!     case ParallelRootType::vm_global:</span>
<span class="line-modified">!       OopStorageSet::vm_global()-&gt;oops_do(&amp;mark_and_push_closure);</span>
        break;
  
      case ParallelRootType::class_loader_data:
        {
          CLDToOopClosure cld_closure(&amp;mark_and_push_closure, ClassLoaderData::_claim_strong);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 2237,11 ***</span>
    JNIHandles::oops_do(&amp;oop_closure);   // Global (strong) JNI handles
    Threads::oops_do(&amp;oop_closure, NULL);
    ObjectSynchronizer::oops_do(&amp;oop_closure);
    Management::oops_do(&amp;oop_closure);
    JvmtiExport::oops_do(&amp;oop_closure);
<span class="line-modified">!   SystemDictionary::oops_do(&amp;oop_closure);</span>
    CLDToOopClosure cld_closure(&amp;oop_closure, ClassLoaderData::_claim_strong);
    ClassLoaderDataGraph::cld_do(&amp;cld_closure);
  
    // Now adjust pointers in remaining weak roots.  (All of which should
    // have been cleared if they pointed to non-surviving objects.)
<span class="line-new-header">--- 2239,11 ---</span>
    JNIHandles::oops_do(&amp;oop_closure);   // Global (strong) JNI handles
    Threads::oops_do(&amp;oop_closure, NULL);
    ObjectSynchronizer::oops_do(&amp;oop_closure);
    Management::oops_do(&amp;oop_closure);
    JvmtiExport::oops_do(&amp;oop_closure);
<span class="line-modified">!   OopStorageSet::vm_global()-&gt;oops_do(&amp;oop_closure);</span>
    CLDToOopClosure cld_closure(&amp;oop_closure, ClassLoaderData::_claim_strong);
    ClassLoaderDataGraph::cld_do(&amp;cld_closure);
  
    // Now adjust pointers in remaining weak roots.  (All of which should
    // have been cleared if they pointed to non-surviving objects.)
</pre>
<center><a href="../../compiler/compileBroker.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../index.html" target="_top">index</a> <a href="../shared/collectedHeap.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>