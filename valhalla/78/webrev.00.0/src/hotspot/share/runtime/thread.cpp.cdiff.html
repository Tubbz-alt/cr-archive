<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/runtime/thread.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="fieldDescriptor.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="thread.hpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/thread.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 4739,10 ***</span>
<span class="line-new-header">--- 4739,26 ---</span>
  
    // cannot assert on lack of success here; see above comment
    return the_owner;
  }
  
<span class="line-added">+ class PrintOnClosure : public ThreadClosure {</span>
<span class="line-added">+ private:</span>
<span class="line-added">+   outputStream* _st;</span>
<span class="line-added">+ </span>
<span class="line-added">+ public:</span>
<span class="line-added">+   PrintOnClosure(outputStream* st) :</span>
<span class="line-added">+       _st(st) {}</span>
<span class="line-added">+ </span>
<span class="line-added">+   virtual void do_thread(Thread* thread) {</span>
<span class="line-added">+     if (thread != NULL) {</span>
<span class="line-added">+       thread-&gt;print_on(_st);</span>
<span class="line-added">+       _st-&gt;cr();</span>
<span class="line-added">+     }</span>
<span class="line-added">+   }</span>
<span class="line-added">+ };</span>
<span class="line-added">+ </span>
  // Threads::print_on() is called at safepoint by VM_PrintThreads operation.
  void Threads::print_on(outputStream* st, bool print_stacks,
                         bool internal_format, bool print_concurrent_locks,
                         bool print_extended_info) {
    char buf[32];
</pre>
<hr />
<pre>
<span class="line-old-header">*** 4781,18 ***</span>
        concurrent_locks.print_locks_on(p, st);
      }
  #endif // INCLUDE_SERVICES
    }
  
<span class="line-modified">!   VMThread::vm_thread()-&gt;print_on(st);</span>
<span class="line-modified">!   st-&gt;cr();</span>
<span class="line-modified">!   Universe::heap()-&gt;print_gc_threads_on(st);</span>
<span class="line-modified">!   WatcherThread* wt = WatcherThread::watcher_thread();</span>
<span class="line-removed">-   if (wt != NULL) {</span>
<span class="line-removed">-     wt-&gt;print_on(st);</span>
<span class="line-removed">-     st-&gt;cr();</span>
<span class="line-removed">-   }</span>
  
    st-&gt;flush();
  }
  
  void Threads::print_on_error(Thread* this_thread, outputStream* st, Thread* current, char* buf,
<span class="line-new-header">--- 4797,14 ---</span>
        concurrent_locks.print_locks_on(p, st);
      }
  #endif // INCLUDE_SERVICES
    }
  
<span class="line-modified">!   PrintOnClosure cl(st);</span>
<span class="line-modified">!   cl.do_thread(VMThread::vm_thread());</span>
<span class="line-modified">!   Universe::heap()-&gt;gc_threads_do(&amp;cl);</span>
<span class="line-modified">!   cl.do_thread(WatcherThread::watcher_thread());</span>
  
    st-&gt;flush();
  }
  
  void Threads::print_on_error(Thread* this_thread, outputStream* st, Thread* current, char* buf,
</pre>
<center><a href="fieldDescriptor.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="thread.hpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>