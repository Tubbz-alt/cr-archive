<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Types.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../doclint/Checker.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../comp/Attr.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Types.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 2224,26 ***</span>
  
                  // No man may be an island, but the bell tolls for a value.
                  if (isValue(t))
                      return null;
  
<span class="line-modified">!                 Type st = supertype(t);</span>
<span class="line-modified">!                 if (st.hasTag(CLASS) || st.hasTag(TYPEVAR)) {</span>
<span class="line-modified">!                     Type x = asSuper(st, sym);</span>
<span class="line-removed">-                     if (x != null)</span>
<span class="line-removed">-                         return x;</span>
                  }
<span class="line-modified">!                 if ((sym.flags() &amp; INTERFACE) != 0) {</span>
<span class="line-modified">!                     for (List&lt;Type&gt; l = interfaces(t); l.nonEmpty(); l = l.tail) {</span>
<span class="line-modified">!                         if (!l.head.hasTag(ERROR)) {</span>
<span class="line-modified">!                             Type x = asSuper(l.head, sym);</span>
<span class="line-modified">!                             if (x != null)</span>
<span class="line-modified">!                                 return x;</span>
                          }
                      }
                  }
<span class="line-removed">-                 return null;</span>
              }
  
              @Override
              public Type visitArrayType(ArrayType t, Symbol sym) {
                  return isSubtype(t, sym.type) ? sym.type : null;
<span class="line-new-header">--- 2224,35 ---</span>
  
                  // No man may be an island, but the bell tolls for a value.
                  if (isValue(t))
                      return null;
  
<span class="line-modified">!                 Symbol c = t.tsym;</span>
<span class="line-modified">!                 if ((c.flags_field &amp; LOCKED) != 0) {</span>
<span class="line-modified">!                     return null;</span>
                  }
<span class="line-modified">!                 try {</span>
<span class="line-modified">!                     c.flags_field |= LOCKED;</span>
<span class="line-modified">!                     Type st = supertype(t);</span>
<span class="line-modified">!                     if (st.hasTag(CLASS) || st.hasTag(TYPEVAR)) {</span>
<span class="line-modified">!                         Type x = asSuper(st, sym);</span>
<span class="line-modified">!                         if (x != null)</span>
<span class="line-added">+                             return x;</span>
<span class="line-added">+                     }</span>
<span class="line-added">+                     if ((sym.flags() &amp; INTERFACE) != 0) {</span>
<span class="line-added">+                         for (List&lt;Type&gt; l = interfaces(t); l.nonEmpty(); l = l.tail) {</span>
<span class="line-added">+                             if (!l.head.hasTag(ERROR)) {</span>
<span class="line-added">+                                 Type x = asSuper(l.head, sym);</span>
<span class="line-added">+                                 if (x != null)</span>
<span class="line-added">+                                     return x;</span>
<span class="line-added">+                             }</span>
                          }
                      }
<span class="line-added">+                     return null;</span>
<span class="line-added">+                 } finally {</span>
<span class="line-added">+                     c.flags_field &amp;= ~LOCKED;</span>
                  }
              }
  
              @Override
              public Type visitArrayType(ArrayType t, Symbol sym) {
                  return isSubtype(t, sym.type) ? sym.type : null;
</pre>
<center><a href="../../doclint/Checker.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../comp/Attr.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>