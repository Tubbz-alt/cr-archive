<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/arguments.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../prims/whitebox.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="deoptimization.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/arguments.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2119   status = CompilerConfig::check_args_consistency(status);
2120 #if INCLUDE_JVMCI
2121   if (status &amp;&amp; EnableJVMCI) {
2122     PropertyList_unique_add(&amp;_system_properties, &quot;jdk.internal.vm.ci.enabled&quot;, &quot;true&quot;,
2123         AddProperty, UnwriteableProperty, InternalProperty);
2124     if (!create_numbered_property(&quot;jdk.module.addmods&quot;, &quot;jdk.internal.vm.ci&quot;, addmods_count++)) {
2125       return false;
2126     }
2127   }
2128 #endif
2129 
2130 #ifndef SUPPORT_RESERVED_STACK_AREA
2131   if (StackReservedPages != 0) {
2132     FLAG_SET_CMDLINE(StackReservedPages, 0);
2133     warning(&quot;Reserved Stack Area not supported on this platform&quot;);
2134   }
2135 #endif
2136 
2137   status = status &amp;&amp; GCArguments::check_args_consistency();
2138 










2139   return status;
2140 }
2141 
2142 bool Arguments::is_bad_option(const JavaVMOption* option, jboolean ignore,
2143   const char* option_type) {
2144   if (ignore) return false;
2145 
2146   const char* spacer = &quot; &quot;;
2147   if (option_type == NULL) {
2148     option_type = ++spacer; // Set both to the empty string.
2149   }
2150 
2151   jio_fprintf(defaultStream::error_stream(),
2152               &quot;Unrecognized %s%soption: %s\n&quot;, option_type, spacer,
2153               option-&gt;optionString);
2154   return true;
2155 }
2156 
2157 static const char* user_assertion_options[] = {
2158   &quot;-da&quot;, &quot;-ea&quot;, &quot;-disableassertions&quot;, &quot;-enableassertions&quot;, 0
</pre>
<hr />
<pre>
3025 #endif // INCLUDE_JVMCI
3026 #if INCLUDE_JFR
3027     } else if (match_jfr_option(&amp;option)) {
3028       return JNI_EINVAL;
3029 #endif
3030     } else if (match_option(option, &quot;-XX:&quot;, &amp;tail)) { // -XX:xxxx
3031       // Skip -XX:Flags= and -XX:VMOptionsFile= since those cases have
3032       // already been handled
3033       if ((strncmp(tail, &quot;Flags=&quot;, strlen(&quot;Flags=&quot;)) != 0) &amp;&amp;
3034           (strncmp(tail, &quot;VMOptionsFile=&quot;, strlen(&quot;VMOptionsFile=&quot;)) != 0)) {
3035         if (!process_argument(tail, args-&gt;ignoreUnrecognized, origin)) {
3036           return JNI_EINVAL;
3037         }
3038       }
3039     // Unknown option
3040     } else if (is_bad_option(option, args-&gt;ignoreUnrecognized)) {
3041       return JNI_ERR;
3042     }
3043   }
3044 






3045   // PrintSharedArchiveAndExit will turn on
3046   //   -Xshare:on
3047   //   -Xlog:class+path=info
3048   if (PrintSharedArchiveAndExit) {
3049     if (FLAG_SET_CMDLINE(UseSharedSpaces, true) != JVMFlag::SUCCESS) {
3050       return JNI_EINVAL;
3051     }
3052     if (FLAG_SET_CMDLINE(RequireSharedSpaces, true) != JVMFlag::SUCCESS) {
3053       return JNI_EINVAL;
3054     }
3055     LogConfiguration::configure_stdout(LogLevel::Info, true, LOG_TAGS(class, path));
3056   }
3057 
3058   fix_appclasspath();
3059 
3060   return JNI_OK;
3061 }
3062 
3063 void Arguments::add_patch_mod_prefix(const char* module_name, const char* path, bool* patch_mod_javabase) {
3064   // For java.base check for duplicate --patch-module options being specified on the command line.
</pre>
<hr />
<pre>
4116   FLAG_SET_DEFAULT(UseBiasedLocking, false);
4117   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedOops, false));
4118   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedClassPointers, false));
4119 #endif // CC_INTERP
4120 
4121   if (PrintAssembly &amp;&amp; FLAG_IS_DEFAULT(DebugNonSafepoints)) {
4122     warning(&quot;PrintAssembly is enabled; turning on DebugNonSafepoints to gain additional output&quot;);
4123     DebugNonSafepoints = true;
4124   }
4125 
4126   if (FLAG_IS_CMDLINE(CompressedClassSpaceSize) &amp;&amp; !UseCompressedClassPointers) {
4127     warning(&quot;Setting CompressedClassSpaceSize has no effect when compressed class pointers are not used&quot;);
4128   }
4129 
4130   // Treat the odd case where local verification is enabled but remote
4131   // verification is not as if both were enabled.
4132   if (BytecodeVerificationLocal &amp;&amp; !BytecodeVerificationRemote) {
4133     log_info(verification)(&quot;Turning on remote verification because local verification is on&quot;);
4134     FLAG_SET_DEFAULT(BytecodeVerificationRemote, true);
4135   }





4136 
4137 #ifndef PRODUCT
4138   if (!LogVMOutput &amp;&amp; FLAG_IS_DEFAULT(LogVMOutput)) {
4139     if (use_vm_log()) {
4140       LogVMOutput = true;
4141     }
4142   }
4143 #endif // PRODUCT
4144 
4145   if (PrintCommandLineFlags) {
4146     JVMFlag::printSetFlags(tty);
4147   }
4148 
4149   // Apply CPU specific policy for the BiasedLocking
4150   if (UseBiasedLocking) {
4151     if (!VM_Version::use_biased_locking() &amp;&amp;
4152         !(FLAG_IS_CMDLINE(UseBiasedLocking))) {
4153       UseBiasedLocking = false;
4154     }
4155   }
</pre>
</td>
<td>
<hr />
<pre>
2119   status = CompilerConfig::check_args_consistency(status);
2120 #if INCLUDE_JVMCI
2121   if (status &amp;&amp; EnableJVMCI) {
2122     PropertyList_unique_add(&amp;_system_properties, &quot;jdk.internal.vm.ci.enabled&quot;, &quot;true&quot;,
2123         AddProperty, UnwriteableProperty, InternalProperty);
2124     if (!create_numbered_property(&quot;jdk.module.addmods&quot;, &quot;jdk.internal.vm.ci&quot;, addmods_count++)) {
2125       return false;
2126     }
2127   }
2128 #endif
2129 
2130 #ifndef SUPPORT_RESERVED_STACK_AREA
2131   if (StackReservedPages != 0) {
2132     FLAG_SET_CMDLINE(StackReservedPages, 0);
2133     warning(&quot;Reserved Stack Area not supported on this platform&quot;);
2134   }
2135 #endif
2136 
2137   status = status &amp;&amp; GCArguments::check_args_consistency();
2138 
<span class="line-added">2139   if (AMD64_ONLY(false &amp;&amp;) !FLAG_IS_DEFAULT(InlineTypePassFieldsAsArgs)) {</span>
<span class="line-added">2140     FLAG_SET_CMDLINE(InlineTypePassFieldsAsArgs, false);</span>
<span class="line-added">2141     warning(&quot;InlineTypePassFieldsAsArgs is not supported on this platform&quot;);</span>
<span class="line-added">2142   }</span>
<span class="line-added">2143 </span>
<span class="line-added">2144   if (AMD64_ONLY(false &amp;&amp;) !FLAG_IS_DEFAULT(InlineTypeReturnedAsFields)) {</span>
<span class="line-added">2145     FLAG_SET_CMDLINE(InlineTypeReturnedAsFields, false);</span>
<span class="line-added">2146     warning(&quot;InlineTypeReturnedAsFields is not supported on this platform&quot;);</span>
<span class="line-added">2147   }</span>
<span class="line-added">2148 </span>
2149   return status;
2150 }
2151 
2152 bool Arguments::is_bad_option(const JavaVMOption* option, jboolean ignore,
2153   const char* option_type) {
2154   if (ignore) return false;
2155 
2156   const char* spacer = &quot; &quot;;
2157   if (option_type == NULL) {
2158     option_type = ++spacer; // Set both to the empty string.
2159   }
2160 
2161   jio_fprintf(defaultStream::error_stream(),
2162               &quot;Unrecognized %s%soption: %s\n&quot;, option_type, spacer,
2163               option-&gt;optionString);
2164   return true;
2165 }
2166 
2167 static const char* user_assertion_options[] = {
2168   &quot;-da&quot;, &quot;-ea&quot;, &quot;-disableassertions&quot;, &quot;-enableassertions&quot;, 0
</pre>
<hr />
<pre>
3035 #endif // INCLUDE_JVMCI
3036 #if INCLUDE_JFR
3037     } else if (match_jfr_option(&amp;option)) {
3038       return JNI_EINVAL;
3039 #endif
3040     } else if (match_option(option, &quot;-XX:&quot;, &amp;tail)) { // -XX:xxxx
3041       // Skip -XX:Flags= and -XX:VMOptionsFile= since those cases have
3042       // already been handled
3043       if ((strncmp(tail, &quot;Flags=&quot;, strlen(&quot;Flags=&quot;)) != 0) &amp;&amp;
3044           (strncmp(tail, &quot;VMOptionsFile=&quot;, strlen(&quot;VMOptionsFile=&quot;)) != 0)) {
3045         if (!process_argument(tail, args-&gt;ignoreUnrecognized, origin)) {
3046           return JNI_EINVAL;
3047         }
3048       }
3049     // Unknown option
3050     } else if (is_bad_option(option, args-&gt;ignoreUnrecognized)) {
3051       return JNI_ERR;
3052     }
3053   }
3054 
<span class="line-added">3055   if (EnableValhalla) {</span>
<span class="line-added">3056     if (!create_property(&quot;valhalla.enableValhalla&quot;, &quot;true&quot;, InternalProperty)) {</span>
<span class="line-added">3057       return JNI_ENOMEM;</span>
<span class="line-added">3058     }</span>
<span class="line-added">3059   }</span>
<span class="line-added">3060 </span>
3061   // PrintSharedArchiveAndExit will turn on
3062   //   -Xshare:on
3063   //   -Xlog:class+path=info
3064   if (PrintSharedArchiveAndExit) {
3065     if (FLAG_SET_CMDLINE(UseSharedSpaces, true) != JVMFlag::SUCCESS) {
3066       return JNI_EINVAL;
3067     }
3068     if (FLAG_SET_CMDLINE(RequireSharedSpaces, true) != JVMFlag::SUCCESS) {
3069       return JNI_EINVAL;
3070     }
3071     LogConfiguration::configure_stdout(LogLevel::Info, true, LOG_TAGS(class, path));
3072   }
3073 
3074   fix_appclasspath();
3075 
3076   return JNI_OK;
3077 }
3078 
3079 void Arguments::add_patch_mod_prefix(const char* module_name, const char* path, bool* patch_mod_javabase) {
3080   // For java.base check for duplicate --patch-module options being specified on the command line.
</pre>
<hr />
<pre>
4132   FLAG_SET_DEFAULT(UseBiasedLocking, false);
4133   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedOops, false));
4134   LP64_ONLY(FLAG_SET_DEFAULT(UseCompressedClassPointers, false));
4135 #endif // CC_INTERP
4136 
4137   if (PrintAssembly &amp;&amp; FLAG_IS_DEFAULT(DebugNonSafepoints)) {
4138     warning(&quot;PrintAssembly is enabled; turning on DebugNonSafepoints to gain additional output&quot;);
4139     DebugNonSafepoints = true;
4140   }
4141 
4142   if (FLAG_IS_CMDLINE(CompressedClassSpaceSize) &amp;&amp; !UseCompressedClassPointers) {
4143     warning(&quot;Setting CompressedClassSpaceSize has no effect when compressed class pointers are not used&quot;);
4144   }
4145 
4146   // Treat the odd case where local verification is enabled but remote
4147   // verification is not as if both were enabled.
4148   if (BytecodeVerificationLocal &amp;&amp; !BytecodeVerificationRemote) {
4149     log_info(verification)(&quot;Turning on remote verification because local verification is on&quot;);
4150     FLAG_SET_DEFAULT(BytecodeVerificationRemote, true);
4151   }
<span class="line-added">4152   if (!EnableValhalla || (is_interpreter_only() &amp;&amp; !is_dumping_archive())) {</span>
<span class="line-added">4153     // Disable calling convention optimizations if value types are not supported</span>
<span class="line-added">4154     InlineTypePassFieldsAsArgs = false;</span>
<span class="line-added">4155     InlineTypeReturnedAsFields = false;</span>
<span class="line-added">4156   }</span>
4157 
4158 #ifndef PRODUCT
4159   if (!LogVMOutput &amp;&amp; FLAG_IS_DEFAULT(LogVMOutput)) {
4160     if (use_vm_log()) {
4161       LogVMOutput = true;
4162     }
4163   }
4164 #endif // PRODUCT
4165 
4166   if (PrintCommandLineFlags) {
4167     JVMFlag::printSetFlags(tty);
4168   }
4169 
4170   // Apply CPU specific policy for the BiasedLocking
4171   if (UseBiasedLocking) {
4172     if (!VM_Version::use_biased_locking() &amp;&amp;
4173         !(FLAG_IS_CMDLINE(UseBiasedLocking))) {
4174       UseBiasedLocking = false;
4175     }
4176   }
</pre>
</td>
</tr>
</table>
<center><a href="../prims/whitebox.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="deoptimization.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>