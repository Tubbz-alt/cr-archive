<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff test/hotspot/jtreg/compiler/valhalla/valuetypes/ValueTypeTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="TestUnresolvedValueClass.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../runtime/valhalla/valuetypes/FlattenableSemanticTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>test/hotspot/jtreg/compiler/valhalla/valuetypes/ValueTypeTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -161,29 +161,29 @@</span>
          &quot;-XX:+PrintCompilation&quot;, &quot;-XX:+PrintIdeal&quot;, &quot;-XX:+UnlockDiagnosticVMOptions&quot;, &quot;-XX:+PrintOptoAssembly&quot;};
      private static final String[] verifyFlags = {
          &quot;-XX:+VerifyOops&quot;, &quot;-XX:+VerifyStack&quot;, &quot;-XX:+VerifyLastFrame&quot;, &quot;-XX:+VerifyBeforeGC&quot;, &quot;-XX:+VerifyAfterGC&quot;,
          &quot;-XX:+VerifyDuringGC&quot;, &quot;-XX:+VerifyAdapterSharing&quot;};
  
<span class="udiff-line-modified-removed">-     protected static final int ValueTypePassFieldsAsArgsOn = 0x1;</span>
<span class="udiff-line-modified-removed">-     protected static final int ValueTypePassFieldsAsArgsOff = 0x2;</span>
<span class="udiff-line-modified-added">+     protected static final int InlineTypePassFieldsAsArgsOn = 0x1;</span>
<span class="udiff-line-modified-added">+     protected static final int InlineTypePassFieldsAsArgsOff = 0x2;</span>
      protected static final int ValueTypeArrayFlattenOn = 0x4;
      protected static final int ValueTypeArrayFlattenOff = 0x8;
<span class="udiff-line-modified-removed">-     protected static final int ValueTypeReturnedAsFieldsOn = 0x10;</span>
<span class="udiff-line-modified-removed">-     protected static final int ValueTypeReturnedAsFieldsOff = 0x20;</span>
<span class="udiff-line-modified-added">+     protected static final int InlineTypeReturnedAsFieldsOn = 0x10;</span>
<span class="udiff-line-modified-added">+     protected static final int InlineTypeReturnedAsFieldsOff = 0x20;</span>
      protected static final int AlwaysIncrementalInlineOn = 0x40;
      protected static final int AlwaysIncrementalInlineOff = 0x80;
      protected static final int G1GCOn = 0x100;
      protected static final int G1GCOff = 0x200;
      protected static final int ZGCOn = 0x400;
      protected static final int ZGCOff = 0x800;
      protected static final int ArrayLoadStoreProfileOn = 0x1000;
      protected static final int ArrayLoadStoreProfileOff = 0x2000;
      protected static final int TypeProfileOn = 0x4000;
      protected static final int TypeProfileOff = 0x8000;
<span class="udiff-line-modified-removed">-     protected static final boolean ValueTypePassFieldsAsArgs = (Boolean)WHITE_BOX.getVMFlag(&quot;ValueTypePassFieldsAsArgs&quot;);</span>
<span class="udiff-line-modified-removed">-     protected static final boolean ValueTypeArrayFlatten = (WHITE_BOX.getIntxVMFlag(&quot;ValueArrayElemMaxFlatSize&quot;) == -1); // FIXME - fix this if default of ValueArrayElemMaxFlatSize is changed</span>
<span class="udiff-line-modified-removed">-     protected static final boolean ValueTypeReturnedAsFields = (Boolean)WHITE_BOX.getVMFlag(&quot;ValueTypeReturnedAsFields&quot;);</span>
<span class="udiff-line-modified-added">+     protected static final boolean InlineTypePassFieldsAsArgs = (Boolean)WHITE_BOX.getVMFlag(&quot;InlineTypePassFieldsAsArgs&quot;);</span>
<span class="udiff-line-modified-added">+     protected static final boolean ValueTypeArrayFlatten = (WHITE_BOX.getIntxVMFlag(&quot;InlineArrayElemMaxFlatSize&quot;) == -1); // FIXME - fix this if default of InlineArrayElemMaxFlatSize is changed</span>
<span class="udiff-line-modified-added">+     protected static final boolean InlineTypeReturnedAsFields = (Boolean)WHITE_BOX.getVMFlag(&quot;InlineTypeReturnedAsFields&quot;);</span>
      protected static final boolean AlwaysIncrementalInline = (Boolean)WHITE_BOX.getVMFlag(&quot;AlwaysIncrementalInline&quot;);
      protected static final boolean G1GC = (Boolean)WHITE_BOX.getVMFlag(&quot;UseG1GC&quot;);
      protected static final boolean ZGC = (Boolean)WHITE_BOX.getVMFlag(&quot;UseZGC&quot;);
      protected static final boolean VerifyOops = (Boolean)WHITE_BOX.getVMFlag(&quot;VerifyOops&quot;);
      protected static final boolean UseArrayLoadStoreProfile = (Boolean)WHITE_BOX.getVMFlag(&quot;UseArrayLoadStoreProfile&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -255,58 +255,58 @@</span>
      public String[] getVMParameters(int scenario) {
          switch (scenario) {
          case 0: return new String[] {
                  &quot;-XX:-UseArrayLoadStoreProfile&quot;,
                  &quot;-XX:+AlwaysIncrementalInline&quot;,
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatOops=5&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueFieldMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypeReturnedAsFields&quot;};</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatOops=5&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineFiledMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypeReturnedAsFields&quot;};</span>
          case 1: return new String[] {
                  &quot;-XX:-UseArrayLoadStoreProfile&quot;,
                  &quot;-XX:-UseCompressedOops&quot;,
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatOops=5&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueFieldMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:-ValueTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:-ValueTypeReturnedAsFields&quot;};</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatOops=5&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineFiledMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:-InlineTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:-InlineTypeReturnedAsFields&quot;};</span>
          case 2: return new String[] {
                  &quot;-XX:-UseArrayLoadStoreProfile&quot;,
                  &quot;-XX:-UseCompressedOops&quot;,
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatOops=0&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueFieldMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypeReturnedAsFields&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+StressValueTypeReturnedAsFields&quot;};</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatOops=0&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineFiledMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypeReturnedAsFields&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+StressInlineTypeReturnedAsFields&quot;};</span>
          case 3: return new String[] {
                  &quot;-XX:-UseArrayLoadStoreProfile&quot;,
                  &quot;-DVerifyIR=false&quot;,
                  &quot;-XX:+AlwaysIncrementalInline&quot;,
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatOops=0&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueFieldMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypeReturnedAsFields&quot;};</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatOops=0&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineFiledMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypeReturnedAsFields&quot;};</span>
          case 4: return new String[] {
                  &quot;-XX:-UseArrayLoadStoreProfile&quot;,
                  &quot;-DVerifyIR=false&quot;,
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatOops=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueFieldMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:+ValueTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:-ValueTypeReturnedAsFields&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatOops=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineFiledMaxFlatSize=0&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:+InlineTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:-InlineTypeReturnedAsFields&quot;,</span>
                  &quot;-XX:-ReduceInitialCardMarks&quot;};
          case 5: return new String[] {
                  &quot;-XX:-UseArrayLoadStoreProfile&quot;,
                  &quot;-XX:+AlwaysIncrementalInline&quot;,
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatOops=5&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:ValueFieldMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:-ValueTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-removed">-                 &quot;-XX:-ValueTypeReturnedAsFields&quot;};</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatOops=5&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineArrayElemMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:InlineFiledMaxFlatSize=-1&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:-InlineTypePassFieldsAsArgs&quot;,</span>
<span class="udiff-line-modified-added">+                 &quot;-XX:-InlineTypeReturnedAsFields&quot;};</span>
          }
          return null;
      }
  
      /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -471,16 +471,16 @@</span>
      static final class TestAnnotation {
          private final int flag;
          private final BooleanSupplier predicate;
  
          private static final TestAnnotation testAnnotations[] = {
<span class="udiff-line-modified-removed">-             new TestAnnotation(ValueTypePassFieldsAsArgsOn, () -&gt; ValueTypePassFieldsAsArgs),</span>
<span class="udiff-line-modified-removed">-             new TestAnnotation(ValueTypePassFieldsAsArgsOff, () -&gt; !ValueTypePassFieldsAsArgs),</span>
<span class="udiff-line-modified-added">+             new TestAnnotation(InlineTypePassFieldsAsArgsOn, () -&gt; InlineTypePassFieldsAsArgs),</span>
<span class="udiff-line-modified-added">+             new TestAnnotation(InlineTypePassFieldsAsArgsOff, () -&gt; !InlineTypePassFieldsAsArgs),</span>
              new TestAnnotation(ValueTypeArrayFlattenOn, () -&gt; ValueTypeArrayFlatten),
              new TestAnnotation(ValueTypeArrayFlattenOff, () -&gt; !ValueTypeArrayFlatten),
<span class="udiff-line-modified-removed">-             new TestAnnotation(ValueTypeReturnedAsFieldsOn, () -&gt; ValueTypeReturnedAsFields),</span>
<span class="udiff-line-modified-removed">-             new TestAnnotation(ValueTypeReturnedAsFieldsOff, () -&gt; !ValueTypeReturnedAsFields),</span>
<span class="udiff-line-modified-added">+             new TestAnnotation(InlineTypeReturnedAsFieldsOn, () -&gt; InlineTypeReturnedAsFields),</span>
<span class="udiff-line-modified-added">+             new TestAnnotation(InlineTypeReturnedAsFieldsOff, () -&gt; !InlineTypeReturnedAsFields),</span>
              new TestAnnotation(AlwaysIncrementalInlineOn, () -&gt; AlwaysIncrementalInline),
              new TestAnnotation(AlwaysIncrementalInlineOff, () -&gt; !AlwaysIncrementalInline),
              new TestAnnotation(G1GCOn, () -&gt; G1GC),
              new TestAnnotation(G1GCOff, () -&gt; !G1GC),
              new TestAnnotation(ZGCOn, () -&gt; ZGC),
</pre>
<center><a href="TestUnresolvedValueClass.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="../../../runtime/valhalla/valuetypes/FlattenableSemanticTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>