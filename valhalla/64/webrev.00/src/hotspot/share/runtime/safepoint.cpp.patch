diff a/src/hotspot/share/runtime/safepoint.cpp b/src/hotspot/share/runtime/safepoint.cpp
--- a/src/hotspot/share/runtime/safepoint.cpp
+++ b/src/hotspot/share/runtime/safepoint.cpp
@@ -1042,11 +1042,11 @@
     bool return_oop = method->is_returning_oop();
 
     GrowableArray<Handle> return_values;
     ValueKlass* vk = NULL;
 
-    if (return_oop && ValueTypeReturnedAsFields) {
+    if (return_oop && InlineTypeReturnedAsFields) {
       SignatureStream ss(method->signature());
       while (!ss.at_return_type()) {
         ss.next();
       }
       if (ss.type() == T_VALUETYPE) {
