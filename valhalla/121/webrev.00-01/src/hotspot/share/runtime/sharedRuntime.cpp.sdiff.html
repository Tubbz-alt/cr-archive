<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/runtime/sharedRuntime.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../opto/type.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="sharedRuntime.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/runtime/sharedRuntime.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2708     CodeBuffer buffer(trampoline, (int)SharedRuntime::trampoline_size());
2709     MacroAssembler _masm(&amp;buffer);
2710     SharedRuntime::generate_trampoline(&amp;_masm, destination);
2711     assert(*(int*)trampoline != 0, &quot;Instruction(s) for trampoline must not be encoded as zeros.&quot;);
2712       _masm.flush();
2713 
2714     if (PrintInterpreter) {
2715       Disassembler::decode(buffer.insts_begin(), buffer.insts_end());
2716     }
2717   }
2718 }
2719 
2720 AdapterHandlerEntry* AdapterHandlerLibrary::get_adapter(const methodHandle&amp; method) {
2721   AdapterHandlerEntry* entry = get_adapter0(method);
2722   if (entry != NULL &amp;&amp; method-&gt;is_shared()) {
2723     // See comments around Method::link_method()
2724     MutexLocker mu(AdapterHandlerLibrary_lock);
2725     if (method-&gt;adapter() == NULL) {
2726       method-&gt;update_adapter_trampoline(entry);
2727     }
<span class="line-modified">2728     generate_trampoline(method-&gt;from_compiled_entry(),          entry-&gt;get_c2i_entry());</span>
2729     generate_trampoline(method-&gt;from_compiled_inline_ro_entry(), entry-&gt;get_c2i_inline_ro_entry());
2730     generate_trampoline(method-&gt;from_compiled_inline_entry(),    entry-&gt;get_c2i_inline_entry());
2731   }
2732 
2733   return entry;
2734 }
2735 
2736 
2737 CompiledEntrySignature::CompiledEntrySignature(Method* method) :
2738   _method(method), _num_inline_args(0), _has_inline_recv(false),
2739   _sig_cc(NULL), _sig_cc_ro(NULL), _regs(NULL), _regs_cc(NULL), _regs_cc_ro(NULL),
2740   _args_on_stack(0), _args_on_stack_cc(0), _args_on_stack_cc_ro(0),
2741   _c1_needs_stack_repair(false), _c2_needs_stack_repair(false), _has_scalarized_args(false) {
2742   _has_reserved_entries = false;
2743   _sig = new GrowableArray&lt;SigEntry&gt;(method-&gt;size_of_parameters());
2744 
2745 }
2746 
2747 int CompiledEntrySignature::compute_scalarized_cc(GrowableArray&lt;SigEntry&gt;*&amp; sig_cc, VMRegPair*&amp; regs_cc, bool scalar_receiver) {
2748   InstanceKlass* holder = _method-&gt;method_holder();
</pre>
</td>
<td>
<hr />
<pre>
2708     CodeBuffer buffer(trampoline, (int)SharedRuntime::trampoline_size());
2709     MacroAssembler _masm(&amp;buffer);
2710     SharedRuntime::generate_trampoline(&amp;_masm, destination);
2711     assert(*(int*)trampoline != 0, &quot;Instruction(s) for trampoline must not be encoded as zeros.&quot;);
2712       _masm.flush();
2713 
2714     if (PrintInterpreter) {
2715       Disassembler::decode(buffer.insts_begin(), buffer.insts_end());
2716     }
2717   }
2718 }
2719 
2720 AdapterHandlerEntry* AdapterHandlerLibrary::get_adapter(const methodHandle&amp; method) {
2721   AdapterHandlerEntry* entry = get_adapter0(method);
2722   if (entry != NULL &amp;&amp; method-&gt;is_shared()) {
2723     // See comments around Method::link_method()
2724     MutexLocker mu(AdapterHandlerLibrary_lock);
2725     if (method-&gt;adapter() == NULL) {
2726       method-&gt;update_adapter_trampoline(entry);
2727     }
<span class="line-modified">2728     generate_trampoline(method-&gt;from_compiled_entry(),           entry-&gt;get_c2i_entry());</span>
2729     generate_trampoline(method-&gt;from_compiled_inline_ro_entry(), entry-&gt;get_c2i_inline_ro_entry());
2730     generate_trampoline(method-&gt;from_compiled_inline_entry(),    entry-&gt;get_c2i_inline_entry());
2731   }
2732 
2733   return entry;
2734 }
2735 
2736 
2737 CompiledEntrySignature::CompiledEntrySignature(Method* method) :
2738   _method(method), _num_inline_args(0), _has_inline_recv(false),
2739   _sig_cc(NULL), _sig_cc_ro(NULL), _regs(NULL), _regs_cc(NULL), _regs_cc_ro(NULL),
2740   _args_on_stack(0), _args_on_stack_cc(0), _args_on_stack_cc_ro(0),
2741   _c1_needs_stack_repair(false), _c2_needs_stack_repair(false), _has_scalarized_args(false) {
2742   _has_reserved_entries = false;
2743   _sig = new GrowableArray&lt;SigEntry&gt;(method-&gt;size_of_parameters());
2744 
2745 }
2746 
2747 int CompiledEntrySignature::compute_scalarized_cc(GrowableArray&lt;SigEntry&gt;*&amp; sig_cc, VMRegPair*&amp; regs_cc, bool scalar_receiver) {
2748   InstanceKlass* holder = _method-&gt;method_holder();
</pre>
</td>
</tr>
</table>
<center><a href="../opto/type.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="sharedRuntime.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>