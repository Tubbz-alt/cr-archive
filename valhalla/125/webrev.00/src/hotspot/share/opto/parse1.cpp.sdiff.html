<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/opto/parse1.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="loopopts.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="phaseX.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/parse1.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 858     Node_Notes* entry_nn = old_nn-&gt;clone(this);
 859     JVMState* entry_jvms = new(this) JVMState(method(), old_nn-&gt;jvms());
 860     entry_jvms-&gt;set_offsets(0);
 861     entry_jvms-&gt;set_bci(entry_bci());
 862     entry_nn-&gt;set_jvms(entry_jvms);
 863     set_default_node_notes(entry_nn);
 864   }
 865   PhaseGVN&amp; gvn = *initial_gvn();
 866   uint j = 0;
 867   ExtendedSignature sig_cc = ExtendedSignature(method()-&gt;get_sig_cc(), SigEntryFilter());
 868   for (uint i = 0; i &lt; (uint)arg_size; i++) {
 869     const Type* t = tf-&gt;domain_sig()-&gt;field_at(i);
 870     Node* parm = NULL;
 871     if (has_scalarized_args() &amp;&amp; t-&gt;is_inlinetypeptr() &amp;&amp; !t-&gt;maybe_null()) {
 872       // Inline type arguments are not passed by reference: we get an argument per
 873       // field of the inline type. Build InlineTypeNodes from the inline type arguments.
 874       GraphKit kit(jvms, &amp;gvn);
 875       kit.set_control(map-&gt;control());
 876       Node* old_mem = map-&gt;memory();
 877       // Use immutable memory for inline type loads and restore it below
<span class="line-removed"> 878       // TODO make sure inline types are always loaded from immutable memory</span>
 879       kit.set_all_memory(C-&gt;immutable_memory());
 880       parm = InlineTypeNode::make_from_multi(&amp;kit, start, sig_cc, t-&gt;inline_klass(), j, true);
 881       map-&gt;set_control(kit.control());
 882       map-&gt;set_memory(old_mem);
 883     } else {
 884       parm = gvn.transform(new ParmNode(start, j++));
 885       BasicType bt = t-&gt;basic_type();
 886       while (i &gt;= TypeFunc::Parms &amp;&amp; !is_osr_compilation() &amp;&amp; SigEntry::next_is_reserved(sig_cc, bt, true)) {
 887         j += type2size[bt]; // Skip reserved arguments
 888       }
 889     }
 890     map-&gt;init_req(i, parm);
 891     // Record all these guys for later GVN.
 892     record_for_igvn(parm);
 893   }
 894   for (; j &lt; map-&gt;req(); j++) {
 895     map-&gt;init_req(j, top());
 896   }
 897   assert(jvms-&gt;argoff() == TypeFunc::Parms, &quot;parser gets arguments here&quot;);
 898   set_default_node_notes(old_nn);
</pre>
</td>
<td>
<hr />
<pre>
 858     Node_Notes* entry_nn = old_nn-&gt;clone(this);
 859     JVMState* entry_jvms = new(this) JVMState(method(), old_nn-&gt;jvms());
 860     entry_jvms-&gt;set_offsets(0);
 861     entry_jvms-&gt;set_bci(entry_bci());
 862     entry_nn-&gt;set_jvms(entry_jvms);
 863     set_default_node_notes(entry_nn);
 864   }
 865   PhaseGVN&amp; gvn = *initial_gvn();
 866   uint j = 0;
 867   ExtendedSignature sig_cc = ExtendedSignature(method()-&gt;get_sig_cc(), SigEntryFilter());
 868   for (uint i = 0; i &lt; (uint)arg_size; i++) {
 869     const Type* t = tf-&gt;domain_sig()-&gt;field_at(i);
 870     Node* parm = NULL;
 871     if (has_scalarized_args() &amp;&amp; t-&gt;is_inlinetypeptr() &amp;&amp; !t-&gt;maybe_null()) {
 872       // Inline type arguments are not passed by reference: we get an argument per
 873       // field of the inline type. Build InlineTypeNodes from the inline type arguments.
 874       GraphKit kit(jvms, &amp;gvn);
 875       kit.set_control(map-&gt;control());
 876       Node* old_mem = map-&gt;memory();
 877       // Use immutable memory for inline type loads and restore it below

 878       kit.set_all_memory(C-&gt;immutable_memory());
 879       parm = InlineTypeNode::make_from_multi(&amp;kit, start, sig_cc, t-&gt;inline_klass(), j, true);
 880       map-&gt;set_control(kit.control());
 881       map-&gt;set_memory(old_mem);
 882     } else {
 883       parm = gvn.transform(new ParmNode(start, j++));
 884       BasicType bt = t-&gt;basic_type();
 885       while (i &gt;= TypeFunc::Parms &amp;&amp; !is_osr_compilation() &amp;&amp; SigEntry::next_is_reserved(sig_cc, bt, true)) {
 886         j += type2size[bt]; // Skip reserved arguments
 887       }
 888     }
 889     map-&gt;init_req(i, parm);
 890     // Record all these guys for later GVN.
 891     record_for_igvn(parm);
 892   }
 893   for (; j &lt; map-&gt;req(); j++) {
 894     map-&gt;init_req(j, top());
 895   }
 896   assert(jvms-&gt;argoff() == TypeFunc::Parms, &quot;parser gets arguments here&quot;);
 897   set_default_node_notes(old_nn);
</pre>
</td>
</tr>
</table>
<center><a href="loopopts.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="phaseX.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>