<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff src/hotspot/share/opto/loopopts.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="inlinetypenode.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="parse1.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/opto/loopopts.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1210,11 ***</span>
    return out_le;
  }
  
  bool PhaseIdealLoop::flatten_array_element_type_check(Node *n) {
    // If the CmpP is a subtype check for a value that has just been
<span class="line-modified">!   // loaded from an array, the subtype checks guarantees the value</span>
    // can&#39;t be stored in a flattened array and the load of the value
    // happens with a flattened array check then: push the type check
    // through the phi of the flattened array check. This needs special
    // logic because the subtype check&#39;s input is not a phi but a
    // LoadKlass that must first be cloned through the phi.
<span class="line-new-header">--- 1210,11 ---</span>
    return out_le;
  }
  
  bool PhaseIdealLoop::flatten_array_element_type_check(Node *n) {
    // If the CmpP is a subtype check for a value that has just been
<span class="line-modified">!   // loaded from an array, the subtype check guarantees the value</span>
    // can&#39;t be stored in a flattened array and the load of the value
    // happens with a flattened array check then: push the type check
    // through the phi of the flattened array check. This needs special
    // logic because the subtype check&#39;s input is not a phi but a
    // LoadKlass that must first be cloned through the phi.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1284,11 ***</span>
      klassptr_clone-&gt;set_req(2, addr_clone);
      register_new_node(klassptr_clone, ctrl);
      _igvn.set_type(klassptr_clone, klassptr_clone-&gt;Value(&amp;_igvn));
      if (klassptr != n-&gt;in(1)) {
        Node* decode = n-&gt;in(1);
<span class="line-modified">!       assert(decode-&gt;is_DecodeNarrowPtr(), &quot;inconcistent subgraph&quot;);</span>
        Node* decode_clone = decode-&gt;clone();
        decode_clone-&gt;set_req(1, klassptr_clone);
        register_new_node(decode_clone, ctrl);
        _igvn.set_type(decode_clone, decode_clone-&gt;Value(&amp;_igvn));
        klassptr_clone = decode_clone;
<span class="line-new-header">--- 1284,11 ---</span>
      klassptr_clone-&gt;set_req(2, addr_clone);
      register_new_node(klassptr_clone, ctrl);
      _igvn.set_type(klassptr_clone, klassptr_clone-&gt;Value(&amp;_igvn));
      if (klassptr != n-&gt;in(1)) {
        Node* decode = n-&gt;in(1);
<span class="line-modified">!       assert(decode-&gt;is_DecodeNarrowPtr(), &quot;inconsistent subgraph&quot;);</span>
        Node* decode_clone = decode-&gt;clone();
        decode_clone-&gt;set_req(1, klassptr_clone);
        register_new_node(decode_clone, ctrl);
        _igvn.set_type(decode_clone, decode_clone-&gt;Value(&amp;_igvn));
        klassptr_clone = decode_clone;
</pre>
<center><a href="inlinetypenode.hpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="parse1.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>