<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/classfile/classFileParser.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../ci/ciValueArrayKlass.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="classLoader.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/classFileParser.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
5751 // be taken as a field signature. Allow &quot;void&quot; if void_ok.
5752 // Return a pointer to just past the signature.
5753 // Return NULL if no legal signature is found.
5754 const char* ClassFileParser::skip_over_field_signature(const char* signature,
5755                                                        bool void_ok,
5756                                                        unsigned int length,
5757                                                        TRAPS) const {
5758   unsigned int array_dim = 0;
5759   while (length &gt; 0) {
5760     switch (signature[0]) {
5761     case JVM_SIGNATURE_VOID: if (!void_ok) { return NULL; }
5762     case JVM_SIGNATURE_BOOLEAN:
5763     case JVM_SIGNATURE_BYTE:
5764     case JVM_SIGNATURE_CHAR:
5765     case JVM_SIGNATURE_SHORT:
5766     case JVM_SIGNATURE_INT:
5767     case JVM_SIGNATURE_FLOAT:
5768     case JVM_SIGNATURE_LONG:
5769     case JVM_SIGNATURE_DOUBLE:
5770       return signature + 1;
<span class="line-modified">5771     case JVM_SIGNATURE_INLINETYPE:</span>
5772       // Can&#39;t enable this check until JDK upgrades the bytecode generators
5773       // if (_major_version &lt; CONSTANT_CLASS_DESCRIPTORS ) {
5774       //   classfile_parse_error(&quot;Class name contains illegal Q-signature &quot;
5775       //                                    &quot;in descriptor in class file %s&quot;,
5776       //                                    CHECK_0);
5777       // }
5778       // fall through
5779     case JVM_SIGNATURE_CLASS:
5780     {
5781       if (_major_version &lt; JAVA_1_5_VERSION) {
5782         // Skip over the class name if one is there
5783         const char* const p = skip_over_field_name(signature + 1, true, --length);
5784 
5785         // The next character better be a semicolon
5786         if (p &amp;&amp; (p - signature) &gt; 1 &amp;&amp; p[0] == JVM_SIGNATURE_ENDCLASS) {
5787           return p + 1;
5788         }
5789       }
5790       else {
5791         // Skip leading &#39;L&#39; or &#39;Q&#39; and ignore first appearance of &#39;;&#39;
</pre>
</td>
<td>
<hr />
<pre>
5751 // be taken as a field signature. Allow &quot;void&quot; if void_ok.
5752 // Return a pointer to just past the signature.
5753 // Return NULL if no legal signature is found.
5754 const char* ClassFileParser::skip_over_field_signature(const char* signature,
5755                                                        bool void_ok,
5756                                                        unsigned int length,
5757                                                        TRAPS) const {
5758   unsigned int array_dim = 0;
5759   while (length &gt; 0) {
5760     switch (signature[0]) {
5761     case JVM_SIGNATURE_VOID: if (!void_ok) { return NULL; }
5762     case JVM_SIGNATURE_BOOLEAN:
5763     case JVM_SIGNATURE_BYTE:
5764     case JVM_SIGNATURE_CHAR:
5765     case JVM_SIGNATURE_SHORT:
5766     case JVM_SIGNATURE_INT:
5767     case JVM_SIGNATURE_FLOAT:
5768     case JVM_SIGNATURE_LONG:
5769     case JVM_SIGNATURE_DOUBLE:
5770       return signature + 1;
<span class="line-modified">5771     case JVM_SIGNATURE_INLINE_TYPE:</span>
5772       // Can&#39;t enable this check until JDK upgrades the bytecode generators
5773       // if (_major_version &lt; CONSTANT_CLASS_DESCRIPTORS ) {
5774       //   classfile_parse_error(&quot;Class name contains illegal Q-signature &quot;
5775       //                                    &quot;in descriptor in class file %s&quot;,
5776       //                                    CHECK_0);
5777       // }
5778       // fall through
5779     case JVM_SIGNATURE_CLASS:
5780     {
5781       if (_major_version &lt; JAVA_1_5_VERSION) {
5782         // Skip over the class name if one is there
5783         const char* const p = skip_over_field_name(signature + 1, true, --length);
5784 
5785         // The next character better be a semicolon
5786         if (p &amp;&amp; (p - signature) &gt; 1 &amp;&amp; p[0] == JVM_SIGNATURE_ENDCLASS) {
5787           return p + 1;
5788         }
5789       }
5790       else {
5791         // Skip leading &#39;L&#39; or &#39;Q&#39; and ignore first appearance of &#39;;&#39;
</pre>
</td>
</tr>
</table>
<center><a href="../ci/ciValueArrayKlass.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="classLoader.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>