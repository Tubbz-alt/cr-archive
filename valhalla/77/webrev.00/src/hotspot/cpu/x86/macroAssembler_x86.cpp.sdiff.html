<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/cpu/x86/macroAssembler_x86.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="../aarch64/templateTable_aarch64.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="macroAssembler_x86.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/cpu/x86/macroAssembler_x86.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
2620 void MacroAssembler::test_klass_is_value(Register klass, Register temp_reg, Label&amp; is_value) {
2621   movl(temp_reg, Address(klass, Klass::access_flags_offset()));
2622   testl(temp_reg, JVM_ACC_VALUE);
2623   jcc(Assembler::notZero, is_value);
2624 }
2625 
2626 void MacroAssembler::test_klass_is_empty_value(Register klass, Register temp_reg, Label&amp; is_empty_value) {
2627 #ifdef ASSERT
2628   {
2629     Label done_check;
2630     test_klass_is_value(klass, temp_reg, done_check);
2631     stop(&quot;test_klass_is_empty_value with non value klass&quot;);
2632     bind(done_check);
2633   }
2634 #endif
2635   movl(temp_reg, Address(klass, InstanceKlass::misc_flags_offset()));
2636   testl(temp_reg, InstanceKlass::misc_flags_is_empty_inline_type());
2637   jcc(Assembler::notZero, is_empty_value);
2638 }
2639 
<span class="line-modified">2640 void MacroAssembler::test_field_is_flattenable(Register flags, Register temp_reg, Label&amp; is_flattenable) {</span>
2641   movl(temp_reg, flags);
<span class="line-modified">2642   shrl(temp_reg, ConstantPoolCacheEntry::is_flattenable_field_shift);</span>
2643   andl(temp_reg, 0x1);
2644   testl(temp_reg, temp_reg);
<span class="line-modified">2645   jcc(Assembler::notZero, is_flattenable);</span>
2646 }
2647 
<span class="line-modified">2648 void MacroAssembler::test_field_is_not_flattenable(Register flags, Register temp_reg, Label&amp; notFlattenable) {</span>
2649   movl(temp_reg, flags);
<span class="line-modified">2650   shrl(temp_reg, ConstantPoolCacheEntry::is_flattenable_field_shift);</span>
2651   andl(temp_reg, 0x1);
2652   testl(temp_reg, temp_reg);
<span class="line-modified">2653   jcc(Assembler::zero, notFlattenable);</span>
2654 }
2655 
2656 void MacroAssembler::test_field_is_flattened(Register flags, Register temp_reg, Label&amp; is_flattened) {
2657   movl(temp_reg, flags);
2658   shrl(temp_reg, ConstantPoolCacheEntry::is_flattened_field_shift);
2659   andl(temp_reg, 0x1);
2660   testl(temp_reg, temp_reg);
2661   jcc(Assembler::notZero, is_flattened);
2662 }
2663 
2664 void MacroAssembler::test_flattened_array_oop(Register oop, Register temp_reg,
2665                                               Label&amp;is_flattened_array) {
2666   Register tmp_load_klass = LP64_ONLY(rscratch1) NOT_LP64(noreg);
2667   load_klass(temp_reg, oop, tmp_load_klass);
2668   movl(temp_reg, Address(temp_reg, Klass::layout_helper_offset()));
2669   test_flattened_array_layout(temp_reg, is_flattened_array);
2670 }
2671 
2672 void MacroAssembler::test_non_flattened_array_oop(Register oop, Register temp_reg,
2673                                                   Label&amp;is_non_flattened_array) {
</pre>
</td>
<td>
<hr />
<pre>
2620 void MacroAssembler::test_klass_is_value(Register klass, Register temp_reg, Label&amp; is_value) {
2621   movl(temp_reg, Address(klass, Klass::access_flags_offset()));
2622   testl(temp_reg, JVM_ACC_VALUE);
2623   jcc(Assembler::notZero, is_value);
2624 }
2625 
2626 void MacroAssembler::test_klass_is_empty_value(Register klass, Register temp_reg, Label&amp; is_empty_value) {
2627 #ifdef ASSERT
2628   {
2629     Label done_check;
2630     test_klass_is_value(klass, temp_reg, done_check);
2631     stop(&quot;test_klass_is_empty_value with non value klass&quot;);
2632     bind(done_check);
2633   }
2634 #endif
2635   movl(temp_reg, Address(klass, InstanceKlass::misc_flags_offset()));
2636   testl(temp_reg, InstanceKlass::misc_flags_is_empty_inline_type());
2637   jcc(Assembler::notZero, is_empty_value);
2638 }
2639 
<span class="line-modified">2640 void MacroAssembler::test_field_is_inline(Register flags, Register temp_reg, Label&amp; is_inline) {</span>
2641   movl(temp_reg, flags);
<span class="line-modified">2642   shrl(temp_reg, ConstantPoolCacheEntry::is_inline_field_shift);</span>
2643   andl(temp_reg, 0x1);
2644   testl(temp_reg, temp_reg);
<span class="line-modified">2645   jcc(Assembler::notZero, is_inline);</span>
2646 }
2647 
<span class="line-modified">2648 void MacroAssembler::test_field_is_not_inline(Register flags, Register temp_reg, Label&amp; not_inline) {</span>
2649   movl(temp_reg, flags);
<span class="line-modified">2650   shrl(temp_reg, ConstantPoolCacheEntry::is_inline_field_shift);</span>
2651   andl(temp_reg, 0x1);
2652   testl(temp_reg, temp_reg);
<span class="line-modified">2653   jcc(Assembler::zero, not_inline);</span>
2654 }
2655 
2656 void MacroAssembler::test_field_is_flattened(Register flags, Register temp_reg, Label&amp; is_flattened) {
2657   movl(temp_reg, flags);
2658   shrl(temp_reg, ConstantPoolCacheEntry::is_flattened_field_shift);
2659   andl(temp_reg, 0x1);
2660   testl(temp_reg, temp_reg);
2661   jcc(Assembler::notZero, is_flattened);
2662 }
2663 
2664 void MacroAssembler::test_flattened_array_oop(Register oop, Register temp_reg,
2665                                               Label&amp;is_flattened_array) {
2666   Register tmp_load_klass = LP64_ONLY(rscratch1) NOT_LP64(noreg);
2667   load_klass(temp_reg, oop, tmp_load_klass);
2668   movl(temp_reg, Address(temp_reg, Klass::layout_helper_offset()));
2669   test_flattened_array_layout(temp_reg, is_flattened_array);
2670 }
2671 
2672 void MacroAssembler::test_non_flattened_array_oop(Register oop, Register temp_reg,
2673                                                   Label&amp;is_non_flattened_array) {
</pre>
</td>
</tr>
</table>
<center><a href="../aarch64/templateTable_aarch64.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="macroAssembler_x86.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>