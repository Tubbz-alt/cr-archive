<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/classfile/javaClasses.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="fieldLayoutBuilder.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="javaClasses.hpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/javaClasses.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
4474 int reflect_ConstantPool::_oop_offset;
4475 int reflect_UnsafeStaticFieldAccessorImpl::_base_offset;
4476 int java_lang_Integer_IntegerCache::_static_cache_offset;
4477 int java_lang_Long_LongCache::_static_cache_offset;
4478 int java_lang_Character_CharacterCache::_static_cache_offset;
4479 int java_lang_Short_ShortCache::_static_cache_offset;
4480 int java_lang_Byte_ByteCache::_static_cache_offset;
4481 int java_lang_Boolean::_static_TRUE_offset;
4482 int java_lang_Boolean::_static_FALSE_offset;
4483 int java_lang_reflect_RecordComponent::clazz_offset;
4484 int java_lang_reflect_RecordComponent::name_offset;
4485 int java_lang_reflect_RecordComponent::type_offset;
4486 int java_lang_reflect_RecordComponent::accessor_offset;
4487 int java_lang_reflect_RecordComponent::signature_offset;
4488 int java_lang_reflect_RecordComponent::annotations_offset;
4489 int java_lang_reflect_RecordComponent::typeAnnotations_offset;
4490 int jdk_internal_vm_jni_SubElementSelector::_arrayElementType_offset;
4491 int jdk_internal_vm_jni_SubElementSelector::_subElementType_offset;
4492 int jdk_internal_vm_jni_SubElementSelector::_offset_offset;
4493 int jdk_internal_vm_jni_SubElementSelector::_isFlattened_offset;
<span class="line-modified">4494 int jdk_internal_vm_jni_SubElementSelector::_isFlattenable_offset;</span>
4495 
4496 
4497 
4498 #define STACKTRACEELEMENT_FIELDS_DO(macro) \
4499   macro(declaringClassObject_offset,  k, &quot;declaringClassObject&quot;, class_signature, false); \
4500   macro(classLoaderName_offset, k, &quot;classLoaderName&quot;, string_signature, false); \
4501   macro(moduleName_offset,      k, &quot;moduleName&quot;,      string_signature, false); \
4502   macro(moduleVersion_offset,   k, &quot;moduleVersion&quot;,   string_signature, false); \
4503   macro(declaringClass_offset,  k, &quot;declaringClass&quot;,  string_signature, false); \
4504   macro(methodName_offset,      k, &quot;methodName&quot;,      string_signature, false); \
4505   macro(fileName_offset,        k, &quot;fileName&quot;,        string_signature, false); \
4506   macro(lineNumber_offset,      k, &quot;lineNumber&quot;,      int_signature,    false)
4507 
4508 // Support for java_lang_StackTraceElement
4509 void java_lang_StackTraceElement::compute_offsets() {
4510   InstanceKlass* k = SystemDictionary::StackTraceElement_klass();
4511   STACKTRACEELEMENT_FIELDS_DO(FIELD_COMPUTE_OFFSET);
4512 }
4513 
4514 #if INCLUDE_CDS
</pre>
<hr />
<pre>
4785   oop base = ik-&gt;static_field_base_raw();
4786   return objArrayOop(base-&gt;obj_field(_static_cache_offset));
4787 }
4788 
4789 Symbol* java_lang_Byte_ByteCache::symbol() {
4790   return vmSymbols::java_lang_Byte_ByteCache();
4791 }
4792 
4793 #if INCLUDE_CDS
4794 void java_lang_Byte_ByteCache::serialize_offsets(SerializeClosure* f) {
4795   BYTE_CACHE_FIELDS_DO(FIELD_SERIALIZE_OFFSET);
4796 }
4797 #endif
4798 #undef BYTE_CACHE_FIELDS_DO
4799 
4800 #define SUBELEMENT_SELECTOR_FIELDS_DO(macro) \
4801   macro(_arrayElementType_offset,  k, &quot;arrayElementType&quot;, class_signature, false); \
4802   macro(_subElementType_offset,    k, &quot;subElementType&quot;,   class_signature, false); \
4803   macro(_offset_offset,            k, &quot;offset&quot;,           int_signature,   false); \
4804   macro(_isFlattened_offset,       k, &quot;isFlattened&quot;,      bool_signature,  false); \
<span class="line-modified">4805   macro(_isFlattenable_offset,     k, &quot;isFlattenable&quot;,    bool_signature,  false);</span>
4806 
4807 void jdk_internal_vm_jni_SubElementSelector::compute_offsets() {
4808   InstanceKlass* k = SystemDictionary::jdk_internal_vm_jni_SubElementSelector_klass();
4809   SUBELEMENT_SELECTOR_FIELDS_DO(FIELD_COMPUTE_OFFSET);
4810 }
4811 
4812 #if INCLUDE_CDS
4813 void jdk_internal_vm_jni_SubElementSelector::serialize_offsets(SerializeClosure* f) {
4814   SUBELEMENT_SELECTOR_FIELDS_DO(FIELD_SERIALIZE_OFFSET);
4815 }
4816 #endif
4817 #undef SUBELEMENT_SELECTOR_FIELDS_DO
4818 
4819 Symbol* jdk_internal_vm_jni_SubElementSelector::symbol() {
4820   return vmSymbols::jdk_internal_vm_jni_SubElementSelector();
4821 }
4822 
4823 oop jdk_internal_vm_jni_SubElementSelector::getArrayElementType(oop obj) {
4824   return obj-&gt;obj_field(_arrayElementType_offset);
4825 }
</pre>
<hr />
<pre>
4835 void jdk_internal_vm_jni_SubElementSelector::setSubElementType(oop obj, oop type) {
4836   obj-&gt;obj_field_put(_subElementType_offset, type);
4837 }
4838 
4839 int jdk_internal_vm_jni_SubElementSelector::getOffset(oop obj) {
4840   return obj-&gt;int_field(_offset_offset);
4841 }
4842 
4843 void jdk_internal_vm_jni_SubElementSelector::setOffset(oop obj, int offset) {
4844   obj-&gt;int_field_put(_offset_offset, offset);
4845 }
4846 
4847 bool jdk_internal_vm_jni_SubElementSelector::getIsFlattened(oop obj) {
4848   return obj-&gt;bool_field(_isFlattened_offset);
4849 }
4850 
4851 void jdk_internal_vm_jni_SubElementSelector::setIsFlattened(oop obj, bool b) {
4852   obj-&gt;bool_field_put(_isFlattened_offset, b);
4853 }
4854 
<span class="line-modified">4855 bool jdk_internal_vm_jni_SubElementSelector::getIsFlattenable(oop obj) {</span>
<span class="line-modified">4856   return obj-&gt;bool_field(_isFlattenable_offset);</span>
4857 }
4858 
<span class="line-modified">4859 void jdk_internal_vm_jni_SubElementSelector::setIsFlattenable(oop obj, bool b) {</span>
<span class="line-modified">4860   obj-&gt;bool_field_put(_isFlattenable_offset, b);</span>
4861 }
4862 
4863 jbyte java_lang_Byte::value(oop obj) {
4864    jvalue v;
4865    java_lang_boxing_object::get_value(obj, &amp;v);
4866    return v.b;
4867 }
4868 #define BOOLEAN_FIELDS_DO(macro) \
4869   macro(_static_TRUE_offset, k, &quot;TRUE&quot;, java_lang_Boolean_signature, true); \
4870   macro(_static_FALSE_offset, k, &quot;FALSE&quot;, java_lang_Boolean_signature, true)
4871 
4872 
4873 void java_lang_Boolean::compute_offsets(InstanceKlass *k) {
4874   guarantee(k != NULL &amp;&amp; k-&gt;is_initialized(), &quot;must be loaded and initialized&quot;);
4875   BOOLEAN_FIELDS_DO(FIELD_COMPUTE_OFFSET);
4876 }
4877 
4878 oop java_lang_Boolean::get_TRUE(InstanceKlass *ik) {
4879   oop base = ik-&gt;static_field_base_raw();
4880   return base-&gt;obj_field(_static_TRUE_offset);
</pre>
</td>
<td>
<hr />
<pre>
4474 int reflect_ConstantPool::_oop_offset;
4475 int reflect_UnsafeStaticFieldAccessorImpl::_base_offset;
4476 int java_lang_Integer_IntegerCache::_static_cache_offset;
4477 int java_lang_Long_LongCache::_static_cache_offset;
4478 int java_lang_Character_CharacterCache::_static_cache_offset;
4479 int java_lang_Short_ShortCache::_static_cache_offset;
4480 int java_lang_Byte_ByteCache::_static_cache_offset;
4481 int java_lang_Boolean::_static_TRUE_offset;
4482 int java_lang_Boolean::_static_FALSE_offset;
4483 int java_lang_reflect_RecordComponent::clazz_offset;
4484 int java_lang_reflect_RecordComponent::name_offset;
4485 int java_lang_reflect_RecordComponent::type_offset;
4486 int java_lang_reflect_RecordComponent::accessor_offset;
4487 int java_lang_reflect_RecordComponent::signature_offset;
4488 int java_lang_reflect_RecordComponent::annotations_offset;
4489 int java_lang_reflect_RecordComponent::typeAnnotations_offset;
4490 int jdk_internal_vm_jni_SubElementSelector::_arrayElementType_offset;
4491 int jdk_internal_vm_jni_SubElementSelector::_subElementType_offset;
4492 int jdk_internal_vm_jni_SubElementSelector::_offset_offset;
4493 int jdk_internal_vm_jni_SubElementSelector::_isFlattened_offset;
<span class="line-modified">4494 int jdk_internal_vm_jni_SubElementSelector::_isInline_offset;</span>
4495 
4496 
4497 
4498 #define STACKTRACEELEMENT_FIELDS_DO(macro) \
4499   macro(declaringClassObject_offset,  k, &quot;declaringClassObject&quot;, class_signature, false); \
4500   macro(classLoaderName_offset, k, &quot;classLoaderName&quot;, string_signature, false); \
4501   macro(moduleName_offset,      k, &quot;moduleName&quot;,      string_signature, false); \
4502   macro(moduleVersion_offset,   k, &quot;moduleVersion&quot;,   string_signature, false); \
4503   macro(declaringClass_offset,  k, &quot;declaringClass&quot;,  string_signature, false); \
4504   macro(methodName_offset,      k, &quot;methodName&quot;,      string_signature, false); \
4505   macro(fileName_offset,        k, &quot;fileName&quot;,        string_signature, false); \
4506   macro(lineNumber_offset,      k, &quot;lineNumber&quot;,      int_signature,    false)
4507 
4508 // Support for java_lang_StackTraceElement
4509 void java_lang_StackTraceElement::compute_offsets() {
4510   InstanceKlass* k = SystemDictionary::StackTraceElement_klass();
4511   STACKTRACEELEMENT_FIELDS_DO(FIELD_COMPUTE_OFFSET);
4512 }
4513 
4514 #if INCLUDE_CDS
</pre>
<hr />
<pre>
4785   oop base = ik-&gt;static_field_base_raw();
4786   return objArrayOop(base-&gt;obj_field(_static_cache_offset));
4787 }
4788 
4789 Symbol* java_lang_Byte_ByteCache::symbol() {
4790   return vmSymbols::java_lang_Byte_ByteCache();
4791 }
4792 
4793 #if INCLUDE_CDS
4794 void java_lang_Byte_ByteCache::serialize_offsets(SerializeClosure* f) {
4795   BYTE_CACHE_FIELDS_DO(FIELD_SERIALIZE_OFFSET);
4796 }
4797 #endif
4798 #undef BYTE_CACHE_FIELDS_DO
4799 
4800 #define SUBELEMENT_SELECTOR_FIELDS_DO(macro) \
4801   macro(_arrayElementType_offset,  k, &quot;arrayElementType&quot;, class_signature, false); \
4802   macro(_subElementType_offset,    k, &quot;subElementType&quot;,   class_signature, false); \
4803   macro(_offset_offset,            k, &quot;offset&quot;,           int_signature,   false); \
4804   macro(_isFlattened_offset,       k, &quot;isFlattened&quot;,      bool_signature,  false); \
<span class="line-modified">4805   macro(_isInline_offset,          k, &quot;isInline&quot;,    bool_signature,  false);</span>
4806 
4807 void jdk_internal_vm_jni_SubElementSelector::compute_offsets() {
4808   InstanceKlass* k = SystemDictionary::jdk_internal_vm_jni_SubElementSelector_klass();
4809   SUBELEMENT_SELECTOR_FIELDS_DO(FIELD_COMPUTE_OFFSET);
4810 }
4811 
4812 #if INCLUDE_CDS
4813 void jdk_internal_vm_jni_SubElementSelector::serialize_offsets(SerializeClosure* f) {
4814   SUBELEMENT_SELECTOR_FIELDS_DO(FIELD_SERIALIZE_OFFSET);
4815 }
4816 #endif
4817 #undef SUBELEMENT_SELECTOR_FIELDS_DO
4818 
4819 Symbol* jdk_internal_vm_jni_SubElementSelector::symbol() {
4820   return vmSymbols::jdk_internal_vm_jni_SubElementSelector();
4821 }
4822 
4823 oop jdk_internal_vm_jni_SubElementSelector::getArrayElementType(oop obj) {
4824   return obj-&gt;obj_field(_arrayElementType_offset);
4825 }
</pre>
<hr />
<pre>
4835 void jdk_internal_vm_jni_SubElementSelector::setSubElementType(oop obj, oop type) {
4836   obj-&gt;obj_field_put(_subElementType_offset, type);
4837 }
4838 
4839 int jdk_internal_vm_jni_SubElementSelector::getOffset(oop obj) {
4840   return obj-&gt;int_field(_offset_offset);
4841 }
4842 
4843 void jdk_internal_vm_jni_SubElementSelector::setOffset(oop obj, int offset) {
4844   obj-&gt;int_field_put(_offset_offset, offset);
4845 }
4846 
4847 bool jdk_internal_vm_jni_SubElementSelector::getIsFlattened(oop obj) {
4848   return obj-&gt;bool_field(_isFlattened_offset);
4849 }
4850 
4851 void jdk_internal_vm_jni_SubElementSelector::setIsFlattened(oop obj, bool b) {
4852   obj-&gt;bool_field_put(_isFlattened_offset, b);
4853 }
4854 
<span class="line-modified">4855 bool jdk_internal_vm_jni_SubElementSelector::getIsInline(oop obj) {</span>
<span class="line-modified">4856   return obj-&gt;bool_field(_isInline_offset);</span>
4857 }
4858 
<span class="line-modified">4859 void jdk_internal_vm_jni_SubElementSelector::setIsInline(oop obj, bool b) {</span>
<span class="line-modified">4860   obj-&gt;bool_field_put(_isInline_offset, b);</span>
4861 }
4862 
4863 jbyte java_lang_Byte::value(oop obj) {
4864    jvalue v;
4865    java_lang_boxing_object::get_value(obj, &amp;v);
4866    return v.b;
4867 }
4868 #define BOOLEAN_FIELDS_DO(macro) \
4869   macro(_static_TRUE_offset, k, &quot;TRUE&quot;, java_lang_Boolean_signature, true); \
4870   macro(_static_FALSE_offset, k, &quot;FALSE&quot;, java_lang_Boolean_signature, true)
4871 
4872 
4873 void java_lang_Boolean::compute_offsets(InstanceKlass *k) {
4874   guarantee(k != NULL &amp;&amp; k-&gt;is_initialized(), &quot;must be loaded and initialized&quot;);
4875   BOOLEAN_FIELDS_DO(FIELD_COMPUTE_OFFSET);
4876 }
4877 
4878 oop java_lang_Boolean::get_TRUE(InstanceKlass *ik) {
4879   oop base = ik-&gt;static_field_base_raw();
4880   return base-&gt;obj_field(_static_TRUE_offset);
</pre>
</td>
</tr>
</table>
<center><a href="fieldLayoutBuilder.hpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="javaClasses.hpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>