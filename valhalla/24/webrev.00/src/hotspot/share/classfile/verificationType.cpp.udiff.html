<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff src/hotspot/share/classfile/verificationType.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="classFileParser.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../../../../test/hotspot/jtreg/runtime/valhalla/valuetypes/classfileparser/BadValueTypes.java.udiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/classfile/verificationType.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -160,22 +160,32 @@</span>
    if (!is_null() &amp;&amp; (name()-&gt;is_same_fundamental_type(from.name()) ||
        name() == vmSymbols::java_lang_Object())) {
      return true;
    }
  
<span class="udiff-line-modified-removed">-   // Need to load &#39;this&#39; to see if it is an interface.</span>
<span class="udiff-line-modified-added">+   // Need to load &#39;this&#39; to see if it is an interface or supertype.</span>
    InstanceKlass* klass = context-&gt;current_class();
    {
      HandleMark hm(THREAD);
      Klass* this_class = SystemDictionary::resolve_or_fail(
          name(), Handle(THREAD, klass-&gt;class_loader()),
          Handle(THREAD, klass-&gt;protection_domain()), true, CHECK_false);
      klass-&gt;class_loader_data()-&gt;record_dependency(this_class);
      if (log_is_enabled(Debug, class, resolve)) {
        Verifier::trace_class_resolution(this_class, klass);
      }
<span class="udiff-line-modified-removed">-     return (this_class-&gt;is_interface());</span>
<span class="udiff-line-modified-added">+     if (this_class-&gt;is_interface()) {</span>
<span class="udiff-line-added">+       return true;</span>
<span class="udiff-line-added">+     } else {</span>
<span class="udiff-line-added">+       Klass* from_class = SystemDictionary::resolve_or_fail(</span>
<span class="udiff-line-added">+         from.name(), Handle(THREAD, klass-&gt;class_loader()),</span>
<span class="udiff-line-added">+         Handle(THREAD, klass-&gt;protection_domain()), true, CHECK_false);</span>
<span class="udiff-line-added">+       if (log_is_enabled(Debug, class, resolve)) {</span>
<span class="udiff-line-added">+         Verifier::trace_class_resolution(from_class, klass);</span>
<span class="udiff-line-added">+       }</span>
<span class="udiff-line-added">+       return from_class-&gt;is_subclass_of(this_class);</span>
<span class="udiff-line-added">+     }</span>
    }
  }
  
  VerificationType VerificationType::get_component(ClassVerifier *context, TRAPS) const {
    assert(is_array() &amp;&amp; name()-&gt;utf8_length() &gt;= 2, &quot;Must be a valid array&quot;);
</pre>
<center><a href="classFileParser.cpp.udiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="../../../../test/hotspot/jtreg/runtime/valhalla/valuetypes/classfileparser/BadValueTypes.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>