<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/jdk.compiler/share/classes/com/sun/tools/javac/code/Symbol.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="Source.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Types.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/jdk.compiler/share/classes/com/sun/tools/javac/code/Symbol.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 432     public Symbol valueProjection() {
 433         return null;
 434     }
 435 
 436     /**
 437      * Return the reference projection IFF &#39;this&#39; happens to be value projection, null
 438      * otherwise.
 439      */
 440     public Symbol referenceProjection() {
 441         return null;
 442     }
 443 
 444     public boolean isPublic() {
 445         return (flags_field &amp; Flags.AccessFlags) == PUBLIC;
 446     }
 447 
 448     public boolean isEnum() {
 449         return (flags() &amp; ENUM) != 0;
 450     }
 451 








 452     public boolean isFinal() {
 453         return (flags_field &amp; FINAL) != 0;
 454     }
 455 
 456    /** Is this symbol declared (directly or indirectly) local
 457      *  to a method or variable initializer?
 458      *  Also includes fields of inner classes which are in
 459      *  turn local to a method or variable initializer.
 460      */
 461     public boolean isLocal() {
 462         return
 463             (owner.kind.matches(KindSelector.VAL_MTH) ||
 464              (owner.kind == TYP &amp;&amp; owner.isLocal()));
 465     }
 466 
 467     /** Has this symbol an empty name? This includes anonymous
 468      *  inner classes.
 469      */
 470     public boolean isAnonymous() {
 471         return name.isEmpty();
</pre>
<hr />
<pre>
1309 
1310         /** the list of translated local classes (used for generating
1311          * InnerClasses attribute)
1312          */
1313         public List&lt;ClassSymbol&gt; trans_local;
1314 
1315         /** the annotation metadata attached to this class */
1316         private AnnotationTypeMetadata annotationTypeMetadata;
1317 
1318         /* the list of any of record components, only non empty if the class is a record
1319          * and it has at least one record component
1320          */
1321         private List&lt;RecordComponent&gt; recordComponents = List.nil();
1322 
1323         /* the &#39;other&#39; projection: If &#39;this&#39; is an inline class then &#39;projection&#39; is its reference projection
1324            and vice versa.
1325          */
1326         public ClassSymbol projection;
1327 
1328 







1329         public ClassSymbol(long flags, Name name, Type type, Symbol owner) {
1330             super(TYP, flags, name, type, owner);
1331             this.members_field = null;
1332             this.fullname = formFullName(name, owner);
1333             this.flatname = formFlatName(name, owner);
1334             this.sourcefile = null;
1335             this.classfile = null;
1336             this.annotationTypeMetadata = AnnotationTypeMetadata.notAnAnnotationType();

1337         }
1338 
1339         public ClassSymbol(long flags, Name name, Symbol owner) {
1340             this(
1341                 flags,
1342                 name,
1343                 new ClassType(Type.noType, null, null),
1344                 owner);
1345             this.type.tsym = this;
1346         }
1347 
1348         /** The Java source which this symbol represents.
1349          */
1350         public String toString() {
1351             return className();
1352         }
1353 
1354         public long flags() {
1355             complete();
1356             return flags_field;
</pre>
<hr />
<pre>
1680                     MethodSymbol refMethod = valMethod.clone(projection);
1681                     valMethod.projection = refMethod;
1682                     refMethod.projection = valMethod;
1683                     clone = refMethod;
1684                 } else if (s.kind == VAR) {
1685                     VarSymbol valVar = (VarSymbol)s;
1686                     VarSymbol refVar = valVar.clone(projection);
1687                     valVar.projection = refVar;
1688                     refVar.projection = valVar;
1689                     clone = refVar;
1690                 }
1691                 projection.members_field.enter(clone);
1692             }
1693             projection.completer = Completer.NULL_COMPLETER;
1694             projection.sourcefile = this.sourcefile;
1695             projection.flatname = this.flatname.append(&#39;$&#39;, this.name.table.names.ref);
1696             projection.projection = this;
1697             projectedType.tsym = projection;
1698             return projection;
1699         }





1700     }
1701 
1702 
1703     /** A class for variable symbols
1704      */
1705     public static class VarSymbol extends Symbol implements VariableElement {
1706 
1707         /** The variable&#39;s declaration position.
1708          */
1709         public int pos = Position.NOPOS;
1710 
1711         /** The variable&#39;s address. Used for different purposes during
1712          *  flow analysis, translation and code generation.
1713          *  Flow analysis:
1714          *    If this is a blank final or local variable, its sequence number.
1715          *  Translation:
1716          *    If this is a private field, its access number.
1717          *  Code generation:
1718          *    If this is a local variable, its logical slot number.
1719          */
</pre>
</td>
<td>
<hr />
<pre>
 432     public Symbol valueProjection() {
 433         return null;
 434     }
 435 
 436     /**
 437      * Return the reference projection IFF &#39;this&#39; happens to be value projection, null
 438      * otherwise.
 439      */
 440     public Symbol referenceProjection() {
 441         return null;
 442     }
 443 
 444     public boolean isPublic() {
 445         return (flags_field &amp; Flags.AccessFlags) == PUBLIC;
 446     }
 447 
 448     public boolean isEnum() {
 449         return (flags() &amp; ENUM) != 0;
 450     }
 451 
<span class="line-added"> 452     public boolean isSealed() {</span>
<span class="line-added"> 453         return (flags_field &amp; SEALED) != 0;</span>
<span class="line-added"> 454     }</span>
<span class="line-added"> 455 </span>
<span class="line-added"> 456     public boolean isNonSealed() {</span>
<span class="line-added"> 457         return (flags_field &amp; NON_SEALED) != 0;</span>
<span class="line-added"> 458     }</span>
<span class="line-added"> 459 </span>
 460     public boolean isFinal() {
 461         return (flags_field &amp; FINAL) != 0;
 462     }
 463 
 464    /** Is this symbol declared (directly or indirectly) local
 465      *  to a method or variable initializer?
 466      *  Also includes fields of inner classes which are in
 467      *  turn local to a method or variable initializer.
 468      */
 469     public boolean isLocal() {
 470         return
 471             (owner.kind.matches(KindSelector.VAL_MTH) ||
 472              (owner.kind == TYP &amp;&amp; owner.isLocal()));
 473     }
 474 
 475     /** Has this symbol an empty name? This includes anonymous
 476      *  inner classes.
 477      */
 478     public boolean isAnonymous() {
 479         return name.isEmpty();
</pre>
<hr />
<pre>
1317 
1318         /** the list of translated local classes (used for generating
1319          * InnerClasses attribute)
1320          */
1321         public List&lt;ClassSymbol&gt; trans_local;
1322 
1323         /** the annotation metadata attached to this class */
1324         private AnnotationTypeMetadata annotationTypeMetadata;
1325 
1326         /* the list of any of record components, only non empty if the class is a record
1327          * and it has at least one record component
1328          */
1329         private List&lt;RecordComponent&gt; recordComponents = List.nil();
1330 
1331         /* the &#39;other&#39; projection: If &#39;this&#39; is an inline class then &#39;projection&#39; is its reference projection
1332            and vice versa.
1333          */
1334         public ClassSymbol projection;
1335 
1336 
<span class="line-added">1337         // sealed classes related fields</span>
<span class="line-added">1338         /** The classes, or interfaces, permitted to extend this class, or interface</span>
<span class="line-added">1339          */</span>
<span class="line-added">1340         public List&lt;Symbol&gt; permitted;</span>
<span class="line-added">1341 </span>
<span class="line-added">1342         public boolean isPermittedExplicit = false;</span>
<span class="line-added">1343 </span>
1344         public ClassSymbol(long flags, Name name, Type type, Symbol owner) {
1345             super(TYP, flags, name, type, owner);
1346             this.members_field = null;
1347             this.fullname = formFullName(name, owner);
1348             this.flatname = formFlatName(name, owner);
1349             this.sourcefile = null;
1350             this.classfile = null;
1351             this.annotationTypeMetadata = AnnotationTypeMetadata.notAnAnnotationType();
<span class="line-added">1352             this.permitted = List.nil();</span>
1353         }
1354 
1355         public ClassSymbol(long flags, Name name, Symbol owner) {
1356             this(
1357                 flags,
1358                 name,
1359                 new ClassType(Type.noType, null, null),
1360                 owner);
1361             this.type.tsym = this;
1362         }
1363 
1364         /** The Java source which this symbol represents.
1365          */
1366         public String toString() {
1367             return className();
1368         }
1369 
1370         public long flags() {
1371             complete();
1372             return flags_field;
</pre>
<hr />
<pre>
1696                     MethodSymbol refMethod = valMethod.clone(projection);
1697                     valMethod.projection = refMethod;
1698                     refMethod.projection = valMethod;
1699                     clone = refMethod;
1700                 } else if (s.kind == VAR) {
1701                     VarSymbol valVar = (VarSymbol)s;
1702                     VarSymbol refVar = valVar.clone(projection);
1703                     valVar.projection = refVar;
1704                     refVar.projection = valVar;
1705                     clone = refVar;
1706                 }
1707                 projection.members_field.enter(clone);
1708             }
1709             projection.completer = Completer.NULL_COMPLETER;
1710             projection.sourcefile = this.sourcefile;
1711             projection.flatname = this.flatname.append(&#39;$&#39;, this.name.table.names.ref);
1712             projection.projection = this;
1713             projectedType.tsym = projection;
1714             return projection;
1715         }
<span class="line-added">1716 </span>
<span class="line-added">1717         @DefinedBy(Api.LANGUAGE_MODEL)</span>
<span class="line-added">1718         public List&lt;Type&gt; getPermittedSubclasses() {</span>
<span class="line-added">1719             return permitted.map(s -&gt; s.type);</span>
<span class="line-added">1720         }</span>
1721     }
1722 
1723 
1724     /** A class for variable symbols
1725      */
1726     public static class VarSymbol extends Symbol implements VariableElement {
1727 
1728         /** The variable&#39;s declaration position.
1729          */
1730         public int pos = Position.NOPOS;
1731 
1732         /** The variable&#39;s address. Used for different purposes during
1733          *  flow analysis, translation and code generation.
1734          *  Flow analysis:
1735          *    If this is a blank final or local variable, its sequence number.
1736          *  Translation:
1737          *    If this is a private field, its access number.
1738          *  Code generation:
1739          *    If this is a local variable, its logical slot number.
1740          */
</pre>
</td>
</tr>
</table>
<center><a href="Source.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="Types.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>