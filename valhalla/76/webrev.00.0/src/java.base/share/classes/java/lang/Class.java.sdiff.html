<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/Class.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../hotspot/share/runtime/vmStructs.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="invoke/InvokerBytecodeGenerator.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/Class.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 185  * object.  For example, the type of {@code String.class} is {@code
 186  * Class&lt;String&gt;}.  Use {@code Class&lt;?&gt;} if the class being modeled is
 187  * unknown.
 188  *
 189  * @author  unascribed
 190  * @see     java.lang.ClassLoader#defineClass(byte[], int, int)
 191  * @since   1.0
 192  * @jls 15.8.2 Class Literals
 193  */
 194 public final class Class&lt;T&gt; implements java.io.Serializable,
 195                               GenericDeclaration,
 196                               Type,
 197                               AnnotatedElement,
 198                               TypeDescriptor.OfField&lt;Class&lt;?&gt;&gt;,
 199                               Constable {
 200     private static final int ANNOTATION = 0x00002000;
 201     private static final int ENUM       = 0x00004000;
 202     private static final int SYNTHETIC  = 0x00001000;
 203     private static final int INLINE     = 0x00000100;
 204 


 205     private static native void registerNatives();
 206     static {
 207         registerNatives();
 208     }
 209 
 210     /*
 211      * Private constructor. Only the Java Virtual Machine creates Class objects.
 212      * This constructor is not used and prevents the default constructor being
 213      * generated.
 214      */
 215     private Class(ClassLoader loader, Class&lt;?&gt; arrayComponentType) {
 216         // Initialize final field for classLoader.  The initialization value of non-null
 217         // prevents future JIT optimizations from assuming this final field is null.
 218         classLoader = loader;
 219         componentType = arrayComponentType;
 220     }
 221 
 222     /**
 223      * Converts the object to a string. The string representation is the
 224      * string &quot;class&quot; or &quot;interface&quot;, followed by a space, and then by the
</pre>
<hr />
<pre>
4431      * @since 12
4432      */
4433     @Override
4434     public Optional&lt;ClassDesc&gt; describeConstable() {
4435         Class&lt;?&gt; c = isArray() ? elementType() : this;
4436         return c.isHidden() ? Optional.empty()
4437                             : Optional.of(ClassDesc.ofDescriptor(descriptorString()));
4438    }
4439 
4440     /**
4441      * Returns {@code true} if and only if the underlying class is a hidden class.
4442      *
4443      * @return {@code true} if and only if this class is a hidden class.
4444      *
4445      * @since 15
4446      * @see MethodHandles.Lookup#defineHiddenClass
4447      */
4448     @HotSpotIntrinsicCandidate
4449     public native boolean isHidden();
4450 

































































4451 }
</pre>
</td>
<td>
<hr />
<pre>
 185  * object.  For example, the type of {@code String.class} is {@code
 186  * Class&lt;String&gt;}.  Use {@code Class&lt;?&gt;} if the class being modeled is
 187  * unknown.
 188  *
 189  * @author  unascribed
 190  * @see     java.lang.ClassLoader#defineClass(byte[], int, int)
 191  * @since   1.0
 192  * @jls 15.8.2 Class Literals
 193  */
 194 public final class Class&lt;T&gt; implements java.io.Serializable,
 195                               GenericDeclaration,
 196                               Type,
 197                               AnnotatedElement,
 198                               TypeDescriptor.OfField&lt;Class&lt;?&gt;&gt;,
 199                               Constable {
 200     private static final int ANNOTATION = 0x00002000;
 201     private static final int ENUM       = 0x00004000;
 202     private static final int SYNTHETIC  = 0x00001000;
 203     private static final int INLINE     = 0x00000100;
 204 
<span class="line-added"> 205     private static final ClassDesc[] EMPTY_CLASS_DESC_ARRAY = new ClassDesc[0];</span>
<span class="line-added"> 206 </span>
 207     private static native void registerNatives();
 208     static {
 209         registerNatives();
 210     }
 211 
 212     /*
 213      * Private constructor. Only the Java Virtual Machine creates Class objects.
 214      * This constructor is not used and prevents the default constructor being
 215      * generated.
 216      */
 217     private Class(ClassLoader loader, Class&lt;?&gt; arrayComponentType) {
 218         // Initialize final field for classLoader.  The initialization value of non-null
 219         // prevents future JIT optimizations from assuming this final field is null.
 220         classLoader = loader;
 221         componentType = arrayComponentType;
 222     }
 223 
 224     /**
 225      * Converts the object to a string. The string representation is the
 226      * string &quot;class&quot; or &quot;interface&quot;, followed by a space, and then by the
</pre>
<hr />
<pre>
4433      * @since 12
4434      */
4435     @Override
4436     public Optional&lt;ClassDesc&gt; describeConstable() {
4437         Class&lt;?&gt; c = isArray() ? elementType() : this;
4438         return c.isHidden() ? Optional.empty()
4439                             : Optional.of(ClassDesc.ofDescriptor(descriptorString()));
4440    }
4441 
4442     /**
4443      * Returns {@code true} if and only if the underlying class is a hidden class.
4444      *
4445      * @return {@code true} if and only if this class is a hidden class.
4446      *
4447      * @since 15
4448      * @see MethodHandles.Lookup#defineHiddenClass
4449      */
4450     @HotSpotIntrinsicCandidate
4451     public native boolean isHidden();
4452 
<span class="line-added">4453     /**</span>
<span class="line-added">4454      * {@preview Associated with sealed classes, a preview feature of the Java language.</span>
<span class="line-added">4455      *</span>
<span class="line-added">4456      *           This method is associated with &lt;i&gt;sealed classes&lt;/i&gt;, a preview</span>
<span class="line-added">4457      *           feature of the Java language. Preview features</span>
<span class="line-added">4458      *           may be removed in a future release, or upgraded to permanent</span>
<span class="line-added">4459      *           features of the Java language.}</span>
<span class="line-added">4460      *</span>
<span class="line-added">4461      * Returns an array containing {@code ClassDesc} objects representing all the</span>
<span class="line-added">4462      * direct subclasses or direct implementation classes permitted to extend or implement this class or interface</span>
<span class="line-added">4463      * if it is sealed. If this {@code Class} object represents a primitive type, {@code void}, an array type,</span>
<span class="line-added">4464      * or a class or interface that is not sealed, an empty array is returned.</span>
<span class="line-added">4465      *</span>
<span class="line-added">4466      * @return an array of class descriptors of all the permitted subclasses of this class or interface</span>
<span class="line-added">4467      *</span>
<span class="line-added">4468      * @jls 8.1 Class Declarations</span>
<span class="line-added">4469      * @jls 9.1 Interface Declarations</span>
<span class="line-added">4470      * @since 15</span>
<span class="line-added">4471      */</span>
<span class="line-added">4472     @jdk.internal.PreviewFeature(feature=jdk.internal.PreviewFeature.Feature.SEALED_CLASSES, essentialAPI=false)</span>
<span class="line-added">4473     public ClassDesc[] permittedSubclasses() {</span>
<span class="line-added">4474         String[] subclassNames;</span>
<span class="line-added">4475         if (isArray() || isPrimitive() || (subclassNames = getPermittedSubclasses0()).length == 0) {</span>
<span class="line-added">4476             return EMPTY_CLASS_DESC_ARRAY;</span>
<span class="line-added">4477         }</span>
<span class="line-added">4478         ClassDesc[] constants = new ClassDesc[subclassNames.length];</span>
<span class="line-added">4479         int i = 0;</span>
<span class="line-added">4480         for (String subclassName : subclassNames) {</span>
<span class="line-added">4481             try {</span>
<span class="line-added">4482                 constants[i++] = ClassDesc.of(subclassName.replace(&#39;/&#39;, &#39;.&#39;));</span>
<span class="line-added">4483             } catch (IllegalArgumentException iae) {</span>
<span class="line-added">4484                 throw new InternalError(&quot;Invalid type in permitted subclasses information: &quot; + subclassName, iae);</span>
<span class="line-added">4485             }</span>
<span class="line-added">4486         }</span>
<span class="line-added">4487         return constants;</span>
<span class="line-added">4488     }</span>
<span class="line-added">4489 </span>
<span class="line-added">4490     /**</span>
<span class="line-added">4491      * * {@preview Associated with sealed classes, a preview feature of the Java language.</span>
<span class="line-added">4492      *</span>
<span class="line-added">4493      *           This method is associated with &lt;i&gt;sealed classes&lt;/i&gt;, a preview</span>
<span class="line-added">4494      *           feature of the Java language. Preview features</span>
<span class="line-added">4495      *           may be removed in a future release, or upgraded to permanent</span>
<span class="line-added">4496      *           features of the Java language.}</span>
<span class="line-added">4497      *</span>
<span class="line-added">4498      * Returns {@code true} if and only if this {@code Class} object represents a sealed class or interface.</span>
<span class="line-added">4499      * If this {@code Class} object represents a primitive type, {@code void}, or an array type, this method returns</span>
<span class="line-added">4500      * {@code false}.</span>
<span class="line-added">4501      *</span>
<span class="line-added">4502      * @return {@code true} if and only if this {@code Class} object represents a sealed class or interface.</span>
<span class="line-added">4503      *</span>
<span class="line-added">4504      * @jls 8.1 Class Declarations</span>
<span class="line-added">4505      * @jls 9.1 Interface Declarations</span>
<span class="line-added">4506      * @since 15</span>
<span class="line-added">4507      */</span>
<span class="line-added">4508     @jdk.internal.PreviewFeature(feature=jdk.internal.PreviewFeature.Feature.SEALED_CLASSES, essentialAPI=false)</span>
<span class="line-added">4509     @SuppressWarnings(&quot;preview&quot;)</span>
<span class="line-added">4510     public boolean isSealed() {</span>
<span class="line-added">4511         if (isArray() || isPrimitive()) {</span>
<span class="line-added">4512             return false;</span>
<span class="line-added">4513         }</span>
<span class="line-added">4514         return permittedSubclasses().length != 0;</span>
<span class="line-added">4515     }</span>
<span class="line-added">4516 </span>
<span class="line-added">4517     private native String[] getPermittedSubclasses0();</span>
4518 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../hotspot/share/runtime/vmStructs.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="invoke/InvokerBytecodeGenerator.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>