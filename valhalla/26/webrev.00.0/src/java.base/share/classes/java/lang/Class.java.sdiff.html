<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/java/lang/Class.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="../io/ObjectStreamClass.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="reflect/AccessibleObject.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/java/lang/Class.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
3881      * by erasure).
3882      *
3883      * @param &lt;U&gt; the type to cast this {@code Class} object to
3884      * @param clazz the class of the type to cast this {@code Class} object to
3885      * @return this {@code Class} object, cast to represent a subclass of
3886      *    the specified class object.
3887      * @throws ClassCastException if this {@code Class} object does not
3888      *    represent a subclass of the specified class (here &quot;subclass&quot; includes
3889      *    the class itself).
3890      * @since 1.5
3891      */
3892     @SuppressWarnings(&quot;unchecked&quot;)
3893     public &lt;U&gt; Class&lt;? extends U&gt; asSubclass(Class&lt;U&gt; clazz) {
3894         if (clazz.isAssignableFrom(this))
3895             return (Class&lt;? extends U&gt;) this;
3896         else
3897             throw new ClassCastException(this.toString());
3898     }
3899 
3900     /**




3901      * @throws NullPointerException {@inheritDoc}
3902      * @since 1.5
3903      */

3904     @SuppressWarnings(&quot;unchecked&quot;)
3905     public &lt;A extends Annotation&gt; A getAnnotation(Class&lt;A&gt; annotationClass) {
3906         Objects.requireNonNull(annotationClass);
3907 
3908         return (A) annotationData().annotations.get(annotationClass);
3909     }
3910 
3911     /**
3912      * {@inheritDoc}
3913      * @throws NullPointerException {@inheritDoc}
3914      * @since 1.5
3915      */
3916     @Override
3917     public boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass) {
3918         return GenericDeclaration.super.isAnnotationPresent(annotationClass);
3919     }
3920 
3921     /**




3922      * @throws NullPointerException {@inheritDoc}
3923      * @since 1.8
3924      */
3925     @Override
3926     public &lt;A extends Annotation&gt; A[] getAnnotationsByType(Class&lt;A&gt; annotationClass) {
3927         Objects.requireNonNull(annotationClass);
3928 
3929         AnnotationData annotationData = annotationData();
3930         return AnnotationSupport.getAssociatedAnnotations(annotationData.declaredAnnotations,
3931                                                           this,
3932                                                           annotationClass);
3933     }
3934 
3935     /**




3936      * @since 1.5
3937      */

3938     public Annotation[] getAnnotations() {
3939         return AnnotationParser.toArray(annotationData().annotations);
3940     }
3941 
3942     /**




3943      * @throws NullPointerException {@inheritDoc}
3944      * @since 1.8
3945      */
3946     @Override
3947     @SuppressWarnings(&quot;unchecked&quot;)
3948     public &lt;A extends Annotation&gt; A getDeclaredAnnotation(Class&lt;A&gt; annotationClass) {
3949         Objects.requireNonNull(annotationClass);
3950 
3951         return (A) annotationData().declaredAnnotations.get(annotationClass);
3952     }
3953 
3954     /**




3955      * @throws NullPointerException {@inheritDoc}
3956      * @since 1.8
3957      */
3958     @Override
3959     public &lt;A extends Annotation&gt; A[] getDeclaredAnnotationsByType(Class&lt;A&gt; annotationClass) {
3960         Objects.requireNonNull(annotationClass);
3961 
3962         return AnnotationSupport.getDirectlyAndIndirectlyPresent(annotationData().declaredAnnotations,
3963                                                                  annotationClass);
3964     }
3965 
3966     /**




3967      * @since 1.5
3968      */

3969     public Annotation[] getDeclaredAnnotations()  {
3970         return AnnotationParser.toArray(annotationData().declaredAnnotations);
3971     }
3972 
3973     // annotation data that might get invalidated when JVM TI RedefineClasses() is called
3974     private static class AnnotationData {
3975         final Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; annotations;
3976         final Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; declaredAnnotations;
3977 
3978         // Value of classRedefinedCount when we created this AnnotationData instance
3979         final int redefinedCount;
3980 
3981         AnnotationData(Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; annotations,
3982                        Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; declaredAnnotations,
3983                        int redefinedCount) {
3984             this.annotations = annotations;
3985             this.declaredAnnotations = declaredAnnotations;
3986             this.redefinedCount = redefinedCount;
3987         }
3988     }
</pre>
</td>
<td>
<hr />
<pre>
3881      * by erasure).
3882      *
3883      * @param &lt;U&gt; the type to cast this {@code Class} object to
3884      * @param clazz the class of the type to cast this {@code Class} object to
3885      * @return this {@code Class} object, cast to represent a subclass of
3886      *    the specified class object.
3887      * @throws ClassCastException if this {@code Class} object does not
3888      *    represent a subclass of the specified class (here &quot;subclass&quot; includes
3889      *    the class itself).
3890      * @since 1.5
3891      */
3892     @SuppressWarnings(&quot;unchecked&quot;)
3893     public &lt;U&gt; Class&lt;? extends U&gt; asSubclass(Class&lt;U&gt; clazz) {
3894         if (clazz.isAssignableFrom(this))
3895             return (Class&lt;? extends U&gt;) this;
3896         else
3897             throw new ClassCastException(this.toString());
3898     }
3899 
3900     /**
<span class="line-added">3901      * {@inheritDoc}</span>
<span class="line-added">3902      * &lt;p&gt;Note that any annotation returned by this method is a</span>
<span class="line-added">3903      * declaration annotation.</span>
<span class="line-added">3904      *</span>
3905      * @throws NullPointerException {@inheritDoc}
3906      * @since 1.5
3907      */
<span class="line-added">3908     @Override</span>
3909     @SuppressWarnings(&quot;unchecked&quot;)
3910     public &lt;A extends Annotation&gt; A getAnnotation(Class&lt;A&gt; annotationClass) {
3911         Objects.requireNonNull(annotationClass);
3912 
3913         return (A) annotationData().annotations.get(annotationClass);
3914     }
3915 
3916     /**
3917      * {@inheritDoc}
3918      * @throws NullPointerException {@inheritDoc}
3919      * @since 1.5
3920      */
3921     @Override
3922     public boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass) {
3923         return GenericDeclaration.super.isAnnotationPresent(annotationClass);
3924     }
3925 
3926     /**
<span class="line-added">3927      * {@inheritDoc}</span>
<span class="line-added">3928      * &lt;p&gt;Note that any annotations returned by this method are</span>
<span class="line-added">3929      * declaration annotations.</span>
<span class="line-added">3930      *</span>
3931      * @throws NullPointerException {@inheritDoc}
3932      * @since 1.8
3933      */
3934     @Override
3935     public &lt;A extends Annotation&gt; A[] getAnnotationsByType(Class&lt;A&gt; annotationClass) {
3936         Objects.requireNonNull(annotationClass);
3937 
3938         AnnotationData annotationData = annotationData();
3939         return AnnotationSupport.getAssociatedAnnotations(annotationData.declaredAnnotations,
3940                                                           this,
3941                                                           annotationClass);
3942     }
3943 
3944     /**
<span class="line-added">3945      * {@inheritDoc}</span>
<span class="line-added">3946      * &lt;p&gt;Note that any annotations returned by this method are</span>
<span class="line-added">3947      * declaration annotations.</span>
<span class="line-added">3948      *</span>
3949      * @since 1.5
3950      */
<span class="line-added">3951     @Override</span>
3952     public Annotation[] getAnnotations() {
3953         return AnnotationParser.toArray(annotationData().annotations);
3954     }
3955 
3956     /**
<span class="line-added">3957      * {@inheritDoc}</span>
<span class="line-added">3958      * &lt;p&gt;Note that any annotation returned by this method is a</span>
<span class="line-added">3959      * declaration annotation.</span>
<span class="line-added">3960      *</span>
3961      * @throws NullPointerException {@inheritDoc}
3962      * @since 1.8
3963      */
3964     @Override
3965     @SuppressWarnings(&quot;unchecked&quot;)
3966     public &lt;A extends Annotation&gt; A getDeclaredAnnotation(Class&lt;A&gt; annotationClass) {
3967         Objects.requireNonNull(annotationClass);
3968 
3969         return (A) annotationData().declaredAnnotations.get(annotationClass);
3970     }
3971 
3972     /**
<span class="line-added">3973      * {@inheritDoc}</span>
<span class="line-added">3974      * &lt;p&gt;Note that any annotations returned by this method are</span>
<span class="line-added">3975      * declaration annotations.</span>
<span class="line-added">3976      *</span>
3977      * @throws NullPointerException {@inheritDoc}
3978      * @since 1.8
3979      */
3980     @Override
3981     public &lt;A extends Annotation&gt; A[] getDeclaredAnnotationsByType(Class&lt;A&gt; annotationClass) {
3982         Objects.requireNonNull(annotationClass);
3983 
3984         return AnnotationSupport.getDirectlyAndIndirectlyPresent(annotationData().declaredAnnotations,
3985                                                                  annotationClass);
3986     }
3987 
3988     /**
<span class="line-added">3989      * {@inheritDoc}</span>
<span class="line-added">3990      * &lt;p&gt;Note that any annotations returned by this method are</span>
<span class="line-added">3991      * declaration annotations.</span>
<span class="line-added">3992      *</span>
3993      * @since 1.5
3994      */
<span class="line-added">3995     @Override</span>
3996     public Annotation[] getDeclaredAnnotations()  {
3997         return AnnotationParser.toArray(annotationData().declaredAnnotations);
3998     }
3999 
4000     // annotation data that might get invalidated when JVM TI RedefineClasses() is called
4001     private static class AnnotationData {
4002         final Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; annotations;
4003         final Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; declaredAnnotations;
4004 
4005         // Value of classRedefinedCount when we created this AnnotationData instance
4006         final int redefinedCount;
4007 
4008         AnnotationData(Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; annotations,
4009                        Map&lt;Class&lt;? extends Annotation&gt;, Annotation&gt; declaredAnnotations,
4010                        int redefinedCount) {
4011             this.annotations = annotations;
4012             this.declaredAnnotations = declaredAnnotations;
4013             this.redefinedCount = redefinedCount;
4014         }
4015     }
</pre>
</td>
</tr>
</table>
<center><a href="../io/ObjectStreamClass.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="reflect/AccessibleObject.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>