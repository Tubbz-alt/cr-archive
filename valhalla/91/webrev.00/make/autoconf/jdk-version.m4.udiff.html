<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff make/autoconf/jdk-version.m4</title>
    <link rel="stylesheet" href="../../style.css" />
  </head>
<body>
<center><a href="flags-ldflags.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.udiff.html" target="_top">next &gt;</a></center>    <h2>make/autoconf/jdk-version.m4</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -177,22 +177,22 @@</span>
        [Set version string @&lt;:@calculated@:&gt;@])])
    if test &quot;x$with_version_string&quot; = xyes; then
      AC_MSG_ERROR([--with-version-string must have a value])
    elif test &quot;x$with_version_string&quot; != x; then
      # Additional [] needed to keep m4 from mangling shell constructs.
<span class="udiff-line-modified-removed">-     if [ [[ $with_version_string =~ ^([0-9]+)(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(-([a-zA-Z]+))?((\+)([0-9]+)?(-([-a-zA-Z0-9.]+))?)?$ ]] ]; then</span>
<span class="udiff-line-modified-added">+     if [ [[ $with_version_string =~ ^([0-9]+)(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(\.([0-9]+))?(-([a-zA-Z0-9]+))?(((\+)([0-9]*))?(-([-a-zA-Z0-9.]+))?)?$ ]] ]; then</span>
        VERSION_FEATURE=${BASH_REMATCH[[1]]}
        VERSION_INTERIM=${BASH_REMATCH[[3]]}
        VERSION_UPDATE=${BASH_REMATCH[[5]]}
        VERSION_PATCH=${BASH_REMATCH[[7]]}
        VERSION_EXTRA1=${BASH_REMATCH[[9]]}
        VERSION_EXTRA2=${BASH_REMATCH[[11]]}
        VERSION_EXTRA3=${BASH_REMATCH[[13]]}
        VERSION_PRE=${BASH_REMATCH[[15]]}
<span class="udiff-line-modified-removed">-       version_plus_separator=${BASH_REMATCH[[17]]}</span>
<span class="udiff-line-modified-removed">-       VERSION_BUILD=${BASH_REMATCH[[18]]}</span>
<span class="udiff-line-modified-removed">-       VERSION_OPT=${BASH_REMATCH[[20]]}</span>
<span class="udiff-line-modified-added">+       version_plus_separator=${BASH_REMATCH[[18]]}</span>
<span class="udiff-line-modified-added">+       VERSION_BUILD=${BASH_REMATCH[[19]]}</span>
<span class="udiff-line-modified-added">+       VERSION_OPT=${BASH_REMATCH[[21]]}</span>
        # Unspecified numerical fields are interpreted as 0.
        if test &quot;x$VERSION_INTERIM&quot; = x; then
          VERSION_INTERIM=0
        fi
        if test &quot;x$VERSION_UPDATE&quot; = x; then
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -231,12 +231,12 @@</span>
        AC_MSG_ERROR([--with-version-pre must have a value])
      elif test &quot;x$with_version_pre&quot; = xno; then
        # Interpret --without-* as empty string instead of the literal &quot;no&quot;
        VERSION_PRE=
      else
<span class="udiff-line-modified-removed">-       # Only [a-zA-Z] is allowed in the VERSION_PRE. Outer [ ] to quote m4.</span>
<span class="udiff-line-modified-removed">-       [ VERSION_PRE=`$ECHO &quot;$with_version_pre&quot; | $TR -c -d &#39;[a-z][A-Z]&#39;` ]</span>
<span class="udiff-line-modified-added">+       # Only [a-zA-Z0-9] is allowed in the VERSION_PRE. Outer [ ] to quote m4.</span>
<span class="udiff-line-modified-added">+       [ VERSION_PRE=`$ECHO &quot;$with_version_pre&quot; | $TR -c -d &#39;[a-zA-Z0-9]&#39;` ]</span>
        if test &quot;x$VERSION_PRE&quot; != &quot;x$with_version_pre&quot;; then
          AC_MSG_WARN([--with-version-pre value has been sanitized from &#39;$with_version_pre&#39; to &#39;$VERSION_PRE&#39;])
        fi
      fi
    else
</pre>
<center><a href="flags-ldflags.m4.udiff.html" target="_top">&lt; prev</a> <a href="../../index.html" target="_top">index</a> <a href="spec.gmk.in.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>