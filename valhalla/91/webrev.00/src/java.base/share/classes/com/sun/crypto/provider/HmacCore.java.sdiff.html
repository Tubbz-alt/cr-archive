<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/java.base/share/classes/com/sun/crypto/provider/HmacCore.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../hotspot/share/utilities/histogram.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../java/lang/Class.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/java.base/share/classes/com/sun/crypto/provider/HmacCore.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 58     private byte[] k_opad; // outer padding - key XORd with opad
 59     private boolean first;       // Is this the first data to be processed?
 60 
 61     private final int blockLen;
 62 
 63     /**
 64      * Standard constructor, creates a new HmacCore instance instantiating
 65      * a MessageDigest of the specified name.
 66      */
 67     HmacCore(String digestAlgo, int bl) throws NoSuchAlgorithmException {
 68         MessageDigest md = MessageDigest.getInstance(digestAlgo);
 69         if (!(md instanceof Cloneable)) {
 70             // use SUN provider if the most preferred one does not support
 71             // cloning
 72             Provider sun = Security.getProvider(&quot;SUN&quot;);
 73             if (sun != null) {
 74                 md = MessageDigest.getInstance(digestAlgo, sun);
 75             } else {
 76                 String noCloneProv = md.getProvider().getName();
 77                 // if no Sun provider, use provider list

 78                 Provider[] provs = Security.getProviders();
 79                 for (Provider p : provs) {
 80                     try {
 81                         if (!p.getName().equals(noCloneProv)) {
 82                             MessageDigest md2 =
 83                                 MessageDigest.getInstance(digestAlgo, p);
 84                             if (md2 instanceof Cloneable) {
 85                                 md = md2;
 86                                 break;
 87                             }
 88                         }
 89                     } catch (NoSuchAlgorithmException nsae) {
 90                         continue;
 91                     }
 92                 }




 93             }
 94         }
 95         this.md = md;
 96         this.blockLen = bl;
 97         this.k_ipad = new byte[blockLen];
 98         this.k_opad = new byte[blockLen];
 99         first = true;
100     }
101 
102     /**
103      * Returns the length of the HMAC in bytes.
104      *
105      * @return the HMAC length in bytes.
106      */
107     protected int engineGetMacLength() {
108         return this.md.getDigestLength();
109     }
110 
111     /**
112      * Initializes the HMAC with the given secret key and algorithm parameters.
</pre>
</td>
<td>
<hr />
<pre>
 58     private byte[] k_opad; // outer padding - key XORd with opad
 59     private boolean first;       // Is this the first data to be processed?
 60 
 61     private final int blockLen;
 62 
 63     /**
 64      * Standard constructor, creates a new HmacCore instance instantiating
 65      * a MessageDigest of the specified name.
 66      */
 67     HmacCore(String digestAlgo, int bl) throws NoSuchAlgorithmException {
 68         MessageDigest md = MessageDigest.getInstance(digestAlgo);
 69         if (!(md instanceof Cloneable)) {
 70             // use SUN provider if the most preferred one does not support
 71             // cloning
 72             Provider sun = Security.getProvider(&quot;SUN&quot;);
 73             if (sun != null) {
 74                 md = MessageDigest.getInstance(digestAlgo, sun);
 75             } else {
 76                 String noCloneProv = md.getProvider().getName();
 77                 // if no Sun provider, use provider list
<span class="line-added"> 78                 md = null;</span>
 79                 Provider[] provs = Security.getProviders();
 80                 for (Provider p : provs) {
 81                     try {
 82                         if (!p.getName().equals(noCloneProv)) {
 83                             MessageDigest md2 =
 84                                 MessageDigest.getInstance(digestAlgo, p);
 85                             if (md2 instanceof Cloneable) {
 86                                 md = md2;
 87                                 break;
 88                             }
 89                         }
 90                     } catch (NoSuchAlgorithmException nsae) {
 91                         continue;
 92                     }
 93                 }
<span class="line-added"> 94                 if (md == null) {</span>
<span class="line-added"> 95                     throw new NoSuchAlgorithmException</span>
<span class="line-added"> 96                             (&quot;No Cloneable digest found for &quot; + digestAlgo);</span>
<span class="line-added"> 97                 }</span>
 98             }
 99         }
100         this.md = md;
101         this.blockLen = bl;
102         this.k_ipad = new byte[blockLen];
103         this.k_opad = new byte[blockLen];
104         first = true;
105     }
106 
107     /**
108      * Returns the length of the HMAC in bytes.
109      *
110      * @return the HMAC length in bytes.
111      */
112     protected int engineGetMacLength() {
113         return this.md.getDigestLength();
114     }
115 
116     /**
117      * Initializes the HMAC with the given secret key and algorithm parameters.
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../hotspot/share/utilities/histogram.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="../../../../java/lang/Class.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>