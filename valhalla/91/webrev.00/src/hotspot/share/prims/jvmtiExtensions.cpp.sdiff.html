<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff src/hotspot/share/prims/jvmtiExtensions.cpp</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center><a href="jvmtiExport.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmtiImpl.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>src/hotspot/share/prims/jvmtiExtensions.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 32 // the list of extension events
 33 GrowableArray&lt;jvmtiExtensionEventInfo*&gt;* JvmtiExtensions::_ext_events;
 34 
 35 
 36 // extension function
 37 static jvmtiError JNICALL IsClassUnloadingEnabled(const jvmtiEnv* env, jboolean* enabled, ...) {
 38   if (enabled == NULL) {
 39     return JVMTI_ERROR_NULL_POINTER;
 40   }
 41   *enabled = (jboolean)ClassUnloading;
 42   return JVMTI_ERROR_NONE;
 43 }
 44 
 45 // register extension functions and events. In this implementation we
 46 // have a single extension function (to prove the API) that tests if class
 47 // unloading is enabled or disabled. We also have a single extension event
 48 // EXT_EVENT_CLASS_UNLOAD which is used to provide the JVMDI_EVENT_CLASS_UNLOAD
 49 // event. The function and the event are registered here.
 50 //
 51 void JvmtiExtensions::register_extensions() {
<span class="line-modified"> 52   _ext_functions = new (ResourceObj::C_HEAP, mtInternal) GrowableArray&lt;jvmtiExtensionFunctionInfo*&gt;(1,true);</span>
<span class="line-modified"> 53   _ext_events = new (ResourceObj::C_HEAP, mtInternal) GrowableArray&lt;jvmtiExtensionEventInfo*&gt;(1,true);</span>
 54 
 55   // register our extension function
 56   static jvmtiParamInfo func_params[] = {
 57     { (char*)&quot;IsClassUnloadingEnabled&quot;, JVMTI_KIND_OUT,  JVMTI_TYPE_JBOOLEAN, JNI_FALSE }
 58   };
 59   static jvmtiExtensionFunctionInfo ext_func = {
 60     (jvmtiExtensionFunction)IsClassUnloadingEnabled,
 61     (char*)&quot;com.sun.hotspot.functions.IsClassUnloadingEnabled&quot;,
 62     (char*)&quot;Tell if class unloading is enabled (-noclassgc)&quot;,
 63     sizeof(func_params)/sizeof(func_params[0]),
 64     func_params,
 65     0,              // no non-universal errors
 66     NULL
 67   };
 68   _ext_functions-&gt;append(&amp;ext_func);
 69 
 70   // register our extension event
 71 
 72   static jvmtiParamInfo event_params[] = {
 73     { (char*)&quot;JNI Environment&quot;, JVMTI_KIND_IN_PTR, JVMTI_TYPE_JNIENV, JNI_FALSE },
</pre>
</td>
<td>
<hr />
<pre>
 32 // the list of extension events
 33 GrowableArray&lt;jvmtiExtensionEventInfo*&gt;* JvmtiExtensions::_ext_events;
 34 
 35 
 36 // extension function
 37 static jvmtiError JNICALL IsClassUnloadingEnabled(const jvmtiEnv* env, jboolean* enabled, ...) {
 38   if (enabled == NULL) {
 39     return JVMTI_ERROR_NULL_POINTER;
 40   }
 41   *enabled = (jboolean)ClassUnloading;
 42   return JVMTI_ERROR_NONE;
 43 }
 44 
 45 // register extension functions and events. In this implementation we
 46 // have a single extension function (to prove the API) that tests if class
 47 // unloading is enabled or disabled. We also have a single extension event
 48 // EXT_EVENT_CLASS_UNLOAD which is used to provide the JVMDI_EVENT_CLASS_UNLOAD
 49 // event. The function and the event are registered here.
 50 //
 51 void JvmtiExtensions::register_extensions() {
<span class="line-modified"> 52   _ext_functions = new (ResourceObj::C_HEAP, mtServiceability) GrowableArray&lt;jvmtiExtensionFunctionInfo*&gt;(1, mtServiceability);</span>
<span class="line-modified"> 53   _ext_events = new (ResourceObj::C_HEAP, mtServiceability) GrowableArray&lt;jvmtiExtensionEventInfo*&gt;(1, mtServiceability);</span>
 54 
 55   // register our extension function
 56   static jvmtiParamInfo func_params[] = {
 57     { (char*)&quot;IsClassUnloadingEnabled&quot;, JVMTI_KIND_OUT,  JVMTI_TYPE_JBOOLEAN, JNI_FALSE }
 58   };
 59   static jvmtiExtensionFunctionInfo ext_func = {
 60     (jvmtiExtensionFunction)IsClassUnloadingEnabled,
 61     (char*)&quot;com.sun.hotspot.functions.IsClassUnloadingEnabled&quot;,
 62     (char*)&quot;Tell if class unloading is enabled (-noclassgc)&quot;,
 63     sizeof(func_params)/sizeof(func_params[0]),
 64     func_params,
 65     0,              // no non-universal errors
 66     NULL
 67   };
 68   _ext_functions-&gt;append(&amp;ext_func);
 69 
 70   // register our extension event
 71 
 72   static jvmtiParamInfo event_params[] = {
 73     { (char*)&quot;JNI Environment&quot;, JVMTI_KIND_IN_PTR, JVMTI_TYPE_JNIENV, JNI_FALSE },
</pre>
</td>
</tr>
</table>
<center><a href="jvmtiExport.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../index.html" target="_top">index</a> <a href="jvmtiImpl.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>