diff a/test/langtools/tools/javac/valhalla/lworld-values/GenericsAndValues2.java b/test/langtools/tools/javac/valhalla/lworld-values/GenericsAndValues2.java
--- a/test/langtools/tools/javac/valhalla/lworld-values/GenericsAndValues2.java
+++ b/test/langtools/tools/javac/valhalla/lworld-values/GenericsAndValues2.java
@@ -25,11 +25,11 @@
 
 /*
  * @test
  * @bug 8222784
  * @summary Check generics and values interplay
- * @compile -XDallowGenericsOverValues GenericsAndValues2.java
+ * @compile GenericsAndValues2.java
  */
 
 import java.util.function.Consumer;
 
   @__inline__ class CaptureBug {
@@ -37,11 +37,11 @@
   
     public CaptureBug(int value) {
       this.value = value;
     }
   
-    private static void accept(Consumer<? super CaptureBug> consumer) {
+    private static void accept(Consumer<? super CaptureBug.ref> consumer) {
       consumer.accept(new CaptureBug(3));
     }
   
     public static void main(String[] args) {
       accept(value -> System.out.println(value));
