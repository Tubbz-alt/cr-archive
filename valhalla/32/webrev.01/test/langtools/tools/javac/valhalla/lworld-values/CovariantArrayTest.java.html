<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New test/langtools/tools/javac/valhalla/lworld-values/CovariantArrayTest.java</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 /*
 2  * @test /nodynamiccopyright/
 3  * @bug 8215507 8218040
 4  * @summary javac should NOT forbid conversion from value array to Object[]
 5  * @compile/fail/ref=CovariantArrayTest.out -XDrawDiagnostics -XDdev CovariantArrayTest.java
 6  */
 7 public class CovariantArrayTest {
 8     static final inline class V {
 9         public final int v1;
10         private V () {v1 = 0;}
11     }
12 
13     public static void main(String args[]) {
14         int [] ia = new int[1];
15         Object oa[] = (Object[])ia;
16         oa = ia;
17 
18         V [] va = new V[1];
19         Object oa2[] = (Object[])va;
20         oa2 = va;
21         va = oa2;
22         va = (V []) oa2;
23     }
24 }
    </pre>
  </body>
</html>