<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff test/hotspot/jtreg/runtime/valhalla/valuetypes/verifier/verifierTests.jcod</title>
    <link rel="stylesheet" href="../../../../../../../style.css" />
  </head>
<body>
<center><a href="NoNullVT.jcod.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>test/hotspot/jtreg/runtime/valhalla/valuetypes/verifier/verifierTests.jcod</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  43 //  static Value makeValue(int); descriptor: (I)LValue; flags: (0x0008) ACC_STATIC
  44 //    Code:
  45 //      stack=2, locals=2, args_size=1
  46 //         0: defaultvalue  #3                  // class Value
  47 //         3: astore_1
  48 //         4: aload_1
  49 //         5: iload_0
  50 //         6: withfield     #2                  // Field int_v:I
  51 //         9: astore_1
  52 //        10: aload_1
  53 //        11: areturn
  54 
  55 
  56 // The constant pool index of the defaultvalue opcode (0xCB) in the Code
  57 // attribute was changed to 0x93.  Since this index is outside the range of
  58 // the constant pool, a VerifyError exception should get thrown.
  59 //
  60 class defValBadCP {
  61   0xCAFEBABE;
  62   0; // minor version
<span class="line-modified">  63   59; // version</span>
  64   [27] { // Constant Pool
  65     ; // first element is empty
  66     Method #7 #21; // #1     at 0x0A
  67     Field #3 #22; // #2     at 0x0F
  68     class #23; // #3     at 0x14
  69     int 0x01234567; // #4     at 0x17
  70     Method #3 #24; // #5     at 0x1C
  71     Field #3 #25; // #6     at 0x21
  72     class #26; // #7     at 0x26
  73     Utf8 &quot;VT&quot;; // #8     at 0x29
  74     Utf8 &quot;LdefValBadCP;&quot;; // #9     at 0x2E
  75     Utf8 &quot;int_v&quot;; // #10     at 0x38
  76     Utf8 &quot;I&quot;; // #11     at 0x40
  77     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
  78     Utf8 &quot;()V&quot;; // #13     at 0x4D
  79     Utf8 &quot;Code&quot;; // #14     at 0x53
  80     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
  81     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
  82     Utf8 &quot;(I)LdefValBadCP;&quot;; // #17     at 0x78
  83     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
</pre>
<hr />
<pre>
 245       } // Attributes
 246     } // Member
 247   } // methods
 248 
 249   [1] { // Attributes
 250     Attr(#19, 2) { // SourceFile at 0x0198
 251       #20;
 252     } // end SourceFile
 253   } // Attributes
 254 } // end class defValBadMajorVersion
 255 
 256 ///////////////////////////////////////////////////////////
 257 
 258 // The constant pool index of a defaultvalue opcode (0xCB) in the Code
 259 // attribute was changed to 2.  Since this index now points to a Field
 260 // entry instead of a Class entry, a VerifyError exception should get thrown.
 261 //
 262 class defValWrongCPType {
 263   0xCAFEBABE;
 264   0; // minor version
<span class="line-modified"> 265   59; // version</span>
 266   [27] { // Constant Pool
 267     ; // first element is empty
 268     Method #7 #21; // #1     at 0x0A
 269     Field #3 #22; // #2     at 0x0F
 270     class #23; // #3     at 0x14
 271     int 0x01234567; // #4     at 0x17
 272     Method #3 #24; // #5     at 0x1C
 273     Field #3 #25; // #6     at 0x21
 274     class #26; // #7     at 0x26
 275     Utf8 &quot;VT&quot;; // #8     at 0x29
 276     Utf8 &quot;LdefValWrongCPType;&quot;; // #9     at 0x2E
 277     Utf8 &quot;int_v&quot;; // #10     at 0x38
 278     Utf8 &quot;I&quot;; // #11     at 0x40
 279     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
 280     Utf8 &quot;()V&quot;; // #13     at 0x4D
 281     Utf8 &quot;Code&quot;; // #14     at 0x53
 282     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
 283     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
 284     Utf8 &quot;(I)LdefValWrongCPType;&quot;; // #17     at 0x78
 285     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
</pre>
<hr />
<pre>
 346       } // Attributes
 347     } // Member
 348   } // methods
 349 
 350   [1] { // Attributes
 351     Attr(#19, 2) { // SourceFile at 0x0198
 352       #20;
 353     } // end SourceFile
 354   } // Attributes
 355 } // end class defValWrongCPType
 356 
 357 ///////////////////////////////////////////////////////////
 358 
 359 // The constant pool index of the withfield opcode (0xCC) in the Code
 360 // attribute was changed to 0x82.  Since this index is outside the range of
 361 // the constant pool, a VerifyError exception should get thrown.
 362 //
 363 class wthFldBadCP {
 364   0xCAFEBABE;
 365   0; // minor version
<span class="line-modified"> 366   59; // version</span>
 367   [20] { // Constant Pool
 368     ; // first element is empty
 369     Method #4 #17; // #1     at 0x0A
 370     Field #3 #18; // #2     at 0x0F
 371     class #12; // #3     at 0x14
 372     class #19; // #4     at 0x17
 373     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 374     Utf8 &quot;I&quot;; // #6     at 0x22
 375     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 376     Utf8 &quot;()V&quot;; // #8     at 0x2F
 377     Utf8 &quot;Code&quot;; // #9     at 0x35
 378     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 379     Utf8 &quot;makewthFldBadCP&quot;; // #11     at 0x4E
 380     Utf8 &quot;wthFldBadCP&quot;; // #12     at 0x60
 381     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 382     Utf8 &quot;(I)LwthFldBadCP;&quot;; // #14     at 0x7B
 383     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 384     Utf8 &quot;wthFldBadCP.java&quot;; // #16     at 0x9B
 385     NameAndType #7 #8; // #17     at 0xAE
 386     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 464     Attr(#15, 2) { // SourceFile at 0x0153
 465       #16;
 466     } // end SourceFile
 467     ;
 468     Attr(#13, 4) { // ValueTypes at 0x015B
 469       0x00010003;
 470     } // end ValueTypes
 471   } // Attributes
 472 } // end class wthFldBadCP
 473 
 474 ///////////////////////////////////////////////////////////
 475 
 476 // The opcode at bytecode position 5 in the Code array was changed to aload_1
 477 // (0x2B).  This should cause a VerifyError because now the first operand on the
 478 // stack for the withfield opcode (0xCC at bytecode position 6) does not match
 479 // the type (int) of the field being assigned to.
 480 //
 481 class wthFldBadFldVal {
 482   0xCAFEBABE;
 483   0; // minor version
<span class="line-modified"> 484   59; // version</span>
 485   [20] { // Constant Pool
 486     ; // first element is empty
 487     Method #4 #17; // #1     at 0x0A
 488     Field #3 #18; // #2     at 0x0F
 489     class #12; // #3     at 0x14
 490     class #19; // #4     at 0x17
 491     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 492     Utf8 &quot;I&quot;; // #6     at 0x22
 493     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 494     Utf8 &quot;()V&quot;; // #8     at 0x2F
 495     Utf8 &quot;Code&quot;; // #9     at 0x35
 496     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 497     Utf8 &quot;makewthFldBadFldVal&quot;; // #11     at 0x4E
 498     Utf8 &quot;wthFldBadFldVal&quot;; // #12     at 0x60
 499     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 500     Utf8 &quot;(I)LwthFldBadFldVal;&quot;; // #14     at 0x7B
 501     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 502     Utf8 &quot;wthFldBadFldVal.java&quot;; // #16     at 0x9B
 503     NameAndType #7 #8; // #17     at 0xAE
 504     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 581   [2] { // Attributes
 582     Attr(#15, 2) { // SourceFile at 0x0153
 583       #16;
 584     } // end SourceFile
 585     ;
 586     Attr(#13, 4) { // ValueTypes at 0x015B
 587       0x00010003;
 588     } // end ValueTypes
 589   } // Attributes
 590 } // end class wthFldBadFldVal
 591 
 592 ///////////////////////////////////////////////////////////
 593 
 594 // The opcode at bytecode position 4 in the Code array was changed to iload_1
 595 // (0x1A).  This should cause a VerifyError because the second operand on the stack
 596 // for the withfield opcode (0xCC at bytecode position 6) must be a reference.
 597 //
 598 class wthFldBadFldRef {
 599   0xCAFEBABE;
 600   0; // minor version
<span class="line-modified"> 601   59; // version</span>
 602   [20] { // Constant Pool
 603     ; // first element is empty
 604     Method #4 #17; // #1     at 0x0A
 605     Field #3 #18; // #2     at 0x0F
 606     class #12; // #3     at 0x14
 607     class #19; // #4     at 0x17
 608     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 609     Utf8 &quot;I&quot;; // #6     at 0x22
 610     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 611     Utf8 &quot;()V&quot;; // #8     at 0x2F
 612     Utf8 &quot;Code&quot;; // #9     at 0x35
 613     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 614     Utf8 &quot;makewthFldBadFldRef&quot;; // #11     at 0x4E
 615     Utf8 &quot;wthFldBadFldRef&quot;; // #12     at 0x60
 616     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 617     Utf8 &quot;(I)LwthFldBadFldRef;&quot;; // #14     at 0x7B
 618     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 619     Utf8 &quot;wthFldBadFldRef.java&quot;; // #16     at 0x9B
 620     NameAndType #7 #8; // #17     at 0xAE
 621     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 800       } // Attributes
 801     } // Member
 802   } // methods
 803 
 804   [1] { // Attributes
 805     Attr(#19, 2) { // SourceFile at 0x0198
 806       #20;
 807     } // end SourceFile
 808   } // Attributes
 809 } // end class wthFldBadMajorVersion
 810 
 811 ///////////////////////////////////////////////////////////
 812 
 813 // The constant pool index of a withfield opcode (0xCC) in the Code
 814 // attribute was changed to 1.  Since this index now points to a Method
 815 // entry instead of a Field entry, a VerifyError exception should get thrown.
 816 //
 817 class wthFldWrongCPType {
 818   0xCAFEBABE;
 819   0; // minor version
<span class="line-modified"> 820   59; // version</span>
 821   [20] { // Constant Pool
 822     ; // first element is empty
 823     Method #4 #17; // #1     at 0x0A
 824     Field #3 #18; // #2     at 0x0F
 825     class #12; // #3     at 0x14
 826     class #19; // #4     at 0x17
 827     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 828     Utf8 &quot;I&quot;; // #6     at 0x22
 829     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 830     Utf8 &quot;()V&quot;; // #8     at 0x2F
 831     Utf8 &quot;Code&quot;; // #9     at 0x35
 832     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 833     Utf8 &quot;makewthFldWrongCPType&quot;; // #11     at 0x4E
 834     Utf8 &quot;wthFldWrongCPType&quot;; // #12     at 0x60
 835     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 836     Utf8 &quot;(I)LwthFldWrongCPType;&quot;; // #14     at 0x7B
 837     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 838     Utf8 &quot;wthFldWrongCPType.java&quot;; // #16     at 0x9B
 839     NameAndType #7 #8; // #17     at 0xAE
 840     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 919       #16;
 920     } // end SourceFile
 921     ;
 922     Attr(#13, 4) { // ValueTypes at 0x015B
 923       0x00010003;
 924     } // end ValueTypes
 925   } // Attributes
 926 } // end class wthFldWrongCPType
 927 
 928 ///////////////////////////////////////////////////////////
 929 
 930 // A new fieldRef was added to the constant pool to point to a field in
 931 // java/lang/Object.  The withfield opcode (0XCC) was changed to use this new
 932 // cp entry.  This should cause a VerifyError because even though inline types
 933 // are assignable to java.lang.Object, withfield requires that the cp field class
 934 // and the inline type on the stack, in this case &#39;wthFldObject&#39;, be identical.
 935 //
 936 class wthFldObject {
 937   0xCAFEBABE;
 938   0; // minor version
<span class="line-modified"> 939   59; // version</span>
 940   [22] { // Constant Pool
 941     ; // first element is empty
 942     Method #4 #17; // #1     at 0x0A
 943     Field #3 #18; // #2     at 0x0F
 944     class #12; // #3     at 0x14
 945     class #19; // #4     at 0x17
 946     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 947     Utf8 &quot;I&quot;; // #6     at 0x22
 948     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 949     Utf8 &quot;()V&quot;; // #8     at 0x2F
 950     Utf8 &quot;Code&quot;; // #9     at 0x35
 951     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 952     Utf8 &quot;makewthFldObject&quot;; // #11     at 0x4E
 953     Utf8 &quot;wthFldObject&quot;; // #12     at 0x60
 954     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 955     Utf8 &quot;(I)LwthFldObject;&quot;; // #14     at 0x7B
 956     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 957     Utf8 &quot;wthFldObject.java&quot;; // #16     at 0x9B
 958     NameAndType #7 #8; // #17     at 0xAE
 959     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
1041     Attr(#15, 2) { // SourceFile at 0x0153
1042       #16;
1043     } // end SourceFile
1044     ;
1045     Attr(#13, 4) { // ValueTypes at 0x015B
1046       0x00010003;
1047     } // end ValueTypes
1048   } // Attributes
1049 } // end class wthFldObject
1050 
1051 ///////////////////////////////////////////////////////////
1052 
1053 // The astore_1 opcode (0x4C) was changed to a monitorenter (0xC2) opcode but
1054 // the operand on the stack is an inline type.
1055 // This should cause a VerifyError because the operand for opcode monitorenter
1056 // cannot be an inline type.
1057 //
1058 class monEnterVT {
1059   0xCAFEBABE;
1060   0; // minor version
<span class="line-modified">1061   59; // version</span>
1062   [46] { // Constant Pool
1063     ; // first element is empty
1064     class #23; // #1     at 0x0A
1065     Field #1 #24; // #2     at 0x0D
1066     InvokeDynamic 0s #27; // #3     at 0x12
1067     InvokeDynamic 0s #28; // #4     at 0x17
1068     InvokeDynamic 0s #29; // #5     at 0x1C
1069     class #30; // #6     at 0x21
1070     Utf8 &quot;int_v&quot;; // #7     at 0x24
1071     Utf8 &quot;I&quot;; // #8     at 0x2C
1072     Utf8 &quot;makemonEnterVT&quot;; // #9     at 0x30
1073     Utf8 &quot;(I)QmonEnterVT;&quot;; // #10     at 0x41
1074     Utf8 &quot;Code&quot;; // #11     at 0x53
1075     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x5A
1076     Utf8 &quot;hashCode&quot;; // #13     at 0x6C
1077     Utf8 &quot;()I&quot;; // #14     at 0x77
1078     Utf8 &quot;equals&quot;; // #15     at 0x7D
1079     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x86
1080     Utf8 &quot;toString&quot;; // #17     at 0x9E
1081     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0xA9
</pre>
<hr />
<pre>
1269         {  //  bootstrap_method
1270           #26; // bootstrap_method_ref
1271           [0] { // bootstrap_arguments
1272           }  //  bootstrap_arguments
1273         }  //  bootstrap_method
1274       }
1275     } // end BootstrapMethods
1276   } // Attributes
1277 } // end class monEnterVT
1278 
1279 ///////////////////////////////////////////////////////////
1280 
1281 // The cp entry for the defaultvalue opcode was changed to a reference that
1282 // is not an inline type.
1283 // This should cause a VerifyError because the cp entry for opcode defaultvalue
1284 // must be an inline type.
1285 //
1286 class defValueObj {
1287   0xCAFEBABE;
1288   0; // minor version
<span class="line-modified">1289   59; // version</span>
1290   [46] { // Constant Pool
1291     ; // first element is empty
1292     class #23; // #1     at 0x0A
1293     Field #1 #24; // #2     at 0x0D
1294     InvokeDynamic 0s #27; // #3     at 0x12
1295     InvokeDynamic 0s #28; // #4     at 0x17
1296     InvokeDynamic 0s #29; // #5     at 0x1C
1297     class #30; // #6     at 0x21
1298     Utf8 &quot;int_v&quot;; // #7     at 0x24
1299     Utf8 &quot;I&quot;; // #8     at 0x2C
1300     Utf8 &quot;makedefValueObj&quot;; // #9     at 0x30
1301     Utf8 &quot;(I)QdefValueObj;&quot;; // #10     at 0x41
1302     Utf8 &quot;Code&quot;; // #11     at 0x53
1303     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x5A
1304     Utf8 &quot;hashCode&quot;; // #13     at 0x6C
1305     Utf8 &quot;()I&quot;; // #14     at 0x77
1306     Utf8 &quot;equals&quot;; // #15     at 0x7D
1307     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x86
1308     Utf8 &quot;toString&quot;; // #17     at 0x9E
1309     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0xA9
</pre>
<hr />
<pre>
1497         {  //  bootstrap_method
1498           #26; // bootstrap_method_ref
1499           [0] { // bootstrap_arguments
1500           }  //  bootstrap_arguments
1501         }  //  bootstrap_method
1502       }
1503     } // end BootstrapMethods
1504   } // Attributes
1505 } // end class defValueObj
1506 
1507 ///////////////////////////////////////////////////////////
1508 
1509 // The operand for the inline type for the defaultvalue opcode was changed to a
1510 // reference that is not an inline type.
1511 // This should cause a VerifyError because the reference operand for a withfield
1512 // opcode must be an inline type.
1513 //
1514 class withfieldObj {
1515   0xCAFEBABE;
1516   0; // minor version
<span class="line-modified">1517   59; // version</span>
1518   [23] { // Constant Pool
1519     ; // first element is empty
1520     Method #5 #19; // #1     at 0x0A
1521     Field #3 #20; // #2     at 0x0F
1522     class #13; // #3     at 0x14
1523     String #21; // #4     at 0x17
1524     class #22; // #5     at 0x1A
1525     Utf8 &quot;int_v&quot;; // #6     at 0x1D
1526     Utf8 &quot;I&quot;; // #7     at 0x25
1527     Utf8 &quot;&lt;init&gt;&quot;; // #8     at 0x29
1528     Utf8 &quot;()V&quot;; // #9     at 0x32
1529     Utf8 &quot;Code&quot;; // #10     at 0x38
1530     Utf8 &quot;LineNumberTable&quot;; // #11     at 0x3F
1531     Utf8 &quot;makewithfieldObj&quot;; // #12     at 0x51
1532     Utf8 &quot;withfieldObj&quot;; // #13     at 0x64
1533     Utf8 &quot;ValueTypes&quot;; // #14     at 0x73
1534     Utf8 &quot;(ILjava/lang/String;)LwithfieldObj;&quot;; // #15     at 0x80
1535     Utf8 &quot;StackMapTable&quot;; // #16     at 0xA6
1536     Utf8 &quot;SourceFile&quot;; // #17     at 0xB6
1537     Utf8 &quot;withfieldObj.java&quot;; // #18     at 0xC3
</pre>
</td>
<td>
<hr />
<pre>
  43 //  static Value makeValue(int); descriptor: (I)LValue; flags: (0x0008) ACC_STATIC
  44 //    Code:
  45 //      stack=2, locals=2, args_size=1
  46 //         0: defaultvalue  #3                  // class Value
  47 //         3: astore_1
  48 //         4: aload_1
  49 //         5: iload_0
  50 //         6: withfield     #2                  // Field int_v:I
  51 //         9: astore_1
  52 //        10: aload_1
  53 //        11: areturn
  54 
  55 
  56 // The constant pool index of the defaultvalue opcode (0xCB) in the Code
  57 // attribute was changed to 0x93.  Since this index is outside the range of
  58 // the constant pool, a VerifyError exception should get thrown.
  59 //
  60 class defValBadCP {
  61   0xCAFEBABE;
  62   0; // minor version
<span class="line-modified">  63   60; // version</span>
  64   [27] { // Constant Pool
  65     ; // first element is empty
  66     Method #7 #21; // #1     at 0x0A
  67     Field #3 #22; // #2     at 0x0F
  68     class #23; // #3     at 0x14
  69     int 0x01234567; // #4     at 0x17
  70     Method #3 #24; // #5     at 0x1C
  71     Field #3 #25; // #6     at 0x21
  72     class #26; // #7     at 0x26
  73     Utf8 &quot;VT&quot;; // #8     at 0x29
  74     Utf8 &quot;LdefValBadCP;&quot;; // #9     at 0x2E
  75     Utf8 &quot;int_v&quot;; // #10     at 0x38
  76     Utf8 &quot;I&quot;; // #11     at 0x40
  77     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
  78     Utf8 &quot;()V&quot;; // #13     at 0x4D
  79     Utf8 &quot;Code&quot;; // #14     at 0x53
  80     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
  81     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
  82     Utf8 &quot;(I)LdefValBadCP;&quot;; // #17     at 0x78
  83     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
</pre>
<hr />
<pre>
 245       } // Attributes
 246     } // Member
 247   } // methods
 248 
 249   [1] { // Attributes
 250     Attr(#19, 2) { // SourceFile at 0x0198
 251       #20;
 252     } // end SourceFile
 253   } // Attributes
 254 } // end class defValBadMajorVersion
 255 
 256 ///////////////////////////////////////////////////////////
 257 
 258 // The constant pool index of a defaultvalue opcode (0xCB) in the Code
 259 // attribute was changed to 2.  Since this index now points to a Field
 260 // entry instead of a Class entry, a VerifyError exception should get thrown.
 261 //
 262 class defValWrongCPType {
 263   0xCAFEBABE;
 264   0; // minor version
<span class="line-modified"> 265   60; // version</span>
 266   [27] { // Constant Pool
 267     ; // first element is empty
 268     Method #7 #21; // #1     at 0x0A
 269     Field #3 #22; // #2     at 0x0F
 270     class #23; // #3     at 0x14
 271     int 0x01234567; // #4     at 0x17
 272     Method #3 #24; // #5     at 0x1C
 273     Field #3 #25; // #6     at 0x21
 274     class #26; // #7     at 0x26
 275     Utf8 &quot;VT&quot;; // #8     at 0x29
 276     Utf8 &quot;LdefValWrongCPType;&quot;; // #9     at 0x2E
 277     Utf8 &quot;int_v&quot;; // #10     at 0x38
 278     Utf8 &quot;I&quot;; // #11     at 0x40
 279     Utf8 &quot;&lt;init&gt;&quot;; // #12     at 0x44
 280     Utf8 &quot;()V&quot;; // #13     at 0x4D
 281     Utf8 &quot;Code&quot;; // #14     at 0x53
 282     Utf8 &quot;LineNumberTable&quot;; // #15     at 0x5A
 283     Utf8 &quot;makeValue&quot;; // #16     at 0x6C
 284     Utf8 &quot;(I)LdefValWrongCPType;&quot;; // #17     at 0x78
 285     Utf8 &quot;&lt;clinit&gt;&quot;; // #18     at 0x85
</pre>
<hr />
<pre>
 346       } // Attributes
 347     } // Member
 348   } // methods
 349 
 350   [1] { // Attributes
 351     Attr(#19, 2) { // SourceFile at 0x0198
 352       #20;
 353     } // end SourceFile
 354   } // Attributes
 355 } // end class defValWrongCPType
 356 
 357 ///////////////////////////////////////////////////////////
 358 
 359 // The constant pool index of the withfield opcode (0xCC) in the Code
 360 // attribute was changed to 0x82.  Since this index is outside the range of
 361 // the constant pool, a VerifyError exception should get thrown.
 362 //
 363 class wthFldBadCP {
 364   0xCAFEBABE;
 365   0; // minor version
<span class="line-modified"> 366   60; // version</span>
 367   [20] { // Constant Pool
 368     ; // first element is empty
 369     Method #4 #17; // #1     at 0x0A
 370     Field #3 #18; // #2     at 0x0F
 371     class #12; // #3     at 0x14
 372     class #19; // #4     at 0x17
 373     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 374     Utf8 &quot;I&quot;; // #6     at 0x22
 375     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 376     Utf8 &quot;()V&quot;; // #8     at 0x2F
 377     Utf8 &quot;Code&quot;; // #9     at 0x35
 378     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 379     Utf8 &quot;makewthFldBadCP&quot;; // #11     at 0x4E
 380     Utf8 &quot;wthFldBadCP&quot;; // #12     at 0x60
 381     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 382     Utf8 &quot;(I)LwthFldBadCP;&quot;; // #14     at 0x7B
 383     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 384     Utf8 &quot;wthFldBadCP.java&quot;; // #16     at 0x9B
 385     NameAndType #7 #8; // #17     at 0xAE
 386     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 464     Attr(#15, 2) { // SourceFile at 0x0153
 465       #16;
 466     } // end SourceFile
 467     ;
 468     Attr(#13, 4) { // ValueTypes at 0x015B
 469       0x00010003;
 470     } // end ValueTypes
 471   } // Attributes
 472 } // end class wthFldBadCP
 473 
 474 ///////////////////////////////////////////////////////////
 475 
 476 // The opcode at bytecode position 5 in the Code array was changed to aload_1
 477 // (0x2B).  This should cause a VerifyError because now the first operand on the
 478 // stack for the withfield opcode (0xCC at bytecode position 6) does not match
 479 // the type (int) of the field being assigned to.
 480 //
 481 class wthFldBadFldVal {
 482   0xCAFEBABE;
 483   0; // minor version
<span class="line-modified"> 484   60; // version</span>
 485   [20] { // Constant Pool
 486     ; // first element is empty
 487     Method #4 #17; // #1     at 0x0A
 488     Field #3 #18; // #2     at 0x0F
 489     class #12; // #3     at 0x14
 490     class #19; // #4     at 0x17
 491     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 492     Utf8 &quot;I&quot;; // #6     at 0x22
 493     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 494     Utf8 &quot;()V&quot;; // #8     at 0x2F
 495     Utf8 &quot;Code&quot;; // #9     at 0x35
 496     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 497     Utf8 &quot;makewthFldBadFldVal&quot;; // #11     at 0x4E
 498     Utf8 &quot;wthFldBadFldVal&quot;; // #12     at 0x60
 499     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 500     Utf8 &quot;(I)LwthFldBadFldVal;&quot;; // #14     at 0x7B
 501     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 502     Utf8 &quot;wthFldBadFldVal.java&quot;; // #16     at 0x9B
 503     NameAndType #7 #8; // #17     at 0xAE
 504     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 581   [2] { // Attributes
 582     Attr(#15, 2) { // SourceFile at 0x0153
 583       #16;
 584     } // end SourceFile
 585     ;
 586     Attr(#13, 4) { // ValueTypes at 0x015B
 587       0x00010003;
 588     } // end ValueTypes
 589   } // Attributes
 590 } // end class wthFldBadFldVal
 591 
 592 ///////////////////////////////////////////////////////////
 593 
 594 // The opcode at bytecode position 4 in the Code array was changed to iload_1
 595 // (0x1A).  This should cause a VerifyError because the second operand on the stack
 596 // for the withfield opcode (0xCC at bytecode position 6) must be a reference.
 597 //
 598 class wthFldBadFldRef {
 599   0xCAFEBABE;
 600   0; // minor version
<span class="line-modified"> 601   60; // version</span>
 602   [20] { // Constant Pool
 603     ; // first element is empty
 604     Method #4 #17; // #1     at 0x0A
 605     Field #3 #18; // #2     at 0x0F
 606     class #12; // #3     at 0x14
 607     class #19; // #4     at 0x17
 608     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 609     Utf8 &quot;I&quot;; // #6     at 0x22
 610     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 611     Utf8 &quot;()V&quot;; // #8     at 0x2F
 612     Utf8 &quot;Code&quot;; // #9     at 0x35
 613     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 614     Utf8 &quot;makewthFldBadFldRef&quot;; // #11     at 0x4E
 615     Utf8 &quot;wthFldBadFldRef&quot;; // #12     at 0x60
 616     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 617     Utf8 &quot;(I)LwthFldBadFldRef;&quot;; // #14     at 0x7B
 618     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 619     Utf8 &quot;wthFldBadFldRef.java&quot;; // #16     at 0x9B
 620     NameAndType #7 #8; // #17     at 0xAE
 621     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 800       } // Attributes
 801     } // Member
 802   } // methods
 803 
 804   [1] { // Attributes
 805     Attr(#19, 2) { // SourceFile at 0x0198
 806       #20;
 807     } // end SourceFile
 808   } // Attributes
 809 } // end class wthFldBadMajorVersion
 810 
 811 ///////////////////////////////////////////////////////////
 812 
 813 // The constant pool index of a withfield opcode (0xCC) in the Code
 814 // attribute was changed to 1.  Since this index now points to a Method
 815 // entry instead of a Field entry, a VerifyError exception should get thrown.
 816 //
 817 class wthFldWrongCPType {
 818   0xCAFEBABE;
 819   0; // minor version
<span class="line-modified"> 820   60; // version</span>
 821   [20] { // Constant Pool
 822     ; // first element is empty
 823     Method #4 #17; // #1     at 0x0A
 824     Field #3 #18; // #2     at 0x0F
 825     class #12; // #3     at 0x14
 826     class #19; // #4     at 0x17
 827     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 828     Utf8 &quot;I&quot;; // #6     at 0x22
 829     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 830     Utf8 &quot;()V&quot;; // #8     at 0x2F
 831     Utf8 &quot;Code&quot;; // #9     at 0x35
 832     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 833     Utf8 &quot;makewthFldWrongCPType&quot;; // #11     at 0x4E
 834     Utf8 &quot;wthFldWrongCPType&quot;; // #12     at 0x60
 835     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 836     Utf8 &quot;(I)LwthFldWrongCPType;&quot;; // #14     at 0x7B
 837     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 838     Utf8 &quot;wthFldWrongCPType.java&quot;; // #16     at 0x9B
 839     NameAndType #7 #8; // #17     at 0xAE
 840     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
 919       #16;
 920     } // end SourceFile
 921     ;
 922     Attr(#13, 4) { // ValueTypes at 0x015B
 923       0x00010003;
 924     } // end ValueTypes
 925   } // Attributes
 926 } // end class wthFldWrongCPType
 927 
 928 ///////////////////////////////////////////////////////////
 929 
 930 // A new fieldRef was added to the constant pool to point to a field in
 931 // java/lang/Object.  The withfield opcode (0XCC) was changed to use this new
 932 // cp entry.  This should cause a VerifyError because even though inline types
 933 // are assignable to java.lang.Object, withfield requires that the cp field class
 934 // and the inline type on the stack, in this case &#39;wthFldObject&#39;, be identical.
 935 //
 936 class wthFldObject {
 937   0xCAFEBABE;
 938   0; // minor version
<span class="line-modified"> 939   60; // version</span>
 940   [22] { // Constant Pool
 941     ; // first element is empty
 942     Method #4 #17; // #1     at 0x0A
 943     Field #3 #18; // #2     at 0x0F
 944     class #12; // #3     at 0x14
 945     class #19; // #4     at 0x17
 946     Utf8 &quot;int_v&quot;; // #5     at 0x1A
 947     Utf8 &quot;I&quot;; // #6     at 0x22
 948     Utf8 &quot;&lt;init&gt;&quot;; // #7     at 0x26
 949     Utf8 &quot;()V&quot;; // #8     at 0x2F
 950     Utf8 &quot;Code&quot;; // #9     at 0x35
 951     Utf8 &quot;LineNumberTable&quot;; // #10     at 0x3C
 952     Utf8 &quot;makewthFldObject&quot;; // #11     at 0x4E
 953     Utf8 &quot;wthFldObject&quot;; // #12     at 0x60
 954     Utf8 &quot;ValueTypes&quot;; // #13     at 0x6E
 955     Utf8 &quot;(I)LwthFldObject;&quot;; // #14     at 0x7B
 956     Utf8 &quot;SourceFile&quot;; // #15     at 0x8E
 957     Utf8 &quot;wthFldObject.java&quot;; // #16     at 0x9B
 958     NameAndType #7 #8; // #17     at 0xAE
 959     NameAndType #5 #6; // #18     at 0xB3
</pre>
<hr />
<pre>
1041     Attr(#15, 2) { // SourceFile at 0x0153
1042       #16;
1043     } // end SourceFile
1044     ;
1045     Attr(#13, 4) { // ValueTypes at 0x015B
1046       0x00010003;
1047     } // end ValueTypes
1048   } // Attributes
1049 } // end class wthFldObject
1050 
1051 ///////////////////////////////////////////////////////////
1052 
1053 // The astore_1 opcode (0x4C) was changed to a monitorenter (0xC2) opcode but
1054 // the operand on the stack is an inline type.
1055 // This should cause a VerifyError because the operand for opcode monitorenter
1056 // cannot be an inline type.
1057 //
1058 class monEnterVT {
1059   0xCAFEBABE;
1060   0; // minor version
<span class="line-modified">1061   60; // version</span>
1062   [46] { // Constant Pool
1063     ; // first element is empty
1064     class #23; // #1     at 0x0A
1065     Field #1 #24; // #2     at 0x0D
1066     InvokeDynamic 0s #27; // #3     at 0x12
1067     InvokeDynamic 0s #28; // #4     at 0x17
1068     InvokeDynamic 0s #29; // #5     at 0x1C
1069     class #30; // #6     at 0x21
1070     Utf8 &quot;int_v&quot;; // #7     at 0x24
1071     Utf8 &quot;I&quot;; // #8     at 0x2C
1072     Utf8 &quot;makemonEnterVT&quot;; // #9     at 0x30
1073     Utf8 &quot;(I)QmonEnterVT;&quot;; // #10     at 0x41
1074     Utf8 &quot;Code&quot;; // #11     at 0x53
1075     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x5A
1076     Utf8 &quot;hashCode&quot;; // #13     at 0x6C
1077     Utf8 &quot;()I&quot;; // #14     at 0x77
1078     Utf8 &quot;equals&quot;; // #15     at 0x7D
1079     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x86
1080     Utf8 &quot;toString&quot;; // #17     at 0x9E
1081     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0xA9
</pre>
<hr />
<pre>
1269         {  //  bootstrap_method
1270           #26; // bootstrap_method_ref
1271           [0] { // bootstrap_arguments
1272           }  //  bootstrap_arguments
1273         }  //  bootstrap_method
1274       }
1275     } // end BootstrapMethods
1276   } // Attributes
1277 } // end class monEnterVT
1278 
1279 ///////////////////////////////////////////////////////////
1280 
1281 // The cp entry for the defaultvalue opcode was changed to a reference that
1282 // is not an inline type.
1283 // This should cause a VerifyError because the cp entry for opcode defaultvalue
1284 // must be an inline type.
1285 //
1286 class defValueObj {
1287   0xCAFEBABE;
1288   0; // minor version
<span class="line-modified">1289   60; // version</span>
1290   [46] { // Constant Pool
1291     ; // first element is empty
1292     class #23; // #1     at 0x0A
1293     Field #1 #24; // #2     at 0x0D
1294     InvokeDynamic 0s #27; // #3     at 0x12
1295     InvokeDynamic 0s #28; // #4     at 0x17
1296     InvokeDynamic 0s #29; // #5     at 0x1C
1297     class #30; // #6     at 0x21
1298     Utf8 &quot;int_v&quot;; // #7     at 0x24
1299     Utf8 &quot;I&quot;; // #8     at 0x2C
1300     Utf8 &quot;makedefValueObj&quot;; // #9     at 0x30
1301     Utf8 &quot;(I)QdefValueObj;&quot;; // #10     at 0x41
1302     Utf8 &quot;Code&quot;; // #11     at 0x53
1303     Utf8 &quot;LineNumberTable&quot;; // #12     at 0x5A
1304     Utf8 &quot;hashCode&quot;; // #13     at 0x6C
1305     Utf8 &quot;()I&quot;; // #14     at 0x77
1306     Utf8 &quot;equals&quot;; // #15     at 0x7D
1307     Utf8 &quot;(Ljava/lang/Object;)Z&quot;; // #16     at 0x86
1308     Utf8 &quot;toString&quot;; // #17     at 0x9E
1309     Utf8 &quot;()Ljava/lang/String;&quot;; // #18     at 0xA9
</pre>
<hr />
<pre>
1497         {  //  bootstrap_method
1498           #26; // bootstrap_method_ref
1499           [0] { // bootstrap_arguments
1500           }  //  bootstrap_arguments
1501         }  //  bootstrap_method
1502       }
1503     } // end BootstrapMethods
1504   } // Attributes
1505 } // end class defValueObj
1506 
1507 ///////////////////////////////////////////////////////////
1508 
1509 // The operand for the inline type for the defaultvalue opcode was changed to a
1510 // reference that is not an inline type.
1511 // This should cause a VerifyError because the reference operand for a withfield
1512 // opcode must be an inline type.
1513 //
1514 class withfieldObj {
1515   0xCAFEBABE;
1516   0; // minor version
<span class="line-modified">1517   60; // version</span>
1518   [23] { // Constant Pool
1519     ; // first element is empty
1520     Method #5 #19; // #1     at 0x0A
1521     Field #3 #20; // #2     at 0x0F
1522     class #13; // #3     at 0x14
1523     String #21; // #4     at 0x17
1524     class #22; // #5     at 0x1A
1525     Utf8 &quot;int_v&quot;; // #6     at 0x1D
1526     Utf8 &quot;I&quot;; // #7     at 0x25
1527     Utf8 &quot;&lt;init&gt;&quot;; // #8     at 0x29
1528     Utf8 &quot;()V&quot;; // #9     at 0x32
1529     Utf8 &quot;Code&quot;; // #10     at 0x38
1530     Utf8 &quot;LineNumberTable&quot;; // #11     at 0x3F
1531     Utf8 &quot;makewithfieldObj&quot;; // #12     at 0x51
1532     Utf8 &quot;withfieldObj&quot;; // #13     at 0x64
1533     Utf8 &quot;ValueTypes&quot;; // #14     at 0x73
1534     Utf8 &quot;(ILjava/lang/String;)LwithfieldObj;&quot;; // #15     at 0x80
1535     Utf8 &quot;StackMapTable&quot;; // #16     at 0xA6
1536     Utf8 &quot;SourceFile&quot;; // #17     at 0xB6
1537     Utf8 &quot;withfieldObj.java&quot;; // #18     at 0xC3
</pre>
</td>
</tr>
</table>
<center><a href="NoNullVT.jcod.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>